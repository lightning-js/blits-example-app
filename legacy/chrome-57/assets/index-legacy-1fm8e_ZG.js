!function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function t(t){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register([],function(e,o){"use strict";return{execute:function(){var i,r,s;const a={cleanup:Symbol("cleanup"),currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),internalEvent:Symbol("internalEvent"),intervals:Symbol("intervals"),isProxy:Symbol("isProxy"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),config:Symbol.for("config"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},l={[a.settings]:{},get(e,t=null){return e in this[a.settings]?this[a.settings][e]:t},set(e,t){"object"==typeof e?Object.keys(e).forEach(t=>{this.set(t,e[t])}):this[a.settings][e]=t}},u=()=>{},c=e=>String(e).padStart(2,"0"),d=()=>{const e=new Date;return c(e.getHours())+":"+c(e.getMinutes())+":"+c(e.getSeconds())},p=e=>{const t=l.get("debugLevel"),n={};return Object.defineProperty(n,"info",{get:()=>(t>=1||Array.isArray(t)&&t.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${e} %c ${d()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||u}),Object.defineProperty(n,"warn",{get:()=>(t>=1||Array.isArray(t)&&t.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${e} %c ${d()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||u}),Object.defineProperty(n,"error",{get:()=>(t>=1||Array.isArray(t)&&t.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${e} %c ${d()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||u}),Object.defineProperty(n,"debug",{get:()=>(t>=2||Array.isArray(t)&&t.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${e} %c (${(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||u}),n};let h;const f={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},m=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,g=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,y=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,v={},b=e=>{if(void 0!==v[e])return v[e];const t=parseInt(e).toString(16).padStart(2,"0");return v[e]=t,t},x=(e="",t="0xffffffff")=>{if((e=e.toString()).startsWith("0x")&&10===e.length)return e;if(void 0!==f[e])return f[e];if(m.test(e)){3===(e=e.replace("#","").toLowerCase()).length&&(e=e.split("").map(e=>e+e).join(""));const t="0x"+e.padEnd(8,"f");return f[e]=t,t}const n=g.exec(e);if(n){const t=b(n[3]),o=b(n[5]),i=b(n[7]);let r="ff";if(n[10]&&"rgba"===n[1]){const e=Math.min(Math.max(Math.round(255*parseFloat(n[10])),0),255);r=b(e)}const s="0x"+t+o+i+r;return f[e]=s,s}return y.test(e)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):t};let w,S;function T(e={children:[]},t=!1){const n={renderCode:["const elms = []","const elementConfigs = []","const forloops = []","const props = []","const created = []","const skips = []","let componentType","let rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0","let cmps = []"],effectsCode:[],cleanupCode:["rootComponent = null","propData = null","slotComponent = null","component = null","parent = null"],context:{props:[],components:this.components}};return w=-1,S=t,!0===S&&n.renderCode.push("\n      function propInComponent(prop, kind=\"dynamic\") {\n        const property = prop.includes('.') ? prop.split('.')[0] : prop\n        if (kind === 'reactive' || prop.includes('.') === false) {\n          if (property in component === false) {\n            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')\n          }\n        } else {\n          const nestedKeys = prop.split('.')\n          let base = component\n          for(let i =0; i<nestedKeys.length;i++){\n            if (base[nestedKeys[i]] === undefined) {\n              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')\n            }\n            base = base[nestedKeys[i]]\n          }\n        }\n      }\n    "),E.call(n,e),n.renderCode.push(`\n    return { elms, cleanup: () => {\n      ${n.cleanupCode.join("\n")}\n      cmps.length = 0\n      elms.length = 0\n      components.length = 0\n      elementConfigs.length = 0\n      forloops.length = 0\n      props.length = 0\n      skips.length = 0\n    }}\n  `),{render:new Function("parent","component","context","components","effect","getRaw","Log",n.renderCode.join("\n")),effects:n.effectsCode.map(e=>new Function("component","elms","context","components","rootComponent","effect",e)),context:n.context}}const k=function(e,t,n="dynamic"){const o=function(e){const t=e.match(/\$\$?\w+(\.\w+)?/g);if(null!==t){const e=/\$shader/;return t.filter(t=>!e.test(t))}return!1}(e);if(!1!==o)for(let i=0;i<o.length;i++){let e=o[i];"reactive"===n&&e.includes(".")&&(e=e.split(".")[0]),t.push(`propInComponent('${e.replace("$","")}', '${n}')`)}},C=function(e,t=!1,n={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const o=n.forceEffect?this.effectsCode:this.renderCode;t&&o.push(`parent = ${t}`),"key"in e&&(n.key=M(e.key,n.component));const i=n.key?`elms[${w}][${n.key}]`:`elms[${w}]`;n.key&&o.push(`\n      if(elms[${w}] === undefined) {\n        elms[${w}] = {}\n      }\n    `),o.push(`elementConfigs[${w}] = {}`),n.forloop&&o.push(`if(${i} === undefined) {`),o.push(`\n    ${i} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)\n  `),n.forloop&&o.push("}");const r=e.children;delete e.children,"Slot"===e[Symbol.for("componentType")]&&o.push(`elementConfigs[${w}][Symbol.for('isSlot')] = true`),Object.keys(e).forEach(t=>{if("slot"===t&&o.push(`\n        elementConfigs[${w}]['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '${e.slot}').shift() || parent\n      `),"key"===t)return;const r=e[t];if(_(t)){if(n.holder&&":color"===t)return;n.holder?this.effectsCode.push(`\n        if(typeof skips === 'undefined' || (typeof skips[${w}] === 'undefined' ||\n          skips[${w}].indexOf('${t.substring(1)}') === -1))\n          ${i}.set('${t.substring(1)}', ${M(e[t],n.component)})\n        `):this.effectsCode.push(`\n            ${i}.set('${t.substring(1)}', ${M(e[t],n.component)})\n          `),!0===S&&"scope."!==n.component&&r.includes("$")&&k(r,o,"reactive"),o.push(`elementConfigs[${w}]['${t.substring(1)}'] = ${M(r,n.component)}`)}else!0===S&&"scope."!==n.component&&r.includes("$")&&k(r,o),o.push(`elementConfigs[${w}]['${t}'] = ${R(r,t,n.component)}`)}),!0===n.holder&&o.push(`\n    skips[${w}] = []\n    if(typeof cmps[${w}] !== 'undefined') {\n      for(let key in cmps[${w}][Symbol.for('config')].props) {\n        delete elementConfigs[${w}][cmps[${w}][Symbol.for('config')].props[key]]\n        skips[${w}].push(cmps[${w}][Symbol.for('config')].props[key])\n      }\n    }\n    `),n.forloop&&o.push(`if(${i}.nodeId === undefined) {`),o.push(`${i}.populate(elementConfigs[${w}])`),o.push("\n    if(inSlot === true) {\n      slotChildCounter -= 1\n    }\n  "),n.forloop&&o.push("}"),r&&E.call(this,{children:r},`${i}`,n)},A=function(e,n=!1,o={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const i=o.forceEffect?this.effectsCode:this.renderCode;i.push(`\n    cmps[${w}] =\n      (context.components && context.components['${e[Symbol.for("componentType")]}']) || components['${e[Symbol.for("componentType")]}']\n  `),this.cleanupCode.push(`\n    cmps[${w}] = null\n  `),"key"in e&&(o.key=M(e.key,o.component));const r=e.children;delete e.children,C.call(this,e,n,t(t({},o),{holder:!0})),n=o.key?`elms[${w}][${o.key}]`:`elms[${w}]`,w++;const s=o.key?`elms[${w}][${o.key}]`:`elms[${w}]`;o.key&&i.push(`\n      if(elms[${w}] === undefined) {\n        elms[${w}] = {}\n      }\n    `),n&&i.push(`parent = ${n};`),i.push(`props[${w}] = {}`),this.cleanupCode.push(`props[${w}] = null`),o.forloop&&i.push(`if(${s} === undefined) {`),Object.keys(e).forEach(t=>{_(t)?(this.effectsCode.push(`\n        ${s}[Symbol.for('props')]['${t.substring(1)}'] = ${M(e[t],o.component)}`),i.push(`\n        propData = ${M(e[t],o.component)}\n        if (Array.isArray(propData) === true) {\n          propData = getRaw(propData).slice(0)\n        }\n        props[${w}]['${t.substring(1)}'] = propData`)):i.push(`props[${w}]['${t}'] = ${R(e[t],t,o.component)}`)}),i.push(`\n    componentType = props[${w}]['is'] || '${e[Symbol.for("componentType")]}'\n\n    components[${w}]\n    if(typeof componentType === 'string') {\n      components[${w}] = context.components && context.components[componentType] || components[componentType]\n      if(!components[${w}]) {\n        throw new Error('Component "${e[Symbol.for("componentType")]}" not found')\n      }\n    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {\n      components[${w}] = componentType\n    }\n\n    ${s} = components[${w}].call(null, {props: props[${w}]}, ${n}, component)\n\n    if (${s}[Symbol.for('slots')][0]) {\n      parent = ${s}[Symbol.for('slots')][0]\n      slotComponent = ${s}\n      inSlot = true\n    } else {\n      parent = ${s}[Symbol.for('children')][0]\n    }\n  `),this.cleanupCode.push(`components[${w}] = null`),o.forloop&&i.push("}"),r&&(o.forloop||i.push(`\n        if(inSlot === true) {\n          slotChildCounter = ${r.length}  + 1\n        }\n      `),w++,C.call(this,{children:r},!1,t({},o))),o.forloop||i.push("\n      if (inSlot === true && slotChildCounter === 0) {\n        inSlot = false\n      }\n    ")},I=function(e,t){const n=e[":for"];delete e[":for"];const o=e.range||e[":range"]||"{}";delete e.range,delete e[":range"];const i=e.key,r=M(i,"scope."),s=!(e.$shallow&&"false"===e.$shallow.toLowerCase());delete e.$shallow,delete e.key;const a=/(.+)\s+in\s+(.+)/gi.exec(n),[l,u]=a[1].replace("(","").replace(")","").split(/\s*,\s*/),c=new RegExp(`(scope\\.(?!${l}\\.|${u}|key)(\\w+))`,"gi"),d={renderCode:[],effectsCode:[],cleanupCode:[],context:{props:[],components:this.components}};if(t&&d.renderCode.push(`parent = ${t}`),void 0!==u){const e=new RegExp(`\\$${u}(?!['\\w])`).exec(i);Array.isArray(e)&&d.renderCode.push(`console.warn(" Using '${u}' in the key, like key=${i},  is not recommended")`)}const p=w;d.renderCode.push(`\n    created[${p}] = []\n\n    let from${p}\n    let to${p}\n\n    forloops[${p}] = (collection = [], elms, created) => {\n      const rawCollection = getRaw(collection)\n      const keys = new Set()\n      let l = rawCollection.length\n\n      const range = ${M(o)} || {}\n      from${p} = range['from'] || 0\n      to${p} = 'to' in range ? range['to'] : rawCollection.length\n\n      while(l--) {\n        const ${l} = rawCollection[l]\n  `),d.cleanupCode.push(`\n    created[${p}].length = 0\n    forloops[${p}] = null\n  `),void 0!==u&&d.renderCode.push(`\n        const ${u} = l\n    `),d.renderCode.push(`\n        if(l < to${p} && l >= from${p}) {\n          keys.add('' +  ${M(i,"")||"l"})\n        }\n      }\n  `);const h=d.renderCode.length;d.renderCode.push(`\n      created.length = 0\n      const length = rawCollection.length\n      const effects = []\n      for(let __index = 0; __index < length; __index++) {\n        if(__index < from${p} || __index >= to${p}) continue\n        const scope = Object.create(component)\n        parent = ${t}\n        scope['${l}'] = rawCollection[__index]\n  `),""!==u&&d.renderCode.push(`\n        scope['${u}'] = __index\n    `),d.renderCode.push(`\n        scope['key'] = '' + ${r||"__index"}\n  `),"ref"in e&&-1===e.ref.indexOf("$")&&(d.renderCode.push(`\n        scope['__ref'] = '${e.ref}' + __index\n    `),e.ref="$__ref"),d.renderCode.push("\n        created.push(scope.key)\n  "),"Element"===e[Symbol.for("componentType")]||"Slot"===e[Symbol.for("componentType")]||"Text"===e[Symbol.for("componentType")]?("Text"===e[Symbol.for("componentType")]&&(e.__textnode="true"),C.call(d,e,t,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):A.call(d,e,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const f=d.effectsCode.filter(e=>0===[...e.matchAll(c)].length),m=d.effectsCode.filter(e=>0!==[...e.matchAll(c)].length);!1===s&&d.renderCode.push(`\n      scope['${l}'] = null\n      scope['${l}'] = collection[__index]\n  `),f.forEach((e,t)=>{const n=e.indexOf(`scope.${t}`)>-1?`'${M(a[2],"")}'`:null;-1===e.indexOf("Symbol.for('props')")?d.renderCode.push(`\n        let eff${t} = () => {\n          ${e}\n        }\n        effect(eff${t}, ${n})\n        effects.push(eff${t})\n        component[Symbol.for('effects')].push(eff${t})\n      `):d.renderCode.push(`\n        ${e}\n      `)}),d.renderCode.push("\n    }\n    return effects\n  }");const g=[];g.push("\n      let i = created.length\n\n      while (i--) {\n        if (keys.has(created[i]) === false) {\n          const key = created[i]\n  ");const y=w;for(let x=p;x<=y;x++)g.push(`\n        elms[${x}][key] && elms[${x}][key].destroy()\n        elms[${x}][key] = null\n        delete elms[${x}][key]\n    `);g.push("\n      }\n    }\n  "),d.renderCode.splice(h,0,...g);let v=`${M(a[2],"")}`;v&&v.includes(".")&&(v=v.match(/[^.]+$/)[0]);const b=[...o.matchAll(/\$([^,} ]+)/g)].map(e=>`'${e[1]}'`);d.renderCode.push(`\n    let eff${p} = () => {\n      forloops[${p}](${R(a[2],":for")}, elms, created[${p}])\n    }\n\n    component[Symbol.for('effects')].push(eff${p})\n\n    effect(eff${p}, ['${v}', ${b.join(",")}] )\n  `),d.cleanupCode.push(`\n    eff${p} = null\n  `),m.forEach((e,t)=>{const n=[...e.matchAll(c)];let o=n.length;const i=[];for(;o--;){const t=n[o],r=`component.${t[2]}`;-1===i.indexOf(r)&&i.push(r),t[2]!==l&&(e=e.substring(0,t.index)+r+e.substring(t.index+t[1].length))}d.renderCode.push(`\n      let eff${p}_${t} = () => {\n        void ${i.join(", ")}\n        for(let __index = 0; __index < ${M(a[2])}.length; __index++) {\n          if(__index < from${p} || __index >= to${p}) continue\n          const scope = {}\n          scope['${u}'] = __index\n          scope['${l}'] = ${M(a[2])}[__index]\n          scope['key'] = ${r||"__index"}\n    `),d.cleanupCode.push(`eff${p}_${t} = null`),d.renderCode.push(`\n          ${e}\n        }\n      }\n      component[Symbol.for('effects')].push(eff${p}_${t})\n      effect(eff${p}_${t})\n    `)}),this.renderCode.push(d.renderCode.join("\n")),this.cleanupCode.push(d.cleanupCode.join("\n"))},E=function(e,t=!1,n={}){e.children&&e.children.forEach(e=>{w++,Object.keys(e).indexOf(":for")>-1?I.call(this,e,t):"Element"===e[Symbol.for("componentType")]||"Slot"===e[Symbol.for("componentType")]||"Text"===e[Symbol.for("componentType")]||"Layout"===e[Symbol.for("componentType")]?("Text"===e[Symbol.for("componentType")]&&(e.__textnode="true"),"Layout"===e[Symbol.for("componentType")]&&(e.__layout="true"),C.call(this,e,t,n)):A.call(this,e,t,n)})},M=(e,t="component.")=>{if(void 0===e)return e;const n=e.matchAll(/('.*?')+/gi),o=[];let i=0;for(const r of n)o.push(r[0]),e=e.replace(r[0],`[@@REPLACEMENT${i}@@]`),i++;return e=e.replace(/\$(\$(?=\$)|\$?)/g,(e,n)=>""===n?t:"$"===n?t+"$":void 0),o.forEach((t,n)=>{e=e.replace(`[@@REPLACEMENT${n}@@]`,t)}),e},R=(e="",t=!1,n="component.")=>{let o;if("content"===t)if(e.startsWith("$"))o=`${n}${e.replace("$","")}`;else{const t=e.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");o=`'${L(t,n)}'`}else if("color"===t||!1!==/[^0-9%\s.eE]/.test(e)||isNaN(parseFloat(e)))if("true"===e.toLowerCase())o=!0;else if("false"===e.toLowerCase())o=!1;else if(t.startsWith("@")&&e){const t=n.slice(0,-1);o=`${t}['${e.replace("$","")}'] && ${t}['${e.replace("$","")}'].bind(${t})`}else if(e.startsWith("$"))o=`${n}${e.replace("$","")}`;else{if(/\$\w+/gi.exec(e)){const t=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,i=e.match(t);if(o={},i)for(let e=0;e<i.length;e++){const t=i[e].split(/\s*:\s*/);t&&P(t[0],t[1],n,o)}return D(o)}o=`"${e}"`}else if(o=parseFloat(e),e.endsWith("%")){const e={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[t];e&&(o=`parent.node.${e} * (${o} / 100)`)}return o},_=e=>e.startsWith(":"),L=(e,t)=>{const n=[...e.matchAll(/\{\{\s*(\$\S+)\s*\}\}/g)];if(n.length)for(let[o,i]of n)e=e.replace(o,`${i.replace("$",`'+${t}`)}+'`);return e},P=(e,t,n,o)=>{t.startsWith("$")?o[e]=`${n}${t.replace("$","")}`:o[e]=t},D=e=>{const t=[];return Object.keys(e).forEach(n=>{t.push(`${n}: ${e[n]}`)}),` { ${t.join(", ")} }`},O={};let N=0;const U={},B=(e,t,n,o=[])=>{U[t]&&U[t][e]&&U[t][e].apply(n,o)};let F=null,j=null,z=!1;const $=new WeakMap,V=new Map,H=e=>{if(0!==V.size)for(const[t,n]of V){if(-1===e.indexOf(t))continue;const o=$.get(n);if(void 0!==o)for(const e of o.values())e.delete(t),V.delete(t)}},G=(e,t,n=!1)=>{if(null!==F){if(z)return;if(!0===Array.isArray(j)){if(!1===j.includes(t))return}else if(null!==j&&t!==j)return;let o=$.get(e);void 0===o&&(o=new Map,$.set(e,o));let i=o.get(t);void 0===i&&(i=new Set,o.set(t,i)),i.add(F),!0===n&&V.set(F,e)}},q=(e,t,n=!1)=>{if(!0===z)return;const o=$.get(e);if(void 0===o)return;const i=o.get(t);if(void 0!==i)for(let r of i)r(n)},W=(e,t=null)=>{F=e,j=t,F(),F=null,j=null},K=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;let n=e.length;for(;n--;){const o=e[n],i=t[n];if(Array.isArray(o)&&Array.isArray(i)){if(!1===K(o,i))return!1}else if("object"==typeof o&&null!==o&&"object"==typeof i&&null!==i){if(!1===K(Object.entries(o),Object.entries(i)))return!1}else if(o!==i)return!1}return!0},X=["push","pop","shift","unshift","splice","sort"],Y=new WeakMap,J=e=>{const t=e&&e[a.raw];return t?J(t):e},Q=(e,t=null,n,o)=>{if("object"==typeof e&&!1===Array.isArray(e)&&Object.getPrototypeOf(e)!==Object.prototype)return e;const i=Y.get(e);if(void 0!==i)return i;const r=new Proxy(e,{get:(i,r,s)=>r===a.isProxy||(r===a.raw?e:!0===Array.isArray(i)?"object"==typeof i[r]&&null!==i[r]?(!0===Array.isArray(i[r])&&G(i,r,o),Q(J(i[r]),i,r)):-1!==X.indexOf(r)?function(...e){z=!0;const o=i[r].apply(this,e);return z=!1,q(t,n),o}:"length"===r?e.length:Reflect.get(i,r,s):"object"==typeof i[r]&&null!==i[r]?(!0===Array.isArray(i[r])&&G(i,r,o),Q(J(i[r]),i,r)):(G(i,r,o),Reflect.get(i,r,s))),set(e,o,i,r){const s=J(e[o]),a=J(i);let l=!0,u=!1;return!0===Array.isArray(a)&&!0===Array.isArray(s)?u=K(s,a):s===a&&(u=!0),!1===u&&("object"==typeof i&&(!0===Array.isArray(i)?i=J(i).slice(0):null!==i&&null!==e[o]&&void 0!==e[o]&&!1===Array.isArray(e)&&Object.getPrototypeOf(i)===Object.prototype&&(i=Object.assign(r[o],i))),l=Reflect.set(e,o,i,r)),!0===l&&!1===u&&(!0===Array.isArray(e)&&o in e==!0&&q(t,n,!0),q(e,o,!0)),l}});return Y.set(e,r),r},Z=(e,t)=>(Object.keys(e).forEach(n=>{let o=e[n];if(null!==e[n]&&"object"==typeof e[n]){if(Object.getPrototypeOf(e[n])===Object.prototype)return Z(e[n]);if(!0===Array.isArray(e[n]))for(let t=0;t<X.length;t++)e[n][X[t]]=function(o){Array.prototype[X[t]].call(this,o),q(e,n)}}Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>(G(e,n,t),o),set(t){o!==t&&(o=t,q(e,n))}})}),e),ee="undefined"!=typeof Proxy,te=(e,t="Proxy",n=!1)=>(!1===ee&&(t="defineProperty"),"defineProperty"===t?Z(e,n):Q(e,void 0,void 0,n)),ne=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],oe={previous:null,current:null,get state(){return this.current},set state(e){if(ne.indexOf(e)>-1&&e!==this.current||"refocus"===e){if(h.debug(`Setting lifecycle state from ${this.current} to ${e} for ${this.component.componentId}`),this.previous=this.current,this.current=e,"refocus"===e)return;((e,t,n)=>{const o=a[e];U[t]&&U[t][o]&&U[t][o].apply(n)})(e,this.component[a.identifier],this.component),B(e,this.component[a.identifier],this.component),"focus"===e&&(this.component[a.state].hasFocus=!0),"unfocus"===e&&(this.component[a.state].hasFocus=!1)}}},ie=function(e,t,n){let o=Promise.resolve();function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},re={BASE_URL:"/legacy/chrome-57/",DEV:!1,LEGACY:!0,MODE:"production",PROD:!0,SSR:!1,VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",VITE_TMDB_KEY:"ABC123"};function se(e,t){if(!0!==pe()&&!e)throw new Error(t||"Assertion failed")}function ae(e,t,n){const o=Math.trunc(e>>>24),i=Math.trunc(e>>>16&255),r=Math.trunc(e>>>8&255),s=Math.trunc(255&e),a=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),u=Math.trunc(t>>>8&255),c=Math.trunc(255&t);return(Math.round(a*n+o*(1-n))<<24|Math.round(l*n+i*(1-n))<<16|Math.round(u*n+r*(1-n))<<8|Math.round(c*n+s*(1-n)))>>>0}function le(e,t){return(e>>>24<<24|(e>>>16&255)<<16|(e>>>8&255)<<8|Math.trunc((255&e)*t))>>>0}let ue=!0;function ce(e,t,n=!1){const o=(255&e)/255*t,i=ue?o:1,r=Math.trunc((e>>>24)*i),s=Math.trunc((e>>>16&255)*i),a=Math.trunc((e>>>8&255)*i),l=Math.trunc(255*o);return n?(l<<24|a<<16|s<<8|r)>>>0:(r<<24|s<<16|a<<8|l)>>>0}function de(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pe(){return re&&!0}let he=1;class fe{constructor(){n(this,"eventListeners",{})}on(e,t){let n=this.eventListeners[e];n||(n=[]),n.push(t),this.eventListeners[e]=n}off(e,t){const n=this.eventListeners[e];if(!n)return;if(!t)return void delete this.eventListeners[e];const o=n.indexOf(t);o>=0&&n.splice(o,1)}once(e,t){const n=(o,i)=>{this.off(e,n),t(o,i)};this.on(e,n)}emit(e,t){const n=this.eventListeners[e];n&&[...n].forEach(e=>{e(this,t)})}removeAllListeners(){this.eventListeners={}}}var me;!function(e){e[e.generic=0]="generic",e[e.color=1]="color",e[e.image=2]="image",e[e.noise=3]="noise",e[e.renderToTexture=4]="renderToTexture",e[e.subTexture=5]="subTexture"}(me||(me={}));class ge extends fe{constructor(e){super(),n(this,"txManager",void 0),n(this,"_dimensions",null),n(this,"_error",null),n(this,"state","initial"),n(this,"renderableOwners",new Set),n(this,"renderable",!1),n(this,"type",me.generic),n(this,"preventCleanup",!1),n(this,"ctxTexture",void 0),n(this,"textureData",null),this.txManager=e}get dimensions(){return this._dimensions}get error(){return this._error}setRenderableOwner(e,t){const n=this.renderableOwners.size;if(!0===t){!1===this.renderableOwners.has(e)&&this.renderableOwners.add(e);const t=this.renderableOwners.size;var o;if(t>n&&1===t)this.renderable=!0,null===(o=this.onChangeIsRenderable)||void 0===o||o.call(this,!0),this.load()}else{this.renderableOwners.delete(e);const t=this.renderableOwners.size;var i;if(t<n&&0===t)this.renderable=!1,null===(i=this.onChangeIsRenderable)||void 0===i||i.call(this,!1),this.txManager.orphanTexture(this)}}load(){this.txManager.loadTexture(this)}loadCtxTexture(){return void 0===this.ctxTexture&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var e;null===(e=this.ctxTexture)||void 0===e||e.free()}destroy(){"loaded"===this.state&&this.free(),this.freeTextureData()}freeTextureData(){this.textureData=null}setState(e,t){if(this.state===e)return;let n=null;"loaded"===e?(void 0!==t&&"width"in t==!0&&"height"in t==!0&&void 0!==t.width&&void 0!==t.height&&(this._dimensions=t),n=this._dimensions):"failed"===e&&(this._error=t,n=this._error),this.state=e,this.emit(e,n)}async getTextureData(){return null===this.textureData&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}n(ge,"TRANSITIONAL_TEXTURE_STATES",["fetching","fetched","loading"]);const ye=/^(data|ftps?|https?):/,ve=e=>[(e>>>24)/255,(e>>>16&255)/255,(e>>>8&255)/255,(255&e)/255],be=e=>[e>>>24,e>>>16&255,e>>>8&255,255&e];function xe(e){return(255&e)/255}function we(e){return`rgba(${Math.floor(255*e[0])},${Math.floor(255*e[1])},${Math.floor(255*e[2])},${Math.floor(255*e[3]).toFixed(4)})`}function Se(e,t,n,o,i){return i?(i.x1=e,i.y1=t,i.x2=n,i.y2=o,i):{x1:e,y1:t,x2:n,y2:o}}function Te(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}function ke(e,t,n){const o=Math.max(e.x,t.x),i=Math.max(e.y,t.y),r=Math.min(e.x+e.width,t.x+t.width)-o,s=Math.min(e.y+e.height,t.y+t.height)-i;return r>0&&s>0?n?(n.x=o,n.y=i,n.width=r,n.height=s,n):{x:o,y:i,width:r,height:s}:n?(n.x=0,n.y=0,n.width=0,n.height=0,n):{x:0,y:0,width:0,height:0}}function Ce(e,t){return t?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):{x:e.x,y:e.y,width:e.width,height:e.height}}function Ae(e,t){return e.x1<=t.x2&&e.y1<=t.y2&&e.x2>=t.x1&&e.y2>=t.y1}function Ie(e,t,n){return!(e<n.x1||e>n.x2||t<n.y1||t>n.y2)}function Ee(e,t){return Se(e.x1-t[3],e.y1-t[0],e.x2+t[1],e.y2+t[2])}function Me(e){return!0===e.startsWith("data:")}class Re{constructor(){n(this,"ta",void 0),n(this,"tb",void 0),n(this,"tx",void 0),n(this,"tc",void 0),n(this,"td",void 0),n(this,"ty",void 0),n(this,"_floatArr",null),n(this,"mutation",void 0),this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return _e}static multiply(e,t,n){const o=e.ta*t.ta+e.tb*t.tc,i=e.ta*t.tb+e.tb*t.td,r=e.ta*t.tx+e.tb*t.ty+e.tx,s=e.tc*t.ta+e.td*t.tc,a=e.tc*t.tb+e.td*t.td,l=e.tc*t.tx+e.td*t.ty+e.ty;return n||(n=new Re),n.ta=o,n.tb=i,n.tx=r,n.tc=s,n.td=a,n.ty=l,n.mutation=!0,n}static identity(e){return e||(e=new Re),e.ta=1,e.tb=0,e.tx=0,e.tc=0,e.td=1,e.ty=0,e.mutation=!0,e}static translate(e,t,n){return n||(n=new Re),n.ta=1,n.tb=0,n.tx=e,n.tc=0,n.td=1,n.ty=t,n.mutation=!0,n}static scale(e,t,n){return n||(n=new Re),n.ta=e,n.tb=0,n.tx=0,n.tc=0,n.td=t,n.ty=0,n.mutation=!0,n}static rotate(e,t){const n=Math.cos(e),o=Math.sin(e);return t||(t=new Re),t.ta=n,t.tb=-o,t.tx=0,t.tc=o,t.td=n,t.ty=0,t.mutation=!0,t}static copy(e,t){return t||(t=new Re),t.ta=e.ta,t.tc=e.tc,t.tb=e.tb,t.td=e.td,t.tx=e.tx,t.ty=e.ty,t.mutation=!0,t}translate(e,t){return this.tx=this.ta*e+this.tb*t+this.tx,this.ty=this.tc*e+this.td*t+this.ty,this.mutation=!0,this}scale(e,t){return this.ta=this.ta*e,this.tb=this.tb*t,this.tc=this.tc*e,this.td=this.td*t,this.mutation=!0,this}rotate(e){if(0===e||!(e%Math.PI*2))return this;const t=Math.cos(e),n=Math.sin(e),o=this.ta*t+this.tb*n,i=this.tb*t-this.ta*n,r=this.tc*t+this.td*n,s=this.td*t-this.tc*n;return this.ta=o,this.tb=i,this.tc=r,this.td=s,this.mutation=!0,this}multiply(e){return Re.multiply(this,e,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const _e=new Re;class Le{constructor(e){n(this,"data",void 0),this.data=new Float32Array(8),e&&(this.data[0]=e[0],this.data[2]=e[2],this.data[4]=e[4],this.data[6]=e[6],this.data[1]=e[1],this.data[3]=e[3],this.data[5]=e[5],this.data[7]=e[7])}static translate(e,t,n,o,i,r,s,a,l){return l||(l=new Le),l.data[0]=e,l.data[2]=n,l.data[4]=i,l.data[6]=s,l.data[1]=t,l.data[3]=o,l.data[5]=r,l.data[7]=a,l}get x1(){return this.data[0]}get x2(){return this.data[2]}get x3(){return this.data[4]}get x4(){return this.data[6]}get y1(){return this.data[1]}get y2(){return this.data[3]}get y3(){return this.data[5]}get y4(){return this.data[7]}}const Pe=(e,t,n,o)=>{const i=3*e,r=3*(n-e)-i,s=1-i-r,a=3*t,l=3*(o-t)-a,u=1-a-l;return function(e){if(e>=1)return 1;if(e<=0)return 0;let t,n,o,c=.5;for(let h=0;h<20;h++){if(t=c*(c*(c*s+r)+i),o=e-t,o>-1e-8&&o<1e-8)return c*(c*(c*u+l)+a);if(n=c*(c*(3*s)+2*r)+i,n>1e-10&&n<1e-10)break;c+=o/n}let d=0,p=1;for(let h=0;h<20;h++){if(c=.5*(d+p),t=c*(c*(c*s+r)+i),o=e-t,o>-1e-8&&o<1e-8)return c*(c*(c*u+l)+a);o<0?p=c:d=c}}},De={},Oe={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},Ne=e=>e,Ue=e=>{if("linear"===e)return Ne;if(void 0!==De[e])return De[e]||Ne;if("step-start"===e)return()=>1;if("step-end"===e)return e=>1===e?1:0;const t=Oe[e];if(void 0!==t){const[n,o,i,r]=t,s=Pe(n,o,i,r);return De[e]=s,s}return e.startsWith("cubic-bezier")?(e=>{const t=e.match(/-?\d*\.?\d+/g);if(t){const[n,o,i,r]=t,s=parseFloat(n||"0.42"),a=parseFloat(o||"0"),l=parseFloat(i||"1"),u=parseFloat(r||"1"),c=Pe(s,a,l,u);return De[e]=c,c}return console.warn("Unknown cubic-bezier timing: "+e),Ne})(e):(console.warn("Unknown timing function: "+e),Ne)};function Be(e){return(e/1024/1024).toFixed(2)}class Fe extends fe{constructor(e,t,o){var i,r,s,a,l,u;super(),n(this,"node",void 0),n(this,"props",void 0),n(this,"settings",void 0),n(this,"progress",0),n(this,"delayFor",0),n(this,"delay",0),n(this,"timingFunction",void 0),n(this,"propValuesMap",{}),n(this,"dynPropValuesMap",void 0),this.node=e,this.props=t;for(const n in t)if("shaderProps"!==n)void 0===this.propValuesMap.props&&(this.propValuesMap.props={}),this.propValuesMap.props[n]={start:e[n]||0,target:t[n]};else if("DynamicShader"!==e.shader.type){this.propValuesMap.shaderProps={};for(const n in t.shaderProps)this.propValuesMap.shaderProps[n]={start:e.shader.props[n],target:t.shaderProps[n]}}else{const n=Object.keys(t.shaderProps),o=n.length;this.dynPropValuesMap={};for(let i=0;i<o;i++){const o=n[i],r=t.shaderProps[o];this.dynPropValuesMap[o]={};const s=Object.entries(r),a=s.length;for(let t=0;t<a;t++){const[n,i]=s[t];this.dynPropValuesMap[o][n]={start:e.shader.props[o][n],target:i}}}}const c=o.easing||"linear",d=null!==(i=o.delay)&&void 0!==i?i:0;this.settings={duration:null!==(r=o.duration)&&void 0!==r?r:0,delay:d,easing:c,loop:null!==(s=o.loop)&&void 0!==s&&s,repeat:null!==(a=o.repeat)&&void 0!==a?a:0,repeatDelay:null!==(l=o.repeatDelay)&&void 0!==l?l:0,stopMethod:null!==(u=o.stopMethod)&&void 0!==u&&u},this.timingFunction=Ue(c),this.delayFor=d,this.delay=d}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(e,t){const n=Object.entries(t),o=n.length;for(let i=0;i<o;i++){const[t,o]=n[i];e[t]=o.start}}restore(){if(this.reset(),void 0!==this.propValuesMap.props&&this.restoreValues(this.node,this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){const e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(let n=0;n<t;n++){const t=e[n];this.restoreValues(this.node.shader.props[t],this.dynPropValuesMap[t])}}}reverseValues(e){const t=Object.entries(e),n=t.length;for(let o=0;o<n;o++){const[n,i]=t[o];e[n]={start:i.target,target:i.start}}}reverse(){if(this.progress=0,void 0!==this.propValuesMap.props&&this.reverseValues(this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.reverseValues(this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){const e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(let n=0;n<t;n++){const t=e[n];this.reverseValues(this.dynPropValuesMap[t])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,n){return(this.timingFunction(e)||e)*(n-t)+t}updateValue(e,t,n,o){if(1===this.progress)return t;if(0===this.progress)return n;const i=t;if(-1!==e.indexOf("color")){if(n===i)return n;if(o){return ae(n,i,this.timingFunction(this.progress)||this.progress)}return ae(n,i,this.progress)}return o?this.applyEasing(this.progress,n,i):n+(i-n)*this.progress}updateValues(e,t,n){const o=Object.entries(t),i=o.length;for(let r=0;r<i;r++){const[t,i]=o[r];e[t]=this.updateValue(t,i.target,i.start,n)}}update(e){const{duration:t,loop:n,easing:o,stopMethod:i}=this.settings,{delayFor:r}=this;if(this.node.destroyed)this.emit("destroyed",{});else if(0!==t||0!==r){if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(0!==t)if(0===this.progress&&this.emit("animating",{}),this.progress+=e/t,this.progress>1&&(this.progress=n?0:1,this.delayFor=this.delay,i))this.emit("finished",{});else{if(void 0!==this.propValuesMap.props&&this.updateValues(this.node,this.propValuesMap.props,o),void 0!==this.propValuesMap.shaderProps&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,o),void 0!==this.dynPropValuesMap){const e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(let n=0;n<t;n++){const t=e[n];this.updateValues(this.node.shader.props[t],this.dynPropValuesMap[t],o)}}this.progress<1&&this.emit("tick",{progress:this.progress}),1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}else this.emit("finished",{})}}class je extends fe{constructor(e,t){super(),n(this,"manager",void 0),n(this,"animation",void 0),n(this,"stoppedPromise",void 0),n(this,"stoppedResolve",null),n(this,"state",void 0),this.manager=e,this.animation=t,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this),this.onDestroy=this.onDestroy.bind(this)}start(){return"running"!==this.state&&"scheduled"!==this.state&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.animation.on("destroyed",this.onDestroy),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick),this.animation.off("destroy",this.onDestroy)}makeStoppedPromise(){null===this.stoppedResolve&&(this.stoppedPromise=new Promise(e=>{this.stoppedResolve=e}))}onDestroy(){this.unregisterAnimation(),this.state="stopped"}onFinished(){const{loop:e,stopMethod:t}=this.animation.settings;if("reverse"===t)return this.animation.once("finished",this.onFinished),void this.animation.reverse();e||(this.unregisterAnimation(),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null),this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(e,t){this.emit("tick",t)}}var ze;!function(e){e[e.Init=0]="Init",e[e.OutOfBounds=2]="OutOfBounds",e[e.InBounds=4]="InBounds",e[e.InViewport=8]="InViewport"}(ze||(ze={}));const $e=new Map;var Ve;$e.set(ze.Init,"init"),$e.set(ze.OutOfBounds,"outOfBounds"),$e.set(ze.InBounds,"inBounds"),$e.set(ze.InViewport,"inViewport"),function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.RenderState=512]="RenderState",e[e.IsRenderable=1024]="IsRenderable",e[e.RenderTexture=2048]="RenderTexture",e[e.ParentRenderTexture=4096]="ParentRenderTexture",e[e.RenderBounds=8192]="RenderBounds",e[e.None=0]="None",e[e.All=14335]="All"}(Ve||(Ve={}));class He extends fe{constructor(e,o){super(),n(this,"stage",void 0),n(this,"children",[]),n(this,"_id",he++),n(this,"props",void 0),n(this,"updateType",Ve.All),n(this,"childUpdateType",Ve.None),n(this,"globalTransform",void 0),n(this,"scaleRotateTransform",void 0),n(this,"localTransform",void 0),n(this,"sceneGlobalTransform",void 0),n(this,"renderCoords",void 0),n(this,"sceneRenderCoords",void 0),n(this,"renderBound",void 0),n(this,"strictBound",void 0),n(this,"preloadBound",void 0),n(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),n(this,"isRenderable",!1),n(this,"renderState",ze.Init),n(this,"worldAlpha",1),n(this,"premultipliedColorTl",0),n(this,"premultipliedColorTr",0),n(this,"premultipliedColorBl",0),n(this,"premultipliedColorBr",0),n(this,"calcZIndex",0),n(this,"hasRTTupdates",!1),n(this,"parentHasRenderTexture",!1),n(this,"rttParent",null),n(this,"destroyed",!1),n(this,"onTextureLoaded",(e,t)=>{var n;this.autosizeNode(t),this.setUpdateType(Ve.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),t.width>1&&t.height>1&&this.emit("loaded",{type:"texture",dimensions:t}),"contain"===(null===(n=this.props.textureOptions)||void 0===n||null===(n=n.resizeMode)||void 0===n?void 0:n.type)&&this.setUpdateType(Ve.Local)}),n(this,"onTextureFailed",(e,t)=>{this.isRenderable=!1,this.setUpdateType(Ve.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:t})}),n(this,"onTextureFreed",()=>{this.isRenderable=!1,this.setUpdateType(Ve.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})}),this.stage=e,this.props=t(t({},o),{},{parent:null,texture:null,src:null,rtt:!1}),this.parent=o.parent,this.texture=o.texture,this.src=o.src,this.rtt=o.rtt,this.interactive=o.interactive,o.boundsMargin&&(this.boundsMargin=Array.isArray(o.boundsMargin)?o.boundsMargin:[o.boundsMargin,o.boundsMargin,o.boundsMargin,o.boundsMargin]),this.setUpdateType(Ve.ScaleRotate|Ve.Local|Ve.RenderBounds|Ve.RenderState),!1===pe()&&!0===o.preventCleanup&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&"loaded"!==this.stage.defaultTexture.state&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(Ve.IsRenderable)})}loadTexture(){const{texture:e}=this.props;se(e),queueMicrotask(()=>{var t,n;!0===this.textureOptions.preload&&this.stage.txManager.loadTexture(e),e.preventCleanup=null!==(t=null===(n=this.props.textureOptions)||void 0===n?void 0:n.preventCleanup)&&void 0!==t&&t,e.on("loaded",this.onTextureLoaded),e.on("failed",this.onTextureFailed),e.on("freed",this.onTextureFreed),this.parentHasRenderTexture?this.notifyParentRTTOfUpdate():"loaded"===e.state?(se(e.dimensions),this.onTextureLoaded(e,e.dimensions)):"failed"===e.state?(se(e.error),this.onTextureFailed(e,e.error)):"freed"===e.state&&this.onTextureFreed(e)})}unloadTexture(){null!==this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}setUpdateType(e){this.updateType|=e;const t=this.props.parent;t&&0===(t.updateType&Ve.Children)&&t.setUpdateType(Ve.Children)}sortChildren(){this.children.sort((e,t)=>e.calcZIndex-t.calcZIndex)}updateScaleRotateTransform(){const{rotation:e,scaleX:t,scaleY:n}=this.props;this.scaleRotateTransform=0!==e||1!==t||1!==n?Re.rotate(e,this.scaleRotateTransform).scale(t,n):void 0}updateLocalTransform(){var e;const{x:t,y:n,width:o,height:i}=this.props,r=this.props.mountX*o,s=this.props.mountY*i;if(this.scaleRotateTransform){const e=this.props.pivotX*o,a=this.props.pivotY*i;this.localTransform=Re.translate(t-r+e,n-s+a,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-a)}else this.localTransform=Re.translate(t-r,n-s,this.localTransform);const a=this.props.texture;if(a&&a.dimensions&&"contain"===(null===(e=this.props.textureOptions)||void 0===e||null===(e=e.resizeMode)||void 0===e?void 0:e.type)){let e=1,t=1,n=0,r=0;const{width:s,height:l}=a.dimensions;if(s/l>o/i){const e=l*(o/s);r=(i-e)/2,t=e/i}else{const t=s*(i/l);n=(o-t)/2,e=t/o}this.localTransform.translate(n,r).scale(e,t)}this.setUpdateType(Ve.Global)}update(e,t){this.updateType&Ve.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Ve.Local)),this.updateType&Ve.Local&&(this.updateLocalTransform(),this.setUpdateType(Ve.Global));const n=this.props.parent;let o=null;if(this.updateType&Ve.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&Ve.Global&&(se(this.localTransform),!0===this.parentHasRenderTexture&&!0===(null==n?void 0:n.rtt)?(this.globalTransform=Re.identity(),this.sceneGlobalTransform=Re.copy((null==n?void 0:n.globalTransform)||Re.identity()).multiply(this.localTransform)):!0===this.parentHasRenderTexture&&!1===(null==n?void 0:n.rtt)?(this.sceneGlobalTransform=Re.copy((null==n?void 0:n.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=Re.copy((null==n?void 0:n.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=Re.copy((null==n?void 0:n.globalTransform)||this.localTransform,this.globalTransform),null!==n&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Ve.RenderState|Ve.Children),this.childUpdateType|=Ve.Global,!0===this.clipping&&(this.setUpdateType(Ve.Clipping|Ve.RenderBounds),this.childUpdateType|=Ve.RenderBounds)),this.updateType&Ve.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(Ve.RenderState),this.setUpdateType(Ve.Children),this.childUpdateType|=Ve.RenderBounds),this.updateType&Ve.RenderState&&(o=this.checkRenderBounds(),this.setUpdateType(Ve.IsRenderable),o!==ze.OutOfBounds&&this.updateRenderState(o)),this.updateType&Ve.WorldAlpha&&(this.worldAlpha=n?n.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(Ve.Children|Ve.PremultipliedColors|Ve.IsRenderable),this.childUpdateType|=Ve.WorldAlpha),this.updateType&Ve.IsRenderable&&this.updateIsRenderable(),this.updateType&Ve.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(Ve.Children),this.childUpdateType|=Ve.Clipping,this.childUpdateType|=Ve.RenderBounds),this.updateType&Ve.PremultipliedColors&&(this.premultipliedColorTl=ce(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=ce(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=ce(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=ce(this.props.colorBr,this.worldAlpha,!0))),null!==n&&this.updateType&Ve.CalculatedZIndex&&(this.calculateZIndex(),n.setUpdateType(Ve.ZIndexSortedChildren)),!0!==this.props.strictBounds||this.renderState!==ze.OutOfBounds){if(this.updateType&Ve.Children&&this.children.length>0)for(let t=0,n=this.children.length;t<n;t++){const n=this.children[t];if(n.setUpdateType(this.childUpdateType),0===n.updateType)continue;let o=this.clippingRect;!0===this.rtt&&(o={x:0,y:0,width:0,height:0,valid:!1}),n.update(e,o)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&Ve.ZIndexSortedChildren&&this.sortChildren(),o===ze.OutOfBounds&&(this.updateRenderState(o),this.updateIsRenderable(),!0===this.rtt&&o===ze.OutOfBounds&&this.notifyChildrenRTTOfUpdate(o)),this.updateType=0,this.childUpdateType=0}else this.updateType&=~Ve.RenderBounds}findParentRTTNode(){let e=this.parent;for(;e&&!e.rtt;)e=e.parent;return e}getRTTParentRenderState(){const e=this.rttParent||this.findParentRTTNode();return e?e.renderState:null}notifyChildrenRTTOfUpdate(e){for(const t of this.children)t.updateRenderState(e),t.updateIsRenderable(),t.notifyChildrenRTTOfUpdate(e)}notifyParentRTTOfUpdate(){if(null===this.parent)return;const e=this.rttParent||this.findParentRTTNode();e&&(e.hasRTTupdates=!0,e.setUpdateType(Ve.RenderTexture),!0===e.parentHasRenderTexture&&e.notifyParentRTTOfUpdate())}checkRenderBounds(){return se(this.renderBound),se(this.strictBound),se(this.preloadBound),Ae(this.renderBound,this.strictBound)?ze.InViewport:Ae(this.renderBound,this.preloadBound)?ze.InBounds:(e=this.renderBound,t=this.strictBound,e.x1<t.x1&&e.x2>t.x2&&e.y1<t.y1&&e.y2>t.y2?ze.InViewport:null===this.parent||0!==this.props.width&&0!==this.props.height?ze.OutOfBounds:this.parent.renderState);var e,t}updateBoundingRect(){const e=this.sceneGlobalTransform||this.globalTransform,t=this.sceneRenderCoords||this.renderCoords;se(e),se(t);const{tb:n,tc:o}=e,{x1:i,y1:r,x3:s,y3:a}=t;if(0===n||0===o)this.renderBound=Se(i,r,s,a,this.renderBound);else{const{x2:e,x4:n,y2:o,y4:l}=t;this.renderBound=Se(Math.min(i,e,s,n),Math.min(r,o,a,l),Math.max(i,e,s,n),Math.max(r,o,a,l),this.renderBound)}}createRenderBounds(){if(se(this.stage),null!==this.parent&&void 0!==this.parent.strictBound){const e=this.parent.strictBound;this.strictBound=Se(e.x1,e.y1,e.x2,e.y2),this.preloadBound=Ee(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(!1===this.props.clipping)return;if(void 0===this.renderBound)return;if(!1===Ae(this.renderBound,this.strictBound))return;const{x:e,y:t,width:n,height:o}=this.props,{tx:i,ty:r}=this.sceneGlobalTransform||this.globalTransform||{},s=null!=i?i:e,a=null!=r?r:t;this.strictBound=Se(s,a,s+n,a+o,this.strictBound),this.preloadBound=Ee(this.strictBound,this.boundsMargin)}updateRenderState(e){if(e===this.renderState)return;const t=this.renderState;this.renderState=e;const n=$e.get(e);se(n),this.emit(n,{previous:t,current:e})}updateIsRenderable(){let e=!1,t=!1;if(!1===this.checkBasicRenderability())return this.updateTextureOwnership(!1),void this.setRenderable(!1);null!==this.texture?(t=!0,e="loaded"===this.texture.state):!this.hasShader()&&!0!==this.hasColorProperties()||!0!==this.hasDimensions()||this.stage.defaultTexture&&"loaded"===this.stage.defaultTexture.state&&(e=!0),this.updateTextureOwnership(t),this.setRenderable(e)}checkBasicRenderability(){return 0!==this.worldAlpha&&!0!==this.isOutOfBounds()}setRenderable(e){this.isRenderable=e}updateTextureOwnership(e){var t;null===(t=this.texture)||void 0===t||t.setRenderableOwner(this,e)}isOutOfBounds(){return this.renderState<=ze.OutOfBounds}hasDimensions(){return 0!==this.props.width&&0!==this.props.height}hasColorProperties(){return 0!==this.props.color||0!==this.props.colorTop||0!==this.props.colorBottom||0!==this.props.colorLeft||0!==this.props.colorRight||0!==this.props.colorTl||0!==this.props.colorTr||0!==this.props.colorBl||0!==this.props.colorBr}hasShader(){return null!==this.props.shader}calculateRenderCoords(){const{width:e,height:t}=this,{tx:n,ty:o,ta:i,tb:r,tc:s,td:a}=this.globalTransform;if(0===r&&0===s){const r=n,s=n+e*i,l=o,u=o+t*a;this.renderCoords=Le.translate(r,l,s,l,s,u,r,u,this.renderCoords)}else this.renderCoords=Le.translate(n,o,n+e*i,o+e*s,n+e*i+t*r,o+e*s+t*a,n+t*r,o+t*a,this.renderCoords);if(void 0===this.sceneGlobalTransform)return;const{tx:l,ty:u,ta:c,tb:d,tc:p,td:h}=this.sceneGlobalTransform;if(0===d&&0===p){const n=l,o=l+e*c,i=u,r=u+t*h;this.sceneRenderCoords=Le.translate(n,i,o,i,o,r,n,r,this.sceneRenderCoords)}else this.sceneRenderCoords=Le.translate(l,u,l+e*c,u+e*p,l+e*c+t*d,u+e*p+t*h,l+t*d,u+t*h,this.sceneRenderCoords)}calculateClippingRect(e){se(this.globalTransform);const{clippingRect:t,props:n,globalTransform:o}=this,{clipping:i}=n,r=0!==o.tb||0!==o.tc;!0===i&&!1===r?(t.x=o.tx,t.y=o.ty,t.width=this.width*o.ta,t.height=this.height*o.td,t.valid=!0):t.valid=!1,!0===e.valid&&!0===t.valid?ke(e,t,t):!0===e.valid&&(Ce(e,t),t.valid=!0)}calculateZIndex(){var e,t;const n=this.props,o=n.zIndex||0,i=(null===(e=n.parent)||void 0===e?void 0:e.zIndex)||0;let r=o;null!==(t=n.parent)&&void 0!==t&&t.zIndexLocked&&(r=o<i?o:i),this.calcZIndex=r}destroy(){if(!0!==this.destroyed){for(this.destroyed=!0,this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;){var e;null===(e=this.children[0])||void 0===e||e.destroy()}this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}}renderQuads(e){if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}se(this.globalTransform),se(this.renderCoords),e.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this._id}get data(){return this.props.data}set data(e){this.props.data=e}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(Ve.Local))}get absX(){var e,t;return this.props.x+-this.props.width*this.props.mountX+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}get absY(){var e,t;return this.props.y+-this.props.height*this.props.mountY+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(Ve.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(Ve.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ve.RenderTexture)))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(Ve.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ve.RenderTexture)))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(Ve.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(Ve.ScaleRotate))}get mount(){return this.props.mount}set mount(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(Ve.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(Ve.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(Ve.Local))}get pivot(){return this.props.pivot}set pivot(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(Ve.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(Ve.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(Ve.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(Ve.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(Ve.PremultipliedColors|Ve.WorldAlpha|Ve.Children|Ve.IsRenderable),this.childUpdateType|=Ve.WorldAlpha}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get boundsMargin(){var e,t,n;return null!==(e=null!==(t=this.props.boundsMargin)&&void 0!==t?t:null===(n=this.parent)||void 0===n?void 0:n.boundsMargin)&&void 0!==e?e:this.stage.boundsMargin}set boundsMargin(e){if(e!==this.props.boundsMargin){if(null===e)this.props.boundsMargin=e;else{const t=Array.isArray(e)?e:[e,e,e,e];this.props.boundsMargin=t}this.setUpdateType(Ve.RenderBounds)}}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(Ve.Clipping|Ve.RenderBounds|Ve.Children),this.childUpdateType|=Ve.Global|Ve.Clipping}get color(){return this.props.color}set color(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(Ve.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(Ve.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(Ve.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(Ve.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(Ve.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(Ve.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(Ve.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(Ve.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(Ve.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(Ve.CalculatedZIndex|Ve.Children);for(let t=0,n=this.children.length;t<n;t++)this.children[t].setUpdateType(Ve.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(Ve.CalculatedZIndex|Ve.Children);for(let t=0,n=this.children.length;t<n;t++)this.children[t].setUpdateType(Ve.CalculatedZIndex)}get parent(){return this.props.parent}set parent(e){const t=this.props.parent;if(t!==e){if(this.props.parent=e,t){const e=t.children.indexOf(this);se(-1!==e,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(e,1),t.setUpdateType(Ve.Children|Ve.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(Ve.All),e.setUpdateType(Ve.Children|Ve.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.applyRTTInheritance(e)),this.updateScaleRotateTransform(),this.setUpdateType(Ve.RenderBounds|Ve.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(e){!1===pe()&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=e}get rtt(){return this.props.rtt}set rtt(e){this.props.rtt!==e&&(this.props.rtt=e,!0===e?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(Ve.RenderTexture),!0===this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}cleanupRenderTexture(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(e=null){const t=e||this;for(const n of t.children)n.setUpdateType(Ve.All),n.parentHasRenderTexture=!0,n.markChildrenWithRTT()}applyRTTInheritance(e){e.rtt&&e.setUpdateType(Ve.RenderTexture),this.markChildrenWithRTT(e)}clearRTTInheritance(){if(!this.rtt)for(const e of this.children)e.parentHasRenderTexture=!1,e.rttParent=null,e.setUpdateType(Ve.All),e.clearRTTInheritance()}get shader(){return this.props.shader}set shader(e){this.props.shader!==e&&(this.props.shader=e,this.setUpdateType(Ve.IsRenderable))}get src(){return this.props.src}set src(e){this.props.src!==e&&(this.props.src=e,this.texture=e?this.stage.txManager.createTexture("ImageTexture",{src:e,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight}):null)}set imageType(e){this.props.imageType!==e&&(this.props.imageType=e)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(e){this.props.srcHeight=e}get srcWidth(){return this.props.srcWidth}set srcWidth(e){this.props.srcWidth=e}get srcX(){return this.props.srcX}set srcX(e){this.props.srcX=e}get srcY(){return this.props.srcY}set srcY(e){this.props.srcY=e}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let e=this.parent;for(;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}set texture(e){if(this.props.texture===e)return;const t=this.props.texture;t&&(t.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,null!==e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Ve.IsRenderable)}set textureOptions(e){this.props.textureOptions=e}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(e){e!==this.props.strictBounds&&(this.props.strictBounds=e,this.setUpdateType(Ve.RenderBounds|Ve.Children),this.childUpdateType|=Ve.RenderBounds|Ve.Children)}set interactive(e){this.props.interactive=e,!0===e&&this.stage.interactiveNodes.add(this)}get interactive(){return this.props.interactive}animate(e,t){const n=new Fe(this,e,t);return new je(this.stage.animationManager,n)}flush(){}}const Ge=()=>performance?performance.now():Date.now();class qe{constructor(){n(this,"activeAnimations",new Set)}registerAnimation(e){this.activeAnimations.add(e)}unregisterAnimation(e){this.activeAnimations.delete(e)}update(e){this.activeAnimations.forEach(t=>{t.update(e)})}}function We(){self.onmessage=e=>{var t=e.data.src,n=e.data.id,o=e.data.premultiplyAlpha;e.data.sx,e.data.sy,e.data.sw,e.data.sh,function(e,t){return new Promise(function(n,o){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){if(200!==i.status&&0!==i.status)return o(new Error("Failed to load image: "+i.statusText));var e=i.response;void 0!==t||e.type.indexOf("image/png"),createImageBitmap(e).then(function(e){n({data:e,premultiplyAlpha:t})}).catch(function(e){o(e)})},i.onerror=function(){o(new Error("Network error occurred while trying to fetch the image."))},i.send()})}(t,o).then(function(e){self.postMessage({id:n,src:t,data:e},[e.data])}).catch(function(e){self.postMessage({id:n,src:t,error:e.message})})}}class Ke{constructor(e,t){n(this,"imageWorkersEnabled",!0),n(this,"messageManager",{}),n(this,"workers",[]),n(this,"workerIndex",0),n(this,"nextId",0),this.workers=this.createWorkers(e,t),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(e){const{id:t,data:n,error:o}=e.data,i=this.messageManager[t];if(i){const[e,r]=i;delete this.messageManager[t],o?r(new Error(o)):e(n)}}createWorkers(e=1,t){let n=`(${We.toString()})()`;!0===t.options&&(n=n.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),!0===t.full&&(n=n.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;"),n=n.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),n=n.replace('"use strict";',"");const o=new Blob([n],{type:"application/javascript"}),i=(self.URL?URL:webkitURL).createObjectURL(o),r=[];for(let s=0;s<e;s++)r.push(new Worker(i));return r}getNextWorker(){const e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}getImage(e,t,n,o,i,r){return new Promise((s,a)=>{try{if(this.workers){const l=this.nextId++;this.messageManager[l]=[s,a];const u=this.getNextWorker();u&&u.postMessage({id:l,src:e,premultiplyAlpha:t,sx:n,sy:o,sw:i,sh:r})}}catch(l){a(l)}})}}class Xe extends ge{constructor(e,t){super(e),n(this,"type",me.color),n(this,"props",void 0),this.props=Xe.resolveDefaults(t||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureSource(){const e=new Uint8Array(4);return 4294967295===this.color?(e[0]=255,e[1]=255,e[2]=255,e[3]=255):(e[0]=this.color>>16&255,e[1]=this.color>>8&255,e[2]=255&this.color,e[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:e,premultiplyAlpha:!0}}static makeCacheKey(e){return`ColorTexture,${Xe.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}}n(Xe,"z$__type__Props",void 0);const Ye=async e=>{const t=await fetch(e),n=await t.arrayBuffer();return-1!==e.indexOf(".ktx")?Je(n):Qe(n)},Je=async e=>{const t=new DataView(e),n=16909060===t.getUint32(12),o=[],i={glInternalFormat:t.getUint32(28,n),pixelWidth:t.getUint32(36,n),pixelHeight:t.getUint32(40,n),numberOfMipmapLevels:t.getUint32(56,n),bytesOfKeyValueData:t.getUint32(60,n)};let r=64;r+=i.bytesOfKeyValueData;for(let s=0;s<i.numberOfMipmapLevels;s++){const e=t.getUint32(r);r+=4,o.push(t.buffer.slice(r,e)),r+=e}return{data:{glInternalFormat:i.glInternalFormat,mipmaps:o,width:i.pixelWidth||0,height:i.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},Qe=async e=>{const t=e,n=new Int32Array(t,0,13),o=n[12]+52,i=new Uint8Array(t,o),r=[],s={pixelWidth:n[7],pixelHeight:n[6],numberOfMipmapLevels:n[11]||0};let a=0,l=s.pixelWidth||0,u=s.pixelHeight||0;for(let c=0;c<s.numberOfMipmapLevels;c++){const e=(l+3>>2)*(u+3>>2)*8,n=new Uint8Array(t,i.byteOffset+a,e);r.push(n),a+=e,l>>=1,u>>=1}return{data:{glInternalFormat:36196,mipmaps:r,width:s.pixelWidth||0,height:s.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};const Ze=(e,t,n,o,i,r,s)=>new Promise((a,l)=>{const u=document.createElement("canvas"),c=u.getContext("2d");se(c),c.imageSmoothingEnabled=!0;const d=new Image;d.onload=()=>{const e=null!=o?o:0,l=null!=i?i:0,p=t||d.width,h=n||d.height;u.width=p,u.height=h,c.drawImage(d,0,0,p,h),a({data:c.getImageData(e,l,null!=r?r:p,null!=s?s:h),premultiplyAlpha:!1})},d.onerror=e=>{l(e)},d.src=e});function et(e,t=""){return new Promise((n,o)=>{const i=new XMLHttpRequest;i.responseType=t,i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(0===i.status||200===i.status?n(i.response):o(i.statusText))},i.open("GET",e,!0),i.send(null)})}class tt extends ge{constructor(e,t){super(e),n(this,"props",void 0),n(this,"type",me.image),this.props=tt.resolveDefaults(t)}hasAlphaChannel(e){return-1!==e.indexOf("image/png")}async loadImageFallback(e,t){const n=new Image;return"string"==typeof e&&!1===Me(e)&&(n.crossOrigin="anonymous"),new Promise(o=>{n.onload=()=>{o({data:n,premultiplyAlpha:t})},n.onerror=()=>{console.warn("Image loading failed, returning fallback object."),o({data:null,premultiplyAlpha:t})},e instanceof Blob?n.src=URL.createObjectURL(e):n.src=e})}async createImageBitmap(e,t,n,o,i,r){const s=null!=t?t:e.type.includes("image/png"),a=this.txManager.imageBitmapSupported;if(!0===a.full&&null!==i&&null!==r){return{data:await createImageBitmap(e,n||0,o||0,i,r,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}if(!0===a.basic)return{data:await createImageBitmap(e),premultiplyAlpha:s};return{data:await createImageBitmap(e,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}async loadImage(e){const{premultiplyAlpha:t,sx:n,sy:o,sw:i,sh:r}=this.props;if(!0===this.txManager.hasCreateImageBitmap){if(!1===Me(e)&&!0===this.txManager.hasWorker&&null!==this.txManager.imageWorkerManager)return this.txManager.imageWorkerManager.getImage(e,t,n,o,i,r);let s;return s=!0===Me(e)?function(e){var t;const n=(null===(t=(e=e.replace(/^data:/,"")).match(/image\/[^;]+/))||void 0===t?void 0:t[0])||"",o=e.replace(/^[^,]+,/,""),i=1024,r=atob(o),s=r.length,a=Math.ceil(s/i),l=new Array(a);for(let c=0;c<a;++c){const e=c*i,t=Math.min(e+i,s),n=new Array(t-e);for(let o=e,i=0;o<t;++i,++o){var u;n[i]=null===(u=r[o])||void 0===u?void 0:u.charCodeAt(0)}l[c]=new Uint8Array(n)}return new Blob(l,{type:n})}(e):await et(e,"blob").then(e=>e),this.createImageBitmap(s,t,n,o,i,r)}return this.loadImageFallback(e,null==t||t)}async getTextureSource(){var e;let t,n,o;try{t=await this.determineImageTypeAndLoadImage()}catch(c){return this.setState("failed",c),{data:null}}if(null===t.data)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};var i,r,s,a,l,u;t.data instanceof Uint8Array?(n=null!==(i=this.props.width)&&void 0!==i?i:0,o=null!==(r=this.props.height)&&void 0!==r?r:0):(n=null!==(s=null===(a=t.data)||void 0===a?void 0:a.width)&&void 0!==s?s:this.props.width||0,o=null!==(l=null===(u=t.data)||void 0===u?void 0:u.height)&&void 0!==l?l:this.props.height||0);return this.setState("fetched",{width:n,height:o}),{data:t.data,premultiplyAlpha:null===(e=this.props.premultiplyAlpha)||void 0===e||e}}determineImageTypeAndLoadImage(){const{src:e,premultiplyAlpha:t,type:n}=this.props;if(null===e)return{data:null};if("string"!=typeof e){if(e instanceof Blob){if(!0===this.txManager.hasCreateImageBitmap){const{sx:n,sy:o,sw:i,sh:r}=this.props;return this.createImageBitmap(e,t,n,o,i,r)}return this.loadImageFallback(e,null==t||t)}return e instanceof ImageData?{data:e,premultiplyAlpha:t}:{data:e(),premultiplyAlpha:t}}const o=function(e){if("file:"===self.location.protocol&&!ye.test(e)){const t=self.location.pathname.split("/");t.pop();const n=t.join("/"),o=self.location.protocol+"//"+n;return"."===e.charAt(0)&&(e=e.slice(1)),"/"===e.charAt(0)&&(e=e.slice(1)),o+"/"+e}return new URL(e,self.location.href).href}(e);return"regular"===n?this.loadImage(o):"svg"===n||!0===/\.(svg)(\?.*)?$/.test(e)?Ze(o,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):"compressed"===n||!0===function(e){return/\.(ktx|pvr)$/.test(e)}(e)?Ye(o):this.loadImage(o)}static makeCacheKey(e){var t;const n=tt.resolveDefaults(e),o=n.key||n.src;if("string"!=typeof o)return!1;let i="";var r,s;null!==n.sh&&null!==n.sw&&(i+=",",i+=null!==(r=n.sx)&&void 0!==r?r:"",i+=null!==(s=n.sy)&&void 0!==s?s:"",i+=n.sw||"",i+=n.sh||"");return`ImageTexture,${o},${null!==(t=n.premultiplyAlpha)&&void 0!==t?t:"true"}${i}`}static resolveDefaults(e){var t,n,o,i,r,s,a,l,u,c;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(n=e.premultiplyAlpha)||void 0===n||n,key:null!==(o=e.key)&&void 0!==o?o:null,type:null!==(i=e.type)&&void 0!==i?i:null,width:null!==(r=e.width)&&void 0!==r?r:null,height:null!==(s=e.height)&&void 0!==s?s:null,sx:null!==(a=e.sx)&&void 0!==a?a:null,sy:null!==(l=e.sy)&&void 0!==l?l:null,sw:null!==(u=e.sw)&&void 0!==u?u:null,sh:null!==(c=e.sh)&&void 0!==c?c:null}}}n(tt,"z$__type__Props",void 0);class nt extends ge{constructor(e,t){super(e),n(this,"props",void 0),n(this,"type",me.noise),this.props=nt.resolveDefaults(t)}async getTextureSource(){const{width:e,height:t}=this.props,n=e*t*4,o=new Uint8ClampedArray(n);for(let i=0;i<n;i+=4){const e=Math.floor(256*Math.random());o[i]=e,o[i+1]=e,o[i+2]=e,o[i+3]=255}return this.setState("fetched"),{data:new ImageData(o,e,t)}}static makeCacheKey(e){if(void 0===e.cacheId)return!1;const t=nt.resolveDefaults(e);return`NoiseTexture,${t.width},${t.height},${t.cacheId}`}static resolveDefaults(e){var t,n,o;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(n=e.height)&&void 0!==n?n:128,cacheId:null!==(o=e.cacheId)&&void 0!==o?o:0}}}n(nt,"z$__type__Props",void 0);class ot extends ge{constructor(e,t){super(e),n(this,"props",void 0),n(this,"parentTexture",void 0),n(this,"type",me.subTexture),n(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height})}),n(this,"onParentTxFailed",(e,t)=>{this.forwardParentTxState("failed",t)}),n(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})}),n(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")}),n(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")}),n(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed")}),this.props=ot.resolveDefaults(t||{}),se(this.props.texture,"SubTexture requires a parent texture"),se(this.props.texture instanceof tt,"SubTexture requires an ImageTexture parent"),this.parentTexture=e.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const e=this.parentTexture;"loaded"===e.state?this.onParentTxLoaded(e,e.dimensions):"fetching"===e.state?this.onParentTxFetching():"fetched"===e.state?this.onParentTxFetched():"loading"===e.state?this.onParentTxLoading():"failed"===e.state?this.onParentTxFailed(e,e.error):"freed"===e.state&&this.onParentTxFreed(),e.on("fetched",this.onParentTxFetched),e.on("loading",this.onParentTxLoading),e.on("fetching",this.onParentTxFetching),e.on("loaded",this.onParentTxLoaded),e.on("failed",this.onParentTxFailed),e.on("freed",this.onParentTxFreed)})}forwardParentTxState(e,t){this.setState(e,t)}onChangeIsRenderable(e){this.parentTexture.setRenderableOwner(this,e)}async getTextureSource(){return new Promise((e,t)=>{this.setState("fetched"),e({data:this.props})})}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}}n(ot,"z$__type__Props",void 0);class it extends ge{constructor(e,t){super(e),n(this,"props",void 0),n(this,"type",me.renderToTexture),this.props=it.resolveDefaults(t||{})}get width(){return this.props.width}set width(e){this.props.width=e}get height(){return this.props.height}set height(e){this.props.height=e}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(e){return{width:e.width||256,height:e.height||256}}}n(it,"z$__type__Props",void 0);class rt extends fe{constructor(e,t){super(),n(this,"keyCache",new Map),n(this,"inverseKeyCache",new WeakMap),n(this,"txConstructors",{}),n(this,"priorityQueue",[]),n(this,"uploadTextureQueue",[]),n(this,"initialized",!1),n(this,"stage",void 0),n(this,"numImageWorkers",void 0),n(this,"imageWorkerManager",null),n(this,"hasCreateImageBitmap",!!self.createImageBitmap),n(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1}),n(this,"hasWorker",!!self.Worker),n(this,"renderer",void 0),n(this,"frameTime",0);const{numImageWorkers:o,createImageBitmapSupport:i}=t;this.stage=e,this.numImageWorkers=o,"auto"===i?async function(){var e;const t=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),n={basic:!1,options:!1,full:!1},o=new Blob([t],{type:"image/png"}),i=await createImageBitmap(o);null===(e=i.close)||void 0===e||e.call(i),n.basic=!0;try{var r;const e={premultiplyAlpha:"none"},t=await createImageBitmap(o,e);null===(r=t.close)||void 0===r||r.call(t),n.options=!0}catch(a){}try{var s;const e=await createImageBitmap(o,0,0,1,1,{premultiplyAlpha:"none"});null===(s=e.close)||void 0===s||s.call(e),n.full=!0}catch(a){}return n}().then(e=>{this.initialize(e)}).catch(()=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}):this.initialize({basic:"basic"===i,options:"options"===i,full:"full"===i}),this.registerTextureType("ImageTexture",tt),this.registerTextureType("ColorTexture",Xe),this.registerTextureType("NoiseTexture",nt),this.registerTextureType("SubTexture",ot),this.registerTextureType("RenderTexture",it)}registerTextureType(e,t){this.txConstructors[e]=t}initialize(e){this.hasCreateImageBitmap=e.basic||e.options||e.full,this.imageBitmapSupported=e,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new Ke(this.numImageWorkers,e):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}enqueueUploadTexture(e){!1===this.uploadTextureQueue.includes(e)&&this.uploadTextureQueue.push(e)}createTexture(e,t){let n;const o=this.txConstructors[e];if(!o)throw new Error(`Texture type "${e}" is not registered`);const i=o.makeCacheKey(t);return i&&this.keyCache.has(i)?n=this.keyCache.get(i):(n=new o(this,t),i&&this.initTextureToCache(n,i)),n}orphanTexture(e){this.removeTextureFromQueue(e),e.type!==me.subTexture&&this.stage.txMemManager.addToOrphanedTextures(e)}loadTexture(e,t){this.stage.txMemManager.removeFromOrphanedTextures(e),e.type!==me.subTexture&&"loaded"!==e.state&&(ge.TRANSITIONAL_TEXTURE_STATES.includes(e.state)||(!1!==this.initialized?("failed"===e.state&&(e.free(),e.freeTextureData()),e.setState("loading"),e.getTextureData().then(()=>{"fetched"===e.state?e.type!==me.image?this.uploadTexture(e).catch(t=>{console.error("Failed to upload non-image texture:",t),e.setState("failed")}):!0===t?this.uploadTexture(e).catch(t=>{console.error("Failed to upload priority texture:",t),e.setState("failed")}):this.enqueueUploadTexture(e):e.setState("failed")}).catch(t=>{console.error(t),e.setState("failed")})):this.priorityQueue.push(e)))}async uploadTexture(e){if(!0===this.stage.txMemManager.doNotExceedCriticalThreshold&&!0===this.stage.txMemManager.criticalCleanupRequested)return void this.enqueueUploadTexture(e);const t=e.loadCtxTexture();null===t||"loaded"!==t.state?await t.load():e.setState("loaded")}isProcessingTexture(e){return!0===this.uploadTextureQueue.includes(e)}async processSome(e){if(!1===this.initialized)return;const t=Ge();for(;this.priorityQueue.length>0&&Ge()-t<e;){const e=this.priorityQueue.pop();try{await e.getTextureData(),await this.uploadTexture(e)}catch(n){console.error("Failed to process priority texture:",n)}}for(;this.uploadTextureQueue.length>0&&Ge()-t<e;){const e=this.uploadTextureQueue.shift();try{await this.uploadTexture(e)}catch(n){console.error("Failed to upload texture:",n)}}}hasUpdates(){return this.uploadTextureQueue.length>0}initTextureToCache(e,t){const{keyCache:n,inverseKeyCache:o}=this;n.set(t,e),o.set(e,t)}getTextureFromCache(e){return this.keyCache.get(e)}removeTextureFromCache(e){const{inverseKeyCache:t,keyCache:n}=this,o=t.get(e);o&&n.delete(o)}removeTextureFromQueue(e){const t=this.uploadTextureQueue.indexOf(e);-1!==t&&this.uploadTextureQueue.splice(t,1)}resolveParentTexture(e){if(null==e||!e.props)return e;const t=tt.makeCacheKey(e.props),n=t?this.getTextureFromCache(t):void 0;return null!=n?n:e}}const st={normal:400,bold:700,bolder:900,lighter:100},at=e=>"number"==typeof e?e:st[e]||400;class lt{constructor(e){n(this,"textRenderers",void 0),n(this,"fontCache",new Map),this.textRenderers=e}addFontFace(e){for(const t in this.textRenderers){const n=this.textRenderers[t];n&&n.isFontFaceSupported(e)&&n.addFontFace(e)}}resolveFontFace(e,t,n){const{fontFamily:o,fontWeight:i,fontStyle:r,fontStretch:s}=t,a=`${n}_${o}_${r}_${i}_${s}`;if(!0===this.fontCache.has(a))return this.fontCache.get(a);const l=function(e,t,n,o,i){let r=at(n);for(const s of e){const e=s[t];if(!e)continue;if(1===e.size)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),e.values().next().value;const n=new Map;for(const t of e){const e=at(t.descriptors.weight);if(e===r&&t.descriptors.style===o&&t.descriptors.stretch===i)return t;n.set(e,t)}const a=`TrFontManager: No exact match: '${t} Weight: ${r} Style: ${o} Stretch: ${i}'`;if(console.error(a),400===r&&n.has(500))return n.get(500);if(500===r&&n.has(400))return n.get(400);if(r<400){for(;r>0;){if(n.has(r))return n.get(r);r-=100}r=600}for(;r<1e3;){if(n.has(r))return n.get(r);r+=100}for(r=500;r>0;){if(n.has(r))return n.get(r);r-=100}}}(e,o,i,r,s);return void 0!==l&&this.fontCache.set(a,l),l}}class ut{static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}function ct(e,t,n){const o=e.createShader(t);if(!o){const n=e.getError();throw new Error(`Unable to create the shader: ${t===e.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${n?` WebGlContext Error: ${n}`:""}`)}e.shaderSource(o,n),e.compileShader(o);if(!!e.getShaderParameter(o,e.COMPILE_STATUS))return o;console.error(e.getShaderInfoLog(o)),e.deleteShader(o)}class dt extends ut{constructor(e){super(),n(this,"boundBufferCollection",null),n(this,"buffersBound",!1),n(this,"program",void 0),n(this,"vao",void 0),n(this,"renderer",void 0),n(this,"glw",void 0),n(this,"attributeBuffers",void 0),n(this,"attributeLocations",void 0),n(this,"attributeNames",void 0),n(this,"uniformLocations",void 0),n(this,"uniformTypes",void 0),n(this,"supportsIndexedTextures",void 0);const t=this.renderer=e.renderer,o=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const i=o.isWebGl2(),r=i&&e.webgl2Extensions||!i&&e.webgl1Extensions||[],s=i?"2.0":"1.0";r.forEach(e=>{if(!o.getExtension(e))throw new Error(`Shader "${this.constructor.name}" requires extension "${e}" for WebGL ${s} but wasn't found`)});const a=e.shaderSources||this.constructor.shaderSources;if(!a)throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);i&&null!=a&&a.webGl2&&(a.fragment=a.webGl2.fragment,a.vertex=a.webGl2.vertex,delete a.webGl2);const l=t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,u=a.vertex instanceof Function?a.vertex(l):a.vertex,c=a.fragment instanceof Function?a.fragment(l):a.fragment,d=ct(o,o.VERTEX_SHADER,u),p=ct(o,o.FRAGMENT_SHADER,c);if(!d||!p)throw new Error(`Unable to create the following shader(s): ${[!d&&"VERTEX_SHADER",!p&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const h=function(e,t,n){const o=e.createProgram();if(!o)throw new Error("Unable to create program");if(e.attachShader(o,t),e.attachShader(o,n),e.linkProgram(o),!!e.getProgramParameter(o,e.LINK_STATUS))return o;console.warn(e.getProgramInfoLog(o)),e.deleteProgram(o)}(o,d,p);if(!h)throw new Error("Unable to create program");this.program=h,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(e=>{const t=o.getAttribLocation(this.program,e);if(t<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${e}"!`);const n=o.createBuffer();if(!n)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${e}"`);this.attributeLocations[e]=t,this.attributeBuffers[e]=n,this.attributeNames.push(e)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(e=>{const t=o.getUniformLocation(this.program,e.name);this.uniformTypes[e.name]=e.uniform,t?this.uniformLocations[e.name]=t:console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${e.name}"`)})}bindBufferAttribute(e,t,n){const{glw:o}=this;o.enableVertexAttribArray(e),o.vertexAttribPointer(t,e,n.size,n.type,n.normalized,n.stride,n.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,t){return!1}bindRenderOp(e,t){var n;this.bindBufferCollection(e.buffers),e.textures.length>0&&null!==(n=e.textures[0])&&void 0!==n&&n.ctxTexture&&this.bindTextures(e.textures);const{glw:o,parentHasRenderTexture:i,renderToTexture:r}=e;if(!r||!i){if(i){const{width:t,height:n}=e.framebufferDimensions||{};o.uniform1f(this.getUniformLocation("u_pixelRatio"),1),o.uniform2f(this.getUniformLocation("u_resolution"),null!=t?t:0,null!=n?n:0)}else o.uniform1f(this.getUniformLocation("u_pixelRatio"),e.options.pixelRatio),o.uniform2f(this.getUniformLocation("u_resolution"),o.canvas.width,o.canvas.height);if(t){if(de(t,"$dimensions")){let n=t.$dimensions;n||(n=e.dimensions),o.uniform2f(this.getUniformLocation("u_dimensions"),n.width,n.height)}if(de(t,"$alpha")){let n=t.$alpha;n||(n=e.alpha),o.uniform1f(this.getUniformLocation("u_alpha"),n)}this.bindProps(t)}}}getUniformLocation(e){return this.uniformLocations[e]||null}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const t in this.attributeLocations){const n=e.getBuffer(t),o=e.getAttributeInfo(t);se(n,`Buffer for "${t}" not found`),se(o),this.bindBufferAttribute(this.attributeLocations[t],n,o)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}n(dt,"shaderSources",void 0);class pt extends dt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}n(pt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class ht extends dt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}),n(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:t,glw:n}=this;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((e,t)=>{n.activeTexture(t),n.bindTexture(e.ctxTexture)});const o=Array.from(Array(e.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),o)}}n(ht,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>`\n      #define txUnits ${e}\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {\n        ${Array.from(Array(e).keys()).map(e=>`\n          ${0!==e?"else ":""}if (idx == ${e}) {\n            return texture2D(textures[${e}], uv);\n          }\n        `).join("")}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `});class ft{static getEffectKey(e){return""}static getMethodParameters(e,t){const n=[];for(const o in e){const i=e[o];let r="";i.size&&(r=`[${i.size(t)}]`),n.push(`${i.type} ${o}${r}`)}return n.join(",")}constructor(e){n(this,"priority",1),n(this,"name",""),n(this,"ref",void 0),n(this,"target",void 0),n(this,"passParameters",""),n(this,"declaredUniforms",""),n(this,"uniformInfo",{});const{ref:t,target:o,props:i={}}=e;this.ref=t,this.target=o;const r={},s=[];let a="";const l=this.constructor.uniforms||{};for(const n in l){const e=l[n],o=e.type,u=`${t}_${n}`;let c="";e.size&&(c=`[${e.size(i)}]`),s.push(u),a+=`uniform ${o} ${u}${c};`,r[n]={name:u,uniform:l[n].method}}this.passParameters=s.join(","),this.declaredUniforms=a,this.uniformInfo=r}static resolveDefaults(e){return{}}static makeEffectKey(e){return!1}}n(ft,"uniforms",{}),n(ft,"methods",void 0),n(ft,"onShaderMask",void 0),n(ft,"onColorize",void 0),n(ft,"onEffectMask",void 0);const mt=new Map,gt=(e,t)=>{const n=JSON.stringify(e);if(mt.has(n))return mt.get(n);const o=[],i=(e=null!=e?e:[]).length;let r=0;for(;r<i;r++){const{name:n,type:i,props:s}=e[r],a={name:n,type:i,props:{}},l=t[i],u=l.resolveDefaults(s),c=l.uniforms,d=Object.keys(c),p=d.length;let h=0;for(;h<p;h++){const e=d[h],t=c[e],n={value:u[e],programValue:void 0,method:t.method,updateOnBind:t.updateOnBind||!1,hasValidator:void 0!==t.validator,hasProgramValueUpdater:void 0!==t.updateProgramValue},o=n.hasValidator&&t.validator(u[e],u)||u[e];u[e]!==o&&(n.validatedValue=o),n.hasProgramValueUpdater&&t.updateProgramValue(n),void 0===n.programValue&&(n.programValue=n.value),a.props[e]=n}o.push(a)}return mt.set(n,o),o};class yt extends dt{constructor(e,t,o){const i=yt.createShader(t,o);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}}),n(this,"effects",[]),this.effects=i.effects}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindUniformMethods(e){const t=this.glw,n=e.effects,o=n.length;for(let i=0;i<o;i++){const e=this.effects[i].uniformInfo,o=n[i],r=Object.keys(o.props),s=r.length;for(let n=0;n<s;n++){const i=r[n],s=o.props[i].method,a=this.getUniformLocation(e[i].name);"uniform2fv"!==s&&"uniform2iv"!==s&&"uniform3iv"!==s&&"uniform4fv"!==s&&"uniform4iv"!==s&&"uniformMatrix2fv"!==s&&"uniformMatrix3fv"!==s&&"uniformMatrix4fv"!==s&&"uniform1f"!==s&&"uniform1fv"!==s&&"uniform1i"!==s&&"uniform1iv"!==s?"uniform2f"!==s&&"uniform2i"!==s?"uniform3f"!==s&&"uniform3i"!==s?"uniform4f"!==s&&"uniform4i"!==s||(o.props[i].setUniformValue=function(){t[s](a,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])}):o.props[i].setUniformValue=function(){t[s](a,this.programValue[0],this.programValue[1],this.programValue[2])}:o.props[i].setUniformValue=function(){t[s](a,this.programValue[0],this.programValue[1])}:o.props[i].setUniformValue=function(){t[s](a,this.programValue)}}}}bindProps(e){const t=e.effects,n=t.length;let o=0;for(;o<n;o++){const n=t[o],r=Object.keys(n.props),s=r.length;let a=0;for(;a<s;a++){const t=r[a],o=n.props[t];if(!0===o.updateOnBind){var i;const o=null===(i=this.renderer.shManager.getRegisteredEffects()[n.type])||void 0===i?void 0:i.uniforms[t];null==o||o.updateProgramValue(n.props[t],e)}o.setUniformValue()}}}canBatchShaderProps(e,t){if(e.$alpha!==t.$alpha||e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;const n=e.effects.length;let o=0;for(;o<n;o++){const n=e.effects[o],i=t.effects[o];if(n.type!==i.type)return!1;for(const e in n.props)if(i.props&&!i.props[e]||n.props[e].value!==i.props[e].value)return!1}return!0}static createShader(e,t){const n={},o={};let i="";const r=[],s=[],a=e.effects.map(e=>{const o=t[e.type],a=o.getEffectKey(e.props||{});n[a]=n[a]?++n[a]:1;const l=n[a];1===l&&s.push({key:a,type:e.type,props:e.props});const u=new o({ref:`${a}${1===l?"":l}`,target:a,props:e.props});return i+=u.declaredUniforms,r.push(...Object.values(u.uniformInfo)),u});let l="";null==s||s.forEach(e=>{var n;const i=t[e.type],r=i.resolveDefaults(null!==(n=e.props)&&void 0!==n?n:{}),s=[];for(const t in i.methods){let e=t;const n=i.methods[t];o[t]&&o[t]!==n&&(e=yt.resolveMethodDuplicate(t,n,o)),o[e]=n.replace("function",e),s.push({m:t,cm:e})}let a=i.onShaderMask instanceof Function?i.onShaderMask(r):i.onShaderMask,u=i.onColorize instanceof Function?i.onColorize(r):i.onColorize,c=i.onEffectMask instanceof Function?i.onEffectMask(r):i.onEffectMask;s.forEach(e=>{const{m:t,cm:n}=e,o=new RegExp(`\\$${t}`,"g");a&&(a=a.replace(o,n)),u&&(u=u.replace(o,n)),c&&(c=c.replace(o,n))});const d=i.getMethodParameters(i.uniforms,r),p=d.length>0?`, ${d}`:"";a&&(l+=`\n        float fx_${e.key}_onShaderMask(float shaderMask ${p}) {\n          ${a}\n        }\n        `),u&&(l+=`\n          vec4 fx_${e.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${p}) {\n            ${u}\n          }\n        `),c&&(l+=`\n          vec4 fx_${e.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${p}) {\n            ${c}\n          }\n        `)});let u="";for(const p in o)u+=o[p];let c="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",d="\n\n    ";for(let p=0;p<a.length;p++){const e=a[p],n=e.passParameters.length>0?`, ${e.passParameters}`:"",o=t[e.name];o.onShaderMask&&(d+=`\n        shaderMask = fx_${e.target}_onShaderMask(shaderMask ${n});\n        `),o.onColorize&&(d+=`\n        maskColor = fx_${e.target}_onColorize(shaderMask, maskColor, shaderColor${n});\n        `),o.onEffectMask&&(c=`fx_${e.target}_onEffectMask(shaderMask, maskColor, shaderColor${n})`);const i=a[p+1];(void 0===i||t[i.name].onEffectMask)&&(d+=`\n          shaderColor = ${c};\n        `)}return{effects:a,uniforms:r,fragment:yt.fragment(i,u,l,d),vertex:yt.vertex()}}static resolveMethodDuplicate(e,t,n,o=0){const i=e+(o>0?o:"");return n[i]&&n[i]!==t?this.resolveMethodDuplicate(e,t,n,++o):i}static resolveDefaults(e,t){var n;return se(t),{effects:gt(null!==(n=e.effects)&&void 0!==n?n:[],t),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var n;let o="";return null===(n=e.effects)||void 0===n||n.forEach(e=>{const n=t[e.type].getEffectKey(e.props||{});o+=`,${n}`}),`DynamicShader${o}`}}n(yt,"z$__type__Props",void 0),n(yt,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),n(yt,"fragment",(e,t,n,o)=>`\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${e}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${t}\n\n    ${n}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${o}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `);class vt extends dt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){const t=Math.min(e.$dimensions.width,e.$dimensions.height)/(2*e.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),e.radius*Math.min(t,1))}canBatchShaderProps(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}n(vt,"z$__type__Props",void 0),n(vt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const bt=new Float32Array([1,0,0,0,1,0,0,0,1]);class xt extends dt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){const t=xt.resolveDefaults(e);for(const n in t)if("transform"===n)this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),t[n]);else if("scrollY"===n)this.glw.uniform1f(this.getUniformLocation("u_scrollY"),t[n]);else if("color"===n){const e=ve(t.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),e)}else"size"===n?this.glw.uniform1f(this.getUniformLocation("u_size"),t[n]):"distanceRange"===n?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),t[n]):"debug"===n&&this.glw.uniform1i(this.getUniformLocation("u_debug"),t[n]?1:0)}static resolveDefaults(e={}){var t,n,o,i,r,s;return{transform:null!==(t=e.transform)&&void 0!==t?t:bt,scrollY:null!==(n=e.scrollY)&&void 0!==n?n:0,color:null!==(o=e.color)&&void 0!==o?o:4294967295,size:null!==(i=e.size)&&void 0!==i?i:16,distanceRange:null!==(r=e.distanceRange)&&void 0!==r?r:1,debug:null!==(s=e.debug)&&void 0!==s&&s}}}n(xt,"z$__type__Props",void 0),n(xt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});const wt=e=>{void 0===e.programValue&&(e.programValue=new Float32Array(4));const t=e.value,n=e.programValue;n[0]=(t>>>24)/255,n[1]=(t>>>16&255)/255,n[2]=(t>>>8&255)/255,n[3]=(255&t)/255},St=e=>{const t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){const n=t.length,o=e.programValue;for(let e=0;e<n;e++)o[e]=t[e]}else e.programValue=new Float32Array(t)},Tt=e=>{const t=Array.isArray(e);return t?t&&4===e.length?e:t&&2===e.length?[e[0],e[1],e[0],e[1]]:t&&3===e.length?[e[0],e[1],e[2],e[0]]:[e[0],e[0],e[0],e[0]]:[e,e,e,e]},kt=(e,t)=>{void 0===e.programValue&&(e.programValue=new Float32Array(4));const n=e.programValue,o=e.validatedValue||e.value;if(void 0===t&&void 0===e.$dimensions)return n[0]=o[0],n[1]=o[1],n[2]=o[2],void(n[3]=o[3]);let i=e.$dimensions;if(void 0!==t){const{$dimensions:n}=t;if(void 0!==i&&(i.width===n.width||i.height===n.height))return;void 0===i&&(i={width:null==n?void 0:n.width,height:null==n?void 0:n.height},e.$dimensions=i)}const{width:r,height:s}=i,[a,l,u,c]=o,d=Math.min(Math.min(Math.min(r/Math.max(r,a+l),r/Math.max(r,u+c)),Math.min(s/Math.max(s,a+u),s/Math.max(s,l+c))),1);n[0]=a*d,n[1]=l*d,n[2]=u*d,n[3]=c*d};class Ct extends ft{constructor(...e){super(...e),n(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}n(Ct,"z$__type__Props",void 0),n(Ct,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Tt,updateProgramValue:kt}}),n(Ct,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),n(Ct,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),n(Ct,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class At extends ft{constructor(...e){super(...e),n(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}n(At,"z$__type__Props",void 0),n(At,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:wt,method:"uniform4fv",type:"vec4"}}),n(At,"onEffectMask","\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),n(At,"onColorize","\n    return color;\n  ");class It extends ft{constructor(...e){super(...e),n(this,"name","linearGradient")}static getEffectKey(e){return e.colors.value?`linearGradient${e.colors.value.length}`:`linearGradient${e.colors.length}`}static resolveDefaults(e){var t,n;const o=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295];let i=e.stops||[];if(0===i.length||i.length!==o.length){const e=o.length;let t=0;const n=i;for(;t<e;t++)i[t]?(n[t]=i[t],void 0===i[t-1]&&void 0!==n[t-2]&&(n[t-1]=n[t-2]+(i[t]-n[t-2])/2)):n[t]=t*(1/(o.length-1));i=n}return{colors:o,stops:i,angle:null!==(n=e.angle)&&void 0!==n?n:0}}}i=It,n(It,"z$__type__Props",void 0),n(It,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.reduce((e,t)=>e.concat(ve(t)),[]),updateProgramValue:St,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),n(It,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),n(It,"ColorLoop",e=>{let t="";for(let n=2;n<e;n++)t+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return t}),n(It,"onColorize",e=>{const t=e.colors.length||1;return`\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ${i.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `});class Et extends ft{constructor(...e){super(...e),n(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}n(Et,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),n(Et,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class Mt extends ft{constructor(...e){super(...e),n(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}n(Mt,"z$__type__Props",void 0),n(Mt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:wt,method:"uniform4fv",type:"vec4"}}),n(Mt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),n(Mt,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),n(Mt,"onColorize","\n    return color;\n  ");class Rt extends ft{constructor(...e){super(...e),n(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}n(Rt,"z$__type__Props",void 0),n(Rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:wt,method:"uniform4fv",type:"vec4"}}),n(Rt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),n(Rt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),n(Rt,"onColorize","\n    return color;\n  ");class _t extends ft{constructor(...e){super(...e),n(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}n(_t,"z$__type__Props",void 0),n(_t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:wt,method:"uniform4fv",type:"vec4"}}),n(_t,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),n(_t,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),n(_t,"onColorize","\n    return color;\n  ");class Lt extends ft{constructor(...e){super(...e),n(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}n(Lt,"z$__type__Props",void 0),n(Lt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:wt,method:"uniform4fv",type:"vec4"}}),n(Lt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),n(Lt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),n(Lt,"onColorize","\n    return color;\n  ");class Pt extends ft{constructor(...e){super(...e),n(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,n,o,i,r;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(n=e.narrowness)&&void 0!==n?n:4,blockiness:null!==(o=e.blockiness)&&void 0!==o?o:2,minimizer:null!==(i=e.minimizer)&&void 0!==i?i:8,time:null!==(r=e.time)&&void 0!==r?r:Date.now()}}}n(Pt,"z$__type__Props",void 0),n(Pt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:e=>{const t=e.value=(Date.now()-e.value)%1e3;e.programValue=t},type:"float"}}),n(Pt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),n(Pt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class Dt extends ft{constructor(...e){super(...e),n(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}n(Dt,"z$__type__Props",void 0),n(Dt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:Tt,updateProgramValue:e=>{const t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){const n=e.programValue;n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]}else e.programValue=new Float32Array(t)}}}),n(Dt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class Ot extends ft{constructor(...e){super(...e),n(this,"name","radialGradient")}static getEffectKey(e){return e.colors.value?`radialGradient${e.colors.value.length}`:`radialGradient${e.colors.length}`}static resolveDefaults(e){var t,n,o,i,r;const s=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295];let a=e.stops||[];if(0===a.length||a.length!==s.length){const e=s.length;let t=0;const n=a;for(;t<e;t++)a[t]?(n[t]=a[t],void 0===a[t-1]&&void 0!==n[t-2]&&(n[t-1]=n[t-2]+(a[t]-n[t-2])/2)):n[t]=t*(1/(s.length-1));a=n}return{colors:s,stops:a,width:null!==(n=e.width)&&void 0!==n?n:0,height:null!==(o=null!==(i=e.height)&&void 0!==i?i:e.width)&&void 0!==o?o:0,pivot:null!==(r=e.pivot)&&void 0!==r?r:[.5,.5]}}}r=Ot,n(Ot,"z$__type__Props",void 0),n(Ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:e=>{const t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){const n=e.programValue;n[0]=t[0],n[1]=t[1]}else e.programValue=new Float32Array(t)},method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.reduce((e,t)=>e.concat(ve(t)),[]),updateProgramValue:St,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),n(Ot,"ColorLoop",e=>{let t="";for(let n=2;n<e;n++)t+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return t}),n(Ot,"onColorize",e=>{const t=e.colors.length||1;return`\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ${r.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `});class Nt extends ft{constructor(...e){super(...e),n(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,n,o,i,r,s,a;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(n=e.progress)&&void 0!==n?n:.5,offset:null!==(o=e.offset)&&void 0!==o?o:0,range:null!==(i=e.range)&&void 0!==i?i:2*Math.PI,rounded:null!==(r=e.rounded)&&void 0!==r&&r,radius:null!==(s=e.radius)&&void 0!==s?s:1,color:null!==(a=e.color)&&void 0!==a?a:4294967295}}}n(Nt,"z$__type__Props",void 0),n(Nt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:wt,method:"uniform4fv",type:"vec4"}}),n(Nt,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),n(Nt,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),n(Nt,"onColorize","\n    return color;\n  ");class Ut extends ft{constructor(...e){super(...e),n(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:null!==(t=e.radius)&&void 0!==t?t:0}}}n(Ut,"z$__type__Props",void 0),n(Ut,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Tt,updateProgramValue:kt}}),n(Ut,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),n(Ut,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),n(Ut,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");class Bt extends ut{constructor(e){super(),n(this,"shType",void 0),this.shType=e}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class Ft{constructor(e,t,o,i){n(this,"type",void 0),n(this,"shader",void 0),n(this,"resolvedProps",void 0),n(this,"props",void 0),this.type=e,this.shader=t,this.resolvedProps=o;const r=Object.keys(o),s=r.length,a={};for(let n=0;n<s;n++){const e=r[n];Object.defineProperty(a,e,{get:()=>this.resolvedProps[e],set:t=>{this.resolvedProps[e]=t,i.requestRender()}})}this.props=a}getResolvedProps(){return this.resolvedProps}}class jt{constructor(e,t,o){n(this,"shader",void 0),n(this,"resolvedProps",void 0),n(this,"props",void 0),n(this,"type",void 0),this.shader=e,this.type="DynamicShader",this.resolvedProps=t;const i=o.getRegisteredEffects(),r={},s=t.effects,a=s.length;for(let n=0;n<a;n++){const{name:e,props:t,type:a}=s[n];if(void 0===e)continue;const l={},u=Object.keys(t),c=u.length;for(let r=0;r<c;r++){const e=u[r];Object.defineProperty(l,e,{get:()=>this.resolvedProps.effects[n].props[e].value,set:r=>{const s=this.resolvedProps.effects[n].props[e];var l,u;(s.value=r,s.hasValidator)&&(r=s.validatedValue=null===(l=i[a].uniforms[e])||void 0===l?void 0:l.validator(r,t));s.hasProgramValueUpdater?null===(u=i[a].uniforms[e])||void 0===u||u.updateProgramValue(s):s.programValue=r;o.renderer.stage.requestRender()}})}Object.defineProperty(r,e,{get:()=>l})}this.props=r}getResolvedProps(){return this.resolvedProps}}class zt{constructor(){n(this,"shCache",new Map),n(this,"shConstructors",{}),n(this,"attachedShader",null),n(this,"effectConstructors",{}),n(this,"renderer",void 0),this.registerShaderType("DefaultShader",pt),this.registerShaderType("DefaultShaderBatched",ht),this.registerShaderType("RoundedRectangle",vt),this.registerShaderType("DynamicShader",yt),this.registerShaderType("SdfShader",xt),this.registerEffectType("border",At),this.registerEffectType("borderBottom",_t),this.registerEffectType("borderLeft",Lt),this.registerEffectType("borderRight",Mt),this.registerEffectType("borderTop",Rt),this.registerEffectType("fadeOut",Dt),this.registerEffectType("linearGradient",It),this.registerEffectType("radialGradient",Ot),this.registerEffectType("grayscale",Et),this.registerEffectType("glitch",Pt),this.registerEffectType("radius",Ct),this.registerEffectType("radialProgress",Nt),this.registerEffectType("holePunch",Ut)}registerShaderType(e,t){this.shConstructors[e]=t}registerEffectType(e,t){this.effectConstructors[e]=t}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");const n=this.shConstructors[e];if(!n)throw new Error(`Shader type "${e}" is not registered`);if("canvas"===this.renderer.mode&&n.prototype instanceof dt)return this._createShaderCtr(e,new Bt(e),t);if("DynamicShader"===e)return this.loadDynamicShader(t);const o=n.resolveDefaults(t),i=n.makeCacheKey(o)||n.name;if(i&&this.shCache.has(i))return this._createShaderCtr(e,this.shCache.get(i),o);const r=new n(this.renderer,t);return i&&this.shCache.set(i,r),this._createShaderCtr(e,r,o)}loadDynamicShader(e){if(!this.renderer)throw new Error("Renderer is not been defined");const t=yt.resolveDefaults(e,this.effectConstructors),n=yt.makeCacheKey(t,this.effectConstructors);if(n&&this.shCache.has(n))return this._createDynShaderCtr(this.shCache.get(n),t);const o=new yt(this.renderer,e,this.effectConstructors);return n&&this.shCache.set(n,o),this._createDynShaderCtr(o,t)}_createShaderCtr(e,t,n){return new Ft(e,t,n,this.renderer.stage)}_createDynShaderCtr(e,t){return e.bindUniformMethods(t),new jt(e,t,this)}useShader(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}const $t={x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},width:(e,t)=>{e.props.width=t},height:(e,t)=>{e.props.height=t},color:(e,t)=>{e.props.color=t},zIndex:(e,t)=>{e.props.zIndex=t},fontFamily:(e,t)=>{e.props.fontFamily=t},fontWeight:(e,t)=>{e.props.fontWeight=t},fontStyle:(e,t)=>{e.props.fontStyle=t},fontStretch:(e,t)=>{e.props.fontStretch=t},fontSize:(e,t)=>{e.props.fontSize=t},text:(e,t)=>{e.props.text=t},textAlign:(e,t)=>{e.props.textAlign=t},contain:(e,t)=>{e.props.contain=t},offsetY:(e,t)=>{e.props.offsetY=t},scrollable:(e,t)=>{e.props.scrollable=t},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t},lineHeight:(e,t)=>{e.props.lineHeight=t},maxLines:(e,t)=>{e.props.maxLines=t},textBaseline:(e,t)=>{e.props.textBaseline=t},verticalAlign:(e,t)=>{e.props.verticalAlign=t},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t},debug:(e,t)=>{e.props.debug=t}};class Vt{constructor(e){n(this,"stage",void 0),n(this,"set",void 0),this.stage=e;const o=t(t({},$t),this.getPropertySetters()),i={};Object.keys(o).forEach(e=>{Object.defineProperty(i,e,{value:(t,n)=>{t.props[e]!==n&&(o[e](t,n),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=i}setStatus(e,t,n){e.status!==t&&(e.status=t,e.emitter.emit(t,n))}setIsRenderable(e,t){e.isRenderable=t}destroyState(e){this.setStatus(e,"destroyed"),e.emitter.removeAllListeners()}scheduleUpdateState(e){e.updateScheduled||(e.updateScheduled=!0,queueMicrotask(()=>{"destroyed"!==e.status&&(e.updateScheduled=!1,this.updateState(e))}))}}class Ht{constructor(){n(this,"data",{})}reset(){this.data={}}increment(e){this.data[e]||(this.data[e]=0),this.data[e]++}getData(){return t({},this.data)}}class Gt{constructor(e,t){n(this,"stage",void 0),n(this,"memUsed",0),n(this,"loadedTextures",new Map),n(this,"orphanedTextures",[]),n(this,"criticalThreshold",void 0),n(this,"targetThreshold",void 0),n(this,"cleanupInterval",void 0),n(this,"debugLogging",void 0),n(this,"lastCleanupTime",0),n(this,"baselineMemoryAllocation",void 0),n(this,"criticalCleanupRequested",!1),n(this,"doNotExceedCriticalThreshold",void 0),n(this,"frameTime",0),this.stage=e;const{criticalThreshold:o,doNotExceedCriticalThreshold:i}=t;this.doNotExceedCriticalThreshold=i||!1,this.criticalThreshold=Math.round(o);const r=Math.max(0,Math.min(1,t.targetThresholdLevel));if(this.cleanupInterval=t.cleanupInterval,this.debugLogging=t.debugLogging,this.baselineMemoryAllocation=Math.round(t.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(o*r),this.baselineMemoryAllocation),this.memUsed=Math.round(t.baselineMemoryAllocation),t.debugLogging){let e=0;setInterval(()=>{e!==this.memUsed&&(e=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${Be(this.memUsed)} mb / ${Be(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}0===o&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(e){this.orphanedTextures.includes(e)&&this.removeFromOrphanedTextures(e),!1===e.preventCleanup&&this.orphanedTextures.push(e)}removeFromOrphanedTextures(e){const t=this.orphanedTextures.indexOf(e);-1!==t&&this.orphanedTextures.splice(t,1)}setTextureMemUse(e,t){this.loadedTextures.has(e)&&(this.memUsed-=this.loadedTextures.get(e)),0!==t?(this.memUsed+=t,this.loadedTextures.set(e,t),this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)):this.loadedTextures.delete(e)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}checkCriticalCleanup(){return this.memUsed>this.criticalThreshold}cleanupQuick(e){const t=this.targetThreshold,n=Ge();for(;this.memUsed>=t&&this.orphanedTextures.length>0&&(e||Ge()-n<10);){const e=this.orphanedTextures.shift();void 0!==e&&(!0!==e.renderable&&(ge.TRANSITIONAL_TEXTURE_STATES.includes(e.state)||this.destroyTexture(e)))}}destroyTexture(e){!0===this.debugLogging&&console.log(`[TextureMemoryManager] Destroying texture. State: ${e.state}`);const t=this.stage.txManager;t.removeTextureFromQueue(e),t.removeTextureFromCache(e),e.destroy(),this.removeFromOrphanedTextures(e),this.loadedTextures.delete(e)}cleanupDeep(e){const t=e?this.criticalThreshold:this.targetThreshold,n=[],o=[...this.loadedTextures.keys()];for(let i=0;i<o.length;i++){const e=o[i];void 0!==e&&(e.type!==me.image&&e.type!==me.noise&&e.type!==me.renderToTexture||(!0===e.renderable?n.push(e):n.unshift(e)))}for(;this.memUsed>=t&&n.length>0;){const e=n.shift();if(void 0!==e&&!0!==e.preventCleanup){if(!0===e.renderable)break;if(ge.TRANSITIONAL_TEXTURE_STATES.includes(e.state))break;this.destroyTexture(e)}}}cleanup(e=!1){const t=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,!0===t&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),!0===this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${t}. Aggressive: ${e}`),this.cleanupQuick(t),!0===e&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(t),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),!0!==this.debugLogging&&!1!==pe()||console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`)):this.criticalCleanupRequested=!1}getMemoryInfo(){let e=0;const t=[...this.loadedTextures.keys()].reduce((t,n)=>{var o;e+=n.renderable?1:0;const i=null!==(o=this.loadedTextures.get(n))&&void 0!==o?o:0;return t+(n.renderable?i:0)},this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:t,memUsed:this.memUsed,renderableTexturesLoaded:e,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}class qt{constructor(e,t){n(this,"textureSource",void 0),n(this,"memManager",void 0),n(this,"state","freed"),this.memManager=e,this.textureSource=t}setTextureMemUse(e){this.memManager.setTextureMemUse(this.textureSource,e)}get renderable(){return this.textureSource.renderable}}class Wt{constructor(e){n(this,"options",void 0),n(this,"mode",void 0),n(this,"stage",void 0),n(this,"txManager",void 0),n(this,"txMemManager",void 0),n(this,"shManager",void 0),n(this,"rttNodes",[]),this.options=e,this.stage=e.stage,this.txManager=e.txManager,this.txMemManager=e.txMemManager,this.shManager=e.shManager}}class Kt extends He{constructor(e,t,o){super(e,t),n(this,"textRenderer",void 0),n(this,"trState",void 0),n(this,"_textRendererOverride",null),n(this,"onTextLoaded",()=>{const{contain:e}=this,t=this.trState.props.width,n=this.trState.props.height,o=this.trState.textW||0,i=this.trState.textH||0;"both"===e?(this.props.width=t,this.props.height=n):"width"===e?(this.props.width=t,this.props.height=i):"none"===e&&(this.props.width=o,this.props.height=i),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})}),n(this,"onTextFailed",(e,t)=>{this.emit("failed",{type:"text",error:t})}),this._textRendererOverride=t.textRendererOverride,this.textRenderer=o;const i=this.createState({x:0,y:0,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix});this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),"none"===this.contain&&this.setUpdateType(Ve.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),"both"!==this.contain&&this.setUpdateType(Ve.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const t=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);t?(this.textRenderer=t,this.trState=this.createState(this.trState.props)):console.warn("Text Renderer not found for font",this.trState.props.fontFamily)}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t){super.update(e,t),se(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return 0!==this.worldAlpha&&!0!==this.isOutOfBounds()&&!(!this.trState||""===this.trState.props.text)}setRenderable(e){super.setRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var t;if(se(this.globalTransform),this.textRenderer.renderQuads){if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}this.parentHasRenderTexture&&null!==(t=this.props.parent)&&void 0!==t&&t.rtt&&(this.globalTransform=Re.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),se(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions)}else super.renderQuads(e)}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(e){const t=this.textRenderer.createState(e,this);return t.emitter.on("loaded",this.onTextLoaded),t.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(t),t}}class Xt{constructor(e){n(this,"options",void 0),n(this,"animationManager",void 0),n(this,"txManager",void 0),n(this,"txMemManager",void 0),n(this,"fontManager",void 0),n(this,"textRenderers",void 0),n(this,"shManager",void 0),n(this,"renderer",void 0),n(this,"root",void 0),n(this,"interactiveNodes",new Set),n(this,"boundsMargin",void 0),n(this,"defShaderCtr",void 0),n(this,"strictBound",void 0),n(this,"preloadBound",void 0),n(this,"strictBounds",void 0),n(this,"defaultTexture",null),n(this,"targetFrameTime",0),n(this,"eventBus",void 0),n(this,"deltaTime",0),n(this,"lastFrameTime",0),n(this,"currentFrameTime",0),n(this,"fpsNumFrames",0),n(this,"fpsElapsedTime",0),n(this,"numQuadsRendered",0),n(this,"renderRequested",!1),n(this,"frameEventQueue",[]),n(this,"fontResolveMap",{}),n(this,"contextSpy",null),this.options=e;const{canvas:t,clearColor:o,appWidth:i,appHeight:r,boundsMargin:s,enableContextSpy:a,forceWebGL2:l,numImageWorkers:u,textureMemory:c,renderEngine:d,fontEngines:p,createImageBitmapSupport:h}=e;this.eventBus=e.eventBus,this.targetFrameTime=e.targetFPS>0?1e3/e.targetFPS:0,this.txManager=new rt(this,{numImageWorkers:u,createImageBitmapSupport:h}),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new Gt(this,c),this.shManager=new zt,this.animationManager=new qe,this.contextSpy=a?new Ht:null,this.strictBounds=e.strictBounds;let f=[0,0,0,0];s&&(f=Array.isArray(s)?s:[s,s,s,s]),this.boundsMargin=f,this.strictBound=Se(0,0,i,r),this.preloadBound=Ee(this.strictBound,f);const m={stage:this,canvas:t,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:null!=o?o:4278190080,bufferMemory:2e6,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:l};this.renderer=new d(m);const g=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),ue="webgl"===g,this.txManager.renderer=this.renderer,this.textRenderers={},p.forEach(e=>{const t=new e(this),n=t.type;"sdf"!==n||"canvas"!==g?t instanceof Vt&&("canvas"===n?this.textRenderers.canvas=t:"sdf"===n&&(this.textRenderers.sdf=t)):console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...")}),0===Object.keys(this.textRenderers).length&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new lt(this.textRenderers);const y=new He(this,{x:0,y:0,width:i,height:r,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=y,(e=>{let t=!1,n=0;const o=(i=0)=>{const r=e.targetFrameTime;if(r>0&&i-n<r)setTimeout(()=>requestAnimationFrame(o),r-(i-n));else{if(n=i,e.updateFrameTime(),e.updateAnimations(),!e.hasSceneUpdates())return e.calculateFps(),r>0?setTimeout(()=>requestAnimationFrame(o),Math.max(r,16.666666666666668)):setTimeout(()=>requestAnimationFrame(o),16.666666666666668),t||(e.eventBus.emit("idle"),t=!0),!0===e.txMemManager.checkCleanup()&&e.txMemManager.cleanup(!1),void e.flushFrameEvents();if(t=!1,e.drawFrame(),e.flushFrameEvents(),r>0){const e=Math.max(0,r-(performance.now()-i));setTimeout(()=>requestAnimationFrame(o),e)}else requestAnimationFrame(o)}};requestAnimationFrame(o)})(this)}setClearColor(e){this.renderer.updateClearColor(e),this.renderRequested=!0}updateTargetFrameTime(){this.targetFrameTime=this.options.targetFPS>0?1e3/this.options.targetFPS:0}updateFrameTime(){const e=Ge();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=e,this.deltaTime=this.lastFrameTime?e-this.lastFrameTime:100/6,this.txManager.frameTime=e,this.txMemManager.frameTime=e,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),se(this.defaultTexture instanceof Xe),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:e}=this;this.root&&e.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:e,renderRequested:t}=this;se(e),0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit).catch(e=>{console.error("Error processing textures:",e)}),e.reset(),!0===this.txMemManager.criticalCleanupRequested&&(this.txMemManager.cleanup(!1),!0===this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(!0)),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),null==e||e.render(),this.calculateFps(),this.calculateQuads(),t&&(this.renderRequested=!1)}queueFrameEvent(e,t){this.frameEventQueue.push([e,t])}flushFrameEvents(){for(const[e,t]of this.frameEventQueue)this.eventBus.emit(e,t);this.frameEventQueue=[]}calculateFps(){const{fpsUpdateInterval:e}=this.options;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){var t,n,o;const e=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:e,contextSpyData:null!==(t=null===(n=this.contextSpy)||void 0===n?void 0:n.getData())&&void 0!==t?t:null}),null===(o=this.contextSpy)||void 0===o||o.reset()}}calculateQuads(){const e=this.renderer.getQuadCount();e&&e!==this.numQuadsRendered&&(this.numQuadsRendered=e,this.queueFrameEvent("quadsUpdate",{quads:e}))}addQuads(e){se(this.renderer),!0===e.isRenderable&&e.renderQuads(this.renderer);for(let t=0;t<e.children.length;t++){const n=e.children[t];void 0!==n&&(0===n.worldAlpha||!0===n.strictBounds&&n.renderState===ze.OutOfBounds||this.addQuads(n))}}requestRender(){this.renderRequested=!0}findNodesAtPoint(e){const t=e.x/this.options.deviceLogicalPixelRatio,n=e.y/this.options.deviceLogicalPixelRatio,o=[];for(const i of this.interactiveNodes)!1!==i.isRenderable&&!0===Ie(t,n,i.renderBound)&&o.push(i);return o}getNodeFromPosition(e){const t=this.findNodesAtPoint(e);if(0===t.length)return null;let n=t[0];for(let o=0;o<t.length;o++)t[o].zIndex>n.zIndex&&(n=t[o]);return n||null}resolveTextRenderer(e,t=null){const n=`${e.fontFamily}${e.fontStyle}${e.fontWeight}${e.fontStretch}${t||""}`;if(void 0!==this.fontResolveMap[n])return this.fontResolveMap[n];let o=t,i=!1;if(o){const t=this.textRenderers[o];t?t.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${o}' for font`,e),o=null,i=!0):(console.warn(`Text renderer override '${o}' not found.`),o=null,i=!0)}if(!o){for(const[t,n]of Object.entries(this.textRenderers))if(n.canRenderFont(e)){o=t;break}o||void 0===this.textRenderers.canvas||(o="canvas")}if(i&&console.warn(`Falling back to text renderer ${String(o)}`),!o)return null;const r=this.textRenderers[o];return se(r,"resolvedTextRenderer undefined"),this.fontResolveMap[n]=r,r}createShaderCtr(e,t){return this.shManager.loadShader(e,t)}createNode(e){const t=this.resolveNodeDefaults(e);return new He(this,t)}createTextNode(e){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,g,y,v,b;const x=null!==(n=e.fontSize)&&void 0!==n?n:16,w=t(t({},this.resolveNodeDefaults(e)),{},{text:null!==(o=e.text)&&void 0!==o?o:"",textRendererOverride:null!==(i=e.textRendererOverride)&&void 0!==i?i:null,fontSize:x,fontFamily:null!==(r=e.fontFamily)&&void 0!==r?r:"sans-serif",fontStyle:null!==(s=e.fontStyle)&&void 0!==s?s:"normal",fontWeight:null!==(a=e.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(l=e.fontStretch)&&void 0!==l?l:"normal",textAlign:null!==(u=e.textAlign)&&void 0!==u?u:"left",contain:null!==(c=e.contain)&&void 0!==c?c:"none",scrollable:null!==(d=e.scrollable)&&void 0!==d&&d,scrollY:null!==(p=e.scrollY)&&void 0!==p?p:0,offsetY:null!==(h=e.offsetY)&&void 0!==h?h:0,letterSpacing:null!==(f=e.letterSpacing)&&void 0!==f?f:0,lineHeight:e.lineHeight,maxLines:null!==(m=e.maxLines)&&void 0!==m?m:0,textBaseline:null!==(g=e.textBaseline)&&void 0!==g?g:"alphabetic",verticalAlign:null!==(y=e.verticalAlign)&&void 0!==y?y:"middle",overflowSuffix:null!==(v=e.overflowSuffix)&&void 0!==v?v:"...",debug:null!==(b=e.debug)&&void 0!==b?b:{},shaderProps:null}),S=this.resolveTextRenderer(w,e.textRendererOverride);if(!S)throw new Error(`No compatible text renderer found for ${w.fontFamily}`);return new Kt(this,w,S)}setBoundsMargin(e){this.boundsMargin=Array.isArray(e)?e:[e,e,e,e],this.root.setUpdateType(Ve.RenderBounds)}resolveNodeDefaults(e){var t,n,o,i,r,s,a,l,u,c,d,p,h,f,m,g,y,v,b,x,w,S,T,k,C,A,I,E,M,R,_,L,P,D,O,N,U,B,F,j,z,$,V,H,G,q,W,K,X,Y,J,Q;const Z=null!==(t=e.color)&&void 0!==t?t:4294967295,ee=null!==(n=null!==(o=null!==(i=e.colorTl)&&void 0!==i?i:e.colorTop)&&void 0!==o?o:e.colorLeft)&&void 0!==n?n:Z,te=null!==(r=null!==(s=null!==(a=e.colorTr)&&void 0!==a?a:e.colorTop)&&void 0!==s?s:e.colorRight)&&void 0!==r?r:Z,ne=null!==(l=null!==(u=null!==(c=e.colorBl)&&void 0!==c?c:e.colorBottom)&&void 0!==u?u:e.colorLeft)&&void 0!==l?l:Z,oe=null!==(d=null!==(p=null!==(h=e.colorBr)&&void 0!==h?h:e.colorBottom)&&void 0!==p?p:e.colorRight)&&void 0!==d?d:Z;let ie={};var re;!0===this.options.inspector&&(ie=function(e){const t={boolean:!0,string:!0,number:!0,undefined:!0},n=Object.keys(e);for(let o=0;o<n.length;o++){const i=n[o];if(!i)continue;const r=e[i],s=typeof r;"string"===s&&r.length>2048&&(console.warn(`Custom Data value for ${i} is too long, it will be truncated to 2048 characters`),e[i]=r.substring(0,2048)),t[s]||(console.warn(`Custom Data value for ${i} is not a boolean, string, or number, it will be ignored`),delete e[i])}return e}(null!==(re=e.data)&&void 0!==re?re:{}));return{x:null!==(f=e.x)&&void 0!==f?f:0,y:null!==(m=e.y)&&void 0!==m?m:0,width:null!==(g=e.width)&&void 0!==g?g:0,height:null!==(y=e.height)&&void 0!==y?y:0,alpha:null!==(v=e.alpha)&&void 0!==v?v:1,autosize:null!==(b=e.autosize)&&void 0!==b&&b,boundsMargin:null!==(x=e.boundsMargin)&&void 0!==x?x:null,clipping:null!==(w=e.clipping)&&void 0!==w&&w,color:Z,colorTop:null!==(S=e.colorTop)&&void 0!==S?S:Z,colorBottom:null!==(T=e.colorBottom)&&void 0!==T?T:Z,colorLeft:null!==(k=e.colorLeft)&&void 0!==k?k:Z,colorRight:null!==(C=e.colorRight)&&void 0!==C?C:Z,colorBl:ne,colorBr:oe,colorTl:ee,colorTr:te,zIndex:null!==(A=e.zIndex)&&void 0!==A?A:0,zIndexLocked:null!==(I=e.zIndexLocked)&&void 0!==I?I:0,parent:null!==(E=e.parent)&&void 0!==E?E:null,texture:null!==(M=e.texture)&&void 0!==M?M:null,textureOptions:null!==(R=e.textureOptions)&&void 0!==R?R:{},shader:null!==(_=e.shader)&&void 0!==_?_:this.defShaderCtr,src:null!==(L=e.src)&&void 0!==L?L:null,srcHeight:e.srcHeight,srcWidth:e.srcWidth,srcX:e.srcX,srcY:e.srcY,scale:null!==(P=e.scale)&&void 0!==P?P:null,scaleX:null!==(D=null!==(O=e.scaleX)&&void 0!==O?O:e.scale)&&void 0!==D?D:1,scaleY:null!==(N=null!==(U=e.scaleY)&&void 0!==U?U:e.scale)&&void 0!==N?N:1,mount:null!==(B=e.mount)&&void 0!==B?B:0,mountX:null!==(F=null!==(j=e.mountX)&&void 0!==j?j:e.mount)&&void 0!==F?F:0,mountY:null!==(z=null!==($=e.mountY)&&void 0!==$?$:e.mount)&&void 0!==z?z:0,pivot:null!==(V=e.pivot)&&void 0!==V?V:.5,pivotX:null!==(H=null!==(G=e.pivotX)&&void 0!==G?G:e.pivot)&&void 0!==H?H:.5,pivotY:null!==(q=null!==(W=e.pivotY)&&void 0!==W?W:e.pivot)&&void 0!==q?q:.5,rotation:null!==(K=e.rotation)&&void 0!==K?K:0,rtt:null!==(X=e.rtt)&&void 0!==X&&X,data:ie,preventCleanup:null!==(Y=e.preventCleanup)&&void 0!==Y&&Y,imageType:e.imageType,interactive:null!==(J=e.interactive)&&void 0!==J&&J,strictBounds:null!==(Q=e.strictBounds)&&void 0!==Q?Q:this.strictBounds}}cleanup(e){this.txMemManager.cleanup(e)}}class Yt extends fe{constructor(e,t){var o,i,r,s,a,l,u,c,d,p,h,f;super(),n(this,"root",void 0),n(this,"canvas",void 0),n(this,"settings",void 0),n(this,"stage",void 0),n(this,"inspector",null);const m={criticalThreshold:(null===(o=e.textureMemory)||void 0===o?void 0:o.criticalThreshold)||124e6,targetThresholdLevel:(null===(i=e.textureMemory)||void 0===i?void 0:i.targetThresholdLevel)||.5,cleanupInterval:(null===(r=e.textureMemory)||void 0===r?void 0:r.cleanupInterval)||5e3,debugLogging:(null===(s=e.textureMemory)||void 0===s?void 0:s.debugLogging)||!1,baselineMemoryAllocation:(null===(a=e.textureMemory)||void 0===a?void 0:a.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:(null===(l=e.textureMemory)||void 0===l?void 0:l.doNotExceedCriticalThreshold)||!1},g={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,textureMemory:m,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(u=e.clearColor)&&void 0!==u?u:0,fpsUpdateInterval:e.fpsUpdateInterval||0,targetFPS:e.targetFPS||0,numImageWorkers:void 0!==e.numImageWorkers?e.numImageWorkers:2,enableContextSpy:null!==(c=e.enableContextSpy)&&void 0!==c&&c,forceWebGL2:null!==(d=e.forceWebGL2)&&void 0!==d&&d,inspector:null!==(p=e.inspector)&&void 0!==p&&p,renderEngine:e.renderEngine,quadBufferSize:null!==(h=e.quadBufferSize)&&void 0!==h?h:4194304,fontEngines:e.fontEngines,strictBounds:null===(f=e.strictBounds)||void 0===f||f,textureProcessingTimeLimit:e.textureProcessingTimeLimit||42,canvas:e.canvas||document.createElement("canvas"),createImageBitmapSupport:e.createImageBitmapSupport||"full"};this.settings=g;const{appWidth:y,appHeight:v,deviceLogicalPixelRatio:b,devicePhysicalPixelRatio:x,inspector:w,canvas:S}=g,T=y*b,k=v*b;let C;if(this.canvas=S,S.width=T*x,S.height=k*x,S.style.width=`${T}px`,S.style.height=`${k}px`,this.stage=new Xt({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,targetFPS:this.settings.targetFPS,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:m,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:null!==this.settings.inspector,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit,createImageBitmapSupport:this.settings.createImageBitmapSupport}),this.root=this.stage.root,C="string"==typeof t?document.getElementById(t):t,!C)throw new Error("Could not find target element");C.appendChild(S),w&&!pe()&&(this.inspector=new w(S,g))}createNode(e){const t=this.stage.createNode(e);return this.inspector?this.inspector.createNode(t):t}createTextNode(e){const t=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(t):t}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}createTexture(e,t){return this.stage.txManager.createTexture(e,t)}createShader(e,t){return this.stage.shManager.loadShader(e,t)}createDynamicShader(e){return this.stage.shManager.loadDynamicShader({effects:e})}createEffect(e,t,n){return{name:n,type:e,props:t}}getNodeById(e){var t;const n=null===(t=this.stage)||void 0===t?void 0:t.root;if(!n)return null;const o=t=>{if(t.id===e)return t;for(const e of t.children){const t=o(e);if(t)return t}return null};return o(n)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}cleanup(e=!1){this.stage.cleanup(e)}setClearColor(e){this.stage.setClearColor(e)}get targetFPS(){return this.stage.options.targetFPS}set targetFPS(e){this.stage.options.targetFPS=e>0?e:0,this.stage.updateTargetFrameTime()}}class Jt extends fe{constructor(e){super(),n(this,"fontFamily",void 0),n(this,"descriptors",void 0),n(this,"loaded",!1),n(this,"metrics",null);const{fontFamily:o,descriptors:i,metrics:r}=e;r&&(this.metrics={ascender:r.ascender/r.unitsPerEm,descender:r.descender/r.unitsPerEm,lineGap:r.lineGap/r.unitsPerEm}),this.fontFamily=o,this.descriptors=t({style:"normal",weight:"normal",stretch:"normal"},i)}static convertToCssFontFaceDescriptors(e){return{style:e.style,weight:"number"==typeof e.weight?`${e.weight}`:e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}class Qt extends Jt{constructor(e){super(e),n(this,"fontFace",void 0),n(this,"fontUrl",void 0);const{fontFamily:t,fontUrl:o}=e,i=o.replace(/\(|\)/g,""),r=this.descriptors;let s={style:r.style,weight:"number"==typeof r.weight?`${r.weight}`:r.weight,stretch:r.stretch,unicodeRange:r.unicodeRange,featureSettings:r.featureSettings,display:r.display};for(const n in s){const e=n;void 0===s[e]&&delete s[e]}const a=new FontFace(t,`url(${i})`,s);i.length>0?a.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=a,this.fontUrl=o}}class Zt{}class en extends Zt{constructor(e,t,o,i,r,s,a,l,u,c,d,p,h){super(),n(this,"glw",void 0),n(this,"options",void 0),n(this,"buffers",void 0),n(this,"shader",void 0),n(this,"shaderProps",void 0),n(this,"alpha",void 0),n(this,"clippingRect",void 0),n(this,"dimensions",void 0),n(this,"bufferIdx",void 0),n(this,"zIndex",void 0),n(this,"renderToTexture",void 0),n(this,"parentHasRenderTexture",void 0),n(this,"framebufferDimensions",void 0),n(this,"length",0),n(this,"numQuads",0),n(this,"textures",[]),n(this,"maxTextures",void 0),this.glw=e,this.options=t,this.buffers=o,this.shader=i,this.shaderProps=r,this.alpha=s,this.clippingRect=a,this.dimensions=l,this.bufferIdx=u,this.zIndex=c,this.renderToTexture=d,this.parentHasRenderTexture=p,this.framebufferDimensions=h,this.maxTextures=i.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:t,maxTextures:n}=this;let o=-1;const i=t.length;for(let r=0;r<i;r++){if(t[r]===e){o=r;break}}return-1!==o?o:i>=n?4294967295:(this.textures.push(e),i)}draw(){const{glw:e,shader:t,shaderProps:n,options:o}=this,{shManager:i}=o;i.useShader(t),t.bindRenderOp(this,n);const r=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:t,y:n,width:i,height:r}=this.clippingRect,s=this.parentHasRenderTexture?1:o.pixelRatio,a=o.canvas.height,l=Math.round(t*s),u=Math.round(i*s),c=Math.round(r*s);let d=Math.round(a-c-n*s);this.parentHasRenderTexture&&(d=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),e.setScissorTest(!0),e.scissor(l,d,u,c)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,r)}}function tn(e){const t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(n=>{t[n]=e.getParameter(e[n])}),t}function nn(e){const t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(n=>{t[n]=e.getExtension(n)}),t}const on=new Uint8Array([0,0,0,0]);class rn extends qt{constructor(e,t,o){super(t,o),n(this,"glw",void 0),n(this,"_nativeCtxTexture",null),n(this,"_w",0),n(this,"_h",0),this.glw=e}get ctxTexture(){return"freed"===this.state?(this.load(),null):(se(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}async load(){if("loading"===this.state||"loaded"===this.state)return Promise.resolve();if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),null===this._nativeCtxTexture){this.state="failed";const e=new Error("Could not create WebGL Texture");throw this.textureSource.setState("failed",e),console.error("Could not create WebGL Texture"),e}try{const{width:e,height:t}=await this.onLoadRequest();if("freed"===this.state)return;this.state="loaded",this._w=e,this._h=t,this.textureSource.setState("loaded",{width:e,height:t}),queueMicrotask(()=>{this.textureSource.freeTextureData()})}catch(e){if("freed"===this.state)return;this.state="failed";const t=e instanceof Error?e:new Error(String(e));throw this.textureSource.setState("failed",t),this.textureSource.freeTextureData(),console.error(e),t}}async onLoadRequest(){const{glw:e}=this,t=this.textureSource.textureData;if(null===t||null===this._nativeCtxTexture)throw new Error("Texture data or native texture is null "+this.textureSource.type);e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(on.byteLength);let n=0,o=0;e.activeTexture(0);const i=t.data,r=e.RGBA;if("undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap||i instanceof ImageData||null!==(a=i)&&("object"==typeof a&&a.constructor&&"HTMLImageElement"===a.constructor.name||"undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement))n=i.width,o=i.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!t.premultiplyAlpha),e.texImage2D(0,r,r,e.UNSIGNED_BYTE,i),this.setTextureMemUse(o*n*4*1.1);else if(null===i)n=0,o=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,r,1,1,0,r,e.UNSIGNED_BYTE,on),this.setTextureMemUse(on.byteLength);else if("mipmaps"in i&&i.mipmaps){var s;const{mipmaps:t,width:n=0,height:o=0,type:r,glInternalFormat:a}=i,l="ktx"===r?new DataView(null!==(s=t[0])&&void 0!==s?s:new ArrayBuffer(0)):t[0];e.bindTexture(this._nativeCtxTexture),e.compressedTexImage2D(0,a,n,o,0,l),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),this.setTextureMemUse(l.byteLength)}else i&&i instanceof Uint8Array?(n=1,o=1,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!t.premultiplyAlpha),e.texImage2D(0,r,n,o,0,r,e.UNSIGNED_BYTE,i),this.setTextureMemUse(n*o*4)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",t);var a;return{width:n,height:o}}free(){"freed"!==this.state&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,null!==this._nativeCtxTexture&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}createNativeCtxTexture(){const{glw:e}=this,t=e.createTexture();return t?(e.activeTexture(0),e.bindTexture(t),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t):null}}class sn extends rn{constructor(e,t,n){super(e,t,n)}async onLoadRequest(){var e,t;const n=this.textureSource.textureData;return se(n,"SubTexture must have texture data"),n.data instanceof Uint8Array?{width:1,height:1}:{width:(null===(e=n.data)||void 0===e?void 0:e.width)||0,height:(null===(t=n.data)||void 0===t?void 0:t.height)||0}}}class an{constructor(e){n(this,"config",void 0),this.config=e}getBuffer(e){var t;return null===(t=this.config.find(t=>t.attributes[e]))||void 0===t?void 0:t.buffer}getAttributeInfo(e){var t;return null===(t=this.config.find(t=>t.attributes[e]))||void 0===t?void 0:t.attributes[e]}}class ln{constructor(e){n(this,"gl",void 0),n(this,"activeTextureUnit",0),n(this,"texture2dUnits",void 0),n(this,"texture2dParams",new WeakMap),n(this,"scissorEnabled",void 0),n(this,"scissorX",void 0),n(this,"scissorY",void 0),n(this,"scissorWidth",void 0),n(this,"scissorHeight",void 0),n(this,"blendEnabled",void 0),n(this,"blendSrcRgb",void 0),n(this,"blendDstRgb",void 0),n(this,"blendSrcAlpha",void 0),n(this,"blendDstAlpha",void 0),n(this,"boundArrayBuffer",void 0),n(this,"boundElementArrayBuffer",void 0),n(this,"curProgram",void 0),n(this,"canvas",void 0),n(this,"MAX_RENDERBUFFER_SIZE",void 0),n(this,"MAX_TEXTURE_SIZE",void 0),n(this,"MAX_VIEWPORT_DIMS",void 0),n(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS",void 0),n(this,"MAX_TEXTURE_IMAGE_UNITS",void 0),n(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS",void 0),n(this,"MAX_VERTEX_ATTRIBS",void 0),n(this,"MAX_VARYING_VECTORS",void 0),n(this,"MAX_VERTEX_UNIFORM_VECTORS",void 0),n(this,"MAX_FRAGMENT_UNIFORM_VECTORS",void 0),n(this,"TEXTURE_MAG_FILTER",void 0),n(this,"TEXTURE_MIN_FILTER",void 0),n(this,"TEXTURE_WRAP_S",void 0),n(this,"TEXTURE_WRAP_T",void 0),n(this,"LINEAR",void 0),n(this,"CLAMP_TO_EDGE",void 0),n(this,"RGB",void 0),n(this,"RGBA",void 0),n(this,"UNSIGNED_BYTE",void 0),n(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL",void 0),n(this,"UNPACK_FLIP_Y_WEBGL",void 0),n(this,"FLOAT",void 0),n(this,"TRIANGLES",void 0),n(this,"UNSIGNED_SHORT",void 0),n(this,"ONE",void 0),n(this,"ONE_MINUS_SRC_ALPHA",void 0),n(this,"VERTEX_SHADER",void 0),n(this,"FRAGMENT_SHADER",void 0),n(this,"STATIC_DRAW",void 0),n(this,"COMPILE_STATUS",void 0),n(this,"LINK_STATUS",void 0),n(this,"DYNAMIC_DRAW",void 0),n(this,"COLOR_ATTACHMENT0",void 0),n(this,"INVALID_ENUM",void 0),n(this,"INVALID_OPERATION",void 0),this.gl=e,this.activeTextureUnit=e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0;const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(t).fill(void 0).map((t,n)=>(this.activeTexture(n),e.getParameter(e.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=e.isEnabled(e.SCISSOR_TEST);const o=e.getParameter(e.SCISSOR_BOX);this.scissorX=o[0],this.scissorY=o[1],this.scissorWidth=o[2],this.scissorHeight=o[3],this.blendEnabled=e.isEnabled(e.BLEND),this.blendSrcRgb=e.getParameter(e.BLEND_SRC_RGB),this.blendDstRgb=e.getParameter(e.BLEND_DST_RGB),this.blendSrcAlpha=e.getParameter(e.BLEND_SRC_ALPHA),this.blendDstAlpha=e.getParameter(e.BLEND_DST_ALPHA),this.boundArrayBuffer=e.getParameter(e.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=e.getParameter(e.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=e.getParameter(e.CURRENT_PROGRAM),this.canvas=e.canvas,this.MAX_RENDERBUFFER_SIZE=e.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=e.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=e.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=e.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=e.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=e.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=e.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=e.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=e.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=e.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=e.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=e.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=e.TEXTURE_WRAP_T,this.LINEAR=e.LINEAR,this.CLAMP_TO_EDGE=e.CLAMP_TO_EDGE,this.RGB=e.RGB,this.RGBA=e.RGBA,this.UNSIGNED_BYTE=e.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=e.UNPACK_FLIP_Y_WEBGL,this.FLOAT=e.FLOAT,this.TRIANGLES=e.TRIANGLES,this.UNSIGNED_SHORT=e.UNSIGNED_SHORT,this.ONE=e.ONE,this.ONE_MINUS_SRC_ALPHA=e.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=e.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=e.TRIANGLES,this.UNSIGNED_SHORT=e.UNSIGNED_SHORT,this.VERTEX_SHADER=e.VERTEX_SHADER,this.FRAGMENT_SHADER=e.FRAGMENT_SHADER,this.STATIC_DRAW=e.STATIC_DRAW,this.COMPILE_STATUS=e.COMPILE_STATUS,this.LINK_STATUS=e.LINK_STATUS,this.DYNAMIC_DRAW=e.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=e.COLOR_ATTACHMENT0,this.INVALID_ENUM=e.INVALID_ENUM,this.INVALID_OPERATION=e.INVALID_OPERATION}isWebGl2(){return e=this.gl,self.WebGL2RenderingContext&&e instanceof self.WebGL2RenderingContext;var e}activeTexture(e){const{gl:t}=this;this.activeTextureUnit!==e&&(t.activeTexture(e+t.TEXTURE0),this.activeTextureUnit=e)}bindTexture(e){const{gl:t,activeTextureUnit:n,texture2dUnits:o}=this;o[n]!==e&&(o[n]=e,t.bindTexture(this.gl.TEXTURE_2D,e))}_getActiveTexture(){const{activeTextureUnit:e,texture2dUnits:t}=this;return t[e]}texParameteri(e,t){const{gl:n,texture2dParams:o}=this,i=this._getActiveTexture();if(!i)throw new Error("No active texture");let r=o.get(i);r||(r={},o.set(i,r)),r[e]!==t&&(r[e]=t,n.texParameteri(n.TEXTURE_2D,e,t))}texImage2D(e,t,n,o,i,r,s,a){const{gl:l}=this;r?l.texImage2D(l.TEXTURE_2D,e,t,n,o,i,r,s,a):l.texImage2D(l.TEXTURE_2D,e,t,n,o,i)}compressedTexImage2D(e,t,n,o,i,r){const{gl:s}=this;s.compressedTexImage2D(s.TEXTURE_2D,e,t,n,o,i,r)}pixelStorei(e,t){const{gl:n}=this;n.pixelStorei(e,t)}generateMipmap(){const{gl:e}=this;e.generateMipmap(e.TEXTURE_2D)}createTexture(){const{gl:e}=this;return e.createTexture()}deleteTexture(e){const{gl:t}=this;e&&this.texture2dParams.delete(e),t.deleteTexture(e)}deleteFramebuffer(e){this.gl.deleteFramebuffer(e)}viewport(e,t,n,o){const{gl:i}=this;i.viewport(e,t,n,o)}clearColor(e,t,n,o){const{gl:i}=this;i.clearColor(e,t,n,o)}setScissorTest(e){const{gl:t,scissorEnabled:n}=this;e!==n&&(e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.scissorEnabled=e)}scissor(e,t,n,o){const{gl:i,scissorX:r,scissorY:s,scissorWidth:a,scissorHeight:l}=this;e===r&&t===s&&n===a&&o===l||(i.scissor(e,t,n,o),this.scissorX=e,this.scissorY=t,this.scissorWidth=n,this.scissorHeight=o)}setBlend(e){const{gl:t,blendEnabled:n}=this;e!==n&&(e?t.enable(t.BLEND):t.disable(t.BLEND),this.blendEnabled=e)}blendFunc(e,t){const{gl:n,blendSrcRgb:o,blendDstRgb:i,blendSrcAlpha:r,blendDstAlpha:s}=this;e===o&&t===i&&e===r&&t===s||(n.blendFunc(e,t),this.blendSrcRgb=e,this.blendDstRgb=t,this.blendSrcAlpha=e,this.blendDstAlpha=t)}createBuffer(){const{gl:e}=this;return e.createBuffer()}createFramebuffer(){const{gl:e}=this;return e.createFramebuffer()}bindFramebuffer(e){const{gl:t}=this;t.bindFramebuffer(t.FRAMEBUFFER,e)}framebufferTexture2D(e,t,n){const{gl:o}=this;o.framebufferTexture2D(o.FRAMEBUFFER,e,o.TEXTURE_2D,t,n)}clear(){const{gl:e}=this;e.clear(e.COLOR_BUFFER_BIT)}arrayBufferData(e,t,n){const{gl:o,boundArrayBuffer:i}=this;i!==e&&(o.bindBuffer(o.ARRAY_BUFFER,e),this.boundArrayBuffer=e),o.bufferData(o.ARRAY_BUFFER,t,n)}elementArrayBufferData(e,t,n){const{gl:o,boundElementArrayBuffer:i}=this;i!==e&&(o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e),this.boundElementArrayBuffer=e),o.bufferData(o.ELEMENT_ARRAY_BUFFER,t,n)}vertexAttribPointer(e,t,n,o,i,r,s){const{gl:a,boundArrayBuffer:l}=this;l!==e&&(a.bindBuffer(a.ARRAY_BUFFER,e),this.boundArrayBuffer=e),a.vertexAttribPointer(t,n,o,i,r,s)}useProgram(e){const{gl:t,curProgram:n}=this;n!==e&&(t.useProgram(e),this.curProgram=e)}uniform1f(e,t){const{gl:n}=this;n.uniform1f(e,t)}uniform1fv(e,t){const{gl:n}=this;n.uniform1fv(e,t)}uniform1i(e,t){const{gl:n}=this;n.uniform1i(e,t)}uniform1iv(e,t){const{gl:n}=this;n.uniform1iv(e,t)}uniform2f(e,t,n){const{gl:o}=this;o.uniform2f(e,t,n)}uniform2fv(e,t){const{gl:n}=this;n.uniform2fv(e,t)}uniform2i(e,t,n){const{gl:o}=this;o.uniform2i(e,t,n)}uniform2iv(e,t){const{gl:n}=this;n.uniform2iv(e,t)}uniform3f(e,t,n,o){const{gl:i}=this;i.uniform3f(e,t,n,o)}uniform3fv(e,t){const{gl:n}=this;n.uniform3fv(e,t)}uniform3i(e,t,n,o){const{gl:i}=this;i.uniform3i(e,t,n,o)}uniform3iv(e,t){const{gl:n}=this;n.uniform3iv(e,t)}uniform4f(e,t,n,o,i){const{gl:r}=this;r.uniform4f(e,t,n,o,i)}uniform4fv(e,t){const{gl:n}=this;n.uniform4fv(e,t)}uniform4i(e,t,n,o,i){const{gl:r}=this;r.uniform4i(e,t,n,o,i)}uniform4iv(e,t){const{gl:n}=this;n.uniform4iv(e,t)}uniformMatrix2fv(e,t){const{gl:n}=this;n.uniformMatrix2fv(e,!1,t)}uniformMatrix3fv(e,t){const{gl:n}=this;n.uniformMatrix3fv(e,!1,t)}uniformMatrix4fv(e,t){const{gl:n}=this;n.uniformMatrix4fv(e,!1,t)}getParameter(e){const{gl:t}=this;return t.getParameter(e)}drawElements(e,t,n,o){const{gl:i}=this;i.drawElements(e,t,n,o)}getExtension(e){const{gl:t}=this;return t.getExtension(e)}getError(){const{gl:e}=this;return e.getError()}createVertexArray(){const{gl:e}=this;return se(e instanceof WebGL2RenderingContext),e.createVertexArray()}bindVertexArray(e){const{gl:t}=this;se(t instanceof WebGL2RenderingContext),t.bindVertexArray(e)}getAttribLocation(e,t){const{gl:n}=this;return n.getAttribLocation(e,t)}getUniformLocation(e,t){const{gl:n}=this;return n.getUniformLocation(e,t)}enableVertexAttribArray(e){const{gl:t}=this;t.enableVertexAttribArray(e)}disableVertexAttribArray(e){const{gl:t}=this;t.disableVertexAttribArray(e)}createShader(e){const{gl:t}=this;return t.createShader(e)}compileShader(e){const{gl:t}=this;t.compileShader(e)}attachShader(e,t){const{gl:n}=this;n.attachShader(e,t)}linkProgram(e){const{gl:t}=this;t.linkProgram(e)}deleteProgram(e){const{gl:t}=this;t.deleteProgram(e)}getShaderParameter(e,t){const{gl:n}=this;return n.getShaderParameter(e,t)}getShaderInfoLog(e){const{gl:t}=this;return t.getShaderInfoLog(e)}createProgram(){const{gl:e}=this;return e.createProgram()}getProgramParameter(e,t){const{gl:n}=this;return n.getProgramParameter(e,t)}getProgramInfoLog(e){const{gl:t}=this;return t.getProgramInfoLog(e)}shaderSource(e,t){const{gl:n}=this;n.shaderSource(e,t)}deleteShader(e){const{gl:t}=this;t.deleteShader(e)}}class un extends rn{constructor(e,t,o){super(e,t,o),n(this,"framebuffer",null)}async onLoadRequest(){const{glw:e}=this,t=this._nativeCtxTexture=this.createNativeCtxTexture();if(!t)throw new Error("Failed to create native texture for RenderTexture");const{width:n,height:o}=this.textureSource;return this.framebuffer=e.createFramebuffer(),e.texImage2D(0,e.RGBA,n,o,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(n*o*4),e.bindFramebuffer(this.framebuffer),e.framebufferTexture2D(e.COLOR_ATTACHMENT0,t,0),e.bindFramebuffer(null),{width:n,height:o}}free(){super.free(),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}class cn extends Wt{constructor(e){super(e),n(this,"glw",void 0),n(this,"system",void 0),n(this,"quadBuffer",void 0),n(this,"fQuadBuffer",void 0),n(this,"uiQuadBuffer",void 0),n(this,"renderOps",[]),n(this,"curBufferIdx",0),n(this,"curRenderOp",null),n(this,"rttNodes",[]),n(this,"activeRttNode",null),n(this,"defShaderCtrl",void 0),n(this,"defaultShader",void 0),n(this,"quadBufferCollection",void 0),n(this,"clearColor",{raw:0,normalized:[0,0,0,0]}),n(this,"quadBufferUsage",0),n(this,"numQuadsRendered",0),n(this,"renderToTextureActive",!1),this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:t,clearColor:o,bufferMemory:i}=e,r=function(e,t=!1,n){const o={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},i=e.getContext(t?"webgl2":"webgl",o)||e.getContext("experimental-webgl",o);if(!i)throw new Error("Unable to create WebGL context");return n?new Proxy(i,{get(e,t){const o=e[t];return"function"==typeof o?(n.increment(String(t)),o.bind(e)):o}}):i}(t,e.forceWebGL2,e.contextSpy),s=this.glw=new ln(r);s.viewport(0,0,t.width,t.height),this.updateClearColor(o),s.setBlend(!0),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),function(e,t){const n=~~(t/80),o=new Uint16Array(6*n);for(let r=0,s=0;r<n;r+=6,s+=4)o[r]=s,o[r+1]=s+1,o[r+2]=s+2,o[r+3]=s+2,o[r+4]=s+1,o[r+5]=s+3;const i=e.createBuffer();e.elementArrayBufferData(i,o,e.STATIC_DRAW)}(s,i),this.system={parameters:tn(this.glw),extensions:nn(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const a=s.createBuffer();se(a);const l=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new an([{buffer:a,attributes:{a_position:{name:"a_position",size:2,type:s.FLOAT,normalized:!1,stride:l,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:s.FLOAT,normalized:!1,stride:l,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:s.UNSIGNED_BYTE,normalized:!0,stride:l,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:s.FLOAT,normalized:!1,stride:l,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof ot?new sn(this.glw,this.txMemManager,e):e instanceof it?new un(this.glw,this.txMemManager,e):new rn(this.glw,this.txMemManager,e)}addQuad(e){const{fQuadBuffer:t,uiQuadBuffer:n}=this;let o=e.texture;if(se(null!==o,"Texture is required"),null!==e.shaderProps){if(1==de(e.shaderProps,"$dimensions")){const t=e.shaderProps.$dimensions;t.width=e.width,t.height=e.height}!0===de(e.shaderProps,"$alpha")&&(e.shaderProps.$alpha=e.alpha)}let{curBufferIdx:i,curRenderOp:r}=this;const s={width:-1,height:-1};s.width=e.width,s.height=e.height;const a=e.shader||this.defaultShader;se(void 0!==a.getUniformLocation,"Invalid WebGL shader"),!1===this.reuseRenderOp(e)&&(this.newRenderOp(a,e.shaderProps,e.alpha,s,e.clippingRect,i,e.rtt,e.parentHasRenderTexture,e.framebufferDimensions),r=this.curRenderOp,se(r));let l=0,u=0,c=1,d=1;if(o.type===me.subTexture){const{x:e,y:t,width:n,height:i}=o.props,{width:r=0,height:s=0}=o.parentTexture.dimensions||{width:0,height:0};l=e/r,c=l+n/r,u=t/s,d=u+i/s,o=o.parentTexture}if(o.type===me.image&&null!==e.textureOptions&&void 0!==e.textureOptions.resizeMode&&null!==o.dimensions){const t=e.textureOptions.resizeMode,{width:n,height:i}=o.dimensions;if("cover"===t.type){const o=e.width/n,r=e.height/i,s=Math.max(o,r),a=1/s;if(s&&o&&o<s){var p;const o=a*e.width;l=(1-o/n)*(null!==(p=t.clipX)&&void 0!==p?p:.5),c=l+o/n}if(s&&r&&r<s){var h;const n=a*e.height;u=(1-n/i)*(null!==(h=t.clipY)&&void 0!==h?h:.5),d=u+n/i}}}let f=0;null!==e.textureOptions&&(!0===e.textureOptions.flipX&&([l,c]=[c,l]),f=+(e.textureOptions.flipY||!1)),f^+(o.type===me.renderToTexture)&&([u,d]=[d,u]);let m=o.ctxTexture;var g;void 0===m&&(m=null===(g=this.stage.defaultTexture)||void 0===g?void 0:g.ctxTexture,console.warn("WebGL Renderer: Texture does not have a ctxTexture, using default texture instead"));const y=this.addTexture(m,i);if(se(null!==this.curRenderOp),e.renderCoords)t[i++]=e.renderCoords.x1,t[i++]=e.renderCoords.y1,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=y,t[i++]=e.renderCoords.x2,t[i++]=e.renderCoords.y2,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=y,t[i++]=e.renderCoords.x4,t[i++]=e.renderCoords.y4,t[i++]=l,t[i++]=d,n[i++]=e.colorBl,t[i++]=y,t[i++]=e.renderCoords.x3,t[i++]=e.renderCoords.y3,t[i++]=c,t[i++]=d,n[i++]=e.colorBr,t[i++]=y;else if(0!==e.tb||0!==e.tc)t[i++]=e.tx,t[i++]=e.ty,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=y,t[i++]=e.tx+e.width*e.ta,t[i++]=e.ty+e.width*e.tc,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=y,t[i++]=e.tx+e.height*e.tb,t[i++]=e.ty+e.height*e.td,t[i++]=l,t[i++]=d,n[i++]=e.colorBl,t[i++]=y,t[i++]=e.tx+e.width*e.ta+e.height*e.tb,t[i++]=e.ty+e.width*e.tc+e.height*e.td,t[i++]=c,t[i++]=d,n[i++]=e.colorBr,t[i++]=y;else{const o=e.tx+e.width*e.ta,r=e.ty+e.height*e.td;t[i++]=e.tx,t[i++]=e.ty,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=y,t[i++]=o,t[i++]=e.ty,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=y,t[i++]=e.tx,t[i++]=r,t[i++]=l,t[i++]=d,n[i++]=e.colorBl,t[i++]=y,t[i++]=o,t[i++]=r,t[i++]=c,t[i++]=d,n[i++]=e.colorBr,t[i++]=y}this.curRenderOp.length+=24,this.curRenderOp.numQuads++,this.curBufferIdx=i}newRenderOp(e,t,n,o,i,r,s,a,l){const u=new en(this.glw,this.options,this.quadBufferCollection,e,t,n,i,o,r,0,s,a,l);this.curRenderOp=u,this.renderOps.push(u)}addTexture(e,t,n){const{curRenderOp:o}=this;se(o);const i=o.addTexture(e);if(4294967295===i){if(n)throw new Error("Unable to add texture to render op");return this.newRenderOp(o.shader,o.shaderProps,o.alpha,o.dimensions,o.clippingRect,t),this.addTexture(e,t,!0)}return i}reuseRenderOp(e){var t;const{shader:n,shaderProps:o,parentHasRenderTexture:i,rtt:r,clippingRect:s}=e,a=n||this.defaultShader;return(null===(t=this.curRenderOp)||void 0===t?void 0:t.shader)===a&&(!1!=((l=this.curRenderOp.clippingRect)===(u=s)||null!==l&&null!==u&&l.x===u.x&&l.y===u.y&&l.width===u.width&&l.height===u.height)&&(void 0===i&&void 0===r&&(this.curRenderOp.shader===this.defaultShader||null!==o&&!1!==this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,o))));var l,u}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){const{glw:t,quadBuffer:n}=this,o=new Float32Array(n,0,this.curBufferIdx),i=this.quadBufferCollection.getBuffer("a_position")||null;t.arrayBufferData(i,o,t.STATIC_DRAW);for(let s=0,a=this.renderOps.length;s<a;s++)this.renderOps[s].draw();this.quadBufferUsage=this.curBufferIdx*o.BYTES_PER_ELEMENT;const r=6*o.BYTES_PER_ELEMENT*4;this.numQuadsRendered=this.quadBufferUsage/r}getQuadCount(){return this.numQuadsRendered}renderToTexture(e){for(let t=0;t<this.rttNodes.length;t++)if(this.rttNodes[t]===e)return;this.insertRTTNodeInOrder(e)}insertRTTNodeInOrder(e){let t=this.rttNodes.length,n=e;for(;n&&n.parent;){const e=this.rttNodes.indexOf(n.parent);if(-1!==e){t=e;break}n=n.parent}const o=this.findMaxChildRTTIndex(e);-1!==o&&(t=Math.max(t,o+1)),this.rttNodes.splice(t,0,e)}findMaxChildRTTIndex(e){let t=-1;const n=e=>{const o=this.rttNodes.indexOf(e);-1!==o&&(t=Math.max(t,o));for(const t of e.children)n(t)};return n(e),t}renderRTTNodes(){const{glw:e}=this,{txManager:t}=this.stage;for(let o=0;o<this.rttNodes.length;o++){const t=this.rttNodes[o];if(void 0===t||!1===t.hasRTTupdates)continue;if(0===t.worldAlpha||!0===t.strictBounds&&t.renderState===ze.OutOfBounds)continue;if(null===t.texture||"loaded"!==t.texture.state)continue;this.activeRttNode=t,se(t.texture,"RTT node missing texture");const n=t.texture.ctxTexture;se(n instanceof un),this.renderToTextureActive=!0,e.bindFramebuffer(n.framebuffer),e.viewport(0,0,n.w,n.h),e.clearColor(0,0,0,0),e.clear();for(let e=0;e<t.children.length;e++){const n=t.children[e];void 0!==n&&(this.stage.addQuads(n),n.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,t.hasRTTupdates=!1}const n=this.clearColor.normalized;e.clearColor(n[0],n[1],n[2],n[3]),e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(e){const t=this.rttNodes.indexOf(e);-1!==t&&this.rttNodes.splice(t,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(e){if(this.clearColor.raw===e)return;const t=this.glw,n=ve(e);t.clearColor(n[0],n[1],n[2],n[3]),this.clearColor={raw:e,normalized:n},t.clear()}}const dn=10;class pn{}class hn extends pn{constructor(e,t){super(),n(this,"data",void 0),n(this,"glyphMap",void 0),n(this,"kernings",void 0),this.data=e,this.glyphMap=t;const o=this.kernings={};e.kernings.forEach(e=>{const t=e.second;(o[t]=o[t]||{})[e.first]=e.amount}),this.kernings=o}*shapeText(e,t){let n,o;for(;(n=t.peek())&&!n.done;){const r=n.value,s=this.glyphMap.get(r);if(t.next(),void 0!==s){var i;const n=void 0!==o?((null===(i=this.kernings[s.id])||void 0===i?void 0:i[o])||0)+e.letterSpacing:0;o=s.id,yield{mapped:!0,glyphId:s.id,codepoint:r,cluster:t.lastIndex,xAdvance:s.xadvance+n,yAdvance:0,xOffset:s.xoffset+n,yOffset:s.yoffset,xBearing:0,yBearing:0,width:s.width,height:s.height}}else r===dn&&(o=void 0),yield{mapped:!1,codepoint:r,cluster:t.lastIndex}}}}class fn extends Jt{constructor(e,t){super(t),n(this,"type",void 0),n(this,"texture",void 0),n(this,"maxCharHeight",0),n(this,"shaper",void 0),n(this,"glyphMap",new Map),n(this,"data",void 0);const{atlasUrl:o,atlasDataUrl:i,stage:r}=t;this.type=e;se(r.renderer instanceof cn,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=r.txManager.createTexture("ImageTexture",{src:o,premultiplyAlpha:!1}),r.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),r.requestRender()}),et(i).then(e=>{this.data=JSON.parse(e),se(this.data);let t=0;if(this.data.chars.forEach(e=>{this.glyphMap.set(e.id,e);const n=e.yoffset+e.height;n>t&&(t=n)}),this.maxCharHeight=t,this.shaper=new hn(this.data,this.glyphMap),!this.metrics){var n;if(null===(n=this.data)||void 0===n||!n.lightningMetrics)throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);{const{ascender:e,descender:t,lineGap:n,unitsPerEm:o}=this.data.lightningMetrics;this.metrics={ascender:e/o,descender:t/o,lineGap:n/o}}}this.checkLoaded()}).catch(console.error)}getAtlasEntry(e){const t=this.glyphMap.get(e);if(void 0===t)throw new Error(`Glyph ${e} not found in font ${this.fontFamily}`);return{x:t.x,y:t.y,width:t.width,height:t.height}}checkLoaded(){this.loaded||"loaded"===this.texture.state&&this.data&&(this.loaded=!0,this.emit("loaded"))}}class mn{constructor(e,t=0){n(this,"iterator",void 0),n(this,"peekBuffer",[]),n(this,"_lastIndex",void 0),this.iterator=e,this.iterator=e,this._lastIndex=t-1,this.peekBuffer=[]}next(){const e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const e=this.iterator.next();return this.peekBuffer.push(e),e}get lastIndex(){return this._lastIndex}}function*gn(e,t=0){let n=t;for(;n<e.length;){const t=e.codePointAt(n);if(void 0===t)throw new Error("Invalid Unicode code point");yield t,n+=t<=65535?1:2}}function yn(e,t,n,o,i,r,s,a,l,u,c,d,p,h,f,m,g,y,v){se(f,"Font face must be loaded"),se(f.loaded,"Font face must be loaded"),se(f.data,"Font face must be loaded"),se(f.shaper,"Font face must be loaded");const b=a/f.data.info.size,x=l/b,w=r/b,S=u/b,T=p[e],k=(null==T?void 0:T.codepointIndex)||0;let C=(null==T?void 0:T.maxX)||0,A=(null==T?void 0:T.maxY)||0,I=t,E=n,M=0;const R={codepointIndex:-1,bufferOffset:-1,xStart:-1},_=f.shaper,L={letterSpacing:S};o.endsWith(" ")&&(o+=" ");let P,D=_.shapeText(L,new mn(gn(o,k),k)),O=-1;const N=[],U=s/b,B=function(e,t,n){const o=n.shapeText(t,new mn(gn(e,0),0));let i=0;for(const r of o)r.mapped&&8203!==r.codepoint&&(i+=r.xAdvance);return i}(y,L,_);let F=!0;for(;F;){const t=(0===v||e+1<v)&&("both"!==d||g||E+x+f.maxCharHeight<=U),n=t?w:w-B;let i=0;const r=E+f.maxCharHeight>=h.y1,s=E<=h.y2,a=r&&s;for(;(P=D.next())&&!P.done;){const r=P.value;if(e===p.length)p.push({codepointIndex:r.cluster,maxY:A,maxX:C});else if(e>p.length)throw new Error("Unexpected lineCache length");if(32===r.codepoint||10===r.codepoint||8203===r.codepoint?-1!==R.codepointIndex&&(R.codepointIndex=-1,i=I):-1===R.codepointIndex&&(R.codepointIndex=r.cluster,R.bufferOffset=M,R.xStart=i),r.mapped){const e=I+r.xOffset+r.width;if("none"!==d&&e>=n&&-1!==R.codepointIndex&&R.xStart>0){if(t){D=_.shapeText(L,new mn(gn(o,R.codepointIndex),R.codepointIndex)),M=R.bufferOffset;break}D=_.shapeText(L,new mn(gn(y,0),0)),I=R.xStart,M=R.bufferOffset,d="none"}else{const e=I+r.xOffset,t=E+r.yOffset;if(a){-1===O&&(O=M);const n=f.getAtlasEntry(r.glyphId),o=n.x/f.data.common.scaleW,i=n.y/f.data.common.scaleH,s=n.width/f.data.common.scaleW,a=n.height/f.data.common.scaleH;c[M++]=e,c[M++]=t,c[M++]=o,c[M++]=i,c[M++]=e+r.width,c[M++]=t,c[M++]=o+s,c[M++]=i,c[M++]=e,c[M++]=t+r.height,c[M++]=o,c[M++]=i+a,c[M++]=e+r.width,c[M++]=t+r.height,c[M++]=o+s,c[M++]=i+a}A=Math.max(A,t+r.height),C=Math.max(C,e+r.width),I+=r.xAdvance}}else if(10===r.codepoint){if(t)break;D=_.shapeText(L,new mn(gn(y,0),0)),d="none"}}-1!==O&&(N.push({bufferStart:O,bufferEnd:M}),O=-1),I=0,E+=x,e++,R.codepointIndex=-1,i=0,!m&&"both"===d&&E>h.y2||P&&P.done?F=!1:t||(F=!1)}if("center"===i){const e="none"===d?C:w;for(let t=0;t<N.length;t++){const n=N[t],o=(e-(c[n.bufferEnd-4]-c[n.bufferStart]))/2;for(let e=n.bufferStart;e<n.bufferEnd;e+=4)c[e]+=o}}else if("right"===i){const e="none"===d?C:w;for(let t=0;t<N.length;t++){const n=N[t],o=e-(n.bufferEnd===n.bufferStart?0:c[n.bufferEnd-4]-c[n.bufferStart]);for(let e=n.bufferStart;e<n.bufferEnd;e+=4)c[e]+=o}}return se(P),{bufferNumFloats:M,bufferNumQuads:M/16,layoutNumCharacters:P.done?o.length-k:P.value.cluster-k+1,fullyProcessed:!!P.done,maxX:C,maxY:A,numLines:p.length}}function vn(e,t,n,o,i,r,s,a){const{screen:l,sdf:u}=e;if((p=s).x1<p.x2&&p.y1<p.y2){const p=s.x1-t,h=p+(s.x2-s.x1),f=s.y1-n+o,m=(c=f-r,d=i||1,Math.floor(c/d)*d),g=function(e,t){return Math.ceil(e/t)*t}(f+(s.y2-s.y1)+r,i||1);l.x1=p,l.y1=m,l.x2=h,l.y2=g,u.x1=p/a,u.y1=m/a,u.x2=h/a,u.y2=g/a,e.numLines=Math.ceil((g-m)/i),e.firstLineIdx=i?Math.floor(m/i):0}else l.x1=0,l.y1=0,l.x2=0,l.y2=0,u.x1=0,u.y1=0,u.x2=0,u.y2=0,e.numLines=0,e.firstLineIdx=0;var c,d,p;e.valid=!0}function bn(e,t){return t*(e.ascender-e.descender+e.lineGap)}const xn={x:0,y:0,width:0,height:0};class wn extends Vt{constructor(e){super(e),n(this,"ssdfFontFamilies",{}),n(this,"msdfFontFamilies",{}),n(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]),n(this,"sdfShader",void 0),n(this,"rendererBounds",void 0),n(this,"type","sdf"),this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Te(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,t)=>{e.props.y=t,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Te(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){const{fontFamily:t}=e;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}isFontFaceSupported(e){return e instanceof fn}addFontFace(e){se(e instanceof fn);const t=e.fontFamily,n="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(!n)return void console.warn(`Invalid font face type: ${e.type}`);let o=n[t];o||(o=new Set,n[t]=o),o.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new fe,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:t}=e;const{textH:n,lineCache:o,debugData:i,forceFullLayoutCalc:r}=e;if(i.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),void 0===t){if(t=this.resolveFontFace(e.props),e.trFontFace=t,void 0===t){const t=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;return console.error(t),void this.setStatus(e,"failed",new Error(t))}t.texture.setRenderableOwner(e,!0)}if(!1===t.loaded)return void t.once("loaded",()=>{this.scheduleUpdateState(e)});se(t.data,"Font face data should be loaded"),se(t.metrics,"Font face metrics should be loaded");const{text:s,fontSize:a,x:l,y:u,contain:c,width:d,height:p,verticalAlign:h,scrollable:f,overflowSuffix:m,maxLines:g}=e.props,y="both"===c&&f?e.props.scrollY:0,{renderWindow:v}=e,b=t.data.info.size,x=a/b;let w=e.resLineHeight;if(void 0===w){const n=e.props.lineHeight;w=void 0===n?bn(t.metrics,a):n,e.resLineHeight=w}const S=w/x;e.distanceRange=x*t.data.distanceField.distanceRange;const T=24*s.length;let k=e.vertexBuffer;(!k||k.length<T)&&(k=new Float32Array(2*T));const C=e.elementBounds;if(C.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),C.valid=!0),!r&&v.valid){const t=v.screen;if(l+t.x1<=C.x1&&l+t.x2>=C.x2&&u-y+t.y1<=C.y1&&u-y+t.y2>=C.y2)return void this.setStatus(e,"loaded");v.valid=!1,this.setStatus(e,"loading")}const{offsetY:A,textAlign:I}=e.props;if(!v.valid){if(!Te(C,this.rendererBounds))return;vn(v,l,u,y,w,"both"===c?C.y2-C.y1:0,C,x)}const E=function(e,t,n,o,i,r,s,a,l){const u=Math.min(Math.max(s.firstLineIdx,0),a.length),{metrics:c}=n;se(c,"Font metrics not loaded"),se(n.data,"Font data not loaded");const d=(c.ascender-c.descender)*e;let p=0;"middle"===o?p=(t-d)/2:"bottom"===o&&(p=t-d);const h=i/r,f=n.data.common.base,m=h+(c.ascender*e-f)+u*t+p;if(!(l&&m>=l/r))return{sdfX:0,sdfY:m,lineIndex:u}}(b,S,t,h,A,x,v,o,n);if(!E)return void this.setStatus(e,"loaded");const{letterSpacing:M}=e.props,R=yn(E.lineIndex,E.sdfX,E.sdfY,s,I,d,p,a,w,M,k,c,o,v.sdf,t,r,f,m,g);e.bufferUploaded=!1,e.bufferNumFloats=R.bufferNumFloats,e.bufferNumQuads=R.bufferNumQuads,e.vertexBuffer=k,e.renderWindow=v,i.lastLayoutNumCharacters=R.layoutNumCharacters,i.bufferSize=k.byteLength,R.fullyProcessed&&(e.textW=R.maxX*x,e.textH=R.numLines*S*x),this.setStatus(e,"loaded")}renderQuads(e,t,n,o,i,r){var s,a;if(!e.vertexBuffer)return;const l=this.stage.renderer;se(l instanceof cn);const{fontSize:u,color:c,contain:d,scrollable:p,zIndex:h,debug:f}=e.props,m="both"===d&&p?e.props.scrollY:0,{textW:g=0,textH:y=0,distanceRange:v,vertexBuffer:b,bufferUploaded:x,trFontFace:w,elementBounds:S}=e;let{webGlBuffers:T}=e;if(!T){const t=l.glw,n=4*Float32Array.BYTES_PER_ELEMENT,o=t.createBuffer();se(o),e.webGlBuffers=new an([{buffer:o,attributes:{a_position:{name:"a_position",size:2,type:t.FLOAT,normalized:!1,stride:n,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:t.FLOAT,normalized:!1,stride:n,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,se(e.webGlBuffers),T=e.webGlBuffers}if(!x){var k,C;const t=l.glw,n=null!==(k=null===(C=T)||void 0===C?void 0:C.getBuffer("a_textureCoordinate"))&&void 0!==k?k:null;t.arrayBufferData(n,b,t.STATIC_DRAW),e.bufferUploaded=!0}if(se(w),p&&"both"===d){se(S.valid);const t=(A=S,(I=xn)?(I.x=A.x1,I.y=A.y1,I.width=A.x2-A.x1,I.height=A.y2-A.y1,I):{x:A.x1,y:A.y1,width:A.x2-A.x1,height:A.y2-A.y1});n.valid?(e.clippingRect.valid=!0,n=ke(n,t,e.clippingRect)):(e.clippingRect.valid=!0,n=Ce(t,e.clippingRect))}var A,I;const E=new en(l.glw,l.options,T,this.sdfShader,{transform:t.getFloatArr(),color:le(c,o),size:u/((null===(s=w.data)||void 0===s?void 0:s.info.size)||0),scrollY:m,distanceRange:v,debug:f.sdfShaderDebug},o,n,{height:y,width:g},0,h,!1,i,r),M=null===(a=e.trFontFace)||void 0===a?void 0:a.texture;se(M);const R=M.ctxTexture;E.addTexture(R),E.length=e.bufferNumFloats,E.numQuads=e.bufferNumQuads,l.addRenderOp(E)}setIsRenderable(e,t){var n;super.setIsRenderable(e,t),null===(n=e.trFontFace)||void 0===n||n.texture.setRenderableOwner(e,t)}destroyState(e){var t;super.destroyState(e),null===(t=e.trFontFace)||void 0===t||t.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,e,"sdf")}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:t,contain:n,width:o}=e.props,{elementBounds:i}=e;i.x1=t,i.x2="none"!==n?t+o:1/0}setElementBoundsY(e){const{y:t,contain:n,height:o}=e.props,{elementBounds:i}=e;i.y1=t,i.y2="both"===n?t+o:1/0}}function Sn(e){return""===e||"​"===e}function Tn(e,t,n,o,i){return n*(o-1)+("bottom"!==e?.5*t:0)+Math.max(n,t)+(i||0)}class kn{constructor(e,t){n(this,"_canvas",void 0),n(this,"_context",void 0),n(this,"_settings",void 0),this._canvas=e,this._context=t,this._settings=this.mergeDefaults({})}set settings(e){this._settings=this.mergeDefaults(e)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const e=[this._settings.fontFamily],t=[];for(let n=0,o=e.length;n<o;n++)"serif"===e[n]||"sans-serif"===e[n]?t.push(e[n]):t.push(`"${e[n]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${t.join(",")}`}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch(e){console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const e={},t=this.getPrecision(),n=this._settings.paddingLeft*t,o=this._settings.paddingRight*t,i=this._settings.fontSize*t;let r=null===this._settings.offsetY?null:this._settings.offsetY*t;const s=this._settings.w*t,a=this._settings.h*t;let l=this._settings.wordWrapWidth*t;const u=this._settings.cutSx*t,c=this._settings.cutEx*t,d=this._settings.cutSy*t,p=this._settings.cutEy*t,h=(this._settings.letterSpacing||0)*t,f=this._settings.textIndent*t,m=this._settings.trFontFace;this.setFontProperties(),se(m);const g=function(e,t,n){if(t.metrics)return t.metrics;const o=e.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");let i;return console.warn(`Font metrics not provided for Canvas Web font ${t.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`),i=o.actualBoundingBoxDescent&&o.actualBoundingBoxAscent?{ascender:o.actualBoundingBoxAscent/n,descender:-o.actualBoundingBoxDescent/n,lineGap:.2}:{ascender:.8,descender:-.2,lineGap:.2},t.metrics=i,i}(this._context,m,i),y=bn(g,i)*t,v=null!==this._settings.lineHeight?this._settings.lineHeight*t:y,b=this._settings.maxHeight,x=null!==b&&v>0?Math.floor(b/v):0,w=this._settings.maxLines,S=x>0&&w>0?Math.min(x,w):Math.max(x,w);let T,k=s||2048/this.getPrecision(),C=k-n;if(C<10&&(k+=10-C,C=10),l||(l=C),this._settings.textOverflow&&!this._settings.wordWrap){let e;switch(this._settings.textOverflow){case"clip":e="";break;case"ellipsis":e=this._settings.overflowSuffix;break;default:e=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,l-f,e)}if(this._settings.wordWrap)T=this.wrapText(this._settings.text,l,h,f);else{T={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const e=T.l.length;for(let t=0;t<e-1;t++)T.n.push(t)}let A=T.l;if(S&&A.length>S){const t=A.slice(0,S);let n,o=null;if(this._settings.overflowSuffix){const e=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,n=this.wrapText(t[t.length-1],l-e,h,f);t[t.length-1]=`${n.l[0]}${this._settings.overflowSuffix}`,o=[n.l.length>1?n.l[1]:""]}else o=[""];const i=A.length;let r=0;const s=T.n.length;for(n=S;n<i;n++)o[r]+=`${o[r]?" ":""}${A[n]}`,n+1<s&&T.n[n+1]&&r++;e.remainingText=o.join("\n"),e.moreTextLines=!0,A=t}else e.moreTextLines=!1,e.remainingText="";let I=0;const E=[];for(let R=0;R<A.length;R++){const e=this.measureText(A[R],h)+(0===R?f:0);E.push(e),I=Math.max(I,e)}let M;return e.lineWidths=E,s||(k=I+n+o,C=I),this._settings.wordWrap&&s>I&&"left"===this._settings.textAlign&&1===A.length&&(k=I+n+o),M=a||Tn(this._settings.textBaseline,i,v,A.length,r),null===r&&(r=i),e.w=k,e.h=M,e.lines=A,e.precision=t,k||(k=1),M||(M=1),(u||c)&&(k=Math.min(k,c-u)),(d||p)&&(M=Math.min(M,p-d)),e.width=k,e.innerWidth=C,e.height=M,e.fontSize=i,e.cutSx=u,e.cutSy=d,e.cutEx=c,e.cutEy=p,e.lineHeight=v,e.defLineHeight=y,e.lineWidths=E,e.offsetY=r,e.paddingLeft=n,e.paddingRight=o,e.letterSpacing=h,e.textIndent=f,e.metrics=g,e}draw(e,t){const n=this.getPrecision(),o=(null==t?void 0:t.lines)||e.lines,i=(null==t?void 0:t.lineWidths)||e.lineWidths,r=t?Tn(this._settings.textBaseline,e.fontSize,e.lineHeight,t.lines.length,null===this._settings.offsetY?null:this._settings.offsetY*n):e.height;let s,a;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(r),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);const l=[],{metrics:u}=e,c=u?u.ascender*e.fontSize:e.fontSize,d=(u.ascender-u.descender)*e.fontSize;for(let h=0,f=o.length;h<f;h++)s=0===h?e.textIndent:0,a=h*e.lineHeight+c,"middle"==this._settings.verticalAlign?a+=(e.lineHeight-d)/2:"bottom"==this._settings.verticalAlign&&(a+=e.lineHeight-d),"right"===this._settings.textAlign?s+=e.innerWidth-i[h]:"center"===this._settings.textAlign&&(s+=(e.innerWidth-i[h])/2),s+=e.paddingLeft,l.push({text:o[h],x:s,y:a,w:i[h]});if(this._settings.highlight){const t=this._settings.highlightColor,o=this._settings.highlightHeight*n||1.5*e.fontSize,i=this._settings.highlightOffset*n,r=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*n:e.paddingLeft,s=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*n:e.paddingRight;this._context.fillStyle=we(t);for(let n=0;n<l.length;n++){const t=l[n];this._context.fillRect(t.x-r,t.y-e.offsetY+i,t.w+s+r,o)}}let p=null;this._settings.shadow&&(p=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=we(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*n,this._context.shadowOffsetY=this._settings.shadowOffsetY*n,this._context.shadowBlur=this._settings.shadowBlur*n),this._context.fillStyle=we(this._settings.textColor);for(let h=0,f=l.length;h<f;h++){const t=l[h];if(0===e.letterSpacing)this._context.fillText(t.text,t.x,t.y);else{const n=t.text.split("");let o=t.x;for(let i=0,r=n.length;i<r;i++)this._context.fillText(n[i],o,t.y),o+=this.measureText(n[i],e.letterSpacing)}}p&&(this._context.shadowColor=p[0],this._context.shadowOffsetX=p[1],this._context.shadowOffsetY=p[2],this._context.shadowBlur=p[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy)}wrapWord(e,t,n){const o=this._context.measureText(n).width,i=e.length,r=this._context.measureText(e).width;if(r<=t)return e;let s=Math.floor(t*i/r),a=this._context.measureText(e.substring(0,s)).width+o;if(a>t)for(;s>0&&(a=this._context.measureText(e.substring(0,s)).width+o,a>t);)s-=1;else for(;s<i;){if(a=this._context.measureText(e.substring(0,s)).width+o,!(a<t)){s-=1;break}s+=1}return e.substring(0,s)+(t>=o?n:"")}wrapText(e,t,n,o=0){const i=/ |\u200B/g,r=e.split(/\r?\n/g);let s=[];const a=[];for(let l=0;l<r.length;l++){const e=[];let u="",c=t-o;const d=r[l].split(i),p=r[l].match(i)||[];for(let i=0;i<d.length;i++){const r=p[i-1]||"",s=d[i],a=this.measureText(s,n),l=Sn(r)?a:a+this.measureText(r,n);0===i||l>c?(i>0&&(e.push(u),u=""),u+=s,c=t-a-(0===i?o:0)):(c-=l,u+=r+s)}e.push(u),u="",s=s.concat(e),l<r.length-1&&a.push(s.length)}return{l:s,n:a}}measureText(e,t=0){return t?e.split("").reduce((e,n)=>Sn(n)?e:e+this._context.measureText(n).width+t,0):this._context.measureText(e).width}mergeDefaults(e){return t({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},e)}}const Cn="undefined"==typeof self?globalThis:self,An=(null===(s=Cn.document)||void 0===s?void 0:s.fonts)||Cn.fonts;class In extends Vt{constructor(e){super(e),n(this,"canvas",void 0),n(this,"context",void 0),n(this,"fontFamilies",{}),n(this,"fontFamilyArray",[this.fontFamilies]),n(this,"type","canvas"),n(this,"loadFont",e=>{const t=function(e){const{fontFamily:t,fontStyle:n,fontWeight:o,fontStretch:i,fontSize:r}=e;return[n,o,i,`${r}px`,t].join(" ")}(e.props),n=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,e.props,"canvas");se(n,`Could not resolve font face for ${t}`),e.fontInfo={fontFace:n,cssString:t,loaded:!1},e.fontInfo.loaded||An.load(t).then(this.onFontLoaded.bind(this,e,t)).catch(this.onFontLoadError.bind(this,e,t))}),"undefined"!=typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let t=this.canvas.getContext("2d",{willReadFrequently:!0});t||(this.canvas=document.createElement("canvas"),t=this.canvas.getContext("2d",{willReadFrequently:!0})),se(t),this.context=t,this.addFontFace(new Qt({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t,this.invalidateLayoutCache(e)},x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Qt}addFontFace(e){se(e instanceof Qt);const t=e.fontFamily;"sans-serif"!==t&&An.add(e.fontFace);let n=this.fontFamilies[t];n||(n=new Set,this.fontFamilies[t]=n),n.add(e)}createState(e,t){return{node:t,props:e,status:"initialState",updateScheduled:!1,emitter:new fe,textureNode:void 0,lightning2TextRenderer:new kn(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if("initialState"===e.status&&this.setStatus(e,"loading"),"loaded"!==e.status)return e.fontInfo?void(e.fontInfo.loaded&&(e.renderInfo||(e.renderInfo=this.calculateRenderInfo(e),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,this.renderSingleCanvasPage(e)))):this.loadFont(e)}renderSingleCanvasPage(e){se(e.renderInfo);const t=e.node,n=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:function(e,t){return se(t),e.draw(t,{lines:t.lines,lineWidths:t.lineWidths}),0===this.canvas.width||0===this.canvas.height?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}.bind(this,e.lightning2TextRenderer,e.renderInfo)});if(e.textureNode)e.textureNode.texture=n,e.textureNode.alpha=xe(e.props.color);else{const o=this.stage.createNode({parent:t,texture:n,autosize:!0,alpha:xe(e.props.color)});e.textureNode=o}this.setStatus(e,"loaded")}calculateRenderInfo(e){var t,n;return e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:null===(t=e.fontInfo)||void 0===t?void 0:t.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:ve(e.props.color),offsetY:e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:null!==(n=e.props.lineHeight)&&void 0!==n?n:null,maxLines:e.props.maxLines,maxHeight:"both"===e.props.contain?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:"none"!==e.props.contain?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.renderInfo}renderQuads(){}destroyState(e){"destroyed"!==e.status&&(super.destroyState(e),e.textureNode&&(e.textureNode.destroy(),delete e.textureNode),delete e.renderInfo)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,t){var n;t===(null===(n=e.fontInfo)||void 0===n?void 0:n.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,t,n){var o;t===(null===(o=e.fontInfo)||void 0===o?void 0:o.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,n),this.scheduleUpdateState(e))}}const En={isWhite:!0,a:1,r:255,g:255,b:255};function Mn(e){if(4294967295===e)return En;return{isWhite:!1,a:(e>>>24&255)/255,r:255&e,g:255&e>>>8,b:255&e>>>16}}function Rn(e){if(4294967295===e)return En;return{isWhite:!1,r:e>>>24&255,g:255&e>>>16,b:255&e>>>8,a:(255&e)/255}}function _n({a:e,r:t,g:n,b:o}){return`rgba(${t},${n},${o},${e})`}class Ln extends qt{constructor(...e){super(...e),n(this,"image",void 0),n(this,"tintCache",void 0)}async load(){this.textureSource.setState("loading");try{const e=await this.onLoadRequest();this.textureSource.setState("loaded",e),this.textureSource.freeTextureData(),this.updateMemSize()}catch(e){throw this.textureSource.setState("failed",e),this.textureSource.freeTextureData(),e}}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}updateMemSize(){const e=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:t,height:n}=this.textureSource.dimensions;this.setTextureMemUse(t*n*e)}}hasImage(){return void 0!==this.image}getImage(e){var t;const n=this.image;if(se(n,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),n;const o=_n(e);if((null===(t=this.tintCache)||void 0===t?void 0:t.key)===o)return this.tintCache.image;const i=this.tintTexture(n,o);return this.tintCache={key:o,image:i},this.updateMemSize(),i}tintTexture(e,t){const{width:n,height:o}=e,i=document.createElement("canvas");i.width=n,i.height=o;const r=i.getContext("2d");return r&&(r.fillStyle=t,r.globalCompositeOperation="copy",r.fillRect(0,0,n,o),r.globalCompositeOperation="multiply",r.drawImage(e,0,0,n,o,0,0,n,o),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0,n,o,0,0,n,o)),i}async onLoadRequest(){var e;se(null===(e=this.textureSource)||void 0===e||null===(e=e.textureData)||void 0===e?void 0:e.data,"Texture data is null");const{data:t}=this.textureSource.textureData;if(t instanceof ImageData){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");return n&&n.putImageData(t,0,0),this.image=e,{width:t.width,height:t.height}}return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||t instanceof HTMLImageElement?(this.image=t,{width:t.width,height:t.height}):{width:0,height:0}}}function Pn(e,t=""){if(e.shader instanceof Bt){if("DynamicShader"===e.shader.shType){var n;const o=null===(n=e.shaderProps)||void 0===n?void 0:n.effects;if(o&&o.length){const e=o.find(e=>e.type===`border${t}`&&e.props&&e.props.width);return e&&e.props}}}}function Dn(e,n,o,i,r){if(Object.getPrototypeOf(this).roundRect)this.roundRect(e,n,o,i,r);else{const s=e=>{const t=Math.min(o/2,i/2),n=e.topLeft+e.topRight+e.bottomRight+e.bottomLeft;if(n>o||n>i){const n=t/Math.max(e.topLeft,e.topRight,e.bottomRight,e.bottomLeft);e.topLeft*=n,e.topRight*=n,e.bottomRight*=n,e.bottomLeft*=n}},a="number"==typeof r?{topLeft:r,topRight:r,bottomRight:r,bottomLeft:r}:t({topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},r);s(a),this.moveTo(e+a.topLeft,n),this.lineTo(e+o-a.topRight,n),this.ellipse(e+o-a.topRight,n+a.topRight,a.topRight,a.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(e+o,n+i-a.bottomRight),this.ellipse(e+o-a.bottomRight,n+i-a.bottomRight,a.bottomRight,a.bottomRight,0,0,.5*Math.PI),this.lineTo(e+a.bottomLeft,n+i),this.ellipse(e+a.bottomLeft,n+i-a.bottomLeft,a.bottomLeft,a.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(e,n+a.topLeft),this.ellipse(e+a.topLeft,n+a.topLeft,a.topLeft,a.topLeft,0,Math.PI,1.5*Math.PI)}}function On(e,t,n,o,i,r=0,s,a){if(!r)return;let l,u,c=0,d=0;switch(a){case"Top":l=t,c=n,u=o+t,d=n;break;case"Right":l=t+o,c=n,u=t+o,d=n+i;break;case"Bottom":l=t,c=n+i,u=t+o,d=n+i;break;case"Left":l=t,c=n,u=t,d=n+i}e.beginPath(),e.lineWidth=r,e.strokeStyle=_n(Rn(null!=s?s:0)),e.moveTo(l,c),e.lineTo(u,d),e.stroke()}class Nn extends Wt{constructor(e){super(e),n(this,"context",void 0),n(this,"canvas",void 0),n(this,"pixelRatio",void 0),n(this,"clearColor",void 0),n(this,"renderToTextureActive",!1),n(this,"activeRttNode",null),n(this,"defShaderCtr",void 0),this.mode="canvas",this.shManager.renderer=this;const{canvas:t,pixelRatio:o,clearColor:i}=e;this.canvas=t,this.context=t.getContext("2d"),this.pixelRatio=o,this.clearColor=i?be(i):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new Bt("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const e=this.context;if(this.clearColor){const[t,n,o,i]=this.clearColor;e.fillStyle=`rgba(${t}, ${n}, ${o}, ${i/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){var t;const n=this.context,{tx:o,ty:i,width:r,height:s,alpha:a,colorTl:l,colorTr:u,colorBr:c,ta:d,tb:p,tc:h,td:f,clippingRect:m}=e;let g,y,v=e.texture;const b=null===(t=v)||void 0===t?void 0:t.type;if(se(b,"Texture type is not defined"),b!==me.image&&b!==me.color&&b!==me.subTexture&&b!==me.noise)return;if(v){if(v instanceof ot&&(y=v.props,v=v.parentTexture),g=v.ctxTexture,"freed"===v.state)return;if("loaded"!==v.state)return}const x=Mn(l),w=1!==d,S=0!==m.width&&0!==m.height,T=l!==u||l!==c,k=Boolean(e.shader),C=k?function(e){if(e.shader instanceof Bt){const i=e.shader.shType;var t,n;if("RoundedRectangle"===i)return null!==(t=null===(n=e.shaderProps)||void 0===n?void 0:n.radius)&&void 0!==t?t:0;if("DynamicShader"===i){var o;const t=null===(o=e.shaderProps)||void 0===o?void 0:o.effects;if(t){const e=t.find(e=>{var t;return"radius"===e.type&&(null==e||null===(t=e.props)||void 0===t?void 0:t.radius)});return e&&"radius"===e.type&&e.props.radius||0}}}return 0}(e):0,A=k?Pn(e):void 0;if((w||S||C)&&n.save(),S){const e=new Path2D,{x:t,y:o,width:i,height:r}=m;e.rect(t,o,i,r),n.clip(e)}if(w){const e=this.pixelRatio;n.setTransform(d,h,p,f,o*e,i*e),n.scale(e,e),n.translate(-o,-i)}if(C){const e=new Path2D;Dn.call(e,o,i,r,s,C),n.clip(e)}if(b!==me.image&&b!==me.subTexture&&b!==me.noise||!g)if(b===me.color&&T){let e,t=o,a=i;l===u?(t=o,a=i+s,e=Mn(c)):(t=o+r,a=i,e=Mn(u));const d=n.createLinearGradient(o,i,t,a);d.addColorStop(0,_n(x)),d.addColorStop(1,_n(e)),n.fillStyle=d,n.fillRect(o,i,r,s)}else b===me.color&&(n.fillStyle=_n(x),n.fillRect(o,i,r,s));else{var I;const e=g.getImage(x);if(n.globalAlpha=null!==(I=x.a)&&void 0!==I?I:a,y)n.drawImage(e,y.x,y.y,y.width,y.height,o,i,r,s);else try{n.drawImage(e,o,i,r,s)}catch(M){}n.globalAlpha=1}if(A&&A.width){var E;const e=A.width,t=A.width/2,l=_n(Rn(null!==(E=A.color)&&void 0!==E?E:0));n.beginPath(),n.lineWidth=e,n.strokeStyle=l,n.globalAlpha=a,C?(Dn.call(n,o+t,i+t,r-e,s-e,C),n.stroke()):n.strokeRect(o+t,i+t,r-e,s-e),n.globalAlpha=1}else if(k){const t=Pn(e,"Top"),a=Pn(e,"Right"),l=Pn(e,"Bottom"),u=Pn(e,"Left");t&&On(n,o,i,r,s,t.width,t.color,"Top"),a&&On(n,o,i,r,s,a.width,a.color,"Right"),l&&On(n,o,i,r,s,l.width,l.color,"Bottom"),u&&On(n,o,i,r,s,u.width,u.color,"Left")}(w||S||C)&&n.restore()}createCtxTexture(e){return new Ln(this.txMemManager,e)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}getBufferInfo(){return null}getQuadCount(){return null}updateClearColor(e){this.clearColor=e?be(e):void 0}}const Un={alpha:e=>1===e?null:{prop:"opacity",value:`${e}`},x:e=>({prop:"left",value:`${e}px`}),y:e=>({prop:"top",value:`${e}px`}),width:e=>0===e?null:{prop:"width",value:`${e}px`},height:e=>0===e?null:{prop:"height",value:`${e}px`},fontSize:e=>0===e?null:{prop:"font-size",value:`${e}px`},lineHeight:e=>0===e?null:{prop:"line-height",value:`${e}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:e=>!1===e?null:{prop:"overflow",value:e?"hidden":"visible"},rotation:e=>0===e?null:{prop:"transform",value:`rotate(${e}rad)`},scale:e=>1===e?null:{prop:"transform",value:`scale(${e})`},scaleX:e=>1===e?null:{prop:"transform",value:`scaleX(${e})`},scaleY:e=>1===e?null:{prop:"transform",value:`scaleY(${e})`},color:e=>0===e?null:{prop:"color",value:Bn(e)}},Bn=e=>`rgba(${e>>24&255},${e>>16&255},${e>>8&255},${(255&e)/255})`,Fn={id:"test-id"},jn=new Set([...Object.keys(Un),...Object.keys(Fn),"src","parent","data"]);class zn{constructor(e,t){var o,i,r,s,a,l;if(n(this,"root",null),n(this,"canvas",null),n(this,"height",1080),n(this,"width",1920),n(this,"scaleX",1),n(this,"scaleY",1),pe())return;if(!t)throw new Error("settings is required");this.height=Math.ceil(null!==(o=t.appHeight)&&void 0!==o?o:1080/(null!==(i=t.deviceLogicalPixelRatio)&&void 0!==i?i:1)),this.width=Math.ceil(null!==(r=t.appWidth)&&void 0!==r?r:1920/(null!==(s=t.deviceLogicalPixelRatio)&&void 0!==s?s:1)),this.scaleX=null!==(a=t.deviceLogicalPixelRatio)&&void 0!==a?a:1,this.scaleY=null!==(l=t.deviceLogicalPixelRatio)&&void 0!==l?l:1,this.canvas=e,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root);new MutationObserver(this.setRootPosition.bind(this)).observe(e,{attributes:!0,childList:!1,subtree:!1});new ResizeObserver(this.setRootPosition.bind(this)).observe(e),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(null===this.root||null===this.canvas)return;const e=this.canvas.getBoundingClientRect(),t=document.documentElement.scrollTop+e.top,n=document.documentElement.scrollLeft+e.left;this.root.id="root",this.root.style.left=`${n}px`,this.root.style.top=`${t}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(e,t){const n=document.createElement("div");n.style.position="absolute",n.id=e.toString();for(const o in t)this.updateNodeProperty(n,o,t[o],t);return n}createNode(e){const t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,e.on("inViewport",()=>t.setAttribute("state","inViewport")),e.on("inBounds",()=>t.setAttribute("state","inBounds")),e.on("outOfBounds",()=>t.setAttribute("state","outOfBounds")),this.createProxy(e,t)}createTextNode(e){const t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,this.createProxy(e,t)}createProxy(e,t){jn.forEach(n=>{let o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){const t=Object.getPrototypeOf(e);o=Object.getOwnPropertyDescriptor(t,n)}void 0!==o&&Object.defineProperty(e,n,{get(){var t;return null===(t=o)||void 0===t||null===(t=t.get)||void 0===t?void 0:t.call(e)},set:i=>{var r;null===(r=o)||void 0===r||null===(r=r.set)||void 0===r||r.call(e,i),this.updateNodeProperty(t,n,i,e.props)},configurable:!0,enumerable:!0})});const n=e.destroy;Object.defineProperty(e,"destroy",{value:()=>{this.destroyNode(e.id),n.call(e)}});const o=e.animate;return Object.defineProperty(e,"animate",{value:(n,i)=>{const r=o.call(e,n,i),s=r.start.bind(r);return r.start=()=>(this.animateNode(t,n,i),s()),r}}),e}destroyNode(e){const t=document.getElementById(e.toString());null==t||t.remove()}updateNodeProperty(e,t,n,o){if(null!==this.root&&null!=n){if("parent"===t){const t=n.id;if(1===t)return void this.root.appendChild(e);const o=document.getElementById(t.toString());return void(null==o||o.appendChild(e))}if("text"===t)return e.innerHTML=String(n),void(e.style.visibility="hidden");if("src"===t&&n)e.setAttribute("data-src",String(n));else if("rtt"===t&&n)e.setAttribute("data-rtt",String(n));else{if(Un[t]){var i;const r=null===(i=Un[t])||void 0===i?void 0:i.call(Un,n);if(null===r)return;if("string"==typeof r)return void e.style.setProperty(r,String(n));if("object"==typeof r){let n=r.value;if("x"===t){const e=o.mountX,t=o.width;e&&(n=parseInt(n)-t*e+"px")}else if("y"===t){const e=o.mountY,t=o.height;e&&(n=parseInt(n)-t*e+"px")}e.style.setProperty(r.prop,n)}return}if(Fn[t]){const o=Fn[t];if(!o)return;return void e.setAttribute(String(o),String(n))}if("data"!==t);else for(const t in n){const o=n[t];void 0===o?e.removeAttribute(`data-${t}`):e.setAttribute(`data-${t}`,String(o))}}}}animateNode(e,t,n){const{duration:o=1e3,delay:i=0}=n,{x:r,y:s,width:a,height:l,alpha:u=1,rotation:c=0,scale:d=1,color:p,mountX:h,mountY:f}=t;setTimeout(function(){setTimeout(()=>{e.style.top=s-l*f+"px",e.style.left=r-a*h+"px",e.style.width=`${a}px`,e.style.height=`${l}px`,e.style.opacity=`${u}`,e.style.rotate=`${c}rad`,e.style.scale=`${d}`,e.style.color=Bn(p)},o)},i)}}const $n={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},Vn={low:.66666667,medium:.85,high:1,retina:2};let Hn={};const Gn=e=>{const t="renderMode"in e?e.renderMode:"webgl";return"webgl"===t?cn:"canvas"===t?Nn:void 0},qn=e=>{const t="renderMode"in e?e.renderMode:"webgl";return"webgl"===t?[wn,In]:"canvas"===t?[In]:void 0},Wn=e=>{const n=t(t({},{max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1}),"gpuMemory"in e==!0?e.gpuMemory:{});return{criticalThreshold:1024*n.max*1024,targetThresholdLevel:n.target,cleanupInterval:n.cleanupInterval,baselineMemoryAllocation:1024*n.baseline*1024,doNotExceedCriticalThreshold:n.strict}},Kn=function(e){const t="vertical"===e.direction?"y":"x",n="vertical"===e.direction?"x":"y",o="vertical"===e.direction?"mountX":"mountY",i="vertical"===e.direction?"height":"width",r="vertical"===e.direction?"width":"height",s=((e,t)=>{if(void 0===e)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if("number"==typeof e)return{start:e,end:e,oppositeStart:e,oppositeEnd:e};if(!0===Yn(e)&&(e=Jn(e)),"object"==typeof e){const{top:n,right:o,bottom:i,left:r,x:s=0,y:a=0}=e;return"vertical"===t?{start:void 0!==n?n:a,end:void 0!==i?i:a,oppositeStart:void 0!==r?r:s,oppositeEnd:void 0!==o?o:s}:{start:void 0!==r?r:s,end:void 0!==o?o:s,oppositeStart:void 0!==n?n:a,oppositeEnd:void 0!==i?i:a}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}})(e.padding,e.direction);let a=s.start;const l=this.node.children,u=l.length,c=this.children;let d=0;const p=e.gap||0;for(let f=0;f<u;f++){if(void 0!==c[f]&&!1===c[f].props.raw.show)continue;const e=l[f];e[t]=a,e[n]=s.oppositeStart,a+="width"===i?e.width+(e.width!==("text"in e?1:0)?p:0):"text"in e?e.width>1?e.height+p:0:0!==e.height?e.height+p:0,d=Math.max(d,e[r]+s.oppositeStart+s.oppositeEnd)}this.node[i]=a-p+s.end,this.node[r]=d;const h={start:0,end:1,center:.5}[e["align-items"]||"start"];if(0!==h)for(let f=0;f<u;f++){const e=l[f];e[n]=d*h,e[o]=h}void 0!==e["@updated"]&&e["@updated"]({w:this.node.width,h:this.node.height},this),this.config.parent&&!0===this.config.parent.props.__layout&&this.config.parent.triggerLayout(this.config.parent.props)},Xn=e=>null!==e&&"object"==typeof e&&"transition"in e==!0,Yn=e=>"string"==typeof e&&e.startsWith("{")&&e.endsWith("}"),Jn=e=>JSON.parse(e.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),Qn=function(e,t){return"string"!=typeof e?e:e.indexOf("%")===e.length-1?this.element.config.parent&&(this.element.config.parent.node[t]||0)*(parseFloat(e)/100)||0:e},Zn=e=>{if("object"!=typeof e||null===e)return e;if(e.constructor===Object){if("value"in e==!0)return e.value;if("transition"in e==!0)return Zn(e.transition)}return e},eo={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let to=null;const no={set parent(e){this.props.parent="root"===e?Hn.root:e.node},set rotation(e){this.props.rotation=e*(Math.PI/180)},set w(e){this.props.width=Qn.call(this,e,"width")},set width(e){this.props.width=Qn.call(this,e,"width")},set h(e){this.props.height=Qn.call(this,e,"height")},set height(e){this.props.height=Qn.call(this,e,"height")},set x(e){this.props.x=Qn.call(this,e,"width")},set y(e){this.props.y=Qn.call(this,e,"height")},set z(e){this.props.zIndex=e},set zIndex(e){this.props.zIndex=e},set color(e){"string"==typeof e&&!1===e.startsWith("{")?this.props.color=x(e):("object"==typeof e||!0===Yn(e)&&(e=Jn(e)))&&(this.props.color=0,Object.entries(e).forEach(e=>{this.props[eo[e[0]]]=x(e[1])}))},set src(e){this.props.src=e,void 0===this.raw.color&&(this.props.color=this.props.src?4294967295:0),"w"in this.raw||"w"in this.raw||"h"in this.raw||"height"in this.raw||(this.props.autosize=!0)},set texture(e){this.props.texture=e,void 0===this.raw.color&&null==e?this.props.color=0:void 0===this.raw.color&&(this.props.color=4294967295)},set fit(e){const t={};"cover"!==e&&"contain"!==e?("object"==typeof e||!0===Yn(e)&&(e=Jn(e)))&&(t.type=e.type||"cover","number"==typeof e.position&&(t.clipY=t.clipX=e.position),"object"==typeof e.position&&(t.clipX="x"in e.position==!0?e.position.x:null,t.clipY="y"in e.position==!0?e.position.y:null),this.props.textureOptions={resizeMode:t}):this.props.textureOptions={resizeMode:{type:e}}},set rtt(e){this.props.rtt=e,void 0===this.raw.color&&(this.props.color=!0===e?4294967295:0)},set mount(e){"object"==typeof e||!0===Yn(e)&&(e=Jn(e))?("x"in e==!0&&(this.props.mountX=e.x),"y"in e==!0&&(this.props.mountY=e.y)):(this.props.mountX=e,this.props.mountY=e)},set pivot(e){"object"==typeof e||!0===Yn(e)&&(e=Jn(e))?("x"in e==!0&&(this.props.pivotX=e.x),"y"in e==!0&&(this.props.pivotY=e.y)):(this.props.pivotX=e,this.props.pivotY=e)},set scale(e){"object"==typeof e||!0===Yn(e)&&(e=Jn(e))?("x"in e==!0&&(this.props.scaleX=e.x),"y"in e==!0&&(this.props.scaleY=e.y)):this.props.scale=e},set show(e){this.props.alpha=e?void 0!==this.raw.alpha?this.raw.alpha:1:0},set alpha(e){void 0!==this.raw.show&&1!=this.raw.show||(this.props.alpha=e)},set shader(e){this.props.shader=null!==e?Hn.createShader(e.type,e.props):Hn.createShader("DefaultShader")},set effects(e){for(let t=0;t<e.length;t++)e[t].props&&e[t].props.color&&(e[t].props.color=x(e[t].props.color));void 0===this.element.node&&(this.props.shader=Hn.createShader("DynamicShader",{effects:e.map(e=>Hn.createEffect(e.type,e.props))}))},set clipping(e){this.props.clipping=e},set overflow(e){this.props.clipping=!e},set font(e){this.props.fontFamily=e},set size(e){this.props.fontSize=e},set wordwrap(e){h.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=e,this.props.contain="width"},set maxwidth(e){this.props.width=e,this.props.contain="width"},set maxheight(e){this.props.height=e,this.props.contain="both"},set contain(e){this.props.contain=e},set maxlines(e){this.props.maxLines=e},set textoverflow(e){this.props.overflowSuffix=!1===e?" ":!0===e?void 0:e},set letterspacing(e){this.props.letterSpacing=e||1},set lineheight(e){this.props.lineHeight=e},set align(e){this.props.textAlign=e},set content(e){this.props.text=""+e},set placement(e){let t,n;"object"==typeof e||!0===Yn(e)&&(e=Jn(e))?("x"in e==!0&&(t=e.x),"y"in e==!0&&(n=e.y)):"center"===e||"right"===e?t=e:n=e,"center"===t?(this.x="50%",this.props.mountX=.5):"right"===t&&(this.x="100%",this.props.mountX=1),"middle"===n?(this.y="50%",this.props.mountY=.5):"bottom"===n&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(e){("object"==typeof e||!0===Yn(e)&&(e=Jn(e)))&&(this.props.data=e)}},oo={populate(e){const n=e;n.node=this.config.node,!0===n[a.isSlot]&&(this[a.isSlot]=!0),this.props.element=this,this.props.parent=n.parent||this.config.parent,delete n.parent,this.props.raw=e;const o=Object.keys(n),i=o.length;for(let t=0;t<i;t++){const e=o[t],i=n[e];void 0!==i&&(this.props[e]=Zn(i))}void 0===this.props.props.color&&"__textnode"in n==!1&&(this.props.props.color=0),this.node=n.__textnode?Hn.createTextNode(t(t({},to),this.props.props)):Hn.createNode(this.props.props),void 0!==n["@loaded"]&&"function"==typeof n["@loaded"]&&this.node.on("loaded",(e,{type:t,dimensions:o})=>{n["@loaded"]({w:o.width,h:o.height,type:t},this)}),void 0!==n["@error"]&&"function"==typeof n["@error"]&&this.node.on("failed",(e,t)=>{n["@error"](t,this)}),!0===n.__layout&&(this.triggerLayout=Kn.bind(this)),void 0!==this.config.parent.props&&!0===this.config.parent.props.__layout&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(e,t){if(void 0===t)return;if(this.props.raw[e]===t)return;this.props.raw[e]=t,this.props.props={},this.props[e]=Zn(t);const n=Object.keys(this.props.props);if(1===n.length){if(!0===Xn(t))return this.animate(n[0],this.props.props[n[0]],t.transition);this.node[n[0]]=this.props.props[n[0]]}else for(let o=0;o<n.length;o++){if(!0===Xn(t))return this.animate(n[o],this.props.props[n[o]],t.transition);this.node[n[o]]=this.props.props[n[o]]}this.config.parent.props&&!0===this.config.parent.props.__layout&&this.config.parent.triggerLayout(this.config.parent.props)},animate(e,t,n){if(void 0!==this.scheduledTransitions[e]&&"scheduled"===this.scheduledTransitions[e].f.state&&this.scheduledTransitions[e].f.stop(),this.node[e]===t)return;const o={};o[e]=t;const i=this.node.animate(o,{duration:"object"==typeof n&&"duration"in n?n.duration:300,easing:"object"==typeof n&&"easing"in n?n.easing:"ease",delay:"object"==typeof n&&"delay"in n?n.delay:0}),r=this.node[e];if(this.scheduledTransitions[e]={v:o[e],f:i},void 0!==n.start&&"function"==typeof n.start&&i.once("animating",()=>{n.start.call(this.component,this,e,r)}),this.config.parent.props&&!0===this.config.parent.props.__layout&&i.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),void 0!==n.progress&&"function"==typeof n.progress){let t=0;i.on("tick",(o,{progress:i})=>{n.progress.call(this.component,this,e,i,t),t=i})}i.once("stopped",()=>{void 0!==this.scheduledTransitions[e]&&!0===this.scheduledTransitions[e].canceled||(void 0!==this.node&&n.end&&"function"==typeof n.end&&n.end.call(this.component,this,e,this.node[e]),delete this.scheduledTransitions[e])}),i.start()},destroy(){if(null===this.node)return;h.debug("Deleting Node",this.nodeId);const e=Object.keys(this.scheduledTransitions);for(let t=0;t<e.length;t++){const n=this.scheduledTransitions[e[t]];void 0!==n&&(n.canceled=!0,void 0!==n.f&&n.f.stop())}this.scheduledTransitions={},this.component=null,delete this.component,this.config=null,delete this.config,this.props.raw={},this.props.element=null,this.props.props=null,this.props={},delete this.props,this.triggerLayout=null,delete this.triggerLayout,this.forComponent=null,delete this.forComponent,this.node.destroy(),this.node=null},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){const e=this.component[a.getChildren](),t=[],n=e.length;for(let o=0;o<n;o++){const n=e[o];void 0!==n&&n.parent===(this[a.isSlot]?this.node.children[0]:this.node)&&t.push(n)}return t}},io=(e,t)=>(null===to&&(to={fontSize:32,fontFamily:l.get("defaultFont","sans-serif")}),Object.assign(Object.create(oo),{props:Object.assign(Object.create(no),{props:{}}),scheduledTransitions:{},config:e,component:t})),ro=(e,n,o={})=>{Hn=new Yt(t(t({},{appWidth:o.w||1920,appHeight:o.h||1080,fpsUpdateInterval:o.fpsInterval||1e3,devicePhysicalPixelRatio:Vn[o.renderQuality]||o.renderQuality||1,deviceLogicalPixelRatio:o.pixelRatio||$n[o.screenResolution]||$n[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in o?o.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:o.canvasColor&&x(o.canvasColor)||0,inspector:!0===o.inspector?zn:void 0,boundsMargin:o.viewportMargin||0,renderEngine:Gn(o),fontEngines:qn(o),canvas:o.canvas,textureProcessingTimeLimit:o.textureProcessingTimeLimit,textureMemory:Wn(o),createImageBitmapSupport:"auto",targetFPS:"maxFPS"in o?o.maxFPS:0}),o.advanced||{}),n);return(()=>{const e=Hn.stage;l.get("shaders",[]).forEach(t=>{e.shManager.registerShaderType(t.name,t.type)}),l.get("effects",[]).forEach(t=>{e.shManager.registerShaderType(t.name,t.type)})})(),(()=>{const e=Hn.stage;l.get("fonts",[]).forEach(t=>{"sdf"===t.type||"msdf"===t.type?(!t.png&&t.file&&(t.png=t.file.replace(/\.[^.]+$/,`.${t.type}.png`)),!t.json&&t.file&&(t.json=t.file.replace(/\.[^.]+$/,`.${t.type}.json`)),e.fontManager.addFontFace(new fn(t.type,{fontFamily:t.family,descriptors:{},atlasUrl:t.png,atlasDataUrl:t.json,stage:e,metrics:t.metrics}))):"web"===t.type&&e.fontManager.addFontFace(new Qt({fontFamily:t.family,fontUrl:t.file,descriptors:{},metrics:t.metrics}))})})(),(()=>{let t=e();t.quit=()=>{h.info("Closing App"),t.destroy(),t=null,Hn=null}})(),Hn},so="1.38.2",ao={"@lightningjs/renderer":"^2.15.0"};let lo={};const uo={};const co={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},po=window.speechSynthesis,ho=/android/i.test((window.navigator||{}).userAgent||""),fo=new Map;let mo=!1,go=null;const yo=()=>{go&&(clearTimeout(go),go=null)},vo=e=>{if(!e||go)return yo();po.pause(),setTimeout(()=>{po.resume()},0),go=setTimeout(()=>{vo(e)},5e3)},bo={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},xo={speak:e=>void 0!==po?(!1===mo&&(()=>{const e=po.getVoices();bo.voice=e[0]||null,mo=!0})(),(e=>{const t=new SpeechSynthesisUtterance(e.message),n=e.id;return t.lang=e.lang||bo.lang,t.pitch=e.pitch||bo.pitch,t.rate=e.rate||bo.rate,t.voice=e.voice||bo.voice,t.volume=e.volume||bo.volume,fo.set(n,t),!1===ho&&(t.onstart=()=>{vo(t)},t.onresume=()=>{vo(t)}),new Promise((e,o)=>{t.onend=()=>{yo(),fo.delete(n),e()},t.onerror=e=>{yo(),fo.delete(n),o(e)},po.speak(t)})})(e)):(h.error("speechSynthesis web API not available"),Promise.reject({error:"unavailable"})),cancel(){void 0!==po&&(po.cancel(),yo())}};let wo=!1,So=0;const To=[];let ko=!1,Co=null,Ao=null;const Io={then(){},done(){},cancel(){},remove(){},stop(){}},Eo=(e,t="off")=>!1===wo?Io:Mo(e,t),Mo=(e,t,n=!1)=>{const o=So++;let i;const r=new Promise(e=>{i=e});return r.remove=r.cancel=()=>{const t=To.findIndex(e=>e.id===o);-1!==t&&To.splice(t,1),h.debug(`Announcer - removed from queue: "${e}" (id: ${o})`),i("canceled")},r.stop=()=>{o===Co&&(xo.cancel(),ko=!1,i("interupted"))},!1===n?"assertive"===t?To.unshift({message:e,resolveFn:i,id:o}):To.push({message:e,resolveFn:i,id:o}):To.push({delay:n,resolveFn:i,id:o}),h.debug(`Announcer - added to queue: "${e}" (id: ${o})`),setTimeout(()=>{Ro()},100),r},Ro=async()=>{if(!0===ko||0===To.length)return;ko=!0;const{message:e,resolveFn:t,delay:n,id:o}=To.shift();Co=o,n?setTimeout(()=>{ko=!1,Co=null,t("finished"),Ro()},n):(null!==Ao&&clearTimeout(Ao),Ao=setTimeout(()=>{h.debug(`Announcer - speaking: "${e}" (id: ${o})`),xo.speak({message:e,id:o}).then(()=>{h.debug(`Announcer - finished speaking: "${e}" (id: ${o})`),Co=null,ko=!1,t("finished"),Ro()}).catch(n=>{Co=null,ko=!1,h.debug(`Announcer - error ("${n.error}") while speaking: "${e}" (id: ${o})`),t(n.error),Ro()}),Ao=null},200))},_o={speak:Eo,polite:e=>Eo(e,"polite"),assertive:e=>Eo(e,"assertive"),stop:()=>{xo.cancel()},enable:()=>{wo=!0},disable:()=>{wo=!1},toggle:e=>{wo=!!e},clear:()=>{ko=!1,To.length=0},pause:e=>!1===wo?Io:Mo(void 0,void 0,e)};let Lo;const Po=te({path:"",navigating:!1,data:null,params:null,hash:""},l.get("reactivityMode"),!0),Do=new Map,Oo=[];let No,Uo={},Bo={},Fo=!1;const jo=e=>e.replace(/^\/+|\/+$/g,"").toLowerCase(),zo=e=>"object"==typeof e&&null!==e,$o=e=>"string"==typeof e,Vo=(e,n=[])=>{const o=e.replace(/^\/+|\/+$/g,"");e=jo(e);let i=!1,r=0;for(;!i&&r<n.length;){const t=n[r];if(t.path=jo(t.path),t.path===e)t.params={},i=t;else if(t.path.indexOf(":")>-1){const e=[...t.path.matchAll(/:([^\s/]+)/gi)];let n=t.path;e.reverse().forEach(e=>{n=n.substring(0,e.index)+"([^\\s/]+)"+n.substring(e.index+e[0].length)}),n="^"+n;const r=o.match(new RegExp(`${n}`,"i"));r&&(t.params=e.reverse().reduce((e,t,n)=>(e[t[1]]=r[n+1],e),{}),i=t)}else if(t.path.endsWith("*")){const n=new RegExp(t.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),o=e.match(n);o&&(o[1]&&(t.params={path:o[1]}),i=t)}r++}return i&&(i.options=t(t(t({},Ho),i.options),Uo),i.data||(i.data={})),i},Ho={inHistory:!0,keepAlive:!1,passFocus:!0,reuseComponent:!1},Go=async(e,t,n,o)=>{if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++)i===n.length-1?await qo(t[a.holder],n[i]):qo(t[a.holder],n[i]);else await qo(t[a.holder],n);!1===o&&e.options&&!0===e.options.keepAlive?Do.set(e.hash,{view:t,focus:No}):!0===o&&Do.delete(e.hash),!e.options||!0===e.options.keepAlive&&!0!==o||(t.destroy(),t=null),No=null},qo=(e,t,n=!0)=>new Promise(o=>{if(!0===n){let n=t.end;t.end=(...e)=>{n&&n(e),n=null,o()},void 0!==e?e.set(t.prop,{transition:t}):o()}else void 0!==e&&e.set(t.prop,t.value),o()}),Wo=(e,t={},n={})=>{Bo=t,Uo=n,window.location.hash=e},Ko=function(){const e=Oo.pop();if(e&&Lo!==e)return Fo=!0,Wo(e.hash,e.data,e.options),!0;const t=Lo&&Lo.options.backtrack||!1;if(!1===t)return!1;const n=/(\/:?[\w%\s-]+)$/;let o=Lo.path,i=o.split("/").length;if(i<=1)return!1;for(;i--;){if(!n.test(o))return!1;o=o.replace(n,"");const e=Vo(o,this.parent[a.routes]);if(e&&t)return Wo(e.path),!0}return!1},Xo={navigate:async function(){_o.stop(),_o.clear(),Po.navigating=!0;let e=!1;if(this.parent[a.routes]){let n=Lo;const{hash:o,path:i,queryParams:r}=(()=>{const e=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:e[0],queryParams:new URLSearchParams(e[1]),hash:document.location.hash}})();let s=Vo(i,this.parent[a.routes]);if(Lo=s,s){const i={},l=[...r.entries()];for(let e=0;e<l.length;e++)i[l[e][0]]=l[e][1];let u,c,d;if(s.data=t(t(t({},s.data),Bo),i),null!==o&&(s.hash=o),this.parent[a.routerHooks]){const e=this.parent[a.routerHooks];if(e.beforeEach&&(u=await e.beforeEach.call(this.parent,s,n),$o(u)))return void Wo(u)}if(s=zo(u)?u:s,s.hooks&&s.hooks.before&&(c=await s.hooks.before.call(this.parent,s,n),$o(c)))return Lo=n,void Wo(c);s=zo(c)?c:s,!1===Fo&&n&&!0===n.options.inHistory&&Oo.push(n),"transition"in s||(s.transition=co),"function"==typeof s.transition&&(s.transition=s.transition(n,s));let{view:p,focus:f}=Do.get(s.hash)||{};const m=t(t(t({},this[a.props]),s.params),s.data);if(n&&s.component===n.component&&!0===s.options.reuseComponent&&!0!==s.options.keepAlive){e=!0,p=this[a.children][this[a.children].length-1];for(const e in m)p[a.props][e]=m[e]}if(s.announce&&("string"==typeof s.announce&&(s.announce={message:s.announce}),_o.speak(s.announce.message,s.announce.politeness)),p){d=p[a.holder];let e=!1;if(s.transition.before)if(Array.isArray(s.transition.before)){for(let t=0;t<s.transition.before.length;t++)if("alpha"===s.transition.before[t].prop){e=!0;break}}else"alpha"===s.transition.before.prop&&(e=!0);!1===e&&d.set("alpha",1)}else d=uo.element({parent:this[a.children][0]}),d.populate({}),d.set("w","100%"),d.set("h","100%"),p=await s.component({props:m},d,this),"Module"===p[Symbol.toStringTag]&&(p.default&&"function"==typeof p.default?p=p.default({props:m},d,this):h.error("Dynamic import doesn't have a default export or default is not a function")),"function"==typeof p&&(p=p({props:m},d,this));!1===e&&this[a.children].push(p),No=ei.get();const g=this[a.children];if(this.activeView=g[g.length-1],void 0!==s.options&&!1===s.options.passFocus||(f?f.$focus():p.$focus()),s.transition.before)if(Array.isArray(s.transition.before))for(let e=0;e<s.transition.before.length;e++)d.set(s.transition.before[e].prop,s.transition.before[e].value);else d.set(s.transition.before.prop,s.transition.before.value);let y=!1;if(n&&!1===e){y=!0;const e=this[a.children].splice(1,1).pop();e&&Go(n,e,s.transition.out,Fo)}if(Po.path=s.path,Po.params=s.params,Po.hash=o,Po.data=s.data,s.transition.in)if(Array.isArray(s.transition.in))for(let e=0;e<s.transition.in.length;e++)e===s.transition.length-1?await qo(d,s.transition.in[e],y):qo(d,s.transition.in[e],y);else await qo(d,s.transition.in,y)}else{h.error(`Route ${o} not found`);const e=this.parent[a.routerHooks];e&&"function"==typeof e.error&&e.error.call(this.parent,`Route ${o} not found`)}}Fo=!1,Po.navigating=!1},back:Ko};let Yo,Jo=null,Qo=[];const Zo=new Map,ei={_hold:!1,set hold(e){this._hold=e},get hold(){return this._hold},get:()=>Jo,set(e,t){if(clearTimeout(Yo),e===Jo)return;if(null===Jo&&(Qo=ti([e])),null!==Jo)if(Qo[Qo.length-1]===e.parent)Qo.push(e);else{const t=ti([e]);let n=Qo.length;for(;n--&&!(t.indexOf(Qo[n])>-1);)Qo[n].lifecycle.state="unfocus";Qo=t}let n=0;for(;n<Qo.length-1;)Qo[n].lifecycle.state="focus",n++;Yo=setTimeout(()=>oi(e,t),!0===this.hold?l.get("holdTimeout",50):0)},input(e,t){if(!0===Po.navigating)return;const n=ni(Jo,e);if(null===n)return;const o=n[a.inputEvents];let i;o[e]?i=o[e].call(n,t):o.any&&(i=o.any.call(n,t)),void 0!==i&&Zo.set(t.code,i)}},ti=e=>void 0!==e[0].parent?(e.unshift(e[0].parent),ti(e)):e,ni=(e,t)=>!e[a.inputEvents]||"function"!=typeof e[a.inputEvents][t]&&"function"!=typeof e[a.inputEvents].any?void 0!==e.parent?ni(e.parent,t):null:e,oi=(e,t)=>{if(h.info("\nFocus chain:\n",Qo.map((e,t)=>"\t".repeat(t)+"↳ "+e.componentId).join("\n")),Jo=e,e.lifecycle.state="focus",t instanceof KeyboardEvent){const e=new KeyboardEvent("keydown",t);e[a.internalEvent]=!0,document.dispatchEvent(e)}},ii=new Map,ri=new Map;function si(e){if(null===e||"object"!=typeof e)return e;const t=function(e){return e&&"object"==typeof e&&!0===e[a.isProxy]}(e)?J(e):e,n=Array.isArray(t)?[]:{};for(const o of Object.keys(t)){const e=t[o];n[o]=e&&"object"==typeof e?si(e):e}return n}const ai={registerListener(e,t,n,o=0){let i=ii.get(t);void 0===i&&(i=new Map,ii.set(t,i));let r=i.get(e);void 0===r&&(r=new Set,i.set(e,r)),r.add({cb:n,priority:o}),ri.delete(t)},deregisterListener(e,t){let n=ii.get(t);void 0!==n&&n.has(e)&&(n.delete(e),ii.set(t,n),ri.delete(t))},executeListeners(e,n,o){!1===o&&(n=si(n));const i=ii.get(e);if(void 0===i||0===i.size)return!0;if(!1===ri.has(e)){const n=[];for(const[e,o]of i)for(const i of o)n.push(t(t({},i),{},{component:e}));n.sort((e,t)=>t.priority-e.priority),ri.set(e,n)}const r=ri.get(e);for(let t=0;t<r.length;t++){const{cb:e,component:o}=r[t];if(!1===e.call(o,n))return!1}return!0},removeListeners(e){for(const[t,n]of ii)n.has(e)&&(n.delete(e),ri.delete(t),0===n.size&&ii.delete(t))}},li={focus:{value:function(e){return h.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(e)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(e){"focus"===this.lifecycle.state&&(this.lifecycle.state="refocus"),ei.set(this,e)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[a.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.eol=!0,this.lifecycle.state="destroy",!0===this.hasFocus&&this.parent.$focus();for(let e in this[a.state])Array.isArray(this[a.state][e])&&(this[a.state][e]=[]);this.$clearTimeouts(),this.$clearIntervals(),ai.removeListeners(this),ui(this[a.children]),this[a.children].length=0,H(this[a.effects]),this[a.state]={},this[a.props]={},this[a.computed]=null,this.lifecycle={},this[a.effects].length=0,this.parent=null,this.rootParent=null,this[a.wrapper]=null,this[a.originalState]=null,this[a.slots].length=0,delete this[a.computed],delete this[a.effects],delete this.parent,delete this.rootParent,delete this[a.wrapper],delete this[a.originalState],delete this[a.children],delete this[a.slots],delete this.componentId,delete this[a.id],delete this.ref,delete this[a.state].hasFocus,this[a.holder].destroy(),this[a.holder]=null,delete this[a.holder],this[a.cleanup](),delete this[a.cleanup],h.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},[a.removeGlobalEffects]:{value:function(e=[]){H(e)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(e){return h.warn("this.select is deprecated, use this.$select instead"),this.$select(e)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(e){if(!0===this.eol)return;let t=null;return this[a.children].forEach(n=>{Array.isArray(n)?n.forEach(n=>{n.ref===e&&(t=n)}):Object.getPrototypeOf(n)===Object.prototype?Object.keys(n).forEach(o=>{n[o].ref===e&&(t=n[o])}):n.ref===e&&(t=n)}),t},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(e){return h.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(e)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(e){let t=this[a.originalState];if(e.indexOf(".")>-1){const n=e.split(".");e=n.pop(n);for(let e=0;e<n.length;e++)t=t[n[e]]}q(t,e,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(e,t){return{type:e,props:t}},writable:!1,enumerable:!0,configurable:!1}},ui=function(e){for(let t=0;t<e.length;t++){if(!e[t])return;e[t].destroy&&"function"==typeof e[t].destroy?e[t].destroy():Object.getPrototypeOf(e[t])===Object.prototype&&ui(Object.values(e[t])),e[t]=null}e.length=0},ci={$setTimeout:{value:function(e,t,...n){if(!0===this.eol)return;const o=setTimeout(()=>{this.$clearTimeout(o),e.apply(null,n)},t,n);return this[a.timeouts].push(o),o},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(e){const t=this[a.timeouts].indexOf(e);t>-1&&(this[a.timeouts].splice(t,1),clearTimeout(e))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let e=0;e<this[a.timeouts].length;e++)clearTimeout(this[a.timeouts][e]);this[a.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(e,t,...n){if(!0===this.eol)return;const o=setInterval(()=>e.apply(null,n),t,n);return this[a.intervals].push(o),o},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(e){const t=this[a.intervals].indexOf(e);t>-1&&(this[a.intervals].splice(t,1),clearTimeout(e))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let e=0;e<this[a.intervals].length;e++)clearInterval(this[a.intervals][e]);this[a.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},di={$emit:{value:function(e,t,n=!0){if(!0!==this.eol)return ai.executeListeners(e,t,n)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(e,t,n=0){!0!==this.eol&&ai.registerListener(this,e,t,n)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(e){ai.deregisterListener(this,e)},writable:!1,enumerable:!0,configurable:!1}},pi={$router:{value:{to:Wo,back:Ko,get currentRoute(){return Lo},get routes(){return this[a.routes]},get navigating(){return Po.navigating},state:Po},writable:!1,enumerable:!0,configurable:!1}},hi={$announcer:{value:_o,writable:!1,enumerable:!0,configurable:!1}},fi={$size:{value:function(e={w:0,h:0}){this[a.holder].set("w",e.w||0),this[a.holder].set("h",e.h||0)},writable:!1,enumerable:!0,configurable:!1},[a.renderer]:{value:()=>lo,writable:!1,enumerable:!0,configurable:!1},[a.getChildren]:{value(){const e=this.rootParent||this.parent;return(this[a.children]||[]).concat(e&&e[a.getChildren]().map(e=>Object.getPrototypeOf(e)===Object.prototype?Object.values(e).map(e=>(e.forComponent=e[Symbol.for("config")]&&e[Symbol.for("config")].parent.component,e)):e).flat().filter(e=>{if(e&&e.component)return e.component&&e.component.componentId===this.componentId||e.forComponent&&e.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},mi=t(t(t({},di),pi),hi),gi=Object.defineProperties({[a.launched]:!1},t(t(t(t({},li),ci),mi),fi)),yi={cast:e=>e,required:!1},vi=(e,n=[])=>{-1===n.indexOf("ref")&&n.push("ref"),e[a.propKeys]=[];const o=n.length;for(let i=0;i<o;i++){const o=t(t({},yi),"object"==typeof n[i]?n[i]:{key:n[i]});e[a.propKeys].push(o.key),Object.defineProperty(e,o.key,{get(){const e=o.cast(void 0!==this[a.props]&&o.key in this[a.props]?this[a.props][o.key]:"default"in o?o.default:void 0);return!0===o.required&&void 0===e&&h.warn(`${o.key} is required`),e},set(e){h.warn(`Warning! Avoid mutating props directly (prop "${o.key}" in component "${this.componentId}")`),this[a.props][o.key]=e}})}},bi=(e,t=()=>{})=>{Object.defineProperty(e,a.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const n=Object.keys(t.apply(e)||{});n.indexOf("hasFocus")>-1?h.warn("State `hasFocus` already exists as a built-in Component variable (to indicate whether the component currently has focus). Avoid using your own `hasFocus` key in the Component state"):n.push(["hasFocus"]);const o=n.length;for(let i=0;i<o;i++){const t=n[i];void 0!==e[a.propKeys]&&e[a.propKeys].indexOf(t)>-1&&h.error(`State ${t} already exists as a prop`),void 0!==e[a.methodKeys]&&e[a.methodKeys].indexOf(t)>-1&&h.error(`State ${t} already exists as a method`),e[a.stateKeys].push(t),Object.defineProperty(e,t,{get(){return this[a.state][t]},set(e){this[a.state][t]=e}})}},xi=(e,t)=>{e[a.computedKeys]=[];for(let n in t)e[a.stateKeys]&&e[a.stateKeys].indexOf(n)>-1?h.error(`${n} already exists as a state variable`):e[a.propKeys]&&e[a.propKeys].indexOf(n)>-1?h.error(`${n} already exists as a prop`):e[a.methodKeys]&&e[a.methodKeys].indexOf(n)>-1?h.error(`${n} already exists as a method`):("function"!=typeof t[n]&&h.warn(`${n} is not a function`),e[a.computedKeys].push(n),Object.defineProperty(e,n,{get(){return t[n].apply(this)}}))},wi=(e,t)=>{e[a.watchKeys]=[],e[a.watchers]={};for(let n in t)"function"!=typeof t[n]&&console.warn(`${n} is not a function`),e[a.watchKeys].push(n),e[a.watchers][n]=function(e,o){t[n].call(this,e,o)}};let Si=0;function Ti(e,n){e[a.identifier]=++Si,((e={},t)=>{U[t]={},[...Object.keys(e),...Object.getOwnPropertySymbols(e)].forEach(n=>{"function"==typeof e[n]&&(U[t][n]=e[n])})})(n.hooks,e[a.identifier]),vi(e,n.props),n.methods&&((e,t)=>{e[a.methodKeys]=[];for(let n in t)e[a.propKeys]&&e[a.propKeys].indexOf(n)>-1?h.error(`${n} already exists as a prop`):("function"!=typeof t[n]&&h.warn(`${n} is not a function`),e[a.methodKeys].push(n),e[n]=t[n])})(e,n.methods),bi(e,n.state),n.computed&&xi(e,n.computed),n.watch&&wi(e,n.watch);const o=void 0!==n.router?n.router:n.routes;return void 0!==o&&((e,n)=>{let o=n;!1===Array.isArray(n)&&(e[a.routerHooks]=n.hooks,o=n.routes),e[a.routes]=[];const i=o.length;for(let r=0;r<i;r++)e[a.routes][r]=o[r],e[a.routes][r].options=t(t({},{inHistory:!0}),o[r].options)})(e,o),n.input&&((e,t)=>{e[a.inputEvents]=[],Object.keys(t).forEach(n=>{"function"!=typeof t[n]&&h.warn(`${t[n]} is not a function`),e[a.inputEvents][n]=t[n]})})(e,n.input),e}const ki=()=>Pi("Circle",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].color=t.color,l[0].w=t.size,l[0].h=t.size,l[0].effects=[t.shader("radius",{radius:t.radius})],a[0].populate(l[0]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("color",e.color)},function(e,t,n,o,i,r){t[0].set("w",e.size)},function(e,t,n,o,i,r){t[0].set("h",e.size)},function(e,t,n,o,i,r){t[0].set("effects",[e.shader("radius",{radius:e.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let Ci=null;const Ai=()=>Pi("RouterView",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=1*e.node.width,l[0].height=1*e.node.height,a[0].populate(l[0]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[],context:{}},state:()=>({activeView:null}),hooks:{async ready(){this.parent[a.routerHooks]&&this.parent[a.routerHooks].init&&await this.parent[a.routerHooks].init.apply(this.parent),Ci=()=>Xo.navigate.apply(this),Xo.navigate.apply(this),window.addEventListener("hashchange",Ci)},destroy(){window.removeEventListener("hashchange",Ci,!1)},focus(){this.activeView&&ei.get()===this&&this.activeView.$focus()}},input:{back(e){!1===Xo.back.call(this)&&this.parent.$focus(e)}}}),Ii=()=>Pi("Sprite",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=1*e.node.width,l[0].h=1*e.node.height,l[0].texture=t.texture,l[0].color=t.color,a[0].populate(l[0]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("texture",e.texture)},function(e,t,n,o,i,r){t[0].set("color",e.color)}],context:{}},props:["image","map","frame","color"],state:()=>({spriteTexture:null}),computed:{texture(){const e="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(null!==this.spriteTexture&&e)return this[a.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:e.x,y:e.y,width:e.w,height:e.h})}},hooks:{ready(){this.spriteTexture=this[a.renderer]().createTexture("ImageTexture",{src:this.image})}}}),Ei=()=>Pi("FPScounter",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].y=15,l[1].x=20,a[1].populate(l[1]),!0===f&&(m-=1),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),a[2].populate(l[2]),!0===f&&(m-=1),g[3]=n.components&&n.components.Sprite||o.Sprite,e=a[2],l[3]={},a[3]=this.element({parent:e||"root"},!0===f?h:t),l[3].image=t.image,l[3].w=43,l[3].h=25,l[3].map=t.sprite,l[3].frame="fps",c[3]=[],void 0!==g[3])for(let y in g[3][Symbol.for("config")].props)delete l[3][g[3][Symbol.for("config")].props[y]],c[3].push(g[3][Symbol.for("config")].props[y]);if(a[3].populate(l[3]),!0===f&&(m-=1),e=a[3],u[4]={},u[4].image=t.image,u[4].w=43,u[4].h=25,u[4].map=t.sprite,u[4].frame="fps",d=u[4].is||"Sprite",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);if(a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],h=a[4],f=!0):e=a[4][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[2],l[5]={},a[5]=this.element({parent:e||"root"},!0===f?h:t),l[5].x=58,l[5].y=2,a[5].populate(l[5]),!0===f&&(m-=1),g[6]=n.components&&n.components.Sprite||o.Sprite,e=a[5],l[6]={},a[6]=this.element({parent:e||"root"},!0===f?h:t),l[6].image=t.image,l[6].x=0,l[6].h=20,l[6].w=20,l[6].map=t.sprite,l[6].frame=t.fps[0],c[6]=[],void 0!==g[6])for(let y in g[6][Symbol.for("config")].props)delete l[6][g[6][Symbol.for("config")].props[y]],c[6].push(g[6][Symbol.for("config")].props[y]);if(a[6].populate(l[6]),!0===f&&(m-=1),e=a[6],u[7]={},u[7].image=t.image,u[7].x=0,u[7].h=20,u[7].w=20,u[7].map=t.sprite,p=t.fps[0],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[7].frame=p,d=u[7].is||"Sprite",o[7],"string"==typeof d){if(o[7]=n.components&&n.components[d]||o[d],!o[7])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[7]=d);if(a[7]=o[7].call(null,{props:u[7]},a[6],t),a[7][Symbol.for("slots")][0]?(e=a[7][Symbol.for("slots")][0],h=a[7],f=!0):e=a[7][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[8]=n.components&&n.components.Sprite||o.Sprite,e=a[5],l[8]={},a[8]=this.element({parent:e||"root"},!0===f?h:t),l[8].image=t.image,l[8].x=18,l[8].h=20,l[8].w=20,l[8].map=t.sprite,l[8].frame=t.fps[1],c[8]=[],void 0!==g[8])for(let y in g[8][Symbol.for("config")].props)delete l[8][g[8][Symbol.for("config")].props[y]],c[8].push(g[8][Symbol.for("config")].props[y]);if(a[8].populate(l[8]),!0===f&&(m-=1),e=a[8],u[9]={},u[9].image=t.image,u[9].x=18,u[9].h=20,u[9].w=20,u[9].map=t.sprite,p=t.fps[1],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[9].frame=p,d=u[9].is||"Sprite",o[9],"string"==typeof d){if(o[9]=n.components&&n.components[d]||o[d],!o[9])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[9]=d);if(a[9]=o[9].call(null,{props:u[9]},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],h=a[9],f=!0):e=a[9][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[10]=n.components&&n.components.Sprite||o.Sprite,e=a[5],l[10]={},a[10]=this.element({parent:e||"root"},!0===f?h:t),l[10].image=t.image,l[10].x=36,l[10].h=20,l[10].w=20,l[10].map=t.sprite,l[10].frame=t.fps[2],c[10]=[],void 0!==g[10])for(let y in g[10][Symbol.for("config")].props)delete l[10][g[10][Symbol.for("config")].props[y]],c[10].push(g[10][Symbol.for("config")].props[y]);if(a[10].populate(l[10]),!0===f&&(m-=1),e=a[10],u[11]={},u[11].image=t.image,u[11].x=36,u[11].h=20,u[11].w=20,u[11].map=t.sprite,p=t.fps[2],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[11].frame=p,d=u[11].is||"Sprite",o[11],"string"==typeof d){if(o[11]=n.components&&n.components[d]||o[d],!o[11])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[11]=d);if(a[11]=o[11].call(null,{props:u[11]},a[10],t),a[11][Symbol.for("slots")][0]?(e=a[11][Symbol.for("slots")][0],h=a[11],f=!0):e=a[11][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[1],l[12]={},a[12]=this.element({parent:e||"root"},!0===f?h:t),l[12].x=150,a[12].populate(l[12]),!0===f&&(m-=1),g[13]=n.components&&n.components.Sprite||o.Sprite,e=a[12],l[13]={},a[13]=this.element({parent:e||"root"},!0===f?h:t),l[13].image=t.image,l[13].y=2,l[13].w=48,l[13].h=25,l[13].map=t.sprite,l[13].frame="avg",c[13]=[],void 0!==g[13])for(let y in g[13][Symbol.for("config")].props)delete l[13][g[13][Symbol.for("config")].props[y]],c[13].push(g[13][Symbol.for("config")].props[y]);if(a[13].populate(l[13]),!0===f&&(m-=1),e=a[13],u[14]={},u[14].image=t.image,u[14].y=2,u[14].w=48,u[14].h=25,u[14].map=t.sprite,u[14].frame="avg",d=u[14].is||"Sprite",o[14],"string"==typeof d){if(o[14]=n.components&&n.components[d]||o[d],!o[14])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[14]=d);if(a[14]=o[14].call(null,{props:u[14]},a[13],t),a[14][Symbol.for("slots")][0]?(e=a[14][Symbol.for("slots")][0],h=a[14],f=!0):e=a[14][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[12],l[15]={},a[15]=this.element({parent:e||"root"},!0===f?h:t),l[15].x=63,l[15].y=2,a[15].populate(l[15]),!0===f&&(m-=1),g[16]=n.components&&n.components.Sprite||o.Sprite,e=a[15],l[16]={},a[16]=this.element({parent:e||"root"},!0===f?h:t),l[16].image=t.image,l[16].x=0,l[16].h=20,l[16].w=20,l[16].map=t.sprite,l[16].frame=t.avgFps[0],c[16]=[],void 0!==g[16])for(let y in g[16][Symbol.for("config")].props)delete l[16][g[16][Symbol.for("config")].props[y]],c[16].push(g[16][Symbol.for("config")].props[y]);if(a[16].populate(l[16]),!0===f&&(m-=1),e=a[16],u[17]={},u[17].image=t.image,u[17].x=0,u[17].h=20,u[17].w=20,u[17].map=t.sprite,p=t.avgFps[0],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[17].frame=p,d=u[17].is||"Sprite",o[17],"string"==typeof d){if(o[17]=n.components&&n.components[d]||o[d],!o[17])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[17]=d);if(a[17]=o[17].call(null,{props:u[17]},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],h=a[17],f=!0):e=a[17][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[18]=n.components&&n.components.Sprite||o.Sprite,e=a[15],l[18]={},a[18]=this.element({parent:e||"root"},!0===f?h:t),l[18].image=t.image,l[18].x=18,l[18].h=20,l[18].w=20,l[18].map=t.sprite,l[18].frame=t.avgFps[1],c[18]=[],void 0!==g[18])for(let y in g[18][Symbol.for("config")].props)delete l[18][g[18][Symbol.for("config")].props[y]],c[18].push(g[18][Symbol.for("config")].props[y]);if(a[18].populate(l[18]),!0===f&&(m-=1),e=a[18],u[19]={},u[19].image=t.image,u[19].x=18,u[19].h=20,u[19].w=20,u[19].map=t.sprite,p=t.avgFps[1],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[19].frame=p,d=u[19].is||"Sprite",o[19],"string"==typeof d){if(o[19]=n.components&&n.components[d]||o[d],!o[19])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[19]=d);if(a[19]=o[19].call(null,{props:u[19]},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],h=a[19],f=!0):e=a[19][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[20]=n.components&&n.components.Sprite||o.Sprite,e=a[15],l[20]={},a[20]=this.element({parent:e||"root"},!0===f?h:t),l[20].image=t.image,l[20].x=36,l[20].h=20,l[20].w=20,l[20].map=t.sprite,l[20].frame=t.avgFps[2],c[20]=[],void 0!==g[20])for(let y in g[20][Symbol.for("config")].props)delete l[20][g[20][Symbol.for("config")].props[y]],c[20].push(g[20][Symbol.for("config")].props[y]);if(a[20].populate(l[20]),!0===f&&(m-=1),e=a[20],u[21]={},u[21].image=t.image,u[21].x=36,u[21].h=20,u[21].w=20,u[21].map=t.sprite,p=t.avgFps[2],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[21].frame=p,d=u[21].is||"Sprite",o[21],"string"==typeof d){if(o[21]=n.components&&n.components[d]||o[d],!o[21])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[21]=d);if(a[21]=o[21].call(null,{props:u[21]},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],h=a[21],f=!0):e=a[21][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[1],l[22]={},a[22]=this.element({parent:e||"root"},!0===f?h:t),l[22].x=0,l[22].y=40,a[22].populate(l[22]),!0===f&&(m-=1),g[23]=n.components&&n.components.Sprite||o.Sprite,e=a[22],l[23]={},a[23]=this.element({parent:e||"root"},!0===f?h:t),l[23].image=t.image,l[23].x="-2",l[23].w=47,l[23].h=25,l[23].map=t.sprite,l[23].frame="min",c[23]=[],void 0!==g[23])for(let y in g[23][Symbol.for("config")].props)delete l[23][g[23][Symbol.for("config")].props[y]],c[23].push(g[23][Symbol.for("config")].props[y]);if(a[23].populate(l[23]),!0===f&&(m-=1),e=a[23],u[24]={},u[24].image=t.image,u[24].x="-2",u[24].w=47,u[24].h=25,u[24].map=t.sprite,u[24].frame="min",d=u[24].is||"Sprite",o[24],"string"==typeof d){if(o[24]=n.components&&n.components[d]||o[d],!o[24])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[24]=d);if(a[24]=o[24].call(null,{props:u[24]},a[23],t),a[24][Symbol.for("slots")][0]?(e=a[24][Symbol.for("slots")][0],h=a[24],f=!0):e=a[24][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[22],l[25]={},a[25]=this.element({parent:e||"root"},!0===f?h:t),l[25].x=58,l[25].y=2,a[25].populate(l[25]),!0===f&&(m-=1),g[26]=n.components&&n.components.Sprite||o.Sprite,e=a[25],l[26]={},a[26]=this.element({parent:e||"root"},!0===f?h:t),l[26].image=t.image,l[26].x=0,l[26].h=20,l[26].w=20,l[26].map=t.sprite,l[26].frame=t.minFps[0],c[26]=[],void 0!==g[26])for(let y in g[26][Symbol.for("config")].props)delete l[26][g[26][Symbol.for("config")].props[y]],c[26].push(g[26][Symbol.for("config")].props[y]);if(a[26].populate(l[26]),!0===f&&(m-=1),e=a[26],u[27]={},u[27].image=t.image,u[27].x=0,u[27].h=20,u[27].w=20,u[27].map=t.sprite,p=t.minFps[0],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[27].frame=p,d=u[27].is||"Sprite",o[27],"string"==typeof d){if(o[27]=n.components&&n.components[d]||o[d],!o[27])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[27]=d);if(a[27]=o[27].call(null,{props:u[27]},a[26],t),a[27][Symbol.for("slots")][0]?(e=a[27][Symbol.for("slots")][0],h=a[27],f=!0):e=a[27][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[28]=n.components&&n.components.Sprite||o.Sprite,e=a[25],l[28]={},a[28]=this.element({parent:e||"root"},!0===f?h:t),l[28].image=t.image,l[28].x=18,l[28].h=20,l[28].w=20,l[28].map=t.sprite,l[28].frame=t.minFps[1],c[28]=[],void 0!==g[28])for(let y in g[28][Symbol.for("config")].props)delete l[28][g[28][Symbol.for("config")].props[y]],c[28].push(g[28][Symbol.for("config")].props[y]);if(a[28].populate(l[28]),!0===f&&(m-=1),e=a[28],u[29]={},u[29].image=t.image,u[29].x=18,u[29].h=20,u[29].w=20,u[29].map=t.sprite,p=t.minFps[1],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[29].frame=p,d=u[29].is||"Sprite",o[29],"string"==typeof d){if(o[29]=n.components&&n.components[d]||o[d],!o[29])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[29]=d);if(a[29]=o[29].call(null,{props:u[29]},a[28],t),a[29][Symbol.for("slots")][0]?(e=a[29][Symbol.for("slots")][0],h=a[29],f=!0):e=a[29][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[30]=n.components&&n.components.Sprite||o.Sprite,e=a[25],l[30]={},a[30]=this.element({parent:e||"root"},!0===f?h:t),l[30].image=t.image,l[30].x=36,l[30].h=20,l[30].w=20,l[30].map=t.sprite,l[30].frame=t.minFps[2],c[30]=[],void 0!==g[30])for(let y in g[30][Symbol.for("config")].props)delete l[30][g[30][Symbol.for("config")].props[y]],c[30].push(g[30][Symbol.for("config")].props[y]);if(a[30].populate(l[30]),!0===f&&(m-=1),e=a[30],u[31]={},u[31].image=t.image,u[31].x=36,u[31].h=20,u[31].w=20,u[31].map=t.sprite,p=t.minFps[2],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[31].frame=p,d=u[31].is||"Sprite",o[31],"string"==typeof d){if(o[31]=n.components&&n.components[d]||o[d],!o[31])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[31]=d);if(a[31]=o[31].call(null,{props:u[31]},a[30],t),a[31][Symbol.for("slots")][0]?(e=a[31][Symbol.for("slots")][0],h=a[31],f=!0):e=a[31][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[1],l[32]={},a[32]=this.element({parent:e||"root"},!0===f?h:t),l[32].x=150,l[32].y=40,a[32].populate(l[32]),!0===f&&(m-=1),g[33]=n.components&&n.components.Sprite||o.Sprite,e=a[32],l[33]={},a[33]=this.element({parent:e||"root"},!0===f?h:t),l[33].image=t.image,l[33].w=53,l[33].h=25,l[33].map=t.sprite,l[33].frame="max",c[33]=[],void 0!==g[33])for(let y in g[33][Symbol.for("config")].props)delete l[33][g[33][Symbol.for("config")].props[y]],c[33].push(g[33][Symbol.for("config")].props[y]);if(a[33].populate(l[33]),!0===f&&(m-=1),e=a[33],u[34]={},u[34].image=t.image,u[34].w=53,u[34].h=25,u[34].map=t.sprite,u[34].frame="max",d=u[34].is||"Sprite",o[34],"string"==typeof d){if(o[34]=n.components&&n.components[d]||o[d],!o[34])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[34]=d);if(a[34]=o[34].call(null,{props:u[34]},a[33],t),a[34][Symbol.for("slots")][0]?(e=a[34][Symbol.for("slots")][0],h=a[34],f=!0):e=a[34][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[32],l[35]={},a[35]=this.element({parent:e||"root"},!0===f?h:t),l[35].x=63,l[35].y=2,a[35].populate(l[35]),!0===f&&(m-=1),g[36]=n.components&&n.components.Sprite||o.Sprite,e=a[35],l[36]={},a[36]=this.element({parent:e||"root"},!0===f?h:t),l[36].image=t.image,l[36].x=0,l[36].h=20,l[36].w=20,l[36].map=t.sprite,l[36].frame=t.maxFps[0],c[36]=[],void 0!==g[36])for(let y in g[36][Symbol.for("config")].props)delete l[36][g[36][Symbol.for("config")].props[y]],c[36].push(g[36][Symbol.for("config")].props[y]);if(a[36].populate(l[36]),!0===f&&(m-=1),e=a[36],u[37]={},u[37].image=t.image,u[37].x=0,u[37].h=20,u[37].w=20,u[37].map=t.sprite,p=t.maxFps[0],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[37].frame=p,d=u[37].is||"Sprite",o[37],"string"==typeof d){if(o[37]=n.components&&n.components[d]||o[d],!o[37])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[37]=d);if(a[37]=o[37].call(null,{props:u[37]},a[36],t),a[37][Symbol.for("slots")][0]?(e=a[37][Symbol.for("slots")][0],h=a[37],f=!0):e=a[37][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[38]=n.components&&n.components.Sprite||o.Sprite,e=a[35],l[38]={},a[38]=this.element({parent:e||"root"},!0===f?h:t),l[38].image=t.image,l[38].x=18,l[38].h=20,l[38].w=20,l[38].map=t.sprite,l[38].frame=t.maxFps[1],c[38]=[],void 0!==g[38])for(let y in g[38][Symbol.for("config")].props)delete l[38][g[38][Symbol.for("config")].props[y]],c[38].push(g[38][Symbol.for("config")].props[y]);if(a[38].populate(l[38]),!0===f&&(m-=1),e=a[38],u[39]={},u[39].image=t.image,u[39].x=18,u[39].h=20,u[39].w=20,u[39].map=t.sprite,p=t.maxFps[1],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[39].frame=p,d=u[39].is||"Sprite",o[39],"string"==typeof d){if(o[39]=n.components&&n.components[d]||o[d],!o[39])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[39]=d);if(a[39]=o[39].call(null,{props:u[39]},a[38],t),a[39][Symbol.for("slots")][0]?(e=a[39][Symbol.for("slots")][0],h=a[39],f=!0):e=a[39][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[40]=n.components&&n.components.Sprite||o.Sprite,e=a[35],l[40]={},a[40]=this.element({parent:e||"root"},!0===f?h:t),l[40].image=t.image,l[40].x=36,l[40].h=20,l[40].w=20,l[40].map=t.sprite,l[40].frame=t.maxFps[2],c[40]=[],void 0!==g[40])for(let y in g[40][Symbol.for("config")].props)delete l[40][g[40][Symbol.for("config")].props[y]],c[40].push(g[40][Symbol.for("config")].props[y]);if(a[40].populate(l[40]),!0===f&&(m-=1),e=a[40],u[41]={},u[41].image=t.image,u[41].x=36,u[41].h=20,u[41].w=20,u[41].map=t.sprite,p=t.maxFps[2],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[41].frame=p,d=u[41].is||"Sprite",o[41],"string"==typeof d){if(o[41]=n.components&&n.components[d]||o[d],!o[41])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[41]=d);return a[41]=o[41].call(null,{props:u[41]},a[40],t),a[41][Symbol.for("slots")][0]?(e=a[41][Symbol.for("slots")][0],h=a[41],f=!0):e=a[41][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[3]=null,u[4]=null,o[4]=null,g[6]=null,u[7]=null,o[7]=null,g[8]=null,u[9]=null,o[9]=null,g[10]=null,u[11]=null,o[11]=null,g[13]=null,u[14]=null,o[14]=null,g[16]=null,u[17]=null,o[17]=null,g[18]=null,u[19]=null,o[19]=null,g[20]=null,u[21]=null,o[21]=null,g[23]=null,u[24]=null,o[24]=null,g[26]=null,u[27]=null,o[27]=null,g[28]=null,u[29]=null,o[29]=null,g[30]=null,u[31]=null,o[31]=null,g[33]=null,u[34]=null,o[34]=null,g[36]=null,u[37]=null,o[37]=null,g[38]=null,u[39]=null,o[39]=null,g[40]=null,u[41]=null,o[41]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[6]&&-1!==skips[6].indexOf("frame")||t[6].set("frame",e.fps[0])},function(e,t,n,o,i,r){t[7][Symbol.for("props")].frame=e.fps[0]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("frame")||t[8].set("frame",e.fps[1])},function(e,t,n,o,i,r){t[9][Symbol.for("props")].frame=e.fps[1]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[10]&&-1!==skips[10].indexOf("frame")||t[10].set("frame",e.fps[2])},function(e,t,n,o,i,r){t[11][Symbol.for("props")].frame=e.fps[2]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("frame")||t[16].set("frame",e.avgFps[0])},function(e,t,n,o,i,r){t[17][Symbol.for("props")].frame=e.avgFps[0]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("frame")||t[18].set("frame",e.avgFps[1])},function(e,t,n,o,i,r){t[19][Symbol.for("props")].frame=e.avgFps[1]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[20]&&-1!==skips[20].indexOf("frame")||t[20].set("frame",e.avgFps[2])},function(e,t,n,o,i,r){t[21][Symbol.for("props")].frame=e.avgFps[2]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[26]&&-1!==skips[26].indexOf("frame")||t[26].set("frame",e.minFps[0])},function(e,t,n,o,i,r){t[27][Symbol.for("props")].frame=e.minFps[0]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[28]&&-1!==skips[28].indexOf("frame")||t[28].set("frame",e.minFps[1])},function(e,t,n,o,i,r){t[29][Symbol.for("props")].frame=e.minFps[1]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[30]&&-1!==skips[30].indexOf("frame")||t[30].set("frame",e.minFps[2])},function(e,t,n,o,i,r){t[31][Symbol.for("props")].frame=e.minFps[2]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[36]&&-1!==skips[36].indexOf("frame")||t[36].set("frame",e.maxFps[0])},function(e,t,n,o,i,r){t[37][Symbol.for("props")].frame=e.maxFps[0]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[38]&&-1!==skips[38].indexOf("frame")||t[38].set("frame",e.maxFps[1])},function(e,t,n,o,i,r){t[39][Symbol.for("props")].frame=e.maxFps[1]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[40]&&-1!==skips[40].indexOf("frame")||t[40].set("frame",e.maxFps[2])},function(e,t,n,o,i,r){t[41][Symbol.for("props")].frame=e.maxFps[2]}],context:{}},state:()=>({image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}),hooks:{ready(){}}}),Mi={log:{name:"log",plugin:()=>p("App")}},Ri=(e,t="",n={})=>{let o;if("object"==typeof t?n=t:o=t,"function"==typeof e){if(void 0===o)throw Error("Error registering plugin: name is required for plugin");Mi[o]={plugin:e,options:n}}else e.plugin&&Ri(e.plugin,o||e.name,n)};let _i;const Li=e=>{throw new Error(`Parameter ${e} is required`)},Pi=(e=Li("name"),n=Li("config"))=>{let o;const i=function(t,o,i,r){this.componentId=(e=>`BlitsComponent::${e}_${O[e]=(O[e]||0)+1}`)(e),this[a.effects]=[],this.lifecycle=Object.assign(Object.create(oe),{component:this,previous:null,current:null}),this.parent=i,this.rootParent=r,this[a.holder]=o,this[a.id]=++N,this[a.props]=te(t.props||{},l.get("reactivityMode")),this[a.timeouts]=[],this[a.intervals]=[],this[a.originalState]=n.state&&"function"==typeof n.state&&n.state.apply(this)||{},this[a.originalState].hasFocus=!1,this[a.state]=te(this[a.originalState],l.get("reactivityMode")),this.lifecycle.state="init";const{elms:s,cleanup:u}=n.code.render.apply(uo,[o,this,n,_i,W,J,h])||{elms:[],cleanup:()=>{}};this[a.children]=s,this[a.cleanup]=u,this[a.wrapper]=this[a.children][0],this[a.slots]=this[a.children].filter(e=>e[a.isSlot]),n.hooks&&(n.hooks.frameTick&&lo.on("frameTick",(e,t)=>B("frameTick",this[a.identifier],this,[t])),n.hooks.idle&&lo.on("idle",()=>{B("idle",this[a.identifier],this)}),n.hooks.attach&&this[a.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),n.hooks.detach&&this[a.wrapper].node.on("outOfBounds",(e,{previous:t})=>{t>0&&(this.lifecycle.state="detach")}),n.hooks.enter&&this[a.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),n.hooks.exit&&this[a.wrapper].node.on("outOfBounds",()=>{this.lifecycle.state="exit"}));const c=n.code.effects;for(let e=0;e<c.length;e++){const t=()=>{c[e](this,this[a.children],n,_i,r,W)};this[a.effects].push(t),W(t)}if(this[a.watchers]){const e=Object.keys(this[a.watchers]),t=e.length;for(let n=0;n<t;n++){let t=this,o=e[n];const i=o;if(o.indexOf(".")>-1){const e=o.split(".");o=e.pop();for(let n=0;n<e.length;n++)t=t[e[n]]}let r=this[o];const s=(e=!1)=>{const n=t[o];r===n&&!0!==e||(this[a.watchers][i].apply(this,[n,r]),r=n)};this[a.effects].push(s),W(s)}}return setTimeout(()=>this.lifecycle.state="ready"),this},r=(r={},s,l,u)=>{if(!1===gi[a.launched]){const e=Object.keys(Mi),t=e.length,n={};for(let o=0;o<t;o++){const t=e[o],i=`$${t}`;i in gi&&h.warn(`"${t}" (this.${i}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const r=Mi[t];n[i]={value:Object.defineProperties(r.plugin(r.options),mi),writable:!1,enumerable:!0,configurable:!0}}Object.defineProperties(gi,n);for(const o in n)Object.defineProperties(gi[o],n),delete gi[o][o];_i={Circle:ki(),RouterView:Ai(),Sprite:Ii(),FPScounter:Ei()},gi[a.launched]=!0}return void 0===o&&(h.debug(`Setting up ${e} component`),o=Ti(Object.create(gi),n)),void 0===n.code&&(h.debug(`Generating code for ${e} component`),n.code=T.call(n,((e="",n,o,i=null)=>{let r=0,s=0,l=[],u=null,c=0;const d=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,p=/^\s*(\/?>)\s*/,h=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,f=/^<>\s*/,m=/^\s*(<\/>)\s*/,g=t=>{r>=e.length||t()},y=e=>e.replace(/<!--[^]*?-->/gm,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),v=t=>{const n=e.slice(r).match(t);return n&&(s=r,r+=n[0].length),n},b=()=>{v(f)?(l.push({[Symbol.for("componentType")]:null,[a.type]:"opening",[a.level]:c,[a.cursorTagStart]:s}),c++,g(b)):g(w)},w=()=>{v(m)?(c--,l.push({[Symbol.for("componentType")]:null,[a.type]:"closing",[a.level]:c}),g(b)):g(S)},S=()=>{const e=v(d);if(!e)throw E("InvalidTag");u={[Symbol.for("componentType")]:e[1],[a.level]:c,[a.cursorTagStart]:s},e[0].startsWith("</")?(c--,u[a.type]="closing",u[a.level]=c):(u[a.type]="opening",c++),g(T)},T=()=>{const t=v(p);if(t){if("/>"===t[1]){if("closing"===u[a.type])throw E("InvalidClosingTag");u[a.type]="self-closing",c--}if("opening"===u[a.type]){const t=e.slice(r,e.indexOf("<",r));t&&(u.content=t,r+=t.length)}l.push(u),g(b)}else g(k)},k=()=>{const e=v(h);if(!e)throw E("InvalidAttribute");{if("closing"===u[a.type])throw E("AttributesInClosingTag");const t=e[2],n=new RegExp(`^(.*?)${t}\\s*`),o=v(n);if(!o)throw E("MissingOrInvalidAttributeValue");{const t=C(e[1],o[1]);u[t.name]=t.value,g(T)}}},C=(e,t)=>{if(e.includes(".")){const[n,o]=e.split(".");return{name:n,value:`{${o}: ${t}}`}}return["color",":color",":effects","effects"].includes(e)?A(e,t):{name:e,value:t}},A=(e,t)=>{let n=t,o=x(n,null);if(null===o){const e=/'([^']+)'/g;let i,r=0,s="";for(;null!==(i=e.exec(t));){const e=i[1],n=i.index,a=i[0].length;s+=t.slice(r,n),o=x(e,null),s+=null===o?t.slice(n,n+a):`'${o}'`,r=n+a}s+=t.slice(r),n=s}else n=o;return{name:e,value:n}},I=e=>{let n=[],o=!1,i={children:[]},r=i;for(let s=0;s<e.length;s++){let i=e[s];if(0===i[a.level]&&"closing"!==i[a.type]){if(o)throw M("MultipleTopLevelTags",i);if(void 0!==i[":for"])throw M("ForAttributeOnRootElement",i);o=!0}if("opening"===i[a.type])n.push({[a.level]:i[a.level],[a.type]:i[a.type],[a.cursorTagStart]:i[a.cursorTagStart],[Symbol.for("componentType")]:i[Symbol.for("componentType")],parent:r});else if("closing"===i[a.type]){const e=0===n.length;let t=!1,o=!1;if(e||(t=n[n.length-1][a.level]!==i[a.level],o=n[n.length-1][Symbol.for("componentType")]!==i[Symbol.for("componentType")]),e||t||o)throw M("MismatchedClosingTag",i);r=n.pop().parent}const l=t({},i);delete l[a.type],delete l[a.level],delete l[a.cursorTagStart],"opening"===i[a.type]?(s+1<e.length&&"closing"!==e[s+1][a.type]&&(l.children=[]),r.children.push(l),r=l):"self-closing"===i[a.type]&&r.children.push(l)}if(n.length>0)throw M("UnclosedTags",n);return i},E=t=>{t=`${t} in ${_()}`;const n=new Error(t);n.name="TemplateParseError";const o=Math.max(0,s-10),i=Math.min(e.length,r+50),a=e.slice(o,i),l=r-o;return n.context=R(l,a),n},M=(t,n)=>{t=`${t} in ${_()}`;const o=new Error(t);function i(t){const n=Math.max(0,t[a.cursorTagStart]-10),o=e.slice(n,n+50);return R(10,o)}return o.name="TemplateStructureError",Array.isArray(n)?o.context=n.map(e=>i(e)).join("\n"):o.context=i(n),o},R=(e,t)=>`\n${t}\n${" ".repeat(e)+"^"}\n`,_=()=>i||"Blits.Application";return(()=>{e=y(e);try{return g(b),I(l)}catch(t){throw"TemplateParseError"!=t.name&&"TemplateStructureError"!=t.name||(t.message=`${t.message}\n${t.context}`),t}})()})(n.template))),i.call(Object.create(o),r,s,l,u)};return r[Symbol.for("config")]=n,r[a.isComponent]=!0,r},Di=e("B",{Component:Pi,Application:e=>{const n={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};let o,i,r;e.hooks=e.hooks||{};let s=0,u=null;return e.hooks[a.destroy]=function(){document.removeEventListener("keydown",o),document.removeEventListener("keyup",i)},e.hooks[a.init]=function(){this.$announcer.toggle(l.get("announcer",!1));const e=t(t({},n),l.get("keymap",{})),c=l.get("inputThrottle",0);o=async t=>{const n=performance.now(),o=e[t.key]||e[t.keyCode]||t.key||t.keyCode,i=u===o;if(u=o,0===c||!0===t[a.internalEvent]||!1===i)return await d.call(this,t,o);n-s<c||(s=n,await d.call(this,t,o))};const d=async function(e,t){void 0!==this[a.inputEvents]&&void 0!==this[a.inputEvents].intercept&&(e=await this[a.inputEvents].intercept.call(this,e))instanceof KeyboardEvent==!1||(ei.input(t,e),clearTimeout(r),r=setTimeout(()=>{ei.hold=!0},l.get("holdTimeout",50)))};i=e=>{const t=Zo.get(e.code);void 0!==t&&"function"==typeof t&&(Zo.delete(e.code),t()),clearTimeout(r),ei.hold=!1},document.addEventListener("keydown",o),document.addEventListener("keyup",i),setTimeout(()=>ei.set(this))},Pi("App",e)},Launch:(e,t,n)=>{l.set(n),h=p("Blits"),async function(){let e;try{if(e=await ie(()=>o.import("./package-legacy-DKqwPJlj.js")),void 0!==e)return e.version}catch(t){return ao["@lightningjs/renderer"]}}().then(e=>{h.info("Blits Version ",so),h.info("Renderer Version ",e)}),uo.element=io,lo=ro(e,t,n)},Plugin:Ri}),Oi=e=>new Promise((t,n)=>{const o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(0===o.status||200===o.status?t(JSON.parse(o.responseText)):n(o.statusText))},o.open("GET",e),o.send(null)}),Ni={name:"language",plugin(e={}){let t={},n={};const o=te({language:"",loaded:0},l.get("reactivityMode"),!0),i=e=>{const n=0===Object.keys(t).length?"No translations loaded. Please load a file with translations or specify a translations object manually":e in t==!1&&`Language ${e} not available in the loaded translations`;n?(h.warn(n),o.language=e):r(e).then(()=>{o.language=e})},r=e=>new Promise(o=>{const i=t[e];"object"==typeof i?(n=i,o()):"string"==typeof i&&Oi(i).then(i=>{t[e]=i,n=i,o()}).catch(e=>{h.error(e)})}),s=e=>Oi(e).then(e=>{a(e)}).catch(e=>{h.error(e)}),a=e=>{t=e,r(o.language).then(()=>{o.loaded++})};return"file"in e?s(e.file).then(()=>{"language"in e&&i(e.language)}):"language"in e&&i(e.language),{translate(e){o.language,o.loaded;let t=[...arguments].slice(1);return 0===t.length?n&&n[e]||e:(1===t.length&&"object"==typeof t[0]&&(t=t.pop()),Object.keys(Array.isArray(t)?Object.assign({},t):t).reduce((e,n)=>e.replace(new RegExp("{\\s?"+n+"\\s?}","g"),t[n]),n&&n[e]||e))},get language(){return o.language},set(e){i(e)},translations(e){a(e)},load:e=>s(e)}}},Ui={name:"theme",plugin(e={}){let t={};const n=te({current:"default"},l.get("reactivityMode"),!0);let o={},i=null;return"themes"in e==!0?(o=e.themes,n.current=e.current||"default",i=e.base||"default"):o={default:e},{get(e,r){if(n.current,void 0!==t[e])return t[e];const s=((e,t,n)=>{const o=n.split(".");for(let i=0;i<o.length;i++){const n=o[i];if(null!==e&&n in e==1)e=e[n],t=null!==t&&n in t==1?t[n]:null;else{if(null===t||n in t!=1){e=void 0;break}e=t=t[n]}}return e})(o[n.current],o[i]||null,e);return void 0!==s?(t[e]=s,s):r},set(e){e in o?(t={},n.current=e):h.warn(`Theme ${e} not found`)}}}};new class{constructor(e){return e=e||{},this.forceCookies=e.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==e.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage,keys:this._getLocalStorageKeys}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies,keys:this._getCookieKeys}}_checkIfLocalStorageWorks(){if("undefined"==typeof localStorage)return!1;try{return localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test")&&(localStorage.removeItem("feature_test"),!0)}catch(e){return!1}}_getItemLocalStorage(e){return window.localStorage.getItem(e)}_setItemLocalStorage(e,t){return window.localStorage.setItem(e,t)}_removeItemLocalStorage(e){return window.localStorage.removeItem(e)}_clearLocalStorage(){return window.localStorage.clear()}_getLocalStorageKeys(){return Object.keys(window.localStorage)}_getItemCookie(e){var t=document.cookie.match(RegExp("(?:^|;\\s*)"+(e.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")+"=([^;]*)")));return t&&""===t[1]&&(t[1]=null),t?t[1]:null}_setItemCookie(e,t){var n=new Date,o=new Date(n.getTime()+15768e7);document.cookie=`${e}=${t}; expires=${o.toUTCString()};`}_removeItemCookie(e){document.cookie=`${e}=;Max-Age=-99999999;`}_clearCookies(){document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires=;Max-Age=-99999999")})}_getCookieKeys(){return document.cookie.split(";").map(e=>e.trim().split("=")[0])}};const Bi=e=>new URLSearchParams(window.location.search).get(e),Fi={sky:{test:()=>navigator.userAgent.indexOf("WPE Sky")>-1||"sky"===Bi("keymapping"),mapping:{Escape:"back",27:"back"}},webos:{test:()=>navigator.userAgent.indexOf("WebOS")>-1||"webos"===Bi("keymapping"),mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test:()=>navigator.userAgent.indexOf("Tizen")>-1||"tizen"===Bi("keymapping"),mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},ji=Di.Component("PortalItem",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=370,l[0].h=320,l[0].scale={transition:t.hasFocus?1.1:1},l[0].color=t.backgroundColor,l[0].effects=[{type:"radius",props:{radius:6}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].x=30,l[1].y=30,l[1].content=t.number,l[1].size=84,l[1].color=t.fontColor,l[1].__textnode=!0,a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].x=30,l[2].y=140,l[2].content=t.title,l[2].size=42,l[2].font="raleway",l[2].color=t.fontColor,l[2].letterspacing=2,l[2].__textnode=!0,a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].x=30,l[3].y=200,l[3].content=t.description,l[3].maxwidth=300,l[3].size=28,l[3].color=t.fontColor,l[3].lineheight=32,l[3].__textnode=!0,a[3].populate(l[3]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("scale",{transition:e.hasFocus?1.1:1})},function(e,t,n,o,i,r){t[0].set("color",e.backgroundColor)},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:6}}])},function(e,t,n,o,i,r){t[1].set("content",e.number)},function(e,t,n,o,i,r){t[1].set("color",e.fontColor)},function(e,t,n,o,i,r){t[2].set("content",e.title)},function(e,t,n,o,i,r){t[2].set("color",e.fontColor)},function(e,t,n,o,i,r){t[3].set("content",e.description)},function(e,t,n,o,i,r){t[3].set("color",e.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),zi=Di.Component("PortalRow",{components:{PortalItem:ji},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===v?m:t),l[1].alpha={transition:{value:t.itemOffset<240?1:0,duration:200}},a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},!0===v?m:t),l[2].content=t.title,l[2].x=60,l[2].__textnode=!0,a[2].populate(l[2]),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},!0===v?m:t),l[3].y=50,l[3].x=60,l[3].h=1,l[3].w=1800,l[3].color="0xe8d7f9ff",a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===v?m:t),l[4].y=100,l[4].x={transition:t.rowOffset},a[4].populate(l[4]),e=a[4],d[5]=[],u[5]=(s=[],a,u)=>{const d=r(s),x=new Set;let w=d.length;const S={}||{};g=S.from||0,y="to"in S?S.to:d.length;for(;w--;){const e=d[w];w<y&&w>=g&&x.add(""+e.id)}let T=u.length;for(;T--;)if(!1===x.has(u[T])){const e=u[T];a[5][e]&&a[5][e].destroy(),a[5][e]=null,delete a[5][e],a[6][e]&&a[6][e].destroy(),a[6][e]=null,delete a[6][e]}u.length=0;const k=d.length,C=[];for(let A=0;A<k;A++){if(A<g||A>=y)continue;const s=Object.create(t);if(e=a[4],s.item=d[A],s.index=A,s.key=""+s.item.id,u.push(s.key),b[5]=n.components&&n.components.PortalItem||o.PortalItem,void 0===a[5]&&(a[5]={}),l[5]={},void 0===a[5][s.key]&&(a[5][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[5].x={transition:{value:s.itemOffset+430*s.index,delay:s.index%4*50,duration:500}},l[5].title=s.item.title,l[5].description=s.item.description,l[5].id=s.item.id,l[5].index=s.index,l[5].ref="item"+s.index,p[5]=[],void 0!==b[5])for(let e in b[5][Symbol.for("config")].props)delete l[5][b[5][Symbol.for("config")].props[e]],p[5].push(b[5][Symbol.for("config")].props[e]);if(void 0===a[5][s.key].nodeId&&a[5][s.key].populate(l[5]),void 0===a[6]&&(a[6]={}),e=a[5][s.key],c[6]={},void 0===a[6][s.key]){if(f={transition:{value:s.itemOffset+430*s.index,delay:s.index%4*50,duration:500}},!0===Array.isArray(f)&&(f=r(f).slice(0)),c[6].x=f,c[6].title=s.item.title,c[6].description=s.item.description,c[6].id=s.item.id,c[6].index=s.index,f="item"+s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[6].ref=f,h=c[6].is||"PortalItem",o[6],"string"==typeof h){if(o[6]=n.components&&n.components[h]||o[h],!o[6])throw new Error('Component "PortalItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[6]=h);a[6][s.key]=o[6].call(null,{props:c[6]},a[5][s.key],t),a[6][s.key][Symbol.for("slots")][0]?(e=a[6][s.key][Symbol.for("slots")][0],m=a[6][s.key],v=!0):e=a[6][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==p&&void 0!==p[5]&&-1!==p[5].indexOf("ref")||a[5][s.key].set("ref","item"+s.index)};i(x,null),C.push(x),t[Symbol.for("effects")].push(x),a[6][s.key][Symbol.for("props")].ref="item"+s.index}return C};let x=()=>{u[5](t.items,a,d[5])};t[Symbol.for("effects")].push(x),i(x,["items"]);let w=()=>{t.itemOffset;for(let e=0;e<t.items.length;e++){if(e<g||e>=y)continue;const n={};n.index=e,n.item=t.items[e],n.key=n.item.id,void 0!==p&&void 0!==p[5]&&-1!==p[5].indexOf("x")||a[5][n.key].set("x",{transition:{value:t.itemOffset+430*n.index,delay:n.index%4*50,duration:500}})}};t[Symbol.for("effects")].push(w),i(w);let S=()=>{t.itemOffset;for(let e=0;e<t.items.length;e++){if(e<g||e>=y)continue;const n={};n.index=e,n.item=t.items[e],n.key=n.item.id,a[6][n.key][Symbol.for("props")].x={transition:{value:t.itemOffset+430*n.index,delay:n.index%4*50,duration:500}}}};return t[Symbol.for("effects")].push(S),i(S),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,d[5].length=0,u[5]=null,b[5]=null,c[6]=null,o[6]=null,x=null,w=null,S=null,b.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("alpha",{transition:{value:e.itemOffset<240?1:0,duration:200}})},function(e,t,n,o,i,r){t[4].set("x",{transition:e.rowOffset})}],context:{}},props:["title","items"],state:()=>({focused:0,rowOffset:60,itemOffset:240}),hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(e){const t=this.$select(`item${e}`);t&&t.$focus&&(t.$focus(),e<1?this.rowOffset=60:e>this.items.length-2?this.rowOffset=60-430*(this.items.length-2)+430:this.rowOffset=60-430*e+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),$i=Di.Component("SourceInfo",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].x=1860,l[0].y={transition:{value:1060+t.offsetY,delay:1e3,duration:300,easing:"ease-out"}},l[0].alpha={transition:{value:t.alpha,delay:1e3,duration:300,easing:"ease-out"}},l[0].w=480,l[0].h=100,l[0].mount=1,l[0].color="{top: '0x000000dd', bottom: '0x000000ff'}",l[0].effects=[{type:"radius",props:{radius:10}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].y=18,l[1].x=20,l[1].size=26,l[1].maxwidth=440,l[1].align="center",l[1].lineheight=32,l[1].content='Press "U" to check out the source code of this example on GitHub',l[1].__textnode=!0,a[1].populate(l[1]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("y",{transition:{value:1060+e.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(e,t,n,o,i,r){t[0].set("alpha",{transition:{value:e.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state:()=>({offsetY:15,alpha:0}),hooks:{ready(){this.offsetY=0,this.alpha=1}}}),Vi="1.16.1",Hi=Di.Component("Portal",{components:{PortalRow:zi,SourceInfo:$i},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),l[0].w=1920,l[0].h=1080,l[0].color="{top: '0x44037aff', bottom: '0x240244ff'}",a[0].populate(l[0]),!0===f&&(m-=1),g[1]=n.components&&n.components.PortalRow||o.PortalRow,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].mount="{y: 0.5}",l[1].h=500,l[1].y={transition:420*-t.rowFocused+550},l[1].title="Demos",l[1].items=t.demo,l[1].ref="row0",c[1]=[],void 0!==g[1])for(let y in g[1][Symbol.for("config")].props)delete l[1][g[1][Symbol.for("config")].props[y]],c[1].push(g[1][Symbol.for("config")].props[y]);if(a[1].populate(l[1]),!0===f&&(m-=1),e=a[1],u[2]={},u[2].mount="{y: 0.5}",u[2].h=500,p={transition:420*-t.rowFocused+550},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[2].y=p,u[2].title="Demos",u[2].items=t.demo,u[2].ref="row0",d=u[2].is||"PortalRow",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "PortalRow" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);if(a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],h=a[2],f=!0):e=a[2][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[3]=n.components&&n.components.PortalRow||o.PortalRow,e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===f?h:t),l[3].mount="{y: 0.5}",l[3].h=500,l[3].y={transition:420*-t.rowFocused+1100},l[3].title="Examples and tests",l[3].items=t.example,l[3].ref="row1",c[3]=[],void 0!==g[3])for(let y in g[3][Symbol.for("config")].props)delete l[3][g[3][Symbol.for("config")].props[y]],c[3].push(g[3][Symbol.for("config")].props[y]);if(a[3].populate(l[3]),!0===f&&(m-=1),e=a[3],u[4]={},u[4].mount="{y: 0.5}",u[4].h=500,p={transition:420*-t.rowFocused+1100},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[4].y=p,u[4].title="Examples and tests",u[4].items=t.example,u[4].ref="row1",d=u[4].is||"PortalRow",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "PortalRow" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);if(a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],h=a[4],f=!0):e=a[4][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[5]=n.components&&n.components.PortalRow||o.PortalRow,e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===f?h:t),l[5].mount="{y: 0.5}",l[5].h=500,l[5].y={transition:420*-t.rowFocused+1650},l[5].title="Benchmarks and stress tests",l[5].items=t.benchmark,l[5].ref="row2",c[5]=[],void 0!==g[5])for(let y in g[5][Symbol.for("config")].props)delete l[5][g[5][Symbol.for("config")].props[y]],c[5].push(g[5][Symbol.for("config")].props[y]);if(a[5].populate(l[5]),!0===f&&(m-=1),e=a[5],u[6]={},u[6].mount="{y: 0.5}",u[6].h=500,p={transition:420*-t.rowFocused+1650},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[6].y=p,u[6].title="Benchmarks and stress tests",u[6].items=t.benchmark,u[6].ref="row2",d=u[6].is||"PortalRow",o[6],"string"==typeof d){if(o[6]=n.components&&n.components[d]||o[d],!o[6])throw new Error('Component "PortalRow" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[6]=d);return a[6]=o[6].call(null,{props:u[6]},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],h=a[6],f=!0):e=a[6][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},!0===f?h:t),l[7].w=1920,l[7].h=200,l[7].color="0x44037aff",a[7].populate(l[7]),!0===f&&(m-=1),e=a[7],l[8]={},a[8]=this.element({parent:e||"root"},!0===f?h:t),l[8].w=1920,l[8].h=70,l[8].y=200,l[8].color="{top: '0x44037aff'}",a[8].populate(l[8]),!0===f&&(m-=1),e=a[7],l[9]={},a[9]=this.element({parent:e||"root"},!0===f?h:t),l[9].y={transition:{value:80-t.logoOffset,duration:400}},a[9].populate(l[9]),!0===f&&(m-=1),e=a[9],l[10]={},a[10]=this.element({parent:e||"root"},!0===f?h:t),l[10].src="assets/blits-logo-full.png",l[10].w=200,l[10].h=112,l[10].x=60,a[10].populate(l[10]),!0===f&&(m-=1),e=a[9],l[11]={},a[11]=this.element({parent:e||"root"},!0===f?h:t),l[11].w=2,l[11].h=120,l[11].y="-10",l[11].color="0xffffff80",l[11].x=300,a[11].populate(l[11]),!0===f&&(m-=1),e=a[9],l[12]={},a[12]=this.element({parent:e||"root"},!0===f?h:t),l[12].x=320,l[12].y=16,a[12].populate(l[12]),!0===f&&(m-=1),e=a[12],l[13]={},a[13]=this.element({parent:e||"root"},!0===f?h:t),l[13].y=0,l[13].size=36,l[13].content="Example App",l[13].__textnode=!0,a[13].populate(l[13]),!0===f&&(m-=1),e=a[12],l[14]={},a[14]=this.element({parent:e||"root"},!0===f?h:t),l[14].y=50,l[14].size=24,l[14].content="v"+t.version,l[14].__textnode=!0,a[14].populate(l[14]),!0===f&&(m-=1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[1]=null,u[2]=null,o[2]=null,g[3]=null,u[4]=null,o[4]=null,g[5]=null,u[6]=null,o[6]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[1]&&-1!==skips[1].indexOf("y")||t[1].set("y",{transition:420*-e.rowFocused+550})},function(e,t,n,o,i,r){t[2][Symbol.for("props")].y={transition:420*-e.rowFocused+550}},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[3]&&-1!==skips[3].indexOf("y")||t[3].set("y",{transition:420*-e.rowFocused+1100})},function(e,t,n,o,i,r){t[4][Symbol.for("props")].y={transition:420*-e.rowFocused+1100}},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[5]&&-1!==skips[5].indexOf("y")||t[5].set("y",{transition:420*-e.rowFocused+1650})},function(e,t,n,o,i,r){t[6][Symbol.for("props")].y={transition:420*-e.rowFocused+1650}},function(e,t,n,o,i,r){t[9].set("y",{transition:{value:80-e.logoOffset,duration:400}})}],context:{}},state:()=>({version:Vi,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'},{title:"Announcer",id:"examples/announcer",description:'Using the built-in "Announcer" plugin'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}),hooks:{ready(){this.logoOffset=0},focus(){this.$trigger("rowFocused")}},watch:{rowFocused(e){const t=this.$select(`row${e}`);t&&t.$focus&&t.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),Gi=Di.Component("Letter",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=t.w,l[1].h={transition:{value:410+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},l[1].color="0xe6e6e6ff",a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=t.w,l[2].h=280,l[2].src=t.image,l[2].y={transition:{value:400+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=t.w,l[3].color="0xe6e6e6ff",l[3].h={transition:{value:500-t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},l[3].y={transition:{value:660+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},a[3].populate(l[3]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("h",{transition:{value:410+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,o,i,r){t[2].set("src",e.image)},function(e,t,n,o,i,r){t[2].set("y",{transition:{value:400+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,o,i,r){t[3].set("h",{transition:{value:500-e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,o,i,r){t[3].set("y",{transition:{value:660+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return this.letter,`assets/${this.letter}.png`}},state(){return{offset:"up"===this.direction?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),qi=Di.Component("Intro",{components:{Letter:Gi},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),l[0].w=1920,l[0].h=1080,l[0].src="assets/background.jpg",a[0].populate(l[0]),!0===h&&(f-=1),m[1]=n.components&&n.components.Letter||o.Letter,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].letter="l",l[1].w=294,c[1]=[],void 0!==m[1])for(let g in m[1][Symbol.for("config")].props)delete l[1][m[1][Symbol.for("config")].props[g]],c[1].push(m[1][Symbol.for("config")].props[g]);if(a[1].populate(l[1]),!0===h&&(f-=1),e=a[1],u[2]={},u[2].letter="l",u[2].w=294,d=u[2].is||"Letter",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);if(a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],p=a[2],h=!0):e=a[2][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[3]=n.components&&n.components.Letter||o.Letter,e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].letter="i-1",l[3].w=128,l[3].x=294,l[3].direction="up",l[3].delay=50,c[3]=[],void 0!==m[3])for(let g in m[3][Symbol.for("config")].props)delete l[3][m[3][Symbol.for("config")].props[g]],c[3].push(m[3][Symbol.for("config")].props[g]);if(a[3].populate(l[3]),!0===h&&(f-=1),e=a[3],u[4]={},u[4].letter="i-1",u[4].w=128,u[4].x=294,u[4].direction="up",u[4].delay=50,d=u[4].is||"Letter",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);if(a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],p=a[4],h=!0):e=a[4][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[5]=n.components&&n.components.Letter||o.Letter,e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===h?p:t),l[5].letter="g-1",l[5].w=205,l[5].x=422,l[5].delay=100,c[5]=[],void 0!==m[5])for(let g in m[5][Symbol.for("config")].props)delete l[5][m[5][Symbol.for("config")].props[g]],c[5].push(m[5][Symbol.for("config")].props[g]);if(a[5].populate(l[5]),!0===h&&(f-=1),e=a[5],u[6]={},u[6].letter="g-1",u[6].w=205,u[6].x=422,u[6].delay=100,d=u[6].is||"Letter",o[6],"string"==typeof d){if(o[6]=n.components&&n.components[d]||o[d],!o[6])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[6]=d);if(a[6]=o[6].call(null,{props:u[6]},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],p=a[6],h=!0):e=a[6][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[7]=n.components&&n.components.Letter||o.Letter,e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},!0===h?p:t),l[7].letter="h",l[7].w=224,l[7].x=627,l[7].direction="up",l[7].delay=150,c[7]=[],void 0!==m[7])for(let g in m[7][Symbol.for("config")].props)delete l[7][m[7][Symbol.for("config")].props[g]],c[7].push(m[7][Symbol.for("config")].props[g]);if(a[7].populate(l[7]),!0===h&&(f-=1),e=a[7],u[8]={},u[8].letter="h",u[8].w=224,u[8].x=627,u[8].direction="up",u[8].delay=150,d=u[8].is||"Letter",o[8],"string"==typeof d){if(o[8]=n.components&&n.components[d]||o[d],!o[8])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[8]=d);if(a[8]=o[8].call(null,{props:u[8]},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],p=a[8],h=!0):e=a[8][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[9]=n.components&&n.components.Letter||o.Letter,e=a[0],l[9]={},a[9]=this.element({parent:e||"root"},!0===h?p:t),l[9].letter="t",l[9].w=190,l[9].x=851,l[9].delay=200,c[9]=[],void 0!==m[9])for(let g in m[9][Symbol.for("config")].props)delete l[9][m[9][Symbol.for("config")].props[g]],c[9].push(m[9][Symbol.for("config")].props[g]);if(a[9].populate(l[9]),!0===h&&(f-=1),e=a[9],u[10]={},u[10].letter="t",u[10].w=190,u[10].x=851,u[10].delay=200,d=u[10].is||"Letter",o[10],"string"==typeof d){if(o[10]=n.components&&n.components[d]||o[d],!o[10])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[10]=d);if(a[10]=o[10].call(null,{props:u[10]},a[9],t),a[10][Symbol.for("slots")][0]?(e=a[10][Symbol.for("slots")][0],p=a[10],h=!0):e=a[10][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[11]=n.components&&n.components.Letter||o.Letter,e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},!0===h?p:t),l[11].letter="n-1",l[11].w=221,l[11].x=1041,l[11].direction="up",l[11].delay=250,c[11]=[],void 0!==m[11])for(let g in m[11][Symbol.for("config")].props)delete l[11][m[11][Symbol.for("config")].props[g]],c[11].push(m[11][Symbol.for("config")].props[g]);if(a[11].populate(l[11]),!0===h&&(f-=1),e=a[11],u[12]={},u[12].letter="n-1",u[12].w=221,u[12].x=1041,u[12].direction="up",u[12].delay=250,d=u[12].is||"Letter",o[12],"string"==typeof d){if(o[12]=n.components&&n.components[d]||o[d],!o[12])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[12]=d);if(a[12]=o[12].call(null,{props:u[12]},a[11],t),a[12][Symbol.for("slots")][0]?(e=a[12][Symbol.for("slots")][0],p=a[12],h=!0):e=a[12][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[13]=n.components&&n.components.Letter||o.Letter,e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},!0===h?p:t),l[13].letter="i-2",l[13].w=115,l[13].x=1262,l[13].delay=300,c[13]=[],void 0!==m[13])for(let g in m[13][Symbol.for("config")].props)delete l[13][m[13][Symbol.for("config")].props[g]],c[13].push(m[13][Symbol.for("config")].props[g]);if(a[13].populate(l[13]),!0===h&&(f-=1),e=a[13],u[14]={},u[14].letter="i-2",u[14].w=115,u[14].x=1262,u[14].delay=300,d=u[14].is||"Letter",o[14],"string"==typeof d){if(o[14]=n.components&&n.components[d]||o[d],!o[14])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[14]=d);if(a[14]=o[14].call(null,{props:u[14]},a[13],t),a[14][Symbol.for("slots")][0]?(e=a[14][Symbol.for("slots")][0],p=a[14],h=!0):e=a[14][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[15]=n.components&&n.components.Letter||o.Letter,e=a[0],l[15]={},a[15]=this.element({parent:e||"root"},!0===h?p:t),l[15].letter="n-2",l[15].w=219,l[15].x=1377,l[15].direction="up",l[15].delay=350,c[15]=[],void 0!==m[15])for(let g in m[15][Symbol.for("config")].props)delete l[15][m[15][Symbol.for("config")].props[g]],c[15].push(m[15][Symbol.for("config")].props[g]);if(a[15].populate(l[15]),!0===h&&(f-=1),e=a[15],u[16]={},u[16].letter="n-2",u[16].w=219,u[16].x=1377,u[16].direction="up",u[16].delay=350,d=u[16].is||"Letter",o[16],"string"==typeof d){if(o[16]=n.components&&n.components[d]||o[d],!o[16])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[16]=d);if(a[16]=o[16].call(null,{props:u[16]},a[15],t),a[16][Symbol.for("slots")][0]?(e=a[16][Symbol.for("slots")][0],p=a[16],h=!0):e=a[16][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[17]=n.components&&n.components.Letter||o.Letter,e=a[0],l[17]={},a[17]=this.element({parent:e||"root"},!0===h?p:t),l[17].letter="g-2",l[17].w=324,l[17].x=1596,l[17].direction="up",l[17].delay=400,c[17]=[],void 0!==m[17])for(let g in m[17][Symbol.for("config")].props)delete l[17][m[17][Symbol.for("config")].props[g]],c[17].push(m[17][Symbol.for("config")].props[g]);if(a[17].populate(l[17]),!0===h&&(f-=1),e=a[17],u[18]={},u[18].letter="g-2",u[18].w=324,u[18].x=1596,u[18].direction="up",u[18].delay=400,d=u[18].is||"Letter",o[18],"string"==typeof d){if(o[18]=n.components&&n.components[d]||o[d],!o[18])throw new Error('Component "Letter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[18]=d);return a[18]=o[18].call(null,{props:u[18]},a[17],t),a[18][Symbol.for("slots")][0]?(e=a[18][Symbol.for("slots")][0],p=a[18],h=!0):e=a[18][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[1]=null,u[2]=null,o[2]=null,m[3]=null,u[4]=null,o[4]=null,m[5]=null,u[6]=null,o[6]=null,m[7]=null,u[8]=null,o[8]=null,m[9]=null,u[10]=null,o[10]=null,m[11]=null,u[12]=null,o[12]=null,m[13]=null,u[14]=null,o[14]=null,m[15]=null,u[16]=null,o[16]=null,m[17]=null,u[18]=null,o[18]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[],context:{}}}),Wi=Di.Component("Toggle",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),l[0].w=100,l[0].h=50,l[0].y=5,l[0].color=t.bgColor,l[0].effects=[{type:"radius",props:{radius:25}}],a[0].populate(l[0]),!0===f&&(m-=1),g[1]=n.components&&n.components.Circle||o.Circle,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].x={transition:t.on?0:50},l[1].size=50,c[1]=[],void 0!==g[1])for(let y in g[1][Symbol.for("config")].props)delete l[1][g[1][Symbol.for("config")].props[y]],c[1].push(g[1][Symbol.for("config")].props[y]);if(a[1].populate(l[1]),!0===f&&(m-=1),e=a[1],u[2]={},p={transition:t.on?0:50},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[2].x=p,u[2].size=50,p=t.primaryColor,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[2].color=p,d=u[2].is||"Circle",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "Circle" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);return a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],h=a[2],f=!0):e=a[2][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[1]=null,u[2]=null,o[2]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("color",e.bgColor)},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:25}}])},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[1]&&-1!==skips[1].indexOf("x")||t[1].set("x",{transition:e.on?0:50})},function(e,t,n,o,i,r){t[2][Symbol.for("props")].x={transition:e.on?0:50}},function(e,t,n,o,i,r){t[2][Symbol.for("props")].color=e.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),Ki=Di.Component("Bar",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w={value:t.w,duration:t.duration},l[0].h={value:t.h,duration:t.duration},l[0].color=t.bgColor,l[0].x=t.index*(t.w+t.w/4),l[0].effects=[{type:"radius",props:{radius:10}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=t.w,l[1].y={transition:{value:t.h-t.innerH,duration:t.duration}},l[1].h={transition:{value:t.innerH,duration:t.duration}},l[1].color=t.primaryColor,l[1].effects=[{type:"radius",props:{radius:10}}],a[1].populate(l[1]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("w",{value:e.w,duration:e.duration})},function(e,t,n,o,i,r){t[0].set("h",{value:e.h,duration:e.duration})},function(e,t,n,o,i,r){t[0].set("color",e.bgColor)},function(e,t,n,o,i,r){t[0].set("x",e.index*(e.w+e.w/4))},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:10}}])},function(e,t,n,o,i,r){t[1].set("w",e.w)},function(e,t,n,o,i,r){t[1].set("y",{transition:{value:e.h-e.innerH,duration:e.duration}})},function(e,t,n,o,i,r){t[1].set("h",{transition:{value:e.innerH,duration:e.duration}})},function(e,t,n,o,i,r){t[1].set("color",e.primaryColor)},function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state:()=>({h:200,innerH:0,duration:400}),hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size,"large"===this.size?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),Xi=Di.Component("Theming",{components:{Bar:Ki,Toggle:Wi},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),l[0].w=1920,l[0].h=1080,l[0].color={transition:t.$colors.get("bg")},a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].y=1020,l[1].x=1160,l[1].size=28,l[1].color=t.$colors.get("color4"),l[1].content='Use "up", "down", "left" and "right" to change the appearance',l[1].__textnode=!0,a[1].populate(l[1]),!0===f&&(m-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),l[2].x={transition:(1920-t.$sizes.get("w"))/2},l[2].y={transition:(1080-t.$sizes.get("h"))/2},a[2].populate(l[2]),!0===f&&(m-=1),e=a[2],l[3]={},a[3]=this.element({parent:e||"root"},!0===f?h:t),l[3].x="-250",l[3].y="-100",l[3].src="assets/shadow.png",l[3].w=1e3,l[3].h=900,l[3].alpha=.5,a[3].populate(l[3]),!0===f&&(m-=1),e=a[2],l[4]={},a[4]=this.element({parent:e||"root"},!0===f?h:t),l[4].w={transition:t.$sizes.get("w")},l[4].h={transition:t.$sizes.get("h")},l[4].color=t.$colors.get("color1"),l[4].effects=[{type:"radius",props:{radius:t.radius}}],a[4].populate(l[4]),!0===f&&(m-=1),e=a[4],l[5]={},a[5]=this.element({parent:e||"root"},!0===f?h:t),l[5].w={transition:t.$sizes.get("w")},l[5].h=100,l[5].color=t.$colors.get("color2"),l[5].effects=[{type:"radius",props:{radius:t.radius}}],a[5].populate(l[5]),!0===f&&(m-=1),e=a[4],l[6]={},a[6]=this.element({parent:e||"root"},!0===f?h:t),l[6].w={transition:t.$sizes.get("w")},l[6].h=80,l[6].y=20,l[6].color=t.$colors.get("color2"),a[6].populate(l[6]),!0===f&&(m-=1),e=a[4],l[7]={},a[7]=this.element({parent:e||"root"},!0===f?h:t),l[7].content=t.text,l[7].color=t.$colors.get("color3"),l[7].size=28,l[7].x=20,l[7].y=14,l[7].__textnode=!0,a[7].populate(l[7]),!0===f&&(m-=1),g[8]=n.components&&n.components.Toggle||o.Toggle,e=a[4],l[8]={},a[8]=this.element({parent:e||"root"},!0===f?h:t),l[8].x={transition:t.$sizes.get("w")-120},l[8].on="dark"===t.mode,l[8].bgColor=t.$colors.get("color1"),l[8].primaryColor="#22c55e",c[8]=[],void 0!==g[8])for(let y in g[8][Symbol.for("config")].props)delete l[8][g[8][Symbol.for("config")].props[y]],c[8].push(g[8][Symbol.for("config")].props[y]);if(a[8].populate(l[8]),!0===f&&(m-=1),e=a[8],u[9]={},p={transition:t.$sizes.get("w")-120},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[9].x=p,p="dark"===t.mode,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[9].on=p,p=t.$colors.get("color1"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[9].bgColor=p,u[9].primaryColor="#22c55e",d=u[9].is||"Toggle",o[9],"string"==typeof d){if(o[9]=n.components&&n.components[d]||o[d],!o[9])throw new Error('Component "Toggle" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[9]=d);if(a[9]=o[9].call(null,{props:u[9]},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],h=a[9],f=!0):e=a[9][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[2],l[10]={},a[10]=this.element({parent:e||"root"},!0===f?h:t),l[10].w=200,l[10].h={transition:t.$sizes.get("block1.h")},l[10].x=25,l[10].y=140,l[10].color=t.$colors.get("color2"),l[10].effects=[{type:"radius",props:{radius:t.radius/2}}],a[10].populate(l[10]),!0===f&&(m-=1),e=a[2],l[11]={},a[11]=this.element({parent:e||"root"},!0===f?h:t),l[11].w={transition:t.$sizes.get("block2.w")},l[11].h=t.$sizes.get("block2.h"),l[11].x=270,l[11].y={transition:t.$sizes.get("block2.y")},l[11].color=t.$colors.get("color2"),l[11].effects=[{type:"radius",props:{radius:t.radius/2}}],a[11].populate(l[11]),!0===f&&(m-=1),e=a[2],l[12]={},a[12]=this.element({parent:e||"root"},!0===f?h:t),l[12].x={transition:t.$sizes.get("graph.x")},l[12].y={transition:t.$sizes.get("graph.y")},l[12].w=t.$sizes.get("graph.w"),l[12].h=t.$sizes.get("graph.h"),l[12].color="0x00000000",a[12].populate(l[12]),!0===f&&(m-=1),e=a[12],l[13]={},a[13]=this.element({parent:e||"root"},!0===f?h:t),l[13].x={transition:t.$sizes.get("graph.offset")},l[13].y={transition:t.$sizes.get("graph.offset")},a[13].populate(l[13]),!0===f&&(m-=1),g[14]=n.components&&n.components.Bar||o.Bar,e=a[13],l[14]={},a[14]=this.element({parent:e||"root"},!0===f?h:t),l[14].bgColor=t.$colors.get("color2"),l[14].primaryColor=t.$colors.get("color4"),l[14].size=t.$sizes.get("graph.size"),l[14].height=100,l[14].index=0,c[14]=[],void 0!==g[14])for(let y in g[14][Symbol.for("config")].props)delete l[14][g[14][Symbol.for("config")].props[y]],c[14].push(g[14][Symbol.for("config")].props[y]);if(a[14].populate(l[14]),!0===f&&(m-=1),e=a[14],u[15]={},p=t.$colors.get("color2"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[15].bgColor=p,p=t.$colors.get("color4"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[15].primaryColor=p,p=t.$sizes.get("graph.size"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[15].size=p,u[15].height=100,u[15].index=0,d=u[15].is||"Bar",o[15],"string"==typeof d){if(o[15]=n.components&&n.components[d]||o[d],!o[15])throw new Error('Component "Bar" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[15]=d);if(a[15]=o[15].call(null,{props:u[15]},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],h=a[15],f=!0):e=a[15][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[16]=n.components&&n.components.Bar||o.Bar,e=a[13],l[16]={},a[16]=this.element({parent:e||"root"},!0===f?h:t),l[16].bgColor=t.$colors.get("color2"),l[16].primaryColor=t.$colors.get("color4"),l[16].size=t.$sizes.get("graph.size"),l[16].height=140,l[16].index=1,c[16]=[],void 0!==g[16])for(let y in g[16][Symbol.for("config")].props)delete l[16][g[16][Symbol.for("config")].props[y]],c[16].push(g[16][Symbol.for("config")].props[y]);if(a[16].populate(l[16]),!0===f&&(m-=1),e=a[16],u[17]={},p=t.$colors.get("color2"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[17].bgColor=p,p=t.$colors.get("color4"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[17].primaryColor=p,p=t.$sizes.get("graph.size"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[17].size=p,u[17].height=140,u[17].index=1,d=u[17].is||"Bar",o[17],"string"==typeof d){if(o[17]=n.components&&n.components[d]||o[d],!o[17])throw new Error('Component "Bar" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[17]=d);if(a[17]=o[17].call(null,{props:u[17]},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],h=a[17],f=!0):e=a[17][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[18]=n.components&&n.components.Bar||o.Bar,e=a[13],l[18]={},a[18]=this.element({parent:e||"root"},!0===f?h:t),l[18].bgColor=t.$colors.get("color2"),l[18].primaryColor=t.$colors.get("color4"),l[18].size=t.$sizes.get("graph.size"),l[18].height=170,l[18].index=2,c[18]=[],void 0!==g[18])for(let y in g[18][Symbol.for("config")].props)delete l[18][g[18][Symbol.for("config")].props[y]],c[18].push(g[18][Symbol.for("config")].props[y]);if(a[18].populate(l[18]),!0===f&&(m-=1),e=a[18],u[19]={},p=t.$colors.get("color2"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[19].bgColor=p,p=t.$colors.get("color4"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[19].primaryColor=p,p=t.$sizes.get("graph.size"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[19].size=p,u[19].height=170,u[19].index=2,d=u[19].is||"Bar",o[19],"string"==typeof d){if(o[19]=n.components&&n.components[d]||o[d],!o[19])throw new Error('Component "Bar" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[19]=d);if(a[19]=o[19].call(null,{props:u[19]},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],h=a[19],f=!0):e=a[19][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[20]=n.components&&n.components.Bar||o.Bar,e=a[13],l[20]={},a[20]=this.element({parent:e||"root"},!0===f?h:t),l[20].bgColor=t.$colors.get("color2"),l[20].primaryColor=t.$colors.get("color4"),l[20].size=t.$sizes.get("graph.size"),l[20].height=150,l[20].index=3,c[20]=[],void 0!==g[20])for(let y in g[20][Symbol.for("config")].props)delete l[20][g[20][Symbol.for("config")].props[y]],c[20].push(g[20][Symbol.for("config")].props[y]);if(a[20].populate(l[20]),!0===f&&(m-=1),e=a[20],u[21]={},p=t.$colors.get("color2"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[21].bgColor=p,p=t.$colors.get("color4"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[21].primaryColor=p,p=t.$sizes.get("graph.size"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[21].size=p,u[21].height=150,u[21].index=3,d=u[21].is||"Bar",o[21],"string"==typeof d){if(o[21]=n.components&&n.components[d]||o[d],!o[21])throw new Error('Component "Bar" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[21]=d);if(a[21]=o[21].call(null,{props:u[21]},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],h=a[21],f=!0):e=a[21][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[22]=n.components&&n.components.Bar||o.Bar,e=a[13],l[22]={},a[22]=this.element({parent:e||"root"},!0===f?h:t),l[22].bgColor=t.$colors.get("color2"),l[22].primaryColor=t.$colors.get("color4"),l[22].size=t.$sizes.get("graph.size"),l[22].height=90,l[22].index=4,c[22]=[],void 0!==g[22])for(let y in g[22][Symbol.for("config")].props)delete l[22][g[22][Symbol.for("config")].props[y]],c[22].push(g[22][Symbol.for("config")].props[y]);if(a[22].populate(l[22]),!0===f&&(m-=1),e=a[22],u[23]={},p=t.$colors.get("color2"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[23].bgColor=p,p=t.$colors.get("color4"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[23].primaryColor=p,p=t.$sizes.get("graph.size"),!0===Array.isArray(p)&&(p=r(p).slice(0)),u[23].size=p,u[23].height=90,u[23].index=4,d=u[23].is||"Bar",o[23],"string"==typeof d){if(o[23]=n.components&&n.components[d]||o[d],!o[23])throw new Error('Component "Bar" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[23]=d);return a[23]=o[23].call(null,{props:u[23]},a[22],t),a[23][Symbol.for("slots")][0]?(e=a[23][Symbol.for("slots")][0],h=a[23],f=!0):e=a[23][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[8]=null,u[9]=null,o[9]=null,g[14]=null,u[15]=null,o[15]=null,g[16]=null,u[17]=null,o[17]=null,g[18]=null,u[19]=null,o[19]=null,g[20]=null,u[21]=null,o[21]=null,g[22]=null,u[23]=null,o[23]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("color",{transition:e.$colors.get("bg")})},function(e,t,n,o,i,r){t[1].set("color",e.$colors.get("color4"))},function(e,t,n,o,i,r){t[2].set("x",{transition:(1920-e.$sizes.get("w"))/2})},function(e,t,n,o,i,r){t[2].set("y",{transition:(1080-e.$sizes.get("h"))/2})},function(e,t,n,o,i,r){t[4].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,o,i,r){t[4].set("h",{transition:e.$sizes.get("h")})},function(e,t,n,o,i,r){t[4].set("color",e.$colors.get("color1"))},function(e,t,n,o,i,r){t[4].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,o,i,r){t[5].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,o,i,r){t[5].set("color",e.$colors.get("color2"))},function(e,t,n,o,i,r){t[5].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,o,i,r){t[6].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,o,i,r){t[6].set("color",e.$colors.get("color2"))},function(e,t,n,o,i,r){t[7].set("content",e.text)},function(e,t,n,o,i,r){t[7].set("color",e.$colors.get("color3"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("x")||t[8].set("x",{transition:e.$sizes.get("w")-120})},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("on")||t[8].set("on","dark"===e.mode)},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("bgColor")||t[8].set("bgColor",e.$colors.get("color1"))},function(e,t,n,o,i,r){t[9][Symbol.for("props")].x={transition:e.$sizes.get("w")-120}},function(e,t,n,o,i,r){t[9][Symbol.for("props")].on="dark"===e.mode},function(e,t,n,o,i,r){t[9][Symbol.for("props")].bgColor=e.$colors.get("color1")},function(e,t,n,o,i,r){t[10].set("h",{transition:e.$sizes.get("block1.h")})},function(e,t,n,o,i,r){t[10].set("color",e.$colors.get("color2"))},function(e,t,n,o,i,r){t[10].set("effects",[{type:"radius",props:{radius:e.radius/2}}])},function(e,t,n,o,i,r){t[11].set("w",{transition:e.$sizes.get("block2.w")})},function(e,t,n,o,i,r){t[11].set("h",e.$sizes.get("block2.h"))},function(e,t,n,o,i,r){t[11].set("y",{transition:e.$sizes.get("block2.y")})},function(e,t,n,o,i,r){t[11].set("color",e.$colors.get("color2"))},function(e,t,n,o,i,r){t[11].set("effects",[{type:"radius",props:{radius:e.radius/2}}])},function(e,t,n,o,i,r){t[12].set("x",{transition:e.$sizes.get("graph.x")})},function(e,t,n,o,i,r){t[12].set("y",{transition:e.$sizes.get("graph.y")})},function(e,t,n,o,i,r){t[12].set("w",e.$sizes.get("graph.w"))},function(e,t,n,o,i,r){t[12].set("h",e.$sizes.get("graph.h"))},function(e,t,n,o,i,r){t[13].set("x",{transition:e.$sizes.get("graph.offset")})},function(e,t,n,o,i,r){t[13].set("y",{transition:e.$sizes.get("graph.offset")})},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[14]&&-1!==skips[14].indexOf("bgColor")||t[14].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[14]&&-1!==skips[14].indexOf("primaryColor")||t[14].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[14]&&-1!==skips[14].indexOf("size")||t[14].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[15][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[15][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[15][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("bgColor")||t[16].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("primaryColor")||t[16].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("size")||t[16].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[17][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[17][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[17][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("bgColor")||t[18].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("primaryColor")||t[18].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("size")||t[18].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[19][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[19][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[19][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[20]&&-1!==skips[20].indexOf("bgColor")||t[20].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[20]&&-1!==skips[20].indexOf("primaryColor")||t[20].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[20]&&-1!==skips[20].indexOf("size")||t[20].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[21][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[21][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[21][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[22]&&-1!==skips[22].indexOf("bgColor")||t[22].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[22]&&-1!==skips[22].indexOf("primaryColor")||t[22].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[22]&&-1!==skips[22].indexOf("size")||t[22].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[23][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[23][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[23][Symbol.for("props")].size=e.$sizes.get("graph.size")}],context:{}},state:()=>({mode:"dark",sizes:"small",radius:20}),watch:{mode(e){this.$colors.set(e)},sizes(e){this.$sizes.set(e)}},computed:{text(){return this.mode,"dark"===this.mode?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}});let Yi,Ji;const Qi={headers:{"Content-Type":"application/json",Authorization:"Bearer ABC123"}};function Zi(e,t="w185"){return Ji+t+e}function er(e,n={}){return fetch("https://8b4fa39d.lightningjs.workers.dev"+e,t(t({},Qi),n)).then(e=>e.json())}function tr(){return er("/configuration").then(e=>(Yi=e,Ji=e.images.secure_base_url,e))}const nr={get:function(...e){return Yi?er(...e):tr().then(()=>er(...e))},loadConfig:tr},or=e=>nr.get(`/${e}/popular`).then(ir),ir=e=>e.results.filter(e=>!e.adult).map(e=>({poster:Zi(e.poster_path||e.profile_path),background:Zi(e.backdrop_path,"w1280"),identifier:e.id,title:e.title||e.name,overview:e.overview})),rr=e=>{const t=Array.isArray(e)?e:[e];return sr("movie").then(({genres:e})=>{let n=[];return e.forEach(e=>{t.includes(e.name)&&n.push(e.id)}),nr.get(`/discover/movie?with_genres=${n.join()}`).then(ir)})},sr=e=>nr.get(`/genre/${e}/list`),ar=Di.Component("Poster",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=1280,l[0].h=720,l[0].x=t.x,l[0].src=t.item.background,l[0].color="{top: '0xffffffff', bottom: '0x000000ff'}",l[0].scale={transition:{value:t.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[0]._effects=[{type:"radius",props:{radius:8}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].alpha={transition:{value:t.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=185,l[2].h=278,l[2].x=54,l[2].y=220,l[2].src=t.item.poster,a[2].populate(l[2]),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].content=t.item.title,l[3].font="raleway",l[3].y=520,l[3].x=54,l[3].size=64,l[3].maxwidth=1e3,l[3].maxlines=1,l[3].__textnode=!0,a[3].populate(l[3]),e=a[1],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].content=t.item.overview,l[4].size=21,l[4].y=620,l[4].x=60,l[4].color="0xccccccff",l[4].maxwidth=1e3,l[4].maxlines=2,l[4].lineheight=36,l[4].__textnode=!0,a[4].populate(l[4]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("src",e.item.background)},function(e,t,n,o,i,r){t[0].set("scale",{transition:{value:e.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[1].set("alpha",{transition:{value:e.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[2].set("src",e.item.poster)},function(e,t,n,o,i,r){t[3].set("content",e.item.title)},function(e,t,n,o,i,r){t[4].set("content",e.item.overview)}],context:{}},props:["src","index","item","width"],state:()=>({scale:1,zIndex:1,alpha:0}),computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),lr=Di.Component("Poster",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=185,l[0].h=278,l[0].x=t.x,l[0].src=t.item.poster,l[0].scale={transition:{value:t.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[0]._effects=[{type:"radius",props:{radius:8}}],a[0].populate(l[0]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("src",e.item.poster)},function(e,t,n,o,i,r){t[0].set("scale",{transition:{value:e.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state:()=>({scale:1,color:"#333"}),computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),ur=Di.Component("PosterTitle",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=185,l[0].h=278,l[0].x=t.x,l[0].src=t.item.poster,l[0].scale={transition:{value:t.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[0]._effects=[{type:"radius",props:{radius:8}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].x=10,l[1].y={transition:{value:t.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[1].alpha={transition:{value:t.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].content=t.item.title,l[2].font="raleway",l[2].size=22,l[2].maxwidth=185,l[2].maxlines=2,l[2].lineheight=28,l[2].__textnode=!0,a[2].populate(l[2]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("src",e.item.poster)},function(e,t,n,o,i,r){t[0].set("scale",{transition:{value:e.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[1].set("y",{transition:{value:e.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[1].set("alpha",{transition:{value:e.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[2].set("content",e.item.title)}],context:{}},props:["src","index","item","width"],state:()=>({scale:1,alpha:0,y:278}),computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),cr=Di.Component("TmdbRow",{components:{Hero:ar,Poster:lr,PosterTitle:ur},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y=!1,v=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===y?f:t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===y?f:t),l[1].x={transition:{value:t.x,duration:300,easing:"ease-in-out"}},l[1].y=80,a[1].populate(l[1]),e=a[1],d[2]=[],u[2]=(i=[],s,a)=>{const u=r(i),d=new Set;let b=u.length;const x={}||{};m=x.from||0,g="to"in x?x.to:u.length;for(;b--;){const e=u[b];b<g&&b>=m&&d.add(""+e.identifier)}let w=a.length;for(;w--;)if(!1===d.has(a[w])){const e=a[w];s[2][e]&&s[2][e].destroy(),s[2][e]=null,delete s[2][e],s[3][e]&&s[3][e].destroy(),s[3][e]=null,delete s[3][e]}a.length=0;const S=u.length;for(let r=0;r<S;r++){if(r<m||r>=g)continue;const i=Object.create(t);if(e=s[1],i.item=u[r],i.index=r,i.key=""+i.item.identifier,i.__ref="poster"+r,a.push(i.key),v[2]=n.components&&n.components.Component||o.Component,void 0===s[2]&&(s[2]={}),l[2]={},void 0===s[2][i.key]&&(s[2][i.key]=this.element({parent:e||"root"},!0===y?f:t)),l[2].is=i.type,l[2].index=i.index,l[2].item=i.item,l[2].ref=i.__ref,l[2].width=i.width,p[2]=[],void 0!==v[2])for(let e in v[2][Symbol.for("config")].props)delete l[2][v[2][Symbol.for("config")].props[e]],p[2].push(v[2][Symbol.for("config")].props[e]);if(void 0===s[2][i.key].nodeId&&s[2][i.key].populate(l[2]),void 0===s[3]&&(s[3]={}),e=s[2][i.key],c[3]={},void 0===s[3][i.key]){if(c[3].is=i.type,c[3].index=i.index,c[3].item=i.item,c[3].ref=i.__ref,c[3].width=i.width,h=c[3].is||"Component",o[3],"string"==typeof h){if(o[3]=n.components&&n.components[h]||o[h],!o[3])throw new Error('Component "Component" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[3]=h);s[3][i.key]=o[3].call(null,{props:c[3]},s[2][i.key],t),s[3][i.key][Symbol.for("slots")][0]?(e=s[3][i.key][Symbol.for("slots")][0],f=s[3][i.key],y=!0):e=s[3][i.key][Symbol.for("children")][0]}}return[]};let b=()=>{u[2](t.items,a,d[2])};return t[Symbol.for("effects")].push(b),i(b,["items"]),{elms:a,cleanup:()=>{f=null,t=null,e=null,d[2].length=0,u[2]=null,v[2]=null,c[3]=null,o[3]=null,b=null,v.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("x",{transition:{value:e.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state:()=>({focused:0,offset:0}),hooks:{focus(){this.$trigger("focused")}},computed:{x(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(e){const t=this.$select("poster"+e);t&&t.$focus&&(t.$focus(),this.$emit("posterSelect",this.items[e]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),dr=Di.Component("Background",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].src=t.bg1,l[1].w=1920,l[1].h=1080,l[1].color="{top: '0xffffffff', bottom: '0x000000ff'}",l[1].alpha={transition:{value:t.alpha1,duration:400,easing:"ease-in"}},a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].src=t.bg2,l[2].w=1920,l[2].h=1080,l[2].color="{top: '0xffffffff', bottom: '0x000000ff'}",l[2].alpha={transition:{value:t.alpha2,duration:400,easing:"ease-in"}},a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=1920,l[3].h=1080,l[3].src="assets/gradient.png",l[3].color="0x8866ddff",l[3].alpha=.8,a[3].populate(l[3]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("src",e.bg1)},function(e,t,n,o,i,r){t[1].set("alpha",{transition:{value:e.alpha1,duration:400,easing:"ease-in"}})},function(e,t,n,o,i,r){t[2].set("src",e.bg2)},function(e,t,n,o,i,r){t[2].set("alpha",{transition:{value:e.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["bgImg"],state:()=>({counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}),watch:{bgImg(e){this.counter=(this.counter+1)%2,0===this.counter?(this.bg1=e,this.alpha1=.8,this.alpha2=0):(this.bg2=e,this.alpha1=0,this.alpha2=.8)}}}),pr=Di.Component("TMdb",{components:{Background:dr,TmdbRow:cr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=0,x=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),l[0].w=1920,l[0].h=1080,l[0].color="0x000000ff",a[0].populate(l[0]),!0===v&&(b-=1),x[1]=n.components&&n.components.Background||o.Background,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===v?m:t),l[1].bgImg=t.src,p[1]=[],void 0!==x[1])for(let S in x[1][Symbol.for("config")].props)delete l[1][x[1][Symbol.for("config")].props[S]],p[1].push(x[1][Symbol.for("config")].props[S]);if(a[1].populate(l[1]),!0===v&&(b-=1),e=a[1],c[2]={},f=t.src,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[2].bgImg=f,h=c[2].is||"Background",o[2],"string"==typeof h){if(o[2]=n.components&&n.components[h]||o[h],!o[2])throw new Error('Component "Background" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[2]=h);a[2]=o[2].call(null,{props:c[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],m=a[2],v=!0):e=a[2][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===v?m:t),a[3].populate(l[3]),!0===v&&(b-=1),e=a[3],l[4]={},a[4]=this.element({parent:e||"root"},!0===v?m:t),l[4].y={transition:{value:t.contentY,duration:t.duration}},l[4].alpha={transition:{value:t.alpha,duration:t.duration}},a[4].populate(l[4]),!0===v&&(b-=1),e=a[4],l[5]={},a[5]=this.element({parent:e||"root"},!0===v?m:t),l[5].src="assets/logo.png",l[5].x=140,l[5].y=90,l[5].w=243,l[5].h=52,a[5].populate(l[5]),!0===v&&(b-=1),e=a[4],l[6]={},a[6]=this.element({parent:e||"root"},!0===v?m:t),l[6].content=t.title,l[6].font="raleway",l[6].size=80,l[6].x=140,l[6].y=300,l[6].maxwidth=1e3,l[6]["@loaded"]=t.positionText&&t.positionText.bind(t),l[6].maxlines=1,l[6].__textnode=!0,a[6].populate(l[6]),!0===v&&(b-=1),e=a[4],l[7]={},a[7]=this.element({parent:e||"root"},!0===v?m:t),l[7].content=t.overview,l[7].maxwidth=880,l[7].x=140,l[7].y=430,l[7].lineheight=40,l[7].maxlines=3,l[7].__textnode=!0,a[7].populate(l[7]),!0===v&&(b-=1),e=a[3],l[8]={},a[8]=this.element({parent:e||"root"},!0===v?m:t),l[8].y={transition:{value:t.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[8].populate(l[8]),!0===v&&(b-=1),e=a[8],d[9]=[],u[9]=(s=[],a,u)=>{const d=r(s),w=new Set;let S=d.length;const T={}||{};g=T.from||0,y="to"in T?T.to:d.length;for(;S--;){const e=d[S];S<y&&S>=g&&w.add(""+e.title)}let k=u.length;for(;k--;)if(!1===w.has(u[k])){const e=u[k];a[9][e]&&a[9][e].destroy(),a[9][e]=null,delete a[9][e],a[10][e]&&a[10][e].destroy(),a[10][e]=null,delete a[10][e]}u.length=0;const C=d.length,A=[];for(let I=0;I<C;I++){if(I<g||I>=y)continue;const s=Object.create(t);if(e=a[8],s.row=d[I],s.index=I,s.key=""+s.row.title,s.__ref="row"+I,u.push(s.key),x[9]=n.components&&n.components.TmdbRow||o.TmdbRow,void 0===a[9]&&(a[9]={}),l[9]={},void 0===a[9][s.key]&&(a[9][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[9].title=s.row.title,l[9].items=s.row.items,l[9].type=s.row.type,l[9].width=s.row.width,l[9].y=s.row.y,l[9].ref=s.__ref,p[9]=[],void 0!==x[9])for(let e in x[9][Symbol.for("config")].props)delete l[9][x[9][Symbol.for("config")].props[e]],p[9].push(x[9][Symbol.for("config")].props[e]);if(void 0===a[9][s.key].nodeId&&(a[9][s.key].populate(l[9]),!0===v&&(b-=1)),void 0===a[10]&&(a[10]={}),e=a[9][s.key],c[10]={},void 0===a[10][s.key]){if(c[10].title=s.row.title,f=s.row.items,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[10].items=f,f=s.row.type,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[10].type=f,f=s.row.width,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[10].width=f,c[10].y=s.row.y,c[10].ref=s.__ref,h=c[10].is||"TmdbRow",o[10],"string"==typeof h){if(o[10]=n.components&&n.components[h]||o[h],!o[10])throw new Error('Component "TmdbRow" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[10]=h);a[10][s.key]=o[10].call(null,{props:c[10]},a[9][s.key],t),a[10][s.key][Symbol.for("slots")][0]?(e=a[10][s.key][Symbol.for("slots")][0],m=a[10][s.key],v=!0):e=a[10][s.key][Symbol.for("children")][0]}let w=()=>{void 0!==p&&void 0!==p[9]&&-1!==p[9].indexOf("items")||a[9][s.key].set("items",s.row.items)};i(w,null),A.push(w),t[Symbol.for("effects")].push(w);let S=()=>{void 0!==p&&void 0!==p[9]&&-1!==p[9].indexOf("type")||a[9][s.key].set("type",s.row.type)};i(S,null),A.push(S),t[Symbol.for("effects")].push(S);let T=()=>{void 0!==p&&void 0!==p[9]&&-1!==p[9].indexOf("width")||a[9][s.key].set("width",s.row.width)};i(T,null),A.push(T),t[Symbol.for("effects")].push(T),a[10][s.key][Symbol.for("props")].items=s.row.items,a[10][s.key][Symbol.for("props")].type=s.row.type,a[10][s.key][Symbol.for("props")].width=s.row.width}return A};let w=()=>{u[9](t.rows,a,d[9])};return t[Symbol.for("effects")].push(w),i(w,["rows"]),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,x[1]=null,c[2]=null,o[2]=null,d[9].length=0,u[9]=null,x[9]=null,c[10]=null,o[10]=null,w=null,x.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[1]&&-1!==skips[1].indexOf("bgImg")||t[1].set("bgImg",e.src)},function(e,t,n,o,i,r){t[2][Symbol.for("props")].bgImg=e.src},function(e,t,n,o,i,r){t[4].set("y",{transition:{value:e.contentY,duration:e.duration}})},function(e,t,n,o,i,r){t[4].set("alpha",{transition:{value:e.alpha,duration:e.duration}})},function(e,t,n,o,i,r){t[6].set("content",e.title)},function(e,t,n,o,i,r){t[7].set("content",e.overview)},function(e,t,n,o,i,r){t[8].set("y",{transition:{value:e.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state:()=>({rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}),watch:{focused(e){const t=this.$select("row"+e);t&&t.$focus&&t.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await or("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await rr(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await rr(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await or("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await rr(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await rr("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await rr("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",e=>{0===this.focused&&(this.src=e.background,this.title=e.title,this.overview=e.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(0===this.focused?550:90)-this.rows[this.focused].y,this.alpha=0===this.focused?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(0===this.focused?550:90)-this.rows[this.focused].y,this.alpha=0===this.focused?1:0}}}),hr=Di.Component("MenuSprite",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].src="assets/menusprite.png",l[1].x=748,l[1].y=120,l[1].w=425,l[1].h=340,a[1].populate(l[1]),!0===f&&(m-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),l[2].y=680,l[2].x=560,a[2].populate(l[2]),!0===f&&(m-=1),g[3]=n.components&&n.components.Sprite||o.Sprite,e=a[2],l[3]={},a[3]=this.element({parent:e||"root"},!0===f?h:t),l[3].image="assets/menusprite.png",l[3].x=0,l[3].w=140,l[3].h=140,l[3].map=t.map,l[3].frame=t.icon1,c[3]=[],void 0!==g[3])for(let y in g[3][Symbol.for("config")].props)delete l[3][g[3][Symbol.for("config")].props[y]],c[3].push(g[3][Symbol.for("config")].props[y]);if(a[3].populate(l[3]),!0===f&&(m-=1),e=a[3],u[4]={},u[4].image="assets/menusprite.png",u[4].x=0,u[4].w=140,u[4].h=140,u[4].map=t.map,p=t.icon1,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[4].frame=p,d=u[4].is||"Sprite",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);if(a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],h=a[4],f=!0):e=a[4][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[5]=n.components&&n.components.Sprite||o.Sprite,e=a[2],l[5]={},a[5]=this.element({parent:e||"root"},!0===f?h:t),l[5].image="assets/menusprite.png",l[5].x=220,l[5].w=140,l[5].h=140,l[5].map=t.map,l[5].frame="icon2",c[5]=[],void 0!==g[5])for(let y in g[5][Symbol.for("config")].props)delete l[5][g[5][Symbol.for("config")].props[y]],c[5].push(g[5][Symbol.for("config")].props[y]);if(a[5].populate(l[5]),!0===f&&(m-=1),e=a[5],u[6]={},u[6].image="assets/menusprite.png",u[6].x=220,u[6].w=140,u[6].h=140,u[6].map=t.map,u[6].frame="icon2",d=u[6].is||"Sprite",o[6],"string"==typeof d){if(o[6]=n.components&&n.components[d]||o[d],!o[6])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[6]=d);if(a[6]=o[6].call(null,{props:u[6]},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],h=a[6],f=!0):e=a[6][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[7]=n.components&&n.components.Sprite||o.Sprite,e=a[2],l[7]={},a[7]=this.element({parent:e||"root"},!0===f?h:t),l[7].image="assets/menusprite.png",l[7].x=440,l[7].w=140,l[7].h=140,l[7].map=t.map,l[7].frame="icon3",c[7]=[],void 0!==g[7])for(let y in g[7][Symbol.for("config")].props)delete l[7][g[7][Symbol.for("config")].props[y]],c[7].push(g[7][Symbol.for("config")].props[y]);if(a[7].populate(l[7]),!0===f&&(m-=1),e=a[7],u[8]={},u[8].image="assets/menusprite.png",u[8].x=440,u[8].w=140,u[8].h=140,u[8].map=t.map,u[8].frame="icon3",d=u[8].is||"Sprite",o[8],"string"==typeof d){if(o[8]=n.components&&n.components[d]||o[d],!o[8])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[8]=d);if(a[8]=o[8].call(null,{props:u[8]},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],h=a[8],f=!0):e=a[8][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[9]=n.components&&n.components.Sprite||o.Sprite,e=a[2],l[9]={},a[9]=this.element({parent:e||"root"},!0===f?h:t),l[9].image="assets/menusprite.png",l[9].x=660,l[9].w=140,l[9].h=140,l[9].map=t.map,l[9].frame="icon4_unfocus",c[9]=[],void 0!==g[9])for(let y in g[9][Symbol.for("config")].props)delete l[9][g[9][Symbol.for("config")].props[y]],c[9].push(g[9][Symbol.for("config")].props[y]);if(a[9].populate(l[9]),!0===f&&(m-=1),e=a[9],u[10]={},u[10].image="assets/menusprite.png",u[10].x=660,u[10].w=140,u[10].h=140,u[10].map=t.map,u[10].frame="icon4_unfocus",d=u[10].is||"Sprite",o[10],"string"==typeof d){if(o[10]=n.components&&n.components[d]||o[d],!o[10])throw new Error('Component "Sprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[10]=d);return a[10]=o[10].call(null,{props:u[10]},a[9],t),a[10][Symbol.for("slots")][0]?(e=a[10][Symbol.for("slots")][0],h=a[10],f=!0):e=a[10][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[3]=null,u[4]=null,o[4]=null,g[5]=null,u[6]=null,o[6]=null,g[7]=null,u[8]=null,o[8]=null,g[9]=null,u[10]=null,o[10]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[3]&&-1!==skips[3].indexOf("frame")||t[3].set("frame",e.icon1)},function(e,t,n,o,i,r){t[4][Symbol.for("props")].frame=e.icon1}],context:{}},state:()=>({icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}),hooks:{ready(){this.$setInterval(()=>{this.icon1="icon1_unfocus"===this.icon1?"icon1_focus":"icon1_unfocus"},2e3)}}}),fr=["menu"],mr=Di.Component("Sprites",{components:{MenuSprite:hr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),a[0].populate(l[0]),!0===f&&(m-=1),g[1]=n.components&&n.components.MenuSprite||o.MenuSprite,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].show="menu"===t.currentSprite,c[1]=[],void 0!==g[1])for(let y in g[1][Symbol.for("config")].props)delete l[1][g[1][Symbol.for("config")].props[y]],c[1].push(g[1][Symbol.for("config")].props[y]);if(a[1].populate(l[1]),!0===f&&(m-=1),e=a[1],u[2]={},p="menu"===t.currentSprite,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[2].show=p,d=u[2].is||"MenuSprite",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "MenuSprite" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);return a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],h=a[2],f=!0):e=a[2][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[1]=null,u[2]=null,o[2]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[1]&&-1!==skips[1].indexOf("show")||t[1].set("show","menu"===e.currentSprite)},function(e,t,n,o,i,r){t[2][Symbol.for("props")].show="menu"===e.currentSprite}],context:{}},state:()=>({currentSprite:"menu"}),input:{down(){const e=fr.indexOf(this.currentSprite);e<fr.length-1?this.currentSprite=fr[e+1]:this.currentSprite=fr[0]}}}),gr=Di.Component("Button",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=300,l[0].h=80,l[0].color=t.color||"0xff0000ff",l[0].effects=[{type:"radius",props:{radius:20}}],l[0].alpha={transition:t.alpha},l[0].scale={transition:t.scale},l[0].rotation=t.rotate,a[0].populate(l[0]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:20}}])},function(e,t,n,o,i,r){t[0].set("alpha",{transition:e.alpha})},function(e,t,n,o,i,r){t[0].set("scale",{transition:e.scale})},function(e,t,n,o,i,r){t[0].set("rotation",e.rotate)}],context:{}},props:["color"],state:()=>({alpha:.4,scale:1,rotate:0}),hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=1===this.scale?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=0===this.rotate?-4:0,this.scale=1.2===this.scale?1.3:1.2}}}),yr=Di.Component("Menu",{components:{Button:gr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),l[0].x={transition:t.x},l[0].w=400,l[0].h=1080,l[0].color="{right: '0x64748baa', left: '0x475569aa'}",a[0].populate(l[0]),!0===h&&(f-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].x=50,l[1].y=40,a[1].populate(l[1]),!0===h&&(f-=1),m[2]=n.components&&n.components.Button||o.Button,e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},!0===h?p:t),l[2].color="0xe4e4e7ff",l[2].ref="menu1",c[2]=[],void 0!==m[2])for(let g in m[2][Symbol.for("config")].props)delete l[2][m[2][Symbol.for("config")].props[g]],c[2].push(m[2][Symbol.for("config")].props[g]);if(a[2].populate(l[2]),!0===h&&(f-=1),e=a[2],u[3]={},u[3].color="0xe4e4e7ff",u[3].ref="menu1",d=u[3].is||"Button",o[3],"string"==typeof d){if(o[3]=n.components&&n.components[d]||o[d],!o[3])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[3]=d);if(a[3]=o[3].call(null,{props:u[3]},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],p=a[3],h=!0):e=a[3][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[4]=n.components&&n.components.Button||o.Button,e=a[1],l[4]={},a[4]=this.element({parent:e||"root"},!0===h?p:t),l[4].color="0xe4e4e7ff",l[4].y=100,l[4].ref="menu2",c[4]=[],void 0!==m[4])for(let g in m[4][Symbol.for("config")].props)delete l[4][m[4][Symbol.for("config")].props[g]],c[4].push(m[4][Symbol.for("config")].props[g]);if(a[4].populate(l[4]),!0===h&&(f-=1),e=a[4],u[5]={},u[5].color="0xe4e4e7ff",u[5].y=100,u[5].ref="menu2",d=u[5].is||"Button",o[5],"string"==typeof d){if(o[5]=n.components&&n.components[d]||o[d],!o[5])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[5]=d);if(a[5]=o[5].call(null,{props:u[5]},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],p=a[5],h=!0):e=a[5][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[6]=n.components&&n.components.Button||o.Button,e=a[1],l[6]={},a[6]=this.element({parent:e||"root"},!0===h?p:t),l[6].color="0xe4e4e7ff",l[6].y=200,l[6].ref="menu3",c[6]=[],void 0!==m[6])for(let g in m[6][Symbol.for("config")].props)delete l[6][m[6][Symbol.for("config")].props[g]],c[6].push(m[6][Symbol.for("config")].props[g]);if(a[6].populate(l[6]),!0===h&&(f-=1),e=a[6],u[7]={},u[7].color="0xe4e4e7ff",u[7].y=200,u[7].ref="menu3",d=u[7].is||"Button",o[7],"string"==typeof d){if(o[7]=n.components&&n.components[d]||o[d],!o[7])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[7]=d);if(a[7]=o[7].call(null,{props:u[7]},a[6],t),a[7][Symbol.for("slots")][0]?(e=a[7][Symbol.for("slots")][0],p=a[7],h=!0):e=a[7][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[8]=n.components&&n.components.Button||o.Button,e=a[1],l[8]={},a[8]=this.element({parent:e||"root"},!0===h?p:t),l[8].color="0xe4e4e7ff",l[8].y=300,l[8].ref="menu4",c[8]=[],void 0!==m[8])for(let g in m[8][Symbol.for("config")].props)delete l[8][m[8][Symbol.for("config")].props[g]],c[8].push(m[8][Symbol.for("config")].props[g]);if(a[8].populate(l[8]),!0===h&&(f-=1),e=a[8],u[9]={},u[9].color="0xe4e4e7ff",u[9].y=300,u[9].ref="menu4",d=u[9].is||"Button",o[9],"string"==typeof d){if(o[9]=n.components&&n.components[d]||o[d],!o[9])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[9]=d);return a[9]=o[9].call(null,{props:u[9]},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],p=a[9],h=!0):e=a[9][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[2]=null,u[3]=null,o[3]=null,m[4]=null,u[5]=null,o[5]=null,m[6]=null,u[7]=null,o[7]=null,m[8]=null,u[9]=null,o[9]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("x",{transition:e.x})}],context:{}},state:()=>({x:-360,focused:1}),hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const e=this.$select(`menu${this.focused}`);e&&e.$focus&&e.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),vr=Di.Component("FocusHandling",{components:{Menu:yr,Button:gr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].x=300,l[1].y=150,a[1].populate(l[1]),!0===f&&(m-=1),g[2]=n.components&&n.components.Button||o.Button,e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),l[2].color="0xef4444ff",l[2].x=0,l[2].ref="button1",l[2].z=1===t.focused?1:0,c[2]=[],void 0!==g[2])for(let y in g[2][Symbol.for("config")].props)delete l[2][g[2][Symbol.for("config")].props[y]],c[2].push(g[2][Symbol.for("config")].props[y]);if(a[2].populate(l[2]),!0===f&&(m-=1),e=a[2],u[3]={},u[3].color="0xef4444ff",u[3].x=0,u[3].ref="button1",p=1===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[3].z=p,d=u[3].is||"Button",o[3],"string"==typeof d){if(o[3]=n.components&&n.components[d]||o[d],!o[3])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[3]=d);if(a[3]=o[3].call(null,{props:u[3]},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],h=a[3],f=!0):e=a[3][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[4]=n.components&&n.components.Button||o.Button,e=a[1],l[4]={},a[4]=this.element({parent:e||"root"},!0===f?h:t),l[4].color="0xf97316ff",l[4].x=320,l[4].ref="button2",l[4].z=2===t.focused?1:0,c[4]=[],void 0!==g[4])for(let y in g[4][Symbol.for("config")].props)delete l[4][g[4][Symbol.for("config")].props[y]],c[4].push(g[4][Symbol.for("config")].props[y]);if(a[4].populate(l[4]),!0===f&&(m-=1),e=a[4],u[5]={},u[5].color="0xf97316ff",u[5].x=320,u[5].ref="button2",p=2===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[5].z=p,d=u[5].is||"Button",o[5],"string"==typeof d){if(o[5]=n.components&&n.components[d]||o[d],!o[5])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[5]=d);if(a[5]=o[5].call(null,{props:u[5]},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],h=a[5],f=!0):e=a[5][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[6]=n.components&&n.components.Button||o.Button,e=a[1],l[6]={},a[6]=this.element({parent:e||"root"},!0===f?h:t),l[6].color="0x84cc16ff",l[6].x=640,l[6].ref="button3",l[6].z=3===t.focused?1:0,c[6]=[],void 0!==g[6])for(let y in g[6][Symbol.for("config")].props)delete l[6][g[6][Symbol.for("config")].props[y]],c[6].push(g[6][Symbol.for("config")].props[y]);if(a[6].populate(l[6]),!0===f&&(m-=1),e=a[6],u[7]={},u[7].color="0x84cc16ff",u[7].x=640,u[7].ref="button3",p=3===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[7].z=p,d=u[7].is||"Button",o[7],"string"==typeof d){if(o[7]=n.components&&n.components[d]||o[d],!o[7])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[7]=d);if(a[7]=o[7].call(null,{props:u[7]},a[6],t),a[7][Symbol.for("slots")][0]?(e=a[7][Symbol.for("slots")][0],h=a[7],f=!0):e=a[7][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[8]=n.components&&n.components.Button||o.Button,e=a[1],l[8]={},a[8]=this.element({parent:e||"root"},!0===f?h:t),l[8].color="0x10b981ff",l[8].x=0,l[8].y=100,l[8].ref="button4",l[8].z=4===t.focused?1:0,c[8]=[],void 0!==g[8])for(let y in g[8][Symbol.for("config")].props)delete l[8][g[8][Symbol.for("config")].props[y]],c[8].push(g[8][Symbol.for("config")].props[y]);if(a[8].populate(l[8]),!0===f&&(m-=1),e=a[8],u[9]={},u[9].color="0x10b981ff",u[9].x=0,u[9].y=100,u[9].ref="button4",p=4===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[9].z=p,d=u[9].is||"Button",o[9],"string"==typeof d){if(o[9]=n.components&&n.components[d]||o[d],!o[9])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[9]=d);if(a[9]=o[9].call(null,{props:u[9]},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],h=a[9],f=!0):e=a[9][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[10]=n.components&&n.components.Button||o.Button,e=a[1],l[10]={},a[10]=this.element({parent:e||"root"},!0===f?h:t),l[10].color="0x06b6d4ff",l[10].y=100,l[10].x=320,l[10].ref="button5",l[10].z=5===t.focused?1:0,c[10]=[],void 0!==g[10])for(let y in g[10][Symbol.for("config")].props)delete l[10][g[10][Symbol.for("config")].props[y]],c[10].push(g[10][Symbol.for("config")].props[y]);if(a[10].populate(l[10]),!0===f&&(m-=1),e=a[10],u[11]={},u[11].color="0x06b6d4ff",u[11].y=100,u[11].x=320,u[11].ref="button5",p=5===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[11].z=p,d=u[11].is||"Button",o[11],"string"==typeof d){if(o[11]=n.components&&n.components[d]||o[d],!o[11])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[11]=d);if(a[11]=o[11].call(null,{props:u[11]},a[10],t),a[11][Symbol.for("slots")][0]?(e=a[11][Symbol.for("slots")][0],h=a[11],f=!0):e=a[11][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[12]=n.components&&n.components.Button||o.Button,e=a[1],l[12]={},a[12]=this.element({parent:e||"root"},!0===f?h:t),l[12].color="0x3b82f6ff",l[12].y=100,l[12].x=640,l[12].ref="button6",l[12].z=6===t.focused?1:0,c[12]=[],void 0!==g[12])for(let y in g[12][Symbol.for("config")].props)delete l[12][g[12][Symbol.for("config")].props[y]],c[12].push(g[12][Symbol.for("config")].props[y]);if(a[12].populate(l[12]),!0===f&&(m-=1),e=a[12],u[13]={},u[13].color="0x3b82f6ff",u[13].y=100,u[13].x=640,u[13].ref="button6",p=6===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[13].z=p,d=u[13].is||"Button",o[13],"string"==typeof d){if(o[13]=n.components&&n.components[d]||o[d],!o[13])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[13]=d);if(a[13]=o[13].call(null,{props:u[13]},a[12],t),a[13][Symbol.for("slots")][0]?(e=a[13][Symbol.for("slots")][0],h=a[13],f=!0):e=a[13][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[14]=n.components&&n.components.Button||o.Button,e=a[1],l[14]={},a[14]=this.element({parent:e||"root"},!0===f?h:t),l[14].color="0x8b5cf6ff",l[14].y=200,l[14].x=0,l[14].ref="button7",l[14].z=7===t.focused?1:0,c[14]=[],void 0!==g[14])for(let y in g[14][Symbol.for("config")].props)delete l[14][g[14][Symbol.for("config")].props[y]],c[14].push(g[14][Symbol.for("config")].props[y]);if(a[14].populate(l[14]),!0===f&&(m-=1),e=a[14],u[15]={},u[15].color="0x8b5cf6ff",u[15].y=200,u[15].x=0,u[15].ref="button7",p=7===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[15].z=p,d=u[15].is||"Button",o[15],"string"==typeof d){if(o[15]=n.components&&n.components[d]||o[d],!o[15])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[15]=d);if(a[15]=o[15].call(null,{props:u[15]},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],h=a[15],f=!0):e=a[15][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[16]=n.components&&n.components.Button||o.Button,e=a[1],l[16]={},a[16]=this.element({parent:e||"root"},!0===f?h:t),l[16].color="0xd946efff",l[16].y=200,l[16].x=320,l[16].ref="button8",l[16].z=8===t.focused?1:0,c[16]=[],void 0!==g[16])for(let y in g[16][Symbol.for("config")].props)delete l[16][g[16][Symbol.for("config")].props[y]],c[16].push(g[16][Symbol.for("config")].props[y]);if(a[16].populate(l[16]),!0===f&&(m-=1),e=a[16],u[17]={},u[17].color="0xd946efff",u[17].y=200,u[17].x=320,u[17].ref="button8",p=8===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[17].z=p,d=u[17].is||"Button",o[17],"string"==typeof d){if(o[17]=n.components&&n.components[d]||o[d],!o[17])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[17]=d);if(a[17]=o[17].call(null,{props:u[17]},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],h=a[17],f=!0):e=a[17][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[18]=n.components&&n.components.Button||o.Button,e=a[1],l[18]={},a[18]=this.element({parent:e||"root"},!0===f?h:t),l[18].color="0xf43f5eff",l[18].y=200,l[18].x=640,l[18].ref="button9",l[18].z=9===t.focused?1:0,c[18]=[],void 0!==g[18])for(let y in g[18][Symbol.for("config")].props)delete l[18][g[18][Symbol.for("config")].props[y]],c[18].push(g[18][Symbol.for("config")].props[y]);if(a[18].populate(l[18]),!0===f&&(m-=1),e=a[18],u[19]={},u[19].color="0xf43f5eff",u[19].y=200,u[19].x=640,u[19].ref="button9",p=9===t.focused?1:0,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[19].z=p,d=u[19].is||"Button",o[19],"string"==typeof d){if(o[19]=n.components&&n.components[d]||o[d],!o[19])throw new Error('Component "Button" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[19]=d);if(a[19]=o[19].call(null,{props:u[19]},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],h=a[19],f=!0):e=a[19][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[20]=n.components&&n.components.Menu||o.Menu,e=a[0],l[20]={},a[20]=this.element({parent:e||"root"},!0===f?h:t),l[20].ref="menu",c[20]=[],void 0!==g[20])for(let y in g[20][Symbol.for("config")].props)delete l[20][g[20][Symbol.for("config")].props[y]],c[20].push(g[20][Symbol.for("config")].props[y]);if(a[20].populate(l[20]),!0===f&&(m-=1),e=a[20],u[21]={},u[21].ref="menu",d=u[21].is||"Menu",o[21],"string"==typeof d){if(o[21]=n.components&&n.components[d]||o[d],!o[21])throw new Error('Component "Menu" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[21]=d);return a[21]=o[21].call(null,{props:u[21]},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],h=a[21],f=!0):e=a[21][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[2]=null,u[3]=null,o[3]=null,g[4]=null,u[5]=null,o[5]=null,g[6]=null,u[7]=null,o[7]=null,g[8]=null,u[9]=null,o[9]=null,g[10]=null,u[11]=null,o[11]=null,g[12]=null,u[13]=null,o[13]=null,g[14]=null,u[15]=null,o[15]=null,g[16]=null,u[17]=null,o[17]=null,g[18]=null,u[19]=null,o[19]=null,g[20]=null,u[21]=null,o[21]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("z")||t[2].set("z",1===e.focused?1:0)},function(e,t,n,o,i,r){t[3][Symbol.for("props")].z=1===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[4]&&-1!==skips[4].indexOf("z")||t[4].set("z",2===e.focused?1:0)},function(e,t,n,o,i,r){t[5][Symbol.for("props")].z=2===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[6]&&-1!==skips[6].indexOf("z")||t[6].set("z",3===e.focused?1:0)},function(e,t,n,o,i,r){t[7][Symbol.for("props")].z=3===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("z")||t[8].set("z",4===e.focused?1:0)},function(e,t,n,o,i,r){t[9][Symbol.for("props")].z=4===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[10]&&-1!==skips[10].indexOf("z")||t[10].set("z",5===e.focused?1:0)},function(e,t,n,o,i,r){t[11][Symbol.for("props")].z=5===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[12]&&-1!==skips[12].indexOf("z")||t[12].set("z",6===e.focused?1:0)},function(e,t,n,o,i,r){t[13][Symbol.for("props")].z=6===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[14]&&-1!==skips[14].indexOf("z")||t[14].set("z",7===e.focused?1:0)},function(e,t,n,o,i,r){t[15][Symbol.for("props")].z=7===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("z")||t[16].set("z",8===e.focused?1:0)},function(e,t,n,o,i,r){t[17][Symbol.for("props")].z=8===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("z")||t[18].set("z",9===e.focused?1:0)},function(e,t,n,o,i,r){t[19][Symbol.for("props")].z=9===e.focused?1:0}],context:{}},state:()=>({focused:1}),hooks:{focus(){this.$trigger("focused")}},watch:{focused(e){const t=this.$select(`button${e}`);t&&t.$focus&&t.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const e=this.focused-1;if(0===e){const e=this.$select("menu");e&&e.$focus&&e.$focus()}else this.focused=Math.max(e,1)},a(){const e=this.$select("menu");e&&e.$focus&&e.$focus()}}}),br=Di.Component("Positioning",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),a[0].populate(l[0]),!0===h&&(f-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].w=100,l[1].h=100,l[1].x=20,l[1].y=20,l[1].color="0xecfeffff",a[1].populate(l[1]),!0===h&&(f-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===h?p:t),l[2].w=100,l[2].h=100,l[2].x=140,l[2].y=20,l[2].color="0xa5f3fcff",a[2].populate(l[2]),!0===h&&(f-=1),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].w=100,l[3].h=100,l[3].x=260,l[3].y=20,l[3].color="0x22d3eeff",a[3].populate(l[3]),!0===h&&(f-=1),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===h?p:t),l[4].w=100,l[4].h=100,l[4].x=380,l[4].y=20,l[4].color="0x0891b2ff",a[4].populate(l[4]),!0===h&&(f-=1),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===h?p:t),l[5].w=100,l[5].h=100,l[5].x=t.x1,l[5].y=t.y,l[5].color="0xfdf4ffff",a[5].populate(l[5]),!0===h&&(f-=1),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},!0===h?p:t),l[6].w=100,l[6].h=100,l[6].x=t.x2,l[6].y=t.y,l[6].color="0xf5d0feff",a[6].populate(l[6]),!0===h&&(f-=1),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},!0===h?p:t),l[7].w=100,l[7].h=100,l[7].x=t.x3,l[7].y=t.y,l[7].color="0xe879f9ff",a[7].populate(l[7]),!0===h&&(f-=1),e=a[0],l[8]={},a[8]=this.element({parent:e||"root"},!0===h?p:t),l[8].w=100,l[8].h=100,l[8].x=t.x4,l[8].y=t.y,l[8].color="0xc026d3ff",a[8].populate(l[8]),!0===h&&(f-=1),e=a[0],l[9]={},a[9]=this.element({parent:e||"root"},!0===h?p:t),l[9].w=100,l[9].h=100,l[9].x=t.xA,l[9].y=260,l[9].color="0xfff7edff",a[9].populate(l[9]),!0===h&&(f-=1),e=a[0],l[10]={},a[10]=this.element({parent:e||"root"},!0===h?p:t),l[10].w=100,l[10].h=100,l[10].x=t.xB,l[10].y=260,l[10].color="0xfed7aaff",a[10].populate(l[10]),!0===h&&(f-=1),e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},!0===h?p:t),l[11].w=100,l[11].h=100,l[11].x=t.xC,l[11].y=260,l[11].color="0xfb923cff",a[11].populate(l[11]),!0===h&&(f-=1),e=a[0],l[12]={},a[12]=this.element({parent:e||"root"},!0===h?p:t),l[12].w=100,l[12].h=100,l[12].x=t.xD,l[12].y=260,l[12].color="0xea580cff",a[12].populate(l[12]),!0===h&&(f-=1),e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},!0===h?p:t),l[13].w=800,l[13].h=800,l[13].y=20,l[13].x=800,l[13].color="0xecfdf5ff",a[13].populate(l[13]),!0===h&&(f-=1),e=a[13],l[14]={},a[14]=this.element({parent:e||"root"},!0===h?p:t),l[14].w=600,l[14].h=600,l[14].y=20,l[14].x=20,l[14].color="0xa7f3d0ff",a[14].populate(l[14]),!0===h&&(f-=1),e=a[14],l[15]={},a[15]=this.element({parent:e||"root"},!0===h?p:t),l[15].w=400,l[15].h=400,l[15].y=100,l[15].x=20,l[15].color="0x34d399ff",a[15].populate(l[15]),!0===h&&(f-=1),e=a[15],l[16]={},a[16]=this.element({parent:e||"root"},!0===h?p:t),l[16].w=200,l[16].h=100,l[16].y=150,l[16].x=100,l[16].color="0x059669ff",a[16].populate(l[16]),!0===h&&(f-=1),e=a[16],l[17]={},a[17]=this.element({parent:e||"root"},!0===h?p:t),l[17].w=50,l[17].h=50,l[17].y={transition:t.yNested},l[17].x={transition:t.xNested},l[17].color="0x065f46ff",a[17].populate(l[17]),!0===h&&(f-=1),e=a[0],l[18]={},a[18]=this.element({parent:e||"root"},!0===h?p:t),l[18].w=100,l[18].h=100,l[18].y=500,l[18].x=20,l[18].color="0xe11d48ff",a[18].populate(l[18]),!0===h&&(f-=1),e=a[0],l[19]={},a[19]=this.element({parent:e||"root"},!0===h?p:t),l[19].w=200,l[19].h=200,l[19].x=50,l[19].y=700,l[19].color="0x94a3b8ff",l[19].z=100,a[19].populate(l[19]),!0===h&&(f-=1),e=a[19],l[20]={},a[20]=this.element({parent:e||"root"},!0===h?p:t),l[20].content="Lightning!",l[20].x=100,l[20].y=140,l[20].__textnode=!0,a[20].populate(l[20]),!0===h&&(f-=1),e=a[19],l[21]={},a[21]=this.element({parent:e||"root"},!0===h?p:t),l[21].w=300,l[21].h=100,l[21].color="0x475569ff",a[21].populate(l[21]),!0===h&&(f-=1),m[22]=n.components&&n.components.Circle||o.Circle,e=a[19],l[22]={},a[22]=this.element({parent:e||"root"},!0===h?p:t),l[22].x=150,l[22].y=150,l[22].size=100,l[22].color="0xffffffff",c[22]=[],void 0!==m[22])for(let g in m[22][Symbol.for("config")].props)delete l[22][m[22][Symbol.for("config")].props[g]],c[22].push(m[22][Symbol.for("config")].props[g]);if(a[22].populate(l[22]),!0===h&&(f-=1),e=a[22],u[23]={},u[23].x=150,u[23].y=150,u[23].size=100,u[23].color="0xffffffff",d=u[23].is||"Circle",o[23],"string"==typeof d){if(o[23]=n.components&&n.components[d]||o[d],!o[23])throw new Error('Component "Circle" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[23]=d);return a[23]=o[23].call(null,{props:u[23]},a[22],t),a[23][Symbol.for("slots")][0]?(e=a[23][Symbol.for("slots")][0],p=a[23],h=!0):e=a[23][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),e=a[0],l[24]={},a[24]=this.element({parent:e||"root"},!0===h?p:t),l[24].w=300,l[24].h=300,l[24].x=50,l[24].y=700,l[24].color="0xef444480",a[24].populate(l[24]),!0===h&&(f-=1),e=a[0],l[25]={},a[25]=this.element({parent:e||"root"},!0===h?p:t),l[25].w=400,l[25].h=100,l[25].x=800,l[25].y=900,l[25].color="0x0284c7ff",a[25].populate(l[25]),!0===h&&(f-=1),e=a[25],l[26]={},a[26]=this.element({parent:e||"root"},!0===h?p:t),l[26].w=.42*e.node.width,l[26].h=.3*e.node.height,l[26].y=.05*e.node.height,l[26].x=.01*e.node.width,l[26].color="0x075985ff",a[26].populate(l[26]),!0===h&&(f-=1),e=a[25],l[27]={},a[27]=this.element({parent:e||"root"},!0===h?p:t),l[27].w=t.bar2.v,l[27].h=.3*e.node.height,l[27].y=.35*e.node.height,l[27].x=.01*e.node.width,l[27].color="0x6b21a8ff",a[27].populate(l[27]),!0===h&&(f-=1),e=a[25],l[28]={},a[28]=this.element({parent:e||"root"},!0===h?p:t),l[28].w={transition:t.bar3},l[28].h=.3*e.node.height,l[28].y=.65*e.node.height,l[28].x=.01*e.node.width,l[28].color="0x9f1239ff",a[28].populate(l[28]),!0===h&&(f-=1),e=a[0],l[29]={},a[29]=this.element({parent:e||"root"},!0===h?p:t),l[29].w=250,l[29].h=250,l[29].color="0xfef08aff",l[29].x=450,l[29].y=700,a[29].populate(l[29]),!0===h&&(f-=1),e=a[29],l[30]={},a[30]=this.element({parent:e||"root"},!0===h?p:t),l[30].w=40,l[30].h=40,l[30].placement="left",l[30].color="0x818cf8ff",a[30].populate(l[30]),!0===h&&(f-=1),e=a[29],l[31]={},a[31]=this.element({parent:e||"root"},!0===h?p:t),l[31].w=40,l[31].h=40,l[31].placement="center",l[31].color="0x2563ebff",a[31].populate(l[31]),!0===h&&(f-=1),e=a[29],l[32]={},a[32]=this.element({parent:e||"root"},!0===h?p:t),l[32].w=40,l[32].h=40,l[32].placement="right",l[32].color="0x1e40afff",a[32].populate(l[32]),!0===h&&(f-=1),e=a[29],l[33]={},a[33]=this.element({parent:e||"root"},!0===h?p:t),l[33].w=40,l[33].h=40,l[33].x=54,l[33].placement="top",l[33].color="0xf472b6ff",a[33].populate(l[33]),!0===h&&(f-=1),e=a[29],l[34]={},a[34]=this.element({parent:e||"root"},!0===h?p:t),l[34].w=40,l[34].h=40,l[34].x=54,l[34].placement="middle",l[34].color="0xdb2777ff",a[34].populate(l[34]),!0===h&&(f-=1),e=a[29],l[35]={},a[35]=this.element({parent:e||"root"},!0===h?p:t),l[35].w=40,l[35].h=40,l[35].x=54,l[35].placement="bottom",l[35].color="0xbe185dff",a[35].populate(l[35]),!0===h&&(f-=1),e=a[29],l[36]={},a[36]=this.element({parent:e||"root"},!0===h?p:t),l[36].w=40,l[36].h=40,l[36].placement="{x: 'center', y: 'bottom'}",l[36].color="0xa3e635ff",a[36].populate(l[36]),!0===h&&(f-=1),e=a[29],l[37]={},a[37]=this.element({parent:e||"root"},!0===h?p:t),l[37].w=40,l[37].h=40,l[37].placement="{x: 'right', y: 'middle'}",l[37].color="0x65a30dff",a[37].populate(l[37]),!0===h&&(f-=1),e=a[29],l[38]={},a[38]=this.element({parent:e||"root"},!0===h?p:t),l[38].w=40,l[38].h=40,l[38].placement="{x: 'center', y: 'middle'}",l[38].color="0x4d7c0fff",a[38].populate(l[38]),!0===h&&(f-=1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[22]=null,u[23]=null,o[23]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[9].set("x",e.xA)},function(e,t,n,o,i,r){t[10].set("x",e.xB)},function(e,t,n,o,i,r){t[11].set("x",e.xC)},function(e,t,n,o,i,r){t[12].set("x",e.xD)},function(e,t,n,o,i,r){t[16].set("y",150)},function(e,t,n,o,i,r){t[16].set("x",100)},function(e,t,n,o,i,r){t[17].set("y",{transition:e.yNested})},function(e,t,n,o,i,r){t[17].set("x",{transition:e.xNested})},function(e,t,n,o,i,r){t[27].set("w",e.bar2.v)},function(e,t,n,o,i,r){t[28].set("w",{transition:e.bar3})}],context:{}},state:()=>({x1:20,x2:140,x3:260,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}),hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=0===this.yNested?50:0},2e3),this.$setInterval(()=>{this.xNested=0===this.xNested?150:0},1e3),this.$setInterval(()=>{const e=parseFloat(this.bar2.v),t="up"===this.bar2.direction?e+10:e-10;this.bar2.v=t+"%",t>=90&&(this.bar2.direction="down"),t<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(96*Math.random())+"%"},2e3)}}});var xr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function wr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sr,Tr={};
/*
       @license
       Shaka Player
       Copyright 2016 Google LLC
       SPDX-License-Identifier: Apache-2.0
      */var kr=(Sr||(Sr=1,function(e){!function(){var t="undefined"!=typeof window?window:xr,n={};for(var o in function(e,t,n){var i,r,s="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},l=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var o=0;o<n.length;++o){var i=n[o];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function c(e,t){if(t)e:{var n=l;e=e.split(".");for(var o=0;o<e.length-1;o++){var i=e[o];if(!(i in n))break e;n=n[i]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}if("function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var d;e:{var p={};try{p.__proto__={a:!0},d=p.a;break e}catch(Tk){}d=!1}r=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var h=r;function f(e,t){if(e.prototype=s(t.prototype),e.prototype.constructor=e,h)h(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(e,n,o)}else e[n]=t[n];e.Jm=t.prototype}function m(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function g(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:m(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function y(e){if(!(e instanceof Array)){e=g(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function v(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function b(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function x(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function w(e,t){e.i={Xh:t,li:!0},e.g=e.m||e.j}function S(e,t,n){return e.g=n,{value:t}}function T(e){e.g=0}function k(e,t,n){e.m=t,null!=n&&(e.j=n)}function C(e,t){e.m=0,e.j=t||0}function A(e,t,n){e.g=t,e.m=n||0}function I(e,t){return e.m=t||0,t=e.i.Xh,e.i=null,t}function E(e){e.B=[e.i],e.m=0,e.j=0}function M(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.li?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function R(e){this.g=new b,this.h=e}function _(e,t,n,o){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var r=i.value}catch(s){return e.g.l=null,w(e.g,s),L(e)}return e.g.l=null,o.call(e.g,r),L(e)}function L(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,w(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.li)throw t.Xh;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function P(e){this.next=function(t){return x(e.g),e.g.l?t=_(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=L(e)),t},this.throw=function(t){return x(e.g),e.g.l?t=_(e,e.g.l.throw,t,e.g.u):(w(e.g,t),t=L(e)),t},this.return=function(t){return function(e,t){x(e.g);var n=e.g.l;return n?_(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),L(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function D(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(o,i){!function e(r){r.done?o(r.value):Promise.resolve(r.value).then(t,n).then(e,i)}(e.next())})}(new P(new R(e)))}function O(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t,n){e instanceof String&&(e=String(e));for(var o=e.length,i=0;i<o;i++){var r=e[i];if(t.call(n,r,i,e))return{gi:i,v:r}}return{gi:-1,v:void 0}}function B(e,t){e instanceof String&&(e+="");var n=0,o=!1,i={next:function(){if(!o&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return o=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}c("Symbol",function(e){function t(e,t){this.g=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",o=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+o++,i)}}),c("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var o=l[t[n]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&a(o.prototype,e,{configurable:!0,writable:!0,value:function(){return v(m(this))}})}return e}),b.prototype.u=function(e){this.h=e},b.prototype.return=function(e){this.i={return:e},this.g=this.j},b.prototype.A=function(e){this.g=e},c("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(o){t.reject(o)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var r=l.setTimeout;n.prototype.i=function(e){r(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(o){this.j(o)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(o){n||(n=!0,e.call(t,o))}}var t=this,n=!1;return{resolve:e(this.G),reject:e(this.l)}},t.prototype.G=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.I(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.F(e):this.m(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(o){return void this.l(o)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.m=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.H(),this.B()},t.prototype.H=function(){var e=this;r(function(){if(e.C()){var t=l.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var e=l.CustomEvent,t=l.Event,n=l.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=l.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.I=function(e){var t=this.j();e.Pe(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(o){n.reject(o)}},t.prototype.then=function(e,n){function o(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){r(n)}}:t}var i,r,s=new t(function(e,t){i=e,r=t});return this.Pe(o(e,i),o(n,r)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Pe=function(e,t){function n(){switch(o.h){case 1:e(o.i);break;case 2:t(o.i);break;default:throw Error("Unexpected state: "+o.h)}}var o=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var o=g(e),r=o.next();!r.done;r=o.next())i(r.value).Pe(t,n)})},t.all=function(e){var n=g(e),o=n.next();return o.done?i([]):new t(function(e,t){function r(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,i(o.value).Pe(r(s.length-1),t),o=n.next()}while(!o.done)})},t}),c("WeakMap",function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=g(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function o(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!N(e,s)){var t=new n;a(e,s,{value:t})}}function r(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),o=new e([[t,2],[n,3]]);return 2==o.get(t)&&3==o.get(n)&&(o.delete(t),o.set(n,4),!o.has(t)&&4==o.get(n))}catch(u){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();r("freeze"),r("preventExtensions"),r("seal");var l=0;return t.prototype.set=function(e,t){if(!o(e))throw Error("Invalid WeakMap key");if(i(e),!N(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return o(e)&&N(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return o(e)&&N(e,s)&&N(e[s],this.g)},t.prototype.delete=function(e){return!!(o(e)&&N(e,s)&&N(e[s],this.g))&&delete e[s][this.g]},t}),c("Map",function(e){function t(){var e={};return e.wc=e.next=e.head=e}function n(e,t){var n=e[1];return v(function(){if(n){for(;n.head!=e[1];)n=n.wc;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function o(e,t){var n=t&&typeof t;"object"==n||"function"==n?r.has(t)?n=r.get(t):(n=""+ ++s,r.set(t,n)):n="p_"+t;var o=e[0][n];if(o&&N(e[0],n))for(e=0;e<o.length;e++){var i=o[e];if(t!=t&&i.key!=i.key||t===i.key)return{id:n,list:o,index:e,entry:i}}return{id:n,list:o,index:-1,entry:void 0}}function i(e){if(this[0]={},this[1]=t(),this.size=0,e){e=g(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(g([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var o=n.entries(),i=o.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=o.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!o.next().done)}catch(u){return!1}}())return e;var r=new WeakMap;i.prototype.set=function(e,t){var n=o(this,e=0===e?0:e);return n.list||(n.list=this[0][n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this[1],wc:this[1].wc,head:this[1],key:e,value:t},n.list.push(n.entry),this[1].wc.next=n.entry,this[1].wc=n.entry,this.size++),this},i.prototype.delete=function(e){return!(!(e=o(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this[0][e.id],e.entry.wc.next=e.entry.next,e.entry.next.wc=e.entry.wc,e.entry.head=null,this.size--,0))},i.prototype.clear=function(){this[0]={},this[1]=this[1].wc=t(),this.size=0},i.prototype.has=function(e){return!!o(this,e).entry},i.prototype.get=function(e){return(e=o(this,e).entry)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,o=this.entries();!(n=o.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i}),c("Set",function(e){function t(e){if(this.g=new Map,e){e=g(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(g([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var o=n.entries(),i=o.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&!(i=o.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&o.next().done}catch(r){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(o){return e.call(t,o,o,n)})},t)}),c("Array.prototype.findIndex",function(e){return e||function(e,t){return U(this,e,t).gi}}),c("Array.prototype.values",function(e){return e||function(){return B(this,function(e,t){return t})}}),c("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var o=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var r=0;!(i=e.next()).done;)o.push(t.call(n,i.value,r++))}else for(i=e.length,r=0;r<i;r++)o.push(t.call(n,e[r],r));return o}}),c("Array.prototype.keys",function(e){return e||function(){return B(this,function(e){return e})}}),c("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),c("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var o=n.length;for((t=t||0)<0&&(t=Math.max(t+o,0));t<o;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}),c("String.prototype.includes",function(e){return e||function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}}),c("String.fromCodePoint",function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var o=Number(arguments[n]);if(o<0||o>1114111||o!==Math.floor(o))throw new RangeError("invalid_code_point "+o);o<=65535?t+=String.fromCharCode(o):(o-=65536,t+=String.fromCharCode(o>>>10&1023|55296),t+=String.fromCharCode(1023&o|56320))}return t}}),c("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=g(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),o=new e([t]);return!(!o.has(t)||o.has(n))&&(o.delete(t),o.add(n),!o.has(t)&&o.has(n))}catch(i){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)}),c("Array.prototype.find",function(e){return e||function(e,t){return U(this,e,t).v}}),c("String.prototype.startsWith",function(e){return e||function(e,t){var n=F(this,e,"startsWith"),o=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var r=0;r<i&&t<o;)if(n[t++]!=e[r++])return!1;return r>=i}}),c("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push([t,e[t]]);return n}});var j="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var i in o)N(o,i)&&(e[i]=o[i])}return e};c("Object.assign",function(e){return e||j}),c("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),c("Array.prototype.entries",function(e){return e||function(){return B(this,function(e,t){return[e,t]})}}),c("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),c("String.prototype.repeat",function(e){return e||function(e){var t=F(this,null,"repeat");if(e<0||e>1342177279)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),c("Number.EPSILON",function(){return 2220446049250313e-31}),c("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),c("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&e!==1/0&&e!==-1/0}}),c("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push(e[t]);return n}}),c("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),c("String.prototype.endsWith",function(e){return e||function(e,t){var n=F(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var o=e.length;o>0&&t>0;)if(n[--t]!=e[--o])return!1;return o<=0}}),c("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||e===1/0||e===-1/0||0===e)return e;var t=Math.floor(Math.abs(e));return e<0?-t:t}});var z=this||self;function $(e,t){e=e.split(".");var n,o=z;e[0]in o||void 0===o.execScript||o.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?o=o[n]&&o[n]!==Object.prototype[n]?o[n]:o[n]={}:o[n]=t}function V(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function H(e){return e.h/(1-Math.pow(e.g,e.i))}function G(){this.h=new V(2),this.j=new V(5),this.g=0,this.i=128e3,this.l=16e3}function q(){}function W(){}function K(){}function X(e){var t=O.apply(1,arguments);J.has(e)||(J.add(e),K.apply(q,y(t)))}function Y(){}V.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},G.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},G.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},G.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(H(this.h),H(this.j))};var J=new Set;function Q(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Z(e,t){(t=e.indexOf(t))>-1&&e.splice(t,1)}function ee(e,t,n){if(n||(n=Q),e.length!=t.length)return!1;t=t.slice();for(var o=(e=g(e)).next(),i={};!o.done;i={mi:void 0},o=e.next()){if(i.mi=o.value,-1==(o=t.findIndex(function(e){return function(t){return n(e.mi,t)}}(i))))return!1;t[o]=t[t.length-1],t.pop()}return 0==t.length}function te(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Q),e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0}function ne(){this.g=new Map}function oe(){this.g=new ne}function ie(e,t,n,o){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=re;if(null==t){t=!1;try{var n={},o={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",o),Object.defineProperty(n,"capture",o),o=function(){},e.addEventListener("test",o,n),e.removeEventListener("test",o,n)}catch(i){t=!1}re=t}return t||!1}(e)?t:t.capture||!1}(e,o),this.target.addEventListener(t,n,this.g)}e.console&&((new Map).set(1,function(){return console.error.apply(console,y(O.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,y(O.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,y(O.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,y(O.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,y(O.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,y(O.apply(0,arguments)))}),K=function(){return console.warn.apply(console,y(O.apply(0,arguments)))},W=function(){console.error.apply(console,y(O.apply(0,arguments)))}),(i=ne.prototype).push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},i.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},i.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(e){return e!=t});this.g.set(e,n),n.length||this.g.delete(e)}},i.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},i.size=function(){return this.g.size},i.keys=function(){return Array.from(this.g.keys())},(i=oe.prototype).release=function(){this.Qa(),this.g=null},i.D=function(e,t,n,o){this.g&&(e=new ie(e,t,n,o),this.g.push(t,e))},i.Aa=function(e,t,n,o){var i=this;this.D(e,t,function o(r){i.Ma(e,t,o),n(r)},o)},i.Ma=function(e,t,n){if(this.g)for(var o=this.g.get(t)||[],i=(o=g(o)).next();!i.done;i=o.next())(i=i.value).target!=e||n!=i.listener&&n||(i.Ma(),this.g.remove(t,i))},i.Qa=function(){if(this.g){for(var e=[],t=g(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,y(n.value));for(t=(e=g(e)).next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},$("shaka.util.EventManager",oe),oe.prototype.removeAll=oe.prototype.Qa,oe.prototype.unlisten=oe.prototype.Ma,oe.prototype.listenOnce=oe.prototype.Aa,oe.prototype.listen=oe.prototype.D,oe.prototype.release=oe.prototype.release,ie.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var re=void 0;function se(e){this.h=e,this.g=void 0}
/*
      		 @license
      		 Shaka Player
      		 Copyright 2025 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/
function ae(){return ce.value()}$("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),se.prototype.value=function(){return void 0===this.g&&(this.g=this.h()),this.g};var le=null,ue=null,ce=new se(function(){var e=void 0;return le&&(e=le()),!e&&ue&&(e=ue()),e});function de(e,t){this.g=e,this.h=t}function pe(e,t){var n=new de(5,0),o=me,i=o.g,r=n.h-i.h;((n.g-i.g||r)>0?o.i:o.h)(o.g,n,e,t)}function he(e,t,n,o){K([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",o].join(" "))}function fe(e,t,n,o){W([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",o].join(" "))}de.prototype.toString=function(){return"v"+this.g+"."+this.h};var me=null,ge=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
      		 @license
      		 Copyright 2008 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/
/*
      		 @license
      		 Copyright 2006 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/
function ye(e){var t;e instanceof ye?(ve(this,e.bc),this.hd=e.hd,be(this,e.Eb),xe(this,e.Cd),this.qb=e.qb,we(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(ge))?(ve(this,t[1]||"",!0),this.hd=Se(t[2]||""),be(this,t[3]||"",!0),xe(this,t[4]),this.qb=Se(t[5]||"",!0),we(this,t[6]||"",!0),this.Rc=Se(t[7]||"")):this.g=new Re(null)}function ve(e,t,n){e.bc=n?Se(t,!0):t,e.bc&&(e.bc=e.bc.replace(/:$/,""))}function be(e,t,n){e.Eb=n?Se(t,!0):t}function xe(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Cd=t}else e.Cd=null}function we(e,t,n){t instanceof Re?e.g=t:(n||(t=Te(t,Ee)),e.g=new Re(t))}function Se(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Te(e,t,n){return null!=e?(e=encodeURI(e).replace(t,ke),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ke(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=ye.prototype).bc="",i.hd="",i.Eb="",i.Cd=null,i.qb="",i.Rc="",i.toString=function(){var e=[],t=this.bc;if(t&&e.push(Te(t,Ce,!0),":"),t=this.Eb){e.push("//");var n=this.hd;n&&e.push(Te(n,Ce,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Cd)&&e.push(":",String(t))}return(t=this.qb)&&(this.Eb&&"/"!=t.charAt(0)&&e.push("/"),e.push(Te(t,"/"==t.charAt(0)?Ie:Ae,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",Te(t,Me)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.bc&&(t=new ye);var n=!!e.bc;n?ve(t,e.bc):n=!!e.hd,n?t.hd=e.hd:n=!!e.Eb,n?be(t,e.Eb):n=null!=e.Cd;var o=e.qb;if(n)xe(t,e.Cd);else if(n=!!e.qb){if("/"!=o.charAt(0))if(this.Eb&&!this.qb)o="/"+o;else{var i=t.qb.lastIndexOf("/");-1!=i&&(o=t.qb.substr(0,i+1)+o)}if(".."==o||"."==o)o="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){i=0==o.lastIndexOf("/",0),o=o.split("/");for(var r=[],s=0;s<o.length;){var a=o[s++];"."==a?i&&s==o.length&&r.push(""):".."==a?((r.length>1||1==r.length&&""!=r[0])&&r.pop(),i&&s==o.length&&r.push("")):(r.push(a),i=!0)}o=r.join("/")}}return n?t.qb=o:n=""!==e.g.toString(),n?we(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},i.clone=function(){return new ye(this)};var Ce=/[#\/\?@]/g,Ae=/[#\?:]/g,Ie=/[#\?]/g,Ee=/[#\?@]/g,Me=/#/g;function Re(e){this.g=e||null}function _e(e){if(!e.eb&&(e.eb=new Map,e.Qd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var o=t[n].indexOf("="),i=null;if(o>=0){var r=t[n].substring(0,o);i=t[n].substring(o+1)}else r=t[n];r=decodeURIComponent(r),i=i||"",e.add(r,decodeURIComponent(i))}}function Le(e){return _e(e),e.Qd}function Pe(){}function De(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ne(e);t=Ne(t);for(var o=0;o<e.byteLength;o++)if(n[o]!=t[o])return!1;return!0}function Oe(e){return ArrayBuffer.isView(e)?0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function Ne(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Ue(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint16Array)}function Be(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Fe(e,t,n,o){var i=ArrayBuffer.isView(e)?e.buffer:e,r=1;"BYTES_PER_ELEMENT"in o&&(r=o.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/r;return new o(i,e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/r,s))),Math.floor(Math.min(e+Math.max(n,0),s))-e)}function je(e,t,n){var o=O.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=o,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(i){this.stack=i.stack}}function ze(){}function $e(t){if(!t)return"";if(239==(t=Ne(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!ae().sh())return(t=(new TextDecoder).decode(t)).includes("�")&&W('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",o=0;o<t.length;++o){var i=65533;if(128&t[o]?t.length>=o+2&&192==(224&t[o])&&128==(192&t[o+1])?(i=(31&t[o])<<6|63&t[o+1],o+=1):t.length>=o+3&&224==(240&t[o])&&128==(192&t[o+1])&&128==(192&t[o+2])?(i=(15&t[o])<<12|(63&t[o+1])<<6|63&t[o+2],o+=2):t.length>=o+4&&240==(241&t[o])&&128==(192&t[o+1])&&128==(192&t[o+2])&&128==(192&t[o+3])&&(i=(7&t[o])<<18|(63&t[o+1])<<12|(63&t[o+2])<<6|63&t[o+3],o+=3):i=t[o],i<=65535)n+=String.fromCharCode(i);else{var r=1023&(i-=65536);n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+r)}}return n}function Ve(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new je(2,2,2004);n=Math.floor(e.byteLength/2);var o=new Uint16Array(n);e=Be(e);for(var i=0;i<n;i++)o[i]=e.getUint16(2*i,t);return We(o)}function He(e){function t(e){return n.byteLength<=e||n[e]>=9&&n[e]<=126}if(!e)return"";var n=Ne(e);if(239==n[0]&&187==n[1]&&191==n[2])return $e(n);if(254==n[0]&&255==n[1])return Ve(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Ve(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Ve(e,!1);if(0==n[1]&&0==n[3])return Ve(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return $e(e);throw new je(2,2,2003)}function Ge(t){if(e.TextEncoder&&!ae().sh()){var n=new TextEncoder;return Oe(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var o=0;o<t.length;o++)n[o]=t[o].charCodeAt(0);return Oe(n)}function qe(e,t){for(var n=new ArrayBuffer(2*e.length),o=new DataView(n),i=0;i<e.length;++i)o.setUint16(2*i,e.charCodeAt(i),t);return n}function We(e){return Xe.value()(e)}function Ke(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(e){return"#"==e[1]?(e="x"==e[2]||"X"==e[2]?parseInt(e.substring(3),16):parseInt(e.substring(2),10))>=0&&e<=1114111?String.fromCodePoint(e):"":t[e]||"'"}):e||""}(i=Re.prototype).eb=null,i.Qd=null,i.add=function(e,t){_e(this),this.g=null;var n=this.eb.has(e)?this.eb.get(e):null;return n||this.eb.set(e,n=[]),n.push(t),this.Qd++,this},i.set=function(e,t){return _e(this),this.g=null,this.eb.has(e)?this.eb.set(e,[t]):this.add(e,t),this},i.get=function(e){return _e(this),this.eb.get(e)||[]},i.toString=function(){if(this.g)return this.g;if(!this.eb||!this.eb.size)return"";for(var e=[],t=g(this.eb.keys()),n=t.next();!n.done;n=t.next()){var o=n.value;n=encodeURIComponent(o),o=this.eb.get(o);for(var i=0;i<o.length;i++){var r=n;""!==o[i]&&(r+="="+encodeURIComponent(o[i])),e.push(r)}}return this.g=e.join("&")},i.clone=function(){var e=new Re;if(e.g=this.g,this.eb){for(var t=new Map,n=g(this.eb),o=n.next();!o.done;o=n.next()){var i=g(o.value);o=i.next().value,i=i.next().value,t.set(o,i.concat())}e.eb=t,e.Qd=this.Qd}return e},$("shaka.util.BufferUtils",Pe),Pe.toDataView=Be,Pe.toUint16=Ue,Pe.toUint8=Ne,Pe.toArrayBuffer=Oe,Pe.equal=De,je.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},$("shaka.util.Error",je),je.Severity={RECOVERABLE:1,CRITICAL:2},je.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},je.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007},$("shaka.util.StringUtils",ze),ze.resetFromCharCode=function(){Xe.g=void 0},ze.toUTF16=qe,ze.toUTF8=Ge,ze.fromBytesAutoDetect=He,ze.fromUTF16=Ve,ze.fromUTF8=$e;var Xe=new se(function(){function e(e){try{var t=new Uint8Array(e);return String.fromCharCode.apply(null,t).length>0}catch(n){return!1}}for(var t={Oc:65536};t.Oc>0;(t={Oc:t.Oc}).Oc/=2)if(e(t.Oc))return function(e){return function(t){for(var n="",o=0;o<t.length;o+=e.Oc)n+=String.fromCharCode.apply(null,t.subarray(o,o+e.Oc));return n}}(t);return null});function Ye(){}function Je(e){return e=We(Ne(e)),btoa(e)}function Qe(e,t){return t=null==t||t,e=Je(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ze(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),o=0;o<t.length;++o)n[o]=t.charCodeAt(o);return n}function et(t){for(var n=t.length/2,o=new Uint8Array(n),i=0;i<n;i++)o[i]=e.parseInt(t.substr(2*i,2),16);return o}function tt(e){var t=Ne(e);e="";for(var n=(t=g(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function nt(){for(var e=O.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var o=n=0;o<e.length;++o){var i=e[o];ArrayBuffer.isView(i)&&1===i.BYTES_PER_ELEMENT?t.set(i,n):t.set(Ne(i),n),n+=i.byteLength}return t}function ot(e,t,n){if(n=void 0===n?"":n,0==t.length)return e;if(1==e.length&&1==t.length){var o=new ye(e[0]);return t=new ye(t[0]),t=o.resolve(t),n&&we(t,n),[t.toString()]}t=t.map(function(e){return new ye(e)}),o=[];for(var i=(e=g(e)).next();!i.done;i=e.next()){i=new ye(i.value);for(var r=g(t),s=r.next();!s.done;s=r.next())s=i.resolve(s.value),n&&we(s,n),o.push(s.toString())}return o}function it(e,t,n,o){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},o&&(e.keySystemUris=new Set([o])),e}function rt(t,n){n=void 0===n?"cenc":n;var o=[],i=[],r=[];t.forEach(function(e,t){var n=t;22!=n.length&&(n=Qe(et(t),!1));var s=e;22!=s.length&&(s=Qe(et(e),!1)),e={kty:"oct",kid:n,k:s},o.push(e),i.push(e.kid),r.push(t)}),t=JSON.stringify({keys:o});var s=JSON.stringify({kids:i});return s=[{initData:Ne(Ge(s)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:s,keyIds:new Set(r)}}function st(e,t){if(1==t.length)return t[0];if(null!=(e=at(e,t)))return e;throw new je(2,4,4025,t)}function at(e,t){for(var n=pt.get(e),o=(n=g(n)).next();!o.done;o=n.next()){o=o.value;for(var i=g(t),r=i.next();!r.done;r=i.next())if(r=r.value,o.test(r.trim()))return r.trim()}return e==ut?"":null}function lt(e,t){for(var n=[],o=(e=g(e=pt.get(e))).next();!o.done;o=e.next()){o=o.value;for(var i=g(t),r=i.next();!r.done;r=i.next())r=r.value,o.test(r.trim())&&n.push(r.trim())}return n}$("shaka.util.Uint8ArrayUtils",Ye),Ye.concat=nt,Ye.toHex=tt,Ye.fromHex=et,Ye.fromBase64=Ze,Ye.toBase64=Qe,Ye.toStandardBase64=Je;var ut="text",ct={Ca:"video",ia:"audio",Na:ut,Uf:"image",ql:"application"},dt=1/15,pt=(new Map).set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function ht(e,t,n,o){this.g=null,this.l=e,this.i=t,this.m=n,this.o=o,this.j=!1;e:{if("undefined"==typeof libDPIModule&&K("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){K("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,pe("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?(K("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||K(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function ft(e,t,n,o){"video"!==o.type||e.o&&!o.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",o.id,-n,!e.o)}function mt(e){e.g&&e.i.classList.add("shaka-hidden")}function gt(e){return!(!e||"undefined"==typeof LCEVCdec)&&"lvc1"==e.codecs}function yt(t){if(xt.has(t))return xt.get(t);var n=e.ManagedMediaSource||e.MediaSource;return!!n&&(n=n.isTypeSupported(t),xt.set(t,n),n)}function vt(){var t=e.ManagedSourceBuffer||e.SourceBuffer;return!!t&&!!t.prototype&&!!t.prototype.changeType}function bt(){var t=e.ManagedMediaSource||e.MediaSource;return!!(t&&t.prototype&&t.prototype.setLiveSeekableRange&&t.prototype.clearLiveSeekableRange)}ht.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},$("shaka.lcevc.Dec",ht),ht.prototype.release=ht.prototype.release;var xt=new Map;function wt(){}function St(){}function Tt(){}function kt(e){this.h=new Map,this.i=0,this.j=new St,(e=At(e.toLowerCase()))&&(this.j=e()),this.g=new wt,(e=Et)&&(this.g=e(),this.h.set(this.i,this.g))}function Ct(e,t){It.set(e,t)}function At(e){return It.get(e)}wt.prototype.extract=function(){},wt.prototype.decode=function(){return[]},wt.prototype.clear=function(){},wt.prototype.getStreams=function(){return[]},St.prototype.init=function(){},St.prototype.parse=function(){return[]},(i=Tt.prototype).init=function(){},i.xf=function(){},i.Ld=function(){},i.remove=function(){},i.Vf=function(){},$("shaka.media.IClosedCaptionParser",Tt),(i=kt.prototype).init=function(e,t,n){if(t=void 0!==t&&t,-1!=(n=void 0===n?-1:n)&&this.i!=n){t=n;var o=this.h.get(t);this.h.set(this.i,this.g),o?this.g=o:((o=Et)&&(this.g=o()),this.h.set(t,this.g))}else t||this.Ld();this.j.init(e),-1!=n&&(this.i=n)},i.xf=function(e){for(var t=(e=g(e=this.j.parse(e))).next();!t.done;t=e.next()){var n=Ne((t=t.value).packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},i.Ld=function(){this.g.clear()},i.remove=function(e){e=void 0===e?[]:e,e=new Set(e);for(var t=g(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var o=this.h.get(n);o&&o.clear(),this.h.delete(n)}},i.Vf=function(){return this.g.getStreams()},$("shaka.media.ClosedCaptionParser",kt),kt.findDecoder=function(){return Et},kt.unregisterDecoder=function(){Et=null},kt.registerDecoder=function(e){Et=e},kt.findParser=At,kt.unregisterParser=function(e){It.delete(e)},kt.registerParser=Ct;var It=new Map,Et=null;function Mt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Rt,this.scroll=_t}$("shaka.text.CueRegion",Mt);var Rt=1;Mt.units={PX:0,PERCENTAGE:Rt,LINES:2};var _t="";function Lt(e){this.h=e||"",this.g=0}function Pt(e){Dt(e,/[ \t]+/gm)}function Dt(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Ot(e){return e.g==e.h.length?null:(e=Dt(e,/[^ \t\n]*/gm))?e[0]:null}function Nt(e){if(null==(e=Dt(e,Bt)))return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Ut(e){return e?Nt(new Lt(e)):null}Mt.scrollMode={NONE:_t,UP:"up"};var Bt=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Ft(){}function jt(e){var t=new WeakSet;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||ArrayBuffer.isView(n))return n;if(t.has(n))return null;var o=Array.isArray(n);if(n.constructor!=Object&&!o)return null;t.add(n);var i,r=o?[]:{};for(i in n)r[i]=e(n[i]);return o&&(r.length=n.length),r}}(e)}function zt(e){var t,n={};for(t in e)n[t]=e[t];return n}function $t(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var o=n.toString(),i=e[n];void 0!==i&&(i=$t(i))&&t.push(o+":"+i)}e="["+t.join(",")+"]"}else if("function"==typeof e)e="";else if(e instanceof Object){for((n=Object.keys(e)).sort(),t=[],o=(n=g(n)).next();!o.done;o=n.next())i=o.value,o=JSON.stringify(i),void 0!==(i=e[i])&&(i=$t(i))&&t.push(o+":"+i);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}
/*
      		 @license
      		 tXml
      		 Copyright 2015 Tobias Nickel
      		 SPDX-License-Identifier: MIT
      		*/
function Vt(e,t){var n=void 0!==n&&n;return Ht(e=He(e),t,n)}function Ht(e,t,n){return e=function(e,t){function n(r,s){s=void 0!==s&&s;for(var a=[];e[i];)if(60==e.charCodeAt(i)){if(47===e.charCodeAt(i+1)){s=i+2,i=e.indexOf(">",i);var l=(s=e.substring(s,i)).indexOf(r);if(-1==l){var u=r.indexOf(".");u>0&&(l=s.indexOf(r.substring(0,u)))}if(-1==l)throw r=e.substring(0,i).split("\n"),Error("Unexpected close tag\nLine: "+(r.length-1)+"\nColumn: "+(r[r.length-1].length+1)+"\nChar: "+e[i]);i+1&&(i+=1);break}if(33===e.charCodeAt(i+1)){if(45==e.charCodeAt(i+2)){for(;-1!==i&&(62!==e.charCodeAt(i)||45!=e.charCodeAt(i-1)||45!=e.charCodeAt(i-2)||-1==i);)i=e.indexOf(">",i+1);-1===i&&(i=e.length)}else if(91===e.charCodeAt(i+2)&&91===e.charCodeAt(i+8)&&"cdata"===e.substr(i+3,5).toLowerCase()){-1==(l=e.indexOf("]]>",i))?(a.push(e.substr(i+9)),i=e.length):(a.push(e.substring(i+9,l)),i=l+3);continue}i++;continue}e:{u=s,i++;var c=o(),d={};for(l=[];62!==e.charCodeAt(i)&&e[i];){var p=e.charCodeAt(i);if(p>64&&p<91||p>96&&p<123){p=o();for(var h=e.charCodeAt(i);h&&39!==h&&34!==h&&!(h>64&&h<91||h>96&&h<123)&&62!==h;)i++,h=e.charCodeAt(i);var f=i+1;if(i=e.indexOf(e[i],f),f=e.slice(f,i),39===h||34===h){if(-1===i){if(u={tagName:c,attributes:d,children:l,parent:null},t)for(c=0;c<l.length;c++)"string"!=typeof l[c]&&(l[c].parent=u);l=u;break e}}else f=null,i--;if(p.startsWith("xmlns:")){h=f;var m=p.split(":")[1];xn.set(h,m),wn.set(m,h)}"tt"===c&&"xml:space"===p&&"preserve"===f&&(u=!0),d[p]=f}i++}for(47!==e.charCodeAt(i-1)?(i++,l=n(c,u)):i++,u={tagName:c,attributes:d,children:l,parent:null},c=l.length,d=0;d<c;d++)"string"!=typeof(p=l[d])?t&&(p.parent=u):d==c-1&&"\n"==p&&l.pop();l=u}if(a.push(l),"string"==typeof l)break;"?"===l.tagName[0]&&l.children&&(a.push.apply(a,y(l.children)),l.children=[])}else l=i,-2==(i=e.indexOf("<",i)-1)&&(i=e.length),l=e.slice(l,i+1),s?l.length>0&&a.push(l):(a.length&&1==l.length&&"\n"==l[0]||l.trim().length>0)&&a.push(l),i++;return a}function o(){for(var t=i;-1==="\r\n\t>/= ".indexOf(e[i])&&e[i];)i++;return e.slice(t,i)}var i=0;return n("")}(e,void 0!==n&&n),!t&&e.length?e[0]:(e=e.find(function(e){return t.split(",").includes(e.tagName)}))?e:null}function Gt(e){return xn.has(e)?xn.get(e):""}function qt(e){return"string"==typeof e}function Wt(e){var t=[];if(!e.children)return[];for(var n=(e=g(e.children)).next();!n.done;n=e.next())"string"!=typeof(n=n.value)&&t.push(n);return t}function Kt(e,t){var n=[];if(!e.children)return[];for(var o=(e=g(e.children)).next();!o.done;o=e.next())(o=o.value).tagName===t&&n.push(o);return n}function Xt(e){return"string"==typeof e?Ke(e):""===(e=e.children.reduce(function(e,t){return"string"==typeof t?e+t:e},""))?null:Ke(e)}function Yt(e){return Array.from(e.children).every(function(e){return"string"==typeof e})?((e=Xt(e))&&(e=e.trim()),e):null}function Jt(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children)for(var o=(e=g(e.children)).next();!o.done;o=e.next())Jt(o.value,t,n);return n}function Qt(e,t){return 1!=(e=Kt(e,t)).length?null:e[0]}function Zt(e,t,n){return 1!=(e=nn(e,t,n)).length?null:e[0]}function en(e,t,n,o){o=void 0===o?null:o;var i=null;return null!=(e=e.attributes[t])&&(i=n(e)),null==i?o:i}function tn(e,t,n){return t=Gt(t),e.attributes[t+":"+n]||null}function nn(e,t,n){var o=Gt(t);if(t=[],e.children)for(n=o?o+":"+n:n,o=(e=g(e.children)).next();!o.done;o=e.next())(o=o.value)&&o.tagName===n&&t.push(o);return t}function on(e,t,n){for(var o=(t=g(t)).next();!o.done;o=t.next())if(o=tn(e,o.value,n))return o;return null}function rn(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function sn(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function an(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function ln(e){return(e=Number(e))%1==0?e:null}function un(e){return(e=Number(e))%1==0&&e>0?e:null}function cn(e){return(e=Number(e))%1==0&&e>=0?e:null}function dn(e){return e=Number(e),isNaN(e)?null:e}function pn(e){return!!e&&"true"===e.toLowerCase()}function hn(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function fn(e){for(var t=[],n=(e=g(e=Ke(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))).next();!n.done;n=e.next()){var o=(n=n.value).match(/^([\w]+)/);if(o){var i=n.match(/(@id='(.*?)')/),r=n.match(/(@t='(\d+)')/),s=n.match(/(@n='(\d+)')/),a=n.match(/\[(\d+)\]/);t.push({name:o[0],id:i?i[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:r?Number(r[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:a?Number(a[1])-1:null,Cc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Cc=n.slice(1))}return t}function mn(e,t){var n=fn(t.attributes.sel||"");if(n.length){var o=n[n.length-1],i=t.attributes.pos||null;null==(n=o.position)&&(null!==o.t&&(n=gn(e,"t",o.t)),null!==o.n&&(n=gn(e,"n",o.n))),null===n?n="prepend"===i?0:e.length:"prepend"===i?--n:"after"===i&&++n,i=t.tagName,(o=o.Cc)&&e[n]?yn(e[n],i,o,Yt(t)||""):("remove"!==i&&"replace"!==i||e.splice(n,1),"add"!==i&&"replace"!==i||e.splice.apply(e,[n,0].concat(y(t.children))))}}function gn(e,t,n){for(var o=0,i=(e=g(e)).next();!i.done;i=e.next()){if(Number(i.value.attributes[t])===n)return o;o++}return null}function yn(e,t,n,o){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=o)}function vn(e){var t="",n=e.tagName.split(":");for(var o in n.length>0&&(t=n[0],t=wn.has(t)?wn.get(t):""),t=document.createElementNS(t,e.tagName),e.attributes)t.setAttribute(o,e.attributes[o]);for(o=(e=g(e.children)).next();!o.done;o=e.next())n=void 0,n="string"==typeof(o=o.value)?new Text(o):vn(o),t.appendChild(n);return t}function bn(e){if(!e)return null;for(var t={tagName:e.tagName,attributes:zt(e.attributes),children:[],parent:null},n=(e=g(e.children)).next();!n.done;n=e.next())"string"==typeof(n=n.value)||((n=bn(n)).parent=t),t.children.push(n);return t}$("shaka.util.ObjectUtils",Ft),Ft.alphabeticalKeyOrderStringify=$t,Ft.shallowCloneObject=zt,Ft.cloneObject=jt;var xn=new Map,wn=new Map;function Sn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Mt,this.position=null,this.positionAlign=Mn,this.size=0,this.textAlign=Rn,this.direction=Dn,this.writingMode=On,this.lineInterpretation=Nn,this.line=null,this.lineHeight="",this.lineAlign=Un,this.displayAlign=Ln,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=zn,this.fontStyle=Vn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function Tn(e,t){return(e=new Sn(e,t,"")).lineBreak=!0,e}function kn(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!te(e.nestedCues,t.nestedCues,kn))return!1}else if("region"==n||"cellResolution"==n){for(var o in e[n])if(e[n][o]!=t[n][o])return!1}else if(Array.isArray(e[n])){if(!te(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function Cn(e,t){t=void 0===t?new Map:t;var n=e.payload;if(n.includes("<")){0===t.size&&An(t);var o=n;n=[];for(var i=-1,r=0;r<o.length;r++)"<"===o[r]?i=r+1:">"===o[r]&&i>0&&((i=o.substr(i,r-i)).match(Wn)&&n.push(i),i=-1);for(r=(n=g(n)).next();!r.done;r=n.next())r=r.value,o=o.replace("<"+r+">",'<div time="'+r+'">'),o+="</div>";e:{r=o,i=[];var s=-1;n="",o=!1;for(var a=0;a<r.length;a++)if("/"===r[a]){var l=r.indexOf(">",a);if(-1===l){n=r;break e}if((l=r.substring(a+1,l))&&"v"==l){o=!0;var c=null;if(i.length&&(c=i[i.length-1]),c){if(c===l)n+="/"+l+">";else{if(!c.startsWith("v")){n+=r[a];continue}n+="/"+c+">"}a+=l.length+1}else n+=r[a]}else n+=r[a]}else"<"===r[a]?"v"!=r[s=a+1]&&(s=-1):">"===r[a]&&s>0&&(i.push(r.substr(s,a-s)),s=-1),n+=r[a];for(i=(r=g(i)).next();!i.done;i=r.next())s=(i=i.value).replace(" ",".voice-"),n=(n=n.replace("<"+i+">","<"+s+">")).replace("</"+i+">","</"+s+">"),o||(n+="</"+s+">")}n=function(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(e){return t[e]||""}):e||""}(n),e.payload="";try{var d=Ht("<span>"+n+"</span>","span")}catch(u){}if(d)if(1!=(d=d.children).length||d[0].tagName)for(n=(d=g(d)).next();!n.done;n=d.next())In(n.value,e,t);else e.payload=Ke(n);else e.payload=Ke(n)}else e.payload=Ke(n)}function An(e){for(var t=g(Object.entries(Fn)),n=t.next();!n.done;n=t.next()){var o=g(n.value);n=o.next().value,o=o.next().value;var i=new Sn(0,0,"");i.color=o,e.set("."+n,i)}for(n=(t=g(Object.entries(jn))).next();!n.done;n=t.next())n=(o=g(n.value)).next().value,o=o.next().value,(i=new Sn(0,0,"")).backgroundColor=o,e.set("."+n,i)}function In(e,t,n){var o=t.clone();if(o.nestedCues=[],o.payload="",o.rubyTag="",o.line=null,o.region=new Mt,o.position=null,o.size=0,o.textAlign=Rn,e.tagName)for(var i=g(e.tagName.split(/(?=[ .])+/g)),r=i.next();!r.done;r=i.next()){var s=r=r.value;if(s.startsWith(".voice-")){var a=s.split("-").pop();s='v[voice="'+a+'"]',n.has(s)||(s="v[voice="+a+"]")}switch(n.has(s)&&(a=o,s=n.get(s))&&(a.backgroundColor=En(s.backgroundColor,a.backgroundColor),a.color=En(s.color,a.color),a.fontFamily=En(s.fontFamily,a.fontFamily),a.fontSize=En(s.fontSize,a.fontSize),a.textShadow=En(s.textShadow,a.textShadow),a.fontWeight=s.fontWeight,a.fontStyle=s.fontStyle,a.opacity=s.opacity,a.rubyTag=s.rubyTag,a.textCombineUpright=s.textCombineUpright,a.wrapLine=s.wrapLine),r){case"br":return o=Tn(o.startTime,o.endTime),void t.nestedCues.push(o);case"b":o.fontWeight=$n;break;case"i":o.fontStyle=Hn;break;case"u":o.textDecoration.push(qn);break;case"font":(r=e.attributes.color)&&(o.color=r);break;case"div":if(!(r=e.attributes.time))break;(r=Ut(r))&&(o.startTime=r);break;case"ruby":case"rp":case"rt":o.rubyTag=r}}if(i=e.children,qt(e)||1==i.length&&qt(i[0]))for(n=Xt(e).split("\n"),e=!0,i=(n=g(n)).next();!i.done;i=n.next())i=i.value,e||(e=Tn(o.startTime,o.endTime),t.nestedCues.push(e)),i.length>0&&((e=o.clone()).payload=Ke(i),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(o),e=(t=g(i)).next();!e.done;e=t.next())In(e.value,o,n)}function En(e,t){return e&&e.length>0?e:t}Sn.prototype.clone=function(){var e,t=new Sn(0,0,"");for(e in this)t[e]=this[e],Array.isArray(t[e])&&(t[e]=t[e].slice());return t},$("shaka.text.Cue",Sn),Sn.parseCuePayload=Cn,Sn.equal=kn,Sn.prototype.clone=Sn.prototype.clone;var Mn="auto";Sn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Mn};var Rn="center",_n={LEFT:"left",RIGHT:"right",CENTER:Rn,START:"start",END:"end"};Sn.textAlign=_n;var Ln="after",Pn={BEFORE:"before",CENTER:"center",AFTER:Ln};Sn.displayAlign=Pn;var Dn="ltr";Sn.direction={HORIZONTAL_LEFT_TO_RIGHT:Dn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var On="horizontal-tb";Sn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:On,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Nn=0;Sn.lineInterpretation={LINE_NUMBER:Nn,PERCENTAGE:1};var Un="start",Bn={CENTER:"center",START:Un,END:"end"};Sn.lineAlign=Bn;var Fn={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Sn.defaultTextColor=Fn;var jn={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Sn.defaultTextBackgroundColor=jn;var zn=400,$n=700;Sn.fontWeight={NORMAL:zn,BOLD:$n};var Vn="normal",Hn="italic",Gn={NORMAL:Vn,ITALIC:Hn,OBLIQUE:"oblique"};Sn.fontStyle=Gn;var qn="underline";Sn.textDecoration={UNDERLINE:qn,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Wn=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Kn(){}function Xn(e,t,n){Jn.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,yf:t})}function Yn(e,t){for(var n=e.toLowerCase().split(";")[0],o=g([to,eo,Zn,Qn]),i=o.next();!i.done;i=o.next())if(i=Jn.get(n+"-"+i.value)){var r=i.yf(),s=r.isSupported(e,t);if(r.destroy(),s)return i.yf}return null}Kn.prototype.destroy=function(){},$("shaka.transmuxer.TransmuxerEngine",Kn),Kn.findTransmuxer=Yn,Kn.unregisterTransmuxer=function(e,t){Jn.delete(e.toLowerCase().split(";")[0]+"-"+t)},Kn.registerTransmuxer=Xn,Kn.prototype.destroy=Kn.prototype.destroy;var Jn=new Map,Qn=1,Zn=2,eo=3,to=4;function no(){}function oo(e,t){var n=e;return t&&!fo.includes(e)&&(n+='; codecs="'+t+'"'),n}function io(e,t){return t&&(e+='; codecs="'+t+'"'),e}function ro(e,t,n){var o=oo(e,t);return Yn(t=io(e,t))?(e=Yn(t))?(n=(e=e()).convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?o.replace("video","audio"):o,n}function so(e){return e.split(";")[0].split("/")[1]}function ao(e){var t=ho(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:case"ac3"===e:case"ac-3"===e:return"ac-3";case"mp4a"===e&&"a6"===t:case"eac3"===e:case"ec-3"===e:return"ec-3";case"ac-4"===e:return"ac-4";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"vp09"===e:case"vp9"===e:return"vp9";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"vvc1"===e:case"vvi1"===e:return"vvc";case"dvh1"===e:case"dvhe"===e:return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1";case"dvc1"===e:case"dvi1"===e:return"dovi-vvc"}return e}function lo(e){for(var t=[],n=(e=g(e.split(","))).next();!n.done;n=e.next())n=ho(n.value),t.push(n[0]);return t.sort().join(",")}function uo(e){return e.split(";")[0]}function co(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function po(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function ho(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}Kn.PluginPriority={FALLBACK:Qn,PREFERRED_SECONDARY:Zn,PREFERRED:eo,APPLICATION:to},$("shaka.util.MimeUtils",no),no.getFullTypeWithAllCodecs=io,no.getFullType=oo,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var fo=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function mo(e){this.i=null,this.j=e,this.C=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.F="",this.B=function(){},this.o=new Map}function go(e,t){wo.set(e,t)}function yo(e){return wo.get(e)}function vo(e){return!!wo.has(e)||("application/cea-608"==e||"application/cea-708"==e)&&!!Et}function bo(e,t,n){if(e.F=t,t=e.o.get(t))for(var o=g(t.keys()),i=o.next();!i.done;i=o.next())(i=t.get(i.value).filter(function(e){return e.endTime<=n}))&&e.j.append(i)}function xo(e,t,n){t.startTime+=n,t.endTime+=n;for(var o=(t=g(t.nestedCues)).next();!o.done;o=t.next())xo(e,o.value,n)}mo.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},mo.prototype.remove=function(e,t){var n=this;return D(function(o){if(1==o.g)return S(o,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),T(o)})},$("shaka.text.TextEngine",mo),mo.prototype.destroy=mo.prototype.destroy,mo.findParser=yo,mo.unregisterParser=function(e){wo.delete(e)},mo.registerParser=go;var wo=new Map;function So(e){this.h=e,this.g=null}function To(e){this.h=e,this.g=null}function ko(e,t){return e.concat(t)}function Co(){}function Ao(e){return null!=e}function Io(e,t){return Promise.race([t,new Promise(function(t,n){new To(n).ka(e)})])}function Eo(){}function Mo(e,t){return e=Lo(e),t=Lo(t),e.split("-")[0]==t.split("-")[0]}function Ro(e,t){return e=Lo(e),t=Lo(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function _o(e,t){return e=Lo(e),t=Lo(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function Lo(e){var t=(e=g(e.split("-x-"))).next().value;t=void 0===t?"":t,e=void 0===(e=e.next().value)?"":e;var n=g(t.split("-"));return t=void 0===(t=n.next().value)?"":t,n=void 0===(n=n.next().value)?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Uo.get(t)||t,((n=n.toUpperCase())?t+"-"+n:t)+(e?"-"+e:"")}function Po(e,t){return e=Lo(e),(t=Lo(t))==e?4:Ro(t,e)?3:_o(t,e)?2:Ro(e,t)?1:0}function Do(e){var t=e.indexOf("-");return e=(e=t>=0?e.substring(0,t):e).toLowerCase(),Uo.get(e)||e}function Oo(e){return e.language?Lo(e.language):e.audio&&e.audio.language?Lo(e.audio.language):e.video&&e.video.language?Lo(e.video.language):"und"}function No(e,t){e=Lo(e);for(var n=new Set,o=(t=g(t)).next();!o.done;o=t.next())n.add(Lo(o.value));for(o=(t=g(n)).next();!o.done;o=t.next())if((o=o.value)==e)return o;for(o=(t=g(n)).next();!o.done;o=t.next())if(Ro(o=o.value,e))return o;for(o=(t=g(n)).next();!o.done;o=t.next())if(_o(o=o.value,e))return o;for(t=(n=g(n)).next();!t.done;t=n.next())if(Ro(e,t=t.value))return t;return null}So.prototype.ka=function(t){var n=this;this.stop();var o=!0,i=null;return this.g=function(){e.clearTimeout(i),o=!1},i=e.setTimeout(function(){o&&n.h()},1e3*t),this},So.prototype.stop=function(){this.g&&(this.g(),this.g=null)},To.prototype.Kb=function(){return this.stop(),this.h(),this},To.prototype.ka=function(e){var t=this;return this.stop(),this.g=new So(function(){t.h()}).ka(e),this},To.prototype.Fa=function(e){var t=this;return this.stop(),this.g=new So(function(){t.g.ka(e),t.h()}).ka(e),this},To.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},$("shaka.util.Timer",To),To.prototype.stop=To.prototype.stop,To.prototype.tickEvery=To.prototype.Fa,To.prototype.tickAfter=To.prototype.ka,To.prototype.tickNow=To.prototype.Kb,$("shaka.util.LanguageUtils",Eo),Eo.findClosestLocale=No,Eo.getLocaleForVariant=Oo,Eo.getLocaleForText=function(e){return Lo(e.language||"und")},Eo.getBase=Do,Eo.relatedness=Po,Eo.areSiblings=function(e,t){var n=Do(e),o=Do(t);return e!=n&&t!=o&&n==o},Eo.normalize=Lo,Eo.isSiblingOf=_o,Eo.isParentOf=Ro,Eo.areLanguageCompatible=Mo,Eo.areLocaleCompatible=function(e,t){return(e=Lo(e))==(t=Lo(t))};var Uo=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Bo(){}function Fo(e,t,n,o,i){function r(e){var t=String(e.width||"")+String(e.height||"")+String(Math.round(e.frameRate||0))+(e.hdr||"")+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),e.roles&&(t+=e.roles.sort().join("_")),t}function s(e){var t=e.language+(e.channelsCount||0)+(e.audioSamplingRate||0)+e.roles.join(",")+e.label+e.groupId+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),t}if(i.length){for(var a=e.textStreams,l=(i=g(i)).next(),u={};!l.done;u={Ch:void 0},l=i.next())if(u.Ch=l.value,(l=a.filter(function(e){return function(t){return!(!t.codecs.startsWith(e.Ch)&&!t.mimeType.startsWith(e.Ch))}}(u))).length){a=l;break}e.textStreams=a}if(a=e.variants,(t.length||n.length)&&(a=function(e,t,n){for(var o=(t=g(t)).next(),i={};!o.done;i={videoCodec:void 0},o=t.next())if(i.videoCodec=o.value,o=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.videoCodec)}}(i)),o.length){e=o;break}for(n=g(n),t=n.next(),o={};!t.done;o={audioCodec:void 0},t=n.next())if(o.audioCodec=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.audioCodec)}}(o)),t.length){e=t;break}return e}(a,t,n)),o.length){for(t=new ne,a=(n=g(a)).next();!a.done;a=n.next())a=a.value,t.push(String(a.video.width||0),a);var c=[];t.forEach(function(e,t){e=0;for(var n=[],i=(t=g(t)).next(),r={};!i.done;r={Tf:void 0},i=t.next())r.Tf=i.value,i=o.filter(function(e){return function(t){return e.Tf.decodingInfos[0][t]}}(r)).length,i>e?(e=i,n=[r.Tf]):i==e&&n.push(r.Tf);c.push.apply(c,y(n))}),a=c}for(n=new Set,t=new Set,i=(a=g(a)).next();!i.done;i=a.next())(i=i.value).audio&&n.add(i.audio),i.video&&t.add(i.video);a=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var d=[];for(n=new Map,i=(a=g(a)).next();!i.done;i=a.next()){if(l=s(i=i.value),(u=n.get(l)||[]).length){var p=u[u.length-1],h=ao(p.codecs),f=ao(i.codecs);h!=f||i.bandwidth&&p.bandwidth&&!(i.bandwidth>p.bandwidth)||(u.push(i),d.push(i.id))}else u.push(i),d.push(i.id);n.set(l,u)}var m={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};a=Array.from(t).sort(function(e,t){if(!e.bandwidth||!t.bandwidth||e.bandwidth==t.bandwidth){if(e.codecs&&t.codecs&&e.codecs!=t.codecs&&e.width==t.width){var n=ao(e.codecs),o=ao(t.codecs);if(n!=o)return(m[n]||1)-(m[o]||1)}return e.width-t.width}return e.bandwidth-t.bandwidth}),t=vt();var v=[];for(n=new Map,i=(a=g(a)).next();!i.done;i=a.next()){if(l=r(i=i.value),(u=n.get(l)||[]).length){if(p=u[u.length-1],!t&&(h=ao(p.codecs))!==(f=ao(i.codecs)))continue;(h=ao(p.codecs))!=(f=ao(i.codecs))||i.bandwidth&&p.bandwidth&&!(i.bandwidth>p.bandwidth)||(u.push(i),v.push(i.id))}else u.push(i),v.push(i.id);n.set(l,u)}e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,!(t&&!d.includes(t.id)||e&&!v.includes(e.id))})}function jo(e,t,n){function o(e,t,n){return e>=t&&e<=n}var i=e.video;if(i&&i.width&&i.height){var r=i.width,s=i.height;if(s>r&&(r=(s=g([s,r])).next().value,s=s.next().value),!o(r,t.minWidth,Math.min(t.maxWidth,n.width))||!o(s,t.minHeight,Math.min(t.maxHeight,n.height))||!o(i.width*i.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!o(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!o(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!o(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function zo(e,t,n,o){return n=void 0===n?[]:n,o=void 0===o?{}:o,D(function(i){return 1==i.g?S(i,$o(e,t,t.offlineSessionIds.length>0,n,o),2):(function(e){e.textStreams=e.textStreams.filter(function(e){return vo(e=oo(e.mimeType,e.codecs))})}(t),S(i,function(e){var t,n,o,i,r,s,a;return D(function(l){switch(l.g){case 1:t=[],n=g(e.imageStreams),o=n.next();case 2:if(o.done){l.A(4);break}if(i=o.value,"application/mp4"==(r=i.mimeType)&&"mjpg"==i.codecs&&(r="image/jpg"),pi.has(r)){l.A(5);break}if(!(s=hi.get(r))){pi.set(r,!1),l.A(5);break}return S(l,function(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}(s),7);case 7:a=l.h,pi.set(r,a);case 5:pi.get(r)&&t.push(i),o=n.next(),l.A(2);break;case 4:e.imageStreams=t,T(l)}})}(t),0))})}function $o(e,t,n,o,i){var r,s;return D(function(a){if(1==a.g)return ae().Ui()&&function(e){for(var t=(new Map).set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set,o=(e=g(e)).next();!o.done;o=e.next())(o=o.value).video&&n.add(o.video);for(n=g(n),e=n.next();!e.done;e=n.next()){e=e.value;for(var i=(o=g(t)).next();!i.done;i=o.next()){var r=g(i.value);if(i=r.next().value,r=r.next().value,e.codecs.includes(i)){e.codecs=e.codecs.replace(i,r);break}}}}(t.variants),S(a,Go(t.variants,n,!1,o),2);r=null,e&&(s=e.g)&&(r=s.keySystem),t.variants=t.variants.filter(function(e){var t=function(e,t,n){if(!e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&(n[e.keySystem]||e.keySystem)!=t)}))return!1;var o=ae(),i="Xbox"===o.Ob();o="MOBILE"===o.Oa()&&"GECKO"===o.Ea();var r=e.video,s=r&&r.width||0,a=r&&r.height||0;return!(i&&r&&(s>1920||a>1080)&&(r.codecs.includes("avc1.")||r.codecs.includes("avc3."))||(i=r&&r.dependencyStream)&&!gt(i)||(e=e.audio,o&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}(e,r,i);if(!t){var n=[];e.audio&&n.push(ai(e.audio)),e.video&&n.push(ai(e.video))}return t}),T(a)})}function Vo(e,t){var n,o,i,r,s,a,l;return D(function(u){if(1==u.g){for(n=function(e,t){if(e){var n=zt(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},o=null,i=[],r=g(t),s=r.next(),a={};!s.done;a={cache:void 0,Oe:void 0},s=r.next())l=s.value,a.Oe=$t(l),a.cache=ci,a.cache.has(a.Oe)?o=n(o,a.cache.get(a.Oe)):i.push(Ho(l).then(function(e){return function(t){for(var i=null,r=(t=g(t||[])).next();!r.done;r=t.next())i=n(i,r.value);i&&(e.cache.set(e.Oe,i),o=n(o,i))}}(a)));return S(u,Promise.all(i),2)}o&&e.decodingInfos.push(o),T(u)})}function Ho(e){var t=[""];e.video&&(t=co(e.video.contentType).split(","));var n=[""];e.audio&&(n=co(e.audio.contentType).split(","));for(var o=[],i=(t=g(t)).next();!i.done;i=t.next()){i=i.value;for(var r=g(n),s=r.next(),a={};!s.done;a={Qc:void 0},s=r.next())s=s.value,a.Qc=jt(e),e.video&&(a.Qc.video.contentType=oo(uo(a.Qc.video.contentType),i)),e.audio&&(a.Qc.audio.contentType=oo(uo(a.Qc.audio.contentType),s)),o.push(new Promise(function(e){return function(t,n){("MOBILE"==ae().Oa()?Io(5,navigator.mediaCapabilities.decodingInfo(e.Qc)):navigator.mediaCapabilities.decodingInfo(e.Qc)).then(function(e){t(e)}).catch(n)}}(a)))}return Promise.all(o).catch(function(){return JSON.stringify(e),null})}function Go(e,t,n,o){var i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w,T;return D(function(k){switch(k.g){case 1:if(e.some(function(e){return e.decodingInfos.length}))return k.return();i=g(o),r=i.next(),s={};case 2:if(r.done){k.A(4);break}s.Ci=r.value,a=!1,l=g(e),u=l.next();case 5:if(u.done){k.A(7);break}c=u.value,d=qo(c,t,n).filter((C=s,function(e){return((e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)===C.Ci})),p=g(d),h=p.next();case 8:if(h.done){k.A(10);break}return f=h.value,S(k,Vo(c,f),9);case 9:h=p.next(),k.A(8);break;case 10:c.decodingInfos.some(function(e){return e.supported})&&(a=!0),u=l.next(),k.A(5);break;case 7:if(a)return k.return();s={Ci:void 0},r=i.next(),k.A(2);break;case 4:m=g(e),y=m.next();case 12:if(y.done){k.A(0);break}v=y.value,b=qo(v,t,n).filter(function(e){return!(e=(e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!o.includes(e)}),x=g(b),w=x.next();case 15:if(w.done){y=m.next(),k.A(12);break}return T=w.value,S(k,Vo(v,T),16);case 16:w=x.next(),k.A(15)}var C})}function qo(e,t,n){var o=e.audio,i=e.video,r=[],s=[];if(i)for(var a=g(i.fullMimeTypes),l=a.next();!l.done;l=a.next()){var u=co(l=l.value);if(u.includes(",")&&!o){var c=u.split(","),d=uo(l);u=st("video",c),d=ro(d,c=Wo(c=st("audio",c),d),"audio"),s.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(u=Ko(u),l={contentType:ro(uo(l),u,"video"),width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||30},i.hdr)switch(i.hdr){case"PQ":l.transferFunction="pq";break;case"HLG":l.transferFunction="hlg"}i.colorGamut&&(l.colorGamut=i.colorGamut),r.push(l)}if(o)for(l=(a=g(o.fullMimeTypes)).next();!l.done;l=a.next())l=ro(l=uo(u=l.value),u=Wo(co(u),l),"audio"),s.push({contentType:l,channels:o.channelsCount||2,bitrate:o.bandwidth||e.bandwidth||1,samplerate:o.audioSamplingRate||1,spatialRendering:o.spatialAudio});for(a=[],0==r.length&&r.push(null),0==s.length&&s.push(null),l=(r=g(r)).next();!l.done;l=r.next())for(l=l.value,d=(u=g(s)).next();!d.done;d=u.next())d=d.value,c={type:n?"file":"media-source"},l&&(c.video=l),d&&(c.audio=d),a.push(c);if(!(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[a];for(e=[],n=new Map,r=(s=g(s)).next();!r.done;r=s.next())r=r.value,n.get(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],l=(r=g(n.keys())).next();!l.done;l=r.next()){for(l=l.value,d=n.get(l),u=new Map,c=(d=g(d)).next();!c.done;c=d.next()){var p=(c=c.value).videoRobustness+","+c.audioRobustness;u.get(p)||u.set(p,[]),u.get(p).push(c)}for(d=(u=g(u.values())).next();!d.done;d=u.next()){d=d.value,c=[];for(var h=(p=g(a)).next();!h.done;h=p.next()){h=Object.assign({},h.value);for(var f={keySystem:l,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},m=g(d),y=m.next();!y.done;y=m.next()){if((y=y.value).initData&&y.initData.length){for(var v=new Set,b=g(y.initData),x=b.next();!x.done;x=b.next())v.add(x.value.initDataType);f.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(f.distinctiveIdentifier="required"),y.persistentStateRequired&&(f.persistentState="required"),y.sessionType&&(f.sessionTypes=[y.sessionType]),o&&(f.audio?(y.encryptionScheme&&(f.audio.encryptionScheme=f.audio.encryptionScheme||y.encryptionScheme),f.audio.robustness=f.audio.robustness||y.audioRobustness):(f.audio={robustness:y.audioRobustness},y.encryptionScheme&&(f.audio.encryptionScheme=y.encryptionScheme)),""==f.audio.robustness&&delete f.audio.robustness),i&&(f.video?(y.encryptionScheme&&(f.video.encryptionScheme=f.video.encryptionScheme||y.encryptionScheme),f.video.robustness=f.video.robustness||y.videoRobustness):(f.video={robustness:y.videoRobustness},y.encryptionScheme&&(f.video.encryptionScheme=y.encryptionScheme)),""==f.video.robustness&&delete f.video.robustness)}h.keySystemConfiguration=f,c.push(h)}e.push(c)}}return e}function Wo(e,t){var n=ae();return"flac"==e.toLowerCase()?"WEBKIT"!=n.Ea()?"flac":"fLaC":"opus"===e.toLowerCase()?"WEBKIT"!=n.Ea()?"opus":"mp4"==so(t)?"Opus":"opus":"ac-3"==e.toLowerCase()&&n.le()?"ec-3":e}function Ko(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Xo(e){var t=e.audio,n=e.video,o=t?t.mimeType:null,i=n?n.mimeType:null,r=t?t.codecs:null,s=n?n.codecs:null,a=t?t.groupId:null,l=[];n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null;var u=[];t&&u.push(t.kind),n&&u.push(n.kind),u=u[0]||null;var c=new Set;if(t)for(var d=g(t.roles),p=d.next();!p.done;p=d.next())c.add(p.value);if(n)for(p=(d=g(n.roles)).next();!p.done;p=d.next())c.add(p.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:u,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:l,audioMimeType:o,videoMimeType:i,codecs:"",audioCodec:r,videoCodec:s,primary:e.primary,roles:Array.from(c),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(o=n.dependencyStream)&&(e.width=o.width||e.width,e.height=o.height||e.height,e.videoCodec=o.codecs||e.videoCodec,e.videoBandwidth&&o.bandwidth&&(e.videoBandwidth+=o.bandwidth)),s.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=i,n=s.split(",");try{e.videoCodec=st("video",n),e.audioCodec=st("audio",n)}catch(h){}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec,e.audioBandwidth&&t.bandwidth&&(e.audioBandwidth+=t.bandwidth)),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Yo(e){return{id:e.id,active:!1,type:ut,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function Jo(e){var t=e.width||null,n=e.height||null,o=null;e.segmentIndex&&(o=Pl(e.segmentIndex));var i=e.tilesLayout;return o&&(i=o.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:i||null,originalImageId:e.originalId}}function Qo(e){return e.__shaka_id||(e.__shaka_id=di++),e.__shaka_id}function Zo(e){var t={id:Qo(e),active:"disabled"!=e.mode,type:ut,bandwidth:0,language:Lo(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:"forced"==e.kind,originalTextId:e.id,originalLanguage:e.language};return"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function ei(e,t){var n=e?e.language:null;if(n={id:Qo(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Lo(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!!e&&"main"==e.kind,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+","+n.videoCodec:n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function ti(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function ni(e){return e.filter(function(e){return ti(e)})}function oi(e,t,n,o){var i=e,r=e.filter(function(e){return e.primary});r.length&&(i=r);var s=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==s}),t){var a=No(Lo(t),e.map(function(e){return e.language}));a&&(i=e.filter(function(e){return Lo(e.language)==a}))}if(i=i.filter(function(e){return e.forced==o}),n){if((e=ii(i,n)).length)return e}else if(e=i.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=i.map(function(e){return e.roles}).reduce(ko,[]),e.length?ii(i,e[0]):i}function ii(e,t){return e.filter(function(e){return e.roles.includes(t)})}function ri(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function si(e,t){t.length&&(t=t.filter(function(t){return ao(e.codecs)==ao(t.codecs)}).sort(function(e,t){return e.bandwidth&&t.bandwidth&&e.bandwidth!=t.bandwidth?e.bandwidth-t.bandwidth:(e.width||0)-(t.width||0)}),e.trickModeVideo=t[0],t.length>1&&(t=t.find(function(t){return e.width==t.width&&e.height==t.height})))&&(e.trickModeVideo=t)}function ai(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function li(e,t,n){if(0==n.autoShowText)return!1;if(1==n.autoShowText)return!0;var o=Lo(n.preferredTextLanguage);return t=Lo(t.language),2==n.autoShowText?Mo(t,o):3==n.autoShowText?!!e&&(e=Lo(e.language),Mo(t,o)&&!Mo(e,t)):(K("Invalid autoShowText setting!"),!1)}function ui(e){for(var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n=(e=g(e)).next();!n.done;n=e.next()){var o={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:(n=n.value)?uo(n):"",codecs:n?co(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};o.fullMimeTypes.add(oo(o.mimeType,o.codecs)),n.startsWith("audio/")?(o.type="audio",t.audio=o):t.video=o}return t}$("shaka.util.StreamUtils",Bo),Bo.meetsRestrictions=jo;var ci=new Map,di=0,pi=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),hi=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function fi(){var t=this;this.H=null,this.B=!1,this.u=new G,this.j=new oe,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(t.B&&t.g.useNetworkInformation){t.u=new G,t.g&&t.u.configure(t.g.advanced);var e=t.chooseVariant();e&&navigator.onLine&&t.H(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.o=[],this.I=1,this.J=!1,this.h=this.m=this.g=this.C=null,this.l=new To(function(){if(t.B&&(t.g.restrictToElementSize||t.g.restrictToScreenSize)){var e=t.chooseVariant();e&&t.H(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.F=e,"documentPictureInPicture"in e&&this.j.D(e.documentPictureInPicture,"enter",function(){t.F=e.documentPictureInPicture.window,t.l&&t.l.Kb(),t.j.Aa(t.F,"pagehide",function(){t.F=e,t.l&&t.l.Kb()})}),this.G=this.i=null}function mi(e,t){if(void 0===t||!t){if(!e.J){if(!((t=e.u).g>=t.i))return;e.J=!0,e.C-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}if(Date.now()-e.C<1e3*e.g.switchInterval)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function gi(e,t,n,o,i){if(e.G){var r=e.G.ci();r&&(n=n.filter(function(e){return!e.bandwidth||!r||e.bandwidth<=r}))}return t&&(n=n.filter(function(e){return jo(e,t,{width:i,height:o})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}(i=fi.prototype).stop=function(){this.H=null,this.B=!1,this.o=[],this.I=1,this.m=this.C=null,this.h&&(this.h.disconnect(),this.h=null),this.l&&this.l.stop(),this.G=this.i=null},i.release=function(){this.stop(),this.j.release(),this.l=null},i.init=function(e){this.H=e},i.chooseVariant=function(e){e=void 0!==e&&e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,t=this.F.screen.height*n,n*=this.F.screen.width),this.h&&this.g.restrictToElementSize){var o=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,i=this.m.clientHeight,r=this.m.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.m&&(i=this.i.height,r=this.i.width),t=Math.min(t,i*o),n=Math.min(n,r*o)}if((i=this.o.filter(function(e){return e&&!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})).length||(i=this.o),o=i,e&&i.length!=this.o.length&&(o=this.o.filter(function(e){return e&&!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),e=gi(this,this.g.restrictions,o,1/0,1/0),t!=1/0||n!=1/0){for(e=function(e){for(var t=[],n=(e=g(e)).next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}(e),i=(e=g(e)).next();!i.done;i=e.next())if((i=i.value).height>=t&&i.width>=n){t=i.height,n=i.width;break}e=gi(this,this.g.restrictions,o,t,n)}for(t=this.getBandwidthEstimate(),o.length&&!e.length&&(e=[(e=gi(this,null,o,1/0,1/0))[0]]),n=e[0]||null,o=0;o<e.length;o++){i=e[o];var s=isNaN(this.I)?1:Math.abs(this.I);r=s*i.bandwidth/this.g.bandwidthDowngradeTarget;for(var a={bandwidth:1/0},l=o+1;l<e.length;l++)if(i.bandwidth!=e[l].bandwidth){a=e[l];break}s=s*a.bandwidth/this.g.bandwidthUpgradeTarget,t>=r&&t<=s&&(n.bandwidth!=i.bandwidth||n.bandwidth==i.bandwidth&&n.video&&i.video&&(n.video.width<i.video.width||n.video.height<i.video.height))&&(n=i)}return this.C=Date.now(),n},i.enable=function(){this.B=!0},i.disable=function(){this.B=!1},i.segmentDownloaded=function(e,t,n,o){var i=e;this.g.removeLatencyFromFirstPacketTime&&o&&1===o.packetNumber&&o.timeToFirstByte&&(i=e-o.timeToFirstByte),i>=this.g.cacheLoadThreshold&&this.u.sample(i,t),n&&null!=this.C&&this.B&&mi(this)},i.trySuggestStreams=function(){this.B&&(this.C=Date.now(),mi(this,!0))},i.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.G?this.G.getBandwidthEstimate(e):e)},i.setVariants=function(e){return!ee(e,this.o)&&(this.o=e,!0)},i.playbackRateChanged=function(e){this.I=e},i.setMediaElement=function(t){function n(){o.l.ka(yi)}var o=this;this.m=t,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in e&&(this.h=new ResizeObserver(n),this.h.observe(this.m)),this.j.D(t,"enterpictureinpicture",function(e){e.pictureInPictureWindow&&(o.i=e.pictureInPictureWindow,o.j.D(o.i,"resize",n))}),this.j.D(t,"leavepictureinpicture",function(){o.i&&o.j.Ma(o.i,"resize",n),o.i=null})},i.setCmsdManager=function(e){this.G=e},i.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)},$("shaka.abr.SimpleAbrManager",fi),fi.prototype.configure=fi.prototype.configure,fi.prototype.setCmsdManager=fi.prototype.setCmsdManager,fi.prototype.setMediaElement=fi.prototype.setMediaElement,fi.prototype.playbackRateChanged=fi.prototype.playbackRateChanged,fi.prototype.setVariants=fi.prototype.setVariants,fi.prototype.getBandwidthEstimate=fi.prototype.getBandwidthEstimate,fi.prototype.trySuggestStreams=fi.prototype.trySuggestStreams,fi.prototype.segmentDownloaded=fi.prototype.segmentDownloaded,fi.prototype.disable=fi.prototype.disable,fi.prototype.enable=fi.prototype.enable,fi.prototype.chooseVariant=fi.prototype.chooseVariant,fi.prototype.init=fi.prototype.init,fi.prototype.release=fi.prototype.release,fi.prototype.stop=fi.prototype.stop;var yi=1;function vi(e,t){if(e===t||!e.length||!t.length)return!0;for(var n=(e=g(e)).next();!n.done;n=e.next()){if(Si(n=n.value))return!0;for(var o=g(t),i=o.next();!i.done;i=o.next())if(i=i.value,n.keySystem===i.keySystem||Si(i))return!0}return!1}function bi(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],o=(e=g(e)).next();!o.done;o=e.next()){o=o.value;for(var i=g(t),r=i.next();!r.done;r=i.next()){if(r=r.value,o.keySystem==r.keySystem){i=new Map;for(var s=g((o.initData||[]).concat(r.initData||[])),a=s.next();!a.done;a=s.next())a=a.value,i.set(a.keyId,a);i=Array.from(i.values()),s=o.keyIds&&r.keyIds?new Set([].concat(y(o.keyIds),y(r.keyIds))):o.keyIds||r.keyIds,n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||r.persistentStateRequired,videoRobustness:o.videoRobustness||r.videoRobustness,audioRobustness:o.audioRobustness||r.audioRobustness,serverCertificate:o.serverCertificate||r.serverCertificate,serverCertificateUri:o.serverCertificateUri||r.serverCertificateUri,initData:i,keyIds:s});break}Si(o)?n.push(o):Si(r)&&n.push(r)}}return n}function xi(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function wi(e){return!!e&&!!e.match(/^com\.apple\.fps/)}function Si(e){return!!(e=e.licenseServerUri)&&e.startsWith("data:application/json;base64,")}var Ti=new se(function(){return Oe(new Uint8Array([0]))}),ki=new Map;function Ci(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Ai(e){var t,n;return D(function(o){if(1==o.g){if(e.g>=e.l){if(!e.i)throw new je(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?o.return():(n=e.h*(1+(2*Math.random()-1)*e.o),S(o,new Promise(function(e){new To(e).ka(n/1e3)}),2))}e.h*=e.m,T(o)})}function Ii(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Ei(){var e,t,n=new Promise(function(n,o){e=n,t=o});return n.resolve=e,n.reject=t,n}function Mi(e,t){this.promise=e,this.i=t,this.g=null}function Ri(e){return new Mi(Promise.reject(e),function(){return Promise.resolve()})}function _i(){var e=Promise.reject(new je(2,7,7001));return e.catch(function(){}),new Mi(e,function(){return Promise.resolve()})}function Li(e){return new Mi(Promise.resolve(e),function(){return Promise.resolve()})}function Pi(e){return new Mi(e,function(){return e.catch(function(){})})}function Di(e){return new Mi(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function Oi(t,n){if(n)if(n instanceof Map)for(var o=g(n.keys()),i=o.next();!i.done;i=o.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(o in n)Object.defineProperty(this,o,{value:n[o],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Ni(e){var t,n=new Oi(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}Ei.prototype.resolve=function(){},Ei.prototype.reject=function(){},Mi.prototype.abort=function(){return this.g||(this.g=this.i()),this.g},Mi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Mi.prototype.Xa=function(e,t){function n(n){return function(a){if(i.g&&n)r.reject(s);else{var l=n?e:t;l?o=function(e,t,n){try{var o=e(t);return o&&o.promise&&o.abort?(n.resolve(o.promise),function(){return o.abort()}):(n.resolve(o),function(){return Promise.resolve(o).then(function(){},function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}(l,a,r):(n?r.resolve:r.reject)(a)}}}function o(){return r.reject(s),i.abort()}var i=this,r=new Ei;r.catch(function(){});var s=new je(2,7,7001);return this.promise.then(n(!0),n(!1)),new Mi(r,function(){return o()})},l.Object.defineProperties(Mi.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return null!==this.g}}}),$("shaka.util.AbortableOperation",Mi),Mi.prototype.chain=Mi.prototype.Xa,Mi.prototype.finally=Mi.prototype.finally,Mi.all=Di,Mi.prototype.abort=Mi.prototype.abort,Mi.notAbortable=Pi,Mi.completed=Li,Mi.aborted=_i,Mi.failed=Ri,Oi.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Oi.prototype.stopImmediatePropagation=function(){this.g=!0},Oi.prototype.stopPropagation=function(){},$("shaka.util.FakeEvent",Oi);var Ui={ul:"abrstatuschanged",vl:"adaptation",wl:"audiotrackchanged",xl:"audiotrackschanged",yl:"boundarycrossed",zl:"buffering",Al:"canupdatestarttime",Bl:"complete",Cl:"currentitemchanged",Dl:"downloadcompleted",El:"downloadfailed",Fl:"downloadheadersreceived",Gl:"drmsessionupdate",Il:"emsg",Ol:"itemsinserted",Pl:"itemsremoved",gm:"prft",Error:"error",Jl:"expirationupdated",Kl:"firstquartile",Ll:"gapjumped",Ql:"keystatuschanged",Ul:"loaded",Vl:"loading",Xl:"manifestparsed",Yl:"manifestupdated",Zl:"mediaqualitychanged",$l:"mediasourcerecovered",am:"metadataadded",Metadata:"metadata",bm:"midpoint",dm:"nospatialvideoinfo",fm:"onstatechange",hm:"ratechange",lm:"segmentappended",nm:"sessiondata",om:"spatialvideoinfo",pm:"stalldetected",qm:"started",rm:"statechanged",sm:"streaming",tm:"textchanged",um:"texttrackvisibility",vm:"thirdquartile",wm:"timelineregionadded",xm:"timelineregionenter",ym:"timelineregionexit",zm:"trackschanged",Bm:"unloading",Dm:"variantchanged"};function Bi(){this.ab=new ne,this.Ee=this}function Fi(){this.g=[]}function ji(e,t){e.g.push(t.finally(function(){Z(e.g,t)}))}function zi(e,t,n,o,i,r,s){Bi.call(this),this.i=null,this.j=!1,this.u=new Fi,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=o||null,this.F=i||null,this.H=r||null,this.G=s||null,this.l=new Map}function $i(e,t,n,o){o=void 0!==o&&o,n=n||Yi;var i=Ji.get(e);(!i||n>=i.priority)&&Ji.set(e,{priority:n,yf:t,Gk:o})}function Vi(e,t){for(var n=g(e.g),o=n.next();!o.done;o=n.next())t.g.add(o.value);for(n=(e=g(e.h)).next();!n.done;n=e.next())t.h.add(n.value)}function Hi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Gi(e,t,n,o,i,r,s,a){e.i.forceHTTP&&(n.uris[r]=n.uris[r].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[r]=n.uris[r].replace("http://","https://")),r>0&&e.H&&e.H(t,o,n.uris[r],n.uris[r-1]);var l=new ye(n.uris[r]),u=l.bc,c=!1;u||(ve(l,u=(u=location.protocol).slice(0,-1)),n.uris[r]=l.toString()),u=u.toLowerCase();var d=(u=Ji.get(u))?u.yf:null;if(!d)return Ri(new je(2,1,1e3,l));var p=u.Gk;(l=e.l.get(l.Eb))&&(n.headers["common-access-token"]=l);var h,f=null,m=null,g=!1,y=!1;return Pi(Ai(i)).Xa(function(){if(e.j)return _i();h=Date.now();var i=0;n.requestStartTime=Date.now();var s=d(n.uris[r],n,t,function(r,s,l){f&&f.stop(),m&&m.ka(u/1e3),e.o&&t==Xi&&(i++,n.packetNumber=i,e.o(r,s,qi(o),n,o),c=!0,a.g=l)},function(o){y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(o,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!p)return s;var l=n.retryParameters.connectionTimeout;l&&(f=new To(function(){g=!0,s.abort()})).ka(l/1e3);var u=n.retryParameters.stallTimeout;return u&&(m=new To(function(){g=!0,s.abort()})),s}).Xa(function(o){f&&f.stop(),m&&m.stop(),null==o.timeMs&&(o.timeMs=Date.now()-h);var i=o.headers["common-access-token"];if(i){var r=new ye(o.uri);e.l.set(r.Eb,i)}return i={response:o,gk:c},!y&&e.m&&e.m(o.headers,n,t),e.B&&e.B(n,o),i},function(l){if(f&&f.stop(),m&&m.stop(),e.C){var u=null,c=0;l instanceof je&&(u=l,1001==l.code&&(c=l.data[1])),e.C(n,u,c,g)}if(e.j)return _i();if(g&&(l=new je(1,1,1003,n.uris[r],t)),l instanceof je){if(7001==l.code)throw l;if(1010==l.code)throw s;if(1==l.severity){if((u=new Oi("retry",u=(new Map).set("error",l))).cancelable=!0,e.dispatchEvent(u),u.defaultPrevented)throw l;return r=(r+1)%n.uris.length,Gi(e,t,n,o,i,r,l,a)}}throw l})}function qi(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}function Wi(){this.g=0}function Ki(e,t,n){Mi.call(this,e,t),this.h=n}Bi.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},Bi.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},Bi.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),n=(t=g(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Ee,e.currentTarget=this.Ee;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(o){}if(e.g)break}return e.defaultPrevented},Bi.prototype.release=function(){this.ab=null},Fi.prototype.destroy=function(){for(var e=[],t=g(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},f(zi,Bi),(i=zi.prototype).configure=function(e){this.i=e},i.Jk=function(e){this.g.add(e)},i.il=function(e){this.g.delete(e)},i.pj=function(){this.g.clear()},i.Kk=function(e){this.h.add(e)},i.jl=function(e){this.h.delete(e)},i.qj=function(){this.h.clear()},i.Rh=function(){this.l.clear()},i.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Bi.prototype.release.call(this),this.u.destroy()},i.request=function(e,t,n){var o=this,i=new Wi;if(this.j){var r=Promise.reject(new je(2,7,7001));return r.catch(function(){}),new Ki(r,function(){return Promise.resolve()},i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?jt(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=jt(t.uris),r=function(e,t,n,o){function i(e){r=r.Xa(function(){return n.body&&(n.body=Oe(n.body)),e(t,n,o)})}var r=Li(void 0);e.F&&i(e.F);for(var s=(e=g(e.g)).next();!s.done;s=e.next())i(s.value);return r.Xa(void 0,function(e){if(e instanceof je&&7001==e.code)throw e;throw new je(2,1,1006,e)})}(this,e,t,n);var s=r.Xa(function(){return Gi(o,e,t,n,new Ci(t.retryParameters,!1),0,null,i)}),a=s.Xa(function(t){return function(e,t,n,o){for(var i=Li(void 0),r=(e=g(e.h)).next(),s={};!r.done;s={Ji:void 0},r=e.next())s.Ji=r.value,i=i.Xa(function(e){return function(){var i=n.response;return i.data&&(i.data=Oe(i.data)),(0,e.Ji)(t,i,o)}}(s));return i.Xa(function(){return n},function(e){var t=2;if(e instanceof je){if(7001==e.code)throw e;t=e.severity}throw new je(t,1,1007,e)})}(o,e,t,n)}),l=Date.now(),u=0;r.promise.then(function(){u=Date.now()-l},function(){});var c=0;s.promise.then(function(){c=Date.now()},function(){});var d=a.Xa(function(i){var r=Date.now()-c,s=i.response;return s.timeMs+=u,s.timeMs+=r,i.gk||!o.o||s.fromCache||"HEAD"==t.method||e!=Xi||o.o(s.timeMs,s.data.byteLength,qi(n),t,n),o.G&&o.G(e,s,n),s},function(e){throw e&&(e.severity=2),e});return r=new Ki(d.promise,function(){return d.abort()},i),ji(this.u,r),r},$("shaka.net.NetworkingEngine",zi),zi.prototype.request=zi.prototype.request,zi.prototype.destroy=zi.prototype.destroy,zi.makeRequest=Hi,zi.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},zi.prototype.clearCommonAccessTokenMap=zi.prototype.Rh,zi.prototype.clearAllResponseFilters=zi.prototype.qj,zi.prototype.unregisterResponseFilter=zi.prototype.jl,zi.prototype.registerResponseFilter=zi.prototype.Kk,zi.prototype.clearAllRequestFilters=zi.prototype.pj,zi.prototype.unregisterRequestFilter=zi.prototype.il,zi.prototype.registerRequestFilter=zi.prototype.Jk,zi.unregisterScheme=function(e){Ji.delete(e)},zi.registerScheme=$i,zi.prototype.configure=zi.prototype.configure,zi.NumBytesRemainingClass=Wi,f(Ki,Mi),zi.PendingRequest=Ki;var Xi=1;zi.RequestType={MANIFEST:0,SEGMENT:Xi,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},zi.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var Yi=3;zi.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Yi};var Ji=new Map;function Qi(e){this.g=!1,this.h=new Ei,this.i=e}function Zi(e,t){if(e.g){if(t instanceof je&&7003==t.code)throw t;throw new je(2,7,7003,t)}}function er(e,t){for(var n=[],o=(e=g(e)).next();!o.done;o=e.next())n.push(t(o.value));return n}function tr(e){for(var t=new Map,n=g(Object.keys(e)),o=n.next();!o.done;o=n.next())o=o.value,t.set(o,e[o]);return t}function nr(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function or(e,t){this.h=Be(e),this.i=t==rr,this.g=0}function ir(){return new je(2,3,3e3)}Qi.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(i=or.prototype).Ia=function(){return this.g<this.h.byteLength},i.Pa=function(){return this.g},i.getLength=function(){return this.h.byteLength},i.Y=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw ir()}},i.Ba=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw ir()}},i.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw ir()}},i.$g=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw ir()}},i.Dd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw ir()}if(t>2097151)throw new je(2,3,3001);return this.g+=8,4294967296*t+e},i.Tb=function(e){if(this.g+e>this.h.byteLength)throw ir();var t=Ne(this.h,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.h.byteLength)throw ir();this.g+=e},i.Ki=function(e){if(this.g<e)throw ir();this.g-=e},i.seek=function(e){if(e<0||e>this.h.byteLength)throw ir();this.g=e},i.Yc=function(){for(var e=this.g;this.Ia()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=Ne(this.h,e,this.g-e),this.g+=1,$e(e)},$("shaka.util.DataViewReader",or),or.prototype.readTerminatedString=or.prototype.Yc,or.prototype.seek=or.prototype.seek,or.prototype.rewind=or.prototype.Ki,or.prototype.skip=or.prototype.skip,or.prototype.readBytes=or.prototype.Tb,or.prototype.readUint64=or.prototype.Dd,or.prototype.readInt32=or.prototype.$g,or.prototype.readUint32=or.prototype.U,or.prototype.readUint16=or.prototype.Ba,or.prototype.readUint8=or.prototype.Y,or.prototype.getLength=or.prototype.getLength,or.prototype.getPosition=or.prototype.Pa,or.prototype.hasMoreData=or.prototype.Ia;var rr=1;function sr(){this.i=new Map,this.h=new Map,this.g=!1}function ar(e){for(var t=fr(e);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function lr(e){for(var t=fr(e),n=e.reader.U(),o=0;o<n&&(e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);o++);}function ur(e){var t=fr(e);for(e.reader.skip(78);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function cr(e){var t=fr(e);e.reader.skip(8);var n=e.reader.Ba();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function dr(e){return function(t){e(t.reader.Tb(t.reader.getLength()-t.reader.Pa()))}}function pr(e){for(var t=0,n=(e=g(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function hr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function fr(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}or.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:rr},(i=sr.prototype).box=function(e,t){return e=pr(e),this.i.set(e,mr),this.h.set(e,t),this},i.T=function(e,t){return e=pr(e),this.i.set(e,gr),this.h.set(e,t),this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new or(e,0),this.g=!1;e.Ia()&&!this.g;)this.zd(0,e,t,n)},i.zd=function(e,t,n,o){var i=t.Pa();if(o&&i+8>t.getLength())this.g=!0;else{var r=t.U(),s=t.U(),a=hr(s),l=!1;switch(r){case 0:r=t.getLength()-i;break;case 1:if(o&&t.Pa()+8>t.getLength())return void(this.g=!0);r=t.Dd(),l=!0}var u=this.h.get(s);if(u){var c=null,d=null;if(this.i.get(s)==gr){if(o&&t.Pa()+4>t.getLength())return void(this.g=!0);c=(d=t.U())>>>24,d&=16777215}s=i+r,n&&s>t.getLength()&&(s=t.getLength()),o&&s>t.getLength()?this.g=!0:(s-=t.Pa(),u({name:a,parser:this,partialOkay:n||!1,stopOnPartial:o||!1,version:c,flags:d,reader:t=new or(t=s>0?t.Tb(s):new Uint8Array(0),0),size:r,start:i+e,has64BitSize:l}))}else t.skip(Math.min(i+r-t.Pa(),t.getLength()-t.Pa()))}},$("shaka.util.Mp4Parser",sr),sr.headerSize=fr,sr.typeToString=hr,sr.allData=dr,sr.audioSampleEntry=cr,sr.visualSampleEntry=ur,sr.sampleDescription=lr,sr.children=ar,sr.prototype.parseNext=sr.prototype.zd,sr.prototype.parse=sr.prototype.parse,sr.prototype.stop=sr.prototype.stop,sr.prototype.fullBox=sr.prototype.T,sr.prototype.box=sr.prototype.box;var mr=0,gr=1;function yr(e){var t=this;this.g=[],this.h=[],this.data=[],(new sr).box("moov",ar).box("moof",ar).T("pssh",function(e){if(!(e.version>1)){var n=Ne(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(tt(e.reader.Tb(16))),e.version>0){n=e.reader.U();for(var o=0;o<n;o++){var i=tt(e.reader.Tb(16));t.h.push(i)}}}}).parse(e)}function vr(e,t,n,o){var i=e.length,r=12+t.length+4+i;o>0&&(r+=4+16*n.size);var s=new Uint8Array(r),a=Be(s),l=0;if(a.setUint32(l,r),l+=4,a.setUint32(l,1886614376),l+=4,o<1?a.setUint32(l,0):a.setUint32(l,16777216),l+=4,s.set(t,l),l+=t.length,o>0)for(a.setUint32(l,n.size),l+=4,n=(t=g(n)).next();!n.done;n=t.next())n=et(n.value),s.set(n,l),l+=n.length;return a.setUint32(l,i),s.set(e,l+4),s}function br(e){var t=this;this.F=e,this.j=this.B=null,this.oa=this.S=!1,this.I=0,this.g=null,this.o=new oe,this.i=new Map,this.X=[],this.C=new Map,this.J=!1,this.m=new Ei,this.h=null,this.u=function(n){2==n.severity&&t.m.reject(n),e.onError(n)},this.ba=new Map,this.ma=new Map,this.K=new To(function(){return function(e){var t=e.ba,n=e.ma;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.u(new je(2,6,6014)),e.F.uf(nr(n))}(t)}),this.R=!1,this.N=[],this.$=!1,this.G=new To(function(){!function(e){e.i.forEach(function(t,n){var o=t.Vg,i=n.expiration;isNaN(i)&&(i=1/0),i!=o&&(e.F.onExpirationUpdated(n.sessionId,i),t.Vg=i)})}(t)}),this.m.catch(function(){}),this.l=new Qi(function(){return function(e){return D(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.K.stop(),e.K=null,S(t,Pr(e),2);case 2:if(!e.j){t.A(3);break}return k(t,4),S(t,e.j.setMediaKeys(null),6);case 6:A(t,5);break;case 4:I(t);case 5:e.j=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.H=null,T(t)}})}(t)}),this.O=!1,this.M=this.H=null,this.V=function(){return!1}}function xr(e,t,n,o){o=void 0===o||o,e.C=new Map;for(var i=(n=g(n)).next();!i.done;i=n.next())e.C.set(i.value,{initData:null,initDataType:null});for(i=(n=g(e.h.persistentSessionsMetadata)).next();!i.done;i=n.next())i=i.value,e.C.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.R=e.C.size>0,wr(e,t,o)}function wr(e,t,n){var o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x;return D(function(w){if(1==w.g){for(Ur(e.h.clearKeys,t),o=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),i=tr(e.h.servers),r=tr(e.h.advanced||{}),!o&&n&&function(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=g(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(t,i),s=new WeakSet,a=g(t),l=a.next();!l.done;l=a.next())for(u=l.value,c=Dr(u),d=g(c),p=d.next();!p.done;p=d.next())h=p.value,s.has(h)||(s.add(h),Nr(h,i,r,e.h.keySystemsMapping));for(f=function(t,n){for(var o=[],i=(t=g(t)).next();!i.done;i=t.next()){var s,a=(i=i.value)[n]||r.has(i.keySystem)&&r.get(i.keySystem)[n]||"";if((s=""==a)&&(s=!!(s=i.keySystem)&&!!s.match(/^com\.widevine\.alpha/)),s&&("audioRobustness"==n?a=[e.h.defaultAudioRobustnessForWidevine]:"videoRobustness"==n&&(a=[e.h.defaultVideoRobustnessForWidevine])),"string"==typeof a)o.push(i);else if(Array.isArray(a))for(0===a.length&&(a=[""]),s=(a=g(a)).next();!s.done;s=a.next()){var l={};o.push(Object.assign({},i,(l[n]=s.value,l)))}}return o},m=new WeakSet,y=g(t),v=y.next();!v.done;v=y.next())(b=v.value).video&&!m.has(b.video)&&(b.video.drmInfos=f(b.video.drmInfos,"videoRobustness"),b.video.drmInfos=f(b.video.drmInfos,"audioRobustness"),m.add(b.video)),b.audio&&!m.has(b.audio)&&(b.audio.drmInfos=f(b.audio.drmInfos,"videoRobustness"),b.audio.drmInfos=f(b.audio.drmInfos,"audioRobustness"),m.add(b.audio));return S(w,Go(t,e.R,e.O,e.h.preferredKeySystems),2)}return Zi(e.l),o||i.size>0?(x=Ar(e,t),w.return(o?x:x.catch(function(){}))):(e.S=!0,w.return(Promise.resolve()))})}function Sr(e){var t;return D(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.H){n.A(2);break}return S(n,e.H,3);case 3:return Zi(e.l),n.return();case 2:return k(n,4),e.H=e.j.setMediaKeys(e.B),S(n,e.H,6);case 6:A(n,5);break;case 4:t=I(n),e.u(new je(2,6,6003,t.message));case 5:Zi(e.l),T(n)}})}function Tr(e){var t,n,o,i;return D(function(r){if(1==r.g)return e.C.size?(e.C.forEach(function(t,n){Mr(e,n,t)}),S(r,e.m,3)):r.A(2);if(2!=r.g){if((e.g&&e.g.keyIds||new Set([])).size>0&&function(e){for(var t=g(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.ba.get(n.value))return!1;return!0}(e))return r.return(e.m);e.J=!1,e.m=new Ei,e.m.catch(function(){})}for(t=(e.g?e.g.initData:[])||[],n=g(t),o=n.next();!o.done;o=n.next())i=o.value,kr(e,i.initDataType,i.initData);return Or(e)&&e.m.resolve(),r.return(e.m)})}function kr(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){for(var o=e.i.values(),i=(o=g(o)).next();!i.done;i=o.next())if(De(n,i.value.initData))return;var r=!1;if(e.C.forEach(function(e){!r&&De(n,e.initData)&&(r=!0)}),r)return}e.J=!0,e.i.size>0&&Or(e)&&(e.m.resolve(),e.J=!1,e.m=new Ei,e.m.catch(function(){})),function(e,t,n,o){try{var i=e.B.createSession(o)}catch(r){return void e.u(new je(2,6,6005,r.message))}e.o.D(i,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(t):Rr(e,t)}),e.o.D(i,"keystatuseschange",function(t){return _r(e,t)}),e.i.set(i,{initData:n,initDataType:t,loaded:!1,Vg:1/0,Lb:null,type:o});try{n=e.h.initDataTransform(n,t,e.g)}catch(r){return t=r,r instanceof je||(t=new je(2,6,6016,r)),void e.u(t)}e.h.logLicenseExchange&&Qe(n),i.generateRequest(t,n).catch(function(t){if(!e.l.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var o=n.systemCode;o<0&&(o+=4294967296),o="0x"+o.toString(16)}e.u(new je(2,6,6006,t.message,t,o))}})}(e,t,n,e.g.sessionType)}}function Cr(e){return e=er(e=e.i.keys(),function(e){return e.sessionId}),Array.from(e)}function Ar(t,n){var o,i,r,s,a,l;return D(function(u){switch(u.g){case 1:if(o=new Map,i=function(e,t,n){for(var o=g(t),i=o.next();!i.done;i=o.next())for(var r=(i=g(Dr(i.value))).next();!r.done;r=i.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r);if(1==n.size&&n.has(""))throw new je(2,6,6e3);(o=e.h.preferredKeySystems).length||1==(i=tr(e.h.servers)).size&&(o=Array.from(i.keys()));var s=(i=g(o)).next();for(r={};!s.done;r={Di:void 0},s=i.next()){r.Di=s.value;for(var a=(s=g(t)).next();!a.done;a=s.next())if(a=a.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Di}}(r)))return a.keySystemAccess}for(i=g([!0,!1]),r=i.next();!r.done;r=i.next())for(r=r.value,s=g(t),a=s.next();!a.done;a=s.next())for(var l=(a=g(a.value.decodingInfos)).next();!l.done;l=a.next())if((l=l.value).supported&&l.keySystemAccess){var u=l.keySystemAccess.keySystem;if(!o.includes(u)){var c=n.get(u);for(!c&&e.h.keySystemsMapping[u]&&(c=n.get(e.h.keySystemsMapping[u])),c=(u=g(c)).next();!c.done;c=u.next())if(!!c.value.licenseServerUri==r)return l.keySystemAccess}}return null}(t,n,o),!i){if(!navigator.requestMediaKeySystemAccess)throw new je(2,6,6020);throw new je(2,6,6001)}Zi(t.l),k(u,2),i.getConfiguration();var c=r=t.h.keySystemsMapping[i.keySystem]||i.keySystem,d=o.get(r),p=[],h=[],f=[],m=[],v=[],b=new Set,x=new Set;!function(t,n,o,i,r,s,a,l){for(var u=[],c=(t=g(t)).next(),d={};!c.done;d={Ka:void 0},c=t.next()){if(d.Ka=c.value,n.includes(d.Ka.encryptionScheme)||n.push(d.Ka.encryptionScheme),"org.w3.clearkey"==d.Ka.keySystem&&d.Ka.licenseServerUri.startsWith("data:application/json;base64,")?u.includes(d.Ka.licenseServerUri)||u.push(d.Ka.licenseServerUri):o.includes(d.Ka.licenseServerUri)||o.push(d.Ka.licenseServerUri),r.includes(d.Ka.serverCertificateUri)||r.push(d.Ka.serverCertificateUri),d.Ka.serverCertificate&&(i.some(function(e){return function(t){return De(t,e.Ka.serverCertificate)}}(d))||i.push(d.Ka.serverCertificate)),d.Ka.initData)for(var p=(c=g(d.Ka.initData)).next(),h={};!p.done;h={Mg:void 0},p=c.next())h.Mg=p.value,s.some(function(e){return function(t){var n=e.Mg;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&De(t.initData,n.initData)}}(h))||s.push(h.Mg);if(d.Ka.keyIds)for(p=(c=g(d.Ka.keyIds)).next();!p.done;p=c.next())a.add(p.value);if(d.Ka.keySystemUris&&l)for(c=(d=g(d.Ka.keySystemUris)).next();!c.done;c=d.next())l.add(c.value)}if(1==u.length)o.push(u[0]);else if(u.length>0){for(n=[],i=(u=g(u)).next();!i.done;i=u.next())i=e.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),n.push.apply(n,y(i.keys));u=JSON.stringify({keys:n}),o.push("data:application/json;base64,"+e.btoa(u))}}(d,p,h,m,f,v,b,x);var w=t.R?"persistent-license":"temporary";for(c={keySystem:c,encryptionScheme:p[0],licenseServerUri:h[0],distinctiveIdentifierRequired:d[0].distinctiveIdentifierRequired,persistentStateRequired:d[0].persistentStateRequired,sessionType:d[0].sessionType||w,audioRobustness:d[0].audioRobustness||"",videoRobustness:d[0].videoRobustness||"",serverCertificate:m[0],serverCertificateUri:f[0],initData:v,keyIds:b},x.size>0&&(c.keySystemUris=x),x=(d=g(d)).next();!x.done;x=d.next())(x=x.value).distinctiveIdentifierRequired&&(c.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(c.persistentStateRequired=x.persistentStateRequired);if(t.g=c,!t.g.licenseServerUri)throw new je(2,6,6012,t.g.keySystem);return S(u,i.createMediaKeys(),4);case 4:if(s=u.h,Zi(t.l),t.B=s,""==t.h.minHdcpVersion||!("getStatusForPolicy"in t.B)){u.A(5);break}return k(u,6),S(u,t.B.getStatusForPolicy({minHdcpVersion:t.h.minHdcpVersion}),8);case 8:if("usable"!=u.h)throw new je(2,6,6018);Zi(t.l),A(u,5,2);break;case 6:if((a=I(u,2))instanceof je)throw a;throw new je(2,6,6019,a.message);case 5:return t.S=!0,t.G.Fa(t.h.updateExpirationTime),S(u,function(e){var t,n;return D(function(o){switch(o.g){case 1:if(!e.B||!e.g)return o.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){o.A(2);break}return t=Hi([e.g.serverCertificateUri],e.h.retryParameters),k(o,3),S(o,e.F.tc.request(5,t,{isPreload:e.V()}).promise,5);case 5:n=o.h,e.g.serverCertificate=Ne(n.data),A(o,4);break;case 3:throw new je(2,6,6017,I(o));case 4:if(e.l.g)return o.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(k(o,6),S(o,e.B.setServerCertificate(e.g.serverCertificate),8)):o.return();case 8:A(o,0);break;case 6:throw new je(2,6,6004,I(o).message)}})}(t),9);case 9:Zi(t.l),A(u,0);break;case 2:if(l=I(u),Zi(t.l,l),t.g=null,l instanceof je)throw l;throw new je(2,6,6002,l.message)}})}function Ir(e){Or(e)&&e.m.resolve()}function Er(e,t){new To(function(){t.loaded=!0,Ir(e)}).ka(Fr)}function Mr(e,t,n){var o,i,r,s,a,l,c;return D(function(d){switch(d.g){case 1:try{o=e.B.createSession("persistent-license")}catch(u){return i=new je(2,6,6005,u.message),e.u(i),d.return(Promise.reject(i))}return e.o.D(o,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(t):Rr(e,t)}),e.o.D(o,"keystatuseschange",function(t){return _r(e,t)}),r={initData:n.initData,initDataType:n.initDataType,loaded:!1,Vg:1/0,Lb:null,type:"persistent-license"},e.i.set(o,r),k(d,2),S(d,o.load(t),4);case 4:return s=d.h,Zi(e.l),s||(e.i.delete(o),a=e.h.persistentSessionOnlinePlayback?1:2,e.u(new je(a,6,6013)),r.loaded=!0),Er(e,r),Ir(e),d.return(o);case 2:l=I(d),Zi(e.l,l),e.i.delete(o),c=e.h.persistentSessionOnlinePlayback?1:2,e.u(new je(c,6,6005,l.message)),r.loaded=!0,Ir(e);case 3:return d.return(Promise.resolve())}})}function Rr(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,y,v;D(function(b){switch(b.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Qe(t.message),o=e.i.get(n),i=e.g.licenseServerUri,r=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&r&&r.individualizationServer&&(i=r.individualizationServer),(s=Hi([i],e.h.retryParameters)).body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,o&&(s.initData=o.initData,s.initDataType=o.initDataType),r&&r.headers)for(a in r.headers)s.headers[a]=r.headers[a];if("org.w3.clearkey"===e.g.keySystem){var x=s,w=e.g;try{var C=He(x.body);if(C){var E=JSON.parse(C);E.type||(E.type=w.sessionType,x.body=Ge(JSON.stringify(E)))}}catch(ts){}}if(xi(e.g.keySystem))if((x=Ve(s.body,!0,!0)).includes("PlayReadyKeyMessage")){for(C=(w=g(w=Jt(x=Ht(x,"PlayReadyKeyMessage"),"HttpHeader"))).next();!C.done;C=w.next())C=Jt(E=C.value,"name")[0],E=Jt(E,"value")[0],s.headers[Xt(C)]=Xt(E);x=Jt(x,"Challenge")[0],s.body=Ze(Xt(x))}else s.headers["Content-Type"]="text/xml; charset=utf-8";return l=Date.now(),k(b,2),c=e.F.tc.request(2,s,{isPreload:e.V()}),e.X.push(c),S(b,c.promise,4);case 4:u=b.h,Z(e.X,c),A(b,3);break;case 2:return d=I(b),e.l.g||(p={sessionId:n.sessionId,sessionType:o.type,initData:o.initData,initDataType:o.initDataType},h=new je(2,6,6007,d,p),1==e.i.size?(e.u(h),o&&o.Lb&&o.Lb.reject(h)):(o&&o.Lb&&o.Lb.reject(h),e.i.delete(n),Or(e)&&(e.m.resolve(),e.K.ka(.1)))),b.return();case 3:return e.l.g?b.return():(e.I+=(Date.now()-l)/1e3,e.h.logLicenseExchange&&Qe(u.data),k(b,5),S(b,n.update(u.data),7));case 7:A(b,6);break;case 5:return m=(f=I(b))&&f.message||String(f),y=new je(2,6,6008,m),e.u(y),o&&o.Lb&&o.Lb.reject(y),b.return();case 6:if(e.l.g)return b.return();v=new Oi("drmsessionupdate"),e.F.onEvent(v),o&&(o.Lb&&o.Lb.resolve(),Er(e,o)),T(b)}})}function _r(e,t){t=t.target;var n=e.i.get(t),o=!1;t.keyStatuses.forEach(function(t,i){if("string"==typeof i){var r=i;i=t,t=r}if(r=ae(),xi(e.g.keySystem)&&16==i.byteLength&&r.hh()){var s=(r=Be(i)).getUint32(0,!0),a=r.getUint16(4,!0),l=r.getUint16(6,!0);r.setUint32(0,s,!1),r.setUint16(4,a,!1),r.setUint16(6,l,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(o=!0),i=tt(i).slice(0,32),e.ba.set(i,t)});var i=t.expiration-Date.now();(i<0||o&&i<1e3)&&n&&!n.Lb&&(e.i.delete(t),Lr(t)),Or(e)&&(e.m.resolve(),e.K.ka(jr))}function Lr(e){return D(function(t){return 1==t.g?(k(t,2),S(t,Io(Br,Promise.all([e.close().catch(function(){}),e.closed])),4)):2!=t.g?A(t,0):(I(t),void T(t))})}function Pr(e){var t;return D(function(n){return t=Array.from(e.i.entries()),e.i.clear(),S(n,Promise.all(t.map(function(t){var n=(t=g(t)).next().value,o=t.next().value;return D(function(t){return 1==t.g?(k(t,2),e.oa||e.C.has(n.sessionId)||"persistent-license"!==o.type||e.h.persistentSessionOnlinePlayback?S(t,Lr(n),5):S(t,n.remove(),5)):2!=t.g?A(t,0):(I(t),void T(t))})})),0)})}function Dr(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Or(e){return function(e,t){for(var n=(e=g(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),function(e){return e.loaded})}function Nr(t,n,o,i){var r=t.keySystem;!r||"org.w3.clearkey"==r&&t.licenseServerUri||(n.size&&n.get(r)&&(n=n.get(r),t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(o=o.get(r))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=o.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=o.persistentStateRequired),t.serverCertificate||(t.serverCertificate=o.serverCertificate),o.sessionType&&(t.sessionType=o.sessionType),t.serverCertificateUri||(t.serverCertificateUri=o.serverCertificateUri)),i[r]&&(t.keySystem=i[r]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==r&&(t.keySystem="com.chromecast.playready"))}function Ur(e,t){if(0!=(e=tr(e)).size){e=rt(e);for(var n=(t=g(t)).next();!n.done;n=t.next())(n=n.value).video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}(i=br.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.S&&this.g&&this.G.Fa(this.h.updateExpirationTime)},i.fc=function(e){var t,n=this;return D(function(o){if(1==o.g)return n.j===e?o.return():n.B?(n.j=e,n.h.delayLicenseRequestUntilPlayed&&n.o.Aa(n.j,"play",function(){for(var e=g(n.N),t=e.next();!t.done;t=e.next())Rr(n,t.value);n.$=!0,n.N=[]}),n.j.remote?(n.o.D(n.j.remote,"connect",function(){return Pr(n)}),n.o.D(n.j.remote,"connecting",function(){return Pr(n)}),n.o.D(n.j.remote,"disconnect",function(){return Pr(n)})):"webkitCurrentPlaybackTargetIsWireless"in n.j&&n.o.D(n.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Pr(n)}),n.M=n.g&&n.g.initData.find(function(e){return e.initData.length>0})||null,t=n.g.keySystem,ae().Sg(t)||!(n.M||n.C.size||n.h.parseInbandPsshEnabled)?(n.o.D(n.j,"encrypted",function(e){return function(e,t){return D(function(n){if(1==n.g)return S(n,Sr(e),2);kr(e,t.initDataType,Ne(t.initData)),T(n)})}(n,e)}),o.A(2)):S(o,Sr(n),2)):(n.o.Aa(e,"encrypted",function(){n.u(new je(2,6,6010))}),o.return());Tr(n).catch(function(){}),T(o)})},i.Gg=function(){var e=this,t=this.i.keys();return t=er(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},i.Ud=function(){for(var e=1/0,t=this.i.keys(),n=(t=g(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.We=function(){return nr(this.ma)};var Br=1,Fr=5,jr=.5;function zr(){this.g=Hr,this.i=(new Map).set(Hr,2).set(Vr,1),this.h=0}function $r(e,t){var n=e.g!==t;return e.g=t,n&&t===Hr&&(e.h=Date.now()),n}var Vr=0,Hr=1;
/*
      		 @license
      		 Shaka Player
      		 Copyright 2023 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/function Gr(e,t,n){this.g=e,this.i=t,this.h=n}function qr(e,t){return D(function(n){if(1==n.g)return S(n,zo(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||Fo(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(ti))throw new je(2,4,4032);return n.return(Kr(e,t))})}function Wr(e,t){var n=e.g.restrictions;e=e.i;for(var o=!1,i=(t=g(t.variants)).next();!i.done;i=t.next()){var r=(i=i.value).allowedByApplication;i.allowedByApplication=jo(i,n,e),r!=i.allowedByApplication&&(o=!0)}return o}function Kr(e,t){var n=Wr(e,t);if(t){var o=e.h?e.h.g:null;if(o&&e.h.B){for(var i=new Set,r=g(t.variants),s=r.next();!s.done;s=r.next())(s=s.value).audio&&i.add(s.audio),s.video&&i.add(s.video);for(r=(i=g(i)).next();!r.done;r=i.next())Xr(e,o.keySystem,r.value)}Yr(e,t)}return n}function Xr(e,t,n){for(var o=(n=g(n.drmInfos)).next();!o.done;o=n.next())if((o=o.value).keySystem==t)for(var i=(o=g(o.initData||[])).next();!i.done;i=o.next())i=i.value,kr(e.h,i.initDataType,i.initData)}function Yr(e,t){e=e.h?e.h.We():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var o=!1,i=!1,r=new Set,s=new Set,a=new Set,l=(t=g(t.variants)).next();!l.done;l=t.next())(l=l.value).audio&&a.add(l.audio),l.video&&a.add(l.video),l.allowedByApplication?l.allowedByKeySystem&&(o=!0):i=!0;for(t=(a=g(a)).next();!t.done;t=a.next())if((t=t.value).keyIds.size)for(l=(t=g(t.keyIds)).next();!l.done;l=t.next()){l=l.value;var u=e[n?"00":l];u?Jr.includes(u)&&s.add(u):r.add(l)}if(!o)throw new je(2,4,4012,e={hasAppRestrictions:i,missingKeys:Array.from(r),restrictedKeyStatuses:Array.from(s)})}var Jr=["output-restricted","internal-error"];function Qr(){}function Zr(e,t){ns.set(e,t)}function es(e,t){if(t){var n=ns.get(t.toLowerCase());if(n)return n}throw new je(2,4,4e3,e,t)}$("shaka.media.ManifestParser",Qr),Qr.unregisterParserByMime=function(e){ns.delete(e)},Qr.registerParserByMime=Zr,Qr.registerParserByExtension=function(){pe("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Qr.AccessibilityPurpose={Cm:"visually impaired",Ml:"hard of hearing",jm:"spoken subtitles"};var ns=new Map;function is(e,t){var n=null,o=null,i=null,r=null,s=e.U();return 1&t&&(i=e.Dd()),2&t&&(r=e.U()),8&t&&(n=e.U()),16&t&&(o=e.U()),{trackId:s,Rd:n,Sd:o,lj:i,Li:r}}function rs(e,t){return 1==t?{baseMediaDecodeTime:4294967296*(t=e.U())+(e=e.U())}:{baseMediaDecodeTime:e.U()}}function ss(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ba(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function as(e,t,n){var o=e.U(),i=[],r=null;1&n&&(r=e.$g()),4&n&&e.skip(4);for(var s=0;s<o;s++){var a={jh:null,sampleSize:null,Cf:null};256&n&&(a.jh=e.U()),512&n&&(a.sampleSize=e.U()),1024&n&&e.skip(4),2048&n&&(a.Cf=0==t?e.U():e.$g()),i.push(a)}return{Im:o,ih:i,mg:r}}function ls(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ba();return e.skip(2),e.skip(2),e.skip(2),{channelCount:t,sampleRate:e=e.Ba()+e.Ba()/65536}}function us(e){return{codec:hr(e=e.U())}}function cs(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function ds(e){return(e<10?"0":"")+e}function ps(e){this.g=e}function hs(e){for(var t=[],n=g(e.g),o=n.next();!o.done;o=n.next()){var i=t,r=i.push,s=o.value;o=Ts;var a=s.id+1,l=s.stream.width||0,u=s.stream.height||0;"audio"==s.type&&(u=l=0);var c=s.duration*s.timescale,d=Math.floor(c/(ks+1));switch(c=Math.floor(c%(ks+1)),a=Ts("tkhd",a=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(y(xs(a,4)),[0,0,0,0],y(xs(d,4)),y(xs(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],y(xs(l,2)),[0,0],y(xs(u,2)),[0,0]))),l=Ts,d=s.duration*s.timescale,u=Math.floor(d/(ks+1)),d=Math.floor(d%(ks+1)),c=(c=s.stream.language).charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,u=Ts("mdhd",u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(y(xs(s.timescale,4)),y(xs(u,4)),y(xs(d,4)),y(xs(c,2)),[0,0]))),d=s,c=new Uint8Array([]),d.type){case"video":c=As.value();break;case"audio":c=Is.value()}d=Ts("hdlr",c);e:{switch(s.type){case"video":s=Ts("minf",Ts("vmhd",Ls.value()),Ns.value(),fs(s));break e;case"audio":s=Ts("minf",Ts("smhd",Ps.value()),Ns.value(),fs(s));break e}s=new Uint8Array([])}o=o("trak",a,s=l("mdia",u,d,s)),r.call(i,o)}for(t=nt.apply(Ye,y(t)),n=Ts,o=(r=e.g[0]).duration*r.timescale,i=Math.floor(o/(ks+1)),o=Math.floor(o%(ks+1)),i=Ts("mvhd",i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(y(xs(r.timescale,4)),y(xs(i,4)),y(xs(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),o=[],l=(e=g(e.g)).next();!l.done;l=e.next())a=(s=o).push,l=Ts("trex",l=new Uint8Array([0,0,0,0].concat(y(xs(l.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),a.call(s,l);if(e=Ts("mvex",e=nt.apply(Ye,y(o))),o=[],r.encrypted){for(s=(r=g(r.stream.drmInfos)).next();!s.done;s=r.next())if((s=s.value).initData)for(a=(s=g(s.initData)).next();!a.done;a=s.next())o.push(a.value.initData);r=nt.apply(Ye,y(o))}else r=new Uint8Array([]);return e=n("moov",i,t,e,r),t=Os.value(),(n=new Uint8Array(t.byteLength+e.byteLength)).set(t),n.set(e,t.byteLength),n}function fs(e){var t=Ts,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=ae().le()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var o=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,o=e.stream.height||0,e.Ra.byteLength>0)var i=Ts("avcC",e.Ra);else{i=Ts;for(var r=7,s=[],a=[],l=0,u=0,c=0,d=0;d<e.Cb.length;d++){var p=ws(e.Cb[d]);switch(31&p[0]){case 7:s.push(p),r+=p.length+2;break;case 8:a.push(p),r+=p.length+2}}for(s.length>0&&(l=s[0][1],c=s[0][2],u=s[0][3]),d=0,(r=new Uint8Array(r))[d++]=1,r[d++]=l,r[d++]=c,r[d++]=u,r[d++]=255,r[d++]=224|s.length,l=0;l<s.length;l++)r[d++]=(65280&s[l].length)>>8,r[d++]=255&s[l].length,r.set(s[l],d),d+=s[l].length;for(r[d++]=a.length,s=0;s<a.length;s++)r[d++]=(65280&a[s].length)>>8,r[d++]=255&a[s].length,r.set(a[s],d),d+=a[s].length;i=i("avcC",r)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(y(xs(n,2)),y(xs(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="avc1",a=ms(e),s=new Uint8Array([]),e.encrypted&&(s=ys(e.stream,e.codecs),o="encv"),o=Ts(o,n,i,a,s)}else e.codecs.includes("hvc1")&&(o=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),e.Ra.byteLength>0&&(n=Ts("hvcC",e.Ra)),o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(y(xs(o,2)),y(xs(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",a=ms(e),s=new Uint8Array([]),e.encrypted&&(s=ys(e.stream,e.codecs),i="encv"),o=Ts(i,o,n,a,s));break;case"audio":"mp3"==n?e=Ts(".mp3",gs(e)):"ac-3"==n?(n=Ts("dac3",e.Ha),o="ac-3",i=new Uint8Array([]),e.encrypted&&(i=ys(e.stream,e.codecs),o="enca"),e=Ts(o,gs(e),n,i)):"ec-3"==n?(n=Ts("dec3",e.Ha),o="ec-3",i=new Uint8Array([]),e.encrypted&&(i=ys(e.stream,e.codecs),o="enca"),e=Ts(o,gs(e),n,i)):"opus"==n?(n=Ts("dOps",e.Ha),o="Opus",i=new Uint8Array([]),e.encrypted&&(i=ys(e.stream,e.codecs),o="enca"),e=Ts(o,gs(e),n,i)):(e.Ha.byteLength>0?n=Ts("esds",e.Ha):(n=Ts,o=e.id+1,i=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,l=st("audio",e.codecs.split(",")),a=(u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[s],"mp4a.40.5"!==l&&"mp4a.40.29"!==l||(a=u[2*s]),s=parseInt(l.split(".").pop(),10),n=n("esds",o=new Uint8Array([0,0,0,0,3,25].concat(y(xs(o,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|a>>>1,a<<7|i<<3,6,1,2])))),o="mp4a",i=new Uint8Array([]),e.encrypted&&(i=ys(e.stream,e.codecs),o="enca"),e=Ts(o,gs(e),n,i)),o=e}return t("stbl",e=Ts("stsd",Ds.value(),o),Ts("stts",Es.value()),Ts("stsc",Ms.value()),Ts("stsz",_s.value()),Ts("stco",Rs.value()))}function ms(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return Ts("pasp",e=new Uint8Array([].concat(y(xs(e.Za,4)),y(xs(t,4)))))}function gs(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(y(xs(e.stream.audioSamplingRate||44100,2)),[0,0]))}function ys(e,t){var n=Ts;t=Ts("frma",t=new Uint8Array([].concat(y(xs(Ss(t.split(".")[0]),4)))));var o="cenc",i=e.drmInfos[0];i&&i.encryptionScheme&&(o=i.encryptionScheme),o=Ts("schm",o=new Uint8Array([0,0,0,0].concat(y(xs(Ss(o),4)),[0,1,0,0]))),i=Ts;for(var r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=(e=g(e.drmInfos)).next();!s.done;s=e.next())if((s=s.value)&&s.keyIds&&s.keyIds.size)for(var a=(s=g(s.keyIds)).next();!a.done;a=s.next())r=ws(a.value);return n("sinf",t,o,i("schi",r=Ts("tenc",e=new Uint8Array([0,0,0,0,0,0,1,8]),r)))}function vs(e){for(var t=[],n=(e=g(e.g)).next();!n.done;n=e.next()){n=n.value;var o,i=t.push,r=i.apply,s=Ts,a=new Uint8Array([0,0,0,0].concat(y(xs(n.data?n.data.sequenceNumber:0,4))));a=Ts("mfhd",a);var l=n.data?n.data.Bb:[],u=new Uint8Array(4+l.length);for(o=0;o<l.length;o++){var c=l[o].flags;u[o+4]=c.hb<<4|c.mb<<2|c.jb}var d=(l=Ts("sdtp",u)).length+32+20+8+16+8+8;u=Ts,o=Ts("tfhd",o=new Uint8Array([0,0,0,58].concat(y(xs(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),c=n.data?n.data.baseMediaDecodeTime:0;var p=Math.floor(c%(ks+1));c=Ts("tfdt",c=new Uint8Array([1,0,0,0].concat(y(xs(Math.floor(c/(ks+1)),4)),y(xs(p,4)))));var h=d,f=12+16*(p=(d=n.data?n.data.Bb:[]).length),m=new Uint8Array(f);for(h+=8+f,m.set(["video"===n.type?1:0,0,15,1].concat(y(xs(p,4)),y(xs(h,4))),0),h=0;h<p;h++){var v=d[h];f=xs(v.duration,4);var b=xs(v.size,4),x=v.flags;v=xs(v.wb,4),m.set([].concat(y(f),y(b),[x.zb<<2|x.hb,x.mb<<6|x.jb<<4|x.Ab,61440&x.gb,15&x.gb],y(v)),12+16*h)}s=s("moof",a,l=u("traf",o,c,d=Ts("trun",m),l)),r.call(i,t,[s,bs(n)])}return nt.apply(Ye,y(t))}function bs(e){return e=(e.data?e.data.Bb:[]).map(function(e){return e.data}),Ts("mdat",e=nt.apply(Ye,y(e)))}function xs(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function ws(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Ss(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function Ts(e){var t=O.apply(1,arguments),n=Cs.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Cs.set(e,n));for(var o=8,i=t.length-1;i>=0;i--)o+=t[i].byteLength;for((i=new Uint8Array(o))[0]=o>>24&255,i[1]=o>>16&255,i[2]=o>>8&255,i[3]=255&o,i.set(n,4),n=0,o=8;n<t.length;n++)i.set(t[n],o),o+=t[n].byteLength;return i}$("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});var ks=4294967295,Cs=new Map,As=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),Is=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),Es=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Ms=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Rs=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),_s=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),Ls=new se(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),Ps=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Ds=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),Os=new se(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]);return Ts("ftyp",e,new Uint8Array([0,0,0,1]),e,t)}),Ns=new se(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=Ts("dref",e),Ts("dinf",e)});function Us(e){function t(e){s.push(e),ar(e)}var n,o,i,r,s=[];if((new sr).box("moof",t).box("traf",t).T("tfhd",function(e){n=e,i=is(e.reader,e.flags)}).T("trun",function(e){o=e,r=as(e.reader,e.version,e.flags)}).parse(e),i&&2!==i.Li){var a=n.start+fr(n)+4+(null!==i.lj?8:0),l=Be(e);if(null!==i.Li)l.setUint32(a,2);else{Fs(e,n.start,n.size+4);var u=l.getUint32(n.start+8);l.setUint32(n.start+8,2|u),r&&null!==r.mg&&l.setInt32(o.start+fr(o)+4,r.mg+4),u=e.subarray(0,a),l=e.subarray(a),(e=new Uint8Array(e.byteLength+4)).set(u),u=[];for(var c=3;c>=0;c--)u.push(2>>8*c&255);for(e.set(new Uint8Array(u),a),e.set(l,a+4),l=(a=g(s)).next();!l.done;l=a.next())Fs(e,(l=l.value).start,l.size+4)}}return e}function Bs(e,t,n,o,i,r){var s=ys(e,o.name),a=t.subarray(o.start,o.start+o.size);for((e=new Uint8Array(o.size+s.byteLength)).set(a,0),Be(e).setUint32(4,r),e.set(s,o.size),Fs(e,0,e.byteLength),r=new Uint8Array(t.byteLength+e.byteLength),o=ae().cf()?o.start:o.start+o.size,s=t.subarray(o),r.set(t.subarray(0,o)),r.set(e,o),r.set(s,o+e.byteLength),i=(t=g(i)).next();!i.done;i=t.next())Fs(r,(i=i.value).start,i.size+e.byteLength);return e=Be(r,n.start),n=fr(n),t=e.getUint32(n),e.setUint32(n,t+1),r}function Fs(e,t,n){0!=(t=(e=Be(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function js(e,t,n,o,i,r,s,a){this.P=e,this.startByte=t,this.endByte=n,this.xd=void 0===o?null:o,this.timescale=void 0===i?null:i,this.h=void 0===r?null:r,this.aesKey=void 0===s?null:s,this.g=this.mimeType=this.codecs=null,this.encrypted=void 0!==a&&a}function zs(e,t){return e===t||(e&&t?e.Jc()==t.Jc()&&e.Gc()==t.Gc()&&te(e.P().sort(),t.P().sort())&&De(e.Yb(),t.Yb()):e==t)}function $s(e,t,n,o,i,r,s,a,l,u,c,d,p,h,f,m){for(u=void 0===u?[]:u,h=void 0===h?Hs:h,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=o,this.endByte=i,this.aa=r,this.timestampOffset=s,this.appendWindowStart=a,this.appendWindowEnd=l,this.g=u,this.tilesLayout=void 0===c?"":c,this.B=void 0===d?null:d,this.h=void 0===p?null:p,this.status=h,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=void 0===f?null:f,this.thumbnailSprite=null,this.i=-1,this.u=void 0!==m&&m,this.ce=this.Xc=!1,t=(e=g(this.g)).next();!t.done;t=e.next())t.value.ri();this.u&&this.g.length&&this.g[this.g.length-1].pi(),this.o=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}function Vs(e,t){e.aa=t;for(var n=(e=g(e.g)).next();!n.done;n=e.next())Vs(n.value,t)}js.prototype.Jc=function(){return this.startByte},js.prototype.Gc=function(){return this.endByte},js.prototype.me=function(e){this.h=e},js.prototype.Yb=function(){return this.h},$("shaka.media.InitSegmentReference",js),js.prototype.getEndByte=js.prototype.Gc,js.prototype.getStartByte=js.prototype.Jc,(i=$s.prototype).P=function(){return this.C()},i.getStartTime=function(){return this.startTime},i.Fj=function(){return this.endTime},i.Jc=function(){return this.startByte},i.Gc=function(){return this.endByte},i.bk=function(){return this.tilesLayout},i.$j=function(){return this.B},i.Kc=function(){return this.status},i.yk=function(){this.status=Gs},i.Rg=function(){this.preload=!0},i.isPreload=function(){return this.preload},i.wd=function(){this.l=!1},i.lk=function(){return this.l},i.ri=function(){this.Xc=!0},i.pk=function(){return this.Xc},i.pi=function(){this.ce=!0},i.nk=function(){return this.ce},i.oi=function(){this.m=!0},i.hk=function(){return this.m},i.If=function(e){this.thumbnailSprite=e},i.Yj=function(){return this.thumbnailSprite},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=g(this.g),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},i.Ah=function(e){null==this.h?W("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},i.me=function(e,t){this.o=e,this.F=void 0!==t&&t},i.Yb=function(e){var t=this.o;return(void 0===e||e)&&this.F&&(this.o=null),t},$("shaka.media.SegmentReference",$s),$s.prototype.getSegmentData=$s.prototype.Yb,$s.prototype.setSegmentData=$s.prototype.me,$s.prototype.syncAgainst=$s.prototype.Ah,$s.prototype.offset=$s.prototype.offset,$s.prototype.getThumbnailSprite=$s.prototype.Yj,$s.prototype.setThumbnailSprite=$s.prototype.If,$s.prototype.hasByterangeOptimization=$s.prototype.hk,$s.prototype.markAsByterangeOptimization=$s.prototype.oi,$s.prototype.isLastPartial=$s.prototype.nk,$s.prototype.markAsLastPartial=$s.prototype.pi,$s.prototype.isPartial=$s.prototype.pk,$s.prototype.markAsPartial=$s.prototype.ri,$s.prototype.isIndependent=$s.prototype.lk,$s.prototype.markAsNonIndependent=$s.prototype.wd,$s.prototype.isPreload=$s.prototype.isPreload,$s.prototype.markAsPreload=$s.prototype.Rg,$s.prototype.markAsUnavailable=$s.prototype.yk,$s.prototype.getStatus=$s.prototype.Kc,$s.prototype.getTileDuration=$s.prototype.$j,$s.prototype.getTilesLayout=$s.prototype.bk,$s.prototype.getEndByte=$s.prototype.Gc,$s.prototype.getStartByte=$s.prototype.Jc,$s.prototype.getEndTime=$s.prototype.Fj,$s.prototype.getStartTime=$s.prototype.getStartTime,$s.prototype.getUris=$s.prototype.P;var Hs=0,Gs=1;function qs(e){return 1==e.length&&e.end(0)-e.start(0)<1e-4}function Ws(e){return!e||qs(e)?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null}function Ks(e){return!e||qs(e)?null:e.length?e.end(e.length-1):null}function Xs(e,t){return!(!e||!e.length||qs(e)||t>e.end(e.length-1))&&t>=e.start(0)}function Ys(e,t){if(!e||!e.length||qs(e))return 0;for(var n=0,o=(e=g(Js(e))).next();!o.done;o=e.next()){var i=o.value;o=i.start,(i=i.end)>t&&(n+=i-Math.max(o,t))}return n}function Js(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Qs(){}function Zs(e,t){var n=document.createElement("source");return n.src=e,n.type=void 0===t?"":t,n}function ea(e){for(var t=!1,n=e.getElementsByTagName("source"),o=n.length-1;o>=0;--o)e.removeChild(n[o]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function ta(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function na(){return ia||(oa||(oa=new To(function(){ia=null})),(ia=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(ia=document.createElement("video")),oa.ka(1),ia)}$s.Status={rl:Hs,Am:Gs,Wl:2},$("shaka.util.Dom",Qs),Qs.removeAllChildren=ta,Qs.clearSourceFromVideo=ea;var oa=null,ia=null;
/*
      		 @license
      		 Shaka Player
      		 Copyright 2022 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/function ra(){}function sa(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function aa(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function la(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function ua(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(e.size<2||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var o=$e(Ne(e.data,1,n)),i=e.data[2+n],r=e.data.subarray(3+n).indexOf(0);if(-1===r)return null;var s,a=$e(Ne(e.data,3+n,r));return s="--\x3e"===o?$e(Ne(e.data,4+n+r)):Oe(e.data.subarray(4+n+r)),t.mimeType=o,t.pictureType=i,t.description=a,t.data=s,t}return"TXXX"===e.type||"WXXX"===e.type?e.size<2||3!==e.data[0]||-1===(o=e.data.subarray(1).indexOf(0))?null:(n=$e(Ne(e.data,1,o)),e=$e(Ne(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?e.size<2||-1===(n=e.data.indexOf(0))?null:(n=$e(Ne(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=Oe(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?e.size<2||3!==e.data[0]?null:(e=$e(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=$e(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Oe(e.data),t):null}function ca(e){for(var t=0,n=[];sa(e,t);){var o=la(e,t+6);for(e[t+5]>>6&1&&(t+=10),o=(t+=10)+o;t+10<o;){var i=e.subarray(t),r=la(i,4);(r=ua(i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:r,data:i.subarray(10,10+r)}))&&n.push(r),t+=i.size+10}aa(e,t)&&(t+=10)}return n}function da(e,t){for(var n=t=void 0===t?0:t,o=0;sa(e,t);)e[t+5]>>6&1&&(o+=10),o+=10,o+=la(e,t+6),aa(e,t+10)&&(o+=10),t+=o;return o>0?e.subarray(n,n+o):new Uint8Array([])}function pa(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function ha(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,o=0;o<e.byteLength;o++)o>=2&&3==e[o]&&0==e[o-1]&&0==e[o-2]||(t[n]=e[o],n++);this.j=Ne(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function fa(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),o=Math.min(4,e.i);0!==o&&(n.set(e.j.subarray(t,t+o)),e.h=new or(n,0).U(),e.g=8*o,e.i-=o)}function ma(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,fa(e)}e.h<<=t,e.g-=t}function ga(e,t){var n=Math.min(e.g,t),o=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&fa(e),(n=t-n)>0?o<<n|ga(e,n):o}function ya(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return fa(e),t+ya(e)}function va(e){ma(e,1+ya(e))}function ba(e){return ga(e,ya(e)+1)-1}function xa(e){return 1&(e=ba(e))?1+e>>>1:-1*(e>>>1)}function wa(e){return 1===ga(e,1)}function Sa(e){return ga(e,8)}function Ta(e,t){for(var n=8,o=8,i=0;i<t;i++)0!==o&&(o=(n+(o=xa(e))+256)%256),n=0===o?n:o}function ka(e){return Sa(e),ba(e),ba(e)}function Ca(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}function Aa(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var o=t[7];if(192&o){var i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.u&&(e.u=i),n.pts=Ea(i,e.u),e.u=n.pts,n.dts=n.pts,64&o&&(o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.o&&(e.o=o),n.dts=n.pts!=i?Ea(o,e.o):o),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function Ia(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function Ea(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e}function Ma(e){return!(Ra(e)<0)}function Ra(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}$("shaka.util.Id3Utils",ra),ra.getID3Data=da,ra.getID3Frames=ca,$("shaka.util.ExpGolomb",ha),(i=Ca.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},i.Gf=function(e){null!=this.B&&this.B!=e&&(this.o=this.u=null),this.B=e},i.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,Ra(e)),n=e.length-(e.length+t)%188,o=!1,i=t;i<n;i+=188)if(71==e[i]){var r=!!(64&e[i+1]),s=((31&e[i+1])<<8)+e[i+2];if((48&e[i+3])>>4>1){var a=i+5+e[i+4];if(a==i+188)continue}else a=i+4;switch(s){case 0:r&&(a+=e[a]+1),this.I=(31&e[a+10])<<8|e[a+11];break;case 17:case 8191:break;case this.I:r&&(a+=e[a]+1),s={audio:-1,video:-1,$e:-1,audioCodec:"",videoCodec:""};var l=a+3+((15&(r=e)[a+1])<<8|r[a+2])-4;for(a+=12+((15&r[a+10])<<8|r[a+11]);a<l;){var u=(31&r[a+1])<<8|r[a+2],c=(15&r[a+3])<<8|r[a+4];switch(r[a]){case 6:if(c>0)for(var d=a+5,p=c;p>2;){var h=r[d+1]+2;switch(r[d]){case 5:var f=We(r.subarray(d+2,d+h));-1==s.audio&&"Opus"===f?(s.audio=u,s.audioCodec="opus"):-1==s.video&&"AV01"===f&&(s.video=u,s.videoCodec="av1");break;case 106:-1==s.audio&&(s.audio=u,s.audioCodec="ac3");break;case 122:-1==s.audio&&(s.audio=u,s.audioCodec="ec3");break;case 124:-1==s.audio&&(s.audio=u,s.audioCodec="aac");break;case 127:"opus"==s.audioCodec&&(f=null,128===r[d+2]&&(f=r[d+3]),null!=f&&(this.H={channelCount:15&f?15&f:2,oj:f,sampleRate:48e3}))}d+=h,p-=h}break;case 15:-1==s.audio&&(s.audio=u,s.audioCodec="aac");break;case 17:-1==s.audio&&(s.audio=u,s.audioCodec="aac-loas");break;case 21:-1==s.$e&&(s.$e=u);break;case 27:-1==s.video&&(s.video=u,s.videoCodec="avc");break;case 3:case 4:-1==s.audio&&(s.audio=u,s.audioCodec="mp3");break;case 36:-1==s.video&&(s.video=u,s.videoCodec="hvc");break;case 129:-1==s.audio&&(s.audio=u,s.audioCodec="ac3");break;case 132:case 135:-1==s.audio&&(s.audio=u,s.audioCodec="ec3")}a+=c+5}-1!=(r=s).video&&(this.K=r.video,this.m=r.videoCodec),-1!=r.audio&&(this.F=r.audio,this.C=r.audioCodec),-1!=r.$e&&(this.G=r.$e),o&&!this.J&&(o=!1,i=t-188),this.J=!0;break;case this.K:a=e.subarray(a,i+188),r?this.j.push([a]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(a);break;case this.F:a=e.subarray(a,i+188),r?this.i.push([a]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(a);break;case this.G:a=e.subarray(a,i+188),r?this.l.push([a]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(a);break;default:o=!0}}return this},i.Fk=function(e){return pe("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Xg(e,{fe:null,state:null})},i.Xg=function(e,t){var n=e.pts?e.pts/9e4:null,o=(e=e.data).byteLength,i=1;"hvc"==this.m&&(i=2);var r=t.state||0,s=r,a=0,l=[],u=-1,c=0;for(-1==r&&(u=0,c="hvc"==this.m?e[0]>>1&63:31&e[0],r=0,a=1);a<o;){var d=e[a++];r?1===r?r=d?0:2:d?1==d?(d=a-r-1,u>=0?l.push({data:e.subarray(u+i,d),fullData:e.subarray(u,d),type:c,time:n,state:null}):(r=l.length?l[l.length-1]:t.fe)&&(s&&a<=4-s&&r.state&&(r.data=r.data.subarray(0,r.data.byteLength-s),r.fullData=r.fullData.subarray(0,r.fullData.byteLength-s)),d>0&&(d=e.subarray(0,d),r.data=nt(r.data,d),r.fullData=nt(r.fullData,d),r.state=0)),a<o?(c="hvc"==this.m?e[a]>>1&63:31&e[a],u=a,r=0):r=-1):r=0:r=3:r=d?0:1}return u>=0&&r>=0&&l.push({data:e.subarray(u+i,o),fullData:e.subarray(u,o),type:c,time:n,state:r}),!l.length&&t.fe&&(n=l.length?l[l.length-1]:t.fe)&&(n.data=nt(n.data,e),n.fullData=nt(n.fullData,e)),t.state=r,l},i.getMetadata=function(){for(var e=[],t=g(this.l),n=t.next();!n.done;n=t.next())(n=Aa(this,n=nt.apply(Ye,y(n.value))))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:ca(n.data),dts:n.dts,pts:n.pts});return e},i.xb=function(){if(this.i.length&&!this.h.length)for(var e=g(this.i),t=e.next();!t.done;t=e.next()){var n=nt.apply(Ye,y(t.value)),o=Aa(this,n);t=this.h.length?this.h[this.h.length-1]:null,o&&null!=o.pts&&null!=o.dts&&(!t||t.pts!=o.pts&&t.dts!=o.dts)?this.h.push(o):this.h.length&&(n=o?o.data:n)&&((t=this.h.pop()).data=nt(t.data,n),this.h.push(t))}return this.h},i.ud=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=g(this.j),n=t.next();!n.done;n=t.next()){var o=nt.apply(Ye,y(n.value)),i=Aa(this,o);n=this.g.length?this.g[this.g.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!n||n.pts!=i.pts&&n.dts!=i.dts)?this.g.push(i):this.g.length&&(o=i?i.data:o)&&((n=this.g.pop()).data=nt(n.data,o),this.g.push(n))}if(e){for(t={fe:null,state:null},n=[],i=(o=g(this.g)).next();!i.done;i=o.next())(i=i.value).nalus=this.Xg(i,t),i.nalus.length&&(n.push(i),t.fe=i.nalus[i.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},i.getStartTime=function(e){if("audio"==e){e=null;var t=this.xb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,(t=this.ud(!1)).length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},i.Td=function(){return{audio:this.C,video:this.m}},i.Ze=function(){for(var e=[],t=g(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,y(n.value.nalus));return e},i.ek=function(){pe("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Kg();return{height:e.height,width:e.width}},i.Kg=function(){return"hvc"==this.m?function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Ze();if(!n.length)return t;if(!(n=n.find(function(e){return 33==e.type})))return t;var o=new ha(n.fullData,!0);Sa(o),Sa(o),ga(o,4);var i=ga(o,3);wa(o);var r=ga(o,2),s=ga(o,1),a=ga(o,5),l=ga(o,32);n=Sa(o);for(var u=Sa(o),c=Sa(o),d=Sa(o),p=Sa(o),h=Sa(o),f=Sa(o),m=[],g=[],y=0;y<i;y++)m.push(wa(o)),g.push(wa(o));if(i>0)for(y=i;y<8;y++)ga(o,2);for(y=0;y<i;y++)m[y]&&ga(o,88),g[y]&&Sa(o);ba(o),3==(i=ba(o))&&ga(o,1),m=ba(o),g=ba(o);var v=y=0,b=0,x=0;return wa(o)&&(y+=ba(o),v+=ba(o),b+=ba(o),x+=ba(o)),t.width=String(m-(y+v)*(1===i||2===i?2:1)),t.height=String(g-(b+x)*(1===i?2:1)),o=function(e){for(var t=0,n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}(l),s=1==s?"H":"L",r="hvc1."+["","A","B","C"][r]+a,r+="."+o.toString(16).toUpperCase(),r+="."+s+f,h&&(r+="."+h.toString(16).toUpperCase()),p&&(r+="."+p.toString(16).toUpperCase()),d&&(r+="."+d.toString(16).toUpperCase()),c&&(r+="."+c.toString(16).toUpperCase()),u&&(r+="."+u.toString(16).toUpperCase()),n&&(r+="."+n.toString(16).toUpperCase()),t.codec=r,t.frameRate=Ia(e),t}(this):function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Ze();if(!n.length)return t;if(!(n=n.find(function(e){return 7==e.type})))return t;var o=Sa(n=new ha(n.data)),i=Sa(n),r=Sa(n);if(va(n),_a.includes(o)){var s=ba(n);if(3===s&&ma(n,1),va(n),va(n),ma(n,1),wa(n)){s=3!==s?8:12;for(var a=0;a<s;a++)wa(n)&&Ta(n,a<6?16:64)}}if(va(n),0===(s=ba(n)))ba(n);else if(1===s)for(ma(n,1),va(n),va(n),s=ba(n),a=0;a<s;a++)va(n);va(n),ma(n,1),s=ba(n),a=ba(n);var l=ga(n,1);0===l&&ma(n,1),ma(n,1);var u=0,c=0,d=0,p=0;return wa(n)&&(u=ba(n),c=ba(n),d=ba(n),p=ba(n)),t.height=String((2-l)*(a+1)*16-2*d-2*p),t.width=String(16*(s+1)-2*u-2*c),t.codec="avc1."+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2),t.frameRate=Ia(e),t}(this)},$("shaka.util.TsParser",Ca),Ca.syncOffset=Ra,Ca.probe=Ma,Ca.prototype.getVideoInfo=Ca.prototype.Kg,Ca.prototype.getVideoResolution=Ca.prototype.ek,Ca.prototype.getVideoNalus=Ca.prototype.Ze,Ca.prototype.getCodecs=Ca.prototype.Td,Ca.prototype.getStartTime=Ca.prototype.getStartTime,Ca.prototype.getVideoData=Ca.prototype.ud,Ca.prototype.getAudioData=Ca.prototype.xb,Ca.prototype.getMetadata=Ca.prototype.getMetadata,Ca.prototype.parseNalus=Ca.prototype.Xg,Ca.prototype.parseAvcNalus=Ca.prototype.Fk,Ca.prototype.parse=Ca.prototype.parse,Ca.prototype.setDiscontinuitySequence=Ca.prototype.Gf,Ca.prototype.clearData=Ca.prototype.clearData,Ca.Timescale=9e4;var _a=[100,110,122,244,44,83,86,118,128,138,139,134];function La(e,t,n,o,i){var r=this;this.g=e,this.O=n,this.B=o,this.ba=t,this.l=new Map,this.F=new Map,this.Sa=new Map,this.h=null,this.Ga=!1,this.H=i||null,this.o=new Map,this.u=new oe,this.j=new Map,this.K=null,this.M=new Ei,this.Da="",this.ob=!1,this.ya=!0,this.N=!1,this.C=this.R=null,this.i=Pa(this,this.M),this.ab=this.G=!1,this.J=new Qi(function(){return function(e){var t,n,o,i,r,s,a,l,u,c,d,p,h;return D(function(f){if(1==f.g){for(t=[],n=g(e.o),o=n.next();!o.done;o=n.next())for(i=o.value,r=g(i),s=r.next().value,a=r.next().value,l=a[0],u=s,e.o.set(u,a.slice(0,1)),l&&t.push(l.p.catch(Co)),c=g(a.slice(1)),d=c.next();!d.done;d=c.next())d.value.p.reject(new je(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),S(f,Promise.all(t),2)}for(p=g(e.j.values()),h=p.next();!h.done;h=p.next())h.value.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.C=null,e.B=null,e.i=null,e.h=null,e.ba=null,e.l.clear(),e.Sa.clear(),e.j.clear(),e.K=null,e.o.clear(),e.H=null,e.$.clear(),e.O=null,T(f)})}(r)}),this.I=!1,this.X="UNKNOWN",this.ib=this.kb=!1,this.Ta=new Ei,this.m=!1,this.xa=null,this.$=new Map,this.oa=this.S=this.wa=this.V=null,this.ma=new Ei,this.g.remote&&(this.N="disconnected"!=this.g.remote.state,this.u.D(this.g.remote,"connect",function(){r.N="disconnected"!=r.g.remote.state}),this.u.D(this.g.remote,"connecting",function(){r.N="disconnected"!=r.g.remote.state}),this.u.D(this.g.remote,"disconnect",function(){r.N="disconnected"!=r.g.remote.state}))}function Pa(t,n){if(t.ya=!0,e.ManagedMediaSource){t.C||(t.g.disableRemotePlayback=!0);var o=new ManagedMediaSource;t.u.D(o,"startstreaming",function(){t.ya=!0}),t.u.D(o,"endstreaming",function(){t.ya=!1})}else o=new MediaSource;return t.u.Aa(o,"sourceopen",function(){URL.revokeObjectURL(t.Da),n.resolve()}),t.u.Aa(t.g,"playing",function(){t.ob=!0}),t.Da=il(o),t.B.useSourceElements?(t.g.removeAttribute("src"),t.R&&t.g.removeChild(t.R),t.C&&t.g.removeChild(t.C),t.R=Zs(t.Da),t.g.appendChild(t.R),t.C&&t.g.appendChild(t.C),t.g.load()):t.g.src=t.Da,o}function Da(e,t,n,i){"audio"==t&&i&&(i=Wo(i,n.mimeType));var r=oo(n.mimeType,i);if(t==ut)Na(e,r,e.I,n.external);else{var s=e.B.forceTransmux;(!yt(r)||!e.I&&fo.includes(r))&&(s=!0);var a=io(n.mimeType,i);if(s){if(s=at("audio",(i||"").split(",")),i=at("video",(i||"").split(",")),s&&i)return e.m=!0,Da(e,"audio",n,s),void Da(e,"video",n,i);(i=Yn(a))&&(r=i(),e.j.set(t,r),r=r.convertCodecs(t,a))}a=r+e.B.addExtraFeaturesToSourceBuffer(r),Zi(e.J);try{var l=e.i.addSourceBuffer(a)}catch(o){throw new je(2,3,3015,o,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.I&&(l.mode=rl),e.u.D(l,"error",function(){var n=e.o.get(t)[0];n.p.reject(new je(2,3,3014,e.g.error?e.g.error.code:0,n.uri))}),e.u.D(l,"updateend",function(){return Ya(e,t)}),e.l.set(t,l),e.F.set(t,r),e.Sa.set(t,!!n.drmInfos.length)}}function Oa(e){return e.ya&&!e.N&&!e.G}function Na(e,t,n,o){e.h||(e.h=new mo(e.ba),e.h&&(e.h.B=e.B.modifyCueCallback));var i=e.h;o=o||e.Ga,e=e.X,"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=wo.get(t)(),i.i.setSequenceMode?i.i.setSequenceMode(n):pe("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):pe("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),i.C=o)}function Ua(e){return!(e.G||e.i&&"ended"!=e.i.readyState)}function Ba(e){return!(e.G||e.i&&"closed"!=e.i.readyState)}function Fa(e,t){return e.l.size?t==ut?e.h.g:Ws(za(e,t)):null}function ja(e,t){return e.l.size?t==ut?e.h.h:Ks(za(e,t)):null}function za(e,t){if(e.G||e.N)return null;try{return e.l.get(t).buffered}catch(n){return e.l.has(t),null}}function $a(e,t,n,o,i,r,s,a,l,u,c){var d,p,h,f,m,v,b,x,w,k,C,A,I,E,M,R,_,L,P;return s=void 0!==s&&s,a=void 0!==a&&a,l=void 0!==l&&l,u=void 0!==u&&u,D(function(O){switch(O.g){case 1:if(t!=(d=ct).Na){O.A(2);break}if("HLS"!=e.X){O.A(3);break}return S(O,e.Ta,4);case 4:p=O.h,e.h.u=p;case 3:return S(O,function(e,t,n,o,i){var r,s,a,l,u,c,d;return D(function(p){if(1==p.g)return S(p,Promise.resolve(),2);if(!e.i||!e.j)return p.return();if(null==n||null==o)return e.i.parseInit(Ne(t)),p.return();for(r=e.C?n:e.u,s={periodStart:e.u,segmentStart:n,segmentEnd:o,vttOffset:r},a=e.i.parseMedia(Ne(t),s,i,[]),l=g(a),u=l.next();!u.done;u=l.next())c=u.value,e.B(c,i||null,s);d=a.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(d),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(o,e.m),T(p)})}(e.h,n,o?o.startTime:null,o?o.endTime:null,o?o.P()[0]:null),5);case 5:return O.return();case 2:if(u||!e.m){O.A(6);break}return S(O,$a(e,d.ia,n,o,i,r,s,a,l,!0),7);case 7:return S(O,$a(e,d.Ca,n,o,i,r,s,a,l,!0),8);case 8:return O.return();case 6:if(!e.l.has(t))return O.return();if(h=e.l.get(t).timestampOffset,f=e.F.get(t),e.j.has(t)&&(f=e.j.get(t).getOriginalMimeType()),o&&(m=function(e,t,n,o,i,r){var s=null,a=[],l=Ne(n);if(fo.includes(r))(t=ca(l)).length&&o&&((n=t.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&"number"==typeof n.data&&(s=Math.round(n.data)/1e3),e.O.onMetadata([{cueTime:o.startTime,data:l,frames:t,dts:o.startTime,pts:o.startTime}],0,o.endTime));else if(r.includes("/mp4")&&o&&o.aa&&o.aa.timescale){var u=o.aa.timescale;if(!isNaN(u)){var c=null!=i.emsgSchemeIdUris&&i.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes,d=0,p=!1;l=new sr,c&&l.T("emsg",function(t){var n=i.emsgSchemeIdUris;if(0===t.version)var r=t.reader.Yc(),s=t.reader.Yc(),a=t.reader.U(),l=t.reader.U(),u=t.reader.U(),c=t.reader.U(),d=o.startTime+l/a;else a=t.reader.U(),l=(d=t.reader.Dd()/a+o.timestampOffset)-o.startTime,u=t.reader.U(),c=t.reader.U(),r=t.reader.Yc(),s=t.reader.Yc();t=t.reader.Tb(t.reader.getLength()-t.reader.Pa()),(n&&n.includes(r)||e.B.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==r?e.O.Ek():((n=new Uint8Array(t.byteLength)).set(t),t=d+u/a,e.O.Ck({startTime:d,endTime:t,schemeIdUri:r,value:s,timescale:a,presentationTimeDelta:l,eventDuration:u,id:c,messageData:n}),("https://aomedia.org/emsg/ID3"==r||"https://developer.apple.com/streaming/emsg-id3"==r)&&(a=ca(n)).length&&e.O.onMetadata([{cueTime:d,data:n,frames:a,dts:d,pts:d}],0,t)))}),l.T("prft",function(t){var n=t.reader,o=t.version;n.U(),t=1e3*(t=n.U())+n.U()/4294967296*1e3,0===o?n=n.U():(o=n.U(),n=4294967296*o+(n=n.U())),t=pa(t),n=new Oi("prft",n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/u*1e3)})),e.O.onEvent(n)}).box("moof",ar).box("traf",ar).T("tfdt",function(e){p||(d=rs(e.reader,e.version).baseMediaDecodeTime/u,p=!0,c||e.parser.stop())}).parse(n,!0),p&&0==o.timestampOffset&&(s=d)}}else r.includes("/mp4")||r.includes("/webm")||!Ma(l)||(e.$.has(t)||e.$.set(t,new Ca),(a=e.$.get(t)).clearData(),a.Gf(o.i),a.parse(l),null!=(l=a.getStartTime(t))&&(s=l),a=a.getMetadata());return{timestamp:s,metadata:a}}(e,t,n,o,i,f),v=m.timestamp,b=m.metadata,null!=v&&(null==e.V&&t==d.Ca&&(e.V=v,e.wa=o.startTime,null!=e.S&&(x=0,e.wa==e.oa&&(x=e.V-e.S),e.ma.resolve(x))),null==e.S&&t==d.ia&&(e.S=v,e.oa=o.startTime,null!=e.V&&(w=0,e.wa==e.oa&&(w=e.V-e.S),e.ma.resolve(w))),k=v,C=fo,!e.I&&C.includes(e.F.get(t))&&(k=0),A=o.startTime-k,(Math.abs(h-A)>=.001||s||a)&&(!l||A>0||!h)&&(h=A,e.ib&&(Ja(e,t,function(){return Wa(e,t)},null),Ja(e,t,function(){return Ka(e,t,h)},null))),(t==d.Ca||!e.l.has(d.Ca))&&e.Ta.resolve(h)),b.length)&&e.O.onMetadata(b,h,o?o.endTime:null),r&&t==d.Ca&&(e.h||Na(e,"application/cea-608",e.I,!1),e.K||(I=f.split(";",1)[0],e.K=new kt(I)),o?(E=e.K.xf(n)).length&&function(e,t,n,o,i){for(var r=n+" "+o,s=new Map,a=(t=g(t)).next();!a.done;a=t.next()){var l=a.value;a=l.stream,l=l.cue,s.has(a)||s.set(a,new Map),s.get(a).has(r)||s.get(a).set(r,[]),xo(e,l,i),l.startTime>=e.l&&l.startTime<e.m&&(s.get(a).get(r).push(l),a==e.F&&e.j.append([l]))}for(r=(i=g(s.keys())).next();!r.done;r=i.next())for(r=r.value,e.o.has(r)||e.o.set(r,new Map),a=(t=g(s.get(r).keys())).next();!a.done;a=t.next())a=a.value,l=s.get(r).get(a),e.o.get(r).set(a,l);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(o,e.m))}(e.h,E,o.startTime,o.endTime,h):e.K.init(n,a,c)),!e.j.has(t)){O.A(9);break}return S(O,e.j.get(t).transmux(n,i,o,e.i.duration,t),10);case 10:M=O.h,ArrayBuffer.isView(M)?n=M:(null!=(R=M).init&&(_=R.init,Ja(e,t,function(){e.H&&ft(e.H,_,h,i),e.l.get(t).appendBuffer(_)},o?o.P()[0]:null)),n=R.data);case 9:if(n=function(e,t,n,o,i){if("mp4"!=so(e.F.get(i)))return n;var r=null===o,s=e.Sa.get(i),a=e.O.Kj(),l=!1;o&&o.aa&&(l=o.aa.encrypted),o=o?o.P()[0]:null;var u=ae();return e.B.correctEc3Enca&&r&&"audio"===i&&(n=function(e){e=Ne(e);var t=null;return(new sr).box("moov",ar).box("trak",ar).box("mdia",ar).box("minf",ar).box("stbl",ar).T("stsd",lr).box("enca",function(e){return t=e.reader.h,cr(e)}).box("sinf",ar).box("frma",function(e){e.parser.stop(),"ec-3"===us(e.reader).codec&&t&&2!==t.getUint16(16)&&t.setUint16(16,2)}).parse(e),e}(n)),e.B.insertFakeEncryptionInInit&&s&&u.Ed(a,i)&&(r?n=function(e,t,n){function o(e){d.push({box:e,wi:1701733217})}function i(e){d.push({box:e,wi:1701733238})}function r(e){u=!0,e.parser.stop()}function s(e){c.push(e),ar(e)}var a,l=t=Ne(t),u=!1,c=[],d=[];if((new sr).box("moov",s).box("trak",s).box("mdia",s).box("minf",s).box("stbl",s).T("stsd",function(e){a=e,c.push(e),lr(e)}).T("encv",r).T("enca",r).T("dvav",i).T("dva1",i).T("dvh1",i).T("dvhe",i).T("dvc1",i).T("dvi1",i).T("hev1",i).T("hvc1",i).T("avc1",i).T("avc3",i).T("ac-3",o).T("ec-3",o).T("ac-4",o).T("Opus",o).T("fLaC",o).T("mp4a",o).parse(t),u)return t;if(0==d.length||!a)throw tt(t),new je(2,3,3019,n);d.reverse();for(var p=(n=g(d)).next();!p.done;p=n.next())p=p.value,l=Bs(e,l,a,p.box,c,p.wi);return ae().Gi()?((e=new Uint8Array(t.byteLength+l.byteLength)).set(l),e.set(t,l.byteLength),e):l}(t,n,o):!l&&u.Hi(i)&&(n=function(e){e=Ne(e);var t=[];(new sr).box("mdat",function(e){t.push(e)}).parse(e);for(var n=[],o=0;o<t.length;o++){var i=t[o-1],r=t[o];n.push(Us(e.subarray(i?i.start+i.size:0,r.start+r.size)))}return nt.apply(Ye,y(n))}(n))),r&&u.le()&&(n=function(e){function t(e){o.push({start:e.start,size:e.size}),ar(e)}var n=Ne(e),o=[];return(new sr).box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(e){o.push({start:e.start,size:e.size});for(var t=Be(n,e.start),i=0;i<e.size-3;i++){var r=t.getUint32(i);1633889587==r?t.setUint32(i,1700998451):1684103987==r&&t.setUint32(i,1684366131)}}).parse(n),n}(n)),n}(e,i,n,o,t),!o||!e.I||t==d.Na){O.A(11);break}if(!s&&!a){O.A(11);break}if(L=o.startTime,"HLS"!=e.X||e.m||t!=d.ia||!e.l.has(d.Ca)){O.A(13);break}return S(O,e.ma,14);case 14:P=O.h,Math.abs(P)>.15&&(L-=P);case 13:Ja(e,t,function(){return Wa(e,t)},null),Ja(e,t,function(){return Ka(e,t,L)},null);case 11:return S(O,Ja(e,t,function(){var o=n;e.H&&ft(e.H,o,h,i),e.l.get(t).appendBuffer(o)},o?o.P()[0]:null),15);case 15:T(O)}})}function Va(e,t){var n;return D(function(o){return 1==o.g?t==(n=ct).Na?e.h?S(o,e.h.remove(0,1/0),0):o.return():S(o,Ja(e,t,function(){return qa(e,t,0,e.i.duration)},null),4):e.m?S(o,Ja(e,n.ia,function(){return qa(e,n.ia,0,e.i.duration)},null),0):o.A(0)})}function Ha(e,t,n,o,i,r,s,a,l){var u,c;return D(function(d){return 1==d.g?t==(u=ct).Na?(r||(e.h.u=n),function(e,t,n){e.l=t,e.m=n}(e.h,o,i),d.return()):(c=[],S(d,function(e,t,n,o,i){var r,s,a,l,u,c;return D(function(d){return 1==d.g?(r=ct,s=ol(e,t,n,o,i),a=s.type,l=s.dc,u=s.qf,(c=i.get(r.ia))&&(e.m=c.isAudioMuxedInVideo),a==sl?(e.j.has(t)&&!l?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&l?e.j.set(t,l):l&&(e.j.has(t)&&e.j.get(t).transmux!==l.transmux?(e.j.get(t).destroy(),e.j.set(t,l)):l.destroy()),d.return(!1)):a==ll?S(d,function(e,t,n,o){return Ja(e,t,function(){if(t!==ut){if(e.F.get(t),vt()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),o&&e.j.set(t,o);var i=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(i),e.F.set(t,n)}Ya(e,t)}},null)}(e,t,u,l),3):a!=al?d.A(3):(l&&l.destroy(),S(d,tl(e,i),3))):d.return(!0)})}(e,t,s,a,l),2)):(d.h||(c.push(Ja(e,t,function(){return Wa(e,t)},null)),e.m&&c.push(Ja(e,u.ia,function(){return Wa(e,u.ia)},null))),r||(c.push(Ja(e,t,function(){return Ka(e,t,n)},null)),e.m&&c.push(Ja(e,u.ia,function(){return Ka(e,u.ia,n)},null))),0==o&&i==1/0||(c.push(Ja(e,t,function(){return Xa(e,t,o,i)},null)),e.m&&c.push(Ja(e,u.ia,function(){return Xa(e,u.ia,o,i)},null))),c.length?S(d,Promise.all(c),0):d.A(0))})}function Ga(e){D(function(t){return e.J.g||e.g.error||e.N||e.G||Ua(e)||Ba(e)?t.return():S(t,Qa(e,function(){Ua(e)||Ba(e)||e.i.clearLiveSeekableRange()}),0)})}function qa(e,t,n,o){o<=n?Ya(e,t):e.l.get(t).remove(n,o)}function Wa(e,t){var n=e.l.get(t),o=n.appendWindowStart,i=n.appendWindowEnd;n.abort(),n.appendWindowStart=o,n.appendWindowEnd=i,Ya(e,t)}function Ka(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,Ya(e,t)}function Xa(e,t,n,o){var i=e.l.get(t);i.appendWindowEnd===o&&i.appendWindowStart===n||(i.appendWindowStart=0,i.appendWindowEnd=o,i.appendWindowStart=n),Ya(e,t)}function Ya(e,t){if(e.G||e.J.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),Za(e,t))}function Ja(e,t,n,o){return Zi(e.J),n={start:n,p:new Ei,uri:o},e.o.get(t).push(n),1==e.o.get(t).length&&el(e,t),n.p}function Qa(e,t){var n,o,i,r,s,a,l,u,c,d,p;return D(function(h){switch(h.g){case 1:for(Zi(e.J),n=[],o=Array.from(e.l.keys()),i=g(o),r=i.next(),s={};!r.done;s={ready:void 0},r=i.next())a=r.value,s.ready=new Ei,l={start:function(e){return function(){return e.ready.resolve()}}(s),p:s.ready,uri:null},(u=e.o.get(a)).push(l),n.push(s.ready),1==u.length&&l.start();return k(h,2),S(h,Promise.all(n),4);case 4:A(h,3);break;case 2:throw I(h);case 3:return k(h,5,6),S(h,t(),6);case 6:for(E(h),c=g(o),d=c.next();!d.done;d=c.next())p=d.value,Za(e,p);M(h,0);break;case 5:throw new je(2,3,3015,I(h),e.g.error||"No error in the media element",null)}})}function Za(e,t){e.o.get(t).shift(),el(e,t)}function el(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(o){"QuotaExceededError"==o.name?n.p.reject(new je(2,3,3017,t)):Oa(e)?n.p.reject(new je(2,3,3015,o,e.g.error||"No error in the media element",n.uri)):n.p.reject(new je(2,3,3024,t)),Za(e,t)}}function tl(e,t){return Qa(e,function(){return function(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w;return D(function(T){if(1==T.g){if(e.G||e.N)return T.return();for(n=ct,e.G=!0,e.m=!1,o=e.g.currentTime,i=e.g.autoplay,e.g.paused||(e.ab=!0),e.ob&&(e.g.autoplay=!1),C(T,2),e.u.Qa(),r=g(e.j.values()),s=r.next();!s.done;s=r.next())s.value.destroy();for(a=g(e.l.values()),l=a.next();!l.done;l=a.next()){u=l.value;try{e.i.removeSourceBuffer(u)}catch(ts){}}return e.j.clear(),e.l.clear(),c=e.i.duration,e.M=new Ei,e.i=Pa(e,e.M),S(T,e.M,4)}if(2!=T.g){for(!isNaN(c)&&c?e.i.duration=c:!isNaN(e.xa)&&e.xa&&(e.i.duration=e.xa),d=new Ei,p=e.i.sourceBuffers,h=t.size,f=0,m=function(){++f===h&&(d.resolve(),e.u.Ma(p,"addsourcebuffer",m))},e.u.D(p,"addsourcebuffer",m),y=g(t.keys()),v=y.next();!v.done;v=y.next())b=v.value,x=t.get(b),Da(e,b,x,x.codecs);return(w=t.get(n.ia))&&w.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.ia)&&e.o.set(n.ia,[]),e.g.currentTime=o,S(T,d,2)}return E(T),e.G=!1,Zi(e.J),e.u.Aa(e.g,"canplaythrough",function(){e.J.g||(e.g.autoplay=i,e.ab&&(e.ab=!1,e.g.play()))}),M(T,0)})}(e,t)})}function nl(e,t,n,o){var i=!1,r=at("audio",(o||"").split(",")),s=at("video",(o||"").split(",")),a=s;"audio"==t&&(a=r),a||(a=o),o=oo(n,a);var l=uo(e.F.get(t)),u=e.B.forceTransmux;if(!yt(o)||!e.I&&fo.includes(o)?u=!0:u||n==l||(u=!ae().Jf()&&fo.includes(n)),u&&(n=Yn(e=io(n,a)))){var c=n();r&&s&&(i=!0),o=c.convertCodecs(t,e)}return t=ao(co(o)),{dc:c,hl:i,Oh:uo(o),codec:t,mimeType:o}}function ol(e,t,n,o,i){if(t==ut)return{type:sl,qf:n,dc:null};var r=ao(co(e.F.get(t))),s=uo(e.F.get(t)),a=nl(e,t,n,o),l=a.dc,u=a.hl,c=a.Oh,d=a.codec;a=a.mimeType;var p=!0;return u&&e.F.has("audio")&&(n=nl(e,"audio",n,o),o=ao(co(e.F.get("audio"))),p=uo(e.F.get("audio")),p=o==n.codec&&p==n.Oh,n.dc&&n.dc.destroy()),r===d&&s===c&&p?{type:sl,qf:a,dc:l}:(r=!0,(e.m&&!i.has("audio")||u&&l&&!e.j.has(t))&&(r=!1),r&&"smooth"===e.B.codecSwitchingStrategy&&vt()?{type:ll,qf:a,dc:l}:(l&&l.destroy(),{type:al,qf:a,dc:null}))}(i=La.prototype).destroy=function(){return this.J.destroy()},i.init=function(e,t,n,o){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,o=void 0!==o&&o;var i,r,s,a,l,u,c=this;return D(function(d){if(1==d.g)return i=ct,S(d,c.M,2);if(3!=d.g)return Ua(c)||Ba(c)?(W("Expected MediaSource to be open during init(); reopening the media source."),c.M=new Ei,c.i=Pa(c,c.M),S(d,c.M,3)):d.A(3);for(c.I=t,c.X=n,c.kb=o,c.ib=!c.I&&"HLS"==c.X&&!c.kb,c.$.clear(),c.V=null,c.wa=null,c.S=null,c.oa=null,c.ma=new Ei,r=g(e.keys()),s=r.next();!s.done;s=r.next())a=s.value,l=e.get(a),Da(c,a,l,l.codecs),c.m?(c.o.set(i.ia,[]),c.o.set(i.Ca,[])):c.o.set(a,[]);(u=e.get(i.ia))&&u.isAudioMuxedInVideo&&(c.m=!0),T(d)})},i.configure=function(e){this.B=e,this.h&&(this.h.B=e.modifyCueCallback)},i.Fc=function(){var e={total:this.G?[]:Js(this.g.buffered),audio:Js(za(this,"audio")),video:Js(za(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n,o){var i,r=this;return D(function(s){return 1==s.g?(e==(i=ct).Ca&&r.K&&r.K.remove(o),e==i.Na?S(s,r.h.remove(t,n),0):n>t?S(s,Ja(r,e,function(){return qa(r,e,t,n)},null),5):s.A(0)):r.m?S(s,Ja(r,i.ia,function(){return qa(r,i.ia,t,n)},null),0):s.A(0)})},i.flush=function(e){var t,n=this;return D(function(o){return 1==o.g?e==(t=ct).Na?o.return():S(o,Ja(n,e,function(){n.g.currentTime-=.001,Ya(n,e)},null),2):n.m?S(o,Ja(n,t.ia,function(){var e=t.ia;n.g.currentTime-=.001,Ya(n,e)},null),0):o.A(0)})},i.endOfStream=function(e){var t=this;return D(function(n){return S(n,Qa(t,function(){Ua(t)||Ba(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},i.rb=function(e){var t=this;return D(function(n){return S(n,Qa(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var n=g(t.l.keys()),o=n.next();!o.done;o=n.next()){o=o.value;var i={start:function(){},p:new Ei,uri:null};t.o.get(o).unshift(i)}t.i.duration=e,t.xa=e}),0)})},i.getDuration=function(){return this.i.duration};var il=e.URL.createObjectURL,rl="sequence",sl="none",al="reset",ll="changeType";function ul(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=void 0===n||n,this.H=0,this.o=!1,this.m=e}function cl(e,t,n,o){var i=this;this.u=o,this.g=e,this.F=t,this.h=n,this.j=new oe,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=function(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new pl(new hl(e.g),t,function(){return D(function(t){if(1==t.g)return Js(e.g.buffered).length?n?(e.g.currentTime+=n,t.A(2)):S(t,e.g.play(),3):t.return();if(2!=t.g){if(!e.g)return t.return();e.g.pause(),e.g.play()}e.H++,e.u(new Oi("stalldetected")),T(t)})})}(this),this.B=!1,this.j.D(e,"waiting",function(){return dl(i)}),this.i=new To(function(){dl(i)}).Fa(this.h.gapJumpTimerTime)}function dl(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){var n=(t=e.o).h,o=fl(n),i=n.g.currentTime,r=Date.now()/1e3;t.g==i&&t.m==o||(t.l=r,t.g=i,t.m=o,t.i=!1),(o=(i=r-t.l)>=t.o&&o&&!t.i)&&(t.j&&t.j(t.g,i),t.i=!0,t.g=n.g.currentTime),t=!o}t&&(t=e.g.currentTime,o=function(e,t,n){return e&&e.length&&!qs(e)&&(e=Js(e).findIndex(function(e,o,i){return e.start>t&&(0==o||i[o-1].end-t<=n)}))>=0?e:null}(n=e.g.buffered,t,e.h.gapDetectionThreshold),null==o||0==o&&!e.B||(i=n.start(o),(r=e.h.gapPadding)&&(i=Math.ceil(100*(i+r))/100),i>=e.F.Hb()||i-t<.001||(0!=o&&n.end(o-1),function(e,t){e.C=!0,e.j.Aa(e.g,"seeked",function(){e.C=!1}),e.g.currentTime=t}(e,i),t==e.l&&(e.l=i),e.G++,e.u(new Oi("gapjumped")))))}}}function pl(e,t,n){this.h=e,this.m=fl(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}function hl(e){var t=this;this.g=e,this.h=new oe,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function fl(e){if(e.g.paused||0==e.g.playbackRate||e.i||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=g(Js(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function ml(e,t,n,o){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?o():(t=gl.value().get(t),n.Aa(e,t,o))}(i=ul.prototype).getDuration=function(){return this.l},i.Nj=function(){return this.h},i.Qi=function(e){this.i=e},i.rb=function(e){this.l=e},i.Tj=function(){return this.i},i.Pi=function(e){this.B=e},i.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},i.Hf=function(e){this.u=e},i.Ye=function(){return this.u},i.oh=function(e){this.F=e},i.Ej=function(){return this.F},i.Ai=function(e,t){if(0!=e.length){var n=(Date.now()+this.B)/1e3;if(0!=(e=e.filter(function(e){return e.start+t<n})).length){var o=e[e.length-1].end+t;this.rf(e[0].start+t),this.h=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.h),this.g=Math.max(this.g,o),null!=this.i&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},i.ge=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,o=(Date.now()+this.B)/1e3,i=(e=g(e)).next();!i.done;i=e.next())o<(i=i.value).startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.h=Math.max(this.h,i.endTime-i.startTime));this.rf(t),this.g=Math.max(this.g,n),null!=this.i&&this.G&&!this.o&&(this.i=o-this.g-this.h)}},i.zi=function(e,t){this.rf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},i.Oj=function(){return this.g},i.kf=function(){this.o=!0},i.qk=function(){return this.o},i.ph=function(e){this.m=e},i.Jj=function(){return this.m},i.rf=function(e){null==this.j?this.j=e:this.J||(this.j=Math.min(this.j,e))},i.Tg=function(e){this.h=Math.max(this.h,e)},i.offset=function(e){null!=this.j&&(this.j+=e),null!=this.g&&(this.g+=e)},i.W=function(){return this.l==1/0&&!this.C},i.Vc=function(){return this.l!=1/0&&!this.C},i.Ib=function(){return Math.max(this.I,this.Ic()-this.u)},i.Si=function(e){this.I=e},i.Ic=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},i.Vd=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Ic()-this.u+e,this.Hb()))},i.Xb=function(){return this.Vd(0)},i.Hb=function(){return Math.max(0,this.Ic()-(this.W()||this.Vc()?this.F:0))},i.ej=function(){return!(null==this.i||null!=this.g&&this.G)},i.Oi=function(e){this.H=e},i.zj=function(){return this.H},$("shaka.media.PresentationTimeline",ul),ul.prototype.getAvailabilityTimeOffset=ul.prototype.zj,ul.prototype.setAvailabilityTimeOffset=ul.prototype.Oi,ul.prototype.usingPresentationStartTime=ul.prototype.ej,ul.prototype.getSeekRangeEnd=ul.prototype.Hb,ul.prototype.getSeekRangeStart=ul.prototype.Xb,ul.prototype.getSafeSeekRangeStart=ul.prototype.Vd,ul.prototype.getSegmentAvailabilityEnd=ul.prototype.Ic,ul.prototype.setUserSeekStart=ul.prototype.Si,ul.prototype.getSegmentAvailabilityStart=ul.prototype.Ib,ul.prototype.isInProgress=ul.prototype.Vc,ul.prototype.isLive=ul.prototype.W,ul.prototype.offset=ul.prototype.offset,ul.prototype.notifyMaxSegmentDuration=ul.prototype.Tg,ul.prototype.notifyMinSegmentStartTime=ul.prototype.rf,ul.prototype.getInitialProgramDateTime=ul.prototype.Jj,ul.prototype.setInitialProgramDateTime=ul.prototype.ph,ul.prototype.isStartTimeLocked=ul.prototype.qk,ul.prototype.lockStartTime=ul.prototype.kf,ul.prototype.getMaxSegmentEndTime=ul.prototype.Oj,ul.prototype.notifyPeriodDuration=ul.prototype.zi,ul.prototype.notifySegments=ul.prototype.ge,ul.prototype.notifyTimeRange=ul.prototype.Ai,ul.prototype.getDelay=ul.prototype.Ej,ul.prototype.setDelay=ul.prototype.oh,ul.prototype.getSegmentAvailabilityDuration=ul.prototype.Ye,ul.prototype.setSegmentAvailabilityDuration=ul.prototype.Hf,ul.prototype.setStatic=ul.prototype.cd,ul.prototype.setClockOffset=ul.prototype.Pi,ul.prototype.getPresentationStartTime=ul.prototype.Tj,ul.prototype.setDuration=ul.prototype.rb,ul.prototype.setPresentationStartTime=ul.prototype.Qi,ul.prototype.getMaxSegmentDuration=ul.prototype.Nj,ul.prototype.getDuration=ul.prototype.getDuration,cl.prototype.release=function(){this.j&&(this.j.release(),this.j=null),null!=this.i&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},cl.prototype.vf=function(){this.B=!0,this.i&&this.i.Fa(this.h.gapJumpTimerTime),dl(this)},pl.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null},hl.prototype.release=function(){this.h&&this.h.release(),this.h=null};var gl=new se(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function yl(e,t,n,o){var i=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return null==i.l&&(i.l=o()),i.l},this.o=!1,this.h=new oe,this.i=new Sl(e),ml(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){xl(i,i.j())})}function vl(e){return e.o?e.g.currentTime:e.j()}function bl(e,t){e.g.readyState>0?Tl(e.i,t):ml(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){xl(e,e.j())})}function xl(e,t){Math.abs(e.g.currentTime-t)<.001?wl(e):(e.h.Aa(e.g,"seeking",function(){wl(e)}),Tl(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function wl(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function Sl(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new To(function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}function Tl(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Fa(.1)}function kl(e){this.g=e,this.i=!1,this.h=null,this.j=new oe}function Cl(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function Al(e,t){return(e=e.g.seekable).length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Il(e,t,n,o,i,r){var s=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=i,this.o=null,this.i=new cl(e,t.presentationTimeline,n,r),this.j=new yl(e,function(){e:{var e=s.i;e.m=!0,e.B=!1,e.i&&e.i.Fa(e.h.gapJumpTimerTime),dl(e);var t=vl(s.j);if(e=Rl(s,t),!bt()&&Math.abs(e-t)>.001){t=!1;var n=ae().Mi();if(n){var o=Date.now()/1e3;(!s.o||s.o<o-n)&&(s.o=o,t=!0)}else t=!0;if(t){bl(s.j,e),e=void 0;break e}}s.u(),e=void 0}return e},function(e){var t=s.i;t.g.seeking&&!t.m&&(t.m=!0,t.l=e),t.i&&t.i.Fa(t.h.gapJumpTimerTime),dl(t)},function(){return El(s,o)}),this.m=new To(function(){if(0!=s.h.readyState&&!s.h.paused){var e=vl(s.j),t=s.g.Xb(),n=s.g.Hb();n-t<3&&(t=n-3),e<t&&(e=Rl(s,e),s.h.currentTime=e)}})}function El(e,t){return null==t?t=e.g.getDuration()<1/0?e.g.Xb():e.g.Hb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Hb()+t),Ml(e,_l(e,t))}function Ml(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Rl(e,t){var n=e.l.rebufferingGoal,o=e.l.safeSeekOffset,i=e.g.Xb(),r=e.g.Hb(),s=e.g.getDuration();r-i<3&&(i=r-3);var a=e.g.Vd(n),l=e.g.Vd(o);return n=e.g.Vd(n+o),t>=s?Ml(e,t):t>r?r-e.l.safeSeekEndOffset:t<i?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?r-e.l.safeSeekEndOffset:Xs(e.h.buffered,l)?l:n:t>=a||Xs(e.h.buffered,t)?t:n}function _l(e,t){var n=e.g.Xb();return t<n?n:t>(e=e.g.Hb())?e:t}function Ll(e){this.g=e,this.m=null,this.i=0,this.o=!1}function Pl(e){return e.g[0]||null}function Dl(e,t,n){return new Ll([e=new $s(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Ol(e,t,n,o){this.i=e,this.h=t,this.g=n,this.reverse=o}function Nl(){Ll.call(this,[]),this.h=[]}function Ul(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Xe(),this.h=new To(function(){t.g.ui(.25*t.i)})}function Bl(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{return void(e.g.Xe()!=t&&e.g.qh(t))}catch(n){}e.h.Fa(.25),0!=e.g.Xe()&&e.g.qh(0)}function Fl(e){var t=this;this.j=e,this.h=new oe,this.g=new Set,this.i=new To(function(){jl(t,!1)}).Kb(),e.paused||this.i.Fa(.25),this.h.D(e,"playing",function(){t.i.Kb().Fa(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}function jl(e,t){for(var n=e.j.currentTime,o=(e=g(e.g)).next();!o.done;o=e.next())o.value.j(n,t)}function zl(e){Bi.call(this),this.g=new Map,this.h=e}function $l(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function Vl(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return"video"==e.type&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),"audio"==e.type&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Hl(e){Bi.call(this),this.h=new Map,this.i=e,this.g=null}function Gl(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1);e.h.has(n)||(e.h.set(n,t),t=new Oi("regionadd",new Map([["region",t]])),e.dispatchEvent(t),function(e){e.g||(e.g=new To(function(){for(var t=e.i(),n=g(e.h),o=n.next();!o.done;o=n.next()){var i=g(o.value);o=i.next().value,(i=i.next().value).endTime<t.start&&(e.h.delete(o),o=new Oi("regionremove",new Map([["region",i]])),e.dispatchEvent(o))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Fa(2))}(e))}function ql(e,t,n,o,i){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=o,this.u=i||function(e,t){return!(t.fastSwitching&&e.Xc&&e.ce)}}function Wl(e,t){e.l=t;for(var n=(e=g(e.h.values())).next();!n.done;n=e.next())n.value.g=t}function Kl(e,t,n){if(n=void 0!==n&&n,!e.i.segmentIndex)return Promise.resolve();if(e.g||(e.g=e.i.segmentIndex.Vb(t,!0,e.o)),!e.g)return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value);){var o=!0;if(n.isPreload()&&null!=n.endByte&&(o=!1),2==n.Kc()&&(o=!1),n.Yb(!1)&&(o=!1),o&&n.aa&&t.push(Xl(e,n.aa)),o&&!e.h.has(n)&&(o=new tu(e.l),t.push(nu(o,n,e.i)),e.h.set(n,o)),!e.u(n,e.i))break}return Ql(e),Promise.all(t)}function Xl(e,t){if(!e.i.segmentIndex||t.Yb()||Array.from(e.j.keys()).some(function(e){return zs(e,t)}))return Promise.resolve();var n=new tu(e.l),o=nu(n,t,e.i);return e.j.set(t,n),o}function Yl(e,t){for(var n=(t=g(t.keys())).next();!n.done;n=t.next())(n=n.value)&&eu(e,n)}function Jl(e){Yl(e,e.h),Yl(e,e.j),e.g=null}function Ql(e){for(var t=Array.from(e.h.keys()),n=g(e.j.keys()),o=n.next(),i={};!o.done;i={Ng:void 0},o=n.next())i.Ng=o.value,t.some(function(e){return function(t){return zs(t.aa,e.Ng)}}(i))||eu(e,i.Ng)}function Zl(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var o=n.pop();o&&eu(e,o)}Ql(e)}function eu(e,t){var n=e.h;t instanceof js&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function tu(e){this.g=e,this.ie=this.xh=null}function nu(e,t,n){var o=new Uint8Array(0);return e.ie=e.g(t,n,function(t){return D(function(n){if(1==n.g)return o=o.byteLength>0?nt(o,t):t,e.xh?S(n,e.xh(o),3):n.A(0);o=new Uint8Array(0),T(n)})}),e.ie.promise.catch(function(e){return e instanceof je&&7001==e.code?Promise.resolve():Promise.reject(e)})}function ou(e){var t=uo(e);return{type:t.split("/")[0],mimeType:t,codecs:e=co(e),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ue:null,colorGamut:null,frameRate:null}}function iu(e,t,n){function o(e){s=e.name;var t=e.reader;t.skip(24);var n=t.Ba(),o=t.Ba();t.skip(50),h=String(n),p=String(o),e.reader.Ia()&&ar(e)}function i(e){var t=ls(e.reader);f=t.channelCount,m=t.sampleRate,r(e.name)}function r(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":l.push(e+".42E01E"),c=!0;break;case"hev1":case"hvc1":l.push(e+".1.6.L93.90"),c=!0;break;case"dvh1":case"dvhe":l.push(e+".05.04"),c=!0;break;case"vp09":l.push(e+".00.10.08"),c=!0;break;case"av01":l.push(e+".0.01M.08"),c=!0;break;case"mp4a":a.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":a.push(e),u=!0;break;case"apac":a.push("apac.31.00"),u=!0}}var s,a=[],l=[],u=!1,c=!1,d=null,p=null,h=null,f=null,m=null,y=null,v=null;if((new sr).box("moov",ar).box("trak",ar).box("mdia",ar).T("mdhd",function(e){d=ss(e.reader,e.version).language}).box("minf",ar).box("stbl",ar).T("stsd",lr).box("mp4a",function(e){var t=ls(e.reader);f=t.channelCount,m=t.sampleRate,e.reader.Ia()?ar(e):r(e.name)}).box("esds",function(e){e=e.reader;for(var t,n,o="mp4a";e.Ia();){t=e.Y();for(var i=e.Y();128&i;)i=e.Y();if(3==t)e.Ba(),128&(i=e.Y())&&e.Ba(),64&i&&e.skip(e.Y()),32&i&&e.Ba();else if(4==t)n=e.Y(),e.skip(12);else if(5==t)break}n&&(o+="."+cs(n),5==t&&e.Ia()&&(31==(n=(248&(t=e.Y()))>>3)&&e.Ia()&&(n=32+((7&t)<<3)+((224&e.Y())>>5)),o+="."+n)),a.push(o),u=!0}).box("ac-3",i).box("ec-3",i).box("ac-4",i).box("Opus",i).box("fLaC",i).box("apac",i).box("avc1",o).box("avc3",o).box("hev1",o).box("hvc1",o).box("dva1",o).box("dvav",o).box("dvh1",o).box("dvhe",o).box("vp09",o).box("av01",o).box("avcC",function(e){var t=s||"";switch(s){case"dvav":t="avc3";break;case"dva1":t="avc1"}(e=e.reader).skip(1),e=t+"."+cs(e.Y())+cs(e.Y())+cs(e.Y()),l.push(e),c=!0}).box("hvcC",function(e){var t=s||"";switch(s){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1);var o=["","A","B","C"][(e=n.Y())>>6],i=31&e,r=n.U(),a=(32&e)>>5?"H":"L";e=[n.Y(),n.Y(),n.Y(),n.Y(),n.Y(),n.Y()],n=n.Y();for(var u=0,d=0;d<32&&(u|=1&r,31!=d);d++)u<<=1,r>>=1;for(t=t+"."+o+i+"."+cs(u,!0),t+="."+a+n,o="",i=e.length;i--;)((a=e[i])||o)&&(o="."+a.toString(16).toUpperCase()+o);t+=o,l.push(t),c=!0}).box("dvcC",function(e){var t=s||"";switch(s){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.Y(),n=n.Y(),l.push(t+"."+ds(e>>1&127)+"."+ds(e<<5&32|n>>3&31)),c=!0}).box("dvvC",function(e){var t=s||"";switch(s){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.Y(),n=n.Y(),l.push(t+"."+ds(e>>1&127)+"."+ds(e<<5&32|n>>3&31)),c=!0}).T("vpcC",function(e){var t=s||"",n=e.reader;e=n.Y();var o=n.Y();n=n.Y()>>4&15,l.push(t+"."+ds(e)+"."+ds(o)+"."+ds(n)),c=!0}).box("av1C",function(e){var t=s||"";"dav1"===s&&(t="av01");var n=e.reader;n.skip(1);var o=(e=n.Y())>>>5,i=(64&(n=n.Y()))>>6;l.push(t+"."+o+"."+ds(31&e)+(n>>>7?"H":"M")+"."+ds(2===o&&i?(32&n)>>5?12:10:i?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+ds(1)+"."+ds(1)+"."+ds(1)+".0"),c=!0}).box("enca",cr).box("encv",ur).box("sinf",ar).box("frma",function(e){r(e=us(e.reader).codec)}).box("colr",function(e){l=l.map(function(t){if(t.startsWith("av01.")){var n=e.reader,o=n.Pa(),i=n.Tb(4),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),"nclx"===(r+=String.fromCharCode(i[3]))){i=n.Ba(),r=n.Ba();var s=n.Ba(),a=n.Y()>>7,l=t.split(".");10==l.length&&(l[6]=ds(i),l[7]=ds(r),l[8]=ds(s),l[9]=String(a),t=l.join("."))}n.seek(o)}return t});var t=function(e){var t=null,n=null,o=e.Tb(4),i=String.fromCharCode(o[0]);if(i+=String.fromCharCode(o[1]),i+=String.fromCharCode(o[2]),"nclx"===(i+=String.fromCharCode(o[3]))){switch(e.Ba()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(o=e.Ba(),e.Ba(),o){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ue:n}}(e.reader),n=t.colorGamut;y=t.ue,v=n}).parse(e||t,!0,!0),!a.length&&!l.length)return null;var b=u&&!c,x=new Map;if(c&&!n){n=new kt("video/mp4"),e&&n.init(e);try{n.xf(t);for(var w=g(n.Vf()),S=w.next();!S.done;S=w.next()){var T=S.value;x.set(T,T)}}catch(ts){}n.Ld()}return{type:b?"audio":"video",mimeType:b?"audio/mp4":"video/mp4",codecs:ru(a.concat(l)).join(", "),language:d,height:p,width:h,channelCount:f,sampleRate:m,closedCaptions:x,ue:y,colorGamut:v,frameRate:null}}function ru(e){for(var t=new Set,n=[],o=(e=g(e)).next();!o.done;o=e.next()){var i=lo(o=o.value);t.has(i)||(n.push(o),t.add(i))}return t=lt("audio",n),o=lt("video",n),e=lt(ut,n),o=function(e){if(e.length<=1)return e;var t=e.find(function(e){return e.startsWith("dvav.")||e.startsWith("dva1.")||e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")||e.startsWith("dvc1.")||e.startsWith("dvi1.")});return t?yt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(e){return e!=t}):e}(o),t=t.concat(o).concat(e),n.length&&!t.length?n:t}function su(t,n,o){var i,r,s,a,l;return D(function(u){if(1==u.g)return(i=n).cryptoKey?u.A(2):S(u,i.fetchKey(),3);if(!(r=i.iv))for(r=Ne(new ArrayBuffer(16)),s=i.firstMediaSequenceNumber+o,a=r.byteLength-1;a>=0;a--)r[a]=255&s,s>>=8;return l="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:r}:{name:"AES-CTR",counter:r,length:64},u.return(e.crypto.subtle.decrypt(l,i.cryptoKey,t))})}function au(e,t,n,o,i){return e=Hi(e,o,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function lu(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.N=new Map,this.F=1,this.B=this.o=null,this.V=0,this.h=new Map,this.M=!1,this.X=null,this.C=!1,this.l=new Qi(function(){return function(e){var t,n,o,i,r,s;return D(function(a){if(1==a.g){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=g(e.h.values()),o=n.next();!o.done;o=n.next())Eu(i=o.value),t.push(Mu(i)),i.ea&&(Jl(i.ea),i.ea=null);for(r=g(e.m.values()),s=r.next();!s.done;s=r.next())Jl(s.value);return S(a,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,T(a)})}(n)}),this.R=Date.now()/1e3,this.m=new Map,this.S={projection:null,hfov:null},this.ba=0,this.$=1/0,this.H=null,this.O=[],this.u=new To(function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var e=n.j.presentationTimeline.Xb(),t=n.j.presentationTimeline.Hb();t-e>1?function(e,t,n){D(function(o){return e.J.g||e.g.error||e.N||e.G||Ua(e)||Ba(e)?o.return():S(o,Qa(e,function(){Ua(e)||Ba(e)||e.i.setLiveSeekableRange(t,n)}),0)})}(n.g.Z,e,t):Ga(n.g.Z)}else Ga(n.g.Z),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.I=null,this.J=!1,this.K=new To(function(){var e=n.g.video;!e.ended&&n.I&&(n.J=!0,e.currentTime=n.I,n.I=null)}),this.G=new oe}function uu(e,t){for(var n=e.g.Pb()<0,o=g(e.h.values()),i=o.next();!i.done;i=o.next())(i=i.value).ua&&i.ua.Id(n),i.ea&&i.ea.Id(n);for(i=(o=g(e.m.values())).next();!i.done;i=o.next())i.value.Id(n);(n=e.h.get("video"))&&(o=n.stream)&&(t?(t=o.trickModeVideo)&&!n.Mc&&(pu(e,t,!1,0,!1),n.Mc=o):(t=n.Mc)&&(n.Mc=null,pu(e,t,!0,0,!1)))}function cu(e,t,n,o,i,r){n=void 0!==n&&n,o=void 0===o?0:o,i=void 0!==i&&i,r=void 0!==r&&r,e.o=t,e.M&&(t.video&&pu(e,t.video,n,o,i,r),t.audio&&pu(e,t.audio,n,o,i,r))}function du(e,t){D(function(n){if(1==n.g)return e.H=null,e.B=t,e.M?t.segmentIndex?n.A(2):S(n,t.createSegmentIndex(),2):n.return();pu(e,t,!0,0,!1),T(n)})}function pu(e,t,n,o,i,r){var s=e.h.get(t.type);s||t.type!=ut?s&&(s.Mc&&(t.trickModeVideo?(s.Mc=t,t=t.trickModeVideo):s.Mc=null),s.stream!=t||i)&&(e.m.has(t)?s.ea=e.m.get(t):s.ea&&function(e,t){t&&t!==e.i&&(Jl(e),e.i=t)}(s.ea,t),t.type==ut&&s.stream!=t&&(i=oo(t.mimeType,t.codecs),Na(e.g.Z,i,e.j.sequenceMode,t.external)),!e.m.has(s.stream)&&s.stream.closeSegmentIndex&&(s.Ja?(i="("+s.type+":"+s.stream.id+")",e.N.has(i)||e.N.set(i,s.stream.closeSegmentIndex)):s.stream.closeSegmentIndex()),i=s.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,s.stream=t,s.ua=null,s.cg=!!r,t.dependencyStream?s.Ec=mu(e,t.dependencyStream):s.Ec=null,Pu(e),i&&(s.pb=null,s.nc=null,s.mc=null,t.isAudioMuxedInVideo&&(t=null,"video"===s.type?t=e.h.get("audio"):"audio"===s.type&&(t=e.h.get("video")),t&&(Mu(t).catch(function(){}),t.pb=null,t.nc=null,t.mc=null,fu(e,t),hu(e,t).catch(function(t){e.g&&e.g.onError(t)})))),n?s.Ub?s.Jd=!0:s.Ja?(s.ec=!0,s.ld=o,s.Jd=!0):(Eu(s),Au(e,s,!0,o).catch(function(t){e.g&&e.g.onError(t)})):s.Ja||s.sb||Iu(e,s,0),hu(e,s).catch(function(t){e.g&&e.g.onError(t)})):function(e,t){var n,o,i,r,s;D(function(a){switch(a.g){case 1:return n=ct,e.V++,o=e.V,k(a,2),S(a,Va(e.g.Z,n.Na),4);case 4:A(a,3);break;case 2:i=I(a),e.g&&e.g.onError(i);case 3:r=oo(t.mimeType,t.codecs),Na(e.g.Z,r,e.j.sequenceMode,t.external),(e.g.Z.ba.isTextVisible()||e.i.alwaysStreamText)&&e.V==o&&(s=mu(e,t),e.h.set(n.Na,s),Iu(e,s,0)),T(a)}})}(e,t)}function hu(e,t){var n,o,i;return D(function(r){if(1==r.g)return t.Ua?(n=t.stream,o=t.Ua,n.segmentIndex?r.A(2):S(r,n.createSegmentIndex(),2)):r.return();if(4!=r.g)return!(i=n.dependencyStream)||i.segmentIndex?r.A(4):S(r,i.createSegmentIndex(),4);if(t.Ua!=o||t.stream!=n)return r.return();var s=e.g.Hc(),a=ja(e.g.Z,t.type),l=t.stream.segmentIndex.find(t.La?t.La.endTime:s),u=null==l?null:t.stream.segmentIndex.get(l);l=u&&u.endByte?u.endByte-u.startByte:null,u&&!l&&(l=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),l?((u=u.aa)&&(l+=(u.endByte?u.endByte-u.startByte:null)||0),s=8*l/(u=e.g.getBandwidthEstimate())<(a||0)-s-e.i.rebufferingGoal||t.Ua.h.g>l):s=!1,s&&t.Ua.abort(),T(r)})}function fu(e,t){t.Ub||t.ec||(t.Ja?(t.ec=!0,t.ld=0):null==Fa(e.g.Z,t.type)?null==t.sb&&Iu(e,t,0):(Eu(t),Au(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)})))}function mu(e,t){var n={stream:t,type:t.type,ua:null,ea:gu(e,t),La:null,pb:null,jf:null,nc:null,mc:null,gf:null,hf:null,Mc:null,endOfStream:!1,Ja:!1,sb:null,ec:!1,ld:0,Jd:!1,Ub:!1,bd:!0,cg:!1,bh:!1,Xd:!1,Ua:null,Ec:null};return t.dependencyStream&&(n.Ec=mu(e,t.dependencyStream)),n}function gu(e,t){if("video"===t.type&&e.i.disableVideoPrefetch||"audio"===t.type&&e.i.disableAudioPrefetch||t.type===ut&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===ut&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ea)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new ql(e.i.segmentPrefetchLimit,t,function(t,n,o){return Cu(t,n,o||null,e.i.retryParameters,e.g.tc)},e.g.Pb()<0,e.g.cl):null}function yu(t,n){var o,i,r,s,a,l,u,c,d;return D(function(p){switch(p.g){case 1:if(Zi(t.l),o=ct,n.Ja||null==n.sb||n.Ub)return p.return();if(n.sb=null,!n.ec){p.A(2);break}return S(p,Au(t,n,n.Jd,n.ld),3);case 3:return p.return();case 2:if(function(e,t){for(var n=g(e.N.entries()),o=n.next();!o.done;o=n.next()){var i=g(o.value);o=i.next().value,i=i.next().value,o.includes(t.type)&&(i(),e.N.delete(o))}}(t,n),n.stream.segmentIndex){p.A(4);break}return i=n.stream,k(p,5),S(p,n.stream.createSegmentIndex(),7);case 7:A(p,6);break;case 5:return r=I(p),S(p,Ru(t,n,r),8);case 8:return p.return();case 6:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),n.Ja||n.sb||Iu(t,n,0),p.return();case 4:if(!n.Ec){p.A(9);break}if(n.Ec.stream.segmentIndex){p.A(9);break}return k(p,11),S(p,n.Ec.stream.createSegmentIndex(),13);case 13:A(p,9);break;case 11:I(p);case 9:k(p,14),s=function(t,n){if(Tu(n))return function(e,t){var n=ja(e,"video")||0;bo(e.h,t,n)}(t.g.Z,n.stream.originalId||""),null;if(n.type==ut&&function(e){e.h&&bo(e.h,"",0)}(t.g.Z),n.stream.isAudioMuxedInVideo&&"audio"==n.type)return null;if(n.type!=ut&&Ba(t.g.Z))return _u(t,!0),null;var o=t.i.updateIntervalSeconds/Math.max(1,Math.abs(t.g.Pb()));if(!Oa(t.g.Z)&&n.type!=ut)return o/2;var i=t.g.Hc();if("audio"===n.type)for(var r=g(t.m.keys()),s=r.next();!s.done;s=r.next())(s=t.m.get(s.value)).Ya(i,!0),Kl(s,i);r=n.La?n.La.endTime:i;var a=function(e,t,n){return t==ut?null==(e=e.h).h||e.h<n?0:e.h-Math.max(n,e.g):Ys(e=za(e,t),n)}(t.g.Z,n.type,i);s=Math.max(1,Math.max(t.i.rebufferingGoal,t.i.bufferingGoal)*t.F);var l=t.j.presentationTimeline.getDuration()-r,u=ja(t.g.Z,n.type);if(l<1e-6&&u)return n.endOfStream=!0,"video"==n.type&&(t=t.h.get(ut))&&Tu(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,a>=s)return o/2;if(l=!n.ua,!(u=vu(t,n,i,u)))return o;a=n.pb;var c=u.aa;a&&c&&zs(c,a)&&(a.g=c.g),a=!1,l&&n.cg&&(a=!0,n.cg=!1),l=1/0;for(var d=(c=g(c=Array.from(t.h.values()))).next();!d.done;d=c.next())Tu(d=d.value)||d.ua&&!d.ua.current()||(l=Math.min(l,d.La?d.La.endTime:i));return r>=l+t.j.presentationTimeline.h?o:(n.ea&&n.ua&&!t.m.has(n.stream)&&(n.ea.Ya(u.startTime+.001),Kl(n.ea,u.startTime).catch(function(){})),Lu(t)&&function(e,t,n){if(t.type===ut)return!1;var o=t.pb;if(!o)return!1;var i=n.aa;if(n=o.g!==i.g,"reset_to_encrypted"===e.i.crossBoundaryStrategy&&(o.encrypted||i.encrypted||(n=!1),o.encrypted&&(e.i.crossBoundaryStrategy="keep")),"RESET_ON_ENCRYPTION_CHANGE"===e.i.crossBoundaryStrategy&&o.encrypted==i.encrypted&&(n=!1),"keep"===e.i.crossBoundaryStrategy&&o.mimeType&&i.mimeType){var r=ao(co(o.mimeType)),s=ao(co(o.mimeType));o.mimeType==i.mimeType&&r==s&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,_u(e,!0).then(function(){var t=(new Map).set("oldEncrypted",o.encrypted).set("newEncrypted",i.encrypted);e.g.onEvent(new Oi("boundarycrossed",t))})),n}(t,n,u)||(function(t,n,o,i,r){var s,a,l,u,c,d,p,h,f,m,y,v,b,x,w,C;return D(function(E){switch(E.g){case 1:if(s=ct,a=n.stream,l=n.ua,n.Ja=!0,k(E,2),2==i.Kc())throw new je(1,1,1011);return S(E,function(e,t,n,o){var i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x;return D(function(w){switch(w.g){case 1:if(i=ct,r=null==t.La,s=[],a=Math.max(0,Math.max(n.appendWindowStart,e.ba)-.1),l=Math.min(n.appendWindowEnd,e.$)+.1,u=n.codecs||t.stream.codecs,c=lo(u),d=uo(n.mimeType||t.stream.mimeType),(p=n.timestampOffset)==t.jf&&a==t.nc&&l==t.mc&&c==t.gf&&d==t.hf){w.A(2);break}if(h=t.gf&&t.hf&&function(e,t,n,o,i){return(e=ol(e,t,n,o,i)).dc&&e.dc.destroy(),e.type==al}(e.g.Z,t.type,d,u,Ou(e)),!h){w.A(3);break}if(f=null,t.type===i.Ca?f=e.h.get(i.ia):t.type===i.ia&&(f=e.h.get(i.Ca)),!f){w.A(3);break}return S(w,Mu(f).catch(function(){}),5);case 5:f.pb=null,f.nc=null,f.mc=null,fu(e,f);case 3:return S(w,xu(e,t,p,a,l,n,c,d),2);case 2:return zs(n.aa,t.pb)||(t.pb=n.aa,n.l&&n.aa&&(m=ku(e,t,n.aa),y=function(){var r,s,a,l,u,c,d,p,h,f,y;return D(function(v){switch(v.g){case 1:return k(v,2),S(v,m,4);case 4:return r=v.h,Zi(e.l),s=null,a=new Map,l={projection:null,hfov:null},t.stream&&(u=t.stream.videoLayout)&&((c=u.split("/")).includes("PROJ-RECT")?l.projection="rect":c.includes("PROJ-EQUI")?l.projection="equi":c.includes("PROJ-HEQU")?l.projection="hequ":c.includes("PROJ-PRIM")?l.projection="prim":c.includes("PROJ-AIV")&&(l.projection="hequ")),(d=new sr).box("moov",ar).box("trak",ar).box("mdia",ar).T("mdhd",function(e){s=ss(e.reader,e.version).timescale}).box("hdlr",function(e){switch((e=e.reader).skip(8),e.Yc()){case"soun":a.set(i.ia,s);break;case"vide":a.set(i.Ca,s)}s=null}),t.type!==i.Ca||l.projection||d.box("minf",ar).box("stbl",ar).T("stsd",lr).box("encv",ur).box("avc1",ur).box("avc3",ur).box("hev1",ur).box("hvc1",ur).box("dvav",ur).box("dva1",ur).box("dvh1",ur).box("dvhe",ur).box("dvc1",ur).box("dvi1",ur).box("vexu",ar).box("proj",ar).T("prji",function(e){e=e.reader.Yc(),l.projection=e}).box("hfov",function(e){e=e.reader.U()/1e3,l.hfov=e}),d.parse(r,!0,!0),t.type===i.Ca&&function(e,t){if(e.S.projection!=t.projection||e.S.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new Oi("spatialvideoinfo",n)}else n=new Oi("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.S=t}}(e,l),a.has(t.type)?n.aa.timescale=a.get(t.type):null!=s&&(n.aa.timescale=s),(p=t.stream.segmentIndex)instanceof Nl&&(h=function(e,t){for(var n=(e=g(e.h)).next();!n.done;n=e.next())if(null!=(n=n.value).find(t))return n.Se();return-1}(p,n.startTime)),f=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,S(v,e.g.Ph(t.type,r),5);case 5:return S(v,$a(e.g.Z,t.type,r,null,t.stream,f,t.bd,o,!1,!1,h),6);case 6:A(v,0);break;case 2:throw y=I(v),t.pb=null,y}})},v=n.startTime,r&&null!=(b=ja(e.g.Z,t.type))&&(v=b),e.g.Dk(v,n.aa),s.push(y()))),x=t.La?t.La.i:-1,n.i!=x&&s.push(function(e,t,n){var o,i;return D(function(r){return 1==r.g?t==(o=ct).Na?r.return():(t==o.Ca&&(e.Ta=new Ei),!e.I||(i=ja(e,t))&&Math.abs(i-n)<.15?r.return():(Ja(e,t,function(){return Wa(e,t)},null),e.m&&Ja(e,o.ia,function(){return Wa(e,o.ia)},null),S(r,Ja(e,t,function(){return Ka(e,t,n)},null),2))):e.m?S(r,Ja(e,o.ia,function(){return Ka(e,o.ia,n)},null),0):r.A(0)})}(e.g.Z,t.type,n.startTime)),S(w,Promise.all(s),0)}})}(t,n,i,r),4);case 4:return Zi(t.l),t.C?E.return():(u="video/mp4"==a.mimeType||"audio/mp4"==a.mimeType,c=e.ReadableStream,t.i.lowLatencyMode&&t.j.isLowLatency&&c&&u&&("HLS"!=t.j.type||i.m)?(p=new Uint8Array(0),f=h=!1,y=function(e){var s,l,u;return D(function(c){switch(c.g){case 1:if(h)return c.return();if(f=!0,Zi(t.l),t.C)return c.return();if(k(c,2),p=nt(p,e),s=!1,l=0,(new sr).box("mdat",function(e){l=e.size+e.start,s=!0}).parse(p,!1,!0),!s){c.A(4);break}return u=p.subarray(0,l),p=p.subarray(l),S(c,wu(t,n,o,a,i,u,!0,r),5);case 5:n.ea&&n.ua&&Kl(n.ea,i.startTime,!0);case 4:A(c,0);break;case 2:m=I(c),T(c)}})},S(E,ku(t,n,i,y),9)):S(E,ku(t,n,i),7));case 7:return d=E.h,Zi(t.l),t.C?E.return():(Zi(t.l),n.ec?(n.Ja=!1,Iu(t,n,0),E.return()):S(E,wu(t,n,o,a,i,d,!1,r),6));case 9:if(v=E.h,m)throw m;if(f){E.A(10);break}return h=!0,Zi(t.l),t.C?E.return():n.ec?(n.Ja=!1,Iu(t,n,0),E.return()):S(E,wu(t,n,o,a,i,v,!1,r),10);case 10:n.ea&&n.ua&&Kl(n.ea,i.startTime,!0);case 6:if(Zi(t.l),t.C)return E.return();n.La=i,l.next(),n.Ja=!1,n.bh=!1,b=t.g.Z.Fc(),x=b[n.type],JSON.stringify(x),n.ec||(w=null,n.type===s.Ca?w=t.h.get(s.ia):n.type===s.ia&&(w=t.h.get(s.Ca)),w&&w.type==s.ia?t.g.vf(i,n.stream,w.stream.isAudioMuxedInVideo):t.g.vf(i,n.stream,n.stream.codecs.includes(","))),Eu(n),Iu(t,n,0),A(E,0);break;case 2:if(C=I(E),Zi(t.l,C),t.C)return E.return();if(n.Ja=!1,7001==C.code)n.Ja=!1,Eu(n),Iu(t,n,0),E.A(0);else{if(n.type!=s.Na||!t.i.ignoreTextStreamFailures)return 3017==C.code?S(E,function(e,t,n){var o,i,r;return D(function(s){if(1==s.g){if(Array.from(e.h.values()).some(function(e){return e!=t&&e.bh}))return s.A(2);if(o=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,e.g.disableStream(t.stream,o))return s.return();if(e.i.avoidEvictionOnQuotaExceededError)return Iu(e,t,4),s.return();if((i=Math.round(100*e.F))>20)e.F-=.2;else{if(!(i>4))return t.Xd=!0,e.C=!0,e.g.onError(n),s.return();e.F-=.04}return t.bh=!0,r=e.g.Hc(),S(s,Su(e,t,r),2)}Iu(e,t,4),T(s)})}(t,n,C),0):(n.Xd=!0,1==C.category&&n.ea&&eu(n.ea,i),C.severity=2,S(E,Ru(t,n,C),0));t.h.delete(s.Na),E.A(0)}}})}(t,n,i,u,a).catch(function(){}),n.Ec&&bu(t,n.Ec,i,s)),null)}(t,n),null!=s&&(Iu(t,n,s),n.Xd=!1),A(p,15);break;case 14:return a=I(p),S(p,Ru(t,n,a),16);case 16:return p.return();case 15:if(n.type===o.Na)return p.return();if(l=[n],u=n.type===o.ia?o.Ca:o.ia,(c=t.h.get(u))&&l.push(c),!t.M||!l.every(function(e){return e.endOfStream})){p.A(0);break}return S(p,t.g.Z.endOfStream(),18);case 18:Zi(t.l),0!=(d=t.g.Z.getDuration())&&d<t.j.presentationTimeline.getDuration()&&t.j.presentationTimeline.rb(d),T(p)}})}function vu(e,t,n,o){if(t.ua)return(n=t.ua.current())&&t.La&&Math.abs(t.La.startTime-n.startTime)<.001&&(n=t.ua.next().value),n;if(t.La||o)return n=t.La?t.La.endTime:o,e=e.g.Pb()<0,t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),t.ua&&t.ua.next().value;o=e.j.sequenceMode||Lu(e)?0:e.i.inaccurateManifestTolerance;var i=Math.max(n-o,0);e=e.g.Pb()<0;var r=null;return o&&(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(i,!1,e)),r=t.ua&&t.ua.next().value),r||(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),r=t.ua&&t.ua.next().value),r}function bu(e,t,n,o){var i,r,s,a,l,u,c,d,p,h;return D(function(f){switch(f.g){case 1:for(i=t.stream,a=(s=(r=i.segmentIndex)&&r.Vb(n))&&s.next().value;a&&e.O.includes(a.startTime);)a=s&&s.next().value;if(!a){f.A(0);break}if(!(l=a.aa)||zs(l,t.pb)){f.A(3);break}return t.pb=l,k(f,4),S(f,ku(e,t,l),6);case 6:u=f.h;var m=e.g.Z;m.H&&ft(m.H,u,0,i),e.O=[],A(f,3);break;case 4:throw c=I(f),t.pb=null,c;case 3:if(t.La&&t.La==a){f.A(0);break}return t.La=a,k(f,8),S(f,ku(e,t,a),10);case 10:d=f.h,(m=e.g.Z).H&&ft(m.H,d,0,i),e.O.push(a.startTime),A(f,9);break;case 8:throw p=I(f),t.La=null,p;case 9:if(h=Math.max.apply(Math,[0].concat(y(e.O))),e.g.Hc()+o>h)return S(f,bu(e,t,a.startTime,o),0);f.A(0)}})}function xu(e,t,n,o,i,r,s,a){var l,u,c,d,p;return D(function(h){switch(h.g){case 1:if(l=ct,u=Ou(e),k(h,2),t.nc=o,t.mc=i,s&&(t.gf=s),a&&(t.hf=a),t.jf=n,c=e.j.sequenceMode||"HLS"==e.j.type,d=null,t.type===l.Ca?d=e.h.get(l.ia):t.type===l.ia&&(d=e.h.get(l.Ca)),!(d&&d.stream&&d.stream.isAudioMuxedInVideo)){h.A(4);break}return S(h,Ha(e.g.Z,d.type,n,o,i,c,d.stream.mimeType,d.stream.codecs,u),4);case 4:return S(h,Ha(e.g.Z,t.type,n,o,i,c,r.mimeType||t.stream.mimeType,r.codecs||t.stream.codecs,u),6);case 6:A(h,0);break;case 2:throw p=I(h),t.nc=null,t.mc=null,t.gf=null,t.hf=null,t.jf=null,p}})}function wu(e,t,n,o,i,r,s,a){var l,u,c,d;return s=void 0!==s&&s,a=void 0!==a&&a,D(function(p){switch(p.g){case 1:return l=o.closedCaptions&&o.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,c=null,i.aa&&(c=i.aa.timescale),u&&c&&"video"===o.type&&"DASH"==e.j.type&&(new sr).box("moof",ar).box("traf",ar).T("tfdt",function(n){var o,r,s,a,l;return D(function(u){return o=rs(n.reader,n.version),(r=o.baseMediaDecodeTime)?(s=-r/c,(Number(t.jf)||0)<s?(a=t.nc,l=t.mc,S(u,xu(e,t,s,a,l,i),0)):u.A(0)):u.return()})}).parse(r,!1,s)),S(p,Su(e,t,n),2);case 2:return Zi(e.l),d=t.bd,t.bd=!1,S(p,e.g.Ph(t.type,r),3);case 3:return S(p,$a(e.g.Z,t.type,r,i,o,l,d,a,s),4);case 4:Zi(e.l),T(p)}})}function Su(e,t,n){var o,i,r,s,a,l,u,c,d;return D(function(p){return 1==p.g?((o=t.stream.segmentIndex)instanceof Nl&&(o.Ya(e.j.presentationTimeline.Ib()),i=[],function(e,t){for(var n=(e=g(e.h)).next();!n.done;n=e.next())t(n.value)}(o,function(e){i.push(e.Se())})),r=Math.max(e.i.bufferBehind*e.F,e.j.presentationTimeline.h),null==(s=Fa(e.g.Z,t.type))?(e.H==t&&(e.H=null),p.return()):(a=n-s,l=e.i.evictionGoal,u=e.j.presentationTimeline.Xb(),c=e.j.presentationTimeline.Hb(),d=a-r,c-u>l&&(d=Math.max(a-r,u-l-s)),d<=l?p.return():S(p,e.g.Z.remove(t.type,s,s+d,i),2))):4!=p.g?(Zi(e.l),e.H?S(p,Su(e,e.H,n),4):p.A(0)):(Zi(e.l),void T(p))})}function Tu(e){return e&&e.type==ut&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function ku(e,t,n,o){var i,r,s,a,l;return D(function(u){switch(u.g){case 1:if(i=n.Yb())return u.return(i);if(r=null,t.ea){var c=t.ea,d=c.h;n instanceof js&&(d=c.j),d.has(n)?(c=d.get(n),o&&(c.xh=o),r=c.ie):r=null}return r||(r=Cu(n,t.stream,o||null,e.i.retryParameters,e.g.tc)),s=0,t.ua&&(s=t.ua.h),t.Ua=r,S(u,r.promise,2);case 2:if(a=u.h,t.Ua=null,l=a.data,!n.aesKey){u.A(3);break}return S(u,su(l,n.aesKey,s),4);case 4:l=u.h;case 3:return u.return(l)}})}function Cu(e,t,n,o,i,r){r=void 0!==r&&r;var s=e instanceof $s?e:void 0,a=s?1:0;return(e=au(e.P(),e.startByte,e.endByte,o,n)).contentType=t.type,i.request(Xi,e,{type:a,stream:t,segment:s,isPreload:r})}function Au(e,t,n,o){var i,r;return D(function(s){return 1==s.g?(t.ec=!1,t.Jd=!1,t.ld=0,t.Ub=!0,t.La=null,t.ua=null,t.ea&&!e.m.has(t.stream)&&Jl(t.ea),o?(i=e.g.Hc(),r=e.g.Z.getDuration(),S(s,e.g.Z.remove(t.type,i+o,r),3)):S(s,Va(e.g.Z,t.type),4)):3!=s.g?(Zi(e.l),n?S(s,e.g.Z.flush(t.type),3):s.A(3)):(Zi(e.l),t.Ub=!1,t.endOfStream=!1,t.Ja||t.sb||Iu(e,t,0),void T(s))})}function Iu(e,t,n){var o=t.type;(o!=ut||e.h.has(o))&&(t.sb=new So(function(){var n;return D(function(o){return 1==o.g?(k(o,2),S(o,yu(e,t),4)):2!=o.g?A(o,0):(n=I(o),e.g&&e.g.onError(n),void T(o))})}).ka(n))}function Eu(e){null!=e.sb&&(e.sb.stop(),e.sb=null)}function Mu(e){return D(function(t){return e.Ua?S(t,e.Ua.abort(),0):t.A(0)})}function Ru(e,t,n){var o;return D(function(i){if(1==i.g)return 3024==n.code?(t.Ja=!1,Eu(t),Iu(e,t,0),i.return()):S(i,Ai(e.X),2);if(Zi(e.l),1===n.category&&1003!=n.code){if(t.Mc)return uu(e,!1),i.return();o=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,n.handled=e.g.disableStream(t.stream,o),n.handled&&(n.severity=1)}n.handled&&1011==n.code||e.g.onError(n),n.handled||e.i.failureCallback(n),T(i)})}function _u(e,t){var n,o,i,r,s,a;return t=void 0!==t&&t,D(function(l){if(1==l.g){if(n=Date.now()/1e3,o=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<o)return l.return(!1);e.R=n}return i=ct,(r=e.h.get(i.ia))&&(Eu(r),r.Ua&&(r.Ua.abort(),r.Ua=null),r.pb=null,r.nc=null,r.mc=null,r.Ja=!1,r.ec=!1,r.ld=0,r.Jd=!1,r.Ub=!1,r.ua&&r.ua.fh()),(s=e.h.get(i.Ca))&&(Eu(s),s.Ua&&(s.Ua.abort(),s.Ua=null),s.pb=null,s.nc=null,s.mc=null,s.Ja=!1,s.ec=!1,s.ld=0,s.Jd=!1,s.Ub=!1,s.ua&&s.ua.fh()),a=e.g.video.paused,S(l,tl(e.g.Z,Ou(e)),2)}return!s||s.Ub||s.Ja||s.sb||Iu(e,s,0),!r||r.Ub||r.Ja||r.sb||Iu(e,r,0),a||e.g.video.play(),l.return(!0)})}function Lu(e){if("keep"!==e.i.crossBoundaryStrategy)return!0;var t=ae();if(vt()&&t.Pc()){if(!t.Jf())for(n=(t=g(e.h.keys())).next();!n.done;n=t.next())if((n=e.h.get(n.value)).type!==ct.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,n=(t=g(n.fullMimeTypes)).next();!n.done;n=t.next())e.add(so(n.value));return e.size>1}}else for(var n=(t=g(e.h.keys())).next();!n.done;n=t.next())if((n=e.h.get(n.value)).type!==ct.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0;return!1}function Pu(e){e.G.Qa(),Lu(e)&&(e.G.D(e.g.video,"waiting",function(){return Du(e)}),e.G.D(e.g.video,"timeupdate",function(){return Du(e)}))}function Du(e){if(Lu(e)){e.K.stop();var t=e.g.Hc(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.pb)&&null!==n.g&&((t=n.g-t)<0||t>1||(e.I=n.g+.1,e.K.ka(t)))}}function Ou(e,t){function n(t){if(t.fullMimeTypes&&t.fullMimeTypes.size>1&&e.h.has(t.type)){var n=e.h.get(t.type),o=ja(e.g.Z,n.type),i=e.g.Hc();(n=vu(e,n,i,o))&&n.codecs&&n.mimeType&&(t.codecs=n.codecs,t.mimeType=n.mimeType)}}t=void 0!==t&&t;var o=new Map,i=e.o.audio;return i&&(n(i),o.set("audio",i)),(i=e.o.video)&&(n(i),o.set("video",i)),t&&e.B&&o.set(ut,e.B),o}function Nu(){}function Uu(e,t,n,o,i){var r,s=i in o,a=s?n.constructor==Object&&0==Object.keys(o).length:n.constructor==Object&&0==Object.keys(n).length,l=s||a,u=!0;for(r in t){var c=i+"."+r,d=s?o[i]:n[r];l||r in n?void 0===t[r]?void 0===d||l?delete e[r]:e[r]=jt(d):a?e[r]=t[r]:d.constructor==Object&&t[r]&&t[r].constructor==Object?(e[r]||(e[r]=jt(d)),c=Uu(e[r],t[r],d,o,c),u=u&&c):typeof t[r]!=typeof d||null==t[r]||"function"!=typeof t[r]&&t[r].constructor!=d.constructor?(W("Invalid config, wrong type for "+c),u=!1):"function"==typeof n[r]&&n[r].length!=t[r].length?(K("Unexpected number of arguments for "+c),e[r]=t[r]):e[r]=Array.isArray(e[r])?t[r].slice():t[r]:(W("Invalid config, unrecognized key "+c),u=!1)}return u}function Bu(e,t){for(var n={},o=n,i=0,r=0;!((i=e.indexOf(".",i))<0);)0!=i&&"\\"==e[i-1]||(o[r=e.substring(r,i).replace(/\\\./g,".")]={},o=o[r],r=i+1),i+=1;return o[e.substring(r).replace(/\\\./g,".")]=t,n}function Fu(e,t){return e&&t}function ju(e,t){function n(e){return e&&"object"==typeof e&&!Array.isArray(e)}return e=function e(t,o){return Object.keys(t).reduce(function(i,r){var s=t[r];return o.hasOwnProperty(r)?s instanceof HTMLElement&&o[r]instanceof HTMLElement?s.isEqualNode(o[r])||(i[r]=s):n(s)&&n(o[r])?(s=e(s,o[r]),(Object.keys(s).length>0||!n(s))&&(i[r]=s)):Array.isArray(s)&&Array.isArray(o[r])?ee(s,o[r])||(i[r]=s):Number.isNaN(s)&&Number.isNaN(o[r])||s!==o[r]&&(i[r]=s):i[r]=s,i},{})}(e,t),function e(t){for(var o=g(Object.keys(t)),i=o.next();!i.done;i=o.next())if(!(t[i=i.value]instanceof HTMLElement))if(n(t[i])&&0===Object.keys(t[i]).length)delete t[i];else{var r=t[i];Array.isArray(r)&&0===r.length||"function"==typeof t[i]?delete t[i]:n(t[i])&&(e(t[i]),0===Object.keys(t[i]).length&&delete t[i])}}(e),e}function zu(){}function $u(e){return new ye(e=He(e)).Eb}function Vu(e,t,n){function o(e){Be(r).setUint32(s,e.byteLength,!0),s+=4,r.set(Ne(e),s),s+=e.byteLength}if(!n||!n.byteLength)throw new je(2,6,6015);var i;i="string"==typeof t?qe(t,!0):t,e=qe(e=He(e),!0);var r=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),s=0;return o(e),o(i),o(n),r}function Hu(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Vu(e,n=He(e).split("skd://").pop(),t))}function Gu(e,t){2===e&&(e=t.drmInfo)&&wi(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}function qu(e,t,n){for(n=void 0===n||n,this.h=e,this.g=new Set([e]),t=(e=g(t=t||[])).next();!t.done;t=e.next())this.add(t.value,n)}function Wu(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return lo(e)}),t=t.codecs.split(",").map(function(e){return lo(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Ku(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=g(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Xu(){this.g=null}function Yu(e,t){return e.filter(function(e){return!(e.audio&&e.audio.channelsCount&&e.audio.channelsCount>t)}).sort(function(e,t){return e.audio||t.audio?e.audio?t.audio?(t.audio.channelsCount||0)-(e.audio.channelsCount||0):1:-1:0})}function Ju(e,t){return e.filter(function(e){return!e.audio||e.audio.codecs==t})}function Qu(){}function Zu(){var t=1/0,n=ae();navigator.connection&&navigator.connection.saveData&&(t=360);var o={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,o){return"apple"===e.shakaMediaKeysPolyfill&&"skd"==n&&(n=o.serverCertificate,t=Vu(t,o=$u(t),n)),t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},i="reload";vt()&&n.Pc()&&(i="smooth");var r={trackSelectionCallback:function(e){return D(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return D(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?S(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return Fu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},s={drm:o,manifest:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:nc,manifestPreprocessorTXml:oc,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:n.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:nc,manifestPreprocessorTXml:oc,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},streaming:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return Fu([e])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:i,addExtraFeaturesToSourceBuffer:function(e){return Fu([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(e,t){return Fu([e,t])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:r,abrFactory:function(){return new fi},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Xu,[null].concat(y(O.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return r.trackSelectionCallback=function(e){return D(function(t){return t.return(function(e,t,n){var o=n;"AUTO"==o&&(n=e.some(function(e){return!(!e.hdr||"HLG"!=e.hdr)}),o=ae().sd(n));var i=e.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=o)});n=[];var r=No(t,i.map(function(e){return e.language}));r&&(n=i.filter(function(e){return Lo(e.language)==r})),0==n.length&&(n=i.filter(function(e){return e.primary})),0==n.length&&(i.map(function(e){return e.language}),n=i);var s=n.filter(function(e){return e.height&&e.height<=480});for(s.length&&(s.sort(function(e,t){return t.height-e.height}),n=s.filter(function(e){return e.height==s[0].height})),t=[],n.length&&(i=Math.floor(n.length/2),n.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.push(n[i])),e=g(e),n=e.next();!n.done;n=e.next())(n=n.value).type!=ut&&"image"!=n.type||t.push(n);return t}(e,s.preferredAudioLanguage,s.preferredVideoHdrLevel))})},n.Wa(s)}function ec(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function tc(e,t,n){var o={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Uu(e,t,n||Zu(),o,"")}function nc(e){return Fu([e],e)}function oc(e){return Fu([e],e)}function ic(){this.g=null,this.h=[]}function rc(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var o=(e=g(e.h)).next();!o.done;o=e.next())n+=(o=o.value).state==t?o.duration:0;return n}function sc(){this.i=this.h=null,this.g=[]}function ac(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function lc(){this.C=this.X=NaN,this.l="",this.j=this.ni=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.S=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new ic,this.h=new sc}function uc(e,t,n){e.X=t,e.C=n}function cc(e,t){e.j=isNaN(e.j)?t:e.j+t}function dc(e){for(var t=e.X,n=e.C,o=e.l,i=e.B,r=e.O,s=e.R,a=e.N,l=e.V,u=e.S,c=e.u,d=e.i,p=e.G,h=e.J,f=e.m,m=rc(e.g,"playing"),y=rc(e.g,"paused"),v=rc(e.g,"buffering"),b=e.o,x=e.F,w=e.K,S=e.ni,T=e.j,k=e.M,C=e.I,A=e.H,I=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],o=g(e.h),i=o.next();!i.done;i=o.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(e.g),E=[],M=(e=g(e.h.g)).next();!M.done;M=e.next())M=M.value,E.push({timestamp:M.timestamp,id:M.id,type:M.type,fromAdaptation:M.fromAdaptation,bandwidth:M.bandwidth});return{width:t,height:n,currentCodecs:o,streamBandwidth:i,decodedFrames:r,droppedFrames:s,corruptedFrames:a,stallsDetected:l,gapsJumped:u,estimatedBandwidth:c,completionPercent:d,loadLatency:p,manifestTimeSeconds:h,drmTimeSeconds:f,playTime:m,pauseTime:y,bufferingTime:v,licenseTime:b,liveLatency:x,maxSegmentDuration:w,manifestSizeBytes:S,bytesDownloaded:T,nonFatalErrorCount:k,manifestPeriodCount:C,manifestGapCount:A,stateHistory:I,switchHistory:E}}function pc(e,t,n,o){Bi.call(this),this.N=e,this.V=t,this.Da=o.networkingEngine,this.m=n,this.C=null,this.ya=0,this.Sa=o.md,this.G=o.wk,this.Ta=o.xk,this.g=o.config,this.l=this.H=this.h=null,this.oa=!1,this.I=o.Ik,this.wa=!1,this.i=null,this.ba=!1,this.u=null,this.M=new Map,this.xa=!1,this.Ga=o.Hk,this.X=new lc,this.ma=new Ei,this.B=new Ei,this.O=null,this.j=!1,this.$=o.jj,this.S=this.o=null,this.R=!1,this.K=[],this.J=[],this.F=!0}function hc(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function fc(e,t){if(e.O=t,e.R=!0,e.K)for(var n=(t=g(e.K)).next();!n.done;n=t.next())(n=n.value)();e.K=null}function mc(e){if(e.j)throw new je(2,7,7003)}function gc(e,t){e.dispatchEvent(new Oi("onstatechange",(new Map).set("state",t)))}function yc(e,t){var n,o,i;return D(function(r){switch(r.g){case 1:return!e.h||e.i?r.return():(gc(e,"drm-engine"),e.ya=Date.now()/1e3,e.i=e.Sa(),e.G.h=e.i,e.i.configure(e.g.drm,function(){return e.F}),n=ni(e.h.variants),o=!0,e.h&&e.h.presentationTimeline&&(o=e.h.presentationTimeline.W()),S(r,xr(e.i,n,e.h.offlineSessionIds,o),2));case 2:if(mc(e),!t){r.A(3);break}return S(r,e.i.fc(t),4);case 4:mc(e);case 3:return S(r,qr(e.G,e.h),5);case 5:if(!r.h){r.A(0);break}return i=new Oi("trackschanged",void 0),S(r,Promise.resolve(),7);case 7:e.dispatchEvent(i),T(r)}})}function vc(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=ni(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function bc(e,t,n){var o,i,r,s,a;return D(function(l){return 1==l.g?(o=e.g.streaming.segmentPrefetchLimit||2,i=new ql(o,t,function(t,n,o){return Cu(t,n,o||null,e.g.streaming.retryParameters,e.Da,e.F)},!1),e.M.set(t.id,i),t.segmentIndex?l.A(2):S(l,t.createSegmentIndex(),2)):(r="number"==typeof e.m?e.m:0,s=t.segmentIndex.Vb(r),a=null,s&&((a=s.current())||(a=s.next().value)),a||(a=Pl(t.segmentIndex)),a?n?a.aa?S(l,Xl(i,a.aa),0):l.A(0):S(l,Kl(i,a.startTime),0):l.A(0))})}function xc(e,t){Bi.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:Tc,Uc:function(e,t){return wc(n,"enter",e,t)}},{kd:Sc,jd:Tc,Uc:function(e,t){return wc(n,"enter",e,t)}},{kd:kc,jd:Tc,Uc:function(e,t){return wc(n,"enter",e,t)}},{kd:Tc,jd:Sc,Uc:function(e,t){return wc(n,"exit",e,t)}},{kd:Tc,jd:kc,Uc:function(e,t){return wc(n,"exit",e,t)}},{kd:Sc,jd:kc,Uc:function(e,t){t?wc(n,"skip",e,t):(wc(n,"enter",e,t),wc(n,"exit",e,t))}},{kd:kc,jd:Sc,Uc:function(e,t){return wc(n,"skip",e,t)}}],this.h=new oe,this.h.D(this.i,"regionremove",function(e){n.g.delete(e.region)})}function wc(e,t,n,o){t=new Oi(t,new Map([["region",n],["seeking",o]])),e.dispatchEvent(t)}yl.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},Sl.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},(i=kl.prototype).ready=function(){var e=this;ml(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){!function(){if(null==e.h||0==e.h&&e.g.duration!=1/0)e.i=!0;else{var t=e.g.currentTime,n=null;if("number"==typeof e.h)n=e.h;else if(e.h instanceof Date){var o=Cl(e);null!==o&&(n=e.h.getTime()/1e3-o,n=Al(e,n))}null==n?e.i=!0:(n<0&&(n=Math.max(0,t+n)),t!=n?(e.j.Aa(e.g,"seeking",function(){e.i=!0}),e.g.currentTime=n):e.i=!0)}}()})},i.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},i.Wf=function(e){this.h=this.i?this.h:e},i.He=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=Al(this,e=e.getTime()/1e3-(Cl(this)||0))),e||0},i.Jh=function(){return 0},i.Hh=function(){return 0},i.Ih=function(){return!1},i.xi=function(){},i.ki=function(){var e=Ks(this.g.buffered);return null!=e&&e>=this.g.duration-1},(i=Il.prototype).ready=function(){this.m.Fa(.25)},i.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},i.Wf=function(e){bl(this.j,El(this,e))},i.He=function(){var e=vl(this.j);return this.h.readyState>0&&!this.h.paused?_l(this,e):e},i.Jh=function(){return this.i.H},i.Hh=function(){return this.i.G},i.Ih=function(){return this.i.C},i.xi=function(){this.i.vf()},i.ki=function(){if(this.g.W()){var e=this.g.Ic(),t=Ks(this.h.buffered);if(null!=t&&t>=e)return!0}return!1},(i=Ll.prototype).getNumReferences=function(){return this.g.length},i.getNumEvicted=function(){return this.i},i.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},i.zk=function(){this.o=!0},i.Gb=function(e){for(var t=g(this.g),n=t.next();!n.done;n=t.next())e(n.value)},i.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var o=this.g[n],i=n<t?this.g[n+1].startTime:o.endTime;if(e>=o.startTime&&e<i)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length||(e-=this.i)<0||e>=this.g.length?null:this.g[e]},i.offset=function(e){if(!this.o)for(var t=g(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.mf=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.g.push.apply(this.g,y(e))}},i.ee=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}),this.mf(e),this.Ya(t)},i.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(t){return t.endTime>e}),this.i+=t-this.g.length}},i.pd=function(e,t,n){if(n=void 0!==n&&n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&((t=new $s((e=this.g[this.g.length-1]).startTime,t,e.C,e.startByte,e.endByte,e.aa,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey)).mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},i.Nf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new To(function(){var e=t();e?n.g.push.apply(n.g,y(e)):(n.m.stop(),n.m=null)}),this.m.Fa(e))},Ll.prototype[Symbol.iterator]=function(){return this.Vb(0)},Ll.prototype.Vb=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var o=this.find(e);if(null==o)return null;var i=this.get(o);n?o++:o--;var r=-1;if(i&&i.g.length>0)for(var s=i.g.length-1;s>=0;--s){var a=i.g[s];if(e>=a.startTime&&e<a.endTime){if(!t){for(;s&&!a.l;)s--,a=i.g[s];if(!a.l)return W("No independent partial segment found!"),null}n?o--:o++,r=s-1;break}}return new Ol(this,o,r,n)},Ll.prototype.Se=function(){return-1},$("shaka.media.SegmentIndex",Ll),Ll.forSingleSegment=Dl,Ll.prototype.getIteratorForTime=Ll.prototype.Vb,Ll.prototype.updateEvery=Ll.prototype.Nf,Ll.prototype.fit=Ll.prototype.pd,Ll.prototype.evict=Ll.prototype.Ya,Ll.prototype.mergeAndEvict=Ll.prototype.ee,Ll.prototype.offset=Ll.prototype.offset,Ll.prototype.get=Ll.prototype.get,Ll.prototype.find=Ll.prototype.find,Ll.prototype.markImmutable=Ll.prototype.zk,Ll.prototype.release=Ll.prototype.release,Ll.prototype.getNumEvicted=Ll.prototype.getNumEvicted,Ll.prototype.getNumReferences=Ll.prototype.getNumReferences,(i=Ol.prototype).Id=function(e){this.reverse=e},i.uj=function(){return this.h},i.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.u&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},i.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.u&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},i.fh=function(){var e=this.current();if(e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},$("shaka.media.SegmentIterator",Ol),Ol.prototype.resetToLastIndependent=Ol.prototype.fh,Ol.prototype.next=Ol.prototype.next,Ol.prototype.current=Ol.prototype.current,Ol.prototype.currentPosition=Ol.prototype.uj,Ol.prototype.setReverse=Ol.prototype.Id,f(Nl,Ll),(i=Nl.prototype).clone=function(){var e=new Nl;return e.h=this.h.slice(),e.i=this.i,e},i.release=function(){for(var e=g(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},i.Gb=function(e){for(var t=g(this.h),n=t.next();!n.done;n=t.next())n.value.Gb(e)},i.find=function(e){for(var t=this.i,n=g(this.h),o=n.next();!o.done;o=n.next()){var i=(o=o.value).find(e);if(null!=i)return i+t;t+=o.getNumEvicted()+o.getNumReferences()}return null},i.get=function(e){for(var t=this.i,n=g(this.h),o=n.next();!o.done;o=n.next()){var i=(o=o.value).get(e-t);if(i)return i;i=o.getNumReferences(),t+=o.getNumEvicted()+i}return null},i.offset=function(){},i.mf=function(){},i.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),0==t.getNumReferences()&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},i.ee=function(){},i.pd=function(){},i.Nf=function(){},$("shaka.media.MetaSegmentIndex",Nl),Nl.prototype.updateEvery=Nl.prototype.Nf,Nl.prototype.fit=Nl.prototype.pd,Nl.prototype.mergeAndEvict=Nl.prototype.ee,Nl.prototype.evict=Nl.prototype.Ya,Nl.prototype.merge=Nl.prototype.mf,Nl.prototype.offset=Nl.prototype.offset,Nl.prototype.get=Nl.prototype.get,Nl.prototype.find=Nl.prototype.find,Nl.prototype.forEachTopLevelReference=Nl.prototype.Gb,Nl.prototype.release=Nl.prototype.release,Ul.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Ul.prototype.set=function(e){this.i=e,Bl(this)},Ul.prototype.Tc=function(){return this.g.Tc()},Fl.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},f(zl,Bi),zl.prototype.release=function(){this.g.clear(),Bi.prototype.release.call(this)},zl.prototype.j=function(e){for(var t=g(this.g.values()),n=t.next();!n.done;n=t.next()){var o=(n=n.value).lg;e:{for(var i=n.ke,r=i.length-1;r>=0;r--){var s=i[r];if(s.position<=e){i=s.xd;break e}}i=null}r=i&&!(o===i||o&&i&&o.bandwidth==i.bandwidth&&o.audioSamplingRate==i.audioSamplingRate&&o.codecs==i.codecs&&o.contentType==i.contentType&&o.frameRate==i.frameRate&&o.height==i.height&&o.mimeType==i.mimeType&&o.channelsCount==i.channelsCount&&o.pixelAspectRatio==i.pixelAspectRatio&&o.width==i.width),s=i&&o&&i.label&&o.label&&o.label!==i.label;var a=i&&o&&i.language&&o.language&&o.language!==i.language;o=i&&o&&i.roles&&o.roles&&!te(o.roles,i.roles),(s||a||o)&&$l(this,e,i.contentType)&&(n.lg=i,o=new Oi("audiotrackchange",new Map([["quality",i],["position",e]])),this.dispatchEvent(o)),r&&$l(this,e,i.contentType)&&(n.lg=i,JSON.stringify(i),n=new Oi("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},f(Hl,Bi),Hl.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Bi.prototype.release.call(this)},ql.prototype.Ya=function(e,t){t=void 0!==t&&t;for(var n=g(this.h.keys()),o=n.next();!o.done;o=n.next())e>(o=o.value).endTime&&eu(this,o);t&&Ql(this)},ql.prototype.Id=function(e){this.o=e,this.g&&this.g.Id(e)},tu.prototype.abort=function(){this.ie&&this.ie.abort()},$("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"}),(i=lu.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e){if(this.i=e,this.X=new Ci({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ea&&(Jl(t.ea),t.ea=null);for(var n=(t=g(this.m.keys())).next();!n.done;n=t.next())n=n.value,Jl(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(ut))&&t.ea&&(Jl(t.ea),t.ea=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ea&&(Jl(t.ea),t.ea=null),n=(t=g(this.h.keys())).next();!n.done;n=t.next())(n=this.h.get(n.value)).ea?(Zl(n.ea,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(Jl(n.ea),n.ea=null)):e.segmentPrefetchLimit>0&&(n.ea=gu(this,n.stream));e.disableAudioPrefetch||function(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,o=g(e.j.variants),i=o.next(),r={};!i.done;r={Nb:void 0},i=o.next())if(r.Nb=i.value,r.Nb.audio)if(e.m.has(r.Nb.audio)){if(Zl(i=e.m.get(r.Nb.audio),t),!(t>0&&n.some(function(e){return function(t){return Mo(e.Nb.audio.language,t)}}(r)))){var s=e.h.get(r.Nb.audio.type);i!==(s&&s.ea)&&Jl(i),e.m.delete(r.Nb.audio)}}else t<=0||!n.some(function(e){return function(t){return Mo(e.Nb.audio.language,t)}}(r))||!(i=gu(e,r.Nb.audio))||(r.Nb.audio.segmentIndex||r.Nb.audio.createSegmentIndex(),e.m.set(r.Nb.audio,i))}(this)},i.start=function(e){var t=this;return D(function(n){if(1==n.g)return S(n,function(e,t){var n,o,i,r,s,a,l;return D(function(u){if(1==u.g){if(!e.o)throw new je(2,5,5006);return n=Ou(e,!0),S(u,e.g.Z.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Zi(e.l),e.updateDuration(),o=g(n.keys()),i=o.next();!i.done;i=o.next())r=i.value,s=n.get(r),e.h.has(r)||(a=mu(e,s),t.has(s.id)&&(Wl(l=t.get(s.id),function(t,n,o){return Cu(t,n,o||null,e.i.retryParameters,e.g.tc)}),a.ea=l),e.h.set(r,a),Iu(e,a,0));Pu(e),T(u)})}(t,e||new Map),2);Zi(t.l),t.M=!0,T(n)})},i.bd=function(){if(this.g){for(var e=this.g.Hc(),t=g(this.h.keys()),n=t.next();!n.done;n=t.next()){var o,i=n.value;if(n=this.h.get(i),(o=!this.J)&&(o=this.g.Z,o=!(o=i==ut?null!=(o=o.h).g&&null!=o.h&&e>=o.g&&e<o.h:Xs(o=za(o,i),e))),o){if(this.R=0,n.ea&&(n.ea.g=null),"audio"===n.type)for(var r=(o=g(this.m.values())).next();!r.done;r=o.next())r.value.g=null;n.ua=null,(null!=ja(this.g.Z,i)||n.Ja)&&fu(this,n),n.Ua&&(n.Ua.abort(),n.Ua=null),i===ut&&(i=this.g.Z).K&&i.K.Ld(),n.bd=!0}!this.J||n.Ub||n.Ja||n.sb||Iu(this,n,0)}Lu(this)&&Du(this)}},i.updateDuration=function(){var e=bt(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),Ga(this.g.Z)),this.g.Z.rb(t)):e?(this.u&&this.u.Fa(.5),this.g.Z.rb(1/0)):this.g.Z.rb(4294967296)},$("shaka.util.ConfigUtils",Nu),Nu.getDifferenceFromConfigObjects=ju,Nu.convertToConfigObject=Bu,Nu.mergeConfigObjects=Uu,$("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2}),$("shaka.drm.FairPlay",zu),zu.commonFairPlayResponse=function(e,t){if(2===e&&(e=t.originalRequest.drmInfo)&&wi(e.keySystem)){try{var n=$e(t.data)}catch(i){return}if(e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0),!e)try{var o=JSON.parse(n);o.ckc&&(n=o.ckc,e=!0),o.CkcMessage&&(n=o.CkcMessage,e=!0),o.License&&(n=o.License,e=!0)}catch(i){}e&&(t.data=Oe(Ze(n)))}},zu.muxFairPlayRequest=function(e,t){Gu(e,t)},zu.expressplayFairPlayRequest=function(e,t){if(2===e){var n=t.drmInfo;n&&wi(n.keySystem)&&Gu(e,t)}},zu.conaxFairPlayRequest=function(e,t){Gu(e,t)},zu.ezdrmFairPlayRequest=function(e,t){Gu(e,t)},zu.verimatrixFairPlayRequest=function(e,t){2===e&&(e=t.drmInfo)&&wi(e.keySystem)&&(e=Qe(e=Ne(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ge("spc="+e))},zu.muxInitDataTransform=function(e,t,n){return Hu(e,t,n)},zu.expressplayInitDataTransform=function(e,t,n){return Hu(e,t,n)},zu.conaxInitDataTransform=function(t,n,o){if("skd"!==n)return t;n=o.serverCertificate,o=He(t).split("skd://").pop().split("?").shift(),o=e.atob(o);var i=new ArrayBuffer(2*o.length);i=Ue(i);for(var r=0,s=o.length;r<s;r++)i[r]=o.charCodeAt(r);return Vu(t,i,n)},zu.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Vu(e,n=He(e).split(";").pop(),t))},zu.verimatrixInitDataTransform=function(e,t,n){return Hu(e,t,n)},zu.initDataTransform=Vu,zu.defaultGetContentId=$u,zu.isFairPlaySupported=function(){var e;return D(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},k(t,2),S(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(I(t),t.return(!1))})},qu.prototype.add=function(e,t){var n,o=this.h;if(t=void 0===t||t,!(n=!!o.audio!=!!e.audio||!!o.video!=!!e.video||o.language!=e.language)&&(n=o.audio&&e.audio)){n=o.audio;var i=e.audio;n=!(!((!n.channelsCount||!i.channelsCount||n.channelsCount>2||i.channelsCount>2)&&n.channelsCount!=i.channelsCount||n.spatialAudio!==i.spatialAudio||t&&!Wu(n,i))&&Ku(n.roles,i.roles)&&n.groupId===i.groupId)}return!n&&(n=o.video&&e.video)&&(o=o.video,n=e.video,n=!((!t||Wu(o,n))&&Ku(o.roles,n.roles))),!n&&(this.g.add(e),!0)},qu.prototype.values=function(){return this.g.values()},$("shaka.media.AdaptationSet",qu),Xu.prototype.configure=function(e){this.g=e},Xu.prototype.getConfiguration=function(){return this.g},Xu.prototype.create=function(e){var t;if(this.g.language){var n=function(e,t){var n=No(t=Lo(t),e.map(function(e){return Oo(e)}));return n?e.filter(function(e){return n==Oo(e)}):[]}(e,this.g.language);n.length&&(t=n)}t||(t=(t=e.filter(function(e){return e.primary})).length?t:e),e=function(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}(t,this.g.role),e.length&&(t=e),e=function(e,t){return e.filter(function(e){return!!e.video&&(t?e.video.roles.includes(t):0==e.video.roles.length)})}(t,this.g.videoRole),e.length&&(t=e),this.g.videoLayout&&(e=function(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}(t,this.g.videoLayout),e.length&&(t=e)),this.g.hdrLevel&&(e=function(e,t){if("AUTO"==t){var n=e.some(function(e){return!(!e.video||!e.video.hdr||"HLG"!=e.video.hdr)});t=ae().sd(n)}return e.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==t})}(t,this.g.hdrLevel),e.length&&(t=e));var o=[this.g.channelCount,this.g.preferredAudioChannelCount];if((e=o.filter(function(e,t){return e&&o.indexOf(e)===t})).length)for(n=(e=g(e)).next();!n.done;n=e.next())if((n=Yu(t,n.value)).length){t=n;break}this.g.audioLabel&&(e=function(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}(t,this.g.audioLabel),e.length&&(t=e)),this.g.videoLabel&&(e=function(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}(t,this.g.videoLabel),e.length&&(t=e)),e=function(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}(t,this.g.spatialAudio),e.length&&(t=e);var i=[this.g.audioCodec,this.g.activeAudioCodec].concat(y(this.g.preferredAudioCodecs));if((e=i.filter(function(e,t){return e&&i.indexOf(e)===t})).length)for(n=(e=g(e)).next();!n.done;n=e.next())if((n=Ju(t,n.value)).length){t=n;break}return new qu(t[0],t,!("smooth"==this.g.codecSwitchingStrategy&&vt()))},$("shaka.util.PlayerConfiguration",Qu),Qu.mergeConfigObjects=tc,Qu.createDefaultForLL=ec,Qu.createDefault=Zu,f(pc,Bi),(i=pc.prototype).getStartTime=function(){return this.m},i.rd=function(){return this.N},i.Hg=function(){return this.h},i.getStats=function(){return this.X},i.Sj=function(){return this.o?Xo(this.o):null},i.Rj=function(){return this.S?Yo(this.S):null},i.start=function(){var t,n=this;D(function(o){switch(o.g){case 1:return S(o,Promise.resolve(),2);case 2:return k(o,3),S(o,function(e){var t,n,o,i,r;return D(function(s){switch(s.g){case 1:if(gc(e,"manifest-parser"),e.l||(e.H=es(e.N,e.V),e.l=e.H(),e.l.configure(e.g.manifest,function(){return e.F})),t=Date.now()/1e3,gc(e,"manifest"),e.h){s.A(2);break}return S(s,e.l.start(e.N,e.Ta),3);case 3:return e.h=s.h,S(s,function(e){var t,n,o,i,r;return D(function(s){if(e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:e.g.preferredAudioChannelCount,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),1!=e.h.variants.length&&"HLS"!=e.h.type)return s.A(0);if(!(t=vc(e)))return s.A(0);for(n=[],o=g([t.video,t.audio]),i=o.next();!i.done;i=o.next())(r=i.value)&&!r.segmentIndex&&n.push(r.createSegmentIndex());return n.length>0?S(s,Promise.all(n),0):s.A(0)})}(e),2);case 2:return e.ma.resolve(),n=new Oi("manifestparsed",void 0),S(s,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),0==e.h.variants.length)throw new je(2,4,4036);if(function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.h),!Wr(e.G,e.h)){s.A(6);break}return o=new Oi("trackschanged",void 0),S(s,Promise.resolve(),7);case 7:mc(e),e.dispatchEvent(o);case 6:i=Date.now()/1e3,r=i-t,e.X.J=r,T(s)}})}(n),5);case 5:if(mc(n),"webkit"===e.shakaMediaKeysPolyfill){o.A(6);break}return S(o,yc(n),7);case 7:mc(n);case 6:if(!n.$){o.A(8);break}return S(o,function(e){var t,n,o,i,r;return D(function(s){return!e.o&&(t=vc(e))&&(e.o=t),e.o?(n=e.h.presentationTimeline.W(),o=[],(i=e.o).video&&o.push(bc(e,i.video,n)),i.audio&&o.push(bc(e,i.audio,n)),(r=oi(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&li(i.audio,r,e.g)&&(o.push(bc(e,r,n)),e.S=r),S(s,Promise.all(o),0)):s.A(0)})}(n),9);case 9:mc(n);case 8:if(!n.$||!n.i){o.A(10);break}return S(o,function(e){return D(function(t){return 1==t.g?e.J?S(t,e.m,3):t.A(0):S(t,Promise.all(e.X.map(function(e){return e.promise})),0)})}(n.i),11);case 11:mc(n);case 10:n.B.resolve(),A(o,0);break;case 3:(t=I(o))instanceof je&&(7001==t.code||7003==t.code)||n.B.reject(t),T(o)}})},i.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Bi.prototype.dispatchEvent.call(this,e)},i.onError=function(e){2===e.severity&&(this.B.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new Oi("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},i.configure=function(e,t){e=Bu(e,t),tc(this.g,e)},i.getConfiguration=function(){return jt(this.g)},i.ol=function(){return this.B},i.destroy=function(){var e,t,n=this;return D(function(o){if(1==o.g)return n.j=!0,!n.l||n.oa?o.A(2):S(o,n.l.stop(),2);if(4!=o.g)return n.u&&n.u.release(),n.I&&!n.wa&&n.I.release(),!n.i||n.ba?o.A(4):S(o,n.i.destroy(),4);if(n.M.size>0&&!n.xa)for(e=g(n.M.values()),t=e.next();!t.done;t=e.next())Jl(t.value);T(o)})},$("shaka.media.PreloadManager",pc),pc.prototype.destroy=pc.prototype.destroy,pc.prototype.waitForFinish=pc.prototype.ol,pc.prototype.getPrefetchedTextTrack=pc.prototype.Rj,pc.prototype.getPrefetchedVariantTrack=pc.prototype.Sj,f(xc,Bi),xc.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Bi.prototype.release.call(this)},xc.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=g(this.i.h.values()),o=n.next();!o.done;o=n.next()){o=o.value;var i=this.g.get(o),r=e<o.startTime?Sc:e>o.endTime?kc:Tc;this.g.set(o,r);for(var s=g(this.m),a=s.next();!a.done;a=s.next())(a=a.value).kd==i&&a.jd==r&&a.Uc(o,t)}}};var Sc=1,Tc=2,kc=3;function Cc(e,t,n){var o,i,r,s,a,l,u;return D(function(c){switch(c.g){case 1:var d=new ye(e).qb.split("/").pop().split(".");return o=1==d.length?"":d.pop().toLowerCase(),(i=Ac.get(o))?c.return(i):(r=0,s=Hi([e],n),k(c,2),s.method="HEAD",S(c,t.request(r,s).promise,4));case 4:a=c.h,i=a.headers["content-type"],A(c,3);break;case 2:if(!(l=I(c))||1002!=l.code&&1001!=l.code){c.A(3);break}return s.method="GET",S(c,t.request(r,s).promise,6);case 6:u=c.h,i=u.headers["content-type"];case 3:return c.return(i?i.toLowerCase().split(";").shift():"")}})}
/*
      		 @license
      		 Copyright 2013 Ali Al Dallal

      		 Licensed under the MIT license.

      		 Permission is hereby granted, free of charge, to any person obtaining a copy
      		 of this software and associated documentation files (the "Software"), to deal
      		 in the Software without restriction, including without limitation the rights
      		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
      		 copies of the Software, and to permit persons to whom the Software is
      		 furnished to do so, subject to the following conditions:

      		 The above copyright notice and this permission notice shall be included in
      		 all copies or substantial portions of the Software.

      		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
      		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
      		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
      		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
      		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
      		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
      		 SOFTWARE.
      		*/
for(var Ac=(new Map).set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html"),Ic={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},Ec=g(Object.keys(Ic)),Mc=Ec.next();!Mc.done;Mc=Ec.next()){var Rc=Mc.value;Ic[Rc.toLowerCase()]=Ic[Rc]}function _c(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return _c(t,e)}).join("");if(!e.payload)return e.payload;var n=[],o=e.fontWeight>=$n,i=e.fontStyle==Hn,r=e.textDecoration.includes(qn);return o&&n.push(["b"]),i&&n.push(["i"]),r&&n.push(["u"]),""==(i=e.color)&&t&&(i=t.color),o="",(i=Lc(i))&&(o+="."+i),""==(i=e.backgroundColor)&&t&&(i=t.backgroundColor),(t=Lc(i))&&(o+=".bg_"+t),o&&n.push(["c",o]),n.reduceRight(function(e,t){var n=g(t);return"<"+(t=n.next().value)+(void 0===(n=n.next().value)?"":n)+">"+e+"</"+t+">"},e.payload)}function Lc(e){var t=(e=e.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Pc(e,t){for(var n=[],o=(e=g(Dc(e))).next();!o.done;o=e.next())if((o=o.value).isContainer)n.push.apply(n,y(Pc(o.nestedCues,o)));else{var i=o.clone();i.nestedCues=[],i.payload=_c(o,t),n.push(i)}return n}function Dc(e){for(var t=[],n=(e=g(e)).next(),o={};!n.done;o={ig:void 0},n=e.next())o.ig=n.value,t.some(function(e){return function(t){return kn(e.ig,t)}}(o))||t.push(o.ig);return t}function Oc(e){function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(o){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),"vertical-lr"==e.writingMode?n.vertical="lr":"vertical-rl"==e.writingMode&&(n.vertical="rl"),1==e.lineInterpretation&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}function Nc(e,t){var n=Pc(t),o=[];t=e.cues?Array.from(e.cues):[];for(var i=(n=g(n)).next(),r={};!i.done;r={vd:void 0},i=n.next())r.vd=i.value,!t.some(function(e){return function(t){return t.startTime==e.vd.startTime&&t.endTime==e.vd.endTime&&t.text==e.vd.payload}}(r))&&r.vd.payload&&(i=Oc(r.vd))&&o.push(i);for(n=(t=g(t=o.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?o.indexOf(t)-o.indexOf(e):o.indexOf(e)-o.indexOf(t)}))).next();!n.done;n=t.next())e.addCue(n.value)}function Uc(e,t){var n=!1;"disabled"===e.mode&&(n=!0,e.mode="hidden");for(var o=0;o<e.cues.length;){var i=e.cues[o];t(i)?e.removeCue(i):o++}n&&(e.mode="disabled")}function Bc(e){var t=this;this.i=e,this.l=new oe,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var e=g(t.h.values()),n=e.next();!n.done;n=e.next())n.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){for(var e=new Map,n=t.i.Lc(),o=(n=g(n)).next();!o.done;o=n.next()){if(o=o.value,t.h.has(o.id)){var i=t.h.get(o.id);o.active||"disabled"===i.track.mode||(i.track.mode="disabled"),t.h.delete(o.id)}else{(i=t.j.ownerDocument.createElement("track")).kind=Fc(o);var r=i,s=void 0;if(o.label)s=o.label;else if(o.language)if(o.language in Ic)s=Ic[o.language];else{var a=Do(o.language);a in Ic&&(s=Ic[a]+" ("+o.language+")")}s||(s=o.originalTextId,o.language&&o.language!==o.originalTextId&&(s+=" ("+o.language+")")),r.label=s,o.language in Ic&&(i.srclang=o.language),"CHROMIUM"===ae().Ea()&&(i.src="data:,WEBVTT"),i.track.mode="disabled",t.j.appendChild(i)}e.set(o.id,i),o.active&&(t.g=o.id)}for(o=(n=g(t.h.values())).next();!o.done;o=n.next())o.value.remove();t.g>-1&&(e.has(t.g)?"disabled"===(n=e.get(t.g).track).mode&&(n.mode=t.u?"showing":"hidden"):t.g=-1),t.h=e},this.B=function(){if(!t.o){var e=t.j;t.o=new To(function(){if(t.o=null,t.j===e){var n=-1,o=!1;if(t.h.has(t.g)){var i=t.h.get(t.g);"showing"===i.track.mode?(n=t.g,o=!0):"hidden"===i.track.mode&&(n=t.g)}if(!o)for(i=(o=g(t.h)).next();!i.done;i=o.next()){var r=g(i.value);if(i=r.next().value,"showing"===(r=r.next().value).track.mode){n=i;break}n<0&&"hidden"===r.track.mode&&(n=i)}for(i=(o=g(t.h)).next();!i.done;i=o.next())i=(r=g(i.value)).next().value,r=r.next().value,i!==n&&"disabled"!==r.track.mode&&(r.track.mode="disabled");t.g!==n&&(t.g=n,n>-1&&t.i.mh({id:n})),t.i.rh(n>-1&&"showing"===t.h.get(n).track.mode)}}).ka(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}function Fc(e){var t=ae();return e.forced&&"WEBKIT"===t.Ea()?"forced":"caption"===e.kind||e.roles&&e.roles.some(function(e){return e.includes("transcribes-spoken-dialog")})&&e.roles.some(function(e){return e.includes("describes-music-and-sound")})?"captions":"subtitles"}function jc(e,t){for(pe("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,t=(e=g(Array.from(this.h.textTracks))).next();!t.done;t=e.next())"metadata"!==(t=t.value).kind&&"chapters"!==t.kind&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}function zc(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function $c(){}function Vc(t,n){var o=this;this.m=!1,this.h=[],this.j=t,this.o=n,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new To(function(){o.j.paused||Wc(o)}),Hc(this),this.l=new Map,this.i=new oe,this.i.D(document,"fullscreenchange",function(){Wc(o,!0)}),this.i.D(this.j,"seeking",function(){Wc(o,!0)}),this.i.D(this.j,"ratechange",function(){Hc(o)}),this.i.D(this.j,"resize",function(){var e=o.j,t=e.videoWidth;e=e.videoHeight,o.u=t&&e?t/e:null}),this.F=null,"ResizeObserver"in e&&(this.F=new ResizeObserver(function(){Wc(o,!0)}),this.F.observe(this.g)),this.G=new Map}function Hc(e){e.B&&(e.h.length?e.B.Fa((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function Gc(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function qc(e,t,n,o,i){for(var r=!1,s=[],a=[],l=(t=g(t)).next();!l.done;l=t.next()){l=l.value,i.push(l);var u=e.l.get(l),c=l.startTime<=o&&l.endTime>o,d=u?u.gj:null;u&&(s.push(u.kg),u.$c&&s.push(u.$c),c||(r=!0,e.l.delete(l),u=null)),c&&(a.push(l),u?Gc(e,d)||(r=!0):(Kc(e,l,i),d=(u=e.l.get(l)).gj,r=!0)),l.nestedCues.length>0&&d&&qc(e,l.nestedCues,d,o,i),i.pop()}if(r){for(i=(o=g(s)).next();!i.done;i=o.next())(i=i.value).parentElement&&i.parentElement.removeChild(i);for(a.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),o=(a=g(a)).next();!o.done;o=a.next())(o=e.l.get(o.value)).$c?(o.$c.contains(n)&&o.$c.removeChild(n),n.appendChild(o.$c),o.$c.appendChild(o.kg)):n.appendChild(o.kg)}}function Wc(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||void 0!==t&&t){for(var o=(t=g(e.G.values())).next();!o.done;o=t.next())ta(o.value);ta(e.g),e.l.clear(),e.G.clear()}e.m&&qc(e,e.h,e.g,n,[])}}function Kc(e,t,n){var o=n.length>1,i=o?"span":"div";t.lineBreak&&(i="br"),t.rubyTag&&(i=t.rubyTag),o=!o&&t.nestedCues.length>0;var r=document.createElement(i);if("br"!=i&&function(e,t,n,o,i){var r=t.style,s=0==n.nestedCues.length,a=o.length>1;r.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,function(e){return" ".repeat(e.length)});if(r.webkitTextStrokeColor=n.textStrokeColor,r.webkitTextStrokeWidth=n.textStrokeWidth,r.color=n.color,r.direction=n.direction,r.opacity=n.opacity,r.paddingLeft=Xc(n.linePadding,n,e.o),r.paddingRight=Xc(n.linePadding,n,e.o),r.textCombineUpright=n.textCombineUpright,r.textShadow=n.textShadow,n.backgroundImage)r.backgroundImage="url('"+n.backgroundImage+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",n.backgroundColor&&(r.backgroundColor=n.backgroundColor),r.width="100%",r.height="100%";else{if(n.nestedCues.length)var u=t;else u=document.createElement("span"),t.appendChild(u);n.border&&(u.style.border=n.border),i||((t=function(e,t){for(var n=e.length-1;n>=0;n--){var o=t(e[n]);if(o||0===o)return o}return null}(o,function(e){return e.backgroundColor}))?u.style.backgroundColor=t:l&&(u.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(u.setAttribute("translate","no"),u.textContent=l)}a&&!o[o.length-1].isContainer?r.display="inline":(r.display="flex",r.flexDirection="column",r.alignItems="center","left"==n.textAlign||"start"==n.textAlign?(r.width="100%",r.alignItems="start"):"right"!=n.textAlign&&"end"!=n.textAlign||(r.width="100%",r.alignItems="end"),r.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),s||(r.margin="0"),r.fontFamily=n.fontFamily,r.fontWeight=n.fontWeight.toString(),r.fontStyle=n.fontStyle,r.letterSpacing=n.letterSpacing,r.fontSize=Xc(n.fontSize,n,e.o,e.C?e.C.fontScaleFactor:1),null!=(o=n.line)&&((s=n.lineInterpretation)==Nn&&(s=1,a=16,e.u&&e.u<1&&(a=32),o=o<0?100+o/a*100:o/a*100),1==s&&(r.position="absolute",n.writingMode==On?(r.width="100%",n.lineAlign==Un?r.top=o+"%":"end"==n.lineAlign&&(r.bottom=100-o+"%")):"vertical-lr"==n.writingMode?(r.height="100%",n.lineAlign==Un?r.left=o+"%":"end"==n.lineAlign&&(r.right=100-o+"%")):(r.height="100%",n.lineAlign==Un?r.right=o+"%":"end"==n.lineAlign&&(r.left=100-o+"%")))),r.lineHeight=n.lineHeight,e=function(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Mn?n:"left"===e||"start"===e&&t===Dn||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===Dn?"line-right":"center"}(n),"line-left"==e?(r.cssFloat="left",null!==n.position&&(r.position="absolute",n.writingMode==On?(r.left=n.position+"%",r.width="auto"):r.top=n.position+"%")):"line-right"==e?(r.cssFloat="right",null!==n.position&&(r.position="absolute",n.writingMode==On?(r.right=100-n.position+"%",r.width="auto"):r.bottom=n.position+"%")):null!==n.position&&50!=n.position&&(r.position="absolute",n.writingMode==On?(r.left=n.position+"%",r.width="auto"):r.top=n.position+"%",n.size&&(r.transform="translateX(-50%)")),r.textAlign=n.textAlign,r.textDecoration=n.textDecoration.join(" "),r.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&r.writingMode==n.writingMode||(r.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==On?r.width=n.size+"%":r.height=n.size+"%")}(e,r,t,n,o),n=null,t.region&&t.region.id){var s=t.region,a=e.u===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==Rt?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==Rt?"%":"px"),e.G.has(n))n=e.G.get(n);else{i=document.createElement("span");var l=s.heightUnits==Rt?"%":"px",u=s.widthUnits==Rt?"%":"px",c=s.viewportAnchorUnits==Rt?"%":"px";i.id="shaka-text-region---"+n,i.classList.add("shaka-text-region"),i.style.position="absolute";var d=s.height,p=s.width;2===s.heightUnits&&(d=5.33*s.height,l="%"),2===s.widthUnits&&(p=s.width*a,u="%"),i.style.height=d+l,i.style.width=p+u,2===s.viewportAnchorUnits?(a=s.viewportAnchorY/75*100,l=s.viewportAnchorX/(e.u===4/3?160:210)*100,a-=s.regionAnchorY*d/100,l-=s.regionAnchorX*p/100,i.style.top=a+"%",i.style.left=l+"%"):(i.style.top=s.viewportAnchorY-s.regionAnchorY*d/100+c,i.style.left=s.viewportAnchorX-s.regionAnchorX*p/100+c),0!==s.heightUnits&&0!==s.widthUnits&&0!==s.viewportAnchorUnits&&(s=Math.max(0,Math.min(100-(parseInt(i.style.width.slice(0,-1),10)||0),parseInt(i.style.left.slice(0,-1),10)||0)),i.style.top=Math.max(0,Math.min(100-(parseInt(i.style.height.slice(0,-1),10)||0),parseInt(i.style.top.slice(0,-1),10)||0))+"%",i.style.left=s+"%"),i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.G.set(n,i),n=i}}i=r,o&&((i=document.createElement("span")).classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",r.appendChild(i)),e.l.set(t,{kg:r,gj:i,$c:n})}function Xc(e,t,n,o){o=void 0===o?1:o;var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;switch(e=i.unit,o*=i.value,e){case"%":return o/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*o/t.cellResolution.rows+"px";default:return o+e}}function Yc(e,t){this.g=t,this.j=e,this.F=new Map,this.l=void 0,this.C=!1,this.J=!0,this.o=this.I=!1,this.B=this.u=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.m={},this.i=new oe,this.G=[],this.h=null}function Jc(e){if(e.G)for(var t=g(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function Qc(e){return(e=e.g.targets)?e.filter(function(e){return e.mode===Bd&&e.enabled}):[]}function Zc(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:t.g.version,sf:t.l,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.j.getBandwidthEstimate()/1e3}}function ed(e,t,n){if(n=void 0===n?{}:n,t=ld(e,t=Object.assign({e:t,ts:Date.now()},n),Bd),n=e.g.targets,!(e.g.version<bd)&&n){var o=Qc(e);n=Array.from(new Set([].concat(y(Id),y(Rd))));for(var i=(o=g(o)).next();!i.done;i=o.next()){var r=od((i=i.value).includeKeys||[],n);r.includes(Dd)||r.push(Dd),r=id(t,r);var s=i.events||[],a=r.e,l=r.sta;a&&(!_d.includes(a)||!("ps"!==a||l&&Ld.includes(l))||s&&s.length>0&&!s.includes(a))||nd(e,r,i)}}}function td(e,t,n){if(e.g.enabled){n=ld(e,n,Nd);var o=rd({mode:Nd,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.m[o]||(e.m[o]={request:1,response:1}),n.sn=e.m[o].request++,function(e,t,n){if(n)e=cd(e),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=ud(e);o&&(t.uris=t.uris.map(function(e){return dd(e,o)}))}}(n=id(n,o=od(o=e.g.includeKeys||[],e.g.version==bd?Array.from(new Set([].concat(y(Id),y(Ed)))):Ad)),t,e.g.useHeaders)}}function nd(e,t,n,o){var i={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},r=n.url;if(n.useHeaders){if(t=cd(t),!Object.keys(t).length)return;o&&Object.assign(o.headers,t),o=Hi([r],i),Object.assign(o.headers,t)}else{if(!(t=ud(t)))return;r=dd(r,t),o&&(o.uri=r),o=Hi([r],i)}e.j.Wb().request(9,o)}function od(e,t){if(!e||0===e.length)return t;for(var n=g(e),o=n.next();!o.done;o=n.next())t.includes(o.value);return e.filter(function(e){return t.includes(e)})}function id(e,t){return Object.keys(e).reduce(function(n,o){return t.includes(o)&&(n[o]=e[o]),n},{})}function rd(e){var t=Object.keys(e).sort().reduce(function(t,n){return"enabled"!==n&&(t[n]=e[n]),t},{});return JSON.stringify(t)}function sd(e,t){if(!(t=e.j.Fc()[t]).length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):0}function ad(e,t,n){var o=t.segment,i=0;o&&(i=o.endTime-o.startTime),(i={d:1e3*i,st:e.j.W()?wd:xd}).ot=function(e){if(0===e.type)return gd;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?md:fd;if("audio"==t)return hd;if("text"==t)return"application/mp4"===e.mimeType?vd:yd}}(t);var r=i.ot===fd||i.ot===hd||i.ot===md||i.ot===vd;if(t=t.stream){var s=e.j.Pb();if(r&&(i.bl=function(e,t){if(!(t=e.j.Fc()[t]).length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}(e,t.type),i.ot!==vd)){var a=sd(e,t.type);i.dl=s?a/Math.abs(s):a}if(t.bandwidth&&(i.br=t.bandwidth/1e3),t.segmentIndex&&o){if((s=t.segmentIndex.Vb(o.endTime,!0,s<0))&&(s=s.next().value)&&s!=o){if(n&&!te(o.P(),s.P())){a=s.P()[0];var l=new URL(a);if(n=new URL(n),l.origin!==n.origin)n=a;else{for(a=l.pathname.split("/").slice(1),n=n.pathname.split("/").slice(1,-1);a[0]===n[0];)a.shift(),n.shift();for(;n.length;)n.shift(),a.unshift("..");n=a.join("/")}i.nor=n}!s.startByte&&!s.endByte||o.startByte==s.startByte&&o.endByte==s.endByte||(n=s.startByte+"-",s.endByte&&(n+=s.endByte),i.nrr=n)}n=e.j.Pb()||1,s=sd(e,t.type)||500,o=(t=t.bandwidth)?t*(o.endTime-o.startTime)/1e3/(s/n/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(o)||(i.rtp=o)}}return r&&i.ot!==vd&&(i.tb=function(e,t){var n=e.j.lc();if(!n.length)return NaN;e=n[0];for(var o=(n=g(n)).next();!o.done;o=n.next())"variant"===(o=o.value).type&&o.bandwidth>e.bandwidth&&(e=o);switch(t){case fd:return e.videoBandwidth||NaN;case hd:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,i.ot)/1e3),i}function ld(e,t,n){Object.assign(t,Zc(e)),t.pr=e.j.Pb();var o=t.ot===fd||t.ot===md;return e.I&&o&&(t.bs=!0,t.su=!0,e.I=!1),null==t.su&&(t.su=e.J),e.j.W()&&(o=vp(e.j),t.ltc=o||void 0),document.hidden&&(t.bg=!0),null==(o=e.B&&e.u?e.B-(e.H||e.u):void 0)||e.K[n]||(t.msd=o,e.K[n]=!0),t}function ud(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function o(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var i=[],r={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n,ttfb:n,ttlb:n},s=Object.keys(e||{}).sort(),a=(s=g(s)).next();!a.done;a=s.next()){var l=e[a=a.value];if(o(l)&&("v"!==a||1!==l)&&("pr"!=a||1!==l)){var u,c=r[a];c&&(l=c(l)),u="string"==(c=typeof l)&&"ot"!==a&&"sf"!==a&&"st"!==a?a+"="+JSON.stringify(l):"boolean"===c?a:"symbol"===c?a+"="+l.description:a+"="+l,i.push(u)}}return i.join(",")}function cd(e){for(var t=Object.keys(e),n={},o=["Object","Request","Session","Status"],i=[{},{},{},{}],r={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3},s=(t=g(t)).next();!s.done;s=t.next())i[null!=r[s=s.value]?r[s]:1][s]=e[s];for(e=0;e<i.length;e++)(r=ud(i[e]))&&(n["CMCD-"+o[e]]=r);return n}function dd(e,t){return!t||e.includes("offline:")?e:((e=new ye(e)).g.set("CMCD",t),e.toString())}(i=Bc.prototype).configure=function(){},i.remove=function(e,t){return!!this.i&&(this.h.has(this.g)&&Uc(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e}),!0)},i.append=function(e){this.h.has(this.g)&&Nc(this.h.get(this.g).track,e)},i.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},i.isTextVisible=function(){return this.u},i.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;"disabled"!==t.mode&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&3===this.i.m)if(t=Array.from(this.i.h.textTracks).filter(function(e){return["captions","subtitles","forced"].includes(e.kind)}),e){e=null;for(var n=(t=g(t)).next();!n.done;n=t.next()){if("showing"===(n=n.value).mode){e=null;break}e||"hidden"!==n.mode||(e=n)}e&&(e.mode="showing")}else for(t=(e=g(t)).next();!t.done;t=e.next())"showing"===(t=t.value).mode&&(t.mode="hidden")},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){!this.j&&this.i&&2===this.i.m&&(this.j=this.i.h,this.l.Aa(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())},$("shaka.text.NativeTextDisplayer",Bc),Bc.prototype.enableTextDisplayer=Bc.prototype.enableTextDisplayer,Bc.prototype.setTextLanguage=Bc.prototype.setTextLanguage,Bc.prototype.setTextVisibility=Bc.prototype.setTextVisibility,Bc.prototype.isTextVisible=Bc.prototype.isTextVisible,Bc.prototype.destroy=Bc.prototype.destroy,Bc.prototype.append=Bc.prototype.append,Bc.prototype.remove=Bc.prototype.remove,Bc.prototype.configure=Bc.prototype.configure,(i=jc.prototype).configure=function(){},i.remove=function(e,t){return!!this.g&&(Uc(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},i.append=function(e){this.g&&Nc(this.g,e)},i.destroy=function(){return this.g&&(Uc(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},i.isTextVisible=function(){return!!this.g&&"showing"==this.g.mode},i.setTextVisibility=function(e){e&&!this.g&&zc(this),this.g&&(this.g.mode=e?"showing":"hidden")},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){zc(this)},$("shaka.text.SimpleTextDisplayer",jc),jc.prototype.enableTextDisplayer=jc.prototype.enableTextDisplayer,jc.prototype.setTextLanguage=jc.prototype.setTextLanguage,jc.prototype.setTextVisibility=jc.prototype.setTextVisibility,jc.prototype.isTextVisible=jc.prototype.isTextVisible,jc.prototype.destroy=jc.prototype.destroy,jc.prototype.append=jc.prototype.append,jc.prototype.remove=jc.prototype.remove,jc.prototype.configure=jc.prototype.configure,(i=$c.prototype).configure=function(){},i.remove=function(){},i.append=function(){},i.destroy=function(){},i.isTextVisible=function(){return!1},i.setTextVisibility=function(){},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){},$("shaka.text.StubTextDisplayer",$c),$c.prototype.enableTextDisplayer=$c.prototype.enableTextDisplayer,$c.prototype.setTextLanguage=$c.prototype.setTextLanguage,$c.prototype.setTextVisibility=$c.prototype.setTextVisibility,$c.prototype.isTextVisible=$c.prototype.isTextVisible,$c.prototype.destroy=$c.prototype.destroy,$c.prototype.append=$c.prototype.append,$c.prototype.remove=$c.prototype.remove,$c.prototype.configure=$c.prototype.configure,(i=Vc.prototype).configure=function(e){this.C=e,Hc(this),Wc(this,!0)},i.append=function(e){for(var t=[].concat(y(this.h)),n=(e=g(Dc(e))).next(),o={};!n.done;o={jg:void 0},n=e.next())o.jg=n.value,t.some(function(e){return function(t){return kn(t,e.jg)}}(o))||this.h.push(o.jg);this.h.length&&Hc(this),Wc(this)},i.destroy=function(){return this.g?(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null),Promise.resolve()):Promise.resolve()},i.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(n){return n.startTime<e||n.endTime>=t}),Wc(this,n>this.h.length),this.h.length||Hc(this),!0},i.isTextVisible=function(){return this.m},i.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),Wc(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},i.setTextLanguage=function(e){e&&"und"!=e?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},i.enableTextDisplayer=function(){},$("shaka.text.UITextDisplayer",Vc),Vc.prototype.enableTextDisplayer=Vc.prototype.enableTextDisplayer,Vc.prototype.setTextLanguage=Vc.prototype.setTextLanguage,Vc.prototype.setTextVisibility=Vc.prototype.setTextVisibility,Vc.prototype.isTextVisible=Vc.prototype.isTextVisible,Vc.prototype.remove=Vc.prototype.remove,Vc.prototype.destroy=Vc.prototype.destroy,Vc.prototype.append=Vc.prototype.append,Vc.prototype.configure=Vc.prototype.configure,$("shaka.text.WebVttGenerator",function(){}),Yc.prototype.setMediaElement=function(t){this.h=t,function(t){t.i.D(t.h,"playing",function(){t.B||(t.B=Date.now()),ed(t,"ps",{dd:"p"})}),t.i.D(t.h,"volumechange",function(){ed(t,t.h.muted?"m":"um")}),t.i.D(t.h,"play",function(){t.u||(t.u=Date.now(),ed(t,"ps",{dd:"s"}))}),t.i.D(t.h,"pause",function(){ed(t,"ps",{dd:"a"})}),t.i.D(t.j,"buffering",function(){ed(t,"ps",{dd:"w"})}),t.i.D(t.h,"seeking",function(){return ed(t,"ps",{dd:"k"})}),t.i.D(document,"fullscreenchange",function(){ed(t,document.fullscreenElement?"pe":"pc")});var n=t.h;(n.webkitPresentationMode||n.webkitSupportsFullscreen)&&t.i.D(n,"webkitpresentationmodechanged",function(){n.webkitPresentationMode?ed(t,"inline"!==n.webkitPresentationMode?"pe":"pc"):n.webkitSupportsFullscreen&&ed(t,n.webkitDisplayingFullscreen?"pe":"pc")}),t.i.D(t.h,"enterpictureinpicture",function(){ed(t,"pe")}),t.i.D(t.h,"leavepictureinpicture",function(){ed(t,"pc")}),"documentPictureInPicture"in e&&t.i.D(e.documentPictureInPicture,"enter",function(e){ed(t,"pe"),t.i.Aa(e.window,"pagehide",function(){ed(t,"pc")})}),t.i.D(document,"visibilitychange",function(){document.hidden?ed(t,"b",{bg:!0}):ed(t,"b")}),t.i.D(t.j,"complete",function(){ed(t,"ps",{dd:"e"})})}(this)},Yc.prototype.configure=function(e){this.g=e,function(e){Jc(e);for(var t=Qc(e),n=(t=g(t)).next();!n.done;n=t.next())if(void 0===(n=n.value.timeInterval)&&(n=Pd),n>=1){var o=new To(function(){return ed(e,Od)});o.Fa(n),e.G.push(o)}}(this)};var pd="m",hd="a",fd="v",md="av",gd="i",yd="c",vd="tt",bd=2,xd="v",wd="l",Sd="d",Td="ld",kd="h",Cd="lh";$("shaka.util.CmcdManager.StreamingFormat",{DASH:Sd,Sl:Td,HLS:kd,Tl:Cd,im:"s",OTHER:"o"});var Ad="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),Id="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),Ed="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),Md="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),Rd=["e","sta"],_d="ps e t c b m um pe pc".split(" "),Ld="spawkrfeqd".split(""),Pd=10,Dd="ts",Od="t",Nd="request",Ud="response",Bd="event";function Fd(e){this.h=e,this.g=null}function jd(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}(i=Fd.prototype).configure=function(e){this.h=e},i.ci=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has($d)?1e3*this.g.get($d):null},i.ai=function(){return this.h.enabled&&this.g&&this.g.has(zd)?1e3*this.g.get(zd):null},i.Uj=function(){return this.h.enabled&&this.g&&this.g.has(Vd)?this.g.get(Vd):null},i.Vj=function(){return this.h.enabled&&this.g&&this.g.has(Hd)?this.g.get(Hd):null},i.getBandwidthEstimate=function(e){var t=this.ai();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e},$("shaka.util.CmsdManager",Fd),Fd.prototype.getBandwidthEstimate=Fd.prototype.getBandwidthEstimate,Fd.prototype.getRoundTripTime=Fd.prototype.Vj,Fd.prototype.getResponseDelay=Fd.prototype.Uj,Fd.prototype.getEstimatedThroughput=Fd.prototype.ai,Fd.prototype.getMaxBitrate=Fd.prototype.ci;var zd="etp",$d="mb",Vd="rd",Hd="rtt";function Gd(){this.g=null,this.h=[]}function qd(e,t){return D(function(n){if(1==n.g)return e.g?S(n,new Promise(function(t){return e.h.push(t)}),2):n.A(2);e.g=t,T(n)})}function Wd(t,n,o){n=void 0===n?null:n,Bi.call(this);var i=this;this.m=Qp,this.h=null,this.ve=n,this.$=!1,this.Ge=new oe,this.we=new oe,this.j=new oe,this.ac=new oe,this.xc=new oe,this.G=this.H=this.F=this.J=null,this.Ie=0,this.ma=new Gd,this.O=this.ba=this.X=this.i=this.uc=this.I=this.l=this.re=this.S=this.Lh=this.wa=this.K=this.ib=this.ya=this.se=this.R=this.Ga=this.M=this.ob=null,this.Sa=!1,this.Be=this.o=null,this.Ae=1e9,this.Fe=[],this.kb=[],this.Xf=-1,this.g=Sp(this),this.Zf={streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}},this.V=null,this.Je=-1,this.Zb=null,this.xa={width:1/0,height:1/0},this.ze=new Gr(this.g,this.xa,null),this.De=[],this.B=null,this.N=this.g.adaptationSetCriteriaFactory(),this.N.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.yc=this.g.preferredTextLanguage,this.Kd=this.g.preferredTextRole,this.ye=this.g.preferForcedSubs,this.xe=[],o&&o(this),this.K=new Yc(this,this.g.cmcd),this.wa=new Fd(this.g.cmsd),this.J=lp(this),this.Fd=this.oa=this.Da=this.C=null,this.ag=!1,this.Yf=[],this.$f=new To(function(){return D(function(e){return 1==e.g?i.oa?S(e,i.fc(i.Fd,!0),3):e.A(0):4!=e.g?S(e,i.load(i.oa),4):(i.ag?i.Fd.pause():i.Fd.play(),i.oa=null,i.ag=!1,void T(e))})}),oh&&(this.C=oh(),this.C.configure(this.g.ads),this.xc.D(this.C,"ad-content-pause-requested",function(e){var t;return D(function(n){if(1==n.g)return i.$f.stop(),i.oa?n.A(0):(i.Fd=i.h,i.ag=i.ae(),t=e.saveLivePosition||!1,S(n,i.Vh(!0,t),3));i.oa=n.h,T(n)})}),this.xc.D(this.C,"ad-content-resume-requested",function(e){if(e=e.offset||0,i.oa){var t=i.oa;t.m&&e&&("number"==typeof t.m?t.m+=e:t.m.setTime(t.m.getTime()+1e3*e))}i.$f.ka(.1)}),this.xc.D(this.C,"ad-content-attach-requested",function(){return D(function(e){return i.h||!i.Fd?e.A(0):S(e,i.fc(i.Fd,!0),0)})})),ih&&(this.Da=ih(this),this.Da.configure(this.g.queue)),this.Ge.D(e,"online",function(){$p(i),i.gh()}),this.Ce=new To(function(){for(var e=Date.now()/1e3,t=!1,n=!0,o=g(i.i.variants),r=o.next();!r.done;r=o.next())(r=r.value).disabledUntilTime>0&&r.disabledUntilTime<=e&&(r.disabledUntilTime=0,t=!0),r.disabledUntilTime>0&&(n=!1);n&&i.Ce.stop(),t&&Rp(i,!1,void 0,!1,!1)}),this.Ta=null,t&&(pe("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.fc(t,!0)),this.u=null}function Kd(e){null!=e.S&&(mt(e.S),e.S.release(),e.S=null)}function Xd(e,t){return new Oi(e,t)}function Yd(e,t){nh.set(e,t)}function Jd(e,t){e.dispatchEvent(Xd("onstatechange",(new Map).set("state",t)))}function Qd(e,t){var n;return D(function(o){return 1==o.g?(n=++e.Ie,S(o,qd(e.ma,t),2)):n!=e.Ie?(e.ma.release(),o.return(!0)):o.return(!1)})}function Zd(e,t){var n,o,i;return t=void 0!==t&&t,D(function(r){if(1==r.g)return n=null,e.i&&e.I&&e.uc&&e.X&&e.g?(o=e.h.currentTime,e.W()&&!t&&(o=null),S(r,tp(e,e.X,o,e.ba,e.g,!0,!1),3)):r.A(2);if(2!=r.g){n=r.h,e.De.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(i=e.l?e.l.o:null)&&(n.o=i);var s=n,a=e.I,l=e.uc;s.h=e.i,s.l=a,s.H=l,n.C=e.N,n.start(),e.i=null,e.I=null,e.uc=null,e.o=null,e.Be=null}return r.return(n)})}function ep(e,t,n,o,i,r){var s,a,l;return i=void 0!==i&&i,D(function(u){return 1==u.g?o?u.A(2):S(u,np(e,t),3):(2!=u.g&&(o=u.h),function(e,t){if(!qy(ae()))return!0;if(t){if(""==(e.h||na()).canPlayType(t))return!1;if(!qy(ae())||!ns.has(t))return!0;if(po(t))return"WEBKIT"===ae().Ea()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if("application/dash+xml"===t||"video/vnd.mpeg.dash.mpd"===t)return e.g.streaming.preferNativeDash}return!1}(e,o)?u.return(null):(s=r||e.g,a=!1,i&&e.h&&"AUDIO"===e.h.nodeName&&(a=!0),l=tp(e,t,n,o||null,s,!i,a),l=i?l.then(function(e){return e.F=!1,e}):l.then(function(t){return e.De.push(t),t}),u.return(l)))})}function tp(e,t,n,o,i,r,s){var a,l,u,c,d,p,h,f,m,y,v,b;return r=void 0===r||r,s=void 0!==s&&s,D(function(x){return 1==x.g?(a=null,l=jt(i),s&&(l.manifest.disableVideo=!0),u=function(){return a.R&&a.j?null:a},c=function(){return u()?u().getConfiguration():e.g},e.xa.width!=1/0||e.xa.height!=1/0||e.g.ignoreHardwareResolution?x.A(2):S(x,ae().jc(),3)):(2!=x.g&&(d=x.h,e.xa.width=d.width,e.xa.height=d.height),p=new Gr(l,e.xa,null),h={networkingEngine:e.J,filter:function(e){var t;return D(function(n){return 1==n.g?S(n,qr(p,e),2):4!=n.g?n.h?(t=Xd("trackschanged"),S(n,Promise.resolve(),4)):n.A(0):(a.dispatchEvent(t),void T(n))})},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,o=g(t.textStreams),i=o.next();!i.done;i=o.next())"application/cea-608"!=(i=i.value).mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(o=g(t.variants),i=o.next();!i.done;i=o.next())if((i=i.value.video)&&i.closedCaptions)for(var r=g(i.closedCaptions.keys()),s=r.next();!s.done;s=r.next())if(s=s.value,!n.has(s)){var a=s.startsWith("CC")?"application/cea-608":"application/cea-708",l=new Nl,u=i.closedCaptions.get(s);a={id:e.Ae++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:a,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:u,originalLanguage:u,label:null,type:ut,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([oo(a,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(a),n.add(s)}}(e,t)},onTimelineRegionAdded:function(e){Gl(a.I,e)},onEvent:function(e){return a.dispatchEvent(e)},onError:function(e){return a.onError(e)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},updateDuration:function(){e.l&&a.R&&e.l.updateDuration()},newDrmInfo:function(e){var t=a.i,n=t?t.g:null;n&&t.B&&Xr(p,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.W());a.dispatchEvent(Xd("manifestupdated",t)),hc(a,!1,function(){e.C&&e.C.onManifestUpdated(e.W())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(t,n,o,i){var r=t;"com.apple.hls.interstitial"!=t&&"com.apple.hls.overlay"!=t||(r="com.apple.quicktime.HLS",t={startTime:n,endTime:o,values:i},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,t)),t=(i=g(i)).next();for(var s={};!t.done;s={Zg:void 0},t=i.next())s.Zg=t.value,"ID"!=s.Zg.name&&hc(a,!1,function(t){return function(){ap(e,n,o,r,t.Zg)}}(s))},disableStream:function(t){return e.disableStream(t,e.g.streaming.maxDisabledTime)},addFont:function(t,n){return e.addFont(t,n)}},(f=new Hl(function(){return e.Va()})).addEventListener("regionadd",function(t){var n=t.region;Hp(e,"timelineregionadded",n,a),hc(a,!1,function(){e.C&&(e.C.onDashTimedMetadata(n),e.C.onDASHInterstitialMetadata(e,e.h,n))})}),m=null,l.streaming.observeQualityChanges&&((m=new zl(function(){return e.Fc()})).addEventListener("qualitychange",function(t){Gp(e,t.quality,t.position)}),m.addEventListener("audiotrackchange",function(t){Gp(e,t.quality,t.position,!0)})),y=!0,v={tc:e.J,onError:function(e){return a.onError(e)},uf:function(t){hc(a,!0,function(){e.F&&function(e,t){var n=Xd("keystatuschanged");e.dispatchEvent(n);var o=Object.keys(t);1==o.length&&""==o[0]&&(o=["00"],t={"00":t[""]});var i=1==o.length&&"00"==o[0];if(n=!1,o.length){o=e.keySystem();for(var r=tr(e.g.drm.clearKeys),s=function(n,o){n.allowedByKeySystem=!0;for(var r=(o=g(o)).next();!r.done;r=o.next())r=r.value,((r=t[i?"00":r])||e.F.M)&&(n.allowedByKeySystem=n.allowedByKeySystem&&!!r&&!Jr.includes(r))},a=g(e.i.variants),l=a.next();!l.done;l=a.next())for(var u=ri(l=l.value),c=(u=g(u)).next();!c.done;c=u.next()){c=c.value;var d=l.allowedByKeySystem;if(c.keyIds.size)if(c.drmInfos.length&&!r.size&&"HLS"==e.i.type)for(var p=g(c.drmInfos),h=p.next();!h.done;h=p.next())(h=h.value).keySystem==o&&(h.keyIds.size?s(l,h.keyIds):s(l,c.keyIds));else s(l,c.keyIds);d!=l.allowedByKeySystem&&(n=!0)}}n&&(Dp(e),!Ep(e))||(n=e.l.o)&&!n.allowedByKeySystem&&Rp(e)}(e,t)})},onExpirationUpdated:function(e,t){var n=Xd("expirationupdated");a.dispatchEvent(n),(n=a.l)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){a.dispatchEvent(t),"drmsessionupdate"==t.type&&y&&(y=!1,t=Date.now()/1e3-a.ya,(e.B||a.getStats()).m=t,e.S&&mt(e.S))}},b=lp(e,u),Vi(e.J,b),a=new pc(t,o,n,{config:l,xk:h,Ik:f,Hk:m,md:function(){return e.md(v)},wk:p,networkingEngine:b,jj:r}),x.return(a))})}function np(e,t){var n,o;return D(function(i){return 1==i.g?(n=e.g.manifest.retryParameters,S(i,Cc(t,e.J,n),2)):("application/x-mpegurl"==(o=i.h)&&"WEBKIT"===ae().Ea()&&(o="application/vnd.apple.mpegurl"),"video/quicktime"==o&&"CHROMIUM"===ae().Ea()&&(o="video/mp4"),i.return(o))})}function op(e,t){var n=e.g.textDisplayFactory;e.Kh!==n||void 0!==t&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):pe("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||pe("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch(function(){})):e.u.setTextVisibility(e.$),e.H&&function(e,t){e.ba=t,e.h&&(e.h.j=t)}(e.H,e.u),e.Kh=n,e.l&&function(e){var t=e.h.get(ut);t&&pu(e,t.stream,!0,0,!0)}(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function ip(e){var t,n,o;return D(function(i){if(1==i.g)return ae(),Jd(e,"media-source"),e.g.mediaSource.useSourceElements&&ea(e.h),op(e),t=function(e,t,n,o,i){return new La(e,t,n,i,o)}(e.h,e.u,{Kj:function(){return e.keySystem()},onMetadata:function(t,n,o){for(var i=(t=g(t)).next();!i.done;i=t.next())if((i=i.value).data&&"number"==typeof i.cueTime&&i.frames){var r=i.cueTime+n,s=o;s&&r>s&&(s=r);for(var a=g(i.frames),l=a.next();!l.done;l=a.next())ap(e,r,s,"org.id3",l.value);e.C&&e.C.onHlsTimedMetadata(i,r)}},Ck:function(t){e.ib&&Gl(e.ib,{schemeIdUri:t.schemeIdUri,startTime:t.startTime,endTime:t.endTime,id:String(t.id),emsg:t})},onEvent:function(t){return e.dispatchEvent(t)},Ek:function(){e.I&&e.I.update&&e.I.update()}},e.S,e.g.mediaSource),n=e.g.manifest,o=n.segmentRelativeVttTiming,t.Ga=o,S(i,t.M,2);e.H=t,T(i)})}function rp(e,t,n){function o(){return Cp(e)}if(e.j.D(t,"playing",o),e.j.D(t,"pause",o),e.j.D(t,"ended",o),e.j.D(t,"ratechange",function(){var t=e.h.playbackRate;0!=t&&(e.M&&(e.M.set(t),e.m==Zp&&e.o.playbackRateChanged(t),kp(e,t)),t=Xd("ratechange"),e.dispatchEvent(t))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&"connected"==t.remote.state&&Bp(e),Dp(e)}),e.j.D(t.remote,"connecting",function(){return Dp(e)}),e.j.D(t.remote,"disconnect",function(){return D(function(n){if(1==n.g)return e.l&&"disconnected"==t.remote.state?S(n,_u(e.l),3):n.A(2);2!=n.g&&Bp(e),Dp(e),T(n)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return Dp(e)}),e.j.D(t.audioTracks,"removetrack",function(){return Dp(e)}),e.j.D(t.audioTracks,"change",function(){return Dp(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return Dp(e)}),e.j.D(t.videoTracks,"removetrack",function(){return Dp(e)}),e.j.D(t.videoTracks,"change",function(){return Dp(e)})),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",function(){e.ve&&op(e,!0)}),t.textTracks){var i=function(){e.m===eh&&e.u instanceof Bc&&Bp(e),Dp(e)};e.j.D(t.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var n=g(t.activeCues),o=n.next();!o.done;o=n.next())o=o.value,ap(e,o.startTime,o.endTime,o.type,o.value),e.C&&e.C.onCueMetadataChange(o.value);if(t.cues){n=[];for(var i=(o=g(t.cues)).next(),r={};!i.done;r={Dc:void 0},i=o.next())r.Dc=i.value,"com.apple.quicktime.HLS"==r.Dc.type&&null!=r.Dc.startTime&&(i=n.find(function(e){return function(t){return t.startTime==e.Dc.startTime&&t.endTime==e.Dc.endTime}}(r)),i||(i={startTime:r.Dc.startTime,endTime:r.Dc.endTime,values:[]},n.push(i)),i.values.push(r.Dc.value));for(o=(n=g(n)).next();!o.done;o=n.next())(o=o.value).values.some(function(e){return"X-ASSET-URI"==e.key||"X-ASSET-LIST"==e.key})&&e.C&&(o.values.push({key:"CUE",description:"",data:0!=o.startTime||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,o))}});var n=new To(function(){for(var t=function(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}(e),n=(t=g(t)).next();!n.done;n=t.next())n.value.mode="hidden"}).Kb().ka(.5);e.xe.push(function(){n.stop()})}}(e,t);break;case"chapters":!function(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new To(function(){t.mode="hidden"}).Kb().ka(.5);e.xe.push(function(){n.stop()})}}(e,t);break;default:i()}}),e.j.D(t.textTracks,"removetrack",i),e.j.D(t.textTracks,"change",i)}"none"!=t.preload&&e.j.Aa(t,"loadedmetadata",function(){e.B.G=Date.now()/1e3-n})}function sp(e,t,n){t=(new Map).set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Xd(n,t))}function ap(e,t,n,o,i){e.ya&&((t={schemeIdUri:o,startTime:t,endTime:n||1/0,id:"",payload:i}).id=JSON.stringify(t),Gl(e.ya,t))}function lp(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function o(e){t()?hc(t(),!0,e):e()}t||(t=function(){return null});var i=new zi(function(t,n,i,r,s){o(function(){e.o&&e.o.segmentDownloaded(t,n,i,r,s)})},function(t,i,r){n(Xd("downloadheadersreceived",i=(new Map).set("headers",t).set("request",i).set("requestType",r))),o(function(){if(e.wa){var n=e.wa;if(n.h.enabled){var o=t["cmsd-static"];if(o)try{var i=new Map,r=o.split(",");for(o=0;o<r.length;o++){var s=r[o].split("=");i.set(s[0],jd(s[1]))}}catch(d){}if(i=t["cmsd-dynamic"]){e:{try{var a=new Map,l=i.split(";");for(i=1;i<l.length;i++){var u=l[i].split("=");a.set(u[0],jd(u[1]))}var c=a;break e}catch(d){c=null;break e}c=void 0}c&&(n.g=c)}}}})},function(e,t){n(Xd("downloadcompleted",e=(new Map).set("request",e).set("response",t)))},function(e,t,o,i){n(Xd("downloadfailed",e=(new Map).set("request",e).set("error",t).set("httpResponseCode",o).set("aborted",i)))},function(t,n,i){o(function(){if(e.K){var o=e.K,r=i;if(r=void 0===r?{}:r,o.g.enabled)if("HEAD"===n.method)td(o,n,{});else switch(t){case 0:try{if(o.g.enabled){if(r.type){e:{switch(r.type){case 4:var s=o.o?Td:Sd;break e;case 3:case 2:s=o.o?Cd:kd;break e;case 5:s="s";break e}s=void 0}o.l=s}td(o,n,{ot:pd,su:!o.C})}}catch(l){X("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",l)}break;case Xi:try{if(o.g.enabled){var a=ad(o,r,n.uris[0]);a.ts=Date.now(),o.F.set(n,a.ts),td(o,n,a)}}catch(l){X("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",l)}break;case 2:case 5:case 6:td(o,n,{ot:"k"});break;case 4:td(o,n,{ot:"o"})}}})},function(n,o,i,r){(n=t()?t().l:e.I)&&n.banLocation&&n.banLocation(r)},function(n,o,i){if(o.data){var r=o.data.byteLength,s=t()?t().getStats():e.B;if(s&&(cc(s,r),0===n&&(s.ni=r)),r=e.K,i=void 0===i?{}:i,n===Xi)try{var a=ad(r,i,o.uri);o.originalRequest&&null!=o.originalRequest.timeToFirstByte&&(a.ttfb=o.originalRequest.timeToFirstByte),null!=o.timeMs&&(a.ttlb=o.timeMs);var l=o.originalUri||o.uri;if(l.includes("CMCD="))try{var u=new URL(l);u.searchParams.delete("CMCD");var c=u.toString()}catch(d){c=l}else c=l;a.url=c,r.F.has(o.originalRequest)?(a.ts=r.F.get(o.originalRequest),r.F.delete(o.originalRequest)):a.ts||(a.ts=Date.now()),function(e,t,n){var o=e.g.targets;if(o){var i=o.filter(function(e){return e.mode===Ud&&!0===e.enabled});o=e.g.version==bd?Array.from(new Set([].concat(y(Id),y(Md)))):Ad,n.rc=t.status||0,n=ld(e,n,Ud),t.headers&&t.headers["CMSD-Static"]&&(n.cmsds=btoa(t.headers["CMSD-Static"])),t.headers&&t.headers["CMSD-Dynamic"]&&(n.cmsdd=btoa(t.headers["CMSD-Dynamic"]));for(var r=(i=g(i)).next();!r.done;r=i.next()){var s=od((r=r.value).includeKeys||[],o),a=rd(r);e.m[a]||(e.m[a]={request:1,response:1}),n.sn=e.m[a].response++,nd(e,s=id(n,s),r,t)}}}(r,o,a)}catch(d){X("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",d)}}});return i.configure(e.g.networking),i}function up(e,t,n){e.R=new zr,$r(e.R,Vr),cp(e),Tp(e),e.Ga=new To(function(){dp(e)}),e.g.streaming.rebufferingGoal&&e.Ga.Fa(.25),e.j.D(t,"waiting",function(){return dp(e,"waiting")}),e.j.D(t,"canplaythrough",function(){return dp(e,"canplaythrough")}),e.j.D(t,"playing",function(){return dp(e,"playing")}),e.j.D(t,"seeked",function(){return dp(e,"seeked")}),n&&(e.j.D(t,"stalled",function(){return dp(e,"stalled")}),e.j.D(t,"progress",function(){return dp(e,"progress")}),e.j.D(t,"timeupdate",function(){return dp(e,"timeupdate")}))}function cp(e){var t=e.g.streaming.rebufferingGoal;e.R.i.set(Hr,Math.min(.5,t/2)).set(Vr,t)}function dp(e,t){if(e.g.streaming.rebufferingGoal){t=!!e.H&&Ua(e.H),t=e.ae()||t||e.G.ki();var n=Ys(e.h.buffered,e.h.currentTime),o=e.R,i=o.i.get(o.g);$r(o,t||n>=i&&n>0?Hr:Vr)&&Tp(e)}else if(t){switch(n=void 0,t){case"seeking":case"waiting":n=Vr;break;case"canplaythrough":case"playing":case"seeked":n=Hr}void 0!==n&&$r(e.R,n)&&Tp(e)}}function pp(e,t){if(e.ze=new Gr(e.g,e.xa,e.F),e.I){var n=jt(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Jp&&Kr(e.ze,e.i)&&Dp(e)}catch(i){Vp(e,i)}e.o&&Ep(e),!(n=e.l.o)||n.allowedByApplication&&n.allowedByKeySystem||Rp(e)}if(e.J&&e.J.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Ga=e.g.manifest.segmentRelativeVttTiming),e.u&&op(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),jp(e)),e.R&&cp(e),e.Ga&&(e.g.streaming.rebufferingGoal?e.Ga.Fa(.25):e.Ga.stop()),e.i&&Wp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.wa&&e.wa.configure(e.g.cmsd),e.Da&&e.Da.configure(e.g.queue),e.m==Zp&&e.N.getConfiguration){n=e.N.getConfiguration();var o=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,o=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,o=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,o=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,o=!0),o&&(e.N.configure(n),Rp(e))}}function hp(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function fp(e,t){var n,o;return D(function(i){return 1==i.g?e.m!=Zp&&e.m!=eh?i.return(null):(n=e.Fe,e.i&&(n=e.i.imageStreams),(o=n[0])?(null!=t&&(o=n.find(function(e){return e.id==t})),o?o.segmentIndex?i.A(2):S(i,o.createSegmentIndex(),2):i.return(null)):i.return(null)):i.return(o)})}function mp(e,t,n,o){var i=t.width||0,r=t.height||0,s=i/o.columns,a=r/o.rows,l=o.columns*o.rows,u=e.j-e.startTime;u=e.B||u/l;var c=e.startTime,d=0,p=0;return l>1&&(p=Math.floor((n-e.startTime)/u),c=e.startTime+p*u,d=p%o.columns*s,p=Math.floor(p/o.columns)*a),o=!1,(n=e.thumbnailSprite)&&(o=!0,a=n.height,d=n.positionX,p=n.positionY,s=n.width),{segment:e,imageHeight:r,imageWidth:i,height:a,positionX:d,positionY:p,startTime:c,duration:u,uris:e.P(),startByte:e.Jc(),endByte:e.Gc(),width:s,sprite:o,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}function gp(e,t){e.j.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));for(var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},o=[],i=Array.from(t.activeCues||[]),r=(i=g(i)).next();!r.done;r=i.next()){if((r=r.value).endTime===1/0||r.endTime<r.startTime)r=null;else{var s=new Sn(r.startTime,r.endTime,r.text);s.line="number"==typeof r.line?r.line:null,r.lineAlign&&(s.lineAlign=r.lineAlign),s.lineInterpretation=r.snapToLines?Nn:1,s.position="number"==typeof r.position?r.position:null,r.positionAlign&&(s.positionAlign=r.positionAlign),s.size=r.size,s.textAlign=r.align,"lr"===r.vertical?s.writingMode="vertical-lr":"rl"===r.vertical&&(s.writingMode="vertical-rl"),r.region&&(s.region.id=r.region.id,s.region.height=r.region.lines,s.region.heightUnits=2,s.region.regionAnchorX=r.region.regionAnchorX,s.region.regionAnchorY=r.region.regionAnchorY,s.region.scroll=r.region.scroll,s.region.viewportAnchorX=r.region.viewportAnchorX,s.region.viewportAnchorY=r.region.viewportAnchorY,s.region.viewportAnchorUnits=Rt,s.region.width=r.region.width,s.region.widthUnits=Rt),Cn(s),r=s}r&&((s=e.g.mediaSource.modifyCueCallback)&&s(r,null,n),o.push(r))}e.u.append(o)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}function yp(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function vp(e){return e.h&&e.h.currentTime?(e=e.Ig().getTime()+1e3*e.h.currentTime,Math.floor(Date.now()-e)):null}function bp(e,t){var n;return D(function(o){switch(o.g){case 1:return k(o,2),S(o,Cc(t,e.J,e.g.streaming.retryParameters),4);case 4:n=o.h,A(o,3);break;case 2:I(o);case 3:if(n)return o.return(n);throw new je(1,2,2011,t)}})}function xp(e,t,n,o){var i,r,s;return D(function(a){if(1==a.g){i=Xi,(r=Hi([t],o)).method="GET";var l=e.K;try{l.g.enabled&&td(l,r,{ot:yd,su:!0})}catch(u){X("CMCD_TEXT_ERROR","Could not generate text CMCD data.",u)}return S(a,n.request(i,r).promise,2)}return s=a.h,a.return(s.data)})}function wp(e,t,n,o){var i=yo(n);if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ne(t),function(e,t){function n(e){for(var n=e,o=g(t),i=o.next();!i.done;i=o.next())(i=i.value).end&&i.start<e&&(n+=i.end-i.start);return((e=Math.floor(n/3600))<10?"0":"")+e+":"+((o=Math.floor(n/60%60))<10?"0":"")+o+":"+((i=Math.floor(n%60))<10?"0":"")+i+"."+((n=Math.floor(1e3*n%1e3))<100?n<10?"00":"0":"")+n}var o=Pc(e);e="WEBVTT\n\n";for(var i=(o=g(o)).next();!i.done;i=o.next())e+=n((i=i.value).startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case Rn:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}(t=n.parseMedia(t,e,null,[]),o);throw new je(2,2,2014,n)}function Sp(e){var t=Zu();return t.streaming.failureCallback=function(t){if(e.W()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.gh(n))}},t.textDisplayFactory=function(){if(e.ve){var t=e.h;t=!(t.webkitDisplayingFullscreen||t.webkitPresentationMode&&"inline"!=t.webkitPresentationMode)}else t=!1;return t?new Vc(e.h,e.ve):"track"in document.createElement("track")?new Bc(e):new $c},t}function Tp(e){var t=e.Og();if(e.B&&e.R&&e.G){if(0==e.g.streaming.rebufferingGoal){var n=e.M;n.j=!1,Bl(n)}else(n=e.M).j=t,Bl(n);if(e.K&&(n=e.K,t||n.C||(n.C=!0),n.C&&t&&(n.I=!0,ed(n,"ps",{dd:"r"})),n.J=t),Cp(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Je<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var o=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Je*i,n-o))}}t=(new Map).set("buffering",t),e.dispatchEvent(Xd("buffering",t))}function kp(e,t){e.ac.Qa(),e.ac.D(e.h,"timeupdate",function(){var n=e.h.currentTime,o=e.Va(),i=e.W(),r=i?e.g.streaming.safeSeekOffset:0;t>0?(!i||t>=1)&&Math.floor(n)>=Math.floor(o.end)&&e.Nd():Math.floor(n)<=Math.floor(o.start+r)&&e.Nd()})}function Cp(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==Vr?n="buffering":e.ae()?n="ended":e.h.paused&&(n="paused");var o=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:o,duration:0},t=!0;else{var i=Date.now()/1e3;t.g.duration=i-t.g.timestamp,t.g.state==o?t=!1:(t.h.push(t.g),t.g={timestamp:i,state:o,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Xd("statechanged",n)))}}function Ap(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var o=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,i=e.$h();i<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=o&&e.qe(o,!1):1==i&&t!==e.M.Tc()&&e.Nd()}if(n&&(n=e.Va(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){o=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var r=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,a=s+o,l=Math.max(0,s-o),u=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,null!=e.i.serviceDescription.targetLatency?a=e.i.serviceDescription.targetLatency+o:null!=e.i.serviceDescription.maxLatency&&(a=e.i.serviceDescription.maxLatency),null!=e.i.serviceDescription.targetLatency?l=Math.max(0,e.i.serviceDescription.targetLatency-o):null!=e.i.serviceDescription.minLatency&&(l=e.i.serviceDescription.minLatency),u=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||"number"!=typeof s||(e.V=s);var d=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;i&&e.Zb&&null!==e.V&&"number"==typeof s&&e.Je<d&&Date.now()-e.Zb>1e3*r&&(r=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(s-r)/2,r+o),e.Zb=Date.now()),i&&null!==e.V&&(a=e.V+o,l=e.V-o),s=n.end-e.h.currentTime,o=0,e.m==eh&&(i=e.h.buffered).length>0&&(o=i.end(i.length-1),o=Math.max(u,o-n.end)),n=e.g.streaming.liveSync.panicMode,i=1e3*e.g.streaming.liveSync.panicThreshold,r=Date.now()-e.R.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&r<=i?t!=c&&e.qe(c,!1):null!=a&&u&&s-o>a?(t!=u&&e.qe(u,!1),e.Zb=null):null!=l&&c&&s-o<l?(t!=c&&e.qe(c,!1),e.Zb=null):t!==e.M.Tc()&&(e.Nd(),e.Zb=Date.now())}}function Ip(e){if(e.h){var t=function(t,n){var o=void 0===o?Number.EPSILON:o;if(t===n)o=!0;else{var i=Math.abs(t-n);o=i<=o||o!==Number.EPSILON&&Math.abs(i-o)<=Number.EPSILON}return!!((o||n>t)&&e.Xf<t)&&(e.Xf=t,!0)},n=e.Va();if(n=(n=n.end-n.start)>0?e.h.currentTime/n:0,!isNaN(n)){if(t(0,n*=100))var o=Xd("started");else t(25,n)?o=Xd("firstquartile"):t(50,n)?o=Xd("midpoint"):t(75,n)?o=Xd("thirdquartile"):((t(100,n)||n>100)&&(o=Xd("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.ae()&&e.h.pause());o&&e.dispatchEvent(o)}}}function Ep(e){try{Yr(e.ze,e.i)}catch(n){return Vp(e,n),!1}var t=ni(e.i.variants);return t=e.N.create(t),"boolean"!=typeof(e=e.o.setVariants(Array.from(t.values())))||e}function Mp(e,t){return t=void 0!==t&&t,Ep(e)?e.o.chooseVariant(t):null}function Rp(e,t,n,o,i){t=void 0===t||t,n=void 0===n?0:n,o=void 0!==o&&o,i=void 0===i||i;var r=Mp(e);r&&_p(e,r,i,t,n,o)}function _p(e,t,n,o,i,r){r=void 0!==r&&r;var s=e.l.o;if(t==s)o&&cu(e.l,t,o,i,!0);else{var a=e.B.h;if(a.h!=t&&(a.h=t,a.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),cu(e.l,t,o,i,r,n),o=null,s&&(o=Xo(s)),(s=Xo(t)).active=!0,e.S&&(i=e.S,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),r=0,a=-1,t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(e.bi()){case"DASH":a=1;break;case"HLS":a=0}i.g&&(i.g.setLevelSwitching(t.id,!0),i.g.setContainerFormat(r),i.j||i.g.setStreamingFormat(a))}n?Kp(e,n=Xd("adaptation",n=(new Map).set("oldTrack",o).set("newTrack",s))):Op(e,o,s),Np(e,o,s)}}function Lp(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var o=Pp(e);Op(e,n=ei(n,o),t=ei(t,o)),Np(e,n,t)}}function Pp(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(e){return e.selected}):null}function Dp(e){Kp(e,Xd("trackschanged")),Up(e)}function Op(e,t,n){Kp(e,t=Xd("variantchanged",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function Np(e,t,n){var o=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(o=!0),o&&Up(e)}function Up(e){Kp(e,Xd("audiotrackschanged"))}function Bp(e){Kp(e,Xd("textchanged"))}function Fp(e){Kp(e,Xd("texttrackvisibility"))}function jp(e){e.g.abr.enabled||$p(e),Kp(e,Xd("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function zp(e){var t=e.Lc().find(function(e){return e.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function $p(e,t){if(t=void 0===t||t,e.m==Zp){e.Ce.stop();for(var n=g(e.i.variants),o=n.next();!o.done;o=n.next())o.value.disabledUntilTime=0;t&&Ep(e)}}function Vp(e,t){var n,o,i,r;return D(function(s){switch(s.g){case 1:if(e.m==Jp)return s.return();if(1===t.severity&&e.B.M++,n=!0,!(e.Sa&&e.i&&e.l)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3024!=t.code&&3018!=t.code){s.A(2);break}return"WEBKIT"===ae().Ea()&&3016==t.code?s.return():(k(s,3),S(s,_u(e.l),5));case 5:o=s.h,n=!o,o&&(i=Xd("mediasourcerecovered"),e.dispatchEvent(i)),A(s,2);break;case 3:I(s),n=!0;case 2:if(!n)return s.return();2===t.severity&&$p(e,!1),r=Xd("error",(new Map).set("detail",t)),e.dispatchEvent(r),r.defaultPrevented&&(t.handled=!0),T(s)}})}function Hp(e,t,n,o){o=void 0===o?e:o,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),o.dispatchEvent(Xd(t,e))}function Gp(e,t,n,o){o=void 0!==o&&o,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Xd(o?"audiotrackchanged":"mediaqualitychanged",t))}function qp(e,t){if(t=void 0===t||t,!e.h.error)return t?new je(2,3,3016):null;var n=e.h.error.code;return t||1!=n?((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new je(2,3,3016,n,t,e.h.error.message)):null}function Wp(e,t,n){t>0&&(e.W()||e.Si(t)),n<(t=e.getDuration())&&(e.W()||e.rb(n))}function Kp(e,t){D(function(n){if(1==n.g)return S(n,Promise.resolve(),2);e.m!=Jp&&e.dispatchEvent(t),T(n)})}function Xp(e){for(var t=new Set,n=(e=g(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Lo(n.language)):t.add("und");return t}function Yp(e){for(var t=new Map,n=new Map,o=0;o<e.length;o++){var i=e[o],r="und",s=[];i.language&&(r=Lo(i.language)),(s="variant"==i.type?i.audioRoles:i.roles)&&s.length||(s=[""]),t.has(r)||t.set(r,new Set);for(var a=(s=g(s)).next();!a.done;a=s.next())a=a.value,t.get(r).add(a),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(a,i.label))}var l=[];return t.forEach(function(e,t){for(var o=(e=g(e)).next();!o.done;o=e.next()){o=o.value;var i=null;n.has(t)&&n.get(t).has(o)&&(i=n.get(t).get(o)),l.push({language:t,role:o,label:i})}}),l}Gd.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null},f(Wd,Bi),(i=Wd.prototype).destroy=function(){var e,t=this;return D(function(n){switch(n.g){case 1:return t.m==Jp?n.return():(Kd(t),e=t.detach(),t.m=Jp,S(n,e,2));case 2:return S(n,t.ng(),3);case 3:if(t.Ge&&(t.Ge.release(),t.Ge=null),t.we&&(t.we.release(),t.we=null),t.j&&(t.j.release(),t.j=null),t.ac&&(t.ac.release(),t.ac=null),t.xc&&(t.xc.release(),t.xc=null),t.Be=null,t.g=null,t.B=null,t.ve=null,t.K=null,t.wa=null,!t.J){n.A(4);break}return S(n,t.J.destroy(),5);case 5:t.J=null;case 4:t.o&&(t.o.release(),t.o=null),t.Da&&(t.Da.destroy(),t.Da=null),Bi.prototype.release.call(t),T(n)}})},i.fc=function(e,t){t=void 0===t||t;var n,o,i,r=this;return D(function(s){switch(s.g){case 1:if(r.m==Jp)throw new je(2,7,7e3);if(n=r.h&&r.h==e,!r.h||r.h==e){s.A(2);break}return S(s,r.detach(),2);case 2:return S(s,Qd(r,"attach"),4);case 4:if(s.h)return s.return();if(k(s,5,6),n||(Jd(r,"attach"),o=function(){var e=qp(r,!1);e&&Vp(r,e)},r.we.D(e,"error",o),r.h=e,r.K&&r.K.setMediaElement(e)),ae(),!t||!qy()||r.H){s.A(6);break}return S(s,ip(r),6);case 6:E(s),r.ma.release(),M(s,0);break;case 5:return i=I(s),S(s,r.detach(),10);case 10:throw i}})},i.kj=function(e){this.Lh=e},i.detach=function(e){e=void 0!==e&&e;var t=this;return D(function(n){if(1==n.g){if(t.m==Jp)throw new je(2,7,7e3);return S(n,t.Bc(!1,e),2)}if(3!=n.g)return S(n,Qd(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.we.Qa(),t.h=null),Jd(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ma.release()}T(n)})},i.Bc=function(t,n){t=void 0===t||t,n=void 0!==n&&n;var o,i,r,s,a,l,u,c,d,p,h,f,m,y=this;return D(function(v){switch(v.g){case 1:return y.m!=Jp&&(y.m=Qp),S(v,Qd(y,"unload"),2);case 2:return v.h?v.return():(C(v,3),y.Sa=!1,Jd(y,"unload"),Kd(y),o=y.xe.map(function(e){return e()}),y.xe=[],S(v,Promise.all(o),5));case 5:if(y.dispatchEvent(Xd("unloading")),y.se&&(y.se.release(),y.se=null),y.ya&&(y.ya.release(),y.ya=null),y.ib&&(y.ib.release(),y.ib=null),y.h&&(y.j.Qa(),y.ac.Qa()),y.Ce.stop(),y.ob&&(y.ob.release(),y.ob=null),y.Ga&&(y.Ga.stop(),y.Ga=null),!y.I){v.A(6);break}return S(v,y.I.stop(),7);case 7:y.I=null,y.uc=null;case 6:if(y.o&&y.o.stop(),!y.l){v.A(8);break}return S(v,y.l.destroy(),9);case 9:y.l=null;case 8:if(y.M&&(y.M.release(),y.M=null),y.G&&(y.G.release(),y.G=null),"webkit"!==e.shakaMediaKeysPolyfill||!y.F){v.A(10);break}return S(v,y.F.destroy(),11);case 11:y.F=null;case 10:if(!y.H){v.A(12);break}return S(v,y.H.destroy(),13);case 13:y.H=null;case 12:if(y.C&&!n&&y.C.onAssetUnload(),y.oa&&!n&&(y.oa.destroy(),y.oa=null),n||y.$f.stop(),y.K&&function(e){e.F.clear(),e.C=!1,e.J=!0,e.I=!1,e.o=!1,e.u=0,e.B=0,e.H=0,e.K={request:!1,response:!1,event:!1},Jc(e),e.m={},e.h=null,e.i.Qa()}(y.K),y.wa&&(y.wa.g=null),!y.u){v.A(14);break}return S(v,y.u.destroy(),15);case 15:y.u=null;case 14:if(y.$=!1,y.h){for(i=g(y.Yf),r=i.next();!r.done;r=i.next())(s=r.value).src.startsWith("blob:")&&URL.revokeObjectURL(s.src),s.remove();y.Yf=[],ea(y.h)&&y.h.load()}if(!y.F){v.A(16);break}return S(v,y.F.destroy(),17);case 17:y.F=null;case 16:if(y.Ta&&y.X!=y.Ta.rd()&&(y.Ta.j||y.Ta.destroy(),y.Ta=null),y.X=null,y.ba=null,y.R=null,y.i){for(a=g(y.i.variants),l=a.next();!l.done;l=a.next())for(u=l.value,c=g([u.audio,u.video]),d=c.next();!d.done;d=c.next())(p=d.value)&&p.segmentIndex&&p.segmentIndex.release();for(h=g(y.i.textStreams),f=h.next();!f.done;f=h.next())(m=f.value).segmentIndex&&m.segmentIndex.release()}y.g&&y.g.streaming.clearDecodingCache&&(ci.clear(),ki.clear()),y.i=null,y.B=new lc,y.Kh=null,y.Zb=null,y.V=null,y.Je=-1,y.Fe=[],y.kb=[],y.Xf=-1,y.J&&y.J.Rh(),Tp(y);case 3:E(v),y.ma.release(),M(v,4);break;case 4:if(ae(),t&&qy()&&!y.H&&y.h)return S(v,ip(y),0);v.A(0)}})},i.ll=function(e){this.O=e},i.load=function(t,n,o){n=void 0===n?null:n;var i,r,s,a,l,u,c,d,p,h,f,m,y,v,b=this;return D(function(x){switch(x.g){case 1:if(b.m==Jp)throw new je(2,7,7e3);if(i=null,r="",t instanceof pc){if(t.j)throw new je(2,7,7006);r=(i=t).rd()||""}else r=t||"";return S(x,qd(b.ma,"load"),2);case 2:if(b.ma.release(),!b.h)throw new je(2,7,7002);if(!b.X){x.A(3);break}return b.X=r,S(x,b.Bc(!1),3);case 3:if(s=++b.Ie,a=function(){return D(function(e){if(1==e.g)return b.Ie==s?e.A(0):i?S(e,i.destroy(),3):e.A(3);throw new je(2,7,7e3)})},l=function(e,t){return D(function(n){switch(n.g){case 1:return C(n,2),S(n,qd(b.ma,t),4);case 4:return S(n,a(),5);case 5:return S(n,e(),6);case 6:return S(n,a(),7);case 7:i&&b.g&&(i.g=b.g);case 2:E(n),b.ma.release(),M(n,0)}})},k(x,5,6),null==n&&i&&(n=i.getStartTime()),b.O=n,b.Sa=!1,b.dispatchEvent(Xd("loading")),i){o=i.V,x.A(8);break}if(o){x.A(8);break}return S(x,l(function(){return D(function(e){if(1==e.g)return S(e,np(b,r),2);o=e.h,T(e)})},"guessMimeType_"),8);case 8:if(u=!!i,i){fc(i,b),b.B=i.getStats(),x.A(11);break}return S(x,ep(b,r,n,o,!0,b.g),12);case 12:(i=x.h)?(i.F=!1,fc(i,b),b.B=i.getStats(),i.start(),i.B.catch(function(){})):b.B=new lc;case 11:return c=!i,d=Date.now()/1e3,b.B=i?i.getStats():new lc,b.X=r,b.ba=o||null,Tp(b),p=function(){var e=b.h?b.h.buffered:null;return{start:Ws(e)||0,end:Ks(e)||0}},b.ya=new Hl(p),b.ya.addEventListener("regionadd",function(e){sp(b,e.region,"metadataadded")}),c?S(x,l(function(){return D(function(e){return S(e,function(e,t){var n,o,i;return D(function(r){return 1==r.g?(n=Date.now()/1e3,o=!0,e.F=e.md({tc:e.J,onError:function(t){Vp(e,t)},uf:function(){},onExpirationUpdated:function(){var t=Xd("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&o&&(o=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),i=ui([t]),e.F.O=!0,S(r,xr(e.F,[i],[]),2)):S(r,e.F.fc(e.h),0)})}(b,o),0)})},"initializeSrcEqualsDrmInner_"),23):(b.ib=new Hl(p),S(x,l(function(){return D(function(e){if(1==e.g)return S(e,Promise.race([i.ma,i.B]),2);b.uc=i.H;var t=i;t.oa=!0,b.I=t.l,b.i=i.Hg(),T(e)})},"waitForFinish"),15));case 15:if(b.H){x.A(16);break}return S(x,l(function(){return D(function(e){return S(e,ip(b),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return b.i&&b.i.textStreams.length&&(b.u.enableTextDisplayer?b.u.enableTextDisplayer():pe("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),S(x,l(function(){return D(function(e){return S(e,i.B,0)})},"waitForFinish"),18);case 18:if(b.g=i.getConfiguration(),b.ze=i.G,b.I&&b.I.setMediaElement&&b.h&&b.I.setMediaElement(b.h),b.se=function(e){return e.wa=!0,e.I}(i),b.re=i.Ga,(h=i.C)&&(b.N=h),u&&b.h&&"AUDIO"===b.h.nodeName&&(function(e){for(var t=g(e.i.variants),n=t.next();!n.done;n=t.next())(n=n.value).video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(e){return e.audio})}(b),b.configure("manifest.disableVideo",!0)),i.i){x.A(19);break}return S(x,l(function(){return D(function(e){return S(e,yc(i,b.h),0)})},"drmEngine_.init"),19);case 19:return b.F=function(e){return e.ba=!0,e.i}(i),S(x,l(function(){return D(function(e){return S(e,b.F.fc(b.h),0)})},"drmEngine_.attach"),21);case 21:return f=b.g.abrFactory,b.o&&b.Be==f||(b.Be=f,b.o&&b.o.release(),b.o=f(),"function"!=typeof b.o.setMediaElement&&(pe("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),b.o.setMediaElement=function(){}),"function"!=typeof b.o.setCmsdManager&&(pe("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),b.o.setCmsdManager=function(){}),"function"!=typeof b.o.trySuggestStreams&&(pe("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),b.o.trySuggestStreams=function(){}),b.o.configure(b.g.abr)),m=function(e){return e.xa=!0,e.M}(i),y=i.o,S(x,l(function(){return D(function(t){return S(t,function(t,n,o,i){var r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w,k,C,A,I,E,M,R,_,L,P,O;return D(function(N){switch(N.g){case 1:Jd(t,"load"),r=t.h,t.M=new Ul({Xe:function(){return r.playbackRate},Tc:function(){return r.defaultPlaybackRate},qh:function(e){r.playbackRate=e},ui:function(e){r.currentTime+=e}}),rp(t,r,n),"onchange"in e.screen&&t.j.D(e.screen,"change",function(){if(t.N.getConfiguration){var e=t.N.getConfiguration();"AUTO"==e.hdrLevel?Ep(t):"AUTO"==t.g.preferredVideoHdrLevel&&t.g.abr.enabled&&(e.hdrLevel="AUTO",t.N.configure(e),Ep(t))}}),s=!1,a=g(t.i.variants);for(l=a.next();!l.done;l=a.next())u=l.value,(c=u.video&&u.video.dependencyStream)&&(s=gt(c));!function(e,t,n){n||t.lcevc.enabled?(Kd(e),null==e.S&&(e.S=new ht(e.h,e.Lh,t.lcevc,n),e.H&&(e.H.H=e.S))):Kd(e)}(t,t.g,s),t.yc=t.g.preferredTextLanguage,t.Kd=t.g.preferredTextRole,t.ye=t.g.preferForcedSubs,Wp(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),t.o.init(function(e,n,o){t.i&&t.l&&e!=t.l.o&&_p(t,e,!0,void 0!==n&&n,void 0===o?0:o)}),t.o.setMediaElement(r),t.o.setCmsdManager(t.wa),t.l=function(e){return new lu(e.i,{Hc:function(){return e.G?e.G.He():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Pb:function(){return e.Pb()},video:e.h,Z:e.H,tc:e.J,onError:function(t){return Vp(e,t)},onEvent:function(t){return e.dispatchEvent(t)},vf:function(t,n,o){var i=t.startTime,r=t.endTime,s=n.type;if(s!=ut){if(e.G){e.G.xi();var a=Fa(e.H,s);!e.W()&&e.h.paused&&!e.h.seeking&&null!=a&&a>0&&e.G.He()<a&&e.G.Wf(a)}dp(e)}o=(new Map).set("start",i).set("end",r).set("contentType",s).set("isMuxed",o),e.dispatchEvent(Xd("segmentappended",o)),e.o&&n.fastSwitching&&t.Xc&&t.ce&&e.o.trySuggestStreams()},Dk:function(t,n){(n=n.xd)&&e.re&&function(e,t,n){var o=function(e,t){var n=e.g.get(t);return n||(n={ke:[],lg:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,o=e[e.length-1].end,i=t.ke;t.ke=i.filter(function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=o)})}else t.ke=[]}(e,o),e={xd:t,position:n},(t=(o=o.ke).findIndex(function(e){return e.position>=n}))>=0?o.splice(t,o[t].position==n?1:0,e):o.push(e)}(e.re,n,t)},Ph:function(t,n){var o=e.F;if(o.h.parseInbandPsshEnabled&&!o.M&&["audio","video"].includes(t)){t=new yr(Ne(n)),n=0;for(var i=g(t.data),r=i.next();!r.done;r=i.next())n+=r.value.length;if(0==n)o=Promise.resolve();else{for(n=new Uint8Array(n),i=0,r=(t=g(t.data)).next();!r.done;r=t.next())r=r.value,n.set(r,i),i+=r.length;kr(o,"cenc",n),o=o.m}}else o=Promise.resolve();return o},disableStream:function(t,n){return e.disableStream(t,n)},cl:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.ce)}})}(t),t.l.configure(t.g.streaming),t.m=Zp,t.dispatchEvent(Xd("streaming")),d=o;case 2:for((h=t.l.o)||d||(d=Mp(t,!0)),f=[],m=g([(p=h||d).video,p.audio]),y=m.next();!y.done;y=m.next())(v=y.value)&&!v.segmentIndex&&(f.push(v.createSegmentIndex()),v.dependencyStream&&f.push(v.dependencyStream.createSegmentIndex()));if(!(f.length>0)){N.A(4);break}return S(N,Promise.all(f),4);case 4:if(!p||0!=p.disabledUntilTime){N.A(2);break}if(t.I&&t.I.onInitialVariantChosen&&t.I.onInitialVariantChosen(p),t.i.isLowLatency&&(t.g.streaming.lowLatencyMode?t.configure(t.Zf):K("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),t.K&&(function(e,t){e.o=t,e.o?e.l==Sd?e.l=Td:e.l==kd&&(e.l=Cd):e.l==Td?e.l=Sd:e.l==Cd&&(e.l=kd)}(t.K,t.i.isLowLatency&&t.g.streaming.lowLatencyMode),function(e,t){if(e.g&&e.g.enabled&&(ed(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then(function(){e.H=t}).catch(function(){e.H=0})}}(t.K,1e3*n)),Wp(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),function(e,t,n){e.j.presentationTimeline.W()||(e.ba=t,e.$=n)}(t.l,t.g.playRangeStart,t.g.playRangeEnd),t.Sa=!0,t.dispatchEvent(Xd("canupdatestarttime")),b=function(e){t.G=function(e,t){return new Il(e.h,e.i,e.g.streaming,t,function(){e.ob&&jl(e.ob,!e.G.Ih()),e.l&&e.l.bd(),e.R&&dp(e,"seeking")},function(t){return e.dispatchEvent(t)})}(t,e),t.ob=function(e,t){var n=e.W()||"number"==typeof t&&t>0;(t=new xc(e.se,n)).addEventListener("enter",function(t){Hp(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){Hp(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(Hp(e,"timelineregionenter",n),Hp(e,"timelineregionexit",n))});var o=new xc(e.ya,n);o.addEventListener("enter",function(t){sp(e,t.region,"metadata")}),(n=new xc(e.ib,n)).addEventListener("enter",function(t){t=(new Map).set("detail",t.region.emsg),e.dispatchEvent(Xd("emsg",t))});var i=new Fl(e.h);return i.g.add(t),i.g.add(o),i.g.add(n),e.re&&i.g.add(e.re),i}(t,e),up(t,r,!1)},t.g.streaming.startAtSegmentBoundary||(null==(x=t.O)&&t.i.startTime&&(x=t.i.startTime),b(x)),h){N.A(7);break}if(!t.g.streaming.startAtSegmentBoundary){N.A(8);break}return w=t.i.presentationTimeline,t.O instanceof Date&&(C=w.m||w.i,null!=(A=t.O.getTime()/1e3-C)&&(k=A)),null==k&&(k="number"==typeof t.O?t.O:t.h.currentTime),null==t.O&&t.i.startTime&&(k=t.i.startTime),I=w.Xb(),E=w.Hb(),k<I?k=I:k>E&&(k=E),S(N,function(e,t){var n,o,i,r,s;return D(function(a){return 1==a.g?(n=e.audio,o=e.video,i=function(e,t){var n,o,i;return D(function(r){return 1==r.g?e?e.segmentIndex?r.A(2):S(r,e.createSegmentIndex(),2):r.return(null):(o=(n=e.segmentIndex.Vb(t))?n.next().value:null)?(i=o.startTime,r.return(i)):r.return(null)})},S(a,i(n,t),2)):3!=a.g?(r=a.h,S(a,i(o,t),3)):null!=(s=a.h)&&null!=r?a.return(Math.max(s,r)):null!=s?a.return(s):null!=r?a.return(r):a.return(t)})}(d,k),9);case 9:M=N.h,b(M);case 8:_p(t,d,!0,!1,0);case 7:return t.G.ready(),t.Lc().find(function(e){return e.active})||((R=oi(t.i.textStreams,t.yc,t.Kd,t.ye)[0]||null)&&ac(t.B.h,R,!0),d&&(R?(li(d.audio,R,t.g)&&(t.$=!0),t.$&&t.u.setTextVisibility(!0)):(t.$=!1,t.u.setTextVisibility(!1)),Fp(t)),R&&(t.g.streaming.alwaysStreamText||t.Pg())&&(du(t.l,R),zp(t))),S(N,t.l.start(i),10);case 10:t.g.abr.enabled&&(t.o.enable(),jp(t)),Dp(t),Ep(t),t.i.variants.some(function(e){return e.primary}),((_=t.W())&&(t.g.streaming.liveSync&&t.g.streaming.liveSync.enabled||t.i.serviceDescription||t.g.streaming.liveSync.panicMode)||t.g.streaming.vodDynamicPlaybackRate)&&(L=function(){return Ap(t)},t.j.D(r,"timeupdate",L)),_||(P=function(){return Ip(t)},t.j.D(r,"timeupdate",P),Ip(t),t.i.nextUrl&&(t.g.streaming.preloadNextUrlWindow>0&&(O=function(){var e;return D(function(n){if(1==n.g)return e=t.Va().end-t.h.currentTime,!isNaN(e)&&e<=t.g.streaming.preloadNextUrlWindow?(t.j.Ma(r,"timeupdate",O),S(n,t.preload(t.i.nextUrl),4)):n.A(0);t.Ta=n.h,T(n)})},t.j.D(r,"timeupdate",O)),t.j.D(r,"ended",function(){t.load(t.Ta||t.i.nextUrl)}))),t.C&&t.C.onManifestUpdated(_),T(N)}})}(b,d,y,m),0)})},"loadInner_"),22);case 22:!function(e){if(e.J)for(var t=g(e.J),n=t.next();!n.done;n=t.next())(n=n.value)();e.J=null}(i),b.ba&&ae().aj()&&po(b.ba)&&function(t,n,o){t.g&&e.ManagedMediaSource&&t.i&&t.B.useSourceElements&&(t.C&&t.g.removeChild(t.C),t.C=Zs(n,o),t.g.appendChild(t.C),t.g.disableRemotePlayback=!1)}(b.H,b.X,b.ba),x.A(14);break;case 23:return S(x,l(function(){return D(function(e){return S(e,function(e,t,n){var o,i,r,s,a,l,u,c,d,p,h,f;return D(function(m){switch(m.g){case 1:if(Jd(e,"src-equals"),o=e.h,e.G=new kl(o),i=!1,e.xe.push(function(){i=!0}),e.dispatchEvent(Xd("canupdatestarttime")),null!=e.O&&e.G.Wf(e.O),e.ob=function(e,t){(t=new xc(e.ya,t instanceof Date||t>0)).addEventListener("enter",function(t){sp(e,t.region,"metadata")});var n=new Fl(e.h);return n.g.add(t),n}(e,e.O||0),e.M=new Ul({Xe:function(){return o.playbackRate},Tc:function(){return o.defaultPlaybackRate},qh:function(e){o.playbackRate=e},ui:function(e){o.currentTime+=e}}),up(e,o,!0),o.textTracks&&(op(e),r=function(t){if(!(e.u instanceof Bc)){var n=yp(e).find(function(e){return"disabled"!==e.mode});n&&(n.mode=t?"showing":"hidden"),e.u instanceof jc&&(n=function(e){return Array.from(e.h.textTracks).find(function(e){return"Shaka Player TextTrack"==e.label})}(e))&&(n.mode=!t&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(o,"enterpictureinpicture",function(){return r(!0)}),e.j.D(o,"leavepictureinpicture",function(){return r(!1)}),o.remote?(e.j.D(o.remote,"connect",function(){return r(!1)}),e.j.D(o.remote,"connecting",function(){return r(!1)}),e.j.D(o.remote,"disconnect",function(){return r(!1)})):"webkitCurrentPlaybackTargetIsWireless"in o&&e.j.D(o,"webkitcurrentplaybacktargetiswirelesschanged",function(){return r(!1)}),((s=o).webkitPresentationMode||s.webkitSupportsFullscreen)&&e.j.D(s,"webkitpresentationmodechanged",function(){s.webkitPresentationMode?r("inline"!==s.webkitPresentationMode):s.webkitSupportsFullscreen&&r(s.webkitDisplayingFullscreen)})),rp(e,o,t),a=function(e,t,n){try{if(!e.g.enabled)return t;var o=Zc(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var i=hd;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":i=md;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":i=pd;break e}i=void 0}return o.ot=i,o.su=!0,dd(t,ud(o))}catch(s){return X("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}(e.K,e.X,n),!a.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(a+="#t=",e.g.playRangeStart>0&&(a+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(a+=","+e.g.playRangeEnd)),!e.H){m.A(2);break}return S(m,e.H.destroy(),3);case 3:e.H=null;case 2:return ea(o),o.src=a,"TV"==(l=ae()).Oa()&&o.load(),"none"!=o.preload&&!o.autoplay&&po(n)&&"WEBKIT"===l.Ea()&&o.load(),e.m=eh,e.dispatchEvent(Xd("streaming")),u=new Ei,ml(o,HTMLMediaElement.HAVE_METADATA,e.j,function(){e.G.ready(),e.ba&&po(e.ba)||u.resolve()}),c=function(){return new Promise(function(t){var n=new To(t);e.j.D(o.textTracks,"change",function(){return n.ka(.5)}),n.ka(.5)})},ml(o,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var t,n,o,r,s;return D(function(a){if(1==a.g)return S(a,c(),2);if(i)return a.return();if(function(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Ni(t,e.g.preferredAudioRole)}(e),(t=yp(e)).some(function(e){return"showing"===e.mode})&&(e.$=!0,e.u.setTextVisibility(!0)),!(e.u instanceof Bc))for(t.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():pe("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),n=!1,o=g(t),r=o.next();!r.done;r=o.next())"disabled"!==(s=r.value).mode&&(n?(s.mode="disabled",K("Found more than one enabled text track, disabling it",s)):(gp(e,s),n=!0));!function(e){var t=e.g.preferredTextLanguage;""!=t&&e.kh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}(e),e.ba&&po(e.ba)&&u.resolve(),T(a)})}),o.error?u.reject(qp(e)):"none"==o.preload&&(K('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.j.Aa(o,"error",function(){u.reject(qp(e))}),S(m,Io(e.g.streaming.loadTimeout,u),4);case 4:((d=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(p=function(){return Ap(e)},e.j.D(o,"timeupdate",p)),d||(h=function(){return Ip(e)},e.j.D(o,"timeupdate",h),Ip(e)),e.C&&(e.C.onManifestUpdated(d),d&&(f=e.Va().end,e.j.D(o,"progress",function(){var t=e.Va().end;f!=t&&(e.C.onManifestUpdated(e.W()),f=t)}))),e.Sa=!0,T(m)}})}(b,d,o),0)})},"srcEqualsInner_"),14);case 14:b.dispatchEvent(Xd("loaded"));case 6:if(E(x),!i){x.A(25);break}return S(x,i.destroy(),25);case 25:b.Ta=null,M(x,0);break;case 5:if(!(v=I(x))||7e3==v.code){x.A(27);break}return S(x,b.Bc(!1),27);case 27:throw v}})},i.dj=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,o=this;return D(function(i){return 1==i.g?S(i,Zd(o),2):3!=i.g?(n=i.h,S(i,o.Bc(e,t),3)):i.return(n)})},i.Vh=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t;var n,o=this;return D(function(i){return 1==i.g?S(i,Zd(o,t),2):3!=i.g?(n=i.h,S(i,o.detach(e),3)):i.return(n)})},i.preload=function(e,t,n,o){t=void 0===t?null:t;var i,r,s=this;return D(function(a){return 1==a.g?(tc(i=Sp(s),o||s.g,Sp(s)),S(a,ep(s,e,t,n,!1,i),2)):((r=a.h)?r.start():Vp(s,new je(2,7,7005)),a.return(r))})},i.ng=function(){var e,t,n,o,i=this;return D(function(r){for(e=[],t=g(i.De),n=t.next();!n.done;n=t.next())(o=n.value).j||e.push(o.destroy());return i.De=[],S(r,Promise.all(e),0)})},i.Mk=function(){for(var e=this.ma;e.g;)e.release()},i.md=function(e){return new br(e)},i.configure=function(e,t){var n=this.getConfiguration();if(2==arguments.length&&"string"==typeof e&&(e=Bu(e,t)),"preferredVariantRole"in e&&(pe("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(pe("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(pe("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){pe("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var o=ae();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&"WEBKIT"===o.Ea(),delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&"boolean"==typeof e.streaming.liveSync&&(pe("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),o=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=o),e.streaming&&(!e.streaming.liveSync||!("targetLatency"in e.streaming.liveSync))&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){o=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-o)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=o+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(pe("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(pe("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(pe("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(pe("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(pe("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(pe("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(pe("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(pe("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){pe("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var r=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return r},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(pe("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(pe("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(pe("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(pe("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(pe("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(pe("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(pe("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(pe("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(pe("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(pe("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){for(var s in o=!1,e.drm.advanced){var a=e.drm.advanced[s];i=a.videoRobustness,a=a.audioRobustness,"videoRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].videoRobustness)&&(e.drm.advanced[s].videoRobustness=[i],o=!0),"audioRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].audioRobustness)&&(e.drm.advanced[s].audioRobustness=[a],o=!0)}o&&pe("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(pe("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(pe("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(pe("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),s=tc(this.g,e,Sp(this)),pp(this,n),s},i.tj=function(e){this.Zf=e},i.getConfiguration=function(){var e=Sp(this);return tc(e,this.g,Sp(this)),e},i.Dj=function(){return this.Zf},i.di=function(){return tc(Sp(this),this.g,Sp(this)),ju(this.g,Sp(this))},i.$h=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.h.currentTime+t,this.Va().end)))return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},i.Ii=function(){var e,t=this.getConfiguration();for(e in this.g)delete this.g[e];tc(this.g,Sp(this),Sp(this)),pp(this,t)},i.Lj=function(){return this.m},i.bi=function(){return this.i?this.i.type:null},i.Pj=function(){return this.h},i.Wb=function(){return this.J},i.rd=function(){return this.X},i.Zh=function(){return this.C?this.C:null},i.ei=function(){return this.Da?this.Da:null},i.W=function(){return this.i&&!this.va()?this.i.presentationTimeline.W():!(!this.h||!this.h.src&&!this.va())&&this.h.duration==1/0},i.Vc=function(){return!!this.i&&this.i.presentationTimeline.Vc()},i.ik=function(){if(this.i&&!this.va()){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src&&!this.va())&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},i.rk=function(){if(this.i&&!this.va()){var e=this.i.variants;return!(!e.length||(e=e[0]).audio||!e.video||e.video.codecs.includes(","))}return!(!this.h||!this.h.src&&!this.va()||!this.h.audioTracks)&&0==this.h.audioTracks.length},i.Va=function(){if(this.i&&!this.va()){if(!this.Sa&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Xb(),end:e.Hb()}}if(this.h&&(this.h.src||this.va())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return{start:t,end:e=Math.min(e.end(e.length-1),n)}}return{start:0,end:0}},i.fk=function(){this.W()&&(this.h.currentTime=this.Va().end)},i.jk=function(){return this.Sa},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.F?this.F.g:null},i.Ud=function(){return this.F?this.F.Ud():1/0},i.Gg=function(){return this.F?this.F.Gg():[]},i.We=function(){return this.F?this.F.We():{}},i.Og=function(){return this.R?this.R.g==Vr:!!this.X},i.Pb=function(){return this.h?this.M?this.M.i:1:0},i.Gh=function(e){this.m==Zp&&this.l&&uu(this.l,e)},i.qe=function(e,t){t=void 0===t||t,0==e?K("A trick play rate of 0 is unsupported!"):(this.M.set(e),this.m==Zp&&(this.o.playbackRateChanged(e),this.Gh(t&&1!=e)),kp(this,e))},i.Nd=function(){var e=this.M.Tc();this.m==eh&&this.M.set(e),this.m==Zp&&(this.M.set(e),this.o.playbackRateChanged(e),this.Gh(!1)),this.ac.Qa()},i.lc=function(){if(this.i&&!this.va()){for(var e=this.l?this.l.o:null,t=[],n=0,o=g(this.i.variants),i=o.next();!i.done;i=o.next())if(ti(i=i.value)){var r=Xo(i);r.active=i==e,r.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(r.active=!0),r.active&&n++,t.push(r)}return t}if(this.h&&this.h.audioTracks){var s=Pp(this);return(e=Array.from(this.h.audioTracks)).length?e.map(function(e){return ei(e,s)}):s?[ei(null,s)]:[]}return[]},i.Lc=function(){if(this.i){if(this.va())return[];for(var e=this.l?this.l.B:null,t=[],n=g(this.i.textStreams),o=n.next();!o.done;o=n.next()){var i=Yo(o=o.value);i.active=o==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?yp(this).map(function(e){return Zo(e)}):[]},i.Ij=function(){var e=this.Fe;return this.i&&(e=this.i.imageStreams),e.map(function(e){return Jo(e)})},i.wj=function(e){var t,n,o=this;return D(function(i){return 1==i.g?S(i,fp(o,e),2):(t=i.h)?(n=[],t.segmentIndex.Gb(function(e){var o=hp(e.tilesLayout||t.tilesLayout);if(o)for(var i=o.rows*o.columns,r=e.j-e.startTime,s=0;s<i;s++){var a=mp(e,t,e.startTime+r*s/i,o);n.push(a)}}),t.closeSegmentIndex&&t.closeSegmentIndex(),i.return(n)):i.return(null)})},i.Zj=function(e,t){var n,o,i,r,s=this;return D(function(a){return 1==a.g?S(a,fp(s,e),2):(n=a.h)?null==(o=n.segmentIndex.find(t))?a.return(null):(i=n.segmentIndex.get(o),(r=hp(i.tilesLayout||n.tilesLayout))?a.return(mp(i,n,t,r)):a.return(null)):a.return(null)})},i.mh=function(e){var t,n=this;this.i&&this.G&&((t=n.i.textStreams.find(function(t){return t.id==e.id}))&&t!=n.l.B&&(ac(n.B.h,t,!1),du(n.l,t),Bp(n),zp(n),n.yc=t.language),!this.va())||function(){if(n.h&&n.h.textTracks){var t=yp(n),o=t.find(function(t){return Qo(t)===e.id});if(o){if(n.u instanceof Bc)for(var i=(t=g(t)).next();!i.done;i=t.next()){var r=(i=i.value)===o?n.$?"showing":"hidden":"disabled";i.mode!==r&&(i.mode=r)}else(t=t.find(function(e){return"disabled"!==e.mode}))!==o&&(t&&(t.mode="disabled",n.j.Ma(t,"cuechange"),n.u.remove(0,1/0)),o&&gp(n,o));Bp(n),zp(n)}}}()},i.Ff=function(e,t,n){var o=this;t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.G&&(function(){var i=o.i.variants.find(function(t){return t.id==e.id});if(i&&ti(i)){var r=o.l.o;o.g.abr.enabled&&(r.video!=i.video||r.audio&&i.audio&&r.audio.language==i.audio.language&&r.audio.channelsCount==i.audio.channelsCount&&r.audio.label==i.audio.label)&&K("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),o.va()?_p(o,i,!1,!1,0):_p(o,i,!1,t||!1,n||0),o.N.configure({language:i.language,role:i.audio&&i.audio.roles&&i.audio.roles[0]||"",videoRole:i.video&&i.video.roles&&i.video.roles[0]||"",channelCount:i.audio&&i.audio.channelsCount?i.audio.channelsCount:0,hdrLevel:i.video&&i.video.hdr?i.video.hdr:"",spatialAudio:!(!i.audio||!i.audio.spatialAudio)&&i.audio.spatialAudio,videoLayout:i.video&&i.video.videoLayout?i.video.videoLayout:"",audioLabel:i.audio&&i.audio.label?i.audio.label:"",videoLabel:i.video&&i.video.label?i.video.label:"",codecSwitchingStrategy:o.g.mediaSource.codecSwitchingStrategy,audioCodec:i.audio&&i.audio.codecs?i.audio.codecs:"",activeAudioCodec:r.audio&&r.audio.codecs?r.audio.codecs:"",activeAudioChannelCount:r.audio&&r.audio.channelsCount?r.audio.channelsCount:0,preferredAudioCodecs:o.g.preferredAudioCodecs,preferredAudioChannelCount:o.g.preferredAudioChannelCount}),Ep(o)}}(),!this.va())||function(){if(e.originalAudioId&&o.h&&o.h.audioTracks)for(var t=Array.from(o.h.audioTracks),n=(t=g(t)).next();!n.done;n=t.next())if(Qo(n=n.value)==e.id){Lp(o,n);break}}()},i.Uk=function(e,t){var n,o=this;t=void 0===t?0:t,this.i&&this.G&&((n=o.N.getConfiguration()).audioCodec=e.codecs||"",n.audioLabel=e.label||"",n.channelCount=e.channelsCount||0,n.language=e.language,n.role=e.roles[0]||"",n.spatialAudio=e.spatialAudio,o.N.configure(n),Rp(o,!0,t,!1,!1),!this.va())||function(){if(o.h&&o.h.audioTracks){for(var t=Lo(e.language),n=Array.from(o.h.audioTracks),i=null,r=(n=g(n)).next();!r.done;r=n.next()){var s=(r=r.value).language||"und";if(r.label==e.label&&Lo(s)==t&&r.kind==e.roles[0]){i=r;break}}i&&Lp(o,i)}}()},i.getAudioTracks=function(){if(this.i&&!this.va()){var e=this.lc();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e;if(this.m!=Zp||this.va()||(n=e.filter(function(e){return e.originalVideoId===t.originalVideoId&&e.audioCodec})),!n.length)return[];e=new Map;for(var o=(n=g(n)).next();!o.done;o=n.next()){var i=(o=o.value).originalAudioId;i||null==o.audioId||(i=String(o.audioId)),i&&(i+=[o.language,o.label,o.channelsCount,o.spatialAudio].join("_"),e.set(i,{active:o.active,language:o.language,label:o.label,mimeType:o.audioMimeType,codecs:o.audioCodec,primary:o.primary,roles:o.audioRoles||[],accessibilityPurpose:o.accessibilityPurpose,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,originalLanguage:o.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){var t=e.language;return t={active:e.enabled,language:Lo(t||"und"),label:e.label,mimeType:null,codecs:null,primary:"main"==e.kind,roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:t},e.kind&&t.roles.push(e.kind),e.configuration&&(e.configuration.codec&&(t.codecs=e.configuration.codec),e.configuration.sampleRate&&(t.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(t.channelsCount=e.configuration.numberOfChannels)),t}):[]},i.Wk=function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n;var o=this.lc();if(o.length){var i=o.find(function(e){return e.active});i&&(o=o.find(function(t){return t.audioId===i.audioId&&(t.videoBandwidth||t.bandwidth)==e.bandwidth&&t.width==e.width&&t.height==e.height&&t.frameRate==e.frameRate&&t.pixelAspectRatio==e.pixelAspectRatio&&t.hdr==e.hdr&&t.colorGamut==e.colorGamut&&t.videoLayout==e.videoLayout&&t.videoMimeType==e.mimeType&&t.videoCodec==e.codecs&&te(t.videoRoles,e.roles)&&t.videoLabel==e.label}))&&!o.active&&this.Ff(o,t,n)}},i.getVideoTracks=function(){if(this.m==eh||this.va())return[];var e=this.lc();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e.filter(function(e){return e.originalAudioId===t.originalAudioId&&e.audioId===t.audioId&&e.audioGroupId===t.audioGroupId&&e.videoCodec});if(!n.length)return[];e=new Map;for(var o=(n=g(n)).next();!o.done;o=n.next()){var i=(o=o.value).originalVideoId;i||null==o.videoId||(i=String(o.videoId)),i&&e.set(i,{active:o.active,bandwidth:o.videoBandwidth||o.bandwidth,width:o.width,height:o.height,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,colorGamut:o.colorGamut,videoLayout:o.videoLayout,mimeType:o.videoMimeType,codecs:o.videoCodec,roles:o.videoRoles||[],label:o.videoLabel})}return Array.from(e.values())},i.yj=function(){return Yp(this.lc())},i.Xj=function(){return Yp(this.Lc())},i.xj=function(){return Array.from(Xp(this.lc()))},i.Wj=function(){return Array.from(Xp(this.Lc()))},i.Ni=function(e,t,n,o,i,r,s){var a=this;n=void 0===n?0:n,o=void 0===o?0:o,i=void 0===i?"":i,r=void 0!==r&&r,s=void 0===s?"":s,this.i&&this.G&&(function(){function l(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0}var u=a.l.o;a.N=a.g.adaptationSetCriteriaFactory(),a.N.configure({language:e,role:t||"",videoRole:u.video&&u.video.roles&&u.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:r||!1,videoLayout:"",audioLabel:s||"",videoLabel:"",codecSwitchingStrategy:a.g.mediaSource.codecSwitchingStrategy,audioCodec:i||"",activeAudioCodec:u.audio&&u.audio.codecs?u.audio.codecs:"",activeAudioChannelCount:u.audio&&u.audio.channelsCount?u.audio.channelsCount:0,preferredAudioCodecs:a.g.preferredAudioCodecs,preferredAudioChannelCount:a.g.preferredAudioChannelCount});for(var c=a.N.create(a.i.variants),d=null,p=(c=g(c.values())).next();!p.done;p=c.next())ti(p=p.value)&&(!d||l(d,u)>l(p,u))&&(d=p);d!=u&&(d?(u=Xo(d),a.Ff(u,!0,o||0)):Rp(a))}(),!this.va())||function(){if(a.h&&a.h.audioTracks){var n=oi(a.lc(),e,t||"",!1)[0];n&&a.Ff(n)}}()},i.kh=function(e,t,n){var o,i=this;n=void 0!==n&&n,this.i&&this.G&&(function(){i.yc=e,i.Kd=t||"",i.ye=n||!1;var o=oi(i.i.textStreams,i.yc,i.Kd,i.ye)[0]||null;o&&o!=i.l.B&&(ac(i.B.h,o,!1),i.g.streaming.alwaysStreamText||i.Pg())&&(du(i.l,o),Bp(i),zp(i))}(),!this.va())||(o=oi(i.Lc(),e,t||"",n||!1)[0])&&i.mh(o)},i.Vk=function(e,t,n){var o=this;t=void 0===t||t,n=void 0===n?0:n,this.i&&this.G&&(function(){for(var i=null,r=g(o.i.variants),s=r.next();!s.done;s=r.next())if((s=s.value).audio.label==e){i=s;break}null!=i&&(o.N=o.g.adaptationSetCriteriaFactory(),o.N.configure({language:i.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:o.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:o.g.preferredAudioCodecs,preferredAudioChannelCount:o.g.preferredAudioChannelCount}),Rp(o,t,n))}(),!this.va())||function(){if(o.h&&o.h.audioTracks){for(var t=Array.from(o.h.audioTracks),n=null,i=(t=g(t)).next();!i.done;i=t.next())(i=i.value).label==e&&(n=i);n&&Lp(o,n)}}()},i.Pg=function(){var e=this.$;return this.u?this.u.isTextVisible():e},i.Cj=function(){return this.kb.map(function(e){return Yo(e)})},i.Aj=function(e){if(pe("getChapters","Please use an getChaptersAsync."),!this.kb.length)return[];var t=Lo(e);if(!(e=this.kb.filter(function(e){return Lo(e.language)==t})).length)return[];for(var n=[],o=new Set,i=(e=g(e)).next();!i.done;i=e.next())(i=i.value).segmentIndex&&i.segmentIndex.Gb(function(e){var t=e.P()[0],i=e.startTime+"-"+e.endTime+"-"+t;e={id:i,title:t,startTime:e.startTime,endTime:e.endTime},o.has(i)||(n.push(e),o.add(i))});return n},i.Bj=function(e){var t,n,o,i,r,s,a,l=this;return D(function(u){switch(u.g){case 1:if(!l.kb.length)return u.return([]);if(t=Lo(e),!(n=l.kb.filter(function(e){return Lo(e.language)==t})).length)return u.return([]);o=[],i=new Set,r=g(n),s=r.next();case 2:if(s.done){u.A(4);break}if((a=s.value).segmentIndex){u.A(5);break}return S(u,a.createSegmentIndex(),5);case 5:a.segmentIndex.Gb(function(e){var t=e.P()[0],n=e.startTime+"-"+e.endTime+"-"+t;e={id:n,title:t,startTime:e.startTime,endTime:e.endTime},i.has(n)||(o.push(e),i.add(n))}),s=r.next(),u.A(2);break;case 4:return u.return(o)}})},i.rh=function(e){e=!!e,this.$!=e&&(this.$=e,this.m==Zp?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=oi(this.i.textStreams,this.yc,this.Kd,this.ye)).length>0&&(du(this.l,e[0]),Bp(this),zp(this)):function(e){var t=e.h.get(ut);t&&(Eu(t),Mu(t).catch(function(){}),e.H=e.h.get(ut),e.h.delete(ut),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),Fp(this))},i.Qj=function(){if(this.G)var e=this.G.He();else{if(null==this.O)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.va()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},i.Ig=function(){if(this.i&&!this.va()){var e=this.i.presentationTimeline;return null===(e=e.m||e.i)?null:new Date(1e3*e)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},i.Ye=function(){return this.W()&&this.i?this.i.presentationTimeline.Ye():null},i.Fc=function(){if(this.m==Zp)return this.H.Fc();var e={total:[],audio:[],video:[],text:[]};return this.m==eh&&(e.total=Js(this.h.buffered)),e},i.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},i.getStats=function(){if(this.m!=Zp&&this.m!=eh)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Cp(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||function(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}(this.B,Math.round(100*t)),this.G&&(this.B.S=this.G.Hh(),this.B.V=this.G.Jh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),function(e,t,n){e.R=t,e.O=n}(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?function(e){return e.I?e.I:NaN}(this.F):NaN,uc(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&null!=this.Ig()&&(e=vp(this)||0,this.B.F=e/1e3),t=this.lc().find(function(e){return e.active}),e=this.Lc().find(function(e){return e.active}),t){if(t.bandwidth){var n=this.M?this.M.i:1,o=n*t.bandwidth;e&&e.bandwidth&&(o+=n*e.bandwidth),this.B.B=o}t.width&&t.height&&uc(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=Zp||this.va()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==eh&&cc(this.B,NaN),dc(this.B)},i.Md=function(e,t,n,o,i,r,s){s=void 0!==s&&s;var a,l,u,c,d,p,h,f,m,g,y=this;return D(function(v){switch(v.g){case 1:if(y.m!=Zp&&y.m!=eh)throw new je(1,7,7004);if("subtitles"!=n&&"captions"!=n&&K("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),o){v.A(2);break}return S(v,bp(y,e),3);case 3:o=v.h;case 2:if(a=[],y.C&&(a=y.C.getCuePoints()),y.m!=eh){v.A(4);break}return l=ae(),s&&"WEBKIT"===l.Ea()&&(n="forced"),S(v,function(e,t,n,o,i,r,s){var a,l,u,c;return D(function(d){if(1==d.g)return"text/vtt"!=i||s.length?S(d,xp(e,t,e.J,e.g.streaming.retryParameters),3):d.A(2);2!=d.g&&(a=d.h,l=wp(e,a,i,s),u=new Blob([l],{type:"text/vtt"}),t=il(u),i="text/vtt"),c=document.createElement("track");e:{var p=e.K,h=t;try{if(!p.g.enabled){var f=h;break e}var m=Zc(p);m.ot=yd,m.su=!0,f=dd(h,ud(m));break e}catch(g){X("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",g),f=h;break e}f=void 0}return c.src=f,c.label=r,c.kind=o,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.Yf.push(c),d.return(c)})}(y,e,t,n,o,r||"",a),5);case 5:if((u=v.h).track)return Dp(y),v.return(Zo(u.track));throw new je(1,2,2012);case 4:if(c=ct,d=y.Va(),p=d.end-d.start,y.i&&(p=y.i.presentationTimeline.getDuration()),p==1/0)throw new je(1,4,4033);if(!a.length){v.A(6);break}return S(v,xp(y,e,y.J,y.g.streaming.retryParameters),7);case 7:h=v.h,f=wp(y,h,o,a),m=new Blob([f],{type:"text/vtt"}),e=il(m),o="text/vtt";case 6:if(g={id:y.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Dl(0,p,[e]),mimeType:o||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:r||null,type:c.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([oo(o||"",i||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},!vo(oo(g.mimeType,g.codecs)))throw new je(2,2,2014,o);return y.i.textStreams.push(g),Dp(y),v.return(Yo(g))}})},i.Le=function(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w=this;return D(function(T){switch(T.g){case 1:if(w.m!=Zp&&w.m!=eh)throw new je(1,7,7004);if(t){T.A(2);break}return S(T,bp(w,e),3);case 3:t=T.h;case 2:if("text/vtt"!=t)throw new je(1,2,2017,e);if(n=ct,o=w.Va(),i=o.end-o.start,w.i&&(i=w.i.presentationTimeline.getDuration()),i==1/0)throw new je(1,4,4045);return S(T,xp(w,e,w.J,w.g.streaming.retryParameters),4);case 4:if(r=T.h,!(s=yo(t)))throw new je(2,2,2014,t);for(a=s(),l={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0},u=Ne(r),c=a.parseMedia(u,l,e,[]),d=[],p=g(c),h=p.next(),f={};!h.done;f={Sf:void 0,nd:void 0},h=p.next())f.nd=h.value,f.Sf=null,m=function(t){return function(){return null==t.Sf&&(t.Sf=ot([e],[t.nd.payload])),t.Sf||[]}}(f),y=new $s(f.nd.startTime,f.nd.endTime,m,0,null,null,0,0,1/0),f.nd.payload.includes("#xywh")&&4===(v=f.nd.payload.split("#xywh=")[1].split(",")).length&&y.If({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)}),d.push(y);if(b=t,!d.length){T.A(5);break}return S(T,Cc(d[0].P()[0],w.J,w.g.manifest.retryParameters),6);case 6:b=T.h;case 5:return x={id:w.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ll(d),mimeType:b||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.Uf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([oo(b||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},w.m==eh?w.Fe.push(x):w.i.imageStreams.push(x),Dp(w),T.return(Jo(x))}})},i.Ke=function(e,t,n){var o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b=this;return D(function(x){switch(x.g){case 1:if(b.m!=Zp&&b.m!=eh)throw new je(1,7,7004);if(n){x.A(2);break}return S(x,bp(b,e),3);case 3:n=x.h;case 2:if(o=ct,i=b.Va(),r=i.end-i.start,b.i&&(r=b.i.presentationTimeline.getDuration()),r==1/0)throw new je(1,4,4054);return S(x,xp(b,e,b.J,b.g.streaming.retryParameters),4);case 4:if(s=x.h,!(a=yo(n)))throw new je(2,2,2014,n);for(l=a(),u={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},c=Ne(s),d=l.parseMedia(c,u,e,[]),p=[],h=g(d),f=h.next(),m={};!f.done;m={Te:void 0},f=h.next())m.Te=f.value,y=new $s(m.Te.startTime,m.Te.endTime,function(e){return function(){return[e.Te.payload]}}(m),0,null,null,0,0,1/0),p.push(y);return v={id:b.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ll(p),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:o.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([oo("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},b.kb.push(v),Dp(b),x.return(Yo(v))}})},i.al=function(e,t){this.xa.width=e,this.xa.height=t},i.gh=function(e){if(this.m==Zp){var t=this.l;if(e=void 0===e?.1:e,t.l.g)t=!1;else if(t.C)t=!1;else{for(var n=g(t.h.values()),o=n.next();!o.done;o=n.next())!(o=o.value).Xd||o.Ja||o.sb||(o.Xd=!1,Iu(t,o,e));t=!0}}else t=!1;return t},i.Hg=function(){return K("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Mj=function(){return this.uc},i.Gj=function(){var e={video:null,audio:null,text:null};if(this.m!=Zp)return e;for(var t=this.l.o,n=this.h.currentTime,o=(t=g([t.video,t.audio,this.l.B])).next();!o.done;o=t.next())if((o=o.value)&&o.segmentIndex){var i=o.segmentIndex.find(n);i={codecs:(i=o.segmentIndex.get(i)).codecs||o.codecs,mimeType:i.mimeType||o.mimeType,bandwidth:i.bandwidth||o.bandwidth},"video"==o.type?(i.width=o.width,i.height=o.height,e.video=i):"audio"==o.type?e.audio=i:o.type==ut&&(e.text=i)}return e},i.Ti=function(e){this.ve=e},i.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Jp||!navigator.onLine||0==t||!this.i)return!1;if(this.i.variants.some(function(t){var n=t[e.type];return!(!n||n.id===e.id||t.disabledUntilTime||"audio"==e.type&&e.language!==n.language)})){for(var n=!1,o=!1,i=g(this.i.variants),r=i.next();!r.done;r=i.next()){var s=(r=r.value)[e.type];s&&(s.id===e.id?(r.disabledUntilTime=Date.now()/1e3+t,n=!0):s.trickModeVideo&&s.trickModeVideo.id==e.id&&(o=!0))}return!(!n&&o||(this.Ce.Fa(1),t=this.Fc().video.reduce(function(e,t){return e+t.end-t.start},0),Rp(this,!1,t,!0,!1),0))}return!1},i.addFont=function(t,n){return function(t,n){var o,i,r,s,a;return D(function(l){if(1==l.g)return"fonts"in document&&"FontFace"in e?S(l,document.fonts.ready,2):l.return();if(!("entries"in document.fonts))return l.return();for(o=function(e){for(var t=[],n=(e=e.entries()).next();!1===n.done;)t.push(n.value),n=e.next();return t},i=g(o(document.fonts)),r=i.next();!r.done;r=i.next())if((s=r.value).family===t&&"swap"===s.display)return l.return();a=new FontFace(t,"url("+n+")",{display:"swap"}),document.fonts.add(a),T(l)})}(t,n)},i.va=function(){return!(!this.h||!this.h.remote)&&"disconnected"!=this.h.remote.state},i.ae=function(){return!(this.h&&!this.h.ended)||this.Sa&&!this.W()&&this.h.currentTime>=this.Va().end},$("shaka.Player",Wd),Wd.prototype.isEnded=Wd.prototype.ae,Wd.prototype.isRemotePlayback=Wd.prototype.va,Wd.prototype.addFont=Wd.prototype.addFont,Wd.prototype.setVideoContainer=Wd.prototype.Ti,Wd.prototype.getFetchedPlaybackInfo=Wd.prototype.Gj,Wd.prototype.getManifestParserFactory=Wd.prototype.Mj,Wd.prototype.getManifest=Wd.prototype.Hg,Wd.prototype.retryStreaming=Wd.prototype.gh,Wd.prototype.setMaxHardwareResolution=Wd.prototype.al,Wd.prototype.addChaptersTrack=Wd.prototype.Ke,Wd.prototype.addThumbnailsTrack=Wd.prototype.Le,Wd.prototype.addTextTrackAsync=Wd.prototype.Md,Wd.prototype.getStats=Wd.prototype.getStats,Wd.prototype.getBufferedInfo=Wd.prototype.Fc,Wd.prototype.getSegmentAvailabilityDuration=Wd.prototype.Ye,Wd.prototype.getPresentationStartTimeAsDate=Wd.prototype.Ig,Wd.prototype.getPlayheadTimeAsDate=Wd.prototype.Qj,Wd.prototype.setTextTrackVisibility=Wd.prototype.rh,Wd.prototype.getChaptersAsync=Wd.prototype.Bj,Wd.prototype.getChapters=Wd.prototype.Aj,Wd.prototype.getChaptersTracks=Wd.prototype.Cj,Wd.prototype.isTextTrackVisible=Wd.prototype.Pg,Wd.prototype.selectVariantsByLabel=Wd.prototype.Vk,Wd.prototype.selectTextLanguage=Wd.prototype.kh,Wd.prototype.selectAudioLanguage=Wd.prototype.Ni,Wd.prototype.getTextLanguages=Wd.prototype.Wj,Wd.prototype.getAudioLanguages=Wd.prototype.xj,Wd.prototype.getTextLanguagesAndRoles=Wd.prototype.Xj,Wd.prototype.getAudioLanguagesAndRoles=Wd.prototype.yj,Wd.prototype.getVideoTracks=Wd.prototype.getVideoTracks,Wd.prototype.selectVideoTrack=Wd.prototype.Wk,Wd.prototype.getAudioTracks=Wd.prototype.getAudioTracks,Wd.prototype.selectAudioTrack=Wd.prototype.Uk,Wd.prototype.selectVariantTrack=Wd.prototype.Ff,Wd.prototype.selectTextTrack=Wd.prototype.mh,Wd.prototype.getThumbnails=Wd.prototype.Zj,Wd.prototype.getAllThumbnails=Wd.prototype.wj,Wd.prototype.getImageTracks=Wd.prototype.Ij,Wd.prototype.getTextTracks=Wd.prototype.Lc,Wd.prototype.getVariantTracks=Wd.prototype.lc,Wd.prototype.cancelTrickPlay=Wd.prototype.Nd,Wd.prototype.trickPlay=Wd.prototype.qe,Wd.prototype.useTrickPlayTrackIfAvailable=Wd.prototype.Gh,Wd.prototype.getPlaybackRate=Wd.prototype.Pb,Wd.prototype.isBuffering=Wd.prototype.Og,Wd.prototype.getKeyStatuses=Wd.prototype.We,Wd.prototype.getActiveSessionsMetadata=Wd.prototype.Gg,Wd.prototype.getExpiration=Wd.prototype.Ud,Wd.prototype.drmInfo=Wd.prototype.drmInfo,Wd.prototype.keySystem=Wd.prototype.keySystem,Wd.prototype.isFullyLoaded=Wd.prototype.jk,Wd.prototype.goToLive=Wd.prototype.fk,Wd.prototype.seekRange=Wd.prototype.Va,Wd.prototype.isVideoOnly=Wd.prototype.rk,Wd.prototype.isAudioOnly=Wd.prototype.ik,Wd.prototype.isInProgress=Wd.prototype.Vc,Wd.prototype.isLive=Wd.prototype.W,Wd.prototype.getQueueManager=Wd.prototype.ei,Wd.prototype.getAdManager=Wd.prototype.Zh,Wd.prototype.getAssetUri=Wd.prototype.rd,Wd.prototype.getNetworkingEngine=Wd.prototype.Wb,Wd.prototype.getMediaElement=Wd.prototype.Pj,Wd.prototype.getManifestType=Wd.prototype.bi,Wd.prototype.getLoadMode=Wd.prototype.Lj,Wd.prototype.resetConfiguration=Wd.prototype.Ii,Wd.prototype.getBufferFullness=Wd.prototype.$h,Wd.prototype.getNonDefaultConfiguration=Wd.prototype.di,Wd.prototype.getConfigurationForLowLatency=Wd.prototype.Dj,Wd.prototype.getConfiguration=Wd.prototype.getConfiguration,Wd.prototype.configurationForLowLatency=Wd.prototype.tj,Wd.prototype.configure=Wd.prototype.configure,Wd.prototype.releaseAllMutexes=Wd.prototype.Mk,Wd.prototype.destroyAllPreloads=Wd.prototype.ng,Wd.prototype.preload=Wd.prototype.preload,Wd.prototype.detachAndSavePreload=Wd.prototype.Vh,Wd.prototype.unloadAndSavePreload=Wd.prototype.dj,Wd.prototype.load=Wd.prototype.load,Wd.prototype.updateStartTime=Wd.prototype.ll,Wd.prototype.unload=Wd.prototype.Bc,Wd.prototype.detach=Wd.prototype.detach,Wd.prototype.attachCanvas=Wd.prototype.kj,Wd.prototype.attach=Wd.prototype.fc,Wd.probeSupport=function(t){var n,o,i,r,s;return t=void 0===t||t,D(function(a){switch(a.g){case 1:if(n={},!t){a.A(2);break}return S(a,function(){var t,n,o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w,C,E,M,R,_,L,P,O,N,U,B,F,j,z;return D(function($){if(1==$.g){if(t="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)){for(n={},o=g(t),i=o.next();!i.done;i=o.next())r=i.value,n[r]=null;return $.return(n)}for(s="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),l={"com.widevine.alpha":a=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],"com.widevine.alpha.experiment":a,"com.microsoft.playready.recommendation":["150","2000","3000"]},d={videoCapabilities:u=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],initDataTypes:["cenc","sinf","skd","keyids"]},p=[null,"cenc","cbcs"],h=new Map,f=ae(),m=function(e,t){var n,o,i,r,a,l,u,c,d,p,m,y,v;return D(function(b){switch(b.g){case 1:return k(b,2),S(b,t.createMediaKeys(),5);case 5:n=b.h;case 4:A(b,3);break;case 2:return I(b),b.return();case 3:if(i=!!(o=t.getConfiguration().sessionTypes)&&o.includes("persistent-license"),f.ti()&&(i=!1),r=t.getConfiguration().videoCapabilities,a=t.getConfiguration().audioCapabilities,l={persistentState:i,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},h.has(e)&&h.get(e)?l=h.get(e):h.set(e,l),(u=r[0].encryptionScheme)&&!l.encryptionSchemes.includes(u)&&l.encryptionSchemes.push(u),(c=r[0].robustness)&&!l.videoRobustnessLevels.includes(c)&&l.videoRobustnessLevels.push(c),(d=a[0].robustness)&&!l.audioRobustnessLevels.includes(d)&&l.audioRobustnessLevels.push(d),"getStatusForPolicy"in n){for(p=[],m=g(s),y=m.next(),v={};!y.done;v={Yd:void 0},y=m.next())v.Yd=y.value,l.minHdcpVersions.includes(v.Yd)||p.push(n.getStatusForPolicy({minHdcpVersion:v.Yd}).then(function(e){return function(t){"usable"!=t||l.minHdcpVersions.includes(e.Yd)||l.minHdcpVersions.push(e.Yd)}}(v)));return S(b,Promise.all(p),0)}b.A(0)}})},y=function(e,t,n,o){var i,r,s,a,l,u,c,p,h,f;return D(function(y){switch(y.g){case 1:for(k(y,2),i=jt(d),r=g(i.videoCapabilities),s=r.next();!s.done;s=r.next())(a=s.value).encryptionScheme=t,a.robustness=n;for(l=g(i.audioCapabilities),u=l.next();!u.done;u=l.next())(c=u.value).encryptionScheme=t,c.robustness=o;return(p=jt(i)).persistentState="required",p.sessionTypes=["persistent-license"],h=[p,i],"MOBILE"==ae().Oa()?S(y,Io(5,navigator.requestMediaKeySystemAccess(e,h)),7):S(y,navigator.requestMediaKeySystemAccess(e,h),6);case 6:f=y.h,y.A(5);break;case 7:f=y.h;case 5:return S(y,m(e,f),8);case 8:A(y,0);break;case 2:I(y),T(y)}})},v=function(e,t,n,o){var i,r,s;return D(function(a){switch(a.g){case 1:return k(a,2),i={type:"media-source",video:{contentType:u[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:c[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:e,video:{encryptionScheme:t,robustness:n},audio:{encryptionScheme:t,robustness:o}}},"MOBILE"==ae().Oa()?S(a,Io(5,navigator.mediaCapabilities.decodingInfo(i)),7):S(a,navigator.mediaCapabilities.decodingInfo(i),6);case 6:r=a.h,a.A(5);break;case 7:r=a.h;case 5:return s=r.keySystemAccess,S(a,m(e,s),8);case 8:A(a,0);break;case 2:I(a),T(a)}})},b=g(t),x=b.next();!x.done;x=b.next())w=x.value,h.set(w,null);for(C=function(e){return"WEBKIT"!==ae().Ea()||"org.w3.clearkey"!==e},E=[],M=g(p),R=M.next();!R.done;R=M.next())for(_=R.value,L=g(t),P=L.next();!P.done;P=L.next())O=P.value,C(O)&&(E.push(y(O,_,"","")),E.push(v(O,_,"","")));for(N=g(t),U=N.next();!U.done;U=N.next())for(B=U.value,F=g(l[B]||[]),j=F.next();!j.done;j=F.next())z=j.value,C(B)&&(E.push(y(B,null,z,"")),E.push(y(B,null,"",z)),E.push(v(B,null,z,"")),E.push(v(B,null,"",z)));return S($,Promise.all(E),2)}return $.return(nr(h))})}(),3);case 3:n=a.h;case 2:return o=function(){var e={};if(ae(),qy())for(var t=g(ns.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(n=(t=g(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!n.done;n=t.next())e[n=n.value]=qy()?ns.has(n):""!=na().canPlayType(n);return e}(),i=function(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(y(fo)),t={};ae();for(var n=(e=g(e)).next();!n.done;n=e.next()){if(vo(n=n.value))t[n]=!0;else if(qy()){var o=uo(n);o=oo(o,Wo(co(n),o)),t[n]=yt(o)||!!Yn(o)}else t[n]=""!=na().canPlayType(n);t[o=n.split(";")[0]]=t[o]||t[n]}return t}(),S(a,ae().jc(),4);case 4:return r=a.h,s={manifest:o,media:i,drm:n,hardwareResolution:r},nh.forEach(function(e,t){s[t]=e()}),a.return(s)}})},Wd.isBrowserSupported=function(){return e.Promise||K("A Promise implementation or polyfill is required"),!(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")||(ae(),!qy()&&""==na().canPlayType("application/x-mpegurl")))},Wd.setQueueManagerFactory=function(e){ih=e},Wd.setAdManagerFactory=function(e){oh=e},Wd.registerSupportPlugin=Yd,Wd.prototype.destroy=Wd.prototype.destroy;var Jp=0,Qp=1,Zp=2,eh=3;Wd.LoadMode={DESTROYED:Jp,NOT_LOADED:Qp,MEDIA_SOURCE:Zp,SRC_EQUALS:eh},Wd.version="v4.16.0";var th=["4","16"];me=new function(e){this.g=e,this.i=he,this.h=fe}(new de(Number(th[0]),Number(th[1])));var nh=new Map,oh=null,ih=null;function rh(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function sh(e){return e.g.length?e.g.reduce(function(e,t){return e+t},0)/e.g.length:0}function ah(e,t,n){var o=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new oe,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){o.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){o.i=!1})}function lh(){}function uh(e,t){for(var n=[],o=(e=g(Kt(e,"Ad"))).next();!o.done;o=e.next())if((o=Qt(o.value,"InLine"))&&(o=Qt(o,"Creatives")))for(var i=(o=g(Kt(o,"Creative"))).next();!i.done;i=o.next()){var r=Qt(i=i.value,"Linear");if(r&&ch(n,t,r),i=Qt(i,"NonLinearAds"))for(var s=(i=g(i=Kt(i,"NonLinear"))).next();!s.done;s=i.next())e:{r=n;var a=t,l=s.value,u=Qt(l,"StaticResource");if(u)s=u.attributes.creativeType;else{if(!(u=Qt(l,"HTMLResource")))break e;s="text/html"}if(u=Yt(u)){"text/html"===s&&(u="data:text/html;charset=UTF-8,"+encodeURIComponent(u));var c=en(l,"width",ln)||en(l,"expandedWidth",ln),d=en(l,"height",ln)||en(l,"expandedHeight",ln);if(c||d){var p=null,h=Qt(l,"NonLinearClickThrough");h&&(h=Yt(h))&&(p=h),h=null,(l=l.attributes.minSuggestedDuration)&&(h=Ut(l)),l=0,null!=a&&(l=a),r.push({id:null,groupId:null,startTime:l,endTime:null,uri:u,mimeType:s,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:h,once:!0,pre:null==a,post:a==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:d||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:p})}}}}return n}function ch(e,t,n){var o=0;null!=t&&(o=t);var i=null;n.attributes.skipoffset&&(i=Ut(n.attributes.skipoffset),isNaN(i)&&(i=null));var r=Qt(n,"MediaFiles");if(r){var s=null;for((n=Qt(n,"VideoClicks"))&&(n=Qt(n,"ClickThrough"))&&(n=Yt(n))&&(s=n),r=n=Kt(r,"MediaFile"),n=n.filter(function(e){return"streaming"==e.attributes.delivery}),n.length&&(r=n),r=r.sort(function(e,t){return(parseInt(t.attributes.height,10)||0)-(parseInt(e.attributes.height,10)||0)}),n=(r=g(r)).next();!n.done;n=r.next())if(!(n=n.value).attributes.apiFramework){var a=Yt(n);if(a){e.push({id:null,groupId:null,startTime:o,endTime:null,uri:a,mimeType:n.attributes.type||null,isSkippable:null!=i,skipOffset:i,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:null==t,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:s});break}}}}function dh(t,n,o,i,r){var s=this;this.u=t,this.i=n,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=r,this.j=null,this.h=new oe,google.ima.settings.setLocale(o),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.0"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){!function(t,n){if(t.l(new Oi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.H))),t.o.customPlayheadTracker){var o={currentTime:t.i.currentTime};t.g=n.getAdsManager(o,t.C),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.D(t.i,"timeupdate",function(){t.i.duration&&(o.currentTime=t.i.currentTime)}),t.h.D(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.C);t.l(new Oi("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[];for(var r=(i=g(i)).next();!r.done;r=i.next())n.push({start:r.value,end:null});t.l(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new Oi(n,t))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){ph(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){hh(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(t){hh(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){fh(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){fh(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight),t.h.D(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),"ResizeObserver"in e?(t.B=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.B.observe(t.i)):t.h.D(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.G||t.o.skipPlayDetection?t.g.start():t.h.Aa(t.i,"play",function(){t.G=!0,t.g.start()})}catch(s){fh(t,null)}}(s,t)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){ph(s,e)}),this.h.D(this.i,"ended",function(){s.m.contentComplete()}),this.h.Aa(this.i,"play",function(){s.G=!0})}function ph(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.l(new Oi("ad-error",t)),fh(e,null),e.l(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function hh(e,t){var n=t.getAd();n?(e.j=new ah(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Oi("ad-content-pause-requested")),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Oi("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?((t=e.j).j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):K("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function fh(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Oi("ad-content-resume-requested")),e.l(new Oi("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function mh(e,t,n,o,i,r){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=o,this.m=i,this.u=r,this.C=t.overlay}function gh(e,t,n){this.g=e,this.j=t,this.h=n,this.i=null==e.overlay}function yh(e,t,n,o){var i=this;this.N=null,this.o=e,this.F=t,this.g=n,this.H=null,this.C=!0,this.h=this.g,this.i=o,this.V=new Set,this.I=new Set,this.G=new Map,this.M=new Map,this.j=new Wd,Ih(this),this.J=new oe,this.l=new oe,this.K=!1,this.ba=this.u=this.B=this.m=null,this.ma=!1,this.R=-1,this.$=function(){if(!i.K&&i.m&&!i.F.va()){i.m=i.g.currentTime;var e=Sh(i);e&&Th(i,e,1,1,Date.now())}},this.X=function(){if(!(i.K||i.m||i.F.va())){i.m=i.g.currentTime;var e=Sh(i,!0);e||(e=Sh(i)),e&&Th(i,e,1,1,Date.now())}},this.oa=function(){if(!i.K&&i.m&&!i.F.va()){var e=i.g.currentTime;i.B&&!i.B.pre&&!i.B.post&&e<(i.B.endTime||i.B.startTime)&&(i.B=null)}},this.S=new To(this.$),this.O=new To(function(){var e,t,n,o,r,s,a,l,u,c,d;return D(function(p){switch(p.g){case 1:if(!i.I.size||null==i.m){p.A(0);break}if((e=i.F.m)==Jp||e==Qp)return p.return();t=!1,n=Array.from(i.I),o=i.F.Va(),r=g(n),s=r.next();case 3:if(s.done){p.A(5);break}if((a=s.value)==i.B){p.A(4);break}if(l=a.endTime||a.startTime,!(o.start-l>=1)){(u=a.startTime-i.m)>0&&u<=10&&(!i.G.has(a)&&Mh(a)&&i.G.set(a,i.j.preload(a.uri,null,a.mimeType||void 0)),_h(i,a)),p.A(4);break}if(!i.G.has(a)){p.A(7);break}return S(p,i.G.get(a),8);case 8:(c=p.h)&&c.destroy(),i.G.delete(a);case 7:Lh(i,a),d=JSON.stringify(a),i.V.has(d)&&i.V.delete(d),i.I.delete(a),vh(i),a.overlay||(t=!0);case 4:s=r.next(),p.A(3);break;case 5:t&&Ah(i),T(p)}})}),this.configure(this.F.getConfiguration().ads)}function vh(e){e.ma&&!e.I.size&&(e.J.Ma(e.g,"playing",e.X),e.J.Ma(e.g,"timeupdate",e.X),e.J.Ma(e.g,"seeked",e.oa),e.J.Ma(e.g,"ended",e.$),-1!=e.R&&(e.g.cancelVideoFrameCallback(e.R),e.R=-1),e.S&&e.S.stop(),e.O&&e.O.stop(),e.ma=!1)}function bh(e){if(e.o&&e.N&&!e.K){var t=e.N.supportsMultipleMediaElements,n=e.g;(n.webkitPresentationMode&&"inline"!==n.webkitPresentationMode||n.webkitDisplayingFullscreen)&&(t=!1),e.C==t&&(e.C=!t,e.C?(e.h=e.g,e.H&&(e.H.parentElement&&e.o.removeChild(e.H),e.H=null)):(e.H||((t=document.createElement(e.g.tagName)).autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.H=t),e.h=e.H))}else e.C=!0}function xh(e,t){var n;D(function(o){if(1==o.g)return Ih(e),n=[],t&&t.values.find(function(e){return"X-OVERLAY-ID"==e.key})?(n=function(e){var t=[];if(!e)return t;var n=e.values.find(function(e){return"X-ASSET-URI"==e.key});if(!n)return t;if(!(n=n.data))return t;var o=null,i=e.values.find(function(e){return"X-OVERLAY-ID"==e.key});i&&(o=i.data),i=null==o?Math.floor(10*e.startTime)/10:e.startTime;var r=e.endTime;e.endTime&&e.endTime!=1/0&&"number"==typeof e.endTime&&(r=null==o?Math.floor(10*e.endTime)/10:e.endTime);var s=!1,a=!1,l=!1,u=e.values.find(function(e){return"CUE"==e.key});u&&(l=u.data,s=l.includes("ONCE"),a=l.includes("PRE"),l=l.includes("POST")),u=null;var c=e.values.find(function(e){return"X-ASSET-MIMETYPE"==e.key});c&&(u=c.data),c=!1;var d=e.values.find(function(e){return"X-LOOP"==e.key});d&&(c="YES"==d.data),d=1;var p=e.values.find(function(e){return"X-DEPTH"==e.key});p&&(d=parseFloat(p.data),isNaN(d)&&(d=1)),p=null;var h=e.values.find(function(e){return"X-BACKGROUND"==e.key});h&&(p=h.data),h=1920;var f=1080,m=e.values.find(function(e){return"X-VIEWPORT"==e.key});if(m){if(2!=(f=m.data.split("x")).length)return t;h=parseFloat(f[0]),f=parseFloat(f[1])}if(h={viewport:{x:h,y:f},topLeft:{x:0,y:0},size:{x:h,y:f}},f=e.values.find(function(e){return"X-OVERLAY-POSITION"==e.key})){if(2!=(f=f.data.split("x")).length)return t;h.topLeft.x=parseFloat(f[0]),h.topLeft.y=parseFloat(f[1])}if(f=e.values.find(function(e){return"X-OVERLAY-SIZE"==e.key})){if(2!=(f=f.data.split("x")).length)return t;h.size.x=parseFloat(f[0]),h.size.y=parseFloat(f[1])}if(f=null,(m=e.values.find(function(e){return"X-SQUEEZECURRENT"==e.key}))&&(f=parseFloat(m.data),isNaN(f)&&(f=1),f={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*f,y:1080*f}},e=e.values.find(function(e){return"X-SQUEEZECURRENT-POSITION"==e.key}))){if(2!=(e=e.data.split("x")).length)return t;f.topLeft.x=parseFloat(e[0]),f.topLeft.y=parseFloat(e[1])}return t.push({id:o,groupId:null,startTime:i,endTime:r,uri:n,mimeType:u,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:s,pre:a,post:l,timelineRange:!0,loop:c,overlay:h,displayOnBackground:-1==d,currentVideo:f,background:p,clickThroughUrl:null}),t}(t),o.A(2)):S(o,function(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,g,y,v,b,x,w,T,C,E,M,R,_,L,P,O,N,U,B,F,j,z,$,V,H,G,q,W;return D(function(D){switch(D.g){case 1:if(n=[],!t)return D.return(n);if(o=t.values.find(function(e){return"X-ASSET-URI"==e.key}),i=t.values.find(function(e){return"X-ASSET-LIST"==e.key}),!o&&!i)return D.return(n);if(r=null,(s=t.values.find(function(e){return"ID"==e.key}))&&(r=s.data),a=null==r?Math.floor(10*t.startTime)/10:t.startTime,(l=t.endTime)&&t.endTime!=1/0&&"number"==typeof t.endTime&&(l=null==r?Math.floor(10*t.endTime)/10:t.endTime),u=t.values.find(function(e){return"X-RESTRICT"==e.key}),d=c=!0,u&&u.data&&(p=u.data,c=!p.includes("SKIP"),d=!p.includes("JUMP")),h=c?0:null,(f=t.values.find(function(e){return"X-ENABLE-SKIP-AFTER"==e.key}))&&(m=f.data,h=parseFloat(m),isNaN(h)&&(h=c?0:null)),g=null,(y=t.values.find(function(e){return"X-ENABLE-SKIP-FOR"==e.key}))&&(v=y.data,g=parseFloat(v),isNaN(h)&&(g=null)),b=null,(x=t.values.find(function(e){return"X-RESUME-OFFSET"==e.key}))&&(w=x.data,b=parseFloat(w),isNaN(b)&&(b=null)),T=null,(C=t.values.find(function(e){return"X-PLAYOUT-LIMIT"==e.key}))&&(E=C.data,T=parseFloat(E),isNaN(T)&&(T=null)),_=R=M=!1,(L=t.values.find(function(e){return"CUE"==e.key}))&&(P=L.data,M=P.includes("ONCE"),R=P.includes("PRE"),_=P.includes("POST")),O=!1,(N=t.values.find(function(e){return"X-TIMELINE-OCCUPIES"==e.key}))?(U=N.data,O=U.includes("RANGE")):!x&&e.F.W()&&(O=!R&&!_),o){if(!(B=o.data))return D.return(n);n.push({id:r,groupId:null,startTime:a,endTime:l,uri:B,mimeType:null,isSkippable:c,skipOffset:h,skipFor:g,canJump:d,resumeOffset:b,playoutLimit:T,once:M,pre:R,post:_,timelineRange:O,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),D.A(2);break}if(!i){D.A(2);break}return(F=i.data)?(k(D,4),S(D,Eh(e,F,{type:11}),6)):D.return(n);case 6:for(j=D.h,z=$e(j),$=JSON.parse(z),(V=$["SKIP-CONTROL"])&&("number"==typeof(H=V["ENABLE-SKIP-AFTER"])&&(h=parseFloat(H),isNaN(H)&&(h=c?0:null)),"number"==typeof(G=V["ENABLE-SKIP-FOR"])&&(g=parseFloat(G),isNaN(G)&&(g=null))),q=0;q<$.ASSETS.length;q++)(W=$.ASSETS[q]).URI&&n.push({id:r+"_shaka_asset_"+q,groupId:r,startTime:a,endTime:l,uri:W.URI,mimeType:null,isSkippable:c,skipOffset:h,skipFor:g,canJump:d,resumeOffset:b,playoutLimit:T,once:M,pre:R,post:_,timelineRange:O,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});A(D,2);break;case 4:I(D);case 2:return D.return(n)}})}(e,t),3);2!=o.g&&(n=o.h),n.length?wh(e,n):K("Unsupported HLS interstitial",t),T(o)})}function wh(e,t){var n,o,i,r,s,a,l,u;D(function(c){switch(c.g){case 1:n=!1,o=g(t),i=o.next();case 2:if(i.done){c.A(4);break}if(!(r=i.value).uri){K("Missing URL in interstitial",r),c.A(3);break}if(r.mimeType){c.A(5);break}return k(c,6),s=e.j.Wb(),S(c,Cc(r.uri,s,e.F.getConfiguration().streaming.retryParameters),8);case 8:r.mimeType=c.h,A(c,5);break;case 6:I(c);case 5:if(a=r.id||JSON.stringify(r),e.V.has(a)){c.A(3);break}r.loop&&!r.overlay&&K("Loop is only supported in overlay interstitials",r),r.overlay||(n=!0),e.V.add(a),e.I.add(r),l=!1,r.pre&&null==e.m?l=!0:0!=r.startTime||r.canJump?null!=e.m&&(u=r.startTime-e.m)>0&&u<=10&&(l=!0):l=!0,l&&(!e.G.has(r)&&Mh(r)&&e.G.set(r,e.j.preload(r.uri,null,r.mimeType||void 0)),_h(e,r));case 3:i=o.next(),c.A(2);break;case 4:n&&Ah(e),function(e){if(!e.ma&&e.I.size){if(e.J.D(e.g,"playing",e.X),e.J.D(e.g,"timeupdate",e.X),e.J.D(e.g,"seeked",e.oa),e.J.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!Rh()){var t=e.g,n=function(){-1!=e.R&&(e.$(),-1!=e.R&&(e.R=t.requestVideoFrameCallback(n)))};e.R=t.requestVideoFrameCallback(n)}else e.S.Fa(.025);e.O&&e.O.Fa(1),e.ma=!0}}(e),T(c)}})}function Sh(e,t,n){t=void 0!==t&&t,n=void 0===n?null:n;var o=0,i=null;if(e.I.size&&null!=e.m){var r=e.g.ended,s=Array.from(e.I).sort(function(e,t){return t.startTime-e.startTime}),a=s;for(a=t?s.filter(function(e){return e.pre}):r?s.filter(function(e){return e.post}):s.filter(function(e){return!e.pre&&!e.post}),a=(s=g(a)).next();!a.done;a=s.next()){a=a.value;var l=!1;if(t)l=a.pre;else if(r)l=a.post;else if(!a.pre&&!a.post){var u=e.m-Math.round(1e3*a.startTime)/1e3,c=1;e.N.allowStartInMiddleOfInterstitial&&a.endTime&&a.endTime!=1/0&&(c=a.endTime-a.startTime),(u>0||0==u&&0==e.m)&&(u<=c||!a.canJump)&&(l=!(null==n&&e.B&&!e.B.pre&&!e.B.post&&e.B.startTime>=a.startTime))}l&&(!e.B||a.startTime>=e.B.startTime)&&(o==(n||0)?i=a:i&&!a.canJump&&Math.round(1e3*a.startTime)/1e3-Math.round(1e3*i.startTime)/1e3>.001&&(i=a,o=0),o++)}}return i}function Th(t,n,o,i,r,s){s=void 0===s?0:s,t.B=n,bh(t),t.C||!t.o||t.h.parentElement||t.o.appendChild(t.h),1==i&&1==o&&(o=Array.from(t.I).filter(function(e){return n.pre?e.pre==n.pre:n.post?e.post==n.post:Math.abs(e.startTime-n.startTime)<.001}).length),n.once&&(s++,t.I.delete(n),vh(t),n.overlay||Ah(t)),n.mimeType&&(n.mimeType.startsWith("image/")||"text/html"===n.mimeType)?n.overlay?function(t,n,o,i,r){function s(){t.u&&(t.u.stop(),t.u=null),t.o.removeChild(u),Ch(t,n),t.i(new Oi("ad-stopped")),t.l.Qa();var e=Sh(t,n.pre,i-r);e?Th(t,e,o,++i,Date.now(),r):t.K=!1}t.K=!0;var a=n.overlay,l="text/html"==n.mimeType?"iframe":"img",u=document.createElement(l);u.style.objectFit="contain",u.style.position="absolute",u.style.border="none",kh(t,n),t.i(new Oi("ad-started",(new Map).set("ad",new gh(n,o,i)))),"iframe"==l?u.src=n.uri:(u.src=n.uri,u.onerror=function(e){t.i(new Oi("ad-error",(new Map).set("originalEvent",e))),s()});var c=a.viewport,d=a.topLeft;a=a.size,0==c.x&&0==c.y?(u.width=n.overlay.size.x,u.height=n.overlay.size.y,u.style.bottom="10%",u.style.left="0",u.style.right="0",u.style.width="100%",n.overlay.size.y||"iframe"!=l||(u.style.height="auto")):(u.style.height=a.y/c.y*100+"%",u.style.left=d.x/c.x*100+"%",u.style.top=d.y/c.y*100+"%",u.style.width=a.x/c.x*100+"%"),t.o.appendChild(u);var p=Date.now();t.u&&t.u.stop(),t.u=new To(function(){n.playoutLimit&&(Date.now()-p)/1e3>n.playoutLimit||n.endTime&&t.g.currentTime>n.endTime?(t.i(new Oi("ad-complete")),s()):t.g.currentTime<n.startTime&&(t.i(new Oi("ad-skipped")),s())}),n.playoutLimit&&!n.endTime?t.u.ka(n.playoutLimit):n.endTime&&t.u.Fa(.025),t.l.D(t.g,"seeked",function(){var e=t.g.currentTime;(e<n.startTime||n.endTime&&e>n.endTime)&&(t.u&&t.u.stop(),t.i(new Oi("ad-skipped")),s())}),n.clickThroughUrl&&t.l.D(u,"click",function(){n.clickThroughUrl&&e.open(n.clickThroughUrl,"_blank")})}(t,n,o,i,s):K("Unsupported interstitial",n):t.C&&n.overlay?K("Unsupported interstitial",n):function(t,n,o,i,r,s){var a,l,u,c,d,p,h,f,m,g,y,v,b,x,w,C,E,M,R,_,L;D(function(P){switch(P.g){case 1:if(a=Date.now(),t.K=!0,l=!1,u=function(){if(!t.C&&!n.overlay&&null==n.resumeOffset)if(n.timelineRange&&n.endTime&&n.endTime!=1/0)t.g.currentTime!=n.endTime&&(t.g.currentTime=n.endTime);else{var e=Date.now();t.g.currentTime+=(e-r)/1e3,r=e}},c=function(e){var a,l;return D(function(c){if(1==c.g){if(u(),a=Sh(t,n.pre,i-s),e&&n.groupId)for(;a&&a.groupId==n.groupId;)i++,a=Sh(t,n.pre,i-s);return t.u&&(!n.groupId||a&&a.groupId!=n.groupId)&&(t.u.stop(),t.u=null),Ch(t,n),a&&!a.overlay?c.A(2):(n.post&&(t.m=null,t.B=null),t.C?S(c,t.j.detach(),4):S(c,t.j.Bc(),4))}2!=c.g&&(t.C&&(null==(l=n.resumeOffset)&&(l=n.timelineRange&&n.endTime&&n.endTime!=1/0?n.endTime-(t.m||0):(Date.now()-r)/1e3),t.i(new Oi("ad-content-resume-requested",(new Map).set("offset",l)))),t.i(new Oi("ad-stopped")),t.l.Qa(),t.K=!1,t.C?Ah(t):(t.h.style.display="none",u(),t.g.ended||t.g.play())),bh(t),a&&(t.i(new Oi("ad-stopped")),t.l.Qa(),Th(t,a,o,++i,r,s)),T(c)})},d=function(e){return D(function(n){return l?n.return():(l=!0,t.i(new Oi("ad-error",(new Map).set("originalEvent",e))),S(n,c(!1),0))})},p=function(){return D(function(e){if(1==e.g)return l?e.return():(l=!0,S(e,c(!1),2));t.i(new Oi("ad-complete")),T(e)})},t.ba=function(){return D(function(e){return l?e.return():(l=!0,t.i(new Oi("ad-skipped")),S(e,c(!0),0))})},h=new mh(t.h,n,t.ba,o,i,!t.C),t.C||(h.setMuted(t.g.muted),h.setVolume(t.g.volume)),t.i(new Oi("ad-started",(new Map).set("ad",h))),(f=h.canSkipNow())&&t.i(new Oi("ad-skip-state-changed")),t.l.Aa(t.j,"error",d),t.l.D(t.h,"timeupdate",function(){if(t.h.duration){var e=h.canSkipNow();f!=e&&h.getRemainingTime()>0&&h.getDuration()>0&&t.i(new Oi("ad-skip-state-changed")),f=e}}),t.l.Aa(t.j,"firstquartile",function(){u(),t.i(new Oi("ad-first-quartile"))}),t.l.Aa(t.j,"midpoint",function(){u(),t.i(new Oi("ad-midpoint"))}),t.l.Aa(t.j,"thirdquartile",function(){u(),t.i(new Oi("ad-third-quartile"))}),t.l.Aa(t.j,"complete",p),t.l.D(t.h,"play",function(){t.i(new Oi("ad-resumed"))}),t.l.D(t.h,"pause",function(){var e=t.j.getConfiguration();t.h.currentTime>=e.playRangeEnd?p():t.i(new Oi("ad-paused"))}),t.l.D(t.h,"volumechange",function(){t.h.muted?t.i(new Oi("ad-muted")):t.i(new Oi("ad-volume-changed"))}),n.clickThroughUrl&&(m=t.o||t.h,t.l.D(m,"click",function(){n.clickThroughUrl&&(h.isPaused()||h.pause(),e.open(n.clickThroughUrl,"_blank"))})),!t.C||1!=i){P.A(2);break}return t.i(new Oi("ad-content-pause-requested",(new Map).set("saveLivePosition",!0))),g=new Ei,y=function(e){return D(function(n){if(1==n.g)return"detach"!=e.state?n.A(0):Rh()?S(n,new Promise(function(e){return new To(e).ka(.1)}),3):n.A(3);g.resolve(),t.l.Ma(t.F,"onstatechange",y),T(n)})},t.l.D(t.F,"onstatechange",y),S(P,g,2);case 2:return kh(t,n),t.C||(t.h.style.display="",n.overlay?(t.h.loop=n.loop,v=n.overlay.viewport,b=n.overlay.topLeft,x=n.overlay.size,t.h.style.height=x.y/v.y*100+"%",t.h.style.left=b.x/v.x*100+"%",t.h.style.top=b.y/v.y*100+"%",t.h.style.width=x.x/v.x*100+"%"):(t.g.pause(),null!=n.resumeOffset&&0!=n.resumeOffset&&(t.g.currentTime+=n.resumeOffset),t.h.loop=!1,t.h.style.height="100%",t.h.style.left="0",t.h.style.top="0",t.h.style.width="100%")),k(P,4),Ih(t),n.startTime&&n.endTime&&n.endTime!=1/0&&n.startTime!=n.endTime&&(w=n.endTime-n.startTime)>0&&t.j.configure("playRangeEnd",w),n.playoutLimit&&!t.u&&(t.u=new To(function(){t.ba()}).ka(n.playoutLimit),t.j.configure("playRangeEnd",n.playoutLimit)),S(P,t.j.fc(t.h),6);case 6:return C=null,t.N.allowStartInMiddleOfInterstitial&&null!=t.m&&(E=t.m-n.startTime,Math.abs(E)>.25&&(C=E)),t.G.has(n)?S(P,t.G.get(n),10):S(P,t.j.load(n.uri,C,n.mimeType||void 0),8);case 10:return M=P.h,t.G.delete(n),S(P,M?t.j.load(M):t.j.load(n.uri,C,n.mimeType||void 0),8);case 8:t.h.play(),R=(Date.now()-a)/1e3,t.i(new Oi("ads-loaded",(new Map).set("loadTime",R))),t.C&&t.g.play(),n.overlay&&(_=function(){var e=t.g.currentTime-n.startTime;Math.abs(e-t.h.currentTime)>.1&&(t.h.currentTime=e)},t.l.Aa(t.h,"playing",_),t.l.D(t.g,"seeking",_),t.l.D(t.g,"seeked",function(){var e=t.g.currentTime;(e<n.startTime||n.endTime&&e>n.endTime)&&t.ba()})),A(P,0);break;case 4:if(L=I(P),!t.K)return P.return();d(L),T(P)}})}(t,n,o,i,r,s)}function kh(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),null!=t.currentVideo){var n=t.currentVideo;e.g.style.transformOrigin="top left";var o=!0,i=[],r=n.topLeft.x/n.viewport.x*100;r>0&&r<=100&&(i.push("translateX("+r+"%)"),o=!1),(r=n.topLeft.y/n.viewport.y*100)>0&&r<=100&&(i.push("translateY("+r+"%)"),o=!1),(r=n.size.x/n.viewport.x)<1&&i.push("scaleX("+r+")"),n=n.size.y/n.viewport.y,r<1&&i.push("scaleY("+n+")"),i.length&&(e.g.style.transform=i.join(" ")),o&&(e.g.style.transition="transform 250ms")}e.o&&(t.clickThroughUrl?(e.o.setAttribute("ad-active","true"),e.o.style.pointerEvents=""):e.o.style.pointerEvents="none",t.background&&(e.o.style.background=t.background)),e.H&&(e.H.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Ch(e,t){t&&!t.displayOnBackground||(e.g.style.zIndex=""),t&&null==t.currentVideo||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.o&&(e.o.removeAttribute("ad-active"),e.o.style.pointerEvents="",!t||t.background)&&(e.o.style.background=""),e.H&&(e.H.style.background="")}function Ah(e){for(var t=[],n=g(e.I),o=n.next(),i={};!o.done;i={Ac:void 0},o=n.next())(o=o.value).overlay||(i.Ac={start:o.startTime,end:null},o.pre?(i.Ac.start=0,i.Ac.end=null):o.post?(i.Ac.start=-1,i.Ac.end=null):o.timelineRange&&(i.Ac.end=o.endTime),t.find(function(e){return function(t){return e.Ac.start==t.start&&e.Ac.end==t.end}}(i))||t.push(i.Ac));e.i(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",t)))}function Ih(e){e.j.configure(e.F.di()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),Vi(e.F.Wb(),e.j.Wb())}function Eh(e,t,n){var o,i;return D(function(r){return 1==r.g?(o=Hi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),S(r,e.F.Wb().request(7,o,n).promise,2)):(i=r.h,r.return(i.data))})}function Mh(e){return!(e=e.mimeType)||!e.startsWith("image/")&&"text/html"!==e}function Rh(){var e=ae().Oa();return"TV"==e||"CONSOLE"==e||"CAST"==e}function _h(e,t){if(!(e.M.has(t)||e.N&&!e.N.allowPreloadOnDomElements)){var n=function(e){var t=document.createElement("link");return t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t),t},o=[];if(t.background){var i=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);i&&o.push(n(i[2]))}t.mimeType.startsWith("image/")&&o.push(n(t.uri)),e.M.set(t,o)}}function Lh(e,t){if(e.M.has(t)){for(var n=e.M.get(t),o=(n=g(n)).next();!o.done;o=n.next())(o=o.value).parentNode.removeChild(o);e.M.delete(t)}}function Ph(e,t,n,o,i){this.h=e,this.j=Ut(this.h.skipOffset),this.g=i,this.i=t,this.l=n,this.o=o,this.m=!1}function Dh(e,t,n,o){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=o,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new oe}function Oh(e,t){var n,o,i,r,s,a,l,u;D(function(c){return 1==c.g?t.staticResource?(n=Nh(t),e.G.get(n)?c.return():(o={type:9},i=Hi([t.staticResource],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),r=e.K.request(7,i,o),k(c,2),e.G.set(n,[]),S(c,r.promise,4))):c.return():2!=c.g?(s=c.h,a=$e(s.data),l=JSON.parse(a),u=l.apps,e.G.set(n,u),A(c,0)):(I(c),e.G.delete(n),void T(c))})}function Nh(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Uh(e){var t=e.h.currentTime;if(0!=t&&null==e.B){for(var n,o,i=g(e.j),r=i.next();!r.done;r=i.next())for(var s=g((r=r.value).ads),a=s.next();!a.done;a=s.next())if(a=a.value,o){if(a.startTimeInSeconds<t&&a.startTimeInSeconds>o.startTimeInSeconds+o.durationInSeconds){o=a,n=r;break}}else a.startTimeInSeconds<t&&(o=a,n=r);n&&o&&!e.N.includes(o.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function Bh(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var o=e.F,i=o.startTimeInSeconds+.5*o.durationInSeconds,r=o.startTimeInSeconds+.75*o.durationInSeconds;t>=o.startTimeInSeconds+.25*o.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),zh(e,"firstQuartile")):t>=i&&!e.u.includes("midpoint")?(e.u.push("midpoint"),zh(e,"midpoint")):t>=r&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),zh(e,"thirdQuartile")),o=e.g.getRemainingTime(),i=e.g.getDuration(),e.g.canSkipNow()&&o>0&&i>0&&zh(e,"skipStateChanged"),i>0&&(o<=0||o>i)&&Fh(e)}if(!e.g||!e.g.isLinear()){e:for(o=g(e.j),i=o.next();!i.done&&(i=i.value,!e.g||!e.g.isLinear());i=o.next())for(r=0;r<i.ads.length;r++){var s=i.ads[r],a=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&a>t){if(e.N.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=a;break e}Fh(e),e.M=i,e.g=new Ph(s,r+1,i.ads.length,!0,e.h),e.F=s,0===r&&zh(e,"breakStart"),jh(e);break}}if(!e.g)for(i=(o=g(e.j)).next();!i.done&&(i=i.value,!e.g);i=o.next())for(r=0;r<i.nonLinearAdsList.length;r++)if((s=i.nonLinearAdsList[r]).nonLinearAdList.length){a=i.startTimeInSeconds;var l=e.G.get(Nh(s.nonLinearAdList[0]));if(a<=t&&l&&l.length){Fh(e),a=e;for(var u=(l=g(l)).next();!u.done;u=l.next())if((u=u.value).data.source.length){var c=document.createElement("img");c.src=u.data.source[0].url,c.style.top=(u.placeholder.top||0)+"%",c.style.height=100-(u.placeholder.top||0)+"%",c.style.left=(u.placeholder.left||0)+"%",c.style.maxWidth=100-(u.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",a.C.appendChild(c)}e.M=i,e.g=new Ph(s,r+1,i.ads.length,!1,e.h),e.F=s,0===r&&zh(e,"breakStart"),jh(e);break}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function Fh(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;zh(e,void 0!==t&&t?"skip":"complete");for(var n=(t=g(e.m)).next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],(t=e.g.getPositionInSequence())===(n=e.g.getSequenceLength())&&zh(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function jh(e){var t=!1;e.h.paused?t=!0:(zh(e,"impression"),zh(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&zh(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||zh(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(zh(e,"impression"),zh(e,"start"),t=!1):zh(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){zh(e,"pause")}});for(var n=g(e.m),o=n.next();!o.done;o=n.next())o=o.value,e.o.D(o.target,o.type,o.listener)}function zh(e,t){var n=e.F.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n)for(var o={type:10},i=(n=g(n.beaconUrls)).next();!i.done;i=n.next())(i=i.value)&&""!=i&&((i=Hi([i],Ii())).method="POST",e.K.request(7,i,o));switch(t){case"impression":e.i(new Oi("ad-impression"));break;case"start":e.i(new Oi("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new Oi("ad-muted"));break;case"unmute":e.i(new Oi("ad-volume-changed"));break;case"resume":e.i(new Oi("ad-resumed"));break;case"pause":e.i(new Oi("ad-paused"));break;case"firstQuartile":e.i(new Oi("ad-first-quartile"));break;case"midpoint":e.i(new Oi("ad-midpoint"));break;case"thirdQuartile":e.i(new Oi("ad-third-quartile"));break;case"complete":e.i(new Oi("ad-complete")),e.i(new Oi("ad-stopped"));break;case"skip":e.i(new Oi("ad-skipped")),e.i(new Oi("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Oi("ad-skip-state-changed"))}}function $h(e,t){this.g=e,this.i=null,this.h=t}function Vh(e,t,n,o){var i=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=o,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new oe,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new Oi("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){!function(e,t){e.i(new Oi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}})}(i,e)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){i.C.length?i.j.resolve(i.C):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),i.m=new $h(e,i.l),i.B&&(i.m.i=i.B),i.i(new Oi("ad-started",(new Map).set("ad",i.m))),i.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){i.u.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){i.B=e.getStreamData().adProgressData,i.m&&(i.m.i=i.B)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){i.i(new Oi("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){i.i(new Oi("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){i.i(new Oi("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){i.i(new Oi("ad-complete")),i.i(new Oi("ad-stopped")),i.u.removeAttribute("ad-active"),i.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){i.i(new Oi("ad-skipped")),i.i(new Oi("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[];for(var n=(t=g(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.F=e,i.i(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Hh(){Bi.call(this),this.h=this.i=this.j=this.g=null,this.m=new rh,this.o=navigator.language,this.l=null}function Gh(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}function qh(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Oi){var n={};for(o in t)(e=t[o])&&"object"==typeof e?"detail"==o&&(n[o]=e):o in Event||(n[o]=e);return n}if(t instanceof Error){var o=new Set(["name","message","stack"]);for(n in t)o.add(n);for(e=(n=g(Object.getOwnPropertyNames(t))).next();!e.done;e=n.next())o.add(e.value);for(n={},e=(o=g(o)).next();!e.done;e=o.next())n[e=e.value]=t[e];t={__type__:"Error",contents:n}}else if(t instanceof TimeRanges){for(o={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=g(Js(t))).next();!n.done;n=t.next())e=(n=n.value).end,o.start.push(n.start),o.end.push(e);t=o}else t=ArrayBuffer.isView(t)&&1===t.BYTES_PER_ELEMENT?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return t}})}function Wh(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n})}(i=ah.prototype).needsSkipUI=function(){return!1},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return!0},i.isUsingAnotherMediaElement=function(){return!0},i.getDuration=function(){return this.g.getDuration()},i.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.h.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.h.getAdSkippableState()},i.skip=function(){return this.h.skip()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.resume()},i.getVolume=function(){return this.h.getVolume()},i.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},i.isMuted=function(){return 0==this.h.getVolume()},i.isLinear=function(){return this.g.isLinear()},i.resize=function(e,t){this.h.resize(e,t)},i.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return this.g.getMediaUrl()},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.g=null},$("shaka.ads.ClientSideAd",ah),ah.prototype.release=ah.prototype.release,ah.prototype.getPodIndex=ah.prototype.getPodIndex,ah.prototype.getTimeOffset=ah.prototype.getTimeOffset,ah.prototype.getMediaUrl=ah.prototype.getMediaUrl,ah.prototype.getAdvertiserName=ah.prototype.getAdvertiserName,ah.prototype.getCreativeAdId=ah.prototype.getCreativeAdId,ah.prototype.getAdId=ah.prototype.getAdId,ah.prototype.getVastAdId=ah.prototype.getVastAdId,ah.prototype.getVastMediaWidth=ah.prototype.getVastMediaWidth,ah.prototype.getVastMediaHeight=ah.prototype.getVastMediaHeight,ah.prototype.getVastMediaBitrate=ah.prototype.getVastMediaBitrate,ah.prototype.getDescription=ah.prototype.getDescription,ah.prototype.getTitle=ah.prototype.getTitle,ah.prototype.getPositionInSequence=ah.prototype.getPositionInSequence,ah.prototype.getSequenceLength=ah.prototype.getSequenceLength,ah.prototype.setMuted=ah.prototype.setMuted,ah.prototype.resize=ah.prototype.resize,ah.prototype.isLinear=ah.prototype.isLinear,ah.prototype.isMuted=ah.prototype.isMuted,ah.prototype.setVolume=ah.prototype.setVolume,ah.prototype.getVolume=ah.prototype.getVolume,ah.prototype.play=ah.prototype.play,ah.prototype.pause=ah.prototype.pause,ah.prototype.skip=ah.prototype.skip,ah.prototype.canSkipNow=ah.prototype.canSkipNow,ah.prototype.getTimeUntilSkippable=ah.prototype.getTimeUntilSkippable,ah.prototype.isSkippable=ah.prototype.isSkippable,ah.prototype.isPaused=ah.prototype.isPaused,ah.prototype.getRemainingTime=ah.prototype.getRemainingTime,ah.prototype.getMinSuggestedDuration=ah.prototype.getMinSuggestedDuration,ah.prototype.getDuration=ah.prototype.getDuration,ah.prototype.isUsingAnotherMediaElement=ah.prototype.isUsingAnotherMediaElement,ah.prototype.hasCustomClick=ah.prototype.hasCustomClick,ah.prototype.isClientRendering=ah.prototype.isClientRendering,ah.prototype.needsSkipUI=ah.prototype.needsSkipUI,$("shaka.ads.Utils",lh),lh.ADS_LOADED="ads-loaded",lh.AD_STARTED="ad-started",lh.AD_FIRST_QUARTILE="ad-first-quartile",lh.AD_MIDPOINT="ad-midpoint",lh.AD_THIRD_QUARTILE="ad-third-quartile",lh.AD_COMPLETE="ad-complete",lh.AD_STOPPED="ad-stopped",lh.AD_SKIPPED="ad-skipped",lh.AD_VOLUME_CHANGED="ad-volume-changed",lh.AD_MUTED="ad-muted",lh.AD_PAUSED="ad-paused",lh.AD_RESUMED="ad-resumed",lh.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",lh.CUEPOINTS_CHANGED="ad-cue-points-changed",lh.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",lh.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",lh.AD_CLICKED="ad-clicked",lh.AD_PROGRESS="ad-progress",lh.AD_BUFFERING="ad-buffering",lh.AD_IMPRESSION="ad-impression",lh.AD_DURATION_CHANGED="ad-duration-changed",lh.AD_CLOSED="ad-closed",lh.AD_LOADED="ad-loaded",lh.ALL_ADS_COMPLETED="all-ads-completed",lh.AD_LINEAR_CHANGED="ad-linear-changed",lh.AD_METADATA="ad-metadata",lh.AD_RECOVERABLE_ERROR="ad-recoverable-error",lh.AD_ERROR="ad-error",lh.AD_BREAK_READY="ad-break-ready",lh.AD_INTERACTION="ad-interaction",lh.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",lh.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",lh.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",dh.prototype.configure=function(e){this.o=e},dh.prototype.stop=function(){this.g&&this.g.stop(),this.u&&ta(this.u)},dh.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()},(i=mh.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return null!=this.h.clickThroughUrl},i.isUsingAnotherMediaElement=function(){return this.u},i.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.i&&null!=this.l?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},i.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},i.canSkipNow=function(){return this.i&&0==this.getTimeUntilSkippable()},i.skip=function(){this.canSkipNow()&&this.B()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return null==this.C},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.o},i.getPositionInSequence=function(){return this.m},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return""},i.getAdId=function(){return this.h.id||""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return this.h.uri},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.g=null},$("shaka.ads.InterstitialAd",mh),mh.prototype.release=mh.prototype.release,mh.prototype.getPodIndex=mh.prototype.getPodIndex,mh.prototype.getTimeOffset=mh.prototype.getTimeOffset,mh.prototype.getMediaUrl=mh.prototype.getMediaUrl,mh.prototype.getAdvertiserName=mh.prototype.getAdvertiserName,mh.prototype.getCreativeAdId=mh.prototype.getCreativeAdId,mh.prototype.getAdId=mh.prototype.getAdId,mh.prototype.getVastAdId=mh.prototype.getVastAdId,mh.prototype.getVastMediaWidth=mh.prototype.getVastMediaWidth,mh.prototype.getVastMediaHeight=mh.prototype.getVastMediaHeight,mh.prototype.getVastMediaBitrate=mh.prototype.getVastMediaBitrate,mh.prototype.getDescription=mh.prototype.getDescription,mh.prototype.getTitle=mh.prototype.getTitle,mh.prototype.getPositionInSequence=mh.prototype.getPositionInSequence,mh.prototype.getSequenceLength=mh.prototype.getSequenceLength,mh.prototype.setMuted=mh.prototype.setMuted,mh.prototype.resize=mh.prototype.resize,mh.prototype.isLinear=mh.prototype.isLinear,mh.prototype.isMuted=mh.prototype.isMuted,mh.prototype.setVolume=mh.prototype.setVolume,mh.prototype.getVolume=mh.prototype.getVolume,mh.prototype.play=mh.prototype.play,mh.prototype.pause=mh.prototype.pause,mh.prototype.skip=mh.prototype.skip,mh.prototype.canSkipNow=mh.prototype.canSkipNow,mh.prototype.getTimeUntilSkippable=mh.prototype.getTimeUntilSkippable,mh.prototype.isSkippable=mh.prototype.isSkippable,mh.prototype.isPaused=mh.prototype.isPaused,mh.prototype.getRemainingTime=mh.prototype.getRemainingTime,mh.prototype.getMinSuggestedDuration=mh.prototype.getMinSuggestedDuration,mh.prototype.getDuration=mh.prototype.getDuration,mh.prototype.isUsingAnotherMediaElement=mh.prototype.isUsingAnotherMediaElement,mh.prototype.hasCustomClick=mh.prototype.hasCustomClick,mh.prototype.isClientRendering=mh.prototype.isClientRendering,mh.prototype.needsSkipUI=mh.prototype.needsSkipUI,(i=gh.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return null!=this.g.clickThroughUrl},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return-1},i.isPaused=function(){return!1},i.isSkippable=function(){return!1},i.getTimeUntilSkippable=function(){return 0},i.canSkipNow=function(){return!1},i.skip=function(){},i.pause=function(){},i.play=function(){},i.getVolume=function(){return 1},i.setVolume=function(){},i.isMuted=function(){return!1},i.isLinear=function(){return this.i},i.resize=function(){},i.setMuted=function(){},i.getSequenceLength=function(){return this.j},i.getPositionInSequence=function(){return this.h},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.id||""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return this.g.uri},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){},$("shaka.ads.InterstitialStaticAd",gh),gh.prototype.release=gh.prototype.release,gh.prototype.getPodIndex=gh.prototype.getPodIndex,gh.prototype.getTimeOffset=gh.prototype.getTimeOffset,gh.prototype.getMediaUrl=gh.prototype.getMediaUrl,gh.prototype.getAdvertiserName=gh.prototype.getAdvertiserName,gh.prototype.getCreativeAdId=gh.prototype.getCreativeAdId,gh.prototype.getAdId=gh.prototype.getAdId,gh.prototype.getVastAdId=gh.prototype.getVastAdId,gh.prototype.getVastMediaWidth=gh.prototype.getVastMediaWidth,gh.prototype.getVastMediaHeight=gh.prototype.getVastMediaHeight,gh.prototype.getVastMediaBitrate=gh.prototype.getVastMediaBitrate,gh.prototype.getDescription=gh.prototype.getDescription,gh.prototype.getTitle=gh.prototype.getTitle,gh.prototype.getPositionInSequence=gh.prototype.getPositionInSequence,gh.prototype.getSequenceLength=gh.prototype.getSequenceLength,gh.prototype.setMuted=gh.prototype.setMuted,gh.prototype.resize=gh.prototype.resize,gh.prototype.isLinear=gh.prototype.isLinear,gh.prototype.isMuted=gh.prototype.isMuted,gh.prototype.setVolume=gh.prototype.setVolume,gh.prototype.getVolume=gh.prototype.getVolume,gh.prototype.play=gh.prototype.play,gh.prototype.pause=gh.prototype.pause,gh.prototype.skip=gh.prototype.skip,gh.prototype.canSkipNow=gh.prototype.canSkipNow,gh.prototype.getTimeUntilSkippable=gh.prototype.getTimeUntilSkippable,gh.prototype.isSkippable=gh.prototype.isSkippable,gh.prototype.isPaused=gh.prototype.isPaused,gh.prototype.getRemainingTime=gh.prototype.getRemainingTime,gh.prototype.getMinSuggestedDuration=gh.prototype.getMinSuggestedDuration,gh.prototype.getDuration=gh.prototype.getDuration,gh.prototype.isUsingAnotherMediaElement=gh.prototype.isUsingAnotherMediaElement,gh.prototype.hasCustomClick=gh.prototype.hasCustomClick,gh.prototype.isClientRendering=gh.prototype.isClientRendering,gh.prototype.needsSkipUI=gh.prototype.needsSkipUI,(i=yh.prototype).configure=function(e){this.N=e,bh(this)},i.stop=function(){if(this.l&&this.l.Qa(),this.V.clear(),this.I.clear(),this.j.ng(),this.G.size)for(var e=Array.from(this.G.values()),t=(e=g(e)).next();!t.done;t=e.next())(t=t.value)&&t.then(function(e){e&&e.destroy()});if(this.G.clear(),this.M.size)for(t=(e=g(e=Array.from(this.M.keys()))).next();!t.done;t=e.next())Lh(this,t.value);this.M.clear(),this.j.detach(),this.K=!1,this.B=this.m=null,this.C=!0,this.h=this.g,this.H=null,Ch(this),vh(this),this.o&&ta(this.o),this.u&&(this.u.stop(),this.u=null)},i.release=function(){this.stop(),this.J&&this.J.release(),this.l&&this.l.release(),this.S&&(this.S.stop(),this.S=null),this.O&&(this.O.stop(),this.O=null),this.j.destroy()},i.td=function(){return this.j},i.addAdUrlInterstitial=function(e){var t,n,o,i,r,s,a,l,u,c=this;return D(function(d){if(1==d.g)return S(d,Eh(c,e,t={type:12}),2);if(3!=d.g){if(n=d.h,!(o=Vt(n,"VAST,vmap:VMAP")))throw new je(2,10,10007);if(i=[],"VAST"==o.tagName)return i=uh(o,c.m),d.A(3);if("vmap:VMAP"!=o.tagName)return d.A(3);for(r=function(e){var n,o;return D(function(r){if(1==r.g)return S(r,Eh(c,e.uri,t),2);if(n=r.h,!(o=Vt(n,"VAST")))throw new je(2,10,10007);i.push.apply(i,y(uh(o,e.time))),T(r)})},s=[],a=g(function(e){for(var t=[],n=(e=g(Kt(e,"vmap:AdBreak"))).next();!n.done;n=e.next()){var o=n.value,i=o.attributes.timeOffset;i&&(n=null,n="start"==i?null:"end"==i?1/0:Ut(i),(o=Qt(o,"vmap:AdSource"))&&(o=Qt(o,"vmap:AdTagURI"))&&(o=Xt(o))&&t.push({time:n,uri:o}))}return t}(o)),l=a.next();!l.done;l=a.next())u=l.value,s.push(r(u));return s.length?S(d,Promise.all(s),3):d.A(3)}wh(c,i),T(d)})},(i=Ph.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!1},i.hasCustomClick=function(){return!1},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return this.h.durationInSeconds},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return"number"==typeof this.j},i.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return this.o},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.l?this.l:1},i.getPositionInSequence=function(){return this.i?this.i:1},i.getTitle=function(){return this.h.adTitle},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return this.h.vastAdId||""},i.getAdId=function(){return this.h.adId},i.getCreativeAdId=function(){return this.h.creativeId},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.l=this.i=this.g=this.h=null},$("shaka.ads.MediaTailorAd",Ph),Ph.prototype.release=Ph.prototype.release,Ph.prototype.getPodIndex=Ph.prototype.getPodIndex,Ph.prototype.getTimeOffset=Ph.prototype.getTimeOffset,Ph.prototype.getMediaUrl=Ph.prototype.getMediaUrl,Ph.prototype.getAdvertiserName=Ph.prototype.getAdvertiserName,Ph.prototype.getCreativeAdId=Ph.prototype.getCreativeAdId,Ph.prototype.getAdId=Ph.prototype.getAdId,Ph.prototype.getVastAdId=Ph.prototype.getVastAdId,Ph.prototype.getVastMediaWidth=Ph.prototype.getVastMediaWidth,Ph.prototype.getVastMediaHeight=Ph.prototype.getVastMediaHeight,Ph.prototype.getVastMediaBitrate=Ph.prototype.getVastMediaBitrate,Ph.prototype.getDescription=Ph.prototype.getDescription,Ph.prototype.getTitle=Ph.prototype.getTitle,Ph.prototype.getPositionInSequence=Ph.prototype.getPositionInSequence,Ph.prototype.getSequenceLength=Ph.prototype.getSequenceLength,Ph.prototype.setMuted=Ph.prototype.setMuted,Ph.prototype.resize=Ph.prototype.resize,Ph.prototype.isLinear=Ph.prototype.isLinear,Ph.prototype.isMuted=Ph.prototype.isMuted,Ph.prototype.setVolume=Ph.prototype.setVolume,Ph.prototype.getVolume=Ph.prototype.getVolume,Ph.prototype.play=Ph.prototype.play,Ph.prototype.pause=Ph.prototype.pause,Ph.prototype.skip=Ph.prototype.skip,Ph.prototype.canSkipNow=Ph.prototype.canSkipNow,Ph.prototype.getTimeUntilSkippable=Ph.prototype.getTimeUntilSkippable,Ph.prototype.isSkippable=Ph.prototype.isSkippable,Ph.prototype.isPaused=Ph.prototype.isPaused,Ph.prototype.getRemainingTime=Ph.prototype.getRemainingTime,Ph.prototype.getMinSuggestedDuration=Ph.prototype.getMinSuggestedDuration,Ph.prototype.getDuration=Ph.prototype.getDuration,Ph.prototype.isUsingAnotherMediaElement=Ph.prototype.isUsingAnotherMediaElement,Ph.prototype.hasCustomClick=Ph.prototype.hasCustomClick,Ph.prototype.isClientRendering=Ph.prototype.isClientRendering,Ph.prototype.needsSkipUI=Ph.prototype.needsSkipUI,Dh.prototype.stop=function(){for(var e=g(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);Fh(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},Dh.prototype.release=function(){this.stop(),this.o&&this.o.release()},Dh.prototype.onManifestUpdated=function(e){this.J=e,""!=this.H&&(function(e,t,n){var o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b;D(function(x){if(1==x.g)return o={type:8},i=Hi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),r=e.K.request(7,i,o),k(x,2),S(x,r.promise,4);if(2!=x.g){if(s=x.h,a=[],l=$e(s.data),(u=JSON.parse(l)).avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(u.avails)){for(e.j=u.avails,c=g(e.j),d=c.next();!d.done;d=c.next())for(p=d.value,h=g(p.nonLinearAdsList),f=h.next();!f.done;f=h.next())for(m=f.value,y=g(m.nonLinearAdList),v=y.next();!v.done;v=y.next())b=v.value,Oh(e,b);a=e.getCuePoints(),e.i(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",a)))}}else e.j.length&&e.i(new Oi("ad-cue-points-changed",(new Map).set("cuepoints",a))),Fh(e),e.j=[];return n&&(e.J||a.length>0)&&function(e){Bh(e),e.J||(Uh(e),e.o.D(e.h,"seeked",function(){Uh(e)}),e.o.D(e.h,"ended",function(){Fh(e)})),e.o.D(e.h,"timeupdate",function(){Bh(e)})}(e),A(x,0)}I(x),T(x)})}(this,this.H,this.O),this.O=!1)},Dh.prototype.getCuePoints=function(){for(var e=[],t=g(this.j),n=t.next();!n.done;n=t.next())for(var o=(n=g(n.value.ads)).next();!o.done;o=n.next())o=o.value,e.push({start:o.startTimeInSeconds,end:o.startTimeInSeconds+o.durationInSeconds});return e},(i=$h.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!1},i.hasCustomClick=function(){return!0},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return this.i?this.i.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},i.isPaused=function(){return this.h.paused},i.isSkippable=function(){return this.g.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.h.currentTime+=this.getRemainingTime()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.play()},i.getVolume=function(){return this.h.volume},i.setVolume=function(e){this.h.volume=e},i.isMuted=function(){return this.h.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.h.muted=e},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.i=this.g=null},$("shaka.ads.ServerSideAd",$h),$h.prototype.release=$h.prototype.release,$h.prototype.getPodIndex=$h.prototype.getPodIndex,$h.prototype.getTimeOffset=$h.prototype.getTimeOffset,$h.prototype.getMediaUrl=$h.prototype.getMediaUrl,$h.prototype.getAdvertiserName=$h.prototype.getAdvertiserName,$h.prototype.getCreativeAdId=$h.prototype.getCreativeAdId,$h.prototype.getAdId=$h.prototype.getAdId,$h.prototype.getVastAdId=$h.prototype.getVastAdId,$h.prototype.getVastMediaWidth=$h.prototype.getVastMediaWidth,$h.prototype.getVastMediaHeight=$h.prototype.getVastMediaHeight,$h.prototype.getVastMediaBitrate=$h.prototype.getVastMediaBitrate,$h.prototype.getDescription=$h.prototype.getDescription,$h.prototype.getTitle=$h.prototype.getTitle,$h.prototype.getPositionInSequence=$h.prototype.getPositionInSequence,$h.prototype.getSequenceLength=$h.prototype.getSequenceLength,$h.prototype.setMuted=$h.prototype.setMuted,$h.prototype.resize=$h.prototype.resize,$h.prototype.isLinear=$h.prototype.isLinear,$h.prototype.isMuted=$h.prototype.isMuted,$h.prototype.setVolume=$h.prototype.setVolume,$h.prototype.getVolume=$h.prototype.getVolume,$h.prototype.play=$h.prototype.play,$h.prototype.pause=$h.prototype.pause,$h.prototype.skip=$h.prototype.skip,$h.prototype.canSkipNow=$h.prototype.canSkipNow,$h.prototype.getTimeUntilSkippable=$h.prototype.getTimeUntilSkippable,$h.prototype.isSkippable=$h.prototype.isSkippable,$h.prototype.isPaused=$h.prototype.isPaused,$h.prototype.getRemainingTime=$h.prototype.getRemainingTime,$h.prototype.getMinSuggestedDuration=$h.prototype.getMinSuggestedDuration,$h.prototype.getDuration=$h.prototype.getDuration,$h.prototype.isUsingAnotherMediaElement=$h.prototype.isUsingAnotherMediaElement,$h.prototype.hasCustomClick=$h.prototype.hasCustomClick,$h.prototype.isClientRendering=$h.prototype.isClientRendering,$h.prototype.needsSkipUI=$h.prototype.needsSkipUI,(i=Vh.prototype).configure=function(){},i.stop=function(){this.C="",this.o=null,this.F=[]},i.release=function(){this.stop(),this.h&&this.h.release()},i.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},i.getCuePoints=function(){return this.F},f(Hh,Bi),(i=Hh.prototype).setLocale=function(e){this.o=e},i.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},i.initInterstitial=function(e,t,n){var o=this;this.g&&this.g.release(),this.g=new yh(e,t,n,function(e){return Gh(o,e)}),this.g.configure(this.l)},i.initClientSide=function(t,n,o){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new je(2,10,1e4);this.j&&this.j.release(),this.j=new dh(t,n,this.o,o,function(e){return Gh(i,e)}),this.j.configure(this.l)},i.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Bi.prototype.release.call(this)},i.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Oi("ad-stopped")),this.dispatchEvent(new Oi("ad-content-attach-requested")),this.m=new rh},i.requestClientSideAds=function(e){if(!this.j)throw new je(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},i.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new je(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},i.initMediaTailor=function(e,t,n){var o=this;this.i&&this.i.release(),this.i=new Dh(e,t,n,function(e){return Gh(o,e)})},i.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new je(1,10,10005);var o=this.i;return n=void 0===n?"":n,o.l?e=Promise.reject(new je(1,10,10004)):(o.l=new Ei,function(e,t,n){var o,i,r,s,a,l,u,c,d,p,h,f;D(function(m){if(1==m.g)return o={type:7},(i=Hi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",n&&(r=JSON.stringify(n),i.body=Ge(r)),s=e.K.request(7,i,o),k(m,2),S(m,s.promise,4);if(2!=m.g){if(a=m.h,l=$e(a.data),!(u=JSON.parse(l)).manifestUrl||!u.trackingUrl)throw Error("Insufficient data from MediaTailor.");return c=new ye(t),d=new ye(u.trackingUrl),e.H=c.resolve(d).toString(),p=Date.now()/1e3,h=p-e.R,e.i(new Oi("ads-loaded",(new Map).set("loadTime",h))),f=new ye(u.manifestUrl),e.l.resolve(c.resolve(f).toString()),e.l=null,A(m,0)}if(I(m),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,m.return();e.l.resolve(e.I),e.l=null,T(m)})}(o,e,t),o.I=n||"",o.R=Date.now()/1e3,e=o.l),e},i.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new je(1,10,10005);var t=this.i;t.H=e,t.i(new Oi("ads-loaded",(new Map).set("loadTime",0)))},i.initServerSide=function(t,n){var o=this;if(!e.google||!google.ima||!google.ima.dai)throw new je(2,10,10002);this.h&&this.h.release(),this.h=new Vh(t,n,this.o,function(e){return Gh(o,e)}),this.h.configure(this.l)},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.h)throw new je(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&K('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.0",(n=this.h).j?e=Promise.reject(new je(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new Ei,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new je(1,10,10003);(e.mpt||e.mpv)&&K('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.0",this.h.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){return pe("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},i.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},i.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:sh(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},i.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},i.onDashTimedMetadata=function(e){this.h&&"urn:google:dai:2018"==e.schemeIdUri&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},i.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},i.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&xh(this.g,n))},i.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var o=n.schemeIdUri;if("urn:mpeg:dash:event:alternativeMPD:insert:2025"==o||"urn:mpeg:dash:event:alternativeMPD:replace:2025"==o){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t="urn:mpeg:dash:event:alternativeMPD:replace:2025"==n.schemeIdUri,o="urn:mpeg:dash:event:alternativeMPD:insert:2025"==n.schemeIdUri,t||o)){for(var i,r=n.startTime,s=n.endTime,a=null,l=0,u=g(n.eventNode.children),c=u.next();!c.done;c=u.next())if("AlternativeMPD"==(c=c.value).tagName){if(c=c.attributes.uri){i=c;break}}else if("InsertPresentation"==c.tagName||"ReplacePresentation"==c.tagName){var d=c.attributes.url;if(d){i=Ke(d),(u=en(c,"maxDuration",ln))&&(a=u/n.timescale),(u=en(c,"returnOffset",ln))&&(l=u/n.timescale),t&&l&&(s=r+l);break}}i&&wh(e,[{id:n.id,groupId:null,startTime:r,endTime:s,uri:i,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:o?l:null,playoutLimit:a,once:!1,pre:!1,post:!1,timelineRange:t&&!o,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else("urn:mpeg:dash:event:2012"==o||"urn:scte:dash:scte214-events"==o)&&n.eventNode&&Qt(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&function(e,t){var n=Qt(t.eventNode,"OverlayEvent"),o=n.attributes.uri,i=n.attributes.mimeType,r="true"==n.attributes.loop,s=en(n,"z",ln);if(o&&0!=s){var a=null,l=Qt(n,"Background");if(l){var u=l.attributes.uri;a=u?"center / contain no-repeat url('"+u+"')":Yt(l)}l=1920,u=1080;var c=Qt(n,"Viewport");if(c){if(null==(l=en(c,"x",ln)))return;if(null==(u=en(c,"y",ln)))return}var d={viewport:{x:l,y:u},topLeft:{x:0,y:0},size:{x:l,y:u}},p=Qt(n,"Overlay");if(c&&p){var h=Qt(p,"TopLeft"),f=Qt(p,"Size");if(h&&f){if(null==(p=en(h,"x",ln)))return;if(null==(h=en(h,"y",ln)))return;var m=en(f,"x",ln);if(null==m)return;if(null==(f=en(f,"y",ln)))return;d.topLeft.x=p,d.topLeft.y=h,d.size.x=m,d.size.y=f}}if(p=null,n=Qt(n,"Squeeze"),c&&n&&(f=Qt(n,"TopLeft"),n=Qt(n,"Size"),f&&n)){if(null==(c=en(f,"x",ln)))return;if(null==(p=en(f,"y",ln)))return;if(null==(f=en(n,"x",ln)))return;if(null==(n=en(n,"y",ln)))return;p={viewport:{x:l,y:u},topLeft:{x:c,y:p},size:{x:f,y:n}}}wh(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:o,mimeType:i,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:r,overlay:d,displayOnBackground:-1==s,currentVideo:p,background:a,clickThroughUrl:null}])}}(this.g,n))}},i.addCustomInterstitial=function(e){if(!this.g)throw new je(1,10,10006);wh(this.g,[e])},i.addAdUrlInterstitial=function(e){if(!this.g)throw new je(1,10,10006);return this.g.addAdUrlInterstitial(e)},i.getInterstitialPlayer=function(){if(!this.g)throw new je(1,10,10006);return this.g.td()},$("shaka.ads.AdManager",Hh),Hh.prototype.getInterstitialPlayer=Hh.prototype.getInterstitialPlayer,Hh.prototype.addAdUrlInterstitial=Hh.prototype.addAdUrlInterstitial,Hh.prototype.addCustomInterstitial=Hh.prototype.addCustomInterstitial,Hh.prototype.onDASHInterstitialMetadata=Hh.prototype.onDASHInterstitialMetadata,Hh.prototype.onHLSInterstitialMetadata=Hh.prototype.onHLSInterstitialMetadata,Hh.prototype.onCueMetadataChange=Hh.prototype.onCueMetadataChange,Hh.prototype.onHlsTimedMetadata=Hh.prototype.onHlsTimedMetadata,Hh.prototype.onDashTimedMetadata=Hh.prototype.onDashTimedMetadata,Hh.prototype.onManifestUpdated=Hh.prototype.onManifestUpdated,Hh.prototype.getStats=Hh.prototype.getStats,Hh.prototype.getCuePoints=Hh.prototype.getCuePoints,Hh.prototype.getServerSideCuePoints=Hh.prototype.getServerSideCuePoints,Hh.prototype.replaceServerSideAdTagParameters=Hh.prototype.replaceServerSideAdTagParameters,Hh.prototype.requestServerSideStream=Hh.prototype.requestServerSideStream,Hh.prototype.initServerSide=Hh.prototype.initServerSide,Hh.prototype.addMediaTailorTrackingUrl=Hh.prototype.addMediaTailorTrackingUrl,Hh.prototype.requestMediaTailorStream=Hh.prototype.requestMediaTailorStream,Hh.prototype.initMediaTailor=Hh.prototype.initMediaTailor,Hh.prototype.updateClientSideAdsRenderingSettings=Hh.prototype.updateClientSideAdsRenderingSettings,Hh.prototype.requestClientSideAds=Hh.prototype.requestClientSideAds,Hh.prototype.onAssetUnload=Hh.prototype.onAssetUnload,Hh.prototype.release=Hh.prototype.release,Hh.prototype.initClientSide=Hh.prototype.initClientSide,Hh.prototype.initInterstitial=Hh.prototype.initInterstitial,Hh.prototype.configure=Hh.prototype.configure,Hh.prototype.setLocale=Hh.prototype.setLocale,Hh.ADS_LOADED="ads-loaded",Hh.AD_STARTED="ad-started",Hh.AD_FIRST_QUARTILE="ad-first-quartile",Hh.AD_MIDPOINT="ad-midpoint",Hh.AD_THIRD_QUARTILE="ad-third-quartile",Hh.AD_COMPLETE="ad-complete",Hh.AD_STOPPED="ad-stopped",Hh.AD_SKIPPED="ad-skipped",Hh.AD_VOLUME_CHANGED="ad-volume-changed",Hh.AD_MUTED="ad-muted",Hh.AD_PAUSED="ad-paused",Hh.AD_RESUMED="ad-resumed",Hh.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Hh.CUEPOINTS_CHANGED="ad-cue-points-changed",Hh.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Hh.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Hh.AD_CLICKED="ad-clicked",Hh.AD_PROGRESS="ad-progress",Hh.AD_BUFFERING="ad-buffering",Hh.AD_IMPRESSION="ad-impression",Hh.AD_DURATION_CHANGED="ad-duration-changed",Hh.AD_CLOSED="ad-closed",Hh.AD_LOADED="ad-loaded",Hh.ALL_ADS_COMPLETED="all-ads-completed",Hh.AD_LINEAR_CHANGED="ad-linear-changed",Hh.AD_METADATA="ad-metadata",Hh.AD_RECOVERABLE_ERROR="ad-recoverable-error",Hh.AD_ERROR="ad-error",Hh.AD_BREAK_READY="ad-break-ready",Hh.AD_INTERACTION="ad-interaction",Hh.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Hh.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Hh.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",oh=function(){return new Hh};var Kh="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Xh="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Yh=["loop","playbackRate"],Jh=["pause","play"],Qh=(new Map).set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1),Zh=(new Map).set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),ef=(new Map).set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),tf=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],nf=[["isTextTrackVisible","setTextTrackVisibility"]],of="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),rf="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function sf(e,t,n,o,i,r,s){var a=this;this.H=e,this.K=s,this.l=new To(t),this.M=n,this.u=!1,this.B=o,this.G=i,this.N=r,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return cf(a)},this.F=function(e,t){switch((e=Wh(t)).type){case"event":var n=e.targetName,o=Ni(e.event);a.B(n,o);break;case"update":for(o in n=e.update)for(var i in e=a.g[o]||{},n[o])e[i]=n[o][i];a.u&&(a.M(),a.u=!1);break;case"asyncComplete":if(i=e.id,o=e.error,t=e.res,e=a.h.get(i),a.h.delete(i),e)if(o){for(n in i=new je(o.severity,o.category,o.code),o)i[n]=o[n];e.reject(i)}else e.resolve(t)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,yf.add(this)}function af(e,t){var n=e.N();mf=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),cf(e),pf(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function lf(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new je(2,8,n,t))}function uf(e){var t=mf;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function cf(e){var t=!!mf&&"connected"==mf.status;if(e.i&&!t){for(var n in e.G(),e.g)e.g[n]={};df(e)}e.i=t,e.J=t?mf.receiver.friendlyName:"",e.l.Kb()}function df(e){if(e.h)for(var t=g(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var o=e.h.get(n);e.h.delete(n),o.reject(new je(1,7,7e3))}}function pf(e,t){t=qh(t);var n=mf;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Y)}catch(o){throw t=new je(2,8,8005,o),n=new Oi("error",(new Map).set("detail",t)),e.B("player",n),e.qd(),t}}(i=sf.prototype).destroy=function(){return yf.delete(this),df(this),mf&&uf(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},i.yb=function(){return this.i},i.ah=function(){return this.J},i.init=function(){if(this.H.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Kb();var t=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=g(yf),n=t.next();!n.done;n=t.next()){var o=e;(n=n.value).j=new Ei,n.u=!0,af(n,o)}},function(e){for(var t=g(yf),n=t.next();!n.done;n=t.next())n=n.value,ff="available"==e,n.l.Kb()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),ff&&this.l.ka(hf),(t=mf)&&t.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Ei,this.u=!0,af(this,t)):mf=null}else e.__onGCastApiAvailable!==vf&&(gf=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=vf)},i.nh=function(e){this.o=e,this.i&&pf(this,{type:"appData",appData:this.o})},i.cast=function(){var e=this;return D(function(t){if(!e.m)throw new je(1,8,8e3);if(!ff)throw new je(1,8,8001);if(e.i)throw new je(1,8,8002);return e.j=new Ei,chrome.cast.requestSession(function(t){return af(e,t)},function(t){return lf(e,t)}),S(t,e.j,0)})},i.qd=function(){if(this.i){if(df(this),mf){uf(this);try{mf.stop(function(){},function(){})}catch(Tk){}mf=null}cf(this)}},i.get=function(e,t){var n=this;if("video"==e){if(Jh.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(y(O.apply(0,arguments))))}}else if("player"==e){if(ef.has(t)&&!this.get("player","isLive")())return function(){};if(of.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(y(O.apply(0,arguments))))};if(rf.includes(t))return function(){return n.Nk.apply(n,[e,t].concat(y(O.apply(0,arguments))))};if(Qh.has(t)||Zh.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,pf(this,{type:"set",targetName:e,property:t,value:n})},i.Fi=function(e,t){pf(this,{type:"call",targetName:e,methodName:t,args:O.apply(2,arguments)})},i.Nk=function(e,t){var n=O.apply(2,arguments),o=new Ei,i=this.I.toString();this.I++,this.h.set(i,o);try{pf(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(r){o.reject(r)}return o};var hf=.02,ff=!1,mf=null,gf=null,yf=new Set;function vf(t){if(gf?e.__onGCastApiAvailable=gf:delete e.__onGCastApiAvailable,gf=null,t)for(var n=g(yf),o=n.next();!o.done;o=n.next())o.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function bf(t,n,o,i){i=void 0!==i&&i,Bi.call(this);var r=this;this.i=t,this.h=n,this.l=this.o=this.m=this.u=this.j=null,this.I=o,this.H=i,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,e.chrome?(this.g=new sf(o,function(){return Sf(r)},function(){return Tf(r)},function(e,t){return If(r,e,t)},function(){return kf(r)},function(){return wf(r)},i),function(e){e.g.init(),e.l=new oe;for(var t=g(Kh),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(t){e.g.yb()||(t=Ni(t),e.m.dispatchEvent(t))});for(var o in Ui)e.l.D(e.h,Ui[o],function(t){e.g.yb()||e.o.dispatchEvent(t)});for(var i in e.j={},t={},e.i)(t={be:t.be}).be=i,Object.defineProperty(e.j,t.be,{configurable:!1,enumerable:!0,get:function(t){return function(){return Cf(e,t.be)}}(t),set:function(t){return function(n){var o=t.be;e.g.yb()?e.g.set("video",o,n):e.i[o]=n}}(t)});e.u={},xf(e,function(t){Object.defineProperty(e.u,t,{configurable:!1,enumerable:!0,get:function(){return Af(e,t)}})}),function(e){var t=new Map;xf(e,function(n,o){t.has(o)?(o=t.get(o),n.length<o.length?e.G.set(n,o):e.G.set(o,n)):t.set(o,n)})}(e),e.m=new Bi,e.m.Ee=e.j,e.o=new Bi,e.o.Ee=e.u,e.l.D(e.h,"unloading",function(){e.g&&e.g.yb()||Ef(e)})}(this)):(this.j=this.i,this.u=this.h)}function xf(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var o,i=e.h,r=new Set;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=g(Object.getOwnPropertyNames(e)),a=s.next();!a.done;a=s.next())n(a=a.value)&&(r.add(a),t(a,i[a]));e=Object.getPrototypeOf(e)}}function wf(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=g(Yh),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.i[o];for(e.i.ended||(t.startTime=e.i.currentTime),o=(n=g(tf)).next();!o.done;o=n.next()){var i=o.value;o=i[1],i=e.h[i[0]](),t.player[o]=i}for(o=(n=g(nf)).next();!o.done;o=n.next())o=(i=o.value)[1],i=e.h[i[0]](),t.playerAfterLoad[o]=i;return t}function Sf(e){var t=new Oi("caststatuschanged");e.dispatchEvent(t)}function Tf(e){var t=new Oi(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function kf(e){for(var t=g(tf),n=t.next();!n.done;n=t.next()){var o=n.value;n=o[1],o=e.g.get("player",o[0])(),e.h[n](o)}var i=e.F,r=e.C,s=e.B;Ef(e);var a=e.g.get("player","getAssetUri")();o=e.g.get("video","ended"),t=Promise.resolve();var l,u=e.i.autoplay;n=null,o||(n=e.g.get("video","currentTime")),(o=e.g.get("player","getTextTracks")())&&o.length&&(l=o.find(function(e){return e.active}));var c=e.g.get("player","isTextTrackVisible")();a&&(e.i.autoplay=!1,t=e.h.load(a,n));var d={};for(o=(n=g(Yh)).next();!o.done;o=n.next())o=o.value,d[o]=e.g.get("video",o);t.then(function(){if(e.i){for(var t=g(i),n=t.next();!n.done;n=t.next()){var o;n=n.value,(o=e.td()).Le.apply(o,y(n))}for(o=(t=g(r)).next();!o.done;o=t.next()){var p;o=o.value,(p=e.td()).Md.apply(p,y(o))}for(t=(p=g(s)).next();!t.done;t=p.next()){var h;t=t.value,(h=e.td()).Ke.apply(h,y(t))}for(p=(h=g(Yh)).next();!p.done;p=h.next())p=p.value,e.i[p]=d[p];for(p=(h=g(nf)).next();!p.done;p=h.next())p=(t=p.value)[1],t=e.g.get("player",t[0])(),e.h[p](t);e.h.rh(c),l&&e.h.kh(l.language,l.roles,l.forced),e.i.autoplay=u,a&&e.i.play()}},function(t){t=new Oi("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)})}function Cf(e,t){if("addEventListener"==t)return function(t,n,o){return e.m.addEventListener(t,n,o)};if("removeEventListener"==t)return function(t,n,o){return e.m.removeEventListener(t,n,o)};if(e.g.yb()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.yb()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function Af(e,t,n){if(n=void 0!==n&&n,e.G.has(t)&&(t=e.G.get(t)),"addEventListener"==t)return function(t,n,o){return e.o.addEventListener(t,n,o)};if("removeEventListener"==t)return function(t,n,o){return e.o.removeEventListener(t,n,o)};if("getMediaElement"==t)return function(){return e.j};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Wb()};if("getDrmEngine"==t)return function(){return e.h.F};if("getAdManager"==t)return function(){return e.h.Zh()};if("getQueueManager"==t)return function(){return e.h.ei()};if("setVideoContainer"==t)return function(t){return e.h.Ti(t)};if(!n){if("addThumbnailsTrack"==t)return function(){var n=O.apply(0,arguments);return e.F.push(n),Af(e,t,!0).apply(null,y(n))};if("addTextTrackAsync"==t)return function(){var n=O.apply(0,arguments);return e.C.push(n),Af(e,t,!0).apply(null,y(n))};if("addChaptersTrack"==t)return function(){var n=O.apply(0,arguments);return e.B.push(n),Af(e,t,!0).apply(null,y(n))}}if(e.g.yb()){if("getManifest"==t||"drmInfo"==t)return function(){return K(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return K(t+"() does not work while casting!"),Promise.resolve()};if("getChapters"==t)return function(){return K(t+"() does not work while casting!"),[]}}return e.g.yb()&&0==Object.keys(e.g.g.video).length&&(Qh.has(t)||Zh.has(t))||!e.g.yb()?e.h[t].bind(e.h):e.g.get("player",t)}function If(e,t,n){e.g.yb()&&("video"==t?e.m.dispatchEvent(n):"player"==t&&("unloading"==n.type&&Ef(e),e.o.dispatchEvent(n)))}function Ef(e){e.F=[],e.C=[],e.B=[]}function Mf(e,t,n,o){Bi.call(this);var i=this;this.h=e,this.g=t,this.j=new oe,this.I={video:e,player:t},this.G=n||function(){},this.J=o||function(e){return e},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new To(function(){Pf(i)}),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Rf(e)},t.onSenderDisconnected=function(){return Rf(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Uf(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Uf(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(t){return function(e,t){var n=Wh(t.data);switch(n.type){case"PLAY":e.h.play(),Bf(e);break;case"PAUSE":e.h.pause(),Bf(e);break;case"SEEK":t=n.currentTime;var o=n.resumeState;null!=t&&(e.h.currentTime=Number(t)),o&&"PLAYBACK_START"==o?(e.h.play(),Bf(e)):o&&"PLAYBACK_PAUSE"==o&&(e.h.pause(),Bf(e));break;case"STOP":e.g.Bc().then(function(){e.g&&Bf(e)});break;case"GET_STATUS":Of(e,Number(n.requestId));break;case"VOLUME":t=(o=n.volume).level,o=o.muted;var i=e.h.volume,r=e.h.muted;null!=t&&(e.h.volume=Number(t)),null!=o&&(e.h.muted=o),i==e.h.volume&&r==e.h.muted||Bf(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,o=n.currentTime,i=e.J(t.contentId),r=n.autoplay||!0,e.G(t.customData),r&&(e.h.autoplay=!0),e.g.load(i,o).then(function(){e.g&&Of(e)}).catch(function(t){var o="LOAD_FAILED";7==t.category&&7e3==t.code&&(o="LOAD_CANCELLED"),Uf(e,{requestId:Number(n.requestId),type:o},e.u)});break;default:Uf(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=Wh(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,function(e,t,n){var o,i,r,s,a,l,u,c,d,p,h,f,m,v,b,x,w,C,E;D(function(M){switch(M.g){case 1:for(o in t.player)i=t.player[o],e.g[o](i);return e.G(n),r=e.h.autoplay,t.manifest?(e.h.autoplay=!1,k(M,5),S(M,e.g.load(t.manifest,t.startTime),7)):S(M,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(s=g(t.addThumbnailsTrackCalls),a=s.next();!a.done;a=s.next())l=a.value,e.g.Le.apply(e.g,y(l));if(t.addTextTrackAsyncCalls)for(u=g(t.addTextTrackAsyncCalls),c=u.next();!c.done;c=u.next())d=c.value,e.g.Md.apply(e.g,y(d));if(t.addChaptersTrackCalls)for(p=g(t.addChaptersTrackCalls),h=p.next();!h.done;h=p.next())f=h.value,e.g.Ke.apply(e.g,y(f));A(M,3);break;case 5:return m=I(M),v=(new Map).set("detail",m),b=new Oi("error",v),e.g&&e.g.dispatchEvent(b),M.return();case 3:if(!e.g)return M.return();for(x in t.video)w=t.video[x],e.h[x]=w;for(C in t.playerAfterLoad)E=t.playerAfterLoad[C],e.g[C](E);e.h.autoplay=r,t.manifest&&(e.h.play(),Bf(e)),T(M)}})}(e,n.initState,n.appData),Pf(e);break;case"appData":e.G(n.appData);break;case"set":var o=n.targetName,i=n.property;if(n=n.value,"video"==o){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.I[o][i]=n;break;case"call":(o=e.I[n.targetName])[n.methodName].apply(o,n.args);break;case"asyncCall":o=n.targetName,i=n.methodName,"player"==o&&"load"==i&&(e.m=0,e.C=!1);var r=n.id,s=t.senderId;n=(t=e.I[o])[i].apply(t,n.args),"player"==o&&"load"==i&&(n=n.then(function(){e.B=!0})),n.then(function(t){return Nf(e,s,r,null,t)},function(t){return Nf(e,s,r,t,null)})}}(e,t)},t.start();for(var n=(t=g(Kh)).next();!n.done;n=t.next())e.j.D(e.h,n.value,function(t){return Lf(e,"video",t)});for(var o in Ui)e.j.D(e.g,Ui[o],function(t){return Lf(e,"player",t)});e.j.D(e.h,"loadeddata",function(){e.C=!0}),e.j.D(e.g,"loading",function(){e.o=!1,_f(e)}),e.j.D(e.h,"playing",function(){e.o=!1,_f(e)}),e.j.D(e.h,"pause",function(){_f(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,_f(e)}),e.j.D(e.h,"ended",function(){new To(function(){e.h&&e.h.ended&&(e.o=!0,_f(e))}).ka(jf)})}(this)}function Rf(e){e.m=0,e.B=!0,e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,_f(e)}function _f(e){var t;D(function(n){return 1==n.g?S(n,Promise.resolve(),2):e.g?(t=new Oi("caststatuschanged"),e.dispatchEvent(t),Df(e)||Bf(e),void T(n)):n.return()})}function Lf(e,t,n){e.g&&(Pf(e),Uf(e,{type:"event",targetName:t,event:n},e.l))}function Pf(e){e.F.ka(Ff);for(var t={video:{},player:{}},n=g(Xh),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.h[o];e.g.W()&&ef.forEach(function(n,o){e.m%n==0&&(t.player[o]=e.g[o]())}),Qh.forEach(function(n,o){e.m%n==0&&(t.player[o]=e.g[o]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Uf(e,{type:"update",update:t},e.l),Zh.forEach(function(t,n){e.m%t==0&&((t={player:{}}).player[n]=e.g[n](),Uf(e,{type:"update",update:t},e.l))}),e.C&&(e.m+=1),Df(e)}function Df(e){return!(!e.B||!e.h.duration&&!e.g.W()||(Of(e),e.B=!1,0))}function Of(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Bf(e,void 0===t?0:t,n)}function Nf(e,t,n,o,i){e.g&&Uf(e,{type:"asyncComplete",id:n,error:o,res:i},e.l,t)}function Uf(e,t,n,o){e.H&&(e=qh(t),o?n.getCastChannel(o).send(e):n.broadcast(e))}function Bf(e,t,n){n=void 0===n?null:n;var o={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?zf:e.g.Og()?Vf:e.h.paused?Hf:$f,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(o.media=n),Uf(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[o]},e.u)}f(bf,Bi),(i=bf.prototype).destroy=function(e){return this.g&&void 0!==e&&e&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,Bi.prototype.release.call(this),Promise.all(e)},i.dk=function(){return this.j},i.td=function(){return this.u},i.mj=function(){return!!this.g&&this.g.m&&ff},i.yb=function(){return!!this.g&&this.g.yb()},i.ah=function(){return this.g?this.g.ah():""},i.cast=function(){var e=this;return D(function(t){return 1==t.g?e.g?S(t,e.g.cast(),2):t.return():e.h?S(t,e.h.Bc(),0):t.return()})},i.nh=function(e){this.g&&this.g.nh(e)},i.fl=function(){var e;this.g&&(e=this.g).i&&chrome.cast.requestSession(function(t){return af(e,t)},function(t){return lf(e,t)})},i.qd=function(){this.g&&this.g.qd()},i.nj=function(e,t){t=void 0!==t&&t;var n=this;return D(function(o){if(1==o.g)return e==n.I&&t==n.H?o.return():(n.I=e,n.H=t,n.g?(n.g.qd(),S(o,n.g.destroy(),2)):o.return());n.g=null,n.g=new sf(e,function(){return Sf(n)},function(){return Tf(n)},function(e,t){return If(n,e,t)},function(){return kf(n)},function(){return wf(n)},t),n.g.init(),T(o)})},$("shaka.cast.CastProxy",bf),bf.prototype.changeReceiverId=bf.prototype.nj,bf.prototype.forceDisconnect=bf.prototype.qd,bf.prototype.suggestDisconnect=bf.prototype.fl,bf.prototype.setAppData=bf.prototype.nh,bf.prototype.cast=bf.prototype.cast,bf.prototype.receiverName=bf.prototype.ah,bf.prototype.isCasting=bf.prototype.yb,bf.prototype.canCast=bf.prototype.mj,bf.prototype.getPlayer=bf.prototype.td,bf.prototype.getVideo=bf.prototype.dk,bf.prototype.destroy=bf.prototype.destroy,f(Mf,Bi),(i=Mf.prototype).isConnected=function(){return this.H},i.kk=function(){return this.o},i.Zk=function(e){this.i=e},i.rj=function(){this.i=null},i.$k=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.Yk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.Xk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return D(function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.g&&(e.push(t.g.destroy()),t.g=null),t.F&&(t.F.stop(),t.F=null),t.h=null,t.I=null,t.G=null,t.H=!1,t.o=!0,t.l=null,t.u=null,Bi.prototype.release.call(t),S(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),T(n)})},$("shaka.cast.CastReceiver",Mf),Mf.prototype.destroy=Mf.prototype.destroy,Mf.prototype.setContentArtist=Mf.prototype.Xk,Mf.prototype.setContentImage=Mf.prototype.Yk,Mf.prototype.setContentTitle=Mf.prototype.$k,Mf.prototype.clearContentMetadata=Mf.prototype.rj,Mf.prototype.setContentMetadata=Mf.prototype.Zk,Mf.prototype.isIdle=Mf.prototype.kk,Mf.prototype.isConnected=Mf.prototype.isConnected;var Ff=.5,jf=5,zf="IDLE",$f="PLAYING",Vf="BUFFERING",Hf="PAUSED";function Gf(e,t,n,o,i){if(o>=i)return null;for(var r=-1,s=-1,a=0;a<n.length;a++)if(n[a].some(function(e){return null!=e&&""!=e.g.trim()})){r=a;break}for(a=n.length-1;a>=0;a--)if(n[a].some(function(e){return null!=e&&""!=e.g.trim()})){s=a;break}if(-1===r||-1===s)return null;for(var l=a=!1,u="white",c="black",d=qf(o,i,a,l,u,c);r<=s;r++){for(var p=n[r],h=-1,f=-1,m=0;m<p.length;m++)if(null!=p[m]&&""!==p[m].g.trim()){h=m;break}for(m=p.length-1;m>=0;m--)if(null!=p[m]&&""!==p[m].g.trim()){f=m;break}if(-1===h||-1===f)p=Wf(o,i),e.nestedCues.push(p);else{for(;h<=f;h++)if(m=p[h]){var g=m.l,y=m.i,v=m.j,b=m.h;g==a&&y==l&&v==u&&b==c||(d.payload&&e.nestedCues.push(d),d=qf(o,i,g,y,v,b),a=g,l=y,u=v,c=b),d.payload+=m.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),r!==s&&(d=Wf(o,i),e.nestedCues.push(d)),d=qf(o,i,a,l,u,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function qf(e,t,n,o,i,r){return e=new Sn(e,t,""),n&&e.textDecoration.push(qn),o&&(e.fontStyle=Hn),e.color=i,e.backgroundColor=r,e}function Wf(e,t){return(e=new Sn(e,t,"")).lineBreak=!0,e}function Kf(e,t,n,o,i){this.g=e,this.l=t,this.i=n,this.h=o,this.j=i}function Xf(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,Jf(this)}function Yf(e,t,n){var o="CC"+(1+(e.F<<1|e.C)),i=new Sn(t,n,"");i.lineInterpretation=1;var r=rm.get(e.g);return r&&(i.line=r),null!=e.u&&null!=e.B&&(i.position=10+Math.min(70,10*e.u)+2.5*e.B),(t=Gf(i,o,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(r=rm.get(e.g+3-t.cue.nestedCues.length))&&(i.line=r),t}function Jf(e){em(e,0,15),e.g=1}function Qf(e,t,n){if(!(n<32||n>127)){var o="";switch(t){case 0:o=tm.has(n)?tm.get(n):String.fromCharCode(n);break;case 1:o=nm.get(n);break;case 2:e.i[e.g].pop(),o=om.get(n);break;case 3:e.i[e.g].pop(),o=im.get(n)}o&&e.i[e.g].push(new Kf(o,e.m,e.j,e.o,e.l))}}function Zf(e,t,n,o){if(!(n<0||t<0))if(t>=n)for(--o;o>=0;o--)e.i[t+o]=e.i[n+o].map(function(e){return e});else for(var i=0;i<o;i++)e.i[t+i]=e.i[n+i].map(function(e){return e})}function em(e,t,n){for(var o=0;o<=n;o++)e.i[t+o]=[]}var tm=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),nm=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),om=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),im=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),rm=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function sm(e,t){this.h=0,this.o=new Xf(e,t),this.i=new Xf(e,t),this.g=this.j=new Xf(e,t),this.l=0,this.m=null}function am(e,t,n){e.g=e.i;var o=e.g,i=null;return 3!==e.h&&4!==e.h&&(i=Yf(o,e.l,n),(n=e.i).g=n.h>0?n.h:0,em(n,0,15),(n=e.j).g=n.h>0?n.h:0,em(n,0,15),o.g=15),e.h=3,o.h=t,i}function lm(e){e.h=1,e.g=e.j,e.g.h=0}function um(e){X("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var cm="black green blue cyan red yellow magenta black".split(" "),dm="white green blue cyan red yellow magenta white_italics".split(" ");function pm(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",hm(this)}function hm(e){e.i=[];for(var t=0;t<16;t++)e.i.push(fm())}function fm(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function mm(e,t){gm(e)&&(e.i[e.h][e.g]=new Kf(t,e.F,e.B,e.u,e.C),e.g++)}function gm(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}function ym(e,t,n){var o=new Sn(e.j,t,"");o.textAlign=0===e.G?"left":1===e.G?"right":Rn;var i=o.region;switch(e.J&&(i.id+="svc"+e.J),i.id+="win"+e.N,i.height=e.o,i.width=e.m,i.heightUnits=2,i.widthUnits=2,i.viewportAnchorX=e.I,i.viewportAnchorY=e.M,i.viewportAnchorUnits=e.K?Rt:2,e.H){case 0:i.regionAnchorX=0,i.regionAnchorY=0;break;case 1:i.regionAnchorX=50,i.regionAnchorY=0;break;case 2:i.regionAnchorX=100,i.regionAnchorY=0;break;case 3:i.regionAnchorX=0,i.regionAnchorY=50;break;case 4:i.regionAnchorX=50,i.regionAnchorY=50;break;case 5:i.regionAnchorX=100,i.regionAnchorY=50;break;case 6:i.regionAnchorX=0,i.regionAnchorY=100;break;case 7:i.regionAnchorX=50,i.regionAnchorY=100;break;case 8:i.regionAnchorX=100,i.regionAnchorY=100}return(n=Gf(o,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function vm(){this.i=[],this.h=null,this.g=0}function bm(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new xm(e.h)),e.h=null,e.g=0))}function xm(e){this.g=0,this.h=e}function wm(e){if(!e.Ia())throw new je(2,2,3e3);return e.h[e.g++]}function Sm(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Tm(e,t,n,o){if(!e.g)return[];if(24==n)return n=wm(t).value,o=wm(t).value,n=[n,o].map(function(e){return("0"+(255&e).toString(16)).slice(-2)}).join(""),mm(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var i=null;switch(n){case 8:!gm(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(i=ym(t,o,e.i)),t.h+1>=t.o?function(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=fm()}(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(i=ym(t,o,e.i)),t.i[t.h]=fm(),t.g=0;break;case 12:t.isVisible()&&(i=ym(t,o,e.i)),hm(t),t.h=0,t.g=0}return i?[i]:[]}function km(e,t,n,o){if(n>=128&&n<=135)o=7&n,e.h[o]&&(e.g=e.h[o]);else{if(136===n){n=wm(t).value,t=[];for(var i=(n=g(Cm(e,n))).next();!i.done;i=n.next()){if((i=e.h[i.value]).isVisible()){var r=ym(i,o,e.i);r&&t.push(r)}hm(i)}return t}if(137===n)for(n=(t=g(Cm(e,t=wm(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=o),n.display();else{if(138===n){for(n=wm(t).value,t=null,i=(n=g(Cm(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=ym(i,o,e.i)),i.l=!1;return t?[t]:[]}if(139===n){for(n=wm(t).value,t=null,i=(n=g(Cm(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()?t=ym(i,o,e.i):i.j=o,i.l=!i.l;return t?[t]:[]}if(140===n)return Am(e,t=wm(t).value,o);if(143===n)return o=Am(e,255,o),Im(e),o;if(144===n)t.skip(1),o=wm(t).value,e.g&&(e.g.B=(128&o)>0,e.g.F=(64&o)>0);else if(145===n)o=wm(t).value,n=wm(t).value,t.skip(1),e.g&&(t=Em((48&n)>>4,(12&n)>>2,3&n),e.g.C=Em((48&o)>>4,(12&o)>>2,3&o),e.g.u=t);else if(146===n)o=wm(t).value,t=wm(t).value,e.g&&((e=e.g).h=15&o,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),o=wm(t).value,t.skip(1),e.g&&(e.g.G=3&o);else if(n>=152&&n<=159){n=(15&n)-8,(i=null!==e.h[n])||((r=new pm(n,e.i)).j=o,e.h[n]=r),o=wm(t).value,r=wm(t).value;var s=wm(t).value,a=wm(t).value,l=wm(t).value;t=wm(t).value,i&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),(t=e.h[n]).l=(32&o)>0,t.M=127&r,t.I=s,t.H=(240&a)>>4,t.K=(128&r)>0,t.o=1+(15&a),t.m=1+(63&l),e.g=e.h[n]}}}return[]}function Cm(e,t){for(var n=[],o=0;o<8;o++)!(1&~t)&&e.h[o]&&n.push(o),t>>=1;return n}function Am(e,t,n){for(var o=[],i=(t=g(Cm(e,t))).next();!i.done;i=t.next()){i=i.value;var r=e.h[i];r.isVisible()&&(r=ym(r,n,e.i))&&o.push(r),e.h[i]=null}return o}function Im(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Em(e,t,n){var o={0:0,1:0,2:1,3:1};return Rm[(e=o[e])<<2|(t=o[t])<<1|(n=o[n])]}pm.prototype.isVisible=function(){return this.l},pm.prototype.display=function(){this.l=!0},xm.prototype.Ia=function(){return this.g<this.h.length},xm.prototype.Pa=function(){return this.g},xm.prototype.skip=function(e){if(this.g+e>this.h.length)throw new je(2,2,3e3);this.g+=e},xm.prototype.Ki=function(e){if(this.g-e<0)throw new je(2,2,3e3);this.g-=e};var Mm=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),Rm="black blue green cyan red magenta yellow white".split(" ");function _m(){this.h=[],this.g=[],this.i=new vm,this.l=0,this.m=new Map([["CC1",new sm(0,0)],["CC2",new sm(0,1)],["CC3",new sm(1,0)],["CC4",new sm(1,1)]]),this.u=this.o=0,this.j=new Map,this.C=!0,this.B=new Set,Lm(this)}function Lm(e){e.o=0,e.u=0;for(var t=g(e.m.values()),n=t.next();!n.done;n=t.next())(n=n.value).h=0,n.g=n.j,n.m=null,Jf(n.i),Jf(n.j),Jf(n.o);e.C=!0}function Pm(e,t){var n=t.type;if(16==(112&t.Db)){var o=t.Db>>3&1;0===n?e.o=o:e.u=o}if(o="CC"+(1+(n<<1|(n?e.u:e.o))),n=e.m.get(o),255===t.Db&&255===t.hc||!t.Db&&!t.hc||!Om(t.Db)||!Om(t.hc))return++e.l>=45&&Lm(e),null;e.l=0,t.Db&=127,t.hc&=127;var i=t.Db;if(i>=1&&i<=15||!t.Db&&!t.hc)return null;if(i=null,16==(112&t.Db))e:{if(e.B.add(o),o=t.Db,e=t.hc,n.m===(o<<8|e))n.m=null;else if(n.m=o<<8|e,16==(240&o)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&o)<<1|e>>5&1],o="white",i=!1;var r=null,s=e>95?e-96:e-64;s<=13?o=dm[Math.floor(s/2)]:s<=15?i=!0:r=Math.floor((s-16)/2),e=!(1&~e),4!==n.h&&(s=n.g,3===n.h&&t!==s.g&&(Zf(s,n=1+t-s.h,1+s.g-s.h,s.h),em(s,0,n-1),em(s,t+1,15-t)),s.g=t,s.m=e,s.j=i,s.l=o,s.u=r,s.o="black")}else if(17==(247&o)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",Qf(n.g,0,32),o=!1,"white_italics"===(t=dm[(14&e)>>1])&&(t="white",o=!0),n.g.m=!(1&~e),n.g.j=o,n.g.l=t;else if(16==(247&o)&&32==(240&e)||23==(247&o)&&45==(255&e))t="black",!(7&o)&&(t=cm[(14&e)>>1]),n.g.o=t;else if(17==(247&o)&&48==(240&e))Qf(n.g,1,e);else if(18==(246&o)&&32==(224&e))Qf(n.g,1&o?3:2,e);else{if(20==(246&o)&&32==(240&e)){switch(e=t.pts,o=null,t.hc){case 32:lm(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:o=am(n,2,e);break;case 38:o=am(n,3,e);break;case 39:o=am(n,4,e);break;case 40:Qf(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Jf(n.o),um(n);break;case 43:um(n);break;case 44:t=n.i,o=null,4!==n.h&&(o=Yf(t,n.l,e)),em(t,0,15);break;case 45:t=n.g,3!==n.h?o=null:(o=Yf(t,n.l,e),Zf(t,(i=t.g-t.h+1)-1,i,t.h),em(t,0,i-1),em(t,t.g,15-t.g),n.l=e);break;case 46:em(n.j,0,15);break;case 47:t=null,4!==n.h&&(t=Yf(n.i,n.l,e)),o=n.j,n.j=n.i,n.i=o,lm(n),n.l=e,o=t}i=o;break e}(23==o||31==o)&&e>=33&&e<=35&&(n.g.B=e-32)}i=null}else e=t.hc,Qf(n.g,0,t.Db),Qf(n.g,0,e);return i}function Dm(e,t){var n=[];try{for(;t.Ia();){var o=wm(t).value,i=(224&o)>>5,r=31&o;if(7===i&&0!=r&&(i=63&wm(t).value),0!=i){e.B.add("svc"+i),e.j.has(i)||e.j.set(i,new Sm(i));for(var s=e.j.get(i),a=t.Pa();t.Pa()-a<r;){i=s;var l=t,u=wm(l),c=u.value,d=u.pts;if(16===c&&(c=c<<16|wm(l).value),c>=0&&c<=31)var p=Tm(i,l,c,d);else if(c>=128&&c<=159)p=km(i,l,c,d);else{if(c>=4096&&c<=4127)i=l,(l=255&c)>=8&&l<=15?i.skip(1):l>=16&&l<=23?i.skip(2):l>=24&&l<=31&&i.skip(3);else if(c>=4224&&c<=4255)i=l,(l=255&c)>=128&&l<=135?i.skip(4):l>=136&&l<=143&&i.skip(5);else if(c>=32&&c<=127)l=c,i.g&&mm(i.g,127===l?"♪":String.fromCharCode(l));else if(c>=160&&c<=255)i.g&&mm(i.g,String.fromCharCode(c));else if(c>=4128&&c<=4223){if(l=255&c,i.g)if(Mm.has(l)){var h=Mm.get(l);mm(i.g,h)}else mm(i.g,"_")}else c>=4256&&c<=4351&&i.g&&mm(i.g,160!=(255&c)?"_":"[CC]");p=[]}n.push.apply(n,y(p))}}}}catch(f){if(!(f instanceof je&&3e3===f.code))throw f;X("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Om(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function Nm(e){for(var t=[],n=e,o=e=0;o<n.length;)2==e&&3==n[o]?(e=0,(n=[].concat(y(n))).splice(o,1),n=new Uint8Array(n)):0==n[o]?e++:e=0,o++;for(e=n,o=0;o<e.length;){for(n=0;255==e[o];)n+=255,o++;n+=e[o++];for(var i=0;255==e[o];)i+=255,o++;i+=e[o++],4==n&&t.push(e.subarray(o,o+i)),o+=i}return t}function Um(){this.j=new Map,this.i=this.h=0,this.g=Fm}function Bm(e,t,n,o,i,r,s,a,l){var u=0,c=r,d=a.map(function(e){return e.ih});for((d=[].concat.apply([],y(d))).length&&(c=d[0].sampleSize||r),t.skip(s+a[0].mg);t.Ia();){s=t.U();var p=t.Y(),h=null;switch(h=!1,a=1,e.g){case jm:h=6==(h=31&p);break;case zm:a=2,t.skip(1),h=39==(h=p>>1&63)||40==h;break;case $m:a=2,t.skip(1),h=23==(h=p>>1&63)||24==h;break;default:return}if(h)for(p=0,u<d.length&&(p=d[u].Cf||0),p=(n+p)/o,h=(a=g(Nm(t.Tb(s-a)))).next();!h.done;h=a.next())l.push({packet:h.value,pts:p});else try{t.skip(s-a)}catch(f){break}0==(c-=s+4)&&(n=u<d.length?n+(d[u].jh||i):n+i,c=++u<d.length&&d[u].sampleSize||r)}}_m.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Lm(this);for(var t=(e=g(this.j.values())).next();!t.done;t=e.next())Im(t.value)},_m.prototype.extract=function(e,t){if(this.C){for(var n=g(this.m.values()),o=n.next();!o.done;o=n.next())o.value.l=t;this.C=!1}if(!((e=new or(e,0)).getLength()<8)&&181===e.Y()&&49===e.Ba()&&1195456820===e.U()&&3===e.Y()&&64&(n=e.Y()))for(n&=31,e.skip(1),o=0;o<n;o++){var i=e.Y(),r=(4&i)>>2,s=e.Y(),a=e.Y();r&&(0==(i&=3)||1===i?this.h.push({pts:t,type:i,Db:s,hc:a,order:this.h.length}):(this.g.push({pts:t,type:i,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:a,order:this.g.length})))}},_m.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=g(this.h),o=n.next();!o.done;o=n.next())(o=Pm(this,o.value))&&t.push(o);for(o=(n=g(this.g)).next();!o.done;o=n.next())bm(this.i,o.value);for(o=(n=g(this.i.i)).next();!o.done;o=n.next())o=Dm(this,o.value),t.push.apply(t,y(o));return this.i.i=[],this.h=[],this.g=[],t},_m.prototype.getStreams=function(){return Array.from(this.B)},$("shaka.cea.CeaDecoder",_m),Et=function(){return new _m},Um.prototype.init=function(e){function t(e){e=e.name,Vm.has(e)&&(n.g=Vm.get(e))}var n=this,o=[],i=[];if((new sr).box("moov",ar).box("mvex",ar).T("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.U(),t=t.U(),n.h=e,n.i=t}).box("trak",ar).T("tkhd",function(e){var t=e.reader;1==(e=e.version)?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.U();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.Ba(),t.Ba(),t.Ba(),t.Ba(),o.push(n)}).box("mdia",ar).T("mdhd",function(e){e=ss(e.reader,e.version),i.push(e.timescale)}).box("minf",ar).box("stbl",ar).T("stsd",lr).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",ur).box("sinf",ar).box("frma",function(e){e=us(e.reader).codec,Vm.has(e)&&(n.g=Vm.get(e))}).parse(e,!0,!0),!o.length||!i.length||o.length!=i.length)throw new je(2,2,2010);this.g==Fm&&K("Unable to determine bitstream format for CEA parsing!"),o.forEach(function(e,t){n.j.set(e,i[t])})},Um.prototype.parse=function(e){var t=this;if(this.g==Fm)return[];var n=[],o=0,i=[];return(new sr).box("moof",function(e){o=e.start,i=[],ar(e)}).box("traf",function(e){i.push({baseMediaDecodeTime:null,Rd:t.h,Sd:t.i,Bi:[],timescale:9e4}),ar(e)}).T("trun",function(e){var t=i[i.length-1];e=as(e.reader,e.version,e.flags),t.Bi.push(e)}).T("tfhd",function(e){var n=i[i.length-1];e=is(e.reader,e.flags),n.Rd=e.Rd||t.h,n.Sd=e.Sd||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))}).T("tfdt",function(e){var t=i[i.length-1];e=rs(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime}).box("mdat",function(e){for(var r=o-e.start-8,s=e.reader.Pa(),a=g(i),l=a.next();!l.done;l=a.next())null===(l=l.value).baseMediaDecodeTime?K("Unable to find base media decode time for CEA captions!"):(e.reader.seek(s),Bm(t,e.reader,l.baseMediaDecodeTime,l.timescale,l.Rd,l.Sd,r,l.Bi,n))}).parse(e,!1,!0),n},$("shaka.cea.Mp4CeaParser",Um);var Fm=0,jm=1,zm=2,$m=3,Vm=(new Map).set("avc1",jm).set("avc3",jm).set("dvav",jm).set("dva1",jm).set("hev1",zm).set("hvc1",zm).set("dvh1",zm).set("dvhe",zm).set("vvc1",$m).set("vvi1",$m).set("dvc1",$m).set("dvi1",$m);function Hm(){this.g=null}function Gm(e){return(e=function(e){var t=0,n=Be(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,1&i||i+e>n.byteLength){n=[];break e}var r=Ne(n,e,i);t.push({type:o,value:r}),e+=i}n=t}return n}(e=Ze(Xt(e))).filter(function(e){return e.type===Wm})[0])&&(e=Ht(e=Ve(e.value,!0),"WRMHEADER"))?e:null}function qm(e){try{var t=Gm(e);if(t)e:{for(var n=g(Jt(t,"DATA")),o=n.next();!o.done;o=n.next()){var i=o.value;if(i.children)for(var r=g(i.children),s=r.next();!s.done;s=r.next()){var a=s.value;if("LA_URL"==a.tagName){var l=Xt(a);break e}}}l=""}else l="";return l}catch(u){return""}}Ct("video/mp4",function(){return new Um}),Hm.prototype.init=function(){},Hm.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ca;var t=[];if(!Ma(e=Ne(e)))return t;var n=(e=this.g.parse(e)).Td(),o=e.Ze();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(o=(n=g(o)).next();!o.done;o=n.next())if(o=o.value,e.includes(o.type)&&null!=o.time)for(var i=g(Nm(o.data)),r=i.next();!r.done;r=i.next())t.push({packet:r.value,pts:o.time});return t},$("shaka.cea.TsCeaParser",Hm),Ct("video/mp2t",function(){return new Hm});var Wm=1;function Km(){this.g=new Map}function Xm(t,n,o,i){var r=function(e,t){for(var n=[],o=(t=g(t)).next();!o.done;o=t.next())(o=Jm(e,o.value))&&n.push(o);return n}(t,n),s=null;t=[];var a=[];n=null;var l=new Set(r.map(function(e){return e.keyId}));l.delete(null);var u="cenc";if(l.size>1)throw new je(2,4,4010);if(!o){if((a=r.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.Gd})).length>1)throw new je(2,4,4050);a.length&&(n=function(t){if(!e.crypto||!e.crypto.subtle)throw K("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new je(2,4,4042);var n=Zt(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new je(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new je(2,4,4051);if(!(n=Zt(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new je(2,4,4051);if(t=n.attributes.IV,n=Ke(n.attributes.keyUriTemplate),!t||!n)throw new je(2,4,4051);if(16!=(t=et(t.substr(2))).byteLength)throw new je(2,4,4048);return{tk:n,iv:t}}(a[0])),(a=r.find(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Gd}))&&a.encryptionScheme&&(u=a.encryptionScheme),(a=r.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Gd?(s=e.init||s,!1):"urn:mpeg:dash:sea:2012"!=e.Gd})).length&&(t=function(e,t,n,o,i){for(var r=[],s=(n=g(n)).next();!s.done;s=n.next()){var a=o[(s=s.value).Gd];if(a){var l;if((l=Zt(s.node,"urn:microsoft:playready","pro"))&&Xt(l)){l=Ze(l=Xt(l));var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);l=[{initData:vr(l,u,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else l=null;if(u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===s.Gd){u=s;var c=i;if(0==c.size)u=null;else{var d=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);u=[{initData:vr(new Uint8Array([]),d,c,1),initDataType:"cenc",keyId:u.keyId}]}}l=it(a,t,s.init||e||l||u),(a=Qm.get(a))&&(l.licenseServerUri=a(s)),(s=Zt(s.node,"https://dashif.org/CPS","Certurl"))&&(s=Xt(s))||(s=""),l.serverCertificateUri=s,r.push(l)}}return r}(s,u,a,i,l),0==t.length&&(t=[it("",u,s)]))}if(r.length&&!n&&(o||!a.length))for(t=[],i=(o=g(Object.values(i))).next();!i.done;i=o.next())"org.w3.clearkey"!=(i=i.value)&&t.push(it(i,u,s));if(l=Array.from(l)[0]||null)for(o=(u=g(t)).next();!o.done;o=u.next())for(i=(o=g(o.value.initData)).next();!i.done;i=o.next())i.value.keyId=l;return{Th:l,Fm:s,drmInfos:t,dg:n,Yh:!0}}function Ym(e){var t=Zt(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=Xt(t)))return t;if((t=Zt(e.node,"urn:microsoft:playready","pro"))&&Xt(t))return qm(t);if((e=Zt(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=Xt(e))){t=Ze(e),e=8;var n=(t=Be(t)).getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),qm(e=Ht("<pro>"+(e=Je(e=Ne(t,e+4)))+"</pro>"))}return""}function Jm(e,t){var n=t.attributes.schemeIdUri,o=tn(t,"urn:mpeg:cenc:2013","default_KID"),i=nn(t,"urn:mpeg:cenc:2013","pssh").map(Yt),r=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),o&&(o=o.replace(/-/g,"").toLowerCase()).includes(" "))throw new je(2,4,4009);var s=[];try{s=i.map(function(t){if(!e.g.has(t)){var n=Ze(t);e.g.set(t,n)}return{initDataType:"cenc",initData:e.g.get(t),keyId:null}})}catch(a){throw new je(2,4,4007)}return{node:t,Gd:n,keyId:o,init:s.length>0?s:null,encryptionScheme:r}}Km.prototype.release=function(){this.g.clear()};var Qm=(new Map).set("com.apple.fps",function(t){if("apple"===e.shakaMediaKeysPolyfill)throw new je(2,4,4054);return(t=Zt(t.node,"https://dashif.org/CPS","Laurl"))&&(t=Xt(t))?t:""}).set("com.widevine.alpha",function(e){var t=Zt(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Xt(t))?t:(e=Zt(e.node,"urn:microsoft","laurl"))&&Ke(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Ym).set("com.microsoft.playready.recommendation",Ym).set("com.microsoft.playready.software",Ym).set("com.microsoft.playready.hardware",Ym).set("org.w3.clearkey",function(e){var t=Zt(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Xt(t))?t:(e=Zt(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=Xt(e))?e:""});function Zm(t,n,o,i,r,s){var a=(new Map).set("RepresentationID",n).set("Number",o).set("SubNumber",i).set("Bandwidth",r).set("Time",s);return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,o,i){if("$$"==t)return"$";var r=a.get(n);if(null==r)return t;switch("RepresentationID"==n&&o&&(o=void 0),"Time"==n&&"bigint"!=typeof r&&(Math.abs(r-Math.round(r))>=.2&&K("Calculated $Time$ values must be close to integers"),r=Math.round(r)),i){case void 0:case"d":case"i":case"u":t=r.toString();break;case"o":t=r.toString(8);break;case"x":t=r.toString(16);break;case"X":t=r.toString(16).toUpperCase();break;default:t=r.toString()}return o=e.parseInt(o,10)||1,Array(Math.max(0,o-t.length)+1).join("0")+t})}function eg(e,t){var n=ng(e,t,"timescale"),o=1;n&&(o=un(n)||1);var i=(n=un((n=ng(e,t,"duration"))||""))?n/o:null,r=ng(e,t,"startNumber"),s=Number(ng(e,t,"presentationTimeOffset"))||0,a=cn(r||"");if(null!=r&&null!=a||(a=1),r=null,t=og(e,t,"SegmentTimeline")){t=Kt(t,"S"),r=o,e=e.na.duration||1/0;for(var l=a,u=[],c=-s,d=0;d<t.length;++d){var p=t[d],h=t[d+1],f=en(p,"t",cn),m=en(p,"d",cn),g=en(p,"r",ln);if(p=en(p,"k",ln)||0,null!=f&&(f-=s),m){if(f=null!=f?f:c,(g=g||0)<0)if(h){if(null==(h=en(h,"t",cn)))break;if(f>=h)break;g=Math.ceil((h-f)/m)-1}else{if(e==1/0)break;if(f/r>=e)break;g=Math.ceil((e*r-f)/m)-1}for(u.length>0&&f!=c&&(u[u.length-1].end=f/r),h=0;h<=g;++h)c=f+m,u.push({start:f/r,end:c/r,Fh:f,vc:p,Tk:u.length+l}),f=c}}r=u}return{timescale:o,Mf:n,fb:i,oe:a,Jb:s/o||0,gd:s,timeline:r}}function tg(e,t){return[t(e.L),t(e.qa),t(e.sa)].filter(Ao)}function ng(e,t,n){t=tg(e,t),e=null;for(var o=(t=g(t)).next();!o.done&&!(e=o.value.attributes[n]);o=t.next());return e}function og(e,t,n){t=tg(e,t),e=null;for(var o=(t=g(t)).next();!o.done&&!(e=Qt(o.value,n));o=t.next());return e}function ig(e,t,n,o,i,r){if(r=void 0===r?0:r,tn(e,"http://www.w3.org/1999/xlink","href")){var s=function(e,t,n,o,i,r){for(var s=tn(e,"http://www.w3.org/1999/xlink","href"),a=tn(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=g(Object.keys(e.attributes)),u=l.next();!u.done;u=l.next()){var c=(u=u.value).split(":"),d=Gt("http://www.w3.org/1999/xlink");c[0]==d&&delete e.attributes[u]}if(r>=5)return Ri(new je(2,4,4028));if("onLoad"!=a)return Ri(new je(2,4,4027));var p=ot([o],[s]);return i.request(0,Hi(p,t)).Xa(function(o){if(!(o=Vt(o.data,e.tagName)))return Ri(new je(2,4,4001,s));for(e.children=[];o.children.length;){var a=o.children.shift();e.children.push(a)}for(var l=(a=g(Object.keys(o.attributes))).next();!l.done;l=a.next())l=l.value,e.attributes[l]=o.attributes[l];return ig(e,t,n,p[0],i,r+1)})}(e,t,n,o,i,r);return n&&(s=s.Xa(void 0,function(){return ig(e,t,n,o,i,r)})),s}s=[];for(var a=g(Wt(e)),l=a.next(),u={};!l.done;u={Od:void 0},l=a.next())u.Od=l.value,"urn:mpeg:dash:resolve-to-zero:2013"==tn(u.Od,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.Od}}(u)):"SegmentTimeline"!=u.Od.tagName&&s.push(ig(u.Od,t,n,o,i,r));return Di(s).Xa(function(){return e})}function rg(e,t,n,o,i,r,s){var a,l=(new sr).T("sidx",function(e){a=function(e,t,n,o,i,r,s){var a=[];s.reader.skip(4);var l=s.reader.U();if(0==l)throw new je(2,3,3005);if(0==s.version)var u=s.reader.U(),c=s.reader.U();else u=s.reader.Dd(),c=s.reader.Dd();s.reader.skip(2);var d=s.reader.Ba();for(e=e+s.size+c,c=0;c<d;c++){var p=s.reader.U(),h=(2147483648&p)>>>31;p&=2147483647;var f=s.reader.U();if(s.reader.skip(4),1==h)throw new je(2,3,3006);a.push(new $s(u/l+n,(u+f)/l+n,function(){return r},e,e+p-1,t,n,o,i)),u+=f,e+=p}return s.parser.stop(),a}(t,o,i,r,s,n,e)});if(e&&l.parse(e),a)return a;throw new je(2,3,3004)}function sg(e){this.h=Be(e),this.g=new or(this.h,0)}function ag(e){var t=lg(e);if(t.length>7)throw new je(2,3,3002);for(var n=0,o=(t=g(t)).next();!o.done;o=t.next())n=256*n+o.value;t=lg(e);e:{for(var i=(o=g(ug)).next();!i.done;i=o.next())if(De(t,new Uint8Array(i.value))){o=!0;break e}o=!1}if(o)t=e.h.byteLength-e.g.Pa();else{if(8==t.length&&224&t[1])throw new je(2,3,3001);for(i=o=0;i<t.length;i++){var r=t[i];o=0==i?r&(1<<8-t.length)-1:256*o+r}t=o}return t=e.g.Pa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Pa(),o=Be(e.h,e.g.Pa(),t),e.g.skip(t),new cg(n,o)}function lg(e){var t=e.g.Pa(),n=e.g.Y();if(0==n)throw new je(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ne(e.h,t,n)}sg.prototype.Ia=function(){return this.g.Ia()};var ug=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function cg(e,t){this.id=e,this.g=t}function dg(e){if(e.g.byteLength>8)throw new je(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new je(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function pg(e){var t=new sg(e.g);if(179!=(e=ag(t)).id)throw new je(2,3,3013);if(e=dg(e),183!=(t=ag(t)).id)throw new je(2,3,3012);t=new sg(t.g);for(var n=0;t.Ia();){var o=ag(t);if(241==o.id){n=dg(o);break}}return{kl:e,Lk:n}}function hg(e,t,n){if(!(t=og(e,t,"Initialization")))return null;var o=e.L.cb(),i=t.attributes.sourceURL;i&&(o=ot(o,[Ke(i)],e.Mb())),i=0;var r=null;return(t=en(t,"range",an))&&(i=t.start,r=t.end),(n=new js(function(){return o},i,r,bg(e),null,null,n,e.qa.encrypted)).codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.df&&(n.g=e.na.start+e.na.duration),n}function fg(e,t,n){var o=Number(ng(e,gg,"presentationTimeOffset"))||0,i=ng(e,gg,"timescale"),r=1;i&&(r=un(i)||1);var s=o/r||0,a=hg(e,gg,n);!function(e,t){if(vg(e,t),!yg(e))throw new je(2,4,4002)}(e,a);var l=zt(e);return{endTime:-1,timeline:-1,Sc:function(){var e=og(l,gg,"RepresentationIndex"),n=l.L.cb();return e&&(e=Ke(e.attributes.sourceURL))&&(n=ot(n,[e],l.Mb())),e=yg(l),mg(l,t,a,n,e.start,e.end,s)},timescale:r}}function mg(e,t,n,o,i,r,s){var a,l,u,c,d,p,h,f,m,y,v,b,x,w,T,k,C,A;return D(function(I){if(1==I.g)return a=e.presentationTimeline,l=!e.Fb||!e.na.df,u=e.na.start,c=e.na.duration,d=e.L.mimeType.split("/")[1],h=null,f=[(p=t)(o,i,r,!1),"webm"==d?p(n.P(),n.startByte,n.endByte,!0):null],p=null,S(I,Promise.all(f),2);if(m=I.h,y=m[0],v=m[1]||null,x=u-s,w=u,T=c?u+c:1/0,"mp4"==d)var E=rg(y,i,o,n,x,w,T);else{E=y;var M=new sg(v);if(440786851!=ag(M).id)throw new je(2,3,3008);var R=ag(M);if(408125543!=R.id)throw new je(2,3,3009);M=R.g.byteOffset,R=new sg(R.g);for(var _=null;R.Ia();){var L=ag(R);if(357149030==L.id){_=L;break}}if(!_)throw new je(2,3,3010);for(_=new sg(_.g),L=1e6,R=null;_.Ia();){var P=ag(_);if(2807729==P.id)L=dg(P);else if(17545==P.id)if(4==P.g.byteLength)R=P.g.getFloat32(0);else{if(8!=P.g.byteLength)throw new je(2,3,3003);R=P.g.getFloat64(0)}}if(null==R)throw new je(2,3,3011);if(R*=_=L/1e9,475249515!=(E=ag(new sg(E))).id)throw new je(2,3,3007);E=function(e,t,n,o,i,r,s,a,l){function u(){return i}var c=[];e=new sg(e.g);for(var d=null,p=null;e.Ia();){var h=ag(e);if(187==h.id){var f=pg(h);f&&(h=n*f.kl,f=t+f.Lk,null!=d&&c.push(new $s(d+s,h+s,u,p,f-1,r,s,a,l)),d=h,p=f)}}return null!=d&&c.push(new $s(d+s,o+s,u,p,null,r,s,a,l)),c}(E,M,_,R,o,n,x,w,T)}for(k=g(b=E),C=k.next();!C.done;C=k.next())(A=C.value).codecs=e.L.codecs,A.mimeType=e.L.mimeType,A.bandwidth=e.bandwidth;return a.ge(b),h=new Ll(b),l&&h.pd(w,T,!0),I.return(h)})}function gg(e){return e.Hd}function yg(e){var t=og(e,gg,"RepresentationIndex");return e=an((e=ng(e,gg,"indexRange"))||""),t&&(e=en(t,"range",an,e)),e}function vg(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=ut&&"mp4"!=n&&"webm"!=n)throw new je(2,4,4006);if("webm"==n&&!t)throw new je(2,4,4005)}function bg(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.tf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function xg(e,t,n){var o=hg(e,wg,n),i=function(e){var t=function(e){return[e.L.zc,e.qa.zc,e.sa.zc].filter(Ao).map(function(e){return Kt(e,"SegmentURL")}).reduce(function(e,t){return e.length>0?e:t}).map(function(t){return t.attributes.indexRange&&!e.Lg&&(e.Lg=!0),{Ak:Ke(t.attributes.media),start:(t=en(t,"mediaRange",an,{start:0,end:null})).start,end:t.end}})}(e),n=(e=eg(e,wg)).oe;0==n&&(n=1);var o=0;return e.fb?o=e.fb*(n-1):e.timeline&&e.timeline.length>0&&(o=e.timeline[0].start),{fb:e.fb,startTime:o,oe:n,Jb:e.Jb,timescale:e.timescale,timeline:e.timeline,yd:t}}(e);if(!i.fb&&!i.timeline&&i.yd.length>1)throw new je(2,4,4002);if(!i.fb&&!e.na.duration&&!i.timeline&&1==i.yd.length)throw new je(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new je(2,4,4002);var r=null,s=null;e.sa.id&&e.L.id&&(s=t.get(e.sa.id+","+e.L.id))&&(r=s.segmentIndex);var a=function(e,t,n,o,i,r,s,a,l,u){var c=o.yd.length;o.timeline&&o.timeline.length!=o.yd.length&&(c=Math.min(o.timeline.length,o.yd.length));for(var d=e-o.Jb,p=t?e+t:1/0,h=[],f=o.startTime,m={},g=0;g<c;m={Of:void 0,Df:void 0},g++){m.Df=o.yd[g];var y=f;f=void 0,f=null!=o.fb?y+o.fb:o.timeline?o.timeline[g].end:y+t,m.Of=null,(m=new $s(e+y,e+f,function(e){return function(){return null==e.Of&&(e.Of=ot(n(),[e.Df.Ak],u())),e.Of}}(m),m.Df.start,m.Df.end,i,d,e,p,[],"",null,null,Hs,r)).codecs=a,m.mimeType=s,m.bandwidth=l,h.push(m)}return h}(e.na.start,e.na.duration,e.L.cb,i,o,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Mb);return t=!r,r?r.ee(a,e.presentationTimeline.Ib()):r=new Ll(a),e.presentationTimeline.ge(a),e.Fb&&e.na.df||r.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),s&&(s.segmentIndex=r),{endTime:-1,timeline:-1,Sc:function(){return r&&0!=r.getNumReferences()||r.mf(a),Promise.resolve(r)},timescale:i.timescale}}function wg(e){return e.zc}function Sg(t,n,o,i,r,s,a,l,u,c){u||t.L.bf||(t.L.bf=ng(t,Tg,"initialization"));var d=t.L.bf?function(e,t){var n=e.L.bf;if(n||(n=ng(e,Tg,"initialization")),!n)return null;n=Ke(n);var o=e.L.originalId,i=e.bandwidth||null,r=e.L.cb,s=e.Mb;return t=new js(function(){var e=Zm(n,o,null,null,i,null);return ot(r(),[e],s())},0,null,bg(e),null,null,t,e.qa.encrypted),t.codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.df&&(t.g=e.na.start+e.na.duration),t}(t,a):null,p=function(e){var t=eg(e,Tg),n=ng(e,Tg,"media"),o=ng(e,Tg,"index"),i=ng(e,Tg,"k"),r=0;return i&&(r=parseInt(i,10)),{Mf:t.Mf,fb:t.fb,timescale:t.timescale,oe:t.oe,Jb:t.Jb,gd:t.gd,timeline:t.timeline,$b:n&&Ke(n),$d:o,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,Bk:r}}(t);!function(e){var t=e.$d?1:0;if(t+=e.timeline?1:0,0==(t+=e.fb?1:0))throw new je(2,4,4002);if(1!=t&&(e.$d&&(e.timeline=null),e.Mf=null,e.fb=null),!e.$d&&!e.$b)throw new je(2,4,4002)}(p);var h=zt(t);if(p.$d)return vg(t,d),{endTime:-1,timeline:-1,Sc:function(){var e=Zm(p.$d,h.L.originalId,null,null,h.bandwidth||null,null);return e=ot(h.L.cb(),[e]),mg(h,n,d,e,0,null,p.Jb)},timescale:p.timescale};if(p.fb)return i||"image"===t.qa.contentType||"text"===t.qa.contentType||(i=t.na.start,c=t.sa.id,o=t.na.duration,c=(c=null!=c&&s.get(c)||o)?i+c:1/0,t.presentationTimeline.Tg(p.fb),t.presentationTimeline.zi(i,c)),{endTime:-1,timeline:-1,Sc:function(){return function(t,n,o,i,r,s,a,l){function u(o){var r=o-v,a=r*y,u=n.Mf,c=r*u;"BigInt"in e&&c>Number.MAX_SAFE_INTEGER&&(c=BigInt(r)*BigInt(u)),r=(a+=h)+y,u=Math.min(r,d());var p=[],f=n.Bk;if(f)for(var m=(u-a)/f,g={},C=0;C<f;g={Wi:void 0},C++){var A=a+m*C,I=A+m;g.Wi=C,(g=new $s(A,I,function(e){return function(){var t=Zm(b,w,o,e.Wi,x,c);return ot(S(),[t],T())}}(g),0,null,i,k,h,d(),[],"",null,null,Hs,s)).codecs=t.L.codecs,g.mimeType=t.L.mimeType,0==l?C>0&&g.wd():C%l!=0&&g.wd(),p.push(g)}return(a=new $s(a,u,function(){if(f)return[];var e=Zm(b,w,o,null,x,c);return ot(S(),[e],T())},0,null,i,k,h,d(),p,"",null,null,Hs,s,p.length>0)).codecs=t.L.codecs,a.mimeType=t.L.mimeType,a.bandwidth=t.bandwidth,a.j=r,a}function c(){var e=[Math.max(p.Ib(),h),Math.min(p.Ic(),d())].map(function(e){return e-h});return e=[Math.ceil(e[0]/y),Math.ceil(e[1]/y)-1],t.L.ub&&e[1]++,e.map(function(e){return e+v})}function d(){var e=null!=f&&r.get(f)||m;return e?h+e:1/0}var p=t.presentationTimeline,h=t.na.start,f=t.sa.id,m=t.na.duration,y=n.fb,v=n.oe,b=n.$b,x=t.bandwidth||null,w=t.L.originalId,S=t.L.cb,T=t.Mb,k=h-n.Jb,C=c();o=t.Fb?Math.max(C[0],C[1]-o+1):C[0],a=a||C[1],C=[];for(var A=o;A<=a;++A){var I=u(A);C.push(I)}var E=new Ll(C);if(C=p.Ic()<d(),A=p.W(),C||A){var M=Math.max(o,a+1);o=y,t.L.ub&&(o=.1),E.Nf(o,function(){var e=p.Ib();E.Ya(e);var t=g(c());t.next(),t=t.next().value;for(var n=[];M<=t;){var o=u(M);n.push(o),M++}return e>d()&&!n.length?null:n})}return Promise.resolve(E)}(h,p,r,d,s,a,l,t.L.Ef)},timescale:p.timescale};var f=null;i=i=null,t.sa.id&&t.L.id&&(i=t.sa.id+","+t.L.id,i=o.get(i))&&(f=i.segmentIndex);var m=t.na.start,y=t.na.duration?m+t.na.duration:1/0;if(f)Cg(c=f,p,m,y,d,t.Fb),c.Ya(t.presentationTimeline.Ib());else{if(o=0,u=-1,null!=t.sa.id&&null!=t.L.id){var v=c.get(t.sa.id);if(v)u=v.timeline;else for(v=(c=g(c.values())).next();!v.done;v=c.next()){if(v=v.value,Math.abs(p.Jb-v.endTime)<=dt&&v.dh.includes(t.L.id)){u=v.timeline;break}v.timeline>=o&&(o=v.timeline+1)}}-1==u&&(u=o),f=new kg(t.Fb,p,t.L.originalId,t.bandwidth,t.L.cb,t.Mb,m,y,d,a,t.L.Ef,u)}return p.timeline&&"image"!==t.qa.contentType&&"text"!==t.qa.contentType&&t.presentationTimeline.Ai(f.h?f.h.timeline:[],m),i&&t.Fb&&(i.segmentIndex=f),i=(i=(i=p.timeline)&&i[i.length-1])?i.end+p.Jb:-1,c=-1,f instanceof kg&&(c=f.Se()),{endTime:i,timeline:c,Sc:function(){return f instanceof kg&&0==f.getNumReferences()&&Cg(f,p,m,y,d,t.Fb),Promise.resolve(f)},timescale:p.timescale}}function Tg(e){return e.Nc}function kg(e,t,n,o,i,r,s,a,l,u,c,d){Ll.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=o,this.G=i,this.J=r,this.j=s,this.l=a,this.u=l,this.B=u,this.I=c,this.K=d,Ag(this)}function Cg(e,t,n,o,i,r){if(function(e,t){if(e.u!==t){e.u=t;for(var n=(e=g(e.g)).next();!n.done;n=e.next())(n=n.value)&&Vs(n,t)}}(e,i),e.F=r,e.h){if(e.h.gd!==t.gd&&(e.h.timeline=t.timeline,e.h.gd=t.gd,e.h.Jb=t.Jb),e.h.$b!==t.$b&&(e.h.$b=t.$b),(n=e.h.timeline).length){var s=n[n.length-1];t=t.timeline.filter(function(e){return e.end>s.end})}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,y(t)),e.l!==o&&(e.l=o)}else e.h=t,e.j=n,e.l=o;Ag(e)}function Ag(e){if(e.h&&!e.o){for(var t=[],n=g(e.h.timeline),o=n.next();!o.done;o=n.next())(o=o.value).start>=e.l||o.end<=0||t.push(o);e.h.timeline=t,e.Ya(e.j)}}function Ig(e,t,n,o,i,r,s,a){return e=Zm(e,t,n,r,o||null,i),ot(s(),[e],a()).map(function(e){return e.toString()})}function Eg(e){this.o=null,this.B=e,this.H=new Fi,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}function Mg(e,t){var n,o,i,r,s,a,l;return D(function(u){return 1==u.g?(n=ot(e.i,[Rg(e,t)]),o=Hi(n,e.o.retryParameters),i=e.B.networkingEngine.request(8,o),ji(e.H,i),k(u,2),S(u,i.promise,4)):2!=u.g?(r=u.h,s=$e(r.data),1==(a=JSON.parse(s)).VERSION&&function(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var o=t["RELOAD-URI"]||n;e.g=new To(function(){Mg(e,o)}),(n=t.TTL)&&(e.F=n),e.g.ka(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}(e,a,r.uri),A(u,0)):(l=I(u))&&7001==l.code?u.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new To(function(){Mg(e,t)}),e.g.ka(e.F),void T(u))})}function Rg(e,t){if(!e.m.length)return t;t=new ye(t);var n=e.C||e.m[0],o=Math.round(e.B.getBandwidthEstimate()),i=t.g;return"DASH"==e.u?(i.add("_DASH_pathway",n),i.add("_DASH_throughput",String(o))):"HLS"==e.u&&(i.add("_HLS_pathway",n),i.add("_HLS_throughput",String(o))),Le(i)&&we(t,i),t.toString()}function _g(e,t,n,o){var i=e.l.get(t);i||(i=new Map),i.set(n,o),e.l.set(t,i)}function Lg(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var o=[],i=g(e.m),r=i.next(),s={};!r.done;s={Bd:void 0},r=i.next())if(s.Bd=r.value,r=t.get(s.Bd))o.push({Yg:s.Bd,location:r});else if(r=e.G.find(function(e){return function(t){return t.Nl==e.Bd}}(s))){var a=t.get(r["BASE-ID"]);a&&(r["URI-REPLACEMENT"].hj?(be(a=new ye(a),r["URI-REPLACEMENT"].hj),o.push({Yg:s.Bd,location:a.toString()})):o.push({Yg:s.Bd,location:a}))}for(i=Date.now(),r=(s=g(e.j.keys())).next();!r.done;r=s.next())r=r.value,i>(a=e.j.get(r))&&e.j.delete(r);if(o=o.filter(function(t){for(var n=g(e.j.keys()),o=n.next();!o.done;o=n.next())if(o.value.includes(new ye(t.location).Eb))return!1;return!0}),o.length&&(e.C=o[0].Yg),o=o.map(function(e){return e.location}),!o.length&&e.h)for(s=(i=g(e.h.split(","))).next();!s.done;s=i.next())(s=t.get(s.value))&&(e.C=e.h,o.push(s));if(!o.length)for(i=(t=g(t.values())).next();!i.done;i=t.next())o.push(i.value);return n?o:ot(e.i,o)}function Pg(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}function Dg(e,t){for(var n=[],o=[],i=[],r=[],s=(e=g(e)).next();!s.done;s=e.next()){var a=s.value;s=new Map(a.audioStreams.map(function(e){return[ay(e),e]}));var l=new Map(a.videoStreams.map(function(e){return[sy(e),e]})),u=new Map(a.textStreams.map(function(e){return[ly(e),e]}));if(a=new Map(a.imageStreams.map(function(e){return[uy(e),e]})),t){var c=ty(ut);u.set(ly(c),c),c=ty("image"),a.set(uy(c),c)}n.push(s),o.push(l),i.push(u),r.push(a)}return{Nh:n,fj:o,bj:i,ji:r}}function Og(e){var t,n,o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w,T,k,C,A,I,E,M,R,_;return D(function(L){switch(L.g){case 1:if(t=ct,1==e.length)return L.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ia}).map(function(e){return[ay(e),e]}))}),o=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Ca}).map(function(e){return[sy(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Na}).map(function(e){return[ly(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Uf}).map(function(e){return[uy(e),e]}))}),s=g(i),a=s.next();!a.done;a=s.next())l=a.value,u=ey(t.Na),l.set(ly(u),u);for(c=g(r),d=c.next();!d.done;d=c.next())p=d.value,h=ey(t.Uf),p.set(uy(h),h);return S(L,Ng(f=new Pg,[],n,0,zg,Vg,0),2);case 2:return m=L.h,S(L,Ng(f,[],o,0,zg,Vg,0),3);case 3:return y=L.h,S(L,Ng(f,[],i,0,zg,Vg,0),4);case 4:return v=L.h,S(L,Ng(f,[],r,0,zg,Vg,0),5);case 5:if(b=L.h,x=0,y.length&&m.length)for(C=g(m),A=C.next();!A.done;A=C.next())for(I=A.value,E=g(y),M=E.next();!M.done;M=E.next())R=M.value,_=x++,R.variantIds.push(_),I.variantIds.push(_);else for(w=y.concat(m),T=g(w),k=T.next();!k.done;k=T.next())k.value.variantIds=[x++];return L.return(y.concat(m).concat(v).concat(b))}})}function Ng(e,t,n,o,i,r,s){var a,l,u,c,d,p,h,f,m,y,v,b,x,w,T,k,C,A;return D(function(I){switch(I.g){case 1:for(a=[],l=0;l<n.length;l++)l>=o?a.push(new Set(n[l].values())):a.push(new Set);u=g(t),c=u.next();case 2:if(c.done){I.A(4);break}return d=c.value,S(I,function(e,t,n,o,i,r,s){return D(function(a){return 1==a.g?(Hg(e,n,t,s>0),t.matchedStreams?t.segmentIndex?S(a,Ug(t,o+s),2):a.A(2):a.return(!1)):(Fg(t,o,i,r,s),a.return(!0))})}(e,d,n,o,r,a,s),5);case 5:if(!I.h)throw new je(2,4,4037);c=u.next(),I.A(2);break;case 4:for(p=g(a),h=p.next();!h.done;h=p.next())for(f=h.value,m=g(f),y=m.next();!y.done;y=m.next())v=y.value,(b=Bg(e,v,n,i,r,a))&&t.push(b);for(x=g(a),w=x.next();!w.done;w=x.next())for(T=w.value,k=g(T),C=k.next(),A={};!C.done;A={uh:void 0},C=k.next())if(A.uh=C.value,!ry(A.uh)&&t.some(function(e){return function(t){return Wg(e.uh,t)}}(A)))throw new je(2,4,4037);return I.return(t)}})}function Ug(e,t){var n,o,i,r,s,a;return D(function(l){if(1==l.g){for(n=[],o=e.matchedStreams,i=t;i<o.length;i++)r=o[i],n.push(r.createSegmentIndex()),r.trickModeVideo&&!r.trickModeVideo.segmentIndex&&n.push(r.trickModeVideo.createSegmentIndex()),r.dependencyStream&&!r.dependencyStream.segmentIndex&&n.push(r.dependencyStream.createSegmentIndex());return S(l,Promise.all(n),2)}if(e.segmentIndex instanceof Nl)for(s=t;s<o.length;s++)(a=o[s]).segmentIndex&&e.segmentIndex.h.push(a.segmentIndex);T(l)})}function Bg(e,t,n,o,i,r){if(ry(t))return null;var s=o(t);return Hg(e,n,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return D(function(e){return s.segmentIndex?e.A(0):(s.segmentIndex=new Nl,S(e,Ug(s,0),0))})}),s.matchedStreams&&s.matchedStreams.length?(Fg(s,0,i,r,0),s):null}function Fg(e,t,n,o,i){var r=e.matchedStreams;for(t+=i;t<r.length;t++){var s=r[t];n(e,s);var a=!0;if("audio"==e.type&&0==Po(e.language,s.language)&&(a=!1),a&&(o[t-i].delete(s),s.fullMimeTypes))for(a=(s=g(s.fullMimeTypes.values())).next();!a.done;a=s.next())e.fullMimeTypes.add(a.value)}}function jg(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=g(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function zg(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function $g(e,t){function n(e,t){e||(e=[]);for(var n=(t=g(t)).next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var o=g(t.keyIds),i=o.next();!i.done;i=o.next())e.keyIds.add(i.value);if(null==e.originalId?e.originalId=t.originalId:(o=t.originalId||"")&&!e.originalId.endsWith(o)&&(e.originalId+=","+o),o=bi(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!o.length)throw new je(2,4,4038);if(e.drmInfos=o,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=(o=g(t.closedCaptions)).next();!i.done;i=o.next()){var r=g(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=jg(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var t=new Nl,n=g(e.trickModeVideo.matchedStreams),o=n.next();!o.done;o=n.next())t.h.push(o.value.segmentIndex);return e.trickModeVideo.segmentIndex=t,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),$g(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),$g(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=jg(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var t=new Nl,n=g(e.dependencyStream.matchedStreams),o=n.next();!o.done;o=n.next())t.h.push(o.value.segmentIndex);return e.dependencyStream.segmentIndex=t,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),$g(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),$g(e.dependencyStream,t))}function Vg(e,t){var n=e.roles;n||(n=[]);for(var o=g(t.roles),i=o.next();!i.done;i=o.next())i=i.value,n.includes(i)||n.push(i);for(e.roles=n,o=(n=g(t.keyIds)).next();!o.done;o=n.next())e.keyIds.add(o.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,y(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=g(t.closedCaptions)).next();!n.done;n=t.next())n=(o=g(n.value)).next().value,o=o.next().value,e.closedCaptions.set(n,o)}function Hg(e,t,n,o){o=void 0!==o&&o?n.matchedStreams:[];for(var i=(t=g(t)).next();!i.done;i=t.next()){if(!(i=Gg(e,i.value,n)))return;o.push(i)}n.matchedStreams=o}function Gg(e,t,n){var o={audio:ay,video:sy,text:ly,image:uy}[n.type],i=null,r=o(n);if(t.has(r))i=t.get(r);else{r={audio:function(e,t){return Wg(e,t)},video:function(e,t){return Wg(e,t)},text:Kg,image:Xg}[n.type];for(var s={audio:Yg,video:Jg,text:Qg,image:Zg}[n.type],a=g(t.values()),l=a.next();!l.done;l=a.next())!r(n,l=l.value)||n.fastSwitching!=l.fastSwitching||i&&!s(n,i,l)||(i=l)}return e.o&&!ry(i)&&t.delete(o(i)),i}function qg(e,t){return e.mimeType==t.mimeType&&dy(e.codecs)===dy(t.codecs)}function Wg(e,t){return!(e.drmInfos&&!vi(e.drmInfos,t.drmInfos))}function Kg(e,t){return!t.language||e.forced===t.forced&&0!=Po(e.language,t.language)&&t.kind==e.kind}function Xg(){return!0}function Yg(e,t,n){var o=oy(e,t,n);if(o===py)return!0;if(o===fy)return!1;o=Po(e.language,t.language);var i=Po(e.language,n.language);if(i>o)return!0;if(i<o)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(t){return e.roles.includes(t)}),(i=n.roles.filter(function(t){return e.roles.includes(t)})).length>o.length)return!0;if(i.length<o.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((o=ny(e.channelsCount,t.channelsCount,n.channelsCount))==py||o!=fy&&((o=ny(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==py||o!=fy&&!(!e.bandwidth||iy(e.bandwidth,t.bandwidth,n.bandwidth)!=py)))}function Jg(e,t,n){var o=oy(e,t,n);if(o===py)return!0;if(o===fy)return!1;if((o=ny(e.width*e.height,t.width*t.height,n.width*n.height))==py)return!0;if(o==fy)return!1;if(e.frameRate){if((o=ny(e.frameRate,t.frameRate,n.frameRate))==py)return!0;if(o==fy)return!1}return!(!e.bandwidth||iy(e.bandwidth,t.bandwidth,n.bandwidth)!=py)}function Qg(e,t,n){var o=Po(e.language,t.language),i=Po(e.language,n.language);if(i>o)return!0;if(i<o)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(t){return e.roles.includes(t)}),(i=n.roles.filter(function(t){return e.roles.includes(t)})).length>o.length)return!0;if(i.length<o.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Zg(e,t,n){return ny(e.width*e.height,t.width*t.height,n.width*n.height)==py}function ey(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function ty(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ll([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function ny(e,t,n){if(t==e&&e!=n)return fy;if(n==e&&e!=t)return py;if(t>e){if(n<=e||n-e<t-e)return py;if(n-e>t-e)return fy}else{if(n>e)return fy;if(e-n<e-t)return py;if(e-n>e-t)return fy}return hy}function oy(e,t,n){var o=e.mimeType===t.mimeType&&e.codecs===t.codecs,i=e.mimeType===n.mimeType&&e.codecs===n.codecs;return o&&!i?fy:!o&&i?py:(t=qg(e,t),e=qg(e,n),t&&!e?fy:!t&&e?py:hy)}function iy(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?py:t<e?fy:hy}function ry(e){switch(e.type){case ut:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function sy(e){return cy([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function ay(e){return cy([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function ly(e){return cy([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function uy(e){return cy([e.width,e.codecs,e.mimeType])}function cy(e){return JSON.stringify(e)}function dy(e){if(!my.has(e)){var t=ao(e);my.set(e,t)}return my.get(e)}f(kg,Ll),(i=kg.prototype).getNumReferences=function(){return this.h?this.h.timeline.length:0},i.release=function(){Ll.prototype.release.call(this),this.h=null},i.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,o=0;o<n.length&&n[o].end+this.j<=e;o+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.getNumReferences()&&this.release())}},i.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,o=0;o<t.length;o++){var i=t[o],r=i.start+this.j;if(i=o<n?t[o+1].start+this.j:this.l===1/0?i.end+this.j:this.l,e>=r&&e<i)return o+this.i}return null},i.get=function(e){var t=this;if((e-=this.i)<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var o=(n=this.h.timeline[e]).Tk,i=n.Fh+this.h.gd,r=this.j-this.h.Jb,s=this.j+n.end,a=s;e===this.getNumReferences()-1&&this.l!==1/0&&(a=this.F&&Math.abs(a-this.l)>.1?Math.min(a,this.l):this.l);var l=this.h.codecs,u=this.h.mimeType,c=this.h.bandwidth,d=[],p=!1;if(n.vc&&this.h&&this.h.$b&&(p=this.h.$b.includes("$SubNumber$")),p){p=(n.end-n.start)/n.vc;for(var h={},f=0;f<n.vc;h={Pf:void 0,Xi:void 0},f++){var m=n.start+p*f,g=m+p;h.Xi=f,h.Pf=null,(h=new $s(this.j+m,this.j+g,function(e){return function(){return t.h?(null==e.Pf&&(e.Pf=Ig(t.h.$b,t.H,o,t.C,i,e.Xi,t.G,t.J)),e.Pf):[]}}(h),0,null,this.u,r,this.j,this.l,[],"",null,null,Hs,this.B)).codecs=l,h.mimeType=u,h.bandwidth=c,0==this.I?f>0&&h.wd():f%this.I!=0&&h.wd(),d.push(h)}}(n=new $s(this.j+n.start,a,function(){return d.length>0||!t.h?[]:Ig(t.h.$b,t.H,o,t.C,i,null,t.G,t.J)},0,null,this.u,r,this.j,this.l,d,"",null,null,Hs,this.B,d.length>0)).codecs=l,n.mimeType=u,n.j=s,n.bandwidth=c,this.g[e]=n}return n},i.Gb=function(e){Ag(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}},i.Se=function(){return this.K},Eg.prototype.configure=function(e){this.o=e},Eg.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.H.destroy()},Eg.prototype.setManifestType=function(e){this.u=e},Eg.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},(i=Pg.prototype).release=function(){for(var e=g(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},i.ck=function(){return this.l},i.Jg=function(){return this.j.slice()},i.Hj=function(){return this.i},i.Uh=function(e,t){if(e){if("audio"==e.type)for(var n=g(this.h),o=n.next();!o.done;o=n.next())(o=o.value).matchedStreams=o.matchedStreams.filter(function(t){return t!==e});else if("video"==e.type)for(o=(n=g(this.g)).next();!o.done;o=n.next())(o=o.value).matchedStreams=o.matchedStreams.filter(function(t){return t!==e}),o.trickModeVideo&&(o.trickModeVideo.matchedStreams=o.trickModeVideo.matchedStreams.filter(function(t){return t!==e})),o.dependencyStream&&(o.dependencyStream.matchedStreams=o.dependencyStream.matchedStreams.filter(function(t){return t!==e}));else if(e.type==ut)for(o=(n=g(this.j)).next();!o.done;o=n.next())(o=o.value).matchedStreams=o.matchedStreams.filter(function(t){return t!==e});else if("image"==e.type)for(o=(n=g(this.i)).next();!o.done;o=n.next())(o=o.value).matchedStreams=o.matchedStreams.filter(function(t){return t!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}},i.hg=function(e,t,n){n=void 0!==n&&n;var o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w,k,C,A,I,E,M,R,_,L,P,O,N,U,B,F=this;return D(function(D){if(1==D.g){if(o=ct,!t&&1==e.length)return i=Dg(e,!1),r=i.Nh,s=i.fj,a=i.bj,l=i.ji,F.h=Array.from(r[0].values()),F.g=Array.from(s[0].values()),F.j=Array.from(a[0].values()),F.i=Array.from(l[0].values()),D.A(2);for(u=n?F.m.size:0,c=-1,d=0;d<e.length;d++)p=e[d],F.m.has(p.id)||(F.m.add(p.id),-1==c&&(c=d));return-1==c?D.return():(h=Dg(e,!0),f=h.Nh,m=h.fj,y=h.bj,v=h.ji,S(D,Promise.all([Ng(F,F.h,f,c,jg,$g,u),Ng(F,F.g,m,c,jg,$g,u),Ng(F,F.j,y,c,jg,$g,u),Ng(F,F.i,v,c,jg,$g,u)]),2))}if(b=0,x=[],F.g.length&&F.h.length)for(M=g(F.h),R=M.next();!R.done;R=M.next())for(_=R.value,L=g(F.g),P=L.next();!P.done;P=L.next())O=P.value,N=bi(_.drmInfos,O.drmInfos),_.drmInfos.length&&O.drmInfos.length&&!N.length||(U=(_.bandwidth||0)+(O.bandwidth||0),_.dependencyStream&&(U+=_.dependencyStream.bandwidth||0),O.dependencyStream&&(U+=O.dependencyStream.bandwidth||0),B=b++,x.push({id:B,language:_.language,disabledUntilTime:0,primary:_.primary,audio:_,video:O,bandwidth:U,drmInfos:N,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(w=F.g.length?F.g:F.h,k=g(w),C=k.next();!C.done;C=k.next())A=C.value,I=b++,E=A.bandwidth||0,A.dependencyStream&&(E+=A.dependencyStream.bandwidth||0),x.push({id:I,language:A.language,disabledUntilTime:0,primary:A.primary,audio:A.type==o.ia?A:null,video:A.type==o.Ca?A:null,bandwidth:E,drmInfos:A.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});F.l=x,T(D)})},i.Ri=function(e){this.o=e},$("shaka.util.PeriodCombiner",Pg),Pg.prototype.setUseStreamOnce=Pg.prototype.Ri,Pg.prototype.combinePeriods=Pg.prototype.hg,Pg.prototype.deleteStream=Pg.prototype.Uh,Pg.prototype.getImageStreams=Pg.prototype.Hj,Pg.prototype.getTextStreams=Pg.prototype.Jg,Pg.prototype.getVariants=Pg.prototype.ck;var py=1,hy=0,fy=-1,my=new Map;function gy(e,t){try{return function(e,t){var n=new DOMParser,o=yy.value()(e);e=null;try{e=n.parseFromString(o,"text/xml")}catch(i){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}(He(e),t)}catch(n){return null}}var yy=new se(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});function vy(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Ga=1,this.H=[],this.l={pf:"",type:"",profiles:[],sc:null,ub:0,cb:null,je:0},this.u=new Map,this.C=new Map,this.o=new Map,this.F=new Map,this.ya=new Map,this.m=new Pg,this.K=0,this.Da=new V(5),this.M=new To(function(){e.J&&!e.g.continueLoadingWhenPaused&&(e.I.Ma(e.J,"timeupdate"),e.J.paused)?e.I.Aa(e.J,"timeupdate",function(){return Py(e)}):Py(e)}),this.R=new Fi,this.O=null,this.G=[],this.ba=1/0,this.wa=!1,this.i=null,this.N=0,this.S=!1,this.I=new oe,this.J=null,this.V=!1,this.$="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.xa=new Km}function by(e){var t,n,o,i,r,s,a,l,u,c,d;return D(function(p){return 1==p.g?(t=4,n="MPD",o=function(e){var t=e.l.je;if(!e.l.pf||!t||!e.H.length)return[];var n=Date.now()/1e3,o=e.H.filter(function(e){return!(e=cn(e.attributes.ttl))||t+e>n}).map(Yt).filter(Ao);return o.length?ot(e.B,o):[]}(e),i=e.B,o.length?(i=o,n="Patch",t=6):e.B.length>1&&e.i&&(r=Lg(e.i,"Location",!0)).length&&(i=r),s=Hi(i,e.g.retryParameters),a=Date.now(),S(p,jy(e,s,0,{type:t}),2)):3!=p.g?(l=p.h,e.j?(l.uri&&l.uri!=l.originalUri&&!e.B.includes(l.uri)&&e.B.unshift(l.uri),u=new ye(l.uri),e.$=u.g.toString(),S(p,function(e,t,n,o){var i,r,s,a,l,u,c,d;return D(function(p){if(1==p.g){if(i=t,(r=e.g.dash.manifestPreprocessor)!=nc){if(pe("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),!(s=gy(i,o)))throw new je(2,4,4001,n);r(s),i=Ge(s.outerHTML)}if(!(a=Vt(i,o)))throw new je(2,4,4001,n);return(l=e.g.dash.manifestPreprocessorTXml)!=oc&&l(a),"Patch"===o?p.return(function(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,v,b,x,w,k,C,A,I,E,M;return D(function(R){if(1==R.g){if(n=t.attributes.mpdId,o=en(t,"originalPublishTime",rn),!n||n!==e.l.pf||o!==e.l.je)throw e.H=[],new je(1,4,4052);for(i=[],r=[],s=new Set,a=g(Wt(t)),l=a.next();!l.done;l=a.next())if(u=l.value,c=fn(u.attributes.sel||""),d=c[c.length-1],p=Yt(u)||"","MPD"===d.name)if("mediaPresentationDuration"===d.Cc){var _=sn(Yt(u)||"");if(null!=_){e.l.sc=_;for(var L=g(e.u.values()),P=L.next();!P.done;P=L.next())P.value.sc=_}}else if("type"===d.Cc){for(e.h.presentationTimeline.cd("static"==p),e.l.type=p,L=(_=g(e.u.values())).next();!L.done;L=_.next())L.value.Fb="dynamic"==p;"static"==p&&(e.K=-1)}else"publishTime"===d.Cc?e.l.je=rn(p)||0:null===d.Cc&&"add"===u.tagName&&r.push(u);else if("PatchLocation"===d.name)mn(e.H,u);else if("Period"===d.name)"add"===u.tagName?r.push(u):"remove"===u.tagName&&d.id&&Ty(e,d.id);else if("SegmentTemplate"===d.name){if((_=(L=fn(u.attributes.sel||""))[L.length-1]).Cc){L=ky(e,L),P=Yt(u)||"";for(var D=g(L),O=D.next();!O.done;O=D.next())yn((O=e.u.get(O.value)).L.Nc,u.tagName,_.Cc,P);_=L}else _=[];for(h=g(_),f=h.next();!f.done;f=h.next())m=f.value,s.add(m)}else if("SegmentTimeline"===d.name||"S"===d.name){for(_=fn(u.attributes.sel||""),P=(L=g(_=ky(e,_))).next();!P.done;P=L.next())mn(D=Kt(P=og(P=e.u.get(P.value),Tg,"SegmentTimeline"),"S"),u),P.children=D;for(v=g(_),b=v.next();!b.done;b=v.next())x=b.value,s.add(x)}for(w=g(s),k=w.next();!k.done;k=w.next())C=k.value,Cy(e,C);for(A=g(r),I=A.next();!I.done;I=A.next())E=I.value,i.push.apply(i,y(Sy(e,E)));return i.length?(e.h.periodCount+=i.length,e.h.gapCount=e.N,S(R,wy(e,i,!0),2)):R.A(2)}"static"==e.l.type&&(M=e.l.sc,e.h.presentationTimeline.rb(M||1/0)),T(R)})}(e,a)):e.g.dash.disableXlinkProcessing?p.return(xy(e,a,n)):(u=e.g.dash.xlinkFailGracefully,c=ig(a,e.g.retryParameters,u,n,e.j.networkingEngine),ji(e.R,c),S(p,c.promise,2))}return d=p.h,p.return(xy(e,d,n))})}(e,l.data,l.uri,n),3)):p.return(0)):(c=Date.now(),d=(c-a)/1e3,e.Da.sample(1,d),e.ma.clear(),p.return(d))})}function xy(e,t,n){var o,i,r,s,a,l,u,c,d,p,h,f,m,v,b,x,w,C,E,M,R,_,L,P,O,N,U,B,F,j,z,$,V,H,G,q,W,X,Y,J,Q,Z,ee,te,ne,oe,ie,re,se,ae,le,ue,ce,de;return D(function(pe){switch(pe.g){case 1:for(e.i&&e.i.l.clear(),o=[n],i=[],r=new Map,s=Kt(t,"Location"),a=g(s),l=a.next();!l.done;l=a.next())u=l.value,c=u.attributes.serviceLocation,(d=Yt(u))&&(p=ot(o,[d])[0],c&&(e.i?_g(e.i,"Location",c,p):r.set(c,p)),i.push(p));if(e.i?(h=Lg(e.i,"Location",!0)).length>0&&(o=e.B=h):i.length&&(o=e.B=i),e.l.pf=t.attributes.id||"",e.l.je=en(t,"publishTime",rn)||0,e.H=Kt(t,"PatchLocation"),f=Promise.resolve(),(m=Qt(t,"ContentSteering"))&&e.j)for(v=m.attributes.defaultServiceLocation,e.i?(e.i.i=o,e.i.h=v):(e.i=new Eg(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=o,e.i.h=v,(b=Yt(m))&&(en(m,"queryBeforeStart",pn,!1)?f=Mg(e.i,b):Mg(e.i,b))),x=g(r.keys()),w=x.next();!w.done;w=x.next())C=w.value,E=r.get(C),_g(e.i,"Location",C,E);if(M=Kt(t,"BaseURL"),R=!1,e.i)for(_=g(M),L=_.next();!L.done;L=_.next())P=L.value,O=P.attributes.serviceLocation,N=Yt(P),O&&N&&(_g(e.i,"BaseURL",O,N),R=!0);if(e.X.splice(0),R&&e.i||(U=M.map(Yt),e.X.push.apply(e.X,y(ot(o,U)))),B=e.i,F=e.X,j=function(){return B&&R?Lg(B,"BaseURL"):F.slice()},e.l.cb=j,z=0,M&&M.length&&(z=en(M[0],"availabilityTimeOffset",dn)||0),e.l.ub=z,e.K=en(t,"minimumUpdatePeriod",sn,-1),$=en(t,"availabilityStartTime",rn),V=en(t,"timeShiftBufferDepth",sn),H=e.g.dash.ignoreSuggestedPresentationDelay,G=null,H||(G=en(t,"suggestedPresentationDelay",sn)),q=e.g.dash.ignoreMaxSegmentDuration,W=null,q||(W=en(t,"maxSegmentDuration",sn)),X=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&"static"==X),e.l.type=X,e.h)for(Y=e.h.presentationTimeline,J=Y.Ib(),Q=g(e.o.values()),Z=Q.next();!Z.done;Z=Q.next())(ee=Z.value).segmentIndex&&ee.segmentIndex.Ya(J);else te=e.g.dash.ignoreMinBufferTime,ne=0,te||(ne=en(t,"minBufferTime",sn)||0),oe=null!=G?Math.min(G,V||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(1.5*ne,V||1/0),Y=new ul($,oe,e.g.dash.autoCorrectDrift);return Y.cd("static"==X),Y.W()&&!isNaN(e.g.availabilityWindowOverride)&&(V=e.g.availabilityWindowOverride),null==V&&(V=1/0),Y.Hf(V),ie=t.attributes.profiles||"",e.l.profiles=ie.split(","),re={Fb:"static"!=X,presentationTimeline:Y,sa:null,na:null,qa:null,L:null,bandwidth:0,Lg:!1,ub:z,sc:null,profiles:ie.split(","),roles:null,Mb:function(){return""}},S(pe,f,2);case 2:return e.N=0,se=Ey(e,re,j,t,!1),ae=se.duration,le=se.periods,("static"!=X||e.V)&&se.Wh||Y.rb(ae||1/0),e.S&&e.wa&&Y.Oi(e.ba),Y.Tg(W||1),e.S&&e.wa&&(ue=null!=G?G:e.g.defaultPresentationDelay,Y.oh(ue)),e.h?(e.h.periodCount=le.length,e.h.gapCount=e.N,S(pe,wy(e,le,!1),4)):S(pe,e.m.hg(le,re.Fb),6);case 6:if(e.h={presentationTimeline:Y,variants:e.m.l,textStreams:e.m.Jg(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Ay(t),nextUrl:Iy(t),periodCount:le.length,gapCount:e.N,isLowLatency:e.S,startTime:null},!Y.ej()){pe.A(7);break}return ce=Kt(t,"UTCTiming"),S(pe,function(e,t,n){var o,i,r,s,a,l,u,c;return D(function(d){switch(d.g){case 1:o=n.map(function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}}),i=e.g.dash.clockSyncUri,!o.length&&i&&o.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),r=g(o),s=r.next();case 2:if(s.done){d.A(4);break}switch(a=s.value,k(d,5),l=a.scheme,u=a.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(u),d.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":K("NTP UTCTiming scheme is not supported");break;default:K("Unrecognized scheme in UTCTiming element",l)}d.A(9);break;case 7:return S(d,Ny(e,t,u,"HEAD"),10);case 10:return d.return(d.h);case 8:return S(d,Ny(e,t,u,"GET"),11);case 11:return d.return(d.h);case 9:A(d,3);break;case 5:I(d);case 3:s=r.next(),d.A(2);break;case 4:return K("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}})}(e,j,ce),8);case 8:if(de=pe.h,!e.j)return pe.return();Y.Pi(de);case 7:Y.kf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),function(e){for(var t=Array.from(e.F.keys()).filter(function(t){return!e.G.includes(t)}),n=(t=g(t)).next();!n.done;n=t.next()){n=n.value;for(var o=!0,i=g(e.F.get(n)),r=i.next();!r.done;r=i.next()){r=r.value;var s=e.o.get(r);s&&(s.segmentIndex&&0!=s.segmentIndex.getNumReferences()?o=!1:(e.m&&e.m.Uh(s,n),e.o.delete(r)))}o&&e.F.delete(n)}}(e),function(e,t){t=new Set(t.map(function(e){return e.id}));for(var n=g(e.C.keys()),o=n.next();!o.done;o=n.next())o=o.value,t.has(o)||e.C.delete(o)}(e,le),T(pe)}})}function wy(e,t,n){var o;return D(function(i){if(1==i.g)return S(i,e.m.hg(t,!0,n),2);e.h.variants=e.m.l,(o=e.m.Jg()).length>0&&(e.h.textStreams=o),e.h.imageStreams=e.m.i,e.j.filter(e.h),T(i)})}function Sy(e,t){return Ey(e,{Fb:"dynamic"==e.l.type,presentationTimeline:e.h.presentationTimeline,sa:null,na:null,qa:null,L:null,bandwidth:0,Lg:!1,ub:e.l.ub,profiles:e.l.profiles,sc:e.l.sc,roles:null,Mb:function(){return""}},e.l.cb,t,!0).periods}function Ty(e,t){e.h.periodCount--;for(var n=g(e.u.keys()),o=n.next();!o.done;o=n.next())(o=o.value).startsWith(t)&&(og(e.u.get(o),Tg,"SegmentTimeline").children=[],Cy(e,o),e.u.delete(o));e.G=e.G.filter(function(e){return e!==t})}function ky(e,t){for(var n="",o="",i=-1,r="",s=(t=g(t)).next();!s.done;s=t.next())"Period"===(s=s.value).name?n=s.id:"AdaptationSet"===s.name?(o=s.id,null!==s.position&&(i=s.position)):"Representation"===s.name&&(r=s.id);if(t=[],r)t.push(n+","+r);else if(o)for(i=g(e.u.values()),e=i.next();!e.done;e=i.next())(e=e.value).sa.id===n&&e.qa.id===o&&e.L.id&&t.push(n+","+e.L.id);else if(i>-1)for(o=g(e.u.values()),e=o.next();!e.done;e=o.next())(e=e.value).sa.id===n&&e.qa.position===i&&e.L.id&&t.push(n+","+e.L.id);return t}function Cy(e,t){var n=e.u.get(t),o=e.o.get(t);o.segmentIndex&&o.segmentIndex.Ya(e.h.presentationTimeline.Ib());try{var i=Sg(n,function(t,n,o,i){return By(e,t,n,o,i)},e.o,!0,e.g.dash.initialSegmentLimit,e.ya,n.L.aesKey,null,!0,e.C);o.createSegmentIndex=function(){return D(function(e){if(1==e.g)return o.segmentIndex?e.A(0):S(e,i.Sc(),3);o.segmentIndex=e.h,T(e)})}}catch(r){if((t=n.L.contentType)!=ut&&"application"!=t&&"image"!=t||4002!=r.code)throw r}}function Ay(e){var t=Qt(e,"ServiceDescription");if(!t)return null;if(e=Qt(t,"Latency"),t=Qt(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function Iy(e){if(!(e=Kt(e,"SupplementalProperty")).length)return null;for(var t=(e=g(e)).next();!t.done;t=e.next())if("urn:mpeg:dash:chaining:2016"==(t=t.value).attributes.schemeIdUri)return t.attributes.value;return null}function Ey(e,t,n,o,i){var r=t.sc;r||(r=en(o,"mediaPresentationDuration",sn),e.l.sc=r);var s=0;e.h&&e.h.presentationTimeline&&e.V&&(s=e.h.presentationTimeline.Xb());var a=[],l=s;o=Kt(o,"Period");for(var u=0;u<o.length;u++){var c=o[u],d=o[u+1],p=en(c,"start",sn,l),h=c.attributes.id,f=en(c,"duration",sn);p=0==u&&0==p&&e.V?s:p;var m=null;if(d){var y=en(d,"start",sn);null!=y&&(m=y-p+s)}else null!=r&&(m=r-p+s);if(y=dt,m&&f&&Math.abs(m-f)>y&&m>f&&e.N++,null==m&&(m=f),!(null!==e.O&&null!==h&&null!==p&&p<e.O)||e.G.includes(h)||u+1==o.length){if(null!==p&&(null===e.O||p>e.O)&&(e.O=p),l=My(e,t,n,{start:p,duration:m,node:c,df:null==m||!d}),a.push(l),t.sa.id&&m&&e.ya.set(t.sa.id,m),null==m){l=null;break}l=p+m}}if(i)for(n=(t=g(a)).next();!n.done;n=t.next())n=n.value.id,e.G.includes(n)||e.G.push(n);else e.G=a.map(function(e){return e.id});return null!=r?{periods:a,duration:r+s,Wh:!1}:{periods:a,duration:l,Wh:!0}}function My(e,t,n,o){t.sa=Oy(e,o.node,null,n),t.na=o,t.sa.ub=t.ub,t.sa.id||(t.sa.id="__shaka_period_"+o.start);var i=Kt(o.node,"EventStream");n=t.presentationTimeline.Ib();for(var r=(i=g(i)).next();!r.done;r=i.next())Uy(e,o.start,o.duration,r.value,n);for(i=(n=g(n=Kt(o.node,"SupplementalProperty"))).next();!i.done;i=n.next())"urn:mpeg:dash:urlparam:2014"==(i=i.value).attributes.schemeIdUri&&(i=Ly(e,i))&&(t.Mb=i);if(n=Kt(o.node,"AdaptationSet").map(function(n,o){return _y(e,t,o,n)}).filter(Ao),t.Fb){i=[];for(var s=(r=g(n)).next();!s.done;s=r.next())for(var a=(s=g(s.value.Pk)).next();!a.done;a=s.next())i.push(a.value);if(i.length!=new Set(i).size)throw new je(2,4,4018)}for(i=new Map,s=(r=g(n)).next();!s.done;s=r.next())for(a=(s=g(s.value.vj)).next();!a.done;a=s.next()){var l=g(a.value);a=l.next().value,l=l.next().value,i.set(a,l)}if(i.size)for(r=null,a=(s=g(n)).next();!a.done;a=s.next()){l=[];for(var u=g((a=a.value).streams),c=u.next(),d={};!c.done;d={wh:void 0},c=u.next())if(d.wh=c.value,i.has(d.wh.originalId)){r||(r=Kt(o.node,"AdaptationSet").map(function(n,o){return _y(e,t,o,n)}).filter(Ao));for(var p=(c=g(r)).next();!p.done;p=c.next())(p=p.value.streams.find(function(e){return function(t){return t.originalId==e.wh.originalId}}(d)))&&(p.dependencyStream=i.get(p.originalId),p.originalId+=p.dependencyStream.originalId,l.push(p))}l.length&&a.streams.push.apply(a.streams,y(l))}if(o=n.filter(function(e){return!e.Eh}),n=n.filter(function(e){return e.Eh}),!e.g.disableIFrames)for(i=(n=g(n)).next();!i.done;i=n.next())for(r=(i=i.value).Eh.split(" "),a=(s=g(o)).next();!a.done;a=s.next())if(a=a.value,r.includes(a.id))for(l=(a=g(a.streams)).next();!l.done;l=a.next())si(l.value,i.streams);if(n=Ry(e.g.disableAudio,o,"audio"),i=Ry(e.g.disableVideo,o,"video"),r=Ry(e.g.disableText,o,ut),o=Ry(e.g.disableThumbnails,o,"image"),0===i.length&&0===n.length)throw new je(2,4,4004);return{id:t.sa.id,audioStreams:n,videoStreams:i,textStreams:r,imageStreams:o}}function Ry(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n||e.push.apply(e,y(t.streams)),e},[])}function _y(t,n,o,i){function r(e){var o=e.attributes["dvb:fontFamily"];e=e.attributes["dvb:url"],o&&e&&(e=ot(n.qa.cb(),[e],n.Mb()),t.j.addFont(o,e[0]))}function s(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function a(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.qa=Oy(t,i,n.sa,null),n.qa.position=o;var l=!1,u=(o=Kt(i,"Role")).map(function(e){return e.attributes.value}).filter(Ao),c=void 0,d=n.qa.contentType==ut;d&&(c="subtitle");for(var p=(o=g(o)).next();!p.done;p=o.next()){var h=(p=p.value).attributes.schemeIdUri;if(null==h||"urn:mpeg:dash:role:2011"==h)switch(p=p.attributes.value,p){case"main":l=!0;break;case"caption":case"subtitle":c=p}}var f=Kt(i,"EssentialProperty");o=null;var m=!1;p=null,h=!1;for(var v=(f=g(f)).next();!v.done;v=f.next()){var b=(v=v.value).attributes.schemeIdUri;if("http://dashif.org/guidelines/trickmode"==b)o=v.attributes.value;else if("urn:mpeg:mpegB:cicp:TransferCharacteristics"==b)var x=a(parseInt(v.attributes.value,10));else if("urn:mpeg:mpegB:cicp:ColourPrimaries"==b)var w=s(parseInt(v.attributes.value,10));else"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=b&&("urn:mpeg:dash:ssr:2023"==b&&t.g.dash.enableFastSwitching?m=!0:"urn:dvb:dash:fontdownload:2014"==b?r(v):"urn:mpeg:dash:urlparam:2014"==b&&(p=Ly(t,v))||(h=!0))}if(h)return null;var k=null;for(f=(h=g(h=Kt(i,"SupplementalProperty"))).next();!f.done;f=h.next())"http://dashif.org/guidelines/last-segment-number"==(v=(f=f.value).attributes.schemeIdUri)?k=parseInt(f.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==v?x=a(parseInt(f.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==v?w=s(parseInt(f.attributes.value,10)):"urn:dvb:dash:fontdownload:2014"==v?r(f):"urn:mpeg:dash:urlparam:2014"==v&&(p=Ly(t,f));p&&(n.Mb=p),p=Kt(i,"Accessibility");var C,A=new Map;for(h=(p=g(p)).next();!h.done;h=p.next())if(h=(f=h.value).attributes.schemeIdUri,f=f.attributes.value,"urn:scte:dash:cc:cea-608:2015"!=h||t.g.disableText)if("urn:scte:dash:cc:cea-708:2015"!=h||t.g.disableText)"urn:mpeg:dash:role:2011"==h?null!=f&&(u.push(f),"captions"==f&&(c="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==h&&("1"==f?C="visually impaired":"2"==f?C="hard of hearing":"9"==f&&(C="spoken subtitles"));else if(h=1,null!=f)for(v=(f=g(f.split(";"))).next();!v.done;v=f.next()){b=v.value;var I=v=void 0;b.includes("=")?(v="svc"+(b=b.split("="))[0],I=b[1].split(",")[0].split(":").pop()):(v="svc"+h,h++,I=b),A.set(v,Lo(I))}else A.set("svc1","und");else if(h=1,null!=f)for(b=(v=g(f=f.split(";"))).next();!b.done;b=v.next()){I=b.value;var E=b=void 0;I.includes("=")?(b=(I=I.split("="))[0].startsWith("CC")?I[0]:"CC"+I[0],E=I[1]||"und"):(b="CC"+h,2==f.length?h+=2:h++,E=I),A.set(b,Lo(E))}else A.set("CC1","und");p=Kt(i,"ContentProtection");var M=Xm(t.xa,p,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI);n.qa.encrypted=p.length>0;var R=Lo(n.qa.language||"und"),_=n.qa.label,L=new Map;if(i=Kt(i,"Representation"),!t.g.ignoreSupplementalCodecs){for(p=[],f=(h=g(i)).next();!f.done;f=h.next())(f=tn(v=f.value,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&((v=jt(v)).attributes.codecs=f.split(" ").join(","),v.attributes.id&&(v.attributes.supplementalId=v.attributes.id+"_supplementalCodecs"),p.push(v));i.push.apply(i,y(p))}if(p=i.map(function(o){var i=function(t,n,o,i,r,s,a,l,u,c,d,p){n.L=Oy(t,c,n.qa,null);var h=n.L.id;if(t.ba=Math.min(t.ba,n.L.ub),t.S=t.ba>0,!function(e){var t=e.Hd?1:0;return t+=e.zc?1:0,0==(t+=e.Nc?1:0)?e.contentType==ut||"application"==e.contentType:(1!=t&&(e.Hd&&(e.zc=null),e.Nc=null),!0)}(n.L))return null;var f=n.na.start;n.bandwidth=en(c,"bandwidth",un)||0,n.roles=l;var m=Kt(c,"SupplementalProperty"),g=Kt(c,"EssentialProperty"),y=Kt(c,"ContentProtection");c=null;var v,b,x=g.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri});(x||(x=m.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri})))&&(c=Ly(t,x)),c&&(n.Mb=c),x=n.L.contentType,c=x==ut||"application"==x,x="image"==x,y.length&&(n.qa.encrypted=!0);try{var w=void 0;if(o.dg){var k=n.L.cb,C=n.Mb,A=Hi(ot(k(),[o.dg.tk],C()),t.g.retryParameters);w={bitsKey:128,blockCipherMode:"CBC",iv:o.dg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,o,i;return D(function(r){if(1==r.g)return S(r,jy(t,A,6),2);if(3!=r.g){if(!(n=r.h).data||16!=n.data.byteLength)throw new je(2,4,4049);return o={name:"AES-CBC"},i=w,S(r,e.crypto.subtle.importKey("raw",n.data,o,!0,["decrypt"]),3)}i.cryptoKey=r.h,w.fetchKey=void 0,T(r)})}}}if(n.L.aesKey=w,k=function(e,n,o,i){return By(t,e,n,o,i)},n.L.Hd)var I=fg(n,k,w);else if(n.L.zc)I=xg(n,t.o,w);else if(n.L.Nc)I=Sg(n,k,t.o,!!t.h,t.g.dash.initialSegmentLimit,t.ya,w,p,!1,t.C);else{var E=n.na.duration||0,M=n.L.cb,R=n.L.mimeType,_=n.L.codecs;I={endTime:-1,timeline:-1,Sc:function(){var e=Dl(f,E,M());return e.Gb(function(e){e.mimeType=R,e.codecs=_}),Promise.resolve(e)},timescale:1}}}catch(os){if((c||x)&&4002==os.code)return null;throw os}if(p=function(e,t,n,o,i){var r=Xm(e,t,o,i);if(n.Yh)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==r.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=r.drmInfos),n.Yh=!1;else if(r.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter(function(e){return r.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==n.drmInfos.length))throw new je(2,4,4008);return r.Th||n.Th}(t.xa,y,o,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI),p=new Set(p?[p]:[]),y=!1,m.some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value})&&(y=!0),m=!1,c&&(m=l.includes("forced_subtitle")||l.includes("forced-subtitle")),x&&((g=g.find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)}))&&(v=g.attributes.value),!v))return null;c=n.L.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(b="PQ"),g=n.L.id?n.sa.id+","+n.L.id:"",t.H.length&&h&&t.u.set(n.sa.id+","+h,function(e){function t(e){return e?((e=zt(e)).Hd=null,e.zc=null,e.Nc=bn(e.Nc),e.zf=null,e):null}return(e=zt(e)).sa=t(e.sa),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=zt(e.na),e.na.node=null),e}(n)),n.L.zf&&function(e,t,n,o){if(!e.ma.has(t)){e.ma.add(t);var i,r=en(t,"presentationTime",cn)||0,s=Qt(t,"UTCTiming");(i=s&&s.attributes.schemeIdUri)&&(i=!("urn:mpeg:dash:utc:http-ntp:2014"===(s=s.attributes.schemeIdUri)||"urn:mpeg:dash:utc:ntp:2014"===s||"urn:mpeg:dash:utc:sntp:2014"===s)),t=i?1e3*(en(t,"wallClockTime",rn)||0):pa(t=en(t,"wallClockTime",cn)||0),r=(n=new Date(t-r/n.timescale*1e3)).getTime()/1e3,isNaN(r)||(o.o||o.ph(r),o=new Oi("prft",o=(new Map).set("detail",{wallClockTime:t,programStartDate:n})),e.j.onEvent(o))}}(t,n.L.zf,I,n.presentationTimeline),-1!=I.endTime&&null!=n.sa.id&&null!=n.L.id&&((h=t.C.get(n.sa.id))?(h.endTime=I.endTime,h.dh.includes(n.L.id)||h.dh.push(n.L.id),t.C.set(n.sa.id,h)):t.C.set(n.sa.id,{endTime:I.endTime,timeline:I.timeline,dh:[n.L.id]}));var L=g&&t.o.has(g)?t.o.get(g):{id:t.Ga++,originalId:n.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){L.segmentIndex&&(L.segmentIndex.release(),L.segmentIndex=null)},segmentIndex:null,mimeType:n.L.mimeType,codecs:c,frameRate:n.L.frameRate,pixelAspectRatio:n.L.pixelAspectRatio,bandwidth:n.bandwidth,width:n.L.width,height:n.L.height,kind:i,encrypted:o.drmInfos.length>0,drmInfos:o.drmInfos,keyIds:p,language:r,originalLanguage:n.qa.language,label:s,type:n.qa.contentType,primary:a,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:n.L.emsgSchemeIdUris,roles:l,forced:m,channelsCount:n.L.tf,audioSamplingRate:n.L.audioSamplingRate,spatialAudio:y,closedCaptions:u,hdr:b,colorGamut:void 0,videoLayout:void 0,tilesLayout:v,accessibilityPurpose:d,external:!1,fastSwitching:!1,fullMimeTypes:new Set([oo(n.L.mimeType,n.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return L.createSegmentIndex=function(){var e;return D(function(t){if(1==t.g)return L.segmentIndex?t.A(0):(e=L,S(t,I.Sc(),3));e.segmentIndex=t.h,T(t)})},g&&n.Fb&&!t.o.has(g)&&(n=n.sa.id||"",t.F.has(n)||t.F.set(n,[]),t.o.set(g,L),t.F.get(n).push(g)),L}(t,n,M,c,R,_,l,u,A,o,C,k);return i&&(i.hdr=i.hdr||x,i.colorGamut=i.colorGamut||w,i.fastSwitching=m,o=o.attributes.dependencyId)?(i.baseOriginalId=o,L.set(o,i),null):i}).filter(function(e){return!!e}),0==p.length&&0==L.size){if(o="image"==n.qa.contentType,t.g.dash.ignoreEmptyAdaptationSet||d||o)return null;throw new je(2,4,4003)}if(!n.qa.contentType||"application"==n.qa.contentType)for(n.qa.contentType=Fy(p[0].mimeType,p[0].codecs),h=(d=g(p)).next();!h.done;h=d.next())h.value.type=n.qa.contentType;for(d=n.qa.id||"__fake__"+t.Ga++,f=(h=g(p)).next();!f.done;f=h.next()){for(f=f.value,b=(v=g(M.drmInfos)).next();!b.done;b=v.next())(b=b.value).keyIds=b.keyIds&&f.keyIds?new Set([].concat(y(b.keyIds),y(f.keyIds))):b.keyIds||f.keyIds;t.g.enableAudioGroups&&(f.groupId=d)}return i=i.map(function(e){return e.attributes.supplementalId||e.attributes.id}).filter(Ao),{id:d,contentType:n.qa.contentType,language:R,Gm:l,streams:p,drmInfos:M.drmInfos,Eh:o,Pk:i,vj:L}}function Ly(e,t){if((t=Zt(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&en(t,"useMPDUrlQuery",pn,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return"$querypart$"==n?e.$:n.split("&").map(function(t){if("$querypart$"==t)return e.$;var n=/\$query:(.*?)\$/g.exec(t);if(n&&2==n.length){n=n[1];var o=new Re(e.$).get(n);if(o.length)return n+"="+o[0]}return t}).join("&")}}return null}function Py(e){var t,n;return D(function(o){switch(o.g){case 1:return t=0,k(o,2),S(o,by(e),4);case 4:t=o.h,A(o,3);break;case 2:if(n=I(o),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),o.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return o.return();e.j.onManifestUpdated(),Dy(e,t),T(o)}})}function Dy(e,t){if(!(e.K<0)){var n=e.K;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.M.ka(Math.max(n-t,H(e.Da)))}}function Oy(e,t,n,o){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,tf:null,audioSamplingRate:null,ub:0,Ef:1,encrypted:!1},o=o||n.cb;var i,r=t.attributes.id,s=t.attributes.supplementalId,a=Kt(t,"BaseURL"),l=!1;if(e.i)for(var u=g(a),c=u.next();!c.done;c=u.next()){var d=c.value;c=d.attributes.serviceLocation,d=Yt(d),c&&d&&(_g(e.i,r,c,d),l=!0)}l&&e.i||(i=a.map(Yt));var p=e.i;e=t.attributes.contentType||n.contentType,u=t.attributes.mimeType||n.mimeType,c=ru([t.attributes.codecs||n.codecs]).join(","),d=en(t,"frameRate",hn)||n.frameRate;var h=t.attributes.sar||n.pixelAspectRatio,f=function(e,t){t=t.slice();for(var n=(e=g(e)).next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}(Kt(t,"InbandEventStream"),n.emsgSchemeIdUris),m=Kt(t,"AudioChannelConfiguration");m=function(e){for(var t=(e=g(e)).next();!t.done;t=e.next()){var n=(t=t.value).attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(t,10)))continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],!(t=parseInt(t,16)))continue;for(var o=0,i=0;i<n.length;i++)t&1<<i&&(o+=n[i]);if(o)return o;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),!(t=parseInt(t,16)))continue;for(i=o=0;i<n.length;i++)t&1<<i&&(o+=n[i]);if(o)return o;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}(m)||n.tf;var y=en(t,"audioSamplingRate",cn)||n.audioSamplingRate;e||(e=Fy(u,c));var v=Qt(t,"SegmentBase"),b=Qt(t,"SegmentTemplate"),x=v&&en(v,"availabilityTimeOffset",dn)||0,w=b&&en(b,"availabilityTimeOffset",dn)||0,S=a&&a.length&&en(a[0],"availabilityTimeOffset",dn)||0;x=n.ub+S+x+w,w=null,(S=Qt(t,"SegmentSequenceProperties"))&&(S=en(S,"cadence",un))&&(w=S),S=t.attributes.label;var T=Kt(t,"Label");return T&&T.length&&Xt(T=T[0])&&(S=Xt(T)),{cb:function(){return ot(o(),a.length?p&&l?Lg(p,r):i||[]:[])},Hd:v||n.Hd,zc:Qt(t,"SegmentList")||n.zc,Nc:b||n.Nc,zf:Qt(t,"ProducerReferenceTime")||n.zf,width:en(t,"width",cn)||n.width,height:en(t,"height",cn)||n.height,contentType:e,mimeType:u,codecs:c,frameRate:d,pixelAspectRatio:h,emsgSchemeIdUris:f,id:s||r,originalId:r,language:t.attributes.lang,tf:m,audioSamplingRate:y,ub:x,bf:null,Ef:w||n.Ef,label:S||null,encrypted:!1}}function Ny(e,t,n,o){var i,r,s,a,l,u,c;return D(function(d){if(1==d.g)return i=[Ke(n)],r=ot(t(),i),(s=Hi(r,e.g.retryParameters)).method=o,a=e.j.networkingEngine.request(4,s,{isPreload:e.oa()}),ji(e.R,a),S(d,a.promise,2);if(l=d.h,"HEAD"==o){if(!l.headers||!l.headers.date)return d.return(0);u=l.headers.date}else u=$e(l.data);return c=Date.parse(u),isNaN(c)?d.return(0):d.return(c-Date.now())})}function Uy(e,t,n,o,i){for(var r=o.attributes.schemeIdUri||"",s=o.attributes.value||"",a=en(o,"timescale",cn)||1,l=en(o,"presentationTimeOffset",cn)||0,u=(o=g(Kt(o,"Event"))).next();!u.done;u=o.next()){var c=en(u=u.value,"presentationTime",cn)||0,d=en(u,"duration",cn)||0;d=(c=Math.max((c-l)/a+t,t))+d/a,null!=n&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<i||(u={schemeIdUri:r,value:s,startTime:c,endTime:d,id:u.attributes.id||"",timescale:a,eventElement:vn(u),eventNode:bn(u)},e.j.onTimelineRegionAdded(u))}}function By(e,t,n,o,i){var r,s,a,l;return D(function(u){return 1==u.g?(r=Xi,s=i?0:1,a=au(t,n,o,e.g.retryParameters),S(u,jy(e,a,r,{type:s}),2)):(l=u.h,u.return(l.data))})}function Fy(e,t){return vo(t=oo(e,t))?ut:e.split("/")[0]}function jy(e,t,n,o){return o||(o={}),o.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,o),ji(e.R,t),t.promise}function zy(){}(i=vy.prototype).configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.M.Kb(),this.i&&this.i.configure(this.g),this.m&&this.m.Ri(this.g.dash.useStreamOnceInPeriodFlattening)},i.start=function(e,t){var n,o=this;return D(function(i){if(1==i.g)return o.wa=t.isLowLatencyMode(),o.B=[e],o.j=t,S(i,by(o),2);if(n=i.h,o.j&&Dy(o,n),!o.j)throw new je(2,7,7001);return i.return(o.h)})},i.stop=function(){for(var e=g(this.o.values()),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.F.clear(),this.u.clear(),this.C.clear(),this.l={pf:"",type:"",profiles:[],sc:null,ub:0,cb:null,je:0},this.m=null,null!=this.M&&(this.M.stop(),this.M=null),this.i&&this.i.destroy(),this.I&&(this.I.release(),this.I=null),this.ma.clear(),this.xa.release(),this.R.destroy()},i.update=function(){var e,t=this;return D(function(n){return 1==n.g?(k(n,2),S(n,by(t),4)):2!=n.g?A(n,0):(e=I(n),t.j&&e?(t.j.onError(e),void T(n)):n.return())})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Ic();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,Dy(this,0))}}},i.banLocation=function(e){this.i&&this.i.banLocation(e)},i.setMediaElement=function(e){this.J=e},$("shaka.dash.DashParser",vy),Zr("application/dash+xml",function(){return new vy}),Zr("video/vnd.mpeg.dash.mpd",function(){return new vy}),$("shaka.dependencies",zy),zy.has=function(e){return Hy.has(e)},zy.add=function(e,t){if(!Vy[e])throw Error(e+" is not supported");e==$y?pe("mux.js","mux.js is no longer used in Shaka Player."):Hy.set(e,function(){return t})};var $y="muxjs",Vy={Hm:$y,ISOBoxer:"ISOBoxer"};zy.Allowed=Vy;var Hy=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);function Gy(){this.j=new se(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase()?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new se(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function qy(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function Wy(){Gy.call(this),this.g=new se(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new se(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}function Ky(){if(!Xy())throw Error("Not a Chromecast device!");Gy.call(this),this.h=new se(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new se(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return(e=e.toLowerCase()).includes("android")?Yy:e.includes("fuchsia")?Jy:Qy})}function Xy(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}(i=Gy.prototype).cc=function(){return!!navigator.mediaCapabilities},i.Oa=function(){return this.j.value()},i.Ea=function(){return this.l.value()},i.Ed=function(){return!1},i.Gi=function(){return!1},i.cf=function(){return!1},i.Hi=function(){return!1},i.le=function(){return!1},i.fd=function(){return!0},i.Pc=function(){return!0},i.pe=function(){return!0},i.Mi=function(){return 0},i.jc=function(){return Promise.resolve({width:1/0,height:1/0})},i.Ui=function(){return!1},i.sh=function(){return!1},i.Wa=function(e){var t=this.Oa();return"TV"!==t&&"CONSOLE"!==t&&"CAST"!==t||(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},i.yh=function(){return!!e.indexedDB},i.Ei=function(){return[]},i.sd=function(t){return void 0!==e.matchMedia&&e.matchMedia("(color-gamut: p3)").matches?t?"HLG":"PQ":"SDR"},i.aj=function(){return!1},i.si=function(){return!1},i.hh=function(){return!1},i.Kf=function(){return!0},i.ti=function(){return!1},i.$i=function(){return!0},i.ed=function(){return!1},i.Sg=function(e){return"com.apple.fps"===e},i.Jf=function(){return!0},i.toString=function(){return"Device: "+this.Ob()+" v"+this.za()+"; Type: "+this.Oa()},f(Wy,Gy),(i=Wy.prototype).za=function(){return this.g.value()},i.Ob=function(){return"Apple Browser"},i.Oa=function(){return this.h.value()},i.Ea=function(){return"WEBKIT"},i.cc=function(){return!1},i.Ed=function(e,t){return"audio"===t},i.cf=function(){return!0},i.Hi=function(e){return"audio"===e},i.Wa=function(e){return Gy.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},i.aj=function(){return!0},i.Jf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(le=function(){return new Wy}),f(Ky,Gy),(i=Ky.prototype).za=function(){return this.h.value()},i.Ob=function(){return"Chromecast with "+this.g.value()},i.Oa=function(){return"CAST"},i.Ea=function(){return"CHROMIUM"},i.cc=function(){return Gy.prototype.cc.call(this)&&this.g.value()!==Qy},i.Pc=function(){return this.g.value()!==Qy},i.Mi=function(){switch(this.g.value()){case Yy:return 0;case Jy:return 3;default:return 1}},i.jc=function(){var t,n,o,i;return D(function(r){switch(r.g){case 1:if(t=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,n={width:1280,height:720},k(r,2),!(o=t)){r.A(4);break}return S(r,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:o=r.h;case 4:if(o){n.width=3840,n.height=2160,r.A(6);break}if(!(i=t)){r.A(7);break}return S(r,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:i=r.h;case 7:i&&(n.width=1920,n.height=1080);case 6:A(r,3);break;case 2:W("Failed to check canDisplayType:",I(r));case 3:return r.return(n)}})},i.Wa=function(e){return Gy.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},i.yh=function(){return!1},i.ed=function(){return!0};var Yy="Android",Jy="Fuchsia",Qy="Linux";function Zy(){Gy.call(this);var e=this;this.i=new se(function(){var e=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return e?parseInt(e[2],10):null}),this.g=new se(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new se(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("win32")}),this.u=new se(function(){return!navigator.userAgent.match(/Edge?\//)||!e.h.value()}),this.o=new se(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new se(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase():!!navigator.userAgent.includes("Android")})}function ev(){Gy.apply(this,arguments)}function tv(){Gy.call(this),this.g=new se(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}function nv(){Gy.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}function ov(){Gy.apply(this,arguments)}function iv(){Gy.call(this),this.i=new se(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new se(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new se(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}function rv(){Gy.call(this);var e=this;this.h=function(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(t){t=JSON.parse(t),e.g=t.sj["tv.model.supportHDR"]||t.sj["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({Em:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(n){K("WebOS: getConfigs call failed",n)}}if(Xy()&&(le=function(){return new Ky}),f(Zy,Gy),(i=Zy.prototype).za=function(){return this.i.value()},i.Ob=function(){return this.g.value()},i.Ed=function(e){return!!xi(e)&&"Edge"===this.g.value()&&this.h.value()},i.Gi=function(){return"Edge"===this.g.value()&&this.h.value()},i.cf=function(){return"Edge"===this.g.value()&&this.h.value()},i.Pc=function(){return this.u.value()},i.Wa=function(e){if(Gy.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},i.hh=function(){return"Edge"===this.g.value()||this.o.value()},i.ed=function(){if("GECKO"===this.Ea()){var e=this.za();return null!==e?e>=100:Gy.prototype.ed.call(this)}return Gy.prototype.ed.call(this)},i.Sg=function(e){return"GECKO"===this.Ea()?e.startsWith("com.microsoft.playready.recommendation"):Gy.prototype.Sg.call(this,e)},ue=function(){return new Zy},f(ev,Gy),(i=ev.prototype).za=function(){return null},i.Ob=function(){return"Hisense"},i.Oa=function(){return"TV"},i.cc=function(){return!1},i.jc=function(){var t={width:1920,height:1080},n=null;if(e.Hisense_Get4KSupportState)try{n=e.Hisense_Get4KSupportState()}catch(o){}return null==n&&(n=navigator.userAgent.includes("UHD")),n&&(t.width=3840,t.height=2160),Promise.resolve(t)},i.Wa=function(e){return Gy.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(le=function(){return new ev}),f(tv,Gy),(i=tv.prototype).Ob=function(){return"PlayStation"},i.Oa=function(){return"CONSOLE"},i.Ea=function(){return"WEBKIT"},i.za=function(){return this.g.value()},i.cc=function(){return!1},i.fd=function(){return!1},i.Pc=function(){return!1},i.sh=function(){return 4===this.za()},i.jc=function(){var t,n,o,i;return D(function(r){switch(r.g){case 1:return t={width:1920,height:1080},n=!1,k(r,2),S(r,e.msdk.device.getDisplayInfo(),4);case 4:o=r.h,n="4K"===o.resolution,A(r,3);break;case 2:return I(r),k(r,5),S(r,e.msdk.device.getDisplayInfoImmediate(),7);case 7:i=r.h,n="4K"===i.resolution,A(r,3);break;case 5:K("PlayStation: Failed to get the display info:",I(r));case 3:return n&&(t.width=3840,t.height=2160),r.return(t)}})},i.Wa=function(e){return Gy.prototype.Wa.call(this,e),4===this.za()&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},i.hh=function(){return 4===this.za()},i.Kf=function(){return 4!==this.za()},navigator.userAgent.includes("PlayStation")&&(le=function(){return new tv}),f(nv,Gy),(i=nv.prototype).za=function(){return this.g},i.Ob=function(){return"Tizen"},i.Ea=function(){return"CHROMIUM"},i.Oa=function(){return"TV"},i.Ed=function(){return!0},i.le=function(){return 3===this.za()},i.cc=function(){return!1},i.fd=function(){var e=this.za();return null!==e?e>=4:Gy.prototype.fd.call(this)},i.Pc=function(){return!1},i.pe=function(){return this.g&&this.h?5===this.g?this.h>=5:this.g>5:Gy.prototype.pe.call(this)},i.jc=function(){var t=e.devicePixelRatio;t={width:e.screen.width*t>1920?3840:1920,height:e.screen.height*t>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var n=webapis.systeminfo.getMaxVideoResolution();t.width=n.width,t.height=n.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(t.width=7680,t.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(t.width=3840,t.height=2160)}catch(o){K("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},i.Wa=function(e){return Gy.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=2!==this.za(),3===this.za()&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},i.Ei=function(){var e=[];return null!==this.g&&this.g<5&&e.push("opus"),e},i.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch(t){return Gy.prototype.sd.call(this,e)}return"SDR"},i.si=function(){return!0},i.ti=function(){return 3===this.za()},navigator.userAgent.includes("Tizen")&&(le=function(){return new nv}),f(ov,Gy),ov.prototype.za=function(){return null},ov.prototype.Ob=function(){return"Vizio"},ov.prototype.Oa=function(){return"TV"},ov.prototype.cc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(le=function(){return new ov}),f(iv,Gy),(i=iv.prototype).za=function(){return this.g.value()},i.Ob=function(){return"WebKit STB"},i.Oa=function(){return"TV"},i.Ea=function(){return"WEBKIT"},i.cc=function(){return!1},i.fd=function(){var e=this.g.value();return null===e||e>=15},i.Ed=function(){return this.h.value()},i.jc=function(){return Promise.resolve({width:e.screen.width*e.devicePixelRatio,height:e.screen.height*e.devicePixelRatio})},i.Kf=function(){return!this.i.value()},i.Jf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(le=function(){return new iv}),f(rv,Gy),(i=rv.prototype).za=function(){return this.h},i.Ob=function(){return"WebOS"},i.Oa=function(){return"TV"},i.Ea=function(){return"CHROMIUM"},i.cc=function(){return!1},i.fd=function(){var e=this.za();return null!==e?e>3:Gy.prototype.fd.call(this)},i.Pc=function(){var e=this.za();return null!==e?e>6:Gy.prototype.Pc.call(this)},i.pe=function(){var e=this.za();return null!==e?e>3:Gy.prototype.pe.call(this)},i.jc=function(){var t={width:1920,height:1080};try{var n=JSON.parse(e.PalmSystem.deviceInfo);t.width=Math.max(1920,n.screenWidth),t.height=Math.max(1080,n.screenHeight)}catch(o){K("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},i.Wa=function(e){return Gy.prototype.Wa.call(this,e),3===this.za()&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},i.sd=function(e){return null==this.g?(K("WebOS: getConfigs call haven't finished"),Gy.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"},i.$i=function(){return!1},i.ed=function(){var e=this.za();return null!==e?e>=6:Gy.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var sv=new rv;le=function(){return sv}}function av(){Gy.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}function lv(){var e=null;try{e="undefined"!=typeof Windows?Windows:chrome.webview.hostObjects.sync.Windows}catch(t){}return e}function uv(e,t,n){this.type=e,this.ha=t,this.segments=n||null}function cv(e,t,n,o){this.id=e,this.name=t,this.attributes=n,this.value=void 0===o?null:o}function dv(e,t){return t?e.toString():(t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function pv(e,t){return(e=e.attributes.filter(function(e){return e.name==t})).length?e[0]:null}function hv(e,t,n){return(e=pv(e,t))?e.value:n||null}function fv(e,t){if(!(e=pv(e,t)))throw new je(2,4,4023,t);return e.value}function mv(e,t,n){n=void 0===n?[]:n,this.ha=t,this.g=e,this.vc=n}function gv(e,t){this.name=e,this.value=t}function yv(e,t){return e.filter(function(e){return e.name==t})}function vv(e,t){return e.filter(function(e){return fv(e,"TYPE")==t})}function bv(e,t){for(var n=(e=g(e)).next();!n.done;n=e.next())if((n=n.value).name===t)return n;return null}function xv(e,t,n){return n=void 0===n?0:n,(e=bv(e,t))?Number(e.value):n}function wv(e,t,n){return t?Sv(e,[t],n):[]}function Sv(e,t,n){if(!t.length)return[];var o=t;return n&&n.size&&(o=t.map(function(e){return Tv(e,n)})),ot(e,o)}function Tv(e,t){if(!t||!t.size)return e;var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var o=(n=g(n)).next();!o.done;o=n.next()){var i=(o=o.value).slice(2,o.length-1),r=t.get(i);if(!r)throw new je(2,4,4039,i);e=e.replace(o,r)}return e}function kv(){this.g=0}function Cv(e,t){var n=(t=(t=$e(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new je(2,4,4015);t=0;for(var o=!0,i=g(n),r=i.next();!r.done;r=i.next())if(r=r.value,/^#(?!EXT)/m.test(r)||o)o=!1;else{if(r=Av(e,r),--e.g,Iv.includes(r.name)){t=1;break}"EXT-X-STREAM-INF"==r.name&&(o=!0)}for(i=[],o=!0,r=0;r<n.length;r++){var s=n[r],a=n[r+1];if(/^#(?!EXT)/m.test(s)||o)o=!1;else{if(s=Av(e,s),Ev.includes(s.name)){if(1!=t)throw new je(2,4,4017);s=n.splice(r,n.length-r),n=[],o=[],r=[],a=null;for(var l=(s=g(s)).next();!l.done;l=s.next())l=l.value,/^(#EXT)/.test(l)?(l=Av(e,l),Iv.includes(l.name)?i.push(l):"EXT-X-MAP"==l.name?a=l:"EXT-X-PART"==l.name?r.push(l):"EXT-X-PRELOAD-HINT"==l.name?"PART"==hv(l,"TYPE")?r.push(l):"MAP"==hv(l,"TYPE")&&(l.name="EXT-X-MAP",a=l):o.push(l)):/^#(?!EXT)/m.test(l)||(l=l.trim(),a&&o.push(a),n.push(new mv(l,o,r)),o=[],r=[]);return r.length&&(a&&o.push(a),n.push(new mv("",o,r))),new uv(t,i,n)}i.push(s),"EXT-X-STREAM-INF"==s.name&&(s.attributes.push(new gv("URI",a)),o=!0)}}return new uv(t,i)}function Av(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new je(2,4,4016,t);t=n[1];var o,i=n[2];if(n=[],i){var r;(r=Dt(i=new Lt(i),/^([^,=]+)(?:,|$)/g))&&(o=r[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;r=Dt(i,s);)n.push(new gv(r[1],r[2]||r[3])),Pt(i)}return new cv(e,t,n,o)}f(av,Gy),(i=av.prototype).za=function(){return this.h},i.Ob=function(){return"Xbox"},i.Oa=function(){return"CONSOLE"},i.Ea=function(){return this.g?"EDGE":"CHROMIUM"},i.Ed=function(){return!0},i.cf=function(){return!0},i.Ui=function(){return this.g},i.jc=function(){var e={width:1920,height:1080},t=lv();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,o=t.Media.Protection.ProtectionCapabilityResult;t=null;do{t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(t===o.maybe);t===o.probably&&(e.width=3840,e.height=2160)}catch(i){K("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},i.Wa=function(e){return Gy.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},i.yh=function(){return!1},(navigator.userAgent.includes("Xbox One")||null!==lv())&&(le=function(){return new av}),cv.prototype.toString=function(e){var t="#"+this.name,n=this.attributes?this.attributes.filter(function(t){return!e||!e.has(t.name)}).map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&n.unshift(this.value),n.length>0&&(t+=":"+n.join(",")),t};var Iv="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),Ev="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function Mv(){}function Rv(e,t){try{var n=_v(e);return Li({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(o){return Ri(o)}}function _v(t){var n=t.split(":");if(n.length<2||"data"!=n[0])throw new je(2,1,1004,t);if((n=n.slice(1).join(":").split(",")).length<2)throw new je(2,1,1004,t);var o=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=o.split(";"),o=n[0];var i=!1;return n.length>1&&"base64"==n[n.length-1]&&(i=!0,n.pop()),{data:i?Ze(t):Ge(t),contentType:o}}function Lv(){var t=this;this.g=this.h=null,this.G=1,this.B=new Map,this.M=new Map,this.C=new Map,this.C.set("video",new Map),this.C.set("audio",new Map),this.C.set(ut,new Map),this.C.set("image",new Map),this.uc=(new Map).set("com.apple.streamingkeydelivery",function(n,o,i){return function(t,n,o,i){var r,s,a,l,u;return D(function(c){if(1==c.g){if("video/mp2t"==o)throw new je(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new je(2,4,4041);if(r=fv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(r))return c.return(null);s="cenc","SAMPLE-AES"==r&&(s="cbcs"),a=fv(n,"URI"),l=it("com.apple.fps",s,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],a);var d=new ye(a).Eb.replace(/-/g,"").toLowerCase();return(u=32===d.length&&/^[0-9a-f]+$/.test(d)?d:null)||!i?c.A(2):S(c,wb(t,i),3)}return 2!=c.g&&(u=c.h),u&&l.keyIds.add(u),c.return(l)})}(t,n,o,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(e){var n=fv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var o="cenc";"SAMPLE-AES"==n&&(o="cbcs");var i=fv(e,"URI");n=_v(i.split("?")[0]),i=i.split("?")[0],t.I.has(i)||(n=Ne(n.data),t.I.set(i,n)),o=it("com.widevine.alpha",o,[{initDataType:"cenc",initData:t.I.get(i)}]),(e=hv(e,"KEYID"))&&o.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(o)}else e=Promise.resolve(null);return e}).set("com.microsoft.playready",function(e){var t=fv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),n=it("com.microsoft.playready",n,[{initDataType:"cenc",initData:t=vr(e=Ne((e=_v((e=fv(e,"URI")).split("?")[0])).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]),(e=Ht(["<PLAYREADY>",Qe(e),"</PLAYREADY>"].join("\n")))&&(n.licenseServerUri=qm(e)),n=Promise.resolve(n)}else n=Promise.resolve(null);return n}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(e){var n=fv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var o="cenc";"SAMPLE-AES"==n&&(o="cbcs");var i=fv(e,"URI");n=_v(i.split("?")[0]),i=i.split("?")[0],t.I.has(i)||(n=Ne(n.data),t.I.set(i,n)),o=it("com.huawei.wiseplay",o,[{initDataType:"cenc",initData:t.I.get(i)}]),(e=hv(e,"KEYID"))&&o.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(o)}else e=Promise.resolve(null);return e}),this.ob=new Set,this.i=new Map,this.l=null,this.H="",this.Ta=new kv,this.N=-1,this.ma=1/0,this.ba=this.yc=this.kb=!1,this.F=new To(function(){t.X&&!t.g.continueLoadingWhenPaused&&(t.V.Ma(t.X,"timeupdate"),t.X.paused)?t.V.Aa(t.X,"timeupdate",function(){return mb(t)}):mb(t)}),this.Ga=Mb,this.m=null,this.ib=0,this.o=1/0,this.ab=this.Sa=this.S=0,this.$=new Fi,this.J=new Map,this.K=new Map,this.Da=new Map,this.wa=new Map,this.O=new Map,this.xa=new Map,this.ya=new Map,this.xc=this.oa=!1,this.Zb=new V(5),this.j=null,this.R=!0,this.V=new oe,this.u=this.X=null,this.ac=function(){return!1},this.I=new Map}function Pv(e,t){return gb(e)?e.C.get(t.type):t.lf}function Dv(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,v,b,x,w,C,E,M,R,_,L,P,O,N,U,B,F,j,z,$,V,H;return D(function(D){switch(D.g){case 1:if(t.stream.isAudioMuxedInVideo)return D.return();for(n=[],o=g(t.P()),i=o.next();!i.done;i=o.next())r=i.value,s=new ye(r),a=s.g,t.Qe&&(t.Rb>=0&&a.add("_HLS_msn",String(t.Rb)),t.Sb>=0&&a.add("_HLS_part",String(t.Sb))),t.Re&&a.add("_HLS_skip","YES"),Le(a)&&we(s,Se(a.toString())),n.push(s.toString());return k(D,2),S(D,fb(e,n,!0).promise,4);case 4:l=D.h,A(D,3);break;case 2:throw u=I(D),e.h&&e.h.disableStream(t.stream),u;case 3:if(!t.stream.segmentIndex)return D.return();if(1!=(c=Cv(e.Ta,l.data)).type)throw new je(2,4,4017);return(d=l.uri)==l.originalUri||t.P().includes(d)||t.Af.push(d),p=yv(c.ha,"EXT-X-DEFINE"),h=Fv(e,p,d),f=t.stream,m=Pv(e,t),S(D,eb(e,c,f.mimeType,t.P,h),5);case 5:for(v=D.h,b=v.keyIds,x=v.drmInfos,w=v.encrypted,C=v.Mh,f.encrypted||!w||C||(f.encrypted=!0),function(e,t){return e.size===t.size&&[].concat(y(e)).every(function(e){return t.has(e)})}(f.keyIds,b)||(f.keyIds=b,f.drmInfos=x,e.h.newDrmInfo(f)),E=ub(e,c,m,h,t.P,t.type),M=E.segments,(R=E.bandwidth)&&(f.bandwidth=R),_=Vl(f),L=g(M),P=L.next();!P.done;P=L.next())(O=P.value).aa&&(O.aa.xd=_);f.segmentIndex.ee(M,e.l.Ib()),M.length&&(N=xv(c.ha,"EXT-X-MEDIA-SEQUENCE",0),B=(U=bv(c.ha,"EXT-X-SKIP"))?Number(hv(U,"SKIPPED-SEGMENTS")):0,F=Qv(N,M),j=F.Rb,z=F.Sb,t.Rb=j+B,t.Sb=z,$=m.get(N),f.segmentIndex.Ya($)),(V=Pl(f.segmentIndex))&&(t.Wc=V.startTime,H=M[M.length-1],t.qc=H.endTime),bv(c.ha,"EXT-X-ENDLIST")&&(t.Wd=!0),ob(e,c),lb(e,c.ha,f.type,h,t.P),T(D)}})}function Ov(e,t,n){n=void 0!==n&&n;for(var o=-1==e.N,i=g(t),r=i.next();!r.done;r=i.next()){var s=(r=r.value).stream.segmentIndex,a=Pv(e,r);if(s=Pl(s))for(var l=(a=g(a)).next();!l.done;l=a.next()){var u=(l=g(l.value)).next().value;if(l.next().value==s.startTime){o&&(e.N=Math.max(e.N,u)),r.og=u;break}}}if(!(e.N<0))for(o=(t=g(t)).next();!o.done;o=t.next())(Yv(e,(o=o.value).type)||n)&&(i=o.stream.segmentIndex)&&(r=e.N-o.og)>0&&(i.g.splice(0,r),i=Pl(i))&&(i=-i.startTime,o.stream.segmentIndex.offset(i),Nv(e,o,i))}function Nv(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.qc+=n;for(var o=g(e=Pv(e,t)),i=o.next();!i.done;i=o.next()){var r=g(i.value);i=r.next().value,r=r.next().value,e.set(i,r+n)}t.P()}}function Uv(e,t,n){var o,i,r,s,a;return D(function(l){switch(l.g){case 1:return t?(o=Xi,i=au(t.P(),t.Jc(),t.Gc(),e.g.retryParameters),S(l,vb(e,i,o,{type:t instanceof $s?1:0}).promise,2)):l.return({mimeType:null,data:null});case 2:if(r=l.h,s=r.data,!t.aesKey){l.A(3);break}return S(l,su(s,t.aesKey,n),4);case 4:s=l.h;case 3:return t instanceof $s?t.me(s,!0):t.me(s),(a=r.headers["content-type"])&&(a=a.split(";")[0].toLowerCase()),l.return({mimeType:a,data:s})}})}function Bv(e){if(gb(e)){if(e.Ga==_b){for(var t=1/0,n=1/0,o=g(e.i.values()),i=o.next();!i.done;i=o.next())(i=i.value).stream.segmentIndex&&"text"!=i.stream.type&&!i.stream.isAudioMuxedInVideo&&(t=Math.min(t,i.qc),n=Math.min(n,i.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Hf(t)}}else e.l.rb(Wv(e));if(!e.l.o)for(n=(t=g(e.i.values())).next();!n.done;n=t.next())!(n=n.value).stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=Pl(n.stream.segmentIndex))&&n.h&&e.l.ph(n.h);e.l.kf()}function Fv(e,t,n){n=new ye(n).g;for(var o=new Map,i=(t=g(t)).next();!i.done;i=t.next()){var r=i.value,s=hv(r,"NAME"),a=hv(r,"VALUE");i=hv(r,"QUERYPARAM"),r=hv(r,"IMPORT"),s&&a&&(o.has(s)||o.set(s,a)),i&&(s=n.get(i)[0])&&!o.has(s)&&o.set(i,s),r&&(i=e.B.get(r))&&o.set(r,i)}return o}function jv(e){var t=new Set([oo(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Gb(function(n){n.mimeType&&t.add(oo(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function zv(e,t,n){for(var o={audio:[],video:[]},i=new Map,r=[],s=!1,a=!1,l=g(t),u=l.next();!u.done;u=l.next()){var c=u.value;u=hv(c,"AUDIO");var d=hv(c,"VIDEO"),p=u||d;p&&(r.includes(p)||r.push(p),(c=hv(c,"PATHWAY-ID"))&&i.set(p,c),u?s=!0:d&&(a=!0))}r.length&&n.length&&function(e,t,n){t=t.filter(function(e){var t=hv(e,"URI")||"";return"SUBTITLES"!=(e=hv(e,"TYPE"))&&(""!=t||"AUDIO"==e)});for(var o={},i=(t=g(t)).next();!i.done;i=t.next()){var r=dv(i=i.value,!e.j);o[r]?o[r].push(i):o[r]=[i]}for(var s in o)Hv(e,o[s],n,!1)}(e,n=n.filter(function(e){return r.includes(fv(e,"GROUP-ID"))}),i),n=(i=r.sort().join(","))&&e.M.has(i)?e.M.get(i):[],s?o.audio.push.apply(o.audio,y(n)):a&&o.video.push.apply(o.video,y(n)),a=!1;var h=t.map(function(e){return fv(e,"URI")});return s=o.audio.find(function(e){return e&&e.P().find(function(e){return h.includes(e)})}),l=at("video",n=$v(e,t[0])),(u=at("audio",n))&&!l?(s="audio",a=o.audio.length>0&&!o.audio.some(function(e){return e.stream.isAudioMuxedInVideo})):!o.audio.length&&!o.video.length&&u&&l?(s="video",n=[[l,u].join()]):o.audio.length&&s?(s="audio",a=!0):s=o.video.length&&!o.audio.length?"audio":"video",a||(t=function(e,t,n,o){for(var i=e.G++,r=[],s=g(t),a=s.next();!a.done;a=s.next()){var l=a.value;a=fv(l,"URI"),l=hv(l,"PATHWAY-ID"),e.j&&l&&_g(e.j,i,l,a),r.push(a)}if(s=r.sort().join(",")+n.sort().join(","),e.i.has(s))return e.i.get(s);a=r.join(",");e:{if(t=hv(t[0],"CLOSED-CAPTIONS"),"video"==o){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if("NONE"!=t){t=e.J.get(t);break e}e.R=!1}else if(!t&&e.J.size)for(t=(t=g(e.J.keys())).next();!t.done;t=t.next()){t=e.J.get(t.value);break e}}t=null}return n=st(o,n),o=qv(e,i,r,n,o,null,!1,a,null,t,null,!1,null,!1),e.i.set(s,o),o}(e,t,n,s),i&&e.g.enableAudioGroups&&(t.stream.groupId=i),"audio"==t.stream.type&&"audio"===s&&o.audio.some(function(e){return e.stream.isAudioMuxedInVideo})&&(e=o.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),o[t.stream.type]=[t]),o}function $v(e,t){return t=hv(t,"CODECS")||"",e.ba=t.length>0,e.ba||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),ru(t.split(/\s*,\s*/))}function Vv(e,t,n,o,i,r,s,a,l,u,c,d){for(var p=g(n),h=p.next();!h.done;h=p.next())hb(h.value.stream,i,r,s,a,l,null);for(i=e.g.disableVideo,n.length&&!i||(n=[null]),i&&(t=t.filter(function(e){return!e.stream.isAudioMuxedInVideo})),i=e.g.disableAudio,t.length&&!i||(t=[null]),i=[],r=(t=g(t)).next();!r.done;r=t.next())for(r=r.value,a=(s=g(n)).next();!a.done;a=s.next()){var f=a.value;(a=r?r.stream:null)&&(a.drmInfos=u,a.keyIds=c),(l=f?f.stream:null)&&(l.drmInfos=u,l.keyIds=c,e.g.disableIFrames||si(l,d)),l&&!a&&(l.bandwidth=o),!l&&a&&(a.bandwidth=o),p=r?r.stream.drmInfos:null,h=f?f.stream.drmInfos:null,f=f?f.P().sort().join(","):"";var m=r?r.P().sort().join(","):"",y=[];a&&a.codecs&&y.push(a.codecs),l&&l.codecs&&y.push(l.codecs),f=[f,m,y.sort()].join("-"),a&&l&&!vi(p,h)||e.ob.has(f)||(a={id:e.G++,language:a?a.language:"und",disabledUntilTime:0,primary:!!a&&a.primary||!!l&&l.primary,audio:a,video:l,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.push(a),e.ob.add(f))}return i}function Hv(e,t,n,o){o=void 0===o||o;for(var i=[],r=[],s=new Map,a=g(t),l=a.next(),u={};!l.done;u={ii:void 0},l=a.next())l=l.value,u.ii=++e.G,u=function(e){return function(){return"shaka://hls-muxed"+e.ii}}(u),u=o?fv(l,"URI"):hv(l,"URI")||u(),l=fv(l,"GROUP-ID"),i.push(u),r.push(l),s.set(l,u);if(o=r.sort().join(","),l=t[0],t="",a=function(e){return"subtitles"==(e=fv(e,"TYPE").toLowerCase())&&(e=ut),e}(l),a==ut)t=hv(l,"CODECS")||"";else for(u=(r=g(r)).next();!u.done;u=r.next())if(u=u.value,e.K.has(u)){t=e.K.get(u);break}if(r=i.sort().join(","),e.i.has(r))return e.i.get(r);if(u=e.G++,e.j)for(var c=(s=g(s)).next();!c.done;c=s.next()){var d=g(c.value);c=d.next().value,d=d.next().value,(c=n.get(c))&&_g(e.j,u,c,d)}n=hv(l,"LANGUAGE"),s=hv(l,"NAME"),c="YES"==hv(l,"DEFAULT"),d="audio"==a?function(e){return(e=hv(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}(l):null;var p="audio"==a&&function(e){return!!(e=hv(e,"CHANNELS"))&&2==(e=e.split("/")).length&&("JOC"===e[1]||e[1].includes("ATMOS"))}(l),h=hv(l,"CHARACTERISTICS"),f="YES"==hv(l,"FORCED");return l="audio"==a?function(e){return(e=hv(e,"SAMPLE-RATE"))?parseInt(e,10):null}(l):null,(i=qv(e,u,i,t,a,n,c,s,d,null,h,f,l,p)).stream&&e.g.enableAudioGroups&&(i.stream.groupId=o),e.M.has(o)?e.M.get(o).push(i):e.M.set(o,[i]),e.i.set(r,i),i}function Gv(e,t){var n="video",o=fv(t,"URI"),i=hv(t,"CODECS")||"";if("mjpg"==i&&(n="image"),e.i.has(o))return e.i.get(o);var r=hv(t,"LANGUAGE"),s=hv(t,"NAME"),a=hv(t,"CHARACTERISTICS");return n=qv(e,e.G++,[o],i,n,r,!1,s,null,null,a,!1,null,!1),r=g((i=hv(t,"RESOLUTION"))?i.split("x"):[null,null]),i=r.next().value,r=r.next().value,n.stream.width=Number(i)||void 0,n.stream.height=Number(r)||void 0,(t=hv(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(o,n),n}function qv(e,t,n,o,i,r,s,a,l,u,c,d,p,h){function f(t){var n,f,v,x,w,C,E,M,R,_,L,P,O,N,U,B,F,j;return D(function(D){switch(D.g){case 1:return n=ct,k(D,2),S(D,t.promise,4);case 4:if(f=D.h,t.aborted)return D.return();if((v=f.uri)!=f.originalUri&&(b.P().includes(v)||b.Af.push(v)),1!=(x=Cv(e.Ta,f.data)).type)throw new je(2,4,4017);return w=yv(x.ha,"EXT-X-DEFINE"),C=Fv(e,w,v),E=!1,(!e.ba&&e.g.hls.disableCodecGuessing||e.R&&i==n.Ca&&!e.g.hls.disableClosedCaptionsDetection)&&x.segments.length>0&&(e.R=!1,E=!0),M=!e.ba&&e.g.hls.disableCodecGuessing,R=gb(e),S(D,Jv(e,0,C,x,m,o,i,r,s,a,l,u,c,d,p,h,void 0,E,M),5);case 5:if(_=D.h,t.aborted)return D.return();L=_.stream,nb(e,x),gb(e)&&!R&&ib(e,x),b.Wc=_.Wc,b.qc=_.qc,b.Re=_.Re,b.Qe=_.Qe,b.Wd=_.Wd,b.lf=_.lf,b.Rb=_.Rb,b.Sb=_.Sb,y.segmentIndex=L.segmentIndex,y.encrypted=L.encrypted,y.drmInfos=L.drmInfos,y.keyIds=L.keyIds,y.mimeType=L.mimeType,y.bandwidth=y.bandwidth||L.bandwidth,y.codecs=y.codecs||L.codecs,y.closedCaptions=y.closedCaptions||L.closedCaptions,y.width=y.width||L.width,y.height=y.height||L.height,y.hdr=y.hdr||L.hdr,y.colorGamut=y.colorGamut||L.colorGamut,y.frameRate=y.frameRate||L.frameRate,"und"==y.language&&"und"!=L.language&&(y.language=L.language),y.language=y.language||L.language,y.channelsCount=y.channelsCount||L.channelsCount,y.audioSamplingRate=y.audioSamplingRate||L.audioSamplingRate,jv(y),y.drmInfos.length&&e.h.newDrmInfo(y),P=!1,(!u&&y.closedCaptions||u&&y.closedCaptions&&u.size!=y.closedCaptions.size)&&(P=!0),e.m&&P&&e.h.makeTextStreamsForClosedCaptions(e.m),i==n.Na&&(O=Pl(L.segmentIndex))&&O.aa&&(y.mimeType="application/mp4",jv(y)),N=Vl(y),y.segmentIndex.Gb(function(e){e.aa&&(e.aa.xd=N)}),function(e){if(!e.m)return!1;for(var t=[],n=[],o=(e=g(e.m.variants)).next();!o.done;o=e.next())(o=o.value).video&&t.push(o.video),o.audio&&n.push(o.audio);return!(t.length>0&&!t.some(function(e){return e.segmentIndex})||n.length>0&&!n.some(function(e){return e.segmentIndex}))}(e)&&(e.yc?Xv(e,[b]):(e.yc=!0,U=Array.from(e.i.values()),B=U.filter(function(e){return e.stream.segmentIndex}),Xv(e,B),Bv(e),(F=e.o)>0&&e.F.ka(F))),lb(e,x.ha,y.type,C,m),e.m&&(e.m.startTime=e.u),A(D,0);break;case 2:if(j=I(D),y.closeSegmentIndex(),7001===j.code)return D.return();if(!e.h.disableStream(y))throw j;T(D)}})}function m(){return e.j&&n.length>1?Lg(e.j,t):b.Af.concat(Sv([e.H],n,e.B))}var y=Zv(e,o,i,r,s,a,l,u,c,d,p,h);n.some(function(e){return e.startsWith("shaka://hls-muxed")})&&(y.isAudioMuxedInVideo=!0,y.mimeType="video/mp2t",jv(y));var v,b={stream:y,type:i,Af:[],Wc:0,qc:0,lf:new Map,Re:!1,Qe:!1,Wd:!1,og:-1,Rb:-1,Sb:-1,P:m},x=null;return y.createSegmentIndex=function(){return x||(y.isAudioMuxedInVideo?(y.segmentIndex=new Ll([]),Promise.resolve()):(v=fb(e,b.P(),!0),x=new Promise(function(e){e(f(v))})))},y.closeSegmentIndex=function(){x&&!y.segmentIndex&&v.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),x=null},b}function Wv(e){for(var t=1/0,n=(e=g(e.i.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.qc));return t}function Kv(e,t){for(var n=[],o=(t=g(t)).next();!o.done;o=t.next())(o=o.value).segmentIndex&&o.segmentIndex.Gb(function(e){n.push(e)});e.l.ge(n)}function Xv(e,t){if(!gb(e))for(var n=Wv(e),o=g(t),i=o.next();!i.done;i=o.next())i.value.stream.segmentIndex.pd(0,n);Kv(e,t.map(function(e){return e.stream})),n=(o=Array.from(e.i.values()).filter(function(e){return e.stream.segmentIndex})).some(function(e){return"audio"==e.stream.type}),i=o.some(function(e){return"video"==e.stream.type}),o=gb(e)&&!e.kb,n=!gb(e)&&e.kb&&!(n&&i),e.g.hls.ignoreManifestProgramDateTime||o||n?Ov(e,t,o):(function(e,t){if(e.ma==1/0)for(var n=(t=g(t)).next();!n.done;n=t.next())null!=(n=Pl(n.value.stream.segmentIndex))&&null!=n.h&&(e.ma=Math.min(e.ma,n.h));if((t=e.ma)!=1/0)for(var o=(n=g(e.i.values())).next();!o.done;o=n.next())if(!Yv(e,(o=o.value).type)){var i=o.stream.segmentIndex;if(null!=i){var r=Pl(i);if(r)if(null==r.h)W("Missing EXT-X-PROGRAM-DATE-TIME for stream",o.P(),"Expect AV sync issues!");else for(Nv(e,o,r.h-t-r.startTime),i=(o=g(i)).next();!i.done;i=o.next())i.value.Ah(t)}}}(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&Ov(e,t))}function Yv(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function Jv(e,t,n,o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b){var x,w,T,C,E,M,R,_,L,P,O,N,U,B,F,j,z,$,V,H,G,q,W,K,X,Y,J,Q,Z;return v=void 0===v||v,b=void 0===b||b,D(function(t){switch(t.g){case 1:if(x=o.segments||[],w=x.every(function(e){return!!bv(e.ha,"EXT-X-GAP")}),!x.length||w)throw new je(2,4,4053);if(function(e,t){var n=bv(t.ha,"EXT-X-PLAYLIST-TYPE");t=bv(t.ha,"EXT-X-ENDLIST"),t=n&&"VOD"==n.value||t,n=n&&"EVENT"==n.value&&!t,n=!t&&!n,yb(e,t?Mb:n?_b:Rb)}(e,o),gb(e)&&ob(e,o),T=gb(e)?e.C.get(s):new Map,C=ub(e,o,T,n,i,s),E=C.segments,M=C.bandwidth,O=P=L=_=R=null,!(E.length>0&&v)){t.A(2);break}return S(t,function(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x;return D(function(w){if(1==w.g)return n=ou(e.g.hls.mediaPlaylistFullMimeType),t.length?(o=pb(e,t),i=o.segment,r=o.segmentIndex,s=i.P(),a=s[0],l=new ye(a),u=l.qb.split(".").pop(),(c=Sb.get(u))?w.return(ou(c)):S(w,Promise.all([Uv(e,i.aa,0),Uv(e,i,r)]),2)):w.return(n);if(d=w.h,p=d[1].mimeType,h=d[0].data,f=d[1].data,m="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),y=["audio/mp4","video/mp4","video/iso.segment"],!(v=i.aa||y.includes(p))&&Ma(Ne(f))){var T=f,k=e.g.disableAudio,C=e.g.disableVideo,A=e.g.disableText,I=Ne(T),E=(new Ca).parse(I),M=E.Td();I=E.Kg();var R=[],_=!1,L=!1;if(!k)switch(M.audio){case"aac":case"aac-loas":E.xb().length&&(R.push("mp4a.40.2"),_=!0);break;case"mp3":E.xb().length&&(R.push("mp4a.40.34"),_=!0);break;case"ac3":E.xb().length&&(R.push("ac-3"),_=!0);break;case"ec3":E.xb().length&&(R.push("ec-3"),_=!0);break;case"opus":E.xb().length&&(R.push("opus"),_=!0)}if(!C)switch(M.video){case"avc":I.codec?R.push(I.codec):R.push("avc1.42E01E"),L=!0;break;case"hvc":I.codec?R.push(I.codec):R.push("hvc1.1.6.L93.90"),L=!0;break;case"av1":R.push("av01.0.01M.08"),L=!0}if(R.length){if(k=_&&!L,C=new Map,L&&!A){for((A=new kt("video/mp2t")).xf(T),L=(T=g(A.Vf())).next();!L.done;L=T.next())L=L.value,C.set(L,L);A.Ld()}I={type:k?"audio":"video",mimeType:"video/mp2t",codecs:R.join(", "),language:null,height:I.height,width:I.width,channelCount:null,sampleRate:null,closedCaptions:C,ue:null,colorGamut:null,frameRate:I.frameRate}}else I=null;if(b=I)return w.return(b)}else if((v||m.includes(u))&&(x=iu(h,f,e.g.disableText)))return w.return(x);return p?w.return(ou(p)):w.return(n)})}(e,E),3);case 3:N=t.h,s!=N.type&&gb(e)&&(e.C.set(N.type,e.C.get(s)),e.C.set(s,new Map)),s=N.type,a=N.language,c=N.channelCount,f=N.sampleRate,e.g.disableText||(d=N.closedCaptions),_=N.height,R=N.width,L=N.ue,P=N.colorGamut,O=N.frameRate,b&&(y=N.mimeType,r=N.codecs);case 2:if(y){t.A(4);break}return S(t,function(e,t,n,o){var i,r,s,a,l,u,c,d,p,h,f,m,g;return D(function(y){switch(y.g){case 1:return i=Xi,r=pb(e,o),2==(s=r.segment).status?y.return(db(t)):(a=s.P(),l=new ye(a[0]),u=l.qb.split(".").pop(),c=Ib.get(t),(d=c.get(u))||(d=Sb.get(u))||(d=cb(t,n))?y.return(d):(h=1,f=Hi(a,e.g.retryParameters),k(y,2),f.method="HEAD",S(y,vb(e,f,i,{type:h}).promise,4)));case 4:m=y.h,p=m.headers["content-type"],A(y,3);break;case 2:if(!(g=I(y))||1002!=g.code&&1001!=g.code){y.A(3);break}return f.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(f.headers.Range="bytes=0-0"),S(y,vb(e,f,i,{type:h}).promise,6);case 6:m=y.h,p=m.headers["content-type"];case 3:if(!p){y.A(7);break}if("application/octet-stream"!=(d=p.toLowerCase().split(";")[0])){y.A(8);break}if(m.data.byteLength){y.A(9);break}return f.method="GET",S(y,vb(e,f,i,{type:h}).promise,10);case 10:m=y.h;case 9:Ma(Ne(m.data))&&(d="video/mp2t");case 8:if("application/octet-stream"!=d)return y.return(d);case 7:return y.return(db(t))}})}(e,s,r,E),5);case 5:y=t.h,s!=ut||r||"application/mp4"!=y||!E[0]||E[0].aa||(y="text/vtt");case 4:return S(t,eb(e,o,y,i,n),6);case 6:if(U=t.h,B=U.drmInfos,F=U.keyIds,j=U.encrypted,z=U.Mh,j&&!B.length&&!z)throw new je(2,4,4026);return($=Zv(e,r,s,a,l,u,c,d,p,h,f,m)).encrypted=j&&!z,$.drmInfos=B,$.keyIds=F,$.mimeType=y,M&&($.bandwidth=M),jv($),"video"==s&&(R||_||L||P)&&hb($,R,_,O,L,null,P),gb(e)&&ob(e,o),V=E[0].startTime,H=E[E.length-1],G=H.endTime,q=new Ll(E),$.segmentIndex=q,K=!!(W=bv(o.ha,"EXT-X-SERVER-CONTROL"))&&null!=pv(W,"CAN-SKIP-UNTIL"),X=!!W&&null!=pv(W,"CAN-BLOCK-RELOAD"),Y=xv(o.ha,"EXT-X-MEDIA-SEQUENCE",0),J=Qv(Y,E),Q=J.Rb,Z=J.Sb,t.return({stream:$,type:s,Af:[],P:i,Wc:V,qc:G,Re:K,Qe:X,Wd:!1,og:-1,Rb:Q,Sb:Z,lf:T})}})}function Qv(e,t){e=e+t.length-1;var n=-1;if(!t.length)return{Rb:++e,Sb:n};var o=(t=t[t.length-1]).g;return t.g.length?(n=o.length-1,o[o.length-1].isPreload()||(e++,n=0),{Rb:e,Sb:n}):(e++,t.m&&(n=0),{Rb:e,Sb:n})}function Zv(e,t,n,o,i,r,s,a,l,u,c,d){var p=cb(n,t)||db(n),h=[];if(l)for(var f=(l=g(l.split(","))).next();!f.done;f=l.next())h.push(f.value);return l=void 0,f=null,n==ut?l=h.includes("public.accessibility.transcribes-spoken-dialog")&&h.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":h.includes("public.accessibility.describes-video")&&(f="visually impaired"),h.length||"subtitle"!==l||h.push("subtitle"),jv(e={id:e.G++,originalId:r,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:p,codecs:t,kind:n==ut?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Lo(o||"und"),originalLanguage:o,label:r,type:n,primary:i,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:h,forced:u,channelsCount:s,audioSamplingRate:c,spatialAudio:d,closedCaptions:a,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:f,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}),e}function eb(e,t,n,o,i){var r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w,T,k,C,A,I,E,M,R,_,L,P,O,N;return D(function(D){switch(D.g){case 1:if(r=new Map,!e.g.ignoreDrmInfo&&t.segments)for(s=g(t.segments),a=s.next();!a.done;a=s.next())if(l=a.value,u=yv(l.ha,"EXT-X-KEY"),c=null,u.length)for(c=rb(e,t,l.ha,o,i),d=g(u),p=d.next();!p.done;p=d.next())h=p.value,r.set(h,c);m=f=!1,y=[],v=new Set,b=g(r),x=b.next();case 2:if(x.done){D.A(4);break}if(w=x.value,T=g(w),k=T.next().value,C=T.next().value,I=C,"NONE"==(E=fv(A=k,"METHOD"))){D.A(3);break}if(f=!0,M=hv(A,"KEYFORMAT")||"identity",R=null,bb(E)){m=!0,D.A(3);break}if("identity"==M)return S(D,xb(e,A,n,o,I,i),11);if(!(_=e.uc.get(M))){L=null,D.A(9);break}return S(D,_(A,n,I),10);case 10:L=D.h;case 9:R=L,D.A(6);break;case 11:R=D.h;case 6:if(R){if(R.keyIds)for(P=g(R.keyIds),O=P.next();!O.done;O=P.next())N=O.value,v.add(N);y.push(R)}case 3:x=b.next(),D.A(2);break;case 4:return D.return({drmInfos:y,keyIds:v,encrypted:f,Mh:m})}})}function tb(t,n,o,i,r){if(!e.crypto||!e.crypto.subtle)throw K("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new je(2,4,4042);var s=0,a=hv(n,"IV","");if(a){var l=et(a.substr(2));if(16!=l.byteLength)throw new je(2,4,4048)}else s=xv(o.ha,"EXT-X-MEDIA-SEQUENCE",0);var u=wv(i(),fv(n,"URI"),r),c=u.sort().join("");if(o=n.toString()+"-"+s+"-"+c,!t.wa.has(o)){var d={bitsKey:128,blockCipherMode:"CBC",iv:l,firstMediaSequenceNumber:s};switch(fv(n,"METHOD")){case"AES-256":d.bitsKey=256;break;case"AES-256-CTR":d.bitsKey=256,d.blockCipherMode="CTR"}d.fetchKey=function(){var n,o,i,r;return D(function(s){if(1==s.g)return t.O.has(c)||(n=Hi(u,t.g.retryParameters),o=vb(t,n,6).promise,t.O.set(c,o)),S(s,t.O.get(c),2);if(3!=s.g){if(!(i=s.h).data||i.data.byteLength!=d.bitsKey/8)throw new je(2,4,4049);return r={name:"CTR"==d.blockCipherMode?"AES-CTR":"AES-CBC",length:d.bitsKey},S(s,e.crypto.subtle.importKey("raw",i.data,r,!0,["decrypt"]),3)}d.cryptoKey=s.h,d.fetchKey=void 0,T(s)})},t.wa.set(o,d)}return t.wa.get(o)}function nb(e,t){null==e.u&&(t=bv(t.ha,"EXT-X-START"))&&(e.u=Number(fv(t,"TIME-OFFSET")))}function ob(e,t){var n=1/0,o=t.segments;if(o.length)for(var i=o.length-1;i>=0;){var r=bv(o[i].ha,"EXTINF");if(r){n=Number(r.value.split(",")[0]);break}i--}if(!(o=bv(t.ha,"EXT-X-TARGETDURATION")))throw new je(2,4,4024,"EXT-X-TARGETDURATION");o=Number(o.value),(i=bv(t.ha,"EXT-X-PART-INF"))&&(e.S=Number(fv(i,"PART-TARGET"))),t=bv(t.ha,"EXT-X-SERVER-CONTROL"),e.oa&&e.S?(e.o=e.xc?5*e.S<=n?Math.min(e.S,e.o):Math.min(n,e.o):Math.min(e.S,e.o),e.ab=t?Number(fv(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?pv(t,"HOLD-BACK"):null,e.Sa=n?Number(n.value):0),e.ib=Math.max(o,e.ib)}function ib(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.ab)n=e.ab;else if(e.Sa)n=e.Sa;else for(var o=t.segments.length,i=o-Math.min(o,e.g.hls.liveSegmentsDelay);i<o;i++){var r=bv(t.segments[i].ha,"EXTINF");n=r?n+Number(r.value.split(",")[0]):n+e.ib}e.u&&e.u<0&&(n=Math.min(-e.u,n),e.u+=n),e.l.Qi(0),e.l.oh(n),e.l.cd(!1)}function rb(e,t,n,o,i){var r=bv(n,"EXT-X-MAP");if(!r)return null;var s=fv(r,"URI"),a=wv(o(),s,i);if(s=[a.toString(),hv(r,"BYTERANGE","")].join("-"),!e.Da.has(s)){for(var l=void 0,u=null,c=!1,d=(n=g(n)).next();!d.done;d=n.next())"EXT-X-KEY"==(d=d.value).name?bb(c=fv(d,"METHOD"))&&d.id<r.id?(c=!1,l=tb(e,d,t,o,i)):c="NONE"!=c:"EXT-X-BYTERANGE"==d.name&&d.id<r.id&&(u=d);t=function(e,t,n,o,i){var r=0,s=null;return!(t=hv(t,"BYTERANGE"))&&n&&(t=n.value),t&&(r=t.split("@"),s=Number(r[0]),r=Number(r[1]),s=r+s-1,o&&((n=s+1-r)%16&&(s+=16-n%16))),new js(function(){return e},r,s,null,null,null,o,i)}(a,r,u,l,c),e.Da.set(s,t)}return e.Da.get(s)}function sb(t,n,o,i,r,s,a,l,u){function c(e){e=new ye(e).qb.split(".").pop();var t=Ib.get(a).get(e);return t||(t=Sb.get(e)),t}var d=i.ha,p=bv(d,"EXTINF"),h=0,f=0,m=null;i.vc.length&&(t.m.isLowLatency=!0);var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var v=bv(d,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=rn(v.value),t.kb=!0)}var b=Hs;if(bv(d,"EXT-X-GAP")&&(t.m.gapCount++,b=2),!p){if(0==i.vc.length)throw new je(2,4,4024,"EXTINF");if(!t.oa)return null}var x=[];v=!1;var w=null,S=!1,T=!1;if(t.oa&&i.vc.length){h=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var k=y,C={},A=0;A<i.vc.length;C={Qf:void 0,wf:void 0},A++){var I=i.vc[A],E=0==A?o:x[x.length-1],M=0==A?r:E.endTime,R=Number(hv(I,"DURATION"))||t.S;if(R){var _=M+R,L=0,P=null;if("EXT-X-PRELOAD-HINT"==I.name?(L=(L=hv(I,"BYTERANGE-START"))?Number(L):0,(E=hv(I,"BYTERANGE-LENGTH"))?P=L+Number(E)-1:L&&(P=Number.MAX_SAFE_INTEGER)):(L=(P=g(ab(E,L=hv(I,"BYTERANGE")))).next().value,P=P.next().value),C.wf=hv(I,"URI"),C.wf){E=Hs,"YES"==hv(I,"GAP")&&(t.m.gapCount++,E=2,S=!0),C.Qf=null;var D=function(e){return function(){return null==e.Qf&&(e.Qf=wv(l(),e.wf,s)),e.Qf}}(C);h&&L>=0&&null!=P&&(w=D,v=!0),M=new $s(M,_,D,L,P,n,0,0,1/0,[],"",null,k,E,u),"EXT-X-PRELOAD-HINT"==I.name&&(M.Rg(),T=!0),"YES"!=hv(I,"INDEPENDENT")&&A>0&&M.wd(),(C=c(C.wf))&&(M.mimeType=C,Eb.has(C)&&(M.aa=null)),x.push(M),k&&(k+=R)}}}}if(p){if(0==(p=Number(p.value.split(",")[0])))return null;h=r+p}else{if(!x.length)return null;h=x[x.length-1].endTime}v&&(S||0!=x[0].startByte?(v=!1,w=null):x=[]),(p=bv(d,"EXT-X-BYTERANGE"))?(f=(m=g(ab(o,p.value))).next().value,m=m.next().value):x.length&&(f=x[0].startByte,m=x[x.length-1].endByte),o="",p=null,"image"==a&&(o="1x1",d=bv(d,"EXT-X-TILES"))&&(o=fv(d,"LAYOUT"),(d=hv(d,"DURATION"))&&(p=Number(d)));var O=null;return n=new $s(r,h,function(){return w?w():(null==O&&(O=wv(l(),i.g,s)),O||[])},f,m,n,0,0,1/0,x,o,p,y,b,u,x.length>0&&!!i.g),(r=c(i.g))&&(n.mimeType=r,Eb.has(r)&&(n.aa=null)),v&&(t.xc=!0,n.oi(),T&&n.Rg()),n}function ab(e,t){var n=0,o=null;return t&&(n=t.split("@"),t=Number(n[0]),o=(n=n[1]?Number(n[1]):e.endByte+1)+t-1),[n,o]}function lb(e,t,n,o,i){if("video"==n||"audio"==n){var r=e.l.m;if(r&&!Yv(e,n))for(t=(t=yv(t,"EXT-X-DATERANGE")).filter(function(e){return null!=pv(e,"START-DATE")}).sort(function(e,t){return(e=fv(e,"START-DATE"))<(t=fv(t,"START-DATE"))?-1:e>t?1:0}),n=0;n<t.length;n++){var s=t[n];try{var a=rn(fv(s,"START-DATE"));if(!isNaN(a)){var l=Math.max(0,a-r),u=null,c=hv(s,"END-DATE");if(c){var d=rn(c);if(!isNaN(d)&&(u=d-r)<0)continue}if(null==u){var p=hv(s,"DURATION")||hv(s,"PLANNED-DURATION");if(p){var h=parseFloat(p);if(isNaN(h)||(u=l+h),a-r+h<0)continue}}var f=hv(s,"CLASS")||"com.apple.quicktime.HLS",m="YES"==hv(s,"END-ON-NEXT");if(null==u&&m){for(var y=n+1;y<t.length;y++)if(f==(hv(t[y],"CLASS")||"com.apple.quicktime.HLS")){var v=rn(fv(t[y],"START-DATE"));if(!isNaN(v)&&v&&v>a){u=Math.max(0,v-r);break}}if(null==u)continue}y=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var b=[],x=g(s.attributes),w=x.next();!w.done;w=x.next()){var S=w.value;if(!y.includes(S.name)){var T=Tv(S.value,o);"X-ASSET-URI"!=S.name&&"X-ASSET-LIST"!=S.name||(T=wv(i(),S.value,o)[0]),b.push({key:S.name,description:"",data:T,mimeType:null,pictureType:null})}}b.length>1&&e.h.onMetadata(f,l,u,b)}}catch(k){}}}}function ub(e,t,n,o,i,r){var s=t.segments,a=void 0,l=xv(t.ha,"EXT-X-DISCONTINUITY-SEQUENCE",-1),u=xv(t.ha,"EXT-X-MEDIA-SEQUENCE",0),c=bv(t.ha,"EXT-X-SKIP"),d=c?Number(hv(c,"SKIPPED-SEGMENTS")):0,p=u+d,h=0;gb(e)&&n.has(p)&&(h=n.get(p)),0===h&&e.Ga==_b&&n.size>0&&!n.has(p)&&null!=e.l.i&&(h=e.l.Ib());var f=[],m=null;c=[];for(var y=0;y<s.length;y++){var v=s[y],b=0==y?h:m.endTime;p=u+d+y,bv(v.ha,"EXT-X-DISCONTINUITY")&&(l++,m&&m.aa&&(m.aa.g=b));for(var x=g(v.ha),w=x.next();!w.done;w=x.next())"EXT-X-KEY"==(w=w.value).name&&(a=bb(fv(w,"METHOD"))?tb(e,w,t,i,o):void 0);n.set(p,b),(b=sb(e,x=rb(e,t,v.ha,i,o),m,v,b,o,r,i,a))&&((m=xv(v.ha,"EXT-X-BITRATE"))?c.push({bitrate:m,duration:b.endTime-b.startTime}):c.length&&((m=c.pop()).duration+=b.endTime-b.startTime,c.push(m)),m=b,b.i=l,Yv(e,r)&&null!=e.N&&p<e.N||f.push(b))}if(t=void 0,c.length&&(t=c.reduce(function(e,t){return e+t.duration},0),t=Math.round(c.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),c=f.some(function(e){return null!=e.h}))for(n={},o=0;o<f.length;n={Ve:void 0,Ue:void 0,Ne:void 0,Zc:void 0,Me:void 0},o++)if(n.Zc=f[o],null==n.Zc.h)for(n.Ue=0,n.Ve=o,i=function(e){return function(){var t=f[e.Ve];if(t){if(null!=t.h)return t.h+e.Ue;e.Ue-=t.endTime-t.startTime,e.Ve+=1}return null}}(n),n.Me=0,n.Ne=o,s=function(e){return function(){var t=f[e.Ne];if(t){if(t!=e.Zc&&(e.Me+=t.endTime-t.startTime),null!=t.h)return t.h+e.Me;--e.Ne}return null}}(n);null==n.Zc.h;)n.Zc.h=s(),null==n.Zc.h&&(n.Zc.h=i());if(c)for(o=(n=g(f)).next();!o.done;o=n.next())for(o=(i=o.value).h,s=(i=g(i.g)).next();!s.done;s=i.next())(s=s.value).h=o,o+=s.endTime-s.startTime;if(n=e.ma,c&&n!=1/0&&!Yv(e,r))for(r=(e=g(f)).next();!r.done;r=e.next())r.value.Ah(n);return{segments:f,bandwidth:t}}function cb(e,t){if(e==ut){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function db(e){return e==ut?"text/vtt":Ib.get(e).get("mp4")}function pb(e,t){for(var n=t[e=gb(e)?Math.trunc((t.length-1)/2):0];2==n.Kc()&&e+1<t.length;)n=t[++e];return{segment:n,segmentIndex:e}}function hb(e,t,n,o,i,r,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(o)||void 0,e.hdr=i||void 0,e.videoLayout=r||void 0,e.colorGamut=s||void 0)}function fb(e,t,n){return vb(e,Hi(t,e.g.retryParameters),0,{type:n?2:3})}function mb(e){var t,n,o,i,r,s;return D(function(a){switch(a.g){case 1:return e.h?(k(a,2),t=Date.now(),S(a,e.update(),4)):a.return();case 4:n=Date.now(),gb(e)&&(o=(n-t)/1e3,e.Zb.sample(1,o),i=e.g.updatePeriod>0?e.g.updatePeriod:e.o,r=Math.max(0,i-H(e.Zb)),e.F.ka(r)),A(a,3);break;case 2:if(s=I(a),!e.h)return a.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),a.return();s.severity=1,e.h.onError(s),e.F.ka(.1);case 3:if(!e.h)return a.return();e.h.onManifestUpdated(),T(a)}})}function gb(e){return e.Ga!=Mb}function yb(e,t){e.Ga=t,e.l&&e.l.cd(!gb(e)),gb(e)||e.F.stop()}function vb(e,t,n,o){if(!e.$)throw new je(2,7,7001);return o||(o={}),o.isPreload=e.ac(),t=e.h.networkingEngine.request(n,t,o),ji(e.$,t),t}function bb(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function xb(t,n,o,i,r,s){var a,l,u,c,d,p,h,f,m,g,y;return D(function(v){switch(v.g){case 1:if("video/mp2t"==o)throw new je(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new je(2,4,4041);if(a=fv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(a))return v.return(null);if((l=wv(i(),fv(n,"URI"),s))[0].startsWith("data:text/plain;base64,")){u=tt(Ze(l[0].split("data:text/plain;base64,").pop())),v.A(2);break}return c=l.sort().join(""),t.xa.has(c)||(d=Hi(l,t.g.retryParameters),p=vb(t,d,6).promise,t.xa.set(c,p)),S(v,t.xa.get(c),3);case 3:h=v.h,u=tt(h.data);case 2:if(f="00000000000000000000000000000000",!r){v.A(4);break}return S(v,wb(t,r),5);case 5:(m=v.h)&&(f=m);case 4:return(g=new Map).set(f,u),y="cenc","SAMPLE-AES"==a&&(y="cbcs"),v.return(rt(g,y))}})}function wb(e,t){var n,o,i;return D(function(r){return 1==r.g?(n=null,e.ya.has(t)?(n=e.ya.get(t),r.A(2)):(o=au(t.P(),t.Jc(),t.Gc(),e.g.retryParameters),S(r,vb(e,o,Xi,{type:0}).promise,3))):(2!=r.g&&(i=r.h,t.me(i.data),n=function(e){var t=null;return(new sr).box("moov",ar).box("trak",ar).box("mdia",ar).box("minf",ar).box("stbl",ar).T("stsd",lr).box("encv",ur).box("enca",cr).box("sinf",ar).box("schi",ar).T("tenc",function(e){(e=e.reader).Y(),e.Y(),e.Y(),e.Y(),t=tt(e.Tb(16))}).parse(e,!0),t}(i.data),e.ya.set(t,n)),r.return(n))})}$("shaka.net.DataUriPlugin",Mv),Mv.parse=Rv,$i("data",Rv),(i=Lv.prototype).configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.ac=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.W()&&this.F.Kb()},i.start=function(e,t){var n,o=this;return D(function(i){return 1==i.g?(o.h=t,o.oa=t.isLowLatencyMode(),S(i,fb(o,[e]).promise,2)):3!=i.g?(n=i.h,o.H=n.uri,S(i,function(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f,m,v,b,x,w,C,A,E,M,R,_,L,P,O,N,U,B,F,j,z,$,V,H,G,q,W,K,X,Y,J;return D(function(Q){switch(Q.g){case 1:return n=ct,o=Cv(e.Ta,t),i=yv(o.ha,"EXT-X-DEFINE"),r=[],s=[],a=[],e.l=new ul(null,0),e.l.cd(!0),l=function(){return[e.H]},u=null,c=new Map,1==o.type?(e.R=!1,j=yv(o.ha,"EXT-X-DEFINE"),c=Fv(e,j,e.H),u=n.Ca,z="",$=new Map,S(Q,Jv(e,e.G++,c,o,l,"",u,z,!0,"Media Playlist",null,$,null,!1,null,!1),7)):(function(e,t){for(var n=new ye(e.H).g,o=(t=g(t)).next();!o.done;o=t.next()){var i=o.value;o=hv(i,"NAME");var r=hv(i,"VALUE");i=hv(i,"QUERYPARAM"),o&&r&&(e.B.has(o)||e.B.set(o,r)),i&&(o=n.get(i)[0])&&!e.B.has(o)&&e.B.set(i,o)}}(e,i),d=yv(o.ha,"EXT-X-MEDIA"),p=yv(o.ha,"EXT-X-STREAM-INF"),h=yv(o.ha,"EXT-X-IMAGE-STREAM-INF"),f=yv(o.ha,"EXT-X-I-FRAME-STREAM-INF"),m=yv(o.ha,"EXT-X-SESSION-KEY"),v=yv(o.ha,"EXT-X-SESSION-DATA"),b=yv(o.ha,"EXT-X-CONTENT-STEERING"),function(e,t){for(var n=(t=g(t)).next();!n.done;n=t.next()){var o=n.value,i=hv(o,"DATA-ID");n=hv(o,"URI");var r=hv(o,"LANGUAGE");o=hv(o,"VALUE"),i=(new Map).set("id",i),n&&i.set("uri",wv([e.H],n,e.B)[0]),r&&i.set("language",r),o&&i.set("value",o),n=new Oi("sessiondata",i),e.h&&e.h.onEvent(n)}}(e,v),S(Q,function(e,t){var n,o,i,r,s,a;return D(function(l){if(!e.h||!e.g)return l.return();for(o=g(t),i=o.next();!i.done;i=o.next())if(r=i.value,s=hv(r,"PATHWAY-ID"),a=hv(r,"SERVER-URI"),s&&a){e.j=new Eg(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=s,n=Mg(e.j,a);break}return S(l,n,0)})}(e,b),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(x=[],w=g(p),C=w.next(),A={};!C.done;A={Yi:void 0},C=w.next())E=C.value,(M=hv(E,"SUPPLEMENTAL-CODECS"))&&(A.Yi=M.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),R=E.attributes.map(function(e){return function(t){var n=t.name,o=t.value;return"CODECS"==n&&(o=e.Yi.join(","),(t=t.value.split(",")).length>1&&(t=at("audio",t))&&(o+=","+t)),new gv(n,o)}}(A)),x.push(new cv(E.id,E.name,R,null)));for(p.push.apply(p,y(x)),_=[],L=g(f),P=L.next(),O={};!P.done;O={Zi:void 0},P=L.next())N=P.value,(U=hv(N,"SUPPLEMENTAL-CODECS"))&&(O.Zi=U.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),B=N.attributes.map(function(e){return function(t){var n=t.name;return t=t.value,"CODECS"==n&&(t=e.Zi.join(",")),new gv(n,t)}}(O)),_.push(new cv(N.id,N.name,B,null)));f.push.apply(f,y(_))}return function(e,t){for(var n=(t=g(t)).next();!n.done;n=t.next()){var o=n.value,i=hv(o,"AUDIO");n=hv(o,"VIDEO");var r=hv(o,"SUBTITLES");if(o=$v(e,o),r){var s=at(ut,o);e.K.set(r,s),Z(o,s)}i&&((r=at("audio",o))||(r=e.g.hls.defaultAudioCodec),e.K.set(i,r)),n&&((i=at("video",o))||(i=e.g.hls.defaultVideoCodec),e.K.set(n,i))}}(e,p),function(e,t){t=vv(t,"CLOSED-CAPTIONS"),e.R=0==t.length;for(var n=(t=g(t)).next();!n.done;n=t.next()){var o=n.value,i=hv(o,"LANGUAGE");n=Lo(i||"und"),i||(i=hv(o,"NAME"))&&(n=i),i=fv(o,"GROUP-ID"),o=fv(o,"INSTREAM-ID").replace("SERVICE","svc"),e.J.get(i)||e.J.set(i,new Map),e.J.get(i).set(o,n)}}(e,d),F=function(e,t){return t.map(function(t){return"video"!==(t=Gv(e,t)).stream.type?null:t.stream}).filter(function(e){return e})}(e,f),S(Q,function(e,t,n,o,i,r,s){var a,l,u,c,d,p,h,f,m,v,b,x,w,T,k,C,A,I,E,M,R,_,L,P,O,N,U,B,F,j,z,$,V,H,G,q;return D(function(D){switch(D.g){case 1:if(a=[],l=new Set,e.g.ignoreDrmInfo||!(n.length>0)){D.A(2);break}u=g(n),c=u.next();case 3:if(c.done){D.A(2);break}if(d=c.value,p=fv(d,"METHOD"),h=hv(d,"KEYFORMAT")||"identity",f=null,"NONE"==p){D.A(4);break}if(bb(p)){m=wv(i(),fv(d,"URI"),r),v=m.sort().join(""),e.O.has(v)||(b=Hi(m,e.g.retryParameters),x=vb(e,b,6).promise,e.O.set(v,x)),D.A(4);break}if("identity"==h)return S(D,xb(e,d,"",i,null,r),12);if(!(w=e.uc.get(h))){T=null,D.A(10);break}return S(D,w(d,"",null),11);case 11:T=D.h;case 10:f=T,D.A(6);break;case 12:f=D.h;case 6:if(f){if(f.keyIds)for(k=g(f.keyIds),C=k.next();!C.done;C=k.next())A=C.value,l.add(A);a.push(f)}case 4:c=u.next(),D.A(3);break;case 2:for(I={},E=g(t),M=E.next();!M.done;M=E.next())R=M.value,_=dv(R,!e.j),I[_]?I[_].push(R):I[_]=[R];for(P in L=[],I)O=I[P],N=O[0],U=hv(N,"FRAME-RATE"),B=Number(hv(N,"AVERAGE-BANDWIDTH"))||Number(fv(N,"BANDWIDTH")),F=hv(N,"RESOLUTION"),j=g(F?F.split("x"):[null,null]),z=j.next().value,$=j.next().value,V=hv(N,"VIDEO-RANGE"),(H=hv(N,"REQ-VIDEO-LAYOUT"))&&H.includes(",")&&(G=H.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e}),H=G[0]),H=H||"CH-MONO",q=zv(e,O,o),L.push.apply(L,y(Vv(e,q.audio,q.video,B,z,$,U,V,H,a,l,s)));return D.return(L.filter(function(e){return null!=e}))}})}(e,p,m,d,l,e.B,F),5);case 5:return r=Q.h,s=function(e,t){var n=vv(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return Hv(e,[t],new Map).stream}catch(a){if(e.g.hls.ignoreTextStreamFailures)return null;throw a}});for(var o=(n=g(n)).next();!o.done;o=n.next()){var i=fv(o.value,"GROUP-ID");if((o=e.K.get(i))&&(i=e.M.get(i)))for(var r=(i=g(i)).next();!r.done;r=i.next())(r=r.value).stream.codecs=o,r.stream.mimeType=cb(ut,o)||db(ut),jv(r.stream)}return t.filter(function(e){return e})}(e,d),S(Q,function(e,t,n){var o,i;return D(function(r){return 1==r.g?(o=t.map(function(t){var n,o;return D(function(i){if(1==i.g)return e.g.disableThumbnails?i.return(null):(k(i,2),S(i,function(e,t){var n,o,i,r,s,a,l,u,c,d;return D(function(p){return 1==p.g?(n=fv(t,"URI"),o=hv(t,"CODECS","jpeg")||"",e.i.has(n)?p.return(e.i.get(n)):(i=hv(t,"LANGUAGE"),r=hv(t,"NAME"),s=hv(t,"CHARACTERISTICS"),a=qv(e,e.G++,[n],o,"image",i,!1,r,null,null,s,!1,null,!1),(l=hv(t,"RESOLUTION"))?S(p,a.stream.createSegmentIndex(),3):p.A(2))):(2!=p.g&&(u=Pl(a.stream.segmentIndex),c=u.tilesLayout)&&(a.stream.width=Number(l.split("x")[0])*Number(c.split("x")[0]),a.stream.height=Number(l.split("x")[1])*Number(c.split("x")[1])),(d=hv(t,"BANDWIDTH"))&&(a.stream.bandwidth=Number(d)),e.i.set(n,a),p.return(a))})}(e,t),4));if(2!=i.g)return n=i.h,i.return(n.stream);if(o=I(i),e.g.hls.ignoreImageStreamFailures)return i.return(null);throw o})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=Gv(e,t);return"image"!==n.stream.type?null:n.stream}catch(l){if(e.g.hls.ignoreImageStreamFailures)return null;throw l}})),S(r,Promise.all(o),2)):(i=r.h,r.return(i.filter(function(e){return e})))})}(e,h,f),6);case 6:a=Q.h,Q.A(3);break;case 7:V=Q.h,e.i.set(e.H,V),V.stream&&(H=Vl(V.stream),V.stream.segmentIndex.Gb(function(e){e.aa&&(e.aa.xd=H)})),u=V.stream.type,G=!0,(e.g.disableAudio&&"audio"==V.type||e.g.disableVideo&&"video"==V.type&&!V.stream.codecs.includes(","))&&(G=!1),G&&r.push({id:0,language:Lo(z||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==V.type?V.stream:null,video:"video"==V.type?V.stream:null,bandwidth:V.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new je(2,7,7001);if(nb(e,o),1==o.type&&(gb(e)&&(ib(e,o),q=e.o,e.F.ka(q)),W=Array.from(e.i.values()),Xv(e,W),Bv(e),lb(e,o.ha,u,c,l)),e.m={presentationTimeline:e.l,variants:r,textStreams:s,imageStreams:a,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.ba||!e.g.hls.disableCodecGuessing){Q.A(8);break}for(K=[],X=g(e.m.variants),Y=X.next();!Y.done;Y=X.next())(J=Y.value).audio&&""===J.audio.codecs&&K.push(J.audio.createSegmentIndex()),J.video&&""===J.video.codecs&&K.push(J.video.createSegmentIndex());return S(Q,Promise.all(K),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),T(Q)}})}(o,n.data),3)):i.return(o.m)})},i.stop=function(){this.F&&(this.F.stop(),this.F=null);var e=[];return this.$&&(e.push(this.$.destroy()),this.$=null),this.g=this.h=null,this.ob.clear(),this.m=null,this.i.clear(),this.M.clear(),this.K.clear(),this.B.clear(),this.Da.clear(),this.wa.clear(),this.O.clear(),this.xa.clear(),this.ya.clear(),this.I.clear(),this.j&&this.j.destroy(),this.V&&(this.V.release(),this.V=null),Promise.all(e)},i.update=function(){var e,t,n,o,i,r,s,a,l,u,c,d=this;return D(function(p){if(1==p.g){if(!gb(d))return p.return();for(e=[],t=Array.from(d.i.values()),d.o=1/0,d.m.gapCount=0,n=t.filter(function(e){return e.stream.segmentIndex}),o=g(n),i=o.next();!i.done;i=o.next())r=i.value,e.push(Dv(d,r));return S(p,Promise.all(e),2)}for(Kv(d,n.map(function(e){return e.stream})),s=n.some(function(e){return 0==e.Wd}),n.length&&!s&&(yb(d,Lb.ij),a=n.map(function(e){return e.qc}),d.l.rb(Math.min.apply(Math,y(a))),d.h.updateDuration()),s&&Bv(d),l=g(n),u=l.next();!u.done;u=l.next())(c=u.value).stream.isAudioMuxedInVideo||!c.stream.segmentIndex||Pl(c.stream.segmentIndex)||d.h.disableStream(c.stream);T(p)})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(e){this.j&&this.j.banLocation(e)},i.setMediaElement=function(e){this.X=e},$("shaka.hls.HlsParser",Lv);var Sb=(new Map).set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),Tb=(new Map).set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),kb=(new Map).set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),Cb=(new Map).set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),Ab=(new Map).set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Ib=(new Map).set("audio",Tb).set("video",kb).set("text",Cb).set("image",Ab),Eb=new Set(["video/mp2t"].concat(y(fo))),Mb="VOD",Rb="EVENT",_b="LIVE",Lb={ij:Mb,Hl:Rb,Rl:_b};function Pb(e){return qm(e)}Zr("application/x-mpegurl",function(){return new Lv}),Zr("application/vnd.apple.mpegurl",function(){return new Lv});var Db=(new Map).set("com.microsoft.playready",Pb).set("com.microsoft.playready.recommendation",Pb).set("com.microsoft.playready.software",Pb).set("com.microsoft.playready.hardware",Pb);function Ob(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new V(5),this.o=new To(function(){!function(e){var t;D(function(n){switch(n.g){case 1:return k(n,2),S(n,Nb(e),4);case 4:A(n,3);break;case 2:t=I(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();T(n)}})}(e)}),this.C=new Fi,this.m=new Map,this.B=function(){return!1}}function Nb(e){var t,n,o,i,r,s,a;return D(function(l){if(1==l.g)return t=Hi(e.l,e.g.retryParameters),n=e.h.networkingEngine,o=Date.now(),i=n.request(0,t,{type:5,isPreload:e.B()}),ji(e.C,i),S(l,i.promise,2);if(r=l.h,!e.h)return l.return();r.uri&&!e.l.includes(r.uri)&&e.l.unshift(r.uri);var u=r.uri,c=r.data,d=e.g.mss.manifestPreprocessor;if(d!=nc){if(pe("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),!(c=gy(c,"SmoothStreamingMedia")))throw new je(2,4,4046,u);d(c),c=Ge(c.outerHTML)}var p=Vt(c,"SmoothStreamingMedia");if(!p)throw new je(2,4,4046,u);if((u=e.g.mss.manifestPreprocessorTXml)!=oc&&u(p),e.i||(e.i=new ul(null,0)),u=en(p,"IsLive",pn,!1))throw new je(2,4,4047);e.i.cd(!u),d=en(p,"TimeScale",cn,1e7),c=en(p,"DVRWindowLength",cn),u&&(0===c||isNaN(c))&&(c=1/0);var h,f=en(p,"CanSeek",pn,!1);for(0===c&&f&&(c=1/0),f=null,c&&c>0&&(f=c/d),u&&!isNaN(e.g.availabilityWindowOverride)&&(f=e.g.availabilityWindowOverride),null==f&&(f=1/0),e.i.Hf(f),c=en(p,"Duration",cn,1/0),u||e.i.rb(c/d),u={variants:[],textStreams:[],timescale:d,duration:c/d},f=Kt(p,"Protection"),d=e.g.mss.keySystemsBySystemId,c=[],h=(f=g(f)).next();!h.done;h=f.next())c=c.concat(Kt(h.value,"ProtectionHeader"));if(c.length){for(f=[],h=0;h<c.length;h++){var m=c[h],v=m.attributes.SystemID.toLowerCase(),b=d[v];if(b){var x;e:{if(x=Gm(m))for(var w=(x=g(Jt(x,"DATA"))).next();!w.done;w=x.next())if(w=Qt(w.value,"KID")){x=Ze(Xt(w)),x=tt(x=new Uint8Array([x[3],x[2],x[1],x[0],x[5],x[4],x[7],x[6]].concat(y(x.slice(8)))));break e}x=null}v=it(b,"cenc",v=[{initData:vr(w=Ze(Xt(m)),v=et(v.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:x}]),x&&v.keyIds.add(x),(b=Db.get(b))&&(v.licenseServerUri=b(m)),f.push(v)}}d=f}else d=[];for(h=d,f=[],d=[],c=[],m=(p=g(p=Kt(p,"StreamIndex"))).next();!m.done;m=p.next()){b=Kt(m=m.value,"QualityLevel"),v=u.timescale,x=u.duration,w=Kt(m,"c");for(var k=[],C=0,A=0;A<w.length;++A){var I=w[A],E=w[A+1],M=en(I,"t",cn),R=en(I,"d",cn);if(I=en(I,"r",ln),!R)break;if(M=null!=M?M:C,(I=I||0)&&I--,I<0)if(E){if(null==(E=en(E,"t",cn)))break;if(M>=E)break;I=Math.ceil((E-M)/R)-1}else{if(x==1/0)break;if(M/v>=x)break;I=Math.ceil((x*v-M)/R)-1}for(E=0;E<=I;++E)C=M+R,k.push({start:M/v,end:C/v,Fh:M}),M=C}for(v=k,x=(b=g(b)).next();!x.done;x=b.next())(x=Ub(e,m,x.value,v,h,u))&&("audio"!=x.type||e.g.disableAudio?"video"!=x.type||e.g.disableVideo?x.type!=ut||e.g.disableText||c.push(x):d.push(x):f.push(x))}for(p=[],h=(f=g(f.length>0?f:[null])).next();!h.done;h=f.next())for(h=h.value,k=(m=g(d.length>0?d:[null])).next();!k.done;k=m.next())v=(b=p).push,x=e,w=h,k=k.value,A=0,w&&w.bandwidth&&w.bandwidth>0&&(A+=w.bandwidth),k&&k.bandwidth&&k.bandwidth>0&&(A+=k.bandwidth),x={id:x.u++,language:w?w.language:"und",disabledUntilTime:0,primary:!!w&&w.primary||!!k&&k.primary,audio:w,video:k,bandwidth:A,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(b,x);u.variants=p,u.textStreams=c,e.j?(e.j.variants=u.variants,e.j.textStreams=u.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:u.variants,textStreams:u.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.kf()),Promise.resolve(),s=Date.now(),a=(s-o)/1e3,e.F.sample(1,a),T(l)})}function Ub(e,t,n,o,i,r){var s=t.attributes.Type;if("audio"!==s&&"video"!==s&&"text"!==s)return K("Ignoring unrecognized type:",s),null;var a=t.attributes.Language,l=e.u++,u=en(n,"Bitrate",un),c=en(n,"MaxWidth",un),d=en(n,"MaxHeight",un),p=en(n,"Channels",un),h=en(n,"SamplingRate",un),f=r.duration;o.length&&(f=o[o.length-1].end-o[0].start);var m=e.i.getDuration();e.i.rb(Math.min(f,m));var y={id:l,originalId:t.attributes.Name||String(l),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:u||0,width:c||void 0,height:d||void 0,kind:"",encrypted:i.length>0,drmInfos:i,keyIds:new Set,language:Lo(a||"und"),originalLanguage:a,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:p,audioSamplingRate:h,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:f,timescale:r.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((i=t.attributes.Subtype)&&((i=Fb.get(i))&&y.roles.push(i),"main"===i&&(y.primary=!0)),null!==(i=n.attributes.FourCC)&&""!==i||(i=t.attributes.FourCC),!i)if("audio"===s)i="AAC";else if("video"===s)return K('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!Bb.includes(i.toUpperCase()))return K("Codec not supported:",i),null;switch(n=function(e,t,n,o){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=o.channelsCount||2,e=o.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return o=i[e],"AACH"===n?(n=new Uint8Array(4),e=i[2*e],n[0]=40|o>>1,n[1]=o<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,(t=new Uint16Array(2))[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):((n=new Uint8Array(2))[0]=16|o>>1,n[1]=o<<7|t<<3,(t=new Uint16Array(1))[0]=(n[0]<<8)+n[1],t[0].toString(16))}(n,s,i,y),y.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return K("Quality unsupported without CodecPrivateData",s),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=function(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}(i,n);break;case"video":if(!n)return K("Quality unsupported without CodecPrivateData",s),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=function(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}(n);break;case"text":y.type=ut,y.mimeType="application/mp4",("TTML"===i||"DFXP"===i)&&(y.codecs="stpp")}return y.fullMimeTypes.add(oo(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var n=e.m.get(y.id);else n=[],"video"==y.type&&(n=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n=hs(new ps([n={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Cb:n,Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:null,stream:y}])),e.m.set(y.id,n);return n=function(e,t,n,o,i){var r=o.attributes.Url.replace("{bitrate}",String(n.bandwidth));o=[];for(var s=(i=g(i)).next(),a={};!s.done;a={Lf:void 0},s=i.next())a.Lf=s.value,o.push(new $s(a.Lf.start,a.Lf.end,function(t){return function(){return ot(e.l,[r.replace("{start time}",String(t.Lf.Fh))])}}(a),0,null,t,0,0,n.mssPrivateData.duration));return o}(e,new js(function(){return[]},0,null,Vl(y),y.mssPrivateData.timescale,n,null,y.encrypted),y,t,o),y.segmentIndex=new Ll(n),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}(i=Ob.prototype).configure=function(e,t){this.g=e,t&&(this.B=t)},i.start=function(e,t){var n=this;return D(function(o){if(1==o.g)return n.l=[e],n.h=t,S(o,Nb(n),2);if(!n.h)throw new je(2,7,7001);return o.return(n.j)})},i.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},i.update=function(){var e,t=this;return D(function(n){return 1==n.g?(k(n,2),S(n,Nb(t),4)):2!=n.g?A(n,0):(e=I(n),t.h&&e?(t.h.onError(e),void T(n)):n.return())})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},$("shaka.mss.MssParser",Ob);var Bb="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Fb=(new Map).set("CAPT","main").set("SUBT","alternate").set("DESC","main");function jb(e,t,n,o,i,r,s){if(n>=200&&n<=299&&202!=n||304==n)return{uri:i||o,originalUri:o,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:r};r=null;try{r=He(t)}catch(a){}throw new je(401==n||403==n?2:1,1,1001,o,n,r,e,s,i||o)}function zb(){}function $b(e,t,n,o,i,r){var s=new Wb;try{tr(t.headers).forEach(function(e,t){s.append(t,e)})}catch(c){return Ri(new je(1,1,1002,e,c,n))}var a=new Gb,l={Qh:!1,cj:!1};if(e=function(e,t,n,o,i,r,s,a,l){var u,c,d,p,h,f,m,g,y,v,b,x,w,C,E;return D(function(M){switch(M.g){case 1:return u=Hb,c=qb,p=new ArrayBuffer(0),f=h=0,m={},g=Date.now(),k(M,2),S(M,u(e,o),4);case 4:if(d=M.h,m=function(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}(d.headers),s(m),"HEAD"==o.method){M.A(5);break}return v=(y=d.headers.get("Content-Length"))?parseInt(y,10):0,d.body?(b=d.clone().body.getReader(),x=function(e){function t(){var n,o,i,s;return D(function(u){switch(u.g){case 1:return k(u,2),S(u,b.read(),4);case 4:n=u.h,A(u,3);break;case 2:return I(u),u.return();case 3:if(n.done){u.A(5);break}if(h+=n.value.byteLength,!a){u.A(5);break}return S(u,a(n.value),5);case 5:o=Date.now(),i=h-f,(o-g>100&&i>=l||n.done)&&(s=n.done?0:v-h,r(o-g,i,s),f=h,g=o),n.done?e.close():(e.enqueue(n.value),t()),T(u)}})}t()},new c({start:x}),S(M,d.arrayBuffer(),8)):S(M,d.arrayBuffer(),9);case 8:p=M.h,M.A(5);break;case 9:p=M.h,w=Date.now(),r(w-g,p.byteLength,0);case 5:t.headers.Range&&2==(C=t.headers.Range.replace("bytes=","").split("-").filter(function(e){return e}).map(function(e){return parseInt(e,10)})).length&&p.byteLength!=C[1]-C[0]+1&&K("Payload length does not match range requested bytes",t,d),A(M,3);break;case 2:if(E=I(M),i.Qh)throw new je(1,1,7001,e,n);if(i.cj)throw new je(1,1,1003,e,n);throw new je(1,1,1002,e,E,n);case 3:return M.return(jb(m,p,d.status,e,d.url,t,n))}})}(e,t,n,{body:t.body||void 0,headers:s,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},l,o,i,t.streamDataCallback,r.minBytesForProgressEvents||0),e=new Mi(e,function(){return l.Qh=!0,a.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var u=new To(function(){l.cj=!0,a.abort()});u.ka(t/1e3),e.finally(function(){u.stop()})}return e}function Vb(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(Tk){return!1}return!!e.Response&&!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController)}Zr("application/vnd.ms-sstr+xml",function(){return new Ob}),$("shaka.net.HttpFetchPlugin",zb),zb.isSupported=Vb,zb.parse=$b;var Hb=e.fetch,Gb=e.AbortController,qb=e.ReadableStream,Wb=e.Headers;function Kb(){}function Xb(e,t,n,o,i,r){var s=new Yb,a=Date.now(),l=0,u=new Promise(function(u,c){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials;var d={};for(var p in s.onabort=function(){c(new je(1,1,7001,e,n))},s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.HEADERS_RECEIVED){for(var e=s.getAllResponseHeaders().trim().split("\r\n"),t={},n=(e=g(e)).next();!n.done;n=e.next())t[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");i(d=t)}},s.onload=function(i){var r=s.response;try{o(Date.now()-a,i.loaded-l,0);var p=jb(d,r,s.status,e,s.responseURL,t,n);u(p)}catch(h){c(h)}},s.onerror=function(t){c(new je(1,1,1002,e,t,n))},s.ontimeout=function(){c(new je(1,1,1003,e,n))},s.onprogress=function(e){var t=Date.now(),n=r.minBytesForProgressEvents||0,i=e.loaded-l;(t-a>100&&i>=n||e.lengthComputable&&e.loaded==e.total)&&(o(t-a,i,4==s.readyState?0:e.total-e.loaded),l=e.loaded,a=t)},t.headers)try{s.setRequestHeader(p.toLowerCase(),t.headers[p])}catch(h){throw new je(1,1,1002,e,h,n)}s.send(t.body)});return new Mi(u,function(){return s.abort(),Promise.resolve()})}Vb()&&($i("http",$b,2,!0),$i("https",$b,2,!0),$i("blob",$b,2,!0)),$("shaka.net.HttpXHRPlugin",Kb),Kb.parse=Xb;var Yb=e.XMLHttpRequest;function Jb(e,t,n,o,i){this.g=e,this.i=t,this.groupId=n,this.h=o,this.j=i}function Qb(e){var t=e.Yb(!1);return t?Qe(t):e.P().map(function(e){return"{"+encodeURI(e.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function Zb(e,t){return au(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function ex(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function tx(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}function nx(e){return 0==e.i?0:e.j/e.i}function ox(e){var t=this;this.u=e,this.i=new Map,this.h=new Qi(function(){return ix(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new ex,this.l=!1}function ix(e){e.l=!0;var t=e.j.map(function(e){return e()});return e.j=[],Promise.all(t)}function rx(e,t,n,o,i,r){Zi(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new je(2,9,7001);if(i){var t=Ne(n);for(var s in(t=new yr(t)).data){var a=Number(s);e.m(t.data[a],t.g[a])}}return e.g.close(o,n.byteLength),e.o(nx(e.g),e.g.g),r(n)});e.i.set(t,s)}function sx(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Ei,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function ax(e,t){return new Promise(function(n,o){var i=e.h.openCursor();i.onerror=o,i.onsuccess=function(){var e;return D(function(o){if(1==o.g)return null==i.result?(n(),o.return()):(e=i.result,S(o,t(e.key,e.value,e),2));e.continue(),T(o)})}})}function lx(e){this.h=e,this.g=[]}function ux(e,t){return cx(e,t,"readwrite")}function cx(e,t,n){var o=new sx(n=e.h.transaction([t],n),t);return e.g.push(o),o.promise().then(function(){Z(e.g,o)},function(){Z(e.g,o)}),o}function dx(e,t,n){this.h=new lx(e),this.i=t,this.g=n}function px(e){return Promise.reject(new je(2,9,9011,"Cannot add new value to "+e))}function hx(e,t,n,o){t=(e=ux(e.h,t)).store();for(var i=(n=g(n)).next(),r={};!i.done;r={Qg:void 0},i=n.next())r.Qg=i.value,t.delete(r.Qg).onsuccess=function(e){return function(){return o(e.Qg)}}(r);return e.promise()}function fx(e,t,n){var o,i,r,s,a,l,u;return D(function(c){if(1==c.g){for(o=cx(e.h,t,"readonly"),i=o.store(),r={},s=[],a=g(n),l=a.next(),u={};!l.done;u={Bf:void 0,ef:void 0},l=a.next())u.ef=l.value,u.Bf=i.get(u.ef),u.Bf.onsuccess=function(e){return function(){null==e.Bf.result&&s.push(e.ef),r[e.ef]=e.Bf.result}}(u);return S(c,o.promise(),2)}if(s.length)throw new je(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(e){return r[e]}))})}function mx(e){this.g=new lx(e)}function gx(){this.g=new Map}function yx(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,o){e.hasFixedKeySpace()||t||(t={path:{Qb:n,bb:o},bb:e})})}),t)return t;throw new je(2,9,9013,"Could not find a cell that supports add-operations")}function vx(e,t,n){if(!(e=e.g.get(t)))throw new je(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new je(2,9,9013,"Could not find cell with name "+n);return t}function bx(e,t){xx.set(e,t)}$i("http",Xb,1,!0),$i("https",Xb,1,!0),$i("blob",Xb,1,!0),ex.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}},ox.prototype.destroy=function(){return this.h.destroy()},ox.prototype.queue=function(e,t,n,o,i){var r=this;Zi(this.h);var s=(this.i.get(e)||Promise.resolve()).then(function(){var e,s,a,l,u,c,d;return D(function(p){if(1==p.g)return S(p,function(e,t){var n,o,i,r;return D(function(s){return 1==s.g?(n=Xi,o=e.u.request(n,t),i=function(){return o.abort()},e.j.push(i),S(s,o.promise,2)):(r=s.h,Z(e.j,i),s.return(r.data))})}(r,t),2);if(e=p.h,r.h.g)throw new je(2,9,7001);if(o)for(l in s=Ne(e),(a=new yr(s)).data)u=Number(l),c=a.data[u],d=a.g[u],r.m(c,d);return r.g.close(n,e.byteLength),r.o(nx(r.g),r.g.g),p.return(i(e))})});return this.i.set(e,s),s},sx.prototype.abort=function(){var e=this;return D(function(t){if(1==t.g){try{e.i.abort()}catch(n){}return k(t,2),S(t,e.g,4)}if(2!=t.g)return A(t,0);I(t),T(t)})},sx.prototype.store=function(){return this.h},sx.prototype.promise=function(){return this.g},lx.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(i=dx.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return px(this.i)},i.removeSegments=function(e,t){return hx(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return D(function(o){return 1==o.g?S(o,fx(n,n.i,e),2):(t=o.h,o.return(t.map(function(e){return n.Sh(e)})))})},i.addManifests=function(){return px(this.g)},i.updateManifest=function(){return Promise.reject(new je(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=ux(this.h,this.g),o=n.store();return o.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,o.put(n,e))},n.promise()},i.removeManifests=function(e,t){return hx(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return D(function(o){return 1==o.g?S(o,fx(n,n.g,e),2):(t=o.h,o.return(Promise.all(t.map(function(e){return n.Pd(e)}))))})},i.getAllManifests=function(){var e,t,n=this;return D(function(o){return 1==o.g?(e=cx(n.h,n.g,"readonly"),t=new Map,S(o,ax(e,function(e,o){var i;return D(function(r){if(1==r.g)return S(r,n.Pd(o),2);i=r.h,t.set(e,i),T(r)})}),2)):3!=o.g?S(o,e.promise(),3):o.return(t)})},i.Sh=function(e){return e},i.Pd=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,o,i,r,s,a,l,u=this;return D(function(c){if(1==c.g){for(n=ux(u.h,e),o=n.store(),i=[],r=g(t),s=r.next(),a={};!s.done;a={eh:void 0},s=r.next())l=s.value,a.eh=o.add(l),a.eh.onsuccess=function(e){return function(){i.push(e.eh.result)}}(a);return S(c,n.promise(),2)}return c.return(i)})},mx.prototype.destroy=function(){return this.g.destroy()},mx.prototype.getAll=function(){var e,t,n=this;return D(function(o){return 1==o.g?(e=cx(n.g,"session-ids","readonly"),t=[],S(o,ax(e,function(e,n){t.push(n)}),2)):3!=o.g?S(o,e.promise(),3):o.return(t)})},mx.prototype.add=function(e){for(var t=ux(this.g,"session-ids"),n=t.store(),o=(e=g(e)).next();!o.done;o=e.next())n.add(o.value);return t.promise()},mx.prototype.remove=function(e){var t,n=this;return D(function(o){return 1==o.g?S(o,ax(t=ux(n.g,"session-ids"),function(t,n,o){e.includes(n.sessionId)&&o.delete()}),2):S(o,t.promise(),0)})},gx.prototype.destroy=function(){for(var e=[],t=g(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},gx.prototype.init=function(){var e=this;xx.forEach(function(t,n){(t=t())&&e.g.set(n,t)});for(var t=[],n=g(this.g.values()),o=n.next();!o.done;o=n.next())t.push(o.value.init());return Promise.all(t)},$("shaka.offline.StorageMuxer",gx),gx.unregister=function(e){xx.delete(e)},gx.register=bx,gx.prototype.destroy=gx.prototype.destroy;var xx=new Map;function wx(){dx.apply(this,arguments)}function Sx(e,t){!function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=g(t),o=n.next();!o.done;o=n.next())o.value.variantIds=[];for(o=(n=g(e)).next();!o.done;o=n.next())o.value.variantIds=[];if(n=0,e.length&&!t.length){o=n++;for(var i=g(e),r=i.next();!r.done;r=i.next())r.value.variantIds.push(o)}if(!e.length&&t.length)for(o=n++,r=(i=g(t)).next();!r.done;r=i.next())r.value.variantIds.push(o);if(e.length&&t.length)for(o=(t=g(t)).next();!o.done;o=t.next())for(o=o.value,r=(i=g(e)).next();!r.done;r=i.next()){r=r.value;var s=n++;o.variantIds.push(s),r.variantIds.push(s)}}}(e);for(var n=g(e.streams),o=n.next();!o.done;o=n.next());return e.streams.map(function(n){return function(e,t,n){var o=e.initSegmentUri?Tx(e.initSegmentUri):null,i=t+e.presentationTimeOffset,r=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:o,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=Tx(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:o,appendWindowStart:t,appendWindowEnd:r,timestampOffset:i,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}(n,e.startTime,t)})}function Tx(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new je(2,9,9004,"Could not parse uri "+e)}function kx(){dx.apply(this,arguments)}function Cx(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){return{startTime:t+o.startTime,endTime:t+o.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:o.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function Ax(){dx.apply(this,arguments)}function Ix(){this.m=this.j=this.i=this.h=this.g=this.l=null}f(wx,dx),wx.prototype.updateManifestExpiration=function(e,t){var n,o,i,r=this;return D(function(s){return n=ux(r.h,r.g),o=n.store(),i=new Ei,o.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,o.put(n),i.resolve()):i.reject(new je(2,9,9012,"Could not find values for "+e))},S(s,Promise.all([n.promise(),i]),0)})},wx.prototype.Pd=function(e){var t,n,o,i,r,s;return D(function(a){if(1==a.g){for(t=[],n=0;n<e.periods.length;++n)o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=o-e.periods[n].startTime,r=Sx(e.periods[n],i),t.push(r);return S(a,Og(t),2)}return s=a.h,a.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},wx.prototype.Sh=function(e){return{data:e.data}},f(kx,dx),kx.prototype.Pd=function(e){var t,n,o,i,r,s;return D(function(a){if(1==a.g){for(t=[],n=0;n<e.periods.length;++n){o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=o-e.periods[n].startTime;for(var l=e.periods[n],u=[],c=g(l.streams),d=c.next();!d.done;d=c.next())0!=(d=d.value).variantIds.length&&u.push(Cx(d,l.startTime,l.startTime+i));r=u,t.push(r)}return S(a,Og(t),2)}return s=a.h,a.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})},f(Ax,dx),(i=Ax.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var o=(e=ux(e.h,e.g)).store();return o.get(t).onsuccess=function(){o.put(n,t)},e.promise()}(this,e,t)},i.Pd=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=Ix.prototype).init=function(){var t=this,n=new Ei,o=!1,i=new To(function(){o=!0,n.reject(new je(2,9,9017))});"number"==typeof Ex&&Ex>0&&i.ka(Ex);var r=e.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!o){i.stop();var e=r.result;t.l=e;var s=e.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new wx(e,"segment","manifest"):null,t.g=s,s=(s=e.objectStoreNames).contains("manifest-v2")&&s.contains("segment-v2")?new kx(e,"segment-v2","manifest-v2"):null,t.h=s,s=(s=e.objectStoreNames).contains("manifest-v3")&&s.contains("segment-v3")?new kx(e,"segment-v3","manifest-v3"):null,t.i=s,s=(s=e.objectStoreNames).contains("manifest-v5")&&s.contains("segment-v5")?new Ax(e,"segment-v5","manifest-v5"):null,t.j=s,e=e.objectStoreNames.contains("session-ids")?new mx(e):null,t.m=e,n.resolve()}},r.onupgradeneeded=function(){for(var e=r.result,t=g(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){o||(i.stop(),n.reject(new je(2,9,9001,r.error)),e.preventDefault())},n},i.destroy=function(){var e=this;return D(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return S(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),T(t)}})},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return D(function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return S(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return S(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return S(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return S(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),S(n,function(){var t=new Ei,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new je(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,S(n,t.init(),0)}})};var Ex=5;function Mx(e,t,n,o){this.g=e,this.i=t,this.h=n,this.l=o,this.j=["offline:",e,"/",t,"/",n,"/",o].join("")}function Rx(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var o=e[3];return o&&null!=t?new Mx(t,n,o,Number(e[4])):null}function _x(e,t){this.h=e,this.g=t}function Lx(e,t){var n=new ul(null,0);n.rb(t.duration);var o=t.streams.filter(function(e){return"audio"==e.type}),i=t.streams.filter(function(e){return"video"==e.type});o=function(e,t,n,o){for(var i=new Set,r=g(t),s=r.next();!s.done;s=r.next())for(var a=(s=g(s.value.variantIds)).next();!a.done;a=s.next())i.add(a.value);for(r=g(n),s=r.next();!s.done;s=r.next())for(s=g(s.value.variantIds),a=s.next();!a.done;a=s.next())i.add(a.value);for(r=new Map,i=g(i),s=i.next();!s.done;s=i.next())s=s.value,r.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=g(t),i=t.next();!i.done;i=t.next())for(s=i.value,i=Px(e,s,o),s=g(s.variantIds),a=s.next();!a.done;a=s.next())(a=r.get(a.value)).language=i.language,a.primary=a.primary||i.primary,a.audio=i;for(n=g(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=Px(e,i,o),i=g(i.variantIds),s=i.next();!s.done;s=i.next())(s=r.get(s.value)).primary=s.primary||t.primary,s.video=t;return r}(e,o,i,n),i=t.streams.filter(function(e){return e.type==ut}).map(function(t){return Px(e,t,n)});var r=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return Px(e,t,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var a=g(o.values()),l=a.next();!l.done;l=a.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=s),l.video&&l.video.encrypted&&(l.video.drmInfos=s);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(o.values()),textStreams:i,imageStreams:r,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function Px(e,t,n){var o=t.segments.map(function(n){return function(e,t,n){var o=new Mx("segment",e.h,e.g,t.dataKey);return e=new $s(t.startTime,t.endTime,function(){return[o.toString()]},0,null,null!=t.initSegmentKey?function(e,t){var n=new Mx("segment",e.h,e.g,t);return new js(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.If(t.thumbnailSprite),e}(e,n,t)});return n.ge(o),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ll(o),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([oo(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function Dx(){this.g=null}function Ox(){}function Nx(e,t){var n=Rx(e);return e=n&&"manifest"==n.g?Li(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t}):n&&"segment"==n.g?function(e,t,n){var o=new gx;return Li(void 0).Xa(function(){return o.init()}).Xa(function(){return vx(o,t.Qb(),t.bb())}).Xa(function(e){return e.getSegments([t.key()])}).Xa(function(e){return{uri:t,data:e[0].data,headers:{},originalRequest:n}}).finally(function(){return o.destroy()})}(n.key(),n,t):Ri(new je(2,1,9004,e)),e}function Ux(e,t,n){var o,i,r,s,a,l;return D(function(u){switch(u.g){case 1:o=[];for(var c=[],d=g(n),p=d.next();!p.done;p=d.next()){p=p.value;for(var h=!1,f=g(c),m=f.next();!m.done;m=f.next())if(Bx((m=m.value).info,p)){m.sessionIds.push(p.sessionId),h=!0;break}h||c.push({info:p,sessionIds:[p.sessionId]})}i=g(c),r=i.next();case 2:if(r.done){u.A(4);break}return s=r.value,a=function(e,t,n){var o,i;return D(function(r){switch(r.g){case 1:return o=new br({tc:t,onError:function(){},uf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),k(r,2),o.configure(e),S(r,function(e,t,n,o,i,r){var s,a,l,u,c;return D(function(d){return 1==d.g?(s=[],r.length&&s.push(r[0].contentType),i.length&&s.push(i[0].contentType),a=function(e){return(e=it(t,e,null)).licenseServerUri=n,e.serverCertificate=o,e.persistentStateRequired=!0,e.sessionType="persistent-license",e},(l=ui(s)).video&&(u=a(r[0].encryptionScheme||""),l.video.drmInfos.push(u)),l.audio&&(c=a(i[0].encryptionScheme||""),l.audio.drmInfos.push(c)),S(d,Go([l],!0,e.O,[]),2)):(Zi(e.l),d.return(Ar(e,[l])))})}(o,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:A(r,3);break;case 2:return I(r),S(r,o.destroy(),5);case 5:return r.return([]);case 3:return i=[],S(r,Promise.all(n.sessionIds.map(function(e){return D(function(t){return 1==t.g?(k(t,2),S(t,function(e,t){var n,o,i;return D(function(r){return 1==r.g?S(r,Mr(e,t,{initData:null,initDataType:null}),2):3!=r.g?(n=r.h)?(o=[],(i=e.i.get(n))&&(i.Lb=new Ei,o.push(i.Lb)),o.push(n.remove()),S(r,Promise.all(o),3)):r.return():(e.i.delete(n),void T(r))})}(o,e),4)):2!=t.g?(i.push(e),A(t,0)):(I(t),void T(t))})})),6);case 6:return S(r,o.destroy(),7);case 7:return r.return(i)}})}(e,t,s),S(u,a,5);case 5:l=u.h,o=o.concat(l),r=i.next(),u.A(2);break;case 4:return u.return(o)}})}function Bx(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ee(e.audioCapabilities,t.audioCapabilities,n)&&ee(e.videoCapabilities,t.videoCapabilities,n)}function Fx(e,t){var n=Lx(new _x(e.Qb(),e.bb()),t),o=t.appMetadata||{};return n=jx(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:o,isIncomplete:t.isIncomplete||!1}}function jx(e){for(var t=[],n=ni(e.variants),o=(n=g(n)).next();!o.done;o=n.next())t.push(Xo(o.value));for(n=(e=g(e.textStreams)).next();!n.done;n=e.next())t.push(Yo(n.value));return t}function zx(){this.g=new Map}function $x(e,t){var n=t.audio,o=t.video;if(n&&!o&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&o&&e.g.set(o.id,o.bandwidth||t.bandwidth),n&&o){var i=n.bandwidth||393216,r=o.bandwidth||t.bandwidth-i;r<=0&&(r=t.bandwidth),e.g.set(n.id,i),e.g.set(o.id,r)}}function Vx(e,t){e.g.set(t.id,t.bandwidth||2048)}function Hx(e,t){return null==(e=e.g.get(t))&&(e=0),e}function Gx(e){var t=this;if(e&&e.constructor!=Wd)throw new je(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Wb()):(this.h=Zu(),this.g=new zi,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new Qi(function(){var e,o,i,r,s;return D(function(a){switch(a.g){case 1:return S(a,Promise.all(t.l.map(function(e){return ix(e)})),2);case 2:for(e=function(){},o=[],i=g(t.i),r=i.next();!r.done;r=i.next())s=r.value,o.push(s.then(e,e));return S(a,Promise.all(o),3);case 3:if(!n){a.A(4);break}return S(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,T(a)}})}),this.m=1e9}function qx(){if(qy(ae()))e:{for(var e=g(xx.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Wx(e){var t,n,o;return D(function(i){switch(i.g){case 1:return S(i,(t=new gx).init(),2);case 2:return S(i,yx(t),3);case 3:return n=i.h,o=new Mx("manifest",n.path.Qb,n.path.bb,e),S(i,t.destroy(),4);case 4:return S(i,(new Gx).remove(o.toString()),0)}})}function Kx(e,t,n,o,i,r){var s,a,l,u,c,d,p,h,f,m,y;return D(function(v){switch(v.g){case 1:for(s=!1,k(v,2),a=!0,l=g(n.streams),u=l.next();!u.done;u=l.next())for(c=u.value,d=g(c.segments),p=d.next();!p.done;p=d.next())h=p.value,null!=(f=h.pendingSegmentRefId?o[h.pendingSegmentRefId]:null)&&(h.dataKey=f,h.pendingSegmentRefId=void 0),null!=(f=h.pendingInitSegmentRefId?o[h.pendingInitSegmentRefId]:null)&&(h.initSegmentKey=f,h.pendingInitSegmentRefId=void 0),h.pendingSegmentRefId&&(a=!1),h.pendingInitSegmentRefId&&(a=!1);return n.size+=i,a&&(n.isIncomplete=!1),S(v,e.updateManifest(t,n),4);case 4:s=!0,r(),A(v,0);break;case 2:return m=I(v),S(v,Wx(t),5);case 5:if(s){v.A(6);break}return y=Object.values(o),S(v,e.removeSegments(y,function(){}),6);case 6:throw m}})}function Xx(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function Yx(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function Jx(e,t,n,o){if(t.expiration=n.Ud(),n=Cr(n),t.sessionIds=o?n:[],Xx(e)&&o&&!n.length)throw new je(2,9,9007)}function Qx(e,t){for(var n=[],o=g(e.streams),i=o.next();!i.done;i=o.next())i=i.value,t&&"video"==i.type?n.push({contentType:oo(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:oo(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function Zx(e,t,n){return D(function(o){return S(o,function(e,t,n,o){var i,r,s;return D(function(a){return 1==a.g?o.drmInfo?(i=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new je(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),r=o.sessionIds.map(function(e){return{sessionId:e,keySystem:o.drmInfo.keySystem,licenseUri:o.drmInfo.licenseServerUri,serverCertificate:o.drmInfo.serverCertificate,audioCapabilities:Qx(o,!1),videoCapabilities:Qx(o,!0)}}),S(a,Ux(t,e,r),2)):a.return():3!=a.g?(s=a.h,S(a,i.remove(s),3)):S(a,i.add(r.filter(function(e){return!s.includes(e.sessionId)})),0)})}(e.g,e.h.drm,n,t),0)})}function ew(e,t,n){function o(){}var i=function(e){for(var t=new Set,n=(e=g(e.streams)).next();!n.done;n=e.next())for(var o=(n=g(n.value.segments)).next();!o.done;o=n.next())null!=(o=o.value).initSegmentKey&&t.add(o.initSegmentKey),t.add(o.dataKey);return Array.from(t)}(n);return Fx(t,n),Promise.all([e.removeSegments(i,o),e.removeManifests([t.key()],o)])}function tw(e,t){var n;return D(function(o){switch(o.g){case 1:return k(o,2),S(o,Cc(t,e.g,e.h.streaming.retryParameters),4);case 4:n=o.h,A(o,3);break;case 2:I(o);case 3:if(n)return o.return(n);throw new je(1,2,2011,t)}})}function nw(e,t,n,o,i,r){var s={id:o.id,originalId:o.originalId,groupId:o.groupId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,colorGamut:o.colorGamut,videoLayout:o.videoLayout,kind:o.kind,language:o.language,originalLanguage:o.originalLanguage,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout,mssPrivateData:o.mssPrivateData,external:o.external,fastSwitching:o.fastSwitching,isAudioMuxedInVideo:o.isAudioMuxedInVideo},a=i.offline.numberOfParallelDownloads,l=0===a?o.id:0;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var o=e.segmentIndex.get(t);o;)n(o,t),o=e.segmentIndex.get(++t)}(o,n.presentationTimeline.Ib(),function(n,i){var u=Qb(n),c=void 0;if(!r.has(u)){var d=n.endTime-n.startTime;d=Hx(t,o.id)*d,d=tx(e.g,d),r.set(u,new Jb(n,d,l,!1,i))}n.aa&&(c=Qb(n.aa),r.has(c)||(d=.5*Hx(t,o.id),d=tx(e.g,d),r.set(c,new Jb(n.aa,d,l,!0,i)))),s.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:u,dataKey:0,mimeType:n.mimeType,codecs:n.codecs,thumbnailSprite:n.thumbnailSprite}),0!==a&&(l=(l+1)%a)}),s}function ow(e){if(e.j.g)throw new je(2,9,7001)}function iw(){if(!qx())throw new je(2,9,9e3)}function rw(e,t){return D(function(n){return 1==n.g?(e.i.push(t),C(n,2),S(n,t,4)):2!=n.g?n.return(n.h):(E(n),Z(e.i,t),M(n,0))})}function sw(e){for(var t=new Set,n=g(e.variants),o=n.next();!o.done;o=n.next())(o=o.value).audio&&t.add(o.audio),o.video&&t.add(o.video);for(o=(n=g(e.textStreams)).next();!o.done;o=n.next())t.add(o.value);for(n=(e=g(e.imageStreams)).next();!n.done;n=e.next())t.add(n.value);return t}$("shaka.offline.indexeddb.StorageMechanismOpenTimeout",Ex),bx("idb",function(){return ae().yh()?new Ix:null}),Mx.prototype.Qb=function(){return this.i},Mx.prototype.bb=function(){return this.h},Mx.prototype.key=function(){return this.l},Mx.prototype.toString=function(){return this.j},(i=Dx.prototype).configure=function(){},i.start=function(e,t){var n,o,i,r,s,a,l=this;return D(function(u){switch(u.g){case 1:if(n=Rx(e),l.g=n,null==n||"manifest"!=n.g)throw new je(2,1,9004,e);return o=new gx,C(u,2),S(u,o.init(),4);case 4:return S(u,vx(o,n.Qb(),n.bb()),5);case 5:return S(u,u.h.getManifests([n.key()]),6);case 6:return i=u.h,r=i[0],s=new _x(n.Qb(),n.bb()),a=Lx(s,r),t.makeTextStreamsForClosedCaptions(a),u.return(a);case 2:return E(u),S(u,o.destroy(),7);case 7:M(u,0)}})},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,o,i,r,s,a,l,u=this;return D(function(c){switch(c.g){case 1:return n=u.g,o=new gx,k(c,2,3),S(c,o.init(),5);case 5:return S(c,vx(o,n.Qb(),n.bb()),6);case 6:return S(c,(i=c.h).getManifests([n.key()]),7);case 7:if(r=c.h,s=r[0],a=s.sessionIds.includes(e),l=null==s.expiration||s.expiration>t,!a||!l){c.A(3);break}return S(c,i.updateManifestExpiration(n.key(),t),3);case 3:return E(c),S(c,o.destroy(),10);case 10:M(c,0);break;case 2:I(c),c.A(3)}})},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},Zr("application/x-offline-manifest",function(){return new Dx}),$("shaka.offline.OfflineScheme",Ox),Ox.plugin=Nx,$i("offline",Nx),(i=Gx.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Bu(e,t)),tc(this.h,e)},i.getConfiguration=function(){var e=Zu();return tc(e,this.h,Zu()),e},i.Wb=function(){return this.g},i.store=function(e,t,n,o,i){var r=this,s=this.getConfiguration(),a=new ox(this.g);return this.l.push(a),t=function(e,t,n,o,i,r,s,a){var l,u,c,d,p,h,f,m,y,v,b,x,w,C,R,_,L,P,O,N,U,B,F;return D(function(j){switch(j.g){case 1:return iw(),u=l=null,c=new gx,h=p=d=null,k(j,2,3),S(j,r(),5);case 5:return l=j.h,S(j,function(e,t,n,o){var i,r,s,a,l;return D(function(u){if(1==u.g)return i=null,r=e.g,s={networkingEngine:r,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return o.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(o.manifest),ow(e),S(u,n.start(t,s),2);if(3!=u.g)return a=u.h,ow(e),l=sw(a),S(u,Promise.all(er(l,function(e){return e.createSegmentIndex()})),3);if(ow(e),i)throw i;return u.return(a)})}(e,t,l,s),6);case 6:if(f=j.h,ow(e),f.presentationTimeline.W()||f.presentationTimeline.Vc())throw new je(2,9,9005,t);m=g(o),y=m.next();case 7:if(y.done){j.A(9);break}return v=y.value,S(j,function(e,t,n){var o,i,r,s,a,l,u,c,d,p,h,f,m,y,v;return D(function(b){switch(b.g){case 1:return S(b,tw(e,t),2);case 2:if("text/vtt"!=(o=b.h))throw new je(1,2,2017,t);return S(b,function(e,t,n){var o,i,r;return D(function(s){return 1==s.g?(o=Xi,(i=Hi([e],n)).method="GET",S(s,t.request(o,i).promise,2)):(r=s.h,s.return(r.data))})}(t,e.g,e.h.streaming.retryParameters),3);case 3:if(i=b.h,!(r=yo(o)))throw new je(2,2,2014,o);for(s=r(),a={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},l=Ne(i),u=s.parseMedia(l,a,t,[]),c=[],d=g(u),p=d.next(),h={};!p.done;h={Rf:void 0,od:void 0},p=d.next())h.od=p.value,h.Rf=null,f=function(e){return function(){return null==e.Rf&&(e.Rf=ot([t],[e.od.payload])),e.Rf||[]}}(h),m=new $s(h.od.startTime,h.od.endTime,f,0,null,null,0,0,1/0),h.od.payload.includes("#xywh")&&4===(y=h.od.payload.split("#xywh=")[1].split(",")).length&&m.If({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)}),c.push(m);if(v=o,!c.length){b.A(4);break}return S(b,Cc(c[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:v=b.h;case 4:return b.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ll(c),mimeType:v||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([oo(v||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}(e,v,f),10);case 10:b=j.h,f.imageStreams.push(b),ow(e),y=m.next(),j.A(7);break;case 9:x=g(i),w=x.next();case 11:return w.done?(Ur(s.drm.clearKeys,f.variants),_=f.variants.some(function(e){if(e.audio)for(var t=g(e.audio.drmInfos),n=t.next();!n.done;n=t.next())if(n.value.licenseServerUri.startsWith("data:"))return!0;if(e.video)for(t=(e=g(e.video.drmInfos)).next();!t.done;t=e.next())if(t.value.licenseServerUri.startsWith("data:"))return!0;return!1}),L=s.offline.usePersistentLicense,_&&(L=!1),S(j,e.md(f,function(e){h=h||e},s,L),15)):(C=w.value,S(j,function(e,t,n,o,i,r,s){var a;return D(function(l){if(1==l.g)return r?l.A(2):S(l,tw(e,n),3);if(2!=l.g&&(r=l.h),a={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Dl(0,t.presentationTimeline.getDuration(),[n]),mimeType:r||"",codecs:s||"",kind:i,encrypted:!1,drmInfos:[],keyIds:new Set,language:o,originalLanguage:o,label:null,type:ut,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([oo(r||"",s||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},!vo(oo(a.mimeType,a.codecs)))throw new je(2,2,2014,r);return l.return(a)})}(e,f,C.uri,C.language,C.kind,C.mime,C.codecs),14));case 14:R=j.h,f.textStreams.push(R),ow(e),w=x.next(),j.A(11);break;case 15:if(u=j.h,ow(e),h)throw h;return S(j,function(e,t,n,o){var i,r,s,a,l,u,c,d,p,h,f,m,y,v,b,x,w,C,E,M,R,_,L,P,O,N,U,B,F;return D(function(D){switch(D.g){case 1:return i={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter(function(e){return jo(e,t,n)})}(e,n.restrictions,i),S(D,$o(t,e,o,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(r=[],s=n.preferredDecodingAttributes,a=n.preferredVideoCodecs,l=n.preferredAudioCodecs,u=n.preferredTextFormats,Fo(e,a,l,s,u),c=g(e.variants),d=c.next();!d.done;d=c.next())p=d.value,r.push(Xo(p));for(h=g(e.textStreams),f=h.next();!f.done;f=h.next())m=f.value,r.push(Yo(m));for(y=g(e.imageStreams),v=y.next();!v.done;v=y.next())b=v.value,r.push(Jo(b));return S(D,n.offline.trackSelectionCallback(r),3);case 3:for(x=D.h,w=e.presentationTimeline.getDuration(),C=0,E=g(x),M=E.next();!M.done;M=E.next())R=M.value,_=R.bandwidth*w/8,C+=_;return k(D,4),S(D,n.offline.downloadSizeCallback(C),6);case 6:if(!D.h)throw new je(2,9,9014);A(D,5);break;case 4:if((L=I(D))instanceof je)throw L;throw new je(2,9,9015);case 5:for(P=new Set,O=new Set,N=new Set,U=g(x),B=U.next();!B.done;B=U.next())"variant"==(F=B.value).type&&P.add(F.id),"text"==F.type&&O.add(F.id),"image"==F.type&&N.add(F.id);e.variants=e.variants.filter(function(e){return P.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return O.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return N.has(e.id)}),function(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=g(t),o=n.next();!o.done;o=n.next())for(var i=(o=g(t)).next();!i.done;i=o.next());for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(e),o=n.next();!o.done;o=n.next());}(e),T(D)}})}(f,u,s,L),16);case 16:return S(j,c.init(),17);case 17:return ow(e),S(j,yx(c),18);case 18:return d=j.h,ow(e),P=function(e,t,n,o,i,r,s){var a=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=jx(t),appMetadata:n,isIncomplete:!1}}(n,t,o),l=i.offline.progressCallback;!function(e,t,n){e.o=t,e.m=n}(r,function(e,t){a.size=t,l(a,e)},function(t,n){u&&s&&c==n&&kr(e,"cenc",t)});var u=Xx(t)&&!Yx(t),c=null;u&&(c=aw.get(e.g.keySystem));for(var d=new zx,p=g(t.textStreams),h=p.next();!h.done;h=p.next())d.g.set(h.value.id,52);for(p=g(t.imageStreams),h=p.next();!h.done;h=p.next())Vx(d,h.value);for(p=g(t.variants),h=p.next();!h.done;h=p.next())$x(d,h.value);return r=function(e,t,n,o){for(var i=new Map,r=sw(n),s=new Map,a=(r=g(r)).next();!a.done;a=r.next()){var l=nw(e,t,n,a=a.value,o,i);s.set(a.id,l)}for(e=g(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),Dh:Array.from(i.values())}}(r,d,t,i),i=r.streams,r=r.Dh,(d=e.g)&&s&&(d.initData=[]),{vk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Ud(),streams:i,sessionIds:s?Cr(e):[],drmInfo:d,appMetadata:o,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Dh:r}}(u,f,t,n,s,a,L),O=P.vk,N=P.Dh,S(j,d.bb.addManifests([O]),19);case 19:if(U=j.h,ow(e),p=U[0],ow(e),h)throw h;return S(j,function(e,t,n,o,i,r,s,a,l,u){var c,d,p,h,f,m,y,v,b,x,w;return D(function(C){switch(C.g){case 1:if(c={},d=0,p=function(){if(e.j.g||i.l)throw new je(2,9,7001)},h=function(e,t){var h,f,m,y,v,b,x,w,k;return D(function(C){if(1==C.g){for(h=g(e),f=h.next(),m={};!f.done;m={kc:void 0},f=h.next())m.kc=f.value,p(),y=Zb(m.kc,r),v=m.kc.i,b=m.kc.h,x=function(e){return function(t){var n,o,i,r;return D(function(a){switch(a.g){case 1:if(n=e.kc.g,o=n.Yb(!1),!n.aesKey||o){a.A(2);break}return S(a,su(t,n.aesKey,e.kc.j),3);case 3:t=a.h;case 2:return i=Qb(n),S(a,s.addSegments([{data:t}]),4);case 4:r=a.h,p(),c[i]=r[0],d+=t.byteLength,T(a)}})}}(m),w=m.kc.g,(k=w.Yb(!1))?rx(i,m.kc.groupId,k,v,b,x):i.queue(m.kc.groupId,y,v,b,x);return S(C,function(e){return D(function(t){return 1==t.g?S(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}(i),2)}return p(),!t||i.l?C.A(0):(Jx(a,o,l,u),S(C,s.updateManifest(n,o),0))})},f=!1,k(C,2),!Xx(a)||!f||Yx(a)){C.A(4);break}return S(C,h(t.filter(function(e){return e.h}),!0),5);case 5:return p(),t=t.filter(function(e){return!e.h}),m=c,y=d,c={},d=0,S(C,Kx(s,n,o,m,y,function(){return ow(e)}),6);case 6:p();case 4:if(f){C.A(7);break}return S(C,h(t,!1),8);case 8:return p(),v=c,b=d,c={},d=0,S(C,Kx(s,n,o,v,b,function(){return p()}),9);case 9:p();case 7:A(C,0);break;case 2:return x=I(C),w=Object.values(c),S(C,s.removeSegments(w,function(){}),10);case 10:throw x}})}(e,N,p,O,a,s,d.bb,f,u,L),20);case 20:return ow(e),Jx(f,O,u,L),S(j,d.bb.updateManifest(p,O),21);case 21:return ow(e),B=new Mx("manifest",d.path.Qb,d.path.bb,p),j.return(Fx(B,O));case 3:return E(j),S(j,c.destroy(),22);case 22:if(!l){j.A(23);break}return S(j,l.stop(),23);case 23:if(!u){j.A(25);break}return S(j,u.destroy(),25);case 25:M(j,0);break;case 2:if(F=I(j),null==p){j.A(27);break}return S(j,Wx(p),27);case 27:throw h||F}})}(this,e,t||{},o||[],i||[],function(){var t;return D(function(o){return 1==o.g?n?o.A(2):S(o,Cc(e,r.g,s.manifest.retryParameters),3):(2!=o.g&&(n=o.h),t=es(e,n||null),o.return(t()))})},s,a),(t=new Mi(t,function(){return ix(a)})).finally(function(){Z(r.l,a)}),function(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Z(e.i,n)})}(this,t)},i.remove=function(e){return rw(this,function(e,t){var n,o,i,r,s,a;return D(function(l){switch(l.g){case 1:if(iw(),null==(n=Rx(t))||"manifest"!=n.g)throw new je(2,9,9004,t);return o=n,i=new gx,C(l,2),S(l,i.init(),4);case 4:return S(l,vx(i,o.Qb(),o.bb()),5);case 5:return S(l,(r=l.h).getManifests([o.key()]),6);case 6:return s=l.h,a=s[0],S(l,Promise.all([Zx(e,a,i),ew(r,o,a)]),2);case 2:return E(l),S(l,i.destroy(),8);case 8:M(l,0)}})}(this,e))},i.Ok=function(){return rw(this,function(e){var t,n,o,i,r,s,a,l,u,c;return D(function(d){switch(d.g){case 1:return iw(),t=e.g,n=e.h.drm,o=new gx,i=!1,C(d,2),S(d,o.init(),4);case 4:r=[],function(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}(o,function(e){return r.push(e)}),s=g(r),a=s.next();case 5:if(a.done){d.A(2);break}return S(d,(l=a.value).getAll(),8);case 8:return u=d.h,S(d,Ux(n,t,u),9);case 9:return c=d.h,S(d,l.remove(c),10);case 10:c.length!=u.length&&(i=!0),a=s.next(),d.A(5);break;case 2:return E(d),S(d,o.destroy(),11);case 11:M(d,3);break;case 3:return d.return(!i)}})}(this))},i.list=function(){return rw(this,D(function(o){switch(o.g){case 1:return iw(),e=[],t=new gx,C(o,2),S(o,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,o){t({Qb:n,bb:o},e)})})}(t,function(t,o){n=n.then(function(){return D(function(n){if(1==n.g)return S(n,o.getAllManifests(),2);n.h.forEach(function(n,o){n=Fx(new Mx("manifest",t.Qb,t.bb,o),n),e.push(n)}),T(n)})})}),S(o,n,2);case 2:return E(o),S(o,t.destroy(),6);case 6:M(o,3);break;case 3:return o.return(e)}}));var e,t,n},i.md=function(e,t,n,o){var i,r=this;return D(function(s){return 1==s.g?((i=new br({tc:r.g,onError:t,uf:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(n.drm),S(s,function(e,t,n){return e.oa=!0,e.C=new Map,e.R=n,wr(e,t,!1)}(i,e.variants,o),2)):3!=s.g?S(s,Tr(i),3):s.return(i)})},$("shaka.offline.Storage",Gx),Gx.deleteAll=function(){var e;return D(function(t){return 1==t.g?(e=new gx,C(t,2),S(t,function(e){var t,n;return D(function(o){return 1==o.g?(t=Array.from(e.g.values()),(n=t.length>0)||xx.forEach(function(e){(e=e())&&t.push(e)}),S(o,Promise.all(t.map(function(e){return e.erase()})),2)):n?o.A(0):S(o,Promise.all(t.map(function(e){return e.destroy()})),0)})}(e),2)):5!=t.g?(E(t),S(t,e.destroy(),5)):M(t,0)})},Gx.prototype.list=Gx.prototype.list,Gx.prototype.removeEmeSessions=Gx.prototype.Ok,Gx.prototype.remove=Gx.prototype.remove,Gx.prototype.store=Gx.prototype.store,Gx.prototype.getNetworkingEngine=Gx.prototype.Wb,Gx.prototype.getConfiguration=Gx.prototype.getConfiguration,Gx.prototype.configure=Gx.prototype.configure,Gx.prototype.destroy=Gx.prototype.destroy,Gx.support=qx;var aw=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");function lw(){}function uw(e,t){for(e={priority:t||0,callback:e},t=0;t<pw.length;t++)if(pw[t].priority<e.priority)return void pw.splice(t,0,e);pw.push(e)}Yd("offline",qx),$("shaka.polyfill",lw),lw.register=uw,lw.installAll=function(){for(var e=g(pw),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){K("Error installing polyfill!",n)}}};var cw,dw,pw=[];function hw(){}function fw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=g(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())mw(t.value)}function mw(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function gw(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function yw(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(K("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function vw(e){if(!e)return!1;var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function bw(e,t){return!(e&&e!=t&&("cbcs"!=e&&"cbcs-1-9"!=e||!ae().ed()))}function xw(){}function ww(){ae().Kf()&&!cw&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(cw=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=Sw,navigator.emeEncryptionSchemePolyfilled=!0)}function Sw(e,t){var n,o=this;return D(function(i){return 1==i.g?S(i,cw.call(o,e,t),2):vw(n=i.h)?(navigator.requestMediaKeySystemAccess=cw,i.return(n)):(navigator.requestMediaKeySystemAccess=Tw,i.return(Tw.call(o,e,t)))})}function Tw(e,t){var n,o,i,r,s,a,l,u,c,d,p,h,f=this;return D(function(m){if(1==m.g){for(n=yw(e),o=[],i=g(t),r=i.next();!r.done;r=i.next())s=r.value,a=kw(s.videoCapabilities,n),l=kw(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!a.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||((u=Object.assign({},s)).videoCapabilities=a,u.audioCapabilities=l,o.push(u));if(!o.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return S(m,cw.call(f,e,o),2)}return d=m.h,h=p=null,o[0]&&(o[0].videoCapabilities&&(p=o[0].videoCapabilities[0].encryptionScheme),o[0].audioCapabilities&&(h=o[0].audioCapabilities[0].encryptionScheme)),m.return(new gw(d,p,h))})}function kw(e,t){return e?e.filter(function(e){return bw(e.encryptionScheme,t)}):e}function Cw(){}function Aw(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Iw),document.addEventListener("webkitfullscreenerror",Iw),document.addEventListener("mozfullscreenchange",Iw),document.addEventListener("mozfullscreenerror",Iw),document.addEventListener("MSFullscreenChange",Iw),document.addEventListener("MSFullscreenError",Iw)}}function Iw(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function Ew(){}function Mw(){ae().Kf()&&!dw&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(dw=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=Rw,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function Rw(e){var t,n,o=this;return D(function(i){switch(i.g){case 1:return S(i,dw.call(o,e),2);case 2:if(!(t=i.h).supported||!e.keySystemConfiguration)return i.return(t);if(vw(n=t.keySystemAccess))return navigator.mediaCapabilities.decodingInfo=dw,i.return(t);if(navigator.mediaCapabilities.decodingInfo=_w,n){i.A(3);break}return S(i,Lw(e),4);case 4:return t.keySystemAccess=i.h,i.return(t);case 3:return i.return(_w.call(o,e))}})}function _w(e){var t,n,o,i,r,s,a,l=this;return D(function(u){switch(u.g){case 1:return n=t=null,!e.keySystemConfiguration||(o=e.keySystemConfiguration,i=o.keySystem,n=o.audio&&o.audio.encryptionScheme,t=o.video&&o.video.encryptionScheme,r=yw(i),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},bw(n,r)&&bw(t,r))?S(u,dw.call(l,e),2):u.return(s);case 2:if((a=u.h).keySystemAccess){a.keySystemAccess=new gw(a.keySystemAccess,t,n),u.A(3);break}if(!e.keySystemConfiguration){u.A(3);break}return S(u,Lw(e),5);case 5:a.keySystemAccess=u.h;case 3:return u.return(a)}})}function Lw(e){var t,n;return D(function(o){if(1==o.g){var i=e.keySystemConfiguration,r=[],s=[];return i.audio&&r.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:i.audio.encryptionScheme}),i.video&&s.push({robustness:i.video.robustness||"",contentType:e.video.contentType,encryptionScheme:i.video.encryptionScheme}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},r.length&&(i.audioCapabilities=r),s.length&&(i.videoCapabilities=s),t=i,S(o,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=o.h,o.return(n)})}function Pw(){}function Dw(){ae().cc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Pw.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Ow)}function Ow(t){var n,o,i,r,s,a,l;return D(function(u){switch(u.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},ae(),o=t.video,i=t.audio,"media-source"!=t.type){if("file"!=t.type)return u.return(n);if(o&&(r=o.contentType,""==na().canPlayType(r))||i&&(s=i.contentType,""==na().canPlayType(s)))return u.return(n);u.A(2);break}if(!qy())return u.return(n);if(!o){u.A(3);break}return S(u,function(t){var n;return D(function(o){return 1==o.g?"CAST"!==ae().Oa()?o.A(2):S(o,function(t){var n,o,i,r;return D(function(s){if(1==s.g){if(!(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return s.return(yt(t.contentType));switch(n=t.contentType,t.width&&t.height&&t.width>1280&&t.height>720&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&((o=Math.round(t.framerate))<24||o>30)&&(n+="; framerate="+t.framerate),t.transferFunction||""){case"":case"srgb":break;case"pq":n+="; eotf=smpte2084";break;case"hlg":n+="; eotf=arib-std-b67";break;default:return s.return(!1)}return i=!1,(r=$w).has(n)?(i=r.get(n),s.A(2)):S(s,cast.__platform__.canDisplayType(n),3)}return 2!=s.g&&(i=s.h,r.set(n,i)),s.return(i)})}(t),3):2!=o.g?(n=o.h,o.return(n)):o.return(yt(t.contentType))})}(o),4);case 4:if(!u.h)return u.return(n);case 3:if(i){var c=ae().Oa(),d=i.contentType;if("CAST"===c&&i.spatialRendering&&(d+="; spatialRendering=true"),!yt(d))return u.return(n)}case 2:return t.keySystemConfiguration?(a=t.keySystemConfiguration,S(u,function(e,t,n){var o,i,r,s,a,l,u,c,d,p,h;return D(function(f){switch(f.g){case 1:if(o=[],i=[],n.audio&&(r={robustness:n.audio.robustness||"",contentType:t.contentType},ae().si()&&t.contentType.includes('codecs="ac-3"')&&(r.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(r.encryptionScheme=n.audio.encryptionScheme),o.push(r)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme),i.push(s)),a={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},o.length&&(a.audioCapabilities=o),i.length&&(a.videoCapabilities=i),l=e?e.contentType:"",u=t?t.contentType:"",c=uo(l)+";"+lo(l),d=uo(u)+";"+lo(u),p=n.keySystem,h=null,k(f,2),ki.has(c+"#"+d+"#"+p)){h=ki.get(c+"#"+d+"#"+p)||null,f.A(4);break}return S(f,navigator.requestMediaKeySystemAccess(n.keySystem,[a]),5);case 5:h=f.h,ki.set(c+"#"+d+"#"+p,h);case 4:A(f,3);break;case 2:I(f);case 3:return f.return(h)}})}(o,i,a),6)):(n.supported=!0,u.return(n));case 6:(l=u.h)&&(n.supported=!0,n.keySystemAccess=l);case 5:return u.return(n)}})}lw.Aria=hw,hw.install=fw,uw(fw),gw.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=g(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(n=(t=g(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},gw.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},lw.EmeEncryptionScheme=xw,xw.install=ww,uw(ww),lw.Fullscreen=Cw,Cw.install=Aw,uw(Aw),lw.MCapEncryptionScheme=Ew,Ew.install=Mw,uw(Mw,-2),lw.MediaCapabilities=Pw,Pw.install=Dw,Pw.originalMcap=null;var Nw,Uw,Bw,Fw,jw,zw,$w=new Map;function Vw(){}function Hw(){var t=ae(),n="WEBKIT"===t.Ea()?t.za():null;for((e.MediaSource||e.ManagedMediaSource)&&n&&e.MediaSource&&(n<=12?(Gw(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):n<=15&&Gw()),n=(t=g(t.Ei())).next();!n.done;n=t.next())qw(n.value);(e.MediaSource||e.ManagedMediaSource)&&function(){if(e.MediaSource){var t=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(e){return"mp2t"!=so(e)&&t(e)}}if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=so(e)&&n(e)}}}(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;ae().$i()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),o=n.findIndex(function(e){return e.startsWith("codecs=")});if(o<0)return e(t);var i=n[o].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),r=i.findIndex(function(e){return e.startsWith("vp09")});return r>=0&&(i[r]="vp9",n[o]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}()}function Gw(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,O.apply(0,arguments));return t.abort=function(){},t}}function qw(t){var n=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return lo(e)!=t&&n(e)},e.ManagedMediaSource){var o=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return lo(e)!=t&&o(e)}}}function Ww(){}function Kw(){screen.orientation&&screen.orientation.unlock||(null!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Xw;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new Oi("change");n.dispatchEvent(e)})}())}function Xw(){Bi.call(this),this.type="",this.angle=0}function Yw(){}function Jw(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&e.shakaMediaKeysPolyfill!=aS&&(void 0!==t&&t&&(Nw=!0,Uw=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Bw=HTMLMediaElement.prototype.setMediaKeys,Fw=e.MediaKeys,jw=e.MediaKeySystemAccess,zw=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Zw,e.MediaKeys=nS,e.MediaKeySystemAccess=tS,navigator.requestMediaKeySystemAccess=Qw,e.shakaMediaKeysPolyfill=aS,ci.clear(),ki.clear())}function Qw(e,t){try{var n=new tS(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function Zw(e){var t=this.mediaKeys;return t&&t!=e&&oS(t,null),delete this.mediaKeys,(this.mediaKeys=e)?oS(e,this):Promise.resolve()}function eS(e){if(Be(e=Ne(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ge(e=Ve(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Oe(e),this.dispatchEvent(t)}function tS(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=g(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var o=!1,i=!1;if(n.audioCapabilities)for(var r=g(n.audioCapabilities),s=r.next();!s.done;s=r.next())(s=s.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),i=!0));if(n.videoCapabilities)for(r=(n=g(n.videoCapabilities)).next();!r.done;r=n.next())(r=r.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,r.contentType.split(";")[0])&&(t.videoCapabilities.push(r),i=!0));o||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function nS(e){this.h=new WebKitMediaKeys(e),this.g=new oe}function oS(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",eS);try{return ml(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function iS(e){Bi.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new oe,this.sessionId="",this.expiration=NaN,this.closed=new Ei,this.keyStatuses=new sS,this.onkeystatuseschange=null}function rS(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new Oi("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function sS(){this.size=0,this.g=void 0}uw(Dw,-1),lw.MediaSource=Vw,Vw.install=Hw,uw(Hw),lw.Orientation=Ww,Ww.install=Kw,f(Xw,Bi),Xw.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Xw.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},uw(Kw),lw.PatchedMediaKeysApple=Yw,Yw.uninstall=function(){e.shakaMediaKeysPolyfill==aS&&Nw&&(Nw=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Uw),HTMLMediaElement.prototype.setMediaKeys=Bw,e.MediaKeys=Fw,e.MediaKeySystemAccess=jw,navigator.requestMediaKeySystemAccess=zw,Uw=zw=Bw=jw=Fw=null,e.shakaMediaKeysPolyfill="",ci.clear(),ki.clear())},Yw.install=Jw,tS.prototype.createMediaKeys=function(){var e=new nS(this.keySystem);return Promise.resolve(e)},tS.prototype.getConfiguration=function(){return this.g},nS.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new iS(this.h)},nS.prototype.setServerCertificate=function(){return Promise.resolve(!1)},nS.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},f(iS,Bi),(i=iS.prototype).generateRequest=function(e,t){var n=this;this.h=new Ei;try{var o=this.l.createSession("video/mp4",Ne(t));this.i=o,this.sessionId=o.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(e){n.h&&(n.h.resolve(),n.h=null),e=new Oi("message",e=(new Map).set("messageType",null==n.keyStatuses.Kc()?"license-request":"license-renewal").set("message",Oe(e.message))),n.dispatchEvent(e)}),this.j.D(o,"webkitkeyadded",function(){n.g&&(rS(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(o,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:rS(n,"output-not-allowed");break;default:rS(n,"internal-error")}}),rS(this,"status-pending")}catch(i){this.h.reject(i)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new Ei;try{this.i.update(Ne(e))}catch(t){this.g.reject(t)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(Tk){this.closed.reject(Tk)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=sS.prototype).Kc=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Ti.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Ti.value();return!(!this.g||!De(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var aS="apple";function lS(){}function uS(){if(e.MediaKeys){var t=ae();MediaKeys.prototype.setServerCertificate&&t.pe()||(MediaKeys.prototype.setServerCertificate=cS)}}function cS(){return Promise.resolve(!1)}function dS(){}function pS(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)CS="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=fS,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=mS,e.MediaKeys=yS,e.MediaKeySystemAccess=gS,e.shakaMediaKeysPolyfill=AS}}function hS(e){return CS?CS+e.charAt(0).toUpperCase()+e.slice(1):e}function fS(e,t){try{var n=new gS(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function mS(e){var t=this.mediaKeys;return t&&t!=e&&vS(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&vS(e,this),Promise.resolve()}function gS(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var o=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var r=(t=g(t)).next();!r.done;r=t.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(r=r.value).initDataTypes,sessionTypes:["temporary"],label:r.label},a=!1;if(r.audioCapabilities)for(var l=g(r.audioCapabilities),u=l.next();!u.done;u=l.next())(u=u.value).contentType&&(a=!0,i.canPlayType(u.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(u),o=!0));if(r.videoCapabilities)for(u=(l=g(r.videoCapabilities)).next();!u.done;u=l.next())(u=u.value).contentType&&(a=!0,i.canPlayType(u.contentType,this.g)&&(s.videoCapabilities.push(u),o=!0));if(a||(o=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==r.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):o=!1),o)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function yS(e){this.l=e,this.h=null,this.g=new oe,this.i=[],this.j=new Map}function vS(e,t){e.h=t,e.g.Qa();var n=CS;t&&(e.g.D(t,n+"needkey",function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Oe(t.initData),e.h.dispatchEvent(n)}),e.g.D(t,n+"keymessage",function(t){var n=bS(e,t.sessionId);n&&(t=new Oi("message",t=(new Map).set("messageType",null==n.keyStatuses.Kc()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))}),e.g.D(t,n+"keyadded",function(t){(t=bS(e,t.sessionId))&&t.ready()}),e.g.D(t,n+"keyerror",function(t){var n=bS(e,t.sessionId);if(n){var o=Error("EME v0.1b key error"),i=t.errorCode;i.systemCode=t.systemCode,o.errorCode=i,!t.sessionId&&n.h?(45==t.systemCode&&(o.message="Unsupported session type."),n.h.reject(o),n.h=null):t.sessionId&&n.g?(n.g.reject(o),n.g=null):(o=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?TS(n,"output-restricted"):TS(n,1==o?"expired":"internal-error"))}}))}function bS(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function xS(e,t,n){Bi.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Ei,this.keyStatuses=new kS,this.onkeystatuseschange=null}function wS(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var o=Ne(Ge("LOAD_SESSION|"+n));else{var i=Ge("PERSISTENT|");o=nt(i,t)}else o=Ne(t)}catch(s){return Promise.reject(s)}e.h=new Ei;var r=hS("generateKeyRequest");try{e.j[r](e.i,o)}catch(s){if("InvalidStateError"!=s.name)return e.h=null,Promise.reject(s);new To(function(){try{e.j[r](e.i,o)}catch(t){e.h.reject(t),e.h=null}}).ka(.01)}return e.h}function SS(e,t,n){if(e.g)e.g.then(function(){return SS(e,t,n)}).catch(function(){return SS(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var o=$e(n),i=JSON.parse(o);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),o=Ze(i.keys[0].k),i=Ze(i.keys[0].kid)}else o=Ne(n),i=null;var r=hS("addKey");try{e.j[r](e.i,o,i,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function TS(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new Oi("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function kS(){this.size=0,this.g=void 0}uw(function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||Jw())}),lw.PatchedMediaKeysCert=lS,lS.install=uS,uw(uS),lw.PatchedMediaKeysWebkit=dS,dS.install=pS,gS.prototype.createMediaKeys=function(){var e=new yS(this.g);return Promise.resolve(e)},gS.prototype.getConfiguration=function(){return this.h},yS.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new xS(t,this.l,e),this.i.push(e),e},yS.prototype.setServerCertificate=function(){return Promise.resolve(!1)},yS.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},f(xS,Bi),(i=xS.prototype).ready=function(){TS(this,"usable"),this.g&&this.g.resolve(),this.g=null},i.generateRequest=function(e,t){return wS(this,t,null)},i.load=function(e){return"persistent-license"==this.l?wS(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new Ei;return SS(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=hS("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=kS.prototype).Kc=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Ti.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Ti.value();return!(!this.g||!De(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var CS="",AS="webkit";function IS(){}function ES(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=RS,Object.defineProperty(t,"disablePictureInPicture",{get:LS,set:PS,enumerable:!0,configurable:!0}),document.exitPictureInPicture=_S,document.addEventListener("webkitpresentationmodechanged",MS,!0))}}function MS(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function RS(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function _S(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function LS(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function PS(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function DS(){}function OS(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=NS))}function NS(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function US(){}function BS(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:FS})}function FS(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function jS(){}function zS(){for(var e=g([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())(t=t.value).prototype.indexOf||(t.prototype.indexOf=$S),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=VS),t.prototype.includes||(t.prototype.includes=HS)}function $S(e,t){return Array.prototype.indexOf.call(this,e,t)}function VS(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function HS(e,t){return-1!==this.indexOf(e,t)}function GS(){}function qS(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function WS(){}function KS(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||"number"==typeof na().webkitDroppedFrameCount)&&(t.getVideoPlaybackQuality=XS)}}function XS(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function YS(){}function JS(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=QS;else if(6==n)t=ZS;else{try{var o=!!QS(1,2,"")}catch(i){o=!1}o&&(t=QS)}t&&(e.VTTCue=function(e,n,o){return t(e,n,o)})}}function QS(t,n,o){return new e.TextTrackCue(t,n,o)}function ZS(t,n,o){return new e.TextTrackCue(t+"-"+n+"-"+o,t,n,o)}function eT(e){Bi.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new oe}function tT(){}uw(pS),lw.PiPWebkit=IS,IS.install=ES,uw(ES),lw.RandomUUID=DS,DS.install=OS,uw(OS),lw.Symbol=US,US.install=BS,uw(BS),lw.TypedArray=jS,jS.install=zS,uw(zS),lw.VideoPlayPromise=GS,GS.install=qS,uw(qS),lw.VideoPlaybackQuality=WS,WS.install=KS,uw(KS),lw.VTTCue=YS,YS.install=JS,uw(JS),f(eT,Bi),(i=eT.prototype).destroy=function(){var e=this;return D(function(t){if(1==t.g)return S(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),Bi.prototype.release.call(e),T(t)})},i.configure=function(e){this.m=e},i.getConfiguration=function(){return this.m},i.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},i.getCurrentItemIndex=function(){return this.j},i.getItems=function(){return this.h.slice()},i.insertItems=function(e){this.h.push.apply(this.h,y(e)),this.dispatchEvent(new Oi("itemsinserted"))},i.removeAllItems=function(){var e,t,n,o,i=this;return D(function(r){if(1==r.g)return i.o.Qa(),i.h.length&&i.j>=0?S(r,i.g.Bc(),2):r.A(2);if(4!=r.g){for(e=[],i.i&&(i.i.preloadManager.j||e.push(i.i.preloadManager.destroy()),i.i=null),i.l&&(i.l.preloadManager.j||e.push(i.l.preloadManager.destroy()),i.l=null),t=g(i.h),n=t.next();!n.done;n=t.next())(o=n.value).preloadManager&&!o.preloadManager.j&&e.push(o.preloadManager.destroy());return e.length?S(r,Promise.all(e),4):r.A(4)}i.h=[],i.j=-1,i.dispatchEvent(new Oi("itemsremoved")),T(r)})},i.playItem=function(e){var t,n,o,i,r,s,a,l,u,c,d,p,h,f,m,y,v,b=this;return D(function(x){switch(x.g){case 1:if(b.o.Qa(),!b.h.length||e>=b.h.length)throw new je(2,7,7007);if(t=b.getCurrentItem(),n=b.h[e],b.j!=e&&(b.j=e,b.dispatchEvent(new Oi("currentitemchanged"))),o=b.g.h,(i=b.m?b.m.preloadNextUrlWindow:0)>0&&(r=!1,b.o.D(o,"timeupdate",function(){var e,t,n,s;return D(function(a){switch(a.g){case 1:if(b.l||b.h.length<=1||r||b.g.W()||!o.duration)return a.return();if(e=b.g.Va().end-o.currentTime,isNaN(e)){a.A(0);break}if(!(e<=i)){a.A(0);break}if(t=b.m&&b.m.repeatMode,n=null,b.j+1<b.h.length?n=b.h[b.j+1]:1==t&&(n=b.h[0]),!n||n.preloadManager&&!n.preloadManager.j){a.A(0);break}return r=!0,s=null,k(a,5),S(a,b.g.preload(n.manifestUri,n.startTime,n.mimeType,n.config),7);case 7:s=a.h,A(a,6);break;case 5:I(a),s=null;case 6:b.l={item:n,preloadManager:s},r=!1,T(a)}})})),b.o.D(b.g,"complete",function(){var e=b.m&&b.m.repeatMode,t=!1;if(2==e)t=!0;else{var n=b.j+1;n<b.h.length?b.playItem(n):1==e&&(1==b.h.length?t=!0:b.playItem(0))}t&&(o.paused?(o.currentTime=b.g.Va().start,o.play()):b.o.D(o,"paused",function(){o.currentTime=b.g.Va().start,o.play()}))}),s=n.manifestUri,n.preloadManager&&!n.preloadManager.j&&(s=n.preloadManager),a=!1,b.l&&b.l.item==n&&b.l.preloadManager?s=b.l.preloadManager:b.i&&b.i.item==n&&b.i.preloadManager&&(s=b.i.preloadManager,a=!0),!b.i){x.A(2);break}if(a||b.i.preloadManager.j){x.A(3);break}return S(x,b.i.preloadManager.destroy(),3);case 3:b.i=null;case 2:if(!(b.m&&b.m.preloadPrevItem&&t&&b.g.m===Zp)){x.A(5);break}return l=null,k(x,6),S(x,b.g.dj(),8);case 8:l=x.h,A(x,7);break;case 6:I(x),l=null;case 7:b.i={item:t,preloadManager:l};case 5:return n.config&&(b.g.Ii(),b.g.configure(n.config)),S(x,b.g.load(s,n.startTime,n.mimeType),9);case 9:if(b.l=null,n.extraText)for(u=g(n.extraText),c=u.next();!c.done;c=u.next())(d=c.value).mime?b.g.Md(d.uri,d.language,d.kind,d.mime,d.codecs):b.g.Md(d.uri,d.language,d.kind);if(n.extraThumbnail)for(p=g(n.extraThumbnail),h=p.next();!h.done;h=p.next())f=h.value,b.g.Le(f);if(n.extraChapter)for(m=g(n.extraChapter),y=m.next();!y.done;y=m.next())v=y.value,b.g.Ke(v.uri,v.language,v.mime);T(x)}})},$("shaka.queue.QueueManager",eT),eT.prototype.playItem=eT.prototype.playItem,eT.prototype.removeAllItems=eT.prototype.removeAllItems,eT.prototype.insertItems=eT.prototype.insertItems,eT.prototype.getItems=eT.prototype.getItems,eT.prototype.getCurrentItemIndex=eT.prototype.getCurrentItemIndex,eT.prototype.getCurrentItem=eT.prototype.getCurrentItem,eT.prototype.getConfiguration=eT.prototype.getConfiguration,eT.prototype.configure=eT.prototype.configure,eT.prototype.destroy=eT.prototype.destroy,ih=function(e){return new eT(e)},tT.prototype.parseInit=function(){},tT.prototype.setSequenceMode=function(){},tT.prototype.setManifestType=function(){},tT.prototype.parseMedia=function(e,t){for(var n=null,o=[],i=(e=g(e=$e(e).split(/\r?\n/))).next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=nT.exec(i))){var r=oT.exec(i[1]);i=new Sn(r=60*parseInt(r[1],10)+parseFloat(r[2].replace(",",".")),t.segmentEnd?t.segmentEnd:r+2,i[2]),n&&(n.endTime=r,o.push(n)),n=i}return n&&o.push(n),o},$("shaka.text.LrcTextParser",tT),tT.prototype.parseMedia=tT.prototype.parseMedia,tT.prototype.setManifestType=tT.prototype.setManifestType,tT.prototype.setSequenceMode=tT.prototype.setSequenceMode,tT.prototype.parseInit=tT.prototype.parseInit;var nT=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,oT=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function iT(){this.g="UNKNOWN"}function rT(e,t,n,o,i,r,s,a,l,u,c,d,p,h){var f=c;if(qt(t)){if(!d)return null;var m={tagName:"span",children:[Xt(t)],attributes:{},parent:null}}else m=t;for(var y=null,v=g(PT),b=v.next();!b.done&&!(y=hT(m,"backgroundImage",i,"#",b.value)[0]);b=v.next());v=null;var x=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if((b=on(m,PT,"backgroundImage"))&&x.test(b)){if((v=parseInt(b.split(":").pop(),10)-1)>=h.length)return null;v=h[v]}else p&&b&&!b.startsWith("#")&&(x=new ye(p),b=new ye(b),(b=x.resolve(b).toString())&&(v=b));if(("p"==t.tagName||y||v)&&(d=!0),t=d,b="default"==(m.attributes["xml:space"]||(l?"default":"preserve")),l=[],!(x=m.children.every(qt)))for(var w=g(m.children),S=w.next();!S.done;S=w.next())(S=rT(e,S.value,n,o,i,r,s,a,b,u,m,d,p,h))&&l.push(S);if(i=null!=c,p=Xt(m),p=m.children.length&&p&&/\S/.test(p),!((w=m.attributes.begin||m.attributes.end||m.attributes.dur)||p||"br"==m.tagName||0!=l.length||i&&!b))return null;for(p=(h=mT(m,o)).start,h=h.end;f&&f.tagName&&"tt"!=f.tagName;)p=(h=fT(f,o,p,h)).start,h=h.end,f=f.parent;if(null==p&&(p=0),p+=n.periodStart,h=null==h?1/0:h+n.periodStart,"HLS"!==e.g&&(p=Math.max(p,n.segmentStart),h=Math.min(h,n.segmentEnd)),!w&&l.length>0)for(p=1/0,h=0,o=(n=g(l)).next();!o.done;o=n.next())o=o.value,p=Math.min(p,o.startTime),h=Math.max(h,o.endTime);if("br"==m.tagName)return(e=new Sn(p,h,"")).lineBreak=!0,e;if(n="",x&&(n=Ke(Xt(m)||""),b&&(n=n.replace(/\s+/g," "))),(n=new Sn(p,h,n)).nestedCues=l,d||(n.isContainer=!0),u&&(n.cellResolution=u),u=hT(m,"region",s,"")[0],m.attributes.region&&u&&u.attributes["xml:id"]){var T=u.attributes["xml:id"];n.region=a.filter(function(e){return e.id==T})[0]}return a=u,c&&i&&!m.attributes.region&&!m.attributes.style&&(a=hT(c,"region",s,"")[0]),function(e,t,n,o,i,r,s,a,l){if("rtl"==uT(e,n,o,s,"direction",a=a||l)&&(t.direction="rtl"),"tb"==(l=uT(e,n,o,s,"writingMode",a))||"tblr"==l?t.writingMode="vertical-lr":"tbrl"==l?t.writingMode="vertical-rl":"rltb"==l||"rl"==l?t.direction="rtl":l&&(t.direction=Dn),(l=uT(e,n,o,s,"textAlign",!0))?(t.positionAlign=RT.get(l),t.lineAlign=MT.get(l),t.textAlign=_n[l.toUpperCase()]):t.textAlign=Rn,(l=uT(e,n,o,s,"displayAlign",!0))&&(t.displayAlign=Pn[l.toUpperCase()]),(l=uT(e,n,o,s,"color",a))&&(t.color=aT(l)),(l=uT(e,n,o,s,"backgroundColor",a))&&(t.backgroundColor=aT(l)),(l=uT(e,n,o,s,"border",a))&&(t.border=l),l=uT(e,n,o,s,"fontFamily",a))switch(l){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=l.split(",").filter(function(e){return"default"!=e}).join(",")}switch((l=uT(e,n,o,s,"fontWeight",a))&&"bold"==l&&(t.fontWeight=$n),l=uT(e,n,o,s,"wrapOption",a),t.wrapLine=!l||"noWrap"!=l,(l=uT(e,n,o,s,"lineHeight",a))&&l.match(wT)&&(t.lineHeight=l),(l=uT(e,n,o,s,"fontSize",a))&&(l.match(wT)||l.match(xT))&&(t.fontSize=l),(l=uT(e,n,o,s,"fontStyle",a))&&(t.fontStyle=Gn[l.toUpperCase()]),i?(r=i.attributes.imageType||i.attributes.imagetype,l=i.attributes.encoding,i=Xt(i).trim(),"PNG"==r&&"Base64"==l&&i&&(t.backgroundImage="data:image/png;base64,"+i)):r&&(t.backgroundImage=r),(i=uT(e,n,o,s,"textOutline",a))&&((i=i.split(" "))[0].match(wT)?t.textStrokeColor=t.color:(t.textStrokeColor=aT(i[0]),i.shift()),i[0]&&i[0].match(wT)?t.textStrokeWidth=i[0]:t.textStrokeColor=""),(i=uT(e,n,o,s,"letterSpacing",a))&&i.match(wT)&&(t.letterSpacing=i),(i=uT(e,n,o,s,"linePadding",a))&&i.match(wT)&&(t.linePadding=i),(i=uT(e,n,o,s,"opacity",a))&&(t.opacity=parseFloat(i)),(i=cT(e,o,s,"textDecoration"))&&lT(t,i),(i=dT(e,n,s,"textDecoration"))&&lT(t,i),(i=uT(e,n,o,s,"textCombine",a))&&(t.textCombineUpright=i),uT(e,n,o,s,"ruby",a)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}(e,n,m,a,y,v,r,t,0==l.length),n}function sT(e,t,n,o){var i=new Mt,r=t.attributes["xml:id"];if(!r)return null;i.id=r,r=null,o&&(r=bT.exec(o)||ST.exec(o)),o=r?Number(r[1]):null,r=r?Number(r[2]):null;var s,a=cT(e,t,n,"extent");if(a){var l=(s=bT.exec(a))||ST.exec(a);null!=l&&(i.width=Number(l[1]),i.height=Number(l[2]),s||(null!=o&&(i.width=100*i.width/o),null!=r&&(i.height=100*i.height/r)),i.widthUnits=s||null!=o?Rt:0,i.heightUnits=s||null!=r?Rt:0)}return(e=cT(e,t,n,"origin"))&&null!=(l=(s=bT.exec(e))||ST.exec(e))&&(i.viewportAnchorX=Number(l[1]),i.viewportAnchorY=Number(l[2]),s?a||(i.width=100-i.viewportAnchorX,i.widthUnits=Rt,i.height=100-i.viewportAnchorY,i.heightUnits=Rt):(null!=r&&(i.viewportAnchorY=100*i.viewportAnchorY/r),null!=o&&(i.viewportAnchorX=100*i.viewportAnchorX/o)),i.viewportAnchorUnits=s||null!=o?Rt:0),i}function aT(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&4==(t=t[1].split(",")).length?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function lT(e,t){for(var n=(t=g(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(qn)||e.textDecoration.push(qn);break;case"noUnderline":e.textDecoration.includes(qn)&&Z(e.textDecoration,qn);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Z(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Z(e.textDecoration,"overline")}}function uT(e,t,n,o,i,r){return r=void 0===r||r,(t=dT(e,t,o,i))?t:r?cT(e,n,o,i):null}function cT(e,t,n,o){if(!t)return null;var i=on(t,LT,o);return i||pT(e,t,n,o)}function dT(e,t,n,o){var i=on(t,LT,o);return i||pT(e,t,n,o)}function pT(e,t,n,o){t=hT(t,"style",n,"");for(var i=null,r=0;r<t.length;r++){var s=tn(t[r],"urn:ebu:tt:style",o);s||(s=on(t[r],LT,o)),s||(s=dT(e,t[r],n,o)),s&&(i=s)}return i}function hT(e,t,n,o,i){var r=[];if(!e||n.length<1)return r;var s=e;for(e=null;!e&&!(e=i?tn(s,i,t):s.attributes[t])&&(s=s.parent););if(t=e)for(i=(t=g(t.split(" "))).next();!i.done;i=t.next())for(i=i.value,s=(e=g(n)).next();!s.done;s=e.next())if(o+(s=s.value).attributes["xml:id"]==i){r.push(s);break}return r}function fT(e,t,n,o){return e=mT(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==o?o=e.end:null!=e.start&&(o+=e.start),{start:n,end:o}}function mT(e,t){var n=gT(e.attributes.begin,t),o=gT(e.attributes.end,t);return e=gT(e.attributes.dur,t),null==o&&null!=e&&(o=n+e),{start:n,end:o}}function gT(e,t){var n=null;if(TT.test(e)){e=TT.exec(e),n=Number(e[1]);var o=Number(e[2]),i=Number(e[3]),r=Number(e[4]);n=(i+=(r+=(Number(e[5])||0)/t.h)/t.frameRate)+60*o+3600*n}else if(kT.test(e))n=yT(kT,e);else if(CT.test(e))n=yT(CT,e);else if(AT.test(e))e=AT.exec(e),n=Number(e[1])/t.frameRate;else if(IT.test(e))e=IT.exec(e),n=Number(e[1])/t.g;else if(ET.test(e))n=yT(ET,e);else if(e)throw new je(2,2,2001,"Could not parse cue time range in TTML");return n}function yT(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function vT(e,t,n,o){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(o),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}go("application/x-subtitle-lrc",function(){return new tT}),iT.prototype.parseInit=function(){},iT.prototype.setSequenceMode=function(){},iT.prototype.setManifestType=function(e){this.g=e},iT.prototype.parseMedia=function(e,t,n,o){var i=$e(e);if(e=[],""==i)return e;var r=Ht(i,"tt",!0);if(!r)throw new je(2,2,2005,"Failed to parse TTML.");if(!(i=Jt(r,"body")[0]))return[];var s=on(r,_T,"frameRate"),a=on(r,_T,"subFrameRate"),l=on(r,_T,"frameRateMultiplier"),u=on(r,_T,"tickRate"),c=on(r,_T,"cellResolution"),d=r.attributes["xml:space"]||"default",p=on(r,LT,"extent");if("default"!=d&&"preserve"!=d)throw new je(2,2,2005,"Invalid xml:space value: "+d);d="default"==d,s=new vT(s,a,l,u),c=function(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}(c),a=((a=Jt(r,"metadata")[0])?a.children:[]).filter(function(e){return"\n"!=e}),l=Jt(r,"style"),u=[];for(var h=g(r=Jt(r,"region")),f=h.next();!f.done;f=h.next())(f=sT(this,f.value,l,p))&&u.push(f);if(Kt(i,"p").length)throw new je(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(p=g(Kt(i,"div"))).next();!h.done;h=p.next())if(Kt(h.value,"span").length)throw new je(2,2,2001,"<span> can only be inside <p> in TTML");return(t=rT(this,i,t,s,a,l,r,u,d,c,null,!1,n,o))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},$("shaka.text.TtmlTextParser",iT),iT.prototype.parseMedia=iT.prototype.parseMedia,iT.prototype.setManifestType=iT.prototype.setManifestType,iT.prototype.setSequenceMode=iT.prototype.setSequenceMode,iT.prototype.parseInit=iT.prototype.parseInit;var bT=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,xT=/^(\d{1,4}(?:\.\d+)?|100)%$/,wT=/^(\d+px|\d+em|\d*\.?\d+c)$/,ST=/^(\d+)px (\d+)px$/,TT=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,kT=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,CT=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,AT=/^(\d*(?:\.\d*)?)f$/,IT=/^(\d*(?:\.\d*)?)t$/,ET=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),MT=(new Map).set("left",Un).set("center","center").set("right","end").set("start",Un).set("end","end"),RT=(new Map).set("left","line-left").set("center","center").set("right","line-right"),_T=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],LT=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],PT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function DT(){this.g=new iT}function OT(){this.g="UNKNOWN"}function NT(e,t,n){var o;(o=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=o[1],e.textAlign="middle"==t?Rn:_n[t.toUpperCase()]):(o=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==o[1]?"vertical-lr":"vertical-rl":(o=/^size:([\d.]+)%$/.exec(t))?e.size=Number(o[1]):(o=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(o[1]),o[2]&&(t=o[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":Mn)):(o=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:null}(n,o[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Bn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Nn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Bn[n[2].toUpperCase()]))}function UT(){this.g=null}function BT(e,t,n){var o,i,r;return(new sr).box("payl",dr(function(e){o=$e(e)})).box("iden",dr(function(e){i=$e(e)})).box("sttg",dr(function(e){r=$e(e)})).parse(e),o?function(e,t,n,o,i){if(Cn(e=new Sn(o,i,e)),t&&(e.id=t),n)for(t=new Lt(n),n=Ot(t);n;)NT(e,n,[]),Pt(t),n=Ot(t);return e}(o,i,r,t,n):null}function FT(){}function jT(){this.g=new OT}function zT(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=g((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function $T(){}function VT(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=HT(n))&&(e.color=n),(n=t.BackColour)&&(n=HT(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=$n),t.Italic&&(e.fontStyle=Hn),t.Underline&&e.textDecoration.push(qn),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Ln,e.textAlign="start";break;case 2:e.displayAlign=Ln,e.textAlign=Rn;break;case 3:e.displayAlign=Ln,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Rn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Rn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function HT(e){return(e=parseInt(e.replace("&H",""),16))>=0?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function GT(e){return 3600*((e=XT.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}go("application/ttml+xml",function(){return new iT}),DT.prototype.parseInit=function(e){var t=!1;if((new sr).box("moov",ar).box("trak",ar).box("mdia",ar).box("minf",ar).box("stbl",ar).T("stsd",lr).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new je(2,2,2007)},DT.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},DT.prototype.setManifestType=function(e){this.g.setManifestType(e)},DT.prototype.parseMedia=function(e,t,n){var o=[],i=null,r=[],s=new Map,a=[];if((new sr).box("moof",ar).box("traf",ar).T("tfhd",function(e){i=is(e.reader,e.flags).Sd}).T("trun",function(e){for(var t=(e=g((e=as(e.reader,e.version,e.flags)).ih)).next();!t.done;t=e.next())a.push(t.value.sampleSize||i||0)}).T("subs",function(e){for(var t=e.reader,n=t.U(),o=-1,i=0;i<n;i++){var r=t.U();o+=r,r=t.Ba();for(var a=[],l=0;l<r;l++)1==e.version?a.push(t.U()):a.push(t.Ba()),t.Y(),t.Y(),t.U();s.set(o,a)}}).box("mdat",dr(function(e){r.push(e)})).parse(e,!1),0==r.length)throw new je(2,2,2007);for(var l=nt.apply(Ye,y(r)),u=0,c=0;c<a.length;c++){var d=Ne(l,u,a[c]);u+=a[c];var p=s.get(c);if(p&&p.length){d=Ne(d,0,p[0]);for(var h=[],f=p[0],m=1;m<p.length;m++){var v=Ne(e,f,p[m]);v=Je(v),h.push("data:image/png;base64,"+v),f+=p[m]}o=o.concat(this.g.parseMedia(d,t,n,h))}else o=o.concat(this.g.parseMedia(d,t,n,[]))}return o},$("shaka.text.Mp4TtmlParser",DT),DT.prototype.parseMedia=DT.prototype.parseMedia,DT.prototype.setManifestType=DT.prototype.setManifestType,DT.prototype.setSequenceMode=DT.prototype.setSequenceMode,DT.prototype.parseInit=DT.prototype.parseInit,go('application/mp4; codecs="stpp"',function(){return new DT}),go('application/mp4; codecs="stpp.ttml"',function(){return new DT}),go('application/mp4; codecs="stpp.ttml.im1i"',function(){return new DT}),go('application/mp4; codecs="stpp.ttml.im1t"',function(){return new DT}),go('application/mp4; codecs="stpp.ttml.im2i"',function(){return new DT}),go('application/mp4; codecs="stpp.ttml.im2t"',function(){return new DT}),go('application/mp4; codecs="stpp.ttml.etd1"',function(){return new DT}),go('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new DT}),go('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new DT}),go('application/mp4; codecs="stpp.TTML.im1t"',function(){return new DT}),OT.prototype.parseInit=function(){},OT.prototype.setSequenceMode=function(){},OT.prototype.setManifestType=function(e){this.g=e},OT.prototype.parseMedia=function(e,t){var n=(e=(e=$e(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new je(2,2,2e3);if(e=t.vttOffset,"HLS"==this.g)if(n[0].includes("X-TIMESTAMP-MAP")){var o=n[0];if(e=o.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=o.match(/MPEGTS:(\d+)/m),!e||!o)throw new je(2,2,2e3);if(null==(e=Ut(e[1])))throw new je(2,2,2e3);o=Number(o[1]);for(var i=t.segmentStart-t.periodStart;i>=95443.7176888889;)i-=95443.7176888889,o+=8589934592;e=t.periodStart+o/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],i=(o=g(n[0].split("\n"))).next();!i.done;i=o.next())if(i=i.value,/^Region:/.test(i)){i=new Lt(i);var r=new Mt;Ot(i),Pt(i);for(var s=Ot(i);s;){var a=r,l=s;(s=/^id=(.*)$/.exec(l))?a.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(l))?a.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(l))?(a.height=Number(s[1]),a.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(a.regionAnchorX=Number(s[1]),a.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(a.viewportAnchorX=Number(s[1]),a.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(l)&&(a.scroll="up"),Pt(i),s=Ot(i)}t.push(r)}for(An(o=new Map),i=[],r=(n=g(n.slice(1))).next();!r.done;r=n.next()){if((1!=(r=r.value.split("\n")).length||r[0])&&!/^NOTE($|[ \t])/.test(r[0])&&"STYLE"==r[0]){for(a=[],s=-1,l=1;l<r.length;l++)r[l].includes("::cue")&&(a.push([]),s=a.length-1),-1!=s&&(a[s].push(r[l]),r[l].includes("}")&&(s=-1));for(s=(a=g(a)).next();!s.done;s=a.next()){var u=s.value;s="global",(l=u[0].match(/\((.*)\)/))&&(s=l.pop()),l=u.slice(1,-1),u[0].includes("}")&&(u=/\{(.*?)\}/.exec(u[0]))&&(l=u[1].split(";")),(u=o.get(s))||(u=new Sn(0,0,""));for(var c=!1,d=0;d<l.length;d++){var p=/^\s*([^:]+):\s*(.*)/.exec(l[d]);if(p){var h=p[2].trim().replace(";","");switch(p[1].trim()){case"background-color":case"background":c=!0,u.backgroundColor=h;break;case"color":c=!0,u.color=h;break;case"font-family":c=!0,u.fontFamily=h;break;case"font-size":c=!0,u.fontSize=h;break;case"font-weight":(parseInt(h,10)>=700||"bold"==h)&&(c=!0,u.fontWeight=$n);break;case"font-style":switch(h){case"normal":c=!0,u.fontStyle=Vn;break;case"italic":c=!0,u.fontStyle=Hn;break;case"oblique":c=!0,u.fontStyle="oblique"}break;case"opacity":c=!0,u.opacity=parseFloat(h);break;case"text-combine-upright":c=!0,u.textCombineUpright=h;break;case"text-shadow":c=!0,u.textShadow=h;break;case"white-space":c=!0,u.wrapLine="noWrap"!=h}}}c&&o.set(s,u)}}if(c=e,1==(u=r).length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0]||"REGION"==u[0])r=null;else if(r=null,u[0].includes("--\x3e")||(r=u[0],u.splice(0,1)),s=Nt(a=new Lt(u[0])),d=Dt(a,/[ \t]+--\x3e[ \t]+/g),l=Nt(a),null==s||null==d||null==l)K("Failed to parse VTT time code. Cue skipped:",r,u),r=null;else{for(s+=c,l+=c,c=u.slice(1).join("\n").trim(),o.has("global")?((u=o.get("global").clone()).startTime=s,u.endTime=l,u.payload=c):u=new Sn(s,l,c),Pt(a),s=Ot(a);s;)NT(u,s,t),Pt(a),s=Ot(a);Cn(u,o),null!=r&&(u.id=r),r=u}r&&i.push(r)}return i},$("shaka.text.VttTextParser",OT),OT.prototype.parseMedia=OT.prototype.parseMedia,OT.prototype.setManifestType=OT.prototype.setManifestType,OT.prototype.setSequenceMode=OT.prototype.setSequenceMode,OT.prototype.parseInit=OT.prototype.parseInit,go("text/vtt",function(){return new OT}),go('text/vtt; codecs="vtt"',function(){return new OT}),go('text/vtt; codecs="wvtt"',function(){return new OT}),UT.prototype.parseInit=function(e){var t=this,n=!1;if((new sr).box("moov",ar).box("trak",ar).box("mdia",ar).T("mdhd",function(e){e=ss(e.reader,e.version),t.g=e.timescale}).box("minf",ar).box("stbl",ar).T("stsd",lr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new je(2,2,2008);if(!n)throw new je(2,2,2008)},UT.prototype.setSequenceMode=function(){},UT.prototype.setManifestType=function(){},UT.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new je(2,2,2008);var n,o=0,i=[],r=[],s=!1,a=!1,l=!1,u=null;if((new sr).box("moof",ar).box("traf",ar).T("tfdt",function(e){s=!0,o=rs(e.reader,e.version).baseMediaDecodeTime}).T("tfhd",function(e){u=is(e.reader,e.flags).Rd}).T("trun",function(e){a=!0,i=as(e.reader,e.version,e.flags).ih}).box("mdat",dr(function(e){l=!0,n=e})).parse(e,!1),!l&&!s&&!a)throw new je(2,2,2008);e=o;for(var c=new or(n,0),d=g(i),p=d.next();!p.done;p=d.next()){var h=(p=p.value).jh||u,f=p.Cf?o+p.Cf:e;e=f+(h||0);var m=0;do{var y=c.U();m+=y;var v=null;"vttc"==hr(c.U())?y>8&&(v=c.Tb(y-8)):c.skip(y-8),h&&v&&(y=BT(v,t.periodStart+f/this.g,t.periodStart+e/this.g),r.push(y))}while(p.sampleSize&&m<p.sampleSize)}return r.filter(Ao)},$("shaka.text.Mp4VttParser",UT),UT.prototype.parseMedia=UT.prototype.parseMedia,UT.prototype.setManifestType=UT.prototype.setManifestType,UT.prototype.setSequenceMode=UT.prototype.setSequenceMode,UT.prototype.parseInit=UT.prototype.parseInit,go('application/mp4; codecs="wvtt"',function(){return new UT}),FT.prototype.parseInit=function(){},FT.prototype.setSequenceMode=function(){},FT.prototype.setManifestType=function(){},FT.prototype.parseMedia=function(e){var t=$e(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=g(t.split("\n\n"))).next();!n.done;n=t.next()){var o=new Lt((n=n.value.split("\n"))[0]),i=Nt(o),r=Dt(o,/,/g);if(o=Nt(o),null==i||null==r||null==o)throw new je(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Sn(i,o,n.slice(1).join("\n").trim()))}return e},$("shaka.text.SbvTextParser",FT),FT.prototype.parseMedia=FT.prototype.parseMedia,FT.prototype.setManifestType=FT.prototype.setManifestType,FT.prototype.setSequenceMode=FT.prototype.setSequenceMode,FT.prototype.parseInit=FT.prototype.parseInit,go("text/x-subviewer",function(){return new FT}),jT.prototype.parseInit=function(){},jT.prototype.setSequenceMode=function(){},jT.prototype.setManifestType=function(){},jT.prototype.parseMedia=function(e,t,n){return e=Ne(Ge(e=zT(e=$e(e)))),this.g.parseMedia(e,t,n,[])},$("shaka.text.SrtTextParser",jT),jT.srt2webvtt=zT,jT.prototype.parseMedia=jT.prototype.parseMedia,jT.prototype.setManifestType=jT.prototype.setManifestType,jT.prototype.setSequenceMode=jT.prototype.setSequenceMode,jT.prototype.parseInit=jT.prototype.parseInit,go("text/srt",function(){return new jT}),$T.prototype.parseInit=function(){},$T.prototype.setSequenceMode=function(){},$T.prototype.setManifestType=function(){},$T.prototype.parseMedia=function(e){var t="",n="",o=null,i=null;for(i=(e=g(i=$e(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var r=i.value;i=r,(r=qT.exec(r))&&(o=r[1],i=r[2]),"V4 Styles"==o||"V4+ Styles"==o?(t=i,t=n?t+"\n"+i:i):"Events"==o&&(n=n?n+"\n"+i:i)}for(o=[],i=null,e=(t=g(t.split(/\r?\n/))).next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(r=WT.exec(e)))if(e=r[1].trim(),r=r[2].trim(),"Format"==e)i=r.split(KT);else if("Style"==e){e=r.split(KT),r={};for(var s=0;s<i.length&&s<e.length;s++)r[i[s]]=e[s];o.push(r)}for(i=[],t=null,r=(n=g(n.split(/\r?\n/))).next(),e={};!r.done;e={Vi:void 0},r=n.next())if(r=r.value,!/^\s*;/.test(r)&&(s=WT.exec(r)))if(r=s[1].trim(),s=s[2].trim(),"Format"==r)t=s.split(KT);else if("Dialogue"==r){s=s.split(KT),r={};for(var a=0;a<t.length&&a<s.length;a++)r[t[a]]=s[a];s=new Sn(a=GT(r.Start),GT(r.End),s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.Vi=r.Style,(e=o.find(function(e){return function(t){return t.Name==e.Vi}}(e)))&&VT(s,e),i.push(s)}return i},$("shaka.text.SsaTextParser",$T),$T.prototype.parseMedia=$T.prototype.parseMedia,$T.prototype.setManifestType=$T.prototype.setManifestType,$T.prototype.setSequenceMode=$T.prototype.setSequenceMode,$T.prototype.parseInit=$T.prototype.parseInit;var qT=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,WT=/^\s*([^:]+):\s*(.*)/,KT=/\s*,\s*/,XT=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function YT(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)>0?{Zd:n,ra:e}:null}function JT(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=(60&e[t+2])>>>2;if(o>n.length-1)return null;var i=((192&e[t+2])>>>6)+1,r=(1&e[t+2])<<2;return r|=(192&e[t+3])>>>6,{sampleRate:n[o],channelCount:r,codec:"mp4a.40."+i}}function QT(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var o=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(o<=n)&&((t+=o)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function ZT(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function ek(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(n>=3)return null;var o=63&e[t+4],i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+n];if(t+i>e.length)return null;var r=e[t+6]>>5,s=0;2===r?s+=2:(1&r&&1!==r&&(s+=2),4&r&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var a=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|a>>2,(3&a)<<6|r<<3|s<<2|o>>4,o<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][r]+s,Ha:e,ra:i}}function tk(e,t){if(11===e[t]&&119===e[t+1]){var n,o,i=0,r=5;for(t+=r;r>0;){o=e[t];var s=Math.min(r,8),a=8-s;n=(o&(n=4278190080>>>24+a<<a))>>a,i=i?i<<s|n:n,t+=1,r-=s}if(i<16)return!0}return!1}function nk(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function ok(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]))return null;var n=new ha(e.subarray(t+2));ma(n,2),ma(n,3);var o=ga(n,11)+1<<1,i=ga(n,2);if(3==i){i=[24e3,22060,16e3][i=ga(n,2)];var r=3}else i=[48e3,44100,32e3][i],r=ga(n,2);var s=ga(n,3),a=ga(n,1);return n=ga(n,5),t+o>e.byteLength?null:(e=Math.floor(o*i/(16*[1,2,3,6][r])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,i<<6|n<<1,s<<1|a,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][s]+a,Ha:e,ra:o})}function ik(e){this.j=e,this.h=0,this.g=new Map,this.i=null}go("text/x-ssa",function(){return new $T}),(i=ZT.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(co(t)||"mp4a.40.2")+'"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,o){for(var i=Ne(e),r=da(i),s=r.length;s<i.length&&!QT(i,s);s++);if(e=1e3*n.endTime,(r=ca(r)).length&&n&&(r=r.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=r.data),!(r=JT(i,s)))return Promise.reject(new je(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=r.sampleRate,t.channelsCount=r.channelCount;for(var a=[];s<i.length;){var l=YT(i,s);if(!l)return Promise.reject(new je(2,3,3018,n?n.P()[0]:null));var u=l.Zd+l.ra;s+u<=i.length&&a.push({data:i.subarray(s+l.Zd,s+u),size:l.ra,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),s+=u}return i=r.sampleRate,e=Math.floor(e*i/1e3),o=new ps([o={id:t.id,type:"audio",codecs:r.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:a},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=hs(o),this.g.set(n,t)),n=this.i!==t,o=vs(o),this.i=t,this.h++,Promise.resolve({data:o,init:n?t:null})},$("shaka.transmuxer.AacTransmuxer",ZT),ZT.prototype.transmux=ZT.prototype.transmux,ZT.prototype.getOriginalMimeType=ZT.prototype.getOriginalMimeType,ZT.prototype.convertCodecs=ZT.prototype.convertCodecs,ZT.prototype.isSupported=ZT.prototype.isSupported,ZT.prototype.destroy=ZT.prototype.destroy,Xn("audio/aac",function(){return new ZT("audio/aac")},Qn),(i=nk.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?ae().le()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,o){for(var i=da(e=Ne(e)),r=i.length;r<e.length&&!tk(e,r);r++);var s=1e3*n.endTime;(i=ca(i)).length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(s=i.data),i=0;for(var a=new Uint8Array([]),l=[];r<e.length;){var u=ek(e,r);if(!u)return Promise.reject(new je(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,i=u.sampleRate,a=u.Ha,l.push({data:e.subarray(r,r+u.ra),size:u.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),r+=u.ra}return e=Math.floor(s*i/1e3),o=new ps([o={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:o,Cb:[],Ha:a,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:l},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=hs(o),this.g.set(n,t)),n=this.i!==t,o=vs(o),this.i=t,this.h++,Promise.resolve({data:o,init:n?t:null})},$("shaka.transmuxer.Ac3Transmuxer",nk),nk.prototype.transmux=nk.prototype.transmux,nk.prototype.getOriginalMimeType=nk.prototype.getOriginalMimeType,nk.prototype.convertCodecs=nk.prototype.convertCodecs,nk.prototype.isSupported=nk.prototype.isSupported,nk.prototype.destroy=nk.prototype.destroy,Xn("audio/ac3",function(){return new nk("audio/ac3")},Qn),(i=ik.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,o){for(var i=da(e=Ne(e)),r=i.length;r<e.length&&2935!=(e[r]<<8|e[r+1]);r++);var s=1e3*n.endTime;(i=ca(i)).length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(s=i.data),i=0;for(var a=new Uint8Array([]),l=[];r<e.length;){var u=ok(e,r);if(!u)return Promise.reject(new je(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,i=u.sampleRate,a=u.Ha,l.push({data:e.subarray(r,r+u.ra),size:u.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),r+=u.ra}return e=Math.floor(s*i/1e3),o=new ps([o={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:o,Cb:[],Ha:a,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:l},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=hs(o),this.g.set(n,t)),n=this.i!==t,o=vs(o),this.i=t,this.h++,Promise.resolve({data:o,init:n?t:null})},$("shaka.transmuxer.Ec3Transmuxer",ik),ik.prototype.transmux=ik.prototype.transmux,ik.prototype.getOriginalMimeType=ik.prototype.getOriginalMimeType,ik.prototype.convertCodecs=ik.prototype.convertCodecs,ik.prototype.isSupported=ik.prototype.isSupported,ik.prototype.destroy=ik.prototype.destroy,Xn("audio/ec3",function(){return new ik("audio/ec3")},Qn);var rk=[100,110,122,244,44,83,86,118,128,138,139,134];function sk(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),o=e.find(function(e){return 34==e.type});if(!t||!n||!o)return null;var i=function(e){var t=new ha(e,!0);return Sa(t),Sa(t),ga(t,4),ga(t,2),ga(t,6),e=ga(t,3),t=wa(t),{Ug:e+1,Bh:t}}(t.fullData);e=function(e){Sa(e=new ha(e,!0)),Sa(e);var t=0,n=0,o=0,i=0;ga(e,4);var r=ga(e,3);wa(e);for(var s=ga(e,2),a=ga(e,1),l=ga(e,5),u=Sa(e),c=Sa(e),d=Sa(e),p=Sa(e),h=Sa(e),f=Sa(e),m=Sa(e),g=Sa(e),y=Sa(e),v=Sa(e),b=Sa(e),x=[],w=[],S=0;S<r;S++)x.push(wa(e)),w.push(wa(e));if(r>0)for(S=r;S<8;S++)ga(e,2);for(S=0;S<r;S++)x[S]&&ga(e,88),w[S]&&Sa(e);ba(e),3==(x=ba(e))&&ga(e,1),w=ba(e),S=ba(e),wa(e)&&(t+=ba(e),n+=ba(e),o+=ba(e),i+=ba(e));var T=ba(e),k=ba(e),C=ba(e);if(wa(e))for(var A=0;A<=r;A++)ba(e),ba(e),ba(e);else ba(e),ba(e),ba(e);if(ba(e),ba(e),ba(e),ba(e),ba(e),ba(e),wa(e)&&wa(e))for(A=0;A<4;A++)for(var I=0;I<(3===A?2:6);I++)if(wa(e)){var E=Math.min(64,1<<4+(A<<1));A>1&&xa(e);for(var M=0;M<E;M++)xa(e)}else ba(e);for(wa(e),wa(e),wa(e)&&(Sa(e),ba(e),ba(e),wa(e)),A=ba(e),E=I=0;E<A;E++)if(M=!1,0!==E&&(M=wa(e)),M){E===A&&ba(e),wa(e),ba(e);for(var R=M=0;R<=I;R++){var _=wa(e),L=!1;_||(L=wa(e)),(_||L)&&M++}I=M}else{for(I=(R=ba(e))+(M=ba(e)),_=0;_<R;_++)ba(e),wa(e);for(R=0;R<M;R++)ba(e),wa(e)}if(wa(e))for(A=ba(e),I=0;I<A;I++){for(E=0;E<C+4;E++)ga(e,1);ga(e,1)}if(A=C=1,I=!0,E=1,R=M=0,wa(e),wa(e),wa(e)){if(wa(e)){L=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var P=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];(_=Sa(e))>0&&_<=16?(C=L[_-1],A=P[_-1]):255===_&&(C=ga(e,16),A=ga(e,16))}if(wa(e)&&wa(e),wa(e)&&(ga(e,3),wa(e),wa(e)&&(Sa(e),Sa(e),Sa(e))),wa(e)&&(ba(e),ba(e)),wa(e),wa(e),wa(e),(_=wa(e))&&(va(e),va(e),va(e),va(e)),wa(e)&&(E=ga(e,32),M=ga(e,32),wa(e)&&ba(e),wa(e))){P=!1,_=wa(e),L=wa(e),(_||L)&&((P=wa(e))&&(Sa(e),ga(e,5),wa(e),ga(e,5)),ga(e,4),ga(e,4),P&&ga(e,4),ga(e,5),ga(e,5),ga(e,5));for(var D=0;D<=r;D++){var O=!0,N=1;(I=wa(e))||(O=wa(e));var U=!1;if(O?ba(e):U=wa(e),U||(N=ba(e)+1),_){for(O=0;O<N;O++)ba(e),ba(e),P&&(ba(e),ba(e));wa(e)}if(L){for(O=0;O<N;O++)ba(e),ba(e),P&&(ba(e),ba(e));wa(e)}}}wa(e)&&(wa(e),wa(e),wa(e),R=ba(e),ba(e),ba(e),ba(e),ba(e))}return{yg:b,Eg:s,Fg:a,Dg:l,zg:u,Ag:c,Bg:d,Cg:p,rg:h,sg:f,ug:m,vg:g,wg:y,xg:v,nf:R,gg:x,fg:T,eg:k,width:w-(t+n)*(1===x||2===x?2:1),height:S-(o+i)*(1===x?2:1),Sk:C,Rk:A,qg:M/E,pg:I}}(n.fullData);var r=function(e){var t=new ha(e,!0);Sa(t),Sa(t),ba(t),ba(t),wa(t),wa(t),ga(t,3),wa(t),wa(t),ba(t),ba(t),xa(t),wa(t),wa(t),wa(t)&&ba(t),xa(t),xa(t),wa(t),wa(t),wa(t),wa(t),e=wa(t),t=wa(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Wg:n}}(o.fullData);return t=function(e,t,n,o){var i=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(i[0]=1,i[1]=(3&o.Eg)<<6|(o.Fg?1:0)<<5|31&o.Dg,i[2]=o.zg,i[3]=o.Ag,i[4]=o.Bg,i[5]=o.Cg,i[6]=o.rg,i[7]=o.sg,i[8]=o.ug,i[9]=o.vg,i[10]=o.wg,i[11]=o.xg,i[12]=o.yg,i[13]=240|(3840&o.nf)>>8,i[14]=255&o.nf,i[15]=252|3&o.Wg,i[16]=252|3&o.gg,i[17]=248|7&o.fg,i[18]=248|7&o.eg,i[19]=0,i[20]=parseInt(o.qg,10),i[21]=(3&(o.pg?1:0))<<6|(7&o.Ug)<<3|(o.Bh?1:0)<<2|3,i[22]=3,e=[e,t,n],t=23,n=e.length-1,o=0;o<e.length;o+=1)i.set(new Uint8Array([32+o|(o===n?128:0),0,1]),t),t+=3,i.set(new Uint8Array([e[o].byteLength>>8,255&e[o].byteLength]),t),t+=2,i.set(e[o],t),t+=e[o].byteLength;return i}(t.fullData,n.fullData,o.fullData,{Ug:i.Ug,Bh:i.Bh,Eg:e.Eg,Fg:e.Fg,yg:e.yg,Dg:e.Dg,zg:e.zg,Ag:e.Ag,Bg:e.Bg,Cg:e.Cg,rg:e.rg,sg:e.sg,ug:e.ug,vg:e.vg,wg:e.wg,xg:e.xg,nf:e.nf,gg:e.gg,fg:e.fg,eg:e.eg,Wg:r.Wg,qg:e.qg,pg:e.pg}),{height:e.height,width:e.width,Ra:t,Za:e.Sk,$a:e.Rk}}function ak(e,t){var n=e[t+1]>>3&3,o=e[t+1]>>1&3,i=e[t+2]>>4&15,r=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==r){var s=e[t+3]>>6;i=1e3*ck[14*(3===n?3-o:3===o?3:4)+i-1],r=dk[3*(3===n?0:2===n?1:2)+r],n=pk[n][o];var a=hk[o],l=Math.floor(n*i/r+(e[t+2]>>1&1))*a,u=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(u=u?parseInt(u[1],10):0)&&u<=87&&2===o&&i>=224e3&&0===s&&(e[t+3]|=128),{sampleRate:r,channelCount:3===s?1:2,ra:l,Qk:8*n*a}}return null}function lk(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function uk(e,t){if(t+1<e.length&&lk(e,t)){var n=ak(e,t),o=4;return n&&n.ra&&(o=n.ra),(t+=o)===e.length||t+1<e.length&&lk(e,t)}return!1}var ck=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],dk=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],pk=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],hk=[0,1,1,4];function fk(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function mk(e){this.h=e,this.g=null}
/*
      		 @license
      		 MSS Transmuxer
      		 Copyright 2015 Dash Industry Forum
      		 SPDX-License-Identifier: BSD-3-Clause
      		*/
function gk(e){this.h=e,(this.g=Hy.get("ISOBoxer")())&&function(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;n<16;n++)this.usertype[n]!==vk[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}(this)}function yk(e,t){for(var n=8,o=0;o<e.boxes.length&&e.boxes[o].type!==t;o++)n+=e.boxes[o].size;return n}(i=fk.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,o){for(var i=Ne(e),r=da(i).length;r<i.length&&!uk(i,r);r++);var s;for(e=[];r<i.length;){var a=ak(i,r);if(!a)return Promise.reject(new je(2,3,3018,n?n.P()[0]:null));s||(s=a),r+a.ra<=i.length&&e.push({data:i.subarray(r,r+a.ra),size:a.ra,duration:1152,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),r+=a.ra}return s?(i=9e4*s.Qk/s.sampleRate*this.h,o=new ps([o={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:s.sampleRate,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:i,Bb:e},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=hs(o),this.g.set(n,t)),n=this.i!==t,o=vs(o),this.i=t,this.h++,Promise.resolve({data:o,init:n?t:null})):Promise.reject(new je(2,3,3018,n?n.P()[0]:null))},$("shaka.transmuxer.Mp3Transmuxer",fk),fk.prototype.transmux=fk.prototype.transmux,fk.prototype.getOriginalMimeType=fk.prototype.getOriginalMimeType,fk.prototype.convertCodecs=fk.prototype.convertCodecs,fk.prototype.isSupported=fk.prototype.isSupported,fk.prototype.destroy=fk.prototype.destroy,Xn("audio/mpeg",function(){return new fk("audio/mpeg")},Qn),(i=mk.prototype).destroy=function(){},i.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=co(e).split(","),n=at("audio",t);return t=at("video",t),!(!n||t||"mp3"!=ao(n))&&yt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n,o,i){if(this.g?this.g.clearData():this.g=new Ca,this.g.Gf(n.i),e=Ne(e),"mp3"!=(e=this.g.parse(e)).Td().audio||"audio"!=i)return Promise.reject(new je(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),i=g(e.xb()),e=i.next();!e.done;e=i.next())if(e=e.value.data)for(t=0;t<e.length;)(o=ak(e,t))?(t+o.ra<=e.length&&(n=nt(n,e.subarray(t,t+o.ra))),t+=o.ra):t++;return Promise.resolve(n)},$("shaka.transmuxer.MpegTsTransmuxer",mk),mk.prototype.transmux=mk.prototype.transmux,mk.prototype.getOriginalMimeType=mk.prototype.getOriginalMimeType,mk.prototype.convertCodecs=mk.prototype.convertCodecs,mk.prototype.isSupported=mk.prototype.isSupported,mk.prototype.destroy=mk.prototype.destroy,Xn("video/mp2t",function(){return new mk("video/mp2t")},Zn),(i=gk.prototype).destroy=function(){},i.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?yt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),yt(t)||yt(e)))},i.convertCodecs=function(e,t){return t.replace("mss/","")},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n){if(!n)return Promise.resolve(Ne(e));if(!t.mssPrivateData)return Promise.reject(new je(2,3,3020,n?n.P()[0]:null));try{var o,i=this.g.parseBuffer(e),r=i.fetch("tfhd");r.track_ID=t.id+1;var s=i.fetch("tfdt"),a=i.fetch("traf");null===s&&((s=this.g.createFullBox("tfdt",a,r)).version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var l=i.fetch("trun"),u=i.fetch("tfxd");u&&u._parent.boxes.splice(u._parent.boxes.indexOf(u),1);var c=i.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=i.fetch("sepiff");if(null!==d){d.type="senc",d.usertype=void 0;var p=i.fetch("saio");if(null===p){(p=this.g.createFullBox("saio",a)).version=0,p.flags=0,p.entry_count=1,p.offset=[0];var h=this.g.createFullBox("saiz",a);if(h.version=0,h.flags=0,h.sample_count=d.sample_count,h.default_sample_info_size=0,h.sample_info_size=[],2&d.flags)for(o=0;o<d.sample_count;o+=1)h.sample_info_size[o]=10+6*d.entry[o].NumberOfEntries;else h.default_sample_info_size=8}}r.flags&=16777214,r.flags|=131072,l.flags|=1;var f=i.fetch("moof");l.data_offset=f.getLength()+8;var m=i.fetch("saio");null!==m&&(m.offset[0]=yk(f,"traf")+yk(a,"senc")+16);var g=Ne(i.write());return Promise.resolve(g)}catch(y){return y instanceof je?Promise.reject(y):Promise.reject(new je(2,3,3022,n?n.P()[0]:null))}},$("shaka.transmuxer.MssTransmuxer",gk),gk.prototype.transmux=gk.prototype.transmux,gk.prototype.getOriginalMimeType=gk.prototype.getOriginalMimeType,gk.prototype.convertCodecs=gk.prototype.convertCodecs,gk.prototype.isSupported=gk.prototype.isSupported,gk.prototype.destroy=gk.prototype.destroy;var vk=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function bk(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}Xn("mss/audio/mp4",function(){return new gk("mss/audio/mp4")},Qn),Xn("mss/video/mp4",function(){return new gk("mss/video/mp4")},Qn),(i=bk.prototype).destroy=function(){this.j.clear(),this.i&&this.i.destroy()},i.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var o=co(n).split(",");return n=at("audio",o),o=at("video",o),!(n&&(n=ao(n),!xk.includes(n))||o&&(n=ao(o),!wk.includes(n)))&&(t?yt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),yt(t)||yt(e)))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=co(t).replace("mp4a.40.34","mp3").split(",").map(function(e){return Wo(e,"audio/mp4")}).map(Ko).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},i.getOriginalMimeType=function(){return this.m},i.transmux=function(e,t,n,o,i){var r=Ne(e);if("audio"==i&&!Ma(r)){for(var s=da(r),a=s.length;a<r.length;a++)if(uk(r,a))return Promise.reject(new je(2,3,3018,n?n.P()[0]:null));for(a=s.length;a<r.length;a++)if(QT(r,a))return this.i||(this.i=new ZT("audio/aac")),this.i.transmux(e,t,n,o,i);return Promise.reject(new je(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new Ca,this.h.Gf(n.i);var l=this.h.parse(r),u=[],c=l.Td();try{var d=null;if("video"==i){switch(c.video){case"avc":var p=[],h=null,f=l.ud(),m=function(e){function t(e){i={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:e.pts,dts:e.dts,nalus:[]}}function n(){if(i&&i.nalus.length&&i.frame){for(var e=[],t=g(i.nalus),n=t.next();!n.done;n=t.next()){var r=(n=n.value).fullData.byteLength,s=new Uint8Array(4);s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=255&r,e.push(s),e.push(n.fullData)}i.data=nt.apply(Ye,y(e)),o.push(i)}}for(var o=[],i=null,r=!1,s=0;s<e.length;s++){var a=e[s],l=a.nalus,u=!1;i&&l.length&&!r&&(n(),t(a));for(var c=(l=g(a.nalus)).next();!c.done;c=l.next()){var d=!1;switch((c=c.value).type){case 1:var p=!1;d=!0;var h=c.data;u&&h.length>4&&(2===(h=ka(new ha(h)))||4===h||7===h||9===h)&&(p=!0),p&&i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(a),i.frame=!0,i.isKeyframe=p;break;case 5:d=!0,i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(a),i.frame=!0,i.isKeyframe=!0;break;case 6:case 8:case 12:d=!0;break;case 7:u=d=!0;break;case 9:r=d=!0,i&&i.frame&&(n(),i=null),i||t(a);break;default:d=!1}i&&d&&i.nalus.push(c)}}return n(),o}(f);if(!m.length)throw new je(2,3,3023,n?n.P()[0]:null);for(var v=0;v<m.length;v++){var b,x=m[v];null==h&&(h=x.dts),b=v+1<m.length?(m[v+1].dts||0)-(x.dts||0):m.length>1?(x.dts||0)-(m[v-1].dts||0):9e4*(n.endTime-n.startTime),p.push({data:x.data,size:x.data.byteLength,duration:b,wb:Math.round((x.pts||0)-(x.dts||0)),flags:{zb:0,mb:0,jb:0,gb:0,hb:x.isKeyframe?2:1,Ab:x.isKeyframe?0:1}})}for(var w=[],S=g(f),T=S.next();!T.done;T=S.next())w.push.apply(w,y(T.value.nalus));var k=function(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new ha(t.data),o=Sa(n);if(Sa(n),Sa(n),va(n),rk.includes(o)&&(3===(o=ba(n))&&ma(n,1),va(n),va(n),ma(n,1),wa(n))){o=3!==o?8:12;for(var i=0;i<o;i++)wa(n)&&Ta(n,i<6?16:64)}if(va(n),0===(o=ba(n)))ba(n);else if(1===o)for(ma(n,1),va(n),va(n),o=ba(n),i=0;i<o;i++)va(n);va(n),ma(n,1);var r=ba(n),s=ba(n),a=ga(n,1);0===a&&ma(n,1),ma(n,1);var l=0,u=0,c=0,d=0;if(wa(n)&&(l=ba(n),u=ba(n),c=ba(n),d=ba(n)),i=o=1,wa(n)&&wa(n)){var p=Sa(n);p>0&&p<=16?(o=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][p-1],i=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][p-1]):255===p&&(o=ga(n,16),i=ga(n,16))}return n=(2-a)*(s+1)*16-2*c-2*d,r=16*(r+1)-2*l-2*u,l=[],t=t.fullData,l.push(t.byteLength>>>8&255),l.push(255&t.byteLength),l=l.concat.apply(l,y(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,y(e)),{height:n,width:r,Ra:e=new Uint8Array([1,l[3],l[4],l[5],255,225].concat(l,[1],t)),Za:o,$a:i}}(w);if(!k||null==h)throw new je(2,3,3018,n?n.P()[0]:null);t.height=k.height,t.width=k.width,d={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:k.Ra,Za:k.Za,$a:k.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:h,Bb:p},stream:t};break;case"hvc":var C=[],A=null,I=[],E=l.ud();if(!E.length)throw new je(2,3,3023,n?n.P()[0]:null);for(var M=0;M<E.length;M++){var R=E[M],_=R.nalus;I.push.apply(I,y(_));for(var L=!1,P=[],D=!1,O=g(_),N=O.next();!N.done;N=O.next()){var U=N.value;switch(U.type){case 1:case 0:var B=D=!0;break;case 19:case 20:case 21:L=B=D=!0;break;case 32:case 33:case 34:case 39:case 40:B=!0;break;case 35:D=B=!0;break;default:B=!1}if(D&&B){var F=U.fullData.byteLength,j=new Uint8Array(4);j[0]=F>>24&255,j[1]=F>>16&255,j[2]=F>>8&255,j[3]=255&F,P.push(j),P.push(U.fullData)}}var z,$=P.length?{data:nt.apply(Ye,y(P)),isKeyframe:L}:null;if($)null==A&&null!=R.dts&&(A=R.dts),z=M+1<E.length?(E[M+1].dts||0)-(R.dts||0):E.length>1?(R.dts||0)-(E[M-1].dts||0):9e4*(n.endTime-n.startTime),C.push({data:$.data,size:$.data.byteLength,duration:z,wb:Math.round((R.pts||0)-(R.dts||0)),flags:{zb:0,mb:0,jb:0,gb:0,hb:$.isKeyframe?2:1,Ab:$.isKeyframe?0:1}})}var V=sk(I);if(!V||null==A)throw new je(2,3,3018,n?n.P()[0]:null);t.height=V.height,t.width=V.width,d={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:V.Ra,Za:V.Za,$a:V.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:A,Bb:C},stream:t}}d&&(u.push(d),d=null)}if("audio"==i){switch(c.audio){case"aac":for(var H,G=[],q=null,W=null,K=null,X=g(l.xb()),Y=X.next();!Y.done;Y=X.next()){var J=Y.value,Q=J.data;if(Q){var Z=0;if(-1==W&&K)Q=nt(K,J.data),W=null;else if(null!=W&&K){Z=Math.max(0,W);var ee=nt(K,Q.subarray(0,Z));G.push({data:ee,size:ee.byteLength,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),W=K=null}if(!(H=JT(Q,Z)))throw new je(2,3,3018,n?n.P()[0]:null);for(t.audioSamplingRate=H.sampleRate,t.channelsCount=H.channelCount,null==q&&null!==J.pts&&(q=J.pts);Z<Q.length;){var te=YT(Q,Z);if(!te){K=Q.subarray(Z,Q.length),W=-1;break}var ne=te.Zd+te.ra;0!=(W=Math.max(0,Z+ne-Q.length))?K=Q.subarray(Z+te.Zd,Z+ne):Z+ne<=Q.length&&G.push({data:Q.subarray(Z+te.Zd,Z+ne),size:te.ra,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),Z+=ne}}}if(!H||null==q){q=9e4*n.startTime;var oe=at("audio",t.codecs.split(","));if(!oe||!t.channelsCount||!t.audioSamplingRate)throw new je(2,3,3018,n?n.P()[0]:null);H={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:oe};var ie=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(oe,t.channelsCount);if(!ie)throw new je(2,3,3018,n?n.P()[0]:null);for(var re=q+9e4*(n.endTime-n.startTime),se=q;se<re;)G.push({data:ie,size:ie.byteLength,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),se+=1024/H.sampleRate*9e4}var ae=H.sampleRate,le=q/9e4*ae;d={id:t.id,type:"audio",codecs:H.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:ae,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:le,Bb:G},stream:t};break;case"ac3":for(var ue=[],ce=0,de=new Uint8Array([]),pe=null,he=g(l.xb()),fe=he.next();!fe.done;fe=he.next()){var me=fe.value,ge=me.data;null==pe&&null!==me.pts&&(pe=me.pts);for(var ye=0;ye<ge.length;){var ve=ek(ge,ye);ve?(t.audioSamplingRate=ve.sampleRate,t.channelsCount=ve.channelCount,ce=ve.sampleRate,de=ve.Ha,ue.push({data:ge.subarray(ye,ye+ve.ra),size:ve.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),ye+=ve.ra):ye++}}if(0==ce||0==de.byteLength||null==pe)throw new je(2,3,3018,n?n.P()[0]:null);var be=pe/9e4*ce;d={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:ce,duration:o,Cb:[],Ha:de,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:be,Bb:ue},stream:t};break;case"ec3":for(var xe=[],we=0,Se=new Uint8Array([]),Te=null,ke=g(l.xb()),Ce=ke.next();!Ce.done;Ce=ke.next()){var Ae=Ce.value,Ie=Ae.data;null==Te&&null!==Ae.pts&&(Te=Ae.pts);for(var Ee=0;Ee<Ie.length;){var Me=ok(Ie,Ee);Me?(t.audioSamplingRate=Me.sampleRate,t.channelsCount=Me.channelCount,we=Me.sampleRate,Se=Me.Ha,xe.push({data:Ie.subarray(Ee,Ee+Me.ra),size:Me.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),Ee+=Me.ra):Ee++}}if(0==we||0==Se.byteLength||null==Te)throw new je(2,3,3018,n?n.P()[0]:null);var Re=Te/9e4*we;d={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:we,duration:o,Cb:[],Ha:Se,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Re,Bb:xe},stream:t};break;case"mp3":for(var _e,Le=[],Pe=null,De=g(l.xb()),Oe=De.next();!Oe.done;Oe=De.next()){var Ue=Oe.value,Be=Ue.data;if(Be){null==Pe&&null!==Ue.pts&&(Pe=Ue.pts);for(var Fe=0;Fe<Be.length;){var ze=ak(Be,Fe);ze?(_e||(_e=ze),Fe+ze.ra<=Be.length&&Le.push({data:Be.subarray(Fe,Fe+ze.ra),size:ze.ra,duration:1152,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),Fe+=ze.ra):Fe++}}}if(!_e||null==Pe)throw new je(2,3,3018,n?n.P()[0]:null);var $e=_e.sampleRate,Ve=Pe/9e4*$e;d={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:$e,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Ve,Bb:Le},stream:t};break;case"opus":var He=[],Ge=null,qe=l.H;if(!qe)throw new je(2,3,3018,n?n.P()[0]:null);var We=[];switch(qe.oj){case 1:case 2:We=[0];break;case 0:We=[255,1,1,0,1];break;case 128:We=[255,2,0,0,1];break;case 3:We=[1,2,1,0,2,1];break;case 4:We=[1,2,2,0,1,2,3];break;case 5:We=[1,3,2,0,4,1,2,3];break;case 6:We=[1,4,2,0,4,1,2,3,5];break;case 7:We=[1,4,2,0,4,1,2,3,5,6];break;case 8:We=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:We=[1,1,2,0,1];break;case 131:We=[1,1,3,0,1,2];break;case 132:We=[1,1,4,0,1,2,3];break;case 133:We=[1,1,5,0,1,2,3,4];break;case 134:We=[1,1,6,0,1,2,3,4,5];break;case 135:We=[1,1,7,0,1,2,3,4,5,6];break;case 136:We=[1,1,8,0,1,2,3,4,5,6,7]}for(var Ke=new Uint8Array([0,qe.channelCount,0,0,qe.sampleRate>>>24&255,qe.sampleRate>>>17&255,qe.sampleRate>>>8&255,qe.sampleRate>>>0&255,0,0].concat(y(We))),Xe=qe.sampleRate,Je=g(l.xb()),Qe=Je.next();!Qe.done;Qe=Je.next()){var Ze=Qe.value,et=Ze.data;null==Ge&&null!==Ze.pts&&(Ge=Ze.pts);for(var tt=0;tt<et.length;){for(var ot=!!(16&et[tt+1]),it=!!(8&et[tt+1]),rt=tt+2,st=0;255===et[rt];)st+=255,rt+=1;st+=et[rt],rt+=1,rt+=ot?2:0,rt+=it?2:0;var lt=et.slice(rt,rt+st);He.push({data:lt,size:lt.byteLength,duration:960,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),tt=rt+st}}if(0==Ke.byteLength||null==Ge)throw new je(2,3,3018,n?n.P()[0]:null);t.audioSamplingRate=qe.sampleRate,t.channelsCount=qe.channelCount;var ut=Ge/9e4*Xe;d={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Xe,duration:o,Cb:[],Ha:Ke,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:ut,Bb:He},stream:t}}d&&(u.push(d),d=null)}}catch(mt){return mt&&3023==mt.code?Promise.resolve(new Uint8Array([])):Promise.reject(mt)}if(!u.length)return Promise.reject(new je(2,3,3018,n?n.P()[0]:null));var ct=new ps(u),dt=t.id+"_"+n.i;if(this.j.has(dt))var pt=this.j.get(dt);else pt=hs(ct),this.j.set(dt,pt);var ht=this.l!==pt,ft=vs(ct);return this.l=pt,this.g++,Promise.resolve({data:ft,init:ht?pt:null})},$("shaka.transmuxer.TsTransmuxer",bk),bk.prototype.transmux=bk.prototype.transmux,bk.prototype.getOriginalMimeType=bk.prototype.getOriginalMimeType,bk.prototype.convertCodecs=bk.prototype.convertCodecs,bk.prototype.isSupported=bk.prototype.isSupported,bk.prototype.destroy=bk.prototype.destroy;var xk=["aac","ac-3","ec-3","mp3","opus"],wk=["avc","hevc"];function Sk(){}Xn("video/mp2t",function(){return new bk("video/mp2t")},eo),f(Sk,zu),$("shaka.util.FairPlayUtils",Sk)}.call(n,t,t,void 0),n.shaka)e[o]=n.shaka[o]}()}(Tr)),Tr);const Cr=wr(kr);let Ar,Ir;const Er={playingState:!1},Mr=async e=>{Cr.polyfill.installAll(),Ir=e,Ir||(Ir=document.createElement("video"),Ir.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",Ir.width=window.innerWidth,Ir.height=window.innerHeight,Ar=new Cr.Player,await Ar.attach(Ir),Ir.autoplay=!1,Ar.addEventListener("error",e=>{console.error(e)}),document.body.insertBefore(Ir,document.body.firstChild))},Rr=async e=>{if(!Ar||!Ir)throw"Player not initialized yet";await Ar.load(e.streamUrl)},_r=()=>{Ir.play().then(()=>{Er.playingState=!0})},Lr=()=>{Ir.pause(),Er.playingState=!1},Pr=()=>Ir.currentTime,Dr=()=>Ir.duration,Or=Er,Nr=async()=>{await Ar.destroy(),Ar=null,Ir.remove(),Ir=null},Ur=Di.Component("Player",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].y=1080,l[1].mount="{y:1}",l[1].w=1920,l[1].h=150,l[1].color={top:"0x00000000",bottom:"0x444444ff"},l[1].alpha={transition:t.controlsVisibility},a[1].populate(l[1]),!0===f&&(m-=1),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),l[2].x=60,l[2].y=50,a[2].populate(l[2]),!0===f&&(m-=1),e=a[2],l[3]={},a[3]=this.element({parent:e||"root"},!0===f?h:t),l[3].w=60,l[3].h=60,l[3].color="0x0087ceeb",l[3].effects=[{type:"radius",props:{radius:16}}],a[3].populate(l[3]),!0===f&&(m-=1),e=a[3],l[4]={},a[4]=this.element({parent:e||"root"},!0===f?h:t),l[4].y=14,l[4].x=14,l[4].w=32,l[4].h=32,l[4].src=t.playing?"assets/player/pause.png":"assets/player/play.png",a[4].populate(l[4]),!0===f&&(m-=1),e=a[2],l[5]={},a[5]=this.element({parent:e||"root"},!0===f?h:t),l[5].y=22,l[5].x=100,l[5].w=t.progressLength,l[5].h=16,l[5].color="0xffffff80",l[5].effects=[{type:"radius",props:{radius:8}}],a[5].populate(l[5]),!0===f&&(m-=1),e=a[5],l[6]={},a[6]=this.element({parent:e||"root"},!0===f?h:t),l[6].h=16,l[6].w={transition:{value:t.progress,d:100,f:"ease-in-out"}},l[6].effects=[{type:"radius",props:{radius:8}}],l[6].color="0x0087ceeb",a[6].populate(l[6]),!0===f&&(m-=1),g[7]=n.components&&n.components.Circle||o.Circle,e=a[5],l[7]={},a[7]=this.element({parent:e||"root"},!0===f?h:t),l[7].size=28,l[7].color="0xffffffff",l[7].y="-6",l[7].x={transition:{value:t.progress-8,d:100,f:"ease-in-out"}},c[7]=[],void 0!==g[7])for(let y in g[7][Symbol.for("config")].props)delete l[7][g[7][Symbol.for("config")].props[y]],c[7].push(g[7][Symbol.for("config")].props[y]);if(a[7].populate(l[7]),!0===f&&(m-=1),e=a[7],u[8]={},u[8].size=28,u[8].color="0xffffffff",u[8].y="-6",p={transition:{value:t.progress-8,d:100,f:"ease-in-out"}},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[8].x=p,d=u[8].is||"Circle",o[8],"string"==typeof d){if(o[8]=n.components&&n.components[d]||o[d],!o[8])throw new Error('Component "Circle" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[8]=d);return a[8]=o[8].call(null,{props:u[8]},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],h=a[8],f=!0):e=a[8][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[2],l[9]={},a[9]=this.element({parent:e||"root"},!0===f?h:t),l[9].x=1660,l[9].y=16,a[9].populate(l[9]),!0===f&&(m-=1),e=a[9],l[10]={},a[10]=this.element({parent:e||"root"},!0===f?h:t),l[10].content=t.currentTime,l[10].size=25,l[10].__textnode=!0,a[10].populate(l[10]),!0===f&&(m-=1),e=a[9],l[11]={},a[11]=this.element({parent:e||"root"},!0===f?h:t),l[11].x=70,l[11].size=25,l[11].content="/",l[11].__textnode=!0,a[11].populate(l[11]),!0===f&&(m-=1),e=a[9],l[12]={},a[12]=this.element({parent:e||"root"},!0===f?h:t),l[12].x=85,l[12].size=25,l[12].content=t.duration,l[12].__textnode=!0,a[12].populate(l[12]),!0===f&&(m-=1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[7]=null,u[8]=null,o[8]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(e,t,n,o,i,r){t[1].set("alpha",{transition:e.controlsVisibility})},function(e,t,n,o,i,r){t[3].set("effects",[{type:"radius",props:{radius:16}}])},function(e,t,n,o,i,r){t[4].set("src",e.playing?"assets/player/pause.png":"assets/player/play.png")},function(e,t,n,o,i,r){t[5].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[6].set("w",{transition:{value:e.progress,d:100,f:"ease-in-out"}})},function(e,t,n,o,i,r){t[6].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[7]&&-1!==skips[7].indexOf("x")||t[7].set("x",{transition:{value:e.progress-8,d:100,f:"ease-in-out"}})},function(e,t,n,o,i,r){t[8][Symbol.for("props")].x={transition:{value:e.progress-8,d:100,f:"ease-in-out"}}},function(e,t,n,o,i,r){t[10].set("content",e.currentTime)},function(e,t,n,o,i,r){t[12].set("content",e.duration)}],context:{}},state:()=>({controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}),hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await Mr()},async ready(){await Rr({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const e=e=>new Date(1e3*e).toISOString().substr(14,5),t=Dr();t&&(this.duration=e(t),this.progressChunkSize=Math.round(this.progressLength/t*100)/100),this.$setInterval(()=>{const t=Pr();this.currentTime=e(t),this.progress=Math.round(t*this.progressChunkSize)},1e3),this.play()},async destroy(){await Nr()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),1==Or.playingState?(Lr(),this.playing=!1):(console.log("play!"),_r(),this.playing=!0)},showControls(e){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=e}}}),Br=Di.Component("Colors",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=1920,l[0].h=1080,l[0].color={transition:t.bg},a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].x=20,l[1].y=20,a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=100,l[2].h=100,l[2].x=0,l[2].color="0xecfeffff",a[2].populate(l[2]),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=100,l[3].h=100,l[3].x=120,l[3].color="0xa5f3fcff",a[3].populate(l[3]),e=a[1],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].w=100,l[4].h=100,l[4].x=240,l[4].color="0x22d3eeff",a[4].populate(l[4]),e=a[1],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].w=100,l[5].h=100,l[5].x=360,l[5].color="0x0891b2ff",a[5].populate(l[5]),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].x=20,l[6].y=140,a[6].populate(l[6]),e=a[6],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].w=100,l[7].h=100,l[7].x=0,l[7].color="0xecfeffff",a[7].populate(l[7]),e=a[6],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].w=100,l[8].h=100,l[8].x=120,l[8].color="0xa5f3fcff",a[8].populate(l[8]),e=a[6],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9].w=100,l[9].h=100,l[9].x=240,l[9].color="0x22d3eeff",a[9].populate(l[9]),e=a[6],l[10]={},a[10]=this.element({parent:e||"root"},t),l[10].w=100,l[10].h=100,l[10].x=360,l[10].color="0x0891b2ff",a[10].populate(l[10]),e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},t),l[11].x=20,l[11].y=260,a[11].populate(l[11]),e=a[11],l[12]={},a[12]=this.element({parent:e||"root"},t),l[12].w=100,l[12].h=100,l[12].x=0,l[12].color="0xecfeffaa",a[12].populate(l[12]),e=a[11],l[13]={},a[13]=this.element({parent:e||"root"},t),l[13].w=100,l[13].h=100,l[13].x=120,l[13].color="0xa5f3fc33",a[13].populate(l[13]),e=a[11],l[14]={},a[14]=this.element({parent:e||"root"},t),l[14].w=100,l[14].h=100,l[14].x=240,l[14].color="0x22d3ee20",a[14].populate(l[14]),e=a[11],l[15]={},a[15]=this.element({parent:e||"root"},t),l[15].w=100,l[15].h=100,l[15].x=360,l[15].color="0x0891b2ff",a[15].populate(l[15]),e=a[0],l[16]={},a[16]=this.element({parent:e||"root"},t),l[16].x=20,l[16].y=380,a[16].populate(l[16]),e=a[16],l[17]={},a[17]=this.element({parent:e||"root"},t),l[17].w=100,l[17].h=100,l[17].x=0,l[17].color="0xecfeffff",a[17].populate(l[17]),e=a[16],l[18]={},a[18]=this.element({parent:e||"root"},t),l[18].w=100,l[18].h=100,l[18].x=120,l[18].color="0xa5f3fcff",a[18].populate(l[18]),e=a[16],l[19]={},a[19]=this.element({parent:e||"root"},t),l[19].w=100,l[19].h=100,l[19].x=240,l[19].color="0x22d3eeff",a[19].populate(l[19]),e=a[16],l[20]={},a[20]=this.element({parent:e||"root"},t),l[20].w=100,l[20].h=100,l[20].x=360,l[20].color="0x0891b2ff",a[20].populate(l[20]),e=a[0],l[21]={},a[21]=this.element({parent:e||"root"},t),l[21].x=20,l[21].y=500,a[21].populate(l[21]),e=a[21],l[22]={},a[22]=this.element({parent:e||"root"},t),l[22].w=100,l[22].h=100,l[22].x=0,l[22].color="0xecfeffab",a[22].populate(l[22]),e=a[21],l[23]={},a[23]=this.element({parent:e||"root"},t),l[23].w=100,l[23].h=100,l[23].x=120,l[23].color="0xa5f3fc33",a[23].populate(l[23]),e=a[21],l[24]={},a[24]=this.element({parent:e||"root"},t),l[24].w=100,l[24].h=100,l[24].x=240,l[24].color="0x22d3ee21",a[24].populate(l[24]),e=a[21],l[25]={},a[25]=this.element({parent:e||"root"},t),l[25].w=100,l[25].h=100,l[25].x=360,l[25].color="0x0891b2ff",a[25].populate(l[25]),e=a[0],l[26]={},a[26]=this.element({parent:e||"root"},t),l[26].x=20,l[26].y=620,a[26].populate(l[26]),e=a[26],l[27]={},a[27]=this.element({parent:e||"root"},t),l[27].w=100,l[27].h=100,l[27].x=0,l[27].color="0x000000ff",a[27].populate(l[27]),e=a[26],l[28]={},a[28]=this.element({parent:e||"root"},t),l[28].w=100,l[28].h=100,l[28].x=120,l[28].color="0xccccccff",a[28].populate(l[28]),e=a[26],l[29]={},a[29]=this.element({parent:e||"root"},t),l[29].w=100,l[29].h=100,l[29].x=240,l[29].color="0x889900ff",a[29].populate(l[29]),e=a[26],l[30]={},a[30]=this.element({parent:e||"root"},t),l[30].w=100,l[30].h=100,l[30].x=360,l[30].color="0x00ff00ff",a[30].populate(l[30]),e=a[0],l[31]={},a[31]=this.element({parent:e||"root"},t),l[31].x=20,l[31].y=740,a[31].populate(l[31]),e=a[31],l[32]={},a[32]=this.element({parent:e||"root"},t),l[32].w=100,l[32].h=100,l[32].x=0,l[32].color="0x000000ff",a[32].populate(l[32]),e=a[31],l[33]={},a[33]=this.element({parent:e||"root"},t),l[33].w=100,l[33].h=100,l[33].x=120,l[33].color="0xccccccff",a[33].populate(l[33]),e=a[31],l[34]={},a[34]=this.element({parent:e||"root"},t),l[34].w=100,l[34].h=100,l[34].x=240,l[34].color="0x889900ff",a[34].populate(l[34]),e=a[31],l[35]={},a[35]=this.element({parent:e||"root"},t),l[35].w=100,l[35].h=100,l[35].x=360,l[35].color="0x00ff00ff",a[35].populate(l[35]),e=a[0],l[36]={},a[36]=this.element({parent:e||"root"},t),l[36].x=620,l[36].y=20,a[36].populate(l[36]),e=a[36],l[37]={},a[37]=this.element({parent:e||"root"},t),l[37].w=300,l[37].h=200,l[37].x=0,l[37].color={transition:t.color1},a[37].populate(l[37]),e=a[36],l[38]={},a[38]=this.element({parent:e||"root"},t),l[38].w=300,l[38].h=200,l[38].x=0,l[38].y=250,l[38].color={transition:t.color2},a[38].populate(l[38]),e=a[36],l[39]={},a[39]=this.element({parent:e||"root"},t),l[39].w=300,l[39].h=200,l[39].x=100,l[39].y=400,l[39].color={transition:t.color3},a[39].populate(l[39]),e=a[36],l[40]={},a[40]=this.element({parent:e||"root"},t),l[40].w=300,l[40].h=200,l[40].x=0,l[40].y=650,l[40].color={transition:{value:t.color4,d:1e3,f:"ease-in-out"}},a[40].populate(l[40]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("color",{transition:e.bg})},function(e,t,n,o,i,r){t[37].set("color",{transition:e.color1})},function(e,t,n,o,i,r){t[38].set("color",{transition:e.color2})},function(e,t,n,o,i,r){t[39].set("color",{transition:e.color3})},function(e,t,n,o,i,r){t[40].set("color",{transition:{value:e.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state:()=>({bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}),input:{enter(){this.color1="#0891b2"===this.color1?"#22d3ee":"#0891b2",this.color2="#dc2626"===this.color2?"#0f0":"#dc2626",this.color3="rgba(251, 191, 36)"===this.color3?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4="#1e3a8a"===this.color4?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let e=0;const t=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{e+=1,e===t.length-1&&(e=0),this.bg=t[e]},2e3)}}}),Fr=Di.Component("Gradients",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=480,l[1].h=1080,l[1].color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=480,l[2].h=1080,l[2].x=480,l[2].color="{left: '0xdc2626ff',  right: '0xf87171ff'}",a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=480,l[3].h=1080,l[3].x=960,l[3].color="{top: '0x0891b2ff', right: '0xf87171ff'}",a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].w=480,l[4].h=1080,l[4].x=1440,l[4].color="{right: '0x008000ff', bottom: '0xffd700ff'}",a[4].populate(l[4]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("w",480)},function(e,t,n,o,i,r){t[2].set("w",480)},function(e,t,n,o,i,r){t[2].set("x",480)},function(e,t,n,o,i,r){t[3].set("w",480)},function(e,t,n,o,i,r){t[3].set("x",960)},function(e,t,n,o,i,r){t[4].set("w",480)},function(e,t,n,o,i,r){t[4].set("x",1440)}],context:{}}}),jr=Di.Component("Transitions",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].x=60,a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=200,l[1].h=200,l[1].x=50,l[1].y={transition:t.y},l[1].color="0xc4b5fdff",a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=200,l[2].h=200,l[2].x=300,l[2].y={transition:{value:t.y}},l[2].color="0xa78bfaff",a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=200,l[3].h=200,l[3].x=550,l[3].y={transition:{value:t.y,duration:1e3,start:t.start,end:t.doneTransition3}},l[3].color="0x8b5cf6ff",l[3].ref="bla",a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].w=200,l[4].h=200,l[4].x=800,l[4].y={transition:{value:t.y,duration:500,delay:500,start:t.start,end:t.finished}},l[4].color="0x7c3aedff",a[4].populate(l[4]),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].w=200,l[5].h=200,l[5].x=1050,l[5].y={transition:{value:t.y,easing:"ease-in-out",end:t.finished}},l[5].color="0x6d28d9ff",a[5].populate(l[5]),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].w=200,l[6].h=200,l[6].x=1300,l[6].y={transition:{value:t.y,duration:3e3,easing:"ease-in-out-back",end:t.finished}},l[6].color="0x5b21b6ff",a[6].populate(l[6]),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].w=200,l[7].h=200,l[7].x=1550,l[7].y={transition:{value:t.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},l[7].color="0x4c1d95ff",a[7].populate(l[7]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("y",{transition:e.y})},function(e,t,n,o,i,r){t[2].set("y",{transition:{value:e.y}})},function(e,t,n,o,i,r){t[3].set("y",{transition:{value:e.y,duration:1e3,start:e.start,end:e.doneTransition3}})},function(e,t,n,o,i,r){t[4].set("y",{transition:{value:e.y,duration:500,delay:500,start:e.start,end:e.finished}})},function(e,t,n,o,i,r){t[5].set("y",{transition:{value:e.y,easing:"ease-in-out",end:e.finished}})},function(e,t,n,o,i,r){t[6].set("y",{transition:{value:e.y,duration:3e3,easing:"ease-in-out-back",end:e.finished}})},function(e,t,n,o,i,r){t[7].set("y",{transition:{value:e.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state:()=>({y:50}),hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(e,t,n){this.$log.info("Start transition",e.nodeId,t,n)},finished(e,t,n){this.$log.info("Finished transition",e.nodeId,t,n)},go(){this.y=50,this.$setTimeout(()=>{this.y=830},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),zr=Di.Component("Alpha",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].y=100,a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=200,l[2].h=200,l[2].x=100,l[2].color="0xffffffff",l[2].alpha=.2,a[2].populate(l[2]),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=200,l[3].h=200,l[3].x=320,l[3].color="0xffffffff",l[3].alpha=.4,a[3].populate(l[3]),e=a[1],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].w=200,l[4].h=200,l[4].x=540,l[4].color="0xffffffff",l[4].alpha=.6,a[4].populate(l[4]),e=a[1],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].w=200,l[5].h=200,l[5].x=760,l[5].color="0xffffffff",l[5].alpha=.8,a[5].populate(l[5]),e=a[1],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].w=200,l[6].h=200,l[6].x=980,l[6].color="0xffffffff",l[6].alpha=1,a[6].populate(l[6]),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].w=200,l[7].h=200,l[7].x=100,l[7].y=320,l[7].color="0xffffffff",l[7].alpha=t.alpha,a[7].populate(l[7]),e=a[0],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].w=200,l[8].h=200,l[8].x=100,l[8].y=540,l[8].color="0xffffffff",l[8].alpha=t.alpha,a[8].populate(l[8]),e=a[0],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9].w=200,l[9].h=200,l[9].x=100,l[9].y=760,l[9].color="0xffffffff",l[9].alpha={transition:{value:t.alpha,duration:1e3,easing:"ease-in-out-circ"}},a[9].populate(l[9]),e=a[0],l[10]={},a[10]=this.element({parent:e||"root"},t),l[10].w=428,l[10].h=234,l[10].x=1200,l[10].y=100,l[10].src=t.image,l[10].alpha=1,a[10].populate(l[10]),e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},t),l[11].w=428,l[11].h=234,l[11].x=1300,l[11].y=294,l[11].src=t.image,l[11].alpha=.4,a[11].populate(l[11]),e=a[0],l[12]={},a[12]=this.element({parent:e||"root"},t),l[12].w=428,l[12].h=234,l[12].x=1200,l[12].y=488,l[12].src=t.image,l[12].alpha=.1,a[12].populate(l[12]),e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},t),l[13].x=400,l[13].y=400,l[13].alpha=.2,l[13].content="Text with alpha applied directly",l[13].__textnode=!0,a[13].populate(l[13]),e=a[0],l[14]={},a[14]=this.element({parent:e||"root"},t),l[14].alpha=.5,l[14].x=400,l[14].y=500,a[14].populate(l[14]),e=a[14],l[15]={},a[15]=this.element({parent:e||"root"},t),l[15].content="Text with alpha applied on parent element",l[15].__textnode=!0,a[15].populate(l[15]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[8].set("alpha",e.alpha)},function(e,t,n,o,i,r){t[9].set("alpha",{transition:{value:e.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(e,t,n,o,i,r){t[10].set("src",e.image)},function(e,t,n,o,i,r){t[11].set("y",294)},function(e,t,n,o,i,r){t[11].set("src",e.image)},function(e,t,n,o,i,r){t[12].set("y",488)},function(e,t,n,o,i,r){t[12].set("src",e.image)}],context:{}},state:()=>({alpha:.5,direction:"up",image:"assets/lightningbolt.png"}),hooks:{ready(){this.$setInterval(()=>{const e="up"===this.direction?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(e,1),.1),1===this.alpha&&(this.direction="down"),.1===this.alpha&&(this.direction="up")},1400)}}}),$r=Di.Component("Scaling",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].x=100,l[1].y=100,l[1].w=150,l[1].h=150,l[1].color="0x64748bff",a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].x=300,l[2].y=100,l[2].w=100,l[2].h=100,l[2].color="0x64748bff",l[2].scale=1.5,a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].x=100,l[3].y=400,l[3].w=100,l[3].h=100,l[3].color="0xb45309ff",l[3].scale=t.scale,a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].x=900,l[4].y=400,l[4].w=100,l[4].h=100,l[4].src=t.balloon,l[4].scale={transition:{value:t.scale,easing:"ease-in-out"}},a[4].populate(l[4]),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].x=300,l[5].y=600,l[5].w=100,l[5].h=100,l[5].color="0x059669ff",l[5].scale=t.scale2,a[5].populate(l[5]),e=a[5],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].x=10,l[6].y=10,l[6].h=60,l[6].w=80,l[6].color="0x0369a1ff",a[6].populate(l[6]),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].x=1500,l[7].y=600,l[7].w=100,l[7].h=100,l[7].color="0x059669ff",l[7].scale=t.scale2,a[7].populate(l[7]),e=a[7],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].x=10,l[8].y=10,l[8].h=60,l[8].w=80,l[8].color="0x0369a1ff",l[8].scale=t.scale2/2,a[8].populate(l[8]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[4].set("src",e.balloon)},function(e,t,n,o,i,r){t[4].set("scale",{transition:{value:e.scale,easing:"ease-in-out"}})},function(e,t,n,o,i,r){t[5].set("scale",e.scale2)},function(e,t,n,o,i,r){t[7].set("scale",e.scale2)},function(e,t,n,o,i,r){t[8].set("scale",e.scale2/2)}],context:{}},state:()=>({scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}),hooks:{ready(){this.$setInterval(()=>{const e="up"===this.direction?this.scale+.5:0;this.scale=Math.max(Math.min(e,8),0),8===this.scale&&(this.direction="down"),0===this.scale&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=1===this.scale2?3:1},2e3)}}}),Vr=Di.Component("Rotation",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].y=70,a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].x=100,l[2].y=0,l[2].w=200,l[2].h=100,l[2].color="0xfee2e2ff",l[2].rotation=0,a[2].populate(l[2]),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].x=100,l[3].y=150,l[3].w=200,l[3].h=100,l[3].color="0xfecacaff",l[3].rotation=10,a[3].populate(l[3]),e=a[1],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].x=100,l[4].y=300,l[4].w=200,l[4].h=100,l[4].color="0xfca5a5ff",l[4].rotation=20,a[4].populate(l[4]),e=a[1],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].x=100,l[5].y=450,l[5].w=200,l[5].h=100,l[5].color="0xf87171ff",l[5].rotation=30,a[5].populate(l[5]),e=a[1],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].x=100,l[6].y=610,l[6].w=200,l[6].h=100,l[6].color="0xef4444ff",l[6].rotation=40,a[6].populate(l[6]),e=a[1],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].x=100,l[7].y=800,l[7].w=200,l[7].h=100,l[7].color="0xdc2626ff",l[7].rotation=50,a[7].populate(l[7]),e=a[0],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].y=70,l[8].x=300,a[8].populate(l[8]),e=a[8],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9].x=100,l[9].y=0,l[9].w=200,l[9].h=100,l[9].color="0xfee2e2ff",l[9].rotation=60,a[9].populate(l[9]),e=a[8],l[10]={},a[10]=this.element({parent:e||"root"},t),l[10].x=100,l[10].y=150,l[10].w=200,l[10].h=100,l[10].color="0xfecacaff",l[10].rotation=70,a[10].populate(l[10]),e=a[8],l[11]={},a[11]=this.element({parent:e||"root"},t),l[11].x=100,l[11].y=300,l[11].w=200,l[11].h=100,l[11].color="0xfca5a5ff",l[11].rotation=80,a[11].populate(l[11]),e=a[8],l[12]={},a[12]=this.element({parent:e||"root"},t),l[12].x=100,l[12].y=450,l[12].w=200,l[12].h=100,l[12].color="0xf87171ff",l[12].rotation=90,a[12].populate(l[12]),e=a[8],l[13]={},a[13]=this.element({parent:e||"root"},t),l[13].x=100,l[13].y=610,l[13].w=200,l[13].h=100,l[13].color="0xef4444ff",l[13].rotation=100,a[13].populate(l[13]),e=a[8],l[14]={},a[14]=this.element({parent:e||"root"},t),l[14].x=100,l[14].y=800,l[14].w=200,l[14].h=100,l[14].color="0xdc2626ff",l[14].rotation=100,a[14].populate(l[14]),e=a[0],l[15]={},a[15]=this.element({parent:e||"root"},t),l[15].y=70,l[15].x=600,a[15].populate(l[15]),e=a[15],l[16]={},a[16]=this.element({parent:e||"root"},t),l[16].x=100,l[16].y=0,l[16].w=200,l[16].h=100,l[16].color="0xfee2e2ff",l[16].rotation=110,a[16].populate(l[16]),e=a[15],l[17]={},a[17]=this.element({parent:e||"root"},t),l[17].x=100,l[17].y=150,l[17].w=200,l[17].h=100,l[17].color="0xfecacaff",l[17].rotation=120,a[17].populate(l[17]),e=a[15],l[18]={},a[18]=this.element({parent:e||"root"},t),l[18].x=100,l[18].y=300,l[18].w=200,l[18].h=100,l[18].color="0xfca5a5ff",l[18].rotation=130,a[18].populate(l[18]),e=a[15],l[19]={},a[19]=this.element({parent:e||"root"},t),l[19].x=100,l[19].y=450,l[19].w=200,l[19].h=100,l[19].color="0xf87171ff",l[19].rotation=140,a[19].populate(l[19]),e=a[15],l[20]={},a[20]=this.element({parent:e||"root"},t),l[20].x=100,l[20].y=610,l[20].w=200,l[20].h=100,l[20].color="0xef4444ff",l[20].rotation=150,a[20].populate(l[20]),e=a[15],l[21]={},a[21]=this.element({parent:e||"root"},t),l[21].x=100,l[21].y=800,l[21].w=200,l[21].h=100,l[21].color="0xdc2626ff",l[21].rotation=160,a[21].populate(l[21]),e=a[0],l[22]={},a[22]=this.element({parent:e||"root"},t),l[22].y=70,l[22].x=900,a[22].populate(l[22]),e=a[22],l[23]={},a[23]=this.element({parent:e||"root"},t),l[23].x=100,l[23].y=0,l[23].w=200,l[23].h=100,l[23].color="0xfee2e2ff",l[23].rotation=170,a[23].populate(l[23]),e=a[22],l[24]={},a[24]=this.element({parent:e||"root"},t),l[24].x=100,l[24].y=150,l[24].w=200,l[24].h=100,l[24].color="0xfecacaff",l[24].rotation=180,a[24].populate(l[24]),e=a[22],l[25]={},a[25]=this.element({parent:e||"root"},t),l[25].x=100,l[25].y=300,l[25].w=200,l[25].h=100,l[25].color="0xfca5a5ff",l[25].rotation=190,a[25].populate(l[25]),e=a[22],l[26]={},a[26]=this.element({parent:e||"root"},t),l[26].x=100,l[26].y=450,l[26].w=200,l[26].h=100,l[26].color="0xf87171ff",l[26].rotation=200,a[26].populate(l[26]),e=a[22],l[27]={},a[27]=this.element({parent:e||"root"},t),l[27].x=100,l[27].y=610,l[27].w=200,l[27].h=100,l[27].color="0xef4444ff",l[27].rotation=210,a[27].populate(l[27]),e=a[22],l[28]={},a[28]=this.element({parent:e||"root"},t),l[28].x=100,l[28].y=800,l[28].w=200,l[28].h=100,l[28].color="0xdc2626ff",l[28].rotation=220,a[28].populate(l[28]),e=a[0],l[29]={},a[29]=this.element({parent:e||"root"},t),l[29].y=70,l[29].x=1200,a[29].populate(l[29]),e=a[29],l[30]={},a[30]=this.element({parent:e||"root"},t),l[30].x=100,l[30].y=0,l[30].w=200,l[30].h=100,l[30].color="0xfee2e2ff",l[30].rotation=230,a[30].populate(l[30]),e=a[29],l[31]={},a[31]=this.element({parent:e||"root"},t),l[31].x=100,l[31].y=150,l[31].w=200,l[31].h=100,l[31].color="0xfecacaff",l[31].rotation=240,a[31].populate(l[31]),e=a[29],l[32]={},a[32]=this.element({parent:e||"root"},t),l[32].x=100,l[32].y=300,l[32].w=200,l[32].h=100,l[32].color="0xfca5a5ff",l[32].rotation=250,a[32].populate(l[32]),e=a[29],l[33]={},a[33]=this.element({parent:e||"root"},t),l[33].x=100,l[33].y=450,l[33].w=200,l[33].h=100,l[33].color="0xf87171ff",l[33].rotation=260,a[33].populate(l[33]),e=a[29],l[34]={},a[34]=this.element({parent:e||"root"},t),l[34].x=100,l[34].y=610,l[34].w=200,l[34].h=100,l[34].color="0xef4444ff",l[34].rotation=270,a[34].populate(l[34]),e=a[29],l[35]={},a[35]=this.element({parent:e||"root"},t),l[35].x=100,l[35].y=800,l[35].w=200,l[35].h=100,l[35].color="0xdc2626ff",l[35].rotation=280,a[35].populate(l[35]),e=a[0],l[36]={},a[36]=this.element({parent:e||"root"},t),l[36].y=70,l[36].x=1500,a[36].populate(l[36]),e=a[36],l[37]={},a[37]=this.element({parent:e||"root"},t),l[37].x=100,l[37].y=0,l[37].w=200,l[37].h=100,l[37].color="0xfee2e2ff",l[37].rotation=290,a[37].populate(l[37]),e=a[36],l[38]={},a[38]=this.element({parent:e||"root"},t),l[38].x=100,l[38].y=150,l[38].w=200,l[38].h=100,l[38].color="0xfecacaff",l[38].rotation=300,a[38].populate(l[38]),e=a[36],l[39]={},a[39]=this.element({parent:e||"root"},t),l[39].x=100,l[39].y=300,l[39].w=200,l[39].h=100,l[39].color="0xfca5a5ff",l[39].rotation=310,a[39].populate(l[39]),e=a[36],l[40]={},a[40]=this.element({parent:e||"root"},t),l[40].x=100,l[40].y=450,l[40].w=200,l[40].h=100,l[40].color="0xf87171ff",l[40].rotation=320,a[40].populate(l[40]),e=a[36],l[41]={},a[41]=this.element({parent:e||"root"},t),l[41].x=100,l[41].y=610,l[41].w=200,l[41].h=100,l[41].color="0xef4444ff",l[41].rotation=330,a[41].populate(l[41]),e=a[36],l[42]={},a[42]=this.element({parent:e||"root"},t),l[42].x=100,l[42].y=800,l[42].w=200,l[42].h=100,l[42].color="0xdc2626ff",l[42].rotation=340,a[42].populate(l[42]),e=a[0],l[43]={},a[43]=this.element({parent:e||"root"},t),l[43].x=200,l[43].y=200,l[43].w=400,l[43].h=400,l[43].color="0x0891b2ff",l[43].rotation=t.rotation1,a[43].populate(l[43]),e=a[0],l[44]={},a[44]=this.element({parent:e||"root"},t),l[44].x=800,l[44].y=200,l[44].w=400,l[44].h=400,l[44].color="0x0891b2ff",l[44].rotation=t.rotation2,a[44].populate(l[44]),e=a[0],l[45]={},a[45]=this.element({parent:e||"root"},t),l[45].x=1400,l[45].y=200,l[45].w=400,l[45].h=400,l[45].color="0x0891b2ff",l[45].rotation={transition:t.rotation3},a[45].populate(l[45]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[44].set("rotation",e.rotation2)},function(e,t,n,o,i,r){t[45].set("rotation",{transition:e.rotation3})}],context:{}},state:()=>({rotation1:38,rotation2:0,rotation3:0}),hooks:{ready(){this.$setInterval(()=>{const e=this.rotation2+10;this.rotation2=e<=360?e:0},800),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,2*this.rotation3)),720===this.rotation3&&(this.rotation3=0)},2e3)}}}),Hr=Di.Component("KeyInput",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].x=525,l[0].y=130,a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=200,l[1].h=200,l[1].color=t.focusColor,l[1].x=220*t.focusedX,l[1].y=210*t.focusedY,a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=180,l[2].h=180,l[2].x=10,l[2].y=10,l[2].color=t.blockColor,a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=180,l[3].h=180,l[3].x=230,l[3].y=10,l[3].color=t.blockColor,a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].w=180,l[4].h=180,l[4].x=450,l[4].y=10,l[4].color=t.blockColor,a[4].populate(l[4]),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].w=180,l[5].h=180,l[5].x=670,l[5].y=10,l[5].color=t.blockColor,a[5].populate(l[5]),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].w=180,l[6].h=180,l[6].x=10,l[6].y=220,l[6].color=t.blockColor,a[6].populate(l[6]),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].w=180,l[7].h=180,l[7].x=230,l[7].y=220,l[7].color=t.blockColor,a[7].populate(l[7]),e=a[0],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].w=180,l[8].h=180,l[8].x=450,l[8].y=220,l[8].color=t.blockColor,a[8].populate(l[8]),e=a[0],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9].w=180,l[9].h=180,l[9].x=670,l[9].y=220,l[9].color=t.blockColor,a[9].populate(l[9]),e=a[0],l[10]={},a[10]=this.element({parent:e||"root"},t),l[10].w=180,l[10].h=180,l[10].x=10,l[10].y=430,l[10].color=t.blockColor,a[10].populate(l[10]),e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},t),l[11].w=180,l[11].h=180,l[11].x=230,l[11].y=430,l[11].color=t.blockColor,a[11].populate(l[11]),e=a[0],l[12]={},a[12]=this.element({parent:e||"root"},t),l[12].w=180,l[12].h=180,l[12].x=450,l[12].y=430,l[12].color=t.blockColor,a[12].populate(l[12]),e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},t),l[13].w=180,l[13].h=180,l[13].x=670,l[13].y=430,l[13].color=t.blockColor,a[13].populate(l[13]),e=a[0],l[14]={},a[14]=this.element({parent:e||"root"},t),l[14].w=180,l[14].h=180,l[14].x=10,l[14].y=640,l[14].color=t.blockColor,a[14].populate(l[14]),e=a[0],l[15]={},a[15]=this.element({parent:e||"root"},t),l[15].w=180,l[15].h=180,l[15].x=230,l[15].y=640,l[15].color=t.blockColor,a[15].populate(l[15]),e=a[0],l[16]={},a[16]=this.element({parent:e||"root"},t),l[16].w=180,l[16].h=180,l[16].x=450,l[16].y=640,l[16].color=t.blockColor,a[16].populate(l[16]),e=a[0],l[17]={},a[17]=this.element({parent:e||"root"},t),l[17].w=180,l[17].h=180,l[17].x=670,l[17].y=640,l[17].color=t.blockColor,a[17].populate(l[17]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("color",e.focusColor)},function(e,t,n,o,i,r){t[1].set("x",220*e.focusedX)},function(e,t,n,o,i,r){t[1].set("y",210*e.focusedY)},function(e,t,n,o,i,r){t[2].set("color",e.blockColor)},function(e,t,n,o,i,r){t[3].set("color",e.blockColor)},function(e,t,n,o,i,r){t[4].set("color",e.blockColor)},function(e,t,n,o,i,r){t[5].set("color",e.blockColor)},function(e,t,n,o,i,r){t[6].set("color",e.blockColor)},function(e,t,n,o,i,r){t[7].set("color",e.blockColor)},function(e,t,n,o,i,r){t[8].set("color",e.blockColor)},function(e,t,n,o,i,r){t[9].set("color",e.blockColor)},function(e,t,n,o,i,r){t[10].set("color",e.blockColor)},function(e,t,n,o,i,r){t[11].set("color",e.blockColor)},function(e,t,n,o,i,r){t[12].set("color",e.blockColor)},function(e,t,n,o,i,r){t[13].set("color",e.blockColor)},function(e,t,n,o,i,r){t[14].set("color",e.blockColor)},function(e,t,n,o,i,r){t[15].set("color",e.blockColor)},function(e,t,n,o,i,r){t[16].set("color",e.blockColor)},function(e,t,n,o,i,r){t[17].set("color",e.blockColor)}],context:{}},state:()=>({focusedX:0,focusedY:0,colorscheme:"yellow"}),computed:{blockColor(){return this.colorscheme,"yellow"===this.colorscheme?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme,"yellow"===this.colorscheme?"#facc15":"#38bdf8"}},input:{left(){const e=this.focusedX-1;this.focusedX=Math.max(e,0)},right(){const e=this.focusedX+1;this.focusedX=Math.min(e,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme="yellow"===this.colorscheme?"blue":"yellow"},any(e){const t=parseInt(e.key);isNaN(t)?this.parent.$focus(e):(this.focusedX=Math.max(0,(t-1)%4),this.focusedY=Math.max(0,Math.ceil(t/4)-1))}}}),Gr=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],qr=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],Wr=Di.Component("Texts",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p;l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].x=100,l[0].y=100,a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].content="Default text",l[1]["@loaded"]=t.textLoaded&&t.textLoaded.bind(t),l[1].__textnode=!0,a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].content="123456",l[2].x=400,l[2].__textnode=!0,a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].content="Text with a different fontsize",l[3].size=t.size,l[3].y=120,l[3].font="raleway",l[3].__textnode=!0,a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].content="Text with a different color",l[4].size=50,l[4].color=t.color,l[4].y=250,l[4].__textnode=!0,a[4].populate(l[4]),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].content="Letterspacing",l[5].size=50,l[5].color="0x38bdf8ff",l[5].y=450,l[5].letterspacing=40,l[5].__textnode=!0,a[5].populate(l[5]),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].w=800,l[6].h=100,l[6].y=550,l[6].color="0x94a3b8ff",a[6].populate(l[6]),e=a[6],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].content="Text align center",l[7].size=50,l[7].y=15,l[7].color="0xbae6fdff",l[7].align="center",l[7].maxwidth=800,l[7].__textnode=!0,a[7].populate(l[7]),e=a[0],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].w=800,l[8].h=200,l[8].x=900,l[8].y=550,l[8].color="0x94a3b8ff",a[8].populate(l[8]),e=a[8],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9].content=t.longText,l[9].size=40,l[9].color="0xbae6fdff",l[9].maxwidth=800,l[9].maxlines=5,l[9].textoverflow="!!!",l[9].__textnode=!0,a[9].populate(l[9]),e=a[0],l[10]={},a[10]=this.element({parent:e||"root"},t),l[10].w=800,l[10].h=120,l[10].x=900,l[10].y=800,l[10].color="0x94a3b8ff",a[10].populate(l[10]),e=a[10],l[11]={},a[11]=this.element({parent:e||"root"},t),l[11].content=t.longText,l[11].size=40,l[11].color="0xbae6fdff",l[11].maxwidth=800,l[11].maxlines=2,l[11].lineheight=60,l[11].textoverflow=!1,l[11].__textnode=!0,a[11].populate(l[11]),e=a[0],l[12]={},a[12]=this.element({parent:e||"root"},t),l[12].content=t.character,l[12].size=50,l[12].color=t.color,l[12].y=750,l[12].font="opensans",l[12].__textnode=!0,a[12].populate(l[12]),e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},t),l[13].x=1200,l[13].y=300,a[13].populate(l[13]),e=a[13],l[14]={},a[14]=this.element({parent:e||"root"},t),l[14].rotation={transition:t.rotation},l[14].pivot=0,l[14].content="Hello",l[14].__textnode=!0,a[14].populate(l[14]),e=a[13],l[15]={},a[15]=this.element({parent:e||"root"},t),l[15].x=150,l[15].rotation={transition:t.rotation},l[15].pivot=.5,l[15].content="World",l[15].__textnode=!0,a[15].populate(l[15]),e=a[13],l[16]={},a[16]=this.element({parent:e||"root"},t),l[16].x=300,l[16].rotation={transition:t.rotation},l[16].pivot=1,l[16].content="!!",l[16].__textnode=!0,a[16].populate(l[16]),e=a[0],l[17]={},a[17]=this.element({parent:e||"root"},t),l[17].x=500,l[17].y=700,a[17].populate(l[17]),e=a[17],c[18]=[],u[18]=(n=[],o,s)=>{const a=r(n),u=new Set;let c=a.length;const h={};d=h.from||0,p="to"in h?h.to:a.length;for(;c--;)a[c],c<p&&c>=d&&u.add(""+c);let f=s.length;for(;f--;)if(!1===u.has(s[f])){const e=s[f];o[18][e]&&o[18][e].destroy(),o[18][e]=null,delete o[18][e]}s.length=0;const m=a.length,g=[];for(let r=0;r<m;r++){if(r<d||r>=p)continue;const n=Object.create(t);e=o[17],n.text=a[r],n.index=r,n.key=""+r,s.push(n.key),e=o[17],void 0===o[18]&&(o[18]={}),l[18]={},void 0===o[18][n.key]&&(o[18][n.key]=this.element({parent:e||"root"},t)),l[18].content=n.text,l[18].y=50*n.index,l[18].__textnode=!0,void 0===o[18][n.key].nodeId&&o[18][n.key].populate(l[18]);let u=()=>{o[18][n.key].set("y",50*n.index)};i(u,null),g.push(u),t[Symbol.for("effects")].push(u)}return g};let h=()=>{u[18](t.texts,a,c[18])};t[Symbol.for("effects")].push(h),i(h,["texts"]);let f=()=>{t.text;for(let e=0;e<t.texts.length;e++){if(e<d||e>=p)continue;const n={};n.index=e,n.text=t.texts[e],n.key=e,a[18][n.key].set("content",n.text)}};return t[Symbol.for("effects")].push(f),i(f),{elms:a,cleanup:()=>{t=null,e=null,c[18].length=0,u[18]=null,h=null,f=null,a.length=0,o.length=0,l.length=0,u.length=0}}},effects:[function(e,t,n,o,i,r){t[3].set("size",e.size)},function(e,t,n,o,i,r){t[4].set("color",e.color)},function(e,t,n,o,i,r){t[12].set("content",e.character)},function(e,t,n,o,i,r){t[12].set("color",e.color)},function(e,t,n,o,i,r){t[14].set("rotation",{transition:e.rotation})},function(e,t,n,o,i,r){t[15].set("rotation",{transition:e.rotation})},function(e,t,n,o,i,r){t[16].set("rotation",{transition:e.rotation})}],context:{}},state:()=>({color:Gr[0],size:10,character:qr[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}),hooks:{ready(){let e=0;this.$setInterval(()=>{e++,e>Gr.length-1&&(e=0),this.color=Gr[e],this.size=10*(2*e+1),this.rotation+=30},1e3);let t=0;this.$setInterval(()=>{t++,t>qr.length-1&&(t=0),this.character=qr[t]},1400)}},methods:{textLoaded(e){this.$log.info(`Text loaded with w: ${e.w} and h: ${e.h}`)}}}),Kr=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],Xr=Di.Component("Images",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].src="assets/lightningbolt.png",l[1].w=428,l[1].h=234,l[1].x=100,l[1].y=100,a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",l[2].w=428,l[2].h=234,l[2].x=100,l[2].y=400,a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].src=t.image,l[3].x=100,l[3].y=700,l[3]["@loaded"]=t.imageLoaded&&t.imageLoaded.bind(t),a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].color="{top: '0xff0000ff', bottom: '0xffd700ff'}",l[4].src="assets/lightningbolt.png",l[4].w=428,l[4].h=234,l[4].x=600,l[4].y=100,a[4].populate(l[4]),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].x=600,l[5].y=400,l[5].w=428,l[5].h=234,l[5].clipping=t.clipping,a[5].populate(l[5]),e=a[5],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].src="assets/lightningbolt.png",l[6].w=856,l[6].h=468,a[6].populate(l[6]),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].color=t.color,l[7].src="assets/lightningbolt.png",l[7].w=428,l[7].h=234,l[7].x=1100,l[7].y=100,a[7].populate(l[7]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[3].set("src",e.image)},function(e,t,n,o,i,r){t[5].set("clipping",e.clipping)},function(e,t,n,o,i,r){t[7].set("color",e.color)}],context:{}},state:()=>({image:Kr[0],clipping:!0,color:"red"}),hooks:{ready(){this.$setInterval(()=>{this.image=this.image===Kr[0]?Kr[1]:Kr[0],this.clipping=!this.clipping,this.color="red"===this.color?"blue":"red"},2e3)}},methods:{imageLoaded(e){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${e.w} and h: ${e.h}`)}}}),Yr=e("S",Di.Component("Square",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w={transition:t.size},l[0].h={transition:t.size},l[0].color={transition:t.color},a[0].populate(l[0]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("w",{transition:e.size})},function(e,t,n,o,i,r){t[0].set("h",{transition:e.size})},function(e,t,n,o,i,r){t[0].set("color",{transition:e.color})}],context:{}},props:[{key:"size",default:80}],state:()=>({color:"#86198f"}),watch:{size(e,t){this.$log.info(`Size changed from ${t} to ${e}`),this.color="#86198f"===this.color?"#9d174d":"#86198f"}}})),Jr=Di.Component("Card",{components:{Square:Yr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),l[0].w=t.w,l[0].h=t.h,l[0].color="0x0891b2ff",a[0].populate(l[0]),!0===h&&(f-=1),m[1]=n.components&&n.components.Square||o.Square,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].x=80,l[1].y=80,c[1]=[],void 0!==m[1])for(let g in m[1][Symbol.for("config")].props)delete l[1][m[1][Symbol.for("config")].props[g]],c[1].push(m[1][Symbol.for("config")].props[g]);if(a[1].populate(l[1]),!0===h&&(f-=1),e=a[1],u[2]={},u[2].x=80,u[2].y=80,d=u[2].is||"Square",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "Square" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);if(a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],p=a[2],h=!0):e=a[2][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),m[3]=n.components&&n.components.Square||o.Square,e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].x=20,l[3].y=20,l[3].size=40,c[3]=[],void 0!==m[3])for(let g in m[3][Symbol.for("config")].props)delete l[3][m[3][Symbol.for("config")].props[g]],c[3].push(m[3][Symbol.for("config")].props[g]);if(a[3].populate(l[3]),!0===h&&(f-=1),e=a[3],u[4]={},u[4].x=20,u[4].y=20,u[4].size=40,d=u[4].is||"Square",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "Square" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);return a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],p=a[4],h=!0):e=a[4][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[1]=null,u[2]=null,o[2]=null,m[3]=null,u[4]=null,o[4]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[],context:{}},props:["size"],computed:{w(){return this.size,"large"===this.size?400:200},h(){return this.size,"large"===this.size?500:300}}}),Qr=Di.Component("Components",{components:{Square:Yr,Card:Jr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=0,x=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),a[0].populate(l[0]),!0===v&&(b-=1),x[1]=n.components&&n.components.Square||o.Square,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===v?m:t),l[1].x=100,l[1].y=100,l[1].size=50,p[1]=[],void 0!==x[1])for(let S in x[1][Symbol.for("config")].props)delete l[1][x[1][Symbol.for("config")].props[S]],p[1].push(x[1][Symbol.for("config")].props[S]);if(a[1].populate(l[1]),!0===v&&(b-=1),e=a[1],c[2]={},c[2].x=100,c[2].y=100,c[2].size=50,h=c[2].is||"Square",o[2],"string"==typeof h){if(o[2]=n.components&&n.components[h]||o[h],!o[2])throw new Error('Component "Square" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[2]=h);if(a[2]=o[2].call(null,{props:c[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],m=a[2],v=!0):e=a[2][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[3]=n.components&&n.components.Square||o.Square,e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===v?m:t),l[3].x=100,l[3].y=200,l[3].size=100,p[3]=[],void 0!==x[3])for(let S in x[3][Symbol.for("config")].props)delete l[3][x[3][Symbol.for("config")].props[S]],p[3].push(x[3][Symbol.for("config")].props[S]);if(a[3].populate(l[3]),!0===v&&(b-=1),e=a[3],c[4]={},c[4].x=100,c[4].y=200,c[4].size=100,h=c[4].is||"Square",o[4],"string"==typeof h){if(o[4]=n.components&&n.components[h]||o[h],!o[4])throw new Error('Component "Square" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[4]=h);if(a[4]=o[4].call(null,{props:c[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],m=a[4],v=!0):e=a[4][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[5]=n.components&&n.components.Square||o.Square,e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===v?m:t),l[5].x=100,l[5].y=350,l[5].size=200,p[5]=[],void 0!==x[5])for(let S in x[5][Symbol.for("config")].props)delete l[5][x[5][Symbol.for("config")].props[S]],p[5].push(x[5][Symbol.for("config")].props[S]);if(a[5].populate(l[5]),!0===v&&(b-=1),e=a[5],c[6]={},c[6].x=100,c[6].y=350,c[6].size=200,h=c[6].is||"Square",o[6],"string"==typeof h){if(o[6]=n.components&&n.components[h]||o[h],!o[6])throw new Error('Component "Square" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[6]=h);if(a[6]=o[6].call(null,{props:c[6]},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],m=a[6],v=!0):e=a[6][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[7]=n.components&&n.components.Square||o.Square,e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},!0===v?m:t),l[7].x={transition:t.x},l[7].y=600,l[7].size=50,p[7]=[],void 0!==x[7])for(let S in x[7][Symbol.for("config")].props)delete l[7][x[7][Symbol.for("config")].props[S]],p[7].push(x[7][Symbol.for("config")].props[S]);if(a[7].populate(l[7]),!0===v&&(b-=1),e=a[7],c[8]={},f={transition:t.x},!0===Array.isArray(f)&&(f=r(f).slice(0)),c[8].x=f,c[8].y=600,c[8].size=50,h=c[8].is||"Square",o[8],"string"==typeof h){if(o[8]=n.components&&n.components[h]||o[h],!o[8])throw new Error('Component "Square" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[8]=h);if(a[8]=o[8].call(null,{props:c[8]},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],m=a[8],v=!0):e=a[8][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[9]=n.components&&n.components.Card||o.Card,e=a[0],l[9]={},a[9]=this.element({parent:e||"root"},!0===v?m:t),l[9].x=500,l[9].y=100,p[9]=[],void 0!==x[9])for(let S in x[9][Symbol.for("config")].props)delete l[9][x[9][Symbol.for("config")].props[S]],p[9].push(x[9][Symbol.for("config")].props[S]);if(a[9].populate(l[9]),!0===v&&(b-=1),e=a[9],c[10]={},c[10].x=500,c[10].y=100,h=c[10].is||"Card",o[10],"string"==typeof h){if(o[10]=n.components&&n.components[h]||o[h],!o[10])throw new Error('Component "Card" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[10]=h);if(a[10]=o[10].call(null,{props:c[10]},a[9],t),a[10][Symbol.for("slots")][0]?(e=a[10][Symbol.for("slots")][0],m=a[10],v=!0):e=a[10][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[11]=n.components&&n.components.Card||o.Card,e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},!0===v?m:t),l[11].x=500,l[11].y=500,l[11].size="large",p[11]=[],void 0!==x[11])for(let S in x[11][Symbol.for("config")].props)delete l[11][x[11][Symbol.for("config")].props[S]],p[11].push(x[11][Symbol.for("config")].props[S]);if(a[11].populate(l[11]),!0===v&&(b-=1),e=a[11],c[12]={},c[12].x=500,c[12].y=500,c[12].size="large",h=c[12].is||"Card",o[12],"string"==typeof h){if(o[12]=n.components&&n.components[h]||o[h],!o[12])throw new Error('Component "Card" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[12]=h);if(a[12]=o[12].call(null,{props:c[12]},a[11],t),a[12][Symbol.for("slots")][0]?(e=a[12][Symbol.for("slots")][0],m=a[12],v=!0):e=a[12][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},!0===v?m:t),l[13].x=1e3,l[13].y=100,a[13].populate(l[13]),!0===v&&(b-=1),e=a[13],l[14]={},a[14]=this.element({parent:e||"root"},!0===v?m:t),l[14].content="Dynamic components",l[14].__textnode=!0,a[14].populate(l[14]),!0===v&&(b-=1),x[15]=n.components&&n.components.Component||o.Component,e=a[13],l[15]={},a[15]=this.element({parent:e||"root"},!0===v?m:t),l[15].is=t.dynamicComponent,l[15].y=100,l[15].color="0x0000ffff",p[15]=[],void 0!==x[15])for(let S in x[15][Symbol.for("config")].props)delete l[15][x[15][Symbol.for("config")].props[S]],p[15].push(x[15][Symbol.for("config")].props[S]);if(a[15].populate(l[15]),!0===v&&(b-=1),e=a[15],c[16]={},c[16].is=t.dynamicComponent,c[16].y=100,c[16].color="0x0000ffff",h=c[16].is||"Component",o[16],"string"==typeof h){if(o[16]=n.components&&n.components[h]||o[h],!o[16])throw new Error('Component "Component" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[16]=h);a[16]=o[16].call(null,{props:c[16]},a[15],t),a[16][Symbol.for("slots")][0]?(e=a[16][Symbol.for("slots")][0],m=a[16],v=!0):e=a[16][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),e=a[13],d[17]=[],u[17]=(s=[],a,u)=>{const d=r(s),w=new Set;let S=d.length;const T={}||{};g=T.from||0,y="to"in T?T.to:d.length;for(;S--;)d[S],S<y&&S>=g&&w.add(""+S);let k=u.length;for(;k--;)if(!1===w.has(u[k])){const e=u[k];a[17][e]&&a[17][e].destroy(),a[17][e]=null,delete a[17][e],a[18][e]&&a[18][e].destroy(),a[18][e]=null,delete a[18][e]}u.length=0;const C=d.length,A=[];for(let I=0;I<C;I++){if(I<g||I>=y)continue;const s=Object.create(t);if(e=a[13],s.bla=d[I],s.index=I,s.key=""+I,u.push(s.key),x[17]=n.components&&n.components.Component||o.Component,void 0===a[17]&&(a[17]={}),l[17]={},void 0===a[17][s.key]&&(a[17][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[17].is=s.bla,l[17].x=205*s.index,l[17].y=300,p[17]=[],void 0!==x[17])for(let e in x[17][Symbol.for("config")].props)delete l[17][x[17][Symbol.for("config")].props[e]],p[17].push(x[17][Symbol.for("config")].props[e]);if(void 0===a[17][s.key].nodeId&&(a[17][s.key].populate(l[17]),!0===v&&(b-=1)),void 0===a[18]&&(a[18]={}),e=a[17][s.key],c[18]={},void 0===a[18][s.key]){if(c[18].is=s.bla,f=205*s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[18].x=f,c[18].y=300,h=c[18].is||"Component",o[18],"string"==typeof h){if(o[18]=n.components&&n.components[h]||o[h],!o[18])throw new Error('Component "Component" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[18]=h);a[18][s.key]=o[18].call(null,{props:c[18]},a[17][s.key],t),a[18][s.key][Symbol.for("slots")][0]?(e=a[18][s.key][Symbol.for("slots")][0],m=a[18][s.key],v=!0):e=a[18][s.key][Symbol.for("children")][0]}let w=()=>{void 0!==p&&void 0!==p[17]&&-1!==p[17].indexOf("x")||a[17][s.key].set("x",205*s.index)};i(w,null),A.push(w),t[Symbol.for("effects")].push(w),a[18][s.key][Symbol.for("props")].x=205*s.index}return A};let w=()=>{u[17](t.dynamicComponents,a,d[17])};return t[Symbol.for("effects")].push(w),i(w,["dynamicComponents"]),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,x[1]=null,c[2]=null,o[2]=null,x[3]=null,c[4]=null,o[4]=null,x[5]=null,c[6]=null,o[6]=null,x[7]=null,c[8]=null,o[8]=null,x[9]=null,c[10]=null,o[10]=null,x[11]=null,c[12]=null,o[12]=null,x[15]=null,c[16]=null,o[16]=null,d[17].length=0,u[17]=null,x[17]=null,c[18]=null,o[18]=null,w=null,x.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[7]&&-1!==skips[7].indexOf("x")||t[7].set("x",{transition:e.x})},function(e,t,n,o,i,r){t[8][Symbol.for("props")].x={transition:e.x}}],context:{}},state:()=>({x:100,dynamicComponent:gr,dynamicComponents:["Square","Card","Square",gr],toggle:!1,size:50}),hooks:{ready(){this.$setInterval(()=>{this.x=100===this.x?250:100,this.size=50===this.size?200:50},2e3)}}}),Zr=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],es=Di.Component("ForLoop",{components:{Square:Yr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===v?m:t),l[1].y=20,a[1].populate(l[1]),e=a[1],d[2]=[],u[2]=(n=[],o,i)=>{const s=r(n),a=new Set;let u=s.length;const c={}||{};g=c.from||0,y="to"in c?c.to:s.length;for(;u--;)s[u],u<y&&u>=g&&a.add(""+u);let d=i.length;for(;d--;)if(!1===a.has(i[d])){const e=i[d];o[2][e]&&o[2][e].destroy(),o[2][e]=null,delete o[2][e]}i.length=0;const p=s.length;for(let r=0;r<p;r++){if(r<g||r>=y)continue;const n=Object.create(t);e=o[1],n.item=s[r],n[void 0]=r,n.key=""+r,i.push(n.key),e=o[1],void 0===o[2]&&(o[2]={}),l[2]={},void 0===o[2][n.key]&&(o[2][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[2].w=80,l[2].h=80,l[2].x=n.item,l[2].color="0x4d7c0fff",void 0===o[2][n.key].nodeId&&o[2][n.key].populate(l[2])}return[]};let x,w,S=()=>{u[2](t.collection1,a,d[2])};t[Symbol.for("effects")].push(S),i(S,["collection1"]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===v?m:t),l[3].y=120,a[3].populate(l[3]),e=a[3],d[4]=[],u[4]=(n=[],o,s)=>{const a=r(n),u=new Set;let c=a.length;const d={}||{};x=d.from||0,w="to"in d?d.to:a.length;for(;c--;){const e=a[c];c<w&&c>=x&&u.add(""+e.id)}let p=s.length;for(;p--;)if(!1===u.has(s[p])){const e=s[p];o[4][e]&&o[4][e].destroy(),o[4][e]=null,delete o[4][e]}s.length=0;const h=a.length,f=[];for(let r=0;r<h;r++){if(r<x||r>=w)continue;const n=Object.create(t);e=o[3],n.item=a[r],n.index=r,n.key=""+n.item.id,s.push(n.key),e=o[3],void 0===o[4]&&(o[4]={}),l[4]={},void 0===o[4][n.key]&&(o[4][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[4].w=80,l[4].h=80,l[4].x=n.item.x*n.index,l[4].color=n.item.color,void 0===o[4][n.key].nodeId&&o[4][n.key].populate(l[4]);let u=()=>{o[4][n.key].set("x",n.item.x*n.index)};i(u,null),f.push(u),t[Symbol.for("effects")].push(u)}return f};let T,k,C=()=>{u[4](t.collection2,a,d[4])};t[Symbol.for("effects")].push(C),i(C,["collection2"]),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===v?m:t),l[5].y=220,a[5].populate(l[5]),e=a[5],d[6]=[],u[6]=(n=[],o,s)=>{const a=r(n),u=new Set;let c=a.length;const d={}||{};T=d.from||0,k="to"in d?d.to:a.length;for(;c--;)a[c],c<k&&c>=T&&u.add(""+c);let p=s.length;for(;p--;)if(!1===u.has(s[p])){const e=s[p];o[6][e]&&o[6][e].destroy(),o[6][e]=null,delete o[6][e]}s.length=0;const h=a.length,f=[];for(let r=0;r<h;r++){if(r<T||r>=k)continue;const n=Object.create(t);e=o[5],n.item=a[r],n[void 0]=r,n.key=""+r,s.push(n.key),e=o[5],void 0===o[6]&&(o[6]={}),l[6]={},void 0===o[6][n.key]&&(o[6][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[6].w=80,l[6].h=80,l[6].x=n.item.x,l[6].color=n.item.color,void 0===o[6][n.key].nodeId&&o[6][n.key].populate(l[6]);let u=()=>{o[6][n.key].set("x",n.item.x)};i(u,null),f.push(u),t[Symbol.for("effects")].push(u)}return f};let A,I,E=()=>{u[6](t.collection3,a,d[6])};t[Symbol.for("effects")].push(E),i(E,["collection3"]),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},!0===v?m:t),l[7].y=320,a[7].populate(l[7]),e=a[7],d[8]=[],u[8]=(s=[],a,u)=>{const d=r(s),g=new Set;let y=d.length;const x={}||{};A=x.from||0,I="to"in x?x.to:d.length;for(;y--;)d[y],y<I&&y>=A&&g.add(""+y);let w=u.length;for(;w--;)if(!1===g.has(u[w])){const e=u[w];a[8][e]&&a[8][e].destroy(),a[8][e]=null,delete a[8][e],a[9][e]&&a[9][e].destroy(),a[9][e]=null,delete a[9][e]}u.length=0;const S=d.length,T=[];for(let k=0;k<S;k++){if(k<A||k>=I)continue;const s=Object.create(t);if(e=a[7],s.item=d[k],s.index=k,s.key=""+k,u.push(s.key),b[8]=n.components&&n.components.Square||o.Square,void 0===a[8]&&(a[8]={}),l[8]={},void 0===a[8][s.key]&&(a[8][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[8].x=s.item.x*s.index,l[8].ref="square"+s.index,l[8].alpha=s.alpha,p[8]=[],void 0!==b[8])for(let e in b[8][Symbol.for("config")].props)delete l[8][b[8][Symbol.for("config")].props[e]],p[8].push(b[8][Symbol.for("config")].props[e]);if(void 0===a[8][s.key].nodeId&&a[8][s.key].populate(l[8]),void 0===a[9]&&(a[9]={}),e=a[8][s.key],c[9]={},void 0===a[9][s.key]){if(f=s.item.x*s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[9].x=f,f="square"+s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[9].ref=f,f=s.alpha,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[9].alpha=f,h=c[9].is||"Square",o[9],"string"==typeof h){if(o[9]=n.components&&n.components[h]||o[h],!o[9])throw new Error('Component "Square" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[9]=h);a[9][s.key]=o[9].call(null,{props:c[9]},a[8][s.key],t),a[9][s.key][Symbol.for("slots")][0]?(e=a[9][s.key][Symbol.for("slots")][0],m=a[9][s.key],v=!0):e=a[9][s.key][Symbol.for("children")][0]}let g=()=>{void 0!==p&&void 0!==p[8]&&-1!==p[8].indexOf("x")||a[8][s.key].set("x",s.item.x*s.index)};i(g,null),T.push(g),t[Symbol.for("effects")].push(g);let y=()=>{void 0!==p&&void 0!==p[8]&&-1!==p[8].indexOf("ref")||a[8][s.key].set("ref","square"+s.index)};i(y,null),T.push(y),t[Symbol.for("effects")].push(y),a[9][s.key][Symbol.for("props")].x=s.item.x*s.index,a[9][s.key][Symbol.for("props")].ref="square"+s.index}return T};let M=()=>{u[8](t.collection2,a,d[8])};t[Symbol.for("effects")].push(M),i(M,["collection2"]);let R=()=>{t.alpha;for(let e=0;e<t.collection2.length;e++){if(e<A||e>=I)continue;const n={};n.index=e,n.item=t.collection2[e],n.key=e,void 0!==p&&void 0!==p[8]&&-1!==p[8].indexOf("alpha")||a[8][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(R),i(R);let _,L,P=()=>{t.alpha;for(let e=0;e<t.collection2.length;e++){if(e<A||e>=I)continue;const n={};n.index=e,n.item=t.collection2[e],n.key=e,a[9][n.key][Symbol.for("props")].alpha=t.alpha}};t[Symbol.for("effects")].push(P),i(P),e=a[0],l[10]={},a[10]=this.element({parent:e||"root"},!0===v?m:t),l[10].y=420,a[10].populate(l[10]),e=a[10],d[11]=[],u[11]=(s=[],a,u)=>{const d=r(s),g=new Set;let y=d.length;const x={}||{};_=x.from||0,L="to"in x?x.to:d.length;for(;y--;){const e=d[y];y<L&&y>=_&&g.add(""+e.color)}let w=u.length;for(;w--;)if(!1===g.has(u[w])){const e=u[w];a[11][e]&&a[11][e].destroy(),a[11][e]=null,delete a[11][e],a[12][e]&&a[12][e].destroy(),a[12][e]=null,delete a[12][e]}u.length=0;const S=d.length,T=[];for(let k=0;k<S;k++){if(k<_||k>=L)continue;const s=Object.create(t);if(e=a[10],s.item=d[k],s[void 0]=k,s.key=""+s.item.color,u.push(s.key),b[11]=n.components&&n.components.Square||o.Square,void 0===a[11]&&(a[11]={}),l[11]={},void 0===a[11][s.key]&&(a[11][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[11].x=s.item.x,l[11].alpha=s.alpha,p[11]=[],void 0!==b[11])for(let e in b[11][Symbol.for("config")].props)delete l[11][b[11][Symbol.for("config")].props[e]],p[11].push(b[11][Symbol.for("config")].props[e]);if(void 0===a[11][s.key].nodeId&&a[11][s.key].populate(l[11]),void 0===a[12]&&(a[12]={}),e=a[11][s.key],c[12]={},void 0===a[12][s.key]){if(f=s.item.x,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[12].x=f,f=s.alpha,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[12].alpha=f,h=c[12].is||"Square",o[12],"string"==typeof h){if(o[12]=n.components&&n.components[h]||o[h],!o[12])throw new Error('Component "Square" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[12]=h);a[12][s.key]=o[12].call(null,{props:c[12]},a[11][s.key],t),a[12][s.key][Symbol.for("slots")][0]?(e=a[12][s.key][Symbol.for("slots")][0],m=a[12][s.key],v=!0):e=a[12][s.key][Symbol.for("children")][0]}let g=()=>{void 0!==p&&void 0!==p[11]&&-1!==p[11].indexOf("x")||a[11][s.key].set("x",s.item.x)};i(g,null),T.push(g),t[Symbol.for("effects")].push(g),a[12][s.key][Symbol.for("props")].x=s.item.x}return T};let D=()=>{u[11](t.collection3,a,d[11])};t[Symbol.for("effects")].push(D),i(D,["collection3"]);let O=()=>{t.alpha;for(let e=0;e<t.collection3.length;e++){if(e<_||e>=L)continue;const n={};n[void 0]=e,n.item=t.collection3[e],n.key=n.item.color,void 0!==p&&void 0!==p[11]&&-1!==p[11].indexOf("alpha")||a[11][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(O),i(O);let N,U,B=()=>{t.alpha;for(let e=0;e<t.collection3.length;e++){if(e<_||e>=L)continue;const n={};n[void 0]=e,n.item=t.collection3[e],n.key=n.item.color,a[12][n.key][Symbol.for("props")].alpha=t.alpha}};t[Symbol.for("effects")].push(B),i(B),e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},!0===v?m:t),l[13].y=520,a[13].populate(l[13]),e=a[13],d[14]=[],u[14]=(n=[],o,i)=>{const s=r(n),a=new Set;let u=s.length;const c={}||{};N=c.from||0,U="to"in c?c.to:s.length;for(;u--;)s[u],u<U&&u>=N&&a.add(""+u);let d=i.length;for(;d--;)if(!1===a.has(i[d])){const e=i[d];o[14][e]&&o[14][e].destroy(),o[14][e]=null,delete o[14][e]}i.length=0;const p=s.length;for(let r=0;r<p;r++){if(r<N||r>=U)continue;const n=Object.create(t);e=o[13],n.item=s[r],n[void 0]=r,n.key=""+r,i.push(n.key),e=o[13],void 0===o[14]&&(o[14]={}),l[14]={},void 0===o[14][n.key]&&(o[14][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[14].w=80,l[14].h=80,l[14].x=n.item,l[14].color="0xeab308ff",l[14].alpha=n.alpha,void 0===o[14][n.key].nodeId&&o[14][n.key].populate(l[14])}return[]};let F=()=>{u[14](t.collection1,a,d[14])};t[Symbol.for("effects")].push(F),i(F,["collection1"]);let j=()=>{t.item;for(let e=0;e<t.collection1.length;e++){if(e<N||e>=U)continue;const n={};n[void 0]=e,n.item=t.collection1[e],n.key=e,a[14][n.key].set("x",n.item)}};t[Symbol.for("effects")].push(j),i(j);let z,$,V=()=>{t.alpha;for(let e=0;e<t.collection1.length;e++){if(e<N||e>=U)continue;const n={};n[void 0]=e,n.item=t.collection1[e],n.key=e,a[14][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(V),i(V),e=a[0],l[15]={},a[15]=this.element({parent:e||"root"},!0===v?m:t),l[15].y=620,a[15].populate(l[15]),e=a[15],d[16]=[],u[16]=(n=[],o,s)=>{const a=r(n),u=new Set;let c=a.length;const d={}||{};z=d.from||0,$="to"in d?d.to:a.length;for(;c--;){const e=a[c];c<$&&c>=z&&u.add(""+e.id)}let p=s.length;for(;p--;)if(!1===u.has(s[p])){const e=s[p];o[16][e]&&o[16][e].destroy(),o[16][e]=null,delete o[16][e]}s.length=0;const h=a.length,f=[];for(let r=0;r<h;r++){if(r<z||r>=$)continue;const n=Object.create(t);e=o[15],n.item=a[r],n[void 0]=r,n.key=""+n.item.id,s.push(n.key),e=o[15],void 0===o[16]&&(o[16]={}),l[16]={},void 0===o[16][n.key]&&(o[16][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[16].w=80,l[16].h=80,l[16].x=n.item.x,l[16].color=n.item.color,l[16].alpha=n.alpha,void 0===o[16][n.key].nodeId&&o[16][n.key].populate(l[16]);let u=()=>{o[16][n.key].set("x",n.item.x)};i(u,null),f.push(u),t[Symbol.for("effects")].push(u)}return f};let H=()=>{u[16](t.collection2,a,d[16])};t[Symbol.for("effects")].push(H),i(H,["collection2"]);let G,q,W=()=>{t.alpha;for(let e=0;e<t.collection2.length;e++){if(e<z||e>=$)continue;const n={};n[void 0]=e,n.item=t.collection2[e],n.key=n.item.id,a[16][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(W),i(W),e=a[0],l[17]={},a[17]=this.element({parent:e||"root"},!0===v?m:t),l[17].y=720,a[17].populate(l[17]),e=a[17],d[18]=[],u[18]=(n=[],o,s)=>{const a=r(n),u=new Set;let c=a.length;const d={}||{};G=d.from||0,q="to"in d?d.to:a.length;for(;c--;){const e=a[c];c<q&&c>=G&&u.add(""+e.id)}let p=s.length;for(;p--;)if(!1===u.has(s[p])){const e=s[p];o[18][e]&&o[18][e].destroy(),o[18][e]=null,delete o[18][e]}s.length=0;const h=a.length,f=[];for(let r=0;r<h;r++){if(r<G||r>=q)continue;const n=Object.create(t);e=o[17],n.item=a[r],n[void 0]=r,n.key=""+n.item.id,s.push(n.key),e=o[17],void 0===o[18]&&(o[18]={}),l[18]={},void 0===o[18][n.key]&&(o[18][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[18].w=80,l[18].h=80,l[18].x=n.item.x,l[18].color="0x06b6d4ff",void 0===o[18][n.key].nodeId&&o[18][n.key].populate(l[18]);let u=()=>{o[18][n.key].set("x",n.item.x)};i(u,null),f.push(u),t[Symbol.for("effects")].push(u)}return f};let K,X,Y=()=>{u[18](t.collection4,a,d[18])};t[Symbol.for("effects")].push(Y),i(Y,["collection4"]),e=a[0],l[19]={},a[19]=this.element({parent:e||"root"},!0===v?m:t),l[19].y=720,l[19].x=700,a[19].populate(l[19]),e=a[19],d[20]=[],u[20]=(n=[],o,s)=>{const a=r(n),u=new Set;let c=a.length;const d={}||{};K=d.from||0,X="to"in d?d.to:a.length;for(;c--;)a[c],c<X&&c>=K&&u.add(""+c);let p=s.length;for(;p--;)if(!1===u.has(s[p])){const e=s[p];o[20][e]&&o[20][e].destroy(),o[20][e]=null,delete o[20][e]}s.length=0;const h=a.length,f=[];for(let r=0;r<h;r++){if(r<K||r>=X)continue;const n=Object.create(t);e=o[19],n.item=a[r],n[void 0]=r,n.key=""+r,s.push(n.key),e=o[19],void 0===o[20]&&(o[20]={}),l[20]={},void 0===o[20][n.key]&&(o[20][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[20].w=80,l[20].h=80,l[20].x=n.item.x,l[20].color="0x8b5cf6ff",void 0===o[20][n.key].nodeId&&o[20][n.key].populate(l[20]);let u=()=>{o[20][n.key].set("x",n.item.x)};i(u,null),f.push(u),t[Symbol.for("effects")].push(u)}return f};let J,Q,Z=()=>{u[20](t.collection4,a,d[20])};t[Symbol.for("effects")].push(Z),i(Z,["collection4"]),e=a[0],l[21]={},a[21]=this.element({parent:e||"root"},!0===v?m:t),l[21].y=920,a[21].populate(l[21]),e=a[21],d[22]=[],u[22]=(s=[],a,u)=>{const d=r(s),g=new Set;let y=d.length;const x={}||{};J=x.from||0,Q="to"in x?x.to:d.length;for(;y--;){const e=d[y];y<Q&&y>=J&&g.add(""+e.id)}let w=u.length;for(;w--;)if(!1===g.has(u[w])){const e=u[w];a[22][e]&&a[22][e].destroy(),a[22][e]=null,delete a[22][e],a[23][e]&&a[23][e].destroy(),a[23][e]=null,delete a[23][e]}u.length=0;const S=d.length,T=[];for(let k=0;k<S;k++){if(k<J||k>=Q)continue;const s=Object.create(t);if(e=a[21],s.item=d[k],s[void 0]=k,s.key=""+s.item.id,u.push(s.key),b[22]=n.components&&n.components.Square||o.Square,void 0===a[22]&&(a[22]={}),l[22]={},void 0===a[22][s.key]&&(a[22][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[22].w=80,l[22].h=80,l[22].x=s.item.x,p[22]=[],void 0!==b[22])for(let e in b[22][Symbol.for("config")].props)delete l[22][b[22][Symbol.for("config")].props[e]],p[22].push(b[22][Symbol.for("config")].props[e]);if(void 0===a[22][s.key].nodeId&&a[22][s.key].populate(l[22]),void 0===a[23]&&(a[23]={}),e=a[22][s.key],c[23]={},void 0===a[23][s.key]){if(c[23].w=80,c[23].h=80,f=s.item.x,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[23].x=f,h=c[23].is||"Square",o[23],"string"==typeof h){if(o[23]=n.components&&n.components[h]||o[h],!o[23])throw new Error('Component "Square" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[23]=h);a[23][s.key]=o[23].call(null,{props:c[23]},a[22][s.key],t),a[23][s.key][Symbol.for("slots")][0]?(e=a[23][s.key][Symbol.for("slots")][0],m=a[23][s.key],v=!0):e=a[23][s.key][Symbol.for("children")][0]}let g=()=>{void 0!==p&&void 0!==p[22]&&-1!==p[22].indexOf("x")||a[22][s.key].set("x",s.item.x)};i(g,null),T.push(g),t[Symbol.for("effects")].push(g),a[23][s.key][Symbol.for("props")].x=s.item.x}return T};let ee,te,ne=()=>{u[22](t.collection4,a,d[22])};t[Symbol.for("effects")].push(ne),i(ne,["collection4"]),e=a[0],l[24]={},a[24]=this.element({parent:e||"root"},!0===v?m:t),l[24].y=920,l[24].x=700,a[24].populate(l[24]),e=a[24],d[25]=[],u[25]=(s=[],a,u)=>{const d=r(s),g=new Set;let y=d.length;const x={}||{};ee=x.from||0,te="to"in x?x.to:d.length;for(;y--;)d[y],y<te&&y>=ee&&g.add(""+y);let w=u.length;for(;w--;)if(!1===g.has(u[w])){const e=u[w];a[25][e]&&a[25][e].destroy(),a[25][e]=null,delete a[25][e],a[26][e]&&a[26][e].destroy(),a[26][e]=null,delete a[26][e]}u.length=0;const S=d.length,T=[];for(let k=0;k<S;k++){if(k<ee||k>=te)continue;const s=Object.create(t);if(e=a[24],s.item=d[k],s[void 0]=k,s.key=""+k,u.push(s.key),b[25]=n.components&&n.components.Square||o.Square,void 0===a[25]&&(a[25]={}),l[25]={},void 0===a[25][s.key]&&(a[25][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[25].w=80,l[25].h=80,l[25].x=s.item.x,p[25]=[],void 0!==b[25])for(let e in b[25][Symbol.for("config")].props)delete l[25][b[25][Symbol.for("config")].props[e]],p[25].push(b[25][Symbol.for("config")].props[e]);if(void 0===a[25][s.key].nodeId&&a[25][s.key].populate(l[25]),void 0===a[26]&&(a[26]={}),e=a[25][s.key],c[26]={},void 0===a[26][s.key]){if(c[26].w=80,c[26].h=80,f=s.item.x,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[26].x=f,h=c[26].is||"Square",o[26],"string"==typeof h){if(o[26]=n.components&&n.components[h]||o[h],!o[26])throw new Error('Component "Square" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[26]=h);a[26][s.key]=o[26].call(null,{props:c[26]},a[25][s.key],t),a[26][s.key][Symbol.for("slots")][0]?(e=a[26][s.key][Symbol.for("slots")][0],m=a[26][s.key],v=!0):e=a[26][s.key][Symbol.for("children")][0]}let g=()=>{void 0!==p&&void 0!==p[25]&&-1!==p[25].indexOf("x")||a[25][s.key].set("x",s.item.x)};i(g,null),T.push(g),t[Symbol.for("effects")].push(g),a[26][s.key][Symbol.for("props")].x=s.item.x}return T};let oe=()=>{u[25](t.collection4,a,d[25])};return t[Symbol.for("effects")].push(oe),i(oe,["collection4"]),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,d[2].length=0,u[2]=null,S=null,d[4].length=0,u[4]=null,C=null,d[6].length=0,u[6]=null,E=null,d[8].length=0,u[8]=null,b[8]=null,c[9]=null,o[9]=null,M=null,R=null,P=null,d[11].length=0,u[11]=null,b[11]=null,c[12]=null,o[12]=null,D=null,O=null,B=null,d[14].length=0,u[14]=null,F=null,j=null,V=null,d[16].length=0,u[16]=null,H=null,W=null,d[18].length=0,u[18]=null,Y=null,d[20].length=0,u[20]=null,Z=null,d[22].length=0,u[22]=null,b[22]=null,c[23]=null,o[23]=null,ne=null,d[25].length=0,u[25]=null,b[25]=null,c[26]=null,o[26]=null,oe=null,b.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[],context:{}},state:()=>({collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:Zr[0]},{id:"block2",x:100,color:Zr[1]},{id:"block3",x:200,color:Zr[2]},{id:"block4",x:300,color:Zr[3]},{id:"block5",x:400,color:Zr[4]},{id:"block6",x:500,color:Zr[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}),hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=Zr[5],this.collection2[1].color=Zr[4],this.collection2[2].color=Zr[3],this.collection2[3].color=Zr[2],this.collection2[4].color=Zr[1],this.collection2[5].color=Zr[0]},4e3);let e=0;const t=this.$setInterval(()=>{this.collection3.push({x:100*e,color:Zr[e]}),e++,e===Zr.length&&clearInterval(t)},1e3);this.$setInterval(()=>{this.alpha=.5===this.alpha?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),ts=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],ns=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],os=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],is=e=>Math.round(1e3*Math.random())%e;let rs=0;const ss=()=>({id:rs++,text:`${ts[is(ts.length)]} ${ns[is(ns.length)]} ${os[is(os.length)]}`}),as=Di.Component("LegendItem",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),a[0].populate(l[0]),!0===h&&(f-=1),m[1]=n.components&&n.components.Circle||o.Circle,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].color="0xfb923cff",l[1].size=60,c[1]=[],void 0!==m[1])for(let g in m[1][Symbol.for("config")].props)delete l[1][m[1][Symbol.for("config")].props[g]],c[1].push(m[1][Symbol.for("config")].props[g]);if(a[1].populate(l[1]),!0===h&&(f-=1),e=a[1],u[2]={},u[2].color="0xfb923cff",u[2].size=60,d=u[2].is||"Circle",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "Circle" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);return a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],p=a[2],h=!0):e=a[2][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].color="0xe5e5e5ff",l[3].size=32,l[3].y=10,l[3].maxwidth=57,l[3].align="center",l[3].content=""+t.id,l[3].__textnode=!0,a[3].populate(l[3]),!0===h&&(f-=1),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===h?p:t),l[4].color="0xe5e5e5ff",l[4].x=80,l[4].y=14,l[4].size=28,l[4].content=""+t.text,l[4].__textnode=!0,a[4].populate(l[4]),!0===h&&(f-=1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[1]=null,u[2]=null,o[2]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[],context:{}},props:["id","text"]}),ls=Di.Component("Row",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=380,l[0].h=60,l[0].y=80*t.index,l[0].color="0xfff7edff",a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=10,l[1].h=60,l[1].color="0x06b6d4ff",a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].content=t.text,l[2].x=30,l[2].y=15,l[2].font="lato",l[2].size=28,l[2].color=t.activeRow==t.index?"0x06b6d4ff":"0x1e293bff",l[2].__textnode=!0,a[2].populate(l[2]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("y",80*e.index)},function(e,t,n,o,i,r){t[2].set("content",e.text)},function(e,t,n,o,i,r){t[2].set("color",e.activeRow==e.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),us=Di.Component("Rows",{components:{Row:ls},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),a[0].populate(l[0]),e=a[0],d[1]=[],u[1]=(s=[],a,u)=>{const d=r(s),x=new Set;let w=d.length;const S={}||{};g=S.from||0,y="to"in S?S.to:d.length;for(;w--;){const e=d[w];w<y&&w>=g&&x.add(e.id+"key2")}let T=u.length;for(;T--;)if(!1===x.has(u[T])){const e=u[T];a[1][e]&&a[1][e].destroy(),a[1][e]=null,delete a[1][e],a[2][e]&&a[2][e].destroy(),a[2][e]=null,delete a[2][e]}u.length=0;const k=d.length,C=[];for(let A=0;A<k;A++){if(A<g||A>=y)continue;const s=Object.create(t);if(e=a[0],s.item=d[A],s.index=A,s.key=s.item.id+"key2",u.push(s.key),b[1]=n.components&&n.components.Row||o.Row,void 0===a[1]&&(a[1]={}),l[1]={},void 0===a[1][s.key]&&(a[1][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[1].activeRow=s.activeRowIndex,l[1].index=s.index,l[1].text=s.item.text,l[1].y=50,p[1]=[],void 0!==b[1])for(let e in b[1][Symbol.for("config")].props)delete l[1][b[1][Symbol.for("config")].props[e]],p[1].push(b[1][Symbol.for("config")].props[e]);if(void 0===a[1][s.key].nodeId&&a[1][s.key].populate(l[1]),void 0===a[2]&&(a[2]={}),e=a[1][s.key],c[2]={},void 0===a[2][s.key]){if(f=s.activeRowIndex,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[2].activeRow=f,f=s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[2].index=f,f=s.item.text,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[2].text=f,c[2].y=50,h=c[2].is||"Row",o[2],"string"==typeof h){if(o[2]=n.components&&n.components[h]||o[h],!o[2])throw new Error('Component "Row" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[2]=h);a[2][s.key]=o[2].call(null,{props:c[2]},a[1][s.key],t),a[2][s.key][Symbol.for("slots")][0]?(e=a[2][s.key][Symbol.for("slots")][0],m=a[2][s.key],v=!0):e=a[2][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==p&&void 0!==p[1]&&-1!==p[1].indexOf("index")||a[1][s.key].set("index",s.index)};i(x,null),C.push(x),t[Symbol.for("effects")].push(x);let w=()=>{void 0!==p&&void 0!==p[1]&&-1!==p[1].indexOf("text")||a[1][s.key].set("text",s.item.text)};i(w,null),C.push(w),t[Symbol.for("effects")].push(w),a[2][s.key][Symbol.for("props")].index=s.index,a[2][s.key][Symbol.for("props")].text=s.item.text}return C};let x=()=>{u[1](t.data,a,d[1])};t[Symbol.for("effects")].push(x),i(x,["data"]);let w=()=>{t.activeRowIndex;for(let e=0;e<t.data.length;e++){if(e<g||e>=y)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",void 0!==p&&void 0!==p[1]&&-1!==p[1].indexOf("activeRow")||a[1][n.key].set("activeRow",t.activeRowIndex)}};t[Symbol.for("effects")].push(w),i(w);let S=()=>{t.activeRowIndex;for(let e=0;e<t.data.length;e++){if(e<g||e>=y)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",a[2][n.key][Symbol.for("props")].activeRow=t.activeRowIndex}};return t[Symbol.for("effects")].push(S),i(S),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,d[1].length=0,u[1]=null,b[1]=null,c[2]=null,o[2]=null,x=null,w=null,S=null,b.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[],context:{}},props:["data","activeRowIndex"]}),cs=Di.Component("ForLoop",{components:{Square:Yr,LegendItem:as,Row:ls,Rows:us},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=0,x=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),a[0].populate(l[0]),!0===v&&(b-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===v?m:t),l[1].x=100,l[1].y=60,l[1].size=48,l[1].content="Array operations test",l[1].__textnode=!0,a[1].populate(l[1]),!0===v&&(b-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===v?m:t),l[2].y=170,l[2].x=140,a[2].populate(l[2]),!0===v&&(b-=1),e=a[2],l[3]={},a[3]=this.element({parent:e||"root"},!0===v?m:t),l[3].x="-10",l[3].w=500,l[3].h=80,l[3].color="0x64748bff",l[3].y={transition:t.y},l[3].alpha={transition:!t.hide},a[3].populate(l[3]),!0===v&&(b-=1),x[4]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[4]={},a[4]=this.element({parent:e||"root"},!0===v?m:t),l[4].y=0,l[4].id="a",l[4].text="Fill array by assignment",p[4]=[],void 0!==x[4])for(let E in x[4][Symbol.for("config")].props)delete l[4][x[4][Symbol.for("config")].props[E]],p[4].push(x[4][Symbol.for("config")].props[E]);if(a[4].populate(l[4]),!0===v&&(b-=1),e=a[4],c[5]={},c[5].y=0,c[5].id="a",c[5].text="Fill array by assignment",h=c[5].is||"LegendItem",o[5],"string"==typeof h){if(o[5]=n.components&&n.components[h]||o[h],!o[5])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[5]=h);if(a[5]=o[5].call(null,{props:c[5]},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],m=a[5],v=!0):e=a[5][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[6]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[6]={},a[6]=this.element({parent:e||"root"},!0===v?m:t),l[6].y=90,l[6].id="b",l[6].text="Push new item to array",p[6]=[],void 0!==x[6])for(let E in x[6][Symbol.for("config")].props)delete l[6][x[6][Symbol.for("config")].props[E]],p[6].push(x[6][Symbol.for("config")].props[E]);if(a[6].populate(l[6]),!0===v&&(b-=1),e=a[6],c[7]={},c[7].y=90,c[7].id="b",c[7].text="Push new item to array",h=c[7].is||"LegendItem",o[7],"string"==typeof h){if(o[7]=n.components&&n.components[h]||o[h],!o[7])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[7]=h);if(a[7]=o[7].call(null,{props:c[7]},a[6],t),a[7][Symbol.for("slots")][0]?(e=a[7][Symbol.for("slots")][0],m=a[7],v=!0):e=a[7][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[8]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[8]={},a[8]=this.element({parent:e||"root"},!0===v?m:t),l[8].y=180,l[8].id="c",l[8].text="Pop item from array",p[8]=[],void 0!==x[8])for(let E in x[8][Symbol.for("config")].props)delete l[8][x[8][Symbol.for("config")].props[E]],p[8].push(x[8][Symbol.for("config")].props[E]);if(a[8].populate(l[8]),!0===v&&(b-=1),e=a[8],c[9]={},c[9].y=180,c[9].id="c",c[9].text="Pop item from array",h=c[9].is||"LegendItem",o[9],"string"==typeof h){if(o[9]=n.components&&n.components[h]||o[h],!o[9])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[9]=h);if(a[9]=o[9].call(null,{props:c[9]},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],m=a[9],v=!0):e=a[9][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[10]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[10]={},a[10]=this.element({parent:e||"root"},!0===v?m:t),l[10].y=270,l[10].id="d",l[10].text="Shift item from array",p[10]=[],void 0!==x[10])for(let E in x[10][Symbol.for("config")].props)delete l[10][x[10][Symbol.for("config")].props[E]],p[10].push(x[10][Symbol.for("config")].props[E]);if(a[10].populate(l[10]),!0===v&&(b-=1),e=a[10],c[11]={},c[11].y=270,c[11].id="d",c[11].text="Shift item from array",h=c[11].is||"LegendItem",o[11],"string"==typeof h){if(o[11]=n.components&&n.components[h]||o[h],!o[11])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[11]=h);if(a[11]=o[11].call(null,{props:c[11]},a[10],t),a[11][Symbol.for("slots")][0]?(e=a[11][Symbol.for("slots")][0],m=a[11],v=!0):e=a[11][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[12]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[12]={},a[12]=this.element({parent:e||"root"},!0===v?m:t),l[12].y=360,l[12].id="e",l[12].text="Splice 2 items from array",p[12]=[],void 0!==x[12])for(let E in x[12][Symbol.for("config")].props)delete l[12][x[12][Symbol.for("config")].props[E]],p[12].push(x[12][Symbol.for("config")].props[E]);if(a[12].populate(l[12]),!0===v&&(b-=1),e=a[12],c[13]={},c[13].y=360,c[13].id="e",c[13].text="Splice 2 items from array",h=c[13].is||"LegendItem",o[13],"string"==typeof h){if(o[13]=n.components&&n.components[h]||o[h],!o[13])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[13]=h);if(a[13]=o[13].call(null,{props:c[13]},a[12],t),a[13][Symbol.for("slots")][0]?(e=a[13][Symbol.for("slots")][0],m=a[13],v=!0):e=a[13][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[14]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[14]={},a[14]=this.element({parent:e||"root"},!0===v?m:t),l[14].y=450,l[14].id="f",l[14].text="Unshift 2 items into array",p[14]=[],void 0!==x[14])for(let E in x[14][Symbol.for("config")].props)delete l[14][x[14][Symbol.for("config")].props[E]],p[14].push(x[14][Symbol.for("config")].props[E]);if(a[14].populate(l[14]),!0===v&&(b-=1),e=a[14],c[15]={},c[15].y=450,c[15].id="f",c[15].text="Unshift 2 items into array",h=c[15].is||"LegendItem",o[15],"string"==typeof h){if(o[15]=n.components&&n.components[h]||o[h],!o[15])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[15]=h);if(a[15]=o[15].call(null,{props:c[15]},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],m=a[15],v=!0):e=a[15][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[16]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[16]={},a[16]=this.element({parent:e||"root"},!0===v?m:t),l[16].y=540,l[16].id="g",l[16].text="Empty array by assignment",p[16]=[],void 0!==x[16])for(let E in x[16][Symbol.for("config")].props)delete l[16][x[16][Symbol.for("config")].props[E]],p[16].push(x[16][Symbol.for("config")].props[E]);if(a[16].populate(l[16]),!0===v&&(b-=1),e=a[16],c[17]={},c[17].y=540,c[17].id="g",c[17].text="Empty array by assignment",h=c[17].is||"LegendItem",o[17],"string"==typeof h){if(o[17]=n.components&&n.components[h]||o[h],!o[17])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[17]=h);if(a[17]=o[17].call(null,{props:c[17]},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],m=a[17],v=!0):e=a[17][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[18]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[18]={},a[18]=this.element({parent:e||"root"},!0===v?m:t),l[18].y=630,l[18].id="h",l[18].text="Concat an array with items",p[18]=[],void 0!==x[18])for(let E in x[18][Symbol.for("config")].props)delete l[18][x[18][Symbol.for("config")].props[E]],p[18].push(x[18][Symbol.for("config")].props[E]);if(a[18].populate(l[18]),!0===v&&(b-=1),e=a[18],c[19]={},c[19].y=630,c[19].id="h",c[19].text="Concat an array with items",h=c[19].is||"LegendItem",o[19],"string"==typeof h){if(o[19]=n.components&&n.components[h]||o[h],!o[19])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[19]=h);if(a[19]=o[19].call(null,{props:c[19]},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],m=a[19],v=!0):e=a[19][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),x[20]=n.components&&n.components.LegendItem||o.LegendItem,e=a[2],l[20]={},a[20]=this.element({parent:e||"root"},!0===v?m:t),l[20].y=720,l[20].id="i",l[20].text="Sort array alphabetically",p[20]=[],void 0!==x[20])for(let E in x[20][Symbol.for("config")].props)delete l[20][x[20][Symbol.for("config")].props[E]],p[20].push(x[20][Symbol.for("config")].props[E]);if(a[20].populate(l[20]),!0===v&&(b-=1),e=a[20],c[21]={},c[21].y=720,c[21].id="i",c[21].text="Sort array alphabetically",h=c[21].is||"LegendItem",o[21],"string"==typeof h){if(o[21]=n.components&&n.components[h]||o[h],!o[21])throw new Error('Component "LegendItem" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[21]=h);a[21]=o[21].call(null,{props:c[21]},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],m=a[21],v=!0):e=a[21][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),e=a[2],l[22]={},a[22]=this.element({parent:e||"root"},!0===v?m:t),l[22].y=840,a[22].populate(l[22]),!0===v&&(b-=1),e=a[22],l[23]={},a[23]=this.element({parent:e||"root"},!0===v?m:t),l[23].size=26,l[23].y=10,l[23].content="Array length:",l[23].__textnode=!0,a[23].populate(l[23]),!0===v&&(b-=1),e=a[22],l[24]={},a[24]=this.element({parent:e||"root"},!0===v?m:t),l[24].content=t.data.length,l[24].size=40,l[24].x=180,l[24].color="0xfb923cff",l[24].__textnode=!0,a[24].populate(l[24]),!0===v&&(b-=1),e=a[0],l[25]={},a[25]=this.element({parent:e||"root"},!0===v?m:t),l[25].x=660,l[25].y=100,a[25].populate(l[25]),!0===v&&(b-=1),e=a[25],l[26]={},a[26]=this.element({parent:e||"root"},!0===v?m:t),l[26].content="For loop on Element",l[26].__textnode=!0,a[26].populate(l[26]),!0===v&&(b-=1),e=a[25],d[27]=[],u[27]=(n=[],o,s)=>{const a=r(n),u=new Set;let c=a.length;const d={}||{};g=d.from||0,y="to"in d?d.to:a.length;for(;c--;){const e=a[c];c<y&&c>=g&&u.add(e.id+"key")}let p=s.length;for(;p--;)if(!1===u.has(s[p])){const e=s[p];o[27][e]&&o[27][e].destroy(),o[27][e]=null,delete o[27][e],o[28][e]&&o[28][e].destroy(),o[28][e]=null,delete o[28][e],o[29][e]&&o[29][e].destroy(),o[29][e]=null,delete o[29][e]}s.length=0;const h=a.length,f=[];for(let r=0;r<h;r++){if(r<g||r>=y)continue;const n=Object.create(t);e=o[25],n.item=a[r],n.index=r,n.key=n.item.id+"key",s.push(n.key),e=o[25],void 0===o[27]&&(o[27]={}),l[27]={},void 0===o[27][n.key]&&(o[27][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[27].w=380,l[27].h=60,l[27].y=80*n.index+50,l[27].color="0xfff7edff",void 0===o[27][n.key].nodeId&&(o[27][n.key].populate(l[27]),!0===v&&(b-=1)),e=o[27][n.key],void 0===o[28]&&(o[28]={}),l[28]={},void 0===o[28][n.key]&&(o[28][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[28].w=10,l[28].h=60,l[28].color="0xfb923cff",void 0===o[28][n.key].nodeId&&(o[28][n.key].populate(l[28]),!0===v&&(b-=1)),e=o[27][n.key],void 0===o[29]&&(o[29]={}),l[29]={},void 0===o[29][n.key]&&(o[29][n.key]=this.element({parent:e||"root"},!0===v?m:t)),l[29].content=n.item.text,l[29].x=30,l[29].y=15,l[29].font="lato",l[29].size=28,l[29].color=n.activeRowIndex===n.index?"0x06b6d4ff":"0x1e293bff",l[29].__textnode=!0,void 0===o[29][n.key].nodeId&&(o[29][n.key].populate(l[29]),!0===v&&(b-=1));let u=()=>{o[27][n.key].set("y",80*n.index+50)};i(u,null),f.push(u),t[Symbol.for("effects")].push(u);let c=()=>{o[29][n.key].set("content",n.item.text)};i(c,null),f.push(c),t[Symbol.for("effects")].push(c)}return f};let w=()=>{u[27](t.data,a,d[27])};t[Symbol.for("effects")].push(w),i(w,["data"]);let S,T,k=()=>{t.activeRowIndex;for(let e=0;e<t.data.length;e++){if(e<g||e>=y)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key",a[29][n.key].set("color",t.activeRowIndex===n.index?"0x06b6d4ff":"0x1e293bff")}};t[Symbol.for("effects")].push(k),i(k),e=a[0],l[30]={},a[30]=this.element({parent:e||"root"},!0===v?m:t),l[30].x=1080,l[30].y=100,a[30].populate(l[30]),!0===v&&(b-=1),e=a[30],l[31]={},a[31]=this.element({parent:e||"root"},!0===v?m:t),l[31].content="For loop on Component",l[31].__textnode=!0,a[31].populate(l[31]),!0===v&&(b-=1),e=a[30],d[32]=[],u[32]=(s=[],a,u)=>{const d=r(s),g=new Set;let y=d.length;const w={}||{};S=w.from||0,T="to"in w?w.to:d.length;for(;y--;){const e=d[y];y<T&&y>=S&&g.add(e.id+"key2")}let k=u.length;for(;k--;)if(!1===g.has(u[k])){const e=u[k];a[32][e]&&a[32][e].destroy(),a[32][e]=null,delete a[32][e],a[33][e]&&a[33][e].destroy(),a[33][e]=null,delete a[33][e]}u.length=0;const C=d.length,A=[];for(let I=0;I<C;I++){if(I<S||I>=T)continue;const s=Object.create(t);if(e=a[30],s.item=d[I],s.index=I,s.key=s.item.id+"key2",u.push(s.key),x[32]=n.components&&n.components.Row||o.Row,void 0===a[32]&&(a[32]={}),l[32]={},void 0===a[32][s.key]&&(a[32][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[32].activeRow=(s.count,s.activeRowIndex),l[32].index=s.index,l[32].text=s.item.text,l[32].y=50,p[32]=[],void 0!==x[32])for(let e in x[32][Symbol.for("config")].props)delete l[32][x[32][Symbol.for("config")].props[e]],p[32].push(x[32][Symbol.for("config")].props[e]);if(void 0===a[32][s.key].nodeId&&(a[32][s.key].populate(l[32]),!0===v&&(b-=1)),void 0===a[33]&&(a[33]={}),e=a[32][s.key],c[33]={},void 0===a[33][s.key]){if(s.count,f=s.activeRowIndex,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[33].activeRow=f,f=s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[33].index=f,f=s.item.text,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[33].text=f,c[33].y=50,h=c[33].is||"Row",o[33],"string"==typeof h){if(o[33]=n.components&&n.components[h]||o[h],!o[33])throw new Error('Component "Row" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[33]=h);a[33][s.key]=o[33].call(null,{props:c[33]},a[32][s.key],t),a[33][s.key][Symbol.for("slots")][0]?(e=a[33][s.key][Symbol.for("slots")][0],m=a[33][s.key],v=!0):e=a[33][s.key][Symbol.for("children")][0]}let g=()=>{void 0!==p&&void 0!==p[32]&&-1!==p[32].indexOf("index")||a[32][s.key].set("index",s.index)};i(g,null),A.push(g),t[Symbol.for("effects")].push(g);let y=()=>{void 0!==p&&void 0!==p[32]&&-1!==p[32].indexOf("text")||a[32][s.key].set("text",s.item.text)};i(y,null),A.push(y),t[Symbol.for("effects")].push(y),a[33][s.key][Symbol.for("props")].index=s.index,a[33][s.key][Symbol.for("props")].text=s.item.text}return A};let C=()=>{u[32](t.data,a,d[32])};t[Symbol.for("effects")].push(C),i(C,["data"]);let A=()=>{t.activeRowIndex,t.count;for(let e=0;e<t.data.length;e++){if(e<S||e>=T)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",void 0!==p&&void 0!==p[32]&&-1!==p[32].indexOf("activeRow")||a[32][n.key].set("activeRow",(t.count,t.activeRowIndex))}};t[Symbol.for("effects")].push(A),i(A);let I=()=>{t.activeRowIndex,t.count;for(let e=0;e<t.data.length;e++){if(e<S||e>=T)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",a[33][n.key][Symbol.for("props")].activeRow=(t.count,t.activeRowIndex)}};if(t[Symbol.for("effects")].push(I),i(I),e=a[0],l[34]={},a[34]=this.element({parent:e||"root"},!0===v?m:t),l[34].x=1500,l[34].y=100,a[34].populate(l[34]),!0===v&&(b-=1),e=a[34],l[35]={},a[35]=this.element({parent:e||"root"},!0===v?m:t),l[35].content="RowsComponent",l[35].__textnode=!0,a[35].populate(l[35]),!0===v&&(b-=1),x[36]=n.components&&n.components.Rows||o.Rows,e=a[34],l[36]={},a[36]=this.element({parent:e||"root"},!0===v?m:t),l[36].data=t.data,l[36].activeRowIndex=t.activeRowIndex,p[36]=[],void 0!==x[36])for(let E in x[36][Symbol.for("config")].props)delete l[36][x[36][Symbol.for("config")].props[E]],p[36].push(x[36][Symbol.for("config")].props[E]);if(a[36].populate(l[36]),!0===v&&(b-=1),e=a[36],c[37]={},f=t.data,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[37].data=f,f=t.activeRowIndex,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[37].activeRowIndex=f,h=c[37].is||"Rows",o[37],"string"==typeof h){if(o[37]=n.components&&n.components[h]||o[h],!o[37])throw new Error('Component "Rows" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[37]=h);return a[37]=o[37].call(null,{props:c[37]},a[36],t),a[37][Symbol.for("slots")][0]?(e=a[37][Symbol.for("slots")][0],m=a[37],v=!0):e=a[37][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,x[4]=null,c[5]=null,o[5]=null,x[6]=null,c[7]=null,o[7]=null,x[8]=null,c[9]=null,o[9]=null,x[10]=null,c[11]=null,o[11]=null,x[12]=null,c[13]=null,o[13]=null,x[14]=null,c[15]=null,o[15]=null,x[16]=null,c[17]=null,o[17]=null,x[18]=null,c[19]=null,o[19]=null,x[20]=null,c[21]=null,o[21]=null,d[27].length=0,u[27]=null,w=null,k=null,d[32].length=0,u[32]=null,x[32]=null,c[33]=null,o[33]=null,C=null,A=null,I=null,x[36]=null,c[37]=null,o[37]=null,x.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){t[3].set("y",{transition:e.y})},function(e,t,n,o,i,r){t[3].set("alpha",{transition:!e.hide})},function(e,t,n,o,i,r){t[24].set("content",e.data.length)},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[36]&&-1!==skips[36].indexOf("data")||t[36].set("data",e.data)},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[36]&&-1!==skips[36].indexOf("activeRowIndex")||t[36].set("activeRowIndex",e.activeRowIndex)},function(e,t,n,o,i,r){t[37][Symbol.for("props")].data=e.data},function(e,t,n,o,i,r){t[37][Symbol.for("props")].activeRowIndex=e.activeRowIndex}],context:{}},state:()=>({count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}),computed:{show(){return this.hide,!0===this.hide},data2(){return this.data,this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const e=[];for(let t=0;t<6;t++)e.push(ss());this.data=e},b(){this.y=80,this.$trigger("y"),this.data.push(ss())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(ss(),ss())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(((e=1)=>{const t=[];for(let n=0;n<e;n++)t.push(ss());return t})(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=1===this.sortDirection?0:1,this.data=this.data.sort((e,t)=>{const n=e.text.toLowerCase(),o=t.text.toLowerCase();return 1===this.sortDirection?n<o?-1:n>o?1:0:n>o?-1:n<o?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),ds=Di.Component("Effects",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=160,l[1].h=160,l[1].x=40,l[1].y=40,l[1].color="0xfb923cff",l[1].effects=[{type:"radius",props:{radius:44}}],a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=160,l[2].h=160,l[2].x=240,l[2].y=40,l[2].color="0xd97706ff",l[2].effects=[{type:"radius",props:{radius:25}}],a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=160,l[3].h=160,l[3].x=440,l[3].y=40,l[3].color="0xb45309ff",l[3].effects=[{type:"radius",props:{radius:80}}],a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].w=160,l[4].h=160,l[4].x=640,l[4].y=40,l[4].color="0x78350fff",l[4].effects=[{type:"radius",props:{radius:10}}],a[4].populate(l[4]),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].w=160,l[5].h=160,l[5].x=40,l[5].y=240,l[5].color="0x65a30dff",l[5].effects=[{type:"radius",props:{radius:t.radius}}],a[5].populate(l[5]),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].w=300,l[6].h=300,l[6].x=40,l[6].y=440,l[6].color="0x0c4a6eff",l[6].effects=[{type:"radius",props:{radius:30}}],a[6].populate(l[6]),e=a[6],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].w=200,l[7].h=200,l[7].x=50,l[7].y=50,l[7].color="0x0284c7ff",l[7].effects=[{type:"radius",props:{radius:40}}],a[7].populate(l[7]),e=a[7],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].w=100,l[8].h=100,l[8].x=50,l[8].y=50,l[8].color="0x38bdf8ff",l[8].effects=[{type:"radius",props:{radius:50}}],a[8].populate(l[8]),e=a[8],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9].w=40,l[9].h=40,l[9].x=30,l[9].y=30,l[9].color="0xbae6fdff",l[9].effects=[{type:"radius",props:{radius:20}}],a[9].populate(l[9]),e=a[0],l[10]={},a[10]=this.element({parent:e||"root"},t),l[10].w=160,l[10].h=160,l[10].x=840,l[10].y=40,l[10].color="0x3b82f6ff",l[10].effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],a[10].populate(l[10]),e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},t),l[11].w=160,l[11].h=160,l[11].x=1040,l[11].y=40,l[11].color="0x500724ff",l[11].effects=t.effects,a[11].populate(l[11]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:44}}])},function(e,t,n,o,i,r){t[2].set("effects",[{type:"radius",props:{radius:25}}])},function(e,t,n,o,i,r){t[3].set("effects",[{type:"radius",props:{radius:80}}])},function(e,t,n,o,i,r){t[4].set("effects",[{type:"radius",props:{radius:10}}])},function(e,t,n,o,i,r){t[5].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,o,i,r){t[6].set("effects",[{type:"radius",props:{radius:30}}])},function(e,t,n,o,i,r){t[7].set("effects",[{type:"radius",props:{radius:40}}])},function(e,t,n,o,i,r){t[8].set("effects",[{type:"radius",props:{radius:50}}])},function(e,t,n,o,i,r){t[9].set("effects",[{type:"radius",props:{radius:20}}])},function(e,t,n,o,i,r){t[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(e,t,n,o,i,r){t[11].set("effects",e.effects)}],context:{}},state:()=>({direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}),hooks:{ready(){this.$setInterval(()=>{const e="up"===this.direction?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(e,80),0),80===this.radius&&(this.direction="down"),0===this.radius&&(this.direction="up")},500);let e=0;this.$setInterval(()=>{e++,this.effects=e%2?[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),ps=Di.Component("ShowIf",{components:{Square:Yr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].y=40,a[1].populate(l[1]),!0===f&&(m-=1),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),l[2].x=50,l[2].w=200,l[2].h=300,l[2].color="0xbef264ff",l[2].show=!0,a[2].populate(l[2]),!0===f&&(m-=1),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},!0===f?h:t),l[3].x=350,l[3].w=200,l[3].h=300,l[3].color="0xff0000ff",l[3].show=!1,a[3].populate(l[3]),!0===f&&(m-=1),e=a[1],l[4]={},a[4]=this.element({parent:e||"root"},!0===f?h:t),l[4].x=650,l[4].w=200,l[4].h=300,l[4].color="0x84cc16ff",l[4].show=1,a[4].populate(l[4]),!0===f&&(m-=1),e=a[1],l[5]={},a[5]=this.element({parent:e||"root"},!0===f?h:t),l[5].x=950,l[5].w=200,l[5].h=300,l[5].color="0xff0000ff",l[5].show=0,a[5].populate(l[5]),!0===f&&(m-=1),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},!0===f?h:t),l[6].y=380,a[6].populate(l[6]),!0===f&&(m-=1),e=a[6],l[7]={},a[7]=this.element({parent:e||"root"},!0===f?h:t),l[7].x=50,l[7].w=200,l[7].h=300,l[7].color="0xfde047ff",l[7].show=t.showNr,a[7].populate(l[7]),!0===f&&(m-=1),e=a[6],l[8]={},a[8]=this.element({parent:e||"root"},!0===f?h:t),l[8].x=350,l[8].w=200,l[8].h=300,l[8].color="0x0000ffff",l[8].show=t.hideNr,a[8].populate(l[8]),!0===f&&(m-=1),e=a[6],l[9]={},a[9]=this.element({parent:e||"root"},!0===f?h:t),l[9].x=650,l[9].w=200,l[9].h=300,l[9].color="0x84cc16ff",l[9].show=t.showBool,a[9].populate(l[9]),!0===f&&(m-=1),e=a[6],l[10]={},a[10]=this.element({parent:e||"root"},!0===f?h:t),l[10].x=950,l[10].w=200,l[10].h=300,l[10].color="0xff0000ff",l[10].show=t.hideBool,a[10].populate(l[10]),!0===f&&(m-=1),e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},!0===f?h:t),l[11].y=720,a[11].populate(l[11]),!0===f&&(m-=1),e=a[11],l[12]={},a[12]=this.element({parent:e||"root"},!0===f?h:t),l[12].x=50,l[12].w=200,l[12].h=300,l[12].color="0x5eead4ff",l[12].show=t.showHideToggle,a[12].populate(l[12]),!0===f&&(m-=1),e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},!0===f?h:t),l[13].y=40,l[13].x=1e3,a[13].populate(l[13]),!0===f&&(m-=1),g[14]=n.components&&n.components.Square||o.Square,e=a[13],l[14]={},a[14]=this.element({parent:e||"root"},!0===f?h:t),l[14].show=!0,c[14]=[],void 0!==g[14])for(let y in g[14][Symbol.for("config")].props)delete l[14][g[14][Symbol.for("config")].props[y]],c[14].push(g[14][Symbol.for("config")].props[y]);if(a[14].populate(l[14]),!0===f&&(m-=1),e=a[14],u[15]={},u[15].show=!0,d=u[15].is||"Square",o[15],"string"==typeof d){if(o[15]=n.components&&n.components[d]||o[d],!o[15])throw new Error('Component "Square" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[15]=d);if(a[15]=o[15].call(null,{props:u[15]},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],h=a[15],f=!0):e=a[15][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[16]=n.components&&n.components.Square||o.Square,e=a[13],l[16]={},a[16]=this.element({parent:e||"root"},!0===f?h:t),l[16].y=100,l[16].show=!1,c[16]=[],void 0!==g[16])for(let y in g[16][Symbol.for("config")].props)delete l[16][g[16][Symbol.for("config")].props[y]],c[16].push(g[16][Symbol.for("config")].props[y]);if(a[16].populate(l[16]),!0===f&&(m-=1),e=a[16],u[17]={},u[17].y=100,u[17].show=!1,d=u[17].is||"Square",o[17],"string"==typeof d){if(o[17]=n.components&&n.components[d]||o[d],!o[17])throw new Error('Component "Square" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[17]=d);if(a[17]=o[17].call(null,{props:u[17]},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],h=a[17],f=!0):e=a[17][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[18]=n.components&&n.components.Square||o.Square,e=a[13],l[18]={},a[18]=this.element({parent:e||"root"},!0===f?h:t),l[18].y=200,l[18].show=t.showHideToggle,c[18]=[],void 0!==g[18])for(let y in g[18][Symbol.for("config")].props)delete l[18][g[18][Symbol.for("config")].props[y]],c[18].push(g[18][Symbol.for("config")].props[y]);if(a[18].populate(l[18]),!0===f&&(m-=1),e=a[18],u[19]={},u[19].y=200,p=t.showHideToggle,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[19].show=p,d=u[19].is||"Square",o[19],"string"==typeof d){if(o[19]=n.components&&n.components[d]||o[d],!o[19])throw new Error('Component "Square" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[19]=d);return a[19]=o[19].call(null,{props:u[19]},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],h=a[19],f=!0):e=a[19][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[0],l[20]={},a[20]=this.element({parent:e||"root"},!0===f?h:t),l[20].y=40,l[20].x=1400,a[20].populate(l[20]),!0===f&&(m-=1),e=a[20],l[21]={},a[21]=this.element({parent:e||"root"},!0===f?h:t),l[21].w=80,l[21].h=80,l[21].show=!0,l[21].alpha=.8,l[21].color="0xff00e4ff",a[21].populate(l[21]),!0===f&&(m-=1),e=a[20],l[22]={},a[22]=this.element({parent:e||"root"},!0===f?h:t),l[22].y=100,l[22].w=80,l[22].h=80,l[22].show=!1,l[22].alpha=.8,l[22].color="0xff00e4ff",a[22].populate(l[22]),!0===f&&(m-=1),e=a[20],l[23]={},a[23]=this.element({parent:e||"root"},!0===f?h:t),l[23].y=200,l[23].w=80,l[23].h=80,l[23].show=t.showHideToggle,l[23].alpha=.8,l[23].color="0xff00e4ff",a[23].populate(l[23]),!0===f&&(m-=1),e=a[0],l[24]={},a[24]=this.element({parent:e||"root"},!0===f?h:t),l[24].x=1e3,l[24].y=380,l[24].direction="horizontal",l[24].gap=20,l[24].padding=20,l[24].color="0xffffffff",l[24].__layout=!0,a[24].populate(l[24]),!0===f&&(m-=1),e=a[24],l[25]={},a[25]=this.element({parent:e||"root"},!0===f?h:t),l[25].w=40,l[25].h=40,l[25].show=t.showHideToggle,l[25].color="0xbfdbfeff",a[25].populate(l[25]),!0===f&&(m-=1),e=a[24],l[26]={},a[26]=this.element({parent:e||"root"},!0===f?h:t),l[26].w=40,l[26].h=40,l[26].color="0x60a5faff",a[26].populate(l[26]),!0===f&&(m-=1),e=a[24],l[27]={},a[27]=this.element({parent:e||"root"},!0===f?h:t),l[27].w=40,l[27].h=40,l[27].color="0x2563ebff",a[27].populate(l[27]),!0===f&&(m-=1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[14]=null,u[15]=null,o[15]=null,g[16]=null,u[17]=null,o[17]=null,g[18]=null,u[19]=null,o[19]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[12].set("show",e.showHideToggle)},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("show")||t[18].set("show",e.showHideToggle)},function(e,t,n,o,i,r){t[19][Symbol.for("props")].show=e.showHideToggle},function(e,t,n,o,i,r){t[23].set("show",e.showHideToggle)},function(e,t,n,o,i,r){t[25].set("show",e.showHideToggle)}],context:{}},state:()=>({showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}),hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),hs=Di.Component("Events",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].x=400,l[0].y=360,a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=280,l[1].h=280,l[1].color="0xe5e7ebff",l[1].x=t.x,l[1].y="-5",a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=250,l[2].h=250,l[2].x=10,l[2].y=10,l[2].color=t.colors[0],a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=250,l[3].h=250,l[3].x=290,l[3].y=10,l[3].color=t.colors[1],a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].w=250,l[4].h=250,l[4].x=570,l[4].y=10,l[4].color=t.colors[2],a[4].populate(l[4]),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].w=250,l[5].h=250,l[5].x=850,l[5].y=10,l[5].color=t.colors[3],a[5].populate(l[5]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("x",e.x)}],context:{}},state:()=>({count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}),computed:{x(){return this.count,280*this.count-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(e){const t=this.count-1;-1===t?this.parent.$focus(e):this.count=Math.max(t,0)},right(e){const t=this.count+1;4===t?this.parent.$focus(e):this.count=Math.min(t,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),fs=Di.Component("SlotCard",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=300,l[0].h=500,l[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],l[0].color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1][Symbol.for("isSlot")]=!0,l[1].x=20,l[1].y=20,a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].content=t.label,l[2].maxwidth=260,l[2].x=20,l[2].y=400,l[2].align="center",l[2].__textnode=!0,a[2].populate(l[2]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),ms=Di.Component("NamedSlotCard",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=700,l[0].h=300,l[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],l[0].color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].x=20,l[1].y=20,a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].content="First slot",l[2].__textnode=!0,a[2].populate(l[2]),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3][Symbol.for("isSlot")]=!0,l[3].y=40,l[3].ref="first",a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].x=200,l[4].y=20,a[4].populate(l[4]),e=a[4],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].content="Second slot",l[5].__textnode=!0,a[5].populate(l[5]),e=a[4],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6][Symbol.for("isSlot")]=!0,l[6].y=40,l[6].ref="second",a[6].populate(l[6]),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].x=480,l[7].y=20,a[7].populate(l[7]),e=a[7],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].content="Third slot",l[8].__textnode=!0,a[8].populate(l[8]),e=a[7],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9][Symbol.for("isSlot")]=!0,l[9].y=40,l[9].ref="third",a[9].populate(l[9]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),gs=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],ys=Di.Component("Components",{components:{SlotCard:fs,NamedSlotCard:ms,Card:Jr,Square:Yr},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),a[0].populate(l[0]),!0===h&&(f-=1),m[1]=n.components&&n.components.SlotCard||o.SlotCard,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].x=400,l[1].y=100,l[1].label="Element",c[1]=[],void 0!==m[1])for(let g in m[1][Symbol.for("config")].props)delete l[1][m[1][Symbol.for("config")].props[g]],c[1].push(m[1][Symbol.for("config")].props[g]);if(a[1].populate(l[1]),!0===h&&(f-=1),e=a[1],u[2]={},u[2].x=400,u[2].y=100,u[2].label="Element",d=u[2].is||"SlotCard",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "SlotCard" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);if(a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],p=a[2],h=!0):e=a[2][Symbol.for("children")][0],!0===h&&(f=2),l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),a[3].populate(l[3]),!0===h&&(f-=1),e=a[3],l[4]={},a[4]=this.element({parent:e||"root"},!0===h?p:t),l[4].color=t.color,l[4].w=100,l[4].h=100,a[4].populate(l[4]),!0===h&&(f-=1),!0===h&&0===f&&(h=!1),m[5]=n.components&&n.components.SlotCard||o.SlotCard,e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===h?p:t),l[5].x=800,l[5].y=100,l[5].label="Component",c[5]=[],void 0!==m[5])for(let g in m[5][Symbol.for("config")].props)delete l[5][m[5][Symbol.for("config")].props[g]],c[5].push(m[5][Symbol.for("config")].props[g]);if(a[5].populate(l[5]),!0===h&&(f-=1),e=a[5],u[6]={},u[6].x=800,u[6].y=100,u[6].label="Component",d=u[6].is||"SlotCard",o[6],"string"==typeof d){if(o[6]=n.components&&n.components[d]||o[d],!o[6])throw new Error('Component "SlotCard" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[6]=d);if(a[6]=o[6].call(null,{props:u[6]},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],p=a[6],h=!0):e=a[6][Symbol.for("children")][0],!0===h&&(f=2),l[7]={},a[7]=this.element({parent:e||"root"},!0===h?p:t),a[7].populate(l[7]),!0===h&&(f-=1),m[8]=n.components&&n.components.Square||o.Square,e=a[7],l[8]={},a[8]=this.element({parent:e||"root"},!0===h?p:t),l[8].size=200,l[8].y=50,c[8]=[],void 0!==m[8])for(let g in m[8][Symbol.for("config")].props)delete l[8][m[8][Symbol.for("config")].props[g]],c[8].push(m[8][Symbol.for("config")].props[g]);if(a[8].populate(l[8]),!0===h&&(f-=1),e=a[8],u[9]={},u[9].size=200,u[9].y=50,d=u[9].is||"Square",o[9],"string"==typeof d){if(o[9]=n.components&&n.components[d]||o[d],!o[9])throw new Error('Component "Square" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[9]=d);if(a[9]=o[9].call(null,{props:u[9]},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],p=a[9],h=!0):e=a[9][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),!0===h&&0===f&&(h=!1),m[10]=n.components&&n.components.SlotCard||o.SlotCard,e=a[0],l[10]={},a[10]=this.element({parent:e||"root"},!0===h?p:t),l[10].x=1200,l[10].y=100,l[10].label="Element & Component",c[10]=[],void 0!==m[10])for(let g in m[10][Symbol.for("config")].props)delete l[10][m[10][Symbol.for("config")].props[g]],c[10].push(m[10][Symbol.for("config")].props[g]);if(a[10].populate(l[10]),!0===h&&(f-=1),e=a[10],u[11]={},u[11].x=1200,u[11].y=100,u[11].label="Element & Component",d=u[11].is||"SlotCard",o[11],"string"==typeof d){if(o[11]=n.components&&n.components[d]||o[d],!o[11])throw new Error('Component "SlotCard" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[11]=d);if(a[11]=o[11].call(null,{props:u[11]},a[10],t),a[11][Symbol.for("slots")][0]?(e=a[11][Symbol.for("slots")][0],p=a[11],h=!0):e=a[11][Symbol.for("children")][0],!0===h&&(f=3),l[12]={},a[12]=this.element({parent:e||"root"},!0===h?p:t),a[12].populate(l[12]),!0===h&&(f-=1),e=a[12],l[13]={},a[13]=this.element({parent:e||"root"},!0===h?p:t),l[13].color=t.color,l[13].w=100,l[13].h=100,a[13].populate(l[13]),!0===h&&(f-=1),m[14]=n.components&&n.components.Square||o.Square,e=a[12],l[14]={},a[14]=this.element({parent:e||"root"},!0===h?p:t),l[14].size=200,l[14].y=150,c[14]=[],void 0!==m[14])for(let g in m[14][Symbol.for("config")].props)delete l[14][m[14][Symbol.for("config")].props[g]],c[14].push(m[14][Symbol.for("config")].props[g]);if(a[14].populate(l[14]),!0===h&&(f-=1),e=a[14],u[15]={},u[15].size=200,u[15].y=150,d=u[15].is||"Square",o[15],"string"==typeof d){if(o[15]=n.components&&n.components[d]||o[d],!o[15])throw new Error('Component "Square" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[15]=d);if(a[15]=o[15].call(null,{props:u[15]},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],p=a[15],h=!0):e=a[15][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),!0===h&&0===f&&(h=!1),m[16]=n.components&&n.components.Card||o.Card,e=a[0],l[16]={},a[16]=this.element({parent:e||"root"},!0===h?p:t),l[16].x=400,l[16].y=700,l[16].size="small",c[16]=[],void 0!==m[16])for(let g in m[16][Symbol.for("config")].props)delete l[16][m[16][Symbol.for("config")].props[g]],c[16].push(m[16][Symbol.for("config")].props[g]);if(a[16].populate(l[16]),!0===h&&(f-=1),e=a[16],u[17]={},u[17].x=400,u[17].y=700,u[17].size="small",d=u[17].is||"Card",o[17],"string"==typeof d){if(o[17]=n.components&&n.components[d]||o[d],!o[17])throw new Error('Component "Card" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[17]=d);if(a[17]=o[17].call(null,{props:u[17]},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],p=a[17],h=!0):e=a[17][Symbol.for("children")][0],!0===h&&(f=2),l[18]={},a[18]=this.element({parent:e||"root"},!0===h?p:t),a[18].populate(l[18]),!0===h&&(f-=1),e=a[18],l[19]={},a[19]=this.element({parent:e||"root"},!0===h?p:t),l[19].color=t.color,l[19].w=100,l[19].h=100,a[19].populate(l[19]),!0===h&&(f-=1),!0===h&&0===f&&(h=!1),m[20]=n.components&&n.components.NamedSlotCard||o.NamedSlotCard,e=a[0],l[20]={},a[20]=this.element({parent:e||"root"},!0===h?p:t),l[20].x=800,l[20].y=700,c[20]=[],void 0!==m[20])for(let g in m[20][Symbol.for("config")].props)delete l[20][m[20][Symbol.for("config")].props[g]],c[20].push(m[20][Symbol.for("config")].props[g]);if(a[20].populate(l[20]),!0===h&&(f-=1),e=a[20],u[21]={},u[21].x=800,u[21].y=700,d=u[21].is||"NamedSlotCard",o[21],"string"==typeof d){if(o[21]=n.components&&n.components[d]||o[d],!o[21])throw new Error('Component "NamedSlotCard" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[21]=d);if(a[21]=o[21].call(null,{props:u[21]},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],p=a[21],h=!0):e=a[21][Symbol.for("children")][0],!0===h&&(f=5),l[22]={},a[22]=this.element({parent:e||"root"},!0===h?p:t),a[22].populate(l[22]),!0===h&&(f-=1),e=a[22],l[23]={},a[23]=this.element({parent:e||"root"},!0===h?p:t),l[23].color="0x0891b2ff",l[23].x=10,l[23].y=140,l[23].w=80,l[23].h=60,l[23].parent=void 0!==p[Symbol.for("slots")]&&!0===Array.isArray(p[Symbol.for("slots")])&&p[Symbol.for("slots")].filter(e=>"second"===e.ref).shift()||e,l[23].slot="second",a[23].populate(l[23]),!0===h&&(f-=1),e=a[22],l[24]={},a[24]=this.element({parent:e||"root"},!0===h?p:t),l[24].color=t.color,l[24].w=100,l[24].h=100,l[24].parent=void 0!==p[Symbol.for("slots")]&&!0===Array.isArray(p[Symbol.for("slots")])&&p[Symbol.for("slots")].filter(e=>"third"===e.ref).shift()||e,l[24].slot="third",a[24].populate(l[24]),!0===h&&(f-=1),m[25]=n.components&&n.components.Square||o.Square,e=a[22],l[25]={},a[25]=this.element({parent:e||"root"},!0===h?p:t),l[25].size=100,l[25].parent=void 0!==p[Symbol.for("slots")]&&!0===Array.isArray(p[Symbol.for("slots")])&&p[Symbol.for("slots")].filter(e=>"first"===e.ref).shift()||e,l[25].slot="first",c[25]=[],void 0!==m[25])for(let g in m[25][Symbol.for("config")].props)delete l[25][m[25][Symbol.for("config")].props[g]],c[25].push(m[25][Symbol.for("config")].props[g]);if(a[25].populate(l[25]),!0===h&&(f-=1),e=a[25],u[26]={},u[26].size=100,u[26].slot="first",d=u[26].is||"Square",o[26],"string"==typeof d){if(o[26]=n.components&&n.components[d]||o[d],!o[26])throw new Error('Component "Square" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[26]=d);return a[26]=o[26].call(null,{props:u[26]},a[25],t),a[26][Symbol.for("slots")][0]?(e=a[26][Symbol.for("slots")][0],p=a[26],h=!0):e=a[26][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),e=a[22],l[27]={},a[27]=this.element({parent:e||"root"},!0===h?p:t),l[27].color="0x4d7c0fff",l[27].x=40,l[27].y=40,l[27].w=40,l[27].h=60,l[27].parent=void 0!==p[Symbol.for("slots")]&&!0===Array.isArray(p[Symbol.for("slots")])&&p[Symbol.for("slots")].filter(e=>"second"===e.ref).shift()||e,l[27].slot="second",a[27].populate(l[27]),!0===h&&(f-=1),!0===h&&0===f&&(h=!1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[1]=null,u[2]=null,o[2]=null,m[5]=null,u[6]=null,o[6]=null,m[8]=null,u[9]=null,o[9]=null,m[10]=null,u[11]=null,o[11]=null,m[14]=null,u[15]=null,o[15]=null,m[16]=null,u[17]=null,o[17]=null,m[20]=null,u[21]=null,o[21]=null,m[25]=null,u[26]=null,o[26]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[4].set("color",e.color)},function(e,t,n,o,i,r){t[13].set("color",e.color)},function(e,t,n,o,i,r){t[19].set("color",e.color)},function(e,t,n,o,i,r){t[24].set("color",e.color)}],context:{}},state:()=>({color:gs[0]}),hooks:{ready(){this.$setInterval(()=>{const e=gs.indexOf(this.color)+1;this.color=e<=gs.length?gs[e]:gs[0]},600)}}}),vs=Di.Component("MemoryCard",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=320,l[0].h=200,l[0].x=360*t.col,l[0].y=250*t.row,l[0].scale={transition:t.scale},l[0].rotation={transition:t.disabled?-2:0},a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].h={transition:t.h},l[1].w=320,l[1].y=125,l[1].mount="{y: 0.5}",l[1].color={transition:t.disabled?"#ccc":"#fff"},l[1].src=t.image+"&w=320&h=200",l[1].effects=[{type:"radius",props:{radius:6}}],l[1].show=t.open,a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].h={transition:t.h},l[2].w=320,l[2].y=125,l[2].mount="{y: 0.5}",l[2].color=t.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},l[2].effects=[{type:"radius",props:{radius:6}}],a[2].populate(l[2]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("scale",{transition:e.scale})},function(e,t,n,o,i,r){t[0].set("rotation",{transition:e.disabled?-2:0})},function(e,t,n,o,i,r){t[1].set("h",{transition:e.h})},function(e,t,n,o,i,r){t[1].set("color",{transition:e.disabled?"#ccc":"#fff"})},function(e,t,n,o,i,r){t[1].set("src",e.image+"&w=320&h=200")},function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:6}}])},function(e,t,n,o,i,r){t[1].set("show",e.open)},function(e,t,n,o,i,r){t[2].set("h",{transition:e.h})},function(e,t,n,o,i,r){t[2].set("color",e.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(e,t,n,o,i,r){t[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state:()=>({disabled:!1,open:!1,h:200,scale:1,announcement:null}),hooks:{init(){this.$listen("closeMemoryCard",e=>{e===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",e=>{e===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(){this.scale=1.08;const e="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.announcement=this.$announcer.speak(e)},unfocus(){this.scale=1,this.announcement.cancel()}},input:{enter(){this.disabled||(this.open?this.$announcer.speak("Card already open. Choose another"):(this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)))}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),bs=Di.Component("Toggle",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=t.width,l[1].h=t.height,l[1].color="0x121212ff",l[1].alpha={transition:t.hasFocus?0:1},l[1].effects=[{type:"radius",props:{radius:t.radius}},{type:"border",props:{width:2,color:"0x888888ff"}}],a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].w=t.width,l[2].h=t.height,l[2].color="0x121212ff",l[2].alpha={transition:t.hasFocus?1:0},l[2].effects=[{type:"radius",props:{radius:t.radius}},{type:"border",props:{width:4,color:"0xffffffff"}}],a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=t.innerWidth,l[3].h=t.innerHeight,l[3].mount=.5,l[3].x={transition:t.toggled?t.width-t.offset:t.offset},l[3].y=t.height/2,l[3].color={transition:t.toggled?"#fff":"#888"},l[3].effects=[{type:"radius",props:{radius:t.innerRadius}}],a[3].populate(l[3]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("alpha",{transition:e.hasFocus?0:1})},function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:e.radius}},{type:"border",props:{width:2,color:"0x888888ff"}}])},function(e,t,n,o,i,r){t[2].set("alpha",{transition:e.hasFocus?1:0})},function(e,t,n,o,i,r){t[2].set("effects",[{type:"radius",props:{radius:e.radius}},{type:"border",props:{width:4,color:"0xffffffff"}}])},function(e,t,n,o,i,r){t[3].set("x",{transition:e.toggled?e.width-e.offset:e.offset})},function(e,t,n,o,i,r){t[3].set("color",{transition:e.toggled?"#fff":"#888"})},function(e,t,n,o,i,r){t[3].set("effects",[{type:"radius",props:{radius:e.innerRadius}}])}],context:{}},props:["toggled"],state:()=>({borderWidth:2,height:40,innerHeight:18,innerRadius:9,innerWidth:18,radius:20,width:60,offset:20})}),xs=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],ws=Di.Component("Announcer",{components:{MemoryCard:vs,Toggle:bs},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=0,x=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),a[0].populate(l[0]),!0===v&&(b-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===v?m:t),l[1].font="raleway",l[1].size=80,l[1].color="0xffffffff",l[1].content="Let's play memory!",l[1].x=580,l[1].y=60,l[1].__textnode=!0,a[1].populate(l[1]),!0===v&&(b-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===v?m:t),l[2].font="kalam",l[2].size=40,l[2].color="0xb91c1cff",l[2].content="the Accessible edition :)",l[2].x=1200,l[2].y=170,l[2].rotation="-6",l[2].__textnode=!0,a[2].populate(l[2]),!0===v&&(b-=1),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===v?m:t),l[3].size=26,l[3].color="0xffffffff",l[3].content="Announcer on / off",l[3].x=260,l[3].y=200,l[3].__textnode=!0,a[3].populate(l[3]),!0===v&&(b-=1),x[4]=n.components&&n.components.Toggle||o.Toggle,e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===v?m:t),l[4].ref="toggle",l[4].x=525,l[4].y=200,l[4].toggled=t.toggle,p[4]=[],void 0!==x[4])for(let S in x[4][Symbol.for("config")].props)delete l[4][x[4][Symbol.for("config")].props[S]],p[4].push(x[4][Symbol.for("config")].props[S]);if(a[4].populate(l[4]),!0===v&&(b-=1),e=a[4],c[5]={},c[5].ref="toggle",c[5].x=525,c[5].y=200,f=t.toggle,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[5].toggled=f,h=c[5].is||"Toggle",o[5],"string"==typeof h){if(o[5]=n.components&&n.components[h]||o[h],!o[5])throw new Error('Component "Toggle" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[5]=h);a[5]=o[5].call(null,{props:c[5]},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],m=a[5],v=!0):e=a[5][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},!0===v?m:t),l[6].x=260,l[6].y=260,a[6].populate(l[6]),!0===v&&(b-=1),e=a[6],d[7]=[],u[7]=(s=[],a,u)=>{const d=r(s),w=new Set;let S=d.length;const T={}||{};g=T.from||0,y="to"in T?T.to:d.length;for(;S--;){const e=d[S];S<y&&S>=g&&w.add(""+e.id)}let k=u.length;for(;k--;)if(!1===w.has(u[k])){const e=u[k];a[7][e]&&a[7][e].destroy(),a[7][e]=null,delete a[7][e],a[8][e]&&a[8][e].destroy(),a[8][e]=null,delete a[8][e]}u.length=0;const C=d.length,A=[];for(let I=0;I<C;I++){if(I<g||I>=y)continue;const s=Object.create(t);if(e=a[6],s.card=d[I],s.index=I,s.key=""+s.card.id,u.push(s.key),x[7]=n.components&&n.components.MemoryCard||o.MemoryCard,void 0===a[7]&&(a[7]={}),l[7]={},void 0===a[7][s.key]&&(a[7][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[7].col=s.index%4,l[7].row=Math.floor(s.index/4)%3,l[7].image=s.card.image,l[7].description=s.card.description,l[7].ref="card"+s.index,l[7].index=s.index,p[7]=[],void 0!==x[7])for(let e in x[7][Symbol.for("config")].props)delete l[7][x[7][Symbol.for("config")].props[e]],p[7].push(x[7][Symbol.for("config")].props[e]);if(void 0===a[7][s.key].nodeId&&(a[7][s.key].populate(l[7]),!0===v&&(b-=1)),void 0===a[8]&&(a[8]={}),e=a[7][s.key],c[8]={},void 0===a[8][s.key]){if(f=s.index%4,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[8].col=f,f=Math.floor(s.index/4)%3,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[8].row=f,c[8].image=s.card.image,c[8].description=s.card.description,f="card"+s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[8].ref=f,f=s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[8].index=f,h=c[8].is||"MemoryCard",o[8],"string"==typeof h){if(o[8]=n.components&&n.components[h]||o[h],!o[8])throw new Error('Component "MemoryCard" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[8]=h);a[8][s.key]=o[8].call(null,{props:c[8]},a[7][s.key],t),a[8][s.key][Symbol.for("slots")][0]?(e=a[8][s.key][Symbol.for("slots")][0],m=a[8][s.key],v=!0):e=a[8][s.key][Symbol.for("children")][0]}let w=()=>{void 0!==p&&void 0!==p[7]&&-1!==p[7].indexOf("col")||a[7][s.key].set("col",s.index%4)};i(w,null),A.push(w),t[Symbol.for("effects")].push(w);let S=()=>{void 0!==p&&void 0!==p[7]&&-1!==p[7].indexOf("row")||a[7][s.key].set("row",Math.floor(s.index/4)%3)};i(S,null),A.push(S),t[Symbol.for("effects")].push(S);let T=()=>{void 0!==p&&void 0!==p[7]&&-1!==p[7].indexOf("ref")||a[7][s.key].set("ref","card"+s.index)};i(T,null),A.push(T),t[Symbol.for("effects")].push(T);let k=()=>{void 0!==p&&void 0!==p[7]&&-1!==p[7].indexOf("index")||a[7][s.key].set("index",s.index)};i(k,null),A.push(k),t[Symbol.for("effects")].push(k),a[8][s.key][Symbol.for("props")].col=s.index%4,a[8][s.key][Symbol.for("props")].row=Math.floor(s.index/4)%3,a[8][s.key][Symbol.for("props")].ref="card"+s.index,a[8][s.key][Symbol.for("props")].index=s.index}return A};let w=()=>{u[7](t.cards,a,d[7])};return t[Symbol.for("effects")].push(w),i(w,["cards"]),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,x[4]=null,c[5]=null,o[5]=null,d[7].length=0,u[7]=null,x[7]=null,c[8]=null,o[8]=null,w=null,x.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[4]&&-1!==skips[4].indexOf("toggled")||t[4].set("toggled",e.toggle)},function(e,t,n,o,i,r){t[5][Symbol.for("props")].toggled=e.toggle}],context:{}},state:()=>({cards:xs.concat(xs).map((e,n)=>t(t({},e),{},{id:`card${n}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0,toggle:!0,focusable:["toggle"],focusIndex:0}),hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",e=>{this.openCards.length<2&&this.openCards.push(e),2===this.openCards.length&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},ready(){this.$announcer.enable(),this.focusedRow=0,this.focusedCol=0},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(e){-1!==this.focusedRow?(e+=4*this.focusedRow,this.$select("card"+e).$focus()):this.focusedRow=0},focusedRow(e){-1!==this.focusedCol?(e=this.focusedCol+4*e,this.$select("card"+e).$focus()):this.focusedCol=0}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){0===this.focusIndex&&(0===this.focusedCol?0===this.focusedRow?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1))},right(){0===this.focusIndex&&(3===this.focusedCol?2===this.focusedRow?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1))},up(){0===this.focusIndex&&(0===this.focusedRow?(this.$select("toggle").$focus(),this.focusIndex=-1):this.focusedRow=Math.max(0,this.focusedRow-1))},down(){-1===this.focusIndex?(this.$select("card0").$focus(),this.focusIndex=0,this.focusedRow=0,this.focusedCol=0):2===this.focusedRow?this.$announcer.speak("You are already at the last card"):this.focusedRow=Math.min(2,this.focusedRow+1)},enter(){-1===this.focusIndex&&(this.toggle=!this.toggle,console.log("Toggle:",this.toggle),this.toggle?this.$announcer.enable():this.$announcer.disable())}}}),Ss=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),Ts=Di.Component("Item",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].src="assets/blits-b-small.png",l[0].w=96,l[0].h=168,l[0].x={transition:{value:t.x,duration:2900}},l[0].y={transition:{value:t.y,duration:2900}},l[0].rotation={transition:{value:t.rotation,duration:2900}},l[0].scale={transition:{value:t.scale,duration:1e3}},a[0].populate(l[0]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("x",{transition:{value:e.x,duration:2900}})},function(e,t,n,o,i,r){t[0].set("y",{transition:{value:e.y,duration:2900}})},function(e,t,n,o,i,r){t[0].set("rotation",{transition:{value:e.rotation,duration:2900}})},function(e,t,n,o,i,r){t[0].set("scale",{transition:{value:e.scale,duration:1e3}})}],context:{}},state:()=>({x:Ss(20,1560),y:Ss(20,720),rotation:0,scale:.1}),hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=Ss(20,1740),this.y=Ss(20,900),this.rotation=Ss(10,360)},3e3)}}}),ks=Di.Component("Exponential",{components:{Item:Ts},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y=!1,v=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===y?f:t),a[0].populate(l[0]),e=a[0],d[1]=[],u[1]=(i=[],s,a)=>{const u=r(i),d=new Set;let b=u.length;const x={}||{};m=x.from||0,g="to"in x?x.to:u.length;for(;b--;){const e=u[b];b<g&&b>=m&&d.add(""+e)}let w=a.length;for(;w--;)if(!1===d.has(a[w])){const e=a[w];s[1][e]&&s[1][e].destroy(),s[1][e]=null,delete s[1][e],s[2][e]&&s[2][e].destroy(),s[2][e]=null,delete s[2][e]}a.length=0;const S=u.length;for(let r=0;r<S;r++){if(r<m||r>=g)continue;const i=Object.create(t);if(e=s[0],i.item=u[r],i[void 0]=r,i.key=""+i.item,a.push(i.key),v[1]=n.components&&n.components.Item||o.Item,void 0===s[1]&&(s[1]={}),l[1]={},void 0===s[1][i.key]&&(s[1][i.key]=this.element({parent:e||"root"},!0===y?f:t)),p[1]=[],void 0!==v[1])for(let e in v[1][Symbol.for("config")].props)delete l[1][v[1][Symbol.for("config")].props[e]],p[1].push(v[1][Symbol.for("config")].props[e]);if(void 0===s[1][i.key].nodeId&&s[1][i.key].populate(l[1]),void 0===s[2]&&(s[2]={}),e=s[1][i.key],c[2]={},void 0===s[2][i.key]){if(h=c[2].is||"Item",o[2],"string"==typeof h){if(o[2]=n.components&&n.components[h]||o[h],!o[2])throw new Error('Component "Item" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[2]=h);s[2][i.key]=o[2].call(null,{props:c[2]},s[1][i.key],t),s[2][i.key][Symbol.for("slots")][0]?(e=s[2][i.key][Symbol.for("slots")][0],f=s[2][i.key],y=!0):e=s[2][i.key][Symbol.for("children")][0]}}return[]};let b=()=>{u[1](t.items,a,d[1])};return t[Symbol.for("effects")].push(b),i(b,["items"]),{elms:a,cleanup:()=>{f=null,t=null,e=null,d[1].length=0,u[1]=null,v[1]=null,c[2]=null,o[2]=null,b=null,v.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[],context:{}},state:()=>({items:[]}),hooks:{ready(){const e=this.$setInterval(()=>{for(let e=0;e<=Math.floor(this.items.length/10);e++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(e)},2e3)}}}),Cs=Di.Component("Ball",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=100,l[0].h=100,l[0].src="/assets/basketball.png",a[0].populate(l[0]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),As=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),Is=Di.Component("Viewport",{components:{Ball:Cs},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].size=32,l[1].x=960,l[1].y=540,l[1].mount=.5,l[1].content=t.status.join("\n"),l[1].lineheight=52,l[1].maxwidth=500,l[1].__textnode=!0,a[1].populate(l[1]),!0===f&&(m-=1),g[2]=n.components&&n.components.Ball||o.Ball,e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),l[2].x={transition:{value:t.x,duration:1250}},l[2].y={transition:{value:t.y,duration:1250}},l[2].rotation={transition:{value:t.rotation,duration:1400,easing:"ease-in-out"}},l[2].w=100,l[2].h=100,c[2]=[],void 0!==g[2])for(let y in g[2][Symbol.for("config")].props)delete l[2][g[2][Symbol.for("config")].props[y]],c[2].push(g[2][Symbol.for("config")].props[y]);if(a[2].populate(l[2]),!0===f&&(m-=1),e=a[2],u[3]={},p={transition:{value:t.x,duration:1250}},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[3].x=p,p={transition:{value:t.y,duration:1250}},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[3].y=p,p={transition:{value:t.rotation,duration:1400,easing:"ease-in-out"}},!0===Array.isArray(p)&&(p=r(p).slice(0)),u[3].rotation=p,u[3].w=100,u[3].h=100,d=u[3].is||"Ball",o[3],"string"==typeof d){if(o[3]=n.components&&n.components[d]||o[d],!o[3])throw new Error('Component "Ball" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[3]=d);return a[3]=o[3].call(null,{props:u[3]},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],h=a[3],f=!0):e=a[3][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[2]=null,u[3]=null,o[3]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("content",e.status.join("\n"))},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("x")||t[2].set("x",{transition:{value:e.x,duration:1250}})},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("y")||t[2].set("y",{transition:{value:e.y,duration:1250}})},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("rotation")||t[2].set("rotation",{transition:{value:e.rotation,duration:1400,easing:"ease-in-out"}})},function(e,t,n,o,i,r){t[3][Symbol.for("props")].x={transition:{value:e.x,duration:1250}}},function(e,t,n,o,i,r){t[3][Symbol.for("props")].y={transition:{value:e.y,duration:1250}}},function(e,t,n,o,i,r){t[3][Symbol.for("props")].rotation={transition:{value:e.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state:()=>({x:-400,y:-400,rotation:0,status:[],count:1}),hooks:{ready(){this.$listen("ballUpdate",e=>{this.status.unshift(`${this.count++} -  ${e}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=As(-90,90),this.x=910,this.y=490,this.$setInterval(()=>{this.x=As(-300,2220),this.y=As(-300,1380),this.rotation=As(-90,90)},2500)}}}),Es={code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=1920,l[0].h=1080,l[0].color="0xffffffff",l[0].effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].show=void 0!==t.up,a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].src="assets/arrow.png",l[2].w=100,l[2].h=44,l[2].x=960,l[2].y=40,l[2].mount="{x: 0.5}",a[2].populate(l[2]),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].content=t.up&&t.up.toUpperCase(),l[3].x=960,l[3].y=100,l[3].size=76,l[3].mount="{x: 0.5}",l[3].__textnode=!0,a[3].populate(l[3]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].show=void 0!==t.right,a[4].populate(l[4]),e=a[4],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].src="assets/arrow.png",l[5].w=100,l[5].h=44,l[5].x=1900,l[5].y=540,l[5].mount="{x: 1, y: 0.5}",l[5].rotation=90,a[5].populate(l[5]),e=a[4],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].content=t.right&&t.right.toUpperCase(),l[6].x=1760,l[6].y=540,l[6].size=76,l[6].rotation=90,l[6].mount=.5,l[6].__textnode=!0,a[6].populate(l[6]),e=a[0],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].show=void 0!==t.down,a[7].populate(l[7]),e=a[7],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].src="assets/arrow.png",l[8].w=100,l[8].h=44,l[8].x=960,l[8].y=1040,l[8].mount="{x: 0.5, y: 1}",l[8].rotation=180,a[8].populate(l[8]),e=a[7],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9].content=t.down&&t.down.toUpperCase(),l[9].x=960,l[9].y=980,l[9].size=76,l[9].mount="{x: 0.5, y: 1}",l[9].__textnode=!0,a[9].populate(l[9]),e=a[0],l[10]={},a[10]=this.element({parent:e||"root"},t),l[10].show=void 0!==t.left,a[10].populate(l[10]),e=a[10],l[11]={},a[11]=this.element({parent:e||"root"},t),l[11].src="assets/arrow.png",l[11].w=100,l[11].h=44,l[11].x=40,l[11].y=540,l[11].mount="{ y: 0.5}",l[11].rotation="-90",a[11].populate(l[11]),e=a[10],l[12]={},a[12]=this.element({parent:e||"root"},t),l[12].content=t.left&&t.left.toUpperCase(),l[12].x=180,l[12].y=540,l[12].size=76,l[12].mount=.5,l[12].rotation="-90",l[12].__textnode=!0,a[12].populate(l[12]),e=a[0],l[13]={},a[13]=this.element({parent:e||"root"},t),l[13].content=t.pageTitle,l[13].font="raleway",l[13].x=960,l[13].y=540,l[13].size=240,l[13].mount=.5,l[13].__textnode=!0,a[13].populate(l[13]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(e,t,n,o,i,r){t[1].set("show",void 0!==e.up)},function(e,t,n,o,i,r){t[3].set("content",e.up&&e.up.toUpperCase())},function(e,t,n,o,i,r){t[4].set("show",void 0!==e.right)},function(e,t,n,o,i,r){t[6].set("content",e.right&&e.right.toUpperCase())},function(e,t,n,o,i,r){t[7].set("show",void 0!==e.down)},function(e,t,n,o,i,r){t[9].set("content",e.down&&e.down.toUpperCase())},function(e,t,n,o,i,r){t[10].set("show",void 0!==e.left)},function(e,t,n,o,i,r){t[12].set("content",e.left&&e.left.toUpperCase())},function(e,t,n,o,i,r){t[13].set("content",e.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state:()=>({title:"Start",up:"up",right:"right",down:"down",left:"left"})},Ms=Di.Component("RouterHookPage",t(t({},Es),{},{state:()=>({title:"Start",down:"episode flow",right:"movie flow"}),input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}})),Rs=Di.Component("RouterHookMovie",t(t({},Es),{},{state:()=>({title:"Movie",left:"Back",right:"Rating"}),input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}})),_s=Di.Component("RouterHookRating",t(t({},Es),{},{state:()=>({title:"Rating",left:"Back",right:"TO START"}),input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}})),Ls=Di.Component("RouterHookEpisode",t(t({},Es),{},{state:()=>({title:"Episode",left:"Back",right:"NEXT EPISODE"}),input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}})),Ps=Di.Component("RouterHookEpisode",t(t({},Es),{},{state:()=>({title:"Episodes \n overview",right:"FIRST EPISODE"}),input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}})),Ds={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},Os=[{path:"/examples/router-hooks",component:Ms,hooks:{before:async(e,t)=>(t&&"examples/router-hooks/movie"===t.path&&(e.transition=Ds.slideInOutRight),t&&"examples/router-hooks/rating"===t.path&&(e.transition=Ds.slideInOutLeft),t&&t.path.indexOf("episode")>-1&&(e.transition=Ds.slideInOutDown),e)}},{path:"/examples/router-hooks/episode/:id",component:Ls,hooks:{before(e,t){t&&t.path.indexOf("episode")>-1&&(e.transition=Ds.slideInOutLeft);const{id:n}=e.params;return n>5?"/examples/router-hooks/":(e.data.page={id:parseInt(n),title:`Episode ${n}`},e)}},transition:Ds.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:Ps,transition:Ds.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:Rs,hooks:{before:(e,t)=>(t&&"examples/router-hooks"===t.path&&(e.transition=Ds.slideInOutLeft),t&&"examples/router-hooks/rating"===t.path&&(e.transition=Ds.slideInOutRight),e)}},{path:"/examples/router-hooks/rating",component:_s,transition:Ds.slideInOutLeft}],Ns=Di.Component("Resize",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].y=30,l[1].content="fit (Resize Mode) sample",l[1].maxwidth=1920,l[1].align="center",l[1].__textnode=!0,a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].x={transition:{value:t.pages.x1,duration:200}},l[2].y=90,a[2].populate(l[2]),e=a[2],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].x=100,l[3].content="Image dimensions: 2560 X 1440",l[3].__textnode=!0,a[3].populate(l[3]),e=a[2],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].x=100,l[4].y=80,l[4].content=t.titles.t1,l[4].__textnode=!0,a[4].populate(l[4]),e=a[2],l[5]={},a[5]=this.element({parent:e||"root"},t),l[5].y=150,l[5].x=100,a[5].populate(l[5]),e=a[5],l[6]={},a[6]=this.element({parent:e||"root"},t),l[6].w=t.w,l[6].h=t.w-300,l[6].src=t.img,l[6].fit="{type: 'cover', position: { y: 0 } }",a[6].populate(l[6]),e=a[5],l[7]={},a[7]=this.element({parent:e||"root"},t),l[7].w=t.w,l[7].h=t.w-300,l[7].src=t.img,l[7].fit="{ type: 'cover', position: { y: 0.5 } }",l[7].x=600,a[7].populate(l[7]),e=a[5],l[8]={},a[8]=this.element({parent:e||"root"},t),l[8].w=t.w,l[8].h=t.w-300,l[8].src=t.img,l[8].fit="{ type: 'cover', position: { y: 1 } }",l[8].x=1200,a[8].populate(l[8]),e=a[2],l[9]={},a[9]=this.element({parent:e||"root"},t),l[9].x=100,l[9].y=500,l[9].content=t.titles.t2,l[9].__textnode=!0,a[9].populate(l[9]),e=a[2],l[10]={},a[10]=this.element({parent:e||"root"},t),l[10].y=600,l[10].x=100,a[10].populate(l[10]),e=a[10],l[11]={},a[11]=this.element({parent:e||"root"},t),l[11].w=t.w,l[11].h=t.w-150,l[11].src=t.img,l[11].fit="{ type: 'cover', position: { x: 0 } }",a[11].populate(l[11]),e=a[10],l[12]={},a[12]=this.element({parent:e||"root"},t),l[12].w=t.w,l[12].h=t.w-150,l[12].src=t.img,l[12].fit="{ type: 'cover', position: { x: 0.5 } }",l[12].x=600,a[12].populate(l[12]),e=a[10],l[13]={},a[13]=this.element({parent:e||"root"},t),l[13].w=t.w,l[13].h=t.w-150,l[13].src=t.img,l[13].fit="{ type: 'cover', position: { x: 1 } }",l[13].x=1200,a[13].populate(l[13]),e=a[0],l[14]={},a[14]=this.element({parent:e||"root"},t),l[14].x={transition:{value:t.pages.x2,duration:200}},l[14].y=90,a[14].populate(l[14]),e=a[14],l[15]={},a[15]=this.element({parent:e||"root"},t),l[15].x=100,l[15].content="Image dimensions: 1440 X 2560",l[15].__textnode=!0,a[15].populate(l[15]),e=a[14],l[16]={},a[16]=this.element({parent:e||"root"},t),l[16].x=100,l[16].y=80,l[16].content=t.titles.t3,l[16].__textnode=!0,a[16].populate(l[16]),e=a[14],l[17]={},a[17]=this.element({parent:e||"root"},t),l[17].y=150,l[17].x=100,a[17].populate(l[17]),e=a[17],l[18]={},a[18]=this.element({parent:e||"root"},t),l[18].w=t.w,l[18].h=t.w-200,l[18].src=t.img1,l[18].fit="{ type: 'cover', position: { y: 0, x: 0 } }",a[18].populate(l[18]),e=a[17],l[19]={},a[19]=this.element({parent:e||"root"},t),l[19].w=t.w,l[19].h=t.w-200,l[19].src=t.img1,l[19].fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",l[19].x=600,a[19].populate(l[19]),e=a[17],l[20]={},a[20]=this.element({parent:e||"root"},t),l[20].w=t.w,l[20].h=t.w-200,l[20].src=t.img1,l[20].fit="{ type: 'cover', position: { y: 1, x: 1 } }",l[20].x=1200,a[20].populate(l[20]),e=a[14],l[21]={},a[21]=this.element({parent:e||"root"},t),l[21].x=100,l[21].y=500,l[21].content=t.titles.t4,l[21].__textnode=!0,a[21].populate(l[21]),e=a[14],l[22]={},a[22]=this.element({parent:e||"root"},t),l[22].y=570,l[22].x=100,a[22].populate(l[22]),e=a[22],l[23]={},a[23]=this.element({parent:e||"root"},t),l[23].w=t.w-350,l[23].h=t.w-100,l[23].src=t.img1,l[23].fit="{ type: 'cover', position: { x: 0 } }",a[23].populate(l[23]),e=a[22],l[24]={},a[24]=this.element({parent:e||"root"},t),l[24].w=t.w-350,l[24].h=t.w-100,l[24].src=t.img1,l[24].fit="{ type: 'cover', position: { x: 0.25 } }",l[24].x=250,a[24].populate(l[24]),e=a[22],l[25]={},a[25]=this.element({parent:e||"root"},t),l[25].w=t.w-350,l[25].h=t.w-100,l[25].src=t.img1,l[25].fit="{ type: 'cover', position: { x: 0.5 } }",l[25].x=500,a[25].populate(l[25]),e=a[22],l[26]={},a[26]=this.element({parent:e||"root"},t),l[26].w=t.w-350,l[26].h=t.w-100,l[26].src=t.img1,l[26].fit="{ type: 'cover', position: { x: 0.75 } }",l[26].x=750,a[26].populate(l[26]),e=a[22],l[27]={},a[27]=this.element({parent:e||"root"},t),l[27].w=t.w-350,l[27].h=t.w-100,l[27].src=t.img1,l[27].fit="{ type: 'cover', position: { x: 1 } }",l[27].x=1e3,a[27].populate(l[27]),e=a[0],l[28]={},a[28]=this.element({parent:e||"root"},t),l[28].x={transition:{value:t.pages.x3,duration:200}},l[28].y=90,a[28].populate(l[28]),e=a[28],l[29]={},a[29]=this.element({parent:e||"root"},t),l[29].x=100,l[29].content="Image dimensions: 2560 X 1440",l[29].__textnode=!0,a[29].populate(l[29]),e=a[28],l[30]={},a[30]=this.element({parent:e||"root"},t),l[30].x=100,l[30].y=80,l[30].content=t.titles.t5,l[30].__textnode=!0,a[30].populate(l[30]),e=a[28],l[31]={},a[31]=this.element({parent:e||"root"},t),l[31].y=150,l[31].x=100,l[31].w=t.w+100,l[31].h=t.w-200,l[31].color="0x000000ff",a[31].populate(l[31]),e=a[31],l[32]={},a[32]=this.element({parent:e||"root"},t),l[32].w=t.w+100,l[32].h=t.w-200,l[32].src=t.img,l[32].fit="contain",a[32].populate(l[32]),e=a[28],l[33]={},a[33]=this.element({parent:e||"root"},t),l[33].x=100,l[33].y=500,l[33].content=t.titles.t6,l[33].__textnode=!0,a[33].populate(l[33]),e=a[28],l[34]={},a[34]=this.element({parent:e||"root"},t),l[34].y=550,l[34].x=100,l[34].w=t.w+100,l[34].h=t.w-100,l[34].color="0x000000ff",a[34].populate(l[34]),e=a[34],l[35]={},a[35]=this.element({parent:e||"root"},t),l[35].w=t.w+100,l[35].h=t.w-100,l[35].src=t.img,l[35].fit="contain",a[35].populate(l[35]),e=a[0],l[36]={},a[36]=this.element({parent:e||"root"},t),l[36].x=1700,l[36].y=20,l[36].content="Page "+t.activePage+"/"+t.totalPages,l[36].__textnode=!0,a[36].populate(l[36]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[2].set("x",{transition:{value:e.pages.x1,duration:200}})},function(e,t,n,o,i,r){t[3].set("content","Image dimensions: 2560 X 1440")},function(e,t,n,o,i,r){t[14].set("x",{transition:{value:e.pages.x2,duration:200}})},function(e,t,n,o,i,r){t[15].set("content","Image dimensions: 1440 X 2560")},function(e,t,n,o,i,r){t[28].set("x",{transition:{value:e.pages.x3,duration:200}})},function(e,t,n,o,i,r){t[29].set("content","Image dimensions: 2560 X 1440")},function(e,t,n,o,i,r){t[36].set("content","Page "+e.activePage+"/"+e.totalPages)}],context:{}},state:()=>({activePage:1,pages:{x1:0,x2:1920,x3:3840},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}),computed:{totalPages(){return this.pages,Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let e=1;e<=this.totalPages;e++)this.pages[`x${e}`]=this.pages[`x${e}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let e=this.totalPages;e>=1;e--)this.pages[`x${e}`]=this.pages[`x${e}`]+1920;this.activePage-=1}}}}),Us=Di.Component("Flags",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p;l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],c[1]=[],u[1]=(n=[],o,i)=>{const s=r(n),a=new Set;let u=s.length;const c={}||{};d=c.from||0,p="to"in c?c.to:s.length;for(;u--;)s[u],u<p&&u>=d&&a.add(""+u);let h=i.length;for(;h--;)if(!1===a.has(i[h])){const e=i[h];o[1][e]&&o[1][e].destroy(),o[1][e]=null,delete o[1][e],o[2][e]&&o[2][e].destroy(),o[2][e]=null,delete o[2][e],o[3][e]&&o[3][e].destroy(),o[3][e]=null,delete o[3][e]}i.length=0;const f=s.length;for(let r=0;r<f;r++){if(r<d||r>=p)continue;const n=Object.create(t);e=o[0],n.language=s[r],n.index=r,n.key=""+r,i.push(n.key),e=o[0],void 0===o[1]&&(o[1]={}),l[1]={},void 0===o[1][n.key]&&(o[1][n.key]=this.element({parent:e||"root"},t)),l[1].x=250*n.index,void 0===o[1][n.key].nodeId&&o[1][n.key].populate(l[1]),e=o[1][n.key],void 0===o[2]&&(o[2]={}),l[2]={},void 0===o[2][n.key]&&(o[2][n.key]=this.element({parent:e||"root"},t)),l[2].src=n.language.flag,l[2].w=150,l[2].h=150,l[2].alpha=n.index===n.activeIndex?1:.6,void 0===o[2][n.key].nodeId&&o[2][n.key].populate(l[2]),e=o[1][n.key],void 0===o[3]&&(o[3]={}),l[3]={},void 0===o[3][n.key]&&(o[3][n.key]=this.element({parent:e||"root"},t)),l[3].content=n.language.name,l[3].y=150,l[3].maxwidth=150,l[3].align="center",l[3].color=n.index===n.activeIndex?"0xffffffff":"0xaaaaaaff",l[3].__textnode=!0,void 0===o[3][n.key].nodeId&&o[3][n.key].populate(l[3])}return[]};let h=()=>{u[1](t.languages,a,c[1])};t[Symbol.for("effects")].push(h),i(h,["languages"]);let f=()=>{t.activeIndex;for(let e=0;e<t.languages.length;e++){if(e<d||e>=p)continue;const n={};n.index=e,n.language=t.languages[e],n.key=e,a[2][n.key].set("alpha",n.index===t.activeIndex?1:.6)}};t[Symbol.for("effects")].push(f),i(f);let m=()=>{t.activeIndex;for(let e=0;e<t.languages.length;e++){if(e<d||e>=p)continue;const n={};n.index=e,n.language=t.languages[e],n.key=e,a[3][n.key].set("color",n.index===t.activeIndex?"0xffffffff":"0xaaaaaaff")}};return t[Symbol.for("effects")].push(m),i(m),{elms:a,cleanup:()=>{t=null,e=null,c[1].length=0,u[1]=null,h=null,f=null,m=null,a.length=0,o.length=0,l.length=0,u.length=0}}},effects:[],context:{}},props:["languages"],state:()=>({activeIndex:0}),watch:{activeIndex(e){const t=this.languages[e];t&&t.code&&this.$language.set(t.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),Bs=Di.Component("LanguagePlugin",{components:{Flags:Us},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),a[0].populate(l[0]),!0===h&&(f-=1),m[1]=n.components&&n.components.Flags||o.Flags,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].languages=t.languages,l[1].ref="flags",l[1].x=500,l[1].y=150,c[1]=[],void 0!==m[1])for(let g in m[1][Symbol.for("config")].props)delete l[1][m[1][Symbol.for("config")].props[g]],c[1].push(m[1][Symbol.for("config")].props[g]);if(a[1].populate(l[1]),!0===h&&(f-=1),e=a[1],u[2]={},u[2].languages=t.languages,u[2].ref="flags",u[2].x=500,u[2].y=150,d=u[2].is||"Flags",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "Flags" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);return a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],p=a[2],h=!0):e=a[2][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].x=960,l[3].y=540,l[3].mount=.5,l[3].content=t.$language.translate("hello"),l[3].size=80,l[3].__textnode=!0,a[3].populate(l[3]),!0===h&&(f-=1),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===h?p:t),l[4].x=960,l[4].y=640,l[4].mount=.5,l[4].content=t.$language.translate("bye"),l[4].size=50,l[4].__textnode=!0,a[4].populate(l[4]),!0===h&&(f-=1),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===h?p:t),l[5].x=960,l[5].y=720,l[5].mount=.5,l[5].content=t.$language.translate("replacement",{first:"John",last:"Doe",age:18}),l[5].size=36,l[5].__textnode=!0,a[5].populate(l[5]),!0===h&&(f-=1),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},!0===h?p:t),l[6].size=32,l[6].x=960,l[6].y=940,l[6].mount=.5,l[6].align="center",l[6].content="Current language: "+t.$language.language+"\n Language file: "+(!0===t.loaded?"Loaded":"loading ..."),l[6].__textnode=!0,a[6].populate(l[6]),!0===h&&(f-=1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[1]=null,u[2]=null,o[2]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[3].set("content",e.$language.translate("hello"))},function(e,t,n,o,i,r){t[4].set("content",e.$language.translate("bye"))},function(e,t,n,o,i,r){t[5].set("content",e.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(e,t,n,o,i,r){t[6].set("content","Current language: "+e.$language.language+"\n Language file: "+(!0===e.loaded?"Loaded":"loading ..."))}],context:{}},state:()=>({loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}),hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.$select("flags").$focus()}}}),Fs=Di.Component("Box",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=430,l[0].h=180,l[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],l[0].color="{top: '0x667a97ff', bottom: '0x475569ff'}",a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].x=25,l[1].y=20,l[1].content=t.header,l[1].w=280,l[1].color="0x000000ff",l[1].contain="width",l[1].__textnode=!0,a[1].populate(l[1]),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].x=25,l[2].y=90,l[2].content=t.text,l[2].size=45,l[2].w=350,l[2].contain="width",l[2].align="center",l[2].__textnode=!0,a[2].populate(l[2]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(e,t,n,o,i,r){t[1].set("content",e.header)},function(e,t,n,o,i,r){t[2].set("content",e.text)}],context:{}},props:["header","text"]}),js=Di.Application({components:{Box:Fs},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),l[0].w=1920,l[0].h=1080,a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].y=250,a[1].populate(l[1]),!0===f&&(m-=1),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),l[2].content="KeyCode Finder",l[2].font="raleway",l[2].mount="{x: 0.5}",l[2].x=960,l[2].size=62,l[2].w=800,l[2].h=200,l[2].contain="width",l[2].__textnode=!0,a[2].populate(l[2]),!0===f&&(m-=1),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},!0===f?h:t),l[3].content="Press any key to get find the correct key code mapping",l[3].mount="{x: 0.5}",l[3].x=960,l[3].y=100,l[3].size=32,l[3].w=800,l[3].h=200,l[3].contain="width",l[3].__textnode=!0,a[3].populate(l[3]),!0===f&&(m-=1),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===f?h:t),l[4].x=200,a[4].populate(l[4]),!0===f&&(m-=1),g[5]=n.components&&n.components.Box||o.Box,e=a[4],l[5]={},a[5]=this.element({parent:e||"root"},!0===f?h:t),l[5].y=600,l[5].header="Key",l[5].text=t.key,c[5]=[],void 0!==g[5])for(let y in g[5][Symbol.for("config")].props)delete l[5][g[5][Symbol.for("config")].props[y]],c[5].push(g[5][Symbol.for("config")].props[y]);if(a[5].populate(l[5]),!0===f&&(m-=1),e=a[5],u[6]={},u[6].y=600,u[6].header="Key",p=t.key,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[6].text=p,d=u[6].is||"Box",o[6],"string"==typeof d){if(o[6]=n.components&&n.components[d]||o[d],!o[6])throw new Error('Component "Box" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[6]=d);if(a[6]=o[6].call(null,{props:u[6]},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],h=a[6],f=!0):e=a[6][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[7]=n.components&&n.components.Box||o.Box,e=a[4],l[7]={},a[7]=this.element({parent:e||"root"},!0===f?h:t),l[7].x=500,l[7].y=600,l[7].header="Code",l[7].text=t.code,c[7]=[],void 0!==g[7])for(let y in g[7][Symbol.for("config")].props)delete l[7][g[7][Symbol.for("config")].props[y]],c[7].push(g[7][Symbol.for("config")].props[y]);if(a[7].populate(l[7]),!0===f&&(m-=1),e=a[7],u[8]={},u[8].x=500,u[8].y=600,u[8].header="Code",p=t.code,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[8].text=p,d=u[8].is||"Box",o[8],"string"==typeof d){if(o[8]=n.components&&n.components[d]||o[d],!o[8])throw new Error('Component "Box" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[8]=d);if(a[8]=o[8].call(null,{props:u[8]},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],h=a[8],f=!0):e=a[8][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[9]=n.components&&n.components.Box||o.Box,e=a[4],l[9]={},a[9]=this.element({parent:e||"root"},!0===f?h:t),l[9].x=1e3,l[9].y=600,l[9].header="keyCode",l[9].text=t.keyCode,c[9]=[],void 0!==g[9])for(let y in g[9][Symbol.for("config")].props)delete l[9][g[9][Symbol.for("config")].props[y]],c[9].push(g[9][Symbol.for("config")].props[y]);if(a[9].populate(l[9]),!0===f&&(m-=1),e=a[9],u[10]={},u[10].x=1e3,u[10].y=600,u[10].header="keyCode",p=t.keyCode,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[10].text=p,d=u[10].is||"Box",o[10],"string"==typeof d){if(o[10]=n.components&&n.components[d]||o[d],!o[10])throw new Error('Component "Box" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[10]=d);return a[10]=o[10].call(null,{props:u[10]},a[9],t),a[10][Symbol.for("slots")][0]?(e=a[10][Symbol.for("slots")][0],h=a[10],f=!0):e=a[10][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),e=a[0],l[11]={},a[11]=this.element({parent:e||"root"},!0===f?h:t),l[11].mount="{x: 1}",l[11].x=1860,l[11].y=1e3,l[11].size=30,l[11].content=t.backLabel,l[11].color=t.backPressed?"0xffffffff":"0x667a97ff",l[11].__textnode=!0,a[11].populate(l[11]),!0===f&&(m-=1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[5]=null,u[6]=null,o[6]=null,g[7]=null,u[8]=null,o[8]=null,g[9]=null,u[10]=null,o[10]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[5]&&-1!==skips[5].indexOf("text")||t[5].set("text",e.key)},function(e,t,n,o,i,r){t[6][Symbol.for("props")].text=e.key},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[7]&&-1!==skips[7].indexOf("text")||t[7].set("text",e.code)},function(e,t,n,o,i,r){t[8][Symbol.for("props")].text=e.code},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[9]&&-1!==skips[9].indexOf("text")||t[9].set("text",e.keyCode)},function(e,t,n,o,i,r){t[10][Symbol.for("props")].text=e.keyCode},function(e,t,n,o,i,r){t[11].set("content",e.backLabel)},function(e,t,n,o,i,r){t[11].set("color",e.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state:()=>({backPressed:!1,key:"...",code:"...",keyCode:"..."}),computed:{backLabel(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels(e){this.key=e.key,this.code=e.code,this.keyCode=e.keyCode+""}},input:{any(e){this.backPressed=!1,this.updateLabels(e)},back(e){return!0===this.backPressed?this.$router.back():this.updateLabels(e),()=>{this.backPressed=!0}}}}),zs=Di.Component("Accent",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=300,l[0].h=250,l[0].color=t.bColor,l[0].effects=[{type:"radius",props:{radius:8}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].x=150,l[1].y=125,l[1].mount="{x:0.5, y:0.5}",l[1].content=t.lang,l[1].color="0xffffffff",l[1].font="lato-black",l[1].__textnode=!0,a[1].populate(l[1]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("color",e.bColor)},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[1].set("content",e.lang)}],context:{}},state:()=>({bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}),props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),$s=Di.Component("Accents",{components:{Accent:zs},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===v?m:t),l[1].x={transition:t.x},a[1].populate(l[1]),e=a[1],d[2]=[],u[2]=(s=[],a,u)=>{const d=r(s),x=new Set;let w=d.length;const S={}||{};g=S.from||0,y="to"in S?S.to:d.length;for(;w--;){const e=d[w];w<y&&w>=g&&x.add(""+e.lang)}let T=u.length;for(;T--;)if(!1===x.has(u[T])){const e=u[T];a[2][e]&&a[2][e].destroy(),a[2][e]=null,delete a[2][e],a[3][e]&&a[3][e].destroy(),a[3][e]=null,delete a[3][e]}u.length=0;const k=d.length,C=[];for(let A=0;A<k;A++){if(A<g||A>=y)continue;const s=Object.create(t);if(e=a[1],s.item=d[A],s.index=A,s.key=""+s.item.lang,u.push(s.key),b[2]=n.components&&n.components.Accent||o.Accent,void 0===a[2]&&(a[2]={}),l[2]={},void 0===a[2][s.key]&&(a[2][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[2].lang=s.item.lang,l[2].ref="accent"+s.index,l[2].x=400*s.index,p[2]=[],void 0!==b[2])for(let e in b[2][Symbol.for("config")].props)delete l[2][b[2][Symbol.for("config")].props[e]],p[2].push(b[2][Symbol.for("config")].props[e]);if(void 0===a[2][s.key].nodeId&&a[2][s.key].populate(l[2]),void 0===a[3]&&(a[3]={}),e=a[2][s.key],c[3]={},void 0===a[3][s.key]){if(c[3].lang=s.item.lang,f="accent"+s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[3].ref=f,c[3].x=400*s.index,h=c[3].is||"Accent",o[3],"string"==typeof h){if(o[3]=n.components&&n.components[h]||o[h],!o[3])throw new Error('Component "Accent" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[3]=h);a[3][s.key]=o[3].call(null,{props:c[3]},a[2][s.key],t),a[3][s.key][Symbol.for("slots")][0]?(e=a[3][s.key][Symbol.for("slots")][0],m=a[3][s.key],v=!0):e=a[3][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==p&&void 0!==p[2]&&-1!==p[2].indexOf("ref")||a[2][s.key].set("ref","accent"+s.index)};i(x,null),C.push(x),t[Symbol.for("effects")].push(x),a[3][s.key][Symbol.for("props")].ref="accent"+s.index}return C};let x=()=>{u[2](t.data,a,d[2])};return t[Symbol.for("effects")].push(x),i(x,["data"]),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===v?m:t),l[4].content=t.activeAccent,l[4].font="lato-black",l[4].x=960,l[4].y=400,l[4].mount="{x:0.5}",l[4].letterspacing=10,l[4].size=40,l[4].__textnode=!0,a[4].populate(l[4]),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,d[2].length=0,u[2]=null,b[2]=null,c[3]=null,o[3]=null,x=null,b.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("x",{transition:e.x})},function(e,t,n,o,i,r){t[4].set("content",e.activeAccent)}],context:{}},props:["data"],state:()=>({x:160,activeIndex:0,activeAccent:""}),watch:{activeIndex(e){const t=this.$select(`accent${e}`);t&&t.$focus&&(t.$focus(),this.activeAccent=this.data[e].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(e){const t=this.activeIndex+e;this.x=t>3?400*-(t-3)-160:160,this.activeIndex=t}}}),Vs=Di.Component("Characters",{components:{Accents:$s},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),l[0].w=1920,a[0].populate(l[0]),!0===h&&(f-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].x=960,l[1].y=50,l[1].mount="{x:0.5}",l[1].content="Alphabets",l[1].font="lato-black",l[1].size=60,l[1].__textnode=!0,a[1].populate(l[1]),!0===h&&(f-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===h?p:t),l[2].x=960,l[2].y=150,l[2].mount="{x:0.5}",l[2].content=t.alphabets,l[2].font="lato-black",l[2].size=40,l[2].letterspacing=10,l[2].__textnode=!0,a[2].populate(l[2]),!0===h&&(f-=1),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].x=960,l[3].y=290,l[3].mount="{x:0.5}",l[3].content="Accents",l[3].font="lato-black",l[3].size=60,l[3].__textnode=!0,a[3].populate(l[3]),!0===h&&(f-=1),m[4]=n.components&&n.components.Accents||o.Accents,e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===h?p:t),l[4].data=t.accents,l[4].y=400,l[4].ref="accents",c[4]=[],void 0!==m[4])for(let g in m[4][Symbol.for("config")].props)delete l[4][m[4][Symbol.for("config")].props[g]],c[4].push(m[4][Symbol.for("config")].props[g]);if(a[4].populate(l[4]),!0===h&&(f-=1),e=a[4],u[5]={},u[5].data=t.accents,u[5].y=400,u[5].ref="accents",d=u[5].is||"Accents",o[5],"string"==typeof d){if(o[5]=n.components&&n.components[d]||o[d],!o[5])throw new Error('Component "Accents" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[5]=d);return a[5]=o[5].call(null,{props:u[5]},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],p=a[5],h=!0):e=a[5][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},!0===h?p:t),l[6].w=950,l[6].h=40,l[6].color="0x000000ff",l[6].effects=[{type:"radius",props:{radius:10}}],l[6].y=1e3,l[6].placement="center",a[6].populate(l[6]),!0===h&&(f-=1),e=a[6],l[7]={},a[7]=this.element({parent:e||"root"},!0===h?p:t),l[7].content="The character ? represents a character that is not supported by the Lato-Black font",l[7].size=25,l[7].x=475,l[7].y=20,l[7].mount="{x:0.5, y:0.5}",l[7].__textnode=!0,a[7].populate(l[7]),!0===h&&(f-=1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[4]=null,u[5]=null,o[5]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state:()=>({alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}),hooks:{focus(){const e=this.$select("accents");e&&e.$focus&&e.$focus()}}}),Hs=Di.Component("Layout",{components:{Ball:Cs},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y=!1,v=0,b=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===y?f:t),l[0].w=1920,l[0].h=1080,l[0].color="0xc4b5fdff",a[0].populate(l[0]),!0===y&&(v-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===y?f:t),l[1].x=40,l[1].y=40,a[1].populate(l[1]),!0===y&&(v-=1),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},!0===y?f:t),l[2].color="0x222222ff",l[2].content="Static horizontal Layout",l[2].__textnode=!0,a[2].populate(l[2]),!0===y&&(v-=1),e=a[1],l[3]={},a[3]=this.element({parent:e||"root"},!0===y?f:t),l[3].y=50,l[3].gap=10,l[3].__layout=!0,a[3].populate(l[3]),!0===y&&(v-=1),e=a[3],l[4]={},a[4]=this.element({parent:e||"root"},!0===y?f:t),l[4].w=50,l[4].h=100,l[4].color="0xeff6ffff",a[4].populate(l[4]),!0===y&&(v-=1),e=a[3],l[5]={},a[5]=this.element({parent:e||"root"},!0===y?f:t),l[5].w=60,l[5].h=100,l[5].color="0xbfdbfeff",a[5].populate(l[5]),!0===y&&(v-=1),e=a[3],l[6]={},a[6]=this.element({parent:e||"root"},!0===y?f:t),l[6].w=70,l[6].h=100,l[6].color="0x60a5faff",a[6].populate(l[6]),!0===y&&(v-=1),e=a[3],l[7]={},a[7]=this.element({parent:e||"root"},!0===y?f:t),l[7].w=80,l[7].h=100,l[7].color="0x2563ebff",a[7].populate(l[7]),!0===y&&(v-=1),e=a[3],l[8]={},a[8]=this.element({parent:e||"root"},!0===y?f:t),l[8].w=90,l[8].h=100,l[8].color="0x1e40afff",a[8].populate(l[8]),!0===y&&(v-=1),e=a[0],l[9]={},a[9]=this.element({parent:e||"root"},!0===y?f:t),l[9].x=40,l[9].y=220,a[9].populate(l[9]),!0===y&&(v-=1),e=a[9],l[10]={},a[10]=this.element({parent:e||"root"},!0===y?f:t),l[10].color="0x222222ff",l[10].content="Static vertical Layout",l[10].__textnode=!0,a[10].populate(l[10]),!0===y&&(v-=1),e=a[9],l[11]={},a[11]=this.element({parent:e||"root"},!0===y?f:t),l[11].y=50,l[11].gap=10,l[11].direction="vertical",l[11].__layout=!0,a[11].populate(l[11]),!0===y&&(v-=1),e=a[11],l[12]={},a[12]=this.element({parent:e||"root"},!0===y?f:t),l[12].w=100,l[12].h=50,l[12].color="0xeff6ffff",a[12].populate(l[12]),!0===y&&(v-=1),e=a[11],l[13]={},a[13]=this.element({parent:e||"root"},!0===y?f:t),l[13].w=100,l[13].h=60,l[13].color="0xbfdbfeff",a[13].populate(l[13]),!0===y&&(v-=1),e=a[11],l[14]={},a[14]=this.element({parent:e||"root"},!0===y?f:t),l[14].w=100,l[14].h=70,l[14].color="0x60a5faff",a[14].populate(l[14]),!0===y&&(v-=1),e=a[11],l[15]={},a[15]=this.element({parent:e||"root"},!0===y?f:t),l[15].w=100,l[15].h=80,l[15].color="0x2563ebff",a[15].populate(l[15]),!0===y&&(v-=1),e=a[11],l[16]={},a[16]=this.element({parent:e||"root"},!0===y?f:t),l[16].w=100,l[16].h=90,l[16].color="0x1e40afff",a[16].populate(l[16]),!0===y&&(v-=1),e=a[0],l[17]={},a[17]=this.element({parent:e||"root"},!0===y?f:t),l[17].x=40,l[17].y=700,a[17].populate(l[17]),!0===y&&(v-=1),e=a[17],l[18]={},a[18]=this.element({parent:e||"root"},!0===y?f:t),l[18].color="0x222222ff",l[18].content="Nested Layouts",l[18].__textnode=!0,a[18].populate(l[18]),!0===y&&(v-=1),e=a[17],l[19]={},a[19]=this.element({parent:e||"root"},!0===y?f:t),l[19].y=50,l[19].gap=10,l[19].direction="horizontal",l[19].__layout=!0,a[19].populate(l[19]),!0===y&&(v-=1),e=a[19],l[20]={},a[20]=this.element({parent:e||"root"},!0===y?f:t),l[20].w=100,l[20].h=50,l[20].color="0xeff6ffff",a[20].populate(l[20]),!0===y&&(v-=1),e=a[19],l[21]={},a[21]=this.element({parent:e||"root"},!0===y?f:t),l[21].w=100,l[21].h=60,l[21].color="0xbfdbfeff",a[21].populate(l[21]),!0===y&&(v-=1),e=a[19],l[22]={},a[22]=this.element({parent:e||"root"},!0===y?f:t),l[22].direction="vertical",l[22].gap=10,l[22].__layout=!0,a[22].populate(l[22]),!0===y&&(v-=1),e=a[22],l[23]={},a[23]=this.element({parent:e||"root"},!0===y?f:t),l[23].w=100,l[23].h=70,l[23].color="0x60a5faff",a[23].populate(l[23]),!0===y&&(v-=1),e=a[22],l[24]={},a[24]=this.element({parent:e||"root"},!0===y?f:t),l[24].w=100,l[24].h=70,l[24].color="0x60a5faff",a[24].populate(l[24]),!0===y&&(v-=1),e=a[22],l[25]={},a[25]=this.element({parent:e||"root"},!0===y?f:t),l[25].w=100,l[25].h=70,l[25].color="0x60a5faff",a[25].populate(l[25]),!0===y&&(v-=1),e=a[22],l[26]={},a[26]=this.element({parent:e||"root"},!0===y?f:t),l[26].gap=50,l[26].__layout=!0,a[26].populate(l[26]),!0===y&&(v-=1),e=a[26],l[27]={},a[27]=this.element({parent:e||"root"},!0===y?f:t),l[27].w=50,l[27].h=50,l[27].color="0x2563ebff",a[27].populate(l[27]),!0===y&&(v-=1),e=a[26],l[28]={},a[28]=this.element({parent:e||"root"},!0===y?f:t),l[28].w=50,l[28].h=50,l[28].color="0x2563ebff",a[28].populate(l[28]),!0===y&&(v-=1),e=a[26],l[29]={},a[29]=this.element({parent:e||"root"},!0===y?f:t),l[29].w=50,l[29].h=50,l[29].color="0x2563ebff",a[29].populate(l[29]),!0===y&&(v-=1),e=a[19],l[30]={},a[30]=this.element({parent:e||"root"},!0===y?f:t),l[30].w=100,l[30].h=80,l[30].color="0x2563ebff",a[30].populate(l[30]),!0===y&&(v-=1),e=a[19],l[31]={},a[31]=this.element({parent:e||"root"},!0===y?f:t),l[31].w=100,l[31].h=90,l[31].color="0x1e40afff",a[31].populate(l[31]),!0===y&&(v-=1),e=a[0],l[32]={},a[32]=this.element({parent:e||"root"},!0===y?f:t),l[32].x=800,l[32].y=40,a[32].populate(l[32]),!0===y&&(v-=1),e=a[32],l[33]={},a[33]=this.element({parent:e||"root"},!0===y?f:t),l[33].color="0x222222ff",l[33].content="Layout with Text",l[33].__textnode=!0,a[33].populate(l[33]),!0===y&&(v-=1),e=a[32],l[34]={},a[34]=this.element({parent:e||"root"},!0===y?f:t),l[34].y=50,l[34].gap=20,l[34].__layout=!0,a[34].populate(l[34]),!0===y&&(v-=1),e=a[34],l[35]={},a[35]=this.element({parent:e||"root"},!0===y?f:t),l[35].w=3,l[35].h=32,l[35].color="0x60a5faff",a[35].populate(l[35]),!0===y&&(v-=1),e=a[34],l[36]={},a[36]=this.element({parent:e||"root"},!0===y?f:t),l[36].color="0x1e40afff",l[36].content="Hello",l[36].__textnode=!0,a[36].populate(l[36]),!0===y&&(v-=1),e=a[34],l[37]={},a[37]=this.element({parent:e||"root"},!0===y?f:t),l[37].w=3,l[37].h=32,l[37].color="0x60a5faff",a[37].populate(l[37]),!0===y&&(v-=1),e=a[34],l[38]={},a[38]=this.element({parent:e||"root"},!0===y?f:t),l[38].content="World",l[38].color="0x1e40afff",l[38].__textnode=!0,a[38].populate(l[38]),!0===y&&(v-=1),e=a[34],l[39]={},a[39]=this.element({parent:e||"root"},!0===y?f:t),l[39].w=3,l[39].h=32,l[39].color="0x60a5faff",a[39].populate(l[39]),!0===y&&(v-=1),e=a[0],l[40]={},a[40]=this.element({parent:e||"root"},!0===y?f:t),l[40].x=800,l[40].y=210,a[40].populate(l[40]),!0===y&&(v-=1),e=a[40],l[41]={},a[41]=this.element({parent:e||"root"},!0===y?f:t),l[41].color="0x222222ff",l[41].content="Dynamic dimensions Layout",l[41].__textnode=!0,a[41].populate(l[41]),!0===y&&(v-=1),e=a[40],l[42]={},a[42]=this.element({parent:e||"root"},!0===y?f:t),l[42].y=50,l[42].gap=20,l[42]["@updated"]=t.dynamicLayoutUpdated&&t.dynamicLayoutUpdated.bind(t),l[42].__layout=!0,a[42].populate(l[42]),!0===y&&(v-=1),e=a[42],l[43]={},a[43]=this.element({parent:e||"root"},!0===y?f:t),l[43].w=.5*t.w,l[43].h=60,l[43].color="0xeff6ffff",a[43].populate(l[43]),!0===y&&(v-=1),e=a[42],l[44]={},a[44]=this.element({parent:e||"root"},!0===y?f:t),l[44].w=.6*t.w,l[44].h=60,l[44].color="0xbfdbfeff",a[44].populate(l[44]),!0===y&&(v-=1),e=a[42],l[45]={},a[45]=this.element({parent:e||"root"},!0===y?f:t),l[45].w=.7*t.w,l[45].h=60,l[45].color="0x60a5faff",a[45].populate(l[45]),!0===y&&(v-=1),e=a[42],l[46]={},a[46]=this.element({parent:e||"root"},!0===y?f:t),l[46].w=.8*t.w,l[46].h=60,l[46].color="0x2563ebff",a[46].populate(l[46]),!0===y&&(v-=1),e=a[42],l[47]={},a[47]=this.element({parent:e||"root"},!0===y?f:t),l[47].w=.9*t.w,l[47].h=60,l[47].color="0x1e40afff",a[47].populate(l[47]),!0===y&&(v-=1),e=a[0],l[48]={},a[48]=this.element({parent:e||"root"},!0===y?f:t),l[48].x=800,l[48].y=400,a[48].populate(l[48]),!0===y&&(v-=1),e=a[48],l[49]={},a[49]=this.element({parent:e||"root"},!0===y?f:t),l[49].color="0x222222ff",l[49].content="For loop Layout",l[49].__textnode=!0,a[49].populate(l[49]),!0===y&&(v-=1),e=a[48],l[50]={},a[50]=this.element({parent:e||"root"},!0===y?f:t),l[50].y=50,l[50].gap=20,l[50].__layout=!0,a[50].populate(l[50]),!0===y&&(v-=1),e=a[50],d[51]=[],u[51]=(n=[],o,i)=>{const s=r(n),a=new Set;let u=s.length;const c={}||{};m=c.from||0,g="to"in c?c.to:s.length;for(;u--;)s[u],u<g&&u>=m&&a.add(""+u);let d=i.length;for(;d--;)if(!1===a.has(i[d])){const e=i[d];o[51][e]&&o[51][e].destroy(),o[51][e]=null,delete o[51][e]}i.length=0;const p=s.length;for(let r=0;r<p;r++){if(r<m||r>=g)continue;const n=Object.create(t);e=o[50],n.color=s[r],n[void 0]=r,n.key=""+r,i.push(n.key),e=o[50],void 0===o[51]&&(o[51]={}),l[51]={},void 0===o[51][n.key]&&(o[51][n.key]=this.element({parent:e||"root"},!0===y?f:t)),l[51].w=60,l[51].h=60,l[51].color=n.color,void 0===o[51][n.key].nodeId&&(o[51][n.key].populate(l[51]),!0===y&&(v-=1))}return[]};let x=()=>{u[51](t.colors,a,d[51])};t[Symbol.for("effects")].push(x),i(x,["colors"]);let w,S,T=()=>{t.color;for(let e=0;e<t.colors.length;e++){if(e<m||e>=g)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[51][n.key].set("color",n.color)}};t[Symbol.for("effects")].push(T),i(T),e=a[0],l[52]={},a[52]=this.element({parent:e||"root"},!0===y?f:t),l[52].x=800,l[52].y=600,a[52].populate(l[52]),!0===y&&(v-=1),e=a[52],l[53]={},a[53]=this.element({parent:e||"root"},!0===y?f:t),l[53].color="0x222222ff",l[53].content="Layout with transitions",l[53].__textnode=!0,a[53].populate(l[53]),!0===y&&(v-=1),e=a[52],l[54]={},a[54]=this.element({parent:e||"root"},!0===y?f:t),l[54].direction="horizontal",l[54].gap=20,l[54].y=60,l[54].__layout=!0,a[54].populate(l[54]),!0===y&&(v-=1),e=a[54],d[55]=[],u[55]=(n=[],o,i)=>{const s=r(n),a=new Set;let u=s.length;const c={}||{};w=c.from||0,S="to"in c?c.to:s.length;for(;u--;)s[u],u<S&&u>=w&&a.add(""+u);let d=i.length;for(;d--;)if(!1===a.has(i[d])){const e=i[d];o[55][e]&&o[55][e].destroy(),o[55][e]=null,delete o[55][e],o[56][e]&&o[56][e].destroy(),o[56][e]=null,delete o[56][e],o[57][e]&&o[57][e].destroy(),o[57][e]=null,delete o[57][e],o[58][e]&&o[58][e].destroy(),o[58][e]=null,delete o[58][e],o[59][e]&&o[59][e].destroy(),o[59][e]=null,delete o[59][e],o[60][e]&&o[60][e].destroy(),o[60][e]=null,delete o[60][e]}i.length=0;const p=s.length;for(let r=0;r<p;r++){if(r<w||r>=S)continue;const n=Object.create(t);e=o[54],n.color=s[r],n[void 0]=r,n.key=""+r,i.push(n.key),e=o[54],void 0===o[55]&&(o[55]={}),l[55]={},void 0===o[55][n.key]&&(o[55][n.key]=this.element({parent:e||"root"},!0===y?f:t)),l[55].h=100,l[55].w={transition:{value:n.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},l[55].color=n.color,void 0===o[55][n.key].nodeId&&(o[55][n.key].populate(l[55]),!0===y&&(v-=1)),e=o[55][n.key],void 0===o[56]&&(o[56]={}),l[56]={},void 0===o[56][n.key]&&(o[56][n.key]=this.element({parent:e||"root"},!0===y?f:t)),l[56].gap=10,l[56].x=10,l[56].y=35,l[56].__layout=!0,void 0===o[56][n.key].nodeId&&(o[56][n.key].populate(l[56]),!0===y&&(v-=1)),e=o[56][n.key],void 0===o[57]&&(o[57]={}),l[57]={},void 0===o[57][n.key]&&(o[57][n.key]=this.element({parent:e||"root"},!0===y?f:t)),l[57].h=20,l[57].w={transition:{value:n.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},l[57].color="0xffffffff",void 0===o[57][n.key].nodeId&&(o[57][n.key].populate(l[57]),!0===y&&(v-=1)),e=o[56][n.key],void 0===o[58]&&(o[58]={}),l[58]={},void 0===o[58][n.key]&&(o[58][n.key]=this.element({parent:e||"root"},!0===y?f:t)),l[58].h=20,l[58].w={transition:{value:n.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},l[58].color="0xccccccff",void 0===o[58][n.key].nodeId&&(o[58][n.key].populate(l[58]),!0===y&&(v-=1)),e=o[56][n.key],void 0===o[59]&&(o[59]={}),l[59]={},void 0===o[59][n.key]&&(o[59][n.key]=this.element({parent:e||"root"},!0===y?f:t)),l[59].h=20,l[59].w={transition:{value:n.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},l[59].color="0x333333ff",void 0===o[59][n.key].nodeId&&(o[59][n.key].populate(l[59]),!0===y&&(v-=1)),e=o[56][n.key],void 0===o[60]&&(o[60]={}),l[60]={},void 0===o[60][n.key]&&(o[60][n.key]=this.element({parent:e||"root"},!0===y?f:t)),l[60].h=20,l[60].w={transition:{value:n.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},l[60].color="0x000000ff",void 0===o[60][n.key].nodeId&&(o[60][n.key].populate(l[60]),!0===y&&(v-=1))}return[]};let k=()=>{u[55](t.colors,a,d[55])};t[Symbol.for("effects")].push(k),i(k,["colors"]);let C=()=>{t.w3;for(let e=0;e<t.colors.length;e++){if(e<w||e>=S)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[55][n.key].set("w",{transition:{value:t.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(C),i(C);let A=()=>{t.color;for(let e=0;e<t.colors.length;e++){if(e<w||e>=S)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[55][n.key].set("color",n.color)}};t[Symbol.for("effects")].push(A),i(A);let I=()=>{t.w2;for(let e=0;e<t.colors.length;e++){if(e<w||e>=S)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[57][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(I),i(I);let E=()=>{t.w2;for(let e=0;e<t.colors.length;e++){if(e<w||e>=S)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[58][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(E),i(E);let M=()=>{t.w2;for(let e=0;e<t.colors.length;e++){if(e<w||e>=S)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[59][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(M),i(M);let R=()=>{t.w2;for(let e=0;e<t.colors.length;e++){if(e<w||e>=S)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[60][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};if(t[Symbol.for("effects")].push(R),i(R),e=a[0],l[61]={},a[61]=this.element({parent:e||"root"},!0===y?f:t),l[61].x=800,l[61].y=840,a[61].populate(l[61]),!0===y&&(v-=1),e=a[61],l[62]={},a[62]=this.element({parent:e||"root"},!0===y?f:t),l[62].color="0x222222ff",l[62].content="Layout with padding",l[62].__textnode=!0,a[62].populate(l[62]),!0===y&&(v-=1),e=a[61],l[63]={},a[63]=this.element({parent:e||"root"},!0===y?f:t),l[63].direction="horizontal",l[63].gap=20,l[63].y=60,l[63].padding=20,l[63].color="0xffffffff",l[63].__layout=!0,a[63].populate(l[63]),!0===y&&(v-=1),e=a[63],l[64]={},a[64]=this.element({parent:e||"root"},!0===y?f:t),l[64].w=40,l[64].h=40,l[64].color="0xbfdbfeff",a[64].populate(l[64]),!0===y&&(v-=1),e=a[63],l[65]={},a[65]=this.element({parent:e||"root"},!0===y?f:t),l[65].w=40,l[65].h=40,l[65].color="0x60a5faff",a[65].populate(l[65]),!0===y&&(v-=1),e=a[63],l[66]={},a[66]=this.element({parent:e||"root"},!0===y?f:t),l[66].w=40,l[66].h=40,l[66].color="0x2563ebff",a[66].populate(l[66]),!0===y&&(v-=1),e=a[61],l[67]={},a[67]=this.element({parent:e||"root"},!0===y?f:t),l[67].direction="horizontal",l[67].gap=20,l[67].y=60,l[67].x=240,l[67].padding={top:40,y:10,left:40,x:10},l[67].color="0xffffffff",l[67].__layout=!0,a[67].populate(l[67]),!0===y&&(v-=1),e=a[67],l[68]={},a[68]=this.element({parent:e||"root"},!0===y?f:t),l[68].w=40,l[68].h=40,l[68].color="0xbfdbfeff",a[68].populate(l[68]),!0===y&&(v-=1),e=a[67],l[69]={},a[69]=this.element({parent:e||"root"},!0===y?f:t),l[69].w=40,l[69].h=40,l[69].color="0x60a5faff",a[69].populate(l[69]),!0===y&&(v-=1),e=a[67],l[70]={},a[70]=this.element({parent:e||"root"},!0===y?f:t),l[70].w=40,l[70].h=40,l[70].color="0x2563ebff",a[70].populate(l[70]),!0===y&&(v-=1),e=a[61],l[71]={},a[71]=this.element({parent:e||"root"},!0===y?f:t),l[71].direction="vertical",l[71].gap=20,l[71].y=60,l[71].x=500,l[71].padding=20,l[71].color="0xffffffff",l[71].__layout=!0,a[71].populate(l[71]),!0===y&&(v-=1),e=a[71],l[72]={},a[72]=this.element({parent:e||"root"},!0===y?f:t),l[72].w=40,l[72].h=20,l[72].color="0xbfdbfeff",a[72].populate(l[72]),!0===y&&(v-=1),e=a[71],l[73]={},a[73]=this.element({parent:e||"root"},!0===y?f:t),l[73].w=40,l[73].h=20,l[73].color="0x60a5faff",a[73].populate(l[73]),!0===y&&(v-=1),e=a[71],l[74]={},a[74]=this.element({parent:e||"root"},!0===y?f:t),l[74].w=40,l[74].h=20,l[74].color="0x2563ebff",a[74].populate(l[74]),!0===y&&(v-=1),e=a[61],l[75]={},a[75]=this.element({parent:e||"root"},!0===y?f:t),l[75].direction="vertical",l[75].gap=20,l[75].y=60,l[75].x=640,l[75].padding={top:40,y:10,left:40,x:10},l[75].color="0xffffffff",l[75].__layout=!0,a[75].populate(l[75]),!0===y&&(v-=1),e=a[75],l[76]={},a[76]=this.element({parent:e||"root"},!0===y?f:t),l[76].w=40,l[76].h=20,l[76].color="0xbfdbfeff",a[76].populate(l[76]),!0===y&&(v-=1),e=a[75],l[77]={},a[77]=this.element({parent:e||"root"},!0===y?f:t),l[77].w=40,l[77].h=20,l[77].color="0x60a5faff",a[77].populate(l[77]),!0===y&&(v-=1),e=a[75],l[78]={},a[78]=this.element({parent:e||"root"},!0===y?f:t),l[78].w=40,l[78].h=20,l[78].color="0x2563ebff",a[78].populate(l[78]),!0===y&&(v-=1),e=a[0],l[79]={},a[79]=this.element({parent:e||"root"},!0===y?f:t),l[79].x=1300,l[79].y=210,a[79].populate(l[79]),!0===y&&(v-=1),e=a[79],l[80]={},a[80]=this.element({parent:e||"root"},!0===y?f:t),l[80].color="0x222222ff",l[80].content="Layout with a Component",l[80].__textnode=!0,a[80].populate(l[80]),!0===y&&(v-=1),e=a[79],l[81]={},a[81]=this.element({parent:e||"root"},!0===y?f:t),l[81].y=50,l[81].gap=40,l[81].__layout=!0,a[81].populate(l[81]),!0===y&&(v-=1),e=a[81],l[82]={},a[82]=this.element({parent:e||"root"},!0===y?f:t),l[82].w=100,l[82].h=100,l[82].color="0xff0000ff",a[82].populate(l[82]),!0===y&&(v-=1),e=a[81],l[83]={},a[83]=this.element({parent:e||"root"},!0===y?f:t),l[83].w=t.w,l[83].h=100,l[83].color="0xff0000ff",a[83].populate(l[83]),!0===y&&(v-=1),b[84]=n.components&&n.components.Ball||o.Ball,e=a[81],l[84]={},a[84]=this.element({parent:e||"root"},!0===y?f:t),l[84].y=500,l[84].w=100,p[84]=[],void 0!==b[84])for(let _ in b[84][Symbol.for("config")].props)delete l[84][b[84][Symbol.for("config")].props[_]],p[84].push(b[84][Symbol.for("config")].props[_]);if(a[84].populate(l[84]),!0===y&&(v-=1),e=a[84],c[85]={},c[85].y=500,c[85].w=100,h=c[85].is||"Ball",o[85],"string"==typeof h){if(o[85]=n.components&&n.components[h]||o[h],!o[85])throw new Error('Component "Ball" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[85]=h);return a[85]=o[85].call(null,{props:c[85]},a[84],t),a[85][Symbol.for("slots")][0]?(e=a[85][Symbol.for("slots")][0],f=a[85],y=!0):e=a[85][Symbol.for("children")][0],!0===y&&0===v&&(y=!1),e=a[81],l[86]={},a[86]=this.element({parent:e||"root"},!0===y?f:t),l[86].w=100,l[86].h=100,l[86].color="0xff0000ff",a[86].populate(l[86]),!0===y&&(v-=1),{elms:a,cleanup:()=>{f=null,t=null,e=null,d[51].length=0,u[51]=null,x=null,T=null,d[55].length=0,u[55]=null,k=null,C=null,A=null,I=null,E=null,M=null,R=null,b[84]=null,c[85]=null,o[85]=null,b.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){t[43].set("w",.5*e.w)},function(e,t,n,o,i,r){t[44].set("w",.6*e.w)},function(e,t,n,o,i,r){t[45].set("w",.7*e.w)},function(e,t,n,o,i,r){t[46].set("w",.8*e.w)},function(e,t,n,o,i,r){t[47].set("w",.9*e.w)},function(e,t,n,o,i,r){t[67].set("padding",{top:40,y:10,left:40,x:10})},function(e,t,n,o,i,r){t[75].set("padding",{top:40,y:10,left:40,x:10})},function(e,t,n,o,i,r){t[83].set("w",e.w)}],context:{}},state:()=>({w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}),hooks:{ready(){this.$setInterval(()=>{this.w=100===this.w?50:100,this.w2=20===this.w2?40:20,this.w3=150===this.w3?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(e){this.$log.info("Dynamic layout updated",e.w,e.h)}}}),Gs="undefined"!=typeof window?window:{};let qs;let Ws;const Ks=[],Xs={};let Ys,Js;function Qs(e){let t;try{t=function(e,t){let n=function(e={},t){const n=t.split(".");let o=e;for(let i=0;i<n.length;i++)o=(Object.entries(o).find(([e,t])=>e.toLowerCase()===n[i].toLowerCase())||[null,{}])[1];return o}(Ws,e);e.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(n={event:e,listening:!0});return"function"==typeof n?null==t?n():n(t):n}(e.method,e.params)}catch(n){setTimeout(()=>Ys(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:e.id})))}setTimeout(()=>Ys(JSON.stringify({jsonrpc:"2.0",result:t,id:e.id})))}function Zs(e,t,n){const o=Object.entries(Xs).find(([n,o])=>o.toLowerCase()===e.toLowerCase()+"."+t.toLowerCase());if(o){let e=JSON.stringify({jsonrpc:"2.0",id:parseInt(o[0]),result:n});Ys(e)}}Gs.__firebolt&&Gs.__firebolt.testHarness&&(Js=Gs.__firebolt.testHarness);const ea={send:function e(t){console.debug("Sending message to transport: "+t);let n=JSON.parse(t);if(Array.isArray(n))return void n.forEach(t=>e(JSON.stringify(t)));let[o,i]=n.method.split(".");Js&&Js.onSend&&Js.onSend(o,i,n.params,n.id),i.match(/^on[A-Z]/)&&(n.params.listen?Xs[n.id]=o.toLowerCase()+"."+i[2].toLowerCase()+i.substr(3):Object.keys(Xs).forEach(e=>{Xs[e]===o.toLowerCase()+"."+i[2].toLowerCase()+i.substr(3)&&delete Xs[e]})),Ws?Qs(n):Ks.push(n)},receive:function(e){Ys=e,Js&&"function"==typeof Js.initialize&&Js.initialize({emit:Zs,listen:function(...e){qs(...e)}})},event:Zs};function ta(e,t,n){const o=e?Object.values(e).length:0;return o===n&&void 0===t?"getter":o===n&&"function"==typeof t||0===o&&"function"==typeof t?"subscriber":o===n&&void 0!==t?"setter":null}const na={};const oa={mock:function(e,t,n,o,i,r){const s=ta(n,o,i),a=i?"."+Object.keys(n).filter(e=>"value"!==e).map(e=>n[e]).join("."):"",l=`${e}.${t}${a}`;if("getter"===s){return na.hasOwnProperty(l)?na[l]:r}if("subscriber"===s);else if("setter"===s)return na[l]=o,ea.event(e,`${t}Changed`,{value:o}),null}},ia={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(e){return oa.mock("Accessibility","closedCaptionsSettings",e,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},highContrastUI:function(e){return oa.mock("Accessibility","highContrastUI",e,void 0,0,!0)},voiceGuidance:{enabled:!0,navigationHints:!0,rate:1},voiceGuidanceSettings:function(e){return oa.mock("Accessibility","voiceGuidanceSettings",e,void 0,0,{enabled:!0,navigationHints:!0,rate:1})},audioDescriptionSettings:function(e){return oa.mock("Accessibility","audioDescriptionSettings",e,void 0,0,{enabled:!0})}},ra={id:function(e){return oa.mock("Account","id",e,void 0,0,"123")},uid:function(e){return oa.mock("Account","uid",e,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},sa={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(e){return oa.mock("Advertising","policy",e,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},aa={id:function(e){return oa.mock("Device","id",e,void 0,0,"123")},distributor:function(e){return oa.mock("Device","distributor",e,void 0,0,"Company")},platform:function(e){return oa.mock("Device","platform",e,void 0,0,"WPE")},uid:function(e){return oa.mock("Device","uid",e,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(e){return oa.mock("Device","type",e,void 0,0,"STB")},model:function(e){return oa.mock("Device","model",e,void 0,0,"xi6")},sku:function(e){return oa.mock("Device","sku",e,void 0,0,"AX061AEI")},make:function(e){return oa.mock("Device","make",e,void 0,0,"Arris")},version:function(e){return oa.mock("Device","version",e,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(e){return oa.mock("Device","hdcp",e,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(e){return oa.mock("Device","hdr",e,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(e){return oa.mock("Device","audio",e,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(e){return oa.mock("Device","screenResolution",e,void 0,0,[1920,1080])},videoResolution:function(e){return oa.mock("Device","videoResolution",e,void 0,0,[1920,1080])},name:function(e){return oa.mock("Device","name",e,void 0,0,"Living Room")},network:function(e){return oa.mock("Device","network",e,void 0,0,{state:"connected",type:"wifi"})}},la={policy:function(e){return oa.mock("Discovery","policy",e,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null};let ua={state:"inactive",previous:"initializing"},ca={state:"foreground",previous:"inactive"},da={state:"unloading",previous:"inactive"};const pa=e=>{ea.event("Lifecycle",e.state,e)},ha="undefined"!=typeof window?window:{},fa=!!ha.__firebolt&&!!ha.__firebolt.automation,ma={ready:function(){ua.previous="initializing",setTimeout(()=>pa(ua),fa?1:500),ca.previous="inactive",setTimeout(()=>pa(ca),fa?2:1e3)},close:function(e){let t=e.reason;if("remoteButton"===t)ua.previous="foreground",setTimeout(()=>pa(ua),fa?1:500);else{if(!["userExit","error"].includes(t))throw"Invalid close reason";ua.previous="foreground",da.previous="inactive",setTimeout(()=>pa(ua),fa?1:500),setTimeout(()=>pa(da),fa?2:1e3)}},finished:function(){ha.location&&(ha.location.href="about:blank")}},ga={locality:function(e){return oa.mock("Localization","locality",e,void 0,0,"Philadelphia")},postalCode:function(e){return oa.mock("Localization","postalCode",e,void 0,0,"19103")},countryCode:function(e){return oa.mock("Localization","countryCode",e,void 0,0,"US")},language:function(e){return oa.mock("Localization","language",e,void 0,0,"en")},preferredAudioLanguages:function(e){return oa.mock("Localization","preferredAudioLanguages",e,void 0,0,["spa","eng"])},locale:function(e){return oa.mock("Localization","locale",e,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},ya={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(e){return oa.mock("SecondScreen","friendlyName",e,void 0,0,"Living Room")}},va={localization:ga,device:aa,accessibility:ia};class ba{constructor(){this._callback=null,this._queue=[]}send(e){this._queue.push(e)}receive(e){this._callback=e}flush(e){e.receive(this._callback),this._queue.forEach(t=>e.send(t))}}const xa={},wa={},Sa={get(e,t,n=void 0){const o=((e={},t)=>{const n=t.split(".");for(let o=0;o<n.length;o++)e=e[n[o]]=void 0!==e[n[o]]?e[n[o]]:{};return"object"==typeof e?Object.keys(e).length?e:void 0:e})(xa[e],t);return void 0!==o?o:n},has(e,t){return!!this.get(e,t)},set(e,t){xa.user[e]=t,((e,t)=>{wa[e]&&wa[e].forEach(e=>e(t))})(e,t)},subscribe(e,t){wa[e]=wa[e]||[],wa[e].push(t)},unsubscribe(e,t){if(t){const n=wa[e]&&wa[e].findIndex(e=>e===t);n>-1&&wa[e].splice(n,1)}else e in wa&&(wa[e]=[])},clearSubscribers(){for(const e of Object.getOwnPropertyNames(wa))delete wa[e]},setLogLevel(e){xa.platform.logLevel=e},getLogLevel:()=>xa.platform.logLevel},Ta="undefined"!=typeof window?window:{};class ka{constructor(e){this.bridge=e}send(e){this.bridge.JSMessageChanged(e,()=>{})}receive(e){Ta.$badger=Ta.$badger||{};const t=Ta.$badger.callback?Ta.$badger.callback.bind(Ta.$badger):null,n=Ta.$badger.event?Ta.$badger.event.bind(Ta.$badger):null;Ta.$badger.callback=(n,o,i)=>{i.jsonrpc?e(JSON.stringify(i)):t&&t(n,o,i)},Ta.$badger.event=(t,o)=>{o.jsonrpc?e(JSON.stringify(o)):n&&n(t,o)}}static isLegacy(e){return ka.isXREProxy(e)||void 0===e.send&&e.JSMessageChanged}static isXREProxy(e){return void 0!==e.proxyObjectTest}}class Ca{constructor(e){this._endpoint=e,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}send(e){this._connect(),this._connected?this._ws.send(e):this._queue.length<100&&this._queue.push(e)}receive(e){e&&(this._connect(),this._callbacks.push(e))}_notifyCallbacks(e){for(let t=0;t<this._callbacks.length;t++)setTimeout(()=>this._callbacks[t](e),1)}_connect(){this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",e=>{this._notifyCallbacks(e.data)}),this._ws.addEventListener("error",e=>{}),this._ws.addEventListener("close",e=>{this._ws=null,this._connected=!1}),this._ws.addEventListener("open",e=>{this._connected=!0;for(let t=0;t<this._queue.length;t++)this._ws.send(this._queue[t]);this._queue=[]}))}}const Aa={transform:function(e,t){if(!t||!t.methods)return e;const{methods:n}=t,o=JSON.parse(JSON.stringify(e));return Object.keys(n).forEach(e=>{const t=n[e],i=t["x-method"],[r,s]=i.split("."),a={};a[t["x-this-param"]]=o,o[e]=(...e)=>{for(var n=0;n<e.length;n++)a[t["x-additional-params"][n]]=e[n];return Ma.send(r.toLowerCase(),s,a)}}),o}};let Ia=null;const Ea="undefined"!=typeof window?window:{};class Ma{constructor(){this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new ba,this._deprecated={},this.isMock=!1}static addEventEmitter(e){Ma.get()._eventEmitters.push(e)}static registerDeprecatedMethod(e,t,n){Ma.get()._deprecated[e.toLowerCase()+"."+t.toLowerCase()]={alternative:n||""}}_endpoint(){return Ea.__firebolt&&Ea.__firebolt.endpoint?Ea.__firebolt.endpoint:null}constructTransportLayer(){let e;const t=this._endpoint();return t&&(t.startsWith("ws://")||t.startsWith("wss://"))?(e=new Ca(t),e.receive(this.receiveHandler.bind(this))):void 0!==Ea.ServiceManager&&Ea.ServiceManager&&Ea.ServiceManager.version?(e=this._queue,Ea.ServiceManager.getServiceForJavaScript("com.comcast.BridgeObject_1",t=>{e=ka.isLegacy(t)?new ka(t):t,this.setTransportLayer(e)})):(this.isMock=!0,e=ea,e.receive(this.receiveHandler.bind(this))),e}setTransportLayer(e){this._transport=e,this._queue.flush(e)}static send(e,t,n,o){return Ma.get()._send(e,t,n,o)}static listen(e,t,n,o){return Ma.get()._sendAndGetId(e,t,n,o)}_send(e,t,n,o){return!Array.isArray(e)||t||n?this._sendAndGetId(e,t,n,o).promise:this._batch(e)}_sendAndGetId(e,t,n,o){const{promise:i,json:r,id:s}=this._processRequest(e,t,n,o),a=JSON.stringify(r);return"DEBUG"===Sa.getLogLevel()&&console.debug("Sending message to transport: "+a),this._transport.send(a),{id:s,promise:i}}_batch(e){const t=[],n=[];e.forEach(({module:e,method:o,params:i,transforms:r})=>{const s=this._processRequest(e,o,i,r);t.push({promise:s.promise,id:s.id}),n.push(s.json)});const o=JSON.stringify(n);return"DEBUG"===Sa.getLogLevel()&&console.debug("Sending message to transport: "+o),this._transport.send(o),t}_processRequest(e,t,n,o){const i={promise:this._addPromiseToQueue(e,t,n,o),json:this._createRequestJSON(e,t,n),id:this._id};return this._id++,i}_createRequestJSON(e,t,n){return{jsonrpc:"2.0",method:e.toLowerCase()+"."+t,params:n,id:this._id}}_addPromiseToQueue(e,t,n,o){return new Promise((i,r)=>{this._promises[this._id]={},this._promises[this._id].promise=this,this._promises[this._id].resolve=i,this._promises[this._id].reject=r,this._promises[this._id].transforms=o;const s=this._deprecated[e.toLowerCase()+"."+t.toLowerCase()];s&&console.warn(`WARNING: ${e}.${t}() is deprecated. `+s.alternative),t.match(/^on[A-Z]/)&&(n.listen?this._eventIds.push(this._id):this._eventIds=this._eventIds.filter(e=>e!==this._id))})}static get(){if(Ea.__firebolt=Ea.__firebolt||{},null==Ea.__firebolt.transport&&null==Ia){const e=new Ma;e.init(),e.isMock?Ia=e:(Ea.__firebolt=Ea.__firebolt||{},Ea.__firebolt.transport=e),Ea.__firebolt.setTransportLayer=e.setTransportLayer.bind(e)}return Ea.__firebolt.transport?Ea.__firebolt.transport:Ia}receiveHandler(e){"DEBUG"===Sa.getLogLevel()&&console.debug("Received message from transport: "+e);const t=JSON.parse(e),n=this._promises[t.id];if(n){if(t.error)n.reject(t.error);else{let e=t.result;n.transforms&&(e=Array.isArray(t.result)?e.map(e=>Aa.transform(e,n.transforms)):Aa.transform(e,n.transforms)),n.resolve(e)}delete this._promises[t.id]}var o;this._eventIds.includes(t.id)&&(!(o=t.result)||"string"!=typeof o.event||"boolean"!=typeof o.listening)&&this._eventEmitters.forEach(e=>{e(t.id,t.result)})}init(){var e,n;e={},n={log:!0},xa.app=e,xa.platform=t({logLevel:"WARN"},n),xa.user={},this._queue.receive(this.receiveHandler.bind(this)),Ea.__firebolt&&(!0===Ea.__firebolt.mockTransportLayer?(this.isMock=!0,this.setTransportLayer(ea)):Ea.__firebolt.getTransportLayer&&this.setTransportLayer(Ea.__firebolt.getTransportLayer())),null==this._transport&&(this._transport=this.constructTransportLayer())}}Ea.__firebolt=Ea.__firebolt||{},Ea.__firebolt.setTransportLayer=e=>{Ma.get().setTransportLayer(e)};let Ra=0;const _a={internal:{},external:{},get:e=>Object.assign(Object.assign({},_a.internal[e]),_a.external[e]),set:(e,t,n)=>{_a.external[e]=_a.external[e]||{},_a.external[e][t]=n},setInternal:(e,t,n)=>{_a.internal[e]=_a.internal[e]||{},_a.internal[e][t]=n},find:e=>{let t;return[_a.internal,_a.external].find(n=>{if(t=Object.keys(n).find(t=>n[t][e]),t)return!0}),t},remove:e=>{[_a.internal,_a.external].forEach(t=>{Object.keys(t).forEach(n=>{t[n]&&t[n][e]&&(delete t[n][e],0===Object.values(t[n]).length&&delete t[n])})})},removeKey:(e,t=!1)=>{t&&_a.internal[e]&&delete _a.internal[e],_a.external[e]&&delete _a.external[e]},keys:()=>Array.from(new Set(Object.keys(_a.internal).concat(Object.keys(_a.external)))),count:e=>Object.values(_a.get(e)).length},La={},Pa=[],Da={},Oa={};let Na=!1;const Ua=(e,t)=>{ja(_a.internal[La[e]],[t]),ja(_a.external[La[e]],[t])},Ba=(e,t)=>{Da[e.toLowerCase()]=t.concat()},Fa=(e,t,n)=>{Oa[e.toLowerCase()]=Oa[e.toLowerCase()]||{},Oa[e.toLowerCase()][t]=n.concat()},ja=(e,t)=>{e&&Object.keys(e).forEach(n=>{let o=e[n];Pa.indexOf(parseInt(n))>=0&&(Pa.splice(Pa.indexOf(parseInt(n)),1),delete e[n]),o.apply(null,t)})},za=function(e,t,n,o,i,r=!1){if(Wa(),"function"!=typeof n)return Promise.reject("No valid callback function provided.");{if("*"===e)return Promise.reject("No valid module name provided");const s="*"===t,a=s?Da[e]:[t],l=[],u=Object.values(o).length>0,c=Object.keys(o).sort().map(e=>e+"="+JSON.stringify(o[e])).join("&");let d,p;Ra++,i&&Pa.push(Ra),a.forEach(t=>{const i=e+"."+t+(u?`.${c}`:"");if(0===Object.values(_a.get(i)).length){const n=Object.assign({listen:!0},o),{id:r,promise:s}=Ma.listen(e,"on"+t[0].toUpperCase()+t.substring(1),n);La[r]=i,l.push(s)}const a=r?_a.setInternal:_a.set;a(i,""+Ra,s?e=>n(t,e):n)});let h=new Promise((e,t)=>{d=e,p=t});const f=Ra;return l.length?l.reduce((e,n)=>e.then(()=>n).then(e=>{d(f)}).catch(e=>{"*"===t?d(f):(qa(f,t,o),p(e))}),Promise.resolve()):d(Ra),h}},$a=function(...e){const t=e.pop(),[n,o,i]=Va(...e);return[n,o,t,i]},Va=function(...e){const t=(e.shift()||"*").toLowerCase(),n=e.shift()||"*",o={};for(let i=0;e.length;i++)o[Oa[t][n][i]]=e.shift();return[t,n,o]},Ha=function(...e){const[t,n,o,i]=$a(...e);return za(t,n,o,i,!1)},Ga=(e,t)=>{const[n,o]=e.split(".").slice(0,2),i=Object.assign({listen:!1},t);Ma.send(n,"on"+o[0].toUpperCase()+o.substr(1),i)},qa=function(e=!1,t=!1,n){if("*"===t&&(t=!1),"number"==typeof e){const t=e.toString(),n=_a.find(t);return!!n&&(_a.remove(t),0===_a.count(n)&&Ga(n),!0)}if(e||t)if(t){const o=Object.values(n).length>0,i=Object.keys(n).sort().map(e=>e+"="+JSON.stringify(n[e])).join("&"),r=e+"."+t+(o?`.${i}`:"");_a.removeKey(r),Ga(r,n)}else _a.keys().forEach(t=>{0===t.indexOf(e.toLowerCase())&&(_a.removeKey(t),Ga(t))});else _a.keys().forEach(e=>{_a.removeKey(e),Ga(e)})},Wa=()=>{Na||(Ma.addEventEmitter(Ua),qs=Ha,Na=!0)},Ka={listen:Ha,once:function(...e){const[t,n,o,i]=$a(...e);return za(t,n,o,i,!0)},clear:function(...e){if(e&&e.length&&"number"==typeof e[0])return qa(e[0]);if(e&&e.length&&"number"==typeof e[1])return qa(e[1]);{const[t,n,o]=Va(...e);return qa(t,n,o)}},broadcast(e,t){Ua(Object.entries(La).find(([t,n])=>n==="app."+e)[0],t)}};const Xa={prop:function(e,t,n,o=void 0,i,r,s){const a=Object.values(n).length,l=ta(n,o,s);if("getter"===l)return Ma.send(e,t,n);if("subscriber"===l){if(i)throw new Error("Cannot subscribe to an immutable property");return Ka.listen(e,t+"Changed",...Object.values(n),o)}if("setter"===l){if(i)throw new Error("Cannot set a value to an immutable property");if(r)throw new Error("Cannot set a value to a readonly property");return Ma.send(e,"set"+t[0].toUpperCase()+t.substring(1),Object.assign({value:o},n))}throw a<s?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}};Ba("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","highContrastUIChanged","voiceGuidanceSettingsChanged"]),Ma.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead."),Ma.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");const Ya={id:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Account","id",t,e,!0,!0,0)},uid:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Account","uid",t,e,!0,!0,0)}};Ba("Advertising",["policyChanged"]),Ma.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead."),Ba("Capabilities",["available","granted","revoked","unavailable"]),Fa("Capabilities","available",["capability"]),Fa("Capabilities","granted",["role","capability"]),Fa("Capabilities","revoked",["role","capability"]),Fa("Capabilities","unavailable",["capability"]),Ba("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]),Ma.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead."),Ma.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead."),Ma.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");const Ja={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:function(){return new Promise((e,t)=>{Ma.send("device","version").then(t=>{(t=t||{}).sdk=t.sdk||{},t.sdk.major=parseInt("1"),t.sdk.minor=parseInt("5"),t.sdk.patch=parseInt("0"),t.sdk.readable="Firebolt Core SDK 1.5.0",e(t)}).catch(e=>{t(e)})})},audio:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","audio",t,e,!1,!0,0)},clear:function(...e){return Ka.clear("Device",...e)},distributor:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","distributor",t,e,!0,!0,0)},hdcp:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","hdcp",t,e,!1,!0,0)},hdr:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","hdr",t,e,!1,!0,0)},id:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","id",t,e,!0,!0,0)},listen:function(...e){return Ka.listen("Device",...e)},make:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","make",t,e,!0,!0,0)},model:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","model",t,e,!0,!0,0)},name:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","name",t,e,!1,!0,0)},network:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","network",t,e,!1,!0,0)},once:function(...e){return Ka.once("Device",...e)},platform:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","platform",t,e,!0,!0,0)},screenResolution:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","screenResolution",t,e,!1,!0,0)},sku:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","sku",t,e,!0,!0,0)},type:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","type",t,e,!0,!0,0)},uid:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","uid",t,e,!0,!0,0)},videoResolution:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Device","videoResolution",t,e,!1,!0,0)}},Qa={};Ba("Discovery",["navigateTo","policyChanged"]),((e,t,n)=>{if(Qa[e])throw`Capability ${e} has multiple provider interfaces registered.`;n.forEach(e=>e.name=`${t}.${e.name}`),Qa[e]=n.concat()})("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]),Ma.registerDeprecatedMethod("Discovery","entityInfo","Use null instead."),Ma.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead."),Ma.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead."),Ma.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead."),Ma.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead."),Ba("Lifecycle",["background","foreground","inactive","suspended","unloading"]),Ba("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]),Ma.registerDeprecatedMethod("Localization","language","Use Localization.locale instead."),Ma.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");const Za={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:function(){return Ma.send("Localization","additionalInfo",{},null)},clear:function(...e){return Ka.clear("Localization",...e)},countryCode:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Localization","countryCode",t,e,!1,!0,0)},language:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Localization","language",t,e,!1,!0,0)},latlon:function(){return Ma.send("Localization","latlon",{},null)},listen:function(...e){return Ka.listen("Localization",...e)},locale:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Localization","locale",t,e,!1,!0,0)},locality:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Localization","locality",t,e,!1,!0,0)},once:function(...e){return Ka.once("Localization",...e)},postalCode:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Localization","postalCode",t,e,!1,!0,0)},preferredAudioLanguages:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),Xa.prop("Localization","preferredAudioLanguages",t,e,!1,!0,0)}};Ba("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]),Ws={Accessibility:ia,Account:ra,Advertising:sa,Authentication:{token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},Capabilities:{supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},Device:aa,Discovery:la,Keyboard:{email:"user@domain.com",password:"abc123",standard:"Living Room"},Lifecycle:ma,Localization:ga,Metrics:{ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},Parameters:{initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},Profile:{approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},SecondScreen:ya,SecureStorage:{get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},Platform:va},Ks.forEach(e=>Qs(e)),Ks.length=0;const el={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},tl=Di.Component("Module",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].w=t.w,l[0].h=t.h,l[0].color=t.bColor,l[0].effects=[{type:"radius",props:{radius:8}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].x=t.w/2,l[1].y=t.h/2,l[1].mount="{x:0.5, y:0.5}",l[1].content=t.name,l[1].color=t.fColor,l[1].font="raleway",l[1].__textnode=!0,a[1].populate(l[1]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("color",e.bColor)},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[1].set("content",e.name)}],context:{}},state:()=>({w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}),props:["name"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$router.to(`/examples/firebolt/${this.name}`)}}}),nl=Di.Component("Methods",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].w=t.w,l[1].h=t.h,l[1].color=t.nameBgColor,l[1].effects=[{type:"radius",props:{radius:[8,8,0,0]}}],a[1].populate(l[1]),e=a[1],l[2]={},a[2]=this.element({parent:e||"root"},t),l[2].content=t.name,l[2].x=t.w/2,l[2].y=t.h/2,l[2].mount=.5,l[2].color="0xffffffff",l[2].font="lato",l[2].size=50,l[2].__textnode=!0,a[2].populate(l[2]),e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},t),l[3].w=t.w,l[3].h=50,l[3].color="0x4b5563ff",l[3].y=75,l[3].effects=[{type:"radius",props:{radius:[0,0,8,8]}}],a[3].populate(l[3]),e=a[3],l[4]={},a[4]=this.element({parent:e||"root"},t),l[4].content=t.about,l[4].maxwidth=t.w,l[4].align="center",l[4].font="lato",l[4].maxlines=1,l[4].size=28,l[4].y=6,l[4].__textnode=!0,a[4].populate(l[4]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("color",e.nameBgColor)},function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(e,t,n,o,i,r){t[2].set("content",e.name)},function(e,t,n,o,i,r){t[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(e,t,n,o,i,r){t[4].set("content",e.about)}],context:{}},state:()=>({w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}),props:["name","about"],hooks:{focus(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }",this.$emit("execute",this.name)},unfocus(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),ol=Di.Component("List",{components:{Method:nl,Module:tl},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y,v=!1,b=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===v?m:t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===v?m:t),l[1].y={transition:t.y},a[1].populate(l[1]),e=a[1],d[2]=[],u[2]=(s=[],a,u)=>{const d=r(s),x=new Set;let w=d.length;const S={}||{};g=S.from||0,y="to"in S?S.to:d.length;for(;w--;){const e=d[w];w<y&&w>=g&&x.add(""+e.name)}let T=u.length;for(;T--;)if(!1===x.has(u[T])){const e=u[T];a[2][e]&&a[2][e].destroy(),a[2][e]=null,delete a[2][e],a[3][e]&&a[3][e].destroy(),a[3][e]=null,delete a[3][e]}u.length=0;const k=d.length,C=[];for(let A=0;A<k;A++){if(A<g||A>=y)continue;const s=Object.create(t);if(e=a[1],s.item=d[A],s.index=A,s.key=""+s.item.name,u.push(s.key),b[2]=n.components&&n.components.Method||o.Method,void 0===a[2]&&(a[2]={}),l[2]={},void 0===a[2][s.key]&&(a[2][s.key]=this.element({parent:e||"root"},!0===v?m:t)),l[2].name=s.item.name,l[2].about=s.item.about,l[2].y=160*s.index,l[2].ref=s.type+s.index,p[2]=[],void 0!==b[2])for(let e in b[2][Symbol.for("config")].props)delete l[2][b[2][Symbol.for("config")].props[e]],p[2].push(b[2][Symbol.for("config")].props[e]);if(void 0===a[2][s.key].nodeId&&a[2][s.key].populate(l[2]),void 0===a[3]&&(a[3]={}),e=a[2][s.key],c[3]={},void 0===a[3][s.key]){if(c[3].name=s.item.name,c[3].about=s.item.about,f=160*s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[3].y=f,f=s.type+s.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[3].ref=f,h=c[3].is||"Method",o[3],"string"==typeof h){if(o[3]=n.components&&n.components[h]||o[h],!o[3])throw new Error('Component "Method" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[3]=h);a[3][s.key]=o[3].call(null,{props:c[3]},a[2][s.key],t),a[3][s.key][Symbol.for("slots")][0]?(e=a[3][s.key][Symbol.for("slots")][0],m=a[3][s.key],v=!0):e=a[3][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==p&&void 0!==p[2]&&-1!==p[2].indexOf("y")||a[2][s.key].set("y",160*s.index)};i(x,null),C.push(x),t[Symbol.for("effects")].push(x),a[3][s.key][Symbol.for("props")].y=160*s.index}return C};let x=()=>{u[2](t.methods,a,d[2])};t[Symbol.for("effects")].push(x),i(x,["methods"]);let w=()=>{t.type;for(let e=0;e<t.methods.length;e++){if(e<g||e>=y)continue;const n={};n.index=e,n.item=t.methods[e],n.key=n.item.name,void 0!==p&&void 0!==p[2]&&-1!==p[2].indexOf("ref")||a[2][n.key].set("ref",t.type+n.index)}};t[Symbol.for("effects")].push(w),i(w);let S,T,k=()=>{t.type;for(let e=0;e<t.methods.length;e++){if(e<g||e>=y)continue;const n={};n.index=e,n.item=t.methods[e],n.key=n.item.name,a[3][n.key][Symbol.for("props")].ref=t.type+n.index}};t[Symbol.for("effects")].push(k),i(k),e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===v?m:t),l[4].x={transition:t.x},l[4].y=325,a[4].populate(l[4]),e=a[4],d[5]=[],u[5]=(i=[],s,a)=>{const u=r(i),d=new Set;let g=u.length;const y={}||{};S=y.from||0,T="to"in y?y.to:u.length;for(;g--;){const e=u[g];g<T&&g>=S&&d.add(""+e.id)}let x=a.length;for(;x--;)if(!1===d.has(a[x])){const e=a[x];s[5][e]&&s[5][e].destroy(),s[5][e]=null,delete s[5][e],s[6][e]&&s[6][e].destroy(),s[6][e]=null,delete s[6][e]}a.length=0;const w=u.length;for(let k=0;k<w;k++){if(k<S||k>=T)continue;const i=Object.create(t);if(e=s[4],i.item=u[k],i.index=k,i.key=""+i.item.id,a.push(i.key),b[5]=n.components&&n.components.Module||o.Module,void 0===s[5]&&(s[5]={}),l[5]={},void 0===s[5][i.key]&&(s[5][i.key]=this.element({parent:e||"root"},!0===v?m:t)),l[5].name=i.item.name,l[5].ref=i.type+i.index,l[5].x=400*i.index,p[5]=[],void 0!==b[5])for(let e in b[5][Symbol.for("config")].props)delete l[5][b[5][Symbol.for("config")].props[e]],p[5].push(b[5][Symbol.for("config")].props[e]);if(void 0===s[5][i.key].nodeId&&s[5][i.key].populate(l[5]),void 0===s[6]&&(s[6]={}),e=s[5][i.key],c[6]={},void 0===s[6][i.key]){if(c[6].name=i.item.name,f=i.type+i.index,!0===Array.isArray(f)&&(f=r(f).slice(0)),c[6].ref=f,c[6].x=400*i.index,h=c[6].is||"Module",o[6],"string"==typeof h){if(o[6]=n.components&&n.components[h]||o[h],!o[6])throw new Error('Component "Module" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[6]=h);s[6][i.key]=o[6].call(null,{props:c[6]},s[5][i.key],t),s[6][i.key][Symbol.for("slots")][0]?(e=s[6][i.key][Symbol.for("slots")][0],m=s[6][i.key],v=!0):e=s[6][i.key][Symbol.for("children")][0]}}return[]};let C=()=>{u[5](t.modules,a,d[5])};t[Symbol.for("effects")].push(C),i(C,["modules"]);let A=()=>{t.type;for(let e=0;e<t.modules.length;e++){if(e<S||e>=T)continue;const n={};n.index=e,n.item=t.modules[e],n.key=n.item.id,void 0!==p&&void 0!==p[5]&&-1!==p[5].indexOf("ref")||a[5][n.key].set("ref",t.type+n.index)}};t[Symbol.for("effects")].push(A),i(A);let I=()=>{t.type;for(let e=0;e<t.modules.length;e++){if(e<S||e>=T)continue;const n={};n.index=e,n.item=t.modules[e],n.key=n.item.id,a[6][n.key][Symbol.for("props")].ref=t.type+n.index}};return t[Symbol.for("effects")].push(I),i(I),{elms:a,cleanup:()=>{f=null,m=null,t=null,e=null,d[2].length=0,u[2]=null,b[2]=null,c[3]=null,o[3]=null,x=null,w=null,k=null,d[5].length=0,u[5]=null,b[5]=null,c[6]=null,o[6]=null,C=null,A=null,I=null,b.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("y",{transition:e.y})},function(e,t,n,o,i,r){t[4].set("x",{transition:e.x})}],context:{}},state:()=>({x:400,y:100,activeIndex:0}),props:["data","type"],computed:{methods(){return this.isModule,this.data,this.isModule?[]:this.data},modules(){return this.isModule,this.data,this.isModule?this.data:[]},isModule(){return this.type,"module"===this.type}},watch:{activeIndex(e){const t=this.$select(`${this.type}${e}`);t&&t.$focus&&t.$focus()}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left(){this.isModule&&this.activeIndex>0&&this.move(-1)},down(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move(e){const t=this.activeIndex+e;"method"==this.type?this.y=t>5?160*-(t-5)-100:100:"module"==this.type&&(this.x=t>3?400*-(t-3)-400:400),this.activeIndex=t}}}),il=Di.Component("FireBolt",{components:{List:ol},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),a[0].populate(l[0]),!0===h&&(f-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].content="FireBolt Modules",l[1].x=960,l[1].y=80,l[1].mount="{x:0.5}",l[1].size=80,l[1].font="raleway",l[1].__textnode=!0,a[1].populate(l[1]),!0===h&&(f-=1),m[2]=n.components&&n.components.List||o.List,e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===h?p:t),l[2].data=t.moduleNames,l[2].type="module",l[2].ref="modules",c[2]=[],void 0!==m[2])for(let g in m[2][Symbol.for("config")].props)delete l[2][m[2][Symbol.for("config")].props[g]],c[2].push(m[2][Symbol.for("config")].props[g]);if(a[2].populate(l[2]),!0===h&&(f-=1),e=a[2],u[3]={},u[3].data=t.moduleNames,u[3].type="module",u[3].ref="modules",d=u[3].is||"List",o[3],"string"==typeof d){if(o[3]=n.components&&n.components[d]||o[d],!o[3])throw new Error('Component "List" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[3]=d);return a[3]=o[3].call(null,{props:u[3]},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],p=a[3],h=!0):e=a[3][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[2]=null,u[3]=null,o[3]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[],context:{}},computed:{moduleNames:()=>Object.keys(el).map(e=>({id:e,name:e.charAt(0).toUpperCase()+e.slice(1)}))},hooks:{focus(){const e=this.$select("modules");e&&e.$focus&&e.$focus()}}}),rl=Di.Component("DeviceModule",{components:{List:ol},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),a[0].populate(l[0]),!0===h&&(f-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].content="Device",l[1].x=960,l[1].mount="{x:0.5}",l[1].y=50,l[1].font="raleway",l[1].size=40,l[1].__textnode=!0,a[1].populate(l[1]),!0===h&&(f-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===h?p:t),l[2].content=t.device.about,l[2].x=960,l[2].mount="{x:0.5}",l[2].y=110,l[2].font="lato",l[2].__textnode=!0,a[2].populate(l[2]),!0===h&&(f-=1),m[3]=n.components&&n.components.List||o.List,e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].data=t.device.methods,l[3].x=300,l[3].ref="methods",l[3].type="method",l[3].y=100,c[3]=[],void 0!==m[3])for(let g in m[3][Symbol.for("config")].props)delete l[3][m[3][Symbol.for("config")].props[g]],c[3].push(m[3][Symbol.for("config")].props[g]);if(a[3].populate(l[3]),!0===h&&(f-=1),e=a[3],u[4]={},u[4].data=t.device.methods,u[4].x=300,u[4].ref="methods",u[4].type="method",u[4].y=100,d=u[4].is||"List",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "List" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);return a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],p=a[4],h=!0):e=a[4][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===h?p:t),l[5].x=1400,l[5].y=540,l[5].content=t.response,l[5].size=100,l[5].mount=.5,l[5].font="lato",l[5].show=!t.isNetworkRes,l[5].__textnode=!0,a[5].populate(l[5]),!0===h&&(f-=1),e=a[0],l[6]={},a[6]=this.element({parent:e||"root"},!0===h?p:t),l[6].show=t.isNetworkRes,a[6].populate(l[6]),!0===h&&(f-=1),e=a[6],l[7]={},a[7]=this.element({parent:e||"root"},!0===h?p:t),l[7].content="State: "+t.networkRes.state,l[7].size=70,l[7].font="lato",l[7].x=1400,l[7].y=500,l[7].mount=.5,l[7].__textnode=!0,a[7].populate(l[7]),!0===h&&(f-=1),e=a[6],l[8]={},a[8]=this.element({parent:e||"root"},!0===h?p:t),l[8].content="Type: "+t.networkRes.type,l[8].size=70,l[8].font="lato",l[8].y=580,l[8].x=1400,l[8].mount=.5,l[8].__textnode=!0,a[8].populate(l[8]),!0===h&&(f-=1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[3]=null,u[4]=null,o[4]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[5].set("content",e.response)},function(e,t,n,o,i,r){t[5].set("show",!e.isNetworkRes)},function(e,t,n,o,i,r){t[6].set("show",e.isNetworkRes)},function(e,t,n,o,i,r){t[7].set("content","State: "+e.networkRes.state)},function(e,t,n,o,i,r){t[8].set("content","Type: "+e.networkRes.type)}],context:{}},state:()=>({device:el.device,response:"",networkRes:{},isNetworkRes:!1}),hooks:{ready(){this.$listen("execute",async e=>{switch(this.$log.info(`Execute Device ${e} API`),this.isNetworkRes=!1,e){case"make":this.response=await Ja.make();break;case"model":this.response=await Ja.model();break;case"name":this.response=await Ja.name();break;case"network":Object.assign(this.networkRes,await Ja.network()),this.isNetworkRes=!0;break;case"platform":this.response=await Ja.platform()}})},focus(){const e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),sl=Di.Component("AccountModule",{components:{List:ol},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),a[0].populate(l[0]),!0===h&&(f-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].content="Account",l[1].x=960,l[1].mount="{x:0.5}",l[1].y=50,l[1].font="raleway",l[1].size=40,l[1].__textnode=!0,a[1].populate(l[1]),!0===h&&(f-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===h?p:t),l[2].content=t.account.about,l[2].x=960,l[2].mount="{x:0.5}",l[2].y=110,l[2].font="lato",l[2].__textnode=!0,a[2].populate(l[2]),!0===h&&(f-=1),m[3]=n.components&&n.components.List||o.List,e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].data=t.account.methods,l[3].x=300,l[3].ref="methods",l[3].y=300,l[3].type="method",c[3]=[],void 0!==m[3])for(let g in m[3][Symbol.for("config")].props)delete l[3][m[3][Symbol.for("config")].props[g]],c[3].push(m[3][Symbol.for("config")].props[g]);if(a[3].populate(l[3]),!0===h&&(f-=1),e=a[3],u[4]={},u[4].data=t.account.methods,u[4].x=300,u[4].ref="methods",u[4].y=300,u[4].type="method",d=u[4].is||"List",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "List" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);return a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],p=a[4],h=!0):e=a[4][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===h?p:t),l[5].x=1400,l[5].y=540,l[5].content=t.response,l[5].size=t.size,l[5].mount=.5,l[5].font="lato",l[5].__textnode=!0,a[5].populate(l[5]),!0===h&&(f-=1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[3]=null,u[4]=null,o[4]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[5].set("content",e.response)},function(e,t,n,o,i,r){t[5].set("size",e.size)}],context:{}},state:()=>({account:el.account,response:"",size:100}),hooks:{ready(){this.$listen("execute",async e=>{switch(this.$log.info(`Execute Account ${e} API`),e){case"id":this.size=100,this.response=await Ya.id();break;case"uid":this.size=40,this.response=await Ja.uid()}})},focus(){const e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),al=Di.Component("LocalizationModule",{components:{List:ol},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h=!1,f=0,m=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===h?p:t),a[0].populate(l[0]),!0===h&&(f-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===h?p:t),l[1].content="Localization",l[1].x=960,l[1].mount="{x:0.5}",l[1].y=50,l[1].font="raleway",l[1].size=40,l[1].__textnode=!0,a[1].populate(l[1]),!0===h&&(f-=1),e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===h?p:t),l[2].content=t.localization.about,l[2].x=960,l[2].mount="{x:0.5}",l[2].y=110,l[2].font="lato",l[2].__textnode=!0,a[2].populate(l[2]),!0===h&&(f-=1),m[3]=n.components&&n.components.List||o.List,e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===h?p:t),l[3].data=t.localization.methods,l[3].x=300,l[3].ref="methods",l[3].y=100,l[3].type="method",c[3]=[],void 0!==m[3])for(let g in m[3][Symbol.for("config")].props)delete l[3][m[3][Symbol.for("config")].props[g]],c[3].push(m[3][Symbol.for("config")].props[g]);if(a[3].populate(l[3]),!0===h&&(f-=1),e=a[3],u[4]={},u[4].data=t.localization.methods,u[4].x=300,u[4].ref="methods",u[4].y=100,u[4].type="method",d=u[4].is||"List",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "List" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);return a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],p=a[4],h=!0):e=a[4][Symbol.for("children")][0],!0===h&&0===f&&(h=!1),e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===h?p:t),l[5].x=1400,l[5].y=540,l[5].content=t.response,l[5].size=t.size,l[5].mount=.5,l[5].font="lato",l[5].__textnode=!0,a[5].populate(l[5]),!0===h&&(f-=1),{elms:a,cleanup:()=>{p=null,t=null,e=null,m[3]=null,u[4]=null,o[4]=null,m.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[5].set("content",e.response)},function(e,t,n,o,i,r){t[5].set("size",e.size)}],context:{}},state:()=>({localization:el.localization,response:"",size:100}),hooks:{ready(){this.$listen("execute",async e=>{switch(this.$log.info(`Execute Keyboard ${e} API`),this.response="null",e){case"countryCode":this.response=await Za.countryCode();break;case"language":this.response=await Za.language();break;case"latlon":this.response=(await Za.latlon()).toString();break;case"locality":this.response=await Za.locality();break;case"postalCode":this.response=await Za.postalCode()}})},focus(){const e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),ll=[{path:"/examples/firebolt",component:il},{path:"/examples/firebolt/device",component:rl},{path:"/examples/firebolt/account",component:sl},{path:"/examples/firebolt/localization",component:al}],ul=Di.Component("Item",{code:{render:function(e,t,n,o,i,r,s){const a=[],l=[];return l[0]={},a[0]=this.element({parent:e||"root"},t),l[0].color=t.hasFocus?"0xe0f2feff":"0xfef9c3ff",l[0].w=200,l[0].h=200,l[0].effects=[{type:"radius",props:{radius:12}}],a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},t),l[1].content=t.name,l[1].size=t.hasFocus?38:32,l[1].color=t.hasFocus?"0x1e3a8aff":"0x2563ebff",l[1].placement="{x: 'center', y: 'middle'}",l[1].__textnode=!0,a[1].populate(l[1]),{elms:a,cleanup:()=>{t=null,e=null,a.length=0,o.length=0,l.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("color",e.hasFocus?"0xe0f2feff":"0xfef9c3ff")},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:12}}])},function(e,t,n,o,i,r){t[1].set("content",e.name)},function(e,t,n,o,i,r){t[1].set("size",e.hasFocus?38:32)},function(e,t,n,o,i,r){t[1].set("color",e.hasFocus?"0x1e3a8aff":"0x2563ebff")}],context:{}},props:["name"],state:()=>({message:null}),hooks:{focus(){this.message=this.$announcer.speak(this.name)},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}}}),cl=Di.Component("Row",{components:{Item:ul},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[],d=[],p=[];let h,f,m,g,y=!1,v=[];l[0]={},a[0]=this.element({parent:e||"root"},!0===y?f:t),a[0].populate(l[0]),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===y?f:t),l[1].content=t.title,l[1].size=40,l[1].__textnode=!0,a[1].populate(l[1]),e=a[0],d[2]=[],u[2]=(i=[],s,a)=>{const u=r(i),d=new Set;let b=u.length;const x={}||{};m=x.from||0,g="to"in x?x.to:u.length;for(;b--;)u[b],b<g&&b>=m&&d.add(""+b);let w=a.length;for(;w--;)if(!1===d.has(a[w])){const e=a[w];s[2][e]&&s[2][e].destroy(),s[2][e]=null,delete s[2][e],s[3][e]&&s[3][e].destroy(),s[3][e]=null,delete s[3][e]}a.length=0;const S=u.length;for(let r=0;r<S;r++){if(r<m||r>=g)continue;const i=Object.create(t);if(e=s[0],i.item=u[r],i.index=r,i.key=""+r,i.__ref="item"+r,a.push(i.key),v[2]=n.components&&n.components.Item||o.Item,void 0===s[2]&&(s[2]={}),l[2]={},void 0===s[2][i.key]&&(s[2][i.key]=this.element({parent:e||"root"},!0===y?f:t)),l[2].name=i.item,l[2].y=100,l[2].x=250*i.index+100,l[2].ref=i.__ref,p[2]=[],void 0!==v[2])for(let e in v[2][Symbol.for("config")].props)delete l[2][v[2][Symbol.for("config")].props[e]],p[2].push(v[2][Symbol.for("config")].props[e]);if(void 0===s[2][i.key].nodeId&&s[2][i.key].populate(l[2]),void 0===s[3]&&(s[3]={}),e=s[2][i.key],c[3]={},void 0===s[3][i.key]){if(c[3].name=i.item,c[3].y=100,c[3].x=250*i.index+100,c[3].ref=i.__ref,h=c[3].is||"Item",o[3],"string"==typeof h){if(o[3]=n.components&&n.components[h]||o[h],!o[3])throw new Error('Component "Item" not found')}else"function"==typeof h&&!0===h[Symbol.for("isComponent")]&&(o[3]=h);s[3][i.key]=o[3].call(null,{props:c[3]},s[2][i.key],t),s[3][i.key][Symbol.for("slots")][0]?(e=s[3][i.key][Symbol.for("slots")][0],f=s[3][i.key],y=!0):e=s[3][i.key][Symbol.for("children")][0]}}return[]};let b=()=>{u[2](t.items,a,d[2])};return t[Symbol.for("effects")].push(b),i(b,["items"]),{elms:a,cleanup:()=>{f=null,t=null,e=null,d[2].length=0,u[2]=null,v[2]=null,c[3]=null,o[3]=null,b=null,v.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0,p.length=0}}},effects:[function(e,t,n,o,i,r){t[1].set("content",e.title)}],context:{}},props:["title","items"],state:()=>({focusIndex:-1,message:null}),hooks:{focus(){this.message=this.$announcer.speak("Row with different "+this.title),this.focusIndex=0,this.$trigger("focusIndex")},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}},watch:{focusIndex(e){this.$select("item"+e).$focus()}},input:{right(){this.focusIndex=Math.min(this.focusIndex+1,this.items.length-1)},left(){this.focusIndex=Math.max(this.focusIndex-1,0)}}}),dl=Di.Component("Announcer",{components:{Row:cl},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),l[0].width=1*e.node.width,l[0].y=50,a[0].populate(l[0]),!0===f&&(m-=1),e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].placement="{x: 'center'}",l[1].size=50,l[1].content="Food",l[1].__textnode=!0,a[1].populate(l[1]),!0===f&&(m-=1),g[2]=n.components&&n.components.Row||o.Row,e=a[0],l[2]={},a[2]=this.element({parent:e||"root"},!0===f?h:t),l[2].title="Fruits",l[2].x=200,l[2].y=150,l[2].items=["Banana","Strawberry","Kiwi","Mango","Grape"],l[2].ref="row1",c[2]=[],void 0!==g[2])for(let y in g[2][Symbol.for("config")].props)delete l[2][g[2][Symbol.for("config")].props[y]],c[2].push(g[2][Symbol.for("config")].props[y]);if(a[2].populate(l[2]),!0===f&&(m-=1),e=a[2],u[3]={},u[3].title="Fruits",u[3].x=200,u[3].y=150,p=["Banana","Strawberry","Kiwi","Mango","Grape"],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[3].items=p,u[3].ref="row1",d=u[3].is||"Row",o[3],"string"==typeof d){if(o[3]=n.components&&n.components[d]||o[d],!o[3])throw new Error('Component "Row" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[3]=d);if(a[3]=o[3].call(null,{props:u[3]},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],h=a[3],f=!0):e=a[3][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[4]=n.components&&n.components.Row||o.Row,e=a[0],l[4]={},a[4]=this.element({parent:e||"root"},!0===f?h:t),l[4].title="Snacks",l[4].x=200,l[4].y=600,l[4].items=["Pizza","Burger","Fries","Popcorn","Chocolate"],l[4].ref="row2",c[4]=[],void 0!==g[4])for(let y in g[4][Symbol.for("config")].props)delete l[4][g[4][Symbol.for("config")].props[y]],c[4].push(g[4][Symbol.for("config")].props[y]);if(a[4].populate(l[4]),!0===f&&(m-=1),e=a[4],u[5]={},u[5].title="Snacks",u[5].x=200,u[5].y=600,p=["Pizza","Burger","Fries","Popcorn","Chocolate"],!0===Array.isArray(p)&&(p=r(p).slice(0)),u[5].items=p,u[5].ref="row2",d=u[5].is||"Row",o[5],"string"==typeof d){if(o[5]=n.components&&n.components[d]||o[d],!o[5])throw new Error('Component "Row" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[5]=d);return a[5]=o[5].call(null,{props:u[5]},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],h=a[5],f=!0):e=a[5][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[2]=null,u[3]=null,o[3]=null,g[4]=null,u[5]=null,o[5]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("items")||t[2].set("items",["Banana","Strawberry","Kiwi","Mango","Grape"])},function(e,t,n,o,i,r){t[3][Symbol.for("props")].items=["Banana","Strawberry","Kiwi","Mango","Grape"]},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[4]&&-1!==skips[4].indexOf("items")||t[4].set("items",["Pizza","Burger","Fries","Popcorn","Chocolate"])},function(e,t,n,o,i,r){t[5][Symbol.for("props")].items=["Pizza","Burger","Fries","Popcorn","Chocolate"]}],context:{}},state:()=>({focusIndex:1}),watch:{focusIndex(e){this.$select("row"+e).$focus()}},hooks:{focus(){this.$announcer.speak("The topic is Food"),this.$trigger("focusIndex")}},input:{up(){this.focusIndex=Math.max(this.focusIndex-1,1)},down(){this.focusIndex=Math.min(this.focusIndex+1,2)}}}),pl=new URLSearchParams(window.location.search),hl=!!pl.get("source"),fl=!!pl.get("fps"),ml=Di.Application({components:{SourceInfo:$i},code:{render:function(e,t,n,o,i,r,s){const a=[],l=[],u=[],c=[];let d,p,h,f=!1,m=0,g=[];if(l[0]={},a[0]=this.element({parent:e||"root"},!0===f?h:t),l[0].w=1920,l[0].h=1080,l[0].color=t.backgroundColor,a[0].populate(l[0]),!0===f&&(m-=1),g[1]=n.components&&n.components.RouterView||o.RouterView,e=a[0],l[1]={},a[1]=this.element({parent:e||"root"},!0===f?h:t),l[1].w=1*e.node.width,l[1].h=1*e.node.height,c[1]=[],void 0!==g[1])for(let y in g[1][Symbol.for("config")].props)delete l[1][g[1][Symbol.for("config")].props[y]],c[1].push(g[1][Symbol.for("config")].props[y]);if(a[1].populate(l[1]),!0===f&&(m-=1),e=a[1],u[2]={},u[2].w=1*e.node.width,u[2].h=1*e.node.height,d=u[2].is||"RouterView",o[2],"string"==typeof d){if(o[2]=n.components&&n.components[d]||o[d],!o[2])throw new Error('Component "RouterView" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[2]=d);if(a[2]=o[2].call(null,{props:u[2]},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],h=a[2],f=!0):e=a[2][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[3]=n.components&&n.components.FPScounter||o.FPScounter,e=a[0],l[3]={},a[3]=this.element({parent:e||"root"},!0===f?h:t),l[3].x=1610,l[3].show=t.showFPS,c[3]=[],void 0!==g[3])for(let y in g[3][Symbol.for("config")].props)delete l[3][g[3][Symbol.for("config")].props[y]],c[3].push(g[3][Symbol.for("config")].props[y]);if(a[3].populate(l[3]),!0===f&&(m-=1),e=a[3],u[4]={},u[4].x=1610,p=t.showFPS,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[4].show=p,d=u[4].is||"FPScounter",o[4],"string"==typeof d){if(o[4]=n.components&&n.components[d]||o[d],!o[4])throw new Error('Component "FPScounter" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[4]=d);if(a[4]=o[4].call(null,{props:u[4]},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],h=a[4],f=!0):e=a[4][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),g[5]=n.components&&n.components.SourceInfo||o.SourceInfo,e=a[0],l[5]={},a[5]=this.element({parent:e||"root"},!0===f?h:t),l[5].ref="info",l[5].show=t.showInfo,c[5]=[],void 0!==g[5])for(let y in g[5][Symbol.for("config")].props)delete l[5][g[5][Symbol.for("config")].props[y]],c[5].push(g[5][Symbol.for("config")].props[y]);if(a[5].populate(l[5]),!0===f&&(m-=1),e=a[5],u[6]={},u[6].ref="info",p=t.showInfo,!0===Array.isArray(p)&&(p=r(p).slice(0)),u[6].show=p,d=u[6].is||"SourceInfo",o[6],"string"==typeof d){if(o[6]=n.components&&n.components[d]||o[d],!o[6])throw new Error('Component "SourceInfo" not found')}else"function"==typeof d&&!0===d[Symbol.for("isComponent")]&&(o[6]=d);return a[6]=o[6].call(null,{props:u[6]},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],h=a[6],f=!0):e=a[6][Symbol.for("children")][0],!0===f&&0===m&&(f=!1),{elms:a,cleanup:()=>{p=null,h=null,t=null,e=null,g[1]=null,u[2]=null,o[2]=null,g[3]=null,u[4]=null,o[4]=null,g[5]=null,u[6]=null,o[6]=null,g.length=0,a.length=0,o.length=0,l.length=0,u.length=0,c.length=0}}},effects:[function(e,t,n,o,i,r){t[0].set("color",e.backgroundColor)},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[3]&&-1!==skips[3].indexOf("show")||t[3].set("show",e.showFPS)},function(e,t,n,o,i,r){t[4][Symbol.for("props")].show=e.showFPS},function(e,t,n,o,i,r){"undefined"!=typeof skips&&void 0!==skips[5]&&-1!==skips[5].indexOf("show")||t[5].set("show",e.showInfo)},function(e,t,n,o,i,r){t[6][Symbol.for("props")].show=e.showInfo}],context:{}},state:()=>({backgroundColor:"#1e293b",showFPS:fl,showInfo:!1}),routes:[{path:"/",component:Hi,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>ie(()=>o.import("./Loading-legacy-Q4v1-X24.js"))},{path:"/demos/intro",component:()=>new Promise(e=>{e(qi)})},{path:"/demos/theming",component:Xi},{path:"/demos/tmdb",component:pr},{path:"/demos/sprites",component:mr},{path:"/demos/focushandling",component:vr},{path:"/demos/memory-game",component:ws,announce:"Let's play Memory"},{path:"/demos/player",component:Ur},{path:"/examples/positioning",component:br},{path:"/examples/colors",component:Br},{path:"/examples/gradients",component:Fr},{path:"/examples/transitions",component:jr},{path:"/examples/alpha",component:zr},{path:"/examples/scaling",component:$r},{path:"/examples/rotation",component:Vr},{path:"/examples/keyinput",component:Hr},{path:"/examples/texts",component:Wr},{path:"/examples/images",component:Xr},{path:"/examples/components",component:Qr},{path:"/examples/forloop",component:es},{path:"/examples/forloop-advanced",component:cs},{path:"/examples/effects",component:ds},{path:"/examples/showif",component:ps},{path:"/examples/events",component:hs},{path:"/examples/slots",component:ys},{path:"/examples/viewport",component:Is},...Os,{path:"/examples/resize",component:Ns},{path:"/examples/languageplugin",component:Bs},{path:"/examples/keycodes",component:js},{path:"/examples/translations",component:Bs},{path:"/examples/special-characters",component:Vs},{path:"/examples/layout",component:Hs},{path:"/examples/announcer",component:dl,announce:"Welcome to the announcement example page"},{path:"/benchmarks/exponential",component:ks},...ll],hooks:{ready(){!0===hl&&(this.showInfo=!0),this.$listen("changeBackground",e=>{this.backgroundColor=e?e+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(e){return"x"===e.key?(this.$log.info(`Intercepting key press (${e.key}) in App Component`),new Promise(t=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),t(e)},2e3)})):e},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const e=gl(this.$router.currentRoute.path);e&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${e}`,"_blank")}}}),gl=e=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"}["/"+e]+".js"),yl={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},vl={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};Di.Plugin(Ui,"colors",{themes:{light:yl.light,dark:yl.dark},base:"light",current:"dark"}),Di.Plugin(Ui,"sizes",{themes:{small:vl.small,large:vl.large},base:"small",current:"small"}),Di.Plugin(Ni),Di.Launch(ml,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:t(t({},(()=>{let e={};return Object.keys(Fi).forEach(t=>{Fi[t].test&&"function"==typeof Fi[t].test&&!0===Fi[t].test()&&(e=Fi[t].mapping)}),e})()),{85:"sourceCode"}),fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0})}}})}();
