!function(){function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register([],function(t,n){"use strict";return{execute:function(){var o,i,r;const s={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),config:Symbol.for("config"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},a={[s.settings]:{},get(e,t=null){return e in this[s.settings]?this[s.settings][e]:t},set(e,t){"object"==typeof e?Object.keys(e).forEach(t=>{this.set(t,e[t])}):this[s.settings][e]=t}},l=()=>{},u=()=>(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),c=e=>{const t=a.get("debugLevel"),n={};return Object.defineProperty(n,"info",{get:()=>(t>=1||Array.isArray(t)&&t.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${e} %c ${u()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||l}),Object.defineProperty(n,"warn",{get:()=>(t>=1||Array.isArray(t)&&t.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${e} %c ${u()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||l}),Object.defineProperty(n,"error",{get:()=>(t>=1||Array.isArray(t)&&t.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${e} %c ${u()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||l}),Object.defineProperty(n,"debug",{get:()=>(t>=2||Array.isArray(t)&&t.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${e} %c (${(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||l}),n};let p;const d={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},h=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,f=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,m=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,g={},y=e=>{if(void 0!==g[e])return g[e];const t=parseInt(e).toString(16).padStart(2,"0");return g[e]=t,t},v=(e="",t="0xffffffff")=>{if((e=e.toString()).startsWith("0x")&&10===e.length)return e;if(void 0!==d[e])return d[e];if(h.test(e)){3===(e=e.replace("#","").toLowerCase()).length&&(e=e.split("").map(e=>e+e).join(""));const t="0x"+e.padEnd(8,"f");return d[e]=t,t}const n=f.exec(e);if(n){const t=y(n[3]),o=y(n[5]),i=y(n[7]);let r="ff";if(n[10]&&"rgba"===n[1]){const e=Math.min(Math.max(Math.round(255*parseFloat(n[10])),0),255);r=y(e)}const s="0x"+t+o+i+r;return d[e]=s,s}return m.test(e)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):t};let b,x;function w(e={children:[]},t=!1){const n={renderCode:["const elms = []","let componentType","const rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0"],effectsCode:[],context:{props:[],components:this.components}};return b=-1,x=t,!0===x&&n.renderCode.push("\n      function propInComponent(prop, kind=\"dynamic\") {\n        const property = prop.includes('.') ? prop.split('.')[0] : prop\n        if (kind === 'reactive' || prop.includes('.') === false) {\n          if (property in component === false) {\n            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')\n          }\n        } else {\n          const nestedKeys = prop.split('.')\n          let base = component\n          for(let i =0; i<nestedKeys.length;i++){\n            if (base[nestedKeys[i]] === undefined) {\n              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')\n            }\n            base = base[nestedKeys[i]]\n          }\n        }\n      }\n    "),A.call(n,e),n.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw","Log",n.renderCode.join("\n")),effects:n.effectsCode.map(e=>new Function("component","elms","context","components","rootComponent","effect",e)),context:n.context}}const S=function(e,t,n="dynamic"){const o=function(e){const t=e.match(/\$\$?\w+(\.\w+)?/g);if(null!==t){const e=/\$shader/;return t.filter(t=>!e.test(t))}return!1}(e);if(!1!==o)for(let i=0;i<o.length;i++){let e=o[i];"reactive"===n&&e.includes(".")&&(e=e.split(".")[0]),t.push(`propInComponent('${e.replace("$","")}', '${n}')`)}},T=function(e,t=!1,n={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const o=n.forceEffect?this.effectsCode:this.renderCode;t&&o.push(`parent = ${t}`),"key"in e&&(n.key=E(e.key,n.component));const i=n.key?`elms[${b}][${n.key}]`:`elms[${b}]`;n.key&&o.push(`\n      if(elms[${b}] === undefined) {\n        elms[${b}] = {}\n      }\n    `),o.push(`const elementConfig${b} = {}`),n.forloop&&o.push(`if(${i} === undefined) {`),o.push(`\n    ${i} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)\n  `),n.forloop&&o.push("}");const r=e.children;delete e.children,"Slot"===e[Symbol.for("componentType")]&&o.push(`elementConfig${b}[Symbol.for('isSlot')] = true`),Object.keys(e).forEach(t=>{if("slot"===t&&o.push(`\n        elementConfig${b}['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '${e.slot}').shift() || parent\n      `),"key"===t)return;const r=e[t];if(M(t)){if(n.holder&&":color"===t)return;n.holder?this.effectsCode.push(`\n        if(typeof skip${b} === 'undefined' ||\n          skip${b}.indexOf('${t.substring(1)}') === -1)\n          ${i}.set('${t.substring(1)}', ${E(e[t],n.component)})\n        `):this.effectsCode.push(`\n            ${i}.set('${t.substring(1)}', ${E(e[t],n.component)})\n          `),!0===x&&"scope."!==n.component&&r.includes("$")&&S(r,o,"reactive"),o.push(`elementConfig${b}['${t.substring(1)}'] = ${E(r,n.component)}`)}else!0===x&&"scope."!==n.component&&r.includes("$")&&S(r,o),o.push(`elementConfig${b}['${t}'] = ${I(r,t,n.component)}`)}),!0===n.holder&&o.push(`\n    const skip${b} = []\n    if(typeof cmp${b} !== 'undefined') {\n      for(let key in cmp${b}[Symbol.for('config')].props) {\n        delete elementConfig${b}[cmp${b}[Symbol.for('config')].props[key]]\n        skip${b}.push(cmp${b}[Symbol.for('config')].props[key])\n      }\n    }\n    `),n.forloop&&o.push(`if(${i}.nodeId === undefined) {`),o.push(`${i}.populate(elementConfig${b})`),o.push("\n    if(inSlot === true) {\n      slotChildCounter -= 1\n    }\n  "),n.forloop&&o.push("}"),r&&A.call(this,{children:r},`${i}`,n)},k=function(e,t=!1,n={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const o=n.forceEffect?this.effectsCode:this.renderCode;o.push(`\n    const cmp${b} =\n      (context.components && context.components['${e[Symbol.for("componentType")]}']) || components['${e[Symbol.for("componentType")]}']\n  `),"key"in e&&(n.key=E(e.key,n.component));const i=e.children;delete e.children,T.call(this,e,t,{...n,holder:!0}),t=n.key?`elms[${b}][${n.key}]`:`elms[${b}]`,b++;const r=n.key?`elms[${b}][${n.key}]`:`elms[${b}]`;n.key&&o.push(`\n      if(elms[${b}] === undefined) {\n        elms[${b}] = {}\n      }\n    `),t&&o.push(`parent = ${t}`),o.push(`const props${b} = {}`),n.forloop&&o.push(`if(${r} === undefined) {`),Object.keys(e).forEach(t=>{M(t)?(this.effectsCode.push(`\n        ${r}[Symbol.for('props')]['${t.substring(1)}'] = ${E(e[t],n.component)}`),o.push(`\n        propData = ${E(e[t],n.component)}\n        if (Array.isArray(propData) === true) {\n          propData = getRaw(propData).slice(0)\n        }\n        props${b}['${t.substring(1)}'] = propData`)):o.push(`props${b}['${t}'] = ${I(e[t],t,n.component)}`)}),o.push(`\n    componentType = props${b}['is'] || '${e[Symbol.for("componentType")]}'\n\n    let component${b}\n    if(typeof componentType === 'string') {\n      component${b} = context.components && context.components[componentType] || components[componentType]\n      if(!component${b}) {\n        throw new Error('Component "${e[Symbol.for("componentType")]}" not found')\n      }\n    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {\n      component${b} = componentType\n    }\n\n    ${r} = component${b}.call(null, {props: props${b}}, ${t}, component)\n\n    if (${r}[Symbol.for('slots')][0]) {\n      parent = ${r}[Symbol.for('slots')][0]\n      slotComponent = ${r}\n      inSlot = true\n    } else {\n      parent = ${r}[Symbol.for('children')][0]\n    }\n  `),n.forloop&&o.push("}"),i&&(n.forloop||o.push(`\n        if(inSlot === true) {\n          slotChildCounter = ${i.length}  + 1\n        }\n      `),b++,T.call(this,{children:i},!1,{...n})),n.forloop||o.push("\n      if (inSlot === true && slotChildCounter === 0) {\n        inSlot = false\n      }\n    ")},C=function(e,t){const n=e[":for"];delete e[":for"];const o=e.range||e[":range"]||"{}";delete e.range,delete e[":range"];const i=e.key,r=E(i,"scope."),s=!(e.$shallow&&"false"===e.$shallow.toLowerCase());delete e.$shallow,delete e.key;const a=/(.+)\s+in\s+(.+)/gi.exec(n),[l,u]=a[1].replace("(","").replace(")","").split(/\s*,\s*/),c=new RegExp(`(scope\\.(?!${l}\\.|${u}|key)(\\w+))`,"gi"),p={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};if(t&&p.renderCode.push(`parent = ${t}`),void 0!==u){const e=new RegExp(`\\$${u}(?!['\\w])`).exec(i);Array.isArray(e)&&p.renderCode.push(`console.warn(" Using '${u}' in the key, like key=${i},  is not recommended")`)}const d=b;p.renderCode.push(`\n    const created${d} = []\n\n    let from${d}\n    let to${d}\n\n    const forloop${d} = (collection = [], elms, created) => {\n      const rawCollection = getRaw(collection)\n      const keys = new Set()\n      let l = rawCollection.length\n\n      const range = ${E(o)} || {}\n      from${d} = range['from'] || 0\n      to${d} = 'to' in range ? range['to'] : rawCollection.length\n\n      while(l--) {\n        const ${l} = rawCollection[l]\n  `),void 0!==u&&p.renderCode.push(`\n        const ${u} = l\n    `),p.renderCode.push(`\n        if(l < to${d} && l >= from${d}) {\n          keys.add('' +  ${E(i,"")||"l"})\n        }\n      }\n  `);const h=p.renderCode.length;p.renderCode.push(`\n      created.length = 0\n      const length = rawCollection.length\n      const effects = []\n      for(let __index = 0; __index < length; __index++) {\n        if(__index < from${d} || __index >= to${d}) continue\n        const scope = Object.create(component)\n        parent = ${t}\n        scope['${l}'] = rawCollection[__index]\n  `),""!==u&&p.renderCode.push(`\n        scope['${u}'] = __index\n    `),p.renderCode.push(`\n        scope['key'] = '' + ${r||"__index"}\n  `),"ref"in e&&-1===e.ref.indexOf("$")&&(p.renderCode.push(`\n        scope['__ref'] = '${e.ref}' + __index\n    `),e.ref="$__ref"),p.renderCode.push("\n        created.push(scope.key)\n  "),"Element"===e[Symbol.for("componentType")]||"Slot"===e[Symbol.for("componentType")]||"Text"===e[Symbol.for("componentType")]?("Text"===e[Symbol.for("componentType")]&&(e.__textnode="true"),T.call(p,e,t,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):k.call(p,e,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const f=p.effectsCode.filter(e=>0===[...e.matchAll(c)].length),m=p.effectsCode.filter(e=>0!==[...e.matchAll(c)].length);!1===s&&p.renderCode.push(`\n      scope['${l}'] = null\n      scope['${l}'] = collection[__index]\n  `),f.forEach((e,t)=>{const n=e.indexOf(`scope.${t}`)>-1?`'${E(a[2],"")}'`:null;-1===e.indexOf("Symbol.for('props')")?p.renderCode.push(`\n        let eff${t} = () => {\n          ${e}\n        }\n        effect(eff${t}, ${n})\n        effects.push(eff${t})\n        component[Symbol.for('effects')].push(eff${t})\n      `):p.renderCode.push(`\n        ${e}\n      `)}),p.renderCode.push("\n    }\n    return effects\n  }");const g=[];g.push("\n      let i = created.length\n\n      while (i--) {\n        if (keys.has(created[i]) === false) {\n          const key = created[i]\n  ");const y=b;for(let b=d;b<=y;b++)g.push(`\n          elms[${b}][key] && elms[${b}][key].destroy()\n          delete elms[${b}][key]\n      `);g.push("\n      }\n    }\n  "),p.renderCode.splice(h,0,...g);let v=`${E(a[2],"")}`;v&&v.includes(".")&&(v=v.match(/[^.]+$/)[0]);const x=[...o.matchAll(/\$([^,} ]+)/g)].map(e=>`'${e[1]}'`);p.renderCode.push(`\n    let forEffects${d}\n    const eff${d} = () => {\n      component[Symbol.for('removeGlobalEffects')](forEffects${d})\n      forEffects${d} = null\n      forEffects${d} = forloop${d}(${I(a[2],":for")}, elms, created${d})\n    }\n\n    component[Symbol.for('effects')].push(eff${d})\n\n    effect(eff${d}, ['${v}', ${x.join(",")}] )\n  `),m.forEach((e,t)=>{const n=[...e.matchAll(c)];let o=n.length;const i=[];for(;o--;){const t=n[o],r=`component.${t[2]}`;-1===i.indexOf(r)&&i.push(r),t[2]!==l&&(e=e.substring(0,t.index)+r+e.substring(t.index+t[1].length))}p.renderCode.push(`\n      const eff${d}_${t} = () => {\n        void ${i.join(", ")}\n        for(let __index = 0; __index < ${E(a[2])}.length; __index++) {\n          if(__index < from${d} || __index >= to${d}) continue\n          const scope = {}\n          scope['${u}'] = __index\n          scope['${l}'] = ${E(a[2])}[__index]\n          scope['key'] = ${r||"__index"}\n    `),p.renderCode.push(`\n          ${e}\n        }\n      }\n      component[Symbol.for('effects')].push(eff${d}_${t})\n      effect(eff${d}_${t})\n    `)}),this.renderCode.push(p.renderCode.join("\n"))},A=function(e,t=!1,n={}){e.children&&e.children.forEach(e=>{b++,Object.keys(e).indexOf(":for")>-1?C.call(this,e,t):"Element"===e[Symbol.for("componentType")]||"Slot"===e[Symbol.for("componentType")]||"Text"===e[Symbol.for("componentType")]||"Layout"===e[Symbol.for("componentType")]?("Text"===e[Symbol.for("componentType")]&&(e.__textnode="true"),"Layout"===e[Symbol.for("componentType")]&&(e.__layout="true"),T.call(this,e,t,n)):k.call(this,e,t,n)})},E=(e,t="component.")=>{if(void 0===e)return e;const n=e.matchAll(/('.*?')+/gi),o=[];let i=0;for(const r of n)o.push(r[0]),e=e.replace(r[0],`[@@REPLACEMENT${i}@@]`),i++;return e=e.replace(/\$(\$(?=\$)|\$?)/g,(e,n)=>""===n?t:"$"===n?t+"$":void 0),o.forEach((t,n)=>{e=e.replace(`[@@REPLACEMENT${n}@@]`,t)}),e},I=(e="",t=!1,n="component.")=>{let o;if("content"===t)if(e.startsWith("$"))o=`${n}${e.replace("$","")}`;else{const t=e.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");o=`'${R(t,n)}'`}else if("color"===t||!1!==/[^0-9%\s.eE]/.test(e)||isNaN(parseFloat(e)))if("true"===e.toLowerCase())o=!0;else if("false"===e.toLowerCase())o=!1;else if(t.startsWith("@")&&e){const t=n.slice(0,-1);o=`${t}['${e.replace("$","")}'] && ${t}['${e.replace("$","")}'].bind(${t})`}else if(e.startsWith("$"))o=`${n}${e.replace("$","")}`;else{if(/\$\w+/gi.exec(e)){const t=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,i=e.match(t);if(o={},i)for(let e=0;e<i.length;e++){const t=i[e].split(/\s*:\s*/);t&&_(t[0],t[1],n,o)}return L(o)}o=`"${e}"`}else if(o=parseFloat(e),e.endsWith("%")){const e={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[t];e&&(o=`parent.node.${e} * (${o} / 100)`)}return o},M=e=>e.startsWith(":"),R=(e,t)=>{const n=[...e.matchAll(/\{\{\s*(\$\S+)\s*\}\}/g)];if(n.length)for(let[o,i]of n)e=e.replace(o,`${i.replace("$",`'+${t}`)}+'`);return e},_=(e,t,n,o)=>{t.startsWith("$")?o[e]=`${n}${t.replace("$","")}`:o[e]=t},L=e=>{const t=[];return Object.keys(e).forEach(n=>{t.push(`${n}: ${e[n]}`)}),` { ${t.join(", ")} }`},D={};let P=0;const O={},N=(e,t,n,o=[])=>{O[t]&&O[t][e]&&O[t][e].apply(n,o)};let U=null,B=null,j=!1;const F=new WeakMap,z=new Map,$=e=>{if(0!==z.size)for(const[t,n]of z){if(-1===e.indexOf(t))continue;const o=F.get(n);if(void 0!==o)for(const e of o.values())e.delete(t),z.delete(t)}},G=(e,t,n=!1)=>{if(null!==U){if(j)return;if(!0===Array.isArray(B)){if(!1===B.includes(t))return}else if(null!==B&&t!==B)return;let o=F.get(e);void 0===o&&(o=new Map,F.set(e,o));let i=o.get(t);void 0===i&&(i=new Set,o.set(t,i)),i.add(U),!0===n&&z.set(U,e)}},V=(e,t,n=!1)=>{if(!0===j)return;const o=F.get(e);if(void 0===o)return;const i=o.get(t);if(void 0!==i)for(let r of i)r(n)},H=(e,t=null)=>{U=e,B=t,U(),U=null,B=null},q=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;let n=e.length;for(;n--;){const o=e[n],i=t[n];if(Array.isArray(o)&&Array.isArray(i)){if(!1===q(o,i))return!1}else if("object"==typeof o&&null!==o&&"object"==typeof i&&null!==i){if(!1===q(Object.entries(o),Object.entries(i)))return!1}else if(o!==i)return!1}return!0},X=["push","pop","shift","unshift","splice","sort"],W=new WeakMap,K=e=>{const t=e&&e[s.raw];return t?K(t):e},Y=(e,t=null,n,o)=>{if("object"==typeof e&&!1===Array.isArray(e)&&Object.getPrototypeOf(e)!==Object.prototype)return e;const i=W.get(e);if(void 0!==i)return i;const r=new Proxy(e,{get:(i,r,a)=>r===s.raw?e:!0===Array.isArray(i)?"object"==typeof i[r]&&null!==i[r]?(!0===Array.isArray(i[r])&&G(i,r,o),Y(K(i[r]),i,r)):-1!==X.indexOf(r)?function(...e){j=!0;const o=i[r].apply(this,e);return j=!1,V(t,n),o}:"length"===r?e.length:Reflect.get(i,r,a):"object"==typeof i[r]&&null!==i[r]?(!0===Array.isArray(i[r])&&G(i,r,o),Y(K(i[r]),i,r)):(G(i,r,o),Reflect.get(i,r,a)),set(e,o,i,r){const s=K(e[o]),a=K(i);let l=!0,u=!1;return!0===Array.isArray(a)&&!0===Array.isArray(s)?u=q(s,a):s===a&&(u=!0),!1===u&&("object"==typeof i&&(!0===Array.isArray(i)?i=K(i).slice(0):null!==i&&null!==e[o]&&void 0!==e[o]&&!1===Array.isArray(e)&&Object.getPrototypeOf(i)===Object.prototype&&(i=Object.assign(r[o],i))),l=Reflect.set(e,o,i,r)),!0===l&&!1===u&&(!0===Array.isArray(e)&&o in e==!0&&V(t,n,!0),V(e,o,!0)),l}});return W.set(e,r),r},Q=(e,t)=>(Object.keys(e).forEach(n=>{let o=e[n];if(null!==e[n]&&"object"==typeof e[n]){if(Object.getPrototypeOf(e[n])===Object.prototype)return Q(e[n]);if(!0===Array.isArray(e[n]))for(let t=0;t<X.length-1;t++)e[n][X[t]]=function(o){Array.prototype[X[t]].call(this,o),V(e,n)}}Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>(G(e,n,t),o),set(t){o!==t&&(o=t,V(e,n))}})}),e),J="undefined"!=typeof Proxy,Z=(e,t="Proxy",n=!1)=>(!1===J&&(t="defineProperty"),"defineProperty"===t?Q(e,n):Y(e,void 0,void 0,n)),ee=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],te={previous:null,current:null,get state(){return this.current},set state(e){ee.indexOf(e)>-1&&(e!==this.current||"focus"===e)&&(p.debug(`Setting lifecycle state from ${this.current} to ${e} for ${this.component.componentId}`),this.previous=this.current,this.current=e,((e,t,n)=>{const o=s[e];O[t]&&O[t][o]&&O[t][o].apply(n)})(e,this.component[s.identifier],this.component),N(e,this.component[s.identifier],this.component))}},ne=function(e,t,n){let o=Promise.resolve();function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},oe={BASE_URL:"/legacy/chrome-63/",DEV:!1,LEGACY:!0,MODE:"production",PROD:!0,SSR:!1,VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",VITE_TMDB_KEY:"ABC123"};function ie(e,t){if(!0!==ce()&&!e)throw new Error(t||"Assertion failed")}function re(e,t,n){const o=Math.trunc(e>>>24),i=Math.trunc(e>>>16&255),r=Math.trunc(e>>>8&255),s=Math.trunc(255&e),a=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),u=Math.trunc(t>>>8&255),c=Math.trunc(255&t);return(Math.round(a*n+o*(1-n))<<24|Math.round(l*n+i*(1-n))<<16|Math.round(u*n+r*(1-n))<<8|Math.round(c*n+s*(1-n)))>>>0}function se(e,t){return(e>>>24<<24|(e>>>16&255)<<16|(e>>>8&255)<<8|Math.trunc((255&e)*t))>>>0}let ae=!0;function le(e,t,n=!1){const o=(255&e)/255*t,i=ae?o:1,r=Math.trunc((e>>>24)*i),s=Math.trunc((e>>>16&255)*i),a=Math.trunc((e>>>8&255)*i),l=Math.trunc(255*o);return n?(l<<24|a<<16|s<<8|r)>>>0:(r<<24|s<<16|a<<8|l)>>>0}function ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ce(){return oe&&!0}let pe=1;class de{constructor(){e(this,"eventListeners",{})}on(e,t){let n=this.eventListeners[e];n||(n=[]),n.push(t),this.eventListeners[e]=n}off(e,t){const n=this.eventListeners[e];if(!n)return;if(!t)return void delete this.eventListeners[e];const o=n.indexOf(t);o>=0&&n.splice(o,1)}once(e,t){const n=(o,i)=>{this.off(e,n),t(o,i)};this.on(e,n)}emit(e,t){const n=this.eventListeners[e];n&&[...n].forEach(e=>{e(this,t)})}removeAllListeners(){this.eventListeners={}}}var he;!function(e){e[e.generic=0]="generic",e[e.color=1]="color",e[e.image=2]="image",e[e.noise=3]="noise",e[e.renderToTexture=4]="renderToTexture",e[e.subTexture=5]="subTexture"}(he||(he={}));class fe extends de{constructor(t){super(),e(this,"txManager",void 0),e(this,"_dimensions",null),e(this,"_error",null),e(this,"state","initial"),e(this,"renderableOwners",new Set),e(this,"renderable",!1),e(this,"type",he.generic),e(this,"preventCleanup",!1),e(this,"ctxTexture",void 0),e(this,"textureData",null),this.txManager=t}get dimensions(){return this._dimensions}get error(){return this._error}setRenderableOwner(e,t){const n=this.renderableOwners.size;if(!0===t){!1===this.renderableOwners.has(e)&&this.renderableOwners.add(e);const t=this.renderableOwners.size;var o;if(t>n&&1===t)this.renderable=!0,null===(o=this.onChangeIsRenderable)||void 0===o||o.call(this,!0),this.load()}else{this.renderableOwners.delete(e);const t=this.renderableOwners.size;var i;if(t<n&&0===t)this.renderable=!1,null===(i=this.onChangeIsRenderable)||void 0===i||i.call(this,!1),this.txManager.orphanTexture(this)}}load(){this.txManager.loadTexture(this)}loadCtxTexture(){return void 0===this.ctxTexture&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var e;null===(e=this.ctxTexture)||void 0===e||e.free()}destroy(){this.removeAllListeners(),this.free(),this.freeTextureData(),this.renderableOwners.clear()}freeTextureData(){this.textureData=null}setState(e,t){if(this.state===e)return;let n=null;"loaded"===e?(void 0!==t&&"width"in t==!0&&"height"in t==!0&&void 0!==t.width&&void 0!==t.height&&(this._dimensions=t),n=this._dimensions):"failed"===e&&(this._error=t,n=this._error),this.state=e,this.emit(e,n)}async getTextureData(){return null===this.textureData&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const me=/^(data|ftps?|https?):/,ge=e=>[(e>>>24)/255,(e>>>16&255)/255,(e>>>8&255)/255,(255&e)/255],ye=e=>[e>>>24,e>>>16&255,e>>>8&255,255&e];function ve(e){return(255&e)/255}function be(e){return`rgba(${Math.floor(255*e[0])},${Math.floor(255*e[1])},${Math.floor(255*e[2])},${Math.floor(255*e[3]).toFixed(4)})`}function xe(e,t,n,o,i){return i?(i.x1=e,i.y1=t,i.x2=n,i.y2=o,i):{x1:e,y1:t,x2:n,y2:o}}function we(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}function Se(e,t,n){const o=Math.max(e.x,t.x),i=Math.max(e.y,t.y),r=Math.min(e.x+e.width,t.x+t.width)-o,s=Math.min(e.y+e.height,t.y+t.height)-i;return r>0&&s>0?n?(n.x=o,n.y=i,n.width=r,n.height=s,n):{x:o,y:i,width:r,height:s}:n?(n.x=0,n.y=0,n.width=0,n.height=0,n):{x:0,y:0,width:0,height:0}}function Te(e,t){return t?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):{x:e.x,y:e.y,width:e.width,height:e.height}}function ke(e,t){return e.x1<=t.x2&&e.y1<=t.y2&&e.x2>=t.x1&&e.y2>=t.y1}function Ce(e,t){return xe(e.x1-t[3],e.y1-t[0],e.x2+t[1],e.y2+t[2])}function Ae(e){return!0===e.startsWith("data:")}class Ee{constructor(){e(this,"ta",void 0),e(this,"tb",void 0),e(this,"tx",void 0),e(this,"tc",void 0),e(this,"td",void 0),e(this,"ty",void 0),e(this,"_floatArr",null),e(this,"mutation",void 0),this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return Ie}static multiply(e,t,n){const o=e.ta*t.ta+e.tb*t.tc,i=e.ta*t.tb+e.tb*t.td,r=e.ta*t.tx+e.tb*t.ty+e.tx,s=e.tc*t.ta+e.td*t.tc,a=e.tc*t.tb+e.td*t.td,l=e.tc*t.tx+e.td*t.ty+e.ty;return n||(n=new Ee),n.ta=o,n.tb=i,n.tx=r,n.tc=s,n.td=a,n.ty=l,n.mutation=!0,n}static identity(e){return e||(e=new Ee),e.ta=1,e.tb=0,e.tx=0,e.tc=0,e.td=1,e.ty=0,e.mutation=!0,e}static translate(e,t,n){return n||(n=new Ee),n.ta=1,n.tb=0,n.tx=e,n.tc=0,n.td=1,n.ty=t,n.mutation=!0,n}static scale(e,t,n){return n||(n=new Ee),n.ta=e,n.tb=0,n.tx=0,n.tc=0,n.td=t,n.ty=0,n.mutation=!0,n}static rotate(e,t){const n=Math.cos(e),o=Math.sin(e);return t||(t=new Ee),t.ta=n,t.tb=-o,t.tx=0,t.tc=o,t.td=n,t.ty=0,t.mutation=!0,t}static copy(e,t){return t||(t=new Ee),t.ta=e.ta,t.tc=e.tc,t.tb=e.tb,t.td=e.td,t.tx=e.tx,t.ty=e.ty,t.mutation=!0,t}translate(e,t){return this.tx=this.ta*e+this.tb*t+this.tx,this.ty=this.tc*e+this.td*t+this.ty,this.mutation=!0,this}scale(e,t){return this.ta=this.ta*e,this.tb=this.tb*t,this.tc=this.tc*e,this.td=this.td*t,this.mutation=!0,this}rotate(e){if(0===e||!(e%Math.PI*2))return this;const t=Math.cos(e),n=Math.sin(e),o=this.ta*t+this.tb*n,i=this.tb*t-this.ta*n,r=this.tc*t+this.td*n,s=this.td*t-this.tc*n;return this.ta=o,this.tb=i,this.tc=r,this.td=s,this.mutation=!0,this}multiply(e){return Ee.multiply(this,e,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const Ie=new Ee;class Me{constructor(t){e(this,"data",void 0),this.data=new Float32Array(8),t&&(this.data[0]=t[0],this.data[2]=t[2],this.data[4]=t[4],this.data[6]=t[6],this.data[1]=t[1],this.data[3]=t[3],this.data[5]=t[5],this.data[7]=t[7])}static translate(e,t,n,o,i,r,s,a,l){return l||(l=new Me),l.data[0]=e,l.data[2]=n,l.data[4]=i,l.data[6]=s,l.data[1]=t,l.data[3]=o,l.data[5]=r,l.data[7]=a,l}get x1(){return this.data[0]}get x2(){return this.data[2]}get x3(){return this.data[4]}get x4(){return this.data[6]}get y1(){return this.data[1]}get y2(){return this.data[3]}get y3(){return this.data[5]}get y4(){return this.data[7]}}const Re=(e,t,n,o)=>{const i=3*e,r=3*(n-e)-i,s=1-i-r,a=3*t,l=3*(o-t)-a,u=1-a-l;return function(e){if(e>=1)return 1;if(e<=0)return 0;let t,n,o,c=.5;for(let h=0;h<20;h++){if(t=c*(c*(c*s+r)+i),o=e-t,o>-1e-8&&o<1e-8)return c*(c*(c*u+l)+a);if(n=c*(c*(3*s)+2*r)+i,n>1e-10&&n<1e-10)break;c+=o/n}let p=0,d=1;for(let h=0;h<20;h++){if(c=.5*(p+d),t=c*(c*(c*s+r)+i),o=e-t,o>-1e-8&&o<1e-8)return c*(c*(c*u+l)+a);o<0?d=c:p=c}}},_e={},Le={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},De=e=>e,Pe=e=>{if("linear"===e)return De;if(void 0!==_e[e])return _e[e]||De;if("step-start"===e)return()=>1;if("step-end"===e)return e=>1===e?1:0;const t=Le[e];if(void 0!==t){const[n,o,i,r]=t,s=Re(n,o,i,r);return _e[e]=s,s}return e.startsWith("cubic-bezier")?(e=>{const t=e.match(/-?\d*\.?\d+/g);if(t){const[n,o,i,r]=t,s=parseFloat(n||"0.42"),a=parseFloat(o||"0"),l=parseFloat(i||"1"),u=parseFloat(r||"1"),c=Re(s,a,l,u);return _e[e]=c,c}return console.warn("Unknown cubic-bezier timing: "+e),De})(e):(console.warn("Unknown timing function: "+e),De)};function Oe(e){return(e/1024/1024).toFixed(2)}class Ne extends de{constructor(t,n,o){var i,r,s,a,l,u;super(),e(this,"node",void 0),e(this,"props",void 0),e(this,"settings",void 0),e(this,"progress",0),e(this,"delayFor",0),e(this,"delay",0),e(this,"timingFunction",void 0),e(this,"propValuesMap",{}),e(this,"dynPropValuesMap",void 0),this.node=t,this.props=n;for(const e in n)if("shaderProps"!==e)void 0===this.propValuesMap.props&&(this.propValuesMap.props={}),this.propValuesMap.props[e]={start:t[e]||0,target:n[e]};else if("DynamicShader"!==t.shader.type){this.propValuesMap.shaderProps={};for(const e in n.shaderProps)this.propValuesMap.shaderProps[e]={start:t.shader.props[e],target:n.shaderProps[e]}}else{const e=Object.keys(n.shaderProps),o=e.length;this.dynPropValuesMap={};for(let i=0;i<o;i++){const o=e[i],r=n.shaderProps[o];this.dynPropValuesMap[o]={};const s=Object.entries(r),a=s.length;for(let e=0;e<a;e++){const[n,i]=s[e];this.dynPropValuesMap[o][n]={start:t.shader.props[o][n],target:i}}}}const c=o.easing||"linear",p=null!==(i=o.delay)&&void 0!==i?i:0;this.settings={duration:null!==(r=o.duration)&&void 0!==r?r:0,delay:p,easing:c,loop:null!==(s=o.loop)&&void 0!==s&&s,repeat:null!==(a=o.repeat)&&void 0!==a?a:0,repeatDelay:null!==(l=o.repeatDelay)&&void 0!==l?l:0,stopMethod:null!==(u=o.stopMethod)&&void 0!==u&&u},this.timingFunction=Pe(c),this.delayFor=p,this.delay=p}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(e,t){const n=Object.entries(t),o=n.length;for(let i=0;i<o;i++){const[t,o]=n[i];e[t]=o.start}}restore(){if(this.reset(),void 0!==this.propValuesMap.props&&this.restoreValues(this.node,this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){const e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(let n=0;n<t;n++){const t=e[n];this.restoreValues(this.node.shader.props[t],this.dynPropValuesMap[t])}}}reverseValues(e){const t=Object.entries(e),n=t.length;for(let o=0;o<n;o++){const[n,i]=t[o];e[n]={start:i.target,target:i.start}}}reverse(){if(this.progress=0,void 0!==this.propValuesMap.props&&this.reverseValues(this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.reverseValues(this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){const e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(let n=0;n<t;n++){const t=e[n];this.reverseValues(this.dynPropValuesMap[t])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,n){return(this.timingFunction(e)||e)*(n-t)+t}updateValue(e,t,n,o){if(1===this.progress)return t;if(0===this.progress)return n;const i=t;if(-1!==e.indexOf("color")){if(n===i)return n;if(o){return re(n,i,this.timingFunction(this.progress)||this.progress)}return re(n,i,this.progress)}return o?this.applyEasing(this.progress,n,i):n+(i-n)*this.progress}updateValues(e,t,n){const o=Object.entries(t),i=o.length;for(let r=0;r<i;r++){const[t,i]=o[r];e[t]=this.updateValue(t,i.target,i.start,n)}}update(e){const{duration:t,loop:n,easing:o,stopMethod:i}=this.settings,{delayFor:r}=this;if(this.node.destroyed)this.emit("destroyed",{});else if(0!==t||0!==r){if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(0!==t)if(0===this.progress&&this.emit("animating",{}),this.progress+=e/t,this.progress>1&&(this.progress=n?0:1,this.delayFor=this.delay,i))this.emit("finished",{});else{if(void 0!==this.propValuesMap.props&&this.updateValues(this.node,this.propValuesMap.props,o),void 0!==this.propValuesMap.shaderProps&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,o),void 0!==this.dynPropValuesMap){const e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(let n=0;n<t;n++){const t=e[n];this.updateValues(this.node.shader.props[t],this.dynPropValuesMap[t],o)}}this.progress<1&&this.emit("tick",{progress:this.progress}),1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}else this.emit("finished",{})}}class Ue extends de{constructor(t,n){super(),e(this,"manager",void 0),e(this,"animation",void 0),e(this,"stoppedPromise",void 0),e(this,"stoppedResolve",null),e(this,"state",void 0),this.manager=t,this.animation=n,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this),this.onDestroy=this.onDestroy.bind(this)}start(){return"running"!==this.state&&"scheduled"!==this.state&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.animation.on("destroyed",this.onDestroy),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick),this.animation.off("destroy",this.onDestroy)}makeStoppedPromise(){null===this.stoppedResolve&&(this.stoppedPromise=new Promise(e=>{this.stoppedResolve=e}))}onDestroy(){this.unregisterAnimation(),this.state="stopped"}onFinished(){ie(this.stoppedResolve);const{loop:e,stopMethod:t}=this.animation.settings;if("reverse"===t)return this.animation.once("finished",this.onFinished),void this.animation.reverse();e||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(e,t){this.emit("tick",t)}}var Be;!function(e){e[e.Init=0]="Init",e[e.OutOfBounds=2]="OutOfBounds",e[e.InBounds=4]="InBounds",e[e.InViewport=8]="InViewport"}(Be||(Be={}));const je=new Map;var Fe;je.set(Be.Init,"init"),je.set(Be.OutOfBounds,"outOfBounds"),je.set(Be.InBounds,"inBounds"),je.set(Be.InViewport,"inViewport"),function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.RenderState=512]="RenderState",e[e.IsRenderable=1024]="IsRenderable",e[e.RenderTexture=2048]="RenderTexture",e[e.ParentRenderTexture=4096]="ParentRenderTexture",e[e.RenderBounds=8192]="RenderBounds",e[e.None=0]="None",e[e.All=14335]="All"}(Fe||(Fe={}));class ze extends de{constructor(t,n){super(),e(this,"stage",void 0),e(this,"children",[]),e(this,"_id",pe++),e(this,"props",void 0),e(this,"updateType",Fe.All),e(this,"childUpdateType",Fe.None),e(this,"globalTransform",void 0),e(this,"scaleRotateTransform",void 0),e(this,"localTransform",void 0),e(this,"sceneGlobalTransform",void 0),e(this,"renderCoords",void 0),e(this,"sceneRenderCoords",void 0),e(this,"renderBound",void 0),e(this,"strictBound",void 0),e(this,"preloadBound",void 0),e(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),e(this,"isRenderable",!1),e(this,"renderState",Be.Init),e(this,"worldAlpha",1),e(this,"premultipliedColorTl",0),e(this,"premultipliedColorTr",0),e(this,"premultipliedColorBl",0),e(this,"premultipliedColorBr",0),e(this,"calcZIndex",0),e(this,"hasRTTupdates",!1),e(this,"parentHasRenderTexture",!1),e(this,"rttParent",null),e(this,"destroyed",!1),e(this,"onTextureLoaded",(e,t)=>{var n;this.autosizeNode(t),this.setUpdateType(Fe.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),t.width>1&&t.height>1&&this.emit("loaded",{type:"texture",dimensions:t}),"contain"===(null===(n=this.props.textureOptions)||void 0===n||null===(n=n.resizeMode)||void 0===n?void 0:n.type)&&this.setUpdateType(Fe.Local)}),e(this,"onTextureFailed",(e,t)=>{this.setUpdateType(Fe.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:t})}),e(this,"onTextureFreed",()=>{this.setUpdateType(Fe.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})}),this.stage=t,this.props={...n,parent:null,texture:null,src:null,rtt:!1},this.parent=n.parent,this.texture=n.texture,this.src=n.src,this.rtt=n.rtt,n.boundsMargin&&(this.boundsMargin=Array.isArray(n.boundsMargin)?n.boundsMargin:[n.boundsMargin,n.boundsMargin,n.boundsMargin,n.boundsMargin]),this.setUpdateType(Fe.ScaleRotate|Fe.Local|Fe.RenderBounds|Fe.RenderState),!1===ce()&&!0===n.preventCleanup&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&"loaded"!==this.stage.defaultTexture.state&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(Fe.IsRenderable)})}loadTexture(){const{texture:e}=this.props;ie(e),queueMicrotask(()=>{var t,n;!0===this.textureOptions.preload&&this.stage.txManager.loadTexture(e),e.preventCleanup=null!==(t=null===(n=this.props.textureOptions)||void 0===n?void 0:n.preventCleanup)&&void 0!==t&&t,e.on("loaded",this.onTextureLoaded),e.on("failed",this.onTextureFailed),e.on("freed",this.onTextureFreed),this.parentHasRenderTexture?this.notifyParentRTTOfUpdate():"loaded"===e.state?(ie(e.dimensions),this.onTextureLoaded(e,e.dimensions)):"failed"===e.state?(ie(e.error),this.onTextureFailed(e,e.error)):"freed"===e.state&&this.onTextureFreed(e)})}unloadTexture(){null!==this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}setUpdateType(e){this.updateType|=e;const t=this.props.parent;t&&0===(t.updateType&Fe.Children)&&t.setUpdateType(Fe.Children)}sortChildren(){this.children.sort((e,t)=>e.calcZIndex-t.calcZIndex)}updateScaleRotateTransform(){const{rotation:e,scaleX:t,scaleY:n}=this.props;this.scaleRotateTransform=0!==e||1!==t||1!==n?Ee.rotate(e,this.scaleRotateTransform).scale(t,n):void 0}updateLocalTransform(){var e;const{x:t,y:n,width:o,height:i}=this.props,r=this.props.mountX*o,s=this.props.mountY*i;if(this.scaleRotateTransform){const e=this.props.pivotX*o,a=this.props.pivotY*i;this.localTransform=Ee.translate(t-r+e,n-s+a,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-a)}else this.localTransform=Ee.translate(t-r,n-s,this.localTransform);const a=this.props.texture;if(a&&a.dimensions&&"contain"===(null===(e=this.props.textureOptions)||void 0===e||null===(e=e.resizeMode)||void 0===e?void 0:e.type)){let e=1,t=1,n=0,r=0;const{width:s,height:l}=a.dimensions;if(s/l>o/i){const e=l*(o/s);r=(i-e)/2,t=e/i}else{const t=s*(i/l);n=(o-t)/2,e=t/o}this.localTransform.translate(n,r).scale(e,t)}this.setUpdateType(Fe.Global)}update(e,t){this.updateType&Fe.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Fe.Local)),this.updateType&Fe.Local&&(this.updateLocalTransform(),this.setUpdateType(Fe.Global));const n=this.props.parent;let o=null;if(this.updateType&Fe.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&Fe.Global&&(ie(this.localTransform),!0===this.parentHasRenderTexture&&!0===(null==n?void 0:n.rtt)?(this.globalTransform=Ee.identity(),this.sceneGlobalTransform=Ee.copy((null==n?void 0:n.globalTransform)||Ee.identity()).multiply(this.localTransform)):!0===this.parentHasRenderTexture&&!1===(null==n?void 0:n.rtt)?(this.sceneGlobalTransform=Ee.copy((null==n?void 0:n.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=Ee.copy((null==n?void 0:n.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=Ee.copy((null==n?void 0:n.globalTransform)||this.localTransform,this.globalTransform),null!==n&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Fe.RenderState|Fe.Children),this.childUpdateType|=Fe.Global,!0===this.clipping&&(this.setUpdateType(Fe.Clipping|Fe.RenderBounds),this.childUpdateType|=Fe.RenderBounds)),this.updateType&Fe.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(Fe.RenderState),this.setUpdateType(Fe.Children),this.childUpdateType|=Fe.RenderBounds),this.updateType&Fe.RenderState&&(o=this.checkRenderBounds(),this.setUpdateType(Fe.IsRenderable),o!==Be.OutOfBounds&&this.updateRenderState(o)),this.updateType&Fe.WorldAlpha&&(this.worldAlpha=n?n.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(Fe.Children|Fe.PremultipliedColors|Fe.IsRenderable),this.childUpdateType|=Fe.WorldAlpha),this.updateType&Fe.IsRenderable&&this.updateIsRenderable(),this.updateType&Fe.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(Fe.Children),this.childUpdateType|=Fe.Clipping,this.childUpdateType|=Fe.RenderBounds),this.updateType&Fe.PremultipliedColors&&(this.premultipliedColorTl=le(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=le(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=le(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=le(this.props.colorBr,this.worldAlpha,!0))),null!==n&&this.updateType&Fe.CalculatedZIndex&&(this.calculateZIndex(),n.setUpdateType(Fe.ZIndexSortedChildren)),!0!==this.props.strictBounds||this.renderState!==Be.OutOfBounds){if(this.updateType&Fe.Children&&this.children.length>0)for(let t=0,n=this.children.length;t<n;t++){const n=this.children[t];if(n.setUpdateType(this.childUpdateType),0===n.updateType)continue;let o=this.clippingRect;!0===this.rtt&&(o={x:0,y:0,width:0,height:0,valid:!1}),n.update(e,o)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&Fe.ZIndexSortedChildren&&this.sortChildren(),o===Be.OutOfBounds&&(this.updateRenderState(o),this.updateIsRenderable(),!0===this.rtt&&o===Be.OutOfBounds&&this.notifyChildrenRTTOfUpdate(o)),this.updateType=0,this.childUpdateType=0}else this.updateType&=~Fe.RenderBounds}findParentRTTNode(){let e=this.parent;for(;e&&!e.rtt;)e=e.parent;return e}getRTTParentRenderState(){const e=this.rttParent||this.findParentRTTNode();return e?e.renderState:null}notifyChildrenRTTOfUpdate(e){for(const t of this.children)t.updateRenderState(e),t.updateIsRenderable(),t.notifyChildrenRTTOfUpdate(e)}notifyParentRTTOfUpdate(){if(null===this.parent)return;const e=this.rttParent||this.findParentRTTNode();e&&(e.hasRTTupdates=!0,e.setUpdateType(Fe.RenderTexture),!0===e.parentHasRenderTexture&&e.notifyParentRTTOfUpdate())}checkRenderBounds(){return ie(this.renderBound),ie(this.strictBound),ie(this.preloadBound),ke(this.renderBound,this.strictBound)?Be.InViewport:ke(this.renderBound,this.preloadBound)?Be.InBounds:(e=this.renderBound,t=this.strictBound,e.x1<t.x1&&e.x2>t.x2&&e.y1<t.y1&&e.y2>t.y2?Be.InViewport:null===this.parent||0!==this.props.width&&0!==this.props.height?Be.OutOfBounds:this.parent.renderState);var e,t}updateBoundingRect(){const e=this.sceneGlobalTransform||this.globalTransform,t=this.sceneRenderCoords||this.renderCoords;ie(e),ie(t);const{tb:n,tc:o}=e,{x1:i,y1:r,x3:s,y3:a}=t;if(0===n||0===o)this.renderBound=xe(i,r,s,a,this.renderBound);else{const{x2:e,x4:n,y2:o,y4:l}=t;this.renderBound=xe(Math.min(i,e,s,n),Math.min(r,o,a,l),Math.max(i,e,s,n),Math.max(r,o,a,l),this.renderBound)}}createRenderBounds(){if(ie(this.stage),null!==this.parent&&void 0!==this.parent.strictBound){const e=this.parent.strictBound;this.strictBound=xe(e.x1,e.y1,e.x2,e.y2),this.preloadBound=Ce(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(!1===this.props.clipping)return;if(void 0===this.renderBound)return;if(!1===ke(this.renderBound,this.strictBound))return;const{x:e,y:t,width:n,height:o}=this.props,{tx:i,ty:r}=this.sceneGlobalTransform||this.globalTransform||{},s=null!=i?i:e,a=null!=r?r:t;this.strictBound=xe(s,a,s+n,a+o,this.strictBound),this.preloadBound=Ce(this.strictBound,this.boundsMargin)}updateRenderState(e){if(e===this.renderState)return;const t=this.renderState;this.renderState=e;const n=je.get(e);ie(n),this.emit(n,{previous:t,current:e})}updateIsRenderable(){let e=!1,t=!1;if(!1===this.checkBasicRenderability())return this.updateTextureOwnership(!1),void this.setRenderable(!1);null!==this.texture?(t=!0,e="loaded"===this.texture.state):!this.hasShader()&&!0!==this.hasColorProperties()||!0!==this.hasDimensions()||this.stage.defaultTexture&&"loaded"===this.stage.defaultTexture.state&&(e=!0),this.updateTextureOwnership(t),this.setRenderable(e)}checkBasicRenderability(){return 0!==this.worldAlpha&&!0!==this.isOutOfBounds()}setRenderable(e){this.isRenderable=e}updateTextureOwnership(e){var t;null===(t=this.texture)||void 0===t||t.setRenderableOwner(this,e)}isOutOfBounds(){return this.renderState<=Be.OutOfBounds}hasDimensions(){return 0!==this.props.width&&0!==this.props.height}hasColorProperties(){return 0!==this.props.color||0!==this.props.colorTop||0!==this.props.colorBottom||0!==this.props.colorLeft||0!==this.props.colorRight||0!==this.props.colorTl||0!==this.props.colorTr||0!==this.props.colorBl||0!==this.props.colorBr}hasShader(){return null!==this.props.shader}calculateRenderCoords(){const{width:e,height:t}=this,{tx:n,ty:o,ta:i,tb:r,tc:s,td:a}=this.globalTransform;if(0===r&&0===s){const r=n,s=n+e*i,l=o,u=o+t*a;this.renderCoords=Me.translate(r,l,s,l,s,u,r,u,this.renderCoords)}else this.renderCoords=Me.translate(n,o,n+e*i,o+e*s,n+e*i+t*r,o+e*s+t*a,n+t*r,o+t*a,this.renderCoords);if(void 0===this.sceneGlobalTransform)return;const{tx:l,ty:u,ta:c,tb:p,tc:d,td:h}=this.sceneGlobalTransform;if(0===p&&0===d){const n=l,o=l+e*c,i=u,r=u+t*h;this.sceneRenderCoords=Me.translate(n,i,o,i,o,r,n,r,this.sceneRenderCoords)}else this.sceneRenderCoords=Me.translate(l,u,l+e*c,u+e*d,l+e*c+t*p,u+e*d+t*h,l+t*p,u+t*h,this.sceneRenderCoords)}calculateClippingRect(e){ie(this.globalTransform);const{clippingRect:t,props:n,globalTransform:o}=this,{clipping:i}=n,r=0!==o.tb||0!==o.tc;!0===i&&!1===r?(t.x=o.tx,t.y=o.ty,t.width=this.width*o.ta,t.height=this.height*o.td,t.valid=!0):t.valid=!1,!0===e.valid&&!0===t.valid?Se(e,t,t):!0===e.valid&&(Te(e,t),t.valid=!0)}calculateZIndex(){var e,t;const n=this.props,o=n.zIndex||0,i=(null===(e=n.parent)||void 0===e?void 0:e.zIndex)||0;let r=o;null!==(t=n.parent)&&void 0!==t&&t.zIndexLocked&&(r=o<i?o:i),this.calcZIndex=r}destroy(){if(!0!==this.destroyed){for(this.destroyed=!0,this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;){var e;null===(e=this.children[0])||void 0===e||e.destroy()}this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}}renderQuads(e){if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}ie(this.globalTransform),ie(this.renderCoords),e.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this._id}get data(){return this.props.data}set data(e){this.props.data=e}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(Fe.Local))}get absX(){var e,t;return this.props.x+-this.props.width*this.props.mountX+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}get absY(){var e,t;return this.props.y+-this.props.height*this.props.mountY+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(Fe.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(Fe.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Fe.RenderTexture)))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(Fe.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Fe.RenderTexture)))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(Fe.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(Fe.ScaleRotate))}get mount(){return this.props.mount}set mount(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(Fe.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(Fe.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(Fe.Local))}get pivot(){return this.props.pivot}set pivot(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(Fe.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(Fe.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(Fe.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(Fe.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(Fe.PremultipliedColors|Fe.WorldAlpha|Fe.Children|Fe.IsRenderable),this.childUpdateType|=Fe.WorldAlpha}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get boundsMargin(){var e,t,n;return null!==(e=null!==(t=this.props.boundsMargin)&&void 0!==t?t:null===(n=this.parent)||void 0===n?void 0:n.boundsMargin)&&void 0!==e?e:this.stage.boundsMargin}set boundsMargin(e){if(e!==this.props.boundsMargin){if(null===e)this.props.boundsMargin=e;else{const t=Array.isArray(e)?e:[e,e,e,e];this.props.boundsMargin=t}this.setUpdateType(Fe.RenderBounds)}}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(Fe.Clipping|Fe.RenderBounds|Fe.Children),this.childUpdateType|=Fe.Global|Fe.Clipping}get color(){return this.props.color}set color(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(Fe.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(Fe.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(Fe.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(Fe.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(Fe.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(Fe.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(Fe.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(Fe.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(Fe.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(Fe.CalculatedZIndex|Fe.Children);for(let t=0,n=this.children.length;t<n;t++)this.children[t].setUpdateType(Fe.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(Fe.CalculatedZIndex|Fe.Children);for(let t=0,n=this.children.length;t<n;t++)this.children[t].setUpdateType(Fe.CalculatedZIndex)}get parent(){return this.props.parent}set parent(e){const t=this.props.parent;if(t!==e){if(this.props.parent=e,t){const e=t.children.indexOf(this);ie(-1!==e,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(e,1),t.setUpdateType(Fe.Children|Fe.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(Fe.All),e.setUpdateType(Fe.Children|Fe.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.applyRTTInheritance(e)),this.updateScaleRotateTransform(),this.setUpdateType(Fe.RenderBounds|Fe.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(e){!1===ce()&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=e}get rtt(){return this.props.rtt}set rtt(e){this.props.rtt!==e&&(this.props.rtt=e,!0===e?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(Fe.RenderTexture),!0===this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}cleanupRenderTexture(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(e=null){const t=e||this;for(const n of t.children)n.setUpdateType(Fe.All),n.parentHasRenderTexture=!0,n.markChildrenWithRTT()}applyRTTInheritance(e){e.rtt&&e.setUpdateType(Fe.RenderTexture),this.markChildrenWithRTT(e)}clearRTTInheritance(){if(!this.rtt)for(const e of this.children)e.parentHasRenderTexture=!1,e.rttParent=null,e.setUpdateType(Fe.All),e.clearRTTInheritance()}get shader(){return this.props.shader}set shader(e){this.props.shader!==e&&(this.props.shader=e,this.setUpdateType(Fe.IsRenderable))}get src(){return this.props.src}set src(e){this.props.src!==e&&(this.props.src=e,this.texture=e?this.stage.txManager.createTexture("ImageTexture",{src:e,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight}):null)}set imageType(e){this.props.imageType!==e&&(this.props.imageType=e)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(e){this.props.srcHeight=e}get srcWidth(){return this.props.srcWidth}set srcWidth(e){this.props.srcWidth=e}get srcX(){return this.props.srcX}set srcX(e){this.props.srcX=e}get srcY(){return this.props.srcY}set srcY(e){this.props.srcY=e}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let e=this.parent;for(;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}set texture(e){if(this.props.texture===e)return;const t=this.props.texture;t&&(t.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,null!==e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Fe.IsRenderable)}set textureOptions(e){this.props.textureOptions=e}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(e){e!==this.props.strictBounds&&(this.props.strictBounds=e,this.setUpdateType(Fe.RenderBounds|Fe.Children),this.childUpdateType|=Fe.RenderBounds|Fe.Children)}animate(e,t){const n=new Ne(this,e,t);return new Ue(this.stage.animationManager,n)}flush(){}}const $e=()=>performance?performance.now():Date.now();class Ge{constructor(){e(this,"activeAnimations",new Set)}registerAnimation(e){this.activeAnimations.add(e)}unregisterAnimation(e){this.activeAnimations.delete(e)}update(e){this.activeAnimations.forEach(t=>{t.update(e)})}}function Ve(){self.onmessage=e=>{var t=e.data.src,n=e.data.id,o=e.data.premultiplyAlpha;e.data.sx,e.data.sy,e.data.sw,e.data.sh,function(e,t){return new Promise(function(n,o){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){if(200!==i.status&&0!==i.status)return o(new Error("Failed to load image: "+i.statusText));var e=i.response;void 0!==t||e.type.indexOf("image/png"),createImageBitmap(e).then(function(e){n({data:e,premultiplyAlpha:t})}).catch(function(e){o(e)})},i.onerror=function(){o(new Error("Network error occurred while trying to fetch the image."))},i.send()})}(t,o).then(function(e){self.postMessage({id:n,src:t,data:e},[e.data])}).catch(function(e){self.postMessage({id:n,src:t,error:e.message})})}}class He{constructor(t,n){e(this,"imageWorkersEnabled",!0),e(this,"messageManager",{}),e(this,"workers",[]),e(this,"workerIndex",0),e(this,"nextId",0),this.workers=this.createWorkers(t,n),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(e){const{id:t,data:n,error:o}=e.data,i=this.messageManager[t];if(i){const[e,r]=i;delete this.messageManager[t],o?r(new Error(o)):e(n)}}createWorkers(e=1,t){let n=`(${Ve.toString()})()`;!0===t.options&&(n=n.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),!0===t.full&&(n=n.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;"),n=n.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),n=n.replace('"use strict";',"");const o=new Blob([n],{type:"application/javascript"}),i=(self.URL?URL:webkitURL).createObjectURL(o),r=[];for(let s=0;s<e;s++)r.push(new Worker(i));return r}getNextWorker(){const e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}getImage(e,t,n,o,i,r){return new Promise((s,a)=>{try{if(this.workers){const l=this.nextId++;this.messageManager[l]=[s,a];const u=this.getNextWorker();u&&u.postMessage({id:l,src:e,premultiplyAlpha:t,sx:n,sy:o,sw:i,sh:r})}}catch(l){a(l)}})}}class qe extends fe{constructor(t,n){super(t),e(this,"type",he.color),e(this,"props",void 0),this.props=qe.resolveDefaults(n||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureSource(){const e=new Uint8Array(4);return 4294967295===this.color?(e[0]=255,e[1]=255,e[2]=255,e[3]=255):(e[0]=this.color>>16&255,e[1]=this.color>>8&255,e[2]=255&this.color,e[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:e,premultiplyAlpha:!0}}static makeCacheKey(e){return`ColorTexture,${qe.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}}e(qe,"z$__type__Props",void 0);const Xe=async e=>{const t=await fetch(e),n=await t.arrayBuffer();return-1!==e.indexOf(".ktx")?We(n):Ke(n)},We=async e=>{const t=new DataView(e),n=16909060===t.getUint32(12),o=[],i={glInternalFormat:t.getUint32(28,n),pixelWidth:t.getUint32(36,n),pixelHeight:t.getUint32(40,n),numberOfMipmapLevels:t.getUint32(56,n),bytesOfKeyValueData:t.getUint32(60,n)};let r=64;r+=i.bytesOfKeyValueData;for(let s=0;s<i.numberOfMipmapLevels;s++){const e=t.getUint32(r);r+=4,o.push(t.buffer.slice(r,e)),r+=e}return{data:{glInternalFormat:i.glInternalFormat,mipmaps:o,width:i.pixelWidth||0,height:i.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},Ke=async e=>{const t=e,n=new Int32Array(t,0,13),o=n[12]+52,i=new Uint8Array(t,o),r=[],s={pixelWidth:n[7],pixelHeight:n[6],numberOfMipmapLevels:n[11]||0};let a=0,l=s.pixelWidth||0,u=s.pixelHeight||0;for(let c=0;c<s.numberOfMipmapLevels;c++){const e=(l+3>>2)*(u+3>>2)*8,n=new Uint8Array(t,i.byteOffset+a,e);r.push(n),a+=e,l>>=1,u>>=1}return{data:{glInternalFormat:36196,mipmaps:r,width:s.pixelWidth||0,height:s.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};const Ye=(e,t,n,o,i,r,s)=>new Promise((a,l)=>{const u=document.createElement("canvas"),c=u.getContext("2d");ie(c),c.imageSmoothingEnabled=!0;const p=new Image;p.onload=()=>{const e=null!=o?o:0,l=null!=i?i:0,d=t||p.width,h=n||p.height;u.width=d,u.height=h,c.drawImage(p,0,0,d,h),a({data:c.getImageData(e,l,null!=r?r:d,null!=s?s:h),premultiplyAlpha:!1})},p.onerror=e=>{l(e)},p.src=e});function Qe(e,t=""){return new Promise((n,o)=>{const i=new XMLHttpRequest;i.responseType=t,i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(0===i.status||200===i.status?n(i.response):o(i.statusText))},i.open("GET",e,!0),i.send(null)})}class Je extends fe{constructor(t,n){super(t),e(this,"props",void 0),e(this,"type",he.image),this.props=Je.resolveDefaults(n)}hasAlphaChannel(e){return-1!==e.indexOf("image/png")}async loadImageFallback(e,t){const n=new Image;return"string"==typeof e&&!1===Ae(e)&&(n.crossOrigin="anonymous"),new Promise(o=>{n.onload=()=>{o({data:n,premultiplyAlpha:t})},n.onerror=()=>{console.warn("Image loading failed, returning fallback object."),o({data:n,premultiplyAlpha:t})},e instanceof Blob?n.src=URL.createObjectURL(e):n.src=e})}async createImageBitmap(e,t,n,o,i,r){const s=null!=t?t:e.type.includes("image/png"),a=this.txManager.imageBitmapSupported;if(!0===a.full&&null!==i&&null!==r){return{data:await createImageBitmap(e,n||0,o||0,i,r,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}if(!0===a.basic)return{data:await createImageBitmap(e),premultiplyAlpha:s};return{data:await createImageBitmap(e,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}async loadImage(e){const{premultiplyAlpha:t,sx:n,sy:o,sw:i,sh:r}=this.props;if(!0===this.txManager.hasCreateImageBitmap){if(!1===Ae(e)&&!0===this.txManager.hasWorker&&null!==this.txManager.imageWorkerManager)return this.txManager.imageWorkerManager.getImage(e,t,n,o,i,r);let s;return s=!0===Ae(e)?function(e){var t;const n=(null===(t=(e=e.replace(/^data:/,"")).match(/image\/[^;]+/))||void 0===t?void 0:t[0])||"",o=e.replace(/^[^,]+,/,""),i=1024,r=atob(o),s=r.length,a=Math.ceil(s/i),l=new Array(a);for(let c=0;c<a;++c){const e=c*i,t=Math.min(e+i,s),n=new Array(t-e);for(let o=e,i=0;o<t;++i,++o){var u;n[i]=null===(u=r[o])||void 0===u?void 0:u.charCodeAt(0)}l[c]=new Uint8Array(n)}return new Blob(l,{type:n})}(e):await Qe(e,"blob").then(e=>e),this.createImageBitmap(s,t,n,o,i,r)}return this.loadImageFallback(e,null==t||t)}async getTextureSource(){var e;let t,n,o;try{t=await this.determineImageTypeAndLoadImage()}catch(c){return this.setState("failed",c),{data:null}}if(null===t.data)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};var i,r,s,a,l,u;t.data instanceof Uint8Array?(n=null!==(i=this.props.width)&&void 0!==i?i:0,o=null!==(r=this.props.height)&&void 0!==r?r:0):(n=null!==(s=null===(a=t.data)||void 0===a?void 0:a.width)&&void 0!==s?s:this.props.width||0,o=null!==(l=null===(u=t.data)||void 0===u?void 0:u.height)&&void 0!==l?l:this.props.height||0);return this.setState("fetched",{width:n,height:o}),{data:t.data,premultiplyAlpha:null===(e=this.props.premultiplyAlpha)||void 0===e||e}}determineImageTypeAndLoadImage(){const{src:e,premultiplyAlpha:t,type:n}=this.props;if(null===e)return{data:null};if("string"!=typeof e){if(e instanceof Blob){if(!0===this.txManager.hasCreateImageBitmap){const{sx:n,sy:o,sw:i,sh:r}=this.props;return this.createImageBitmap(e,t,n,o,i,r)}return this.loadImageFallback(e,null==t||t)}return e instanceof ImageData?{data:e,premultiplyAlpha:t}:{data:e(),premultiplyAlpha:t}}const o=function(e){if("file:"===self.location.protocol&&!me.test(e)){const t=self.location.pathname.split("/");t.pop();const n=t.join("/"),o=self.location.protocol+"//"+n;return"."===e.charAt(0)&&(e=e.slice(1)),"/"===e.charAt(0)&&(e=e.slice(1)),o+"/"+e}return new URL(e,self.location.href).href}(e);return"regular"===n?this.loadImage(o):"svg"===n||!0===/\.(svg)(\?.*)?$/.test(e)?Ye(o,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):"compressed"===n||!0===function(e){return/\.(ktx|pvr)$/.test(e)}(e)?Xe(o):this.loadImage(o)}static makeCacheKey(e){var t;const n=Je.resolveDefaults(e),o=n.key||n.src;if("string"!=typeof o)return!1;let i="";var r,s;null!==n.sh&&null!==n.sw&&(i+=",",i+=null!==(r=n.sx)&&void 0!==r?r:"",i+=null!==(s=n.sy)&&void 0!==s?s:"",i+=n.sw||"",i+=n.sh||"");return`ImageTexture,${o},${null!==(t=n.premultiplyAlpha)&&void 0!==t?t:"true"}${i}`}static resolveDefaults(e){var t,n,o,i,r,s,a,l,u,c;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(n=e.premultiplyAlpha)||void 0===n||n,key:null!==(o=e.key)&&void 0!==o?o:null,type:null!==(i=e.type)&&void 0!==i?i:null,width:null!==(r=e.width)&&void 0!==r?r:null,height:null!==(s=e.height)&&void 0!==s?s:null,sx:null!==(a=e.sx)&&void 0!==a?a:null,sy:null!==(l=e.sy)&&void 0!==l?l:null,sw:null!==(u=e.sw)&&void 0!==u?u:null,sh:null!==(c=e.sh)&&void 0!==c?c:null}}}e(Je,"z$__type__Props",void 0);class Ze extends fe{constructor(t,n){super(t),e(this,"props",void 0),e(this,"type",he.noise),this.props=Ze.resolveDefaults(n)}async getTextureSource(){const{width:e,height:t}=this.props,n=e*t*4,o=new Uint8ClampedArray(n);for(let i=0;i<n;i+=4){const e=Math.floor(256*Math.random());o[i]=e,o[i+1]=e,o[i+2]=e,o[i+3]=255}return this.setState("fetched"),{data:new ImageData(o,e,t)}}static makeCacheKey(e){if(void 0===e.cacheId)return!1;const t=Ze.resolveDefaults(e);return`NoiseTexture,${t.width},${t.height},${t.cacheId}`}static resolveDefaults(e){var t,n,o;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(n=e.height)&&void 0!==n?n:128,cacheId:null!==(o=e.cacheId)&&void 0!==o?o:0}}}e(Ze,"z$__type__Props",void 0);class et extends fe{constructor(t,n){super(t),e(this,"props",void 0),e(this,"parentTexture",void 0),e(this,"type",he.subTexture),e(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height})}),e(this,"onParentTxFailed",(e,t)=>{this.forwardParentTxState("failed",t)}),e(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})}),e(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")}),e(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")}),e(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed")}),this.props=et.resolveDefaults(n||{}),ie(this.props.texture,"SubTexture requires a parent texture"),ie(this.props.texture instanceof Je,"SubTexture requires an ImageTexture parent"),this.parentTexture=t.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const e=this.parentTexture;"loaded"===e.state?this.onParentTxLoaded(e,e.dimensions):"fetching"===e.state?this.onParentTxFetching():"fetched"===e.state?this.onParentTxFetched():"loading"===e.state?this.onParentTxLoading():"failed"===e.state?this.onParentTxFailed(e,e.error):"freed"===e.state&&this.onParentTxFreed(),e.on("fetched",this.onParentTxFetched),e.on("loading",this.onParentTxLoading),e.on("fetching",this.onParentTxFetching),e.on("loaded",this.onParentTxLoaded),e.on("failed",this.onParentTxFailed),e.on("freed",this.onParentTxFreed)})}forwardParentTxState(e,t){this.setState(e,t)}onChangeIsRenderable(e){this.parentTexture.setRenderableOwner(this,e)}async getTextureSource(){return new Promise((e,t)=>{this.setState("fetched"),e({data:this.props})})}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}}e(et,"z$__type__Props",void 0);class tt extends fe{constructor(t,n){super(t),e(this,"props",void 0),e(this,"type",he.renderToTexture),this.props=tt.resolveDefaults(n||{})}get width(){return this.props.width}set width(e){this.props.width=e}get height(){return this.props.height}set height(e){this.props.height=e}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(e){return{width:e.width||256,height:e.height||256}}}e(tt,"z$__type__Props",void 0);class nt extends de{constructor(t,n){super(),e(this,"keyCache",new Map),e(this,"inverseKeyCache",new WeakMap),e(this,"txConstructors",{}),e(this,"downloadTextureSourceQueue",[]),e(this,"priorityQueue",[]),e(this,"uploadTextureQueue",[]),e(this,"initialized",!1),e(this,"stage",void 0),e(this,"numImageWorkers",void 0),e(this,"imageWorkerManager",null),e(this,"hasCreateImageBitmap",!!self.createImageBitmap),e(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1}),e(this,"hasWorker",!!self.Worker),e(this,"renderer",void 0),e(this,"frameTime",0);const{numImageWorkers:o,createImageBitmapSupport:i}=n;this.stage=t,this.numImageWorkers=o,"auto"===i?async function(){var e;const t=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),n={basic:!1,options:!1,full:!1},o=new Blob([t],{type:"image/png"}),i=await createImageBitmap(o);null===(e=i.close)||void 0===e||e.call(i),n.basic=!0;try{var r;const e={premultiplyAlpha:"none"},t=await createImageBitmap(o,e);null===(r=t.close)||void 0===r||r.call(t),n.options=!0}catch(a){}try{var s;const e=await createImageBitmap(o,0,0,1,1,{premultiplyAlpha:"none"});null===(s=e.close)||void 0===s||s.call(e),n.full=!0}catch(a){}return n}().then(e=>{this.initialize(e)}).catch(e=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}):this.initialize({basic:"basic"===i,options:"options"===i,full:"full"===i}),this.registerTextureType("ImageTexture",Je),this.registerTextureType("ColorTexture",qe),this.registerTextureType("NoiseTexture",Ze),this.registerTextureType("SubTexture",et),this.registerTextureType("RenderTexture",tt)}registerTextureType(e,t){this.txConstructors[e]=t}initialize(e){this.hasCreateImageBitmap=e.basic||e.options||e.full,this.imageBitmapSupported=e,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new He(this.numImageWorkers,e):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}enqueueDownloadTextureSource(e){this.downloadTextureSourceQueue.includes(e)||this.downloadTextureSourceQueue.push(e)}enqueueUploadTexture(e){!1===this.uploadTextureQueue.includes(e)&&this.uploadTextureQueue.push(e)}createTexture(e,t){let n;const o=this.txConstructors[e];if(!o)throw new Error(`Texture type "${e}" is not registered`);const i=o.makeCacheKey(t);return i&&this.keyCache.has(i)?n=this.keyCache.get(i):(n=new o(this,t),i&&this.initTextureToCache(n,i)),n}orphanTexture(e){this.removeTextureFromQueue(e),e.type!==he.subTexture&&this.stage.txMemManager.addToOrphanedTextures(e)}loadTexture(e,t){if(this.stage.txMemManager.removeFromOrphanedTextures(e),e.type!==he.subTexture)if(void 0===e.ctxTexture||"loaded"!==e.ctxTexture.state){if(!0!==this.downloadTextureSourceQueue.includes(e)&&!0!==this.uploadTextureQueue.includes(e)){if(void 0!==e.ctxTexture&&"loading"===e.ctxTexture.state){if(null!==e.textureData)return void this.enqueueUploadTexture(e);e.free()}if(!1!==this.initialized){if("failed"===e.state&&(e.free(),e.freeTextureData()),(e.type===he.color||e.type===he.renderToTexture)&&"initial"!==e.state)return e.setState("fetched"),void this.enqueueUploadTexture(e);e.setState("loading"),!0===t&&e.getTextureData().then(()=>{this.uploadTexture(e)}).catch(e=>{console.error(e)}),this.enqueueDownloadTextureSource(e)}else this.priorityQueue.push(e)}}else e.setState("loaded")}uploadTexture(e){if(!0===this.stage.txMemManager.doNotExceedCriticalThreshold&&!0===this.stage.txMemManager.criticalCleanupRequested)return void this.enqueueUploadTexture(e);const t=e.loadCtxTexture();null===t||"loaded"!==t.state?t.load():e.setState("loaded")}isProcessingTexture(e){return!0===this.downloadTextureSourceQueue.includes(e)||!0===this.uploadTextureQueue.includes(e)}processSome(e){if(!1===this.initialized)return;const t=$e();for(;this.priorityQueue.length>0&&$e()-t<e;){const e=this.priorityQueue.pop();e.getTextureData().then(()=>{this.uploadTexture(e)})}for(;this.uploadTextureQueue.length>0&&$e()-t<e;)this.uploadTexture(this.uploadTextureQueue.pop());for(;this.downloadTextureSourceQueue.length>0&&$e()-t<e;){const e=this.downloadTextureSourceQueue.shift();e.getTextureData().then(()=>{"fetched"===e.state&&this.enqueueUploadTexture(e)})}}hasUpdates(){return this.downloadTextureSourceQueue.length>0||this.uploadTextureQueue.length>0}initTextureToCache(e,t){const{keyCache:n,inverseKeyCache:o}=this;n.set(t,e),o.set(e,t)}getTextureFromCache(e){return this.keyCache.get(e)}removeTextureFromCache(e){const{inverseKeyCache:t,keyCache:n}=this,o=t.get(e);o&&n.delete(o)}removeTextureFromQueue(e){const t=this.downloadTextureSourceQueue.indexOf(e);-1!==t&&this.downloadTextureSourceQueue.splice(t,1);const n=this.uploadTextureQueue.indexOf(e);-1!==n&&this.uploadTextureQueue.splice(n,1)}resolveParentTexture(e){if(null==e||!e.props)return e;const t=Je.makeCacheKey(e.props),n=t?this.getTextureFromCache(t):void 0;return null!=n?n:e}}const ot={normal:400,bold:700,bolder:900,lighter:100},it=e=>"number"==typeof e?e:ot[e]||400;class rt{constructor(t){e(this,"textRenderers",void 0),e(this,"fontCache",new Map),this.textRenderers=t}addFontFace(e){for(const t in this.textRenderers){const n=this.textRenderers[t];n&&n.isFontFaceSupported(e)&&n.addFontFace(e)}}resolveFontFace(e,t,n){const{fontFamily:o,fontWeight:i,fontStyle:r,fontStretch:s}=t,a=`${n}_${o}_${r}_${i}_${s}`;if(!0===this.fontCache.has(a))return this.fontCache.get(a);const l=function(e,t,n,o,i){let r=it(n);for(const s of e){const e=s[t];if(!e)continue;if(1===e.size)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),e.values().next().value;const n=new Map;for(const t of e){const e=it(t.descriptors.weight);if(e===r&&t.descriptors.style===o&&t.descriptors.stretch===i)return t;n.set(e,t)}const a=`TrFontManager: No exact match: '${t} Weight: ${r} Style: ${o} Stretch: ${i}'`;if(console.error(a),400===r&&n.has(500))return n.get(500);if(500===r&&n.has(400))return n.get(400);if(r<400){for(;r>0;){if(n.has(r))return n.get(r);r-=100}r=600}for(;r<1e3;){if(n.has(r))return n.get(r);r+=100}for(r=500;r>0;){if(n.has(r))return n.get(r);r-=100}}}(e,o,i,r,s);return void 0!==l&&this.fontCache.set(a,l),l}}class st{static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}function at(e,t,n){const o=e.createShader(t);if(!o){const n=e.getError();throw new Error(`Unable to create the shader: ${t===e.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${n?` WebGlContext Error: ${n}`:""}`)}e.shaderSource(o,n),e.compileShader(o);if(!!e.getShaderParameter(o,e.COMPILE_STATUS))return o;console.error(e.getShaderInfoLog(o)),e.deleteShader(o)}class lt extends st{constructor(t){super(),e(this,"boundBufferCollection",null),e(this,"buffersBound",!1),e(this,"program",void 0),e(this,"vao",void 0),e(this,"renderer",void 0),e(this,"glw",void 0),e(this,"attributeBuffers",void 0),e(this,"attributeLocations",void 0),e(this,"attributeNames",void 0),e(this,"uniformLocations",void 0),e(this,"uniformTypes",void 0),e(this,"supportsIndexedTextures",void 0);const n=this.renderer=t.renderer,o=this.glw=this.renderer.glw;this.supportsIndexedTextures=t.supportsIndexedTextures||!1;const i=o.isWebGl2(),r=i&&t.webgl2Extensions||!i&&t.webgl1Extensions||[],s=i?"2.0":"1.0";r.forEach(e=>{if(!o.getExtension(e))throw new Error(`Shader "${this.constructor.name}" requires extension "${e}" for WebGL ${s} but wasn't found`)});const a=t.shaderSources||this.constructor.shaderSources;if(!a)throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);i&&null!=a&&a.webGl2&&(a.fragment=a.webGl2.fragment,a.vertex=a.webGl2.vertex,delete a.webGl2);const l=n.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,u=a.vertex instanceof Function?a.vertex(l):a.vertex,c=a.fragment instanceof Function?a.fragment(l):a.fragment,p=at(o,o.VERTEX_SHADER,u),d=at(o,o.FRAGMENT_SHADER,c);if(!p||!d)throw new Error(`Unable to create the following shader(s): ${[!p&&"VERTEX_SHADER",!d&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const h=function(e,t,n){const o=e.createProgram();if(!o)throw new Error("Unable to create program");if(e.attachShader(o,t),e.attachShader(o,n),e.linkProgram(o),!!e.getProgramParameter(o,e.LINK_STATUS))return o;console.warn(e.getProgramInfoLog(o)),e.deleteProgram(o)}(o,p,d);if(!h)throw new Error("Unable to create program");this.program=h,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...t.attributes].forEach(e=>{const t=o.getAttribLocation(this.program,e);if(t<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${e}"!`);const n=o.createBuffer();if(!n)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${e}"`);this.attributeLocations[e]=t,this.attributeBuffers[e]=n,this.attributeNames.push(e)}),this.uniformLocations={},this.uniformTypes={},t.uniforms.forEach(e=>{const t=o.getUniformLocation(this.program,e.name);this.uniformTypes[e.name]=e.uniform,t?this.uniformLocations[e.name]=t:console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${e.name}"`)})}bindBufferAttribute(e,t,n){const{glw:o}=this;o.enableVertexAttribArray(e),o.vertexAttribPointer(t,e,n.size,n.type,n.normalized,n.stride,n.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,t){return!1}bindRenderOp(e,t){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{glw:n,parentHasRenderTexture:o,renderToTexture:i}=e;if(!i||!o){if(o){const{width:t,height:o}=e.framebufferDimensions||{};n.uniform1f(this.getUniformLocation("u_pixelRatio"),1),n.uniform2f(this.getUniformLocation("u_resolution"),null!=t?t:0,null!=o?o:0)}else n.uniform1f(this.getUniformLocation("u_pixelRatio"),e.options.pixelRatio),n.uniform2f(this.getUniformLocation("u_resolution"),n.canvas.width,n.canvas.height);if(t){if(ue(t,"$dimensions")){let o=t.$dimensions;o||(o=e.dimensions),n.uniform2f(this.getUniformLocation("u_dimensions"),o.width,o.height)}if(ue(t,"$alpha")){let o=t.$alpha;o||(o=e.alpha),n.uniform1f(this.getUniformLocation("u_alpha"),o)}this.bindProps(t)}}}getUniformLocation(e){return this.uniformLocations[e]||null}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const t in this.attributeLocations){const n=e.getBuffer(t),o=e.getAttributeInfo(t);ie(n,`Buffer for "${t}" not found`),ie(o),this.bindBufferAttribute(this.attributeLocations[t],n,o)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}e(lt,"shaderSources",void 0);class ut extends lt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}e(ut,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class ct extends lt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}),e(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:t,glw:n}=this;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((e,t)=>{n.activeTexture(t),n.bindTexture(e.ctxTexture)});const o=Array.from(Array(e.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),o)}}e(ct,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>`\n      #define txUnits ${e}\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {\n        ${Array.from(Array(e).keys()).map(e=>`\n          ${0!==e?"else ":""}if (idx == ${e}) {\n            return texture2D(textures[${e}], uv);\n          }\n        `).join("")}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `});class pt{static getEffectKey(e){return""}static getMethodParameters(e,t){const n=[];for(const o in e){const i=e[o];let r="";i.size&&(r=`[${i.size(t)}]`),n.push(`${i.type} ${o}${r}`)}return n.join(",")}constructor(t){e(this,"priority",1),e(this,"name",""),e(this,"ref",void 0),e(this,"target",void 0),e(this,"passParameters",""),e(this,"declaredUniforms",""),e(this,"uniformInfo",{});const{ref:n,target:o,props:i={}}=t;this.ref=n,this.target=o;const r={},s=[];let a="";const l=this.constructor.uniforms||{};for(const e in l){const t=l[e],o=t.type,u=`${n}_${e}`;let c="";t.size&&(c=`[${t.size(i)}]`),s.push(u),a+=`uniform ${o} ${u}${c};`,r[e]={name:u,uniform:l[e].method}}this.passParameters=s.join(","),this.declaredUniforms=a,this.uniformInfo=r}static resolveDefaults(e){return{}}static makeEffectKey(e){return!1}}e(pt,"uniforms",{}),e(pt,"methods",void 0),e(pt,"onShaderMask",void 0),e(pt,"onColorize",void 0),e(pt,"onEffectMask",void 0);const dt=new Map,ht=(e,t)=>{const n=JSON.stringify(e);if(dt.has(n))return dt.get(n);const o=[],i=(e=null!=e?e:[]).length;let r=0;for(;r<i;r++){const{name:n,type:i,props:s}=e[r],a={name:n,type:i,props:{}},l=t[i],u=l.resolveDefaults(s),c=l.uniforms,p=Object.keys(c),d=p.length;let h=0;for(;h<d;h++){const e=p[h],t=c[e],n={value:u[e],programValue:void 0,method:t.method,updateOnBind:t.updateOnBind||!1,hasValidator:void 0!==t.validator,hasProgramValueUpdater:void 0!==t.updateProgramValue},o=n.hasValidator&&t.validator(u[e],u)||u[e];u[e]!==o&&(n.validatedValue=o),n.hasProgramValueUpdater&&t.updateProgramValue(n),void 0===n.programValue&&(n.programValue=n.value),a.props[e]=n}o.push(a)}return dt.set(n,o),o};class ft extends lt{constructor(t,n,o){const i=ft.createShader(n,o);super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}}),e(this,"effects",[]),this.effects=i.effects}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindUniformMethods(e){const t=this.glw,n=e.effects,o=n.length;for(let i=0;i<o;i++){const e=this.effects[i].uniformInfo,o=n[i],r=Object.keys(o.props),s=r.length;for(let n=0;n<s;n++){const i=r[n],s=o.props[i].method,a=this.getUniformLocation(e[i].name);"uniform2fv"!==s&&"uniform2iv"!==s&&"uniform3iv"!==s&&"uniform4fv"!==s&&"uniform4iv"!==s&&"uniformMatrix2fv"!==s&&"uniformMatrix3fv"!==s&&"uniformMatrix4fv"!==s&&"uniform1f"!==s&&"uniform1fv"!==s&&"uniform1i"!==s&&"uniform1iv"!==s?"uniform2f"!==s&&"uniform2i"!==s?"uniform3f"!==s&&"uniform3i"!==s?"uniform4f"!==s&&"uniform4i"!==s||(o.props[i].setUniformValue=function(){t[s](a,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])}):o.props[i].setUniformValue=function(){t[s](a,this.programValue[0],this.programValue[1],this.programValue[2])}:o.props[i].setUniformValue=function(){t[s](a,this.programValue[0],this.programValue[1])}:o.props[i].setUniformValue=function(){t[s](a,this.programValue)}}}}bindProps(e){const t=e.effects,n=t.length;let o=0;for(;o<n;o++){const n=t[o],r=Object.keys(n.props),s=r.length;let a=0;for(;a<s;a++){const t=r[a],o=n.props[t];if(!0===o.updateOnBind){var i;const o=null===(i=this.renderer.shManager.getRegisteredEffects()[n.type])||void 0===i?void 0:i.uniforms[t];null==o||o.updateProgramValue(n.props[t],e)}o.setUniformValue()}}}canBatchShaderProps(e,t){if(e.$alpha!==t.$alpha||e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;const n=e.effects.length;let o=0;for(;o<n;o++){const n=e.effects[o],i=t.effects[o];if(n.type!==i.type)return!1;for(const e in n.props)if(i.props&&!i.props[e]||n.props[e].value!==i.props[e].value)return!1}return!0}static createShader(e,t){const n={},o={};let i="";const r=[],s=[],a=e.effects.map(e=>{const o=t[e.type],a=o.getEffectKey(e.props||{});n[a]=n[a]?++n[a]:1;const l=n[a];1===l&&s.push({key:a,type:e.type,props:e.props});const u=new o({ref:`${a}${1===l?"":l}`,target:a,props:e.props});return i+=u.declaredUniforms,r.push(...Object.values(u.uniformInfo)),u});let l="";null==s||s.forEach(e=>{var n;const i=t[e.type],r=i.resolveDefaults(null!==(n=e.props)&&void 0!==n?n:{}),s=[];for(const t in i.methods){let e=t;const n=i.methods[t];o[t]&&o[t]!==n&&(e=ft.resolveMethodDuplicate(t,n,o)),o[e]=n.replace("function",e),s.push({m:t,cm:e})}let a=i.onShaderMask instanceof Function?i.onShaderMask(r):i.onShaderMask,u=i.onColorize instanceof Function?i.onColorize(r):i.onColorize,c=i.onEffectMask instanceof Function?i.onEffectMask(r):i.onEffectMask;s.forEach(e=>{const{m:t,cm:n}=e,o=new RegExp(`\\$${t}`,"g");a&&(a=a.replace(o,n)),u&&(u=u.replace(o,n)),c&&(c=c.replace(o,n))});const p=i.getMethodParameters(i.uniforms,r),d=p.length>0?`, ${p}`:"";a&&(l+=`\n        float fx_${e.key}_onShaderMask(float shaderMask ${d}) {\n          ${a}\n        }\n        `),u&&(l+=`\n          vec4 fx_${e.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${d}) {\n            ${u}\n          }\n        `),c&&(l+=`\n          vec4 fx_${e.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${d}) {\n            ${c}\n          }\n        `)});let u="";for(const d in o)u+=o[d];let c="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",p="\n\n    ";for(let d=0;d<a.length;d++){const e=a[d],n=e.passParameters.length>0?`, ${e.passParameters}`:"",o=t[e.name];o.onShaderMask&&(p+=`\n        shaderMask = fx_${e.target}_onShaderMask(shaderMask ${n});\n        `),o.onColorize&&(p+=`\n        maskColor = fx_${e.target}_onColorize(shaderMask, maskColor, shaderColor${n});\n        `),o.onEffectMask&&(c=`fx_${e.target}_onEffectMask(shaderMask, maskColor, shaderColor${n})`);const i=a[d+1];(void 0===i||t[i.name].onEffectMask)&&(p+=`\n          shaderColor = ${c};\n        `)}return{effects:a,uniforms:r,fragment:ft.fragment(i,u,l,p),vertex:ft.vertex()}}static resolveMethodDuplicate(e,t,n,o=0){const i=e+(o>0?o:"");return n[i]&&n[i]!==t?this.resolveMethodDuplicate(e,t,n,++o):i}static resolveDefaults(e,t){var n;return ie(t),{effects:ht(null!==(n=e.effects)&&void 0!==n?n:[],t),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var n;let o="";return null===(n=e.effects)||void 0===n||n.forEach(e=>{const n=t[e.type].getEffectKey(e.props||{});o+=`,${n}`}),`DynamicShader${o}`}}e(ft,"z$__type__Props",void 0),e(ft,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),e(ft,"fragment",(e,t,n,o)=>`\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${e}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${t}\n\n    ${n}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${o}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `);class mt extends lt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){const t=Math.min(e.$dimensions.width,e.$dimensions.height)/(2*e.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),e.radius*Math.min(t,1))}canBatchShaderProps(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}e(mt,"z$__type__Props",void 0),e(mt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const gt=new Float32Array([1,0,0,0,1,0,0,0,1]);class yt extends lt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){const t=yt.resolveDefaults(e);for(const n in t)if("transform"===n)this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),t[n]);else if("scrollY"===n)this.glw.uniform1f(this.getUniformLocation("u_scrollY"),t[n]);else if("color"===n){const e=ge(t.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),e)}else"size"===n?this.glw.uniform1f(this.getUniformLocation("u_size"),t[n]):"distanceRange"===n?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),t[n]):"debug"===n&&this.glw.uniform1i(this.getUniformLocation("u_debug"),t[n]?1:0)}static resolveDefaults(e={}){var t,n,o,i,r,s;return{transform:null!==(t=e.transform)&&void 0!==t?t:gt,scrollY:null!==(n=e.scrollY)&&void 0!==n?n:0,color:null!==(o=e.color)&&void 0!==o?o:4294967295,size:null!==(i=e.size)&&void 0!==i?i:16,distanceRange:null!==(r=e.distanceRange)&&void 0!==r?r:1,debug:null!==(s=e.debug)&&void 0!==s&&s}}}e(yt,"z$__type__Props",void 0),e(yt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});const vt=e=>{void 0===e.programValue&&(e.programValue=new Float32Array(4));const t=e.value,n=e.programValue;n[0]=(t>>>24)/255,n[1]=(t>>>16&255)/255,n[2]=(t>>>8&255)/255,n[3]=(255&t)/255},bt=e=>{const t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){const n=t.length,o=e.programValue;for(let e=0;e<n;e++)o[e]=t[e]}else e.programValue=new Float32Array(t)},xt=e=>{const t=Array.isArray(e);return t?t&&4===e.length?e:t&&2===e.length?[e[0],e[1],e[0],e[1]]:t&&3===e.length?[e[0],e[1],e[2],e[0]]:[e[0],e[0],e[0],e[0]]:[e,e,e,e]},wt=(e,t)=>{void 0===e.programValue&&(e.programValue=new Float32Array(4));const n=e.programValue,o=e.validatedValue||e.value;if(void 0===t&&void 0===e.$dimensions)return n[0]=o[0],n[1]=o[1],n[2]=o[2],void(n[3]=o[3]);let i=e.$dimensions;if(void 0!==t){const{$dimensions:n}=t;if(void 0!==i&&(i.width===n.width||i.height===n.height))return;void 0===i&&(i={width:null==n?void 0:n.width,height:null==n?void 0:n.height},e.$dimensions=i)}const{width:r,height:s}=i,[a,l,u,c]=o,p=Math.min(Math.min(Math.min(r/Math.max(r,a+l),r/Math.max(r,u+c)),Math.min(s/Math.max(s,a+u),s/Math.max(s,l+c))),1);n[0]=a*p,n[1]=l*p,n[2]=u*p,n[3]=c*p};class St extends pt{constructor(...t){super(...t),e(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}e(St,"z$__type__Props",void 0),e(St,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:xt,updateProgramValue:wt}}),e(St,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),e(St,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),e(St,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class Tt extends pt{constructor(...t){super(...t),e(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}e(Tt,"z$__type__Props",void 0),e(Tt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:vt,method:"uniform4fv",type:"vec4"}}),e(Tt,"onEffectMask","\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),e(Tt,"onColorize","\n    return color;\n  ");class kt extends pt{constructor(...t){super(...t),e(this,"name","linearGradient")}static getEffectKey(e){return e.colors.value?`linearGradient${e.colors.value.length}`:`linearGradient${e.colors.length}`}static resolveDefaults(e){var t,n;const o=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295];let i=e.stops||[];if(0===i.length||i.length!==o.length){const e=o.length;let t=0;const n=i;for(;t<e;t++)i[t]?(n[t]=i[t],void 0===i[t-1]&&void 0!==n[t-2]&&(n[t-1]=n[t-2]+(i[t]-n[t-2])/2)):n[t]=t*(1/(o.length-1));i=n}return{colors:o,stops:i,angle:null!==(n=e.angle)&&void 0!==n?n:0}}}o=kt,e(kt,"z$__type__Props",void 0),e(kt,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.reduce((e,t)=>e.concat(ge(t)),[]),updateProgramValue:bt,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),e(kt,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),e(kt,"ColorLoop",e=>{let t="";for(let n=2;n<e;n++)t+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return t}),e(kt,"onColorize",e=>{const t=e.colors.length||1;return`\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ${o.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `});class Ct extends pt{constructor(...t){super(...t),e(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}e(Ct,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),e(Ct,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class At extends pt{constructor(...t){super(...t),e(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}e(At,"z$__type__Props",void 0),e(At,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:vt,method:"uniform4fv",type:"vec4"}}),e(At,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),e(At,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),e(At,"onColorize","\n    return color;\n  ");class Et extends pt{constructor(...t){super(...t),e(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}e(Et,"z$__type__Props",void 0),e(Et,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:vt,method:"uniform4fv",type:"vec4"}}),e(Et,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),e(Et,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),e(Et,"onColorize","\n    return color;\n  ");class It extends pt{constructor(...t){super(...t),e(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}e(It,"z$__type__Props",void 0),e(It,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:vt,method:"uniform4fv",type:"vec4"}}),e(It,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),e(It,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),e(It,"onColorize","\n    return color;\n  ");class Mt extends pt{constructor(...t){super(...t),e(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}e(Mt,"z$__type__Props",void 0),e(Mt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:vt,method:"uniform4fv",type:"vec4"}}),e(Mt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),e(Mt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),e(Mt,"onColorize","\n    return color;\n  ");class Rt extends pt{constructor(...t){super(...t),e(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,n,o,i,r;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(n=e.narrowness)&&void 0!==n?n:4,blockiness:null!==(o=e.blockiness)&&void 0!==o?o:2,minimizer:null!==(i=e.minimizer)&&void 0!==i?i:8,time:null!==(r=e.time)&&void 0!==r?r:Date.now()}}}e(Rt,"z$__type__Props",void 0),e(Rt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:e=>{const t=e.value=(Date.now()-e.value)%1e3;e.programValue=t},type:"float"}}),e(Rt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),e(Rt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class _t extends pt{constructor(...t){super(...t),e(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}e(_t,"z$__type__Props",void 0),e(_t,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:xt,updateProgramValue:e=>{const t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){const n=e.programValue;n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]}else e.programValue=new Float32Array(t)}}}),e(_t,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class Lt extends pt{constructor(...t){super(...t),e(this,"name","radialGradient")}static getEffectKey(e){return e.colors.value?`radialGradient${e.colors.value.length}`:`radialGradient${e.colors.length}`}static resolveDefaults(e){var t,n,o,i,r;const s=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295];let a=e.stops||[];if(0===a.length||a.length!==s.length){const e=s.length;let t=0;const n=a;for(;t<e;t++)a[t]?(n[t]=a[t],void 0===a[t-1]&&void 0!==n[t-2]&&(n[t-1]=n[t-2]+(a[t]-n[t-2])/2)):n[t]=t*(1/(s.length-1));a=n}return{colors:s,stops:a,width:null!==(n=e.width)&&void 0!==n?n:0,height:null!==(o=null!==(i=e.height)&&void 0!==i?i:e.width)&&void 0!==o?o:0,pivot:null!==(r=e.pivot)&&void 0!==r?r:[.5,.5]}}}i=Lt,e(Lt,"z$__type__Props",void 0),e(Lt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:e=>{const t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){const n=e.programValue;n[0]=t[0],n[1]=t[1]}else e.programValue=new Float32Array(t)},method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.reduce((e,t)=>e.concat(ge(t)),[]),updateProgramValue:bt,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),e(Lt,"ColorLoop",e=>{let t="";for(let n=2;n<e;n++)t+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return t}),e(Lt,"onColorize",e=>{const t=e.colors.length||1;return`\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ${i.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `});class Dt extends pt{constructor(...t){super(...t),e(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,n,o,i,r,s,a;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(n=e.progress)&&void 0!==n?n:.5,offset:null!==(o=e.offset)&&void 0!==o?o:0,range:null!==(i=e.range)&&void 0!==i?i:2*Math.PI,rounded:null!==(r=e.rounded)&&void 0!==r&&r,radius:null!==(s=e.radius)&&void 0!==s?s:1,color:null!==(a=e.color)&&void 0!==a?a:4294967295}}}e(Dt,"z$__type__Props",void 0),e(Dt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:vt,method:"uniform4fv",type:"vec4"}}),e(Dt,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),e(Dt,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),e(Dt,"onColorize","\n    return color;\n  ");class Pt extends pt{constructor(...t){super(...t),e(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:null!==(t=e.radius)&&void 0!==t?t:0}}}e(Pt,"z$__type__Props",void 0),e(Pt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:xt,updateProgramValue:wt}}),e(Pt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),e(Pt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),e(Pt,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");class Ot extends st{constructor(t){super(),e(this,"shType",void 0),this.shType=t}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class Nt{constructor(t,n,o,i){e(this,"type",void 0),e(this,"shader",void 0),e(this,"resolvedProps",void 0),e(this,"props",void 0),this.type=t,this.shader=n,this.resolvedProps=o;const r=Object.keys(o),s=r.length,a={};for(let e=0;e<s;e++){const t=r[e];Object.defineProperty(a,t,{get:()=>this.resolvedProps[t],set:e=>{this.resolvedProps[t]=e,i.requestRender()}})}this.props=a}getResolvedProps(){return this.resolvedProps}}class Ut{constructor(t,n,o){e(this,"shader",void 0),e(this,"resolvedProps",void 0),e(this,"props",void 0),e(this,"type",void 0),this.shader=t,this.type="DynamicShader",this.resolvedProps=n;const i=o.getRegisteredEffects(),r={},s=n.effects,a=s.length;for(let e=0;e<a;e++){const{name:t,props:n,type:a}=s[e];if(void 0===t)continue;const l={},u=Object.keys(n),c=u.length;for(let r=0;r<c;r++){const t=u[r];Object.defineProperty(l,t,{get:()=>this.resolvedProps.effects[e].props[t].value,set:r=>{const s=this.resolvedProps.effects[e].props[t];var l,u;(s.value=r,s.hasValidator)&&(r=s.validatedValue=null===(l=i[a].uniforms[t])||void 0===l?void 0:l.validator(r,n));s.hasProgramValueUpdater?null===(u=i[a].uniforms[t])||void 0===u||u.updateProgramValue(s):s.programValue=r;o.renderer.stage.requestRender()}})}Object.defineProperty(r,t,{get:()=>l})}this.props=r}getResolvedProps(){return this.resolvedProps}}class Bt{constructor(){e(this,"shCache",new Map),e(this,"shConstructors",{}),e(this,"attachedShader",null),e(this,"effectConstructors",{}),e(this,"renderer",void 0),this.registerShaderType("DefaultShader",ut),this.registerShaderType("DefaultShaderBatched",ct),this.registerShaderType("RoundedRectangle",mt),this.registerShaderType("DynamicShader",ft),this.registerShaderType("SdfShader",yt),this.registerEffectType("border",Tt),this.registerEffectType("borderBottom",It),this.registerEffectType("borderLeft",Mt),this.registerEffectType("borderRight",At),this.registerEffectType("borderTop",Et),this.registerEffectType("fadeOut",_t),this.registerEffectType("linearGradient",kt),this.registerEffectType("radialGradient",Lt),this.registerEffectType("grayscale",Ct),this.registerEffectType("glitch",Rt),this.registerEffectType("radius",St),this.registerEffectType("radialProgress",Dt),this.registerEffectType("holePunch",Pt)}registerShaderType(e,t){this.shConstructors[e]=t}registerEffectType(e,t){this.effectConstructors[e]=t}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");const n=this.shConstructors[e];if(!n)throw new Error(`Shader type "${e}" is not registered`);if("canvas"===this.renderer.mode&&n.prototype instanceof lt)return this._createShaderCtr(e,new Ot(e),t);if("DynamicShader"===e)return this.loadDynamicShader(t);const o=n.resolveDefaults(t),i=n.makeCacheKey(o)||n.name;if(i&&this.shCache.has(i))return this._createShaderCtr(e,this.shCache.get(i),o);const r=new n(this.renderer,t);return i&&this.shCache.set(i,r),this._createShaderCtr(e,r,o)}loadDynamicShader(e){if(!this.renderer)throw new Error("Renderer is not been defined");const t=ft.resolveDefaults(e,this.effectConstructors),n=ft.makeCacheKey(t,this.effectConstructors);if(n&&this.shCache.has(n))return this._createDynShaderCtr(this.shCache.get(n),t);const o=new ft(this.renderer,e,this.effectConstructors);return n&&this.shCache.set(n,o),this._createDynShaderCtr(o,t)}_createShaderCtr(e,t,n){return new Nt(e,t,n,this.renderer.stage)}_createDynShaderCtr(e,t){return e.bindUniformMethods(t),new Ut(e,t,this)}useShader(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}const jt={x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},width:(e,t)=>{e.props.width=t},height:(e,t)=>{e.props.height=t},color:(e,t)=>{e.props.color=t},zIndex:(e,t)=>{e.props.zIndex=t},fontFamily:(e,t)=>{e.props.fontFamily=t},fontWeight:(e,t)=>{e.props.fontWeight=t},fontStyle:(e,t)=>{e.props.fontStyle=t},fontStretch:(e,t)=>{e.props.fontStretch=t},fontSize:(e,t)=>{e.props.fontSize=t},text:(e,t)=>{e.props.text=t},textAlign:(e,t)=>{e.props.textAlign=t},contain:(e,t)=>{e.props.contain=t},offsetY:(e,t)=>{e.props.offsetY=t},scrollable:(e,t)=>{e.props.scrollable=t},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t},lineHeight:(e,t)=>{e.props.lineHeight=t},maxLines:(e,t)=>{e.props.maxLines=t},textBaseline:(e,t)=>{e.props.textBaseline=t},verticalAlign:(e,t)=>{e.props.verticalAlign=t},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t},debug:(e,t)=>{e.props.debug=t}};class Ft{constructor(t){e(this,"stage",void 0),e(this,"set",void 0),this.stage=t;const n={...jt,...this.getPropertySetters()},o={};Object.keys(n).forEach(e=>{Object.defineProperty(o,e,{value:(t,o)=>{t.props[e]!==o&&(n[e](t,o),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=o}setStatus(e,t,n){e.status!==t&&(e.status=t,e.emitter.emit(t,n))}setIsRenderable(e,t){e.isRenderable=t}destroyState(e){this.setStatus(e,"destroyed"),e.emitter.removeAllListeners()}scheduleUpdateState(e){e.updateScheduled||(e.updateScheduled=!0,queueMicrotask(()=>{"destroyed"!==e.status&&(e.updateScheduled=!1,this.updateState(e))}))}}class zt{constructor(){e(this,"data",{})}reset(){this.data={}}increment(e){this.data[e]||(this.data[e]=0),this.data[e]++}getData(){return{...this.data}}}class $t{constructor(t,n){e(this,"stage",void 0),e(this,"memUsed",0),e(this,"loadedTextures",new Map),e(this,"orphanedTextures",[]),e(this,"criticalThreshold",void 0),e(this,"targetThreshold",void 0),e(this,"cleanupInterval",void 0),e(this,"debugLogging",void 0),e(this,"lastCleanupTime",0),e(this,"baselineMemoryAllocation",void 0),e(this,"criticalCleanupRequested",!1),e(this,"doNotExceedCriticalThreshold",void 0),e(this,"frameTime",0),this.stage=t;const{criticalThreshold:o,doNotExceedCriticalThreshold:i}=n;this.doNotExceedCriticalThreshold=i||!1,this.criticalThreshold=Math.round(o);const r=Math.max(0,Math.min(1,n.targetThresholdLevel));if(this.cleanupInterval=n.cleanupInterval,this.debugLogging=n.debugLogging,this.baselineMemoryAllocation=Math.round(n.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(o*r),this.baselineMemoryAllocation),this.memUsed=Math.round(n.baselineMemoryAllocation),n.debugLogging){let e=0;setInterval(()=>{e!==this.memUsed&&(e=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${Oe(this.memUsed)} mb / ${Oe(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}0===o&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(e){this.orphanedTextures.includes(e)&&this.removeFromOrphanedTextures(e),!1===e.preventCleanup&&this.orphanedTextures.push(e)}removeFromOrphanedTextures(e){const t=this.orphanedTextures.indexOf(e);-1!==t&&this.orphanedTextures.splice(t,1)}setTextureMemUse(e,t){this.loadedTextures.has(e)&&(this.memUsed-=this.loadedTextures.get(e)),0!==t?(this.memUsed+=t,this.loadedTextures.set(e,t),this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)):this.loadedTextures.delete(e)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}checkCriticalCleanup(){return this.memUsed>this.criticalThreshold}cleanupQuick(e){const t=this.targetThreshold,n=$e();for(;this.memUsed>=t&&this.orphanedTextures.length>0&&(e||$e()-n<10);){const e=this.orphanedTextures.shift();void 0!==e&&(!0!==e.renderable&&this.destroyTexture(e))}}destroyTexture(e){const t=this.stage.txManager;t.removeTextureFromQueue(e),t.removeTextureFromCache(e),e.destroy(),this.removeFromOrphanedTextures(e),this.loadedTextures.delete(e)}cleanupDeep(e){const t=e?this.criticalThreshold:this.targetThreshold,n=[],o=[...this.loadedTextures.keys()];for(let i=0;i<o.length;i++){const e=o[i];void 0!==e&&(e.type!==he.image&&e.type!==he.noise&&e.type!==he.renderToTexture||(!0===e.renderable?n.push(e):n.unshift(e)))}for(;this.memUsed>=t&&n.length>0;){const e=n.shift();if(void 0!==e&&!0!==e.preventCleanup){if(!0===e.renderable)break;this.destroyTexture(e)}}}cleanup(e=!1){const t=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,!0===t&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),!0===this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${t}. Aggressive: ${e}`),this.cleanupQuick(t),!0===e&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(t),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),!0!==this.debugLogging&&!1!==ce()||console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`)):this.criticalCleanupRequested=!1}getMemoryInfo(){let e=0;const t=[...this.loadedTextures.keys()].reduce((t,n)=>(e+=n.renderable?1:0,t+(n.renderable?this.loadedTextures.get(n):0)),this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:t,memUsed:this.memUsed,renderableTexturesLoaded:e,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}class Gt{constructor(t,n){e(this,"textureSource",void 0),e(this,"memManager",void 0),e(this,"state","freed"),this.memManager=t,this.textureSource=n}setTextureMemUse(e){this.memManager.setTextureMemUse(this.textureSource,e)}get renderable(){return this.textureSource.renderable}}class Vt{constructor(t){e(this,"options",void 0),e(this,"mode",void 0),e(this,"stage",void 0),e(this,"txManager",void 0),e(this,"txMemManager",void 0),e(this,"shManager",void 0),e(this,"rttNodes",[]),this.options=t,this.stage=t.stage,this.txManager=t.txManager,this.txMemManager=t.txMemManager,this.shManager=t.shManager}}class Ht extends ze{constructor(t,n,o){super(t,n),e(this,"textRenderer",void 0),e(this,"trState",void 0),e(this,"_textRendererOverride",null),e(this,"onTextLoaded",()=>{const{contain:e}=this,t=this.trState.props.width,n=this.trState.props.height,o=this.trState.textW||0,i=this.trState.textH||0;"both"===e?(this.props.width=t,this.props.height=n):"width"===e?(this.props.width=t,this.props.height=i):"none"===e&&(this.props.width=o,this.props.height=i),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})}),e(this,"onTextFailed",(e,t)=>{this.emit("failed",{type:"text",error:t})}),this._textRendererOverride=n.textRendererOverride,this.textRenderer=o;const i=this.createState({x:this.absX,y:this.absY,width:n.width,height:n.height,textAlign:n.textAlign,color:n.color,zIndex:n.zIndex,contain:n.contain,scrollable:n.scrollable,scrollY:n.scrollY,offsetY:n.offsetY,letterSpacing:n.letterSpacing,debug:n.debug,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStretch:n.fontStretch,fontStyle:n.fontStyle,fontWeight:n.fontWeight,text:n.text,lineHeight:n.lineHeight,maxLines:n.maxLines,textBaseline:n.textBaseline,verticalAlign:n.verticalAlign,overflowSuffix:n.overflowSuffix});this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),"none"===this.contain&&this.setUpdateType(Fe.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),"both"!==this.contain&&this.setUpdateType(Fe.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const t=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);t?(this.textRenderer=t,this.trState=this.createState(this.trState.props)):console.warn("Text Renderer not found for font",this.trState.props.fontFamily)}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t){super.update(e,t),ie(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return 0!==this.worldAlpha&&!0!==this.isOutOfBounds()&&!(!this.trState||""===this.trState.props.text)}setRenderable(e){super.setRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var t;if(ie(this.globalTransform),this.textRenderer.renderQuads){if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}this.parentHasRenderTexture&&null!==(t=this.props.parent)&&void 0!==t&&t.rtt&&(this.globalTransform=Ee.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),ie(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions)}else super.renderQuads(e)}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(e){const t=this.textRenderer.createState(e,this);return t.emitter.on("loaded",this.onTextLoaded),t.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(t),t}}class qt{constructor(t){e(this,"options",void 0),e(this,"animationManager",void 0),e(this,"txManager",void 0),e(this,"txMemManager",void 0),e(this,"fontManager",void 0),e(this,"textRenderers",void 0),e(this,"shManager",void 0),e(this,"renderer",void 0),e(this,"root",void 0),e(this,"boundsMargin",void 0),e(this,"defShaderCtr",void 0),e(this,"strictBound",void 0),e(this,"preloadBound",void 0),e(this,"strictBounds",void 0),e(this,"defaultTexture",null),e(this,"eventBus",void 0),e(this,"deltaTime",0),e(this,"lastFrameTime",0),e(this,"currentFrameTime",0),e(this,"fpsNumFrames",0),e(this,"fpsElapsedTime",0),e(this,"numQuadsRendered",0),e(this,"renderRequested",!1),e(this,"frameEventQueue",[]),e(this,"fontResolveMap",{}),e(this,"contextSpy",null),this.options=t;const{canvas:n,clearColor:o,appWidth:i,appHeight:r,boundsMargin:s,enableContextSpy:a,forceWebGL2:l,numImageWorkers:u,textureMemory:c,renderEngine:p,fontEngines:d,createImageBitmapSupport:h}=t;this.eventBus=t.eventBus,this.txManager=new nt(this,{numImageWorkers:u,createImageBitmapSupport:h}),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new $t(this,c),this.shManager=new Bt,this.animationManager=new Ge,this.contextSpy=a?new zt:null,this.strictBounds=t.strictBounds;let f=[0,0,0,0];s&&(f=Array.isArray(s)?s:[s,s,s,s]),this.boundsMargin=f,this.strictBound=xe(0,0,i,r),this.preloadBound=Ce(this.strictBound,f);const m={stage:this,canvas:n,pixelRatio:t.devicePhysicalPixelRatio*t.deviceLogicalPixelRatio,clearColor:null!=o?o:4278190080,bufferMemory:2e6,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:l};this.renderer=new p(m);const g=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),ae="webgl"===g,this.txManager.renderer=this.renderer,this.textRenderers={},d.forEach(e=>{const t=new e(this),n=t.type;"sdf"!==n||"canvas"!==g?t instanceof Ft&&("canvas"===n?this.textRenderers.canvas=t:"sdf"===n&&(this.textRenderers.sdf=t)):console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...")}),0===Object.keys(this.textRenderers).length&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new rt(this.textRenderers);const y=new ze(this,{x:0,y:0,width:i,height:r,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=y,(e=>{let t=!1;const n=()=>{if(e.updateFrameTime(),e.updateAnimations(),!e.hasSceneUpdates())return e.calculateFps(),setTimeout(n,16.666666666666668),t||(e.eventBus.emit("idle"),t=!0),!0===e.txMemManager.checkCleanup()&&e.txMemManager.cleanup(!1),void e.flushFrameEvents();t=!1,e.drawFrame(),e.flushFrameEvents(),requestAnimationFrame(n)};requestAnimationFrame(n)})(this)}setClearColor(e){this.renderer.updateClearColor(e),this.renderRequested=!0}updateFrameTime(){const e=$e();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=e,this.deltaTime=this.lastFrameTime?e-this.lastFrameTime:100/6,this.txManager.frameTime=e,this.txMemManager.frameTime=e,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),ie(this.defaultTexture instanceof qe),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:e}=this;this.root&&e.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:e,renderRequested:t}=this;ie(e),0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit),e.reset(),!0===this.txMemManager.criticalCleanupRequested&&(this.txMemManager.cleanup(!1),!0===this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(!0)),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),null==e||e.render(),this.calculateFps(),this.calculateQuads(),t&&(this.renderRequested=!1)}queueFrameEvent(e,t){this.frameEventQueue.push([e,t])}flushFrameEvents(){for(const[e,t]of this.frameEventQueue)this.eventBus.emit(e,t);this.frameEventQueue=[]}calculateFps(){const{fpsUpdateInterval:e}=this.options;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){var t,n,o;const e=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:e,contextSpyData:null!==(t=null===(n=this.contextSpy)||void 0===n?void 0:n.getData())&&void 0!==t?t:null}),null===(o=this.contextSpy)||void 0===o||o.reset()}}calculateQuads(){const e=this.renderer.getQuadCount();e&&e!==this.numQuadsRendered&&(this.numQuadsRendered=e,this.queueFrameEvent("quadsUpdate",{quads:e}))}addQuads(e){ie(this.renderer),!0===e.isRenderable&&e.renderQuads(this.renderer);for(let t=0;t<e.children.length;t++){const n=e.children[t];void 0!==n&&(0===n.worldAlpha||!0===n.strictBounds&&n.renderState===Be.OutOfBounds||this.addQuads(n))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,t=null){const n=`${e.fontFamily}${e.fontStyle}${e.fontWeight}${e.fontStretch}${t||""}`;if(void 0!==this.fontResolveMap[n])return this.fontResolveMap[n];let o=t,i=!1;if(o){const t=this.textRenderers[o];t?t.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${o}' for font`,e),o=null,i=!0):(console.warn(`Text renderer override '${o}' not found.`),o=null,i=!0)}if(!o){for(const[t,n]of Object.entries(this.textRenderers))if(n.canRenderFont(e)){o=t;break}o||void 0===this.textRenderers.canvas||(o="canvas")}if(i&&console.warn(`Falling back to text renderer ${String(o)}`),!o)return null;const r=this.textRenderers[o];return ie(r,"resolvedTextRenderer undefined"),this.fontResolveMap[n]=r,r}createShaderCtr(e,t){return this.shManager.loadShader(e,t)}createNode(e){const t=this.resolveNodeDefaults(e);return new ze(this,t)}createTextNode(e){var t,n,o,i,r,s,a,l,u,c,p,d,h,f,m,g,y,v;const b=null!==(t=e.fontSize)&&void 0!==t?t:16,x={...this.resolveNodeDefaults(e),text:null!==(n=e.text)&&void 0!==n?n:"",textRendererOverride:null!==(o=e.textRendererOverride)&&void 0!==o?o:null,fontSize:b,fontFamily:null!==(i=e.fontFamily)&&void 0!==i?i:"sans-serif",fontStyle:null!==(r=e.fontStyle)&&void 0!==r?r:"normal",fontWeight:null!==(s=e.fontWeight)&&void 0!==s?s:"normal",fontStretch:null!==(a=e.fontStretch)&&void 0!==a?a:"normal",textAlign:null!==(l=e.textAlign)&&void 0!==l?l:"left",contain:null!==(u=e.contain)&&void 0!==u?u:"none",scrollable:null!==(c=e.scrollable)&&void 0!==c&&c,scrollY:null!==(p=e.scrollY)&&void 0!==p?p:0,offsetY:null!==(d=e.offsetY)&&void 0!==d?d:0,letterSpacing:null!==(h=e.letterSpacing)&&void 0!==h?h:0,lineHeight:e.lineHeight,maxLines:null!==(f=e.maxLines)&&void 0!==f?f:0,textBaseline:null!==(m=e.textBaseline)&&void 0!==m?m:"alphabetic",verticalAlign:null!==(g=e.verticalAlign)&&void 0!==g?g:"middle",overflowSuffix:null!==(y=e.overflowSuffix)&&void 0!==y?y:"...",debug:null!==(v=e.debug)&&void 0!==v?v:{},shaderProps:null},w=this.resolveTextRenderer(x,e.textRendererOverride);if(!w)throw new Error(`No compatible text renderer found for ${x.fontFamily}`);return new Ht(this,x,w)}setBoundsMargin(e){this.boundsMargin=Array.isArray(e)?e:[e,e,e,e],this.root.setUpdateType(Fe.RenderBounds)}resolveNodeDefaults(e){var t,n,o,i,r,s,a,l,u,c,p,d,h,f,m,g,y,v,b,x,w,S,T,k,C,A,E,I,M,R,_,L,D,P,O,N,U,B,j,F,z,$,G,V,H,q,X,W,K,Y,Q;const J=null!==(t=e.color)&&void 0!==t?t:4294967295,Z=null!==(n=null!==(o=null!==(i=e.colorTl)&&void 0!==i?i:e.colorTop)&&void 0!==o?o:e.colorLeft)&&void 0!==n?n:J,ee=null!==(r=null!==(s=null!==(a=e.colorTr)&&void 0!==a?a:e.colorTop)&&void 0!==s?s:e.colorRight)&&void 0!==r?r:J,te=null!==(l=null!==(u=null!==(c=e.colorBl)&&void 0!==c?c:e.colorBottom)&&void 0!==u?u:e.colorLeft)&&void 0!==l?l:J,ne=null!==(p=null!==(d=null!==(h=e.colorBr)&&void 0!==h?h:e.colorBottom)&&void 0!==d?d:e.colorRight)&&void 0!==p?p:J;let oe={};var ie;!0===this.options.inspector&&(oe=function(e){const t={boolean:!0,string:!0,number:!0,undefined:!0},n=Object.keys(e);for(let o=0;o<n.length;o++){const i=n[o];if(!i)continue;const r=e[i],s=typeof r;"string"===s&&r.length>2048&&(console.warn(`Custom Data value for ${i} is too long, it will be truncated to 2048 characters`),e[i]=r.substring(0,2048)),t[s]||(console.warn(`Custom Data value for ${i} is not a boolean, string, or number, it will be ignored`),delete e[i])}return e}(null!==(ie=e.data)&&void 0!==ie?ie:{}));return{x:null!==(f=e.x)&&void 0!==f?f:0,y:null!==(m=e.y)&&void 0!==m?m:0,width:null!==(g=e.width)&&void 0!==g?g:0,height:null!==(y=e.height)&&void 0!==y?y:0,alpha:null!==(v=e.alpha)&&void 0!==v?v:1,autosize:null!==(b=e.autosize)&&void 0!==b&&b,boundsMargin:null!==(x=e.boundsMargin)&&void 0!==x?x:null,clipping:null!==(w=e.clipping)&&void 0!==w&&w,color:J,colorTop:null!==(S=e.colorTop)&&void 0!==S?S:J,colorBottom:null!==(T=e.colorBottom)&&void 0!==T?T:J,colorLeft:null!==(k=e.colorLeft)&&void 0!==k?k:J,colorRight:null!==(C=e.colorRight)&&void 0!==C?C:J,colorBl:te,colorBr:ne,colorTl:Z,colorTr:ee,zIndex:null!==(A=e.zIndex)&&void 0!==A?A:0,zIndexLocked:null!==(E=e.zIndexLocked)&&void 0!==E?E:0,parent:null!==(I=e.parent)&&void 0!==I?I:null,texture:null!==(M=e.texture)&&void 0!==M?M:null,textureOptions:null!==(R=e.textureOptions)&&void 0!==R?R:{},shader:null!==(_=e.shader)&&void 0!==_?_:this.defShaderCtr,src:null!==(L=e.src)&&void 0!==L?L:null,srcHeight:e.srcHeight,srcWidth:e.srcWidth,srcX:e.srcX,srcY:e.srcY,scale:null!==(D=e.scale)&&void 0!==D?D:null,scaleX:null!==(P=null!==(O=e.scaleX)&&void 0!==O?O:e.scale)&&void 0!==P?P:1,scaleY:null!==(N=null!==(U=e.scaleY)&&void 0!==U?U:e.scale)&&void 0!==N?N:1,mount:null!==(B=e.mount)&&void 0!==B?B:0,mountX:null!==(j=null!==(F=e.mountX)&&void 0!==F?F:e.mount)&&void 0!==j?j:0,mountY:null!==(z=null!==($=e.mountY)&&void 0!==$?$:e.mount)&&void 0!==z?z:0,pivot:null!==(G=e.pivot)&&void 0!==G?G:.5,pivotX:null!==(V=null!==(H=e.pivotX)&&void 0!==H?H:e.pivot)&&void 0!==V?V:.5,pivotY:null!==(q=null!==(X=e.pivotY)&&void 0!==X?X:e.pivot)&&void 0!==q?q:.5,rotation:null!==(W=e.rotation)&&void 0!==W?W:0,rtt:null!==(K=e.rtt)&&void 0!==K&&K,data:oe,preventCleanup:null!==(Y=e.preventCleanup)&&void 0!==Y&&Y,imageType:e.imageType,strictBounds:null!==(Q=e.strictBounds)&&void 0!==Q?Q:this.strictBounds}}cleanup(e){this.txMemManager.cleanup(e)}}class Xt extends de{constructor(t,n){var o,i,r,s,a,l,u,c,p,d,h,f;super(),e(this,"root",void 0),e(this,"canvas",void 0),e(this,"settings",void 0),e(this,"stage",void 0),e(this,"inspector",null);const m={criticalThreshold:(null===(o=t.textureMemory)||void 0===o?void 0:o.criticalThreshold)||124e6,targetThresholdLevel:(null===(i=t.textureMemory)||void 0===i?void 0:i.targetThresholdLevel)||.5,cleanupInterval:(null===(r=t.textureMemory)||void 0===r?void 0:r.cleanupInterval)||5e3,debugLogging:(null===(s=t.textureMemory)||void 0===s?void 0:s.debugLogging)||!1,baselineMemoryAllocation:(null===(a=t.textureMemory)||void 0===a?void 0:a.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:(null===(l=t.textureMemory)||void 0===l?void 0:l.doNotExceedCriticalThreshold)||!1},g={appWidth:t.appWidth||1920,appHeight:t.appHeight||1080,textureMemory:m,boundsMargin:t.boundsMargin||0,deviceLogicalPixelRatio:t.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:t.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(u=t.clearColor)&&void 0!==u?u:0,fpsUpdateInterval:t.fpsUpdateInterval||0,numImageWorkers:void 0!==t.numImageWorkers?t.numImageWorkers:2,enableContextSpy:null!==(c=t.enableContextSpy)&&void 0!==c&&c,forceWebGL2:null!==(p=t.forceWebGL2)&&void 0!==p&&p,inspector:null!==(d=t.inspector)&&void 0!==d&&d,renderEngine:t.renderEngine,quadBufferSize:null!==(h=t.quadBufferSize)&&void 0!==h?h:4194304,fontEngines:t.fontEngines,strictBounds:null===(f=t.strictBounds)||void 0===f||f,textureProcessingTimeLimit:t.textureProcessingTimeLimit||10,canvas:t.canvas||document.createElement("canvas"),createImageBitmapSupport:t.createImageBitmapSupport||"full"};this.settings=g;const{appWidth:y,appHeight:v,deviceLogicalPixelRatio:b,devicePhysicalPixelRatio:x,inspector:w,canvas:S}=g,T=y*b,k=v*b;let C;if(this.canvas=S,S.width=T*x,S.height=k*x,S.style.width=`${T}px`,S.style.height=`${k}px`,this.stage=new qt({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:m,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:null!==this.settings.inspector,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit,createImageBitmapSupport:this.settings.createImageBitmapSupport}),this.root=this.stage.root,C="string"==typeof n?document.getElementById(n):n,!C)throw new Error("Could not find target element");C.appendChild(S),w&&!ce()&&(this.inspector=new w(S,g))}createNode(e){const t=this.stage.createNode(e);return this.inspector?this.inspector.createNode(t):t}createTextNode(e){const t=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(t):t}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}createTexture(e,t){return this.stage.txManager.createTexture(e,t)}createShader(e,t){return this.stage.shManager.loadShader(e,t)}createDynamicShader(e){return this.stage.shManager.loadDynamicShader({effects:e})}createEffect(e,t,n){return{name:n,type:e,props:t}}getNodeById(e){var t;const n=null===(t=this.stage)||void 0===t?void 0:t.root;if(!n)return null;const o=t=>{if(t.id===e)return t;for(const e of t.children){const t=o(e);if(t)return t}return null};return o(n)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}cleanup(e=!1){this.stage.cleanup(e)}setClearColor(e){this.stage.setClearColor(e)}}class Wt extends de{constructor(t){super(),e(this,"fontFamily",void 0),e(this,"descriptors",void 0),e(this,"loaded",!1),e(this,"metrics",null);const{fontFamily:n,descriptors:o,metrics:i}=t;i&&(this.metrics={ascender:i.ascender/i.unitsPerEm,descender:i.descender/i.unitsPerEm,lineGap:i.lineGap/i.unitsPerEm}),this.fontFamily=n,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...o}}static convertToCssFontFaceDescriptors(e){return{style:e.style,weight:"number"==typeof e.weight?`${e.weight}`:e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}class Kt extends Wt{constructor(t){super(t),e(this,"fontFace",void 0),e(this,"fontUrl",void 0);const{fontFamily:n,fontUrl:o}=t,i=o.replace(/\(|\)/g,""),r=this.descriptors;let s={style:r.style,weight:"number"==typeof r.weight?`${r.weight}`:r.weight,stretch:r.stretch,unicodeRange:r.unicodeRange,featureSettings:r.featureSettings,display:r.display};for(const e in s){const t=e;void 0===s[t]&&delete s[t]}const a=new FontFace(n,`url(${i})`,s);i.length>0?a.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=a,this.fontUrl=o}}class Yt{}class Qt extends Yt{constructor(t,n,o,i,r,s,a,l,u,c,p,d,h){super(),e(this,"glw",void 0),e(this,"options",void 0),e(this,"buffers",void 0),e(this,"shader",void 0),e(this,"shaderProps",void 0),e(this,"alpha",void 0),e(this,"clippingRect",void 0),e(this,"dimensions",void 0),e(this,"bufferIdx",void 0),e(this,"zIndex",void 0),e(this,"renderToTexture",void 0),e(this,"parentHasRenderTexture",void 0),e(this,"framebufferDimensions",void 0),e(this,"length",0),e(this,"numQuads",0),e(this,"textures",[]),e(this,"maxTextures",void 0),this.glw=t,this.options=n,this.buffers=o,this.shader=i,this.shaderProps=r,this.alpha=s,this.clippingRect=a,this.dimensions=l,this.bufferIdx=u,this.zIndex=c,this.renderToTexture=p,this.parentHasRenderTexture=d,this.framebufferDimensions=h,this.maxTextures=i.supportsIndexedTextures?t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:t,maxTextures:n}=this;let o=-1;const i=t.length;for(let r=0;r<i;r++){if(t[r]===e){o=r;break}}return-1!==o?o:i>=n?4294967295:(this.textures.push(e),i)}draw(){const{glw:e,shader:t,shaderProps:n,options:o}=this,{shManager:i}=o;i.useShader(t),t.bindRenderOp(this,n);const r=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:t,y:n,width:i,height:r}=this.clippingRect,s=this.parentHasRenderTexture?1:o.pixelRatio,a=o.canvas.height,l=Math.round(t*s),u=Math.round(i*s),c=Math.round(r*s);let p=Math.round(a-c-n*s);this.parentHasRenderTexture&&(p=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),e.setScissorTest(!0),e.scissor(l,p,u,c)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,r)}}function Jt(e){const t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(n=>{t[n]=e.getParameter(e[n])}),t}function Zt(e){const t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(n=>{t[n]=e.getExtension(n)}),t}const en=new Uint8Array([0,0,0,0]);class tn extends Gt{constructor(t,n,o){super(n,o),e(this,"glw",void 0),e(this,"_nativeCtxTexture",null),e(this,"_w",0),e(this,"_h",0),this.glw=t}get ctxTexture(){return"freed"===this.state?(this.load(),null):(ie(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}load(){if("loading"!==this.state&&"loaded"!==this.state){if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),null===this._nativeCtxTexture)return this.state="failed",this.textureSource.setState("failed",new Error("Could not create WebGL Texture")),void console.error("Could not create WebGL Texture");this.onLoadRequest().then(({width:e,height:t})=>{"freed"!==this.state&&(this.state="loaded",this._w=e,this._h=t,this.textureSource.setState("loaded",{width:e,height:t}),this.textureSource.freeTextureData())}).catch(e=>{"freed"!==this.state&&(this.state="failed",this.textureSource.setState("failed",e),this.textureSource.freeTextureData(),console.error(e))})}}async onLoadRequest(){const{glw:e}=this,t=this.textureSource.textureData;if(null===t||null===this._nativeCtxTexture)throw new Error("Texture data or native texture is null "+this.textureSource.type);e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(en.byteLength);let n=0,o=0;e.activeTexture(0);const i=t.data,r=e.RGBA;if("undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap||i instanceof ImageData||null!==(a=i)&&("object"==typeof a&&a.constructor&&"HTMLImageElement"===a.constructor.name||"undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement))n=i.width,o=i.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!t.premultiplyAlpha),e.texImage2D(0,r,r,e.UNSIGNED_BYTE,i),this.setTextureMemUse(o*n*4*1.1);else if(null===i)n=0,o=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,r,1,1,0,r,e.UNSIGNED_BYTE,en),this.setTextureMemUse(en.byteLength);else if("mipmaps"in i&&i.mipmaps){var s;const{mipmaps:t,width:n=0,height:o=0,type:r,glInternalFormat:a}=i,l="ktx"===r?new DataView(null!==(s=t[0])&&void 0!==s?s:new ArrayBuffer(0)):t[0];e.bindTexture(this._nativeCtxTexture),e.compressedTexImage2D(0,a,n,o,0,l),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),this.setTextureMemUse(l.byteLength)}else i&&i instanceof Uint8Array?(n=1,o=1,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!t.premultiplyAlpha),e.texImage2D(0,r,n,o,0,r,e.UNSIGNED_BYTE,i),this.setTextureMemUse(n*o*4)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",t);var a;return{width:n,height:o}}free(){"freed"!==this.state&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,null!==this._nativeCtxTexture&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}createNativeCtxTexture(){const{glw:e}=this,t=e.createTexture();return t?(e.activeTexture(0),e.bindTexture(t),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t):null}}class nn extends tn{constructor(e,t,n){super(e,t,n)}async onLoadRequest(){var e,t;const n=this.textureSource.textureData;return ie(n,"SubTexture must have texture data"),n.data instanceof Uint8Array?{width:1,height:1}:{width:(null===(e=n.data)||void 0===e?void 0:e.width)||0,height:(null===(t=n.data)||void 0===t?void 0:t.height)||0}}}class on{constructor(t){e(this,"config",void 0),this.config=t}getBuffer(e){var t;return null===(t=this.config.find(t=>t.attributes[e]))||void 0===t?void 0:t.buffer}getAttributeInfo(e){var t;return null===(t=this.config.find(t=>t.attributes[e]))||void 0===t?void 0:t.attributes[e]}}class rn{constructor(t){e(this,"gl",void 0),e(this,"activeTextureUnit",0),e(this,"texture2dUnits",void 0),e(this,"texture2dParams",new WeakMap),e(this,"scissorEnabled",void 0),e(this,"scissorX",void 0),e(this,"scissorY",void 0),e(this,"scissorWidth",void 0),e(this,"scissorHeight",void 0),e(this,"blendEnabled",void 0),e(this,"blendSrcRgb",void 0),e(this,"blendDstRgb",void 0),e(this,"blendSrcAlpha",void 0),e(this,"blendDstAlpha",void 0),e(this,"boundArrayBuffer",void 0),e(this,"boundElementArrayBuffer",void 0),e(this,"curProgram",void 0),e(this,"canvas",void 0),e(this,"MAX_RENDERBUFFER_SIZE",void 0),e(this,"MAX_TEXTURE_SIZE",void 0),e(this,"MAX_VIEWPORT_DIMS",void 0),e(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS",void 0),e(this,"MAX_TEXTURE_IMAGE_UNITS",void 0),e(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS",void 0),e(this,"MAX_VERTEX_ATTRIBS",void 0),e(this,"MAX_VARYING_VECTORS",void 0),e(this,"MAX_VERTEX_UNIFORM_VECTORS",void 0),e(this,"MAX_FRAGMENT_UNIFORM_VECTORS",void 0),e(this,"TEXTURE_MAG_FILTER",void 0),e(this,"TEXTURE_MIN_FILTER",void 0),e(this,"TEXTURE_WRAP_S",void 0),e(this,"TEXTURE_WRAP_T",void 0),e(this,"LINEAR",void 0),e(this,"CLAMP_TO_EDGE",void 0),e(this,"RGB",void 0),e(this,"RGBA",void 0),e(this,"UNSIGNED_BYTE",void 0),e(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL",void 0),e(this,"UNPACK_FLIP_Y_WEBGL",void 0),e(this,"FLOAT",void 0),e(this,"TRIANGLES",void 0),e(this,"UNSIGNED_SHORT",void 0),e(this,"ONE",void 0),e(this,"ONE_MINUS_SRC_ALPHA",void 0),e(this,"VERTEX_SHADER",void 0),e(this,"FRAGMENT_SHADER",void 0),e(this,"STATIC_DRAW",void 0),e(this,"COMPILE_STATUS",void 0),e(this,"LINK_STATUS",void 0),e(this,"DYNAMIC_DRAW",void 0),e(this,"COLOR_ATTACHMENT0",void 0),e(this,"INVALID_ENUM",void 0),e(this,"INVALID_OPERATION",void 0),this.gl=t,this.activeTextureUnit=t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0;const n=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(n).fill(void 0).map((e,n)=>(this.activeTexture(n),t.getParameter(t.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=t.isEnabled(t.SCISSOR_TEST);const o=t.getParameter(t.SCISSOR_BOX);this.scissorX=o[0],this.scissorY=o[1],this.scissorWidth=o[2],this.scissorHeight=o[3],this.blendEnabled=t.isEnabled(t.BLEND),this.blendSrcRgb=t.getParameter(t.BLEND_SRC_RGB),this.blendDstRgb=t.getParameter(t.BLEND_DST_RGB),this.blendSrcAlpha=t.getParameter(t.BLEND_SRC_ALPHA),this.blendDstAlpha=t.getParameter(t.BLEND_DST_ALPHA),this.boundArrayBuffer=t.getParameter(t.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=t.getParameter(t.CURRENT_PROGRAM),this.canvas=t.canvas,this.MAX_RENDERBUFFER_SIZE=t.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=t.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=t.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=t.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=t.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=t.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=t.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=t.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=t.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=t.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=t.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=t.TEXTURE_WRAP_T,this.LINEAR=t.LINEAR,this.CLAMP_TO_EDGE=t.CLAMP_TO_EDGE,this.RGB=t.RGB,this.RGBA=t.RGBA,this.UNSIGNED_BYTE=t.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=t.UNPACK_FLIP_Y_WEBGL,this.FLOAT=t.FLOAT,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.ONE=t.ONE,this.ONE_MINUS_SRC_ALPHA=t.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.VERTEX_SHADER=t.VERTEX_SHADER,this.FRAGMENT_SHADER=t.FRAGMENT_SHADER,this.STATIC_DRAW=t.STATIC_DRAW,this.COMPILE_STATUS=t.COMPILE_STATUS,this.LINK_STATUS=t.LINK_STATUS,this.DYNAMIC_DRAW=t.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=t.COLOR_ATTACHMENT0,this.INVALID_ENUM=t.INVALID_ENUM,this.INVALID_OPERATION=t.INVALID_OPERATION}isWebGl2(){return e=this.gl,self.WebGL2RenderingContext&&e instanceof self.WebGL2RenderingContext;var e}activeTexture(e){const{gl:t}=this;this.activeTextureUnit!==e&&(t.activeTexture(e+t.TEXTURE0),this.activeTextureUnit=e)}bindTexture(e){const{gl:t,activeTextureUnit:n,texture2dUnits:o}=this;o[n]!==e&&(o[n]=e,t.bindTexture(this.gl.TEXTURE_2D,e))}_getActiveTexture(){const{activeTextureUnit:e,texture2dUnits:t}=this;return t[e]}texParameteri(e,t){const{gl:n,texture2dParams:o}=this,i=this._getActiveTexture();if(!i)throw new Error("No active texture");let r=o.get(i);r||(r={},o.set(i,r)),r[e]!==t&&(r[e]=t,n.texParameteri(n.TEXTURE_2D,e,t))}texImage2D(e,t,n,o,i,r,s,a){const{gl:l}=this;r?l.texImage2D(l.TEXTURE_2D,e,t,n,o,i,r,s,a):l.texImage2D(l.TEXTURE_2D,e,t,n,o,i)}compressedTexImage2D(e,t,n,o,i,r){const{gl:s}=this;s.compressedTexImage2D(s.TEXTURE_2D,e,t,n,o,i,r)}pixelStorei(e,t){const{gl:n}=this;n.pixelStorei(e,t)}generateMipmap(){const{gl:e}=this;e.generateMipmap(e.TEXTURE_2D)}createTexture(){const{gl:e}=this;return e.createTexture()}deleteTexture(e){const{gl:t}=this;e&&this.texture2dParams.delete(e),t.deleteTexture(e)}deleteFramebuffer(e){this.gl.deleteFramebuffer(e)}viewport(e,t,n,o){const{gl:i}=this;i.viewport(e,t,n,o)}clearColor(e,t,n,o){const{gl:i}=this;i.clearColor(e,t,n,o)}setScissorTest(e){const{gl:t,scissorEnabled:n}=this;e!==n&&(e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.scissorEnabled=e)}scissor(e,t,n,o){const{gl:i,scissorX:r,scissorY:s,scissorWidth:a,scissorHeight:l}=this;e===r&&t===s&&n===a&&o===l||(i.scissor(e,t,n,o),this.scissorX=e,this.scissorY=t,this.scissorWidth=n,this.scissorHeight=o)}setBlend(e){const{gl:t,blendEnabled:n}=this;e!==n&&(e?t.enable(t.BLEND):t.disable(t.BLEND),this.blendEnabled=e)}blendFunc(e,t){const{gl:n,blendSrcRgb:o,blendDstRgb:i,blendSrcAlpha:r,blendDstAlpha:s}=this;e===o&&t===i&&e===r&&t===s||(n.blendFunc(e,t),this.blendSrcRgb=e,this.blendDstRgb=t,this.blendSrcAlpha=e,this.blendDstAlpha=t)}createBuffer(){const{gl:e}=this;return e.createBuffer()}createFramebuffer(){const{gl:e}=this;return e.createFramebuffer()}bindFramebuffer(e){const{gl:t}=this;t.bindFramebuffer(t.FRAMEBUFFER,e)}framebufferTexture2D(e,t,n){const{gl:o}=this;o.framebufferTexture2D(o.FRAMEBUFFER,e,o.TEXTURE_2D,t,n)}clear(){const{gl:e}=this;e.clear(e.COLOR_BUFFER_BIT)}arrayBufferData(e,t,n){const{gl:o,boundArrayBuffer:i}=this;i!==e&&(o.bindBuffer(o.ARRAY_BUFFER,e),this.boundArrayBuffer=e),o.bufferData(o.ARRAY_BUFFER,t,n)}elementArrayBufferData(e,t,n){const{gl:o,boundElementArrayBuffer:i}=this;i!==e&&(o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e),this.boundElementArrayBuffer=e),o.bufferData(o.ELEMENT_ARRAY_BUFFER,t,n)}vertexAttribPointer(e,t,n,o,i,r,s){const{gl:a,boundArrayBuffer:l}=this;l!==e&&(a.bindBuffer(a.ARRAY_BUFFER,e),this.boundArrayBuffer=e),a.vertexAttribPointer(t,n,o,i,r,s)}useProgram(e){const{gl:t,curProgram:n}=this;n!==e&&(t.useProgram(e),this.curProgram=e)}uniform1f(e,t){const{gl:n}=this;n.uniform1f(e,t)}uniform1fv(e,t){const{gl:n}=this;n.uniform1fv(e,t)}uniform1i(e,t){const{gl:n}=this;n.uniform1i(e,t)}uniform1iv(e,t){const{gl:n}=this;n.uniform1iv(e,t)}uniform2f(e,t,n){const{gl:o}=this;o.uniform2f(e,t,n)}uniform2fv(e,t){const{gl:n}=this;n.uniform2fv(e,t)}uniform2i(e,t,n){const{gl:o}=this;o.uniform2i(e,t,n)}uniform2iv(e,t){const{gl:n}=this;n.uniform2iv(e,t)}uniform3f(e,t,n,o){const{gl:i}=this;i.uniform3f(e,t,n,o)}uniform3fv(e,t){const{gl:n}=this;n.uniform3fv(e,t)}uniform3i(e,t,n,o){const{gl:i}=this;i.uniform3i(e,t,n,o)}uniform3iv(e,t){const{gl:n}=this;n.uniform3iv(e,t)}uniform4f(e,t,n,o,i){const{gl:r}=this;r.uniform4f(e,t,n,o,i)}uniform4fv(e,t){const{gl:n}=this;n.uniform4fv(e,t)}uniform4i(e,t,n,o,i){const{gl:r}=this;r.uniform4i(e,t,n,o,i)}uniform4iv(e,t){const{gl:n}=this;n.uniform4iv(e,t)}uniformMatrix2fv(e,t){const{gl:n}=this;n.uniformMatrix2fv(e,!1,t)}uniformMatrix3fv(e,t){const{gl:n}=this;n.uniformMatrix3fv(e,!1,t)}uniformMatrix4fv(e,t){const{gl:n}=this;n.uniformMatrix4fv(e,!1,t)}getParameter(e){const{gl:t}=this;return t.getParameter(e)}drawElements(e,t,n,o){const{gl:i}=this;i.drawElements(e,t,n,o)}getExtension(e){const{gl:t}=this;return t.getExtension(e)}getError(){const{gl:e}=this;return e.getError()}createVertexArray(){const{gl:e}=this;return ie(e instanceof WebGL2RenderingContext),e.createVertexArray()}bindVertexArray(e){const{gl:t}=this;ie(t instanceof WebGL2RenderingContext),t.bindVertexArray(e)}getAttribLocation(e,t){const{gl:n}=this;return n.getAttribLocation(e,t)}getUniformLocation(e,t){const{gl:n}=this;return n.getUniformLocation(e,t)}enableVertexAttribArray(e){const{gl:t}=this;t.enableVertexAttribArray(e)}disableVertexAttribArray(e){const{gl:t}=this;t.disableVertexAttribArray(e)}createShader(e){const{gl:t}=this;return t.createShader(e)}compileShader(e){const{gl:t}=this;t.compileShader(e)}attachShader(e,t){const{gl:n}=this;n.attachShader(e,t)}linkProgram(e){const{gl:t}=this;t.linkProgram(e)}deleteProgram(e){const{gl:t}=this;t.deleteProgram(e)}getShaderParameter(e,t){const{gl:n}=this;return n.getShaderParameter(e,t)}getShaderInfoLog(e){const{gl:t}=this;return t.getShaderInfoLog(e)}createProgram(){const{gl:e}=this;return e.createProgram()}getProgramParameter(e,t){const{gl:n}=this;return n.getProgramParameter(e,t)}getProgramInfoLog(e){const{gl:t}=this;return t.getProgramInfoLog(e)}shaderSource(e,t){const{gl:n}=this;n.shaderSource(e,t)}deleteShader(e){const{gl:t}=this;t.deleteShader(e)}}class sn extends tn{constructor(t,n,o){super(t,n,o),e(this,"framebuffer",null)}async onLoadRequest(){const{glw:e}=this,t=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:n,height:o}=this.textureSource;return this.framebuffer=e.createFramebuffer(),e.texImage2D(0,e.RGBA,n,o,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(n*o*4),e.bindFramebuffer(this.framebuffer),e.framebufferTexture2D(e.COLOR_ATTACHMENT0,t,0),e.bindFramebuffer(null),{width:n,height:o}}free(){super.free(),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}class an extends Vt{constructor(t){super(t),e(this,"glw",void 0),e(this,"system",void 0),e(this,"quadBuffer",void 0),e(this,"fQuadBuffer",void 0),e(this,"uiQuadBuffer",void 0),e(this,"renderOps",[]),e(this,"curBufferIdx",0),e(this,"curRenderOp",null),e(this,"rttNodes",[]),e(this,"activeRttNode",null),e(this,"defShaderCtrl",void 0),e(this,"defaultShader",void 0),e(this,"quadBufferCollection",void 0),e(this,"clearColor",{raw:0,normalized:[0,0,0,0]}),e(this,"quadBufferUsage",0),e(this,"numQuadsRendered",0),e(this,"renderToTextureActive",!1),this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:n,clearColor:o,bufferMemory:i}=t,r=function(e,t=!1,n){const o={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},i=e.getContext(t?"webgl2":"webgl",o)||e.getContext("experimental-webgl",o);if(!i)throw new Error("Unable to create WebGL context");return n?new Proxy(i,{get(e,t){const o=e[t];return"function"==typeof o?(n.increment(String(t)),o.bind(e)):o}}):i}(n,t.forceWebGL2,t.contextSpy),s=this.glw=new rn(r);s.viewport(0,0,n.width,n.height),this.updateClearColor(o),s.setBlend(!0),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),function(e,t){const n=~~(t/80),o=new Uint16Array(6*n);for(let r=0,s=0;r<n;r+=6,s+=4)o[r]=s,o[r+1]=s+1,o[r+2]=s+2,o[r+3]=s+2,o[r+4]=s+1,o[r+5]=s+3;const i=e.createBuffer();e.elementArrayBufferData(i,o,e.STATIC_DRAW)}(s,i),this.system={parameters:Jt(this.glw),extensions:Zt(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const a=s.createBuffer();ie(a);const l=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new on([{buffer:a,attributes:{a_position:{name:"a_position",size:2,type:s.FLOAT,normalized:!1,stride:l,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:s.FLOAT,normalized:!1,stride:l,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:s.UNSIGNED_BYTE,normalized:!0,stride:l,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:s.FLOAT,normalized:!1,stride:l,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof et?new nn(this.glw,this.txMemManager,e):e instanceof tt?new sn(this.glw,this.txMemManager,e):new tn(this.glw,this.txMemManager,e)}addQuad(e){const{fQuadBuffer:t,uiQuadBuffer:n}=this;let o=e.texture;if(ie(null!==o,"Texture is required"),null!==e.shaderProps){if(1==ue(e.shaderProps,"$dimensions")){const t=e.shaderProps.$dimensions;t.width=e.width,t.height=e.height}!0===ue(e.shaderProps,"$alpha")&&(e.shaderProps.$alpha=e.alpha)}let{curBufferIdx:i,curRenderOp:r}=this;const s={width:-1,height:-1};s.width=e.width,s.height=e.height;const a=e.shader||this.defaultShader;ie(void 0!==a.getUniformLocation,"Invalid WebGL shader"),!1===this.reuseRenderOp(e)&&(this.newRenderOp(a,e.shaderProps,e.alpha,s,e.clippingRect,i,e.rtt,e.parentHasRenderTexture,e.framebufferDimensions),r=this.curRenderOp,ie(r));let l=0,u=0,c=1,p=1;if(o.type===he.subTexture){const{x:e,y:t,width:n,height:i}=o.props,{width:r=0,height:s=0}=o.parentTexture.dimensions||{width:0,height:0};l=e/r,c=l+n/r,u=t/s,p=u+i/s,o=o.parentTexture}if(o.type===he.image&&null!==e.textureOptions&&void 0!==e.textureOptions.resizeMode&&null!==o.dimensions){const t=e.textureOptions.resizeMode,{width:n,height:i}=o.dimensions;if("cover"===t.type){const o=e.width/n,r=e.height/i,s=Math.max(o,r),a=1/s;if(s&&o&&o<s){var d;const o=a*e.width;l=(1-o/n)*(null!==(d=t.clipX)&&void 0!==d?d:.5),c=l+o/n}if(s&&r&&r<s){var h;const n=a*e.height;u=(1-n/i)*(null!==(h=t.clipY)&&void 0!==h?h:.5),p=u+n/i}}}let f=0;null!==e.textureOptions&&(!0===e.textureOptions.flipX&&([l,c]=[c,l]),f=+(e.textureOptions.flipY||!1)),f^+(o.type===he.renderToTexture)&&([u,p]=[p,u]);const m=o.ctxTexture;ie(m instanceof tn);const g=this.addTexture(m,i);if(ie(null!==this.curRenderOp),e.renderCoords)t[i++]=e.renderCoords.x1,t[i++]=e.renderCoords.y1,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=g,t[i++]=e.renderCoords.x2,t[i++]=e.renderCoords.y2,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=g,t[i++]=e.renderCoords.x4,t[i++]=e.renderCoords.y4,t[i++]=l,t[i++]=p,n[i++]=e.colorBl,t[i++]=g,t[i++]=e.renderCoords.x3,t[i++]=e.renderCoords.y3,t[i++]=c,t[i++]=p,n[i++]=e.colorBr,t[i++]=g;else if(0!==e.tb||0!==e.tc)t[i++]=e.tx,t[i++]=e.ty,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=g,t[i++]=e.tx+e.width*e.ta,t[i++]=e.ty+e.width*e.tc,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=g,t[i++]=e.tx+e.height*e.tb,t[i++]=e.ty+e.height*e.td,t[i++]=l,t[i++]=p,n[i++]=e.colorBl,t[i++]=g,t[i++]=e.tx+e.width*e.ta+e.height*e.tb,t[i++]=e.ty+e.width*e.tc+e.height*e.td,t[i++]=c,t[i++]=p,n[i++]=e.colorBr,t[i++]=g;else{const o=e.tx+e.width*e.ta,r=e.ty+e.height*e.td;t[i++]=e.tx,t[i++]=e.ty,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=g,t[i++]=o,t[i++]=e.ty,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=g,t[i++]=e.tx,t[i++]=r,t[i++]=l,t[i++]=p,n[i++]=e.colorBl,t[i++]=g,t[i++]=o,t[i++]=r,t[i++]=c,t[i++]=p,n[i++]=e.colorBr,t[i++]=g}this.curRenderOp.length+=24,this.curRenderOp.numQuads++,this.curBufferIdx=i}newRenderOp(e,t,n,o,i,r,s,a,l){const u=new Qt(this.glw,this.options,this.quadBufferCollection,e,t,n,i,o,r,0,s,a,l);this.curRenderOp=u,this.renderOps.push(u)}addTexture(e,t,n){const{curRenderOp:o}=this;ie(o);const i=o.addTexture(e);if(4294967295===i){if(n)throw new Error("Unable to add texture to render op");return this.newRenderOp(o.shader,o.shaderProps,o.alpha,o.dimensions,o.clippingRect,t),this.addTexture(e,t,!0)}return i}reuseRenderOp(e){var t;const{shader:n,shaderProps:o,parentHasRenderTexture:i,rtt:r,clippingRect:s}=e,a=n||this.defaultShader;return(null===(t=this.curRenderOp)||void 0===t?void 0:t.shader)===a&&(!1!=((l=this.curRenderOp.clippingRect)===(u=s)||null!==l&&null!==u&&l.x===u.x&&l.y===u.y&&l.width===u.width&&l.height===u.height)&&(void 0===i&&void 0===r&&(this.curRenderOp.shader===this.defaultShader||null!==o&&!1!==this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,o))));var l,u}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){const{glw:t,quadBuffer:n}=this,o=new Float32Array(n,0,this.curBufferIdx),i=this.quadBufferCollection.getBuffer("a_position")||null;t.arrayBufferData(i,o,t.STATIC_DRAW);for(let s=0,a=this.renderOps.length;s<a;s++)this.renderOps[s].draw();this.quadBufferUsage=this.curBufferIdx*o.BYTES_PER_ELEMENT;const r=6*o.BYTES_PER_ELEMENT*4;this.numQuadsRendered=this.quadBufferUsage/r}getQuadCount(){return this.numQuadsRendered}renderToTexture(e){for(let t=0;t<this.rttNodes.length;t++)if(this.rttNodes[t]===e)return;this.insertRTTNodeInOrder(e)}insertRTTNodeInOrder(e){let t=this.rttNodes.length,n=e;for(;n&&n.parent;){const e=this.rttNodes.indexOf(n.parent);if(-1!==e){t=e;break}n=n.parent}const o=this.findMaxChildRTTIndex(e);-1!==o&&(t=Math.max(t,o+1)),this.rttNodes.splice(t,0,e)}findMaxChildRTTIndex(e){let t=-1;const n=e=>{const o=this.rttNodes.indexOf(e);-1!==o&&(t=Math.max(t,o));for(const t of e.children)n(t)};return n(e),t}renderRTTNodes(){const{glw:e}=this,{txManager:t}=this.stage;for(let o=0;o<this.rttNodes.length;o++){const t=this.rttNodes[o];if(void 0===t||!1===t.hasRTTupdates)continue;if(0===t.worldAlpha||!0===t.strictBounds&&t.renderState===Be.OutOfBounds)continue;if(null===t.texture||"loaded"!==t.texture.state)continue;this.activeRttNode=t,ie(t.texture,"RTT node missing texture");const n=t.texture.ctxTexture;ie(n instanceof sn),this.renderToTextureActive=!0,e.bindFramebuffer(n.framebuffer),e.viewport(0,0,n.w,n.h),e.clearColor(0,0,0,0),e.clear();for(let e=0;e<t.children.length;e++){const n=t.children[e];void 0!==n&&(this.stage.addQuads(n),n.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,t.hasRTTupdates=!1}const n=this.clearColor.normalized;e.clearColor(n[0],n[1],n[2],n[3]),e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(e){const t=this.rttNodes.indexOf(e);-1!==t&&this.rttNodes.splice(t,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(e){if(this.clearColor.raw===e)return;const t=this.glw,n=ge(e);t.clearColor(n[0],n[1],n[2],n[3]),this.clearColor={raw:e,normalized:n},t.clear()}}const ln=10;class un{}class cn extends un{constructor(t,n){super(),e(this,"data",void 0),e(this,"glyphMap",void 0),e(this,"kernings",void 0),this.data=t,this.glyphMap=n;const o=this.kernings={};t.kernings.forEach(e=>{const t=e.second;(o[t]=o[t]||{})[e.first]=e.amount}),this.kernings=o}*shapeText(e,t){let n,o;for(;(n=t.peek())&&!n.done;){const r=n.value,s=this.glyphMap.get(r);if(t.next(),void 0!==s){var i;const n=void 0!==o?((null===(i=this.kernings[s.id])||void 0===i?void 0:i[o])||0)+e.letterSpacing:0;o=s.id,yield{mapped:!0,glyphId:s.id,codepoint:r,cluster:t.lastIndex,xAdvance:s.xadvance+n,yAdvance:0,xOffset:s.xoffset+n,yOffset:s.yoffset,xBearing:0,yBearing:0,width:s.width,height:s.height}}else r===ln&&(o=void 0),yield{mapped:!1,codepoint:r,cluster:t.lastIndex}}}}class pn extends Wt{constructor(t,n){super(n),e(this,"type",void 0),e(this,"texture",void 0),e(this,"maxCharHeight",0),e(this,"shaper",void 0),e(this,"glyphMap",new Map),e(this,"data",void 0);const{atlasUrl:o,atlasDataUrl:i,stage:r}=n;this.type=t;ie(r.renderer instanceof an,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=r.txManager.createTexture("ImageTexture",{src:o,premultiplyAlpha:!1}),r.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),r.requestRender()}),Qe(i).then(e=>{this.data=JSON.parse(e),ie(this.data);let t=0;if(this.data.chars.forEach(e=>{this.glyphMap.set(e.id,e);const n=e.yoffset+e.height;n>t&&(t=n)}),this.maxCharHeight=t,this.shaper=new cn(this.data,this.glyphMap),!this.metrics){var n;if(null===(n=this.data)||void 0===n||!n.lightningMetrics)throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);{const{ascender:e,descender:t,lineGap:n,unitsPerEm:o}=this.data.lightningMetrics;this.metrics={ascender:e/o,descender:t/o,lineGap:n/o}}}this.checkLoaded()}).catch(console.error)}getAtlasEntry(e){const t=this.glyphMap.get(e);if(void 0===t)throw new Error(`Glyph ${e} not found in font ${this.fontFamily}`);return{x:t.x,y:t.y,width:t.width,height:t.height}}checkLoaded(){this.loaded||"loaded"===this.texture.state&&this.data&&(this.loaded=!0,this.emit("loaded"))}}class dn{constructor(t,n=0){e(this,"iterator",void 0),e(this,"peekBuffer",[]),e(this,"_lastIndex",void 0),this.iterator=t,this.iterator=t,this._lastIndex=n-1,this.peekBuffer=[]}next(){const e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const e=this.iterator.next();return this.peekBuffer.push(e),e}get lastIndex(){return this._lastIndex}}function*hn(e,t=0){let n=t;for(;n<e.length;){const t=e.codePointAt(n);if(void 0===t)throw new Error("Invalid Unicode code point");yield t,n+=t<=65535?1:2}}function fn(e,t,n,o,i,r,s,a,l,u,c,p,d,h,f,m,g,y,v){ie(f,"Font face must be loaded"),ie(f.loaded,"Font face must be loaded"),ie(f.data,"Font face must be loaded"),ie(f.shaper,"Font face must be loaded");const b=a/f.data.info.size,x=l/b,w=r/b,S=u/b,T=d[e],k=(null==T?void 0:T.codepointIndex)||0;let C=(null==T?void 0:T.maxX)||0,A=(null==T?void 0:T.maxY)||0,E=t,I=n,M=0;const R={codepointIndex:-1,bufferOffset:-1,xStart:-1},_=f.shaper,L={letterSpacing:S};o.endsWith(" ")&&(o+=" ");let D,P=_.shapeText(L,new dn(hn(o,k),k)),O=-1;const N=[],U=s/b,B=function(e,t,n){const o=n.shapeText(t,new dn(hn(e,0),0));let i=0;for(const r of o)r.mapped&&8203!==r.codepoint&&(i+=r.xAdvance);return i}(y,L,_);let j=!0;for(;j;){const t=(0===v||e+1<v)&&("both"!==p||g||I+x+f.maxCharHeight<=U),n=t?w:w-B;let i=0;const r=I+f.maxCharHeight>=h.y1,s=I<=h.y2,a=r&&s;for(;(D=P.next())&&!D.done;){const r=D.value;if(e===d.length)d.push({codepointIndex:r.cluster,maxY:A,maxX:C});else if(e>d.length)throw new Error("Unexpected lineCache length");if(32===r.codepoint||10===r.codepoint||8203===r.codepoint?-1!==R.codepointIndex&&(R.codepointIndex=-1,i=E):-1===R.codepointIndex&&(R.codepointIndex=r.cluster,R.bufferOffset=M,R.xStart=i),r.mapped){const e=E+r.xOffset+r.width;if("none"!==p&&e>=n&&-1!==R.codepointIndex&&R.xStart>0){if(t){P=_.shapeText(L,new dn(hn(o,R.codepointIndex),R.codepointIndex)),M=R.bufferOffset;break}P=_.shapeText(L,new dn(hn(y,0),0)),E=R.xStart,M=R.bufferOffset,p="none"}else{const e=E+r.xOffset,t=I+r.yOffset;if(a){-1===O&&(O=M);const n=f.getAtlasEntry(r.glyphId),o=n.x/f.data.common.scaleW,i=n.y/f.data.common.scaleH,s=n.width/f.data.common.scaleW,a=n.height/f.data.common.scaleH;c[M++]=e,c[M++]=t,c[M++]=o,c[M++]=i,c[M++]=e+r.width,c[M++]=t,c[M++]=o+s,c[M++]=i,c[M++]=e,c[M++]=t+r.height,c[M++]=o,c[M++]=i+a,c[M++]=e+r.width,c[M++]=t+r.height,c[M++]=o+s,c[M++]=i+a}A=Math.max(A,t+r.height),C=Math.max(C,e+r.width),E+=r.xAdvance}}else if(10===r.codepoint){if(t)break;P=_.shapeText(L,new dn(hn(y,0),0)),p="none"}}-1!==O&&(N.push({bufferStart:O,bufferEnd:M}),O=-1),E=0,I+=x,e++,R.codepointIndex=-1,i=0,!m&&"both"===p&&I>h.y2||D&&D.done?j=!1:t||(j=!1)}if("center"===i){const e="none"===p?C:w;for(let t=0;t<N.length;t++){const n=N[t],o=(e-(c[n.bufferEnd-4]-c[n.bufferStart]))/2;for(let e=n.bufferStart;e<n.bufferEnd;e+=4)c[e]+=o}}else if("right"===i){const e="none"===p?C:w;for(let t=0;t<N.length;t++){const n=N[t],o=e-(n.bufferEnd===n.bufferStart?0:c[n.bufferEnd-4]-c[n.bufferStart]);for(let e=n.bufferStart;e<n.bufferEnd;e+=4)c[e]+=o}}return ie(D),{bufferNumFloats:M,bufferNumQuads:M/16,layoutNumCharacters:D.done?o.length-k:D.value.cluster-k+1,fullyProcessed:!!D.done,maxX:C,maxY:A,numLines:d.length}}function mn(e,t,n,o,i,r,s,a){const{screen:l,sdf:u}=e;if((d=s).x1<d.x2&&d.y1<d.y2){const d=s.x1-t,h=d+(s.x2-s.x1),f=s.y1-n+o,m=(c=f-r,p=i||1,Math.floor(c/p)*p),g=function(e,t){return Math.ceil(e/t)*t}(f+(s.y2-s.y1)+r,i||1);l.x1=d,l.y1=m,l.x2=h,l.y2=g,u.x1=d/a,u.y1=m/a,u.x2=h/a,u.y2=g/a,e.numLines=Math.ceil((g-m)/i),e.firstLineIdx=i?Math.floor(m/i):0}else l.x1=0,l.y1=0,l.x2=0,l.y2=0,u.x1=0,u.y1=0,u.x2=0,u.y2=0,e.numLines=0,e.firstLineIdx=0;var c,p,d;e.valid=!0}function gn(e,t){return t*(e.ascender-e.descender+e.lineGap)}const yn={x:0,y:0,width:0,height:0};class vn extends Ft{constructor(t){super(t),e(this,"ssdfFontFamilies",{}),e(this,"msdfFontFamilies",{}),e(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]),e(this,"sdfShader",void 0),e(this,"rendererBounds",void 0),e(this,"type","sdf"),this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&we(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,t)=>{e.props.y=t,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&we(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){const{fontFamily:t}=e;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}isFontFaceSupported(e){return e instanceof pn}addFontFace(e){ie(e instanceof pn);const t=e.fontFamily,n="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(!n)return void console.warn(`Invalid font face type: ${e.type}`);let o=n[t];o||(o=new Set,n[t]=o),o.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new de,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:t}=e;const{textH:n,lineCache:o,debugData:i,forceFullLayoutCalc:r}=e;if(i.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),void 0===t){if(t=this.resolveFontFace(e.props),e.trFontFace=t,void 0===t){const t=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;return console.error(t),void this.setStatus(e,"failed",new Error(t))}t.texture.setRenderableOwner(e,!0)}if(!1===t.loaded)return void t.once("loaded",()=>{this.scheduleUpdateState(e)});ie(t.data,"Font face data should be loaded"),ie(t.metrics,"Font face metrics should be loaded");const{text:s,fontSize:a,x:l,y:u,contain:c,width:p,height:d,verticalAlign:h,scrollable:f,overflowSuffix:m,maxLines:g}=e.props,y="both"===c&&f?e.props.scrollY:0,{renderWindow:v}=e,b=t.data.info.size,x=a/b;let w=e.resLineHeight;if(void 0===w){const n=e.props.lineHeight;w=void 0===n?gn(t.metrics,a):n,e.resLineHeight=w}const S=w/x;e.distanceRange=x*t.data.distanceField.distanceRange;const T=24*s.length;let k=e.vertexBuffer;(!k||k.length<T)&&(k=new Float32Array(2*T));const C=e.elementBounds;if(C.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),C.valid=!0),!r&&v.valid){const t=v.screen;if(l+t.x1<=C.x1&&l+t.x2>=C.x2&&u-y+t.y1<=C.y1&&u-y+t.y2>=C.y2)return void this.setStatus(e,"loaded");v.valid=!1,this.setStatus(e,"loading")}const{offsetY:A,textAlign:E}=e.props;if(!v.valid){if(!we(C,this.rendererBounds))return;mn(v,l,u,y,w,"both"===c?C.y2-C.y1:0,C,x)}const I=function(e,t,n,o,i,r,s,a,l){const u=Math.min(Math.max(s.firstLineIdx,0),a.length),{metrics:c}=n;ie(c,"Font metrics not loaded"),ie(n.data,"Font data not loaded");const p=(c.ascender-c.descender)*e;let d=0;"middle"===o?d=(t-p)/2:"bottom"===o&&(d=t-p);const h=i/r,f=n.data.common.base,m=h+(c.ascender*e-f)+u*t+d;if(!(l&&m>=l/r))return{sdfX:0,sdfY:m,lineIndex:u}}(b,S,t,h,A,x,v,o,n);if(!I)return void this.setStatus(e,"loaded");const{letterSpacing:M}=e.props,R=fn(I.lineIndex,I.sdfX,I.sdfY,s,E,p,d,a,w,M,k,c,o,v.sdf,t,r,f,m,g);e.bufferUploaded=!1,e.bufferNumFloats=R.bufferNumFloats,e.bufferNumQuads=R.bufferNumQuads,e.vertexBuffer=k,e.renderWindow=v,i.lastLayoutNumCharacters=R.layoutNumCharacters,i.bufferSize=k.byteLength,R.fullyProcessed&&(e.textW=R.maxX*x,e.textH=R.numLines*S*x),this.setStatus(e,"loaded")}renderQuads(e,t,n,o,i,r){var s,a;if(!e.vertexBuffer)return;const l=this.stage.renderer;ie(l instanceof an);const{fontSize:u,color:c,contain:p,scrollable:d,zIndex:h,debug:f}=e.props,m="both"===p&&d?e.props.scrollY:0,{textW:g=0,textH:y=0,distanceRange:v,vertexBuffer:b,bufferUploaded:x,trFontFace:w,elementBounds:S}=e;let{webGlBuffers:T}=e;if(!T){const t=l.glw,n=4*Float32Array.BYTES_PER_ELEMENT,o=t.createBuffer();ie(o),e.webGlBuffers=new on([{buffer:o,attributes:{a_position:{name:"a_position",size:2,type:t.FLOAT,normalized:!1,stride:n,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:t.FLOAT,normalized:!1,stride:n,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,ie(e.webGlBuffers),T=e.webGlBuffers}if(!x){var k,C;const t=l.glw,n=null!==(k=null===(C=T)||void 0===C?void 0:C.getBuffer("a_textureCoordinate"))&&void 0!==k?k:null;t.arrayBufferData(n,b,t.STATIC_DRAW),e.bufferUploaded=!0}if(ie(w),d&&"both"===p){ie(S.valid);const t=(A=S,(E=yn)?(E.x=A.x1,E.y=A.y1,E.width=A.x2-A.x1,E.height=A.y2-A.y1,E):{x:A.x1,y:A.y1,width:A.x2-A.x1,height:A.y2-A.y1});n.valid?(e.clippingRect.valid=!0,n=Se(n,t,e.clippingRect)):(e.clippingRect.valid=!0,n=Te(t,e.clippingRect))}var A,E;const I=new Qt(l.glw,l.options,T,this.sdfShader,{transform:t.getFloatArr(),color:se(c,o),size:u/((null===(s=w.data)||void 0===s?void 0:s.info.size)||0),scrollY:m,distanceRange:v,debug:f.sdfShaderDebug},o,n,{height:y,width:g},0,h,!1,i,r),M=null===(a=e.trFontFace)||void 0===a?void 0:a.texture;ie(M);const R=M.ctxTexture;I.addTexture(R),I.length=e.bufferNumFloats,I.numQuads=e.bufferNumQuads,l.addRenderOp(I)}setIsRenderable(e,t){var n;super.setIsRenderable(e,t),null===(n=e.trFontFace)||void 0===n||n.texture.setRenderableOwner(e,t)}destroyState(e){var t;super.destroyState(e),null===(t=e.trFontFace)||void 0===t||t.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,e,"sdf")}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:t,contain:n,width:o}=e.props,{elementBounds:i}=e;i.x1=t,i.x2="none"!==n?t+o:1/0}setElementBoundsY(e){const{y:t,contain:n,height:o}=e.props,{elementBounds:i}=e;i.y1=t,i.y2="both"===n?t+o:1/0}}function bn(e){return""===e||"​"===e}function xn(e,t,n,o,i){return n*(o-1)+("bottom"!==e?.5*t:0)+Math.max(n,t)+(i||0)}class wn{constructor(t,n){e(this,"_canvas",void 0),e(this,"_context",void 0),e(this,"_settings",void 0),this._canvas=t,this._context=n,this._settings=this.mergeDefaults({})}set settings(e){this._settings=this.mergeDefaults(e)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const e=[this._settings.fontFamily],t=[];for(let n=0,o=e.length;n<o;n++)"serif"===e[n]||"sans-serif"===e[n]?t.push(e[n]):t.push(`"${e[n]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${t.join(",")}`}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch(e){console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const e={},t=this.getPrecision(),n=this._settings.paddingLeft*t,o=this._settings.paddingRight*t,i=this._settings.fontSize*t;let r=null===this._settings.offsetY?null:this._settings.offsetY*t;const s=this._settings.w*t,a=this._settings.h*t;let l=this._settings.wordWrapWidth*t;const u=this._settings.cutSx*t,c=this._settings.cutEx*t,p=this._settings.cutSy*t,d=this._settings.cutEy*t,h=(this._settings.letterSpacing||0)*t,f=this._settings.textIndent*t,m=this._settings.trFontFace;this.setFontProperties(),ie(m);const g=function(e,t,n){if(t.metrics)return t.metrics;const o=e.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");let i;return console.warn(`Font metrics not provided for Canvas Web font ${t.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`),i=o.actualBoundingBoxDescent&&o.actualBoundingBoxAscent?{ascender:o.actualBoundingBoxAscent/n,descender:-o.actualBoundingBoxDescent/n,lineGap:.2}:{ascender:.8,descender:-.2,lineGap:.2},t.metrics=i,i}(this._context,m,i),y=gn(g,i)*t,v=null!==this._settings.lineHeight?this._settings.lineHeight*t:y,b=this._settings.maxHeight,x=null!==b&&v>0?Math.floor(b/v):0,w=this._settings.maxLines,S=x>0&&w>0?Math.min(x,w):Math.max(x,w);let T,k=s||2048/this.getPrecision(),C=k-n;if(C<10&&(k+=10-C,C=10),l||(l=C),this._settings.textOverflow&&!this._settings.wordWrap){let e;switch(this._settings.textOverflow){case"clip":e="";break;case"ellipsis":e=this._settings.overflowSuffix;break;default:e=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,l-f,e)}if(this._settings.wordWrap)T=this.wrapText(this._settings.text,l,h,f);else{T={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const e=T.l.length;for(let t=0;t<e-1;t++)T.n.push(t)}let A=T.l;if(S&&A.length>S){const t=A.slice(0,S);let n,o=null;if(this._settings.overflowSuffix){const e=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,n=this.wrapText(t[t.length-1],l-e,h,f);t[t.length-1]=`${n.l[0]}${this._settings.overflowSuffix}`,o=[n.l.length>1?n.l[1]:""]}else o=[""];const i=A.length;let r=0;const s=T.n.length;for(n=S;n<i;n++)o[r]+=`${o[r]?" ":""}${A[n]}`,n+1<s&&T.n[n+1]&&r++;e.remainingText=o.join("\n"),e.moreTextLines=!0,A=t}else e.moreTextLines=!1,e.remainingText="";let E=0;const I=[];for(let R=0;R<A.length;R++){const e=this.measureText(A[R],h)+(0===R?f:0);I.push(e),E=Math.max(E,e)}let M;return e.lineWidths=I,s||(k=E+n+o,C=E),this._settings.wordWrap&&s>E&&"left"===this._settings.textAlign&&1===A.length&&(k=E+n+o),M=a||xn(this._settings.textBaseline,i,v,A.length,r),null===r&&(r=i),e.w=k,e.h=M,e.lines=A,e.precision=t,k||(k=1),M||(M=1),(u||c)&&(k=Math.min(k,c-u)),(p||d)&&(M=Math.min(M,d-p)),e.width=k,e.innerWidth=C,e.height=M,e.fontSize=i,e.cutSx=u,e.cutSy=p,e.cutEx=c,e.cutEy=d,e.lineHeight=v,e.defLineHeight=y,e.lineWidths=I,e.offsetY=r,e.paddingLeft=n,e.paddingRight=o,e.letterSpacing=h,e.textIndent=f,e.metrics=g,e}draw(e,t){const n=this.getPrecision(),o=(null==t?void 0:t.lines)||e.lines,i=(null==t?void 0:t.lineWidths)||e.lineWidths,r=t?xn(this._settings.textBaseline,e.fontSize,e.lineHeight,t.lines.length,null===this._settings.offsetY?null:this._settings.offsetY*n):e.height;let s,a;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(r),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);const l=[],{metrics:u}=e,c=u?u.ascender*e.fontSize:e.fontSize,p=(u.ascender-u.descender)*e.fontSize;for(let h=0,f=o.length;h<f;h++)s=0===h?e.textIndent:0,a=h*e.lineHeight+c,"middle"==this._settings.verticalAlign?a+=(e.lineHeight-p)/2:"bottom"==this._settings.verticalAlign&&(a+=e.lineHeight-p),"right"===this._settings.textAlign?s+=e.innerWidth-i[h]:"center"===this._settings.textAlign&&(s+=(e.innerWidth-i[h])/2),s+=e.paddingLeft,l.push({text:o[h],x:s,y:a,w:i[h]});if(this._settings.highlight){const t=this._settings.highlightColor,o=this._settings.highlightHeight*n||1.5*e.fontSize,i=this._settings.highlightOffset*n,r=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*n:e.paddingLeft,s=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*n:e.paddingRight;this._context.fillStyle=be(t);for(let n=0;n<l.length;n++){const t=l[n];this._context.fillRect(t.x-r,t.y-e.offsetY+i,t.w+s+r,o)}}let d=null;this._settings.shadow&&(d=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=be(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*n,this._context.shadowOffsetY=this._settings.shadowOffsetY*n,this._context.shadowBlur=this._settings.shadowBlur*n),this._context.fillStyle=be(this._settings.textColor);for(let h=0,f=l.length;h<f;h++){const t=l[h];if(0===e.letterSpacing)this._context.fillText(t.text,t.x,t.y);else{const n=t.text.split("");let o=t.x;for(let i=0,r=n.length;i<r;i++)this._context.fillText(n[i],o,t.y),o+=this.measureText(n[i],e.letterSpacing)}}d&&(this._context.shadowColor=d[0],this._context.shadowOffsetX=d[1],this._context.shadowOffsetY=d[2],this._context.shadowBlur=d[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy)}wrapWord(e,t,n){const o=this._context.measureText(n).width,i=e.length,r=this._context.measureText(e).width;if(r<=t)return e;let s=Math.floor(t*i/r),a=this._context.measureText(e.substring(0,s)).width+o;if(a>t)for(;s>0&&(a=this._context.measureText(e.substring(0,s)).width+o,a>t);)s-=1;else for(;s<i;){if(a=this._context.measureText(e.substring(0,s)).width+o,!(a<t)){s-=1;break}s+=1}return e.substring(0,s)+(t>=o?n:"")}wrapText(e,t,n,o=0){const i=/ |\u200B/g,r=e.split(/\r?\n/g);let s=[];const a=[];for(let l=0;l<r.length;l++){const e=[];let u="",c=t-o;const p=r[l].split(i),d=r[l].match(i)||[];for(let i=0;i<p.length;i++){const r=d[i-1]||"",s=p[i],a=this.measureText(s,n),l=bn(r)?a:a+this.measureText(r,n);0===i||l>c?(i>0&&(e.push(u),u=""),u+=s,c=t-a-(0===i?o:0)):(c-=l,u+=r+s)}e.push(u),u="",s=s.concat(e),l<r.length-1&&a.push(s.length)}return{l:s,n:a}}measureText(e,t=0){return t?e.split("").reduce((e,n)=>bn(n)?e:e+this._context.measureText(n).width+t,0):this._context.measureText(e).width}mergeDefaults(e){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...e}}}const Sn="undefined"==typeof self?globalThis:self,Tn=(null===(r=Sn.document)||void 0===r?void 0:r.fonts)||Sn.fonts;class kn extends Ft{constructor(t){super(t),e(this,"canvas",void 0),e(this,"context",void 0),e(this,"fontFamilies",{}),e(this,"fontFamilyArray",[this.fontFamilies]),e(this,"type","canvas"),e(this,"loadFont",e=>{const t=function(e){const{fontFamily:t,fontStyle:n,fontWeight:o,fontStretch:i,fontSize:r}=e;return[n,o,i,`${r}px`,t].join(" ")}(e.props),n=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,e.props,"canvas");ie(n,`Could not resolve font face for ${t}`),e.fontInfo={fontFace:n,cssString:t,loaded:!1},e.fontInfo.loaded||Tn.load(t).then(this.onFontLoaded.bind(this,e,t)).catch(this.onFontLoadError.bind(this,e,t))}),"undefined"!=typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let n=this.canvas.getContext("2d",{willReadFrequently:!0});n||(this.canvas=document.createElement("canvas"),n=this.canvas.getContext("2d",{willReadFrequently:!0})),ie(n),this.context=n,this.addFontFace(new Kt({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t,this.invalidateLayoutCache(e)},x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Kt}addFontFace(e){ie(e instanceof Kt);const t=e.fontFamily;"sans-serif"!==t&&Tn.add(e.fontFace);let n=this.fontFamilies[t];n||(n=new Set,this.fontFamilies[t]=n),n.add(e)}createState(e,t){return{node:t,props:e,status:"initialState",updateScheduled:!1,emitter:new de,textureNode:void 0,lightning2TextRenderer:new wn(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if("initialState"===e.status&&this.setStatus(e,"loading"),"loaded"!==e.status)return e.fontInfo?void(e.fontInfo.loaded&&(e.renderInfo||(e.renderInfo=this.calculateRenderInfo(e),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,this.renderSingleCanvasPage(e)))):this.loadFont(e)}renderSingleCanvasPage(e){ie(e.renderInfo);const t=e.node,n=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:function(e,t){return ie(t),e.draw(t,{lines:t.lines,lineWidths:t.lineWidths}),0===this.canvas.width||0===this.canvas.height?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}.bind(this,e.lightning2TextRenderer,e.renderInfo)});if(e.textureNode)e.textureNode.texture=n,e.textureNode.alpha=ve(e.props.color);else{const o=this.stage.createNode({parent:t,texture:n,autosize:!0,alpha:ve(e.props.color)});e.textureNode=o}this.setStatus(e,"loaded")}calculateRenderInfo(e){var t,n;return e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:null===(t=e.fontInfo)||void 0===t?void 0:t.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:ge(e.props.color),offsetY:e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:null!==(n=e.props.lineHeight)&&void 0!==n?n:null,maxLines:e.props.maxLines,maxHeight:"both"===e.props.contain?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:"none"!==e.props.contain?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.renderInfo}renderQuads(){}destroyState(e){"destroyed"!==e.status&&(super.destroyState(e),e.textureNode&&(e.textureNode.destroy(),delete e.textureNode),delete e.renderInfo)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,t){var n;t===(null===(n=e.fontInfo)||void 0===n?void 0:n.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,t,n){var o;t===(null===(o=e.fontInfo)||void 0===o?void 0:o.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,n),this.scheduleUpdateState(e))}}const Cn={isWhite:!0,a:1,r:255,g:255,b:255};function An(e){if(4294967295===e)return Cn;return{isWhite:!1,a:(e>>>24&255)/255,r:255&e,g:255&e>>>8,b:255&e>>>16}}function En(e){if(4294967295===e)return Cn;return{isWhite:!1,r:e>>>24&255,g:255&e>>>16,b:255&e>>>8,a:(255&e)/255}}function In({a:e,r:t,g:n,b:o}){return`rgba(${t},${n},${o},${e})`}class Mn extends Gt{constructor(...t){super(...t),e(this,"image",void 0),e(this,"tintCache",void 0)}load(){this.textureSource.setState("loading"),this.onLoadRequest().then(e=>{this.textureSource.setState("loaded",e),this.textureSource.freeTextureData(),this.updateMemSize()}).catch(e=>{this.textureSource.setState("failed",e),this.textureSource.freeTextureData()})}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}updateMemSize(){const e=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:t,height:n}=this.textureSource.dimensions;this.setTextureMemUse(t*n*e)}}hasImage(){return void 0!==this.image}getImage(e){var t;const n=this.image;if(ie(n,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),n;const o=In(e);if((null===(t=this.tintCache)||void 0===t?void 0:t.key)===o)return this.tintCache.image;const i=this.tintTexture(n,o);return this.tintCache={key:o,image:i},this.updateMemSize(),i}tintTexture(e,t){const{width:n,height:o}=e,i=document.createElement("canvas");i.width=n,i.height=o;const r=i.getContext("2d");return r&&(r.fillStyle=t,r.globalCompositeOperation="copy",r.fillRect(0,0,n,o),r.globalCompositeOperation="multiply",r.drawImage(e,0,0,n,o,0,0,n,o),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0,n,o,0,0,n,o)),i}async onLoadRequest(){var e;ie(null===(e=this.textureSource)||void 0===e||null===(e=e.textureData)||void 0===e?void 0:e.data,"Texture data is null");const{data:t}=this.textureSource.textureData;if(t instanceof ImageData){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");return n&&n.putImageData(t,0,0),this.image=e,{width:t.width,height:t.height}}return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||t instanceof HTMLImageElement?(this.image=t,{width:t.width,height:t.height}):{width:0,height:0}}}function Rn(e,t=""){if(e.shader instanceof Ot){if("DynamicShader"===e.shader.shType){var n;const o=null===(n=e.shaderProps)||void 0===n?void 0:n.effects;if(o&&o.length){const e=o.find(e=>e.type===`border${t}`&&e.props&&e.props.width);return e&&e.props}}}}function _n(e,t,n,o,i){if(Object.getPrototypeOf(this).roundRect)this.roundRect(e,t,n,o,i);else{const r=e=>{const t=Math.min(n/2,o/2),i=e.topLeft+e.topRight+e.bottomRight+e.bottomLeft;if(i>n||i>o){const n=t/Math.max(e.topLeft,e.topRight,e.bottomRight,e.bottomLeft);e.topLeft*=n,e.topRight*=n,e.bottomRight*=n,e.bottomLeft*=n}},s="number"==typeof i?{topLeft:i,topRight:i,bottomRight:i,bottomLeft:i}:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,...i};r(s),this.moveTo(e+s.topLeft,t),this.lineTo(e+n-s.topRight,t),this.ellipse(e+n-s.topRight,t+s.topRight,s.topRight,s.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(e+n,t+o-s.bottomRight),this.ellipse(e+n-s.bottomRight,t+o-s.bottomRight,s.bottomRight,s.bottomRight,0,0,.5*Math.PI),this.lineTo(e+s.bottomLeft,t+o),this.ellipse(e+s.bottomLeft,t+o-s.bottomLeft,s.bottomLeft,s.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(e,t+s.topLeft),this.ellipse(e+s.topLeft,t+s.topLeft,s.topLeft,s.topLeft,0,Math.PI,1.5*Math.PI)}}function Ln(e,t,n,o,i,r=0,s,a){if(!r)return;let l,u,c=0,p=0;switch(a){case"Top":l=t,c=n,u=o+t,p=n;break;case"Right":l=t+o,c=n,u=t+o,p=n+i;break;case"Bottom":l=t,c=n+i,u=t+o,p=n+i;break;case"Left":l=t,c=n,u=t,p=n+i}e.beginPath(),e.lineWidth=r,e.strokeStyle=In(En(null!=s?s:0)),e.moveTo(l,c),e.lineTo(u,p),e.stroke()}class Dn extends Vt{constructor(t){super(t),e(this,"context",void 0),e(this,"canvas",void 0),e(this,"pixelRatio",void 0),e(this,"clearColor",void 0),e(this,"renderToTextureActive",!1),e(this,"activeRttNode",null),e(this,"defShaderCtr",void 0),this.mode="canvas",this.shManager.renderer=this;const{canvas:n,pixelRatio:o,clearColor:i}=t;this.canvas=n,this.context=n.getContext("2d"),this.pixelRatio=o,this.clearColor=i?ye(i):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new Ot("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const e=this.context;if(this.clearColor){const[t,n,o,i]=this.clearColor;e.fillStyle=`rgba(${t}, ${n}, ${o}, ${i/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){var t;const n=this.context,{tx:o,ty:i,width:r,height:s,alpha:a,colorTl:l,colorTr:u,colorBr:c,ta:p,tb:d,tc:h,td:f,clippingRect:m}=e;let g,y,v=e.texture;const b=null===(t=v)||void 0===t?void 0:t.type;if(ie(b,"Texture type is not defined"),b!==he.image&&b!==he.color&&b!==he.subTexture&&b!==he.noise)return;if(v){if(v instanceof et&&(y=v.props,v=v.parentTexture),g=v.ctxTexture,"freed"===v.state)return;if("loaded"!==v.state)return}const x=An(l),w=1!==p,S=0!==m.width&&0!==m.height,T=l!==u||l!==c,k=Boolean(e.shader),C=k?function(e){if(e.shader instanceof Ot){const i=e.shader.shType;var t,n;if("RoundedRectangle"===i)return null!==(t=null===(n=e.shaderProps)||void 0===n?void 0:n.radius)&&void 0!==t?t:0;if("DynamicShader"===i){var o;const t=null===(o=e.shaderProps)||void 0===o?void 0:o.effects;if(t){const e=t.find(e=>{var t;return"radius"===e.type&&(null==e||null===(t=e.props)||void 0===t?void 0:t.radius)});return e&&"radius"===e.type&&e.props.radius||0}}}return 0}(e):0,A=k?Rn(e):void 0;if((w||S||C)&&n.save(),S){const e=new Path2D,{x:t,y:o,width:i,height:r}=m;e.rect(t,o,i,r),n.clip(e)}if(w){const e=this.pixelRatio;n.setTransform(p,h,d,f,o*e,i*e),n.scale(e,e),n.translate(-o,-i)}if(C){const e=new Path2D;_n.call(e,o,i,r,s,C),n.clip(e)}if(b!==he.image&&b!==he.subTexture&&b!==he.noise||!g)if(b===he.color&&T){let e,t=o,a=i;l===u?(t=o,a=i+s,e=An(c)):(t=o+r,a=i,e=An(u));const p=n.createLinearGradient(o,i,t,a);p.addColorStop(0,In(x)),p.addColorStop(1,In(e)),n.fillStyle=p,n.fillRect(o,i,r,s)}else b===he.color&&(n.fillStyle=In(x),n.fillRect(o,i,r,s));else{var E;const e=g.getImage(x);if(n.globalAlpha=null!==(E=x.a)&&void 0!==E?E:a,y)n.drawImage(e,y.x,y.y,y.width,y.height,o,i,r,s);else try{n.drawImage(e,o,i,r,s)}catch(M){}n.globalAlpha=1}if(A&&A.width){var I;const e=A.width,t=A.width/2,l=In(En(null!==(I=A.color)&&void 0!==I?I:0));n.beginPath(),n.lineWidth=e,n.strokeStyle=l,n.globalAlpha=a,C?(_n.call(n,o+t,i+t,r-e,s-e,C),n.stroke()):n.strokeRect(o+t,i+t,r-e,s-e),n.globalAlpha=1}else if(k){const t=Rn(e,"Top"),a=Rn(e,"Right"),l=Rn(e,"Bottom"),u=Rn(e,"Left");t&&Ln(n,o,i,r,s,t.width,t.color,"Top"),a&&Ln(n,o,i,r,s,a.width,a.color,"Right"),l&&Ln(n,o,i,r,s,l.width,l.color,"Bottom"),u&&Ln(n,o,i,r,s,u.width,u.color,"Left")}(w||S||C)&&n.restore()}createCtxTexture(e){return new Mn(this.txMemManager,e)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}getBufferInfo(){return null}getQuadCount(){return null}updateClearColor(e){this.clearColor=e?ye(e):void 0}}const Pn={alpha:e=>1===e?null:{prop:"opacity",value:`${e}`},x:e=>({prop:"left",value:`${e}px`}),y:e=>({prop:"top",value:`${e}px`}),width:e=>0===e?null:{prop:"width",value:`${e}px`},height:e=>0===e?null:{prop:"height",value:`${e}px`},fontSize:e=>0===e?null:{prop:"font-size",value:`${e}px`},lineHeight:e=>0===e?null:{prop:"line-height",value:`${e}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:e=>!1===e?null:{prop:"overflow",value:e?"hidden":"visible"},rotation:e=>0===e?null:{prop:"transform",value:`rotate(${e}rad)`},scale:e=>1===e?null:{prop:"transform",value:`scale(${e})`},scaleX:e=>1===e?null:{prop:"transform",value:`scaleX(${e})`},scaleY:e=>1===e?null:{prop:"transform",value:`scaleY(${e})`},color:e=>0===e?null:{prop:"color",value:On(e)}},On=e=>`rgba(${e>>24&255},${e>>16&255},${e>>8&255},${(255&e)/255})`,Nn={id:"test-id"},Un=new Set([...Object.keys(Pn),...Object.keys(Nn),"src","parent","data"]);class Bn{constructor(t,n){var o,i,r,s,a,l;if(e(this,"root",null),e(this,"canvas",null),e(this,"height",1080),e(this,"width",1920),e(this,"scaleX",1),e(this,"scaleY",1),ce())return;if(!n)throw new Error("settings is required");this.height=Math.ceil(null!==(o=n.appHeight)&&void 0!==o?o:1080/(null!==(i=n.deviceLogicalPixelRatio)&&void 0!==i?i:1)),this.width=Math.ceil(null!==(r=n.appWidth)&&void 0!==r?r:1920/(null!==(s=n.deviceLogicalPixelRatio)&&void 0!==s?s:1)),this.scaleX=null!==(a=n.deviceLogicalPixelRatio)&&void 0!==a?a:1,this.scaleY=null!==(l=n.deviceLogicalPixelRatio)&&void 0!==l?l:1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root);new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1});new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(null===this.root||null===this.canvas)return;const e=this.canvas.getBoundingClientRect(),t=document.documentElement.scrollTop+e.top,n=document.documentElement.scrollLeft+e.left;this.root.id="root",this.root.style.left=`${n}px`,this.root.style.top=`${t}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(e,t){const n=document.createElement("div");n.style.position="absolute",n.id=e.toString();for(const o in t)this.updateNodeProperty(n,o,t[o],t);return n}createNode(e){const t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,e.on("inViewport",()=>t.setAttribute("state","inViewport")),e.on("inBounds",()=>t.setAttribute("state","inBounds")),e.on("outOfBounds",()=>t.setAttribute("state","outOfBounds")),this.createProxy(e,t)}createTextNode(e){const t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,this.createProxy(e,t)}createProxy(e,t){Un.forEach(n=>{let o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){const t=Object.getPrototypeOf(e);o=Object.getOwnPropertyDescriptor(t,n)}void 0!==o&&Object.defineProperty(e,n,{get(){var t;return null===(t=o)||void 0===t||null===(t=t.get)||void 0===t?void 0:t.call(e)},set:i=>{var r;null===(r=o)||void 0===r||null===(r=r.set)||void 0===r||r.call(e,i),this.updateNodeProperty(t,n,i,e.props)},configurable:!0,enumerable:!0})});const n=e.destroy;Object.defineProperty(e,"destroy",{value:()=>{this.destroyNode(e.id),n.call(e)}});const o=e.animate;return Object.defineProperty(e,"animate",{value:(n,i)=>{const r=o.call(e,n,i),s=r.start.bind(r);return r.start=()=>(this.animateNode(t,n,i),s()),r}}),e}destroyNode(e){const t=document.getElementById(e.toString());null==t||t.remove()}updateNodeProperty(e,t,n,o){if(null!==this.root&&null!=n){if("parent"===t){const t=n.id;if(1===t)return void this.root.appendChild(e);const o=document.getElementById(t.toString());return void(null==o||o.appendChild(e))}if("text"===t)return e.innerHTML=String(n),void(e.style.visibility="hidden");if("src"===t&&n)e.setAttribute("data-src",String(n));else if("rtt"===t&&n)e.setAttribute("data-rtt",String(n));else{if(Pn[t]){var i;const r=null===(i=Pn[t])||void 0===i?void 0:i.call(Pn,n);if(null===r)return;if("string"==typeof r)return void e.style.setProperty(r,String(n));if("object"==typeof r){let n=r.value;if("x"===t){const e=o.mountX,t=o.width;e&&(n=parseInt(n)-t*e+"px")}else if("y"===t){const e=o.mountY,t=o.height;e&&(n=parseInt(n)-t*e+"px")}e.style.setProperty(r.prop,n)}return}if(Nn[t]){const o=Nn[t];if(!o)return;return void e.setAttribute(String(o),String(n))}if("data"!==t);else for(const t in n){const o=n[t];void 0===o?e.removeAttribute(`data-${t}`):e.setAttribute(`data-${t}`,String(o))}}}}animateNode(e,t,n){const{duration:o=1e3,delay:i=0}=n,{x:r,y:s,width:a,height:l,alpha:u=1,rotation:c=0,scale:p=1,color:d,mountX:h,mountY:f}=t;setTimeout(function(){setTimeout(()=>{e.style.top=s-l*f+"px",e.style.left=r-a*h+"px",e.style.width=`${a}px`,e.style.height=`${l}px`,e.style.opacity=`${u}`,e.style.rotate=`${c}rad`,e.style.scale=`${p}`,e.style.color=On(d)},o)},i)}}const jn={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},Fn={low:.66666667,medium:.85,high:1,retina:2};let zn=null;const $n=e=>{const t="renderMode"in e?e.renderMode:"webgl";return"webgl"===t?an:"canvas"===t?Dn:void 0},Gn=e=>{const t="renderMode"in e?e.renderMode:"webgl";return"webgl"===t?[vn,kn]:"canvas"===t?[kn]:void 0},Vn=e=>{const t={max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1,..."gpuMemory"in e==!0?e.gpuMemory:{}};return{criticalThreshold:1024*t.max*1024,targetThresholdLevel:t.target,cleanupInterval:t.cleanupInterval,baselineMemoryAllocation:1024*t.baseline*1024,doNotExceedCriticalThreshold:t.strict}};let Hn=0;const qn=function(e){const t="vertical"===e.direction?"y":"x",n="vertical"===e.direction?"x":"y",o="vertical"===e.direction?"mountX":"mountY",i="vertical"===e.direction?"height":"width",r="vertical"===e.direction?"width":"height",s=((e,t)=>{if(void 0===e)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if("number"==typeof e)return{start:e,end:e,oppositeStart:e,oppositeEnd:e};if(!0===Wn(e)&&(e=Kn(e)),"object"==typeof e){const{top:n,right:o,bottom:i,left:r,x:s=0,y:a=0}=e;return"vertical"===t?{start:void 0!==n?n:a,end:void 0!==i?i:a,oppositeStart:void 0!==r?r:s,oppositeEnd:void 0!==o?o:s}:{start:void 0!==r?r:s,end:void 0!==o?o:s,oppositeStart:void 0!==n?n:a,oppositeEnd:void 0!==i?i:a}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}})(e.padding,e.direction);let a=s.start;const l=this.node.children,u=l.length;let c=0;const p=e.gap||0;for(let h=0;h<u;h++){if(void 0!==this.children[h]&&!1===this.children[h].props.raw.show)continue;const e=l[h];e[t]=a,e[n]=s.oppositeStart,a+="width"===i?e.width+(e.width!==("text"in e?1:0)?p:0):"text"in e?e.width>1?e.height+p:0:0!==e.height?e.height+p:0,c=Math.max(c,e[r]+s.oppositeStart+s.oppositeEnd)}this.node[i]=a-p+s.end,this.node[r]=c;const d={start:0,end:1,center:.5}[e["align-items"]||"start"];if(0!==d)for(let h=0;h<u;h++){const e=l[h];e[n]=c*d,e[o]=d}void 0!==e["@updated"]&&e["@updated"]({w:this.node.width,h:this.node.height},this),this.config.parent&&!0===this.config.parent.props.__layout&&this.config.parent.triggerLayout(this.config.parent.props)},Xn=e=>null!==e&&"object"==typeof e&&"transition"in e==!0,Wn=e=>"string"==typeof e&&e.startsWith("{")&&e.endsWith("}"),Kn=e=>JSON.parse(e.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),Yn=function(e,t){return"string"!=typeof e?e:e.indexOf("%")===e.length-1?this.element.config.parent&&(this.element.config.parent.node[t]||0)*(parseFloat(e)/100)||0:e},Qn=e=>{if("object"!=typeof e||null===e)return e;if(e.constructor===Object){if("value"in e==!0)return e.value;if("transition"in e==!0)return Qn(e.transition)}return e},Jn={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let Zn=null;const eo={set parent(e){this.props.parent="root"===e?zn.root:e.node},set rotation(e){this.props.rotation=e*(Math.PI/180)},set w(e){this.props.width=Yn.call(this,e,"width")},set width(e){this.props.width=Yn.call(this,e,"width")},set h(e){this.props.height=Yn.call(this,e,"height")},set height(e){this.props.height=Yn.call(this,e,"height")},set x(e){this.props.x=Yn.call(this,e,"width")},set y(e){this.props.y=Yn.call(this,e,"height")},set z(e){this.props.zIndex=e},set zIndex(e){this.props.zIndex=e},set color(e){"string"==typeof e&&!1===e.startsWith("{")?this.props.color=v(e):("object"==typeof e||!0===Wn(e)&&(e=Kn(e)))&&(this.props.color=0,Object.entries(e).forEach(e=>{this.props[Jn[e[0]]]=v(e[1])}))},set src(e){this.props.src=e,void 0===this.raw.color&&(this.props.color=this.props.src?4294967295:0),"w"in this.raw||"w"in this.raw||"h"in this.raw||"height"in this.raw||(this.props.autosize=!0)},set texture(e){this.props.texture=e,void 0===this.raw.color&&null==e?this.props.color=0:void 0===this.raw.color&&(this.props.color=4294967295)},set fit(e){const t={};"cover"!==e&&"contain"!==e?("object"==typeof e||!0===Wn(e)&&(e=Kn(e)))&&(t.type=e.type||"cover","number"==typeof e.position&&(t.clipY=t.clipX=e.position),"object"==typeof e.position&&(t.clipX="x"in e.position==!0?e.position.x:null,t.clipY="y"in e.position==!0?e.position.y:null),this.props.textureOptions={resizeMode:t}):this.props.textureOptions={resizeMode:{type:e}}},set rtt(e){this.props.rtt=e,void 0===this.raw.color&&(this.props.color=!0===e?4294967295:0)},set mount(e){"object"==typeof e||!0===Wn(e)&&(e=Kn(e))?("x"in e==!0&&(this.props.mountX=e.x),"y"in e==!0&&(this.props.mountY=e.y)):(this.props.mountX=e,this.props.mountY=e)},set pivot(e){"object"==typeof e||!0===Wn(e)&&(e=Kn(e))?("x"in e==!0&&(this.props.pivotX=e.x),"y"in e==!0&&(this.props.pivotY=e.y)):(this.props.pivotX=e,this.props.pivotY=e)},set scale(e){"object"==typeof e||!0===Wn(e)&&(e=Kn(e))?("x"in e==!0&&(this.props.scaleX=e.x),"y"in e==!0&&(this.props.scaleY=e.y)):this.props.scale=e},set show(e){this.props.alpha=e?void 0!==this.raw.alpha?this.raw.alpha:1:0},set alpha(e){void 0!==this.raw.show&&1!=this.raw.show||(this.props.alpha=e)},set shader(e){this.props.shader=null!==e?zn.createShader(e.type,e.props):zn.createShader("DefaultShader")},set effects(e){for(let t=0;t<e.length;t++)e[t].props&&e[t].props.color&&(e[t].props.color=v(e[t].props.color));void 0===this.element.node&&(this.props.shader=zn.createShader("DynamicShader",{effects:e.map(e=>zn.createEffect(e.type,e.props))}))},set clipping(e){this.props.clipping=e},set overflow(e){this.props.clipping=!e},set font(e){this.props.fontFamily=e},set size(e){this.props.fontSize=e},set wordwrap(e){p.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=e,this.props.contain="width"},set maxwidth(e){this.props.width=e,this.props.contain="width"},set maxheight(e){this.props.height=e,this.props.contain="both"},set contain(e){this.props.contain=e},set maxlines(e){this.props.maxLines=e},set textoverflow(e){this.props.overflowSuffix=!1===e?" ":!0===e?void 0:e},set letterspacing(e){this.props.letterSpacing=e||1},set lineheight(e){this.props.lineHeight=e},set align(e){this.props.textAlign=e},set content(e){this.props.text=""+e},set placement(e){let t,n;"object"==typeof e||!0===Wn(e)&&(e=Kn(e))?("x"in e==!0&&(t=e.x),"y"in e==!0&&(n=e.y)):"center"===e||"right"===e?t=e:n=e,"center"===t?(this.x="50%",this.props.mountX=.5):"right"===t&&(this.x="100%",this.props.mountX=1),"middle"===n?(this.y="50%",this.props.mountY=.5):"bottom"===n&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(e){("object"==typeof e||!0===Wn(e)&&(e=Kn(e)))&&(this.props.data=e)}},to={populate(e){const t=e;t.node=this.config.node,!0===t[s.isSlot]&&(this[s.isSlot]=!0),this.props.element=this,this.props.parent=t.parent||this.config.parent,delete t.parent,this.props.raw=e;const n=Object.keys(t),o=n.length;for(let i=0;i<o;i++){const e=n[i],o=t[e];void 0!==o&&(this.props[e]=Qn(o))}void 0===this.props.props.color&&"__textnode"in t==!1&&(this.props.props.color=0),this.node=t.__textnode?zn.createTextNode({...Zn,...this.props.props}):zn.createNode(this.props.props),void 0!==t["@loaded"]&&"function"==typeof t["@loaded"]&&this.node.on("loaded",(e,{type:n,dimensions:o})=>{t["@loaded"]({w:o.width,h:o.height,type:n},this)}),void 0!==t["@error"]&&"function"==typeof t["@error"]&&this.node.on("failed",(e,n)=>{t["@error"](n,this)}),!0===t.__layout&&(this.triggerLayout=qn.bind(this)),void 0!==this.config.parent.props&&!0===this.config.parent.props.__layout&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(e,t){if(void 0===t)return;if(this.props.raw[e]===t)return;this.props.raw[e]=t,this.props.props={},this.props[e]=Qn(t);const n=Object.keys(this.props.props);if(1===n.length){if(!0===Xn(t))return this.animate(n[0],this.props.props[n[0]],t.transition);this.node[n[0]]=this.props.props[n[0]]}else for(let o=0;o<n.length;o++){if(!0===Xn(t))return this.animate(n[o],this.props.props[n[o]],t.transition);this.node[n[o]]=this.props.props[n[o]]}this.config.parent.props&&!0===this.config.parent.props.__layout&&this.config.parent.triggerLayout(this.config.parent.props)},animate(e,t,n){if(void 0!==this.scheduledTransitions[e]&&"scheduled"===this.scheduledTransitions[e].f.state&&this.scheduledTransitions[e].f.stop(),this.node[e]===t)return;const o={};o[e]=t;const i=this.node.animate(o,{duration:"object"==typeof n&&"duration"in n?n.duration:300,easing:"object"==typeof n&&"easing"in n?n.easing:"ease",delay:"object"==typeof n&&"delay"in n?n.delay:0}),r=this.node[e];if(this.scheduledTransitions[e]={v:o[e],f:i},void 0!==n.start&&"function"==typeof n.start&&i.once("animating",()=>{n.start.call(this.component,this,e,r)}),this.config.parent.props&&!0===this.config.parent.props.__layout&&i.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),void 0!==n.progress&&"function"==typeof n.progress){let t=0;i.on("tick",(o,{progress:i})=>{n.progress.call(this.component,this,e,i,t),t=i})}i.once("stopped",()=>{void 0!==this.scheduledTransitions[e]&&!0===this.scheduledTransitions[e].canceled||(void 0!==this.node&&n.end&&"function"==typeof n.end&&n.end.call(this.component,this,e,this.node[e]),delete this.scheduledTransitions[e])}),i.start()},destroy(){if(null===this.node)return;p.debug("Deleting Node",this.nodeId);const e=Object.keys(this.scheduledTransitions);for(let t=0;t<e.length;t++){const n=this.scheduledTransitions[e[t]];void 0!==n&&(n.canceled=!0,void 0!==n.f&&n.f.stop())}this.scheduledTransitions={},this.component=null,delete this.component,this.config=null,delete this.config,this.counter=null,delete this.counter,this.props.raw={},this.props.element=null,this.props.props=null,this.props={},delete this.props,this.triggerLayout=null,delete this.triggerLayout,this.forComponent=null,delete this.forComponent,this.node.destroy(),this.node=null},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){return this.component[s.getChildren]().filter(e=>e.parent===(this[s.isSlot]?this.node.children[0]:this.node))}},no=(e,t)=>(null===Zn&&(Zn={fontSize:32,fontFamily:a.get("defaultFont","sans-serif")}),Object.assign(Object.create(to),{props:Object.assign(Object.create(eo),{props:{}}),scheduledTransitions:{},config:e,component:t,counter:Hn++})),oo=(e,t,n={})=>{zn=new Xt({appWidth:n.w||1920,appHeight:n.h||1080,fpsUpdateInterval:n.fpsInterval||1e3,devicePhysicalPixelRatio:Fn[n.renderQuality]||n.renderQuality||1,deviceLogicalPixelRatio:n.pixelRatio||jn[n.screenResolution]||jn[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in n?n.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:n.canvasColor&&v(n.canvasColor)||0,inspector:!0===n.inspector?Bn:void 0,boundsMargin:n.viewportMargin||0,renderEngine:$n(n),fontEngines:Gn(n),canvas:n.canvas,textureProcessingTimeLimit:n.textureProcessingTimeLimit,textureMemory:Vn(n),createImageBitmapSupport:"auto",...n.advanced||{}},t);return(()=>{const e=zn.stage;a.get("shaders",[]).forEach(t=>{e.shManager.registerShaderType(t.name,t.type)}),a.get("effects",[]).forEach(t=>{e.shManager.registerShaderType(t.name,t.type)})})(),(()=>{const e=zn.stage;a.get("fonts",[]).forEach(t=>{"sdf"===t.type||"msdf"===t.type?(!t.png&&t.file&&(t.png=t.file.replace(/\.[^.]+$/,`.${t.type}.png`)),!t.json&&t.file&&(t.json=t.file.replace(/\.[^.]+$/,`.${t.type}.json`)),e.fontManager.addFontFace(new pn(t.type,{fontFamily:t.family,descriptors:{},atlasUrl:t.png,atlasDataUrl:t.json,stage:e,metrics:t.metrics}))):"web"===t.type&&e.fontManager.addFontFace(new Kt({fontFamily:t.family,fontUrl:t.file,descriptors:{},metrics:t.metrics}))})})(),(()=>{let t=e();t.quit=()=>{p.info("Closing App"),t.destroy(),t=null,zn=null}})(),zn},io="1.29.5",ro={"@lightningjs/renderer":"^2.13.4"};let so={};const ao={};const lo={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},uo=window.speechSynthesis,co=/android/i.test((window.navigator||{}).userAgent||"");let po=!1,ho=null;const fo=()=>ho&&clearTimeout(ho),mo=e=>{if(!e||ho)return fo();uo.pause(),uo.resume(),ho=setTimeout(()=>{mo(e)},5e3)},go={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},yo={speak:e=>void 0!==uo?(!1===po&&(go.voice=uo.getVoices()[0],po=!0),(e=>{const t=new SpeechSynthesisUtterance(e.message);return t.lang=e.lang||go.lang,t.pitch=e.pitch||go.pitch,t.rate=e.rate||go.rate,t.voice=e.voice||go.voice,t.volume=e.volume||go.volume,!1===co&&(t.onstart=()=>{mo(t)},t.onresume=()=>{mo(t)}),new Promise((e,n)=>{t.onend=()=>{e()},t.onerror=e=>{n(e)},uo.speak(t)})})(e)):(p.error("speechSynthesis web API not available"),Promise.reject({error:"unavailable"})),cancel(){void 0!==uo&&(uo.cancel(),fo())}};let vo=!1,bo=0;const xo=[];let wo=!1,So=null,To=null;const ko={then(){},done(){},cancel(){},stop(){}},Co=(e,t="off")=>!1===vo?ko:Ao(e,t),Ao=(e,t,n=!1)=>{const o=bo++;let i;const r=new Promise(e=>{i=e});return r.cancel=()=>{const e=xo.findIndex(e=>e.id===o);-1!==e&&xo.splice(e,1),i("canceled")},r.stop=()=>{o===So&&(yo.cancel(),wo=!1,i("interupted"))},!1===n?"assertive"===t?xo.unshift({message:e,resolveFn:i,id:o}):xo.push({message:e,resolveFn:i,id:o}):xo.push({delay:n,resolveFn:i,id:o}),setTimeout(()=>{Eo()},100),r},Eo=async()=>{if(!0===wo||0===xo.length)return;wo=!0;const{message:e,resolveFn:t,delay:n,id:o}=xo.shift();So=o,n?setTimeout(()=>{wo=!1,So=null,t("finished"),Eo()},n):(null!==To&&clearTimeout(To),To=setTimeout(()=>{yo.speak({message:e}).then(()=>{wo=!1,So=null,t("finished"),Eo()}).catch(e=>{wo=!1,So=null,t(e.error),Eo()}),To=null},200))},Io={speak:Co,polite:e=>Co(e,"polite"),assertive:e=>Co(e,"assertive"),stop:()=>{yo.cancel()},enable:()=>{vo=!0},disable:()=>{vo=!1},toggle:e=>{vo=!!e},clear:()=>{xo.length=0},pause:e=>!1===vo?ko:Ao(void 0,void 0,e)};let Mo;const Ro=Z({path:"",navigating:!1,data:null,params:null,hash:""},a.get("reactivityMode"),!0),_o=new Map,Lo=[];let Do,Po={},Oo={},No=!1;const Uo=e=>e.replace(/^\/+|\/+$/g,"").toLowerCase(),Bo=e=>"object"==typeof e&&null!==e,jo=e=>"string"==typeof e,Fo=(e,t=[])=>{const n=e.replace(/^\/+|\/+$/g,"");e=Uo(e);let o=!1,i=0;for(;!o&&i<t.length;){const r=t[i];if(r.path=Uo(r.path),r.path===e)r.params={},o=r;else if(r.path.indexOf(":")>-1){const e=[...r.path.matchAll(/:([^\s/]+)/gi)];let t=r.path;e.reverse().forEach(e=>{t=t.substring(0,e.index)+"([^\\s/]+)"+t.substring(e.index+e[0].length)}),t="^"+t;const i=n.match(new RegExp(`${t}`,"i"));i&&(r.params=e.reverse().reduce((e,t,n)=>(e[t[1]]=i[n+1],e),{}),o=r)}else if(r.path.endsWith("*")){const t=new RegExp(r.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),n=e.match(t);n&&(n[1]&&(r.params={path:n[1]}),o=r)}i++}return o&&(o.options={...o.options,...Po},o.data||(o.data={})),o},zo=async(e,t,n)=>{if(n)if(Array.isArray(n))for(let o=0;o<n.length;o++)o===n.length-1?await $o(t[s.holder],n[o]):$o(t[s.holder],n[o]);else await $o(t[s.holder],n);!1===No&&e.options&&!0===e.options.keepAlive?_o.set(e.hash,{view:t,focus:Do}):!0===No&&_o.delete(e.hash),!e.options||!0===e.options.keepAlive&&!0!==No||(t.destroy(),t=null)},$o=(e,t,n=!0)=>new Promise(o=>{if(!0===n){let n=t.end;t.end=(...e)=>{n&&n(e),n=null,o()},e.set(t.prop,{transition:t})}else e.set(t.prop,t.value),o()}),Go=(e,t={},n={})=>{Oo=t,Po=n,window.location.hash=e},Vo=function(){const e=Lo.pop();if(e&&Mo!==e)return No=!0,Go(e.hash,e.data,e.options),!0;const t=Mo&&Mo.options.backtrack||!1;if(!1===t)return!1;const n=/(\/:?[\w%\s-]+)$/;let o=Mo.path,i=o.split("/").length;if(i<=1)return!1;for(;i--;){if(!n.test(o))return!1;o=o.replace(n,"");const e=Fo(o,this.parent[s.routes]);if(e&&t)return Go(e.path),!0}return!1},Ho={navigate:async function(){if(Io.stop(),Io.clear(),Ro.navigating=!0,this.parent[s.routes]){let e=Mo;const{hash:t,path:n,queryParams:o}=(()=>{const e=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:e[0],queryParams:new URLSearchParams(e[1]),hash:document.location.hash}})();let i=Fo(n,this.parent[s.routes]);if(null!==t&&(i.hash=t),Mo=i,i){let n,r,a,l;if(this.parent[s.routerHooks]){const t=this.parent[s.routerHooks];if(t.beforeEach&&(n=await t.beforeEach(i,e),jo(n)))return void Go(n)}if(i=Bo(n)?n:i,i.hooks&&i.hooks.before&&(r=await i.hooks.before.call(this.parent,i,e),jo(r)))return Mo=e,void Go(r);i=Bo(r)?r:i,!1===No&&e&&!0===e.options.inHistory&&Lo.push(e),"transition"in i||(i.transition=lo),"function"==typeof i.transition&&(i.transition=i.transition(e,i));let{view:u,focus:c}=_o.get(i.hash)||{};if(i.announce&&("string"==typeof i.announce&&(i.announce={message:i.announce}),Io.speak(i.announce.message,i.announce.politeness)),u){a=u[s.holder];let e=!1;if(i.transition.before)if(Array.isArray(i.transition.before)){for(let t=0;t<i.transition.before.length;t++)if("alpha"===i.transition.before[t].prop){e=!0;break}}else"alpha"===i.transition.before.prop&&(e=!0);!1===e&&a.set("alpha",1)}else{a=ao.element({parent:this[s.children][0]}),a.populate({}),a.set("w","100%"),a.set("h","100%");const e={},t=[...o.entries()];for(let o=0;o<t.length;o++)e[t[o][0]]=t[o][1];l={...Oo,...i.data,...e};const n={...this[s.props],...i.params,...l};u=await i.component({props:n},a,this),"Module"===u[Symbol.toStringTag]&&(u.default&&"function"==typeof u.default?u=u.default({props:n},a,this):p.error("Dynamic import doesn't have a default export or default is not a function")),"function"==typeof u&&(u=u({props:n},a,this))}if(this[s.children].push(u),Do=Yo.get(),c?c.$focus():u.$focus(),i.transition.before)if(Array.isArray(i.transition.before))for(let e=0;e<i.transition.before.length;e++)a.set(i.transition.before[e].prop,i.transition.before[e].value);else a.set(i.transition.before.prop,i.transition.before.value);let d=!1;if(e){d=!0;const t=this[s.children].splice(1,1).pop();t&&zo(e,t,i.transition.out)}if(Ro.path=i.path,Ro.params=i.params,Ro.hash=t,Ro.data=l,i.transition.in)if(Array.isArray(i.transition.in))for(let e=0;e<i.transition.in.length;e++)e===i.transition.length-1?await $o(a,i.transition.in[e],d):$o(a,i.transition.in[e],d);else await $o(a,i.transition.in,d);this.activeView=this[s.children][this[s.children].length-1]}else p.error(`Route ${t} not found`)}No=!1,Ro.navigating=!1},back:Vo};let qo,Xo=null,Wo=[];const Ko=new Map,Yo={_hold:!1,set hold(e){this._hold=e},get hold(){return this._hold},get:()=>Xo,set(e,t){e!==Xo&&(clearTimeout(qo),Xo&&Xo!==e.parent&&Xo.unfocus(),Wo.reverse().forEach(e=>e.unfocus()),e!==Xo&&(qo=setTimeout(()=>{Xo=e,Xo.lifecycle.state="focus",t instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",t)):Wo=[]},this.hold?a.get("holdTimeout",50):0)))},input(e,t){if(!0===Ro.navigating)return;Wo=Qo([Xo],e);const n=Wo.shift();if(n){let o;n[s.inputEvents][e]?o=n[s.inputEvents][e].call(n,t):n[s.inputEvents].any&&(o=n[s.inputEvents].any.call(n,t)),void 0!==o&&Ko.set(t.code,o)}}},Qo=(e,t)=>!e[0][s.inputEvents]||"function"!=typeof e[0][s.inputEvents][t]&&"function"!=typeof e[0][s.inputEvents].any?e[0].parent?(e.unshift(e[0].parent),Qo(e,t)):[]:e,Jo=new Map,Zo=new Map,ei={registerListener(e,t,n,o=0){let i=Jo.get(t);void 0===i&&(i=new Map,Jo.set(t,i));let r=i.get(e);void 0===r&&(r=new Set,i.set(e,r)),r.add({cb:n,priority:o}),Zo.delete(t)},deregisterListener(e,t){let n=Jo.get(t);void 0!==n&&n.has(e)&&(n.delete(e),Jo.set(t,n),Zo.delete(t))},executeListeners(e,t){const n=Jo.get(e);if(void 0===n||0===n.size)return!0;if(!1===Zo.has(e)){const t=[];for(const[e,o]of n)for(const n of o)t.push({...n,component:e});t.sort((e,t)=>t.priority-e.priority),Zo.set(e,t)}const o=Zo.get(e);for(let i=0;i<o.length;i++){const{cb:e,component:n}=o[i];if(!1===e.call(n,t))return!1}return!0},removeListeners(e){for(const[t,n]of Jo)n.has(e)&&(n.delete(e),Zo.delete(t),0===n.size&&Jo.delete(t))}},ti={focus:{value:function(e){return p.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(e)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(e){this[s.state].hasFocus=!0,Yo.set(this,e)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[s.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.eol=!0,this.lifecycle.state="destroy";for(let e in this[s.state])Array.isArray(this[s.state][e])&&(this[s.state][e]=[]);this.$clearTimeouts(),this.$clearIntervals(),ei.removeListeners(this),ni(this[s.children]),this[s.children].length=0,$(this[s.effects]),this[s.state]={},this[s.props]={},this[s.computed]=null,this.lifecycle={},this[s.effects].length=0,this.parent=null,this.rootParent=null,this[s.wrapper]=null,this[s.originalState]=null,this[s.slots].length=0,delete this[s.computed],delete this[s.effects],delete this.parent,delete this.rootParent,delete this[s.wrapper],delete this[s.originalState],delete this[s.children],delete this[s.slots],delete this.componentId,delete this[s.id],delete this.ref,this[s.holder].destroy(),this[s.holder]=null,delete this[s.holder],p.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},[s.removeGlobalEffects]:{value:function(e=[]){$(e)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(e){return p.warn("this.select is deprecated, use this.$select instead"),this.$select(e)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(e){let t=null;return this[s.children].forEach(n=>{Array.isArray(n)?n.forEach(n=>{n.ref===e&&(t=n)}):Object.getPrototypeOf(n)===Object.prototype?Object.keys(n).forEach(o=>{n[o].ref===e&&(t=n[o])}):n.ref===e&&(t=n)}),t},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(e){return p.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(e)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(e){let t=this[s.originalState];if(e.indexOf(".")>-1){const n=e.split(".");e=n.pop(n);for(let e=0;e<n.length;e++)t=t[n[e]]}V(t,e,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(e,t){return{type:e,props:t}},writable:!1,enumerable:!0,configurable:!1}},ni=function(e){for(let t=0;t<e.length;t++){if(!e[t])return;e[t].destroy&&"function"==typeof e[t].destroy?e[t].destroy():Object.getPrototypeOf(e[t])===Object.prototype&&ni(Object.values(e[t])),e[t]=null}e.length=0},oi={$setTimeout:{value:function(e,t,...n){if(!0===this.eol)return;const o=setTimeout(()=>{this.$clearTimeout(o),e.apply(null,n)},t,n);return this[s.timeouts].push(o),o},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(e){const t=this[s.timeouts].indexOf(e);t>-1&&(this[s.timeouts].splice(t,1),clearTimeout(e))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let e=0;e<this[s.timeouts].length;e++)clearTimeout(this[s.timeouts][e]);this[s.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(e,t,...n){if(!0===this.eol)return;const o=setInterval(()=>e.apply(null,n),t,n);return this[s.intervals].push(o),o},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(e){const t=this[s.intervals].indexOf(e);t>-1&&(this[s.intervals].splice(t,1),clearTimeout(e))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let e=0;e<this[s.intervals].length;e++)clearInterval(this[s.intervals][e]);this[s.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},ii={$emit:{value:function(e,t){return ei.executeListeners(e,t)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(e,t,n=0){!0!==this.eol&&ei.registerListener(this,e,t,n)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(e){ei.deregisterListener(this,e)},writable:!1,enumerable:!0,configurable:!1}},ri={$router:{value:{to:Go,back:Vo,get currentRoute(){return Mo},get routes(){return this[s.routes]},get navigating(){return Ro.navigating},state:Ro},writable:!1,enumerable:!0,configurable:!1}},si={$announcer:{value:Io,writable:!1,enumerable:!0,configurable:!1}},ai={$size:{value:function(e={w:0,h:0}){this[s.holder].set("w",e.w||0),this[s.holder].set("h",e.h||0)},writable:!1,enumerable:!0,configurable:!1},[s.renderer]:{value:()=>so,writable:!1,enumerable:!0,configurable:!1},[s.getChildren]:{value(){const e=this.rootParent||this.parent;return(this[s.children]||[]).concat(e&&e[s.getChildren]().map(e=>Object.getPrototypeOf(e)===Object.prototype?Object.values(e).map(e=>(e.forComponent=e[Symbol.for("config")]&&e[Symbol.for("config")].parent.component,e)):e).flat().filter(e=>{if(e&&e.component)return e.component&&e.component.componentId===this.componentId||e.forComponent&&e.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},li={...ii,...ri,...si},ui=Object.defineProperties({[s.launched]:!1},{...ti,...oi,...li,...ai}),ci={cast:e=>e,required:!1},pi=(e,t=[])=>{-1===t.indexOf("ref")&&t.push("ref"),e[s.propKeys]=[];const n=t.length;for(let o=0;o<n;o++){const n={...ci,..."object"==typeof t[o]?t[o]:{key:t[o]}};e[s.propKeys].push(n.key),Object.defineProperty(e,n.key,{get(){const e=n.cast(void 0!==this[s.props]&&n.key in this[s.props]?this[s.props][n.key]:"default"in n?n.default:void 0);return!0===n.required&&void 0===e&&p.warn(`${n.key} is required`),e},set(e){p.warn(`Warning! Avoid mutating props directly (prop "${n.key}" in component "${this.componentId}")`),this[s.props][n.key]=e}})}},di=(e,t=()=>{})=>{Object.defineProperty(e,s.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const n=Object.keys(t.apply(e)||{});n.push(["hasFocus"]);const o=n.length;for(let i=0;i<o;i++){const t=n[i];void 0!==e[s.propKeys]&&e[s.propKeys].indexOf(t)>-1&&p.error(`State ${t} already exists as a prop`),void 0!==e[s.methodKeys]&&e[s.methodKeys].indexOf(t)>-1&&p.error(`State ${t} already exists as a method`),e[s.stateKeys].push(t),Object.defineProperty(e,t,{get(){return this[s.state][t]},set(e){this[s.state][t]=e}})}},hi=(e,t)=>{e[s.computedKeys]=[];for(let n in t)e[s.stateKeys]&&e[s.stateKeys].indexOf(n)>-1?p.error(`${n} already exists as a state variable`):e[s.propKeys]&&e[s.propKeys].indexOf(n)>-1?p.error(`${n} already exists as a prop`):e[s.methodKeys]&&e[s.methodKeys].indexOf(n)>-1?p.error(`${n} already exists as a method`):("function"!=typeof t[n]&&p.warn(`${n} is not a function`),e[s.computedKeys].push(n),Object.defineProperty(e,n,{get(){return t[n].apply(this)}}))},fi=(e,t)=>{e[s.watchKeys]=[],e[s.watchers]={};for(let n in t)"function"!=typeof t[n]&&console.warn(`${n} is not a function`),e[s.watchKeys].push(n),e[s.watchers][n]=function(e,o){t[n].call(this,e,o)}};let mi=0;function gi(e,t){e[s.identifier]=++mi,((e={},t)=>{O[t]={},[...Object.keys(e),...Object.getOwnPropertySymbols(e)].forEach(n=>{"function"==typeof e[n]&&(O[t][n]=e[n])})})(t.hooks,e[s.identifier]),pi(e,t.props),t.methods&&((e,t)=>{e[s.methodKeys]=[];for(let n in t)e[s.propKeys]&&e[s.propKeys].indexOf(n)>-1?p.error(`${n} already exists as a prop`):("function"!=typeof t[n]&&p.warn(`${n} is not a function`),e[s.methodKeys].push(n),e[n]=t[n])})(e,t.methods),di(e,t.state),t.computed&&hi(e,t.computed),t.watch&&fi(e,t.watch);const n=void 0!==t.router?t.router:t.routes;return void 0!==n&&((e,t)=>{let n=t;!1===Array.isArray(t)&&(e[s.routerHooks]=t.hooks,n=t.routes),e[s.routes]=[],Object.keys(n).forEach(t=>{e[s.routes][t]={...n[t],options:{inHistory:!0,...n[t].options}}})})(e,n),t.input&&((e,t)=>{e[s.inputEvents]=[],Object.keys(t).forEach(n=>{"function"!=typeof t[n]&&p.warn(`${t[n]} is not a function`),e[s.inputEvents][n]=t[n]})})(e,t.input),e}const yi=()=>Ai("Circle",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};return a[0]=this.element({parent:e||"root"},t),l.color=t.color,l.w=t.size,l.h=t.size,l.effects=[t.shader("radius",{radius:t.radius})],a[0].populate(l),a},effects:[function(e,t,n,o,i,r){t[0].set("color",e.color)},function(e,t,n,o,i,r){t[0].set("w",e.size)},function(e,t,n,o,i,r){t[0].set("h",e.size)},function(e,t,n,o,i,r){t[0].set("effects",[e.shader("radius",{radius:e.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let vi=null;const bi=()=>Ai("RouterView",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};return a[0]=this.element({parent:e||"root"},t),l.w=1*e.node.width,l.height=1*e.node.height,a[0].populate(l),a},effects:[],context:{}},state:()=>({activeView:null}),hooks:{ready(){vi=()=>Ho.navigate.apply(this),Ho.navigate.apply(this),window.addEventListener("hashchange",vi)},destroy(){window.removeEventListener("hashchange",vi,!1)},focus(){this.activeView&&this.activeView.$focus()}},input:{back(e){!1===Ho.back.call(this)&&this.parent.$focus(e)}}}),xi=()=>Ai("Sprite",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};return a[0]=this.element({parent:e||"root"},t),l.w=1*e.node.width,l.h=1*e.node.height,l.texture=t.texture,l.color=t.color,a[0].populate(l),a},effects:[function(e,t,n,o,i,r){t[0].set("texture",e.texture)},function(e,t,n,o,i,r){t[0].set("color",e.color)}],context:{}},props:["image","map","frame","color"],state:()=>({spriteTexture:null}),computed:{texture(){const e="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(null!==this.spriteTexture&&e)return this[s.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:e.x,y:e.y,width:e.w,height:e.h})}},hooks:{ready(){this.spriteTexture=this[s.renderer]().createTexture("ImageTexture",{src:this.image})}}}),wi=()=>Ai("FPScounter",{code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===p?c:t),h.y=15,h.x=20,a[1].populate(h),!0===p&&(d-=1),e=a[1];a[2]=this.element({parent:e||"root"},!0===p?c:t),a[2].populate({}),!0===p&&(d-=1);const f=n.components&&n.components.Sprite||o.Sprite;e=a[2];const m={};a[3]=this.element({parent:e||"root"},!0===p?c:t),m.image=t.image,m.w=43,m.h=25,m.map=t.sprite,m.frame="fps";const g=[];if(void 0!==f)for(let Xe in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[Xe]],g.push(f[Symbol.for("config")].props[Xe]);a[3].populate(m),!0===p&&(d-=1),e=a[3];const y={};let v;if(y.image=t.image,y.w=43,y.h=25,y.map=t.sprite,y.frame="fps",l=y.is||"Sprite","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[4]=v.call(null,{props:y},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],c=a[4],p=!0):e=a[4][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[2];const b={};a[5]=this.element({parent:e||"root"},!0===p?c:t),b.x=58,b.y=2,a[5].populate(b),!0===p&&(d-=1);const x=n.components&&n.components.Sprite||o.Sprite;e=a[5];const w={};a[6]=this.element({parent:e||"root"},!0===p?c:t),w.image=t.image,w.x=0,w.h=20,w.w=20,w.map=t.sprite,w.frame=t.fps[0];const S=[];if(void 0!==x)for(let Xe in x[Symbol.for("config")].props)delete w[x[Symbol.for("config")].props[Xe]],S.push(x[Symbol.for("config")].props[Xe]);a[6].populate(w),!0===p&&(d-=1),e=a[6];const T={};let k;if(T.image=t.image,T.x=0,T.h=20,T.w=20,T.map=t.sprite,u=t.fps[0],!0===Array.isArray(u)&&(u=r(u).slice(0)),T.frame=u,l=T.is||"Sprite","string"==typeof l){if(k=n.components&&n.components[l]||o[l],!k)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(k=l);a[7]=k.call(null,{props:T},a[6],t),a[7][Symbol.for("slots")][0]?(e=a[7][Symbol.for("slots")][0],c=a[7],p=!0):e=a[7][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const C=n.components&&n.components.Sprite||o.Sprite;e=a[5];const A={};a[8]=this.element({parent:e||"root"},!0===p?c:t),A.image=t.image,A.x=18,A.h=20,A.w=20,A.map=t.sprite,A.frame=t.fps[1];const E=[];if(void 0!==C)for(let Xe in C[Symbol.for("config")].props)delete A[C[Symbol.for("config")].props[Xe]],E.push(C[Symbol.for("config")].props[Xe]);a[8].populate(A),!0===p&&(d-=1),e=a[8];const I={};let M;if(I.image=t.image,I.x=18,I.h=20,I.w=20,I.map=t.sprite,u=t.fps[1],!0===Array.isArray(u)&&(u=r(u).slice(0)),I.frame=u,l=I.is||"Sprite","string"==typeof l){if(M=n.components&&n.components[l]||o[l],!M)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(M=l);a[9]=M.call(null,{props:I},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],c=a[9],p=!0):e=a[9][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const R=n.components&&n.components.Sprite||o.Sprite;e=a[5];const _={};a[10]=this.element({parent:e||"root"},!0===p?c:t),_.image=t.image,_.x=36,_.h=20,_.w=20,_.map=t.sprite,_.frame=t.fps[2];const L=[];if(void 0!==R)for(let Xe in R[Symbol.for("config")].props)delete _[R[Symbol.for("config")].props[Xe]],L.push(R[Symbol.for("config")].props[Xe]);a[10].populate(_),!0===p&&(d-=1),e=a[10];const D={};let P;if(D.image=t.image,D.x=36,D.h=20,D.w=20,D.map=t.sprite,u=t.fps[2],!0===Array.isArray(u)&&(u=r(u).slice(0)),D.frame=u,l=D.is||"Sprite","string"==typeof l){if(P=n.components&&n.components[l]||o[l],!P)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(P=l);a[11]=P.call(null,{props:D},a[10],t),a[11][Symbol.for("slots")][0]?(e=a[11][Symbol.for("slots")][0],c=a[11],p=!0):e=a[11][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[1];const O={};a[12]=this.element({parent:e||"root"},!0===p?c:t),O.x=150,a[12].populate(O),!0===p&&(d-=1);const N=n.components&&n.components.Sprite||o.Sprite;e=a[12];const U={};a[13]=this.element({parent:e||"root"},!0===p?c:t),U.image=t.image,U.y=2,U.w=48,U.h=25,U.map=t.sprite,U.frame="avg";const B=[];if(void 0!==N)for(let Xe in N[Symbol.for("config")].props)delete U[N[Symbol.for("config")].props[Xe]],B.push(N[Symbol.for("config")].props[Xe]);a[13].populate(U),!0===p&&(d-=1),e=a[13];const j={};let F;if(j.image=t.image,j.y=2,j.w=48,j.h=25,j.map=t.sprite,j.frame="avg",l=j.is||"Sprite","string"==typeof l){if(F=n.components&&n.components[l]||o[l],!F)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(F=l);a[14]=F.call(null,{props:j},a[13],t),a[14][Symbol.for("slots")][0]?(e=a[14][Symbol.for("slots")][0],c=a[14],p=!0):e=a[14][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[12];const z={};a[15]=this.element({parent:e||"root"},!0===p?c:t),z.x=63,z.y=2,a[15].populate(z),!0===p&&(d-=1);const $=n.components&&n.components.Sprite||o.Sprite;e=a[15];const G={};a[16]=this.element({parent:e||"root"},!0===p?c:t),G.image=t.image,G.x=0,G.h=20,G.w=20,G.map=t.sprite,G.frame=t.avgFps[0];const V=[];if(void 0!==$)for(let Xe in $[Symbol.for("config")].props)delete G[$[Symbol.for("config")].props[Xe]],V.push($[Symbol.for("config")].props[Xe]);a[16].populate(G),!0===p&&(d-=1),e=a[16];const H={};let q;if(H.image=t.image,H.x=0,H.h=20,H.w=20,H.map=t.sprite,u=t.avgFps[0],!0===Array.isArray(u)&&(u=r(u).slice(0)),H.frame=u,l=H.is||"Sprite","string"==typeof l){if(q=n.components&&n.components[l]||o[l],!q)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(q=l);a[17]=q.call(null,{props:H},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],c=a[17],p=!0):e=a[17][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const X=n.components&&n.components.Sprite||o.Sprite;e=a[15];const W={};a[18]=this.element({parent:e||"root"},!0===p?c:t),W.image=t.image,W.x=18,W.h=20,W.w=20,W.map=t.sprite,W.frame=t.avgFps[1];const K=[];if(void 0!==X)for(let Xe in X[Symbol.for("config")].props)delete W[X[Symbol.for("config")].props[Xe]],K.push(X[Symbol.for("config")].props[Xe]);a[18].populate(W),!0===p&&(d-=1),e=a[18];const Y={};let Q;if(Y.image=t.image,Y.x=18,Y.h=20,Y.w=20,Y.map=t.sprite,u=t.avgFps[1],!0===Array.isArray(u)&&(u=r(u).slice(0)),Y.frame=u,l=Y.is||"Sprite","string"==typeof l){if(Q=n.components&&n.components[l]||o[l],!Q)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(Q=l);a[19]=Q.call(null,{props:Y},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],c=a[19],p=!0):e=a[19][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const J=n.components&&n.components.Sprite||o.Sprite;e=a[15];const Z={};a[20]=this.element({parent:e||"root"},!0===p?c:t),Z.image=t.image,Z.x=36,Z.h=20,Z.w=20,Z.map=t.sprite,Z.frame=t.avgFps[2];const ee=[];if(void 0!==J)for(let Xe in J[Symbol.for("config")].props)delete Z[J[Symbol.for("config")].props[Xe]],ee.push(J[Symbol.for("config")].props[Xe]);a[20].populate(Z),!0===p&&(d-=1),e=a[20];const te={};let ne;if(te.image=t.image,te.x=36,te.h=20,te.w=20,te.map=t.sprite,u=t.avgFps[2],!0===Array.isArray(u)&&(u=r(u).slice(0)),te.frame=u,l=te.is||"Sprite","string"==typeof l){if(ne=n.components&&n.components[l]||o[l],!ne)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(ne=l);a[21]=ne.call(null,{props:te},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],c=a[21],p=!0):e=a[21][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[1];const oe={};a[22]=this.element({parent:e||"root"},!0===p?c:t),oe.x=0,oe.y=40,a[22].populate(oe),!0===p&&(d-=1);const ie=n.components&&n.components.Sprite||o.Sprite;e=a[22];const re={};a[23]=this.element({parent:e||"root"},!0===p?c:t),re.image=t.image,re.x="-2",re.w=47,re.h=25,re.map=t.sprite,re.frame="min";const se=[];if(void 0!==ie)for(let Xe in ie[Symbol.for("config")].props)delete re[ie[Symbol.for("config")].props[Xe]],se.push(ie[Symbol.for("config")].props[Xe]);a[23].populate(re),!0===p&&(d-=1),e=a[23];const ae={};let le;if(ae.image=t.image,ae.x="-2",ae.w=47,ae.h=25,ae.map=t.sprite,ae.frame="min",l=ae.is||"Sprite","string"==typeof l){if(le=n.components&&n.components[l]||o[l],!le)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(le=l);a[24]=le.call(null,{props:ae},a[23],t),a[24][Symbol.for("slots")][0]?(e=a[24][Symbol.for("slots")][0],c=a[24],p=!0):e=a[24][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[22];const ue={};a[25]=this.element({parent:e||"root"},!0===p?c:t),ue.x=58,ue.y=2,a[25].populate(ue),!0===p&&(d-=1);const ce=n.components&&n.components.Sprite||o.Sprite;e=a[25];const pe={};a[26]=this.element({parent:e||"root"},!0===p?c:t),pe.image=t.image,pe.x=0,pe.h=20,pe.w=20,pe.map=t.sprite,pe.frame=t.minFps[0];const de=[];if(void 0!==ce)for(let Xe in ce[Symbol.for("config")].props)delete pe[ce[Symbol.for("config")].props[Xe]],de.push(ce[Symbol.for("config")].props[Xe]);a[26].populate(pe),!0===p&&(d-=1),e=a[26];const he={};let fe;if(he.image=t.image,he.x=0,he.h=20,he.w=20,he.map=t.sprite,u=t.minFps[0],!0===Array.isArray(u)&&(u=r(u).slice(0)),he.frame=u,l=he.is||"Sprite","string"==typeof l){if(fe=n.components&&n.components[l]||o[l],!fe)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(fe=l);a[27]=fe.call(null,{props:he},a[26],t),a[27][Symbol.for("slots")][0]?(e=a[27][Symbol.for("slots")][0],c=a[27],p=!0):e=a[27][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const me=n.components&&n.components.Sprite||o.Sprite;e=a[25];const ge={};a[28]=this.element({parent:e||"root"},!0===p?c:t),ge.image=t.image,ge.x=18,ge.h=20,ge.w=20,ge.map=t.sprite,ge.frame=t.minFps[1];const ye=[];if(void 0!==me)for(let Xe in me[Symbol.for("config")].props)delete ge[me[Symbol.for("config")].props[Xe]],ye.push(me[Symbol.for("config")].props[Xe]);a[28].populate(ge),!0===p&&(d-=1),e=a[28];const ve={};let be;if(ve.image=t.image,ve.x=18,ve.h=20,ve.w=20,ve.map=t.sprite,u=t.minFps[1],!0===Array.isArray(u)&&(u=r(u).slice(0)),ve.frame=u,l=ve.is||"Sprite","string"==typeof l){if(be=n.components&&n.components[l]||o[l],!be)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(be=l);a[29]=be.call(null,{props:ve},a[28],t),a[29][Symbol.for("slots")][0]?(e=a[29][Symbol.for("slots")][0],c=a[29],p=!0):e=a[29][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const xe=n.components&&n.components.Sprite||o.Sprite;e=a[25];const we={};a[30]=this.element({parent:e||"root"},!0===p?c:t),we.image=t.image,we.x=36,we.h=20,we.w=20,we.map=t.sprite,we.frame=t.minFps[2];const Se=[];if(void 0!==xe)for(let Xe in xe[Symbol.for("config")].props)delete we[xe[Symbol.for("config")].props[Xe]],Se.push(xe[Symbol.for("config")].props[Xe]);a[30].populate(we),!0===p&&(d-=1),e=a[30];const Te={};let ke;if(Te.image=t.image,Te.x=36,Te.h=20,Te.w=20,Te.map=t.sprite,u=t.minFps[2],!0===Array.isArray(u)&&(u=r(u).slice(0)),Te.frame=u,l=Te.is||"Sprite","string"==typeof l){if(ke=n.components&&n.components[l]||o[l],!ke)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(ke=l);a[31]=ke.call(null,{props:Te},a[30],t),a[31][Symbol.for("slots")][0]?(e=a[31][Symbol.for("slots")][0],c=a[31],p=!0):e=a[31][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[1];const Ce={};a[32]=this.element({parent:e||"root"},!0===p?c:t),Ce.x=150,Ce.y=40,a[32].populate(Ce),!0===p&&(d-=1);const Ae=n.components&&n.components.Sprite||o.Sprite;e=a[32];const Ee={};a[33]=this.element({parent:e||"root"},!0===p?c:t),Ee.image=t.image,Ee.w=53,Ee.h=25,Ee.map=t.sprite,Ee.frame="max";const Ie=[];if(void 0!==Ae)for(let Xe in Ae[Symbol.for("config")].props)delete Ee[Ae[Symbol.for("config")].props[Xe]],Ie.push(Ae[Symbol.for("config")].props[Xe]);a[33].populate(Ee),!0===p&&(d-=1),e=a[33];const Me={};let Re;if(Me.image=t.image,Me.w=53,Me.h=25,Me.map=t.sprite,Me.frame="max",l=Me.is||"Sprite","string"==typeof l){if(Re=n.components&&n.components[l]||o[l],!Re)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(Re=l);a[34]=Re.call(null,{props:Me},a[33],t),a[34][Symbol.for("slots")][0]?(e=a[34][Symbol.for("slots")][0],c=a[34],p=!0):e=a[34][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[32];const _e={};a[35]=this.element({parent:e||"root"},!0===p?c:t),_e.x=63,_e.y=2,a[35].populate(_e),!0===p&&(d-=1);const Le=n.components&&n.components.Sprite||o.Sprite;e=a[35];const De={};a[36]=this.element({parent:e||"root"},!0===p?c:t),De.image=t.image,De.x=0,De.h=20,De.w=20,De.map=t.sprite,De.frame=t.maxFps[0];const Pe=[];if(void 0!==Le)for(let Xe in Le[Symbol.for("config")].props)delete De[Le[Symbol.for("config")].props[Xe]],Pe.push(Le[Symbol.for("config")].props[Xe]);a[36].populate(De),!0===p&&(d-=1),e=a[36];const Oe={};let Ne;if(Oe.image=t.image,Oe.x=0,Oe.h=20,Oe.w=20,Oe.map=t.sprite,u=t.maxFps[0],!0===Array.isArray(u)&&(u=r(u).slice(0)),Oe.frame=u,l=Oe.is||"Sprite","string"==typeof l){if(Ne=n.components&&n.components[l]||o[l],!Ne)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(Ne=l);a[37]=Ne.call(null,{props:Oe},a[36],t),a[37][Symbol.for("slots")][0]?(e=a[37][Symbol.for("slots")][0],c=a[37],p=!0):e=a[37][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const Ue=n.components&&n.components.Sprite||o.Sprite;e=a[35];const Be={};a[38]=this.element({parent:e||"root"},!0===p?c:t),Be.image=t.image,Be.x=18,Be.h=20,Be.w=20,Be.map=t.sprite,Be.frame=t.maxFps[1];const je=[];if(void 0!==Ue)for(let Xe in Ue[Symbol.for("config")].props)delete Be[Ue[Symbol.for("config")].props[Xe]],je.push(Ue[Symbol.for("config")].props[Xe]);a[38].populate(Be),!0===p&&(d-=1),e=a[38];const Fe={};let ze;if(Fe.image=t.image,Fe.x=18,Fe.h=20,Fe.w=20,Fe.map=t.sprite,u=t.maxFps[1],!0===Array.isArray(u)&&(u=r(u).slice(0)),Fe.frame=u,l=Fe.is||"Sprite","string"==typeof l){if(ze=n.components&&n.components[l]||o[l],!ze)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(ze=l);a[39]=ze.call(null,{props:Fe},a[38],t),a[39][Symbol.for("slots")][0]?(e=a[39][Symbol.for("slots")][0],c=a[39],p=!0):e=a[39][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const $e=n.components&&n.components.Sprite||o.Sprite;e=a[35];const Ge={};a[40]=this.element({parent:e||"root"},!0===p?c:t),Ge.image=t.image,Ge.x=36,Ge.h=20,Ge.w=20,Ge.map=t.sprite,Ge.frame=t.maxFps[2];const Ve=[];if(void 0!==$e)for(let Xe in $e[Symbol.for("config")].props)delete Ge[$e[Symbol.for("config")].props[Xe]],Ve.push($e[Symbol.for("config")].props[Xe]);a[40].populate(Ge),!0===p&&(d-=1),e=a[40];const He={};let qe;if(He.image=t.image,He.x=36,He.h=20,He.w=20,He.map=t.sprite,u=t.maxFps[2],!0===Array.isArray(u)&&(u=r(u).slice(0)),He.frame=u,l=He.is||"Sprite","string"==typeof l){if(qe=n.components&&n.components[l]||o[l],!qe)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(qe=l);return a[41]=qe.call(null,{props:He},a[40],t),a[41][Symbol.for("slots")][0]?(e=a[41][Symbol.for("slots")][0],c=a[41],p=!0):e=a[41][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip6&&-1!==skip6.indexOf("frame")||t[6].set("frame",e.fps[0])},function(e,t,n,o,i,r){t[7][Symbol.for("props")].frame=e.fps[0]},function(e,t,n,o,i,r){"undefined"!=typeof skip8&&-1!==skip8.indexOf("frame")||t[8].set("frame",e.fps[1])},function(e,t,n,o,i,r){t[9][Symbol.for("props")].frame=e.fps[1]},function(e,t,n,o,i,r){"undefined"!=typeof skip10&&-1!==skip10.indexOf("frame")||t[10].set("frame",e.fps[2])},function(e,t,n,o,i,r){t[11][Symbol.for("props")].frame=e.fps[2]},function(e,t,n,o,i,r){"undefined"!=typeof skip16&&-1!==skip16.indexOf("frame")||t[16].set("frame",e.avgFps[0])},function(e,t,n,o,i,r){t[17][Symbol.for("props")].frame=e.avgFps[0]},function(e,t,n,o,i,r){"undefined"!=typeof skip18&&-1!==skip18.indexOf("frame")||t[18].set("frame",e.avgFps[1])},function(e,t,n,o,i,r){t[19][Symbol.for("props")].frame=e.avgFps[1]},function(e,t,n,o,i,r){"undefined"!=typeof skip20&&-1!==skip20.indexOf("frame")||t[20].set("frame",e.avgFps[2])},function(e,t,n,o,i,r){t[21][Symbol.for("props")].frame=e.avgFps[2]},function(e,t,n,o,i,r){"undefined"!=typeof skip26&&-1!==skip26.indexOf("frame")||t[26].set("frame",e.minFps[0])},function(e,t,n,o,i,r){t[27][Symbol.for("props")].frame=e.minFps[0]},function(e,t,n,o,i,r){"undefined"!=typeof skip28&&-1!==skip28.indexOf("frame")||t[28].set("frame",e.minFps[1])},function(e,t,n,o,i,r){t[29][Symbol.for("props")].frame=e.minFps[1]},function(e,t,n,o,i,r){"undefined"!=typeof skip30&&-1!==skip30.indexOf("frame")||t[30].set("frame",e.minFps[2])},function(e,t,n,o,i,r){t[31][Symbol.for("props")].frame=e.minFps[2]},function(e,t,n,o,i,r){"undefined"!=typeof skip36&&-1!==skip36.indexOf("frame")||t[36].set("frame",e.maxFps[0])},function(e,t,n,o,i,r){t[37][Symbol.for("props")].frame=e.maxFps[0]},function(e,t,n,o,i,r){"undefined"!=typeof skip38&&-1!==skip38.indexOf("frame")||t[38].set("frame",e.maxFps[1])},function(e,t,n,o,i,r){t[39][Symbol.for("props")].frame=e.maxFps[1]},function(e,t,n,o,i,r){"undefined"!=typeof skip40&&-1!==skip40.indexOf("frame")||t[40].set("frame",e.maxFps[2])},function(e,t,n,o,i,r){t[41][Symbol.for("props")].frame=e.maxFps[2]}],context:{}},state:()=>({image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}),hooks:{ready(){}}}),Si={log:{name:"log",plugin:()=>c("App")}},Ti=(e,t="",n={})=>{let o;if("object"==typeof t?n=t:o=t,"function"==typeof e){if(void 0===o)throw Error("Error registering plugin: name is required for plugin");Si[o]={plugin:e,options:n}}else e.plugin&&Ti(e.plugin,o||e.name,n)};let ki;const Ci=e=>{throw new Error(`Parameter ${e} is required`)},Ai=(e=Ci("name"),t=Ci("config"))=>{let n;const o=function(n,o,i,r){this.componentId=(e=>`BlitsComponent::${e}_${D[e]=(D[e]||0)+1}`)(e),this[s.effects]=[],this.lifecycle=Object.assign(Object.create(te),{component:this,previous:null,current:null}),this.parent=i,this.rootParent=r,this[s.holder]=o,this[s.id]=++P,this[s.props]=Z(n.props||{},a.get("reactivityMode")),this[s.timeouts]=[],this[s.intervals]=[],this[s.originalState]=t.state&&"function"==typeof t.state&&t.state.apply(this)||{},this[s.originalState].hasFocus=!1,this[s.state]=Z(this[s.originalState],a.get("reactivityMode")),this.lifecycle.state="init",this[s.children]=t.code.render.apply(ao,[o,this,t,ki,H,K,p])||[],this[s.wrapper]=this[s.children][0],this[s.slots]=this[s.children].filter(e=>e[s.isSlot]),t.hooks&&(t.hooks.frameTick&&so.on("frameTick",(e,t)=>N("frameTick",this[s.identifier],this,[t])),t.hooks.idle&&so.on("idle",()=>{N("idle",this[s.identifier],this)}),t.hooks.attach&&this[s.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),t.hooks.detach&&this[s.wrapper].node.on("outOfBounds",(e,{previous:t})=>{t>0&&(this.lifecycle.state="detach")}),t.hooks.enter&&this[s.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),t.hooks.exit&&this[s.wrapper].node.on("outOfBounds",()=>{this.lifecycle.state="exit"}));const l=t.code.effects;for(let e=0;e<l.length;e++){const n=()=>{l[e](this,this[s.children],t,ki,r,H)};this[s.effects].push(n),H(n)}if(this[s.watchers]){const e=Object.keys(this[s.watchers]),t=e.length;for(let n=0;n<t;n++){let t=this,o=e[n];const i=o;if(o.indexOf(".")>-1){const e=o.split(".");o=e.pop();for(let n=0;n<e.length;n++)t=t[e[n]]}let r=this[o];const a=(e=!1)=>{const n=t[o];r===n&&!0!==e||(this[s.watchers][i].apply(this,[n,r]),r=n)};this[s.effects].push(a),H(a)}}return setTimeout(()=>this.lifecycle.state="ready"),this},i=(i={},r,a,l)=>{if(!1===ui[s.launched]){const e=Object.keys(Si),t=e.length,n={};for(let o=0;o<t;o++){const t=e[o],i=`$${t}`;i in ui&&p.warn(`"${t}" (this.${i}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const r=Si[t];n[i]={value:Object.defineProperties(r.plugin(r.options),li),writable:!1,enumerable:!0,configurable:!0}}Object.defineProperties(ui,n);for(const o in n)Object.defineProperties(ui[o],n),delete ui[o][o];ki={Circle:yi(),RouterView:bi(),Sprite:xi(),FPScounter:wi()},ui[s.launched]=!0}return void 0===n&&(p.debug(`Setting up ${e} component`),n=gi(Object.create(ui),t)),void 0===t.code&&(p.debug(`Generating code for ${e} component`),t.code=w.call(t,((e="",t,n,o=null)=>{let i=0,r=0,a=[],l=null,u=0;const c=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,p=/^\s*(\/?>)\s*/,d=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,h=/^<>\s*/,f=/^\s*(<\/>)\s*/,m=t=>{i>=e.length||t()},g=e=>e.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),y=t=>{const n=e.slice(i).match(t);return n&&(r=i,i+=n[0].length),n},b=()=>{y(h)?(a.push({[Symbol.for("componentType")]:null,[s.type]:"opening",[s.level]:u,[s.cursorTagStart]:r}),u++,m(b)):m(x)},x=()=>{y(f)?(u--,a.push({[Symbol.for("componentType")]:null,[s.type]:"closing",[s.level]:u}),m(b)):m(w)},w=()=>{const e=y(c);if(!e)throw E("InvalidTag");l={[Symbol.for("componentType")]:e[1],[s.level]:u,[s.cursorTagStart]:r},e[0].startsWith("</")?(u--,l[s.type]="closing",l[s.level]=u):(l[s.type]="opening",u++),m(S)},S=()=>{const t=y(p);if(t){if("/>"===t[1]){if("closing"===l[s.type])throw E("InvalidClosingTag");l[s.type]="self-closing",u--}if("opening"===l[s.type]){const t=e.slice(i,e.indexOf("<",i));t&&(l.content=t,i+=t.length)}a.push(l),m(b)}else m(T)},T=()=>{const e=y(d);if(!e)throw E("InvalidAttribute");{if("closing"===l[s.type])throw E("AttributesInClosingTag");const t=e[2],n=new RegExp(`^(.*?)${t}\\s*`),o=y(n);if(!o)throw E("MissingOrInvalidAttributeValue");{const t=k(e[1],o[1]);l[t.name]=t.value,m(S)}}},k=(e,t)=>{if(e.includes(".")){const[n,o]=e.split(".");return{name:n,value:`{${o}: ${t}}`}}return["color",":color",":effects","effects"].includes(e)?C(e,t):{name:e,value:t}},C=(e,t)=>{let n=t,o=v(n,null);if(null===o){const e=/'([^']+)'/g;let i,r=0,s="";for(;null!==(i=e.exec(t));){const e=i[1],n=i.index,a=i[0].length;s+=t.slice(r,n),o=v(e,null),s+=null===o?t.slice(n,n+a):`'${o}'`,r=n+a}s+=t.slice(r),n=s}else n=o;return{name:e,value:n}},A=e=>{let t=[],n=!1,o={children:[]},i=o;for(let r=0;r<e.length;r++){let o=e[r];if(0===o[s.level]&&"closing"!==o[s.type]){if(n)throw I("MultipleTopLevelTags",o);if(void 0!==o[":for"])throw I("ForAttributeOnRootElement",o);n=!0}if("opening"===o[s.type])t.push({[s.level]:o[s.level],[s.type]:o[s.type],[s.cursorTagStart]:o[s.cursorTagStart],[Symbol.for("componentType")]:o[Symbol.for("componentType")],parent:i});else if("closing"===o[s.type]){const e=0===t.length;let n=!1,r=!1;if(e||(n=t[t.length-1][s.level]!==o[s.level],r=t[t.length-1][Symbol.for("componentType")]!==o[Symbol.for("componentType")]),e||n||r)throw I("MismatchedClosingTag",o);i=t.pop().parent}const a={...o};delete a[s.type],delete a[s.level],delete a[s.cursorTagStart],"opening"===o[s.type]?(r+1<e.length&&"closing"!==e[r+1][s.type]&&(a.children=[]),i.children.push(a),i=a):"self-closing"===o[s.type]&&i.children.push(a)}if(t.length>0)throw I("UnclosedTags",t);return o},E=t=>{t=`${t} in ${R()}`;const n=new Error(t);n.name="TemplateParseError";const o=Math.max(0,r-10),s=Math.min(e.length,i+50),a=e.slice(o,s),l=i-o;return n.context=M(l,a),n},I=(t,n)=>{t=`${t} in ${R()}`;const o=new Error(t);function i(t){const n=Math.max(0,t[s.cursorTagStart]-10),o=e.slice(n,n+50);return M(10,o)}return o.name="TemplateStructureError",Array.isArray(n)?o.context=n.map(e=>i(e)).join("\n"):o.context=i(n),o},M=(e,t)=>`\n${t}\n${" ".repeat(e)+"^"}\n`,R=()=>o||"Blits.Application";return(()=>{e=g(e);try{return m(b),A(a)}catch(t){throw"TemplateParseError"!=t.name&&"TemplateStructureError"!=t.name||(t.message=`${t.message}\n${t.context}`),t}})()})(t.template))),o.call(Object.create(n),i,r,a,l)};return i[Symbol.for("config")]=t,i[s.isComponent]=!0,i},Ei=t("B",{Component:Ai,Application:e=>{const t={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};let n,o,i;return e.hooks=e.hooks||{},e.hooks[s.destroy]=function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",o)},e.hooks[s.init]=function(){this.$announcer.toggle(a.get("announcer",!1));const e={...t,...a.get("keymap",{})};n=async t=>{const n=e[t.key]||e[t.keyCode]||t.key||t.keyCode;void 0!==this[s.inputEvents]&&void 0!==this[s.inputEvents].intercept&&(t=await this[s.inputEvents].intercept.call(this,t))instanceof KeyboardEvent==!1||(Yo.input(n,t),clearTimeout(i),i=setTimeout(()=>{Yo.hold=!0},a.get("holdTimeout",50)))},o=e=>{const t=Ko.get(e.code);void 0!==t&&"function"==typeof t&&(Ko.delete(e.code),t()),clearTimeout(i),Yo.hold=!1},document.addEventListener("keydown",n),document.addEventListener("keyup",o),setTimeout(()=>Yo.set(this))},Ai("App",e)},Launch:(e,t,o)=>{a.set(o),p=c("Blits"),async function(){let e;try{if(e=await ne(()=>n.import("./package-legacy-Ch59SPnt.js")),void 0!==e)return e.version}catch(t){return ro["@lightningjs/renderer"]}}().then(e=>{p.info("Blits Version ",io),p.info("Renderer Version ",e)}),ao.element=no,so=oo(e,t,o)},Plugin:Ti}),Ii=e=>new Promise((t,n)=>{const o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(0===o.status||200===o.status?t(JSON.parse(o.responseText)):n(o.statusText))},o.open("GET",e),o.send(null)}),Mi={name:"language",plugin(e={}){let t={},n={};const o=Z({language:"",loaded:0},a.get("reactivityMode"),!0),i=e=>{const n=0===Object.keys(t).length?"No translations loaded. Please load a file with translations or specify a translations object manually":e in t==!1&&`Language ${e} not available in the loaded translations`;n?(p.warn(n),o.language=e):r(e).then(()=>{o.language=e})},r=e=>new Promise(o=>{const i=t[e];"object"==typeof i?(n=i,o()):"string"==typeof i&&Ii(i).then(i=>{t[e]=i,n=i,o()}).catch(e=>{p.error(e)})}),s=e=>Ii(e).then(e=>{l(e)}).catch(e=>{p.error(e)}),l=e=>{t=e,r(o.language).then(()=>{o.loaded++})};return"file"in e?s(e.file).then(()=>{"language"in e&&i(e.language)}):"language"in e&&i(e.language),{translate(e){o.language,o.loaded;let t=[...arguments].slice(1);return 0===t.length?n&&n[e]||e:(1===t.length&&"object"==typeof t[0]&&(t=t.pop()),Object.keys(Array.isArray(t)?Object.assign({},t):t).reduce((e,n)=>e.replace(new RegExp("{\\s?"+n+"\\s?}","g"),t[n]),n&&n[e]||e))},get language(){return o.language},set(e){i(e)},translations(e){l(e)},load:e=>s(e)}}},Ri={name:"theme",plugin(e={}){let t={};const n=Z({current:"default"},a.get("reactivityMode"),!0);let o={},i=null;return"themes"in e==!0?(o=e.themes,n.current=e.current||"default",i=e.base||"default"):o={default:e},{get(e,r){if(n.current,void 0!==t[e])return t[e];const s=((e,t,n)=>{const o=n.split(".");for(let i=0;i<o.length;i++){const n=o[i];if(null!==e&&n in e==1)e=e[n],t=null!==t&&n in t==1?t[n]:null;else{if(null===t||n in t!=1){e=void 0;break}e=t=t[n]}}return e})(o[n.current],o[i]||null,e);return void 0!==s?(t[e]=s,s):r},set(e){e in o?(t={},n.current=e):p.warn(`Theme ${e} not found`)}}}},_i=e=>new URLSearchParams(window.location.search).get(e),Li={sky:{test:()=>navigator.userAgent.indexOf("WPE Sky")>-1||"sky"===_i("keymapping"),mapping:{Escape:"back",27:"back"}},webos:{test:()=>navigator.userAgent.indexOf("WebOS")>-1||"webos"===_i("keymapping"),mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test:()=>navigator.userAgent.indexOf("Tizen")>-1||"tizen"===_i("keymapping"),mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},Di=Ei.Component("PortalItem",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=370,l.h=320,l.scale={transition:t.hasFocus?1.1:1},l.color=t.backgroundColor,l.effects=[{type:"radius",props:{radius:6}}],a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.x=30,u.y=30,u.content=t.number,u.size=84,u.color=t.fontColor,u.__textnode=!0,a[1].populate(u),e=a[0];const c={};a[2]=this.element({parent:e||"root"},t),c.x=30,c.y=140,c.content=t.title,c.size=42,c.font="raleway",c.color=t.fontColor,c.letterspacing=2,c.__textnode=!0,a[2].populate(c),e=a[0];const p={};return a[3]=this.element({parent:e||"root"},t),p.x=30,p.y=200,p.content=t.description,p.maxwidth=300,p.size=28,p.color=t.fontColor,p.lineheight=32,p.__textnode=!0,a[3].populate(p),a},effects:[function(e,t,n,o,i,r){t[0].set("scale",{transition:e.hasFocus?1.1:1})},function(e,t,n,o,i,r){t[0].set("color",e.backgroundColor)},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:6}}])},function(e,t,n,o,i,r){t[1].set("content",e.number)},function(e,t,n,o,i,r){t[1].set("color",e.fontColor)},function(e,t,n,o,i,r){t[2].set("content",e.title)},function(e,t,n,o,i,r){t[2].set("color",e.fontColor)},function(e,t,n,o,i,r){t[3].set("content",e.description)},function(e,t,n,o,i,r){t[3].set("color",e.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),Pi=Ei.Component("PortalRow",{components:{PortalItem:Di},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===p?c:t),d.alpha={transition:{value:t.itemOffset<240?1:0,duration:200}},a[1].populate(d),e=a[1];const h={};a[2]=this.element({parent:e||"root"},!0===p?c:t),h.content=t.title,h.x=60,h.__textnode=!0,a[2].populate(h),e=a[1];const f={};a[3]=this.element({parent:e||"root"},!0===p?c:t),f.y=50,f.x=60,f.h=1,f.w=1800,f.color="0xe8d7f9ff",a[3].populate(f),e=a[0];const m={};a[4]=this.element({parent:e||"root"},!0===p?c:t),m.y=100,m.x={transition:t.rowOffset},a[4].populate(m),e=a[4];const g=[];let y,v;const b=(s=[],a,d)=>{const h=r(s),f=new Set;let m=h.length;const g={}||{};y=g.from||0,v="to"in g?g.to:h.length;for(;m--;){const e=h[m];m<v&&m>=y&&f.add(""+e.id)}let b=d.length;for(;b--;)if(!1===f.has(d[b])){const e=d[b];a[5][e]&&a[5][e].destroy(),delete a[5][e],a[6][e]&&a[6][e].destroy(),delete a[6][e]}d.length=0;const x=h.length,w=[];for(let S=0;S<x;S++){if(S<y||S>=v)continue;const s=Object.create(t);e=a[4],s.item=h[S],s.index=S,s.key=""+s.item.id,d.push(s.key);const f=n.components&&n.components.PortalItem||o.PortalItem;void 0===a[5]&&(a[5]={});const m={};void 0===a[5][s.key]&&(a[5][s.key]=this.element({parent:e||"root"},!0===p?c:t)),m.x={transition:{value:s.itemOffset+430*s.index,delay:s.index%4*50,duration:500}},m.title=s.item.title,m.description=s.item.description,m.id=s.item.id,m.index=s.index,m.ref="item"+s.index;const g=[];if(void 0!==f)for(let e in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[e]],g.push(f[Symbol.for("config")].props[e]);void 0===a[5][s.key].nodeId&&a[5][s.key].populate(m),void 0===a[6]&&(a[6]={}),e=a[5][s.key];const b={};if(void 0===a[6][s.key]){let i;if(u={transition:{value:s.itemOffset+430*s.index,delay:s.index%4*50,duration:500}},!0===Array.isArray(u)&&(u=r(u).slice(0)),b.x=u,b.title=s.item.title,b.description=s.item.description,b.id=s.item.id,b.index=s.index,u="item"+s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.ref=u,l=b.is||"PortalItem","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "PortalItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[6][s.key]=i.call(null,{props:b},a[5][s.key],t),a[6][s.key][Symbol.for("slots")][0]?(e=a[6][s.key][Symbol.for("slots")][0],c=a[6][s.key],p=!0):e=a[6][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==g&&-1!==g.indexOf("ref")||a[5][s.key].set("ref","item"+s.index)};i(x,null),w.push(x),t[Symbol.for("effects")].push(x),a[6][s.key][Symbol.for("props")].ref="item"+s.index}return w};let x;const w=()=>{t[Symbol.for("removeGlobalEffects")](x),x=null,x=b(t.items,a,g)};t[Symbol.for("effects")].push(w),i(w,["items"]);const S=()=>{t.itemOffset;for(let e=0;e<t.items.length;e++){if(e<y||e>=v)continue;const n={};n.index=e,n.item=t.items[e],n.key=n.item.id,"undefined"!=typeof skip5&&-1!==skip5.indexOf("x")||a[5][n.key].set("x",{transition:{value:t.itemOffset+430*n.index,delay:n.index%4*50,duration:500}})}};t[Symbol.for("effects")].push(S),i(S);const T=()=>{t.itemOffset;for(let e=0;e<t.items.length;e++){if(e<y||e>=v)continue;const n={};n.index=e,n.item=t.items[e],n.key=n.item.id,a[6][n.key][Symbol.for("props")].x={transition:{value:t.itemOffset+430*n.index,delay:n.index%4*50,duration:500}}}};return t[Symbol.for("effects")].push(T),i(T),a},effects:[function(e,t,n,o,i,r){t[1].set("alpha",{transition:{value:e.itemOffset<240?1:0,duration:200}})},function(e,t,n,o,i,r){t[4].set("x",{transition:e.rowOffset})}],context:{}},props:["title","items"],state:()=>({focused:0,rowOffset:60,itemOffset:240}),hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(e){const t=this.$select(`item${e}`);t&&t.$focus&&(t.$focus(),e<1?this.rowOffset=60:e>this.items.length-2?this.rowOffset=60-430*(this.items.length-2)+430:this.rowOffset=60-430*e+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),Oi=Ei.Component("SourceInfo",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.x=1860,l.y={transition:{value:1060+t.offsetY,delay:1e3,duration:300,easing:"ease-out"}},l.alpha={transition:{value:t.alpha,delay:1e3,duration:300,easing:"ease-out"}},l.w=480,l.h=100,l.mount=1,l.color="{top: '0x000000dd', bottom: '0x000000ff'}",l.effects=[{type:"radius",props:{radius:10}}],a[0].populate(l),e=a[0];const u={};return a[1]=this.element({parent:e||"root"},t),u.y=18,u.x=20,u.size=26,u.maxwidth=440,u.align="center",u.lineheight=32,u.content='Press "U" to check out the source code of this example on GitHub',u.__textnode=!0,a[1].populate(u),a},effects:[function(e,t,n,o,i,r){t[0].set("y",{transition:{value:1060+e.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(e,t,n,o,i,r){t[0].set("alpha",{transition:{value:e.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state:()=>({offsetY:15,alpha:0}),hooks:{ready(){this.offsetY=0,this.alpha=1}}}),Ni="1.14.0",Ui=Ei.Component("Portal",{components:{PortalRow:Pi,SourceInfo:Oi},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;const h={};a[0]=this.element({parent:e||"root"},!0===p?c:t),h.w=1920,h.h=1080,h.color="{top: '0x44037aff', bottom: '0x240244ff'}",a[0].populate(h),!0===p&&(d-=1);const f=n.components&&n.components.PortalRow||o.PortalRow;e=a[0];const m={};a[1]=this.element({parent:e||"root"},!0===p?c:t),m.mount="{y: 0.5}",m.h=500,m.y={transition:420*-t.rowFocused+550},m.title="Demos",m.items=t.demo,m.ref="row0";const g=[];if(void 0!==f)for(let U in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[U]],g.push(f[Symbol.for("config")].props[U]);a[1].populate(m),!0===p&&(d-=1),e=a[1];const y={};let v;if(y.mount="{y: 0.5}",y.h=500,u={transition:420*-t.rowFocused+550},!0===Array.isArray(u)&&(u=r(u).slice(0)),y.y=u,y.title="Demos",y.items=t.demo,y.ref="row0",l=y.is||"PortalRow","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "PortalRow" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[2]=v.call(null,{props:y},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],c=a[2],p=!0):e=a[2][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const b=n.components&&n.components.PortalRow||o.PortalRow;e=a[0];const x={};a[3]=this.element({parent:e||"root"},!0===p?c:t),x.mount="{y: 0.5}",x.h=500,x.y={transition:420*-t.rowFocused+1100},x.title="Examples and tests",x.items=t.example,x.ref="row1";const w=[];if(void 0!==b)for(let U in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[U]],w.push(b[Symbol.for("config")].props[U]);a[3].populate(x),!0===p&&(d-=1),e=a[3];const S={};let T;if(S.mount="{y: 0.5}",S.h=500,u={transition:420*-t.rowFocused+1100},!0===Array.isArray(u)&&(u=r(u).slice(0)),S.y=u,S.title="Examples and tests",S.items=t.example,S.ref="row1",l=S.is||"PortalRow","string"==typeof l){if(T=n.components&&n.components[l]||o[l],!T)throw new Error('Component "PortalRow" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(T=l);a[4]=T.call(null,{props:S},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],c=a[4],p=!0):e=a[4][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const k=n.components&&n.components.PortalRow||o.PortalRow;e=a[0];const C={};a[5]=this.element({parent:e||"root"},!0===p?c:t),C.mount="{y: 0.5}",C.h=500,C.y={transition:420*-t.rowFocused+1650},C.title="Benchmarks and stress tests",C.items=t.benchmark,C.ref="row2";const A=[];if(void 0!==k)for(let U in k[Symbol.for("config")].props)delete C[k[Symbol.for("config")].props[U]],A.push(k[Symbol.for("config")].props[U]);a[5].populate(C),!0===p&&(d-=1),e=a[5];const E={};let I;if(E.mount="{y: 0.5}",E.h=500,u={transition:420*-t.rowFocused+1650},!0===Array.isArray(u)&&(u=r(u).slice(0)),E.y=u,E.title="Benchmarks and stress tests",E.items=t.benchmark,E.ref="row2",l=E.is||"PortalRow","string"==typeof l){if(I=n.components&&n.components[l]||o[l],!I)throw new Error('Component "PortalRow" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(I=l);a[6]=I.call(null,{props:E},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],c=a[6],p=!0):e=a[6][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[0];const M={};a[7]=this.element({parent:e||"root"},!0===p?c:t),M.w=1920,M.h=200,M.color="0x44037aff",a[7].populate(M),!0===p&&(d-=1),e=a[7];const R={};a[8]=this.element({parent:e||"root"},!0===p?c:t),R.w=1920,R.h=70,R.y=200,R.color="{top: '0x44037aff'}",a[8].populate(R),!0===p&&(d-=1),e=a[7];const _={};a[9]=this.element({parent:e||"root"},!0===p?c:t),_.y={transition:{value:80-t.logoOffset,duration:400}},a[9].populate(_),!0===p&&(d-=1),e=a[9];const L={};a[10]=this.element({parent:e||"root"},!0===p?c:t),L.src="assets/blits-logo-full.png",L.w=200,L.h=112,L.x=60,a[10].populate(L),!0===p&&(d-=1),e=a[9];const D={};a[11]=this.element({parent:e||"root"},!0===p?c:t),D.w=2,D.h=120,D.y="-10",D.color="0xffffff80",D.x=300,a[11].populate(D),!0===p&&(d-=1),e=a[9];const P={};a[12]=this.element({parent:e||"root"},!0===p?c:t),P.x=320,P.y=16,a[12].populate(P),!0===p&&(d-=1),e=a[12];const O={};a[13]=this.element({parent:e||"root"},!0===p?c:t),O.y=0,O.size=36,O.content="Example App",O.__textnode=!0,a[13].populate(O),!0===p&&(d-=1),e=a[12];const N={};return a[14]=this.element({parent:e||"root"},!0===p?c:t),N.y=50,N.size=24,N.content="v"+t.version,N.__textnode=!0,a[14].populate(N),!0===p&&(d-=1),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip1&&-1!==skip1.indexOf("y")||t[1].set("y",{transition:420*-e.rowFocused+550})},function(e,t,n,o,i,r){t[2][Symbol.for("props")].y={transition:420*-e.rowFocused+550}},function(e,t,n,o,i,r){"undefined"!=typeof skip3&&-1!==skip3.indexOf("y")||t[3].set("y",{transition:420*-e.rowFocused+1100})},function(e,t,n,o,i,r){t[4][Symbol.for("props")].y={transition:420*-e.rowFocused+1100}},function(e,t,n,o,i,r){"undefined"!=typeof skip5&&-1!==skip5.indexOf("y")||t[5].set("y",{transition:420*-e.rowFocused+1650})},function(e,t,n,o,i,r){t[6][Symbol.for("props")].y={transition:420*-e.rowFocused+1650}},function(e,t,n,o,i,r){t[9].set("y",{transition:{value:80-e.logoOffset,duration:400}})}],context:{}},state:()=>({version:Ni,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'},{title:"Announcer",id:"examples/announcer",description:'Using the built-in "Announcer" plugin'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}),hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(e){const t=this.$select(`row${e}`);t&&t.$focus&&t.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),Bi=Ei.Component("Letter",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.w=t.w,l.h={transition:{value:410+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},l.color="0xe6e6e6ff",a[1].populate(l),e=a[0];const u={};a[2]=this.element({parent:e||"root"},t),u.w=t.w,u.h=280,u.src=t.image,u.y={transition:{value:400+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},a[2].populate(u),e=a[0];const c={};return a[3]=this.element({parent:e||"root"},t),c.w=t.w,c.color="0xe6e6e6ff",c.h={transition:{value:500-t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},c.y={transition:{value:660+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},a[3].populate(c),a},effects:[function(e,t,n,o,i,r){t[1].set("h",{transition:{value:410+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,o,i,r){t[2].set("src",e.image)},function(e,t,n,o,i,r){t[2].set("y",{transition:{value:400+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,o,i,r){t[3].set("h",{transition:{value:500-e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,o,i,r){t[3].set("y",{transition:{value:660+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return this.letter,`assets/${this.letter}.png`}},state(){return{offset:"up"===this.direction?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),ji=Ei.Component("Intro",{components:{Letter:Bi},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;const d={};a[0]=this.element({parent:e||"root"},!0===c?u:t),d.w=1920,d.h=1080,d.src="assets/background.jpg",a[0].populate(d),!0===c&&(p-=1);const h=n.components&&n.components.Letter||o.Letter;e=a[0];const f={};a[1]=this.element({parent:e||"root"},!0===c?u:t),f.letter="l",f.w=294;const m=[];if(void 0!==h)for(let ie in h[Symbol.for("config")].props)delete f[h[Symbol.for("config")].props[ie]],m.push(h[Symbol.for("config")].props[ie]);a[1].populate(f),!0===c&&(p-=1),e=a[1];const g={};let y;if(g.letter="l",g.w=294,l=g.is||"Letter","string"==typeof l){if(y=n.components&&n.components[l]||o[l],!y)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(y=l);a[2]=y.call(null,{props:g},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],u=a[2],c=!0):e=a[2][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const v=n.components&&n.components.Letter||o.Letter;e=a[0];const b={};a[3]=this.element({parent:e||"root"},!0===c?u:t),b.letter="i-1",b.w=128,b.x=294,b.direction="up",b.delay=50;const x=[];if(void 0!==v)for(let ie in v[Symbol.for("config")].props)delete b[v[Symbol.for("config")].props[ie]],x.push(v[Symbol.for("config")].props[ie]);a[3].populate(b),!0===c&&(p-=1),e=a[3];const w={};let S;if(w.letter="i-1",w.w=128,w.x=294,w.direction="up",w.delay=50,l=w.is||"Letter","string"==typeof l){if(S=n.components&&n.components[l]||o[l],!S)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(S=l);a[4]=S.call(null,{props:w},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],u=a[4],c=!0):e=a[4][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const T=n.components&&n.components.Letter||o.Letter;e=a[0];const k={};a[5]=this.element({parent:e||"root"},!0===c?u:t),k.letter="g-1",k.w=205,k.x=422,k.delay=100;const C=[];if(void 0!==T)for(let ie in T[Symbol.for("config")].props)delete k[T[Symbol.for("config")].props[ie]],C.push(T[Symbol.for("config")].props[ie]);a[5].populate(k),!0===c&&(p-=1),e=a[5];const A={};let E;if(A.letter="g-1",A.w=205,A.x=422,A.delay=100,l=A.is||"Letter","string"==typeof l){if(E=n.components&&n.components[l]||o[l],!E)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(E=l);a[6]=E.call(null,{props:A},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],u=a[6],c=!0):e=a[6][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const I=n.components&&n.components.Letter||o.Letter;e=a[0];const M={};a[7]=this.element({parent:e||"root"},!0===c?u:t),M.letter="h",M.w=224,M.x=627,M.direction="up",M.delay=150;const R=[];if(void 0!==I)for(let ie in I[Symbol.for("config")].props)delete M[I[Symbol.for("config")].props[ie]],R.push(I[Symbol.for("config")].props[ie]);a[7].populate(M),!0===c&&(p-=1),e=a[7];const _={};let L;if(_.letter="h",_.w=224,_.x=627,_.direction="up",_.delay=150,l=_.is||"Letter","string"==typeof l){if(L=n.components&&n.components[l]||o[l],!L)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(L=l);a[8]=L.call(null,{props:_},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],u=a[8],c=!0):e=a[8][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const D=n.components&&n.components.Letter||o.Letter;e=a[0];const P={};a[9]=this.element({parent:e||"root"},!0===c?u:t),P.letter="t",P.w=190,P.x=851,P.delay=200;const O=[];if(void 0!==D)for(let ie in D[Symbol.for("config")].props)delete P[D[Symbol.for("config")].props[ie]],O.push(D[Symbol.for("config")].props[ie]);a[9].populate(P),!0===c&&(p-=1),e=a[9];const N={};let U;if(N.letter="t",N.w=190,N.x=851,N.delay=200,l=N.is||"Letter","string"==typeof l){if(U=n.components&&n.components[l]||o[l],!U)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(U=l);a[10]=U.call(null,{props:N},a[9],t),a[10][Symbol.for("slots")][0]?(e=a[10][Symbol.for("slots")][0],u=a[10],c=!0):e=a[10][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const B=n.components&&n.components.Letter||o.Letter;e=a[0];const j={};a[11]=this.element({parent:e||"root"},!0===c?u:t),j.letter="n-1",j.w=221,j.x=1041,j.direction="up",j.delay=250;const F=[];if(void 0!==B)for(let ie in B[Symbol.for("config")].props)delete j[B[Symbol.for("config")].props[ie]],F.push(B[Symbol.for("config")].props[ie]);a[11].populate(j),!0===c&&(p-=1),e=a[11];const z={};let $;if(z.letter="n-1",z.w=221,z.x=1041,z.direction="up",z.delay=250,l=z.is||"Letter","string"==typeof l){if($=n.components&&n.components[l]||o[l],!$)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&($=l);a[12]=$.call(null,{props:z},a[11],t),a[12][Symbol.for("slots")][0]?(e=a[12][Symbol.for("slots")][0],u=a[12],c=!0):e=a[12][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const G=n.components&&n.components.Letter||o.Letter;e=a[0];const V={};a[13]=this.element({parent:e||"root"},!0===c?u:t),V.letter="i-2",V.w=115,V.x=1262,V.delay=300;const H=[];if(void 0!==G)for(let ie in G[Symbol.for("config")].props)delete V[G[Symbol.for("config")].props[ie]],H.push(G[Symbol.for("config")].props[ie]);a[13].populate(V),!0===c&&(p-=1),e=a[13];const q={};let X;if(q.letter="i-2",q.w=115,q.x=1262,q.delay=300,l=q.is||"Letter","string"==typeof l){if(X=n.components&&n.components[l]||o[l],!X)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(X=l);a[14]=X.call(null,{props:q},a[13],t),a[14][Symbol.for("slots")][0]?(e=a[14][Symbol.for("slots")][0],u=a[14],c=!0):e=a[14][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const W=n.components&&n.components.Letter||o.Letter;e=a[0];const K={};a[15]=this.element({parent:e||"root"},!0===c?u:t),K.letter="n-2",K.w=219,K.x=1377,K.direction="up",K.delay=350;const Y=[];if(void 0!==W)for(let ie in W[Symbol.for("config")].props)delete K[W[Symbol.for("config")].props[ie]],Y.push(W[Symbol.for("config")].props[ie]);a[15].populate(K),!0===c&&(p-=1),e=a[15];const Q={};let J;if(Q.letter="n-2",Q.w=219,Q.x=1377,Q.direction="up",Q.delay=350,l=Q.is||"Letter","string"==typeof l){if(J=n.components&&n.components[l]||o[l],!J)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(J=l);a[16]=J.call(null,{props:Q},a[15],t),a[16][Symbol.for("slots")][0]?(e=a[16][Symbol.for("slots")][0],u=a[16],c=!0):e=a[16][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const Z=n.components&&n.components.Letter||o.Letter;e=a[0];const ee={};a[17]=this.element({parent:e||"root"},!0===c?u:t),ee.letter="g-2",ee.w=324,ee.x=1596,ee.direction="up",ee.delay=400;const te=[];if(void 0!==Z)for(let ie in Z[Symbol.for("config")].props)delete ee[Z[Symbol.for("config")].props[ie]],te.push(Z[Symbol.for("config")].props[ie]);a[17].populate(ee),!0===c&&(p-=1),e=a[17];const ne={};let oe;if(ne.letter="g-2",ne.w=324,ne.x=1596,ne.direction="up",ne.delay=400,l=ne.is||"Letter","string"==typeof l){if(oe=n.components&&n.components[l]||o[l],!oe)throw new Error('Component "Letter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(oe=l);return a[18]=oe.call(null,{props:ne},a[17],t),a[18][Symbol.for("slots")][0]?(e=a[18][Symbol.for("slots")][0],u=a[18],c=!0):e=a[18][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),a},effects:[],context:{}}}),Fi=Ei.Component("Toggle",{code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;const h={};a[0]=this.element({parent:e||"root"},!0===p?c:t),h.w=100,h.h=50,h.y=5,h.color=t.bgColor,h.effects=[{type:"radius",props:{radius:25}}],a[0].populate(h),!0===p&&(d-=1);const f=n.components&&n.components.Circle||o.Circle;e=a[0];const m={};a[1]=this.element({parent:e||"root"},!0===p?c:t),m.x={transition:t.on?0:50},m.size=50;const g=[];if(void 0!==f)for(let b in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[b]],g.push(f[Symbol.for("config")].props[b]);a[1].populate(m),!0===p&&(d-=1),e=a[1];const y={};let v;if(u={transition:t.on?0:50},!0===Array.isArray(u)&&(u=r(u).slice(0)),y.x=u,y.size=50,u=t.primaryColor,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.color=u,l=y.is||"Circle","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "Circle" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);return a[2]=v.call(null,{props:y},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],c=a[2],p=!0):e=a[2][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){t[0].set("color",e.bgColor)},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:25}}])},function(e,t,n,o,i,r){"undefined"!=typeof skip1&&-1!==skip1.indexOf("x")||t[1].set("x",{transition:e.on?0:50})},function(e,t,n,o,i,r){t[2][Symbol.for("props")].x={transition:e.on?0:50}},function(e,t,n,o,i,r){t[2][Symbol.for("props")].color=e.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),zi=Ei.Component("Bar",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w={value:t.w,duration:t.duration},l.h={value:t.h,duration:t.duration},l.color=t.bgColor,l.x=t.index*(t.w+t.w/4),l.effects=[{type:"radius",props:{radius:10}}],a[0].populate(l),e=a[0];const u={};return a[1]=this.element({parent:e||"root"},t),u.w=t.w,u.y={transition:{value:t.h-t.innerH,duration:t.duration}},u.h={transition:{value:t.innerH,duration:t.duration}},u.color=t.primaryColor,u.effects=[{type:"radius",props:{radius:10}}],a[1].populate(u),a},effects:[function(e,t,n,o,i,r){t[0].set("w",{value:e.w,duration:e.duration})},function(e,t,n,o,i,r){t[0].set("h",{value:e.h,duration:e.duration})},function(e,t,n,o,i,r){t[0].set("color",e.bgColor)},function(e,t,n,o,i,r){t[0].set("x",e.index*(e.w+e.w/4))},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:10}}])},function(e,t,n,o,i,r){t[1].set("w",e.w)},function(e,t,n,o,i,r){t[1].set("y",{transition:{value:e.h-e.innerH,duration:e.duration}})},function(e,t,n,o,i,r){t[1].set("h",{transition:{value:e.innerH,duration:e.duration}})},function(e,t,n,o,i,r){t[1].set("color",e.primaryColor)},function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state:()=>({h:200,innerH:0,duration:400}),hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size,"large"===this.size?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),$i=Ei.Component("Theming",{components:{Bar:zi,Toggle:Fi},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;const h={};a[0]=this.element({parent:e||"root"},!0===p?c:t),h.w=1920,h.h=1080,h.color={transition:t.$colors.get("bg")},a[0].populate(h),!0===p&&(d-=1),e=a[0];const f={};a[1]=this.element({parent:e||"root"},!0===p?c:t),f.y=1020,f.x=1160,f.size=28,f.color=t.$colors.get("color4"),f.content='Use "up", "down", "left" and "right" to change the appearance',f.__textnode=!0,a[1].populate(f),!0===p&&(d-=1),e=a[0];const m={};a[2]=this.element({parent:e||"root"},!0===p?c:t),m.x={transition:(1920-t.$sizes.get("w"))/2},m.y={transition:(1080-t.$sizes.get("h"))/2},a[2].populate(m),!0===p&&(d-=1),e=a[2];const g={};a[3]=this.element({parent:e||"root"},!0===p?c:t),g.x="-250",g.y="-100",g.src="assets/shadow.png",g.w=1e3,g.h=900,g.alpha=.5,a[3].populate(g),!0===p&&(d-=1),e=a[2];const y={};a[4]=this.element({parent:e||"root"},!0===p?c:t),y.w={transition:t.$sizes.get("w")},y.h={transition:t.$sizes.get("h")},y.color=t.$colors.get("color1"),y.effects=[{type:"radius",props:{radius:t.radius}}],a[4].populate(y),!0===p&&(d-=1),e=a[4];const v={};a[5]=this.element({parent:e||"root"},!0===p?c:t),v.w={transition:t.$sizes.get("w")},v.h=100,v.color=t.$colors.get("color2"),v.effects=[{type:"radius",props:{radius:t.radius}}],a[5].populate(v),!0===p&&(d-=1),e=a[4];const b={};a[6]=this.element({parent:e||"root"},!0===p?c:t),b.w={transition:t.$sizes.get("w")},b.h=80,b.y=20,b.color=t.$colors.get("color2"),a[6].populate(b),!0===p&&(d-=1),e=a[4];const x={};a[7]=this.element({parent:e||"root"},!0===p?c:t),x.content=t.text,x.color=t.$colors.get("color3"),x.size=28,x.x=20,x.y=14,x.__textnode=!0,a[7].populate(x),!0===p&&(d-=1);const w=n.components&&n.components.Toggle||o.Toggle;e=a[4];const S={};a[8]=this.element({parent:e||"root"},!0===p?c:t),S.x={transition:t.$sizes.get("w")-120},S.on="dark"===t.mode,S.bgColor=t.$colors.get("color1"),S.primaryColor="#22c55e";const T=[];if(void 0!==w)for(let te in w[Symbol.for("config")].props)delete S[w[Symbol.for("config")].props[te]],T.push(w[Symbol.for("config")].props[te]);a[8].populate(S),!0===p&&(d-=1),e=a[8];const k={};let C;if(u={transition:t.$sizes.get("w")-120},!0===Array.isArray(u)&&(u=r(u).slice(0)),k.x=u,u="dark"===t.mode,!0===Array.isArray(u)&&(u=r(u).slice(0)),k.on=u,u=t.$colors.get("color1"),!0===Array.isArray(u)&&(u=r(u).slice(0)),k.bgColor=u,k.primaryColor="#22c55e",l=k.is||"Toggle","string"==typeof l){if(C=n.components&&n.components[l]||o[l],!C)throw new Error('Component "Toggle" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(C=l);a[9]=C.call(null,{props:k},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],c=a[9],p=!0):e=a[9][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[2];const A={};a[10]=this.element({parent:e||"root"},!0===p?c:t),A.w=200,A.h={transition:t.$sizes.get("block1.h")},A.x=25,A.y=140,A.color=t.$colors.get("color2"),A.effects=[{type:"radius",props:{radius:t.radius/2}}],a[10].populate(A),!0===p&&(d-=1),e=a[2];const E={};a[11]=this.element({parent:e||"root"},!0===p?c:t),E.w={transition:t.$sizes.get("block2.w")},E.h=t.$sizes.get("block2.h"),E.x=270,E.y={transition:t.$sizes.get("block2.y")},E.color=t.$colors.get("color2"),E.effects=[{type:"radius",props:{radius:t.radius/2}}],a[11].populate(E),!0===p&&(d-=1),e=a[2];const I={};a[12]=this.element({parent:e||"root"},!0===p?c:t),I.x={transition:t.$sizes.get("graph.x")},I.y={transition:t.$sizes.get("graph.y")},I.w=t.$sizes.get("graph.w"),I.h=t.$sizes.get("graph.h"),I.color="0x00000000",a[12].populate(I),!0===p&&(d-=1),e=a[12];const M={};a[13]=this.element({parent:e||"root"},!0===p?c:t),M.x={transition:t.$sizes.get("graph.offset")},M.y={transition:t.$sizes.get("graph.offset")},a[13].populate(M),!0===p&&(d-=1);const R=n.components&&n.components.Bar||o.Bar;e=a[13];const _={};a[14]=this.element({parent:e||"root"},!0===p?c:t),_.bgColor=t.$colors.get("color2"),_.primaryColor=t.$colors.get("color4"),_.size=t.$sizes.get("graph.size"),_.height=100,_.index=0;const L=[];if(void 0!==R)for(let te in R[Symbol.for("config")].props)delete _[R[Symbol.for("config")].props[te]],L.push(R[Symbol.for("config")].props[te]);a[14].populate(_),!0===p&&(d-=1),e=a[14];const D={};let P;if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=r(u).slice(0)),D.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=r(u).slice(0)),D.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=r(u).slice(0)),D.size=u,D.height=100,D.index=0,l=D.is||"Bar","string"==typeof l){if(P=n.components&&n.components[l]||o[l],!P)throw new Error('Component "Bar" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(P=l);a[15]=P.call(null,{props:D},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],c=a[15],p=!0):e=a[15][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const O=n.components&&n.components.Bar||o.Bar;e=a[13];const N={};a[16]=this.element({parent:e||"root"},!0===p?c:t),N.bgColor=t.$colors.get("color2"),N.primaryColor=t.$colors.get("color4"),N.size=t.$sizes.get("graph.size"),N.height=140,N.index=1;const U=[];if(void 0!==O)for(let te in O[Symbol.for("config")].props)delete N[O[Symbol.for("config")].props[te]],U.push(O[Symbol.for("config")].props[te]);a[16].populate(N),!0===p&&(d-=1),e=a[16];const B={};let j;if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=r(u).slice(0)),B.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=r(u).slice(0)),B.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=r(u).slice(0)),B.size=u,B.height=140,B.index=1,l=B.is||"Bar","string"==typeof l){if(j=n.components&&n.components[l]||o[l],!j)throw new Error('Component "Bar" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(j=l);a[17]=j.call(null,{props:B},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],c=a[17],p=!0):e=a[17][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const F=n.components&&n.components.Bar||o.Bar;e=a[13];const z={};a[18]=this.element({parent:e||"root"},!0===p?c:t),z.bgColor=t.$colors.get("color2"),z.primaryColor=t.$colors.get("color4"),z.size=t.$sizes.get("graph.size"),z.height=170,z.index=2;const $=[];if(void 0!==F)for(let te in F[Symbol.for("config")].props)delete z[F[Symbol.for("config")].props[te]],$.push(F[Symbol.for("config")].props[te]);a[18].populate(z),!0===p&&(d-=1),e=a[18];const G={};let V;if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=r(u).slice(0)),G.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=r(u).slice(0)),G.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=r(u).slice(0)),G.size=u,G.height=170,G.index=2,l=G.is||"Bar","string"==typeof l){if(V=n.components&&n.components[l]||o[l],!V)throw new Error('Component "Bar" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(V=l);a[19]=V.call(null,{props:G},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],c=a[19],p=!0):e=a[19][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const H=n.components&&n.components.Bar||o.Bar;e=a[13];const q={};a[20]=this.element({parent:e||"root"},!0===p?c:t),q.bgColor=t.$colors.get("color2"),q.primaryColor=t.$colors.get("color4"),q.size=t.$sizes.get("graph.size"),q.height=150,q.index=3;const X=[];if(void 0!==H)for(let te in H[Symbol.for("config")].props)delete q[H[Symbol.for("config")].props[te]],X.push(H[Symbol.for("config")].props[te]);a[20].populate(q),!0===p&&(d-=1),e=a[20];const W={};let K;if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=r(u).slice(0)),W.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=r(u).slice(0)),W.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=r(u).slice(0)),W.size=u,W.height=150,W.index=3,l=W.is||"Bar","string"==typeof l){if(K=n.components&&n.components[l]||o[l],!K)throw new Error('Component "Bar" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(K=l);a[21]=K.call(null,{props:W},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],c=a[21],p=!0):e=a[21][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const Y=n.components&&n.components.Bar||o.Bar;e=a[13];const Q={};a[22]=this.element({parent:e||"root"},!0===p?c:t),Q.bgColor=t.$colors.get("color2"),Q.primaryColor=t.$colors.get("color4"),Q.size=t.$sizes.get("graph.size"),Q.height=90,Q.index=4;const J=[];if(void 0!==Y)for(let te in Y[Symbol.for("config")].props)delete Q[Y[Symbol.for("config")].props[te]],J.push(Y[Symbol.for("config")].props[te]);a[22].populate(Q),!0===p&&(d-=1),e=a[22];const Z={};let ee;if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=r(u).slice(0)),Z.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=r(u).slice(0)),Z.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=r(u).slice(0)),Z.size=u,Z.height=90,Z.index=4,l=Z.is||"Bar","string"==typeof l){if(ee=n.components&&n.components[l]||o[l],!ee)throw new Error('Component "Bar" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(ee=l);return a[23]=ee.call(null,{props:Z},a[22],t),a[23][Symbol.for("slots")][0]?(e=a[23][Symbol.for("slots")][0],c=a[23],p=!0):e=a[23][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){t[0].set("color",{transition:e.$colors.get("bg")})},function(e,t,n,o,i,r){t[1].set("color",e.$colors.get("color4"))},function(e,t,n,o,i,r){t[2].set("x",{transition:(1920-e.$sizes.get("w"))/2})},function(e,t,n,o,i,r){t[2].set("y",{transition:(1080-e.$sizes.get("h"))/2})},function(e,t,n,o,i,r){t[4].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,o,i,r){t[4].set("h",{transition:e.$sizes.get("h")})},function(e,t,n,o,i,r){t[4].set("color",e.$colors.get("color1"))},function(e,t,n,o,i,r){t[4].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,o,i,r){t[5].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,o,i,r){t[5].set("color",e.$colors.get("color2"))},function(e,t,n,o,i,r){t[5].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,o,i,r){t[6].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,o,i,r){t[6].set("color",e.$colors.get("color2"))},function(e,t,n,o,i,r){t[7].set("content",e.text)},function(e,t,n,o,i,r){t[7].set("color",e.$colors.get("color3"))},function(e,t,n,o,i,r){"undefined"!=typeof skip8&&-1!==skip8.indexOf("x")||t[8].set("x",{transition:e.$sizes.get("w")-120})},function(e,t,n,o,i,r){"undefined"!=typeof skip8&&-1!==skip8.indexOf("on")||t[8].set("on","dark"===e.mode)},function(e,t,n,o,i,r){"undefined"!=typeof skip8&&-1!==skip8.indexOf("bgColor")||t[8].set("bgColor",e.$colors.get("color1"))},function(e,t,n,o,i,r){t[9][Symbol.for("props")].x={transition:e.$sizes.get("w")-120}},function(e,t,n,o,i,r){t[9][Symbol.for("props")].on="dark"===e.mode},function(e,t,n,o,i,r){t[9][Symbol.for("props")].bgColor=e.$colors.get("color1")},function(e,t,n,o,i,r){t[10].set("h",{transition:e.$sizes.get("block1.h")})},function(e,t,n,o,i,r){t[10].set("color",e.$colors.get("color2"))},function(e,t,n,o,i,r){t[10].set("effects",[{type:"radius",props:{radius:e.radius/2}}])},function(e,t,n,o,i,r){t[11].set("w",{transition:e.$sizes.get("block2.w")})},function(e,t,n,o,i,r){t[11].set("h",e.$sizes.get("block2.h"))},function(e,t,n,o,i,r){t[11].set("y",{transition:e.$sizes.get("block2.y")})},function(e,t,n,o,i,r){t[11].set("color",e.$colors.get("color2"))},function(e,t,n,o,i,r){t[11].set("effects",[{type:"radius",props:{radius:e.radius/2}}])},function(e,t,n,o,i,r){t[12].set("x",{transition:e.$sizes.get("graph.x")})},function(e,t,n,o,i,r){t[12].set("y",{transition:e.$sizes.get("graph.y")})},function(e,t,n,o,i,r){t[12].set("w",e.$sizes.get("graph.w"))},function(e,t,n,o,i,r){t[12].set("h",e.$sizes.get("graph.h"))},function(e,t,n,o,i,r){t[13].set("x",{transition:e.$sizes.get("graph.offset")})},function(e,t,n,o,i,r){t[13].set("y",{transition:e.$sizes.get("graph.offset")})},function(e,t,n,o,i,r){"undefined"!=typeof skip14&&-1!==skip14.indexOf("bgColor")||t[14].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skip14&&-1!==skip14.indexOf("primaryColor")||t[14].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skip14&&-1!==skip14.indexOf("size")||t[14].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[15][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[15][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[15][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,o,i,r){"undefined"!=typeof skip16&&-1!==skip16.indexOf("bgColor")||t[16].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skip16&&-1!==skip16.indexOf("primaryColor")||t[16].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skip16&&-1!==skip16.indexOf("size")||t[16].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[17][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[17][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[17][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,o,i,r){"undefined"!=typeof skip18&&-1!==skip18.indexOf("bgColor")||t[18].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skip18&&-1!==skip18.indexOf("primaryColor")||t[18].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skip18&&-1!==skip18.indexOf("size")||t[18].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[19][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[19][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[19][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,o,i,r){"undefined"!=typeof skip20&&-1!==skip20.indexOf("bgColor")||t[20].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skip20&&-1!==skip20.indexOf("primaryColor")||t[20].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skip20&&-1!==skip20.indexOf("size")||t[20].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[21][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[21][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[21][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,o,i,r){"undefined"!=typeof skip22&&-1!==skip22.indexOf("bgColor")||t[22].set("bgColor",e.$colors.get("color2"))},function(e,t,n,o,i,r){"undefined"!=typeof skip22&&-1!==skip22.indexOf("primaryColor")||t[22].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,o,i,r){"undefined"!=typeof skip22&&-1!==skip22.indexOf("size")||t[22].set("size",e.$sizes.get("graph.size"))},function(e,t,n,o,i,r){t[23][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,o,i,r){t[23][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,o,i,r){t[23][Symbol.for("props")].size=e.$sizes.get("graph.size")}],context:{}},state:()=>({mode:"dark",sizes:"small",radius:20}),watch:{mode(e){this.$colors.set(e)},sizes(e){this.$sizes.set(e)}},computed:{text(){return this.mode,"dark"===this.mode?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}});let Gi,Vi;const Hi={headers:{"Content-Type":"application/json",Authorization:"Bearer ABC123"}};function qi(e,t="w185"){return Vi+t+e}function Xi(e,t={}){return fetch("https://8b4fa39d.lightningjs.workers.dev"+e,{...Hi,...t}).then(e=>e.json())}function Wi(){return Xi("/configuration").then(e=>(Gi=e,Vi=e.images.secure_base_url,e))}const Ki={get:function(...e){return Gi?Xi(...e):Wi().then(()=>Xi(...e))},loadConfig:Wi},Yi=e=>Ki.get(`/${e}/popular`).then(Qi),Qi=e=>e.results.filter(e=>!e.adult).map(e=>({poster:qi(e.poster_path||e.profile_path),background:qi(e.backdrop_path,"w1280"),identifier:e.id,title:e.title||e.name,overview:e.overview})),Ji=e=>{const t=Array.isArray(e)?e:[e];return Zi("movie").then(({genres:e})=>{let n=[];return e.forEach(e=>{t.includes(e.name)&&n.push(e.id)}),Ki.get(`/discover/movie?with_genres=${n.join()}`).then(Qi)})},Zi=e=>Ki.get(`/genre/${e}/list`),er=Ei.Component("Poster",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=1280,l.h=720,l.x=t.x,l.src=t.item.background,l.color="{top: '0xffffffff', bottom: '0x000000ff'}",l.scale={transition:{value:t.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l._effects=[{type:"radius",props:{radius:8}}],a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.alpha={transition:{value:t.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[1].populate(u),e=a[1];const c={};a[2]=this.element({parent:e||"root"},t),c.w=185,c.h=278,c.x=54,c.y=220,c.src=t.item.poster,a[2].populate(c),e=a[1];const p={};a[3]=this.element({parent:e||"root"},t),p.content=t.item.title,p.font="raleway",p.y=520,p.x=54,p.size=64,p.maxwidth=1e3,p.maxlines=1,p.__textnode=!0,a[3].populate(p),e=a[1];const d={};return a[4]=this.element({parent:e||"root"},t),d.content=t.item.overview,d.size=21,d.y=620,d.x=60,d.color="0xccccccff",d.maxwidth=1e3,d.maxlines=2,d.lineheight=36,d.__textnode=!0,a[4].populate(d),a},effects:[function(e,t,n,o,i,r){t[0].set("src",e.item.background)},function(e,t,n,o,i,r){t[0].set("scale",{transition:{value:e.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[1].set("alpha",{transition:{value:e.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[2].set("src",e.item.poster)},function(e,t,n,o,i,r){t[3].set("content",e.item.title)},function(e,t,n,o,i,r){t[4].set("content",e.item.overview)}],context:{}},props:["src","index","item","width"],state:()=>({scale:1,zIndex:1,alpha:0}),computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),tr=Ei.Component("Poster",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};return a[0]=this.element({parent:e||"root"},t),l.w=185,l.h=278,l.x=t.x,l.src=t.item.poster,l.scale={transition:{value:t.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l._effects=[{type:"radius",props:{radius:8}}],a[0].populate(l),a},effects:[function(e,t,n,o,i,r){t[0].set("src",e.item.poster)},function(e,t,n,o,i,r){t[0].set("scale",{transition:{value:e.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state:()=>({scale:1,color:"#333"}),computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),nr=Ei.Component("PosterTitle",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=185,l.h=278,l.x=t.x,l.src=t.item.poster,l.scale={transition:{value:t.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l._effects=[{type:"radius",props:{radius:8}}],a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.x=10,u.y={transition:{value:t.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},u.alpha={transition:{value:t.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[1].populate(u),e=a[1];const c={};return a[2]=this.element({parent:e||"root"},t),c.content=t.item.title,c.font="raleway",c.size=22,c.maxwidth=185,c.maxlines=2,c.lineheight=28,c.__textnode=!0,a[2].populate(c),a},effects:[function(e,t,n,o,i,r){t[0].set("src",e.item.poster)},function(e,t,n,o,i,r){t[0].set("scale",{transition:{value:e.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[1].set("y",{transition:{value:e.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[1].set("alpha",{transition:{value:e.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,o,i,r){t[2].set("content",e.item.title)}],context:{}},props:["src","index","item","width"],state:()=>({scale:1,alpha:0,y:278}),computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),or=Ei.Component("TmdbRow",{components:{Hero:er,Poster:tr,PosterTitle:nr},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),e=a[0];const p={};a[1]=this.element({parent:e||"root"},!0===c?u:t),p.x={transition:{value:t.x,duration:300,easing:"ease-in-out"}},p.y=80,a[1].populate(p),e=a[1];const d=[];let h,f;const m=(i=[],s,a)=>{const p=r(i),d=new Set;let m=p.length;const g={}||{};h=g.from||0,f="to"in g?g.to:p.length;for(;m--;){const e=p[m];m<f&&m>=h&&d.add(""+e.identifier)}let y=a.length;for(;y--;)if(!1===d.has(a[y])){const e=a[y];s[2][e]&&s[2][e].destroy(),delete s[2][e],s[3][e]&&s[3][e].destroy(),delete s[3][e]}a.length=0;const v=p.length;for(let r=0;r<v;r++){if(r<h||r>=f)continue;const i=Object.create(t);e=s[1],i.item=p[r],i.index=r,i.key=""+i.item.identifier,i.__ref="poster"+r,a.push(i.key);const d=n.components&&n.components.Component||o.Component;void 0===s[2]&&(s[2]={});const m={};void 0===s[2][i.key]&&(s[2][i.key]=this.element({parent:e||"root"},!0===c?u:t)),m.is=i.type,m.index=i.index,m.item=i.item,m.ref=i.__ref,m.width=i.width;const g=[];if(void 0!==d)for(let e in d[Symbol.for("config")].props)delete m[d[Symbol.for("config")].props[e]],g.push(d[Symbol.for("config")].props[e]);void 0===s[2][i.key].nodeId&&s[2][i.key].populate(m),void 0===s[3]&&(s[3]={}),e=s[2][i.key];const y={};if(void 0===s[3][i.key]){let r;if(y.is=i.type,y.index=i.index,y.item=i.item,y.ref=i.__ref,y.width=i.width,l=y.is||"Component","string"==typeof l){if(r=n.components&&n.components[l]||o[l],!r)throw new Error('Component "Component" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(r=l);s[3][i.key]=r.call(null,{props:y},s[2][i.key],t),s[3][i.key][Symbol.for("slots")][0]?(e=s[3][i.key][Symbol.for("slots")][0],u=s[3][i.key],c=!0):e=s[3][i.key][Symbol.for("children")][0]}}return[]};let g;const y=()=>{t[Symbol.for("removeGlobalEffects")](g),g=null,g=m(t.items,a,d)};return t[Symbol.for("effects")].push(y),i(y,["items"]),a},effects:[function(e,t,n,o,i,r){t[1].set("x",{transition:{value:e.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state:()=>({focused:0,offset:0}),hooks:{focus(){this.$trigger("focused")}},computed:{x(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(e){const t=this.$select("poster"+e);t&&t.$focus&&(t.$focus(),this.$emit("posterSelect",this.items[e]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),ir=Ei.Component("Background",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.src=t.bg1,l.w=1920,l.h=1080,l.color="{top: '0xffffffff', bottom: '0x000000ff'}",l.alpha={transition:{value:t.alpha1,duration:400,easing:"ease-in"}},a[1].populate(l),e=a[0];const u={};a[2]=this.element({parent:e||"root"},t),u.src=t.bg2,u.w=1920,u.h=1080,u.color="{top: '0xffffffff', bottom: '0x000000ff'}",u.alpha={transition:{value:t.alpha2,duration:400,easing:"ease-in"}},a[2].populate(u),e=a[0];const c={};return a[3]=this.element({parent:e||"root"},t),c.w=1920,c.h=1080,c.src="assets/gradient.png",c.color="0x8866ddff",c.alpha=.8,a[3].populate(c),a},effects:[function(e,t,n,o,i,r){t[1].set("src",e.bg1)},function(e,t,n,o,i,r){t[1].set("alpha",{transition:{value:e.alpha1,duration:400,easing:"ease-in"}})},function(e,t,n,o,i,r){t[2].set("src",e.bg2)},function(e,t,n,o,i,r){t[2].set("alpha",{transition:{value:e.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["bgImg"],state:()=>({counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}),watch:{bgImg(e){this.counter=(this.counter+1)%2,0===this.counter?(this.bg1=e,this.alpha1=.8,this.alpha2=0):(this.bg2=e,this.alpha1=0,this.alpha2=.8)}}}),rr=Ei.Component("TMdb",{components:{Background:ir,TmdbRow:or},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;const h={};a[0]=this.element({parent:e||"root"},!0===p?c:t),h.w=1920,h.h=1080,h.color="0x000000ff",a[0].populate(h),!0===p&&(d-=1);const f=n.components&&n.components.Background||o.Background;e=a[0];const m={};a[1]=this.element({parent:e||"root"},!0===p?c:t),m.bgImg=t.src;const g=[];if(void 0!==f)for(let R in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[R]],g.push(f[Symbol.for("config")].props[R]);a[1].populate(m),!0===p&&(d-=1),e=a[1];const y={};let v;if(u=t.src,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.bgImg=u,l=y.is||"Background","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "Background" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[2]=v.call(null,{props:y},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],c=a[2],p=!0):e=a[2][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[0];a[3]=this.element({parent:e||"root"},!0===p?c:t),a[3].populate({}),!0===p&&(d-=1),e=a[3];const b={};a[4]=this.element({parent:e||"root"},!0===p?c:t),b.y={transition:{value:t.contentY,duration:t.duration}},b.alpha={transition:{value:t.alpha,duration:t.duration}},a[4].populate(b),!0===p&&(d-=1),e=a[4];const x={};a[5]=this.element({parent:e||"root"},!0===p?c:t),x.src="assets/logo.png",x.x=140,x.y=90,x.w=243,x.h=52,a[5].populate(x),!0===p&&(d-=1),e=a[4];const w={};a[6]=this.element({parent:e||"root"},!0===p?c:t),w.content=t.title,w.font="raleway",w.size=80,w.x=140,w.y=300,w.maxwidth=1e3,w["@loaded"]=t.positionText&&t.positionText.bind(t),w.maxlines=1,w.__textnode=!0,a[6].populate(w),!0===p&&(d-=1),e=a[4];const S={};a[7]=this.element({parent:e||"root"},!0===p?c:t),S.content=t.overview,S.maxwidth=880,S.x=140,S.y=430,S.lineheight=40,S.maxlines=3,S.__textnode=!0,a[7].populate(S),!0===p&&(d-=1),e=a[3];const T={};a[8]=this.element({parent:e||"root"},!0===p?c:t),T.y={transition:{value:t.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[8].populate(T),!0===p&&(d-=1),e=a[8];const k=[];let C,A;const E=(s=[],a,h)=>{const f=r(s),m=new Set;let g=f.length;const y={}||{};C=y.from||0,A="to"in y?y.to:f.length;for(;g--;){const e=f[g];g<A&&g>=C&&m.add(""+e.title)}let v=h.length;for(;v--;)if(!1===m.has(h[v])){const e=h[v];a[9][e]&&a[9][e].destroy(),delete a[9][e],a[10][e]&&a[10][e].destroy(),delete a[10][e]}h.length=0;const b=f.length,x=[];for(let w=0;w<b;w++){if(w<C||w>=A)continue;const s=Object.create(t);e=a[8],s.row=f[w],s.index=w,s.key=""+s.row.title,s.__ref="row"+w,h.push(s.key);const m=n.components&&n.components.TmdbRow||o.TmdbRow;void 0===a[9]&&(a[9]={});const g={};void 0===a[9][s.key]&&(a[9][s.key]=this.element({parent:e||"root"},!0===p?c:t)),g.title=s.row.title,g.items=s.row.items,g.type=s.row.type,g.width=s.row.width,g.y=s.row.y,g.ref=s.__ref;const y=[];if(void 0!==m)for(let e in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[e]],y.push(m[Symbol.for("config")].props[e]);void 0===a[9][s.key].nodeId&&(a[9][s.key].populate(g),!0===p&&(d-=1)),void 0===a[10]&&(a[10]={}),e=a[9][s.key];const v={};if(void 0===a[10][s.key]){let i;if(v.title=s.row.title,u=s.row.items,!0===Array.isArray(u)&&(u=r(u).slice(0)),v.items=u,u=s.row.type,!0===Array.isArray(u)&&(u=r(u).slice(0)),v.type=u,u=s.row.width,!0===Array.isArray(u)&&(u=r(u).slice(0)),v.width=u,v.y=s.row.y,v.ref=s.__ref,l=v.is||"TmdbRow","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "TmdbRow" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[10][s.key]=i.call(null,{props:v},a[9][s.key],t),a[10][s.key][Symbol.for("slots")][0]?(e=a[10][s.key][Symbol.for("slots")][0],c=a[10][s.key],p=!0):e=a[10][s.key][Symbol.for("children")][0]}let b=()=>{void 0!==y&&-1!==y.indexOf("items")||a[9][s.key].set("items",s.row.items)};i(b,null),x.push(b),t[Symbol.for("effects")].push(b);let S=()=>{void 0!==y&&-1!==y.indexOf("type")||a[9][s.key].set("type",s.row.type)};i(S,null),x.push(S),t[Symbol.for("effects")].push(S);let T=()=>{void 0!==y&&-1!==y.indexOf("width")||a[9][s.key].set("width",s.row.width)};i(T,null),x.push(T),t[Symbol.for("effects")].push(T),a[10][s.key][Symbol.for("props")].items=s.row.items,a[10][s.key][Symbol.for("props")].type=s.row.type,a[10][s.key][Symbol.for("props")].width=s.row.width}return x};let I;const M=()=>{t[Symbol.for("removeGlobalEffects")](I),I=null,I=E(t.rows,a,k)};return t[Symbol.for("effects")].push(M),i(M,["rows"]),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip1&&-1!==skip1.indexOf("bgImg")||t[1].set("bgImg",e.src)},function(e,t,n,o,i,r){t[2][Symbol.for("props")].bgImg=e.src},function(e,t,n,o,i,r){t[4].set("y",{transition:{value:e.contentY,duration:e.duration}})},function(e,t,n,o,i,r){t[4].set("alpha",{transition:{value:e.alpha,duration:e.duration}})},function(e,t,n,o,i,r){t[6].set("content",e.title)},function(e,t,n,o,i,r){t[7].set("content",e.overview)},function(e,t,n,o,i,r){t[8].set("y",{transition:{value:e.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state:()=>({rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}),watch:{focused(e){const t=this.$select("row"+e);t&&t.$focus&&t.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await Yi("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await Ji(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await Ji(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await Yi("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await Ji(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await Ji("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await Ji("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",e=>{0===this.focused&&(this.src=e.background,this.title=e.title,this.overview=e.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(0===this.focused?550:90)-this.rows[this.focused].y,this.alpha=0===this.focused?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(0===this.focused?550:90)-this.rows[this.focused].y,this.alpha=0===this.focused?1:0}}}),sr=Ei.Component("MenuSprite",{code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===p?c:t),h.src="assets/menusprite.png",h.x=748,h.y=120,h.w=425,h.h=340,a[1].populate(h),!0===p&&(d-=1),e=a[0];const f={};a[2]=this.element({parent:e||"root"},!0===p?c:t),f.y=680,f.x=560,a[2].populate(f),!0===p&&(d-=1);const m=n.components&&n.components.Sprite||o.Sprite;e=a[2];const g={};a[3]=this.element({parent:e||"root"},!0===p?c:t),g.image="assets/menusprite.png",g.x=0,g.w=140,g.h=140,g.map=t.map,g.frame=t.icon1;const y=[];if(void 0!==m)for(let O in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[O]],y.push(m[Symbol.for("config")].props[O]);a[3].populate(g),!0===p&&(d-=1),e=a[3];const v={};let b;if(v.image="assets/menusprite.png",v.x=0,v.w=140,v.h=140,v.map=t.map,u=t.icon1,!0===Array.isArray(u)&&(u=r(u).slice(0)),v.frame=u,l=v.is||"Sprite","string"==typeof l){if(b=n.components&&n.components[l]||o[l],!b)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(b=l);a[4]=b.call(null,{props:v},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],c=a[4],p=!0):e=a[4][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const x=n.components&&n.components.Sprite||o.Sprite;e=a[2];const w={};a[5]=this.element({parent:e||"root"},!0===p?c:t),w.image="assets/menusprite.png",w.x=220,w.w=140,w.h=140,w.map=t.map,w.frame="icon2";const S=[];if(void 0!==x)for(let O in x[Symbol.for("config")].props)delete w[x[Symbol.for("config")].props[O]],S.push(x[Symbol.for("config")].props[O]);a[5].populate(w),!0===p&&(d-=1),e=a[5];const T={};let k;if(T.image="assets/menusprite.png",T.x=220,T.w=140,T.h=140,T.map=t.map,T.frame="icon2",l=T.is||"Sprite","string"==typeof l){if(k=n.components&&n.components[l]||o[l],!k)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(k=l);a[6]=k.call(null,{props:T},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],c=a[6],p=!0):e=a[6][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const C=n.components&&n.components.Sprite||o.Sprite;e=a[2];const A={};a[7]=this.element({parent:e||"root"},!0===p?c:t),A.image="assets/menusprite.png",A.x=440,A.w=140,A.h=140,A.map=t.map,A.frame="icon3";const E=[];if(void 0!==C)for(let O in C[Symbol.for("config")].props)delete A[C[Symbol.for("config")].props[O]],E.push(C[Symbol.for("config")].props[O]);a[7].populate(A),!0===p&&(d-=1),e=a[7];const I={};let M;if(I.image="assets/menusprite.png",I.x=440,I.w=140,I.h=140,I.map=t.map,I.frame="icon3",l=I.is||"Sprite","string"==typeof l){if(M=n.components&&n.components[l]||o[l],!M)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(M=l);a[8]=M.call(null,{props:I},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],c=a[8],p=!0):e=a[8][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const R=n.components&&n.components.Sprite||o.Sprite;e=a[2];const _={};a[9]=this.element({parent:e||"root"},!0===p?c:t),_.image="assets/menusprite.png",_.x=660,_.w=140,_.h=140,_.map=t.map,_.frame="icon4_unfocus";const L=[];if(void 0!==R)for(let O in R[Symbol.for("config")].props)delete _[R[Symbol.for("config")].props[O]],L.push(R[Symbol.for("config")].props[O]);a[9].populate(_),!0===p&&(d-=1),e=a[9];const D={};let P;if(D.image="assets/menusprite.png",D.x=660,D.w=140,D.h=140,D.map=t.map,D.frame="icon4_unfocus",l=D.is||"Sprite","string"==typeof l){if(P=n.components&&n.components[l]||o[l],!P)throw new Error('Component "Sprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(P=l);return a[10]=P.call(null,{props:D},a[9],t),a[10][Symbol.for("slots")][0]?(e=a[10][Symbol.for("slots")][0],c=a[10],p=!0):e=a[10][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip3&&-1!==skip3.indexOf("frame")||t[3].set("frame",e.icon1)},function(e,t,n,o,i,r){t[4][Symbol.for("props")].frame=e.icon1}],context:{}},state:()=>({icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}),hooks:{ready(){this.$setInterval(()=>{this.icon1="icon1_unfocus"===this.icon1?"icon1_focus":"icon1_unfocus"},2e3)}}}),ar=["menu"],lr=Ei.Component("Sprites",{components:{MenuSprite:sr},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1);const h=n.components&&n.components.MenuSprite||o.MenuSprite;e=a[0];const f={};a[1]=this.element({parent:e||"root"},!0===p?c:t),f.show="menu"===t.currentSprite;const m=[];if(void 0!==h)for(let v in h[Symbol.for("config")].props)delete f[h[Symbol.for("config")].props[v]],m.push(h[Symbol.for("config")].props[v]);a[1].populate(f),!0===p&&(d-=1),e=a[1];const g={};let y;if(u="menu"===t.currentSprite,!0===Array.isArray(u)&&(u=r(u).slice(0)),g.show=u,l=g.is||"MenuSprite","string"==typeof l){if(y=n.components&&n.components[l]||o[l],!y)throw new Error('Component "MenuSprite" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(y=l);return a[2]=y.call(null,{props:g},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],c=a[2],p=!0):e=a[2][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip1&&-1!==skip1.indexOf("show")||t[1].set("show","menu"===e.currentSprite)},function(e,t,n,o,i,r){t[2][Symbol.for("props")].show="menu"===e.currentSprite}],context:{}},state:()=>({currentSprite:"menu"}),input:{down(){const e=ar.indexOf(this.currentSprite);e<ar.length-1?this.currentSprite=ar[e+1]:this.currentSprite=ar[0]}}}),ur=Ei.Component("Button",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};return a[0]=this.element({parent:e||"root"},t),l.w=300,l.h=80,l.color=t.color||"0xff0000ff",l.effects=[{type:"radius",props:{radius:20}}],l.alpha={transition:t.alpha},l.scale={transition:t.scale},l.rotation=t.rotate,a[0].populate(l),a},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:20}}])},function(e,t,n,o,i,r){t[0].set("alpha",{transition:e.alpha})},function(e,t,n,o,i,r){t[0].set("scale",{transition:e.scale})},function(e,t,n,o,i,r){t[0].set("rotation",e.rotate)}],context:{}},props:["color"],state:()=>({alpha:.4,scale:1,rotate:0}),hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=1===this.scale?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=0===this.rotate?-4:0,this.scale=1.2===this.scale?1.3:1.2}}}),cr=Ei.Component("Menu",{components:{Button:ur},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;const d={};a[0]=this.element({parent:e||"root"},!0===c?u:t),d.x={transition:t.x},d.w=400,d.h=1080,d.color="{right: '0x64748baa', left: '0x475569aa'}",a[0].populate(d),!0===c&&(p-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===c?u:t),h.x=50,h.y=40,a[1].populate(h),!0===c&&(p-=1);const f=n.components&&n.components.Button||o.Button;e=a[1];const m={};a[2]=this.element({parent:e||"root"},!0===c?u:t),m.color="0xe4e4e7ff",m.ref="menu1";const g=[];if(void 0!==f)for(let P in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[P]],g.push(f[Symbol.for("config")].props[P]);a[2].populate(m),!0===c&&(p-=1),e=a[2];const y={};let v;if(y.color="0xe4e4e7ff",y.ref="menu1",l=y.is||"Button","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[3]=v.call(null,{props:y},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],u=a[3],c=!0):e=a[3][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const b=n.components&&n.components.Button||o.Button;e=a[1];const x={};a[4]=this.element({parent:e||"root"},!0===c?u:t),x.color="0xe4e4e7ff",x.y=100,x.ref="menu2";const w=[];if(void 0!==b)for(let P in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[P]],w.push(b[Symbol.for("config")].props[P]);a[4].populate(x),!0===c&&(p-=1),e=a[4];const S={};let T;if(S.color="0xe4e4e7ff",S.y=100,S.ref="menu2",l=S.is||"Button","string"==typeof l){if(T=n.components&&n.components[l]||o[l],!T)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(T=l);a[5]=T.call(null,{props:S},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],u=a[5],c=!0):e=a[5][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const k=n.components&&n.components.Button||o.Button;e=a[1];const C={};a[6]=this.element({parent:e||"root"},!0===c?u:t),C.color="0xe4e4e7ff",C.y=200,C.ref="menu3";const A=[];if(void 0!==k)for(let P in k[Symbol.for("config")].props)delete C[k[Symbol.for("config")].props[P]],A.push(k[Symbol.for("config")].props[P]);a[6].populate(C),!0===c&&(p-=1),e=a[6];const E={};let I;if(E.color="0xe4e4e7ff",E.y=200,E.ref="menu3",l=E.is||"Button","string"==typeof l){if(I=n.components&&n.components[l]||o[l],!I)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(I=l);a[7]=I.call(null,{props:E},a[6],t),a[7][Symbol.for("slots")][0]?(e=a[7][Symbol.for("slots")][0],u=a[7],c=!0):e=a[7][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const M=n.components&&n.components.Button||o.Button;e=a[1];const R={};a[8]=this.element({parent:e||"root"},!0===c?u:t),R.color="0xe4e4e7ff",R.y=300,R.ref="menu4";const _=[];if(void 0!==M)for(let P in M[Symbol.for("config")].props)delete R[M[Symbol.for("config")].props[P]],_.push(M[Symbol.for("config")].props[P]);a[8].populate(R),!0===c&&(p-=1),e=a[8];const L={};let D;if(L.color="0xe4e4e7ff",L.y=300,L.ref="menu4",l=L.is||"Button","string"==typeof l){if(D=n.components&&n.components[l]||o[l],!D)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(D=l);return a[9]=D.call(null,{props:L},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],u=a[9],c=!0):e=a[9][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),a},effects:[function(e,t,n,o,i,r){t[0].set("x",{transition:e.x})}],context:{}},state:()=>({x:-360,focused:1}),hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const e=this.$select(`menu${this.focused}`);e&&e.$focus&&e.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),pr=Ei.Component("FocusHandling",{components:{Menu:cr,Button:ur},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===p?c:t),h.x=300,h.y=150,a[1].populate(h),!0===p&&(d-=1);const f=n.components&&n.components.Button||o.Button;e=a[1];const m={};a[2]=this.element({parent:e||"root"},!0===p?c:t),m.color="0xef4444ff",m.x=0,m.ref="button1",m.z=1===t.focused?1:0;const g=[];if(void 0!==f)for(let ce in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[ce]],g.push(f[Symbol.for("config")].props[ce]);a[2].populate(m),!0===p&&(d-=1),e=a[2];const y={};let v;if(y.color="0xef4444ff",y.x=0,y.ref="button1",u=1===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.z=u,l=y.is||"Button","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[3]=v.call(null,{props:y},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],c=a[3],p=!0):e=a[3][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const b=n.components&&n.components.Button||o.Button;e=a[1];const x={};a[4]=this.element({parent:e||"root"},!0===p?c:t),x.color="0xf97316ff",x.x=320,x.ref="button2",x.z=2===t.focused?1:0;const w=[];if(void 0!==b)for(let ce in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[ce]],w.push(b[Symbol.for("config")].props[ce]);a[4].populate(x),!0===p&&(d-=1),e=a[4];const S={};let T;if(S.color="0xf97316ff",S.x=320,S.ref="button2",u=2===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),S.z=u,l=S.is||"Button","string"==typeof l){if(T=n.components&&n.components[l]||o[l],!T)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(T=l);a[5]=T.call(null,{props:S},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],c=a[5],p=!0):e=a[5][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const k=n.components&&n.components.Button||o.Button;e=a[1];const C={};a[6]=this.element({parent:e||"root"},!0===p?c:t),C.color="0x84cc16ff",C.x=640,C.ref="button3",C.z=3===t.focused?1:0;const A=[];if(void 0!==k)for(let ce in k[Symbol.for("config")].props)delete C[k[Symbol.for("config")].props[ce]],A.push(k[Symbol.for("config")].props[ce]);a[6].populate(C),!0===p&&(d-=1),e=a[6];const E={};let I;if(E.color="0x84cc16ff",E.x=640,E.ref="button3",u=3===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),E.z=u,l=E.is||"Button","string"==typeof l){if(I=n.components&&n.components[l]||o[l],!I)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(I=l);a[7]=I.call(null,{props:E},a[6],t),a[7][Symbol.for("slots")][0]?(e=a[7][Symbol.for("slots")][0],c=a[7],p=!0):e=a[7][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const M=n.components&&n.components.Button||o.Button;e=a[1];const R={};a[8]=this.element({parent:e||"root"},!0===p?c:t),R.color="0x10b981ff",R.x=0,R.y=100,R.ref="button4",R.z=4===t.focused?1:0;const _=[];if(void 0!==M)for(let ce in M[Symbol.for("config")].props)delete R[M[Symbol.for("config")].props[ce]],_.push(M[Symbol.for("config")].props[ce]);a[8].populate(R),!0===p&&(d-=1),e=a[8];const L={};let D;if(L.color="0x10b981ff",L.x=0,L.y=100,L.ref="button4",u=4===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),L.z=u,l=L.is||"Button","string"==typeof l){if(D=n.components&&n.components[l]||o[l],!D)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(D=l);a[9]=D.call(null,{props:L},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],c=a[9],p=!0):e=a[9][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const P=n.components&&n.components.Button||o.Button;e=a[1];const O={};a[10]=this.element({parent:e||"root"},!0===p?c:t),O.color="0x06b6d4ff",O.y=100,O.x=320,O.ref="button5",O.z=5===t.focused?1:0;const N=[];if(void 0!==P)for(let ce in P[Symbol.for("config")].props)delete O[P[Symbol.for("config")].props[ce]],N.push(P[Symbol.for("config")].props[ce]);a[10].populate(O),!0===p&&(d-=1),e=a[10];const U={};let B;if(U.color="0x06b6d4ff",U.y=100,U.x=320,U.ref="button5",u=5===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),U.z=u,l=U.is||"Button","string"==typeof l){if(B=n.components&&n.components[l]||o[l],!B)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(B=l);a[11]=B.call(null,{props:U},a[10],t),a[11][Symbol.for("slots")][0]?(e=a[11][Symbol.for("slots")][0],c=a[11],p=!0):e=a[11][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const j=n.components&&n.components.Button||o.Button;e=a[1];const F={};a[12]=this.element({parent:e||"root"},!0===p?c:t),F.color="0x3b82f6ff",F.y=100,F.x=640,F.ref="button6",F.z=6===t.focused?1:0;const z=[];if(void 0!==j)for(let ce in j[Symbol.for("config")].props)delete F[j[Symbol.for("config")].props[ce]],z.push(j[Symbol.for("config")].props[ce]);a[12].populate(F),!0===p&&(d-=1),e=a[12];const $={};let G;if($.color="0x3b82f6ff",$.y=100,$.x=640,$.ref="button6",u=6===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),$.z=u,l=$.is||"Button","string"==typeof l){if(G=n.components&&n.components[l]||o[l],!G)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(G=l);a[13]=G.call(null,{props:$},a[12],t),a[13][Symbol.for("slots")][0]?(e=a[13][Symbol.for("slots")][0],c=a[13],p=!0):e=a[13][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const V=n.components&&n.components.Button||o.Button;e=a[1];const H={};a[14]=this.element({parent:e||"root"},!0===p?c:t),H.color="0x8b5cf6ff",H.y=200,H.x=0,H.ref="button7",H.z=7===t.focused?1:0;const q=[];if(void 0!==V)for(let ce in V[Symbol.for("config")].props)delete H[V[Symbol.for("config")].props[ce]],q.push(V[Symbol.for("config")].props[ce]);a[14].populate(H),!0===p&&(d-=1),e=a[14];const X={};let W;if(X.color="0x8b5cf6ff",X.y=200,X.x=0,X.ref="button7",u=7===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),X.z=u,l=X.is||"Button","string"==typeof l){if(W=n.components&&n.components[l]||o[l],!W)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(W=l);a[15]=W.call(null,{props:X},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],c=a[15],p=!0):e=a[15][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const K=n.components&&n.components.Button||o.Button;e=a[1];const Y={};a[16]=this.element({parent:e||"root"},!0===p?c:t),Y.color="0xd946efff",Y.y=200,Y.x=320,Y.ref="button8",Y.z=8===t.focused?1:0;const Q=[];if(void 0!==K)for(let ce in K[Symbol.for("config")].props)delete Y[K[Symbol.for("config")].props[ce]],Q.push(K[Symbol.for("config")].props[ce]);a[16].populate(Y),!0===p&&(d-=1),e=a[16];const J={};let Z;if(J.color="0xd946efff",J.y=200,J.x=320,J.ref="button8",u=8===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),J.z=u,l=J.is||"Button","string"==typeof l){if(Z=n.components&&n.components[l]||o[l],!Z)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(Z=l);a[17]=Z.call(null,{props:J},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],c=a[17],p=!0):e=a[17][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const ee=n.components&&n.components.Button||o.Button;e=a[1];const te={};a[18]=this.element({parent:e||"root"},!0===p?c:t),te.color="0xf43f5eff",te.y=200,te.x=640,te.ref="button9",te.z=9===t.focused?1:0;const ne=[];if(void 0!==ee)for(let ce in ee[Symbol.for("config")].props)delete te[ee[Symbol.for("config")].props[ce]],ne.push(ee[Symbol.for("config")].props[ce]);a[18].populate(te),!0===p&&(d-=1),e=a[18];const oe={};let ie;if(oe.color="0xf43f5eff",oe.y=200,oe.x=640,oe.ref="button9",u=9===t.focused?1:0,!0===Array.isArray(u)&&(u=r(u).slice(0)),oe.z=u,l=oe.is||"Button","string"==typeof l){if(ie=n.components&&n.components[l]||o[l],!ie)throw new Error('Component "Button" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(ie=l);a[19]=ie.call(null,{props:oe},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],c=a[19],p=!0):e=a[19][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const re=n.components&&n.components.Menu||o.Menu;e=a[0];const se={};a[20]=this.element({parent:e||"root"},!0===p?c:t),se.ref="menu";const ae=[];if(void 0!==re)for(let ce in re[Symbol.for("config")].props)delete se[re[Symbol.for("config")].props[ce]],ae.push(re[Symbol.for("config")].props[ce]);a[20].populate(se),!0===p&&(d-=1),e=a[20];const le={};let ue;if(le.ref="menu",l=le.is||"Menu","string"==typeof l){if(ue=n.components&&n.components[l]||o[l],!ue)throw new Error('Component "Menu" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(ue=l);return a[21]=ue.call(null,{props:le},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],c=a[21],p=!0):e=a[21][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip2&&-1!==skip2.indexOf("z")||t[2].set("z",1===e.focused?1:0)},function(e,t,n,o,i,r){t[3][Symbol.for("props")].z=1===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skip4&&-1!==skip4.indexOf("z")||t[4].set("z",2===e.focused?1:0)},function(e,t,n,o,i,r){t[5][Symbol.for("props")].z=2===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skip6&&-1!==skip6.indexOf("z")||t[6].set("z",3===e.focused?1:0)},function(e,t,n,o,i,r){t[7][Symbol.for("props")].z=3===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skip8&&-1!==skip8.indexOf("z")||t[8].set("z",4===e.focused?1:0)},function(e,t,n,o,i,r){t[9][Symbol.for("props")].z=4===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skip10&&-1!==skip10.indexOf("z")||t[10].set("z",5===e.focused?1:0)},function(e,t,n,o,i,r){t[11][Symbol.for("props")].z=5===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skip12&&-1!==skip12.indexOf("z")||t[12].set("z",6===e.focused?1:0)},function(e,t,n,o,i,r){t[13][Symbol.for("props")].z=6===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skip14&&-1!==skip14.indexOf("z")||t[14].set("z",7===e.focused?1:0)},function(e,t,n,o,i,r){t[15][Symbol.for("props")].z=7===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skip16&&-1!==skip16.indexOf("z")||t[16].set("z",8===e.focused?1:0)},function(e,t,n,o,i,r){t[17][Symbol.for("props")].z=8===e.focused?1:0},function(e,t,n,o,i,r){"undefined"!=typeof skip18&&-1!==skip18.indexOf("z")||t[18].set("z",9===e.focused?1:0)},function(e,t,n,o,i,r){t[19][Symbol.for("props")].z=9===e.focused?1:0}],context:{}},state:()=>({focused:1}),hooks:{focus(){this.$trigger("focused")}},watch:{focused(e){const t=this.$select(`button${e}`);t&&t.$focus&&t.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const e=this.focused-1;if(0===e){const e=this.$select("menu");e&&e.$focus&&e.$focus()}else this.focused=Math.max(e,1)},a(){const e=this.$select("menu");e&&e.$focus&&e.$focus()}}}),dr=Ei.Component("Positioning",{code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),!0===c&&(p-=1),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===c?u:t),d.w=100,d.h=100,d.x=20,d.y=20,d.color="0xecfeffff",a[1].populate(d),!0===c&&(p-=1),e=a[0];const h={};a[2]=this.element({parent:e||"root"},!0===c?u:t),h.w=100,h.h=100,h.x=140,h.y=20,h.color="0xa5f3fcff",a[2].populate(h),!0===c&&(p-=1),e=a[0];const f={};a[3]=this.element({parent:e||"root"},!0===c?u:t),f.w=100,f.h=100,f.x=260,f.y=20,f.color="0x22d3eeff",a[3].populate(f),!0===c&&(p-=1),e=a[0];const m={};a[4]=this.element({parent:e||"root"},!0===c?u:t),m.w=100,m.h=100,m.x=380,m.y=20,m.color="0x0891b2ff",a[4].populate(m),!0===c&&(p-=1),e=a[0];const g={};a[5]=this.element({parent:e||"root"},!0===c?u:t),g.w=100,g.h=100,g.x=t.x1,g.y=t.y,g.color="0xfdf4ffff",a[5].populate(g),!0===c&&(p-=1),e=a[0];const y={};a[6]=this.element({parent:e||"root"},!0===c?u:t),y.w=100,y.h=100,y.x=t.x2,y.y=t.y,y.color="0xf5d0feff",a[6].populate(y),!0===c&&(p-=1),e=a[0];const v={};a[7]=this.element({parent:e||"root"},!0===c?u:t),v.w=100,v.h=100,v.x=t.x3,v.y=t.y,v.color="0xe879f9ff",a[7].populate(v),!0===c&&(p-=1),e=a[0];const b={};a[8]=this.element({parent:e||"root"},!0===c?u:t),b.w=100,b.h=100,b.x=t.x4,b.y=t.y,b.color="0xc026d3ff",a[8].populate(b),!0===c&&(p-=1),e=a[0];const x={};a[9]=this.element({parent:e||"root"},!0===c?u:t),x.w=100,x.h=100,x.x=t.xA,x.y=260,x.color="0xfff7edff",a[9].populate(x),!0===c&&(p-=1),e=a[0];const w={};a[10]=this.element({parent:e||"root"},!0===c?u:t),w.w=100,w.h=100,w.x=t.xB,w.y=260,w.color="0xfed7aaff",a[10].populate(w),!0===c&&(p-=1),e=a[0];const S={};a[11]=this.element({parent:e||"root"},!0===c?u:t),S.w=100,S.h=100,S.x=t.xC,S.y=260,S.color="0xfb923cff",a[11].populate(S),!0===c&&(p-=1),e=a[0];const T={};a[12]=this.element({parent:e||"root"},!0===c?u:t),T.w=100,T.h=100,T.x=t.xD,T.y=260,T.color="0xea580cff",a[12].populate(T),!0===c&&(p-=1),e=a[0];const k={};a[13]=this.element({parent:e||"root"},!0===c?u:t),k.w=800,k.h=800,k.y=20,k.x=800,k.color="0xecfdf5ff",a[13].populate(k),!0===c&&(p-=1),e=a[13];const C={};a[14]=this.element({parent:e||"root"},!0===c?u:t),C.w=600,C.h=600,C.y=20,C.x=20,C.color="0xa7f3d0ff",a[14].populate(C),!0===c&&(p-=1),e=a[14];const A={};a[15]=this.element({parent:e||"root"},!0===c?u:t),A.w=400,A.h=400,A.y=100,A.x=20,A.color="0x34d399ff",a[15].populate(A),!0===c&&(p-=1),e=a[15];const E={};a[16]=this.element({parent:e||"root"},!0===c?u:t),E.w=200,E.h=100,E.y=150,E.x=100,E.color="0x059669ff",a[16].populate(E),!0===c&&(p-=1),e=a[16];const I={};a[17]=this.element({parent:e||"root"},!0===c?u:t),I.w=50,I.h=50,I.y={transition:t.yNested},I.x={transition:t.xNested},I.color="0x065f46ff",a[17].populate(I),!0===c&&(p-=1),e=a[0];const M={};a[18]=this.element({parent:e||"root"},!0===c?u:t),M.w=100,M.h=100,M.y=500,M.x=20,M.color="0xe11d48ff",a[18].populate(M),!0===c&&(p-=1),e=a[0];const R={};a[19]=this.element({parent:e||"root"},!0===c?u:t),R.w=200,R.h=200,R.x=50,R.y=700,R.color="0x94a3b8ff",R.z=100,a[19].populate(R),!0===c&&(p-=1),e=a[19];const _={};a[20]=this.element({parent:e||"root"},!0===c?u:t),_.content="Lightning!",_.x=100,_.y=140,_.__textnode=!0,a[20].populate(_),!0===c&&(p-=1),e=a[19];const L={};a[21]=this.element({parent:e||"root"},!0===c?u:t),L.w=300,L.h=100,L.color="0x475569ff",a[21].populate(L),!0===c&&(p-=1);const D=n.components&&n.components.Circle||o.Circle;e=a[19];const P={};a[22]=this.element({parent:e||"root"},!0===c?u:t),P.x=150,P.y=150,P.size=100,P.color="0xffffffff";const O=[];if(void 0!==D)for(let Z in D[Symbol.for("config")].props)delete P[D[Symbol.for("config")].props[Z]],O.push(D[Symbol.for("config")].props[Z]);a[22].populate(P),!0===c&&(p-=1),e=a[22];const N={};let U;if(N.x=150,N.y=150,N.size=100,N.color="0xffffffff",l=N.is||"Circle","string"==typeof l){if(U=n.components&&n.components[l]||o[l],!U)throw new Error('Component "Circle" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(U=l);a[23]=U.call(null,{props:N},a[22],t),a[23][Symbol.for("slots")][0]?(e=a[23][Symbol.for("slots")][0],u=a[23],c=!0):e=a[23][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[0];const B={};a[24]=this.element({parent:e||"root"},!0===c?u:t),B.w=300,B.h=300,B.x=50,B.y=700,B.color="0xef444480",a[24].populate(B),!0===c&&(p-=1),e=a[0];const j={};a[25]=this.element({parent:e||"root"},!0===c?u:t),j.w=400,j.h=100,j.x=800,j.y=900,j.color="0x0284c7ff",a[25].populate(j),!0===c&&(p-=1),e=a[25];const F={};a[26]=this.element({parent:e||"root"},!0===c?u:t),F.w=.42*e.node.width,F.h=.3*e.node.height,F.y=.05*e.node.height,F.x=.01*e.node.width,F.color="0x075985ff",a[26].populate(F),!0===c&&(p-=1),e=a[25];const z={};a[27]=this.element({parent:e||"root"},!0===c?u:t),z.w=t.bar2.v,z.h=.3*e.node.height,z.y=.35*e.node.height,z.x=.01*e.node.width,z.color="0x6b21a8ff",a[27].populate(z),!0===c&&(p-=1),e=a[25];const $={};a[28]=this.element({parent:e||"root"},!0===c?u:t),$.w={transition:t.bar3},$.h=.3*e.node.height,$.y=.65*e.node.height,$.x=.01*e.node.width,$.color="0x9f1239ff",a[28].populate($),!0===c&&(p-=1),e=a[0];const G={};a[29]=this.element({parent:e||"root"},!0===c?u:t),G.w=250,G.h=250,G.color="0xfef08aff",G.x=450,G.y=700,a[29].populate(G),!0===c&&(p-=1),e=a[29];const V={};a[30]=this.element({parent:e||"root"},!0===c?u:t),V.w=40,V.h=40,V.placement="left",V.color="0x818cf8ff",a[30].populate(V),!0===c&&(p-=1),e=a[29];const H={};a[31]=this.element({parent:e||"root"},!0===c?u:t),H.w=40,H.h=40,H.placement="center",H.color="0x2563ebff",a[31].populate(H),!0===c&&(p-=1),e=a[29];const q={};a[32]=this.element({parent:e||"root"},!0===c?u:t),q.w=40,q.h=40,q.placement="right",q.color="0x1e40afff",a[32].populate(q),!0===c&&(p-=1),e=a[29];const X={};a[33]=this.element({parent:e||"root"},!0===c?u:t),X.w=40,X.h=40,X.x=54,X.placement="top",X.color="0xf472b6ff",a[33].populate(X),!0===c&&(p-=1),e=a[29];const W={};a[34]=this.element({parent:e||"root"},!0===c?u:t),W.w=40,W.h=40,W.x=54,W.placement="middle",W.color="0xdb2777ff",a[34].populate(W),!0===c&&(p-=1),e=a[29];const K={};a[35]=this.element({parent:e||"root"},!0===c?u:t),K.w=40,K.h=40,K.x=54,K.placement="bottom",K.color="0xbe185dff",a[35].populate(K),!0===c&&(p-=1),e=a[29];const Y={};a[36]=this.element({parent:e||"root"},!0===c?u:t),Y.w=40,Y.h=40,Y.placement="{x: 'center', y: 'bottom'}",Y.color="0xa3e635ff",a[36].populate(Y),!0===c&&(p-=1),e=a[29];const Q={};a[37]=this.element({parent:e||"root"},!0===c?u:t),Q.w=40,Q.h=40,Q.placement="{x: 'right', y: 'middle'}",Q.color="0x65a30dff",a[37].populate(Q),!0===c&&(p-=1),e=a[29];const J={};return a[38]=this.element({parent:e||"root"},!0===c?u:t),J.w=40,J.h=40,J.placement="{x: 'center', y: 'middle'}",J.color="0x4d7c0fff",a[38].populate(J),!0===c&&(p-=1),a},effects:[function(e,t,n,o,i,r){t[9].set("x",e.xA)},function(e,t,n,o,i,r){t[10].set("x",e.xB)},function(e,t,n,o,i,r){t[11].set("x",e.xC)},function(e,t,n,o,i,r){t[12].set("x",e.xD)},function(e,t,n,o,i,r){t[16].set("y",150)},function(e,t,n,o,i,r){t[16].set("x",100)},function(e,t,n,o,i,r){t[17].set("y",{transition:e.yNested})},function(e,t,n,o,i,r){t[17].set("x",{transition:e.xNested})},function(e,t,n,o,i,r){t[27].set("w",e.bar2.v)},function(e,t,n,o,i,r){t[28].set("w",{transition:e.bar3})}],context:{}},state:()=>({x1:20,x2:140,x3:260,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}),hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=0===this.yNested?50:0},2e3),this.$setInterval(()=>{this.xNested=0===this.xNested?150:0},1e3),this.$setInterval(()=>{const e=parseFloat(this.bar2.v),t="up"===this.bar2.direction?e+10:e-10;this.bar2.v=t+"%",t>=90&&(this.bar2.direction="down"),t<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(96*Math.random())+"%"},2e3)}}});var hr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function fr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mr,gr={};
/*
       @license
       Shaka Player
       Copyright 2016 Google LLC
       SPDX-License-Identifier: Apache-2.0
      */var yr=(mr||(mr=1,function(e){!function(){var t="undefined"!=typeof window?window:hr,n={};for(var o in function(e,t,n){var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var s="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},a=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var o=0;o<n.length;++o){var i=n[o];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function u(e,t){if(t)e:{var n=a;e=e.split(".");for(var o=0;o<e.length-1;o++){var i=e[o];if(!(i in n))break e;n=n[i]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&s(n,e,{configurable:!0,writable:!0,value:t})}}function c(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function p(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:r(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function d(e){if(!(e instanceof Array)){e=p(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}u("Symbol",function(e){function t(e,t){this.g=e,s(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",o=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+o++,i)}}),u("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var o=a[t[n]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&s(o.prototype,e,{configurable:!0,writable:!0,value:function(){return c(r(this))}})}return e});var h,f="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var m;e:{var g={};try{g.__proto__={a:!0},m=g.a;break e}catch(mS){}m=!1}h=m?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var y=h;function v(e,t){if(e.prototype=f(t.prototype),e.prototype.constructor=e,y)y(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(e,n,o)}else e[n]=t[n];e.hk=t.prototype}function b(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function x(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function w(e,t){e.i={sg:t,Fg:!0},e.g=e.m||e.j}function S(e,t,n){return e.g=n,{value:t}}function T(e){e.g=0}function k(e,t,n){e.m=t,null!=n&&(e.j=n)}function C(e,t){e.m=0,e.j=t||0}function A(e,t,n){e.g=t,e.m=n||0}function E(e,t){return e.m=t||0,t=e.i.sg,e.i=null,t}function I(e){e.A=[e.i],e.m=0,e.j=0}function M(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Fg?e.g=e.m||e.j:null!=n.u&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function R(e){this.g=new b,this.h=e}function _(e,t,n,o){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var r=i.value}catch(s){return e.g.l=null,w(e.g,s),L(e)}return e.g.l=null,o.call(e.g,r),L(e)}function L(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,w(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Fg)throw t.sg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function D(e){this.next=function(t){return x(e.g),e.g.l?t=_(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=L(e)),t},this.throw=function(t){return x(e.g),e.g.l?t=_(e,e.g.l.throw,t,e.g.s):(w(e.g,t),t=L(e)),t},this.return=function(t){return function(e,t){x(e.g);var n=e.g.l;return n?_(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),L(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function P(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(o,i){!function e(r){r.done?o(r.value):Promise.resolve(r.value).then(t,n).then(e,i)}(e.next())})}(new D(new R(e)))}function O(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t){e instanceof String&&(e+="");var n=0,o=!1,i={next:function(){if(!o&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return o=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function B(e,t,n){e instanceof String&&(e=String(e));for(var o=e.length,i=0;i<o;i++){var r=e[i];if(t.call(n,r,i,e))return{Dg:i,v:r}}return{Dg:-1,v:void 0}}function j(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}b.prototype.s=function(e){this.h=e},b.prototype.return=function(e){this.i={return:e},this.g=this.j},b.prototype.u=function(e){this.g=e},u("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(o){t.reject(o)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var r=a.setTimeout;n.prototype.i=function(e){r(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(o){this.j(o)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(o){n||(n=!0,e.call(t,o))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.C(e):this.m(e)}},t.prototype.C=function(e){var t=void 0;try{t=e.then}catch(o){return void this.l(o)}"function"==typeof t?this.I(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.A()},t.prototype.G=function(){var e=this;r(function(){if(e.B()){var t=a.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.H=function(e){var t=this.j();e.Ed(t.resolve,t.reject)},t.prototype.I=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(o){n.reject(o)}},t.prototype.then=function(e,n){function o(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){r(n)}}:t}var i,r,s=new t(function(e,t){i=e,r=t});return this.Ed(o(e,i),o(n,r)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ed=function(e,t){function n(){switch(o.h){case 1:e(o.i);break;case 2:t(o.i);break;default:throw Error("Unexpected state: "+o.h)}}var o=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var o=p(e),r=o.next();!r.done;r=o.next())i(r.value).Ed(t,n)})},t.all=function(e){var n=p(e),o=n.next();return o.done?i([]):new t(function(e,t){function r(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,i(o.value).Ed(r(s.length-1),t),o=n.next()}while(!o.done)})},t}),u("WeakMap",function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=p(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function o(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!N(e,a)){var t=new n;s(e,a,{value:t})}}function r(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),o=new e([[t,2],[n,3]]);return 2==o.get(t)&&3==o.get(n)&&(o.delete(t),o.set(n,4),!o.has(t)&&4==o.get(n))}catch(l){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();r("freeze"),r("preventExtensions"),r("seal");var u=0;return t.prototype.set=function(e,t){if(!o(e))throw Error("Invalid WeakMap key");if(i(e),!N(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.g]=t,this},t.prototype.get=function(e){return o(e)&&N(e,a)?e[a][this.g]:void 0},t.prototype.has=function(e){return o(e)&&N(e,a)&&N(e[a],this.g)},t.prototype.delete=function(e){return!!(o(e)&&N(e,a)&&N(e[a],this.g))&&delete e[a][this.g]},t}),u("Map",function(e){function t(){var e={};return e.Mb=e.next=e.head=e}function n(e,t){var n=e[1];return c(function(){if(n){for(;n.head!=e[1];)n=n.Mb;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function o(e,t){var n=t&&typeof t;"object"==n||"function"==n?r.has(t)?n=r.get(t):(n=""+ ++s,r.set(t,n)):n="p_"+t;var o=e[0][n];if(o&&N(e[0],n))for(e=0;e<o.length;e++){var i=o[e];if(t!=t&&i.key!=i.key||t===i.key)return{id:n,list:o,index:e,entry:i}}return{id:n,list:o,index:-1,entry:void 0}}function i(e){if(this[0]={},this[1]=t(),this.size=0,e){e=p(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(p([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var o=n.entries(),i=o.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=o.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!o.next().done)}catch(l){return!1}}())return e;var r=new WeakMap;i.prototype.set=function(e,t){var n=o(this,e=0===e?0:e);return n.list||(n.list=this[0][n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this[1],Mb:this[1].Mb,head:this[1],key:e,value:t},n.list.push(n.entry),this[1].Mb.next=n.entry,this[1].Mb=n.entry,this.size++),this},i.prototype.delete=function(e){return!(!(e=o(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this[0][e.id],e.entry.Mb.next=e.entry.next,e.entry.next.Mb=e.entry.Mb,e.entry.head=null,this.size--,0))},i.prototype.clear=function(){this[0]={},this[1]=this[1].Mb=t(),this.size=0},i.prototype.has=function(e){return!!o(this,e).entry},i.prototype.get=function(e){return(e=o(this,e).entry)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,o=this.entries();!(n=o.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i}),u("Set",function(e){function t(e){if(this.g=new Map,e){e=p(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(p([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var o=n.entries(),i=o.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&!(i=o.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&o.next().done}catch(r){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(o){return e.call(t,o,o,n)})},t)}),u("Array.prototype.keys",function(e){return e||function(){return U(this,function(e){return e})}}),u("Array.prototype.findIndex",function(e){return e||function(e,t){return B(this,e,t).Dg}}),u("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var o=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var r=0;!(i=e.next()).done;)o.push(t.call(n,i.value,r++))}else for(i=e.length,r=0;r<i;r++)o.push(t.call(n,e[r],r));return o}}),u("Array.prototype.values",function(e){return e||function(){return U(this,function(e,t){return t})}}),u("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),u("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var o=n.length;for(0>(t=t||0)&&(t=Math.max(t+o,0));t<o;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}),u("String.prototype.includes",function(e){return e||function(e,t){return-1!==j(this,e,"includes").indexOf(e,t||0)}}),u("String.fromCodePoint",function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var o=Number(arguments[n]);if(0>o||1114111<o||o!==Math.floor(o))throw new RangeError("invalid_code_point "+o);65535>=o?t+=String.fromCharCode(o):(o-=65536,t+=String.fromCharCode(o>>>10&1023|55296),t+=String.fromCharCode(1023&o|56320))}return t}}),u("Array.prototype.find",function(e){return e||function(e,t){return B(this,e,t).v}}),u("String.prototype.startsWith",function(e){return e||function(e,t){var n=j(this,e,"startsWith"),o=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var r=0;r<i&&t<o;)if(n[t++]!=e[r++])return!1;return r>=i}}),u("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=p(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),o=new e([t]);return!(!o.has(t)||o.has(n))&&(o.delete(t),o.add(n),!o.has(t)&&o.has(n))}catch(i){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)});var F="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var i in o)N(o,i)&&(e[i]=o[i])}return e};u("Object.assign",function(e){return e||F}),u("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),u("Array.prototype.entries",function(e){return e||function(){return U(this,function(e,t){return[e,t]})}}),u("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),u("String.prototype.repeat",function(e){return e||function(e){var t=j(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),u("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&1/0!==e&&-1/0!==e}}),u("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push(e[t]);return n}}),u("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),u("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),u("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}),u("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push([t,e[t]]);return n}});var z=this||self;function $(e,t){e=e.split(".");var n,o=z;e[0]in o||void 0===o.execScript||o.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?o=o[n]&&o[n]!==Object.prototype[n]?o[n]:o[n]={}:o[n]=t}function G(){}function V(){}function H(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function q(e){return e.h/(1-Math.pow(e.g,e.i))}function X(){this.h=new H(2),this.j=new H(5),this.g=0,this.i=128e3,this.l=16e3}function W(){}function K(){}function Y(){}function Q(e){var t=O.apply(1,arguments);Z.has(e)||(Z.add(e),Y.apply(W,d(t)))}function J(){}H.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},X.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},X.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},X.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};var Z=new Set;function ee(){this.g={}}function te(){this.g=new ee}function ne(e,t,n,o){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=oe;if(null==t){t=!1;try{var n={},o={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",o),Object.defineProperty(n,"capture",o),o=function(){},e.addEventListener("test",o,n),e.removeEventListener("test",o,n)}catch(i){t=!1}oe=t}return t||!1}(e)?t:t.capture||!1}(e,o),this.target.addEventListener(t,n,this.g)}e.console&&(Y=function(){return console.warn.apply(console,d(O.apply(0,arguments)))},K=function(){console.error.apply(console,d(O.apply(0,arguments)))}),(i=ee.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},i.get=function(e){return(e=this.g[e])?e.slice():null},i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(e){return e!=t}),0==this.g[e].length&&delete this.g[e])},i.forEach=function(e){for(var t in this.g)e(t,this.g[t])},i.size=function(){return Object.keys(this.g).length},i.keys=function(){return Object.keys(this.g)},(i=te.prototype).release=function(){this.Ra(),this.g=null},i.D=function(e,t,n,o){this.g&&(e=new ne(e,t,n,o),this.g.push(t,e))},i.ha=function(e,t,n,o){var i=this;this.D(e,t,function o(r){i.jb(e,t,o),n(r)},o)},i.jb=function(e,t,n){if(this.g)for(var o=this.g.get(t)||[],i=(o=p(o)).next();!i.done;i=o.next())(i=i.value).target!=e||n!=i.listener&&n||(i.jb(),this.g.remove(t,i))},i.Ra=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,d(t.g[e]));for(n=(t=p(n)).next();!n.done;n=t.next())n.value.jb();this.g.g={}}},$("shaka.util.EventManager",te),te.prototype.removeAll=te.prototype.Ra,te.prototype.unlisten=te.prototype.jb,te.prototype.listenOnce=te.prototype.ha,te.prototype.listen=te.prototype.D,te.prototype.release=te.prototype.release,ne.prototype.jb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var oe=void 0;function ie(t){if(se.has(t))return se.get(t);if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported(t);return se.set(t,n),n}return!!e.MediaSource&&(n=MediaSource.isTypeSupported(t),se.set(t,n),n)}function re(){return!!e.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var se=new Map;function ae(e,t){this.g=e,this.h=t}function le(e,t){var n=new ae(5,0),o=pe,i=o.g,r=n.h-i.h;(0<(n.g-i.g||r)?o.i:o.h)(o.g,n,e,t)}function ue(e,t,n,o){Y([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",o].join(" "))}function ce(e,t,n,o){K([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",o].join(" "))}ae.prototype.toString=function(){return"v"+this.g+"."+this.h};var pe=null;function de(){}function he(){}function fe(){}function me(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ge(e)==ge(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=ve(e);t=ve(t);for(var o=0;o<e.byteLength;o++)if(n[o]!=t[o])return!1;return!0}function ge(e){return e instanceof ArrayBuffer?e:e.buffer}function ye(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function ve(e,t,n){return we(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function be(e,t,n){return we(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint16Array)}function xe(e,t,n){return we(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function we(e,t,n,o){var i=ge(e),r=1;"BYTES_PER_ELEMENT"in o&&(r=o.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/r;return new o(i,e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/r,s))),Math.floor(Math.min(e+Math.max(n,0),s))-e)}function Se(){}function Te(e){this.l=new he,(e=ke[e.toLowerCase()])&&(this.l=e()),this.h=new de,(e=Ce)&&(this.h=e())}de.prototype.extract=function(){},de.prototype.decode=function(){return[]},de.prototype.clear=function(){},de.prototype.getStreams=function(){return[]},he.prototype.init=function(){},he.prototype.parse=function(){return[]},$("shaka.util.BufferUtils",fe),fe.toDataView=xe,fe.toUint16=be,fe.toUint8=ve,fe.toArrayBuffer=ye,fe.equal=me,Se.prototype.init=function(){},Se.prototype.i=function(){},Se.prototype.g=function(){},Se.prototype.j=function(){},$("shaka.media.IClosedCaptionParser",Se),Te.prototype.init=function(e,t){void 0!==t&&t||this.g(),this.l.init(e)},Te.prototype.i=function(e){for(var t=(e=p(e=this.l.parse(e))).next();!t.done;t=e.next()){var n=ve((t=t.value).packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},Te.prototype.g=function(){this.h.clear()},Te.prototype.j=function(){return this.h.getStreams()},$("shaka.media.ClosedCaptionParser",Te),Te.findDecoder=function(){return Ce},Te.unregisterDecoder=function(){Ce=null},Te.registerDecoder=function(e){Ce=e},Te.findParser=function(e){return ke[e]},Te.unregisterParser=function(e){delete ke[e]},Te.registerParser=function(e,t){ke[e]=t};var ke={},Ce=null;function Ae(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ee,this.scroll=Ie}$("shaka.text.CueRegion",Ae);var Ee=1;Ae.units={PX:0,PERCENTAGE:Ee,LINES:2};var Ie="";function Me(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Re(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function _e(e,t,n){if(n||(n=Me),e.length!=t.length)return!1;t=t.slice();for(var o=(e=p(e)).next(),i={};!o.done;i={Gg:void 0},o=e.next()){if(i.Gg=o.value,-1==(o=t.findIndex(function(e){return function(t){return n(e.Gg,t)}}(i))))return!1;t[o]=t[t.length-1],t.pop()}return 0==t.length}function Le(e,t,n){if(n||(n=Me),e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0}function De(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Ae,this.position=null,this.positionAlign=Ne,this.size=0,this.textAlign=Ue,this.direction=ze,this.writingMode=$e,this.lineInterpretation=Ge,this.line=null,this.lineHeight="",this.lineAlign=Ve,this.displayAlign=je,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=We,this.fontStyle=Ke,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={dc:32,rows:15}}function Pe(e,t){return(e=new De(e,t,"")).lineBreak=!0,e}function Oe(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!Le(e.nestedCues,t.nestedCues,Oe))return!1}else if("region"==n||"cellResolution"==n){for(var o in e[n])if(e[n][o]!=t[n][o])return!1}else if(Array.isArray(e[n])){if(!Le(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}Ae.scrollMode={NONE:Ie,UP:"up"},De.prototype.clone=function(){var e,t=new De(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},$("shaka.text.Cue",De),De.equal=Oe,De.prototype.clone=De.prototype.clone;var Ne="auto";De.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Ne};var Ue="center",Be={LEFT:"left",RIGHT:"right",CENTER:Ue,START:"start",END:"end"};De.textAlign=Be;var je="after",Fe={BEFORE:"before",CENTER:"center",AFTER:je};De.displayAlign=Fe;var ze="ltr";De.direction={HORIZONTAL_LEFT_TO_RIGHT:ze,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var $e="horizontal-tb";De.writingMode={HORIZONTAL_TOP_TO_BOTTOM:$e,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Ge=0;De.lineInterpretation={LINE_NUMBER:Ge,PERCENTAGE:1};var Ve="start",He={CENTER:"center",START:Ve,END:"end"};De.lineAlign=He;var qe={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};De.defaultTextColor=qe;var Xe={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};De.defaultTextBackgroundColor=Xe;var We=400;De.fontWeight={NORMAL:We,BOLD:700};var Ke="normal",Ye={NORMAL:Ke,ITALIC:"italic",OBLIQUE:"oblique"};function Qe(){}function Je(e,t,n){et[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ie:t}}function Ze(e,t){for(var n=e.toLowerCase().split(";")[0],o=p([it,ot,nt,tt]),i=o.next();!i.done;i=o.next())if(i=et[n+"-"+i.value]){var r=i.ie(),s=r.isSupported(e,t);if(r.destroy(),s)return i.ie}return null}De.fontStyle=Ye,De.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},Qe.prototype.destroy=function(){},$("shaka.transmuxer.TransmuxerEngine",Qe),Qe.findTransmuxer=Ze,Qe.unregisterTransmuxer=function(e,t){delete et[e.toLowerCase().split(";")[0]+"-"+t]},Qe.registerTransmuxer=Je,Qe.prototype.destroy=Qe.prototype.destroy;var et={},tt=1,nt=2,ot=3,it=4;Qe.PluginPriority={FALLBACK:tt,PREFERRED_SECONDARY:nt,PREFERRED:ot,APPLICATION:it};
/*
      		 @license
      		 Copyright 2008 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/
var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
      		 @license
      		 Copyright 2006 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/function st(e){var t;e instanceof st?(at(this,e.Bb),this.uc=e.uc,lt(this,e.Eb),ut(this,e.Mc),this.Pa=e.Pa,ct(this,e.g.clone()),this.ec=e.ec):e&&(t=String(e).match(rt))?(at(this,t[1]||"",!0),this.uc=pt(t[2]||""),lt(this,t[3]||"",!0),ut(this,t[4]),this.Pa=pt(t[5]||"",!0),ct(this,t[6]||"",!0),this.ec=pt(t[7]||"")):this.g=new bt(null)}function at(e,t,n){e.Bb=n?pt(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function lt(e,t,n){e.Eb=n?pt(t,!0):t}function ut(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Mc=t}else e.Mc=null}function ct(e,t,n){t instanceof bt?e.g=t:(n||(t=dt(t,yt)),e.g=new bt(t))}function pt(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function dt(e,t,n){return null!=e?(e=encodeURI(e).replace(t,ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=st.prototype).Bb="",i.uc="",i.Eb="",i.Mc=null,i.Pa="",i.ec="",i.toString=function(){var e=[],t=this.Bb;if(t&&e.push(dt(t,ft,!0),":"),t=this.Eb){e.push("//");var n=this.uc;n&&e.push(dt(n,ft,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Mc)&&e.push(":",String(t))}return(t=this.Pa)&&(this.Eb&&"/"!=t.charAt(0)&&e.push("/"),e.push(dt(t,"/"==t.charAt(0)?gt:mt,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.ec)&&e.push("#",dt(t,vt)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.Bb&&(t=new st);var n=!!e.Bb;n?at(t,e.Bb):n=!!e.uc,n?t.uc=e.uc:n=!!e.Eb,n?lt(t,e.Eb):n=null!=e.Mc;var o=e.Pa;if(n)ut(t,e.Mc);else if(n=!!e.Pa){if("/"!=o.charAt(0))if(this.Eb&&!this.Pa)o="/"+o;else{var i=t.Pa.lastIndexOf("/");-1!=i&&(o=t.Pa.substr(0,i+1)+o)}if(".."==o||"."==o)o="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){i=0==o.lastIndexOf("/",0),o=o.split("/");for(var r=[],s=0;s<o.length;){var a=o[s++];"."==a?i&&s==o.length&&r.push(""):".."==a?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),i&&s==o.length&&r.push("")):(r.push(a),i=!0)}o=r.join("/")}}return n?t.Pa=o:n=""!==e.g.toString(),n?ct(t,e.g.clone()):n=!!e.ec,n&&(t.ec=e.ec),t},i.clone=function(){return new st(this)};var ft=/[#\/\?@]/g,mt=/[#\?:]/g,gt=/[#\?]/g,yt=/[#\?@]/g,vt=/#/g;function bt(e){this.g=e||null}function xt(e){if(!e.Ka&&(e.Ka={},e.Xc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var o=t[n].indexOf("="),i=null;if(0<=o){var r=t[n].substring(0,o);i=t[n].substring(o+1)}else r=t[n];r=decodeURIComponent(r.replace(/\+/g," ")),i=i||"",e.add(r,decodeURIComponent(i.replace(/\+/g," ")))}}function wt(e){return xt(e),e.Xc}function St(e,t,n){var o=O.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=o,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(i){this.stack=i.stack}}function Tt(e){this.h=e,this.g=void 0}function kt(e,t){return!e.length||!t.length||e===t||0<Ct(e,t).length}function Ct(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],o=(e=p(e)).next();!o.done;o=e.next()){o=o.value;for(var i=p(t),r=i.next();!r.done;r=i.next())if(r=r.value,o.keySystem==r.keySystem){i=new Map;for(var s=p((o.initData||[]).concat(r.initData||[])),a=s.next();!a.done;a=s.next())a=a.value,i.set(a.keyId,a);i=Array.from(i.values()),s=o.keyIds&&r.keyIds?new Set([].concat(d(o.keyIds),d(r.keyIds))):o.keyIds||r.keyIds,n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||r.persistentStateRequired,videoRobustness:o.videoRobustness||r.videoRobustness,audioRobustness:o.audioRobustness||r.audioRobustness,serverCertificate:o.serverCertificate||r.serverCertificate,serverCertificateUri:o.serverCertificateUri||r.serverCertificateUri,initData:i,keyIds:s});break}}return n}function At(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}(i=bt.prototype).Ka=null,i.Xc=null,i.add=function(e,t){xt(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Xc++,this},i.set=function(e,t){return xt(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},i.get=function(e){return xt(this),this.Ka[e]||[]},i.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e,t=[];for(e in this.Ka)for(var n=encodeURIComponent(e),o=this.Ka[e],i=0;i<o.length;i++){var r=n;""!==o[i]&&(r+="="+encodeURIComponent(o[i])),t.push(r)}return this.g=t.join("&")},i.clone=function(){var e=new bt;if(e.g=this.g,this.Ka){var t,n={};for(t in this.Ka)n[t]=this.Ka[t].concat();e.Ka=n,e.Xc=this.Xc}return e},St.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},$("shaka.util.Error",St),St.Severity={RECOVERABLE:1,CRITICAL:2},St.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},St.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005},Tt.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g};var Et=new Tt(function(){return ye(new Uint8Array([0]))}),It=new Map;function Mt(e){this.h=e,this.g=null}function Rt(e){this.h=e,this.g=null}function _t(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function Lt(e){return""!=Jt().canPlayType(e)}function Dt(){return!!navigator.userAgent.match(/Edge?\//)}function Pt(){return Qt("Xbox One")}function Ot(){return Qt("Tizen")}function Nt(){return Qt("Tizen 3")}function Ut(){return Qt("Tizen 2")}function Bt(){return Qt("Web0S")}function jt(){return Bt()&&38===zt()}function Ft(){return Qt("CrKey")}function zt(){if(!Qt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function $t(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ot()&&!Qt("PC=EOS")&&!Qt("PC=APL")&&!Qt("VirginMedia")&&!qt()&&!Vt()&&!Qt("AFT")&&!Qt("WPE")&&!Qt("DT_STB_BCM")}function Gt(){return Qt("PlayStation 5")}function Vt(){return Qt("PlayStation 4")}function Ht(){return Qt("Hisense")||Qt("VIDAA")}function qt(){return Qt("SOPOpenBrowser")}function Xt(){if(!$t())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Wt(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("windows")}function Kt(){return Qt("Android")}function Yt(){return!!(Ot()||Bt()||Pt()||Vt()||Gt()||Qt("AFT")||Qt("PC=EOS")||Qt("PC=APL")||Qt("VirginMedia")||qt()||Qt("WPE")||Ft()||Ht()||Qt("DT_STB_BCM"))}function Qt(e){return(navigator.userAgent||"").includes(e)}function Jt(){return nn||(tn||(tn=new Rt(function(){nn=null})),(nn=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(nn=document.createElement("video")),tn.Y(1),nn)}function Zt(t){return t?t===e.shakaMediaKeysPolyfill:!!e.shakaMediaKeysPolyfill}function en(){var t,n,o,i,r,s,a,l,u,c,p,d,h;return P(function(f){switch(f.g){case 1:if(t={width:1/0,height:1/0},Ft()){if(p=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t.width=1280,t.height=720,k(f,15),!(d=p)){f.u(17);break}return S(f,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(Ot()){t.width=1920,t.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(n=webapis.systeminfo.getMaxVideoResolution(),t.width=n.width,t.height=n.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(t.width=7680,t.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(t.width=3840,t.height=2160)}catch(m){Y("Tizen: Error detecting screen size, default screen size 1920x1080.")}f.u(3);break}if(Pt()){t.width=1920,t.height=1080;try{o=void 0,o="undefined"!=typeof Windows?Windows:chrome.webview.hostObjects.sync.Windows,i=new o.Media.Protection.ProtectionCapabilities,r=o.Media.Protection.ProtectionCapabilityResult,s=null;do{s=i.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(s===r.maybe);s===r.probably&&(t.width=3840,t.height=2160)}catch(m){Y("Xbox: Error detecting screen size, default screen size 1920x1080.")}f.u(3);break}if(Bt()){try{a=JSON.parse(e.PalmSystem.deviceInfo),t.width=Math.max(1920,a.screenWidth),t.height=Math.max(1080,a.screenHeight)}catch(m){Y("WebOS: Error detecting screen size, default screen size 1920x1080."),t.width=1920,t.height=1080}f.u(3);break}if(Ht()){e.Hisense_Get4KSupportState&&e.Hisense_Get4KSupportState()?(t.width=3840,t.height=2160):(t.width=1920,t.height=1080),f.u(3);break}if(!Vt()&&!Gt()){f.u(3);break}return l=!1,k(f,9),S(f,e.msdk.device.getDisplayInfo(),11);case 11:u=f.h,l="4K"===u.resolution,A(f,10);break;case 9:return E(f),k(f,12),S(f,e.msdk.device.getDisplayInfoImmediate(),14);case 14:c=f.h,l="4K"===c.resolution,A(f,10);break;case 12:Y("PlayStation: Failed to get the display info:",E(f));case 10:l?(t.width=3840,t.height=2160):(t.width=1920,t.height=1080),f.u(3);break;case 18:d=f.h;case 17:if(d){t.width=3840,t.height=2160,f.u(19);break}if(!(h=p)){f.u(20);break}return S(f,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:h=f.h;case 20:h&&(t.width=1920,t.height=1080);case 19:A(f,3);break;case 15:K("Failed to check canDisplayType:",E(f));case 3:return f.return(t)}})}Mt.prototype.Y=function(t){var n=this;this.stop();var o=!0,i=null;return this.g=function(){e.clearTimeout(i),o=!1},i=e.setTimeout(function(){o&&n.h()},1e3*t),this},Mt.prototype.stop=function(){this.g&&(this.g(),this.g=null)},Rt.prototype.tc=function(){return this.stop(),this.h(),this},Rt.prototype.Y=function(e){var t=this;return this.stop(),this.g=new Mt(function(){t.h()}).Y(e),this},Rt.prototype.Sa=function(e){var t=this;return this.stop(),this.g=new Mt(function(){t.g.Y(e),t.h()}).Y(e),this},Rt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},$("shaka.util.Timer",Rt),Rt.prototype.stop=Rt.prototype.stop,Rt.prototype.tickEvery=Rt.prototype.Sa,Rt.prototype.tickAfter=Rt.prototype.Y,Rt.prototype.tickNow=Rt.prototype.tc;var tn=null,nn=null;function on(){}function rn(t){if(!t)return"";if(239==(t=ve(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!Vt())return(t=(new TextDecoder).decode(t)).includes("�")&&K('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",o=0;o<t.length;++o){var i=65533;if(128&t[o]?t.length>=o+2&&192==(224&t[o])&&128==(192&t[o+1])?(i=(31&t[o])<<6|63&t[o+1],o+=1):t.length>=o+3&&224==(240&t[o])&&128==(192&t[o+1])&&128==(192&t[o+2])?(i=(15&t[o])<<12|(63&t[o+1])<<6|63&t[o+2],o+=2):t.length>=o+4&&240==(241&t[o])&&128==(192&t[o+1])&&128==(192&t[o+2])&&128==(192&t[o+3])&&(i=(7&t[o])<<18|(63&t[o+1])<<12|(63&t[o+2])<<6|63&t[o+3],o+=3):i=t[o],65535>=i)n+=String.fromCharCode(i);else{var r=1023&(i-=65536);n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+r)}}return n}function sn(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new St(2,2,2004);n=Math.floor(e.byteLength/2);var o=new Uint16Array(n);e=xe(e);for(var i=0;i<n;i++)o[i]=e.getUint16(2*i,t);return cn(o)}function an(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=ve(e);if(239==n[0]&&187==n[1]&&191==n[2])return rn(n);if(254==n[0]&&255==n[1])return sn(n.subarray(2),!1);if(255==n[0]&&254==n[1])return sn(n.subarray(2),!0);if(0==n[0]&&0==n[2])return sn(e,!1);if(0==n[1]&&0==n[3])return sn(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return rn(e);throw new St(2,2,2003)}function ln(t){if(e.TextEncoder&&!Vt()){var n=new TextEncoder;return ye(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var o=0;o<t.length;o++)n[o]=t[o].charCodeAt(0);return ye(n)}function un(e,t){for(var n=new ArrayBuffer(2*e.length),o=new DataView(n),i=0;i<e.length;++i)o.setUint16(2*i,e.charCodeAt(i),t);return n}function cn(e){return dn.value()(e)}function pn(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(e){return"#"==e[1]?0<=(e="x"==e[2]||"X"==e[2]?parseInt(e.substring(3),16):parseInt(e.substring(2),10))&&1114111>=e?String.fromCodePoint(e):"":t[e]||"'"}):e||""}$("shaka.util.StringUtils",on),on.resetFromCharCode=function(){dn.g=void 0},on.toUTF16=un,on.toUTF8=ln,on.fromBytesAutoDetect=an,on.fromUTF16=sn,on.fromUTF8=rn;var dn=new Tt(function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(n){return!1}}for(var t={ac:65536};0<t.ac;(t={ac:t.ac}).ac/=2)if(e(t.ac))return function(e){return function(t){for(var n="",o=0;o<t.length;o+=e.ac)n+=String.fromCharCode.apply(null,t.subarray(o,o+e.ac));return n}}(t);return null});function hn(){}function fn(e){return e=cn(ve(e)),btoa(e)}function mn(e,t){return t=null==t||t,e=fn(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function gn(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),o=0;o<t.length;++o)n[o]=t.charCodeAt(o);return n}function yn(t){for(var n=t.length/2,o=new Uint8Array(n),i=0;i<n;i++)o[i]=e.parseInt(t.substr(2*i,2),16);return o}function vn(e){var t=ve(e);e="";for(var n=(t=p(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function bn(){for(var e=O.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var o=n=0;o<e.length;++o){var i=e[o];i instanceof Uint8Array?t.set(i,n):t.set(ve(i),n),n+=i.byteLength}return t}function xn(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length){var n=new st(e[0]);return t=new st(t[0]),[n.resolve(t).toString()]}t=t.map(function(e){return new st(e)}),n=[];for(var o=(e=p(e)).next();!o.done;o=e.next()){o=new st(o.value);for(var i=p(t),r=i.next();!r.done;r=i.next())n.push(o.resolve(r.value).toString())}return n}function wn(e,t,n,o){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},o&&(e.keySystemUris=new Set([o])),e}function Sn(t,n){n=void 0===n?"cenc":n;var o=[],i=[],r=[];t.forEach(function(e,t){var n=t;22!=n.length&&(n=mn(yn(t),!1));var s=e;22!=s.length&&(s=mn(yn(e),!1)),e={kty:"oct",kid:n,k:s},o.push(e),i.push(e.kid),r.push(t)}),t=JSON.stringify({keys:o});var s=JSON.stringify({kids:i});return s=[{initData:ve(ln(s)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:s,keyIds:new Set(r)}}function Tn(e,t){if(1==t.length)return t[0];if(null!=(e=kn(e,t)))return e;throw new St(2,4,4025,t)}function kn(e,t){for(var n=p(Mn[e]),o=n.next();!o.done;o=n.next()){o=o.value;for(var i=p(t),r=i.next();!r.done;r=i.next())if(r=r.value,o.test(r.trim()))return r.trim()}return e==An?"":null}function Cn(e,t){for(var n=[],o=(e=p(Mn[e])).next();!o.done;o=e.next()){o=o.value;for(var i=p(t),r=i.next();!r.done;r=i.next())r=r.value,o.test(r.trim())&&n.push(r.trim())}return n}$("shaka.util.Uint8ArrayUtils",hn),hn.concat=bn,hn.toHex=vn,hn.fromHex=yn,hn.fromBase64=gn,hn.toBase64=mn,hn.toStandardBase64=fn;var An="text",En={ga:"video",X:"audio",ua:An,De:"image",gj:"application"},In=1/15,Mn={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Rn(){}function _n(e,t){var n=e;return t&&!Gn.includes(e)&&(n+='; codecs="'+t+'"'),n}function Ln(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Dn(e,t,n){var o=_n(e,t);return Ze(t=Ln(e,t))?(e=Ze(t))?(n=(e=e()).convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?o.replace("video","audio"):o,n}function Pn(e,t,n){var o=[t];return $n.forEach(function(t,i){var r=e[i];"codecs"==i?Gn.includes(e.mimeType)||o.push('codecs="'+n+'"'):r&&o.push(t+'="'+r+'"')}),"PQ"==e.hdr&&o.push('eotf="smpte2084"'),o.join(";")}function On(e){return e.split(";")[0].split("/")[1]}function Nn(e){var t=zn(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"vvc1"===e:case"vvi1"===e:return"vvc";case"dvh1"===e:case"dvhe"===e:return"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1";case"dvc1"===e:case"dvi1"===e:return"dovi-vvc"}return e}function Un(e){for(var t=[],n=(e=p(e.split(","))).next();!n.done;n=e.next())n=zn(n.value),t.push(n[0]);return t.sort().join(",")}function Bn(e){return e.split(";")[0]}function jn(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Fn(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function zn(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}$("shaka.util.MimeUtils",Rn),Rn.getFullTypeWithAllCodecs=Ln,Rn.getFullType=_n;var $n=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Gn=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Vn(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Hn(e){return!!Wn[e]||("application/cea-608"==e||"application/cea-708"==e)&&!!Ce}function qn(e,t,n){if(e.C=t,t=e.o.get(t))for(var o=p(t.keys()),i=o.next();!i.done;i=o.next())(i=t.get(i.value).filter(function(e){return e.endTime<=n}))&&e.j.append(i)}function Xn(e,t,n){t.startTime+=n,t.endTime+=n;for(var o=(t=p(t.nestedCues)).next();!o.done;o=t.next())Xn(e,o.value,n)}Vn.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},Vn.prototype.remove=function(e,t){var n=this;return P(function(o){if(1==o.g)return S(o,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),T(o)})},$("shaka.text.TextEngine",Vn),Vn.prototype.destroy=Vn.prototype.destroy,Vn.findParser=function(e){return Wn[e]},Vn.unregisterParser=function(e){delete Wn[e]},Vn.registerParser=function(e,t){Wn[e]=t};var Wn={};function Kn(e,t){return e.concat(t)}function Yn(){}function Qn(e){return null!=e}function Jn(){}function Zn(e,t){return e=no(e),t=no(t),e.split("-")[0]==t.split("-")[0]}function eo(e,t){return e=no(e),t=no(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function to(e,t){return e=no(e),t=no(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function no(e){var t=(e=p(e.split("-x-"))).next().value;t=void 0===t?"":t,e=void 0===(e=e.next().value)?"":e;var n=p(t.split("-"));return t=void 0===(t=n.next().value)?"":t,n=void 0===(n=n.next().value)?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ao.get(t)||t,((n=n.toUpperCase())?t+"-"+n:t)+(e?"-"+e:"")}function oo(e,t){return e=no(e),(t=no(t))==e?4:eo(t,e)?3:to(t,e)?2:eo(e,t)?1:0}function io(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),ao.get(e)||e}function ro(e){return e.language?no(e.language):e.audio&&e.audio.language?no(e.audio.language):e.video&&e.video.language?no(e.video.language):"und"}function so(e,t){e=no(e);for(var n=new Set,o=(t=p(t)).next();!o.done;o=t.next())n.add(no(o.value));for(o=(t=p(n)).next();!o.done;o=t.next())if((o=o.value)==e)return o;for(o=(t=p(n)).next();!o.done;o=t.next())if(eo(o=o.value,e))return o;for(o=(t=p(n)).next();!o.done;o=t.next())if(to(o=o.value,e))return o;for(t=(n=p(n)).next();!t.done;t=n.next())if(eo(e,t=t.value))return t;return null}$("shaka.util.LanguageUtils",Jn),Jn.findClosestLocale=so,Jn.getLocaleForVariant=ro,Jn.getLocaleForText=function(e){return no(e.language||"und")},Jn.getBase=io,Jn.relatedness=oo,Jn.areSiblings=function(e,t){var n=io(e),o=io(t);return e!=n&&t!=o&&n==o},Jn.normalize=no,Jn.isSiblingOf=to,Jn.isParentOf=eo,Jn.areLanguageCompatible=Zn,Jn.areLocaleCompatible=function(e,t){return(e=no(e))==(t=no(t))};var ao=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function lo(e){var t=new WeakSet;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer instanceof ArrayBuffer)return n;if(t.has(n))return null;var o=n.constructor==Array;if(n.constructor!=Object&&!o)return null;t.add(n);var i,r=o?[]:{};for(i in n)r[i]=e(n[i]);return o&&(r.length=n.length),r}}(e)}function uo(e){var t,n={};for(t in e)n[t]=e[t];return n}function co(){}function po(e,t,n,o){var i=e.variants;if((t.length||n.length)&&(i=function(e,t,n){for(var o=(t=p(t)).next(),i={};!o.done;i={oh:void 0},o=t.next())if(i.oh=o.value,o=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.oh)}}(i)),o.length){e=o;break}for(n=p(n),t=n.next(),o={};!t.done;o={ig:void 0},t=n.next())if(o.ig=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.ig)}}(o)),t.length){e=t;break}return e}(i,t,n)),o.length){for(t=new ee,n=(i=p(i)).next();!n.done;n=i.next())n=n.value,t.push(String(n.video.width||0),n);var r=[];t.forEach(function(e,t){e=0;for(var n=[],i=(t=p(t)).next(),s={};!i.done;s={Ae:void 0},i=t.next())s.Ae=i.value,(i=o.filter(function(e){return function(t){return e.Ae.decodingInfos[0][t]}}(s)).length)>e?(e=i,n=[s.Ae]):i==e&&n.push(s.Ae);r.push.apply(r,d(n))}),i=r}n=new Set,t=new Set;for(var s=(i=p(i)).next();!s.done;s=i.next())(s=s.value).audio&&n.add(s.audio),s.video&&t.add(s.video);n=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var a=[];for(i=new Map,s=(n=p(n)).next();!s.done;s=n.next()){var l=(s=s.value).language+(s.channelsCount||0)+(s.audioSamplingRate||0)+s.roles.join(",")+s.label+s.groupId+s.fastSwitching,u=i.get(l)||[];if(u.length){var c=u[u.length-1],h=Nn(c.codecs),f=Nn(s.codecs);h!=f||s.bandwidth&&c.bandwidth&&!(s.bandwidth>c.bandwidth)||(u.push(s),a.push(s.id))}else u.push(s),a.push(s.id);i.set(l,u)}n=Array.from(t).sort(function(e,t){return e.bandwidth&&t.bandwidth?e.bandwidth-t.bandwidth:e.width-t.width}),t=re();var m=[];for(i=new Map,s=(n=p(n)).next();!s.done;s=n.next()){if(s=s.value,l=Math.round(s.frameRate||0)+(s.hdr||"")+s.fastSwitching,(u=i.get(l)||[]).length){if(c=u[u.length-1],!t&&(h=Nn(c.codecs))!==(f=Nn(s.codecs)))continue;s.width>c.width||s.height>c.height?(u.push(s),m.push(s.id)):s.width==c.width&&s.height==c.height&&((h=Nn(c.codecs))!=(f=Nn(s.codecs))||s.bandwidth&&c.bandwidth&&!(s.bandwidth>c.bandwidth)||(u.push(s),m.push(s.id)))}else u.push(s),m.push(s.id);i.set(l,u)}e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,!(t&&!a.includes(t.id)||e&&!m.includes(e.id))})}function ho(e,t,n){function o(e,t,n){return e>=t&&e<=n}var i=e.video;if(i&&i.width&&i.height){var r=i.width,s=i.height;if(s>r&&(r=(s=p([s,r])).next().value,s=s.next().value),!o(r,t.minWidth,Math.min(t.maxWidth,n.width))||!o(s,t.minHeight,Math.min(t.maxHeight,n.height))||!o(i.width*i.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!o(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!o(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!o(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function fo(e,t,n){for(var o=!1,i=(e=p(e)).next();!i.done;i=e.next()){var r=(i=i.value).allowedByApplication;i.allowedByApplication=ho(i,t,n),r!=i.allowedByApplication&&(o=!0)}return o}function mo(e,t,n){return n=void 0===n?[]:n,P(function(o){return 1==o.g?S(o,go(e,t,0<t.offlineSessionIds.length,n),2):(function(e){e.textStreams=e.textStreams.filter(function(e){return Hn(e=_n(e.mimeType,e.codecs))})}(t),S(o,function(e){var t,n,o,i,r,s,a;return P(function(l){switch(l.g){case 1:t=[],n=p(e.imageStreams),o=n.next();case 2:if(o.done){l.u(4);break}if(i=o.value,"application/mp4"==(r=i.mimeType)&&"mjpg"==i.codecs&&(r="image/jpg"),Bo.has(r)){l.u(5);break}if(!(s=jo.get(r))){Bo.set(r,!1),l.u(5);break}return S(l,function(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}(s),7);case 7:a=l.h,Bo.set(r,a);case 5:Bo.get(r)&&t.push(i),o=n.next(),l.u(2);break;case 4:e.imageStreams=t,T(l)}})}(t),0))})}function go(e,t,n,o){var i,r;return P(function(s){if(1==s.g)return Pt()&&function(e){for(var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set,o=(e=p(e)).next();!o.done;o=e.next())(o=o.value).video&&n.add(o.video);for(n=p(n),e=n.next();!e.done;e=n.next()){e=e.value;for(var i=(o=p(Object.keys(t))).next();!i.done;i=o.next())if(i=i.value,e.codecs.includes(i)){e.codecs=e.codecs.replace(i,t[i]);break}}}(t.variants),S(s,xo(t.variants,n,!1,o),2);i=null,e&&(r=e.g)&&(i=r.keySystem),t.variants=t.variants.filter(function(e){var t=function(e,t){var n=Pt(),o=Qt("Firefox")&&Kt(),i=e.video,r=i&&i.width||0,s=i&&i.height||0;if(n&&i&&(1920<r||1080<s)&&(i.codecs.includes("avc1.")||i.codecs.includes("avc3.")))return!1;if(i){if(n=To(i.codecs),i.codecs.includes(",")){if(n=To(n=Tn("video",r=i.codecs.split(","))),r=So(r=Tn("audio",r),i.mimeType),!ie(s=Dn(i.mimeType,r,"audio")))return!1;n=[n,r].join()}if(!ie(r=Dn(i.mimeType,n,"video")))return!1;i.codecs=n}if(i=e.audio,o&&i&&i.encrypted&&i.codecs.toLowerCase().includes("opus"))return!1;if(i){if(o=So(i.codecs,i.mimeType),!ie(n=Dn(i.mimeType,o,"audio")))return!1;i.codecs=o}return e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&e.keySystem!=t)})}(e,i);if(!t){var n=[];e.audio&&n.push(Oo(e.audio)),e.video&&n.push(Oo(e.video))}return t}),T(s)})}function yo(e){var t=[];for(n in e)t.push(n);t.sort();for(var n=[],o=(t=p(t)).next();!o.done;o=t.next()){var i=o.value;o=JSON.stringify(i),(i=e[i])instanceof Object?(i=yo(i),n.push(o+":"+i)):(i=JSON.stringify(i),n.push(o+":"+i))}return"{"+n.join(",")+"}"}function vo(e,t){var n,o,i,r,s,a,l;return P(function(u){if(1==u.g){for(n=function(e,t){if(e){var n=uo(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},o=null,i=[],r=p(t),s=r.next(),a={};!s.done;a={cache:void 0,Dd:void 0},s=r.next())l=s.value,a.Dd=yo(l),a.cache=No,a.cache[a.Dd]?o=n(o,a.cache[a.Dd]):i.push(bo(l).then(function(e){return function(t){for(var i=null,r=(t=p(t||[])).next();!r.done;r=t.next())i=n(i,r.value);i&&(e.cache[e.Dd]=i,o=n(o,i))}}(a)));return S(u,Promise.all(i),2)}o&&e.decodingInfos.push(o),T(u)})}function bo(e){var t=[""];e.video&&(t=jn(e.video.contentType).split(","));var n=[""];e.audio&&(n=jn(e.audio.contentType).split(","));for(var o=[],i=(t=p(t)).next();!i.done;i=t.next()){i=i.value;for(var r=p(n),s=r.next(),a={};!s.done;a={xc:void 0},s=r.next())s=s.value,a.xc=lo(e),e.video&&(a.xc.video.contentType=_n(Bn(a.xc.video.contentType),i)),e.audio&&(a.xc.audio.contentType=_n(Bn(a.xc.audio.contentType),s)),o.push(new Promise(function(e){return function(t,n){navigator.mediaCapabilities.decodingInfo(e.xc).then(function(e){t(e)}).catch(n)}}(a)))}return Promise.all(o).catch(function(){return JSON.stringify(e),null})}function xo(e,t,n,o){var i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,T;return P(function(k){switch(k.g){case 1:if(e.some(function(e){return e.decodingInfos.length}))return k.return();i=p(o),r=i.next(),s={};case 2:if(r.done){k.u(4);break}s.Qg=r.value,a=!1,l=p(e),u=l.next();case 5:if(u.done){k.u(7);break}c=u.value,d=wo(c,t,n).filter((C=s,function(e){return((e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)===C.Qg})),h=p(d),f=h.next();case 8:if(f.done){k.u(10);break}return m=f.value,S(k,vo(c,m),9);case 9:f=h.next(),k.u(8);break;case 10:c.decodingInfos.length&&(a=!0),u=l.next(),k.u(5);break;case 7:if(a)return k.return();s={Qg:void 0},r=i.next(),k.u(2);break;case 4:g=p(e),y=g.next();case 12:if(y.done){k.u(0);break}v=y.value,b=wo(v,t,n).filter(function(e){return!(e=(e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!o.includes(e)}),x=p(b),w=x.next();case 15:if(w.done){y=g.next(),k.u(12);break}return T=w.value,S(k,vo(v,T),16);case 16:w=x.next(),k.u(15)}var C})}function wo(e,t,n){var o=e.audio,i=e.video,r=[],s=[];if(i)for(var a=p(i.fullMimeTypes),l=a.next();!l.done;l=a.next()){var u=jn(l=l.value);if(u.includes(",")&&!o){var c=u.split(","),d=Bn(l);u=Tn("video",c),d=Dn(d,c=So(c=Tn("audio",c),d),"audio"),s.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(u=To(u),l={contentType:Dn(Bn(l),u,"video"),width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":l.transferFunction="srgb";break;case"PQ":l.transferFunction="pq";break;case"HLG":l.transferFunction="hlg"}i.colorGamut&&(l.colorGamut=i.colorGamut),r.push(l)}if(o)for(l=(a=p(o.fullMimeTypes)).next();!l.done;l=a.next())l=Dn(l=Bn(u=l.value),u=So(jn(u),l),"audio"),s.push({contentType:l,channels:o.channelsCount||2,bitrate:o.bandwidth||e.bandwidth||1,samplerate:o.audioSamplingRate||1,spatialRendering:o.spatialAudio});for(a=[],0==r.length&&r.push(null),0==s.length&&s.push(null),l=(r=p(r)).next();!l.done;l=r.next())for(l=l.value,d=(u=p(s)).next();!d.done;d=u.next())d=d.value,c={type:n?"file":"media-source"},l&&(c.video=l),d&&(c.audio=d),a.push(c);if(!(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[a];for(e=[],n=new Map,r=(s=p(s)).next();!r.done;r=s.next())r=r.value,n.get(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],l=(r=p(n.keys())).next();!l.done;l=r.next()){for(l=l.value,u=[],c=(d=p(a)).next();!c.done;c=d.next()){c=Object.assign({},c.value);for(var h=n.get(l),f={keySystem:l,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},m=(h=p(h)).next();!m.done;m=h.next()){if((m=m.value).initData&&m.initData.length){for(var g=new Set,y=p(m.initData),v=y.next();!v.done;v=y.next())g.add(v.value.initDataType);f.initDataType=m.initData[0].initDataType}m.distinctiveIdentifierRequired&&(f.distinctiveIdentifier="required"),m.persistentStateRequired&&(f.persistentState="required"),m.sessionType&&(f.sessionTypes=[m.sessionType]),o&&(f.audio?(m.encryptionScheme&&(f.audio.encryptionScheme=f.audio.encryptionScheme||m.encryptionScheme),f.audio.robustness=f.audio.robustness||m.audioRobustness):(f.audio={robustness:m.audioRobustness},m.encryptionScheme&&(f.audio.encryptionScheme=m.encryptionScheme)),""==f.audio.robustness&&delete f.audio.robustness),i&&(f.video?(m.encryptionScheme&&(f.video.encryptionScheme=f.video.encryptionScheme||m.encryptionScheme),f.video.robustness=f.video.robustness||m.videoRobustness):(f.video={robustness:m.videoRobustness},m.encryptionScheme&&(f.video.encryptionScheme=m.encryptionScheme)),""==f.video.robustness&&delete f.video.robustness)}c.keySystemConfiguration=f,u.push(c)}e.push(u)}return e}function So(e,t){return"flac"==e.toLowerCase()?Xt()?"fLaC":"flac":"opus"===e.toLowerCase()?Xt()&&"mp4"==On(t)?"Opus":"opus":e}function To(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function ko(e){var t=e.audio,n=e.video,o=t?t.mimeType:null,i=n?n.mimeType:null,r=t?t.codecs:null,s=n?n.codecs:null,a=[];s&&a.push(s),r&&a.push(r);var l=[];n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null;var u=[];t&&u.push(t.kind),n&&u.push(n.kind),u=u[0]||null;var c=new Set;if(t)for(var d=p(t.roles),h=d.next();!h.done;h=d.next())c.add(h.value);if(n)for(h=(d=p(n.roles)).next();!h.done;h=d.next())c.add(h.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:u,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:l,audioMimeType:o,videoMimeType:i,codecs:a.join(", "),audioCodec:r,videoCodec:s,primary:e.primary,roles:Array.from(c),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,s.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Co(e){return{id:e.id,active:!1,type:An,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Ao(e){var t=e.width||null,n=e.height||null,o=null;e.segmentIndex&&(o=e.segmentIndex.get(0));var i=e.tilesLayout;return o&&(i=o.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Eo(e){return e.__shaka_id||(e.__shaka_id=Uo++),e.__shaka_id}function Io(e){var t=Ro(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function Mo(e){var t=Ro(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Ro(e){var t=e.language;return{id:Eo(e),active:!1,type:"",bandwidth:0,language:no(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function _o(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function Lo(e){return e.filter(function(e){return _o(e)})}function Do(e,t,n,o){var i=e,r=e.filter(function(e){return e.primary});r.length&&(i=r);var s=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==s}),t){var a=so(no(t),e.map(function(e){return e.language}));a&&(i=e.filter(function(e){return no(e.language)==a}))}if(i=i.filter(function(e){return e.forced==o}),n){if((e=Po(i,n)).length)return e}else if(e=i.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=i.map(function(e){return e.roles}).reduce(Kn,[]),e.length?Po(i,e[0]):i}function Po(e,t){return e.filter(function(e){return e.roles.includes(t)})}function Oo(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}$("shaka.util.StreamUtils",co),co.meetsRestrictions=ho;var No={},Uo=0,Bo=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),jo=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Fo(){var e=this;this.A=null,this.j=!1,this.i=new X,this.F=new te,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new X,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new Rt(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}function zo(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function $o(e,t,n,o,i){if(e.m){var r=e.m.zg();r&&(n=n.filter(function(e){return!e.bandwidth||!r||e.bandwidth<=r}))}return t&&(n=n.filter(function(e){return ho(e,t,{width:i,height:o})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}(i=Fo.prototype).stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},i.release=function(){this.F.release(),this.C=null},i.init=function(e){this.A=e},i.chooseVariant=function(){var t=1/0,n=1/0;if(this.g.restrictToScreenSize){var o=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio;t=e.screen.height*o,n=e.screen.width*o}this.h&&this.g.restrictToElementSize&&(o=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=Math.min(t,this.o.clientHeight*o),n=Math.min(n,this.o.clientWidth*o)),(o=this.s.filter(function(e){return e&&!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})).length||(o=this.s);var i=o;if(o.length!=this.s.length&&(i=this.s.filter(function(e){return e&&!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),o=$o(this,this.g.restrictions,i,1/0,1/0),1/0!=t||1/0!=n){o=function(e){for(var t=[],n=(e=p(e)).next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}(o);for(var r=(o=p(o)).next();!r.done;r=o.next())if((r=r.value).height>=t&&r.width>=n){t=r.height,n=r.width;break}o=$o(this,this.g.restrictions,i,t,n)}for(t=this.getBandwidthEstimate(),i.length&&!o.length&&(o=[(o=$o(this,null,i,1/0,1/0))[0]]),n=o[0]||null,i=0;i<o.length;i++){r=o[i];for(var s=isNaN(this.B)?1:Math.abs(this.B),a=s*r.bandwidth/this.g.bandwidthDowngradeTarget,l={bandwidth:1/0},u=i+1;u<o.length;u++)if(r.bandwidth!=o[u].bandwidth){l=o[u];break}s=s*l.bandwidth/this.g.bandwidthUpgradeTarget,t>=a&&t<=s&&(n.bandwidth!=r.bandwidth||n.bandwidth==r.bandwidth&&n.video&&r.video&&(n.video.width<r.video.width||n.video.height<r.video.height))&&(n=r)}return this.l=Date.now(),n},i.enable=function(){this.j=!0},i.disable=function(){this.j=!1},i.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&null!=this.l&&this.j&&zo(this))},i.trySuggestStreams=function(){null!=this.l&&this.j&&zo(this)},i.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e},i.setVariants=function(e){this.s=e},i.playbackRateChanged=function(e){this.B=e},i.setMediaElement=function(t){var n=this;this.o=t,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in e&&(this.h=new ResizeObserver(function(){n.C.Y(Go)}),this.h.observe(this.o))},i.setCmsdManager=function(e){this.m=e},i.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},$("shaka.abr.SimpleAbrManager",Fo),Fo.prototype.configure=Fo.prototype.configure,Fo.prototype.setCmsdManager=Fo.prototype.setCmsdManager,Fo.prototype.setMediaElement=Fo.prototype.setMediaElement,Fo.prototype.playbackRateChanged=Fo.prototype.playbackRateChanged,Fo.prototype.setVariants=Fo.prototype.setVariants,Fo.prototype.getBandwidthEstimate=Fo.prototype.getBandwidthEstimate,Fo.prototype.trySuggestStreams=Fo.prototype.trySuggestStreams,Fo.prototype.segmentDownloaded=Fo.prototype.segmentDownloaded,Fo.prototype.disable=Fo.prototype.disable,Fo.prototype.enable=Fo.prototype.enable,Fo.prototype.chooseVariant=Fo.prototype.chooseVariant,Fo.prototype.init=Fo.prototype.init,Fo.prototype.release=Fo.prototype.release,Fo.prototype.stop=Fo.prototype.stop;var Go=1;function Vo(e,t,n,o){for(n=void 0===n||n,o=void 0!==o&&o,this.h=e,this.g=new Set([e]),t=(e=p(t=t||[])).next();!t.done;t=e.next())this.add(t.value,n,o)}function Ho(e,t,n,o){var i;if(!(i=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(i=e.audio&&t.audio)){i=e.audio;var r=t.audio;i=!!((!i.channelsCount||!r.channelsCount||2<i.channelsCount||2<r.channelsCount)&&i.channelsCount!=r.channelsCount||i.spatialAudio!==r.spatialAudio||n&&!qo(i,r)||!Xo(i.roles,r.roles)||o&&i.groupId!==r.groupId)}return!(o=i)&&(o=e.video&&t.video)&&(e=e.video,t=t.video,o=!((!n||qo(e,t))&&Xo(e.roles,t.roles))),!o}function qo(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return Un(e)}),t=t.codecs.split(",").map(function(e){return Un(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Xo(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=p(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Wo(e,t,n){t=void 0===t?"reload":t,n=void 0!==n&&n,this.i=e,this.h=t,this.g=n,this.j=new Ko(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}function Ko(e,t,n,o,i,r,s,a,l,u,c){this.A=e,this.B=t,this.i=n,this.j=o,this.C=i,this.m=r,this.h=void 0===s?"":s,this.l=void 0===a?"":a,this.o=void 0===l?"reload":l,this.s=void 0!==u&&u,this.g=void 0===c?"":c}function Yo(){this.g=Zo,this.i=(new Map).set(Zo,2).set(Jo,1),this.h=0}function Qo(e,t,n){e.i.set(Zo,n).set(Jo,t)}$("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),$("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"}),Vo.prototype.add=function(e,t,n){return!!Ho(this.h,e,void 0===t||t,void 0!==n&&n)&&(this.g.add(e),!0)},Vo.prototype.values=function(){return this.g.values()},Wo.prototype.create=function(e){var t=this,n="smooth"==this.h&&re(),o=e.filter(function(e){return Ho(t.i,e,!n,t.g)});return o.length?new Vo(o[0],o,!n,this.g):this.j.create(e)},Ko.prototype.create=function(t){var n=[];n=function(e,t){var n=so(t=no(t),e.map(function(e){return ro(e)}));return n?e.filter(function(e){return n==ro(e)}):[]}(t,this.A);var o=t.filter(function(e){return e.primary});return t=function(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}(n=n.length?n:o.length?o:t,this.B),t.length&&(n=t),this.m&&(t=function(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}(n,this.m),t.length&&(n=t)),this.j&&(t=function(t,n){return"AUTO"==n&&(n=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),t.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==n})}(n,this.j),t.length&&(n=t)),this.i&&(t=function(e,t){return e.filter(function(e){return!e.audio||!e.audio.channelsCount||e.audio.channelsCount==t})}(n,this.i),t.length&&(n=t)),this.h&&(t=function(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}(n,this.h),t.length&&(n=t)),this.l&&(t=function(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}(n,this.l),t.length&&(n=t)),t=function(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}(n,this.C),t.length&&(n=t),this.g&&(t=function(e,t){return e.filter(function(e){return!e.audio||e.audio.codecs==t})}(n,this.g),t.length&&(n=t)),new Vo(n[0],n,!("smooth"==this.o&&re()),this.s)};var Jo=0,Zo=1;function ei(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function ti(e){var t,n;return P(function(o){if(1==o.g){if(e.g>=e.l){if(!e.i)throw new St(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?o.return():(n=e.h*(1+(2*Math.random()-1)*e.o),S(o,new Promise(function(e){new Rt(e).Y(n/1e3)}),2))}e.h*=e.m,T(o)})}function ni(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function oi(){var e,t,n=new Promise(function(n,o){e=n,t=o});return n.resolve=e,n.reject=t,n}function ii(e,t){this.promise=e,this.i=t,this.g=!1}function ri(e){return new ii(Promise.reject(e),function(){return Promise.resolve()})}function si(){var e=Promise.reject(new St(2,7,7001));return e.catch(function(){}),new ii(e,function(){return Promise.resolve()})}function ai(e){return new ii(Promise.resolve(e),function(){return Promise.resolve()})}function li(e){return new ii(e,function(){return e.catch(function(){})})}function ui(e){return new ii(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function ci(t,n){if(n)if(n instanceof Map)for(var o=p(n.keys()),i=o.next();!i.done;i=o.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(o in n)Object.defineProperty(this,o,{value:n[o],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function pi(e){var t,n=new ci(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}oi.prototype.resolve=function(){},oi.prototype.reject=function(){},ii.prototype.abort=function(){return this.g=!0,this.i()},ii.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},ii.prototype.Aa=function(e,t){function n(n){return function(a){if(i.g&&n)r.reject(s);else{var l=n?e:t;l?o=function(e,t,n){try{var o=e(t);return o&&o.promise&&o.abort?(n.resolve(o.promise),function(){return o.abort()}):(n.resolve(o),function(){return Promise.resolve(o).then(function(){},function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}(l,a,r):(n?r.resolve:r.reject)(a)}}}function o(){return r.reject(s),i.abort()}var i=this,r=new oi,s=new St(2,7,7001);return this.promise.then(n(!0),n(!1)),new ii(r,function(){return o()})},$("shaka.util.AbortableOperation",ii),ii.prototype.chain=ii.prototype.Aa,ii.prototype.finally=ii.prototype.finally,ii.all=ui,ii.prototype.abort=ii.prototype.abort,ii.notAbortable=li,ii.completed=ai,ii.aborted=si,ii.failed=ri,ci.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},ci.prototype.stopImmediatePropagation=function(){this.g=!0},ci.prototype.stopPropagation=function(){},$("shaka.util.FakeEvent",ci);var di={ij:"abrstatuschanged",jj:"adaptation",kj:"audiotrackchanged",lj:"buffering",mj:"complete",nj:"downloadfailed",oj:"downloadheadersreceived",pj:"drmsessionupdate",rj:"emsg",Ij:"prft",Error:"error",sj:"expirationupdated",tj:"firstquartile",uj:"gapjumped",xj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Metadata:"metadata",Fj:"midpoint",Gj:"nospatialvideoinfo",Hj:"onstatechange",Jj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"spatialvideoinfo",Oj:"stalldetected",Pj:"started",Qj:"statechanged",Rj:"streaming",Sj:"textchanged",Tj:"texttrackvisibility",Uj:"thirdquartile",Vj:"timelineregionadded",Wj:"timelineregionenter",Xj:"timelineregionexit",Yj:"trackschanged",$j:"unloading",bk:"variantchanged"};function hi(){this.ya=new ee,this.me=this}function fi(){this.g=[]}function mi(e,t){e.g.push(t.finally(function(){Re(e.g,t)}))}function gi(e,t,n,o,i,r){hi.call(this),this.i=!1,this.m=new fi,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=o||null,this.F=i||null,this.C=r||null,this.o=this.s=!1}function yi(e,t,n,o){n=n||Ci;var i=Ai[e];(!i||n>=i.priority)&&(Ai[e]={priority:n,ie:t,Di:void 0!==o&&o})}function vi(e,t){for(var n=p(e.g),o=n.next();!o.done;o=n.next())t.g.add(o.value);for(n=(e=p(e.h)).next();!n.done;n=e.next())t.h.add(n.value)}function bi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function xi(e,t,n,o,i,r,s,a){e.s&&(n.uris[r]=n.uris[r].replace("https://","http://")),e.o&&(n.uris[r]=n.uris[r].replace("http://","https://")),0<r&&e.F&&e.F(t,o,n.uris[r],n.uris[r-1]);var l=new st(n.uris[r]),u=l.Bb,c=!1;u||(at(l,u=(u=location.protocol).slice(0,-1)),n.uris[r]=l.toString()),u=u.toLowerCase();var p=(u=Ai[u])?u.ie:null;if(!p)return ri(new St(2,1,1e3,l));var d,h=u.Di,f=null,m=null,g=!1,y=!1;return li(ti(i)).Aa(function(){if(e.i)return si();d=Date.now();var i=0;n.requestStartTime=Date.now();var s=p(n.uris[r],n,t,function(r,s,l){f&&f.stop(),m&&m.Y(u/1e3),e.l&&t==ki&&(i++,n.packetNumber=i,e.l(r,s,wi(o),n),c=!0,a.g=l)},function(o){e.j&&e.j(o,n,t),y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!h)return s;var l=n.retryParameters.connectionTimeout;l&&(f=new Rt(function(){g=!0,s.abort()})).Y(l/1e3);var u=n.retryParameters.stallTimeout;return u&&(m=new Rt(function(){g=!0,s.abort()})),s}).Aa(function(o){f&&f.stop(),m&&m.stop(),null==o.timeMs&&(o.timeMs=Date.now()-d);var i={response:o,ii:c};return!y&&e.j&&e.j(o.headers,n,t),i},function(l){if(f&&f.stop(),m&&m.stop(),e.A){var u=null,c=0;l instanceof St&&(u=l,1001==l.code&&(c=l.data[1])),e.A(n,u,c,g)}if(e.i)return si();if(g&&(l=new St(1,1,1003,n.uris[r],t)),l instanceof St){if(7001==l.code)throw l;if(1010==l.code)throw s;if(1==l.severity)return u=new ci("retry",u=(new Map).set("error",l)),e.dispatchEvent(u),r=(r+1)%n.uris.length,xi(e,t,n,o,i,r,l,a)}throw l})}function wi(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}function Si(){this.g=0}function Ti(e,t,n){ii.call(this,e,t),this.h=n}hi.prototype.addEventListener=function(e,t){this.ya&&this.ya.push(e,t)},hi.prototype.removeEventListener=function(e,t){this.ya&&this.ya.remove(e,t)},hi.prototype.dispatchEvent=function(e){if(!this.ya)return!0;var t=this.ya.get(e.type)||[],n=this.ya.get("All");for(n&&(t=t.concat(n)),n=(t=p(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.me,e.currentTarget=this.me;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(o){}if(e.g)break}return e.defaultPrevented},hi.prototype.release=function(){this.ya=null},fi.prototype.destroy=function(){for(var e=[],t=p(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},v(gi,hi),(i=gi.prototype).Pf=function(e){this.s=e},i.Qf=function(e){this.o=e},i.Gi=function(e){this.g.add(e)},i.bj=function(e){this.g.delete(e)},i.mg=function(){this.g.clear()},i.Hi=function(e){this.h.add(e)},i.cj=function(e){this.h.delete(e)},i.ng=function(){this.h.clear()},i.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),hi.prototype.release.call(this),this.m.destroy()},i.request=function(e,t,n){var o=this,i=new Si;if(this.i){var r=Promise.reject(new St(2,7,7001));return r.catch(function(){}),new Ti(r,function(){return Promise.resolve()},i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?lo(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=lo(t.uris),r=function(e,t,n,o){function i(e){r=r.Aa(function(){return n.body&&(n.body=ye(n.body)),e(t,n,o)})}var r=ai(void 0);e.B&&i(e.B);for(var s=(e=p(e.g)).next();!s.done;s=e.next())i(s.value);return r.Aa(void 0,function(e){if(e instanceof St&&7001==e.code)throw e;throw new St(2,1,1006,e)})}(this,e,t,n);var s=r.Aa(function(){return xi(o,e,t,n,new ei(t.retryParameters,!1),0,null,i)}),a=s.Aa(function(t){return function(e,t,n,o){for(var i=ai(void 0),r=(e=p(e.h)).next(),s={};!r.done;s={Vg:void 0},r=e.next())s.Vg=r.value,i=i.Aa(function(e){return function(){var i=n.response;return i.data&&(i.data=ye(i.data)),(0,e.Vg)(t,i,o)}}(s));return i.Aa(function(){return n},function(e){var t=2;if(e instanceof St){if(7001==e.code)throw e;t=e.severity}throw new St(t,1,1007,e)})}(o,e,t,n)}),l=Date.now(),u=0;r.promise.then(function(){u=Date.now()-l},function(){});var c=0;s.promise.then(function(){c=Date.now()},function(){});var d=a.Aa(function(i){var r=Date.now()-c,s=i.response;return s.timeMs+=u,s.timeMs+=r,i.ii||!o.l||s.fromCache||"HEAD"==t.method||e!=ki||o.l(s.timeMs,s.data.byteLength,wi(n)),o.C&&o.C(e,s,n),s},function(e){throw e&&(e.severity=2),e});return r=new Ti(d.promise,function(){return d.abort()},i),mi(this.m,r),r},$("shaka.net.NetworkingEngine",gi),gi.prototype.request=gi.prototype.request,gi.prototype.destroy=gi.prototype.destroy,gi.makeRequest=bi,gi.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},gi.prototype.clearAllResponseFilters=gi.prototype.ng,gi.prototype.unregisterResponseFilter=gi.prototype.cj,gi.prototype.registerResponseFilter=gi.prototype.Hi,gi.prototype.clearAllRequestFilters=gi.prototype.mg,gi.prototype.unregisterRequestFilter=gi.prototype.bj,gi.prototype.registerRequestFilter=gi.prototype.Gi,gi.unregisterScheme=function(e){delete Ai[e]},gi.registerScheme=yi,gi.prototype.setForceHTTPS=gi.prototype.Qf,gi.prototype.setForceHTTP=gi.prototype.Pf,gi.NumBytesRemainingClass=Si,v(Ti,ii),gi.PendingRequest=Ti;var ki=1;gi.RequestType={MANIFEST:0,SEGMENT:ki,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},gi.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var Ci=3;gi.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Ci};var Ai={};function Ei(e){this.g=!1,this.h=new oi,this.i=e}function Ii(e,t){if(e.g){if(t instanceof St&&7003==t.code)throw t;throw new St(2,7,7003,t)}}function Mi(e,t){for(var n=[],o=(e=p(e)).next();!o.done;o=e.next())n.push(t(o.value));return n}function Ri(e){for(var t=new Map,n=p(Object.keys(e)),o=n.next();!o.done;o=n.next())o=o.value,t.set(o,e[o]);return t}function _i(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function Li(e,t){this.h=xe(e),this.i=t==Pi,this.g=0}function Di(){return new St(2,3,3e3)}Ei.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(i=Li.prototype).na=function(){return this.g<this.h.byteLength},i.va=function(){return this.g},i.getLength=function(){return this.h.byteLength},i.T=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw Di()}},i.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw Di()}},i.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw Di()}},i.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw Di()}},i.Nc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw Di()}if(2097151<t)throw new St(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.qb=function(e){if(this.g+e>this.h.byteLength)throw Di();var t=ve(this.h,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.h.byteLength)throw Di();this.g+=e},i.Oi=function(e){if(this.g<e)throw Di();this.g-=e},i.seek=function(e){if(0>e||e>this.h.byteLength)throw Di();this.g=e},i.oc=function(){for(var e=this.g;this.na()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=ve(this.h,e,this.g-e),this.g+=1,rn(e)},$("shaka.util.DataViewReader",Li),Li.prototype.readTerminatedString=Li.prototype.oc,Li.prototype.seek=Li.prototype.seek,Li.prototype.rewind=Li.prototype.Oi,Li.prototype.skip=Li.prototype.skip,Li.prototype.readBytes=Li.prototype.qb,Li.prototype.readUint64=Li.prototype.Nc,Li.prototype.readInt32=Li.prototype.Sg,Li.prototype.readUint32=Li.prototype.P,Li.prototype.readUint16=Li.prototype.la,Li.prototype.readUint8=Li.prototype.T,Li.prototype.getLength=Li.prototype.getLength,Li.prototype.getPosition=Li.prototype.va,Li.prototype.hasMoreData=Li.prototype.na;var Pi=1;function Oi(){this.i=[],this.h=[],this.g=!1}function Ni(e){for(var t=Gi(e);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Ui(e){for(var t=Gi(e),n=e.reader.P(),o=0;o<n&&(e.parser.Kc(e.start+t,e.reader,e.partialOkay),!e.parser.g);o++);}function Bi(e){var t=Gi(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function ji(e){var t=Gi(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Fi(e){return function(t){e(t.reader.qb(t.reader.getLength()-t.reader.va()))}}function zi(e){for(var t=0,n=(e=p(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function $i(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Gi(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}Li.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Pi},(i=Oi.prototype).box=function(e,t){return e=zi(e),this.i[e]=Vi,this.h[e]=t,this},i.S=function(e,t){return e=zi(e),this.i[e]=Hi,this.h[e]=t,this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new Li(e,0),this.g=!1;e.na()&&!this.g;)this.Kc(0,e,t,n)},i.Kc=function(e,t,n,o){var i=t.va();if(o&&i+8>t.getLength())this.g=!0;else{var r=t.P(),s=t.P(),a=$i(s),l=!1;switch(r){case 0:r=t.getLength()-i;break;case 1:if(o&&t.va()+8>t.getLength())return void(this.g=!0);r=t.Nc(),l=!0}var u=this.h[s];if(u){var c=null,p=null;if(this.i[s]==Hi){if(o&&t.va()+4>t.getLength())return void(this.g=!0);c=(p=t.P())>>>24,p&=16777215}s=i+r,n&&s>t.getLength()&&(s=t.getLength()),o&&s>t.getLength()?this.g=!0:(o=s-t.va(),u({name:a,parser:this,partialOkay:n||!1,version:c,flags:p,reader:t=new Li(t=0<o?t.qb(o):new Uint8Array(0),0),size:r,start:i+e,has64BitSize:l}))}else t.skip(Math.min(i+r-t.va(),t.getLength()-t.va()))}},$("shaka.util.Mp4Parser",Oi),Oi.headerSize=Gi,Oi.typeToString=$i,Oi.allData=Fi,Oi.audioSampleEntry=ji,Oi.visualSampleEntry=Bi,Oi.sampleDescription=Ui,Oi.children=Ni,Oi.prototype.parseNext=Oi.prototype.Kc,Oi.prototype.parse=Oi.prototype.parse,Oi.prototype.stop=Oi.prototype.stop,Oi.prototype.fullBox=Oi.prototype.S,Oi.prototype.box=Oi.prototype.box;var Vi=0,Hi=1;function qi(e){var t=this;this.g=[],this.h=[],this.data=[],(new Oi).box("moov",Ni).box("moof",Ni).S("pssh",function(e){if(!(1<e.version)){var n=ve(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(vn(e.reader.qb(16))),0<e.version){n=e.reader.P();for(var o=0;o<n;o++){var i=vn(e.reader.qb(16));t.h.push(i)}}}}).parse(e)}function Xi(e,t,n,o){var i=e.length,r=t.length+16+i;0<o&&(r+=4+16*n.size);var s=new Uint8Array(r),a=xe(s),l=0;if(a.setUint32(l,r),l+=4,a.setUint32(l,1886614376),l+=4,1>o?a.setUint32(l,0):a.setUint32(l,16777216),l+=4,s.set(t,l),l+=t.length,0<o)for(a.setUint32(l,n.size),l+=4,n=(t=p(n)).next();!n.done;n=t.next())n=yn(n.value),s.set(n,l),l+=n.length;return a.setUint32(l,i),s.set(e,l+4),s}function Wi(e,t){return Ki(e=an(e),t)}function Ki(e,t){return e=function(e){function t(i,r){r=void 0!==r&&r;for(var s=[];e[o];)if(60==e.charCodeAt(o)){if(47===e.charCodeAt(o+1)){r=o+2,o=e.indexOf(">",o);var a=(r=e.substring(r,o)).indexOf(i);if(-1==a){var l=i.indexOf(".");0<l&&(a=r.indexOf(i.substring(0,l)))}if(-1==a)throw i=e.substring(0,o).split("\n"),Error("Unexpected close tag\nLine: "+(i.length-1)+"\nColumn: "+(i[i.length-1].length+1)+"\nChar: "+e[o]);o+1&&(o+=1);break}if(33===e.charCodeAt(o+1)){if(45==e.charCodeAt(o+2)){for(;-1!==o&&(62!==e.charCodeAt(o)||45!=e.charCodeAt(o-1)||45!=e.charCodeAt(o-2)||-1==o);)o=e.indexOf(">",o+1);-1===o&&(o=e.length)}else if(91===e.charCodeAt(o+2)&&91===e.charCodeAt(o+8)&&"cdata"===e.substr(o+3,5).toLowerCase()){-1==(a=e.indexOf("]]>",o))?(s.push(e.substr(o+9)),o=e.length):(s.push(e.substring(o+9,a)),o=a+3);continue}o++;continue}e:{l=r,o++;var u=n(),c={};for(a=[];62!==e.charCodeAt(o)&&e[o];){var p=e.charCodeAt(o);if(64<p&&91>p||96<p&&123>p){p=n();for(var h=e.charCodeAt(o);h&&39!==h&&34!==h&&!(64<h&&91>h||96<h&&123>h)&&62!==h;)o++,h=e.charCodeAt(o);var f=o+1;if(o=e.indexOf(e[o],f),f=e.slice(f,o),39===h||34===h){if(-1===o){for(l={tagName:u,attributes:c,children:a,parent:null},u=0;u<a.length;u++)"string"!=typeof a[u]&&(a[u].parent=l);a=l;break e}}else f=null,o--;p.startsWith("xmlns:")&&Tr.set(f,p.split(":")[1]),"tt"===u&&"xml:space"===p&&"preserve"===f&&(l=!0),c[p]=f}o++}for(47!==e.charCodeAt(o-1)?(o++,a=t(u,l)):o++,l={tagName:u,attributes:c,children:a,parent:null},u=a.length,c=0;c<u;c++)"string"!=typeof(p=a[c])?p.parent=l:c==u-1&&"\n"==p&&a.pop();a=l}if(s.push(a),"string"==typeof a)break;"?"===a.tagName[0]&&a.children&&(s.push.apply(s,d(a.children)),a.children=[])}else a=o,-2==(o=e.indexOf("<",o)-1)&&(o=e.length),a=e.slice(a,o+1),r?0<a.length&&s.push(a):(s.length&&1==a.length&&"\n"==a[0]||0<a.trim().length)&&s.push(a),o++;return s}function n(){for(var t=o;-1==="\r\n\t>/= ".indexOf(e[o])&&e[o];)o++;return e.slice(t,o)}var o=0;return t("")}(e),!t&&e.length?e[0]:(e=e.find(function(e){return e.tagName===t}))?e:null}function Yi(e){return Tr.has(e)?Tr.get(e):""}function Qi(e){return"string"==typeof e}function Ji(e){var t=[];if(!e.children)return[];for(var n=(e=p(e.children)).next();!n.done;n=e.next())"string"!=typeof(n=n.value)&&t.push(n);return t}function Zi(e,t){var n=[];if(!e.children)return[];for(var o=(e=p(e.children)).next();!o.done;o=e.next())(o=o.value).tagName===t&&n.push(o);return n}function er(e){return"string"==typeof e?pn(e):""===(e=e.children.reduce(function(e,t){return"string"==typeof t?e+t:e},""))?null:pn(e)}function tr(e){return Array.from(e.children).every(function(e){return"string"==typeof e})?((e=er(e))&&(e=e.trim()),e):null}function nr(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children)for(var o=(e=p(e.children)).next();!o.done;o=e.next())nr(o.value,t,n);return n}function or(e,t){return 1!=(e=Zi(e,t)).length?null:e[0]}function ir(e,t,n){return 1!=(e=ar(e,t,n)).length?null:e[0]}function rr(e,t,n,o){o=void 0===o?null:o;var i=null;return null!=(e=e.attributes[t])&&(i=n(e)),null==i?o:i}function sr(e,t,n){return t=Yi(t),e.attributes[t+":"+n]||null}function ar(e,t,n){t=Yi(t);var o=[];if(e.children)for(var i=(e=p(e.children)).next();!i.done;i=e.next())(i=i.value)&&i.tagName===t+":"+n&&o.push(i);return o}function lr(e,t,n){for(var o=(t=p(t)).next();!o.done;o=t.next())if(o=sr(e,o.value,n))return o;return null}function ur(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function cr(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function pr(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function dr(e){return 0==(e=Number(e))%1?e:null}function hr(e){return 0==(e=Number(e))%1&&0<e?e:null}function fr(e){return 0==(e=Number(e))%1&&0<=e?e:null}function mr(e){return e=Number(e),isNaN(e)?null:e}function gr(e){return!!e&&"true"===e.toLowerCase()}function yr(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function vr(e){for(var t=[],n=(e=p(e=pn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))).next();!n.done;n=e.next()){var o=(n=n.value).match(/^([\w]+)/);if(o){var i=n.match(/(@id='(.*?)')/),r=n.match(/(@t='(\d+)')/),s=n.match(/(@n='(\d+)')/),a=n.match(/\[(\d+)\]/);t.push({name:o[0],id:i?i[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:r?Number(r[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:a?Number(a[1])-1:null,Sb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Sb=n.slice(1))}return t}function br(e,t){var n=vr(t.attributes.sel||"");if(n.length){var o=n[n.length-1],i=t.attributes.pos||null;null==(n=o.position)&&(null!==o.t&&(n=xr(e,"t",o.t)),null!==o.n&&(n=xr(e,"n",o.n))),null===n?n="prepend"===i?0:e.length:"prepend"===i?--n:"after"===i&&++n,i=t.tagName,(o=o.Sb)&&e[n]?wr(e[n],i,o,tr(t)||""):("remove"!==i&&"replace"!==i||e.splice(n,1),"add"!==i&&"replace"!==i||e.splice.apply(e,[n,0].concat(d(t.children))))}}function xr(e,t,n){for(var o=0,i=(e=p(e)).next();!i.done;i=e.next()){if(Number(i.value.attributes[t])===n)return o;o++}return null}function wr(e,t,n,o){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=o)}function Sr(e){var t,n=document.createElementNS("",e.tagName);for(t in e.attributes)n.setAttribute(t,e.attributes[t]);for(t=(e=p(e.children)).next();!t.done;t=e.next()){var o=void 0;o="string"==typeof(t=t.value)?new Text(t):Sr(t),n.appendChild(o)}return n}var Tr=new Map([]);function kr(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.fa=this.da=!1,this.I=0,this.g=null,this.B=new te,this.i=new Map,this.A=new Map,this.l=new oi,this.h=null,this.o=function(n){2==n.severity&&t.l.reject(n),e.onError(n)},this.Z=new Map,this.ea=new Map,this.L=new Rt(function(){return function(e){var t=e.Z,n=e.ea;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.o(new St(2,6,6014)),e.C.ee(_i(n))}(t)}),this.R=!1,this.N=[],this.U=!1,this.K=new Rt(function(){!function(e){e.i.forEach(function(t,n){var o=t.zf,i=n.expiration;isNaN(i)&&(i=1/0),i!=o&&(e.C.onExpirationUpdated(n.sessionId,i),t.zf=i)})}(t)}),this.l.catch(function(){}),this.j=new Ei(function(){return function(e){return P(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,S(t,Ur(e),2);case 2:if(!e.m){t.u(3);break}return k(t,4),S(t,e.m.setMediaKeys(null),6);case 6:A(t,5);break;case 4:E(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,T(t)}})}(t)}),this.ba=!1,this.F=this.G=null}function Cr(e,t,n){e.A=new Map;for(var o=(n=p(n)).next();!o.done;o=n.next())e.A.set(o.value,{initData:null,initDataType:null});for(o=(n=p(e.h.persistentSessionsMetadata)).next();!o.done;o=n.next())o=o.value,e.A.set(o.sessionId,{initData:o.initData,initDataType:o.initDataType});return e.R=0<e.A.size,Ar(e,t)}function Ar(e,t){var n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b;return P(function(x){if(1==x.g){if(n=function(e){return 0==(e=Ri(e.h.clearKeys)).size?null:Sn(e)}(e))for(o=p(t),i=o.next();!i.done;i=o.next())(r=i.value).video&&(r.video.drmInfos=[n]),r.audio&&(r.audio.drmInfos=[n]);for(s=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),s||(a=Ri(e.h.servers),function(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=p(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(t,a)),l=new Set,u=p(t),c=u.next();!c.done;c=u.next())for(d=c.value,h=Br(d),f=p(h),m=f.next();!m.done;m=f.next())g=m.value,l.add(g);for(y=p(l),v=y.next();!v.done;v=y.next())zr(v.value,Ri(e.h.servers),Ri(e.h.advanced||{}),e.h.keySystemsMapping);return S(x,xo(t,e.R,e.ba,e.h.preferredKeySystems),2)}return Ii(e.j),s||Object.keys(e.h.servers).length?(b=_r(e,void 0,t),x.return(s?b:b.catch(function(){}))):(e.da=!0,x.return(Promise.resolve()))})}function Er(e){var t;return P(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return S(n,e.G,3);case 3:return Ii(e.j),n.return();case 2:return k(n,4),e.G=e.m.setMediaKeys(e.s),S(n,e.G,6);case 6:A(n,5);break;case 4:t=E(n),e.o(new St(2,6,6003,t.message));case 5:Ii(e.j),T(n)}})}function Ir(e){var t,n,o,i;return P(function(r){if(1==r.g)return e.A.size?(e.A.forEach(function(t,n){Pr(e,n,t)}),S(r,e.l,3)):r.u(2);if(2!=r.g){if(0<(e.g&&e.g.keyIds||new Set([])).size&&function(e){for(var t=p(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.Z.get(n.value))return!1;return!0}(e))return r.return(e.l);e.l=new oi,e.l.catch(function(){})}for(t=(e.g?e.g.initData:[])||[],n=p(t),o=n.next();!o.done;o=n.next())i=o.value,Mr(e,i.initDataType,i.initData);return jr(e)&&e.l.resolve(),r.return(e.l)})}function Mr(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData)for(var o=e.i.values(),i=(o=p(o)).next();!i.done;i=o.next())if(me(n,i.value.initData))return;0<e.i.size&&jr(e)&&(e.l.resolve(),e.l=new oi,e.l.catch(function(){})),function(e,t,n,o){try{var i=e.s.createSession(o)}catch(r){return void e.o(new St(2,6,6005,r.message))}e.B.D(i,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(t):Or(e,t)}),e.B.D(i,"keystatuseschange",function(t){return Nr(e,t)}),e.i.set(i,{initData:n,initDataType:t,loaded:!1,zf:1/0,kb:null,type:o});try{n=e.h.initDataTransform(n,t,e.g)}catch(r){return t=r,r instanceof St||(t=new St(2,6,6016,r)),void e.o(t)}e.h.logLicenseExchange&&mn(n),i.generateRequest(t,n).catch(function(t){if(!e.j.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var o=n.systemCode;0>o&&(o+=Math.pow(2,32)),o="0x"+o.toString(16)}e.o(new St(2,6,6006,t.message,t,o))}})}(e,t,n,e.g.sessionType)}}function Rr(e){return e=Mi(e=e.i.keys(),function(e){return e.sessionId}),Array.from(e)}function _r(e,t,n){var o,i,r,s,a,l,u,c,d,h,f,m,g,y,v;return P(function(b){switch(b.g){case 1:if(o=new Map,n.length){i=function(e,t,n){for(var o=p(t),i=o.next();!i.done;i=o.next())for(var r=(i=p(Br(i.value))).next();!r.done;r=i.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r);if(1==n.size&&n.has(""))throw new St(2,6,6e3);for(e=p(e.h.preferredKeySystems),i=e.next(),o={};!i.done;o={Rg:void 0},i=e.next())for(o.Rg=i.value,i=p(t),r=i.next();!r.done;r=i.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Rg}}(o)))return r.keySystemAccess;for(e=p([!0,!1]),o=e.next();!o.done;o=e.next())for(o=o.value,i=p(t),r=i.next();!r.done;r=i.next())for(var s=(r=p(r.value.decodingInfos)).next();!s.done;s=r.next())if((s=s.value).supported&&s.keySystemAccess)for(var a=n.get(s.keySystemAccess.keySystem),l=(a=p(a)).next();!l.done;l=a.next())if(!!l.value.licenseServerUri==o)return s.keySystemAccess;return null}(e,n,o),b.u(2);break}return S(b,function(e,t){var n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v;return P(function(b){switch(b.g){case 1:if(1==t.size&&t.has(""))throw new St(2,6,6e3);for(o=p(t.values()),i=o.next();!i.done;i=o.next())0==(r=i.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;s=p(e.h.preferredKeySystems),a=s.next();case 2:if(a.done){b.u(4);break}if(l=a.value,!t.has(l)){b.u(3);break}return u=t.get(l),k(b,6),S(b,navigator.requestMediaKeySystemAccess(l,[u]),8);case 8:return n=b.h,b.return(n);case 6:E(b);case 7:Ii(e.j);case 3:a=s.next(),b.u(2);break;case 4:c=p([!0,!1]),d=c.next();case 9:if(d.done){b.u(11);break}h=d.value,f=p(t.keys()),m=f.next();case 12:if(m.done){d=c.next(),b.u(9);break}if(g=m.value,y=t.get(g),v=y.drmInfos.some(function(e){return!!e.licenseServerUri}),v!=h){b.u(13);break}return k(b,15),S(b,navigator.requestMediaKeySystemAccess(g,[y]),17);case 17:return n=b.h,b.return(n);case 15:E(b);case 16:Ii(e.j);case 13:m=f.next(),b.u(12);break;case 11:return b.return(n)}})}(e,t),3);case 3:i=b.h;case 2:if(!(r=i))throw new St(2,6,6001);for(Ii(e.j),k(b,4),e.H.clear(),s=r.getConfiguration(),a=s.audioCapabilities||[],l=s.videoCapabilities||[],u=p(a),c=u.next();!c.done;c=u.next())d=c.value,e.H.add(d.contentType.toLowerCase());for(h=p(l),f=h.next();!f.done;f=h.next())m=f.value,e.H.add(m.contentType.toLowerCase());if(n.length){var x=r.keySystem,w=o.get(r.keySystem),T=[],C=[],I=[],M=[],R=[],_=new Set,L=new Set;Fr(w,T,C,M,I,R,_,L);var D=e.R?"persistent-license":"temporary";for(x={keySystem:x,encryptionScheme:T[0],licenseServerUri:C[0],distinctiveIdentifierRequired:w[0].distinctiveIdentifierRequired,persistentStateRequired:w[0].persistentStateRequired,sessionType:w[0].sessionType||D,audioRobustness:w[0].audioRobustness||"",videoRobustness:w[0].videoRobustness||"",serverCertificate:M[0],serverCertificateUri:I[0],initData:R,keyIds:_},0<L.size&&(x.keySystemUris=L),L=(w=p(w)).next();!L.done;L=w.next())(L=L.value).distinctiveIdentifierRequired&&(x.distinctiveIdentifierRequired=L.distinctiveIdentifierRequired),L.persistentStateRequired&&(x.persistentStateRequired=L.persistentStateRequired);w=x}else w=r.keySystem,L=t.get(r.keySystem),x=[],T=[],C=[],I=[],M=[],R=new Set,Fr(L.drmInfos,x,T,I,C,M,R),w={keySystem:w,encryptionScheme:x[0],licenseServerUri:T[0],distinctiveIdentifierRequired:"required"==L.distinctiveIdentifier,persistentStateRequired:"required"==L.persistentState,sessionType:L.sessionTypes[0]||"temporary",audioRobustness:(L.audioCapabilities?L.audioCapabilities[0].robustness:"")||"",videoRobustness:(L.videoCapabilities?L.videoCapabilities[0].robustness:"")||"",serverCertificate:I[0],serverCertificateUri:C[0],initData:M,keyIds:R};if(e.g=w,!e.g.licenseServerUri)throw new St(2,6,6012,e.g.keySystem);return S(b,r.createMediaKeys(),6);case 6:if(g=b.h,Ii(e.j),e.s=g,""==e.h.minHdcpVersion||!("getStatusForPolicy"in e.s)){b.u(7);break}return k(b,8),S(b,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if("usable"!=b.h)throw new St(2,6,6018);Ii(e.j),A(b,7,4);break;case 8:if((y=E(b,4))instanceof St)throw y;throw new St(2,6,6019,y.message);case 7:return e.da=!0,S(b,function(e){var t,n;return P(function(o){switch(o.g){case 1:if(!e.s||!e.g)return o.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){o.u(2);break}return t=bi([e.g.serverCertificateUri],e.h.retryParameters),k(o,3),S(o,e.C.Lb.request(5,t).promise,5);case 5:n=o.h,e.g.serverCertificate=ve(n.data),A(o,4);break;case 3:throw new St(2,6,6017,E(o));case 4:if(e.j.g)return o.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(k(o,6),S(o,e.s.setServerCertificate(e.g.serverCertificate),8)):o.return();case 8:A(o,0);break;case 6:throw new St(2,6,6004,E(o).message)}})}(e),11);case 11:Ii(e.j),A(b,0);break;case 4:if(v=E(b),Ii(e.j,v),e.g=null,e.H.clear(),v instanceof St)throw v;throw new St(2,6,6002,v.message)}})}function Lr(e){jr(e)&&e.l.resolve()}function Dr(e,t){new Rt(function(){t.loaded=!0,Lr(e)}).Y(Gr)}function Pr(e,t,n){var o,i,r,s,a,u,c;return P(function(p){switch(p.g){case 1:try{o=e.s.createSession("persistent-license")}catch(l){return i=new St(2,6,6005,l.message),e.o(i),p.return(Promise.reject(i))}return e.B.D(o,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(t):Or(e,t)}),e.B.D(o,"keystatuseschange",function(t){return Nr(e,t)}),r={initData:n.initData,initDataType:n.initDataType,loaded:!1,zf:1/0,kb:null,type:"persistent-license"},e.i.set(o,r),k(p,2),S(p,o.load(t),4);case 4:return s=p.h,Ii(e.j),s||(e.i.delete(o),a=e.h.persistentSessionOnlinePlayback?1:2,e.o(new St(a,6,6013)),r.loaded=!0),Dr(e,r),Lr(e),p.return(o);case 2:u=E(p),Ii(e.j,u),e.i.delete(o),c=e.h.persistentSessionOnlinePlayback?1:2,e.o(new St(c,6,6005,u.message)),r.loaded=!0,Lr(e);case 3:return p.return(Promise.resolve())}})}function Or(e,t){var n,o,i,r,s,a,l,u,c,d,h,f,m;P(function(g){switch(g.g){case 1:if(n=t.target,e.h.logLicenseExchange&&mn(t.message),o=e.i.get(n),i=e.g.licenseServerUri,r=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&r&&r.individualizationServer&&(i=r.individualizationServer),(s=bi([i],e.h.retryParameters)).body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,o&&(s.initData=o.initData,s.initDataType=o.initDataType),r&&r.headers)for(a in r.headers)s.headers[a]=r.headers[a];if(At(e.g.keySystem)){var y=sn(s.body,!0,!0);if(y.includes("PlayReadyKeyMessage")){for(var v=nr(y=Ki(y,"PlayReadyKeyMessage"),"HttpHeader"),b=(v=p(v)).next();!b.done;b=v.next()){var x=b.value;b=nr(x,"name")[0],x=nr(x,"value")[0],s.headers[er(b)]=er(x)}y=nr(y,"Challenge")[0],s.body=gn(er(y))}else s.headers["Content-Type"]="text/xml; charset=utf-8"}return l=Date.now(),k(g,2),S(g,e.C.Lb.request(2,s).promise,4);case 4:u=g.h,A(g,3);break;case 2:return c=E(g),e.j.g||(d=new St(2,6,6007,c),1==e.i.size?(e.o(d),o&&o.kb&&o.kb.reject(d)):(o&&o.kb&&o.kb.reject(d),e.i.delete(n),jr(e)&&(e.l.resolve(),e.L.Y(.1)))),g.return();case 3:return e.j.g?g.return():(e.I+=(Date.now()-l)/1e3,e.h.logLicenseExchange&&mn(u.data),k(g,5),S(g,n.update(u.data),7));case 7:A(g,6);break;case 5:return h=E(g),f=new St(2,6,6008,h.message),e.o(f),o&&o.kb&&o.kb.reject(f),g.return();case 6:if(e.j.g)return g.return();m=new ci("drmsessionupdate"),e.C.onEvent(m),o&&(o.kb&&o.kb.resolve(),Dr(e,o)),T(g)}})}function Nr(e,t){t=t.target;var n=e.i.get(t),o=!1;t.keyStatuses.forEach(function(t,i){if("string"==typeof i){var r=i;i=t,t=r}if(At(e.g.keySystem)&&16==i.byteLength&&(Dt()||Vt())){var s=(r=xe(i)).getUint32(0,!0),a=r.getUint16(4,!0),l=r.getUint16(6,!0);r.setUint32(0,s,!1),r.setUint16(4,a,!1),r.setUint16(6,l,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(o=!0),i=vn(i).slice(0,32),e.Z.set(i,t)});var i=t.expiration-Date.now();(0>i||o&&1e3>i)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),jr(e)&&(e.l.resolve(),e.L.Y(Vr))}function Ur(e){var t;return P(function(n){return t=Array.from(e.i.entries()),e.i.clear(),S(n,Promise.all(t.map(function(t){var n=(t=p(t)).next().value,o=t.next().value;return P(function(t){return 1==t.g?(k(t,2),e.fa||e.A.has(n.sessionId)||"persistent-license"!==o.type||e.h.persistentSessionOnlinePlayback?S(t,function(e){var t;return P(function(n){return 1==n.g?(t=new Promise(function(e,t){new Rt(t).Y($r)}),k(n,2),S(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?A(n,0):(E(n),void T(n))})}(n),5):S(t,n.remove(),5)):2!=t.g?A(t,0):(E(t),void T(t))})})),0)})}function Br(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function jr(e){return function(e,t){for(var n=(e=p(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),function(e){return e.loaded})}function Fr(t,n,o,i,r,s,a,l){for(var u=[],c=(t=p(t)).next(),h={};!c.done;h={ra:void 0},c=t.next()){if(h.ra=c.value,n.includes(h.ra.encryptionScheme)||n.push(h.ra.encryptionScheme),"org.w3.clearkey"==h.ra.keySystem&&h.ra.licenseServerUri.startsWith("data:application/json;base64,")?u.includes(h.ra.licenseServerUri)||u.push(h.ra.licenseServerUri):o.includes(h.ra.licenseServerUri)||o.push(h.ra.licenseServerUri),r.includes(h.ra.serverCertificateUri)||r.push(h.ra.serverCertificateUri),h.ra.serverCertificate&&(i.some(function(e){return function(t){return me(t,e.ra.serverCertificate)}}(h))||i.push(h.ra.serverCertificate)),h.ra.initData)for(var f=(c=p(h.ra.initData)).next(),m={};!f.done;m={mf:void 0},f=c.next())m.mf=f.value,s.some(function(e){return function(t){var n=e.mf;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&me(t.initData,n.initData)}}(m))||s.push(m.mf);if(h.ra.keyIds)for(f=(c=p(h.ra.keyIds)).next();!f.done;f=c.next())a.add(f.value);if(h.ra.keySystemUris&&l)for(c=(h=p(h.ra.keySystemUris)).next();!c.done;c=h.next())l.add(c.value)}if(1==u.length)o.push(u[0]);else if(0<u.length){for(n=[],i=(u=p(u)).next();!i.done;i=u.next())i=e.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),n.push.apply(n,d(i.keys));u=JSON.stringify({keys:n}),o.push("data:application/json;base64,"+e.btoa(u))}}function zr(t,n,o,i){var r=t.keySystem;!r||"org.w3.clearkey"==r&&t.licenseServerUri||(n.size&&(n=n.get(r)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(o=o.get(r))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=o.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=o.persistentStateRequired),t.videoRobustness||(t.videoRobustness=o.videoRobustness),t.audioRobustness||(t.audioRobustness=o.audioRobustness),t.serverCertificate||(t.serverCertificate=o.serverCertificate),o.sessionType&&(t.sessionType=o.sessionType),t.serverCertificateUri||(t.serverCertificateUri=o.serverCertificateUri)),i[r]&&(t.keySystem=i[r]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==r&&(t.keySystem="com.chromecast.playready"))}(i=kr.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e){this.h=e,this.K&&this.K.Sa(this.h.updateExpirationTime)},i.Rb=function(e){var t=this;return P(function(n){if(1==n.g)return t.s?(t.m=e,t.B.ha(t.m,"play",function(){for(var e=p(t.N),n=e.next();!n.done;n=e.next())Or(t,n.value);t.U=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Ur(t)}),t.F=t.g&&t.g.initData.find(function(e){return 0<e.initData.length})||null,t.F||"com.apple.fps"!==t.g.keySystem||t.A.size?S(n,Er(t),2):n.u(2)):(t.B.ha(e,"encrypted",function(){t.o(new St(2,6,6010))}),n.return());Ir(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(e){return function(e,t){return P(function(n){if(1==n.g)return S(n,Er(e),2);Mr(e,t.initDataType,ve(t.initData)),T(n)})}(t,e)}),T(n)})},i.ff=function(){var e=this,t=this.i.keys();return t=Mi(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},i.ad=function(){for(var e=1/0,t=this.i.keys(),n=(t=p(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.Ld=function(){return _i(this.ea)};var $r=1,Gr=5,Vr=.5;
/*
      		 @license
      		 Shaka Player
      		 Copyright 2023 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/function Hr(e,t,n){this.h=e,this.i=t,this.g=n}function qr(e,t){return P(function(n){if(1==n.g)return S(n,mo(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||po(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(_o))throw new St(2,4,4032);return n.return(Xr(e,t))})}function Xr(e,t){var n=fo(t.variants,e.h.restrictions,e.i);if(t){var o=e.g?e.g.g:null;if(o&&e.g.s)for(var i=p(t.variants),r=i.next();!r.done;r=i.next())r=r.value,Kr(e,o.keySystem,r.video),Kr(e,o.keySystem,r.audio);Yr(e,t)}return n}function Kr(e,t,n){if(n)for(var o=(n=p(n.drmInfos)).next();!o.done;o=n.next())if((o=o.value).keySystem==t)for(var i=(o=p(o.initData||[])).next();!i.done;i=o.next())i=i.value,Mr(e.g,i.initDataType,i.initData)}function Yr(e,t){e=e.g?e.g.Ld():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var o=!1,i=!1,r=new Set,s=new Set,a=(t=p(t.variants)).next();!a.done;a=t.next()){var l=[];(a=a.value).audio&&l.push(a.audio),a.video&&l.push(a.video);for(var u=(l=p(l)).next();!u.done;u=l.next())if((u=u.value).keyIds.size)for(var c=(u=p(u.keyIds)).next();!c.done;c=u.next()){c=c.value;var d=e[n?"00":c];d?Qr.includes(d)&&s.add(d):r.add(c)}a.allowedByApplication?a.allowedByKeySystem&&(o=!0):i=!0}if(!o)throw new St(2,4,4012,e={hasAppRestrictions:i,missingKeys:Array.from(r),restrictedKeyStatuses:Array.from(s)})}var Qr=["output-restricted","internal-error"];function Jr(){}function Zr(e,t){if(t){var n=es[t.toLowerCase()];if(n)return n}throw new St(2,4,4e3,e,t)}$("shaka.media.ManifestParser",Jr),Jr.unregisterParserByMime=function(e){delete es[e]},Jr.registerParserByMime=function(e,t){es[e]=t},Jr.registerParserByExtension=function(){le("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Jr.AccessibilityPurpose={ak:"visually impaired",vj:"hard of hearing"};var es={};function ts(e,t,n,o,i){var r=os.value(),s=e.subarray(n.start,n.start+n.size),a=xe(s),l=new Uint8Array(n.size+r.byteLength);for(l.set(s,0),(s=xe(l)).setUint32(4,i),l.set(r,n.size),i=a.getUint32(4),s.setUint32(n.size+16,i),ns(l,0,l.byteLength),i=new Uint8Array(e.byteLength+l.byteLength),n=Pt()||Dt()?n.start:n.start+n.size,r=e.subarray(n),i.set(e.subarray(0,n)),i.set(l,n),i.set(r,n+l.byteLength),o=(e=p(o)).next();!o.done;o=e.next())ns(i,(o=o.value).start,o.size+l.byteLength);return l=xe(i,t.start),t=Gi(t),e=l.getUint32(t),l.setUint32(t,e+1),i}function ns(e,t,n){0!=(t=(e=xe(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var os=new Tt(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function is(e,t,n,o,i,r,s){this.M=e,this.Ha=t,this.sa=n,this.Hc=void 0===o?null:o,this.timescale=void 0===i?null:i,this.g=void 0===r?null:r,this.aesKey=void 0===s?null:s,this.mimeType=this.codecs=null}function rs(e,t){return e===t||(e&&t?e.Xb()==t.Xb()&&e.Ub()==t.Ub()&&Le(e.M().sort(),t.M().sort())&&me(e.cd(),t.cd()):e==t)}function ss(e,t,n,o,i,r,s,a,l,u,c,d,h,f,m,g){for(u=void 0===u?[]:u,f=void 0===f?ls:f,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=o,this.sa=i,this.$=r,this.timestampOffset=s,this.appendWindowStart=a,this.appendWindowEnd=l,this.g=u,this.tilesLayout=void 0===c?"":c,this.B=void 0===d?null:d,this.h=void 0===h?null:h,this.status=f,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=void 0===m?null:m,this.A=null,this.i=0,this.o=void 0!==g&&g,this.G=this.s=!1,t=(e=p(this.g)).next();!t.done;t=e.next())t.value.Kg();this.o&&this.g.length&&this.g[this.g.length-1].Jg(),this.C=this.mimeType=this.codecs=null}function as(e,t){e.$=t;for(var n=(e=p(e.g)).next();!n.done;n=e.next())as(n.value,t)}is.prototype.Xb=function(){return this.Ha},is.prototype.Ub=function(){return this.sa},is.prototype.cd=function(){return this.g},$("shaka.media.InitSegmentReference",is),is.prototype.getEndByte=is.prototype.Ub,is.prototype.getStartByte=is.prototype.Xb,(i=ss.prototype).M=function(){return this.F()},i.getStartTime=function(){return this.startTime},i.Mh=function(){return this.endTime},i.Xb=function(){return this.Ha},i.Ub=function(){return this.sa},i.di=function(){return this.tilesLayout},i.ci=function(){return this.B},i.Yb=function(){return this.status},i.xi=function(){this.status=us},i.wf=function(){this.preload=!0},i.ri=function(){return this.preload},i.Xd=function(){this.l=!1},i.ni=function(){return this.l},i.Kg=function(){this.s=!0},i.pi=function(){return this.s},i.Jg=function(){this.G=!0},i.oi=function(){return this.G},i.Ig=function(){this.m=!0},i.ji=function(){return this.m},i.fh=function(e){this.A=e},i.bi=function(){return this.A},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=p(this.g),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},i.Vf=function(e){null==this.h?K("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},i.Zi=function(e){this.C=e},i.cd=function(){return this.C},$("shaka.media.SegmentReference",ss),ss.prototype.getSegmentData=ss.prototype.cd,ss.prototype.setSegmentData=ss.prototype.Zi,ss.prototype.syncAgainst=ss.prototype.Vf,ss.prototype.offset=ss.prototype.offset,ss.prototype.getThumbnailSprite=ss.prototype.bi,ss.prototype.setThumbnailSprite=ss.prototype.fh,ss.prototype.hasByterangeOptimization=ss.prototype.ji,ss.prototype.markAsByterangeOptimization=ss.prototype.Ig,ss.prototype.isLastPartial=ss.prototype.oi,ss.prototype.markAsLastPartial=ss.prototype.Jg,ss.prototype.isPartial=ss.prototype.pi,ss.prototype.markAsPartial=ss.prototype.Kg,ss.prototype.isIndependent=ss.prototype.ni,ss.prototype.markAsNonIndependent=ss.prototype.Xd,ss.prototype.isPreload=ss.prototype.ri,ss.prototype.markAsPreload=ss.prototype.wf,ss.prototype.markAsUnavailable=ss.prototype.xi,ss.prototype.getStatus=ss.prototype.Yb,ss.prototype.getTileDuration=ss.prototype.ci,ss.prototype.getTilesLayout=ss.prototype.di,ss.prototype.getEndByte=ss.prototype.Ub,ss.prototype.getStartByte=ss.prototype.Xb,ss.prototype.getEndTime=ss.prototype.Mh,ss.prototype.getStartTime=ss.prototype.getStartTime,ss.prototype.getUris=ss.prototype.M;var ls=0,us=1;function cs(e){return 1==e.length&&1e-4>e.end(0)-e.start(0)}function ps(e){return!e||cs(e)?null:e.length?e.end(e.length-1):null}function ds(e,t){return!(!e||!e.length||cs(e)||t>e.end(e.length-1))&&t>=e.start(0)}function hs(e,t){if(!e||!e.length||cs(e))return 0;for(var n=0,o=(e=p(fs(e))).next();!o.done;o=e.next()){var i=o.value;o=i.start,(i=i.end)>t&&(n+=i-Math.max(o,t))}return n}function fs(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function ms(){}function gs(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function ys(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function vs(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function bs(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var o=rn(ve(e.data,1,n)),i=e.data[2+n],r=e.data.subarray(3+n).indexOf(0);if(-1===r)return null;var s,a=rn(ve(e.data,3+n,r));return s="--\x3e"===o?rn(ve(e.data,4+n+r)):ye(e.data.subarray(4+n+r)),t.mimeType=o,t.pictureType=i,t.description=a,t.data=s,t}return"TXXX"===e.type||"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(o=e.data.subarray(1).indexOf(0))?null:(n=rn(ve(e.data,1,o)),e=rn(ve(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(n=e.data.indexOf(0))?null:(n=rn(ve(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=ye(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=rn(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=rn(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=ye(e.data),t):null}function xs(e){for(var t=0,n=[];gs(e,t);){var o=vs(e,t+6);for(e[t+5]>>6&1&&(t+=10),o=(t+=10)+o;t+10<o;){var i=e.subarray(t),r=vs(i,4);(r=bs(i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:r,data:i.subarray(10,10+r)}))&&n.push(r),t+=i.size+10}ys(e,t)&&(t+=10)}return n}function ws(e,t){for(var n=t=void 0===t?0:t,o=0;gs(e,t);)e[t+5]>>6&1&&(o+=10),o+=10,o+=vs(e,t+6),ys(e,t+10)&&(o+=10),t+=o;return 0<o?e.subarray(n,n+o):new Uint8Array([])}function Ss(e,t){var n=null,o=null,i=null,r=e.P();return 1&t&&(i=e.Nc()),2&t&&e.skip(4),8&t&&(n=e.P()),16&t&&(o=e.P()),{trackId:r,Yc:n,Id:o,ck:i}}function Ts(e,t){return 1==t?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function ks(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function Cs(e,t,n){var o=e.P(),i=[],r=null;1&n&&(r=e.P()),4&n&&e.skip(4);for(var s=0;s<o;s++){var a={Jf:null,sampleSize:null,ne:null};256&n&&(a.Jf=e.P()),512&n&&(a.sampleSize=e.P()),1024&n&&e.skip(4),2048&n&&(a.ne=0==t?e.P():e.Sg()),i.push(a)}return{gk:o,Wg:i,Fh:r}}function As(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),{channelCount:t,sampleRate:e=e.la()+e.la()/65536}}function Es(e){return{codec:$i(e=e.P())}}function Is(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Ms(e){return(10>e?"0":"")+e}function Rs(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,o=0;o<e.byteLength;o++)2<=o&&3==e[o]&&0==e[o-1]&&0==e[o-2]||(t[n]=e[o],n++);this.j=ve(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function _s(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),o=Math.min(4,e.i);0!==o&&(n.set(e.j.subarray(t,t+o)),e.h=new Li(n,0).P(),e.g=8*o,e.i-=o)}function Ls(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,_s(e)}e.h<<=t,e.g-=t}function Ds(e,t){var n=Math.min(e.g,t),o=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&_s(e),0<(n=t-n)?o<<n|Ds(e,n):o}function Ps(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return _s(e),t+Ps(e)}function Os(e){Ls(e,1+Ps(e))}function Ns(e){return Ds(e,Ps(e)+1)-1}function Us(e){return 1&(e=Ns(e))?1+e>>>1:-1*(e>>>1)}function Bs(e){return 1===Ds(e,1)}function js(e){return Ds(e,8)}function Fs(e,t){for(var n=8,o=8,i=0;i<t;i++)0!==o&&(o=(n+(o=Us(e))+256)%256),n=0===o?n:o}function zs(e){return js(e),Ns(e),Ns(e)}function $s(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}function Gs(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var o=t[7];if(192&o){var i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.s&&(e.s=i),n.pts=Vs(i,e.s),e.s=n.pts,n.dts=n.pts,64&o&&(o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.o&&(e.o=o),n.dts=Vs(o,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function Vs(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Hs(e){return!(0>qs(e))}function qs(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}ss.Status={hj:ls,Zj:us,Bj:2},$("shaka.util.Id3Utils",ms),ms.getID3Data=ws,ms.getID3Frames=xs,$("shaka.util.ExpGolomb",Rs),(i=$s.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},i.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,qs(e)),n=e.length-(e.length+t)%188,o=!1,i=t;i<n;i+=188)if(71==e[i]){var r=!!(64&e[i+1]),s=((31&e[i+1])<<8)+e[i+2];if(1<(48&e[i+3])>>4){var a=i+5+e[i+4];if(a==i+188)continue}else a=i+4;switch(s){case 0:r&&(a+=e[a]+1),this.G=(31&e[a+10])<<8|e[a+11];break;case 17:case 8191:break;case this.G:r&&(a+=e[a]+1),s={audio:-1,video:-1,Rd:-1,audioCodec:"",videoCodec:""};var l=a+3+((15&(r=e)[a+1])<<8|r[a+2])-4;for(a+=12+((15&r[a+10])<<8|r[a+11]);a<l;){var u=(31&r[a+1])<<8|r[a+2],c=(15&r[a+3])<<8|r[a+4];switch(r[a]){case 6:if(0<c)for(var p=a+5,d=c;2<d;){var h=r[p+1]+2;switch(r[p]){case 5:var f=cn(r.subarray(p+2,p+h));-1==s.audio&&"Opus"===f?(s.audio=u,s.audioCodec="opus"):-1==s.video&&"AV01"===f&&(s.video=u,s.videoCodec="av1");break;case 106:-1==s.audio&&(s.audio=u,s.audioCodec="ac3");break;case 122:-1==s.audio&&(s.audio=u,s.audioCodec="ec3");break;case 124:-1==s.audio&&(s.audio=u,s.audioCodec="aac");break;case 127:"opus"==s.audioCodec&&(f=null,128===r[p+2]&&(f=r[p+3]),null!=f&&(this.F={channelCount:15&f?15&f:2,Ch:f,sampleRate:48e3}))}p+=h,d-=h}break;case 15:-1==s.audio&&(s.audio=u,s.audioCodec="aac");break;case 17:-1==s.audio&&(s.audio=u,s.audioCodec="aac-loas");break;case 21:-1==s.Rd&&(s.Rd=u);break;case 27:-1==s.video&&(s.video=u,s.videoCodec="avc");break;case 3:case 4:-1==s.audio&&(s.audio=u,s.audioCodec="mp3");break;case 36:-1==s.video&&(s.video=u,s.videoCodec="hvc");break;case 129:-1==s.audio&&(s.audio=u,s.audioCodec="ac3");break;case 132:case 135:-1==s.audio&&(s.audio=u,s.audioCodec="ec3")}a+=c+5}-1!=(r=s).video&&(this.I=r.video,this.m=r.videoCodec),-1!=r.audio&&(this.B=r.audio,this.A=r.audioCodec),-1!=r.Rd&&(this.C=r.Rd),o&&!this.H&&(o=!1,i=t-188),this.H=!0;break;case this.I:a=e.subarray(a,i+188),r?this.j.push([a]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(a);break;case this.B:a=e.subarray(a,i+188),r?this.i.push([a]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(a);break;case this.C:a=e.subarray(a,i+188),r?this.l.push([a]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(a);break;default:o=!0}}return this},i.Ci=function(e){return le("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Cf(e)},i.Cf=function(e,t,n){var o=e.pts?e.pts/9e4:null,i=(e=e.data).byteLength,r=1;"hvc"==this.m&&(r=2);for(var s,a=n||0,l=[],u=-1,c=0,p=0;p<i;++p){var d=e[p];if(d){if(2<=a&&1==d){if(t&&!l.length&&-1==u&&(d=p-(3<a?3:a),n&&0!=d&&(d=e.subarray(0,d),t.data=bn(t.data,d),t.fullData=bn(t.fullData,d))),0<=u?(a=p-((3<a?3:a)+1),l.push({data:e.subarray(u+r,a+1),fullData:e.subarray(u,a+1),type:c,time:o})):t&&!l.length&&0<(u=p-a)&&(u=e.subarray(0,u),t.data=bn(t.data,u),t.fullData=bn(t.fullData,u)),p>=i-r)return l;u=++p,c="hvc"==this.m?e[p]>>1&63:31&e[p]}a=0}else a++;p>=i-1&&0<=u&&0<=a&&(s={data:e.subarray(u+r,i),fullData:e.subarray(u,i),type:c,time:o})}return s&&l.push(s),!l.length&&t&&(t.data=bn(t.data,e),t.fullData=bn(t.fullData,e)),l},i.getMetadata=function(){for(var e=[],t=p(this.l),n=t.next();!n.done;n=t.next())(n=Gs(this,n=bn.apply(hn,d(n.value))))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:xs(n.data),dts:n.dts,pts:n.pts});return e},i.Tb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=p(this.i),n=t.next();!n.done;n=t.next()){var o=bn.apply(hn,d(n.value)),i=Gs(this,o);n=this.h.length?this.h[this.h.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!n||n.pts!=i.pts&&n.dts!=i.dts)?(this.h.length&&i.dts<(n.dts||0)&&(e=!0),this.h.push(i)):this.h.length&&(o=i?i.data:o)&&((n=this.h.pop()).data=bn(n.data,o),this.h.push(n))}e&&(this.h=this.h.sort(function(e,t){var n=(e.pts||0)-(t.pts||0);return(e.dts||0)-(t.dts||0)||n}))}return this.h},i.Fc=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=!1,n=p(this.j),o=n.next();!o.done;o=n.next()){var i=bn.apply(hn,d(o.value)),r=Gs(this,i);o=this.g.length?this.g[this.g.length-1]:null,r&&null!=r.pts&&null!=r.dts&&(!o||o.pts!=r.pts&&o.dts!=r.dts)?(this.g.length&&r.dts<(o.dts||0)&&(t=!0),this.g.push(r)):this.g.length&&(i=r?r.data:i)&&((o=this.g.pop()).data=bn(o.data,i),this.g.push(o))}if(e){for(n=[],i=(o=p(this.g)).next();!i.done;i=o.next())if((i=i.value).nalus=this.Cf(i,s,void 0),i.nalus.length){n.push(i);var s=i.nalus[i.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(e,t){var n=(e.pts||0)-(t.pts||0);return(e.dts||0)-(t.dts||0)||n}))}return e?this.g:(e=this.g,this.g=[],e)},i.getStartTime=function(e){if("audio"==e){e=null;var t=this.Tb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,(t=this.Fc(!1)).length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},i.$c=function(){return{audio:this.A,video:this.m}},i.Pd=function(){for(var e=[],t=p(this.Fc()),n=t.next();!n.done;n=t.next())e.push.apply(e,d(n.value.nalus));return e},i.gi=function(){le("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},i.kf=function(){return"hvc"==this.m?function(e){var t={height:null,width:null,codec:null};if(!(e=e.Pd()).length)return t;if(!(e=e.find(function(e){return 33==e.type})))return t;var n=new Rs(e.fullData,!0);js(n),js(n),Ds(n,4);var o=Ds(n,3);Bs(n);var i=Ds(n,2),r=Ds(n,1),s=Ds(n,5),a=Ds(n,32);e=js(n);for(var l=js(n),u=js(n),c=js(n),p=js(n),d=js(n),h=js(n),f=[],m=[],g=0;g<o;g++)f.push(Bs(n)),m.push(Bs(n));if(0<o)for(g=o;8>g;g++)Ds(n,2);for(g=0;g<o;g++)f[g]&&Ds(n,88),m[g]&&js(n);Ns(n),3==(o=Ns(n))&&Ds(n,1),f=Ns(n),m=Ns(n);var y=g=0,v=0,b=0;return Bs(n)&&(g+=Ns(n),y+=Ns(n),v+=Ns(n),b+=Ns(n)),t.width=String(f-(g+y)*(1===o||2===o?2:1)),t.height=String(m-(v+b)*(1===o?2:1)),n=function(e){for(var t=0,n=0;32>n;n++)t|=(e>>n&1)<<31-n;return t>>>0}(a),r=1==r?"H":"L",i="hvc1."+["","A","B","C"][i]+s,i+="."+n.toString(16).toUpperCase(),i+="."+r+h,d&&(i+="."+d.toString(16).toUpperCase()),p&&(i+="."+p.toString(16).toUpperCase()),c&&(i+="."+c.toString(16).toUpperCase()),u&&(i+="."+u.toString(16).toUpperCase()),l&&(i+="."+l.toString(16).toUpperCase()),e&&(i+="."+e.toString(16).toUpperCase()),t.codec=i,t}(this):function(e){var t={height:null,width:null,codec:null};if(!(e=e.Pd()).length)return t;if(!(e=e.find(function(e){return 7==e.type})))return t;var n=js(e=new Rs(e.data)),o=js(e),i=js(e);if(Os(e),Xs.includes(n)){var r=Ns(e);if(3===r&&Ls(e,1),Os(e),Os(e),Ls(e,1),Bs(e)){r=3!==r?8:12;for(var s=0;s<r;s++)Bs(e)&&Fs(e,6>s?16:64)}}if(Os(e),0===(r=Ns(e)))Ns(e);else if(1===r)for(Ls(e,1),Os(e),Os(e),r=Ns(e),s=0;s<r;s++)Os(e);Os(e),Ls(e,1),r=Ns(e),s=Ns(e);var a=Ds(e,1);0===a&&Ls(e,1),Ls(e,1);var l=0,u=0,c=0,p=0;return Bs(e)&&(l=Ns(e),u=Ns(e),c=Ns(e),p=Ns(e)),t.height=String((2-a)*(s+1)*16-2*c-2*p),t.width=String(16*(r+1)-2*l-2*u),t.codec="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2),t}(this)},$("shaka.util.TsParser",$s),$s.syncOffset=qs,$s.probe=Hs,$s.prototype.getVideoInfo=$s.prototype.kf,$s.prototype.getVideoResolution=$s.prototype.gi,$s.prototype.getVideoNalus=$s.prototype.Pd,$s.prototype.getCodecs=$s.prototype.$c,$s.prototype.getStartTime=$s.prototype.getStartTime,$s.prototype.getVideoData=$s.prototype.Fc,$s.prototype.getAudioData=$s.prototype.Tb,$s.prototype.getMetadata=$s.prototype.getMetadata,$s.prototype.parseNalus=$s.prototype.Cf,$s.prototype.parseAvcNalus=$s.prototype.Ci,$s.prototype.parse=$s.prototype.parse,$s.prototype.clearData=$s.prototype.clearData,$s.Timescale=9e4;var Xs=[100,110,122,244,44,83,86,118,128,138,139,134];function Ws(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if("undefined"==typeof libDPIModule&&Y("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){Y("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,le("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?(Y("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Y(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Ks(e){e.g&&e.i.classList.add("shaka-hidden")}function Ys(e,t,n){var o=0,i=-1;switch(t.mimeType){case"video/webm":o=1;break;case"video/mp4":o=2}switch(n){case"DASH":i=1;break;case"HLS":i=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(o),e.j||e.g.setStreamingFormat(i))}function Qs(e,t,n,o){var i=this;this.i=e,this.da=n,this.A=null,this.F=t,this.h={},this.G={},this.Da={},this.g=null,this.fa=!1,this.Z=o||null,this.l={},this.s=new te,this.j={},this.H=null,this.L=new oi,this.N="",this.qa=!1,this.m=Js(this,this.L),this.C=!1,this.I=new Ei(function(){return function(e){var t,n,o,i,r,s,a;return P(function(l){if(1==l.g){for(n in t=[],e.l)for(o=e.l[n],i=o[0],e.l[n]=o.slice(0,1),i&&t.push(i.p.catch(Yn)),r=p(o.slice(1)),s=r.next();!s.done;s=r.next())s.value.p.reject(new St(2,7,7003,void 0));for(a in e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy()),e.j)t.push(e.j[a].destroy());return S(l,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.F=null,e.h={},e.j={},e.H=null,e.l={},e.Z=null,e.K=null,e.da=null,T(l)})}(i)}),this.B=!1,this.ba="UNKNOWN",this.Ea=this.Fa=!1,this.za=new oi,this.o=!1,this.xa=!0,this.pa=this.R=this.ya=this.U=this.K=this.ea=null,this.oa=new oi}function Js(t,n){if(e.ManagedMediaSource){t.i.disableRemotePlayback=!0;var o=new ManagedMediaSource;return t.s.D(o,"startstreaming",function(){t.xa=!0}),t.s.D(o,"endstreaming",function(){t.xa=!1}),t.s.ha(o,"sourceopen",function(){URL.revokeObjectURL(t.N),n.resolve()}),t.s.ha(t.i,"playing",function(){t.qa=!0}),t.N=ya(o),t.i.src=t.N,o}return o=new MediaSource,t.s.ha(o,"sourceopen",function(){URL.revokeObjectURL(t.N),n.resolve()}),t.s.ha(t.i,"playing",function(){t.qa=!0}),t.N=ya(o),t.i.src=t.N,o}function Zs(e,t,n,o){var i,r,s,a,l,u,c,d,h,f,m,g;return P(function(y){switch(y.g){case 1:return i=En,r=G,s=V,S(y,function(e,t){var n,o,i,r,s,a,l,u,c,d;return P(function(h){if(1==h.g)return e.createSegmentIndex?S(h,e.createSegmentIndex(),2):h.u(2);if(!e.segmentIndex)return h.return(!1);if(0==e.segmentIndex.getNumReferences())return h.return(!0);for(n=En,o=new Set,i=p(e.segmentIndex),r=i.next();!r.done;r=i.next())if(s=r.value,a=s.mimeType||e.mimeType||"",l=s.codecs||e.codecs||"",u=a+":"+l,!o.has(u))if(o.add(u),t==n.ua){if(!Hn(_n(a,l)))return h.return(!1)}else if(t==n.ga?l=To(l):t==n.X&&(l=So(l,a)),c=Pn(e,a,l),d=Ln(a,l),!ie(c)&&!Ze(d))return h.return(!1);return h.return(!0)})}(n,t),2);case 2:if(s.call(r,y.h,"Type negotiation should happen before MediaSourceEngine.init!"),a=_n(n.mimeType,o),t==i.ua){ea(e,a,e.B,n.external),y.u(0);break}if(l=e.A.forceTransmux,(!ie(a)||!e.B&&Gn.includes(a))&&(l=!0),u=Ln(n.mimeType,o),!l){y.u(4);break}if(c=kn(i.X,(o||"").split(",")),d=kn(i.ga,(o||"").split(",")),!c||!d){y.u(5);break}return e.o=!0,S(y,Zs(e,i.X,n,c),6);case 6:return S(y,Zs(e,i.ga,n,d),7);case 7:return y.return();case 5:(h=Ze(u))&&(f=h(),e.j[t]=f,a=f.convertCodecs(t,u));case 4:m=a+e.A.addExtraFeaturesToSourceBuffer(a),Ii(e.I);try{g=e.m.addSourceBuffer(m)}catch(Wr){throw new St(2,3,3015,Wr,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(g.mode=va),e.s.D(g,"error",function(){var n=e.l[t][0];n.p.reject(new St(2,3,3014,e.i.error?e.i.error.code:0,n.uri))}),e.s.D(g,"updateend",function(){return pa(e,t)}),e.h[t]=g,e.G[t]=a,e.Da[t]=!!n.drmInfos.length,T(y)}})}function ea(e,t,n,o){e.g||(e.g=new Vn(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var i=e.g;o=o||e.fa,e=e.ba,"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=(0,Wn[t])(),i.i.setSequenceMode?i.i.setSequenceMode(n):le("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):le("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),i.B=o)}function ta(e){return!(e.C||e.m&&"ended"!=e.m.readyState)}function na(e,t){return e=e.C||!Object.keys(e.h).length?null:t==An?e.g.g:!(e=ia(e,t))||cs(e)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function oa(e,t){return e.C?null:t==An?e.g.h:ps(ia(e,t))}function ia(e,t){try{return e.h[t].buffered}catch(n){return null}}function ra(e,t,n,o,i,r,s,a,l,u){var c,d,h,f,m,g,y,v,b,x,w,k,C;return s=void 0!==s&&s,a=void 0!==a&&a,l=void 0!==l&&l,u=void 0!==u&&u,P(function(A){switch(A.g){case 1:if(t!=(c=En).ua){A.u(2);break}if(!e.B){A.u(3);break}return S(A,e.za,4);case 4:d=A.h,e.g.s=d;case 3:return S(A,function(e,t,n,o,i){var r,s,a,l,u,c,d;return P(function(h){if(1==h.g)return S(h,Promise.resolve(),2);if(!e.i||!e.j)return h.return();if(null==n||null==o)return e.i.parseInit(ve(t)),h.return();for(r=e.B?n:e.s,s={periodStart:e.s,segmentStart:n,segmentEnd:o,vttOffset:r},a=e.i.parseMedia(ve(t),s,i),l=p(a),u=l.next();!u.done;u=l.next())c=u.value,e.A(c,i||null,s);d=a.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(d),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(o,e.m),T(h)})}(e.g,n,o?o.startTime:null,o?o.endTime:null,o?o.M()[0]:null),5);case 5:return A.return();case 2:if(u||!e.o){A.u(6);break}return S(A,ra(e,c.X,n,o,i,r,s,a,l,!0),7);case 7:return S(A,ra(e,c.ga,n,o,i,r,s,a,l,!0),8);case 8:return A.return();case 6:if(!e.h[t])return A.return();if(h=e.h[t].timestampOffset,f=e.G[t],e.j[t]&&(f=e.j[t].getOriginalMimeType()),o&&(m=function(e,t,n,o,i,r){var s=null,a=ve(n);if(Gn.includes(i))(r=xs(a)).length&&o&&((t=r.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&t.data&&(s=Math.round(t.data)/1e3),e.da.onMetadata([{cueTime:o.startTime,data:a,frames:r,dts:o.startTime,pts:o.startTime}],0,o.endTime));else if(i.includes("/mp4")&&o&&0==o.timestampOffset&&o.$&&o.$.timescale){var l=o.$.timescale;if(!isNaN(l)){var u=0,c=!1;(new Oi).box("moof",Ni).box("traf",Ni).S("tfdt",function(e){u=Ts(e.reader,e.version).baseMediaDecodeTime/l,c=!0,e.parser.stop()}).parse(n,!0),c&&(s=u)}}else!i.includes("/mp4")&&!i.includes("/webm")&&Hs(a)&&(e.K?e.K.clearData():e.K=new $s,null!=(t=(a=e.K.parse(a)).getStartTime(t))&&(s=t),(a=a.getMetadata()).length)&&e.da.onMetadata(a,r,o?o.endTime:null);return s}(e,t,n,o,f,h),null!=m&&(null==e.U&&t==c.ga&&(e.U=m,e.ya=o.startTime,null!=e.R&&(g=0,e.ya==e.pa&&(g=e.U-e.R),e.oa.resolve(g))),null==e.R&&t==c.X&&(e.R=m,e.pa=o.startTime,null!=e.U&&(y=0,e.ya==e.pa&&(y=e.U-e.R),e.oa.resolve(y))),v=o.startTime-m,(.001<=Math.abs(h-v)||s||a)&&(!l||0<v||!h)&&(h=v,e.Ea&&(da(e,t,function(){return ua(e,t)},null),da(e,t,function(){return ca(e,t,h)},null))),b=t==c.ga||!(c.ga in e.h),e.B&&b&&e.za.resolve(h))),r&&t==c.ga&&(e.g||ea(e,"application/cea-608",e.B,!1),e.H||(x=f.split(";",1)[0],e.H=new Te(x)),o?(w=e.H.i(n)).length&&function(e,t,n,o,i){for(var r=n+" "+o,s=new Map,a=(t=p(t)).next();!a.done;a=t.next()){var l=a.value;a=l.stream,l=l.cue,s.has(a)||s.set(a,new Map),s.get(a).has(r)||s.get(a).set(r,[]),Xn(e,l,i),l.startTime>=e.l&&l.startTime<e.m&&(s.get(a).get(r).push(l),a==e.C&&e.j.append([l]))}for(r=(i=p(s.keys())).next();!r.done;r=i.next())for(r=r.value,e.o.has(r)||e.o.set(r,new Map),a=(t=p(s.get(r).keys())).next();!a.done;a=t.next())a=a.value,l=s.get(r).get(a),e.o.get(r).set(a,l);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(o,e.m))}(e.g,w,o.startTime,o.endTime,h):e.H.init(n,a)),!e.j[t]){A.u(9);break}return S(A,e.j[t].transmux(n,i,o,e.m.duration,t),10);case 10:n=A.h;case 9:if(n=function(e,t,n,o,i){var r=null==n,s=e.Da[o];return n=e.da.Qh(),(r=e.A.insertFakeEncryptionInInit&&r&&s)&&(n=At(n),r=Ot()||Pt()||qt()||Dt()&&Wt()&&n),r&&"mp4"==On(e.G[o])&&(t=function(e,t){function n(){s=!0}function o(e){a.push(e),Ni(e)}var i,r=e=ve(e),s=!1,a=[],l=[];if((new Oi).box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).S("stsd",function(e){i=e,a.push(e),Ui(e)}).S("encv",n).S("enca",n).S("dvav",function(e){l.push({box:e,Oa:1701733238})}).S("dva1",function(e){l.push({box:e,Oa:1701733238})}).S("dvh1",function(e){l.push({box:e,Oa:1701733238})}).S("dvhe",function(e){l.push({box:e,Oa:1701733238})}).S("dvc1",function(e){l.push({box:e,Oa:1701733238})}).S("dvi1",function(e){l.push({box:e,Oa:1701733238})}).S("hev1",function(e){l.push({box:e,Oa:1701733238})}).S("hvc1",function(e){l.push({box:e,Oa:1701733238})}).S("avc1",function(e){l.push({box:e,Oa:1701733238})}).S("avc3",function(e){l.push({box:e,Oa:1701733238})}).S("ac-3",function(e){l.push({box:e,Oa:1701733217})}).S("ec-3",function(e){l.push({box:e,Oa:1701733217})}).S("ac-4",function(e){l.push({box:e,Oa:1701733217})}).S("mp4a",function(e){l.push({box:e,Oa:1701733217})}).parse(e),s)return e;if(0==l.length||!i)throw vn(e),new St(2,3,3019,t);l.reverse();for(var u=(t=p(l)).next();!u.done;u=t.next())u=u.value,r=ts(r,i,u.box,a,u.Oa);return Dt()&&Wt()?((t=new Uint8Array(e.byteLength+r.byteLength)).set(r),t.set(e,r.byteLength),t):r}(t,i)),t}(e,n,o?o.startTime:null,t,o?o.M()[0]:null),!o||!e.B||t==c.ua){A.u(11);break}if(!s&&!a){A.u(11);break}if(k=o.startTime,"HLS"!=e.ba||e.o||t!=c.X||!e.h[c.ga]){A.u(13);break}return S(A,e.oa,14);case 14:C=A.h,.1<Math.abs(C)&&(k-=C);case 13:da(e,t,function(){return ua(e,t)},null),da(e,t,function(){return ca(e,t,k)},null);case 11:return S(A,da(e,t,function(){var o=n;if("video"==t&&e.Z){var i=e.Z;i.g&&i.g.appendBuffer(o,"video",i.o,-h)}e.h[t].appendBuffer(o)},o?o.M()[0]:null),15);case 15:T(A)}})}function sa(e,t){var n;return P(function(o){return 1==o.g?t==(n=En).ua?e.g?S(o,e.g.remove(0,1/0),0):o.return():S(o,da(e,t,function(){return la(e,t,0,e.m.duration)},null),4):e.o?S(o,da(e,n.X,function(){return la(e,n.X,0,e.m.duration)},null),0):o.u(0)})}function aa(e,t,n,o,i,r,s,a,l){var u,c;return P(function(p){return 1==p.g?t==(u=En).ua?(r||(e.g.s=n),function(e,t,n){e.l=t,e.m=n}(e.g,o,i),p.return()):(c=[],S(p,function(e,t,n,o,i){var r,s,a,l,u,c,p,d,h,f,m,g,y,v,b;return P(function(x){return 1==x.g?t==(r=En).ua?x.return(!1):(s=Nn(jn(e.G[t])),a=Bn(e.G[t]),u=!1,c=_n(n,o),p=e.A.forceTransmux,(!ie(c)||!e.B&&Gn.includes(c))&&(p=!0),p&&(d=Ln(n,o),h=Ze(d))&&(l=h(),f=kn(r.X,(o||"").split(",")),m=kn(r.ga,(o||"").split(",")),f&&m?(u=!0,g=m,t==r.X&&(g=f),c=l.convertCodecs(t,Ln(n,g))):c=l.convertCodecs(t,d)),y=Nn(jn(c)),v=Bn(c),s===y&&a===v?(e.j[t]&&!l?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&l?e.j[t]=l:l&&(e.j[t]&&e.j[t].transmux!=l.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=l):l.destroy()),x.return(!1)):(b=!0,(e.o||u&&l&&!e.j[t])&&(b=!1),b&&"smooth"===e.A.codecSwitchingStrategy&&re()?S(x,function(e,t,n,o){return da(e,t,function(){t!==An&&(re()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),o&&(e.j[t]=o),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),pa(e,t))},null)}(e,t,c,l),3):(l&&l.destroy(),S(x,ga(e,i),3)))):x.return(!0)})}(e,t,s,a,l),2)):(p.h||(c.push(da(e,t,function(){return ua(e,t)},null)),e.o&&c.push(da(e,u.X,function(){return ua(e,u.X)},null))),r||(c.push(da(e,t,function(){return ca(e,t,n)},null)),e.o&&c.push(da(e,u.X,function(){return ca(e,u.X,n)},null))),c.push(da(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=i,e.h[t].appendWindowStart=o,pa(e,t)},null)),e.o&&c.push(da(e,u.X,function(){var t=u.X;e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=i,e.h[t].appendWindowStart=o,pa(e,t)},null)),S(p,Promise.all(c),0))})}function la(e,t,n,o){o<=n?pa(e,t):e.h[t].remove(n,o)}function ua(e,t){var n=e.h[t].appendWindowStart,o=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=o,pa(e,t)}function ca(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,pa(e,t)}function pa(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),fa(e,t))}}function da(e,t,n,o){return Ii(e.I),n={start:n,p:new oi,uri:o},e.l[t].push(n),1==e.l[t].length&&ma(e,t),n.p}function ha(e,t){var n,o,i,r,s;return P(function(a){switch(a.g){case 1:for(i in Ii(e.I),n=[],o={},e.h)(o={ready:void 0}).ready=new oi,r={start:function(e){return function(){return e.ready.resolve()}}(o),p:o.ready,uri:null},e.l[i].push(r),n.push(o.ready),1==e.l[i].length&&r.start();return k(a,2),S(a,Promise.all(n),4);case 4:A(a,3);break;case 2:throw E(a);case 3:return k(a,5,6),S(a,t(),6);case 6:for(s in I(a),e.h)fa(e,s);M(a,0);break;case 5:throw new St(2,3,3015,E(a),e.i.error||"No error in the media element",null)}})}function fa(e,t){e.l[t].shift(),ma(e,t)}function ma(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(o){"QuotaExceededError"==o.name?n.p.reject(new St(2,3,3017,t)):n.p.reject(new St(2,3,3015,o,e.i.error||"No error in the media element",n.uri)),fa(e,t)}}function ga(e,t){return ha(e,function(){return function(e,t){var n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,T,k,A,E;return P(function(R){switch(R.g){case 1:for(a in n=En,e.C=!0,e.o=!1,o=e.i.currentTime,i=e.i.autoplay,r=e.i.paused,e.qa&&(e.i.autoplay=!1),C(R,2),e.s.Ra(),s=[],e.j)s.push(e.j[a].destroy());for(l in e.l)for(u=e.l[l],c=u[0],e.l[l]=u.slice(0,1),c&&s.push(c.p.catch(Yn)),d=p(u.slice(1)),h=d.next();!h.done;h=d.next())h.value.p.reject(new St(2,7,7003,void 0));for(f in e.h){m=e.h[f];try{e.m.removeSourceBuffer(m)}catch(_){}}return S(R,Promise.all(s),4);case 4:return e.j={},e.h={},g=e.m.duration,e.L=new oi,e.m=Js(e,e.L),S(R,e.L,5);case 5:!isNaN(g)&&g?e.m.duration=g:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),y=new oi,v=e.m.sourceBuffers,b=t.size,x=0,w=function(){++x===b&&(y.resolve(),e.s.jb(v,"addsourcebuffer",w))},e.s.D(v,"addsourcebuffer",w),T=p(t.keys()),k=T.next();case 6:return k.done?(e.i.currentTime=o,S(R,y,2)):(A=k.value,E=t.get(A),S(R,Zs(e,A,E,E.codecs),9));case 9:e.o?(e.l[n.X]=[],e.l[n.ga]=[]):e.l[A]=[],k=T.next(),R.u(6);break;case 2:I(R),e.C=!1,Ii(e.I),e.s.ha(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=i,r||e.i.play())}),M(R,0)}})}(e,t)})}Ws.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},$("shaka.lcevc.Dec",Ws),Ws.prototype.release=Ws.prototype.release,(i=Qs.prototype).destroy=function(){return this.I.destroy()},i.init=function(e,t,n,o){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,o=void 0!==o&&o;var i,r,s,a,l,u=this;return P(function(c){switch(c.g){case 1:return i=En,S(c,u.L,2);case 2:u.B=t,u.ba=n,u.Fa=o,u.Ea=!u.B&&"HLS"==u.ba&&!u.Fa,u.K=null,r=p(e.keys()),s=r.next();case 3:if(s.done){c.u(0);break}return a=s.value,l=e.get(a),S(c,Zs(u,a,l,l.codecs),6);case 6:u.o?(u.l[i.X]=[],u.l[i.ga]=[]):u.l[a]=[],s=r.next(),c.u(3)}})},i.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)},i.wb=function(){var e={total:this.C?[]:fs(this.i.buffered),audio:this.C?[]:fs(ia(this,"audio")),video:this.C?[]:fs(ia(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var o,i=this;return P(function(r){return 1==r.g?e==(o=En).ua?S(r,i.g.remove(t,n),0):S(r,da(i,e,function(){return la(i,e,t,n)},null),4):i.o?S(r,da(i,o.X,function(){return la(i,o.X,t,n)},null),0):r.u(0)})},i.flush=function(e){var t,n=this;return P(function(o){return 1==o.g?e==(t=En).ua?o.return():S(o,da(n,e,function(){n.i.currentTime-=.001,pa(n,e)},null),2):n.o?S(o,da(n,t.X,function(){var e=t.X;n.i.currentTime-=.001,pa(n,e)},null),0):o.u(0)})},i.endOfStream=function(e){var t=this;return P(function(n){return S(n,ha(t,function(){ta(t)||"closed"===t.m.readyState||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},i.Za=function(e){var t=this;return P(function(n){return S(n,ha(t,function(){if(e<t.m.duration)for(var n in t.h){var o={start:function(){},p:new oi,uri:null};t.l[n].unshift(o)}t.m.duration=e,t.ea=e}),0)})},i.getDuration=function(){return this.m.duration};var ya=e.URL.createObjectURL,va="sequence";function ba(e,t,n){this.i=e,this.A=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.G=!0,this.H=0,this.C=void 0===n||n,this.F=0,this.s=!1,this.m=e}function xa(e,t,n){this.j=n,this.l=e,this.s=Sa(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}function wa(e){this.g=e}function Sa(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=p(fs(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Ta(e,t,n,o,i){var r=this;this.A=i,this.g=e,this.B=t,this.s=n,this.l=new te,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=o,this.o=!1,this.l.D(e,"waiting",function(){return ka(r)}),this.m=new Rt(function(){ka(r)}).Sa(this.s.gapJumpTimerTime)}function ka(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){var t;if(e.g.readyState!=e.F&&(e.F=e.g.readyState),!(t=!e.h)){var n=(t=e.h).l,o=Sa(n),i=n.g.currentTime,r=Date.now()/1e3;t.g==i&&t.s==o||(t.m=r,t.g=i,t.s=o,t.h=!1),(o=(i=r-t.m)>=t.A&&o&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new ci("stalldetected"))),t=!o}t&&(t=e.g.currentTime,o=function(e,t,n){return e&&e.length&&!cs(e)&&0<=(e=fs(e).findIndex(function(e,o,i){return e.start>t&&(0==o||i[o-1].end-t<=n)}))?e:null}(n=e.g.buffered,t,e.s.gapDetectionThreshold),null!=o&&(0!=o||e.o))&&(i=n.start(o),(navigator.userAgent.match(/Edge\//)||Pt())&&(i=Math.ceil(100*(i+.01))/100),i>=e.B.yb()||.001>i-t||(0!=o&&n.end(o-1),e.g.currentTime=i,t==e.i&&(e.i=i),e.C++,e.A(new ci("gapjumped"))))}}}function Ca(e,t,n,o){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?o():(t=Aa.value().get(t),n.ha(e,t,o))}(i=ba.prototype).getDuration=function(){return this.j},i.Sh=function(){return this.g},i.dh=function(e){this.i=e},i.Za=function(e){this.j=e},i.Xh=function(){return this.i},i.ah=function(e){this.B=e},i.sc=function(e){this.G=e},i.pe=function(e){this.o=e},i.Od=function(){return this.o},i.Of=function(e){this.A=e},i.Lh=function(){return this.A},i.Ng=function(e,t){if(0!=e.length){var n=(Date.now()+this.B)/1e3;if(0!=(e=e.filter(function(e){return e.start+t<n})).length){var o=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.g),this.h=Math.max(this.h,o),null!=this.i&&this.C&&!this.s&&(this.i=n-this.h-this.g)}}},i.sd=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,o=(Date.now()+this.B)/1e3,i=(e=p(e)).next();!i.done;i=e.next())o<(i=i.value).startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime));this.ce(t),this.h=Math.max(this.h,n),null!=this.i&&this.C&&!this.s&&(this.i=o-this.h-this.g)}},i.Th=function(){return this.h},i.Wd=function(){this.s=!0},i.si=function(){return this.s},i.bh=function(e){this.m=e},i.Ph=function(){return this.m},i.ce=function(e){this.l=null==this.l?e:Math.min(this.l,e)},i.xf=function(e){this.g=Math.max(this.g,e)},i.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},i.V=function(){return 1/0==this.j&&!this.G},i.kc=function(){return 1/0!=this.j&&!this.G},i.mb=function(){return Math.max(this.H,this.Wb()-this.o)},i.hh=function(e){this.H=e},i.Wb=function(){return this.V()||this.kc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},i.bd=function(e){var t=Math.max(this.l,this.H);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Wb()-this.o+e,this.yb()))},i.Vb=function(){return this.bd(0)},i.yb=function(){return Math.max(0,this.Wb()-(this.V()||this.kc()?this.A:0))},i.nh=function(){return!(null==this.i||null!=this.h&&this.C)},i.$g=function(e){this.F=e},i.Jh=function(){return this.F},$("shaka.media.PresentationTimeline",ba),ba.prototype.getAvailabilityTimeOffset=ba.prototype.Jh,ba.prototype.setAvailabilityTimeOffset=ba.prototype.$g,ba.prototype.usingPresentationStartTime=ba.prototype.nh,ba.prototype.getSeekRangeEnd=ba.prototype.yb,ba.prototype.getSeekRangeStart=ba.prototype.Vb,ba.prototype.getSafeSeekRangeStart=ba.prototype.bd,ba.prototype.getSegmentAvailabilityEnd=ba.prototype.Wb,ba.prototype.setUserSeekStart=ba.prototype.hh,ba.prototype.getSegmentAvailabilityStart=ba.prototype.mb,ba.prototype.isInProgress=ba.prototype.kc,ba.prototype.isLive=ba.prototype.V,ba.prototype.offset=ba.prototype.offset,ba.prototype.notifyMaxSegmentDuration=ba.prototype.xf,ba.prototype.notifyMinSegmentStartTime=ba.prototype.ce,ba.prototype.getInitialProgramDateTime=ba.prototype.Ph,ba.prototype.setInitialProgramDateTime=ba.prototype.bh,ba.prototype.isStartTimeLocked=ba.prototype.si,ba.prototype.lockStartTime=ba.prototype.Wd,ba.prototype.getMaxSegmentEndTime=ba.prototype.Th,ba.prototype.notifySegments=ba.prototype.sd,ba.prototype.notifyTimeRange=ba.prototype.Ng,ba.prototype.getDelay=ba.prototype.Lh,ba.prototype.setDelay=ba.prototype.Of,ba.prototype.getSegmentAvailabilityDuration=ba.prototype.Od,ba.prototype.setSegmentAvailabilityDuration=ba.prototype.pe,ba.prototype.setStatic=ba.prototype.sc,ba.prototype.setClockOffset=ba.prototype.ah,ba.prototype.getPresentationStartTime=ba.prototype.Xh,ba.prototype.setDuration=ba.prototype.Za,ba.prototype.setPresentationStartTime=ba.prototype.dh,ba.prototype.getMaxSegmentDuration=ba.prototype.Sh,ba.prototype.getDuration=ba.prototype.getDuration,xa.prototype.release=function(){this.j=this.l=null,this.i=function(){}},Ta.prototype.release=function(){this.l&&(this.l.release(),this.l=null),null!=this.m&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},Ta.prototype.Af=function(){this.o=!0,ka(this)};var Aa=new Tt(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Ea(e,t,n,o){var i=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return null==i.l&&(i.l=o()),i.l},this.o=!1,this.h=new te,this.i=new La(e),Ca(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Ra(i,i.j())})}function Ia(e){return e.o?e.g.currentTime:e.j()}function Ma(e,t){0<e.g.readyState?Da(e.i,t):Ca(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Ra(e,e.j())})}function Ra(e,t){.001>Math.abs(e.g.currentTime-t)?_a(e):(e.h.ha(e.g,"seeking",function(){_a(e)}),Da(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function _a(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function La(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Rt(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}function Da(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Sa(.1)}function Pa(e){this.h=e,this.j=!1,this.g=null,this.i=new te}function Oa(e,t,n,o,i,r){var s=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=i,this.s=null,this.o=function(e,t,n){if(!t.stallEnabled)return null;var o=t.stallSkip;return function(e,t){e.i=t}(t=new xa(new wa(e),t.stallThreshold,n),function(){o?e.currentTime+=o:(e.pause(),e.play())}),t}(e,n,r),this.j=new Ta(e,t.presentationTimeline,n,this.o,r),this.h=new Ea(e,function(){e:{var e=s.j;e.j=!0,e.o=!1;var t=Ia(s.h);if(e=Ua(s,t),.001<Math.abs(e-t)){if(t=!1,!Ft()||Ft()&&Kt())t=!0;else{var n=Date.now()/1e3;(!s.s||s.s<n-1)&&(s.s=n,t=!0)}if(t){Ma(s.h,e),e=void 0;break e}}s.A(),e=void 0}return e},function(e){var t=s.j;t.g.seeking&&!t.j&&(t.j=!0,t.i=e)},function(){var e=o;return null==e?e=1/0>s.g.getDuration()?s.g.Vb():s.g.yb():0>e&&(e=s.g.yb()+e),Na(s,Ba(s,e))}),this.m=new Rt(function(){if(0!=s.i.readyState&&!s.i.paused){var e=Ia(s.h),t=s.g.Vb(),n=s.g.yb();3>n-t&&(t=n-3),e<t&&(e=Ua(s,e),s.i.currentTime=e)}})}function Na(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Ua(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),o=e.l.safeSeekOffset,i=e.g.Vb(),r=e.g.yb(),s=e.g.getDuration();3>r-i&&(i=r-3);var a=e.g.bd(n),l=e.g.bd(o);return n=e.g.bd(n+o),t>=s?Na(e,t):t>r?r:t<i?ds(e.i.buffered,l)?l:n:t>=a||ds(e.i.buffered,t)?t:n}function Ba(e,t){var n=e.g.Vb();return t<n?n:t>(e=e.g.yb())?e:t}function ja(e){this.O=e,this.l=null,this.i=0,this.m=!1}function Fa(e,t,n){return new ja([e=new ss(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function za(e,t,n,o){this.i=e,this.h=t,this.g=n,this.reverse=o}function $a(){ja.call(this,[]),this.g=[]}function Ga(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Nd(),this.h=new Rt(function(){t.g.Lg(.25*t.i)})}function Va(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Nd()!=t&&e.g.Rf(t))}catch(n){}e.h.Sa(.25),0!=e.g.Nd()&&e.g.Rf(0)}function Ha(e){var t=this;this.h=e,this.g=new Set,this.i=new Rt(function(){qa(t,!1)}).Sa(.25)}function qa(e,t){for(var n=p(e.g),o=n.next();!o.done;o=n.next())o.value.j(e.h.currentTime,t)}function Xa(){this.g=null,this.h=[]}function Wa(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var o=(e=p(e.h)).next();!o.done;o=e.next())n+=(o=o.value).state==t?o.duration:0;return n}function Ka(){this.i=this.h=null,this.g=[]}function Ya(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Qa(){this.Cd=this.Hg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.U=this.Z=this.L=this.N=this.R=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new Xa,this.h=new Ka}function Ja(e,t,n,o){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=o}function Za(e,t){e.l=t;for(var n=(e=p(e.h.values())).next();!n.done;n=e.next())n.value.g=t}function el(e,t,n){if(n=void 0!==n&&n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value);)n=!0,t.preload&&null!=t.sa&&(n=!1),2==t.Yb()&&(n=!1),n&&t.$&&tl(e,t.$),n&&!e.h.has(t)&&(ll(n=new al(e.l),t,e.i),e.h.set(t,n));il(e)}}function tl(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(e){return rs(e,t)})){var n=new al(e.l);ll(n,t,e.i),e.j.set(t,n)}}function nl(e,t){for(var n=(t=p(t.keys())).next();!n.done;n=t.next())(n=n.value)&&sl(e,n)}function ol(e){nl(e,e.h),nl(e,e.j),e.g=null}function il(e){for(var t=Array.from(e.h.keys()),n=p(e.j.keys()),o=n.next(),i={};!o.done;i={nf:void 0},o=n.next())i.nf=o.value,t.some(function(e){return function(t){return rs(t.$,e.nf)}}(i))||sl(e,i.nf)}function rl(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var o=n.pop();o&&sl(e,o)}il(e)}function sl(e,t){var n=e.h;t instanceof is&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function al(e){this.g=e,this.fe=this.Uf=null}function ll(e,t,n){var o=new Uint8Array(0);e.fe=e.g(t,n,function(t){return P(function(n){if(1==n.g)return o=0<o.byteLength?bn(o,t):t,e.Uf?S(n,e.Uf(o),3):n.u(0);o=new Uint8Array(0),T(n)})})}function ul(e){hi.call(this);var t=this;this.g=new Set,this.i=e,this.h=new Rt(function(){for(var e=t.i(),n=p(t.g),o=n.next();!o.done;o=n.next())(o=o.value).endTime<e.start&&(t.g.delete(o),o=new ci("regionremove",new Map([["region",o]])),t.dispatchEvent(o))}).Sa(2)}function cl(e){hi.call(this),this.g=new Map,this.h=e}function pl(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function dl(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return"video"==e.type&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),"audio"==e.type&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function hl(e){var t=Bn(e);return{type:t.split("/")[0],mimeType:t,codecs:e=jn(e),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xd:null,colorGamut:null}}function fl(e,t){function n(e){r=e.name;var t=e.reader;t.skip(24);var n=t.la(),o=t.la();t.skip(50),h=String(n),d=String(o),e.reader.na()&&Ni(e)}function o(e){var t=As(e.reader);f=t.channelCount,m=t.sampleRate,i(e.name)}function i(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":a.push(e+".42E01E"),u=!0;break;case"hev1":case"hvc1":a.push(e+".1.6.L93.90"),u=!0;break;case"dvh1":case"dvhe":a.push(e+".05.04"),u=!0;break;case"vp09":a.push(e+".00.10.08"),u=!0;break;case"av01":a.push(e+".0.01M.08"),u=!0;break;case"mp4a":s.push("mp4a.40.2"),l=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(e),l=!0}}var r,s=[],a=[],l=!1,u=!1,c=null,d=null,h=null,f=null,m=null,g=null,y=null;if((new Oi).box("moov",Ni).box("trak",Ni).box("mdia",Ni).S("mdhd",function(e){c=ks(e.reader,e.version).language}).box("minf",Ni).box("stbl",Ni).S("stsd",Ui).box("mp4a",function(e){var t=As(e.reader);f=t.channelCount,m=t.sampleRate,e.reader.na()?Ni(e):i(e.name)}).box("esds",function(e){e=e.reader;for(var t,n,o="mp4a";e.na();){t=e.T();for(var i=e.T();128&i;)i=e.T();if(3==t)e.la(),128&(i=e.T())&&e.la(),64&i&&e.skip(e.T()),32&i&&e.la();else if(4==t)n=e.T(),e.skip(12);else if(5==t)break}n&&(o+="."+Is(n),5==t&&e.na()&&(31==(n=(248&(t=e.T()))>>3)&&e.na()&&(n=32+((7&t)<<3)+((224&e.T())>>5)),o+="."+n)),s.push(o),l=!0}).box("ac-3",o).box("ec-3",o).box("ac-4",o).box("Opus",o).box("fLaC",o).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(e){var t=r||"";switch(r){case"dvav":t="avc3";break;case"dva1":t="avc1"}(e=e.reader).skip(1),e=t+"."+Is(e.T())+Is(e.T())+Is(e.T()),a.push(e),u=!0}).box("hvcC",function(e){var t=r||"";switch(r){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1);var o=["","A","B","C"][(e=n.T())>>6],i=31&e,s=n.P(),l=(32&e)>>5?"H":"L";e=[n.T(),n.T(),n.T(),n.T(),n.T(),n.T()],n=n.T();for(var c=0,p=0;32>p&&(c|=1&s,31!=p);p++)c<<=1,s>>=1;for(t=t+"."+o+i+"."+Is(c,!0),t+="."+l+n,o="",i=e.length;i--;)((l=e[i])||o)&&(o="."+l.toString(16).toUpperCase()+o);t+=o,a.push(t),u=!0}).box("dvcC",function(e){var t=r||"";switch(r){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.T(),n=n.T(),a.push(t+"."+Ms(e>>1&127)+"."+Ms(e<<5&32|n>>3&31)),u=!0}).box("dvvC",function(e){var t=r||"";switch(r){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.T(),n=n.T(),a.push(t+"."+Ms(e>>1&127)+"."+Ms(e<<5&32|n>>3&31)),u=!0}).S("vpcC",function(e){var t=r||"",n=e.reader;e=n.T();var o=n.T();n=n.T()>>4&15,a.push(t+"."+Ms(e)+"."+Ms(o)+"."+Ms(n)),u=!0}).box("av1C",function(e){var t=r||"";"dav1"===r&&(t="av01");var n=e.reader;n.skip(1);var o=(e=n.T())>>>5,i=(64&(n=n.T()))>>6;a.push(t+"."+o+"."+Ms(31&e)+(n>>>7?"H":"M")+"."+Ms(2===o&&i?(32&n)>>5?12:10:i?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+Ms(1)+"."+Ms(1)+"."+Ms(1)+".0"),u=!0}).box("enca",ji).box("encv",Bi).box("sinf",Ni).box("frma",function(e){i(e=Es(e.reader).codec)}).box("colr",function(e){a=a.map(function(t){if(t.startsWith("av01.")){var n=e.reader,o=n.va(),i=n.qb(4),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),"nclx"===(r+=String.fromCharCode(i[3]))){i=n.la(),r=n.la();var s=n.la(),a=n.T()>>7,l=t.split(".");10==l.length&&(l[6]=Ms(i),l[7]=Ms(r),l[8]=Ms(s),l[9]=String(a),t=l.join("."))}n.seek(o)}return t});var t=function(e){var t=null,n=null,o=e.qb(4),i=String.fromCharCode(o[0]);if(i+=String.fromCharCode(o[1]),i+=String.fromCharCode(o[2]),"nclx"===(i+=String.fromCharCode(o[3]))){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(o=e.la(),e.la(),o){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xd:n}}(e.reader),n=t.colorGamut;g=t.xd,y=n}).parse(e||t,!0),!s.length&&!a.length)return null;var v=l&&!u,b=new Map;if(u){var x=new Te("video/mp4");for(e&&x.init(e),x.i(t),t=(e=p(x.j())).next();!t.done;t=e.next())t=t.value,b.set(t,t);x.g()}return{type:v?"audio":"video",mimeType:v?"audio/mp4":"video/mp4",codecs:ml(s.concat(a)).join(", "),language:c,height:d,width:h,channelCount:f,sampleRate:m,closedCaptions:b,xd:g,colorGamut:y}}function ml(e){for(var t=new Set,n=[],o=(e=p(e)).next();!o.done;o=e.next()){var i=Un(o=o.value);t.has(i)||(n.push(o),t.add(i))}return t=Cn("audio",n),o=Cn("video",n),e=Cn(An,n),o=function(e){if(1>=e.length)return e;var t=e.find(function(e){return e.startsWith("dvav.")||e.startsWith("dva1.")||e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")||e.startsWith("dvc1.")||e.startsWith("dvi1.")});return t?ie('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(e){return e!=t}):e}(o),t=t.concat(o).concat(e),n.length&&!t.length?n:t}function gl(t,n,o){var i,r,s,a,l;return P(function(u){if(1==u.g)return(i=n).cryptoKey?u.u(2):S(u,i.fetchKey(),3);if(!(r=i.iv))for(r=ve(new ArrayBuffer(16)),s=i.firstMediaSequenceNumber+o,a=r.byteLength-1;0<=a;a--)r[a]=255&s,s>>=8;return l="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:r}:{name:"AES-CTR",counter:r,length:64},u.return(e.crypto.subtle.decrypt(l,i.cryptoKey,t))})}function yl(e,t,n,o,i){return e=bi(e,o,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function vl(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.m=new Ei(function(){return function(e){var t,n,o,i,r,s;return P(function(a){if(1==a.g){for(t=[],n=p(e.i.values()),o=n.next();!o.done;o=n.next())Pl(i=o.value),t.push(Ol(i)),i.W&&(ol(i.W),i.W=null);for(r=p(e.o.values()),s=r.next();!s.done;s=r.next())ol(s.value);return S(a,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,T(a)})}(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}function bl(e,t){for(var n=0>e.g.eb(),o=p(e.i.values()),i=o.next();!i.done;i=o.next())(i=i.value).ia&&i.ia.Sc(n),i.W&&i.W.Sc(n);for(i=(o=p(e.o.values())).next();!i.done;i=o.next())i.value.Sc(n);(n=e.i.get("video"))&&(o=n.stream)&&(t?(t=o.trickModeVideo)&&!n.rc&&(Sl(e,t,!1,0,!1),n.rc=o):(t=n.rc)&&(n.rc=null,Sl(e,t,!0,0,!1)))}function xl(e,t,n,o,i,r){n=void 0!==n&&n,o=void 0===o?0:o,i=void 0!==i&&i,r=void 0!==r&&r,e.j=t,e.C&&(t.video&&Sl(e,t.video,n,o,i,r),t.audio&&Sl(e,t.audio,n,o,i,r))}function wl(e,t){P(function(n){if(1==n.g)return e.s=t,e.C?t.segmentIndex?n.u(2):S(n,t.createSegmentIndex(),2):n.return();Sl(e,t,!0,0,!1),T(n)})}function Sl(e,t,n,o,i,r){var s=e.i.get(t.type);s||t.type!=An?s&&(s.rc&&(t.trickModeVideo?(s.rc=t,t=t.trickModeVideo):s.rc=null),s.stream!=t||i)&&(e.o.has(t)?s.W=e.o.get(t):s.W&&function(e,t){t&&t!==e.i&&(ol(e),e.i=t)}(s.W,t),t.type==An&&(i=_n(t.mimeType,t.codecs),ea(e.g.aa,i,e.l.sequenceMode,t.external)),e.o.has(s.stream)||s.stream.closeSegmentIndex&&s.stream.closeSegmentIndex(),s.stream=t,s.ia=null,s.hg=!!r,n?s.Vc?s.Be=!0:s.Qa?(s.cc=!0,s.Hd=o,s.Be=!0):(Pl(s),Ll(e,s,!0,o).catch(function(t){e.g&&e.g.onError(t)})):s.Qa||s.sb||Dl(e,s,0),function(e,t){var n,o;return P(function(i){if(1==i.g)return t.ib?(n=t.stream,o=t.ib,n.segmentIndex?i.u(2):S(i,n.createSegmentIndex(),2)):i.return();if(t.ib!=o||t.stream!=n)return i.return();var r=e.g.Md(),s=oa(e.g.aa,t.type),a=t.stream.segmentIndex.find(t.Na?t.Na.endTime:r),l=null==a?null:t.stream.segmentIndex.get(a);a=l&&l.sa?l.sa-l.Ha:null,l&&!a&&(a=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8),a?((l=l.$)&&(a+=(l.sa?l.sa-l.Ha:null)||0),r=8*a/(l=e.g.getBandwidthEstimate())<(s||0)-r-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.ib.h.g>a):r=!1,r&&t.ib.abort(),T(i)})}(e,s).catch(function(t){e.g&&e.g.onError(t)})):function(e,t){var n,o,i,r,s;P(function(a){switch(a.g){case 1:return n=En,e.H++,o=e.H,k(a,2),S(a,sa(e.g.aa,n.ua),4);case 4:A(a,3);break;case 2:i=E(a),e.g&&e.g.onError(i);case 3:r=_n(t.mimeType,t.codecs),ea(e.g.aa,r,e.l.sequenceMode,t.external),(e.g.aa.F.isTextVisible()||e.h.alwaysStreamText)&&e.H==o&&(s=kl(e,t),e.i.set(n.ua,s),Dl(e,s,0)),T(a)}})}(e,t)}function Tl(e,t){t.Vc||t.cc||(t.Qa?(t.cc=!0,t.Hd=0):null==na(e.g.aa,t.type)?null==t.sb&&Dl(e,t,0):(Pl(t),Ll(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)})))}function kl(e,t){return{stream:t,type:t.type,ia:null,W:Cl(e,t),Na:null,lc:null,Vd:null,Ud:null,Td:null,rc:null,endOfStream:!1,Qa:!1,sb:null,cc:!1,Hd:0,Be:!1,Vc:!1,Qc:!0,Gf:!1,fd:!1,ib:null}}function Cl(e,t){if("video"===t.type&&e.h.disableVideoPrefetch||"audio"===t.type&&e.h.disableAudioPrefetch||t.type===An&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===An&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new Ja(e.h.segmentPrefetchLimit,t,function(t,n,o){return _l(t,n,o||null,e.h.retryParameters,e.g.Lb)},0>e.g.eb()):null}function Al(t,n){var o,i,r,s,a,l;return P(function(u){switch(u.g){case 1:if(Ii(t.m),n.Qa||null==n.sb||n.Vc)return u.return();if(n.sb=null,!n.cc){u.u(2);break}return S(u,Ll(t,n,n.Be,n.Hd),3);case 3:return u.return();case 2:if(n.stream.segmentIndex){u.u(4);break}return o=n.stream,k(u,5),S(u,n.stream.createSegmentIndex(),7);case 7:A(u,6);break;case 5:return i=E(u),S(u,Nl(t,n,i),8);case 8:return u.return();case 6:if(o!=n.stream)return o.closeSegmentIndex&&o.closeSegmentIndex(),n.Qa||n.sb||Dl(t,n,0),u.return();case 4:k(u,9),r=function(t,n){if(Ml(n))return function(e,t){var n=oa(e,"video")||0;qn(e.g,t,n)}(t.g.aa,n.stream.originalId||""),null;if(n.type==An&&function(e){e.g&&qn(e.g,"",0)}(t.g.aa),!t.g.aa.xa&&n.type!=An)return t.h.updateIntervalSeconds/2;var o=t.g.Md();if("audio"===n.type)for(var i=p(t.o.keys()),r=i.next();!r.done;r=i.next())(r=t.o.get(r.value)).Ma(o,!0),el(r,o);i=n.Na?n.Na.endTime:o;var s=function(e,t,n){return e.C?0:t==An?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):hs(e=ia(e,t),n)}(t.g.aa,n.type,o),a=Math.max(1,Math.max(t.l.minBufferTime||0,t.h.rebufferingGoal,t.h.bufferingGoal)*t.B),l=t.l.presentationTimeline.getDuration()-i;if(r=oa(t.g.aa,n.type),1e-6>l&&r)return n.endOfStream=!0,"video"==n.type&&(t=t.i.get(An))&&Ml(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,s>=a)return t.h.updateIntervalSeconds/2;if(a=!n.ia,r=function(e,t,n,o){var i=t.ia?t.ia.current():null;if(i)return i;if(t.Na||o)return t.ia=t.stream.segmentIndex.Ib(t.Na?t.Na.endTime:o,!1,0>e.g.eb()),t.ia&&t.ia.next().value;o=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance,i=Math.max(n-o,0),e=0>e.g.eb();var r=null;return o&&(t.ia=t.stream.segmentIndex.Ib(i,!1,e),r=t.ia&&t.ia.next().value),r||(t.ia=t.stream.segmentIndex.Ib(n,!1,e),r=t.ia&&t.ia.next().value),r}(t,n,o,r),!r)return t.h.updateIntervalSeconds;s=!1,a&&n.hg&&(s=!0,n.hg=!1),a=1/0;for(var u=(l=p(l=Array.from(t.i.values()))).next();!u.done;u=l.next())Ml(u=u.value)||u.ia&&!u.ia.current()||(a=Math.min(a,u.Na?u.Na.endTime:o));return i>=a+t.l.presentationTimeline.g?t.h.updateIntervalSeconds:(n.W&&n.ia&&!t.o.has(n.stream)&&(n.W.Ma(r.startTime),el(n.W,r.startTime)),function(t,n,o,i,r){var s,a,l,u,c,p,d,h,f,m,g,y,v,b,x;return P(function(w){switch(w.g){case 1:if(s=En,a=n.stream,l=n.ia,n.Qa=!0,k(w,2),2==i.Yb())throw new St(1,1,1011);return S(w,function(e,t,n,o){var i,r,s,a,l,u,c,p,d,h,f,m,g,y,v;return P(function(b){switch(b.g){case 1:if(i=En,r=null==t.Na&&null==t.lc,s=[],a=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),l=Math.min(n.appendWindowEnd,e.L)+.01,u=Un(n.codecs||t.stream.codecs),c=Bn(n.mimeType||t.stream.mimeType),(p=n.timestampOffset)==t.Vd&&a==t.Ud&&l==t.Td&&u==t.tf&&c==t.uf){b.u(2);break}if(d=t.tf&&t.uf&&function(e,t,n,o){if(t==An)var i=!1;else{i=Nn(jn(e.G[t]));var r=Bn(e.G[t]),s=_n(n,o),a=e.A.forceTransmux;(!ie(s)||!e.B&&Gn.includes(s))&&(a=!0),n=Ln(n,o),a&&(a=Ze(n))&&(s=(a=a()).convertCodecs(t,n),a.destroy()),t=Nn(jn(s)),s=Bn(s),i=i!==t||r!==s}return!!i&&("smooth"!==e.A.codecSwitchingStrategy||!re()||e.o)}(e.g.aa,t.type,c,u),!d){b.u(3);break}if(h=null,t.type===i.ga?h=e.i.get(i.X):t.type===i.X&&(h=e.i.get(i.ga)),!h){b.u(3);break}return S(b,Ol(h).catch(function(){}),5);case 5:h.lc=null,Tl(e,h);case 3:return S(b,El(e,t,p,a,l,n,u,c),2);case 2:return rs(n.$,t.lc)||(t.lc=n.$,n.l&&n.$&&(f=Rl(e,t,n.$),m=function(){var r,s,a,l,u,c;return P(function(p){switch(p.g){case 1:return k(p,2),S(p,f,4);case 4:return r=p.h,Ii(e.m),s=null,a=new Map,l={projection:null,hfov:null},(new Oi).box("moov",Ni).box("trak",Ni).box("mdia",Ni).S("mdhd",function(e){s=ks(e.reader,e.version).timescale}).box("hdlr",function(e){switch((e=e.reader).skip(8),e.oc()){case"soun":a.set(i.X,s);break;case"vide":a.set(i.ga,s)}s=null}).box("minf",Ni).box("stbl",Ni).S("stsd",Ui).box("encv",Bi).box("avc1",Bi).box("avc3",Bi).box("hev1",Bi).box("hvc1",Bi).box("dvav",Bi).box("dva1",Bi).box("dvh1",Bi).box("dvhe",Bi).box("dvc1",Bi).box("dvi1",Bi).box("vexu",Ni).box("proj",Ni).S("prji",function(e){e=e.reader.oc(),l.projection=e}).box("hfov",function(e){e=e.reader.P()/1e3,l.hfov=e}).parse(r),function(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new ci("spatialvideoinfo",n)}else n=new ci("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}(e,l),a.has(t.type)?n.$.timescale=a.get(t.type):null!=s&&(n.$.timescale=s),u=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,S(p,e.g.kg(t.type,r),5);case 5:return S(p,ra(e.g.aa,t.type,r,null,t.stream,u,t.Qc,o),6);case 6:A(p,0);break;case 2:throw c=E(p),t.lc=null,c}})},g=n.startTime,r&&null!=(y=oa(e.g.aa,t.type))&&(g=y),e.g.Ai(g,n.$),s.push(m()))),e.l.sequenceMode&&(v=t.Na?t.Na.i:null,n.i!=v&&s.push(function(e,t,n){var o;return P(function(i){return 1==i.g?t==(o=En).ua?i.return():(t==o.ga&&(e.za=new oi),da(e,t,function(){return ua(e,t)},null),e.o&&da(e,o.X,function(){return ua(e,o.X)},null),S(i,da(e,t,function(){return ca(e,t,n)},null),2)):e.o?S(i,da(e,o.X,function(){return ca(e,o.X,n)},null),0):i.u(0)})}(e.g.aa,t.type,n.startTime))),S(b,Promise.all(s),0)}})}(t,n,i,r),4);case 4:return Ii(t.m),t.A?w.return():(u="video/mp4"==a.mimeType||"audio/mp4"==a.mimeType,c=e.ReadableStream,t.h.lowLatencyMode&&t.l.isLowLatency&&c&&u&&("HLS"!=t.l.type||i.m)?(d=new Uint8Array(0),f=h=!1,g=function(e){var s,l,u;return P(function(c){switch(c.g){case 1:if(h)return c.return();if(f=!0,Ii(t.m),t.A)return c.return();if(k(c,2),d=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,e),s=!1,l=0,(new Oi).box("mdat",function(e){l=e.size+e.start,s=!0}).parse(d,!1,!0),!s){c.u(4);break}return u=d.subarray(0,l),d=d.subarray(l),S(c,Il(t,n,o,a,i,u,!0,r),5);case 5:n.W&&n.ia&&el(n.W,i.startTime,!0);case 4:A(c,0);break;case 2:m=E(c),T(c)}})},S(w,Rl(t,n,i,g),9)):S(w,Rl(t,n,i),7));case 7:return p=w.h,Ii(t.m),t.A?w.return():(Ii(t.m),n.cc?(n.Qa=!1,Dl(t,n,0),w.return()):S(w,Il(t,n,o,a,i,p,!1,r),6));case 9:if(y=w.h,m)throw m;if(f){w.u(10);break}return h=!0,Ii(t.m),t.A?w.return():n.cc?(n.Qa=!1,Dl(t,n,0),w.return()):S(w,Il(t,n,o,a,i,y,!1,r),10);case 10:n.W&&n.ia&&el(n.W,i.startTime,!0);case 6:if(Ii(t.m),t.A)return w.return();n.Na=i,l.next(),n.Qa=!1,n.Gf=!1,v=t.g.aa.wb(),b=v[n.type],JSON.stringify(b),n.cc||t.g.Af(i,n.stream),Dl(t,n,0),A(w,0);break;case 2:if(x=E(w),Ii(t.m,x),t.A)return w.return();if(n.Qa=!1,7001==x.code)n.Qa=!1,Pl(n),Dl(t,n,0),w.u(0);else if(n.type==s.ua&&t.h.ignoreTextStreamFailures)t.i.delete(s.ua),w.u(0);else{if(3017!=x.code)return n.fd=!0,1==x.category&&n.W&&sl(n.W,i),x.severity=2,S(w,Nl(t,n,x),0);(function(e,t,n){if(!Array.from(e.i.values()).some(function(e){return e!=t&&e.Gf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var o=Math.round(100*e.B);if(20<o)e.B-=.2;else{if(!(4<o))return t.fd=!0,e.A=!0,void e.g.onError(n);e.B-=.04}t.Gf=!0}Dl(e,t,4)})(t,n,x),w.u(0)}}})}(t,n,o,r,s).catch(function(){}),null)}(t,n),null!=r&&(Dl(t,n,r),n.fd=!1),A(u,10);break;case 9:return s=E(u),S(u,Nl(t,n,s),11);case 11:return u.return();case 10:if(a=Array.from(t.i.values()),!t.C||!a.every(function(e){return e.endOfStream})){u.u(0);break}return S(u,t.g.aa.endOfStream(),13);case 13:Ii(t.m),0!=(l=t.g.aa.getDuration())&&l<t.l.presentationTimeline.getDuration()&&t.l.presentationTimeline.Za(l),T(u)}})}function El(e,t,n,o,i,r,s,a){var l,u,c,p;return P(function(d){if(1==d.g)return l=En,u=new Map,e.j.audio&&u.set(l.X,e.j.audio),e.j.video&&u.set(l.ga,e.j.video),k(d,2),t.Ud=o,t.Td=i,s&&(t.tf=s),a&&(t.uf=a),t.Vd=n,c=e.l.sequenceMode||"HLS"==e.l.type,S(d,aa(e.g.aa,t.type,n,o,i,c,r.mimeType||t.stream.mimeType,r.codecs||t.stream.codecs,u),4);if(2!=d.g)return A(d,0);throw p=E(d),t.Ud=null,t.Td=null,t.tf=null,t.uf=null,t.Vd=null,p})}function Il(e,t,n,o,i,r,s,a){var l,u,c,p,d,h,f,m;return s=void 0!==s&&s,a=void 0!==a&&a,P(function(g){switch(g.g){case 1:return l=o.closedCaptions&&0<o.closedCaptions.size,c=null!=o.emsgSchemeIdUris&&0<o.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,p=e.h.parsePrftBox&&!e.F,d="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,h=null,i.$&&(h=i.$.timescale),f=d&&h&&"video"===o.type&&"DASH"==e.l.type&&e.h.shouldFixTimestampOffset,(c||p||f)&&(u=new Oi),c&&u.S("emsg",function(t){var n=o.emsgSchemeIdUris;if(0===t.version)var r=t.reader.oc(),s=t.reader.oc(),a=t.reader.P(),l=t.reader.P(),u=t.reader.P(),c=t.reader.P(),p=i.startTime+l/a;else a=t.reader.P(),l=(p=t.reader.Nc()/a+i.timestampOffset)-i.startTime,u=t.reader.P(),c=t.reader.P(),r=t.reader.oc(),s=t.reader.oc();t=t.reader.qb(t.reader.getLength()-t.reader.va()),(n&&n.includes(r)||e.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==r?e.g.Bi():(n=p+u/a,(a=new ci("emsg",a=(new Map).set("detail",{startTime:p,endTime:n,schemeIdUri:r,value:s,timescale:a,presentationTimeDelta:l,eventDuration:u,id:c,messageData:t}))).cancelable=!0,e.g.onEvent(a),a.defaultPrevented||"https://aomedia.org/emsg/ID3"!=r&&"https://developer.apple.com/streaming/emsg-id3"!=r||!(r=xs(t)).length||e.g.onMetadata([{cueTime:p,data:t,frames:r,dts:p,pts:p}],0,n)))}),p&&u.S("prft",function(t){if(!e.F&&i.$.timescale){var n=t.reader,o=t.version;n.P(),t=1e3*(t=n.P())+n.P()/Math.pow(2,32)*1e3,0===o?n=n.P():(o=n.P(),n=n.P(),n=o*Math.pow(2,32)+n),t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime(),n=new ci("prft",n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/i.$.timescale*1e3)})),e.g.onEvent(n),e.F=!0}}),f&&u.box("moof",Ni).box("traf",Ni).S("tfdt",function(n){var o,r,s,a,l;return P(function(u){return o=Ts(n.reader,n.version),(r=o.baseMediaDecodeTime)?(s=-r/h,(Number(t.Vd)||0)<s?(a=t.Ud,l=t.Td,S(u,El(e,t,s,a,l,i),0)):u.u(0)):u.return()})}),(c||p||f)&&u.parse(r,!1,s),S(g,function(e,t,n){var o,i,r;return P(function(s){if(1==s.g)return o=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),null==(i=na(e.g.aa,t.type))||(r=n-i-o)<=e.h.evictionGoal?s.return():S(s,e.g.aa.remove(t.type,i,i+r),2);Ii(e.m),T(s)})}(e,t,n),2);case 2:return Ii(e.m),m=t.Qc,t.Qc=!1,S(g,e.g.kg(t.type,r),3);case 3:return S(g,ra(e.g.aa,t.type,r,i,o,l,m,a,s),4);case 4:Ii(e.m),T(g)}})}function Ml(e){return e&&e.type==An&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Rl(e,t,n,o){var i,r,s,a,l;return P(function(u){switch(u.g){case 1:if(i=n.cd())return u.return(i);if(r=null,t.W){var c=t.W,p=c.h;n instanceof is&&(p=c.j),p.has(n)?(c=p.get(n),o&&(c.Uf=o),r=c.fe):r=null}return r||(r=_l(n,t.stream,o||null,e.h.retryParameters,e.g.Lb)),s=0,t.ia&&(s=t.ia.h),t.ib=r,S(u,r.promise,2);case 2:if(a=u.h,t.ib=null,l=a.data,!n.aesKey){u.u(3);break}return S(u,gl(l,n.aesKey,s),4);case 4:l=u.h;case 3:return u.return(l)}})}function _l(e,t,n,o,i){var r=e instanceof ss?e:void 0,s=r?1:0;return(e=yl(e.M(),e.Ha,e.sa,o,n)).contentType=t.type,i.request(ki,e,{type:s,stream:t,segment:r})}function Ll(e,t,n,o){var i,r;return P(function(s){return 1==s.g?(t.cc=!1,t.Be=!1,t.Hd=0,t.Vc=!0,t.Na=null,t.ia=null,t.W&&!e.o.has(t.stream)&&ol(t.W),o?(i=e.g.Md(),r=e.g.aa.getDuration(),S(s,e.g.aa.remove(t.type,i+o,r),3)):S(s,sa(e.g.aa,t.type),4)):3!=s.g?(Ii(e.m),n?S(s,e.g.aa.flush(t.type),3):s.u(3)):(Ii(e.m),t.Vc=!1,t.endOfStream=!1,t.Qa||t.sb||Dl(e,t,0),void T(s))})}function Dl(e,t,n){var o=t.type;(o!=An||e.i.has(o))&&(t.sb=new Mt(function(){var n;return P(function(o){return 1==o.g?(k(o,2),S(o,Al(e,t),4)):2!=o.g?A(o,0):(n=E(o),e.g&&e.g.onError(n),void T(o))})}).Y(n))}function Pl(e){null!=e.sb&&(e.sb.stop(),e.sb=null)}function Ol(e){return P(function(t){return e.ib?S(t,e.ib.abort(),0):t.u(0)})}function Nl(e,t,n){var o;return P(function(i){if(1==i.g)return S(i,ti(e.I),2);Ii(e.m),1===n.category&&(o=0===e.h.maxDisabledTime&&1011==n.code?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,o),n.handled&&(n.severity=1)),n.handled&&1011==n.code||e.g.onError(n),n.handled||e.h.failureCallback(n),T(i)})}function Ul(){}function Bl(e,t,n,o,i){var r,s=i in o,a=s?n.constructor==Object&&0==Object.keys(o).length:n.constructor==Object&&0==Object.keys(n).length,l=s||a,u=!0;for(r in t){var c=i+"."+r,p=s?o[i]:n[r];l||r in n?void 0===t[r]?void 0===p||l?delete e[r]:e[r]=lo(p):a?e[r]=t[r]:p.constructor==Object&&t[r]&&t[r].constructor==Object?(e[r]||(e[r]=lo(p)),c=Bl(e[r],t[r],p,o,c),u=u&&c):typeof t[r]!=typeof p||null==t[r]||"function"!=typeof t[r]&&t[r].constructor!=p.constructor?(K("Invalid config, wrong type for "+c),u=!1):("function"==typeof n[r]&&n[r].length!=t[r].length&&Y("Unexpected number of arguments for "+c),e[r]=t[r]):(K("Invalid config, unrecognized key "+c),u=!1)}return u}function jl(e,t){for(var n={},o=n,i=0,r=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(o[r=e.substring(r,i).replace(/\\\./g,".")]={},o=o[r],r=i+1),i+=1;return o[e.substring(r).replace(/\\\./g,".")]=t,n}function Fl(e,t){return e&&t}function zl(e,t){function n(e){return Array.isArray(e)&&0===e.length}function o(e){return e&&"object"==typeof e&&!Array.isArray(e)}return e=function e(t,i){return Object.keys(t).reduce(function(r,s){var a=t[s];return i.hasOwnProperty(s)?o(a)&&o(i[s])?(a=e(a,i[s]),(0<Object.keys(a).length||!o(a))&&(r[s]=a)):n(a)&&n(i[s])||Number.isNaN(a)&&Number.isNaN(i[s])||a!==i[s]&&(r[s]=a):r[s]=a,r},{})}(e,t),function e(t){for(var i=p(Object.keys(t)),r=i.next();!r.done;r=i.next())o(t[r=r.value])&&0===Object.keys(t[r]).length||n(t[r])||"function"==typeof t[r]?delete t[r]:o(t[r])&&(e(t[r]),0===Object.keys(t[r]).length&&delete t[r])}(e),e}function $l(){}function Gl(e){return new st(e=an(e)).Eb}function Vl(e,t,n){function o(e){xe(r).setUint32(s,e.byteLength,!0),s+=4,r.set(ve(e),s),s+=e.byteLength}if(!n||!n.byteLength)throw new St(2,6,6015);var i;i="string"==typeof t?un(t,!0):t,e=un(e=an(e),!0);var r=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),s=0;return o(e),o(i),o(n),r}function Hl(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Vl(e,n=an(e).split("skd://").pop(),t))}function ql(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}function Xl(){}function Wl(){var t=1/0;navigator.connection&&navigator.connection.saveData&&(t=360);var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(e,t,n){return Zt()&&"skd"==t&&(t=n.serverCertificate,e=Vl(e,n=Gl(e),t)),e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Pt(),minHdcpVersion:"",ignoreDuplicateInitData:!Ut()};(Pt()||Vt())&&n.preferredKeySystems.push("com.microsoft.playready");var o="reload",i=!1;Ut()||Nt()||Qt("Tizen 4")||Qt("Tizen 5")||Qt("Tizen 6")||jt()||Bt()&&53===zt()||Bt()&&68===zt()||!(!Ft()||Ft()&&Kt()||Ft()&&Qt("Fuchsia"))||Wt()&&Dt()||(o="smooth",i=!0),i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Yl,manifestPreprocessorTXml:Ql,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:i,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Nt()||Ut()||jt()||Vt()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Yl,manifestPreprocessorTXml:Ql,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return Fl([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Vt()||Gt(),dontChooseCodecs:!1,shouldFixTimestampOffset:Bt()||Ot()};(Bt()||Ot()||Ft()||Ht())&&(r.stallSkip=0);var s={trackSelectionCallback:function(e){return P(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return P(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?S(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return Fl([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5};t={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:$t()?.5:0},o={codecSwitchingStrategy:o,addExtraFeaturesToSourceBuffer:function(e){return Fl([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(e,t){return Fl([e,t])}};var a=!1,l=!1,u=!0;Yt()&&(l=a=!0,u=!1);var c={drm:n,manifest:i,streaming:r,mediaSource:o,offline:s,abrFactory:function(){return new Fo},abr:t,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:a,skipPlayDetection:l,supportsMultipleMediaElements:u}};return s.trackSelectionCallback=function(t){return P(function(n){return n.return(function(t,n,o){var i=o;"AUTO"==i&&(i=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var r=t.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=i)});o=[];var s=so(n,r.map(function(e){return e.language}));s&&(o=r.filter(function(e){return no(e.language)==s})),0==o.length&&(o=r.filter(function(e){return e.primary})),0==o.length&&(r.map(function(e){return e.language}),o=r);var a=o.filter(function(e){return e.height&&480>=e.height});for(a.length&&(a.sort(function(e,t){return t.height-e.height}),o=a.filter(function(e){return e.height==a[0].height})),n=[],o.length&&(r=Math.floor(o.length/2),o.sort(function(e,t){return e.bandwidth-t.bandwidth}),n.push(o[r])),t=p(t),o=t.next();!o.done;o=t.next())(o=o.value).type!=An&&"image"!=o.type||n.push(o);return n}(t,c.preferredAudioLanguage,c.preferredVideoHdrLevel))})},c}function Kl(e,t,n){var o={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Bl(e,t,n||Wl(),o,"")}function Yl(e){return Fl([e],e)}function Ql(e){return Fl([e],e)}function Jl(e,t,n,o){hi.call(this),this.L=e,this.U=t,this.xa=o.networkingEngine,this.A=n,this.o=null,this.qa=0,this.Fa=o.yc,this.C=o.vi,this.ab=o.wi,this.g=o.config,this.j=this.F=this.h=null,this.ea=!1,this.G=o.Fi,this.oa=!1,this.l=null,this.da=!1,this.i=this.B=null,this.ba=!1,this.K=new Map,this.pa=!1,this.za=o.Ei,this.Z=new Qa,this.m=new oi,this.N=null,this.s=!1,this.Da=o.yh,this.fa=null,this.Ea=o.xh,this.R=!1,this.I=[],this.H=[]}function Zl(e,t,n){(e=t?e.H:e.I)?e.push(n):n()}function eu(e,t){if(e.N=t,e.R=!0,e.I)for(var n=(t=p(e.I)).next();!n.done;n=t.next())(n=n.value)();e.I=null}function tu(e){if(e.s)throw new St(2,7,7003)}function nu(e,t){e.dispatchEvent(new ci("onstatechange",(new Map).set("state",t)))}function ou(e,t,n){var o,i,r,s,a;P(function(l){if(1==l.g)return o=e.g.streaming.segmentPrefetchLimit||2,i=new Ja(o,t,function(t,n,o){return _l(t,n,o||null,e.g.streaming.retryParameters,e.xa)},!1),e.K.set(t.id,i),S(l,t.createSegmentIndex(),2);r=e.A||0,(a=(s=t.segmentIndex.Ib(r))?s.current():null)||(a=t.segmentIndex.get(0)),a&&(n?a.$&&tl(i,a.$):el(i,a.startTime)),T(l)})}function iu(e,t){hi.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wc:null,vc:au,jc:function(e,t){return ru(n,"enter",e,t)}},{wc:su,vc:au,jc:function(e,t){return ru(n,"enter",e,t)}},{wc:lu,vc:au,jc:function(e,t){return ru(n,"enter",e,t)}},{wc:au,vc:su,jc:function(e,t){return ru(n,"exit",e,t)}},{wc:au,vc:lu,jc:function(e,t){return ru(n,"exit",e,t)}},{wc:su,vc:lu,jc:function(e,t){return ru(n,"skip",e,t)}},{wc:lu,vc:su,jc:function(e,t){return ru(n,"skip",e,t)}}],this.h=new te,this.h.D(this.i,"regionremove",function(e){n.g.delete(e.region)})}function ru(e,t,n,o){t=new ci(t,new Map([["region",n],["seeking",o]])),e.dispatchEvent(t)}Ea.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},La.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},(i=Pa.prototype).ready=function(){var e=this;Ca(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){!function(){if(null==e.g||0==e.g&&1/0!=e.h.duration)e.j=!0;else{var t=e.h.currentTime,n=e.g;0>e.g&&(n=Math.max(0,t+e.g)),t!=n?(e.i.ha(e.h,"seeking",function(){e.j=!0}),e.h.currentTime=n):e.j=!0}}()})},i.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},i.Ee=function(e){this.g=this.j?this.g:e},i.yd=function(){return(this.j?this.h.currentTime:this.g)||0},i.gg=function(){return 0},i.fg=function(){return 0},i.Mg=function(){},(i=Oa.prototype).ready=function(){this.m.Sa(.25)},i.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},i.Ee=function(e){Ma(this.h,e)},i.yd=function(){var e=Ia(this.h);return 0<this.i.readyState&&!this.i.paused?Ba(this,e):e},i.gg=function(){return this.o?this.o.o:0},i.fg=function(){return this.j.C},i.Mg=function(){this.j.Af()},(i=ja.prototype).getNumReferences=function(){return this.O.length},i.getNumEvicted=function(){return this.i},i.release=function(){this.m||(this.O=[],this.l&&this.l.stop(),this.l=null)},i.yi=function(){this.m=!0},i.Hb=function(e){for(var t=p(this.O),n=t.next();!n.done;n=t.next())e(n.value)},i.find=function(e){for(var t=this.O.length-1,n=t;0<=n;--n){var o=this.O[n],i=n<t?this.O[n+1].startTime:o.endTime;if(e>=o.startTime&&e<i)return n+this.i}return this.O.length&&e<this.O[0].startTime?this.i:null},i.get=function(e){return 0==this.O.length||0>(e-=this.i)||e>=this.O.length?null:this.O[e]},i.offset=function(e){if(!this.m)for(var t=p(this.O),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.Zd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.O=this.O.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.O.push.apply(this.O,d(e))}},i.rd=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.O.length||e.endTime>n.O[0].startTime)}),this.Zd(e),this.Ma(t)},i.Ma=function(e){if(!this.m){var t=this.O.length;this.O=this.O.filter(function(t){return t.endTime>e}),this.i+=t-this.O.length}},i.Bc=function(e,t,n){if(n=void 0!==n&&n,!this.m){for(;this.O.length&&this.O[this.O.length-1].startTime>=t;)this.O.pop();for(;this.O.length&&this.O[0].endTime<=e;)this.O.shift(),n||this.i++;0!=this.O.length&&((t=new ss((e=this.O[this.O.length-1]).startTime,t,e.F,e.Ha,e.sa,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey)).mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.O[this.O.length-1]=t)}},i.ue=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new Rt(function(){var e=t();e?n.O.push.apply(n.O,d(e)):(n.l.stop(),n.l=null)}),this.l.Sa(e))},ja.prototype[Symbol.iterator]=function(){return this.Ib(0)},ja.prototype.Ib=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var o=this.find(e);if(null==o)return null;var i=this.get(o);n?o++:o--;var r=-1;if(i&&0<i.g.length)for(var s=i.g.length-1;0<=s;--s){var a=i.g[s];if(e>=a.startTime&&e<a.endTime){if(!t){for(;s&&!a.l;)s--,a=i.g[s];if(!a.l)return K("No independent partial segment found!"),null}n?o--:o++,r=s-1;break}}return new za(this,o,r,n)},$("shaka.media.SegmentIndex",ja),ja.forSingleSegment=Fa,ja.prototype.getIteratorForTime=ja.prototype.Ib,ja.prototype.updateEvery=ja.prototype.ue,ja.prototype.fit=ja.prototype.Bc,ja.prototype.evict=ja.prototype.Ma,ja.prototype.mergeAndEvict=ja.prototype.rd,ja.prototype.offset=ja.prototype.offset,ja.prototype.get=ja.prototype.get,ja.prototype.find=ja.prototype.find,ja.prototype.markImmutable=ja.prototype.yi,ja.prototype.release=ja.prototype.release,ja.prototype.getNumEvicted=ja.prototype.getNumEvicted,ja.prototype.getNumReferences=ja.prototype.getNumReferences,za.prototype.Sc=function(e){this.reverse=e},za.prototype.Eh=function(){return this.h},za.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},za.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},$("shaka.media.SegmentIterator",za),za.prototype.next=za.prototype.next,za.prototype.current=za.prototype.current,za.prototype.currentPosition=za.prototype.Eh,za.prototype.setReverse=za.prototype.Sc,v($a,ja),(i=$a.prototype).clone=function(){var e=new $a;return e.g=this.g.slice(),e},i.release=function(){for(var e=p(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},i.Hb=function(e){for(var t=p(this.g),n=t.next();!n.done;n=t.next())n.value.Hb(e)},i.find=function(e){for(var t=0,n=p(this.g),o=n.next();!o.done;o=n.next()){var i=(o=o.value).find(e);if(null!=i)return i+t;t+=o.getNumEvicted()+o.getNumReferences()}return null},i.get=function(e){for(var t=0,n=p(this.g),o=n.next();!o.done;o=n.next()){var i=(o=o.value).get(e-t);if(i)return i;i=o.getNumReferences(),t+=o.getNumEvicted()+i}return null},i.offset=function(){},i.Zd=function(){},i.Ma=function(){},i.rd=function(){},i.Bc=function(){},i.ue=function(){},$("shaka.media.MetaSegmentIndex",$a),$a.prototype.updateEvery=$a.prototype.ue,$a.prototype.fit=$a.prototype.Bc,$a.prototype.mergeAndEvict=$a.prototype.rd,$a.prototype.evict=$a.prototype.Ma,$a.prototype.merge=$a.prototype.Zd,$a.prototype.offset=$a.prototype.offset,$a.prototype.get=$a.prototype.get,$a.prototype.find=$a.prototype.find,$a.prototype.forEachTopLevelReference=$a.prototype.Hb,$a.prototype.release=$a.prototype.release,Ga.prototype.release=function(){this.set(this.hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Ga.prototype.set=function(e){this.i=e,Va(this)},Ga.prototype.hc=function(){return this.g.hc()},Ha.prototype.release=function(){this.i.stop();for(var e=p(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},Ja.prototype.Ma=function(e,t){t=void 0!==t&&t;for(var n=p(this.h.keys()),o=n.next();!o.done;o=n.next())e>(o=o.value).endTime&&sl(this,o);t&&il(this)},Ja.prototype.Sc=function(e){this.o=e,this.g&&this.g.Sc(e)},al.prototype.abort=function(){this.fe&&this.fe.abort()},v(ul,hi),ul.prototype.release=function(){this.g.clear(),this.h.stop(),hi.prototype.release.call(this)},v(cl,hi),cl.prototype.release=function(){this.g.clear(),hi.prototype.release.call(this)},cl.prototype.j=function(e){for(var t=p(this.g.values()),n=t.next();!n.done;n=t.next()){var o=(n=n.value).Pe;e:{for(var i=n.ud,r=i.length-1;0<=r;r--){var s=i[r];if(s.position<=e){i=s.Hc;break e}}i=null}r=i&&!(o===i||o&&i&&o.bandwidth==i.bandwidth&&o.audioSamplingRate==i.audioSamplingRate&&o.codecs==i.codecs&&o.contentType==i.contentType&&o.frameRate==i.frameRate&&o.height==i.height&&o.mimeType==i.mimeType&&o.channelsCount==i.channelsCount&&o.pixelAspectRatio==i.pixelAspectRatio&&o.width==i.width),s=i&&o&&i.label&&o.label&&o.label!==i.label;var a=i&&o&&i.language&&o.language&&o.language!==i.language;o=i&&o&&i.roles&&o.roles&&!Le(o.roles,i.roles),(s||a||o)&&pl(this,e,i.contentType)&&(n.Pe=i,o=new ci("audiotrackchange",new Map([["quality",i],["position",e]])),this.dispatchEvent(o)),r&&pl(this,e,i.contentType)&&(n.Pe=i,JSON.stringify(i),n=new ci("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},(i=vl.prototype).destroy=function(){return this.m.destroy()},i.configure=function(e){if(this.h=e,this.I=new ei({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(ol(t.W),t.W=null);for(var n=(t=p(this.o.keys())).next();!n.done;n=t.next())n=n.value,ol(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(An))&&t.W&&(ol(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(ol(t.W),t.W=null),n=(t=p(this.i.keys())).next();!n.done;n=t.next())(n=this.i.get(n.value)).W?(rl(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(ol(n.W),n.W=null)):0<e.segmentPrefetchLimit&&(n.W=Cl(this,n.stream));e.disableAudioPrefetch||function(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,o=p(e.l.variants),i=o.next(),r={};!i.done;r={lb:void 0},i=o.next())if(r.lb=i.value,r.lb.audio)if(e.o.has(r.lb.audio)){if(rl(i=e.o.get(r.lb.audio),t),!(0<t&&n.some(function(e){return function(t){return Zn(e.lb.audio.language,t)}}(r)))){var s=e.i.get(r.lb.audio.type);i!==(s&&s.W)&&ol(i),e.o.delete(r.lb.audio)}}else 0>=t||!n.some(function(e){return function(t){return Zn(e.lb.audio.language,t)}}(r))||!(i=Cl(e,r.lb.audio))||(r.lb.audio.segmentIndex||r.lb.audio.createSegmentIndex(),e.o.set(r.lb.audio,i))}(this)},i.start=function(e){var t=this;return P(function(n){if(1==n.g)return S(n,function(e,t){var n,o,i,r,s,a,l,u,c;return P(function(d){if(1==d.g){if(n=En,!e.j)throw new St(2,5,5006);return o=new Map,i=new Set,e.j.audio&&(o.set(n.X,e.j.audio),i.add(e.j.audio)),e.j.video&&(o.set(n.ga,e.j.video),i.add(e.j.video)),e.s&&(o.set(n.ua,e.s),i.add(e.s)),S(d,e.g.aa.init(o,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Ii(e.m),e.updateDuration(),r=p(o.keys()),s=r.next();!s.done;s=r.next())a=s.value,l=o.get(a),e.i.has(a)||(u=kl(e,l),t.has(l.id)&&(Za(c=t.get(l.id),function(t,n,o){return _l(t,n,o||null,e.h.retryParameters,e.g.Lb)}),u.W=c),e.i.set(a,u),Dl(e,u,0));T(d)})}(t,e||new Map),2);Ii(t.m),t.C=!0,T(n)})},i.Qc=function(){if(this.g)for(var e=this.g.Md(),t=p(this.i.keys()),n=t.next();!n.done;n=t.next()){var o=n.value;n=this.i.get(o);var i=this.g.aa;if(!(i=!i.C&&(o==An?null!=(i=i.g).g&&null!=i.h&&e>=i.g&&e<i.h:ds(i=ia(i,o),e)))){if(n.W&&(n.W.g=null),"audio"===n.type)for(var r=(i=p(this.o.values())).next();!r.done;r=i.next())r.value.g=null;n.ia=null,(null!=oa(this.g.aa,o)||n.Qa)&&Tl(this,n),n.ib&&(n.ib.abort(),n.ib=null),o===An&&(o=this.g.aa).H&&o.H.g(),n.Qc=!0}}},i.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.aa.Za(e):this.g.aa.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))},$("shaka.util.ConfigUtils",Ul),Ul.getDifferenceFromConfigObjects=zl,Ul.convertToConfigObject=jl,Ul.mergeConfigObjects=Bl,$("shaka.util.FairPlayUtils",$l),$l.commonFairPlayResponse=function(e,t){if(2===e){try{var n=rn(t.data)}catch(i){return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var o=JSON.parse(n);o.ckc&&(n=o.ckc,e=!0),o.CkcMessage&&(n=o.CkcMessage,e=!0),o.License&&(n=o.License,e=!0)}catch(i){}e&&(t.data=ye(gn(n)))}},$l.expressplayFairPlayRequest=function(e,t){ql(e,t)},$l.conaxFairPlayRequest=function(e,t){ql(e,t)},$l.ezdrmFairPlayRequest=function(e,t){ql(e,t)},$l.verimatrixFairPlayRequest=function(e,t){2===e&&(e=mn(e=ve(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=ln("spc="+e))},$l.expressplayInitDataTransform=function(e,t,n){return Hl(e,t,n)},$l.conaxInitDataTransform=function(t,n,o){if("skd"!==n)return t;n=o.serverCertificate,o=an(t).split("skd://").pop().split("?").shift(),o=e.atob(o);var i=new ArrayBuffer(2*o.length);i=be(i);for(var r=0,s=o.length;r<s;r++)i[r]=o.charCodeAt(r);return Vl(t,i,n)},$l.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Vl(e,n=an(e).split(";").pop(),t))},$l.verimatrixInitDataTransform=function(e,t,n){return Hl(e,t,n)},$l.initDataTransform=Vl,$l.defaultGetContentId=Gl,$l.isFairPlaySupported=function(){var e;return P(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},k(t,2),S(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(E(t),t.return(!1))})},$("shaka.util.PlayerConfiguration",Xl),Xl.mergeConfigObjects=Kl,Xl.createDefault=Wl,v(Jl,hi),(i=Jl.prototype).getStartTime=function(){return this.A},i.Dc=function(){return this.L},i.gf=function(){return this.h},i.getStats=function(){return this.Z},i.start=function(){var e,t=this;P(function(n){switch(n.g){case 1:return S(n,Promise.resolve(),2);case 2:return k(n,3),S(n,function(e){var t,n,o,i;return P(function(r){if(1==r.g)return nu(e,"manifest-parser"),e.j||(e.F=Zr(e.L,e.U),e.j=e.F(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,nu(e,"manifest"),e.h?r.u(2):S(r,e.j.start(e.L,e.ab),3);if(2!=r.g&&(e.h=r.h),n=new ci("manifestparsed",void 0),e.dispatchEvent(n),0==e.h.variants.length)throw new St(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.h),o=Date.now()/1e3,i=o-t,e.Z.H=i,T(r)})}(t),5);case 5:return tu(t),S(n,function(e){var t,n,o;return P(function(i){switch(i.g){case 1:nu(e,"drm-engine"),e.qa=Date.now()/1e3,e.l=e.Fa(),e.C.g=e.l,e.l.configure(e.g.drm);var r=e.C;if(!fo(e.h.variants,r.h.restrictions,r.i)){i.u(2);break}return t=new ci("trackschanged",void 0),S(i,Promise.resolve(),3);case 3:tu(e),e.dispatchEvent(t);case 2:return n=Lo(e.h.variants),S(i,Cr(e.l,n,e.h.offlineSessionIds),4);case 4:return tu(e),S(i,qr(e.C,e.h),5);case 5:if(!i.h){i.u(0);break}return o=new ci("trackschanged",void 0),S(i,Promise.resolve(),7);case 7:e.dispatchEvent(o),T(i)}})}(t),6);case 6:if(tu(t),t.o||(t.o=new Ko(t.g.preferredAudioLanguage,t.g.preferredVariantRole,t.g.preferredAudioChannelCount,t.g.preferredVideoHdrLevel,t.g.preferSpatialAudio,t.g.preferredVideoLayout,t.g.preferredAudioLabel,t.g.preferredVideoLabel,t.g.mediaSource.codecSwitchingStrategy,t.g.manifest.dash.enableAudioGroups)),t.Ea){var o=t.g.abrFactory;t.B=o,t.i=o(),t.i.configure(t.g.abr)}if(t.Da){o=t.h.presentationTimeline.V();var i=Lo(t.h.variants);i=t.o.create(i),t.i.configure(t.g.abr),t.i.setVariants(Array.from(i.values())),(i=t.i.chooseVariant())&&(t.fa=i,i.video&&ou(t,i.video,o),i.audio&&ou(t,i.audio,o))}return S(n,void 0,7);case 7:tu(t),t.m.resolve(),A(n,0);break;case 3:e=E(n),t.m.reject(e),T(n)}})},i.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):hi.prototype.dispatchEvent.call(this,e)},i.onError=function(e){2===e.severity&&(this.m.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new ci("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},i.configure=function(e,t){e=jl(e,t),Kl(this.g,e)},i.getConfiguration=function(){return lo(this.g)},i.fj=function(){return this.m},i.destroy=function(){var e,t,n=this;return P(function(o){switch(o.g){case 1:if(n.s=!0,!n.j||n.ea){o.u(2);break}return S(o,n.j.stop(),2);case 2:if(!n.i||n.ba){o.u(4);break}return S(o,n.i.stop(),4);case 4:if(n.G&&!n.oa&&n.G.release(),!n.l||n.da){o.u(6);break}return S(o,n.l.destroy(),6);case 6:if(0<n.K.size&&!n.pa)for(e=p(n.K.values()),t=e.next();!t.done;t=e.next())ol(t.value);T(o)}})},$("shaka.media.PreloadManager",Jl),Jl.prototype.destroy=Jl.prototype.destroy,Jl.prototype.waitForFinish=Jl.prototype.fj,v(iu,hi),iu.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,hi.prototype.release.call(this)},iu.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=p(this.i.g),o=n.next();!o.done;o=n.next()){o=o.value;var i=this.g.get(o),r=e<o.startTime?su:e>o.endTime?lu:au;this.g.set(o,r);for(var s=p(this.m),a=s.next();!a.done;a=s.next())(a=a.value).wc==i&&a.vc==r&&a.jc(o,t)}}};var su=1,au=2,lu=3;function uu(e,t,n){var o,i,r,s,a,l,u;return P(function(c){switch(c.g){case 1:var p=new st(e).Pa.split("/").pop().split(".");return o=1==p.length?"":p.pop().toLowerCase(),(i=cu[o])?c.return(i):(r=0,s=bi([e],n),k(c,2),s.method="HEAD",S(c,t.request(r,s).promise,4));case 4:a=c.h,i=a.headers["content-type"],A(c,3);break;case 2:if(!(l=E(c))||1002!=l.code&&1001!=l.code){c.u(3);break}return s.method="GET",S(c,t.request(r,s).promise,6);case 6:u=c.h,i=u.headers["content-type"];case 3:return c.return(i?i.toLowerCase().split(";").shift():"")}})}var cu={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function pu(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return pu(t,e)}).join("");var n=[],o=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");return o&&n.push(["b"]),i&&n.push(["i"]),r&&n.push(["u"]),""==(i=e.color)&&t&&(i=t.color),o="",(i=du(i))&&(o+="."+i),""==(i=e.backgroundColor)&&t&&(i=t.backgroundColor),(t=du(i))&&(o+=".bg_"+t),o&&n.push(["c",o]),n.reduceRight(function(e,t){var n=p(t);return"<"+(t=n.next().value)+(void 0===(n=n.next().value)?"":n)+">"+e+"</"+t+">"},e.payload)}function du(e){var t=(e=e.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function hu(e,t){for(var n=[],o=(e=p(fu(e))).next();!o.done;o=e.next())if((o=o.value).isContainer)n.push.apply(n,d(hu(o.nestedCues,o)));else{var i=o.clone();i.nestedCues=[],i.payload=pu(o,t),n.push(i)}return n}function fu(e){for(var t=[],n=(e=p(e)).next(),o={};!n.done;o={Me:void 0},n=e.next())o.Me=n.value,t.some(function(e){return function(t){return Oe(e.Me,t)}}(o))||t.push(o.Me);return t}function mu(e){function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(o){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),"vertical-lr"==e.writingMode?n.vertical="lr":"vertical-rl"==e.writingMode&&(n.vertical="rl"),1==e.lineInterpretation&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}function gu(e,t){this.g=null;for(var n=p(Array.from(e.textTracks)),o=n.next();!o.done;o=n.next())"metadata"!==(o=o.value).kind&&"chapters"!==o.kind&&(o.mode="disabled",o.label==t&&(this.g=o));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}function yu(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var o=p(Array.from(e.cues)),i=o.next();!i.done;i=o.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}function vu(){}function bu(){}function xu(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function wu(t,n,o){var i=this;this.m=!1,this.h=[],this.A=t,this.s=n,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),o&&o.captionsUpdatePeriod||le("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new Rt(function(){i.A.paused||ku(i)}).Sa(o&&o.captionsUpdatePeriod?o.captionsUpdatePeriod:.25),this.i=new Map,this.j=new te,this.j.D(document,"fullscreenchange",function(){ku(i,!0)}),this.j.D(this.A,"seeking",function(){ku(i,!0)}),this.j.D(this.A,"resize",function(){var e=i.A,t=e.videoWidth;e=e.videoHeight,i.l=t&&e?t/e:null}),this.o=null,"ResizeObserver"in e&&(this.o=new ResizeObserver(function(){ku(i,!0)}),this.o.observe(this.g)),this.B=new Map}function Su(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Tu(e,t,n,o,i){for(var r=!1,s=[],a=[],l=(t=p(t)).next();!l.done;l=t.next()){l=l.value,i.push(l);var u=e.i.get(l),c=l.startTime<=o&&l.endTime>o,d=u?u.qh:null;u&&(s.push(u.Oe),u.qc&&s.push(u.qc),c||(r=!0,e.i.delete(l),u=null)),c&&(a.push(l),u?Su(e,d)||(r=!0):(Cu(e,l,i),d=(u=e.i.get(l)).qh,r=!0)),0<l.nestedCues.length&&d&&Tu(e,l.nestedCues,d,o,i),i.pop()}if(r){for(i=(o=p(s)).next();!i.done;i=o.next())(i=i.value).parentElement&&i.parentElement.removeChild(i);for(a.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),o=(a=p(a)).next();!o.done;o=a.next())(o=e.i.get(o.value)).qc?(o.qc.contains(n)&&o.qc.removeChild(n),n.appendChild(o.qc),o.qc.appendChild(o.Oe)):n.appendChild(o.Oe)}}function ku(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||void 0!==t&&t){for(var o=(t=p(e.B.values())).next();!o.done;o=t.next())xu(o.value);xu(e.g),e.i.clear(),e.B.clear()}e.m&&Tu(e,e.h,e.g,n,[])}}function Cu(e,t,n){var o=1<n.length,i=o?"span":"div";t.lineBreak&&(i="br"),t.rubyTag&&(i=t.rubyTag),o=!o&&0<t.nestedCues.length;var r=document.createElement(i);if("br"!=i&&function(e,t,n,o,i){var r=t.style,s=0==n.nestedCues.length,a=1<o.length;r.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,function(e){return" ".repeat(e.length)});if(r.webkitTextStrokeColor=n.textStrokeColor,r.webkitTextStrokeWidth=n.textStrokeWidth,r.color=n.color,r.direction=n.direction,r.opacity=n.opacity,r.paddingLeft=Au(n.linePadding,n,e.s),r.paddingRight=Au(n.linePadding,n,e.s),r.textCombineUpright=n.textCombineUpright,r.textShadow=n.textShadow,n.backgroundImage)r.backgroundImage="url('"+n.backgroundImage+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",n.backgroundColor&&(r.backgroundColor=n.backgroundColor),r.width="100%",r.height="100%";else{if(n.nestedCues.length)var u=t;else u=document.createElement("span"),t.appendChild(u);n.border&&(u.style.border=n.border),!i&&((t=Eu(o,function(e){return e.backgroundColor}))?u.style.backgroundColor=t:l&&(u.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=Eu(o,function(e){return e.fontFamily}))&&(u.style.fontFamily=t),l&&(u.textContent=l)}a&&!o[o.length-1].isContainer?r.display="inline":(r.display="flex",r.flexDirection="column",r.alignItems="center","left"==n.textAlign||"start"==n.textAlign?(r.width="100%",r.alignItems="start"):"right"!=n.textAlign&&"end"!=n.textAlign||(r.width="100%",r.alignItems="end"),r.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),s||(r.margin="0"),r.fontFamily=n.fontFamily,r.fontWeight=n.fontWeight.toString(),r.fontStyle=n.fontStyle,r.letterSpacing=n.letterSpacing,r.fontSize=Au(n.fontSize,n,e.s),null!=(o=n.line)&&((s=n.lineInterpretation)==Ge&&(s=1,a=16,e.l&&1>e.l&&(a=32),o=0>o?100+o/a*100:o/a*100),1==s&&(r.position="absolute",n.writingMode==$e?(r.width="100%",n.lineAlign==Ve?r.top=o+"%":"end"==n.lineAlign&&(r.bottom=100-o+"%")):"vertical-lr"==n.writingMode?(r.height="100%",n.lineAlign==Ve?r.left=o+"%":"end"==n.lineAlign&&(r.right=100-o+"%")):(r.height="100%",n.lineAlign==Ve?r.right=o+"%":"end"==n.lineAlign&&(r.left=100-o+"%")))),r.lineHeight=n.lineHeight,e=function(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Ne?n:"left"===e||"start"===e&&t===ze||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===ze?"line-right":"center"}(n),"line-left"==e?(r.cssFloat="left",null!==n.position&&(r.position="absolute",n.writingMode==$e?(r.left=n.position+"%",r.width="auto"):r.top=n.position+"%")):"line-right"==e?(r.cssFloat="right",null!==n.position&&(r.position="absolute",n.writingMode==$e?(r.right=100-n.position+"%",r.width="auto"):r.bottom=n.position+"%")):null!==n.position&&50!=n.position&&(r.position="absolute",n.writingMode==$e?(r.left=n.position+"%",r.width="auto"):r.top=n.position+"%"),r.textAlign=n.textAlign,r.textDecoration=n.textDecoration.join(" "),r.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&r.writingMode==n.writingMode||(r.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==$e?r.width=n.size+"%":r.height=n.size+"%")}(e,r,t,n,o),n=null,t.region&&t.region.id){var s=t.region,a=e.l===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==Ee?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==Ee?"%":"px"),e.B.has(n))n=e.B.get(n);else{i=document.createElement("span");var l=s.heightUnits==Ee?"%":"px",u=s.widthUnits==Ee?"%":"px",c=s.viewportAnchorUnits==Ee?"%":"px";i.id="shaka-text-region---"+n,i.classList.add("shaka-text-region"),i.style.position="absolute";var p=s.height,d=s.width;2===s.heightUnits&&(p=5.33*s.height,l="%"),2===s.widthUnits&&(d=s.width*a,u="%"),i.style.height=p+l,i.style.width=d+u,2===s.viewportAnchorUnits?(a=s.viewportAnchorY/75*100,l=s.viewportAnchorX/(e.l===4/3?160:210)*100,a-=s.regionAnchorY*p/100,l-=s.regionAnchorX*d/100,i.style.top=a+"%",i.style.left=l+"%"):(i.style.top=s.viewportAnchorY-s.regionAnchorY*p/100+c,i.style.left=s.viewportAnchorX-s.regionAnchorX*d/100+c),0!==s.heightUnits&&0!==s.widthUnits&&0!==s.viewportAnchorUnits&&(s=Math.max(0,Math.min(100-(parseInt(i.style.width.slice(0,-1),10)||0),parseInt(i.style.left.slice(0,-1),10)||0)),i.style.top=Math.max(0,Math.min(100-(parseInt(i.style.height.slice(0,-1),10)||0),parseInt(i.style.top.slice(0,-1),10)||0))+"%",i.style.left=s+"%"),i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.B.set(n,i),n=i}}i=r,o&&((i=document.createElement("span")).classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",r.appendChild(i)),e.i.set(t,{Oe:r,qh:i,qc:n})}function Au(e,t,n){var o=(o=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(o[1]),unit:o[2]}:null;if(!o)return e;var i=o.value;switch(o.unit){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function Eu(e,t){for(var n=e.length-1;0<=n;n--){var o=t(e[n]);if(o||0===o)return o}return null}function Iu(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}function Mu(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:1,sf:t.m,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Ru(e,t,n){n=void 0===n?{}:n;var o=void 0===o?e.g.useHeaders:o;if(e.g.enabled){Object.assign(n,Mu(e)),n.pr=e.h.eb();var i=n.ot===Nu||n.ot===Uu;if(e.j&&i&&(n.bs=!0,n.su=!0,e.j=!1),null==n.su&&(n.su=e.l),e=function(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(e,o){return n.includes(o)&&(e[o]=t[o]),e},{}):t}(e,n),o)o=function(e){for(var t=Object.keys(e),n={},o=["Object","Request","Session","Status"],i=[{},{},{},{}],r={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=(t=p(t)).next();!s.done;s=t.next())s=s.value,i[null!=r[s]?r[s]:1][s]=e[s];for(e=0;e<i.length;e++)(r=Lu(i[e]))&&(n["CMCD-"+o[e]]=r);return n}(e),Object.keys(o).length&&Object.assign(t.headers,o);else{var r=Lu(e);r&&(t.uris=t.uris.map(function(e){return Du(e,r)}))}}}function _u(e,t){if(!(t=e.h.wb()[t]).length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):0}function Lu(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function o(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var i=[],r={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},s=Object.keys(e||{}).sort(),a=(s=p(s)).next();!a.done;a=s.next()){var l=e[a=a.value];if(o(l)&&("v"!==a||1!==l)&&("pr"!=a||1!==l)){var u,c=r[a];c&&(l=c(l)),u="string"==(c=typeof l)&&"ot"!==a&&"sf"!==a&&"st"!==a?a+"="+JSON.stringify(l):"boolean"===c?a:"symbol"===c?a+"="+l.description:a+"="+l,i.push(u)}}return i.join(",")}function Du(e,t){return!t||e.includes("offline:")?e:((e=new st(e)).g.set("CMCD",t),e.toString())}(i=gu.prototype).configure=function(){},i.remove=function(e,t){return!!this.g&&(yu(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},i.append=function(e){var t=hu(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var o=(t=p(t)).next(),i={};!o.done;i={hd:void 0},o=t.next())i.hd=o.value,e.some(function(e){return function(t){return t.startTime==e.hd.startTime&&t.endTime==e.hd.endTime&&t.text==e.hd.payload}}(i))||(o=mu(i.hd))&&n.push(o);for(t=(e=p(e=n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}))).next();!t.done;t=e.next())this.g.addCue(t.value)},i.destroy=function(){return this.g&&(yu(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.g.mode},i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},$("shaka.text.SimpleTextDisplayer",gu),gu.prototype.setTextVisibility=gu.prototype.setTextVisibility,gu.prototype.isTextVisible=gu.prototype.isTextVisible,gu.prototype.destroy=gu.prototype.destroy,gu.prototype.append=gu.prototype.append,gu.prototype.remove=gu.prototype.remove,gu.prototype.configure=gu.prototype.configure,(i=vu.prototype).configure=function(){},i.remove=function(){},i.append=function(){},i.destroy=function(){},i.isTextVisible=function(){return!1},i.setTextVisibility=function(){},$("shaka.text.StubTextDisplayer",vu),vu.prototype.setTextVisibility=vu.prototype.setTextVisibility,vu.prototype.isTextVisible=vu.prototype.isTextVisible,vu.prototype.destroy=vu.prototype.destroy,vu.prototype.append=vu.prototype.append,vu.prototype.remove=vu.prototype.remove,vu.prototype.configure=vu.prototype.configure,$("shaka.util.Dom",bu),bu.removeAllChildren=xu,(i=wu.prototype).configure=function(e){this.C&&this.C.Sa(e.captionsUpdatePeriod)},i.append=function(e){for(var t=[].concat(d(this.h)),n=(e=p(fu(e))).next(),o={};!n.done;o={Ne:void 0},n=e.next())o.Ne=n.value,t.some(function(e){return function(t){return Oe(t,e.Ne)}}(o))||this.h.push(o.Ne);ku(this)},i.destroy=function(){return this.g?(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null),Promise.resolve()):Promise.resolve()},i.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(n){return n.startTime<e||n.endTime>=t}),ku(this,n>this.h.length),!0},i.isTextVisible=function(){return this.m},i.setTextVisibility=function(e){this.m=e},$("shaka.text.UITextDisplayer",wu),wu.prototype.setTextVisibility=wu.prototype.setTextVisibility,wu.prototype.isTextVisible=wu.prototype.isTextVisible,wu.prototype.remove=wu.prototype.remove,wu.prototype.destroy=wu.prototype.destroy,wu.prototype.append=wu.prototype.append,wu.prototype.configure=wu.prototype.configure,$("shaka.text.WebVttGenerator",function(){}),Iu.prototype.configure=function(e){this.g=e};var Pu="m",Ou="a",Nu="v",Uu="av",Bu="i",ju="c",Fu="tt";function zu(e){this.h=e,this.g=null}function $u(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}$("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Kj:"s",OTHER:"o"}),(i=zu.prototype).configure=function(e){this.h=e},i.zg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Vu)?1e3*this.g.get(Vu):null},i.xg=function(){return this.h.enabled&&this.g&&this.g.has(Gu)?1e3*this.g.get(Gu):null},i.Yh=function(){return this.h.enabled&&this.g&&this.g.has(Hu)?this.g.get(Hu):null},i.Zh=function(){return this.h.enabled&&this.g&&this.g.has(qu)?this.g.get(qu):null},i.getBandwidthEstimate=function(e){var t=this.xg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e},$("shaka.util.CmsdManager",zu),zu.prototype.getBandwidthEstimate=zu.prototype.getBandwidthEstimate,zu.prototype.getRoundTripTime=zu.prototype.Zh,zu.prototype.getResponseDelay=zu.prototype.Yh,zu.prototype.getEstimatedThroughput=zu.prototype.xg,zu.prototype.getMaxBitrate=zu.prototype.zg;var Gu="etp",Vu="mb",Hu="rd",qu="rtt";function Xu(){this.g=null,this.h=[]}function Wu(e,t){return P(function(n){if(1==n.g)return e.g?S(n,new Promise(function(t){return e.h.push(t)}),2):n.u(2);e.g=t,T(n)})}function Ku(t,n){hi.call(this);var o=this;this.l=Vc,this.de=this.h=null,this.oa=!1,this.qe=new te,this.gd=new te,this.m=new te,this.Fa=new te,this.ub=new te,this.C=this.G=this.B=this.H=null,this.te=0,this.Z=new Xu,this.pa=this.ag=this.da=this.i=this.ab=this.F=this.j=this.Zc=this.K=this.eg=this.ea=this.N=this.dd=this.L=this.he=this.I=this.Fb=null,this.Ea=!1,this.xa=this.o=null,this.cg=1e9,this.qd=[],this.U=NaN,this.g=bc(this),this.R=null,this.ze=-1,this.Da=null,this.fa={width:1/0,height:1/0},this.be=new Hr(this.g,this.fa,null),this.ke=[],this.s=null,this.za=new Ko(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Db=this.g.preferredTextLanguage,this.pd=this.g.preferredTextRole,this.od=this.g.preferForcedSubs,this.md=[],n&&n(this),this.N=function(e){return new Iu({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},wb:function(){return e.wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},eb:function(){return e.eb()},xb:function(){return e.xb()},ic:function(){return e.ic()},V:function(){return e.V()}},e.g.cmcd)}(this),this.ea=new zu(this.g.cmsd),this.H=lc(this),this.H.Pf(this.g.streaming.forceHTTP),this.H.Qf(this.g.streaming.forceHTTPS),this.Gb=this.ba=this.A=null,this.Ce=!1,this.dg=new Rt(function(){return P(function(e){return 1==e.g?o.ba?S(e,o.Rb(o.Gb,!0),3):e.u(0):4!=e.g?S(e,o.load(o.ba),4):(o.Ce?o.Gb.pause():o.Gb.play(),o.ba=null,o.Ce=!1,void T(e))})}),Kc&&(this.A=Kc(),this.A.configure(this.g.ads),this.ub.D(this.A,"ad-content-pause-requested",function(e){var t;return P(function(n){if(1==n.g)return o.dg.stop(),o.ba?n.u(0):(o.Gb=o.h,o.Ce=o.h.ended,t=e.saveLivePosition||!1,S(n,o.qg(!0,t),3));o.ba=n.h,T(n)})}),this.ub.D(this.A,"ad-content-resume-requested",function(e){if(e=e.offset||0,o.ba){var t=o.ba;t.A&&e&&(t.A+=e)}o.dg.Y(.1)}),this.ub.D(this.A,"ad-content-attach-requested",function(){return P(function(e){return o.h||!o.Gb?e.u(0):S(e,o.Rb(o.Gb,!0),0)})})),this.qe.D(e,"online",function(){Pc(o),o.If()}),this.je=new Rt(function(){for(var e=Date.now()/1e3,t=!1,n=!0,i=p(o.i.variants),r=i.next();!r.done;r=i.next())0<(r=r.value).disabledUntilTime&&r.disabledUntilTime<=e&&(r.disabledUntilTime=0,t=!0),0<r.disabledUntilTime&&(n=!1);n&&o.je.stop(),t&&Ac(o,!1,void 0,!1,!1)}),this.qa=null,t&&(le("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Rb(t,!0))}function Yu(e){null!=e.K&&(Ks(e.K),e.K.release(),e.K=null)}function Qu(e,t){return new ci(e,t)}function Ju(e,t){e.dispatchEvent(Qu("onstatechange",(new Map).set("state",t)))}function Zu(e,t){var n;return P(function(o){return 1==o.g?(n=++e.te,S(o,Wu(e.Z,t),2)):n!=e.te?(e.Z.release(),o.return(!0)):o.return(!1)})}function ec(e,t){var n,o;return t=void 0!==t&&t,P(function(i){if(1==i.g)return n=null,e.i&&e.F&&e.ab&&e.da?(o=e.h.currentTime,e.V()&&!t&&(o=null),S(i,nc(e,e.da,o,e.ag,!0,!1,!1),3)):i.u(2);if(2!=i.g){n=i.h,e.ke.push(n),e.F&&e.F.setMediaElement&&e.F.setMediaElement(null);var r=n,s=e.F,a=e.ab;r.h=e.i,r.j=s,r.F=a,r=n,s=e.xa,r.i=e.o,r.B=s,n.o=e.za,n.start(),e.i=null,e.F=null,e.ab=null,e.o=null,e.xa=null}return i.return(n)})}function tc(e,t,n,o,i){var r,s,a;return i=void 0!==i&&i,P(function(l){return 1==l.g?o?l.u(2):S(l,oc(e,t),3):(2!=l.g&&(o=l.h),function(e,t){if(!_t())return!0;if(t){if(""==(e.h||Jt()).canPlayType(t))return!1;if(!_t()||!(t in es))return!0;if(Fn(t))return $t()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}(e,o)?l.return(null):(r=!1,s=!0,i&&(e.o&&e.xa==e.g.abrFactory&&(s=!1),e.h&&"AUDIO"===e.h.nodeName&&(r=!0)),a=nc(e,t,n,o||null,!i,r,s),i||(a=a.then(function(t){return e.ke.push(t),t})),l.return(a)))})}function nc(e,t,n,o,i,r,s){var a,l,u,c,d,h,f,m,g,y,v,b,x;return i=void 0===i||i,r=void 0!==r&&r,s=void 0===s||s,P(function(w){return 1==w.g?(a=null,l=lo(e.g),r&&(l.manifest.disableVideo=!0),u=function(){return a.R&&a.s?null:a},c=function(){return u()?u().getConfiguration():e.g},d=function(t,n){u()?a.configure(t,n):e.configure(t,n)},1/0!=e.fa.width||1/0!=e.fa.height?w.u(2):S(w,en(),3)):(2!=w.g&&(h=w.h,e.fa.width=h.width,e.fa.height=h.height),f=new Hr(l,e.fa,null),m={networkingEngine:e.H,filter:function(e){var t;return P(function(n){return 1==n.g?S(n,qr(f,e),2):4!=n.g?n.h?(t=Qu("trackschanged"),S(n,Promise.resolve(),4)):n.u(0):(a.dispatchEvent(t),void T(n))})},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,o=p(t.textStreams),i=o.next();!i.done;i=o.next())"application/cea-608"!=(i=i.value).mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(o=p(t.variants),i=o.next();!i.done;i=o.next())if((i=i.value.video)&&i.closedCaptions)for(var r=p(i.closedCaptions.keys()),s=r.next();!s.done;s=r.next())if(s=s.value,!n.has(s)){var a=s.startsWith("CC")?"application/cea-608":"application/cea-708",l=new $a,u=i.closedCaptions.get(s);a={id:e.cg++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:a,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:u,originalLanguage:u,label:null,type:An,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([_n(a,"")])},t.textStreams.push(a),n.add(s)}}(e,t)},onTimelineRegionAdded:function(e){var t=a.G;e:{for(var n=p(t.g),o=n.next();!o.done;o=n.next())if((o=o.value).schemeIdUri==e.schemeIdUri&&o.id==e.id&&o.startTime==e.startTime&&o.endTime==e.endTime){n=o;break e}n=null}null==n&&(t.g.add(e),e=new ci("regionadd",new Map([["region",e]])),t.dispatchEvent(e))},onEvent:function(e){return a.dispatchEvent(e)},onError:function(e){return a.onError(e)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return c().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){d("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&a.R&&e.j.updateDuration()},newDrmInfo:function(e){var t=a.l,n=t?t.g:null;n&&t.s&&Kr(f,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.V());a.dispatchEvent(Qu("manifestupdated",t)),Zl(a,!1,function(){e.A&&e.A.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(t,n,o,i){var r=t;"com.apple.hls.interstitial"==t&&(r="com.apple.quicktime.HLS",t={startTime:n,endTime:o,values:i},e.A)&&e.A.onInterstitialMetadata(e,e.h,t),t=(i=p(i)).next();for(var s={};!t.done;s={Pg:void 0},t=i.next())s.Pg=t.value,Zl(a,!1,function(t){return function(){sc(e,n,o,r,t.Pg)}}(s))},disableStream:function(t){return e.disableStream(t,e.g.streaming.maxDisabledTime)}},(g=new ul(function(){return e.Ob()})).addEventListener("regionadd",function(t){var n=t.region;Nc(e,"timelineregionadded",n,a),Zl(a,!1,function(){e.A&&e.A.onDashTimedMetadata(n)})}),y=null,l.streaming.observeQualityChanges&&((y=new cl(function(){return e.wb()})).addEventListener("qualitychange",function(t){Uc(e,t.quality,t.position)}),y.addEventListener("audiotrackchange",function(t){Uc(e,t.quality,t.position,!0)})),v=!0,b={Lb:e.H,onError:function(e){return a.onError(e)},ee:function(t){Zl(a,!0,function(){var n=t,o=Qu("keystatuschanged");e.dispatchEvent(o);var i=Object.keys(n);1==i.length&&""==i[0]&&(i=["00"],n={"00":n[""]}),o=1==i.length&&"00"==i[0];var r=!1;if(i.length)for(var s=(i=p(e.i.variants)).next();!s.done;s=i.next()){var a=[];(s=s.value).audio&&a.push(s.audio),s.video&&a.push(s.video);for(var l=(a=p(a)).next();!l.done;l=a.next()){var u=l.value;if(l=s.allowedByKeySystem,u.keyIds.size){s.allowedByKeySystem=!0;for(var c=(u=p(u.keyIds)).next();!c.done;c=u.next())c=c.value,((c=n[o?"00":c])||e.B.F)&&(s.allowedByKeySystem=s.allowedByKeySystem&&!!c&&!Qr.includes(c))}l!=s.allowedByKeySystem&&(r=!0)}}r&&(Mc(e),!Cc(e))||(n=e.j.j)&&!n.allowedByKeySystem&&Ac(e)})},onExpirationUpdated:function(e,t){var n=Qu("expirationupdated");a.dispatchEvent(n),(n=a.j)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){a.dispatchEvent(t),"drmsessionupdate"==t.type&&v&&(v=!1,t=Date.now()/1e3-a.qa,(e.s||a.getStats()).j=t,e.K&&Ks(e.K))}},x=lc(e,u),vi(e.H,x),a=new Jl(t,o,n,{config:l,wi:m,Fi:g,Ei:y,yc:function(){return e.yc(b)},vi:f,networkingEngine:x,yh:i,xh:s}),w.return(a))})}function oc(e,t){var n,o;return P(function(i){return 1==i.g?(n=e.g.manifest.retryParameters,S(i,uu(t,e.H,n),2)):("application/x-mpegurl"==(o=i.h)&&$t()&&(o="application/vnd.apple.mpegurl"),i.return(o))})}function ic(e){var t,n,o,i,r;return P(function(s){if(1==s.g)return Ju(e,"media-source"),t=e.g.textDisplayFactory,(n=t()).configure?n.configure(e.g.textDisplayer):le("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.bg=t,o=function(e,t,n,o){return new Qs(e,t,n,o)}(e.h,n,{Qh:function(){return e.keySystem()},onMetadata:function(t,n,o){rc(e,t,n,o)}},e.K),o.configure(e.g.mediaSource),i=e.g.manifest,r=i.segmentRelativeVttTiming,o.fa=r,S(s,o.L,2);e.G=o,T(s)})}function rc(e,t,n,o){for(var i=(t=p(t)).next();!i.done;i=t.next())if((i=i.value).data&&"number"==typeof i.cueTime&&i.frames){var r=i.cueTime+n,s=o;s&&r>s&&(s=r);for(var a=p(i.frames),l=a.next();!l.done;l=a.next())sc(e,r,s,"org.id3",l.value);e.A&&e.A.onHlsTimedMetadata(i,r)}}function sc(e,t,n,o,i){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",o).set("payload",i),e.dispatchEvent(Qu("metadata",t))}function ac(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new Rt(function(){t.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}function lc(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function o(e){t()?Zl(t(),!0,e):e()}return t||(t=function(){return null}),new gi(function(n,o,i,r){var s=t()?t().i:e.o;s&&s.segmentDownloaded(n,o,i,r)},function(t,i,r){n(Qu("downloadheadersreceived",i=(new Map).set("headers",t).set("request",i).set("requestType",r))),o(function(){if(e.ea){var n=e.ea;if(n.h.enabled){var o=t["cmsd-static"];if(o)try{var i=new Map,r=o.split(",");for(o=0;o<r.length;o++){var s=r[o].split("=");i.set(s[0],$u(s[1]))}}catch(p){}if(i=t["cmsd-dynamic"]){try{var a=new Map,l=i.split(";");for(i=1;i<l.length;i++){var u=l[i].split("=");a.set(u[0],$u(u[1]))}var c=a}catch(p){c=null}c&&(n.g=c)}}}})},function(e,t,o,i){n(Qu("downloadfailed",e=(new Map).set("request",e).set("error",t).set("httpResponseCode",o).set("aborted",i)))},function(t,n,i){o(function(){var o=e.N,r=i;if(r=void 0===r?{}:r,o.g.enabled)if("HEAD"===n.method)Ru(o,n);else switch(t){case 0:try{if(o.g.enabled){if(r.type){e:{switch(r.type){case 4:var s="d";break e;case 3:case 2:s="h";break e;case 5:s="s";break e}s=void 0}o.m=s}Ru(o,n,{ot:Pu,su:!o.i})}}catch(I){Q("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",I)}break;case ki:try{if(o.g.enabled){var a=r.segment;s=0,a&&(s=a.endTime-a.startTime);var l={d:1e3*s,st:o.h.V()?"l":"v"};l.ot=function(e){if(0===e.type)return Bu;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?Uu:Nu;if("audio"==t)return Ou;if("text"==t)return"application/mp4"===e.mimeType?Fu:ju}}(r);var u=l.ot===Nu||l.ot===Ou||l.ot===Uu||l.ot===Fu,c=r.stream;if(c){var d=o.h.eb();if(u&&(l.bl=function(e,t){if(!(t=e.h.wb()[t]).length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}(o,c.type),l.ot!==Fu)){var h=_u(o,c.type);l.dl=d?h/Math.abs(d):h}if(c.bandwidth&&(l.br=c.bandwidth/1e3),c.segmentIndex&&a){var f=c.segmentIndex.Ib(a.endTime,!0,0>d);if(f){var m=f.next().value;if(m&&m!=a){if(!Le(a.M(),m.M())){var g=m.M()[0],y=n.uris[0],v=new URL(g),b=new URL(y);if(v.origin!==b.origin)var x=g;else{for(var w=v.pathname.split("/").slice(1),S=b.pathname.split("/").slice(1,-1);w[0]===S[0];)w.shift(),S.shift();for(;S.length;)S.shift(),w.unshift("..");x=w.join("/")}l.nor=x}if((m.Ha||m.sa)&&(a.Ha!=m.Ha||a.sa!=m.sa)){var T=m.Ha+"-";m.sa&&(T+=m.sa),l.nrr=T}}}var k=o.h.eb()||1,C=_u(o,c.type)||500,A=c.bandwidth,E=A?A*(a.endTime-a.startTime)/1e3/(C/k/1e3)*o.g.rtpSafetyFactor:NaN;isNaN(E)||(l.rtp=E)}}u&&l.ot!==Fu&&(l.tb=function(e,t){var n=e.h.ic();if(!n.length)return NaN;e=n[0];for(var o=(n=p(n)).next();!o.done;o=n.next())"variant"===(o=o.value).type&&o.bandwidth>e.bandwidth&&(e=o);switch(t){case Nu:return e.videoBandwidth||NaN;case Ou:return e.audioBandwidth||NaN;default:return e.bandwidth}}(o,l.ot)/1e3),Ru(o,n,l)}}catch(I){Q("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",I)}break;case 2:case 5:case 6:Ru(o,n,{ot:"k"});break;case 4:Ru(o,n,{ot:"o"})}})},function(n,o,i,r){(n=t()?t().j:e.F)&&n.banLocation&&n.banLocation(r)},function(n,o){if(o.data){o=o.data.byteLength;var i=t()?t().getStats():e.s;i&&(i.Cd=isNaN(i.Cd)?o:i.Cd+o,0===n&&(i.Hg=o))}})}function uc(e,t,n){e.L=new Yo,e.L.g=Jo,Qo(e.L,n,Math.min(.5,n/2)),xc(e),e.he=new Rt(function(){cc(e)}).Sa(.25),e.m.D(t,"waiting",function(){return cc(e)}),e.m.D(t,"stalled",function(){return cc(e)}),e.m.D(t,"canplaythrough",function(){return cc(e)}),e.m.D(t,"progress",function(){return cc(e)})}function cc(e){switch(e.l){case qc:if(e.h.ended)var t=!0;else{var n=ps(e.h.buffered);t=null!=n&&n>=e.h.duration-1}break;case Hc:e:if(e.h.ended||ta(e.G))t=!0;else{if(e.i.presentationTimeline.V()){n=e.i.presentationTimeline.Wb();var o=ps(e.h.buffered);if(null!=o&&o>=n){t=!0;break e}}t=!1}break;default:t=!1}o=hs(e.h.buffered,e.h.currentTime);var i=t,r=(n=e.L).i.get(n.g);t=n.g,o=i||o>=r?Zo:Jo,n.g=o,(t=t!=o)&&o===Zo&&(n.h=Date.now()),t&&xc(e)}function pc(e){if(e.be=new Hr(e.g,e.fa,e.B),e.F){var t=lo(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0),e.F.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=Gc&&Xr(e.be,e.i)&&Mc(e)}catch(r){Oc(e,r)}e.o&&Cc(e),!(t=e.j.j)||t.allowedByApplication&&t.allowedByKeySystem||Ac(e)}if(e.H&&(e.H.Pf(e.g.streaming.forceHTTP),e.H.Qf(e.g.streaming.forceHTTPS)),e.G)if(e.G.configure(e.g.mediaSource),e.G.fa=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.bg!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):le("Text displayer w/ configure",'Text displayer should have a "configure" method!');var o=e.G,i=o.F;o.F=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),o.g&&(o.g.j=n),e.bg=t,e.j&&(n=(t=e.j).i.get(An))&&Sl(t,n.stream,!0,0,!0)}else(t=e.G.F).configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),Dc(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Qo(e.L,t,Math.min(.5,t/2))),e.i&&jc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}function dc(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{dc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function hc(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function fc(e){return Array.from(e.h.textTracks).filter(function(e){return"chapters"==e.kind})}function mc(e,t){var n;return P(function(o){switch(o.g){case 1:return k(o,2),S(o,uu(t,e.H,e.g.streaming.retryParameters),4);case 4:n=o.h,A(o,3);break;case 2:E(o);case 3:if(n)return o.return(n);throw new St(1,2,2011,t)}})}function gc(e,t,n,o,i,r,s){var a,l,u,c;return P(function(p){if(1==p.g)return"text/vtt"!=i||s.length?S(p,yc(e,t,e.H,e.g.streaming.retryParameters),3):p.u(2);2!=p.g&&(a=p.h,l=vc(e,a,i,s),u=new Blob([l],{type:"text/vtt"}),t=ya(u),i="text/vtt"),c=document.createElement("track");var d=e.N,h=t;try{if(d.g.enabled){var f=Mu(d);f.ot=ju,f.su=!0;var m=Du(h,Lu(f))}else m=h}catch(Wr){Q("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Wr),m=h}return c.src=m,c.label=r,c.kind=o,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),p.return(c)})}function yc(e,t,n,o){var i,r,s;return P(function(a){if(1==a.g){i=ki,(r=bi([t],o)).method="GET";var l=e.N;try{l.g.enabled&&Ru(l,r,{ot:ju,su:!0})}catch(u){Q("CMCD_TEXT_ERROR","Could not generate text CMCD data.",u)}return S(a,n.request(i,r).promise,2)}return s=a.h,a.return(s.data)})}function vc(e,t,n,o){var i=Wn[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=ve(t),function(e,t){function n(e){for(var n=e,o=p(t),i=o.next();!i.done;i=o.next())(i=i.value).end&&i.start<e&&(n+=i.end-i.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(o=Math.floor(n/60%60))?"0":"")+o+":"+(10>(i=Math.floor(n%60))?"0":"")+i+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}var o=hu(e);e="WEBVTT\n\n";for(var i=(o=p(o)).next();!i.done;i=o.next())e+=n((i=i.value).startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case Ue:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}(t=n.parseMedia(t,e,null),o);throw new St(2,2,2014,n)}function bc(e){var t=Wl();return t.streaming.failureCallback=function(t){if(e.V()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.If(n))}},t.textDisplayFactory=function(){if(e.de){var t=e.getConfiguration();return new wu(e.h,e.de,t.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new gu(e.h,"Shaka Player TextTrack"):new vu},t}function xc(e){var t=e.pf();if(e.s&&e.L&&e.C){var n=e.I;if(n.j=t,Va(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),Sc(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.ze<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var o=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.ze*i,n-o))}}t=(new Map).set("buffering",t),e.dispatchEvent(Qu("buffering",t))}function wc(e){var t=e.h.playbackRate;0!=t&&(e.I&&e.I.set(t),t=Qu("ratechange"),e.dispatchEvent(t))}function Sc(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Jo?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var o=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:o,duration:0},t=!0;else{var i=Date.now()/1e3;t.g.duration=i-t.g.timestamp,t.g.state==o?t=!1:(t.h.push(t.g),t.g={timestamp:i,state:o,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Qu("statechanged",n)))}}function Tc(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var o=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,i=e.vg();i<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=o&&e.wd(o):1==i&&t!==e.I.hc()&&e.Tc()}if(n&&(n=e.Ob(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){o=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var r=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,a=s+o,l=Math.max(0,s-o),u=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,null!=e.i.serviceDescription.targetLatency?a=e.i.serviceDescription.targetLatency+o:null!=e.i.serviceDescription.maxLatency&&(a=e.i.serviceDescription.maxLatency),null!=e.i.serviceDescription.targetLatency?l=Math.max(0,e.i.serviceDescription.targetLatency-o):null!=e.i.serviceDescription.minLatency&&(l=e.i.serviceDescription.minLatency),u=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||"number"!=typeof s||(e.R=s);var p=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;i&&e.Da&&null!==e.R&&"number"==typeof s&&e.ze<p&&Date.now()-e.Da>1e3*r&&(r=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(s-r)/2,r+o),e.Da=Date.now()),i&&null!==e.R&&(a=e.R+o,l=e.R-o),s=n.end-e.h.currentTime,o=0,e.l==qc&&0<(i=e.h.buffered).length&&(o=i.end(i.length-1),o=Math.max(u,o-n.end)),n=e.g.streaming.liveSync.panicMode,i=1e3*e.g.streaming.liveSync.panicThreshold,r=Date.now()-e.L.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&r<=i?t!=c&&e.wd(c):a&&u&&s-o>a?(t!=u&&e.wd(u),e.Da=null):l&&c&&s-o<l?(t!=c&&e.wd(c),e.Da=null):t!==e.I.hc()&&(e.Tc(),e.Da=Date.now())}}function kc(e){if(e.h){var t,n=!1,o=e.h.currentTime/e.h.duration;isNaN(o)||(o=Math.round(100*o),isNaN(e.U)?(e.U=o,n=!0):(o=Math.max(e.U,o),e.U!=o&&(e.U=o,n=!0))),n&&(0==e.U?t=Qu("started"):25==e.U?t=Qu("firstquartile"):50==e.U?t=Qu("midpoint"):75==e.U?t=Qu("thirdquartile"):100==e.U&&(t=Qu("complete")),t&&e.dispatchEvent(t))}}function Cc(e){try{Yr(e.be,e.i)}catch(n){return Oc(e,n),!1}var t=Lo(e.i.variants);return t=e.za.create(t),e.o.setVariants(Array.from(t.values())),!0}function Ac(e,t,n,o,i){var r;t=void 0===t||t,n=void 0===n?0:n,o=void 0!==o&&o,i=void 0===i||i,(r=Cc(e)?e.o.chooseVariant():null)&&Ec(e,r,i,t,n,o)}function Ec(e,t,n,o,i,r){r=void 0!==r&&r;var s=e.j.j;if(t==s)o&&xl(e.j,t,o,i,!0);else{var a=e.s.h;a.h!=t&&(a.h=t,a.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),xl(e.j,t,o,i,r,n),o=null,s&&(o=ko(s)),t=ko(t),n?(n=(new Map).set("oldTrack",o).set("newTrack",t),e.K&&Ys(e.K,t,e.hf()),Fc(e,n=Qu("adaptation",n))):Rc(e,o,t)}}function Ic(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),Rc(e,n=Mo(n),t=Mo(t)))}function Mc(e){Fc(e,Qu("trackschanged"))}function Rc(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.K&&Ys(e.K,n,e.hf()),Fc(e,n=Qu("variantchanged",t))}function _c(e){Fc(e,Qu("textchanged"))}function Lc(e){Fc(e,Qu("texttrackvisibility"))}function Dc(e){e.g.abr.enabled||Pc(e),Fc(e,Qu("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function Pc(e,t){if(t=void 0===t||t,e.l==Hc){e.je.stop();for(var n=p(e.i.variants),o=n.next();!o.done;o=n.next())o.value.disabledUntilTime=0;t&&Cc(e)}}function Oc(e,t){var n,o,i;return P(function(r){switch(r.g){case 1:if(e.l==Gc)return r.return();if(1===t.severity&&e.s.K++,n=!0,!(e.Ea&&e.i&&e.j)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3018!=t.code){r.u(2);break}return k(r,3),S(r,function(e){var t,n,o,i,r,s;return P(function(a){return 1==a.g?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?a.return(!1):(e.K=t,o=En,(i=e.i.get(o.X))&&(i.lc=null,Tl(e,i),Ol(i).catch(function(){})),(r=e.i.get(o.ga))&&(r.lc=null,Tl(e,r),Ol(r).catch(function(){})),s=new Map,e.j.audio&&s.set(o.X,e.j.audio),e.j.video&&s.set(o.ga,e.j.video),S(a,ga(e.g.aa,s),2))):a.return(!0)})}(e.j),5);case 5:o=r.h,n=!o,A(r,2);break;case 3:E(r),n=!0;case 2:if(!n)return r.return();2===t.severity&&Pc(e,!1),i=Qu("error",(new Map).set("detail",t)),e.dispatchEvent(i),i.defaultPrevented&&(t.handled=!0),T(r)}})}function Nc(e,t,n,o){o=void 0===o?e:o,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),o.dispatchEvent(Qu(t,e))}function Uc(e,t,n,o){o=void 0!==o&&o,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Qu(o?"audiotrackchanged":"mediaqualitychanged",t))}function Bc(e,t){if(t=void 0===t||t,!e.h.error)return t?new St(2,3,3016):null;var n=e.h.error.code;return t||1!=n?((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new St(2,3,3016,n,t,e.h.error.message)):null}function jc(e,t,n){0<t&&(e.V()||e.hh(t)),n<(t=e.getDuration())&&(e.V()||e.Za(n))}function Fc(e,t){P(function(n){if(1==n.g)return S(n,Promise.resolve(),2);e.l!=Gc&&e.dispatchEvent(t),T(n)})}function zc(e){for(var t=new Set,n=(e=p(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(no(n.language)):t.add("und");return t}function $c(e){for(var t=new Map,n=new Map,o=(e=p(e)).next();!o.done;o=e.next()){var i="und",r=[];(o=o.value).language&&(i=no(o.language)),(r="variant"==o.type?o.audioRoles:o.roles)&&r.length||(r=[""]),t.has(i)||t.set(i,new Set);for(var s=(r=p(r)).next();!s.done;s=r.next())s=s.value,t.get(i).add(s),o.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(s,o.label))}var a=[];return t.forEach(function(e,t){for(var o=(e=p(e)).next();!o.done;o=e.next()){o=o.value;var i=null;n.has(t)&&n.get(t).has(o)&&(i=n.get(t).get(o)),a.push({language:t,role:o,label:i})}}),a}Xu.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null},v(Ku,hi),(i=Ku.prototype).destroy=function(){var e,t=this;return P(function(n){switch(n.g){case 1:return t.l==Gc?n.return():(Yu(t),e=t.detach(),t.l=Gc,S(n,e,2));case 2:return S(n,t.Qe(),3);case 3:if(t.qe&&(t.qe.release(),t.qe=null),t.gd&&(t.gd.release(),t.gd=null),t.m&&(t.m.release(),t.m=null),t.Fa&&(t.Fa.release(),t.Fa=null),t.ub&&(t.ub.release(),t.ub=null),t.xa=null,t.g=null,t.s=null,t.de=null,t.N=null,t.ea=null,!t.H){n.u(4);break}return S(n,t.H.destroy(),5);case 5:t.H=null;case 4:t.o&&(t.o.release(),t.o=null),hi.prototype.release.call(t),T(n)}})},i.Rb=function(e,t){t=void 0===t||t;var n,o,i,r=this;return P(function(s){switch(s.g){case 1:if(r.l==Gc)throw new St(2,7,7e3);if(n=r.h&&r.h==e,!r.h||r.h==e){s.u(2);break}return S(s,r.detach(),2);case 2:return S(s,Zu(r,"attach"),4);case 4:if(s.h)return s.return();if(k(s,5,6),n||(Ju(r,"attach"),o=function(){var e=Bc(r,!1);e&&Oc(r,e)},r.gd.D(e,"error",o),r.h=e),!t||!_t()||r.G){s.u(6);break}return S(s,ic(r),6);case 6:I(s),r.Z.release(),M(s,0);break;case 5:return i=E(s),S(s,r.detach(),10);case 10:throw i}})},i.zh=function(e){this.eg=e},i.detach=function(e){e=void 0!==e&&e;var t=this;return P(function(n){if(1==n.g){if(t.l==Gc)throw new St(2,7,7e3);return S(n,t.bc(!1,e),2)}if(3!=n.g)return S(n,Zu(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.gd.Ra(),t.h=null),Ju(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Z.release()}T(n)})},i.bc=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,o,i,r,s,a,l,u,c,d,h=this;return P(function(f){switch(f.g){case 1:return h.l!=Gc&&(h.l=Vc),S(f,Zu(h,"unload"),2);case 2:return f.h?f.return():(C(f,3),h.Ea=!1,Ju(h,"unload"),e&&!_t()&&(e=!1),Yu(h),n=h.md.map(function(e){return e()}),h.md=[],S(f,Promise.all(n),5));case 5:if(h.dispatchEvent(Qu("unloading")),h.dd&&(h.dd.release(),h.dd=null),h.h&&(h.m.Ra(),h.Fa.Ra()),h.je.stop(),h.Fb&&(h.Fb.release(),h.Fb=null),h.he&&(h.he.stop(),h.he=null),!h.F){f.u(6);break}return S(f,h.F.stop(),7);case 7:h.F=null,h.ab=null;case 6:if(!h.o){f.u(8);break}return S(f,h.o.stop(),8);case 8:if(!h.j){f.u(10);break}return S(f,h.j.destroy(),11);case 11:h.j=null;case 10:if(h.I&&(h.I.release(),h.I=null),h.C&&(h.C.release(),h.C=null),!Zt("webkit")||!h.B){f.u(12);break}return S(f,h.B.destroy(),13);case 13:h.B=null;case 12:if(!h.G){f.u(14);break}return S(f,h.G.destroy(),15);case 15:h.G=null;case 14:if(h.A&&!t&&h.A.onAssetUnload(),h.ba&&!t&&(h.ba.destroy(),h.ba=null),t||h.dg.stop(),h.N&&function(e){e.i=!1,e.l=!0,e.j=!1}(h.N),h.ea&&(h.ea.g=null),h.h&&xu(h.h),!h.h||!h.h.src){f.u(16);break}return S(f,new Promise(function(e){return new Rt(e).Y(.1)}),17);case 17:h.h.removeAttribute("src"),h.h.load();case 16:if(!h.B){f.u(18);break}return S(f,h.B.destroy(),19);case 19:h.B=null;case 18:if(h.qa&&h.da!=h.qa.Dc()&&(h.qa.s||h.qa.destroy(),h.qa=null),h.da=null,h.ag=null,h.L=null,h.i){for(o=p(h.i.variants),i=o.next();!i.done;i=o.next())for(r=i.value,s=p([r.audio,r.video]),a=s.next();!a.done;a=s.next())(l=a.value)&&l.segmentIndex&&l.segmentIndex.release();for(u=p(h.i.textStreams),c=u.next();!c.done;c=u.next())(d=c.value).segmentIndex&&d.segmentIndex.release()}h.g.streaming.clearDecodingCache&&(No={},It.clear()),h.i=null,h.s=new Qa,h.bg=null,h.Da=null,h.R=null,h.ze=-1,h.qd=[],h.U=NaN,xc(h);case 3:I(f),h.Z.release(),M(f,4);break;case 4:if(e&&_t()&&!h.G&&h.h)return S(f,ic(h),0);f.u(0)}})},i.ej=function(e){this.pa=e},i.load=function(e,t,n){t=void 0===t?null:t;var o,i,r,s,a,l,u,c,d,h,f,m,g,y=this;return P(function(v){switch(v.g){case 1:if(y.l==Gc)throw new St(2,7,7e3);return o=null,i="",i=e instanceof Jl?(o=e).Dc()||"":e||"",S(v,Wu(y.Z,"load"),2);case 2:if(y.Z.release(),!y.h)throw new St(2,7,7002);if(!y.da){v.u(3);break}return y.da=i,S(v,y.bc(!1),3);case 3:if(r=++y.te,s=function(){return P(function(e){if(1==e.g)return y.te==r?e.u(0):o?S(e,o.destroy(),3):e.u(3);throw new St(2,7,7e3)})},a=function(e,t){return P(function(n){switch(n.g){case 1:return C(n,2),S(n,Wu(y.Z,t),4);case 4:return S(n,s(),5);case 5:return S(n,e(),6);case 6:return S(n,s(),7);case 7:o&&y.g&&(o.g=y.g);case 2:I(n),y.Z.release(),M(n,0)}})},k(v,5,6),null==t&&o&&(t=o.getStartTime()),y.pa=t,y.Ea=!1,y.dispatchEvent(Qu("loading")),o){n=o.U,v.u(8);break}if(n){v.u(8);break}return S(v,a(function(){return P(function(e){if(1==e.g)return S(e,oc(y,i),2);n=e.h,T(e)})},"guessMimeType_"),8);case 8:if(l=!!o,o){eu(o,y),y.s=o.getStats(),v.u(11);break}return S(v,tc(y,i,t,n,!0),12);case 12:(o=v.h)?(eu(o,y),y.s=o.getStats(),o.start(),o.m.catch(function(){})):y.s=new Qa;case 11:if(u=!o,c=Date.now()/1e3,y.s=o?o.getStats():new Qa,y.da=i,y.ag=n||null,u)return S(v,a(function(){return P(function(e){return S(e,function(e,t){var n,o,i,r,s;return P(function(a){return 1==a.g?(n=En,o=Date.now()/1e3,i=!0,e.B=e.yc({Lb:e.H,onError:function(t){Oc(e,t)},ee:function(){},onExpirationUpdated:function(){var t=Qu("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&i&&(i=!1,e.s.j=Date.now()/1e3-o)}}),e.B.configure(e.g.drm),r={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},(s={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Bn(t):"",codecs:t?jn(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}).fullMimeTypes.add(_n(s.mimeType,s.codecs)),t.startsWith("audio/")?(s.type=n.X,r.audio=s):r.video=s,e.B.ba=!0,S(a,Cr(e.B,[r],[]),2)):S(a,e.B.Rb(e.h),0)})}(y,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(y.G){v.u(15);break}return S(v,a(function(){return P(function(e){return S(e,ic(y),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return S(v,a(function(){return P(function(e){return S(e,o.m,0)})},"waitForFinish"),17);case 17:return y.g=o.getConfiguration(),y.be=o.C,y.ab=o.F,y.F=function(e){return e.ea=!0,e.j}(o),y.F&&y.F.setMediaElement&&y.h&&y.F.setMediaElement(y.h),y.dd=function(e){return e.oa=!0,e.G}(o),y.Zc=o.za,y.i=o.gf(),(d=o.o)&&(y.za=d),l&&y.h&&"AUDIO"===y.h.nodeName&&(function(e){for(var t=p(e.i.variants),n=t.next();!n.done;n=t.next())(n=n.value).video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(e){return e.audio})}(y),y.configure("manifest.disableVideo",!0)),y.B=function(e){return e.da=!0,e.l}(o),S(v,a(function(){return P(function(e){return S(e,y.B.Rb(y.h),0)})},"drmEngine_.attach"),18);case 18:return!(h=o.B)||y.xa&&y.xa==h||(y.o=function(e){return e.ba=!0,e.i}(o),y.xa=o.B,"function"!=typeof y.o.setMediaElement&&(le("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),y.o.setMediaElement=function(){}),"function"!=typeof y.o.setCmsdManager&&(le("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),y.o.setCmsdManager=function(){}),"function"!=typeof y.o.trySuggestStreams&&(le("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),y.o.trySuggestStreams=function(){})),f=function(e){return e.pa=!0,e.K}(o),m=o.fa,S(v,a(function(){return P(function(e){return S(e,function(e,t,n,o){var i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,k,C,A,E;return P(function(I){switch(I.g){case 1:Ju(e,"load"),i=e.h,e.I=new Ga({Nd:function(){return i.playbackRate},hc:function(){return i.defaultPlaybackRate},Rf:function(e){i.playbackRate=e},Lg:function(e){i.currentTime+=e}}),r=function(){return Sc(e)},s=function(){return wc(e)},e.m.D(i,"playing",r),e.m.D(i,"pause",r),e.m.D(i,"ended",r),e.m.D(i,"ratechange",s),function(e,t){t.lcevc.enabled?(Yu(e),null==e.K&&(e.K=new Ws(e.h,e.eg,t.lcevc),e.G&&(e.G.Z=e.K))):Yu(e)}(e,e.g),e.Db=e.g.preferredTextLanguage,e.pd=e.g.preferredTextRole,e.od=e.g.preferForcedSubs,jc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(t,n,o){e.i&&e.j&&t!=e.j.j&&Ec(e,t,!0,void 0!==n&&n,void 0===o?0:o)}),e.o.setMediaElement(i),e.o.setCmsdManager(e.ea),e.j=function(e){return new vl(e.i,{Md:function(){return e.C?e.C.yd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},aa:e.G,Lb:e.H,onError:function(t){return Oc(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bi:function(){e.F&&e.F.update&&e.F.update()},Af:function(t,n){var o=t.startTime;t=t.endTime;var i=n.type;if(n=n.codecs.includes(","),e.C){e.C.Mg();var r=na(e.G,i);!e.V()&&e.h.paused&&null!=r&&0<r&&e.C.yd()<r&&e.C.Ee(r)}cc(e),o=(new Map).set("start",o).set("end",t).set("contentType",i).set("isMuxed",n),e.dispatchEvent(Qu("segmentappended",o))},Ai:function(t,n){(n=n.Hc)&&e.Zc&&function(e,t,n){var o=function(e,t){var n=e.g.get(t);return n||(n={ud:[],Pe:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,o=e[e.length-1].end,i=t.ud;t.ud=i.filter(function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=o)})}else t.ud=[]}(e,o),e={Hc:t,position:n},0<=(t=(o=o.ud).findIndex(function(e){return e.position>=n}))?o.splice(t,o[t].position==n?1:0,e):o.push(e)}(e.Zc,n,t)},kg:function(t,n){var o=e.B;if(o.h.parseInbandPsshEnabled&&!o.F&&["audio","video"].includes(t)){t=new qi(ve(n)),n=0;for(var i=p(t.data),r=i.next();!r.done;r=i.next())n+=r.value.length;if(0==n)o=Promise.resolve();else{for(n=new Uint8Array(n),i=0,r=(t=p(t.data)).next();!r.done;r=t.next())r=r.value,n.set(r,i),i+=r.length;Mr(o,"cenc",n),o=o.l}}else o=Promise.resolve();return o},onMetadata:function(t,n,o){rc(e,t,n,o)},disableStream:function(t,n){return e.disableStream(t,n)}})}(e),e.j.configure(e.g.streaming),e.l=Hc,i.textTracks&&e.m.D(i.textTracks,"addtrack",function(t){t.track&&"chapters"===(t=t.track).kind&&ac(e,t)}),e.dispatchEvent(Qu("streaming")),a=n;case 2:for((u=e.j.j)||a||(a=Cc(e)?e.o.chooseVariant():null),c=[],d=p([(l=u||a).video,l.audio]),h=d.next();!h.done;h=d.next())(f=h.value)&&!f.segmentIndex&&c.push(f.createSegmentIndex());if(!(0<c.length)){I.u(4);break}return S(I,Promise.all(c),4);case 4:if(!l||0!=l.disabledUntilTime){I.u(2);break}if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(l),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&Y("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),jc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),function(e,t,n){e.l.presentationTimeline.V()||(e.N=t,e.L=n)}(e.j,e.g.playRangeStart,e.g.playRangeEnd),m=function(t){e.C=function(e,t){return new Oa(e.h,e.i,e.g.streaming,t,function(){e.Fb&&qa(e.Fb,!0),e.j&&e.j.Qc(),e.L&&cc(e)},function(t){return e.dispatchEvent(t)})}(e,t),e.Fb=function(e,t){(t=new iu(e.dd,e.V()||0<t)).addEventListener("enter",function(t){Nc(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){Nc(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(Nc(e,"timelineregionenter",n),Nc(e,"timelineregionexit",n))});var n=new Ha(e.h);return n.g.add(t),e.Zc&&n.g.add(e.Zc),n}(e,t),uc(e,i,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||m(e.pa),u){I.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){I.u(8);break}return g=e.i.presentationTimeline,y=e.pa||e.h.currentTime,v=g.Vb(),b=g.yb(),y<v?y=v:y>b&&(y=b),S(I,function(e,t){var n,o,i,r,s;return P(function(a){return 1==a.g?(n=e.audio,o=e.video,i=function(e,t){var n,o,i;return P(function(r){return 1==r.g?e?S(r,e.createSegmentIndex(),2):r.return(null):(o=(n=e.segmentIndex.Ib(t))?n.next().value:null)?(i=o.startTime,r.return(i)):r.return(null)})},S(a,i(n,t),2)):3!=a.g?(r=a.h,S(a,i(o,t),3)):null!=(s=a.h)&&null!=r?a.return(Math.max(s,r)):null!=s?a.return(s):null!=r?a.return(r):a.return(t)})}(a,y),9);case 9:x=I.h,m(x);case 8:Ec(e,a,!0,!1,0);case 7:return e.C.ready(),e.Ec().find(function(e){return e.active})||((w=Do(e.i.textStreams,e.Db,e.pd,e.od)[0]||null)&&Ya(e.s.h,w,!0),a&&(w?(function(e,t,n){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var o=no(e.g.preferredTextLanguage);return n=no(n.language),2==e.g.autoShowText?Zn(n,o):3==e.g.autoShowText?!!t&&(e=no(t.language),Zn(n,o)&&!Zn(e,n)):(Y("Invalid autoShowText setting!"),!1)}(e,a.audio,w)&&(e.oa=!0),e.oa&&e.G.F.setTextVisibility(!0),Lc(e)):e.oa=!1),w&&(e.g.streaming.alwaysStreamText||e.qf())&&wl(e.j,w)),S(I,e.j.start(o),10);case 10:e.g.abr.enabled&&(e.o.enable(),Dc(e)),Mc(e),Cc(e),e.i.variants.some(function(e){return e.primary}),((k=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(C=function(){return Tc(e)},e.m.D(i,"timeupdate",C)),k||(A=function(){return kc(e)},e.m.D(i,"timeupdate",A),kc(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(E=function(){var t;return P(function(n){if(1==n.g)return t=e.h.duration-e.h.currentTime,!isNaN(t)&&t<=e.g.streaming.preloadNextUrlWindow?(e.m.jb(i,"timeupdate",E),S(n,e.preload(e.i.nextUrl),4)):n.u(0);e.qa=n.h,T(n)})},e.m.D(i,"timeupdate",E)),e.m.D(i,"ended",function(){e.load(e.qa||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(k),e.Ea=!0,e.m.ha(i,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),T(I)}})}(y,c,m,f),0)})},"loadInner_"),19);case 19:!function(e){if(e.H)for(var t=p(e.H),n=t.next();!n.done;n=t.next())(n=n.value)();e.H=null}(o),v.u(14);break;case 20:return S(v,a(function(){return P(function(e){return S(e,function(e,t,n){var o,i,r,s,a,l,u,c,d,h,f,m;return P(function(g){if(1==g.g)return Ju(e,"src-equals"),o=e.h,e.C=new Pa(o),i=!1,e.md.push(function(){i=!0}),null!=e.pa&&e.C.Ee(e.pa),e.I=new Ga({Nd:function(){return o.playbackRate},hc:function(){return o.defaultPlaybackRate},Rf:function(e){o.playbackRate=e},Lg:function(e){o.currentTime+=e}}),r=e.g.streaming.rebufferingGoal,uc(e,o,r),s=function(){return Sc(e)},a=function(){return wc(e)},e.m.D(o,"playing",s),e.m.D(o,"pause",s),e.m.D(o,"ended",s),e.m.D(o,"ratechange",a),"none"!=o.preload&&e.m.ha(o,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),o.audioTracks&&(e.m.D(o.audioTracks,"addtrack",function(){return Mc(e)}),e.m.D(o.audioTracks,"removetrack",function(){return Mc(e)}),e.m.D(o.audioTracks,"change",function(){return Mc(e)})),o.textTracks&&(e.m.D(o.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues){for(var n=[],o=p(t.activeCues),i=o.next(),r={};!i.done;r={Ta:void 0},i=o.next())r.Ta=i.value,sc(e,r.Ta.startTime,r.Ta.endTime,r.Ta.type,r.Ta.value),e.A&&e.A.onCueMetadataChange(r.Ta.value),"com.apple.quicktime.HLS"==r.Ta.type&&null!=r.Ta.startTime&&(i=n.find(function(e){return function(t){return t.startTime==e.Ta.startTime&&t.endTime==e.Ta.endTime}}(r)),i||(i={startTime:r.Ta.startTime,endTime:r.Ta.endTime,values:[]},n.push(i)),i.values.push(r.Ta.value));for(o=(n=p(n)).next();!o.done;o=n.next())(o=o.value).values.some(function(e){return"X-ASSET-URI"==e.key||"X-ASSET-LIST"==e.key})&&e.A&&(o.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.A.onInterstitialMetadata(e,e.h,o))}});var n=new Rt(function(){for(var t=function(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}(e),n=(t=p(t)).next();!n.done;n=t.next())n.value.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}(e,t);break;case"chapters":ac(e,t);break;default:Mc(e)}}),e.m.D(o.textTracks,"removetrack",function(){return Mc(e)}),e.m.D(o.textTracks,"change",function(){return Mc(e)})),l=function(e,t,n){try{if(!e.g.enabled)return t;var o=Mu(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var i=Ou;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":i=Uu;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":i=Pu;break e}i=void 0}return o.ot=i,o.su=!0,Du(t,Lu(o))}catch(s){return Q("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}(e.N,e.da,n),!l.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(l+="#t=",0<e.g.playRangeStart&&(l+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(l+=","+e.g.playRangeEnd)),o.src=l,(Ot()||Bt())&&o.load(),"none"!=o.preload&&!o.autoplay&&Fn(n)&&Xt()&&o.load(),e.l=qc,e.dispatchEvent(Qu("streaming")),u=new oi,Ca(o,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ready(),u.resolve()}),Ca(o,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var t;return P(function(n){return 1==n.g?(function(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Xg(t,e.g.preferredVariantRole)}(e),(t=hc(e)).find(function(e){return"disabled"!=e.mode})?(0<t.length&&(e.oa=!0),n.u(2)):S(n,new Promise(function(t){e.m.ha(o.textTracks,"change",t),new Rt(t).Y(1)}),2)):i?n.return():(function(e){var t=e.g.preferredTextLanguage;""!=t&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}(e),void T(n))})}),o.error?u.reject(Bc(e)):"none"==o.preload&&(Y('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.m.ha(o,"error",function(){u.reject(Bc(e))}),c=new Promise(function(t,n){new Rt(n).Y(e.g.streaming.loadTimeout)}),S(g,Promise.race([u,c]),2);((d=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(h=function(){return Tc(e)},e.m.D(o,"timeupdate",h)),d||(f=function(){return kc(e)},e.m.D(o,"timeupdate",f),kc(e)),e.A&&(e.A.onManifestUpdated(d),d&&(m=e.Ob().end,e.m.D(o,"progress",function(){var t=e.Ob().end;m!=t&&(e.A.onManifestUpdated(e.V()),m=t)}))),e.Ea=!0,T(g)})}(y,c,n),0)})},"srcEqualsInner_"),14);case 14:y.dispatchEvent(Qu("loaded"));case 6:if(I(v),!o){v.u(22);break}return S(v,o.destroy(),22);case 22:y.qa=null,M(v,0);break;case 5:if(!(g=E(v))||7e3==g.code){v.u(24);break}return S(v,y.bc(!1),24);case 24:throw g}})},i.aj=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,o=this;return P(function(i){return 1==i.g?S(i,ec(o),2):3!=i.g?(n=i.h,S(i,o.bc(e,t),3)):i.return(n)})},i.qg=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t;var n,o=this;return P(function(i){return 1==i.g?S(i,ec(o,t),2):3!=i.g?(n=i.h,S(i,o.detach(e),3)):i.return(n)})},i.preload=function(e,t,n){t=void 0===t?null:t;var o,i=this;return P(function(r){return 1==r.g?S(r,tc(i,e,t,n),2):((o=r.h)?o.start():Oc(i,new St(2,7,7005)),r.return(o))})},i.Qe=function(){var e,t,n,o,i=this;return P(function(r){for(e=[],t=p(i.ke),n=t.next();!n.done;n=t.next())(o=n.value).s||e.push(o.destroy());return i.ke=[],S(r,Promise.all(e),0)})},i.Ji=function(){for(var e=this.Z;e.g;)e.release()},i.yc=function(e){return new kr(e)},i.configure=function(e,t){if(2==arguments.length&&"string"==typeof e&&(e=jl(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(le("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(le("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(le("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&$t(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&"boolean"==typeof e.streaming.liveSync){le("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&(!e.streaming.liveSync||!("targetLatency"in e.streaming.liveSync))&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var o=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+o,e.streaming.liveSync.targetLatencyTolerance=o}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(le("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(le("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(le("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(le("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(le("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(le("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(le("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(le("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){le("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var i=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return i},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),null==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2),null==e.streaming.updateIntervalSeconds&&(e.streaming.updateIntervalSeconds=.1),null==e.streaming.maxDisabledTime&&(e.streaming.maxDisabledTime=1),null==e.streaming.retryParameters&&(e.streaming.retryParameters={}),null==e.streaming.retryParameters.baseDelay&&(e.streaming.retryParameters.baseDelay=100),null==e.manifest&&(e.manifest={}),null==e.manifest.dash&&(e.manifest.dash={}),null==e.manifest.dash.autoCorrectDrift&&(e.manifest.dash.autoCorrectDrift=!1),null==e.manifest.retryParameters&&(e.manifest.retryParameters={}),null==e.manifest.retryParameters.baseDelay&&(e.manifest.retryParameters.baseDelay=100),null==e.drm&&(e.drm={}),null==e.drm.retryParameters&&(e.drm.retryParameters={}),null==e.drm.retryParameters.baseDelay&&(e.drm.retryParameters.baseDelay=100)),n=Kl(this.g,e,bc(this)),pc(this),n},i.getConfiguration=function(){var e=bc(this);return Kl(e,this.g,bc(this)),e},i.Ag=function(){return Kl(bc(this),this.g,bc(this)),zl(this.g,bc(this))},i.vg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.h.currentTime+t,this.Ob().end)))return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},i.Ni=function(){for(var e in this.g)delete this.g[e];Kl(this.g,bc(this),bc(this)),pc(this)},i.yg=function(){return this.l},i.hf=function(){return this.i?this.i.type:null},i.Uh=function(){return this.h},i.xb=function(){return this.H},i.Dc=function(){return this.da},i.ug=function(){return this.A?this.A:null},i.V=function(){return this.i?this.i.presentationTimeline.V():!(!this.h||!this.h.src)&&1/0==this.h.duration},i.kc=function(){return!!this.i&&this.i.presentationTimeline.kc()},i.ki=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src)&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},i.Ob=function(){if(this.i){if(!this.Ea&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.yb()}}return this.h&&this.h.src&&(e=this.h.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.hi=function(){this.V()&&(this.h.currentTime=this.Ob().end)},i.li=function(){return this.Ea},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.B?this.B.g:null},i.ad=function(){return this.B?this.B.ad():1/0},i.ff=function(){return this.B?this.B.ff():[]},i.Ld=function(){return this.B?this.B.Ld():{}},i.pf=function(){return!!this.L&&this.L.g==Jo},i.eb=function(){return this.h?this.I?this.I.i:1:0},i.wd=function(e){var t=this;0==e?Y("A trick play rate of 0 is unsupported!"):(this.Fa.Ra(),this.h.paused&&this.h.play(),this.I.set(e),this.l==Hc&&(this.o.playbackRateChanged(e),bl(this.j,1<Math.abs(e))),this.V()&&this.Fa.D(this.h,"timeupdate",function(){var n=t.h.currentTime,o=t.Ob(),i=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(o.end)&&t.Tc():Math.floor(n)<=Math.floor(o.start+i)&&t.Tc()}))},i.Tc=function(){var e=this.I.hc();this.l==qc&&this.I.set(e),this.l==Hc&&(this.I.set(e),this.o.playbackRateChanged(e),bl(this.j,!1)),this.Fa.Ra()},i.ic=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,o=p(this.i.variants),i=o.next();!i.done;i=o.next())if(_o(i=i.value)){var r=ko(i);r.active=i==e,r.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(r.active=!0),r.active&&n++,t.push(r)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){return Mo(e)}):[]},i.Ec=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=p(this.i.textStreams),o=n.next();!o.done;o=n.next()){var i=Co(o=o.value);i.active=o==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?hc(this).map(function(e){return Io(e)}):[]},i.Oh=function(){var e=this.qd;return this.i&&(e=this.i.imageStreams),e.map(function(e){return Ao(e)})},i.Gh=function(e){var t,n,o,i,r=this;return P(function(s){return 1==s.g?r.l!=Hc&&r.l!=qc?s.return(null):(t=r.qd,r.i&&(t=r.i.imageStreams),(n=t.find(function(t){return t.id==e}))?n.segmentIndex?s.u(2):S(s,n.createSegmentIndex(),2):s.return(null)):4!=s.g?(o=[],n.segmentIndex.Hb(function(t){var i=dc(t.tilesLayout||n.tilesLayout);if(i){i=i.rows*i.dc;for(var s=t.j-t.startTime,a=0;a<i;a++)o.push(r.Cg(e,t.startTime+s*a/i))}}),S(s,Promise.all(o),4)):(i=s.h,s.return(i.filter(function(e){return e})))})},i.Cg=function(e,t){var n,o,i,r,s,a,l,u,c,p,d,h,f,m,g,y,v,b,x=this;return P(function(w){return 1==w.g?x.l!=Hc&&x.l!=qc?w.return(null):(n=x.qd,x.i&&(n=x.i.imageStreams),(o=n.find(function(t){return t.id==e}))?o.segmentIndex?w.u(2):S(w,o.createSegmentIndex(),2):w.return(null)):null==(i=o.segmentIndex.find(t))?w.return(null):(r=o.segmentIndex.get(i),(s=dc(r.tilesLayout||o.tilesLayout))?(a=o.width||0,l=o.height||0,u=a/s.dc,c=l/s.rows,p=s.dc*s.rows,d=r.j-r.startTime,h=r.B||d/p,f=r.startTime,g=m=0,1<p&&(y=Math.floor((t-r.startTime)/h),f=r.startTime+y*h,m=y%s.dc*u,g=Math.floor(y/s.dc)*c),v=!1,(b=r.A)&&(v=!0,c=b.height,m=b.positionX,g=b.positionY,u=b.width),w.return({segment:r,imageHeight:l,imageWidth:a,height:c,positionX:m,positionY:g,startTime:f,duration:h,uris:r.M(),width:u,sprite:v})):w.return(null))})},i.Yg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(t){return t.id==e.id});t&&t!=this.j.s&&(Ya(this.s.h,t,!1),wl(this.j,t),_c(this),this.Db=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){for(var n=(t=p(t=hc(this))).next();!n.done;n=t.next())Eo(n=n.value)==e.id?n.mode=this.oa?"showing":"hidden":n.mode="disabled";_c(this)}},i.Mf=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){var o=this.i.variants.find(function(t){return t.id==e.id});if(o&&_o(o)){var i=this.j.j;this.g.abr.enabled&&(i.video!=o.video||i.audio&&o.audio&&i.audio.language==o.audio.language&&i.audio.channelsCount==o.audio.channelsCount)&&Y("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),Ec(this,o,!1,t,n),this.za=new Wo(o,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Cc(this)}}else if(this.h&&this.h.audioTracks)for(n=(t=p(t=Array.from(this.h.audioTracks))).next();!n.done;n=t.next())if(Eo(n=n.value)==e.id){Ic(this,n);break}},i.Ih=function(){return $c(this.ic())},i.ai=function(){return $c(this.Ec())},i.Hh=function(){return Array.from(zc(this.ic()))},i.$h=function(){return Array.from(zc(this.Ec()))},i.Xg=function(e,t,n,o,i){if(n=void 0===n?0:n,o=void 0===o?0:o,i=void 0===i?"":i,this.i&&this.C){this.za=new Ko(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,i),e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},t=this.j.j,n=null;for(var r=(i=p((i=this.za.create(this.i.variants)).values())).next();!r.done;r=i.next())_o(r=r.value)&&(!n||e(n,t)>e(r,t))&&(n=r);n!=t&&(n?(e=ko(n),this.Mf(e,!0,o)):Ac(this))}else this.h&&this.h.audioTracks&&(o=Do(this.ic(),e,t||"",!1)[0])&&this.Mf(o)},i.Lf=function(e,t,n){n=void 0!==n&&n,this.i&&this.C?(this.Db=e,this.pd=t||"",this.od=n,(e=Do(this.i.textStreams,this.Db,this.pd,this.od)[0]||null)&&e!=this.j.s&&(Ya(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.qf())&&(wl(this.j,e),_c(this))):(e=Do(this.Ec(),e,t||"",n)[0])&&this.Yg(e)},i.Ti=function(e,t,n){if(t=void 0===t||t,n=void 0===n?0:n,this.i&&this.C){for(var o=null,i=p(this.i.variants),r=i.next();!r.done;r=i.next())if((r=r.value).audio.label==e){o=r;break}null!=o&&(this.za=new Ko(o.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Ac(this,t,n))}else if(this.h&&this.h.audioTracks){for(t=null,o=(n=p(n=Array.from(this.h.audioTracks))).next();!o.done;o=n.next())(o=o.value).label==e&&(t=o);t&&Ic(this,t)}},i.qf=function(){var e=this.oa;return this.G&&this.l==Hc?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?hc(this).some(function(e){return"showing"==e.mode}):e},i.wg=function(){return this.h&&this.h.src&&this.h.textTracks?fc(this).map(function(e){return Io(e)}):[]},i.Kh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=no(e),n=fc(this).filter(function(e){return no(e.language)==t});if(!n||!n.length)return[];e=[];for(var o=new Set,i=(n=p(n)).next();!i.done;i=n.next())if((i=i.value)&&i.cues)for(var r=(i=p(i.cues)).next();!r.done;r=i.next()){var s=r.value;(r=s.id)&&""!=r||(r=s.startTime+"-"+s.endTime+"-"+s.text),s={id:r,title:s.text,startTime:s.startTime,endTime:s.endTime},o.has(r)||(e.push(s),o.add(r))}return e},i.eh=function(e){if(e=!!e,this.oa!=e){if(this.oa=e,this.l==Hc)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||0<(e=Do(this.i.textStreams,this.Db,this.pd,this.od)).length&&(wl(this.j,e[0]),_c(this)):function(e){var t=e.i.get(An);t&&(Pl(t),Ol(t).catch(function(){}),e.i.delete(An)),e.s=null}(this.j));else if(this.h&&this.h.src&&this.h.textTracks)for(var t=hc(this),n=(t=p(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");Lc(this)}},i.Wh=function(){if(this.C)var e=this.C.yd();else{if(null==this.pa)return new Date;e=this.pa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},i.Bg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},i.Od=function(){return this.V()&&this.i?this.i.presentationTimeline.Od():null},i.wb=function(){if(this.l==Hc)return this.G.wb();var e={total:[],audio:[],video:[],text:[]};return this.l==qc&&(e.total=fs(this.h.buffered)),e},i.getStats=function(){if(this.l!=Hc&&this.l!=qc)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Sc(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.V()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.U=this.C.fg(),this.s.Z=this.C.gg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var o=Number(n.totalVideoFrames);t.R=Number(n.droppedVideoFrames),t.N=o,this.s.L=Number(n.corruptedVideoFrames)}if(n=this.B&&(n=this.B).I?n.I:NaN,this.s.s=n,this.l==Hc){if(n=this.j.j,t=this.j.s,n){var i=(o=this.I?this.I.i:1)*n.bandwidth;t&&t.bandwidth&&(i+=o*t.bandwidth),this.s.B=i}n&&n.video&&(t=this.s,o=n.video.height||NaN,t.o=n.video.width||NaN,t.l=o),this.V()&&(n=this.Bg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==qc&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var r=this.s;e=r.o,n=r.l,t=r.B,o=r.N,i=r.R;for(var s=r.L,a=r.Z,l=r.U,u=r.A,c=r.i,d=r.m,h=r.H,f=r.j,m=Wa(r.g,"playing"),g=Wa(r.g,"paused"),y=Wa(r.g,"buffering"),v=r.s,b=r.C,x=r.I,w=r.Hg,S=r.Cd,T=r.K,k=r.G,C=r.F,A=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],o=p(e.h),i=o.next();!i.done;i=o.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(r.g),E=[],I=(r=p(r.h.g)).next();!I.done;I=r.next())I=I.value,E.push({timestamp:I.timestamp,id:I.id,type:I.type,fromAdaptation:I.fromAdaptation,bandwidth:I.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:o,droppedFrames:i,corruptedFrames:s,stallsDetected:a,gapsJumped:l,estimatedBandwidth:u,completionPercent:c,loadLatency:d,manifestTimeSeconds:h,drmTimeSeconds:f,playTime:m,pauseTime:g,bufferingTime:y,licenseTime:v,liveLatency:b,maxSegmentDuration:x,manifestSizeBytes:w,bytesDownloaded:S,nonFatalErrorCount:T,manifestPeriodCount:k,manifestGapCount:C,stateHistory:A,switchHistory:E}},i.uh=function(e,t,n,o,i,r,s){s=void 0!==s&&s;var a,l,u,c,p,d,h,f,m,g,y=this;return P(function(v){switch(v.g){case 1:if(y.l!=Hc&&y.l!=qc)throw new St(1,7,7004);if("subtitles"!=n&&"captions"!=n&&Y("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),o){v.u(2);break}return S(v,mc(y,e),3);case 3:o=v.h;case 2:if(a=[],y.A&&(a=y.A.getCuePoints()),y.l!=qc){v.u(4);break}return s&&(n="forced"),S(v,gc(y,e,t,n,o,r||"",a),5);case 5:if(l=no(t),u=y.Ec(),c=u.find(function(e){return no(e.language)==l&&e.label==(r||"")&&e.kind==n}))return Mc(y),v.return(c);throw new St(1,2,2012);case 4:if(p=En,d=y.h.duration,y.i&&(d=y.i.presentationTimeline.getDuration()),1/0==d)throw new St(1,4,4033);if(!a.length){v.u(6);break}return S(v,yc(y,e,y.H,y.g.streaming.retryParameters),7);case 7:h=v.h,f=vc(y,h,o,a),m=new Blob([f],{type:"text/vtt"}),e=ya(m),o="text/vtt";case 6:if(g={id:y.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Fa(0,d,[e]),mimeType:o||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:r||null,type:p.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([_n(o||"",i||"")])},!Hn(_n(g.mimeType,g.codecs)))throw new St(2,2,2014,o);return y.i.textStreams.push(g),Mc(y),v.return(Co(g))}})},i.vh=function(e,t){var n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b=this;return P(function(x){switch(x.g){case 1:if(b.l!=Hc&&b.l!=qc)throw new St(1,7,7004);if(t){x.u(2);break}return S(x,mc(b,e),3);case 3:t=x.h;case 2:if("text/vtt"!=t)throw new St(1,2,2017,e);if(n=En,o=b.h.duration,b.i&&(o=b.i.presentationTimeline.getDuration()),1/0==o)throw new St(1,4,4045);return S(x,yc(b,e,b.H,b.g.streaming.retryParameters),4);case 4:if(i=x.h,!(r=Wn[t]))throw new St(2,2,2014,t);for(s=r(),a={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},l=ve(i),u=s.parseMedia(l,a,e),c=[],d=p(u),h=d.next(),f={};!h.done;f={ye:void 0,zc:void 0},h=d.next())f.zc=h.value,f.ye=null,m=function(t){return function(){return null==t.ye&&(t.ye=xn([e],[t.zc.payload])),t.ye||[]}}(f),g=new ss(f.zc.startTime,f.zc.endTime,m,0,null,null,0,0,1/0),f.zc.payload.includes("#xywh")&&4===(y=f.zc.payload.split("#xywh=")[1].split(",")).length&&g.fh({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)}),c.push(g);return v={id:b.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ja(c),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([_n(t||"","")])},b.l==qc?b.qd.push(v):b.i.imageStreams.push(v),Mc(b),x.return(Ao(v))}})},i.th=function(e,t,n){var o,i,r,s,a=this;return P(function(l){switch(l.g){case 1:if(a.l!=Hc&&a.l!=qc)throw new St(1,7,7004);if(n){l.u(2);break}return S(l,mc(a,e),3);case 3:n=l.h;case 2:return o=[],a.A&&(o=a.A.getCuePoints()),S(l,gc(a,e,t,"chapters",n,"",o),4);case 4:if(i=l.h,r=a.wg(),!(s=r.find(function(e){return e.language==t}))){l.u(5);break}return S(l,new Promise(function(e,t){a.m.ha(i,"load",e),a.m.ha(i,"error",function(){t(new St(1,2,2015))})}),6);case 6:return Mc(a),l.return(s);case 5:throw new St(1,2,2012)}})},i.Yi=function(e,t){this.fa.width=e,this.fa.height=t},i.If=function(e){if(this.l==Hc){var t=this.j;if(e=void 0===e?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=p(t.i.values()),o=n.next();!o.done;o=n.next())!(o=o.value).fd||o.Qa||o.sb||(o.fd=!1,Dl(t,o,e));t=!0}}else t=!1;return t},i.gf=function(){return Y("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Rh=function(){return this.ab},i.ih=function(e){this.de=e},i.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===Gc||!navigator.onLine||0==t)return!1;if(this.i.variants.some(function(t){var n=t[e.type];return!(!n||n.id===e.id||t.disabledUntilTime||"audio"==e.type&&e.language!==n.language)})){for(var n=p(this.i.variants),o=n.next();!o.done;o=n.next()){var i=(o=o.value)[e.type];i&&i.id===e.id&&(o.disabledUntilTime=Date.now()/1e3+t)}return this.je.Sa(1),Ac(this,!1,t=this.wb().video.reduce(function(e,t){return e+t.end-t.start},0),!0,!1),!0}return!1},$("shaka.Player",Ku),Ku.prototype.setVideoContainer=Ku.prototype.ih,Ku.prototype.getManifestParserFactory=Ku.prototype.Rh,Ku.prototype.getManifest=Ku.prototype.gf,Ku.prototype.retryStreaming=Ku.prototype.If,Ku.prototype.setMaxHardwareResolution=Ku.prototype.Yi,Ku.prototype.addChaptersTrack=Ku.prototype.th,Ku.prototype.addThumbnailsTrack=Ku.prototype.vh,Ku.prototype.addTextTrackAsync=Ku.prototype.uh,Ku.prototype.getStats=Ku.prototype.getStats,Ku.prototype.getBufferedInfo=Ku.prototype.wb,Ku.prototype.getSegmentAvailabilityDuration=Ku.prototype.Od,Ku.prototype.getPresentationStartTimeAsDate=Ku.prototype.Bg,Ku.prototype.getPlayheadTimeAsDate=Ku.prototype.Wh,Ku.prototype.setTextTrackVisibility=Ku.prototype.eh,Ku.prototype.getChapters=Ku.prototype.Kh,Ku.prototype.getChaptersTracks=Ku.prototype.wg,Ku.prototype.isTextTrackVisible=Ku.prototype.qf,Ku.prototype.selectVariantsByLabel=Ku.prototype.Ti,Ku.prototype.selectTextLanguage=Ku.prototype.Lf,Ku.prototype.selectAudioLanguage=Ku.prototype.Xg,Ku.prototype.getTextLanguages=Ku.prototype.$h,Ku.prototype.getAudioLanguages=Ku.prototype.Hh,Ku.prototype.getTextLanguagesAndRoles=Ku.prototype.ai,Ku.prototype.getAudioLanguagesAndRoles=Ku.prototype.Ih,Ku.prototype.selectVariantTrack=Ku.prototype.Mf,Ku.prototype.selectTextTrack=Ku.prototype.Yg,Ku.prototype.getThumbnails=Ku.prototype.Cg,Ku.prototype.getAllThumbnails=Ku.prototype.Gh,Ku.prototype.getImageTracks=Ku.prototype.Oh,Ku.prototype.getTextTracks=Ku.prototype.Ec,Ku.prototype.getVariantTracks=Ku.prototype.ic,Ku.prototype.cancelTrickPlay=Ku.prototype.Tc,Ku.prototype.trickPlay=Ku.prototype.wd,Ku.prototype.getPlaybackRate=Ku.prototype.eb,Ku.prototype.isBuffering=Ku.prototype.pf,Ku.prototype.getKeyStatuses=Ku.prototype.Ld,Ku.prototype.getActiveSessionsMetadata=Ku.prototype.ff,Ku.prototype.getExpiration=Ku.prototype.ad,Ku.prototype.drmInfo=Ku.prototype.drmInfo,Ku.prototype.keySystem=Ku.prototype.keySystem,Ku.prototype.isFullyLoaded=Ku.prototype.li,Ku.prototype.goToLive=Ku.prototype.hi,Ku.prototype.seekRange=Ku.prototype.Ob,Ku.prototype.isAudioOnly=Ku.prototype.ki,Ku.prototype.isInProgress=Ku.prototype.kc,Ku.prototype.isLive=Ku.prototype.V,Ku.prototype.getAdManager=Ku.prototype.ug,Ku.prototype.getAssetUri=Ku.prototype.Dc,Ku.prototype.getNetworkingEngine=Ku.prototype.xb,Ku.prototype.getMediaElement=Ku.prototype.Uh,Ku.prototype.getManifestType=Ku.prototype.hf,Ku.prototype.getLoadMode=Ku.prototype.yg,Ku.prototype.resetConfiguration=Ku.prototype.Ni,Ku.prototype.getBufferFullness=Ku.prototype.vg,Ku.prototype.getNonDefaultConfiguration=Ku.prototype.Ag,Ku.prototype.getConfiguration=Ku.prototype.getConfiguration,Ku.prototype.configure=Ku.prototype.configure,Ku.prototype.releaseAllMutexes=Ku.prototype.Ji,Ku.prototype.destroyAllPreloads=Ku.prototype.Qe,Ku.prototype.preload=Ku.prototype.preload,Ku.prototype.detachAndSavePreload=Ku.prototype.qg,Ku.prototype.unloadAndSavePreload=Ku.prototype.aj,Ku.prototype.load=Ku.prototype.load,Ku.prototype.updateStartTime=Ku.prototype.ej,Ku.prototype.unload=Ku.prototype.bc,Ku.prototype.detach=Ku.prototype.detach,Ku.prototype.attachCanvas=Ku.prototype.zh,Ku.prototype.attach=Ku.prototype.Rb,Ku.probeSupport=function(e){var t,n,o,i,r,s,a;return e=void 0===e||e,P(function(l){switch(l.g){case 1:if(t={},!e){l.u(2);break}return S(l,function(){var e,t,n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,C,I,M,R,_;return P(function(L){if(1==L.g){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t={"com.widevine.alpha":["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],"com.microsoft.playready.recommendation":["150","2000","3000"]},i={videoCapabilities:n=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:o=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],initDataTypes:["cenc","sinf","skd","keyids"]},r=[null,"cenc","cbcs","cbcs-1-9"],s=new Map,a=function(e,t){var n,o,i,r,a,l,u,c;return P(function(p){switch(p.g){case 1:return k(p,2),S(p,t.createMediaKeys(),4);case 4:A(p,3);break;case 2:return E(p),p.return();case 3:o=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),Nt()&&(o=!1),i=t.getConfiguration().videoCapabilities,r=t.getConfiguration().audioCapabilities,a={persistentState:o,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},s.has(e)&&s.get(e)?a=s.get(e):s.set(e,a),(l=i[0].encryptionScheme)&&!a.encryptionSchemes.includes(l)&&a.encryptionSchemes.push(l),(u=i[0].robustness)&&!a.videoRobustnessLevels.includes(u)&&a.videoRobustnessLevels.push(u),(c=r[0].robustness)&&!a.audioRobustnessLevels.includes(c)&&a.audioRobustnessLevels.push(c),T(p)}})},l=function(e,t,n,o){var r,s,l,u,c,d,h,f,m,g;return P(function(y){switch(y.g){case 1:for(k(y,2),r=lo(i),s=p(r.videoCapabilities),l=s.next();!l.done;l=s.next())(u=l.value).encryptionScheme=t,u.robustness=n;for(c=p(r.audioCapabilities),d=c.next();!d.done;d=c.next())(h=d.value).encryptionScheme=t,h.robustness=o;return(f=lo(r)).persistentState="required",f.sessionTypes=["persistent-license"],m=[f,r],S(y,navigator.requestMediaKeySystemAccess(e,m),4);case 4:return g=y.h,S(y,a(e,g),5);case 5:A(y,0);break;case 2:E(y),T(y)}})},u=function(e,t,i,r){var s,l,u;return P(function(c){switch(c.g){case 1:return k(c,2),s={type:"media-source",video:{contentType:n[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:o[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:e,video:{encryptionScheme:t,robustness:i},audio:{encryptionScheme:t,robustness:r}}},S(c,navigator.mediaCapabilities.decodingInfo(s),4);case 4:return l=c.h,u=l.keySystemAccess,S(c,a(e,u),5);case 5:A(c,0);break;case 2:E(c),T(c)}})},c=p(e),d=c.next();!d.done;d=c.next())h=d.value,s.set(h,null);for(f=[],m=p(r),g=m.next();!g.done;g=m.next())for(y=g.value,v=p(e),b=v.next();!b.done;b=v.next())"org.w3.clearkey"===(x=b.value)&&Xt()||(f.push(l(x,y,"","")),f.push(u(x,y,"","")));for(w=p(e),C=w.next();!C.done;C=w.next())for(I=C.value,M=p(t[I]||[]),R=M.next();!R.done;R=M.next())_=R.value,f.push(l(I,null,_,"")),f.push(l(I,null,"",_)),f.push(u(I,null,_,"")),f.push(u(I,null,"",_));return S(L,Promise.all(f),2)}return L.return(_i(s))})}(),3);case 3:t=l.h;case 2:var u={};if(_t())for(var c in es)u[c]=!0;for(var h=(c=p(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!h.done;h=c.next())u[h=h.value]=_t()?!!es[h]:Lt(h);for(n=u,u={},h=(c=p(c='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(d(Gn)))).next();!h.done;h=c.next()){u[h=h.value]=!!Hn(h)||(_t()?ie(h)||!!Ze(h):Lt(h));var f=h.split(";")[0];u[f]=u[f]||u[h]}return o=u,S(l,en(),4);case 4:for(a in i=l.h,r={manifest:n,media:o,drm:t,hardwareResolution:i},s=Wc)r[a]=s[a]();return l.return(r)}})},Ku.isBrowserSupported=function(){if(e.Promise||Y("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||Qt("Trident/"))return!1;var t=Xt();return!(t&&9>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!_t()||Lt("application/x-mpegurl"))},Ku.setAdManagerFactory=function(e){Kc=e},Ku.registerSupportPlugin=function(e,t){Wc[e]=t},Ku.prototype.destroy=Ku.prototype.destroy;var Gc=0,Vc=1,Hc=2,qc=3;Ku.LoadMode={DESTROYED:Gc,NOT_LOADED:Vc,MEDIA_SOURCE:Hc,SRC_EQUALS:qc},Ku.version="v4.10.12";var Xc=["4","10"];pe=new function(e){this.g=e,this.i=ue,this.h=ce}(new ae(Number(Xc[0]),Number(Xc[1])));var Wc={},Kc=null;function Yc(){this.g=[],this.i=this.l=this.j=this.h=0}function Qc(e){return e.g.length?e.g.reduce(function(e,t){return e+t},0)/e.g.length:0}function Jc(e,t,n){var o=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new te,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){o.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){o.i=!1})}function Zc(){}function ep(t,n,o,i,r){var s=this;this.s=t,this.i=n,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=r,this.j=null,this.h=new te,google.ima.settings.setLocale(o),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.12"),this.g=null,this.B=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){!function(t,n){if(t.l(new ci("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.G))),t.o.customPlayheadTracker){var o={currentTime:t.i.currentTime};t.g=n.getAdsManager(o,t.B),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.D(t.i,"timeupdate",function(){t.i.duration&&(o.currentTime=t.i.currentTime)}),t.h.D(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.B);t.l(new ci("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[];for(var r=(i=p(i)).next();!r.done;r=i.next())n.push({start:r.value,end:null});t.l(new ci("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new ci(n,t))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){tp(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){op(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(t){op(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){ip(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){ip(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,np(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.D(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,np(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in e?(t.A=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,np(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.A.observe(t.i)):t.h.D(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,np(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.F||t.o.skipPlayDetection?t.g.start():t.h.ha(t.i,"play",function(){t.F=!0,t.g.start()})}catch(s){ip(t,null)}}(s,t)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){tp(s,e)}),this.h.D(this.i,"ended",function(){s.m.contentComplete()}),this.h.ha(this.i,"play",function(){s.F=!0})}function tp(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.l(new ci("ad-error",t)),ip(e,null),e.l(new ci("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function np(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function op(e,t){var n=t.getAd();n?(e.j=new Jc(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new ci("ad-content-pause-requested")),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new ci("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?((t=e.j).l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Y("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function ip(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new ci("ad-content-resume-requested")),e.l(new ci("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function rp(e,t,n,o,i){this.g=e,this.h=t,this.j=n,this.l=o,this.i=i}function sp(e,t,n,o){var i=this;this.F=e,this.B=t,this.i=n,this.C=null,this.m=!0,this.s=this.i,this.g=o,this.G=new Set,this.A=new Set,this.o=new Map,this.h=new Ku,pp(this),this.I=new te,this.j=new te,this.H=!1,this.l=null,this.I.D(this.i,"timeupdate",function(){if(!i.H){var e=null==i.l||0==i.l;i.l=i.i.currentTime,(e=lp(i,e))&&up(i,e,1,1,Date.now())}}),new Rt(function(){var e,t,n,o,r,s,a,l,u,c;return P(function(d){switch(d.g){case 1:if(!i.A.size||i.H||null==i.l){d.u(0);break}e=!1,t=Array.from(i.A),n=i.B.Ob(),o=p(t),r=o.next();case 3:if(r.done){d.u(5);break}if(s=r.value,a=s.endTime||s.startTime,!(1<=n.start-a)){0<(l=s.startTime-i.l)&&10>=l&&(i.o.has(s)||i.o.set(s,i.h.preload(s.uri))),d.u(4);break}if(!i.o.has(s)){d.u(7);break}return S(d,i.o.get(s),8);case 8:(u=d.h)&&u.destroy(),i.o.delete(s);case 7:c=JSON.stringify(s),i.G.has(c)&&i.G.delete(c),i.A.delete(s),e=!0;case 4:r=o.next(),d.u(3);break;case 5:e&&cp(i),T(d)}})}).Sa(1)}function ap(e,t){var n,o,i,r,s,a,l,u;P(function(c){if(1==c.g)return e.B.yg()==qc&&e.m?(Y("Unsupported interstitial when using single media element",t),c.return()):(pp(e),n=!1,S(c,function(e,t){var n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,T,C,I,M,R,_,L,D,O,N,U,B;return P(function(P){switch(P.g){case 1:if(n=[],!t)return P.return(n);if(o=t.values.find(function(e){return"X-ASSET-URI"==e.key}),i=t.values.find(function(e){return"X-ASSET-LIST"==e.key}),!o&&!i)return P.return(n);if(r=t.values.find(function(e){return"X-RESTRICT"==e.key}),a=s=!0,r&&r.data&&(l=r.data,s=!l.includes("SKIP"),a=!l.includes("JUMP")),u=null,(c=t.values.find(function(e){return"X-RESUME-OFFSET"==e.key}))&&(d=c.data,u=parseFloat(d),isNaN(u)&&(u=null)),h=null,(f=t.values.find(function(e){return"X-PLAYOUT-LIMIT"==e.key}))&&(m=f.data,h=parseFloat(m),isNaN(h)&&(h=null)),v=y=g=!1,(b=t.values.find(function(e){return"CUE"==e.key}))&&(x=b.data,g=x.includes("ONCE"),y=x.includes("PRE"),v=x.includes("POST")),w=!1,(T=t.values.find(function(e){return"X-TIMELINE-OCCUPIES"==e.key}))?(C=T.data,w=C.includes("RANGE")):!c&&e.B.V()&&(w=!y&&!v),o){if(!(I=o.data))return P.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:I,isSkippable:s,Ie:a,Oc:u,Ef:h,once:g,Ab:y,nc:v,se:w}),P.u(2);break}if(!i){P.u(2);break}return(M=i.data)?(R=bi([M],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),_=e.B.xb().request(7,R),k(P,4),S(P,_.promise,6)):P.return(n);case 6:for(L=P.h,D=rn(L.data),O=JSON.parse(D),N=p(O.ASSETS),U=N.next();!U.done;U=N.next())(B=U.value).URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:B.URI,isSkippable:s,Ie:a,Oc:u,Ef:h,once:g,Ab:y,nc:v,se:w});A(P,2);break;case 4:E(P);case 2:return P.return(n)}})}(e,t),2));if((o=c.h).length)for(i=p(o),r=i.next();!r.done;r=i.next())s=r.value,a=JSON.stringify(s),e.G.has(a)||(n=!0,e.G.add(a),e.A.add(s),l=!1,t.Ab&&null==e.l?l=!0:0!=s.startTime||s.Ie?null!=e.l&&0<(u=t.startTime-e.l)&&10>=u&&(l=!0):l=!0,l&&(e.o.has(s)||e.o.set(s,e.h.preload(s.uri))));else Y("Unsupported interstitial",t);n&&cp(e),T(c)})}function lp(e,t,n){n=void 0===n?0:n;var o=0,i=null;if(e.A.size&&null!=e.l)for(var r=e.i.ended,s=Array.from(e.A).sort(function(e,t){return t.startTime-e.startTime}),a=(s=p(s)).next();!a.done;a=s.next()){a=a.value;var l=!1;if(t?l=a.Ab:r?l=a.nc:a.Ab||a.nc||(l=0<(l=e.l-Math.round(1e3*a.startTime)/1e3)&&(1>=l||!a.Ie)),l){if(o==n){i=a;break}o++}}return i}function up(e,t,n,o,i,r){var s,a,l,u,c,p,d,h,f,m,g,y,v,b;r=void 0===r?0:r,P(function(x){switch(x.g){case 1:if(s=Date.now(),!e.s.parentElement&&e.F&&e.F.appendChild(e.s),1==o&&1==n&&(n=Array.from(e.A).filter(function(e){return t.Ab?e.Ab==t.Ab:t.nc?e.nc==t.nc:.001>Math.abs(e.startTime-t.startTime)}).length),(t.once||t.Ab)&&(r++,e.A.delete(t),cp(e)),e.H=!0,!e.m||1!=o){x.u(2);break}return e.g(new ci("ad-content-pause-requested",(new Map).set("saveLivePosition",!0))),a=new oi,l=function(t){return P(function(n){if(1==n.g)return"detach"!=t.state?n.u(0):Yt()?S(n,new Promise(function(e){return new Rt(e).Y(.1)}),3):n.u(3);a.resolve(),e.j.jb(e.B,"onstatechange",l),T(n)})},e.j.D(e.B,"onstatechange",l),S(x,a,2);case 2:return e.m||(e.i.pause(),null!=t.Oc&&0!=t.Oc&&(e.i.currentTime+=t.Oc)),u=!1,c=null,p=function(){if(!e.m&&null==t.Oc)if(t.se&&t.endTime&&1/0!=t.endTime)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var n=Date.now();e.i.currentTime+=(n-i)/1e3,i=n}},d=function(){var s,a;return P(function(l){if(1==l.g)return p(),c&&c.stop(),(s=lp(e,t.Ab,o-r))?(e.g(new ci("ad-stopped")),e.j.Ra(),up(e,s,n,++o,i,r),l.u(0)):e.m?S(l,e.h.detach(),4):S(l,e.h.bc(),4);e.m&&(null==(a=t.Oc)&&(a=t.se&&t.endTime&&1/0!=t.endTime?t.endTime-(e.l||0):(Date.now()-i)/1e3),e.g(new ci("ad-content-resume-requested",(new Map).set("offset",a)))),e.g(new ci("ad-stopped")),e.j.Ra(),e.H=!1,e.m||(p(),e.i.ended||e.i.play()),T(l)})},h=function(t){return P(function(n){return u?n.return():(u=!0,e.g(new ci("ad-error",(new Map).set("originalEvent",t))),S(n,d(),0))})},f=function(){return P(function(t){if(1==t.g)return u?t.return():(u=!0,S(t,d(),2));e.g(new ci("ad-complete")),T(t)})},m=function(){return P(function(t){return u?t.return():(u=!0,e.g(new ci("ad-skipped")),S(t,d(),0))})},g=new rp(e.s,t.isSkippable,m,n,o),e.m||(g.setMuted(e.i.muted),g.setVolume(e.i.volume)),e.g(new ci("ad-started",(new Map).set("ad",g))),g.canSkipNow()&&e.g(new ci("ad-skip-state-changed")),e.j.ha(e.h,"error",h),e.j.ha(e.h,"firstquartile",function(){p(),e.g(new ci("ad-first-quartile"))}),e.j.ha(e.h,"midpoint",function(){p(),e.g(new ci("ad-midpoint"))}),e.j.ha(e.h,"thirdquartile",function(){p(),e.g(new ci("ad-third-quartile"))}),e.j.ha(e.h,"complete",f),e.j.D(e.s,"play",function(){e.g(new ci("ad-resumed"))}),e.j.D(e.s,"pause",function(){e.g(new ci("ad-paused"))}),e.j.D(e.s,"volumechange",function(){e.s.muted?e.g(new ci("ad-muted")):e.g(new ci("ad-volume-changed"))}),k(x,4),t.Ef&&(c=new Rt(function(){g.skip()}).Y(t.Ef)),pp(e),S(x,e.h.Rb(e.s),6);case 6:return e.o.has(t)?S(x,e.o.get(t),10):S(x,e.h.load(t.uri),8);case 10:return y=x.h,e.o.delete(t),S(x,y?e.h.load(y):e.h.load(t.uri),8);case 8:v=(Date.now()-s)/1e3,e.g(new ci("ads-loaded",(new Map).set("loadTime",v))),e.m&&e.i.play(),A(x,0);break;case 4:b=E(x),h(b),T(x)}})}function cp(e){for(var t=[],n=p(e.A),o=n.next(),i={};!o.done;i={Qb:void 0},o=n.next())o=o.value,i.Qb={start:o.startTime,end:null},o.Ab?(i.Qb.start=0,i.Qb.end=null):o.nc?(i.Qb.start=-1,i.Qb.end=null):o.se&&(i.Qb.end=o.endTime),t.find(function(e){return function(t){return e.Qb.start==t.start&&e.Qb.end==t.end}}(i))||t.push(i.Qb);e.g(new ci("ad-cue-points-changed",(new Map).set("cuepoints",t)))}function pp(e){e.h.configure(e.B.Ag());var t=e.h.xb();t.mg(),t.ng(),vi(e.B.xb(),t)}function dp(e){this.h=e||"",this.g=0}function hp(e){fp(e,/[ \t]+/gm)}function fp(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function mp(e){return e.g==e.h.length?null:(e=fp(e,/[^ \t\n]*/gm))?e[0]:null}function gp(e,t,n,o,i){if(this.h=e,e=this.h.skipOffset)if(null==(e=fp(new dp(e),yp)))e=null;else{var r=Number(e[2]),s=Number(e[3]);e=59<r||59<s?null:(Number(e[4])||0)/1e3+s+60*r+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=i,this.i=t,this.l=n,this.o=o,this.m=!1}(i=Jc.prototype).needsSkipUI=function(){return!1},i.getDuration=function(){return this.g.getDuration()},i.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.h.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.h.getAdSkippableState()},i.skip=function(){return this.h.skip()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.resume()},i.getVolume=function(){return this.h.getVolume()},i.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},i.isMuted=function(){return 0==this.h.getVolume()},i.isLinear=function(){return this.g.isLinear()},i.resize=function(e,t){var n=!1,o=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:o.webkitSupportsFullscreen&&(n=o.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return this.g.getMediaUrl()},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.g=null},$("shaka.ads.ClientSideAd",Jc),Jc.prototype.release=Jc.prototype.release,Jc.prototype.getPodIndex=Jc.prototype.getPodIndex,Jc.prototype.getTimeOffset=Jc.prototype.getTimeOffset,Jc.prototype.getMediaUrl=Jc.prototype.getMediaUrl,Jc.prototype.getAdvertiserName=Jc.prototype.getAdvertiserName,Jc.prototype.getCreativeAdId=Jc.prototype.getCreativeAdId,Jc.prototype.getAdId=Jc.prototype.getAdId,Jc.prototype.getVastMediaWidth=Jc.prototype.getVastMediaWidth,Jc.prototype.getVastMediaHeight=Jc.prototype.getVastMediaHeight,Jc.prototype.getVastMediaBitrate=Jc.prototype.getVastMediaBitrate,Jc.prototype.getDescription=Jc.prototype.getDescription,Jc.prototype.getTitle=Jc.prototype.getTitle,Jc.prototype.getPositionInSequence=Jc.prototype.getPositionInSequence,Jc.prototype.getSequenceLength=Jc.prototype.getSequenceLength,Jc.prototype.setMuted=Jc.prototype.setMuted,Jc.prototype.resize=Jc.prototype.resize,Jc.prototype.isLinear=Jc.prototype.isLinear,Jc.prototype.isMuted=Jc.prototype.isMuted,Jc.prototype.setVolume=Jc.prototype.setVolume,Jc.prototype.getVolume=Jc.prototype.getVolume,Jc.prototype.play=Jc.prototype.play,Jc.prototype.pause=Jc.prototype.pause,Jc.prototype.skip=Jc.prototype.skip,Jc.prototype.canSkipNow=Jc.prototype.canSkipNow,Jc.prototype.getTimeUntilSkippable=Jc.prototype.getTimeUntilSkippable,Jc.prototype.isSkippable=Jc.prototype.isSkippable,Jc.prototype.isPaused=Jc.prototype.isPaused,Jc.prototype.getRemainingTime=Jc.prototype.getRemainingTime,Jc.prototype.getMinSuggestedDuration=Jc.prototype.getMinSuggestedDuration,Jc.prototype.getDuration=Jc.prototype.getDuration,Jc.prototype.needsSkipUI=Jc.prototype.needsSkipUI,$("shaka.ads.Utils",Zc),Zc.ADS_LOADED="ads-loaded",Zc.AD_STARTED="ad-started",Zc.AD_FIRST_QUARTILE="ad-first-quartile",Zc.AD_MIDPOINT="ad-midpoint",Zc.AD_THIRD_QUARTILE="ad-third-quartile",Zc.AD_COMPLETE="ad-complete",Zc.AD_STOPPED="ad-stopped",Zc.AD_SKIPPED="ad-skipped",Zc.AD_VOLUME_CHANGED="ad-volume-changed",Zc.AD_MUTED="ad-muted",Zc.AD_PAUSED="ad-paused",Zc.AD_RESUMED="ad-resumed",Zc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Zc.CUEPOINTS_CHANGED="ad-cue-points-changed",Zc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Zc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Zc.AD_CLICKED="ad-clicked",Zc.AD_PROGRESS="ad-progress",Zc.AD_BUFFERING="ad-buffering",Zc.AD_IMPRESSION="ad-impression",Zc.AD_DURATION_CHANGED="ad-duration-changed",Zc.AD_CLOSED="ad-closed",Zc.AD_LOADED="ad-loaded",Zc.ALL_ADS_COMPLETED="all-ads-completed",Zc.AD_LINEAR_CHANGED="ad-linear-changed",Zc.AD_METADATA="ad-metadata",Zc.AD_RECOVERABLE_ERROR="ad-recoverable-error",Zc.AD_ERROR="ad-error",Zc.AD_BREAK_READY="ad-break-ready",Zc.AD_INTERACTION="ad-interaction",Zc.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Zc.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Zc.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",ep.prototype.configure=function(e){this.o=e},ep.prototype.stop=function(){this.g&&this.g.stop(),this.s&&xu(this.s)},ep.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()},(i=rp.prototype).needsSkipUI=function(){return!0},i.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.h},i.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.j()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.l},i.getPositionInSequence=function(){return this.i},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getAdId=function(){return""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.g=null},$("shaka.ads.InterstitialAd",rp),rp.prototype.release=rp.prototype.release,rp.prototype.getPodIndex=rp.prototype.getPodIndex,rp.prototype.getTimeOffset=rp.prototype.getTimeOffset,rp.prototype.getMediaUrl=rp.prototype.getMediaUrl,rp.prototype.getAdvertiserName=rp.prototype.getAdvertiserName,rp.prototype.getCreativeAdId=rp.prototype.getCreativeAdId,rp.prototype.getAdId=rp.prototype.getAdId,rp.prototype.getVastMediaWidth=rp.prototype.getVastMediaWidth,rp.prototype.getVastMediaHeight=rp.prototype.getVastMediaHeight,rp.prototype.getVastMediaBitrate=rp.prototype.getVastMediaBitrate,rp.prototype.getDescription=rp.prototype.getDescription,rp.prototype.getTitle=rp.prototype.getTitle,rp.prototype.getPositionInSequence=rp.prototype.getPositionInSequence,rp.prototype.getSequenceLength=rp.prototype.getSequenceLength,rp.prototype.setMuted=rp.prototype.setMuted,rp.prototype.resize=rp.prototype.resize,rp.prototype.isLinear=rp.prototype.isLinear,rp.prototype.isMuted=rp.prototype.isMuted,rp.prototype.setVolume=rp.prototype.setVolume,rp.prototype.getVolume=rp.prototype.getVolume,rp.prototype.play=rp.prototype.play,rp.prototype.pause=rp.prototype.pause,rp.prototype.skip=rp.prototype.skip,rp.prototype.canSkipNow=rp.prototype.canSkipNow,rp.prototype.getTimeUntilSkippable=rp.prototype.getTimeUntilSkippable,rp.prototype.isSkippable=rp.prototype.isSkippable,rp.prototype.isPaused=rp.prototype.isPaused,rp.prototype.getRemainingTime=rp.prototype.getRemainingTime,rp.prototype.getMinSuggestedDuration=rp.prototype.getMinSuggestedDuration,rp.prototype.getDuration=rp.prototype.getDuration,rp.prototype.needsSkipUI=rp.prototype.needsSkipUI,sp.prototype.configure=function(e){this.F&&this.m==e.supportsMultipleMediaElements&&((this.m=!e.supportsMultipleMediaElements)?(this.s=this.i,this.C&&(this.C.parentElement&&this.F.removeChild(this.C),this.C=null)):(this.C||((e=document.createElement(this.i.tagName)).autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.C=e),this.s=this.C))},sp.prototype.stop=function(){this.j&&this.j.Ra(),this.G.clear(),this.A.clear(),this.h.Qe(),this.o.clear(),this.h.detach(),this.H=!1,this.l=null},sp.prototype.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.F&&xu(this.F),this.h.destroy()},(i=gp.prototype).needsSkipUI=function(){return!0},i.getDuration=function(){return this.h.durationInSeconds},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return"number"==typeof this.j},i.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return this.o},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.l?this.l:1},i.getPositionInSequence=function(){return this.i?this.i:1},i.getTitle=function(){return this.h.adTitle},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getAdId=function(){return this.h.adId},i.getCreativeAdId=function(){return this.h.creativeId},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.l=this.i=this.g=this.h=null},$("shaka.ads.MediaTailorAd",gp),gp.prototype.release=gp.prototype.release,gp.prototype.getPodIndex=gp.prototype.getPodIndex,gp.prototype.getTimeOffset=gp.prototype.getTimeOffset,gp.prototype.getMediaUrl=gp.prototype.getMediaUrl,gp.prototype.getAdvertiserName=gp.prototype.getAdvertiserName,gp.prototype.getCreativeAdId=gp.prototype.getCreativeAdId,gp.prototype.getAdId=gp.prototype.getAdId,gp.prototype.getVastMediaWidth=gp.prototype.getVastMediaWidth,gp.prototype.getVastMediaHeight=gp.prototype.getVastMediaHeight,gp.prototype.getVastMediaBitrate=gp.prototype.getVastMediaBitrate,gp.prototype.getDescription=gp.prototype.getDescription,gp.prototype.getTitle=gp.prototype.getTitle,gp.prototype.getPositionInSequence=gp.prototype.getPositionInSequence,gp.prototype.getSequenceLength=gp.prototype.getSequenceLength,gp.prototype.setMuted=gp.prototype.setMuted,gp.prototype.resize=gp.prototype.resize,gp.prototype.isLinear=gp.prototype.isLinear,gp.prototype.isMuted=gp.prototype.isMuted,gp.prototype.setVolume=gp.prototype.setVolume,gp.prototype.getVolume=gp.prototype.getVolume,gp.prototype.play=gp.prototype.play,gp.prototype.pause=gp.prototype.pause,gp.prototype.skip=gp.prototype.skip,gp.prototype.canSkipNow=gp.prototype.canSkipNow,gp.prototype.getTimeUntilSkippable=gp.prototype.getTimeUntilSkippable,gp.prototype.isSkippable=gp.prototype.isSkippable,gp.prototype.isPaused=gp.prototype.isPaused,gp.prototype.getRemainingTime=gp.prototype.getRemainingTime,gp.prototype.getMinSuggestedDuration=gp.prototype.getMinSuggestedDuration,gp.prototype.getDuration=gp.prototype.getDuration,gp.prototype.needsSkipUI=gp.prototype.needsSkipUI;var yp=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function vp(e,t,n,o){this.B=e,this.K=t,this.h=n,this.l=null,this.U=NaN,this.i=o,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.o=new te}function bp(e,t){var n,o,i,r,s,a,l;P(function(u){return 1==u.g?t.staticResource?(n=xp(t),e.F.get(n)?u.return():(o=bi([t.staticResource],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),i=e.K.request(7,o),k(u,2),e.F.set(n,[]),S(u,i.promise,4))):u.return():2!=u.g?(r=u.h,s=rn(r.data),a=JSON.parse(s),l=a.apps,e.F.set(n,l),A(u,0)):(E(u),e.F.delete(n),void T(u))})}function xp(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function wp(e){var t=e.h.currentTime;if(0!=t&&null==e.A){for(var n,o,i=p(e.j),r=i.next();!r.done;r=i.next())for(var s=p((r=r.value).ads),a=s.next();!a.done;a=s.next())if(a=a.value,o){if(a.startTimeInSeconds<t&&a.startTimeInSeconds>o.startTimeInSeconds+o.durationInSeconds){o=a,n=r;break}}else a.startTimeInSeconds<t&&(o=a,n=r);n&&o&&!e.N.includes(o.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function Sp(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var o=e.C,i=o.startTimeInSeconds+.5*o.durationInSeconds,r=o.startTimeInSeconds+.75*o.durationInSeconds;t>=o.startTimeInSeconds+.25*o.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),Cp(e,"firstQuartile")):t>=i&&!e.s.includes("midpoint")?(e.s.push("midpoint"),Cp(e,"midpoint")):t>=r&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),Cp(e,"thirdQuartile")),o=e.g.getRemainingTime(),i=e.g.getDuration(),e.g.canSkipNow()&&0<o&&0<i&&Cp(e,"skipStateChanged"),0<i&&(0>=o||o>i)&&Tp(e)}if(!e.g||!e.g.isLinear()){e:for(o=p(e.j),i=o.next();!i.done&&(i=i.value,!e.g||!e.g.isLinear());i=o.next())for(r=0;r<i.ads.length;r++){var s=i.ads[r],a=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&a>t){if(e.N.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=a;break e}Tp(e),e.L=i,e.g=new gp(s,r+1,i.ads.length,!0,e.h),e.C=s,0===r&&Cp(e,"breakStart"),kp(e);break}}if(!e.g)for(i=(o=p(e.j)).next();!i.done&&(i=i.value,!e.g);i=o.next())for(r=0;r<i.nonLinearAdsList.length;r++)if((s=i.nonLinearAdsList[r]).nonLinearAdList.length){a=i.startTimeInSeconds;var l=e.F.get(xp(s.nonLinearAdList[0]));if(a<=t&&l&&l.length){Tp(e),a=e;for(var u=(l=p(l)).next();!u.done;u=l.next())if((u=u.value).data.source.length){var c=document.createElement("img");c.src=u.data.source[0].url,c.style.top=(u.placeholder.top||0)+"%",c.style.height=100-(u.placeholder.top||0)+"%",c.style.left=(u.placeholder.left||0)+"%",c.style.maxWidth=100-(u.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",a.B.appendChild(c)}e.L=i,e.g=new gp(s,r+1,i.ads.length,!1,e.h),e.C=s,0===r&&Cp(e,"breakStart"),kp(e);break}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function Tp(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;Cp(e,void 0!==t&&t?"skip":"complete");for(var n=(t=p(e.m)).next();!n.done;n=t.next())n=n.value,e.o.jb(n.target,n.type,n.listener);e.m=[],e.s=[],(t=e.g.getPositionInSequence())===(n=e.g.getSequenceLength())&&Cp(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function kp(e){var t=!1;e.h.paused?t=!0:(Cp(e,"impression"),Cp(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Cp(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Cp(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Cp(e,"impression"),Cp(e,"start"),t=!1):Cp(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Cp(e,"pause")}});for(var n=p(e.m),o=n.next();!o.done;o=n.next())o=o.value,e.o.D(o.target,o.type,o.listener)}function Cp(e,t){var n=e.C.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n)for(var o=(n=p(n.beaconUrls)).next();!o.done;o=n.next())(o=o.value)&&""!=o&&((o=bi([o],ni())).method="POST",e.K.request(7,o));switch(t){case"impression":e.i(new ci("ad-impression"));break;case"start":e.i(new ci("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new ci("ad-muted"));break;case"unmute":e.i(new ci("ad-volume-changed"));break;case"resume":e.i(new ci("ad-resumed"));break;case"pause":e.i(new ci("ad-paused"));break;case"firstQuartile":e.i(new ci("ad-first-quartile"));break;case"midpoint":e.i(new ci("ad-midpoint"));break;case"thirdQuartile":e.i(new ci("ad-third-quartile"));break;case"complete":e.i(new ci("ad-complete")),e.i(new ci("ad-stopped"));break;case"skip":e.i(new ci("ad-skipped")),e.i(new ci("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new ci("ad-skip-state-changed"))}}function Ap(e,t){this.g=e,this.i=null,this.h=t}function Ep(e,t,n,o){var i=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=o,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new te,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new ci("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){!function(e,t){e.i(new ci("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}})}(i,e)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){i.B.length?i.j.resolve(i.B):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),i.m=new Ap(e,i.l),i.A&&(i.m.i=i.A),i.i(new ci("ad-started",(new Map).set("ad",i.m))),i.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){i.s.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){i.A=e.getStreamData().adProgressData,i.m&&(i.m.i=i.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){i.i(new ci("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){i.i(new ci("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){i.i(new ci("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){i.i(new ci("ad-complete")),i.i(new ci("ad-stopped")),i.s.removeAttribute("ad-active"),i.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){i.i(new ci("ad-skipped")),i.i(new ci("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[];for(var n=(t=p(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.C=e,i.i(new ci("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Ip(){hi.call(this),this.g=this.h=this.i=this.j=null,this.m=new Yc,this.o=navigator.language,this.l=null}function Mp(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}function Rp(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof ci){var n={};for(o in t)(e=t[o])&&"object"==typeof e?"detail"==o&&(n[o]=e):o in Event||(n[o]=e);return n}if(t instanceof Error){var o=new Set(["name","message","stack"]);for(n in t)o.add(n);for(e=(n=p(Object.getOwnPropertyNames(t))).next();!e.done;e=n.next())o.add(e.value);for(n={},e=(o=p(o)).next();!e.done;e=o.next())n[e=e.value]=t[e];t={__type__:"Error",contents:n}}else if(t instanceof TimeRanges){for(o={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=p(fs(t))).next();!n.done;n=t.next())e=(n=n.value).end,o.start.push(n.start),o.end.push(e);t=o}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}})}function _p(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n})}vp.prototype.stop=function(){for(var e=p(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.jb(t.target,t.type,t.listener);Tp(this),this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},vp.prototype.release=function(){this.stop(),this.o&&this.o.release()},vp.prototype.onManifestUpdated=function(e){this.I=e,""!=this.G&&(function(e,t,n){var o,i,r,s,a,l,u,c,d,h,f,m,g,y,v;P(function(b){if(1==b.g)return o=bi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),i=e.K.request(7,o),k(b,2),S(b,i.promise,4);if(2!=b.g){if(r=b.h,s=[],a=rn(r.data),0<(l=JSON.parse(a)).avails.length){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,u=p(e.j),c=u.next();!c.done;c=u.next())for(d=c.value,h=p(d.nonLinearAdsList),f=h.next();!f.done;f=h.next())for(m=f.value,g=p(m.nonLinearAdList),y=g.next();!y.done;y=g.next())v=y.value,bp(e,v);s=e.getCuePoints(),e.i(new ci("ad-cue-points-changed",(new Map).set("cuepoints",s)))}}else e.j.length&&e.i(new ci("ad-cue-points-changed",(new Map).set("cuepoints",s))),Tp(e),e.j=[];return n&&(e.I||0<s.length)&&function(e){Sp(e),e.I||(wp(e),e.o.D(e.h,"seeked",function(){wp(e)}),e.o.D(e.h,"ended",function(){Tp(e)})),e.o.D(e.h,"timeupdate",function(){Sp(e)})}(e),A(b,0)}E(b),T(b)})}(this,this.G,this.R),this.R=!1)},vp.prototype.getCuePoints=function(){for(var e=[],t=p(this.j),n=t.next();!n.done;n=t.next())for(var o=(n=p(n.value.ads)).next();!o.done;o=n.next())o=o.value,e.push({start:o.startTimeInSeconds,end:o.startTimeInSeconds+o.durationInSeconds});return e},(i=Ap.prototype).needsSkipUI=function(){return!0},i.getDuration=function(){return this.i?this.i.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},i.isPaused=function(){return this.h.paused},i.isSkippable=function(){return this.g.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.h.currentTime+=this.getRemainingTime()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.play()},i.getVolume=function(){return this.h.volume},i.setVolume=function(e){this.h.volume=e},i.isMuted=function(){return this.h.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.h.muted=e},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.i=this.g=null},$("shaka.ads.ServerSideAd",Ap),Ap.prototype.release=Ap.prototype.release,Ap.prototype.getPodIndex=Ap.prototype.getPodIndex,Ap.prototype.getTimeOffset=Ap.prototype.getTimeOffset,Ap.prototype.getMediaUrl=Ap.prototype.getMediaUrl,Ap.prototype.getAdvertiserName=Ap.prototype.getAdvertiserName,Ap.prototype.getCreativeAdId=Ap.prototype.getCreativeAdId,Ap.prototype.getAdId=Ap.prototype.getAdId,Ap.prototype.getVastMediaWidth=Ap.prototype.getVastMediaWidth,Ap.prototype.getVastMediaHeight=Ap.prototype.getVastMediaHeight,Ap.prototype.getVastMediaBitrate=Ap.prototype.getVastMediaBitrate,Ap.prototype.getDescription=Ap.prototype.getDescription,Ap.prototype.getTitle=Ap.prototype.getTitle,Ap.prototype.getPositionInSequence=Ap.prototype.getPositionInSequence,Ap.prototype.getSequenceLength=Ap.prototype.getSequenceLength,Ap.prototype.setMuted=Ap.prototype.setMuted,Ap.prototype.resize=Ap.prototype.resize,Ap.prototype.isLinear=Ap.prototype.isLinear,Ap.prototype.isMuted=Ap.prototype.isMuted,Ap.prototype.setVolume=Ap.prototype.setVolume,Ap.prototype.getVolume=Ap.prototype.getVolume,Ap.prototype.play=Ap.prototype.play,Ap.prototype.pause=Ap.prototype.pause,Ap.prototype.skip=Ap.prototype.skip,Ap.prototype.canSkipNow=Ap.prototype.canSkipNow,Ap.prototype.getTimeUntilSkippable=Ap.prototype.getTimeUntilSkippable,Ap.prototype.isSkippable=Ap.prototype.isSkippable,Ap.prototype.isPaused=Ap.prototype.isPaused,Ap.prototype.getRemainingTime=Ap.prototype.getRemainingTime,Ap.prototype.getMinSuggestedDuration=Ap.prototype.getMinSuggestedDuration,Ap.prototype.getDuration=Ap.prototype.getDuration,Ap.prototype.needsSkipUI=Ap.prototype.needsSkipUI,(i=Ep.prototype).configure=function(){},i.stop=function(){this.B="",this.o=null,this.C=[]},i.release=function(){this.stop(),this.h&&this.h.release()},i.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},i.getCuePoints=function(){return this.C},v(Ip,hi),(i=Ip.prototype).setLocale=function(e){this.o=e},i.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},i.initInterstitial=function(e,t,n){var o=this;this.j&&this.j.release(),this.j=new sp(e,t,n,function(e){return Mp(o,e)}),this.j.configure(this.l)},i.initClientSide=function(t,n,o){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new St(2,10,1e4);this.i&&this.i.release(),this.i=new ep(t,n,this.o,o,function(e){return Mp(i,e)}),this.i.configure(this.l)},i.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),hi.prototype.release.call(this)},i.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new ci("ad-stopped")),this.dispatchEvent(new ci("ad-content-attach-requested")),this.m=new Yc},i.requestClientSideAds=function(e){if(!this.i)throw new St(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},i.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new St(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},i.initMediaTailor=function(e,t,n){var o=this;this.h&&this.h.release(),this.h=new vp(e,t,n,function(e){return Mp(o,e)})},i.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new St(1,10,10005);var o=this.h;return n=void 0===n?"":n,o.l?e=Promise.reject(new St(1,10,10004)):(o.l=new oi,function(e,t,n){var o,i,r,s,a,l,u,c,p,d,h;P(function(f){if(1==f.g)return(o=bi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",n&&(i=JSON.stringify(n),o.body=ln(i)),r=e.K.request(7,o),k(f,2),S(f,r.promise,4);if(2!=f.g){if(s=f.h,a=rn(s.data),!(l=JSON.parse(a)).manifestUrl||!l.trackingUrl)throw Error("Insufficient data from MediaTailor.");return u=new st(t),c=new st(l.trackingUrl),e.G=u.resolve(c).toString(),p=Date.now()/1e3,d=p-e.U,e.i(new ci("ads-loaded",(new Map).set("loadTime",d))),h=new st(l.manifestUrl),e.l.resolve(u.resolve(h).toString()),e.l=null,A(f,0)}if(E(f),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,f.return();e.l.resolve(e.H),e.l=null,T(f)})}(o,e,t),o.H=n||"",o.U=Date.now()/1e3,e=o.l),e},i.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new St(1,10,10005);var t=this.h;t.G=e,t.i(new ci("ads-loaded",(new Map).set("loadTime",0)))},i.initServerSide=function(t,n){var o=this;if(!e.google||!google.ima||!google.ima.dai)throw new St(2,10,10002);this.g&&this.g.release(),this.g=new Ep(t,n,this.o,function(e){return Mp(o,e)}),this.g.configure(this.l)},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new St(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.12",(n=this.g).j?e=Promise.reject(new St(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new oi,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new St(1,10,10003);(e.mpt||e.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.12",this.g.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){return le("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},i.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},i.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Qc(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},i.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},i.onDashTimedMetadata=function(e){this.g&&"urn:google:dai:2018"==e.schemeIdUri&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},i.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},i.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&ap(this.j,n)},$("shaka.ads.AdManager",Ip),Ip.prototype.onInterstitialMetadata=Ip.prototype.onInterstitialMetadata,Ip.prototype.onCueMetadataChange=Ip.prototype.onCueMetadataChange,Ip.prototype.onHlsTimedMetadata=Ip.prototype.onHlsTimedMetadata,Ip.prototype.onDashTimedMetadata=Ip.prototype.onDashTimedMetadata,Ip.prototype.onManifestUpdated=Ip.prototype.onManifestUpdated,Ip.prototype.getStats=Ip.prototype.getStats,Ip.prototype.getCuePoints=Ip.prototype.getCuePoints,Ip.prototype.getServerSideCuePoints=Ip.prototype.getServerSideCuePoints,Ip.prototype.replaceServerSideAdTagParameters=Ip.prototype.replaceServerSideAdTagParameters,Ip.prototype.requestServerSideStream=Ip.prototype.requestServerSideStream,Ip.prototype.initServerSide=Ip.prototype.initServerSide,Ip.prototype.addMediaTailorTrackingUrl=Ip.prototype.addMediaTailorTrackingUrl,Ip.prototype.requestMediaTailorStream=Ip.prototype.requestMediaTailorStream,Ip.prototype.initMediaTailor=Ip.prototype.initMediaTailor,Ip.prototype.updateClientSideAdsRenderingSettings=Ip.prototype.updateClientSideAdsRenderingSettings,Ip.prototype.requestClientSideAds=Ip.prototype.requestClientSideAds,Ip.prototype.onAssetUnload=Ip.prototype.onAssetUnload,Ip.prototype.release=Ip.prototype.release,Ip.prototype.initClientSide=Ip.prototype.initClientSide,Ip.prototype.initInterstitial=Ip.prototype.initInterstitial,Ip.prototype.configure=Ip.prototype.configure,Ip.prototype.setLocale=Ip.prototype.setLocale,Ip.ADS_LOADED="ads-loaded",Ip.AD_STARTED="ad-started",Ip.AD_FIRST_QUARTILE="ad-first-quartile",Ip.AD_MIDPOINT="ad-midpoint",Ip.AD_THIRD_QUARTILE="ad-third-quartile",Ip.AD_COMPLETE="ad-complete",Ip.AD_STOPPED="ad-stopped",Ip.AD_SKIPPED="ad-skipped",Ip.AD_VOLUME_CHANGED="ad-volume-changed",Ip.AD_MUTED="ad-muted",Ip.AD_PAUSED="ad-paused",Ip.AD_RESUMED="ad-resumed",Ip.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Ip.CUEPOINTS_CHANGED="ad-cue-points-changed",Ip.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Ip.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Ip.AD_CLICKED="ad-clicked",Ip.AD_PROGRESS="ad-progress",Ip.AD_BUFFERING="ad-buffering",Ip.AD_IMPRESSION="ad-impression",Ip.AD_DURATION_CHANGED="ad-duration-changed",Ip.AD_CLOSED="ad-closed",Ip.AD_LOADED="ad-loaded",Ip.ALL_ADS_COMPLETED="all-ads-completed",Ip.AD_LINEAR_CHANGED="ad-linear-changed",Ip.AD_METADATA="ad-metadata",Ip.AD_RECOVERABLE_ERROR="ad-recoverable-error",Ip.AD_ERROR="ad-error",Ip.AD_BREAK_READY="ad-break-ready",Ip.AD_INTERACTION="ad-interaction",Ip.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Ip.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Ip.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Kc=function(){return new Ip};var Lp="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Dp="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Pp=["loop","playbackRate"],Op=["pause","play"],Np={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},Up={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Bp={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},jp=[["getConfiguration","configure"]],Fp=[["isTextTrackVisible","setTextTrackVisibility"]],zp="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),$p=["attach","attachCanvas","detach","load","unload"];function Gp(e,t,n,o,i,r,s){var a=this;this.G=e,this.K=s,this.l=new Rt(t),this.L=n,this.s=!1,this.A=o,this.F=i,this.N=r,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return Xp(a)},this.C=function(e,t){switch((e=_p(t)).type){case"event":var n=e.targetName,o=pi(e.event);a.A(n,o);break;case"update":for(o in n=e.update)for(var i in e=a.g[o]||{},n[o])e[i]=n[o][i];a.s&&(a.L(),a.s=!1);break;case"asyncComplete":if(o=e.id,i=e.error,e=a.i[o],delete a.i[o],e)if(i){for(n in o=new St(i.severity,i.category,i.code),i)o[n]=i[n];e.reject(o)}else e.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,ed.add(this)}function Vp(e,t){var n=e.N();Jp=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),Xp(e),Kp(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Hp(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new St(2,8,n,t))}function qp(e){var t=Jp;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function Xp(e){var t=!!Jp&&"connected"==Jp.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};Wp(e)}e.h=t,e.I=t?Jp.receiver.friendlyName:"",e.l.tc()}function Wp(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new St(1,7,7e3))}}function Kp(e,t){t=Rp(t);var n=Jp;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},J)}catch(o){throw t=new St(2,8,8005,o),n=new ci("error",(new Map).set("detail",t)),e.A("player",n),e.Cc(),t}}(i=Gp.prototype).destroy=function(){return ed.delete(this),Wp(this),Jp&&qp(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},i.fb=function(){return this.h},i.Ff=function(){return this.I},i.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.tc();var t=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=p(ed),n=t.next();!n.done;n=t.next()){var o=e;(n=n.value).j=new oi,n.s=!0,Vp(n,o)}},function(e){for(var t=p(ed),n=t.next();!n.done;n=t.next())n=n.value,Qp="available"==e,n.l.tc()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),Qp&&this.l.Y(Yp),(t=Jp)&&t.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new oi,this.s=!0,Vp(this,t)):Jp=null}else e.__onGCastApiAvailable!==td&&(Zp=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=td)},i.Nf=function(e){this.o=e,this.h&&Kp(this,{type:"appData",appData:this.o})},i.cast=function(){var e=this;return P(function(t){if(!e.m)throw new St(1,8,8e3);if(!Qp)throw new St(1,8,8001);if(e.h)throw new St(1,8,8002);return e.j=new oi,chrome.cast.requestSession(function(t){return Vp(e,t)},function(t){return Hp(e,t)}),S(t,e.j,0)})},i.Cc=function(){if(this.h){if(Wp(this),Jp){qp(this);try{Jp.stop(function(){},function(){})}catch(mS){}Jp=null}Xp(this)}},i.get=function(e,t){var n=this;if("video"==e){if(Op.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(d(O.apply(0,arguments))))}}else if("player"==e){if(Bp[t]&&!this.get("player","isLive")())return function(){};if(zp.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(d(O.apply(0,arguments))))};if($p.includes(t))return function(){return n.Ki.apply(n,[e,t].concat(d(O.apply(0,arguments))))};if(Np[t]||Up[t])return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,Kp(this,{type:"set",targetName:e,property:t,value:n})},i.Ug=function(e,t){Kp(this,{type:"call",targetName:e,methodName:t,args:O.apply(2,arguments)})},i.Ki=function(e,t){var n=O.apply(2,arguments),o=new oi,i=this.H.toString();this.H++,this.i[i]=o;try{Kp(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(r){o.reject(r)}return o};var Yp=.02,Qp=!1,Jp=null,Zp=null,ed=new Set;function td(t){if(Zp?e.__onGCastApiAvailable=Zp:delete e.__onGCastApiAvailable,Zp=null,t)for(var n=p(ed),o=n.next();!o.done;o=n.next())o.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function nd(e,t,n,o){o=void 0!==o&&o,hi.call(this);var i=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=o,this.A=new Map,this.g=new Gp(n,function(){return rd(i)},function(){return sd(i)},function(e,t){return ud(i,e,t)},function(){return ad(i)},function(){return id(i)},o),function(e){e.g.init(),e.m=new te;for(var t=p(Lp),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(t){e.g.fb()||(t=pi(t),e.j.dispatchEvent(t))});for(var o in di)e.m.D(e.h,di[o],function(t){e.g.fb()||e.o.dispatchEvent(t)});for(var i in e.l={},t={},e.i)(t={nd:t.nd}).nd=i,Object.defineProperty(e.l,t.nd,{configurable:!1,enumerable:!0,get:function(t){return function(){return ld(e,t.nd)}}(t),set:function(t){return function(n){var o=t.nd;e.g.fb()?e.g.set("video",o,n):e.i[o]=n}}(t)});e.s={},od(e,function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.A.has(t)&&(t=e.A.get(t)),"addEventListener"==t)return function(t,n,o){return e.o.addEventListener(t,n,o)};if("removeEventListener"==t)return function(t,n,o){return e.o.removeEventListener(t,n,o)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.xb()};if("getDrmEngine"==t)return function(){return e.h.B};if("getAdManager"==t)return function(){return e.h.ug()};if("setVideoContainer"==t)return function(t){return e.h.ih(t)};if(e.g.fb()){if("getManifest"==t||"drmInfo"==t)return function(){return Y(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return Y(t+"() does not work while casting!"),Promise.resolve()}}return e.g.fb()&&0==Object.keys(e.g.g.video).length&&(Np[t]||Up[t])||!e.g.fb()?e.h[t].bind(e.h):e.g.get("player",t)}(e,t)}})}),function(e){var t=new Map;od(e,function(n,o){t.has(o)?(o=t.get(o),n.length<o.length?e.A.set(n,o):e.A.set(o,n)):t.set(o,n)})}(e),e.j=new hi,e.j.me=e.l,e.o=new hi,e.o.me=e.s}(this)}function od(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var o,i=e.h,r=new Set;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=p(Object.getOwnPropertyNames(e)),a=s.next();!a.done;a=s.next())n(a=a.value)&&(r.add(a),t(a,i[a]));e=Object.getPrototypeOf(e)}}function id(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dc(),startTime:null};e.i.pause();for(var n=p(Pp),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.i[o];for(e.i.ended||(t.startTime=e.i.currentTime),o=(n=p(jp)).next();!o.done;o=n.next()){var i=o.value;o=i[1],i=e.h[i[0]](),t.player[o]=i}for(o=(n=p(Fp)).next();!o.done;o=n.next())o=(i=o.value)[1],i=e.h[i[0]](),t.playerAfterLoad[o]=i;return t}function rd(e){var t=new ci("caststatuschanged");e.dispatchEvent(t)}function sd(e){var t=new ci(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function ad(e){for(var t=p(jp),n=t.next();!n.done;n=t.next()){var o=n.value;n=o[1],o=e.g.get("player",o[0])(),e.h[n](o)}var i=e.g.get("player","getAssetUri")();o=e.g.get("video","ended"),t=Promise.resolve();var r,s=e.i.autoplay;n=null,o||(n=e.g.get("video","currentTime")),(o=e.g.get("player","getTextTracks")())&&o.length&&(r=o.find(function(e){return e.active}));var a=e.g.get("player","isTextTrackVisible")();i&&(e.i.autoplay=!1,t=e.h.load(i,n));var l={};for(o=(n=p(Pp)).next();!o.done;o=n.next())o=o.value,l[o]=e.g.get("video",o);t.then(function(){if(e.i){for(var t=p(Pp),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=l[n];for(n=(t=p(Fp)).next();!n.done;n=t.next()){var o=n.value;n=o[1],o=e.g.get("player",o[0])(),e.h[n](o)}e.h.eh(a),r&&e.h.Lf(r.language,r.roles,r.forced),e.i.autoplay=s,i&&e.i.play()}},function(t){t=new ci("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)})}function ld(e,t){if("addEventListener"==t)return function(t,n,o){return e.j.addEventListener(t,n,o)};if("removeEventListener"==t)return function(t,n,o){return e.j.removeEventListener(t,n,o)};if(e.g.fb()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.fb()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function ud(e,t,n){e.g.fb()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function cd(e,t,n,o){hi.call(this);var i=this;this.g=e,this.h=t,this.j=new te,this.H={video:e,player:t},this.F=n||function(){},this.I=o||function(e){return e},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new Rt(function(){fd(i)}),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return pd(e)},t.onSenderDisconnected=function(){return pd(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&vd(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),vd(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return function(e,t){var n=_p(t.data);switch(n.type){case"PLAY":e.g.play(),bd(e);break;case"PAUSE":e.g.pause(),bd(e);break;case"SEEK":t=n.currentTime;var o=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),o&&"PLAYBACK_START"==o?(e.g.play(),bd(e)):o&&"PLAYBACK_PAUSE"==o&&(e.g.pause(),bd(e));break;case"STOP":e.h.bc().then(function(){e.h&&bd(e)});break;case"GET_STATUS":gd(e,Number(n.requestId));break;case"VOLUME":t=(o=n.volume).level,o=o.muted;var i=e.g.volume,r=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=o&&(e.g.muted=o),i==e.g.volume&&r==e.g.muted||bd(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,o=n.currentTime,i=e.I(t.contentId),r=n.autoplay||!0,e.F(t.customData),r&&(e.g.autoplay=!0),e.h.load(i,o).then(function(){e.h&&gd(e)}).catch(function(t){var o="LOAD_FAILED";7==t.category&&7e3==t.code&&(o="LOAD_CANCELLED"),vd(e,{requestId:Number(n.requestId),type:o},e.s)});break;default:vd(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=_p(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,function(e,t,n){var o,i,r,s,a,l,u,c,p,d;P(function(h){switch(h.g){case 1:for(o in t.player)i=t.player[o],e.h[o](i);return e.F(n),r=e.g.autoplay,t.manifest?(e.g.autoplay=!1,k(h,5),S(h,e.h.load(t.manifest,t.startTime),7)):S(h,Promise.resolve(),3);case 7:A(h,3);break;case 5:return s=E(h),a=(new Map).set("detail",s),l=new ci("error",a),e.h&&e.h.dispatchEvent(l),h.return();case 3:if(!e.h)return h.return();for(u in t.video)c=t.video[u],e.g[u]=c;for(p in t.playerAfterLoad)d=t.playerAfterLoad[p],e.h[p](d);e.g.autoplay=r,t.manifest&&(e.g.play(),bd(e)),T(h)}})}(e,n.initState,n.appData),fd(e);break;case"appData":e.F(n.appData);break;case"set":var o=n.targetName,i=n.property;if(n=n.value,"video"==o){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.H[o][i]=n;break;case"call":(o=e.H[n.targetName])[n.methodName].apply(o,n.args);break;case"asyncCall":o=n.targetName,i=n.methodName,"player"==o&&"load"==i&&(e.m=0,e.B=!1);var r=n.id,s=t.senderId;n=(t=e.H[o])[i].apply(t,n.args),"player"==o&&"load"==i&&(n=n.then(function(){e.A=!0})),n.then(function(){return yd(e,s,r,null)},function(t){return yd(e,s,r,t)})}}(e,t)},t.start();for(var n=(t=p(Lp)).next();!n.done;n=t.next())e.j.D(e.g,n.value,function(t){return hd(e,"video",t)});for(var o in di)e.j.D(e.h,di[o],function(t){return hd(e,"player",t)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,dd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,dd(e)}),e.j.D(e.g,"pause",function(){dd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,dd(e)}),e.j.D(e.g,"ended",function(){new Rt(function(){e.g&&e.g.ended&&(e.o=!0,dd(e))}).Y(wd)})}(this)}function pd(e){e.m=0,e.A=!0,e.G=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,dd(e)}function dd(e){var t;P(function(n){return 1==n.g?S(n,Promise.resolve(),2):e.h?(t=new ci("caststatuschanged"),e.dispatchEvent(t),md(e)||bd(e),void T(n)):n.return()})}function hd(e,t,n){e.h&&(fd(e),vd(e,{type:"event",targetName:t,event:n},e.l))}function fd(e){e.C.Y(xd);for(var t={video:{},player:{}},n=p(Dp),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.g[o];if(e.h.V())for(var i in Bp)0==e.m%Bp[i]&&(t.player[i]=e.h[i]());for(var r in Np)0==e.m%Np[r]&&(t.player[r]=e.h[r]());for(var s in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),vd(e,{type:"update",update:t},e.l),Up)0==e.m%Up[s]&&((t={player:{}}).player[s]=e.h[s](),vd(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),md(e)}function md(e){return!(!e.A||!e.g.duration&&!e.h.V()||(gd(e),e.A=!1,0))}function gd(e,t){var n={contentId:e.h.Dc(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),bd(e,void 0===t?0:t,n)}function yd(e,t,n,o){e.h&&vd(e,{type:"asyncComplete",id:n,error:o},e.l,t)}function vd(e,t,n,o){e.G&&(e=Rp(t),o?n.getCastChannel(o).send(e):n.broadcast(e))}function bd(e,t,n){n=void 0===n?null:n;var o={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?Sd:e.h.pf()?kd:e.g.paused?Cd:Td,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(o.media=n),vd(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[o]},e.s)}v(nd,hi),(i=nd.prototype).destroy=function(e){return e&&this.g.Cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,hi.prototype.release.call(this),Promise.all(e)},i.fi=function(){return this.l},i.Vh=function(){return this.s},i.Ah=function(){return this.g.m&&Qp},i.fb=function(){return this.g.fb()},i.Ff=function(){return this.g.Ff()},i.cast=function(){var e=this;return P(function(t){return 1==t.g?S(t,e.g.cast(),2):e.h?S(t,e.h.bc(),0):t.return()})},i.Nf=function(e){this.g.Nf(e)},i.$i=function(){var e;(e=this.g).h&&chrome.cast.requestSession(function(t){return Vp(e,t)},function(t){return Hp(e,t)})},i.Cc=function(){this.g.Cc()},i.Bh=function(e,t){t=void 0!==t&&t;var n=this;return P(function(o){if(1==o.g)return e==n.C&&t==n.B?o.return():(n.C=e,n.B=t,n.g.Cc(),S(o,n.g.destroy(),2));n.g=null,n.g=new Gp(e,function(){return rd(n)},function(){return sd(n)},function(e,t){return ud(n,e,t)},function(){return ad(n)},function(){return id(n)},t),n.g.init(),T(o)})},$("shaka.cast.CastProxy",nd),nd.prototype.changeReceiverId=nd.prototype.Bh,nd.prototype.forceDisconnect=nd.prototype.Cc,nd.prototype.suggestDisconnect=nd.prototype.$i,nd.prototype.setAppData=nd.prototype.Nf,nd.prototype.cast=nd.prototype.cast,nd.prototype.receiverName=nd.prototype.Ff,nd.prototype.isCasting=nd.prototype.fb,nd.prototype.canCast=nd.prototype.Ah,nd.prototype.getPlayer=nd.prototype.Vh,nd.prototype.getVideo=nd.prototype.fi,nd.prototype.destroy=nd.prototype.destroy,v(cd,hi),(i=cd.prototype).isConnected=function(){return this.G},i.mi=function(){return this.o},i.Wi=function(e){this.i=e},i.Dh=function(){this.i=null},i.Xi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.Ui=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return P(function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.C&&(t.C.stop(),t.C=null),t.g=null,t.H=null,t.F=null,t.G=!1,t.o=!0,t.l=null,t.s=null,hi.prototype.release.call(t),S(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),T(n)})},$("shaka.cast.CastReceiver",cd),cd.prototype.destroy=cd.prototype.destroy,cd.prototype.setContentArtist=cd.prototype.Ui,cd.prototype.setContentImage=cd.prototype.Vi,cd.prototype.setContentTitle=cd.prototype.Xi,cd.prototype.clearContentMetadata=cd.prototype.Dh,cd.prototype.setContentMetadata=cd.prototype.Wi,cd.prototype.isIdle=cd.prototype.mi,cd.prototype.isConnected=cd.prototype.isConnected;var xd=.5,wd=5,Sd="IDLE",Td="PLAYING",kd="BUFFERING",Cd="PAUSED";function Ad(e,t,n,o,i){if(o>=i)return null;for(var r=-1,s=-1,a=0;a<n.length;a++)if(n[a].some(function(e){return null!=e&&""!=e.g.trim()})){r=a;break}for(a=n.length-1;0<=a;a--)if(n[a].some(function(e){return null!=e&&""!=e.g.trim()})){s=a;break}if(-1===r||-1===s)return null;for(var l=a=!1,u="white",c="black",p=Ed(o,i,a,l,u,c);r<=s;r++){for(var d=n[r],h=-1,f=-1,m=0;m<d.length;m++)if(null!=d[m]&&""!==d[m].g.trim()){h=m;break}for(m=d.length-1;0<=m;m--)if(null!=d[m]&&""!==d[m].g.trim()){f=m;break}if(-1===h||-1===f)d=Id(o,i),e.nestedCues.push(d);else{for(;h<=f;h++)if(m=d[h]){var g=m.l,y=m.i,v=m.j,b=m.h;g==a&&y==l&&v==u&&b==c||(p.payload&&e.nestedCues.push(p),p=Ed(o,i,g,y,v,b),a=g,l=y,u=v,c=b),p.payload+=m.g}else p.payload+=" ";p.payload&&e.nestedCues.push(p),r!==s&&(p=Id(o,i),e.nestedCues.push(p)),p=Ed(o,i,a,l,u,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Ed(e,t,n,o,i,r){return e=new De(e,t,""),n&&e.textDecoration.push("underline"),o&&(e.fontStyle="italic"),e.color=i,e.backgroundColor=r,e}function Id(e,t){return(e=new De(e,t,"")).lineBreak=!0,e}function Md(e,t,n,o,i){this.g=e,this.l=t,this.i=n,this.h=o,this.j=i}function Rd(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Ld(this)}function _d(e,t,n){var o="CC"+(1+(e.A<<1|e.s)),i=new De(t,n,"");i.lineInterpretation=1;var r=Fd.get(e.g);return r&&(i.line=r),(t=Ad(i,o,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(r=Fd.get(e.g+3-t.cue.nestedCues.length))&&(i.line=r),t}function Ld(e){Od(e,0,15),e.g=1}function Dd(e,t,n){if(!(32>n||127<n)){var o="";switch(t){case 0:o=Nd.has(n)?Nd.get(n):String.fromCharCode(n);break;case 1:o=Ud.get(n);break;case 2:e.i[e.g].pop(),o=Bd.get(n);break;case 3:e.i[e.g].pop(),o=jd.get(n)}o&&e.i[e.g].push(new Md(o,e.m,e.j,e.o,e.l))}}function Pd(e,t,n,o){if(!(0>n||0>t))if(t>=n)for(--o;0<=o;o--)e.i[t+o]=e.i[n+o].map(function(e){return e});else for(var i=0;i<o;i++)e.i[t+i]=e.i[n+i].map(function(e){return e})}function Od(e,t,n){for(var o=0;o<=n;o++)e.i[t+o]=[]}var Nd=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),Ud=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),Bd=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),jd=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),Fd=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function zd(e,t){this.h=0,this.o=new Rd(e,t),this.i=new Rd(e,t),this.g=this.j=new Rd(e,t),this.l=0,this.m=null}function $d(e,t,n){e.g=e.i;var o=e.g,i=null;return 3!==e.h&&4!==e.h&&(i=_d(o,e.l,n),(n=e.i).g=0<n.h?n.h:0,Od(n,0,15),(n=e.j).g=0<n.h?n.h:0,Od(n,0,15),o.g=15),e.h=3,o.h=t,i}function Gd(e){e.h=1,e.g=e.j,e.g.h=0}function Vd(e){Q("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var Hd="black green blue cyan red yellow magenta black".split(" "),qd="white green blue cyan red yellow magenta white_italics".split(" ");function Xd(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",Wd(this)}function Wd(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Kd())}function Kd(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Yd(e,t){Qd(e)&&(e.i[e.h][e.g]=new Md(t,e.C,e.A,e.s,e.B),e.g++)}function Qd(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}function Jd(e,t,n){var o=new De(e.j,t,"");o.textAlign=0===e.F?"left":1===e.F?"right":Ue;var i=o.region;switch(e.I&&(i.id+="svc"+e.I),i.id+="win"+e.N,i.height=e.o,i.width=e.m,i.heightUnits=2,i.widthUnits=2,i.viewportAnchorX=e.H,i.viewportAnchorY=e.L,i.viewportAnchorUnits=e.K?Ee:2,e.G){case 0:i.regionAnchorX=0,i.regionAnchorY=0;break;case 1:i.regionAnchorX=50,i.regionAnchorY=0;break;case 2:i.regionAnchorX=100,i.regionAnchorY=0;break;case 3:i.regionAnchorX=0,i.regionAnchorY=50;break;case 4:i.regionAnchorX=50,i.regionAnchorY=50;break;case 5:i.regionAnchorX=100,i.regionAnchorY=50;break;case 6:i.regionAnchorX=0,i.regionAnchorY=100;break;case 7:i.regionAnchorX=50,i.regionAnchorY=100;break;case 8:i.regionAnchorX=100,i.regionAnchorY=100}return(n=Ad(o,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function Zd(){this.i=[],this.h=null,this.g=0}function eh(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new th(e.h)),e.h=null,e.g=0))}function th(e){this.g=0,this.h=e}function nh(e){if(!e.na())throw new St(2,2,3e3);return e.h[e.g++]}function oh(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function ih(e,t,n,o){if(128<=n&&135>=n)o=7&n,e.h[o]&&(e.g=e.h[o]);else{if(136===n){n=nh(t).value,t=null;for(var i=(n=p(rh(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=Jd(i,o,e.i)),Wd(i);return t}if(137===n)for(n=(t=p(rh(e,t=nh(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=o),n.l=!0;else{if(138===n){for(n=nh(t).value,t=null,i=(n=p(rh(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=Jd(i,o,e.i)),i.l=!1;return t}if(139===n){for(n=nh(t).value,t=null,i=(n=p(rh(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()?t=Jd(i,o,e.i):i.j=o,i.l=!i.l;return t}if(140===n)return sh(e,t=nh(t).value,o);if(143===n)return o=sh(e,255,o),ah(e),o;if(144===n)t.skip(1),o=nh(t).value,e.g&&(e.g.A=0<(128&o),e.g.C=0<(64&o));else if(145===n)o=nh(t).value,n=nh(t).value,t.skip(1),e.g&&(t=lh((48&n)>>4,(12&n)>>2,3&n),e.g.B=lh((48&o)>>4,(12&o)>>2,3&o),e.g.s=t);else if(146===n)o=nh(t).value,t=nh(t).value,e.g&&((e=e.g).h=15&o,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),o=nh(t).value,t.skip(1),e.g&&(e.g.F=3&o);else if(152<=n&&159>=n){if(n=(15&n)-8,!(i=null!==e.h[n])){var r=new Xd(n,e.i);r.j=o,e.h[n]=r}o=nh(t).value,r=nh(t).value;var s=nh(t).value,a=nh(t).value,l=nh(t).value;t=nh(t).value,i&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),(t=e.h[n]).l=0<(32&o),t.L=127&r,t.H=s,t.G=(240&a)>>4,t.K=0<(128&r),t.o=1+(15&a),t.m=1+(63&l),e.g=e.h[n]}}}return null}function rh(e,t){for(var n=[],o=0;8>o;o++)!(1&~t)&&e.h[o]&&n.push(o),t>>=1;return n}function sh(e,t,n){for(var o=null,i=(t=p(rh(e,t))).next();!i.done;i=t.next()){i=i.value;var r=e.h[i];r.isVisible()&&(o=Jd(r,n,e.i)),e.h[i]=null}return o}function ah(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function lh(e,t,n){var o={0:0,1:0,2:1,3:1};return ch[(e=o[e])<<2|(t=o[t])<<1|(n=o[n])]}Xd.prototype.isVisible=function(){return this.l},th.prototype.na=function(){return this.g<this.h.length},th.prototype.va=function(){return this.g},th.prototype.skip=function(e){if(this.g+e>this.h.length)throw new St(2,2,3e3);this.g+=e};var uh=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),ch="black blue green cyan red magenta yellow white".split(" ");function ph(){this.h=[],this.g=[],this.i=new Zd,this.l=0,this.m=new Map([["CC1",new zd(0,0)],["CC2",new zd(0,1)],["CC3",new zd(1,0)],["CC4",new zd(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,dh(this)}function dh(e){e.o=0,e.s=0;for(var t=p(e.m.values()),n=t.next();!n.done;n=t.next())(n=n.value).h=0,n.g=n.j,n.m=null,Ld(n.i),Ld(n.j),Ld(n.o);e.B=!0}function hh(e,t){var n=t.type;if(16==(112&t.bb)){var o=t.bb>>3&1;0===n?e.o=o:e.s=o}if(o="CC"+(1+(n<<1|(n?e.s:e.o))),n=e.m.get(o),255===t.bb&&255===t.Cb||!t.bb&&!t.Cb||!mh(t.bb)||!mh(t.Cb))return 45<=++e.l&&dh(e),null;e.l=0,t.bb&=127,t.Cb&=127;var i=t.bb;if(1<=i&&15>=i||!t.bb&&!t.Cb)return null;if(i=null,16==(112&t.bb))e:{if(e.A.add(o),o=t.bb,e=t.Cb,n.m===(o<<8|e))n.m=null;else if(n.m=o<<8|e,16==(240&o)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&o)<<1|e>>5&1];var r=(30&e)>>1;o="white",i=!1,7>r?o=qd[r]:7===r&&(i=!0),e=!(1&~e),4!==n.h&&(r=n.g,3===n.h&&t!==r.g&&(Pd(r,n=1+t-r.h,1+r.g-r.h,r.h),Od(r,0,n-1),Od(r,t+1,15-t)),r.g=t,r.m=e,r.j=i,r.l=o,r.o="black")}else if(17==(247&o)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",Dd(n.g,0,32),o=!1,"white_italics"===(t=qd[(14&e)>>1])&&(t="white",o=!0),n.g.m=!(1&~e),n.g.j=o,n.g.l=t;else if(16==(247&o)&&32==(240&e)||23==(247&o)&&45==(255&e))t="black",!(7&o)&&(t=Hd[(14&e)>>1]),n.g.o=t;else if(17==(247&o)&&48==(240&e))Dd(n.g,1,e);else if(18==(246&o)&&32==(224&e))Dd(n.g,1&o?3:2,e);else if(20==(246&o)&&32==(240&e)){switch(e=t.pts,o=null,t.Cb){case 32:Gd(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:o=$d(n,2,e);break;case 38:o=$d(n,3,e);break;case 39:o=$d(n,4,e);break;case 40:Dd(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Ld(n.o),Vd(n);break;case 43:Vd(n);break;case 44:t=n.i,o=null,4!==n.h&&(o=_d(t,n.l,e)),Od(t,0,15);break;case 45:t=n.g,3!==n.h?o=null:(o=_d(t,n.l,e),Pd(t,(i=t.g-t.h+1)-1,i,t.h),Od(t,0,i-1),Od(t,t.g,15-t.g),n.l=e);break;case 46:Od(n.j,0,15);break;case 47:t=null,4!==n.h&&(t=_d(n.i,n.l,e)),o=n.j,n.j=n.i,n.i=o,Gd(n),n.l=e,o=t}i=o;break e}i=null}else e=t.Cb,Dd(n.g,0,t.bb),Dd(n.g,0,e);return i}function fh(e,t){var n=[];try{for(;t.na();){var o=nh(t).value,i=(224&o)>>5,r=31&o;if(7===i&&0!=r&&(i=63&nh(t).value),0!=i){e.A.add("svc"+i),e.j.has(i)||e.j.set(i,new oh(i));for(var s=e.j.get(i),a=t.va();t.va()-a<r;){i=s;var l=t,u=nh(l),c=u.value,p=u.pts;if(16===c&&(c=c<<16|nh(l).value),0<=c&&31>=c){var d=c,h=p;if((l=i).g){var f=l.g;switch(i=null,d){case 8:!Qd(f)||0>=f.g&&0>=f.h||(0>=f.g?(f.g=f.m-1,f.h--):f.g--,f.i[f.h][f.g]=null);break;case 13:if(f.isVisible()&&(i=Jd(f,h,l.i)),f.h+1>=f.o){for(l=f,d=0,h=1;16>h;h++,d++)l.i[d]=l.i[h];for(h=0;1>h;h++,d++)l.i[d]=Kd()}else f.h++;f.g=0;break;case 14:f.isVisible()&&(i=Jd(f,h,l.i)),f.i[f.h]=Kd(),f.g=0;break;case 12:f.isVisible()&&(i=Jd(f,h,l.i)),Wd(f),(l=f).h=0,l.g=0}var m=i}else m=null}else if(128<=c&&159>=c)m=ih(i,l,c,p);else{if(4096<=c&&4127>=c)i=l,8<=(l=255&c)&&15>=l?i.skip(1):16<=l&&23>=l?i.skip(2):24<=l&&31>=l&&i.skip(3);else if(4224<=c&&4255>=c)i=l,128<=(l=255&c)&&135>=l?i.skip(4):136<=l&&143>=l&&i.skip(5);else if(32<=c&&127>=c)l=c,i.g&&Yd(i.g,127===l?"♪":String.fromCharCode(l));else if(160<=c&&255>=c)i.g&&Yd(i.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(l=255&c,i.g)if(uh.has(l)){var g=uh.get(l);Yd(i.g,g)}else Yd(i.g,"_")}else 4256<=c&&4351>=c&&i.g&&Yd(i.g,160!=(255&c)?"_":"[CC]");m=null}(i=m)&&n.push(i)}}}}catch(y){if(!(y instanceof St&&3e3===y.code))throw y;Q("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function mh(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function gh(e){for(var t=[],n=e,o=e=0;o<n.length;)2==e&&3==n[o]?(e=0,(n=[].concat(d(n))).splice(o,1),n=new Uint8Array(n)):0==n[o]?e++:e=0,o++;for(e=n,o=0;o<e.length;){for(n=0;255==e[o];)n+=255,o++;n+=e[o++];for(var i=0;255==e[o];)i+=255,o++;i+=e[o++],4==n&&t.push(e.subarray(o,o+i)),o+=i}return t}function yh(){this.j=new Map,this.i=this.h=0,this.g=bh}function vh(e,t,n,o,i,r,s,a,l){var u=0,c=r,h=a.map(function(e){return e.Wg});for((h=[].concat.apply([],d(h))).length&&(c=h[0].sampleSize||r),t.skip(s+a[0].Fh);t.na();){s=t.P();var f=t.T(),m=null;switch(m=!1,a=1,e.g){case xh:m=6==(m=31&f);break;case wh:a=2,t.skip(1),m=39==(m=f>>1&63)||40==m;break;case Sh:a=2,t.skip(1),m=23==(m=f>>1&63)||24==m;break;default:return}if(m)for(f=0,u<h.length&&(f=h[u].ne||0),f=(n+f)/o,m=(a=p(gh(t.qb(s-a)))).next();!m.done;m=a.next())l.push({packet:m.value,pts:f});else try{t.skip(s-a)}catch(g){break}0==(c-=s+4)&&(n=u<h.length?n+(h[u].Jf||i):n+i,c=++u<h.length&&h[u].sampleSize||r)}}ph.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,dh(this);for(var t=(e=p(this.j.values())).next();!t.done;t=e.next())ah(t.value)},ph.prototype.extract=function(e,t){if(this.B){for(var n=p(this.m.values()),o=n.next();!o.done;o=n.next())o.value.l=t;this.B=!1}if(!(8>(e=new Li(e,0)).getLength())&&181===e.T()&&49===e.la()&&1195456820===e.P()&&3===e.T()&&64&(n=e.T()))for(n&=31,e.skip(1),o=0;o<n;o++){var i=e.T(),r=(4&i)>>2,s=e.T(),a=e.T();r&&(0==(i&=3)||1===i?this.h.push({pts:t,type:i,bb:s,Cb:a,order:this.h.length}):(this.g.push({pts:t,type:i,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:a,order:this.g.length})))}},ph.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=p(this.h),o=n.next();!o.done;o=n.next())(o=hh(this,o.value))&&t.push(o);for(o=(n=p(this.g)).next();!o.done;o=n.next())eh(this.i,o.value);for(o=(n=p(this.i.i)).next();!o.done;o=n.next())o=fh(this,o.value),t.push.apply(t,d(o));return this.i.i=[],this.h=[],this.g=[],t},ph.prototype.getStreams=function(){return Array.from(this.A)},$("shaka.cea.CeaDecoder",ph),Ce=function(){return new ph},yh.prototype.init=function(e){function t(e){(e=e.name)in Th&&(n.g=Th[e])}var n=this,o=[],i=[];if((new Oi).box("moov",Ni).box("mvex",Ni).S("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.P(),t=t.P(),n.h=e,n.i=t}).box("trak",Ni).S("tkhd",function(e){var t=e.reader;1==(e=e.version)?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.P();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.la(),t.la(),t.la(),t.la(),o.push(n)}).box("mdia",Ni).S("mdhd",function(e){e=ks(e.reader,e.version),i.push(e.timescale)}).box("minf",Ni).box("stbl",Ni).S("stsd",Ui).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",Bi).box("sinf",Ni).box("frma",function(e){(e=Es(e.reader).codec)in Th&&(n.g=Th[e])}).parse(e,!0),!o.length||!i.length||o.length!=i.length)throw new St(2,2,2010);this.g==bh&&Y("Unable to determine bitstream format for CEA parsing!"),o.forEach(function(e,t){n.j.set(e,i[t])})},yh.prototype.parse=function(e){var t=this;if(this.g==bh)return[];var n=[],o=0,i=[];return(new Oi).box("moof",function(e){o=e.start,i=[],Ni(e)}).box("traf",function(e){i.push({baseMediaDecodeTime:null,Yc:t.h,Id:t.i,Og:[],timescale:9e4}),Ni(e)}).S("trun",function(e){var t=i[i.length-1];e=Cs(e.reader,e.version,e.flags),t.Og.push(e)}).S("tfhd",function(e){var n=i[i.length-1];e=Ss(e.reader,e.flags),n.Yc=e.Yc||t.h,n.Id=e.Id||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))}).S("tfdt",function(e){var t=i[i.length-1];e=Ts(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime}).box("mdat",function(e){for(var r=o-e.start-8,s=e.reader.va(),a=p(i),l=a.next();!l.done;l=a.next()){if(null===(l=l.value).baseMediaDecodeTime)throw Y("Unable to find base media decode time for CEA captions!"),new St(2,2,2010);e.reader.seek(s),vh(t,e.reader,l.baseMediaDecodeTime,l.timescale,l.Yc,l.Id,r,l.Og,n)}}).parse(e,!1),n},$("shaka.cea.Mp4CeaParser",yh);var bh=0,xh=1,wh=2,Sh=3,Th={avc1:xh,avc3:xh,dvav:xh,dva1:xh,hev1:wh,hvc1:wh,dvh1:wh,dvhe:wh,vvc1:Sh,vvi1:Sh,dvc1:Sh,dvi1:Sh};function kh(){this.g=null}function Ch(t,n,o){var i=function(e){for(var t=[],n=(e=p(e)).next();!n.done;n=e.next())(n=Eh(n.value))&&t.push(n);return t}(t),r=null;t=[];var s=[],a=null,l=new Set(i.map(function(e){return e.keyId}));l.delete(null);var u="cenc";if(1<l.size)throw new St(2,4,4010);if(!n){if(1<(s=i.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.Pc})).length)throw new St(2,4,4050);s.length&&(a=function(t){if(!e.crypto||!e.crypto.subtle)throw Y("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new St(2,4,4042);var n=ir(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new St(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new St(2,4,4051);if(!(n=ir(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new St(2,4,4051);if(t=n.attributes.IV,n=pn(n.attributes.keyUriTemplate),!t||!n)throw new St(2,4,4051);if(16!=(t=yn(t.substr(2))).byteLength)throw new St(2,4,4048);return{ti:n,iv:t}}(s[0])),(s=i.find(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Pc}))&&s.encryptionScheme&&(u=s.encryptionScheme),(s=i.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Pc?(r=e.init||r,!1):"urn:mpeg:dash:sea:2012"!=e.Pc})).length&&(t=function(e,t,n,o,i){for(var r=[],s=(n=p(n)).next();!s.done;s=n.next()){var a=o[(s=s.value).Pc];if(a){var l;if((l=ir(s.node,"urn:microsoft:playready","pro"))&&er(l)){l=gn(l=er(l));var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);l=[{initData:Xi(l,u,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else l=null;if(u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===s.Pc){u=s;var c=i;if(0==c.size)u=null;else{var d=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);u=[{initData:Xi(new Uint8Array([]),d,c,1),initDataType:"cenc",keyId:u.keyId}]}}l=wn(a,t,s.init||e||l||u),(a=Mh.get(a))&&(l.licenseServerUri=a(s)),r.push(l)}}return r}(r,u,s,o,l),0==t.length&&(t=[wn("",u,r)]))}if(i.length&&!a&&(n||!s.length))for(t=[],o=(n=p(Object.values(o))).next();!o.done;o=n.next())"org.w3.clearkey"!=(o=o.value)&&t.push(wn(o,u,r));if(l=Array.from(l)[0]||null)for(n=(u=p(t)).next();!n.done;n=u.next())for(o=(n=p(n.value.initData)).next();!o.done;o=n.next())o.value.keyId=l;return{pg:l,dk:r,drmInfos:t,Fe:a,tg:!0}}function Ah(e){var t=ir(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=er(t))?t:(e=ir(e.node,"urn:microsoft:playready","pro"))&&er(e)?(e=function(e){var t=0,n=xe(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,1&i||i+e>n.byteLength){n=[];break e}var r=ve(n,e,i);t.push({type:o,value:r}),e+=i}n=t}return n}(e=gn(e=er(e))).filter(function(e){return e.type===Ih})[0],e&&(e=Ki(e=sn(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=p(nr(e,"DATA"))).next();!t.done;t=e.next())if((t=t.value).children)for(var n=(t=p(t.children)).next();!n.done;n=t.next())if("LA_URL"==(n=n.value).tagName)return er(n);return""}(e):""):""}function Eh(e){var t=e.attributes.schemeIdUri,n=sr(e,"urn:mpeg:cenc:2013","default_KID"),o=ar(e,"urn:mpeg:cenc:2013","pssh").map(tr),i=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new St(2,4,4009);var r=[];try{r=o.map(function(e){return{initDataType:"cenc",initData:gn(e),keyId:null}})}catch(s){throw new St(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<r.length?r:null,encryptionScheme:i}}ke["video/mp4"]=function(){return new yh},kh.prototype.init=function(){},kh.prototype.parse=function(e){this.g?this.g.clearData():this.g=new $s;var t=[];if(!Hs(e=ve(e)))return t;var n=(e=this.g.parse(e)).$c(),o=e.Pd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(o=(n=p(o)).next();!o.done;o=n.next())if(o=o.value,e.includes(o.type)&&null!=o.time)for(var i=p(gh(o.data)),r=i.next();!r.done;r=i.next())t.push({packet:r.value,pts:o.time});return t},$("shaka.cea.TsCeaParser",kh),ke["video/mp2t"]=function(){return new kh};var Ih=1,Mh=(new Map).set("com.widevine.alpha",function(e){var t=ir(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=er(t))?t:(e=ir(e.node,"urn:microsoft","laurl"))&&pn(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Ah).set("com.microsoft.playready.recommendation",Ah).set("com.microsoft.playready.software",Ah).set("com.microsoft.playready.hardware",Ah).set("org.w3.clearkey",function(e){var t=ir(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=er(t))?t:(e=ir(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=er(e))?e:""});function Rh(t,n,o,i,r,s){var a={RepresentationID:n,Number:o,SubNumber:i,Bandwidth:r,Time:s};return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,o,i){if("$$"==t)return"$";var r=a[n];if(null==r)return t;switch("RepresentationID"==n&&o&&(o=void 0),"Time"==n&&"bigint"!=typeof r&&(.2<=Math.abs(r-Math.round(r))&&Y("Calculated $Time$ values must be close to integers"),r=Math.round(r)),i){case void 0:case"d":case"i":case"u":t=r.toString();break;case"o":t=r.toString(8);break;case"x":t=r.toString(16);break;case"X":t=r.toString(16).toUpperCase();break;default:t=r.toString()}return o=e.parseInt(o,10)||1,Array(Math.max(0,o-t.length)+1).join("0")+t})}function _h(e,t){var n=Dh(e,t,"timescale"),o=1;n&&(o=hr(n)||1),(n=hr((n=Dh(e,t,"duration"))||""))&&(n/=o);var i=Dh(e,t,"startNumber"),r=Number(Dh(e,t,"presentationTimeOffset"))||0,s=fr(i||"");if(null!=i&&null!=s||(s=1),i=null,t=Ph(e,t,"SegmentTimeline")){t=Zi(t,"S"),i=o,e=e.ka.duration||1/0;for(var a=s,l=[],u=-r,c=0;c<t.length;++c){var p=t[c],d=t[c+1],h=rr(p,"t",fr),f=rr(p,"d",fr),m=rr(p,"r",dr);if(p=rr(p,"k",dr)||0,null!=h&&(h-=r),f){if(h=null!=h?h:u,0>(m=m||0))if(d){if(null==(d=rr(d,"t",fr)))break;if(h>=d)break;m=Math.ceil((d-h)/f)-1}else{if(1/0==e)break;if(h/i>=e)break;m=Math.ceil((e*i-h)/f)-1}for(0<l.length&&h!=u&&(l[l.length-1].end=h/i),d=0;d<=m;++d)u=h+f,l.push({start:h/i,end:u/i,$f:h,zb:p,Si:l.length+a}),h=u}}i=l}return{timescale:o,La:n,vd:s,Nb:r/o||0,Zf:r,timeline:i}}function Lh(e,t){return[t(e.J),t(e.ja),t(e.ta)].filter(Qn)}function Dh(e,t,n){t=Lh(e,t),e=null;for(var o=(t=p(t)).next();!o.done&&!(e=o.value.attributes[n]);o=t.next());return e}function Ph(e,t,n){t=Lh(e,t),e=null;for(var o=(t=p(t)).next();!o.done&&!(e=or(o.value,n));o=t.next());return e}function Oh(e,t,n,o,i,r){if(r=void 0===r?0:r,sr(e,"http://www.w3.org/1999/xlink","href")){var s=function(e,t,n,o,i,r){for(var s=sr(e,"http://www.w3.org/1999/xlink","href"),a=sr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=p(Object.keys(e.attributes)),u=l.next();!u.done;u=l.next()){var c=(u=u.value).split(":"),d=Yi("http://www.w3.org/1999/xlink");c[0]==d&&delete e.attributes[u]}if(5<=r)return ri(new St(2,4,4028));if("onLoad"!=a)return ri(new St(2,4,4027));var h=xn([o],[s]);return i.request(0,bi(h,t)).Aa(function(o){if(!(o=Wi(o.data,e.tagName)))return ri(new St(2,4,4001,s));for(e.children=[];o.children.length;){var a=o.children.shift();a.tagName&&(a.parent=e),e.children.push(a)}for(var l=(a=p(Object.keys(o.attributes))).next();!l.done;l=a.next())l=l.value,e.attributes[l]=o.attributes[l];return Oh(e,t,n,h[0],i,r+1)})}(e,t,n,o,i,r);return n&&(s=s.Aa(void 0,function(){return Oh(e,t,n,o,i,r)})),s}s=[];for(var a=p(Ji(e)),l=a.next(),u={};!l.done;u={Uc:void 0},l=a.next())u.Uc=l.value,"urn:mpeg:dash:resolve-to-zero:2013"==sr(u.Uc,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.Uc}}(u)):"SegmentTimeline"!=u.Uc.tagName&&s.push(Oh(u.Uc,t,n,o,i,r));return ui(s).Aa(function(){return e})}function Nh(e,t,n,o,i,r,s){var a,l=(new Oi).S("sidx",function(e){a=function(e,t,n,o,i,r,s){var a=[];s.reader.skip(4);var l=s.reader.P();if(0==l)throw new St(2,3,3005);if(0==s.version)var u=s.reader.P(),c=s.reader.P();else u=s.reader.Nc(),c=s.reader.Nc();s.reader.skip(2);var p=s.reader.la();for(e=e+s.size+c,c=0;c<p;c++){var d=s.reader.P(),h=(2147483648&d)>>>31;d&=2147483647;var f=s.reader.P();if(s.reader.skip(4),1==h)throw new St(2,3,3006);a.push(new ss(u/l+n,(u+f)/l+n,function(){return r},e,e+d-1,t,n,o,i)),u+=f,e+=d}return s.parser.stop(),a}(t,o,i,r,s,n,e)});if(e&&l.parse(e),a)return a;throw new St(2,3,3004)}function Uh(e){this.h=xe(e),this.g=new Li(this.h,0)}function Bh(e){var t=jh(e);if(7<t.length)throw new St(2,3,3002);for(var n=0,o=(t=p(t)).next();!o.done;o=t.next())n=256*n+o.value;t=jh(e);e:{for(var i=(o=p(Fh)).next();!i.done;i=o.next())if(me(t,new Uint8Array(i.value))){o=!0;break e}o=!1}if(o)t=e.h.byteLength-e.g.va();else{if(8==t.length&&224&t[1])throw new St(2,3,3001);for(i=o=0;i<t.length;i++){var r=t[i];o=0==i?r&(1<<8-t.length)-1:256*o+r}t=o}return t=e.g.va()+t<=e.h.byteLength?t:e.h.byteLength-e.g.va(),o=xe(e.h,e.g.va(),t),e.g.skip(t),new zh(n,o)}function jh(e){var t=e.g.va(),n=e.g.T();if(0==n)throw new St(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),ve(e.h,t,n)}Uh.prototype.na=function(){return this.g.na()};var Fh=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function zh(e,t){this.id=e,this.g=t}function $h(e){if(8<e.g.byteLength)throw new St(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new St(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function Gh(e){var t=new Uh(e.g);if(179!=(e=Bh(t)).id)throw new St(2,3,3013);if(e=$h(e),183!=(t=Bh(t)).id)throw new St(2,3,3012);t=new Uh(t.g);for(var n=0;t.na();){var o=Bh(t);if(241==o.id){n=$h(o);break}}return{dj:e,Ii:n}}function Vh(e,t,n){if(!(t=Ph(e,t,"Initialization")))return null;var o=e.J.Ga(),i=t.attributes.sourceURL;i&&(o=xn(o,[pn(i)])),i=0;var r=null;return(t=rr(t,"range",pr))&&(i=t.start,r=t.end),(n=new is(function(){return o},i,r,Yh(e),null,null,n)).codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function Hh(e,t,n){var o=Number(Dh(e,Xh,"presentationTimeOffset"))||0,i=Dh(e,Xh,"timescale"),r=1;i&&(r=hr(i)||1);var s=o/r||0,a=Vh(e,Xh,n);!function(e,t){if(Kh(e,t),!Wh(e))throw new St(2,4,4002)}(e,a);var l=uo(e);return{fc:function(){var e=Ph(l,Xh,"RepresentationIndex"),n=l.J.Ga();return e&&(e=pn(e.attributes.sourceURL))&&(n=xn(n,[e])),e=Wh(l),qh(l,t,a,n,e.start,e.end,s)}}}function qh(e,t,n,o,i,r,s){var a,l,u,c,d,h,f,m,g,y,v,b,x,w,T,k,C,A;return P(function(E){if(1==E.g)return a=e.presentationTimeline,l=!e.vb||!e.ka.ld,u=e.ka.start,c=e.ka.duration,d=e.J.mimeType.split("/")[1],f=null,m=[(h=t)(o,i,r,!1),"webm"==d?h(n.M(),n.Ha,n.sa,!0):null],h=null,S(E,Promise.all(m),2);if(g=E.h,y=g[0],v=g[1]||null,x=u-s,w=u,T=c?u+c:1/0,"mp4"==d)var I=Nh(y,i,o,n,x,w,T);else{I=y;var M=new Uh(v);if(440786851!=Bh(M).id)throw new St(2,3,3008);var R=Bh(M);if(408125543!=R.id)throw new St(2,3,3009);M=R.g.byteOffset,R=new Uh(R.g);for(var _=null;R.na();){var L=Bh(R);if(357149030==L.id){_=L;break}}if(!_)throw new St(2,3,3010);for(_=new Uh(_.g),L=1e6,R=null;_.na();){var D=Bh(_);if(2807729==D.id)L=$h(D);else if(17545==D.id)if(4==D.g.byteLength)R=D.g.getFloat32(0);else{if(8!=D.g.byteLength)throw new St(2,3,3003);R=D.g.getFloat64(0)}}if(null==R)throw new St(2,3,3011);if(R*=_=L/1e9,475249515!=(I=Bh(new Uh(I))).id)throw new St(2,3,3007);I=function(e,t,n,o,i,r,s,a,l){function u(){return i}var c=[];e=new Uh(e.g);for(var p=null,d=null;e.na();){var h=Bh(e);if(187==h.id){var f=Gh(h);f&&(h=n*f.dj,f=t+f.Ii,null!=p&&c.push(new ss(p+s,h+s,u,d,f-1,r,s,a,l)),p=h,d=f)}}return null!=p&&c.push(new ss(p+s,o+s,u,d,null,r,s,a,l)),c}(I,M,_,R,o,n,x,w,T)}for(k=p(b=I),C=k.next();!C.done;C=k.next())(A=C.value).codecs=e.J.codecs,A.mimeType=e.J.mimeType;return a.sd(b),f=new ja(b),l&&f.Bc(w,T,!0),E.return(f)})}function Xh(e){return e.Rc}function Wh(e){var t=Ph(e,Xh,"RepresentationIndex");return e=pr((e=Dh(e,Xh,"indexRange"))||""),t&&(e=rr(t,"range",pr,e)),e}function Kh(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=An&&"mp4"!=n&&"webm"!=n)throw new St(2,4,4006);if("webm"==n&&!t)throw new St(2,4,4005)}function Yh(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Jc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ja.label||null,roles:e.roles||null,language:e.ja.language||null}}function Qh(e,t,n){var o=Vh(e,Jh,n),i=function(e){var t=function(e){return[e.J.Pb,e.ja.Pb,e.ta.Pb].filter(Qn).map(function(e){return Zi(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){return t.attributes.indexRange&&!e.lf&&(e.lf=!0),{zi:pn(t.attributes.media),start:(t=rr(t,"mediaRange",pr,{start:0,end:null})).start,end:t.end}})}(e),n=(e=_h(e,Jh)).vd;0==n&&(n=1);var o=0;return e.La?o=e.La*(n-1):e.timeline&&0<e.timeline.length&&(o=e.timeline[0].start),{La:e.La,startTime:o,vd:n,Nb:e.Nb,timeline:e.timeline,Ic:t}}(e);if(!i.La&&!i.timeline&&1<i.Ic.length)throw new St(2,4,4002);if(!i.La&&!e.ka.duration&&!i.timeline&&1==i.Ic.length)throw new St(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new St(2,4,4002);var r=null,s=null;e.ta.id&&e.J.id&&(s=t[e.ta.id+","+e.J.id])&&(r=s.segmentIndex);var a=function(e,t,n,o,i,r,s,a){var l=o.Ic.length;o.timeline&&o.timeline.length!=o.Ic.length&&(l=Math.min(o.timeline.length,o.Ic.length));for(var u=e-o.Nb,c=t?e+t:1/0,p=[],d=o.startTime,h={},f=0;f<l;h={ve:void 0,oe:void 0},f++){h.oe=o.Ic[f];var m=d;d=void 0,d=null!=o.La?m+o.La:o.timeline?o.timeline[f].end:m+t,h.ve=null,(h=new ss(e+m,e+d,function(e){return function(){return null==e.ve&&(e.ve=xn(n(),[e.oe.zi])),e.ve}}(h),h.oe.start,h.oe.end,i,u,e,c,[],"",null,null,ls,r)).codecs=a,h.mimeType=s,p.push(h)}return p}(e.ka.start,e.ka.duration,e.J.Ga,i,o,n,e.J.mimeType,e.J.codecs);return t=!r,r?r.rd(a,e.presentationTimeline.mb()):r=new ja(a),e.presentationTimeline.sd(a),e.vb&&e.ka.ld||r.Bc(e.ka.start,e.ka.duration?e.ka.start+e.ka.duration:1/0,t),s&&(s.segmentIndex=r),{fc:function(){return r&&0!=r.getNumReferences()||r.Zd(a),Promise.resolve(r)}}}function Jh(e){return e.Pb}function Zh(t,n,o,i,r,s,a,l,u){u||t.J.Gc||(t.J.Gc=Dh(t,ef,"initialization"));var c=t.J.Gc?function(e,t){var n=e.J.Gc;if(n||(n=Dh(e,ef,"initialization")),!n)return null;n=pn(n);var o=e.J.id,i=e.bandwidth||null,r=e.J.Ga;return t=new is(function(){var e=Rh(n,o,null,null,i,null);return xn(r(),[e])},0,null,Yh(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}(t,a):null,d=function(e){var t=_h(e,ef),n=Dh(e,ef,"media"),o=Dh(e,ef,"index");return{La:t.La,timescale:t.timescale,vd:t.vd,Nb:t.Nb,Zf:t.Zf,timeline:t.timeline,Zb:n&&pn(n),jd:o,mimeType:e.J.mimeType,codecs:e.J.codecs}}(t);!function(e){var t=e.jd?1:0;if(t+=e.timeline?1:0,0==(t+=e.La?1:0))throw new St(2,4,4002);if(1!=t&&(e.jd&&(e.timeline=null),e.La=null),!e.jd&&!e.Zb)throw new St(2,4,4002)}(d);var h=uo(t);if(d.jd)return Kh(t,c),{fc:function(){var e=Rh(d.jd,h.J.id,null,null,h.bandwidth||null,null);return e=xn(h.J.Ga(),[e]),qh(h,n,c,e,0,null,d.Nb)}};if(d.La)return i||"image"===t.ja.contentType||(t.presentationTimeline.xf(d.La),t.presentationTimeline.ce(t.ka.start)),{fc:function(){return function(t,n,o,i,r,s,a){function l(o){var r=(o-y)*g,a=r+n.Nb,l=r+h;return r=l+g,(l=new ss(l,Math.min(r,c()),function(){var t=a*v;return"BigInt"in e&&t>Number.MAX_SAFE_INTEGER&&(t=BigInt(a)*BigInt(v)),t=Rh(b,w,o,null,x,t),xn(S(),[t])},0,null,i,T,h,c(),[],"",null,null,ls,s)).codecs=t.J.codecs,l.mimeType=t.J.mimeType,l.j=r,l}function u(){var e=[Math.max(d.mb(),h),Math.min(d.Wb(),c())].map(function(e){return e-h});return e=[Math.ceil(e[0]/g),Math.ceil(e[1]/g)-1],t.J.Ia&&e[1]++,e.map(function(e){return e+y})}function c(){var e=null!=f&&r[f]||m;return e?h+e:1/0}var d=t.presentationTimeline,h=t.ka.start,f=t.ta.id,m=t.ka.duration,g=n.La,y=n.vd,v=n.timescale,b=n.Zb,x=t.bandwidth||null,w=t.J.id,S=t.J.Ga,T=h-n.Nb,k=u();o=t.vb?Math.max(k[0],k[1]-o+1):k[0],a=a||k[1],k=[];for(var C=o;C<=a;++C){var A=l(C);k.push(A)}var E=new ja(k);if(k=d.Wb()<c(),C=d.V(),k||C){var I=Math.max(o,a+1);o=g,t.J.Ia&&(o=.1),E.ue(o,function(){var e=d.mb();E.Ma(e);var t=p(u());t.next(),t=t.next().value;for(var n=[];I<=t;){var o=l(I);n.push(o),I++}return e>c()&&!n.length?null:n})}return Promise.resolve(E)}(h,d,r,c,s,a,l)}};var f=null;i=i=null,t.ta.id&&t.J.id&&(i=o[i=t.ta.id+","+t.J.id])&&(f=i.segmentIndex);var m=t.ka.start,g=t.ka.duration?m+t.ka.duration:1/0,y=!(t.vb&&t.ka.ld);return f?(nf(o=f,d,m,g,y,c),o.Ma(t.presentationTimeline.mb())):f=new tf(d,t.J.id,t.bandwidth,t.J.Ga,m,g,c,y,a,t.J.Kf),d.timeline&&"image"!==t.ja.contentType&&t.presentationTimeline.Ng(d.timeline,m),i&&t.vb&&(i.segmentIndex=f),{fc:function(){return f instanceof tf&&0==f.getNumReferences()&&nf(f,d,m,g,y,c),Promise.resolve(f)}}}function ef(e){return e.$b}function tf(e,t,n,o,i,r,s,a,l,u){ja.call(this,[]),this.g=e,this.C=t,this.A=n,this.B=o,this.h=i,this.j=r,this.o=s,this.s=l,this.F=u,a&&of(this)}function nf(e,t,n,o,i,r){if(function(e,t){if(e.o!==t){e.o=t;for(var n=(e=p(e.O)).next();!n.done;n=e.next())(n=n.value)&&as(n,t)}}(e,r),e.g){if(n=e.g.timeline,e.g.Zb!==t.Zb&&(e.g.Zb=t.Zb),n.length){var s=n[n.length-1];t=t.timeline.filter(function(e){return e.start>=s.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,d(t)),e.j!==o&&(e.j=o)}else e.g=t,e.h=n,e.j=o;i&&of(e)}function of(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.Ma(e.h)}}function rf(e,t,n,o,i,r,s){return e=Rh(e,t,n,r,o||null,i),xn(s(),[e]).map(function(e){return e.toString()})}function sf(e){this.o=null,this.A=e,this.G=new fi,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}function af(e,t){var n,o,i,r,s,a,l;return P(function(u){return 1==u.g?(n=xn(e.i,[lf(e,t)]),o=bi(n,e.o.retryParameters),i=e.A.networkingEngine.request(8,o),mi(e.G,i),k(u,2),S(u,i.promise,4)):2!=u.g?(r=u.h,s=rn(r.data),1==(a=JSON.parse(s)).VERSION&&function(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var o=t["RELOAD-URI"]||n;e.g=new Rt(function(){af(e,o)}),(n=t.TTL)&&(e.C=n),e.g.Y(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}(e,a,r.uri),A(u,0)):(l=E(u))&&7001==l.code?u.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new Rt(function(){af(e,t)}),e.g.Y(e.C),void T(u))})}function lf(e,t){if(!e.m.length)return t;t=new st(t);var n=e.B||e.m[0],o=Math.round(e.A.getBandwidthEstimate()),i=t.g;return"DASH"==e.s?(i.add("_DASH_pathway",n),i.add("_DASH_throughput",String(o))):"HLS"==e.s&&(i.add("_HLS_pathway",n),i.add("_HLS_throughput",String(o))),wt(i)&&ct(t,i),t.toString()}function uf(e,t,n,o){var i=e.l.get(t);i||(i=new Map),i.set(n,o),e.l.set(t,i)}function cf(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var o=[],i=p(e.m),r=i.next(),s={};!r.done;s={Lc:void 0},r=i.next())if(s.Lc=r.value,r=t.get(s.Lc))o.push({Df:s.Lc,location:r});else if(r=e.F.find(function(e){return function(t){return t.wj==e.Lc}}(s))){var a=t.get(r["BASE-ID"]);a&&(r["URI-REPLACEMENT"].rh?(lt(a=new st(a),r["URI-REPLACEMENT"].rh),o.push({Df:s.Lc,location:a.toString()})):o.push({Df:s.Lc,location:a}))}for(i=Date.now(),r=(s=p(e.j.keys())).next();!r.done;r=s.next())r=r.value,i>(a=e.j.get(r))&&e.j.delete(r);if(o=o.filter(function(t){for(var n=p(e.j.keys()),o=n.next();!o.done;o=n.next())if(o.value.includes(new st(t.location).Eb))return!1;return!0}),o.length&&(e.B=o[0].Df),o=o.map(function(e){return e.location}),!o.length&&e.h)for(s=(i=p(e.h.split(","))).next();!s.done;s=i.next())(s=t.get(s.value))&&(e.B=e.h,o.push(s));if(!o.length)for(i=(t=p(t.values())).next();!i.done;i=t.next())o.push(i.value);return n?o:xn(e.i,o)}function pf(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}function df(e,t){for(var n=[],o=[],i=[],r=[],s=(e=p(e)).next();!s.done;s=e.next()){var a=s.value;s=new Map(a.audioStreams.map(function(e){return[Bf(e),e]}));var l=new Map(a.videoStreams.map(function(e){return[Uf(e),e]})),u=new Map(a.textStreams.map(function(e){return[jf(e),e]}));if(a=new Map(a.imageStreams.map(function(e){return[Ff(e),e]})),t){var c=Df(An);u.set(jf(c),c),c=Df("image"),a.set(Ff(c),c)}n.push(s),o.push(l),i.push(u),r.push(a)}return{jg:n,ph:o,lh:i,Eg:r}}function hf(e){var t,n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,T,k,C,A,E,I,M,R,_;return P(function(L){switch(L.g){case 1:if(t=En,1==e.length)return L.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.X}).map(function(e){return[Bf(e),e]}))}),o=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ga}).map(function(e){return[Uf(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ua}).map(function(e){return[jf(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.De}).map(function(e){return[Ff(e),e]}))}),s=p(i),a=s.next();!a.done;a=s.next())l=a.value,u=Lf(t.ua),l.set(jf(u),u);for(c=p(r),d=c.next();!d.done;d=c.next())h=d.value,f=Lf(t.De),h.set(Ff(f),f);return S(L,ff(m=new pf,[],n,0,bf,wf,0),2);case 2:return g=L.h,S(L,ff(m,[],o,0,bf,wf,0),3);case 3:return y=L.h,S(L,ff(m,[],i,0,bf,wf,0),4);case 4:return v=L.h,S(L,ff(m,[],r,0,bf,wf,0),5);case 5:if(b=L.h,x=0,y.length&&g.length)for(C=p(g),A=C.next();!A.done;A=C.next())for(E=A.value,I=p(y),M=I.next();!M.done;M=I.next())R=M.value,_=x++,R.variantIds.push(_),E.variantIds.push(_);else for(w=y.concat(g),T=p(w),k=T.next();!k.done;k=T.next())k.value.variantIds=[x++];return L.return(y.concat(g).concat(v).concat(b))}})}function ff(e,t,n,o,i,r,s){var a,l,u,c,d,h,f,m,g,y,v,b,x,w,T,k,C,A;return P(function(E){switch(E.g){case 1:for(a=[],l=0;l<n.length;l++)l>=o?a.push(new Set(n[l].values())):a.push(new Set);u=p(t),c=u.next();case 2:if(c.done){E.u(4);break}return d=c.value,S(E,function(e,t,n,o,i,r,s){return P(function(a){return 1==a.g?(Sf(e,n,t,0<s),t.matchedStreams?t.segmentIndex?S(a,mf(t,o+s),2):a.u(2):a.return(!1)):(yf(t,o,i,r,s),a.return(!0))})}(e,d,n,o,r,a,s),5);case 5:if(!E.h)throw new St(2,4,4037);c=u.next(),E.u(2);break;case 4:for(h=p(a),f=h.next();!f.done;f=h.next())for(m=f.value,g=p(m),y=g.next();!y.done;y=g.next())v=y.value,(b=gf(e,v,n,i,r,a))&&t.push(b);for(x=p(a),w=x.next();!w.done;w=x.next())for(T=w.value,k=p(T),C=k.next(),A={};!C.done;A={Tf:void 0},C=k.next())if(A.Tf=C.value,!Nf(A.Tf)&&t.some(function(t){return function(n){return Cf(e,t.Tf,n)}}(A)))throw new St(2,4,4037);return E.return(t)}})}function mf(e,t){var n,o,i,r,s,a,l;return P(function(u){if(1==u.g){for(n=[],o=e.matchedStreams,i=p(o),r=i.next();!r.done;r=i.next())s=r.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return S(u,Promise.all(n),2)}if(e.segmentIndex instanceof $a)for(a=t;a<o.length;a++)(l=o[a]).segmentIndex&&e.segmentIndex.g.push(l.segmentIndex);T(u)})}function gf(e,t,n,o,i,r){if(Nf(t))return null;var s=o(t);return Sf(e,n,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return P(function(e){return s.segmentIndex?e.u(0):(s.segmentIndex=new $a,S(e,mf(s,0),0))})}),s.matchedStreams&&s.matchedStreams.length?(yf(s,0,i,r,0),s):null}function yf(e,t,n,o,i){var r=e.matchedStreams;for(t+=i;t<r.length;t++){var s=r[t];n(e,s);var a=!0;if("audio"==e.type&&0==oo(e.language,s.language)&&(a=!1),a&&(o[t-i].delete(s),s.fullMimeTypes))for(a=(s=p(s.fullMimeTypes.values())).next();!a.done;a=s.next())e.fullMimeTypes.add(a.value)}}function vf(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=p(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function bf(e){return(e=Object.assign({},e)).roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function xf(e,t){function n(e,t){e||(e=[]);for(var n=(t=p(t)).next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var o=p(t.keyIds),i=o.next();!i.done;i=o.next())e.keyIds.add(i.value);if(null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),o=Ct(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!o.length)throw new St(2,4,4038);if(e.drmInfos=o,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=(o=p(t.closedCaptions)).next();!i.done;i=o.next()){var r=p(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=vf(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),xf(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&xf(e.trickModeVideo,t)}function wf(e,t){var n=e.roles;n||(n=[]);for(var o=p(t.roles),i=o.next();!i.done;i=o.next())i=i.value,n.includes(i)||n.push(i);for(e.roles=n,o=(n=p(t.keyIds)).next();!o.done;o=n.next())e.keyIds.add(o.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,d(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=p(t.closedCaptions)).next();!n.done;n=t.next())n=(o=p(n.value)).next().value,o=o.next().value,e.closedCaptions.set(n,o)}function Sf(e,t,n,o){o=void 0!==o&&o?n.matchedStreams:[];for(var i=(t=p(t)).next();!i.done;i=t.next()){if(!(i=Tf(e,i.value,n)))return;o.push(i)}n.matchedStreams=o}function Tf(e,t,n){var o={audio:Bf,video:Uf,text:jf,image:Ff}[n.type],i=null,r=o(n);if(t.has(r))i=t.get(r);else{r={audio:function(t,n){return Cf(e,t,n)},video:function(t,n){return Cf(e,t,n)},text:Af,image:Ef}[n.type];for(var s={audio:If,video:Mf,text:Rf,image:_f}[n.type],a=p(t.values()),l=a.next();!l.done;l=a.next())!r(n,l=l.value)||n.fastSwitching!=l.fastSwitching||i&&!s(n,i,l)||(i=l)}return e.s&&!Nf(i)&&t.delete(o(i)),i}function kf(e,t){return e.mimeType==t.mimeType&&zf(e.codecs)===zf(t.codecs)}function Cf(e,t,n){return!(!kf(t,n)&&!e.o||t.drmInfos&&!kt(t.drmInfos,n.drmInfos))}function Af(e,t){return!t.language||e.forced===t.forced&&0!=oo(e.language,t.language)&&t.kind==e.kind}function Ef(){return!0}function If(e,t,n){var o=kf(e,t),i=kf(e,n);if(o&&!i)return!1;if(!o&&i)return!0;if(o=oo(e.language,t.language),(i=oo(e.language,n.language))>o)return!0;if(i<o)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(t){return e.roles.includes(t)}),(i=n.roles.filter(function(t){return e.roles.includes(t)})).length>o.length)return!0;if(i.length<o.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((o=Pf(e.channelsCount,t.channelsCount,n.channelsCount))==$f||o!=Vf&&((o=Pf(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==$f||o!=Vf&&!(!e.bandwidth||Of(e.bandwidth,t.bandwidth,n.bandwidth)!=$f)))}function Mf(e,t,n){var o=kf(e,t),i=kf(e,n);if(o&&!i)return!1;if(!o&&i)return!0;if((o=Pf(e.width*e.height,t.width*t.height,n.width*n.height))==$f)return!0;if(o==Vf)return!1;if(e.frameRate){if((o=Pf(e.frameRate,t.frameRate,n.frameRate))==$f)return!0;if(o==Vf)return!1}return!(!e.bandwidth||Of(e.bandwidth,t.bandwidth,n.bandwidth)!=$f)}function Rf(e,t,n){var o=oo(e.language,t.language),i=oo(e.language,n.language);if(i>o)return!0;if(i<o)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(t){return e.roles.includes(t)}),(i=n.roles.filter(function(t){return e.roles.includes(t)})).length>o.length)return!0;if(i.length<o.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function _f(e,t,n){return Pf(e.width*e.height,t.width*t.height,n.width*n.height)==$f}function Lf(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Df(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ja([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Pf(e,t,n){if(t==e&&e!=n)return Vf;if(n==e&&e!=t)return $f;if(t>e){if(n<=e||n-e<t-e)return $f;if(n-e>t-e)return Vf}else{if(n>e)return Vf;if(e-n<e-t)return $f;if(e-n>e-t)return Vf}return Gf}function Of(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?$f:t<e?Vf:Gf}function Nf(e){switch(e.type){case An:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Uf(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,zf(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function Bf(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,zf(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function jf(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Ff(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function zf(e){if(!Hf.has(e)){var t=Nn(e);Hf.set(e,t)}return Hf.get(e)}v(tf,ja),(i=tf.prototype).getNumReferences=function(){return this.g?this.g.timeline.length:0},i.release=function(){ja.prototype.release.call(this),this.g=null},i.Ma=function(e){if(this.g){for(var t=0,n=this.g.timeline,o=0;o<n.length&&n[o].end+this.h<=e;o+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.O.length>=t&&(this.O=this.O.slice(t)),this.i+=t,0===this.getNumReferences()&&this.release())}},i.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,o=0;o<t.length;o++){var i=t[o],r=i.start+this.h;if(i=o<n?t[o+1].start+this.h:1/0===this.j?i.end+this.h:this.j,e>=r&&e<i)return o+this.i}return null},i.get=function(e){var t=this;if(0>(e-=this.i)||e>=this.getNumReferences()||!this.g)return null;var n=this.O[e];if(!n){var o=this.g.timeline[e],i=o.Si,r=this.g.Zf+o.$f;n=this.h-this.g.Nb;var s=this.h+o.end,a=s;e===this.getNumReferences()-1&&1/0!==this.j&&(a=this.j);for(var l=this.g.codecs,u=this.g.mimeType,c=[],p=(o.end-o.start)/o.zb,d={},h=0;h<o.zb;d={we:void 0,kh:void 0},h++){var f=o.start+p*h,m=f+p;d.kh=h+1,d.we=null,(d=new ss(this.h+f,this.h+m,function(e){return function(){return t.g?(null==e.we&&(e.we=rf(t.g.Zb,t.C,i,t.A,r,e.kh,t.B)),e.we):[]}}(d),0,null,this.o,n,this.h,this.j,[],"",null,null,ls,this.s)).codecs=l,d.mimeType=u,0==this.F?0<h&&d.Xd():0!=h%this.F&&d.Xd(),c.push(d)}(n=new ss(this.h+o.start,a,function(){return 0<o.zb||!t.g?[]:rf(t.g.Zb,t.C,i,t.A,r,null,t.B)},0,null,this.o,n,this.h,this.j,c,"",null,null,ls,this.s,0<o.zb)).codecs=l,n.mimeType=u,n.j=s,this.O[e]=n}return n},sf.prototype.configure=function(e){this.o=e},sf.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.G.destroy()},sf.prototype.setManifestType=function(e){this.s=e},sf.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},(i=pf.prototype).release=function(){for(var e=p(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},i.ei=function(){return this.j},i.jf=function(){return this.l.slice()},i.Nh=function(){return this.i},i.Ke=function(e,t,n){n=void 0!==n&&n;var o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,k,C,A,E,I,M,R,_,L,D,O,N,U=this;return P(function(P){if(1==P.g){if(o=En,!t&&1==e.length)return i=df(e,!1),r=i.jg,s=i.ph,a=i.lh,l=i.Eg,U.h=Array.from(r[0].values()),U.g=Array.from(s[0].values()),U.l=Array.from(a[0].values()),U.i=Array.from(l[0].values()),P.u(2);for(u=n?U.m.size:0,c=-1,d=0;d<e.length;d++)h=e[d],U.m.has(h.id)||(U.m.add(h.id),-1==c&&(c=d));return-1==c?P.return():(f=df(e,!0),m=f.jg,g=f.ph,y=f.lh,v=f.Eg,S(P,Promise.all([ff(U,U.h,m,c,vf,xf,u),ff(U,U.g,g,c,vf,xf,u),ff(U,U.l,y,c,vf,xf,u),ff(U,U.i,v,c,vf,xf,u)]),2))}if(b=0,x=[],U.g.length&&U.h.length)for(I=p(U.h),M=I.next();!M.done;M=I.next())for(R=M.value,_=p(U.g),L=_.next();!L.done;L=_.next())D=L.value,O=Ct(R.drmInfos,D.drmInfos),R.drmInfos.length&&D.drmInfos.length&&!O.length||(N=b++,x.push({id:N,language:R.language,disabledUntilTime:0,primary:R.primary,audio:R,video:D,bandwidth:(R.bandwidth||0)+(D.bandwidth||0),drmInfos:O,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(w=U.g.length?U.g:U.h,k=p(w),C=k.next();!C.done;C=k.next())A=C.value,E=b++,x.push({id:E,language:A.language,disabledUntilTime:0,primary:A.primary,audio:A.type==o.X?A:null,video:A.type==o.ga?A:null,bandwidth:A.bandwidth||0,drmInfos:A.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});U.j=x,T(P)})},i.Zg=function(e){this.o=e},i.gh=function(e){this.s=e},$("shaka.util.PeriodCombiner",pf),pf.prototype.setUseStreamOnce=pf.prototype.gh,pf.prototype.setAllowMultiTypeVariants=pf.prototype.Zg,pf.prototype.combinePeriods=pf.prototype.Ke,pf.prototype.getImageStreams=pf.prototype.Nh,pf.prototype.getTextStreams=pf.prototype.jf,pf.prototype.getVariants=pf.prototype.ei;var $f=1,Gf=0,Vf=-1,Hf=new Map;function qf(e,t){try{return function(e,t){var n=new DOMParser,o=Xf.value()(e);e=null;try{e=n.parseFromString(o,"text/xml")}catch(i){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}(an(e),t)}catch(n){return null}}var Xf=new Tt(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});function Wf(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.ea=1,this.B=[],this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.o=new Map,this.s={},this.ba={},this.m=new pf,this.H=0,this.da=new H(5),this.I=new Rt(function(){e.G&&!e.g.continueLoadingWhenPaused&&(e.C.jb(e.G,"timeupdate"),e.G.paused)?e.C.ha(e.G,"timeupdate",function(){return rm(e)}):rm(e)}),this.N=new fi,this.L=null,this.fa=[],this.R=1/0,this.F=!1,this.h=null,this.K=0,this.U=!1,this.C=new te,this.G=null,this.Z=!1}function Kf(e){var t,n,o,i,r,s,a,l,u,c;return P(function(h){return 1==h.g?(t=4,n="MPD",o=function(e){var t=e.l.td;if(!e.l.ae||!t||!e.B.length)return[];var n=Date.now()/1e3,o=e.B.filter(function(e){return!(e=fr(e.attributes.ttl))||t+e>n}).map(tr).filter(Qn);return o.length?xn(e.A,o):[]}(e),i=e.A,o.length?(i=o,n="Patch",t=6):1<e.A.length&&e.h&&(r=cf(e.h,"Location",!0)).length&&(i=r),s=bi(i,e.g.retryParameters),a=Date.now(),S(h,dm(e,s,0,{type:t}),2)):3!=h.g?(l=h.h,e.j?(l.uri&&l.uri!=l.originalUri&&!e.A.includes(l.uri)&&e.A.unshift(l.uri),S(h,function(e,t,n,o){var i,r,s,a,l,u,c,h;return P(function(f){if(1==f.g){if(i=t,(r=e.g.dash.manifestPreprocessor)!=Yl){if(le("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),!(s=qf(i,o)))throw new St(2,4,4001,n);r(s),i=ln(s.outerHTML)}if(!(a=Wi(i,o)))throw new St(2,4,4001,n);return(l=e.g.dash.manifestPreprocessorTXml)!=Ql&&l(a),"Patch"===o?f.return(function(e,t){var n,o,i,r,s,a,l,u,c,h,f,m,g,y,v,b,x,w,k,C,A,E,I,M;return P(function(R){if(1==R.g){if(n=t.attributes.mpdId,o=rr(t,"originalPublishTime",ur),!n||n!==e.l.ae||o!==e.l.td)throw e.B=[],new St(1,4,4052);for(i=[],r=[],s=new Set,a=p(Ji(t)),l=a.next();!l.done;l=a.next())if(u=l.value,c=vr(u.attributes.sel||""),h=c[c.length-1],f=tr(u)||"","MPD"===h.name)if("mediaPresentationDuration"===h.Sb){var _=cr(tr(u)||"");if(null!=_){e.l.Kb=_;for(var L=p(e.o.values()),D=L.next();!D.done;D=L.next())D.value.Kb=_}}else if("type"===h.Sb){for(e.i.presentationTimeline.sc("static"==f),e.l.type=f,L=(_=p(e.o.values())).next();!L.done;L=_.next())L.value.vb="dynamic"==f;"static"==f&&(e.H=-1)}else"publishTime"===h.Sb?e.l.td=ur(f)||0:null===h.Sb&&"add"===u.tagName&&r.push(u);else if("PatchLocation"===h.name)br(e.B,u);else if("Period"===h.name){if("add"===u.tagName)r.push(u);else if("remove"===u.tagName&&h.id){_=e,L=h.id,_.i.periodCount--;for(var P=(D=p(_.o.keys())).next();!P.done;P=D.next())if((P=P.value).startsWith(L)){var O=_.o.get(P);Ph(O,ef,"SegmentTimeline").children=[],Zf(_,P),_.o.delete(P)}}}else if("SegmentTemplate"===h.name){if((_=(L=vr(u.attributes.sel||""))[L.length-1]).Sb){for(L=Jf(e,L),D=tr(u)||"",O=(P=p(L)).next();!O.done;O=P.next())wr((O=e.o.get(O.value)).J.$b,u.tagName,_.Sb,D);_=L}else _=[];for(m=p(_),g=m.next();!g.done;g=m.next())y=g.value,s.add(y)}else if("SegmentTimeline"===h.name||"S"===h.name){for(_=vr(u.attributes.sel||""),D=(L=p(_=Jf(e,_))).next();!D.done;D=L.next())br(P=Zi(D=Ph(D=e.o.get(D.value),ef,"SegmentTimeline"),"S"),u),D.children=P;for(v=p(_),b=v.next();!b.done;b=v.next())x=b.value,s.add(x)}for(w=p(s),k=w.next();!k.done;k=w.next())C=k.value,Zf(e,C);for(A=p(r),E=A.next();!E.done;E=A.next())I=E.value,i.push.apply(i,d(nm(e,{vb:"dynamic"==e.l.type,presentationTimeline:e.i.presentationTimeline,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:e.l.Ia,profiles:e.l.profiles,Kb:e.l.Kb,roles:null},e.l.Ga,I).periods));return i.length?(e.i.periodCount+=i.length,e.i.gapCount=e.K,S(R,Qf(e,i,!0),2)):R.u(2)}"static"==e.l.type&&(M=e.l.Kb,e.i.presentationTimeline.Za(M||1/0)),T(R)})}(e,a)):e.g.dash.disableXlinkProcessing?f.return(Yf(e,a,n)):(u=e.g.dash.xlinkFailGracefully,c=Oh(a,e.g.retryParameters,u,n,e.j.networkingEngine),mi(e.N,c),S(f,c.promise,2))}return h=f.h,f.return(Yf(e,h,n))})}(e,l.data,l.uri,n),3)):h.return(0)):(u=Date.now(),c=(u-a)/1e3,e.da.sample(1,c),h.return(c))})}function Yf(e,t,n){var o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,C,I,M,R,_,L,D,O,N,U,B,j,F,z,$,G,V,H,q,X,W,K,Q,J,Z,ee,te,ne,oe,ie,re,se,ae,le;return P(function(ue){switch(ue.g){case 1:for(e.h&&e.h.l.clear(),o=[n],i=[],r=new Map,s=Zi(t,"Location"),a=p(s),l=a.next();!l.done;l=a.next())u=l.value,c=u.attributes.serviceLocation,(d=tr(u))&&(h=xn(o,[d])[0],c&&(e.h?uf(e.h,"Location",c,h):r.set(c,h)),i.push(h));if(e.h?0<(f=cf(e.h,"Location",!0)).length&&(o=e.A=f):i.length&&(o=e.A=i),e.l.ae=t.attributes.id||"",e.l.td=rr(t,"publishTime",ur)||0,e.B=Zi(t,"PatchLocation"),m=Promise.resolve(),(g=or(t,"ContentSteering"))&&e.j)for(y=g.attributes.defaultServiceLocation,e.h?(e.h.i=o,e.h.h=y):(e.h=new sf(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=o,e.h.h=y,(v=tr(g))&&(rr(g,"queryBeforeStart",gr,!1)?m=af(e.h,v):af(e.h,v))),b=p(r.keys()),x=b.next();!x.done;x=b.next())w=x.value,C=r.get(w),uf(e.h,"Location",w,C);if(I=Zi(t,"BaseURL"),R=!1,e.h)for(_=p(I),L=_.next();!L.done;L=_.next())D=L.value,O=D.attributes.serviceLocation,N=tr(D),O&&N&&(uf(e.h,"BaseURL",O,N),R=!0);if(R&&e.h||(U=I.map(tr),M=xn(o,U)),B=function(){return e.h&&R?cf(e.h,"BaseURL"):M||[]},e.l.Ga=B,j=0,I&&I.length&&(j=rr(I[0],"availabilityTimeOffset",mr)||0),e.l.Ia=j,F=e.g.dash.ignoreMinBufferTime,z=0,F||(z=rr(t,"minBufferTime",cr)||0),e.H=rr(t,"minimumUpdatePeriod",cr,-1),$=rr(t,"availabilityStartTime",ur),G=rr(t,"timeShiftBufferDepth",cr),V=e.g.dash.ignoreSuggestedPresentationDelay,H=null,V||(H=rr(t,"suggestedPresentationDelay",cr)),q=e.g.dash.ignoreMaxSegmentDuration,X=null,q||(X=rr(t,"maxSegmentDuration",cr)),W=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.Z=e.i.presentationTimeline.V()&&"static"==W),e.l.type=W,e.i)for(K=e.i.presentationTimeline,Q=p(Object.values(e.s)),J=Q.next();!J.done;J=Q.next())(Z=J.value).segmentIndex&&Z.segmentIndex.Ma(K.mb());else ee=e.g.defaultPresentationDelay||1.5*z,K=new ba($,null!=H?H:ee,e.g.dash.autoCorrectDrift);return K.sc("static"==W),K.V()&&!isNaN(e.g.availabilityWindowOverride)&&(G=e.g.availabilityWindowOverride),null==G&&(G=1/0),K.pe(G),te=t.attributes.profiles||"",e.l.profiles=te.split(","),ne={vb:"static"!=W,presentationTimeline:K,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:j,Kb:null,profiles:te.split(","),roles:null},e.K=0,oe=nm(e,ne,B,t),ie=oe.duration,re=oe.periods,("static"!=W||e.Z)&&oe.rg||K.Za(ie||1/0),e.U&&!e.F&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.F=e.j.isLowLatencyMode()),e.F&&K.$g(e.R),K.xf(X||1),S(ue,m,2);case 2:return e.F&&(z=0,se=null!=H?H:e.g.defaultPresentationDelay,K.Of(se)),e.i?(e.i.periodCount=re.length,e.i.gapCount=e.K,S(ue,Qf(e,re,!1),4)):S(ue,e.m.Ke(re,ne.vb),6);case 6:if(e.i={presentationTimeline:K,variants:e.m.j,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:z||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:em(t),nextUrl:tm(t),periodCount:re.length,gapCount:e.K,isLowLatency:e.U},!K.nh()){ue.u(7);break}return ae=Zi(t,"UTCTiming"),S(ue,function(e,t,n){var o,i,r,s,a,l,u,c;return P(function(d){switch(d.g){case 1:o=n.map(function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}}),i=e.g.dash.clockSyncUri,!o.length&&i&&o.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),r=p(o),s=r.next();case 2:if(s.done){d.u(4);break}switch(a=s.value,k(d,5),l=a.scheme,u=a.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(u),d.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Y("NTP UTCTiming scheme is not supported");break;default:Y("Unrecognized scheme in UTCTiming element",l)}d.u(9);break;case 7:return S(d,lm(e,t,u,"HEAD"),10);case 10:return d.return(d.h);case 8:return S(d,lm(e,t,u,"GET"),11);case 11:return d.return(d.h);case 9:A(d,3);break;case 5:E(d);case 3:s=r.next(),d.u(2);break;case 4:return Y("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}})}(e,B,ae),8);case 8:if(le=ue.h,!e.j)return ue.return();K.ah(le);case 7:K.Wd();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),T(ue)}})}function Qf(e,t,n){var o;return P(function(i){if(1==i.g)return S(i,e.m.Ke(t,!0,n),2);e.i.variants=e.m.j,0<(o=e.m.jf()).length&&(e.i.textStreams=o),e.i.imageStreams=e.m.i,e.j.filter(e.i),T(i)})}function Jf(e,t){for(var n="",o="",i=-1,r="",s=(t=p(t)).next();!s.done;s=t.next())"Period"===(s=s.value).name?n=s.id:"AdaptationSet"===s.name?(o=s.id,null!==s.position&&(i=s.position)):"Representation"===s.name&&(r=s.id);if(t=[],r)t.push(n+","+r);else if(o)for(i=p(e.o.values()),e=i.next();!e.done;e=i.next())(e=e.value).ta.id===n&&e.ja.id===o&&e.J.id&&t.push(n+","+e.J.id);else if(-1<i)for(o=p(e.o.values()),e=o.next();!e.done;e=o.next())(e=e.value).ta.id===n&&e.ja.position===i&&e.J.id&&t.push(n+","+e.J.id);return t}function Zf(e,t){var n=e.o.get(t),o=e.s[t];o.segmentIndex&&o.segmentIndex.Ma(e.i.presentationTimeline.mb());try{var i=Zh(n,function(t,n,o,i){return cm(e,t,n,o,i)},e.s,!0,e.g.dash.initialSegmentLimit,e.ba,n.J.aesKey,null,!0);o.createSegmentIndex=function(){return P(function(e){if(1==e.g)return o.segmentIndex?e.u(0):S(e,i.fc(),3);o.segmentIndex=e.h,T(e)})}}catch(r){if((t=n.J.contentType)!=An&&"application"!=t&&"image"!=t||4002!=r.code)throw r}}function em(e){var t=or(e,"ServiceDescription");if(!t)return null;if(e=or(t,"Latency"),t=or(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function tm(e){if(!(e=Zi(e,"SupplementalProperty")).length)return null;for(var t=(e=p(e)).next();!t.done;t=e.next())if("urn:mpeg:dash:chaining:2016"==(t=t.value).attributes.schemeIdUri)return t.attributes.value;return null}function nm(e,t,n,o){var i=t.Kb;i||(i=rr(o,"mediaPresentationDuration",cr),e.l.Kb=i);var r=0;e.i&&e.i.presentationTimeline&&e.Z&&(r=e.i.presentationTimeline.Vb());var s=[],a=r;o=Zi(o,"Period");for(var l=0;l<o.length;l++){var u=o[l],c=o[l+1],p=rr(u,"start",cr,a),d=u.attributes.id,h=rr(u,"duration",cr),f=null;if(c){var m=rr(c,"start",cr);null!=m&&(f=m-p)}else null!=i&&(f=i-p+r);if(m=In,f&&h&&Math.abs(f-h)>m&&f>h&&e.K++,null==f&&(f=h),!(null!==e.L&&null!==d&&null!==p&&p<e.L)||e.fa.includes(d)||l+1==o.length){if(null!==p&&(null===e.L||p>e.L)&&(e.L=p),a=om(e,t,n,{start:p,duration:f,node:u,ld:null==f||!c}),s.push(a),t.ta.id&&f&&(e.ba[t.ta.id]=f),null==f){a=null;break}a=p+f}}return e.fa=s.map(function(e){return e.id}),null!=i?{periods:s,duration:i+r,rg:!1}:{periods:s,duration:a,rg:!0}}function om(t,n,o,i){n.ta=am(t,i.node,null,o),n.ka=i,n.ta.Ia=n.Ia,n.ta.id||(n.ta.id="__shaka_period_"+i.start);var r=Zi(i.node,"EventStream");o=n.presentationTimeline.mb();for(var s=(r=p(r)).next();!s.done;s=r.next())um(t,i.start,i.duration,s.value,o);if(o=Zi(i.node,"AdaptationSet").map(function(o,i){return function(t,n,o,i){function r(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.ja=am(t,i,n.ta,null),n.ja.position=o;var a,l,u=!1,c=(o=Zi(i,"Role")).map(function(e){return e.attributes.value}).filter(Qn),h=void 0,f=n.ja.contentType==An;f&&(h="subtitle");for(var m=(o=p(o)).next();!m.done;m=o.next()){var g=(m=m.value).attributes.schemeIdUri;if(null==g||"urn:mpeg:dash:role:2011"==g)switch(m=m.attributes.value,m){case"main":u=!0;break;case"caption":case"subtitle":h=m}}g=Zi(i,"EssentialProperty"),o=null;var y=!1;m=!1;for(var v=(g=p(g)).next();!v.done;v=g.next()){var b=(v=v.value).attributes.schemeIdUri;"http://dashif.org/guidelines/trickmode"==b?o=v.attributes.value:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==b?a=s(parseInt(v.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==b?l=r(parseInt(v.attributes.value,10)):"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=b&&("urn:mpeg:dash:ssr:2023"==b&&t.g.dash.enableFastSwitching?y=!0:m=!0)}var x=null;for(g=p(g=Zi(i,"SupplementalProperty")),v=g.next();!v.done;v=g.next())v=v.value,"http://dashif.org/guidelines/last-segment-number"==(b=v.attributes.schemeIdUri)?x=parseInt(v.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==b?a=s(parseInt(v.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==b&&(l=r(parseInt(v.attributes.value,10)));g=Zi(i,"Accessibility");var w,k=new Map;for(g=p(g),v=g.next();!v.done;v=g.next())if(b=v.value,v=b.attributes.schemeIdUri,b=b.attributes.value,"urn:scte:dash:cc:cea-608:2015"!=v||t.g.disableText)if("urn:scte:dash:cc:cea-708:2015"!=v||t.g.disableText)"urn:mpeg:dash:role:2011"==v?null!=b&&(c.push(b),"captions"==b&&(h="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==v&&("1"==b?w="visually impaired":"2"==b&&(w="hard of hearing"));else if(v=1,null!=b)for(var C=(b=p(b.split(";"))).next();!C.done;C=b.next()){var A=C.value,E=C=void 0;A.includes("=")?(C="svc"+(A=A.split("="))[0],E=A[1].split(",")[0].split(":").pop()):(C="svc"+v,v++,E=A),k.set(C,no(E))}else k.set("svc1","und");else if(v=1,null!=b)for(b=b.split(";"),C=p(b),A=C.next();!A.done;A=C.next()){E=A.value;var I=A=void 0;E.includes("=")?(A=(E=E.split("="))[0].startsWith("CC")?E[0]:"CC"+E[0],I=E[1]||"und"):(A="CC"+v,2==b.length?v+=2:v++,I=E),k.set(A,no(I))}else k.set("CC1","und");if(m)return null;var M=Ch(m=Zi(i,"ContentProtection"),t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),R=no(n.ja.language||"und"),_=n.ja.label;if(m=Zi(i,"Representation"),i=m.map(function(o){return(o=function(t,n,o,i,r,s,a,l,u,c,d,h){n.J=am(t,c,n.ja,null);var f=n.J.id;if(t.R=Math.min(t.R,n.J.Ia),t.U=0<t.R,!function(e){var t=e.Rc?1:0;return t+=e.Pb?1:0,0==(t+=e.$b?1:0)?e.contentType==An||"application"==e.contentType:(1!=t&&(e.Rc&&(e.Pb=null),e.$b=null),!0)}(n.J))return null;var m=n.ka.start;n.bandwidth=rr(c,"bandwidth",hr)||0,n.roles=l;var g,y,v=n.J.contentType,b=v==An||"application"==v;v="image"==v;try{var x=void 0;if(o.Fe){var w=n.J.Ga,k=xn(w(),[o.Fe.ti]),C=bi(k,t.g.retryParameters);x={bitsKey:128,blockCipherMode:"CBC",iv:o.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,o,i;return P(function(r){if(1==r.g)return S(r,dm(t,C,6),2);if(3!=r.g){if(!(n=r.h).data||16!=n.data.byteLength)throw new St(2,4,4049);return o={name:"AES-CBC"},i=x,S(r,e.crypto.subtle.importKey("raw",n.data,o,!0,["decrypt"]),3)}i.cryptoKey=r.h,x.fetchKey=void 0,T(r)})}}}if(n.J.aesKey=x,w=function(e,n,o,i){return cm(t,e,n,o,i)},n.J.Rc)var A=Hh(n,w,x);else if(n.J.Pb)A=Qh(n,t.s,x);else if(n.J.$b)A=Zh(n,w,t.s,!!t.i,t.g.dash.initialSegmentLimit,t.ba,x,h,!1);else{var E=n.ka.duration||0,I=n.J.Ga,M=n.J.mimeType,R=n.J.codecs;A={fc:function(){var e=Fa(m,E,I());return e.Hb(function(e){e.mimeType=M,e.codecs=R}),Promise.resolve(e)}}}}catch(L){if((b||v)&&4002==L.code)return null;throw L}if(h=function(e,t,n,o){var i=Ch(e,n,o);if(t.tg)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.tg=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==t.drmInfos.length))throw new St(2,4,4008);return i.pg||t.pg}(h=Zi(c,"ContentProtection"),o,t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),h=new Set(h?[h]:[]),w=!1,Zi(c,"SupplementalProperty").some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value})&&(w=!0),k=!1,b&&(k=l.includes("forced_subtitle")||l.includes("forced-subtitle")),v&&((c=Zi(c,"EssentialProperty").find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)}))&&(g=c.attributes.value),!g))return null;c=n.J.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(y="PQ"),b=n.J.id?n.ta.id+","+n.J.id:"",t.B.length&&f&&t.o.set(n.ta.id+","+f,function(e){for(var t={},n=p(Object.keys(e)),o=n.next();!o.done;o=n.next())if(o=o.value,["period","adaptationSet","representation"].includes(o)){var i=e[o];t[o]={Rc:null,Pb:null,$b:i.$b,Ga:i.Ga,width:i.width,height:i.height,contentType:i.contentType,mimeType:i.mimeType,language:i.language,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,emsgSchemeIdUris:i.emsgSchemeIdUris,id:i.id,position:i.position,Jc:i.Jc,audioSamplingRate:i.audioSamplingRate,Ia:i.Ia,Gc:i.Gc}}else"periodInfo"==o?(i=e[o],t[o]={start:i.start,duration:i.duration,node:null,ld:i.ld}):t[o]=e[o];return t}(n));var _=b&&t.s[b]?t.s[b]:{id:t.ea++,originalId:n.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){_.segmentIndex&&(_.segmentIndex.release(),_.segmentIndex=null)},segmentIndex:null,mimeType:n.J.mimeType,codecs:c,frameRate:n.J.frameRate,pixelAspectRatio:n.J.pixelAspectRatio,bandwidth:n.bandwidth,width:n.J.width,height:n.J.height,kind:i,encrypted:0<o.drmInfos.length,drmInfos:o.drmInfos,keyIds:h,language:r,originalLanguage:n.ja.language,label:s,type:n.ja.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:n.J.emsgSchemeIdUris,roles:l,forced:k,channelsCount:n.J.Jc,audioSamplingRate:n.J.audioSamplingRate,spatialAudio:w,closedCaptions:u,hdr:y,colorGamut:void 0,videoLayout:void 0,tilesLayout:g,accessibilityPurpose:d,external:!1,fastSwitching:!1,fullMimeTypes:new Set([_n(n.J.mimeType,n.J.codecs)])};return _.createSegmentIndex=function(){var e;return P(function(t){if(1==t.g)return _.segmentIndex?t.u(0):(e=_,S(t,A.fc(),3));e.segmentIndex=t.h,T(t)})},b&&n.vb&&!t.s[b]&&(t.s[b]=_),_}(t,n,M,h,R,_,u,c,k,o,w,x))&&(o.hdr=o.hdr||a,o.colorGamut=o.colorGamut||l,o.fastSwitching=y),o}).filter(function(e){return!!e}),0==i.length){if(o="image"==n.ja.contentType,t.g.dash.ignoreEmptyAdaptationSet||f||o)return null;throw new St(2,4,4003)}if(!n.ja.contentType||"application"==n.ja.contentType)for(n.ja.contentType=pm(i[0].mimeType,i[0].codecs),f=p(i),g=f.next();!g.done;g=f.next())g.value.type=n.ja.contentType;for(f=n.ja.id||"__fake__"+t.ea++,g=p(i),v=g.next();!v.done;v=g.next()){for(v=v.value,C=(b=p(M.drmInfos)).next();!C.done;C=b.next())(C=C.value).keyIds=C.keyIds&&v.keyIds?new Set([].concat(d(C.keyIds),d(v.keyIds))):C.keyIds||v.keyIds;t.g.dash.enableAudioGroups&&(v.groupId=f)}return m=m.map(function(e){return e.attributes.id}).filter(Qn),{id:f,contentType:n.ja.contentType,language:R,ek:u,streams:i,drmInfos:M.drmInfos,Yf:o,Mi:m}}(t,n,i,o)}).filter(Qn),n.vb){for(i=[],s=(r=p(o)).next();!s.done;s=r.next())for(var a=(s=p(s.value.Mi)).next();!a.done;a=s.next())i.push(a.value);if(i.length!=new Set(i).size)throw new St(2,4,4018)}for(i=o.filter(function(e){return!e.Yf}),r=(o=p(o=o.filter(function(e){return e.Yf}))).next();!r.done;r=o.next()){s=(r=r.value).Yf.split(" ");for(var l=(a=p(i)).next();!l.done;l=a.next())if(l=l.value,s.includes(l.id))for(var u=(l=p(l.streams)).next(),c={};!u.done;c={Sf:void 0},u=l.next())c.Sf=u.value,c.Sf.trickModeVideo=r.streams.find(function(e){return function(t){return Nn(e.Sf.codecs)==Nn(t.codecs)}}(c))}if(o=im(t.g.disableAudio,i,"audio"),r=im(t.g.disableVideo,i,"video"),s=im(t.g.disableText,i,An),i=im(t.g.disableThumbnails,i,"image"),0===r.length&&0===o.length)throw new St(2,4,4004);return{id:n.ta.id,audioStreams:o,videoStreams:r,textStreams:s,imageStreams:i}}function im(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n||e.push.apply(e,d(t.streams)),e},[])}function rm(e){var t,n;return P(function(o){switch(o.g){case 1:return t=0,k(o,2),S(o,Kf(e),4);case 4:t=o.h,A(o,3);break;case 2:if(n=E(o),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),o.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return o.return();e.j.onManifestUpdated(),sm(e,t),T(o)}})}function sm(e,t){if(!(0>e.H)){var n=e.H;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.I.Y(Math.max(n-t,q(e.da)))}}function am(e,t,n,o){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Jc:null,audioSamplingRate:null,Ia:0,Kf:0},o=o||n.Ga;var i,r=t.attributes.id,s=Zi(t,"BaseURL"),a=!1;if(e.h)for(var l=p(s),u=l.next();!u.done;u=l.next()){var c=u.value;u=c.attributes.serviceLocation,c=tr(c),u&&c&&(uf(e.h,r,u,c),a=!0)}a&&e.h||(i=s.map(tr)),l=t.attributes.contentType||n.contentType,u=t.attributes.mimeType||n.mimeType,c=[t.attributes.codecs||n.codecs];var d=sr(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");d&&c.push(d),c=ml(c).join(","),d=rr(t,"frameRate",yr)||n.frameRate;var h=t.attributes.sar||n.pixelAspectRatio,f=function(e,t){t=t.slice();for(var n=(e=p(e)).next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}(Zi(t,"InbandEventStream"),n.emsgSchemeIdUris),m=Zi(t,"AudioChannelConfiguration");m=function(e){for(var t=(e=p(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(m)||n.Jc;var g=rr(t,"audioSamplingRate",fr)||n.audioSamplingRate;l||(l=pm(u,c));var y=or(t,"SegmentBase"),v=or(t,"SegmentTemplate"),b=y&&rr(y,"availabilityTimeOffset",mr)||0,x=v&&rr(v,"availabilityTimeOffset",mr)||0,w=s&&s.length&&rr(s[0],"availabilityTimeOffset",mr)||0;b=n.Ia+w+b+x,x=null,(w=or(t,"SegmentSequenceProperties"))&&(w=or(w,"SAP"))&&(x=rr(w,"cadence",dr)),w=t.attributes.label;var S=Zi(t,"Label");return S&&S.length&&er(S=S[0])&&(w=er(S)),{Ga:function(){return xn(o(),s.length?e.h&&a?cf(e.h,r):i||[]:[])},Rc:y||n.Rc,Pb:or(t,"SegmentList")||n.Pb,$b:v||n.$b,width:rr(t,"width",fr)||n.width,height:rr(t,"height",fr)||n.height,contentType:l,mimeType:u,codecs:c,frameRate:d,pixelAspectRatio:h,emsgSchemeIdUris:f,id:r,language:t.attributes.lang,Jc:m,audioSamplingRate:g,Ia:b,Gc:null,Kf:x||n.Kf,label:w||null}}function lm(e,t,n,o){var i,r,s,a,l,u,c;return P(function(p){if(1==p.g)return i=[pn(n)],r=xn(t(),i),(s=bi(r,e.g.retryParameters)).method=o,a=e.j.networkingEngine.request(4,s),mi(e.N,a),S(p,a.promise,2);if(l=p.h,"HEAD"==o){if(!l.headers||!l.headers.date)return p.return(0);u=l.headers.date}else u=rn(l.data);return c=Date.parse(u),isNaN(c)?p.return(0):p.return(c-Date.now())})}function um(e,t,n,o,i){for(var r=o.attributes.schemeIdUri||"",s=o.attributes.value||"",a=rr(o,"timescale",fr)||1,l=(o=p(Zi(o,"Event"))).next();!l.done;l=o.next()){var u=rr(l=l.value,"presentationTime",fr)||0,c=rr(l,"duration",fr)||0;c=(u=u/a+t)+c/a,null!=n&&(u=Math.min(u,t+n),c=Math.min(c,t+n)),c<i||(l={schemeIdUri:r,value:s,startTime:u,endTime:c,id:l.attributes.id||"",eventElement:Sr(l),eventNode:l},e.j.onTimelineRegionAdded(l))}}function cm(e,t,n,o,i){var r,s,a,l;return P(function(u){return 1==u.g?(r=ki,s=i?0:1,a=yl(t,n,o,e.g.retryParameters),S(u,dm(e,a,r,{type:s}),2)):(l=u.h,u.return(l.data))})}function pm(e,t){return Hn(t=_n(e,t))?An:e.split("/")[0]}function dm(e,t,n,o){return t=e.j.networkingEngine.request(n,t,o),mi(e.N,t),t.promise}function hm(){}(i=Wf.prototype).configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.V()&&this.I.tc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Zg(this.g.dash.multiTypeVariantsAllowed&&re()),this.m.gh(this.g.dash.useStreamOnceInPeriodFlattening))},i.start=function(e,t){var n,o=this;return P(function(i){if(1==i.g)return o.F=t.isLowLatencyMode(),o.A=[e],o.j=t,S(i,Kf(o),2);if(n=i.h,o.j&&sm(o,n),!o.j)throw new St(2,7,7001);return i.return(o.i)})},i.stop=function(){for(var e=p(Object.values(this.s)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.s={},this.o.clear(),this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.m=null,null!=this.I&&(this.I.stop(),this.I=null),this.h&&this.h.destroy(),this.C&&(this.C.release(),this.C=null),this.N.destroy()},i.update=function(){var e,t=this;return P(function(n){return 1==n.g?(k(n,2),S(n,Kf(t),4)):2!=n.g?A(n,0):(e=E(n),t.j&&e?(t.j.onError(e),void T(n)):n.return())})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Wb();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,sm(this,0))}}},i.banLocation=function(e){this.h&&this.h.banLocation(e)},i.setMediaElement=function(e){this.G=e},$("shaka.dash.DashParser",Wf),es["application/dash+xml"]=function(){return new Wf},es["video/vnd.mpeg.dash.mpd"]=function(){return new Wf},$("shaka.dependencies",hm),hm.has=function(e){return gm.has(e)},hm.add=function(e,t){if(!mm[e])throw Error(e+" is not supported");e==fm?le("mux.js","mux.js is no longer used in Shaka Player."):gm.set(e,function(){return t})};var fm="muxjs",mm={fk:fm,ISOBoxer:"ISOBoxer"};hm.Allowed=mm;var gm=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);function ym(e,t,n){this.type=e,this.g=t,this.segments=n||null}function vm(e,t,n,o){this.id=e,this.name=t,this.attributes=n,this.value=void 0===o?null:o}function bm(e,t){return t?e.toString():(t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function xm(e,t){return(e=e.attributes.filter(function(e){return e.name==t})).length?e[0]:null}function wm(e,t,n){return(e=xm(e,t))?e.value:n||null}function Sm(e,t){if(!(e=xm(e,t)))throw new St(2,4,4023,t);return e.value}function Tm(e,t,n){n=void 0===n?[]:n,this.g=t,this.h=e,this.zb=n}function km(e,t){this.name=e,this.value=t}function Cm(e,t){return e.filter(function(e){return e.name==t})}function Am(e,t){return e.filter(function(e){return Sm(e,"TYPE")==t})}function Em(e,t){for(var n=(e=p(e)).next();!n.done;n=e.next())if((n=n.value).name===t)return n;return null}function Im(e,t,n){return n=void 0===n?0:n,(e=Em(e,t))?Number(e.value):n}function Mm(e,t,n){return t?Rm(e,[t],n):[]}function Rm(e,t,n){if(!t.length)return[];t=xn(e,t),e=[];for(var o=(t=p(t)).next();!o.done;o=t.next())e.push(_m(o.value,n));return e}function _m(e,t){if(!t||!t.size)return e;var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var o=(n=p(n)).next();!o.done;o=n.next()){var i=(o=o.value).slice(2,o.length-1),r=t.get(i);if(!r)throw new St(2,4,4039,i);e=e.replace(o,r)}return e}function Lm(){this.g=0}function Dm(e,t){var n=(t=(t=rn(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new St(2,4,4015);t=0;for(var o=!0,i=p(n),r=i.next();!r.done;r=i.next())if(r=r.value,/^#(?!EXT)/m.test(r)||o)o=!1;else{if(r=Pm(e,r),--e.g,Om.includes(r.name)){t=1;break}"EXT-X-STREAM-INF"==r.name&&(o=!0)}for(i=[],o=!0,r=0;r<n.length;r++){var s=n[r],a=n[r+1];if(/^#(?!EXT)/m.test(s)||o)o=!1;else{if(s=Pm(e,s),Nm.includes(s.name)){if(1!=t)throw new St(2,4,4017);s=n.splice(r,n.length-r),n=[],o=[],r=[],a=null;for(var l=(s=p(s)).next();!l.done;l=s.next())l=l.value,/^(#EXT)/.test(l)?(l=Pm(e,l),Om.includes(l.name)?i.push(l):"EXT-X-MAP"==l.name?a=l:"EXT-X-PART"==l.name?r.push(l):"EXT-X-PRELOAD-HINT"==l.name?"PART"==wm(l,"TYPE")?r.push(l):"MAP"==wm(l,"TYPE")&&(l.name="EXT-X-MAP",a=l):o.push(l)):/^#(?!EXT)/m.test(l)||(l=l.trim(),a&&o.push(a),n.push(new Tm(l,o,r)),o=[],r=[]);return r.length&&(a&&o.push(a),n.push(new Tm("",o,r))),new ym(t,i,n)}i.push(s),"EXT-X-STREAM-INF"==s.name&&(s.attributes.push(new km("URI",a)),o=!0)}}return new ym(t,i)}function Pm(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new St(2,4,4016,t);t=n[1];var o,i=n[2];if(n=[],i){var r;(r=fp(i=new dp(i),/^([^,=]+)(?:,|$)/g))&&(o=r[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;r=fp(i,s);)n.push(new km(r[1],r[2]||r[3])),hp(i)}return new vm(e,t,n,o)}vm.prototype.toString=function(e){var t="#"+this.name,n=this.attributes?this.attributes.filter(function(t){return!e||!e.has(t.name)}).map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&n.unshift(this.value),0<n.length&&(t+=":"+n.join(",")),t};var Om="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),Nm="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function Um(){}function Bm(e){try{var t=jm(e);return ai({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return ri(n)}}function jm(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new St(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new St(2,1,1004,t);var o=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=o.split(";"),o=n[0];var i=!1;return 1<n.length&&"base64"==n[n.length-1]&&(i=!0,n.pop()),{data:i?gn(t):ln(t),contentType:o}}function Fm(){var e=this;this.g=this.h=null,this.B=1,this.s=new Map,this.G=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(An,new Map),this.N.set("image",new Map),this.ub=new Set,this.i=new Map,this.l=null,this.L="",this.Fa=new Lm,this.H=-1,this.fa=1/0,this.ea=this.Gb=!1,this.A=new Rt(function(){e.ba&&!e.g.continueLoadingWhenPaused&&(e.Z.jb(e.ba,"timeupdate"),e.ba.paused)?e.Z.ha(e.ba,"timeupdate",function(){return Tg(e)}):Tg(e)}),this.xa=Dg,this.m=null,this.ab=0,this.o=1/0,this.Da=this.za=this.U=0,this.da=new fi,this.C=new Map,this.F=new Map,this.qa=new Map,this.oa=new Map,this.K=new Map,this.pa=new Map,this.ya=new Map,this.Fb=this.I=!1,this.Db=new H(5),this.j=null,this.R=!0,this.Ea=new Set,this.Z=new te,this.ba=null}function zm(e,t){return kg(e)?e.N.get(t.type):t.Yd}function $m(e,t){var n,o,i,r,s,a,l,u,c,h,f,m,g,y,v,b,x,w,C,I,M,R,_,L,D,O,N,U,B,j,F,z,$;return P(function(P){switch(P.g){case 1:for(n=[],o=p(t.M()),i=o.next();!i.done;i=o.next())r=i.value,s=new st(r),a=s.g,t.Fd&&(0<=t.ob&&a.add("_HLS_msn",String(t.ob)),0<=t.pb&&a.add("_HLS_part",String(t.pb))),t.Gd&&a.add("_HLS_skip","YES"),wt(a)&&ct(s,a),n.push(s.toString());return k(P,2),S(P,Sg(e,n,!0),4);case 4:l=P.h,A(P,3);break;case 2:throw u=E(P),e.h&&e.h.disableStream(t.stream),u;case 3:if(!t.stream.segmentIndex)return P.return();if(1!=(c=Dm(e.Fa,l.data)).type)throw new St(2,4,4017);return(h=l.uri)==l.originalUri||t.M().includes(h)||t.Tg.push(h),f=Cm(c.g,"EXT-X-DEFINE"),m=qm(e,f,h),g=t.stream,y=zm(e,t),S(P,ug(e,c,g.mimeType,t.M,m),5);case 5:for(v=P.h,b=v.keyIds,x=v.drmInfos,function(e,t){return e.size===t.size&&[].concat(d(e)).every(function(e){return t.has(e)})}(g.keyIds,b)||(g.keyIds=b,g.drmInfos=x,e.h.newDrmInfo(g)),w=yg(e,c,y,m,t.M,t.type),C=w.segments,(I=w.bandwidth)&&(g.bandwidth=I),M=dl(g),R=p(C),_=R.next();!_.done;_=R.next())(L=_.value).$&&(L.$.Hc=M);g.segmentIndex.rd(C,e.l.mb()),C.length&&(D=Im(c.g,"EXT-X-MEDIA-SEQUENCE",0),N=(O=Em(c.g,"EXT-X-SKIP"))?Number(wm(O,"SKIPPED-SEGMENTS")):0,U=ag(D,C),B=U.ob,j=U.pb,t.ob=B+N,t.pb=j,F=y.get(D),g.segmentIndex.Ma(F)),(z=g.segmentIndex.O[0]||null)&&(t.mc=z.startTime,$=C[C.length-1],t.Jb=$.endTime),Em(c.g,"EXT-X-ENDLIST")&&(t.ed=!0),pg(e,c),gg(e,c.g,g.type,m,t.M),T(P)}})}function Gm(e,t){for(var n=-1==e.H,o=p(t),i=o.next();!i.done;i=o.next()){var r=(i=i.value).stream.segmentIndex,s=zm(e,i);if(r=r.O[0]||null)for(var a=(s=p(s)).next();!a.done;a=s.next()){var l=(a=p(a.value)).next().value;if(a.next().value==r.startTime){n&&(e.H=Math.max(e.H,l)),i.Re=l;break}}}if(!(0>e.H))for(n=(t=p(t)).next();!n.done;n=t.next())rg(e,(n=n.value).type)&&(o=n.stream.segmentIndex)&&0<(i=e.H-n.Re)&&(o.O.splice(0,i),o=o.O[0]||null)&&(o=-o.startTime,n.stream.segmentIndex.offset(o),Vm(e,n,o))}function Vm(e,t,n){t.mc+=n,t.Jb+=n;for(var o=p(e=zm(e,t)),i=o.next();!i.done;i=o.next()){var r=p(i.value);i=r.next().value,r=r.next().value,e.set(i,r+n)}t.M()}function Hm(e){if(kg(e)){if(e.xa==Og){for(var t,n=t=1/0,o=p(e.i.values()),i=o.next();!i.done;i=o.next())(i=i.value).stream.segmentIndex&&"text"!=i.stream.type&&(t=Math.min(t,i.Jb),n=Math.min(n,i.mc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.pe(t)}}else e.l.Za(ng(e));if(!e.l.s)for(n=(t=p(e.i.values())).next();!n.done;n=t.next())!(n=n.value).stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.bh(n.h);e.l.Wd()}function qm(e,t,n){n=new st(n).g;for(var o=new Map,i=(t=p(t)).next();!i.done;i=t.next()){var r=i.value,s=wm(r,"NAME"),a=wm(r,"VALUE");i=wm(r,"QUERYPARAM"),r=wm(r,"IMPORT"),s&&a&&(o.has(s)||o.set(s,a)),i&&(s=n.get(i)[0])&&!o.has(s)&&o.set(i,s),r&&(i=e.s.get(r))&&o.set(r,i)}return o}function Xm(e){var t=new Set([_n(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(_n(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function Wm(e,t,n){for(var o={audio:[],video:[]},i=new Map,r=[],s=!1,a=!1,l=p(t),u=l.next();!u.done;u=l.next()){var c=u.value;u=wm(c,"AUDIO");var h=wm(c,"VIDEO"),f=u||h;f&&(r.includes(f)||r.push(f),(c=wm(c,"PATHWAY-ID"))&&i.set(f,c),u?s=!0:h&&(a=!0))}r.length&&n.length&&function(e,t,n){t=t.filter(function(e){var t=wm(e,"URI")||"";return"SUBTITLES"!=wm(e,"TYPE")&&""!=t});for(var o={},i=(t=p(t)).next();!i.done;i=t.next()){var r=bm(i=i.value,!e.j);o[r]?o[r].push(i):o[r]=[i]}for(var s in o)eg(e,o[s],n)}(e,l=n.filter(function(e){return r.includes(Sm(e,"GROUP-ID"))}),i),l=(i=r.sort().join(","))&&e.G.has(i)?e.G.get(i):[],s?o.audio.push.apply(o.audio,d(l)):a&&o.video.push.apply(o.video,d(l)),u=!1;var m=t.map(function(e){return Sm(e,"URI")});if(a=o.audio.find(function(e){return e&&e.M().find(function(e){return m.includes(e)})}),h=kn("video",s=Km(e,t[0])),(f=kn("audio",s))&&!h?(a="audio",u=0<o.audio.length):!o.audio.length&&!o.video.length&&f&&h?(a="video",s=[[h,f].join()]):o.audio.length&&a?(a="audio",u=!0):a=o.video.length&&!o.audio.length?"audio":"video",!u){var g=c=f=h=u=null;!l.length&&(n=n.find(function(e){var t=wm(e,"URI")||"",n=wm(e,"TYPE");return e=Sm(e,"GROUP-ID"),"SUBTITLES"!=n&&""==t&&r.includes(e)}))&&(u=wm(n,"LANGUAGE"),h=wm(n,"NAME"),f=Ym(n),Jm(n),c=wm(n,"CHARACTERISTICS"),g=Qm(n)),e=function(e,t,n,o,i,r,s,a,l){for(var u=e.B++,c=[],d=p(t),h=d.next();!h.done;h=d.next()){var f=h.value;h=Sm(f,"URI"),f=wm(f,"PATHWAY-ID"),e.j&&f&&uf(e.j,u,f,h),c.push(h)}if(d=c.sort().join(","),e.i.has(d))return e.i.get(d);e:{if(t=wm(t[0],"CLOSED-CAPTIONS"),"video"==o){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if("NONE"!=t){t=e.C.get(t);break e}e.R=!1}else if(!t&&e.C.size)for(t=p(e.C.keys()).next();!t.done;){t=e.C.get(t.value);break e}}t=null}return n=Tn(o,n),o=tg(e,u,c,n,o,i,!1,r,s,t,a,!1,l,!1),e.i.set(d,o),o}(e,t,s,a,u,h,f,c,g),i&&(e.stream.groupId=i),o[e.stream.type]=[e]}return o}function Km(e,t){var n=wm(t,"CODECS")||"";return t=wm(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),e.push.apply(e,d(t))),ml(e)}function Ym(e){return(e=wm(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function Qm(e){return(e=wm(e,"SAMPLE-RATE"))?parseInt(e,10):null}function Jm(e){return!!(e=wm(e,"CHANNELS"))&&e.includes("/JOC")}function Zm(e,t,n,o,i,r,s,a,l,u,c){for(var d=p(n),h=d.next();!h.done;h=d.next())wg(h.value.stream,i,r,s,a,l,null);for(i=e.g.disableAudio,t.length&&!i||(t=[null]),i=e.g.disableVideo,n.length&&!i||(n=[null]),i=[],r=(t=p(t)).next();!r.done;r=t.next())for(r=r.value,a=(s=p(n)).next();!a.done;a=s.next()){var f=a.value;(a=r?r.stream:null)&&(a.drmInfos=u,a.keyIds=c),(l=f?f.stream:null)&&(l.drmInfos=u,l.keyIds=c),l&&!a&&(l.bandwidth=o),!l&&a&&(a.bandwidth=o),d=r?r.stream.drmInfos:null,h=f?f.stream.drmInfos:null,f=(f=f?f.M().sort().join(","):"")+" - "+(r?r.M().sort().join(","):""),a&&l&&!kt(d,h)||e.ub.has(f)||(a={id:e.B++,language:a?a.language:"und",disabledUntilTime:0,primary:!!a&&a.primary||!!l&&l.primary,audio:a,video:l,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.push(a),e.ub.add(f))}return i}function eg(e,t,n){for(var o=[],i=[],r=new Map,s=p(t),a=s.next();!a.done;a=s.next()){var l=a.value;a=Sm(l,"URI"),l=Sm(l,"GROUP-ID"),o.push(a),i.push(l),r.set(l,a)}if(s=i.sort().join(","),a=t[0],t="","subtitles"==(l=Sm(a,"TYPE").toLowerCase())&&(l=An),l==An)t=wm(a,"CODECS")||"";else for(var u=(i=p(i)).next();!u.done;u=i.next())if(u=u.value,e.F.has(u)){t=e.F.get(u);break}if(i=o.sort().join(","),e.i.has(i))return e.i.get(i);if(u=e.B++,e.j)for(var c=(r=p(r)).next();!c.done;c=r.next()){var d=p(c.value);c=d.next().value,d=d.next().value,(c=n.get(c))&&uf(e.j,u,c,d)}n=wm(a,"LANGUAGE"),r=wm(a,"NAME"),c="YES"==wm(a,"DEFAULT"),d="audio"==l?Ym(a):null;var h="audio"==l&&Jm(a);return(o=tg(e,u,o,t,l,n,c,r,d,null,wm(a,"CHARACTERISTICS"),"YES"==wm(a,"FORCED"),a="audio"==l?Qm(a):null,h)).stream&&(o.stream.groupId=s),e.G.has(s)?e.G.get(s).push(o):e.G.set(s,[o]),e.i.set(i,o),o}function tg(e,t,n,o,i,r,s,a,l,u,c,d,h,f){function m(t){var n,m,x,w,C,I,M,R,_,L,D,O,N,U,B,j,F,z,$,G,V,H;return P(function(P){switch(P.g){case 1:return n=En,m=b.M(),k(P,2),S(P,Sg(e,b.M(),!0),4);case 4:x=P.h,A(P,3);break;case 2:if(w=E(P),y.closeSegmentIndex(),e.h.disableStream(y))return P.return();throw w;case 3:if(t.aborted)return P.return();if((C=x.uri)==x.originalUri||m.includes(C)||v.push(C),1!=(I=Dm(e.Fa,x.data)).type)throw new St(2,4,4017);return M=Cm(I.g,"EXT-X-DEFINE"),R=qm(e,M,C),_=!1,(!e.ea&&e.g.hls.disableCodecGuessing||e.R&&i==n.ga&&!e.g.hls.disableClosedCaptionsDetection)&&0<I.segments.length&&(e.R=!1,_=!0),L=!e.ea&&e.g.hls.disableCodecGuessing,D=kg(e),S(P,sg(e,0,R,I,g,o,i,r,s,a,l,u,c,d,h,f,void 0,_,L),5);case 5:if(O=P.h,t.aborted)return P.return();if(N=O.stream,kg(e)&&!D&&dg(e,I),b.mc=O.mc,b.Jb=O.Jb,b.Gd=O.Gd,b.Fd=O.Fd,b.ed=O.ed,b.Yd=O.Yd,b.ob=O.ob,b.pb=O.pb,b.vf=!0,y.segmentIndex=N.segmentIndex,y.encrypted=N.encrypted,y.drmInfos=N.drmInfos,y.keyIds=N.keyIds,y.mimeType=N.mimeType,y.bandwidth=y.bandwidth||N.bandwidth,y.codecs=y.codecs||N.codecs,y.closedCaptions=y.closedCaptions||N.closedCaptions,y.width=y.width||N.width,y.height=y.height||N.height,y.hdr=y.hdr||N.hdr,y.colorGamut=y.colorGamut||N.colorGamut,"und"==y.language&&"und"!=N.language&&(y.language=N.language),y.language=y.language||N.language,y.channelsCount=y.channelsCount||N.channelsCount,y.audioSamplingRate=y.audioSamplingRate||N.audioSamplingRate,Xm(y),y.drmInfos.length&&e.h.newDrmInfo(y),U=!1,(!u&&y.closedCaptions||u&&y.closedCaptions&&u.size!=y.closedCaptions.size)&&(U=!0),e.m&&U&&e.h.makeTextStreamsForClosedCaptions(e.m),i==n.ga||i==n.X)for(B=p(e.i.values()),j=B.next();!j.done;j=B.next())(F=j.value).vf||F.type!=i||(F.stream.mimeType=N.mimeType,Xm(F.stream));i==n.ua&&(z=N.segmentIndex.get(0))&&z.$&&(y.mimeType="application/mp4",Xm(y)),$=dl(y),y.segmentIndex.Hb(function(e){e.$&&(e.$.Hc=$)}),function(e){if(!e.m)return!1;for(var t=[],n=[],o=(e=p(e.m.variants)).next();!o.done;o=e.next())(o=o.value).video&&t.push(o.video),o.audio&&n.push(o.audio);return!(0<t.length&&!t.some(function(e){return e.segmentIndex})||0<n.length&&!n.some(function(e){return e.segmentIndex}))}(e)&&(e.Gb?ig(e,[b]):(e.Gb=!0,G=Array.from(e.i.values()),V=G.filter(function(e){return e.stream.segmentIndex}),ig(e,V),Hm(e),0<(H=e.o)&&e.A.Y(H))),gg(e,I.g,y.type,R,g),T(P)}})}function g(){return e.j&&1<n.length?cf(e.j,t):v.concat(Rm([e.L],n,e.s))}var y=lg(e,o,i,r,s,a,l,u,c,d,h,f),v=[],b={stream:y,type:i,Tg:v,M:g,mc:0,Jb:0,Yd:new Map,Gd:!1,Fd:!1,ed:!1,Re:-1,ob:-1,pb:-1,vf:!1},x=null,w=new AbortController;return y.createSegmentIndex=function(){return x||(w=new AbortController,x=new Promise(function(e){e(m(w.signal))}))},y.closeSegmentIndex=function(){x&&!y.segmentIndex&&w.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),x=null},b}function ng(e){for(var t=1/0,n=(e=p(e.i.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Jb));return t}function og(e,t){for(var n=[],o=(t=p(t)).next();!o.done;o=t.next())(o=o.value).segmentIndex&&o.segmentIndex.Hb(function(e){n.push(e)});e.l.sd(n)}function ig(e,t){if(!kg(e))for(var n=ng(e),o=p(t),i=o.next();!i.done;i=o.next())i.value.stream.segmentIndex.Bc(0,n);og(e,t.map(function(e){return e.stream})),e.g.hls.ignoreManifestProgramDateTime?Gm(e,t):(function(e,t){if(1/0==e.fa)for(var n=(t=p(t)).next();!n.done;n=t.next())null!=(n=n.value.stream.segmentIndex.O[0]||null)&&null!=n.h&&(e.fa=Math.min(e.fa,n.h));if(1/0!=(t=e.fa))for(var o=(n=p(e.i.values())).next();!o.done;o=n.next())if(!rg(e,(o=o.value).type)){var i=o.stream.segmentIndex;if(null!=i){var r=i.O[0]||null;if(r)if(null==r.h)K("Missing EXT-X-PROGRAM-DATE-TIME for stream",o.M(),"Expect AV sync issues!");else for(Vm(e,o,r.h-t-r.startTime),i=(o=p(i)).next();!i.done;i=o.next())i.value.Vf(t)}}}(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&Gm(e,t))}function rg(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function sg(e,t,n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b){var x,w,T,C,I,M,R,_,L,D,O,N,U,B,j,F,z,$,G,V,H,q,X,W,K,Y;return v=void 0===v||v,b=void 0===b||b,P(function(t){switch(t.g){case 1:var Q=Em(o.g,"EXT-X-PLAYLIST-TYPE"),J=Em(o.g,"EXT-X-ENDLIST");if(J=Q&&"VOD"==Q.value||J,Q=Q&&"EVENT"==Q.value&&!J,Q=!J&&!Q,Cg(e,J?Dg:Q?Og:Pg),kg(e)&&pg(e,o),x=kg(e)?e.N.get(s):new Map,w=yg(e,o,x,n,i,s),T=w.segments,C=w.bandwidth,_=R=M=I=null,!(0<T.length&&v)){t.u(2);break}return S(t,function(e,t){var n,o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,T,k,C,A;return P(function(E){switch(E.g){case 1:if(n=hl(e.g.hls.mediaPlaylistFullMimeType),!t.length)return E.return(n);if(o=xg(e,t),i=o.segment,r=o.segmentIndex,s=i.M(),a=s[0],l=new st(a),u=l.Pa.split(".").pop(),c=Mg[u])return E.return(hl(c));if(d=ki,f=h=null,!(m=i.$)){E.u(2);break}return g=yl(m.M(),m.Xb(),m.Ub(),e.g.retryParameters),S(E,Ag(e,g,d,{type:0}),3);case 3:if(y=E.h,h=y.data,!m.aesKey){E.u(4);break}return S(E,gl(h,m.aesKey,0),5);case 5:h=E.h;case 4:(f=y.headers["content-type"])&&(f=f.split(";")[0].toLowerCase());case 2:return v=yl(i.M(),i.Xb(),i.Ub(),e.g.retryParameters),S(E,Ag(e,v,d,{type:1}),6);case 6:if(b=E.h,x=b.data,!i.aesKey){E.u(7);break}return S(E,gl(x,i.aesKey,r),8);case 8:x=E.h;case 7:if((w=b.headers["content-type"])&&(w=w.split(";")[0].toLowerCase()),T="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),k=["audio/mp4","video/mp4","video/iso.segment"],Hs(ve(x))){var I=x,M=ve(I),R=(M=(new $s).parse(M)).$c();M=M.kf();var _=[],L=!1,D=!1;switch(R.audio){case"aac":case"aac-loas":_.push("mp4a.40.2"),L=!0;break;case"mp3":_.push("mp4a.40.34"),L=!0;break;case"ac3":_.push("ac-3"),L=!0;break;case"ec3":_.push("ec-3"),L=!0;break;case"opus":_.push("opus"),L=!0}switch(R.video){case"avc":M.codec?_.push(M.codec):_.push("avc1.42E01E"),D=!0;break;case"hvc":M.codec?_.push(M.codec):_.push("hvc1.1.6.L93.90"),D=!0;break;case"av1":_.push("av01.0.01M.08"),D=!0}if(_.length){if(R=L&&!D,L=new Map,D){(D=new Te("video/mp2t")).i(I);for(var P=(I=p(D.j())).next();!P.done;P=I.next())P=P.value,L.set(P,P);D.g()}M={type:R?"audio":"video",mimeType:"video/mp2t",codecs:_.join(", "),language:null,height:M.height,width:M.width,channelCount:null,sampleRate:null,closedCaptions:L,xd:null,colorGamut:null}}else M=null;if(C=M)return E.return(C)}else if((T.includes(u)||k.includes(w)||f&&k.includes(f))&&(A=fl(h,x)))return E.return(A);return w?E.return(hl(w)):f?E.return(hl(f)):E.return(n)}})}(e,T),3);case 3:L=t.h,s=L.type,a=L.language,c=L.channelCount,m=L.sampleRate,e.g.disableText||(d=L.closedCaptions),M=L.height,I=L.width,R=L.xd,_=L.colorGamut,b&&(y=L.mimeType,r=L.codecs);case 2:if(y){t.u(4);break}return S(t,function(e,t,n,o){var i,r,s,a,l,u,c,p,d,h,f,m,g,y;return P(function(v){switch(v.g){case 1:return i=ki,r=xg(e,o),2==(s=r.segment).status?v.return(bg(t)):(a=s.M(),l=new st(a[0]),u=l.Pa.split(".").pop(),c=Rg[t],(p=c[u])||(p=Mg[u])||(p=vg(t,n))?v.return(p):(h=1,f=bi(a,e.g.retryParameters),k(v,2),f.method="HEAD",S(v,Ag(e,f,i,{type:h}),4)));case 4:m=v.h,d=m.headers["content-type"],A(v,3);break;case 2:if(!(g=E(v))||1002!=g.code&&1001!=g.code){v.u(3);break}return f.method="GET",S(v,Ag(e,f,i,{type:h}),6);case 6:y=v.h,d=y.headers["content-type"];case 3:return d?v.return(d.toLowerCase().split(";")[0]):v.return(bg(t))}})}(e,s,r,T),5);case 5:y=t.h;case 4:return S(t,ug(e,o,y,i,n),6);case 6:if(D=t.h,O=D.drmInfos,N=D.keyIds,U=D.encrypted,B=D.wh,U&&!O.length&&!B)throw new St(2,4,4026);return(j=lg(e,r,s,a,l,u,c,d,h,f,m,g)).encrypted=U,j.drmInfos=O,j.keyIds=N,j.mimeType=y,C&&(j.bandwidth=C),Xm(j),"video"==s&&(I||M||R||_)&&wg(j,I,M,null,R,null,_),kg(e)&&pg(e,o),F=T[0].startTime,z=T[T.length-1],$=z.endTime,G=new ja(T),j.segmentIndex=G,H=!!(V=Em(o.g,"EXT-X-SERVER-CONTROL"))&&null!=xm(V,"CAN-SKIP-UNTIL"),q=!!V&&null!=xm(V,"CAN-BLOCK-RELOAD"),X=Im(o.g,"EXT-X-MEDIA-SEQUENCE",0),W=ag(X,T),K=W.ob,Y=W.pb,t.return({stream:j,type:s,Tg:[],M:i,mc:F,Jb:$,Gd:H,Fd:q,ed:!1,Re:-1,ob:K,pb:Y,Yd:x,vf:!1})}})}function ag(e,t){e=e+t.length-1;var n=-1;if(!t.length)return{ob:++e,pb:n};var o=(t=t[t.length-1]).g;return t.g.length?(n=o.length-1,o[o.length-1].preload||(e++,n=0),{ob:e,pb:n}):(e++,t.m&&(n=0),{ob:e,pb:n})}function lg(e,t,n,o,i,r,s,a,l,u,c,d){var h=vg(n,t)||bg(n),f=[];if(l)for(var m=(l=p(l.split(","))).next();!m.done;m=l.next())f.push(m.value);return l=void 0,m=null,n==An?l=f.includes("public.accessibility.transcribes-spoken-dialog")&&f.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":f.includes("public.accessibility.describes-video")&&(m="visually impaired"),f.length||"subtitle"!==l||f.push("subtitle"),Xm(e={id:e.B++,originalId:r,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:n==An?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:no(o||"und"),originalLanguage:o,label:r,type:n,primary:i,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:f,forced:u,channelsCount:s,audioSamplingRate:c,spatialAudio:d,closedCaptions:a,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:m,external:!1,fastSwitching:!1,fullMimeTypes:new Set}),e}function ug(e,t,n,o,i){var r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,T,k,C,A,E,I,M,R,_,L,D,O;return P(function(P){switch(P.g){case 1:if(r=new Map,t.segments)for(s=p(t.segments),a=s.next();!a.done;a=s.next())if(l=a.value,u=Cm(l.g,"EXT-X-KEY"),c=null,u.length)for(c=hg(e,t,l.g,o,i),d=p(u),h=d.next();!h.done;h=d.next())f=h.value,r.set(f,c);g=m=!1,y=[],v=new Set,b=p(r),x=b.next();case 2:if(x.done){P.u(4);break}if(w=x.value,T=p(w),k=T.next().value,C=T.next().value,E=C,"NONE"==(I=Sm(A=k,"METHOD"))){P.u(3);break}if(m=!0,M=wm(A,"KEYFORMAT")||"identity",R=null,Eg(I)){g=!0,P.u(3);break}if("identity"!=M){R=(_=Lg[M])?_(A,n):null,P.u(6);break}return S(P,Ig(e,A,n,o,E,i),8);case 8:R=P.h;case 6:if(R){if(R.keyIds)for(L=p(R.keyIds),D=L.next();!D.done;D=L.next())O=D.value,v.add(O);y.push(R)}case 3:x=b.next(),P.u(2);break;case 4:return P.return({drmInfos:y,keyIds:v,encrypted:m,wh:g})}})}function cg(t,n,o,i,r){if(!e.crypto||!e.crypto.subtle)throw Y("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new St(2,4,4042);var s=0,a=wm(n,"IV","");if(a){var l=yn(a.substr(2));if(16!=l.byteLength)throw new St(2,4,4048)}else s=Im(o.g,"EXT-X-MEDIA-SEQUENCE",0);if(o=n.toString()+"-"+s,!t.oa.has(o)){var u={bitsKey:128,blockCipherMode:"CBC",iv:l,firstMediaSequenceNumber:s};switch(Sm(n,"METHOD")){case"AES-256":u.bitsKey=256;break;case"AES-256-CTR":u.bitsKey=256,u.blockCipherMode="CTR"}u.fetchKey=function(){var o,s,a,l,c,p;return P(function(d){if(1==d.g)return o=Mm(i(),Sm(n,"URI"),r),s=o.sort().join(""),t.K.has(s)||(a=bi(o,t.g.retryParameters),l=Ag(t,a,6),t.K.set(s,l)),S(d,t.K.get(s),2);if(3!=d.g){if(!(c=d.h).data||c.data.byteLength!=u.bitsKey/8)throw new St(2,4,4049);return p={name:"CTR"==u.blockCipherMode?"AES-CTR":"AES-CBC",length:u.bitsKey},S(d,e.crypto.subtle.importKey("raw",c.data,p,!0,["decrypt"]),3)}u.cryptoKey=d.h,u.fetchKey=void 0,T(d)})},t.oa.set(o,u)}return t.oa.get(o)}function pg(e,t){var n=1/0,o=t.segments;if(o.length)for(var i=o.length-1;0<=i;){var r=Em(o[i].g,"EXTINF");if(r){n=Number(r.value.split(",")[0]);break}i--}if(!(o=Em(t.g,"EXT-X-TARGETDURATION")))throw new St(2,4,4024,"EXT-X-TARGETDURATION");o=Number(o.value),(i=Em(t.g,"EXT-X-PART-INF"))&&(e.U=Number(Sm(i,"PART-TARGET"))),t=Em(t.g,"EXT-X-SERVER-CONTROL"),e.I&&e.U?(e.o=e.Fb?5*e.U<=n?Math.min(e.U,e.o):Math.min(n,e.o):Math.min(e.U,e.o),e.Da=t?Number(Sm(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?xm(t,"HOLD-BACK"):null,e.za=n?Number(n.value):0),e.ab=Math.max(o,e.ab)}function dg(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Da)t=e.Da;else if(e.za)t=e.za;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ab*n}e.l.dh(0),e.l.Of(t),e.l.sc(!1)}function hg(e,t,n,o,i){var r=Em(n,"EXT-X-MAP");if(!r)return null;var s=Sm(r,"URI"),a=Mm(o(),s,i);if(s=[a.toString(),wm(r,"BYTERANGE","")].join("-"),!e.qa.has(s)){for(var l=void 0,u=null,c=(n=p(n)).next();!c.done;c=n.next())"EXT-X-KEY"==(c=c.value).name?Eg(Sm(c,"METHOD"))&&c.id<r.id&&(l=cg(e,c,t,o,i)):"EXT-X-BYTERANGE"==c.name&&c.id<r.id&&(u=c);t=function(e,t,n,o){var i=0,r=null;return!(t=wm(t,"BYTERANGE"))&&n&&(t=n.value),t&&(i=t.split("@"),r=Number(i[0]),i=Number(i[1]),r=i+r-1,o&&((n=r+1-i)%16&&(r+=16-n%16))),new is(function(){return e},i,r,null,null,null,o)}(a,r,u,l),e.qa.set(s,t)}return e.qa.get(s)}function fg(t,n,o,i,r,s,a,l,u){function c(e){e=new st(e).Pa.split(".").pop();var t=Rg[a][e];return t||(t=Mg[e]),t}var d=i.g,h=Em(d,"EXTINF"),f=0,m=0,g=null;i.zb.length&&(t.m.isLowLatency=!0);var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var v=Em(d,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=ur(v.value))}var b=ls;if(Em(d,"EXT-X-GAP")&&(t.m.gapCount++,b=2),!h){if(0==i.zb.length)throw new St(2,4,4024,"EXTINF");if(!t.I)return null}var x=[];v=!1;var w=null,S=!1,T=!1;if(t.I&&i.zb.length){f=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var k=y,C={},A=0;A<i.zb.length;C={xe:void 0,ge:void 0},A++){var E=i.zb[A],I=0==A?o:x[x.length-1],M=0==A?r:I.endTime,R=Number(wm(E,"DURATION"))||t.U;if(R){var _=M+R,L=0,D=null;if("EXT-X-PRELOAD-HINT"==E.name?(L=(L=wm(E,"BYTERANGE-START"))?Number(L):0,(I=wm(E,"BYTERANGE-LENGTH"))?D=L+Number(I)-1:L&&(D=Number.MAX_SAFE_INTEGER)):(L=(D=p(mg(I,L=wm(E,"BYTERANGE")))).next().value,D=D.next().value),C.ge=wm(E,"URI"),C.ge){I=ls,"YES"==wm(E,"GAP")&&(t.m.gapCount++,I=2,S=!0),C.xe=null;var P=function(e){return function(){return null==e.xe&&(e.xe=Mm(l(),e.ge,s)),e.xe}}(C);f&&0<=L&&null!=D&&(w=P,v=!0),M=new ss(M,_,P,L,D,n,0,0,1/0,[],"",null,k,I,u),"EXT-X-PRELOAD-HINT"==E.name&&(M.wf(),T=!0),"YES"!=wm(E,"INDEPENDENT")&&0<A&&M.Xd(),(C=c(C.ge))&&(M.mimeType=C,_g.has(C)&&(M.$=null)),x.push(M),k&&(k+=R)}}}}if(h){if(0==(h=Number(h.value.split(",")[0])))return null;f=r+h}else{if(!x.length)return null;f=x[x.length-1].endTime}v&&(S||0!=x[0].Ha?(v=!1,w=null):x=[]),(h=Em(d,"EXT-X-BYTERANGE"))?(m=(g=p(mg(o,h.value))).next().value,g=g.next().value):x.length&&(m=x[0].Ha,g=x[x.length-1].sa),o="",h=null,"image"==a&&(o="1x1",d=Em(d,"EXT-X-TILES"))&&(o=Sm(d,"LAYOUT"),(d=wm(d,"DURATION"))&&(h=Number(d)));var O=null;return n=new ss(r,f,function(){return w?w():(null==O&&(O=Mm(l(),i.h,s)),O||[])},m,g,n,0,0,1/0,x,o,h,y,b,u,0<x.length&&!!i.h),(r=c(i.h))&&(n.mimeType=r,_g.has(r)&&(n.$=null)),v&&(t.Fb=!0,n.Ig(),T&&n.wf()),n}function mg(e,t){var n=0,o=null;return t&&(n=t.split("@"),t=Number(n[0]),o=(n=n[1]?Number(n[1]):e.sa+1)+t-1),[n,o]}function gg(e,t,n,o,i){if("video"==n||"audio"==n){var r=e.l.m;if(r&&!rg(e,n))for(t=(t=Cm(t,"EXT-X-DATERANGE")).sort(function(e,t){return(e=Sm(e,"START-DATE"))<(t=Sm(t,"START-DATE"))?-1:e>t?1:0}),n=0;n<t.length;n++){var s=t[n],a=Sm(s,"ID");if(!e.Ea.has(a)){var l=Sm(s,"START-DATE"),u=ur(l);if(!isNaN(u)){l=Math.max(0,u-r);var c=null,d=wm(s,"END-DATE");if(d&&(d=ur(d),!isNaN(d)&&0>(c=d-r)))continue;if(null==c&&(d=wm(s,"DURATION")||wm(s,"PLANNED-DURATION"))&&(d=parseFloat(d),isNaN(d)||(c=l+d),0>u-r+d))continue;d=wm(s,"CLASS")||"com.apple.quicktime.HLS";var h="YES"==wm(s,"END-ON-NEXT");if(null==c&&h){for(h=n+1;h<t.length;h++){var f=wm(t[h],"CLASS")||"com.apple.quicktime.HLS";if(d==f&&(f=ur(f=Sm(t[h],"START-DATE")),!isNaN(f)&&f&&f>u)){c=Math.max(0,f-r);break}}if(null==c)continue}for(u="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),h=[],f=(s=p(s.attributes)).next();!f.done;f=s.next())if(f=f.value,!u.includes(f.name)){var m=_m(f.value,o);"X-ASSET-URI"!=f.name&&"X-ASSET-LIST"!=f.name||(m=Mm(i(),f.value,o)[0]),h.push({key:f.name,description:"",data:m,mimeType:null,pictureType:null})}h.length&&e.h.onMetadata(d,l,c,h),e.Ea.add(a)}}}}}function yg(e,t,n,o,i,r){var s=t.segments,a=void 0,l=Im(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),u=Im(t.g,"EXT-X-MEDIA-SEQUENCE",0),c=Em(t.g,"EXT-X-SKIP"),d=c?Number(wm(c,"SKIPPED-SEGMENTS")):0,h=u+d,f=0;kg(e)&&n.has(h)&&(f=n.get(h)),0===f&&e.xa==Og&&0<n.size&&!n.has(h)&&(f=e.l.mb());var m=[],g=null;c=[];for(var y=0;y<s.length;y++){var v=s[y],b=0==y?f:g.endTime;h=u+d+y,Em(v.g,"EXT-X-DISCONTINUITY")&&l++;for(var x=p(v.g),w=x.next();!w.done;w=x.next())"EXT-X-KEY"==(w=w.value).name&&(a=Eg(Sm(w,"METHOD"))?cg(e,w,t,i,o):void 0);n.set(h,b),x=hg(e,t,v.g,i,o),!e.I&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.I=e.h.isLowLatencyMode()),(b=fg(e,x,g,v,b,o,r,i,a))&&((g=Im(v.g,"EXT-X-BITRATE"))?c.push({bitrate:g,duration:b.endTime-b.startTime}):c.length&&((g=c.pop()).duration+=b.endTime-b.startTime,c.push(g)),g=b,b.i=l,rg(e,r)&&null!=e.H&&h<e.H||m.push(b))}if(t=void 0,c.length&&(t=c.reduce(function(e,t){return e+t.duration},0),t=Math.round(c.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),c=m.some(function(e){return null!=e.h}))for(n={},o=0;o<m.length;n={Kd:void 0,Jd:void 0,Bd:void 0,pc:void 0,zd:void 0},o++)if(n.pc=m[o],null==n.pc.h)for(n.Jd=0,n.Kd=o,i=function(e){return function(){var t=m[e.Kd];if(t){if(null!=t.h)return t.h+e.Jd;e.Jd-=t.endTime-t.startTime,e.Kd+=1}return null}}(n),n.zd=0,n.Bd=o,s=function(e){return function(){var t=m[e.Bd];if(t){if(t!=e.pc&&(e.zd+=t.endTime-t.startTime),null!=t.h)return t.h+e.zd;--e.Bd}return null}}(n);null==n.pc.h;)n.pc.h=s(),null==n.pc.h&&(n.pc.h=i());if(c)for(o=(n=p(m)).next();!o.done;o=n.next())for(o=(i=o.value).h,s=(i=p(i.g)).next();!s.done;s=i.next())(s=s.value).h=o,o+=s.endTime-s.startTime;if(n=e.fa,c&&1/0!=n&&!rg(e,r))for(r=(e=p(m)).next();!r.done;r=e.next())r.value.Vf(n);return{segments:m,bandwidth:t}}function vg(e,t){if(e==An){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function bg(e){return e==An?"text/vtt":Rg[e].mp4}function xg(e,t){for(var n=t[e=kg(e)?Math.trunc((t.length-1)/2):0];2==n.Yb()&&e+1<t.length;)n=t[++e];return{segment:n,segmentIndex:e}}function wg(e,t,n,o,i,r,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(o)||void 0,e.hdr=i||void 0,e.videoLayout=r||void 0,e.colorGamut=s||void 0)}function Sg(e,t,n){return Ag(e,bi(t,e.g.retryParameters),0,{type:n?2:3})}function Tg(e){var t,n,o,i,r,s;return P(function(a){switch(a.g){case 1:return e.h?(k(a,2),t=Date.now(),S(a,e.update(),4)):a.return();case 4:n=Date.now(),kg(e)&&(o=(n-t)/1e3,e.Db.sample(1,o),i=e.o,r=Math.max(0,i-q(e.Db)),e.A.Y(r)),A(a,3);break;case 2:if(s=E(a),!e.h)return a.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),a.return();s.severity=1,e.h.onError(s),e.A.Y(.1);case 3:if(!e.h)return a.return();e.h.onManifestUpdated(),T(a)}})}function kg(e){return e.xa!=Dg}function Cg(e,t){e.xa=t,e.l&&e.l.sc(!kg(e)),kg(e)||e.A.stop()}function Ag(e,t,n,o){if(!e.da)throw new St(2,7,7001);return t=e.h.networkingEngine.request(n,t,o),mi(e.da,t),t.promise}function Eg(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function Ig(e,t,n,o,i,r){var s,a,l,u,c,p,d,h,f,m,g,y,v;return P(function(b){switch(b.g){case 1:if("video/mp2t"==n)throw new St(2,4,4040);if(Zt())throw new St(2,4,4041);if(s=Sm(t,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(s))return b.return(null);if((a=Mm(o(),Sm(t,"URI"),r))[0].startsWith("data:text/plain;base64,")){l=vn(gn(a[0].split("data:text/plain;base64,").pop())),b.u(2);break}return u=a.sort().join(""),e.pa.has(u)||(c=bi(a,e.g.retryParameters),p=Ag(e,c,6),e.pa.set(u,p)),S(b,e.pa.get(u),3);case 3:d=b.h,l=vn(d.data);case 2:if(h="00000000000000000000000000000000",!i){b.u(4);break}if(e.ya.has(i)){f=e.ya.get(i),b.u(5);break}return m=yl(i.M(),i.Xb(),i.Ub(),e.g.retryParameters),S(b,Ag(e,m,ki,{type:0}),6);case 6:g=b.h,f=function(e){var t=null;return(new Oi).box("moov",Ni).box("trak",Ni).box("mdia",Ni).box("minf",Ni).box("stbl",Ni).S("stsd",Ui).box("encv",Bi).box("enca",ji).box("sinf",Ni).box("schi",Ni).S("tenc",function(e){(e=e.reader).T(),e.T(),e.T(),e.T(),t=vn(e.qb(16))}).parse(e,!0),t}(g.data),e.ya.set(i,f);case 5:f&&(h=f);case 4:return(y=new Map).set(h,l),v="cenc","SAMPLE-AES"==s&&(v="cbcs"),b.return(Sn(y,v))}})}$("shaka.net.DataUriPlugin",Um),Um.parse=Bm,yi("data",Bm),(i=Fm.prototype).configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},i.start=function(e,t){var n,o=this;return P(function(i){return 1==i.g?(o.h=t,o.I=t.isLowLatencyMode(),S(i,Sg(o,[e]),2)):3!=i.g?(n=i.h,o.L=n.uri,S(i,function(e,t,n){var o,i,r,s,a,l,u,c,h,f,m,g,y,v,b,x,w,T,C,A,I,M,R,_,L,D,O,N,U,B,j,F;return P(function(z){switch(z.g){case 1:return o=En,i=Dm(e.Fa,t),r=Cm(i.g,"EXT-X-DEFINE"),s=[],a=[],l=[],e.l=new ba(null,0),e.l.sc(!0),u=function(){return[n]},c=null,h=new Map,1==i.type?(e.R=!1,w=Cm(i.g,"EXT-X-DEFINE"),h=qm(e,w,e.L),c=o.ga,T="",C=new Map,S(z,sg(e,e.B++,h,i,u,"",c,T,!0,"Media Playlist",null,C,null,!1,null,!1),7)):(function(e,t){for(var n=new st(e.L).g,o=(t=p(t)).next();!o.done;o=t.next()){var i=o.value;o=wm(i,"NAME");var r=wm(i,"VALUE");i=wm(i,"QUERYPARAM"),o&&r&&(e.s.has(o)||e.s.set(o,r)),i&&(o=n.get(i)[0])&&!e.s.has(o)&&e.s.set(i,o)}}(e,r),f=Cm(i.g,"EXT-X-MEDIA"),m=Cm(i.g,"EXT-X-STREAM-INF"),g=Cm(i.g,"EXT-X-IMAGE-STREAM-INF"),y=Cm(i.g,"EXT-X-I-FRAME-STREAM-INF"),v=Cm(i.g,"EXT-X-SESSION-KEY"),b=Cm(i.g,"EXT-X-SESSION-DATA"),x=Cm(i.g,"EXT-X-CONTENT-STEERING"),function(e,t){for(var n=(t=p(t)).next();!n.done;n=t.next()){var o=n.value,i=wm(o,"DATA-ID");n=wm(o,"URI");var r=wm(o,"LANGUAGE");o=wm(o,"VALUE"),i=(new Map).set("id",i),n&&i.set("uri",Mm([e.L],n,e.s)[0]),r&&i.set("language",r),o&&i.set("value",o),n=new ci("sessiondata",i),e.h&&e.h.onEvent(n)}}(e,b),S(z,function(e,t){var n,o,i,r,s,a;return P(function(l){if(!e.h||!e.g)return l.return();for(o=p(t),i=o.next();!i.done;i=o.next())if(r=i.value,s=wm(r,"PATHWAY-ID"),a=wm(r,"SERVER-URI"),s&&a){e.j=new sf(e.h),e.j.configure(e.g),e.j.i=[e.L],e.j.setManifestType("HLS"),e.j.h=s,n=af(e.j,a);break}return S(l,n,0)})}(e,x),4));case 4:return function(e,t){for(var n=(t=p(t)).next();!n.done;n=t.next()){var o=n.value,i=wm(o,"AUDIO");n=wm(o,"VIDEO");var r=wm(o,"SUBTITLES");if(o=Km(e,o),r){var s=kn(An,o);e.F.set(r,s),Re(o,s)}i&&((r=kn("audio",o))||(r=e.g.hls.defaultAudioCodec),e.F.set(i,r)),n&&((i=kn("video",o))||(i=e.g.hls.defaultVideoCodec),e.F.set(n,i))}}(e,m),function(e,t){t=Am(t,"CLOSED-CAPTIONS"),e.R=0==t.length;for(var n=(t=p(t)).next();!n.done;n=t.next()){var o=n.value,i=wm(o,"LANGUAGE");n=no(i||"und"),i||(i=wm(o,"NAME"))&&(n=i),i=Sm(o,"GROUP-ID"),o=Sm(o,"INSTREAM-ID").replace("SERVICE","svc"),e.C.get(i)||e.C.set(i,new Map),e.C.get(i).set(o,n)}}(e,f),S(z,function(e,t,n,o,i,r){var s,a,l,u,c,h,f,m,g,y,v,b,x,w,T,k,C,A,E,I,M,R,_,L,D,O,N,U,B,j,F,z,$,G,V;return P(function(P){switch(P.g){case 1:if(s=[],a=new Set,!(0<n.length)){P.u(2);break}l=p(n),u=l.next();case 3:if(u.done){P.u(2);break}if(c=u.value,h=Sm(c,"METHOD"),f=wm(c,"KEYFORMAT")||"identity",m=null,"NONE"==h){P.u(4);break}if(Eg(h)){g=Mm(i(),Sm(c,"URI"),r),y=g.sort().join(""),e.K.has(y)||(v=bi(g,e.g.retryParameters),b=Ag(e,v,6),e.K.set(y,b)),P.u(4);break}if("identity"!=f){m=(x=Lg[f])?x(c,""):null,P.u(6);break}return S(P,Ig(e,c,"",i,null,r),9);case 9:m=P.h;case 6:if(m){if(m.keyIds)for(w=p(m.keyIds),T=w.next();!T.done;T=w.next())k=T.value,a.add(k);s.push(m)}case 4:u=l.next(),P.u(3);break;case 2:for(C={},A=p(t),E=A.next();!E.done;E=A.next())I=E.value,M=bm(I,!e.j),C[M]?C[M].push(I):C[M]=[I];for(_ in R=[],C)L=C[_],D=L[0],O=wm(D,"FRAME-RATE"),N=Number(wm(D,"AVERAGE-BANDWIDTH"))||Number(Sm(D,"BANDWIDTH")),U=wm(D,"RESOLUTION"),B=p(U?U.split("x"):[null,null]),j=B.next().value,F=B.next().value,z=wm(D,"VIDEO-RANGE"),($=wm(D,"REQ-VIDEO-LAYOUT"))&&$.includes(",")&&(G=$.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e}),$=G[0]),$=$||"CH-MONO",V=Wm(e,L,o),R.push.apply(R,d(Zm(e,V.audio,V.video,N,j,F,O,z,$,s,a)));return P.return(R.filter(function(e){return null!=e}))}})}(e,m,v,f,u,e.s),5);case 5:return s=z.h,a=function(e,t){var n=Am(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return eg(e,[t],new Map).stream}catch(a){if(e.g.hls.ignoreTextStreamFailures)return null;throw a}});for(var o=(n=p(n)).next();!o.done;o=n.next()){var i=Sm(o.value,"GROUP-ID");if((o=e.F.get(i))&&(i=e.G.get(i)))for(var r=(i=p(i)).next();!r.done;r=i.next())(r=r.value).stream.codecs=o,r.stream.mimeType=vg(An,o)||bg(An),Xm(r.stream)}return t.filter(function(e){return e})}(e,f),S(z,function(e,t,n){var o,i;return P(function(r){return 1==r.g?(o=t.map(function(t){var n,o;return P(function(i){if(1==i.g)return e.g.disableThumbnails?i.return(null):(k(i,2),S(i,function(e,t){var n,o,i,r,s,a,l,u,c,p;return P(function(d){return 1==d.g?(n=Sm(t,"URI"),o=wm(t,"CODECS","jpeg")||"",e.i.has(n)?d.return(e.i.get(n)):(i=wm(t,"LANGUAGE"),r=wm(t,"NAME"),s=wm(t,"CHARACTERISTICS"),a=tg(e,e.B++,[n],o,"image",i,!1,r,null,null,s,!1,null,!1),(l=wm(t,"RESOLUTION"))?S(d,a.stream.createSegmentIndex(),3):d.u(2))):(2!=d.g&&(u=a.stream.segmentIndex.get(0),c=u.tilesLayout)&&(a.stream.width=Number(l.split("x")[0])*Number(c.split("x")[0]),a.stream.height=Number(l.split("x")[1])*Number(c.split("x")[1])),(p=wm(t,"BANDWIDTH"))&&(a.stream.bandwidth=Number(p)),e.i.set(n,a),d.return(a))})}(e,t),4));if(2!=i.g)return n=i.h,i.return(n.stream);if(o=E(i),e.g.hls.ignoreImageStreamFailures)return i.return(null);throw o})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=Sm(t,"URI"),o=wm(t,"CODECS")||"";if(e.i.has(n))var i=e.i.get(n);else{var r=wm(t,"LANGUAGE"),s=wm(t,"NAME"),a=wm(t,"CHARACTERISTICS"),l=tg(e,e.B++,[n],o,"image",r,!1,s,null,null,a,!1,null,!1),u=wm(t,"RESOLUTION"),c=p(u?u.split("x"):[null,null]),d=c.next().value,h=c.next().value;l.stream.width=Number(d)||void 0,l.stream.height=Number(h)||void 0;var f=wm(t,"BANDWIDTH");f&&(l.stream.bandwidth=Number(f)),e.i.set(n,l),i=l}return"mjpg"!==(t=i).stream.codecs?null:t.stream}catch(w){if(e.g.hls.ignoreImageStreamFailures)return null;throw w}})),S(r,Promise.all(o),2)):(i=r.h,r.return(i.filter(function(e){return e})))})}(e,g,y),6);case 6:l=z.h,z.u(3);break;case 7:A=z.h,e.i.set(n,A),A.stream&&(I=dl(A.stream),A.stream.segmentIndex.Hb(function(e){e.$&&(e.$.Hc=I)})),c=A.stream.type,s.push({id:0,language:no(T||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==c?A.stream:null,video:"video"==c?A.stream:null,bandwidth:A.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new St(2,7,7001);if(1==i.type&&(kg(e)&&(dg(e,i),M=e.o,e.A.Y(M)),R=Array.from(e.i.values()),ig(e,R),Hm(e),gg(e,i.g,c,h,u)),e.m={presentationTimeline:e.l,variants:s,textStreams:a,imageStreams:l,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.ea||!e.g.hls.disableCodecGuessing){z.u(8);break}for(_=[],L=p(e.m.variants),D=L.next();!D.done;D=L.next())(O=D.value).audio&&""===O.audio.codecs&&_.push(O.audio.createSegmentIndex()),O.video&&""===O.video.codecs&&_.push(O.video.createSegmentIndex());return S(z,Promise.all(_),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),1==s.length){for(N=[],U=s[0],B=p([U.video,U.audio]),j=B.next();!j.done;j=B.next())(F=j.value)&&!F.segmentIndex&&N.push(F.createSegmentIndex());if(0<N.length)return S(z,Promise.all(N),0)}z.u(0)}})}(o,n.data,e),3)):i.return(o.m)})},i.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.da&&(e.push(this.da.destroy()),this.da=null),this.g=this.h=null,this.ub.clear(),this.m=null,this.i.clear(),this.G.clear(),this.F.clear(),this.s.clear(),this.qa.clear(),this.oa.clear(),this.K.clear(),this.pa.clear(),this.ya.clear(),this.Ea.clear(),this.j&&this.j.destroy(),this.Z&&(this.Z.release(),this.Z=null),Promise.all(e)},i.update=function(){var e,t,n,o,i,r,s,a,l,u,c,h=this;return P(function(f){if(1==f.g){if(!kg(h))return f.return();for(e=[],t=Array.from(h.i.values()),h.o=1/0,h.m.gapCount=0,n=t.filter(function(e){return e.stream.segmentIndex}),o=p(n),i=o.next();!i.done;i=o.next())r=i.value,e.push($m(h,r));return S(f,Promise.all(e),2)}for(og(h,n.map(function(e){return e.stream})),s=n.some(function(e){return 0==e.ed}),n.length&&!s&&(Cg(h,Ng.sh),a=n.map(function(e){return e.Jb}),h.l.Za(Math.min.apply(Math,d(a))),h.h.updateDuration()),s&&Hm(h),l=p(n),u=l.next();!u.done;u=l.next())(c=u.value).stream.segmentIndex&&!c.stream.segmentIndex.O[0]&&h.h.disableStream(c.stream);T(f)})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(e){this.j&&this.j.banLocation(e)},i.setMediaElement=function(e){this.ba=e},$("shaka.hls.HlsParser",Fm);var Mg={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Rg={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},_g=new Set(["video/mp2t"].concat(d(Gn))),Lg={"com.apple.streamingkeydelivery":function(e,t){if("video/mp2t"==t)throw new St(2,4,4040);if(Zt())throw new St(2,4,4041);if(t=Sm(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return"SAMPLE-AES"==t&&(n="cbcs"),wn("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Sm(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Sm(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return"SAMPLE-AES"==t&&(n="cbcs"),n=wn("com.widevine.alpha",n,[{initDataType:"cenc",initData:t=ve((t=jm((t=Sm(e,"URI")).split("?")[0])).data)}]),(e=wm(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Sm(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return"SAMPLE-AES"==t&&(n="cbcs"),wn("com.microsoft.playready",n,[{initDataType:"cenc",initData:e=Xi(e=ve((e=jm((e=Sm(e,"URI")).split("?")[0])).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}])}},Dg="VOD",Pg="EVENT",Og="LIVE",Ng={sh:Dg,qj:Pg,yj:Og};function Ug(e){if(e=Bg(e))e:{for(var t=(e=p(nr(e,"DATA"))).next();!t.done;t=e.next())if(t=or(t.value,"LA_URL")){e=er(t);break e}e=""}else e="";return e}function Bg(e){return(e=function(e){var t=0,n=xe(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,1&i||i+e>n.byteLength){n=[];break e}var r=ve(n,e,i);t.push({type:o,value:r}),e+=i}n=t}return n}(e=gn(er(e))).filter(function(e){return e.type===jg})[0])&&(e=Ki(e=sn(e.value,!0),"WRMHEADER"))?e:null}es["application/x-mpegurl"]=function(){return new Fm},es["application/vnd.apple.mpegurl"]=function(){return new Fm};var jg=1,Fg=(new Map).set("com.microsoft.playready",Ug).set("com.microsoft.playready.recommendation",Ug).set("com.microsoft.playready.software",Ug).set("com.microsoft.playready.hardware",Ug);function zg(e){if(!Jg){Jg=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);cy=Qg("ftyp",t,o,t,n),t=Qg("dref",py),dy=Qg("dinf",t)}this.g=e}function $g(e){for(var t=[],n=p(e.g),o=n.next();!o.done;o=n.next()){var i=t,r=i.push,s=o.value;o=Qg;var a=s.id+1,l=s.stream.width||0,u=s.stream.height||0;"audio"==s.type&&(u=l=0);var c=s.duration*s.timescale,h=Math.floor(c/(Zg+1));switch(c=Math.floor(c%(Zg+1)),a=Qg("tkhd",a=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(Kg(a,4)),[0,0,0,0],d(Kg(h,4)),d(Kg(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],d(Kg(l,2)),[0,0],d(Kg(u,2)),[0,0]))),l=Qg,h=s.duration*s.timescale,u=Math.floor(h/(Zg+1)),h=Math.floor(h%(Zg+1)),c=(c=s.stream.language).charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,u=Qg("mdhd",u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(Kg(s.timescale,4)),d(Kg(u,4)),d(Kg(h,4)),d(Kg(c,2)),[0,0]))),h=s,c=new Uint8Array([]),h.type){case"video":c=ty;break;case"audio":c=ny}h=Qg("hdlr",c);e:{switch(s.type){case"video":s=Qg("minf",Qg("vmhd",ay),dy,Gg(s));break e;case"audio":s=Qg("minf",Qg("smhd",ly),dy,Gg(s));break e}s=new Uint8Array([])}o=o("trak",a,s=l("mdia",u,h,s)),r.call(i,o)}for(t=bn.apply(hn,d(t)),n=Qg,o=(r=e.g[0]).duration*r.timescale,i=Math.floor(o/(Zg+1)),o=Math.floor(o%(Zg+1)),i=Qg("mvhd",i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(d(Kg(r.timescale,4)),d(Kg(i,4)),d(Kg(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),o=[],l=(e=p(e.g)).next();!l.done;l=e.next())a=(s=o).push,l=Qg("trex",l=new Uint8Array([0,0,0,0].concat(d(Kg(l.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))),a.call(s,l);if(e=Qg("mvex",e=bn.apply(hn,d(o))),o=[],r.encrypted){for(s=(r=p(r.stream.drmInfos)).next();!s.done;s=r.next())if((s=s.value).initData)for(a=(s=p(s.initData)).next();!a.done;a=s.next())o.push(a.value.initData);r=bn.apply(hn,d(o))}else r=new Uint8Array([]);return e=n("moov",i,t,e,r),(t=new Uint8Array(cy.byteLength+e.byteLength)).set(cy),t.set(e,cy.byteLength),t}function Gg(e){var t=Qg,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var o=e.stream.height||0;if(0<e.wa.byteLength)var i=Qg("avcC",e.wa);else{i=Qg;for(var r=7,s=[],a=[],l=0,u=0,c=0,p=0;p<e.$a.length;p++){var h=Yg(e.$a[p]);switch(31&h[0]){case 7:s.push(h),r+=h.length+2;break;case 8:a.push(h),r+=h.length+2}}for(0<s.length&&(l=s[0][1],c=s[0][2],u=s[0][3]),p=0,(r=new Uint8Array(r))[p++]=1,r[p++]=l,r[p++]=c,r[p++]=u,r[p++]=255,r[p++]=224|s.length,l=0;l<s.length;l++)r[p++]=(65280&s[l].length)>>8,r[p++]=255&s[l].length,r.set(s[l],p),p+=s[l].length;for(r[p++]=a.length,s=0;s<a.length;s++)r[p++]=(65280&a[s].length)>>8,r[p++]=255&a[s].length,r.set(a[s],p),p+=a[s].length;i=i("avcC",r)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(d(Kg(n,2)),d(Kg(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="avc1",a=Vg(e),s=new Uint8Array([]),e.encrypted&&(s=qg(e),o="encv"),n=Qg(o,n,i,a,s)}else e.codecs.includes("hvc1")&&(o=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),0<e.wa.byteLength&&(n=Qg("hvcC",e.wa)),o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(d(Kg(o,2)),d(Kg(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",a=Vg(e),s=new Uint8Array([]),e.encrypted&&(s=qg(e),i="encv"),n=Qg(i,o,n,a,s));break;case"audio":e.codecs.includes("mp3")?e=Qg(".mp3",Hg(e)):e.codecs.includes("ac-3")?(n=Qg("dac3",e.ma),o="ac-3",i=new Uint8Array([]),e.encrypted&&(i=qg(e),o="enca"),e=Qg(o,Hg(e),n,i)):e.codecs.includes("ec-3")?(n=Qg("dec3",e.ma),o="ec-3",i=new Uint8Array([]),e.encrypted&&(i=qg(e),o="enca"),e=Qg(o,Hg(e),n,i)):e.codecs.includes("opus")?(n=Qg("dOps",e.ma),o="Opus",i=new Uint8Array([]),e.encrypted&&(i=qg(e),o="enca"),e=Qg(o,Hg(e),n,i)):(0<e.ma.byteLength?n=Qg("esds",e.ma):(n=Qg,o=e.id+1,i=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,l=Tn("audio",e.codecs.split(",")),a=(u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[s],"mp4a.40.5"!==l&&"mp4a.40.29"!==l||(a=u[2*s]),s=parseInt(l.split(".").pop(),10),n=n("esds",o=new Uint8Array([0,0,0,0,3,25].concat(d(Kg(o,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|a>>>1,a<<7|i<<3,6,1,2])))),o="mp4a",i=new Uint8Array([]),e.encrypted&&(i=qg(e),o="enca"),e=Qg(o,Hg(e),n,i)),n=e}return t("stbl",e=Qg("stsd",uy,n),Qg("stts",oy),Qg("stsc",iy),Qg("stsz",sy),Qg("stco",ry))}function Vg(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return Qg("pasp",e=new Uint8Array([].concat(d(Kg(e.Ba,4)),d(Kg(t,4)))))}function Hg(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(d(Kg(e.stream.audioSamplingRate||44100,2)),[0,0]))}function qg(e){for(var t=Qg,n=e.codecs.substring(0,e.codecs.indexOf(".")),o=0,i=0;i<n.length;i+=1)o|=n.charCodeAt(i)<<8*(n.length-i-1);n=Qg("frma",n=new Uint8Array([].concat(d(Kg(o,4))))),o=Qg("schm",o=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0])),i=Qg;for(var r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=(e=p(e.stream.drmInfos)).next();!s.done;s=e.next())if((s=s.value)&&s.keyIds&&s.keyIds.size)for(var a=(s=p(s.keyIds)).next();!a.done;a=s.next())r=Yg(a.value);return t("sinf",n,o,i("schi",r=Qg("tenc",e=new Uint8Array([0,0,0,0,0,0,1,8]),r)))}function Xg(e){for(var t=[],n=(e=p(e.g)).next();!n.done;n=e.next()){n=n.value;var o,i=t.push,r=i.apply,s=Qg,a=new Uint8Array([0,0,0,0].concat(d(Kg(n.data?n.data.rb:0,4))));a=Qg("mfhd",a);var l=n.data?n.data.Ya:[],u=new Uint8Array(4+l.length);for(o=0;o<l.length;o++){var c=l[o].flags;u[o+4]=c.Va<<4|c.Xa<<2|c.Wa}var h=(l=Qg("sdtp",u)).length+92;u=Qg,o=Qg("tfhd",o=new Uint8Array([0,0,0,58].concat(d(Kg(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),c=n.data?n.data.baseMediaDecodeTime:0;var f=Math.floor(c%(Zg+1));c=Qg("tfdt",c=new Uint8Array([1,0,0,0].concat(d(Kg(Math.floor(c/(Zg+1)),4)),d(Kg(f,4)))));var m=h,g=12+16*(f=(h=n.data?n.data.Ya:[]).length),y=new Uint8Array(g);for(m+=8+g,y.set(["video"===n.type?1:0,0,15,1].concat(d(Kg(f,4)),d(Kg(m,4))),0),m=0;m<f;m++){var v=h[m];g=Kg(v.duration,4);var b=Kg(v.size,4),x=v.flags;v=Kg(v.cb,4),y.set([].concat(d(g),d(b),[x.gb<<2|x.Va,x.Xa<<6|x.Wa<<4|x.hb,61440&x.Ua,15&x.Ua],d(v)),12+16*m)}s=s("moof",a,l=u("traf",o,c,h=Qg("trun",y),l)),r.call(i,t,[s,Wg(n)])}return bn.apply(hn,d(t))}function Wg(e){return e=(e.data?e.data.Ya:[]).map(function(e){return e.data}),Qg("mdat",e=bn.apply(hn,d(e)))}function Kg(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function Yg(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Qg(e){var t=O.apply(1,arguments),n=ey[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],ey[e]=n);for(var o=8,i=t.length-1;0<=i;i--)o+=t[i].byteLength;for((i=new Uint8Array(o))[0]=o>>24&255,i[1]=o>>16&255,i[2]=o>>8&255,i[3]=255&o,i.set(n,4),n=0,o=8;n<t.length;n++)i.set(t[n],o),o+=t[n].byteLength;return i}var Jg=!1,Zg=Math.pow(2,32)-1,ey={},ty=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ny=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),oy=new Uint8Array([0,0,0,0,0,0,0,0]),iy=new Uint8Array([0,0,0,0,0,0,0,0]),ry=new Uint8Array([0,0,0,0,0,0,0,0]),sy=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ay=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ly=new Uint8Array([0,0,0,0,0,0,0,0]),uy=new Uint8Array([0,0,0,0,0,0,0,1]),cy=new Uint8Array([]),py=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),dy=new Uint8Array([]);function hy(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new H(5),this.o=new Rt(function(){!function(e){var t;P(function(n){switch(n.g){case 1:return k(n,2),S(n,fy(e),4);case 4:A(n,3);break;case 2:t=E(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();T(n)}})}(e)}),this.A=new fi,this.m=new Map}function fy(e){var t,n,o,i,r,s,a;return P(function(l){if(1==l.g)return t=bi(e.l,e.g.retryParameters),n=e.h.networkingEngine,o=Date.now(),i=n.request(0,t,{type:5}),mi(e.A,i),S(l,i.promise,2);if(r=l.h,!e.h)return l.return();r.uri&&!e.l.includes(r.uri)&&e.l.unshift(r.uri);var u=r.uri,c=r.data,h=e.g.mss.manifestPreprocessor;if(h!=Yl){if(le("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),!(c=qf(c,"SmoothStreamingMedia")))throw new St(2,4,4046,u);h(c),c=ln(c.outerHTML)}var f=Wi(c,"SmoothStreamingMedia");if(!f)throw new St(2,4,4046,u);if((u=e.g.mss.manifestPreprocessorTXml)!=Ql&&u(f),e.i||(e.i=new ba(null,0)),u=rr(f,"IsLive",gr,!1))throw new St(2,4,4047);e.i.sc(!u),h=rr(f,"TimeScale",fr,1e7),c=rr(f,"DVRWindowLength",fr),u&&(0===c||isNaN(c))&&(c=1/0);var m,g=rr(f,"CanSeek",gr,!1);for(0===c&&g&&(c=1/0),g=null,c&&0<c&&(g=c/h),u&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride),null==g&&(g=1/0),e.i.pe(g),c=rr(f,"Duration",fr,1/0),u||e.i.Za(c/h),u={variants:[],textStreams:[],timescale:h,duration:c/h},g=Zi(f,"Protection"),h=e.g.mss.keySystemsBySystemId,c=[],m=(g=p(g)).next();!m.done;m=g.next())c=c.concat(Zi(m.value,"ProtectionHeader"));if(c.length){for(g=[],m=0;m<c.length;m++){var y=c[m],v=y.attributes.SystemID.toLowerCase(),b=h[v];if(b){var x=Bg(y);if(x)e:{for(var w=(x=p(nr(x,"DATA"))).next();!w.done;w=x.next())if(w=or(w.value,"KID")){x=gn(er(w)),x=vn(x=new Uint8Array([x[3],x[2],x[1],x[0],x[5],x[4],x[7],x[6]].concat(d(x.slice(8)))));break e}x=null}else x=null;v=wn(b,"cenc",v=[{initData:Xi(w=gn(er(y)),v=yn(v.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:x}]),x&&v.keyIds.add(x),(b=Fg.get(b))&&(v.licenseServerUri=b(y)),g.push(v)}}h=g}else h=[];for(m=h,g=[],h=[],c=[],y=(f=p(f=Zi(f,"StreamIndex"))).next();!y.done;y=f.next()){b=Zi(y=y.value,"QualityLevel"),v=u.timescale,x=u.duration,w=Zi(y,"c");for(var k=[],C=0,A=0;A<w.length;++A){var E=w[A],I=w[A+1],M=rr(E,"t",fr),R=rr(E,"d",fr);if(E=rr(E,"r",dr),!R)break;if(M=null!=M?M:C,0>(E=E||0))if(I){if(null==(I=rr(I,"t",fr)))break;if(M>=I)break;E=Math.ceil((I-M)/R)-1}else{if(1/0==x)break;if(M/v>=x)break;E=Math.ceil((x*v-M)/R)-1}for(I=0;I<=E;++I)C=M+R,k.push({start:M/v,end:C/v,$f:M}),M=C}for(v=k,x=(b=p(b)).next();!x.done;x=b.next())(x=my(e,y,x.value,v,m,u))&&("audio"!=x.type||e.g.disableAudio?"video"!=x.type||e.g.disableVideo?x.type!=An||e.g.disableText||c.push(x):h.push(x):g.push(x))}for(f=[],m=(g=p(0<g.length?g:[null])).next();!m.done;m=g.next())for(m=m.value,k=(y=p(0<h.length?h:[null])).next();!k.done;k=y.next())v=(b=f).push,x=e,w=m,k=k.value,A=0,w&&w.bandwidth&&0<w.bandwidth&&(A+=w.bandwidth),k&&k.bandwidth&&0<k.bandwidth&&(A+=k.bandwidth),x={id:x.s++,language:w?w.language:"und",disabledUntilTime:0,primary:!!w&&w.primary||!!k&&k.primary,audio:w,video:k,bandwidth:A,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(b,x);u.variants=f,u.textStreams=c,e.j?(e.j.variants=u.variants,e.j.textStreams=u.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:u.variants,textStreams:u.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.Wd()),Promise.resolve(),s=Date.now(),a=(s-o)/1e3,e.B.sample(1,a),T(l)})}function my(e,t,n,o,i,r){var s=t.attributes.Type;if("audio"!==s&&"video"!==s&&"text"!==s)return Y("Ignoring unrecognized type:",s),null;var a=t.attributes.Language,l=e.s++,u=rr(n,"Bitrate",hr),c=rr(n,"MaxWidth",hr),d=rr(n,"MaxHeight",hr),h=rr(n,"Channels",hr),f=rr(n,"SamplingRate",hr),m=r.duration;o.length&&(m=o[o.length-1].end-o[0].start);var g=e.i.getDuration();e.i.Za(Math.min(m,g));var y={id:l,originalId:t.attributes.Name||String(l),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:u||0,width:c||void 0,height:d||void 0,kind:"",encrypted:0<i.length,drmInfos:i,keyIds:new Set,language:no(a||"und"),originalLanguage:a,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:f,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:r.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((i=t.attributes.Subtype)&&((i=yy[i])&&y.roles.push(i),"main"===i&&(y.primary=!0)),null!==(i=n.attributes.FourCC)&&""!==i||(i=t.attributes.FourCC),!i)if("audio"===s)i="AAC";else if("video"===s)return Y('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!gy.includes(i.toUpperCase()))return Y("Codec not supported:",i),null;switch(n=function(e,t,n,o){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=o.channelsCount||2,e=o.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return o=i[e],"AACH"===n?(n=new Uint8Array(4),e=i[2*e],n[0]=40|o>>1,n[1]=o<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,(t=new Uint16Array(2))[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):((n=new Uint8Array(2))[0]=16|o>>1,n[1]=o<<7|t<<3,(t=new Uint16Array(1))[0]=(n[0]<<8)+n[1],t[0].toString(16))}(n,s,i,y),y.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return Y("Quality unsupported without CodecPrivateData",s),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=function(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}(i,n);break;case"video":if(!n)return Y("Quality unsupported without CodecPrivateData",s),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=function(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}(n);break;case"text":y.type=An,y.mimeType="application/mp4",("TTML"===i||"DFXP"===i)&&(y.codecs="stpp")}return y.fullMimeTypes.add(_n(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var n=e.m.get(y.id);else n=[],"video"==y.type&&(n=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n=$g(new zg([n={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,$a:n,ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:y}])),e.m.set(y.id,n);return n=function(e,t,n,o,i){var r=o.attributes.Url.replace("{bitrate}",String(n.bandwidth));o=[];for(var s=(i=p(i)).next(),a={};!s.done;a={re:void 0},s=i.next())a.re=s.value,o.push(new ss(a.re.start,a.re.end,function(t){return function(){return xn(e.l,[r.replace("{start time}",String(t.re.$f))])}}(a),0,null,t,0,0,n.mssPrivateData.duration));return o}(e,new is(function(){return[]},0,null,dl(y),y.mssPrivateData.timescale,n),y,t,o),y.segmentIndex=new ja(n),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}(i=hy.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n=this;return P(function(o){if(1==o.g)return n.l=[e],n.h=t,S(o,fy(n),2);if(!n.h)throw new St(2,7,7001);return o.return(n.j)})},i.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},i.update=function(){var e,t=this;return P(function(n){return 1==n.g?(k(n,2),S(n,fy(t),4)):2!=n.g?A(n,0):(e=E(n),t.h&&e?(t.h.onError(e),void T(n)):n.return())})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},$("shaka.mss.MssParser",hy);var gy="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),yy={CAPT:"main",SUBT:"alternate",DESC:"main"};function vy(e,t,n,o,i,r){if(200<=n&&299>=n&&202!=n)return{uri:i||o,originalUri:o,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var s=null;try{s=an(t)}catch(a){}throw new St(401==n||403==n?2:1,1,1001,o,n,s,e,r,i||o)}function by(){}function xy(e,t,n,o,i){var r=new Ay;Ri(t.headers).forEach(function(e,t){r.append(t,e)});var s=new ky,a={lg:!1,mh:!1};if(e=function(e,t,n,o,i,r,s){var a,l,u,c,p,d,h,f,m,g,y,v,b;return P(function(x){switch(x.g){case 1:return a=Ty,l=Cy,d=p=0,h=Date.now(),k(x,2),S(x,a(e,n),4);case 4:if(u=x.h,r(wy(u.headers)),"HEAD"==n.method){x.u(5);break}return f=u.clone().body.getReader(),g=(m=u.headers.get("Content-Length"))?parseInt(m,10):0,y=function(e){function t(){var n,o,r;return P(function(a){switch(a.g){case 1:return k(a,2),S(a,f.read(),4);case 4:n=a.h,A(a,3);break;case 2:return E(a),a.return();case 3:if(n.done){a.u(5);break}if(p+=n.value.byteLength,!s){a.u(5);break}return S(a,s(n.value),5);case 5:(100<(o=Date.now())-h||n.done)&&(r=n.done?0:g-p,i(o-h,p-d,r),d=p,h=o),n.done?e.close():(e.enqueue(n.value),t()),T(a)}})}t()},new l({start:y}),S(x,u.arrayBuffer(),6);case 6:c=x.h;case 5:A(x,3);break;case 2:if(v=E(x),o.lg)throw new St(1,1,7001,e,t);if(o.mh)throw new St(1,1,1003,e,t);throw new St(1,1,1002,e,v,t);case 3:return b=wy(u.headers),x.return(vy(b,c,u.status,e,u.url,t))}})}(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,o,i,t.streamDataCallback),e=new ii(e,function(){return a.lg=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new Rt(function(){a.mh=!0,s.abort()});l.Y(t/1e3),e.finally(function(){l.stop()})}return e}function wy(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}function Sy(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(mS){return!1}return!!e.Response&&!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController)}es["application/vnd.ms-sstr+xml"]=function(){return new hy},$("shaka.net.HttpFetchPlugin",by),by.isSupported=Sy,by.parse=xy;var Ty=e.fetch,ky=e.AbortController,Cy=e.ReadableStream,Ay=e.Headers;function Ey(){}function Iy(e,t,n,o,i){var r=new Ry,s=Date.now(),a=0,l=new Promise(function(l,u){r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){u(new St(1,1,7001,e,n))};var c=!1;for(var p in r.onreadystatechange=function(){if(2==r.readyState&&!c){var e=My(r);i(e),c=!0}},r.onload=function(t){var i=My(r),c=r.response;try{o(Date.now()-s,t.loaded-a,0);var p=vy(i,c,r.status,e,r.responseURL,n);l(p)}catch(Wr){u(Wr)}},r.onerror=function(t){u(new St(1,1,1002,e,t,n))},r.ontimeout=function(){u(new St(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-s||e.lengthComputable&&e.loaded==e.total)&&(o(t-s,e.loaded-a,4==r.readyState?0:e.total-e.loaded),a=e.loaded,s=t)},t.headers)r.setRequestHeader(p.toLowerCase(),t.headers[p]);r.send(t.body)});return new ii(l,function(){return r.abort(),Promise.resolve()})}function My(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=p(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Sy()&&(yi("http",xy,2,!0),yi("https",xy,2,!0),yi("blob",xy,2,!0)),$("shaka.net.HttpXHRPlugin",Ey),Ey.parse=Iy;var Ry=e.XMLHttpRequest;function _y(e,t,n,o){this.g=e,this.i=t,this.groupId=n,this.h=o}function Ly(e){return e.M().map(function(e){return"{"+encodeURI(e)+"}"}).join("")+":"+e.Ha+":"+e.sa}function Dy(e,t){return yl(e.g.M(),e.g.Ha,e.g.sa,t.streaming.retryParameters)}function Py(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Oy(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Ny(e){var t=this;this.o=e,this.j=new Map,this.i=new Ei(function(){return Uy(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Py}function Uy(e){var t=e.h.map(function(e){return e()});return e.h=[],Promise.all(t)}function By(e,t,n,o,i,r){Ii(e.i);var s=(e.j.get(t)||Promise.resolve()).then(function(){var t,s,a,l,u,c,p;return P(function(d){if(1==d.g)return S(d,function(e,t){var n,o,i,r;return P(function(s){return 1==s.g?(n=ki,o=e.o.request(n,t),i=function(){return o.abort()},e.h.push(i),S(s,o.promise,2)):(r=s.h,Re(e.h,i),s.return(r.data))})}(e,n),2);if(t=d.h,e.i.g)throw new St(2,9,7001);if(i)for(l in s=ve(t),(a=new qi(s)).data)u=Number(l),c=a.data[u],p=a.g[u],e.l(c,p);e.g.close(o,t.byteLength);var h=e.g;return e.m(0==h.i?0:h.j/h.i,e.g.h),d.return(r(t))})});e.j.set(t,s)}function jy(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new oi,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Fy(e,t){return new Promise(function(n,o){var i=e.h.openCursor();i.onerror=o,i.onsuccess=function(){var e;return P(function(o){if(1==o.g)return null==i.result?(n(),o.return()):(e=i.result,S(o,t(e.key,e.value,e),2));e.continue(),T(o)})}})}function zy(e){this.h=e,this.g=[]}function $y(e,t){return Gy(e,t,"readwrite")}function Gy(e,t,n){var o=new jy(n=e.h.transaction([t],n),t);return e.g.push(o),o.promise().then(function(){Re(e.g,o)},function(){Re(e.g,o)}),o}function Vy(e,t,n){this.h=new zy(e),this.i=t,this.g=n}function Hy(e){return Promise.reject(new St(2,9,9011,"Cannot add new value to "+e))}function qy(e,t,n,o){t=(e=$y(e.h,t)).store();for(var i=(n=p(n)).next(),r={};!i.done;r={rf:void 0},i=n.next())r.rf=i.value,t.delete(r.rf).onsuccess=function(e){return function(){return o(e.rf)}}(r);return e.promise()}function Xy(e,t,n){var o,i,r,s,a,l,u;return P(function(c){if(1==c.g){for(o=Gy(e.h,t,"readonly"),i=o.store(),r={},s=[],a=p(n),l=a.next(),u={};!l.done;u={le:void 0,Sd:void 0},l=a.next())u.Sd=l.value,u.le=i.get(u.Sd),u.le.onsuccess=function(e){return function(){null==e.le.result&&s.push(e.Sd),r[e.Sd]=e.le.result}}(u);return S(c,o.promise(),2)}if(s.length)throw new St(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(e){return r[e]}))})}function Wy(e){this.g=new zy(e)}function Ky(){this.g=new Map}function Yy(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,o){e.hasFixedKeySpace()||t||(t={path:{nb:n,Ja:o},Ja:e})})}),t)return t;throw new St(2,9,9013,"Could not find a cell that supports add-operations")}function Qy(e,t,n){if(!(e=e.g.get(t)))throw new St(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new St(2,9,9013,"Could not find cell with name "+n);return t}function Jy(e,t){Zy.set(e,t)}yi("http",Iy,1,!0),yi("https",Iy,1,!0),yi("blob",Iy,1,!0),Py.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Ny.prototype.destroy=function(){return this.i.destroy()},jy.prototype.abort=function(){var e=this;return P(function(t){if(1==t.g){try{e.i.abort()}catch(n){}return k(t,2),S(t,e.g,4)}if(2!=t.g)return A(t,0);E(t),T(t)})},jy.prototype.store=function(){return this.h},jy.prototype.promise=function(){return this.g},zy.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(i=Vy.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Hy(this.i)},i.removeSegments=function(e,t){return qy(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return P(function(o){return 1==o.g?S(o,Xy(n,n.i,e),2):(t=o.h,o.return(t.map(function(e){return n.og(e)})))})},i.addManifests=function(){return Hy(this.g)},i.updateManifest=function(){return Promise.reject(new St(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=$y(this.h,this.g),o=n.store();return o.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,o.put(n,e))},n.promise()},i.removeManifests=function(e,t){return qy(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return P(function(o){return 1==o.g?S(o,Xy(n,n.g,e),2):(t=o.h,o.return(Promise.all(t.map(function(e){return n.Wc(e)}))))})},i.getAllManifests=function(){var e,t,n=this;return P(function(o){return 1==o.g?(e=Gy(n.h,n.g,"readonly"),t=new Map,S(o,Fy(e,function(e,o){var i;return P(function(r){if(1==r.g)return S(r,n.Wc(o),2);i=r.h,t.set(e,i),T(r)})}),2)):3!=o.g?S(o,e.promise(),3):o.return(t)})},i.og=function(e){return e},i.Wc=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,o,i,r,s,a,l,u=this;return P(function(c){if(1==c.g){for(n=$y(u.h,e),o=n.store(),i=[],r=p(t),s=r.next(),a={};!s.done;a={Hf:void 0},s=r.next())l=s.value,a.Hf=o.add(l),a.Hf.onsuccess=function(e){return function(){i.push(e.Hf.result)}}(a);return S(c,n.promise(),2)}return c.return(i)})},Wy.prototype.destroy=function(){return this.g.destroy()},Wy.prototype.getAll=function(){var e,t,n=this;return P(function(o){return 1==o.g?(e=Gy(n.g,"session-ids","readonly"),t=[],S(o,Fy(e,function(e,n){t.push(n)}),2)):3!=o.g?S(o,e.promise(),3):o.return(t)})},Wy.prototype.add=function(e){for(var t=$y(this.g,"session-ids"),n=t.store(),o=(e=p(e)).next();!o.done;o=e.next())n.add(o.value);return t.promise()},Wy.prototype.remove=function(e){var t,n=this;return P(function(o){return 1==o.g?S(o,Fy(t=$y(n.g,"session-ids"),function(t,n,o){e.includes(n.sessionId)&&o.delete()}),2):S(o,t.promise(),0)})},Ky.prototype.destroy=function(){for(var e=[],t=p(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Ky.prototype.init=function(){var e=this;Zy.forEach(function(t,n){(t=t())&&e.g.set(n,t)});for(var t=[],n=p(this.g.values()),o=n.next();!o.done;o=n.next())t.push(o.value.init());return Promise.all(t)},$("shaka.offline.StorageMuxer",Ky),Ky.unregister=function(e){Zy.delete(e)},Ky.register=Jy,Ky.prototype.destroy=Ky.prototype.destroy;var Zy=new Map;function ev(){Vy.apply(this,arguments)}function tv(e,t){!function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=p(t),o=n.next();!o.done;o=n.next())o.value.variantIds=[];for(o=(n=p(e)).next();!o.done;o=n.next())o.value.variantIds=[];if(n=0,e.length&&!t.length){o=n++;for(var i=p(e),r=i.next();!r.done;r=i.next())r.value.variantIds.push(o)}if(!e.length&&t.length)for(o=n++,r=(i=p(t)).next();!r.done;r=i.next())r.value.variantIds.push(o);if(e.length&&t.length)for(o=(t=p(t)).next();!o.done;o=t.next())for(o=o.value,r=(i=p(e)).next();!r.done;r=i.next()){r=r.value;var s=n++;o.variantIds.push(s),r.variantIds.push(s)}}}(e);for(var n=p(e.streams),o=n.next();!o.done;o=n.next());return e.streams.map(function(n){return function(e,t,n){var o=e.initSegmentUri?nv(e.initSegmentUri):null,i=t+e.presentationTimeOffset,r=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:o,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=nv(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:o,appendWindowStart:t,appendWindowEnd:r,timestampOffset:i,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}(n,e.startTime,t)})}function nv(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new St(2,9,9004,"Could not parse uri "+e)}function ov(){Vy.apply(this,arguments)}function iv(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){return{startTime:t+o.startTime,endTime:t+o.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:o.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function rv(){Vy.apply(this,arguments)}function sv(){this.m=this.j=this.i=this.h=this.g=this.l=null}function av(e,t,n,o){this.g=e,this.i=t,this.h=n,this.l=o,this.j=["offline:",e,"/",t,"/",n,"/",o].join("")}function lv(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var o=e[3];return o&&null!=t?new av(t,n,o,Number(e[4])):null}function uv(e,t){this.h=e,this.g=t}function cv(e,t){var n=new ba(null,0);n.Za(t.duration);var o=t.streams.filter(function(e){return"audio"==e.type}),i=t.streams.filter(function(e){return"video"==e.type});o=function(e,t,n,o){for(var i=new Set,r=p(t),s=r.next();!s.done;s=r.next())for(var a=(s=p(s.value.variantIds)).next();!a.done;a=s.next())i.add(a.value);for(r=p(n),s=r.next();!s.done;s=r.next())for(s=p(s.value.variantIds),a=s.next();!a.done;a=s.next())i.add(a.value);for(r=new Map,i=p(i),s=i.next();!s.done;s=i.next())s=s.value,r.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=p(t),i=t.next();!i.done;i=t.next())for(s=i.value,i=pv(e,s,o),s=p(s.variantIds),a=s.next();!a.done;a=s.next())(a=r.get(a.value)).language=i.language,a.primary=a.primary||i.primary,a.audio=i;for(n=p(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=pv(e,i,o),i=p(i.variantIds),s=i.next();!s.done;s=i.next())(s=r.get(s.value)).primary=s.primary||t.primary,s.video=t;return r}(e,o,i,n),i=t.streams.filter(function(e){return e.type==An}).map(function(t){return pv(e,t,n)});var r=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return pv(e,t,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var a=p(o.values()),l=a.next();!l.done;l=a.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=s),l.video&&l.video.encrypted&&(l.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(o.values()),textStreams:i,imageStreams:r,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function pv(e,t,n){var o=t.segments.map(function(n){return function(e,t,n){var o=new av("segment",e.h,e.g,t.dataKey);return e=new ss(t.startTime,t.endTime,function(){return[o.toString()]},0,null,null!=t.initSegmentKey?function(e,t){var n=new av("segment",e.h,e.g,t);return new is(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}(e,n,t)});return n.sd(o),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ja(o),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([_n(t.mimeType,t.codecs)])}}function dv(){this.g=null}function hv(){}function fv(e){var t=lv(e);return e=t&&"manifest"==t.g?ai(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):t&&"segment"==t.g?function(e,t){var n=new Ky;return ai(void 0).Aa(function(){return n.init()}).Aa(function(){return Qy(n,t.nb(),t.Ja())}).Aa(function(e){return e.getSegments([t.key()])}).Aa(function(e){return{uri:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})}(t.key(),t):ri(new St(2,1,9004,e))}function mv(e,t,n){var o,i,r,s,a,l;return P(function(u){switch(u.g){case 1:o=[];for(var c=[],d=p(n),h=d.next();!h.done;h=d.next()){h=h.value;for(var f=!1,m=p(c),g=m.next();!g.done;g=m.next())if(gv((g=g.value).info,h)){g.sessionIds.push(h.sessionId),f=!0;break}f||c.push({info:h,sessionIds:[h.sessionId]})}i=p(c),r=i.next();case 2:if(r.done){u.u(4);break}return s=r.value,a=function(e,t,n){var o,i;return P(function(r){switch(r.g){case 1:return o=new kr({Lb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),k(r,2),o.configure(e),S(r,function(e,t,n,o,i,r){var s=new Map;return(i={audioCapabilities:i,videoCapabilities:r,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:o,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,i),_r(e,s,[])}(o,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:A(r,3);break;case 2:return E(r),S(r,o.destroy(),5);case 5:return r.return([]);case 3:return i=[],S(r,Promise.all(n.sessionIds.map(function(e){return P(function(t){return 1==t.g?(k(t,2),S(t,function(e,t){var n,o,i;return P(function(r){return 1==r.g?S(r,Pr(e,t,{initData:null,initDataType:null}),2):3!=r.g?(n=r.h)?(o=[],(i=e.i.get(n))&&(i.kb=new oi,o.push(i.kb)),o.push(n.remove()),S(r,Promise.all(o),3)):r.return():(e.i.delete(n),void T(r))})}(o,e),4)):2!=t.g?(i.push(e),A(t,0)):(E(t),void T(t))})})),6);case 6:return S(r,o.destroy(),7);case 7:return r.return(i)}})}(e,t,s),S(u,a,5);case 5:l=u.h,o=o.concat(l),r=i.next(),u.u(2);break;case 4:return u.return(o)}})}function gv(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&_e(e.audioCapabilities,t.audioCapabilities,n)&&_e(e.videoCapabilities,t.videoCapabilities,n)}function yv(e,t){var n=cv(new uv(e.nb(),e.Ja()),t),o=t.appMetadata||{};return n=vv(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:o,isIncomplete:t.isIncomplete||!1}}function vv(e){for(var t=[],n=Lo(e.variants),o=(n=p(n)).next();!o.done;o=n.next())t.push(ko(o.value));for(n=(e=p(e.textStreams)).next();!n.done;n=e.next())t.push(Co(n.value));return t}function bv(){this.g={}}function xv(e,t){var n=t.audio,o=t.video;if(n&&!o&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&o&&(e.g[o.id]=o.bandwidth||t.bandwidth),n&&o){var i=n.bandwidth||393216,r=o.bandwidth||t.bandwidth-i;0>=r&&(r=t.bandwidth),e.g[n.id]=i,e.g[o.id]=r}}function wv(e,t){e.g[t.id]=t.bandwidth||2048}function Sv(e,t){return null==(e=e.g[t])&&(e=0),e}function Tv(e){var t=this;if(e&&e.constructor!=Ku)throw new St(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=Wl(),this.g=new gi),this.i=[],this.j=[];var n=!e;this.l=new Ei(function(){var e,o,i,r,s;return P(function(a){switch(a.g){case 1:return S(a,Promise.all(t.j.map(function(e){return Uy(e)})),2);case 2:for(e=function(){},o=[],i=p(t.i),r=i.next();!r.done;r=i.next())s=r.value,o.push(s.then(e,e));return S(a,Promise.all(o),3);case 3:if(!n){a.u(4);break}return S(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,T(a)}})})}function kv(){if(_t())e:{for(var e=p(Zy.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Cv(e){var t,n,o;return P(function(i){switch(i.g){case 1:return S(i,(t=new Ky).init(),2);case 2:return S(i,Yy(t),3);case 3:return n=i.h,o=new av("manifest",n.path.nb,n.path.Ja,e),S(i,t.destroy(),4);case 4:return S(i,(new Tv).remove(o.toString()),0)}})}function Av(e,t,n,o,i,r){var s,a,l,u,c,d,h,f,m,g,y;return P(function(v){switch(v.g){case 1:for(s=!1,k(v,2),a=!0,l=p(n.streams),u=l.next();!u.done;u=l.next())for(c=u.value,d=p(c.segments),h=d.next();!h.done;h=d.next())f=h.value,null!=(m=f.pendingSegmentRefId?o[f.pendingSegmentRefId]:null)&&(f.dataKey=m,f.pendingSegmentRefId=void 0),null!=(m=f.pendingInitSegmentRefId?o[f.pendingInitSegmentRefId]:null)&&(f.initSegmentKey=m,f.pendingInitSegmentRefId=void 0),f.pendingSegmentRefId&&(a=!1),f.pendingInitSegmentRefId&&(a=!1);return n.size+=i,a&&(n.isIncomplete=!1),S(v,e.updateManifest(t,n),4);case 4:s=!0,r(),A(v,0);break;case 2:return g=E(v),S(v,Cv(t),5);case 5:if(s){v.u(6);break}return y=Object.values(o),S(v,e.removeSegments(y,function(){}),6);case 6:throw g}})}function Ev(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function Iv(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function Mv(e,t,n,o){if(t.expiration=n.ad(),n=Rr(n),t.sessionIds=o.offline.usePersistentLicense?n:[],Ev(e)&&o.offline.usePersistentLicense&&!n.length)throw new St(2,9,9007)}function Rv(e,t){for(var n=[],o=p(e.streams),i=o.next();!i.done;i=o.next())i=i.value,t&&"video"==i.type?n.push({contentType:_n(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:_n(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function _v(e,t,n){return P(function(o){return S(o,function(e,t,n,o){var i,r,s;return P(function(a){return 1==a.g?o.drmInfo?(i=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new St(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),r=o.sessionIds.map(function(e){return{sessionId:e,keySystem:o.drmInfo.keySystem,licenseUri:o.drmInfo.licenseServerUri,serverCertificate:o.drmInfo.serverCertificate,audioCapabilities:Rv(o,!1),videoCapabilities:Rv(o,!0)}}),S(a,mv(t,e,r),2)):a.return():3!=a.g?(s=a.h,S(a,i.remove(s),3)):S(a,i.add(r.filter(function(e){return!s.includes(e.sessionId)})),0)})}(e.g,e.h.drm,n,t),0)})}function Lv(e,t,n){function o(){}var i=function(e){for(var t=new Set,n=(e=p(e.streams)).next();!n.done;n=e.next())for(var o=(n=p(n.value.segments)).next();!o.done;o=n.next())null!=(o=o.value).initSegmentKey&&t.add(o.initSegmentKey),t.add(o.dataKey);return Array.from(t)}(n);return yv(t,n),Promise.all([e.removeSegments(i,o),e.removeManifests([t.key()],o)])}function Dv(e,t,n,o,i,r){var s={id:o.id,originalId:o.originalId,groupId:o.groupId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,colorGamut:o.colorGamut,videoLayout:o.videoLayout,kind:o.kind,language:o.language,originalLanguage:o.originalLanguage,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout,external:o.external,fastSwitching:o.fastSwitching},a=i.offline.numberOfParallelDownloads,l=0;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var o=e.segmentIndex.get(t);o;)n(o),o=e.segmentIndex.get(++t)}(o,n.presentationTimeline.mb(),function(n){var i=Ly(n),u=void 0;if(!r.has(i)){var c=n.endTime-n.startTime;c=Sv(t,o.id)*c,c=Oy(e.g,c),r.set(i,new _y(n,c,l,!1))}n.$&&(u=Ly(n.$),r.has(u)||(c=.5*Sv(t,o.id),c=Oy(e.g,c),r.set(u,new _y(n.$,c,l,!0)))),s.segments.push({pendingInitSegmentRefId:u,initSegmentKey:u?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:i,dataKey:0,mimeType:n.mimeType,codecs:n.codecs}),l=(l+1)%a}),s}function Pv(e){if(e.l.g)throw new St(2,9,7001)}function Ov(){if(!kv())throw new St(2,9,9e3)}function Nv(e,t){return P(function(n){return 1==n.g?(e.i.push(t),C(n,2),S(n,t,4)):2!=n.g?n.return(n.h):(I(n),Re(e.i,t),M(n,0))})}function Uv(e){for(var t=new Set,n=p(e.textStreams),o=n.next();!o.done;o=n.next())t.add(o.value);for(o=(n=p(e.imageStreams)).next();!o.done;o=n.next())t.add(o.value);for(n=(e=p(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}v(ev,Vy),ev.prototype.updateManifestExpiration=function(e,t){var n,o,i,r=this;return P(function(s){return n=$y(r.h,r.g),o=n.store(),i=new oi,o.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,o.put(n),i.resolve()):i.reject(new St(2,9,9012,"Could not find values for "+e))},S(s,Promise.all([n.promise(),i]),0)})},ev.prototype.Wc=function(e){var t,n,o,i,r,s;return P(function(a){if(1==a.g){for(t=[],n=0;n<e.periods.length;++n)o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=o-e.periods[n].startTime,r=tv(e.periods[n],i),t.push(r);return S(a,hf(t),2)}return s=a.h,a.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},ev.prototype.og=function(e){return{data:e.data}},v(ov,Vy),ov.prototype.Wc=function(e){var t,n,o,i,r,s;return P(function(a){if(1==a.g){for(t=[],n=0;n<e.periods.length;++n){o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=o-e.periods[n].startTime;for(var l=e.periods[n],u=[],c=p(l.streams),d=c.next();!d.done;d=c.next())0!=(d=d.value).variantIds.length&&u.push(iv(d,l.startTime,l.startTime+i));r=u,t.push(r)}return S(a,hf(t),2)}return s=a.h,a.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})},v(rv,Vy),(i=rv.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var o=(e=$y(e.h,e.g)).store();return o.get(t).onsuccess=function(){o.put(n,t)},e.promise()}(this,e,t)},i.Wc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=sv.prototype).init=function(){var t=this,n=new oi,o=!1,i=new Rt(function(){o=!0,n.reject(new St(2,9,9017))});i.Y(5);var r=e.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!o){var e=r.result;t.l=e;var s=e.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new ev(e,"segment","manifest"):null,t.g=s,s=(s=e.objectStoreNames).contains("manifest-v2")&&s.contains("segment-v2")?new ov(e,"segment-v2","manifest-v2"):null,t.h=s,s=(s=e.objectStoreNames).contains("manifest-v3")&&s.contains("segment-v3")?new ov(e,"segment-v3","manifest-v3"):null,t.i=s,s=(s=e.objectStoreNames).contains("manifest-v5")&&s.contains("segment-v5")?new rv(e,"segment-v5","manifest-v5"):null,t.j=s,e=e.objectStoreNames.contains("session-ids")?new Wy(e):null,t.m=e,i.stop(),n.resolve()}},r.onupgradeneeded=function(){for(var e=r.result,t=p(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){o||(n.reject(new St(2,9,9001,r.error)),i.stop(),e.preventDefault())},n},i.destroy=function(){var e=this;return P(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return S(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),T(t)}})},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return P(function(n){switch(n.g){case 1:if(!t.g){n.u(2);break}return S(n,t.g.destroy(),2);case 2:if(!t.h){n.u(4);break}return S(n,t.h.destroy(),4);case 4:if(!t.i){n.u(6);break}return S(n,t.i.destroy(),6);case 6:if(!t.j){n.u(8);break}return S(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),S(n,function(){var t=new oi,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new St(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,S(n,t.init(),0)}})},Jy("idb",function(){return Ft()||Pt()||!e.indexedDB?null:new sv}),av.prototype.nb=function(){return this.i},av.prototype.Ja=function(){return this.h},av.prototype.key=function(){return this.l},av.prototype.toString=function(){return this.j},(i=dv.prototype).configure=function(){},i.start=function(e,t){var n,o,i,r,s,a,l=this;return P(function(u){switch(u.g){case 1:if(n=lv(e),l.g=n,null==n||"manifest"!=n.g)throw new St(2,1,9004,e);return o=new Ky,C(u,2),S(u,o.init(),4);case 4:return S(u,Qy(o,n.nb(),n.Ja()),5);case 5:return S(u,u.h.getManifests([n.key()]),6);case 6:return i=u.h,r=i[0],s=new uv(n.nb(),n.Ja()),a=cv(s,r),t.makeTextStreamsForClosedCaptions(a),u.return(a);case 2:return I(u),S(u,o.destroy(),7);case 7:M(u,0)}})},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,o,i,r,s,a,l,u=this;return P(function(c){switch(c.g){case 1:return n=u.g,o=new Ky,k(c,2,3),S(c,o.init(),5);case 5:return S(c,Qy(o,n.nb(),n.Ja()),6);case 6:return S(c,(i=c.h).getManifests([n.key()]),7);case 7:if(r=c.h,s=r[0],a=s.sessionIds.includes(e),l=null==s.expiration||s.expiration>t,!a||!l){c.u(3);break}return S(c,i.updateManifestExpiration(n.key(),t),3);case 3:return I(c),S(c,o.destroy(),10);case 10:M(c,0);break;case 2:E(c),c.u(3)}})},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},es["application/x-offline-manifest"]=function(){return new dv},$("shaka.offline.OfflineScheme",hv),hv.plugin=fv,yi("offline",fv),(i=Tv.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=jl(e,t)),Kl(this.h,e)},i.getConfiguration=function(){var e=Wl();return Kl(e,this.h,Wl()),e},i.xb=function(){return this.g},i.store=function(e,t,n){var o=this,i=this.getConfiguration(),r=new Ny(this.g);return this.j.push(r),t=function(e,t,n,o,i,r){var s,a,l,u,c,d,h,f,m,g,y,v,b;return P(function(x){switch(x.g){case 1:return Ov(),a=s=null,l=new Ky,d=c=u=null,k(x,2,3),S(x,o(),5);case 5:return s=x.h,S(x,function(e,t,n,o){var i,r,s,a,l;return P(function(u){if(1==u.g)return i=null,r=e.g,s={networkingEngine:r,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return o.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(o.manifest),Pv(e),S(u,n.start(t,s),2);if(3!=u.g)return a=u.h,Pv(e),l=Uv(a),S(u,Promise.all(Mi(l,function(e){return e.createSegmentIndex()})),3);if(Pv(e),i)throw i;return u.return(a)})}(e,t,s,i),6);case 6:if(h=x.h,Pv(e),h.presentationTimeline.V()||h.presentationTimeline.kc())throw new St(2,9,9005,t);return S(x,e.yc(h,function(e){d=d||e},i),7);case 7:if(a=x.h,Pv(e),d)throw d;return S(x,function(e,t,n){var o,i,r,s,a,l,u,c,d,h,f,m,g,y,v,b,x,w,C,I,M,R,_,L,D,O,N,U;return P(function(P){switch(P.g){case 1:return o={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter(function(e){return ho(e,t,n)})}(e,n.restrictions,o),S(P,go(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(i=[],r=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,a=n.preferredAudioCodecs,po(e,s,a,r),l=p(e.variants),u=l.next();!u.done;u=l.next())c=u.value,i.push(ko(c));for(d=p(e.textStreams),h=d.next();!h.done;h=d.next())f=h.value,i.push(Co(f));for(m=p(e.imageStreams),g=m.next();!g.done;g=m.next())y=g.value,i.push(Ao(y));return S(P,n.offline.trackSelectionCallback(i),3);case 3:for(v=P.h,b=e.presentationTimeline.getDuration(),x=0,w=p(v),C=w.next();!C.done;C=w.next())I=C.value,M=I.bandwidth*b/8,x+=M;return k(P,4),S(P,n.offline.downloadSizeCallback(x),6);case 6:if(!P.h)throw new St(2,9,9014);A(P,5);break;case 4:if((R=E(P))instanceof St)throw R;throw new St(2,9,9015);case 5:for(_=new Set,L=new Set,D=new Set,O=p(v),N=O.next();!N.done;N=O.next())"variant"==(U=N.value).type&&_.add(U.id),"text"==U.type&&L.add(U.id),"image"==U.type&&D.add(U.id);e.variants=e.variants.filter(function(e){return _.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return L.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return D.has(e.id)}),function(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=p(t),o=n.next();!o.done;o=n.next())for(var i=(o=p(t)).next();!i.done;i=o.next());for(t=p(e),n=t.next();!n.done;n=t.next())for(n=p(e),o=n.next();!o.done;o=n.next());}(e),T(P)}})}(h,a,i),8);case 8:return S(x,l.init(),9);case 9:return Pv(e),S(x,Yy(l),10);case 10:return u=x.h,Pv(e),f=function(e,t,n,o,i,r){var s=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=vv(t),appMetadata:n,isIncomplete:!1}}(n,t,o),a=i.offline.progressCallback;!function(e,t,n){e.m=t,e.l=n}(r,function(e,t){s.size=t,a(s,e)},function(t,n){l&&i.offline.usePersistentLicense&&u==n&&Mr(e,"cenc",t)});var l=Ev(t)&&!Iv(t),u=null;l&&(u=Bv.get(e.g.keySystem));for(var c=new bv,d=p(t.textStreams),h=d.next();!h.done;h=d.next())c.g[h.value.id]=52;for(d=p(t.imageStreams),h=d.next();!h.done;h=d.next())wv(c,h.value);for(d=p(t.variants),h=d.next();!h.done;h=d.next())xv(c,h.value);return c=function(e,t,n,o){for(var i=new Map,r=Uv(n),s=new Map,a=(r=p(r)).next();!a.done;a=r.next()){var l=Dv(e,t,n,a=a.value,o,i);s.set(a.id,l)}for(e=p(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),Xf:Array.from(i.values())}}(r,c,t,i),r=c.streams,c=c.Xf,d=e.g,h=i.offline.usePersistentLicense,d&&h&&(d.initData=[]),{ui:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:r,sessionIds:h?Rr(e):[],drmInfo:d,appMetadata:o,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Xf:c}}(a,h,t,n,i,r),m=f.ui,g=f.Xf,S(x,u.Ja.addManifests([m]),11);case 11:if(y=x.h,Pv(e),c=y[0],Pv(e),d)throw d;return S(x,function(e,t,n,o,i,r,s,a,l){var u,c,d,h,f,m,g,y,v,b;return P(function(x){switch(x.g){case 1:if(u={},c=0,d=function(t,d){var h,f,m,g,y,v,b;return P(function(x){if(1==x.g){for(h=p(t),f=h.next(),m={};!f.done;m={Ac:void 0},f=h.next())m.Ac=f.value,g=Dy(m.Ac,r),y=m.Ac.i,v=m.Ac.h,b=function(t){return function(n){var o,i,r;return P(function(a){if(1==a.g)return S(a,s.addSegments([{data:n}]),2);o=a.h,Pv(e),i=t.Ac.g,r=Ly(i),u[r]=o[0],c+=n.byteLength,T(a)})}}(m),By(i,m.Ac.groupId,g,y,v,b);return S(x,function(e){return P(function(t){return 1==t.g?S(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}(i),2)}return d?(Pv(e),Mv(a,o,l,r),S(x,s.updateManifest(n,o),0)):x.u(0)})},h=!1,k(x,2),!Ev(a)||!h||Iv(a)){x.u(4);break}return S(x,d(t.filter(function(e){return e.h}),!0),5);case 5:return Pv(e),t=t.filter(function(e){return!e.h}),f=u,m=c,u={},c=0,S(x,Av(s,n,o,f,m,function(){return Pv(e)}),6);case 6:Pv(e);case 4:if(h){x.u(7);break}return S(x,d(t,!1),8);case 8:return Pv(e),g=u,y=c,u={},c=0,S(x,Av(s,n,o,g,y,function(){return Pv(e)}),9);case 9:Pv(e);case 7:A(x,0);break;case 2:return v=E(x),b=Object.values(u),S(x,s.removeSegments(b,function(){}),10);case 10:throw v}})}(e,g,c,m,r,i,u.Ja,h,a),12);case 12:return Pv(e),Mv(h,m,a,i),S(x,u.Ja.updateManifest(c,m),13);case 13:return Pv(e),v=new av("manifest",u.path.nb,u.path.Ja,c),x.return(yv(v,m));case 3:return I(x),S(x,l.destroy(),14);case 14:if(!s){x.u(15);break}return S(x,s.stop(),15);case 15:if(!a){x.u(17);break}return S(x,a.destroy(),17);case 17:M(x,0);break;case 2:if(b=E(x),null==c){x.u(19);break}return S(x,Cv(c),19);case 19:throw d||b}})}(this,e,t||{},function(){var t;return P(function(r){return 1==r.g?n?r.u(2):S(r,uu(e,o.g,i.manifest.retryParameters),3):(2!=r.g&&(n=r.h),t=Zr(e,n||null),r.return(t()))})},i,r),(t=new ii(t,function(){return Uy(r)})).finally(function(){Re(o.j,r)}),function(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Re(e.i,n)})}(this,t)},i.remove=function(e){return Nv(this,function(e,t){var n,o,i,r,s,a;return P(function(l){switch(l.g){case 1:if(Ov(),null==(n=lv(t))||"manifest"!=n.g)throw new St(2,9,9004,t);return o=n,i=new Ky,C(l,2),S(l,i.init(),4);case 4:return S(l,Qy(i,o.nb(),o.Ja()),5);case 5:return S(l,(r=l.h).getManifests([o.key()]),6);case 6:return s=l.h,a=s[0],S(l,Promise.all([_v(e,a,i),Lv(r,o,a)]),2);case 2:return I(l),S(l,i.destroy(),8);case 8:M(l,0)}})}(this,e))},i.Li=function(){return Nv(this,function(e){var t,n,o,i,r,s,a,l,u,c;return P(function(d){switch(d.g){case 1:return Ov(),t=e.g,n=e.h.drm,o=new Ky,i=!1,C(d,2),S(d,o.init(),4);case 4:r=[],function(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}(o,function(e){return r.push(e)}),s=p(r),a=s.next();case 5:if(a.done){d.u(2);break}return S(d,(l=a.value).getAll(),8);case 8:return u=d.h,S(d,mv(n,t,u),9);case 9:return c=d.h,S(d,l.remove(c),10);case 10:c.length!=u.length&&(i=!0),a=s.next(),d.u(5);break;case 2:return I(d),S(d,o.destroy(),11);case 11:M(d,3);break;case 3:return d.return(!i)}})}(this))},i.list=function(){return Nv(this,P(function(o){switch(o.g){case 1:return Ov(),e=[],t=new Ky,C(o,2),S(o,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,o){t({nb:n,Ja:o},e)})})}(t,function(t,o){n=n.then(function(){return P(function(n){if(1==n.g)return S(n,o.getAllManifests(),2);n.h.forEach(function(n,o){n=yv(new av("manifest",t.nb,t.Ja,o),n),e.push(n)}),T(n)})})}),S(o,n,2);case 2:return I(o),S(o,t.destroy(),6);case 6:M(o,3);break;case 3:return o.return(e)}}));var e,t,n},i.yc=function(e,t,n){var o,i=this;return P(function(r){return 1==r.g?((o=new kr({Lb:i.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(n.drm),S(r,function(e,t,n){return e.fa=!0,e.A=new Map,e.R=n,Ar(e,t)}(o,e.variants,n.offline.usePersistentLicense),2)):3!=r.g?S(r,Ir(o),3):r.return(o)})},$("shaka.offline.Storage",Tv),Tv.deleteAll=function(){var e;return P(function(t){return 1==t.g?(e=new Ky,C(t,2),S(t,function(e){var t,n;return P(function(o){return 1==o.g?(t=Array.from(e.g.values()),(n=0<t.length)||Zy.forEach(function(e){(e=e())&&t.push(e)}),S(o,Promise.all(t.map(function(e){return e.erase()})),2)):n?o.u(0):S(o,Promise.all(t.map(function(e){return e.destroy()})),0)})}(e),2)):5!=t.g?(I(t),S(t,e.destroy(),5)):M(t,0)})},Tv.prototype.list=Tv.prototype.list,Tv.prototype.removeEmeSessions=Tv.prototype.Li,Tv.prototype.remove=Tv.prototype.remove,Tv.prototype.store=Tv.prototype.store,Tv.prototype.getNetworkingEngine=Tv.prototype.xb,Tv.prototype.getConfiguration=Tv.prototype.getConfiguration,Tv.prototype.configure=Tv.prototype.configure,Tv.prototype.destroy=Tv.prototype.destroy,Tv.support=kv;var Bv=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");function jv(){}function Fv(e,t){for(e={priority:t||0,callback:e},t=0;t<zv.length;t++)if(zv[t].priority<e.priority)return void zv.splice(t,0,e);zv.push(e)}Wc.offline=kv,$("shaka.polyfill",jv),jv.register=Fv,jv.installAll=function(){for(var e=p(zv),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Y("Error installing polyfill!",n)}}};var zv=[];function $v(){this.g=new Vv}function Gv(){e.AbortController||(e.AbortController=$v,e.AbortSignal=Vv)}function Vv(){this.h=!1,this.g=void 0,this.onabort=null,this.i=new hi}function Hv(){}function qv(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=p(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Xv(t.value)}function Xv(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function Wv(){}function Kv(){dS()}function Yv(){}function Qv(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Jv),document.addEventListener("webkitfullscreenerror",Jv),document.addEventListener("mozfullscreenchange",Jv),document.addEventListener("mozfullscreenerror",Jv),document.addEventListener("MSFullscreenChange",Jv),document.addEventListener("MSFullscreenError",Jv)}}function Jv(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function Zv(){}function eb(){var e=!0;!Ft()||Ft()&&Kt()||Ft()&&Qt("Fuchsia")||(e=!1),($t()||Gt()||Vt()||Bt()||Ot()||Qt("PC=EOS")||Ht())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),nb=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=tb)}function tb(t){var n,o,i,r,s;return P(function(a){switch(a.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},o=t.video,i=t.audio,"media-source"!=t.type){if("file"!=t.type)return a.return(n);if(o&&!Lt(o.contentType)||i&&!Lt(i.contentType))return a.return(n);a.u(2);break}if(!_t())return a.return(n);if(!o){a.u(3);break}return S(a,function(t){var n,o;return P(function(i){return 1==i.g?Ft()?S(i,function(t){var n,o;return P(function(i){return 1==i.g?e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(n=t.contentType,t.width&&t.height&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&(n+="; framerate="+t.framerate),"pq"===t.transferFunction&&(n+="; eotf=smpte2084"),o=!1,n in ub?(o=ub[n],i.u(2)):S(i,cast.__platform__.canDisplayType(n),3)):i.return(ie(t.contentType)):(2!=i.g&&(o=i.h,ub[n]=o),i.return(o))})}(t),3):Ot()?(n=t.contentType,t.width&&t.height&&(n+="; width="+t.width,n+="; height="+t.height),t.framerate&&(n+="; framerate="+t.framerate),t.bitrate&&(n+="; bitrate="+t.bitrate),i.return(ie(n))):i.u(2):2!=i.g?(o=i.h,i.return(o)):i.return(ie(t.contentType))})}(o),4);case 4:if(!a.h)return a.return(n);case 3:if(i){var l=i.contentType;if(Ft()&&i.spatialRendering&&(l+="; spatialRendering=true"),!ie(l))return a.return(n)}case 2:return t.keySystemConfiguration?(r=t.keySystemConfiguration,S(a,function(e,t,n){var o,i,r,s,a,l,u,c,p;return P(function(d){switch(d.g){case 1:if(o=[],i=[],n.audio&&(r={robustness:n.audio.robustness||"",contentType:t.contentType},Ot()&&t.contentType.includes('codecs="ac-3"')&&(r.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(r.encryptionScheme=n.audio.encryptionScheme),o.push(r)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme),i.push(s)),a={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},o.length&&(a.audioCapabilities=o),i.length&&(a.videoCapabilities=i),l=e?e.contentType:"",u=t?t.contentType:"",c=n.keySystem,p=null,k(d,2),It.has(l+"#"+u+"#"+c)){p=It.get(l+"#"+u+"#"+c)||null,d.u(4);break}return S(d,navigator.requestMediaKeySystemAccess(n.keySystem,[a]),5);case 5:p=d.h,It.set(l+"#"+u+"#"+c,p);case 4:A(d,3);break;case 2:E(d);case 3:return d.return(p)}})}(o,i,r),6)):(n.supported=!0,a.return(n));case 6:(s=a.h)&&(n.supported=!0,n.keySystemAccess=s);case 5:return a.return(n)}})}$v.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new ci("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},a.Object.defineProperties($v.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),jv.AbortController=$v,$v.install=Gv,Vv.prototype.addEventListener=function(e,t,n){return this.i.addEventListener(e,t,n)},Vv.prototype.removeEventListener=function(e,t,n){return this.i.removeEventListener(e,t,n)},Vv.prototype.dispatchEvent=function(e){return this.i.dispatchEvent(e)},Vv.prototype.throwIfAborted=function(){if(this.h)throw this.g},a.Object.defineProperties(Vv.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Fv(Gv),jv.Aria=Hv,Hv.install=qv,Fv(qv),jv.EncryptionScheme=Wv,Wv.install=Kv,Fv(Kv,-2),jv.Fullscreen=Yv,Yv.install=Qv,Fv(Qv),jv.MediaCapabilities=Zv,Zv.install=eb;var nb=null;Zv.originalMcap=nb;var ob,ib,rb,sb,ab,lb,ub={};function cb(){}function pb(){var t=Xt();(e.MediaSource||e.ManagedMediaSource)&&(t&&e.MediaSource?10>=t?e.MediaSource=null:12>=t?(db(),hb()):15>=t&&db():Qt("DT_STB_BCM")?(db(),hb()):(Ut()||Nt()||Qt("Tizen 4"))&&function(){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return"opus"!=Un(e)&&t(e)},e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"opus"!=Un(e)&&n(e)}}}()),(e.MediaSource||e.ManagedMediaSource)&&function(){if(e.MediaSource){var t=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(e){return"mp2t"!=On(e)&&t(e)}}if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=On(e)&&n(e)}}}(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;Bt()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),o=n.findIndex(function(e){return e.startsWith("codecs=")});if(0>o)return e(t);var i=n[o].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),r=i.findIndex(function(e){return e.startsWith("vp09")});return 0<=r&&(i[r]="vp9",n[o]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}()}function db(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,O.apply(0,arguments));return t.abort=function(){},t}}function hb(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function fb(){}function mb(){screen.orientation&&screen.orientation.unlock||(null!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new gb;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new ci("change");n.dispatchEvent(e)})}())}function gb(){hi.call(this),this.type="",this.angle=0}function yb(){}function vb(e,t){try{var n=new wb(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function bb(e){var t=this.mediaKeys;return t&&t!=e&&Tb(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Tb(e,this):Promise.resolve()}function xb(e){if(xe(e=ve(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ln(e=sn(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=ye(e),this.dispatchEvent(t)}function wb(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=p(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var o=!1,i=!1;if(n.audioCapabilities)for(var r=p(n.audioCapabilities),s=r.next();!s.done;s=r.next())(s=s.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),i=!0));if(n.videoCapabilities)for(r=(n=p(n.videoCapabilities)).next();!r.done;r=n.next())(r=r.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,r.contentType.split(";")[0])&&(t.videoCapabilities.push(r),i=!0));o||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Sb(e){this.h=new WebKitMediaKeys(e),this.g=new te}function Tb(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",xb);try{return Ca(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function kb(e){hi.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new te,this.sessionId="",this.expiration=NaN,this.closed=new oi,this.keyStatuses=new Ab}function Cb(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new ci("keystatuseschange"),e.dispatchEvent(t)}function Ab(){this.size=0,this.g=void 0}Zv.memoizedCanDisplayTypeRequests_=ub,Fv(eb,-1),jv.MediaSource=cb,cb.install=pb,Fv(pb),jv.Orientation=fb,fb.install=mb,v(gb,hi),gb.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},gb.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Fv(mb),jv.PatchedMediaKeysApple=yb,yb.uninstall=function(){ob&&(ob=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",ib),HTMLMediaElement.prototype.setMediaKeys=rb,e.MediaKeys=sb,e.MediaKeySystemAccess=ab,navigator.requestMediaKeySystemAccess=lb,ib=lb=rb=ab=sb=null,e.shakaMediaKeysPolyfill="")},yb.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&(void 0!==t&&t&&(ob=!0,ib=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),rb=HTMLMediaElement.prototype.setMediaKeys,sb=e.MediaKeys,ab=e.MediaKeySystemAccess,lb=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=bb,e.MediaKeys=Sb,e.MediaKeySystemAccess=wb,navigator.requestMediaKeySystemAccess=vb,e.shakaMediaKeysPolyfill=Eb)},wb.prototype.createMediaKeys=function(){var e=new Sb(this.keySystem);return Promise.resolve(e)},wb.prototype.getConfiguration=function(){return this.g},Sb.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new kb(this.h)},Sb.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Sb.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},v(kb,hi),(i=kb.prototype).generateRequest=function(e,t){var n=this;this.h=new oi;try{var o=this.l.createSession("video/mp4",ve(t));this.i=o,this.sessionId=o.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(e){n.h&&(n.h.resolve(),n.h=null),e=new ci("message",e=(new Map).set("messageType",null==n.keyStatuses.Yb()?"license-request":"license-renewal").set("message",ye(e.message))),n.dispatchEvent(e)}),this.j.D(o,"webkitkeyadded",function(){n.g&&(Cb(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(o,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Cb(n,"output-not-allowed");break;default:Cb(n,"internal-error")}}),Cb(this,"status-pending")}catch(i){this.h.reject(i)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new oi;try{this.i.update(ve(e))}catch(t){this.g.reject(t)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(mS){this.closed.reject(mS)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Ab.prototype).Yb=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Et.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Et.value();return!(!this.g||!me(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var Eb="apple";function Ib(){}function Mb(){e.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||Nt()||Qt("Tizen 4")||Qt("Tizen 5.0")||jt())&&(MediaKeys.prototype.setServerCertificate=Rb)}function Rb(){return Promise.resolve(!1)}function _b(){}function Lb(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Db,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Pb,e.MediaKeys=Ob,e.MediaKeySystemAccess=Nb,e.shakaMediaKeysPolyfill=Ub)}function Db(){return Promise.reject(Error("The key system specified is not supported."))}function Pb(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ob(){throw new TypeError("Illegal constructor.")}function Nb(){throw this.keySystem="",new TypeError("Illegal constructor.")}jv.PatchedMediaKeysCert=Ib,Ib.install=Mb,Fv(Mb),jv.PatchedMediaKeysNop=_b,_b.install=Lb,Ob.prototype.createSession=function(){},Ob.prototype.setServerCertificate=function(){},Ob.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},Nb.prototype.getConfiguration=function(){},Nb.prototype.createMediaKeys=function(){};var Ub="nop";function Bb(){}function jb(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Jb="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=zb,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$b,e.MediaKeys=Vb,e.MediaKeySystemAccess=Gb,e.shakaMediaKeysPolyfill=Zb}}function Fb(e){return Jb?Jb+e.charAt(0).toUpperCase()+e.slice(1):e}function zb(e,t){try{var n=new Gb(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function $b(e){var t=this.mediaKeys;return t&&t!=e&&Hb(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Hb(e,this),Promise.resolve()}function Gb(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var o=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var r=(t=p(t)).next();!r.done;r=t.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(r=r.value).initDataTypes,sessionTypes:["temporary"],label:r.label},a=!1;if(r.audioCapabilities)for(var l=p(r.audioCapabilities),u=l.next();!u.done;u=l.next())(u=u.value).contentType&&(a=!0,i.canPlayType(u.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(u),o=!0));if(r.videoCapabilities)for(u=(l=p(r.videoCapabilities)).next();!u.done;u=l.next())(u=u.value).contentType&&(a=!0,i.canPlayType(u.contentType,this.g)&&(s.videoCapabilities.push(u),o=!0));if(a||(o=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==r.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):o=!1),o)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Vb(e){this.l=e,this.h=null,this.g=new te,this.i=[],this.j=new Map}function Hb(e,t){e.h=t,e.g.Ra();var n=Jb;t&&(e.g.D(t,n+"needkey",function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=ye(t.initData),e.h.dispatchEvent(n)}),e.g.D(t,n+"keymessage",function(t){var n=qb(e,t.sessionId);n&&(t=new ci("message",t=(new Map).set("messageType",null==n.keyStatuses.Yb()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))}),e.g.D(t,n+"keyadded",function(t){(t=qb(e,t.sessionId))&&t.ready()}),e.g.D(t,n+"keyerror",function(t){var n=qb(e,t.sessionId);if(n){var o=Error("EME v0.1b key error"),i=t.errorCode;i.systemCode=t.systemCode,o.errorCode=i,!t.sessionId&&n.h?(45==t.systemCode&&(o.message="Unsupported session type."),n.h.reject(o),n.h=null):t.sessionId&&n.g?(n.g.reject(o),n.g=null):(o=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Yb(n,"output-restricted"):Yb(n,1==o?"expired":"internal-error"))}}))}function qb(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Xb(e,t,n){hi.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new oi,this.keyStatuses=new Qb}function Wb(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var o=ve(ln("LOAD_SESSION|"+n));else{var i=ln("PERSISTENT|");o=bn(i,t)}else o=ve(t)}catch(s){return Promise.reject(s)}e.h=new oi;var r=Fb("generateKeyRequest");try{e.j[r](e.i,o)}catch(s){if("InvalidStateError"!=s.name)return e.h=null,Promise.reject(s);new Rt(function(){try{e.j[r](e.i,o)}catch(t){e.h.reject(t),e.h=null}}).Y(.01)}return e.h}function Kb(e,t,n){if(e.g)e.g.then(function(){return Kb(e,t,n)}).catch(function(){return Kb(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var o=rn(n),i=JSON.parse(o);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),o=gn(i.keys[0].k),i=gn(i.keys[0].kid)}else o=ve(n),i=null;var r=Fb("addKey");try{e.j[r](e.i,o,i,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function Yb(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new ci("keystatuseschange"),e.dispatchEvent(t)}function Qb(){this.size=0,this.g=void 0}Fv(Lb,-10),jv.PatchedMediaKeysWebkit=Bb,Bb.install=jb,Gb.prototype.createMediaKeys=function(){var e=new Vb(this.g);return Promise.resolve(e)},Gb.prototype.getConfiguration=function(){return this.h},Vb.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Xb(t,this.l,e),this.i.push(e),e},Vb.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Vb.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},v(Xb,hi),(i=Xb.prototype).ready=function(){Yb(this,"usable"),this.g&&this.g.resolve(),this.g=null},i.generateRequest=function(e,t){return Wb(this,t,null)},i.load=function(e){return"persistent-license"==this.l?Wb(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new oi;return Kb(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Fb("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=Qb.prototype).Yb=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Et.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Et.value();return!(!this.g||!me(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var Jb="",Zb="webkit";function ex(){}function tx(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=ox,Object.defineProperty(t,"disablePictureInPicture",{get:rx,set:sx,enumerable:!0,configurable:!0}),document.exitPictureInPicture=ix,document.addEventListener("webkitpresentationmodechanged",nx,!0))}}function nx(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function ox(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function ix(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function rx(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function sx(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function ax(){}function lx(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=ux))}function ux(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function cx(){}function px(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:dx})}function dx(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function hx(){}function fx(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function mx(){}function gx(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||jt())&&(t.getVideoPlaybackQuality=yx)}}function yx(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function vx(){}function bx(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=xx;else if(6==n)t=wx;else{try{var o=!!xx(1,2,"")}catch(i){o=!1}o&&(t=xx)}t&&(e.VTTCue=function(e,n,o){return t(e,n,o)})}}function xx(t,n,o){return new e.TextTrackCue(t,n,o)}function wx(t,n,o){return new e.TextTrackCue(t+"-"+n+"-"+o,t,n,o)}function Sx(){}Fv(jb),jv.PiPWebkit=ex,ex.install=tx,Fv(tx),jv.RandomUUID=ax,ax.install=lx,Fv(lx),jv.Symbol=cx,cx.install=px,Fv(px),jv.VideoPlayPromise=hx,hx.install=fx,Fv(fx),jv.VideoPlaybackQuality=mx,mx.install=gx,Fv(gx),jv.VTTCue=vx,vx.install=bx,Fv(bx),Sx.prototype.parseInit=function(){},Sx.prototype.setSequenceMode=function(){},Sx.prototype.setManifestType=function(){},Sx.prototype.parseMedia=function(e,t){for(var n=null,o=[],i=(e=p(e=rn(e).split(/\r?\n/))).next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=Tx.exec(i))){var r=kx.exec(i[1]);i=new De(r=60*parseInt(r[1],10)+parseFloat(r[2].replace(",",".")),t.segmentEnd?t.segmentEnd:r+2,i[2]),n&&(n.endTime=r,o.push(n)),n=i}return n&&o.push(n),o},$("shaka.text.LrcTextParser",Sx),Sx.prototype.parseMedia=Sx.prototype.parseMedia,Sx.prototype.setManifestType=Sx.prototype.setManifestType,Sx.prototype.setSequenceMode=Sx.prototype.setSequenceMode,Sx.prototype.parseInit=Sx.prototype.parseInit;var Tx=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,kx=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function Cx(){}function Ax(e,t,n,o,i,r,s,a,l,u,c,d){var h=u;if(Qi(e)){if(!c)return null;var f={tagName:"span",children:[er(e)],attributes:{},parent:null}}else f=e;for(var m=null,g=p(Jx),y=g.next();!y.done&&!(m=Lx(f,"backgroundImage",o,"#",y.value)[0]);y=g.next());g=null;var v=lr(f,Jx,"backgroundImage");if(d&&v&&!v.startsWith("#")&&(y=new st(d),v=new st(v),(y=y.resolve(v).toString())&&(g=y)),("p"==e.tagName||m||g)&&(c=!0),e=c,y="default"==(f.attributes["xml:space"]||(a?"default":"preserve")),a=[],!(v=f.children.every(Qi)))for(var b=p(f.children),x=b.next();!x.done;x=b.next())(x=Ax(x.value,t,n,o,i,r,s,y,l,f,c,d))&&a.push(x);if(o=null!=u,d=er(f),d=f.children.length&&d&&/\S/.test(d),!((x=f.attributes.begin||f.attributes.end||f.attributes.dur)||d||"br"==f.tagName||0!=a.length||o&&!y))return null;for(d=(b=Px(f,n)).start,b=b.end;h&&h.tagName&&"tt"!=h.tagName;)d=(b=Dx(h,n,d,b)).start,b=b.end,h=h.parent;if(null==d&&(d=0),d+=t.periodStart,b=null==b?1/0:b+t.periodStart,d=Math.max(d,t.segmentStart),b=Math.min(b,t.segmentEnd),!x&&0<a.length)for(d=1/0,b=0,n=(t=p(a)).next();!n.done;n=t.next())n=n.value,d=Math.min(d,n.startTime),b=Math.max(b,n.endTime);if("br"==f.tagName)return(i=new De(d,b,"")).lineBreak=!0,i;if(t="",v&&(t=pn(er(f)||""),y&&(t=t.replace(/\s+/g," "))),(t=new De(d,b,t)).nestedCues=a,c||(t.isContainer=!0),l&&(t.cellResolution=l),l=Lx(f,"region",r,"")[0],f.attributes.region&&l&&l.attributes["xml:id"]){var w=l.attributes["xml:id"];t.region=s.filter(function(e){return e.id==w})[0]}return s=l,u&&o&&!f.attributes.region&&!f.attributes.style&&(s=Lx(u,"region",r,"")[0]),function(e,t,n,o,i,r,s,a){if("rtl"==Ix(t,n,r,"direction",s=s||a)&&(e.direction="rtl"),"tb"==(a=Ix(t,n,r,"writingMode",s))||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=ze),(a=Ix(t,n,r,"textAlign",!0))?(e.positionAlign=Kx[a],e.lineAlign=Wx[a],e.textAlign=Be[a.toUpperCase()]):e.textAlign=Ue,(a=Ix(t,n,r,"displayAlign",!0))&&(e.displayAlign=Fe[a.toUpperCase()]),(a=Ix(t,n,r,"color",s))&&(e.color=a),(a=Ix(t,n,r,"backgroundColor",s))&&(e.backgroundColor=a),(a=Ix(t,n,r,"border",s))&&(e.border=a),a=Ix(t,n,r,"fontFamily",s))switch(a){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=a.split(",").filter(function(e){return"default"!=e}).join(",")}switch((a=Ix(t,n,r,"fontWeight",s))&&"bold"==a&&(e.fontWeight=700),a=Ix(t,n,r,"wrapOption",s),e.wrapLine=!a||"noWrap"!=a,(a=Ix(t,n,r,"lineHeight",s))&&a.match(Fx)&&(e.lineHeight=a),(a=Ix(t,n,r,"fontSize",s))&&(a.match(Fx)||a.match(jx))&&(e.fontSize=a),(a=Ix(t,n,r,"fontStyle",s))&&(e.fontStyle=Ye[a.toUpperCase()]),o?(i=o.attributes.imageType||o.attributes.imagetype,a=o.attributes.encoding,o=er(o).trim(),"PNG"==i&&"Base64"==a&&o&&(e.backgroundImage="data:image/png;base64,"+o)):i&&(e.backgroundImage=i),(o=Ix(t,n,r,"textOutline",s))&&((o=o.split(" "))[0].match(Fx)?e.textStrokeColor=e.color:(e.textStrokeColor=o[0],o.shift()),o[0]&&o[0].match(Fx)?e.textStrokeWidth=o[0]:e.textStrokeColor=""),(o=Ix(t,n,r,"letterSpacing",s))&&o.match(Fx)&&(e.letterSpacing=o),(o=Ix(t,n,r,"linePadding",s))&&o.match(Fx)&&(e.linePadding=o),(o=Ix(t,n,r,"opacity",s))&&(e.opacity=parseFloat(o)),(o=Mx(n,r,"textDecoration"))&&Ex(e,o),(o=Rx(t,r,"textDecoration"))&&Ex(e,o),(o=Ix(t,n,r,"textCombine",s))&&(e.textCombineUpright=o),Ix(t,n,r,"ruby",s)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}(t,f,s,m,g,i,e,0==a.length),t}function Ex(e,t){for(var n=(t=p(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Re(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Re(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Re(e.textDecoration,"overline")}}function Ix(e,t,n,o,i){return i=void 0===i||i,(e=Rx(e,n,o))?e:i?Mx(t,n,o):null}function Mx(e,t,n){if(!e)return null;var o=lr(e,Qx,n);return o||_x(e,t,n)}function Rx(e,t,n){var o=lr(e,Qx,n);return o||_x(e,t,n)}function _x(e,t,n){e=Lx(e,"style",t,"");for(var o=null,i=0;i<e.length;i++){var r=sr(e[i],"urn:ebu:tt:style",n);r||(r=lr(e[i],Qx,n)),r||(r=Rx(e[i],t,n)),r&&(o=r)}return o}function Lx(e,t,n,o,i){var r=[];if(!e||1>n.length)return r;var s=e;for(e=null;!e&&!(e=i?sr(s,i,t):s.attributes[t])&&(s=s.parent););if(t=e)for(i=(t=p(t.split(" "))).next();!i.done;i=t.next())for(i=i.value,s=(e=p(n)).next();!s.done;s=e.next())if(o+(s=s.value).attributes["xml:id"]==i){r.push(s);break}return r}function Dx(e,t,n,o){return e=Px(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==o?o=e.end:null!=e.start&&(o+=e.start),{start:n,end:o}}function Px(e,t){var n=Ox(e.attributes.begin,t),o=Ox(e.attributes.end,t);return e=Ox(e.attributes.dur,t),null==o&&null!=e&&(o=n+e),{start:n,end:o}}function Ox(e,t){var n=null;if($x.test(e)){e=$x.exec(e),n=Number(e[1]);var o=Number(e[2]),i=Number(e[3]),r=Number(e[4]);n=(i+=(r+=(Number(e[5])||0)/t.h)/t.frameRate)+60*o+3600*n}else if(Gx.test(e))n=Nx(Gx,e);else if(Vx.test(e))n=Nx(Vx,e);else if(Hx.test(e))e=Hx.exec(e),n=Number(e[1])/t.frameRate;else if(qx.test(e))e=qx.exec(e),n=Number(e[1])/t.g;else if(Xx.test(e))n=Nx(Xx,e);else if(e)throw new St(2,2,2001,"Could not parse cue time range in TTML");return n}function Nx(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Ux(e,t,n,o){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(o),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Wn["application/x-subtitle-lrc"]=function(){return new Sx},Cx.prototype.parseInit=function(){},Cx.prototype.setSequenceMode=function(){},Cx.prototype.setManifestType=function(){},Cx.prototype.parseMedia=function(e,t,n){var o=rn(e);if(e=[],""==o)return e;var i=Ki(o,"tt");if(!i)throw new St(2,2,2005,"Failed to parse TTML.");if(!(o=nr(i,"body")[0]))return[];var r=lr(i,Yx,"frameRate"),s=lr(i,Yx,"subFrameRate"),a=lr(i,Yx,"frameRateMultiplier"),l=lr(i,Yx,"tickRate"),u=lr(i,Yx,"cellResolution"),c=i.attributes["xml:space"]||"default",d=lr(i,Qx,"extent");if("default"!=c&&"preserve"!=c)throw new St(2,2,2005,"Invalid xml:space value: "+c);c="default"==c,r=new Ux(r,s,a,l),u=u&&(u=/^(\d+) (\d+)$/.exec(u))?{dc:parseInt(u[1],10),rows:parseInt(u[2],10)}:null,s=(s=nr(i,"metadata")[0])?s.children:[],a=nr(i,"style"),l=[];for(var h=p(i=nr(i,"region")),f=h.next();!f.done;f=h.next()){var m=f.value;f=new Ae;var g=m.attributes["xml:id"];if(g){f.id=g;var y=null;d&&(y=Bx.exec(d)||zx.exec(d)),g=y?Number(y[1]):null,y=y?Number(y[2]):null;var v,b=Mx(m,a,"extent");if(b){var x=(v=Bx.exec(b))||zx.exec(b);null!=x&&(f.width=Number(x[1]),f.height=Number(x[2]),v||(null!=g&&(f.width=100*f.width/g),null!=y&&(f.height=100*f.height/y)),f.widthUnits=v||null!=g?Ee:0,f.heightUnits=v||null!=y?Ee:0)}(m=Mx(m,a,"origin"))&&null!=(x=(v=Bx.exec(m))||zx.exec(m))&&(f.viewportAnchorX=Number(x[1]),f.viewportAnchorY=Number(x[2]),v?b||(f.width=100-f.viewportAnchorX,f.widthUnits=Ee,f.height=100-f.viewportAnchorY,f.heightUnits=Ee):(null!=y&&(f.viewportAnchorY=100*f.viewportAnchorY/y),null!=g&&(f.viewportAnchorX=100*f.viewportAnchorX/g)),f.viewportAnchorUnits=v||null!=g?Ee:0)}else f=null;f&&l.push(f)}if(Zi(o,"p").length)throw new St(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(d=p(Zi(o,"div"))).next();!h.done;h=d.next())if(Zi(h.value,"span").length)throw new St(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Ax(o,t,r,s,a,i,l,c,u,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},$("shaka.text.TtmlTextParser",Cx),Cx.prototype.parseMedia=Cx.prototype.parseMedia,Cx.prototype.setManifestType=Cx.prototype.setManifestType,Cx.prototype.setSequenceMode=Cx.prototype.setSequenceMode,Cx.prototype.parseInit=Cx.prototype.parseInit;var Bx=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,jx=/^(\d{1,4}(?:\.\d+)?|100)%$/,Fx=/^(\d+px|\d+em|\d*\.?\d+c)$/,zx=/^(\d+)px (\d+)px$/,$x=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Gx=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Vx=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,Hx=/^(\d*(?:\.\d*)?)f$/,qx=/^(\d*(?:\.\d*)?)t$/,Xx=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Wx={left:Ve,center:"center",right:"end",start:Ve,end:"end"},Kx={left:"line-left",center:"center",right:"line-right"},Yx=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Qx=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Jx=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Zx(){this.g=new Cx}function ew(){this.h=!1,this.g="UNKNOWN"}function tw(e){for(var t=p(Object.entries(qe)),n=t.next();!n.done;n=t.next()){var o=p(n.value);n=o.next().value,o=o.next().value;var i=new De(0,0,"");i.color=o,e.set("."+n,i)}for(n=(t=p(Object.entries(Xe))).next();!n.done;n=t.next())n=(o=p(n.value)).next().value,o=o.next().value,(i=new De(0,0,"")).backgroundColor=o,e.set("."+n,i)}function nw(e,t,n){if(e.includes("<")){0===n.size&&tw(n);var o=e;e=[];for(var i=-1,r=0;r<o.length;r++)"<"===o[r]?i=r+1:">"===o[r]&&0<i&&((i=o.substr(i,r-i)).match(aw)&&e.push(i),i=-1);for(r=(e=p(e)).next();!r.done;r=e.next())r=r.value,o=o.replace("<"+r+">",'<div time="'+r+'">'),o+="</div>";e:{r=e=o,i=[];var s=-1;e="",o=!1;for(var a=0;a<r.length;a++)if("/"===r[a]){var u=r.indexOf(">",a);if(-1===u){e=r;break e}if((u=r.substring(a+1,u))&&"v"==u){o=!0;var c=null;if(i.length&&(c=i[i.length-1]),c){if(c===u)e+="/"+u+">";else{if(!c.startsWith("v")){e+=r[a];continue}e+="/"+c+">"}a+=u.length+1}else e+=r[a]}else e+=r[a]}else"<"===r[a]?"v"!=r[s=a+1]&&(s=-1):">"===r[a]&&0<s&&(i.push(r.substr(s,a-s)),s=-1),e+=r[a];for(i=(r=p(i)).next();!i.done;i=r.next())s=(i=i.value).replace(" ",".voice-"),e=(e=e.replace("<"+i+">","<"+s+">")).replace("</"+i+">","</"+s+">"),o||(e+="</"+s+">")}e=function(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(e){return t[e]||""}):e||""}(e);try{var d=Ki("<span>"+e+"</span>","span")}catch(l){}if(d)if(1!=(d=d.children).length||d[0].tagName)for(e=(d=p(d)).next();!e.done;e=d.next())iw(e.value,t,n);else t.payload=pn(e);else t.payload=pn(e)}else t.payload=pn(e)}function ow(e,t){return e&&0<e.length?e:t}function iw(e,t,n){var o=t.clone();if(o.nestedCues=[],o.payload="",o.rubyTag="",o.line=null,o.region=new Ae,o.position=null,o.size=0,e.tagName)for(var i=p(e.tagName.split(/(?=[ .])+/g)),r=i.next();!r.done;r=i.next()){var s=r=r.value;if(s.startsWith(".voice-")){var a=s.split("-").pop();s='v[voice="'+a+'"]',n.has(s)||(s="v[voice="+a+"]")}switch(n.has(s)&&(a=o,s=n.get(s))&&(a.backgroundColor=ow(s.backgroundColor,a.backgroundColor),a.color=ow(s.color,a.color),a.fontFamily=ow(s.fontFamily,a.fontFamily),a.fontSize=ow(s.fontSize,a.fontSize),a.textShadow=ow(s.textShadow,a.textShadow),a.fontWeight=s.fontWeight,a.fontStyle=s.fontStyle,a.opacity=s.opacity,a.rubyTag=s.rubyTag,a.textCombineUpright=s.textCombineUpright,a.wrapLine=s.wrapLine),r){case"br":return o=Pe(o.startTime,o.endTime),void t.nestedCues.push(o);case"b":o.fontWeight=700;break;case"i":o.fontStyle="italic";break;case"u":o.textDecoration.push("underline");break;case"font":(r=e.attributes.color)&&(o.color=r);break;case"div":if(!(r=e.attributes.time))break;(r=sw(new dp(r)))&&(o.startTime=r);break;case"ruby":case"rp":case"rt":o.rubyTag=r}}if(i=e.children,Qi(e)||1==i.length&&Qi(i[0]))for(n=er(e).split("\n"),e=!0,i=(n=p(n)).next();!i.done;i=n.next())i=i.value,e||(e=Pe(o.startTime,o.endTime),t.nestedCues.push(e)),0<i.length&&((e=o.clone()).payload=pn(i),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(o),e=(t=p(i)).next();!e.done;e=t.next())iw(e.value,o,n)}function rw(e,t,n){var o;(o=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=o[1],e.textAlign="middle"==t?Ue:Be[t.toUpperCase()]):(o=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==o[1]?"vertical-lr":"vertical-rl":(o=/^size:([\d.]+)%$/.exec(t))?e.size=Number(o[1]):(o=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(o[1]),o[2]&&(t=o[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":Ne)):(o=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:null}(n,o[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=He[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Ge,e.line=Number(n[1]),n[2]&&(e.lineAlign=He[n[2].toUpperCase()]))}function sw(e){if(null==(e=fp(e,aw)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}Wn["application/ttml+xml"]=function(){return new Cx},Zx.prototype.parseInit=function(e){var t=!1;if((new Oi).box("moov",Ni).box("trak",Ni).box("mdia",Ni).box("minf",Ni).box("stbl",Ni).S("stsd",Ui).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new St(2,2,2007)},Zx.prototype.setSequenceMode=function(){},Zx.prototype.setManifestType=function(){},Zx.prototype.parseMedia=function(e,t,n){var o=this,i=!1,r=[];if((new Oi).box("mdat",Fi(function(e){i=!0,r=r.concat(o.g.parseMedia(e,t,n))})).parse(e,!1),!i)throw new St(2,2,2007);return r},$("shaka.text.Mp4TtmlParser",Zx),Zx.prototype.parseMedia=Zx.prototype.parseMedia,Zx.prototype.setManifestType=Zx.prototype.setManifestType,Zx.prototype.setSequenceMode=Zx.prototype.setSequenceMode,Zx.prototype.parseInit=Zx.prototype.parseInit,Wn['application/mp4; codecs="stpp"']=function(){return new Zx},Wn['application/mp4; codecs="stpp.ttml"']=function(){return new Zx},Wn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Zx},Wn['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new Zx},Wn['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new Zx},Wn['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new Zx},Wn['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new Zx},Wn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Zx},ew.prototype.parseInit=function(){},ew.prototype.setSequenceMode=function(e){this.h=e},ew.prototype.setManifestType=function(e){this.g=e},ew.prototype.parseMedia=function(e,t){var n=(e=(e=rn(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new St(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g)if(this.h){var o=n[0];if(e=o.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=o.match(/MPEGTS:(\d+)/m),!e||!o)throw new St(2,2,2e3);if(null==(e=sw(new dp(e[1]))))throw new St(2,2,2e3);o=Number(o[1]);for(var i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,o+=8589934592;e=t.periodStart+o/9e4-e}else e=t.segmentStart;for(t=[],i=(o=p(n[0].split("\n"))).next();!i.done;i=o.next())if(i=i.value,/^Region:/.test(i)){i=new dp(i);var r=new Ae;mp(i),hp(i);for(var s=mp(i);s;){var a=r,l=s;(s=/^id=(.*)$/.exec(l))?a.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(l))?a.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(l))?(a.height=Number(s[1]),a.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(a.regionAnchorX=Number(s[1]),a.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(a.viewportAnchorX=Number(s[1]),a.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(l)&&(a.scroll="up"),hp(i),s=mp(i)}t.push(r)}for(tw(o=new Map),i=[],r=(n=p(n.slice(1))).next();!r.done;r=n.next()){if((1!=(r=r.value.split("\n")).length||r[0])&&!/^NOTE($|[ \t])/.test(r[0])&&"STYLE"==r[0]){for(a=[],s=-1,l=1;l<r.length;l++)r[l].includes("::cue")&&(a.push([]),s=a.length-1),-1!=s&&(a[s].push(r[l]),r[l].includes("}")&&(s=-1));for(s=(a=p(a)).next();!s.done;s=a.next()){var u=s.value;s="global",(l=u[0].match(/\((.*)\)/))&&(s=l.pop()),l=u.slice(1,-1),u[0].includes("}")&&(u=/\{(.*?)\}/.exec(u[0]))&&(l=u[1].split(";")),(u=o.get(s))||(u=new De(0,0,""));for(var c=!1,d=0;d<l.length;d++){var h=/^\s*([^:]+):\s*(.*)/.exec(l[d]);if(h){var f=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":c=!0,u.backgroundColor=f;break;case"color":c=!0,u.color=f;break;case"font-family":c=!0,u.fontFamily=f;break;case"font-size":c=!0,u.fontSize=f;break;case"font-weight":(700<=parseInt(f,10)||"bold"==f)&&(c=!0,u.fontWeight=700);break;case"font-style":switch(f){case"normal":c=!0,u.fontStyle=Ke;break;case"italic":c=!0,u.fontStyle="italic";break;case"oblique":c=!0,u.fontStyle="oblique"}break;case"opacity":c=!0,u.opacity=parseFloat(f);break;case"text-combine-upright":c=!0,u.textCombineUpright=f;break;case"text-shadow":c=!0,u.textShadow=f;break;case"white-space":c=!0,u.wrapLine="noWrap"!=f}}}c&&o.set(s,u)}}if(c=e,1==(u=r).length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0]||"REGION"==u[0])r=null;else if(r=null,u[0].includes("--\x3e")||(r=u[0],u.splice(0,1)),s=sw(a=new dp(u[0])),d=fp(a,/[ \t]+--\x3e[ \t]+/g),l=sw(a),null==s||null==d||null==l)Y("Failed to parse VTT time code. Cue skipped:",r,u),r=null;else{for(s+=c,l+=c,u=u.slice(1).join("\n").trim(),o.has("global")?((c=o.get("global").clone()).startTime=s,c.endTime=l,c.payload=""):c=new De(s,l,""),hp(a),s=mp(a);s;)rw(c,s,t),hp(a),s=mp(a);nw(u,c,o),null!=r&&(c.id=r),r=c}r&&i.push(r)}return i},$("shaka.text.VttTextParser",ew),ew.prototype.parseMedia=ew.prototype.parseMedia,ew.prototype.setManifestType=ew.prototype.setManifestType,ew.prototype.setSequenceMode=ew.prototype.setSequenceMode,ew.prototype.parseInit=ew.prototype.parseInit;var aw=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function lw(){this.g=null}function uw(e,t,n){var o,i,r;return(new Oi).box("payl",Fi(function(e){o=rn(e)})).box("iden",Fi(function(e){i=rn(e)})).box("sttg",Fi(function(e){r=rn(e)})).parse(e),o?function(e,t,n,o,i){if(o=new De(o,i,""),nw(e,o,new Map),t&&(o.id=t),n)for(e=new dp(n),t=mp(e);t;)rw(o,t,[]),hp(e),t=mp(e);return o}(o,i,r,t,n):null}function cw(){}function pw(e){if(null==(e=fp(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function dw(){this.g=new ew}function hw(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=p((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function fw(){}function mw(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=gw(n))&&(e.color=n),(n=t.BackColour)&&(n=gw(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=je,e.textAlign="start";break;case 2:e.displayAlign=je,e.textAlign=Ue;break;case 3:e.displayAlign=je,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Ue;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Ue;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function gw(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function yw(e){return 3600*((e=ww.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Wn["text/vtt"]=function(){return new ew},Wn['text/vtt; codecs="vtt"']=function(){return new ew},Wn['text/vtt; codecs="wvtt"']=function(){return new ew},lw.prototype.parseInit=function(e){var t=this,n=!1;if((new Oi).box("moov",Ni).box("trak",Ni).box("mdia",Ni).S("mdhd",function(e){e=ks(e.reader,e.version),t.g=e.timescale}).box("minf",Ni).box("stbl",Ni).S("stsd",Ui).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new St(2,2,2008);if(!n)throw new St(2,2,2008)},lw.prototype.setSequenceMode=function(){},lw.prototype.setManifestType=function(){},lw.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new St(2,2,2008);var n,o=0,i=[],r=[],s=!1,a=!1,l=!1,u=null;if((new Oi).box("moof",Ni).box("traf",Ni).S("tfdt",function(e){s=!0,o=Ts(e.reader,e.version).baseMediaDecodeTime}).S("tfhd",function(e){u=Ss(e.reader,e.flags).Yc}).S("trun",function(e){a=!0,i=Cs(e.reader,e.version,e.flags).Wg}).box("mdat",Fi(function(e){l=!0,n=e})).parse(e,!1),!l&&!s&&!a)throw new St(2,2,2008);e=o;for(var c=new Li(n,0),d=p(i),h=d.next();!h.done;h=d.next()){var f=(h=h.value).Jf||u,m=h.ne?o+h.ne:e;e=m+(f||0);var g=0;do{var y=c.P();g+=y;var v=null;"vttc"==$i(c.P())?8<y&&(v=c.qb(y-8)):c.skip(y-8),f&&v&&(y=uw(v,t.periodStart+m/this.g,t.periodStart+e/this.g),r.push(y))}while(h.sampleSize&&g<h.sampleSize)}return r.filter(Qn)},$("shaka.text.Mp4VttParser",lw),lw.prototype.parseMedia=lw.prototype.parseMedia,lw.prototype.setManifestType=lw.prototype.setManifestType,lw.prototype.setSequenceMode=lw.prototype.setSequenceMode,lw.prototype.parseInit=lw.prototype.parseInit,Wn['application/mp4; codecs="wvtt"']=function(){return new lw},cw.prototype.parseInit=function(){},cw.prototype.setSequenceMode=function(){},cw.prototype.setManifestType=function(){},cw.prototype.parseMedia=function(e){var t=rn(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=p(t.split("\n\n"))).next();!n.done;n=t.next()){var o=new dp((n=n.value.split("\n"))[0]),i=pw(o),r=fp(o,/,/g);if(o=pw(o),null==i||null==r||null==o)throw new St(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new De(i,o,n.slice(1).join("\n").trim()))}return e},$("shaka.text.SbvTextParser",cw),cw.prototype.parseMedia=cw.prototype.parseMedia,cw.prototype.setManifestType=cw.prototype.setManifestType,cw.prototype.setSequenceMode=cw.prototype.setSequenceMode,cw.prototype.parseInit=cw.prototype.parseInit,Wn["text/x-subviewer"]=function(){return new cw},dw.prototype.parseInit=function(){},dw.prototype.setSequenceMode=function(){},dw.prototype.setManifestType=function(){},dw.prototype.parseMedia=function(e,t,n){return e=ve(ln(e=hw(e=rn(e)))),this.g.parseMedia(e,t,n)},$("shaka.text.SrtTextParser",dw),dw.srt2webvtt=hw,dw.prototype.parseMedia=dw.prototype.parseMedia,dw.prototype.setManifestType=dw.prototype.setManifestType,dw.prototype.setSequenceMode=dw.prototype.setSequenceMode,dw.prototype.parseInit=dw.prototype.parseInit,Wn["text/srt"]=function(){return new dw},fw.prototype.parseInit=function(){},fw.prototype.setSequenceMode=function(){},fw.prototype.setManifestType=function(){},fw.prototype.parseMedia=function(e){var t="",n="",o=null,i=null;for(i=(e=p(i=rn(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var r=i.value;i=r,(r=vw.exec(r))&&(o=r[1],i=r[2]),"V4 Styles"==o||"V4+ Styles"==o?(t=i,t=n?t+"\n"+i:i):"Events"==o&&(n=n?n+"\n"+i:i)}for(o=[],i=null,e=(t=p(t.split(/\r?\n/))).next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(r=bw.exec(e)))if(e=r[1].trim(),r=r[2].trim(),"Format"==e)i=r.split(xw);else if("Style"==e){e=r.split(xw),r={};for(var s=0;s<i.length&&s<e.length;s++)r[i[s]]=e[s];o.push(r)}for(i=[],t=null,r=(n=p(n.split(/\r?\n/))).next(),e={};!r.done;e={jh:void 0},r=n.next())if(r=r.value,!/^\s*;/.test(r)&&(s=bw.exec(r)))if(r=s[1].trim(),s=s[2].trim(),"Format"==r)t=s.split(xw);else if("Dialogue"==r){s=s.split(xw),r={};for(var a=0;a<t.length&&a<s.length;a++)r[t[a]]=s[a];s=new De(a=yw(r.Start),yw(r.End),s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.jh=r.Style,(e=o.find(function(e){return function(t){return t.Name==e.jh}}(e)))&&mw(s,e),i.push(s)}return i},$("shaka.text.SsaTextParser",fw),fw.prototype.parseMedia=fw.prototype.parseMedia,fw.prototype.setManifestType=fw.prototype.setManifestType,fw.prototype.setSequenceMode=fw.prototype.setSequenceMode,fw.prototype.parseInit=fw.prototype.parseInit;var vw=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,bw=/^\s*([^:]+):\s*(.*)/,xw=/\s*,\s*/,ww=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function Sw(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&0<(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)?{Qd:n,ca:e}:null}function Tw(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=(60&e[t+2])>>>2;if(o>n.length-1)return null;var i=((192&e[t+2])>>>6)+1,r=(1&e[t+2])<<2;return r|=(192&e[t+3])>>>6,{sampleRate:n[o],channelCount:r,codec:"mp4a.40."+i}}function kw(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var o=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(o<=n)&&((t+=o)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function Cw(e){this.i=e,this.h=0,this.g=new Map}function Aw(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var o=63&e[t+4],i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+n];if(t+i>e.length)return null;var r=e[t+6]>>5,s=0;2===r?s+=2:(1&r&&1!==r&&(s+=2),4&r&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var a=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|a>>2,(3&a)<<6|r<<3|s<<2|o>>4,o<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][r]+s,ma:e,ca:i}}function Ew(e,t){if(11===e[t]&&119===e[t+1]){var n,o,i=0,r=5;for(t+=r;0<r;){o=e[t];var s=Math.min(r,8),a=8-s;n=(o&(n=4278190080>>>24+a<<a))>>a,i=i?i<<s|n:n,t+=1,r-=s}if(16>i)return!0}return!1}function Iw(e){this.i=e,this.h=0,this.g=new Map}function Mw(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]))return null;var n=new Rs(e.subarray(t+2));Ls(n,2),Ls(n,3);var o=Ds(n,11)+1<<1,i=Ds(n,2);if(3==i){i=[24e3,22060,16e3][i=Ds(n,2)];var r=3}else i=[48e3,44100,32e3][i],r=Ds(n,2);var s=Ds(n,3),a=Ds(n,1);return n=Ds(n,5),t+o>e.byteLength?null:(e=Math.floor(o*i/(16*[1,2,3,6][r])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,i<<6|n<<1,s<<1|a,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][s]+a,ma:e,ca:o})}function Rw(e){this.i=e,this.h=0,this.g=new Map}function _w(e){for(var t=!1,n=[],o=e.find(function(e){return 7==e.type}),i=!1,r=(e=p(e)).next();!r.done;r=e.next()){var s=!1;switch((r=r.value).type){case 1:s=i=!0;var a=r.data;o&&4<a.length&&(2===(a=zs(new Rs(a)))||4===a||7===a||9===a)&&(t=!0);break;case 5:t=s=i=!0;break;case 6:case 7:case 8:case 12:s=!0;break;case 9:i=s=!0;break;default:s=!1}i&&s&&(s=r.fullData.byteLength,(a=new Uint8Array(4))[0]=s>>24&255,a[1]=s>>16&255,a[2]=s>>8&255,a[3]=255&s,n.push(a),n.push(r.fullData))}return n.length?{data:bn.apply(hn,d(n)),kd:t}:null}Wn["text/x-ssa"]=function(){return new fw},(i=Cw.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&ie(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(jn(t)||"mp4a.40.2")+'"':t},i.getOriginalMimeType=function(){return this.i},i.transmux=function(e,t,n,o){for(var i=ve(e),r=ws(i),s=r.length;s<i.length&&!kw(i,s);s++);if(e=1e3*n.endTime,(r=xs(r)).length&&n&&(r=r.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=r.data),!(r=Tw(i,s)))return Promise.reject(new St(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=r.sampleRate,t.channelsCount=r.channelCount;for(var a=[];s<i.length;){var l=Sw(i,s);if(!l)return Promise.reject(new St(2,3,3018,n?n.M()[0]:null));var u=l.Qd+l.ca;s+u<=i.length&&a.push({data:i.subarray(s+l.Qd,s+u),size:l.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),s+=u}return i=r.sampleRate,e=Math.floor(e*i/1e3),o=new zg([o={id:t.id,type:"audio",codecs:r.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:a},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=$g(o),this.g.set(n,t)),n=Xg(o),this.h++,t=bn(t,n),Promise.resolve(t)},$("shaka.transmuxer.AacTransmuxer",Cw),Cw.prototype.transmux=Cw.prototype.transmux,Cw.prototype.getOriginalMimeType=Cw.prototype.getOriginalMimeType,Cw.prototype.convertCodecs=Cw.prototype.convertCodecs,Cw.prototype.isSupported=Cw.prototype.isSupported,Cw.prototype.destroy=Cw.prototype.destroy,Je("audio/aac",function(){return new Cw("audio/aac")},tt),(i=Iw.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&ie(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t},i.getOriginalMimeType=function(){return this.i},i.transmux=function(e,t,n,o){for(var i=ws(e=ve(e)),r=i.length;r<e.length&&!Ew(e,r);r++);var s=1e3*n.endTime;(i=xs(i)).length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(s=i.data),i=0;for(var a=new Uint8Array([]),l=[];r<e.length;){var u=Aw(e,r);if(!u)return Promise.reject(new St(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,i=u.sampleRate,a=u.ma,l.push({data:e.subarray(r,r+u.ca),size:u.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),r+=u.ca}return e=Math.floor(s*i/1e3),o=new zg([o={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:o,$a:[],ma:a,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:l},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=$g(o),this.g.set(n,t)),n=Xg(o),this.h++,t=bn(t,n),Promise.resolve(t)},$("shaka.transmuxer.Ac3Transmuxer",Iw),Iw.prototype.transmux=Iw.prototype.transmux,Iw.prototype.getOriginalMimeType=Iw.prototype.getOriginalMimeType,Iw.prototype.convertCodecs=Iw.prototype.convertCodecs,Iw.prototype.isSupported=Iw.prototype.isSupported,Iw.prototype.destroy=Iw.prototype.destroy,Je("audio/ac3",function(){return new Iw("audio/ac3")},tt),(i=Rw.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&ie(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},i.getOriginalMimeType=function(){return this.i},i.transmux=function(e,t,n,o){for(var i=ws(e=ve(e)),r=i.length;r<e.length&&2935!=(e[r]<<8|e[r+1]);r++);var s=1e3*n.endTime;(i=xs(i)).length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(s=i.data),i=0;for(var a=new Uint8Array([]),l=[];r<e.length;){var u=Mw(e,r);if(!u)return Promise.reject(new St(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,i=u.sampleRate,a=u.ma,l.push({data:e.subarray(r,r+u.ca),size:u.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),r+=u.ca}return e=Math.floor(s*i/1e3),o=new zg([o={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:o,$a:[],ma:a,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:l},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=$g(o),this.g.set(n,t)),n=Xg(o),this.h++,t=bn(t,n),Promise.resolve(t)},$("shaka.transmuxer.Ec3Transmuxer",Rw),Rw.prototype.transmux=Rw.prototype.transmux,Rw.prototype.getOriginalMimeType=Rw.prototype.getOriginalMimeType,Rw.prototype.convertCodecs=Rw.prototype.convertCodecs,Rw.prototype.isSupported=Rw.prototype.isSupported,Rw.prototype.destroy=Rw.prototype.destroy,Je("audio/ec3",function(){return new Rw("audio/ec3")},tt);var Lw=[100,110,122,244,44,83,86,118,128,138,139,134];function Dw(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),o=e.find(function(e){return 34==e.type});if(!t||!n||!o)return null;var i=function(e){var t=new Rs(e,!0);return js(t),js(t),Ds(t,4),Ds(t,2),Ds(t,6),e=Ds(t,3),t=Bs(t),{yf:e+1,Wf:t}}(t.fullData);e=function(e){js(e=new Rs(e,!0)),js(e);var t=0,n=0,o=0,i=0;Ds(e,4);var r=Ds(e,3);Bs(e);for(var s=Ds(e,2),a=Ds(e,1),l=Ds(e,5),u=js(e),c=js(e),p=js(e),d=js(e),h=js(e),f=js(e),m=js(e),g=js(e),y=js(e),v=js(e),b=js(e),x=[],w=[],S=0;S<r;S++)x.push(Bs(e)),w.push(Bs(e));if(0<r)for(S=r;8>S;S++)Ds(e,2);for(S=0;S<r;S++)x[S]&&Ds(e,88),w[S]&&js(e);Ns(e),3==(x=Ns(e))&&Ds(e,1),w=Ns(e),S=Ns(e),Bs(e)&&(t+=Ns(e),n+=Ns(e),o+=Ns(e),i+=Ns(e));var T=Ns(e),k=Ns(e),C=Ns(e);if(Bs(e))for(var A=0;A<=r;A++)Ns(e),Ns(e),Ns(e);else Ns(e),Ns(e),Ns(e);if(Ns(e),Ns(e),Ns(e),Ns(e),Ns(e),Ns(e),Bs(e)&&Bs(e))for(A=0;4>A;A++)for(var E=0;E<(3===A?2:6);E++)if(Bs(e)){var I=Math.min(64,1<<4+(A<<1));1<A&&Us(e);for(var M=0;M<I;M++)Us(e)}else Ns(e);for(Bs(e),Bs(e),Bs(e)&&(js(e),Ns(e),Ns(e),Bs(e)),A=Ns(e),I=E=0;I<A;I++)if(M=!1,0!==I&&(M=Bs(e)),M){I===A&&Ns(e),Bs(e),Ns(e);for(var R=M=0;R<=E;R++){var _=Bs(e),L=!1;_||(L=Bs(e)),(_||L)&&M++}E=M}else{for(E=(R=Ns(e))+(M=Ns(e)),_=0;_<R;_++)Ns(e),Bs(e);for(R=0;R<M;R++)Ns(e),Bs(e)}if(Bs(e))for(A=Ns(e),E=0;E<A;E++){for(I=0;I<C+4;I++)Ds(e,1);Ds(e,1)}if(A=C=1,E=0,Bs(e),Bs(e),Bs(e)){if(Bs(e)&&(M=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],R=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<(I=js(e))&&16>=I?(C=M[I-1],A=R[I-1]):255===I&&(C=Ds(e,16),A=Ds(e,16))),Bs(e)&&Bs(e),Bs(e)&&(Ds(e,3),Bs(e),Bs(e)&&(js(e),js(e),js(e))),Bs(e)&&(Ns(e),Ns(e)),Bs(e),Bs(e),Bs(e),(I=Bs(e))&&(Ns(e),Ns(e),Ns(e),Ns(e)),Bs(e)&&(Ds(e,32),Ds(e,32),Bs(e)&&Ns(e),Bs(e)))for(R=!1,I=Bs(e),M=Bs(e),(I||M)&&((R=Bs(e))&&(js(e),Ds(e,5),Bs(e),Ds(e,5)),Ds(e,4),Ds(e,4),R&&Ds(e,4),Ds(e,5),Ds(e,5),Ds(e,5)),_=0;_<=r;_++){var D=!0;L=1,Bs(e)||(D=Bs(e));var P=!1;if(D?Ns(e):P=Bs(e),P||(L=Ns(e)+1),I){for(D=0;D<L;D++)Ns(e),Ns(e),R&&(Ns(e),Ns(e));Bs(e)}if(M){for(D=0;D<L;D++)Ns(e),Ns(e),R&&(Ns(e),Ns(e));Bs(e)}}Bs(e)&&(Bs(e),Bs(e),Bs(e),E=Ns(e),Ns(e),Ns(e),Ns(e),Ns(e))}return{Ye:b,df:s,ef:a,cf:l,Ze:u,$e:c,af:p,bf:d,Se:h,Te:f,Ue:m,Ve:g,We:y,Xe:v,$d:E,Le:0,Je:x,He:T,Ge:k,width:w-(t+n)*(1===x||2===x?2:1),height:S-(o+i)*(1===x?2:1),Ri:C,Qi:A}}(n.fullData);var r=function(e){var t=new Rs(e,!0);js(t),js(t),Ns(t),Ns(t),Bs(t),Bs(t),Ds(t,3),Bs(t),Bs(t),Ns(t),Ns(t),Us(t),Bs(t),Bs(t),Bs(t)&&Ns(t),Us(t),Us(t),Bs(t),Bs(t),Bs(t),Bs(t),e=Bs(t),t=Bs(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Bf:n}}(o.fullData);return t=function(e,t,n,o){var i=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return i[0]=1,i[1]=(3&o.df)<<6|(o.ef?1:0)<<5|31&o.cf,i[2]=o.Ze,i[3]=o.$e,i[4]=o.af,i[5]=o.bf,i[6]=o.Se,i[7]=o.Te,i[8]=o.Ue,i[9]=o.Ve,i[10]=o.We,i[11]=o.Xe,i[12]=o.Ye,i[13]=240|(3840&o.$d)>>8,i[14]=255&o.$d,i[15]=252|3&o.Bf,i[16]=252|3&o.Je,i[17]=248|7&o.He,i[18]=248|7&o.Ge,i[19]=0,i[20]=0,i[21]=(3&o.Le)<<6|(7&o.yf)<<3|(o.Wf?1:0)<<2|3,i[22]=3,i[23]=160,i[24]=0,i[25]=1,i[26]=(65280&e.byteLength)>>8,i[27]=255&e.byteLength,i.set(e,28),i[23+(5+e.byteLength)]=161,i[e.byteLength+29]=0,i[e.byteLength+30]=1,i[e.byteLength+31]=(65280&t.byteLength)>>8,i[e.byteLength+32]=255&t.byteLength,i.set(t,e.byteLength+33),i[23+(e.byteLength+10+t.byteLength)]=162,i[e.byteLength+10+t.byteLength+24]=0,i[e.byteLength+10+t.byteLength+25]=1,i[e.byteLength+10+t.byteLength+26]=(65280&n.byteLength)>>8,i[e.byteLength+10+t.byteLength+27]=255&n.byteLength,i.set(n,e.byteLength+10+t.byteLength+28),i}(t.fullData,n.fullData,o.fullData,{yf:i.yf,Wf:i.Wf,df:e.df,ef:e.ef,Ye:e.Ye,cf:e.cf,Ze:e.Ze,$e:e.$e,af:e.af,bf:e.bf,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Le:e.Le,$d:e.$d,Je:e.Je,He:e.He,Ge:e.Ge,Bf:r.Bf}),{height:e.height,width:e.width,wa:t,Ba:e.Ri,Ca:e.Qi}}function Pw(e,t){var n=e[t+1]>>3&3,o=e[t+1]>>1&3,i=e[t+2]>>4&15,r=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==r){var s=e[t+3]>>6;i=1e3*Uw[14*(3===n?3-o:3===o?3:4)+i-1],r=Bw[3*(3===n?0:2===n?1:2)+r],n=jw[n][o];var a=Fw[o],l=Math.floor(n*i/r+(e[t+2]>>1&1))*a,u=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(u=u?parseInt(u[1],10):0)&&87>=u&&2===o&&224e3<=i&&0===s&&(e[t+3]|=128),{sampleRate:r,channelCount:3===s?1:2,ca:l,Pi:8*n*a}}return null}function Ow(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function Nw(e,t){if(t+1<e.length&&Ow(e,t)){var n=Pw(e,t),o=4;return n&&n.ca&&(o=n.ca),(t+=o)===e.length||t+1<e.length&&Ow(e,t)}return!1}var Uw=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Bw=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],jw=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Fw=[0,1,1,4];function zw(e){this.i=e,this.h=0,this.g=new Map}function $w(e){this.h=e,this.g=null}
/*
      		 @license
      		 MSS Transmuxer
      		 Copyright 2015 Dash Industry Forum
      		 SPDX-License-Identifier: BSD-3-Clause
      		*/
function Gw(e){this.h=e,(this.g=gm.get("ISOBoxer")())&&function(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==Hw[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}(this)}function Vw(e,t){for(var n=8,o=0;o<e.boxes.length&&e.boxes[o].type!==t;o++)n+=e.boxes[o].size;return n}(i=zw.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&ie(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},i.getOriginalMimeType=function(){return this.i},i.transmux=function(e,t,n,o){for(var i=ve(e),r=ws(i).length;r<i.length&&!Nw(i,r);r++);var s;for(e=[];r<i.length;){var a=Pw(i,r);if(!a)return Promise.reject(new St(2,3,3018,n?n.M()[0]:null));s||(s=a),r+a.ca<=i.length&&e.push({data:i.subarray(r,r+a.ca),size:a.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),r+=a.ca}return s?(i=9e4*s.Pi/s.sampleRate*this.h,o=new zg([o={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:i,Ya:e},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=$g(o),this.g.set(n,t)),n=Xg(o),this.h++,t=bn(t,n),Promise.resolve(t)):Promise.reject(new St(2,3,3018,n?n.M()[0]:null))},$("shaka.transmuxer.Mp3Transmuxer",zw),zw.prototype.transmux=zw.prototype.transmux,zw.prototype.getOriginalMimeType=zw.prototype.getOriginalMimeType,zw.prototype.convertCodecs=zw.prototype.convertCodecs,zw.prototype.isSupported=zw.prototype.isSupported,zw.prototype.destroy=zw.prototype.destroy,Je("audio/mpeg",function(){return new zw("audio/mpeg")},tt),(i=$w.prototype).destroy=function(){},i.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=jn(e).split(","),n=kn("audio",t);return t=kn("video",t),!(!n||t||"mp3"!=Nn(n))&&ie(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n,o,i){if(this.g?this.g.clearData():this.g=new $s,e=ve(e),"mp3"!=(e=this.g.parse(e)).$c().audio||"audio"!=i)return Promise.reject(new St(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),i=p(e.Tb()),e=i.next();!e.done;e=i.next())if(e=e.value.data)for(t=0;t<e.length;)(o=Pw(e,t))?(t+o.ca<=e.length&&(n=bn(n,e.subarray(t,t+o.ca))),t+=o.ca):t++;return Promise.resolve(n)},$("shaka.transmuxer.MpegTsTransmuxer",$w),$w.prototype.transmux=$w.prototype.transmux,$w.prototype.getOriginalMimeType=$w.prototype.getOriginalMimeType,$w.prototype.convertCodecs=$w.prototype.convertCodecs,$w.prototype.isSupported=$w.prototype.isSupported,$w.prototype.destroy=$w.prototype.destroy,Je("video/mp2t",function(){return new $w("video/mp2t")},nt),(i=Gw.prototype).destroy=function(){},i.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?ie(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ie(t)||ie(e)))},i.convertCodecs=function(e,t){return t.replace("mss/","")},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n){if(!n)return Promise.resolve(ve(e));if(!t.mssPrivateData)return Promise.reject(new St(2,3,3020,n?n.M()[0]:null));try{var o,i=this.g.parseBuffer(e),r=i.fetch("tfhd");r.track_ID=t.id+1;var s=i.fetch("tfdt"),a=i.fetch("traf");null===s&&((s=this.g.createFullBox("tfdt",a,r)).version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var l=i.fetch("trun"),u=i.fetch("tfxd");u&&u._parent.boxes.splice(u._parent.boxes.indexOf(u),1);var c=i.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var p=i.fetch("sepiff");if(null!==p){p.type="senc",p.usertype=void 0;var d=i.fetch("saio");if(null===d){(d=this.g.createFullBox("saio",a)).version=0,d.flags=0,d.entry_count=1,d.offset=[0];var h=this.g.createFullBox("saiz",a);if(h.version=0,h.flags=0,h.sample_count=p.sample_count,h.default_sample_info_size=0,h.sample_info_size=[],2&p.flags)for(o=0;o<p.sample_count;o+=1)h.sample_info_size[o]=10+6*p.entry[o].NumberOfEntries;else h.default_sample_info_size=8}}r.flags&=16777214,r.flags|=131072,l.flags|=1;var f=i.fetch("moof");l.data_offset=f.getLength()+8;var m=i.fetch("saio");null!==m&&(m.offset[0]=Vw(f,"traf")+Vw(a,"senc")+16);var g=ve(i.write());return Promise.resolve(g)}catch(Wr){return Wr instanceof St?Promise.reject(Wr):Promise.reject(new St(2,3,3022,n?n.M()[0]:null))}},$("shaka.transmuxer.MssTransmuxer",Gw),Gw.prototype.transmux=Gw.prototype.transmux,Gw.prototype.getOriginalMimeType=Gw.prototype.getOriginalMimeType,Gw.prototype.convertCodecs=Gw.prototype.convertCodecs,Gw.prototype.isSupported=Gw.prototype.isSupported,Gw.prototype.destroy=Gw.prototype.destroy;var Hw=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function qw(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}Je("mss/audio/mp4",function(){return new Gw("mss/audio/mp4")},tt),Je("mss/video/mp4",function(){return new Gw("mss/video/mp4")},tt),(i=qw.prototype).destroy=function(){this.i.clear(),this.h&&this.h.destroy()},i.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var o=jn(n).split(",");return n=kn("audio",o),o=kn("video",o),!(n&&(n=Nn(n),!Kw.includes(n))||o&&(n=Nn(o),!Yw.includes(n)))&&(t?ie(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ie(t)||ie(e)))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=jn(t).replace("mp4a.40.34","mp3").split(",").map(function(e){return So(e,"audio/mp4")}).map(To).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},i.getOriginalMimeType=function(){return this.l},i.transmux=function(e,t,n,o,i){var r=ve(e);if("audio"==i&&!Hs(r)){for(var s=ws(r),a=s.length;a<r.length;a++)if(Nw(r,a))return Promise.reject(new St(2,3,3018,n?n.M()[0]:null));for(a=s.length;a<r.length;a++)if(kw(r,a))return this.h||(this.h=new Cw("audio/aac")),this.h.transmux(e,t,n,o,i);return Promise.reject(new St(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new $s;var l=this.j.parse(r),u=[],c=l.$c();try{var h=null;if("video"==i){switch(c.video){case"avc":var f=[],m=null,g=[],y=l.Fc();if(!y.length)throw new St(2,3,3023,n?n.M()[0]:null);for(var v=0;v<y.length;v++){var b=y[v],x=b.nalus;g.push.apply(g,d(x));var w,S=_w(x);if(S)null==m&&(m=b.dts),w=v+1<y.length?(y[v+1].dts||0)-(b.dts||0):1<y.length?(b.dts||0)-(y[v-1].dts||0):9e4*(n.endTime-n.startTime),f.push({data:S.data,size:S.data.byteLength,duration:w,cb:Math.round((b.pts||0)-(b.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:S.kd?2:1,hb:S.kd?0:1}})}var T=function(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new Rs(t.data),o=js(n);if(js(n),js(n),Os(n),Lw.includes(o)&&(3===(o=Ns(n))&&Ls(n,1),Os(n),Os(n),Ls(n,1),Bs(n))){o=3!==o?8:12;for(var i=0;i<o;i++)Bs(n)&&Fs(n,6>i?16:64)}if(Os(n),0===(o=Ns(n)))Ns(n);else if(1===o)for(Ls(n,1),Os(n),Os(n),o=Ns(n),i=0;i<o;i++)Os(n);Os(n),Ls(n,1);var r=Ns(n),s=Ns(n),a=Ds(n,1);0===a&&Ls(n,1),Ls(n,1);var l=0,u=0,c=0,p=0;if(Bs(n)&&(l=Ns(n),u=Ns(n),c=Ns(n),p=Ns(n)),i=o=1,Bs(n)&&Bs(n)){var h=js(n);0<h&&16>=h?(o=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][h-1],i=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][h-1]):255===h&&(o=Ds(n,16),i=Ds(n,16))}return n=(2-a)*(s+1)*16-2*c-2*p,r=16*(r+1)-2*l-2*u,l=[],t=t.fullData,l.push(t.byteLength>>>8&255),l.push(255&t.byteLength),l=l.concat.apply(l,d(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,d(e)),{height:n,width:r,wa:e=new Uint8Array([1,l[3],l[4],l[5],255,225].concat(l,[1],t)),Ba:o,Ca:i}}(g);if(!T||null==m)throw new St(2,3,3018,n?n.M()[0]:null);t.height=T.height,t.width=T.width,h={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:o,$a:[],ma:new Uint8Array([]),wa:T.wa,Ba:T.Ba,Ca:T.Ca,data:{rb:this.g,baseMediaDecodeTime:m,Ya:f},stream:t};break;case"hvc":var k=[],C=null,A=[],E=l.Fc();if(!E.length)throw new St(2,3,3023,n?n.M()[0]:null);for(var I=0;I<E.length;I++){var M=E[I],R=M.nalus;A.push.apply(A,d(R));for(var _=!1,L=[],D=!1,P=p(R),O=P.next();!O.done;O=P.next()){var N=O.value;switch(N.type){case 1:case 0:var U=D=!0;break;case 19:case 20:case 21:_=U=D=!0;break;case 32:case 33:case 34:case 39:case 40:U=!0;break;case 35:D=U=!0;break;default:U=!1}if(D&&U){var B=N.fullData.byteLength,j=new Uint8Array(4);j[0]=B>>24&255,j[1]=B>>16&255,j[2]=B>>8&255,j[3]=255&B,L.push(j),L.push(N.fullData)}}var F,z=L.length?{data:bn.apply(hn,d(L)),kd:_}:null;if(z)null==C&&null!=M.dts&&(C=M.dts),F=I+1<E.length?(E[I+1].dts||0)-(M.dts||0):1<E.length?(M.dts||0)-(E[I-1].dts||0):9e4*(n.endTime-n.startTime),k.push({data:z.data,size:z.data.byteLength,duration:F,cb:Math.round((M.pts||0)-(M.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:z.kd?2:1,hb:z.kd?0:1}})}var $=Dw(A);if(!$||null==C)throw new St(2,3,3018,n?n.M()[0]:null);t.height=$.height,t.width=$.width,h={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:o,$a:[],ma:new Uint8Array([]),wa:$.wa,Ba:$.Ba,Ca:$.Ca,data:{rb:this.g,baseMediaDecodeTime:C,Ya:k},stream:t}}h&&(u.push(h),h=null)}if("audio"==i){switch(c.audio){case"aac":for(var G,V=[],H=null,q=p(l.Tb()),X=q.next();!X.done;X=q.next()){var W=X.value,K=W.data;if(K){var Y=0;if(!(G=Tw(K,Y)))throw new St(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=G.sampleRate,t.channelsCount=G.channelCount,null==H&&null!==W.pts&&(H=W.pts);Y<K.length;){var Q=Sw(K,Y);if(Q){var J=Q.Qd+Q.ca;Y+J<=K.length&&V.push({data:K.subarray(Y+Q.Qd,Y+J),size:Q.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Y+=J}else Y++}}}if(!G||null==H){if(!l.Fc().length)throw new St(2,3,3018,n?n.M()[0]:null);H=9e4*n.startTime;var Z=kn("audio",t.codecs.split(","));if(!Z||!t.channelsCount||!t.audioSamplingRate)throw new St(2,3,3018,n?n.M()[0]:null);G={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:Z};var ee=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(Z,t.channelsCount);if(!ee)throw new St(2,3,3018,n?n.M()[0]:null);for(var te=H+9e4*(n.endTime-n.startTime),ne=H;ne<te;)V.push({data:ee,size:ee.byteLength,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),ne+=1024/G.sampleRate*9e4}var oe=G.sampleRate,ie=H/9e4*oe;h={id:t.id,type:"audio",codecs:G.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:oe,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:ie,Ya:V},stream:t};break;case"ac3":for(var re=[],se=0,ae=new Uint8Array([]),le=null,ue=p(l.Tb()),ce=ue.next();!ce.done;ce=ue.next()){var pe=ce.value,de=pe.data;null==le&&null!==pe.pts&&(le=pe.pts);for(var he=0;he<de.length;){var fe=Aw(de,he);fe?(t.audioSamplingRate=fe.sampleRate,t.channelsCount=fe.channelCount,se=fe.sampleRate,ae=fe.ma,re.push({data:de.subarray(he,he+fe.ca),size:fe.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),he+=fe.ca):he++}}if(0==se||0==ae.byteLength||null==le)throw new St(2,3,3018,n?n.M()[0]:null);var me=le/9e4*se;h={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:se,duration:o,$a:[],ma:ae,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:me,Ya:re},stream:t};break;case"ec3":for(var ge=[],ye=0,be=new Uint8Array([]),xe=null,we=p(l.Tb()),Se=we.next();!Se.done;Se=we.next()){var Te=Se.value,ke=Te.data;null==xe&&null!==Te.pts&&(xe=Te.pts);for(var Ce=0;Ce<ke.length;){var Ae=Mw(ke,Ce);Ae?(t.audioSamplingRate=Ae.sampleRate,t.channelsCount=Ae.channelCount,ye=Ae.sampleRate,be=Ae.ma,ge.push({data:ke.subarray(Ce,Ce+Ae.ca),size:Ae.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ce+=Ae.ca):Ce++}}if(0==ye||0==be.byteLength||null==xe)throw new St(2,3,3018,n?n.M()[0]:null);var Ee=xe/9e4*ye;h={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ye,duration:o,$a:[],ma:be,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:Ee,Ya:ge},stream:t};break;case"mp3":for(var Ie,Me=[],Re=null,_e=p(l.Tb()),Le=_e.next();!Le.done;Le=_e.next()){var De=Le.value,Pe=De.data;if(Pe){null==Re&&null!==De.pts&&(Re=De.pts);for(var Oe=0;Oe<Pe.length;){var Ne=Pw(Pe,Oe);Ne?(Ie||(Ie=Ne),Oe+Ne.ca<=Pe.length&&Me.push({data:Pe.subarray(Oe,Oe+Ne.ca),size:Ne.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Oe+=Ne.ca):Oe++}}}if(!Ie||null==Re)throw new St(2,3,3018,n?n.M()[0]:null);var Ue=Ie.sampleRate,Be=Re/9e4*Ue;h={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ue,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:Be,Ya:Me},stream:t};break;case"opus":var je=[],Fe=null,ze=l.F;if(!ze)throw new St(2,3,3018,n?n.M()[0]:null);var $e=[];switch(ze.Ch){case 1:case 2:$e=[0];break;case 0:$e=[255,1,1,0,1];break;case 128:$e=[255,2,0,0,1];break;case 3:$e=[1,2,1,0,2,1];break;case 4:$e=[1,2,2,0,1,2,3];break;case 5:$e=[1,3,2,0,4,1,2,3];break;case 6:$e=[1,4,2,0,4,1,2,3,5];break;case 7:$e=[1,4,2,0,4,1,2,3,5,6];break;case 8:$e=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:$e=[1,1,2,0,1];break;case 131:$e=[1,1,3,0,1,2];break;case 132:$e=[1,1,4,0,1,2,3];break;case 133:$e=[1,1,5,0,1,2,3,4];break;case 134:$e=[1,1,6,0,1,2,3,4,5];break;case 135:$e=[1,1,7,0,1,2,3,4,5,6];break;case 136:$e=[1,1,8,0,1,2,3,4,5,6,7]}for(var Ge=new Uint8Array([0,ze.channelCount,0,0,ze.sampleRate>>>24&255,ze.sampleRate>>>17&255,ze.sampleRate>>>8&255,ze.sampleRate>>>0&255,0,0].concat(d($e))),Ve=ze.sampleRate,He=p(l.Tb()),qe=He.next();!qe.done;qe=He.next()){var Xe=qe.value,We=Xe.data;null==Fe&&null!==Xe.pts&&(Fe=Xe.pts);for(var Ke=0;Ke<We.length;){for(var Ye=!!(16&We[Ke+1]),Qe=!!(8&We[Ke+1]),Je=Ke+2,Ze=0;255===We[Je];)Ze+=255,Je+=1;Ze+=We[Je],Je+=1,Je+=Ye?2:0,Je+=Qe?2:0;var et=We.slice(Je,Je+Ze);je.push({data:et,size:et.byteLength,duration:960,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ke=Je+Ze}}if(0==Ge.byteLength||null==Fe)throw new St(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=ze.sampleRate,t.channelsCount=ze.channelCount;var tt=Fe/9e4*Ve;h={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ve,duration:o,$a:[],ma:Ge,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:tt,Ya:je},stream:t}}h&&(u.push(h),h=null)}}catch(at){return at&&3023==at.code?Promise.resolve(new Uint8Array([])):Promise.reject(at)}if(!u.length)return Promise.reject(new St(2,3,3018,n?n.M()[0]:null));var nt=new zg(u),ot=t.id+"_"+n.i;if(this.i.has(ot))var it=this.i.get(ot);else it=$g(nt),this.i.set(ot,it);var rt=Xg(nt);this.g++;var st=bn(it,rt);return Promise.resolve(st)},$("shaka.transmuxer.TsTransmuxer",qw),qw.prototype.transmux=qw.prototype.transmux,qw.prototype.getOriginalMimeType=qw.prototype.getOriginalMimeType,qw.prototype.convertCodecs=qw.prototype.convertCodecs,qw.prototype.isSupported=qw.prototype.isSupported,qw.prototype.destroy=qw.prototype.destroy;var Xw,Ww,Kw=["aac","ac-3","ec-3","mp3","opus"],Yw=["avc","hevc"];
/*
      		 @license
      		 EME Encryption Scheme Polyfill
      		 Copyright 2019 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/
function Qw(){}function Jw(){Xw||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Xw=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Zw,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Zw(e,t){var n,o=this;return P(function(i){return 1==i.g?(console.assert(o==navigator,'bad "this" for requestMediaKeySystemAccess'),S(i,Xw.call(o,e,t),2)):uS(n=i.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Xw,i.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=eS,i.return(eS.call(o,e,t)))})}function eS(e,t){var n,o,i,r,s,a,l,u,c,d,h,f,m=this;return P(function(g){if(1==g.g){for(console.assert(m==navigator,'bad "this" for requestMediaKeySystemAccess'),n=lS(e),o=[],i=p(t),r=i.next();!r.done;r=i.next())s=r.value,a=tS(s.videoCapabilities,n),l=tS(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!a.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||((u=Object.assign({},s)).videoCapabilities=a,u.audioCapabilities=l,o.push(u));if(!o.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return S(g,Xw.call(m,e,o),2)}return d=g.h,f=h=null,o[0]&&(o[0].videoCapabilities&&(h=o[0].videoCapabilities[0].encryptionScheme),o[0].audioCapabilities&&(f=o[0].audioCapabilities[0].encryptionScheme)),g.return(new aS(d,h,f))})}function tS(e,t){return e?e.filter(function(e){return cS(e.encryptionScheme,t)}):e}function nS(){}function oS(){Ww||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Ww=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=iS,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function iS(e){var t,n,o=this;return P(function(i){switch(i.g){case 1:return console.assert(o==navigator.mediaCapabilities,'bad "this" for decodingInfo'),S(i,Ww.call(o,e),2);case 2:if(t=i.h,!e.keySystemConfiguration)return i.return(t);if((n=t.keySystemAccess)&&uS(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Ww,i.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=rS,n){i.u(3);break}return S(i,sS(e),4);case 4:return t.keySystemAccess=i.h,i.return(t);case 3:return i.return(rS.call(o,e))}})}function rS(e){var t,n,o,i,r,s,a,l=this;return P(function(u){switch(u.g){case 1:return console.assert(l==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=t=null,!e.keySystemConfiguration||(o=e.keySystemConfiguration,i=o.keySystem,n=o.audio&&o.audio.encryptionScheme,t=o.video&&o.video.encryptionScheme,r=lS(i),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},cS(n,r)&&cS(t,r))?S(u,Ww.call(l,e),2):u.return(s);case 2:if((a=u.h).keySystemAccess){a.keySystemAccess=new aS(a.keySystemAccess,t,n),u.u(3);break}if(!e.keySystemConfiguration){u.u(3);break}return S(u,sS(e),5);case 5:a.keySystemAccess=u.h;case 3:return u.return(a)}})}function sS(e){var t,n;return P(function(o){if(1==o.g){var i=e.keySystemConfiguration,r=[],s=[];return i.audio&&r.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:i.audio.encryptionScheme}),i.video&&s.push({robustness:i.video.robustness||"",contentType:e.video.contentType,encryptionScheme:i.video.encryptionScheme}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},r.length&&(i.audioCapabilities=r),s.length&&(i.videoCapabilities=s),t=i,S(o,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=o.h,o.return(n)})}function aS(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function lS(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function uS(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function cS(e,t){return!e||e==t||!("cbcs"!=e&&"cbcs-1-9"!=e||!fS&&!hS)}function pS(){}function dS(){Jw(),oS()}Je("video/mp2t",function(){return new qw("video/mp2t")},ot),$("EmeEncryptionSchemePolyfill",Qw),Qw.install=Jw,$("McEncryptionSchemePolyfill",nS),nS.install=oS,aS.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=p(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(n=(t=p(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},aS.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},$("EncryptionSchemePolyfills",pS),pS.install=dS;var hS=navigator.userAgent.includes("CrKey"),fS=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);void 0!==n&&n.exports&&(n.exports=pS)}.call(n,t,t,void 0),n.shaka)e[o]=n.shaka[o]}()}(gr)),gr);const vr=fr(yr);let br,xr;const wr={playingState:!1},Sr=async e=>{vr.polyfill.installAll(),xr=e,xr||(xr=document.createElement("video"),xr.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",xr.width=window.innerWidth,xr.height=window.innerHeight,br=new vr.Player,await br.attach(xr),xr.autoplay=!1,br.addEventListener("error",e=>{console.error(e)}),document.body.insertBefore(xr,document.body.firstChild))},Tr=async e=>{if(!br||!xr)throw"Player not initialized yet";await br.load(e.streamUrl)},kr=()=>{xr.play().then(()=>{wr.playingState=!0})},Cr=()=>{xr.pause(),wr.playingState=!1},Ar=()=>xr.currentTime,Er=()=>xr.duration,Ir=wr,Mr=async()=>{await br.destroy(),br=null,xr.remove(),xr=null},Rr=Ei.Component("Player",{code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===p?c:t),h.y=1080,h.mount="{y:1}",h.w=1920,h.h=150,h.color={top:"0x00000000",bottom:"0x444444ff"},h.alpha={transition:t.controlsVisibility},a[1].populate(h),!0===p&&(d-=1),e=a[1];const f={};a[2]=this.element({parent:e||"root"},!0===p?c:t),f.x=60,f.y=50,a[2].populate(f),!0===p&&(d-=1),e=a[2];const m={};a[3]=this.element({parent:e||"root"},!0===p?c:t),m.w=60,m.h=60,m.color="0x0087ceeb",m.effects=[{type:"radius",props:{radius:16}}],a[3].populate(m),!0===p&&(d-=1),e=a[3];const g={};a[4]=this.element({parent:e||"root"},!0===p?c:t),g.y=14,g.x=14,g.w=32,g.h=32,g.src=t.playing?"assets/player/pause.png":"assets/player/play.png",a[4].populate(g),!0===p&&(d-=1),e=a[2];const y={};a[5]=this.element({parent:e||"root"},!0===p?c:t),y.y=22,y.x=100,y.w=t.progressLength,y.h=16,y.color="0xffffff80",y.effects=[{type:"radius",props:{radius:8}}],a[5].populate(y),!0===p&&(d-=1),e=a[5];const v={};a[6]=this.element({parent:e||"root"},!0===p?c:t),v.h=16,v.w={transition:{value:t.progress,d:100,f:"ease-in-out"}},v.effects=[{type:"radius",props:{radius:8}}],v.color="0x0087ceeb",a[6].populate(v),!0===p&&(d-=1);const b=n.components&&n.components.Circle||o.Circle;e=a[5];const x={};a[7]=this.element({parent:e||"root"},!0===p?c:t),x.size=28,x.color="0xffffffff",x.y="-6",x.x={transition:{value:t.progress-8,d:100,f:"ease-in-out"}};const w=[];if(void 0!==b)for(let I in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[I]],w.push(b[Symbol.for("config")].props[I]);a[7].populate(x),!0===p&&(d-=1),e=a[7];const S={};let T;if(S.size=28,S.color="0xffffffff",S.y="-6",u={transition:{value:t.progress-8,d:100,f:"ease-in-out"}},!0===Array.isArray(u)&&(u=r(u).slice(0)),S.x=u,l=S.is||"Circle","string"==typeof l){if(T=n.components&&n.components[l]||o[l],!T)throw new Error('Component "Circle" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(T=l);a[8]=T.call(null,{props:S},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],c=a[8],p=!0):e=a[8][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[2];const k={};a[9]=this.element({parent:e||"root"},!0===p?c:t),k.x=1660,k.y=16,a[9].populate(k),!0===p&&(d-=1),e=a[9];const C={};a[10]=this.element({parent:e||"root"},!0===p?c:t),C.content=t.currentTime,C.size=25,C.__textnode=!0,a[10].populate(C),!0===p&&(d-=1),e=a[9];const A={};a[11]=this.element({parent:e||"root"},!0===p?c:t),A.x=70,A.size=25,A.content="/",A.__textnode=!0,a[11].populate(A),!0===p&&(d-=1),e=a[9];const E={};return a[12]=this.element({parent:e||"root"},!0===p?c:t),E.x=85,E.size=25,E.content=t.duration,E.__textnode=!0,a[12].populate(E),!0===p&&(d-=1),a},effects:[function(e,t,n,o,i,r){t[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(e,t,n,o,i,r){t[1].set("alpha",{transition:e.controlsVisibility})},function(e,t,n,o,i,r){t[3].set("effects",[{type:"radius",props:{radius:16}}])},function(e,t,n,o,i,r){t[4].set("src",e.playing?"assets/player/pause.png":"assets/player/play.png")},function(e,t,n,o,i,r){t[5].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[6].set("w",{transition:{value:e.progress,d:100,f:"ease-in-out"}})},function(e,t,n,o,i,r){t[6].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){"undefined"!=typeof skip7&&-1!==skip7.indexOf("x")||t[7].set("x",{transition:{value:e.progress-8,d:100,f:"ease-in-out"}})},function(e,t,n,o,i,r){t[8][Symbol.for("props")].x={transition:{value:e.progress-8,d:100,f:"ease-in-out"}}},function(e,t,n,o,i,r){t[10].set("content",e.currentTime)},function(e,t,n,o,i,r){t[12].set("content",e.duration)}],context:{}},state:()=>({controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}),hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await Sr()},async ready(){await Tr({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const e=e=>new Date(1e3*e).toISOString().substr(14,5),t=Er();t&&(this.duration=e(t),this.progressChunkSize=Math.round(this.progressLength/t*100)/100),this.$setInterval(()=>{const t=Ar();this.currentTime=e(t),this.progress=Math.round(t*this.progressChunkSize)},1e3),this.play()},async destroy(){await Mr()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),1==Ir.playingState?(Cr(),this.playing=!1):(console.log("play!"),kr(),this.playing=!0)},showControls(e){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=e}}}),_r=Ei.Component("Colors",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=1920,l.h=1080,l.color={transition:t.bg},a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.x=20,u.y=20,a[1].populate(u),e=a[1];const c={};a[2]=this.element({parent:e||"root"},t),c.w=100,c.h=100,c.x=0,c.color="0xecfeffff",a[2].populate(c),e=a[1];const p={};a[3]=this.element({parent:e||"root"},t),p.w=100,p.h=100,p.x=120,p.color="0xa5f3fcff",a[3].populate(p),e=a[1];const d={};a[4]=this.element({parent:e||"root"},t),d.w=100,d.h=100,d.x=240,d.color="0x22d3eeff",a[4].populate(d),e=a[1];const h={};a[5]=this.element({parent:e||"root"},t),h.w=100,h.h=100,h.x=360,h.color="0x0891b2ff",a[5].populate(h),e=a[0];const f={};a[6]=this.element({parent:e||"root"},t),f.x=20,f.y=140,a[6].populate(f),e=a[6];const m={};a[7]=this.element({parent:e||"root"},t),m.w=100,m.h=100,m.x=0,m.color="0xecfeffff",a[7].populate(m),e=a[6];const g={};a[8]=this.element({parent:e||"root"},t),g.w=100,g.h=100,g.x=120,g.color="0xa5f3fcff",a[8].populate(g),e=a[6];const y={};a[9]=this.element({parent:e||"root"},t),y.w=100,y.h=100,y.x=240,y.color="0x22d3eeff",a[9].populate(y),e=a[6];const v={};a[10]=this.element({parent:e||"root"},t),v.w=100,v.h=100,v.x=360,v.color="0x0891b2ff",a[10].populate(v),e=a[0];const b={};a[11]=this.element({parent:e||"root"},t),b.x=20,b.y=260,a[11].populate(b),e=a[11];const x={};a[12]=this.element({parent:e||"root"},t),x.w=100,x.h=100,x.x=0,x.color="0xecfeffaa",a[12].populate(x),e=a[11];const w={};a[13]=this.element({parent:e||"root"},t),w.w=100,w.h=100,w.x=120,w.color="0xa5f3fc33",a[13].populate(w),e=a[11];const S={};a[14]=this.element({parent:e||"root"},t),S.w=100,S.h=100,S.x=240,S.color="0x22d3ee20",a[14].populate(S),e=a[11];const T={};a[15]=this.element({parent:e||"root"},t),T.w=100,T.h=100,T.x=360,T.color="0x0891b2ff",a[15].populate(T),e=a[0];const k={};a[16]=this.element({parent:e||"root"},t),k.x=20,k.y=380,a[16].populate(k),e=a[16];const C={};a[17]=this.element({parent:e||"root"},t),C.w=100,C.h=100,C.x=0,C.color="0xecfeffff",a[17].populate(C),e=a[16];const A={};a[18]=this.element({parent:e||"root"},t),A.w=100,A.h=100,A.x=120,A.color="0xa5f3fcff",a[18].populate(A),e=a[16];const E={};a[19]=this.element({parent:e||"root"},t),E.w=100,E.h=100,E.x=240,E.color="0x22d3eeff",a[19].populate(E),e=a[16];const I={};a[20]=this.element({parent:e||"root"},t),I.w=100,I.h=100,I.x=360,I.color="0x0891b2ff",a[20].populate(I),e=a[0];const M={};a[21]=this.element({parent:e||"root"},t),M.x=20,M.y=500,a[21].populate(M),e=a[21];const R={};a[22]=this.element({parent:e||"root"},t),R.w=100,R.h=100,R.x=0,R.color="0xecfeffab",a[22].populate(R),e=a[21];const _={};a[23]=this.element({parent:e||"root"},t),_.w=100,_.h=100,_.x=120,_.color="0xa5f3fc33",a[23].populate(_),e=a[21];const L={};a[24]=this.element({parent:e||"root"},t),L.w=100,L.h=100,L.x=240,L.color="0x22d3ee21",a[24].populate(L),e=a[21];const D={};a[25]=this.element({parent:e||"root"},t),D.w=100,D.h=100,D.x=360,D.color="0x0891b2ff",a[25].populate(D),e=a[0];const P={};a[26]=this.element({parent:e||"root"},t),P.x=20,P.y=620,a[26].populate(P),e=a[26];const O={};a[27]=this.element({parent:e||"root"},t),O.w=100,O.h=100,O.x=0,O.color="0x000000ff",a[27].populate(O),e=a[26];const N={};a[28]=this.element({parent:e||"root"},t),N.w=100,N.h=100,N.x=120,N.color="0xccccccff",a[28].populate(N),e=a[26];const U={};a[29]=this.element({parent:e||"root"},t),U.w=100,U.h=100,U.x=240,U.color="0x889900ff",a[29].populate(U),e=a[26];const B={};a[30]=this.element({parent:e||"root"},t),B.w=100,B.h=100,B.x=360,B.color="0x00ff00ff",a[30].populate(B),e=a[0];const j={};a[31]=this.element({parent:e||"root"},t),j.x=20,j.y=740,a[31].populate(j),e=a[31];const F={};a[32]=this.element({parent:e||"root"},t),F.w=100,F.h=100,F.x=0,F.color="0x000000ff",a[32].populate(F),e=a[31];const z={};a[33]=this.element({parent:e||"root"},t),z.w=100,z.h=100,z.x=120,z.color="0xccccccff",a[33].populate(z),e=a[31];const $={};a[34]=this.element({parent:e||"root"},t),$.w=100,$.h=100,$.x=240,$.color="0x889900ff",a[34].populate($),e=a[31];const G={};a[35]=this.element({parent:e||"root"},t),G.w=100,G.h=100,G.x=360,G.color="0x00ff00ff",a[35].populate(G),e=a[0];const V={};a[36]=this.element({parent:e||"root"},t),V.x=620,V.y=20,a[36].populate(V),e=a[36];const H={};a[37]=this.element({parent:e||"root"},t),H.w=300,H.h=200,H.x=0,H.color={transition:t.color1},a[37].populate(H),e=a[36];const q={};a[38]=this.element({parent:e||"root"},t),q.w=300,q.h=200,q.x=0,q.y=250,q.color={transition:t.color2},a[38].populate(q),e=a[36];const X={};a[39]=this.element({parent:e||"root"},t),X.w=300,X.h=200,X.x=100,X.y=400,X.color={transition:t.color3},a[39].populate(X),e=a[36];const W={};return a[40]=this.element({parent:e||"root"},t),W.w=300,W.h=200,W.x=0,W.y=650,W.color={transition:{value:t.color4,d:1e3,f:"ease-in-out"}},a[40].populate(W),a},effects:[function(e,t,n,o,i,r){t[0].set("color",{transition:e.bg})},function(e,t,n,o,i,r){t[37].set("color",{transition:e.color1})},function(e,t,n,o,i,r){t[38].set("color",{transition:e.color2})},function(e,t,n,o,i,r){t[39].set("color",{transition:e.color3})},function(e,t,n,o,i,r){t[40].set("color",{transition:{value:e.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state:()=>({bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}),input:{enter(){this.color1="#0891b2"===this.color1?"#22d3ee":"#0891b2",this.color2="#dc2626"===this.color2?"#0f0":"#dc2626",this.color3="rgba(251, 191, 36)"===this.color3?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4="#1e3a8a"===this.color4?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let e=0;const t=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{e+=1,e===t.length-1&&(e=0),this.bg=t[e]},2e3)}}}),Lr=Ei.Component("Gradients",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.w=480,l.h=1080,l.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",a[1].populate(l),e=a[0];const u={};a[2]=this.element({parent:e||"root"},t),u.w=480,u.h=1080,u.x=480,u.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",a[2].populate(u),e=a[0];const c={};a[3]=this.element({parent:e||"root"},t),c.w=480,c.h=1080,c.x=960,c.color="{top: '0x0891b2ff', right: '0xf87171ff'}",a[3].populate(c),e=a[0];const p={};return a[4]=this.element({parent:e||"root"},t),p.w=480,p.h=1080,p.x=1440,p.color="{right: '0x008000ff', bottom: '0xffd700ff'}",a[4].populate(p),a},effects:[function(e,t,n,o,i,r){t[1].set("w",480)},function(e,t,n,o,i,r){t[2].set("w",480)},function(e,t,n,o,i,r){t[2].set("x",480)},function(e,t,n,o,i,r){t[3].set("w",480)},function(e,t,n,o,i,r){t[3].set("x",960)},function(e,t,n,o,i,r){t[4].set("w",480)},function(e,t,n,o,i,r){t[4].set("x",1440)}],context:{}}}),Dr=Ei.Component("Transitions",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.x=60,a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.w=200,u.h=200,u.x=50,u.y={transition:t.y},u.color="0xc4b5fdff",a[1].populate(u),e=a[0];const c={};a[2]=this.element({parent:e||"root"},t),c.w=200,c.h=200,c.x=300,c.y={transition:{value:t.y}},c.color="0xa78bfaff",a[2].populate(c),e=a[0];const p={};a[3]=this.element({parent:e||"root"},t),p.w=200,p.h=200,p.x=550,p.y={transition:{value:t.y,duration:1e3,start:t.start,end:t.doneTransition3}},p.color="0x8b5cf6ff",p.ref="bla",a[3].populate(p),e=a[0];const d={};a[4]=this.element({parent:e||"root"},t),d.w=200,d.h=200,d.x=800,d.y={transition:{value:t.y,duration:500,delay:500,start:t.start,end:t.finished}},d.color="0x7c3aedff",a[4].populate(d),e=a[0];const h={};a[5]=this.element({parent:e||"root"},t),h.w=200,h.h=200,h.x=1050,h.y={transition:{value:t.y,easing:"ease-in-out",end:t.finished}},h.color="0x6d28d9ff",a[5].populate(h),e=a[0];const f={};a[6]=this.element({parent:e||"root"},t),f.w=200,f.h=200,f.x=1300,f.y={transition:{value:t.y,duration:3e3,easing:"ease-in-out-back",end:t.finished}},f.color="0x5b21b6ff",a[6].populate(f),e=a[0];const m={};return a[7]=this.element({parent:e||"root"},t),m.w=200,m.h=200,m.x=1550,m.y={transition:{value:t.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},m.color="0x4c1d95ff",a[7].populate(m),a},effects:[function(e,t,n,o,i,r){t[1].set("y",{transition:e.y})},function(e,t,n,o,i,r){t[2].set("y",{transition:{value:e.y}})},function(e,t,n,o,i,r){t[3].set("y",{transition:{value:e.y,duration:1e3,start:e.start,end:e.doneTransition3}})},function(e,t,n,o,i,r){t[4].set("y",{transition:{value:e.y,duration:500,delay:500,start:e.start,end:e.finished}})},function(e,t,n,o,i,r){t[5].set("y",{transition:{value:e.y,easing:"ease-in-out",end:e.finished}})},function(e,t,n,o,i,r){t[6].set("y",{transition:{value:e.y,duration:3e3,easing:"ease-in-out-back",end:e.finished}})},function(e,t,n,o,i,r){t[7].set("y",{transition:{value:e.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state:()=>({y:50}),hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(e,t,n){this.$log.info("Start transition",e.nodeId,t,n)},finished(e,t,n){this.$log.info("Finished transition",e.nodeId,t,n)},go(){this.y=50,this.$setTimeout(()=>{this.y=830},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),Pr=Ei.Component("Alpha",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.y=100,a[1].populate(l),e=a[1];const u={};a[2]=this.element({parent:e||"root"},t),u.w=200,u.h=200,u.x=100,u.color="0xffffffff",u.alpha=.2,a[2].populate(u),e=a[1];const c={};a[3]=this.element({parent:e||"root"},t),c.w=200,c.h=200,c.x=320,c.color="0xffffffff",c.alpha=.4,a[3].populate(c),e=a[1];const p={};a[4]=this.element({parent:e||"root"},t),p.w=200,p.h=200,p.x=540,p.color="0xffffffff",p.alpha=.6,a[4].populate(p),e=a[1];const d={};a[5]=this.element({parent:e||"root"},t),d.w=200,d.h=200,d.x=760,d.color="0xffffffff",d.alpha=.8,a[5].populate(d),e=a[1];const h={};a[6]=this.element({parent:e||"root"},t),h.w=200,h.h=200,h.x=980,h.color="0xffffffff",h.alpha=1,a[6].populate(h),e=a[0];const f={};a[7]=this.element({parent:e||"root"},t),f.w=200,f.h=200,f.x=100,f.y=320,f.color="0xffffffff",f.alpha=t.alpha,a[7].populate(f),e=a[0];const m={};a[8]=this.element({parent:e||"root"},t),m.w=200,m.h=200,m.x=100,m.y=540,m.color="0xffffffff",m.alpha=t.alpha,a[8].populate(m),e=a[0];const g={};a[9]=this.element({parent:e||"root"},t),g.w=200,g.h=200,g.x=100,g.y=760,g.color="0xffffffff",g.alpha={transition:{value:t.alpha,duration:1e3,easing:"ease-in-out-circ"}},a[9].populate(g),e=a[0];const y={};a[10]=this.element({parent:e||"root"},t),y.w=428,y.h=234,y.x=1200,y.y=100,y.src=t.image,y.alpha=1,a[10].populate(y),e=a[0];const v={};a[11]=this.element({parent:e||"root"},t),v.w=428,v.h=234,v.x=1300,v.y=294,v.src=t.image,v.alpha=.4,a[11].populate(v),e=a[0];const b={};a[12]=this.element({parent:e||"root"},t),b.w=428,b.h=234,b.x=1200,b.y=488,b.src=t.image,b.alpha=.1,a[12].populate(b),e=a[0];const x={};a[13]=this.element({parent:e||"root"},t),x.x=400,x.y=400,x.alpha=.2,x.content="Text with alpha applied directly",x.__textnode=!0,a[13].populate(x),e=a[0];const w={};a[14]=this.element({parent:e||"root"},t),w.alpha=.5,w.x=400,w.y=500,a[14].populate(w),e=a[14];const S={};return a[15]=this.element({parent:e||"root"},t),S.content="Text with alpha applied on parent element",S.__textnode=!0,a[15].populate(S),a},effects:[function(e,t,n,o,i,r){t[8].set("alpha",e.alpha)},function(e,t,n,o,i,r){t[9].set("alpha",{transition:{value:e.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(e,t,n,o,i,r){t[10].set("src",e.image)},function(e,t,n,o,i,r){t[11].set("y",294)},function(e,t,n,o,i,r){t[11].set("src",e.image)},function(e,t,n,o,i,r){t[12].set("y",488)},function(e,t,n,o,i,r){t[12].set("src",e.image)}],context:{}},state:()=>({alpha:.5,direction:"up",image:"assets/lightningbolt.png"}),hooks:{ready(){this.$setInterval(()=>{const e="up"===this.direction?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(e,1),.1),1===this.alpha&&(this.direction="down"),.1===this.alpha&&(this.direction="up")},1400)}}}),Or=Ei.Component("Scaling",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.x=100,l.y=100,l.w=150,l.h=150,l.color="0x64748bff",a[1].populate(l),e=a[0];const u={};a[2]=this.element({parent:e||"root"},t),u.x=300,u.y=100,u.w=100,u.h=100,u.color="0x64748bff",u.scale=1.5,a[2].populate(u),e=a[0];const c={};a[3]=this.element({parent:e||"root"},t),c.x=100,c.y=400,c.w=100,c.h=100,c.color="0xb45309ff",c.scale=t.scale,a[3].populate(c),e=a[0];const p={};a[4]=this.element({parent:e||"root"},t),p.x=900,p.y=400,p.w=100,p.h=100,p.src=t.balloon,p.scale={transition:{value:t.scale,easing:"ease-in-out"}},a[4].populate(p),e=a[0];const d={};a[5]=this.element({parent:e||"root"},t),d.x=300,d.y=600,d.w=100,d.h=100,d.color="0x059669ff",d.scale=t.scale2,a[5].populate(d),e=a[5];const h={};a[6]=this.element({parent:e||"root"},t),h.x=10,h.y=10,h.h=60,h.w=80,h.color="0x0369a1ff",a[6].populate(h),e=a[0];const f={};a[7]=this.element({parent:e||"root"},t),f.x=1500,f.y=600,f.w=100,f.h=100,f.color="0x059669ff",f.scale=t.scale2,a[7].populate(f),e=a[7];const m={};return a[8]=this.element({parent:e||"root"},t),m.x=10,m.y=10,m.h=60,m.w=80,m.color="0x0369a1ff",m.scale=t.scale2/2,a[8].populate(m),a},effects:[function(e,t,n,o,i,r){t[4].set("src",e.balloon)},function(e,t,n,o,i,r){t[4].set("scale",{transition:{value:e.scale,easing:"ease-in-out"}})},function(e,t,n,o,i,r){t[5].set("scale",e.scale2)},function(e,t,n,o,i,r){t[7].set("scale",e.scale2)},function(e,t,n,o,i,r){t[8].set("scale",e.scale2/2)}],context:{}},state:()=>({scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}),hooks:{ready(){this.$setInterval(()=>{const e="up"===this.direction?this.scale+.5:0;this.scale=Math.max(Math.min(e,8),0),8===this.scale&&(this.direction="down"),0===this.scale&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=1===this.scale2?3:1},2e3)}}}),Nr=Ei.Component("Rotation",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.y=70,a[1].populate(l),e=a[1];const u={};a[2]=this.element({parent:e||"root"},t),u.x=100,u.y=0,u.w=200,u.h=100,u.color="0xfee2e2ff",u.rotation=0,a[2].populate(u),e=a[1];const c={};a[3]=this.element({parent:e||"root"},t),c.x=100,c.y=150,c.w=200,c.h=100,c.color="0xfecacaff",c.rotation=10,a[3].populate(c),e=a[1];const p={};a[4]=this.element({parent:e||"root"},t),p.x=100,p.y=300,p.w=200,p.h=100,p.color="0xfca5a5ff",p.rotation=20,a[4].populate(p),e=a[1];const d={};a[5]=this.element({parent:e||"root"},t),d.x=100,d.y=450,d.w=200,d.h=100,d.color="0xf87171ff",d.rotation=30,a[5].populate(d),e=a[1];const h={};a[6]=this.element({parent:e||"root"},t),h.x=100,h.y=610,h.w=200,h.h=100,h.color="0xef4444ff",h.rotation=40,a[6].populate(h),e=a[1];const f={};a[7]=this.element({parent:e||"root"},t),f.x=100,f.y=800,f.w=200,f.h=100,f.color="0xdc2626ff",f.rotation=50,a[7].populate(f),e=a[0];const m={};a[8]=this.element({parent:e||"root"},t),m.y=70,m.x=300,a[8].populate(m),e=a[8];const g={};a[9]=this.element({parent:e||"root"},t),g.x=100,g.y=0,g.w=200,g.h=100,g.color="0xfee2e2ff",g.rotation=60,a[9].populate(g),e=a[8];const y={};a[10]=this.element({parent:e||"root"},t),y.x=100,y.y=150,y.w=200,y.h=100,y.color="0xfecacaff",y.rotation=70,a[10].populate(y),e=a[8];const v={};a[11]=this.element({parent:e||"root"},t),v.x=100,v.y=300,v.w=200,v.h=100,v.color="0xfca5a5ff",v.rotation=80,a[11].populate(v),e=a[8];const b={};a[12]=this.element({parent:e||"root"},t),b.x=100,b.y=450,b.w=200,b.h=100,b.color="0xf87171ff",b.rotation=90,a[12].populate(b),e=a[8];const x={};a[13]=this.element({parent:e||"root"},t),x.x=100,x.y=610,x.w=200,x.h=100,x.color="0xef4444ff",x.rotation=100,a[13].populate(x),e=a[8];const w={};a[14]=this.element({parent:e||"root"},t),w.x=100,w.y=800,w.w=200,w.h=100,w.color="0xdc2626ff",w.rotation=100,a[14].populate(w),e=a[0];const S={};a[15]=this.element({parent:e||"root"},t),S.y=70,S.x=600,a[15].populate(S),e=a[15];const T={};a[16]=this.element({parent:e||"root"},t),T.x=100,T.y=0,T.w=200,T.h=100,T.color="0xfee2e2ff",T.rotation=110,a[16].populate(T),e=a[15];const k={};a[17]=this.element({parent:e||"root"},t),k.x=100,k.y=150,k.w=200,k.h=100,k.color="0xfecacaff",k.rotation=120,a[17].populate(k),e=a[15];const C={};a[18]=this.element({parent:e||"root"},t),C.x=100,C.y=300,C.w=200,C.h=100,C.color="0xfca5a5ff",C.rotation=130,a[18].populate(C),e=a[15];const A={};a[19]=this.element({parent:e||"root"},t),A.x=100,A.y=450,A.w=200,A.h=100,A.color="0xf87171ff",A.rotation=140,a[19].populate(A),e=a[15];const E={};a[20]=this.element({parent:e||"root"},t),E.x=100,E.y=610,E.w=200,E.h=100,E.color="0xef4444ff",E.rotation=150,a[20].populate(E),e=a[15];const I={};a[21]=this.element({parent:e||"root"},t),I.x=100,I.y=800,I.w=200,I.h=100,I.color="0xdc2626ff",I.rotation=160,a[21].populate(I),e=a[0];const M={};a[22]=this.element({parent:e||"root"},t),M.y=70,M.x=900,a[22].populate(M),e=a[22];const R={};a[23]=this.element({parent:e||"root"},t),R.x=100,R.y=0,R.w=200,R.h=100,R.color="0xfee2e2ff",R.rotation=170,a[23].populate(R),e=a[22];const _={};a[24]=this.element({parent:e||"root"},t),_.x=100,_.y=150,_.w=200,_.h=100,_.color="0xfecacaff",_.rotation=180,a[24].populate(_),e=a[22];const L={};a[25]=this.element({parent:e||"root"},t),L.x=100,L.y=300,L.w=200,L.h=100,L.color="0xfca5a5ff",L.rotation=190,a[25].populate(L),e=a[22];const D={};a[26]=this.element({parent:e||"root"},t),D.x=100,D.y=450,D.w=200,D.h=100,D.color="0xf87171ff",D.rotation=200,a[26].populate(D),e=a[22];const P={};a[27]=this.element({parent:e||"root"},t),P.x=100,P.y=610,P.w=200,P.h=100,P.color="0xef4444ff",P.rotation=210,a[27].populate(P),e=a[22];const O={};a[28]=this.element({parent:e||"root"},t),O.x=100,O.y=800,O.w=200,O.h=100,O.color="0xdc2626ff",O.rotation=220,a[28].populate(O),e=a[0];const N={};a[29]=this.element({parent:e||"root"},t),N.y=70,N.x=1200,a[29].populate(N),e=a[29];const U={};a[30]=this.element({parent:e||"root"},t),U.x=100,U.y=0,U.w=200,U.h=100,U.color="0xfee2e2ff",U.rotation=230,a[30].populate(U),e=a[29];const B={};a[31]=this.element({parent:e||"root"},t),B.x=100,B.y=150,B.w=200,B.h=100,B.color="0xfecacaff",B.rotation=240,a[31].populate(B),e=a[29];const j={};a[32]=this.element({parent:e||"root"},t),j.x=100,j.y=300,j.w=200,j.h=100,j.color="0xfca5a5ff",j.rotation=250,a[32].populate(j),e=a[29];const F={};a[33]=this.element({parent:e||"root"},t),F.x=100,F.y=450,F.w=200,F.h=100,F.color="0xf87171ff",F.rotation=260,a[33].populate(F),e=a[29];const z={};a[34]=this.element({parent:e||"root"},t),z.x=100,z.y=610,z.w=200,z.h=100,z.color="0xef4444ff",z.rotation=270,a[34].populate(z),e=a[29];const $={};a[35]=this.element({parent:e||"root"},t),$.x=100,$.y=800,$.w=200,$.h=100,$.color="0xdc2626ff",$.rotation=280,a[35].populate($),e=a[0];const G={};a[36]=this.element({parent:e||"root"},t),G.y=70,G.x=1500,a[36].populate(G),e=a[36];const V={};a[37]=this.element({parent:e||"root"},t),V.x=100,V.y=0,V.w=200,V.h=100,V.color="0xfee2e2ff",V.rotation=290,a[37].populate(V),e=a[36];const H={};a[38]=this.element({parent:e||"root"},t),H.x=100,H.y=150,H.w=200,H.h=100,H.color="0xfecacaff",H.rotation=300,a[38].populate(H),e=a[36];const q={};a[39]=this.element({parent:e||"root"},t),q.x=100,q.y=300,q.w=200,q.h=100,q.color="0xfca5a5ff",q.rotation=310,a[39].populate(q),e=a[36];const X={};a[40]=this.element({parent:e||"root"},t),X.x=100,X.y=450,X.w=200,X.h=100,X.color="0xf87171ff",X.rotation=320,a[40].populate(X),e=a[36];const W={};a[41]=this.element({parent:e||"root"},t),W.x=100,W.y=610,W.w=200,W.h=100,W.color="0xef4444ff",W.rotation=330,a[41].populate(W),e=a[36];const K={};a[42]=this.element({parent:e||"root"},t),K.x=100,K.y=800,K.w=200,K.h=100,K.color="0xdc2626ff",K.rotation=340,a[42].populate(K),e=a[0];const Y={};a[43]=this.element({parent:e||"root"},t),Y.x=200,Y.y=200,Y.w=400,Y.h=400,Y.color="0x0891b2ff",Y.rotation=t.rotation1,a[43].populate(Y),e=a[0];const Q={};a[44]=this.element({parent:e||"root"},t),Q.x=800,Q.y=200,Q.w=400,Q.h=400,Q.color="0x0891b2ff",Q.rotation=t.rotation2,a[44].populate(Q),e=a[0];const J={};return a[45]=this.element({parent:e||"root"},t),J.x=1400,J.y=200,J.w=400,J.h=400,J.color="0x0891b2ff",J.rotation={transition:t.rotation3},a[45].populate(J),a},effects:[function(e,t,n,o,i,r){t[44].set("rotation",e.rotation2)},function(e,t,n,o,i,r){t[45].set("rotation",{transition:e.rotation3})}],context:{}},state:()=>({rotation1:38,rotation2:0,rotation3:0}),hooks:{ready(){this.$setInterval(()=>{const e=this.rotation2+10;this.rotation2=e<=360?e:0},800),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,2*this.rotation3)),720===this.rotation3&&(this.rotation3=0)},2e3)}}}),Ur=Ei.Component("KeyInput",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.x=525,l.y=130,a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.w=200,u.h=200,u.color=t.focusColor,u.x=220*t.focusedX,u.y=210*t.focusedY,a[1].populate(u),e=a[0];const c={};a[2]=this.element({parent:e||"root"},t),c.w=180,c.h=180,c.x=10,c.y=10,c.color=t.blockColor,a[2].populate(c),e=a[0];const p={};a[3]=this.element({parent:e||"root"},t),p.w=180,p.h=180,p.x=230,p.y=10,p.color=t.blockColor,a[3].populate(p),e=a[0];const d={};a[4]=this.element({parent:e||"root"},t),d.w=180,d.h=180,d.x=450,d.y=10,d.color=t.blockColor,a[4].populate(d),e=a[0];const h={};a[5]=this.element({parent:e||"root"},t),h.w=180,h.h=180,h.x=670,h.y=10,h.color=t.blockColor,a[5].populate(h),e=a[0];const f={};a[6]=this.element({parent:e||"root"},t),f.w=180,f.h=180,f.x=10,f.y=220,f.color=t.blockColor,a[6].populate(f),e=a[0];const m={};a[7]=this.element({parent:e||"root"},t),m.w=180,m.h=180,m.x=230,m.y=220,m.color=t.blockColor,a[7].populate(m),e=a[0];const g={};a[8]=this.element({parent:e||"root"},t),g.w=180,g.h=180,g.x=450,g.y=220,g.color=t.blockColor,a[8].populate(g),e=a[0];const y={};a[9]=this.element({parent:e||"root"},t),y.w=180,y.h=180,y.x=670,y.y=220,y.color=t.blockColor,a[9].populate(y),e=a[0];const v={};a[10]=this.element({parent:e||"root"},t),v.w=180,v.h=180,v.x=10,v.y=430,v.color=t.blockColor,a[10].populate(v),e=a[0];const b={};a[11]=this.element({parent:e||"root"},t),b.w=180,b.h=180,b.x=230,b.y=430,b.color=t.blockColor,a[11].populate(b),e=a[0];const x={};a[12]=this.element({parent:e||"root"},t),x.w=180,x.h=180,x.x=450,x.y=430,x.color=t.blockColor,a[12].populate(x),e=a[0];const w={};a[13]=this.element({parent:e||"root"},t),w.w=180,w.h=180,w.x=670,w.y=430,w.color=t.blockColor,a[13].populate(w),e=a[0];const S={};a[14]=this.element({parent:e||"root"},t),S.w=180,S.h=180,S.x=10,S.y=640,S.color=t.blockColor,a[14].populate(S),e=a[0];const T={};a[15]=this.element({parent:e||"root"},t),T.w=180,T.h=180,T.x=230,T.y=640,T.color=t.blockColor,a[15].populate(T),e=a[0];const k={};a[16]=this.element({parent:e||"root"},t),k.w=180,k.h=180,k.x=450,k.y=640,k.color=t.blockColor,a[16].populate(k),e=a[0];const C={};return a[17]=this.element({parent:e||"root"},t),C.w=180,C.h=180,C.x=670,C.y=640,C.color=t.blockColor,a[17].populate(C),a},effects:[function(e,t,n,o,i,r){t[1].set("color",e.focusColor)},function(e,t,n,o,i,r){t[1].set("x",220*e.focusedX)},function(e,t,n,o,i,r){t[1].set("y",210*e.focusedY)},function(e,t,n,o,i,r){t[2].set("color",e.blockColor)},function(e,t,n,o,i,r){t[3].set("color",e.blockColor)},function(e,t,n,o,i,r){t[4].set("color",e.blockColor)},function(e,t,n,o,i,r){t[5].set("color",e.blockColor)},function(e,t,n,o,i,r){t[6].set("color",e.blockColor)},function(e,t,n,o,i,r){t[7].set("color",e.blockColor)},function(e,t,n,o,i,r){t[8].set("color",e.blockColor)},function(e,t,n,o,i,r){t[9].set("color",e.blockColor)},function(e,t,n,o,i,r){t[10].set("color",e.blockColor)},function(e,t,n,o,i,r){t[11].set("color",e.blockColor)},function(e,t,n,o,i,r){t[12].set("color",e.blockColor)},function(e,t,n,o,i,r){t[13].set("color",e.blockColor)},function(e,t,n,o,i,r){t[14].set("color",e.blockColor)},function(e,t,n,o,i,r){t[15].set("color",e.blockColor)},function(e,t,n,o,i,r){t[16].set("color",e.blockColor)},function(e,t,n,o,i,r){t[17].set("color",e.blockColor)}],context:{}},state:()=>({focusedX:0,focusedY:0,colorscheme:"yellow"}),computed:{blockColor(){return this.colorscheme,"yellow"===this.colorscheme?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme,"yellow"===this.colorscheme?"#facc15":"#38bdf8"}},input:{left(){const e=this.focusedX-1;this.focusedX=Math.max(e,0)},right(){const e=this.focusedX+1;this.focusedX=Math.min(e,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme="yellow"===this.colorscheme?"blue":"yellow"},any(e){const t=parseInt(e.key);isNaN(t)?this.parent.$focus(e):(this.focusedX=Math.max(0,(t-1)%4),this.focusedY=Math.max(0,Math.ceil(t/4)-1))}}}),Br=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],jr=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],Fr=Ei.Component("Texts",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.x=100,l.y=100,a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.content="Default text",u["@loaded"]=t.textLoaded&&t.textLoaded.bind(t),u.__textnode=!0,a[1].populate(u),e=a[0];const c={};a[2]=this.element({parent:e||"root"},t),c.content="123456",c.x=400,c.__textnode=!0,a[2].populate(c),e=a[0];const p={};a[3]=this.element({parent:e||"root"},t),p.content="Text with a different fontsize",p.size=t.size,p.y=120,p.font="raleway",p.__textnode=!0,a[3].populate(p),e=a[0];const d={};a[4]=this.element({parent:e||"root"},t),d.content="Text with a different color",d.size=50,d.color=t.color,d.y=250,d.__textnode=!0,a[4].populate(d),e=a[0];const h={};a[5]=this.element({parent:e||"root"},t),h.content="Letterspacing",h.size=50,h.color="0x38bdf8ff",h.y=450,h.letterspacing=40,h.__textnode=!0,a[5].populate(h),e=a[0];const f={};a[6]=this.element({parent:e||"root"},t),f.w=800,f.h=100,f.y=550,f.color="0x94a3b8ff",a[6].populate(f),e=a[6];const m={};a[7]=this.element({parent:e||"root"},t),m.content="Text align center",m.size=50,m.y=15,m.color="0xbae6fdff",m.align="center",m.maxwidth=800,m.__textnode=!0,a[7].populate(m),e=a[0];const g={};a[8]=this.element({parent:e||"root"},t),g.w=800,g.h=200,g.x=900,g.y=550,g.color="0x94a3b8ff",a[8].populate(g),e=a[8];const y={};a[9]=this.element({parent:e||"root"},t),y.content=t.longText,y.size=40,y.color="0xbae6fdff",y.maxwidth=800,y.maxlines=5,y.textoverflow="!!!",y.__textnode=!0,a[9].populate(y),e=a[0];const v={};a[10]=this.element({parent:e||"root"},t),v.w=800,v.h=120,v.x=900,v.y=800,v.color="0x94a3b8ff",a[10].populate(v),e=a[10];const b={};a[11]=this.element({parent:e||"root"},t),b.content=t.longText,b.size=40,b.color="0xbae6fdff",b.maxwidth=800,b.maxlines=2,b.lineheight=60,b.textoverflow=!1,b.__textnode=!0,a[11].populate(b),e=a[0];const x={};a[12]=this.element({parent:e||"root"},t),x.content=t.character,x.size=50,x.color=t.color,x.y=750,x.font="opensans",x.__textnode=!0,a[12].populate(x),e=a[0];const w={};a[13]=this.element({parent:e||"root"},t),w.x=1200,w.y=300,a[13].populate(w),e=a[13];const S={};a[14]=this.element({parent:e||"root"},t),S.rotation={transition:t.rotation},S.pivot=0,S.content="Hello",S.__textnode=!0,a[14].populate(S),e=a[13];const T={};a[15]=this.element({parent:e||"root"},t),T.x=150,T.rotation={transition:t.rotation},T.pivot=.5,T.content="World",T.__textnode=!0,a[15].populate(T),e=a[13];const k={};a[16]=this.element({parent:e||"root"},t),k.x=300,k.rotation={transition:t.rotation},k.pivot=1,k.content="!!",k.__textnode=!0,a[16].populate(k),e=a[0];const C={};a[17]=this.element({parent:e||"root"},t),C.x=500,C.y=700,a[17].populate(C),e=a[17];const A=[];let E,I;const M=(n=[],o,s)=>{const a=r(n),l=new Set;let u=a.length;const c={};E=c.from||0,I="to"in c?c.to:a.length;for(;u--;)a[u],u<I&&u>=E&&l.add(""+u);let p=s.length;for(;p--;)if(!1===l.has(s[p])){const e=s[p];o[18][e]&&o[18][e].destroy(),delete o[18][e]}s.length=0;const d=a.length,h=[];for(let r=0;r<d;r++){if(r<E||r>=I)continue;const n=Object.create(t);e=o[17],n.text=a[r],n.index=r,n.key=""+r,s.push(n.key),e=o[17],void 0===o[18]&&(o[18]={});const l={};void 0===o[18][n.key]&&(o[18][n.key]=this.element({parent:e||"root"},t)),l.content=n.text,l.y=50*n.index,l.__textnode=!0,void 0===o[18][n.key].nodeId&&o[18][n.key].populate(l);let u=()=>{o[18][n.key].set("y",50*n.index)};i(u,null),h.push(u),t[Symbol.for("effects")].push(u)}return h};let R;const _=()=>{t[Symbol.for("removeGlobalEffects")](R),R=null,R=M(t.texts,a,A)};t[Symbol.for("effects")].push(_),i(_,["texts"]);const L=()=>{t.text;for(let e=0;e<t.texts.length;e++){if(e<E||e>=I)continue;const n={};n.index=e,n.text=t.texts[e],n.key=e,a[18][n.key].set("content",n.text)}};return t[Symbol.for("effects")].push(L),i(L),a},effects:[function(e,t,n,o,i,r){t[3].set("size",e.size)},function(e,t,n,o,i,r){t[4].set("color",e.color)},function(e,t,n,o,i,r){t[12].set("content",e.character)},function(e,t,n,o,i,r){t[12].set("color",e.color)},function(e,t,n,o,i,r){t[14].set("rotation",{transition:e.rotation})},function(e,t,n,o,i,r){t[15].set("rotation",{transition:e.rotation})},function(e,t,n,o,i,r){t[16].set("rotation",{transition:e.rotation})}],context:{}},state:()=>({color:Br[0],size:10,character:jr[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}),hooks:{ready(){let e=0;this.$setInterval(()=>{e++,e>Br.length-1&&(e=0),this.color=Br[e],this.size=10*(2*e+1),this.rotation+=30},1e3);let t=0;this.$setInterval(()=>{t++,t>jr.length-1&&(t=0),this.character=jr[t]},1400)}},methods:{textLoaded(e){this.$log.info(`Text loaded with w: ${e.w} and h: ${e.h}`)}}}),zr=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],$r=Ei.Component("Images",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.src="assets/lightningbolt.png",l.w=428,l.h=234,l.x=100,l.y=100,a[1].populate(l),e=a[0];const u={};a[2]=this.element({parent:e||"root"},t),u.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",u.w=428,u.h=234,u.x=100,u.y=400,a[2].populate(u),e=a[0];const c={};a[3]=this.element({parent:e||"root"},t),c.src=t.image,c.x=100,c.y=700,c["@loaded"]=t.imageLoaded&&t.imageLoaded.bind(t),a[3].populate(c),e=a[0];const p={};a[4]=this.element({parent:e||"root"},t),p.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",p.src="assets/lightningbolt.png",p.w=428,p.h=234,p.x=600,p.y=100,a[4].populate(p),e=a[0];const d={};a[5]=this.element({parent:e||"root"},t),d.x=600,d.y=400,d.w=428,d.h=234,d.clipping=t.clipping,a[5].populate(d),e=a[5];const h={};a[6]=this.element({parent:e||"root"},t),h.src="assets/lightningbolt.png",h.w=856,h.h=468,a[6].populate(h),e=a[0];const f={};return a[7]=this.element({parent:e||"root"},t),f.color=t.color,f.src="assets/lightningbolt.png",f.w=428,f.h=234,f.x=1100,f.y=100,a[7].populate(f),a},effects:[function(e,t,n,o,i,r){t[3].set("src",e.image)},function(e,t,n,o,i,r){t[5].set("clipping",e.clipping)},function(e,t,n,o,i,r){t[7].set("color",e.color)}],context:{}},state:()=>({image:zr[0],clipping:!0,color:"red"}),hooks:{ready(){this.$setInterval(()=>{this.image=this.image===zr[0]?zr[1]:zr[0],this.clipping=!this.clipping,this.color="red"===this.color?"blue":"red"},2e3)}},methods:{imageLoaded(e){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${e.w} and h: ${e.h}`)}}}),Gr=t("S",Ei.Component("Square",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};return a[0]=this.element({parent:e||"root"},t),l.w={transition:t.size},l.h={transition:t.size},l.color={transition:t.color},a[0].populate(l),a},effects:[function(e,t,n,o,i,r){t[0].set("w",{transition:e.size})},function(e,t,n,o,i,r){t[0].set("h",{transition:e.size})},function(e,t,n,o,i,r){t[0].set("color",{transition:e.color})}],context:{}},props:[{key:"size",default:80}],state:()=>({color:"#86198f"}),watch:{size(e,t){this.$log.info(`Size changed from ${t} to ${e}`),this.color="#86198f"===this.color?"#9d174d":"#86198f"}}})),Vr=Ei.Component("Card",{components:{Square:Gr},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;const d={};a[0]=this.element({parent:e||"root"},!0===c?u:t),d.w=t.w,d.h=t.h,d.color="0x0891b2ff",a[0].populate(d),!0===c&&(p-=1);const h=n.components&&n.components.Square||o.Square;e=a[0];const f={};a[1]=this.element({parent:e||"root"},!0===c?u:t),f.x=80,f.y=80;const m=[];if(void 0!==h)for(let T in h[Symbol.for("config")].props)delete f[h[Symbol.for("config")].props[T]],m.push(h[Symbol.for("config")].props[T]);a[1].populate(f),!0===c&&(p-=1),e=a[1];const g={};let y;if(g.x=80,g.y=80,l=g.is||"Square","string"==typeof l){if(y=n.components&&n.components[l]||o[l],!y)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(y=l);a[2]=y.call(null,{props:g},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],u=a[2],c=!0):e=a[2][Symbol.for("children")][0],!0===c&&0===p&&(c=!1);const v=n.components&&n.components.Square||o.Square;e=a[0];const b={};a[3]=this.element({parent:e||"root"},!0===c?u:t),b.x=20,b.y=20,b.size=40;const x=[];if(void 0!==v)for(let T in v[Symbol.for("config")].props)delete b[v[Symbol.for("config")].props[T]],x.push(v[Symbol.for("config")].props[T]);a[3].populate(b),!0===c&&(p-=1),e=a[3];const w={};let S;if(w.x=20,w.y=20,w.size=40,l=w.is||"Square","string"==typeof l){if(S=n.components&&n.components[l]||o[l],!S)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(S=l);return a[4]=S.call(null,{props:w},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],u=a[4],c=!0):e=a[4][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),a},effects:[],context:{}},props:["size"],computed:{w(){return this.size,"large"===this.size?400:200},h(){return this.size,"large"===this.size?500:300}}}),Hr=Ei.Component("Components",{components:{Square:Gr,Card:Vr},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1);const h=n.components&&n.components.Square||o.Square;e=a[0];const f={};a[1]=this.element({parent:e||"root"},!0===p?c:t),f.x=100,f.y=100,f.size=50;const m=[];if(void 0!==h)for(let ne in h[Symbol.for("config")].props)delete f[h[Symbol.for("config")].props[ne]],m.push(h[Symbol.for("config")].props[ne]);a[1].populate(f),!0===p&&(d-=1),e=a[1];const g={};let y;if(g.x=100,g.y=100,g.size=50,l=g.is||"Square","string"==typeof l){if(y=n.components&&n.components[l]||o[l],!y)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(y=l);a[2]=y.call(null,{props:g},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],c=a[2],p=!0):e=a[2][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const v=n.components&&n.components.Square||o.Square;e=a[0];const b={};a[3]=this.element({parent:e||"root"},!0===p?c:t),b.x=100,b.y=200,b.size=100;const x=[];if(void 0!==v)for(let ne in v[Symbol.for("config")].props)delete b[v[Symbol.for("config")].props[ne]],x.push(v[Symbol.for("config")].props[ne]);a[3].populate(b),!0===p&&(d-=1),e=a[3];const w={};let S;if(w.x=100,w.y=200,w.size=100,l=w.is||"Square","string"==typeof l){if(S=n.components&&n.components[l]||o[l],!S)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(S=l);a[4]=S.call(null,{props:w},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],c=a[4],p=!0):e=a[4][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const T=n.components&&n.components.Square||o.Square;e=a[0];const k={};a[5]=this.element({parent:e||"root"},!0===p?c:t),k.x=100,k.y=350,k.size=200;const C=[];if(void 0!==T)for(let ne in T[Symbol.for("config")].props)delete k[T[Symbol.for("config")].props[ne]],C.push(T[Symbol.for("config")].props[ne]);a[5].populate(k),!0===p&&(d-=1),e=a[5];const A={};let E;if(A.x=100,A.y=350,A.size=200,l=A.is||"Square","string"==typeof l){if(E=n.components&&n.components[l]||o[l],!E)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(E=l);a[6]=E.call(null,{props:A},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],c=a[6],p=!0):e=a[6][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const I=n.components&&n.components.Square||o.Square;e=a[0];const M={};a[7]=this.element({parent:e||"root"},!0===p?c:t),M.x={transition:t.x},M.y=600,M.size=50;const R=[];if(void 0!==I)for(let ne in I[Symbol.for("config")].props)delete M[I[Symbol.for("config")].props[ne]],R.push(I[Symbol.for("config")].props[ne]);a[7].populate(M),!0===p&&(d-=1),e=a[7];const _={};let L;if(u={transition:t.x},!0===Array.isArray(u)&&(u=r(u).slice(0)),_.x=u,_.y=600,_.size=50,l=_.is||"Square","string"==typeof l){if(L=n.components&&n.components[l]||o[l],!L)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(L=l);a[8]=L.call(null,{props:_},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],c=a[8],p=!0):e=a[8][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const D=n.components&&n.components.Card||o.Card;e=a[0];const P={};a[9]=this.element({parent:e||"root"},!0===p?c:t),P.x=500,P.y=100;const O=[];if(void 0!==D)for(let ne in D[Symbol.for("config")].props)delete P[D[Symbol.for("config")].props[ne]],O.push(D[Symbol.for("config")].props[ne]);a[9].populate(P),!0===p&&(d-=1),e=a[9];const N={};let U;if(N.x=500,N.y=100,l=N.is||"Card","string"==typeof l){if(U=n.components&&n.components[l]||o[l],!U)throw new Error('Component "Card" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(U=l);a[10]=U.call(null,{props:N},a[9],t),a[10][Symbol.for("slots")][0]?(e=a[10][Symbol.for("slots")][0],c=a[10],p=!0):e=a[10][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const B=n.components&&n.components.Card||o.Card;e=a[0];const j={};a[11]=this.element({parent:e||"root"},!0===p?c:t),j.x=500,j.y=500,j.size="large";const F=[];if(void 0!==B)for(let ne in B[Symbol.for("config")].props)delete j[B[Symbol.for("config")].props[ne]],F.push(B[Symbol.for("config")].props[ne]);a[11].populate(j),!0===p&&(d-=1),e=a[11];const z={};let $;if(z.x=500,z.y=500,z.size="large",l=z.is||"Card","string"==typeof l){if($=n.components&&n.components[l]||o[l],!$)throw new Error('Component "Card" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&($=l);a[12]=$.call(null,{props:z},a[11],t),a[12][Symbol.for("slots")][0]?(e=a[12][Symbol.for("slots")][0],c=a[12],p=!0):e=a[12][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[0];const G={};a[13]=this.element({parent:e||"root"},!0===p?c:t),G.x=1e3,G.y=100,a[13].populate(G),!0===p&&(d-=1),e=a[13];const V={};a[14]=this.element({parent:e||"root"},!0===p?c:t),V.content="Dynamic components",V.__textnode=!0,a[14].populate(V),!0===p&&(d-=1);const H=n.components&&n.components.Component||o.Component;e=a[13];const q={};a[15]=this.element({parent:e||"root"},!0===p?c:t),q.is=t.dynamicComponent,q.y=100,q.color="0x0000ffff";const X=[];if(void 0!==H)for(let ne in H[Symbol.for("config")].props)delete q[H[Symbol.for("config")].props[ne]],X.push(H[Symbol.for("config")].props[ne]);a[15].populate(q),!0===p&&(d-=1),e=a[15];const W={};let K;if(W.is=t.dynamicComponent,W.y=100,W.color="0x0000ffff",l=W.is||"Component","string"==typeof l){if(K=n.components&&n.components[l]||o[l],!K)throw new Error('Component "Component" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(K=l);a[16]=K.call(null,{props:W},a[15],t),a[16][Symbol.for("slots")][0]?(e=a[16][Symbol.for("slots")][0],c=a[16],p=!0):e=a[16][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[13];const Y=[];let Q,J;const Z=(s=[],a,h)=>{const f=r(s),m=new Set;let g=f.length;const y={}||{};Q=y.from||0,J="to"in y?y.to:f.length;for(;g--;)f[g],g<J&&g>=Q&&m.add(""+g);let v=h.length;for(;v--;)if(!1===m.has(h[v])){const e=h[v];a[17][e]&&a[17][e].destroy(),delete a[17][e],a[18][e]&&a[18][e].destroy(),delete a[18][e]}h.length=0;const b=f.length,x=[];for(let w=0;w<b;w++){if(w<Q||w>=J)continue;const s=Object.create(t);e=a[13],s.bla=f[w],s.index=w,s.key=""+w,h.push(s.key);const m=n.components&&n.components.Component||o.Component;void 0===a[17]&&(a[17]={});const g={};void 0===a[17][s.key]&&(a[17][s.key]=this.element({parent:e||"root"},!0===p?c:t)),g.is=s.bla,g.x=205*s.index,g.y=300;const y=[];if(void 0!==m)for(let e in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[e]],y.push(m[Symbol.for("config")].props[e]);void 0===a[17][s.key].nodeId&&(a[17][s.key].populate(g),!0===p&&(d-=1)),void 0===a[18]&&(a[18]={}),e=a[17][s.key];const v={};if(void 0===a[18][s.key]){let i;if(v.is=s.bla,u=205*s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),v.x=u,v.y=300,l=v.is||"Component","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Component" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[18][s.key]=i.call(null,{props:v},a[17][s.key],t),a[18][s.key][Symbol.for("slots")][0]?(e=a[18][s.key][Symbol.for("slots")][0],c=a[18][s.key],p=!0):e=a[18][s.key][Symbol.for("children")][0]}let b=()=>{void 0!==y&&-1!==y.indexOf("x")||a[17][s.key].set("x",205*s.index)};i(b,null),x.push(b),t[Symbol.for("effects")].push(b),a[18][s.key][Symbol.for("props")].x=205*s.index}return x};let ee;const te=()=>{t[Symbol.for("removeGlobalEffects")](ee),ee=null,ee=Z(t.dynamicComponents,a,Y)};return t[Symbol.for("effects")].push(te),i(te,["dynamicComponents"]),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip7&&-1!==skip7.indexOf("x")||t[7].set("x",{transition:e.x})},function(e,t,n,o,i,r){t[8][Symbol.for("props")].x={transition:e.x}}],context:{}},state:()=>({x:100,dynamicComponent:ur,dynamicComponents:["Square","Card","Square",ur],toggle:!1,size:50}),hooks:{ready(){this.$setInterval(()=>{this.x=100===this.x?250:100,this.size=50===this.size?200:50},2e3)}}}),qr=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],Xr=Ei.Component("ForLoop",{components:{Square:Gr},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===p?c:t),d.y=20,a[1].populate(d),e=a[1];const h=[];let f,m;const g=(n=[],o,i)=>{const s=r(n),a=new Set;let l=s.length;const u={}||{};f=u.from||0,m="to"in u?u.to:s.length;for(;l--;)s[l],l<m&&l>=f&&a.add(""+l);let d=i.length;for(;d--;)if(!1===a.has(i[d])){const e=i[d];o[2][e]&&o[2][e].destroy(),delete o[2][e]}i.length=0;const h=s.length;for(let r=0;r<h;r++){if(r<f||r>=m)continue;const n=Object.create(t);e=o[1],n.item=s[r],n[void 0]=r,n.key=""+r,i.push(n.key),e=o[1],void 0===o[2]&&(o[2]={});const a={};void 0===o[2][n.key]&&(o[2][n.key]=this.element({parent:e||"root"},!0===p?c:t)),a.w=80,a.h=80,a.x=n.item,a.color="0x4d7c0fff",void 0===o[2][n.key].nodeId&&o[2][n.key].populate(a)}return[]};let y;const v=()=>{t[Symbol.for("removeGlobalEffects")](y),y=null,y=g(t.collection1,a,h)};t[Symbol.for("effects")].push(v),i(v,["collection1"]),e=a[0];const b={};a[3]=this.element({parent:e||"root"},!0===p?c:t),b.y=120,a[3].populate(b),e=a[3];const x=[];let w,S;const T=(n=[],o,s)=>{const a=r(n),l=new Set;let u=a.length;const d={}||{};w=d.from||0,S="to"in d?d.to:a.length;for(;u--;){const e=a[u];u<S&&u>=w&&l.add(""+e.id)}let h=s.length;for(;h--;)if(!1===l.has(s[h])){const e=s[h];o[4][e]&&o[4][e].destroy(),delete o[4][e]}s.length=0;const f=a.length,m=[];for(let r=0;r<f;r++){if(r<w||r>=S)continue;const n=Object.create(t);e=o[3],n.item=a[r],n.index=r,n.key=""+n.item.id,s.push(n.key),e=o[3],void 0===o[4]&&(o[4]={});const l={};void 0===o[4][n.key]&&(o[4][n.key]=this.element({parent:e||"root"},!0===p?c:t)),l.w=80,l.h=80,l.x=n.item.x*n.index,l.color=n.item.color,void 0===o[4][n.key].nodeId&&o[4][n.key].populate(l);let u=()=>{o[4][n.key].set("x",n.item.x*n.index)};i(u,null),m.push(u),t[Symbol.for("effects")].push(u)}return m};let k;const C=()=>{t[Symbol.for("removeGlobalEffects")](k),k=null,k=T(t.collection2,a,x)};t[Symbol.for("effects")].push(C),i(C,["collection2"]),e=a[0];const A={};a[5]=this.element({parent:e||"root"},!0===p?c:t),A.y=220,a[5].populate(A),e=a[5];const E=[];let I,M;const R=(n=[],o,s)=>{const a=r(n),l=new Set;let u=a.length;const d={}||{};I=d.from||0,M="to"in d?d.to:a.length;for(;u--;)a[u],u<M&&u>=I&&l.add(""+u);let h=s.length;for(;h--;)if(!1===l.has(s[h])){const e=s[h];o[6][e]&&o[6][e].destroy(),delete o[6][e]}s.length=0;const f=a.length,m=[];for(let r=0;r<f;r++){if(r<I||r>=M)continue;const n=Object.create(t);e=o[5],n.item=a[r],n[void 0]=r,n.key=""+r,s.push(n.key),e=o[5],void 0===o[6]&&(o[6]={});const l={};void 0===o[6][n.key]&&(o[6][n.key]=this.element({parent:e||"root"},!0===p?c:t)),l.w=80,l.h=80,l.x=n.item.x,l.color=n.item.color,void 0===o[6][n.key].nodeId&&o[6][n.key].populate(l);let u=()=>{o[6][n.key].set("x",n.item.x)};i(u,null),m.push(u),t[Symbol.for("effects")].push(u)}return m};let _;const L=()=>{t[Symbol.for("removeGlobalEffects")](_),_=null,_=R(t.collection3,a,E)};t[Symbol.for("effects")].push(L),i(L,["collection3"]),e=a[0];const D={};a[7]=this.element({parent:e||"root"},!0===p?c:t),D.y=320,a[7].populate(D),e=a[7];const P=[];let O,N;const U=(s=[],a,d)=>{const h=r(s),f=new Set;let m=h.length;const g={}||{};O=g.from||0,N="to"in g?g.to:h.length;for(;m--;)h[m],m<N&&m>=O&&f.add(""+m);let y=d.length;for(;y--;)if(!1===f.has(d[y])){const e=d[y];a[8][e]&&a[8][e].destroy(),delete a[8][e],a[9][e]&&a[9][e].destroy(),delete a[9][e]}d.length=0;const v=h.length,b=[];for(let x=0;x<v;x++){if(x<O||x>=N)continue;const s=Object.create(t);e=a[7],s.item=h[x],s.index=x,s.key=""+x,d.push(s.key);const f=n.components&&n.components.Square||o.Square;void 0===a[8]&&(a[8]={});const m={};void 0===a[8][s.key]&&(a[8][s.key]=this.element({parent:e||"root"},!0===p?c:t)),m.x=s.item.x*s.index,m.ref="square"+s.index,m.alpha=s.alpha;const g=[];if(void 0!==f)for(let e in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[e]],g.push(f[Symbol.for("config")].props[e]);void 0===a[8][s.key].nodeId&&a[8][s.key].populate(m),void 0===a[9]&&(a[9]={}),e=a[8][s.key];const y={};if(void 0===a[9][s.key]){let i;if(u=s.item.x*s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.x=u,u="square"+s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.ref=u,u=s.alpha,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.alpha=u,l=y.is||"Square","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[9][s.key]=i.call(null,{props:y},a[8][s.key],t),a[9][s.key][Symbol.for("slots")][0]?(e=a[9][s.key][Symbol.for("slots")][0],c=a[9][s.key],p=!0):e=a[9][s.key][Symbol.for("children")][0]}let v=()=>{void 0!==g&&-1!==g.indexOf("x")||a[8][s.key].set("x",s.item.x*s.index)};i(v,null),b.push(v),t[Symbol.for("effects")].push(v);let w=()=>{void 0!==g&&-1!==g.indexOf("ref")||a[8][s.key].set("ref","square"+s.index)};i(w,null),b.push(w),t[Symbol.for("effects")].push(w),a[9][s.key][Symbol.for("props")].x=s.item.x*s.index,a[9][s.key][Symbol.for("props")].ref="square"+s.index}return b};let B;const j=()=>{t[Symbol.for("removeGlobalEffects")](B),B=null,B=U(t.collection2,a,P)};t[Symbol.for("effects")].push(j),i(j,["collection2"]);const F=()=>{t.alpha;for(let e=0;e<t.collection2.length;e++){if(e<O||e>=N)continue;const n={};n.index=e,n.item=t.collection2[e],n.key=e,"undefined"!=typeof skip8&&-1!==skip8.indexOf("alpha")||a[8][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(F),i(F);const z=()=>{t.alpha;for(let e=0;e<t.collection2.length;e++){if(e<O||e>=N)continue;const n={};n.index=e,n.item=t.collection2[e],n.key=e,a[9][n.key][Symbol.for("props")].alpha=t.alpha}};t[Symbol.for("effects")].push(z),i(z),e=a[0];const $={};a[10]=this.element({parent:e||"root"},!0===p?c:t),$.y=420,a[10].populate($),e=a[10];const G=[];let V,H;const q=(s=[],a,d)=>{const h=r(s),f=new Set;let m=h.length;const g={}||{};V=g.from||0,H="to"in g?g.to:h.length;for(;m--;){const e=h[m];m<H&&m>=V&&f.add(""+e.color)}let y=d.length;for(;y--;)if(!1===f.has(d[y])){const e=d[y];a[11][e]&&a[11][e].destroy(),delete a[11][e],a[12][e]&&a[12][e].destroy(),delete a[12][e]}d.length=0;const v=h.length,b=[];for(let x=0;x<v;x++){if(x<V||x>=H)continue;const s=Object.create(t);e=a[10],s.item=h[x],s[void 0]=x,s.key=""+s.item.color,d.push(s.key);const f=n.components&&n.components.Square||o.Square;void 0===a[11]&&(a[11]={});const m={};void 0===a[11][s.key]&&(a[11][s.key]=this.element({parent:e||"root"},!0===p?c:t)),m.x=s.item.x,m.alpha=s.alpha;const g=[];if(void 0!==f)for(let e in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[e]],g.push(f[Symbol.for("config")].props[e]);void 0===a[11][s.key].nodeId&&a[11][s.key].populate(m),void 0===a[12]&&(a[12]={}),e=a[11][s.key];const y={};if(void 0===a[12][s.key]){let i;if(u=s.item.x,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.x=u,u=s.alpha,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.alpha=u,l=y.is||"Square","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[12][s.key]=i.call(null,{props:y},a[11][s.key],t),a[12][s.key][Symbol.for("slots")][0]?(e=a[12][s.key][Symbol.for("slots")][0],c=a[12][s.key],p=!0):e=a[12][s.key][Symbol.for("children")][0]}let v=()=>{void 0!==g&&-1!==g.indexOf("x")||a[11][s.key].set("x",s.item.x)};i(v,null),b.push(v),t[Symbol.for("effects")].push(v),a[12][s.key][Symbol.for("props")].x=s.item.x}return b};let X;const W=()=>{t[Symbol.for("removeGlobalEffects")](X),X=null,X=q(t.collection3,a,G)};t[Symbol.for("effects")].push(W),i(W,["collection3"]);const K=()=>{t.alpha;for(let e=0;e<t.collection3.length;e++){if(e<V||e>=H)continue;const n={};n[void 0]=e,n.item=t.collection3[e],n.key=n.item.color,"undefined"!=typeof skip11&&-1!==skip11.indexOf("alpha")||a[11][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(K),i(K);const Y=()=>{t.alpha;for(let e=0;e<t.collection3.length;e++){if(e<V||e>=H)continue;const n={};n[void 0]=e,n.item=t.collection3[e],n.key=n.item.color,a[12][n.key][Symbol.for("props")].alpha=t.alpha}};t[Symbol.for("effects")].push(Y),i(Y),e=a[0];const Q={};a[13]=this.element({parent:e||"root"},!0===p?c:t),Q.y=520,a[13].populate(Q),e=a[13];const J=[];let Z,ee;const te=(n=[],o,i)=>{const s=r(n),a=new Set;let l=s.length;const u={}||{};Z=u.from||0,ee="to"in u?u.to:s.length;for(;l--;)s[l],l<ee&&l>=Z&&a.add(""+l);let d=i.length;for(;d--;)if(!1===a.has(i[d])){const e=i[d];o[14][e]&&o[14][e].destroy(),delete o[14][e]}i.length=0;const h=s.length;for(let r=0;r<h;r++){if(r<Z||r>=ee)continue;const n=Object.create(t);e=o[13],n.item=s[r],n[void 0]=r,n.key=""+r,i.push(n.key),e=o[13],void 0===o[14]&&(o[14]={});const a={};void 0===o[14][n.key]&&(o[14][n.key]=this.element({parent:e||"root"},!0===p?c:t)),a.w=80,a.h=80,a.x=n.item,a.color="0xeab308ff",a.alpha=n.alpha,void 0===o[14][n.key].nodeId&&o[14][n.key].populate(a)}return[]};let ne;const oe=()=>{t[Symbol.for("removeGlobalEffects")](ne),ne=null,ne=te(t.collection1,a,J)};t[Symbol.for("effects")].push(oe),i(oe,["collection1"]);const ie=()=>{t.item;for(let e=0;e<t.collection1.length;e++){if(e<Z||e>=ee)continue;const n={};n[void 0]=e,n.item=t.collection1[e],n.key=e,a[14][n.key].set("x",n.item)}};t[Symbol.for("effects")].push(ie),i(ie);const re=()=>{t.alpha;for(let e=0;e<t.collection1.length;e++){if(e<Z||e>=ee)continue;const n={};n[void 0]=e,n.item=t.collection1[e],n.key=e,a[14][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(re),i(re),e=a[0];const se={};a[15]=this.element({parent:e||"root"},!0===p?c:t),se.y=620,a[15].populate(se),e=a[15];const ae=[];let le,ue;const ce=(n=[],o,s)=>{const a=r(n),l=new Set;let u=a.length;const d={}||{};le=d.from||0,ue="to"in d?d.to:a.length;for(;u--;){const e=a[u];u<ue&&u>=le&&l.add(""+e.id)}let h=s.length;for(;h--;)if(!1===l.has(s[h])){const e=s[h];o[16][e]&&o[16][e].destroy(),delete o[16][e]}s.length=0;const f=a.length,m=[];for(let r=0;r<f;r++){if(r<le||r>=ue)continue;const n=Object.create(t);e=o[15],n.item=a[r],n[void 0]=r,n.key=""+n.item.id,s.push(n.key),e=o[15],void 0===o[16]&&(o[16]={});const l={};void 0===o[16][n.key]&&(o[16][n.key]=this.element({parent:e||"root"},!0===p?c:t)),l.w=80,l.h=80,l.x=n.item.x,l.color=n.item.color,l.alpha=n.alpha,void 0===o[16][n.key].nodeId&&o[16][n.key].populate(l);let u=()=>{o[16][n.key].set("x",n.item.x)};i(u,null),m.push(u),t[Symbol.for("effects")].push(u)}return m};let pe;const de=()=>{t[Symbol.for("removeGlobalEffects")](pe),pe=null,pe=ce(t.collection2,a,ae)};t[Symbol.for("effects")].push(de),i(de,["collection2"]);const he=()=>{t.alpha;for(let e=0;e<t.collection2.length;e++){if(e<le||e>=ue)continue;const n={};n[void 0]=e,n.item=t.collection2[e],n.key=n.item.id,a[16][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(he),i(he),e=a[0];const fe={};a[17]=this.element({parent:e||"root"},!0===p?c:t),fe.y=720,a[17].populate(fe),e=a[17];const me=[];let ge,ye;const ve=(n=[],o,s)=>{const a=r(n),l=new Set;let u=a.length;const d={}||{};ge=d.from||0,ye="to"in d?d.to:a.length;for(;u--;){const e=a[u];u<ye&&u>=ge&&l.add(""+e.id)}let h=s.length;for(;h--;)if(!1===l.has(s[h])){const e=s[h];o[18][e]&&o[18][e].destroy(),delete o[18][e]}s.length=0;const f=a.length,m=[];for(let r=0;r<f;r++){if(r<ge||r>=ye)continue;const n=Object.create(t);e=o[17],n.item=a[r],n[void 0]=r,n.key=""+n.item.id,s.push(n.key),e=o[17],void 0===o[18]&&(o[18]={});const l={};void 0===o[18][n.key]&&(o[18][n.key]=this.element({parent:e||"root"},!0===p?c:t)),l.w=80,l.h=80,l.x=n.item.x,l.color="0x06b6d4ff",void 0===o[18][n.key].nodeId&&o[18][n.key].populate(l);let u=()=>{o[18][n.key].set("x",n.item.x)};i(u,null),m.push(u),t[Symbol.for("effects")].push(u)}return m};let be;const xe=()=>{t[Symbol.for("removeGlobalEffects")](be),be=null,be=ve(t.collection4,a,me)};t[Symbol.for("effects")].push(xe),i(xe,["collection4"]),e=a[0];const we={};a[19]=this.element({parent:e||"root"},!0===p?c:t),we.y=720,we.x=700,a[19].populate(we),e=a[19];const Se=[];let Te,ke;const Ce=(n=[],o,s)=>{const a=r(n),l=new Set;let u=a.length;const d={}||{};Te=d.from||0,ke="to"in d?d.to:a.length;for(;u--;)a[u],u<ke&&u>=Te&&l.add(""+u);let h=s.length;for(;h--;)if(!1===l.has(s[h])){const e=s[h];o[20][e]&&o[20][e].destroy(),delete o[20][e]}s.length=0;const f=a.length,m=[];for(let r=0;r<f;r++){if(r<Te||r>=ke)continue;const n=Object.create(t);e=o[19],n.item=a[r],n[void 0]=r,n.key=""+r,s.push(n.key),e=o[19],void 0===o[20]&&(o[20]={});const l={};void 0===o[20][n.key]&&(o[20][n.key]=this.element({parent:e||"root"},!0===p?c:t)),l.w=80,l.h=80,l.x=n.item.x,l.color="0x8b5cf6ff",void 0===o[20][n.key].nodeId&&o[20][n.key].populate(l);let u=()=>{o[20][n.key].set("x",n.item.x)};i(u,null),m.push(u),t[Symbol.for("effects")].push(u)}return m};let Ae;const Ee=()=>{t[Symbol.for("removeGlobalEffects")](Ae),Ae=null,Ae=Ce(t.collection4,a,Se)};t[Symbol.for("effects")].push(Ee),i(Ee,["collection4"]),e=a[0];const Ie={};a[21]=this.element({parent:e||"root"},!0===p?c:t),Ie.y=920,a[21].populate(Ie),e=a[21];const Me=[];let Re,_e;const Le=(s=[],a,d)=>{const h=r(s),f=new Set;let m=h.length;const g={}||{};Re=g.from||0,_e="to"in g?g.to:h.length;for(;m--;){const e=h[m];m<_e&&m>=Re&&f.add(""+e.id)}let y=d.length;for(;y--;)if(!1===f.has(d[y])){const e=d[y];a[22][e]&&a[22][e].destroy(),delete a[22][e],a[23][e]&&a[23][e].destroy(),delete a[23][e]}d.length=0;const v=h.length,b=[];for(let x=0;x<v;x++){if(x<Re||x>=_e)continue;const s=Object.create(t);e=a[21],s.item=h[x],s[void 0]=x,s.key=""+s.item.id,d.push(s.key);const f=n.components&&n.components.Square||o.Square;void 0===a[22]&&(a[22]={});const m={};void 0===a[22][s.key]&&(a[22][s.key]=this.element({parent:e||"root"},!0===p?c:t)),m.w=80,m.h=80,m.x=s.item.x;const g=[];if(void 0!==f)for(let e in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[e]],g.push(f[Symbol.for("config")].props[e]);void 0===a[22][s.key].nodeId&&a[22][s.key].populate(m),void 0===a[23]&&(a[23]={}),e=a[22][s.key];const y={};if(void 0===a[23][s.key]){let i;if(y.w=80,y.h=80,u=s.item.x,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.x=u,l=y.is||"Square","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[23][s.key]=i.call(null,{props:y},a[22][s.key],t),a[23][s.key][Symbol.for("slots")][0]?(e=a[23][s.key][Symbol.for("slots")][0],c=a[23][s.key],p=!0):e=a[23][s.key][Symbol.for("children")][0]}let v=()=>{void 0!==g&&-1!==g.indexOf("x")||a[22][s.key].set("x",s.item.x)};i(v,null),b.push(v),t[Symbol.for("effects")].push(v),a[23][s.key][Symbol.for("props")].x=s.item.x}return b};let De;const Pe=()=>{t[Symbol.for("removeGlobalEffects")](De),De=null,De=Le(t.collection4,a,Me)};t[Symbol.for("effects")].push(Pe),i(Pe,["collection4"]),e=a[0];const Oe={};a[24]=this.element({parent:e||"root"},!0===p?c:t),Oe.y=920,Oe.x=700,a[24].populate(Oe),e=a[24];const Ne=[];let Ue,Be;const je=(s=[],a,d)=>{const h=r(s),f=new Set;let m=h.length;const g={}||{};Ue=g.from||0,Be="to"in g?g.to:h.length;for(;m--;)h[m],m<Be&&m>=Ue&&f.add(""+m);let y=d.length;for(;y--;)if(!1===f.has(d[y])){const e=d[y];a[25][e]&&a[25][e].destroy(),delete a[25][e],a[26][e]&&a[26][e].destroy(),delete a[26][e]}d.length=0;const v=h.length,b=[];for(let x=0;x<v;x++){if(x<Ue||x>=Be)continue;const s=Object.create(t);e=a[24],s.item=h[x],s[void 0]=x,s.key=""+x,d.push(s.key);const f=n.components&&n.components.Square||o.Square;void 0===a[25]&&(a[25]={});const m={};void 0===a[25][s.key]&&(a[25][s.key]=this.element({parent:e||"root"},!0===p?c:t)),m.w=80,m.h=80,m.x=s.item.x;const g=[];if(void 0!==f)for(let e in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[e]],g.push(f[Symbol.for("config")].props[e]);void 0===a[25][s.key].nodeId&&a[25][s.key].populate(m),void 0===a[26]&&(a[26]={}),e=a[25][s.key];const y={};if(void 0===a[26][s.key]){let i;if(y.w=80,y.h=80,u=s.item.x,!0===Array.isArray(u)&&(u=r(u).slice(0)),y.x=u,l=y.is||"Square","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[26][s.key]=i.call(null,{props:y},a[25][s.key],t),a[26][s.key][Symbol.for("slots")][0]?(e=a[26][s.key][Symbol.for("slots")][0],c=a[26][s.key],p=!0):e=a[26][s.key][Symbol.for("children")][0]}let v=()=>{void 0!==g&&-1!==g.indexOf("x")||a[25][s.key].set("x",s.item.x)};i(v,null),b.push(v),t[Symbol.for("effects")].push(v),a[26][s.key][Symbol.for("props")].x=s.item.x}return b};let Fe;const ze=()=>{t[Symbol.for("removeGlobalEffects")](Fe),Fe=null,Fe=je(t.collection4,a,Ne)};return t[Symbol.for("effects")].push(ze),i(ze,["collection4"]),a},effects:[],context:{}},state:()=>({collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:qr[0]},{id:"block2",x:100,color:qr[1]},{id:"block3",x:200,color:qr[2]},{id:"block4",x:300,color:qr[3]},{id:"block5",x:400,color:qr[4]},{id:"block6",x:500,color:qr[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}),hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=qr[5],this.collection2[1].color=qr[4],this.collection2[2].color=qr[3],this.collection2[3].color=qr[2],this.collection2[4].color=qr[1],this.collection2[5].color=qr[0]},4e3);let e=0;const t=this.$setInterval(()=>{this.collection3.push({x:100*e,color:qr[e]}),e++,e===qr.length&&clearInterval(t)},1e3);this.$setInterval(()=>{this.alpha=.5===this.alpha?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),Wr=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],Kr=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],Yr=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],Qr=e=>Math.round(1e3*Math.random())%e;let Jr=0;const Zr=()=>({id:Jr++,text:`${Wr[Qr(Wr.length)]} ${Kr[Qr(Kr.length)]} ${Yr[Qr(Yr.length)]}`}),es=Ei.Component("LegendItem",{code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),!0===c&&(p-=1);const d=n.components&&n.components.Circle||o.Circle;e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===c?u:t),h.color="0xfb923cff",h.size=60;const f=[];if(void 0!==d)for(let b in d[Symbol.for("config")].props)delete h[d[Symbol.for("config")].props[b]],f.push(d[Symbol.for("config")].props[b]);a[1].populate(h),!0===c&&(p-=1),e=a[1];const m={};let g;if(m.color="0xfb923cff",m.size=60,l=m.is||"Circle","string"==typeof l){if(g=n.components&&n.components[l]||o[l],!g)throw new Error('Component "Circle" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(g=l);a[2]=g.call(null,{props:m},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],u=a[2],c=!0):e=a[2][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[0];const y={};a[3]=this.element({parent:e||"root"},!0===c?u:t),y.color="0xe5e5e5ff",y.size=32,y.y=10,y.maxwidth=57,y.align="center",y.content=""+t.id,y.__textnode=!0,a[3].populate(y),!0===c&&(p-=1),e=a[0];const v={};return a[4]=this.element({parent:e||"root"},!0===c?u:t),v.color="0xe5e5e5ff",v.x=80,v.y=14,v.size=28,v.content=""+t.text,v.__textnode=!0,a[4].populate(v),!0===c&&(p-=1),a},effects:[],context:{}},props:["id","text"]}),ts=Ei.Component("Row",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=380,l.h=60,l.y=80*t.index,l.color="0xfff7edff",a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.w=10,u.h=60,u.color="0x06b6d4ff",a[1].populate(u),e=a[0];const c={};return a[2]=this.element({parent:e||"root"},t),c.content=t.text,c.x=30,c.y=15,c.font="lato",c.size=28,c.color=t.activeRow==t.index?"0x06b6d4ff":"0x1e293bff",c.__textnode=!0,a[2].populate(c),a},effects:[function(e,t,n,o,i,r){t[0].set("y",80*e.index)},function(e,t,n,o,i,r){t[2].set("content",e.text)},function(e,t,n,o,i,r){t[2].set("color",e.activeRow==e.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),ns=Ei.Component("Rows",{components:{Row:ts},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),e=a[0];const d=[];let h,f;const m=(s=[],a,d)=>{const m=r(s),g=new Set;let y=m.length;const v={}||{};h=v.from||0,f="to"in v?v.to:m.length;for(;y--;){const e=m[y];y<f&&y>=h&&g.add(e.id+"key2")}let b=d.length;for(;b--;)if(!1===g.has(d[b])){const e=d[b];a[1][e]&&a[1][e].destroy(),delete a[1][e],a[2][e]&&a[2][e].destroy(),delete a[2][e]}d.length=0;const x=m.length,w=[];for(let S=0;S<x;S++){if(S<h||S>=f)continue;const s=Object.create(t);e=a[0],s.item=m[S],s.index=S,s.key=s.item.id+"key2",d.push(s.key);const g=n.components&&n.components.Row||o.Row;void 0===a[1]&&(a[1]={});const y={};void 0===a[1][s.key]&&(a[1][s.key]=this.element({parent:e||"root"},!0===p?c:t)),y.activeRow=s.activeRowIndex,y.index=s.index,y.text=s.item.text,y.y=50;const v=[];if(void 0!==g)for(let e in g[Symbol.for("config")].props)delete y[g[Symbol.for("config")].props[e]],v.push(g[Symbol.for("config")].props[e]);void 0===a[1][s.key].nodeId&&a[1][s.key].populate(y),void 0===a[2]&&(a[2]={}),e=a[1][s.key];const b={};if(void 0===a[2][s.key]){let i;if(u=s.activeRowIndex,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.activeRow=u,u=s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.index=u,u=s.item.text,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.text=u,b.y=50,l=b.is||"Row","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Row" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[2][s.key]=i.call(null,{props:b},a[1][s.key],t),a[2][s.key][Symbol.for("slots")][0]?(e=a[2][s.key][Symbol.for("slots")][0],c=a[2][s.key],p=!0):e=a[2][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==v&&-1!==v.indexOf("index")||a[1][s.key].set("index",s.index)};i(x,null),w.push(x),t[Symbol.for("effects")].push(x);let T=()=>{void 0!==v&&-1!==v.indexOf("text")||a[1][s.key].set("text",s.item.text)};i(T,null),w.push(T),t[Symbol.for("effects")].push(T),a[2][s.key][Symbol.for("props")].index=s.index,a[2][s.key][Symbol.for("props")].text=s.item.text}return w};let g;const y=()=>{t[Symbol.for("removeGlobalEffects")](g),g=null,g=m(t.data,a,d)};t[Symbol.for("effects")].push(y),i(y,["data"]);const v=()=>{t.activeRowIndex;for(let e=0;e<t.data.length;e++){if(e<h||e>=f)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2","undefined"!=typeof skip1&&-1!==skip1.indexOf("activeRow")||a[1][n.key].set("activeRow",t.activeRowIndex)}};t[Symbol.for("effects")].push(v),i(v);const b=()=>{t.activeRowIndex;for(let e=0;e<t.data.length;e++){if(e<h||e>=f)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",a[2][n.key][Symbol.for("props")].activeRow=t.activeRowIndex}};return t[Symbol.for("effects")].push(b),i(b),a},effects:[],context:{}},props:["data","activeRowIndex"]}),os=Ei.Component("ForLoop",{components:{Square:Gr,LegendItem:es,Row:ts,Rows:ns},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===p?c:t),h.x=100,h.y=60,h.size=48,h.content="Array operations test",h.__textnode=!0,a[1].populate(h),!0===p&&(d-=1),e=a[0];const f={};a[2]=this.element({parent:e||"root"},!0===p?c:t),f.y=170,f.x=140,a[2].populate(f),!0===p&&(d-=1),e=a[2];const m={};a[3]=this.element({parent:e||"root"},!0===p?c:t),m.x="-10",m.w=500,m.h=80,m.color="0x64748bff",m.y={transition:t.y},m.alpha={transition:!t.hide},a[3].populate(m),!0===p&&(d-=1);const g=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const y={};a[4]=this.element({parent:e||"root"},!0===p?c:t),y.y=0,y.id="a",y.text="Fill array by assignment";const v=[];if(void 0!==g)for(let Ne in g[Symbol.for("config")].props)delete y[g[Symbol.for("config")].props[Ne]],v.push(g[Symbol.for("config")].props[Ne]);a[4].populate(y),!0===p&&(d-=1),e=a[4];const b={};let x;if(b.y=0,b.id="a",b.text="Fill array by assignment",l=b.is||"LegendItem","string"==typeof l){if(x=n.components&&n.components[l]||o[l],!x)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(x=l);a[5]=x.call(null,{props:b},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],c=a[5],p=!0):e=a[5][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const w=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const S={};a[6]=this.element({parent:e||"root"},!0===p?c:t),S.y=90,S.id="b",S.text="Push new item to array";const T=[];if(void 0!==w)for(let Ne in w[Symbol.for("config")].props)delete S[w[Symbol.for("config")].props[Ne]],T.push(w[Symbol.for("config")].props[Ne]);a[6].populate(S),!0===p&&(d-=1),e=a[6];const k={};let C;if(k.y=90,k.id="b",k.text="Push new item to array",l=k.is||"LegendItem","string"==typeof l){if(C=n.components&&n.components[l]||o[l],!C)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(C=l);a[7]=C.call(null,{props:k},a[6],t),a[7][Symbol.for("slots")][0]?(e=a[7][Symbol.for("slots")][0],c=a[7],p=!0):e=a[7][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const A=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const E={};a[8]=this.element({parent:e||"root"},!0===p?c:t),E.y=180,E.id="c",E.text="Pop item from array";const I=[];if(void 0!==A)for(let Ne in A[Symbol.for("config")].props)delete E[A[Symbol.for("config")].props[Ne]],I.push(A[Symbol.for("config")].props[Ne]);a[8].populate(E),!0===p&&(d-=1),e=a[8];const M={};let R;if(M.y=180,M.id="c",M.text="Pop item from array",l=M.is||"LegendItem","string"==typeof l){if(R=n.components&&n.components[l]||o[l],!R)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(R=l);a[9]=R.call(null,{props:M},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],c=a[9],p=!0):e=a[9][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const _=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const L={};a[10]=this.element({parent:e||"root"},!0===p?c:t),L.y=270,L.id="d",L.text="Shift item from array";const D=[];if(void 0!==_)for(let Ne in _[Symbol.for("config")].props)delete L[_[Symbol.for("config")].props[Ne]],D.push(_[Symbol.for("config")].props[Ne]);a[10].populate(L),!0===p&&(d-=1),e=a[10];const P={};let O;if(P.y=270,P.id="d",P.text="Shift item from array",l=P.is||"LegendItem","string"==typeof l){if(O=n.components&&n.components[l]||o[l],!O)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(O=l);a[11]=O.call(null,{props:P},a[10],t),a[11][Symbol.for("slots")][0]?(e=a[11][Symbol.for("slots")][0],c=a[11],p=!0):e=a[11][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const N=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const U={};a[12]=this.element({parent:e||"root"},!0===p?c:t),U.y=360,U.id="e",U.text="Splice 2 items from array";const B=[];if(void 0!==N)for(let Ne in N[Symbol.for("config")].props)delete U[N[Symbol.for("config")].props[Ne]],B.push(N[Symbol.for("config")].props[Ne]);a[12].populate(U),!0===p&&(d-=1),e=a[12];const j={};let F;if(j.y=360,j.id="e",j.text="Splice 2 items from array",l=j.is||"LegendItem","string"==typeof l){if(F=n.components&&n.components[l]||o[l],!F)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(F=l);a[13]=F.call(null,{props:j},a[12],t),a[13][Symbol.for("slots")][0]?(e=a[13][Symbol.for("slots")][0],c=a[13],p=!0):e=a[13][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const z=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const $={};a[14]=this.element({parent:e||"root"},!0===p?c:t),$.y=450,$.id="f",$.text="Unshift 2 items into array";const G=[];if(void 0!==z)for(let Ne in z[Symbol.for("config")].props)delete $[z[Symbol.for("config")].props[Ne]],G.push(z[Symbol.for("config")].props[Ne]);a[14].populate($),!0===p&&(d-=1),e=a[14];const V={};let H;if(V.y=450,V.id="f",V.text="Unshift 2 items into array",l=V.is||"LegendItem","string"==typeof l){if(H=n.components&&n.components[l]||o[l],!H)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(H=l);a[15]=H.call(null,{props:V},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],c=a[15],p=!0):e=a[15][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const q=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const X={};a[16]=this.element({parent:e||"root"},!0===p?c:t),X.y=540,X.id="g",X.text="Empty array by assignment";const W=[];if(void 0!==q)for(let Ne in q[Symbol.for("config")].props)delete X[q[Symbol.for("config")].props[Ne]],W.push(q[Symbol.for("config")].props[Ne]);a[16].populate(X),!0===p&&(d-=1),e=a[16];const K={};let Y;if(K.y=540,K.id="g",K.text="Empty array by assignment",l=K.is||"LegendItem","string"==typeof l){if(Y=n.components&&n.components[l]||o[l],!Y)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(Y=l);a[17]=Y.call(null,{props:K},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],c=a[17],p=!0):e=a[17][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const Q=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const J={};a[18]=this.element({parent:e||"root"},!0===p?c:t),J.y=630,J.id="h",J.text="Concat an array with items";const Z=[];if(void 0!==Q)for(let Ne in Q[Symbol.for("config")].props)delete J[Q[Symbol.for("config")].props[Ne]],Z.push(Q[Symbol.for("config")].props[Ne]);a[18].populate(J),!0===p&&(d-=1),e=a[18];const ee={};let te;if(ee.y=630,ee.id="h",ee.text="Concat an array with items",l=ee.is||"LegendItem","string"==typeof l){if(te=n.components&&n.components[l]||o[l],!te)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(te=l);a[19]=te.call(null,{props:ee},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],c=a[19],p=!0):e=a[19][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const ne=n.components&&n.components.LegendItem||o.LegendItem;e=a[2];const oe={};a[20]=this.element({parent:e||"root"},!0===p?c:t),oe.y=720,oe.id="i",oe.text="Sort array alphabetically";const ie=[];if(void 0!==ne)for(let Ne in ne[Symbol.for("config")].props)delete oe[ne[Symbol.for("config")].props[Ne]],ie.push(ne[Symbol.for("config")].props[Ne]);a[20].populate(oe),!0===p&&(d-=1),e=a[20];const re={};let se;if(re.y=720,re.id="i",re.text="Sort array alphabetically",l=re.is||"LegendItem","string"==typeof l){if(se=n.components&&n.components[l]||o[l],!se)throw new Error('Component "LegendItem" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(se=l);a[21]=se.call(null,{props:re},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],c=a[21],p=!0):e=a[21][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[2];const ae={};a[22]=this.element({parent:e||"root"},!0===p?c:t),ae.y=840,a[22].populate(ae),!0===p&&(d-=1),e=a[22];const le={};a[23]=this.element({parent:e||"root"},!0===p?c:t),le.size=26,le.y=10,le.content="Array length:",le.__textnode=!0,a[23].populate(le),!0===p&&(d-=1),e=a[22];const ue={};a[24]=this.element({parent:e||"root"},!0===p?c:t),ue.content=t.data.length,ue.size=40,ue.x=180,ue.color="0xfb923cff",ue.__textnode=!0,a[24].populate(ue),!0===p&&(d-=1),e=a[0];const ce={};a[25]=this.element({parent:e||"root"},!0===p?c:t),ce.x=660,ce.y=100,a[25].populate(ce),!0===p&&(d-=1),e=a[25];const pe={};a[26]=this.element({parent:e||"root"},!0===p?c:t),pe.content="For loop on Element",pe.__textnode=!0,a[26].populate(pe),!0===p&&(d-=1),e=a[25];const de=[];let he,fe;const me=(n=[],o,s)=>{const a=r(n),l=new Set;let u=a.length;const h={}||{};he=h.from||0,fe="to"in h?h.to:a.length;for(;u--;){const e=a[u];u<fe&&u>=he&&l.add(e.id+"key")}let f=s.length;for(;f--;)if(!1===l.has(s[f])){const e=s[f];o[27][e]&&o[27][e].destroy(),delete o[27][e],o[28][e]&&o[28][e].destroy(),delete o[28][e],o[29][e]&&o[29][e].destroy(),delete o[29][e]}s.length=0;const m=a.length,g=[];for(let r=0;r<m;r++){if(r<he||r>=fe)continue;const n=Object.create(t);e=o[25],n.item=a[r],n.index=r,n.key=n.item.id+"key",s.push(n.key),e=o[25],void 0===o[27]&&(o[27]={});const l={};void 0===o[27][n.key]&&(o[27][n.key]=this.element({parent:e||"root"},!0===p?c:t)),l.w=380,l.h=60,l.y=80*n.index+50,l.color="0xfff7edff",void 0===o[27][n.key].nodeId&&(o[27][n.key].populate(l),!0===p&&(d-=1)),e=o[27][n.key],void 0===o[28]&&(o[28]={});const u={};void 0===o[28][n.key]&&(o[28][n.key]=this.element({parent:e||"root"},!0===p?c:t)),u.w=10,u.h=60,u.color="0xfb923cff",void 0===o[28][n.key].nodeId&&(o[28][n.key].populate(u),!0===p&&(d-=1)),e=o[27][n.key],void 0===o[29]&&(o[29]={});const h={};void 0===o[29][n.key]&&(o[29][n.key]=this.element({parent:e||"root"},!0===p?c:t)),h.content=n.item.text,h.x=30,h.y=15,h.font="lato",h.size=28,h.color=n.activeRowIndex===n.index?"0x06b6d4ff":"0x1e293bff",h.__textnode=!0,void 0===o[29][n.key].nodeId&&(o[29][n.key].populate(h),!0===p&&(d-=1));let f=()=>{o[27][n.key].set("y",80*n.index+50)};i(f,null),g.push(f),t[Symbol.for("effects")].push(f);let m=()=>{o[29][n.key].set("content",n.item.text)};i(m,null),g.push(m),t[Symbol.for("effects")].push(m)}return g};let ge;const ye=()=>{t[Symbol.for("removeGlobalEffects")](ge),ge=null,ge=me(t.data,a,de)};t[Symbol.for("effects")].push(ye),i(ye,["data"]);const ve=()=>{t.activeRowIndex;for(let e=0;e<t.data.length;e++){if(e<he||e>=fe)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key",a[29][n.key].set("color",t.activeRowIndex===n.index?"0x06b6d4ff":"0x1e293bff")}};t[Symbol.for("effects")].push(ve),i(ve),e=a[0];const be={};a[30]=this.element({parent:e||"root"},!0===p?c:t),be.x=1080,be.y=100,a[30].populate(be),!0===p&&(d-=1),e=a[30];const xe={};a[31]=this.element({parent:e||"root"},!0===p?c:t),xe.content="For loop on Component",xe.__textnode=!0,a[31].populate(xe),!0===p&&(d-=1),e=a[30];const we=[];let Se,Te;const ke=(s=[],a,h)=>{const f=r(s),m=new Set;let g=f.length;const y={}||{};Se=y.from||0,Te="to"in y?y.to:f.length;for(;g--;){const e=f[g];g<Te&&g>=Se&&m.add(e.id+"key2")}let v=h.length;for(;v--;)if(!1===m.has(h[v])){const e=h[v];a[32][e]&&a[32][e].destroy(),delete a[32][e],a[33][e]&&a[33][e].destroy(),delete a[33][e]}h.length=0;const b=f.length,x=[];for(let w=0;w<b;w++){if(w<Se||w>=Te)continue;const s=Object.create(t);e=a[30],s.item=f[w],s.index=w,s.key=s.item.id+"key2",h.push(s.key);const m=n.components&&n.components.Row||o.Row;void 0===a[32]&&(a[32]={});const g={};void 0===a[32][s.key]&&(a[32][s.key]=this.element({parent:e||"root"},!0===p?c:t)),g.activeRow=(s.count,s.activeRowIndex),g.index=s.index,g.text=s.item.text,g.y=50;const y=[];if(void 0!==m)for(let e in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[e]],y.push(m[Symbol.for("config")].props[e]);void 0===a[32][s.key].nodeId&&(a[32][s.key].populate(g),!0===p&&(d-=1)),void 0===a[33]&&(a[33]={}),e=a[32][s.key];const v={};if(void 0===a[33][s.key]){let i;if(s.count,u=s.activeRowIndex,!0===Array.isArray(u)&&(u=r(u).slice(0)),v.activeRow=u,u=s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),v.index=u,u=s.item.text,!0===Array.isArray(u)&&(u=r(u).slice(0)),v.text=u,v.y=50,l=v.is||"Row","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Row" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[33][s.key]=i.call(null,{props:v},a[32][s.key],t),a[33][s.key][Symbol.for("slots")][0]?(e=a[33][s.key][Symbol.for("slots")][0],c=a[33][s.key],p=!0):e=a[33][s.key][Symbol.for("children")][0]}let b=()=>{void 0!==y&&-1!==y.indexOf("index")||a[32][s.key].set("index",s.index)};i(b,null),x.push(b),t[Symbol.for("effects")].push(b);let S=()=>{void 0!==y&&-1!==y.indexOf("text")||a[32][s.key].set("text",s.item.text)};i(S,null),x.push(S),t[Symbol.for("effects")].push(S),a[33][s.key][Symbol.for("props")].index=s.index,a[33][s.key][Symbol.for("props")].text=s.item.text}return x};let Ce;const Ae=()=>{t[Symbol.for("removeGlobalEffects")](Ce),Ce=null,Ce=ke(t.data,a,we)};t[Symbol.for("effects")].push(Ae),i(Ae,["data"]);const Ee=()=>{t.activeRowIndex,t.count;for(let e=0;e<t.data.length;e++){if(e<Se||e>=Te)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2","undefined"!=typeof skip32&&-1!==skip32.indexOf("activeRow")||a[32][n.key].set("activeRow",(t.count,t.activeRowIndex))}};t[Symbol.for("effects")].push(Ee),i(Ee);const Ie=()=>{t.activeRowIndex,t.count;for(let e=0;e<t.data.length;e++){if(e<Se||e>=Te)continue;const n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",a[33][n.key][Symbol.for("props")].activeRow=(t.count,t.activeRowIndex)}};t[Symbol.for("effects")].push(Ie),i(Ie),e=a[0];const Me={};a[34]=this.element({parent:e||"root"},!0===p?c:t),Me.x=1500,Me.y=100,a[34].populate(Me),!0===p&&(d-=1),e=a[34];const Re={};a[35]=this.element({parent:e||"root"},!0===p?c:t),Re.content="RowsComponent",Re.__textnode=!0,a[35].populate(Re),!0===p&&(d-=1);const _e=n.components&&n.components.Rows||o.Rows;e=a[34];const Le={};a[36]=this.element({parent:e||"root"},!0===p?c:t),Le.data=t.data,Le.activeRowIndex=t.activeRowIndex;const De=[];if(void 0!==_e)for(let Ne in _e[Symbol.for("config")].props)delete Le[_e[Symbol.for("config")].props[Ne]],De.push(_e[Symbol.for("config")].props[Ne]);a[36].populate(Le),!0===p&&(d-=1),e=a[36];const Pe={};let Oe;if(u=t.data,!0===Array.isArray(u)&&(u=r(u).slice(0)),Pe.data=u,u=t.activeRowIndex,!0===Array.isArray(u)&&(u=r(u).slice(0)),Pe.activeRowIndex=u,l=Pe.is||"Rows","string"==typeof l){if(Oe=n.components&&n.components[l]||o[l],!Oe)throw new Error('Component "Rows" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(Oe=l);return a[37]=Oe.call(null,{props:Pe},a[36],t),a[37][Symbol.for("slots")][0]?(e=a[37][Symbol.for("slots")][0],c=a[37],p=!0):e=a[37][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){t[3].set("y",{transition:e.y})},function(e,t,n,o,i,r){t[3].set("alpha",{transition:!e.hide})},function(e,t,n,o,i,r){t[24].set("content",e.data.length)},function(e,t,n,o,i,r){"undefined"!=typeof skip36&&-1!==skip36.indexOf("data")||t[36].set("data",e.data)},function(e,t,n,o,i,r){"undefined"!=typeof skip36&&-1!==skip36.indexOf("activeRowIndex")||t[36].set("activeRowIndex",e.activeRowIndex)},function(e,t,n,o,i,r){t[37][Symbol.for("props")].data=e.data},function(e,t,n,o,i,r){t[37][Symbol.for("props")].activeRowIndex=e.activeRowIndex}],context:{}},state:()=>({count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}),computed:{show(){return this.hide,!0===this.hide},data2(){return this.data,this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const e=[];for(let t=0;t<6;t++)e.push(Zr());this.data=e},b(){this.y=80,this.$trigger("y"),this.data.push(Zr())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(Zr(),Zr())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(((e=1)=>{const t=[];for(let n=0;n<e;n++)t.push(Zr());return t})(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=1===this.sortDirection?0:1,this.data=this.data.sort((e,t)=>{const n=e.text.toLowerCase(),o=t.text.toLowerCase();return 1===this.sortDirection?n<o?-1:n>o?1:0:n>o?-1:n<o?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),is=Ei.Component("Effects",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.w=160,l.h=160,l.x=40,l.y=40,l.color="0xfb923cff",l.effects=[{type:"radius",props:{radius:44}}],a[1].populate(l),e=a[0];const u={};a[2]=this.element({parent:e||"root"},t),u.w=160,u.h=160,u.x=240,u.y=40,u.color="0xd97706ff",u.effects=[{type:"radius",props:{radius:25}}],a[2].populate(u),e=a[0];const c={};a[3]=this.element({parent:e||"root"},t),c.w=160,c.h=160,c.x=440,c.y=40,c.color="0xb45309ff",c.effects=[{type:"radius",props:{radius:80}}],a[3].populate(c),e=a[0];const p={};a[4]=this.element({parent:e||"root"},t),p.w=160,p.h=160,p.x=640,p.y=40,p.color="0x78350fff",p.effects=[{type:"radius",props:{radius:10}}],a[4].populate(p),e=a[0];const d={};a[5]=this.element({parent:e||"root"},t),d.w=160,d.h=160,d.x=40,d.y=240,d.color="0x65a30dff",d.effects=[{type:"radius",props:{radius:t.radius}}],a[5].populate(d),e=a[0];const h={};a[6]=this.element({parent:e||"root"},t),h.w=300,h.h=300,h.x=40,h.y=440,h.color="0x0c4a6eff",h.effects=[{type:"radius",props:{radius:30}}],a[6].populate(h),e=a[6];const f={};a[7]=this.element({parent:e||"root"},t),f.w=200,f.h=200,f.x=50,f.y=50,f.color="0x0284c7ff",f.effects=[{type:"radius",props:{radius:40}}],a[7].populate(f),e=a[7];const m={};a[8]=this.element({parent:e||"root"},t),m.w=100,m.h=100,m.x=50,m.y=50,m.color="0x38bdf8ff",m.effects=[{type:"radius",props:{radius:50}}],a[8].populate(m),e=a[8];const g={};a[9]=this.element({parent:e||"root"},t),g.w=40,g.h=40,g.x=30,g.y=30,g.color="0xbae6fdff",g.effects=[{type:"radius",props:{radius:20}}],a[9].populate(g),e=a[0];const y={};a[10]=this.element({parent:e||"root"},t),y.w=160,y.h=160,y.x=840,y.y=40,y.color="0x3b82f6ff",y.effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],a[10].populate(y),e=a[0];const v={};return a[11]=this.element({parent:e||"root"},t),v.w=160,v.h=160,v.x=1040,v.y=40,v.color="0x500724ff",v.effects=t.effects,a[11].populate(v),a},effects:[function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:44}}])},function(e,t,n,o,i,r){t[2].set("effects",[{type:"radius",props:{radius:25}}])},function(e,t,n,o,i,r){t[3].set("effects",[{type:"radius",props:{radius:80}}])},function(e,t,n,o,i,r){t[4].set("effects",[{type:"radius",props:{radius:10}}])},function(e,t,n,o,i,r){t[5].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,o,i,r){t[6].set("effects",[{type:"radius",props:{radius:30}}])},function(e,t,n,o,i,r){t[7].set("effects",[{type:"radius",props:{radius:40}}])},function(e,t,n,o,i,r){t[8].set("effects",[{type:"radius",props:{radius:50}}])},function(e,t,n,o,i,r){t[9].set("effects",[{type:"radius",props:{radius:20}}])},function(e,t,n,o,i,r){t[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(e,t,n,o,i,r){t[11].set("effects",e.effects)}],context:{}},state:()=>({direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}),hooks:{ready(){this.$setInterval(()=>{const e="up"===this.direction?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(e,80),0),80===this.radius&&(this.direction="down"),0===this.radius&&(this.direction="up")},500);let e=0;this.$setInterval(()=>{e++,this.effects=e%2?[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),rs=Ei.Component("ShowIf",{components:{Square:Gr},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===p?c:t),h.y=40,a[1].populate(h),!0===p&&(d-=1),e=a[1];const f={};a[2]=this.element({parent:e||"root"},!0===p?c:t),f.x=50,f.w=200,f.h=300,f.color="0xbef264ff",f.show=!0,a[2].populate(f),!0===p&&(d-=1),e=a[1];const m={};a[3]=this.element({parent:e||"root"},!0===p?c:t),m.x=350,m.w=200,m.h=300,m.color="0xff0000ff",m.show=!1,a[3].populate(m),!0===p&&(d-=1),e=a[1];const g={};a[4]=this.element({parent:e||"root"},!0===p?c:t),g.x=650,g.w=200,g.h=300,g.color="0x84cc16ff",g.show=1,a[4].populate(g),!0===p&&(d-=1),e=a[1];const y={};a[5]=this.element({parent:e||"root"},!0===p?c:t),y.x=950,y.w=200,y.h=300,y.color="0xff0000ff",y.show=0,a[5].populate(y),!0===p&&(d-=1),e=a[0];const v={};a[6]=this.element({parent:e||"root"},!0===p?c:t),v.y=380,a[6].populate(v),!0===p&&(d-=1),e=a[6];const b={};a[7]=this.element({parent:e||"root"},!0===p?c:t),b.x=50,b.w=200,b.h=300,b.color="0xfde047ff",b.show=t.showNr,a[7].populate(b),!0===p&&(d-=1),e=a[6];const x={};a[8]=this.element({parent:e||"root"},!0===p?c:t),x.x=350,x.w=200,x.h=300,x.color="0x0000ffff",x.show=t.hideNr,a[8].populate(x),!0===p&&(d-=1),e=a[6];const w={};a[9]=this.element({parent:e||"root"},!0===p?c:t),w.x=650,w.w=200,w.h=300,w.color="0x84cc16ff",w.show=t.showBool,a[9].populate(w),!0===p&&(d-=1),e=a[6];const S={};a[10]=this.element({parent:e||"root"},!0===p?c:t),S.x=950,S.w=200,S.h=300,S.color="0xff0000ff",S.show=t.hideBool,a[10].populate(S),!0===p&&(d-=1),e=a[0];const T={};a[11]=this.element({parent:e||"root"},!0===p?c:t),T.y=720,a[11].populate(T),!0===p&&(d-=1),e=a[11];const k={};a[12]=this.element({parent:e||"root"},!0===p?c:t),k.x=50,k.w=200,k.h=300,k.color="0x5eead4ff",k.show=t.showHideToggle,a[12].populate(k),!0===p&&(d-=1),e=a[0];const C={};a[13]=this.element({parent:e||"root"},!0===p?c:t),C.y=40,C.x=1e3,a[13].populate(C),!0===p&&(d-=1);const A=n.components&&n.components.Square||o.Square;e=a[13];const E={};a[14]=this.element({parent:e||"root"},!0===p?c:t),E.show=!0;const I=[];if(void 0!==A)for(let K in A[Symbol.for("config")].props)delete E[A[Symbol.for("config")].props[K]],I.push(A[Symbol.for("config")].props[K]);a[14].populate(E),!0===p&&(d-=1),e=a[14];const M={};let R;if(M.show=!0,l=M.is||"Square","string"==typeof l){if(R=n.components&&n.components[l]||o[l],!R)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(R=l);a[15]=R.call(null,{props:M},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],c=a[15],p=!0):e=a[15][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const _=n.components&&n.components.Square||o.Square;e=a[13];const L={};a[16]=this.element({parent:e||"root"},!0===p?c:t),L.y=100,L.show=!1;const D=[];if(void 0!==_)for(let K in _[Symbol.for("config")].props)delete L[_[Symbol.for("config")].props[K]],D.push(_[Symbol.for("config")].props[K]);a[16].populate(L),!0===p&&(d-=1),e=a[16];const P={};let O;if(P.y=100,P.show=!1,l=P.is||"Square","string"==typeof l){if(O=n.components&&n.components[l]||o[l],!O)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(O=l);a[17]=O.call(null,{props:P},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],c=a[17],p=!0):e=a[17][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const N=n.components&&n.components.Square||o.Square;e=a[13];const U={};a[18]=this.element({parent:e||"root"},!0===p?c:t),U.y=200,U.show=t.showHideToggle;const B=[];if(void 0!==N)for(let K in N[Symbol.for("config")].props)delete U[N[Symbol.for("config")].props[K]],B.push(N[Symbol.for("config")].props[K]);a[18].populate(U),!0===p&&(d-=1),e=a[18];const j={};let F;if(j.y=200,u=t.showHideToggle,!0===Array.isArray(u)&&(u=r(u).slice(0)),j.show=u,l=j.is||"Square","string"==typeof l){if(F=n.components&&n.components[l]||o[l],!F)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(F=l);a[19]=F.call(null,{props:j},a[18],t),a[19][Symbol.for("slots")][0]?(e=a[19][Symbol.for("slots")][0],c=a[19],p=!0):e=a[19][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[0];const z={};a[20]=this.element({parent:e||"root"},!0===p?c:t),z.y=40,z.x=1400,a[20].populate(z),!0===p&&(d-=1),e=a[20];const $={};a[21]=this.element({parent:e||"root"},!0===p?c:t),$.w=80,$.h=80,$.show=!0,$.alpha=.8,$.color="0xff00e4ff",a[21].populate($),!0===p&&(d-=1),e=a[20];const G={};a[22]=this.element({parent:e||"root"},!0===p?c:t),G.y=100,G.w=80,G.h=80,G.show=!1,G.alpha=.8,G.color="0xff00e4ff",a[22].populate(G),!0===p&&(d-=1),e=a[20];const V={};a[23]=this.element({parent:e||"root"},!0===p?c:t),V.y=200,V.w=80,V.h=80,V.show=t.showHideToggle,V.alpha=.8,V.color="0xff00e4ff",a[23].populate(V),!0===p&&(d-=1),e=a[0];const H={};a[24]=this.element({parent:e||"root"},!0===p?c:t),H.x=1e3,H.y=380,H.direction="horizontal",H.gap=20,H.padding=20,H.color="0xffffffff",H.__layout=!0,a[24].populate(H),!0===p&&(d-=1),e=a[24];const q={};a[25]=this.element({parent:e||"root"},!0===p?c:t),q.w=40,q.h=40,q.show=t.showHideToggle,q.color="0xbfdbfeff",a[25].populate(q),!0===p&&(d-=1),e=a[24];const X={};a[26]=this.element({parent:e||"root"},!0===p?c:t),X.w=40,X.h=40,X.color="0x60a5faff",a[26].populate(X),!0===p&&(d-=1),e=a[24];const W={};return a[27]=this.element({parent:e||"root"},!0===p?c:t),W.w=40,W.h=40,W.color="0x2563ebff",a[27].populate(W),!0===p&&(d-=1),a},effects:[function(e,t,n,o,i,r){t[12].set("show",e.showHideToggle)},function(e,t,n,o,i,r){"undefined"!=typeof skip18&&-1!==skip18.indexOf("show")||t[18].set("show",e.showHideToggle)},function(e,t,n,o,i,r){t[19][Symbol.for("props")].show=e.showHideToggle},function(e,t,n,o,i,r){t[23].set("show",e.showHideToggle)},function(e,t,n,o,i,r){t[25].set("show",e.showHideToggle)}],context:{}},state:()=>({showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}),hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),ss=Ei.Component("Events",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.x=400,l.y=360,a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.w=280,u.h=280,u.color="0xe5e7ebff",u.x=t.x,u.y="-5",a[1].populate(u),e=a[0];const c={};a[2]=this.element({parent:e||"root"},t),c.w=250,c.h=250,c.x=10,c.y=10,c.color=t.colors[0],a[2].populate(c),e=a[0];const p={};a[3]=this.element({parent:e||"root"},t),p.w=250,p.h=250,p.x=290,p.y=10,p.color=t.colors[1],a[3].populate(p),e=a[0];const d={};a[4]=this.element({parent:e||"root"},t),d.w=250,d.h=250,d.x=570,d.y=10,d.color=t.colors[2],a[4].populate(d),e=a[0];const h={};return a[5]=this.element({parent:e||"root"},t),h.w=250,h.h=250,h.x=850,h.y=10,h.color=t.colors[3],a[5].populate(h),a},effects:[function(e,t,n,o,i,r){t[1].set("x",e.x)}],context:{}},state:()=>({count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}),computed:{x(){return this.count,280*this.count-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(e){const t=this.count-1;-1===t?this.parent.$focus(e):this.count=Math.max(t,0)},right(e){const t=this.count+1;4===t?this.parent.$focus(e):this.count=Math.min(t,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),as=Ei.Component("SlotCard",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=300,l.h=500,l.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],l.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u[Symbol.for("isSlot")]=!0,u.x=20,u.y=20,a[1].populate(u),e=a[0];const c={};return a[2]=this.element({parent:e||"root"},t),c.content=t.label,c.maxwidth=260,c.x=20,c.y=400,c.align="center",c.__textnode=!0,a[2].populate(c),a},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),ls=Ei.Component("NamedSlotCard",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=700,l.h=300,l.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],l.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.x=20,u.y=20,a[1].populate(u),e=a[1];const c={};a[2]=this.element({parent:e||"root"},t),c.content="First slot",c.__textnode=!0,a[2].populate(c),e=a[1];const p={};a[3]=this.element({parent:e||"root"},t),p[Symbol.for("isSlot")]=!0,p.y=40,p.ref="first",a[3].populate(p),e=a[0];const d={};a[4]=this.element({parent:e||"root"},t),d.x=200,d.y=20,a[4].populate(d),e=a[4];const h={};a[5]=this.element({parent:e||"root"},t),h.content="Second slot",h.__textnode=!0,a[5].populate(h),e=a[4];const f={};a[6]=this.element({parent:e||"root"},t),f[Symbol.for("isSlot")]=!0,f.y=40,f.ref="second",a[6].populate(f),e=a[0];const m={};a[7]=this.element({parent:e||"root"},t),m.x=480,m.y=20,a[7].populate(m),e=a[7];const g={};a[8]=this.element({parent:e||"root"},t),g.content="Third slot",g.__textnode=!0,a[8].populate(g),e=a[7];const y={};return a[9]=this.element({parent:e||"root"},t),y[Symbol.for("isSlot")]=!0,y.y=40,y.ref="third",a[9].populate(y),a},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),us=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],cs=Ei.Component("Components",{components:{SlotCard:as,NamedSlotCard:ls,Card:Vr,Square:Gr},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),!0===c&&(p-=1);const d=n.components&&n.components.SlotCard||o.SlotCard;e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===c?u:t),h.x=400,h.y=100,h.label="Element";const f=[];if(void 0!==d)for(let ie in d[Symbol.for("config")].props)delete h[d[Symbol.for("config")].props[ie]],f.push(d[Symbol.for("config")].props[ie]);a[1].populate(h),!0===c&&(p-=1),e=a[1];const m={};let g;if(m.x=400,m.y=100,m.label="Element",l=m.is||"SlotCard","string"==typeof l){if(g=n.components&&n.components[l]||o[l],!g)throw new Error('Component "SlotCard" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(g=l);a[2]=g.call(null,{props:m},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],u=a[2],c=!0):e=a[2][Symbol.for("children")][0],!0===c&&(p=2);a[3]=this.element({parent:e||"root"},!0===c?u:t),a[3].populate({}),!0===c&&(p-=1),e=a[3];const y={};a[4]=this.element({parent:e||"root"},!0===c?u:t),y.color=t.color,y.w=100,y.h=100,a[4].populate(y),!0===c&&(p-=1),!0===c&&0===p&&(c=!1);const v=n.components&&n.components.SlotCard||o.SlotCard;e=a[0];const b={};a[5]=this.element({parent:e||"root"},!0===c?u:t),b.x=800,b.y=100,b.label="Component";const x=[];if(void 0!==v)for(let ie in v[Symbol.for("config")].props)delete b[v[Symbol.for("config")].props[ie]],x.push(v[Symbol.for("config")].props[ie]);a[5].populate(b),!0===c&&(p-=1),e=a[5];const w={};let S;if(w.x=800,w.y=100,w.label="Component",l=w.is||"SlotCard","string"==typeof l){if(S=n.components&&n.components[l]||o[l],!S)throw new Error('Component "SlotCard" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(S=l);a[6]=S.call(null,{props:w},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],u=a[6],c=!0):e=a[6][Symbol.for("children")][0],!0===c&&(p=2);a[7]=this.element({parent:e||"root"},!0===c?u:t),a[7].populate({}),!0===c&&(p-=1);const T=n.components&&n.components.Square||o.Square;e=a[7];const k={};a[8]=this.element({parent:e||"root"},!0===c?u:t),k.size=200,k.y=50;const C=[];if(void 0!==T)for(let ie in T[Symbol.for("config")].props)delete k[T[Symbol.for("config")].props[ie]],C.push(T[Symbol.for("config")].props[ie]);a[8].populate(k),!0===c&&(p-=1),e=a[8];const A={};let E;if(A.size=200,A.y=50,l=A.is||"Square","string"==typeof l){if(E=n.components&&n.components[l]||o[l],!E)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(E=l);a[9]=E.call(null,{props:A},a[8],t),a[9][Symbol.for("slots")][0]?(e=a[9][Symbol.for("slots")][0],u=a[9],c=!0):e=a[9][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),!0===c&&0===p&&(c=!1);const I=n.components&&n.components.SlotCard||o.SlotCard;e=a[0];const M={};a[10]=this.element({parent:e||"root"},!0===c?u:t),M.x=1200,M.y=100,M.label="Element & Component";const R=[];if(void 0!==I)for(let ie in I[Symbol.for("config")].props)delete M[I[Symbol.for("config")].props[ie]],R.push(I[Symbol.for("config")].props[ie]);a[10].populate(M),!0===c&&(p-=1),e=a[10];const _={};let L;if(_.x=1200,_.y=100,_.label="Element & Component",l=_.is||"SlotCard","string"==typeof l){if(L=n.components&&n.components[l]||o[l],!L)throw new Error('Component "SlotCard" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(L=l);a[11]=L.call(null,{props:_},a[10],t),a[11][Symbol.for("slots")][0]?(e=a[11][Symbol.for("slots")][0],u=a[11],c=!0):e=a[11][Symbol.for("children")][0],!0===c&&(p=3);a[12]=this.element({parent:e||"root"},!0===c?u:t),a[12].populate({}),!0===c&&(p-=1),e=a[12];const D={};a[13]=this.element({parent:e||"root"},!0===c?u:t),D.color=t.color,D.w=100,D.h=100,a[13].populate(D),!0===c&&(p-=1);const P=n.components&&n.components.Square||o.Square;e=a[12];const O={};a[14]=this.element({parent:e||"root"},!0===c?u:t),O.size=200,O.y=150;const N=[];if(void 0!==P)for(let ie in P[Symbol.for("config")].props)delete O[P[Symbol.for("config")].props[ie]],N.push(P[Symbol.for("config")].props[ie]);a[14].populate(O),!0===c&&(p-=1),e=a[14];const U={};let B;if(U.size=200,U.y=150,l=U.is||"Square","string"==typeof l){if(B=n.components&&n.components[l]||o[l],!B)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(B=l);a[15]=B.call(null,{props:U},a[14],t),a[15][Symbol.for("slots")][0]?(e=a[15][Symbol.for("slots")][0],u=a[15],c=!0):e=a[15][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),!0===c&&0===p&&(c=!1);const j=n.components&&n.components.Card||o.Card;e=a[0];const F={};a[16]=this.element({parent:e||"root"},!0===c?u:t),F.x=400,F.y=700,F.size="small";const z=[];if(void 0!==j)for(let ie in j[Symbol.for("config")].props)delete F[j[Symbol.for("config")].props[ie]],z.push(j[Symbol.for("config")].props[ie]);a[16].populate(F),!0===c&&(p-=1),e=a[16];const $={};let G;if($.x=400,$.y=700,$.size="small",l=$.is||"Card","string"==typeof l){if(G=n.components&&n.components[l]||o[l],!G)throw new Error('Component "Card" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(G=l);a[17]=G.call(null,{props:$},a[16],t),a[17][Symbol.for("slots")][0]?(e=a[17][Symbol.for("slots")][0],u=a[17],c=!0):e=a[17][Symbol.for("children")][0],!0===c&&(p=2);a[18]=this.element({parent:e||"root"},!0===c?u:t),a[18].populate({}),!0===c&&(p-=1),e=a[18];const V={};a[19]=this.element({parent:e||"root"},!0===c?u:t),V.color=t.color,V.w=100,V.h=100,a[19].populate(V),!0===c&&(p-=1),!0===c&&0===p&&(c=!1);const H=n.components&&n.components.NamedSlotCard||o.NamedSlotCard;e=a[0];const q={};a[20]=this.element({parent:e||"root"},!0===c?u:t),q.x=800,q.y=700;const X=[];if(void 0!==H)for(let ie in H[Symbol.for("config")].props)delete q[H[Symbol.for("config")].props[ie]],X.push(H[Symbol.for("config")].props[ie]);a[20].populate(q),!0===c&&(p-=1),e=a[20];const W={};let K;if(W.x=800,W.y=700,l=W.is||"NamedSlotCard","string"==typeof l){if(K=n.components&&n.components[l]||o[l],!K)throw new Error('Component "NamedSlotCard" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(K=l);a[21]=K.call(null,{props:W},a[20],t),a[21][Symbol.for("slots")][0]?(e=a[21][Symbol.for("slots")][0],u=a[21],c=!0):e=a[21][Symbol.for("children")][0],!0===c&&(p=5);a[22]=this.element({parent:e||"root"},!0===c?u:t),a[22].populate({}),!0===c&&(p-=1),e=a[22];const Y={};a[23]=this.element({parent:e||"root"},!0===c?u:t),Y.color="0x0891b2ff",Y.x=10,Y.y=140,Y.w=80,Y.h=60,Y.parent=void 0!==u[Symbol.for("slots")]&&!0===Array.isArray(u[Symbol.for("slots")])&&u[Symbol.for("slots")].filter(e=>"second"===e.ref).shift()||e,Y.slot="second",a[23].populate(Y),!0===c&&(p-=1),e=a[22];const Q={};a[24]=this.element({parent:e||"root"},!0===c?u:t),Q.color=t.color,Q.w=100,Q.h=100,Q.parent=void 0!==u[Symbol.for("slots")]&&!0===Array.isArray(u[Symbol.for("slots")])&&u[Symbol.for("slots")].filter(e=>"third"===e.ref).shift()||e,Q.slot="third",a[24].populate(Q),!0===c&&(p-=1);const J=n.components&&n.components.Square||o.Square;e=a[22];const Z={};a[25]=this.element({parent:e||"root"},!0===c?u:t),Z.size=100,Z.parent=void 0!==u[Symbol.for("slots")]&&!0===Array.isArray(u[Symbol.for("slots")])&&u[Symbol.for("slots")].filter(e=>"first"===e.ref).shift()||e,Z.slot="first";const ee=[];if(void 0!==J)for(let ie in J[Symbol.for("config")].props)delete Z[J[Symbol.for("config")].props[ie]],ee.push(J[Symbol.for("config")].props[ie]);a[25].populate(Z),!0===c&&(p-=1),e=a[25];const te={};let ne;if(te.size=100,te.slot="first",l=te.is||"Square","string"==typeof l){if(ne=n.components&&n.components[l]||o[l],!ne)throw new Error('Component "Square" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(ne=l);a[26]=ne.call(null,{props:te},a[25],t),a[26][Symbol.for("slots")][0]?(e=a[26][Symbol.for("slots")][0],u=a[26],c=!0):e=a[26][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[22];const oe={};return a[27]=this.element({parent:e||"root"},!0===c?u:t),oe.color="0x4d7c0fff",oe.x=40,oe.y=40,oe.w=40,oe.h=60,oe.parent=void 0!==u[Symbol.for("slots")]&&!0===Array.isArray(u[Symbol.for("slots")])&&u[Symbol.for("slots")].filter(e=>"second"===e.ref).shift()||e,oe.slot="second",a[27].populate(oe),!0===c&&(p-=1),!0===c&&0===p&&(c=!1),a},effects:[function(e,t,n,o,i,r){t[4].set("color",e.color)},function(e,t,n,o,i,r){t[13].set("color",e.color)},function(e,t,n,o,i,r){t[19].set("color",e.color)},function(e,t,n,o,i,r){t[24].set("color",e.color)}],context:{}},state:()=>({color:us[0]}),hooks:{ready(){this.$setInterval(()=>{const e=us.indexOf(this.color)+1;this.color=e<=us.length?us[e]:us[0]},600)}}}),ps=Ei.Component("MemoryCard",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=320,l.h=200,l.x=360*t.col,l.y=250*t.row,l.scale={transition:t.scale},l.rotation={transition:t.disabled?-2:0},a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.h={transition:t.h},u.w=320,u.y=125,u.mount="{y: 0.5}",u.color={transition:t.disabled?"#ccc":"#fff"},u.src=t.image+"&w=320&h=200",u.effects=[{type:"radius",props:{radius:6}}],u.show=t.open,a[1].populate(u),e=a[0];const c={};return a[2]=this.element({parent:e||"root"},t),c.h={transition:t.h},c.w=320,c.y=125,c.mount="{y: 0.5}",c.color=t.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},c.effects=[{type:"radius",props:{radius:6}}],a[2].populate(c),a},effects:[function(e,t,n,o,i,r){t[0].set("scale",{transition:e.scale})},function(e,t,n,o,i,r){t[0].set("rotation",{transition:e.disabled?-2:0})},function(e,t,n,o,i,r){t[1].set("h",{transition:e.h})},function(e,t,n,o,i,r){t[1].set("color",{transition:e.disabled?"#ccc":"#fff"})},function(e,t,n,o,i,r){t[1].set("src",e.image+"&w=320&h=200")},function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:6}}])},function(e,t,n,o,i,r){t[1].set("show",e.open)},function(e,t,n,o,i,r){t[2].set("h",{transition:e.h})},function(e,t,n,o,i,r){t[2].set("color",e.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(e,t,n,o,i,r){t[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state:()=>({disabled:!1,open:!1,h:200,scale:1,announcement:null}),hooks:{init(){this.$listen("closeMemoryCard",e=>{e===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",e=>{e===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(e){this.scale=1.08;const t="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.announcement=this.$announcer.speak(t)},unfocus(){this.scale=1,this.announcement.cancel()}},input:{enter(){this.disabled||(this.open?this.$announcer.speak("Card already open. Choose another"):(this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)))}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),ds=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],hs=Ei.Component("Announcer",{components:{MemoryCard:ps},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===p?c:t),d.font="raleway",d.size=80,d.color="0xffffffff",d.content="Let's play memory!",d.x=580,d.y=60,d.__textnode=!0,a[1].populate(d),e=a[0];const h={};a[2]=this.element({parent:e||"root"},!0===p?c:t),h.font="kalam",h.size=40,h.color="0xb91c1cff",h.content="the Accessible edition :)",h.x=1200,h.y=170,h.rotation="-6",h.__textnode=!0,a[2].populate(h),e=a[0];const f={};a[3]=this.element({parent:e||"root"},!0===p?c:t),f.x=260,f.y=260,a[3].populate(f),e=a[3];const m=[];let g,y;const v=(s=[],a,d)=>{const h=r(s),f=new Set;let m=h.length;const v={}||{};g=v.from||0,y="to"in v?v.to:h.length;for(;m--;){const e=h[m];m<y&&m>=g&&f.add(""+e.id)}let b=d.length;for(;b--;)if(!1===f.has(d[b])){const e=d[b];a[4][e]&&a[4][e].destroy(),delete a[4][e],a[5][e]&&a[5][e].destroy(),delete a[5][e]}d.length=0;const x=h.length,w=[];for(let S=0;S<x;S++){if(S<g||S>=y)continue;const s=Object.create(t);e=a[3],s.card=h[S],s.index=S,s.key=""+s.card.id,d.push(s.key);const f=n.components&&n.components.MemoryCard||o.MemoryCard;void 0===a[4]&&(a[4]={});const m={};void 0===a[4][s.key]&&(a[4][s.key]=this.element({parent:e||"root"},!0===p?c:t)),m.col=s.index%4,m.row=Math.floor(s.index/4)%3,m.image=s.card.image,m.description=s.card.description,m.ref="card"+s.index,m.index=s.index;const v=[];if(void 0!==f)for(let e in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[e]],v.push(f[Symbol.for("config")].props[e]);void 0===a[4][s.key].nodeId&&a[4][s.key].populate(m),void 0===a[5]&&(a[5]={}),e=a[4][s.key];const b={};if(void 0===a[5][s.key]){let i;if(u=s.index%4,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.col=u,u=Math.floor(s.index/4)%3,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.row=u,b.image=s.card.image,b.description=s.card.description,u="card"+s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.ref=u,u=s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.index=u,l=b.is||"MemoryCard","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "MemoryCard" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[5][s.key]=i.call(null,{props:b},a[4][s.key],t),a[5][s.key][Symbol.for("slots")][0]?(e=a[5][s.key][Symbol.for("slots")][0],c=a[5][s.key],p=!0):e=a[5][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==v&&-1!==v.indexOf("col")||a[4][s.key].set("col",s.index%4)};i(x,null),w.push(x),t[Symbol.for("effects")].push(x);let T=()=>{void 0!==v&&-1!==v.indexOf("row")||a[4][s.key].set("row",Math.floor(s.index/4)%3)};i(T,null),w.push(T),t[Symbol.for("effects")].push(T);let k=()=>{void 0!==v&&-1!==v.indexOf("ref")||a[4][s.key].set("ref","card"+s.index)};i(k,null),w.push(k),t[Symbol.for("effects")].push(k);let C=()=>{void 0!==v&&-1!==v.indexOf("index")||a[4][s.key].set("index",s.index)};i(C,null),w.push(C),t[Symbol.for("effects")].push(C),a[5][s.key][Symbol.for("props")].col=s.index%4,a[5][s.key][Symbol.for("props")].row=Math.floor(s.index/4)%3,a[5][s.key][Symbol.for("props")].ref="card"+s.index,a[5][s.key][Symbol.for("props")].index=s.index}return w};let b;const x=()=>{t[Symbol.for("removeGlobalEffects")](b),b=null,b=v(t.cards,a,m)};return t[Symbol.for("effects")].push(x),i(x,["cards"]),a},effects:[],context:{}},state:()=>({cards:ds.concat(ds).map((e,t)=>({...e,id:`card${t}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}),hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",e=>{this.openCards.length<2&&this.openCards.push(e),2===this.openCards.length&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(e){-1!==this.focusedRow?(e+=4*this.focusedRow,this.$select("card"+e).$focus()):this.focusedRow=0},focusedRow(e){-1!==this.focusedCol?(e=this.focusedCol+4*e,this.$select("card"+e).$focus()):this.focusedCol=0}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){0===this.focusedCol?0===this.focusedRow?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){3===this.focusedCol?2===this.focusedRow?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){0===this.focusedCol&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){2===this.focusedRow&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),fs=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),ms=Ei.Component("Item",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};return a[0]=this.element({parent:e||"root"},t),l.src="assets/blits-b-small.png",l.w=96,l.h=168,l.x={transition:{value:t.x,duration:2900}},l.y={transition:{value:t.y,duration:2900}},l.rotation={transition:{value:t.rotation,duration:2900}},l.scale={transition:{value:t.scale,duration:1e3}},a[0].populate(l),a},effects:[function(e,t,n,o,i,r){t[0].set("x",{transition:{value:e.x,duration:2900}})},function(e,t,n,o,i,r){t[0].set("y",{transition:{value:e.y,duration:2900}})},function(e,t,n,o,i,r){t[0].set("rotation",{transition:{value:e.rotation,duration:2900}})},function(e,t,n,o,i,r){t[0].set("scale",{transition:{value:e.scale,duration:1e3}})}],context:{}},state:()=>({x:fs(20,1560),y:fs(20,720),rotation:0,scale:.1}),hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=fs(20,1740),this.y=fs(20,900),this.rotation=fs(10,360)},3e3)}}}),gs=Ei.Component("Exponential",{components:{Item:ms},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),e=a[0];const p=[];let d,h;const f=(i=[],s,a)=>{const p=r(i),f=new Set;let m=p.length;const g={}||{};d=g.from||0,h="to"in g?g.to:p.length;for(;m--;){const e=p[m];m<h&&m>=d&&f.add(""+e)}let y=a.length;for(;y--;)if(!1===f.has(a[y])){const e=a[y];s[1][e]&&s[1][e].destroy(),delete s[1][e],s[2][e]&&s[2][e].destroy(),delete s[2][e]}a.length=0;const v=p.length;for(let r=0;r<v;r++){if(r<d||r>=h)continue;const i=Object.create(t);e=s[0],i.item=p[r],i[void 0]=r,i.key=""+i.item,a.push(i.key);const f=n.components&&n.components.Item||o.Item;void 0===s[1]&&(s[1]={});const m={};void 0===s[1][i.key]&&(s[1][i.key]=this.element({parent:e||"root"},!0===c?u:t));const g=[];if(void 0!==f)for(let e in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[e]],g.push(f[Symbol.for("config")].props[e]);void 0===s[1][i.key].nodeId&&s[1][i.key].populate(m),void 0===s[2]&&(s[2]={}),e=s[1][i.key];const y={};if(void 0===s[2][i.key]){let r;if(l=y.is||"Item","string"==typeof l){if(r=n.components&&n.components[l]||o[l],!r)throw new Error('Component "Item" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(r=l);s[2][i.key]=r.call(null,{props:y},s[1][i.key],t),s[2][i.key][Symbol.for("slots")][0]?(e=s[2][i.key][Symbol.for("slots")][0],u=s[2][i.key],c=!0):e=s[2][i.key][Symbol.for("children")][0]}}return[]};let m;const g=()=>{t[Symbol.for("removeGlobalEffects")](m),m=null,m=f(t.items,a,p)};return t[Symbol.for("effects")].push(g),i(g,["items"]),a},effects:[],context:{}},state:()=>({items:[]}),hooks:{ready(){const e=this.$setInterval(()=>{for(let e=0;e<=Math.floor(this.items.length/10);e++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(e)},2e3)}}}),ys=Ei.Component("Ball",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};return a[0]=this.element({parent:e||"root"},t),l.w=100,l.h=100,l.src="/assets/basketball.png",a[0].populate(l),a},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),vs=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),bs=Ei.Component("Viewport",{components:{Ball:ys},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),!0===p&&(d-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===p?c:t),h.size=32,h.x=960,h.y=540,h.mount=.5,h.content=t.status.join("\n"),h.lineheight=52,h.maxwidth=500,h.__textnode=!0,a[1].populate(h),!0===p&&(d-=1);const f=n.components&&n.components.Ball||o.Ball;e=a[0];const m={};a[2]=this.element({parent:e||"root"},!0===p?c:t),m.x={transition:{value:t.x,duration:1250}},m.y={transition:{value:t.y,duration:1250}},m.rotation={transition:{value:t.rotation,duration:1400,easing:"ease-in-out"}},m.w=100,m.h=100;const g=[];if(void 0!==f)for(let b in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[b]],g.push(f[Symbol.for("config")].props[b]);a[2].populate(m),!0===p&&(d-=1),e=a[2];const y={};let v;if(u={transition:{value:t.x,duration:1250}},!0===Array.isArray(u)&&(u=r(u).slice(0)),y.x=u,u={transition:{value:t.y,duration:1250}},!0===Array.isArray(u)&&(u=r(u).slice(0)),y.y=u,u={transition:{value:t.rotation,duration:1400,easing:"ease-in-out"}},!0===Array.isArray(u)&&(u=r(u).slice(0)),y.rotation=u,y.w=100,y.h=100,l=y.is||"Ball","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "Ball" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);return a[3]=v.call(null,{props:y},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],c=a[3],p=!0):e=a[3][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){t[1].set("content",e.status.join("\n"))},function(e,t,n,o,i,r){"undefined"!=typeof skip2&&-1!==skip2.indexOf("x")||t[2].set("x",{transition:{value:e.x,duration:1250}})},function(e,t,n,o,i,r){"undefined"!=typeof skip2&&-1!==skip2.indexOf("y")||t[2].set("y",{transition:{value:e.y,duration:1250}})},function(e,t,n,o,i,r){"undefined"!=typeof skip2&&-1!==skip2.indexOf("rotation")||t[2].set("rotation",{transition:{value:e.rotation,duration:1400,easing:"ease-in-out"}})},function(e,t,n,o,i,r){t[3][Symbol.for("props")].x={transition:{value:e.x,duration:1250}}},function(e,t,n,o,i,r){t[3][Symbol.for("props")].y={transition:{value:e.y,duration:1250}}},function(e,t,n,o,i,r){t[3][Symbol.for("props")].rotation={transition:{value:e.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state:()=>({x:-400,y:-400,rotation:0,status:[],count:1}),hooks:{ready(){this.$listen("ballUpdate",e=>{this.status.unshift(`${this.count++} -  ${e}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=vs(-90,90),this.x=910,this.y=490,this.$setInterval(()=>{this.x=vs(-300,2220),this.y=vs(-300,1380),this.rotation=vs(-90,90)},2500)}}}),xs={code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=1920,l.h=1080,l.color="0xffffffff",l.effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.show=void 0!==t.up,a[1].populate(u),e=a[1];const c={};a[2]=this.element({parent:e||"root"},t),c.src="assets/arrow.png",c.w=100,c.h=44,c.x=960,c.y=40,c.mount="{x: 0.5}",a[2].populate(c),e=a[1];const p={};a[3]=this.element({parent:e||"root"},t),p.content=t.up&&t.up.toUpperCase(),p.x=960,p.y=100,p.size=76,p.mount="{x: 0.5}",p.__textnode=!0,a[3].populate(p),e=a[0];const d={};a[4]=this.element({parent:e||"root"},t),d.show=void 0!==t.right,a[4].populate(d),e=a[4];const h={};a[5]=this.element({parent:e||"root"},t),h.src="assets/arrow.png",h.w=100,h.h=44,h.x=1900,h.y=540,h.mount="{x: 1, y: 0.5}",h.rotation=90,a[5].populate(h),e=a[4];const f={};a[6]=this.element({parent:e||"root"},t),f.content=t.right&&t.right.toUpperCase(),f.x=1760,f.y=540,f.size=76,f.rotation=90,f.mount=.5,f.__textnode=!0,a[6].populate(f),e=a[0];const m={};a[7]=this.element({parent:e||"root"},t),m.show=void 0!==t.down,a[7].populate(m),e=a[7];const g={};a[8]=this.element({parent:e||"root"},t),g.src="assets/arrow.png",g.w=100,g.h=44,g.x=960,g.y=1040,g.mount="{x: 0.5, y: 1}",g.rotation=180,a[8].populate(g),e=a[7];const y={};a[9]=this.element({parent:e||"root"},t),y.content=t.down&&t.down.toUpperCase(),y.x=960,y.y=980,y.size=76,y.mount="{x: 0.5, y: 1}",y.__textnode=!0,a[9].populate(y),e=a[0];const v={};a[10]=this.element({parent:e||"root"},t),v.show=void 0!==t.left,a[10].populate(v),e=a[10];const b={};a[11]=this.element({parent:e||"root"},t),b.src="assets/arrow.png",b.w=100,b.h=44,b.x=40,b.y=540,b.mount="{ y: 0.5}",b.rotation="-90",a[11].populate(b),e=a[10];const x={};a[12]=this.element({parent:e||"root"},t),x.content=t.left&&t.left.toUpperCase(),x.x=180,x.y=540,x.size=76,x.mount=.5,x.rotation="-90",x.__textnode=!0,a[12].populate(x),e=a[0];const w={};return a[13]=this.element({parent:e||"root"},t),w.content=t.pageTitle,w.font="raleway",w.x=960,w.y=540,w.size=240,w.mount=.5,w.__textnode=!0,a[13].populate(w),a},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(e,t,n,o,i,r){t[1].set("show",void 0!==e.up)},function(e,t,n,o,i,r){t[3].set("content",e.up&&e.up.toUpperCase())},function(e,t,n,o,i,r){t[4].set("show",void 0!==e.right)},function(e,t,n,o,i,r){t[6].set("content",e.right&&e.right.toUpperCase())},function(e,t,n,o,i,r){t[7].set("show",void 0!==e.down)},function(e,t,n,o,i,r){t[9].set("content",e.down&&e.down.toUpperCase())},function(e,t,n,o,i,r){t[10].set("show",void 0!==e.left)},function(e,t,n,o,i,r){t[12].set("content",e.left&&e.left.toUpperCase())},function(e,t,n,o,i,r){t[13].set("content",e.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state:()=>({title:"Start",up:"up",right:"right",down:"down",left:"left"})},ws=Ei.Component("RouterHookPage",{...xs,state:()=>({title:"Start",down:"episode flow",right:"movie flow"}),input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),Ss=Ei.Component("RouterHookMovie",{...xs,state:()=>({title:"Movie",left:"Back",right:"Rating"}),input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),Ts=Ei.Component("RouterHookRating",{...xs,state:()=>({title:"Rating",left:"Back",right:"TO START"}),input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),ks=Ei.Component("RouterHookEpisode",{...xs,state:()=>({title:"Episode",left:"Back",right:"NEXT EPISODE"}),input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),Cs=Ei.Component("RouterHookEpisode",{...xs,state:()=>({title:"Episodes \n overview",right:"FIRST EPISODE"}),input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}}),As={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},Es=[{path:"/examples/router-hooks",component:ws,hooks:{before:async(e,t)=>(t&&"examples/router-hooks/movie"===t.path&&(e.transition=As.slideInOutRight),t&&"examples/router-hooks/rating"===t.path&&(e.transition=As.slideInOutLeft),t&&t.path.indexOf("episode")>-1&&(e.transition=As.slideInOutDown),e)}},{path:"/examples/router-hooks/episode/:id",component:ks,hooks:{before(e,t){t&&t.path.indexOf("episode")>-1&&(e.transition=As.slideInOutLeft);const{id:n}=e.params;return n>5?"/examples/router-hooks/":(e.data.page={id:parseInt(n),title:`Episode ${n}`},e)}},transition:As.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:Cs,transition:As.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:Ss,hooks:{before:(e,t)=>(t&&"examples/router-hooks"===t.path&&(e.transition=As.slideInOutLeft),t&&"examples/router-hooks/rating"===t.path&&(e.transition=As.slideInOutRight),e)}},{path:"/examples/router-hooks/rating",component:Ts,transition:As.slideInOutLeft}],Is=Ei.Component("Resize",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.y=30,l.content="fit (Resize Mode) sample",l.maxwidth=1920,l.align="center",l.__textnode=!0,a[1].populate(l),e=a[0];const u={};a[2]=this.element({parent:e||"root"},t),u.x={transition:{value:t.pages.x1,duration:200}},u.y=90,a[2].populate(u),e=a[2];const c={};a[3]=this.element({parent:e||"root"},t),c.x=100,c.content="Image dimensions: 2560 X 1440",c.__textnode=!0,a[3].populate(c),e=a[2];const p={};a[4]=this.element({parent:e||"root"},t),p.x=100,p.y=80,p.content=t.titles.t1,p.__textnode=!0,a[4].populate(p),e=a[2];const d={};a[5]=this.element({parent:e||"root"},t),d.y=150,d.x=100,a[5].populate(d),e=a[5];const h={};a[6]=this.element({parent:e||"root"},t),h.w=t.w,h.h=t.w-300,h.src=t.img,h.fit="{type: 'cover', position: { y: 0 } }",a[6].populate(h),e=a[5];const f={};a[7]=this.element({parent:e||"root"},t),f.w=t.w,f.h=t.w-300,f.src=t.img,f.fit="{ type: 'cover', position: { y: 0.5 } }",f.x=600,a[7].populate(f),e=a[5];const m={};a[8]=this.element({parent:e||"root"},t),m.w=t.w,m.h=t.w-300,m.src=t.img,m.fit="{ type: 'cover', position: { y: 1 } }",m.x=1200,a[8].populate(m),e=a[2];const g={};a[9]=this.element({parent:e||"root"},t),g.x=100,g.y=500,g.content=t.titles.t2,g.__textnode=!0,a[9].populate(g),e=a[2];const y={};a[10]=this.element({parent:e||"root"},t),y.y=600,y.x=100,a[10].populate(y),e=a[10];const v={};a[11]=this.element({parent:e||"root"},t),v.w=t.w,v.h=t.w-150,v.src=t.img,v.fit="{ type: 'cover', position: { x: 0 } }",a[11].populate(v),e=a[10];const b={};a[12]=this.element({parent:e||"root"},t),b.w=t.w,b.h=t.w-150,b.src=t.img,b.fit="{ type: 'cover', position: { x: 0.5 } }",b.x=600,a[12].populate(b),e=a[10];const x={};a[13]=this.element({parent:e||"root"},t),x.w=t.w,x.h=t.w-150,x.src=t.img,x.fit="{ type: 'cover', position: { x: 1 } }",x.x=1200,a[13].populate(x),e=a[0];const w={};a[14]=this.element({parent:e||"root"},t),w.x={transition:{value:t.pages.x2,duration:200}},w.y=90,a[14].populate(w),e=a[14];const S={};a[15]=this.element({parent:e||"root"},t),S.x=100,S.content="Image dimensions: 1440 X 2560",S.__textnode=!0,a[15].populate(S),e=a[14];const T={};a[16]=this.element({parent:e||"root"},t),T.x=100,T.y=80,T.content=t.titles.t3,T.__textnode=!0,a[16].populate(T),e=a[14];const k={};a[17]=this.element({parent:e||"root"},t),k.y=150,k.x=100,a[17].populate(k),e=a[17];const C={};a[18]=this.element({parent:e||"root"},t),C.w=t.w,C.h=t.w-200,C.src=t.img1,C.fit="{ type: 'cover', position: { y: 0, x: 0 } }",a[18].populate(C),e=a[17];const A={};a[19]=this.element({parent:e||"root"},t),A.w=t.w,A.h=t.w-200,A.src=t.img1,A.fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",A.x=600,a[19].populate(A),e=a[17];const E={};a[20]=this.element({parent:e||"root"},t),E.w=t.w,E.h=t.w-200,E.src=t.img1,E.fit="{ type: 'cover', position: { y: 1, x: 1 } }",E.x=1200,a[20].populate(E),e=a[14];const I={};a[21]=this.element({parent:e||"root"},t),I.x=100,I.y=500,I.content=t.titles.t4,I.__textnode=!0,a[21].populate(I),e=a[14];const M={};a[22]=this.element({parent:e||"root"},t),M.y=570,M.x=100,a[22].populate(M),e=a[22];const R={};a[23]=this.element({parent:e||"root"},t),R.w=t.w-350,R.h=t.w-100,R.src=t.img1,R.fit="{ type: 'cover', position: { x: 0 } }",a[23].populate(R),e=a[22];const _={};a[24]=this.element({parent:e||"root"},t),_.w=t.w-350,_.h=t.w-100,_.src=t.img1,_.fit="{ type: 'cover', position: { x: 0.25 } }",_.x=250,a[24].populate(_),e=a[22];const L={};a[25]=this.element({parent:e||"root"},t),L.w=t.w-350,L.h=t.w-100,L.src=t.img1,L.fit="{ type: 'cover', position: { x: 0.5 } }",L.x=500,a[25].populate(L),e=a[22];const D={};a[26]=this.element({parent:e||"root"},t),D.w=t.w-350,D.h=t.w-100,D.src=t.img1,D.fit="{ type: 'cover', position: { x: 0.75 } }",D.x=750,a[26].populate(D),e=a[22];const P={};a[27]=this.element({parent:e||"root"},t),P.w=t.w-350,P.h=t.w-100,P.src=t.img1,P.fit="{ type: 'cover', position: { x: 1 } }",P.x=1e3,a[27].populate(P),e=a[0];const O={};a[28]=this.element({parent:e||"root"},t),O.x={transition:{value:t.pages.x3,duration:200}},O.y=90,a[28].populate(O),e=a[28];const N={};a[29]=this.element({parent:e||"root"},t),N.x=100,N.content="Image dimensions: 2560 X 1440",N.__textnode=!0,a[29].populate(N),e=a[28];const U={};a[30]=this.element({parent:e||"root"},t),U.x=100,U.y=80,U.content=t.titles.t5,U.__textnode=!0,a[30].populate(U),e=a[28];const B={};a[31]=this.element({parent:e||"root"},t),B.y=150,B.x=100,B.w=t.w+100,B.h=t.w-200,B.color="0x000000ff",a[31].populate(B),e=a[31];const j={};a[32]=this.element({parent:e||"root"},t),j.w=t.w+100,j.h=t.w-200,j.src=t.img,j.fit="contain",a[32].populate(j),e=a[28];const F={};a[33]=this.element({parent:e||"root"},t),F.x=100,F.y=500,F.content=t.titles.t6,F.__textnode=!0,a[33].populate(F),e=a[28];const z={};a[34]=this.element({parent:e||"root"},t),z.y=550,z.x=100,z.w=t.w+100,z.h=t.w-100,z.color="0x000000ff",a[34].populate(z),e=a[34];const $={};a[35]=this.element({parent:e||"root"},t),$.w=t.w+100,$.h=t.w-100,$.src=t.img,$.fit="contain",a[35].populate($),e=a[0];const G={};return a[36]=this.element({parent:e||"root"},t),G.x=1700,G.y=20,G.content="Page "+t.activePage+"/"+t.totalPages,G.__textnode=!0,a[36].populate(G),a},effects:[function(e,t,n,o,i,r){t[2].set("x",{transition:{value:e.pages.x1,duration:200}})},function(e,t,n,o,i,r){t[3].set("content","Image dimensions: 2560 X 1440")},function(e,t,n,o,i,r){t[14].set("x",{transition:{value:e.pages.x2,duration:200}})},function(e,t,n,o,i,r){t[15].set("content","Image dimensions: 1440 X 2560")},function(e,t,n,o,i,r){t[28].set("x",{transition:{value:e.pages.x3,duration:200}})},function(e,t,n,o,i,r){t[29].set("content","Image dimensions: 2560 X 1440")},function(e,t,n,o,i,r){t[36].set("content","Page "+e.activePage+"/"+e.totalPages)}],context:{}},state:()=>({activePage:1,pages:{x1:0,x2:1920,x3:3840},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}),computed:{totalPages(){return this.pages,Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let e=1;e<=this.totalPages;e++)this.pages[`x${e}`]=this.pages[`x${e}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let e=this.totalPages;e>=1;e--)this.pages[`x${e}`]=this.pages[`x${e}`]+1920;this.activePage-=1}}}}),Ms=Ei.Component("Flags",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l=[];let u,c;const p=(n=[],o,i)=>{const s=r(n),a=new Set;let l=s.length;const p={}||{};u=p.from||0,c="to"in p?p.to:s.length;for(;l--;)s[l],l<c&&l>=u&&a.add(""+l);let d=i.length;for(;d--;)if(!1===a.has(i[d])){const e=i[d];o[1][e]&&o[1][e].destroy(),delete o[1][e],o[2][e]&&o[2][e].destroy(),delete o[2][e],o[3][e]&&o[3][e].destroy(),delete o[3][e]}i.length=0;const h=s.length;for(let r=0;r<h;r++){if(r<u||r>=c)continue;const n=Object.create(t);e=o[0],n.language=s[r],n.index=r,n.key=""+r,i.push(n.key),e=o[0],void 0===o[1]&&(o[1]={});const a={};void 0===o[1][n.key]&&(o[1][n.key]=this.element({parent:e||"root"},t)),a.x=250*n.index,void 0===o[1][n.key].nodeId&&o[1][n.key].populate(a),e=o[1][n.key],void 0===o[2]&&(o[2]={});const l={};void 0===o[2][n.key]&&(o[2][n.key]=this.element({parent:e||"root"},t)),l.src=n.language.flag,l.w=150,l.h=150,l.alpha=n.index===n.activeIndex?1:.6,void 0===o[2][n.key].nodeId&&o[2][n.key].populate(l),e=o[1][n.key],void 0===o[3]&&(o[3]={});const p={};void 0===o[3][n.key]&&(o[3][n.key]=this.element({parent:e||"root"},t)),p.content=n.language.name,p.y=150,p.maxwidth=150,p.align="center",p.color=n.index===n.activeIndex?"0xffffffff":"0xaaaaaaff",p.__textnode=!0,void 0===o[3][n.key].nodeId&&o[3][n.key].populate(p)}return[]};let d;const h=()=>{t[Symbol.for("removeGlobalEffects")](d),d=null,d=p(t.languages,a,l)};t[Symbol.for("effects")].push(h),i(h,["languages"]);const f=()=>{t.activeIndex;for(let e=0;e<t.languages.length;e++){if(e<u||e>=c)continue;const n={};n.index=e,n.language=t.languages[e],n.key=e,a[2][n.key].set("alpha",n.index===t.activeIndex?1:.6)}};t[Symbol.for("effects")].push(f),i(f);const m=()=>{t.activeIndex;for(let e=0;e<t.languages.length;e++){if(e<u||e>=c)continue;const n={};n.index=e,n.language=t.languages[e],n.key=e,a[3][n.key].set("color",n.index===t.activeIndex?"0xffffffff":"0xaaaaaaff")}};return t[Symbol.for("effects")].push(m),i(m),a},effects:[],context:{}},props:["languages"],state:()=>({activeIndex:0}),watch:{activeIndex(e){const t=this.languages[e];t&&t.code&&this.$language.set(t.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),Rs=Ei.Component("LanguagePlugin",{components:{Flags:Ms},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),!0===c&&(p-=1);const d=n.components&&n.components.Flags||o.Flags;e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===c?u:t),h.languages=t.languages,h.ref="flags",h.x=500,h.y=150;const f=[];if(void 0!==d)for(let w in d[Symbol.for("config")].props)delete h[d[Symbol.for("config")].props[w]],f.push(d[Symbol.for("config")].props[w]);a[1].populate(h),!0===c&&(p-=1),e=a[1];const m={};let g;if(m.languages=t.languages,m.ref="flags",m.x=500,m.y=150,l=m.is||"Flags","string"==typeof l){if(g=n.components&&n.components[l]||o[l],!g)throw new Error('Component "Flags" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(g=l);a[2]=g.call(null,{props:m},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],u=a[2],c=!0):e=a[2][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[0];const y={};a[3]=this.element({parent:e||"root"},!0===c?u:t),y.x=960,y.y=540,y.mount=.5,y.content=t.$language.translate("hello"),y.size=80,y.__textnode=!0,a[3].populate(y),!0===c&&(p-=1),e=a[0];const v={};a[4]=this.element({parent:e||"root"},!0===c?u:t),v.x=960,v.y=640,v.mount=.5,v.content=t.$language.translate("bye"),v.size=50,v.__textnode=!0,a[4].populate(v),!0===c&&(p-=1),e=a[0];const b={};a[5]=this.element({parent:e||"root"},!0===c?u:t),b.x=960,b.y=720,b.mount=.5,b.content=t.$language.translate("replacement",{first:"John",last:"Doe",age:18}),b.size=36,b.__textnode=!0,a[5].populate(b),!0===c&&(p-=1),e=a[0];const x={};return a[6]=this.element({parent:e||"root"},!0===c?u:t),x.size=32,x.x=960,x.y=940,x.mount=.5,x.align="center",x.content="Current language: "+t.$language.language+"\n Language file: "+(!0===t.loaded?"Loaded":"loading ..."),x.__textnode=!0,a[6].populate(x),!0===c&&(p-=1),a},effects:[function(e,t,n,o,i,r){t[3].set("content",e.$language.translate("hello"))},function(e,t,n,o,i,r){t[4].set("content",e.$language.translate("bye"))},function(e,t,n,o,i,r){t[5].set("content",e.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(e,t,n,o,i,r){t[6].set("content","Current language: "+e.$language.language+"\n Language file: "+(!0===e.loaded?"Loaded":"loading ..."))}],context:{}},state:()=>({loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}),hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.$select("flags").$focus()}}}),_s=Ei.Component("Box",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=430,l.h=180,l.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],l.color="{top: '0x667a97ff', bottom: '0x475569ff'}",a[0].populate(l),e=a[0];const u={};a[1]=this.element({parent:e||"root"},t),u.x=25,u.y=20,u.content=t.header,u.w=280,u.color="0x000000ff",u.contain="width",u.__textnode=!0,a[1].populate(u),e=a[0];const c={};return a[2]=this.element({parent:e||"root"},t),c.x=25,c.y=90,c.content=t.text,c.size=45,c.w=350,c.contain="width",c.align="center",c.__textnode=!0,a[2].populate(c),a},effects:[function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(e,t,n,o,i,r){t[1].set("content",e.header)},function(e,t,n,o,i,r){t[2].set("content",e.text)}],context:{}},props:["header","text"]}),Ls=Ei.Application({components:{Box:_s},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;const h={};a[0]=this.element({parent:e||"root"},!0===p?c:t),h.w=1920,h.h=1080,a[0].populate(h),!0===p&&(d-=1),e=a[0];const f={};a[1]=this.element({parent:e||"root"},!0===p?c:t),f.y=250,a[1].populate(f),!0===p&&(d-=1),e=a[1];const m={};a[2]=this.element({parent:e||"root"},!0===p?c:t),m.content="KeyCode Finder",m.font="raleway",m.mount="{x: 0.5}",m.x=960,m.size=62,m.w=800,m.h=200,m.contain="width",m.__textnode=!0,a[2].populate(m),!0===p&&(d-=1),e=a[1];const g={};a[3]=this.element({parent:e||"root"},!0===p?c:t),g.content="Press any key to get find the correct key code mapping",g.mount="{x: 0.5}",g.x=960,g.y=100,g.size=32,g.w=800,g.h=200,g.contain="width",g.__textnode=!0,a[3].populate(g),!0===p&&(d-=1),e=a[0];const y={};a[4]=this.element({parent:e||"root"},!0===p?c:t),y.x=200,a[4].populate(y),!0===p&&(d-=1);const v=n.components&&n.components.Box||o.Box;e=a[4];const b={};a[5]=this.element({parent:e||"root"},!0===p?c:t),b.y=600,b.header="Key",b.text=t.key;const x=[];if(void 0!==v)for(let P in v[Symbol.for("config")].props)delete b[v[Symbol.for("config")].props[P]],x.push(v[Symbol.for("config")].props[P]);a[5].populate(b),!0===p&&(d-=1),e=a[5];const w={};let S;if(w.y=600,w.header="Key",u=t.key,!0===Array.isArray(u)&&(u=r(u).slice(0)),w.text=u,l=w.is||"Box","string"==typeof l){if(S=n.components&&n.components[l]||o[l],!S)throw new Error('Component "Box" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(S=l);a[6]=S.call(null,{props:w},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],c=a[6],p=!0):e=a[6][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const T=n.components&&n.components.Box||o.Box;e=a[4];const k={};a[7]=this.element({parent:e||"root"},!0===p?c:t),k.x=500,k.y=600,k.header="Code",k.text=t.code;const C=[];if(void 0!==T)for(let P in T[Symbol.for("config")].props)delete k[T[Symbol.for("config")].props[P]],C.push(T[Symbol.for("config")].props[P]);a[7].populate(k),!0===p&&(d-=1),e=a[7];const A={};let E;if(A.x=500,A.y=600,A.header="Code",u=t.code,!0===Array.isArray(u)&&(u=r(u).slice(0)),A.text=u,l=A.is||"Box","string"==typeof l){if(E=n.components&&n.components[l]||o[l],!E)throw new Error('Component "Box" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(E=l);a[8]=E.call(null,{props:A},a[7],t),a[8][Symbol.for("slots")][0]?(e=a[8][Symbol.for("slots")][0],c=a[8],p=!0):e=a[8][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const I=n.components&&n.components.Box||o.Box;e=a[4];const M={};a[9]=this.element({parent:e||"root"},!0===p?c:t),M.x=1e3,M.y=600,M.header="keyCode",M.text=t.keyCode;const R=[];if(void 0!==I)for(let P in I[Symbol.for("config")].props)delete M[I[Symbol.for("config")].props[P]],R.push(I[Symbol.for("config")].props[P]);a[9].populate(M),!0===p&&(d-=1),e=a[9];const _={};let L;if(_.x=1e3,_.y=600,_.header="keyCode",u=t.keyCode,!0===Array.isArray(u)&&(u=r(u).slice(0)),_.text=u,l=_.is||"Box","string"==typeof l){if(L=n.components&&n.components[l]||o[l],!L)throw new Error('Component "Box" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(L=l);a[10]=L.call(null,{props:_},a[9],t),a[10][Symbol.for("slots")][0]?(e=a[10][Symbol.for("slots")][0],c=a[10],p=!0):e=a[10][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=a[0];const D={};return a[11]=this.element({parent:e||"root"},!0===p?c:t),D.mount="{x: 1}",D.x=1860,D.y=1e3,D.size=30,D.content=t.backLabel,D.color=t.backPressed?"0xffffffff":"0x667a97ff",D.__textnode=!0,a[11].populate(D),!0===p&&(d-=1),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip5&&-1!==skip5.indexOf("text")||t[5].set("text",e.key)},function(e,t,n,o,i,r){t[6][Symbol.for("props")].text=e.key},function(e,t,n,o,i,r){"undefined"!=typeof skip7&&-1!==skip7.indexOf("text")||t[7].set("text",e.code)},function(e,t,n,o,i,r){t[8][Symbol.for("props")].text=e.code},function(e,t,n,o,i,r){"undefined"!=typeof skip9&&-1!==skip9.indexOf("text")||t[9].set("text",e.keyCode)},function(e,t,n,o,i,r){t[10][Symbol.for("props")].text=e.keyCode},function(e,t,n,o,i,r){t[11].set("content",e.backLabel)},function(e,t,n,o,i,r){t[11].set("color",e.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state:()=>({backPressed:!1,key:"...",code:"...",keyCode:"..."}),computed:{backLabel(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels(e){this.key=e.key,this.code=e.code,this.keyCode=e.keyCode+""}},input:{any(e){this.backPressed=!1,this.updateLabels(e)},back(e){return!0===this.backPressed?this.$router.back():this.updateLabels(e),()=>{this.backPressed=!0}}}}),Ds=Ei.Component("Accent",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=300,l.h=250,l.color=t.bColor,l.effects=[{type:"radius",props:{radius:8}}],a[0].populate(l),e=a[0];const u={};return a[1]=this.element({parent:e||"root"},t),u.x=150,u.y=125,u.mount="{x:0.5, y:0.5}",u.content=t.lang,u.color="0xffffffff",u.font="lato-black",u.__textnode=!0,a[1].populate(u),a},effects:[function(e,t,n,o,i,r){t[0].set("color",e.bColor)},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[1].set("content",e.lang)}],context:{}},state:()=>({bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}),props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),Ps=Ei.Component("Accents",{components:{Accent:Ds},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===p?c:t),d.x={transition:t.x},a[1].populate(d),e=a[1];const h=[];let f,m;const g=(s=[],a,d)=>{const h=r(s),g=new Set;let y=h.length;const v={}||{};f=v.from||0,m="to"in v?v.to:h.length;for(;y--;){const e=h[y];y<m&&y>=f&&g.add(""+e.lang)}let b=d.length;for(;b--;)if(!1===g.has(d[b])){const e=d[b];a[2][e]&&a[2][e].destroy(),delete a[2][e],a[3][e]&&a[3][e].destroy(),delete a[3][e]}d.length=0;const x=h.length,w=[];for(let S=0;S<x;S++){if(S<f||S>=m)continue;const s=Object.create(t);e=a[1],s.item=h[S],s.index=S,s.key=""+s.item.lang,d.push(s.key);const g=n.components&&n.components.Accent||o.Accent;void 0===a[2]&&(a[2]={});const y={};void 0===a[2][s.key]&&(a[2][s.key]=this.element({parent:e||"root"},!0===p?c:t)),y.lang=s.item.lang,y.ref="accent"+s.index,y.x=400*s.index;const v=[];if(void 0!==g)for(let e in g[Symbol.for("config")].props)delete y[g[Symbol.for("config")].props[e]],v.push(g[Symbol.for("config")].props[e]);void 0===a[2][s.key].nodeId&&a[2][s.key].populate(y),void 0===a[3]&&(a[3]={}),e=a[2][s.key];const b={};if(void 0===a[3][s.key]){let i;if(b.lang=s.item.lang,u="accent"+s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.ref=u,b.x=400*s.index,l=b.is||"Accent","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Accent" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[3][s.key]=i.call(null,{props:b},a[2][s.key],t),a[3][s.key][Symbol.for("slots")][0]?(e=a[3][s.key][Symbol.for("slots")][0],c=a[3][s.key],p=!0):e=a[3][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==v&&-1!==v.indexOf("ref")||a[2][s.key].set("ref","accent"+s.index)};i(x,null),w.push(x),t[Symbol.for("effects")].push(x),a[3][s.key][Symbol.for("props")].ref="accent"+s.index}return w};let y;const v=()=>{t[Symbol.for("removeGlobalEffects")](y),y=null,y=g(t.data,a,h)};t[Symbol.for("effects")].push(v),i(v,["data"]),e=a[0];const b={};return a[4]=this.element({parent:e||"root"},!0===p?c:t),b.content=t.activeAccent,b.font="lato-black",b.x=960,b.y=400,b.mount="{x:0.5}",b.letterspacing=10,b.size=40,b.__textnode=!0,a[4].populate(b),a},effects:[function(e,t,n,o,i,r){t[1].set("x",{transition:e.x})},function(e,t,n,o,i,r){t[4].set("content",e.activeAccent)}],context:{}},props:["data"],state:()=>({x:160,activeIndex:0,activeAccent:""}),watch:{activeIndex(e){const t=this.$select(`accent${e}`);t&&t.$focus&&(t.$focus(),this.activeAccent=this.data[e].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(e){const t=this.activeIndex+e;this.x=t>3?400*-(t-3)-160:160,this.activeIndex=t}}}),Os=Ei.Component("Characters",{components:{Accents:Ps},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;const d={};a[0]=this.element({parent:e||"root"},!0===c?u:t),d.w=1920,a[0].populate(d),!0===c&&(p-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===c?u:t),h.x=960,h.y=50,h.mount="{x:0.5}",h.content="Alphabets",h.font="lato-black",h.size=60,h.__textnode=!0,a[1].populate(h),!0===c&&(p-=1),e=a[0];const f={};a[2]=this.element({parent:e||"root"},!0===c?u:t),f.x=960,f.y=150,f.mount="{x:0.5}",f.content=t.alphabets,f.font="lato-black",f.size=40,f.letterspacing=10,f.__textnode=!0,a[2].populate(f),!0===c&&(p-=1),e=a[0];const m={};a[3]=this.element({parent:e||"root"},!0===c?u:t),m.x=960,m.y=290,m.mount="{x:0.5}",m.content="Accents",m.font="lato-black",m.size=60,m.__textnode=!0,a[3].populate(m),!0===c&&(p-=1);const g=n.components&&n.components.Accents||o.Accents;e=a[0];const y={};a[4]=this.element({parent:e||"root"},!0===c?u:t),y.data=t.accents,y.y=400,y.ref="accents";const v=[];if(void 0!==g)for(let T in g[Symbol.for("config")].props)delete y[g[Symbol.for("config")].props[T]],v.push(g[Symbol.for("config")].props[T]);a[4].populate(y),!0===c&&(p-=1),e=a[4];const b={};let x;if(b.data=t.accents,b.y=400,b.ref="accents",l=b.is||"Accents","string"==typeof l){if(x=n.components&&n.components[l]||o[l],!x)throw new Error('Component "Accents" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(x=l);a[5]=x.call(null,{props:b},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],u=a[5],c=!0):e=a[5][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[0];const w={};a[6]=this.element({parent:e||"root"},!0===c?u:t),w.w=950,w.h=40,w.color="0x000000ff",w.effects=[{type:"radius",props:{radius:10}}],w.y=1e3,w.placement="center",a[6].populate(w),!0===c&&(p-=1),e=a[6];const S={};return a[7]=this.element({parent:e||"root"},!0===c?u:t),S.content="The character ? represents a character that is not supported by the Lato-Black font",S.size=25,S.x=475,S.y=20,S.mount="{x:0.5, y:0.5}",S.__textnode=!0,a[7].populate(S),!0===c&&(p-=1),a},effects:[function(e,t,n,o,i,r){t[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state:()=>({alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}),hooks:{focus(){const e=this.$select("accents");e&&e.$focus&&e.$focus()}}}),Ns=Ei.Component("Layout",{components:{Ball:ys},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;const d={};a[0]=this.element({parent:e||"root"},!0===c?u:t),d.w=1920,d.h=1080,d.color="0xc4b5fdff",a[0].populate(d),!0===c&&(p-=1),e=a[0];const h={};a[1]=this.element({parent:e||"root"},!0===c?u:t),h.x=40,h.y=40,a[1].populate(h),!0===c&&(p-=1),e=a[1];const f={};a[2]=this.element({parent:e||"root"},!0===c?u:t),f.color="0x222222ff",f.content="Static horizontal Layout",f.__textnode=!0,a[2].populate(f),!0===c&&(p-=1),e=a[1];const m={};a[3]=this.element({parent:e||"root"},!0===c?u:t),m.y=50,m.gap=10,m.__layout=!0,a[3].populate(m),!0===c&&(p-=1),e=a[3];const g={};a[4]=this.element({parent:e||"root"},!0===c?u:t),g.w=50,g.h=100,g.color="0xeff6ffff",a[4].populate(g),!0===c&&(p-=1),e=a[3];const y={};a[5]=this.element({parent:e||"root"},!0===c?u:t),y.w=60,y.h=100,y.color="0xbfdbfeff",a[5].populate(y),!0===c&&(p-=1),e=a[3];const v={};a[6]=this.element({parent:e||"root"},!0===c?u:t),v.w=70,v.h=100,v.color="0x60a5faff",a[6].populate(v),!0===c&&(p-=1),e=a[3];const b={};a[7]=this.element({parent:e||"root"},!0===c?u:t),b.w=80,b.h=100,b.color="0x2563ebff",a[7].populate(b),!0===c&&(p-=1),e=a[3];const x={};a[8]=this.element({parent:e||"root"},!0===c?u:t),x.w=90,x.h=100,x.color="0x1e40afff",a[8].populate(x),!0===c&&(p-=1),e=a[0];const w={};a[9]=this.element({parent:e||"root"},!0===c?u:t),w.x=40,w.y=220,a[9].populate(w),!0===c&&(p-=1),e=a[9];const S={};a[10]=this.element({parent:e||"root"},!0===c?u:t),S.color="0x222222ff",S.content="Static vertical Layout",S.__textnode=!0,a[10].populate(S),!0===c&&(p-=1),e=a[9];const T={};a[11]=this.element({parent:e||"root"},!0===c?u:t),T.y=50,T.gap=10,T.direction="vertical",T.__layout=!0,a[11].populate(T),!0===c&&(p-=1),e=a[11];const k={};a[12]=this.element({parent:e||"root"},!0===c?u:t),k.w=100,k.h=50,k.color="0xeff6ffff",a[12].populate(k),!0===c&&(p-=1),e=a[11];const C={};a[13]=this.element({parent:e||"root"},!0===c?u:t),C.w=100,C.h=60,C.color="0xbfdbfeff",a[13].populate(C),!0===c&&(p-=1),e=a[11];const A={};a[14]=this.element({parent:e||"root"},!0===c?u:t),A.w=100,A.h=70,A.color="0x60a5faff",a[14].populate(A),!0===c&&(p-=1),e=a[11];const E={};a[15]=this.element({parent:e||"root"},!0===c?u:t),E.w=100,E.h=80,E.color="0x2563ebff",a[15].populate(E),!0===c&&(p-=1),e=a[11];const I={};a[16]=this.element({parent:e||"root"},!0===c?u:t),I.w=100,I.h=90,I.color="0x1e40afff",a[16].populate(I),!0===c&&(p-=1),e=a[0];const M={};a[17]=this.element({parent:e||"root"},!0===c?u:t),M.x=40,M.y=700,a[17].populate(M),!0===c&&(p-=1),e=a[17];const R={};a[18]=this.element({parent:e||"root"},!0===c?u:t),R.color="0x222222ff",R.content="Nested Layouts",R.__textnode=!0,a[18].populate(R),!0===c&&(p-=1),e=a[17];const _={};a[19]=this.element({parent:e||"root"},!0===c?u:t),_.y=50,_.gap=10,_.direction="horizontal",_.__layout=!0,a[19].populate(_),!0===c&&(p-=1),e=a[19];const L={};a[20]=this.element({parent:e||"root"},!0===c?u:t),L.w=100,L.h=50,L.color="0xeff6ffff",a[20].populate(L),!0===c&&(p-=1),e=a[19];const D={};a[21]=this.element({parent:e||"root"},!0===c?u:t),D.w=100,D.h=60,D.color="0xbfdbfeff",a[21].populate(D),!0===c&&(p-=1),e=a[19];const P={};a[22]=this.element({parent:e||"root"},!0===c?u:t),P.direction="vertical",P.gap=10,P.__layout=!0,a[22].populate(P),!0===c&&(p-=1),e=a[22];const O={};a[23]=this.element({parent:e||"root"},!0===c?u:t),O.w=100,O.h=70,O.color="0x60a5faff",a[23].populate(O),!0===c&&(p-=1),e=a[22];const N={};a[24]=this.element({parent:e||"root"},!0===c?u:t),N.w=100,N.h=70,N.color="0x60a5faff",a[24].populate(N),!0===c&&(p-=1),e=a[22];const U={};a[25]=this.element({parent:e||"root"},!0===c?u:t),U.w=100,U.h=70,U.color="0x60a5faff",a[25].populate(U),!0===c&&(p-=1),e=a[22];const B={};a[26]=this.element({parent:e||"root"},!0===c?u:t),B.gap=50,B.__layout=!0,a[26].populate(B),!0===c&&(p-=1),e=a[26];const j={};a[27]=this.element({parent:e||"root"},!0===c?u:t),j.w=50,j.h=50,j.color="0x2563ebff",a[27].populate(j),!0===c&&(p-=1),e=a[26];const F={};a[28]=this.element({parent:e||"root"},!0===c?u:t),F.w=50,F.h=50,F.color="0x2563ebff",a[28].populate(F),!0===c&&(p-=1),e=a[26];const z={};a[29]=this.element({parent:e||"root"},!0===c?u:t),z.w=50,z.h=50,z.color="0x2563ebff",a[29].populate(z),!0===c&&(p-=1),e=a[19];const $={};a[30]=this.element({parent:e||"root"},!0===c?u:t),$.w=100,$.h=80,$.color="0x2563ebff",a[30].populate($),!0===c&&(p-=1),e=a[19];const G={};a[31]=this.element({parent:e||"root"},!0===c?u:t),G.w=100,G.h=90,G.color="0x1e40afff",a[31].populate(G),!0===c&&(p-=1),e=a[0];const V={};a[32]=this.element({parent:e||"root"},!0===c?u:t),V.x=800,V.y=40,a[32].populate(V),!0===c&&(p-=1),e=a[32];const H={};a[33]=this.element({parent:e||"root"},!0===c?u:t),H.color="0x222222ff",H.content="Layout with Text",H.__textnode=!0,a[33].populate(H),!0===c&&(p-=1),e=a[32];const q={};a[34]=this.element({parent:e||"root"},!0===c?u:t),q.y=50,q.gap=20,q.__layout=!0,a[34].populate(q),!0===c&&(p-=1),e=a[34];const X={};a[35]=this.element({parent:e||"root"},!0===c?u:t),X.w=3,X.h=32,X.color="0x60a5faff",a[35].populate(X),!0===c&&(p-=1),e=a[34];const W={};a[36]=this.element({parent:e||"root"},!0===c?u:t),W.color="0x1e40afff",W.content="Hello",W.__textnode=!0,a[36].populate(W),!0===c&&(p-=1),e=a[34];const K={};a[37]=this.element({parent:e||"root"},!0===c?u:t),K.w=3,K.h=32,K.color="0x60a5faff",a[37].populate(K),!0===c&&(p-=1),e=a[34];const Y={};a[38]=this.element({parent:e||"root"},!0===c?u:t),Y.content="World",Y.color="0x1e40afff",Y.__textnode=!0,a[38].populate(Y),!0===c&&(p-=1),e=a[34];const Q={};a[39]=this.element({parent:e||"root"},!0===c?u:t),Q.w=3,Q.h=32,Q.color="0x60a5faff",a[39].populate(Q),!0===c&&(p-=1),e=a[0];const J={};a[40]=this.element({parent:e||"root"},!0===c?u:t),J.x=800,J.y=210,a[40].populate(J),!0===c&&(p-=1),e=a[40];const Z={};a[41]=this.element({parent:e||"root"},!0===c?u:t),Z.color="0x222222ff",Z.content="Dynamic dimensions Layout",Z.__textnode=!0,a[41].populate(Z),!0===c&&(p-=1),e=a[40];const ee={};a[42]=this.element({parent:e||"root"},!0===c?u:t),ee.y=50,ee.gap=20,ee["@updated"]=t.dynamicLayoutUpdated&&t.dynamicLayoutUpdated.bind(t),ee.__layout=!0,a[42].populate(ee),!0===c&&(p-=1),e=a[42];const te={};a[43]=this.element({parent:e||"root"},!0===c?u:t),te.w=.5*t.w,te.h=60,te.color="0xeff6ffff",a[43].populate(te),!0===c&&(p-=1),e=a[42];const ne={};a[44]=this.element({parent:e||"root"},!0===c?u:t),ne.w=.6*t.w,ne.h=60,ne.color="0xbfdbfeff",a[44].populate(ne),!0===c&&(p-=1),e=a[42];const oe={};a[45]=this.element({parent:e||"root"},!0===c?u:t),oe.w=.7*t.w,oe.h=60,oe.color="0x60a5faff",a[45].populate(oe),!0===c&&(p-=1),e=a[42];const ie={};a[46]=this.element({parent:e||"root"},!0===c?u:t),ie.w=.8*t.w,ie.h=60,ie.color="0x2563ebff",a[46].populate(ie),!0===c&&(p-=1),e=a[42];const re={};a[47]=this.element({parent:e||"root"},!0===c?u:t),re.w=.9*t.w,re.h=60,re.color="0x1e40afff",a[47].populate(re),!0===c&&(p-=1),e=a[0];const se={};a[48]=this.element({parent:e||"root"},!0===c?u:t),se.x=800,se.y=400,a[48].populate(se),!0===c&&(p-=1),e=a[48];const ae={};a[49]=this.element({parent:e||"root"},!0===c?u:t),ae.color="0x222222ff",ae.content="For loop Layout",ae.__textnode=!0,a[49].populate(ae),!0===c&&(p-=1),e=a[48];const le={};a[50]=this.element({parent:e||"root"},!0===c?u:t),le.y=50,le.gap=20,le.__layout=!0,a[50].populate(le),!0===c&&(p-=1),e=a[50];const ue=[];let ce,pe;const de=(n=[],o,i)=>{const s=r(n),a=new Set;let l=s.length;const d={}||{};ce=d.from||0,pe="to"in d?d.to:s.length;for(;l--;)s[l],l<pe&&l>=ce&&a.add(""+l);let h=i.length;for(;h--;)if(!1===a.has(i[h])){const e=i[h];o[51][e]&&o[51][e].destroy(),delete o[51][e]}i.length=0;const f=s.length;for(let r=0;r<f;r++){if(r<ce||r>=pe)continue;const n=Object.create(t);e=o[50],n.color=s[r],n[void 0]=r,n.key=""+r,i.push(n.key),e=o[50],void 0===o[51]&&(o[51]={});const a={};void 0===o[51][n.key]&&(o[51][n.key]=this.element({parent:e||"root"},!0===c?u:t)),a.w=60,a.h=60,a.color=n.color,void 0===o[51][n.key].nodeId&&(o[51][n.key].populate(a),!0===c&&(p-=1))}return[]};let he;const fe=()=>{t[Symbol.for("removeGlobalEffects")](he),he=null,he=de(t.colors,a,ue)};t[Symbol.for("effects")].push(fe),i(fe,["colors"]);const me=()=>{t.color;for(let e=0;e<t.colors.length;e++){if(e<ce||e>=pe)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[51][n.key].set("color",n.color)}};t[Symbol.for("effects")].push(me),i(me),e=a[0];const ge={};a[52]=this.element({parent:e||"root"},!0===c?u:t),ge.x=800,ge.y=600,a[52].populate(ge),!0===c&&(p-=1),e=a[52];const ye={};a[53]=this.element({parent:e||"root"},!0===c?u:t),ye.color="0x222222ff",ye.content="Layout with transitions",ye.__textnode=!0,a[53].populate(ye),!0===c&&(p-=1),e=a[52];const ve={};a[54]=this.element({parent:e||"root"},!0===c?u:t),ve.direction="horizontal",ve.gap=20,ve.y=60,ve.__layout=!0,a[54].populate(ve),!0===c&&(p-=1),e=a[54];const be=[];let xe,we;const Se=(n=[],o,i)=>{const s=r(n),a=new Set;let l=s.length;const d={}||{};xe=d.from||0,we="to"in d?d.to:s.length;for(;l--;)s[l],l<we&&l>=xe&&a.add(""+l);let h=i.length;for(;h--;)if(!1===a.has(i[h])){const e=i[h];o[55][e]&&o[55][e].destroy(),delete o[55][e],o[56][e]&&o[56][e].destroy(),delete o[56][e],o[57][e]&&o[57][e].destroy(),delete o[57][e],o[58][e]&&o[58][e].destroy(),delete o[58][e],o[59][e]&&o[59][e].destroy(),delete o[59][e],o[60][e]&&o[60][e].destroy(),delete o[60][e]}i.length=0;const f=s.length;for(let r=0;r<f;r++){if(r<xe||r>=we)continue;const n=Object.create(t);e=o[54],n.color=s[r],n[void 0]=r,n.key=""+r,i.push(n.key),e=o[54],void 0===o[55]&&(o[55]={});const a={};void 0===o[55][n.key]&&(o[55][n.key]=this.element({parent:e||"root"},!0===c?u:t)),a.h=100,a.w={transition:{value:n.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},a.color=n.color,void 0===o[55][n.key].nodeId&&(o[55][n.key].populate(a),!0===c&&(p-=1)),e=o[55][n.key],void 0===o[56]&&(o[56]={});const l={};void 0===o[56][n.key]&&(o[56][n.key]=this.element({parent:e||"root"},!0===c?u:t)),l.gap=10,l.x=10,l.y=35,l.__layout=!0,void 0===o[56][n.key].nodeId&&(o[56][n.key].populate(l),!0===c&&(p-=1)),e=o[56][n.key],void 0===o[57]&&(o[57]={});const d={};void 0===o[57][n.key]&&(o[57][n.key]=this.element({parent:e||"root"},!0===c?u:t)),d.h=20,d.w={transition:{value:n.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},d.color="0xffffffff",void 0===o[57][n.key].nodeId&&(o[57][n.key].populate(d),!0===c&&(p-=1)),e=o[56][n.key],void 0===o[58]&&(o[58]={});const h={};void 0===o[58][n.key]&&(o[58][n.key]=this.element({parent:e||"root"},!0===c?u:t)),h.h=20,h.w={transition:{value:n.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},h.color="0xccccccff",void 0===o[58][n.key].nodeId&&(o[58][n.key].populate(h),!0===c&&(p-=1)),e=o[56][n.key],void 0===o[59]&&(o[59]={});const f={};void 0===o[59][n.key]&&(o[59][n.key]=this.element({parent:e||"root"},!0===c?u:t)),f.h=20,f.w={transition:{value:n.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},f.color="0x333333ff",void 0===o[59][n.key].nodeId&&(o[59][n.key].populate(f),!0===c&&(p-=1)),e=o[56][n.key],void 0===o[60]&&(o[60]={});const m={};void 0===o[60][n.key]&&(o[60][n.key]=this.element({parent:e||"root"},!0===c?u:t)),m.h=20,m.w={transition:{value:n.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},m.color="0x000000ff",void 0===o[60][n.key].nodeId&&(o[60][n.key].populate(m),!0===c&&(p-=1))}return[]};let Te;const ke=()=>{t[Symbol.for("removeGlobalEffects")](Te),Te=null,Te=Se(t.colors,a,be)};t[Symbol.for("effects")].push(ke),i(ke,["colors"]);const Ce=()=>{t.w3;for(let e=0;e<t.colors.length;e++){if(e<xe||e>=we)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[55][n.key].set("w",{transition:{value:t.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Ce),i(Ce);const Ae=()=>{t.color;for(let e=0;e<t.colors.length;e++){if(e<xe||e>=we)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[55][n.key].set("color",n.color)}};t[Symbol.for("effects")].push(Ae),i(Ae);const Ee=()=>{t.w2;for(let e=0;e<t.colors.length;e++){if(e<xe||e>=we)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[57][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Ee),i(Ee);const Ie=()=>{t.w2;for(let e=0;e<t.colors.length;e++){if(e<xe||e>=we)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[58][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Ie),i(Ie);const Me=()=>{t.w2;for(let e=0;e<t.colors.length;e++){if(e<xe||e>=we)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[59][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Me),i(Me);const Re=()=>{t.w2;for(let e=0;e<t.colors.length;e++){if(e<xe||e>=we)continue;const n={};n[void 0]=e,n.color=t.colors[e],n.key=e,a[60][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Re),i(Re),e=a[0];const _e={};a[61]=this.element({parent:e||"root"},!0===c?u:t),_e.x=800,_e.y=840,a[61].populate(_e),!0===c&&(p-=1),e=a[61];const Le={};a[62]=this.element({parent:e||"root"},!0===c?u:t),Le.color="0x222222ff",Le.content="Layout with padding",Le.__textnode=!0,a[62].populate(Le),!0===c&&(p-=1),e=a[61];const De={};a[63]=this.element({parent:e||"root"},!0===c?u:t),De.direction="horizontal",De.gap=20,De.y=60,De.padding=20,De.color="0xffffffff",De.__layout=!0,a[63].populate(De),!0===c&&(p-=1),e=a[63];const Pe={};a[64]=this.element({parent:e||"root"},!0===c?u:t),Pe.w=40,Pe.h=40,Pe.color="0xbfdbfeff",a[64].populate(Pe),!0===c&&(p-=1),e=a[63];const Oe={};a[65]=this.element({parent:e||"root"},!0===c?u:t),Oe.w=40,Oe.h=40,Oe.color="0x60a5faff",a[65].populate(Oe),!0===c&&(p-=1),e=a[63];const Ne={};a[66]=this.element({parent:e||"root"},!0===c?u:t),Ne.w=40,Ne.h=40,Ne.color="0x2563ebff",a[66].populate(Ne),!0===c&&(p-=1),e=a[61];const Ue={};a[67]=this.element({parent:e||"root"},!0===c?u:t),Ue.direction="horizontal",Ue.gap=20,Ue.y=60,Ue.x=240,Ue.padding={top:40,y:10,left:40,x:10},Ue.color="0xffffffff",Ue.__layout=!0,a[67].populate(Ue),!0===c&&(p-=1),e=a[67];const Be={};a[68]=this.element({parent:e||"root"},!0===c?u:t),Be.w=40,Be.h=40,Be.color="0xbfdbfeff",a[68].populate(Be),!0===c&&(p-=1),e=a[67];const je={};a[69]=this.element({parent:e||"root"},!0===c?u:t),je.w=40,je.h=40,je.color="0x60a5faff",a[69].populate(je),!0===c&&(p-=1),e=a[67];const Fe={};a[70]=this.element({parent:e||"root"},!0===c?u:t),Fe.w=40,Fe.h=40,Fe.color="0x2563ebff",a[70].populate(Fe),!0===c&&(p-=1),e=a[61];const ze={};a[71]=this.element({parent:e||"root"},!0===c?u:t),ze.direction="vertical",ze.gap=20,ze.y=60,ze.x=500,ze.padding=20,ze.color="0xffffffff",ze.__layout=!0,a[71].populate(ze),!0===c&&(p-=1),e=a[71];const $e={};a[72]=this.element({parent:e||"root"},!0===c?u:t),$e.w=40,$e.h=20,$e.color="0xbfdbfeff",a[72].populate($e),!0===c&&(p-=1),e=a[71];const Ge={};a[73]=this.element({parent:e||"root"},!0===c?u:t),Ge.w=40,Ge.h=20,Ge.color="0x60a5faff",a[73].populate(Ge),!0===c&&(p-=1),e=a[71];const Ve={};a[74]=this.element({parent:e||"root"},!0===c?u:t),Ve.w=40,Ve.h=20,Ve.color="0x2563ebff",a[74].populate(Ve),!0===c&&(p-=1),e=a[61];const He={};a[75]=this.element({parent:e||"root"},!0===c?u:t),He.direction="vertical",He.gap=20,He.y=60,He.x=640,He.padding={top:40,y:10,left:40,x:10},He.color="0xffffffff",He.__layout=!0,a[75].populate(He),!0===c&&(p-=1),e=a[75];const qe={};a[76]=this.element({parent:e||"root"},!0===c?u:t),qe.w=40,qe.h=20,qe.color="0xbfdbfeff",a[76].populate(qe),!0===c&&(p-=1),e=a[75];const Xe={};a[77]=this.element({parent:e||"root"},!0===c?u:t),Xe.w=40,Xe.h=20,Xe.color="0x60a5faff",a[77].populate(Xe),!0===c&&(p-=1),e=a[75];const We={};a[78]=this.element({parent:e||"root"},!0===c?u:t),We.w=40,We.h=20,We.color="0x2563ebff",a[78].populate(We),!0===c&&(p-=1),e=a[0];const Ke={};a[79]=this.element({parent:e||"root"},!0===c?u:t),Ke.x=1300,Ke.y=210,a[79].populate(Ke),!0===c&&(p-=1),e=a[79];const Ye={};a[80]=this.element({parent:e||"root"},!0===c?u:t),Ye.color="0x222222ff",Ye.content="Layout with a Component",Ye.__textnode=!0,a[80].populate(Ye),!0===c&&(p-=1),e=a[79];const Qe={};a[81]=this.element({parent:e||"root"},!0===c?u:t),Qe.y=50,Qe.gap=40,Qe.__layout=!0,a[81].populate(Qe),!0===c&&(p-=1),e=a[81];const Je={};a[82]=this.element({parent:e||"root"},!0===c?u:t),Je.w=100,Je.h=100,Je.color="0xff0000ff",a[82].populate(Je),!0===c&&(p-=1),e=a[81];const Ze={};a[83]=this.element({parent:e||"root"},!0===c?u:t),Ze.w=t.w,Ze.h=100,Ze.color="0xff0000ff",a[83].populate(Ze),!0===c&&(p-=1);const et=n.components&&n.components.Ball||o.Ball;e=a[81];const tt={};a[84]=this.element({parent:e||"root"},!0===c?u:t),tt.y=500,tt.w=100;const nt=[];if(void 0!==et)for(let st in et[Symbol.for("config")].props)delete tt[et[Symbol.for("config")].props[st]],nt.push(et[Symbol.for("config")].props[st]);a[84].populate(tt),!0===c&&(p-=1),e=a[84];const ot={};let it;if(ot.y=500,ot.w=100,l=ot.is||"Ball","string"==typeof l){if(it=n.components&&n.components[l]||o[l],!it)throw new Error('Component "Ball" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(it=l);a[85]=it.call(null,{props:ot},a[84],t),a[85][Symbol.for("slots")][0]?(e=a[85][Symbol.for("slots")][0],u=a[85],c=!0):e=a[85][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[81];const rt={};return a[86]=this.element({parent:e||"root"},!0===c?u:t),rt.w=100,rt.h=100,rt.color="0xff0000ff",a[86].populate(rt),!0===c&&(p-=1),a},effects:[function(e,t,n,o,i,r){t[43].set("w",.5*e.w)},function(e,t,n,o,i,r){t[44].set("w",.6*e.w)},function(e,t,n,o,i,r){t[45].set("w",.7*e.w)},function(e,t,n,o,i,r){t[46].set("w",.8*e.w)},function(e,t,n,o,i,r){t[47].set("w",.9*e.w)},function(e,t,n,o,i,r){t[67].set("padding",{top:40,y:10,left:40,x:10})},function(e,t,n,o,i,r){t[75].set("padding",{top:40,y:10,left:40,x:10})},function(e,t,n,o,i,r){t[83].set("w",e.w)}],context:{}},state:()=>({w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}),hooks:{ready(){this.$setInterval(()=>{this.w=100===this.w?50:100,this.w2=20===this.w2?40:20,this.w3=150===this.w3?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(e){this.$log.info("Dynamic layout updated",e.w,e.h)}}}),Us="undefined"!=typeof window?window:{};let Bs;let js;const Fs=[],zs={};let $s,Gs;function Vs(e){let t;try{t=function(e,t){let n=function(e={},t){const n=t.split(".");let o=e;for(let i=0;i<n.length;i++)o=(Object.entries(o).find(([e,t])=>e.toLowerCase()===n[i].toLowerCase())||[null,{}])[1];return o}(js,e);e.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(n={event:e,listening:!0});return"function"==typeof n?null==t?n():n(t):n}(e.method,e.params)}catch(n){setTimeout(()=>$s(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:e.id})))}setTimeout(()=>$s(JSON.stringify({jsonrpc:"2.0",result:t,id:e.id})))}function Hs(e,t,n){const o=Object.entries(zs).find(([n,o])=>o.toLowerCase()===e.toLowerCase()+"."+t.toLowerCase());if(o){let e=JSON.stringify({jsonrpc:"2.0",id:parseInt(o[0]),result:n});$s(e)}}Us.__firebolt&&Us.__firebolt.testHarness&&(Gs=Us.__firebolt.testHarness);const qs={send:function e(t){console.debug("Sending message to transport: "+t);let n=JSON.parse(t);if(Array.isArray(n))return void n.forEach(t=>e(JSON.stringify(t)));let[o,i]=n.method.split(".");Gs&&Gs.onSend&&Gs.onSend(o,i,n.params,n.id),i.match(/^on[A-Z]/)&&(n.params.listen?zs[n.id]=o.toLowerCase()+"."+i[2].toLowerCase()+i.substr(3):Object.keys(zs).forEach(e=>{zs[e]===o.toLowerCase()+"."+i[2].toLowerCase()+i.substr(3)&&delete zs[e]})),js?Vs(n):Fs.push(n)},receive:function(e){$s=e,Gs&&"function"==typeof Gs.initialize&&Gs.initialize({emit:Hs,listen:function(...e){Bs(...e)}})},event:Hs};function Xs(e,t,n){const o=e?Object.values(e).length:0;return o===n&&void 0===t?"getter":o===n&&"function"==typeof t||0===o&&"function"==typeof t?"subscriber":o===n&&void 0!==t?"setter":null}const Ws={};const Ks={mock:function(e,t,n,o,i,r){const s=Xs(n,o,i),a=i?"."+Object.keys(n).filter(e=>"value"!==e).map(e=>n[e]).join("."):"",l=`${e}.${t}${a}`;if("getter"===s){return Ws.hasOwnProperty(l)?Ws[l]:r}if("subscriber"===s);else if("setter"===s)return Ws[l]=o,qs.event(e,`${t}Changed`,{value:o}),null}},Ys={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(e){return Ks.mock("Accessibility","closedCaptionsSettings",e,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},voiceGuidance:{enabled:!0,speed:2},voiceGuidanceSettings:function(e){return Ks.mock("Accessibility","voiceGuidanceSettings",e,void 0,0,{enabled:!0,speed:2})},audioDescriptionSettings:function(e){return Ks.mock("Accessibility","audioDescriptionSettings",e,void 0,0,{enabled:!0})}},Qs={id:function(e){return Ks.mock("Account","id",e,void 0,0,"123")},uid:function(e){return Ks.mock("Account","uid",e,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},Js={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(e){return Ks.mock("Advertising","policy",e,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},Zs={id:function(e){return Ks.mock("Device","id",e,void 0,0,"123")},distributor:function(e){return Ks.mock("Device","distributor",e,void 0,0,"Company")},platform:function(e){return Ks.mock("Device","platform",e,void 0,0,"WPE")},uid:function(e){return Ks.mock("Device","uid",e,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(e){return Ks.mock("Device","type",e,void 0,0,"STB")},model:function(e){return Ks.mock("Device","model",e,void 0,0,"xi6")},sku:function(e){return Ks.mock("Device","sku",e,void 0,0,"AX061AEI")},make:function(e){return Ks.mock("Device","make",e,void 0,0,"Arris")},version:function(e){return Ks.mock("Device","version",e,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(e){return Ks.mock("Device","hdcp",e,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(e){return Ks.mock("Device","hdr",e,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(e){return Ks.mock("Device","audio",e,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(e){return Ks.mock("Device","screenResolution",e,void 0,0,[1920,1080])},videoResolution:function(e){return Ks.mock("Device","videoResolution",e,void 0,0,[1920,1080])},name:function(e){return Ks.mock("Device","name",e,void 0,0,"Living Room")},network:function(e){return Ks.mock("Device","network",e,void 0,0,{state:"connected",type:"wifi"})}},ea={policy:function(e){return Ks.mock("Discovery","policy",e,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null};let ta={state:"inactive",previous:"initializing"},na={state:"foreground",previous:"inactive"},oa={state:"unloading",previous:"inactive"};const ia=e=>{qs.event("Lifecycle",e.state,e)},ra="undefined"!=typeof window?window:{},sa=!!ra.__firebolt&&!!ra.__firebolt.automation,aa={ready:function(){ta.previous="initializing",setTimeout(()=>ia(ta),sa?1:500),na.previous="inactive",setTimeout(()=>ia(na),sa?2:1e3)},close:function(e){let t=e.reason;if("remoteButton"===t)ta.previous="foreground",setTimeout(()=>ia(ta),sa?1:500);else{if(!["userExit","error"].includes(t))throw"Invalid close reason";ta.previous="foreground",oa.previous="inactive",setTimeout(()=>ia(ta),sa?1:500),setTimeout(()=>ia(oa),sa?2:1e3)}},finished:function(){ra.location&&(ra.location.href="about:blank")}},la={locality:function(e){return Ks.mock("Localization","locality",e,void 0,0,"Philadelphia")},postalCode:function(e){return Ks.mock("Localization","postalCode",e,void 0,0,"19103")},countryCode:function(e){return Ks.mock("Localization","countryCode",e,void 0,0,"US")},language:function(e){return Ks.mock("Localization","language",e,void 0,0,"en")},preferredAudioLanguages:function(e){return Ks.mock("Localization","preferredAudioLanguages",e,void 0,0,["spa","eng"])},locale:function(e){return Ks.mock("Localization","locale",e,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},ua={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(e){return Ks.mock("SecondScreen","friendlyName",e,void 0,0,"Living Room")}},ca={localization:la,device:Zs,accessibility:Ys};class pa{constructor(){this._callback=null,this._queue=[]}send(e){this._queue.push(e)}receive(e){this._callback=e}flush(e){e.receive(this._callback),this._queue.forEach(t=>e.send(t))}}const da={},ha={},fa={get(e,t,n=void 0){const o=((e={},t)=>{const n=t.split(".");for(let o=0;o<n.length;o++)e=e[n[o]]=void 0!==e[n[o]]?e[n[o]]:{};return"object"==typeof e?Object.keys(e).length?e:void 0:e})(da[e],t);return void 0!==o?o:n},has(e,t){return!!this.get(e,t)},set(e,t){da.user[e]=t,((e,t)=>{ha[e]&&ha[e].forEach(e=>e(t))})(e,t)},subscribe(e,t){ha[e]=ha[e]||[],ha[e].push(t)},unsubscribe(e,t){if(t){const n=ha[e]&&ha[e].findIndex(e=>e===t);n>-1&&ha[e].splice(n,1)}else e in ha&&(ha[e]=[])},clearSubscribers(){for(const e of Object.getOwnPropertyNames(ha))delete ha[e]},setLogLevel(e){da.platform.logLevel=e},getLogLevel:()=>da.platform.logLevel},ma="undefined"!=typeof window?window:{};class ga{constructor(e){this.bridge=e}send(e){this.bridge.JSMessageChanged(e,()=>{})}receive(e){ma.$badger=ma.$badger||{};const t=ma.$badger.callback?ma.$badger.callback.bind(ma.$badger):null,n=ma.$badger.event?ma.$badger.event.bind(ma.$badger):null;ma.$badger.callback=(n,o,i)=>{i.jsonrpc?e(JSON.stringify(i)):t&&t(n,o,i)},ma.$badger.event=(t,o)=>{o.jsonrpc?e(JSON.stringify(o)):n&&n(t,o)}}static isLegacy(e){return ga.isXREProxy(e)||void 0===e.send&&e.JSMessageChanged}static isXREProxy(e){return void 0!==e.proxyObjectTest}}class ya{constructor(e){this._endpoint=e,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}send(e){this._connect(),this._connected?this._ws.send(e):this._queue.length<100&&this._queue.push(e)}receive(e){e&&(this._connect(),this._callbacks.push(e))}_notifyCallbacks(e){for(let t=0;t<this._callbacks.length;t++)setTimeout(()=>this._callbacks[t](e),1)}_connect(){this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",e=>{this._notifyCallbacks(e.data)}),this._ws.addEventListener("error",e=>{}),this._ws.addEventListener("close",e=>{this._ws=null,this._connected=!1}),this._ws.addEventListener("open",e=>{this._connected=!0;for(let t=0;t<this._queue.length;t++)this._ws.send(this._queue[t]);this._queue=[]}))}}const va={transform:function(e,t){if(!t||!t.methods)return e;const{methods:n}=t,o=JSON.parse(JSON.stringify(e));return Object.keys(n).forEach(e=>{const t=n[e],i=t["x-method"],[r,s]=i.split("."),a={};a[t["x-this-param"]]=o,o[e]=(...e)=>{for(var n=0;n<e.length;n++)a[t["x-additional-params"][n]]=e[n];return wa.send(r.toLowerCase(),s,a)}}),o}};let ba=null;const xa="undefined"!=typeof window?window:{};class wa{constructor(){this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new pa,this._deprecated={},this.isMock=!1}static addEventEmitter(e){wa.get()._eventEmitters.push(e)}static registerDeprecatedMethod(e,t,n){wa.get()._deprecated[e.toLowerCase()+"."+t.toLowerCase()]={alternative:n||""}}_endpoint(){return xa.__firebolt&&xa.__firebolt.endpoint?xa.__firebolt.endpoint:null}constructTransportLayer(){let e;const t=this._endpoint();return t&&(t.startsWith("ws://")||t.startsWith("wss://"))?(e=new ya(t),e.receive(this.receiveHandler.bind(this))):void 0!==xa.ServiceManager&&xa.ServiceManager&&xa.ServiceManager.version?(e=this._queue,xa.ServiceManager.getServiceForJavaScript("com.comcast.BridgeObject_1",t=>{e=ga.isLegacy(t)?new ga(t):t,this.setTransportLayer(e)})):(this.isMock=!0,e=qs,e.receive(this.receiveHandler.bind(this))),e}setTransportLayer(e){this._transport=e,this._queue.flush(e)}static send(e,t,n,o){return wa.get()._send(e,t,n,o)}static listen(e,t,n,o){return wa.get()._sendAndGetId(e,t,n,o)}_send(e,t,n,o){return!Array.isArray(e)||t||n?this._sendAndGetId(e,t,n,o).promise:this._batch(e)}_sendAndGetId(e,t,n,o){const{promise:i,json:r,id:s}=this._processRequest(e,t,n,o),a=JSON.stringify(r);return"DEBUG"===fa.getLogLevel()&&console.debug("Sending message to transport: "+a),this._transport.send(a),{id:s,promise:i}}_batch(e){const t=[],n=[];e.forEach(({module:e,method:o,params:i,transforms:r})=>{const s=this._processRequest(e,o,i,r);t.push({promise:s.promise,id:s.id}),n.push(s.json)});const o=JSON.stringify(n);return"DEBUG"===fa.getLogLevel()&&console.debug("Sending message to transport: "+o),this._transport.send(o),t}_processRequest(e,t,n,o){const i={promise:this._addPromiseToQueue(e,t,n,o),json:this._createRequestJSON(e,t,n),id:this._id};return this._id++,i}_createRequestJSON(e,t,n){return{jsonrpc:"2.0",method:e.toLowerCase()+"."+t,params:n,id:this._id}}_addPromiseToQueue(e,t,n,o){return new Promise((i,r)=>{this._promises[this._id]={},this._promises[this._id].promise=this,this._promises[this._id].resolve=i,this._promises[this._id].reject=r,this._promises[this._id].transforms=o;const s=this._deprecated[e.toLowerCase()+"."+t.toLowerCase()];s&&console.warn(`WARNING: ${e}.${t}() is deprecated. `+s.alternative),t.match(/^on[A-Z]/)&&(n.listen?this._eventIds.push(this._id):this._eventIds=this._eventIds.filter(e=>e!==this._id))})}static get(){if(xa.__firebolt=xa.__firebolt||{},null==xa.__firebolt.transport&&null==ba){const e=new wa;e.init(),e.isMock?ba=e:(xa.__firebolt=xa.__firebolt||{},xa.__firebolt.transport=e),xa.__firebolt.setTransportLayer=e.setTransportLayer.bind(e)}return xa.__firebolt.transport?xa.__firebolt.transport:ba}receiveHandler(e){"DEBUG"===fa.getLogLevel()&&console.debug("Received message from transport: "+e);const t=JSON.parse(e),n=this._promises[t.id];if(n){if(t.error)n.reject(t.error);else{let e=t.result;n.transforms&&(e=Array.isArray(t.result)?e.map(e=>va.transform(e,n.transforms)):va.transform(e,n.transforms)),n.resolve(e)}delete this._promises[t.id]}var o;this._eventIds.includes(t.id)&&(!(o=t.result)||"string"!=typeof o.event||"boolean"!=typeof o.listening)&&this._eventEmitters.forEach(e=>{e(t.id,t.result)})}init(){var e,t;e={},t={log:!0},da.app=e,da.platform={logLevel:"WARN",...t},da.user={},this._queue.receive(this.receiveHandler.bind(this)),xa.__firebolt&&(!0===xa.__firebolt.mockTransportLayer?(this.isMock=!0,this.setTransportLayer(qs)):xa.__firebolt.getTransportLayer&&this.setTransportLayer(xa.__firebolt.getTransportLayer())),null==this._transport&&(this._transport=this.constructTransportLayer())}}xa.__firebolt=xa.__firebolt||{},xa.__firebolt.setTransportLayer=e=>{wa.get().setTransportLayer(e)};let Sa=0;const Ta={internal:{},external:{},get:e=>Object.assign(Object.assign({},Ta.internal[e]),Ta.external[e]),set:(e,t,n)=>{Ta.external[e]=Ta.external[e]||{},Ta.external[e][t]=n},setInternal:(e,t,n)=>{Ta.internal[e]=Ta.internal[e]||{},Ta.internal[e][t]=n},find:e=>{let t;return[Ta.internal,Ta.external].find(n=>{if(t=Object.keys(n).find(t=>n[t][e]),t)return!0}),t},remove:e=>{[Ta.internal,Ta.external].forEach(t=>{Object.keys(t).forEach(n=>{t[n]&&t[n][e]&&(delete t[n][e],0===Object.values(t[n]).length&&delete t[n])})})},removeKey:(e,t=!1)=>{t&&Ta.internal[e]&&delete Ta.internal[e],Ta.external[e]&&delete Ta.external[e]},keys:()=>Array.from(new Set(Object.keys(Ta.internal).concat(Object.keys(Ta.external)))),count:e=>Object.values(Ta.get(e)).length},ka={},Ca=[],Aa={},Ea={};let Ia=!1;const Ma=(e,t)=>{La(Ta.internal[ka[e]],[t]),La(Ta.external[ka[e]],[t])},Ra=(e,t)=>{Aa[e.toLowerCase()]=t.concat()},_a=(e,t,n)=>{Ea[e.toLowerCase()]=Ea[e.toLowerCase()]||{},Ea[e.toLowerCase()][t]=n.concat()},La=(e,t)=>{e&&Object.keys(e).forEach(n=>{let o=e[n];Ca.indexOf(parseInt(n))>=0&&(Ca.splice(Ca.indexOf(parseInt(n)),1),delete e[n]),o.apply(null,t)})},Da=function(e,t,n,o,i,r=!1){if(ja(),"function"!=typeof n)return Promise.reject("No valid callback function provided.");{if("*"===e)return Promise.reject("No valid module name provided");const s="*"===t,a=s?Aa[e]:[t],l=[],u=Object.values(o).length>0,c=Object.keys(o).sort().map(e=>e+"="+JSON.stringify(o[e])).join("&");let p,d;Sa++,i&&Ca.push(Sa),a.forEach(t=>{const i=e+"."+t+(u?`.${c}`:"");if(0===Object.values(Ta.get(i)).length){const n=Object.assign({listen:!0},o),{id:r,promise:s}=wa.listen(e,"on"+t[0].toUpperCase()+t.substring(1),n);ka[r]=i,l.push(s)}const a=r?Ta.setInternal:Ta.set;a(i,""+Sa,s?e=>n(t,e):n)});let h=new Promise((e,t)=>{p=e,d=t});return l.length?Promise.all(l).then(e=>{p(Sa)}).catch(e=>{"*"===t?p(Sa):d(e)}):p(Sa),h}},Pa=function(...e){const t=e.pop(),[n,o,i]=Oa(...e);return[n,o,t,i]},Oa=function(...e){const t=(e.shift()||"*").toLowerCase(),n=e.shift()||"*",o={};for(let i=0;e.length;i++)o[Ea[t][n][i]]=e.shift();return[t,n,o]},Na=function(...e){const[t,n,o,i]=Pa(...e);return Da(t,n,o,i,!1)},Ua=(e,t)=>{const[n,o]=e.split(".").slice(0,2),i=Object.assign({listen:!1},t);wa.send(n,"on"+o[0].toUpperCase()+o.substr(1),i)},Ba=function(e=!1,t=!1,n){if("*"===t&&(t=!1),"number"==typeof e){const t=e.toString(),n=Ta.find(t);return!!n&&(Ta.remove(t),0===Ta.count(n)&&Ua(n),!0)}if(e||t)if(t){const o=Object.values(n).length>0,i=Object.keys(n).sort().map(e=>e+"="+JSON.stringify(n[e])).join("&"),r=e+"."+t+(o?`.${i}`:"");Ta.removeKey(r),Ua(r,n)}else Ta.keys().forEach(t=>{0===t.indexOf(e.toLowerCase())&&(Ta.removeKey(t),Ua(t))});else Ta.keys().forEach(e=>{Ta.removeKey(e),Ua(e)})},ja=()=>{Ia||(wa.addEventEmitter(Ma),Bs=Na,Ia=!0)},Fa={listen:Na,once:function(...e){const[t,n,o,i]=Pa(...e);return Da(t,n,o,i,!0)},clear:function(...e){if(e&&e.length&&"number"==typeof e[0])return Ba(e[0]);if(e&&e.length&&"number"==typeof e[1])return Ba(e[1]);{const[t,n,o]=Oa(...e);return Ba(t,n,o)}},broadcast(e,t){Ma(Object.entries(ka).find(([t,n])=>n==="app."+e)[0],t)}};const za={prop:function(e,t,n,o=void 0,i,r,s){const a=Object.values(n).length,l=Xs(n,o,s);if("getter"===l)return wa.send(e,t,n);if("subscriber"===l){if(i)throw new Error("Cannot subscribe to an immutable property");return Fa.listen(e,t+"Changed",...Object.values(n),o)}if("setter"===l){if(i)throw new Error("Cannot set a value to an immutable property");if(r)throw new Error("Cannot set a value to a readonly property");return wa.send(e,"set"+t[0].toUpperCase()+t.substring(1),Object.assign({value:o},n))}throw a<s?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}};Ra("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","voiceGuidanceSettingsChanged"]),wa.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead."),wa.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");const $a={id:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Account","id",t,e,!0,!0,0)},uid:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Account","uid",t,e,!0,!0,0)}};Ra("Advertising",["policyChanged"]),wa.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead."),Ra("Capabilities",["available","granted","revoked","unavailable"]),_a("Capabilities","available",["capability"]),_a("Capabilities","granted",["role","capability"]),_a("Capabilities","revoked",["role","capability"]),_a("Capabilities","unavailable",["capability"]),Ra("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]),wa.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead."),wa.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead."),wa.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");const Ga={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:function(){return new Promise((e,t)=>{wa.send("device","version").then(t=>{(t=t||{}).sdk=t.sdk||{},t.sdk.major=parseInt("1"),t.sdk.minor=parseInt("4"),t.sdk.patch=parseInt("1"),t.sdk.readable="Firebolt Core SDK 1.4.1",e(t)}).catch(e=>{t(e)})})},audio:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","audio",t,e,!1,!0,0)},clear:function(...e){return Fa.clear("Device",...e)},distributor:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","distributor",t,e,!0,!0,0)},hdcp:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","hdcp",t,e,!1,!0,0)},hdr:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","hdr",t,e,!1,!0,0)},id:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","id",t,e,!0,!0,0)},listen:function(...e){return Fa.listen("Device",...e)},make:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","make",t,e,!0,!0,0)},model:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","model",t,e,!0,!0,0)},name:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","name",t,e,!1,!0,0)},network:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","network",t,e,!1,!0,0)},once:function(...e){return Fa.once("Device",...e)},platform:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","platform",t,e,!0,!0,0)},screenResolution:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","screenResolution",t,e,!1,!0,0)},sku:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","sku",t,e,!0,!0,0)},type:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","type",t,e,!0,!0,0)},uid:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","uid",t,e,!0,!0,0)},videoResolution:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Device","videoResolution",t,e,!1,!0,0)}},Va={};Ra("Discovery",["navigateTo","policyChanged"]),((e,t,n)=>{if(Va[e])throw`Capability ${e} has multiple provider interfaces registered.`;n.forEach(e=>e.name=`${t}.${e.name}`),Va[e]=n.concat()})("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]),wa.registerDeprecatedMethod("Discovery","entityInfo","Use null instead."),wa.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead."),wa.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead."),wa.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead."),wa.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead."),Ra("Lifecycle",["background","foreground","inactive","suspended","unloading"]),Ra("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]),wa.registerDeprecatedMethod("Localization","language","Use Localization.locale instead."),wa.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");const Ha={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:function(){return wa.send("Localization","additionalInfo",{},null)},clear:function(...e){return Fa.clear("Localization",...e)},countryCode:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Localization","countryCode",t,e,!1,!0,0)},language:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Localization","language",t,e,!1,!0,0)},latlon:function(){return wa.send("Localization","latlon",{},null)},listen:function(...e){return Fa.listen("Localization",...e)},locale:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Localization","locale",t,e,!1,!0,0)},locality:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Localization","locality",t,e,!1,!0,0)},once:function(...e){return Fa.once("Localization",...e)},postalCode:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Localization","postalCode",t,e,!1,!0,0)},preferredAudioLanguages:function(){let e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),za.prop("Localization","preferredAudioLanguages",t,e,!1,!0,0)}};Ra("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]),js={Accessibility:Ys,Account:Qs,Advertising:Js,Authentication:{token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},Capabilities:{supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},Device:Zs,Discovery:ea,Keyboard:{email:"user@domain.com",password:"abc123",standard:"Living Room"},Lifecycle:aa,Localization:la,Metrics:{ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},Parameters:{initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},Profile:{approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},SecondScreen:ua,SecureStorage:{get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},Platform:ca},Fs.forEach(e=>Vs(e)),Fs.length=0;const qa={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},Xa=Ei.Component("Module",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.w=t.w,l.h=t.h,l.color=t.bColor,l.effects=[{type:"radius",props:{radius:8}}],a[0].populate(l),e=a[0];const u={};return a[1]=this.element({parent:e||"root"},t),u.x=t.w/2,u.y=t.h/2,u.mount="{x:0.5, y:0.5}",u.content=t.name,u.color=t.fColor,u.font="raleway",u.__textnode=!0,a[1].populate(u),a},effects:[function(e,t,n,o,i,r){t[0].set("color",e.bColor)},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,o,i,r){t[1].set("content",e.name)}],context:{}},state:()=>({w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}),props:["name"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$router.to(`/examples/firebolt/${this.name}`)}}}),Wa=Ei.Component("Methods",{code:{render:function(e,t,n,o,i,r,s){const a=[];a[0]=this.element({parent:e||"root"},t),a[0].populate({}),e=a[0];const l={};a[1]=this.element({parent:e||"root"},t),l.w=t.w,l.h=t.h,l.color=t.nameBgColor,l.effects=[{type:"radius",props:{radius:[8,8,0,0]}}],a[1].populate(l),e=a[1];const u={};a[2]=this.element({parent:e||"root"},t),u.content=t.name,u.x=t.w/2,u.y=t.h/2,u.mount=.5,u.color="0xffffffff",u.font="lato",u.size=50,u.__textnode=!0,a[2].populate(u),e=a[0];const c={};a[3]=this.element({parent:e||"root"},t),c.w=t.w,c.h=50,c.color="0x4b5563ff",c.y=75,c.effects=[{type:"radius",props:{radius:[0,0,8,8]}}],a[3].populate(c),e=a[3];const p={};return a[4]=this.element({parent:e||"root"},t),p.content=t.about,p.maxwidth=t.w,p.align="center",p.font="lato",p.maxlines=1,p.size=28,p.y=6,p.__textnode=!0,a[4].populate(p),a},effects:[function(e,t,n,o,i,r){t[1].set("color",e.nameBgColor)},function(e,t,n,o,i,r){t[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(e,t,n,o,i,r){t[2].set("content",e.name)},function(e,t,n,o,i,r){t[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(e,t,n,o,i,r){t[4].set("content",e.about)}],context:{}},state:()=>({w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}),props:["name","about"],hooks:{focus(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }",this.$emit("execute",this.name)},unfocus(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),Ka=Ei.Component("List",{components:{Method:Wa,Module:Xa},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1;a[0]=this.element({parent:e||"root"},!0===p?c:t),a[0].populate({}),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===p?c:t),d.y={transition:t.y},a[1].populate(d),e=a[1];const h=[];let f,m;const g=(s=[],a,d)=>{const h=r(s),g=new Set;let y=h.length;const v={}||{};f=v.from||0,m="to"in v?v.to:h.length;for(;y--;){const e=h[y];y<m&&y>=f&&g.add(""+e.name)}let b=d.length;for(;b--;)if(!1===g.has(d[b])){const e=d[b];a[2][e]&&a[2][e].destroy(),delete a[2][e],a[3][e]&&a[3][e].destroy(),delete a[3][e]}d.length=0;const x=h.length,w=[];for(let S=0;S<x;S++){if(S<f||S>=m)continue;const s=Object.create(t);e=a[1],s.item=h[S],s.index=S,s.key=""+s.item.name,d.push(s.key);const g=n.components&&n.components.Method||o.Method;void 0===a[2]&&(a[2]={});const y={};void 0===a[2][s.key]&&(a[2][s.key]=this.element({parent:e||"root"},!0===p?c:t)),y.name=s.item.name,y.about=s.item.about,y.y=160*s.index,y.ref=s.type+s.index;const v=[];if(void 0!==g)for(let e in g[Symbol.for("config")].props)delete y[g[Symbol.for("config")].props[e]],v.push(g[Symbol.for("config")].props[e]);void 0===a[2][s.key].nodeId&&a[2][s.key].populate(y),void 0===a[3]&&(a[3]={}),e=a[2][s.key];const b={};if(void 0===a[3][s.key]){let i;if(b.name=s.item.name,b.about=s.item.about,u=160*s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.y=u,u=s.type+s.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),b.ref=u,l=b.is||"Method","string"==typeof l){if(i=n.components&&n.components[l]||o[l],!i)throw new Error('Component "Method" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(i=l);a[3][s.key]=i.call(null,{props:b},a[2][s.key],t),a[3][s.key][Symbol.for("slots")][0]?(e=a[3][s.key][Symbol.for("slots")][0],c=a[3][s.key],p=!0):e=a[3][s.key][Symbol.for("children")][0]}let x=()=>{void 0!==v&&-1!==v.indexOf("y")||a[2][s.key].set("y",160*s.index)};i(x,null),w.push(x),t[Symbol.for("effects")].push(x),a[3][s.key][Symbol.for("props")].y=160*s.index}return w};let y;const v=()=>{t[Symbol.for("removeGlobalEffects")](y),y=null,y=g(t.methods,a,h)};t[Symbol.for("effects")].push(v),i(v,["methods"]);const b=()=>{t.type;for(let e=0;e<t.methods.length;e++){if(e<f||e>=m)continue;const n={};n.index=e,n.item=t.methods[e],n.key=n.item.name,"undefined"!=typeof skip2&&-1!==skip2.indexOf("ref")||a[2][n.key].set("ref",t.type+n.index)}};t[Symbol.for("effects")].push(b),i(b);const x=()=>{t.type;for(let e=0;e<t.methods.length;e++){if(e<f||e>=m)continue;const n={};n.index=e,n.item=t.methods[e],n.key=n.item.name,a[3][n.key][Symbol.for("props")].ref=t.type+n.index}};t[Symbol.for("effects")].push(x),i(x),e=a[0];const w={};a[4]=this.element({parent:e||"root"},!0===p?c:t),w.x={transition:t.x},w.y=325,a[4].populate(w),e=a[4];const S=[];let T,k;const C=(i=[],s,a)=>{const d=r(i),h=new Set;let f=d.length;const m={}||{};T=m.from||0,k="to"in m?m.to:d.length;for(;f--;){const e=d[f];f<k&&f>=T&&h.add(""+e.id)}let g=a.length;for(;g--;)if(!1===h.has(a[g])){const e=a[g];s[5][e]&&s[5][e].destroy(),delete s[5][e],s[6][e]&&s[6][e].destroy(),delete s[6][e]}a.length=0;const y=d.length;for(let v=0;v<y;v++){if(v<T||v>=k)continue;const i=Object.create(t);e=s[4],i.item=d[v],i.index=v,i.key=""+i.item.id,a.push(i.key);const h=n.components&&n.components.Module||o.Module;void 0===s[5]&&(s[5]={});const f={};void 0===s[5][i.key]&&(s[5][i.key]=this.element({parent:e||"root"},!0===p?c:t)),f.name=i.item.name,f.ref=i.type+i.index,f.x=400*i.index;const m=[];if(void 0!==h)for(let e in h[Symbol.for("config")].props)delete f[h[Symbol.for("config")].props[e]],m.push(h[Symbol.for("config")].props[e]);void 0===s[5][i.key].nodeId&&s[5][i.key].populate(f),void 0===s[6]&&(s[6]={}),e=s[5][i.key];const g={};if(void 0===s[6][i.key]){let a;if(g.name=i.item.name,u=i.type+i.index,!0===Array.isArray(u)&&(u=r(u).slice(0)),g.ref=u,g.x=400*i.index,l=g.is||"Module","string"==typeof l){if(a=n.components&&n.components[l]||o[l],!a)throw new Error('Component "Module" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(a=l);s[6][i.key]=a.call(null,{props:g},s[5][i.key],t),s[6][i.key][Symbol.for("slots")][0]?(e=s[6][i.key][Symbol.for("slots")][0],c=s[6][i.key],p=!0):e=s[6][i.key][Symbol.for("children")][0]}}return[]};let A;const E=()=>{t[Symbol.for("removeGlobalEffects")](A),A=null,A=C(t.modules,a,S)};t[Symbol.for("effects")].push(E),i(E,["modules"]);const I=()=>{t.type;for(let e=0;e<t.modules.length;e++){if(e<T||e>=k)continue;const n={};n.index=e,n.item=t.modules[e],n.key=n.item.id,"undefined"!=typeof skip5&&-1!==skip5.indexOf("ref")||a[5][n.key].set("ref",t.type+n.index)}};t[Symbol.for("effects")].push(I),i(I);const M=()=>{t.type;for(let e=0;e<t.modules.length;e++){if(e<T||e>=k)continue;const n={};n.index=e,n.item=t.modules[e],n.key=n.item.id,a[6][n.key][Symbol.for("props")].ref=t.type+n.index}};return t[Symbol.for("effects")].push(M),i(M),a},effects:[function(e,t,n,o,i,r){t[1].set("y",{transition:e.y})},function(e,t,n,o,i,r){t[4].set("x",{transition:e.x})}],context:{}},state:()=>({x:400,y:100,activeIndex:0}),props:["data","type"],computed:{methods(){return this.isModule,this.data,this.isModule?[]:this.data},modules(){return this.isModule,this.data,this.isModule?this.data:[]},isModule(){return this.type,"module"===this.type}},watch:{activeIndex(e){const t=this.$select(`${this.type}${e}`);t&&t.$focus&&t.$focus()}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left(){this.isModule&&this.activeIndex>0&&this.move(-1)},down(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move(e){const t=this.activeIndex+e;"method"==this.type?this.y=t>5?160*-(t-5)-100:100:"module"==this.type&&(this.x=t>3?400*-(t-3)-400:400),this.activeIndex=t}}}),Ya=Ei.Component("FireBolt",{components:{List:Ka},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),!0===c&&(p-=1),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===c?u:t),d.content="FireBolt Modules",d.x=960,d.y=80,d.mount="{x:0.5}",d.size=80,d.font="raleway",d.__textnode=!0,a[1].populate(d),!0===c&&(p-=1);const h=n.components&&n.components.List||o.List;e=a[0];const f={};a[2]=this.element({parent:e||"root"},!0===c?u:t),f.data=t.moduleNames,f.type="module",f.ref="modules";const m=[];if(void 0!==h)for(let v in h[Symbol.for("config")].props)delete f[h[Symbol.for("config")].props[v]],m.push(h[Symbol.for("config")].props[v]);a[2].populate(f),!0===c&&(p-=1),e=a[2];const g={};let y;if(g.data=t.moduleNames,g.type="module",g.ref="modules",l=g.is||"List","string"==typeof l){if(y=n.components&&n.components[l]||o[l],!y)throw new Error('Component "List" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(y=l);return a[3]=y.call(null,{props:g},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],u=a[3],c=!0):e=a[3][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),a},effects:[],context:{}},computed:{moduleNames:()=>Object.keys(qa).map(e=>({id:e,name:e.charAt(0).toUpperCase()+e.slice(1)}))},hooks:{focus(){const e=this.$select("modules");e&&e.$focus&&e.$focus()}}}),Qa=Ei.Component("DeviceModule",{components:{List:Ka},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),!0===c&&(p-=1),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===c?u:t),d.content="Device",d.x=960,d.mount="{x:0.5}",d.y=50,d.font="raleway",d.size=40,d.__textnode=!0,a[1].populate(d),!0===c&&(p-=1),e=a[0];const h={};a[2]=this.element({parent:e||"root"},!0===c?u:t),h.content=t.device.about,h.x=960,h.mount="{x:0.5}",h.y=110,h.font="lato",h.__textnode=!0,a[2].populate(h),!0===c&&(p-=1);const f=n.components&&n.components.List||o.List;e=a[0];const m={};a[3]=this.element({parent:e||"root"},!0===c?u:t),m.data=t.device.methods,m.x=300,m.ref="methods",m.type="method",m.y=100;const g=[];if(void 0!==f)for(let T in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[T]],g.push(f[Symbol.for("config")].props[T]);a[3].populate(m),!0===c&&(p-=1),e=a[3];const y={};let v;if(y.data=t.device.methods,y.x=300,y.ref="methods",y.type="method",y.y=100,l=y.is||"List","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "List" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[4]=v.call(null,{props:y},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],u=a[4],c=!0):e=a[4][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[0];const b={};a[5]=this.element({parent:e||"root"},!0===c?u:t),b.x=1400,b.y=540,b.content=t.response,b.size=100,b.mount=.5,b.font="lato",b.show=!t.isNetworkRes,b.__textnode=!0,a[5].populate(b),!0===c&&(p-=1),e=a[0];const x={};a[6]=this.element({parent:e||"root"},!0===c?u:t),x.show=t.isNetworkRes,a[6].populate(x),!0===c&&(p-=1),e=a[6];const w={};a[7]=this.element({parent:e||"root"},!0===c?u:t),w.content="State: "+t.networkRes.state,w.size=70,w.font="lato",w.x=1400,w.y=500,w.mount=.5,w.__textnode=!0,a[7].populate(w),!0===c&&(p-=1),e=a[6];const S={};return a[8]=this.element({parent:e||"root"},!0===c?u:t),S.content="Type: "+t.networkRes.type,S.size=70,S.font="lato",S.y=580,S.x=1400,S.mount=.5,S.__textnode=!0,a[8].populate(S),!0===c&&(p-=1),a},effects:[function(e,t,n,o,i,r){t[5].set("content",e.response)},function(e,t,n,o,i,r){t[5].set("show",!e.isNetworkRes)},function(e,t,n,o,i,r){t[6].set("show",e.isNetworkRes)},function(e,t,n,o,i,r){t[7].set("content","State: "+e.networkRes.state)},function(e,t,n,o,i,r){t[8].set("content","Type: "+e.networkRes.type)}],context:{}},state:()=>({device:qa.device,response:"",networkRes:{},isNetworkRes:!1}),hooks:{ready(){this.$listen("execute",async e=>{switch(this.$log.info(`Execute Device ${e} API`),this.isNetworkRes=!1,e){case"make":this.response=await Ga.make();break;case"model":this.response=await Ga.model();break;case"name":this.response=await Ga.name();break;case"network":Object.assign(this.networkRes,await Ga.network()),this.isNetworkRes=!0;break;case"platform":this.response=await Ga.platform()}})},focus(){const e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),Ja=Ei.Component("AccountModule",{components:{List:Ka},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),!0===c&&(p-=1),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===c?u:t),d.content="Account",d.x=960,d.mount="{x:0.5}",d.y=50,d.font="raleway",d.size=40,d.__textnode=!0,a[1].populate(d),!0===c&&(p-=1),e=a[0];const h={};a[2]=this.element({parent:e||"root"},!0===c?u:t),h.content=t.account.about,h.x=960,h.mount="{x:0.5}",h.y=110,h.font="lato",h.__textnode=!0,a[2].populate(h),!0===c&&(p-=1);const f=n.components&&n.components.List||o.List;e=a[0];const m={};a[3]=this.element({parent:e||"root"},!0===c?u:t),m.data=t.account.methods,m.x=300,m.ref="methods",m.y=300,m.type="method";const g=[];if(void 0!==f)for(let x in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[x]],g.push(f[Symbol.for("config")].props[x]);a[3].populate(m),!0===c&&(p-=1),e=a[3];const y={};let v;if(y.data=t.account.methods,y.x=300,y.ref="methods",y.y=300,y.type="method",l=y.is||"List","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "List" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[4]=v.call(null,{props:y},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],u=a[4],c=!0):e=a[4][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[0];const b={};return a[5]=this.element({parent:e||"root"},!0===c?u:t),b.x=1400,b.y=540,b.content=t.response,b.size=t.size,b.mount=.5,b.font="lato",b.__textnode=!0,a[5].populate(b),!0===c&&(p-=1),a},effects:[function(e,t,n,o,i,r){t[5].set("content",e.response)},function(e,t,n,o,i,r){t[5].set("size",e.size)}],context:{}},state:()=>({account:qa.account,response:"",size:100}),hooks:{ready(){this.$listen("execute",async e=>{switch(this.$log.info(`Execute Account ${e} API`),e){case"id":this.size=100,this.response=await $a.id();break;case"uid":this.size=40,this.response=await Ga.uid()}})},focus(){const e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),Za=Ei.Component("LocalizationModule",{components:{List:Ka},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1,p=0;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),!0===c&&(p-=1),e=a[0];const d={};a[1]=this.element({parent:e||"root"},!0===c?u:t),d.content="Localization",d.x=960,d.mount="{x:0.5}",d.y=50,d.font="raleway",d.size=40,d.__textnode=!0,a[1].populate(d),!0===c&&(p-=1),e=a[0];const h={};a[2]=this.element({parent:e||"root"},!0===c?u:t),h.content=t.localization.about,h.x=960,h.mount="{x:0.5}",h.y=110,h.font="lato",h.__textnode=!0,a[2].populate(h),!0===c&&(p-=1);const f=n.components&&n.components.List||o.List;e=a[0];const m={};a[3]=this.element({parent:e||"root"},!0===c?u:t),m.data=t.localization.methods,m.x=300,m.ref="methods",m.y=100,m.type="method";const g=[];if(void 0!==f)for(let x in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[x]],g.push(f[Symbol.for("config")].props[x]);a[3].populate(m),!0===c&&(p-=1),e=a[3];const y={};let v;if(y.data=t.localization.methods,y.x=300,y.ref="methods",y.y=100,y.type="method",l=y.is||"List","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "List" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[4]=v.call(null,{props:y},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],u=a[4],c=!0):e=a[4][Symbol.for("children")][0],!0===c&&0===p&&(c=!1),e=a[0];const b={};return a[5]=this.element({parent:e||"root"},!0===c?u:t),b.x=1400,b.y=540,b.content=t.response,b.size=t.size,b.mount=.5,b.font="lato",b.__textnode=!0,a[5].populate(b),!0===c&&(p-=1),a},effects:[function(e,t,n,o,i,r){t[5].set("content",e.response)},function(e,t,n,o,i,r){t[5].set("size",e.size)}],context:{}},state:()=>({localization:qa.localization,response:"",size:100}),hooks:{ready(){this.$listen("execute",async e=>{switch(this.$log.info(`Execute Keyboard ${e} API`),this.response="null",e){case"countryCode":this.response=await Ha.countryCode();break;case"language":this.response=await Ha.language();break;case"latlon":this.response=(await Ha.latlon()).toString();break;case"locality":this.response=await Ha.locality();break;case"postalCode":this.response=await Ha.postalCode()}})},focus(){const e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),el=[{path:"/examples/firebolt",component:Ya},{path:"/examples/firebolt/device",component:Qa},{path:"/examples/firebolt/account",component:Ja},{path:"/examples/firebolt/localization",component:Za}],tl=Ei.Component("Item",{code:{render:function(e,t,n,o,i,r,s){const a=[],l={};a[0]=this.element({parent:e||"root"},t),l.color=t.hasFocus?"0xe0f2feff":"0xfef9c3ff",l.w=200,l.h=200,l.effects=[{type:"radius",props:{radius:12}}],a[0].populate(l),e=a[0];const u={};return a[1]=this.element({parent:e||"root"},t),u.content=t.name,u.size=t.hasFocus?38:32,u.color=t.hasFocus?"0x1e3a8aff":"0x2563ebff",u.placement="{x: 'center', y: 'middle'}",u.__textnode=!0,a[1].populate(u),a},effects:[function(e,t,n,o,i,r){t[0].set("color",e.hasFocus?"0xe0f2feff":"0xfef9c3ff")},function(e,t,n,o,i,r){t[0].set("effects",[{type:"radius",props:{radius:12}}])},function(e,t,n,o,i,r){t[1].set("content",e.name)},function(e,t,n,o,i,r){t[1].set("size",e.hasFocus?38:32)},function(e,t,n,o,i,r){t[1].set("color",e.hasFocus?"0x1e3a8aff":"0x2563ebff")}],context:{}},props:["name"],state:()=>({message:null}),hooks:{focus(){this.message=this.$announcer.speak(this.name)},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}}}),nl=Ei.Component("Row",{components:{Item:tl},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c=!1;a[0]=this.element({parent:e||"root"},!0===c?u:t),a[0].populate({}),e=a[0];const p={};a[1]=this.element({parent:e||"root"},!0===c?u:t),p.content=t.title,p.size=40,p.__textnode=!0,a[1].populate(p),e=a[0];const d=[];let h,f;const m=(i=[],s,a)=>{const p=r(i),d=new Set;let m=p.length;const g={}||{};h=g.from||0,f="to"in g?g.to:p.length;for(;m--;)p[m],m<f&&m>=h&&d.add(""+m);let y=a.length;for(;y--;)if(!1===d.has(a[y])){const e=a[y];s[2][e]&&s[2][e].destroy(),delete s[2][e],s[3][e]&&s[3][e].destroy(),delete s[3][e]}a.length=0;const v=p.length;for(let r=0;r<v;r++){if(r<h||r>=f)continue;const i=Object.create(t);e=s[0],i.item=p[r],i.index=r,i.key=""+r,i.__ref="item"+r,a.push(i.key);const d=n.components&&n.components.Item||o.Item;void 0===s[2]&&(s[2]={});const m={};void 0===s[2][i.key]&&(s[2][i.key]=this.element({parent:e||"root"},!0===c?u:t)),m.name=i.item,m.y=100,m.x=250*i.index+100,m.ref=i.__ref;const g=[];if(void 0!==d)for(let e in d[Symbol.for("config")].props)delete m[d[Symbol.for("config")].props[e]],g.push(d[Symbol.for("config")].props[e]);void 0===s[2][i.key].nodeId&&s[2][i.key].populate(m),void 0===s[3]&&(s[3]={}),e=s[2][i.key];const y={};if(void 0===s[3][i.key]){let r;if(y.name=i.item,y.y=100,y.x=250*i.index+100,y.ref=i.__ref,l=y.is||"Item","string"==typeof l){if(r=n.components&&n.components[l]||o[l],!r)throw new Error('Component "Item" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(r=l);s[3][i.key]=r.call(null,{props:y},s[2][i.key],t),s[3][i.key][Symbol.for("slots")][0]?(e=s[3][i.key][Symbol.for("slots")][0],u=s[3][i.key],c=!0):e=s[3][i.key][Symbol.for("children")][0]}}return[]};let g;const y=()=>{t[Symbol.for("removeGlobalEffects")](g),g=null,g=m(t.items,a,d)};return t[Symbol.for("effects")].push(y),i(y,["items"]),a},effects:[function(e,t,n,o,i,r){t[1].set("content",e.title)}],context:{}},props:["title","items"],state:()=>({focusIndex:-1,message:null}),hooks:{focus(){this.message=this.$announcer.speak("Row with different "+this.title),this.focusIndex=0,this.$trigger("focusIndex")},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}},watch:{focusIndex(e){this.$select("item"+e).$focus()}},input:{right(){this.focusIndex=Math.min(this.focusIndex+1,this.items.length-1)},left(){this.focusIndex=Math.max(this.focusIndex-1,0)}}}),ol=Ei.Component("Announcer",{components:{Row:nl},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;const h={};a[0]=this.element({parent:e||"root"},!0===p?c:t),h.width=1*e.node.width,h.y=50,a[0].populate(h),!0===p&&(d-=1),e=a[0];const f={};a[1]=this.element({parent:e||"root"},!0===p?c:t),f.placement="{x: 'center'}",f.size=50,f.content="Food",f.__textnode=!0,a[1].populate(f),!0===p&&(d-=1);const m=n.components&&n.components.Row||o.Row;e=a[0];const g={};a[2]=this.element({parent:e||"root"},!0===p?c:t),g.title="Fruits",g.x=200,g.y=150,g.items=["Banana","Strawberry","Kiwi","Mango","Grape"],g.ref="row1";const y=[];if(void 0!==m)for(let C in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[C]],y.push(m[Symbol.for("config")].props[C]);a[2].populate(g),!0===p&&(d-=1),e=a[2];const v={};let b;if(v.title="Fruits",v.x=200,v.y=150,u=["Banana","Strawberry","Kiwi","Mango","Grape"],!0===Array.isArray(u)&&(u=r(u).slice(0)),v.items=u,v.ref="row1",l=v.is||"Row","string"==typeof l){if(b=n.components&&n.components[l]||o[l],!b)throw new Error('Component "Row" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(b=l);a[3]=b.call(null,{props:v},a[2],t),a[3][Symbol.for("slots")][0]?(e=a[3][Symbol.for("slots")][0],c=a[3],p=!0):e=a[3][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const x=n.components&&n.components.Row||o.Row;e=a[0];const w={};a[4]=this.element({parent:e||"root"},!0===p?c:t),w.title="Snacks",w.x=200,w.y=600,w.items=["Pizza","Burger","Fries","Popcorn","Chocolate"],w.ref="row2";const S=[];if(void 0!==x)for(let C in x[Symbol.for("config")].props)delete w[x[Symbol.for("config")].props[C]],S.push(x[Symbol.for("config")].props[C]);a[4].populate(w),!0===p&&(d-=1),e=a[4];const T={};let k;if(T.title="Snacks",T.x=200,T.y=600,u=["Pizza","Burger","Fries","Popcorn","Chocolate"],!0===Array.isArray(u)&&(u=r(u).slice(0)),T.items=u,T.ref="row2",l=T.is||"Row","string"==typeof l){if(k=n.components&&n.components[l]||o[l],!k)throw new Error('Component "Row" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(k=l);return a[5]=k.call(null,{props:T},a[4],t),a[5][Symbol.for("slots")][0]?(e=a[5][Symbol.for("slots")][0],c=a[5],p=!0):e=a[5][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){"undefined"!=typeof skip2&&-1!==skip2.indexOf("items")||t[2].set("items",["Banana","Strawberry","Kiwi","Mango","Grape"])},function(e,t,n,o,i,r){t[3][Symbol.for("props")].items=["Banana","Strawberry","Kiwi","Mango","Grape"]},function(e,t,n,o,i,r){"undefined"!=typeof skip4&&-1!==skip4.indexOf("items")||t[4].set("items",["Pizza","Burger","Fries","Popcorn","Chocolate"])},function(e,t,n,o,i,r){t[5][Symbol.for("props")].items=["Pizza","Burger","Fries","Popcorn","Chocolate"]}],context:{}},state:()=>({focusIndex:1}),watch:{focusIndex(e){this.$select("row"+e).$focus()}},hooks:{focus(){this.$announcer.speak("The topic is Food"),this.$select("row1").$focus(),this.$trigger("focusIndex")}},input:{up(){this.focusIndex=Math.max(this.focusIndex-1,1)},down(){this.focusIndex=Math.min(this.focusIndex+1,2)}}}),il=new URLSearchParams(window.location.search),rl=!!il.get("source"),sl=!!il.get("fps"),al=Ei.Application({components:{SourceInfo:Oi},code:{render:function(e,t,n,o,i,r,s){const a=[];let l,u,c,p=!1,d=0;const h={};a[0]=this.element({parent:e||"root"},!0===p?c:t),h.w=1920,h.h=1080,h.color=t.backgroundColor,a[0].populate(h),!0===p&&(d-=1);const f=n.components&&n.components.RouterView||o.RouterView;e=a[0];const m={};a[1]=this.element({parent:e||"root"},!0===p?c:t),m.w=1*e.node.width,m.h=1*e.node.height;const g=[];if(void 0!==f)for(let M in f[Symbol.for("config")].props)delete m[f[Symbol.for("config")].props[M]],g.push(f[Symbol.for("config")].props[M]);a[1].populate(m),!0===p&&(d-=1),e=a[1];const y={};let v;if(y.w=1*e.node.width,y.h=1*e.node.height,l=y.is||"RouterView","string"==typeof l){if(v=n.components&&n.components[l]||o[l],!v)throw new Error('Component "RouterView" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(v=l);a[2]=v.call(null,{props:y},a[1],t),a[2][Symbol.for("slots")][0]?(e=a[2][Symbol.for("slots")][0],c=a[2],p=!0):e=a[2][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const b=n.components&&n.components.FPScounter||o.FPScounter;e=a[0];const x={};a[3]=this.element({parent:e||"root"},!0===p?c:t),x.x=1610,x.show=t.showFPS;const w=[];if(void 0!==b)for(let M in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[M]],w.push(b[Symbol.for("config")].props[M]);a[3].populate(x),!0===p&&(d-=1),e=a[3];const S={};let T;if(S.x=1610,u=t.showFPS,!0===Array.isArray(u)&&(u=r(u).slice(0)),S.show=u,l=S.is||"FPScounter","string"==typeof l){if(T=n.components&&n.components[l]||o[l],!T)throw new Error('Component "FPScounter" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(T=l);a[4]=T.call(null,{props:S},a[3],t),a[4][Symbol.for("slots")][0]?(e=a[4][Symbol.for("slots")][0],c=a[4],p=!0):e=a[4][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);const k=n.components&&n.components.SourceInfo||o.SourceInfo;e=a[0];const C={};a[5]=this.element({parent:e||"root"},!0===p?c:t),C.ref="info",C.show=t.showInfo;const A=[];if(void 0!==k)for(let M in k[Symbol.for("config")].props)delete C[k[Symbol.for("config")].props[M]],A.push(k[Symbol.for("config")].props[M]);a[5].populate(C),!0===p&&(d-=1),e=a[5];const E={};let I;if(E.ref="info",u=t.showInfo,!0===Array.isArray(u)&&(u=r(u).slice(0)),E.show=u,l=E.is||"SourceInfo","string"==typeof l){if(I=n.components&&n.components[l]||o[l],!I)throw new Error('Component "SourceInfo" not found')}else"function"==typeof l&&!0===l[Symbol.for("isComponent")]&&(I=l);return a[6]=I.call(null,{props:E},a[5],t),a[6][Symbol.for("slots")][0]?(e=a[6][Symbol.for("slots")][0],c=a[6],p=!0):e=a[6][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),a},effects:[function(e,t,n,o,i,r){t[0].set("color",e.backgroundColor)},function(e,t,n,o,i,r){"undefined"!=typeof skip3&&-1!==skip3.indexOf("show")||t[3].set("show",e.showFPS)},function(e,t,n,o,i,r){t[4][Symbol.for("props")].show=e.showFPS},function(e,t,n,o,i,r){"undefined"!=typeof skip5&&-1!==skip5.indexOf("show")||t[5].set("show",e.showInfo)},function(e,t,n,o,i,r){t[6][Symbol.for("props")].show=e.showInfo}],context:{}},state:()=>({backgroundColor:"#1e293b",showFPS:sl,showInfo:!1}),routes:[{path:"/",component:Ui,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>ne(()=>n.import("./Loading-legacy-C5etdjML.js"))},{path:"/demos/intro",component:()=>new Promise(e=>{e(ji)})},{path:"/demos/theming",component:$i},{path:"/demos/tmdb",component:rr},{path:"/demos/sprites",component:lr},{path:"/demos/focushandling",component:pr},{path:"/demos/memory-game",component:hs,announce:"Let's play Memory"},{path:"/demos/player",component:Rr},{path:"/examples/positioning",component:dr},{path:"/examples/colors",component:_r},{path:"/examples/gradients",component:Lr},{path:"/examples/transitions",component:Dr},{path:"/examples/alpha",component:Pr},{path:"/examples/scaling",component:Or},{path:"/examples/rotation",component:Nr},{path:"/examples/keyinput",component:Ur},{path:"/examples/texts",component:Fr},{path:"/examples/images",component:$r},{path:"/examples/components",component:Hr},{path:"/examples/forloop",component:Xr},{path:"/examples/forloop-advanced",component:os},{path:"/examples/effects",component:is},{path:"/examples/showif",component:rs},{path:"/examples/events",component:ss},{path:"/examples/slots",component:cs},{path:"/examples/viewport",component:bs},...Es,{path:"/examples/resize",component:Is},{path:"/examples/languageplugin",component:Rs},{path:"/examples/keycodes",component:Ls},{path:"/examples/translations",component:Rs},{path:"/examples/special-characters",component:Os},{path:"/examples/layout",component:Ns},{path:"/examples/announcer",component:ol,announce:"Welcome to the announcement example page"},{path:"/benchmarks/exponential",component:gs},...el],hooks:{ready(){!0===rl&&(this.showInfo=!0),this.$listen("changeBackground",e=>{this.backgroundColor=e?e+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(e){return"x"===e.key?(this.$log.info(`Intercepting key press (${e.key}) in App Component`),new Promise(t=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),t(e)},2e3)})):e},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const e=ll(this.$router.currentRoute.path);e&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${e}`,"_blank")}}}),ll=e=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"}["/"+e]+".js"),ul={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},cl={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};Ei.Plugin(Ri,"colors",{themes:{light:ul.light,dark:ul.dark},base:"light",current:"dark"}),Ei.Plugin(Ri,"sizes",{themes:{small:cl.small,large:cl.large},base:"small",current:"small"}),Ei.Plugin(Mi),Ei.Launch(al,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:{...(()=>{let e={};return Object.keys(Li).forEach(t=>{Li[t].test&&"function"==typeof Li[t].test&&!0===Li[t].test()&&(e=Li[t].mapping)}),e})(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0})}}})}();
