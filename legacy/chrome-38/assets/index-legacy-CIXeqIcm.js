!function(){function e(e,n,r,o){var i=t(u(1&o?e.prototype:e),n,r);return 2&o&&"function"==typeof i?function(e){return i.apply(r,e)}:i}function t(){return t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},t.apply(null,arguments)}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function s(n,o,i,a){var s=o&&o.prototype instanceof l?o:l,c=Object.create(s.prototype);return r(c,"_invoke",function(n,r,o){var i,a,s,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,a=0,s=e,p.n=n,u}};function d(n,r){for(a=n,s=r,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],d=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,p.v=r,p.n=i[1]):d<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,c,h){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,h),a=c,s=h;(t=a<2?e:s)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,s)):p.n=s:p.v=s);try{if(l=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(f=p.n<0)?s:n.call(r,p))!==u)break}catch(t){i=e,a=1,s=t}finally{l=1}}return{value:t,done:f}}}(n,i,a),!0),c}var u={};function l(){}function c(){}function f(){}t=Object.getPrototypeOf;var p=[][i]?t(t([][i]())):(r(t={},i,function(){return this}),t),d=f.prototype=l.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=f,r(d,"constructor",f),r(f,"constructor",c),c.displayName="GeneratorFunction",r(f,a,"GeneratorFunction"),r(d),r(d,a,"Generator"),r(d,i,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:h}})()}function r(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}r=function(e,t,n,o){if(t)i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var a=function(t,n){r(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},r(e,t,n,o)}function o(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)})}}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function S(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register([],function(t,r){"use strict";return{execute:function(){var o,s,u,c,p,m,b={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),config:Symbol.for("config"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},S=y(y(y({},b.settings,{}),"get",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e in this[b.settings]?this[b.settings][e]:t}),"set",function(e,t){var n=this;"object"===x(e)?Object.keys(e).forEach(function(t){n.set(t,e[t])}):this[b.settings][e]=t}),T=function(){},k=function(){return(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})},C=function(e){var t=S.get("debugLevel"),n={};return Object.defineProperty(n,"info",{get:function(){return(t>=1||Array.isArray(t)&&t.indexOf("info")>-1)&&console.info.bind(window.console,"%c ⚡️ ".concat(e," %c ").concat(k()),"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||T}}),Object.defineProperty(n,"warn",{get:function(){return(t>=1||Array.isArray(t)&&t.indexOf("warn")>-1)&&console.warn.bind(window.console,"%c ⚡️ ".concat(e," %c ").concat(k()),"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||T}}),Object.defineProperty(n,"error",{get:function(){return(t>=1||Array.isArray(t)&&t.indexOf("error")>-1)&&console.error.bind(window.console,"%c ⚡️ ".concat(e," %c ").concat(k()),"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||T}}),Object.defineProperty(n,"debug",{get:function(){return(t>=2||Array.isArray(t)&&t.indexOf("debug")>-1)&&console.debug.bind(window.console,"%c ⚡️ ".concat(e," %c (").concat((new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),")"),"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||T}}),n},A={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},E=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,I=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,M=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,R={},_=function(e){if(void 0!==R[e])return R[e];var t=parseInt(e).toString(16).padStart(2,"0");return R[e]=t,t},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0xffffffff";if((e=e.toString()).startsWith("0x")&&10===e.length)return e;if(void 0!==A[e])return A[e];if(E.test(e)){3===(e=e.replace("#","").toLowerCase()).length&&(e=e.split("").map(function(e){return e+e}).join(""));var n="0x"+e.padEnd(8,"f");return A[e]=n,n}var r=I.exec(e);if(r){var o=_(r[3]),i=_(r[5]),a=_(r[7]),s="ff";if(r[10]&&"rgba"===r[1]){var u=Math.min(Math.max(Math.round(255*parseFloat(r[10])),0),255);s=_(u)}var l="0x"+o+i+a+s;return A[e]=l,l}return M.test(e)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):t};function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{children:[]},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={renderCode:["const elms = []","let componentType","const rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0"],effectsCode:[],context:{props:[],components:this.components}};return p=-1,!0===(m=t)&&n.renderCode.push("\n      function propInComponent(prop, kind=\"dynamic\") {\n        const property = prop.includes('.') ? prop.split('.')[0] : prop\n        if (kind === 'reactive' || prop.includes('.') === false) {\n          if (property in component === false) {\n            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')\n          }\n        } else {\n          const nestedKeys = prop.split('.')\n          let base = component\n          for(let i =0; i<nestedKeys.length;i++){\n            if (base[nestedKeys[i]] === undefined) {\n              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')\n            }\n            base = base[nestedKeys[i]]\n          }\n        }\n      }\n    "),B.call(n,e),n.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw","Log",n.renderCode.join("\n")),effects:n.effectsCode.map(function(e){return new Function("component","elms","context","components","rootComponent","effect",e)}),context:n.context}}var P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dynamic",r=function(e){var t=e.match(/\$\$?\w+(\.\w+)?/g);if(null!==t){var n=/\$shader/;return t.filter(function(e){return!n.test(e)})}return!1}(e);if(!1!==r)for(var o=0;o<r.length;o++){var i=r[o];"reactive"===n&&i.includes(".")&&(i=i.split(".")[0]),t.push("propInComponent('".concat(i.replace("$",""),"', '").concat(n,"')"))}},O=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{key:!1,component:"component.",forceEffect:!1,forloop:!1},o=r.forceEffect?this.effectsCode:this.renderCode;n&&o.push("parent = ".concat(n)),"key"in e&&(r.key=j(e.key,r.component));var i=r.key?"elms[".concat(p,"][").concat(r.key,"]"):"elms[".concat(p,"]");r.key&&o.push("\n      if(elms[".concat(p,"] === undefined) {\n        elms[").concat(p,"] = {}\n      }\n    ")),o.push("const elementConfig".concat(p," = {}")),r.forloop&&o.push("if(".concat(i," === undefined) {")),o.push("\n    ".concat(i," = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)\n  ")),r.forloop&&o.push("}");var a=e.children;delete e.children,"Slot"===e[Symbol.for("componentType")]&&o.push("elementConfig".concat(p,"[Symbol.for('isSlot')] = true")),Object.keys(e).forEach(function(n){if("slot"===n&&o.push("\n        elementConfig".concat(p,"['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '").concat(e.slot,"').shift() || parent\n      ")),"key"!==n){var a=e[n];if(z(n)){if(r.holder&&":color"===n)return;r.holder?t.effectsCode.push("\n        if(typeof skip".concat(p," === 'undefined' ||\n          skip").concat(p,".indexOf('").concat(n.substring(1),"') === -1)\n          ").concat(i,".set('").concat(n.substring(1),"', ").concat(j(e[n],r.component),")\n        ")):t.effectsCode.push("\n            ".concat(i,".set('").concat(n.substring(1),"', ").concat(j(e[n],r.component),")\n          ")),!0===m&&"scope."!==r.component&&a.includes("$")&&P(a,o,"reactive"),o.push("elementConfig".concat(p,"['").concat(n.substring(1),"'] = ").concat(j(a,r.component)))}else!0===m&&"scope."!==r.component&&a.includes("$")&&P(a,o),o.push("elementConfig".concat(p,"['").concat(n,"'] = ").concat(F(a,n,r.component)))}}),!0===r.holder&&o.push("\n    const skip".concat(p," = []\n    if(typeof cmp").concat(p," !== 'undefined') {\n      for(let key in cmp").concat(p,"[Symbol.for('config')].props) {\n        delete elementConfig").concat(p,"[cmp").concat(p,"[Symbol.for('config')].props[key]]\n        skip").concat(p,".push(cmp").concat(p,"[Symbol.for('config')].props[key])\n      }\n    }\n    ")),r.forloop&&o.push("if(".concat(i,".nodeId === undefined) {")),o.push("".concat(i,".populate(elementConfig").concat(p,")")),o.push("\n    if(inSlot === true) {\n      slotChildCounter -= 1\n    }\n  "),r.forloop&&o.push("}"),a&&B.call(this,{children:a},"".concat(i),r)},N=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1},o=r.forceEffect?this.effectsCode:this.renderCode;o.push("\n    const cmp".concat(p," =\n      (context.components && context.components['").concat(e[Symbol.for("componentType")],"']) || components['").concat(e[Symbol.for("componentType")],"']\n  ")),"key"in e&&(r.key=j(e.key,r.component));var i=e.children;delete e.children,O.call(this,e,n,g(g({},r),{holder:!0})),n=r.key?"elms[".concat(p,"][").concat(r.key,"]"):"elms[".concat(p,"]"),p++;var a=r.key?"elms[".concat(p,"][").concat(r.key,"]"):"elms[".concat(p,"]");r.key&&o.push("\n      if(elms[".concat(p,"] === undefined) {\n        elms[").concat(p,"] = {}\n      }\n    ")),n&&o.push("parent = ".concat(n)),o.push("const props".concat(p," = {}")),r.forloop&&o.push("if(".concat(a," === undefined) {")),Object.keys(e).forEach(function(n){z(n)?(t.effectsCode.push("\n        ".concat(a,"[Symbol.for('props')]['").concat(n.substring(1),"'] = ").concat(j(e[n],r.component))),o.push("\n        propData = ".concat(j(e[n],r.component),"\n        if (Array.isArray(propData) === true) {\n          propData = getRaw(propData).slice(0)\n        }\n        props").concat(p,"['").concat(n.substring(1),"'] = propData"))):o.push("props".concat(p,"['").concat(n,"'] = ").concat(F(e[n],n,r.component)))}),o.push("\n    componentType = props".concat(p,"['is'] || '").concat(e[Symbol.for("componentType")],"'\n\n    let component").concat(p,"\n    if(typeof componentType === 'string') {\n      component").concat(p," = context.components && context.components[componentType] || components[componentType]\n      if(!component").concat(p,") {\n        throw new Error('Component \"").concat(e[Symbol.for("componentType")],"\" not found')\n      }\n    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {\n      component").concat(p," = componentType\n    }\n\n    ").concat(a," = component").concat(p,".call(null, {props: props").concat(p,"}, ").concat(n,", component)\n\n    if (").concat(a,"[Symbol.for('slots')][0]) {\n      parent = ").concat(a,"[Symbol.for('slots')][0]\n      slotComponent = ").concat(a,"\n      inSlot = true\n    } else {\n      parent = ").concat(a,"[Symbol.for('children')][0]\n    }\n  ")),r.forloop&&o.push("}"),i&&(r.forloop||o.push("\n        if(inSlot === true) {\n          slotChildCounter = ".concat(i.length,"  + 1\n        }\n      ")),p++,O.call(this,{children:i},!1,g({},r))),r.forloop||o.push("\n      if (inSlot === true && slotChildCounter === 0) {\n        inSlot = false\n      }\n    ")},U=function(e,t){var n,r=e[":for"];delete e[":for"];var o=e.range||e[":range"]||"{}";delete e.range,delete e[":range"];var i=e.key,a=j(i,"scope."),s=!(e.$shallow&&"false"===e.$shallow.toLowerCase());delete e.$shallow,delete e.key;var u=/(.+)\s+in\s+(.+)/gi.exec(r),l=v(u[1].replace("(","").replace(")","").split(/\s*,\s*/),2),c=l[0],f=l[1],d=new RegExp("(scope\\.(?!".concat(c,"\\.|").concat(f,"|key)(\\w+))"),"gi"),m={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};if(t&&m.renderCode.push("parent = ".concat(t)),void 0!==f){var g=new RegExp("\\$".concat(f,"(?!['\\w])")).exec(i);Array.isArray(g)&&m.renderCode.push("console.warn(\" Using '".concat(f,"' in the key, like key=").concat(i,',  is not recommended")'))}var y=p;m.renderCode.push("\n    const created".concat(y," = []\n\n    let from").concat(y,"\n    let to").concat(y,"\n\n    const forloop").concat(y," = (collection = [], elms, created) => {\n      const rawCollection = getRaw(collection)\n      const keys = new Set()\n      let l = rawCollection.length\n\n      const range = ").concat(j(o)," || {}\n      from").concat(y," = range['from'] || 0\n      to").concat(y," = 'to' in range ? range['to'] : rawCollection.length\n\n      while(l--) {\n        const ").concat(c," = rawCollection[l]\n  ")),void 0!==f&&m.renderCode.push("\n        const ".concat(f," = l\n    ")),m.renderCode.push("\n        if(l < to".concat(y," && l >= from").concat(y,") {\n          keys.add('' +  ").concat(j(i,"")||"l",")\n        }\n      }\n  "));var b=m.renderCode.length;m.renderCode.push("\n      created.length = 0\n      const length = rawCollection.length\n      const effects = []\n      for(let __index = 0; __index < length; __index++) {\n        if(__index < from".concat(y," || __index >= to").concat(y,") continue\n        const scope = Object.create(component)\n        parent = ").concat(t,"\n        scope['").concat(c,"'] = rawCollection[__index]\n  ")),""!==f&&m.renderCode.push("\n        scope['".concat(f,"'] = __index\n    ")),m.renderCode.push("\n        scope['key'] = '' + ".concat(a||"__index","\n  ")),"ref"in e&&-1===e.ref.indexOf("$")&&(m.renderCode.push("\n        scope['__ref'] = '".concat(e.ref,"' + __index\n    ")),e.ref="$__ref"),m.renderCode.push("\n        created.push(scope.key)\n  "),"Element"===e[Symbol.for("componentType")]||"Slot"===e[Symbol.for("componentType")]||"Text"===e[Symbol.for("componentType")]?("Text"===e[Symbol.for("componentType")]&&(e.__textnode="true"),O.call(m,e,t,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):N.call(m,e,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});var x=m.effectsCode.filter(function(e){return 0===h(e.matchAll(d)).length}),w=m.effectsCode.filter(function(e){return 0!==h(e.matchAll(d)).length});!1===s&&m.renderCode.push("\n      scope['".concat(c,"'] = null\n      scope['").concat(c,"'] = collection[__index]\n  ")),x.forEach(function(e,t){var n=e.indexOf("scope.".concat(t))>-1?"'".concat(j(u[2],""),"'"):null;-1===e.indexOf("Symbol.for('props')")?m.renderCode.push("\n        let eff".concat(t," = () => {\n          ").concat(e,"\n        }\n        effect(eff").concat(t,", ").concat(n,")\n        effects.push(eff").concat(t,")\n        component[Symbol.for('effects')].push(eff").concat(t,")\n      ")):m.renderCode.push("\n        ".concat(e,"\n      "))}),m.renderCode.push("\n    }\n    return effects\n  }");var S=[];S.push("\n      let i = created.length\n\n      while (i--) {\n        if (keys.has(created[i]) === false) {\n          const key = created[i]\n  ");for(var T=p,k=y;k<=T;k++)S.push("\n          elms[".concat(k,"][key] && elms[").concat(k,"][key].destroy()\n          delete elms[").concat(k,"][key]\n      "));S.push("\n      }\n    }\n  "),(n=m.renderCode).splice.apply(n,[b,0].concat(S));var C="".concat(j(u[2],""));C&&C.includes(".")&&(C=C.match(/[^.]+$/)[0]);var A=h(o.matchAll(/\$([^,} ]+)/g)).map(function(e){return"'".concat(e[1],"'")});m.renderCode.push("\n    let forEffects".concat(y,"\n    const eff").concat(y," = () => {\n      component[Symbol.for('removeGlobalEffects')](forEffects").concat(y,")\n      forEffects").concat(y," = null\n      forEffects").concat(y," = forloop").concat(y,"(").concat(F(u[2],":for"),", elms, created").concat(y,")\n    }\n\n    component[Symbol.for('effects')].push(eff").concat(y,")\n\n    effect(eff").concat(y,", ['").concat(C,"', ").concat(A.join(","),"] )\n  ")),w.forEach(function(e,t){for(var n=h(e.matchAll(d)),r=n.length,o=[];r--;){var i=n[r],s="component.".concat(i[2]);-1===o.indexOf(s)&&o.push(s),i[2]!==c&&(e=e.substring(0,i.index)+s+e.substring(i.index+i[1].length))}m.renderCode.push("\n      const eff".concat(y,"_").concat(t," = () => {\n        void ").concat(o.join(", "),"\n        for(let __index = 0; __index < ").concat(j(u[2]),".length; __index++) {\n          if(__index < from").concat(y," || __index >= to").concat(y,") continue\n          const scope = {}\n          scope['").concat(f,"'] = __index\n          scope['").concat(c,"'] = ").concat(j(u[2]),"[__index]\n          scope['key'] = ").concat(a||"__index","\n    ")),m.renderCode.push("\n          ".concat(e,"\n        }\n      }\n      component[Symbol.for('effects')].push(eff").concat(y,"_").concat(t,")\n      effect(eff").concat(y,"_").concat(t,")\n    "))}),this.renderCode.push(m.renderCode.join("\n"))},B=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.children&&e.children.forEach(function(e){p++,Object.keys(e).indexOf(":for")>-1?U.call(t,e,n):"Element"===e[Symbol.for("componentType")]||"Slot"===e[Symbol.for("componentType")]||"Text"===e[Symbol.for("componentType")]||"Layout"===e[Symbol.for("componentType")]?("Text"===e[Symbol.for("componentType")]&&(e.__textnode="true"),"Layout"===e[Symbol.for("componentType")]&&(e.__layout="true"),O.call(t,e,n,r)):N.call(t,e,n,r)})},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component.";if(void 0===e)return e;var n,r=[],o=0,i=w(e.matchAll(/('.*?')+/gi));try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(a[0]),e=e.replace(a[0],"[@@REPLACEMENT".concat(o,"@@]")),o++}}catch(s){i.e(s)}finally{i.f()}return e=e.replace(/\$(\$(?=\$)|\$?)/g,function(e,n){return""===n?t:"$"===n?t+"$":void 0}),r.forEach(function(t,n){e=e.replace("[@@REPLACEMENT".concat(n,"@@]"),t)}),e},F=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"component.";if("content"===n)if(t.startsWith("$"))e="".concat(r).concat(t.replace("$",""));else{var o=t.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");e="'".concat(G(o,r),"'")}else if("color"===n||!1!==/[^0-9%\s.eE]/.test(t)||isNaN(parseFloat(t)))if("true"===t.toLowerCase())e=!0;else if("false"===t.toLowerCase())e=!1;else if(n.startsWith("@")&&t){var i=r.slice(0,-1);e="".concat(i,"['").concat(t.replace("$",""),"'] && ").concat(i,"['").concat(t.replace("$",""),"'].bind(").concat(i,")")}else if(t.startsWith("$"))e="".concat(r).concat(t.replace("$",""));else{if(/\$\w+/gi.exec(t)){var a=t.match(/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g);if(e={},a)for(var s=0;s<a.length;s++){var u=a[s].split(/\s*:\s*/);u&&V(u[0],u[1],r,e)}return H(e)}e='"'.concat(t,'"')}else if(e=parseFloat(t),t.endsWith("%")){var l={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[n];l&&(e="parent.node.".concat(l," * (").concat(e," / 100)"))}return e},z=function(e){return e.startsWith(":")},G=function(e,t){var n=h(e.matchAll(/\{\{\s*(\$\S+)\s*\}\}/g));if(n.length){var r,o=w(n);try{for(o.s();!(r=o.n()).done;){var i=v(r.value,2),a=i[0],s=i[1];e=e.replace(a,"".concat(s.replace("$","'+".concat(t)),"+'"))}}catch(u){o.e(u)}finally{o.f()}}return e},V=function(e,t,n,r){t.startsWith("$")?r[e]="".concat(n).concat(t.replace("$","")):r[e]=t},H=function(e){var t=[];return Object.keys(e).forEach(function(n){t.push("".concat(n,": ").concat(e[n]))})," { ".concat(t.join(", ")," }")},q={},X=0,W={},K=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];W[t]&&W[t][e]&&W[t][e].apply(n,r)},$=null,Y=null,Q=!1,J=new WeakMap,Z=new Map,ee=function(e){if(0!==Z.size){var t,n=w(Z);try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),o=r[0],i=r[1];if(-1!==e.indexOf(o)){var a=J.get(i);if(void 0!==a){var s,u=w(a.values());try{for(u.s();!(s=u.n()).done;){s.value.delete(o),Z.delete(o)}}catch(l){u.e(l)}finally{u.f()}}}}}catch(l){n.e(l)}finally{n.f()}}},te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==$){if(Q)return;if(!0===Array.isArray(Y)){if(!1===Y.includes(t))return}else if(null!==Y&&t!==Y)return;var r=J.get(e);void 0===r&&(r=new Map,J.set(e,r));var o=r.get(t);void 0===o&&(o=new Set,r.set(t,o)),o.add($),!0===n&&Z.set($,e)}},ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!0!==Q){var r=J.get(e);if(void 0!==r){var o=r.get(t);if(void 0!==o){var i,a=w(o);try{for(a.s();!(i=a.n()).done;){(0,i.value)(n)}}catch(s){a.e(s)}finally{a.f()}}}}},re=function(e){Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,($=e)(),$=null,Y=null},oe=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=e.length;n--;){var r=e[n],o=t[n];if(Array.isArray(r)&&Array.isArray(o)){if(!1===oe(r,o))return!1}else if("object"===x(r)&&null!==r&&"object"===x(o)&&null!==o){if(!1===oe(Object.entries(r),Object.entries(o)))return!1}else if(r!==o)return!1}return!0},ie=["push","pop","shift","unshift","splice","sort"],ae=new WeakMap,se=function(e){var t=e&&e[b.raw];return t?se(t):e},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("object"===x(e)&&!1===Array.isArray(e)&&Object.getPrototypeOf(e)!==Object.prototype)return e;var o=ae.get(e);if(void 0!==o)return o;var i={get:function(o,i,a){return i===b.raw?e:!0===Array.isArray(o)?"object"===x(o[i])&&null!==o[i]?(!0===Array.isArray(o[i])&&te(o,i,r),ue(se(o[i]),o,i)):-1!==ie.indexOf(i)?function(){Q=!0;for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var s=o[i].apply(this,r);return Q=!1,ne(t,n),s}:"length"===i?e.length:Reflect.get(o,i,a):"object"===x(o[i])&&null!==o[i]?(!0===Array.isArray(o[i])&&te(o,i,r),ue(se(o[i]),o,i)):(te(o,i,r),Reflect.get(o,i,a))},set:function(e,r,o,i){var a=se(e[r]),s=se(o),u=!0,l=!1;return!0===Array.isArray(s)&&!0===Array.isArray(a)?l=oe(a,s):a===s&&(l=!0),!1===l&&("object"===x(o)&&(!0===Array.isArray(o)?o=se(o).slice(0):null!==o&&null!==e[r]&&void 0!==e[r]&&!1===Array.isArray(e)&&Object.getPrototypeOf(o)===Object.prototype&&(o=Object.assign(i[r],o))),u=Reflect.set(e,r,o,i)),!0===u&&!1===l&&(!0===Array.isArray(e)&&r in e==!0&&ne(t,n,!0),ne(e,r,!0)),u}},a=new Proxy(e,i);return ae.set(e,a),a},le=function(e,t){return Object.keys(e).forEach(function(n){var r=e[n];if(null!==e[n]&&"object"===x(e[n])){if(Object.getPrototypeOf(e[n])===Object.prototype)return le(e[n]);if(!0===Array.isArray(e[n]))for(var o=function(t){e[n][ie[t]]=function(r){Array.prototype[ie[t]].call(this,r),ne(e,n)}},i=0;i<ie.length-1;i++)o(i)}Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){return te(e,n,t),r},set:function(t){r!==t&&(r=t,ne(e,n))}})}),e},ce="undefined"!=typeof Proxy,fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Proxy",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!1===ce&&(t="defineProperty"),"defineProperty"===t?le(e,n):ue(e,void 0,void 0,n)},pe=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],de={previous:null,current:null,get state(){return this.current},set state(e){var t,n,r,o;pe.indexOf(e)>-1&&(e!==this.current||"focus"===e)&&(c.debug("Setting lifecycle state from ".concat(this.current," to ").concat(e," for ").concat(this.component.componentId)),this.previous=this.current,this.current=e,t=e,n=this.component[b.identifier],r=this.component,o=b[t],W[n]&&W[n][o]&&W[n][o].apply(r),K(e,this.component[b.identifier],this.component))}},he=function(e,t,n){var r=Promise.resolve();function o(e){var t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(function(t){var n,r=w(t||[]);try{for(r.s();!(n=r.n()).done;){var i=n.value;"rejected"===i.status&&o(i.reason)}}catch(a){r.e(a)}finally{r.f()}return e().catch(o)})},me={BASE_URL:"/legacy/chrome-38/",DEV:!1,LEGACY:!0,MODE:"production",PROD:!0,SSR:!1,VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",VITE_TMDB_KEY:"ABC123"};function ge(e,t){if(!0!==Se()&&!e)throw new Error(t||"Assertion failed")}function ve(e,t,n){var r=Math.trunc(e>>>24),o=Math.trunc(e>>>16&255),i=Math.trunc(e>>>8&255),a=Math.trunc(255&e),s=Math.trunc(t>>>24),u=Math.trunc(t>>>16&255),l=Math.trunc(t>>>8&255),c=Math.trunc(255&t);return(Math.round(s*n+r*(1-n))<<24|Math.round(u*n+o*(1-n))<<16|Math.round(l*n+i*(1-n))<<8|Math.round(c*n+a*(1-n)))>>>0}function ye(e,t){return(e>>>24<<24|(e>>>16&255)<<16|(e>>>8&255)<<8|Math.trunc((255&e)*t))>>>0}var be=!0;function xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(255&e)/255*t,o=be?r:1,i=Math.trunc((e>>>24)*o),a=Math.trunc((e>>>16&255)*o),s=Math.trunc((e>>>8&255)*o),u=Math.trunc(255*r);return n?(u<<24|s<<16|a<<8|i)>>>0:(i<<24|a<<16|s<<8|u)>>>0}function we(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Se(){return me&&!0}var Te=1;var ke,Ce=function(){return d(function e(){f(this,e),y(this,"eventListeners",{})},[{key:"on",value:function(e,t){var n=this.eventListeners[e];n||(n=[]),n.push(t),this.eventListeners[e]=n}},{key:"off",value:function(e,t){var n=this.eventListeners[e];if(n)if(t){var r=n.indexOf(t);r>=0&&n.splice(r,1)}else delete this.eventListeners[e]}},{key:"once",value:function(e,t){var n=this,r=function(o,i){n.off(e,r),t(o,i)};this.on(e,r)}},{key:"emit",value:function(e,t){var n=this,r=this.eventListeners[e];r&&h(r).forEach(function(e){e(n,t)})}},{key:"removeAllListeners",value:function(){this.eventListeners={}}}])}();!function(e){e[e.generic=0]="generic",e[e.color=1]="color",e[e.image=2]="image",e[e.noise=3]="noise",e[e.renderToTexture=4]="renderToTexture",e[e.subTexture=5]="subTexture"}(ke||(ke={}));var Ae=function(e){function t(e){var n;return f(this,t),y(n=a(this,t),"txManager",void 0),y(n,"_dimensions",null),y(n,"_error",null),y(n,"state","initial"),y(n,"renderableOwners",new Set),y(n,"renderable",!1),y(n,"type",ke.generic),y(n,"preventCleanup",!1),y(n,"ctxTexture",void 0),y(n,"textureData",null),n.txManager=e,n}return l(t,e),d(t,[{key:"dimensions",get:function(){return this._dimensions}},{key:"error",get:function(){return this._error}},{key:"setRenderableOwner",value:function(e,t){var n=this.renderableOwners.size;if(!0===t){!1===this.renderableOwners.has(e)&&this.renderableOwners.add(e);var r,o=this.renderableOwners.size;if(o>n&&1===o)this.renderable=!0,null===(r=this.onChangeIsRenderable)||void 0===r||r.call(this,!0),this.load()}else{this.renderableOwners.delete(e);var i,a=this.renderableOwners.size;if(a<n&&0===a)this.renderable=!1,null===(i=this.onChangeIsRenderable)||void 0===i||i.call(this,!1),this.txManager.orphanTexture(this)}}},{key:"load",value:function(){this.txManager.loadTexture(this)}},{key:"loadCtxTexture",value:function(){return void 0===this.ctxTexture&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}},{key:"free",value:function(){var e;null===(e=this.ctxTexture)||void 0===e||e.free()}},{key:"destroy",value:function(){this.removeAllListeners(),this.free(),this.freeTextureData(),this.renderableOwners.clear()}},{key:"freeTextureData",value:function(){this.textureData=null}},{key:"setState",value:function(e,t){if(this.state!==e){var n=null;"loaded"===e?(void 0!==t&&"width"in t==!0&&"height"in t==!0&&void 0!==t.width&&void 0!==t.height&&(this._dimensions=t),n=this._dimensions):"failed"===e&&(this._error=t,n=this._error),this.state=e,this.emit(e,n)}}},{key:"getTextureData",value:(r=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:if(null!==this.textureData){e.n=2;break}return e.n=1,this.getTextureSource();case 1:this.textureData=e.v;case 2:return e.a(2,this.textureData)}},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{}}}]);var r}(Ce),Ee=/^(data|ftps?|https?):/,Ie=function(e){return[(e>>>24)/255,(e>>>16&255)/255,(e>>>8&255)/255,(255&e)/255]},Me=function(e){return[e>>>24,e>>>16&255,e>>>8&255,255&e]};function Re(e){return(255&e)/255}function _e(e){var t=Math.floor(255*e[0]),n=Math.floor(255*e[1]),r=Math.floor(255*e[2]),o=Math.floor(255*e[3]);return"rgba(".concat(t,",").concat(n,",").concat(r,",").concat(o.toFixed(4),")")}function Le(e,t,n,r,o){return o?(o.x1=e,o.y1=t,o.x2=n,o.y2=r,o):{x1:e,y1:t,x2:n,y2:r}}function De(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}function Pe(e,t,n){var r=Math.max(e.x,t.x),o=Math.max(e.y,t.y),i=Math.min(e.x+e.width,t.x+t.width)-r,a=Math.min(e.y+e.height,t.y+t.height)-o;return i>0&&a>0?n?(n.x=r,n.y=o,n.width=i,n.height=a,n):{x:r,y:o,width:i,height:a}:n?(n.x=0,n.y=0,n.width=0,n.height=0,n):{x:0,y:0,width:0,height:0}}function Oe(e,t){return t?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):{x:e.x,y:e.y,width:e.width,height:e.height}}function Ne(e,t){return e.x1<=t.x2&&e.y1<=t.y2&&e.x2>=t.x1&&e.y2>=t.y1}function Ue(e,t){return Le(e.x1-t[3],e.y1-t[0],e.x2+t[1],e.y2+t[2])}function Be(e){return!0===e.startsWith("data:")}function je(e){for(var t,n=(null===(t=(e=e.replace(/^data:/,"")).match(/image\/[^;]+/))||void 0===t?void 0:t[0])||"",r=e.replace(/^[^,]+,/,""),o=1024,i=atob(r),a=i.length,s=Math.ceil(a/o),u=new Array(s),l=0;l<s;++l){for(var c=l*o,f=Math.min(c+o,a),p=new Array(f-c),d=c,h=0;d<f;++h,++d){var m;p[h]=null===(m=i[d])||void 0===m?void 0:m.charCodeAt(0)}u[l]=new Uint8Array(p)}return new Blob(u,{type:n})}var Fe=function(){function e(){f(this,e),y(this,"ta",void 0),y(this,"tb",void 0),y(this,"tx",void 0),y(this,"tc",void 0),y(this,"td",void 0),y(this,"ty",void 0),y(this,"_floatArr",null),y(this,"mutation",void 0),this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}return d(e,[{key:"translate",value:function(e,t){return this.tx=this.ta*e+this.tb*t+this.tx,this.ty=this.tc*e+this.td*t+this.ty,this.mutation=!0,this}},{key:"scale",value:function(e,t){return this.ta=this.ta*e,this.tb=this.tb*t,this.tc=this.tc*e,this.td=this.td*t,this.mutation=!0,this}},{key:"rotate",value:function(e){if(0===e||!(e%Math.PI*2))return this;var t=Math.cos(e),n=Math.sin(e),r=this.ta*t+this.tb*n,o=this.tb*t-this.ta*n,i=this.tc*t+this.td*n,a=this.td*t-this.tc*n;return this.ta=r,this.tb=o,this.tc=i,this.td=a,this.mutation=!0,this}},{key:"multiply",value:function(t){return e.multiply(this,t,this)}},{key:"getFloatArr",value:function(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}],[{key:"temp",get:function(){return ze}},{key:"multiply",value:function(t,n,r){var o=t.ta*n.ta+t.tb*n.tc,i=t.ta*n.tb+t.tb*n.td,a=t.ta*n.tx+t.tb*n.ty+t.tx,s=t.tc*n.ta+t.td*n.tc,u=t.tc*n.tb+t.td*n.td,l=t.tc*n.tx+t.td*n.ty+t.ty;return r||(r=new e),r.ta=o,r.tb=i,r.tx=a,r.tc=s,r.td=u,r.ty=l,r.mutation=!0,r}},{key:"identity",value:function(t){return t||(t=new e),t.ta=1,t.tb=0,t.tx=0,t.tc=0,t.td=1,t.ty=0,t.mutation=!0,t}},{key:"translate",value:function(t,n,r){return r||(r=new e),r.ta=1,r.tb=0,r.tx=t,r.tc=0,r.td=1,r.ty=n,r.mutation=!0,r}},{key:"scale",value:function(t,n,r){return r||(r=new e),r.ta=t,r.tb=0,r.tx=0,r.tc=0,r.td=n,r.ty=0,r.mutation=!0,r}},{key:"rotate",value:function(t,n){var r=Math.cos(t),o=Math.sin(t);return n||(n=new e),n.ta=r,n.tb=-o,n.tx=0,n.tc=o,n.td=r,n.ty=0,n.mutation=!0,n}},{key:"copy",value:function(t,n){return n||(n=new e),n.ta=t.ta,n.tc=t.tc,n.tb=t.tb,n.td=t.td,n.tx=t.tx,n.ty=t.ty,n.mutation=!0,n}}])}(),ze=new Fe,Ge=function(){function e(t){f(this,e),y(this,"data",void 0),this.data=new Float32Array(8),t&&(this.data[0]=t[0],this.data[2]=t[2],this.data[4]=t[4],this.data[6]=t[6],this.data[1]=t[1],this.data[3]=t[3],this.data[5]=t[5],this.data[7]=t[7])}return d(e,[{key:"x1",get:function(){return this.data[0]}},{key:"x2",get:function(){return this.data[2]}},{key:"x3",get:function(){return this.data[4]}},{key:"x4",get:function(){return this.data[6]}},{key:"y1",get:function(){return this.data[1]}},{key:"y2",get:function(){return this.data[3]}},{key:"y3",get:function(){return this.data[5]}},{key:"y4",get:function(){return this.data[7]}}],[{key:"translate",value:function(t,n,r,o,i,a,s,u,l){return l||(l=new e),l.data[0]=t,l.data[2]=r,l.data[4]=i,l.data[6]=s,l.data[1]=n,l.data[3]=o,l.data[5]=a,l.data[7]=u,l}}])}(),Ve=function(e,t,n,r){var o=3*e,i=3*(n-e)-o,a=1-o-i,s=3*t,u=3*(r-t)-s,l=1-s-u;return function(e){if(e>=1)return 1;if(e<=0)return 0;for(var t,n,r=.5,c=0;c<20;c++){if((n=e-r*(r*(r*a+i)+o))>-1e-8&&n<1e-8)return r*(r*(r*l+u)+s);if((t=r*(r*(3*a)+2*i)+o)>1e-10&&t<1e-10)break;r+=n/t}for(var f=0,p=1,d=0;d<20;d++){if((n=e-(r=.5*(f+p))*(r*(r*a+i)+o))>-1e-8&&n<1e-8)return r*(r*(r*l+u)+s);n<0?p=r:f=r}}},He={},qe={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},Xe=function(e){return e},We=function(e){if("linear"===e)return Xe;if(void 0!==He[e])return He[e]||Xe;if("step-start"===e)return function(){return 1};if("step-end"===e)return function(e){return 1===e?1:0};var t=qe[e];if(void 0!==t){var n=v(t,4),r=n[0],o=n[1],i=n[2],a=n[3],s=Ve(r,o,i,a);return He[e]=s,s}return e.startsWith("cubic-bezier")?function(e){var t=e.match(/-?\d*\.?\d+/g);if(t){var n=v(t,4),r=n[0],o=n[1],i=n[2],a=n[3],s=parseFloat(r||"0.42"),u=parseFloat(o||"0"),l=parseFloat(i||"1"),c=parseFloat(a||"1"),f=Ve(s,u,l,c);return He[e]=f,f}return console.warn("Unknown cubic-bezier timing: "+e),Xe}(e):(console.warn("Unknown timing function: "+e),Xe)};function Ke(e){return(e/1024/1024).toFixed(2)}var $e,Ye=function(e){function t(e,n,r){var o,i,s,u,l,c,p;for(var d in f(this,t),y(p=a(this,t),"node",void 0),y(p,"props",void 0),y(p,"settings",void 0),y(p,"progress",0),y(p,"delayFor",0),y(p,"delay",0),y(p,"timingFunction",void 0),y(p,"propValuesMap",{}),y(p,"dynPropValuesMap",void 0),p.node=e,p.props=n,n)if("shaderProps"!==d)void 0===p.propValuesMap.props&&(p.propValuesMap.props={}),p.propValuesMap.props[d]={start:e[d]||0,target:n[d]};else if("DynamicShader"!==e.shader.type)for(var h in p.propValuesMap.shaderProps={},n.shaderProps)p.propValuesMap.shaderProps[h]={start:e.shader.props[h],target:n.shaderProps[h]};else{var m=Object.keys(n.shaderProps),g=m.length;p.dynPropValuesMap={};for(var b=0;b<g;b++){var x=m[b],w=n.shaderProps[x];p.dynPropValuesMap[x]={};for(var S=Object.entries(w),T=S.length,k=0;k<T;k++){var C=v(S[k],2),A=C[0],E=C[1];p.dynPropValuesMap[x][A]={start:e.shader.props[x][A],target:E}}}}var I=r.easing||"linear",M=null!==(o=r.delay)&&void 0!==o?o:0;return p.settings={duration:null!==(i=r.duration)&&void 0!==i?i:0,delay:M,easing:I,loop:null!==(s=r.loop)&&void 0!==s&&s,repeat:null!==(u=r.repeat)&&void 0!==u?u:0,repeatDelay:null!==(l=r.repeatDelay)&&void 0!==l?l:0,stopMethod:null!==(c=r.stopMethod)&&void 0!==c&&c},p.timingFunction=We(I),p.delayFor=M,p.delay=M,p}return l(t,e),d(t,[{key:"reset",value:function(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}},{key:"restoreValues",value:function(e,t){for(var n=Object.entries(t),r=n.length,o=0;o<r;o++){var i=v(n[o],2),a=i[0],s=i[1];e[a]=s.start}}},{key:"restore",value:function(){if(this.reset(),void 0!==this.propValuesMap.props&&this.restoreValues(this.node,this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){var e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(var n=0;n<t;n++){var r=e[n];this.restoreValues(this.node.shader.props[r],this.dynPropValuesMap[r])}}}},{key:"reverseValues",value:function(e){for(var t=Object.entries(e),n=t.length,r=0;r<n;r++){var o=v(t[r],2),i=o[0],a=o[1];e[i]={start:a.target,target:a.start}}}},{key:"reverse",value:function(){if(this.progress=0,void 0!==this.propValuesMap.props&&this.reverseValues(this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.reverseValues(this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){var e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(var n=0;n<t;n++){var r=e[n];this.reverseValues(this.dynPropValuesMap[r])}}this.settings.loop||(this.settings.stopMethod=!1)}},{key:"applyEasing",value:function(e,t,n){return(this.timingFunction(e)||e)*(n-t)+t}},{key:"updateValue",value:function(e,t,n,r){if(1===this.progress)return t;if(0===this.progress)return n;var o=t;return-1!==e.indexOf("color")?n===o?n:ve(n,o,r&&this.timingFunction(this.progress)||this.progress):r?this.applyEasing(this.progress,n,o):n+(o-n)*this.progress}},{key:"updateValues",value:function(e,t,n){for(var r=Object.entries(t),o=r.length,i=0;i<o;i++){var a=v(r[i],2),s=a[0],u=a[1];e[s]=this.updateValue(s,u.target,u.start,n)}}},{key:"update",value:function(e){var t=this.settings,n=t.duration,r=t.loop,o=t.easing,i=t.stopMethod,a=this.delayFor;if(this.node.destroyed)this.emit("destroyed",{});else if(0!==n||0!==a){if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(0!==n)if(0===this.progress&&this.emit("animating",{}),this.progress+=e/n,this.progress>1&&(this.progress=r?0:1,this.delayFor=this.delay,i))this.emit("finished",{});else{if(void 0!==this.propValuesMap.props&&this.updateValues(this.node,this.propValuesMap.props,o),void 0!==this.propValuesMap.shaderProps&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,o),void 0!==this.dynPropValuesMap){var s=Object.keys(this.dynPropValuesMap),u=s.length;if(u>0)for(var l=0;l<u;l++){var c=s[l];this.updateValues(this.node.shader.props[c],this.dynPropValuesMap[c],o)}}this.progress<1&&this.emit("tick",{progress:this.progress}),1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}else this.emit("finished",{})}}])}(Ce),Qe=function(e){function t(e,n){var r;return f(this,t),y(r=a(this,t),"manager",void 0),y(r,"animation",void 0),y(r,"stoppedPromise",void 0),y(r,"stoppedResolve",null),y(r,"state",void 0),r.manager=e,r.animation=n,r.state="stopped",r.stoppedPromise=Promise.resolve(),r.onAnimating=r.onAnimating.bind(r),r.onFinished=r.onFinished.bind(r),r.onTick=r.onTick.bind(r),r.onDestroy=r.onDestroy.bind(r),r}return l(t,e),d(t,[{key:"start",value:function(){return"running"!==this.state&&"scheduled"!==this.state&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}},{key:"stop",value:function(){return this.unregisterAnimation(),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}},{key:"pause",value:function(){return this.unregisterAnimation(),this.state="paused",this}},{key:"restore",value:function(){return this.stoppedResolve=null,this.animation.restore(),this}},{key:"waitUntilStopped",value:function(){return this.stoppedPromise}},{key:"registerAnimation",value:function(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.animation.on("destroyed",this.onDestroy),this.manager.registerAnimation(this.animation)}},{key:"unregisterAnimation",value:function(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick),this.animation.off("destroy",this.onDestroy)}},{key:"makeStoppedPromise",value:function(){var e=this;null===this.stoppedResolve&&(this.stoppedPromise=new Promise(function(t){e.stoppedResolve=t}))}},{key:"onDestroy",value:function(){this.unregisterAnimation(),this.state="stopped"}},{key:"onFinished",value:function(){ge(this.stoppedResolve);var e=this.animation.settings,t=e.loop;if("reverse"===e.stopMethod)return this.animation.once("finished",this.onFinished),void this.animation.reverse();t||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}},{key:"onAnimating",value:function(){this.state="running",this.emit("animating",this)}},{key:"onTick",value:function(e,t){this.emit("tick",t)}}])}(Ce);!function(e){e[e.Init=0]="Init",e[e.OutOfBounds=2]="OutOfBounds",e[e.InBounds=4]="InBounds",e[e.InViewport=8]="InViewport"}($e||($e={}));var Je,Ze=new Map;Ze.set($e.Init,"init"),Ze.set($e.OutOfBounds,"outOfBounds"),Ze.set($e.InBounds,"inBounds"),Ze.set($e.InViewport,"inViewport"),function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.RenderState=512]="RenderState",e[e.IsRenderable=1024]="IsRenderable",e[e.RenderTexture=2048]="RenderTexture",e[e.ParentRenderTexture=4096]="ParentRenderTexture",e[e.RenderBounds=8192]="RenderBounds",e[e.None=0]="None",e[e.All=14335]="All"}(Je||(Je={}));var et=function(e){function t(e,n){var r;return f(this,t),y(r=a(this,t),"stage",void 0),y(r,"children",[]),y(r,"_id",Te++),y(r,"props",void 0),y(r,"updateType",Je.All),y(r,"childUpdateType",Je.None),y(r,"globalTransform",void 0),y(r,"scaleRotateTransform",void 0),y(r,"localTransform",void 0),y(r,"sceneGlobalTransform",void 0),y(r,"renderCoords",void 0),y(r,"sceneRenderCoords",void 0),y(r,"renderBound",void 0),y(r,"strictBound",void 0),y(r,"preloadBound",void 0),y(r,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),y(r,"isRenderable",!1),y(r,"renderState",$e.Init),y(r,"worldAlpha",1),y(r,"premultipliedColorTl",0),y(r,"premultipliedColorTr",0),y(r,"premultipliedColorBl",0),y(r,"premultipliedColorBr",0),y(r,"calcZIndex",0),y(r,"hasRTTupdates",!1),y(r,"parentHasRenderTexture",!1),y(r,"rttParent",null),y(r,"destroyed",!1),y(r,"onTextureLoaded",function(e,t){var n;r.autosizeNode(t),r.setUpdateType(Je.IsRenderable),r.stage.requestRender(),r.parentHasRenderTexture&&r.notifyParentRTTOfUpdate(),t.width>1&&t.height>1&&r.emit("loaded",{type:"texture",dimensions:t}),"contain"===(null===(n=r.props.textureOptions)||void 0===n||null===(n=n.resizeMode)||void 0===n?void 0:n.type)&&r.setUpdateType(Je.Local)}),y(r,"onTextureFailed",function(e,t){r.setUpdateType(Je.IsRenderable),r.parentHasRenderTexture&&r.notifyParentRTTOfUpdate(),r.emit("failed",{type:"texture",error:t})}),y(r,"onTextureFreed",function(){r.setUpdateType(Je.IsRenderable),r.parentHasRenderTexture&&r.notifyParentRTTOfUpdate(),r.emit("freed",{type:"texture"})}),r.stage=e,r.props=g(g({},n),{},{parent:null,texture:null,src:null,rtt:!1}),r.parent=n.parent,r.texture=n.texture,r.src=n.src,r.rtt=n.rtt,n.boundsMargin&&(r.boundsMargin=Array.isArray(n.boundsMargin)?n.boundsMargin:[n.boundsMargin,n.boundsMargin,n.boundsMargin,n.boundsMargin]),r.setUpdateType(Je.ScaleRotate|Je.Local|Je.RenderBounds|Je.RenderState),!1===Se()&&!0===n.preventCleanup&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),r.stage.defaultTexture&&"loaded"!==r.stage.defaultTexture.state&&r.stage.defaultTexture.once("loaded",function(){r.setUpdateType(Je.IsRenderable)}),r}return l(t,e),d(t,[{key:"loadTexture",value:function(){var e=this,t=this.props.texture;ge(t),queueMicrotask(function(){var n,r;!0===e.textureOptions.preload&&e.stage.txManager.loadTexture(t),t.preventCleanup=null!==(n=null===(r=e.props.textureOptions)||void 0===r?void 0:r.preventCleanup)&&void 0!==n&&n,t.on("loaded",e.onTextureLoaded),t.on("failed",e.onTextureFailed),t.on("freed",e.onTextureFreed),e.parentHasRenderTexture?e.notifyParentRTTOfUpdate():"loaded"===t.state?(ge(t.dimensions),e.onTextureLoaded(t,t.dimensions)):"failed"===t.state?(ge(t.error),e.onTextureFailed(t,t.error)):"freed"===t.state&&e.onTextureFreed(t)})}},{key:"unloadTexture",value:function(){null!==this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}},{key:"autosizeNode",value:function(e){this.autosize&&(this.width=e.width,this.height=e.height)}},{key:"setUpdateType",value:function(e){this.updateType|=e;var t=this.props.parent;t&&0===(t.updateType&Je.Children)&&t.setUpdateType(Je.Children)}},{key:"sortChildren",value:function(){this.children.sort(function(e,t){return e.calcZIndex-t.calcZIndex})}},{key:"updateScaleRotateTransform",value:function(){var e=this.props,t=e.rotation,n=e.scaleX,r=e.scaleY;this.scaleRotateTransform=0!==t||1!==n||1!==r?Fe.rotate(t,this.scaleRotateTransform).scale(n,r):void 0}},{key:"updateLocalTransform",value:function(){var e,t=this.props,n=t.x,r=t.y,o=t.width,i=t.height,a=this.props.mountX*o,s=this.props.mountY*i;if(this.scaleRotateTransform){var u=this.props.pivotX*o,l=this.props.pivotY*i;this.localTransform=Fe.translate(n-a+u,r-s+l,this.localTransform).multiply(this.scaleRotateTransform).translate(-u,-l)}else this.localTransform=Fe.translate(n-a,r-s,this.localTransform);var c=this.props.texture;if(c&&c.dimensions&&"contain"===(null===(e=this.props.textureOptions)||void 0===e||null===(e=e.resizeMode)||void 0===e?void 0:e.type)){var f=1,p=1,d=0,h=0,m=c.dimensions,g=m.width,v=m.height;if(g/v>o/i){var y=v*(o/g);h=(i-y)/2,p=y/i}else{var b=g*(i/v);d=(o-b)/2,f=b/o}this.localTransform.translate(d,h).scale(f,p)}this.setUpdateType(Je.Global)}},{key:"update",value:function(e,t){this.updateType&Je.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Je.Local)),this.updateType&Je.Local&&(this.updateLocalTransform(),this.setUpdateType(Je.Global));var n=this.props.parent,r=null;if(this.updateType&Je.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&Je.Global&&(ge(this.localTransform),!0===this.parentHasRenderTexture&&!0===(null==n?void 0:n.rtt)?(this.globalTransform=Fe.identity(),this.sceneGlobalTransform=Fe.copy((null==n?void 0:n.globalTransform)||Fe.identity()).multiply(this.localTransform)):!0===this.parentHasRenderTexture&&!1===(null==n?void 0:n.rtt)?(this.sceneGlobalTransform=Fe.copy((null==n?void 0:n.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=Fe.copy((null==n?void 0:n.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=Fe.copy((null==n?void 0:n.globalTransform)||this.localTransform,this.globalTransform),null!==n&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Je.RenderState|Je.Children),this.childUpdateType|=Je.Global,!0===this.clipping&&(this.setUpdateType(Je.Clipping|Je.RenderBounds),this.childUpdateType|=Je.RenderBounds)),this.updateType&Je.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(Je.RenderState),this.setUpdateType(Je.Children),this.childUpdateType|=Je.RenderBounds),this.updateType&Je.RenderState&&(r=this.checkRenderBounds(),this.setUpdateType(Je.IsRenderable),r!==$e.OutOfBounds&&this.updateRenderState(r)),this.updateType&Je.WorldAlpha&&(this.worldAlpha=n?n.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(Je.Children|Je.PremultipliedColors|Je.IsRenderable),this.childUpdateType|=Je.WorldAlpha),this.updateType&Je.IsRenderable&&this.updateIsRenderable(),this.updateType&Je.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(Je.Children),this.childUpdateType|=Je.Clipping,this.childUpdateType|=Je.RenderBounds),this.updateType&Je.PremultipliedColors&&(this.premultipliedColorTl=xe(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=xe(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=xe(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=xe(this.props.colorBr,this.worldAlpha,!0))),null!==n&&this.updateType&Je.CalculatedZIndex&&(this.calculateZIndex(),n.setUpdateType(Je.ZIndexSortedChildren)),!0!==this.props.strictBounds||this.renderState!==$e.OutOfBounds){if(this.updateType&Je.Children&&this.children.length>0)for(var o=0,i=this.children.length;o<i;o++){var a=this.children[o];if(a.setUpdateType(this.childUpdateType),0!==a.updateType){var s=this.clippingRect;!0===this.rtt&&(s={x:0,y:0,width:0,height:0,valid:!1}),a.update(e,s)}}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&Je.ZIndexSortedChildren&&this.sortChildren(),r===$e.OutOfBounds&&(this.updateRenderState(r),this.updateIsRenderable(),!0===this.rtt&&r===$e.OutOfBounds&&this.notifyChildrenRTTOfUpdate(r)),this.updateType=0,this.childUpdateType=0}else this.updateType&=~Je.RenderBounds}},{key:"findParentRTTNode",value:function(){for(var e=this.parent;e&&!e.rtt;)e=e.parent;return e}},{key:"getRTTParentRenderState",value:function(){var e=this.rttParent||this.findParentRTTNode();return e?e.renderState:null}},{key:"notifyChildrenRTTOfUpdate",value:function(e){var t,n=w(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.updateRenderState(e),r.updateIsRenderable(),r.notifyChildrenRTTOfUpdate(e)}}catch(o){n.e(o)}finally{n.f()}}},{key:"notifyParentRTTOfUpdate",value:function(){if(null!==this.parent){var e=this.rttParent||this.findParentRTTNode();e&&(e.hasRTTupdates=!0,e.setUpdateType(Je.RenderTexture),!0===e.parentHasRenderTexture&&e.notifyParentRTTOfUpdate())}}},{key:"checkRenderBounds",value:function(){return ge(this.renderBound),ge(this.strictBound),ge(this.preloadBound),Ne(this.renderBound,this.strictBound)?$e.InViewport:Ne(this.renderBound,this.preloadBound)?$e.InBounds:(e=this.renderBound,t=this.strictBound,e.x1<t.x1&&e.x2>t.x2&&e.y1<t.y1&&e.y2>t.y2?$e.InViewport:null===this.parent||0!==this.props.width&&0!==this.props.height?$e.OutOfBounds:this.parent.renderState);var e,t}},{key:"updateBoundingRect",value:function(){var e=this.sceneGlobalTransform||this.globalTransform,t=this.sceneRenderCoords||this.renderCoords;ge(e),ge(t);var n=e.tb,r=e.tc,o=t.x1,i=t.y1,a=t.x3,s=t.y3;if(0===n||0===r)this.renderBound=Le(o,i,a,s,this.renderBound);else{var u=t.x2,l=t.x4,c=t.y2,f=t.y4;this.renderBound=Le(Math.min(o,u,a,l),Math.min(i,c,s,f),Math.max(o,u,a,l),Math.max(i,c,s,f),this.renderBound)}}},{key:"createRenderBounds",value:function(){if(ge(this.stage),null!==this.parent&&void 0!==this.parent.strictBound){var e=this.parent.strictBound;this.strictBound=Le(e.x1,e.y1,e.x2,e.y2),this.preloadBound=Ue(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(!1!==this.props.clipping&&void 0!==this.renderBound&&!1!==Ne(this.renderBound,this.strictBound)){var t=this.props,n=t.x,r=t.y,o=t.width,i=t.height,a=this.sceneGlobalTransform||this.globalTransform||{},s=a.tx,u=a.ty,l=null!=s?s:n,c=null!=u?u:r;this.strictBound=Le(l,c,l+o,c+i,this.strictBound),this.preloadBound=Ue(this.strictBound,this.boundsMargin)}}},{key:"updateRenderState",value:function(e){if(e!==this.renderState){var t=this.renderState;this.renderState=e;var n=Ze.get(e);ge(n),this.emit(n,{previous:t,current:e})}}},{key:"updateIsRenderable",value:function(){var e=!1,t=!1;if(!1===this.checkBasicRenderability())return this.updateTextureOwnership(!1),void this.setRenderable(!1);null!==this.texture?(t=!0,e="loaded"===this.texture.state):!this.hasShader()&&!0!==this.hasColorProperties()||!0!==this.hasDimensions()||this.stage.defaultTexture&&"loaded"===this.stage.defaultTexture.state&&(e=!0),this.updateTextureOwnership(t),this.setRenderable(e)}},{key:"checkBasicRenderability",value:function(){return 0!==this.worldAlpha&&!0!==this.isOutOfBounds()}},{key:"setRenderable",value:function(e){this.isRenderable=e}},{key:"updateTextureOwnership",value:function(e){var t;null===(t=this.texture)||void 0===t||t.setRenderableOwner(this,e)}},{key:"isOutOfBounds",value:function(){return this.renderState<=$e.OutOfBounds}},{key:"hasDimensions",value:function(){return 0!==this.props.width&&0!==this.props.height}},{key:"hasColorProperties",value:function(){return 0!==this.props.color||0!==this.props.colorTop||0!==this.props.colorBottom||0!==this.props.colorLeft||0!==this.props.colorRight||0!==this.props.colorTl||0!==this.props.colorTr||0!==this.props.colorBl||0!==this.props.colorBr}},{key:"hasShader",value:function(){return null!==this.props.shader}},{key:"calculateRenderCoords",value:function(){var e=this.width,t=this.height,n=this.globalTransform,r=n.tx,o=n.ty,i=n.ta,a=n.tb,s=n.tc,u=n.td;if(0===a&&0===s){var l=r,c=r+e*i,f=o,p=o+t*u;this.renderCoords=Ge.translate(l,f,c,f,c,p,l,p,this.renderCoords)}else this.renderCoords=Ge.translate(r,o,r+e*i,o+e*s,r+e*i+t*a,o+e*s+t*u,r+t*a,o+t*u,this.renderCoords);if(void 0!==this.sceneGlobalTransform){var d=this.sceneGlobalTransform,h=d.tx,m=d.ty,g=d.ta,v=d.tb,y=d.tc,b=d.td;if(0===v&&0===y){var x=h,w=h+e*g,S=m,T=m+t*b;this.sceneRenderCoords=Ge.translate(x,S,w,S,w,T,x,T,this.sceneRenderCoords)}else this.sceneRenderCoords=Ge.translate(h,m,h+e*g,m+e*y,h+e*g+t*v,m+e*y+t*b,h+t*v,m+t*b,this.sceneRenderCoords)}}},{key:"calculateClippingRect",value:function(e){ge(this.globalTransform);var t=this.clippingRect,n=this.props,r=this.globalTransform,o=n.clipping,i=0!==r.tb||0!==r.tc;!0===o&&!1===i?(t.x=r.tx,t.y=r.ty,t.width=this.width*r.ta,t.height=this.height*r.td,t.valid=!0):t.valid=!1,!0===e.valid&&!0===t.valid?Pe(e,t,t):!0===e.valid&&(Oe(e,t),t.valid=!0)}},{key:"calculateZIndex",value:function(){var e,t,n=this.props,r=n.zIndex||0,o=(null===(e=n.parent)||void 0===e?void 0:e.zIndex)||0,i=r;null!==(t=n.parent)&&void 0!==t&&t.zIndexLocked&&(i=r<o?r:o),this.calcZIndex=i}},{key:"destroy",value:function(){if(!0!==this.destroyed){for(this.destroyed=!0,this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;){var e;null===(e=this.children[0])||void 0===e||e.destroy()}this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}}},{key:"renderQuads",value:function(e){if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}ge(this.globalTransform),ge(this.renderCoords),e.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}},{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this.props.data},set:function(e){this.props.data=e}},{key:"x",get:function(){return this.props.x},set:function(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(Je.Local))}},{key:"absX",get:function(){var e,t;return this.props.x+-this.props.width*this.props.mountX+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}},{key:"absY",get:function(){var e,t;return this.props.y+-this.props.height*this.props.mountY+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}},{key:"y",get:function(){return this.props.y},set:function(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(Je.Local))}},{key:"width",get:function(){return this.props.width},set:function(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(Je.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Je.RenderTexture)))}},{key:"height",get:function(){return this.props.height},set:function(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(Je.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Je.RenderTexture)))}},{key:"scale",get:function(){return this.scaleX},set:function(e){this.scaleX=e,this.scaleY=e}},{key:"scaleX",get:function(){return this.props.scaleX},set:function(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(Je.ScaleRotate))}},{key:"scaleY",get:function(){return this.props.scaleY},set:function(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(Je.ScaleRotate))}},{key:"mount",get:function(){return this.props.mount},set:function(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(Je.Local))}},{key:"mountX",get:function(){return this.props.mountX},set:function(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(Je.Local))}},{key:"mountY",get:function(){return this.props.mountY},set:function(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(Je.Local))}},{key:"pivot",get:function(){return this.props.pivot},set:function(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(Je.Local))}},{key:"pivotX",get:function(){return this.props.pivotX},set:function(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(Je.Local))}},{key:"pivotY",get:function(){return this.props.pivotY},set:function(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(Je.Local))}},{key:"rotation",get:function(){return this.props.rotation},set:function(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(Je.ScaleRotate))}},{key:"alpha",get:function(){return this.props.alpha},set:function(e){this.props.alpha=e,this.setUpdateType(Je.PremultipliedColors|Je.WorldAlpha|Je.Children|Je.IsRenderable),this.childUpdateType|=Je.WorldAlpha}},{key:"autosize",get:function(){return this.props.autosize},set:function(e){this.props.autosize=e}},{key:"boundsMargin",get:function(){var e,t,n;return null!==(e=null!==(t=this.props.boundsMargin)&&void 0!==t?t:null===(n=this.parent)||void 0===n?void 0:n.boundsMargin)&&void 0!==e?e:this.stage.boundsMargin},set:function(e){if(e!==this.props.boundsMargin){if(null===e)this.props.boundsMargin=e;else{var t=Array.isArray(e)?e:[e,e,e,e];this.props.boundsMargin=t}this.setUpdateType(Je.RenderBounds)}}},{key:"clipping",get:function(){return this.props.clipping},set:function(e){this.props.clipping=e,this.setUpdateType(Je.Clipping|Je.RenderBounds|Je.Children),this.childUpdateType|=Je.Global|Je.Clipping}},{key:"color",get:function(){return this.props.color},set:function(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorTop",get:function(){return this.props.colorTop},set:function(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorBottom",get:function(){return this.props.colorBottom},set:function(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorLeft",get:function(){return this.props.colorLeft},set:function(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorRight",get:function(){return this.props.colorRight},set:function(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorTl",get:function(){return this.props.colorTl},set:function(e){this.props.colorTl=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorTr",get:function(){return this.props.colorTr},set:function(e){this.props.colorTr=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorBl",get:function(){return this.props.colorBl},set:function(e){this.props.colorBl=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorBr",get:function(){return this.props.colorBr},set:function(e){this.props.colorBr=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"zIndexLocked",get:function(){return this.props.zIndexLocked||0},set:function(e){this.props.zIndexLocked=e,this.setUpdateType(Je.CalculatedZIndex|Je.Children);for(var t=0,n=this.children.length;t<n;t++)this.children[t].setUpdateType(Je.CalculatedZIndex)}},{key:"zIndex",get:function(){return this.props.zIndex},set:function(e){this.props.zIndex=e,this.setUpdateType(Je.CalculatedZIndex|Je.Children);for(var t=0,n=this.children.length;t<n;t++)this.children[t].setUpdateType(Je.CalculatedZIndex)}},{key:"parent",get:function(){return this.props.parent},set:function(e){var t=this.props.parent;if(t!==e){if(this.props.parent=e,t){var n=t.children.indexOf(this);ge(-1!==n,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(n,1),t.setUpdateType(Je.Children|Je.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(Je.All),e.setUpdateType(Je.Children|Je.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.applyRTTInheritance(e)),this.updateScaleRotateTransform(),this.setUpdateType(Je.RenderBounds|Je.Children)}}},{key:"preventCleanup",get:function(){return this.props.textureOptions.preventCleanup||!1},set:function(e){!1===Se()&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=e}},{key:"rtt",get:function(){return this.props.rtt},set:function(e){this.props.rtt!==e&&(this.props.rtt=e,!0===e?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(Je.RenderTexture),!0===this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate())}},{key:"initRenderTexture",value:function(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}},{key:"cleanupRenderTexture",value:function(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}},{key:"markChildrenWithRTT",value:function(){var e,t=w(((arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this).children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.setUpdateType(Je.All),n.parentHasRenderTexture=!0,n.markChildrenWithRTT()}}catch(r){t.e(r)}finally{t.f()}}},{key:"applyRTTInheritance",value:function(e){e.rtt&&e.setUpdateType(Je.RenderTexture),this.markChildrenWithRTT(e)}},{key:"clearRTTInheritance",value:function(){if(!this.rtt){var e,t=w(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parentHasRenderTexture=!1,n.rttParent=null,n.setUpdateType(Je.All),n.clearRTTInheritance()}}catch(r){t.e(r)}finally{t.f()}}}},{key:"shader",get:function(){return this.props.shader},set:function(e){this.props.shader!==e&&(this.props.shader=e,this.setUpdateType(Je.IsRenderable))}},{key:"src",get:function(){return this.props.src},set:function(e){this.props.src!==e&&(this.props.src=e,this.texture=e?this.stage.txManager.createTexture("ImageTexture",{src:e,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight}):null)}},{key:"imageType",get:function(){return this.props.imageType||null},set:function(e){this.props.imageType!==e&&(this.props.imageType=e)}},{key:"srcHeight",get:function(){return this.props.srcHeight},set:function(e){this.props.srcHeight=e}},{key:"srcWidth",get:function(){return this.props.srcWidth},set:function(e){this.props.srcWidth=e}},{key:"srcX",get:function(){return this.props.srcX},set:function(e){this.props.srcX=e}},{key:"srcY",get:function(){return this.props.srcY},set:function(e){this.props.srcY=e}},{key:"framebufferDimensions",get:function(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}},{key:"parentRenderTexture",get:function(){for(var e=this.parent;e;){if(e.rtt)return e;e=e.parent}return null}},{key:"texture",get:function(){return this.props.texture},set:function(e){if(this.props.texture!==e){var t=this.props.texture;t&&(t.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,null!==e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Je.IsRenderable)}}},{key:"textureOptions",get:function(){return this.props.textureOptions},set:function(e){this.props.textureOptions=e}},{key:"strictBounds",get:function(){return this.props.strictBounds},set:function(e){e!==this.props.strictBounds&&(this.props.strictBounds=e,this.setUpdateType(Je.RenderBounds|Je.Children),this.childUpdateType|=Je.RenderBounds|Je.Children)}},{key:"animate",value:function(e,t){var n=new Ye(this,e,t);return new Qe(this.stage.animationManager,n)}},{key:"flush",value:function(){}}])}(Ce),tt=function(){return performance?performance.now():Date.now()},nt=function(){return d(function e(){f(this,e),y(this,"activeAnimations",new Set)},[{key:"registerAnimation",value:function(e){this.activeAnimations.add(e)}},{key:"unregisterAnimation",value:function(e){this.activeAnimations.delete(e)}},{key:"update",value:function(e){this.activeAnimations.forEach(function(t){t.update(e)})}}])}();function rt(){self.onmessage=function(e){var t=e.data.src,n=e.data.id,r=e.data.premultiplyAlpha;e.data.sx,e.data.sy,e.data.sw,e.data.sh,function(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){if(200!==o.status&&0!==o.status)return r(new Error("Failed to load image: "+o.statusText));var e=o.response;void 0!==t||e.type.indexOf("image/png"),createImageBitmap(e).then(function(e){n({data:e,premultiplyAlpha:t})}).catch(function(e){r(e)})},o.onerror=function(){r(new Error("Network error occurred while trying to fetch the image."))},o.send()})}(t,r).then(function(e){self.postMessage({id:n,src:t,data:e},[e.data])}).catch(function(e){self.postMessage({id:n,src:t,error:e.message})})}}var ot=function(){return d(function e(t,n){var r=this;f(this,e),y(this,"imageWorkersEnabled",!0),y(this,"messageManager",{}),y(this,"workers",[]),y(this,"workerIndex",0),y(this,"nextId",0),this.workers=this.createWorkers(t,n),this.workers.forEach(function(e){e.onmessage=r.handleMessage.bind(r)})},[{key:"handleMessage",value:function(e){var t=e.data,n=t.id,r=t.data,o=t.error,i=this.messageManager[n];if(i){var a=v(i,2),s=a[0],u=a[1];delete this.messageManager[n],o?u(new Error(o)):s(r)}}},{key:"createWorkers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n="(".concat(rt.toString(),")()");!0===t.options&&(n=n.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),!0===t.full&&(n=(n=n.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")).replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),n=n.replace('"use strict";',"");for(var r=new Blob([n],{type:"application/javascript"}),o=(self.URL?URL:webkitURL).createObjectURL(r),i=[],a=0;a<e;a++)i.push(new Worker(o));return i}},{key:"getNextWorker",value:function(){var e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}},{key:"getImage",value:function(e,t,n,r,o,i){var a=this;return new Promise(function(s,u){try{if(a.workers){var l=a.nextId++;a.messageManager[l]=[s,u];var c=a.getNextWorker();c&&c.postMessage({id:l,src:e,premultiplyAlpha:t,sx:n,sy:r,sw:o,sh:i})}}catch(f){u(f)}})}}])}(),it=function(e){function t(e,n){var r;return f(this,t),y(r=a(this,t,[e]),"type",ke.color),y(r,"props",void 0),r.props=t.resolveDefaults(n||{}),r}return l(t,e),d(t,[{key:"color",get:function(){return this.props.color},set:function(e){this.props.color=e}},{key:"getTextureSource",value:(r=i(n().m(function e(){var t;return n().w(function(e){for(;;)if(0===e.n)return t=new Uint8Array(4),4294967295===this.color?(t[0]=255,t[1]=255,t[2]=255,t[3]=255):(t[0]=this.color>>16&255,t[1]=this.color>>8&255,t[2]=255&this.color,t[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),e.a(2,{data:t,premultiplyAlpha:!0})},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){var n=t.resolveDefaults(e);return"ColorTexture,".concat(n.color)}},{key:"resolveDefaults",value:function(e){return{color:e.color||4294967295}}}]);var r}(Ae);y(it,"z$__type__Props",void 0);var at=function(){var e=i(n().m(function e(t){var r,o;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch(t);case 1:return r=e.v,e.n=2,r.arrayBuffer();case 2:if(o=e.v,-1===t.indexOf(".ktx")){e.n=3;break}return e.a(2,st(o));case 3:return e.a(2,ut(o))}},e)}));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=i(n().m(function e(t){var r,o,i,a,s,u,l;return n().w(function(e){for(;;)if(0===e.n){for(r=new DataView(t),o=16909060===r.getUint32(12),i=[],a={glInternalFormat:r.getUint32(28,o),pixelWidth:r.getUint32(36,o),pixelHeight:r.getUint32(40,o),numberOfMipmapLevels:r.getUint32(56,o),bytesOfKeyValueData:r.getUint32(60,o)},s=64,s+=a.bytesOfKeyValueData,u=0;u<a.numberOfMipmapLevels;u++)l=r.getUint32(s),s+=4,i.push(r.buffer.slice(s,l)),s+=l;return e.a(2,{data:{glInternalFormat:a.glInternalFormat,mipmaps:i,width:a.pixelWidth||0,height:a.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1})}},e)}));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=i(n().m(function e(t){var r,o,i,a,s,u,l,c,f,p,d,h;return n().w(function(e){for(;;)if(0===e.n){for(r=t,o=new Int32Array(r,0,13),i=o[12]+52,a=new Uint8Array(r,i),s=[],u={pixelWidth:o[7],pixelHeight:o[6],numberOfMipmapLevels:o[11]||0},l=0,c=u.pixelWidth||0,f=u.pixelHeight||0,p=0;p<u.numberOfMipmapLevels;p++)d=(c+3>>2)*(f+3>>2)*8,h=new Uint8Array(r,a.byteOffset+l,d),s.push(h),l+=d,c>>=1,f>>=1;return e.a(2,{data:{glInternalFormat:36196,mipmaps:s,width:u.pixelWidth||0,height:u.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1})}},e)}));return function(t){return e.apply(this,arguments)}}();var lt=function(e,t,n,r,o,i,a){return new Promise(function(s,u){var l=document.createElement("canvas"),c=l.getContext("2d");ge(c),c.imageSmoothingEnabled=!0;var f=new Image;f.onload=function(){var e=null!=r?r:0,u=null!=o?o:0,p=t||f.width,d=n||f.height;l.width=p,l.height=d,c.drawImage(f,0,0,p,d),s({data:c.getImageData(e,u,null!=i?i:p,null!=a?a:d),premultiplyAlpha:!1})},f.onerror=function(e){u(e)},f.src=e})};function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise(function(n,r){var o=new XMLHttpRequest;o.responseType=t,o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(0===o.status||200===o.status?n(o.response):r(o.statusText))},o.open("GET",e,!0),o.send(null)})}var ft=function(e){function t(e,n){var r;return f(this,t),y(r=a(this,t,[e]),"props",void 0),y(r,"type",ke.image),r.props=t.resolveDefaults(n),r}return l(t,e),d(t,[{key:"hasAlphaChannel",value:function(e){return-1!==e.indexOf("image/png")}},{key:"loadImageFallback",value:(s=i(n().m(function e(t,r){var o;return n().w(function(e){for(;;)if(0===e.n)return o=new Image,"string"==typeof t&&!1===Be(t)&&(o.crossOrigin="anonymous"),e.a(2,new Promise(function(e){o.onload=function(){e({data:o,premultiplyAlpha:r})},o.onerror=function(){console.warn("Image loading failed, returning fallback object."),e({data:o,premultiplyAlpha:r})},t instanceof Blob?o.src=URL.createObjectURL(t):o.src=t}))},e)})),function(e,t){return s.apply(this,arguments)})},{key:"createImageBitmap",value:function(e){function t(t,n,r,o,i,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=i(n().m(function e(t,r,o,i,a,s){var u,l,c,f,p,d;return n().w(function(e){for(;;)switch(e.n){case 0:if(u=null!=r?r:t.type.includes("image/png"),!0!==(l=this.txManager.imageBitmapSupported).full||null===a||null===s){e.n=2;break}return e.n=1,createImageBitmap(t,o||0,i||0,a,s,{premultiplyAlpha:u?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 1:return c=e.v,e.a(2,{data:c,premultiplyAlpha:u});case 2:if(!0!==l.basic){e.n=4;break}return e.n=3,createImageBitmap(t);case 3:return p=e.v,d=u,e.a(2,{data:p,premultiplyAlpha:d});case 4:return e.n=5,createImageBitmap(t,{premultiplyAlpha:u?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 5:return f=e.v,e.a(2,{data:f,premultiplyAlpha:u})}},e,this)}));return function(t,n,r,o,i,a){return e.apply(this,arguments)}}())},{key:"loadImage",value:(o=i(n().m(function e(t){var r,o,i,a,s,u,l;return n().w(function(e){for(;;)switch(e.n){case 0:if(r=this.props,o=r.premultiplyAlpha,i=r.sx,a=r.sy,s=r.sw,u=r.sh,!0!==this.txManager.hasCreateImageBitmap){e.n=5;break}if(!1!==Be(t)||!0!==this.txManager.hasWorker||null===this.txManager.imageWorkerManager){e.n=1;break}return e.a(2,this.txManager.imageWorkerManager.getImage(t,o,i,a,s,u));case 1:if(!0!==Be(t)){e.n=2;break}l=je(t),e.n=4;break;case 2:return e.n=3,ct(t,"blob").then(function(e){return e});case 3:l=e.v;case 4:return e.a(2,this.createImageBitmap(l,o,i,a,s,u));case 5:return e.a(2,this.loadImageFallback(t,null==o||o))}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"getTextureSource",value:(r=i(n().m(function e(){var t,r,o,i,a,s,u,l,c,f,p;return n().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.determineImageTypeAndLoadImage();case 1:r=e.v,e.n=3;break;case 2:return e.p=2,p=e.v,this.setState("failed",p),e.a(2,{data:null});case 3:if(null!==r.data){e.n=4;break}return this.setState("failed",Error("ImageTexture: No image data")),e.a(2,{data:null});case 4:return r.data instanceof Uint8Array?(o=null!==(a=this.props.width)&&void 0!==a?a:0,i=null!==(s=this.props.height)&&void 0!==s?s:0):(o=null!==(u=null===(l=r.data)||void 0===l?void 0:l.width)&&void 0!==u?u:this.props.width||0,i=null!==(c=null===(f=r.data)||void 0===f?void 0:f.height)&&void 0!==c?c:this.props.height||0),this.setState("fetched",{width:o,height:i}),e.a(2,{data:r.data,premultiplyAlpha:null===(t=this.props.premultiplyAlpha)||void 0===t||t})}},e,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"determineImageTypeAndLoadImage",value:function(){var e=this.props,t=e.src,n=e.premultiplyAlpha,r=e.type;if(null===t)return{data:null};if("string"!=typeof t){if(t instanceof Blob){if(!0===this.txManager.hasCreateImageBitmap){var o=this.props,i=o.sx,a=o.sy,s=o.sw,u=o.sh;return this.createImageBitmap(t,n,i,a,s,u)}return this.loadImageFallback(t,null==n||n)}return t instanceof ImageData?{data:t,premultiplyAlpha:n}:{data:t(),premultiplyAlpha:n}}var l=function(e){if("file:"===self.location.protocol&&!Ee.test(e)){var t=self.location.pathname.split("/");t.pop();var n=t.join("/"),r=self.location.protocol+"//"+n;return"."===e.charAt(0)&&(e=e.slice(1)),"/"===e.charAt(0)&&(e=e.slice(1)),r+"/"+e}return new URL(e,self.location.href).href}(t);return"regular"===r?this.loadImage(l):"svg"===r||!0===/\.(svg)(\?.*)?$/.test(t)?lt(l,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):"compressed"===r||!0===function(e){return/\.(ktx|pvr)$/.test(e)}(t)?at(l):this.loadImage(l)}}],[{key:"makeCacheKey",value:function(e){var n,r=t.resolveDefaults(e),o=r.key||r.src;if("string"!=typeof o)return!1;var i,a,s="";null!==r.sh&&null!==r.sw&&(s+=",",s+=null!==(i=r.sx)&&void 0!==i?i:"",s+=null!==(a=r.sy)&&void 0!==a?a:"",s+=r.sw||"",s+=r.sh||"");return"ImageTexture,".concat(o,",").concat(null!==(n=r.premultiplyAlpha)&&void 0!==n?n:"true").concat(s)}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a,s,u,l,c;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(n=e.premultiplyAlpha)||void 0===n||n,key:null!==(r=e.key)&&void 0!==r?r:null,type:null!==(o=e.type)&&void 0!==o?o:null,width:null!==(i=e.width)&&void 0!==i?i:null,height:null!==(a=e.height)&&void 0!==a?a:null,sx:null!==(s=e.sx)&&void 0!==s?s:null,sy:null!==(u=e.sy)&&void 0!==u?u:null,sw:null!==(l=e.sw)&&void 0!==l?l:null,sh:null!==(c=e.sh)&&void 0!==c?c:null}}}]);var r,o,s}(Ae);y(ft,"z$__type__Props",void 0);var pt=function(e){function t(e,n){var r;return f(this,t),y(r=a(this,t,[e]),"props",void 0),y(r,"type",ke.noise),r.props=t.resolveDefaults(n),r}return l(t,e),d(t,[{key:"getTextureSource",value:(r=i(n().m(function e(){var t,r,o,i,a,s,u;return n().w(function(e){for(;;)if(0===e.n){for(t=this.props,r=t.width,o=t.height,i=r*o*4,a=new Uint8ClampedArray(i),s=0;s<i;s+=4)u=Math.floor(256*Math.random()),a[s]=u,a[s+1]=u,a[s+2]=u,a[s+3]=255;return this.setState("fetched"),e.a(2,{data:new ImageData(a,r,o)})}},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){if(void 0===e.cacheId)return!1;var n=t.resolveDefaults(e);return"NoiseTexture,".concat(n.width,",").concat(n.height,",").concat(n.cacheId)}},{key:"resolveDefaults",value:function(e){var t,n,r;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(n=e.height)&&void 0!==n?n:128,cacheId:null!==(r=e.cacheId)&&void 0!==r?r:0}}}]);var r}(Ae);y(pt,"z$__type__Props",void 0);var dt=function(e){function t(e,n){var r;return f(this,t),y(r=a(this,t,[e]),"props",void 0),y(r,"parentTexture",void 0),y(r,"type",ke.subTexture),y(r,"onParentTxLoaded",function(){r.forwardParentTxState("loaded",{width:r.props.width,height:r.props.height})}),y(r,"onParentTxFailed",function(e,t){r.forwardParentTxState("failed",t)}),y(r,"onParentTxFetched",function(){r.forwardParentTxState("fetched",{width:r.props.width,height:r.props.height})}),y(r,"onParentTxFetching",function(){r.forwardParentTxState("fetching")}),y(r,"onParentTxLoading",function(){r.forwardParentTxState("loading")}),y(r,"onParentTxFreed",function(){r.forwardParentTxState("freed")}),r.props=t.resolveDefaults(n||{}),ge(r.props.texture,"SubTexture requires a parent texture"),ge(r.props.texture instanceof ft,"SubTexture requires an ImageTexture parent"),r.parentTexture=e.resolveParentTexture(r.props.texture),r.renderableOwners.size>0&&r.parentTexture.setRenderableOwner(r,!0),queueMicrotask(function(){var e=r.parentTexture;"loaded"===e.state?r.onParentTxLoaded(e,e.dimensions):"fetching"===e.state?r.onParentTxFetching():"fetched"===e.state?r.onParentTxFetched():"loading"===e.state?r.onParentTxLoading():"failed"===e.state?r.onParentTxFailed(e,e.error):"freed"===e.state&&r.onParentTxFreed(),e.on("fetched",r.onParentTxFetched),e.on("loading",r.onParentTxLoading),e.on("fetching",r.onParentTxFetching),e.on("loaded",r.onParentTxLoaded),e.on("failed",r.onParentTxFailed),e.on("freed",r.onParentTxFreed)}),r}return l(t,e),d(t,[{key:"forwardParentTxState",value:function(e,t){this.setState(e,t)}},{key:"onChangeIsRenderable",value:function(e){this.parentTexture.setRenderableOwner(this,e)}},{key:"getTextureSource",value:(r=i(n().m(function e(){var t=this;return n().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,n){t.setState("fetched"),e({data:t.props})}))},e)})),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}}]);var r}(Ae);y(dt,"z$__type__Props",void 0);var ht=function(e){function t(e,n){var r;return f(this,t),y(r=a(this,t,[e]),"props",void 0),y(r,"type",ke.renderToTexture),r.props=t.resolveDefaults(n||{}),r}return l(t,e),d(t,[{key:"width",get:function(){return this.props.width},set:function(e){this.props.width=e}},{key:"height",get:function(){return this.props.height},set:function(e){this.props.height=e}},{key:"getTextureSource",value:(r=i(n().m(function e(){return n().w(function(e){for(;;)if(0===e.n)return this.setState("fetched"),e.a(2,{data:null,premultiplyAlpha:null})},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"resolveDefaults",value:function(e){return{width:e.width||256,height:e.height||256}}}]);var r}(Ae);function mt(){return(mt=i(n().m(function e(){var t,r,o,i,a,s,u,l,c,f;return n().w(function(e){for(;;)switch(e.n){case 0:return r=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),o={basic:!1,options:!1,full:!1},i=new Blob([r],{type:"image/png"}),e.n=1,createImageBitmap(i);case 1:return a=e.v,null===(t=a.close)||void 0===t||t.call(a),o.basic=!0,e.p=2,u={premultiplyAlpha:"none"},e.n=3,createImageBitmap(i,u);case 3:l=e.v,null===(s=l.close)||void 0===s||s.call(l),o.options=!0,e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,e.n=6,createImageBitmap(i,0,0,1,1,{premultiplyAlpha:"none"});case 6:f=e.v,null===(c=f.close)||void 0===c||c.call(f),o.full=!0,e.n=8;break;case 7:e.p=7,e.v;case 8:return e.a(2,o)}},e,null,[[5,7],[2,4]])}))).apply(this,arguments)}y(ht,"z$__type__Props",void 0);var gt=function(e){function t(e,n){var r;f(this,t),y(r=a(this,t),"keyCache",new Map),y(r,"inverseKeyCache",new WeakMap),y(r,"txConstructors",{}),y(r,"downloadTextureSourceQueue",[]),y(r,"priorityQueue",[]),y(r,"uploadTextureQueue",[]),y(r,"initialized",!1),y(r,"stage",void 0),y(r,"numImageWorkers",void 0),y(r,"imageWorkerManager",null),y(r,"hasCreateImageBitmap",!!self.createImageBitmap),y(r,"imageBitmapSupported",{basic:!1,options:!1,full:!1}),y(r,"hasWorker",!!self.Worker),y(r,"renderer",void 0),y(r,"frameTime",0);var o=n.numImageWorkers,i=n.createImageBitmapSupport;return r.stage=e,r.numImageWorkers=o,"auto"===i?function(){return mt.apply(this,arguments)}().then(function(e){r.initialize(e)}).catch(function(e){console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),r.initialized=!0,r.emit("initialized")}):r.initialize({basic:"basic"===i,options:"options"===i,full:"full"===i}),r.registerTextureType("ImageTexture",ft),r.registerTextureType("ColorTexture",it),r.registerTextureType("NoiseTexture",pt),r.registerTextureType("SubTexture",dt),r.registerTextureType("RenderTexture",ht),r}return l(t,e),d(t,[{key:"registerTextureType",value:function(e,t){this.txConstructors[e]=t}},{key:"initialize",value:function(e){this.hasCreateImageBitmap=e.basic||e.options||e.full,this.imageBitmapSupported=e,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new ot(this.numImageWorkers,e):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}},{key:"enqueueDownloadTextureSource",value:function(e){this.downloadTextureSourceQueue.includes(e)||this.downloadTextureSourceQueue.push(e)}},{key:"enqueueUploadTexture",value:function(e){!1===this.uploadTextureQueue.includes(e)&&this.uploadTextureQueue.push(e)}},{key:"createTexture",value:function(e,t){var n,r=this.txConstructors[e];if(!r)throw new Error('Texture type "'.concat(e,'" is not registered'));var o=r.makeCacheKey(t);return o&&this.keyCache.has(o)?n=this.keyCache.get(o):(n=new r(this,t),o&&this.initTextureToCache(n,o)),n}},{key:"orphanTexture",value:function(e){this.removeTextureFromQueue(e),e.type!==ke.subTexture&&this.stage.txMemManager.addToOrphanedTextures(e)}},{key:"loadTexture",value:function(e,t){var n=this;if(this.stage.txMemManager.removeFromOrphanedTextures(e),e.type!==ke.subTexture)if(void 0===e.ctxTexture||"loaded"!==e.ctxTexture.state){if(!0!==this.downloadTextureSourceQueue.includes(e)&&!0!==this.uploadTextureQueue.includes(e)){if(void 0!==e.ctxTexture&&"loading"===e.ctxTexture.state){if(null!==e.textureData)return void this.enqueueUploadTexture(e);e.free()}if(!1!==this.initialized){if("failed"===e.state&&(e.free(),e.freeTextureData()),(e.type===ke.color||e.type===ke.renderToTexture)&&"initial"!==e.state)return e.setState("fetched"),void this.enqueueUploadTexture(e);e.setState("loading"),!0===t&&e.getTextureData().then(function(){n.uploadTexture(e)}).catch(function(e){console.error(e)}),this.enqueueDownloadTextureSource(e)}else this.priorityQueue.push(e)}}else e.setState("loaded")}},{key:"uploadTexture",value:function(e){if(!0!==this.stage.txMemManager.doNotExceedCriticalThreshold||!0!==this.stage.txMemManager.criticalCleanupRequested){var t=e.loadCtxTexture();null===t||"loaded"!==t.state?t.load():e.setState("loaded")}else this.enqueueUploadTexture(e)}},{key:"isProcessingTexture",value:function(e){return!0===this.downloadTextureSourceQueue.includes(e)||!0===this.uploadTextureQueue.includes(e)}},{key:"processSome",value:function(e){var t=this;if(!1!==this.initialized){for(var n=tt(),r=function(){var e=t.priorityQueue.pop();e.getTextureData().then(function(){t.uploadTexture(e)})};this.priorityQueue.length>0&&tt()-n<e;)r();for(;this.uploadTextureQueue.length>0&&tt()-n<e;)this.uploadTexture(this.uploadTextureQueue.pop());for(var o=function(){var e=t.downloadTextureSourceQueue.shift();e.getTextureData().then(function(){"fetched"===e.state&&t.enqueueUploadTexture(e)})};this.downloadTextureSourceQueue.length>0&&tt()-n<e;)o()}}},{key:"hasUpdates",value:function(){return this.downloadTextureSourceQueue.length>0||this.uploadTextureQueue.length>0}},{key:"initTextureToCache",value:function(e,t){var n=this.keyCache,r=this.inverseKeyCache;n.set(t,e),r.set(e,t)}},{key:"getTextureFromCache",value:function(e){return this.keyCache.get(e)}},{key:"removeTextureFromCache",value:function(e){var t=this.inverseKeyCache,n=this.keyCache,r=t.get(e);r&&n.delete(r)}},{key:"removeTextureFromQueue",value:function(e){var t=this.downloadTextureSourceQueue.indexOf(e);-1!==t&&this.downloadTextureSourceQueue.splice(t,1);var n=this.uploadTextureQueue.indexOf(e);-1!==n&&this.uploadTextureQueue.splice(n,1)}},{key:"resolveParentTexture",value:function(e){if(null==e||!e.props)return e;var t=ft.makeCacheKey(e.props),n=t?this.getTextureFromCache(t):void 0;return null!=n?n:e}}])}(Ce),vt={normal:400,bold:700,bolder:900,lighter:100},yt=function(e){return"number"==typeof e?e:vt[e]||400};var bt=function(){return d(function e(t){f(this,e),y(this,"textRenderers",void 0),y(this,"fontCache",new Map),this.textRenderers=t},[{key:"addFontFace",value:function(e){for(var t in this.textRenderers){var n=this.textRenderers[t];n&&n.isFontFaceSupported(e)&&n.addFontFace(e)}}},{key:"resolveFontFace",value:function(e,t,n){var r=t.fontFamily,o=t.fontWeight,i=t.fontStyle,a=t.fontStretch,s="".concat(n,"_").concat(r,"_").concat(i,"_").concat(o,"_").concat(a);if(!0===this.fontCache.has(s))return this.fontCache.get(s);var u=function(e,t,n,r,o){var i,a=yt(n),s=w(e);try{for(s.s();!(i=s.n()).done;){var u=i.value[t];if(u){if(1===u.size)return console.warn("TrFontManager: Only one font face found for family: '".concat(t,"' - will be used for all weights and styles")),u.values().next().value;var l,c=new Map,f=w(u);try{for(f.s();!(l=f.n()).done;){var p=l.value,d=yt(p.descriptors.weight);if(d===a&&p.descriptors.style===r&&p.descriptors.stretch===o)return p;c.set(d,p)}}catch(m){f.e(m)}finally{f.f()}var h="TrFontManager: No exact match: '".concat(t," Weight: ").concat(a," Style: ").concat(r," Stretch: ").concat(o,"'");if(console.error(h),400===a&&c.has(500))return c.get(500);if(500===a&&c.has(400))return c.get(400);if(a<400){for(;a>0;){if(c.has(a))return c.get(a);a-=100}a=600}for(;a<1e3;){if(c.has(a))return c.get(a);a+=100}for(a=500;a>0;){if(c.has(a))return c.get(a);a-=100}}}}catch(m){s.e(m)}finally{s.f()}}(e,r,o,i,a);return void 0!==u&&this.fontCache.set(s,u),u}}])}(),xt=function(){return d(function e(){f(this,e)},null,[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{}}}])}();function wt(e,t,n){var r=e.createShader(t);if(!r){var o=e.getError();throw new Error("Unable to create the shader: ".concat(t===e.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER",".").concat(o?" WebGlContext Error: ".concat(o):""))}if(e.shaderSource(r,n),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.error(e.getShaderInfoLog(r)),e.deleteShader(r)}var St=function(e){function t(e){var n;f(this,t),y(n=a(this,t),"boundBufferCollection",null),y(n,"buffersBound",!1),y(n,"program",void 0),y(n,"vao",void 0),y(n,"renderer",void 0),y(n,"glw",void 0),y(n,"attributeBuffers",void 0),y(n,"attributeLocations",void 0),y(n,"attributeNames",void 0),y(n,"uniformLocations",void 0),y(n,"uniformTypes",void 0),y(n,"supportsIndexedTextures",void 0);var r=n.renderer=e.renderer,o=n.glw=n.renderer.glw;n.supportsIndexedTextures=e.supportsIndexedTextures||!1;var i=o.isWebGl2(),s=i&&e.webgl2Extensions||!i&&e.webgl1Extensions||[],u=i?"2.0":"1.0";s.forEach(function(e){if(!o.getExtension(e))throw new Error('Shader "'.concat(n.constructor.name,'" requires extension "').concat(e,'" for WebGL ').concat(u," but wasn't found"))});var l=e.shaderSources||n.constructor.shaderSources;if(!l)throw new Error('Shader "'.concat(n.constructor.name,'" is missing shaderSources.'));i&&null!=l&&l.webGl2&&(l.fragment=l.webGl2.fragment,l.vertex=l.webGl2.vertex,delete l.webGl2);var c=r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,p=l.vertex instanceof Function?l.vertex(c):l.vertex,d=l.fragment instanceof Function?l.fragment(c):l.fragment,m=wt(o,o.VERTEX_SHADER,p),g=wt(o,o.FRAGMENT_SHADER,d);if(!m||!g)throw new Error("Unable to create the following shader(s): ".concat([!m&&"VERTEX_SHADER",!g&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")));var v=function(e,t,n){var r=e.createProgram();if(!r)throw new Error("Unable to create program");if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.warn(e.getProgramInfoLog(r)),e.deleteProgram(r)}(o,m,g);if(!v)throw new Error("Unable to create program");return n.program=v,n.attributeLocations={},n.attributeBuffers={},n.attributeNames=[],h(e.attributes).forEach(function(e){var t=o.getAttribLocation(n.program,e);if(t<0)throw new Error("".concat(n.constructor.name,': Vertex shader must have an attribute "').concat(e,'"!'));var r=o.createBuffer();if(!r)throw new Error("".concat(n.constructor.name,': Could not create buffer for attribute "').concat(e,'"'));n.attributeLocations[e]=t,n.attributeBuffers[e]=r,n.attributeNames.push(e)}),n.uniformLocations={},n.uniformTypes={},e.uniforms.forEach(function(e){var t=o.getUniformLocation(n.program,e.name);n.uniformTypes[e.name]=e.uniform,t?n.uniformLocations[e.name]=t:console.warn('Shader "'.concat(n.constructor.name,'" could not get uniform location for "').concat(e.name,'"'))}),n}return l(t,e),d(t,[{key:"bindBufferAttribute",value:function(e,t,n){var r=this.glw;r.enableVertexAttribArray(e),r.vertexAttribPointer(t,e,n.size,n.type,n.normalized,n.stride,n.offset)}},{key:"disableAttribute",value:function(e){this.glw.disableVertexAttribArray(e)}},{key:"disableAttributes",value:function(){for(var e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}},{key:"canBatchShaderProps",value:function(e,t){return!1}},{key:"bindRenderOp",value:function(e,t){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);var n=e.glw,r=e.parentHasRenderTexture;if(!e.renderToTexture||!r){if(r){var o=e.framebufferDimensions||{},i=o.width,a=o.height;n.uniform1f(this.getUniformLocation("u_pixelRatio"),1),n.uniform2f(this.getUniformLocation("u_resolution"),null!=i?i:0,null!=a?a:0)}else n.uniform1f(this.getUniformLocation("u_pixelRatio"),e.options.pixelRatio),n.uniform2f(this.getUniformLocation("u_resolution"),n.canvas.width,n.canvas.height);if(t){if(we(t,"$dimensions")){var s=t.$dimensions;s||(s=e.dimensions),n.uniform2f(this.getUniformLocation("u_dimensions"),s.width,s.height)}if(we(t,"$alpha")){var u=t.$alpha;u||(u=e.alpha),n.uniform1f(this.getUniformLocation("u_alpha"),u)}this.bindProps(t)}}}},{key:"getUniformLocation",value:function(e){return this.uniformLocations[e]||null}},{key:"bindBufferCollection",value:function(e){if(this.boundBufferCollection!==e){for(var t in this.attributeLocations){var n=e.getBuffer(t),r=e.getAttributeInfo(t);ge(n,'Buffer for "'.concat(t,'" not found')),ge(r),this.bindBufferAttribute(this.attributeLocations[t],n,r)}this.boundBufferCollection=e}}},{key:"bindProps",value:function(e){}},{key:"bindTextures",value:function(e){}},{key:"attach",value:function(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}},{key:"detach",value:function(){this.disableAttributes()}}])}(xt);y(St,"shaderSources",void 0);var Tt=function(e){function t(e){return f(this,t),a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]}])}return l(t,e),d(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}])}(St);y(Tt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});var kt=function(e){function t(e){var n;return f(this,t),y(n=a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}]),"supportsIndexedTextures",!0),n}return l(t,e),d(t,[{key:"bindTextures",value:function(e){var t=this.renderer,n=this.glw;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach(function(e,t){n.activeTexture(t),n.bindTexture(e.ctxTexture)});var r=Array.from(Array(e.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),r)}}])}(St);y(kt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:function(e){return"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(function(e){return"\n          ".concat(0!==e?"else ":"","if (idx == ").concat(e,") {\n            return texture2D(textures[").concat(e,"], uv);\n          }\n        ")}).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")}});var Ct=function(){return d(function e(t){f(this,e),y(this,"priority",1),y(this,"name",""),y(this,"ref",void 0),y(this,"target",void 0),y(this,"passParameters",""),y(this,"declaredUniforms",""),y(this,"uniformInfo",{});var n=t.ref,r=t.target,o=t.props,i=void 0===o?{}:o;this.ref=n,this.target=r;var a={},s=[],u="",l=this.constructor.uniforms||{};for(var c in l){var p=l[c],d=p.type,h="".concat(n,"_").concat(c),m="";p.size&&(m="[".concat(p.size(i),"]")),s.push(h),u+="uniform ".concat(d," ").concat(h).concat(m,";"),a[c]={name:h,uniform:l[c].method}}this.passParameters=s.join(","),this.declaredUniforms=u,this.uniformInfo=a},null,[{key:"getEffectKey",value:function(e){return""}},{key:"getMethodParameters",value:function(e,t){var n=[];for(var r in e){var o=e[r],i="";o.size&&(i="[".concat(o.size(t),"]")),n.push("".concat(o.type," ").concat(r).concat(i))}return n.join(",")}},{key:"resolveDefaults",value:function(e){return{}}},{key:"makeEffectKey",value:function(e){return!1}}])}();y(Ct,"uniforms",{}),y(Ct,"methods",void 0),y(Ct,"onShaderMask",void 0),y(Ct,"onColorize",void 0),y(Ct,"onEffectMask",void 0);var At=new Map,Et=function(e,t){var n=JSON.stringify(e);if(At.has(n))return At.get(n);for(var r=[],o=(e=null!=e?e:[]).length,i=0;i<o;i++){for(var a=e[i],s=a.name,u=a.type,l=a.props,c={name:s,type:u,props:{}},f=t[u],p=f.resolveDefaults(l),d=f.uniforms,h=Object.keys(d),m=h.length,g=0;g<m;g++){var v=h[g],y=d[v],b={value:p[v],programValue:void 0,method:y.method,updateOnBind:y.updateOnBind||!1,hasValidator:void 0!==y.validator,hasProgramValueUpdater:void 0!==y.updateProgramValue},x=b.hasValidator&&y.validator(p[v],p)||p[v];p[v]!==x&&(b.validatedValue=x),b.hasProgramValueUpdater&&y.updateProgramValue(b),void 0===b.programValue&&(b.programValue=b.value),c.props[v]=b}r.push(c)}return At.set(n,r),r},It=function(e){function t(e,n,r){var o;f(this,t);var i=t.createShader(n,r);return y(o=a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"}].concat(h(i.uniforms)),shaderSources:{vertex:i.vertex,fragment:i.fragment}}]),"effects",[]),o.effects=i.effects,o}return l(t,e),d(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"bindUniformMethods",value:function(e){for(var t=this,n=this.glw,r=e.effects,o=r.length,i=0;i<o;i++)for(var a=this.effects[i].uniformInfo,s=r[i],u=Object.keys(s.props),l=u.length,c=function(){var e=u[f],r=s.props[e].method,o=t.getUniformLocation(a[e].name);return"uniform2fv"===r||"uniform2iv"===r||"uniform3iv"===r||"uniform4fv"===r||"uniform4iv"===r||"uniformMatrix2fv"===r||"uniformMatrix3fv"===r||"uniformMatrix4fv"===r||"uniform1f"===r||"uniform1fv"===r||"uniform1i"===r||"uniform1iv"===r?(s.props[e].setUniformValue=function(){n[r](o,this.programValue)},0):"uniform2f"===r||"uniform2i"===r?(s.props[e].setUniformValue=function(){n[r](o,this.programValue[0],this.programValue[1])},0):"uniform3f"===r||"uniform3i"===r?(s.props[e].setUniformValue=function(){n[r](o,this.programValue[0],this.programValue[1],this.programValue[2])},0):"uniform4f"===r||"uniform4i"===r?(s.props[e].setUniformValue=function(){n[r](o,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])},0):void 0},f=0;f<l;f++)c()}},{key:"bindProps",value:function(e){for(var t=e.effects,n=t.length,r=0;r<n;r++)for(var o=t[r],i=Object.keys(o.props),a=i.length,s=0;s<a;s++){var u=i[s],l=o.props[u];if(!0===l.updateOnBind){var c,f=null===(c=this.renderer.shManager.getRegisteredEffects()[o.type])||void 0===c?void 0:c.uniforms[u];null==f||f.updateProgramValue(o.props[u],e)}l.setUniformValue()}}},{key:"canBatchShaderProps",value:function(e,t){if(e.$alpha!==t.$alpha||e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;for(var n=e.effects.length,r=0;r<n;r++){var o=e.effects[r],i=t.effects[r];if(o.type!==i.type)return!1;for(var a in o.props)if(i.props&&!i.props[a]||o.props[a].value!==i.props[a].value)return!1}return!0}}],[{key:"createShader",value:function(e,n){var r={},o={},i="",a=[],s=[],u=e.effects.map(function(e){var t=n[e.type],o=t.getEffectKey(e.props||{});r[o]=r[o]?++r[o]:1;var u=r[o];1===u&&s.push({key:o,type:e.type,props:e.props});var l=new t({ref:"".concat(o).concat(1===u?"":u),target:o,props:e.props});return i+=l.declaredUniforms,a.push.apply(a,h(Object.values(l.uniformInfo))),l}),l="";null==s||s.forEach(function(e){var r,i=n[e.type],a=i.resolveDefaults(null!==(r=e.props)&&void 0!==r?r:{}),s=[];for(var u in i.methods){var c=u,f=i.methods[u];o[u]&&o[u]!==f&&(c=t.resolveMethodDuplicate(u,f,o)),o[c]=f.replace("function",c),s.push({m:u,cm:c})}var p=i.onShaderMask instanceof Function?i.onShaderMask(a):i.onShaderMask,d=i.onColorize instanceof Function?i.onColorize(a):i.onColorize,h=i.onEffectMask instanceof Function?i.onEffectMask(a):i.onEffectMask;s.forEach(function(e){var t=e.m,n=e.cm,r=new RegExp("\\$".concat(t),"g");p&&(p=p.replace(r,n)),d&&(d=d.replace(r,n)),h&&(h=h.replace(r,n))});var m=i.getMethodParameters(i.uniforms,a),g=m.length>0?", ".concat(m):"";p&&(l+="\n        float fx_".concat(e.key,"_onShaderMask(float shaderMask ").concat(g,") {\n          ").concat(p,"\n        }\n        ")),d&&(l+="\n          vec4 fx_".concat(e.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(d,"\n          }\n        ")),h&&(l+="\n          vec4 fx_".concat(e.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(h,"\n          }\n        "))});var c="";for(var f in o)c+=o[f];for(var p="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",d="\n\n    ",m=0;m<u.length;m++){var g=u[m],v=g.passParameters.length>0?", ".concat(g.passParameters):"",y=n[g.name];y.onShaderMask&&(d+="\n        shaderMask = fx_".concat(g.target,"_onShaderMask(shaderMask ").concat(v,");\n        ")),y.onColorize&&(d+="\n        maskColor = fx_".concat(g.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(v,");\n        ")),y.onEffectMask&&(p="fx_".concat(g.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(v,")"));var b=u[m+1];(void 0===b||n[b.name].onEffectMask)&&(d+="\n          shaderColor = ".concat(p,";\n        "))}return{effects:u,uniforms:a,fragment:t.fragment(i,c,l,d),vertex:t.vertex()}}},{key:"resolveMethodDuplicate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e+(r>0?r:"");return n[o]&&n[o]!==t?this.resolveMethodDuplicate(e,t,n,++r):o}},{key:"resolveDefaults",value:function(e,t){var n;return ge(t),{effects:Et(null!==(n=e.effects)&&void 0!==n?n:[],t),$dimensions:{width:0,height:0},$alpha:0}}},{key:"makeCacheKey",value:function(e,t){var n,r="";return null===(n=e.effects)||void 0===n||n.forEach(function(e){var n=t[e.type].getEffectKey(e.props||{});r+=",".concat(n)}),"DynamicShader".concat(r)}}])}(St);y(It,"z$__type__Props",void 0),y(It,"vertex",function(){return"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "}),y(It,"fragment",function(e,t,n,r){return"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(t,"\n\n    ").concat(n,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(r,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  ")});var Mt=function(e){function t(e){return f(this,t),a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]}])}return l(t,e),d(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"bindProps",value:function(e){var t=Math.min(e.$dimensions.width,e.$dimensions.height)/(2*e.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),e.radius*Math.min(t,1))}},{key:"canBatchShaderProps",value:function(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}],[{key:"resolveDefaults",value:function(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}}])}(St);y(Mt,"z$__type__Props",void 0),y(Mt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var Rt=new Float32Array([1,0,0,0,1,0,0,0,1]),_t=function(e){function t(e){return f(this,t),a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]}])}return l(t,e),d(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"bindProps",value:function(e){var n=t.resolveDefaults(e);for(var r in n)if("transform"===r)this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),n[r]);else if("scrollY"===r)this.glw.uniform1f(this.getUniformLocation("u_scrollY"),n[r]);else if("color"===r){var o=Ie(n.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),o)}else"size"===r?this.glw.uniform1f(this.getUniformLocation("u_size"),n[r]):"distanceRange"===r?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),n[r]):"debug"===r&&this.glw.uniform1i(this.getUniformLocation("u_debug"),n[r]?1:0)}}],[{key:"resolveDefaults",value:function(){var e,t,n,r,o,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{transform:null!==(e=a.transform)&&void 0!==e?e:Rt,scrollY:null!==(t=a.scrollY)&&void 0!==t?t:0,color:null!==(n=a.color)&&void 0!==n?n:4294967295,size:null!==(r=a.size)&&void 0!==r?r:16,distanceRange:null!==(o=a.distanceRange)&&void 0!==o?o:1,debug:null!==(i=a.debug)&&void 0!==i&&i}}}])}(St);y(_t,"z$__type__Props",void 0),y(_t,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});var Lt=function(e){void 0===e.programValue&&(e.programValue=new Float32Array(4));var t=e.value,n=e.programValue;n[0]=(t>>>24)/255,n[1]=(t>>>16&255)/255,n[2]=(t>>>8&255)/255,n[3]=(255&t)/255},Dt=function(e){var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array)for(var n=t.length,r=e.programValue,o=0;o<n;o++)r[o]=t[o];else e.programValue=new Float32Array(t)},Pt=function(e){var t=Array.isArray(e);return t?t&&4===e.length?e:t&&2===e.length?[e[0],e[1],e[0],e[1]]:t&&3===e.length?[e[0],e[1],e[2],e[0]]:[e[0],e[0],e[0],e[0]]:[e,e,e,e]},Ot=function(e,t){void 0===e.programValue&&(e.programValue=new Float32Array(4));var n=e.programValue,r=e.validatedValue||e.value;if(void 0===t&&void 0===e.$dimensions)return n[0]=r[0],n[1]=r[1],n[2]=r[2],void(n[3]=r[3]);var o=e.$dimensions;if(void 0!==t){var i=t.$dimensions;if(void 0!==o&&(o.width===i.width||o.height===i.height))return;void 0===o&&(o={width:null==i?void 0:i.width,height:null==i?void 0:i.height},e.$dimensions=o)}var a=o,s=a.width,u=a.height,l=v(r,4),c=l[0],f=l[1],p=l[2],d=l[3],h=Math.min(Math.min(Math.min(s/Math.max(s,c+f),s/Math.max(s,p+d)),Math.min(u/Math.max(u,c+p),u/Math.max(u,f+d))),1);n[0]=c*h,n[1]=f*h,n[2]=p*h,n[3]=d*h},Nt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","radius"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"radius"}},{key:"resolveDefaults",value:function(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}])}(Ct);y(Nt,"z$__type__Props",void 0),y(Nt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Pt,updateProgramValue:Ot}}),y(Nt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),y(Nt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),y(Nt,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");var Ut=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","border"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"border"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Ct);y(Ut,"z$__type__Props",void 0),y(Ut,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Lt,method:"uniform4fv",type:"vec4"}}),y(Ut,"onEffectMask","\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),y(Ut,"onColorize","\n    return color;\n  ");var Bt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","linearGradient"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(e){return e.colors.value?"linearGradient".concat(e.colors.value.length):"linearGradient".concat(e.colors.length)}},{key:"resolveDefaults",value:function(e){var t,n,r=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],o=e.stops||[];if(0===o.length||o.length!==r.length){for(var i=r.length,a=0,s=o;a<i;a++)o[a]?(s[a]=o[a],void 0===o[a-1]&&void 0!==s[a-2]&&(s[a-1]=s[a-2]+(o[a]-s[a-2])/2)):s[a]=a*(1/(r.length-1));o=s}return{colors:r,stops:o,angle:null!==(n=e.angle)&&void 0!==n?n:0}}}])}(Ct);o=Bt,y(Bt,"z$__type__Props",void 0),y(Bt,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:function(e){return e.reduce(function(e,t){return e.concat(Ie(t))},[])},updateProgramValue:Dt,size:function(e){return e.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],size:function(e){return e.colors.length},method:"uniform1fv",type:"float"}}),y(Bt,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),y(Bt,"ColorLoop",function(e){for(var t="",n=2;n<e;n++)t+="colorOut = mix(colorOut, colors[".concat(n,"], clamp((dist - stops[").concat(n-1,"]) / (stops[").concat(n,"] - stops[").concat(n-1,"]), 0.0, 1.0));");return t}),y(Bt,"onColorize",function(e){var t=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ".concat(o.ColorLoop(t),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});var jt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","grayscale"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"grayscale"}},{key:"resolveDefaults",value:function(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}])}(Ct);y(jt,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),y(jt,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");var Ft=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","borderRight"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"borderRight"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Ct);y(Ft,"z$__type__Props",void 0),y(Ft,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Lt,method:"uniform4fv",type:"vec4"}}),y(Ft,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),y(Ft,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),y(Ft,"onColorize","\n    return color;\n  ");var zt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","borderTop"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"borderTop"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Ct);y(zt,"z$__type__Props",void 0),y(zt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Lt,method:"uniform4fv",type:"vec4"}}),y(zt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),y(zt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),y(zt,"onColorize","\n    return color;\n  ");var Gt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","borderBottom"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"borderBottom"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Ct);y(Gt,"z$__type__Props",void 0),y(Gt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Lt,method:"uniform4fv",type:"vec4"}}),y(Gt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),y(Gt,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),y(Gt,"onColorize","\n    return color;\n  ");var Vt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","borderLeft"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"borderLeft"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Ct);y(Vt,"z$__type__Props",void 0),y(Vt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Lt,method:"uniform4fv",type:"vec4"}}),y(Vt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),y(Vt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),y(Vt,"onColorize","\n    return color;\n  ");var Ht=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","glitch"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(e){return"glitch"}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(n=e.narrowness)&&void 0!==n?n:4,blockiness:null!==(r=e.blockiness)&&void 0!==r?r:2,minimizer:null!==(o=e.minimizer)&&void 0!==o?o:8,time:null!==(i=e.time)&&void 0!==i?i:Date.now()}}}])}(Ct);y(Ht,"z$__type__Props",void 0),y(Ht,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:function(e){var t=e.value=(Date.now()-e.value)%1e3;e.programValue=t},type:"float"}}),y(Ht,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),y(Ht,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");var qt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","fadeOut"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"fadeOut"}},{key:"resolveDefaults",value:function(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}])}(Ct);y(qt,"z$__type__Props",void 0),y(qt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:Pt,updateProgramValue:function(e){var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){var n=e.programValue;n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]}else e.programValue=new Float32Array(t)}}}),y(qt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");var Xt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","radialGradient"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(e){return e.colors.value?"radialGradient".concat(e.colors.value.length):"radialGradient".concat(e.colors.length)}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],s=e.stops||[];if(0===s.length||s.length!==a.length){for(var u=a.length,l=0,c=s;l<u;l++)s[l]?(c[l]=s[l],void 0===s[l-1]&&void 0!==c[l-2]&&(c[l-1]=c[l-2]+(s[l]-c[l-2])/2)):c[l]=l*(1/(a.length-1));s=c}return{colors:a,stops:s,width:null!==(n=e.width)&&void 0!==n?n:0,height:null!==(r=null!==(o=e.height)&&void 0!==o?o:e.width)&&void 0!==r?r:0,pivot:null!==(i=e.pivot)&&void 0!==i?i:[.5,.5]}}}])}(Ct);s=Xt,y(Xt,"z$__type__Props",void 0),y(Xt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:function(e){var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){var n=e.programValue;n[0]=t[0],n[1]=t[1]}else e.programValue=new Float32Array(t)},method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:function(e){return e.reduce(function(e,t){return e.concat(Ie(t))},[])},updateProgramValue:Dt,size:function(e){return e.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],size:function(e){return e.colors.length},method:"uniform1fv",type:"float"}}),y(Xt,"ColorLoop",function(e){for(var t="",n=2;n<e;n++)t+="colorOut = mix(colorOut, colors[".concat(n,"], clamp((dist - stops[").concat(n-1,"]) / (stops[").concat(n,"] - stops[").concat(n-1,"]), 0.0, 1.0));");return t}),y(Xt,"onColorize",function(e){var t=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ".concat(s.ColorLoop(t),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});var Wt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","radialProgress"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"radialProgress"}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a,s;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(n=e.progress)&&void 0!==n?n:.5,offset:null!==(r=e.offset)&&void 0!==r?r:0,range:null!==(o=e.range)&&void 0!==o?o:2*Math.PI,rounded:null!==(i=e.rounded)&&void 0!==i&&i,radius:null!==(a=e.radius)&&void 0!==a?a:1,color:null!==(s=e.color)&&void 0!==s?s:4294967295}}}])}(Ct);y(Wt,"z$__type__Props",void 0),y(Wt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:function(e){return e?1:0}},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Lt,method:"uniform4fv",type:"vec4"}}),y(Wt,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),y(Wt,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),y(Wt,"onColorize","\n    return color;\n  ");var Kt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"name","holePunch"),e}return l(t,e),d(t,null,[{key:"getEffectKey",value:function(){return"holePunch"}},{key:"resolveDefaults",value:function(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:null!==(t=e.radius)&&void 0!==t?t:0}}}])}(Ct);y(Kt,"z$__type__Props",void 0),y(Kt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Pt,updateProgramValue:Ot}}),y(Kt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),y(Kt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),y(Kt,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");var $t=function(e){function t(e){var n;return f(this,t),y(n=a(this,t),"shType",void 0),n.shType=e,n}return l(t,e),d(t,[{key:"bindRenderOp",value:function(){}},{key:"bindProps",value:function(){}},{key:"attach",value:function(){}},{key:"detach",value:function(){}}])}(xt),Yt=function(){return d(function e(t,n,r,o){var i=this;f(this,e),y(this,"type",void 0),y(this,"shader",void 0),y(this,"resolvedProps",void 0),y(this,"props",void 0),this.type=t,this.shader=n,this.resolvedProps=r;for(var a=Object.keys(r),s=a.length,u={},l=function(){var e=a[c];Object.defineProperty(u,e,{get:function(){return i.resolvedProps[e]},set:function(t){i.resolvedProps[e]=t,o.requestRender()}})},c=0;c<s;c++)l();this.props=u},[{key:"getResolvedProps",value:function(){return this.resolvedProps}}])}(),Qt=function(){return d(function e(t,n,r){var o=this;f(this,e),y(this,"shader",void 0),y(this,"resolvedProps",void 0),y(this,"props",void 0),y(this,"type",void 0),this.shader=t,this.type="DynamicShader",this.resolvedProps=n;for(var i=r.getRegisteredEffects(),a={},s=n.effects,u=s.length,l=function(e){var t=s[e],n=t.name,u=t.props,l=t.type;if(void 0===n)return 1;for(var c={},f=Object.keys(u),p=f.length,d=function(){var t=f[h];Object.defineProperty(c,t,{get:function(){return o.resolvedProps.effects[e].props[t].value},set:function(n){var a,s,c=o.resolvedProps.effects[e].props[t];(c.value=n,c.hasValidator)&&(n=c.validatedValue=null===(a=i[l].uniforms[t])||void 0===a?void 0:a.validator(n,u));c.hasProgramValueUpdater?null===(s=i[l].uniforms[t])||void 0===s||s.updateProgramValue(c):c.programValue=n;r.renderer.stage.requestRender()}})},h=0;h<p;h++)d();Object.defineProperty(a,n,{get:function(){return c}})},c=0;c<u;c++)l(c);this.props=a},[{key:"getResolvedProps",value:function(){return this.resolvedProps}}])}(),Jt=function(){return d(function e(){f(this,e),y(this,"shCache",new Map),y(this,"shConstructors",{}),y(this,"attachedShader",null),y(this,"effectConstructors",{}),y(this,"renderer",void 0),this.registerShaderType("DefaultShader",Tt),this.registerShaderType("DefaultShaderBatched",kt),this.registerShaderType("RoundedRectangle",Mt),this.registerShaderType("DynamicShader",It),this.registerShaderType("SdfShader",_t),this.registerEffectType("border",Ut),this.registerEffectType("borderBottom",Gt),this.registerEffectType("borderLeft",Vt),this.registerEffectType("borderRight",Ft),this.registerEffectType("borderTop",zt),this.registerEffectType("fadeOut",qt),this.registerEffectType("linearGradient",Bt),this.registerEffectType("radialGradient",Xt),this.registerEffectType("grayscale",jt),this.registerEffectType("glitch",Ht),this.registerEffectType("radius",Nt),this.registerEffectType("radialProgress",Wt),this.registerEffectType("holePunch",Kt)},[{key:"registerShaderType",value:function(e,t){this.shConstructors[e]=t}},{key:"registerEffectType",value:function(e,t){this.effectConstructors[e]=t}},{key:"getRegisteredEffects",value:function(){return this.effectConstructors}},{key:"getRegisteredShaders",value:function(){return this.shConstructors}},{key:"loadShader",value:function(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");var n=this.shConstructors[e];if(!n)throw new Error('Shader type "'.concat(e,'" is not registered'));if("canvas"===this.renderer.mode&&n.prototype instanceof St)return this._createShaderCtr(e,new $t(e),t);if("DynamicShader"===e)return this.loadDynamicShader(t);var r=n.resolveDefaults(t),o=n.makeCacheKey(r)||n.name;if(o&&this.shCache.has(o))return this._createShaderCtr(e,this.shCache.get(o),r);var i=new n(this.renderer,t);return o&&this.shCache.set(o,i),this._createShaderCtr(e,i,r)}},{key:"loadDynamicShader",value:function(e){if(!this.renderer)throw new Error("Renderer is not been defined");var t=It.resolveDefaults(e,this.effectConstructors),n=It.makeCacheKey(t,this.effectConstructors);if(n&&this.shCache.has(n))return this._createDynShaderCtr(this.shCache.get(n),t);var r=new It(this.renderer,e,this.effectConstructors);return n&&this.shCache.set(n,r),this._createDynShaderCtr(r,t)}},{key:"_createShaderCtr",value:function(e,t,n){return new Yt(e,t,n,this.renderer.stage)}},{key:"_createDynShaderCtr",value:function(e,t){return e.bindUniformMethods(t),new Qt(e,t,this)}},{key:"useShader",value:function(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}])}(),Zt={x:function(e,t){e.props.x=t},y:function(e,t){e.props.y=t},width:function(e,t){e.props.width=t},height:function(e,t){e.props.height=t},color:function(e,t){e.props.color=t},zIndex:function(e,t){e.props.zIndex=t},fontFamily:function(e,t){e.props.fontFamily=t},fontWeight:function(e,t){e.props.fontWeight=t},fontStyle:function(e,t){e.props.fontStyle=t},fontStretch:function(e,t){e.props.fontStretch=t},fontSize:function(e,t){e.props.fontSize=t},text:function(e,t){e.props.text=t},textAlign:function(e,t){e.props.textAlign=t},contain:function(e,t){e.props.contain=t},offsetY:function(e,t){e.props.offsetY=t},scrollable:function(e,t){e.props.scrollable=t},scrollY:function(e,t){e.props.scrollY=t},letterSpacing:function(e,t){e.props.letterSpacing=t},lineHeight:function(e,t){e.props.lineHeight=t},maxLines:function(e,t){e.props.maxLines=t},textBaseline:function(e,t){e.props.textBaseline=t},verticalAlign:function(e,t){e.props.verticalAlign=t},overflowSuffix:function(e,t){e.props.overflowSuffix=t},debug:function(e,t){e.props.debug=t}},en=function(){return d(function e(t){var n=this;f(this,e),y(this,"stage",void 0),y(this,"set",void 0),this.stage=t;var r=g(g({},Zt),this.getPropertySetters()),o={};Object.keys(r).forEach(function(e){Object.defineProperty(o,e,{value:function(t,o){t.props[e]!==o&&(r[e](t,o),n.stage.requestRender())},writable:!1,configurable:!1})}),this.set=o},[{key:"setStatus",value:function(e,t,n){e.status!==t&&(e.status=t,e.emitter.emit(t,n))}},{key:"setIsRenderable",value:function(e,t){e.isRenderable=t}},{key:"destroyState",value:function(e){this.setStatus(e,"destroyed"),e.emitter.removeAllListeners()}},{key:"scheduleUpdateState",value:function(e){var t=this;e.updateScheduled||(e.updateScheduled=!0,queueMicrotask(function(){"destroyed"!==e.status&&(e.updateScheduled=!1,t.updateState(e))}))}}])}(),tn=function(){return d(function e(){f(this,e),y(this,"data",{})},[{key:"reset",value:function(){this.data={}}},{key:"increment",value:function(e){this.data[e]||(this.data[e]=0),this.data[e]++}},{key:"getData",value:function(){return g({},this.data)}}])}(),nn=function(){return d(function e(t,n){var r=this;f(this,e),y(this,"stage",void 0),y(this,"memUsed",0),y(this,"loadedTextures",new Map),y(this,"orphanedTextures",[]),y(this,"criticalThreshold",void 0),y(this,"targetThreshold",void 0),y(this,"cleanupInterval",void 0),y(this,"debugLogging",void 0),y(this,"lastCleanupTime",0),y(this,"baselineMemoryAllocation",void 0),y(this,"criticalCleanupRequested",!1),y(this,"doNotExceedCriticalThreshold",void 0),y(this,"frameTime",0),this.stage=t;var o=n.criticalThreshold,i=n.doNotExceedCriticalThreshold;this.doNotExceedCriticalThreshold=i||!1,this.criticalThreshold=Math.round(o);var a=Math.max(0,Math.min(1,n.targetThresholdLevel));if(this.cleanupInterval=n.cleanupInterval,this.debugLogging=n.debugLogging,this.baselineMemoryAllocation=Math.round(n.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(o*a),this.baselineMemoryAllocation),this.memUsed=Math.round(n.baselineMemoryAllocation),n.debugLogging){var s=0;setInterval(function(){s!==r.memUsed&&(s=r.memUsed,console.log("[TextureMemoryManager] Memory used: ".concat(Ke(r.memUsed)," mb / ").concat(Ke(r.criticalThreshold)," mb (").concat((r.memUsed/r.criticalThreshold*100).toFixed(1),"%)")))},1e3)}0===o&&(this.setTextureMemUse=function(){})},[{key:"addToOrphanedTextures",value:function(e){this.orphanedTextures.includes(e)&&this.removeFromOrphanedTextures(e),!1===e.preventCleanup&&this.orphanedTextures.push(e)}},{key:"removeFromOrphanedTextures",value:function(e){var t=this.orphanedTextures.indexOf(e);-1!==t&&this.orphanedTextures.splice(t,1)}},{key:"setTextureMemUse",value:function(e,t){this.loadedTextures.has(e)&&(this.memUsed-=this.loadedTextures.get(e)),0!==t?(this.memUsed+=t,this.loadedTextures.set(e,t),this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)):this.loadedTextures.delete(e)}},{key:"checkCleanup",value:function(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}},{key:"checkCriticalCleanup",value:function(){return this.memUsed>this.criticalThreshold}},{key:"cleanupQuick",value:function(e){for(var t=this.targetThreshold,n=tt();this.memUsed>=t&&this.orphanedTextures.length>0&&(e||tt()-n<10);){var r=this.orphanedTextures.shift();void 0!==r&&(!0!==r.renderable&&this.destroyTexture(r))}}},{key:"destroyTexture",value:function(e){var t=this.stage.txManager;t.removeTextureFromQueue(e),t.removeTextureFromCache(e),e.destroy(),this.removeFromOrphanedTextures(e),this.loadedTextures.delete(e)}},{key:"cleanupDeep",value:function(e){for(var t=e?this.criticalThreshold:this.targetThreshold,n=[],r=h(this.loadedTextures.keys()),o=0;o<r.length;o++){var i=r[o];void 0!==i&&(i.type!==ke.image&&i.type!==ke.noise&&i.type!==ke.renderToTexture||(!0===i.renderable?n.push(i):n.unshift(i)))}for(;this.memUsed>=t&&n.length>0;){var a=n.shift();if(void 0!==a&&!0!==a.preventCleanup){if(!0===a.renderable)break;this.destroyTexture(a)}}}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,!0===t&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),!0===this.debugLogging&&console.log("[TextureMemoryManager] Cleaning up textures. Critical: ".concat(t,". Aggressive: ").concat(e)),this.cleanupQuick(t),!0===e&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(t),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),!0!==this.debugLogging&&!1!==Se()||console.warn("[TextureMemoryManager] Memory usage above critical threshold after cleanup: ".concat(this.memUsed))):this.criticalCleanupRequested=!1}},{key:"getMemoryInfo",value:function(){var e=this,t=0,n=h(this.loadedTextures.keys()).reduce(function(n,r){return t+=r.renderable?1:0,n+(r.renderable?e.loadedTextures.get(r):0)},this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:n,memUsed:this.memUsed,renderableTexturesLoaded:t,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}])}(),rn=function(){return d(function e(t,n){f(this,e),y(this,"textureSource",void 0),y(this,"memManager",void 0),y(this,"state","freed"),this.memManager=t,this.textureSource=n},[{key:"setTextureMemUse",value:function(e){this.memManager.setTextureMemUse(this.textureSource,e)}},{key:"renderable",get:function(){return this.textureSource.renderable}}])}(),on=d(function e(t){f(this,e),y(this,"options",void 0),y(this,"mode",void 0),y(this,"stage",void 0),y(this,"txManager",void 0),y(this,"txMemManager",void 0),y(this,"shManager",void 0),y(this,"rttNodes",[]),this.options=t,this.stage=t.stage,this.txManager=t.txManager,this.txMemManager=t.txMemManager,this.shManager=t.shManager}),an=function(t){function n(e,t,r){var o;f(this,n),y(o=a(this,n,[e,t]),"textRenderer",void 0),y(o,"trState",void 0),y(o,"_textRendererOverride",null),y(o,"onTextLoaded",function(){var e=o.contain,t=o.trState.props.width,n=o.trState.props.height,r=o.trState.textW||0,i=o.trState.textH||0;"both"===e?(o.props.width=t,o.props.height=n):"width"===e?(o.props.width=t,o.props.height=i):"none"===e&&(o.props.width=r,o.props.height=i),o.updateLocalTransform(),o.stage.requestRender(),o.emit("loaded",{type:"text",dimensions:{width:o.trState.textW||0,height:o.trState.textH||0}})}),y(o,"onTextFailed",function(e,t){o.emit("failed",{type:"text",error:t})}),o._textRendererOverride=t.textRendererOverride,o.textRenderer=r;var i=o.createState({x:o.absX,y:o.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix});return o.trState=i,o}return l(n,t),d(n,[{key:"width",get:function(){return this.props.width},set:function(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),"none"===this.contain&&this.setUpdateType(Je.Local)}},{key:"height",get:function(){return this.props.height},set:function(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),"both"!==this.contain&&this.setUpdateType(Je.Local)}},{key:"color",get:function(){return this.trState.props.color},set:function(e){this.textRenderer.set.color(this.trState,e)}},{key:"text",get:function(){return this.trState.props.text},set:function(e){this.textRenderer.set.text(this.trState,e)}},{key:"textRendererOverride",get:function(){return this._textRendererOverride},set:function(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);var t=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);t?(this.textRenderer=t,this.trState=this.createState(this.trState.props)):console.warn("Text Renderer not found for font",this.trState.props.fontFamily)}},{key:"fontSize",get:function(){return this.trState.props.fontSize},set:function(e){this.textRenderer.set.fontSize(this.trState,e)}},{key:"fontFamily",get:function(){return this.trState.props.fontFamily},set:function(e){this.textRenderer.set.fontFamily(this.trState,e)}},{key:"fontStretch",get:function(){return this.trState.props.fontStretch},set:function(e){this.textRenderer.set.fontStretch(this.trState,e)}},{key:"fontStyle",get:function(){return this.trState.props.fontStyle},set:function(e){this.textRenderer.set.fontStyle(this.trState,e)}},{key:"fontWeight",get:function(){return this.trState.props.fontWeight},set:function(e){this.textRenderer.set.fontWeight(this.trState,e)}},{key:"textAlign",get:function(){return this.trState.props.textAlign},set:function(e){this.textRenderer.set.textAlign(this.trState,e)}},{key:"contain",get:function(){return this.trState.props.contain},set:function(e){this.textRenderer.set.contain(this.trState,e)}},{key:"scrollable",get:function(){return this.trState.props.scrollable},set:function(e){this.textRenderer.set.scrollable(this.trState,e)}},{key:"scrollY",get:function(){return this.trState.props.scrollY},set:function(e){this.textRenderer.set.scrollY(this.trState,e)}},{key:"offsetY",get:function(){return this.trState.props.offsetY},set:function(e){this.textRenderer.set.offsetY(this.trState,e)}},{key:"letterSpacing",get:function(){return this.trState.props.letterSpacing},set:function(e){this.textRenderer.set.letterSpacing(this.trState,e)}},{key:"lineHeight",get:function(){return this.trState.props.lineHeight},set:function(e){this.textRenderer.set.lineHeight(this.trState,e)}},{key:"maxLines",get:function(){return this.trState.props.maxLines},set:function(e){this.textRenderer.set.maxLines(this.trState,e)}},{key:"textBaseline",get:function(){return this.trState.props.textBaseline},set:function(e){this.textRenderer.set.textBaseline(this.trState,e)}},{key:"verticalAlign",get:function(){return this.trState.props.verticalAlign},set:function(e){this.textRenderer.set.verticalAlign(this.trState,e)}},{key:"overflowSuffix",get:function(){return this.trState.props.overflowSuffix},set:function(e){this.textRenderer.set.overflowSuffix(this.trState,e)}},{key:"debug",get:function(){return this.trState.props.debug},set:function(e){this.textRenderer.set.debug(this.trState,e)}},{key:"update",value:function(t,r){e(n,"update",this,3)([t,r]),ge(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}},{key:"checkBasicRenderability",value:function(){return 0!==this.worldAlpha&&!0!==this.isOutOfBounds()&&!(!this.trState||""===this.trState.props.text)}},{key:"setRenderable",value:function(t){e(n,"setRenderable",this,3)([t]),this.textRenderer.setIsRenderable(this.trState,t)}},{key:"renderQuads",value:function(t){var r;if(ge(this.globalTransform),this.textRenderer.renderQuads){if(this.parentHasRenderTexture){if(!t.renderToTextureActive)return;if(this.parentRenderTexture!==t.activeRttNode)return}this.parentHasRenderTexture&&null!==(r=this.props.parent)&&void 0!==r&&r.rtt&&(this.globalTransform=Fe.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),ge(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions)}else e(n,"renderQuads",this,3)([t])}},{key:"destroy",value:function(){e(n,"destroy",this,3)([]),this.textRenderer.destroyState(this.trState)}},{key:"createState",value:function(e){var t=this.textRenderer.createState(e,this);return t.emitter.on("loaded",this.onTextLoaded),t.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(t),t}}])}(et);var sn=function(){return d(function e(t){var n=this;f(this,e),y(this,"options",void 0),y(this,"animationManager",void 0),y(this,"txManager",void 0),y(this,"txMemManager",void 0),y(this,"fontManager",void 0),y(this,"textRenderers",void 0),y(this,"shManager",void 0),y(this,"renderer",void 0),y(this,"root",void 0),y(this,"boundsMargin",void 0),y(this,"defShaderCtr",void 0),y(this,"strictBound",void 0),y(this,"preloadBound",void 0),y(this,"strictBounds",void 0),y(this,"defaultTexture",null),y(this,"eventBus",void 0),y(this,"deltaTime",0),y(this,"lastFrameTime",0),y(this,"currentFrameTime",0),y(this,"fpsNumFrames",0),y(this,"fpsElapsedTime",0),y(this,"numQuadsRendered",0),y(this,"renderRequested",!1),y(this,"frameEventQueue",[]),y(this,"fontResolveMap",{}),y(this,"contextSpy",null),this.options=t;var r=t.canvas,o=t.clearColor,i=t.appWidth,a=t.appHeight,s=t.boundsMargin,u=t.enableContextSpy,l=t.forceWebGL2,c=t.numImageWorkers,p=t.textureMemory,d=t.renderEngine,h=t.fontEngines,m=t.createImageBitmapSupport;this.eventBus=t.eventBus,this.txManager=new gt(this,{numImageWorkers:c,createImageBitmapSupport:m}),this.txManager.on("initialized",function(){n.requestRender()}),this.txMemManager=new nn(this,p),this.shManager=new Jt,this.animationManager=new nt,this.contextSpy=u?new tn:null,this.strictBounds=t.strictBounds;var g=[0,0,0,0];s&&(g=Array.isArray(s)?s:[s,s,s,s]),this.boundsMargin=g,this.strictBound=Le(0,0,i,a),this.preloadBound=Ue(this.strictBound,g);var v={stage:this,canvas:r,pixelRatio:t.devicePhysicalPixelRatio*t.deviceLogicalPixelRatio,clearColor:null!=o?o:4278190080,bufferMemory:2e6,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:l};this.renderer=new d(v);var b=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),be="webgl"===b,this.txManager.renderer=this.renderer,this.textRenderers={},h.forEach(function(e){var t=new e(n),r=t.type;"sdf"!==r||"canvas"!==b?t instanceof en&&("canvas"===r?n.textRenderers.canvas=t:"sdf"===r&&(n.textRenderers.sdf=t)):console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...")}),0===Object.keys(this.textRenderers).length&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new bt(this.textRenderers);var x=new et(this,{x:0,y:0,width:i,height:a,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=x,function(e){var t=!1,n=function(){if(e.updateFrameTime(),e.updateAnimations(),!e.hasSceneUpdates())return e.calculateFps(),setTimeout(n,16.666666666666668),t||(e.eventBus.emit("idle"),t=!0),!0===e.txMemManager.checkCleanup()&&e.txMemManager.cleanup(!1),void e.flushFrameEvents();t=!1,e.drawFrame(),e.flushFrameEvents(),requestAnimationFrame(n)};requestAnimationFrame(n)}(this)},[{key:"setClearColor",value:function(e){this.renderer.updateClearColor(e),this.renderRequested=!0}},{key:"updateFrameTime",value:function(){var e=tt();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=e,this.deltaTime=this.lastFrameTime?e-this.lastFrameTime:100/6,this.txManager.frameTime=e,this.txMemManager.frameTime=e,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}},{key:"createDefaultTexture",value:function(){var e=this;console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),ge(this.defaultTexture instanceof it),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",function(){e.requestRender()})}},{key:"updateAnimations",value:function(){var e=this.animationManager;this.root&&e.update(this.deltaTime)}},{key:"hasSceneUpdates",value:function(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}},{key:"drawFrame",value:function(){var e=this.renderer,t=this.renderRequested;ge(e),0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit),e.reset(),!0===this.txMemManager.criticalCleanupRequested&&(this.txMemManager.cleanup(!1),!0===this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(!0)),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),null==e||e.render(),this.calculateFps(),this.calculateQuads(),t&&(this.renderRequested=!1)}},{key:"queueFrameEvent",value:function(e,t){this.frameEventQueue.push([e,t])}},{key:"flushFrameEvents",value:function(){var e,t=w(this.frameEventQueue);try{for(t.s();!(e=t.n()).done;){var n=v(e.value,2),r=n[0],o=n[1];this.eventBus.emit(r,o)}}catch(i){t.e(i)}finally{t.f()}this.frameEventQueue=[]}},{key:"calculateFps",value:function(){var e=this.options.fpsUpdateInterval;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){var t,n,r,o=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:o,contextSpyData:null!==(t=null===(n=this.contextSpy)||void 0===n?void 0:n.getData())&&void 0!==t?t:null}),null===(r=this.contextSpy)||void 0===r||r.reset()}}},{key:"calculateQuads",value:function(){var e=this.renderer.getQuadCount();e&&e!==this.numQuadsRendered&&(this.numQuadsRendered=e,this.queueFrameEvent("quadsUpdate",{quads:e}))}},{key:"addQuads",value:function(e){ge(this.renderer),!0===e.isRenderable&&e.renderQuads(this.renderer);for(var t=0;t<e.children.length;t++){var n=e.children[t];void 0!==n&&(0===n.worldAlpha||!0===n.strictBounds&&n.renderState===$e.OutOfBounds||this.addQuads(n))}}},{key:"requestRender",value:function(){this.renderRequested=!0}},{key:"resolveTextRenderer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat(e.fontFamily).concat(e.fontStyle).concat(e.fontWeight).concat(e.fontStretch).concat(t||"");if(void 0!==this.fontResolveMap[n])return this.fontResolveMap[n];var r=t,o=!1;if(r){var i=this.textRenderers[r];i?i.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(r,"' for font"),e),r=null,o=!0):(console.warn("Text renderer override '".concat(r,"' not found.")),r=null,o=!0)}if(!r){for(var a=0,s=Object.entries(this.textRenderers);a<s.length;a++){var u=v(s[a],2),l=u[0];if(u[1].canRenderFont(e)){r=l;break}}r||void 0===this.textRenderers.canvas||(r="canvas")}if(o&&console.warn("Falling back to text renderer ".concat(String(r))),!r)return null;var c=this.textRenderers[r];return ge(c,"resolvedTextRenderer undefined"),this.fontResolveMap[n]=c,c}},{key:"createShaderCtr",value:function(e,t){return this.shManager.loadShader(e,t)}},{key:"createNode",value:function(e){var t=this.resolveNodeDefaults(e);return new et(this,t)}},{key:"createTextNode",value:function(e){var t,n,r,o,i,a,s,u,l,c,f,p,d,h,m,v,y,b,x=null!==(t=e.fontSize)&&void 0!==t?t:16,w=g(g({},this.resolveNodeDefaults(e)),{},{text:null!==(n=e.text)&&void 0!==n?n:"",textRendererOverride:null!==(r=e.textRendererOverride)&&void 0!==r?r:null,fontSize:x,fontFamily:null!==(o=e.fontFamily)&&void 0!==o?o:"sans-serif",fontStyle:null!==(i=e.fontStyle)&&void 0!==i?i:"normal",fontWeight:null!==(a=e.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(s=e.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(u=e.textAlign)&&void 0!==u?u:"left",contain:null!==(l=e.contain)&&void 0!==l?l:"none",scrollable:null!==(c=e.scrollable)&&void 0!==c&&c,scrollY:null!==(f=e.scrollY)&&void 0!==f?f:0,offsetY:null!==(p=e.offsetY)&&void 0!==p?p:0,letterSpacing:null!==(d=e.letterSpacing)&&void 0!==d?d:0,lineHeight:e.lineHeight,maxLines:null!==(h=e.maxLines)&&void 0!==h?h:0,textBaseline:null!==(m=e.textBaseline)&&void 0!==m?m:"alphabetic",verticalAlign:null!==(v=e.verticalAlign)&&void 0!==v?v:"middle",overflowSuffix:null!==(y=e.overflowSuffix)&&void 0!==y?y:"...",debug:null!==(b=e.debug)&&void 0!==b?b:{},shaderProps:null}),S=this.resolveTextRenderer(w,e.textRendererOverride);if(!S)throw new Error("No compatible text renderer found for ".concat(w.fontFamily));return new an(this,w,S)}},{key:"setBoundsMargin",value:function(e){this.boundsMargin=Array.isArray(e)?e:[e,e,e,e],this.root.setUpdateType(Je.RenderBounds)}},{key:"resolveNodeDefaults",value:function(e){var t,n,r,o,i,a,s,u,l,c,f,p,d,h,m,g,v,y,b,w,S,T,k,C,A,E,I,M,R,_,L,D,P,O,N,U,B,j,F,z,G,V,H,q,X,W,K,$,Y,Q,J,Z,ee=null!==(t=e.color)&&void 0!==t?t:4294967295,te=null!==(n=null!==(r=null!==(o=e.colorTl)&&void 0!==o?o:e.colorTop)&&void 0!==r?r:e.colorLeft)&&void 0!==n?n:ee,ne=null!==(i=null!==(a=null!==(s=e.colorTr)&&void 0!==s?s:e.colorTop)&&void 0!==a?a:e.colorRight)&&void 0!==i?i:ee,re=null!==(u=null!==(l=null!==(c=e.colorBl)&&void 0!==c?c:e.colorBottom)&&void 0!==l?l:e.colorLeft)&&void 0!==u?u:ee,oe=null!==(f=null!==(p=null!==(d=e.colorBr)&&void 0!==d?d:e.colorBottom)&&void 0!==p?p:e.colorRight)&&void 0!==f?f:ee,ie={};!0===this.options.inspector&&(ie=function(e){for(var t={boolean:!0,string:!0,number:!0,undefined:!0},n=Object.keys(e),r=0;r<n.length;r++){var o=n[r];if(o){var i=e[o],a=x(i);"string"===a&&i.length>2048&&(console.warn("Custom Data value for ".concat(o," is too long, it will be truncated to 2048 characters")),e[o]=i.substring(0,2048)),t[a]||(console.warn("Custom Data value for ".concat(o," is not a boolean, string, or number, it will be ignored")),delete e[o])}}return e}(null!==(Z=e.data)&&void 0!==Z?Z:{}));return{x:null!==(h=e.x)&&void 0!==h?h:0,y:null!==(m=e.y)&&void 0!==m?m:0,width:null!==(g=e.width)&&void 0!==g?g:0,height:null!==(v=e.height)&&void 0!==v?v:0,alpha:null!==(y=e.alpha)&&void 0!==y?y:1,autosize:null!==(b=e.autosize)&&void 0!==b&&b,boundsMargin:null!==(w=e.boundsMargin)&&void 0!==w?w:null,clipping:null!==(S=e.clipping)&&void 0!==S&&S,color:ee,colorTop:null!==(T=e.colorTop)&&void 0!==T?T:ee,colorBottom:null!==(k=e.colorBottom)&&void 0!==k?k:ee,colorLeft:null!==(C=e.colorLeft)&&void 0!==C?C:ee,colorRight:null!==(A=e.colorRight)&&void 0!==A?A:ee,colorBl:re,colorBr:oe,colorTl:te,colorTr:ne,zIndex:null!==(E=e.zIndex)&&void 0!==E?E:0,zIndexLocked:null!==(I=e.zIndexLocked)&&void 0!==I?I:0,parent:null!==(M=e.parent)&&void 0!==M?M:null,texture:null!==(R=e.texture)&&void 0!==R?R:null,textureOptions:null!==(_=e.textureOptions)&&void 0!==_?_:{},shader:null!==(L=e.shader)&&void 0!==L?L:this.defShaderCtr,src:null!==(D=e.src)&&void 0!==D?D:null,srcHeight:e.srcHeight,srcWidth:e.srcWidth,srcX:e.srcX,srcY:e.srcY,scale:null!==(P=e.scale)&&void 0!==P?P:null,scaleX:null!==(O=null!==(N=e.scaleX)&&void 0!==N?N:e.scale)&&void 0!==O?O:1,scaleY:null!==(U=null!==(B=e.scaleY)&&void 0!==B?B:e.scale)&&void 0!==U?U:1,mount:null!==(j=e.mount)&&void 0!==j?j:0,mountX:null!==(F=null!==(z=e.mountX)&&void 0!==z?z:e.mount)&&void 0!==F?F:0,mountY:null!==(G=null!==(V=e.mountY)&&void 0!==V?V:e.mount)&&void 0!==G?G:0,pivot:null!==(H=e.pivot)&&void 0!==H?H:.5,pivotX:null!==(q=null!==(X=e.pivotX)&&void 0!==X?X:e.pivot)&&void 0!==q?q:.5,pivotY:null!==(W=null!==(K=e.pivotY)&&void 0!==K?K:e.pivot)&&void 0!==W?W:.5,rotation:null!==($=e.rotation)&&void 0!==$?$:0,rtt:null!==(Y=e.rtt)&&void 0!==Y&&Y,data:ie,preventCleanup:null!==(Q=e.preventCleanup)&&void 0!==Q&&Q,imageType:e.imageType,strictBounds:null!==(J=e.strictBounds)&&void 0!==J?J:this.strictBounds}}},{key:"cleanup",value:function(e){this.txMemManager.cleanup(e)}}])}(),un=function(e){function t(e,n){var r,o,i,s,u,l,c,p,d,h,m,g,v;f(this,t),y(v=a(this,t),"root",void 0),y(v,"canvas",void 0),y(v,"settings",void 0),y(v,"stage",void 0),y(v,"inspector",null);var b={criticalThreshold:(null===(r=e.textureMemory)||void 0===r?void 0:r.criticalThreshold)||124e6,targetThresholdLevel:(null===(o=e.textureMemory)||void 0===o?void 0:o.targetThresholdLevel)||.5,cleanupInterval:(null===(i=e.textureMemory)||void 0===i?void 0:i.cleanupInterval)||5e3,debugLogging:(null===(s=e.textureMemory)||void 0===s?void 0:s.debugLogging)||!1,baselineMemoryAllocation:(null===(u=e.textureMemory)||void 0===u?void 0:u.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:(null===(l=e.textureMemory)||void 0===l?void 0:l.doNotExceedCriticalThreshold)||!1},x={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,textureMemory:b,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(c=e.clearColor)&&void 0!==c?c:0,fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:void 0!==e.numImageWorkers?e.numImageWorkers:2,enableContextSpy:null!==(p=e.enableContextSpy)&&void 0!==p&&p,forceWebGL2:null!==(d=e.forceWebGL2)&&void 0!==d&&d,inspector:null!==(h=e.inspector)&&void 0!==h&&h,renderEngine:e.renderEngine,quadBufferSize:null!==(m=e.quadBufferSize)&&void 0!==m?m:4194304,fontEngines:e.fontEngines,strictBounds:null===(g=e.strictBounds)||void 0===g||g,textureProcessingTimeLimit:e.textureProcessingTimeLimit||10,canvas:e.canvas||document.createElement("canvas"),createImageBitmapSupport:e.createImageBitmapSupport||"full"};v.settings=x;var w,S=x.deviceLogicalPixelRatio,T=x.devicePhysicalPixelRatio,k=x.inspector,C=x.canvas,A=x.appWidth*S,E=x.appHeight*S;if(v.canvas=C,C.width=A*T,C.height=E*T,C.style.width="".concat(A,"px"),C.style.height="".concat(E,"px"),v.stage=new sn({appWidth:v.settings.appWidth,appHeight:v.settings.appHeight,boundsMargin:v.settings.boundsMargin,clearColor:v.settings.clearColor,canvas:v.canvas,deviceLogicalPixelRatio:v.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:v.settings.devicePhysicalPixelRatio,enableContextSpy:v.settings.enableContextSpy,forceWebGL2:v.settings.forceWebGL2,fpsUpdateInterval:v.settings.fpsUpdateInterval,numImageWorkers:v.settings.numImageWorkers,renderEngine:v.settings.renderEngine,textureMemory:b,eventBus:v,quadBufferSize:v.settings.quadBufferSize,fontEngines:v.settings.fontEngines,inspector:null!==v.settings.inspector,strictBounds:v.settings.strictBounds,textureProcessingTimeLimit:v.settings.textureProcessingTimeLimit,createImageBitmapSupport:v.settings.createImageBitmapSupport}),v.root=v.stage.root,!(w="string"==typeof n?document.getElementById(n):n))throw new Error("Could not find target element");return w.appendChild(C),k&&!Se()&&(v.inspector=new k(C,x)),v}return l(t,e),d(t,[{key:"createNode",value:function(e){var t=this.stage.createNode(e);return this.inspector?this.inspector.createNode(t):t}},{key:"createTextNode",value:function(e){var t=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(t):t}},{key:"destroyNode",value:function(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}},{key:"createTexture",value:function(e,t){return this.stage.txManager.createTexture(e,t)}},{key:"createShader",value:function(e,t){return this.stage.shManager.loadShader(e,t)}},{key:"createDynamicShader",value:function(e){return this.stage.shManager.loadDynamicShader({effects:e})}},{key:"createEffect",value:function(e,t,n){return{name:n,type:e,props:t}}},{key:"getNodeById",value:function(e){var t,n=null===(t=this.stage)||void 0===t?void 0:t.root;if(!n)return null;var r=function(t){if(t.id===e)return t;var n,o=w(t.children);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=r(i);if(a)return a}}catch(s){o.e(s)}finally{o.f()}return null};return r(n)}},{key:"toggleFreeze",value:function(){throw new Error("Not implemented")}},{key:"advanceFrame",value:function(){throw new Error("Not implemented")}},{key:"getBufferInfo",value:function(){return this.stage.renderer.getBufferInfo()}},{key:"rerender",value:function(){this.stage.requestRender()}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stage.cleanup(e)}},{key:"setClearColor",value:function(e){this.stage.setClearColor(e)}}])}(Ce),ln=function(e){function t(e){var n;f(this,t),y(n=a(this,t),"fontFamily",void 0),y(n,"descriptors",void 0),y(n,"loaded",!1),y(n,"metrics",null);var r=e.fontFamily,o=e.descriptors,i=e.metrics;return i&&(n.metrics={ascender:i.ascender/i.unitsPerEm,descender:i.descender/i.unitsPerEm,lineGap:i.lineGap/i.unitsPerEm}),n.fontFamily=r,n.descriptors=g({style:"normal",weight:"normal",stretch:"normal"},o),n}return l(t,e),d(t,null,[{key:"convertToCssFontFaceDescriptors",value:function(e){return{style:e.style,weight:"number"==typeof e.weight?"".concat(e.weight):e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}])}(Ce),cn=function(e){function t(e){var n;f(this,t),y(n=a(this,t,[e]),"fontFace",void 0),y(n,"fontUrl",void 0);var r=e.fontFamily,o=e.fontUrl,i=o.replace(/\(|\)/g,""),s=n.descriptors,u={style:s.style,weight:"number"==typeof s.weight?"".concat(s.weight):s.weight,stretch:s.stretch,unicodeRange:s.unicodeRange,featureSettings:s.featureSettings,display:s.display};for(var l in u){var c=l;void 0===u[c]&&delete u[c]}var p=new FontFace(r,"url(".concat(i,")"),u);return i.length>0?p.load().then(function(){n.loaded=!0,n.emit("loaded")}).catch(console.error):(n.loaded=!0,n.emit("loaded")),n.fontFace=p,n.fontUrl=o,n}return l(t,e),d(t)}(ln),fn=function(e){function t(e,n,r,o,i,s,u,l,c,p,d,h,m){var g;return f(this,t),y(g=a(this,t),"glw",void 0),y(g,"options",void 0),y(g,"buffers",void 0),y(g,"shader",void 0),y(g,"shaderProps",void 0),y(g,"alpha",void 0),y(g,"clippingRect",void 0),y(g,"dimensions",void 0),y(g,"bufferIdx",void 0),y(g,"zIndex",void 0),y(g,"renderToTexture",void 0),y(g,"parentHasRenderTexture",void 0),y(g,"framebufferDimensions",void 0),y(g,"length",0),y(g,"numQuads",0),y(g,"textures",[]),y(g,"maxTextures",void 0),g.glw=e,g.options=n,g.buffers=r,g.shader=o,g.shaderProps=i,g.alpha=s,g.clippingRect=u,g.dimensions=l,g.bufferIdx=c,g.zIndex=p,g.renderToTexture=d,g.parentHasRenderTexture=h,g.framebufferDimensions=m,g.maxTextures=o.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1,g}return l(t,e),d(t,[{key:"addTexture",value:function(e){for(var t=this.textures,n=this.maxTextures,r=-1,o=t.length,i=0;i<o;i++){if(t[i]===e){r=i;break}}return-1!==r?r:o>=n?4294967295:(this.textures.push(e),o)}},{key:"draw",value:function(){var e=this.glw,t=this.shader,n=this.shaderProps,r=this.options;r.shManager.useShader(t),t.bindRenderOp(this,n);var o=this.bufferIdx/24*6*2;if(this.clippingRect.valid){var i=this.clippingRect,a=i.x,s=i.y,u=i.width,l=i.height,c=this.parentHasRenderTexture?1:r.pixelRatio,f=r.canvas.height,p=Math.round(a*c),d=Math.round(u*c),h=Math.round(l*c),m=Math.round(f-h-s*c);this.parentHasRenderTexture&&(m=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),e.setScissorTest(!0),e.scissor(p,m,d,h)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,o)}}])}(d(function e(){f(this,e)}));function pn(e){var t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(function(n){t[n]=e.getParameter(e[n])}),t}function dn(e){var t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(function(n){t[n]=e.getExtension(n)}),t}function hn(e){return null!==e&&("object"===x(e)&&e.constructor&&"HTMLImageElement"===e.constructor.name||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)}var mn=new Uint8Array([0,0,0,0]),gn=function(e){function t(e,n,r){var o;return f(this,t),y(o=a(this,t,[n,r]),"glw",void 0),y(o,"_nativeCtxTexture",null),y(o,"_w",0),y(o,"_h",0),o.glw=e,o}return l(t,e),d(t,[{key:"ctxTexture",get:function(){return"freed"===this.state?(this.load(),null):(ge(this._nativeCtxTexture),this._nativeCtxTexture)}},{key:"w",get:function(){return this._w}},{key:"h",get:function(){return this._h}},{key:"load",value:function(){var e=this;if("loading"!==this.state&&"loaded"!==this.state){if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),null===this._nativeCtxTexture)return this.state="failed",this.textureSource.setState("failed",new Error("Could not create WebGL Texture")),void console.error("Could not create WebGL Texture");this.onLoadRequest().then(function(t){var n=t.width,r=t.height;"freed"!==e.state&&(e.state="loaded",e._w=n,e._h=r,e.textureSource.setState("loaded",{width:n,height:r}),e.textureSource.freeTextureData())}).catch(function(t){"freed"!==e.state&&(e.state="failed",e.textureSource.setState("failed",t),e.textureSource.freeTextureData(),console.error(t))})}}},{key:"onLoadRequest",value:(r=i(n().m(function e(){var t,r,o,i,a,s,u,l,c,f,p,d,h,m,g;return n().w(function(e){for(;;)switch(e.n){case 0:if(t=this.glw,null!==(r=this.textureSource.textureData)&&null!==this._nativeCtxTexture){e.n=1;break}throw new Error("Texture data or native texture is null "+this.textureSource.type);case 1:return t.texImage2D(0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),this.setTextureMemUse(mn.byteLength),o=0,i=0,t.activeTexture(0),a=r.data,s=t.RGBA,"undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap||a instanceof ImageData||hn(a)?(o=a.width,i=a.height,t.bindTexture(this._nativeCtxTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!r.premultiplyAlpha),t.texImage2D(0,s,s,t.UNSIGNED_BYTE,a),this.setTextureMemUse(i*o*4*1.1)):null===a?(o=0,i=0,t.bindTexture(this._nativeCtxTexture),t.texImage2D(0,s,1,1,0,s,t.UNSIGNED_BYTE,mn),this.setTextureMemUse(mn.byteLength)):"mipmaps"in a&&a.mipmaps?(l=a.mipmaps,c=a.width,f=void 0===c?0:c,p=a.height,d=void 0===p?0:p,h=a.type,m=a.glInternalFormat,g="ktx"===h?new DataView(null!==(u=l[0])&&void 0!==u?u:new ArrayBuffer(0)):l[0],t.bindTexture(this._nativeCtxTexture),t.compressedTexImage2D(0,m,f,d,0,g),t.texParameteri(t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_MIN_FILTER,t.LINEAR),this.setTextureMemUse(g.byteLength)):a&&a instanceof Uint8Array?(o=1,i=1,t.bindTexture(this._nativeCtxTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!r.premultiplyAlpha),t.texImage2D(0,s,o,i,0,s,t.UNSIGNED_BYTE,a),this.setTextureMemUse(o*i*4)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",r),e.a(2,{width:o,height:i})}},e,this)})),function(){return r.apply(this,arguments)})},{key:"free",value:function(){"freed"!==this.state&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,null!==this._nativeCtxTexture&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}},{key:"createNativeCtxTexture",value:function(){var e=this.glw,t=e.createTexture();return t?(e.activeTexture(0),e.bindTexture(t),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t):null}}]);var r}(rn),vn=function(e){function t(e,n,r){return f(this,t),a(this,t,[e,n,r])}return l(t,e),d(t,[{key:"onLoadRequest",value:(r=i(n().m(function e(){var t,r,o;return n().w(function(e){for(;;)switch(e.n){case 0:if(ge(o=this.textureSource.textureData,"SubTexture must have texture data"),!(o.data instanceof Uint8Array)){e.n=1;break}return e.a(2,{width:1,height:1});case 1:return e.a(2,{width:(null===(t=o.data)||void 0===t?void 0:t.width)||0,height:(null===(r=o.data)||void 0===r?void 0:r.height)||0})}},e,this)})),function(){return r.apply(this,arguments)})}]);var r}(gn),yn=function(){return d(function e(t){f(this,e),y(this,"config",void 0),this.config=t},[{key:"getBuffer",value:function(e){var t;return null===(t=this.config.find(function(t){return t.attributes[e]}))||void 0===t?void 0:t.buffer}},{key:"getAttributeInfo",value:function(e){var t;return null===(t=this.config.find(function(t){return t.attributes[e]}))||void 0===t?void 0:t.attributes[e]}}])}();var bn=function(){return d(function e(t){var n=this;f(this,e),y(this,"gl",void 0),y(this,"activeTextureUnit",0),y(this,"texture2dUnits",void 0),y(this,"texture2dParams",new WeakMap),y(this,"scissorEnabled",void 0),y(this,"scissorX",void 0),y(this,"scissorY",void 0),y(this,"scissorWidth",void 0),y(this,"scissorHeight",void 0),y(this,"blendEnabled",void 0),y(this,"blendSrcRgb",void 0),y(this,"blendDstRgb",void 0),y(this,"blendSrcAlpha",void 0),y(this,"blendDstAlpha",void 0),y(this,"boundArrayBuffer",void 0),y(this,"boundElementArrayBuffer",void 0),y(this,"curProgram",void 0),y(this,"canvas",void 0),y(this,"MAX_RENDERBUFFER_SIZE",void 0),y(this,"MAX_TEXTURE_SIZE",void 0),y(this,"MAX_VIEWPORT_DIMS",void 0),y(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS",void 0),y(this,"MAX_TEXTURE_IMAGE_UNITS",void 0),y(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS",void 0),y(this,"MAX_VERTEX_ATTRIBS",void 0),y(this,"MAX_VARYING_VECTORS",void 0),y(this,"MAX_VERTEX_UNIFORM_VECTORS",void 0),y(this,"MAX_FRAGMENT_UNIFORM_VECTORS",void 0),y(this,"TEXTURE_MAG_FILTER",void 0),y(this,"TEXTURE_MIN_FILTER",void 0),y(this,"TEXTURE_WRAP_S",void 0),y(this,"TEXTURE_WRAP_T",void 0),y(this,"LINEAR",void 0),y(this,"CLAMP_TO_EDGE",void 0),y(this,"RGB",void 0),y(this,"RGBA",void 0),y(this,"UNSIGNED_BYTE",void 0),y(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL",void 0),y(this,"UNPACK_FLIP_Y_WEBGL",void 0),y(this,"FLOAT",void 0),y(this,"TRIANGLES",void 0),y(this,"UNSIGNED_SHORT",void 0),y(this,"ONE",void 0),y(this,"ONE_MINUS_SRC_ALPHA",void 0),y(this,"VERTEX_SHADER",void 0),y(this,"FRAGMENT_SHADER",void 0),y(this,"STATIC_DRAW",void 0),y(this,"COMPILE_STATUS",void 0),y(this,"LINK_STATUS",void 0),y(this,"DYNAMIC_DRAW",void 0),y(this,"COLOR_ATTACHMENT0",void 0),y(this,"INVALID_ENUM",void 0),y(this,"INVALID_OPERATION",void 0),this.gl=t,this.activeTextureUnit=t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0;var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(r).fill(void 0).map(function(e,r){return n.activeTexture(r),t.getParameter(t.TEXTURE_BINDING_2D)}),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=t.isEnabled(t.SCISSOR_TEST);var o=t.getParameter(t.SCISSOR_BOX);this.scissorX=o[0],this.scissorY=o[1],this.scissorWidth=o[2],this.scissorHeight=o[3],this.blendEnabled=t.isEnabled(t.BLEND),this.blendSrcRgb=t.getParameter(t.BLEND_SRC_RGB),this.blendDstRgb=t.getParameter(t.BLEND_DST_RGB),this.blendSrcAlpha=t.getParameter(t.BLEND_SRC_ALPHA),this.blendDstAlpha=t.getParameter(t.BLEND_DST_ALPHA),this.boundArrayBuffer=t.getParameter(t.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=t.getParameter(t.CURRENT_PROGRAM),this.canvas=t.canvas,this.MAX_RENDERBUFFER_SIZE=t.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=t.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=t.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=t.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=t.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=t.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=t.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=t.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=t.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=t.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=t.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=t.TEXTURE_WRAP_T,this.LINEAR=t.LINEAR,this.CLAMP_TO_EDGE=t.CLAMP_TO_EDGE,this.RGB=t.RGB,this.RGBA=t.RGBA,this.UNSIGNED_BYTE=t.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=t.UNPACK_FLIP_Y_WEBGL,this.FLOAT=t.FLOAT,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.ONE=t.ONE,this.ONE_MINUS_SRC_ALPHA=t.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.VERTEX_SHADER=t.VERTEX_SHADER,this.FRAGMENT_SHADER=t.FRAGMENT_SHADER,this.STATIC_DRAW=t.STATIC_DRAW,this.COMPILE_STATUS=t.COMPILE_STATUS,this.LINK_STATUS=t.LINK_STATUS,this.DYNAMIC_DRAW=t.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=t.COLOR_ATTACHMENT0,this.INVALID_ENUM=t.INVALID_ENUM,this.INVALID_OPERATION=t.INVALID_OPERATION},[{key:"isWebGl2",value:function(){return e=this.gl,self.WebGL2RenderingContext&&e instanceof self.WebGL2RenderingContext;var e}},{key:"activeTexture",value:function(e){var t=this.gl;this.activeTextureUnit!==e&&(t.activeTexture(e+t.TEXTURE0),this.activeTextureUnit=e)}},{key:"bindTexture",value:function(e){var t=this.gl,n=this.activeTextureUnit,r=this.texture2dUnits;r[n]!==e&&(r[n]=e,t.bindTexture(this.gl.TEXTURE_2D,e))}},{key:"_getActiveTexture",value:function(){var e=this.activeTextureUnit;return this.texture2dUnits[e]}},{key:"texParameteri",value:function(e,t){var n=this.gl,r=this.texture2dParams,o=this._getActiveTexture();if(!o)throw new Error("No active texture");var i=r.get(o);i||(i={},r.set(o,i)),i[e]!==t&&(i[e]=t,n.texParameteri(n.TEXTURE_2D,e,t))}},{key:"texImage2D",value:function(e,t,n,r,o,i,a,s){var u=this.gl;i?u.texImage2D(u.TEXTURE_2D,e,t,n,r,o,i,a,s):u.texImage2D(u.TEXTURE_2D,e,t,n,r,o)}},{key:"compressedTexImage2D",value:function(e,t,n,r,o,i){var a=this.gl;a.compressedTexImage2D(a.TEXTURE_2D,e,t,n,r,o,i)}},{key:"pixelStorei",value:function(e,t){this.gl.pixelStorei(e,t)}},{key:"generateMipmap",value:function(){var e=this.gl;e.generateMipmap(e.TEXTURE_2D)}},{key:"createTexture",value:function(){return this.gl.createTexture()}},{key:"deleteTexture",value:function(e){var t=this.gl;e&&this.texture2dParams.delete(e),t.deleteTexture(e)}},{key:"deleteFramebuffer",value:function(e){this.gl.deleteFramebuffer(e)}},{key:"viewport",value:function(e,t,n,r){this.gl.viewport(e,t,n,r)}},{key:"clearColor",value:function(e,t,n,r){this.gl.clearColor(e,t,n,r)}},{key:"setScissorTest",value:function(e){var t=this.gl;e!==this.scissorEnabled&&(e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.scissorEnabled=e)}},{key:"scissor",value:function(e,t,n,r){var o=this.gl,i=this.scissorX,a=this.scissorY,s=this.scissorWidth,u=this.scissorHeight;e===i&&t===a&&n===s&&r===u||(o.scissor(e,t,n,r),this.scissorX=e,this.scissorY=t,this.scissorWidth=n,this.scissorHeight=r)}},{key:"setBlend",value:function(e){var t=this.gl;e!==this.blendEnabled&&(e?t.enable(t.BLEND):t.disable(t.BLEND),this.blendEnabled=e)}},{key:"blendFunc",value:function(e,t){var n=this.gl,r=this.blendSrcRgb,o=this.blendDstRgb,i=this.blendSrcAlpha,a=this.blendDstAlpha;e===r&&t===o&&e===i&&t===a||(n.blendFunc(e,t),this.blendSrcRgb=e,this.blendDstRgb=t,this.blendSrcAlpha=e,this.blendDstAlpha=t)}},{key:"createBuffer",value:function(){return this.gl.createBuffer()}},{key:"createFramebuffer",value:function(){return this.gl.createFramebuffer()}},{key:"bindFramebuffer",value:function(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e)}},{key:"framebufferTexture2D",value:function(e,t,n){var r=this.gl;r.framebufferTexture2D(r.FRAMEBUFFER,e,r.TEXTURE_2D,t,n)}},{key:"clear",value:function(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT)}},{key:"arrayBufferData",value:function(e,t,n){var r=this.gl;this.boundArrayBuffer!==e&&(r.bindBuffer(r.ARRAY_BUFFER,e),this.boundArrayBuffer=e),r.bufferData(r.ARRAY_BUFFER,t,n)}},{key:"elementArrayBufferData",value:function(e,t,n){var r=this.gl;this.boundElementArrayBuffer!==e&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),this.boundElementArrayBuffer=e),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t,n)}},{key:"vertexAttribPointer",value:function(e,t,n,r,o,i,a){var s=this.gl;this.boundArrayBuffer!==e&&(s.bindBuffer(s.ARRAY_BUFFER,e),this.boundArrayBuffer=e),s.vertexAttribPointer(t,n,r,o,i,a)}},{key:"useProgram",value:function(e){var t=this.gl;this.curProgram!==e&&(t.useProgram(e),this.curProgram=e)}},{key:"uniform1f",value:function(e,t){this.gl.uniform1f(e,t)}},{key:"uniform1fv",value:function(e,t){this.gl.uniform1fv(e,t)}},{key:"uniform1i",value:function(e,t){this.gl.uniform1i(e,t)}},{key:"uniform1iv",value:function(e,t){this.gl.uniform1iv(e,t)}},{key:"uniform2f",value:function(e,t,n){this.gl.uniform2f(e,t,n)}},{key:"uniform2fv",value:function(e,t){this.gl.uniform2fv(e,t)}},{key:"uniform2i",value:function(e,t,n){this.gl.uniform2i(e,t,n)}},{key:"uniform2iv",value:function(e,t){this.gl.uniform2iv(e,t)}},{key:"uniform3f",value:function(e,t,n,r){this.gl.uniform3f(e,t,n,r)}},{key:"uniform3fv",value:function(e,t){this.gl.uniform3fv(e,t)}},{key:"uniform3i",value:function(e,t,n,r){this.gl.uniform3i(e,t,n,r)}},{key:"uniform3iv",value:function(e,t){this.gl.uniform3iv(e,t)}},{key:"uniform4f",value:function(e,t,n,r,o){this.gl.uniform4f(e,t,n,r,o)}},{key:"uniform4fv",value:function(e,t){this.gl.uniform4fv(e,t)}},{key:"uniform4i",value:function(e,t,n,r,o){this.gl.uniform4i(e,t,n,r,o)}},{key:"uniform4iv",value:function(e,t){this.gl.uniform4iv(e,t)}},{key:"uniformMatrix2fv",value:function(e,t){this.gl.uniformMatrix2fv(e,!1,t)}},{key:"uniformMatrix3fv",value:function(e,t){this.gl.uniformMatrix3fv(e,!1,t)}},{key:"uniformMatrix4fv",value:function(e,t){this.gl.uniformMatrix4fv(e,!1,t)}},{key:"getParameter",value:function(e){return this.gl.getParameter(e)}},{key:"drawElements",value:function(e,t,n,r){this.gl.drawElements(e,t,n,r)}},{key:"getExtension",value:function(e){return this.gl.getExtension(e)}},{key:"getError",value:function(){return this.gl.getError()}},{key:"createVertexArray",value:function(){var e=this.gl;return ge(e instanceof WebGL2RenderingContext),e.createVertexArray()}},{key:"bindVertexArray",value:function(e){var t=this.gl;ge(t instanceof WebGL2RenderingContext),t.bindVertexArray(e)}},{key:"getAttribLocation",value:function(e,t){return this.gl.getAttribLocation(e,t)}},{key:"getUniformLocation",value:function(e,t){return this.gl.getUniformLocation(e,t)}},{key:"enableVertexAttribArray",value:function(e){this.gl.enableVertexAttribArray(e)}},{key:"disableVertexAttribArray",value:function(e){this.gl.disableVertexAttribArray(e)}},{key:"createShader",value:function(e){return this.gl.createShader(e)}},{key:"compileShader",value:function(e){this.gl.compileShader(e)}},{key:"attachShader",value:function(e,t){this.gl.attachShader(e,t)}},{key:"linkProgram",value:function(e){this.gl.linkProgram(e)}},{key:"deleteProgram",value:function(e){this.gl.deleteProgram(e)}},{key:"getShaderParameter",value:function(e,t){return this.gl.getShaderParameter(e,t)}},{key:"getShaderInfoLog",value:function(e){return this.gl.getShaderInfoLog(e)}},{key:"createProgram",value:function(){return this.gl.createProgram()}},{key:"getProgramParameter",value:function(e,t){return this.gl.getProgramParameter(e,t)}},{key:"getProgramInfoLog",value:function(e){return this.gl.getProgramInfoLog(e)}},{key:"shaderSource",value:function(e,t){this.gl.shaderSource(e,t)}},{key:"deleteShader",value:function(e){this.gl.deleteShader(e)}}])}(),xn=function(t){function r(e,t,n){var o;return f(this,r),y(o=a(this,r,[e,t,n]),"framebuffer",null),o}return l(r,t),d(r,[{key:"onLoadRequest",value:(o=i(n().m(function e(){var t,r,o,i,a;return n().w(function(e){for(;;)if(0===e.n)return t=this.glw,r=this._nativeCtxTexture=this.createNativeCtxTexture(),o=this.textureSource,i=o.width,a=o.height,this.framebuffer=t.createFramebuffer(),t.texImage2D(0,t.RGBA,i,a,0,t.RGBA,t.UNSIGNED_BYTE,null),this.setTextureMemUse(i*a*4),t.bindFramebuffer(this.framebuffer),t.framebufferTexture2D(t.COLOR_ATTACHMENT0,r,0),t.bindFramebuffer(null),e.a(2,{width:i,height:a})},e,this)})),function(){return o.apply(this,arguments)})},{key:"free",value:function(){e(r,"free",this,3)([]),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}]);var o}(gn),wn=function(e){function t(e){var n;f(this,t),y(n=a(this,t,[e]),"glw",void 0),y(n,"system",void 0),y(n,"quadBuffer",void 0),y(n,"fQuadBuffer",void 0),y(n,"uiQuadBuffer",void 0),y(n,"renderOps",[]),y(n,"curBufferIdx",0),y(n,"curRenderOp",null),y(n,"rttNodes",[]),y(n,"activeRttNode",null),y(n,"defShaderCtrl",void 0),y(n,"defaultShader",void 0),y(n,"quadBufferCollection",void 0),y(n,"clearColor",{raw:0,normalized:[0,0,0,0]}),y(n,"quadBufferUsage",0),y(n,"numQuadsRendered",0),y(n,"renderToTextureActive",!1),n.quadBuffer=new ArrayBuffer(n.stage.options.quadBufferSize),n.fQuadBuffer=new Float32Array(n.quadBuffer),n.uiQuadBuffer=new Uint32Array(n.quadBuffer),n.mode="webgl";var r=e.canvas,o=e.clearColor,i=e.bufferMemory,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},o=e.getContext(t?"webgl2":"webgl",r)||e.getContext("experimental-webgl",r);if(!o)throw new Error("Unable to create WebGL context");return n?new Proxy(o,{get:function(e,t){var r=e[t];return"function"==typeof r?(n.increment(String(t)),r.bind(e)):r}}):o}(r,e.forceWebGL2,e.contextSpy),u=n.glw=new bn(s);u.viewport(0,0,r.width,r.height),n.updateClearColor(o),u.setBlend(!0),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),function(e,t){for(var n=~~(t/80),r=new Uint16Array(6*n),o=0,i=0;o<n;o+=6,i+=4)r[o]=i,r[o+1]=i+1,r[o+2]=i+2,r[o+3]=i+2,r[o+4]=i+1,r[o+5]=i+3;var a=e.createBuffer();e.elementArrayBufferData(a,r,e.STATIC_DRAW)}(u,i),n.system={parameters:pn(n.glw),extensions:dn(n.glw)},n.shManager.renderer=n,n.defShaderCtrl=n.shManager.loadShader("DefaultShader"),n.defaultShader=n.defShaderCtrl.shader;var l=u.createBuffer();ge(l);var c=6*Float32Array.BYTES_PER_ELEMENT;return n.quadBufferCollection=new yn([{buffer:l,attributes:{a_position:{name:"a_position",size:2,type:u.FLOAT,normalized:!1,stride:c,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:u.FLOAT,normalized:!1,stride:c,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:u.UNSIGNED_BYTE,normalized:!0,stride:c,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:u.FLOAT,normalized:!1,stride:c,offset:5*Float32Array.BYTES_PER_ELEMENT}}}]),n}return l(t,e),d(t,[{key:"reset",value:function(){var e=this.glw;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}},{key:"getShaderManager",value:function(){return this.shManager}},{key:"createCtxTexture",value:function(e){return e instanceof dt?new vn(this.glw,this.txMemManager,e):e instanceof ht?new xn(this.glw,this.txMemManager,e):new gn(this.glw,this.txMemManager,e)}},{key:"addQuad",value:function(e){var t=this.fQuadBuffer,n=this.uiQuadBuffer,r=e.texture;if(ge(null!==r,"Texture is required"),null!==e.shaderProps){if(1==we(e.shaderProps,"$dimensions")){var o=e.shaderProps.$dimensions;o.width=e.width,o.height=e.height}!0===we(e.shaderProps,"$alpha")&&(e.shaderProps.$alpha=e.alpha)}var i=this.curBufferIdx,a=(this.curRenderOp,{width:-1,height:-1});a.width=e.width,a.height=e.height;var s=e.shader||this.defaultShader;ge(void 0!==s.getUniformLocation,"Invalid WebGL shader"),!1===this.reuseRenderOp(e)&&(this.newRenderOp(s,e.shaderProps,e.alpha,a,e.clippingRect,i,e.rtt,e.parentHasRenderTexture,e.framebufferDimensions),ge(this.curRenderOp));var u=0,l=0,c=1,f=1;if(r.type===ke.subTexture){var p=r.props,d=p.x,h=p.y,m=p.width,g=p.height,v=r.parentTexture.dimensions||{width:0,height:0},y=v.width,b=void 0===y?0:y,x=v.height,w=void 0===x?0:x;c=(u=d/b)+m/b,f=(l=h/w)+g/w,r=r.parentTexture}if(r.type===ke.image&&null!==e.textureOptions&&void 0!==e.textureOptions.resizeMode&&null!==r.dimensions){var S=e.textureOptions.resizeMode,T=r.dimensions,k=T.width,C=T.height;if("cover"===S.type){var A=e.width/k,E=e.height/C,I=Math.max(A,E),M=1/I;if(I&&A&&A<I){var R,_=M*e.width;c=(u=(1-_/k)*(null!==(R=S.clipX)&&void 0!==R?R:.5))+_/k}if(I&&E&&E<I){var L,D=M*e.height;f=(l=(1-D/C)*(null!==(L=S.clipY)&&void 0!==L?L:.5))+D/C}}}var P=0;if(null!==e.textureOptions){if(!0===e.textureOptions.flipX){var O=[c,u];u=O[0],c=O[1]}P=+(e.textureOptions.flipY||!1)}if(P^+(r.type===ke.renderToTexture)){var N=[f,l];l=N[0],f=N[1]}var U=r.ctxTexture;ge(U instanceof gn);var B=this.addTexture(U,i);if(ge(null!==this.curRenderOp),e.renderCoords)t[i++]=e.renderCoords.x1,t[i++]=e.renderCoords.y1,t[i++]=u,t[i++]=l,n[i++]=e.colorTl,t[i++]=B,t[i++]=e.renderCoords.x2,t[i++]=e.renderCoords.y2,t[i++]=c,t[i++]=l,n[i++]=e.colorTr,t[i++]=B,t[i++]=e.renderCoords.x4,t[i++]=e.renderCoords.y4,t[i++]=u,t[i++]=f,n[i++]=e.colorBl,t[i++]=B,t[i++]=e.renderCoords.x3,t[i++]=e.renderCoords.y3,t[i++]=c,t[i++]=f,n[i++]=e.colorBr,t[i++]=B;else if(0!==e.tb||0!==e.tc)t[i++]=e.tx,t[i++]=e.ty,t[i++]=u,t[i++]=l,n[i++]=e.colorTl,t[i++]=B,t[i++]=e.tx+e.width*e.ta,t[i++]=e.ty+e.width*e.tc,t[i++]=c,t[i++]=l,n[i++]=e.colorTr,t[i++]=B,t[i++]=e.tx+e.height*e.tb,t[i++]=e.ty+e.height*e.td,t[i++]=u,t[i++]=f,n[i++]=e.colorBl,t[i++]=B,t[i++]=e.tx+e.width*e.ta+e.height*e.tb,t[i++]=e.ty+e.width*e.tc+e.height*e.td,t[i++]=c,t[i++]=f,n[i++]=e.colorBr,t[i++]=B;else{var j=e.tx+e.width*e.ta,F=e.ty+e.height*e.td;t[i++]=e.tx,t[i++]=e.ty,t[i++]=u,t[i++]=l,n[i++]=e.colorTl,t[i++]=B,t[i++]=j,t[i++]=e.ty,t[i++]=c,t[i++]=l,n[i++]=e.colorTr,t[i++]=B,t[i++]=e.tx,t[i++]=F,t[i++]=u,t[i++]=f,n[i++]=e.colorBl,t[i++]=B,t[i++]=j,t[i++]=F,t[i++]=c,t[i++]=f,n[i++]=e.colorBr,t[i++]=B}this.curRenderOp.length+=24,this.curRenderOp.numQuads++,this.curBufferIdx=i}},{key:"newRenderOp",value:function(e,t,n,r,o,i,a,s,u){var l=new fn(this.glw,this.options,this.quadBufferCollection,e,t,n,o,r,i,0,a,s,u);this.curRenderOp=l,this.renderOps.push(l)}},{key:"addTexture",value:function(e,t,n){var r=this.curRenderOp;ge(r);var o=r.addTexture(e);if(4294967295===o){if(n)throw new Error("Unable to add texture to render op");return this.newRenderOp(r.shader,r.shaderProps,r.alpha,r.dimensions,r.clippingRect,t),this.addTexture(e,t,!0)}return o}},{key:"reuseRenderOp",value:function(e){var t,n,r,o=e.shader,i=e.shaderProps,a=e.parentHasRenderTexture,s=e.rtt,u=e.clippingRect,l=o||this.defaultShader;return(null===(t=this.curRenderOp)||void 0===t?void 0:t.shader)===l&&(!1!=((n=this.curRenderOp.clippingRect)===(r=u)||null!==n&&null!==r&&n.x===r.x&&n.y===r.y&&n.width===r.width&&n.height===r.height)&&(void 0===a&&void 0===s&&(this.curRenderOp.shader===this.defaultShader||null!==i&&!1!==this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,i))))}},{key:"addRenderOp",value:function(e){this.renderOps.push(e),this.curRenderOp=null}},{key:"render",value:function(){var e=this.glw,t=this.quadBuffer,n=new Float32Array(t,0,this.curBufferIdx),r=this.quadBufferCollection.getBuffer("a_position")||null;e.arrayBufferData(r,n,e.STATIC_DRAW);for(var o=0,i=this.renderOps.length;o<i;o++)this.renderOps[o].draw();this.quadBufferUsage=this.curBufferIdx*n.BYTES_PER_ELEMENT;var a=6*n.BYTES_PER_ELEMENT*4;this.numQuadsRendered=this.quadBufferUsage/a}},{key:"getQuadCount",value:function(){return this.numQuadsRendered}},{key:"renderToTexture",value:function(e){for(var t=0;t<this.rttNodes.length;t++)if(this.rttNodes[t]===e)return;this.insertRTTNodeInOrder(e)}},{key:"insertRTTNodeInOrder",value:function(e){for(var t=this.rttNodes.length,n=e;n&&n.parent;){var r=this.rttNodes.indexOf(n.parent);if(-1!==r){t=r;break}n=n.parent}var o=this.findMaxChildRTTIndex(e);-1!==o&&(t=Math.max(t,o+1)),this.rttNodes.splice(t,0,e)}},{key:"findMaxChildRTTIndex",value:function(e){var t=this,n=-1,r=function(e){var o=t.rttNodes.indexOf(e);-1!==o&&(n=Math.max(n,o));var i,a=w(e.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;r(s)}}catch(u){a.e(u)}finally{a.f()}};return r(e),n}},{key:"renderRTTNodes",value:function(){for(var e=this.glw,t=(this.stage.txManager,0);t<this.rttNodes.length;t++){var n=this.rttNodes[t];if(void 0!==n&&!1!==n.hasRTTupdates&&(0!==n.worldAlpha&&(!0!==n.strictBounds||n.renderState!==$e.OutOfBounds)&&null!==n.texture&&"loaded"===n.texture.state)){this.activeRttNode=n,ge(n.texture,"RTT node missing texture");var r=n.texture.ctxTexture;ge(r instanceof xn),this.renderToTextureActive=!0,e.bindFramebuffer(r.framebuffer),e.viewport(0,0,r.w,r.h),e.clearColor(0,0,0,0),e.clear();for(var o=0;o<n.children.length;o++){var i=n.children[o];void 0!==i&&(this.stage.addQuads(i),i.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,n.hasRTTupdates=!1}}var a=this.clearColor.normalized;e.clearColor(a[0],a[1],a[2],a[3]),e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}},{key:"removeRTTNode",value:function(e){var t=this.rttNodes.indexOf(e);-1!==t&&this.rttNodes.splice(t,1)}},{key:"getBufferInfo",value:function(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}},{key:"getDefShaderCtr",value:function(){return this.defShaderCtrl}},{key:"updateClearColor",value:function(e){if(this.clearColor.raw!==e){var t=this.glw,n=Ie(e);t.clearColor(n[0],n[1],n[2],n[3]),this.clearColor={raw:e,normalized:n},t.clear()}}}])}(on),Sn=10,Tn=function(e){function t(e,n){var r;f(this,t),y(r=a(this,t),"data",void 0),y(r,"glyphMap",void 0),y(r,"kernings",void 0),r.data=e,r.glyphMap=n;var o=r.kernings={};return e.kernings.forEach(function(e){var t=e.second;(o[t]=o[t]||{})[e.first]=e.amount}),r.kernings=o,r}return l(t,e),d(t,[{key:"shapeText",value:n().m(function e(t,r){var o,i,a,s,u,l;return n().w(function(e){for(;;)switch(e.n){case 0:i=void 0;case 1:if(!(o=r.peek())||o.done){e.n=5;break}if(a=o.value,s=this.glyphMap.get(a),r.next(),void 0===s){e.n=3;break}return l=void 0!==i?((null===(u=this.kernings[s.id])||void 0===u?void 0:u[i])||0)+t.letterSpacing:0,i=s.id,e.n=2,{mapped:!0,glyphId:s.id,codepoint:a,cluster:r.lastIndex,xAdvance:s.xadvance+l,yAdvance:0,xOffset:s.xoffset+l,yOffset:s.yoffset,xBearing:0,yBearing:0,width:s.width,height:s.height};case 2:e.n=4;break;case 3:return a===Sn&&(i=void 0),e.n=4,{mapped:!1,codepoint:a,cluster:r.lastIndex};case 4:e.n=1;break;case 5:return e.a(2)}},e,this)})}])}(d(function e(){f(this,e)})),kn=function(e){function t(e,n){var r;f(this,t),y(r=a(this,t,[n]),"type",void 0),y(r,"texture",void 0),y(r,"maxCharHeight",0),y(r,"shaper",void 0),y(r,"glyphMap",new Map),y(r,"data",void 0);var o=n.atlasUrl,i=n.atlasDataUrl,s=n.stage;return r.type=e,ge(s.renderer instanceof wn,"SDF Font Faces can only be used with the WebGL Renderer"),r.texture=s.txManager.createTexture("ImageTexture",{src:o,premultiplyAlpha:!1}),s.txManager.loadTexture(r.texture,!0),r.texture.preventCleanup=!0,r.texture.on("loaded",function(){r.checkLoaded(),s.requestRender()}),ct(i).then(function(e){r.data=JSON.parse(e),ge(r.data);var t=0;if(r.data.chars.forEach(function(e){r.glyphMap.set(e.id,e);var n=e.yoffset+e.height;n>t&&(t=n)}),r.maxCharHeight=t,r.shaper=new Tn(r.data,r.glyphMap),!r.metrics){var n;if(null===(n=r.data)||void 0===n||!n.lightningMetrics)throw new Error("Font metrics not found in ".concat(r.type," font ").concat(r.fontFamily,". ")+"Make sure you are using the latest version of the Lightning 3 `msdf-generator` tool to generate your SDF fonts.");var o=r.data.lightningMetrics,i=o.ascender,a=o.descender,s=o.lineGap,u=o.unitsPerEm;r.metrics={ascender:i/u,descender:a/u,lineGap:s/u}}r.checkLoaded()}).catch(console.error),r}return l(t,e),d(t,[{key:"getAtlasEntry",value:function(e){var t=this.glyphMap.get(e);if(void 0===t)throw new Error("Glyph ".concat(e," not found in font ").concat(this.fontFamily));return{x:t.x,y:t.y,width:t.width,height:t.height}}},{key:"checkLoaded",value:function(){this.loaded||"loaded"===this.texture.state&&this.data&&(this.loaded=!0,this.emit("loaded"))}}])}(ln);var Cn=function(){return d(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),y(this,"iterator",void 0),y(this,"peekBuffer",[]),y(this,"_lastIndex",void 0),this.iterator=t,this.iterator=t,this._lastIndex=n-1,this.peekBuffer=[]},[{key:"next",value:function(){var e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}},{key:"peek",value:function(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var e=this.iterator.next();return this.peekBuffer.push(e),e}},{key:"lastIndex",get:function(){return this._lastIndex}}])}();function An(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n().m(function r(){var o,i;return n().w(function(n){for(;;)switch(n.n){case 0:o=t;case 1:if(!(o<e.length)){n.n=4;break}if(void 0!==(i=e.codePointAt(o))){n.n=2;break}throw new Error("Invalid Unicode code point");case 2:return n.n=3,i;case 3:o+=i<=65535?1:2,n.n=1;break;case 4:return n.a(2)}},r)})()}function En(e,t,n,r,o,i,a,s,u,l,c,f,p,d,h,m,g,v,y){ge(h,"Font face must be loaded"),ge(h.loaded,"Font face must be loaded"),ge(h.data,"Font face must be loaded"),ge(h.shaper,"Font face must be loaded");var b=s/h.data.info.size,x=u/b,S=i/b,T=l/b,k=p[e],C=(null==k?void 0:k.codepointIndex)||0,A=(null==k?void 0:k.maxX)||0,E=(null==k?void 0:k.maxY)||0,I=t,M=n,R=0,_={codepointIndex:-1,bufferOffset:-1,xStart:-1},L=h.shaper,D={letterSpacing:T};r.endsWith(" ")&&(r+=" ");for(var P,O=L.shapeText(D,new Cn(An(r,C),C)),N=-1,U=[],B=a/b,j=function(e,t,n){var r,o=0,i=w(n.shapeText(t,new Cn(An(e,0),0)));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.mapped&&8203!==a.codepoint&&(o+=a.xAdvance)}}catch(s){i.e(s)}finally{i.f()}return o}(v,D,L),F=!0;F;){for(var z=(0===y||e+1<y)&&("both"!==f||g||M+x+h.maxCharHeight<=B),G=z?S:S-j,V=0,H=M+h.maxCharHeight>=d.y1,q=M<=d.y2,X=H&&q;(P=O.next())&&!P.done;){var W=P.value;if(e===p.length)p.push({codepointIndex:W.cluster,maxY:E,maxX:A});else if(e>p.length)throw new Error("Unexpected lineCache length");if(32===W.codepoint||10===W.codepoint||8203===W.codepoint?-1!==_.codepointIndex&&(_.codepointIndex=-1,V=I):-1===_.codepointIndex&&(_.codepointIndex=W.cluster,_.bufferOffset=R,_.xStart=V),W.mapped){var K=I+W.xOffset+W.width;if("none"!==f&&K>=G&&-1!==_.codepointIndex&&_.xStart>0){if(z){O=L.shapeText(D,new Cn(An(r,_.codepointIndex),_.codepointIndex)),R=_.bufferOffset;break}O=L.shapeText(D,new Cn(An(v,0),0)),I=_.xStart,R=_.bufferOffset,f="none"}else{var $=I+W.xOffset,Y=M+W.yOffset;if(X){-1===N&&(N=R);var Q=h.getAtlasEntry(W.glyphId),J=Q.x/h.data.common.scaleW,Z=Q.y/h.data.common.scaleH,ee=Q.width/h.data.common.scaleW,te=Q.height/h.data.common.scaleH;c[R++]=$,c[R++]=Y,c[R++]=J,c[R++]=Z,c[R++]=$+W.width,c[R++]=Y,c[R++]=J+ee,c[R++]=Z,c[R++]=$,c[R++]=Y+W.height,c[R++]=J,c[R++]=Z+te,c[R++]=$+W.width,c[R++]=Y+W.height,c[R++]=J+ee,c[R++]=Z+te}E=Math.max(E,Y+W.height),A=Math.max(A,$+W.width),I+=W.xAdvance}}else if(10===W.codepoint){if(z)break;O=L.shapeText(D,new Cn(An(v,0),0)),f="none"}}-1!==N&&(U.push({bufferStart:N,bufferEnd:R}),N=-1),I=0,M+=x,e++,_.codepointIndex=-1,V=0,!m&&"both"===f&&M>d.y2||P&&P.done?F=!1:z||(F=!1)}if("center"===o)for(var ne="none"===f?A:S,re=0;re<U.length;re++)for(var oe=U[re],ie=(ne-(c[oe.bufferEnd-4]-c[oe.bufferStart]))/2,ae=oe.bufferStart;ae<oe.bufferEnd;ae+=4)c[ae]+=ie;else if("right"===o)for(var se="none"===f?A:S,ue=0;ue<U.length;ue++)for(var le=U[ue],ce=se-(le.bufferEnd===le.bufferStart?0:c[le.bufferEnd-4]-c[le.bufferStart]),fe=le.bufferStart;fe<le.bufferEnd;fe+=4)c[fe]+=ce;return ge(P),{bufferNumFloats:R,bufferNumQuads:R/16,layoutNumCharacters:P.done?r.length-C:P.value.cluster-C+1,fullyProcessed:!!P.done,maxX:A,maxY:E,numLines:p.length}}function In(e,t,n,r,o,i,a,s){var u,l,c,f=e.screen,p=e.sdf;if((c=a).x1<c.x2&&c.y1<c.y2){var d=a.x1-t,h=d+(a.x2-a.x1),m=a.y1-n+r,g=(u=m-i,l=o||1,Math.floor(u/l)*l),v=function(e,t){return Math.ceil(e/t)*t}(m+(a.y2-a.y1)+i,o||1);f.x1=d,f.y1=g,f.x2=h,f.y2=v,p.x1=d/s,p.y1=g/s,p.x2=h/s,p.y2=v/s,e.numLines=Math.ceil((v-g)/o),e.firstLineIdx=o?Math.floor(g/o):0}else f.x1=0,f.y1=0,f.x2=0,f.y2=0,p.x1=0,p.y1=0,p.x2=0,p.y2=0,e.numLines=0,e.firstLineIdx=0;e.valid=!0}function Mn(e,t){return t*(e.ascender-e.descender+e.lineGap)}var Rn={x:0,y:0,width:0,height:0},_n=function(t){function n(e){var t;return f(this,n),y(t=a(this,n,[e]),"ssdfFontFamilies",{}),y(t,"msdfFontFamilies",{}),y(t,"fontFamilyArray",[t.ssdfFontFamilies,t.msdfFontFamilies]),y(t,"sdfShader",void 0),y(t,"rendererBounds",void 0),y(t,"type","sdf"),t.sdfShader=t.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,t.rendererBounds={x1:0,y1:0,x2:t.stage.options.appWidth,y2:t.stage.options.appHeight},t}return l(n,t),d(n,[{key:"getPropertySetters",value:function(){var e=this;return{fontFamily:function(t,n){t.props.fontFamily=n,e.releaseFontFace(t),e.invalidateLayoutCache(t)},fontWeight:function(t,n){t.props.fontWeight=n,e.releaseFontFace(t),e.invalidateLayoutCache(t)},fontStyle:function(t,n){t.props.fontStyle=n,e.releaseFontFace(t),e.invalidateLayoutCache(t)},fontStretch:function(t,n){t.props.fontStretch=n,e.releaseFontFace(t),e.invalidateLayoutCache(t)},fontSize:function(t,n){t.props.fontSize=n,e.invalidateLayoutCache(t)},text:function(t,n){t.props.text=n,e.invalidateLayoutCache(t)},textAlign:function(t,n){t.props.textAlign=n,e.invalidateLayoutCache(t)},color:function(e,t){e.props.color=t},x:function(t,n){t.props.x=n,t.elementBounds.valid&&(e.setElementBoundsX(t),!t.renderWindow.valid&&De(t.elementBounds,e.rendererBounds)&&e.scheduleUpdateState(t))},y:function(t,n){t.props.y=n,t.elementBounds.valid&&(e.setElementBoundsY(t),!t.renderWindow.valid&&De(t.elementBounds,e.rendererBounds)&&e.scheduleUpdateState(t))},contain:function(t,n){t.props.contain=n,e.invalidateLayoutCache(t)},width:function(t,n){t.props.width=n,"none"!==t.props.contain&&e.invalidateLayoutCache(t)},height:function(t,n){t.props.height=n,"both"===t.props.contain&&e.invalidateLayoutCache(t)},offsetY:function(t,n){t.props.offsetY=n,e.invalidateLayoutCache(t)},scrollable:function(t,n){t.props.scrollable=n,e.invalidateLayoutCache(t)},scrollY:function(t,n){t.props.scrollY=n,e.scheduleUpdateState(t)},letterSpacing:function(t,n){t.props.letterSpacing=n,e.invalidateLayoutCache(t)},lineHeight:function(t,n){t.props.lineHeight=n,t.resLineHeight=void 0,e.invalidateLayoutCache(t)},maxLines:function(t,n){t.props.maxLines=n,e.invalidateLayoutCache(t)},textBaseline:function(t,n){t.props.textBaseline=n,e.invalidateLayoutCache(t)},verticalAlign:function(t,n){t.props.verticalAlign=n,e.invalidateLayoutCache(t)},overflowSuffix:function(t,n){t.props.overflowSuffix=n,e.invalidateLayoutCache(t)},debug:function(e,t){e.props.debug=t}}}},{key:"canRenderFont",value:function(e){var t=e.fontFamily;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}},{key:"isFontFaceSupported",value:function(e){return e instanceof kn}},{key:"addFontFace",value:function(e){ge(e instanceof kn);var t=e.fontFamily,n="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(n){var r=n[t];r||(r=new Set,n[t]=r),r.add(e)}else console.warn("Invalid font face type: ".concat(e.type))}},{key:"createState",value:function(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new Ce,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}},{key:"updateState",value:function(e){var t=this,n=e.trFontFace,r=e.textH,o=e.lineCache,i=e.debugData,a=e.forceFullLayoutCalc;if(i.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),void 0===n){if(n=this.resolveFontFace(e.props),e.trFontFace=n,void 0===n){var s="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");return console.error(s),void this.setStatus(e,"failed",new Error(s))}n.texture.setRenderableOwner(e,!0)}if(!1!==n.loaded){ge(n.data,"Font face data should be loaded"),ge(n.metrics,"Font face metrics should be loaded");var u=e.props,l=u.text,c=u.fontSize,f=u.x,p=u.y,d=u.contain,h=u.width,m=u.height,g=u.verticalAlign,v=u.scrollable,y=u.overflowSuffix,b=u.maxLines,x="both"===d&&v?e.props.scrollY:0,w=e.renderWindow,S=n.data.info.size,T=c/S,k=e.resLineHeight;if(void 0===k){var C=e.props.lineHeight;k=void 0===C?Mn(n.metrics,c):C,e.resLineHeight=k}var A=k/T;e.distanceRange=T*n.data.distanceField.distanceRange;var E=24*l.length,I=e.vertexBuffer;(!I||I.length<E)&&(I=new Float32Array(2*E));var M=e.elementBounds;if(M.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),M.valid=!0),!a&&w.valid){var R=w.screen;if(f+R.x1<=M.x1&&f+R.x2>=M.x2&&p-x+R.y1<=M.y1&&p-x+R.y2>=M.y2)return void this.setStatus(e,"loaded");w.valid=!1,this.setStatus(e,"loading")}var _=e.props,L=_.offsetY,D=_.textAlign;if(!w.valid){if(!De(M,this.rendererBounds))return;In(w,f,p,x,k,"both"===d?M.y2-M.y1:0,M,T)}var P=function(e,t,n,r,o,i,a,s,u){var l=Math.min(Math.max(a.firstLineIdx,0),s.length),c=n.metrics;ge(c,"Font metrics not loaded"),ge(n.data,"Font data not loaded");var f=(c.ascender-c.descender)*e,p=0;"middle"===r?p=(t-f)/2:"bottom"===r&&(p=t-f);var d=o/i,h=n.data.common.base,m=d+(c.ascender*e-h)+l*t+p;if(!(u&&m>=u/i))return{sdfX:0,sdfY:m,lineIndex:l}}(S,A,n,g,L,T,w,o,r);if(P){var O=e.props.letterSpacing,N=En(P.lineIndex,P.sdfX,P.sdfY,l,D,h,m,c,k,O,I,d,o,w.sdf,n,a,v,y,b);e.bufferUploaded=!1,e.bufferNumFloats=N.bufferNumFloats,e.bufferNumQuads=N.bufferNumQuads,e.vertexBuffer=I,e.renderWindow=w,i.lastLayoutNumCharacters=N.layoutNumCharacters,i.bufferSize=I.byteLength,N.fullyProcessed&&(e.textW=N.maxX*T,e.textH=N.numLines*A*T),this.setStatus(e,"loaded")}else this.setStatus(e,"loaded")}else n.once("loaded",function(){t.scheduleUpdateState(e)})}},{key:"renderQuads",value:function(e,t,n,r,o,i){var a,s;if(e.vertexBuffer){var u=this.stage.renderer;ge(u instanceof wn);var l,c,f=e.props,p=f.fontSize,d=f.color,h=f.contain,m=f.scrollable,g=f.zIndex,v=f.debug,y="both"===h&&m?e.props.scrollY:0,b=e.textW,x=void 0===b?0:b,w=e.textH,S=void 0===w?0:w,T=e.distanceRange,k=e.vertexBuffer,C=e.bufferUploaded,A=e.trFontFace,E=e.elementBounds,I=e.webGlBuffers;if(!I){var M=u.glw,R=4*Float32Array.BYTES_PER_ELEMENT,_=M.createBuffer();ge(_),e.webGlBuffers=new yn([{buffer:_,attributes:{a_position:{name:"a_position",size:2,type:M.FLOAT,normalized:!1,stride:R,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:M.FLOAT,normalized:!1,stride:R,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,ge(e.webGlBuffers),I=e.webGlBuffers}if(!C){var L,D,P=u.glw,O=null!==(L=null===(D=I)||void 0===D?void 0:D.getBuffer("a_textureCoordinate"))&&void 0!==L?L:null;P.arrayBufferData(O,k,P.STATIC_DRAW),e.bufferUploaded=!0}if(ge(A),m&&"both"===h){ge(E.valid);var N=(l=E,(c=Rn)?(c.x=l.x1,c.y=l.y1,c.width=l.x2-l.x1,c.height=l.y2-l.y1,c):{x:l.x1,y:l.y1,width:l.x2-l.x1,height:l.y2-l.y1});n.valid?(e.clippingRect.valid=!0,n=Pe(n,N,e.clippingRect)):(e.clippingRect.valid=!0,n=Oe(N,e.clippingRect))}var U=new fn(u.glw,u.options,I,this.sdfShader,{transform:t.getFloatArr(),color:ye(d,r),size:p/((null===(a=A.data)||void 0===a?void 0:a.info.size)||0),scrollY:y,distanceRange:T,debug:v.sdfShaderDebug},r,n,{height:S,width:x},0,g,!1,o,i),B=null===(s=e.trFontFace)||void 0===s?void 0:s.texture;ge(B);var j=B.ctxTexture;U.addTexture(j),U.length=e.bufferNumFloats,U.numQuads=e.bufferNumQuads,u.addRenderOp(U)}}},{key:"setIsRenderable",value:function(t,r){var o;e(n,"setIsRenderable",this,3)([t,r]),null===(o=t.trFontFace)||void 0===o||o.texture.setRenderableOwner(t,r)}},{key:"destroyState",value:function(t){var r;e(n,"destroyState",this,3)([t]),null===(r=t.trFontFace)||void 0===r||r.texture.setRenderableOwner(t,!1)}},{key:"resolveFontFace",value:function(e){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,e,"sdf")}},{key:"releaseFontFace",value:function(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}},{key:"invalidateLayoutCache",value:function(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"setElementBoundsX",value:function(e){var t=e.props,n=t.x,r=t.contain,o=t.width,i=e.elementBounds;i.x1=n,i.x2="none"!==r?n+o:1/0}},{key:"setElementBoundsY",value:function(e){var t=e.props,n=t.y,r=t.contain,o=t.height,i=e.elementBounds;i.y1=n,i.y2="both"===r?n+o:1/0}}])}(en);function Ln(e){return""===e||"​"===e}function Dn(e,t,n,r,o){return n*(r-1)+("bottom"!==e?.5*t:0)+Math.max(n,t)+(o||0)}var Pn=function(){return d(function e(t,n){f(this,e),y(this,"_canvas",void 0),y(this,"_context",void 0),y(this,"_settings",void 0),this._canvas=t,this._context=n,this._settings=this.mergeDefaults({})},[{key:"settings",get:function(){return this._settings},set:function(e){this._settings=this.mergeDefaults(e)}},{key:"getPrecision",value:function(){return this._settings.precision}},{key:"setFontProperties",value:function(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}},{key:"_getFontSetting",value:function(){for(var e=[this._settings.fontFamily],t=[],n=0,r=e.length;n<r;n++)"serif"===e[n]||"sans-serif"===e[n]?t.push(e[n]):t.push('"'.concat(e[n],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(t.join(","))}},{key:"_load",value:function(){var e=this;if(document.fonts){var t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(function(e){console.warn("[Lightning] Font load error",e,t)}).then(function(){document.fonts.check(t,e._settings.text)||console.warn("[Lightning] Font not found",t)})}catch(n){console.warn("[Lightning] Can't check font loading for "+t)}}}},{key:"calculateRenderInfo",value:function(){var e={},t=this.getPrecision(),n=this._settings.paddingLeft*t,r=this._settings.paddingRight*t,o=this._settings.fontSize*t,i=null===this._settings.offsetY?null:this._settings.offsetY*t,a=this._settings.w*t,s=this._settings.h*t,u=this._settings.wordWrapWidth*t,l=this._settings.cutSx*t,c=this._settings.cutEx*t,f=this._settings.cutSy*t,p=this._settings.cutEy*t,d=(this._settings.letterSpacing||0)*t,h=this._settings.textIndent*t,m=this._settings.trFontFace;this.setFontProperties(),ge(m);var g,v=function(e,t,n){if(t.metrics)return t.metrics;var r,o=e.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");return console.warn("Font metrics not provided for Canvas Web font ".concat(t.fontFamily,". ")+"Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 `msdf-generator` tool to extract the default metrics for the font and provide them in the Canvas Web font definition."),r=o.actualBoundingBoxDescent&&o.actualBoundingBoxAscent?{ascender:o.actualBoundingBoxAscent/n,descender:-o.actualBoundingBoxDescent/n,lineGap:.2}:{ascender:.8,descender:-.2,lineGap:.2},t.metrics=r,r}(this._context,m,o),y=Mn(v,o)*t,b=null!==this._settings.lineHeight?this._settings.lineHeight*t:y,x=this._settings.maxHeight,w=null!==x&&b>0?Math.floor(x/b):0,S=this._settings.maxLines,T=w>0&&S>0?Math.min(w,S):Math.max(w,S),k=a||2048/this.getPrecision(),C=k-n;if(C<10&&(k+=10-C,C=10),u||(u=C),this._settings.textOverflow&&!this._settings.wordWrap){var A;switch(this._settings.textOverflow){case"clip":A="";break;case"ellipsis":A=this._settings.overflowSuffix;break;default:A=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-h,A)}if(this._settings.wordWrap)g=this.wrapText(this._settings.text,u,d,h);else for(var E=(g={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]}).l.length,I=0;I<E-1;I++)g.n.push(I);var M=g.l;if(T&&M.length>T){var R,_=M.slice(0,T),L=null;if(this._settings.overflowSuffix){var D=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,P=this.wrapText(_[_.length-1],u-D,d,h);_[_.length-1]="".concat(P.l[0]).concat(this._settings.overflowSuffix),L=[P.l.length>1?P.l[1]:""]}else L=[""];var O=M.length,N=0,U=g.n.length;for(R=T;R<O;R++)L[N]+="".concat(L[N]?" ":"").concat(M[R]),R+1<U&&g.n[R+1]&&N++;e.remainingText=L.join("\n"),e.moreTextLines=!0,M=_}else e.moreTextLines=!1,e.remainingText="";for(var B,j=0,F=[],z=0;z<M.length;z++){var G=this.measureText(M[z],d)+(0===z?h:0);F.push(G),j=Math.max(j,G)}return e.lineWidths=F,a||(k=j+n+r,C=j),this._settings.wordWrap&&a>j&&"left"===this._settings.textAlign&&1===M.length&&(k=j+n+r),B=s||Dn(this._settings.textBaseline,o,b,M.length,i),null===i&&(i=o),e.w=k,e.h=B,e.lines=M,e.precision=t,k||(k=1),B||(B=1),(l||c)&&(k=Math.min(k,c-l)),(f||p)&&(B=Math.min(B,p-f)),e.width=k,e.innerWidth=C,e.height=B,e.fontSize=o,e.cutSx=l,e.cutSy=f,e.cutEx=c,e.cutEy=p,e.lineHeight=b,e.defLineHeight=y,e.lineWidths=F,e.offsetY=i,e.paddingLeft=n,e.paddingRight=r,e.letterSpacing=d,e.textIndent=h,e.metrics=v,e}},{key:"draw",value:function(e,t){var n,r,o=this.getPrecision(),i=(null==t?void 0:t.lines)||e.lines,a=(null==t?void 0:t.lineWidths)||e.lineWidths,s=t?Dn(this._settings.textBaseline,e.fontSize,e.lineHeight,t.lines.length,null===this._settings.offsetY?null:this._settings.offsetY*o):e.height;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(s),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);for(var u=[],l=e.metrics,c=l?l.ascender*e.fontSize:e.fontSize,f=(l.ascender-l.descender)*e.fontSize,p=0,d=i.length;p<d;p++)n=0===p?e.textIndent:0,r=p*e.lineHeight+c,"middle"==this._settings.verticalAlign?r+=(e.lineHeight-f)/2:"bottom"==this._settings.verticalAlign&&(r+=e.lineHeight-f),"right"===this._settings.textAlign?n+=e.innerWidth-a[p]:"center"===this._settings.textAlign&&(n+=(e.innerWidth-a[p])/2),n+=e.paddingLeft,u.push({text:i[p],x:n,y:r,w:a[p]});if(this._settings.highlight){var h=this._settings.highlightColor,m=this._settings.highlightHeight*o||1.5*e.fontSize,g=this._settings.highlightOffset*o,v=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*o:e.paddingLeft,y=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*o:e.paddingRight;this._context.fillStyle=_e(h);for(var b=0;b<u.length;b++){var x=u[b];this._context.fillRect(x.x-v,x.y-e.offsetY+g,x.w+y+v,m)}}var w=null;this._settings.shadow&&(w=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=_e(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*o,this._context.shadowOffsetY=this._settings.shadowOffsetY*o,this._context.shadowBlur=this._settings.shadowBlur*o),this._context.fillStyle=_e(this._settings.textColor);for(var S=0,T=u.length;S<T;S++){var k=u[S];if(0===e.letterSpacing)this._context.fillText(k.text,k.x,k.y);else for(var C=k.text.split(""),A=k.x,E=0,I=C.length;E<I;E++)this._context.fillText(C[E],A,k.y),A+=this.measureText(C[E],e.letterSpacing)}w&&(this._context.shadowColor=w[0],this._context.shadowOffsetX=w[1],this._context.shadowOffsetY=w[2],this._context.shadowBlur=w[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy)}},{key:"wrapWord",value:function(e,t,n){var r=this._context.measureText(n).width,o=e.length,i=this._context.measureText(e).width;if(i<=t)return e;var a=Math.floor(t*o/i),s=this._context.measureText(e.substring(0,a)).width+r;if(s>t)for(;a>0&&(s=this._context.measureText(e.substring(0,a)).width+r)>t;)a-=1;else for(;a<o;){if(!((s=this._context.measureText(e.substring(0,a)).width+r)<t)){a-=1;break}a+=1}return e.substring(0,a)+(t>=r?n:"")}},{key:"wrapText",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=/ |\u200B/g,i=e.split(/\r?\n/g),a=[],s=[],u=0;u<i.length;u++){for(var l=[],c="",f=t-r,p=i[u].split(o),d=i[u].match(o)||[],h=0;h<p.length;h++){var m=d[h-1]||"",g=p[h],v=this.measureText(g,n),y=Ln(m)?v:v+this.measureText(m,n);0===h||y>f?(h>0&&(l.push(c),c=""),c+=g,f=t-v-(0===h?r:0)):(f-=y,c+=m+g)}l.push(c),c="",a=a.concat(l),u<i.length-1&&s.push(a.length)}return{l:a,n:s}}},{key:"measureText",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n?e.split("").reduce(function(e,r){return Ln(r)?e:e+t._context.measureText(r).width+n},0):this._context.measureText(e).width}},{key:"mergeDefaults",value:function(e){return g({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},e)}}])}(),On="undefined"==typeof self?globalThis:self,Nn=(null===(u=On.document)||void 0===u?void 0:u.fonts)||On.fonts;var Un=function(t){function n(e){var t;f(this,n),y(t=a(this,n,[e]),"canvas",void 0),y(t,"context",void 0),y(t,"fontFamilies",{}),y(t,"fontFamilyArray",[t.fontFamilies]),y(t,"type","canvas"),y(t,"loadFont",function(e){var n,r,o,i,a,s,u=(n=e.props,r=n.fontFamily,o=n.fontStyle,i=n.fontWeight,a=n.fontStretch,s=n.fontSize,[o,i,a,"".concat(s,"px"),r].join(" ")),l=t.stage.fontManager.resolveFontFace(t.fontFamilyArray,e.props,"canvas");ge(l,"Could not resolve font face for ".concat(u)),e.fontInfo={fontFace:l,cssString:u,loaded:!1},e.fontInfo.loaded||Nn.load(u).then(t.onFontLoaded.bind(t,e,u)).catch(t.onFontLoadError.bind(t,e,u))}),"undefined"!=typeof OffscreenCanvas?t.canvas=new OffscreenCanvas(0,0):t.canvas=document.createElement("canvas");var r=t.canvas.getContext("2d",{willReadFrequently:!0});return r||(t.canvas=document.createElement("canvas"),r=t.canvas.getContext("2d",{willReadFrequently:!0})),ge(r),t.context=r,t.addFontFace(new cn({fontFamily:"sans-serif",descriptors:{},fontUrl:""})),t}return l(n,t),d(n,[{key:"getPropertySetters",value:function(){var e=this;return{fontFamily:function(t,n){t.props.fontFamily=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontWeight:function(t,n){t.props.fontWeight=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontStyle:function(t,n){t.props.fontStyle=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontStretch:function(t,n){t.props.fontStretch=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontSize:function(t,n){t.props.fontSize=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},text:function(t,n){t.props.text=n,e.invalidateLayoutCache(t)},textAlign:function(t,n){t.props.textAlign=n,e.invalidateLayoutCache(t)},color:function(t,n){t.props.color=n,e.invalidateLayoutCache(t)},x:function(e,t){e.props.x=t},y:function(e,t){e.props.y=t},contain:function(t,n){t.props.contain=n,e.invalidateLayoutCache(t)},width:function(t,n){t.props.width=n,"none"!==t.props.contain&&e.invalidateLayoutCache(t)},height:function(t,n){t.props.height=n,"both"===t.props.contain&&e.invalidateLayoutCache(t)},offsetY:function(t,n){t.props.offsetY=n,e.invalidateLayoutCache(t)},scrollY:function(e,t){e.props.scrollY=t},letterSpacing:function(t,n){t.props.letterSpacing=n,e.invalidateLayoutCache(t)},lineHeight:function(t,n){t.props.lineHeight=n,e.invalidateLayoutCache(t)},maxLines:function(t,n){t.props.maxLines=n,e.invalidateLayoutCache(t)},textBaseline:function(t,n){t.props.textBaseline=n,e.invalidateLayoutCache(t)},verticalAlign:function(t,n){t.props.verticalAlign=n,e.invalidateLayoutCache(t)},overflowSuffix:function(t,n){t.props.overflowSuffix=n,e.invalidateLayoutCache(t)}}}},{key:"canRenderFont",value:function(e){return!0}},{key:"isFontFaceSupported",value:function(e){return e instanceof cn}},{key:"addFontFace",value:function(e){ge(e instanceof cn);var t=e.fontFamily;"sans-serif"!==t&&Nn.add(e.fontFace);var n=this.fontFamilies[t];n||(n=new Set,this.fontFamilies[t]=n),n.add(e)}},{key:"createState",value:function(e,t){return{node:t,props:e,status:"initialState",updateScheduled:!1,emitter:new Ce,textureNode:void 0,lightning2TextRenderer:new Pn(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}},{key:"updateState",value:function(e){if("initialState"===e.status&&this.setStatus(e,"loading"),"loaded"!==e.status)return e.fontInfo?void(e.fontInfo.loaded&&(e.renderInfo||(e.renderInfo=this.calculateRenderInfo(e),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,this.renderSingleCanvasPage(e)))):this.loadFont(e)}},{key:"renderSingleCanvasPage",value:function(e){ge(e.renderInfo);var t=e.node,n=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:function(e,t){return ge(t),e.draw(t,{lines:t.lines,lineWidths:t.lineWidths}),0===this.canvas.width||0===this.canvas.height?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}.bind(this,e.lightning2TextRenderer,e.renderInfo)});if(e.textureNode)e.textureNode.texture=n,e.textureNode.alpha=Re(e.props.color);else{var r=this.stage.createNode({parent:t,texture:n,autosize:!0,alpha:Re(e.props.color)});e.textureNode=r}this.setStatus(e,"loaded")}},{key:"calculateRenderInfo",value:function(e){var t,n;return e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:null===(t=e.fontInfo)||void 0===t?void 0:t.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Ie(e.props.color),offsetY:e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:null!==(n=e.props.lineHeight)&&void 0!==n?n:null,maxLines:e.props.maxLines,maxHeight:"both"===e.props.contain?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:"none"!==e.props.contain?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.renderInfo}},{key:"renderQuads",value:function(){}},{key:"destroyState",value:function(t){"destroyed"!==t.status&&(e(n,"destroyState",this,3)([t]),t.textureNode&&(t.textureNode.destroy(),delete t.textureNode),delete t.renderInfo)}},{key:"invalidateLayoutCache",value:function(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"onFontLoaded",value:function(e,t){var n;t===(null===(n=e.fontInfo)||void 0===n?void 0:n.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}},{key:"onFontLoadError",value:function(e,t,n){var r;t===(null===(r=e.fontInfo)||void 0===r?void 0:r.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),n),this.scheduleUpdateState(e))}}])}(en),Bn={isWhite:!0,a:1,r:255,g:255,b:255};function jn(e){return 4294967295===e?Bn:{isWhite:!1,a:(e>>>24&255)/255,r:255&e,g:255&e>>>8,b:255&e>>>16}}function Fn(e){return 4294967295===e?Bn:{isWhite:!1,r:e>>>24&255,g:255&e>>>16,b:255&e>>>8,a:(255&e)/255}}function zn(e){var t=e.a,n=e.r,r=e.g,o=e.b;return"rgba(".concat(n,",").concat(r,",").concat(o,",").concat(t,")")}var Gn=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=a(this,t,[].concat(r)),"image",void 0),y(e,"tintCache",void 0),e}return l(t,e),d(t,[{key:"load",value:function(){var e=this;this.textureSource.setState("loading"),this.onLoadRequest().then(function(t){e.textureSource.setState("loaded",t),e.textureSource.freeTextureData(),e.updateMemSize()}).catch(function(t){e.textureSource.setState("failed",t),e.textureSource.freeTextureData()})}},{key:"free",value:function(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}},{key:"updateMemSize",value:function(){var e=this.tintCache?8:4;if(this.textureSource.dimensions){var t=this.textureSource.dimensions,n=t.width,r=t.height;this.setTextureMemUse(n*r*e)}}},{key:"hasImage",value:function(){return void 0!==this.image}},{key:"getImage",value:function(e){var t,n=this.image;if(ge(n,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),n;var r=zn(e);if((null===(t=this.tintCache)||void 0===t?void 0:t.key)===r)return this.tintCache.image;var o=this.tintTexture(n,r);return this.tintCache={key:r,image:o},this.updateMemSize(),o}},{key:"tintTexture",value:function(e,t){var n=e.width,r=e.height,o=document.createElement("canvas");o.width=n,o.height=r;var i=o.getContext("2d");return i&&(i.fillStyle=t,i.globalCompositeOperation="copy",i.fillRect(0,0,n,r),i.globalCompositeOperation="multiply",i.drawImage(e,0,0,n,r,0,0,n,r),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0,n,r,0,0,n,r)),o}},{key:"onLoadRequest",value:(r=i(n().m(function e(){var t,r,o,i;return n().w(function(e){for(;;)switch(e.n){case 0:if(ge(null===(t=this.textureSource)||void 0===t||null===(t=t.textureData)||void 0===t?void 0:t.data,"Texture data is null"),!((r=this.textureSource.textureData.data)instanceof ImageData)){e.n=1;break}return(o=document.createElement("canvas")).width=r.width,o.height=r.height,(i=o.getContext("2d"))&&i.putImageData(r,0,0),this.image=o,e.a(2,{width:r.width,height:r.height});case 1:if(!("undefined"!=typeof ImageBitmap&&r instanceof ImageBitmap||r instanceof HTMLImageElement)){e.n=2;break}return this.image=r,e.a(2,{width:r.width,height:r.height});case 2:return e.a(2,{width:0,height:0})}},e,this)})),function(){return r.apply(this,arguments)})}]);var r}(rn);function Vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.shader instanceof $t&&"DynamicShader"===e.shader.shType){var n,r=null===(n=e.shaderProps)||void 0===n?void 0:n.effects;if(r&&r.length){var o=r.find(function(e){return e.type==="border".concat(t)&&e.props&&e.props.width});return o&&o.props}}}function Hn(e,t,n,r,o){if(Object.getPrototypeOf(this).roundRect)this.roundRect(e,t,n,r,o);else{var i="number"==typeof o?{topLeft:o,topRight:o,bottomRight:o,bottomLeft:o}:g({topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},o);!function(e){var t=Math.min(n/2,r/2),o=e.topLeft+e.topRight+e.bottomRight+e.bottomLeft;if(o>n||o>r){var i=t/Math.max(e.topLeft,e.topRight,e.bottomRight,e.bottomLeft);e.topLeft*=i,e.topRight*=i,e.bottomRight*=i,e.bottomLeft*=i}}(i),this.moveTo(e+i.topLeft,t),this.lineTo(e+n-i.topRight,t),this.ellipse(e+n-i.topRight,t+i.topRight,i.topRight,i.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(e+n,t+r-i.bottomRight),this.ellipse(e+n-i.bottomRight,t+r-i.bottomRight,i.bottomRight,i.bottomRight,0,0,.5*Math.PI),this.lineTo(e+i.bottomLeft,t+r),this.ellipse(e+i.bottomLeft,t+r-i.bottomLeft,i.bottomLeft,i.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(e,t+i.topLeft),this.ellipse(e+i.topLeft,t+i.topLeft,i.topLeft,i.topLeft,0,Math.PI,1.5*Math.PI)}}function qn(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;if(i){var s,u,l=0,c=0;switch(arguments.length>7?arguments[7]:void 0){case"Top":s=t,l=n,u=r+t,c=n;break;case"Right":s=t+r,l=n,u=t+r,c=n+o;break;case"Bottom":s=t,l=n+o,u=t+r,c=n+o;break;case"Left":s=t,l=n,u=t,c=n+o}e.beginPath(),e.lineWidth=i,e.strokeStyle=zn(Fn(null!=a?a:0)),e.moveTo(s,l),e.lineTo(u,c),e.stroke()}}var Xn=function(e){function t(e){var n;f(this,t),y(n=a(this,t,[e]),"context",void 0),y(n,"canvas",void 0),y(n,"pixelRatio",void 0),y(n,"clearColor",void 0),y(n,"renderToTextureActive",!1),y(n,"activeRttNode",null),y(n,"defShaderCtr",void 0),n.mode="canvas",n.shManager.renderer=n;var r=e.canvas,o=e.pixelRatio,i=e.clearColor;return n.canvas=r,n.context=r.getContext("2d"),n.pixelRatio=o,n.clearColor=i?Me(i):void 0,n.defShaderCtr={type:"DefaultShader",props:{},shader:new $t("DefaultShader"),getResolvedProps:function(){return function(){return{}}}},n}return l(t,e),d(t,[{key:"reset",value:function(){this.canvas.width=this.canvas.width;var e=this.context;if(this.clearColor){var t=v(this.clearColor,4),n=t[0],r=t[1],o=t[2],i=t[3];e.fillStyle="rgba(".concat(n,", ").concat(r,", ").concat(o,", ").concat(i/255,")"),e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}},{key:"render",value:function(){}},{key:"addQuad",value:function(e){var t,n,r=this.context,o=e.tx,i=e.ty,a=e.width,s=e.height,u=e.alpha,l=e.colorTl,c=e.colorTr,f=e.colorBr,p=e.ta,d=e.tb,h=e.tc,m=e.td,g=e.clippingRect,v=e.texture,y=void 0,b=null===(t=v)||void 0===t?void 0:t.type;if(ge(b,"Texture type is not defined"),b===ke.image||b===ke.color||b===ke.subTexture||b===ke.noise){if(v){if(v instanceof dt&&(n=v.props,v=v.parentTexture),y=v.ctxTexture,"freed"===v.state)return;if("loaded"!==v.state)return}var x=jn(l),w=1!==p,S=0!==g.width&&0!==g.height,T=l!==c||l!==f,k=Boolean(e.shader),C=k?function(e){if(e.shader instanceof $t){var t,n,r=e.shader.shType;if("RoundedRectangle"===r)return null!==(t=null===(n=e.shaderProps)||void 0===n?void 0:n.radius)&&void 0!==t?t:0;if("DynamicShader"===r){var o,i=null===(o=e.shaderProps)||void 0===o?void 0:o.effects;if(i){var a=i.find(function(e){var t;return"radius"===e.type&&(null==e||null===(t=e.props)||void 0===t?void 0:t.radius)});return a&&"radius"===a.type&&a.props.radius||0}}}return 0}(e):0,A=k?Vn(e):void 0;if((w||S||C)&&r.save(),S){var E=new Path2D,I=g.x,M=g.y,R=g.width,_=g.height;E.rect(I,M,R,_),r.clip(E)}if(w){var L=this.pixelRatio;r.setTransform(p,h,d,m,o*L,i*L),r.scale(L,L),r.translate(-o,-i)}if(C){var D=new Path2D;Hn.call(D,o,i,a,s,C),r.clip(D)}if(b!==ke.image&&b!==ke.subTexture&&b!==ke.noise||!y)if(b===ke.color&&T){var P,O=o,N=i;l===c?(O=o,N=i+s,P=jn(f)):(O=o+a,N=i,P=jn(c));var U=r.createLinearGradient(o,i,O,N);U.addColorStop(0,zn(x)),U.addColorStop(1,zn(P)),r.fillStyle=U,r.fillRect(o,i,a,s)}else b===ke.color&&(r.fillStyle=zn(x),r.fillRect(o,i,a,s));else{var B,j=y.getImage(x);if(r.globalAlpha=null!==(B=x.a)&&void 0!==B?B:u,n)r.drawImage(j,n.x,n.y,n.width,n.height,o,i,a,s);else try{r.drawImage(j,o,i,a,s)}catch(K){}r.globalAlpha=1}if(A&&A.width){var F,z=A.width,G=A.width/2,V=zn(Fn(null!==(F=A.color)&&void 0!==F?F:0));r.beginPath(),r.lineWidth=z,r.strokeStyle=V,r.globalAlpha=u,C?(Hn.call(r,o+G,i+G,a-z,s-z,C),r.stroke()):r.strokeRect(o+G,i+G,a-z,s-z),r.globalAlpha=1}else if(k){var H=Vn(e,"Top"),q=Vn(e,"Right"),X=Vn(e,"Bottom"),W=Vn(e,"Left");H&&qn(r,o,i,a,s,H.width,H.color,"Top"),q&&qn(r,o,i,a,s,q.width,q.color,"Right"),X&&qn(r,o,i,a,s,X.width,X.color,"Bottom"),W&&qn(r,o,i,a,s,W.width,W.color,"Left")}(w||S||C)&&r.restore()}}},{key:"createCtxTexture",value:function(e){return new Gn(this.txMemManager,e)}},{key:"getShaderManager",value:function(){return this.shManager}},{key:"getDefShaderCtr",value:function(){return this.defShaderCtr}},{key:"renderRTTNodes",value:function(){}},{key:"removeRTTNode",value:function(e){}},{key:"renderToTexture",value:function(e){}},{key:"getBufferInfo",value:function(){return null}},{key:"getQuadCount",value:function(){return null}},{key:"updateClearColor",value:function(e){this.clearColor=e?Me(e):void 0}}])}(on),Wn={alpha:function(e){return 1===e?null:{prop:"opacity",value:"".concat(e)}},x:function(e){return{prop:"left",value:"".concat(e,"px")}},y:function(e){return{prop:"top",value:"".concat(e,"px")}},width:function(e){return 0===e?null:{prop:"width",value:"".concat(e,"px")}},height:function(e){return 0===e?null:{prop:"height",value:"".concat(e,"px")}},fontSize:function(e){return 0===e?null:{prop:"font-size",value:"".concat(e,"px")}},lineHeight:function(e){return 0===e?null:{prop:"line-height",value:"".concat(e,"px")}},zIndex:function(){return"z-index"},fontFamily:function(){return"font-family"},fontStyle:function(){return"font-style"},fontWeight:function(){return"font-weight"},fontStretch:function(){return"font-stretch"},letterSpacing:function(){return"letter-spacing"},textAlign:function(){return"text-align"},overflowSuffix:function(){return"overflow-suffix"},maxLines:function(){return"max-lines"},contain:function(){return"contain"},verticalAlign:function(){return"vertical-align"},clipping:function(e){return!1===e?null:{prop:"overflow",value:e?"hidden":"visible"}},rotation:function(e){return 0===e?null:{prop:"transform",value:"rotate(".concat(e,"rad)")}},scale:function(e){return 1===e?null:{prop:"transform",value:"scale(".concat(e,")")}},scaleX:function(e){return 1===e?null:{prop:"transform",value:"scaleX(".concat(e,")")}},scaleY:function(e){return 1===e?null:{prop:"transform",value:"scaleY(".concat(e,")")}},color:function(e){return 0===e?null:{prop:"color",value:Kn(e)}}},Kn=function(e){var t=(255&e)/255,n=e>>8&255,r=e>>16&255;return"rgba(".concat(e>>24&255,",").concat(r,",").concat(n,",").concat(t,")")},$n={id:"test-id"},Yn=new Set([].concat(h(Object.keys(Wn)),h(Object.keys($n)),["src","parent","data"])),Qn=function(){return d(function e(t,n){var r,o,i,a,s,u;if(f(this,e),y(this,"root",null),y(this,"canvas",null),y(this,"height",1080),y(this,"width",1920),y(this,"scaleX",1),y(this,"scaleY",1),!Se()){if(!n)throw new Error("settings is required");this.height=Math.ceil(null!==(r=n.appHeight)&&void 0!==r?r:1080/(null!==(o=n.deviceLogicalPixelRatio)&&void 0!==o?o:1)),this.width=Math.ceil(null!==(i=n.appWidth)&&void 0!==i?i:1920/(null!==(a=n.deviceLogicalPixelRatio)&&void 0!==a?a:1)),this.scaleX=null!==(s=n.deviceLogicalPixelRatio)&&void 0!==s?s:1,this.scaleY=null!==(u=n.deviceLogicalPixelRatio)&&void 0!==u?u:1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}},[{key:"setRootPosition",value:function(){if(null!==this.root&&null!==this.canvas){var e=this.canvas.getBoundingClientRect(),t=document.documentElement.scrollTop+e.top,n=document.documentElement.scrollLeft+e.left;this.root.id="root",this.root.style.left="".concat(n,"px"),this.root.style.top="".concat(t,"px"),this.root.style.width="".concat(this.width,"px"),this.root.style.height="".concat(this.height,"px"),this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform="scale(".concat(this.scaleX,", ").concat(this.scaleY,")"),this.root.style.overflow="hidden",this.root.style.zIndex="65534"}}},{key:"createDiv",value:function(e,t){var n=document.createElement("div");for(var r in n.style.position="absolute",n.id=e.toString(),t)this.updateNodeProperty(n,r,t[r],t);return n}},{key:"createNode",value:function(e){var t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,e.on("inViewport",function(){return t.setAttribute("state","inViewport")}),e.on("inBounds",function(){return t.setAttribute("state","inBounds")}),e.on("outOfBounds",function(){return t.setAttribute("state","outOfBounds")}),this.createProxy(e,t)}},{key:"createTextNode",value:function(e){var t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,this.createProxy(e,t)}},{key:"createProxy",value:function(e,t){var n=this;Yn.forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);o=Object.getOwnPropertyDescriptor(i,r)}void 0!==o&&Object.defineProperty(e,r,{get:function(){var t;return null===(t=o)||void 0===t||null===(t=t.get)||void 0===t?void 0:t.call(e)},set:function(i){var a;null===(a=o)||void 0===a||null===(a=a.set)||void 0===a||a.call(e,i),n.updateNodeProperty(t,r,i,e.props)},configurable:!0,enumerable:!0})});var r=e.destroy;Object.defineProperty(e,"destroy",{value:function(){n.destroyNode(e.id),r.call(e)}});var o=e.animate;return Object.defineProperty(e,"animate",{value:function(r,i){var a=o.call(e,r,i),s=a.start.bind(a);return a.start=function(){return n.animateNode(t,r,i),s()},a}}),e}},{key:"destroyNode",value:function(e){var t=document.getElementById(e.toString());null==t||t.remove()}},{key:"updateNodeProperty",value:function(e,t,n,r){if(null!==this.root&&null!=n)if("parent"!==t){if("text"===t)return e.innerHTML=String(n),void(e.style.visibility="hidden");if("src"===t&&n)e.setAttribute("data-src",String(n));else if("rtt"===t&&n)e.setAttribute("data-rtt",String(n));else if(Wn[t]){var o,i=null===(o=Wn[t])||void 0===o?void 0:o.call(Wn,n);if(null===i)return;if("string"==typeof i)return void e.style.setProperty(i,String(n));if("object"===x(i)){var a=i.value;if("x"===t){var s=r.mountX,u=r.width;s&&(a="".concat(parseInt(a)-u*s,"px"))}else if("y"===t){var l=r.mountY,c=r.height;l&&(a="".concat(parseInt(a)-c*l,"px"))}e.style.setProperty(i.prop,a)}}else if($n[t]){var f=$n[t];if(!f)return;e.setAttribute(String(f),String(n))}else if("data"!==t);else for(var p in n){var d=n[p];void 0===d?e.removeAttribute("data-".concat(p)):e.setAttribute("data-".concat(p),String(d))}}else{var h=n.id;if(1===h)return void this.root.appendChild(e);var m=document.getElementById(h.toString());null==m||m.appendChild(e)}}},{key:"animateNode",value:function(e,t,n){var r=n.duration,o=void 0===r?1e3:r,i=n.delay,a=void 0===i?0:i,s=t.x,u=t.y,l=t.width,c=t.height,f=t.alpha,p=void 0===f?1:f,d=t.rotation,h=void 0===d?0:d,m=t.scale,g=void 0===m?1:m,v=t.color,y=t.mountX,b=t.mountY;setTimeout(function(){setTimeout(function(){e.style.top="".concat(u-c*b,"px"),e.style.left="".concat(s-l*y,"px"),e.style.width="".concat(l,"px"),e.style.height="".concat(c,"px"),e.style.opacity="".concat(p),e.style.rotate="".concat(h,"rad"),e.style.scale="".concat(g),e.style.color=Kn(v)},o)},a)}}])}(),Jn={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},Zn={low:.66666667,medium:.85,high:1,retina:2},er=null,tr=function(e){var t="renderMode"in e?e.renderMode:"webgl";return"webgl"===t?wn:"canvas"===t?Xn:void 0},nr=function(e){var t="renderMode"in e?e.renderMode:"webgl";return"webgl"===t?[_n,Un]:"canvas"===t?[Un]:void 0},rr=function(e){var t=g(g({},{max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1}),"gpuMemory"in e==!0?e.gpuMemory:{});return{criticalThreshold:1024*t.max*1024,targetThresholdLevel:t.target,cleanupInterval:t.cleanupInterval,baselineMemoryAllocation:1024*t.baseline*1024,doNotExceedCriticalThreshold:t.strict}},or=0,ir=function(e){for(var t="vertical"===e.direction?"y":"x",n="vertical"===e.direction?"x":"y",r="vertical"===e.direction?"mountX":"mountY",o="vertical"===e.direction?"height":"width",i="vertical"===e.direction?"width":"height",a=function(e,t){if(void 0===e)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if("number"==typeof e)return{start:e,end:e,oppositeStart:e,oppositeEnd:e};if(!0===sr(e)&&(e=ur(e)),"object"===x(e)){var n=e,r=n.top,o=void 0===r?void 0:r,i=n.right,a=void 0===i?void 0:i,s=n.bottom,u=void 0===s?void 0:s,l=n.left,c=void 0===l?void 0:l,f=n.x,p=void 0===f?0:f,d=n.y,h=void 0===d?0:d;return"vertical"===t?{start:void 0!==o?o:h,end:void 0!==u?u:h,oppositeStart:void 0!==c?c:p,oppositeEnd:void 0!==a?a:p}:{start:void 0!==c?c:p,end:void 0!==a?a:p,oppositeStart:void 0!==o?o:h,oppositeEnd:void 0!==u?u:h}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}}(e.padding,e.direction),s=a.start,u=this.node.children,l=u.length,c=0,f=e.gap||0,p=0;p<l;p++)if(void 0===this.children[p]||!1!==this.children[p].props.raw.show){var d=u[p];d[t]=s,d[n]=a.oppositeStart,s+="width"===o?d.width+(d.width!==("text"in d?1:0)?f:0):"text"in d?d.width>1?d.height+f:0:0!==d.height?d.height+f:0,c=Math.max(c,d[i]+a.oppositeStart+a.oppositeEnd)}this.node[o]=s-f+a.end,this.node[i]=c;var h={start:0,end:1,center:.5}[e["align-items"]||"start"];if(0!==h)for(var m=0;m<l;m++){var g=u[m];g[n]=c*h,g[r]=h}void 0!==e["@updated"]&&e["@updated"]({w:this.node.width,h:this.node.height},this),this.config.parent&&!0===this.config.parent.props.__layout&&this.config.parent.triggerLayout(this.config.parent.props)},ar=function(e){return null!==e&&"object"===x(e)&&"transition"in e==!0},sr=function(e){return"string"==typeof e&&e.startsWith("{")&&e.endsWith("}")},ur=function(e){return JSON.parse(e.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":'))},lr=function(e,t){return"string"!=typeof e?e:e.indexOf("%")===e.length-1?this.element.config.parent&&(this.element.config.parent.node[t]||0)*(parseFloat(e)/100)||0:e},cr=function(e){if("object"!==x(e)||null===e)return e;if(e.constructor===Object){if("value"in e==!0)return e.value;if("transition"in e==!0)return cr(e.transition)}return e},fr={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"},pr=null,dr={set parent(e){this.props.parent="root"===e?er.root:e.node},set rotation(e){this.props.rotation=e*(Math.PI/180)},set w(e){this.props.width=lr.call(this,e,"width")},set width(e){this.props.width=lr.call(this,e,"width")},set h(e){this.props.height=lr.call(this,e,"height")},set height(e){this.props.height=lr.call(this,e,"height")},set x(e){this.props.x=lr.call(this,e,"width")},set y(e){this.props.y=lr.call(this,e,"height")},set z(e){this.props.zIndex=e},set zIndex(e){this.props.zIndex=e},set color(e){var t=this;"string"==typeof e&&!1===e.startsWith("{")?this.props.color=L(e):("object"===x(e)||!0===sr(e)&&(e=ur(e)))&&(this.props.color=0,Object.entries(e).forEach(function(e){t.props[fr[e[0]]]=L(e[1])}))},set src(e){this.props.src=e,void 0===this.raw.color&&(this.props.color=this.props.src?4294967295:0),"w"in this.raw||"w"in this.raw||"h"in this.raw||"height"in this.raw||(this.props.autosize=!0)},set texture(e){this.props.texture=e,void 0===this.raw.color&&null==e?this.props.color=0:void 0===this.raw.color&&(this.props.color=4294967295)},set fit(e){var t={};"cover"!==e&&"contain"!==e?("object"===x(e)||!0===sr(e)&&(e=ur(e)))&&(t.type=e.type||"cover","number"==typeof e.position&&(t.clipY=t.clipX=e.position),"object"===x(e.position)&&(t.clipX="x"in e.position==!0?e.position.x:null,t.clipY="y"in e.position==!0?e.position.y:null),this.props.textureOptions={resizeMode:t}):this.props.textureOptions={resizeMode:{type:e}}},set rtt(e){this.props.rtt=e,void 0===this.raw.color&&(this.props.color=!0===e?4294967295:0)},set mount(e){"object"===x(e)||!0===sr(e)&&(e=ur(e))?("x"in e==!0&&(this.props.mountX=e.x),"y"in e==!0&&(this.props.mountY=e.y)):(this.props.mountX=e,this.props.mountY=e)},set pivot(e){"object"===x(e)||!0===sr(e)&&(e=ur(e))?("x"in e==!0&&(this.props.pivotX=e.x),"y"in e==!0&&(this.props.pivotY=e.y)):(this.props.pivotX=e,this.props.pivotY=e)},set scale(e){"object"===x(e)||!0===sr(e)&&(e=ur(e))?("x"in e==!0&&(this.props.scaleX=e.x),"y"in e==!0&&(this.props.scaleY=e.y)):this.props.scale=e},set show(e){this.props.alpha=e?void 0!==this.raw.alpha?this.raw.alpha:1:0},set alpha(e){void 0!==this.raw.show&&1!=this.raw.show||(this.props.alpha=e)},set shader(e){this.props.shader=null!==e?er.createShader(e.type,e.props):er.createShader("DefaultShader")},set effects(e){for(var t=0;t<e.length;t++)e[t].props&&e[t].props.color&&(e[t].props.color=L(e[t].props.color));void 0===this.element.node&&(this.props.shader=er.createShader("DynamicShader",{effects:e.map(function(e){return er.createEffect(e.type,e.props)})}))},set clipping(e){this.props.clipping=e},set overflow(e){this.props.clipping=!e},set font(e){this.props.fontFamily=e},set size(e){this.props.fontSize=e},set wordwrap(e){c.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=e,this.props.contain="width"},set maxwidth(e){this.props.width=e,this.props.contain="width"},set maxheight(e){this.props.height=e,this.props.contain="both"},set contain(e){this.props.contain=e},set maxlines(e){this.props.maxLines=e},set textoverflow(e){this.props.overflowSuffix=!1===e?" ":!0===e?void 0:e},set letterspacing(e){this.props.letterSpacing=e||1},set lineheight(e){this.props.lineHeight=e},set align(e){this.props.textAlign=e},set content(e){this.props.text=""+e},set placement(e){var t,n;"object"===x(e)||!0===sr(e)&&(e=ur(e))?("x"in e==!0&&(t=e.x),"y"in e==!0&&(n=e.y)):"center"===e||"right"===e?t=e:n=e,"center"===t?(this.x="50%",this.props.mountX=.5):"right"===t&&(this.x="100%",this.props.mountX=1),"middle"===n?(this.y="50%",this.props.mountY=.5):"bottom"===n&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(e){("object"===x(e)||!0===sr(e)&&(e=ur(e)))&&(this.props.data=e)}},hr={populate:function(e){var t=this,n=e;n.node=this.config.node,!0===n[b.isSlot]&&(this[b.isSlot]=!0),this.props.element=this,this.props.parent=n.parent||this.config.parent,delete n.parent,this.props.raw=e;for(var r=Object.keys(n),o=r.length,i=0;i<o;i++){var a=r[i],s=n[a];void 0!==s&&(this.props[a]=cr(s))}void 0===this.props.props.color&&"__textnode"in n==!1&&(this.props.props.color=0),this.node=n.__textnode?er.createTextNode(g(g({},pr),this.props.props)):er.createNode(this.props.props),void 0!==n["@loaded"]&&"function"==typeof n["@loaded"]&&this.node.on("loaded",function(e,r){var o=r.type,i=r.dimensions;n["@loaded"]({w:i.width,h:i.height,type:o},t)}),void 0!==n["@error"]&&"function"==typeof n["@error"]&&this.node.on("failed",function(e,r){n["@error"](r,t)}),!0===n.__layout&&(this.triggerLayout=ir.bind(this)),void 0!==this.config.parent.props&&!0===this.config.parent.props.__layout&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",function(){t.config.parent.triggerLayout(t.config.parent.props)}))},set:function(e,t){if(void 0!==t&&this.props.raw[e]!==t){this.props.raw[e]=t,this.props.props={},this.props[e]=cr(t);var n=Object.keys(this.props.props);if(1===n.length){if(!0===ar(t))return this.animate(n[0],this.props.props[n[0]],t.transition);this.node[n[0]]=this.props.props[n[0]]}else for(var r=0;r<n.length;r++){if(!0===ar(t))return this.animate(n[r],this.props.props[n[r]],t.transition);this.node[n[r]]=this.props.props[n[r]]}this.config.parent.props&&!0===this.config.parent.props.__layout&&this.config.parent.triggerLayout(this.config.parent.props)}},animate:function(e,t,n){var r=this;if(void 0!==this.scheduledTransitions[e]&&"scheduled"===this.scheduledTransitions[e].f.state&&this.scheduledTransitions[e].f.stop(),this.node[e]!==t){var o={};o[e]=t;var i=this.node.animate(o,{duration:"object"===x(n)&&"duration"in n?n.duration:300,easing:"object"===x(n)&&"easing"in n?n.easing:"ease",delay:"object"===x(n)&&"delay"in n?n.delay:0}),a=this.node[e];if(this.scheduledTransitions[e]={v:o[e],f:i},void 0!==n.start&&"function"==typeof n.start&&i.once("animating",function(){n.start.call(r.component,r,e,a)}),this.config.parent.props&&!0===this.config.parent.props.__layout&&i.on("tick",function(){r.config.parent.triggerLayout(r.config.parent.props)}),void 0!==n.progress&&"function"==typeof n.progress){var s=0;i.on("tick",function(t,o){var i=o.progress;n.progress.call(r.component,r,e,i,s),s=i})}i.once("stopped",function(){void 0!==r.scheduledTransitions[e]&&!0===r.scheduledTransitions[e].canceled||(void 0!==r.node&&n.end&&"function"==typeof n.end&&n.end.call(r.component,r,e,r.node[e]),delete r.scheduledTransitions[e])}),i.start()}},destroy:function(){if(null!==this.node){c.debug("Deleting Node",this.nodeId);for(var e=Object.keys(this.scheduledTransitions),t=0;t<e.length;t++){var n=this.scheduledTransitions[e[t]];void 0!==n&&(n.canceled=!0,void 0!==n.f&&n.f.stop())}this.scheduledTransitions={},this.component=null,delete this.component,this.config=null,delete this.config,this.counter=null,delete this.counter,this.props.raw={},this.props.element=null,this.props.props=null,this.props={},delete this.props,this.triggerLayout=null,delete this.triggerLayout,this.forComponent=null,delete this.forComponent,this.node.destroy(),this.node=null}},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){var e=this;return this.component[b.getChildren]().filter(function(t){return t.parent===(e[b.isSlot]?e.node.children[0]:e.node)})}},mr=function(e,t){return null===pr&&(pr={fontSize:32,fontFamily:S.get("defaultFont","sans-serif")}),Object.assign(Object.create(hr),{props:Object.assign(Object.create(dr),{props:{}}),scheduledTransitions:{},config:e,component:t,counter:or++})},gr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};er=new un(g(g({},{appWidth:n.w||1920,appHeight:n.h||1080,fpsUpdateInterval:n.fpsInterval||1e3,devicePhysicalPixelRatio:Zn[n.renderQuality]||n.renderQuality||1,deviceLogicalPixelRatio:n.pixelRatio||Jn[n.screenResolution]||Jn[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in n?n.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:n.canvasColor&&L(n.canvasColor)||0,inspector:!0===n.inspector?Qn:void 0,boundsMargin:n.viewportMargin||0,renderEngine:tr(n),fontEngines:nr(n),canvas:n.canvas,textureProcessingTimeLimit:n.textureProcessingTimeLimit,textureMemory:rr(n),createImageBitmapSupport:"auto"}),n.advanced||{}),t);var r;return function(){var e=er.stage;S.get("shaders",[]).forEach(function(t){e.shManager.registerShaderType(t.name,t.type)}),S.get("effects",[]).forEach(function(t){e.shManager.registerShaderType(t.name,t.type)})}(),function(){var e=er.stage;S.get("fonts",[]).forEach(function(t){"sdf"===t.type||"msdf"===t.type?(!t.png&&t.file&&(t.png=t.file.replace(/\.[^.]+$/,".".concat(t.type,".png"))),!t.json&&t.file&&(t.json=t.file.replace(/\.[^.]+$/,".".concat(t.type,".json"))),e.fontManager.addFontFace(new kn(t.type,{fontFamily:t.family,descriptors:{},atlasUrl:t.png,atlasDataUrl:t.json,stage:e,metrics:t.metrics}))):"web"===t.type&&e.fontManager.addFontFace(new cn({fontFamily:t.family,fontUrl:t.file,descriptors:{},metrics:t.metrics}))})}(),(r=e()).quit=function(){c.info("Closing App"),r.destroy(),r=null,er=null},er},vr="1.29.5",yr={"@lightningjs/renderer":"^2.13.4"},br={},xr={};function wr(){return(wr=i(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,he(function(){return r.import("./package-legacy-B0RKkbLA.js")});case 1:if(void 0===(t=e.v)){e.n=2;break}return e.a(2,t.version);case 2:e.n=4;break;case 3:return e.p=3,e.v,e.a(2,yr["@lightningjs/renderer"]);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}var Sr,Tr,kr,Cr={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},Ar=window.speechSynthesis,Er=/android/i.test((window.navigator||{}).userAgent||""),Ir=!1,Mr=null,Rr=function(){return Mr&&clearTimeout(Mr)},_r=function(e){if(!e||Mr)return Rr();Ar.pause(),Ar.resume(),Mr=setTimeout(function(){_r(e)},5e3)},Lr={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},Dr=function(e){return void 0!==Ar?(!1===Ir&&(Lr.voice=Ar.getVoices()[0],Ir=!0),function(e){var t=new SpeechSynthesisUtterance(e.message);return t.lang=e.lang||Lr.lang,t.pitch=e.pitch||Lr.pitch,t.rate=e.rate||Lr.rate,t.voice=e.voice||Lr.voice,t.volume=e.volume||Lr.volume,!1===Er&&(t.onstart=function(){_r(t)},t.onresume=function(){_r(t)}),new Promise(function(e,n){t.onend=function(){e()},t.onerror=function(e){n(e)},Ar.speak(t)})}(e)):(c.error("speechSynthesis web API not available"),Promise.reject({error:"unavailable"}))},Pr=function(){void 0!==Ar&&(Ar.cancel(),Rr())},Or=!1,Nr=0,Ur=[],Br=!1,jr=null,Fr=null,zr={then:function(){},done:function(){},cancel:function(){},stop:function(){}},Gr=function(e){return!1===Or?zr:Vr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"off")},Vr=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Nr++,i=new Promise(function(e){n=e});return i.cancel=function(){var e=Ur.findIndex(function(e){return e.id===o});-1!==e&&Ur.splice(e,1),n("canceled")},i.stop=function(){o===jr&&(Pr(),Br=!1,n("interupted"))},!1===r?"assertive"===t?Ur.unshift({message:e,resolveFn:n,id:o}):Ur.push({message:e,resolveFn:n,id:o}):Ur.push({delay:r,resolveFn:n,id:o}),setTimeout(function(){Hr()},100),i},Hr=function(){var e=i(n().m(function e(){var t,r,o,i,a;return n().w(function(e){for(;;)switch(e.n){case 0:if(!0!==Br&&0!==Ur.length){e.n=1;break}return e.a(2);case 1:Br=!0,t=Ur.shift(),r=t.message,o=t.resolveFn,i=t.delay,a=t.id,jr=a,i?setTimeout(function(){Br=!1,jr=null,o("finished"),Hr()},i):(null!==Fr&&clearTimeout(Fr),Fr=setTimeout(function(){Dr({message:r}).then(function(){Br=!1,jr=null,o("finished"),Hr()}).catch(function(e){Br=!1,jr=null,o(e.error),Hr()}),Fr=null},200));case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),qr={speak:Gr,polite:function(e){return Gr(e,"polite")},assertive:function(e){return Gr(e,"assertive")},stop:function(){Pr()},enable:function(){Or=!0},disable:function(){Or=!1},toggle:function(e){Or=!!e},clear:function(){Ur.length=0},pause:function(e){return!1===Or?zr:Vr(void 0,void 0,e)}},Xr=fe({path:"",navigating:!1,data:null,params:null,hash:""},S.get("reactivityMode"),!0),Wr=new Map,Kr=[],$r={},Yr={},Qr=!1,Jr=function(){var e=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:e[0],queryParams:new URLSearchParams(e[1]),hash:document.location.hash}},Zr=function(e){return e.replace(/^\/+|\/+$/g,"").toLowerCase()},eo=function(e){return"object"===x(e)&&null!==e},to=function(e){return"string"==typeof e},no=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.replace(/^\/+|\/+$/g,"");e=Zr(e);for(var r=!1,o=0,i=function(){var i=t[o];if(i.path=Zr(i.path),i.path===e)i.params={},r=i;else if(i.path.indexOf(":")>-1){var a=h(i.path.matchAll(/:([^\s/]+)/gi)),s=i.path;a.reverse().forEach(function(e){s=s.substring(0,e.index)+"([^\\s/]+)"+s.substring(e.index+e[0].length)}),s="^"+s;var u=n.match(new RegExp("".concat(s),"i"));u&&(i.params=a.reverse().reduce(function(e,t,n){return e[t[1]]=u[n+1],e},{}),r=i)}else if(i.path.endsWith("*")){var l=new RegExp(i.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),c=e.match(l);c&&(c[1]&&(i.params={path:c[1]}),r=i)}o++};!r&&o<t.length;)i();return r&&(r.options=g(g({},r.options),$r),r.data||(r.data={})),r},ro=function(){var e=i(n().m(function e(){var t,r,o,i,a,s,u,l,f,p,d,m,v,y,x,w,S,T,k,C,A,E,I,M;return n().w(function(e){for(;;)switch(e.n){case 0:if(qr.stop(),qr.clear(),Xr.navigating=!0,!this.parent[b.routes]){e.n=21;break}if(t=Sr,r=Jr(),o=r.hash,i=r.path,a=r.queryParams,s=no(i,this.parent[b.routes]),null!==o&&(s.hash=o),Sr=s,!s){e.n=20;break}if(!this.parent[b.routerHooks]){e.n=2;break}if(!(l=this.parent[b.routerHooks]).beforeEach){e.n=2;break}return e.n=1,l.beforeEach(s,t);case 1:if(u=e.v,!to(u)){e.n=2;break}return ao(u),e.a(2);case 2:if(!(s=eo(u)?u:s).hooks){e.n=4;break}if(!s.hooks.before){e.n=4;break}return e.n=3,s.hooks.before.call(this.parent,s,t);case 3:if(f=e.v,!to(f)){e.n=4;break}return Sr=t,ao(f),e.a(2);case 4:if(s=eo(f)?f:s,!1===Qr&&t&&!0===t.options.inHistory&&Kr.push(t),"transition"in s||(s.transition=Cr),"function"==typeof s.transition&&(s.transition=s.transition(t,s)),m=Wr.get(s.hash)||{},v=m.view,y=m.focus,s.announce&&("string"==typeof s.announce&&(s.announce={message:s.announce}),qr.speak(s.announce.message,s.announce.politeness)),v){e.n=6;break}for((p=xr.element({parent:this[b.children][0]})).populate({}),p.set("w","100%"),p.set("h","100%"),x={},w=h(a.entries()),S=0;S<w.length;S++)x[w[S][0]]=w[S][1];return d=g(g(g({},Yr),s.data),x),T=g(g(g({},this[b.props]),s.params),d),e.n=5,s.component({props:T},p,this);case 5:"Module"===(v=e.v)[Symbol.toStringTag]&&(v.default&&"function"==typeof v.default?v=v.default({props:T},p,this):c.error("Dynamic import doesn't have a default export or default is not a function")),"function"==typeof v&&(v=v({props:T},p,this)),e.n=12;break;case 6:if(p=v[b.holder],k=!1,!s.transition.before){e.n=11;break}if(!Array.isArray(s.transition.before)){e.n=10;break}C=0;case 7:if(!(C<s.transition.before.length)){e.n=9;break}if("alpha"!==s.transition.before[C].prop){e.n=8;break}return k=!0,e.a(3,9);case 8:C++,e.n=7;break;case 9:e.n=11;break;case 10:"alpha"===s.transition.before.prop&&(k=!0);case 11:!1===k&&p.set("alpha",1);case 12:if(this[b.children].push(v),Tr=po.get(),y?y.$focus():v.$focus(),s.transition.before)if(Array.isArray(s.transition.before))for(A=0;A<s.transition.before.length;A++)p.set(s.transition.before[A].prop,s.transition.before[A].value);else p.set(s.transition.before.prop,s.transition.before.value);if(E=!1,t&&(E=!0,(I=this[b.children].splice(1,1).pop())&&oo(t,I,s.transition.out)),Xr.path=s.path,Xr.params=s.params,Xr.hash=o,Xr.data=d,!s.transition.in){e.n=19;break}if(!Array.isArray(s.transition.in)){e.n=18;break}M=0;case 13:if(!(M<s.transition.in.length)){e.n=17;break}if(M!==s.transition.length-1){e.n=15;break}return e.n=14,io(p,s.transition.in[M],E);case 14:e.n=16;break;case 15:io(p,s.transition.in[M],E);case 16:M++,e.n=13;break;case 17:e.n=19;break;case 18:return e.n=19,io(p,s.transition.in,E);case 19:this.activeView=this[b.children][this[b.children].length-1],e.n=21;break;case 20:c.error("Route ".concat(o," not found"));case 21:Qr=!1,Xr.navigating=!1;case 22:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}(),oo=function(){var e=i(n().m(function e(t,r,o){var i;return n().w(function(e){for(;;)switch(e.n){case 0:if(!o){e.n=7;break}if(!Array.isArray(o)){e.n=6;break}i=0;case 1:if(!(i<o.length)){e.n=5;break}if(i!==o.length-1){e.n=3;break}return e.n=2,io(r[b.holder],o[i]);case 2:e.n=4;break;case 3:io(r[b.holder],o[i]);case 4:i++,e.n=1;break;case 5:e.n=7;break;case 6:return e.n=7,io(r[b.holder],o);case 7:!1===Qr&&t.options&&!0===t.options.keepAlive?Wr.set(t.hash,{view:r,focus:Tr}):!0===Qr&&Wr.delete(t.hash),!t.options||!0===t.options.keepAlive&&!0!==Qr||(r.destroy(),r=null);case 8:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),io=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(r){if(!0===n){var o=t.end;t.end=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o&&o(t),o=null,r()},e.set(t.prop,{transition:t})}else e.set(t.prop,t.value),r()})},ao=function(e){Yr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},$r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},window.location.hash=e},so=function(){var e=Kr.pop();if(e&&Sr!==e)return Qr=!0,ao(e.hash,e.data,e.options),!0;var t=Sr&&Sr.options.backtrack||!1;if(!1===t)return!1;var n=/(\/:?[\w%\s-]+)$/,r=Sr.path,o=r.split("/").length;if(o<=1)return!1;for(;o--;){if(!n.test(r))return!1;r=r.replace(n,"");var i=no(r,this.parent[b.routes]);if(i&&t)return ao(i.path),!0}return!1},uo={navigate:ro,back:so},lo=null,co=[],fo=new Map,po={_hold:!1,set hold(e){this._hold=e},get hold(){return this._hold},get:function(){return lo},set:function(e,t){e!==lo&&(clearTimeout(kr),lo&&lo!==e.parent&&lo.unfocus(),co.reverse().forEach(function(e){return e.unfocus()}),e!==lo&&(kr=setTimeout(function(){(lo=e).lifecycle.state="focus",t instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",t)):co=[]},this.hold?S.get("holdTimeout",50):0)))},input:function(e,t){if(!0!==Xr.navigating){var n,r=(co=ho([lo],e)).shift();if(r)r[b.inputEvents][e]?n=r[b.inputEvents][e].call(r,t):r[b.inputEvents].any&&(n=r[b.inputEvents].any.call(r,t)),void 0!==n&&fo.set(t.code,n)}}},ho=function(e,t){return!e[0][b.inputEvents]||"function"!=typeof e[0][b.inputEvents][t]&&"function"!=typeof e[0][b.inputEvents].any?e[0].parent?(e.unshift(e[0].parent),ho(e,t)):[]:e},mo=new Map,go=new Map,vo=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=mo.get(t);void 0===o&&(o=new Map,mo.set(t,o));var i=o.get(e);void 0===i&&(i=new Set,o.set(e,i)),i.add({cb:n,priority:r}),go.delete(t)},yo=function(e,t){var n=mo.get(t);void 0!==n&&n.has(e)&&(n.delete(e),mo.set(t,n),go.delete(t))},bo=function(e,t){var n=mo.get(e);if(void 0===n||0===n.size)return!0;if(!1===go.has(e)){var r,o=[],i=w(n);try{for(i.s();!(r=i.n()).done;){var a,s=v(r.value,2),u=s[0],l=w(s[1]);try{for(l.s();!(a=l.n()).done;){var c=a.value;o.push(g(g({},c),{},{component:u}))}}catch(y){l.e(y)}finally{l.f()}}}catch(y){i.e(y)}finally{i.f()}o.sort(function(e,t){return t.priority-e.priority}),go.set(e,o)}for(var f=go.get(e),p=0;p<f.length;p++){var d=f[p],h=d.cb,m=d.component;if(!1===h.call(m,t))return!1}return!0},xo=function(e){var t,n=w(mo);try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),o=r[0],i=r[1];i.has(e)&&(i.delete(e),go.delete(o),0===i.size&&mo.delete(o))}}catch(a){n.e(a)}finally{n.f()}},wo=y(y(y(y(y(y({focus:{value:function(e){return c.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(e)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(e){this[b.state].hasFocus=!0,po.set(this,e)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[b.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){for(var e in this.eol=!0,this.lifecycle.state="destroy",this[b.state])Array.isArray(this[b.state][e])&&(this[b.state][e]=[]);this.$clearTimeouts(),this.$clearIntervals(),xo(this),So(this[b.children]),this[b.children].length=0,ee(this[b.effects]),this[b.state]={},this[b.props]={},this[b.computed]=null,this.lifecycle={},this[b.effects].length=0,this.parent=null,this.rootParent=null,this[b.wrapper]=null,this[b.originalState]=null,this[b.slots].length=0,delete this[b.computed],delete this[b.effects],delete this.parent,delete this.rootParent,delete this[b.wrapper],delete this[b.originalState],delete this[b.children],delete this[b.slots],delete this.componentId,delete this[b.id],delete this.ref,this[b.holder].destroy(),this[b.holder]=null,delete this[b.holder],c.debug("Destroyed component ".concat(this.componentId))},writable:!1,enumerable:!0,configurable:!1}},b.removeGlobalEffects,{value:function(){ee(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])},writable:!1,enumerable:!1,configurable:!1}),"select",{value:function(e){return c.warn("this.select is deprecated, use this.$select instead"),this.$select(e)},writable:!1,enumerable:!0,configurable:!1}),"$select",{value:function(e){var t=null;return this[b.children].forEach(function(n){Array.isArray(n)?n.forEach(function(n){n.ref===e&&(t=n)}):Object.getPrototypeOf(n)===Object.prototype?Object.keys(n).forEach(function(r){n[r].ref===e&&(t=n[r])}):n.ref===e&&(t=n)}),t},writable:!1,enumerable:!0,configurable:!1}),"trigger",{value:function(e){return c.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(e)},writable:!1,enumerable:!0,configurable:!1}),"$trigger",{value:function(e){var t=this[b.originalState];if(e.indexOf(".")>-1){var n=e.split(".");e=n.pop(n);for(var r=0;r<n.length;r++)t=t[n[r]]}ne(t,e,!0)},writable:!1,enumerable:!0,configurable:!1}),"shader",{value:function(e,t){return{type:e,props:t}},writable:!1,enumerable:!0,configurable:!1}),So=function(e){for(var t=0;t<e.length;t++){if(!e[t])return;e[t].destroy&&"function"==typeof e[t].destroy?e[t].destroy():Object.getPrototypeOf(e[t])===Object.prototype&&So(Object.values(e[t])),e[t]=null}e.length=0},To={$setTimeout:{value:function(e,t){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(!0!==this.eol){var a=setTimeout(function(){n.$clearTimeout(a),e.apply(null,o)},t,o);return this[b.timeouts].push(a),a}},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(e){var t=this[b.timeouts].indexOf(e);t>-1&&(this[b.timeouts].splice(t,1),clearTimeout(e))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(var e=0;e<this[b.timeouts].length;e++)clearTimeout(this[b.timeouts][e]);this[b.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(!0!==this.eol){var i=setInterval(function(){return e.apply(null,r)},t,r);return this[b.intervals].push(i),i}},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(e){var t=this[b.intervals].indexOf(e);t>-1&&(this[b.intervals].splice(t,1),clearTimeout(e))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(var e=0;e<this[b.intervals].length;e++)clearInterval(this[b.intervals][e]);this[b.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},ko={$emit:{value:function(e,t){return bo(e,t)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==this.eol&&vo(this,e,t,n)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(e){yo(this,e)},writable:!1,enumerable:!0,configurable:!1}},Co={$router:{value:{to:ao,back:so,get currentRoute(){return Sr},get routes(){return this[b.routes]},get navigating(){return Xr.navigating},state:Xr},writable:!1,enumerable:!0,configurable:!1}},Ao={$announcer:{value:qr,writable:!1,enumerable:!0,configurable:!1}},Eo=y(y({$size:{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:0,h:0};this[b.holder].set("w",e.w||0),this[b.holder].set("h",e.h||0)},writable:!1,enumerable:!0,configurable:!1}},b.renderer,{value:function(){return br},writable:!1,enumerable:!0,configurable:!1}),b.getChildren,{value:function(){var e=this,t=this.rootParent||this.parent;return(this[b.children]||[]).concat(t&&t[b.getChildren]().map(function(e){return Object.getPrototypeOf(e)===Object.prototype?Object.values(e).map(function(e){return e.forComponent=e[Symbol.for("config")]&&e[Symbol.for("config")].parent.component,e}):e}).flat().filter(function(t){if(t&&t.component)return t.component&&t.component.componentId===e.componentId||t.forComponent&&t.forComponent.componentId===e.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}),Io=g(g(g({},ko),Co),Ao),Mo=Object.defineProperties(y({},b.launched,!1),g(g(g(g({},wo),To),Io),Eo)),Ro={cast:function(e){return e},required:!1},_o=0;function Lo(e,t){e[b.identifier]=++_o,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;W[t]={},[].concat(h(Object.keys(e)),h(Object.getOwnPropertySymbols(e))).forEach(function(n){"function"==typeof e[n]&&(W[t][n]=e[n])})}(t.hooks,e[b.identifier]),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];-1===t.indexOf("ref")&&t.push("ref"),e[b.propKeys]=[];for(var n=t.length,r=function(){var n=g(g({},Ro),"object"===x(t[o])?t[o]:{key:t[o]});e[b.propKeys].push(n.key),Object.defineProperty(e,n.key,{get:function(){var e=n.cast(void 0!==this[b.props]&&n.key in this[b.props]?this[b.props][n.key]:"default"in n?n.default:void 0);return!0===n.required&&void 0===e&&c.warn("".concat(n.key," is required")),e},set:function(e){c.warn('Warning! Avoid mutating props directly (prop "'.concat(n.key,'" in component "').concat(this.componentId,'")')),this[b.props][n.key]=e}})},o=0;o<n;o++)r()}(e,t.props),t.methods&&function(e,t){for(var n in e[b.methodKeys]=[],t)e[b.propKeys]&&e[b.propKeys].indexOf(n)>-1?c.error("".concat(n," already exists as a prop")):("function"!=typeof t[n]&&c.warn("".concat(n," is not a function")),e[b.methodKeys].push(n),e[n]=t[n])}(e,t.methods),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};Object.defineProperty(e,b.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});var n=Object.keys(t.apply(e)||{});n.push(["hasFocus"]);for(var r=n.length,o=function(){var t=n[i];void 0!==e[b.propKeys]&&e[b.propKeys].indexOf(t)>-1&&c.error("State ".concat(t," already exists as a prop")),void 0!==e[b.methodKeys]&&e[b.methodKeys].indexOf(t)>-1&&c.error("State ".concat(t," already exists as a method")),e[b.stateKeys].push(t),Object.defineProperty(e,t,{get:function(){return this[b.state][t]},set:function(e){this[b.state][t]=e}})},i=0;i<r;i++)o()}(e,t.state),t.computed&&function(e,t){e[b.computedKeys]=[];var n=function(n){e[b.stateKeys]&&e[b.stateKeys].indexOf(n)>-1?c.error("".concat(n," already exists as a state variable")):e[b.propKeys]&&e[b.propKeys].indexOf(n)>-1?c.error("".concat(n," already exists as a prop")):e[b.methodKeys]&&e[b.methodKeys].indexOf(n)>-1?c.error("".concat(n," already exists as a method")):("function"!=typeof t[n]&&c.warn("".concat(n," is not a function")),e[b.computedKeys].push(n),Object.defineProperty(e,n,{get:function(){return t[n].apply(this)}}))};for(var r in t)n(r)}(e,t.computed),t.watch&&function(e,t){e[b.watchKeys]=[],e[b.watchers]={};var n=function(n){"function"!=typeof t[n]&&console.warn("".concat(n," is not a function")),e[b.watchKeys].push(n),e[b.watchers][n]=function(e,r){t[n].call(this,e,r)}};for(var r in t)n(r)}(e,t.watch);var n=void 0!==t.router?t.router:t.routes;return void 0!==n&&function(e,t){var n=t;!1===Array.isArray(t)&&(e[b.routerHooks]=t.hooks,n=t.routes),e[b.routes]=[],Object.keys(n).forEach(function(t){e[b.routes][t]=g(g({},n[t]),{options:g(g({},{inHistory:!0}),n[t].options)})})}(e,n),t.input&&function(e,t){e[b.inputEvents]=[],Object.keys(t).forEach(function(n){"function"!=typeof t[n]&&c.warn("".concat(t[n]," is not a function")),e[b.inputEvents][n]=t[n]})}(e,t.input),e}var Do,Po,Oo,No=null,Uo=function(){return{Circle:zo("Circle",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};return s[0]=this.element({parent:e||"root"},t),u.color=t.color,u.w=t.size,u.h=t.size,u.effects=[t.shader("radius",{radius:t.radius})],s[0].populate(u),s},effects:[function(e,t,n,r,o,i){t[0].set("color",e.color)},function(e,t,n,r,o,i){t[0].set("w",e.size)},function(e,t,n,r,o,i){t[0].set("h",e.size)},function(e,t,n,r,o,i){t[0].set("effects",[e.shader("radius",{radius:e.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius:function(){return this.size/2}}}),RouterView:zo("RouterView",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};return s[0]=this.element({parent:e||"root"},t),u.w=1*e.node.width,u.height=1*e.node.height,s[0].populate(u),s},effects:[],context:{}},state:function(){return{activeView:null}},hooks:{ready:function(){var e=this;No=function(){return uo.navigate.apply(e)},uo.navigate.apply(this),window.addEventListener("hashchange",No)},destroy:function(){window.removeEventListener("hashchange",No,!1)},focus:function(){this.activeView&&this.activeView.$focus()}},input:{back:function(e){!1===uo.back.call(this)&&this.parent.$focus(e)}}}),Sprite:zo("Sprite",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};return s[0]=this.element({parent:e||"root"},t),u.w=1*e.node.width,u.h=1*e.node.height,u.texture=t.texture,u.color=t.color,s[0].populate(u),s},effects:[function(e,t,n,r,o,i){t[0].set("texture",e.texture)},function(e,t,n,r,o,i){t[0].set("color",e.color)}],context:{}},props:["image","map","frame","color"],state:function(){return{spriteTexture:null}},computed:{texture:function(){var e="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(null!==this.spriteTexture&&e)return this[b.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:e.x,y:e.y,width:e.w,height:e.h})}},hooks:{ready:function(){this.spriteTexture=this[b.renderer]().createTexture("ImageTexture",{src:this.image})}}}),FPScounter:zo("FPScounter",{code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0;c[0]=this.element({parent:e||"root"},!0===f?l:t),c[0].populate({}),!0===f&&(p-=1),e=c[0];var d={};c[1]=this.element({parent:e||"root"},!0===f?l:t),d.y=15,d.x=20,c[1].populate(d),!0===f&&(p-=1),e=c[1],c[2]=this.element({parent:e||"root"},!0===f?l:t),c[2].populate({}),!0===f&&(p-=1);var h=n.components&&n.components.Sprite||r.Sprite;e=c[2];var m={};c[3]=this.element({parent:e||"root"},!0===f?l:t),m.image=t.image,m.w=43,m.h=25,m.map=t.sprite,m.frame="fps";var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);c[3].populate(m),!0===f&&(p-=1),e=c[3];var y,b={};if(b.image=t.image,b.w=43,b.h=25,b.map=t.sprite,b.frame="fps","string"==typeof(s=b.is||"Sprite")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);c[4]=y.call(null,{props:b},c[3],t),c[4][Symbol.for("slots")][0]?(e=c[4][Symbol.for("slots")][0],l=c[4],f=!0):e=c[4][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[2];var x={};c[5]=this.element({parent:e||"root"},!0===f?l:t),x.x=58,x.y=2,c[5].populate(x),!0===f&&(p-=1);var w=n.components&&n.components.Sprite||r.Sprite;e=c[5];var S={};c[6]=this.element({parent:e||"root"},!0===f?l:t),S.image=t.image,S.x=0,S.h=20,S.w=20,S.map=t.sprite,S.frame=t.fps[0];var T=[];if(void 0!==w)for(var k in w[Symbol.for("config")].props)delete S[w[Symbol.for("config")].props[k]],T.push(w[Symbol.for("config")].props[k]);c[6].populate(S),!0===f&&(p-=1),e=c[6];var C,A={};if(A.image=t.image,A.x=0,A.h=20,A.w=20,A.map=t.sprite,u=t.fps[0],!0===Array.isArray(u)&&(u=i(u).slice(0)),A.frame=u,"string"==typeof(s=A.is||"Sprite")){if(!(C=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(C=s);c[7]=C.call(null,{props:A},c[6],t),c[7][Symbol.for("slots")][0]?(e=c[7][Symbol.for("slots")][0],l=c[7],f=!0):e=c[7][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var E=n.components&&n.components.Sprite||r.Sprite;e=c[5];var I={};c[8]=this.element({parent:e||"root"},!0===f?l:t),I.image=t.image,I.x=18,I.h=20,I.w=20,I.map=t.sprite,I.frame=t.fps[1];var M=[];if(void 0!==E)for(var R in E[Symbol.for("config")].props)delete I[E[Symbol.for("config")].props[R]],M.push(E[Symbol.for("config")].props[R]);c[8].populate(I),!0===f&&(p-=1),e=c[8];var _,L={};if(L.image=t.image,L.x=18,L.h=20,L.w=20,L.map=t.sprite,u=t.fps[1],!0===Array.isArray(u)&&(u=i(u).slice(0)),L.frame=u,"string"==typeof(s=L.is||"Sprite")){if(!(_=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(_=s);c[9]=_.call(null,{props:L},c[8],t),c[9][Symbol.for("slots")][0]?(e=c[9][Symbol.for("slots")][0],l=c[9],f=!0):e=c[9][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var D=n.components&&n.components.Sprite||r.Sprite;e=c[5];var P={};c[10]=this.element({parent:e||"root"},!0===f?l:t),P.image=t.image,P.x=36,P.h=20,P.w=20,P.map=t.sprite,P.frame=t.fps[2];var O=[];if(void 0!==D)for(var N in D[Symbol.for("config")].props)delete P[D[Symbol.for("config")].props[N]],O.push(D[Symbol.for("config")].props[N]);c[10].populate(P),!0===f&&(p-=1),e=c[10];var U,B={};if(B.image=t.image,B.x=36,B.h=20,B.w=20,B.map=t.sprite,u=t.fps[2],!0===Array.isArray(u)&&(u=i(u).slice(0)),B.frame=u,"string"==typeof(s=B.is||"Sprite")){if(!(U=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(U=s);c[11]=U.call(null,{props:B},c[10],t),c[11][Symbol.for("slots")][0]?(e=c[11][Symbol.for("slots")][0],l=c[11],f=!0):e=c[11][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[1];var j={};c[12]=this.element({parent:e||"root"},!0===f?l:t),j.x=150,c[12].populate(j),!0===f&&(p-=1);var F=n.components&&n.components.Sprite||r.Sprite;e=c[12];var z={};c[13]=this.element({parent:e||"root"},!0===f?l:t),z.image=t.image,z.y=2,z.w=48,z.h=25,z.map=t.sprite,z.frame="avg";var G=[];if(void 0!==F)for(var V in F[Symbol.for("config")].props)delete z[F[Symbol.for("config")].props[V]],G.push(F[Symbol.for("config")].props[V]);c[13].populate(z),!0===f&&(p-=1),e=c[13];var H,q={};if(q.image=t.image,q.y=2,q.w=48,q.h=25,q.map=t.sprite,q.frame="avg","string"==typeof(s=q.is||"Sprite")){if(!(H=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(H=s);c[14]=H.call(null,{props:q},c[13],t),c[14][Symbol.for("slots")][0]?(e=c[14][Symbol.for("slots")][0],l=c[14],f=!0):e=c[14][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[12];var X={};c[15]=this.element({parent:e||"root"},!0===f?l:t),X.x=63,X.y=2,c[15].populate(X),!0===f&&(p-=1);var W=n.components&&n.components.Sprite||r.Sprite;e=c[15];var K={};c[16]=this.element({parent:e||"root"},!0===f?l:t),K.image=t.image,K.x=0,K.h=20,K.w=20,K.map=t.sprite,K.frame=t.avgFps[0];var $=[];if(void 0!==W)for(var Y in W[Symbol.for("config")].props)delete K[W[Symbol.for("config")].props[Y]],$.push(W[Symbol.for("config")].props[Y]);c[16].populate(K),!0===f&&(p-=1),e=c[16];var Q,J={};if(J.image=t.image,J.x=0,J.h=20,J.w=20,J.map=t.sprite,u=t.avgFps[0],!0===Array.isArray(u)&&(u=i(u).slice(0)),J.frame=u,"string"==typeof(s=J.is||"Sprite")){if(!(Q=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Q=s);c[17]=Q.call(null,{props:J},c[16],t),c[17][Symbol.for("slots")][0]?(e=c[17][Symbol.for("slots")][0],l=c[17],f=!0):e=c[17][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var Z=n.components&&n.components.Sprite||r.Sprite;e=c[15];var ee={};c[18]=this.element({parent:e||"root"},!0===f?l:t),ee.image=t.image,ee.x=18,ee.h=20,ee.w=20,ee.map=t.sprite,ee.frame=t.avgFps[1];var te=[];if(void 0!==Z)for(var ne in Z[Symbol.for("config")].props)delete ee[Z[Symbol.for("config")].props[ne]],te.push(Z[Symbol.for("config")].props[ne]);c[18].populate(ee),!0===f&&(p-=1),e=c[18];var re,oe={};if(oe.image=t.image,oe.x=18,oe.h=20,oe.w=20,oe.map=t.sprite,u=t.avgFps[1],!0===Array.isArray(u)&&(u=i(u).slice(0)),oe.frame=u,"string"==typeof(s=oe.is||"Sprite")){if(!(re=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(re=s);c[19]=re.call(null,{props:oe},c[18],t),c[19][Symbol.for("slots")][0]?(e=c[19][Symbol.for("slots")][0],l=c[19],f=!0):e=c[19][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var ie=n.components&&n.components.Sprite||r.Sprite;e=c[15];var ae={};c[20]=this.element({parent:e||"root"},!0===f?l:t),ae.image=t.image,ae.x=36,ae.h=20,ae.w=20,ae.map=t.sprite,ae.frame=t.avgFps[2];var se=[];if(void 0!==ie)for(var ue in ie[Symbol.for("config")].props)delete ae[ie[Symbol.for("config")].props[ue]],se.push(ie[Symbol.for("config")].props[ue]);c[20].populate(ae),!0===f&&(p-=1),e=c[20];var le,ce={};if(ce.image=t.image,ce.x=36,ce.h=20,ce.w=20,ce.map=t.sprite,u=t.avgFps[2],!0===Array.isArray(u)&&(u=i(u).slice(0)),ce.frame=u,"string"==typeof(s=ce.is||"Sprite")){if(!(le=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(le=s);c[21]=le.call(null,{props:ce},c[20],t),c[21][Symbol.for("slots")][0]?(e=c[21][Symbol.for("slots")][0],l=c[21],f=!0):e=c[21][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[1];var fe={};c[22]=this.element({parent:e||"root"},!0===f?l:t),fe.x=0,fe.y=40,c[22].populate(fe),!0===f&&(p-=1);var pe=n.components&&n.components.Sprite||r.Sprite;e=c[22];var de={};c[23]=this.element({parent:e||"root"},!0===f?l:t),de.image=t.image,de.x="-2",de.w=47,de.h=25,de.map=t.sprite,de.frame="min";var he=[];if(void 0!==pe)for(var me in pe[Symbol.for("config")].props)delete de[pe[Symbol.for("config")].props[me]],he.push(pe[Symbol.for("config")].props[me]);c[23].populate(de),!0===f&&(p-=1),e=c[23];var ge,ve={};if(ve.image=t.image,ve.x="-2",ve.w=47,ve.h=25,ve.map=t.sprite,ve.frame="min","string"==typeof(s=ve.is||"Sprite")){if(!(ge=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(ge=s);c[24]=ge.call(null,{props:ve},c[23],t),c[24][Symbol.for("slots")][0]?(e=c[24][Symbol.for("slots")][0],l=c[24],f=!0):e=c[24][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[22];var ye={};c[25]=this.element({parent:e||"root"},!0===f?l:t),ye.x=58,ye.y=2,c[25].populate(ye),!0===f&&(p-=1);var be=n.components&&n.components.Sprite||r.Sprite;e=c[25];var xe={};c[26]=this.element({parent:e||"root"},!0===f?l:t),xe.image=t.image,xe.x=0,xe.h=20,xe.w=20,xe.map=t.sprite,xe.frame=t.minFps[0];var we=[];if(void 0!==be)for(var Se in be[Symbol.for("config")].props)delete xe[be[Symbol.for("config")].props[Se]],we.push(be[Symbol.for("config")].props[Se]);c[26].populate(xe),!0===f&&(p-=1),e=c[26];var Te,ke={};if(ke.image=t.image,ke.x=0,ke.h=20,ke.w=20,ke.map=t.sprite,u=t.minFps[0],!0===Array.isArray(u)&&(u=i(u).slice(0)),ke.frame=u,"string"==typeof(s=ke.is||"Sprite")){if(!(Te=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Te=s);c[27]=Te.call(null,{props:ke},c[26],t),c[27][Symbol.for("slots")][0]?(e=c[27][Symbol.for("slots")][0],l=c[27],f=!0):e=c[27][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var Ce=n.components&&n.components.Sprite||r.Sprite;e=c[25];var Ae={};c[28]=this.element({parent:e||"root"},!0===f?l:t),Ae.image=t.image,Ae.x=18,Ae.h=20,Ae.w=20,Ae.map=t.sprite,Ae.frame=t.minFps[1];var Ee=[];if(void 0!==Ce)for(var Ie in Ce[Symbol.for("config")].props)delete Ae[Ce[Symbol.for("config")].props[Ie]],Ee.push(Ce[Symbol.for("config")].props[Ie]);c[28].populate(Ae),!0===f&&(p-=1),e=c[28];var Me,Re={};if(Re.image=t.image,Re.x=18,Re.h=20,Re.w=20,Re.map=t.sprite,u=t.minFps[1],!0===Array.isArray(u)&&(u=i(u).slice(0)),Re.frame=u,"string"==typeof(s=Re.is||"Sprite")){if(!(Me=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Me=s);c[29]=Me.call(null,{props:Re},c[28],t),c[29][Symbol.for("slots")][0]?(e=c[29][Symbol.for("slots")][0],l=c[29],f=!0):e=c[29][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var _e=n.components&&n.components.Sprite||r.Sprite;e=c[25];var Le={};c[30]=this.element({parent:e||"root"},!0===f?l:t),Le.image=t.image,Le.x=36,Le.h=20,Le.w=20,Le.map=t.sprite,Le.frame=t.minFps[2];var De=[];if(void 0!==_e)for(var Pe in _e[Symbol.for("config")].props)delete Le[_e[Symbol.for("config")].props[Pe]],De.push(_e[Symbol.for("config")].props[Pe]);c[30].populate(Le),!0===f&&(p-=1),e=c[30];var Oe,Ne={};if(Ne.image=t.image,Ne.x=36,Ne.h=20,Ne.w=20,Ne.map=t.sprite,u=t.minFps[2],!0===Array.isArray(u)&&(u=i(u).slice(0)),Ne.frame=u,"string"==typeof(s=Ne.is||"Sprite")){if(!(Oe=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Oe=s);c[31]=Oe.call(null,{props:Ne},c[30],t),c[31][Symbol.for("slots")][0]?(e=c[31][Symbol.for("slots")][0],l=c[31],f=!0):e=c[31][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[1];var Ue={};c[32]=this.element({parent:e||"root"},!0===f?l:t),Ue.x=150,Ue.y=40,c[32].populate(Ue),!0===f&&(p-=1);var Be=n.components&&n.components.Sprite||r.Sprite;e=c[32];var je={};c[33]=this.element({parent:e||"root"},!0===f?l:t),je.image=t.image,je.w=53,je.h=25,je.map=t.sprite,je.frame="max";var Fe=[];if(void 0!==Be)for(var ze in Be[Symbol.for("config")].props)delete je[Be[Symbol.for("config")].props[ze]],Fe.push(Be[Symbol.for("config")].props[ze]);c[33].populate(je),!0===f&&(p-=1),e=c[33];var Ge,Ve={};if(Ve.image=t.image,Ve.w=53,Ve.h=25,Ve.map=t.sprite,Ve.frame="max","string"==typeof(s=Ve.is||"Sprite")){if(!(Ge=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Ge=s);c[34]=Ge.call(null,{props:Ve},c[33],t),c[34][Symbol.for("slots")][0]?(e=c[34][Symbol.for("slots")][0],l=c[34],f=!0):e=c[34][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[32];var He={};c[35]=this.element({parent:e||"root"},!0===f?l:t),He.x=63,He.y=2,c[35].populate(He),!0===f&&(p-=1);var qe=n.components&&n.components.Sprite||r.Sprite;e=c[35];var Xe={};c[36]=this.element({parent:e||"root"},!0===f?l:t),Xe.image=t.image,Xe.x=0,Xe.h=20,Xe.w=20,Xe.map=t.sprite,Xe.frame=t.maxFps[0];var We=[];if(void 0!==qe)for(var Ke in qe[Symbol.for("config")].props)delete Xe[qe[Symbol.for("config")].props[Ke]],We.push(qe[Symbol.for("config")].props[Ke]);c[36].populate(Xe),!0===f&&(p-=1),e=c[36];var $e,Ye={};if(Ye.image=t.image,Ye.x=0,Ye.h=20,Ye.w=20,Ye.map=t.sprite,u=t.maxFps[0],!0===Array.isArray(u)&&(u=i(u).slice(0)),Ye.frame=u,"string"==typeof(s=Ye.is||"Sprite")){if(!($e=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&($e=s);c[37]=$e.call(null,{props:Ye},c[36],t),c[37][Symbol.for("slots")][0]?(e=c[37][Symbol.for("slots")][0],l=c[37],f=!0):e=c[37][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var Qe=n.components&&n.components.Sprite||r.Sprite;e=c[35];var Je={};c[38]=this.element({parent:e||"root"},!0===f?l:t),Je.image=t.image,Je.x=18,Je.h=20,Je.w=20,Je.map=t.sprite,Je.frame=t.maxFps[1];var Ze=[];if(void 0!==Qe)for(var et in Qe[Symbol.for("config")].props)delete Je[Qe[Symbol.for("config")].props[et]],Ze.push(Qe[Symbol.for("config")].props[et]);c[38].populate(Je),!0===f&&(p-=1),e=c[38];var tt,nt={};if(nt.image=t.image,nt.x=18,nt.h=20,nt.w=20,nt.map=t.sprite,u=t.maxFps[1],!0===Array.isArray(u)&&(u=i(u).slice(0)),nt.frame=u,"string"==typeof(s=nt.is||"Sprite")){if(!(tt=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(tt=s);c[39]=tt.call(null,{props:nt},c[38],t),c[39][Symbol.for("slots")][0]?(e=c[39][Symbol.for("slots")][0],l=c[39],f=!0):e=c[39][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var rt=n.components&&n.components.Sprite||r.Sprite;e=c[35];var ot={};c[40]=this.element({parent:e||"root"},!0===f?l:t),ot.image=t.image,ot.x=36,ot.h=20,ot.w=20,ot.map=t.sprite,ot.frame=t.maxFps[2];var it=[];if(void 0!==rt)for(var at in rt[Symbol.for("config")].props)delete ot[rt[Symbol.for("config")].props[at]],it.push(rt[Symbol.for("config")].props[at]);c[40].populate(ot),!0===f&&(p-=1),e=c[40];var st,ut={};if(ut.image=t.image,ut.x=36,ut.h=20,ut.w=20,ut.map=t.sprite,u=t.maxFps[2],!0===Array.isArray(u)&&(u=i(u).slice(0)),ut.frame=u,"string"==typeof(s=ut.is||"Sprite")){if(!(st=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(st=s);return c[41]=st.call(null,{props:ut},c[40],t),c[41][Symbol.for("slots")][0]?(e=c[41][Symbol.for("slots")][0],l=c[41],f=!0):e=c[41][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip6&&-1!==skip6.indexOf("frame")||t[6].set("frame",e.fps[0])},function(e,t,n,r,o,i){t[7][Symbol.for("props")].frame=e.fps[0]},function(e,t,n,r,o,i){"undefined"!=typeof skip8&&-1!==skip8.indexOf("frame")||t[8].set("frame",e.fps[1])},function(e,t,n,r,o,i){t[9][Symbol.for("props")].frame=e.fps[1]},function(e,t,n,r,o,i){"undefined"!=typeof skip10&&-1!==skip10.indexOf("frame")||t[10].set("frame",e.fps[2])},function(e,t,n,r,o,i){t[11][Symbol.for("props")].frame=e.fps[2]},function(e,t,n,r,o,i){"undefined"!=typeof skip16&&-1!==skip16.indexOf("frame")||t[16].set("frame",e.avgFps[0])},function(e,t,n,r,o,i){t[17][Symbol.for("props")].frame=e.avgFps[0]},function(e,t,n,r,o,i){"undefined"!=typeof skip18&&-1!==skip18.indexOf("frame")||t[18].set("frame",e.avgFps[1])},function(e,t,n,r,o,i){t[19][Symbol.for("props")].frame=e.avgFps[1]},function(e,t,n,r,o,i){"undefined"!=typeof skip20&&-1!==skip20.indexOf("frame")||t[20].set("frame",e.avgFps[2])},function(e,t,n,r,o,i){t[21][Symbol.for("props")].frame=e.avgFps[2]},function(e,t,n,r,o,i){"undefined"!=typeof skip26&&-1!==skip26.indexOf("frame")||t[26].set("frame",e.minFps[0])},function(e,t,n,r,o,i){t[27][Symbol.for("props")].frame=e.minFps[0]},function(e,t,n,r,o,i){"undefined"!=typeof skip28&&-1!==skip28.indexOf("frame")||t[28].set("frame",e.minFps[1])},function(e,t,n,r,o,i){t[29][Symbol.for("props")].frame=e.minFps[1]},function(e,t,n,r,o,i){"undefined"!=typeof skip30&&-1!==skip30.indexOf("frame")||t[30].set("frame",e.minFps[2])},function(e,t,n,r,o,i){t[31][Symbol.for("props")].frame=e.minFps[2]},function(e,t,n,r,o,i){"undefined"!=typeof skip36&&-1!==skip36.indexOf("frame")||t[36].set("frame",e.maxFps[0])},function(e,t,n,r,o,i){t[37][Symbol.for("props")].frame=e.maxFps[0]},function(e,t,n,r,o,i){"undefined"!=typeof skip38&&-1!==skip38.indexOf("frame")||t[38].set("frame",e.maxFps[1])},function(e,t,n,r,o,i){t[39][Symbol.for("props")].frame=e.maxFps[1]},function(e,t,n,r,o,i){"undefined"!=typeof skip40&&-1!==skip40.indexOf("frame")||t[40].set("frame",e.maxFps[2])},function(e,t,n,r,o,i){t[41][Symbol.for("props")].frame=e.maxFps[2]}],context:{}},state:function(){return{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready:function(){}}})}},Bo={log:{name:"log",plugin:function(){return C("App")}}},jo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0;if("object"===x(t)?n=t:r=t,"function"==typeof e){if(void 0===r)throw Error("Error registering plugin: name is required for plugin");Bo[r]={plugin:e,options:n}}else e.plugin&&jo(e.plugin,r||e.name,n)},Fo=function(e){throw new Error("Parameter ".concat(e," is required"))},zo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fo("name"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo("config"),n=void 0,r=function(n,r,o,i){var a=this;this.componentId=function(e){return"BlitsComponent::".concat(e,"_").concat(q[e]=(q[e]||0)+1)}(e),this[b.effects]=[],this.lifecycle=Object.assign(Object.create(de),{component:this,previous:null,current:null}),this.parent=o,this.rootParent=i,this[b.holder]=r,this[b.id]=++X,this[b.props]=fe(n.props||{},S.get("reactivityMode")),this[b.timeouts]=[],this[b.intervals]=[],this[b.originalState]=t.state&&"function"==typeof t.state&&t.state.apply(this)||{},this[b.originalState].hasFocus=!1,this[b.state]=fe(this[b.originalState],S.get("reactivityMode")),this.lifecycle.state="init",this[b.children]=t.code.render.apply(xr,[r,this,t,Do,re,se,c])||[],this[b.wrapper]=this[b.children][0],this[b.slots]=this[b.children].filter(function(e){return e[b.isSlot]}),t.hooks&&(t.hooks.frameTick&&br.on("frameTick",function(e,t){return K("frameTick",a[b.identifier],a,[t])}),t.hooks.idle&&br.on("idle",function(){K("idle",a[b.identifier],a)}),t.hooks.attach&&this[b.wrapper].node.on("inBounds",function(){a.lifecycle.state="attach"}),t.hooks.detach&&this[b.wrapper].node.on("outOfBounds",function(e,t){t.previous>0&&(a.lifecycle.state="detach")}),t.hooks.enter&&this[b.wrapper].node.on("inViewport",function(){a.lifecycle.state="enter"}),t.hooks.exit&&this[b.wrapper].node.on("outOfBounds",function(){a.lifecycle.state="exit"}));for(var s=t.code.effects,u=function(e){var n=function(){s[e](a,a[b.children],t,Do,i,re)};a[b.effects].push(n),re(n)},l=0;l<s.length;l++)u(l);if(this[b.watchers])for(var f=Object.keys(this[b.watchers]),p=f.length,d=function(){var e=a,t=f[h],n=t;if(t.indexOf(".")>-1){var r=t.split(".");t=r.pop();for(var o=0;o<r.length;o++)e=e[r[o]]}var i=a[t],s=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=e[t];i===o&&!0!==r||(a[b.watchers][n].apply(a,[o,i]),i=o)};a[b.effects].push(s),re(s)},h=0;h<p;h++)d();return setTimeout(function(){return a.lifecycle.state="ready"}),this},o=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(!1===Mo[b.launched]){for(var u=Object.keys(Bo),l=u.length,f={},p=0;p<l;p++){var d=u[p],h="$".concat(d);h in Mo&&c.warn('"'.concat(d,'" (this.').concat(h,") already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!"));var m=Bo[d];f[h]={value:Object.defineProperties(m.plugin(m.options),Io),writable:!1,enumerable:!0,configurable:!0}}for(var x in Object.defineProperties(Mo,f),f)Object.defineProperties(Mo[x],f),delete Mo[x][x];Do=Uo(),Mo[b.launched]=!0}return void 0===n&&(c.debug("Setting up ".concat(e," component")),n=Lo(Object.create(Mo),t)),void 0===t.code&&(c.debug("Generating code for ".concat(e," component")),t.code=D.call(t,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=0,r=0,o=[],i=null,a=0,s=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,u=/^\s*(\/?>)\s*/,l=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,c=/^<>\s*/,f=/^\s*(<\/>)\s*/,p=function(t){n>=e.length||t()},d=function(e){return e.replace(/<!--[^]*?-->/gm,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim()},h=function(t){var o=e.slice(n).match(t);return o&&(r=n,n+=o[0].length),o},m=function(){h(c)?(o.push(y(y(y(y({},Symbol.for("componentType"),null),b.type,"opening"),b.level,a),b.cursorTagStart,r)),a++,p(m)):p(x)},x=function(){h(f)?(a--,o.push(y(y(y({},Symbol.for("componentType"),null),b.type,"closing"),b.level,a)),p(m)):p(w)},w=function(){var e=h(s);if(!e)throw E("InvalidTag");i=y(y(y({},Symbol.for("componentType"),e[1]),b.level,a),b.cursorTagStart,r),e[0].startsWith("</")?(a--,i[b.type]="closing",i[b.level]=a):(i[b.type]="opening",a++),p(S)},S=function(){var t=h(u);if(t){if("/>"===t[1]){if("closing"===i[b.type])throw E("InvalidClosingTag");i[b.type]="self-closing",a--}if("opening"===i[b.type]){var r=e.slice(n,e.indexOf("<",n));r&&(i.content=r,n+=r.length)}o.push(i),p(m)}else p(T)},T=function(){var e=h(l);if(!e)throw E("InvalidAttribute");if("closing"===i[b.type])throw E("AttributesInClosingTag");var t=e[2],n=new RegExp("^(.*?)".concat(t,"\\s*")),r=h(n);if(!r)throw E("MissingOrInvalidAttributeValue");var o=k(e[1],r[1]);i[o.name]=o.value,p(S)},k=function(e,t){if(e.includes(".")){var n=v(e.split("."),2),r=n[0],o=n[1];return{name:r,value:"{".concat(o,": ").concat(t,"}")}}return["color",":color",":effects","effects"].includes(e)?C(e,t):{name:e,value:t}},C=function(e,t){var n=t,r=L(n,null);if(null===r){for(var o,i=/'([^']+)'/g,a=0,s="";null!==(o=i.exec(t));){var u=o[1],l=o.index,c=o[0].length;s+=t.slice(a,l),s+=null===(r=L(u,null))?t.slice(l,l+c):"'".concat(r,"'"),a=l+c}n=s+=t.slice(a)}else n=r;return{name:e,value:n}},A=function(e){for(var t=[],n=!1,r={children:[]},o=r,i=0;i<e.length;i++){var a=e[i];if(0===a[b.level]&&"closing"!==a[b.type]){if(n)throw I("MultipleTopLevelTags",a);if(void 0!==a[":for"])throw I("ForAttributeOnRootElement",a);n=!0}if("opening"===a[b.type])t.push(y(y(y(y(y({},b.level,a[b.level]),b.type,a[b.type]),b.cursorTagStart,a[b.cursorTagStart]),Symbol.for("componentType"),a[Symbol.for("componentType")]),"parent",o));else if("closing"===a[b.type]){var s=0===t.length,u=!1,l=!1;if(s||(u=t[t.length-1][b.level]!==a[b.level],l=t[t.length-1][Symbol.for("componentType")]!==a[Symbol.for("componentType")]),s||u||l)throw I("MismatchedClosingTag",a);o=t.pop().parent}var c=g({},a);delete c[b.type],delete c[b.level],delete c[b.cursorTagStart],"opening"===a[b.type]?(i+1<e.length&&"closing"!==e[i+1][b.type]&&(c.children=[]),o.children.push(c),o=c):"self-closing"===a[b.type]&&o.children.push(c)}if(t.length>0)throw I("UnclosedTags",t);return r},E=function(t){var o=R();t="".concat(t," in ").concat(o);var i=new Error(t);i.name="TemplateParseError";var a=Math.max(0,r-10),s=Math.min(e.length,n+50),u=e.slice(a,s),l=n-a;return i.context=M(l,u),i},I=function(t,n){var r=R();t="".concat(t," in ").concat(r);var o=new Error(t);function i(t){var n=Math.max(0,t[b.cursorTagStart]-10),r=e.slice(n,n+50);return M(10,r)}return o.name="TemplateStructureError",Array.isArray(n)?o.context=n.map(function(e){return i(e)}).join("\n"):o.context=i(n),o},M=function(e,t){var n=" ".repeat(e)+"^";return"\n".concat(t,"\n").concat(n,"\n")},R=function(){return t||"Blits.Application"};return function(){e=d(e);try{return p(m),A(o)}catch(t){throw"TemplateParseError"!=t.name&&"TemplateStructureError"!=t.name||(t.message="".concat(t.message,"\n").concat(t.context)),t}}()}(t.template))),r.call(Object.create(n),o,i,a,s)};return o[Symbol.for("config")]=t,o[b.isComponent]=!0,o},Go=t("B",{Component:zo,Application:function(e){var t,r,o,a={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};return e.hooks=e.hooks||{},e.hooks[b.destroy]=function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",r)},e.hooks[b.init]=function(){var e=this;this.$announcer.toggle(S.get("announcer",!1));var s=g(g({},a),S.get("keymap",{}));t=function(){var t=i(n().m(function t(r){var i;return n().w(function(t){for(;;)switch(t.n){case 0:if(i=s[r.key]||s[r.keyCode]||r.key||r.keyCode,void 0===e[b.inputEvents]||void 0===e[b.inputEvents].intercept){t.n=2;break}return t.n=1,e[b.inputEvents].intercept.call(e,r);case 1:if((r=t.v)instanceof KeyboardEvent!=!1){t.n=2;break}return t.a(2);case 2:po.input(i,r),clearTimeout(o),o=setTimeout(function(){po.hold=!0},S.get("holdTimeout",50));case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),r=function(e){var t=fo.get(e.code);void 0!==t&&"function"==typeof t&&(fo.delete(e.code),t()),clearTimeout(o),po.hold=!1},document.addEventListener("keydown",t),document.addEventListener("keyup",r),setTimeout(function(){return po.set(e)})},zo("App",e)},Launch:function(e,t,n){S.set(n),c=C("Blits"),function(){return wr.apply(this,arguments)}().then(function(e){c.info("Blits Version ",vr),c.info("Renderer Version ",e)}),xr.element=mr,br=gr(e,t,n)},Plugin:jo}),Vo=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(0===r.status||200===r.status?t(JSON.parse(r.responseText)):n(r.statusText))},r.open("GET",e),r.send(null)})},Ho={name:"language",plugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n={},r=fe({language:"",loaded:0},S.get("reactivityMode"),!0),o=function(e){var n=0===Object.keys(t).length?"No translations loaded. Please load a file with translations or specify a translations object manually":e in t==!1&&"Language ".concat(e," not available in the loaded translations");n?(c.warn(n),r.language=e):i(e).then(function(){r.language=e})},i=function(e){return new Promise(function(r){var o=t[e];"object"===x(o)?(n=o,r()):"string"==typeof o&&Vo(o).then(function(o){t[e]=o,n=o,r()}).catch(function(e){c.error(e)})})},a=function(e){return Vo(e).then(function(e){s(e)}).catch(function(e){c.error(e)})},s=function(e){t=e,i(r.language).then(function(){r.loaded++})};return"file"in e?a(e.file).then(function(){"language"in e&&o(e.language)}):"language"in e&&o(e.language),{translate:function(e){r.language,r.loaded;var t=Array.prototype.slice.call(arguments).slice(1);return 0===t.length?n&&n[e]||e:(1===t.length&&"object"===x(t[0])&&(t=t.pop()),Object.keys(Array.isArray(t)?Object.assign({},t):t).reduce(function(e,n){return e.replace(new RegExp("{\\s?"+n+"\\s?}","g"),t[n])},n&&n[e]||e))},get language(){return r.language},set:function(e){o(e)},translations:function(e){s(e)},load:function(e){return a(e)}}}},qo={name:"theme",plugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=fe({current:"default"},S.get("reactivityMode"),!0),r={},o=null;return"themes"in e==!0?(r=e.themes,n.current=e.current||"default",o=e.base||"default"):r={default:e},{get:function(e,i){if(n.current,void 0!==t[e])return t[e];var a=function(e,t,n){for(var r=n.split("."),o=0;o<r.length;o++){var i=r[o];if(null!==e&&i in e==1)e=e[i],t=null!==t&&i in t==1?t[i]:null;else{if(null===t||i in t!=1){e=void 0;break}e=t=t[i]}}return e}(r[n.current],r[o]||null,e);return void 0!==a?(t[e]=a,a):i},set:function(e){e in r?(t={},n.current=e):c.warn("Theme ".concat(e," not found"))}}}},Xo=function(e){return new URLSearchParams(window.location.search).get(e)},Wo={sky:{test:function(){return navigator.userAgent.indexOf("WPE Sky")>-1||"sky"===Xo("keymapping")},mapping:{Escape:"back",27:"back"}},webos:{test:function(){return navigator.userAgent.indexOf("WebOS")>-1||"webos"===Xo("keymapping")},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test:function(){return navigator.userAgent.indexOf("Tizen")>-1||"tizen"===Xo("keymapping")},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},Ko=Go.Component("PortalItem",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=370,u.h=320,u.scale={transition:t.hasFocus?1.1:1},u.color=t.backgroundColor,u.effects=[{type:"radius",props:{radius:6}}],s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.x=30,l.y=30,l.content=t.number,l.size=84,l.color=t.fontColor,l.__textnode=!0,s[1].populate(l),e=s[0];var c={};s[2]=this.element({parent:e||"root"},t),c.x=30,c.y=140,c.content=t.title,c.size=42,c.font="raleway",c.color=t.fontColor,c.letterspacing=2,c.__textnode=!0,s[2].populate(c),e=s[0];var f={};return s[3]=this.element({parent:e||"root"},t),f.x=30,f.y=200,f.content=t.description,f.maxwidth=300,f.size=28,f.color=t.fontColor,f.lineheight=32,f.__textnode=!0,s[3].populate(f),s},effects:[function(e,t,n,r,o,i){t[0].set("scale",{transition:e.hasFocus?1.1:1})},function(e,t,n,r,o,i){t[0].set("color",e.backgroundColor)},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:6}}])},function(e,t,n,r,o,i){t[1].set("content",e.number)},function(e,t,n,r,o,i){t[1].set("color",e.fontColor)},function(e,t,n,r,o,i){t[2].set("content",e.title)},function(e,t,n,r,o,i){t[2].set("color",e.fontColor)},function(e,t,n,r,o,i){t[3].set("content",e.description)},function(e,t,n,r,o,i){t[3].set("color",e.fontColor)}],context:{}},props:["title","description","index","id"],state:function(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?"0".concat(this.index+1):this.index+1}},hooks:{focus:function(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus:function(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter:function(){this.$router.to("/".concat(this.id))},back:function(){}}}),$o=Go.Component("PortalRow",{components:{PortalItem:Ko},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1;f[0]=this.element({parent:e||"root"},!0===p?l:t),f[0].populate({}),e=f[0];var d={};f[1]=this.element({parent:e||"root"},!0===p?l:t),d.alpha={transition:{value:t.itemOffset<240?1:0,duration:200}},f[1].populate(d),e=f[1];var h={};f[2]=this.element({parent:e||"root"},!0===p?l:t),h.content=t.title,h.x=60,h.__textnode=!0,f[2].populate(h),e=f[1];var m={};f[3]=this.element({parent:e||"root"},!0===p?l:t),m.y=50,m.x=60,m.h=1,m.w=1800,m.color="0xe8d7f9ff",f[3].populate(m),e=f[0];var g={};f[4]=this.element({parent:e||"root"},!0===p?l:t),g.y=100,g.x={transition:t.rowOffset},f[4].populate(g),e=f[4];var v,y,b,x=[],w=function(){t[Symbol.for("removeGlobalEffects")](b),b=null,b=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,m=d.length,g={}||{};v=g.from||0,y="to"in g?g.to:d.length;for(;m--;){var b=d[m];m<y&&m>=v&&h.add(""+b.id)}for(var x=f.length;x--;)if(!1===h.has(f[x])){var w=f[x];a[5][w]&&a[5][w].destroy(),delete a[5][w],a[6][w]&&a[6][w].destroy(),delete a[6][w]}f.length=0;for(var S=d.length,T=[],k=function(){if(C<v||C>=y)return 1;var h=Object.create(t);e=a[4],h.item=d[C],h.index=C,h.key=""+h.item.id,f.push(h.key);var m=n.components&&n.components.PortalItem||r.PortalItem;void 0===a[5]&&(a[5]={});var g={};void 0===a[5][h.key]&&(a[5][h.key]=c.element({parent:e||"root"},!0===p?l:t)),g.x={transition:{value:h.itemOffset+430*h.index,delay:h.index%4*50,duration:500}},g.title=h.item.title,g.description=h.item.description,g.id=h.item.id,g.index=h.index,g.ref="item"+h.index;var b=[];if(void 0!==m)for(var x in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[x]],b.push(m[Symbol.for("config")].props[x]);void 0===a[5][h.key].nodeId&&a[5][h.key].populate(g),void 0===a[6]&&(a[6]={}),e=a[5][h.key];var w={};if(void 0===a[6][h.key]){var S;if(u={transition:{value:h.itemOffset+430*h.index,delay:h.index%4*50,duration:500}},!0===Array.isArray(u)&&(u=i(u).slice(0)),w.x=u,w.title=h.item.title,w.description=h.item.description,w.id=h.item.id,w.index=h.index,u="item"+h.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.ref=u,"string"==typeof(s=w.is||"PortalItem")){if(!(S=n.components&&n.components[s]||r[s]))throw new Error('Component "PortalItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(S=s);a[6][h.key]=S.call(null,{props:w},a[5][h.key],t),a[6][h.key][Symbol.for("slots")][0]?(e=a[6][h.key][Symbol.for("slots")][0],l=a[6][h.key],p=!0):e=a[6][h.key][Symbol.for("children")][0]}var k=function(){void 0!==b&&-1!==b.indexOf("ref")||a[5][h.key].set("ref","item"+h.index)};o(k,null),T.push(k),t[Symbol.for("effects")].push(k),a[6][h.key][Symbol.for("props")].ref="item"+h.index},C=0;C<S;C++)k();return T}(t.items,f,x)};t[Symbol.for("effects")].push(w),o(w,["items"]);var S=function(){t.itemOffset;for(var e=0;e<t.items.length;e++)if(!(e<v||e>=y)){var n={};n.index=e,n.item=t.items[e],n.key=n.item.id,"undefined"!=typeof skip5&&-1!==skip5.indexOf("x")||f[5][n.key].set("x",{transition:{value:t.itemOffset+430*n.index,delay:n.index%4*50,duration:500}})}};t[Symbol.for("effects")].push(S),o(S);var T=function(){t.itemOffset;for(var e=0;e<t.items.length;e++)if(!(e<v||e>=y)){var n={};n.index=e,n.item=t.items[e],n.key=n.item.id,f[6][n.key][Symbol.for("props")].x={transition:{value:t.itemOffset+430*n.index,delay:n.index%4*50,duration:500}}}};return t[Symbol.for("effects")].push(T),o(T),f},effects:[function(e,t,n,r,o,i){t[1].set("alpha",{transition:{value:e.itemOffset<240?1:0,duration:200}})},function(e,t,n,r,o,i){t[4].set("x",{transition:e.rowOffset})}],context:{}},props:["title","items"],state:function(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready:function(){this.itemOffset=0},focus:function(){this.$trigger("focused")}},watch:{focused:function(e){var t=this.$select("item".concat(e));t&&t.$focus&&(t.$focus(),e<1?this.rowOffset=60:e>this.items.length-2?this.rowOffset=60-430*(this.items.length-2)+430:this.rowOffset=60-430*e+430)}},input:{left:function(){this.focused>0?this.focused--:this.focused=this.items.length-1},right:function(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),Yo=Go.Component("SourceInfo",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.x=1860,u.y={transition:{value:1060+t.offsetY,delay:1e3,duration:300,easing:"ease-out"}},u.alpha={transition:{value:t.alpha,delay:1e3,duration:300,easing:"ease-out"}},u.w=480,u.h=100,u.mount=1,u.color="{top: '0x000000dd', bottom: '0x000000ff'}",u.effects=[{type:"radius",props:{radius:10}}],s[0].populate(u),e=s[0];var l={};return s[1]=this.element({parent:e||"root"},t),l.y=18,l.x=20,l.size=26,l.maxwidth=440,l.align="center",l.lineheight=32,l.content='Press "U" to check out the source code of this example on GitHub',l.__textnode=!0,s[1].populate(l),s},effects:[function(e,t,n,r,o,i){t[0].set("y",{transition:{value:1060+e.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(e,t,n,r,o,i){t[0].set("alpha",{transition:{value:e.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state:function(){return{offsetY:15,alpha:0}},hooks:{ready:function(){this.offsetY=0,this.alpha=1}}}),Qo="1.14.0",Jo=Go.Component("Portal",{components:{PortalRow:$o,SourceInfo:Yo},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0,d={};c[0]=this.element({parent:e||"root"},!0===f?l:t),d.w=1920,d.h=1080,d.color="{top: '0x44037aff', bottom: '0x240244ff'}",c[0].populate(d),!0===f&&(p-=1);var h=n.components&&n.components.PortalRow||r.PortalRow;e=c[0];var m={};c[1]=this.element({parent:e||"root"},!0===f?l:t),m.mount="{y: 0.5}",m.h=500,m.y={transition:420*-t.rowFocused+550},m.title="Demos",m.items=t.demo,m.ref="row0";var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);c[1].populate(m),!0===f&&(p-=1),e=c[1];var y,b={};if(b.mount="{y: 0.5}",b.h=500,u={transition:420*-t.rowFocused+550},!0===Array.isArray(u)&&(u=i(u).slice(0)),b.y=u,b.title="Demos",b.items=t.demo,b.ref="row0","string"==typeof(s=b.is||"PortalRow")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "PortalRow" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);c[2]=y.call(null,{props:b},c[1],t),c[2][Symbol.for("slots")][0]?(e=c[2][Symbol.for("slots")][0],l=c[2],f=!0):e=c[2][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var x=n.components&&n.components.PortalRow||r.PortalRow;e=c[0];var w={};c[3]=this.element({parent:e||"root"},!0===f?l:t),w.mount="{y: 0.5}",w.h=500,w.y={transition:420*-t.rowFocused+1100},w.title="Examples and tests",w.items=t.example,w.ref="row1";var S=[];if(void 0!==x)for(var T in x[Symbol.for("config")].props)delete w[x[Symbol.for("config")].props[T]],S.push(x[Symbol.for("config")].props[T]);c[3].populate(w),!0===f&&(p-=1),e=c[3];var k,C={};if(C.mount="{y: 0.5}",C.h=500,u={transition:420*-t.rowFocused+1100},!0===Array.isArray(u)&&(u=i(u).slice(0)),C.y=u,C.title="Examples and tests",C.items=t.example,C.ref="row1","string"==typeof(s=C.is||"PortalRow")){if(!(k=n.components&&n.components[s]||r[s]))throw new Error('Component "PortalRow" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(k=s);c[4]=k.call(null,{props:C},c[3],t),c[4][Symbol.for("slots")][0]?(e=c[4][Symbol.for("slots")][0],l=c[4],f=!0):e=c[4][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var A=n.components&&n.components.PortalRow||r.PortalRow;e=c[0];var E={};c[5]=this.element({parent:e||"root"},!0===f?l:t),E.mount="{y: 0.5}",E.h=500,E.y={transition:420*-t.rowFocused+1650},E.title="Benchmarks and stress tests",E.items=t.benchmark,E.ref="row2";var I=[];if(void 0!==A)for(var M in A[Symbol.for("config")].props)delete E[A[Symbol.for("config")].props[M]],I.push(A[Symbol.for("config")].props[M]);c[5].populate(E),!0===f&&(p-=1),e=c[5];var R,_={};if(_.mount="{y: 0.5}",_.h=500,u={transition:420*-t.rowFocused+1650},!0===Array.isArray(u)&&(u=i(u).slice(0)),_.y=u,_.title="Benchmarks and stress tests",_.items=t.benchmark,_.ref="row2","string"==typeof(s=_.is||"PortalRow")){if(!(R=n.components&&n.components[s]||r[s]))throw new Error('Component "PortalRow" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(R=s);c[6]=R.call(null,{props:_},c[5],t),c[6][Symbol.for("slots")][0]?(e=c[6][Symbol.for("slots")][0],l=c[6],f=!0):e=c[6][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[0];var L={};c[7]=this.element({parent:e||"root"},!0===f?l:t),L.w=1920,L.h=200,L.color="0x44037aff",c[7].populate(L),!0===f&&(p-=1),e=c[7];var D={};c[8]=this.element({parent:e||"root"},!0===f?l:t),D.w=1920,D.h=70,D.y=200,D.color="{top: '0x44037aff'}",c[8].populate(D),!0===f&&(p-=1),e=c[7];var P={};c[9]=this.element({parent:e||"root"},!0===f?l:t),P.y={transition:{value:80-t.logoOffset,duration:400}},c[9].populate(P),!0===f&&(p-=1),e=c[9];var O={};c[10]=this.element({parent:e||"root"},!0===f?l:t),O.src="assets/blits-logo-full.png",O.w=200,O.h=112,O.x=60,c[10].populate(O),!0===f&&(p-=1),e=c[9];var N={};c[11]=this.element({parent:e||"root"},!0===f?l:t),N.w=2,N.h=120,N.y="-10",N.color="0xffffff80",N.x=300,c[11].populate(N),!0===f&&(p-=1),e=c[9];var U={};c[12]=this.element({parent:e||"root"},!0===f?l:t),U.x=320,U.y=16,c[12].populate(U),!0===f&&(p-=1),e=c[12];var B={};c[13]=this.element({parent:e||"root"},!0===f?l:t),B.y=0,B.size=36,B.content="Example App",B.__textnode=!0,c[13].populate(B),!0===f&&(p-=1),e=c[12];var j={};return c[14]=this.element({parent:e||"root"},!0===f?l:t),j.y=50,j.size=24,j.content="v"+t.version,j.__textnode=!0,c[14].populate(j),!0===f&&(p-=1),c},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip1&&-1!==skip1.indexOf("y")||t[1].set("y",{transition:420*-e.rowFocused+550})},function(e,t,n,r,o,i){t[2][Symbol.for("props")].y={transition:420*-e.rowFocused+550}},function(e,t,n,r,o,i){"undefined"!=typeof skip3&&-1!==skip3.indexOf("y")||t[3].set("y",{transition:420*-e.rowFocused+1100})},function(e,t,n,r,o,i){t[4][Symbol.for("props")].y={transition:420*-e.rowFocused+1100}},function(e,t,n,r,o,i){"undefined"!=typeof skip5&&-1!==skip5.indexOf("y")||t[5].set("y",{transition:420*-e.rowFocused+1650})},function(e,t,n,r,o,i){t[6][Symbol.for("props")].y={transition:420*-e.rowFocused+1650}},function(e,t,n,r,o,i){t[9].set("y",{transition:{value:80-e.logoOffset,duration:400}})}],context:{}},state:function(){return{version:Qo,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'},{title:"Announcer",id:"examples/announcer",description:'Using the built-in "Announcer" plugin'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready:function(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused:function(e){var t=this.$select("row".concat(e));t&&t.$focus&&t.$focus()}},input:{up:function(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down:function(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),Zo=Go.Component("Letter",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.w=t.w,u.h={transition:{value:410+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},u.color="0xe6e6e6ff",s[1].populate(u),e=s[0];var l={};s[2]=this.element({parent:e||"root"},t),l.w=t.w,l.h=280,l.src=t.image,l.y={transition:{value:400+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},s[2].populate(l),e=s[0];var c={};return s[3]=this.element({parent:e||"root"},t),c.w=t.w,c.color="0xe6e6e6ff",c.h={transition:{value:500-t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},c.y={transition:{value:660+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},s[3].populate(c),s},effects:[function(e,t,n,r,o,i){t[1].set("h",{transition:{value:410+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,r,o,i){t[2].set("src",e.image)},function(e,t,n,r,o,i){t[2].set("y",{transition:{value:400+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,r,o,i){t[3].set("h",{transition:{value:500-e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,r,o,i){t[3].set("y",{transition:{value:660+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image:function(){return this.letter,"assets/".concat(this.letter,".png")}},state:function(){return{offset:"up"===this.direction?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready:function(){this.animate()}},methods:{animate:function(){var e=this;this.$setTimeout(function(){e.offset=0},1e3),this.$setTimeout(function(){e.wait=e.delay+150,e.duration=1e3,e.offset=1080},2800),this.$setTimeout(function(){e.wait=e.delay/3,e.timingFunction="ease-in-out",e.duration=1500,e.offset=0},5e3)}}}),ei=Go.Component("Intro",{components:{Letter:Zo},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0,p={};l[0]=this.element({parent:e||"root"},!0===c?u:t),p.w=1920,p.h=1080,p.src="assets/background.jpg",l[0].populate(p),!0===c&&(f-=1);var d=n.components&&n.components.Letter||r.Letter;e=l[0];var h={};l[1]=this.element({parent:e||"root"},!0===c?u:t),h.letter="l",h.w=294;var m=[];if(void 0!==d)for(var g in d[Symbol.for("config")].props)delete h[d[Symbol.for("config")].props[g]],m.push(d[Symbol.for("config")].props[g]);l[1].populate(h),!0===c&&(f-=1),e=l[1];var v,y={};if(y.letter="l",y.w=294,"string"==typeof(s=y.is||"Letter")){if(!(v=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(v=s);l[2]=v.call(null,{props:y},l[1],t),l[2][Symbol.for("slots")][0]?(e=l[2][Symbol.for("slots")][0],u=l[2],c=!0):e=l[2][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var b=n.components&&n.components.Letter||r.Letter;e=l[0];var x={};l[3]=this.element({parent:e||"root"},!0===c?u:t),x.letter="i-1",x.w=128,x.x=294,x.direction="up",x.delay=50;var w=[];if(void 0!==b)for(var S in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[S]],w.push(b[Symbol.for("config")].props[S]);l[3].populate(x),!0===c&&(f-=1),e=l[3];var T,k={};if(k.letter="i-1",k.w=128,k.x=294,k.direction="up",k.delay=50,"string"==typeof(s=k.is||"Letter")){if(!(T=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(T=s);l[4]=T.call(null,{props:k},l[3],t),l[4][Symbol.for("slots")][0]?(e=l[4][Symbol.for("slots")][0],u=l[4],c=!0):e=l[4][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var C=n.components&&n.components.Letter||r.Letter;e=l[0];var A={};l[5]=this.element({parent:e||"root"},!0===c?u:t),A.letter="g-1",A.w=205,A.x=422,A.delay=100;var E=[];if(void 0!==C)for(var I in C[Symbol.for("config")].props)delete A[C[Symbol.for("config")].props[I]],E.push(C[Symbol.for("config")].props[I]);l[5].populate(A),!0===c&&(f-=1),e=l[5];var M,R={};if(R.letter="g-1",R.w=205,R.x=422,R.delay=100,"string"==typeof(s=R.is||"Letter")){if(!(M=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(M=s);l[6]=M.call(null,{props:R},l[5],t),l[6][Symbol.for("slots")][0]?(e=l[6][Symbol.for("slots")][0],u=l[6],c=!0):e=l[6][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var _=n.components&&n.components.Letter||r.Letter;e=l[0];var L={};l[7]=this.element({parent:e||"root"},!0===c?u:t),L.letter="h",L.w=224,L.x=627,L.direction="up",L.delay=150;var D=[];if(void 0!==_)for(var P in _[Symbol.for("config")].props)delete L[_[Symbol.for("config")].props[P]],D.push(_[Symbol.for("config")].props[P]);l[7].populate(L),!0===c&&(f-=1),e=l[7];var O,N={};if(N.letter="h",N.w=224,N.x=627,N.direction="up",N.delay=150,"string"==typeof(s=N.is||"Letter")){if(!(O=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(O=s);l[8]=O.call(null,{props:N},l[7],t),l[8][Symbol.for("slots")][0]?(e=l[8][Symbol.for("slots")][0],u=l[8],c=!0):e=l[8][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var U=n.components&&n.components.Letter||r.Letter;e=l[0];var B={};l[9]=this.element({parent:e||"root"},!0===c?u:t),B.letter="t",B.w=190,B.x=851,B.delay=200;var j=[];if(void 0!==U)for(var F in U[Symbol.for("config")].props)delete B[U[Symbol.for("config")].props[F]],j.push(U[Symbol.for("config")].props[F]);l[9].populate(B),!0===c&&(f-=1),e=l[9];var z,G={};if(G.letter="t",G.w=190,G.x=851,G.delay=200,"string"==typeof(s=G.is||"Letter")){if(!(z=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(z=s);l[10]=z.call(null,{props:G},l[9],t),l[10][Symbol.for("slots")][0]?(e=l[10][Symbol.for("slots")][0],u=l[10],c=!0):e=l[10][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var V=n.components&&n.components.Letter||r.Letter;e=l[0];var H={};l[11]=this.element({parent:e||"root"},!0===c?u:t),H.letter="n-1",H.w=221,H.x=1041,H.direction="up",H.delay=250;var q=[];if(void 0!==V)for(var X in V[Symbol.for("config")].props)delete H[V[Symbol.for("config")].props[X]],q.push(V[Symbol.for("config")].props[X]);l[11].populate(H),!0===c&&(f-=1),e=l[11];var W,K={};if(K.letter="n-1",K.w=221,K.x=1041,K.direction="up",K.delay=250,"string"==typeof(s=K.is||"Letter")){if(!(W=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(W=s);l[12]=W.call(null,{props:K},l[11],t),l[12][Symbol.for("slots")][0]?(e=l[12][Symbol.for("slots")][0],u=l[12],c=!0):e=l[12][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var $=n.components&&n.components.Letter||r.Letter;e=l[0];var Y={};l[13]=this.element({parent:e||"root"},!0===c?u:t),Y.letter="i-2",Y.w=115,Y.x=1262,Y.delay=300;var Q=[];if(void 0!==$)for(var J in $[Symbol.for("config")].props)delete Y[$[Symbol.for("config")].props[J]],Q.push($[Symbol.for("config")].props[J]);l[13].populate(Y),!0===c&&(f-=1),e=l[13];var Z,ee={};if(ee.letter="i-2",ee.w=115,ee.x=1262,ee.delay=300,"string"==typeof(s=ee.is||"Letter")){if(!(Z=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Z=s);l[14]=Z.call(null,{props:ee},l[13],t),l[14][Symbol.for("slots")][0]?(e=l[14][Symbol.for("slots")][0],u=l[14],c=!0):e=l[14][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var te=n.components&&n.components.Letter||r.Letter;e=l[0];var ne={};l[15]=this.element({parent:e||"root"},!0===c?u:t),ne.letter="n-2",ne.w=219,ne.x=1377,ne.direction="up",ne.delay=350;var re=[];if(void 0!==te)for(var oe in te[Symbol.for("config")].props)delete ne[te[Symbol.for("config")].props[oe]],re.push(te[Symbol.for("config")].props[oe]);l[15].populate(ne),!0===c&&(f-=1),e=l[15];var ie,ae={};if(ae.letter="n-2",ae.w=219,ae.x=1377,ae.direction="up",ae.delay=350,"string"==typeof(s=ae.is||"Letter")){if(!(ie=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(ie=s);l[16]=ie.call(null,{props:ae},l[15],t),l[16][Symbol.for("slots")][0]?(e=l[16][Symbol.for("slots")][0],u=l[16],c=!0):e=l[16][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var se=n.components&&n.components.Letter||r.Letter;e=l[0];var ue={};l[17]=this.element({parent:e||"root"},!0===c?u:t),ue.letter="g-2",ue.w=324,ue.x=1596,ue.direction="up",ue.delay=400;var le=[];if(void 0!==se)for(var ce in se[Symbol.for("config")].props)delete ue[se[Symbol.for("config")].props[ce]],le.push(se[Symbol.for("config")].props[ce]);l[17].populate(ue),!0===c&&(f-=1),e=l[17];var fe,pe={};if(pe.letter="g-2",pe.w=324,pe.x=1596,pe.direction="up",pe.delay=400,"string"==typeof(s=pe.is||"Letter")){if(!(fe=n.components&&n.components[s]||r[s]))throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(fe=s);return l[18]=fe.call(null,{props:pe},l[17],t),l[18][Symbol.for("slots")][0]?(e=l[18][Symbol.for("slots")][0],u=l[18],c=!0):e=l[18][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),l},effects:[],context:{}}}),ti=Go.Component("Toggle",{code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0,d={};c[0]=this.element({parent:e||"root"},!0===f?l:t),d.w=100,d.h=50,d.y=5,d.color=t.bgColor,d.effects=[{type:"radius",props:{radius:25}}],c[0].populate(d),!0===f&&(p-=1);var h=n.components&&n.components.Circle||r.Circle;e=c[0];var m={};c[1]=this.element({parent:e||"root"},!0===f?l:t),m.x={transition:t.on?0:50},m.size=50;var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);c[1].populate(m),!0===f&&(p-=1),e=c[1];var y,b={};if(u={transition:t.on?0:50},!0===Array.isArray(u)&&(u=i(u).slice(0)),b.x=u,b.size=50,u=t.primaryColor,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.color=u,"string"==typeof(s=b.is||"Circle")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "Circle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);return c[2]=y.call(null,{props:b},c[1],t),c[2][Symbol.for("slots")][0]?(e=c[2][Symbol.for("slots")][0],l=c[2],f=!0):e=c[2][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){t[0].set("color",e.bgColor)},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:25}}])},function(e,t,n,r,o,i){"undefined"!=typeof skip1&&-1!==skip1.indexOf("x")||t[1].set("x",{transition:e.on?0:50})},function(e,t,n,r,o,i){t[2][Symbol.for("props")].x={transition:e.on?0:50}},function(e,t,n,r,o,i){t[2][Symbol.for("props")].color=e.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),ni=Go.Component("Bar",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w={value:t.w,duration:t.duration},u.h={value:t.h,duration:t.duration},u.color=t.bgColor,u.x=t.index*(t.w+t.w/4),u.effects=[{type:"radius",props:{radius:10}}],s[0].populate(u),e=s[0];var l={};return s[1]=this.element({parent:e||"root"},t),l.w=t.w,l.y={transition:{value:t.h-t.innerH,duration:t.duration}},l.h={transition:{value:t.innerH,duration:t.duration}},l.color=t.primaryColor,l.effects=[{type:"radius",props:{radius:10}}],s[1].populate(l),s},effects:[function(e,t,n,r,o,i){t[0].set("w",{value:e.w,duration:e.duration})},function(e,t,n,r,o,i){t[0].set("h",{value:e.h,duration:e.duration})},function(e,t,n,r,o,i){t[0].set("color",e.bgColor)},function(e,t,n,r,o,i){t[0].set("x",e.index*(e.w+e.w/4))},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:10}}])},function(e,t,n,r,o,i){t[1].set("w",e.w)},function(e,t,n,r,o,i){t[1].set("y",{transition:{value:e.h-e.innerH,duration:e.duration}})},function(e,t,n,r,o,i){t[1].set("h",{transition:{value:e.innerH,duration:e.duration}})},function(e,t,n,r,o,i){t[1].set("color",e.primaryColor)},function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state:function(){return{h:200,innerH:0,duration:400}},hooks:{ready:function(){this.innerH=this.height}},computed:{w:function(){return this.size,"large"===this.size?110:72}},watch:{bgColor:function(){var e=this;this.duration=1e-6,this.innerH=0,this.$setTimeout(function(){e.duration=400,e.innerH=e.height},200)},size:function(){var e=this;this.duration=1e-6,this.innerH=0,this.$setTimeout(function(){e.duration=400,e.innerH=e.height},100)}}}),ri=Go.Component("Theming",{components:{Bar:ni,Toggle:ti},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0,d={};c[0]=this.element({parent:e||"root"},!0===f?l:t),d.w=1920,d.h=1080,d.color={transition:t.$colors.get("bg")},c[0].populate(d),!0===f&&(p-=1),e=c[0];var h={};c[1]=this.element({parent:e||"root"},!0===f?l:t),h.y=1020,h.x=1160,h.size=28,h.color=t.$colors.get("color4"),h.content='Use "up", "down", "left" and "right" to change the appearance',h.__textnode=!0,c[1].populate(h),!0===f&&(p-=1),e=c[0];var m={};c[2]=this.element({parent:e||"root"},!0===f?l:t),m.x={transition:(1920-t.$sizes.get("w"))/2},m.y={transition:(1080-t.$sizes.get("h"))/2},c[2].populate(m),!0===f&&(p-=1),e=c[2];var g={};c[3]=this.element({parent:e||"root"},!0===f?l:t),g.x="-250",g.y="-100",g.src="assets/shadow.png",g.w=1e3,g.h=900,g.alpha=.5,c[3].populate(g),!0===f&&(p-=1),e=c[2];var v={};c[4]=this.element({parent:e||"root"},!0===f?l:t),v.w={transition:t.$sizes.get("w")},v.h={transition:t.$sizes.get("h")},v.color=t.$colors.get("color1"),v.effects=[{type:"radius",props:{radius:t.radius}}],c[4].populate(v),!0===f&&(p-=1),e=c[4];var y={};c[5]=this.element({parent:e||"root"},!0===f?l:t),y.w={transition:t.$sizes.get("w")},y.h=100,y.color=t.$colors.get("color2"),y.effects=[{type:"radius",props:{radius:t.radius}}],c[5].populate(y),!0===f&&(p-=1),e=c[4];var b={};c[6]=this.element({parent:e||"root"},!0===f?l:t),b.w={transition:t.$sizes.get("w")},b.h=80,b.y=20,b.color=t.$colors.get("color2"),c[6].populate(b),!0===f&&(p-=1),e=c[4];var x={};c[7]=this.element({parent:e||"root"},!0===f?l:t),x.content=t.text,x.color=t.$colors.get("color3"),x.size=28,x.x=20,x.y=14,x.__textnode=!0,c[7].populate(x),!0===f&&(p-=1);var w=n.components&&n.components.Toggle||r.Toggle;e=c[4];var S={};c[8]=this.element({parent:e||"root"},!0===f?l:t),S.x={transition:t.$sizes.get("w")-120},S.on="dark"===t.mode,S.bgColor=t.$colors.get("color1"),S.primaryColor="#22c55e";var T=[];if(void 0!==w)for(var k in w[Symbol.for("config")].props)delete S[w[Symbol.for("config")].props[k]],T.push(w[Symbol.for("config")].props[k]);c[8].populate(S),!0===f&&(p-=1),e=c[8];var C,A={};if(u={transition:t.$sizes.get("w")-120},!0===Array.isArray(u)&&(u=i(u).slice(0)),A.x=u,u="dark"===t.mode,!0===Array.isArray(u)&&(u=i(u).slice(0)),A.on=u,u=t.$colors.get("color1"),!0===Array.isArray(u)&&(u=i(u).slice(0)),A.bgColor=u,A.primaryColor="#22c55e","string"==typeof(s=A.is||"Toggle")){if(!(C=n.components&&n.components[s]||r[s]))throw new Error('Component "Toggle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(C=s);c[9]=C.call(null,{props:A},c[8],t),c[9][Symbol.for("slots")][0]?(e=c[9][Symbol.for("slots")][0],l=c[9],f=!0):e=c[9][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[2];var E={};c[10]=this.element({parent:e||"root"},!0===f?l:t),E.w=200,E.h={transition:t.$sizes.get("block1.h")},E.x=25,E.y=140,E.color=t.$colors.get("color2"),E.effects=[{type:"radius",props:{radius:t.radius/2}}],c[10].populate(E),!0===f&&(p-=1),e=c[2];var I={};c[11]=this.element({parent:e||"root"},!0===f?l:t),I.w={transition:t.$sizes.get("block2.w")},I.h=t.$sizes.get("block2.h"),I.x=270,I.y={transition:t.$sizes.get("block2.y")},I.color=t.$colors.get("color2"),I.effects=[{type:"radius",props:{radius:t.radius/2}}],c[11].populate(I),!0===f&&(p-=1),e=c[2];var M={};c[12]=this.element({parent:e||"root"},!0===f?l:t),M.x={transition:t.$sizes.get("graph.x")},M.y={transition:t.$sizes.get("graph.y")},M.w=t.$sizes.get("graph.w"),M.h=t.$sizes.get("graph.h"),M.color="0x00000000",c[12].populate(M),!0===f&&(p-=1),e=c[12];var R={};c[13]=this.element({parent:e||"root"},!0===f?l:t),R.x={transition:t.$sizes.get("graph.offset")},R.y={transition:t.$sizes.get("graph.offset")},c[13].populate(R),!0===f&&(p-=1);var _=n.components&&n.components.Bar||r.Bar;e=c[13];var L={};c[14]=this.element({parent:e||"root"},!0===f?l:t),L.bgColor=t.$colors.get("color2"),L.primaryColor=t.$colors.get("color4"),L.size=t.$sizes.get("graph.size"),L.height=100,L.index=0;var D=[];if(void 0!==_)for(var P in _[Symbol.for("config")].props)delete L[_[Symbol.for("config")].props[P]],D.push(_[Symbol.for("config")].props[P]);c[14].populate(L),!0===f&&(p-=1),e=c[14];var O,N={};if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=i(u).slice(0)),N.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=i(u).slice(0)),N.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=i(u).slice(0)),N.size=u,N.height=100,N.index=0,"string"==typeof(s=N.is||"Bar")){if(!(O=n.components&&n.components[s]||r[s]))throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(O=s);c[15]=O.call(null,{props:N},c[14],t),c[15][Symbol.for("slots")][0]?(e=c[15][Symbol.for("slots")][0],l=c[15],f=!0):e=c[15][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var U=n.components&&n.components.Bar||r.Bar;e=c[13];var B={};c[16]=this.element({parent:e||"root"},!0===f?l:t),B.bgColor=t.$colors.get("color2"),B.primaryColor=t.$colors.get("color4"),B.size=t.$sizes.get("graph.size"),B.height=140,B.index=1;var j=[];if(void 0!==U)for(var F in U[Symbol.for("config")].props)delete B[U[Symbol.for("config")].props[F]],j.push(U[Symbol.for("config")].props[F]);c[16].populate(B),!0===f&&(p-=1),e=c[16];var z,G={};if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=i(u).slice(0)),G.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=i(u).slice(0)),G.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=i(u).slice(0)),G.size=u,G.height=140,G.index=1,"string"==typeof(s=G.is||"Bar")){if(!(z=n.components&&n.components[s]||r[s]))throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(z=s);c[17]=z.call(null,{props:G},c[16],t),c[17][Symbol.for("slots")][0]?(e=c[17][Symbol.for("slots")][0],l=c[17],f=!0):e=c[17][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var V=n.components&&n.components.Bar||r.Bar;e=c[13];var H={};c[18]=this.element({parent:e||"root"},!0===f?l:t),H.bgColor=t.$colors.get("color2"),H.primaryColor=t.$colors.get("color4"),H.size=t.$sizes.get("graph.size"),H.height=170,H.index=2;var q=[];if(void 0!==V)for(var X in V[Symbol.for("config")].props)delete H[V[Symbol.for("config")].props[X]],q.push(V[Symbol.for("config")].props[X]);c[18].populate(H),!0===f&&(p-=1),e=c[18];var W,K={};if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=i(u).slice(0)),K.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=i(u).slice(0)),K.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=i(u).slice(0)),K.size=u,K.height=170,K.index=2,"string"==typeof(s=K.is||"Bar")){if(!(W=n.components&&n.components[s]||r[s]))throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(W=s);c[19]=W.call(null,{props:K},c[18],t),c[19][Symbol.for("slots")][0]?(e=c[19][Symbol.for("slots")][0],l=c[19],f=!0):e=c[19][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var $=n.components&&n.components.Bar||r.Bar;e=c[13];var Y={};c[20]=this.element({parent:e||"root"},!0===f?l:t),Y.bgColor=t.$colors.get("color2"),Y.primaryColor=t.$colors.get("color4"),Y.size=t.$sizes.get("graph.size"),Y.height=150,Y.index=3;var Q=[];if(void 0!==$)for(var J in $[Symbol.for("config")].props)delete Y[$[Symbol.for("config")].props[J]],Q.push($[Symbol.for("config")].props[J]);c[20].populate(Y),!0===f&&(p-=1),e=c[20];var Z,ee={};if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=i(u).slice(0)),ee.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=i(u).slice(0)),ee.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=i(u).slice(0)),ee.size=u,ee.height=150,ee.index=3,"string"==typeof(s=ee.is||"Bar")){if(!(Z=n.components&&n.components[s]||r[s]))throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Z=s);c[21]=Z.call(null,{props:ee},c[20],t),c[21][Symbol.for("slots")][0]?(e=c[21][Symbol.for("slots")][0],l=c[21],f=!0):e=c[21][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var te=n.components&&n.components.Bar||r.Bar;e=c[13];var ne={};c[22]=this.element({parent:e||"root"},!0===f?l:t),ne.bgColor=t.$colors.get("color2"),ne.primaryColor=t.$colors.get("color4"),ne.size=t.$sizes.get("graph.size"),ne.height=90,ne.index=4;var re=[];if(void 0!==te)for(var oe in te[Symbol.for("config")].props)delete ne[te[Symbol.for("config")].props[oe]],re.push(te[Symbol.for("config")].props[oe]);c[22].populate(ne),!0===f&&(p-=1),e=c[22];var ie,ae={};if(u=t.$colors.get("color2"),!0===Array.isArray(u)&&(u=i(u).slice(0)),ae.bgColor=u,u=t.$colors.get("color4"),!0===Array.isArray(u)&&(u=i(u).slice(0)),ae.primaryColor=u,u=t.$sizes.get("graph.size"),!0===Array.isArray(u)&&(u=i(u).slice(0)),ae.size=u,ae.height=90,ae.index=4,"string"==typeof(s=ae.is||"Bar")){if(!(ie=n.components&&n.components[s]||r[s]))throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(ie=s);return c[23]=ie.call(null,{props:ae},c[22],t),c[23][Symbol.for("slots")][0]?(e=c[23][Symbol.for("slots")][0],l=c[23],f=!0):e=c[23][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){t[0].set("color",{transition:e.$colors.get("bg")})},function(e,t,n,r,o,i){t[1].set("color",e.$colors.get("color4"))},function(e,t,n,r,o,i){t[2].set("x",{transition:(1920-e.$sizes.get("w"))/2})},function(e,t,n,r,o,i){t[2].set("y",{transition:(1080-e.$sizes.get("h"))/2})},function(e,t,n,r,o,i){t[4].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,r,o,i){t[4].set("h",{transition:e.$sizes.get("h")})},function(e,t,n,r,o,i){t[4].set("color",e.$colors.get("color1"))},function(e,t,n,r,o,i){t[4].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,r,o,i){t[5].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,r,o,i){t[5].set("color",e.$colors.get("color2"))},function(e,t,n,r,o,i){t[5].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,r,o,i){t[6].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,r,o,i){t[6].set("color",e.$colors.get("color2"))},function(e,t,n,r,o,i){t[7].set("content",e.text)},function(e,t,n,r,o,i){t[7].set("color",e.$colors.get("color3"))},function(e,t,n,r,o,i){"undefined"!=typeof skip8&&-1!==skip8.indexOf("x")||t[8].set("x",{transition:e.$sizes.get("w")-120})},function(e,t,n,r,o,i){"undefined"!=typeof skip8&&-1!==skip8.indexOf("on")||t[8].set("on","dark"===e.mode)},function(e,t,n,r,o,i){"undefined"!=typeof skip8&&-1!==skip8.indexOf("bgColor")||t[8].set("bgColor",e.$colors.get("color1"))},function(e,t,n,r,o,i){t[9][Symbol.for("props")].x={transition:e.$sizes.get("w")-120}},function(e,t,n,r,o,i){t[9][Symbol.for("props")].on="dark"===e.mode},function(e,t,n,r,o,i){t[9][Symbol.for("props")].bgColor=e.$colors.get("color1")},function(e,t,n,r,o,i){t[10].set("h",{transition:e.$sizes.get("block1.h")})},function(e,t,n,r,o,i){t[10].set("color",e.$colors.get("color2"))},function(e,t,n,r,o,i){t[10].set("effects",[{type:"radius",props:{radius:e.radius/2}}])},function(e,t,n,r,o,i){t[11].set("w",{transition:e.$sizes.get("block2.w")})},function(e,t,n,r,o,i){t[11].set("h",e.$sizes.get("block2.h"))},function(e,t,n,r,o,i){t[11].set("y",{transition:e.$sizes.get("block2.y")})},function(e,t,n,r,o,i){t[11].set("color",e.$colors.get("color2"))},function(e,t,n,r,o,i){t[11].set("effects",[{type:"radius",props:{radius:e.radius/2}}])},function(e,t,n,r,o,i){t[12].set("x",{transition:e.$sizes.get("graph.x")})},function(e,t,n,r,o,i){t[12].set("y",{transition:e.$sizes.get("graph.y")})},function(e,t,n,r,o,i){t[12].set("w",e.$sizes.get("graph.w"))},function(e,t,n,r,o,i){t[12].set("h",e.$sizes.get("graph.h"))},function(e,t,n,r,o,i){t[13].set("x",{transition:e.$sizes.get("graph.offset")})},function(e,t,n,r,o,i){t[13].set("y",{transition:e.$sizes.get("graph.offset")})},function(e,t,n,r,o,i){"undefined"!=typeof skip14&&-1!==skip14.indexOf("bgColor")||t[14].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skip14&&-1!==skip14.indexOf("primaryColor")||t[14].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skip14&&-1!==skip14.indexOf("size")||t[14].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[15][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[15][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[15][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,r,o,i){"undefined"!=typeof skip16&&-1!==skip16.indexOf("bgColor")||t[16].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skip16&&-1!==skip16.indexOf("primaryColor")||t[16].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skip16&&-1!==skip16.indexOf("size")||t[16].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[17][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[17][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[17][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,r,o,i){"undefined"!=typeof skip18&&-1!==skip18.indexOf("bgColor")||t[18].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skip18&&-1!==skip18.indexOf("primaryColor")||t[18].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skip18&&-1!==skip18.indexOf("size")||t[18].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[19][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[19][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[19][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,r,o,i){"undefined"!=typeof skip20&&-1!==skip20.indexOf("bgColor")||t[20].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skip20&&-1!==skip20.indexOf("primaryColor")||t[20].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skip20&&-1!==skip20.indexOf("size")||t[20].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[21][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[21][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[21][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,r,o,i){"undefined"!=typeof skip22&&-1!==skip22.indexOf("bgColor")||t[22].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skip22&&-1!==skip22.indexOf("primaryColor")||t[22].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skip22&&-1!==skip22.indexOf("size")||t[22].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[23][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[23][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[23][Symbol.for("props")].size=e.$sizes.get("graph.size")}],context:{}},state:function(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode:function(e){this.$colors.set(e)},sizes:function(e){this.$sizes.set(e)}},computed:{text:function(){return this.mode,"dark"===this.mode?"Dark mode":"Light mode"}},input:{right:function(){var e=this;this.toggleX=0,this.$setTimeout(function(){e.mode="light"},150)},left:function(){var e=this;this.toggleX=48,this.$setTimeout(function(){e.mode="dark"},150)},up:function(){this.sizes="large"},down:function(){this.sizes="small"}}}),oi={headers:{"Content-Type":"application/json",Authorization:"Bearer ABC123"}};function ii(e){return Oo+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w185")+e}function ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://8b4fa39d.lightningjs.workers.dev"+e,g(g({},oi),t)).then(function(e){return e.json()})}function si(){return ai("/configuration").then(function(e){return Po=e,Oo=e.images.secure_base_url,e})}var ui={get:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Po?ai.apply(void 0,t):si().then(function(){return ai.apply(void 0,t)})},loadConfig:si},li=function(e){return ui.get("/".concat(e,"/popular")).then(ci)},ci=function(e){return e.results.filter(function(e){return!e.adult}).map(function(e){return{poster:ii(e.poster_path||e.profile_path),background:ii(e.backdrop_path,"w1280"),identifier:e.id,title:e.title||e.name,overview:e.overview}})},fi=function(e){var t=Array.isArray(e)?e:[e];return pi("movie").then(function(e){var n=e.genres,r=[];return n.forEach(function(e){t.includes(e.name)&&r.push(e.id)}),ui.get("/discover/movie?with_genres=".concat(r.join())).then(ci)})},pi=function(e){return ui.get("/genre/".concat(e,"/list"))},di=Go.Component("Poster",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=1280,u.h=720,u.x=t.x,u.src=t.item.background,u.color="{top: '0xffffffff', bottom: '0x000000ff'}",u.scale={transition:{value:t.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},u._effects=[{type:"radius",props:{radius:8}}],s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.alpha={transition:{value:t.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(l),e=s[1];var c={};s[2]=this.element({parent:e||"root"},t),c.w=185,c.h=278,c.x=54,c.y=220,c.src=t.item.poster,s[2].populate(c),e=s[1];var f={};s[3]=this.element({parent:e||"root"},t),f.content=t.item.title,f.font="raleway",f.y=520,f.x=54,f.size=64,f.maxwidth=1e3,f.maxlines=1,f.__textnode=!0,s[3].populate(f),e=s[1];var p={};return s[4]=this.element({parent:e||"root"},t),p.content=t.item.overview,p.size=21,p.y=620,p.x=60,p.color="0xccccccff",p.maxwidth=1e3,p.maxlines=2,p.lineheight=36,p.__textnode=!0,s[4].populate(p),s},effects:[function(e,t,n,r,o,i){t[0].set("src",e.item.background)},function(e,t,n,r,o,i){t[0].set("scale",{transition:{value:e.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[1].set("alpha",{transition:{value:e.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[2].set("src",e.item.poster)},function(e,t,n,r,o,i){t[3].set("content",e.item.title)},function(e,t,n,r,o,i){t[4].set("content",e.item.overview)}],context:{}},props:["src","index","item","width"],state:function(){return{scale:1,zIndex:1,alpha:0}},computed:{x:function(){return this.index,this.width,this.index*this.width}},hooks:{focus:function(){this.scale=1.1,this.alpha=1},unfocus:function(){this.scale=1,this.alpha=0}}}),hi=Go.Component("Poster",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};return s[0]=this.element({parent:e||"root"},t),u.w=185,u.h=278,u.x=t.x,u.src=t.item.poster,u.scale={transition:{value:t.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},u._effects=[{type:"radius",props:{radius:8}}],s[0].populate(u),s},effects:[function(e,t,n,r,o,i){t[0].set("src",e.item.poster)},function(e,t,n,r,o,i){t[0].set("scale",{transition:{value:e.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state:function(){return{scale:1,color:"#333"}},computed:{x:function(){return this.index,this.width,this.index*this.width}},hooks:{focus:function(){this.color="#fff",this.scale=1.1},unfocus:function(){this.color="#333",this.scale=1}}}),mi=Go.Component("PosterTitle",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=185,u.h=278,u.x=t.x,u.src=t.item.poster,u.scale={transition:{value:t.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},u._effects=[{type:"radius",props:{radius:8}}],s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.x=10,l.y={transition:{value:t.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l.alpha={transition:{value:t.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(l),e=s[1];var c={};return s[2]=this.element({parent:e||"root"},t),c.content=t.item.title,c.font="raleway",c.size=22,c.maxwidth=185,c.maxlines=2,c.lineheight=28,c.__textnode=!0,s[2].populate(c),s},effects:[function(e,t,n,r,o,i){t[0].set("src",e.item.poster)},function(e,t,n,r,o,i){t[0].set("scale",{transition:{value:e.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[1].set("y",{transition:{value:e.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[1].set("alpha",{transition:{value:e.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[2].set("content",e.item.title)}],context:{}},props:["src","index","item","width"],state:function(){return{scale:1,alpha:0,y:278}},computed:{x:function(){return this.index,this.width,this.index*this.width}},hooks:{focus:function(){this.scale=1.1,this.alpha=1,this.y=288},unfocus:function(){this.scale=1,this.alpha=0,this.y=278}}}),gi=Go.Component("TmdbRow",{components:{Hero:di,Poster:hi,PosterTitle:mi},code:{render:function(e,t,n,r,o,i,a){var s,u,l=this,c=[],f=!1;c[0]=this.element({parent:e||"root"},!0===f?u:t),c[0].populate({}),e=c[0];var p={};c[1]=this.element({parent:e||"root"},!0===f?u:t),p.x={transition:{value:t.x,duration:300,easing:"ease-in-out"}},p.y=80,c[1].populate(p),e=c[1];var d,h,m,g=[],v=function(){t[Symbol.for("removeGlobalEffects")](m),m=null,m=function(){var o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,c=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),p=new Set,m=c.length,g={}||{};d=g.from||0,h="to"in g?g.to:c.length;for(;m--;){var v=c[m];m<h&&m>=d&&p.add(""+v.identifier)}for(var y=a.length;y--;)if(!1===p.has(a[y])){var b=a[y];o[2][b]&&o[2][b].destroy(),delete o[2][b],o[3][b]&&o[3][b].destroy(),delete o[3][b]}a.length=0;for(var x=c.length,w=0;w<x;w++)if(!(w<d||w>=h)){var S=Object.create(t);e=o[1],S.item=c[w],S.index=w,S.key=""+S.item.identifier,S.__ref="poster"+w,a.push(S.key);var T=n.components&&n.components.Component||r.Component;void 0===o[2]&&(o[2]={});var k={};void 0===o[2][S.key]&&(o[2][S.key]=l.element({parent:e||"root"},!0===f?u:t)),k.is=S.type,k.index=S.index,k.item=S.item,k.ref=S.__ref,k.width=S.width;var C=[];if(void 0!==T)for(var A in T[Symbol.for("config")].props)delete k[T[Symbol.for("config")].props[A]],C.push(T[Symbol.for("config")].props[A]);void 0===o[2][S.key].nodeId&&o[2][S.key].populate(k),void 0===o[3]&&(o[3]={}),e=o[2][S.key];var E={};if(void 0===o[3][S.key]){E.is=S.type,E.index=S.index,E.item=S.item,E.ref=S.__ref,E.width=S.width;var I=void 0;if("string"==typeof(s=E.is||"Component")){if(!(I=n.components&&n.components[s]||r[s]))throw new Error('Component "Component" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(I=s);o[3][S.key]=I.call(null,{props:E},o[2][S.key],t),o[3][S.key][Symbol.for("slots")][0]?(e=o[3][S.key][Symbol.for("slots")][0],u=o[3][S.key],f=!0):e=o[3][S.key][Symbol.for("children")][0]}}return[]}(t.items,c,g)};return t[Symbol.for("effects")].push(v),o(v,["items"]),c},effects:[function(e,t,n,r,o,i){t[1].set("x",{transition:{value:e.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state:function(){return{focused:0,offset:0}},hooks:{focus:function(){this.$trigger("focused")}},computed:{x:function(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused:function(e){var t=this.$select("poster"+e);t&&t.$focus&&(t.$focus(),this.$emit("posterSelect",this.items[e]))}},input:{left:function(){this.focused=Math.max(this.focused-1,0)},right:function(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),vi=Go.Component("Background",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.src=t.bg1,u.w=1920,u.h=1080,u.color="{top: '0xffffffff', bottom: '0x000000ff'}",u.alpha={transition:{value:t.alpha1,duration:400,easing:"ease-in"}},s[1].populate(u),e=s[0];var l={};s[2]=this.element({parent:e||"root"},t),l.src=t.bg2,l.w=1920,l.h=1080,l.color="{top: '0xffffffff', bottom: '0x000000ff'}",l.alpha={transition:{value:t.alpha2,duration:400,easing:"ease-in"}},s[2].populate(l),e=s[0];var c={};return s[3]=this.element({parent:e||"root"},t),c.w=1920,c.h=1080,c.src="assets/gradient.png",c.color="0x8866ddff",c.alpha=.8,s[3].populate(c),s},effects:[function(e,t,n,r,o,i){t[1].set("src",e.bg1)},function(e,t,n,r,o,i){t[1].set("alpha",{transition:{value:e.alpha1,duration:400,easing:"ease-in"}})},function(e,t,n,r,o,i){t[2].set("src",e.bg2)},function(e,t,n,r,o,i){t[2].set("alpha",{transition:{value:e.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["bgImg"],state:function(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{bgImg:function(e){this.counter=(this.counter+1)%2,0===this.counter?(this.bg1=e,this.alpha1=.8,this.alpha2=0):(this.bg2=e,this.alpha1=0,this.alpha2=.8)}}}),yi=Go.Component("TMdb",{components:{Background:vi,TmdbRow:gi},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1,d=0,h={};f[0]=this.element({parent:e||"root"},!0===p?l:t),h.w=1920,h.h=1080,h.color="0x000000ff",f[0].populate(h),!0===p&&(d-=1);var m=n.components&&n.components.Background||r.Background;e=f[0];var g={};f[1]=this.element({parent:e||"root"},!0===p?l:t),g.bgImg=t.src;var v=[];if(void 0!==m)for(var y in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[y]],v.push(m[Symbol.for("config")].props[y]);f[1].populate(g),!0===p&&(d-=1),e=f[1];var b,x={};if(u=t.src,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.bgImg=u,"string"==typeof(s=x.is||"Background")){if(!(b=n.components&&n.components[s]||r[s]))throw new Error('Component "Background" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(b=s);f[2]=b.call(null,{props:x},f[1],t),f[2][Symbol.for("slots")][0]?(e=f[2][Symbol.for("slots")][0],l=f[2],p=!0):e=f[2][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=f[0];f[3]=this.element({parent:e||"root"},!0===p?l:t),f[3].populate({}),!0===p&&(d-=1),e=f[3];var w={};f[4]=this.element({parent:e||"root"},!0===p?l:t),w.y={transition:{value:t.contentY,duration:t.duration}},w.alpha={transition:{value:t.alpha,duration:t.duration}},f[4].populate(w),!0===p&&(d-=1),e=f[4];var S={};f[5]=this.element({parent:e||"root"},!0===p?l:t),S.src="assets/logo.png",S.x=140,S.y=90,S.w=243,S.h=52,f[5].populate(S),!0===p&&(d-=1),e=f[4];var T={};f[6]=this.element({parent:e||"root"},!0===p?l:t),T.content=t.title,T.font="raleway",T.size=80,T.x=140,T.y=300,T.maxwidth=1e3,T["@loaded"]=t.positionText&&t.positionText.bind(t),T.maxlines=1,T.__textnode=!0,f[6].populate(T),!0===p&&(d-=1),e=f[4];var k={};f[7]=this.element({parent:e||"root"},!0===p?l:t),k.content=t.overview,k.maxwidth=880,k.x=140,k.y=430,k.lineheight=40,k.maxlines=3,k.__textnode=!0,f[7].populate(k),!0===p&&(d-=1),e=f[3];var C={};f[8]=this.element({parent:e||"root"},!0===p?l:t),C.y={transition:{value:t.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},f[8].populate(C),!0===p&&(d-=1),e=f[8];var A,E,I,M=[],R=function(){t[Symbol.for("removeGlobalEffects")](I),I=null,I=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,h=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),m=new Set,g=h.length,v={}||{};A=v.from||0,E="to"in v?v.to:h.length;for(;g--;){var y=h[g];g<E&&g>=A&&m.add(""+y.title)}for(var b=f.length;b--;)if(!1===m.has(f[b])){var x=f[b];a[9][x]&&a[9][x].destroy(),delete a[9][x],a[10][x]&&a[10][x].destroy(),delete a[10][x]}f.length=0;for(var w=h.length,S=[],T=function(){if(k<A||k>=E)return 1;var m=Object.create(t);e=a[8],m.row=h[k],m.index=k,m.key=""+m.row.title,m.__ref="row"+k,f.push(m.key);var g=n.components&&n.components.TmdbRow||r.TmdbRow;void 0===a[9]&&(a[9]={});var v={};void 0===a[9][m.key]&&(a[9][m.key]=c.element({parent:e||"root"},!0===p?l:t)),v.title=m.row.title,v.items=m.row.items,v.type=m.row.type,v.width=m.row.width,v.y=m.row.y,v.ref=m.__ref;var y=[];if(void 0!==g)for(var b in g[Symbol.for("config")].props)delete v[g[Symbol.for("config")].props[b]],y.push(g[Symbol.for("config")].props[b]);void 0===a[9][m.key].nodeId&&(a[9][m.key].populate(v),!0===p&&(d-=1)),void 0===a[10]&&(a[10]={}),e=a[9][m.key];var x={};if(void 0===a[10][m.key]){var w;if(x.title=m.row.title,u=m.row.items,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.items=u,u=m.row.type,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.type=u,u=m.row.width,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.width=u,x.y=m.row.y,x.ref=m.__ref,"string"==typeof(s=x.is||"TmdbRow")){if(!(w=n.components&&n.components[s]||r[s]))throw new Error('Component "TmdbRow" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(w=s);a[10][m.key]=w.call(null,{props:x},a[9][m.key],t),a[10][m.key][Symbol.for("slots")][0]?(e=a[10][m.key][Symbol.for("slots")][0],l=a[10][m.key],p=!0):e=a[10][m.key][Symbol.for("children")][0]}var T=function(){void 0!==y&&-1!==y.indexOf("items")||a[9][m.key].set("items",m.row.items)};o(T,null),S.push(T),t[Symbol.for("effects")].push(T);var C=function(){void 0!==y&&-1!==y.indexOf("type")||a[9][m.key].set("type",m.row.type)};o(C,null),S.push(C),t[Symbol.for("effects")].push(C);var I=function(){void 0!==y&&-1!==y.indexOf("width")||a[9][m.key].set("width",m.row.width)};o(I,null),S.push(I),t[Symbol.for("effects")].push(I),a[10][m.key][Symbol.for("props")].items=m.row.items,a[10][m.key][Symbol.for("props")].type=m.row.type,a[10][m.key][Symbol.for("props")].width=m.row.width},k=0;k<w;k++)T();return S}(t.rows,f,M)};return t[Symbol.for("effects")].push(R),o(R,["rows"]),f},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip1&&-1!==skip1.indexOf("bgImg")||t[1].set("bgImg",e.src)},function(e,t,n,r,o,i){t[2][Symbol.for("props")].bgImg=e.src},function(e,t,n,r,o,i){t[4].set("y",{transition:{value:e.contentY,duration:e.duration}})},function(e,t,n,r,o,i){t[4].set("alpha",{transition:{value:e.alpha,duration:e.duration}})},function(e,t,n,r,o,i){t[6].set("content",e.title)},function(e,t,n,r,o,i){t[7].set("content",e.overview)},function(e,t,n,r,o,i){t[8].set("y",{transition:{value:e.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state:function(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused:function(e){var t=this.$select("row"+e);t&&t.$focus&&t.$focus()}},hooks:{init:function(){var e=this;return i(n().m(function t(){var r,o,i,a,s,u,l,c,f,p,d,h,m,g;return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,li("movie");case 1:return r=t.v,o={title:"Popular Movies",items:r,type:"Poster",width:215,y:0},t.n=2,fi(["Western"]);case 2:return i=t.v,a={title:"Best Western movies",items:i,type:"Hero",width:1370,y:358},t.n=3,fi(["Comedy"]);case 3:return s=t.v,u={title:"Best Comedy movies",items:s,type:"PosterTitle",width:215,y:1158},t.n=4,li("tv");case 4:return l=t.v,c={title:"Popular TV shows",items:l,type:"PosterTitle",width:215,y:1536},t.n=5,fi(["adventure","action"]);case 5:return f=t.v,p={title:"Best Adventure and Action movies",items:f,type:"Hero",width:1370,y:1914},t.n=6,fi("Documentary");case 6:return d=t.v,h={title:"Best Documentaries",items:d,type:"PosterTitle",width:215,y:2714},t.n=7,fi("Western");case 7:m=t.v,g={title:"Best Western movies 2",items:m,type:"PosterTitle",width:215,y:3092},e.rows=[o,a,u,c,p,h,g],e.focused=0;case 8:return t.a(2)}},t)}))()},ready:function(){var e=this;this.$listen("posterSelect",function(t){0===e.focused&&(e.src=t.background,e.title=t.title,e.overview=t.overview)})},focus:function(){this.$trigger("focused")}},input:{up:function(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(0===this.focused?550:90)-this.rows[this.focused].y,this.alpha=0===this.focused?1:0},down:function(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(0===this.focused?550:90)-this.rows[this.focused].y,this.alpha=0===this.focused?1:0}}}),bi=Go.Component("MenuSprite",{code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0;c[0]=this.element({parent:e||"root"},!0===f?l:t),c[0].populate({}),!0===f&&(p-=1),e=c[0];var d={};c[1]=this.element({parent:e||"root"},!0===f?l:t),d.src="assets/menusprite.png",d.x=748,d.y=120,d.w=425,d.h=340,c[1].populate(d),!0===f&&(p-=1),e=c[0];var h={};c[2]=this.element({parent:e||"root"},!0===f?l:t),h.y=680,h.x=560,c[2].populate(h),!0===f&&(p-=1);var m=n.components&&n.components.Sprite||r.Sprite;e=c[2];var g={};c[3]=this.element({parent:e||"root"},!0===f?l:t),g.image="assets/menusprite.png",g.x=0,g.w=140,g.h=140,g.map=t.map,g.frame=t.icon1;var v=[];if(void 0!==m)for(var y in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[y]],v.push(m[Symbol.for("config")].props[y]);c[3].populate(g),!0===f&&(p-=1),e=c[3];var b,x={};if(x.image="assets/menusprite.png",x.x=0,x.w=140,x.h=140,x.map=t.map,u=t.icon1,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.frame=u,"string"==typeof(s=x.is||"Sprite")){if(!(b=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(b=s);c[4]=b.call(null,{props:x},c[3],t),c[4][Symbol.for("slots")][0]?(e=c[4][Symbol.for("slots")][0],l=c[4],f=!0):e=c[4][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var w=n.components&&n.components.Sprite||r.Sprite;e=c[2];var S={};c[5]=this.element({parent:e||"root"},!0===f?l:t),S.image="assets/menusprite.png",S.x=220,S.w=140,S.h=140,S.map=t.map,S.frame="icon2";var T=[];if(void 0!==w)for(var k in w[Symbol.for("config")].props)delete S[w[Symbol.for("config")].props[k]],T.push(w[Symbol.for("config")].props[k]);c[5].populate(S),!0===f&&(p-=1),e=c[5];var C,A={};if(A.image="assets/menusprite.png",A.x=220,A.w=140,A.h=140,A.map=t.map,A.frame="icon2","string"==typeof(s=A.is||"Sprite")){if(!(C=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(C=s);c[6]=C.call(null,{props:A},c[5],t),c[6][Symbol.for("slots")][0]?(e=c[6][Symbol.for("slots")][0],l=c[6],f=!0):e=c[6][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var E=n.components&&n.components.Sprite||r.Sprite;e=c[2];var I={};c[7]=this.element({parent:e||"root"},!0===f?l:t),I.image="assets/menusprite.png",I.x=440,I.w=140,I.h=140,I.map=t.map,I.frame="icon3";var M=[];if(void 0!==E)for(var R in E[Symbol.for("config")].props)delete I[E[Symbol.for("config")].props[R]],M.push(E[Symbol.for("config")].props[R]);c[7].populate(I),!0===f&&(p-=1),e=c[7];var _,L={};if(L.image="assets/menusprite.png",L.x=440,L.w=140,L.h=140,L.map=t.map,L.frame="icon3","string"==typeof(s=L.is||"Sprite")){if(!(_=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(_=s);c[8]=_.call(null,{props:L},c[7],t),c[8][Symbol.for("slots")][0]?(e=c[8][Symbol.for("slots")][0],l=c[8],f=!0):e=c[8][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var D=n.components&&n.components.Sprite||r.Sprite;e=c[2];var P={};c[9]=this.element({parent:e||"root"},!0===f?l:t),P.image="assets/menusprite.png",P.x=660,P.w=140,P.h=140,P.map=t.map,P.frame="icon4_unfocus";var O=[];if(void 0!==D)for(var N in D[Symbol.for("config")].props)delete P[D[Symbol.for("config")].props[N]],O.push(D[Symbol.for("config")].props[N]);c[9].populate(P),!0===f&&(p-=1),e=c[9];var U,B={};if(B.image="assets/menusprite.png",B.x=660,B.w=140,B.h=140,B.map=t.map,B.frame="icon4_unfocus","string"==typeof(s=B.is||"Sprite")){if(!(U=n.components&&n.components[s]||r[s]))throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(U=s);return c[10]=U.call(null,{props:B},c[9],t),c[10][Symbol.for("slots")][0]?(e=c[10][Symbol.for("slots")][0],l=c[10],f=!0):e=c[10][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip3&&-1!==skip3.indexOf("frame")||t[3].set("frame",e.icon1)},function(e,t,n,r,o,i){t[4][Symbol.for("props")].frame=e.icon1}],context:{}},state:function(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready:function(){var e=this;this.$setInterval(function(){e.icon1="icon1_unfocus"===e.icon1?"icon1_focus":"icon1_unfocus"},2e3)}}}),xi=["menu"],wi=Go.Component("Sprites",{components:{MenuSprite:bi},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0;c[0]=this.element({parent:e||"root"},!0===f?l:t),c[0].populate({}),!0===f&&(p-=1);var d=n.components&&n.components.MenuSprite||r.MenuSprite;e=c[0];var h={};c[1]=this.element({parent:e||"root"},!0===f?l:t),h.show="menu"===t.currentSprite;var m=[];if(void 0!==d)for(var g in d[Symbol.for("config")].props)delete h[d[Symbol.for("config")].props[g]],m.push(d[Symbol.for("config")].props[g]);c[1].populate(h),!0===f&&(p-=1),e=c[1];var v,y={};if(u="menu"===t.currentSprite,!0===Array.isArray(u)&&(u=i(u).slice(0)),y.show=u,"string"==typeof(s=y.is||"MenuSprite")){if(!(v=n.components&&n.components[s]||r[s]))throw new Error('Component "MenuSprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(v=s);return c[2]=v.call(null,{props:y},c[1],t),c[2][Symbol.for("slots")][0]?(e=c[2][Symbol.for("slots")][0],l=c[2],f=!0):e=c[2][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip1&&-1!==skip1.indexOf("show")||t[1].set("show","menu"===e.currentSprite)},function(e,t,n,r,o,i){t[2][Symbol.for("props")].show="menu"===e.currentSprite}],context:{}},state:function(){return{currentSprite:"menu"}},input:{down:function(){var e=xi.indexOf(this.currentSprite);e<xi.length-1?this.currentSprite=xi[e+1]:this.currentSprite=xi[0]}}}),Si=Go.Component("Button",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};return s[0]=this.element({parent:e||"root"},t),u.w=300,u.h=80,u.color=t.color||"0xff0000ff",u.effects=[{type:"radius",props:{radius:20}}],u.alpha={transition:t.alpha},u.scale={transition:t.scale},u.rotation=t.rotate,s[0].populate(u),s},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:20}}])},function(e,t,n,r,o,i){t[0].set("alpha",{transition:e.alpha})},function(e,t,n,r,o,i){t[0].set("scale",{transition:e.scale})},function(e,t,n,r,o,i){t[0].set("rotation",e.rotate)}],context:{}},props:["color"],state:function(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus:function(){this.$log.info("Button with color ".concat(this.color," received focus")),this.alpha=1,this.scale=1===this.scale?1.2:1},unfocus:function(){this.$log.info("Button with color ".concat(this.color," lost focus")),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter:function(){this.rotate=0===this.rotate?-4:0,this.scale=1.2===this.scale?1.3:1.2}}}),Ti=Go.Component("Menu",{components:{Button:Si},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0,p={};l[0]=this.element({parent:e||"root"},!0===c?u:t),p.x={transition:t.x},p.w=400,p.h=1080,p.color="{right: '0x64748baa', left: '0x475569aa'}",l[0].populate(p),!0===c&&(f-=1),e=l[0];var d={};l[1]=this.element({parent:e||"root"},!0===c?u:t),d.x=50,d.y=40,l[1].populate(d),!0===c&&(f-=1);var h=n.components&&n.components.Button||r.Button;e=l[1];var m={};l[2]=this.element({parent:e||"root"},!0===c?u:t),m.color="0xe4e4e7ff",m.ref="menu1";var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);l[2].populate(m),!0===c&&(f-=1),e=l[2];var y,b={};if(b.color="0xe4e4e7ff",b.ref="menu1","string"==typeof(s=b.is||"Button")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);l[3]=y.call(null,{props:b},l[2],t),l[3][Symbol.for("slots")][0]?(e=l[3][Symbol.for("slots")][0],u=l[3],c=!0):e=l[3][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var x=n.components&&n.components.Button||r.Button;e=l[1];var w={};l[4]=this.element({parent:e||"root"},!0===c?u:t),w.color="0xe4e4e7ff",w.y=100,w.ref="menu2";var S=[];if(void 0!==x)for(var T in x[Symbol.for("config")].props)delete w[x[Symbol.for("config")].props[T]],S.push(x[Symbol.for("config")].props[T]);l[4].populate(w),!0===c&&(f-=1),e=l[4];var k,C={};if(C.color="0xe4e4e7ff",C.y=100,C.ref="menu2","string"==typeof(s=C.is||"Button")){if(!(k=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(k=s);l[5]=k.call(null,{props:C},l[4],t),l[5][Symbol.for("slots")][0]?(e=l[5][Symbol.for("slots")][0],u=l[5],c=!0):e=l[5][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var A=n.components&&n.components.Button||r.Button;e=l[1];var E={};l[6]=this.element({parent:e||"root"},!0===c?u:t),E.color="0xe4e4e7ff",E.y=200,E.ref="menu3";var I=[];if(void 0!==A)for(var M in A[Symbol.for("config")].props)delete E[A[Symbol.for("config")].props[M]],I.push(A[Symbol.for("config")].props[M]);l[6].populate(E),!0===c&&(f-=1),e=l[6];var R,_={};if(_.color="0xe4e4e7ff",_.y=200,_.ref="menu3","string"==typeof(s=_.is||"Button")){if(!(R=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(R=s);l[7]=R.call(null,{props:_},l[6],t),l[7][Symbol.for("slots")][0]?(e=l[7][Symbol.for("slots")][0],u=l[7],c=!0):e=l[7][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var L=n.components&&n.components.Button||r.Button;e=l[1];var D={};l[8]=this.element({parent:e||"root"},!0===c?u:t),D.color="0xe4e4e7ff",D.y=300,D.ref="menu4";var P=[];if(void 0!==L)for(var O in L[Symbol.for("config")].props)delete D[L[Symbol.for("config")].props[O]],P.push(L[Symbol.for("config")].props[O]);l[8].populate(D),!0===c&&(f-=1),e=l[8];var N,U={};if(U.color="0xe4e4e7ff",U.y=300,U.ref="menu4","string"==typeof(s=U.is||"Button")){if(!(N=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(N=s);return l[9]=N.call(null,{props:U},l[8],t),l[9][Symbol.for("slots")][0]?(e=l[9][Symbol.for("slots")][0],u=l[9],c=!0):e=l[9][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),l},effects:[function(e,t,n,r,o,i){t[0].set("x",{transition:e.x})}],context:{}},state:function(){return{x:-360,focused:1}},hooks:{focus:function(){this.$trigger("focused"),this.x=0}},watch:{focused:function(){var e=this.$select("menu".concat(this.focused));e&&e.$focus&&e.$focus()}},input:{right:function(){this.parent.$focus(),this.x=-360},down:function(){this.focused=Math.min(this.focused+1,4)},up:function(){this.focused=Math.max(this.focused-1,1)},left:function(){}}}),ki=Go.Component("FocusHandling",{components:{Menu:Ti,Button:Si},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0;c[0]=this.element({parent:e||"root"},!0===f?l:t),c[0].populate({}),!0===f&&(p-=1),e=c[0];var d={};c[1]=this.element({parent:e||"root"},!0===f?l:t),d.x=300,d.y=150,c[1].populate(d),!0===f&&(p-=1);var h=n.components&&n.components.Button||r.Button;e=c[1];var m={};c[2]=this.element({parent:e||"root"},!0===f?l:t),m.color="0xef4444ff",m.x=0,m.ref="button1",m.z=1===t.focused?1:0;var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);c[2].populate(m),!0===f&&(p-=1),e=c[2];var y,b={};if(b.color="0xef4444ff",b.x=0,b.ref="button1",u=1===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.z=u,"string"==typeof(s=b.is||"Button")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);c[3]=y.call(null,{props:b},c[2],t),c[3][Symbol.for("slots")][0]?(e=c[3][Symbol.for("slots")][0],l=c[3],f=!0):e=c[3][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var x=n.components&&n.components.Button||r.Button;e=c[1];var w={};c[4]=this.element({parent:e||"root"},!0===f?l:t),w.color="0xf97316ff",w.x=320,w.ref="button2",w.z=2===t.focused?1:0;var S=[];if(void 0!==x)for(var T in x[Symbol.for("config")].props)delete w[x[Symbol.for("config")].props[T]],S.push(x[Symbol.for("config")].props[T]);c[4].populate(w),!0===f&&(p-=1),e=c[4];var k,C={};if(C.color="0xf97316ff",C.x=320,C.ref="button2",u=2===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),C.z=u,"string"==typeof(s=C.is||"Button")){if(!(k=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(k=s);c[5]=k.call(null,{props:C},c[4],t),c[5][Symbol.for("slots")][0]?(e=c[5][Symbol.for("slots")][0],l=c[5],f=!0):e=c[5][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var A=n.components&&n.components.Button||r.Button;e=c[1];var E={};c[6]=this.element({parent:e||"root"},!0===f?l:t),E.color="0x84cc16ff",E.x=640,E.ref="button3",E.z=3===t.focused?1:0;var I=[];if(void 0!==A)for(var M in A[Symbol.for("config")].props)delete E[A[Symbol.for("config")].props[M]],I.push(A[Symbol.for("config")].props[M]);c[6].populate(E),!0===f&&(p-=1),e=c[6];var R,_={};if(_.color="0x84cc16ff",_.x=640,_.ref="button3",u=3===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),_.z=u,"string"==typeof(s=_.is||"Button")){if(!(R=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(R=s);c[7]=R.call(null,{props:_},c[6],t),c[7][Symbol.for("slots")][0]?(e=c[7][Symbol.for("slots")][0],l=c[7],f=!0):e=c[7][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var L=n.components&&n.components.Button||r.Button;e=c[1];var D={};c[8]=this.element({parent:e||"root"},!0===f?l:t),D.color="0x10b981ff",D.x=0,D.y=100,D.ref="button4",D.z=4===t.focused?1:0;var P=[];if(void 0!==L)for(var O in L[Symbol.for("config")].props)delete D[L[Symbol.for("config")].props[O]],P.push(L[Symbol.for("config")].props[O]);c[8].populate(D),!0===f&&(p-=1),e=c[8];var N,U={};if(U.color="0x10b981ff",U.x=0,U.y=100,U.ref="button4",u=4===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),U.z=u,"string"==typeof(s=U.is||"Button")){if(!(N=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(N=s);c[9]=N.call(null,{props:U},c[8],t),c[9][Symbol.for("slots")][0]?(e=c[9][Symbol.for("slots")][0],l=c[9],f=!0):e=c[9][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var B=n.components&&n.components.Button||r.Button;e=c[1];var j={};c[10]=this.element({parent:e||"root"},!0===f?l:t),j.color="0x06b6d4ff",j.y=100,j.x=320,j.ref="button5",j.z=5===t.focused?1:0;var F=[];if(void 0!==B)for(var z in B[Symbol.for("config")].props)delete j[B[Symbol.for("config")].props[z]],F.push(B[Symbol.for("config")].props[z]);c[10].populate(j),!0===f&&(p-=1),e=c[10];var G,V={};if(V.color="0x06b6d4ff",V.y=100,V.x=320,V.ref="button5",u=5===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),V.z=u,"string"==typeof(s=V.is||"Button")){if(!(G=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(G=s);c[11]=G.call(null,{props:V},c[10],t),c[11][Symbol.for("slots")][0]?(e=c[11][Symbol.for("slots")][0],l=c[11],f=!0):e=c[11][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var H=n.components&&n.components.Button||r.Button;e=c[1];var q={};c[12]=this.element({parent:e||"root"},!0===f?l:t),q.color="0x3b82f6ff",q.y=100,q.x=640,q.ref="button6",q.z=6===t.focused?1:0;var X=[];if(void 0!==H)for(var W in H[Symbol.for("config")].props)delete q[H[Symbol.for("config")].props[W]],X.push(H[Symbol.for("config")].props[W]);c[12].populate(q),!0===f&&(p-=1),e=c[12];var K,$={};if($.color="0x3b82f6ff",$.y=100,$.x=640,$.ref="button6",u=6===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),$.z=u,"string"==typeof(s=$.is||"Button")){if(!(K=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(K=s);c[13]=K.call(null,{props:$},c[12],t),c[13][Symbol.for("slots")][0]?(e=c[13][Symbol.for("slots")][0],l=c[13],f=!0):e=c[13][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var Y=n.components&&n.components.Button||r.Button;e=c[1];var Q={};c[14]=this.element({parent:e||"root"},!0===f?l:t),Q.color="0x8b5cf6ff",Q.y=200,Q.x=0,Q.ref="button7",Q.z=7===t.focused?1:0;var J=[];if(void 0!==Y)for(var Z in Y[Symbol.for("config")].props)delete Q[Y[Symbol.for("config")].props[Z]],J.push(Y[Symbol.for("config")].props[Z]);c[14].populate(Q),!0===f&&(p-=1),e=c[14];var ee,te={};if(te.color="0x8b5cf6ff",te.y=200,te.x=0,te.ref="button7",u=7===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),te.z=u,"string"==typeof(s=te.is||"Button")){if(!(ee=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(ee=s);c[15]=ee.call(null,{props:te},c[14],t),c[15][Symbol.for("slots")][0]?(e=c[15][Symbol.for("slots")][0],l=c[15],f=!0):e=c[15][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var ne=n.components&&n.components.Button||r.Button;e=c[1];var re={};c[16]=this.element({parent:e||"root"},!0===f?l:t),re.color="0xd946efff",re.y=200,re.x=320,re.ref="button8",re.z=8===t.focused?1:0;var oe=[];if(void 0!==ne)for(var ie in ne[Symbol.for("config")].props)delete re[ne[Symbol.for("config")].props[ie]],oe.push(ne[Symbol.for("config")].props[ie]);c[16].populate(re),!0===f&&(p-=1),e=c[16];var ae,se={};if(se.color="0xd946efff",se.y=200,se.x=320,se.ref="button8",u=8===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),se.z=u,"string"==typeof(s=se.is||"Button")){if(!(ae=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(ae=s);c[17]=ae.call(null,{props:se},c[16],t),c[17][Symbol.for("slots")][0]?(e=c[17][Symbol.for("slots")][0],l=c[17],f=!0):e=c[17][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var ue=n.components&&n.components.Button||r.Button;e=c[1];var le={};c[18]=this.element({parent:e||"root"},!0===f?l:t),le.color="0xf43f5eff",le.y=200,le.x=640,le.ref="button9",le.z=9===t.focused?1:0;var ce=[];if(void 0!==ue)for(var fe in ue[Symbol.for("config")].props)delete le[ue[Symbol.for("config")].props[fe]],ce.push(ue[Symbol.for("config")].props[fe]);c[18].populate(le),!0===f&&(p-=1),e=c[18];var pe,de={};if(de.color="0xf43f5eff",de.y=200,de.x=640,de.ref="button9",u=9===t.focused?1:0,!0===Array.isArray(u)&&(u=i(u).slice(0)),de.z=u,"string"==typeof(s=de.is||"Button")){if(!(pe=n.components&&n.components[s]||r[s]))throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(pe=s);c[19]=pe.call(null,{props:de},c[18],t),c[19][Symbol.for("slots")][0]?(e=c[19][Symbol.for("slots")][0],l=c[19],f=!0):e=c[19][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var he=n.components&&n.components.Menu||r.Menu;e=c[0];var me={};c[20]=this.element({parent:e||"root"},!0===f?l:t),me.ref="menu";var ge=[];if(void 0!==he)for(var ve in he[Symbol.for("config")].props)delete me[he[Symbol.for("config")].props[ve]],ge.push(he[Symbol.for("config")].props[ve]);c[20].populate(me),!0===f&&(p-=1),e=c[20];var ye,be={};if(be.ref="menu","string"==typeof(s=be.is||"Menu")){if(!(ye=n.components&&n.components[s]||r[s]))throw new Error('Component "Menu" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(ye=s);return c[21]=ye.call(null,{props:be},c[20],t),c[21][Symbol.for("slots")][0]?(e=c[21][Symbol.for("slots")][0],l=c[21],f=!0):e=c[21][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip2&&-1!==skip2.indexOf("z")||t[2].set("z",1===e.focused?1:0)},function(e,t,n,r,o,i){t[3][Symbol.for("props")].z=1===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skip4&&-1!==skip4.indexOf("z")||t[4].set("z",2===e.focused?1:0)},function(e,t,n,r,o,i){t[5][Symbol.for("props")].z=2===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skip6&&-1!==skip6.indexOf("z")||t[6].set("z",3===e.focused?1:0)},function(e,t,n,r,o,i){t[7][Symbol.for("props")].z=3===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skip8&&-1!==skip8.indexOf("z")||t[8].set("z",4===e.focused?1:0)},function(e,t,n,r,o,i){t[9][Symbol.for("props")].z=4===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skip10&&-1!==skip10.indexOf("z")||t[10].set("z",5===e.focused?1:0)},function(e,t,n,r,o,i){t[11][Symbol.for("props")].z=5===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skip12&&-1!==skip12.indexOf("z")||t[12].set("z",6===e.focused?1:0)},function(e,t,n,r,o,i){t[13][Symbol.for("props")].z=6===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skip14&&-1!==skip14.indexOf("z")||t[14].set("z",7===e.focused?1:0)},function(e,t,n,r,o,i){t[15][Symbol.for("props")].z=7===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skip16&&-1!==skip16.indexOf("z")||t[16].set("z",8===e.focused?1:0)},function(e,t,n,r,o,i){t[17][Symbol.for("props")].z=8===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skip18&&-1!==skip18.indexOf("z")||t[18].set("z",9===e.focused?1:0)},function(e,t,n,r,o,i){t[19][Symbol.for("props")].z=9===e.focused?1:0}],context:{}},state:function(){return{focused:1}},hooks:{focus:function(){this.$trigger("focused")}},watch:{focused:function(e){var t=this.$select("button".concat(e));t&&t.$focus&&t.$focus()}},input:{right:function(){this.focused=Math.min(this.focused+1,9)},left:function(){var e=this.focused-1;if(0===e){var t=this.$select("menu");t&&t.$focus&&t.$focus()}else this.focused=Math.max(e,1)},a:function(){var e=this.$select("menu");e&&e.$focus&&e.$focus()}}}),Ci=Go.Component("Positioning",{code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0;l[0]=this.element({parent:e||"root"},!0===c?u:t),l[0].populate({}),!0===c&&(f-=1),e=l[0];var p={};l[1]=this.element({parent:e||"root"},!0===c?u:t),p.w=100,p.h=100,p.x=20,p.y=20,p.color="0xecfeffff",l[1].populate(p),!0===c&&(f-=1),e=l[0];var d={};l[2]=this.element({parent:e||"root"},!0===c?u:t),d.w=100,d.h=100,d.x=140,d.y=20,d.color="0xa5f3fcff",l[2].populate(d),!0===c&&(f-=1),e=l[0];var h={};l[3]=this.element({parent:e||"root"},!0===c?u:t),h.w=100,h.h=100,h.x=260,h.y=20,h.color="0x22d3eeff",l[3].populate(h),!0===c&&(f-=1),e=l[0];var m={};l[4]=this.element({parent:e||"root"},!0===c?u:t),m.w=100,m.h=100,m.x=380,m.y=20,m.color="0x0891b2ff",l[4].populate(m),!0===c&&(f-=1),e=l[0];var g={};l[5]=this.element({parent:e||"root"},!0===c?u:t),g.w=100,g.h=100,g.x=t.x1,g.y=t.y,g.color="0xfdf4ffff",l[5].populate(g),!0===c&&(f-=1),e=l[0];var v={};l[6]=this.element({parent:e||"root"},!0===c?u:t),v.w=100,v.h=100,v.x=t.x2,v.y=t.y,v.color="0xf5d0feff",l[6].populate(v),!0===c&&(f-=1),e=l[0];var y={};l[7]=this.element({parent:e||"root"},!0===c?u:t),y.w=100,y.h=100,y.x=t.x3,y.y=t.y,y.color="0xe879f9ff",l[7].populate(y),!0===c&&(f-=1),e=l[0];var b={};l[8]=this.element({parent:e||"root"},!0===c?u:t),b.w=100,b.h=100,b.x=t.x4,b.y=t.y,b.color="0xc026d3ff",l[8].populate(b),!0===c&&(f-=1),e=l[0];var x={};l[9]=this.element({parent:e||"root"},!0===c?u:t),x.w=100,x.h=100,x.x=t.xA,x.y=260,x.color="0xfff7edff",l[9].populate(x),!0===c&&(f-=1),e=l[0];var w={};l[10]=this.element({parent:e||"root"},!0===c?u:t),w.w=100,w.h=100,w.x=t.xB,w.y=260,w.color="0xfed7aaff",l[10].populate(w),!0===c&&(f-=1),e=l[0];var S={};l[11]=this.element({parent:e||"root"},!0===c?u:t),S.w=100,S.h=100,S.x=t.xC,S.y=260,S.color="0xfb923cff",l[11].populate(S),!0===c&&(f-=1),e=l[0];var T={};l[12]=this.element({parent:e||"root"},!0===c?u:t),T.w=100,T.h=100,T.x=t.xD,T.y=260,T.color="0xea580cff",l[12].populate(T),!0===c&&(f-=1),e=l[0];var k={};l[13]=this.element({parent:e||"root"},!0===c?u:t),k.w=800,k.h=800,k.y=20,k.x=800,k.color="0xecfdf5ff",l[13].populate(k),!0===c&&(f-=1),e=l[13];var C={};l[14]=this.element({parent:e||"root"},!0===c?u:t),C.w=600,C.h=600,C.y=20,C.x=20,C.color="0xa7f3d0ff",l[14].populate(C),!0===c&&(f-=1),e=l[14];var A={};l[15]=this.element({parent:e||"root"},!0===c?u:t),A.w=400,A.h=400,A.y=100,A.x=20,A.color="0x34d399ff",l[15].populate(A),!0===c&&(f-=1),e=l[15];var E={};l[16]=this.element({parent:e||"root"},!0===c?u:t),E.w=200,E.h=100,E.y=150,E.x=100,E.color="0x059669ff",l[16].populate(E),!0===c&&(f-=1),e=l[16];var I={};l[17]=this.element({parent:e||"root"},!0===c?u:t),I.w=50,I.h=50,I.y={transition:t.yNested},I.x={transition:t.xNested},I.color="0x065f46ff",l[17].populate(I),!0===c&&(f-=1),e=l[0];var M={};l[18]=this.element({parent:e||"root"},!0===c?u:t),M.w=100,M.h=100,M.y=500,M.x=20,M.color="0xe11d48ff",l[18].populate(M),!0===c&&(f-=1),e=l[0];var R={};l[19]=this.element({parent:e||"root"},!0===c?u:t),R.w=200,R.h=200,R.x=50,R.y=700,R.color="0x94a3b8ff",R.z=100,l[19].populate(R),!0===c&&(f-=1),e=l[19];var _={};l[20]=this.element({parent:e||"root"},!0===c?u:t),_.content="Lightning!",_.x=100,_.y=140,_.__textnode=!0,l[20].populate(_),!0===c&&(f-=1),e=l[19];var L={};l[21]=this.element({parent:e||"root"},!0===c?u:t),L.w=300,L.h=100,L.color="0x475569ff",l[21].populate(L),!0===c&&(f-=1);var D=n.components&&n.components.Circle||r.Circle;e=l[19];var P={};l[22]=this.element({parent:e||"root"},!0===c?u:t),P.x=150,P.y=150,P.size=100,P.color="0xffffffff";var O=[];if(void 0!==D)for(var N in D[Symbol.for("config")].props)delete P[D[Symbol.for("config")].props[N]],O.push(D[Symbol.for("config")].props[N]);l[22].populate(P),!0===c&&(f-=1),e=l[22];var U,B={};if(B.x=150,B.y=150,B.size=100,B.color="0xffffffff","string"==typeof(s=B.is||"Circle")){if(!(U=n.components&&n.components[s]||r[s]))throw new Error('Component "Circle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(U=s);l[23]=U.call(null,{props:B},l[22],t),l[23][Symbol.for("slots")][0]?(e=l[23][Symbol.for("slots")][0],u=l[23],c=!0):e=l[23][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),e=l[0];var j={};l[24]=this.element({parent:e||"root"},!0===c?u:t),j.w=300,j.h=300,j.x=50,j.y=700,j.color="0xef444480",l[24].populate(j),!0===c&&(f-=1),e=l[0];var F={};l[25]=this.element({parent:e||"root"},!0===c?u:t),F.w=400,F.h=100,F.x=800,F.y=900,F.color="0x0284c7ff",l[25].populate(F),!0===c&&(f-=1),e=l[25];var z={};l[26]=this.element({parent:e||"root"},!0===c?u:t),z.w=.42*e.node.width,z.h=.3*e.node.height,z.y=.05*e.node.height,z.x=.01*e.node.width,z.color="0x075985ff",l[26].populate(z),!0===c&&(f-=1),e=l[25];var G={};l[27]=this.element({parent:e||"root"},!0===c?u:t),G.w=t.bar2.v,G.h=.3*e.node.height,G.y=.35*e.node.height,G.x=.01*e.node.width,G.color="0x6b21a8ff",l[27].populate(G),!0===c&&(f-=1),e=l[25];var V={};l[28]=this.element({parent:e||"root"},!0===c?u:t),V.w={transition:t.bar3},V.h=.3*e.node.height,V.y=.65*e.node.height,V.x=.01*e.node.width,V.color="0x9f1239ff",l[28].populate(V),!0===c&&(f-=1),e=l[0];var H={};l[29]=this.element({parent:e||"root"},!0===c?u:t),H.w=250,H.h=250,H.color="0xfef08aff",H.x=450,H.y=700,l[29].populate(H),!0===c&&(f-=1),e=l[29];var q={};l[30]=this.element({parent:e||"root"},!0===c?u:t),q.w=40,q.h=40,q.placement="left",q.color="0x818cf8ff",l[30].populate(q),!0===c&&(f-=1),e=l[29];var X={};l[31]=this.element({parent:e||"root"},!0===c?u:t),X.w=40,X.h=40,X.placement="center",X.color="0x2563ebff",l[31].populate(X),!0===c&&(f-=1),e=l[29];var W={};l[32]=this.element({parent:e||"root"},!0===c?u:t),W.w=40,W.h=40,W.placement="right",W.color="0x1e40afff",l[32].populate(W),!0===c&&(f-=1),e=l[29];var K={};l[33]=this.element({parent:e||"root"},!0===c?u:t),K.w=40,K.h=40,K.x=54,K.placement="top",K.color="0xf472b6ff",l[33].populate(K),!0===c&&(f-=1),e=l[29];var $={};l[34]=this.element({parent:e||"root"},!0===c?u:t),$.w=40,$.h=40,$.x=54,$.placement="middle",$.color="0xdb2777ff",l[34].populate($),!0===c&&(f-=1),e=l[29];var Y={};l[35]=this.element({parent:e||"root"},!0===c?u:t),Y.w=40,Y.h=40,Y.x=54,Y.placement="bottom",Y.color="0xbe185dff",l[35].populate(Y),!0===c&&(f-=1),e=l[29];var Q={};l[36]=this.element({parent:e||"root"},!0===c?u:t),Q.w=40,Q.h=40,Q.placement="{x: 'center', y: 'bottom'}",Q.color="0xa3e635ff",l[36].populate(Q),!0===c&&(f-=1),e=l[29];var J={};l[37]=this.element({parent:e||"root"},!0===c?u:t),J.w=40,J.h=40,J.placement="{x: 'right', y: 'middle'}",J.color="0x65a30dff",l[37].populate(J),!0===c&&(f-=1),e=l[29];var Z={};return l[38]=this.element({parent:e||"root"},!0===c?u:t),Z.w=40,Z.h=40,Z.placement="{x: 'center', y: 'middle'}",Z.color="0x4d7c0fff",l[38].populate(Z),!0===c&&(f-=1),l},effects:[function(e,t,n,r,o,i){t[9].set("x",e.xA)},function(e,t,n,r,o,i){t[10].set("x",e.xB)},function(e,t,n,r,o,i){t[11].set("x",e.xC)},function(e,t,n,r,o,i){t[12].set("x",e.xD)},function(e,t,n,r,o,i){t[16].set("y",150)},function(e,t,n,r,o,i){t[16].set("x",100)},function(e,t,n,r,o,i){t[17].set("y",{transition:e.yNested})},function(e,t,n,r,o,i){t[17].set("x",{transition:e.xNested})},function(e,t,n,r,o,i){t[27].set("w",e.bar2.v)},function(e,t,n,r,o,i){t[28].set("w",{transition:e.bar3})}],context:{}},state:function(){return{x1:20,x2:140,x3:260,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready:function(){var e=this;this.$setTimeout(function(){e.xD=e.xD+200,e.xC=e.xC+100,e.xB=e.xB+50,e.xA=e.xA+25},4e3),this.$setInterval(function(){e.yNested=0===e.yNested?50:0},2e3),this.$setInterval(function(){e.xNested=0===e.xNested?150:0},1e3),this.$setInterval(function(){var t=parseFloat(e.bar2.v),n="up"===e.bar2.direction?t+10:t-10;e.bar2.v=n+"%",n>=90&&(e.bar2.direction="down"),n<=10&&(e.bar2.direction="up")},400),this.$setInterval(function(){e.bar3=Math.ceil(96*Math.random())+"%"},2e3)}}}),Ai="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ei(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ii,Mi={};
/*
       @license
       Shaka Player
       Copyright 2016 Google LLC
       SPDX-License-Identifier: Apache-2.0
      */var Ri,_i,Li,Di,Pi,Oi,Ni=(Ii||(Ii=1,function(e){!function(){var t="undefined"!=typeof window?window:Ai,n={};for(var r in function(e,t,n){var o;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},s=function(n){n=["object"==("undefined"==typeof globalThis?"undefined":x(globalThis))&&globalThis,n,"object"==x(e)&&e,"object"==("undefined"==typeof self?"undefined":x(self))&&self,"object"==x(t)&&t];for(var r=0;r<n.length;++r){var o=n[r];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}(this);function u(e,t){if(t)e:{var n=s;e=e.split(".");for(var r=0;r<e.length-1;r++){var o=e[r];if(!(o in n))break e;n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:i(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function f(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}u("Symbol",function(e){function t(e,t){this.g=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(o){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(o||"")+"_"+r++,o)}}),u("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=s[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&a(r.prototype,e,{configurable:!0,writable:!0,value:function(){return l(i(this))}})}return e});var p,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var h;e:{var m={};try{m.__proto__={a:!0},h=m.a;break e}catch(gS){}h=!1}p=h?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=p;function v(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.hk=t.prototype}function y(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function b(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function w(e,t){e.i={sg:t,Fg:!0},e.g=e.m||e.j}function S(e,t,n){return e.g=n,{value:t}}function k(e){e.g=0}function C(e,t,n){e.m=t,null!=n&&(e.j=n)}function A(e,t){e.m=0,e.j=t||0}function E(e,t,n){e.g=t,e.m=n||0}function I(e,t){return e.m=t||0,t=e.i.sg,e.i=null,t}function M(e){e.A=[e.i],e.m=0,e.j=0}function R(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Fg?e.g=e.m||e.j:null!=n.u&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function _(e){this.g=new y,this.h=e}function L(e,t,n,r){try{var o=t.call(e.g.l,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return e.g.o=!1,o;var i=o.value}catch(a){return e.g.l=null,w(e.g,a),D(e)}return e.g.l=null,r.call(e.g,i),D(e)}function D(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,w(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Fg)throw t.sg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function P(e){this.next=function(t){return b(e.g),e.g.l?t=L(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=D(e)),t},this.throw=function(t){return b(e.g),e.g.l?t=L(e,e.g.l.throw,t,e.g.s):(w(e.g,t),t=D(e)),t},this.return=function(t){return function(e,t){b(e.g);var n=e.g.l;return n?L(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),D(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function O(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,o){!function e(i){i.done?r(i.value):Promise.resolve(i.value).then(t,n).then(e,o)}(e.next())})}(new P(new _(e)))}function N(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t){e instanceof String&&(e+="");var n=0,r=!1,o={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}function j(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,o=0;o<r;o++){var i=e[o];if(t.call(n,i,o,e))return{Dg:o,v:i}}return{Dg:-1,v:void 0}}function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}y.prototype.s=function(e){this.h=e},y.prototype.return=function(e){this.i={return:e},this.g=this.j},y.prototype.u=function(e){this.g=e},u("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(r){t.reject(r)}}function n(){this.g=null}function o(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=s.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(x(e)){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.C(e):this.m(e)}},t.prototype.C=function(e){var t=void 0;try{t=e.then}catch(r){return void this.l(r)}"function"==typeof t?this.I(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.A()},t.prototype.G=function(){var e=this;i(function(){if(e.B()){var t=s.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var e=s.CustomEvent,t=s.Event,n=s.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.H=function(e){var t=this.j();e.Ed(t.resolve,t.reject)},t.prototype.I=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{o(e(t))}catch(n){i(n)}}:t}var o,i,a=new t(function(e,t){o=e,i=t});return this.Ed(r(e,o),r(n,i)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ed=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},t.resolve=o,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=c(e),i=r.next();!i.done;i=r.next())o(i.value).Ed(t,n)})},t.all=function(e){var n=c(e),r=n.next();return r.done?o([]):new t(function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Ed(i(a.length-1),t),r=n.next()}while(!r.done)})},t}),u("WeakMap",function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=x(e);return"object"===t&&null!==e||"function"===t}function o(e){if(!U(e,s)){var t=new n;a(e,s,{value:t})}}function i(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&o(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(T){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var u=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(o(e),!U(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return r(e)&&U(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return r(e)&&U(e,s)&&U(e[s],this.g)},t.prototype.delete=function(e){return!!(r(e)&&U(e,s)&&U(e[s],this.g))&&delete e[s][this.g]},t}),u("Map",function(e){function t(){var e={};return e.Mb=e.next=e.head=e}function n(e,t){var n=e[1];return l(function(){if(n){for(;n.head!=e[1];)n=n.Mb;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&x(t);"object"==n||"function"==n?i.has(t)?n=i.get(t):(n=""+ ++a,i.set(t,n)):n="p_"+t;var r=e[0][n];if(r&&U(e[0],n))for(e=0;e<r.length;e++){var o=r[e];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:r,index:e,entry:o}}return{id:n,list:r,index:-1,entry:void 0}}function o(e){if(this[0]={},this[1]=t(),this.size=0,e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=r.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!r.next().done)}catch(T){return!1}}())return e;var i=new WeakMap;o.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this[0][n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this[1],Mb:this[1].Mb,head:this[1],key:e,value:t},n.list.push(n.entry),this[1].Mb.next=n.entry,this[1].Mb=n.entry,this.size++),this},o.prototype.delete=function(e){return!(!(e=r(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this[0][e.id],e.entry.Mb.next=e.entry.next,e.entry.next.Mb=e.entry.Mb,e.entry.head=null,this.size--,0))},o.prototype.clear=function(){this[0]={},this[1]=this[1].Mb=t(),this.size=0},o.prototype.has=function(e){return!!r(this,e).entry},o.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},o.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},o.prototype.keys=function(){return n(this,function(e){return e.key})},o.prototype.values=function(){return n(this,function(e){return e.value})},o.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},o.prototype[Symbol.iterator]=o.prototype.entries;var a=0;return o}),u("Set",function(e){function t(e){if(this.g=new Map,e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&o.value[1]==t&&!(o=r.next()).done&&o.value[0]!=t&&4==o.value[0].x&&o.value[1]==o.value[0]&&r.next().done}catch(i){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(r){return e.call(t,r,r,n)})},t)}),u("Array.prototype.keys",function(e){return e||function(){return B(this,function(e){return e})}}),u("Array.prototype.findIndex",function(e){return e||function(e,t){return j(this,e,t).Dg}}),u("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],o="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof o){e=o.call(e);for(var i=0;!(o=e.next()).done;)r.push(t.call(n,o.value,i++))}else for(o=e.length,i=0;i<o;i++)r.push(t.call(n,e[i],i));return r}}),u("Array.prototype.values",function(e){return e||function(){return B(this,function(e,t){return t})}}),u("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),u("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var o=n[t];if(o===e||Object.is(o,e))return!0}return!1}}),u("String.prototype.includes",function(e){return e||function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}}),u("String.fromCodePoint",function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var r=Number(arguments[n]);if(0>r||1114111<r||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);65535>=r?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),t+=String.fromCharCode(1023&r|56320))}return t}}),u("Array.prototype.find",function(e){return e||function(e,t){return j(this,e,t).v}}),u("String.prototype.startsWith",function(e){return e||function(e,t){var n=F(this,e,"startsWith"),r=n.length,o=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var i=0;i<o&&t<r;)if(n[t++]!=e[i++])return!1;return i>=o}}),u("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([t]);return!(!r.has(t)||r.has(n))&&(r.delete(t),r.add(n),!r.has(t)&&r.has(n))}catch(o){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)});var z="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var o in r)U(r,o)&&(e[o]=r[o])}return e};u("Object.assign",function(e){return e||z}),u("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),u("Array.prototype.entries",function(e){return e||function(){return B(this,function(e,t){return[e,t]})}}),u("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),u("String.prototype.repeat",function(e){return e||function(e){var t=F(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),u("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&1/0!==e&&-1/0!==e}}),u("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)U(e,t)&&n.push(e[t]);return n}}),u("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),u("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),u("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}),u("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)U(e,t)&&n.push([t,e[t]]);return n}});var G=this||self;function V(e,t){e=e.split(".");var n,r=G;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function H(){}function q(){}function X(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function W(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new X(2),this.j=new X(5),this.g=0,this.i=128e3,this.l=16e3}function $(){}function Y(){}function Q(){}function J(e){var t=N.apply(1,arguments);ee.has(e)||(ee.add(e),Q.apply($,f(t)))}function Z(){}X.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(W(this.h),W(this.j))};var ee=new Set;function te(){this.g={}}function ne(){this.g=new te}function re(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=oe;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(o){t=!1}oe=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}e.console&&(Q=function(){return console.warn.apply(console,f(N.apply(0,arguments)))},Y=function(){console.error.apply(console,f(N.apply(0,arguments)))}),(o=te.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},o.get=function(e){return(e=this.g[e])?e.slice():null},o.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(e){return e!=t}),0==this.g[e].length&&delete this.g[e])},o.forEach=function(e){for(var t in this.g)e(t,this.g[t])},o.size=function(){return Object.keys(this.g).length},o.keys=function(){return Object.keys(this.g)},(o=ne.prototype).release=function(){this.Ra(),this.g=null},o.D=function(e,t,n,r){this.g&&(e=new re(e,t,n,r),this.g.push(t,e))},o.ha=function(e,t,n,r){var o=this;this.D(e,t,function r(i){o.jb(e,t,r),n(i)},r)},o.jb=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],o=(r=c(r)).next();!o.done;o=r.next())(o=o.value).target!=e||n!=o.listener&&n||(o.jb(),this.g.remove(t,o))},o.Ra=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,f(t.g[e]));for(n=(t=c(n)).next();!n.done;n=t.next())n.value.jb();this.g.g={}}},V("shaka.util.EventManager",ne),ne.prototype.removeAll=ne.prototype.Ra,ne.prototype.unlisten=ne.prototype.jb,ne.prototype.listenOnce=ne.prototype.ha,ne.prototype.listen=ne.prototype.D,ne.prototype.release=ne.prototype.release,re.prototype.jb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var oe=void 0;function ie(t){if(se.has(t))return se.get(t);if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported(t);return se.set(t,n),n}return!!e.MediaSource&&(n=MediaSource.isTypeSupported(t),se.set(t,n),n)}function ae(){return!!e.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var se=new Map;function ue(e,t){this.g=e,this.h=t}function le(e,t){var n=new ue(5,0),r=pe,o=r.g,i=n.h-o.h;(0<(n.g-o.g||i)?r.i:r.h)(r.g,n,e,t)}function ce(e,t,n,r){Q([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function fe(e,t,n,r){Y([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}ue.prototype.toString=function(){return"v"+this.g+"."+this.h};var pe=null;function de(){}function he(){}function me(){}function ge(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ve(e)==ve(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=be(e);t=be(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function ve(e){return e instanceof ArrayBuffer?e:e.buffer}function ye(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function be(e,t,n){return Se(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function xe(e,t,n){return Se(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint16Array)}function we(e,t,n){return Se(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Se(e,t,n,r){var o=ve(e),i=1;"BYTES_PER_ELEMENT"in r&&(i=r.BYTES_PER_ELEMENT);var a=((e.byteOffset||0)+e.byteLength)/i;return new r(o,e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/i,a))),Math.floor(Math.min(e+Math.max(n,0),a))-e)}function Te(){}function ke(e){this.l=new he,(e=Ce[e.toLowerCase()])&&(this.l=e()),this.h=new de,(e=Ae)&&(this.h=e())}de.prototype.extract=function(){},de.prototype.decode=function(){return[]},de.prototype.clear=function(){},de.prototype.getStreams=function(){return[]},he.prototype.init=function(){},he.prototype.parse=function(){return[]},V("shaka.util.BufferUtils",me),me.toDataView=we,me.toUint16=xe,me.toUint8=be,me.toArrayBuffer=ye,me.equal=ge,Te.prototype.init=function(){},Te.prototype.i=function(){},Te.prototype.g=function(){},Te.prototype.j=function(){},V("shaka.media.IClosedCaptionParser",Te),ke.prototype.init=function(e,t){void 0!==t&&t||this.g(),this.l.init(e)},ke.prototype.i=function(e){for(var t=(e=c(e=this.l.parse(e))).next();!t.done;t=e.next()){var n=be((t=t.value).packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},ke.prototype.g=function(){this.h.clear()},ke.prototype.j=function(){return this.h.getStreams()},V("shaka.media.ClosedCaptionParser",ke),ke.findDecoder=function(){return Ae},ke.unregisterDecoder=function(){Ae=null},ke.registerDecoder=function(e){Ae=e},ke.findParser=function(e){return Ce[e]},ke.unregisterParser=function(e){delete Ce[e]},ke.registerParser=function(e,t){Ce[e]=t};var Ce={},Ae=null;function Ee(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ie,this.scroll=Me}V("shaka.text.CueRegion",Ee);var Ie=1;Ee.units={PX:0,PERCENTAGE:Ie,LINES:2};var Me="";function Re(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function _e(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function Le(e,t,n){if(n||(n=Re),e.length!=t.length)return!1;t=t.slice();for(var r=(e=c(e)).next(),o={};!r.done;o={Gg:void 0},r=e.next()){if(o.Gg=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.Gg,t)}}(o))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function De(e,t,n){if(n||(n=Re),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Pe(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Ee,this.position=null,this.positionAlign=Ue,this.size=0,this.textAlign=Be,this.direction=Ge,this.writingMode=Ve,this.lineInterpretation=He,this.line=null,this.lineHeight="",this.lineAlign=qe,this.displayAlign=Fe,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=$e,this.fontStyle=Ye,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={dc:32,rows:15}}function Oe(e,t){return(e=new Pe(e,t,"")).lineBreak=!0,e}function Ne(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!De(e.nestedCues,t.nestedCues,Ne))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!De(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}Ee.scrollMode={NONE:Me,UP:"up"},Pe.prototype.clone=function(){var e,t=new Pe(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},V("shaka.text.Cue",Pe),Pe.equal=Ne,Pe.prototype.clone=Pe.prototype.clone;var Ue="auto";Pe.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Ue};var Be="center",je={LEFT:"left",RIGHT:"right",CENTER:Be,START:"start",END:"end"};Pe.textAlign=je;var Fe="after",ze={BEFORE:"before",CENTER:"center",AFTER:Fe};Pe.displayAlign=ze;var Ge="ltr";Pe.direction={HORIZONTAL_LEFT_TO_RIGHT:Ge,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ve="horizontal-tb";Pe.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ve,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var He=0;Pe.lineInterpretation={LINE_NUMBER:He,PERCENTAGE:1};var qe="start",Xe={CENTER:"center",START:qe,END:"end"};Pe.lineAlign=Xe;var We={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Pe.defaultTextColor=We;var Ke={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Pe.defaultTextBackgroundColor=Ke;var $e=400;Pe.fontWeight={NORMAL:$e,BOLD:700};var Ye="normal",Qe={NORMAL:Ye,ITALIC:"italic",OBLIQUE:"oblique"};function Je(){}function Ze(e,t,n){tt[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ie:t}}function et(e,t){for(var n=e.toLowerCase().split(";")[0],r=c([it,ot,rt,nt]),o=r.next();!o.done;o=r.next())if(o=tt[n+"-"+o.value]){var i=o.ie(),a=i.isSupported(e,t);if(i.destroy(),a)return o.ie}return null}Pe.fontStyle=Qe,Pe.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},Je.prototype.destroy=function(){},V("shaka.transmuxer.TransmuxerEngine",Je),Je.findTransmuxer=et,Je.unregisterTransmuxer=function(e,t){delete tt[e.toLowerCase().split(";")[0]+"-"+t]},Je.registerTransmuxer=Ze,Je.prototype.destroy=Je.prototype.destroy;var tt={},nt=1,rt=2,ot=3,it=4;Je.PluginPriority={FALLBACK:nt,PREFERRED_SECONDARY:rt,PREFERRED:ot,APPLICATION:it};
/*
      		 @license
      		 Copyright 2008 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/
var at=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
      		 @license
      		 Copyright 2006 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/function st(e){var t;e instanceof st?(ut(this,e.Bb),this.uc=e.uc,lt(this,e.Eb),ct(this,e.Mc),this.Pa=e.Pa,ft(this,e.g.clone()),this.ec=e.ec):e&&(t=String(e).match(at))?(ut(this,t[1]||"",!0),this.uc=pt(t[2]||""),lt(this,t[3]||"",!0),ct(this,t[4]),this.Pa=pt(t[5]||"",!0),ft(this,t[6]||"",!0),this.ec=pt(t[7]||"")):this.g=new xt(null)}function ut(e,t,n){e.Bb=n?pt(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function lt(e,t,n){e.Eb=n?pt(t,!0):t}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Mc=t}else e.Mc=null}function ft(e,t,n){t instanceof xt?e.g=t:(n||(t=dt(t,yt)),e.g=new xt(t))}function pt(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function dt(e,t,n){return null!=e?(e=encodeURI(e).replace(t,ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(o=st.prototype).Bb="",o.uc="",o.Eb="",o.Mc=null,o.Pa="",o.ec="",o.toString=function(){var e=[],t=this.Bb;if(t&&e.push(dt(t,mt,!0),":"),t=this.Eb){e.push("//");var n=this.uc;n&&e.push(dt(n,mt,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Mc)&&e.push(":",String(t))}return(t=this.Pa)&&(this.Eb&&"/"!=t.charAt(0)&&e.push("/"),e.push(dt(t,"/"==t.charAt(0)?vt:gt,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.ec)&&e.push("#",dt(t,bt)),e.join("")},o.resolve=function(e){var t=this.clone();"data"===t.Bb&&(t=new st);var n=!!e.Bb;n?ut(t,e.Bb):n=!!e.uc,n?t.uc=e.uc:n=!!e.Eb,n?lt(t,e.Eb):n=null!=e.Mc;var r=e.Pa;if(n)ct(t,e.Mc);else if(n=!!e.Pa){if("/"!=r.charAt(0))if(this.Eb&&!this.Pa)r="/"+r;else{var o=t.Pa.lastIndexOf("/");-1!=o&&(r=t.Pa.substr(0,o+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){o=0==r.lastIndexOf("/",0),r=r.split("/");for(var i=[],a=0;a<r.length;){var s=r[a++];"."==s?o&&a==r.length&&i.push(""):".."==s?((1<i.length||1==i.length&&""!=i[0])&&i.pop(),o&&a==r.length&&i.push("")):(i.push(s),o=!0)}r=i.join("/")}}return n?t.Pa=r:n=""!==e.g.toString(),n?ft(t,e.g.clone()):n=!!e.ec,n&&(t.ec=e.ec),t},o.clone=function(){return new st(this)};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,bt=/#/g;function xt(e){this.g=e||null}function wt(e){if(!e.Ka&&(e.Ka={},e.Xc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),o=null;if(0<=r){var i=t[n].substring(0,r);o=t[n].substring(r+1)}else i=t[n];i=decodeURIComponent(i.replace(/\+/g," ")),o=o||"",e.add(i,decodeURIComponent(o.replace(/\+/g," ")))}}function St(e){return wt(e),e.Xc}function Tt(e,t,n){var r=N.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(o){this.stack=o.stack}}function kt(e){this.h=e,this.g=void 0}function Ct(e,t){return!e.length||!t.length||e===t||0<At(e,t).length}function At(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=(e=c(e)).next();!r.done;r=e.next()){r=r.value;for(var o=c(t),i=o.next();!i.done;i=o.next())if(i=i.value,r.keySystem==i.keySystem){o=new Map;for(var a=c((r.initData||[]).concat(i.initData||[])),s=a.next();!s.done;s=a.next())s=s.value,o.set(s.keyId,s);o=Array.from(o.values()),a=r.keyIds&&i.keyIds?new Set([].concat(f(r.keyIds),f(i.keyIds))):r.keyIds||i.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||i.persistentStateRequired,videoRobustness:r.videoRobustness||i.videoRobustness,audioRobustness:r.audioRobustness||i.audioRobustness,serverCertificate:r.serverCertificate||i.serverCertificate,serverCertificateUri:r.serverCertificateUri||i.serverCertificateUri,initData:o,keyIds:a});break}}return n}function Et(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}(o=xt.prototype).Ka=null,o.Xc=null,o.add=function(e,t){wt(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Xc++,this},o.set=function(e,t){return wt(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},o.get=function(e){return wt(this),this.Ka[e]||[]},o.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e,t=[];for(e in this.Ka)for(var n=encodeURIComponent(e),r=this.Ka[e],o=0;o<r.length;o++){var i=n;""!==r[o]&&(i+="="+encodeURIComponent(r[o])),t.push(i)}return this.g=t.join("&")},o.clone=function(){var e=new xt;if(e.g=this.g,this.Ka){var t,n={};for(t in this.Ka)n[t]=this.Ka[t].concat();e.Ka=n,e.Xc=this.Xc}return e},Tt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},V("shaka.util.Error",Tt),Tt.Severity={RECOVERABLE:1,CRITICAL:2},Tt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Tt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005},kt.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g};var It=new kt(function(){return ye(new Uint8Array([0]))}),Mt=new Map;function Rt(e){this.h=e,this.g=null}function _t(e){this.h=e,this.g=null}function Lt(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function Dt(e){return""!=Zt().canPlayType(e)}function Pt(){return!!navigator.userAgent.match(/Edge?\//)}function Ot(){return Jt("Xbox One")}function Nt(){return Jt("Tizen")}function Ut(){return Jt("Tizen 3")}function Bt(){return Jt("Tizen 2")}function jt(){return Jt("Web0S")}function Ft(){return jt()&&38===Gt()}function zt(){return Jt("CrKey")}function Gt(){if(!Jt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function Vt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Nt()&&!Jt("PC=EOS")&&!Jt("PC=APL")&&!Jt("VirginMedia")&&!Wt()&&!qt()&&!Jt("AFT")&&!Jt("WPE")&&!Jt("DT_STB_BCM")}function Ht(){return Jt("PlayStation 5")}function qt(){return Jt("PlayStation 4")}function Xt(){return Jt("Hisense")||Jt("VIDAA")}function Wt(){return Jt("SOPOpenBrowser")}function Kt(){if(!Vt())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function $t(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("windows")}function Yt(){return Jt("Android")}function Qt(){return!!(Nt()||jt()||Ot()||qt()||Ht()||Jt("AFT")||Jt("PC=EOS")||Jt("PC=APL")||Jt("VirginMedia")||Wt()||Jt("WPE")||zt()||Xt()||Jt("DT_STB_BCM"))}function Jt(e){return(navigator.userAgent||"").includes(e)}function Zt(){return rn||(nn||(nn=new _t(function(){rn=null})),(rn=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(rn=document.createElement("video")),nn.Y(1),rn)}function en(t){return t?t===e.shakaMediaKeysPolyfill:!!e.shakaMediaKeysPolyfill}function tn(){var t,n,r,o,i,a,s,u,l,c,f,p,d;return O(function(h){switch(h.g){case 1:if(t={width:1/0,height:1/0},zt()){if(f=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t.width=1280,t.height=720,C(h,15),!(p=f)){h.u(17);break}return S(h,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(Nt()){t.width=1920,t.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(n=webapis.systeminfo.getMaxVideoResolution(),t.width=n.width,t.height=n.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(t.width=7680,t.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(t.width=3840,t.height=2160)}catch(m){Q("Tizen: Error detecting screen size, default screen size 1920x1080.")}h.u(3);break}if(Ot()){t.width=1920,t.height=1080;try{r=void 0,r="undefined"!=typeof Windows?Windows:chrome.webview.hostObjects.sync.Windows,o=new r.Media.Protection.ProtectionCapabilities,i=r.Media.Protection.ProtectionCapabilityResult,a=null;do{a=o.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(a===i.maybe);a===i.probably&&(t.width=3840,t.height=2160)}catch(m){Q("Xbox: Error detecting screen size, default screen size 1920x1080.")}h.u(3);break}if(jt()){try{s=JSON.parse(e.PalmSystem.deviceInfo),t.width=Math.max(1920,s.screenWidth),t.height=Math.max(1080,s.screenHeight)}catch(m){Q("WebOS: Error detecting screen size, default screen size 1920x1080."),t.width=1920,t.height=1080}h.u(3);break}if(Xt()){e.Hisense_Get4KSupportState&&e.Hisense_Get4KSupportState()?(t.width=3840,t.height=2160):(t.width=1920,t.height=1080),h.u(3);break}if(!qt()&&!Ht()){h.u(3);break}return u=!1,C(h,9),S(h,e.msdk.device.getDisplayInfo(),11);case 11:l=h.h,u="4K"===l.resolution,E(h,10);break;case 9:return I(h),C(h,12),S(h,e.msdk.device.getDisplayInfoImmediate(),14);case 14:c=h.h,u="4K"===c.resolution,E(h,10);break;case 12:Q("PlayStation: Failed to get the display info:",I(h));case 10:u?(t.width=3840,t.height=2160):(t.width=1920,t.height=1080),h.u(3);break;case 18:p=h.h;case 17:if(p){t.width=3840,t.height=2160,h.u(19);break}if(!(d=f)){h.u(20);break}return S(h,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:d=h.h;case 20:d&&(t.width=1920,t.height=1080);case 19:E(h,3);break;case 15:Y("Failed to check canDisplayType:",I(h));case 3:return h.return(t)}})}Rt.prototype.Y=function(t){var n=this;this.stop();var r=!0,o=null;return this.g=function(){e.clearTimeout(o),r=!1},o=e.setTimeout(function(){r&&n.h()},1e3*t),this},Rt.prototype.stop=function(){this.g&&(this.g(),this.g=null)},_t.prototype.tc=function(){return this.stop(),this.h(),this},_t.prototype.Y=function(e){var t=this;return this.stop(),this.g=new Rt(function(){t.h()}).Y(e),this},_t.prototype.Sa=function(e){var t=this;return this.stop(),this.g=new Rt(function(){t.g.Y(e),t.h()}).Y(e),this},_t.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},V("shaka.util.Timer",_t),_t.prototype.stop=_t.prototype.stop,_t.prototype.tickEvery=_t.prototype.Sa,_t.prototype.tickAfter=_t.prototype.Y,_t.prototype.tickNow=_t.prototype.tc;var nn=null,rn=null;function on(){}function an(t){if(!t)return"";if(239==(t=be(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!qt())return(t=(new TextDecoder).decode(t)).includes("�")&&Y('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var o=65533;if(128&t[r]?t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(o=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(o=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(o=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3):o=t[r],65535>=o)n+=String.fromCharCode(o);else{var i=1023&(o-=65536);n+=String.fromCharCode(55296+(o>>10)),n+=String.fromCharCode(56320+i)}}return n}function sn(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Tt(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=we(e);for(var o=0;o<n;o++)r[o]=e.getUint16(2*o,t);return fn(r)}function un(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=be(e);if(239==n[0]&&187==n[1]&&191==n[2])return an(n);if(254==n[0]&&255==n[1])return sn(n.subarray(2),!1);if(255==n[0]&&254==n[1])return sn(n.subarray(2),!0);if(0==n[0]&&0==n[2])return sn(e,!1);if(0==n[1]&&0==n[3])return sn(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return an(e);throw new Tt(2,2,2003)}function ln(t){if(e.TextEncoder&&!qt()){var n=new TextEncoder;return ye(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return ye(n)}function cn(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),o=0;o<e.length;++o)r.setUint16(2*o,e.charCodeAt(o),t);return n}function fn(e){return dn.value()(e)}function pn(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return"#"==e[1]?0<=(e="x"==e[2]||"X"==e[2]?parseInt(e.substring(3),16):parseInt(e.substring(2),10))&&1114111>=e?String.fromCodePoint(e):"":t[e]||"'"}):e||""}V("shaka.util.StringUtils",on),on.resetFromCharCode=function(){dn.g=void 0},on.toUTF16=cn,on.toUTF8=ln,on.fromBytesAutoDetect=un,on.fromUTF16=sn,on.fromUTF8=an;var dn=new kt(function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(n){return!1}}for(var t={ac:65536};0<t.ac;(t={ac:t.ac}).ac/=2)if(e(t.ac))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.ac)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.ac));return n}}(t);return null});function hn(){}function mn(e){return e=fn(be(e)),btoa(e)}function gn(e,t){return t=null==t||t,e=mn(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function vn(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function yn(t){for(var n=t.length/2,r=new Uint8Array(n),o=0;o<n;o++)r[o]=e.parseInt(t.substr(2*o,2),16);return r}function bn(e){var t=be(e);e="";for(var n=(t=c(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function xn(){for(var e=N.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var o=e[r];o instanceof Uint8Array?t.set(o,n):t.set(be(o),n),n+=o.byteLength}return t}function wn(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length){var n=new st(e[0]);return t=new st(t[0]),[n.resolve(t).toString()]}t=t.map(function(e){return new st(e)}),n=[];for(var r=(e=c(e)).next();!r.done;r=e.next()){r=new st(r.value);for(var o=c(t),i=o.next();!i.done;i=o.next())n.push(r.resolve(i.value).toString())}return n}function Sn(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function Tn(t,n){n=void 0===n?"cenc":n;var r=[],o=[],i=[];t.forEach(function(e,t){var n=t;22!=n.length&&(n=gn(yn(t),!1));var a=e;22!=a.length&&(a=gn(yn(e),!1)),e={kty:"oct",kid:n,k:a},r.push(e),o.push(e.kid),i.push(t)}),t=JSON.stringify({keys:r});var a=JSON.stringify({kids:o});return a=[{initData:be(ln(a)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:a,keyIds:new Set(i)}}function kn(e,t){if(1==t.length)return t[0];if(null!=(e=Cn(e,t)))return e;throw new Tt(2,4,4025,t)}function Cn(e,t){for(var n=c(Rn[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var o=c(t),i=o.next();!i.done;i=o.next())if(i=i.value,r.test(i.trim()))return i.trim()}return e==En?"":null}function An(e,t){for(var n=[],r=(e=c(Rn[e])).next();!r.done;r=e.next()){r=r.value;for(var o=c(t),i=o.next();!i.done;i=o.next())i=i.value,r.test(i.trim())&&n.push(i.trim())}return n}V("shaka.util.Uint8ArrayUtils",hn),hn.concat=xn,hn.toHex=bn,hn.fromHex=yn,hn.fromBase64=vn,hn.toBase64=gn,hn.toStandardBase64=mn;var En="text",In={ga:"video",X:"audio",ua:En,De:"image",gj:"application"},Mn=1/15,Rn={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function _n(){}function Ln(e,t){var n=e;return t&&!Hn.includes(e)&&(n+='; codecs="'+t+'"'),n}function Dn(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Pn(e,t,n){var r=Ln(e,t);return et(t=Dn(e,t))?(e=et(t))?(n=(e=e()).convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?r.replace("video","audio"):r,n}function On(e,t,n){var r=[t];return Vn.forEach(function(t,o){var i=e[o];"codecs"==o?Hn.includes(e.mimeType)||r.push('codecs="'+n+'"'):i&&r.push(t+'="'+i+'"')}),"PQ"==e.hdr&&r.push('eotf="smpte2084"'),r.join(";")}function Nn(e){return e.split(";")[0].split("/")[1]}function Un(e){var t=Gn(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"vvc1"===e:case"vvi1"===e:return"vvc";case"dvh1"===e:case"dvhe"===e:return"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1";case"dvc1"===e:case"dvi1"===e:return"dovi-vvc"}return e}function Bn(e){for(var t=[],n=(e=c(e.split(","))).next();!n.done;n=e.next())n=Gn(n.value),t.push(n[0]);return t.sort().join(",")}function jn(e){return e.split(";")[0]}function Fn(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function zn(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function Gn(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}V("shaka.util.MimeUtils",_n),_n.getFullTypeWithAllCodecs=Dn,_n.getFullType=Ln;var Vn=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Hn=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function qn(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Xn(e){return!!$n[e]||("application/cea-608"==e||"application/cea-708"==e)&&!!Ae}function Wn(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=c(t.keys()),o=r.next();!o.done;o=r.next())(o=t.get(o.value).filter(function(e){return e.endTime<=n}))&&e.j.append(o)}function Kn(e,t,n){t.startTime+=n,t.endTime+=n;for(var r=(t=c(t.nestedCues)).next();!r.done;r=t.next())Kn(e,r.value,n)}qn.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},qn.prototype.remove=function(e,t){var n=this;return O(function(r){if(1==r.g)return S(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),k(r)})},V("shaka.text.TextEngine",qn),qn.prototype.destroy=qn.prototype.destroy,qn.findParser=function(e){return $n[e]},qn.unregisterParser=function(e){delete $n[e]},qn.registerParser=function(e,t){$n[e]=t};var $n={};function Yn(e,t){return e.concat(t)}function Qn(){}function Jn(e){return null!=e}function Zn(){}function er(e,t){return e=rr(e),t=rr(t),e.split("-")[0]==t.split("-")[0]}function tr(e,t){return e=rr(e),t=rr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function nr(e,t){return e=rr(e),t=rr(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function rr(e){var t=(e=c(e.split("-x-"))).next().value;t=void 0===t?"":t,e=void 0===(e=e.next().value)?"":e;var n=c(t.split("-"));return t=void 0===(t=n.next().value)?"":t,n=void 0===(n=n.next().value)?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ur.get(t)||t,((n=n.toUpperCase())?t+"-"+n:t)+(e?"-"+e:"")}function or(e,t){return e=rr(e),(t=rr(t))==e?4:tr(t,e)?3:nr(t,e)?2:tr(e,t)?1:0}function ir(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),ur.get(e)||e}function ar(e){return e.language?rr(e.language):e.audio&&e.audio.language?rr(e.audio.language):e.video&&e.video.language?rr(e.video.language):"und"}function sr(e,t){e=rr(e);for(var n=new Set,r=(t=c(t)).next();!r.done;r=t.next())n.add(rr(r.value));for(r=(t=c(n)).next();!r.done;r=t.next())if((r=r.value)==e)return r;for(r=(t=c(n)).next();!r.done;r=t.next())if(tr(r=r.value,e))return r;for(r=(t=c(n)).next();!r.done;r=t.next())if(nr(r=r.value,e))return r;for(t=(n=c(n)).next();!t.done;t=n.next())if(tr(e,t=t.value))return t;return null}V("shaka.util.LanguageUtils",Zn),Zn.findClosestLocale=sr,Zn.getLocaleForVariant=ar,Zn.getLocaleForText=function(e){return rr(e.language||"und")},Zn.getBase=ir,Zn.relatedness=or,Zn.areSiblings=function(e,t){var n=ir(e),r=ir(t);return e!=n&&t!=r&&n==r},Zn.normalize=rr,Zn.isSiblingOf=nr,Zn.isParentOf=tr,Zn.areLanguageCompatible=er,Zn.areLocaleCompatible=function(e,t){return(e=rr(e))==(t=rr(t))};var ur=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function lr(e){var t=new WeakSet;return function e(n){switch(x(n)){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer instanceof ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var o,i=r?[]:{};for(o in n)i[o]=e(n[o]);return r&&(i.length=n.length),i}}(e)}function cr(e){var t,n={};for(t in e)n[t]=e[t];return n}function fr(){}function pr(e,t,n,r){var o=e.variants;if((t.length||n.length)&&(o=function(e,t,n){for(var r=(t=c(t)).next(),o={};!r.done;o={oh:void 0},r=t.next())if(o.oh=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.oh)}}(o)),r.length){e=r;break}for(n=c(n),t=n.next(),r={};!t.done;r={ig:void 0},t=n.next())if(r.ig=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.ig)}}(r)),t.length){e=t;break}return e}(o,t,n)),r.length){for(t=new te,n=(o=c(o)).next();!n.done;n=o.next())n=n.value,t.push(String(n.video.width||0),n);var i=[];t.forEach(function(e,t){e=0;for(var n=[],o=(t=c(t)).next(),a={};!o.done;a={Ae:void 0},o=t.next())a.Ae=o.value,(o=r.filter(function(e){return function(t){return e.Ae.decodingInfos[0][t]}}(a)).length)>e?(e=o,n=[a.Ae]):o==e&&n.push(a.Ae);i.push.apply(i,f(n))}),o=i}n=new Set,t=new Set;for(var a=(o=c(o)).next();!a.done;a=o.next())(a=a.value).audio&&n.add(a.audio),a.video&&t.add(a.video);n=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var s=[];for(o=new Map,a=(n=c(n)).next();!a.done;a=n.next()){var u=(a=a.value).language+(a.channelsCount||0)+(a.audioSamplingRate||0)+a.roles.join(",")+a.label+a.groupId+a.fastSwitching,l=o.get(u)||[];if(l.length){var p=l[l.length-1],d=Un(p.codecs),h=Un(a.codecs);d!=h||a.bandwidth&&p.bandwidth&&!(a.bandwidth>p.bandwidth)||(l.push(a),s.push(a.id))}else l.push(a),s.push(a.id);o.set(u,l)}n=Array.from(t).sort(function(e,t){return e.bandwidth&&t.bandwidth?e.bandwidth-t.bandwidth:e.width-t.width}),t=ae();var m=[];for(o=new Map,a=(n=c(n)).next();!a.done;a=n.next()){if(a=a.value,u=Math.round(a.frameRate||0)+(a.hdr||"")+a.fastSwitching,(l=o.get(u)||[]).length){if(p=l[l.length-1],!t&&(d=Un(p.codecs))!==(h=Un(a.codecs)))continue;a.width>p.width||a.height>p.height?(l.push(a),m.push(a.id)):a.width==p.width&&a.height==p.height&&((d=Un(p.codecs))!=(h=Un(a.codecs))||a.bandwidth&&p.bandwidth&&!(a.bandwidth>p.bandwidth)||(l.push(a),m.push(a.id)))}else l.push(a),m.push(a.id);o.set(u,l)}e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,!(t&&!s.includes(t.id)||e&&!m.includes(e.id))})}function dr(e,t,n){function r(e,t,n){return e>=t&&e<=n}var o=e.video;if(o&&o.width&&o.height){var i=o.width,a=o.height;if(a>i&&(i=(a=c([a,i])).next().value,a=a.next().value),!r(i,t.minWidth,Math.min(t.maxWidth,n.width))||!r(a,t.minHeight,Math.min(t.maxHeight,n.height))||!r(o.width*o.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function hr(e,t,n){for(var r=!1,o=(e=c(e)).next();!o.done;o=e.next()){var i=(o=o.value).allowedByApplication;o.allowedByApplication=dr(o,t,n),i!=o.allowedByApplication&&(r=!0)}return r}function mr(e,t,n){return n=void 0===n?[]:n,O(function(r){return 1==r.g?S(r,gr(e,t,0<t.offlineSessionIds.length,n),2):(function(e){e.textStreams=e.textStreams.filter(function(e){return Xn(e=Ln(e.mimeType,e.codecs))})}(t),S(r,function(e){var t,n,r,o,i,a,s;return O(function(u){switch(u.g){case 1:t=[],n=c(e.imageStreams),r=n.next();case 2:if(r.done){u.u(4);break}if(o=r.value,"application/mp4"==(i=o.mimeType)&&"mjpg"==o.codecs&&(i="image/jpg"),Br.has(i)){u.u(5);break}if(!(a=jr.get(i))){Br.set(i,!1),u.u(5);break}return S(u,function(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}(a),7);case 7:s=u.h,Br.set(i,s);case 5:Br.get(i)&&t.push(o),r=n.next(),u.u(2);break;case 4:e.imageStreams=t,k(u)}})}(t),0))})}function gr(e,t,n,r){var o,i;return O(function(a){if(1==a.g)return Ot()&&function(e){for(var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set,r=(e=c(e)).next();!r.done;r=e.next())(r=r.value).video&&n.add(r.video);for(n=c(n),e=n.next();!e.done;e=n.next()){e=e.value;for(var o=(r=c(Object.keys(t))).next();!o.done;o=r.next())if(o=o.value,e.codecs.includes(o)){e.codecs=e.codecs.replace(o,t[o]);break}}}(t.variants),S(a,xr(t.variants,n,!1,r),2);o=null,e&&(i=e.g)&&(o=i.keySystem),t.variants=t.variants.filter(function(e){var t=function(e,t){var n=Ot(),r=Jt("Firefox")&&Yt(),o=e.video,i=o&&o.width||0,a=o&&o.height||0;if(n&&o&&(1920<i||1080<a)&&(o.codecs.includes("avc1.")||o.codecs.includes("avc3.")))return!1;if(o){if(n=Tr(o.codecs),o.codecs.includes(",")){if(n=Tr(n=kn("video",i=o.codecs.split(","))),i=Sr(i=kn("audio",i),o.mimeType),!ie(a=Pn(o.mimeType,i,"audio")))return!1;n=[n,i].join()}if(!ie(i=Pn(o.mimeType,n,"video")))return!1;o.codecs=n}if(o=e.audio,r&&o&&o.encrypted&&o.codecs.toLowerCase().includes("opus"))return!1;if(o){if(r=Sr(o.codecs,o.mimeType),!ie(n=Pn(o.mimeType,r,"audio")))return!1;o.codecs=r}return e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&e.keySystem!=t)})}(e,o);if(!t){var n=[];e.audio&&n.push(Or(e.audio)),e.video&&n.push(Or(e.video))}return t}),k(a)})}function vr(e){var t=[];for(n in e)t.push(n);t.sort();for(var n=[],r=(t=c(t)).next();!r.done;r=t.next()){var o=r.value;r=JSON.stringify(o),(o=e[o])instanceof Object?(o=vr(o),n.push(r+":"+o)):(o=JSON.stringify(o),n.push(r+":"+o))}return"{"+n.join(",")+"}"}function yr(e,t){var n,r,o,i,a,s,u;return O(function(l){if(1==l.g){for(n=function(e,t){if(e){var n=cr(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},r=null,o=[],i=c(t),a=i.next(),s={};!a.done;s={cache:void 0,Dd:void 0},a=i.next())u=a.value,s.Dd=vr(u),s.cache=Nr,s.cache[s.Dd]?r=n(r,s.cache[s.Dd]):o.push(br(u).then(function(e){return function(t){for(var o=null,i=(t=c(t||[])).next();!i.done;i=t.next())o=n(o,i.value);o&&(e.cache[e.Dd]=o,r=n(r,o))}}(s)));return S(l,Promise.all(o),2)}r&&e.decodingInfos.push(r),k(l)})}function br(e){var t=[""];e.video&&(t=Fn(e.video.contentType).split(","));var n=[""];e.audio&&(n=Fn(e.audio.contentType).split(","));for(var r=[],o=(t=c(t)).next();!o.done;o=t.next()){o=o.value;for(var i=c(n),a=i.next(),s={};!a.done;s={xc:void 0},a=i.next())a=a.value,s.xc=lr(e),e.video&&(s.xc.video.contentType=Ln(jn(s.xc.video.contentType),o)),e.audio&&(s.xc.audio.contentType=Ln(jn(s.xc.audio.contentType),a)),r.push(new Promise(function(e){return function(t,n){navigator.mediaCapabilities.decodingInfo(e.xc).then(function(e){t(e)}).catch(n)}}(s)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function xr(e,t,n,r){var o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T;return O(function(k){switch(k.g){case 1:if(e.some(function(e){return e.decodingInfos.length}))return k.return();o=c(r),i=o.next(),a={};case 2:if(i.done){k.u(4);break}a.Qg=i.value,s=!1,u=c(e),l=u.next();case 5:if(l.done){k.u(7);break}f=l.value,p=wr(f,t,n).filter((C=a,function(e){return((e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)===C.Qg})),d=c(p),h=d.next();case 8:if(h.done){k.u(10);break}return m=h.value,S(k,yr(f,m),9);case 9:h=d.next(),k.u(8);break;case 10:f.decodingInfos.length&&(s=!0),l=u.next(),k.u(5);break;case 7:if(s)return k.return();a={Qg:void 0},i=o.next(),k.u(2);break;case 4:g=c(e),v=g.next();case 12:if(v.done){k.u(0);break}y=v.value,b=wr(y,t,n).filter(function(e){return!(e=(e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!r.includes(e)}),x=c(b),w=x.next();case 15:if(w.done){v=g.next(),k.u(12);break}return T=w.value,S(k,yr(y,T),16);case 16:w=x.next(),k.u(15)}var C})}function wr(e,t,n){var r=e.audio,o=e.video,i=[],a=[];if(o)for(var s=c(o.fullMimeTypes),u=s.next();!u.done;u=s.next()){var l=Fn(u=u.value);if(l.includes(",")&&!r){var f=l.split(","),p=jn(u);l=kn("video",f),p=Pn(p,f=Sr(f=kn("audio",f),p),"audio"),a.push({contentType:p,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=Tr(l),u={contentType:Pn(jn(u),l,"video"),width:o.width||64,height:o.height||64,bitrate:o.bandwidth||e.bandwidth||1,framerate:o.frameRate||1},o.hdr)switch(o.hdr){case"SDR":u.transferFunction="srgb";break;case"PQ":u.transferFunction="pq";break;case"HLG":u.transferFunction="hlg"}o.colorGamut&&(u.colorGamut=o.colorGamut),i.push(u)}if(r)for(u=(s=c(r.fullMimeTypes)).next();!u.done;u=s.next())u=Pn(u=jn(l=u.value),l=Sr(Fn(l),u),"audio"),a.push({contentType:u,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(s=[],0==i.length&&i.push(null),0==a.length&&a.push(null),u=(i=c(i)).next();!u.done;u=i.next())for(u=u.value,p=(l=c(a)).next();!p.done;p=l.next())p=p.value,f={type:n?"file":"media-source"},u&&(f.video=u),p&&(f.audio=p),s.push(f);if(!(a=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[s];for(e=[],n=new Map,i=(a=c(a)).next();!i.done;i=a.next())i=i.value,n.get(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i);for(a=t?"required":"optional",t=t?["persistent-license"]:["temporary"],u=(i=c(n.keys())).next();!u.done;u=i.next()){for(u=u.value,l=[],f=(p=c(s)).next();!f.done;f=p.next()){f=Object.assign({},f.value);for(var d=n.get(u),h={keySystem:u,initDataType:"cenc",persistentState:a,distinctiveIdentifier:"optional",sessionTypes:t},m=(d=c(d)).next();!m.done;m=d.next()){if((m=m.value).initData&&m.initData.length){for(var g=new Set,v=c(m.initData),y=v.next();!y.done;y=v.next())g.add(y.value.initDataType);h.initDataType=m.initData[0].initDataType}m.distinctiveIdentifierRequired&&(h.distinctiveIdentifier="required"),m.persistentStateRequired&&(h.persistentState="required"),m.sessionType&&(h.sessionTypes=[m.sessionType]),r&&(h.audio?(m.encryptionScheme&&(h.audio.encryptionScheme=h.audio.encryptionScheme||m.encryptionScheme),h.audio.robustness=h.audio.robustness||m.audioRobustness):(h.audio={robustness:m.audioRobustness},m.encryptionScheme&&(h.audio.encryptionScheme=m.encryptionScheme)),""==h.audio.robustness&&delete h.audio.robustness),o&&(h.video?(m.encryptionScheme&&(h.video.encryptionScheme=h.video.encryptionScheme||m.encryptionScheme),h.video.robustness=h.video.robustness||m.videoRobustness):(h.video={robustness:m.videoRobustness},m.encryptionScheme&&(h.video.encryptionScheme=m.encryptionScheme)),""==h.video.robustness&&delete h.video.robustness)}f.keySystemConfiguration=h,l.push(f)}e.push(l)}return e}function Sr(e,t){return"flac"==e.toLowerCase()?Kt()?"fLaC":"flac":"opus"===e.toLowerCase()?Kt()&&"mp4"==Nn(t)?"Opus":"opus":e}function Tr(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function kr(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,o=n?n.mimeType:null,i=t?t.codecs:null,a=n?n.codecs:null,s=[];a&&s.push(a),i&&s.push(i);var u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var f=new Set;if(t)for(var p=c(t.roles),d=p.next();!d.done;d=p.next())f.add(d.value);if(n)for(d=(p=c(n.roles)).next();!d.done;d=p.next())f.add(d.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:u,audioMimeType:r,videoMimeType:o,codecs:s.join(", "),audioCodec:i,videoCodec:a,primary:e.primary,roles:Array.from(f),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,a.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Cr(e){return{id:e.id,active:!1,type:En,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Ar(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var o=e.tilesLayout;return r&&(o=r.tilesLayout||o),o&&null!=t&&(t/=Number(o.split("x")[0])),o&&null!=n&&(n/=Number(o.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:o||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Er(e){return e.__shaka_id||(e.__shaka_id=Ur++),e.__shaka_id}function Ir(e){var t=Rr(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function Mr(e){var t=Rr(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Rr(e){var t=e.language;return{id:Er(e),active:!1,type:"",bandwidth:0,language:rr(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function _r(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function Lr(e){return e.filter(function(e){return _r(e)})}function Dr(e,t,n,r){var o=e,i=e.filter(function(e){return e.primary});i.length&&(o=i);var a=o.length?o[0].language:"";if(o=o.filter(function(e){return e.language==a}),t){var s=sr(rr(t),e.map(function(e){return e.language}));s&&(o=e.filter(function(e){return rr(e.language)==s}))}if(o=o.filter(function(e){return e.forced==r}),n){if((e=Pr(o,n)).length)return e}else if(e=o.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=o.map(function(e){return e.roles}).reduce(Yn,[]),e.length?Pr(o,e[0]):o}function Pr(e,t){return e.filter(function(e){return e.roles.includes(t)})}function Or(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}V("shaka.util.StreamUtils",fr),fr.meetsRestrictions=dr;var Nr={},Ur=0,Br=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),jr=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Fr(){var e=this;this.A=null,this.j=!1,this.i=new K,this.F=new ne,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new _t(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}function zr(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Gr(e,t,n,r,o){if(e.m){var i=e.m.zg();i&&(n=n.filter(function(e){return!e.bandwidth||!i||e.bandwidth<=i}))}return t&&(n=n.filter(function(e){return dr(e,t,{width:o,height:r})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}(o=Fr.prototype).stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},o.release=function(){this.F.release(),this.C=null},o.init=function(e){this.A=e},o.chooseVariant=function(){var t=1/0,n=1/0;if(this.g.restrictToScreenSize){var r=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio;t=e.screen.height*r,n=e.screen.width*r}this.h&&this.g.restrictToElementSize&&(r=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=Math.min(t,this.o.clientHeight*r),n=Math.min(n,this.o.clientWidth*r)),(r=this.s.filter(function(e){return e&&!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})).length||(r=this.s);var o=r;if(r.length!=this.s.length&&(o=this.s.filter(function(e){return e&&!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),r=Gr(this,this.g.restrictions,o,1/0,1/0),1/0!=t||1/0!=n){r=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}(r);for(var i=(r=c(r)).next();!i.done;i=r.next())if((i=i.value).height>=t&&i.width>=n){t=i.height,n=i.width;break}r=Gr(this,this.g.restrictions,o,t,n)}for(t=this.getBandwidthEstimate(),o.length&&!r.length&&(r=[(r=Gr(this,null,o,1/0,1/0))[0]]),n=r[0]||null,o=0;o<r.length;o++){i=r[o];for(var a=isNaN(this.B)?1:Math.abs(this.B),s=a*i.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},l=o+1;l<r.length;l++)if(i.bandwidth!=r[l].bandwidth){u=r[l];break}a=a*u.bandwidth/this.g.bandwidthUpgradeTarget,t>=s&&t<=a&&(n.bandwidth!=i.bandwidth||n.bandwidth==i.bandwidth&&n.video&&i.video&&(n.video.width<i.video.width||n.video.height<i.video.height))&&(n=i)}return this.l=Date.now(),n},o.enable=function(){this.j=!0},o.disable=function(){this.j=!1},o.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&null!=this.l&&this.j&&zr(this))},o.trySuggestStreams=function(){null!=this.l&&this.j&&zr(this)},o.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e},o.setVariants=function(e){this.s=e},o.playbackRateChanged=function(e){this.B=e},o.setMediaElement=function(t){var n=this;this.o=t,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in e&&(this.h=new ResizeObserver(function(){n.C.Y(Vr)}),this.h.observe(this.o))},o.setCmsdManager=function(e){this.m=e},o.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},V("shaka.abr.SimpleAbrManager",Fr),Fr.prototype.configure=Fr.prototype.configure,Fr.prototype.setCmsdManager=Fr.prototype.setCmsdManager,Fr.prototype.setMediaElement=Fr.prototype.setMediaElement,Fr.prototype.playbackRateChanged=Fr.prototype.playbackRateChanged,Fr.prototype.setVariants=Fr.prototype.setVariants,Fr.prototype.getBandwidthEstimate=Fr.prototype.getBandwidthEstimate,Fr.prototype.trySuggestStreams=Fr.prototype.trySuggestStreams,Fr.prototype.segmentDownloaded=Fr.prototype.segmentDownloaded,Fr.prototype.disable=Fr.prototype.disable,Fr.prototype.enable=Fr.prototype.enable,Fr.prototype.chooseVariant=Fr.prototype.chooseVariant,Fr.prototype.init=Fr.prototype.init,Fr.prototype.release=Fr.prototype.release,Fr.prototype.stop=Fr.prototype.stop;var Vr=1;function Hr(e,t,n,r){for(n=void 0===n||n,r=void 0!==r&&r,this.h=e,this.g=new Set([e]),t=(e=c(t=t||[])).next();!t.done;t=e.next())this.add(t.value,n,r)}function qr(e,t,n,r){var o;if(!(o=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(o=e.audio&&t.audio)){o=e.audio;var i=t.audio;o=!!((!o.channelsCount||!i.channelsCount||2<o.channelsCount||2<i.channelsCount)&&o.channelsCount!=i.channelsCount||o.spatialAudio!==i.spatialAudio||n&&!Xr(o,i)||!Wr(o.roles,i.roles)||r&&o.groupId!==i.groupId)}return!(r=o)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Xr(e,t))&&Wr(e.roles,t.roles))),!r}function Xr(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return Bn(e)}),t=t.codecs.split(",").map(function(e){return Bn(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Wr(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=c(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Kr(e,t,n){t=void 0===t?"reload":t,n=void 0!==n&&n,this.i=e,this.h=t,this.g=n,this.j=new $r(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}function $r(e,t,n,r,o,i,a,s,u,l,c){this.A=e,this.B=t,this.i=n,this.j=r,this.C=o,this.m=i,this.h=void 0===a?"":a,this.l=void 0===s?"":s,this.o=void 0===u?"reload":u,this.s=void 0!==l&&l,this.g=void 0===c?"":c}function Yr(){this.g=Zr,this.i=(new Map).set(Zr,2).set(Jr,1),this.h=0}function Qr(e,t,n){e.i.set(Zr,n).set(Jr,t)}V("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),V("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"}),Hr.prototype.add=function(e,t,n){return!!qr(this.h,e,void 0===t||t,void 0!==n&&n)&&(this.g.add(e),!0)},Hr.prototype.values=function(){return this.g.values()},Kr.prototype.create=function(e){var t=this,n="smooth"==this.h&&ae(),r=e.filter(function(e){return qr(t.i,e,!n,t.g)});return r.length?new Hr(r[0],r,!n,this.g):this.j.create(e)},$r.prototype.create=function(t){var n=[];n=function(e,t){var n=sr(t=rr(t),e.map(function(e){return ar(e)}));return n?e.filter(function(e){return n==ar(e)}):[]}(t,this.A);var r=t.filter(function(e){return e.primary});return t=function(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}(n=n.length?n:r.length?r:t,this.B),t.length&&(n=t),this.m&&(t=function(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}(n,this.m),t.length&&(n=t)),this.j&&(t=function(t,n){return"AUTO"==n&&(n=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),t.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==n})}(n,this.j),t.length&&(n=t)),this.i&&(t=function(e,t){return e.filter(function(e){return!e.audio||!e.audio.channelsCount||e.audio.channelsCount==t})}(n,this.i),t.length&&(n=t)),this.h&&(t=function(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}(n,this.h),t.length&&(n=t)),this.l&&(t=function(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}(n,this.l),t.length&&(n=t)),t=function(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}(n,this.C),t.length&&(n=t),this.g&&(t=function(e,t){return e.filter(function(e){return!e.audio||e.audio.codecs==t})}(n,this.g),t.length&&(n=t)),new Hr(n[0],n,!("smooth"==this.o&&ae()),this.s)};var Jr=0,Zr=1;function eo(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function to(e){var t,n;return O(function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new Tt(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),S(r,new Promise(function(e){new _t(e).Y(n/1e3)}),2))}e.h*=e.m,k(r)})}function no(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function ro(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function oo(e,t){this.promise=e,this.i=t,this.g=!1}function io(e){return new oo(Promise.reject(e),function(){return Promise.resolve()})}function ao(){var e=Promise.reject(new Tt(2,7,7001));return e.catch(function(){}),new oo(e,function(){return Promise.resolve()})}function so(e){return new oo(Promise.resolve(e),function(){return Promise.resolve()})}function uo(e){return new oo(e,function(){return e.catch(function(){})})}function lo(e){return new oo(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function co(t,n){if(n)if(n instanceof Map)for(var r=c(n.keys()),o=r.next();!o.done;o=r.next())o=o.value,Object.defineProperty(this,o,{value:n.get(o),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function fo(e){var t,n=new co(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}ro.prototype.resolve=function(){},ro.prototype.reject=function(){},oo.prototype.abort=function(){return this.g=!0,this.i()},oo.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},oo.prototype.Aa=function(e,t){function n(n){return function(s){if(o.g&&n)i.reject(a);else{var u=n?e:t;u?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(o){return n.reject(o),function(){return Promise.resolve()}}}(u,s,i):(n?i.resolve:i.reject)(s)}}}function r(){return i.reject(a),o.abort()}var o=this,i=new ro,a=new Tt(2,7,7001);return this.promise.then(n(!0),n(!1)),new oo(i,function(){return r()})},V("shaka.util.AbortableOperation",oo),oo.prototype.chain=oo.prototype.Aa,oo.prototype.finally=oo.prototype.finally,oo.all=lo,oo.prototype.abort=oo.prototype.abort,oo.notAbortable=uo,oo.completed=so,oo.aborted=ao,oo.failed=io,co.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},co.prototype.stopImmediatePropagation=function(){this.g=!0},co.prototype.stopPropagation=function(){},V("shaka.util.FakeEvent",co);var po={ij:"abrstatuschanged",jj:"adaptation",kj:"audiotrackchanged",lj:"buffering",mj:"complete",nj:"downloadfailed",oj:"downloadheadersreceived",pj:"drmsessionupdate",rj:"emsg",Ij:"prft",Error:"error",sj:"expirationupdated",tj:"firstquartile",uj:"gapjumped",xj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Metadata:"metadata",Fj:"midpoint",Gj:"nospatialvideoinfo",Hj:"onstatechange",Jj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"spatialvideoinfo",Oj:"stalldetected",Pj:"started",Qj:"statechanged",Rj:"streaming",Sj:"textchanged",Tj:"texttrackvisibility",Uj:"thirdquartile",Vj:"timelineregionadded",Wj:"timelineregionenter",Xj:"timelineregionexit",Yj:"trackschanged",$j:"unloading",bk:"variantchanged"};function ho(){this.ya=new te,this.me=this}function mo(){this.g=[]}function go(e,t){e.g.push(t.finally(function(){_e(e.g,t)}))}function vo(e,t,n,r,o,i){ho.call(this),this.i=!1,this.m=new mo,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=r||null,this.F=o||null,this.C=i||null,this.o=this.s=!1}function yo(e,t,n,r){n=n||Ao;var o=Eo[e];(!o||n>=o.priority)&&(Eo[e]={priority:n,ie:t,Di:void 0!==r&&r})}function bo(e,t){for(var n=c(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(n=(e=c(e.h)).next();!n.done;n=e.next())t.h.add(n.value)}function xo(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function wo(e,t,n,r,o,i,a,s){e.s&&(n.uris[i]=n.uris[i].replace("https://","http://")),e.o&&(n.uris[i]=n.uris[i].replace("http://","https://")),0<i&&e.F&&e.F(t,r,n.uris[i],n.uris[i-1]);var u=new st(n.uris[i]),l=u.Bb,c=!1;l||(ut(u,l=(l=location.protocol).slice(0,-1)),n.uris[i]=u.toString()),l=l.toLowerCase();var f=(l=Eo[l])?l.ie:null;if(!f)return io(new Tt(2,1,1e3,u));var p,d=l.Di,h=null,m=null,g=!1,v=!1;return uo(to(o)).Aa(function(){if(e.i)return ao();p=Date.now();var o=0;n.requestStartTime=Date.now();var a=f(n.uris[i],n,t,function(i,a,u){h&&h.stop(),m&&m.Y(l/1e3),e.l&&t==Co&&(o++,n.packetNumber=o,e.l(i,a,So(r),n),c=!0,s.g=u)},function(r){e.j&&e.j(r,n,t),v=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!d)return a;var u=n.retryParameters.connectionTimeout;u&&(h=new _t(function(){g=!0,a.abort()})).Y(u/1e3);var l=n.retryParameters.stallTimeout;return l&&(m=new _t(function(){g=!0,a.abort()})),a}).Aa(function(r){h&&h.stop(),m&&m.stop(),null==r.timeMs&&(r.timeMs=Date.now()-p);var o={response:r,ii:c};return!v&&e.j&&e.j(r.headers,n,t),o},function(u){if(h&&h.stop(),m&&m.stop(),e.A){var l=null,c=0;u instanceof Tt&&(l=u,1001==u.code&&(c=u.data[1])),e.A(n,l,c,g)}if(e.i)return ao();if(g&&(u=new Tt(1,1,1003,n.uris[i],t)),u instanceof Tt){if(7001==u.code)throw u;if(1010==u.code)throw a;if(1==u.severity)return l=new co("retry",l=(new Map).set("error",u)),e.dispatchEvent(l),i=(i+1)%n.uris.length,wo(e,t,n,r,o,i,u,s)}throw u})}function So(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}function To(){this.g=0}function ko(e,t,n){oo.call(this,e,t),this.h=n}ho.prototype.addEventListener=function(e,t){this.ya&&this.ya.push(e,t)},ho.prototype.removeEventListener=function(e,t){this.ya&&this.ya.remove(e,t)},ho.prototype.dispatchEvent=function(e){if(!this.ya)return!0;var t=this.ya.get(e.type)||[],n=this.ya.get("All");for(n&&(t=t.concat(n)),n=(t=c(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.me,e.currentTarget=this.me;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},ho.prototype.release=function(){this.ya=null},mo.prototype.destroy=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},v(vo,ho),(o=vo.prototype).Pf=function(e){this.s=e},o.Qf=function(e){this.o=e},o.Gi=function(e){this.g.add(e)},o.bj=function(e){this.g.delete(e)},o.mg=function(){this.g.clear()},o.Hi=function(e){this.h.add(e)},o.cj=function(e){this.h.delete(e)},o.ng=function(){this.h.clear()},o.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),ho.prototype.release.call(this),this.m.destroy()},o.request=function(e,t,n){var r=this,o=new To;if(this.i){var i=Promise.reject(new Tt(2,7,7001));return i.catch(function(){}),new ko(i,function(){return Promise.resolve()},o)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?lr(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=lr(t.uris),i=function(e,t,n,r){function o(e){i=i.Aa(function(){return n.body&&(n.body=ye(n.body)),e(t,n,r)})}var i=so(void 0);e.B&&o(e.B);for(var a=(e=c(e.g)).next();!a.done;a=e.next())o(a.value);return i.Aa(void 0,function(e){if(e instanceof Tt&&7001==e.code)throw e;throw new Tt(2,1,1006,e)})}(this,e,t,n);var a=i.Aa(function(){return wo(r,e,t,n,new eo(t.retryParameters,!1),0,null,o)}),s=a.Aa(function(t){return function(e,t,n,r){for(var o=so(void 0),i=(e=c(e.h)).next(),a={};!i.done;a={Vg:void 0},i=e.next())a.Vg=i.value,o=o.Aa(function(e){return function(){var o=n.response;return o.data&&(o.data=ye(o.data)),(0,e.Vg)(t,o,r)}}(a));return o.Aa(function(){return n},function(e){var t=2;if(e instanceof Tt){if(7001==e.code)throw e;t=e.severity}throw new Tt(t,1,1007,e)})}(r,e,t,n)}),u=Date.now(),l=0;i.promise.then(function(){l=Date.now()-u},function(){});var f=0;a.promise.then(function(){f=Date.now()},function(){});var p=s.Aa(function(o){var i=Date.now()-f,a=o.response;return a.timeMs+=l,a.timeMs+=i,o.ii||!r.l||a.fromCache||"HEAD"==t.method||e!=Co||r.l(a.timeMs,a.data.byteLength,So(n)),r.C&&r.C(e,a,n),a},function(e){throw e&&(e.severity=2),e});return i=new ko(p.promise,function(){return p.abort()},o),go(this.m,i),i},V("shaka.net.NetworkingEngine",vo),vo.prototype.request=vo.prototype.request,vo.prototype.destroy=vo.prototype.destroy,vo.makeRequest=xo,vo.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},vo.prototype.clearAllResponseFilters=vo.prototype.ng,vo.prototype.unregisterResponseFilter=vo.prototype.cj,vo.prototype.registerResponseFilter=vo.prototype.Hi,vo.prototype.clearAllRequestFilters=vo.prototype.mg,vo.prototype.unregisterRequestFilter=vo.prototype.bj,vo.prototype.registerRequestFilter=vo.prototype.Gi,vo.unregisterScheme=function(e){delete Eo[e]},vo.registerScheme=yo,vo.prototype.setForceHTTPS=vo.prototype.Qf,vo.prototype.setForceHTTP=vo.prototype.Pf,vo.NumBytesRemainingClass=To,v(ko,oo),vo.PendingRequest=ko;var Co=1;vo.RequestType={MANIFEST:0,SEGMENT:Co,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},vo.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var Ao=3;vo.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Ao};var Eo={};function Io(e){this.g=!1,this.h=new ro,this.i=e}function Mo(e,t){if(e.g){if(t instanceof Tt&&7003==t.code)throw t;throw new Tt(2,7,7003,t)}}function Ro(e,t){for(var n=[],r=(e=c(e)).next();!r.done;r=e.next())n.push(t(r.value));return n}function _o(e){for(var t=new Map,n=c(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Lo(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function Do(e,t){this.h=we(e),this.i=t==Oo,this.g=0}function Po(){return new Tt(2,3,3e3)}Io.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(o=Do.prototype).na=function(){return this.g<this.h.byteLength},o.va=function(){return this.g},o.getLength=function(){return this.h.byteLength},o.T=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw Po()}},o.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw Po()}},o.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw Po()}},o.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw Po()}},o.Nc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw Po()}if(2097151<t)throw new Tt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},o.qb=function(e){if(this.g+e>this.h.byteLength)throw Po();var t=be(this.h,this.g,e);return this.g+=e,t},o.skip=function(e){if(this.g+e>this.h.byteLength)throw Po();this.g+=e},o.Oi=function(e){if(this.g<e)throw Po();this.g-=e},o.seek=function(e){if(0>e||e>this.h.byteLength)throw Po();this.g=e},o.oc=function(){for(var e=this.g;this.na()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=be(this.h,e,this.g-e),this.g+=1,an(e)},V("shaka.util.DataViewReader",Do),Do.prototype.readTerminatedString=Do.prototype.oc,Do.prototype.seek=Do.prototype.seek,Do.prototype.rewind=Do.prototype.Oi,Do.prototype.skip=Do.prototype.skip,Do.prototype.readBytes=Do.prototype.qb,Do.prototype.readUint64=Do.prototype.Nc,Do.prototype.readInt32=Do.prototype.Sg,Do.prototype.readUint32=Do.prototype.P,Do.prototype.readUint16=Do.prototype.la,Do.prototype.readUint8=Do.prototype.T,Do.prototype.getLength=Do.prototype.getLength,Do.prototype.getPosition=Do.prototype.va,Do.prototype.hasMoreData=Do.prototype.na;var Oo=1;function No(){this.i=[],this.h=[],this.g=!1}function Uo(e){for(var t=Ho(e);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Bo(e){for(var t=Ho(e),n=e.reader.P(),r=0;r<n&&(e.parser.Kc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function jo(e){var t=Ho(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Fo(e){var t=Ho(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function zo(e){return function(t){e(t.reader.qb(t.reader.getLength()-t.reader.va()))}}function Go(e){for(var t=0,n=(e=c(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Vo(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Ho(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}Do.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Oo},(o=No.prototype).box=function(e,t){return e=Go(e),this.i[e]=qo,this.h[e]=t,this},o.S=function(e,t){return e=Go(e),this.i[e]=Xo,this.h[e]=t,this},o.stop=function(){this.g=!0},o.parse=function(e,t,n){for(e=new Do(e,0),this.g=!1;e.na()&&!this.g;)this.Kc(0,e,t,n)},o.Kc=function(e,t,n,r){var o=t.va();if(r&&o+8>t.getLength())this.g=!0;else{var i=t.P(),a=t.P(),s=Vo(a),u=!1;switch(i){case 0:i=t.getLength()-o;break;case 1:if(r&&t.va()+8>t.getLength())return void(this.g=!0);i=t.Nc(),u=!0}var l=this.h[a];if(l){var c=null,f=null;if(this.i[a]==Xo){if(r&&t.va()+4>t.getLength())return void(this.g=!0);c=(f=t.P())>>>24,f&=16777215}a=o+i,n&&a>t.getLength()&&(a=t.getLength()),r&&a>t.getLength()?this.g=!0:(r=a-t.va(),l({name:s,parser:this,partialOkay:n||!1,version:c,flags:f,reader:t=new Do(t=0<r?t.qb(r):new Uint8Array(0),0),size:i,start:o+e,has64BitSize:u}))}else t.skip(Math.min(o+i-t.va(),t.getLength()-t.va()))}},V("shaka.util.Mp4Parser",No),No.headerSize=Ho,No.typeToString=Vo,No.allData=zo,No.audioSampleEntry=Fo,No.visualSampleEntry=jo,No.sampleDescription=Bo,No.children=Uo,No.prototype.parseNext=No.prototype.Kc,No.prototype.parse=No.prototype.parse,No.prototype.stop=No.prototype.stop,No.prototype.fullBox=No.prototype.S,No.prototype.box=No.prototype.box;var qo=0,Xo=1;function Wo(e){var t=this;this.g=[],this.h=[],this.data=[],(new No).box("moov",Uo).box("moof",Uo).S("pssh",function(e){if(!(1<e.version)){var n=be(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(bn(e.reader.qb(16))),0<e.version){n=e.reader.P();for(var r=0;r<n;r++){var o=bn(e.reader.qb(16));t.h.push(o)}}}}).parse(e)}function Ko(e,t,n,r){var o=e.length,i=t.length+16+o;0<r&&(i+=4+16*n.size);var a=new Uint8Array(i),s=we(a),u=0;if(s.setUint32(u,i),u+=4,s.setUint32(u,1886614376),u+=4,1>r?s.setUint32(u,0):s.setUint32(u,16777216),u+=4,a.set(t,u),u+=t.length,0<r)for(s.setUint32(u,n.size),u+=4,n=(t=c(n)).next();!n.done;n=t.next())n=yn(n.value),a.set(n,u),u+=n.length;return s.setUint32(u,o),a.set(e,u+4),a}function $o(e,t){return Yo(e=un(e),t)}function Yo(e,t){return e=function(e){function t(o,i){i=void 0!==i&&i;for(var a=[];e[r];)if(60==e.charCodeAt(r)){if(47===e.charCodeAt(r+1)){i=r+2,r=e.indexOf(">",r);var s=(i=e.substring(i,r)).indexOf(o);if(-1==s){var u=o.indexOf(".");0<u&&(s=i.indexOf(o.substring(0,u)))}if(-1==s)throw o=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(o.length-1)+"\nColumn: "+(o[o.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}if(33===e.charCodeAt(r+1)){if(45==e.charCodeAt(r+2)){for(;-1!==r&&(62!==e.charCodeAt(r)||45!=e.charCodeAt(r-1)||45!=e.charCodeAt(r-2)||-1==r);)r=e.indexOf(">",r+1);-1===r&&(r=e.length)}else if(91===e.charCodeAt(r+2)&&91===e.charCodeAt(r+8)&&"cdata"===e.substr(r+3,5).toLowerCase()){-1==(s=e.indexOf("]]>",r))?(a.push(e.substr(r+9)),r=e.length):(a.push(e.substring(r+9,s)),r=s+3);continue}r++;continue}e:{u=i,r++;var l=n(),c={};for(s=[];62!==e.charCodeAt(r)&&e[r];){var p=e.charCodeAt(r);if(64<p&&91>p||96<p&&123>p){p=n();for(var d=e.charCodeAt(r);d&&39!==d&&34!==d&&!(64<d&&91>d||96<d&&123>d)&&62!==d;)r++,d=e.charCodeAt(r);var h=r+1;if(r=e.indexOf(e[r],h),h=e.slice(h,r),39===d||34===d){if(-1===r){for(u={tagName:l,attributes:c,children:s,parent:null},l=0;l<s.length;l++)"string"!=typeof s[l]&&(s[l].parent=u);s=u;break e}}else h=null,r--;p.startsWith("xmlns:")&&ki.set(h,p.split(":")[1]),"tt"===l&&"xml:space"===p&&"preserve"===h&&(u=!0),c[p]=h}r++}for(47!==e.charCodeAt(r-1)?(r++,s=t(l,u)):r++,u={tagName:l,attributes:c,children:s,parent:null},l=s.length,c=0;c<l;c++)"string"!=typeof(p=s[c])?p.parent=u:c==l-1&&"\n"==p&&s.pop();s=u}if(a.push(s),"string"==typeof s)break;"?"===s.tagName[0]&&s.children&&(a.push.apply(a,f(s.children)),s.children=[])}else s=r,-2==(r=e.indexOf("<",r)-1)&&(r=e.length),s=e.slice(s,r+1),i?0<s.length&&a.push(s):(a.length&&1==s.length&&"\n"==s[0]||0<s.trim().length)&&a.push(s),r++;return a}function n(){for(var t=r;-1==="\r\n\t>/= ".indexOf(e[r])&&e[r];)r++;return e.slice(t,r)}var r=0;return t("")}(e),!t&&e.length?e[0]:(e=e.find(function(e){return e.tagName===t}))?e:null}function Qo(e){return ki.has(e)?ki.get(e):""}function Jo(e){return"string"==typeof e}function Zo(e){var t=[];if(!e.children)return[];for(var n=(e=c(e.children)).next();!n.done;n=e.next())"string"!=typeof(n=n.value)&&t.push(n);return t}function ei(e,t){var n=[];if(!e.children)return[];for(var r=(e=c(e.children)).next();!r.done;r=e.next())(r=r.value).tagName===t&&n.push(r);return n}function ti(e){return"string"==typeof e?pn(e):""===(e=e.children.reduce(function(e,t){return"string"==typeof t?e+t:e},""))?null:pn(e)}function ni(e){return Array.from(e.children).every(function(e){return"string"==typeof e})?((e=ti(e))&&(e=e.trim()),e):null}function ri(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children)for(var r=(e=c(e.children)).next();!r.done;r=e.next())ri(r.value,t,n);return n}function oi(e,t){return 1!=(e=ei(e,t)).length?null:e[0]}function ii(e,t,n){return 1!=(e=ui(e,t,n)).length?null:e[0]}function ai(e,t,n,r){r=void 0===r?null:r;var o=null;return null!=(e=e.attributes[t])&&(o=n(e)),null==o?r:o}function si(e,t,n){return t=Qo(t),e.attributes[t+":"+n]||null}function ui(e,t,n){t=Qo(t);var r=[];if(e.children)for(var o=(e=c(e.children)).next();!o.done;o=e.next())(o=o.value)&&o.tagName===t+":"+n&&r.push(o);return r}function li(e,t,n){for(var r=(t=c(t)).next();!r.done;r=t.next())if(r=si(e,r.value,n))return r;return null}function ci(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function fi(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function pi(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function di(e){return 0==(e=Number(e))%1?e:null}function hi(e){return 0==(e=Number(e))%1&&0<e?e:null}function mi(e){return 0==(e=Number(e))%1&&0<=e?e:null}function gi(e){return e=Number(e),isNaN(e)?null:e}function vi(e){return!!e&&"true"===e.toLowerCase()}function yi(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function bi(e){for(var t=[],n=(e=c(e=pn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))).next();!n.done;n=e.next()){var r=(n=n.value).match(/^([\w]+)/);if(r){var o=n.match(/(@id='(.*?)')/),i=n.match(/(@t='(\d+)')/),a=n.match(/(@n='(\d+)')/),s=n.match(/\[(\d+)\]/);t.push({name:r[0],id:o?o[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:i?Number(i[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:s?Number(s[1])-1:null,Sb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Sb=n.slice(1))}return t}function xi(e,t){var n=bi(t.attributes.sel||"");if(n.length){var r=n[n.length-1],o=t.attributes.pos||null;null==(n=r.position)&&(null!==r.t&&(n=wi(e,"t",r.t)),null!==r.n&&(n=wi(e,"n",r.n))),null===n?n="prepend"===o?0:e.length:"prepend"===o?--n:"after"===o&&++n,o=t.tagName,(r=r.Sb)&&e[n]?Si(e[n],o,r,ni(t)||""):("remove"!==o&&"replace"!==o||e.splice(n,1),"add"!==o&&"replace"!==o||e.splice.apply(e,[n,0].concat(f(t.children))))}}function wi(e,t,n){for(var r=0,o=(e=c(e)).next();!o.done;o=e.next()){if(Number(o.value.attributes[t])===n)return r;r++}return null}function Si(e,t,n,r){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=r)}function Ti(e){var t,n=document.createElementNS("",e.tagName);for(t in e.attributes)n.setAttribute(t,e.attributes[t]);for(t=(e=c(e.children)).next();!t.done;t=e.next()){var r=void 0;r="string"==typeof(t=t.value)?new Text(t):Ti(t),n.appendChild(r)}return n}var ki=new Map([]);function Ci(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.fa=this.da=!1,this.I=0,this.g=null,this.B=new ne,this.i=new Map,this.A=new Map,this.l=new ro,this.h=null,this.o=function(n){2==n.severity&&t.l.reject(n),e.onError(n)},this.Z=new Map,this.ea=new Map,this.L=new _t(function(){return function(e){var t=e.Z,n=e.ea;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.o(new Tt(2,6,6014)),e.C.ee(Lo(n))}(t)}),this.R=!1,this.N=[],this.U=!1,this.K=new _t(function(){!function(e){e.i.forEach(function(t,n){var r=t.zf,o=n.expiration;isNaN(o)&&(o=1/0),o!=r&&(e.C.onExpirationUpdated(n.sessionId,o),t.zf=o)})}(t)}),this.l.catch(function(){}),this.j=new Io(function(){return function(e){return O(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,S(t,Bi(e),2);case 2:if(!e.m){t.u(3);break}return C(t,4),S(t,e.m.setMediaKeys(null),6);case 6:E(t,5);break;case 4:I(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,k(t)}})}(t)}),this.ba=!1,this.F=this.G=null}function Ai(e,t,n){e.A=new Map;for(var r=(n=c(n)).next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(r=(n=c(e.h.persistentSessionsMetadata)).next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.R=0<e.A.size,Ei(e,t)}function Ei(e,t){var n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b;return O(function(x){if(1==x.g){if(n=function(e){return 0==(e=_o(e.h.clearKeys)).size?null:Tn(e)}(e))for(r=c(t),o=r.next();!o.done;o=r.next())(i=o.value).video&&(i.video.drmInfos=[n]),i.audio&&(i.audio.drmInfos=[n]);for(a=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),a||(s=_o(e.h.servers),function(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=c(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(t,s)),u=new Set,l=c(t),f=l.next();!f.done;f=l.next())for(p=f.value,d=ji(p),h=c(d),m=h.next();!m.done;m=h.next())g=m.value,u.add(g);for(v=c(u),y=v.next();!y.done;y=v.next())Gi(y.value,_o(e.h.servers),_o(e.h.advanced||{}),e.h.keySystemsMapping);return S(x,xr(t,e.R,e.ba,e.h.preferredKeySystems),2)}return Mo(e.j),a||Object.keys(e.h.servers).length?(b=Li(e,void 0,t),x.return(a?b:b.catch(function(){}))):(e.da=!0,x.return(Promise.resolve()))})}function Ii(e){var t;return O(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return S(n,e.G,3);case 3:return Mo(e.j),n.return();case 2:return C(n,4),e.G=e.m.setMediaKeys(e.s),S(n,e.G,6);case 6:E(n,5);break;case 4:t=I(n),e.o(new Tt(2,6,6003,t.message));case 5:Mo(e.j),k(n)}})}function Mi(e){var t,n,r,o;return O(function(i){if(1==i.g)return e.A.size?(e.A.forEach(function(t,n){Oi(e,n,t)}),S(i,e.l,3)):i.u(2);if(2!=i.g){if(0<(e.g&&e.g.keyIds||new Set([])).size&&function(e){for(var t=c(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.Z.get(n.value))return!1;return!0}(e))return i.return(e.l);e.l=new ro,e.l.catch(function(){})}for(t=(e.g?e.g.initData:[])||[],n=c(t),r=n.next();!r.done;r=n.next())o=r.value,Ri(e,o.initDataType,o.initData);return Fi(e)&&e.l.resolve(),i.return(e.l)})}function Ri(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData)for(var r=e.i.values(),o=(r=c(r)).next();!o.done;o=r.next())if(ge(n,o.value.initData))return;0<e.i.size&&Fi(e)&&(e.l.resolve(),e.l=new ro,e.l.catch(function(){})),function(e,t,n,r){try{var o=e.s.createSession(r)}catch(i){return void e.o(new Tt(2,6,6005,i.message))}e.B.D(o,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(t):Ni(e,t)}),e.B.D(o,"keystatuseschange",function(t){return Ui(e,t)}),e.i.set(o,{initData:n,initDataType:t,loaded:!1,zf:1/0,kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(i){return t=i,i instanceof Tt||(t=new Tt(2,6,6016,i)),void e.o(t)}e.h.logLicenseExchange&&gn(n),o.generateRequest(t,n).catch(function(t){if(!e.j.g){e.i.delete(o);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.o(new Tt(2,6,6006,t.message,t,r))}})}(e,t,n,e.g.sessionType)}}function _i(e){return e=Ro(e=e.i.keys(),function(e){return e.sessionId}),Array.from(e)}function Li(e,t,n){var r,o,i,a,s,u,l,f,p,d,h,m,g,v,y;return O(function(b){switch(b.g){case 1:if(r=new Map,n.length){o=function(e,t,n){for(var r=c(t),o=r.next();!o.done;o=r.next())for(var i=(o=c(ji(o.value))).next();!i.done;i=o.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i);if(1==n.size&&n.has(""))throw new Tt(2,6,6e3);for(e=c(e.h.preferredKeySystems),o=e.next(),r={};!o.done;r={Rg:void 0},o=e.next())for(r.Rg=o.value,o=c(t),i=o.next();!i.done;i=o.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Rg}}(r)))return i.keySystemAccess;for(e=c([!0,!1]),r=e.next();!r.done;r=e.next())for(r=r.value,o=c(t),i=o.next();!i.done;i=o.next())for(var a=(i=c(i.value.decodingInfos)).next();!a.done;a=i.next())if((a=a.value).supported&&a.keySystemAccess)for(var s=n.get(a.keySystemAccess.keySystem),u=(s=c(s)).next();!u.done;u=s.next())if(!!u.value.licenseServerUri==r)return a.keySystemAccess;return null}(e,n,r),b.u(2);break}return S(b,function(e,t){var n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y;return O(function(b){switch(b.g){case 1:if(1==t.size&&t.has(""))throw new Tt(2,6,6e3);for(r=c(t.values()),o=r.next();!o.done;o=r.next())0==(i=o.value).audioCapabilities.length&&delete i.audioCapabilities,0==i.videoCapabilities.length&&delete i.videoCapabilities;a=c(e.h.preferredKeySystems),s=a.next();case 2:if(s.done){b.u(4);break}if(u=s.value,!t.has(u)){b.u(3);break}return l=t.get(u),C(b,6),S(b,navigator.requestMediaKeySystemAccess(u,[l]),8);case 8:return n=b.h,b.return(n);case 6:I(b);case 7:Mo(e.j);case 3:s=a.next(),b.u(2);break;case 4:f=c([!0,!1]),p=f.next();case 9:if(p.done){b.u(11);break}d=p.value,h=c(t.keys()),m=h.next();case 12:if(m.done){p=f.next(),b.u(9);break}if(g=m.value,v=t.get(g),y=v.drmInfos.some(function(e){return!!e.licenseServerUri}),y!=d){b.u(13);break}return C(b,15),S(b,navigator.requestMediaKeySystemAccess(g,[v]),17);case 17:return n=b.h,b.return(n);case 15:I(b);case 16:Mo(e.j);case 13:m=h.next(),b.u(12);break;case 11:return b.return(n)}})}(e,t),3);case 3:o=b.h;case 2:if(!(i=o))throw new Tt(2,6,6001);for(Mo(e.j),C(b,4),e.H.clear(),a=i.getConfiguration(),s=a.audioCapabilities||[],u=a.videoCapabilities||[],l=c(s),f=l.next();!f.done;f=l.next())p=f.value,e.H.add(p.contentType.toLowerCase());for(d=c(u),h=d.next();!h.done;h=d.next())m=h.value,e.H.add(m.contentType.toLowerCase());if(n.length){var x=i.keySystem,w=r.get(i.keySystem),T=[],k=[],A=[],M=[],R=[],_=new Set,L=new Set;zi(w,T,k,M,A,R,_,L);var D=e.R?"persistent-license":"temporary";for(x={keySystem:x,encryptionScheme:T[0],licenseServerUri:k[0],distinctiveIdentifierRequired:w[0].distinctiveIdentifierRequired,persistentStateRequired:w[0].persistentStateRequired,sessionType:w[0].sessionType||D,audioRobustness:w[0].audioRobustness||"",videoRobustness:w[0].videoRobustness||"",serverCertificate:M[0],serverCertificateUri:A[0],initData:R,keyIds:_},0<L.size&&(x.keySystemUris=L),L=(w=c(w)).next();!L.done;L=w.next())(L=L.value).distinctiveIdentifierRequired&&(x.distinctiveIdentifierRequired=L.distinctiveIdentifierRequired),L.persistentStateRequired&&(x.persistentStateRequired=L.persistentStateRequired);w=x}else w=i.keySystem,L=t.get(i.keySystem),x=[],T=[],k=[],A=[],M=[],R=new Set,zi(L.drmInfos,x,T,A,k,M,R),w={keySystem:w,encryptionScheme:x[0],licenseServerUri:T[0],distinctiveIdentifierRequired:"required"==L.distinctiveIdentifier,persistentStateRequired:"required"==L.persistentState,sessionType:L.sessionTypes[0]||"temporary",audioRobustness:(L.audioCapabilities?L.audioCapabilities[0].robustness:"")||"",videoRobustness:(L.videoCapabilities?L.videoCapabilities[0].robustness:"")||"",serverCertificate:A[0],serverCertificateUri:k[0],initData:M,keyIds:R};if(e.g=w,!e.g.licenseServerUri)throw new Tt(2,6,6012,e.g.keySystem);return S(b,i.createMediaKeys(),6);case 6:if(g=b.h,Mo(e.j),e.s=g,""==e.h.minHdcpVersion||!("getStatusForPolicy"in e.s)){b.u(7);break}return C(b,8),S(b,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if("usable"!=b.h)throw new Tt(2,6,6018);Mo(e.j),E(b,7,4);break;case 8:if((v=I(b,4))instanceof Tt)throw v;throw new Tt(2,6,6019,v.message);case 7:return e.da=!0,S(b,function(e){var t,n;return O(function(r){switch(r.g){case 1:if(!e.s||!e.g)return r.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){r.u(2);break}return t=xo([e.g.serverCertificateUri],e.h.retryParameters),C(r,3),S(r,e.C.Lb.request(5,t).promise,5);case 5:n=r.h,e.g.serverCertificate=be(n.data),E(r,4);break;case 3:throw new Tt(2,6,6017,I(r));case 4:if(e.j.g)return r.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(C(r,6),S(r,e.s.setServerCertificate(e.g.serverCertificate),8)):r.return();case 8:E(r,0);break;case 6:throw new Tt(2,6,6004,I(r).message)}})}(e),11);case 11:Mo(e.j),E(b,0);break;case 4:if(y=I(b),Mo(e.j,y),e.g=null,e.H.clear(),y instanceof Tt)throw y;throw new Tt(2,6,6002,y.message)}})}function Di(e){Fi(e)&&e.l.resolve()}function Pi(e,t){new _t(function(){t.loaded=!0,Di(e)}).Y(Hi)}function Oi(e,t,n){var r,o,i,a,s,u,l;return O(function(c){switch(c.g){case 1:try{r=e.s.createSession("persistent-license")}catch(T){return o=new Tt(2,6,6005,T.message),e.o(o),c.return(Promise.reject(o))}return e.B.D(r,"message",function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(t):Ni(e,t)}),e.B.D(r,"keystatuseschange",function(t){return Ui(e,t)}),i={initData:n.initData,initDataType:n.initDataType,loaded:!1,zf:1/0,kb:null,type:"persistent-license"},e.i.set(r,i),C(c,2),S(c,r.load(t),4);case 4:return a=c.h,Mo(e.j),a||(e.i.delete(r),s=e.h.persistentSessionOnlinePlayback?1:2,e.o(new Tt(s,6,6013)),i.loaded=!0),Pi(e,i),Di(e),c.return(r);case 2:u=I(c),Mo(e.j,u),e.i.delete(r),l=e.h.persistentSessionOnlinePlayback?1:2,e.o(new Tt(l,6,6005,u.message)),i.loaded=!0,Di(e);case 3:return c.return(Promise.resolve())}})}function Ni(e,t){var n,r,o,i,a,s,u,l,f,p,d,h,m;O(function(g){switch(g.g){case 1:if(n=t.target,e.h.logLicenseExchange&&gn(t.message),r=e.i.get(n),o=e.g.licenseServerUri,i=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&i&&i.individualizationServer&&(o=i.individualizationServer),(a=xo([o],e.h.retryParameters)).body=t.message,a.method="POST",a.licenseRequestType=t.messageType,a.sessionId=n.sessionId,a.drmInfo=e.g,r&&(a.initData=r.initData,a.initDataType=r.initDataType),i&&i.headers)for(s in i.headers)a.headers[s]=i.headers[s];if(Et(e.g.keySystem)){var v=sn(a.body,!0,!0);if(v.includes("PlayReadyKeyMessage")){for(var y=ri(v=Yo(v,"PlayReadyKeyMessage"),"HttpHeader"),b=(y=c(y)).next();!b.done;b=y.next()){var x=b.value;b=ri(x,"name")[0],x=ri(x,"value")[0],a.headers[ti(b)]=ti(x)}v=ri(v,"Challenge")[0],a.body=vn(ti(v))}else a.headers["Content-Type"]="text/xml; charset=utf-8"}return u=Date.now(),C(g,2),S(g,e.C.Lb.request(2,a).promise,4);case 4:l=g.h,E(g,3);break;case 2:return f=I(g),e.j.g||(p=new Tt(2,6,6007,f),1==e.i.size?(e.o(p),r&&r.kb&&r.kb.reject(p)):(r&&r.kb&&r.kb.reject(p),e.i.delete(n),Fi(e)&&(e.l.resolve(),e.L.Y(.1)))),g.return();case 3:return e.j.g?g.return():(e.I+=(Date.now()-u)/1e3,e.h.logLicenseExchange&&gn(l.data),C(g,5),S(g,n.update(l.data),7));case 7:E(g,6);break;case 5:return d=I(g),h=new Tt(2,6,6008,d.message),e.o(h),r&&r.kb&&r.kb.reject(h),g.return();case 6:if(e.j.g)return g.return();m=new co("drmsessionupdate"),e.C.onEvent(m),r&&(r.kb&&r.kb.resolve(),Pi(e,r)),k(g)}})}function Ui(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(t,o){if("string"==typeof o){var i=o;o=t,t=i}if(Et(e.g.keySystem)&&16==o.byteLength&&(Pt()||qt())){var a=(i=we(o)).getUint32(0,!0),s=i.getUint16(4,!0),u=i.getUint16(6,!0);i.setUint32(0,a,!1),i.setUint16(4,s,!1),i.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),o=bn(o).slice(0,32),e.Z.set(o,t)});var o=t.expiration-Date.now();(0>o||r&&1e3>o)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Fi(e)&&(e.l.resolve(),e.L.Y(qi))}function Bi(e){var t;return O(function(n){return t=Array.from(e.i.entries()),e.i.clear(),S(n,Promise.all(t.map(function(t){var n=(t=c(t)).next().value,r=t.next().value;return O(function(t){return 1==t.g?(C(t,2),e.fa||e.A.has(n.sessionId)||"persistent-license"!==r.type||e.h.persistentSessionOnlinePlayback?S(t,function(e){var t;return O(function(n){return 1==n.g?(t=new Promise(function(e,t){new _t(t).Y(Vi)}),C(n,2),S(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?E(n,0):(I(n),void k(n))})}(n),5):S(t,n.remove(),5)):2!=t.g?E(t,0):(I(t),void k(t))})})),0)})}function ji(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Fi(e){return function(e,t){for(var n=(e=c(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),function(e){return e.loaded})}function zi(t,n,r,o,i,a,s,u){for(var l=[],p=(t=c(t)).next(),d={};!p.done;d={ra:void 0},p=t.next()){if(d.ra=p.value,n.includes(d.ra.encryptionScheme)||n.push(d.ra.encryptionScheme),"org.w3.clearkey"==d.ra.keySystem&&d.ra.licenseServerUri.startsWith("data:application/json;base64,")?l.includes(d.ra.licenseServerUri)||l.push(d.ra.licenseServerUri):r.includes(d.ra.licenseServerUri)||r.push(d.ra.licenseServerUri),i.includes(d.ra.serverCertificateUri)||i.push(d.ra.serverCertificateUri),d.ra.serverCertificate&&(o.some(function(e){return function(t){return ge(t,e.ra.serverCertificate)}}(d))||o.push(d.ra.serverCertificate)),d.ra.initData)for(var h=(p=c(d.ra.initData)).next(),m={};!h.done;m={mf:void 0},h=p.next())m.mf=h.value,a.some(function(e){return function(t){var n=e.mf;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&ge(t.initData,n.initData)}}(m))||a.push(m.mf);if(d.ra.keyIds)for(h=(p=c(d.ra.keyIds)).next();!h.done;h=p.next())s.add(h.value);if(d.ra.keySystemUris&&u)for(p=(d=c(d.ra.keySystemUris)).next();!p.done;p=d.next())u.add(p.value)}if(1==l.length)r.push(l[0]);else if(0<l.length){for(n=[],o=(l=c(l)).next();!o.done;o=l.next())o=e.atob(o.value.split("data:application/json;base64,").pop()),o=JSON.parse(o),n.push.apply(n,f(o.keys));l=JSON.stringify({keys:n}),r.push("data:application/json;base64,"+e.btoa(l))}}function Gi(t,n,r,o){var i=t.keySystem;!i||"org.w3.clearkey"==i&&t.licenseServerUri||(n.size&&(n=n.get(i)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(i))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),o[i]&&(t.keySystem=o[i]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==i&&(t.keySystem="com.chromecast.playready"))}(o=Ci.prototype).destroy=function(){return this.j.destroy()},o.configure=function(e){this.h=e,this.K&&this.K.Sa(this.h.updateExpirationTime)},o.Rb=function(e){var t=this;return O(function(n){if(1==n.g)return t.s?(t.m=e,t.B.ha(t.m,"play",function(){for(var e=c(t.N),n=e.next();!n.done;n=e.next())Ni(t,n.value);t.U=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Bi(t)}),t.F=t.g&&t.g.initData.find(function(e){return 0<e.initData.length})||null,t.F||"com.apple.fps"!==t.g.keySystem||t.A.size?S(n,Ii(t),2):n.u(2)):(t.B.ha(e,"encrypted",function(){t.o(new Tt(2,6,6010))}),n.return());Mi(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(e){return function(e,t){return O(function(n){if(1==n.g)return S(n,Ii(e),2);Ri(e,t.initDataType,be(t.initData)),k(n)})}(t,e)}),k(n)})},o.ff=function(){var e=this,t=this.i.keys();return t=Ro(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},o.ad=function(){for(var e=1/0,t=this.i.keys(),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},o.Ld=function(){return Lo(this.ea)};var Vi=1,Hi=5,qi=.5;
/*
      		 @license
      		 Shaka Player
      		 Copyright 2023 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/function Xi(e,t,n){this.h=e,this.i=t,this.g=n}function Wi(e,t){return O(function(n){if(1==n.g)return S(n,mr(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||pr(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(_r))throw new Tt(2,4,4032);return n.return(Ki(e,t))})}function Ki(e,t){var n=hr(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var o=c(t.variants),i=o.next();!i.done;i=o.next())i=i.value,$i(e,r.keySystem,i.video),$i(e,r.keySystem,i.audio);Yi(e,t)}return n}function $i(e,t,n){if(n)for(var r=(n=c(n.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==t)for(var o=(r=c(r.initData||[])).next();!o.done;o=r.next())o=o.value,Ri(e.g,o.initDataType,o.initData)}function Yi(e,t){e=e.g?e.g.Ld():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var r=!1,o=!1,i=new Set,a=new Set,s=(t=c(t.variants)).next();!s.done;s=t.next()){var u=[];(s=s.value).audio&&u.push(s.audio),s.video&&u.push(s.video);for(var l=(u=c(u)).next();!l.done;l=u.next())if((l=l.value).keyIds.size)for(var f=(l=c(l.keyIds)).next();!f.done;f=l.next()){f=f.value;var p=e[n?"00":f];p?Qi.includes(p)&&a.add(p):i.add(f)}s.allowedByApplication?s.allowedByKeySystem&&(r=!0):o=!0}if(!r)throw new Tt(2,4,4012,e={hasAppRestrictions:o,missingKeys:Array.from(i),restrictedKeyStatuses:Array.from(a)})}var Qi=["output-restricted","internal-error"];function Ji(){}function Zi(e,t){if(t){var n=ea[t.toLowerCase()];if(n)return n}throw new Tt(2,4,4e3,e,t)}V("shaka.media.ManifestParser",Ji),Ji.unregisterParserByMime=function(e){delete ea[e]},Ji.registerParserByMime=function(e,t){ea[e]=t},Ji.registerParserByExtension=function(){le("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Ji.AccessibilityPurpose={ak:"visually impaired",vj:"hard of hearing"};var ea={};function ta(e,t,n,r,o){var i=ra.value(),a=e.subarray(n.start,n.start+n.size),s=we(a),u=new Uint8Array(n.size+i.byteLength);for(u.set(a,0),(a=we(u)).setUint32(4,o),u.set(i,n.size),o=s.getUint32(4),a.setUint32(n.size+16,o),na(u,0,u.byteLength),o=new Uint8Array(e.byteLength+u.byteLength),n=Ot()||Pt()?n.start:n.start+n.size,i=e.subarray(n),o.set(e.subarray(0,n)),o.set(u,n),o.set(i,n+u.byteLength),r=(e=c(r)).next();!r.done;r=e.next())na(o,(r=r.value).start,r.size+u.byteLength);return u=we(o,t.start),t=Ho(t),e=u.getUint32(t),u.setUint32(t,e+1),o}function na(e,t,n){0!=(t=(e=we(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var ra=new kt(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function oa(e,t,n,r,o,i,a){this.M=e,this.Ha=t,this.sa=n,this.Hc=void 0===r?null:r,this.timescale=void 0===o?null:o,this.g=void 0===i?null:i,this.aesKey=void 0===a?null:a,this.mimeType=this.codecs=null}function ia(e,t){return e===t||(e&&t?e.Xb()==t.Xb()&&e.Ub()==t.Ub()&&De(e.M().sort(),t.M().sort())&&ge(e.cd(),t.cd()):e==t)}function aa(e,t,n,r,o,i,a,s,u,l,f,p,d,h,m,g){for(l=void 0===l?[]:l,h=void 0===h?la:h,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=r,this.sa=o,this.$=i,this.timestampOffset=a,this.appendWindowStart=s,this.appendWindowEnd=u,this.g=l,this.tilesLayout=void 0===f?"":f,this.B=void 0===p?null:p,this.h=void 0===d?null:d,this.status=h,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=void 0===m?null:m,this.A=null,this.i=0,this.o=void 0!==g&&g,this.G=this.s=!1,t=(e=c(this.g)).next();!t.done;t=e.next())t.value.Kg();this.o&&this.g.length&&this.g[this.g.length-1].Jg(),this.C=this.mimeType=this.codecs=null}function ua(e,t){e.$=t;for(var n=(e=c(e.g)).next();!n.done;n=e.next())ua(n.value,t)}oa.prototype.Xb=function(){return this.Ha},oa.prototype.Ub=function(){return this.sa},oa.prototype.cd=function(){return this.g},V("shaka.media.InitSegmentReference",oa),oa.prototype.getEndByte=oa.prototype.Ub,oa.prototype.getStartByte=oa.prototype.Xb,(o=aa.prototype).M=function(){return this.F()},o.getStartTime=function(){return this.startTime},o.Mh=function(){return this.endTime},o.Xb=function(){return this.Ha},o.Ub=function(){return this.sa},o.di=function(){return this.tilesLayout},o.ci=function(){return this.B},o.Yb=function(){return this.status},o.xi=function(){this.status=ca},o.wf=function(){this.preload=!0},o.ri=function(){return this.preload},o.Xd=function(){this.l=!1},o.ni=function(){return this.l},o.Kg=function(){this.s=!0},o.pi=function(){return this.s},o.Jg=function(){this.G=!0},o.oi=function(){return this.G},o.Ig=function(){this.m=!0},o.ji=function(){return this.m},o.fh=function(e){this.A=e},o.bi=function(){return this.A},o.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=c(this.g),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},o.Vf=function(e){null==this.h?Y("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},o.Zi=function(e){this.C=e},o.cd=function(){return this.C},V("shaka.media.SegmentReference",aa),aa.prototype.getSegmentData=aa.prototype.cd,aa.prototype.setSegmentData=aa.prototype.Zi,aa.prototype.syncAgainst=aa.prototype.Vf,aa.prototype.offset=aa.prototype.offset,aa.prototype.getThumbnailSprite=aa.prototype.bi,aa.prototype.setThumbnailSprite=aa.prototype.fh,aa.prototype.hasByterangeOptimization=aa.prototype.ji,aa.prototype.markAsByterangeOptimization=aa.prototype.Ig,aa.prototype.isLastPartial=aa.prototype.oi,aa.prototype.markAsLastPartial=aa.prototype.Jg,aa.prototype.isPartial=aa.prototype.pi,aa.prototype.markAsPartial=aa.prototype.Kg,aa.prototype.isIndependent=aa.prototype.ni,aa.prototype.markAsNonIndependent=aa.prototype.Xd,aa.prototype.isPreload=aa.prototype.ri,aa.prototype.markAsPreload=aa.prototype.wf,aa.prototype.markAsUnavailable=aa.prototype.xi,aa.prototype.getStatus=aa.prototype.Yb,aa.prototype.getTileDuration=aa.prototype.ci,aa.prototype.getTilesLayout=aa.prototype.di,aa.prototype.getEndByte=aa.prototype.Ub,aa.prototype.getStartByte=aa.prototype.Xb,aa.prototype.getEndTime=aa.prototype.Mh,aa.prototype.getStartTime=aa.prototype.getStartTime,aa.prototype.getUris=aa.prototype.M;var la=0,ca=1;function fa(e){return 1==e.length&&1e-4>e.end(0)-e.start(0)}function pa(e){return!e||fa(e)?null:e.length?e.end(e.length-1):null}function da(e,t){return!(!e||!e.length||fa(e)||t>e.end(e.length-1))&&t>=e.start(0)}function ha(e,t){if(!e||!e.length||fa(e))return 0;for(var n=0,r=(e=c(ma(e))).next();!r.done;r=e.next()){var o=r.value;r=o.start,(o=o.end)>t&&(n+=o-Math.max(r,t))}return n}function ma(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function ga(){}function va(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function ya(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function ba(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function xa(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=an(be(e.data,1,n)),o=e.data[2+n],i=e.data.subarray(3+n).indexOf(0);if(-1===i)return null;var a,s=an(be(e.data,3+n,i));return a="--\x3e"===r?an(be(e.data,4+n+i)):ye(e.data.subarray(4+n+i)),t.mimeType=r,t.pictureType=o,t.description=s,t.data=a,t}return"TXXX"===e.type||"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(r=e.data.subarray(1).indexOf(0))?null:(n=an(be(e.data,1,r)),e=an(be(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(n=e.data.indexOf(0))?null:(n=an(be(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=ye(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=an(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=an(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=ye(e.data),t):null}function wa(e){for(var t=0,n=[];va(e,t);){var r=ba(e,t+6);for(e[t+5]>>6&1&&(t+=10),r=(t+=10)+r;t+10<r;){var o=e.subarray(t),i=ba(o,4);(i=xa(o={type:String.fromCharCode(o[0],o[1],o[2],o[3]),size:i,data:o.subarray(10,10+i)}))&&n.push(i),t+=o.size+10}ya(e,t)&&(t+=10)}return n}function Sa(e,t){for(var n=t=void 0===t?0:t,r=0;va(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=ba(e,t+6),ya(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}function Ta(e,t){var n=null,r=null,o=null,i=e.P();return 1&t&&(o=e.Nc()),2&t&&e.skip(4),8&t&&(n=e.P()),16&t&&(r=e.P()),{trackId:i,Yc:n,Id:r,ck:o}}function ka(e,t){return 1==t?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function Ca(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function Aa(e,t,n){var r=e.P(),o=[],i=null;1&n&&(i=e.P()),4&n&&e.skip(4);for(var a=0;a<r;a++){var s={Jf:null,sampleSize:null,ne:null};256&n&&(s.Jf=e.P()),512&n&&(s.sampleSize=e.P()),1024&n&&e.skip(4),2048&n&&(s.ne=0==t?e.P():e.Sg()),o.push(s)}return{gk:r,Wg:o,Fh:i}}function Ea(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),{channelCount:t,sampleRate:e=e.la()+e.la()/65536}}function Ia(e){return{codec:Vo(e=e.P())}}function Ma(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Ra(e){return(10>e?"0":"")+e}function _a(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&3==e[r]&&0==e[r-1]&&0==e[r-2]||(t[n]=e[r],n++);this.j=be(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function La(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);0!==r&&(n.set(e.j.subarray(t,t+r)),e.h=new Do(n,0).P(),e.g=8*r,e.i-=r)}function Da(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,La(e)}e.h<<=t,e.g-=t}function Pa(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&La(e),0<(n=t-n)?r<<n|Pa(e,n):r}function Oa(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return La(e),t+Oa(e)}function Na(e){Da(e,1+Oa(e))}function Ua(e){return Pa(e,Oa(e)+1)-1}function Ba(e){return 1&(e=Ua(e))?1+e>>>1:-1*(e>>>1)}function ja(e){return 1===Pa(e,1)}function Fa(e){return Pa(e,8)}function za(e,t){for(var n=8,r=8,o=0;o<t;o++)0!==r&&(r=(n+(r=Ba(e))+256)%256),n=0===r?n:r}function Ga(e){return Fa(e),Ua(e),Ua(e)}function Va(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}function Ha(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(192&r){var o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.s&&(e.s=o),n.pts=qa(o,e.s),e.s=n.pts,n.dts=n.pts,64&r&&(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.o&&(e.o=r),n.dts=qa(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function qa(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Xa(e){return!(0>Wa(e))}function Wa(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}aa.Status={hj:la,Zj:ca,Bj:2},V("shaka.util.Id3Utils",ga),ga.getID3Data=Sa,ga.getID3Frames=wa,V("shaka.util.ExpGolomb",_a),(o=Va.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},o.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Wa(e)),n=e.length-(e.length+t)%188,r=!1,o=t;o<n;o+=188)if(71==e[o]){var i=!!(64&e[o+1]),a=((31&e[o+1])<<8)+e[o+2];if(1<(48&e[o+3])>>4){var s=o+5+e[o+4];if(s==o+188)continue}else s=o+4;switch(a){case 0:i&&(s+=e[s]+1),this.G=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.G:i&&(s+=e[s]+1),a={audio:-1,video:-1,Rd:-1,audioCodec:"",videoCodec:""};var u=s+3+((15&(i=e)[s+1])<<8|i[s+2])-4;for(s+=12+((15&i[s+10])<<8|i[s+11]);s<u;){var l=(31&i[s+1])<<8|i[s+2],c=(15&i[s+3])<<8|i[s+4];switch(i[s]){case 6:if(0<c)for(var f=s+5,p=c;2<p;){var d=i[f+1]+2;switch(i[f]){case 5:var h=fn(i.subarray(f+2,f+d));-1==a.audio&&"Opus"===h?(a.audio=l,a.audioCodec="opus"):-1==a.video&&"AV01"===h&&(a.video=l,a.videoCodec="av1");break;case 106:-1==a.audio&&(a.audio=l,a.audioCodec="ac3");break;case 122:-1==a.audio&&(a.audio=l,a.audioCodec="ec3");break;case 124:-1==a.audio&&(a.audio=l,a.audioCodec="aac");break;case 127:"opus"==a.audioCodec&&(h=null,128===i[f+2]&&(h=i[f+3]),null!=h&&(this.F={channelCount:15&h?15&h:2,Ch:h,sampleRate:48e3}))}f+=d,p-=d}break;case 15:-1==a.audio&&(a.audio=l,a.audioCodec="aac");break;case 17:-1==a.audio&&(a.audio=l,a.audioCodec="aac-loas");break;case 21:-1==a.Rd&&(a.Rd=l);break;case 27:-1==a.video&&(a.video=l,a.videoCodec="avc");break;case 3:case 4:-1==a.audio&&(a.audio=l,a.audioCodec="mp3");break;case 36:-1==a.video&&(a.video=l,a.videoCodec="hvc");break;case 129:-1==a.audio&&(a.audio=l,a.audioCodec="ac3");break;case 132:case 135:-1==a.audio&&(a.audio=l,a.audioCodec="ec3")}s+=c+5}-1!=(i=a).video&&(this.I=i.video,this.m=i.videoCodec),-1!=i.audio&&(this.B=i.audio,this.A=i.audioCodec),-1!=i.Rd&&(this.C=i.Rd),r&&!this.H&&(r=!1,o=t-188),this.H=!0;break;case this.I:s=e.subarray(s,o+188),i?this.j.push([s]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(s);break;case this.B:s=e.subarray(s,o+188),i?this.i.push([s]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(s);break;case this.C:s=e.subarray(s,o+188),i?this.l.push([s]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(s);break;default:r=!0}}return this},o.Ci=function(e){return le("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Cf(e)},o.Cf=function(e,t,n){var r=e.pts?e.pts/9e4:null,o=(e=e.data).byteLength,i=1;"hvc"==this.m&&(i=2);for(var a,s=n||0,u=[],l=-1,c=0,f=0;f<o;++f){var p=e[f];if(p){if(2<=s&&1==p){if(t&&!u.length&&-1==l&&(p=f-(3<s?3:s),n&&0!=p&&(p=e.subarray(0,p),t.data=xn(t.data,p),t.fullData=xn(t.fullData,p))),0<=l?(s=f-((3<s?3:s)+1),u.push({data:e.subarray(l+i,s+1),fullData:e.subarray(l,s+1),type:c,time:r})):t&&!u.length&&0<(l=f-s)&&(l=e.subarray(0,l),t.data=xn(t.data,l),t.fullData=xn(t.fullData,l)),f>=o-i)return u;l=++f,c="hvc"==this.m?e[f]>>1&63:31&e[f]}s=0}else s++;f>=o-1&&0<=l&&0<=s&&(a={data:e.subarray(l+i,o),fullData:e.subarray(l,o),type:c,time:r})}return a&&u.push(a),!u.length&&t&&(t.data=xn(t.data,e),t.fullData=xn(t.fullData,e)),u},o.getMetadata=function(){for(var e=[],t=c(this.l),n=t.next();!n.done;n=t.next())(n=Ha(this,n=xn.apply(hn,f(n.value))))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:wa(n.data),dts:n.dts,pts:n.pts});return e},o.Tb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=c(this.i),n=t.next();!n.done;n=t.next()){var r=xn.apply(hn,f(n.value)),o=Ha(this,r);n=this.h.length?this.h[this.h.length-1]:null,o&&null!=o.pts&&null!=o.dts&&(!n||n.pts!=o.pts&&n.dts!=o.dts)?(this.h.length&&o.dts<(n.dts||0)&&(e=!0),this.h.push(o)):this.h.length&&(r=o?o.data:r)&&((n=this.h.pop()).data=xn(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(e,t){var n=(e.pts||0)-(t.pts||0);return(e.dts||0)-(t.dts||0)||n}))}return this.h},o.Fc=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=!1,n=c(this.j),r=n.next();!r.done;r=n.next()){var o=xn.apply(hn,f(r.value)),i=Ha(this,o);r=this.g.length?this.g[this.g.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!r||r.pts!=i.pts&&r.dts!=i.dts)?(this.g.length&&i.dts<(r.dts||0)&&(t=!0),this.g.push(i)):this.g.length&&(o=i?i.data:o)&&((r=this.g.pop()).data=xn(r.data,o),this.g.push(r))}if(e){for(n=[],o=(r=c(this.g)).next();!o.done;o=r.next())if((o=o.value).nalus=this.Cf(o,a,void 0),o.nalus.length){n.push(o);var a=o.nalus[o.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(e,t){var n=(e.pts||0)-(t.pts||0);return(e.dts||0)-(t.dts||0)||n}))}return e?this.g:(e=this.g,this.g=[],e)},o.getStartTime=function(e){if("audio"==e){e=null;var t=this.Tb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,(t=this.Fc(!1)).length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},o.$c=function(){return{audio:this.A,video:this.m}},o.Pd=function(){for(var e=[],t=c(this.Fc()),n=t.next();!n.done;n=t.next())e.push.apply(e,f(n.value.nalus));return e},o.gi=function(){le("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},o.kf=function(){return"hvc"==this.m?function(e){var t={height:null,width:null,codec:null};if(!(e=e.Pd()).length)return t;if(!(e=e.find(function(e){return 33==e.type})))return t;var n=new _a(e.fullData,!0);Fa(n),Fa(n),Pa(n,4);var r=Pa(n,3);ja(n);var o=Pa(n,2),i=Pa(n,1),a=Pa(n,5),s=Pa(n,32);e=Fa(n);for(var u=Fa(n),l=Fa(n),c=Fa(n),f=Fa(n),p=Fa(n),d=Fa(n),h=[],m=[],g=0;g<r;g++)h.push(ja(n)),m.push(ja(n));if(0<r)for(g=r;8>g;g++)Pa(n,2);for(g=0;g<r;g++)h[g]&&Pa(n,88),m[g]&&Fa(n);Ua(n),3==(r=Ua(n))&&Pa(n,1),h=Ua(n),m=Ua(n);var v=g=0,y=0,b=0;return ja(n)&&(g+=Ua(n),v+=Ua(n),y+=Ua(n),b+=Ua(n)),t.width=String(h-(g+v)*(1===r||2===r?2:1)),t.height=String(m-(y+b)*(1===r?2:1)),n=function(e){for(var t=0,n=0;32>n;n++)t|=(e>>n&1)<<31-n;return t>>>0}(s),i=1==i?"H":"L",o="hvc1."+["","A","B","C"][o]+a,o+="."+n.toString(16).toUpperCase(),o+="."+i+d,p&&(o+="."+p.toString(16).toUpperCase()),f&&(o+="."+f.toString(16).toUpperCase()),c&&(o+="."+c.toString(16).toUpperCase()),l&&(o+="."+l.toString(16).toUpperCase()),u&&(o+="."+u.toString(16).toUpperCase()),e&&(o+="."+e.toString(16).toUpperCase()),t.codec=o,t}(this):function(e){var t={height:null,width:null,codec:null};if(!(e=e.Pd()).length)return t;if(!(e=e.find(function(e){return 7==e.type})))return t;var n=Fa(e=new _a(e.data)),r=Fa(e),o=Fa(e);if(Na(e),Ka.includes(n)){var i=Ua(e);if(3===i&&Da(e,1),Na(e),Na(e),Da(e,1),ja(e)){i=3!==i?8:12;for(var a=0;a<i;a++)ja(e)&&za(e,6>a?16:64)}}if(Na(e),0===(i=Ua(e)))Ua(e);else if(1===i)for(Da(e,1),Na(e),Na(e),i=Ua(e),a=0;a<i;a++)Na(e);Na(e),Da(e,1),i=Ua(e),a=Ua(e);var s=Pa(e,1);0===s&&Da(e,1),Da(e,1);var u=0,l=0,c=0,f=0;return ja(e)&&(u=Ua(e),l=Ua(e),c=Ua(e),f=Ua(e)),t.height=String((2-s)*(a+1)*16-2*c-2*f),t.width=String(16*(i+1)-2*u-2*l),t.codec="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2),t}(this)},V("shaka.util.TsParser",Va),Va.syncOffset=Wa,Va.probe=Xa,Va.prototype.getVideoInfo=Va.prototype.kf,Va.prototype.getVideoResolution=Va.prototype.gi,Va.prototype.getVideoNalus=Va.prototype.Pd,Va.prototype.getCodecs=Va.prototype.$c,Va.prototype.getStartTime=Va.prototype.getStartTime,Va.prototype.getVideoData=Va.prototype.Fc,Va.prototype.getAudioData=Va.prototype.Tb,Va.prototype.getMetadata=Va.prototype.getMetadata,Va.prototype.parseNalus=Va.prototype.Cf,Va.prototype.parseAvcNalus=Va.prototype.Ci,Va.prototype.parse=Va.prototype.parse,Va.prototype.clearData=Va.prototype.clearData,Va.Timescale=9e4;var Ka=[100,110,122,244,44,83,86,118,128,138,139,134];function $a(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if("undefined"==typeof libDPIModule&&Q("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){Q("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,le("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?(Q("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Q(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Ya(e){e.g&&e.i.classList.add("shaka-hidden")}function Qa(e,t,n){var r=0,o=-1;switch(t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(n){case"DASH":o=1;break;case"HLS":o=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(o))}function Ja(e,t,n,r){var o=this;this.i=e,this.da=n,this.A=null,this.F=t,this.h={},this.G={},this.Da={},this.g=null,this.fa=!1,this.Z=r||null,this.l={},this.s=new ne,this.j={},this.H=null,this.L=new ro,this.N="",this.qa=!1,this.m=Za(this,this.L),this.C=!1,this.I=new Io(function(){return function(e){var t,n,r,o,i,a,s;return O(function(u){if(1==u.g){for(n in t=[],e.l)for(r=e.l[n],o=r[0],e.l[n]=r.slice(0,1),o&&t.push(o.p.catch(Qn)),i=c(r.slice(1)),a=i.next();!a.done;a=i.next())a.value.p.reject(new Tt(2,7,7003,void 0));for(s in e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy()),e.j)t.push(e.j[s].destroy());return S(u,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.F=null,e.h={},e.j={},e.H=null,e.l={},e.Z=null,e.K=null,e.da=null,k(u)})}(o)}),this.B=!1,this.ba="UNKNOWN",this.Ea=this.Fa=!1,this.za=new ro,this.o=!1,this.xa=!0,this.pa=this.R=this.ya=this.U=this.K=this.ea=null,this.oa=new ro}function Za(t,n){if(e.ManagedMediaSource){t.i.disableRemotePlayback=!0;var r=new ManagedMediaSource;return t.s.D(r,"startstreaming",function(){t.xa=!0}),t.s.D(r,"endstreaming",function(){t.xa=!1}),t.s.ha(r,"sourceopen",function(){URL.revokeObjectURL(t.N),n.resolve()}),t.s.ha(t.i,"playing",function(){t.qa=!0}),t.N=ys(r),t.i.src=t.N,r}return r=new MediaSource,t.s.ha(r,"sourceopen",function(){URL.revokeObjectURL(t.N),n.resolve()}),t.s.ha(t.i,"playing",function(){t.qa=!0}),t.N=ys(r),t.i.src=t.N,r}function es(e,t,n,r){var o,i,a,s,u,l,f,p,d,h,m,g;return O(function(v){switch(v.g){case 1:return o=In,i=H,a=q,S(v,function(e,t){var n,r,o,i,a,s,u,l,f,p;return O(function(d){if(1==d.g)return e.createSegmentIndex?S(d,e.createSegmentIndex(),2):d.u(2);if(!e.segmentIndex)return d.return(!1);if(0==e.segmentIndex.getNumReferences())return d.return(!0);for(n=In,r=new Set,o=c(e.segmentIndex),i=o.next();!i.done;i=o.next())if(a=i.value,s=a.mimeType||e.mimeType||"",u=a.codecs||e.codecs||"",l=s+":"+u,!r.has(l))if(r.add(l),t==n.ua){if(!Xn(Ln(s,u)))return d.return(!1)}else if(t==n.ga?u=Tr(u):t==n.X&&(u=Sr(u,s)),f=On(e,s,u),p=Dn(s,u),!ie(f)&&!et(p))return d.return(!1);return d.return(!0)})}(n,t),2);case 2:if(a.call(i,v.h,"Type negotiation should happen before MediaSourceEngine.init!"),s=Ln(n.mimeType,r),t==o.ua){ts(e,s,e.B,n.external),v.u(0);break}if(u=e.A.forceTransmux,(!ie(s)||!e.B&&Hn.includes(s))&&(u=!0),l=Dn(n.mimeType,r),!u){v.u(4);break}if(f=Cn(o.X,(r||"").split(",")),p=Cn(o.ga,(r||"").split(",")),!f||!p){v.u(5);break}return e.o=!0,S(v,es(e,o.X,n,f),6);case 6:return S(v,es(e,o.ga,n,p),7);case 7:return v.return();case 5:(d=et(l))&&(h=d(),e.j[t]=h,s=h.convertCodecs(t,l));case 4:m=s+e.A.addExtraFeaturesToSourceBuffer(s),Mo(e.I);try{g=e.m.addSourceBuffer(m)}catch(sa){throw new Tt(2,3,3015,sa,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(g.mode=bs),e.s.D(g,"error",function(){var n=e.l[t][0];n.p.reject(new Tt(2,3,3014,e.i.error?e.i.error.code:0,n.uri))}),e.s.D(g,"updateend",function(){return ps(e,t)}),e.h[t]=g,e.G[t]=s,e.Da[t]=!!n.drmInfos.length,k(v)}})}function ts(e,t,n,r){e.g||(e.g=new qn(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var o=e.g;r=r||e.fa,e=e.ba,"application/cea-608"==t||"application/cea-708"==t?o.i=null:(o.i=(0,$n[t])(),o.i.setSequenceMode?o.i.setSequenceMode(n):le("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),o.i.setManifestType?o.i.setManifestType(e):le("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),o.B=r)}function ns(e){return!(e.C||e.m&&"ended"!=e.m.readyState)}function rs(e,t){return e=e.C||!Object.keys(e.h).length?null:t==En?e.g.g:!(e=is(e,t))||fa(e)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function os(e,t){return e.C?null:t==En?e.g.h:pa(is(e,t))}function is(e,t){try{return e.h[t].buffered}catch(n){return null}}function as(e,t,n,r,o,i,a,s,u,l){var f,p,d,h,m,g,v,y,b,x,w,T,C;return a=void 0!==a&&a,s=void 0!==s&&s,u=void 0!==u&&u,l=void 0!==l&&l,O(function(A){switch(A.g){case 1:if(t!=(f=In).ua){A.u(2);break}if(!e.B){A.u(3);break}return S(A,e.za,4);case 4:p=A.h,e.g.s=p;case 3:return S(A,function(e,t,n,r,o){var i,a,s,u,l,f,p;return O(function(d){if(1==d.g)return S(d,Promise.resolve(),2);if(!e.i||!e.j)return d.return();if(null==n||null==r)return e.i.parseInit(be(t)),d.return();for(i=e.B?n:e.s,a={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:i},s=e.i.parseMedia(be(t),a,o),u=c(s),l=u.next();!l.done;l=u.next())f=l.value,e.A(f,o||null,a);p=s.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(p),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),k(d)})}(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return A.return();case 2:if(l||!e.o){A.u(6);break}return S(A,as(e,f.X,n,r,o,i,a,s,u,!0),7);case 7:return S(A,as(e,f.ga,n,r,o,i,a,s,u,!0),8);case 8:return A.return();case 6:if(!e.h[t])return A.return();if(d=e.h[t].timestampOffset,h=e.G[t],e.j[t]&&(h=e.j[t].getOriginalMimeType()),r&&(m=function(e,t,n,r,o,i){var a=null,s=be(n);if(Hn.includes(o))(i=wa(s)).length&&r&&((t=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&t.data&&(a=Math.round(t.data)/1e3),e.da.onMetadata([{cueTime:r.startTime,data:s,frames:i,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(o.includes("/mp4")&&r&&0==r.timestampOffset&&r.$&&r.$.timescale){var u=r.$.timescale;if(!isNaN(u)){var l=0,c=!1;(new No).box("moof",Uo).box("traf",Uo).S("tfdt",function(e){l=ka(e.reader,e.version).baseMediaDecodeTime/u,c=!0,e.parser.stop()}).parse(n,!0),c&&(a=l)}}else!o.includes("/mp4")&&!o.includes("/webm")&&Xa(s)&&(e.K?e.K.clearData():e.K=new Va,null!=(t=(s=e.K.parse(s)).getStartTime(t))&&(a=t),(s=s.getMetadata()).length)&&e.da.onMetadata(s,i,r?r.endTime:null);return a}(e,t,n,r,h,d),null!=m&&(null==e.U&&t==f.ga&&(e.U=m,e.ya=r.startTime,null!=e.R&&(g=0,e.ya==e.pa&&(g=e.U-e.R),e.oa.resolve(g))),null==e.R&&t==f.X&&(e.R=m,e.pa=r.startTime,null!=e.U&&(v=0,e.ya==e.pa&&(v=e.U-e.R),e.oa.resolve(v))),y=r.startTime-m,(.001<=Math.abs(d-y)||a||s)&&(!u||0<y||!d)&&(d=y,e.Ea&&(ds(e,t,function(){return cs(e,t)},null),ds(e,t,function(){return fs(e,t,d)},null))),b=t==f.ga||!(f.ga in e.h),e.B&&b&&e.za.resolve(d))),i&&t==f.ga&&(e.g||ts(e,"application/cea-608",e.B,!1),e.H||(x=h.split(";",1)[0],e.H=new ke(x)),r?(w=e.H.i(n)).length&&function(e,t,n,r,o){for(var i=n+" "+r,a=new Map,s=(t=c(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,u=u.cue,a.has(s)||a.set(s,new Map),a.get(s).has(i)||a.get(s).set(i,[]),Kn(e,u,o),u.startTime>=e.l&&u.startTime<e.m&&(a.get(s).get(i).push(u),s==e.C&&e.j.append([u]))}for(i=(o=c(a.keys())).next();!i.done;i=o.next())for(i=i.value,e.o.has(i)||e.o.set(i,new Map),s=(t=c(a.get(i).keys())).next();!s.done;s=t.next())s=s.value,u=a.get(i).get(s),e.o.get(i).set(s,u);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}(e.g,w,r.startTime,r.endTime,d):e.H.init(n,s)),!e.j[t]){A.u(9);break}return S(A,e.j[t].transmux(n,o,r,e.m.duration,t),10);case 10:n=A.h;case 9:if(n=function(e,t,n,r,o){var i=null==n,a=e.Da[r];return n=e.da.Qh(),(i=e.A.insertFakeEncryptionInInit&&i&&a)&&(n=Et(n),i=Nt()||Ot()||Wt()||Pt()&&$t()&&n),i&&"mp4"==Nn(e.G[r])&&(t=function(e,t){function n(){a=!0}function r(e){s.push(e),Uo(e)}var o,i=e=be(e),a=!1,s=[],u=[];if((new No).box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).S("stsd",function(e){o=e,s.push(e),Bo(e)}).S("encv",n).S("enca",n).S("dvav",function(e){u.push({box:e,Oa:1701733238})}).S("dva1",function(e){u.push({box:e,Oa:1701733238})}).S("dvh1",function(e){u.push({box:e,Oa:1701733238})}).S("dvhe",function(e){u.push({box:e,Oa:1701733238})}).S("dvc1",function(e){u.push({box:e,Oa:1701733238})}).S("dvi1",function(e){u.push({box:e,Oa:1701733238})}).S("hev1",function(e){u.push({box:e,Oa:1701733238})}).S("hvc1",function(e){u.push({box:e,Oa:1701733238})}).S("avc1",function(e){u.push({box:e,Oa:1701733238})}).S("avc3",function(e){u.push({box:e,Oa:1701733238})}).S("ac-3",function(e){u.push({box:e,Oa:1701733217})}).S("ec-3",function(e){u.push({box:e,Oa:1701733217})}).S("ac-4",function(e){u.push({box:e,Oa:1701733217})}).S("mp4a",function(e){u.push({box:e,Oa:1701733217})}).parse(e),a)return e;if(0==u.length||!o)throw bn(e),new Tt(2,3,3019,t);u.reverse();for(var l=(t=c(u)).next();!l.done;l=t.next())l=l.value,i=ta(i,o,l.box,s,l.Oa);return Pt()&&$t()?((t=new Uint8Array(e.byteLength+i.byteLength)).set(i),t.set(e,i.byteLength),t):i}(t,o)),t}(e,n,r?r.startTime:null,t,r?r.M()[0]:null),!r||!e.B||t==f.ua){A.u(11);break}if(!a&&!s){A.u(11);break}if(T=r.startTime,"HLS"!=e.ba||e.o||t!=f.X||!e.h[f.ga]){A.u(13);break}return S(A,e.oa,14);case 14:C=A.h,.1<Math.abs(C)&&(T-=C);case 13:ds(e,t,function(){return cs(e,t)},null),ds(e,t,function(){return fs(e,t,T)},null);case 11:return S(A,ds(e,t,function(){var r=n;if("video"==t&&e.Z){var o=e.Z;o.g&&o.g.appendBuffer(r,"video",o.o,-d)}e.h[t].appendBuffer(r)},r?r.M()[0]:null),15);case 15:k(A)}})}function ss(e,t){var n;return O(function(r){return 1==r.g?t==(n=In).ua?e.g?S(r,e.g.remove(0,1/0),0):r.return():S(r,ds(e,t,function(){return ls(e,t,0,e.m.duration)},null),4):e.o?S(r,ds(e,n.X,function(){return ls(e,n.X,0,e.m.duration)},null),0):r.u(0)})}function us(e,t,n,r,o,i,a,s,u){var l,c;return O(function(f){return 1==f.g?t==(l=In).ua?(i||(e.g.s=n),function(e,t,n){e.l=t,e.m=n}(e.g,r,o),f.return()):(c=[],S(f,function(e,t,n,r,o){var i,a,s,u,l,c,f,p,d,h,m,g,v,y,b;return O(function(x){return 1==x.g?t==(i=In).ua?x.return(!1):(a=Un(Fn(e.G[t])),s=jn(e.G[t]),l=!1,c=Ln(n,r),f=e.A.forceTransmux,(!ie(c)||!e.B&&Hn.includes(c))&&(f=!0),f&&(p=Dn(n,r),d=et(p))&&(u=d(),h=Cn(i.X,(r||"").split(",")),m=Cn(i.ga,(r||"").split(",")),h&&m?(l=!0,g=m,t==i.X&&(g=h),c=u.convertCodecs(t,Dn(n,g))):c=u.convertCodecs(t,p)),v=Un(Fn(c)),y=jn(c),a===v&&s===y?(e.j[t]&&!u?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&u?e.j[t]=u:u&&(e.j[t]&&e.j[t].transmux!=u.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=u):u.destroy()),x.return(!1)):(b=!0,(e.o||l&&u&&!e.j[t])&&(b=!1),b&&"smooth"===e.A.codecSwitchingStrategy&&ae()?S(x,function(e,t,n,r){return ds(e,t,function(){t!==En&&(ae()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),r&&(e.j[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),ps(e,t))},null)}(e,t,c,u),3):(u&&u.destroy(),S(x,vs(e,o),3)))):x.return(!0)})}(e,t,a,s,u),2)):(f.h||(c.push(ds(e,t,function(){return cs(e,t)},null)),e.o&&c.push(ds(e,l.X,function(){return cs(e,l.X)},null))),i||(c.push(ds(e,t,function(){return fs(e,t,n)},null)),e.o&&c.push(ds(e,l.X,function(){return fs(e,l.X,n)},null))),c.push(ds(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=o,e.h[t].appendWindowStart=r,ps(e,t)},null)),e.o&&c.push(ds(e,l.X,function(){var t=l.X;e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=o,e.h[t].appendWindowStart=r,ps(e,t)},null)),S(f,Promise.all(c),0))})}function ls(e,t,n,r){r<=n?ps(e,t):e.h[t].remove(n,r)}function cs(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,ps(e,t)}function fs(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,ps(e,t)}function ps(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),ms(e,t))}}function ds(e,t,n,r){return Mo(e.I),n={start:n,p:new ro,uri:r},e.l[t].push(n),1==e.l[t].length&&gs(e,t),n.p}function hs(e,t){var n,r,o,i,a;return O(function(s){switch(s.g){case 1:for(o in Mo(e.I),n=[],r={},e.h)(r={ready:void 0}).ready=new ro,i={start:function(e){return function(){return e.ready.resolve()}}(r),p:r.ready,uri:null},e.l[o].push(i),n.push(r.ready),1==e.l[o].length&&i.start();return C(s,2),S(s,Promise.all(n),4);case 4:E(s,3);break;case 2:throw I(s);case 3:return C(s,5,6),S(s,t(),6);case 6:for(a in M(s),e.h)ms(e,a);R(s,0);break;case 5:throw new Tt(2,3,3015,I(s),e.i.error||"No error in the media element",null)}})}function ms(e,t){e.l[t].shift(),gs(e,t)}function gs(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new Tt(2,3,3017,t)):n.p.reject(new Tt(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),ms(e,t)}}function vs(e,t){return hs(e,function(){return function(e,t){var n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,k,C,E;return O(function(I){switch(I.g){case 1:for(s in n=In,e.C=!0,e.o=!1,r=e.i.currentTime,o=e.i.autoplay,i=e.i.paused,e.qa&&(e.i.autoplay=!1),A(I,2),e.s.Ra(),a=[],e.j)a.push(e.j[s].destroy());for(u in e.l)for(l=e.l[u],f=l[0],e.l[u]=l.slice(0,1),f&&a.push(f.p.catch(Qn)),p=c(l.slice(1)),d=p.next();!d.done;d=p.next())d.value.p.reject(new Tt(2,7,7003,void 0));for(h in e.h){m=e.h[h];try{e.m.removeSourceBuffer(m)}catch(_){}}return S(I,Promise.all(a),4);case 4:return e.j={},e.h={},g=e.m.duration,e.L=new ro,e.m=Za(e,e.L),S(I,e.L,5);case 5:!isNaN(g)&&g?e.m.duration=g:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),v=new ro,y=e.m.sourceBuffers,b=t.size,x=0,w=function(){++x===b&&(v.resolve(),e.s.jb(y,"addsourcebuffer",w))},e.s.D(y,"addsourcebuffer",w),T=c(t.keys()),k=T.next();case 6:return k.done?(e.i.currentTime=r,S(I,v,2)):(C=k.value,E=t.get(C),S(I,es(e,C,E,E.codecs),9));case 9:e.o?(e.l[n.X]=[],e.l[n.ga]=[]):e.l[C]=[],k=T.next(),I.u(6);break;case 2:M(I),e.C=!1,Mo(e.I),e.s.ha(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=o,i||e.i.play())}),R(I,0)}})}(e,t)})}$a.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},V("shaka.lcevc.Dec",$a),$a.prototype.release=$a.prototype.release,(o=Ja.prototype).destroy=function(){return this.I.destroy()},o.init=function(e,t,n,r){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,r=void 0!==r&&r;var o,i,a,s,u,l=this;return O(function(f){switch(f.g){case 1:return o=In,S(f,l.L,2);case 2:l.B=t,l.ba=n,l.Fa=r,l.Ea=!l.B&&"HLS"==l.ba&&!l.Fa,l.K=null,i=c(e.keys()),a=i.next();case 3:if(a.done){f.u(0);break}return s=a.value,u=e.get(s),S(f,es(l,s,u,u.codecs),6);case 6:l.o?(l.l[o.X]=[],l.l[o.ga]=[]):l.l[s]=[],a=i.next(),f.u(3)}})},o.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)},o.wb=function(){var e={total:this.C?[]:ma(this.i.buffered),audio:this.C?[]:ma(is(this,"audio")),video:this.C?[]:ma(is(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},o.remove=function(e,t,n){var r,o=this;return O(function(i){return 1==i.g?e==(r=In).ua?S(i,o.g.remove(t,n),0):S(i,ds(o,e,function(){return ls(o,e,t,n)},null),4):o.o?S(i,ds(o,r.X,function(){return ls(o,r.X,t,n)},null),0):i.u(0)})},o.flush=function(e){var t,n=this;return O(function(r){return 1==r.g?e==(t=In).ua?r.return():S(r,ds(n,e,function(){n.i.currentTime-=.001,ps(n,e)},null),2):n.o?S(r,ds(n,t.X,function(){var e=t.X;n.i.currentTime-=.001,ps(n,e)},null),0):r.u(0)})},o.endOfStream=function(e){var t=this;return O(function(n){return S(n,hs(t,function(){ns(t)||"closed"===t.m.readyState||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},o.Za=function(e){var t=this;return O(function(n){return S(n,hs(t,function(){if(e<t.m.duration)for(var n in t.h){var r={start:function(){},p:new ro,uri:null};t.l[n].unshift(r)}t.m.duration=e,t.ea=e}),0)})},o.getDuration=function(){return this.m.duration};var ys=e.URL.createObjectURL,bs="sequence";function xs(e,t,n){this.i=e,this.A=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.G=!0,this.H=0,this.C=void 0===n||n,this.F=0,this.s=!1,this.m=e}function ws(e,t,n){this.j=n,this.l=e,this.s=Ts(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}function Ss(e){this.g=e}function Ts(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=c(ma(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function ks(e,t,n,r,o){var i=this;this.A=o,this.g=e,this.B=t,this.s=n,this.l=new ne,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return Cs(i)}),this.m=new _t(function(){Cs(i)}).Sa(this.s.gapJumpTimerTime)}function Cs(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){var t;if(e.g.readyState!=e.F&&(e.F=e.g.readyState),!(t=!e.h)){var n=(t=e.h).l,r=Ts(n),o=n.g.currentTime,i=Date.now()/1e3;t.g==o&&t.s==r||(t.m=i,t.g=o,t.s=r,t.h=!1),(r=(o=i-t.m)>=t.A&&r&&!t.h)&&(t.i(t.g,o),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new co("stalldetected"))),t=!r}t&&(t=e.g.currentTime,r=function(e,t,n){return e&&e.length&&!fa(e)&&0<=(e=ma(e).findIndex(function(e,r,o){return e.start>t&&(0==r||o[r-1].end-t<=n)}))?e:null}(n=e.g.buffered,t,e.s.gapDetectionThreshold),null!=r&&(0!=r||e.o))&&(o=n.start(r),(navigator.userAgent.match(/Edge\//)||Ot())&&(o=Math.ceil(100*(o+.01))/100),o>=e.B.yb()||.001>o-t||(0!=r&&n.end(r-1),e.g.currentTime=o,t==e.i&&(e.i=o),e.C++,e.A(new co("gapjumped"))))}}}function As(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=Es.value().get(t),n.ha(e,t,r))}(o=xs.prototype).getDuration=function(){return this.j},o.Sh=function(){return this.g},o.dh=function(e){this.i=e},o.Za=function(e){this.j=e},o.Xh=function(){return this.i},o.ah=function(e){this.B=e},o.sc=function(e){this.G=e},o.pe=function(e){this.o=e},o.Od=function(){return this.o},o.Of=function(e){this.A=e},o.Lh=function(){return this.A},o.Ng=function(e,t){if(0!=e.length){var n=(Date.now()+this.B)/1e3;if(0!=(e=e.filter(function(e){return e.start+t<n})).length){var r=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.g),this.h=Math.max(this.h,r),null!=this.i&&this.C&&!this.s&&(this.i=n-this.h-this.g)}}},o.sd=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3,o=(e=c(e)).next();!o.done;o=e.next())r<(o=o.value).startTime||(t=Math.min(t,o.startTime),n=Math.max(n,o.endTime),this.g=Math.max(this.g,o.endTime-o.startTime));this.ce(t),this.h=Math.max(this.h,n),null!=this.i&&this.C&&!this.s&&(this.i=r-this.h-this.g)}},o.Th=function(){return this.h},o.Wd=function(){this.s=!0},o.si=function(){return this.s},o.bh=function(e){this.m=e},o.Ph=function(){return this.m},o.ce=function(e){this.l=null==this.l?e:Math.min(this.l,e)},o.xf=function(e){this.g=Math.max(this.g,e)},o.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},o.V=function(){return 1/0==this.j&&!this.G},o.kc=function(){return 1/0!=this.j&&!this.G},o.mb=function(){return Math.max(this.H,this.Wb()-this.o)},o.hh=function(e){this.H=e},o.Wb=function(){return this.V()||this.kc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},o.bd=function(e){var t=Math.max(this.l,this.H);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Wb()-this.o+e,this.yb()))},o.Vb=function(){return this.bd(0)},o.yb=function(){return Math.max(0,this.Wb()-(this.V()||this.kc()?this.A:0))},o.nh=function(){return!(null==this.i||null!=this.h&&this.C)},o.$g=function(e){this.F=e},o.Jh=function(){return this.F},V("shaka.media.PresentationTimeline",xs),xs.prototype.getAvailabilityTimeOffset=xs.prototype.Jh,xs.prototype.setAvailabilityTimeOffset=xs.prototype.$g,xs.prototype.usingPresentationStartTime=xs.prototype.nh,xs.prototype.getSeekRangeEnd=xs.prototype.yb,xs.prototype.getSeekRangeStart=xs.prototype.Vb,xs.prototype.getSafeSeekRangeStart=xs.prototype.bd,xs.prototype.getSegmentAvailabilityEnd=xs.prototype.Wb,xs.prototype.setUserSeekStart=xs.prototype.hh,xs.prototype.getSegmentAvailabilityStart=xs.prototype.mb,xs.prototype.isInProgress=xs.prototype.kc,xs.prototype.isLive=xs.prototype.V,xs.prototype.offset=xs.prototype.offset,xs.prototype.notifyMaxSegmentDuration=xs.prototype.xf,xs.prototype.notifyMinSegmentStartTime=xs.prototype.ce,xs.prototype.getInitialProgramDateTime=xs.prototype.Ph,xs.prototype.setInitialProgramDateTime=xs.prototype.bh,xs.prototype.isStartTimeLocked=xs.prototype.si,xs.prototype.lockStartTime=xs.prototype.Wd,xs.prototype.getMaxSegmentEndTime=xs.prototype.Th,xs.prototype.notifySegments=xs.prototype.sd,xs.prototype.notifyTimeRange=xs.prototype.Ng,xs.prototype.getDelay=xs.prototype.Lh,xs.prototype.setDelay=xs.prototype.Of,xs.prototype.getSegmentAvailabilityDuration=xs.prototype.Od,xs.prototype.setSegmentAvailabilityDuration=xs.prototype.pe,xs.prototype.setStatic=xs.prototype.sc,xs.prototype.setClockOffset=xs.prototype.ah,xs.prototype.getPresentationStartTime=xs.prototype.Xh,xs.prototype.setDuration=xs.prototype.Za,xs.prototype.setPresentationStartTime=xs.prototype.dh,xs.prototype.getMaxSegmentDuration=xs.prototype.Sh,xs.prototype.getDuration=xs.prototype.getDuration,ws.prototype.release=function(){this.j=this.l=null,this.i=function(){}},ks.prototype.release=function(){this.l&&(this.l.release(),this.l=null),null!=this.m&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},ks.prototype.Af=function(){this.o=!0,Cs(this)};var Es=new kt(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Is(e,t,n,r){var o=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return null==o.l&&(o.l=r()),o.l},this.o=!1,this.h=new ne,this.i=new Ds(e),As(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){_s(o,o.j())})}function Ms(e){return e.o?e.g.currentTime:e.j()}function Rs(e,t){0<e.g.readyState?Ps(e.i,t):As(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){_s(e,e.j())})}function _s(e,t){.001>Math.abs(e.g.currentTime-t)?Ls(e):(e.h.ha(e.g,"seeking",function(){Ls(e)}),Ps(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Ls(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function Ds(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new _t(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}function Ps(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Sa(.1)}function Os(e){this.h=e,this.j=!1,this.g=null,this.i=new ne}function Ns(e,t,n,r,o,i){var a=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=o,this.s=null,this.o=function(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return function(e,t){e.i=t}(t=new ws(new Ss(e),t.stallThreshold,n),function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}(e,n,i),this.j=new ks(e,t.presentationTimeline,n,this.o,i),this.h=new Is(e,function(){e:{var e=a.j;e.j=!0,e.o=!1;var t=Ms(a.h);if(e=Bs(a,t),.001<Math.abs(e-t)){if(t=!1,!zt()||zt()&&Yt())t=!0;else{var n=Date.now()/1e3;(!a.s||a.s<n-1)&&(a.s=n,t=!0)}if(t){Rs(a.h,e),e=void 0;break e}}a.A(),e=void 0}return e},function(e){var t=a.j;t.g.seeking&&!t.j&&(t.j=!0,t.i=e)},function(){var e=r;return null==e?e=1/0>a.g.getDuration()?a.g.Vb():a.g.yb():0>e&&(e=a.g.yb()+e),Us(a,js(a,e))}),this.m=new _t(function(){if(0!=a.i.readyState&&!a.i.paused){var e=Ms(a.h),t=a.g.Vb(),n=a.g.yb();3>n-t&&(t=n-3),e<t&&(e=Bs(a,e),a.i.currentTime=e)}})}function Us(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Bs(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,o=e.g.Vb(),i=e.g.yb(),a=e.g.getDuration();3>i-o&&(o=i-3);var s=e.g.bd(n),u=e.g.bd(r);return n=e.g.bd(n+r),t>=a?Us(e,t):t>i?i:t<o?da(e.i.buffered,u)?u:n:t>=s||da(e.i.buffered,t)?t:n}function js(e,t){var n=e.g.Vb();return t<n?n:t>(e=e.g.yb())?e:t}function Fs(e){this.O=e,this.l=null,this.i=0,this.m=!1}function zs(e,t,n){return new Fs([e=new aa(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Gs(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}function Vs(){Fs.call(this,[]),this.g=[]}function Hs(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Nd(),this.h=new _t(function(){t.g.Lg(.25*t.i)})}function qs(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Nd()!=t&&e.g.Rf(t))}catch(n){}e.h.Sa(.25),0!=e.g.Nd()&&e.g.Rf(0)}function Xs(e){var t=this;this.h=e,this.g=new Set,this.i=new _t(function(){Ws(t,!1)}).Sa(.25)}function Ws(e,t){for(var n=c(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function Ks(){this.g=null,this.h=[]}function $s(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=(e=c(e.h)).next();!r.done;r=e.next())n+=(r=r.value).state==t?r.duration:0;return n}function Ys(){this.i=this.h=null,this.g=[]}function Qs(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Js(){this.Cd=this.Hg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.U=this.Z=this.L=this.N=this.R=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new Ks,this.h=new Ys}function Zs(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function eu(e,t){e.l=t;for(var n=(e=c(e.h.values())).next();!n.done;n=e.next())n.value.g=t}function tu(e,t,n){if(n=void 0!==n&&n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value);)n=!0,t.preload&&null!=t.sa&&(n=!1),2==t.Yb()&&(n=!1),n&&t.$&&nu(e,t.$),n&&!e.h.has(t)&&(lu(n=new uu(e.l),t,e.i),e.h.set(t,n));iu(e)}}function nu(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(e){return ia(e,t)})){var n=new uu(e.l);lu(n,t,e.i),e.j.set(t,n)}}function ru(e,t){for(var n=(t=c(t.keys())).next();!n.done;n=t.next())(n=n.value)&&su(e,n)}function ou(e){ru(e,e.h),ru(e,e.j),e.g=null}function iu(e){for(var t=Array.from(e.h.keys()),n=c(e.j.keys()),r=n.next(),o={};!r.done;o={nf:void 0},r=n.next())o.nf=r.value,t.some(function(e){return function(t){return ia(t.$,e.nf)}}(o))||su(e,o.nf)}function au(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&su(e,r)}iu(e)}function su(e,t){var n=e.h;t instanceof oa&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function uu(e){this.g=e,this.fe=this.Uf=null}function lu(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(t){return O(function(n){if(1==n.g)return r=0<r.byteLength?xn(r,t):t,e.Uf?S(n,e.Uf(r),3):n.u(0);r=new Uint8Array(0),k(n)})})}function cu(e){ho.call(this);var t=this;this.g=new Set,this.i=e,this.h=new _t(function(){for(var e=t.i(),n=c(t.g),r=n.next();!r.done;r=n.next())(r=r.value).endTime<e.start&&(t.g.delete(r),r=new co("regionremove",new Map([["region",r]])),t.dispatchEvent(r))}).Sa(2)}function fu(e){ho.call(this),this.g=new Map,this.h=e}function pu(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function du(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return"video"==e.type&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),"audio"==e.type&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function hu(e){var t=jn(e);return{type:t.split("/")[0],mimeType:t,codecs:e=Fn(e),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xd:null,colorGamut:null}}function mu(e,t){function n(e){i=e.name;var t=e.reader;t.skip(24);var n=t.la(),r=t.la();t.skip(50),d=String(n),p=String(r),e.reader.na()&&Uo(e)}function r(e){var t=Ea(e.reader);h=t.channelCount,m=t.sampleRate,o(e.name)}function o(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":s.push(e+".42E01E"),l=!0;break;case"hev1":case"hvc1":s.push(e+".1.6.L93.90"),l=!0;break;case"dvh1":case"dvhe":s.push(e+".05.04"),l=!0;break;case"vp09":s.push(e+".00.10.08"),l=!0;break;case"av01":s.push(e+".0.01M.08"),l=!0;break;case"mp4a":a.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":a.push(e),u=!0}}var i,a=[],s=[],u=!1,l=!1,f=null,p=null,d=null,h=null,m=null,g=null,v=null;if((new No).box("moov",Uo).box("trak",Uo).box("mdia",Uo).S("mdhd",function(e){f=Ca(e.reader,e.version).language}).box("minf",Uo).box("stbl",Uo).S("stsd",Bo).box("mp4a",function(e){var t=Ea(e.reader);h=t.channelCount,m=t.sampleRate,e.reader.na()?Uo(e):o(e.name)}).box("esds",function(e){e=e.reader;for(var t,n,r="mp4a";e.na();){t=e.T();for(var o=e.T();128&o;)o=e.T();if(3==t)e.la(),128&(o=e.T())&&e.la(),64&o&&e.skip(e.T()),32&o&&e.la();else if(4==t)n=e.T(),e.skip(12);else if(5==t)break}n&&(r+="."+Ma(n),5==t&&e.na()&&(31==(n=(248&(t=e.T()))>>3)&&e.na()&&(n=32+((7&t)<<3)+((224&e.T())>>5)),r+="."+n)),a.push(r),u=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(e){var t=i||"";switch(i){case"dvav":t="avc3";break;case"dva1":t="avc1"}(e=e.reader).skip(1),e=t+"."+Ma(e.T())+Ma(e.T())+Ma(e.T()),s.push(e),l=!0}).box("hvcC",function(e){var t=i||"";switch(i){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1);var r=["","A","B","C"][(e=n.T())>>6],o=31&e,a=n.P(),u=(32&e)>>5?"H":"L";e=[n.T(),n.T(),n.T(),n.T(),n.T(),n.T()],n=n.T();for(var c=0,f=0;32>f&&(c|=1&a,31!=f);f++)c<<=1,a>>=1;for(t=t+"."+r+o+"."+Ma(c,!0),t+="."+u+n,r="",o=e.length;o--;)((u=e[o])||r)&&(r="."+u.toString(16).toUpperCase()+r);t+=r,s.push(t),l=!0}).box("dvcC",function(e){var t=i||"";switch(i){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.T(),n=n.T(),s.push(t+"."+Ra(e>>1&127)+"."+Ra(e<<5&32|n>>3&31)),l=!0}).box("dvvC",function(e){var t=i||"";switch(i){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.T(),n=n.T(),s.push(t+"."+Ra(e>>1&127)+"."+Ra(e<<5&32|n>>3&31)),l=!0}).S("vpcC",function(e){var t=i||"",n=e.reader;e=n.T();var r=n.T();n=n.T()>>4&15,s.push(t+"."+Ra(e)+"."+Ra(r)+"."+Ra(n)),l=!0}).box("av1C",function(e){var t=i||"";"dav1"===i&&(t="av01");var n=e.reader;n.skip(1);var r=(e=n.T())>>>5,o=(64&(n=n.T()))>>6;s.push(t+"."+r+"."+Ra(31&e)+(n>>>7?"H":"M")+"."+Ra(2===r&&o?(32&n)>>5?12:10:o?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+Ra(1)+"."+Ra(1)+"."+Ra(1)+".0"),l=!0}).box("enca",Fo).box("encv",jo).box("sinf",Uo).box("frma",function(e){o(e=Ia(e.reader).codec)}).box("colr",function(e){s=s.map(function(t){if(t.startsWith("av01.")){var n=e.reader,r=n.va(),o=n.qb(4),i=String.fromCharCode(o[0]);if(i+=String.fromCharCode(o[1]),i+=String.fromCharCode(o[2]),"nclx"===(i+=String.fromCharCode(o[3]))){o=n.la(),i=n.la();var a=n.la(),s=n.T()>>7,u=t.split(".");10==u.length&&(u[6]=Ra(o),u[7]=Ra(i),u[8]=Ra(a),u[9]=String(s),t=u.join("."))}n.seek(r)}return t});var t=function(e){var t=null,n=null,r=e.qb(4),o=String.fromCharCode(r[0]);if(o+=String.fromCharCode(r[1]),o+=String.fromCharCode(r[2]),"nclx"===(o+=String.fromCharCode(r[3]))){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.la(),e.la(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xd:n}}(e.reader),n=t.colorGamut;g=t.xd,v=n}).parse(e||t,!0),!a.length&&!s.length)return null;var y=u&&!l,b=new Map;if(l){var x=new ke("video/mp4");for(e&&x.init(e),x.i(t),t=(e=c(x.j())).next();!t.done;t=e.next())t=t.value,b.set(t,t);x.g()}return{type:y?"audio":"video",mimeType:y?"audio/mp4":"video/mp4",codecs:gu(a.concat(s)).join(", "),language:f,height:p,width:d,channelCount:h,sampleRate:m,closedCaptions:b,xd:g,colorGamut:v}}function gu(e){for(var t=new Set,n=[],r=(e=c(e)).next();!r.done;r=e.next()){var o=Bn(r=r.value);t.has(o)||(n.push(r),t.add(o))}return t=An("audio",n),r=An("video",n),e=An(En,n),r=function(e){if(1>=e.length)return e;var t=e.find(function(e){return e.startsWith("dvav.")||e.startsWith("dva1.")||e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")||e.startsWith("dvc1.")||e.startsWith("dvi1.")});return t?ie('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(e){return e!=t}):e}(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function vu(t,n,r){var o,i,a,s,u;return O(function(l){if(1==l.g)return(o=n).cryptoKey?l.u(2):S(l,o.fetchKey(),3);if(!(i=o.iv))for(i=be(new ArrayBuffer(16)),a=o.firstMediaSequenceNumber+r,s=i.byteLength-1;0<=s;s--)i[s]=255&a,a>>=8;return u="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:i}:{name:"AES-CTR",counter:i,length:64},l.return(e.crypto.subtle.decrypt(u,o.cryptoKey,t))})}function yu(e,t,n,r,o){return e=xo(e,r,o),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function bu(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.m=new Io(function(){return function(e){var t,n,r,o,i,a;return O(function(s){if(1==s.g){for(t=[],n=c(e.i.values()),r=n.next();!r.done;r=n.next())Ou(o=r.value),t.push(Nu(o)),o.W&&(ou(o.W),o.W=null);for(i=c(e.o.values()),a=i.next();!a.done;a=i.next())ou(a.value);return S(s,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,k(s)})}(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}function xu(e,t){for(var n=0>e.g.eb(),r=c(e.i.values()),o=r.next();!o.done;o=r.next())(o=o.value).ia&&o.ia.Sc(n),o.W&&o.W.Sc(n);for(o=(r=c(e.o.values())).next();!o.done;o=r.next())o.value.Sc(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.rc&&(Tu(e,t,!1,0,!1),n.rc=r):(t=n.rc)&&(n.rc=null,Tu(e,t,!0,0,!1)))}function wu(e,t,n,r,o,i){n=void 0!==n&&n,r=void 0===r?0:r,o=void 0!==o&&o,i=void 0!==i&&i,e.j=t,e.C&&(t.video&&Tu(e,t.video,n,r,o,i),t.audio&&Tu(e,t.audio,n,r,o,i))}function Su(e,t){O(function(n){if(1==n.g)return e.s=t,e.C?t.segmentIndex?n.u(2):S(n,t.createSegmentIndex(),2):n.return();Tu(e,t,!0,0,!1),k(n)})}function Tu(e,t,n,r,o,i){var a=e.i.get(t.type);a||t.type!=En?a&&(a.rc&&(t.trickModeVideo?(a.rc=t,t=t.trickModeVideo):a.rc=null),a.stream!=t||o)&&(e.o.has(t)?a.W=e.o.get(t):a.W&&function(e,t){t&&t!==e.i&&(ou(e),e.i=t)}(a.W,t),t.type==En&&(o=Ln(t.mimeType,t.codecs),ts(e.g.aa,o,e.l.sequenceMode,t.external)),e.o.has(a.stream)||a.stream.closeSegmentIndex&&a.stream.closeSegmentIndex(),a.stream=t,a.ia=null,a.hg=!!i,n?a.Vc?a.Be=!0:a.Qa?(a.cc=!0,a.Hd=r,a.Be=!0):(Ou(a),Du(e,a,!0,r).catch(function(t){e.g&&e.g.onError(t)})):a.Qa||a.sb||Pu(e,a,0),function(e,t){var n,r;return O(function(o){if(1==o.g)return t.ib?(n=t.stream,r=t.ib,n.segmentIndex?o.u(2):S(o,n.createSegmentIndex(),2)):o.return();if(t.ib!=r||t.stream!=n)return o.return();var i=e.g.Md(),a=os(e.g.aa,t.type),s=t.stream.segmentIndex.find(t.Na?t.Na.endTime:i),u=null==s?null:t.stream.segmentIndex.get(s);s=u&&u.sa?u.sa-u.Ha:null,u&&!s&&(s=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),s?((u=u.$)&&(s+=(u.sa?u.sa-u.Ha:null)||0),i=8*s/(u=e.g.getBandwidthEstimate())<(a||0)-i-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.ib.h.g>s):i=!1,i&&t.ib.abort(),k(o)})}(e,a).catch(function(t){e.g&&e.g.onError(t)})):function(e,t){var n,r,o,i,a;O(function(s){switch(s.g){case 1:return n=In,e.H++,r=e.H,C(s,2),S(s,ss(e.g.aa,n.ua),4);case 4:E(s,3);break;case 2:o=I(s),e.g&&e.g.onError(o);case 3:i=Ln(t.mimeType,t.codecs),ts(e.g.aa,i,e.l.sequenceMode,t.external),(e.g.aa.F.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(a=Cu(e,t),e.i.set(n.ua,a),Pu(e,a,0)),k(s)}})}(e,t)}function ku(e,t){t.Vc||t.cc||(t.Qa?(t.cc=!0,t.Hd=0):null==rs(e.g.aa,t.type)?null==t.sb&&Pu(e,t,0):(Ou(t),Du(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)})))}function Cu(e,t){return{stream:t,type:t.type,ia:null,W:Au(e,t),Na:null,lc:null,Vd:null,Ud:null,Td:null,rc:null,endOfStream:!1,Qa:!1,sb:null,cc:!1,Hd:0,Be:!1,Vc:!1,Qc:!0,Gf:!1,fd:!1,ib:null}}function Au(e,t){if("video"===t.type&&e.h.disableVideoPrefetch||"audio"===t.type&&e.h.disableAudioPrefetch||t.type===En&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===En&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new Zs(e.h.segmentPrefetchLimit,t,function(t,n,r){return Lu(t,n,r||null,e.h.retryParameters,e.g.Lb)},0>e.g.eb()):null}function Eu(t,n){var r,o,i,a,s,u;return O(function(l){switch(l.g){case 1:if(Mo(t.m),n.Qa||null==n.sb||n.Vc)return l.return();if(n.sb=null,!n.cc){l.u(2);break}return S(l,Du(t,n,n.Be,n.Hd),3);case 3:return l.return();case 2:if(n.stream.segmentIndex){l.u(4);break}return r=n.stream,C(l,5),S(l,n.stream.createSegmentIndex(),7);case 7:E(l,6);break;case 5:return o=I(l),S(l,Uu(t,n,o),8);case 8:return l.return();case 6:if(r!=n.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),n.Qa||n.sb||Pu(t,n,0),l.return();case 4:C(l,9),i=function(t,n){if(Ru(n))return function(e,t){var n=os(e,"video")||0;Wn(e.g,t,n)}(t.g.aa,n.stream.originalId||""),null;if(n.type==En&&function(e){e.g&&Wn(e.g,"",0)}(t.g.aa),!t.g.aa.xa&&n.type!=En)return t.h.updateIntervalSeconds/2;var r=t.g.Md();if("audio"===n.type)for(var o=c(t.o.keys()),i=o.next();!i.done;i=o.next())(i=t.o.get(i.value)).Ma(r,!0),tu(i,r);o=n.Na?n.Na.endTime:r;var a=function(e,t,n){return e.C?0:t==En?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):ha(e=is(e,t),n)}(t.g.aa,n.type,r),s=Math.max(1,Math.max(t.l.minBufferTime||0,t.h.rebufferingGoal,t.h.bufferingGoal)*t.B),u=t.l.presentationTimeline.getDuration()-o;if(i=os(t.g.aa,n.type),1e-6>u&&i)return n.endOfStream=!0,"video"==n.type&&(t=t.i.get(En))&&Ru(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,a>=s)return t.h.updateIntervalSeconds/2;if(s=!n.ia,i=function(e,t,n,r){var o=t.ia?t.ia.current():null;if(o)return o;if(t.Na||r)return t.ia=t.stream.segmentIndex.Ib(t.Na?t.Na.endTime:r,!1,0>e.g.eb()),t.ia&&t.ia.next().value;r=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance,o=Math.max(n-r,0),e=0>e.g.eb();var i=null;return r&&(t.ia=t.stream.segmentIndex.Ib(o,!1,e),i=t.ia&&t.ia.next().value),i||(t.ia=t.stream.segmentIndex.Ib(n,!1,e),i=t.ia&&t.ia.next().value),i}(t,n,r,i),!i)return t.h.updateIntervalSeconds;a=!1,s&&n.hg&&(a=!0,n.hg=!1),s=1/0;for(var l=(u=c(u=Array.from(t.i.values()))).next();!l.done;l=u.next())Ru(l=l.value)||l.ia&&!l.ia.current()||(s=Math.min(s,l.Na?l.Na.endTime:r));return o>=s+t.l.presentationTimeline.g?t.h.updateIntervalSeconds:(n.W&&n.ia&&!t.o.has(n.stream)&&(n.W.Ma(i.startTime),tu(n.W,i.startTime)),function(t,n,r,o,i){var a,s,u,l,c,f,p,d,h,m,g,v,y,b,x;return O(function(w){switch(w.g){case 1:if(a=In,s=n.stream,u=n.ia,n.Qa=!0,C(w,2),2==o.Yb())throw new Tt(1,1,1011);return S(w,function(e,t,n,r){var o,i,a,s,u,l,c,f,p,d,h,m,g,v,y;return O(function(b){switch(b.g){case 1:if(o=In,i=null==t.Na&&null==t.lc,a=[],s=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),u=Math.min(n.appendWindowEnd,e.L)+.01,l=Bn(n.codecs||t.stream.codecs),c=jn(n.mimeType||t.stream.mimeType),(f=n.timestampOffset)==t.Vd&&s==t.Ud&&u==t.Td&&l==t.tf&&c==t.uf){b.u(2);break}if(p=t.tf&&t.uf&&function(e,t,n,r){if(t==En)var o=!1;else{o=Un(Fn(e.G[t]));var i=jn(e.G[t]),a=Ln(n,r),s=e.A.forceTransmux;(!ie(a)||!e.B&&Hn.includes(a))&&(s=!0),n=Dn(n,r),s&&(s=et(n))&&(a=(s=s()).convertCodecs(t,n),s.destroy()),t=Un(Fn(a)),a=jn(a),o=o!==t||i!==a}return!!o&&("smooth"!==e.A.codecSwitchingStrategy||!ae()||e.o)}(e.g.aa,t.type,c,l),!p){b.u(3);break}if(d=null,t.type===o.ga?d=e.i.get(o.X):t.type===o.X&&(d=e.i.get(o.ga)),!d){b.u(3);break}return S(b,Nu(d).catch(function(){}),5);case 5:d.lc=null,ku(e,d);case 3:return S(b,Iu(e,t,f,s,u,n,l,c),2);case 2:return ia(n.$,t.lc)||(t.lc=n.$,n.l&&n.$&&(h=_u(e,t,n.$),m=function(){var i,a,s,u,l,c;return O(function(f){switch(f.g){case 1:return C(f,2),S(f,h,4);case 4:return i=f.h,Mo(e.m),a=null,s=new Map,u={projection:null,hfov:null},(new No).box("moov",Uo).box("trak",Uo).box("mdia",Uo).S("mdhd",function(e){a=Ca(e.reader,e.version).timescale}).box("hdlr",function(e){switch((e=e.reader).skip(8),e.oc()){case"soun":s.set(o.X,a);break;case"vide":s.set(o.ga,a)}a=null}).box("minf",Uo).box("stbl",Uo).S("stsd",Bo).box("encv",jo).box("avc1",jo).box("avc3",jo).box("hev1",jo).box("hvc1",jo).box("dvav",jo).box("dva1",jo).box("dvh1",jo).box("dvhe",jo).box("dvc1",jo).box("dvi1",jo).box("vexu",Uo).box("proj",Uo).S("prji",function(e){e=e.reader.oc(),u.projection=e}).box("hfov",function(e){e=e.reader.P()/1e3,u.hfov=e}).parse(i),function(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new co("spatialvideoinfo",n)}else n=new co("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}(e,u),s.has(t.type)?n.$.timescale=s.get(t.type):null!=a&&(n.$.timescale=a),l=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,S(f,e.g.kg(t.type,i),5);case 5:return S(f,as(e.g.aa,t.type,i,null,t.stream,l,t.Qc,r),6);case 6:E(f,0);break;case 2:throw c=I(f),t.lc=null,c}})},g=n.startTime,i&&null!=(v=os(e.g.aa,t.type))&&(g=v),e.g.Ai(g,n.$),a.push(m()))),e.l.sequenceMode&&(y=t.Na?t.Na.i:null,n.i!=y&&a.push(function(e,t,n){var r;return O(function(o){return 1==o.g?t==(r=In).ua?o.return():(t==r.ga&&(e.za=new ro),ds(e,t,function(){return cs(e,t)},null),e.o&&ds(e,r.X,function(){return cs(e,r.X)},null),S(o,ds(e,t,function(){return fs(e,t,n)},null),2)):e.o?S(o,ds(e,r.X,function(){return fs(e,r.X,n)},null),0):o.u(0)})}(e.g.aa,t.type,n.startTime))),S(b,Promise.all(a),0)}})}(t,n,o,i),4);case 4:return Mo(t.m),t.A?w.return():(l="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,c=e.ReadableStream,t.h.lowLatencyMode&&t.l.isLowLatency&&c&&l&&("HLS"!=t.l.type||o.m)?(p=new Uint8Array(0),h=d=!1,g=function(e){var a,u,l;return O(function(c){switch(c.g){case 1:if(d)return c.return();if(h=!0,Mo(t.m),t.A)return c.return();if(C(c,2),p=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(p,e),a=!1,u=0,(new No).box("mdat",function(e){u=e.size+e.start,a=!0}).parse(p,!1,!0),!a){c.u(4);break}return l=p.subarray(0,u),p=p.subarray(u),S(c,Mu(t,n,r,s,o,l,!0,i),5);case 5:n.W&&n.ia&&tu(n.W,o.startTime,!0);case 4:E(c,0);break;case 2:m=I(c),k(c)}})},S(w,_u(t,n,o,g),9)):S(w,_u(t,n,o),7));case 7:return f=w.h,Mo(t.m),t.A?w.return():(Mo(t.m),n.cc?(n.Qa=!1,Pu(t,n,0),w.return()):S(w,Mu(t,n,r,s,o,f,!1,i),6));case 9:if(v=w.h,m)throw m;if(h){w.u(10);break}return d=!0,Mo(t.m),t.A?w.return():n.cc?(n.Qa=!1,Pu(t,n,0),w.return()):S(w,Mu(t,n,r,s,o,v,!1,i),10);case 10:n.W&&n.ia&&tu(n.W,o.startTime,!0);case 6:if(Mo(t.m),t.A)return w.return();n.Na=o,u.next(),n.Qa=!1,n.Gf=!1,y=t.g.aa.wb(),b=y[n.type],JSON.stringify(b),n.cc||t.g.Af(o,n.stream),Pu(t,n,0),E(w,0);break;case 2:if(x=I(w),Mo(t.m,x),t.A)return w.return();if(n.Qa=!1,7001==x.code)n.Qa=!1,Ou(n),Pu(t,n,0),w.u(0);else if(n.type==a.ua&&t.h.ignoreTextStreamFailures)t.i.delete(a.ua),w.u(0);else{if(3017!=x.code)return n.fd=!0,1==x.category&&n.W&&su(n.W,o),x.severity=2,S(w,Uu(t,n,x),0);(function(e,t,n){if(!Array.from(e.i.values()).some(function(e){return e!=t&&e.Gf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else{if(!(4<r))return t.fd=!0,e.A=!0,void e.g.onError(n);e.B-=.04}t.Gf=!0}Pu(e,t,4)})(t,n,x),w.u(0)}}})}(t,n,r,i,a).catch(function(){}),null)}(t,n),null!=i&&(Pu(t,n,i),n.fd=!1),E(l,10);break;case 9:return a=I(l),S(l,Uu(t,n,a),11);case 11:return l.return();case 10:if(s=Array.from(t.i.values()),!t.C||!s.every(function(e){return e.endOfStream})){l.u(0);break}return S(l,t.g.aa.endOfStream(),13);case 13:Mo(t.m),0!=(u=t.g.aa.getDuration())&&u<t.l.presentationTimeline.getDuration()&&t.l.presentationTimeline.Za(u),k(l)}})}function Iu(e,t,n,r,o,i,a,s){var u,l,c,f;return O(function(p){if(1==p.g)return u=In,l=new Map,e.j.audio&&l.set(u.X,e.j.audio),e.j.video&&l.set(u.ga,e.j.video),C(p,2),t.Ud=r,t.Td=o,a&&(t.tf=a),s&&(t.uf=s),t.Vd=n,c=e.l.sequenceMode||"HLS"==e.l.type,S(p,us(e.g.aa,t.type,n,r,o,c,i.mimeType||t.stream.mimeType,i.codecs||t.stream.codecs,l),4);if(2!=p.g)return E(p,0);throw f=I(p),t.Ud=null,t.Td=null,t.tf=null,t.uf=null,t.Vd=null,f})}function Mu(e,t,n,r,o,i,a,s){var u,l,c,f,p,d,h,m;return a=void 0!==a&&a,s=void 0!==s&&s,O(function(g){switch(g.g){case 1:return u=r.closedCaptions&&0<r.closedCaptions.size,c=null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,f=e.h.parsePrftBox&&!e.F,p="video/mp4"==r.mimeType||"audio/mp4"==r.mimeType,d=null,o.$&&(d=o.$.timescale),h=p&&d&&"video"===r.type&&"DASH"==e.l.type&&e.h.shouldFixTimestampOffset,(c||f||h)&&(l=new No),c&&l.S("emsg",function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var i=t.reader.oc(),a=t.reader.oc(),s=t.reader.P(),u=t.reader.P(),l=t.reader.P(),c=t.reader.P(),f=o.startTime+u/s;else s=t.reader.P(),u=(f=t.reader.Nc()/s+o.timestampOffset)-o.startTime,l=t.reader.P(),c=t.reader.P(),i=t.reader.oc(),a=t.reader.oc();t=t.reader.qb(t.reader.getLength()-t.reader.va()),(n&&n.includes(i)||e.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==i?e.g.Bi():(n=f+l/s,(s=new co("emsg",s=(new Map).set("detail",{startTime:f,endTime:n,schemeIdUri:i,value:a,timescale:s,presentationTimeDelta:u,eventDuration:l,id:c,messageData:t}))).cancelable=!0,e.g.onEvent(s),s.defaultPrevented||"https://aomedia.org/emsg/ID3"!=i&&"https://developer.apple.com/streaming/emsg-id3"!=i||!(i=wa(t)).length||e.g.onMetadata([{cueTime:f,data:t,frames:i,dts:f,pts:f}],0,n)))}),f&&l.S("prft",function(t){if(!e.F&&o.$.timescale){var n=t.reader,r=t.version;n.P(),t=1e3*(t=n.P())+n.P()/Math.pow(2,32)*1e3,0===r?n=n.P():(r=n.P(),n=n.P(),n=r*Math.pow(2,32)+n),t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime(),n=new co("prft",n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/o.$.timescale*1e3)})),e.g.onEvent(n),e.F=!0}}),h&&l.box("moof",Uo).box("traf",Uo).S("tfdt",function(n){var r,i,a,s,u;return O(function(l){return r=ka(n.reader,n.version),(i=r.baseMediaDecodeTime)?(a=-i/d,(Number(t.Vd)||0)<a?(s=t.Ud,u=t.Td,S(l,Iu(e,t,a,s,u,o),0)):l.u(0)):l.return()})}),(c||f||h)&&l.parse(i,!1,a),S(g,function(e,t,n){var r,o,i;return O(function(a){if(1==a.g)return r=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),null==(o=rs(e.g.aa,t.type))||(i=n-o-r)<=e.h.evictionGoal?a.return():S(a,e.g.aa.remove(t.type,o,o+i),2);Mo(e.m),k(a)})}(e,t,n),2);case 2:return Mo(e.m),m=t.Qc,t.Qc=!1,S(g,e.g.kg(t.type,i),3);case 3:return S(g,as(e.g.aa,t.type,i,o,r,u,m,s,a),4);case 4:Mo(e.m),k(g)}})}function Ru(e){return e&&e.type==En&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function _u(e,t,n,r){var o,i,a,s,u;return O(function(l){switch(l.g){case 1:if(o=n.cd())return l.return(o);if(i=null,t.W){var c=t.W,f=c.h;n instanceof oa&&(f=c.j),f.has(n)?(c=f.get(n),r&&(c.Uf=r),i=c.fe):i=null}return i||(i=Lu(n,t.stream,r||null,e.h.retryParameters,e.g.Lb)),a=0,t.ia&&(a=t.ia.h),t.ib=i,S(l,i.promise,2);case 2:if(s=l.h,t.ib=null,u=s.data,!n.aesKey){l.u(3);break}return S(l,vu(u,n.aesKey,a),4);case 4:u=l.h;case 3:return l.return(u)}})}function Lu(e,t,n,r,o){var i=e instanceof aa?e:void 0,a=i?1:0;return(e=yu(e.M(),e.Ha,e.sa,r,n)).contentType=t.type,o.request(Co,e,{type:a,stream:t,segment:i})}function Du(e,t,n,r){var o,i;return O(function(a){return 1==a.g?(t.cc=!1,t.Be=!1,t.Hd=0,t.Vc=!0,t.Na=null,t.ia=null,t.W&&!e.o.has(t.stream)&&ou(t.W),r?(o=e.g.Md(),i=e.g.aa.getDuration(),S(a,e.g.aa.remove(t.type,o+r,i),3)):S(a,ss(e.g.aa,t.type),4)):3!=a.g?(Mo(e.m),n?S(a,e.g.aa.flush(t.type),3):a.u(3)):(Mo(e.m),t.Vc=!1,t.endOfStream=!1,t.Qa||t.sb||Pu(e,t,0),void k(a))})}function Pu(e,t,n){var r=t.type;(r!=En||e.i.has(r))&&(t.sb=new Rt(function(){var n;return O(function(r){return 1==r.g?(C(r,2),S(r,Eu(e,t),4)):2!=r.g?E(r,0):(n=I(r),e.g&&e.g.onError(n),void k(r))})}).Y(n))}function Ou(e){null!=e.sb&&(e.sb.stop(),e.sb=null)}function Nu(e){return O(function(t){return e.ib?S(t,e.ib.abort(),0):t.u(0)})}function Uu(e,t,n){var r;return O(function(o){if(1==o.g)return S(o,to(e.I),2);Mo(e.m),1===n.category&&(r=0===e.h.maxDisabledTime&&1011==n.code?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)),n.handled&&1011==n.code||e.g.onError(n),n.handled||e.h.failureCallback(n),k(o)})}function Bu(){}function ju(e,t,n,r,o){var i,a=o in r,s=a?n.constructor==Object&&0==Object.keys(r).length:n.constructor==Object&&0==Object.keys(n).length,u=a||s,l=!0;for(i in t){var c=o+"."+i,f=a?r[o]:n[i];u||i in n?void 0===t[i]?void 0===f||u?delete e[i]:e[i]=lr(f):s?e[i]=t[i]:f.constructor==Object&&t[i]&&t[i].constructor==Object?(e[i]||(e[i]=lr(f)),c=ju(e[i],t[i],f,r,c),l=l&&c):x(t[i])!=x(f)||null==t[i]||"function"!=typeof t[i]&&t[i].constructor!=f.constructor?(Y("Invalid config, wrong type for "+c),l=!1):("function"==typeof n[i]&&n[i].length!=t[i].length&&Q("Unexpected number of arguments for "+c),e[i]=t[i]):(Y("Invalid config, unrecognized key "+c),l=!1)}return l}function Fu(e,t){for(var n={},r=n,o=0,i=0;!(0>(o=e.indexOf(".",o)));)0!=o&&"\\"==e[o-1]||(r[i=e.substring(i,o).replace(/\\\./g,".")]={},r=r[i],i=o+1),o+=1;return r[e.substring(i).replace(/\\\./g,".")]=t,n}function zu(e,t){return e&&t}function Gu(e,t){function n(e){return Array.isArray(e)&&0===e.length}function r(e){return e&&"object"===x(e)&&!Array.isArray(e)}return e=function e(t,o){return Object.keys(t).reduce(function(i,a){var s=t[a];return o.hasOwnProperty(a)?r(s)&&r(o[a])?(s=e(s,o[a]),(0<Object.keys(s).length||!r(s))&&(i[a]=s)):n(s)&&n(o[a])||Number.isNaN(s)&&Number.isNaN(o[a])||s!==o[a]&&(i[a]=s):i[a]=s,i},{})}(e,t),function e(t){for(var o=c(Object.keys(t)),i=o.next();!i.done;i=o.next())r(t[i=i.value])&&0===Object.keys(t[i]).length||n(t[i])||"function"==typeof t[i]?delete t[i]:r(t[i])&&(e(t[i]),0===Object.keys(t[i]).length&&delete t[i])}(e),e}function Vu(){}function Hu(e){return new st(e=un(e)).Eb}function qu(e,t,n){function r(e){we(i).setUint32(a,e.byteLength,!0),a+=4,i.set(be(e),a),a+=e.byteLength}if(!n||!n.byteLength)throw new Tt(2,6,6015);var o;o="string"==typeof t?cn(t,!0):t,e=cn(e=un(e),!0);var i=new Uint8Array(12+e.byteLength+o.byteLength+n.byteLength),a=0;return r(e),r(o),r(n),i}function Xu(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,qu(e,n=un(e).split("skd://").pop(),t))}function Wu(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}function Ku(){}function $u(){var t=1/0;navigator.connection&&navigator.connection.saveData&&(t=360);var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(e,t,n){return en()&&"skd"==t&&(t=n.serverCertificate,e=qu(e,n=Hu(e),t)),e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Ot(),minHdcpVersion:"",ignoreDuplicateInitData:!Bt()};(Ot()||qt())&&n.preferredKeySystems.push("com.microsoft.playready");var r="reload",o=!1;Bt()||Ut()||Jt("Tizen 4")||Jt("Tizen 5")||Jt("Tizen 6")||Ft()||jt()&&53===Gt()||jt()&&68===Gt()||!(!zt()||zt()&&Yt()||zt()&&Jt("Fuchsia"))||$t()&&Pt()||(r="smooth",o=!0),o={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Qu,manifestPreprocessorTXml:Ju,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:o,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Ut()||Bt()||Ft()||qt()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Qu,manifestPreprocessorTXml:Ju,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return zu([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:qt()||Ht(),dontChooseCodecs:!1,shouldFixTimestampOffset:jt()||Nt()};(jt()||Nt()||zt()||Xt())&&(i.stallSkip=0);var a={trackSelectionCallback:function(e){return O(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return O(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?S(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return zu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5};t={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:Vt()?.5:0},r={codecSwitchingStrategy:r,addExtraFeaturesToSourceBuffer:function(e){return zu([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(e,t){return zu([e,t])}};var s=!1,u=!1,l=!0;Qt()&&(u=s=!0,l=!1);var f={drm:n,manifest:o,streaming:i,mediaSource:r,offline:a,abrFactory:function(){return new Fr},abr:t,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:s,skipPlayDetection:u,supportsMultipleMediaElements:l}};return a.trackSelectionCallback=function(t){return O(function(n){return n.return(function(t,n,r){var o=r;"AUTO"==o&&(o=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var i=t.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=o)});r=[];var a=sr(n,i.map(function(e){return e.language}));a&&(r=i.filter(function(e){return rr(e.language)==a})),0==r.length&&(r=i.filter(function(e){return e.primary})),0==r.length&&(i.map(function(e){return e.language}),r=i);var s=r.filter(function(e){return e.height&&480>=e.height});for(s.length&&(s.sort(function(e,t){return t.height-e.height}),r=s.filter(function(e){return e.height==s[0].height})),n=[],r.length&&(i=Math.floor(r.length/2),r.sort(function(e,t){return e.bandwidth-t.bandwidth}),n.push(r[i])),t=c(t),r=t.next();!r.done;r=t.next())(r=r.value).type!=En&&"image"!=r.type||n.push(r);return n}(t,f.preferredAudioLanguage,f.preferredVideoHdrLevel))})},f}function Yu(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return ju(e,t,n||$u(),r,"")}function Qu(e){return zu([e],e)}function Ju(e){return zu([e],e)}function Zu(e,t,n,r){ho.call(this),this.L=e,this.U=t,this.xa=r.networkingEngine,this.A=n,this.o=null,this.qa=0,this.Fa=r.yc,this.C=r.vi,this.ab=r.wi,this.g=r.config,this.j=this.F=this.h=null,this.ea=!1,this.G=r.Fi,this.oa=!1,this.l=null,this.da=!1,this.i=this.B=null,this.ba=!1,this.K=new Map,this.pa=!1,this.za=r.Ei,this.Z=new Js,this.m=new ro,this.N=null,this.s=!1,this.Da=r.yh,this.fa=null,this.Ea=r.xh,this.R=!1,this.I=[],this.H=[]}function el(e,t,n){(e=t?e.H:e.I)?e.push(n):n()}function tl(e,t){if(e.N=t,e.R=!0,e.I)for(var n=(t=c(e.I)).next();!n.done;n=t.next())(n=n.value)();e.I=null}function nl(e){if(e.s)throw new Tt(2,7,7003)}function rl(e,t){e.dispatchEvent(new co("onstatechange",(new Map).set("state",t)))}function ol(e,t,n){var r,o,i,a,s;O(function(u){if(1==u.g)return r=e.g.streaming.segmentPrefetchLimit||2,o=new Zs(r,t,function(t,n,r){return Lu(t,n,r||null,e.g.streaming.retryParameters,e.xa)},!1),e.K.set(t.id,o),S(u,t.createSegmentIndex(),2);i=e.A||0,(s=(a=t.segmentIndex.Ib(i))?a.current():null)||(s=t.segmentIndex.get(0)),s&&(n?s.$&&nu(o,s.$):tu(o,s.startTime)),k(u)})}function il(e,t){ho.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wc:null,vc:ul,jc:function(e,t){return al(n,"enter",e,t)}},{wc:sl,vc:ul,jc:function(e,t){return al(n,"enter",e,t)}},{wc:ll,vc:ul,jc:function(e,t){return al(n,"enter",e,t)}},{wc:ul,vc:sl,jc:function(e,t){return al(n,"exit",e,t)}},{wc:ul,vc:ll,jc:function(e,t){return al(n,"exit",e,t)}},{wc:sl,vc:ll,jc:function(e,t){return al(n,"skip",e,t)}},{wc:ll,vc:sl,jc:function(e,t){return al(n,"skip",e,t)}}],this.h=new ne,this.h.D(this.i,"regionremove",function(e){n.g.delete(e.region)})}function al(e,t,n,r){t=new co(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}Is.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},Ds.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},(o=Os.prototype).ready=function(){var e=this;As(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){!function(){if(null==e.g||0==e.g&&1/0!=e.h.duration)e.j=!0;else{var t=e.h.currentTime,n=e.g;0>e.g&&(n=Math.max(0,t+e.g)),t!=n?(e.i.ha(e.h,"seeking",function(){e.j=!0}),e.h.currentTime=n):e.j=!0}}()})},o.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},o.Ee=function(e){this.g=this.j?this.g:e},o.yd=function(){return(this.j?this.h.currentTime:this.g)||0},o.gg=function(){return 0},o.fg=function(){return 0},o.Mg=function(){},(o=Ns.prototype).ready=function(){this.m.Sa(.25)},o.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},o.Ee=function(e){Rs(this.h,e)},o.yd=function(){var e=Ms(this.h);return 0<this.i.readyState&&!this.i.paused?js(this,e):e},o.gg=function(){return this.o?this.o.o:0},o.fg=function(){return this.j.C},o.Mg=function(){this.j.Af()},(o=Fs.prototype).getNumReferences=function(){return this.O.length},o.getNumEvicted=function(){return this.i},o.release=function(){this.m||(this.O=[],this.l&&this.l.stop(),this.l=null)},o.yi=function(){this.m=!0},o.Hb=function(e){for(var t=c(this.O),n=t.next();!n.done;n=t.next())e(n.value)},o.find=function(e){for(var t=this.O.length-1,n=t;0<=n;--n){var r=this.O[n],o=n<t?this.O[n+1].startTime:r.endTime;if(e>=r.startTime&&e<o)return n+this.i}return this.O.length&&e<this.O[0].startTime?this.i:null},o.get=function(e){return 0==this.O.length||0>(e-=this.i)||e>=this.O.length?null:this.O[e]},o.offset=function(e){if(!this.m)for(var t=c(this.O),n=t.next();!n.done;n=t.next())n.value.offset(e)},o.Zd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.O=this.O.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.O.push.apply(this.O,f(e))}},o.rd=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.O.length||e.endTime>n.O[0].startTime)}),this.Zd(e),this.Ma(t)},o.Ma=function(e){if(!this.m){var t=this.O.length;this.O=this.O.filter(function(t){return t.endTime>e}),this.i+=t-this.O.length}},o.Bc=function(e,t,n){if(n=void 0!==n&&n,!this.m){for(;this.O.length&&this.O[this.O.length-1].startTime>=t;)this.O.pop();for(;this.O.length&&this.O[0].endTime<=e;)this.O.shift(),n||this.i++;0!=this.O.length&&((t=new aa((e=this.O[this.O.length-1]).startTime,t,e.F,e.Ha,e.sa,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey)).mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.O[this.O.length-1]=t)}},o.ue=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new _t(function(){var e=t();e?n.O.push.apply(n.O,f(e)):(n.l.stop(),n.l=null)}),this.l.Sa(e))},Fs.prototype[Symbol.iterator]=function(){return this.Ib(0)},Fs.prototype.Ib=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var r=this.find(e);if(null==r)return null;var o=this.get(r);n?r++:r--;var i=-1;if(o&&0<o.g.length)for(var a=o.g.length-1;0<=a;--a){var s=o.g[a];if(e>=s.startTime&&e<s.endTime){if(!t){for(;a&&!s.l;)a--,s=o.g[a];if(!s.l)return Y("No independent partial segment found!"),null}n?r--:r++,i=a-1;break}}return new Gs(this,r,i,n)},V("shaka.media.SegmentIndex",Fs),Fs.forSingleSegment=zs,Fs.prototype.getIteratorForTime=Fs.prototype.Ib,Fs.prototype.updateEvery=Fs.prototype.ue,Fs.prototype.fit=Fs.prototype.Bc,Fs.prototype.evict=Fs.prototype.Ma,Fs.prototype.mergeAndEvict=Fs.prototype.rd,Fs.prototype.offset=Fs.prototype.offset,Fs.prototype.get=Fs.prototype.get,Fs.prototype.find=Fs.prototype.find,Fs.prototype.markImmutable=Fs.prototype.yi,Fs.prototype.release=Fs.prototype.release,Fs.prototype.getNumEvicted=Fs.prototype.getNumEvicted,Fs.prototype.getNumReferences=Fs.prototype.getNumReferences,Gs.prototype.Sc=function(e){this.reverse=e},Gs.prototype.Eh=function(){return this.h},Gs.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Gs.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},V("shaka.media.SegmentIterator",Gs),Gs.prototype.next=Gs.prototype.next,Gs.prototype.current=Gs.prototype.current,Gs.prototype.currentPosition=Gs.prototype.Eh,Gs.prototype.setReverse=Gs.prototype.Sc,v(Vs,Fs),(o=Vs.prototype).clone=function(){var e=new Vs;return e.g=this.g.slice(),e},o.release=function(){for(var e=c(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},o.Hb=function(e){for(var t=c(this.g),n=t.next();!n.done;n=t.next())n.value.Hb(e)},o.find=function(e){for(var t=0,n=c(this.g),r=n.next();!r.done;r=n.next()){var o=(r=r.value).find(e);if(null!=o)return o+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},o.get=function(e){for(var t=0,n=c(this.g),r=n.next();!r.done;r=n.next()){var o=(r=r.value).get(e-t);if(o)return o;o=r.getNumReferences(),t+=r.getNumEvicted()+o}return null},o.offset=function(){},o.Zd=function(){},o.Ma=function(){},o.rd=function(){},o.Bc=function(){},o.ue=function(){},V("shaka.media.MetaSegmentIndex",Vs),Vs.prototype.updateEvery=Vs.prototype.ue,Vs.prototype.fit=Vs.prototype.Bc,Vs.prototype.mergeAndEvict=Vs.prototype.rd,Vs.prototype.evict=Vs.prototype.Ma,Vs.prototype.merge=Vs.prototype.Zd,Vs.prototype.offset=Vs.prototype.offset,Vs.prototype.get=Vs.prototype.get,Vs.prototype.find=Vs.prototype.find,Vs.prototype.forEachTopLevelReference=Vs.prototype.Hb,Vs.prototype.release=Vs.prototype.release,Hs.prototype.release=function(){this.set(this.hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Hs.prototype.set=function(e){this.i=e,qs(this)},Hs.prototype.hc=function(){return this.g.hc()},Xs.prototype.release=function(){this.i.stop();for(var e=c(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},Zs.prototype.Ma=function(e,t){t=void 0!==t&&t;for(var n=c(this.h.keys()),r=n.next();!r.done;r=n.next())e>(r=r.value).endTime&&su(this,r);t&&iu(this)},Zs.prototype.Sc=function(e){this.o=e,this.g&&this.g.Sc(e)},uu.prototype.abort=function(){this.fe&&this.fe.abort()},v(cu,ho),cu.prototype.release=function(){this.g.clear(),this.h.stop(),ho.prototype.release.call(this)},v(fu,ho),fu.prototype.release=function(){this.g.clear(),ho.prototype.release.call(this)},fu.prototype.j=function(e){for(var t=c(this.g.values()),n=t.next();!n.done;n=t.next()){var r=(n=n.value).Pe;e:{for(var o=n.ud,i=o.length-1;0<=i;i--){var a=o[i];if(a.position<=e){o=a.Hc;break e}}o=null}i=o&&!(r===o||r&&o&&r.bandwidth==o.bandwidth&&r.audioSamplingRate==o.audioSamplingRate&&r.codecs==o.codecs&&r.contentType==o.contentType&&r.frameRate==o.frameRate&&r.height==o.height&&r.mimeType==o.mimeType&&r.channelsCount==o.channelsCount&&r.pixelAspectRatio==o.pixelAspectRatio&&r.width==o.width),a=o&&r&&o.label&&r.label&&r.label!==o.label;var s=o&&r&&o.language&&r.language&&r.language!==o.language;r=o&&r&&o.roles&&r.roles&&!De(r.roles,o.roles),(a||s||r)&&pu(this,e,o.contentType)&&(n.Pe=o,r=new co("audiotrackchange",new Map([["quality",o],["position",e]])),this.dispatchEvent(r)),i&&pu(this,e,o.contentType)&&(n.Pe=o,JSON.stringify(o),n=new co("qualitychange",new Map([["quality",o],["position",e]])),this.dispatchEvent(n))}},(o=bu.prototype).destroy=function(){return this.m.destroy()},o.configure=function(e){if(this.h=e,this.I=new eo({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(ou(t.W),t.W=null);for(var n=(t=c(this.o.keys())).next();!n.done;n=t.next())n=n.value,ou(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(En))&&t.W&&(ou(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(ou(t.W),t.W=null),n=(t=c(this.i.keys())).next();!n.done;n=t.next())(n=this.i.get(n.value)).W?(au(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(ou(n.W),n.W=null)):0<e.segmentPrefetchLimit&&(n.W=Au(this,n.stream));e.disableAudioPrefetch||function(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=c(e.l.variants),o=r.next(),i={};!o.done;i={lb:void 0},o=r.next())if(i.lb=o.value,i.lb.audio)if(e.o.has(i.lb.audio)){if(au(o=e.o.get(i.lb.audio),t),!(0<t&&n.some(function(e){return function(t){return er(e.lb.audio.language,t)}}(i)))){var a=e.i.get(i.lb.audio.type);o!==(a&&a.W)&&ou(o),e.o.delete(i.lb.audio)}}else 0>=t||!n.some(function(e){return function(t){return er(e.lb.audio.language,t)}}(i))||!(o=Au(e,i.lb.audio))||(i.lb.audio.segmentIndex||i.lb.audio.createSegmentIndex(),e.o.set(i.lb.audio,o))}(this)},o.start=function(e){var t=this;return O(function(n){if(1==n.g)return S(n,function(e,t){var n,r,o,i,a,s,u,l,f;return O(function(p){if(1==p.g){if(n=In,!e.j)throw new Tt(2,5,5006);return r=new Map,o=new Set,e.j.audio&&(r.set(n.X,e.j.audio),o.add(e.j.audio)),e.j.video&&(r.set(n.ga,e.j.video),o.add(e.j.video)),e.s&&(r.set(n.ua,e.s),o.add(e.s)),S(p,e.g.aa.init(r,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Mo(e.m),e.updateDuration(),i=c(r.keys()),a=i.next();!a.done;a=i.next())s=a.value,u=r.get(s),e.i.has(s)||(l=Cu(e,u),t.has(u.id)&&(eu(f=t.get(u.id),function(t,n,r){return Lu(t,n,r||null,e.h.retryParameters,e.g.Lb)}),l.W=f),e.i.set(s,l),Pu(e,l,0));k(p)})}(t,e||new Map),2);Mo(t.m),t.C=!0,k(n)})},o.Qc=function(){if(this.g)for(var e=this.g.Md(),t=c(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var o=this.g.aa;if(!(o=!o.C&&(r==En?null!=(o=o.g).g&&null!=o.h&&e>=o.g&&e<o.h:da(o=is(o,r),e)))){if(n.W&&(n.W.g=null),"audio"===n.type)for(var i=(o=c(this.o.values())).next();!i.done;i=o.next())i.value.g=null;n.ia=null,(null!=os(this.g.aa,r)||n.Qa)&&ku(this,n),n.ib&&(n.ib.abort(),n.ib=null),r===En&&(r=this.g.aa).H&&r.H.g(),n.Qc=!0}}},o.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.aa.Za(e):this.g.aa.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))},V("shaka.util.ConfigUtils",Bu),Bu.getDifferenceFromConfigObjects=Gu,Bu.convertToConfigObject=Fu,Bu.mergeConfigObjects=ju,V("shaka.util.FairPlayUtils",Vu),Vu.commonFairPlayResponse=function(e,t){if(2===e){try{var n=an(t.data)}catch(o){return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(o){}e&&(t.data=ye(vn(n)))}},Vu.expressplayFairPlayRequest=function(e,t){Wu(e,t)},Vu.conaxFairPlayRequest=function(e,t){Wu(e,t)},Vu.ezdrmFairPlayRequest=function(e,t){Wu(e,t)},Vu.verimatrixFairPlayRequest=function(e,t){2===e&&(e=gn(e=be(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=ln("spc="+e))},Vu.expressplayInitDataTransform=function(e,t,n){return Xu(e,t,n)},Vu.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=un(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var o=new ArrayBuffer(2*r.length);o=xe(o);for(var i=0,a=r.length;i<a;i++)o[i]=r.charCodeAt(i);return qu(t,o,n)},Vu.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,qu(e,n=un(e).split(";").pop(),t))},Vu.verimatrixInitDataTransform=function(e,t,n){return Xu(e,t,n)},Vu.initDataTransform=qu,Vu.defaultGetContentId=Hu,Vu.isFairPlaySupported=function(){var e;return O(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},C(t,2),S(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(I(t),t.return(!1))})},V("shaka.util.PlayerConfiguration",Ku),Ku.mergeConfigObjects=Yu,Ku.createDefault=$u,v(Zu,ho),(o=Zu.prototype).getStartTime=function(){return this.A},o.Dc=function(){return this.L},o.gf=function(){return this.h},o.getStats=function(){return this.Z},o.start=function(){var e,t=this;O(function(n){switch(n.g){case 1:return S(n,Promise.resolve(),2);case 2:return C(n,3),S(n,function(e){var t,n,r,o;return O(function(i){if(1==i.g)return rl(e,"manifest-parser"),e.j||(e.F=Zi(e.L,e.U),e.j=e.F(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,rl(e,"manifest"),e.h?i.u(2):S(i,e.j.start(e.L,e.ab),3);if(2!=i.g&&(e.h=i.h),n=new co("manifestparsed",void 0),e.dispatchEvent(n),0==e.h.variants.length)throw new Tt(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.h),r=Date.now()/1e3,o=r-t,e.Z.H=o,k(i)})}(t),5);case 5:return nl(t),S(n,function(e){var t,n,r;return O(function(o){switch(o.g){case 1:rl(e,"drm-engine"),e.qa=Date.now()/1e3,e.l=e.Fa(),e.C.g=e.l,e.l.configure(e.g.drm);var i=e.C;if(!hr(e.h.variants,i.h.restrictions,i.i)){o.u(2);break}return t=new co("trackschanged",void 0),S(o,Promise.resolve(),3);case 3:nl(e),e.dispatchEvent(t);case 2:return n=Lr(e.h.variants),S(o,Ai(e.l,n,e.h.offlineSessionIds),4);case 4:return nl(e),S(o,Wi(e.C,e.h),5);case 5:if(!o.h){o.u(0);break}return r=new co("trackschanged",void 0),S(o,Promise.resolve(),7);case 7:e.dispatchEvent(r),k(o)}})}(t),6);case 6:if(nl(t),t.o||(t.o=new $r(t.g.preferredAudioLanguage,t.g.preferredVariantRole,t.g.preferredAudioChannelCount,t.g.preferredVideoHdrLevel,t.g.preferSpatialAudio,t.g.preferredVideoLayout,t.g.preferredAudioLabel,t.g.preferredVideoLabel,t.g.mediaSource.codecSwitchingStrategy,t.g.manifest.dash.enableAudioGroups)),t.Ea){var r=t.g.abrFactory;t.B=r,t.i=r(),t.i.configure(t.g.abr)}if(t.Da){r=t.h.presentationTimeline.V();var o=Lr(t.h.variants);o=t.o.create(o),t.i.configure(t.g.abr),t.i.setVariants(Array.from(o.values())),(o=t.i.chooseVariant())&&(t.fa=o,o.video&&ol(t,o.video,r),o.audio&&ol(t,o.audio,r))}return S(n,void 0,7);case 7:nl(t),t.m.resolve(),E(n,0);break;case 3:e=I(n),t.m.reject(e),k(n)}})},o.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):ho.prototype.dispatchEvent.call(this,e)},o.onError=function(e){2===e.severity&&(this.m.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new co("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},o.configure=function(e,t){e=Fu(e,t),Yu(this.g,e)},o.getConfiguration=function(){return lr(this.g)},o.fj=function(){return this.m},o.destroy=function(){var e,t,n=this;return O(function(r){switch(r.g){case 1:if(n.s=!0,!n.j||n.ea){r.u(2);break}return S(r,n.j.stop(),2);case 2:if(!n.i||n.ba){r.u(4);break}return S(r,n.i.stop(),4);case 4:if(n.G&&!n.oa&&n.G.release(),!n.l||n.da){r.u(6);break}return S(r,n.l.destroy(),6);case 6:if(0<n.K.size&&!n.pa)for(e=c(n.K.values()),t=e.next();!t.done;t=e.next())ou(t.value);k(r)}})},V("shaka.media.PreloadManager",Zu),Zu.prototype.destroy=Zu.prototype.destroy,Zu.prototype.waitForFinish=Zu.prototype.fj,v(il,ho),il.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ho.prototype.release.call(this)},il.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=c(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var o=this.g.get(r),i=e<r.startTime?sl:e>r.endTime?ll:ul;this.g.set(r,i);for(var a=c(this.m),s=a.next();!s.done;s=a.next())(s=s.value).wc==o&&s.vc==i&&s.jc(r,t)}}};var sl=1,ul=2,ll=3;function cl(e,t,n){var r,o,i,a,s,u,l;return O(function(c){switch(c.g){case 1:var f=new st(e).Pa.split("/").pop().split(".");return r=1==f.length?"":f.pop().toLowerCase(),(o=fl[r])?c.return(o):(i=0,a=xo([e],n),C(c,2),a.method="HEAD",S(c,t.request(i,a).promise,4));case 4:s=c.h,o=s.headers["content-type"],E(c,3);break;case 2:if(!(u=I(c))||1002!=u.code&&1001!=u.code){c.u(3);break}return a.method="GET",S(c,t.request(i,a).promise,6);case 6:l=c.h,o=l.headers["content-type"];case 3:return c.return(o?o.toLowerCase().split(";").shift():"")}})}var fl={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function pl(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return pl(t,e)}).join("");var n=[],r=700<=e.fontWeight,o="italic"==e.fontStyle,i=e.textDecoration.includes("underline");return r&&n.push(["b"]),o&&n.push(["i"]),i&&n.push(["u"]),""==(o=e.color)&&t&&(o=t.color),r="",(o=dl(o))&&(r+="."+o),""==(o=e.backgroundColor)&&t&&(o=t.backgroundColor),(t=dl(o))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(e,t){var n=c(t);return"<"+(t=n.next().value)+(void 0===(n=n.next().value)?"":n)+">"+e+"</"+t+">"},e.payload)}function dl(e){var t=(e=e.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function hl(e,t){for(var n=[],r=(e=c(ml(e))).next();!r.done;r=e.next())if((r=r.value).isContainer)n.push.apply(n,f(hl(r.nestedCues,r)));else{var o=r.clone();o.nestedCues=[],o.payload=pl(r,t),n.push(o)}return n}function ml(e){for(var t=[],n=(e=c(e)).next(),r={};!n.done;r={Me:void 0},n=e.next())r.Me=n.value,t.some(function(e){return function(t){return Ne(e.Me,t)}}(r))||t.push(r.Me);return t}function gl(e){function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(r){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),"vertical-lr"==e.writingMode?n.vertical="lr":"vertical-rl"==e.writingMode&&(n.vertical="rl"),1==e.lineInterpretation&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}function vl(e,t){this.g=null;for(var n=c(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())"metadata"!==(r=r.value).kind&&"chapters"!==r.kind&&(r.mode="disabled",r.label==t&&(this.g=r));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}function yl(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=c(Array.from(e.cues)),o=r.next();!o.done;o=r.next())(o=o.value)&&t(o)&&e.removeCue(o);e.mode=n}function bl(){}function xl(){}function wl(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Sl(t,n,r){var o=this;this.m=!1,this.h=[],this.A=t,this.s=n,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),r&&r.captionsUpdatePeriod||le("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new _t(function(){o.A.paused||Cl(o)}).Sa(r&&r.captionsUpdatePeriod?r.captionsUpdatePeriod:.25),this.i=new Map,this.j=new ne,this.j.D(document,"fullscreenchange",function(){Cl(o,!0)}),this.j.D(this.A,"seeking",function(){Cl(o,!0)}),this.j.D(this.A,"resize",function(){var e=o.A,t=e.videoWidth;e=e.videoHeight,o.l=t&&e?t/e:null}),this.o=null,"ResizeObserver"in e&&(this.o=new ResizeObserver(function(){Cl(o,!0)}),this.o.observe(this.g)),this.B=new Map}function Tl(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function kl(e,t,n,r,o){for(var i=!1,a=[],s=[],u=(t=c(t)).next();!u.done;u=t.next()){u=u.value,o.push(u);var l=e.i.get(u),f=u.startTime<=r&&u.endTime>r,p=l?l.qh:null;l&&(a.push(l.Oe),l.qc&&a.push(l.qc),f||(i=!0,e.i.delete(u),l=null)),f&&(s.push(u),l?Tl(e,p)||(i=!0):(Al(e,u,o),p=(l=e.i.get(u)).qh,i=!0)),0<u.nestedCues.length&&p&&kl(e,u.nestedCues,p,r,o),o.pop()}if(i){for(o=(r=c(a)).next();!o.done;o=r.next())(o=o.value).parentElement&&o.parentElement.removeChild(o);for(s.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),r=(s=c(s)).next();!r.done;r=s.next())(r=e.i.get(r.value)).qc?(r.qc.contains(n)&&r.qc.removeChild(n),n.appendChild(r.qc),r.qc.appendChild(r.Oe)):n.appendChild(r.Oe)}}function Cl(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||void 0!==t&&t){for(var r=(t=c(e.B.values())).next();!r.done;r=t.next())wl(r.value);wl(e.g),e.i.clear(),e.B.clear()}e.m&&kl(e,e.h,e.g,n,[])}}function Al(e,t,n){var r=1<n.length,o=r?"span":"div";t.lineBreak&&(o="br"),t.rubyTag&&(o=t.rubyTag),r=!r&&0<t.nestedCues.length;var i=document.createElement(o);if("br"!=o&&function(e,t,n,r,o){var i=t.style,a=0==n.nestedCues.length,s=1<r.length;i.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,function(e){return" ".repeat(e.length)});if(i.webkitTextStrokeColor=n.textStrokeColor,i.webkitTextStrokeWidth=n.textStrokeWidth,i.color=n.color,i.direction=n.direction,i.opacity=n.opacity,i.paddingLeft=El(n.linePadding,n,e.s),i.paddingRight=El(n.linePadding,n,e.s),i.textCombineUpright=n.textCombineUpright,i.textShadow=n.textShadow,n.backgroundImage)i.backgroundImage="url('"+n.backgroundImage+"')",i.backgroundRepeat="no-repeat",i.backgroundSize="contain",i.backgroundPosition="center",n.backgroundColor&&(i.backgroundColor=n.backgroundColor),i.width="100%",i.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),!o&&((t=Il(r,function(e){return e.backgroundColor}))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=Il(r,function(e){return e.fontFamily}))&&(l.style.fontFamily=t),u&&(l.textContent=u)}s&&!r[r.length-1].isContainer?i.display="inline":(i.display="flex",i.flexDirection="column",i.alignItems="center","left"==n.textAlign||"start"==n.textAlign?(i.width="100%",i.alignItems="start"):"right"!=n.textAlign&&"end"!=n.textAlign||(i.width="100%",i.alignItems="end"),i.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),a||(i.margin="0"),i.fontFamily=n.fontFamily,i.fontWeight=n.fontWeight.toString(),i.fontStyle=n.fontStyle,i.letterSpacing=n.letterSpacing,i.fontSize=El(n.fontSize,n,e.s),null!=(r=n.line)&&((a=n.lineInterpretation)==He&&(a=1,s=16,e.l&&1>e.l&&(s=32),r=0>r?100+r/s*100:r/s*100),1==a&&(i.position="absolute",n.writingMode==Ve?(i.width="100%",n.lineAlign==qe?i.top=r+"%":"end"==n.lineAlign&&(i.bottom=100-r+"%")):"vertical-lr"==n.writingMode?(i.height="100%",n.lineAlign==qe?i.left=r+"%":"end"==n.lineAlign&&(i.right=100-r+"%")):(i.height="100%",n.lineAlign==qe?i.right=r+"%":"end"==n.lineAlign&&(i.left=100-r+"%")))),i.lineHeight=n.lineHeight,e=function(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Ue?n:"left"===e||"start"===e&&t===Ge||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===Ge?"line-right":"center"}(n),"line-left"==e?(i.cssFloat="left",null!==n.position&&(i.position="absolute",n.writingMode==Ve?(i.left=n.position+"%",i.width="auto"):i.top=n.position+"%")):"line-right"==e?(i.cssFloat="right",null!==n.position&&(i.position="absolute",n.writingMode==Ve?(i.right=100-n.position+"%",i.width="auto"):i.bottom=n.position+"%")):null!==n.position&&50!=n.position&&(i.position="absolute",n.writingMode==Ve?(i.left=n.position+"%",i.width="auto"):i.top=n.position+"%"),i.textAlign=n.textAlign,i.textDecoration=n.textDecoration.join(" "),i.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&i.writingMode==n.writingMode||(i.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Ve?i.width=n.size+"%":i.height=n.size+"%")}(e,i,t,n,r),n=null,t.region&&t.region.id){var a=t.region,s=e.l===4/3?2.5:1.9;if(n=a.id+"_"+a.width+"x"+a.height+(a.heightUnits==Ie?"%":"px")+"-"+a.viewportAnchorX+"x"+a.viewportAnchorY+(a.viewportAnchorUnits==Ie?"%":"px"),e.B.has(n))n=e.B.get(n);else{o=document.createElement("span");var u=a.heightUnits==Ie?"%":"px",l=a.widthUnits==Ie?"%":"px",c=a.viewportAnchorUnits==Ie?"%":"px";o.id="shaka-text-region---"+n,o.classList.add("shaka-text-region"),o.style.position="absolute";var f=a.height,p=a.width;2===a.heightUnits&&(f=5.33*a.height,u="%"),2===a.widthUnits&&(p=a.width*s,l="%"),o.style.height=f+u,o.style.width=p+l,2===a.viewportAnchorUnits?(s=a.viewportAnchorY/75*100,u=a.viewportAnchorX/(e.l===4/3?160:210)*100,s-=a.regionAnchorY*f/100,u-=a.regionAnchorX*p/100,o.style.top=s+"%",o.style.left=u+"%"):(o.style.top=a.viewportAnchorY-a.regionAnchorY*f/100+c,o.style.left=a.viewportAnchorX-a.regionAnchorX*p/100+c),0!==a.heightUnits&&0!==a.widthUnits&&0!==a.viewportAnchorUnits&&(a=Math.max(0,Math.min(100-(parseInt(o.style.width.slice(0,-1),10)||0),parseInt(o.style.left.slice(0,-1),10)||0)),o.style.top=Math.max(0,Math.min(100-(parseInt(o.style.height.slice(0,-1),10)||0),parseInt(o.style.top.slice(0,-1),10)||0))+"%",o.style.left=a+"%"),o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.B.set(n,o),n=o}}o=i,r&&((o=document.createElement("span")).classList.add("shaka-text-wrapper"),o.style.backgroundColor=t.backgroundColor,o.style.lineHeight="normal",i.appendChild(o)),e.i.set(t,{Oe:i,qh:o,qc:n})}function El(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var o=r.value;switch(r.unit){case"%":return o/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*o/t.cellResolution.rows+"px";default:return e}}function Il(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||0===r)return r}return null}function Ml(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}function Rl(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:1,sf:t.m,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function _l(e,t,n){n=void 0===n?{}:n;var r=void 0===r?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,Rl(e)),n.pr=e.h.eb();var o=n.ot===Ul||n.ot===Bl;if(e.j&&o&&(n.bs=!0,n.su=!0,e.j=!1),null==n.su&&(n.su=e.l),e=function(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(e,r){return n.includes(r)&&(e[r]=t[r]),e},{}):t}(e,n),r)r=function(e){for(var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],o=[{},{},{},{}],i={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},a=(t=c(t)).next();!a.done;a=t.next())a=a.value,o[null!=i[a]?i[a]:1][a]=e[a];for(e=0;e<o.length;e++)(i=Dl(o[e]))&&(n["CMCD-"+r[e]]=i);return n}(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var i=Dl(e);i&&(t.uris=t.uris.map(function(e){return Pl(e,i)}))}}}function Ll(e,t){if(!(t=e.h.wb()[t]).length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):0}function Dl(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function r(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var o=[],i={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},a=Object.keys(e||{}).sort(),s=(a=c(a)).next();!s.done;s=a.next()){var u=e[s=s.value];if(r(u)&&("v"!==s||1!==u)&&("pr"!=s||1!==u)){var l,f=i[s];f&&(u=f(u)),l="string"===(f=x(u))&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===f?s:"symbol"===f?s+"="+u.description:s+"="+u,o.push(l)}}return o.join(",")}function Pl(e,t){return!t||e.includes("offline:")?e:((e=new st(e)).g.set("CMCD",t),e.toString())}(o=vl.prototype).configure=function(){},o.remove=function(e,t){return!!this.g&&(yl(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},o.append=function(e){var t=hl(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var r=(t=c(t)).next(),o={};!r.done;o={hd:void 0},r=t.next())o.hd=r.value,e.some(function(e){return function(t){return t.startTime==e.hd.startTime&&t.endTime==e.hd.endTime&&t.text==e.hd.payload}}(o))||(r=gl(o.hd))&&n.push(r);for(t=(e=c(e=n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}))).next();!t.done;t=e.next())this.g.addCue(t.value)},o.destroy=function(){return this.g&&(yl(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},o.isTextVisible=function(){return"showing"==this.g.mode},o.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},V("shaka.text.SimpleTextDisplayer",vl),vl.prototype.setTextVisibility=vl.prototype.setTextVisibility,vl.prototype.isTextVisible=vl.prototype.isTextVisible,vl.prototype.destroy=vl.prototype.destroy,vl.prototype.append=vl.prototype.append,vl.prototype.remove=vl.prototype.remove,vl.prototype.configure=vl.prototype.configure,(o=bl.prototype).configure=function(){},o.remove=function(){},o.append=function(){},o.destroy=function(){},o.isTextVisible=function(){return!1},o.setTextVisibility=function(){},V("shaka.text.StubTextDisplayer",bl),bl.prototype.setTextVisibility=bl.prototype.setTextVisibility,bl.prototype.isTextVisible=bl.prototype.isTextVisible,bl.prototype.destroy=bl.prototype.destroy,bl.prototype.append=bl.prototype.append,bl.prototype.remove=bl.prototype.remove,bl.prototype.configure=bl.prototype.configure,V("shaka.util.Dom",xl),xl.removeAllChildren=wl,(o=Sl.prototype).configure=function(e){this.C&&this.C.Sa(e.captionsUpdatePeriod)},o.append=function(e){for(var t=[].concat(f(this.h)),n=(e=c(ml(e))).next(),r={};!n.done;r={Ne:void 0},n=e.next())r.Ne=n.value,t.some(function(e){return function(t){return Ne(t,e.Ne)}}(r))||this.h.push(r.Ne);Cl(this)},o.destroy=function(){return this.g?(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null),Promise.resolve()):Promise.resolve()},o.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(n){return n.startTime<e||n.endTime>=t}),Cl(this,n>this.h.length),!0},o.isTextVisible=function(){return this.m},o.setTextVisibility=function(e){this.m=e},V("shaka.text.UITextDisplayer",Sl),Sl.prototype.setTextVisibility=Sl.prototype.setTextVisibility,Sl.prototype.isTextVisible=Sl.prototype.isTextVisible,Sl.prototype.remove=Sl.prototype.remove,Sl.prototype.destroy=Sl.prototype.destroy,Sl.prototype.append=Sl.prototype.append,Sl.prototype.configure=Sl.prototype.configure,V("shaka.text.WebVttGenerator",function(){}),Ml.prototype.configure=function(e){this.g=e};var Ol="m",Nl="a",Ul="v",Bl="av",jl="i",Fl="c",zl="tt";function Gl(e){this.h=e,this.g=null}function Vl(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}V("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Kj:"s",OTHER:"o"}),(o=Gl.prototype).configure=function(e){this.h=e},o.zg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(ql)?1e3*this.g.get(ql):null},o.xg=function(){return this.h.enabled&&this.g&&this.g.has(Hl)?1e3*this.g.get(Hl):null},o.Yh=function(){return this.h.enabled&&this.g&&this.g.has(Xl)?this.g.get(Xl):null},o.Zh=function(){return this.h.enabled&&this.g&&this.g.has(Wl)?this.g.get(Wl):null},o.getBandwidthEstimate=function(e){var t=this.xg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e},V("shaka.util.CmsdManager",Gl),Gl.prototype.getBandwidthEstimate=Gl.prototype.getBandwidthEstimate,Gl.prototype.getRoundTripTime=Gl.prototype.Zh,Gl.prototype.getResponseDelay=Gl.prototype.Yh,Gl.prototype.getEstimatedThroughput=Gl.prototype.xg,Gl.prototype.getMaxBitrate=Gl.prototype.zg;var Hl="etp",ql="mb",Xl="rd",Wl="rtt";function Kl(){this.g=null,this.h=[]}function $l(e,t){return O(function(n){if(1==n.g)return e.g?S(n,new Promise(function(t){return e.h.push(t)}),2):n.u(2);e.g=t,k(n)})}function Yl(t,n){ho.call(this);var r=this;this.l=qc,this.de=this.h=null,this.oa=!1,this.qe=new ne,this.gd=new ne,this.m=new ne,this.Fa=new ne,this.ub=new ne,this.C=this.G=this.B=this.H=null,this.te=0,this.Z=new Kl,this.pa=this.ag=this.da=this.i=this.ab=this.F=this.j=this.Zc=this.K=this.eg=this.ea=this.N=this.dd=this.L=this.he=this.I=this.Fb=null,this.Ea=!1,this.xa=this.o=null,this.cg=1e9,this.qd=[],this.U=NaN,this.g=xc(this),this.R=null,this.ze=-1,this.Da=null,this.fa={width:1/0,height:1/0},this.be=new Xi(this.g,this.fa,null),this.ke=[],this.s=null,this.za=new $r(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Db=this.g.preferredTextLanguage,this.pd=this.g.preferredTextRole,this.od=this.g.preferForcedSubs,this.md=[],n&&n(this),this.N=function(e){return new Ml({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},wb:function(){return e.wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},eb:function(){return e.eb()},xb:function(){return e.xb()},ic:function(){return e.ic()},V:function(){return e.V()}},e.g.cmcd)}(this),this.ea=new Gl(this.g.cmsd),this.H=lc(this),this.H.Pf(this.g.streaming.forceHTTP),this.H.Qf(this.g.streaming.forceHTTPS),this.Gb=this.ba=this.A=null,this.Ce=!1,this.dg=new _t(function(){return O(function(e){return 1==e.g?r.ba?S(e,r.Rb(r.Gb,!0),3):e.u(0):4!=e.g?S(e,r.load(r.ba),4):(r.Ce?r.Gb.pause():r.Gb.play(),r.ba=null,r.Ce=!1,void k(e))})}),Yc&&(this.A=Yc(),this.A.configure(this.g.ads),this.ub.D(this.A,"ad-content-pause-requested",function(e){var t;return O(function(n){if(1==n.g)return r.dg.stop(),r.ba?n.u(0):(r.Gb=r.h,r.Ce=r.h.ended,t=e.saveLivePosition||!1,S(n,r.qg(!0,t),3));r.ba=n.h,k(n)})}),this.ub.D(this.A,"ad-content-resume-requested",function(e){if(e=e.offset||0,r.ba){var t=r.ba;t.A&&e&&(t.A+=e)}r.dg.Y(.1)}),this.ub.D(this.A,"ad-content-attach-requested",function(){return O(function(e){return r.h||!r.Gb?e.u(0):S(e,r.Rb(r.Gb,!0),0)})})),this.qe.D(e,"online",function(){Oc(r),r.If()}),this.je=new _t(function(){for(var e=Date.now()/1e3,t=!1,n=!0,o=c(r.i.variants),i=o.next();!i.done;i=o.next())0<(i=i.value).disabledUntilTime&&i.disabledUntilTime<=e&&(i.disabledUntilTime=0,t=!0),0<i.disabledUntilTime&&(n=!1);n&&r.je.stop(),t&&Ec(r,!1,void 0,!1,!1)}),this.qa=null,t&&(le("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Rb(t,!0))}function Ql(e){null!=e.K&&(Ya(e.K),e.K.release(),e.K=null)}function Jl(e,t){return new co(e,t)}function Zl(e,t){e.dispatchEvent(Jl("onstatechange",(new Map).set("state",t)))}function ec(e,t){var n;return O(function(r){return 1==r.g?(n=++e.te,S(r,$l(e.Z,t),2)):n!=e.te?(e.Z.release(),r.return(!0)):r.return(!1)})}function tc(e,t){var n,r;return t=void 0!==t&&t,O(function(o){if(1==o.g)return n=null,e.i&&e.F&&e.ab&&e.da?(r=e.h.currentTime,e.V()&&!t&&(r=null),S(o,rc(e,e.da,r,e.ag,!0,!1,!1),3)):o.u(2);if(2!=o.g){n=o.h,e.ke.push(n),e.F&&e.F.setMediaElement&&e.F.setMediaElement(null);var i=n,a=e.F,s=e.ab;i.h=e.i,i.j=a,i.F=s,i=n,a=e.xa,i.i=e.o,i.B=a,n.o=e.za,n.start(),e.i=null,e.F=null,e.ab=null,e.o=null,e.xa=null}return o.return(n)})}function nc(e,t,n,r,o){var i,a,s;return o=void 0!==o&&o,O(function(u){return 1==u.g?r?u.u(2):S(u,oc(e,t),3):(2!=u.g&&(r=u.h),function(e,t){if(!Lt())return!0;if(t){if(""==(e.h||Zt()).canPlayType(t))return!1;if(!Lt()||!(t in ea))return!0;if(zn(t))return Vt()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}(e,r)?u.return(null):(i=!1,a=!0,o&&(e.o&&e.xa==e.g.abrFactory&&(a=!1),e.h&&"AUDIO"===e.h.nodeName&&(i=!0)),s=rc(e,t,n,r||null,!o,i,a),o||(s=s.then(function(t){return e.ke.push(t),t})),u.return(s)))})}function rc(e,t,n,r,o,i,a){var s,u,l,f,p,d,h,m,g,v,y,b,x;return o=void 0===o||o,i=void 0!==i&&i,a=void 0===a||a,O(function(w){return 1==w.g?(s=null,u=lr(e.g),i&&(u.manifest.disableVideo=!0),l=function(){return s.R&&s.s?null:s},f=function(){return l()?l().getConfiguration():e.g},p=function(t,n){l()?s.configure(t,n):e.configure(t,n)},1/0!=e.fa.width||1/0!=e.fa.height?w.u(2):S(w,tn(),3)):(2!=w.g&&(d=w.h,e.fa.width=d.width,e.fa.height=d.height),h=new Xi(u,e.fa,null),m={networkingEngine:e.H,filter:function(e){var t;return O(function(n){return 1==n.g?S(n,Wi(h,e),2):4!=n.g?n.h?(t=Jl("trackschanged"),S(n,Promise.resolve(),4)):n.u(0):(s.dispatchEvent(t),void k(n))})},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,r=c(t.textStreams),o=r.next();!o.done;o=r.next())"application/cea-608"!=(o=o.value).mimeType&&"application/cea-708"!=o.mimeType||n.add(o.originalId);for(r=c(t.variants),o=r.next();!o.done;o=r.next())if((o=o.value.video)&&o.closedCaptions)for(var i=c(o.closedCaptions.keys()),a=i.next();!a.done;a=i.next())if(a=a.value,!n.has(a)){var s=a.startsWith("CC")?"application/cea-608":"application/cea-708",u=new Vs,l=o.closedCaptions.get(a);s={id:e.cg++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:En,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ln(s,"")])},t.textStreams.push(s),n.add(a)}}(e,t)},onTimelineRegionAdded:function(e){var t=s.G;e:{for(var n=c(t.g),r=n.next();!r.done;r=n.next())if((r=r.value).schemeIdUri==e.schemeIdUri&&r.id==e.id&&r.startTime==e.startTime&&r.endTime==e.endTime){n=r;break e}n=null}null==n&&(t.g.add(e),e=new co("regionadd",new Map([["region",e]])),t.dispatchEvent(e))},onEvent:function(e){return s.dispatchEvent(e)},onError:function(e){return s.onError(e)},isLowLatencyMode:function(){return f().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return f().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){p("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&s.R&&e.j.updateDuration()},newDrmInfo:function(e){var t=s.l,n=t?t.g:null;n&&t.s&&$i(h,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.V());s.dispatchEvent(Jl("manifestupdated",t)),el(s,!1,function(){e.A&&e.A.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(t,n,r,o){var i=t;"com.apple.hls.interstitial"==t&&(i="com.apple.quicktime.HLS",t={startTime:n,endTime:r,values:o},e.A)&&e.A.onInterstitialMetadata(e,e.h,t),t=(o=c(o)).next();for(var a={};!t.done;a={Pg:void 0},t=o.next())a.Pg=t.value,el(s,!1,function(t){return function(){sc(e,n,r,i,t.Pg)}}(a))},disableStream:function(t){return e.disableStream(t,e.g.streaming.maxDisabledTime)}},(g=new cu(function(){return e.Ob()})).addEventListener("regionadd",function(t){var n=t.region;Uc(e,"timelineregionadded",n,s),el(s,!1,function(){e.A&&e.A.onDashTimedMetadata(n)})}),v=null,u.streaming.observeQualityChanges&&((v=new fu(function(){return e.wb()})).addEventListener("qualitychange",function(t){Bc(e,t.quality,t.position)}),v.addEventListener("audiotrackchange",function(t){Bc(e,t.quality,t.position,!0)})),y=!0,b={Lb:e.H,onError:function(e){return s.onError(e)},ee:function(t){el(s,!0,function(){var n=t,r=Jl("keystatuschanged");e.dispatchEvent(r);var o=Object.keys(n);1==o.length&&""==o[0]&&(o=["00"],n={"00":n[""]}),r=1==o.length&&"00"==o[0];var i=!1;if(o.length)for(var a=(o=c(e.i.variants)).next();!a.done;a=o.next()){var s=[];(a=a.value).audio&&s.push(a.audio),a.video&&s.push(a.video);for(var u=(s=c(s)).next();!u.done;u=s.next()){var l=u.value;if(u=a.allowedByKeySystem,l.keyIds.size){a.allowedByKeySystem=!0;for(var f=(l=c(l.keyIds)).next();!f.done;f=l.next())f=f.value,((f=n[r?"00":f])||e.B.F)&&(a.allowedByKeySystem=a.allowedByKeySystem&&!!f&&!Qi.includes(f))}u!=a.allowedByKeySystem&&(i=!0)}}i&&(Rc(e),!Ac(e))||(n=e.j.j)&&!n.allowedByKeySystem&&Ec(e)})},onExpirationUpdated:function(e,t){var n=Jl("expirationupdated");s.dispatchEvent(n),(n=s.j)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){s.dispatchEvent(t),"drmsessionupdate"==t.type&&y&&(y=!1,t=Date.now()/1e3-s.qa,(e.s||s.getStats()).j=t,e.K&&Ya(e.K))}},x=lc(e,l),bo(e.H,x),s=new Zu(t,r,n,{config:u,wi:m,Fi:g,Ei:v,yc:function(){return e.yc(b)},vi:h,networkingEngine:x,yh:o,xh:a}),w.return(s))})}function oc(e,t){var n,r;return O(function(o){return 1==o.g?(n=e.g.manifest.retryParameters,S(o,cl(t,e.H,n),2)):("application/x-mpegurl"==(r=o.h)&&Vt()&&(r="application/vnd.apple.mpegurl"),o.return(r))})}function ic(e){var t,n,r,o,i;return O(function(a){if(1==a.g)return Zl(e,"media-source"),t=e.g.textDisplayFactory,(n=t()).configure?n.configure(e.g.textDisplayer):le("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.bg=t,r=function(e,t,n,r){return new Ja(e,t,n,r)}(e.h,n,{Qh:function(){return e.keySystem()},onMetadata:function(t,n,r){ac(e,t,n,r)}},e.K),r.configure(e.g.mediaSource),o=e.g.manifest,i=o.segmentRelativeVttTiming,r.fa=i,S(a,r.L,2);e.G=r,k(a)})}function ac(e,t,n,r){for(var o=(t=c(t)).next();!o.done;o=t.next())if((o=o.value).data&&"number"==typeof o.cueTime&&o.frames){var i=o.cueTime+n,a=r;a&&i>a&&(a=i);for(var s=c(o.frames),u=s.next();!u.done;u=s.next())sc(e,i,a,"org.id3",u.value);e.A&&e.A.onHlsTimedMetadata(o,i)}}function sc(e,t,n,r,o){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",o),e.dispatchEvent(Jl("metadata",t))}function uc(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new _t(function(){t.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}function lc(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function r(e){t()?el(t(),!0,e):e()}return t||(t=function(){return null}),new vo(function(n,r,o,i){var a=t()?t().i:e.o;a&&a.segmentDownloaded(n,r,o,i)},function(t,o,i){n(Jl("downloadheadersreceived",o=(new Map).set("headers",t).set("request",o).set("requestType",i))),r(function(){if(e.ea){var n=e.ea;if(n.h.enabled){var r=t["cmsd-static"];if(r)try{var o=new Map,i=r.split(",");for(r=0;r<i.length;r++){var a=i[r].split("=");o.set(a[0],Vl(a[1]))}}catch(f){}if(o=t["cmsd-dynamic"]){try{var s=new Map,u=o.split(";");for(o=1;o<u.length;o++){var l=u[o].split("=");s.set(l[0],Vl(l[1]))}var c=s}catch(f){c=null}c&&(n.g=c)}}}})},function(e,t,r,o){n(Jl("downloadfailed",e=(new Map).set("request",e).set("error",t).set("httpResponseCode",r).set("aborted",o)))},function(t,n,o){r(function(){var r=e.N,i=o;if(i=void 0===i?{}:i,r.g.enabled)if("HEAD"===n.method)_l(r,n);else switch(t){case 0:try{if(r.g.enabled){if(i.type){e:{switch(i.type){case 4:var a="d";break e;case 3:case 2:a="h";break e;case 5:a="s";break e}a=void 0}r.m=a}_l(r,n,{ot:Ol,su:!r.i})}}catch(I){J("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",I)}break;case Co:try{if(r.g.enabled){var s=i.segment;a=0,s&&(a=s.endTime-s.startTime);var u={d:1e3*a,st:r.h.V()?"l":"v"};u.ot=function(e){if(0===e.type)return jl;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?Bl:Ul;if("audio"==t)return Nl;if("text"==t)return"application/mp4"===e.mimeType?zl:Fl}}(i);var l=u.ot===Ul||u.ot===Nl||u.ot===Bl||u.ot===zl,f=i.stream;if(f){var p=r.h.eb();if(l&&(u.bl=function(e,t){if(!(t=e.h.wb()[t]).length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}(r,f.type),u.ot!==zl)){var d=Ll(r,f.type);u.dl=p?d/Math.abs(p):d}if(f.bandwidth&&(u.br=f.bandwidth/1e3),f.segmentIndex&&s){var h=f.segmentIndex.Ib(s.endTime,!0,0>p);if(h){var m=h.next().value;if(m&&m!=s){if(!De(s.M(),m.M())){var g=m.M()[0],v=n.uris[0],y=new URL(g),b=new URL(v);if(y.origin!==b.origin)var x=g;else{for(var w=y.pathname.split("/").slice(1),S=b.pathname.split("/").slice(1,-1);w[0]===S[0];)w.shift(),S.shift();for(;S.length;)S.shift(),w.unshift("..");x=w.join("/")}u.nor=x}if((m.Ha||m.sa)&&(s.Ha!=m.Ha||s.sa!=m.sa)){var T=m.Ha+"-";m.sa&&(T+=m.sa),u.nrr=T}}}var k=r.h.eb()||1,C=Ll(r,f.type)||500,A=f.bandwidth,E=A?A*(s.endTime-s.startTime)/1e3/(C/k/1e3)*r.g.rtpSafetyFactor:NaN;isNaN(E)||(u.rtp=E)}}l&&u.ot!==zl&&(u.tb=function(e,t){var n=e.h.ic();if(!n.length)return NaN;e=n[0];for(var r=(n=c(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case Ul:return e.videoBandwidth||NaN;case Nl:return e.audioBandwidth||NaN;default:return e.bandwidth}}(r,u.ot)/1e3),_l(r,n,u)}}catch(I){J("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",I)}break;case 2:case 5:case 6:_l(r,n,{ot:"k"});break;case 4:_l(r,n,{ot:"o"})}})},function(n,r,o,i){(n=t()?t().j:e.F)&&n.banLocation&&n.banLocation(i)},function(n,r){if(r.data){r=r.data.byteLength;var o=t()?t().getStats():e.s;o&&(o.Cd=isNaN(o.Cd)?r:o.Cd+r,0===n&&(o.Hg=r))}})}function cc(e,t,n){e.L=new Yr,e.L.g=Jr,Qr(e.L,n,Math.min(.5,n/2)),wc(e),e.he=new _t(function(){fc(e)}).Sa(.25),e.m.D(t,"waiting",function(){return fc(e)}),e.m.D(t,"stalled",function(){return fc(e)}),e.m.D(t,"canplaythrough",function(){return fc(e)}),e.m.D(t,"progress",function(){return fc(e)})}function fc(e){switch(e.l){case Wc:if(e.h.ended)var t=!0;else{var n=pa(e.h.buffered);t=null!=n&&n>=e.h.duration-1}break;case Xc:e:if(e.h.ended||ns(e.G))t=!0;else{if(e.i.presentationTimeline.V()){n=e.i.presentationTimeline.Wb();var r=pa(e.h.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=ha(e.h.buffered,e.h.currentTime);var o=t,i=(n=e.L).i.get(n.g);t=n.g,r=o||r>=i?Zr:Jr,n.g=r,(t=t!=r)&&r===Zr&&(n.h=Date.now()),t&&wc(e)}function pc(e){if(e.be=new Xi(e.g,e.fa,e.B),e.F){var t=lr(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0),e.F.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=Hc&&Ki(e.be,e.i)&&Rc(e)}catch(i){Nc(e,i)}e.o&&Ac(e),!(t=e.j.j)||t.allowedByApplication&&t.allowedByKeySystem||Ec(e)}if(e.H&&(e.H.Pf(e.g.streaming.forceHTTP),e.H.Qf(e.g.streaming.forceHTTPS)),e.G)if(e.G.configure(e.g.mediaSource),e.G.fa=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.bg!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):le("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.G,o=r.F;r.F=n,o&&(n.setTextVisibility(o.isTextVisible()),o.destroy()),r.g&&(r.g.j=n),e.bg=t,e.j&&(n=(t=e.j).i.get(En))&&Tu(t,n.stream,!0,0,!0)}else(t=e.G.F).configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),Pc(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Qr(e.L,t,Math.min(.5,t/2))),e.i&&Fc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}function dc(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{dc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function hc(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function mc(e){return Array.from(e.h.textTracks).filter(function(e){return"chapters"==e.kind})}function gc(e,t){var n;return O(function(r){switch(r.g){case 1:return C(r,2),S(r,cl(t,e.H,e.g.streaming.retryParameters),4);case 4:n=r.h,E(r,3);break;case 2:I(r);case 3:if(n)return r.return(n);throw new Tt(1,2,2011,t)}})}function vc(e,t,n,r,o,i,a){var s,u,l,c;return O(function(f){if(1==f.g)return"text/vtt"!=o||a.length?S(f,yc(e,t,e.H,e.g.streaming.retryParameters),3):f.u(2);2!=f.g&&(s=f.h,u=bc(e,s,o,a),l=new Blob([u],{type:"text/vtt"}),t=ys(l),o="text/vtt"),c=document.createElement("track");var p=e.N,d=t;try{if(p.g.enabled){var h=Rl(p);h.ot=Fl,h.su=!0;var m=Pl(d,Dl(h))}else m=d}catch(sa){J("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",sa),m=d}return c.src=m,c.label=i,c.kind=r,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),f.return(c)})}function yc(e,t,n,r){var o,i,a;return O(function(s){if(1==s.g){o=Co,(i=xo([t],r)).method="GET";var u=e.N;try{u.g.enabled&&_l(u,i,{ot:Fl,su:!0})}catch(l){J("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return S(s,n.request(o,i).promise,2)}return a=s.h,s.return(a.data)})}function bc(e,t,n,r){var o=$n[n];if(o)return n=o(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=be(t),function(e,t){function n(e){for(var n=e,r=c(t),o=r.next();!o.done;o=r.next())(o=o.value).end&&o.start<e&&(n+=o.end-o.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(r=Math.floor(n/60%60))?"0":"")+r+":"+(10>(o=Math.floor(n%60))?"0":"")+o+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}var r=hl(e);e="WEBVTT\n\n";for(var o=(r=c(r)).next();!o.done;o=r.next())e+=n((o=o.value).startTime)+" --\x3e "+n(o.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case Be:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(o)+"\n",e+=o.payload+"\n\n";return e}(t=n.parseMedia(t,e,null),r);throw new Tt(2,2,2014,n)}function xc(e){var t=$u();return t.streaming.failureCallback=function(t){if(e.V()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.If(n))}},t.textDisplayFactory=function(){if(e.de){var t=e.getConfiguration();return new Sl(e.h,e.de,t.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new vl(e.h,"Shaka Player TextTrack"):new bl},t}function wc(e){var t=e.pf();if(e.s&&e.L&&e.C){var n=e.I;if(n.j=t,qs(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),Tc(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.ze<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,o=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.ze*o,n-r))}}t=(new Map).set("buffering",t),e.dispatchEvent(Jl("buffering",t))}function Sc(e){var t=e.h.playbackRate;0!=t&&(e.I&&e.I.set(t),t=Jl("ratechange"),e.dispatchEvent(t))}function Tc(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Jr?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var r=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var o=Date.now()/1e3;t.g.duration=o-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:o,state:r,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Jl("statechanged",n)))}}function kc(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,o=e.vg();o<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.wd(r):1==o&&t!==e.I.hc()&&e.Tc()}if(n&&(n=e.Ob(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){r=e.g.streaming.liveSync.targetLatencyTolerance,o=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var i=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var a=e.g.streaming.liveSync.targetLatency,s=a+r,u=Math.max(0,a-r),l=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(a=e.i.serviceDescription.targetLatency,null!=e.i.serviceDescription.targetLatency?s=e.i.serviceDescription.targetLatency+r:null!=e.i.serviceDescription.maxLatency&&(s=e.i.serviceDescription.maxLatency),null!=e.i.serviceDescription.targetLatency?u=Math.max(0,e.i.serviceDescription.targetLatency-r):null!=e.i.serviceDescription.minLatency&&(u=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||"number"!=typeof a||(e.R=a);var f=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;o&&e.Da&&null!==e.R&&"number"==typeof a&&e.ze<f&&Date.now()-e.Da>1e3*i&&(i=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(a-i)/2,i+r),e.Da=Date.now()),o&&null!==e.R&&(s=e.R+r,u=e.R-r),a=n.end-e.h.currentTime,r=0,e.l==Wc&&0<(o=e.h.buffered).length&&(r=o.end(o.length-1),r=Math.max(l,r-n.end)),n=e.g.streaming.liveSync.panicMode,o=1e3*e.g.streaming.liveSync.panicThreshold,i=Date.now()-e.L.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&i<=o?t!=c&&e.wd(c):s&&l&&a-r>s?(t!=l&&e.wd(l),e.Da=null):u&&c&&a-r<u?(t!=c&&e.wd(c),e.Da=null):t!==e.I.hc()&&(e.Tc(),e.Da=Date.now())}}function Cc(e){if(e.h){var t,n=!1,r=e.h.currentTime/e.h.duration;isNaN(r)||(r=Math.round(100*r),isNaN(e.U)?(e.U=r,n=!0):(r=Math.max(e.U,r),e.U!=r&&(e.U=r,n=!0))),n&&(0==e.U?t=Jl("started"):25==e.U?t=Jl("firstquartile"):50==e.U?t=Jl("midpoint"):75==e.U?t=Jl("thirdquartile"):100==e.U&&(t=Jl("complete")),t&&e.dispatchEvent(t))}}function Ac(e){try{Yi(e.be,e.i)}catch(n){return Nc(e,n),!1}var t=Lr(e.i.variants);return t=e.za.create(t),e.o.setVariants(Array.from(t.values())),!0}function Ec(e,t,n,r,o){var i;t=void 0===t||t,n=void 0===n?0:n,r=void 0!==r&&r,o=void 0===o||o,(i=Ac(e)?e.o.chooseVariant():null)&&Ic(e,i,o,t,n,r)}function Ic(e,t,n,r,o,i){i=void 0!==i&&i;var a=e.j.j;if(t==a)r&&wu(e.j,t,r,o,!0);else{var s=e.s.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),wu(e.j,t,r,o,i,n),r=null,a&&(r=kr(a)),t=kr(t),n?(n=(new Map).set("oldTrack",r).set("newTrack",t),e.K&&Qa(e.K,t,e.hf()),zc(e,n=Jl("adaptation",n))):_c(e,r,t)}}function Mc(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),_c(e,n=Mr(n),t=Mr(t)))}function Rc(e){zc(e,Jl("trackschanged"))}function _c(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.K&&Qa(e.K,n,e.hf()),zc(e,n=Jl("variantchanged",t))}function Lc(e){zc(e,Jl("textchanged"))}function Dc(e){zc(e,Jl("texttrackvisibility"))}function Pc(e){e.g.abr.enabled||Oc(e),zc(e,Jl("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function Oc(e,t){if(t=void 0===t||t,e.l==Xc){e.je.stop();for(var n=c(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&Ac(e)}}function Nc(e,t){var n,r,o;return O(function(i){switch(i.g){case 1:if(e.l==Hc)return i.return();if(1===t.severity&&e.s.K++,n=!0,!(e.Ea&&e.i&&e.j)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3018!=t.code){i.u(2);break}return C(i,3),S(i,function(e){var t,n,r,o,i,a;return O(function(s){return 1==s.g?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?s.return(!1):(e.K=t,r=In,(o=e.i.get(r.X))&&(o.lc=null,ku(e,o),Nu(o).catch(function(){})),(i=e.i.get(r.ga))&&(i.lc=null,ku(e,i),Nu(i).catch(function(){})),a=new Map,e.j.audio&&a.set(r.X,e.j.audio),e.j.video&&a.set(r.ga,e.j.video),S(s,vs(e.g.aa,a),2))):s.return(!0)})}(e.j),5);case 5:r=i.h,n=!r,E(i,2);break;case 3:I(i),n=!0;case 2:if(!n)return i.return();2===t.severity&&Oc(e,!1),o=Jl("error",(new Map).set("detail",t)),e.dispatchEvent(o),o.defaultPrevented&&(t.handled=!0),k(i)}})}function Uc(e,t,n,r){r=void 0===r?e:r,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(Jl(t,e))}function Bc(e,t,n,r){r=void 0!==r&&r,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Jl(r?"audiotrackchanged":"mediaqualitychanged",t))}function jc(e,t){if(t=void 0===t||t,!e.h.error)return t?new Tt(2,3,3016):null;var n=e.h.error.code;return t||1!=n?((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new Tt(2,3,3016,n,t,e.h.error.message)):null}function Fc(e,t,n){0<t&&(e.V()||e.hh(t)),n<(t=e.getDuration())&&(e.V()||e.Za(n))}function zc(e,t){O(function(n){if(1==n.g)return S(n,Promise.resolve(),2);e.l!=Hc&&e.dispatchEvent(t),k(n)})}function Gc(e){for(var t=new Set,n=(e=c(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(rr(n.language)):t.add("und");return t}function Vc(e){for(var t=new Map,n=new Map,r=(e=c(e)).next();!r.done;r=e.next()){var o="und",i=[];(r=r.value).language&&(o=rr(r.language)),(i="variant"==r.type?r.audioRoles:r.roles)&&i.length||(i=[""]),t.has(o)||t.set(o,new Set);for(var a=(i=c(i)).next();!a.done;a=i.next())a=a.value,t.get(o).add(a),r.label&&(n.has(o)||n.set(o,new Map),n.get(o).set(a,r.label))}var s=[];return t.forEach(function(e,t){for(var r=(e=c(e)).next();!r.done;r=e.next()){r=r.value;var o=null;n.has(t)&&n.get(t).has(r)&&(o=n.get(t).get(r)),s.push({language:t,role:r,label:o})}}),s}Kl.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null},v(Yl,ho),(o=Yl.prototype).destroy=function(){var e,t=this;return O(function(n){switch(n.g){case 1:return t.l==Hc?n.return():(Ql(t),e=t.detach(),t.l=Hc,S(n,e,2));case 2:return S(n,t.Qe(),3);case 3:if(t.qe&&(t.qe.release(),t.qe=null),t.gd&&(t.gd.release(),t.gd=null),t.m&&(t.m.release(),t.m=null),t.Fa&&(t.Fa.release(),t.Fa=null),t.ub&&(t.ub.release(),t.ub=null),t.xa=null,t.g=null,t.s=null,t.de=null,t.N=null,t.ea=null,!t.H){n.u(4);break}return S(n,t.H.destroy(),5);case 5:t.H=null;case 4:t.o&&(t.o.release(),t.o=null),ho.prototype.release.call(t),k(n)}})},o.Rb=function(e,t){t=void 0===t||t;var n,r,o,i=this;return O(function(a){switch(a.g){case 1:if(i.l==Hc)throw new Tt(2,7,7e3);if(n=i.h&&i.h==e,!i.h||i.h==e){a.u(2);break}return S(a,i.detach(),2);case 2:return S(a,ec(i,"attach"),4);case 4:if(a.h)return a.return();if(C(a,5,6),n||(Zl(i,"attach"),r=function(){var e=jc(i,!1);e&&Nc(i,e)},i.gd.D(e,"error",r),i.h=e),!t||!Lt()||i.G){a.u(6);break}return S(a,ic(i),6);case 6:M(a),i.Z.release(),R(a,0);break;case 5:return o=I(a),S(a,i.detach(),10);case 10:throw o}})},o.zh=function(e){this.eg=e},o.detach=function(e){e=void 0!==e&&e;var t=this;return O(function(n){if(1==n.g){if(t.l==Hc)throw new Tt(2,7,7e3);return S(n,t.bc(!1,e),2)}if(3!=n.g)return S(n,ec(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.gd.Ra(),t.h=null),Zl(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Z.release()}k(n)})},o.bc=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,r,o,i,a,s,u,l,f,p,d=this;return O(function(h){switch(h.g){case 1:return d.l!=Hc&&(d.l=qc),S(h,ec(d,"unload"),2);case 2:return h.h?h.return():(A(h,3),d.Ea=!1,Zl(d,"unload"),e&&!Lt()&&(e=!1),Ql(d),n=d.md.map(function(e){return e()}),d.md=[],S(h,Promise.all(n),5));case 5:if(d.dispatchEvent(Jl("unloading")),d.dd&&(d.dd.release(),d.dd=null),d.h&&(d.m.Ra(),d.Fa.Ra()),d.je.stop(),d.Fb&&(d.Fb.release(),d.Fb=null),d.he&&(d.he.stop(),d.he=null),!d.F){h.u(6);break}return S(h,d.F.stop(),7);case 7:d.F=null,d.ab=null;case 6:if(!d.o){h.u(8);break}return S(h,d.o.stop(),8);case 8:if(!d.j){h.u(10);break}return S(h,d.j.destroy(),11);case 11:d.j=null;case 10:if(d.I&&(d.I.release(),d.I=null),d.C&&(d.C.release(),d.C=null),!en("webkit")||!d.B){h.u(12);break}return S(h,d.B.destroy(),13);case 13:d.B=null;case 12:if(!d.G){h.u(14);break}return S(h,d.G.destroy(),15);case 15:d.G=null;case 14:if(d.A&&!t&&d.A.onAssetUnload(),d.ba&&!t&&(d.ba.destroy(),d.ba=null),t||d.dg.stop(),d.N&&function(e){e.i=!1,e.l=!0,e.j=!1}(d.N),d.ea&&(d.ea.g=null),d.h&&wl(d.h),!d.h||!d.h.src){h.u(16);break}return S(h,new Promise(function(e){return new _t(e).Y(.1)}),17);case 17:d.h.removeAttribute("src"),d.h.load();case 16:if(!d.B){h.u(18);break}return S(h,d.B.destroy(),19);case 19:d.B=null;case 18:if(d.qa&&d.da!=d.qa.Dc()&&(d.qa.s||d.qa.destroy(),d.qa=null),d.da=null,d.ag=null,d.L=null,d.i){for(r=c(d.i.variants),o=r.next();!o.done;o=r.next())for(i=o.value,a=c([i.audio,i.video]),s=a.next();!s.done;s=a.next())(u=s.value)&&u.segmentIndex&&u.segmentIndex.release();for(l=c(d.i.textStreams),f=l.next();!f.done;f=l.next())(p=f.value).segmentIndex&&p.segmentIndex.release()}d.g.streaming.clearDecodingCache&&(Nr={},Mt.clear()),d.i=null,d.s=new Js,d.bg=null,d.Da=null,d.R=null,d.ze=-1,d.qd=[],d.U=NaN,wc(d);case 3:M(h),d.Z.release(),R(h,4);break;case 4:if(e&&Lt()&&!d.G&&d.h)return S(h,ic(d),0);h.u(0)}})},o.ej=function(e){this.pa=e},o.load=function(e,t,n){t=void 0===t?null:t;var r,o,i,a,s,u,l,f,p,d,h,m,g,v=this;return O(function(y){switch(y.g){case 1:if(v.l==Hc)throw new Tt(2,7,7e3);return r=null,o="",o=e instanceof Zu?(r=e).Dc()||"":e||"",S(y,$l(v.Z,"load"),2);case 2:if(v.Z.release(),!v.h)throw new Tt(2,7,7002);if(!v.da){y.u(3);break}return v.da=o,S(y,v.bc(!1),3);case 3:if(i=++v.te,a=function(){return O(function(e){if(1==e.g)return v.te==i?e.u(0):r?S(e,r.destroy(),3):e.u(3);throw new Tt(2,7,7e3)})},s=function(e,t){return O(function(n){switch(n.g){case 1:return A(n,2),S(n,$l(v.Z,t),4);case 4:return S(n,a(),5);case 5:return S(n,e(),6);case 6:return S(n,a(),7);case 7:r&&v.g&&(r.g=v.g);case 2:M(n),v.Z.release(),R(n,0)}})},C(y,5,6),null==t&&r&&(t=r.getStartTime()),v.pa=t,v.Ea=!1,v.dispatchEvent(Jl("loading")),r){n=r.U,y.u(8);break}if(n){y.u(8);break}return S(y,s(function(){return O(function(e){if(1==e.g)return S(e,oc(v,o),2);n=e.h,k(e)})},"guessMimeType_"),8);case 8:if(u=!!r,r){tl(r,v),v.s=r.getStats(),y.u(11);break}return S(y,nc(v,o,t,n,!0),12);case 12:(r=y.h)?(tl(r,v),v.s=r.getStats(),r.start(),r.m.catch(function(){})):v.s=new Js;case 11:if(l=!r,f=Date.now()/1e3,v.s=r?r.getStats():new Js,v.da=o,v.ag=n||null,l)return S(y,s(function(){return O(function(e){return S(e,function(e,t){var n,r,o,i,a;return O(function(s){return 1==s.g?(n=In,r=Date.now()/1e3,o=!0,e.B=e.yc({Lb:e.H,onError:function(t){Nc(e,t)},ee:function(){},onExpirationUpdated:function(){var t=Jl("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&o&&(o=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.g.drm),i={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},(a={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?jn(t):"",codecs:t?Fn(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}).fullMimeTypes.add(Ln(a.mimeType,a.codecs)),t.startsWith("audio/")?(a.type=n.X,i.audio=a):i.video=a,e.B.ba=!0,S(s,Ai(e.B,[i],[]),2)):S(s,e.B.Rb(e.h),0)})}(v,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(v.G){y.u(15);break}return S(y,s(function(){return O(function(e){return S(e,ic(v),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return S(y,s(function(){return O(function(e){return S(e,r.m,0)})},"waitForFinish"),17);case 17:return v.g=r.getConfiguration(),v.be=r.C,v.ab=r.F,v.F=function(e){return e.ea=!0,e.j}(r),v.F&&v.F.setMediaElement&&v.h&&v.F.setMediaElement(v.h),v.dd=function(e){return e.oa=!0,e.G}(r),v.Zc=r.za,v.i=r.gf(),(p=r.o)&&(v.za=p),u&&v.h&&"AUDIO"===v.h.nodeName&&(function(e){for(var t=c(e.i.variants),n=t.next();!n.done;n=t.next())(n=n.value).video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(e){return e.audio})}(v),v.configure("manifest.disableVideo",!0)),v.B=function(e){return e.da=!0,e.l}(r),S(y,s(function(){return O(function(e){return S(e,v.B.Rb(v.h),0)})},"drmEngine_.attach"),18);case 18:return!(d=r.B)||v.xa&&v.xa==d||(v.o=function(e){return e.ba=!0,e.i}(r),v.xa=r.B,"function"!=typeof v.o.setMediaElement&&(le("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),v.o.setMediaElement=function(){}),"function"!=typeof v.o.setCmsdManager&&(le("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),v.o.setCmsdManager=function(){}),"function"!=typeof v.o.trySuggestStreams&&(le("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),v.o.trySuggestStreams=function(){})),h=function(e){return e.pa=!0,e.K}(r),m=r.fa,S(y,s(function(){return O(function(e){return S(e,function(e,t,n,r){var o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,C,A,E;return O(function(I){switch(I.g){case 1:Zl(e,"load"),o=e.h,e.I=new Hs({Nd:function(){return o.playbackRate},hc:function(){return o.defaultPlaybackRate},Rf:function(e){o.playbackRate=e},Lg:function(e){o.currentTime+=e}}),i=function(){return Tc(e)},a=function(){return Sc(e)},e.m.D(o,"playing",i),e.m.D(o,"pause",i),e.m.D(o,"ended",i),e.m.D(o,"ratechange",a),function(e,t){t.lcevc.enabled?(Ql(e),null==e.K&&(e.K=new $a(e.h,e.eg,t.lcevc),e.G&&(e.G.Z=e.K))):Ql(e)}(e,e.g),e.Db=e.g.preferredTextLanguage,e.pd=e.g.preferredTextRole,e.od=e.g.preferForcedSubs,Fc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(t,n,r){e.i&&e.j&&t!=e.j.j&&Ic(e,t,!0,void 0!==n&&n,void 0===r?0:r)}),e.o.setMediaElement(o),e.o.setCmsdManager(e.ea),e.j=function(e){return new bu(e.i,{Md:function(){return e.C?e.C.yd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},aa:e.G,Lb:e.H,onError:function(t){return Nc(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bi:function(){e.F&&e.F.update&&e.F.update()},Af:function(t,n){var r=t.startTime;t=t.endTime;var o=n.type;if(n=n.codecs.includes(","),e.C){e.C.Mg();var i=rs(e.G,o);!e.V()&&e.h.paused&&null!=i&&0<i&&e.C.yd()<i&&e.C.Ee(i)}fc(e),r=(new Map).set("start",r).set("end",t).set("contentType",o).set("isMuxed",n),e.dispatchEvent(Jl("segmentappended",r))},Ai:function(t,n){(n=n.Hc)&&e.Zc&&function(e,t,n){var r=function(e,t){var n=e.g.get(t);return n||(n={ud:[],Pe:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,o=t.ud;t.ud=o.filter(function(e,t){return!(e.position<=n&&t+1<o.length&&o[t+1].position<=n||e.position>=r)})}else t.ud=[]}(e,r),e={Hc:t,position:n},0<=(t=(r=r.ud).findIndex(function(e){return e.position>=n}))?r.splice(t,r[t].position==n?1:0,e):r.push(e)}(e.Zc,n,t)},kg:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new Wo(be(n)),n=0;for(var o=c(t.data),i=o.next();!i.done;i=o.next())n+=i.value.length;if(0==n)r=Promise.resolve();else{for(n=new Uint8Array(n),o=0,i=(t=c(t.data)).next();!i.done;i=t.next())i=i.value,n.set(i,o),o+=i.length;Ri(r,"cenc",n),r=r.l}}else r=Promise.resolve();return r},onMetadata:function(t,n,r){ac(e,t,n,r)},disableStream:function(t,n){return e.disableStream(t,n)}})}(e),e.j.configure(e.g.streaming),e.l=Xc,o.textTracks&&e.m.D(o.textTracks,"addtrack",function(t){t.track&&"chapters"===(t=t.track).kind&&uc(e,t)}),e.dispatchEvent(Jl("streaming")),s=n;case 2:for((l=e.j.j)||s||(s=Ac(e)?e.o.chooseVariant():null),f=[],p=c([(u=l||s).video,u.audio]),d=p.next();!d.done;d=p.next())(h=d.value)&&!h.segmentIndex&&f.push(h.createSegmentIndex());if(!(0<f.length)){I.u(4);break}return S(I,Promise.all(f),4);case 4:if(!u||0!=u.disabledUntilTime){I.u(2);break}if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(u),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&Q("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Fc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),function(e,t,n){e.l.presentationTimeline.V()||(e.N=t,e.L=n)}(e.j,e.g.playRangeStart,e.g.playRangeEnd),m=function(t){e.C=function(e,t){return new Ns(e.h,e.i,e.g.streaming,t,function(){e.Fb&&Ws(e.Fb,!0),e.j&&e.j.Qc(),e.L&&fc(e)},function(t){return e.dispatchEvent(t)})}(e,t),e.Fb=function(e,t){(t=new il(e.dd,e.V()||0<t)).addEventListener("enter",function(t){Uc(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){Uc(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(Uc(e,"timelineregionenter",n),Uc(e,"timelineregionexit",n))});var n=new Xs(e.h);return n.g.add(t),e.Zc&&n.g.add(e.Zc),n}(e,t),cc(e,o,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||m(e.pa),l){I.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){I.u(8);break}return g=e.i.presentationTimeline,v=e.pa||e.h.currentTime,y=g.Vb(),b=g.yb(),v<y?v=y:v>b&&(v=b),S(I,function(e,t){var n,r,o,i,a;return O(function(s){return 1==s.g?(n=e.audio,r=e.video,o=function(e,t){var n,r,o;return O(function(i){return 1==i.g?e?S(i,e.createSegmentIndex(),2):i.return(null):(r=(n=e.segmentIndex.Ib(t))?n.next().value:null)?(o=r.startTime,i.return(o)):i.return(null)})},S(s,o(n,t),2)):3!=s.g?(i=s.h,S(s,o(r,t),3)):null!=(a=s.h)&&null!=i?s.return(Math.max(a,i)):null!=a?s.return(a):null!=i?s.return(i):s.return(t)})}(s,v),9);case 9:x=I.h,m(x);case 8:Ic(e,s,!0,!1,0);case 7:return e.C.ready(),e.Ec().find(function(e){return e.active})||((w=Dr(e.i.textStreams,e.Db,e.pd,e.od)[0]||null)&&Qs(e.s.h,w,!0),s&&(w?(function(e,t,n){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var r=rr(e.g.preferredTextLanguage);return n=rr(n.language),2==e.g.autoShowText?er(n,r):3==e.g.autoShowText?!!t&&(e=rr(t.language),er(n,r)&&!er(e,n)):(Q("Invalid autoShowText setting!"),!1)}(e,s.audio,w)&&(e.oa=!0),e.oa&&e.G.F.setTextVisibility(!0),Dc(e)):e.oa=!1),w&&(e.g.streaming.alwaysStreamText||e.qf())&&Su(e.j,w)),S(I,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),Pc(e)),Rc(e),Ac(e),e.i.variants.some(function(e){return e.primary}),((T=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(C=function(){return kc(e)},e.m.D(o,"timeupdate",C)),T||(A=function(){return Cc(e)},e.m.D(o,"timeupdate",A),Cc(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(E=function(){var t;return O(function(n){if(1==n.g)return t=e.h.duration-e.h.currentTime,!isNaN(t)&&t<=e.g.streaming.preloadNextUrlWindow?(e.m.jb(o,"timeupdate",E),S(n,e.preload(e.i.nextUrl),4)):n.u(0);e.qa=n.h,k(n)})},e.m.D(o,"timeupdate",E)),e.m.D(o,"ended",function(){e.load(e.qa||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(T),e.Ea=!0,e.m.ha(o,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),k(I)}})}(v,f,m,h),0)})},"loadInner_"),19);case 19:!function(e){if(e.H)for(var t=c(e.H),n=t.next();!n.done;n=t.next())(n=n.value)();e.H=null}(r),y.u(14);break;case 20:return S(y,s(function(){return O(function(e){return S(e,function(e,t,n){var r,o,i,a,s,u,l,f,p,d,h,m;return O(function(g){if(1==g.g)return Zl(e,"src-equals"),r=e.h,e.C=new Os(r),o=!1,e.md.push(function(){o=!0}),null!=e.pa&&e.C.Ee(e.pa),e.I=new Hs({Nd:function(){return r.playbackRate},hc:function(){return r.defaultPlaybackRate},Rf:function(e){r.playbackRate=e},Lg:function(e){r.currentTime+=e}}),i=e.g.streaming.rebufferingGoal,cc(e,r,i),a=function(){return Tc(e)},s=function(){return Sc(e)},e.m.D(r,"playing",a),e.m.D(r,"pause",a),e.m.D(r,"ended",a),e.m.D(r,"ratechange",s),"none"!=r.preload&&e.m.ha(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return Rc(e)}),e.m.D(r.audioTracks,"removetrack",function(){return Rc(e)}),e.m.D(r.audioTracks,"change",function(){return Rc(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues){for(var n=[],r=c(t.activeCues),o=r.next(),i={};!o.done;i={Ta:void 0},o=r.next())i.Ta=o.value,sc(e,i.Ta.startTime,i.Ta.endTime,i.Ta.type,i.Ta.value),e.A&&e.A.onCueMetadataChange(i.Ta.value),"com.apple.quicktime.HLS"==i.Ta.type&&null!=i.Ta.startTime&&(o=n.find(function(e){return function(t){return t.startTime==e.Ta.startTime&&t.endTime==e.Ta.endTime}}(i)),o||(o={startTime:i.Ta.startTime,endTime:i.Ta.endTime,values:[]},n.push(o)),o.values.push(i.Ta.value));for(r=(n=c(n)).next();!r.done;r=n.next())(r=r.value).values.some(function(e){return"X-ASSET-URI"==e.key||"X-ASSET-LIST"==e.key})&&e.A&&(r.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.A.onInterstitialMetadata(e,e.h,r))}});var n=new _t(function(){for(var t=function(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}(e),n=(t=c(t)).next();!n.done;n=t.next())n.value.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}(e,t);break;case"chapters":uc(e,t);break;default:Rc(e)}}),e.m.D(r.textTracks,"removetrack",function(){return Rc(e)}),e.m.D(r.textTracks,"change",function(){return Rc(e)})),u=function(e,t,n){try{if(!e.g.enabled)return t;var r=Rl(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var o=Nl;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":o=Bl;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":o=Ol;break e}o=void 0}return r.ot=o,r.su=!0,Pl(t,Dl(r))}catch(a){return J("CMCD_SRC_ERROR","Could not generate src CMCD data.",a),t}}(e.N,e.da,n),!u.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(u+="#t=",0<e.g.playRangeStart&&(u+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(u+=","+e.g.playRangeEnd)),r.src=u,(Nt()||jt())&&r.load(),"none"!=r.preload&&!r.autoplay&&zn(n)&&Kt()&&r.load(),e.l=Wc,e.dispatchEvent(Jl("streaming")),l=new ro,As(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ready(),l.resolve()}),As(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var t;return O(function(n){return 1==n.g?(function(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Xg(t,e.g.preferredVariantRole)}(e),(t=hc(e)).find(function(e){return"disabled"!=e.mode})?(0<t.length&&(e.oa=!0),n.u(2)):S(n,new Promise(function(t){e.m.ha(r.textTracks,"change",t),new _t(t).Y(1)}),2)):o?n.return():(function(e){var t=e.g.preferredTextLanguage;""!=t&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}(e),void k(n))})}),r.error?l.reject(jc(e)):"none"==r.preload&&(Q('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),l.resolve()),e.m.ha(r,"error",function(){l.reject(jc(e))}),f=new Promise(function(t,n){new _t(n).Y(e.g.streaming.loadTimeout)}),S(g,Promise.race([l,f]),2);((p=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(d=function(){return kc(e)},e.m.D(r,"timeupdate",d)),p||(h=function(){return Cc(e)},e.m.D(r,"timeupdate",h),Cc(e)),e.A&&(e.A.onManifestUpdated(p),p&&(m=e.Ob().end,e.m.D(r,"progress",function(){var t=e.Ob().end;m!=t&&(e.A.onManifestUpdated(e.V()),m=t)}))),e.Ea=!0,k(g)})}(v,f,n),0)})},"srcEqualsInner_"),14);case 14:v.dispatchEvent(Jl("loaded"));case 6:if(M(y),!r){y.u(22);break}return S(y,r.destroy(),22);case 22:v.qa=null,R(y,0);break;case 5:if(!(g=I(y))||7e3==g.code){y.u(24);break}return S(y,v.bc(!1),24);case 24:throw g}})},o.aj=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,r=this;return O(function(o){return 1==o.g?S(o,tc(r),2):3!=o.g?(n=o.h,S(o,r.bc(e,t),3)):o.return(n)})},o.qg=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t;var n,r=this;return O(function(o){return 1==o.g?S(o,tc(r,t),2):3!=o.g?(n=o.h,S(o,r.detach(e),3)):o.return(n)})},o.preload=function(e,t,n){t=void 0===t?null:t;var r,o=this;return O(function(i){return 1==i.g?S(i,nc(o,e,t,n),2):((r=i.h)?r.start():Nc(o,new Tt(2,7,7005)),i.return(r))})},o.Qe=function(){var e,t,n,r,o=this;return O(function(i){for(e=[],t=c(o.ke),n=t.next();!n.done;n=t.next())(r=n.value).s||e.push(r.destroy());return o.ke=[],S(i,Promise.all(e),0)})},o.Ji=function(){for(var e=this.Z;e.g;)e.release()},o.yc=function(e){return new Ci(e)},o.configure=function(e,t){if(2==arguments.length&&"string"==typeof e&&(e=Fu(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(le("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(le("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(le("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&Vt(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&"boolean"==typeof e.streaming.liveSync){le("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&(!e.streaming.liveSync||!("targetLatency"in e.streaming.liveSync))&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(le("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(le("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(le("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(le("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(le("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(le("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(le("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(le("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){le("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var o=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return o},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),null==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2),null==e.streaming.updateIntervalSeconds&&(e.streaming.updateIntervalSeconds=.1),null==e.streaming.maxDisabledTime&&(e.streaming.maxDisabledTime=1),null==e.streaming.retryParameters&&(e.streaming.retryParameters={}),null==e.streaming.retryParameters.baseDelay&&(e.streaming.retryParameters.baseDelay=100),null==e.manifest&&(e.manifest={}),null==e.manifest.dash&&(e.manifest.dash={}),null==e.manifest.dash.autoCorrectDrift&&(e.manifest.dash.autoCorrectDrift=!1),null==e.manifest.retryParameters&&(e.manifest.retryParameters={}),null==e.manifest.retryParameters.baseDelay&&(e.manifest.retryParameters.baseDelay=100),null==e.drm&&(e.drm={}),null==e.drm.retryParameters&&(e.drm.retryParameters={}),null==e.drm.retryParameters.baseDelay&&(e.drm.retryParameters.baseDelay=100)),n=Yu(this.g,e,xc(this)),pc(this),n},o.getConfiguration=function(){var e=xc(this);return Yu(e,this.g,xc(this)),e},o.Ag=function(){return Yu(xc(this),this.g,xc(this)),Gu(this.g,xc(this))},o.vg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.h.currentTime+t,this.Ob().end)))return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},o.Ni=function(){for(var e in this.g)delete this.g[e];Yu(this.g,xc(this),xc(this)),pc(this)},o.yg=function(){return this.l},o.hf=function(){return this.i?this.i.type:null},o.Uh=function(){return this.h},o.xb=function(){return this.H},o.Dc=function(){return this.da},o.ug=function(){return this.A?this.A:null},o.V=function(){return this.i?this.i.presentationTimeline.V():!(!this.h||!this.h.src)&&1/0==this.h.duration},o.kc=function(){return!!this.i&&this.i.presentationTimeline.kc()},o.ki=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src)&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},o.Ob=function(){if(this.i){if(!this.Ea&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.yb()}}return this.h&&this.h.src&&(e=this.h.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},o.hi=function(){this.V()&&(this.h.currentTime=this.Ob().end)},o.li=function(){return this.Ea},o.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},o.drmInfo=function(){return this.B?this.B.g:null},o.ad=function(){return this.B?this.B.ad():1/0},o.ff=function(){return this.B?this.B.ff():[]},o.Ld=function(){return this.B?this.B.Ld():{}},o.pf=function(){return!!this.L&&this.L.g==Jr},o.eb=function(){return this.h?this.I?this.I.i:1:0},o.wd=function(e){var t=this;0==e?Q("A trick play rate of 0 is unsupported!"):(this.Fa.Ra(),this.h.paused&&this.h.play(),this.I.set(e),this.l==Xc&&(this.o.playbackRateChanged(e),xu(this.j,1<Math.abs(e))),this.V()&&this.Fa.D(this.h,"timeupdate",function(){var n=t.h.currentTime,r=t.Ob(),o=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Tc():Math.floor(n)<=Math.floor(r.start+o)&&t.Tc()}))},o.Tc=function(){var e=this.I.hc();this.l==Wc&&this.I.set(e),this.l==Xc&&(this.I.set(e),this.o.playbackRateChanged(e),xu(this.j,!1)),this.Fa.Ra()},o.ic=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=c(this.i.variants),o=r.next();!o.done;o=r.next())if(_r(o=o.value)){var i=kr(o);i.active=o==e,i.active||1==n||null==e||o.video!=e.video||o.audio!=e.audio||(i.active=!0),i.active&&n++,t.push(i)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){return Mr(e)}):[]},o.Ec=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=c(this.i.textStreams),r=n.next();!r.done;r=n.next()){var o=Cr(r=r.value);o.active=r==e,t.push(o)}return t}return this.h&&this.h.src&&this.h.textTracks?hc(this).map(function(e){return Ir(e)}):[]},o.Oh=function(){var e=this.qd;return this.i&&(e=this.i.imageStreams),e.map(function(e){return Ar(e)})},o.Gh=function(e){var t,n,r,o,i=this;return O(function(a){return 1==a.g?i.l!=Xc&&i.l!=Wc?a.return(null):(t=i.qd,i.i&&(t=i.i.imageStreams),(n=t.find(function(t){return t.id==e}))?n.segmentIndex?a.u(2):S(a,n.createSegmentIndex(),2):a.return(null)):4!=a.g?(r=[],n.segmentIndex.Hb(function(t){var o=dc(t.tilesLayout||n.tilesLayout);if(o){o=o.rows*o.dc;for(var a=t.j-t.startTime,s=0;s<o;s++)r.push(i.Cg(e,t.startTime+a*s/o))}}),S(a,Promise.all(r),4)):(o=a.h,a.return(o.filter(function(e){return e})))})},o.Cg=function(e,t){var n,r,o,i,a,s,u,l,c,f,p,d,h,m,g,v,y,b,x=this;return O(function(w){return 1==w.g?x.l!=Xc&&x.l!=Wc?w.return(null):(n=x.qd,x.i&&(n=x.i.imageStreams),(r=n.find(function(t){return t.id==e}))?r.segmentIndex?w.u(2):S(w,r.createSegmentIndex(),2):w.return(null)):null==(o=r.segmentIndex.find(t))?w.return(null):(i=r.segmentIndex.get(o),(a=dc(i.tilesLayout||r.tilesLayout))?(s=r.width||0,u=r.height||0,l=s/a.dc,c=u/a.rows,f=a.dc*a.rows,p=i.j-i.startTime,d=i.B||p/f,h=i.startTime,g=m=0,1<f&&(v=Math.floor((t-i.startTime)/d),h=i.startTime+v*d,m=v%a.dc*l,g=Math.floor(v/a.dc)*c),y=!1,(b=i.A)&&(y=!0,c=b.height,m=b.positionX,g=b.positionY,l=b.width),w.return({segment:i,imageHeight:u,imageWidth:s,height:c,positionX:m,positionY:g,startTime:h,duration:d,uris:i.M(),width:l,sprite:y})):w.return(null))})},o.Yg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(t){return t.id==e.id});t&&t!=this.j.s&&(Qs(this.s.h,t,!1),Su(this.j,t),Lc(this),this.Db=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){for(var n=(t=c(t=hc(this))).next();!n.done;n=t.next())Er(n=n.value)==e.id?n.mode=this.oa?"showing":"hidden":n.mode="disabled";Lc(this)}},o.Mf=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){var r=this.i.variants.find(function(t){return t.id==e.id});if(r&&_r(r)){var o=this.j.j;this.g.abr.enabled&&(o.video!=r.video||o.audio&&r.audio&&o.audio.language==r.audio.language&&o.audio.channelsCount==r.audio.channelsCount)&&Q("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),Ic(this,r,!1,t,n),this.za=new Kr(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Ac(this)}}else if(this.h&&this.h.audioTracks)for(n=(t=c(t=Array.from(this.h.audioTracks))).next();!n.done;n=t.next())if(Er(n=n.value)==e.id){Mc(this,n);break}},o.Ih=function(){return Vc(this.ic())},o.ai=function(){return Vc(this.Ec())},o.Hh=function(){return Array.from(Gc(this.ic()))},o.$h=function(){return Array.from(Gc(this.Ec()))},o.Xg=function(e,t,n,r,o){if(n=void 0===n?0:n,r=void 0===r?0:r,o=void 0===o?"":o,this.i&&this.C){this.za=new $r(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,o),e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},t=this.j.j,n=null;for(var i=(o=c((o=this.za.create(this.i.variants)).values())).next();!i.done;i=o.next())_r(i=i.value)&&(!n||e(n,t)>e(i,t))&&(n=i);n!=t&&(n?(e=kr(n),this.Mf(e,!0,r)):Ec(this))}else this.h&&this.h.audioTracks&&(r=Dr(this.ic(),e,t||"",!1)[0])&&this.Mf(r)},o.Lf=function(e,t,n){n=void 0!==n&&n,this.i&&this.C?(this.Db=e,this.pd=t||"",this.od=n,(e=Dr(this.i.textStreams,this.Db,this.pd,this.od)[0]||null)&&e!=this.j.s&&(Qs(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.qf())&&(Su(this.j,e),Lc(this))):(e=Dr(this.Ec(),e,t||"",n)[0])&&this.Yg(e)},o.Ti=function(e,t,n){if(t=void 0===t||t,n=void 0===n?0:n,this.i&&this.C){for(var r=null,o=c(this.i.variants),i=o.next();!i.done;i=o.next())if((i=i.value).audio.label==e){r=i;break}null!=r&&(this.za=new $r(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Ec(this,t,n))}else if(this.h&&this.h.audioTracks){for(t=null,r=(n=c(n=Array.from(this.h.audioTracks))).next();!r.done;r=n.next())(r=r.value).label==e&&(t=r);t&&Mc(this,t)}},o.qf=function(){var e=this.oa;return this.G&&this.l==Xc?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?hc(this).some(function(e){return"showing"==e.mode}):e},o.wg=function(){return this.h&&this.h.src&&this.h.textTracks?mc(this).map(function(e){return Ir(e)}):[]},o.Kh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=rr(e),n=mc(this).filter(function(e){return rr(e.language)==t});if(!n||!n.length)return[];e=[];for(var r=new Set,o=(n=c(n)).next();!o.done;o=n.next())if((o=o.value)&&o.cues)for(var i=(o=c(o.cues)).next();!i.done;i=o.next()){var a=i.value;(i=a.id)&&""!=i||(i=a.startTime+"-"+a.endTime+"-"+a.text),a={id:i,title:a.text,startTime:a.startTime,endTime:a.endTime},r.has(i)||(e.push(a),r.add(i))}return e},o.eh=function(e){if(e=!!e,this.oa!=e){if(this.oa=e,this.l==Xc)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||0<(e=Dr(this.i.textStreams,this.Db,this.pd,this.od)).length&&(Su(this.j,e[0]),Lc(this)):function(e){var t=e.i.get(En);t&&(Ou(t),Nu(t).catch(function(){}),e.i.delete(En)),e.s=null}(this.j));else if(this.h&&this.h.src&&this.h.textTracks)for(var t=hc(this),n=(t=c(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");Dc(this)}},o.Wh=function(){if(this.C)var e=this.C.yd();else{if(null==this.pa)return new Date;e=this.pa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},o.Bg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},o.Od=function(){return this.V()&&this.i?this.i.presentationTimeline.Od():null},o.wb=function(){if(this.l==Xc)return this.G.wb();var e={total:[],audio:[],video:[],text:[]};return this.l==Wc&&(e.total=ma(this.h.buffered)),e},o.getStats=function(){if(this.l!=Xc&&this.l!=Wc)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Tc(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.V()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.U=this.C.fg(),this.s.Z=this.C.gg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.R=Number(n.droppedVideoFrames),t.N=r,this.s.L=Number(n.corruptedVideoFrames)}if(n=this.B&&(n=this.B).I?n.I:NaN,this.s.s=n,this.l==Xc){if(n=this.j.j,t=this.j.s,n){var o=(r=this.I?this.I.i:1)*n.bandwidth;t&&t.bandwidth&&(o+=r*t.bandwidth),this.s.B=o}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.V()&&(n=this.Bg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==Wc&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var i=this.s;e=i.o,n=i.l,t=i.B,r=i.N,o=i.R;for(var a=i.L,s=i.Z,u=i.U,l=i.A,f=i.i,p=i.m,d=i.H,h=i.j,m=$s(i.g,"playing"),g=$s(i.g,"paused"),v=$s(i.g,"buffering"),y=i.s,b=i.C,x=i.I,w=i.Hg,S=i.Cd,T=i.K,k=i.G,C=i.F,A=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=c(e.h),o=r.next();!o.done;o=r.next())n.push(t(o.value));return e.g&&n.push(t(e.g)),n}(i.g),E=[],I=(i=c(i.h.g)).next();!I.done;I=i.next())I=I.value,E.push({timestamp:I.timestamp,id:I.id,type:I.type,fromAdaptation:I.fromAdaptation,bandwidth:I.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:o,corruptedFrames:a,stallsDetected:s,gapsJumped:u,estimatedBandwidth:l,completionPercent:f,loadLatency:p,manifestTimeSeconds:d,drmTimeSeconds:h,playTime:m,pauseTime:g,bufferingTime:v,licenseTime:y,liveLatency:b,maxSegmentDuration:x,manifestSizeBytes:w,bytesDownloaded:S,nonFatalErrorCount:T,manifestPeriodCount:k,manifestGapCount:C,stateHistory:A,switchHistory:E}},o.uh=function(e,t,n,r,o,i,a){a=void 0!==a&&a;var s,u,l,c,f,p,d,h,m,g,v=this;return O(function(y){switch(y.g){case 1:if(v.l!=Xc&&v.l!=Wc)throw new Tt(1,7,7004);if("subtitles"!=n&&"captions"!=n&&Q("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){y.u(2);break}return S(y,gc(v,e),3);case 3:r=y.h;case 2:if(s=[],v.A&&(s=v.A.getCuePoints()),v.l!=Wc){y.u(4);break}return a&&(n="forced"),S(y,vc(v,e,t,n,r,i||"",s),5);case 5:if(u=rr(t),l=v.Ec(),c=l.find(function(e){return rr(e.language)==u&&e.label==(i||"")&&e.kind==n}))return Rc(v),y.return(c);throw new Tt(1,2,2012);case 4:if(f=In,p=v.h.duration,v.i&&(p=v.i.presentationTimeline.getDuration()),1/0==p)throw new Tt(1,4,4033);if(!s.length){y.u(6);break}return S(y,yc(v,e,v.H,v.g.streaming.retryParameters),7);case 7:d=y.h,h=bc(v,d,r,s),m=new Blob([h],{type:"text/vtt"}),e=ys(m),r="text/vtt";case 6:if(g={id:v.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:zs(0,p,[e]),mimeType:r||"",codecs:o||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:i||null,type:f.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ln(r||"",o||"")])},!Xn(Ln(g.mimeType,g.codecs)))throw new Tt(2,2,2014,r);return v.i.textStreams.push(g),Rc(v),y.return(Cr(g))}})},o.vh=function(e,t){var n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b=this;return O(function(x){switch(x.g){case 1:if(b.l!=Xc&&b.l!=Wc)throw new Tt(1,7,7004);if(t){x.u(2);break}return S(x,gc(b,e),3);case 3:t=x.h;case 2:if("text/vtt"!=t)throw new Tt(1,2,2017,e);if(n=In,r=b.h.duration,b.i&&(r=b.i.presentationTimeline.getDuration()),1/0==r)throw new Tt(1,4,4045);return S(x,yc(b,e,b.H,b.g.streaming.retryParameters),4);case 4:if(o=x.h,!(i=$n[t]))throw new Tt(2,2,2014,t);for(a=i(),s={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},u=be(o),l=a.parseMedia(u,s,e),f=[],p=c(l),d=p.next(),h={};!d.done;h={ye:void 0,zc:void 0},d=p.next())h.zc=d.value,h.ye=null,m=function(t){return function(){return null==t.ye&&(t.ye=wn([e],[t.zc.payload])),t.ye||[]}}(h),g=new aa(h.zc.startTime,h.zc.endTime,m,0,null,null,0,0,1/0),h.zc.payload.includes("#xywh")&&4===(v=h.zc.payload.split("#xywh=")[1].split(",")).length&&g.fh({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)}),f.push(g);return y={id:b.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Fs(f),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ln(t||"","")])},b.l==Wc?b.qd.push(y):b.i.imageStreams.push(y),Rc(b),x.return(Ar(y))}})},o.th=function(e,t,n){var r,o,i,a,s=this;return O(function(u){switch(u.g){case 1:if(s.l!=Xc&&s.l!=Wc)throw new Tt(1,7,7004);if(n){u.u(2);break}return S(u,gc(s,e),3);case 3:n=u.h;case 2:return r=[],s.A&&(r=s.A.getCuePoints()),S(u,vc(s,e,t,"chapters",n,"",r),4);case 4:if(o=u.h,i=s.wg(),!(a=i.find(function(e){return e.language==t}))){u.u(5);break}return S(u,new Promise(function(e,t){s.m.ha(o,"load",e),s.m.ha(o,"error",function(){t(new Tt(1,2,2015))})}),6);case 6:return Rc(s),u.return(a);case 5:throw new Tt(1,2,2012)}})},o.Yi=function(e,t){this.fa.width=e,this.fa.height=t},o.If=function(e){if(this.l==Xc){var t=this.j;if(e=void 0===e?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=c(t.i.values()),r=n.next();!r.done;r=n.next())!(r=r.value).fd||r.Qa||r.sb||(r.fd=!1,Pu(t,r,e));t=!0}}else t=!1;return t},o.gf=function(){return Q("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},o.Rh=function(){return this.ab},o.ih=function(e){this.de=e},o.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===Hc||!navigator.onLine||0==t)return!1;if(this.i.variants.some(function(t){var n=t[e.type];return!(!n||n.id===e.id||t.disabledUntilTime||"audio"==e.type&&e.language!==n.language)})){for(var n=c(this.i.variants),r=n.next();!r.done;r=n.next()){var o=(r=r.value)[e.type];o&&o.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.je.Sa(1),Ec(this,!1,t=this.wb().video.reduce(function(e,t){return e+t.end-t.start},0),!0,!1),!0}return!1},V("shaka.Player",Yl),Yl.prototype.setVideoContainer=Yl.prototype.ih,Yl.prototype.getManifestParserFactory=Yl.prototype.Rh,Yl.prototype.getManifest=Yl.prototype.gf,Yl.prototype.retryStreaming=Yl.prototype.If,Yl.prototype.setMaxHardwareResolution=Yl.prototype.Yi,Yl.prototype.addChaptersTrack=Yl.prototype.th,Yl.prototype.addThumbnailsTrack=Yl.prototype.vh,Yl.prototype.addTextTrackAsync=Yl.prototype.uh,Yl.prototype.getStats=Yl.prototype.getStats,Yl.prototype.getBufferedInfo=Yl.prototype.wb,Yl.prototype.getSegmentAvailabilityDuration=Yl.prototype.Od,Yl.prototype.getPresentationStartTimeAsDate=Yl.prototype.Bg,Yl.prototype.getPlayheadTimeAsDate=Yl.prototype.Wh,Yl.prototype.setTextTrackVisibility=Yl.prototype.eh,Yl.prototype.getChapters=Yl.prototype.Kh,Yl.prototype.getChaptersTracks=Yl.prototype.wg,Yl.prototype.isTextTrackVisible=Yl.prototype.qf,Yl.prototype.selectVariantsByLabel=Yl.prototype.Ti,Yl.prototype.selectTextLanguage=Yl.prototype.Lf,Yl.prototype.selectAudioLanguage=Yl.prototype.Xg,Yl.prototype.getTextLanguages=Yl.prototype.$h,Yl.prototype.getAudioLanguages=Yl.prototype.Hh,Yl.prototype.getTextLanguagesAndRoles=Yl.prototype.ai,Yl.prototype.getAudioLanguagesAndRoles=Yl.prototype.Ih,Yl.prototype.selectVariantTrack=Yl.prototype.Mf,Yl.prototype.selectTextTrack=Yl.prototype.Yg,Yl.prototype.getThumbnails=Yl.prototype.Cg,Yl.prototype.getAllThumbnails=Yl.prototype.Gh,Yl.prototype.getImageTracks=Yl.prototype.Oh,Yl.prototype.getTextTracks=Yl.prototype.Ec,Yl.prototype.getVariantTracks=Yl.prototype.ic,Yl.prototype.cancelTrickPlay=Yl.prototype.Tc,Yl.prototype.trickPlay=Yl.prototype.wd,Yl.prototype.getPlaybackRate=Yl.prototype.eb,Yl.prototype.isBuffering=Yl.prototype.pf,Yl.prototype.getKeyStatuses=Yl.prototype.Ld,Yl.prototype.getActiveSessionsMetadata=Yl.prototype.ff,Yl.prototype.getExpiration=Yl.prototype.ad,Yl.prototype.drmInfo=Yl.prototype.drmInfo,Yl.prototype.keySystem=Yl.prototype.keySystem,Yl.prototype.isFullyLoaded=Yl.prototype.li,Yl.prototype.goToLive=Yl.prototype.hi,Yl.prototype.seekRange=Yl.prototype.Ob,Yl.prototype.isAudioOnly=Yl.prototype.ki,Yl.prototype.isInProgress=Yl.prototype.kc,Yl.prototype.isLive=Yl.prototype.V,Yl.prototype.getAdManager=Yl.prototype.ug,Yl.prototype.getAssetUri=Yl.prototype.Dc,Yl.prototype.getNetworkingEngine=Yl.prototype.xb,Yl.prototype.getMediaElement=Yl.prototype.Uh,Yl.prototype.getManifestType=Yl.prototype.hf,Yl.prototype.getLoadMode=Yl.prototype.yg,Yl.prototype.resetConfiguration=Yl.prototype.Ni,Yl.prototype.getBufferFullness=Yl.prototype.vg,Yl.prototype.getNonDefaultConfiguration=Yl.prototype.Ag,Yl.prototype.getConfiguration=Yl.prototype.getConfiguration,Yl.prototype.configure=Yl.prototype.configure,Yl.prototype.releaseAllMutexes=Yl.prototype.Ji,Yl.prototype.destroyAllPreloads=Yl.prototype.Qe,Yl.prototype.preload=Yl.prototype.preload,Yl.prototype.detachAndSavePreload=Yl.prototype.qg,Yl.prototype.unloadAndSavePreload=Yl.prototype.aj,Yl.prototype.load=Yl.prototype.load,Yl.prototype.updateStartTime=Yl.prototype.ej,Yl.prototype.unload=Yl.prototype.bc,Yl.prototype.detach=Yl.prototype.detach,Yl.prototype.attachCanvas=Yl.prototype.zh,Yl.prototype.attach=Yl.prototype.Rb,Yl.probeSupport=function(e){var t,n,r,o,i,a,s;return e=void 0===e||e,O(function(u){switch(u.g){case 1:if(t={},!e){u.u(2);break}return S(u,function(){var e,t,n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,A,M,R,_;return O(function(L){if(1==L.g){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t={"com.widevine.alpha":["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],"com.microsoft.playready.recommendation":["150","2000","3000"]},o={videoCapabilities:n=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:r=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],initDataTypes:["cenc","sinf","skd","keyids"]},i=[null,"cenc","cbcs","cbcs-1-9"],a=new Map,s=function(e,t){var n,r,o,i,s,u,l,c;return O(function(f){switch(f.g){case 1:return C(f,2),S(f,t.createMediaKeys(),4);case 4:E(f,3);break;case 2:return I(f),f.return();case 3:r=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),Ut()&&(r=!1),o=t.getConfiguration().videoCapabilities,i=t.getConfiguration().audioCapabilities,s={persistentState:r,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},a.has(e)&&a.get(e)?s=a.get(e):a.set(e,s),(u=o[0].encryptionScheme)&&!s.encryptionSchemes.includes(u)&&s.encryptionSchemes.push(u),(l=o[0].robustness)&&!s.videoRobustnessLevels.includes(l)&&s.videoRobustnessLevels.push(l),(c=i[0].robustness)&&!s.audioRobustnessLevels.includes(c)&&s.audioRobustnessLevels.push(c),k(f)}})},u=function(e,t,n,r){var i,a,u,l,f,p,d,h,m,g;return O(function(v){switch(v.g){case 1:for(C(v,2),i=lr(o),a=c(i.videoCapabilities),u=a.next();!u.done;u=a.next())(l=u.value).encryptionScheme=t,l.robustness=n;for(f=c(i.audioCapabilities),p=f.next();!p.done;p=f.next())(d=p.value).encryptionScheme=t,d.robustness=r;return(h=lr(i)).persistentState="required",h.sessionTypes=["persistent-license"],m=[h,i],S(v,navigator.requestMediaKeySystemAccess(e,m),4);case 4:return g=v.h,S(v,s(e,g),5);case 5:E(v,0);break;case 2:I(v),k(v)}})},l=function(e,t,o,i){var a,u,l;return O(function(c){switch(c.g){case 1:return C(c,2),a={type:"media-source",video:{contentType:n[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:r[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:e,video:{encryptionScheme:t,robustness:o},audio:{encryptionScheme:t,robustness:i}}},S(c,navigator.mediaCapabilities.decodingInfo(a),4);case 4:return u=c.h,l=u.keySystemAccess,S(c,s(e,l),5);case 5:E(c,0);break;case 2:I(c),k(c)}})},f=c(e),p=f.next();!p.done;p=f.next())d=p.value,a.set(d,null);for(h=[],m=c(i),g=m.next();!g.done;g=m.next())for(v=g.value,y=c(e),b=y.next();!b.done;b=y.next())"org.w3.clearkey"===(x=b.value)&&Kt()||(h.push(u(x,v,"","")),h.push(l(x,v,"","")));for(w=c(e),T=w.next();!T.done;T=w.next())for(A=T.value,M=c(t[A]||[]),R=M.next();!R.done;R=M.next())_=R.value,h.push(u(A,null,_,"")),h.push(u(A,null,"",_)),h.push(l(A,null,_,"")),h.push(l(A,null,"",_));return S(L,Promise.all(h),2)}return L.return(Lo(a))})}(),3);case 3:t=u.h;case 2:var l={};if(Lt())for(var p in ea)l[p]=!0;for(var d=(p=c(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!d.done;d=p.next())l[d=d.value]=Lt()?!!ea[d]:Dt(d);for(n=l,l={},d=(p=c(p='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(f(Hn)))).next();!d.done;d=p.next()){l[d=d.value]=!!Xn(d)||(Lt()?ie(d)||!!et(d):Dt(d));var h=d.split(";")[0];l[h]=l[h]||l[d]}return r=l,S(u,tn(),4);case 4:for(s in o=u.h,i={manifest:n,media:r,drm:t,hardwareResolution:o},a=$c)i[s]=a[s]();return u.return(i)}})},Yl.isBrowserSupported=function(){if(e.Promise||Q("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||Jt("Trident/"))return!1;var t=Kt();return!(t&&9>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Lt()||Dt("application/x-mpegurl"))},Yl.setAdManagerFactory=function(e){Yc=e},Yl.registerSupportPlugin=function(e,t){$c[e]=t},Yl.prototype.destroy=Yl.prototype.destroy;var Hc=0,qc=1,Xc=2,Wc=3;Yl.LoadMode={DESTROYED:Hc,NOT_LOADED:qc,MEDIA_SOURCE:Xc,SRC_EQUALS:Wc},Yl.version="v4.10.12";var Kc=["4","10"];pe=new function(e){this.g=e,this.i=ce,this.h=fe}(new ue(Number(Kc[0]),Number(Kc[1])));var $c={},Yc=null;function Qc(){this.g=[],this.i=this.l=this.j=this.h=0}function Jc(e){return e.g.length?e.g.reduce(function(e,t){return e+t},0)/e.g.length:0}function Zc(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new ne,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}function ef(){}function tf(t,n,r,o,i){var a=this;this.s=t,this.i=n,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=i,this.j=null,this.h=new ne,google.ima.settings.setLocale(r),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.12"),this.g=null,this.B=o||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){!function(t,n){if(t.l(new co("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.G))),t.o.customPlayheadTracker){var r={currentTime:t.i.currentTime};t.g=n.getAdsManager(r,t.B),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.D(t.i,"timeupdate",function(){t.i.duration&&(r.currentTime=t.i.currentTime)}),t.h.D(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.B);t.l(new co("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var o=t.g.getCuePoints();if(o.length){n=[];for(var i=(o=c(o)).next();!i.done;i=o.next())n.push({start:i.value,end:null});t.l(new co("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new co(n,t))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){nf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){of(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(t){of(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){af(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){af(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,rf(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.D(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,rf(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in e?(t.A=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,rf(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.A.observe(t.i)):t.h.D(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,rf(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),t.F||t.o.skipPlayDetection?t.g.start():t.h.ha(t.i,"play",function(){t.F=!0,t.g.start()})}catch(a){af(t,null)}}(a,t)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){nf(a,e)}),this.h.D(this.i,"ended",function(){a.m.contentComplete()}),this.h.ha(this.i,"play",function(){a.F=!0})}function nf(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.l(new co("ad-error",t)),af(e,null),e.l(new co("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function rf(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function of(e,t){var n=t.getAd();n?(e.j=new Zc(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new co("ad-content-pause-requested")),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new co("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?((t=e.j).l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Q("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function af(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new co("ad-content-resume-requested")),e.l(new co("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function sf(e,t,n,r,o){this.g=e,this.h=t,this.j=n,this.l=r,this.i=o}function uf(e,t,n,r){var o=this;this.F=e,this.B=t,this.i=n,this.C=null,this.m=!0,this.s=this.i,this.g=r,this.G=new Set,this.A=new Set,this.o=new Map,this.h=new Yl,df(this),this.I=new ne,this.j=new ne,this.H=!1,this.l=null,this.I.D(this.i,"timeupdate",function(){if(!o.H){var e=null==o.l||0==o.l;o.l=o.i.currentTime,(e=cf(o,e))&&ff(o,e,1,1,Date.now())}}),new _t(function(){var e,t,n,r,i,a,s,u,l,f;return O(function(p){switch(p.g){case 1:if(!o.A.size||o.H||null==o.l){p.u(0);break}e=!1,t=Array.from(o.A),n=o.B.Ob(),r=c(t),i=r.next();case 3:if(i.done){p.u(5);break}if(a=i.value,s=a.endTime||a.startTime,!(1<=n.start-s)){0<(u=a.startTime-o.l)&&10>=u&&(o.o.has(a)||o.o.set(a,o.h.preload(a.uri))),p.u(4);break}if(!o.o.has(a)){p.u(7);break}return S(p,o.o.get(a),8);case 8:(l=p.h)&&l.destroy(),o.o.delete(a);case 7:f=JSON.stringify(a),o.G.has(f)&&o.G.delete(f),o.A.delete(a),e=!0;case 4:i=r.next(),p.u(3);break;case 5:e&&pf(o),k(p)}})}).Sa(1)}function lf(e,t){var n,r,o,i,a,s,u,l;O(function(f){if(1==f.g)return e.B.yg()==Wc&&e.m?(Q("Unsupported interstitial when using single media element",t),f.return()):(df(e),n=!1,S(f,function(e,t){var n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,k,A,M,R,_,L,D,P,N,U,B;return O(function(O){switch(O.g){case 1:if(n=[],!t)return O.return(n);if(r=t.values.find(function(e){return"X-ASSET-URI"==e.key}),o=t.values.find(function(e){return"X-ASSET-LIST"==e.key}),!r&&!o)return O.return(n);if(i=t.values.find(function(e){return"X-RESTRICT"==e.key}),s=a=!0,i&&i.data&&(u=i.data,a=!u.includes("SKIP"),s=!u.includes("JUMP")),l=null,(f=t.values.find(function(e){return"X-RESUME-OFFSET"==e.key}))&&(p=f.data,l=parseFloat(p),isNaN(l)&&(l=null)),d=null,(h=t.values.find(function(e){return"X-PLAYOUT-LIMIT"==e.key}))&&(m=h.data,d=parseFloat(m),isNaN(d)&&(d=null)),y=v=g=!1,(b=t.values.find(function(e){return"CUE"==e.key}))&&(x=b.data,g=x.includes("ONCE"),v=x.includes("PRE"),y=x.includes("POST")),w=!1,(T=t.values.find(function(e){return"X-TIMELINE-OCCUPIES"==e.key}))?(k=T.data,w=k.includes("RANGE")):!f&&e.B.V()&&(w=!v&&!y),r){if(!(A=r.data))return O.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:A,isSkippable:a,Ie:s,Oc:l,Ef:d,once:g,Ab:v,nc:y,se:w}),O.u(2);break}if(!o){O.u(2);break}return(M=o.data)?(R=xo([M],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),_=e.B.xb().request(7,R),C(O,4),S(O,_.promise,6)):O.return(n);case 6:for(L=O.h,D=an(L.data),P=JSON.parse(D),N=c(P.ASSETS),U=N.next();!U.done;U=N.next())(B=U.value).URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:B.URI,isSkippable:a,Ie:s,Oc:l,Ef:d,once:g,Ab:v,nc:y,se:w});E(O,2);break;case 4:I(O);case 2:return O.return(n)}})}(e,t),2));if((r=f.h).length)for(o=c(r),i=o.next();!i.done;i=o.next())a=i.value,s=JSON.stringify(a),e.G.has(s)||(n=!0,e.G.add(s),e.A.add(a),u=!1,t.Ab&&null==e.l?u=!0:0!=a.startTime||a.Ie?null!=e.l&&0<(l=t.startTime-e.l)&&10>=l&&(u=!0):u=!0,u&&(e.o.has(a)||e.o.set(a,e.h.preload(a.uri))));else Q("Unsupported interstitial",t);n&&pf(e),k(f)})}function cf(e,t,n){n=void 0===n?0:n;var r=0,o=null;if(e.A.size&&null!=e.l)for(var i=e.i.ended,a=Array.from(e.A).sort(function(e,t){return t.startTime-e.startTime}),s=(a=c(a)).next();!s.done;s=a.next()){s=s.value;var u=!1;if(t?u=s.Ab:i?u=s.nc:s.Ab||s.nc||(u=0<(u=e.l-Math.round(1e3*s.startTime)/1e3)&&(1>=u||!s.Ie)),u){if(r==n){o=s;break}r++}}return o}function ff(e,t,n,r,o,i){var a,s,u,l,c,f,p,d,h,m,g,v,y,b;i=void 0===i?0:i,O(function(x){switch(x.g){case 1:if(a=Date.now(),!e.s.parentElement&&e.F&&e.F.appendChild(e.s),1==r&&1==n&&(n=Array.from(e.A).filter(function(e){return t.Ab?e.Ab==t.Ab:t.nc?e.nc==t.nc:.001>Math.abs(e.startTime-t.startTime)}).length),(t.once||t.Ab)&&(i++,e.A.delete(t),pf(e)),e.H=!0,!e.m||1!=r){x.u(2);break}return e.g(new co("ad-content-pause-requested",(new Map).set("saveLivePosition",!0))),s=new ro,u=function(t){return O(function(n){if(1==n.g)return"detach"!=t.state?n.u(0):Qt()?S(n,new Promise(function(e){return new _t(e).Y(.1)}),3):n.u(3);s.resolve(),e.j.jb(e.B,"onstatechange",u),k(n)})},e.j.D(e.B,"onstatechange",u),S(x,s,2);case 2:return e.m||(e.i.pause(),null!=t.Oc&&0!=t.Oc&&(e.i.currentTime+=t.Oc)),l=!1,c=null,f=function(){if(!e.m&&null==t.Oc)if(t.se&&t.endTime&&1/0!=t.endTime)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var n=Date.now();e.i.currentTime+=(n-o)/1e3,o=n}},p=function(){var a,s;return O(function(u){if(1==u.g)return f(),c&&c.stop(),(a=cf(e,t.Ab,r-i))?(e.g(new co("ad-stopped")),e.j.Ra(),ff(e,a,n,++r,o,i),u.u(0)):e.m?S(u,e.h.detach(),4):S(u,e.h.bc(),4);e.m&&(null==(s=t.Oc)&&(s=t.se&&t.endTime&&1/0!=t.endTime?t.endTime-(e.l||0):(Date.now()-o)/1e3),e.g(new co("ad-content-resume-requested",(new Map).set("offset",s)))),e.g(new co("ad-stopped")),e.j.Ra(),e.H=!1,e.m||(f(),e.i.ended||e.i.play()),k(u)})},d=function(t){return O(function(n){return l?n.return():(l=!0,e.g(new co("ad-error",(new Map).set("originalEvent",t))),S(n,p(),0))})},h=function(){return O(function(t){if(1==t.g)return l?t.return():(l=!0,S(t,p(),2));e.g(new co("ad-complete")),k(t)})},m=function(){return O(function(t){return l?t.return():(l=!0,e.g(new co("ad-skipped")),S(t,p(),0))})},g=new sf(e.s,t.isSkippable,m,n,r),e.m||(g.setMuted(e.i.muted),g.setVolume(e.i.volume)),e.g(new co("ad-started",(new Map).set("ad",g))),g.canSkipNow()&&e.g(new co("ad-skip-state-changed")),e.j.ha(e.h,"error",d),e.j.ha(e.h,"firstquartile",function(){f(),e.g(new co("ad-first-quartile"))}),e.j.ha(e.h,"midpoint",function(){f(),e.g(new co("ad-midpoint"))}),e.j.ha(e.h,"thirdquartile",function(){f(),e.g(new co("ad-third-quartile"))}),e.j.ha(e.h,"complete",h),e.j.D(e.s,"play",function(){e.g(new co("ad-resumed"))}),e.j.D(e.s,"pause",function(){e.g(new co("ad-paused"))}),e.j.D(e.s,"volumechange",function(){e.s.muted?e.g(new co("ad-muted")):e.g(new co("ad-volume-changed"))}),C(x,4),t.Ef&&(c=new _t(function(){g.skip()}).Y(t.Ef)),df(e),S(x,e.h.Rb(e.s),6);case 6:return e.o.has(t)?S(x,e.o.get(t),10):S(x,e.h.load(t.uri),8);case 10:return v=x.h,e.o.delete(t),S(x,v?e.h.load(v):e.h.load(t.uri),8);case 8:y=(Date.now()-a)/1e3,e.g(new co("ads-loaded",(new Map).set("loadTime",y))),e.m&&e.i.play(),E(x,0);break;case 4:b=I(x),d(b),k(x)}})}function pf(e){for(var t=[],n=c(e.A),r=n.next(),o={};!r.done;o={Qb:void 0},r=n.next())r=r.value,o.Qb={start:r.startTime,end:null},r.Ab?(o.Qb.start=0,o.Qb.end=null):r.nc?(o.Qb.start=-1,o.Qb.end=null):r.se&&(o.Qb.end=r.endTime),t.find(function(e){return function(t){return e.Qb.start==t.start&&e.Qb.end==t.end}}(o))||t.push(o.Qb);e.g(new co("ad-cue-points-changed",(new Map).set("cuepoints",t)))}function df(e){e.h.configure(e.B.Ag());var t=e.h.xb();t.mg(),t.ng(),bo(e.B.xb(),t)}function hf(e){this.h=e||"",this.g=0}function mf(e){gf(e,/[ \t]+/gm)}function gf(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function vf(e){return e.g==e.h.length?null:(e=gf(e,/[^ \t\n]*/gm))?e[0]:null}function yf(e,t,n,r,o){if(this.h=e,e=this.h.skipOffset)if(null==(e=gf(new hf(e),bf)))e=null;else{var i=Number(e[2]),a=Number(e[3]);e=59<i||59<a?null:(Number(e[4])||0)/1e3+a+60*i+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=o,this.i=t,this.l=n,this.o=r,this.m=!1}(o=Zc.prototype).needsSkipUI=function(){return!1},o.getDuration=function(){return this.g.getDuration()},o.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},o.getRemainingTime=function(){return this.h.getRemainingTime()},o.isPaused=function(){return this.i},o.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},o.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},o.canSkipNow=function(){return this.h.getAdSkippableState()},o.skip=function(){return this.h.skip()},o.pause=function(){return this.h.pause()},o.play=function(){return this.h.resume()},o.getVolume=function(){return this.h.getVolume()},o.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},o.isMuted=function(){return 0==this.h.getVolume()},o.isLinear=function(){return this.g.isLinear()},o.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},o.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},o.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},o.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},o.getTitle=function(){return this.g.getTitle()},o.getDescription=function(){return this.g.getDescription()},o.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},o.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},o.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},o.getAdId=function(){return this.g.getAdId()},o.getCreativeAdId=function(){return this.g.getCreativeAdId()},o.getAdvertiserName=function(){return this.g.getAdvertiserName()},o.getMediaUrl=function(){return this.g.getMediaUrl()},o.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},o.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},o.release=function(){this.h=this.g=null},V("shaka.ads.ClientSideAd",Zc),Zc.prototype.release=Zc.prototype.release,Zc.prototype.getPodIndex=Zc.prototype.getPodIndex,Zc.prototype.getTimeOffset=Zc.prototype.getTimeOffset,Zc.prototype.getMediaUrl=Zc.prototype.getMediaUrl,Zc.prototype.getAdvertiserName=Zc.prototype.getAdvertiserName,Zc.prototype.getCreativeAdId=Zc.prototype.getCreativeAdId,Zc.prototype.getAdId=Zc.prototype.getAdId,Zc.prototype.getVastMediaWidth=Zc.prototype.getVastMediaWidth,Zc.prototype.getVastMediaHeight=Zc.prototype.getVastMediaHeight,Zc.prototype.getVastMediaBitrate=Zc.prototype.getVastMediaBitrate,Zc.prototype.getDescription=Zc.prototype.getDescription,Zc.prototype.getTitle=Zc.prototype.getTitle,Zc.prototype.getPositionInSequence=Zc.prototype.getPositionInSequence,Zc.prototype.getSequenceLength=Zc.prototype.getSequenceLength,Zc.prototype.setMuted=Zc.prototype.setMuted,Zc.prototype.resize=Zc.prototype.resize,Zc.prototype.isLinear=Zc.prototype.isLinear,Zc.prototype.isMuted=Zc.prototype.isMuted,Zc.prototype.setVolume=Zc.prototype.setVolume,Zc.prototype.getVolume=Zc.prototype.getVolume,Zc.prototype.play=Zc.prototype.play,Zc.prototype.pause=Zc.prototype.pause,Zc.prototype.skip=Zc.prototype.skip,Zc.prototype.canSkipNow=Zc.prototype.canSkipNow,Zc.prototype.getTimeUntilSkippable=Zc.prototype.getTimeUntilSkippable,Zc.prototype.isSkippable=Zc.prototype.isSkippable,Zc.prototype.isPaused=Zc.prototype.isPaused,Zc.prototype.getRemainingTime=Zc.prototype.getRemainingTime,Zc.prototype.getMinSuggestedDuration=Zc.prototype.getMinSuggestedDuration,Zc.prototype.getDuration=Zc.prototype.getDuration,Zc.prototype.needsSkipUI=Zc.prototype.needsSkipUI,V("shaka.ads.Utils",ef),ef.ADS_LOADED="ads-loaded",ef.AD_STARTED="ad-started",ef.AD_FIRST_QUARTILE="ad-first-quartile",ef.AD_MIDPOINT="ad-midpoint",ef.AD_THIRD_QUARTILE="ad-third-quartile",ef.AD_COMPLETE="ad-complete",ef.AD_STOPPED="ad-stopped",ef.AD_SKIPPED="ad-skipped",ef.AD_VOLUME_CHANGED="ad-volume-changed",ef.AD_MUTED="ad-muted",ef.AD_PAUSED="ad-paused",ef.AD_RESUMED="ad-resumed",ef.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",ef.CUEPOINTS_CHANGED="ad-cue-points-changed",ef.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",ef.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",ef.AD_CLICKED="ad-clicked",ef.AD_PROGRESS="ad-progress",ef.AD_BUFFERING="ad-buffering",ef.AD_IMPRESSION="ad-impression",ef.AD_DURATION_CHANGED="ad-duration-changed",ef.AD_CLOSED="ad-closed",ef.AD_LOADED="ad-loaded",ef.ALL_ADS_COMPLETED="all-ads-completed",ef.AD_LINEAR_CHANGED="ad-linear-changed",ef.AD_METADATA="ad-metadata",ef.AD_RECOVERABLE_ERROR="ad-recoverable-error",ef.AD_ERROR="ad-error",ef.AD_BREAK_READY="ad-break-ready",ef.AD_INTERACTION="ad-interaction",ef.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",ef.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",ef.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",tf.prototype.configure=function(e){this.o=e},tf.prototype.stop=function(){this.g&&this.g.stop(),this.s&&wl(this.s)},tf.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()},(o=sf.prototype).needsSkipUI=function(){return!0},o.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},o.getMinSuggestedDuration=function(){return this.getDuration()},o.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},o.isPaused=function(){return this.g.paused},o.isSkippable=function(){return this.h},o.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},o.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},o.skip=function(){this.j()},o.pause=function(){return this.g.pause()},o.play=function(){return this.g.play()},o.getVolume=function(){return this.g.volume},o.setVolume=function(e){this.g.volume=e},o.isMuted=function(){return this.g.muted},o.isLinear=function(){return!0},o.resize=function(){},o.setMuted=function(e){this.g.muted=e},o.getSequenceLength=function(){return this.l},o.getPositionInSequence=function(){return this.i},o.getTitle=function(){return""},o.getDescription=function(){return""},o.getVastMediaBitrate=function(){return 0},o.getVastMediaHeight=function(){return 0},o.getVastMediaWidth=function(){return 0},o.getAdId=function(){return""},o.getCreativeAdId=function(){return""},o.getAdvertiserName=function(){return""},o.getMediaUrl=function(){return null},o.getTimeOffset=function(){return 0},o.getPodIndex=function(){return 0},o.release=function(){this.g=null},V("shaka.ads.InterstitialAd",sf),sf.prototype.release=sf.prototype.release,sf.prototype.getPodIndex=sf.prototype.getPodIndex,sf.prototype.getTimeOffset=sf.prototype.getTimeOffset,sf.prototype.getMediaUrl=sf.prototype.getMediaUrl,sf.prototype.getAdvertiserName=sf.prototype.getAdvertiserName,sf.prototype.getCreativeAdId=sf.prototype.getCreativeAdId,sf.prototype.getAdId=sf.prototype.getAdId,sf.prototype.getVastMediaWidth=sf.prototype.getVastMediaWidth,sf.prototype.getVastMediaHeight=sf.prototype.getVastMediaHeight,sf.prototype.getVastMediaBitrate=sf.prototype.getVastMediaBitrate,sf.prototype.getDescription=sf.prototype.getDescription,sf.prototype.getTitle=sf.prototype.getTitle,sf.prototype.getPositionInSequence=sf.prototype.getPositionInSequence,sf.prototype.getSequenceLength=sf.prototype.getSequenceLength,sf.prototype.setMuted=sf.prototype.setMuted,sf.prototype.resize=sf.prototype.resize,sf.prototype.isLinear=sf.prototype.isLinear,sf.prototype.isMuted=sf.prototype.isMuted,sf.prototype.setVolume=sf.prototype.setVolume,sf.prototype.getVolume=sf.prototype.getVolume,sf.prototype.play=sf.prototype.play,sf.prototype.pause=sf.prototype.pause,sf.prototype.skip=sf.prototype.skip,sf.prototype.canSkipNow=sf.prototype.canSkipNow,sf.prototype.getTimeUntilSkippable=sf.prototype.getTimeUntilSkippable,sf.prototype.isSkippable=sf.prototype.isSkippable,sf.prototype.isPaused=sf.prototype.isPaused,sf.prototype.getRemainingTime=sf.prototype.getRemainingTime,sf.prototype.getMinSuggestedDuration=sf.prototype.getMinSuggestedDuration,sf.prototype.getDuration=sf.prototype.getDuration,sf.prototype.needsSkipUI=sf.prototype.needsSkipUI,uf.prototype.configure=function(e){this.F&&this.m==e.supportsMultipleMediaElements&&((this.m=!e.supportsMultipleMediaElements)?(this.s=this.i,this.C&&(this.C.parentElement&&this.F.removeChild(this.C),this.C=null)):(this.C||((e=document.createElement(this.i.tagName)).autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.C=e),this.s=this.C))},uf.prototype.stop=function(){this.j&&this.j.Ra(),this.G.clear(),this.A.clear(),this.h.Qe(),this.o.clear(),this.h.detach(),this.H=!1,this.l=null},uf.prototype.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.F&&wl(this.F),this.h.destroy()},(o=yf.prototype).needsSkipUI=function(){return!0},o.getDuration=function(){return this.h.durationInSeconds},o.getMinSuggestedDuration=function(){return this.getDuration()},o.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},o.isPaused=function(){return this.g.paused},o.isSkippable=function(){return"number"==typeof this.j},o.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},o.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},o.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},o.pause=function(){return this.g.pause()},o.play=function(){return this.g.play()},o.getVolume=function(){return this.g.volume},o.setVolume=function(e){this.g.volume=e},o.isMuted=function(){return this.g.muted},o.isLinear=function(){return this.o},o.resize=function(){},o.setMuted=function(e){this.g.muted=e},o.getSequenceLength=function(){return this.l?this.l:1},o.getPositionInSequence=function(){return this.i?this.i:1},o.getTitle=function(){return this.h.adTitle},o.getDescription=function(){return""},o.getVastMediaBitrate=function(){return 0},o.getVastMediaHeight=function(){return 0},o.getVastMediaWidth=function(){return 0},o.getAdId=function(){return this.h.adId},o.getCreativeAdId=function(){return this.h.creativeId},o.getAdvertiserName=function(){return""},o.getMediaUrl=function(){return null},o.getTimeOffset=function(){return 0},o.getPodIndex=function(){return 0},o.release=function(){this.l=this.i=this.g=this.h=null},V("shaka.ads.MediaTailorAd",yf),yf.prototype.release=yf.prototype.release,yf.prototype.getPodIndex=yf.prototype.getPodIndex,yf.prototype.getTimeOffset=yf.prototype.getTimeOffset,yf.prototype.getMediaUrl=yf.prototype.getMediaUrl,yf.prototype.getAdvertiserName=yf.prototype.getAdvertiserName,yf.prototype.getCreativeAdId=yf.prototype.getCreativeAdId,yf.prototype.getAdId=yf.prototype.getAdId,yf.prototype.getVastMediaWidth=yf.prototype.getVastMediaWidth,yf.prototype.getVastMediaHeight=yf.prototype.getVastMediaHeight,yf.prototype.getVastMediaBitrate=yf.prototype.getVastMediaBitrate,yf.prototype.getDescription=yf.prototype.getDescription,yf.prototype.getTitle=yf.prototype.getTitle,yf.prototype.getPositionInSequence=yf.prototype.getPositionInSequence,yf.prototype.getSequenceLength=yf.prototype.getSequenceLength,yf.prototype.setMuted=yf.prototype.setMuted,yf.prototype.resize=yf.prototype.resize,yf.prototype.isLinear=yf.prototype.isLinear,yf.prototype.isMuted=yf.prototype.isMuted,yf.prototype.setVolume=yf.prototype.setVolume,yf.prototype.getVolume=yf.prototype.getVolume,yf.prototype.play=yf.prototype.play,yf.prototype.pause=yf.prototype.pause,yf.prototype.skip=yf.prototype.skip,yf.prototype.canSkipNow=yf.prototype.canSkipNow,yf.prototype.getTimeUntilSkippable=yf.prototype.getTimeUntilSkippable,yf.prototype.isSkippable=yf.prototype.isSkippable,yf.prototype.isPaused=yf.prototype.isPaused,yf.prototype.getRemainingTime=yf.prototype.getRemainingTime,yf.prototype.getMinSuggestedDuration=yf.prototype.getMinSuggestedDuration,yf.prototype.getDuration=yf.prototype.getDuration,yf.prototype.needsSkipUI=yf.prototype.needsSkipUI;var bf=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function xf(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.U=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.o=new ne}function wf(e,t){var n,r,o,i,a,s,u;O(function(l){return 1==l.g?t.staticResource?(n=Sf(t),e.F.get(n)?l.return():(r=xo([t.staticResource],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),o=e.K.request(7,r),C(l,2),e.F.set(n,[]),S(l,o.promise,4))):l.return():2!=l.g?(i=l.h,a=an(i.data),s=JSON.parse(a),u=s.apps,e.F.set(n,u),E(l,0)):(I(l),e.F.delete(n),void k(l))})}function Sf(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Tf(e){var t=e.h.currentTime;if(0!=t&&null==e.A){for(var n,r,o=c(e.j),i=o.next();!i.done;i=o.next())for(var a=c((i=i.value).ads),s=a.next();!s.done;s=a.next())if(s=s.value,r){if(s.startTimeInSeconds<t&&s.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=s,n=i;break}}else s.startTimeInSeconds<t&&(r=s,n=i);n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function kf(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,o=r.startTimeInSeconds+.5*r.durationInSeconds,i=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),Ef(e,"firstQuartile")):t>=o&&!e.s.includes("midpoint")?(e.s.push("midpoint"),Ef(e,"midpoint")):t>=i&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),Ef(e,"thirdQuartile")),r=e.g.getRemainingTime(),o=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<o&&Ef(e,"skipStateChanged"),0<o&&(0>=r||r>o)&&Cf(e)}if(!e.g||!e.g.isLinear()){e:for(r=c(e.j),o=r.next();!o.done&&(o=o.value,!e.g||!e.g.isLinear());o=r.next())for(i=0;i<o.ads.length;i++){var a=o.ads[i],s=a.startTimeInSeconds+a.durationInSeconds;if(a.startTimeInSeconds<=t&&s>t){if(e.N.includes(a.adId)){if(e.h.ended)continue;e.h.currentTime=s;break e}Cf(e),e.L=o,e.g=new yf(a,i+1,o.ads.length,!0,e.h),e.C=a,0===i&&Ef(e,"breakStart"),Af(e);break}}if(!e.g)for(o=(r=c(e.j)).next();!o.done&&(o=o.value,!e.g);o=r.next())for(i=0;i<o.nonLinearAdsList.length;i++)if((a=o.nonLinearAdsList[i]).nonLinearAdList.length){s=o.startTimeInSeconds;var u=e.F.get(Sf(a.nonLinearAdList[0]));if(s<=t&&u&&u.length){Cf(e),s=e;for(var l=(u=c(u)).next();!l.done;l=u.next())if((l=l.value).data.source.length){var f=document.createElement("img");f.src=l.data.source[0].url,f.style.top=(l.placeholder.top||0)+"%",f.style.height=100-(l.placeholder.top||0)+"%",f.style.left=(l.placeholder.left||0)+"%",f.style.maxWidth=100-(l.placeholder.left||0)+"%",f.style.objectFit="contain",f.style.position="absolute",s.B.appendChild(f)}e.L=o,e.g=new yf(a,i+1,o.ads.length,!1,e.h),e.C=a,0===i&&Ef(e,"breakStart"),Af(e);break}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function Cf(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;Ef(e,void 0!==t&&t?"skip":"complete");for(var n=(t=c(e.m)).next();!n.done;n=t.next())n=n.value,e.o.jb(n.target,n.type,n.listener);e.m=[],e.s=[],(t=e.g.getPositionInSequence())===(n=e.g.getSequenceLength())&&Ef(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function Af(e){var t=!1;e.h.paused?t=!0:(Ef(e,"impression"),Ef(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Ef(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Ef(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Ef(e,"impression"),Ef(e,"start"),t=!1):Ef(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Ef(e,"pause")}});for(var n=c(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function Ef(e,t){var n=e.C.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n)for(var r=(n=c(n.beaconUrls)).next();!r.done;r=n.next())(r=r.value)&&""!=r&&((r=xo([r],no())).method="POST",e.K.request(7,r));switch(t){case"impression":e.i(new co("ad-impression"));break;case"start":e.i(new co("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new co("ad-muted"));break;case"unmute":e.i(new co("ad-volume-changed"));break;case"resume":e.i(new co("ad-resumed"));break;case"pause":e.i(new co("ad-paused"));break;case"firstQuartile":e.i(new co("ad-first-quartile"));break;case"midpoint":e.i(new co("ad-midpoint"));break;case"thirdQuartile":e.i(new co("ad-third-quartile"));break;case"complete":e.i(new co("ad-complete")),e.i(new co("ad-stopped"));break;case"skip":e.i(new co("ad-skipped")),e.i(new co("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new co("ad-skip-state-changed"))}}function If(e,t){this.g=e,this.i=null,this.h=t}function Mf(e,t,n,r){var o=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new ne,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new co("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){!function(e,t){e.i(new co("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}})}(o,e)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){o.B.length?o.j.resolve(o.B):o.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),o.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),o.m=new If(e,o.l),o.A&&(o.m.i=o.A),o.i(new co("ad-started",(new Map).set("ad",o.m))),o.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){o.s.removeAttribute("ad-active");var e=o.l.currentTime;o.o&&o.o>e&&(o.l.currentTime=o.o,o.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){o.A=e.getStreamData().adProgressData,o.m&&(o.m.i=o.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){o.i(new co("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){o.i(new co("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){o.i(new co("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){o.i(new co("ad-complete")),o.i(new co("ad-stopped")),o.s.removeAttribute("ad-active"),o.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){o.i(new co("ad-skipped")),o.i(new co("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[];for(var n=(t=c(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});o.C=e,o.i(new co("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Rf(){ho.call(this),this.g=this.h=this.i=this.j=null,this.m=new Qc,this.o=navigator.language,this.l=null}function _f(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}function Lf(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof co){var n={};for(r in t)(e=t[r])&&"object"==x(e)?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(e=(n=c(Object.getOwnPropertyNames(t))).next();!e.done;e=n.next())r.add(e.value);for(n={},e=(r=c(r)).next();!e.done;e=r.next())n[e=e.value]=t[e];t={__type__:"Error",contents:n}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=c(ma(t))).next();!n.done;n=t.next())e=(n=n.value).end,r.start.push(n.start),r.end.push(e);t=r}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}})}function Df(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==x(t)&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==x(t)&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==x(t)&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n})}xf.prototype.stop=function(){for(var e=c(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.jb(t.target,t.type,t.listener);Cf(this),this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},xf.prototype.release=function(){this.stop(),this.o&&this.o.release()},xf.prototype.onManifestUpdated=function(e){this.I=e,""!=this.G&&(function(e,t,n){var r,o,i,a,s,u,l,f,p,d,h,m,g,v,y;O(function(b){if(1==b.g)return r=xo([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),o=e.K.request(7,r),C(b,2),S(b,o.promise,4);if(2!=b.g){if(i=b.h,a=[],s=an(i.data),0<(u=JSON.parse(s)).avails.length){if(JSON.stringify(e.j)!=JSON.stringify(u.avails)){for(e.j=u.avails,l=c(e.j),f=l.next();!f.done;f=l.next())for(p=f.value,d=c(p.nonLinearAdsList),h=d.next();!h.done;h=d.next())for(m=h.value,g=c(m.nonLinearAdList),v=g.next();!v.done;v=g.next())y=v.value,wf(e,y);a=e.getCuePoints(),e.i(new co("ad-cue-points-changed",(new Map).set("cuepoints",a)))}}else e.j.length&&e.i(new co("ad-cue-points-changed",(new Map).set("cuepoints",a))),Cf(e),e.j=[];return n&&(e.I||0<a.length)&&function(e){kf(e),e.I||(Tf(e),e.o.D(e.h,"seeked",function(){Tf(e)}),e.o.D(e.h,"ended",function(){Cf(e)})),e.o.D(e.h,"timeupdate",function(){kf(e)})}(e),E(b,0)}I(b),k(b)})}(this,this.G,this.R),this.R=!1)},xf.prototype.getCuePoints=function(){for(var e=[],t=c(this.j),n=t.next();!n.done;n=t.next())for(var r=(n=c(n.value.ads)).next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds});return e},(o=If.prototype).needsSkipUI=function(){return!0},o.getDuration=function(){return this.i?this.i.duration:-1},o.getMinSuggestedDuration=function(){return this.getDuration()},o.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},o.isPaused=function(){return this.h.paused},o.isSkippable=function(){return this.g.isSkippable()},o.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},o.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},o.skip=function(){this.h.currentTime+=this.getRemainingTime()},o.pause=function(){return this.h.pause()},o.play=function(){return this.h.play()},o.getVolume=function(){return this.h.volume},o.setVolume=function(e){this.h.volume=e},o.isMuted=function(){return this.h.muted},o.isLinear=function(){return!0},o.resize=function(){},o.setMuted=function(e){this.h.muted=e},o.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},o.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},o.getTitle=function(){return this.g.getTitle()},o.getDescription=function(){return this.g.getDescription()},o.getVastMediaBitrate=function(){return 0},o.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},o.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},o.getAdId=function(){return this.g.getAdId()},o.getCreativeAdId=function(){return this.g.getCreativeAdId()},o.getAdvertiserName=function(){return this.g.getAdvertiserName()},o.getMediaUrl=function(){return null},o.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},o.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},o.release=function(){this.h=this.i=this.g=null},V("shaka.ads.ServerSideAd",If),If.prototype.release=If.prototype.release,If.prototype.getPodIndex=If.prototype.getPodIndex,If.prototype.getTimeOffset=If.prototype.getTimeOffset,If.prototype.getMediaUrl=If.prototype.getMediaUrl,If.prototype.getAdvertiserName=If.prototype.getAdvertiserName,If.prototype.getCreativeAdId=If.prototype.getCreativeAdId,If.prototype.getAdId=If.prototype.getAdId,If.prototype.getVastMediaWidth=If.prototype.getVastMediaWidth,If.prototype.getVastMediaHeight=If.prototype.getVastMediaHeight,If.prototype.getVastMediaBitrate=If.prototype.getVastMediaBitrate,If.prototype.getDescription=If.prototype.getDescription,If.prototype.getTitle=If.prototype.getTitle,If.prototype.getPositionInSequence=If.prototype.getPositionInSequence,If.prototype.getSequenceLength=If.prototype.getSequenceLength,If.prototype.setMuted=If.prototype.setMuted,If.prototype.resize=If.prototype.resize,If.prototype.isLinear=If.prototype.isLinear,If.prototype.isMuted=If.prototype.isMuted,If.prototype.setVolume=If.prototype.setVolume,If.prototype.getVolume=If.prototype.getVolume,If.prototype.play=If.prototype.play,If.prototype.pause=If.prototype.pause,If.prototype.skip=If.prototype.skip,If.prototype.canSkipNow=If.prototype.canSkipNow,If.prototype.getTimeUntilSkippable=If.prototype.getTimeUntilSkippable,If.prototype.isSkippable=If.prototype.isSkippable,If.prototype.isPaused=If.prototype.isPaused,If.prototype.getRemainingTime=If.prototype.getRemainingTime,If.prototype.getMinSuggestedDuration=If.prototype.getMinSuggestedDuration,If.prototype.getDuration=If.prototype.getDuration,If.prototype.needsSkipUI=If.prototype.needsSkipUI,(o=Mf.prototype).configure=function(){},o.stop=function(){this.B="",this.o=null,this.C=[]},o.release=function(){this.stop(),this.h&&this.h.release()},o.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},o.getCuePoints=function(){return this.C},v(Rf,ho),(o=Rf.prototype).setLocale=function(e){this.o=e},o.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},o.initInterstitial=function(e,t,n){var r=this;this.j&&this.j.release(),this.j=new uf(e,t,n,function(e){return _f(r,e)}),this.j.configure(this.l)},o.initClientSide=function(t,n,r){var o=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Tt(2,10,1e4);this.i&&this.i.release(),this.i=new tf(t,n,this.o,r,function(e){return _f(o,e)}),this.i.configure(this.l)},o.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),ho.prototype.release.call(this)},o.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new co("ad-stopped")),this.dispatchEvent(new co("ad-content-attach-requested")),this.m=new Qc},o.requestClientSideAds=function(e){if(!this.i)throw new Tt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},o.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new Tt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},o.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new xf(e,t,n,function(e){return _f(r,e)})},o.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new Tt(1,10,10005);var r=this.h;return n=void 0===n?"":n,r.l?e=Promise.reject(new Tt(1,10,10004)):(r.l=new ro,function(e,t,n){var r,o,i,a,s,u,l,c,f,p,d;O(function(h){if(1==h.g)return(r=xo([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",n&&(o=JSON.stringify(n),r.body=ln(o)),i=e.K.request(7,r),C(h,2),S(h,i.promise,4);if(2!=h.g){if(a=h.h,s=an(a.data),!(u=JSON.parse(s)).manifestUrl||!u.trackingUrl)throw Error("Insufficient data from MediaTailor.");return l=new st(t),c=new st(u.trackingUrl),e.G=l.resolve(c).toString(),f=Date.now()/1e3,p=f-e.U,e.i(new co("ads-loaded",(new Map).set("loadTime",p))),d=new st(u.manifestUrl),e.l.resolve(l.resolve(d).toString()),e.l=null,E(h,0)}if(I(h),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,h.return();e.l.resolve(e.H),e.l=null,k(h)})}(r,e,t),r.H=n||"",r.U=Date.now()/1e3,e=r.l),e},o.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new Tt(1,10,10005);var t=this.h;t.G=e,t.i(new co("ads-loaded",(new Map).set("loadTime",0)))},o.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new Tt(2,10,10002);this.g&&this.g.release(),this.g=new Mf(t,n,this.o,function(e){return _f(r,e)}),this.g.configure(this.l)},o.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new Tt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.12",(n=this.g).j?e=Promise.reject(new Tt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new ro,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},o.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Tt(1,10,10003);(e.mpt||e.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.12",this.g.g.replaceAdTagParameters(e)},o.getServerSideCuePoints=function(){return le("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},o.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},o.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Jc(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},o.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},o.onDashTimedMetadata=function(e){this.g&&"urn:google:dai:2018"==e.schemeIdUri&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},o.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},o.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},o.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&lf(this.j,n)},V("shaka.ads.AdManager",Rf),Rf.prototype.onInterstitialMetadata=Rf.prototype.onInterstitialMetadata,Rf.prototype.onCueMetadataChange=Rf.prototype.onCueMetadataChange,Rf.prototype.onHlsTimedMetadata=Rf.prototype.onHlsTimedMetadata,Rf.prototype.onDashTimedMetadata=Rf.prototype.onDashTimedMetadata,Rf.prototype.onManifestUpdated=Rf.prototype.onManifestUpdated,Rf.prototype.getStats=Rf.prototype.getStats,Rf.prototype.getCuePoints=Rf.prototype.getCuePoints,Rf.prototype.getServerSideCuePoints=Rf.prototype.getServerSideCuePoints,Rf.prototype.replaceServerSideAdTagParameters=Rf.prototype.replaceServerSideAdTagParameters,Rf.prototype.requestServerSideStream=Rf.prototype.requestServerSideStream,Rf.prototype.initServerSide=Rf.prototype.initServerSide,Rf.prototype.addMediaTailorTrackingUrl=Rf.prototype.addMediaTailorTrackingUrl,Rf.prototype.requestMediaTailorStream=Rf.prototype.requestMediaTailorStream,Rf.prototype.initMediaTailor=Rf.prototype.initMediaTailor,Rf.prototype.updateClientSideAdsRenderingSettings=Rf.prototype.updateClientSideAdsRenderingSettings,Rf.prototype.requestClientSideAds=Rf.prototype.requestClientSideAds,Rf.prototype.onAssetUnload=Rf.prototype.onAssetUnload,Rf.prototype.release=Rf.prototype.release,Rf.prototype.initClientSide=Rf.prototype.initClientSide,Rf.prototype.initInterstitial=Rf.prototype.initInterstitial,Rf.prototype.configure=Rf.prototype.configure,Rf.prototype.setLocale=Rf.prototype.setLocale,Rf.ADS_LOADED="ads-loaded",Rf.AD_STARTED="ad-started",Rf.AD_FIRST_QUARTILE="ad-first-quartile",Rf.AD_MIDPOINT="ad-midpoint",Rf.AD_THIRD_QUARTILE="ad-third-quartile",Rf.AD_COMPLETE="ad-complete",Rf.AD_STOPPED="ad-stopped",Rf.AD_SKIPPED="ad-skipped",Rf.AD_VOLUME_CHANGED="ad-volume-changed",Rf.AD_MUTED="ad-muted",Rf.AD_PAUSED="ad-paused",Rf.AD_RESUMED="ad-resumed",Rf.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Rf.CUEPOINTS_CHANGED="ad-cue-points-changed",Rf.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Rf.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Rf.AD_CLICKED="ad-clicked",Rf.AD_PROGRESS="ad-progress",Rf.AD_BUFFERING="ad-buffering",Rf.AD_IMPRESSION="ad-impression",Rf.AD_DURATION_CHANGED="ad-duration-changed",Rf.AD_CLOSED="ad-closed",Rf.AD_LOADED="ad-loaded",Rf.ALL_ADS_COMPLETED="all-ads-completed",Rf.AD_LINEAR_CHANGED="ad-linear-changed",Rf.AD_METADATA="ad-metadata",Rf.AD_RECOVERABLE_ERROR="ad-recoverable-error",Rf.AD_ERROR="ad-error",Rf.AD_BREAK_READY="ad-break-ready",Rf.AD_INTERACTION="ad-interaction",Rf.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Rf.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Rf.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Yc=function(){return new Rf};var Pf="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Of="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Nf=["loop","playbackRate"],Uf=["pause","play"],Bf={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},jf={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Ff={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},zf=[["getConfiguration","configure"]],Gf=[["isTextTrackVisible","setTextTrackVisibility"]],Vf="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Hf=["attach","attachCanvas","detach","load","unload"];function qf(e,t,n,r,o,i,a){var s=this;this.G=e,this.K=a,this.l=new _t(t),this.L=n,this.s=!1,this.A=r,this.F=o,this.N=i,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return $f(s)},this.C=function(e,t){switch((e=Df(t)).type){case"event":var n=e.targetName,r=fo(e.event);s.A(n,r);break;case"update":for(r in n=e.update)for(var o in e=s.g[r]||{},n[r])e[o]=n[r][o];s.s&&(s.L(),s.s=!1);break;case"asyncComplete":if(r=e.id,o=e.error,e=s.i[r],delete s.i[r],e)if(o){for(n in r=new Tt(o.severity,o.category,o.code),o)r[n]=o[n];e.reject(r)}else e.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,np.add(this)}function Xf(e,t){var n=e.N();ep=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),$f(e),Qf(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Wf(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new Tt(2,8,n,t))}function Kf(e){var t=ep;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function $f(e){var t=!!ep&&"connected"==ep.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};Yf(e)}e.h=t,e.I=t?ep.receiver.friendlyName:"",e.l.tc()}function Yf(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Tt(1,7,7e3))}}function Qf(e,t){t=Lf(t);var n=ep;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Z)}catch(r){throw t=new Tt(2,8,8005,r),n=new co("error",(new Map).set("detail",t)),e.A("player",n),e.Cc(),t}}(o=qf.prototype).destroy=function(){return np.delete(this),Yf(this),ep&&Kf(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},o.fb=function(){return this.h},o.Ff=function(){return this.I},o.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.tc();var t=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=c(np),n=t.next();!n.done;n=t.next()){var r=e;(n=n.value).j=new ro,n.s=!0,Xf(n,r)}},function(e){for(var t=c(np),n=t.next();!n.done;n=t.next())n=n.value,Zf="available"==e,n.l.tc()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),Zf&&this.l.Y(Jf),(t=ep)&&t.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new ro,this.s=!0,Xf(this,t)):ep=null}else e.__onGCastApiAvailable!==rp&&(tp=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=rp)},o.Nf=function(e){this.o=e,this.h&&Qf(this,{type:"appData",appData:this.o})},o.cast=function(){var e=this;return O(function(t){if(!e.m)throw new Tt(1,8,8e3);if(!Zf)throw new Tt(1,8,8001);if(e.h)throw new Tt(1,8,8002);return e.j=new ro,chrome.cast.requestSession(function(t){return Xf(e,t)},function(t){return Wf(e,t)}),S(t,e.j,0)})},o.Cc=function(){if(this.h){if(Yf(this),ep){Kf(this);try{ep.stop(function(){},function(){})}catch(gS){}ep=null}$f(this)}},o.get=function(e,t){var n=this;if("video"==e){if(Uf.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(f(N.apply(0,arguments))))}}else if("player"==e){if(Ff[t]&&!this.get("player","isLive")())return function(){};if(Vf.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(f(N.apply(0,arguments))))};if(Hf.includes(t))return function(){return n.Ki.apply(n,[e,t].concat(f(N.apply(0,arguments))))};if(Bf[t]||jf[t])return function(){return n.g[e][t]}}return this.g[e][t]},o.set=function(e,t,n){this.g[e][t]=n,Qf(this,{type:"set",targetName:e,property:t,value:n})},o.Ug=function(e,t){Qf(this,{type:"call",targetName:e,methodName:t,args:N.apply(2,arguments)})},o.Ki=function(e,t){var n=N.apply(2,arguments),r=new ro,o=this.H.toString();this.H++,this.i[o]=r;try{Qf(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:o})}catch(i){r.reject(i)}return r};var Jf=.02,Zf=!1,ep=null,tp=null,np=new Set;function rp(t){if(tp?e.__onGCastApiAvailable=tp:delete e.__onGCastApiAvailable,tp=null,t)for(var n=c(np),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function op(e,t,n,r){r=void 0!==r&&r,ho.call(this);var o=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new qf(n,function(){return sp(o)},function(){return up(o)},function(e,t){return fp(o,e,t)},function(){return lp(o)},function(){return ap(o)},r),function(e){e.g.init(),e.m=new ne;for(var t=c(Pf),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(t){e.g.fb()||(t=fo(t),e.j.dispatchEvent(t))});for(var r in po)e.m.D(e.h,po[r],function(t){e.g.fb()||e.o.dispatchEvent(t)});for(var o in e.l={},t={},e.i)(t={nd:t.nd}).nd=o,Object.defineProperty(e.l,t.nd,{configurable:!1,enumerable:!0,get:function(t){return function(){return cp(e,t.nd)}}(t),set:function(t){return function(n){var r=t.nd;e.g.fb()?e.g.set("video",r,n):e.i[r]=n}}(t)});e.s={},ip(e,function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.A.has(t)&&(t=e.A.get(t)),"addEventListener"==t)return function(t,n,r){return e.o.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.o.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.xb()};if("getDrmEngine"==t)return function(){return e.h.B};if("getAdManager"==t)return function(){return e.h.ug()};if("setVideoContainer"==t)return function(t){return e.h.ih(t)};if(e.g.fb()){if("getManifest"==t||"drmInfo"==t)return function(){return Q(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return Q(t+"() does not work while casting!"),Promise.resolve()}}return e.g.fb()&&0==Object.keys(e.g.g.video).length&&(Bf[t]||jf[t])||!e.g.fb()?e.h[t].bind(e.h):e.g.get("player",t)}(e,t)}})}),function(e){var t=new Map;ip(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}(e),e.j=new ho,e.j.me=e.l,e.o=new ho,e.o.me=e.s}(this)}function ip(e,t){function n(e){return"constructor"!=e&&"function"==typeof o[e]&&!i.has(e)}var r,o=e.h,i=new Set;for(r in o)n(r)&&(i.add(r),t(r,o[r]));for(e=Object.getPrototypeOf(o),r=Object.getPrototypeOf({});e&&e!=r;){for(var a=c(Object.getOwnPropertyNames(e)),s=a.next();!s.done;s=a.next())n(s=s.value)&&(i.add(s),t(s,o[s]));e=Object.getPrototypeOf(e)}}function ap(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dc(),startTime:null};e.i.pause();for(var n=c(Nf),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),r=(n=c(zf)).next();!r.done;r=n.next()){var o=r.value;r=o[1],o=e.h[o[0]](),t.player[r]=o}for(r=(n=c(Gf)).next();!r.done;r=n.next())r=(o=r.value)[1],o=e.h[o[0]](),t.playerAfterLoad[r]=o;return t}function sp(e){var t=new co("caststatuschanged");e.dispatchEvent(t)}function up(e){var t=new co(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function lp(e){for(var t=c(zf),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var o=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var i,a=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime")),(r=e.g.get("player","getTextTracks")())&&r.length&&(i=r.find(function(e){return e.active}));var s=e.g.get("player","isTextTrackVisible")();o&&(e.i.autoplay=!1,t=e.h.load(o,n));var u={};for(r=(n=c(Nf)).next();!r.done;r=n.next())r=r.value,u[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var t=c(Nf),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=u[n];for(n=(t=c(Gf)).next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}e.h.eh(s),i&&e.h.Lf(i.language,i.roles,i.forced),e.i.autoplay=a,o&&e.i.play()}},function(t){t=new co("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)})}function cp(e,t){if("addEventListener"==t)return function(t,n,r){return e.j.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.j.removeEventListener(t,n,r)};if(e.g.fb()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.fb()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function fp(e,t,n){e.g.fb()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function pp(e,t,n,r){ho.call(this);var o=this;this.g=e,this.h=t,this.j=new ne,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(e){return e},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new _t(function(){gp(o)}),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return dp(e)},t.onSenderDisconnected=function(){return dp(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&xp(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),xp(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return function(e,t){var n=Df(t.data);switch(n.type){case"PLAY":e.g.play(),wp(e);break;case"PAUSE":e.g.pause(),wp(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.g.play(),wp(e)):r&&"PLAYBACK_PAUSE"==r&&(e.g.pause(),wp(e));break;case"STOP":e.h.bc().then(function(){e.h&&wp(e)});break;case"GET_STATUS":yp(e,Number(n.requestId));break;case"VOLUME":t=(r=n.volume).level,r=r.muted;var o=e.g.volume,i=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=r&&(e.g.muted=r),o==e.g.volume&&i==e.g.muted||wp(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,o=e.I(t.contentId),i=n.autoplay||!0,e.F(t.customData),i&&(e.g.autoplay=!0),e.h.load(o,r).then(function(){e.h&&yp(e)}).catch(function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),xp(e,{requestId:Number(n.requestId),type:r},e.s)});break;default:xp(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=Df(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,function(e,t,n){var r,o,i,a,s,u,l,c,f,p;O(function(d){switch(d.g){case 1:for(r in t.player)o=t.player[r],e.h[r](o);return e.F(n),i=e.g.autoplay,t.manifest?(e.g.autoplay=!1,C(d,5),S(d,e.h.load(t.manifest,t.startTime),7)):S(d,Promise.resolve(),3);case 7:E(d,3);break;case 5:return a=I(d),s=(new Map).set("detail",a),u=new co("error",s),e.h&&e.h.dispatchEvent(u),d.return();case 3:if(!e.h)return d.return();for(l in t.video)c=t.video[l],e.g[l]=c;for(f in t.playerAfterLoad)p=t.playerAfterLoad[f],e.h[f](p);e.g.autoplay=i,t.manifest&&(e.g.play(),wp(e)),k(d)}})}(e,n.initState,n.appData),gp(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,o=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==o){t.setSystemVolumeLevel(n);break}if("muted"==o){t.setSystemVolumeMuted(n);break}}e.H[r][o]=n;break;case"call":(r=e.H[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,o=n.methodName,"player"==r&&"load"==o&&(e.m=0,e.B=!1);var i=n.id,a=t.senderId;n=(t=e.H[r])[o].apply(t,n.args),"player"==r&&"load"==o&&(n=n.then(function(){e.A=!0})),n.then(function(){return bp(e,a,i,null)},function(t){return bp(e,a,i,t)})}}(e,t)},t.start();for(var n=(t=c(Pf)).next();!n.done;n=t.next())e.j.D(e.g,n.value,function(t){return mp(e,"video",t)});for(var r in po)e.j.D(e.h,po[r],function(t){return mp(e,"player",t)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,hp(e)}),e.j.D(e.g,"playing",function(){e.o=!1,hp(e)}),e.j.D(e.g,"pause",function(){hp(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,hp(e)}),e.j.D(e.g,"ended",function(){new _t(function(){e.g&&e.g.ended&&(e.o=!0,hp(e))}).Y(Tp)})}(this)}function dp(e){e.m=0,e.A=!0,e.G=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,hp(e)}function hp(e){var t;O(function(n){return 1==n.g?S(n,Promise.resolve(),2):e.h?(t=new co("caststatuschanged"),e.dispatchEvent(t),vp(e)||wp(e),void k(n)):n.return()})}function mp(e,t,n){e.h&&(gp(e),xp(e,{type:"event",targetName:t,event:n},e.l))}function gp(e){e.C.Y(Sp);for(var t={video:{},player:{}},n=c(Of),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.V())for(var o in Ff)0==e.m%Ff[o]&&(t.player[o]=e.h[o]());for(var i in Bf)0==e.m%Bf[i]&&(t.player[i]=e.h[i]());for(var a in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),xp(e,{type:"update",update:t},e.l),jf)0==e.m%jf[a]&&((t={player:{}}).player[a]=e.h[a](),xp(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),vp(e)}function vp(e){return!(!e.A||!e.g.duration&&!e.h.V()||(yp(e),e.A=!1,0))}function yp(e,t){var n={contentId:e.h.Dc(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),wp(e,void 0===t?0:t,n)}function bp(e,t,n,r){e.h&&xp(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function xp(e,t,n,r){e.G&&(e=Lf(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function wp(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?kp:e.h.pf()?Ap:e.g.paused?Ep:Cp,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),xp(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}v(op,ho),(o=op.prototype).destroy=function(e){return e&&this.g.Cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,ho.prototype.release.call(this),Promise.all(e)},o.fi=function(){return this.l},o.Vh=function(){return this.s},o.Ah=function(){return this.g.m&&Zf},o.fb=function(){return this.g.fb()},o.Ff=function(){return this.g.Ff()},o.cast=function(){var e=this;return O(function(t){return 1==t.g?S(t,e.g.cast(),2):e.h?S(t,e.h.bc(),0):t.return()})},o.Nf=function(e){this.g.Nf(e)},o.$i=function(){var e;(e=this.g).h&&chrome.cast.requestSession(function(t){return Xf(e,t)},function(t){return Wf(e,t)})},o.Cc=function(){this.g.Cc()},o.Bh=function(e,t){t=void 0!==t&&t;var n=this;return O(function(r){if(1==r.g)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Cc(),S(r,n.g.destroy(),2));n.g=null,n.g=new qf(e,function(){return sp(n)},function(){return up(n)},function(e,t){return fp(n,e,t)},function(){return lp(n)},function(){return ap(n)},t),n.g.init(),k(r)})},V("shaka.cast.CastProxy",op),op.prototype.changeReceiverId=op.prototype.Bh,op.prototype.forceDisconnect=op.prototype.Cc,op.prototype.suggestDisconnect=op.prototype.$i,op.prototype.setAppData=op.prototype.Nf,op.prototype.cast=op.prototype.cast,op.prototype.receiverName=op.prototype.Ff,op.prototype.isCasting=op.prototype.fb,op.prototype.canCast=op.prototype.Ah,op.prototype.getPlayer=op.prototype.Vh,op.prototype.getVideo=op.prototype.fi,op.prototype.destroy=op.prototype.destroy,v(pp,ho),(o=pp.prototype).isConnected=function(){return this.G},o.mi=function(){return this.o},o.Wi=function(e){this.i=e},o.Dh=function(){this.i=null},o.Xi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},o.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},o.Ui=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},o.destroy=function(){var e,t=this;return O(function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.C&&(t.C.stop(),t.C=null),t.g=null,t.H=null,t.F=null,t.G=!1,t.o=!0,t.l=null,t.s=null,ho.prototype.release.call(t),S(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),k(n)})},V("shaka.cast.CastReceiver",pp),pp.prototype.destroy=pp.prototype.destroy,pp.prototype.setContentArtist=pp.prototype.Ui,pp.prototype.setContentImage=pp.prototype.Vi,pp.prototype.setContentTitle=pp.prototype.Xi,pp.prototype.clearContentMetadata=pp.prototype.Dh,pp.prototype.setContentMetadata=pp.prototype.Wi,pp.prototype.isIdle=pp.prototype.mi,pp.prototype.isConnected=pp.prototype.isConnected;var Sp=.5,Tp=5,kp="IDLE",Cp="PLAYING",Ap="BUFFERING",Ep="PAUSED";function Ip(e,t,n,r,o){if(r>=o)return null;for(var i=-1,a=-1,s=0;s<n.length;s++)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){i=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){a=s;break}if(-1===i||-1===a)return null;for(var u=s=!1,l="white",c="black",f=Mp(r,o,s,u,l,c);i<=a;i++){for(var p=n[i],d=-1,h=-1,m=0;m<p.length;m++)if(null!=p[m]&&""!==p[m].g.trim()){d=m;break}for(m=p.length-1;0<=m;m--)if(null!=p[m]&&""!==p[m].g.trim()){h=m;break}if(-1===d||-1===h)p=Rp(r,o),e.nestedCues.push(p);else{for(;d<=h;d++)if(m=p[d]){var g=m.l,v=m.i,y=m.j,b=m.h;g==s&&v==u&&y==l&&b==c||(f.payload&&e.nestedCues.push(f),f=Mp(r,o,g,v,y,b),s=g,u=v,l=y,c=b),f.payload+=m.g}else f.payload+=" ";f.payload&&e.nestedCues.push(f),i!==a&&(f=Rp(r,o),e.nestedCues.push(f)),f=Mp(r,o,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Mp(e,t,n,r,o,i){return e=new Pe(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=o,e.backgroundColor=i,e}function Rp(e,t){return(e=new Pe(e,t,"")).lineBreak=!0,e}function _p(e,t,n,r,o){this.g=e,this.l=t,this.i=n,this.h=r,this.j=o}function Lp(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Pp(this)}function Dp(e,t,n){var r="CC"+(1+(e.A<<1|e.s)),o=new Pe(t,n,"");o.lineInterpretation=1;var i=Gp.get(e.g);return i&&(o.line=i),(t=Ip(o,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(i=Gp.get(e.g+3-t.cue.nestedCues.length))&&(o.line=i),t}function Pp(e){Up(e,0,15),e.g=1}function Op(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=Bp.has(n)?Bp.get(n):String.fromCharCode(n);break;case 1:r=jp.get(n);break;case 2:e.i[e.g].pop(),r=Fp.get(n);break;case 3:e.i[e.g].pop(),r=zp.get(n)}r&&e.i[e.g].push(new _p(r,e.m,e.j,e.o,e.l))}}function Np(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(e){return e});else for(var o=0;o<r;o++)e.i[t+o]=e.i[n+o].map(function(e){return e})}function Up(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var Bp=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),jp=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),Fp=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),zp=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),Gp=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Vp(e,t){this.h=0,this.o=new Lp(e,t),this.i=new Lp(e,t),this.g=this.j=new Lp(e,t),this.l=0,this.m=null}function Hp(e,t,n){e.g=e.i;var r=e.g,o=null;return 3!==e.h&&4!==e.h&&(o=Dp(r,e.l,n),(n=e.i).g=0<n.h?n.h:0,Up(n,0,15),(n=e.j).g=0<n.h?n.h:0,Up(n,0,15),r.g=15),e.h=3,r.h=t,o}function qp(e){e.h=1,e.g=e.j,e.g.h=0}function Xp(e){J("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var Wp="black green blue cyan red yellow magenta black".split(" "),Kp="white green blue cyan red yellow magenta white_italics".split(" ");function $p(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",Yp(this)}function Yp(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Qp())}function Qp(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Jp(e,t){Zp(e)&&(e.i[e.h][e.g]=new _p(t,e.C,e.A,e.s,e.B),e.g++)}function Zp(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}function ed(e,t,n){var r=new Pe(e.j,t,"");r.textAlign=0===e.F?"left":1===e.F?"right":Be;var o=r.region;switch(e.I&&(o.id+="svc"+e.I),o.id+="win"+e.N,o.height=e.o,o.width=e.m,o.heightUnits=2,o.widthUnits=2,o.viewportAnchorX=e.H,o.viewportAnchorY=e.L,o.viewportAnchorUnits=e.K?Ie:2,e.G){case 0:o.regionAnchorX=0,o.regionAnchorY=0;break;case 1:o.regionAnchorX=50,o.regionAnchorY=0;break;case 2:o.regionAnchorX=100,o.regionAnchorY=0;break;case 3:o.regionAnchorX=0,o.regionAnchorY=50;break;case 4:o.regionAnchorX=50,o.regionAnchorY=50;break;case 5:o.regionAnchorX=100,o.regionAnchorY=50;break;case 6:o.regionAnchorX=0,o.regionAnchorY=100;break;case 7:o.regionAnchorX=50,o.regionAnchorY=100;break;case 8:o.regionAnchorX=100,o.regionAnchorY=100}return(n=Ip(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function td(){this.i=[],this.h=null,this.g=0}function nd(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new rd(e.h)),e.h=null,e.g=0))}function rd(e){this.g=0,this.h=e}function od(e){if(!e.na())throw new Tt(2,2,3e3);return e.h[e.g++]}function id(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function ad(e,t,n,r){if(128<=n&&135>=n)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=od(t).value,t=null;for(var o=(n=c(sd(e,n))).next();!o.done;o=n.next())(o=e.h[o.value]).isVisible()&&(t=ed(o,r,e.i)),Yp(o);return t}if(137===n)for(n=(t=c(sd(e,t=od(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=r),n.l=!0;else{if(138===n){for(n=od(t).value,t=null,o=(n=c(sd(e,n))).next();!o.done;o=n.next())(o=e.h[o.value]).isVisible()&&(t=ed(o,r,e.i)),o.l=!1;return t}if(139===n){for(n=od(t).value,t=null,o=(n=c(sd(e,n))).next();!o.done;o=n.next())(o=e.h[o.value]).isVisible()?t=ed(o,r,e.i):o.j=r,o.l=!o.l;return t}if(140===n)return ud(e,t=od(t).value,r);if(143===n)return r=ud(e,255,r),ld(e),r;if(144===n)t.skip(1),r=od(t).value,e.g&&(e.g.A=0<(128&r),e.g.C=0<(64&r));else if(145===n)r=od(t).value,n=od(t).value,t.skip(1),e.g&&(t=cd((48&n)>>4,(12&n)>>2,3&n),e.g.B=cd((48&r)>>4,(12&r)>>2,3&r),e.g.s=t);else if(146===n)r=od(t).value,t=od(t).value,e.g&&((e=e.g).h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=od(t).value,t.skip(1),e.g&&(e.g.F=3&r);else if(152<=n&&159>=n){if(n=(15&n)-8,!(o=null!==e.h[n])){var i=new $p(n,e.i);i.j=r,e.h[n]=i}r=od(t).value,i=od(t).value;var a=od(t).value,s=od(t).value,u=od(t).value;t=od(t).value,o&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),(t=e.h[n]).l=0<(32&r),t.L=127&i,t.H=a,t.G=(240&s)>>4,t.K=0<(128&i),t.o=1+(15&s),t.m=1+(63&u),e.g=e.h[n]}}}return null}function sd(e,t){for(var n=[],r=0;8>r;r++)!(1&~t)&&e.h[r]&&n.push(r),t>>=1;return n}function ud(e,t,n){for(var r=null,o=(t=c(sd(e,t))).next();!o.done;o=t.next()){o=o.value;var i=e.h[o];i.isVisible()&&(r=ed(i,n,e.i)),e.h[o]=null}return r}function ld(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function cd(e,t,n){var r={0:0,1:0,2:1,3:1};return pd[(e=r[e])<<2|(t=r[t])<<1|(n=r[n])]}$p.prototype.isVisible=function(){return this.l},rd.prototype.na=function(){return this.g<this.h.length},rd.prototype.va=function(){return this.g},rd.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Tt(2,2,3e3);this.g+=e};var fd=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),pd="black blue green cyan red magenta yellow white".split(" ");function dd(){this.h=[],this.g=[],this.i=new td,this.l=0,this.m=new Map([["CC1",new Vp(0,0)],["CC2",new Vp(0,1)],["CC3",new Vp(1,0)],["CC4",new Vp(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,hd(this)}function hd(e){e.o=0,e.s=0;for(var t=c(e.m.values()),n=t.next();!n.done;n=t.next())(n=n.value).h=0,n.g=n.j,n.m=null,Pp(n.i),Pp(n.j),Pp(n.o);e.B=!0}function md(e,t){var n=t.type;if(16==(112&t.bb)){var r=t.bb>>3&1;0===n?e.o=r:e.s=r}if(r="CC"+(1+(n<<1|(n?e.s:e.o))),n=e.m.get(r),255===t.bb&&255===t.Cb||!t.bb&&!t.Cb||!vd(t.bb)||!vd(t.Cb))return 45<=++e.l&&hd(e),null;e.l=0,t.bb&=127,t.Cb&=127;var o=t.bb;if(1<=o&&15>=o||!t.bb&&!t.Cb)return null;if(o=null,16==(112&t.bb))e:{if(e.A.add(r),r=t.bb,e=t.Cb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1];var i=(30&e)>>1;r="white",o=!1,7>i?r=Kp[i]:7===i&&(o=!0),e=!(1&~e),4!==n.h&&(i=n.g,3===n.h&&t!==i.g&&(Np(i,n=1+t-i.h,1+i.g-i.h,i.h),Up(i,0,n-1),Up(i,t+1,15-t)),i.g=t,i.m=e,i.j=o,i.l=r,i.o="black")}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",Op(n.g,0,32),r=!1,"white_italics"===(t=Kp[(14&e)>>1])&&(t="white",r=!0),n.g.m=!(1&~e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",!(7&r)&&(t=Wp[(14&e)>>1]),n.g.o=t;else if(17==(247&r)&&48==(240&e))Op(n.g,1,e);else if(18==(246&r)&&32==(224&e))Op(n.g,1&r?3:2,e);else if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.Cb){case 32:qp(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:r=Hp(n,2,e);break;case 38:r=Hp(n,3,e);break;case 39:r=Hp(n,4,e);break;case 40:Op(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Pp(n.o),Xp(n);break;case 43:Xp(n);break;case 44:t=n.i,r=null,4!==n.h&&(r=Dp(t,n.l,e)),Up(t,0,15);break;case 45:t=n.g,3!==n.h?r=null:(r=Dp(t,n.l,e),Np(t,(o=t.g-t.h+1)-1,o,t.h),Up(t,0,o-1),Up(t,t.g,15-t.g),n.l=e);break;case 46:Up(n.j,0,15);break;case 47:t=null,4!==n.h&&(t=Dp(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,qp(n),n.l=e,r=t}o=r;break e}o=null}else e=t.Cb,Op(n.g,0,t.bb),Op(n.g,0,e);return o}function gd(e,t){var n=[];try{for(;t.na();){var r=od(t).value,o=(224&r)>>5,i=31&r;if(7===o&&0!=i&&(o=63&od(t).value),0!=o){e.A.add("svc"+o),e.j.has(o)||e.j.set(o,new id(o));for(var a=e.j.get(o),s=t.va();t.va()-s<i;){o=a;var u=t,l=od(u),c=l.value,f=l.pts;if(16===c&&(c=c<<16|od(u).value),0<=c&&31>=c){var p=c,d=f;if((u=o).g){var h=u.g;switch(o=null,p){case 8:!Zp(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.m-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(o=ed(h,d,u.i)),h.h+1>=h.o){for(u=h,p=0,d=1;16>d;d++,p++)u.i[p]=u.i[d];for(d=0;1>d;d++,p++)u.i[p]=Qp()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(o=ed(h,d,u.i)),h.i[h.h]=Qp(),h.g=0;break;case 12:h.isVisible()&&(o=ed(h,d,u.i)),Yp(h),(u=h).h=0,u.g=0}var m=o}else m=null}else if(128<=c&&159>=c)m=ad(o,u,c,f);else{if(4096<=c&&4127>=c)o=u,8<=(u=255&c)&&15>=u?o.skip(1):16<=u&&23>=u?o.skip(2):24<=u&&31>=u&&o.skip(3);else if(4224<=c&&4255>=c)o=u,128<=(u=255&c)&&135>=u?o.skip(4):136<=u&&143>=u&&o.skip(5);else if(32<=c&&127>=c)u=c,o.g&&Jp(o.g,127===u?"♪":String.fromCharCode(u));else if(160<=c&&255>=c)o.g&&Jp(o.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(u=255&c,o.g)if(fd.has(u)){var g=fd.get(u);Jp(o.g,g)}else Jp(o.g,"_")}else 4256<=c&&4351>=c&&o.g&&Jp(o.g,160!=(255&c)?"_":"[CC]");m=null}(o=m)&&n.push(o)}}}}catch(v){if(!(v instanceof Tt&&3e3===v.code))throw v;J("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function vd(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function yd(e){for(var t=[],n=e,r=e=0;r<n.length;)2==e&&3==n[r]?(e=0,(n=[].concat(f(n))).splice(r,1),n=new Uint8Array(n)):0==n[r]?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;255==e[r];)n+=255,r++;n+=e[r++];for(var o=0;255==e[r];)o+=255,r++;o+=e[r++],4==n&&t.push(e.subarray(r,r+o)),r+=o}return t}function bd(){this.j=new Map,this.i=this.h=0,this.g=wd}function xd(e,t,n,r,o,i,a,s,u){var l=0,p=i,d=s.map(function(e){return e.Wg});for((d=[].concat.apply([],f(d))).length&&(p=d[0].sampleSize||i),t.skip(a+s[0].Fh);t.na();){a=t.P();var h=t.T(),m=null;switch(m=!1,s=1,e.g){case Sd:m=6==(m=31&h);break;case Td:s=2,t.skip(1),m=39==(m=h>>1&63)||40==m;break;case kd:s=2,t.skip(1),m=23==(m=h>>1&63)||24==m;break;default:return}if(m)for(h=0,l<d.length&&(h=d[l].ne||0),h=(n+h)/r,m=(s=c(yd(t.qb(a-s)))).next();!m.done;m=s.next())u.push({packet:m.value,pts:h});else try{t.skip(a-s)}catch(g){break}0==(p-=a+4)&&(n=l<d.length?n+(d[l].Jf||o):n+o,p=++l<d.length&&d[l].sampleSize||i)}}dd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,hd(this);for(var t=(e=c(this.j.values())).next();!t.done;t=e.next())ld(t.value)},dd.prototype.extract=function(e,t){if(this.B){for(var n=c(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(!(8>(e=new Do(e,0)).getLength())&&181===e.T()&&49===e.la()&&1195456820===e.P()&&3===e.T()&&64&(n=e.T()))for(n&=31,e.skip(1),r=0;r<n;r++){var o=e.T(),i=(4&o)>>2,a=e.T(),s=e.T();i&&(0==(o&=3)||1===o?this.h.push({pts:t,type:o,bb:a,Cb:s,order:this.h.length}):(this.g.push({pts:t,type:o,value:a,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}},dd.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=c(this.h),r=n.next();!r.done;r=n.next())(r=md(this,r.value))&&t.push(r);for(r=(n=c(this.g)).next();!r.done;r=n.next())nd(this.i,r.value);for(r=(n=c(this.i.i)).next();!r.done;r=n.next())r=gd(this,r.value),t.push.apply(t,f(r));return this.i.i=[],this.h=[],this.g=[],t},dd.prototype.getStreams=function(){return Array.from(this.A)},V("shaka.cea.CeaDecoder",dd),Ae=function(){return new dd},bd.prototype.init=function(e){function t(e){(e=e.name)in Cd&&(n.g=Cd[e])}var n=this,r=[],o=[];if((new No).box("moov",Uo).box("mvex",Uo).S("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.P(),t=t.P(),n.h=e,n.i=t}).box("trak",Uo).S("tkhd",function(e){var t=e.reader;1==(e=e.version)?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.P();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.la(),t.la(),t.la(),t.la(),r.push(n)}).box("mdia",Uo).S("mdhd",function(e){e=Ca(e.reader,e.version),o.push(e.timescale)}).box("minf",Uo).box("stbl",Uo).S("stsd",Bo).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",jo).box("sinf",Uo).box("frma",function(e){(e=Ia(e.reader).codec)in Cd&&(n.g=Cd[e])}).parse(e,!0),!r.length||!o.length||r.length!=o.length)throw new Tt(2,2,2010);this.g==wd&&Q("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(e,t){n.j.set(e,o[t])})},bd.prototype.parse=function(e){var t=this;if(this.g==wd)return[];var n=[],r=0,o=[];return(new No).box("moof",function(e){r=e.start,o=[],Uo(e)}).box("traf",function(e){o.push({baseMediaDecodeTime:null,Yc:t.h,Id:t.i,Og:[],timescale:9e4}),Uo(e)}).S("trun",function(e){var t=o[o.length-1];e=Aa(e.reader,e.version,e.flags),t.Og.push(e)}).S("tfhd",function(e){var n=o[o.length-1];e=Ta(e.reader,e.flags),n.Yc=e.Yc||t.h,n.Id=e.Id||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))}).S("tfdt",function(e){var t=o[o.length-1];e=ka(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime}).box("mdat",function(e){for(var i=r-e.start-8,a=e.reader.va(),s=c(o),u=s.next();!u.done;u=s.next()){if(null===(u=u.value).baseMediaDecodeTime)throw Q("Unable to find base media decode time for CEA captions!"),new Tt(2,2,2010);e.reader.seek(a),xd(t,e.reader,u.baseMediaDecodeTime,u.timescale,u.Yc,u.Id,i,u.Og,n)}}).parse(e,!1),n},V("shaka.cea.Mp4CeaParser",bd);var wd=0,Sd=1,Td=2,kd=3,Cd={avc1:Sd,avc3:Sd,dvav:Sd,dva1:Sd,hev1:Td,hvc1:Td,dvh1:Td,dvhe:Td,vvc1:kd,vvi1:kd,dvc1:kd,dvi1:kd};function Ad(){this.g=null}function Ed(t,n,r){var o=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())(n=Md(n.value))&&t.push(n);return t}(t),i=null;t=[];var a=[],s=null,u=new Set(o.map(function(e){return e.keyId}));u.delete(null);var l="cenc";if(1<u.size)throw new Tt(2,4,4010);if(!n){if(1<(a=o.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.Pc})).length)throw new Tt(2,4,4050);a.length&&(s=function(t){if(!e.crypto||!e.crypto.subtle)throw Q("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Tt(2,4,4042);var n=ii(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new Tt(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new Tt(2,4,4051);if(!(n=ii(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new Tt(2,4,4051);if(t=n.attributes.IV,n=pn(n.attributes.keyUriTemplate),!t||!n)throw new Tt(2,4,4051);if(16!=(t=yn(t.substr(2))).byteLength)throw new Tt(2,4,4048);return{ti:n,iv:t}}(a[0])),(a=o.find(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Pc}))&&a.encryptionScheme&&(l=a.encryptionScheme),(a=o.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Pc?(i=e.init||i,!1):"urn:mpeg:dash:sea:2012"!=e.Pc})).length&&(t=function(e,t,n,r,o){for(var i=[],a=(n=c(n)).next();!a.done;a=n.next()){var s=r[(a=a.value).Pc];if(s){var u;if((u=ii(a.node,"urn:microsoft:playready","pro"))&&ti(u)){u=vn(u=ti(u));var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:Ko(u,l,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else u=null;if(l=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.Pc){l=a;var f=o;if(0==f.size)l=null;else{var p=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);l=[{initData:Ko(new Uint8Array([]),p,f,1),initDataType:"cenc",keyId:l.keyId}]}}u=Sn(s,t,a.init||e||u||l),(s=_d.get(s))&&(u.licenseServerUri=s(a)),i.push(u)}}return i}(i,l,a,r,u),0==t.length&&(t=[Sn("",l,i)]))}if(o.length&&!s&&(n||!a.length))for(t=[],r=(n=c(Object.values(r))).next();!r.done;r=n.next())"org.w3.clearkey"!=(r=r.value)&&t.push(Sn(r,l,i));if(u=Array.from(u)[0]||null)for(n=(l=c(t)).next();!n.done;n=l.next())for(r=(n=c(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=u;return{pg:u,dk:i,drmInfos:t,Fe:s,tg:!0}}function Id(e){var t=ii(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ti(t))?t:(e=ii(e.node,"urn:microsoft:playready","pro"))&&ti(e)?(e=function(e){var t=0,n=we(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var o=n.getUint16(e,!0);if(e+=2,1&o||o+e>n.byteLength){n=[];break e}var i=be(n,e,o);t.push({type:r,value:i}),e+=o}n=t}return n}(e=vn(e=ti(e))).filter(function(e){return e.type===Rd})[0],e&&(e=Yo(e=sn(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=c(ri(e,"DATA"))).next();!t.done;t=e.next())if((t=t.value).children)for(var n=(t=c(t.children)).next();!n.done;n=t.next())if("LA_URL"==(n=n.value).tagName)return ti(n);return""}(e):""):""}function Md(e){var t=e.attributes.schemeIdUri,n=si(e,"urn:mpeg:cenc:2013","default_KID"),r=ui(e,"urn:mpeg:cenc:2013","pssh").map(ni),o=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Tt(2,4,4009);var i=[];try{i=r.map(function(e){return{initDataType:"cenc",initData:vn(e),keyId:null}})}catch(a){throw new Tt(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<i.length?i:null,encryptionScheme:o}}Ce["video/mp4"]=function(){return new bd},Ad.prototype.init=function(){},Ad.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Va;var t=[];if(!Xa(e=be(e)))return t;var n=(e=this.g.parse(e)).$c(),r=e.Pd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(r=(n=c(r)).next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&null!=r.time)for(var o=c(yd(r.data)),i=o.next();!i.done;i=o.next())t.push({packet:i.value,pts:r.time});return t},V("shaka.cea.TsCeaParser",Ad),Ce["video/mp2t"]=function(){return new Ad};var Rd=1,_d=(new Map).set("com.widevine.alpha",function(e){var t=ii(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ti(t))?t:(e=ii(e.node,"urn:microsoft","laurl"))&&pn(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Id).set("com.microsoft.playready.recommendation",Id).set("com.microsoft.playready.software",Id).set("com.microsoft.playready.hardware",Id).set("org.w3.clearkey",function(e){var t=ii(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ti(t))?t:(e=ii(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=ti(e))?e:""});function Ld(t,n,r,o,i,a){var s={RepresentationID:n,Number:r,SubNumber:o,Bandwidth:i,Time:a};return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,r,o){if("$$"==t)return"$";var i=s[n];if(null==i)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&"bigint"!=typeof i&&(.2<=Math.abs(i-Math.round(i))&&Q("Calculated $Time$ values must be close to integers"),i=Math.round(i)),o){case void 0:case"d":case"i":case"u":t=i.toString();break;case"o":t=i.toString(8);break;case"x":t=i.toString(16);break;case"X":t=i.toString(16).toUpperCase();break;default:t=i.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t})}function Dd(e,t){var n=Od(e,t,"timescale"),r=1;n&&(r=hi(n)||1),(n=hi((n=Od(e,t,"duration"))||""))&&(n/=r);var o=Od(e,t,"startNumber"),i=Number(Od(e,t,"presentationTimeOffset"))||0,a=mi(o||"");if(null!=o&&null!=a||(a=1),o=null,t=Nd(e,t,"SegmentTimeline")){t=ei(t,"S"),o=r,e=e.ka.duration||1/0;for(var s=a,u=[],l=-i,c=0;c<t.length;++c){var f=t[c],p=t[c+1],d=ai(f,"t",mi),h=ai(f,"d",mi),m=ai(f,"r",di);if(f=ai(f,"k",di)||0,null!=d&&(d-=i),h){if(d=null!=d?d:l,0>(m=m||0))if(p){if(null==(p=ai(p,"t",mi)))break;if(d>=p)break;m=Math.ceil((p-d)/h)-1}else{if(1/0==e)break;if(d/o>=e)break;m=Math.ceil((e*o-d)/h)-1}for(0<u.length&&d!=l&&(u[u.length-1].end=d/o),p=0;p<=m;++p)l=d+h,u.push({start:d/o,end:l/o,$f:d,zb:f,Si:u.length+s}),d=l}}o=u}return{timescale:r,La:n,vd:a,Nb:i/r||0,Zf:i,timeline:o}}function Pd(e,t){return[t(e.J),t(e.ja),t(e.ta)].filter(Jn)}function Od(e,t,n){t=Pd(e,t),e=null;for(var r=(t=c(t)).next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Nd(e,t,n){t=Pd(e,t),e=null;for(var r=(t=c(t)).next();!r.done&&!(e=oi(r.value,n));r=t.next());return e}function Ud(e,t,n,r,o,i){if(i=void 0===i?0:i,si(e,"http://www.w3.org/1999/xlink","href")){var a=function(e,t,n,r,o,i){for(var a=si(e,"http://www.w3.org/1999/xlink","href"),s=si(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=c(Object.keys(e.attributes)),l=u.next();!l.done;l=u.next()){var f=(l=l.value).split(":"),p=Qo("http://www.w3.org/1999/xlink");f[0]==p&&delete e.attributes[l]}if(5<=i)return io(new Tt(2,4,4028));if("onLoad"!=s)return io(new Tt(2,4,4027));var d=wn([r],[a]);return o.request(0,xo(d,t)).Aa(function(r){if(!(r=$o(r.data,e.tagName)))return io(new Tt(2,4,4001,a));for(e.children=[];r.children.length;){var s=r.children.shift();s.tagName&&(s.parent=e),e.children.push(s)}for(var u=(s=c(Object.keys(r.attributes))).next();!u.done;u=s.next())u=u.value,e.attributes[u]=r.attributes[u];return Ud(e,t,n,d[0],o,i+1)})}(e,t,n,r,o,i);return n&&(a=a.Aa(void 0,function(){return Ud(e,t,n,r,o,i)})),a}a=[];for(var s=c(Zo(e)),u=s.next(),l={};!u.done;l={Uc:void 0},u=s.next())l.Uc=u.value,"urn:mpeg:dash:resolve-to-zero:2013"==si(l.Uc,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.Uc}}(l)):"SegmentTimeline"!=l.Uc.tagName&&a.push(Ud(l.Uc,t,n,r,o,i));return lo(a).Aa(function(){return e})}function Bd(e,t,n,r,o,i,a){var s,u=(new No).S("sidx",function(e){s=function(e,t,n,r,o,i,a){var s=[];a.reader.skip(4);var u=a.reader.P();if(0==u)throw new Tt(2,3,3005);if(0==a.version)var l=a.reader.P(),c=a.reader.P();else l=a.reader.Nc(),c=a.reader.Nc();a.reader.skip(2);var f=a.reader.la();for(e=e+a.size+c,c=0;c<f;c++){var p=a.reader.P(),d=(2147483648&p)>>>31;p&=2147483647;var h=a.reader.P();if(a.reader.skip(4),1==d)throw new Tt(2,3,3006);s.push(new aa(l/u+n,(l+h)/u+n,function(){return i},e,e+p-1,t,n,r,o)),l+=h,e+=p}return a.parser.stop(),s}(t,r,o,i,a,n,e)});if(e&&u.parse(e),s)return s;throw new Tt(2,3,3004)}function jd(e){this.h=we(e),this.g=new Do(this.h,0)}function Fd(e){var t=zd(e);if(7<t.length)throw new Tt(2,3,3002);for(var n=0,r=(t=c(t)).next();!r.done;r=t.next())n=256*n+r.value;t=zd(e);e:{for(var o=(r=c(Gd)).next();!o.done;o=r.next())if(ge(t,new Uint8Array(o.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.va();else{if(8==t.length&&224&t[1])throw new Tt(2,3,3001);for(o=r=0;o<t.length;o++){var i=t[o];r=0==o?i&(1<<8-t.length)-1:256*r+i}t=r}return t=e.g.va()+t<=e.h.byteLength?t:e.h.byteLength-e.g.va(),r=we(e.h,e.g.va(),t),e.g.skip(t),new Vd(n,r)}function zd(e){var t=e.g.va(),n=e.g.T();if(0==n)throw new Tt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),be(e.h,t,n)}jd.prototype.na=function(){return this.g.na()};var Gd=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Vd(e,t){this.id=e,this.g=t}function Hd(e){if(8<e.g.byteLength)throw new Tt(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Tt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function qd(e){var t=new jd(e.g);if(179!=(e=Fd(t)).id)throw new Tt(2,3,3013);if(e=Hd(e),183!=(t=Fd(t)).id)throw new Tt(2,3,3012);t=new jd(t.g);for(var n=0;t.na();){var r=Fd(t);if(241==r.id){n=Hd(r);break}}return{dj:e,Ii:n}}function Xd(e,t,n){if(!(t=Nd(e,t,"Initialization")))return null;var r=e.J.Ga(),o=t.attributes.sourceURL;o&&(r=wn(r,[pn(o)])),o=0;var i=null;return(t=ai(t,"range",pi))&&(o=t.start,i=t.end),(n=new oa(function(){return r},o,i,Jd(e),null,null,n)).codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function Wd(e,t,n){var r=Number(Od(e,$d,"presentationTimeOffset"))||0,o=Od(e,$d,"timescale"),i=1;o&&(i=hi(o)||1);var a=r/i||0,s=Xd(e,$d,n);!function(e,t){if(Qd(e,t),!Yd(e))throw new Tt(2,4,4002)}(e,s);var u=cr(e);return{fc:function(){var e=Nd(u,$d,"RepresentationIndex"),n=u.J.Ga();return e&&(e=pn(e.attributes.sourceURL))&&(n=wn(n,[e])),e=Yd(u),Kd(u,t,s,n,e.start,e.end,a)}}}function Kd(e,t,n,r,o,i,a){var s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,k,C,A;return O(function(E){if(1==E.g)return s=e.presentationTimeline,u=!e.vb||!e.ka.ld,l=e.ka.start,f=e.ka.duration,p=e.J.mimeType.split("/")[1],h=null,m=[(d=t)(r,o,i,!1),"webm"==p?d(n.M(),n.Ha,n.sa,!0):null],d=null,S(E,Promise.all(m),2);if(g=E.h,v=g[0],y=g[1]||null,x=l-a,w=l,T=f?l+f:1/0,"mp4"==p)var I=Bd(v,o,r,n,x,w,T);else{I=v;var M=new jd(y);if(440786851!=Fd(M).id)throw new Tt(2,3,3008);var R=Fd(M);if(408125543!=R.id)throw new Tt(2,3,3009);M=R.g.byteOffset,R=new jd(R.g);for(var _=null;R.na();){var L=Fd(R);if(357149030==L.id){_=L;break}}if(!_)throw new Tt(2,3,3010);for(_=new jd(_.g),L=1e6,R=null;_.na();){var D=Fd(_);if(2807729==D.id)L=Hd(D);else if(17545==D.id)if(4==D.g.byteLength)R=D.g.getFloat32(0);else{if(8!=D.g.byteLength)throw new Tt(2,3,3003);R=D.g.getFloat64(0)}}if(null==R)throw new Tt(2,3,3011);if(R*=_=L/1e9,475249515!=(I=Fd(new jd(I))).id)throw new Tt(2,3,3007);I=function(e,t,n,r,o,i,a,s,u){function l(){return o}var c=[];e=new jd(e.g);for(var f=null,p=null;e.na();){var d=Fd(e);if(187==d.id){var h=qd(d);h&&(d=n*h.dj,h=t+h.Ii,null!=f&&c.push(new aa(f+a,d+a,l,p,h-1,i,a,s,u)),f=d,p=h)}}return null!=f&&c.push(new aa(f+a,r+a,l,p,null,i,a,s,u)),c}(I,M,_,R,r,n,x,w,T)}for(k=c(b=I),C=k.next();!C.done;C=k.next())(A=C.value).codecs=e.J.codecs,A.mimeType=e.J.mimeType;return s.sd(b),h=new Fs(b),u&&h.Bc(w,T,!0),E.return(h)})}function $d(e){return e.Rc}function Yd(e){var t=Nd(e,$d,"RepresentationIndex");return e=pi((e=Od(e,$d,"indexRange"))||""),t&&(e=ai(t,"range",pi,e)),e}function Qd(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=En&&"mp4"!=n&&"webm"!=n)throw new Tt(2,4,4006);if("webm"==n&&!t)throw new Tt(2,4,4005)}function Jd(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Jc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ja.label||null,roles:e.roles||null,language:e.ja.language||null}}function Zd(e,t,n){var r=Xd(e,eh,n),o=function(e){var t=function(e){return[e.J.Pb,e.ja.Pb,e.ta.Pb].filter(Jn).map(function(e){return ei(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){return t.attributes.indexRange&&!e.lf&&(e.lf=!0),{zi:pn(t.attributes.media),start:(t=ai(t,"mediaRange",pi,{start:0,end:null})).start,end:t.end}})}(e),n=(e=Dd(e,eh)).vd;0==n&&(n=1);var r=0;return e.La?r=e.La*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{La:e.La,startTime:r,vd:n,Nb:e.Nb,timeline:e.timeline,Ic:t}}(e);if(!o.La&&!o.timeline&&1<o.Ic.length)throw new Tt(2,4,4002);if(!o.La&&!e.ka.duration&&!o.timeline&&1==o.Ic.length)throw new Tt(2,4,4002);if(o.timeline&&0==o.timeline.length)throw new Tt(2,4,4002);var i=null,a=null;e.ta.id&&e.J.id&&(a=t[e.ta.id+","+e.J.id])&&(i=a.segmentIndex);var s=function(e,t,n,r,o,i,a,s){var u=r.Ic.length;r.timeline&&r.timeline.length!=r.Ic.length&&(u=Math.min(r.timeline.length,r.Ic.length));for(var l=e-r.Nb,c=t?e+t:1/0,f=[],p=r.startTime,d={},h=0;h<u;d={ve:void 0,oe:void 0},h++){d.oe=r.Ic[h];var m=p;p=void 0,p=null!=r.La?m+r.La:r.timeline?r.timeline[h].end:m+t,d.ve=null,(d=new aa(e+m,e+p,function(e){return function(){return null==e.ve&&(e.ve=wn(n(),[e.oe.zi])),e.ve}}(d),d.oe.start,d.oe.end,o,l,e,c,[],"",null,null,la,i)).codecs=s,d.mimeType=a,f.push(d)}return f}(e.ka.start,e.ka.duration,e.J.Ga,o,r,n,e.J.mimeType,e.J.codecs);return t=!i,i?i.rd(s,e.presentationTimeline.mb()):i=new Fs(s),e.presentationTimeline.sd(s),e.vb&&e.ka.ld||i.Bc(e.ka.start,e.ka.duration?e.ka.start+e.ka.duration:1/0,t),a&&(a.segmentIndex=i),{fc:function(){return i&&0!=i.getNumReferences()||i.Zd(s),Promise.resolve(i)}}}function eh(e){return e.Pb}function th(t,n,r,o,i,a,s,u,l){l||t.J.Gc||(t.J.Gc=Od(t,nh,"initialization"));var f=t.J.Gc?function(e,t){var n=e.J.Gc;if(n||(n=Od(e,nh,"initialization")),!n)return null;n=pn(n);var r=e.J.id,o=e.bandwidth||null,i=e.J.Ga;return t=new oa(function(){var e=Ld(n,r,null,null,o,null);return wn(i(),[e])},0,null,Jd(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}(t,s):null,p=function(e){var t=Dd(e,nh),n=Od(e,nh,"media"),r=Od(e,nh,"index");return{La:t.La,timescale:t.timescale,vd:t.vd,Nb:t.Nb,Zf:t.Zf,timeline:t.timeline,Zb:n&&pn(n),jd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}(t);!function(e){var t=e.jd?1:0;if(t+=e.timeline?1:0,0==(t+=e.La?1:0))throw new Tt(2,4,4002);if(1!=t&&(e.jd&&(e.timeline=null),e.La=null),!e.jd&&!e.Zb)throw new Tt(2,4,4002)}(p);var d=cr(t);if(p.jd)return Qd(t,f),{fc:function(){var e=Ld(p.jd,d.J.id,null,null,d.bandwidth||null,null);return e=wn(d.J.Ga(),[e]),Kd(d,n,f,e,0,null,p.Nb)}};if(p.La)return o||"image"===t.ja.contentType||(t.presentationTimeline.xf(p.La),t.presentationTimeline.ce(t.ka.start)),{fc:function(){return function(t,n,r,o,i,a,s){function u(r){var i=(r-v)*g,s=i+n.Nb,u=i+d;return i=u+g,(u=new aa(u,Math.min(i,f()),function(){var t=s*y;return"BigInt"in e&&t>Number.MAX_SAFE_INTEGER&&(t=BigInt(s)*BigInt(y)),t=Ld(b,w,r,null,x,t),wn(S(),[t])},0,null,o,T,d,f(),[],"",null,null,la,a)).codecs=t.J.codecs,u.mimeType=t.J.mimeType,u.j=i,u}function l(){var e=[Math.max(p.mb(),d),Math.min(p.Wb(),f())].map(function(e){return e-d});return e=[Math.ceil(e[0]/g),Math.ceil(e[1]/g)-1],t.J.Ia&&e[1]++,e.map(function(e){return e+v})}function f(){var e=null!=h&&i[h]||m;return e?d+e:1/0}var p=t.presentationTimeline,d=t.ka.start,h=t.ta.id,m=t.ka.duration,g=n.La,v=n.vd,y=n.timescale,b=n.Zb,x=t.bandwidth||null,w=t.J.id,S=t.J.Ga,T=d-n.Nb,k=l();r=t.vb?Math.max(k[0],k[1]-r+1):k[0],s=s||k[1],k=[];for(var C=r;C<=s;++C){var A=u(C);k.push(A)}var E=new Fs(k);if(k=p.Wb()<f(),C=p.V(),k||C){var I=Math.max(r,s+1);r=g,t.J.Ia&&(r=.1),E.ue(r,function(){var e=p.mb();E.Ma(e);var t=c(l());t.next(),t=t.next().value;for(var n=[];I<=t;){var r=u(I);n.push(r),I++}return e>f()&&!n.length?null:n})}return Promise.resolve(E)}(d,p,i,f,a,s,u)}};var h=null;o=o=null,t.ta.id&&t.J.id&&(o=r[o=t.ta.id+","+t.J.id])&&(h=o.segmentIndex);var m=t.ka.start,g=t.ka.duration?m+t.ka.duration:1/0,v=!(t.vb&&t.ka.ld);return h?(oh(r=h,p,m,g,v,f),r.Ma(t.presentationTimeline.mb())):h=new rh(p,t.J.id,t.bandwidth,t.J.Ga,m,g,f,v,s,t.J.Kf),p.timeline&&"image"!==t.ja.contentType&&t.presentationTimeline.Ng(p.timeline,m),o&&t.vb&&(o.segmentIndex=h),{fc:function(){return h instanceof rh&&0==h.getNumReferences()&&oh(h,p,m,g,v,f),Promise.resolve(h)}}}function nh(e){return e.$b}function rh(e,t,n,r,o,i,a,s,u,l){Fs.call(this,[]),this.g=e,this.C=t,this.A=n,this.B=r,this.h=o,this.j=i,this.o=a,this.s=u,this.F=l,s&&ih(this)}function oh(e,t,n,r,o,i){if(function(e,t){if(e.o!==t){e.o=t;for(var n=(e=c(e.O)).next();!n.done;n=e.next())(n=n.value)&&ua(n,t)}}(e,i),e.g){if(n=e.g.timeline,e.g.Zb!==t.Zb&&(e.g.Zb=t.Zb),n.length){var a=n[n.length-1];t=t.timeline.filter(function(e){return e.start>=a.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,f(t)),e.j!==r&&(e.j=r)}else e.g=t,e.h=n,e.j=r;o&&ih(e)}function ih(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.Ma(e.h)}}function ah(e,t,n,r,o,i,a){return e=Ld(e,t,n,i,r||null,o),wn(a(),[e]).map(function(e){return e.toString()})}function sh(e){this.o=null,this.A=e,this.G=new mo,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}function uh(e,t){var n,r,o,i,a,s,u;return O(function(l){return 1==l.g?(n=wn(e.i,[lh(e,t)]),r=xo(n,e.o.retryParameters),o=e.A.networkingEngine.request(8,r),go(e.G,o),C(l,2),S(l,o.promise,4)):2!=l.g?(i=l.h,a=an(i.data),1==(s=JSON.parse(a)).VERSION&&function(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new _t(function(){uh(e,r)}),(n=t.TTL)&&(e.C=n),e.g.Y(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}(e,s,i.uri),E(l,0)):(u=I(l))&&7001==u.code?l.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new _t(function(){uh(e,t)}),e.g.Y(e.C),void k(l))})}function lh(e,t){if(!e.m.length)return t;t=new st(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),o=t.g;return"DASH"==e.s?(o.add("_DASH_pathway",n),o.add("_DASH_throughput",String(r))):"HLS"==e.s&&(o.add("_HLS_pathway",n),o.add("_HLS_throughput",String(r))),St(o)&&ft(t,o),t.toString()}function ch(e,t,n,r){var o=e.l.get(t);o||(o=new Map),o.set(n,r),e.l.set(t,o)}function fh(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var r=[],o=c(e.m),i=o.next(),a={};!i.done;a={Lc:void 0},i=o.next())if(a.Lc=i.value,i=t.get(a.Lc))r.push({Df:a.Lc,location:i});else if(i=e.F.find(function(e){return function(t){return t.wj==e.Lc}}(a))){var s=t.get(i["BASE-ID"]);s&&(i["URI-REPLACEMENT"].rh?(lt(s=new st(s),i["URI-REPLACEMENT"].rh),r.push({Df:a.Lc,location:s.toString()})):r.push({Df:a.Lc,location:s}))}for(o=Date.now(),i=(a=c(e.j.keys())).next();!i.done;i=a.next())i=i.value,o>(s=e.j.get(i))&&e.j.delete(i);if(r=r.filter(function(t){for(var n=c(e.j.keys()),r=n.next();!r.done;r=n.next())if(r.value.includes(new st(t.location).Eb))return!1;return!0}),r.length&&(e.B=r[0].Df),r=r.map(function(e){return e.location}),!r.length&&e.h)for(a=(o=c(e.h.split(","))).next();!a.done;a=o.next())(a=t.get(a.value))&&(e.B=e.h,r.push(a));if(!r.length)for(o=(t=c(t.values())).next();!o.done;o=t.next())r.push(o.value);return n?r:wn(e.i,r)}function ph(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}function dh(e,t){for(var n=[],r=[],o=[],i=[],a=(e=c(e)).next();!a.done;a=e.next()){var s=a.value;a=new Map(s.audioStreams.map(function(e){return[jh(e),e]}));var u=new Map(s.videoStreams.map(function(e){return[Bh(e),e]})),l=new Map(s.textStreams.map(function(e){return[Fh(e),e]}));if(s=new Map(s.imageStreams.map(function(e){return[zh(e),e]})),t){var f=Ph(En);l.set(Fh(f),f),f=Ph("image"),s.set(zh(f),f)}n.push(a),r.push(u),o.push(l),i.push(s)}return{jg:n,ph:r,lh:o,Eg:i}}function hh(e){var t,n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,k,C,A,E,I,M,R,_;return O(function(L){switch(L.g){case 1:if(t=In,1==e.length)return L.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.X}).map(function(e){return[jh(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ga}).map(function(e){return[Bh(e),e]}))}),o=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ua}).map(function(e){return[Fh(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.De}).map(function(e){return[zh(e),e]}))}),a=c(o),s=a.next();!s.done;s=a.next())u=s.value,l=Dh(t.ua),u.set(Fh(l),l);for(f=c(i),p=f.next();!p.done;p=f.next())d=p.value,h=Dh(t.De),d.set(zh(h),h);return S(L,mh(m=new ph,[],n,0,xh,Sh,0),2);case 2:return g=L.h,S(L,mh(m,[],r,0,xh,Sh,0),3);case 3:return v=L.h,S(L,mh(m,[],o,0,xh,Sh,0),4);case 4:return y=L.h,S(L,mh(m,[],i,0,xh,Sh,0),5);case 5:if(b=L.h,x=0,v.length&&g.length)for(C=c(g),A=C.next();!A.done;A=C.next())for(E=A.value,I=c(v),M=I.next();!M.done;M=I.next())R=M.value,_=x++,R.variantIds.push(_),E.variantIds.push(_);else for(w=v.concat(g),T=c(w),k=T.next();!k.done;k=T.next())k.value.variantIds=[x++];return L.return(v.concat(g).concat(y).concat(b))}})}function mh(e,t,n,r,o,i,a){var s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,k,C,A;return O(function(E){switch(E.g){case 1:for(s=[],u=0;u<n.length;u++)u>=r?s.push(new Set(n[u].values())):s.push(new Set);l=c(t),f=l.next();case 2:if(f.done){E.u(4);break}return p=f.value,S(E,function(e,t,n,r,o,i,a){return O(function(s){return 1==s.g?(Th(e,n,t,0<a),t.matchedStreams?t.segmentIndex?S(s,gh(t,r+a),2):s.u(2):s.return(!1)):(yh(t,r,o,i,a),s.return(!0))})}(e,p,n,r,i,s,a),5);case 5:if(!E.h)throw new Tt(2,4,4037);f=l.next(),E.u(2);break;case 4:for(d=c(s),h=d.next();!h.done;h=d.next())for(m=h.value,g=c(m),v=g.next();!v.done;v=g.next())y=v.value,(b=vh(e,y,n,o,i,s))&&t.push(b);for(x=c(s),w=x.next();!w.done;w=x.next())for(T=w.value,k=c(T),C=k.next(),A={};!C.done;A={Tf:void 0},C=k.next())if(A.Tf=C.value,!Uh(A.Tf)&&t.some(function(t){return function(n){return Ah(e,t.Tf,n)}}(A)))throw new Tt(2,4,4037);return E.return(t)}})}function gh(e,t){var n,r,o,i,a,s,u;return O(function(l){if(1==l.g){for(n=[],r=e.matchedStreams,o=c(r),i=o.next();!i.done;i=o.next())a=i.value,n.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&n.push(a.trickModeVideo.createSegmentIndex());return S(l,Promise.all(n),2)}if(e.segmentIndex instanceof Vs)for(s=t;s<r.length;s++)(u=r[s]).segmentIndex&&e.segmentIndex.g.push(u.segmentIndex);k(l)})}function vh(e,t,n,r,o,i){if(Uh(t))return null;var a=r(t);return Th(e,n,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return O(function(e){return a.segmentIndex?e.u(0):(a.segmentIndex=new Vs,S(e,gh(a,0),0))})}),a.matchedStreams&&a.matchedStreams.length?(yh(a,0,o,i,0),a):null}function yh(e,t,n,r,o){var i=e.matchedStreams;for(t+=o;t<i.length;t++){var a=i[t];n(e,a);var s=!0;if("audio"==e.type&&0==or(e.language,a.language)&&(s=!1),s&&(r[t-o].delete(a),a.fullMimeTypes))for(s=(a=c(a.fullMimeTypes.values())).next();!s.done;s=a.next())e.fullMimeTypes.add(s.value)}}function bh(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=c(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function xh(e){return(e=Object.assign({},e)).roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function wh(e,t){function n(e,t){e||(e=[]);for(var n=(t=c(t)).next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=c(t.keyIds),o=r.next();!o.done;o=r.next())e.keyIds.add(o.value);if(null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=At(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Tt(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),o=(r=c(t.closedCaptions)).next();!o.done;o=r.next()){var i=c(o.value);o=i.next().value,i=i.next().value,e.closedCaptions.set(o,i)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=bh(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),wh(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&wh(e.trickModeVideo,t)}function Sh(e,t){var n=e.roles;n||(n=[]);for(var r=c(t.roles),o=r.next();!o.done;o=r.next())o=o.value,n.includes(o)||n.push(o);for(e.roles=n,r=(n=c(t.keyIds)).next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,f(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=c(t.closedCaptions)).next();!n.done;n=t.next())n=(r=c(n.value)).next().value,r=r.next().value,e.closedCaptions.set(n,r)}function Th(e,t,n,r){r=void 0!==r&&r?n.matchedStreams:[];for(var o=(t=c(t)).next();!o.done;o=t.next()){if(!(o=kh(e,o.value,n)))return;r.push(o)}n.matchedStreams=r}function kh(e,t,n){var r={audio:jh,video:Bh,text:Fh,image:zh}[n.type],o=null,i=r(n);if(t.has(i))o=t.get(i);else{i={audio:function(t,n){return Ah(e,t,n)},video:function(t,n){return Ah(e,t,n)},text:Eh,image:Ih}[n.type];for(var a={audio:Mh,video:Rh,text:_h,image:Lh}[n.type],s=c(t.values()),u=s.next();!u.done;u=s.next())!i(n,u=u.value)||n.fastSwitching!=u.fastSwitching||o&&!a(n,o,u)||(o=u)}return e.s&&!Uh(o)&&t.delete(r(o)),o}function Ch(e,t){return e.mimeType==t.mimeType&&Gh(e.codecs)===Gh(t.codecs)}function Ah(e,t,n){return!(!Ch(t,n)&&!e.o||t.drmInfos&&!Ct(t.drmInfos,n.drmInfos))}function Eh(e,t){return!t.language||e.forced===t.forced&&0!=or(e.language,t.language)&&t.kind==e.kind}function Ih(){return!0}function Mh(e,t,n){var r=Ch(e,t),o=Ch(e,n);if(r&&!o)return!1;if(!r&&o)return!0;if(r=or(e.language,t.language),(o=or(e.language,n.language))>r)return!0;if(o<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),(o=n.roles.filter(function(t){return e.roles.includes(t)})).length>r.length)return!0;if(o.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=Oh(e.channelsCount,t.channelsCount,n.channelsCount))==Vh||r!=qh&&((r=Oh(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==Vh||r!=qh&&!(!e.bandwidth||Nh(e.bandwidth,t.bandwidth,n.bandwidth)!=Vh)))}function Rh(e,t,n){var r=Ch(e,t),o=Ch(e,n);if(r&&!o)return!1;if(!r&&o)return!0;if((r=Oh(e.width*e.height,t.width*t.height,n.width*n.height))==Vh)return!0;if(r==qh)return!1;if(e.frameRate){if((r=Oh(e.frameRate,t.frameRate,n.frameRate))==Vh)return!0;if(r==qh)return!1}return!(!e.bandwidth||Nh(e.bandwidth,t.bandwidth,n.bandwidth)!=Vh)}function _h(e,t,n){var r=or(e.language,t.language),o=or(e.language,n.language);if(o>r)return!0;if(o<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),(o=n.roles.filter(function(t){return e.roles.includes(t)})).length>r.length)return!0;if(o.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Lh(e,t,n){return Oh(e.width*e.height,t.width*t.height,n.width*n.height)==Vh}function Dh(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Ph(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Fs([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Oh(e,t,n){if(t==e&&e!=n)return qh;if(n==e&&e!=t)return Vh;if(t>e){if(n<=e||n-e<t-e)return Vh;if(n-e>t-e)return qh}else{if(n>e)return qh;if(e-n<e-t)return Vh;if(e-n>e-t)return qh}return Hh}function Nh(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?Vh:t<e?qh:Hh}function Uh(e){switch(e.type){case En:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Bh(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,Gh(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function jh(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,Gh(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Fh(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function zh(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Gh(e){if(!Xh.has(e)){var t=Un(e);Xh.set(e,t)}return Xh.get(e)}v(rh,Fs),(o=rh.prototype).getNumReferences=function(){return this.g?this.g.timeline.length:0},o.release=function(){Fs.prototype.release.call(this),this.g=null},o.Ma=function(e){if(this.g){for(var t=0,n=this.g.timeline,r=0;r<n.length&&n[r].end+this.h<=e;r+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.O.length>=t&&(this.O=this.O.slice(t)),this.i+=t,0===this.getNumReferences()&&this.release())}},o.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,r=0;r<t.length;r++){var o=t[r],i=o.start+this.h;if(o=r<n?t[r+1].start+this.h:1/0===this.j?o.end+this.h:this.j,e>=i&&e<o)return r+this.i}return null},o.get=function(e){var t=this;if(0>(e-=this.i)||e>=this.getNumReferences()||!this.g)return null;var n=this.O[e];if(!n){var r=this.g.timeline[e],o=r.Si,i=this.g.Zf+r.$f;n=this.h-this.g.Nb;var a=this.h+r.end,s=a;e===this.getNumReferences()-1&&1/0!==this.j&&(s=this.j);for(var u=this.g.codecs,l=this.g.mimeType,c=[],f=(r.end-r.start)/r.zb,p={},d=0;d<r.zb;p={we:void 0,kh:void 0},d++){var h=r.start+f*d,m=h+f;p.kh=d+1,p.we=null,(p=new aa(this.h+h,this.h+m,function(e){return function(){return t.g?(null==e.we&&(e.we=ah(t.g.Zb,t.C,o,t.A,i,e.kh,t.B)),e.we):[]}}(p),0,null,this.o,n,this.h,this.j,[],"",null,null,la,this.s)).codecs=u,p.mimeType=l,0==this.F?0<d&&p.Xd():0!=d%this.F&&p.Xd(),c.push(p)}(n=new aa(this.h+r.start,s,function(){return 0<r.zb||!t.g?[]:ah(t.g.Zb,t.C,o,t.A,i,null,t.B)},0,null,this.o,n,this.h,this.j,c,"",null,null,la,this.s,0<r.zb)).codecs=u,n.mimeType=l,n.j=a,this.O[e]=n}return n},sh.prototype.configure=function(e){this.o=e},sh.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.G.destroy()},sh.prototype.setManifestType=function(e){this.s=e},sh.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},(o=ph.prototype).release=function(){for(var e=c(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},o.ei=function(){return this.j},o.jf=function(){return this.l.slice()},o.Nh=function(){return this.i},o.Ke=function(e,t,n){n=void 0!==n&&n;var r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,C,A,E,I,M,R,_,L,D,P,N,U=this;return O(function(O){if(1==O.g){if(r=In,!t&&1==e.length)return o=dh(e,!1),i=o.jg,a=o.ph,s=o.lh,u=o.Eg,U.h=Array.from(i[0].values()),U.g=Array.from(a[0].values()),U.l=Array.from(s[0].values()),U.i=Array.from(u[0].values()),O.u(2);for(l=n?U.m.size:0,f=-1,p=0;p<e.length;p++)d=e[p],U.m.has(d.id)||(U.m.add(d.id),-1==f&&(f=p));return-1==f?O.return():(h=dh(e,!0),m=h.jg,g=h.ph,v=h.lh,y=h.Eg,S(O,Promise.all([mh(U,U.h,m,f,bh,wh,l),mh(U,U.g,g,f,bh,wh,l),mh(U,U.l,v,f,bh,wh,l),mh(U,U.i,y,f,bh,wh,l)]),2))}if(b=0,x=[],U.g.length&&U.h.length)for(I=c(U.h),M=I.next();!M.done;M=I.next())for(R=M.value,_=c(U.g),L=_.next();!L.done;L=_.next())D=L.value,P=At(R.drmInfos,D.drmInfos),R.drmInfos.length&&D.drmInfos.length&&!P.length||(N=b++,x.push({id:N,language:R.language,disabledUntilTime:0,primary:R.primary,audio:R,video:D,bandwidth:(R.bandwidth||0)+(D.bandwidth||0),drmInfos:P,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(w=U.g.length?U.g:U.h,T=c(w),C=T.next();!C.done;C=T.next())A=C.value,E=b++,x.push({id:E,language:A.language,disabledUntilTime:0,primary:A.primary,audio:A.type==r.X?A:null,video:A.type==r.ga?A:null,bandwidth:A.bandwidth||0,drmInfos:A.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});U.j=x,k(O)})},o.Zg=function(e){this.o=e},o.gh=function(e){this.s=e},V("shaka.util.PeriodCombiner",ph),ph.prototype.setUseStreamOnce=ph.prototype.gh,ph.prototype.setAllowMultiTypeVariants=ph.prototype.Zg,ph.prototype.combinePeriods=ph.prototype.Ke,ph.prototype.getImageStreams=ph.prototype.Nh,ph.prototype.getTextStreams=ph.prototype.jf,ph.prototype.getVariants=ph.prototype.ei;var Vh=1,Hh=0,qh=-1,Xh=new Map;function Wh(e,t){try{return function(e,t){var n=new DOMParser,r=Kh.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(o){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}(un(e),t)}catch(n){return null}}var Kh=new kt(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});function $h(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.ea=1,this.B=[],this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.o=new Map,this.s={},this.ba={},this.m=new ph,this.H=0,this.da=new X(5),this.I=new _t(function(){e.G&&!e.g.continueLoadingWhenPaused&&(e.C.jb(e.G,"timeupdate"),e.G.paused)?e.C.ha(e.G,"timeupdate",function(){return am(e)}):am(e)}),this.N=new mo,this.L=null,this.fa=[],this.R=1/0,this.F=!1,this.h=null,this.K=0,this.U=!1,this.C=new ne,this.G=null,this.Z=!1}function Yh(e){var t,n,r,o,i,a,s,u,l,p;return O(function(d){return 1==d.g?(t=4,n="MPD",r=function(e){var t=e.l.td;if(!e.l.ae||!t||!e.B.length)return[];var n=Date.now()/1e3,r=e.B.filter(function(e){return!(e=mi(e.attributes.ttl))||t+e>n}).map(ni).filter(Jn);return r.length?wn(e.A,r):[]}(e),o=e.A,r.length?(o=r,n="Patch",t=6):1<e.A.length&&e.h&&(i=fh(e.h,"Location",!0)).length&&(o=i),a=xo(o,e.g.retryParameters),s=Date.now(),S(d,dm(e,a,0,{type:t}),2)):3!=d.g?(u=d.h,e.j?(u.uri&&u.uri!=u.originalUri&&!e.A.includes(u.uri)&&e.A.unshift(u.uri),S(d,function(e,t,n,r){var o,i,a,s,u,l,p,d;return O(function(h){if(1==h.g){if(o=t,(i=e.g.dash.manifestPreprocessor)!=Qu){if(le("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),!(a=Wh(o,r)))throw new Tt(2,4,4001,n);i(a),o=ln(a.outerHTML)}if(!(s=$o(o,r)))throw new Tt(2,4,4001,n);return(u=e.g.dash.manifestPreprocessorTXml)!=Ju&&u(s),"Patch"===r?h.return(function(e,t){var n,r,o,i,a,s,u,l,p,d,h,m,g,v,y,b,x,w,T,C,A,E,I,M;return O(function(R){if(1==R.g){if(n=t.attributes.mpdId,r=ai(t,"originalPublishTime",ci),!n||n!==e.l.ae||r!==e.l.td)throw e.B=[],new Tt(1,4,4052);for(o=[],i=[],a=new Set,s=c(Zo(t)),u=s.next();!u.done;u=s.next())if(l=u.value,p=bi(l.attributes.sel||""),d=p[p.length-1],h=ni(l)||"","MPD"===d.name)if("mediaPresentationDuration"===d.Sb){var _=fi(ni(l)||"");if(null!=_){e.l.Kb=_;for(var L=c(e.o.values()),D=L.next();!D.done;D=L.next())D.value.Kb=_}}else if("type"===d.Sb){for(e.i.presentationTimeline.sc("static"==h),e.l.type=h,L=(_=c(e.o.values())).next();!L.done;L=_.next())L.value.vb="dynamic"==h;"static"==h&&(e.H=-1)}else"publishTime"===d.Sb?e.l.td=ci(h)||0:null===d.Sb&&"add"===l.tagName&&i.push(l);else if("PatchLocation"===d.name)xi(e.B,l);else if("Period"===d.name){if("add"===l.tagName)i.push(l);else if("remove"===l.tagName&&d.id){_=e,L=d.id,_.i.periodCount--;for(var P=(D=c(_.o.keys())).next();!P.done;P=D.next())if((P=P.value).startsWith(L)){var O=_.o.get(P);Nd(O,nh,"SegmentTimeline").children=[],em(_,P),_.o.delete(P)}}}else if("SegmentTemplate"===d.name){if((_=(L=bi(l.attributes.sel||""))[L.length-1]).Sb){for(L=Zh(e,L),D=ni(l)||"",O=(P=c(L)).next();!O.done;O=P.next())Si((O=e.o.get(O.value)).J.$b,l.tagName,_.Sb,D);_=L}else _=[];for(m=c(_),g=m.next();!g.done;g=m.next())v=g.value,a.add(v)}else if("SegmentTimeline"===d.name||"S"===d.name){for(_=bi(l.attributes.sel||""),D=(L=c(_=Zh(e,_))).next();!D.done;D=L.next())xi(P=ei(D=Nd(D=e.o.get(D.value),nh,"SegmentTimeline"),"S"),l),D.children=P;for(y=c(_),b=y.next();!b.done;b=y.next())x=b.value,a.add(x)}for(w=c(a),T=w.next();!T.done;T=w.next())C=T.value,em(e,C);for(A=c(i),E=A.next();!E.done;E=A.next())I=E.value,o.push.apply(o,f(rm(e,{vb:"dynamic"==e.l.type,presentationTimeline:e.i.presentationTimeline,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:e.l.Ia,profiles:e.l.profiles,Kb:e.l.Kb,roles:null},e.l.Ga,I).periods));return o.length?(e.i.periodCount+=o.length,e.i.gapCount=e.K,S(R,Jh(e,o,!0),2)):R.u(2)}"static"==e.l.type&&(M=e.l.Kb,e.i.presentationTimeline.Za(M||1/0)),k(R)})}(e,s)):e.g.dash.disableXlinkProcessing?h.return(Qh(e,s,n)):(l=e.g.dash.xlinkFailGracefully,p=Ud(s,e.g.retryParameters,l,n,e.j.networkingEngine),go(e.N,p),S(h,p.promise,2))}return d=h.h,h.return(Qh(e,d,n))})}(e,u.data,u.uri,n),3)):d.return(0)):(l=Date.now(),p=(l-s)/1e3,e.da.sample(1,p),d.return(p))})}function Qh(e,t,n){var r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,A,M,R,_,L,D,P,N,U,B,j,F,z,G,V,H,q,X,W,K,$,Y,J,Z,ee,te,ne,re,oe,ie,ae,se,ue;return O(function(le){switch(le.g){case 1:for(e.h&&e.h.l.clear(),r=[n],o=[],i=new Map,a=ei(t,"Location"),s=c(a),u=s.next();!u.done;u=s.next())l=u.value,f=l.attributes.serviceLocation,(p=ni(l))&&(d=wn(r,[p])[0],f&&(e.h?ch(e.h,"Location",f,d):i.set(f,d)),o.push(d));if(e.h?0<(h=fh(e.h,"Location",!0)).length&&(r=e.A=h):o.length&&(r=e.A=o),e.l.ae=t.attributes.id||"",e.l.td=ai(t,"publishTime",ci)||0,e.B=ei(t,"PatchLocation"),m=Promise.resolve(),(g=oi(t,"ContentSteering"))&&e.j)for(v=g.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=v):(e.h=new sh(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=v,(y=ni(g))&&(ai(g,"queryBeforeStart",vi,!1)?m=uh(e.h,y):uh(e.h,y))),b=c(i.keys()),x=b.next();!x.done;x=b.next())w=x.value,T=i.get(w),ch(e.h,"Location",w,T);if(A=ei(t,"BaseURL"),R=!1,e.h)for(_=c(A),L=_.next();!L.done;L=_.next())D=L.value,P=D.attributes.serviceLocation,N=ni(D),P&&N&&(ch(e.h,"BaseURL",P,N),R=!0);if(R&&e.h||(U=A.map(ni),M=wn(r,U)),B=function(){return e.h&&R?fh(e.h,"BaseURL"):M||[]},e.l.Ga=B,j=0,A&&A.length&&(j=ai(A[0],"availabilityTimeOffset",gi)||0),e.l.Ia=j,F=e.g.dash.ignoreMinBufferTime,z=0,F||(z=ai(t,"minBufferTime",fi)||0),e.H=ai(t,"minimumUpdatePeriod",fi,-1),G=ai(t,"availabilityStartTime",ci),V=ai(t,"timeShiftBufferDepth",fi),H=e.g.dash.ignoreSuggestedPresentationDelay,q=null,H||(q=ai(t,"suggestedPresentationDelay",fi)),X=e.g.dash.ignoreMaxSegmentDuration,W=null,X||(W=ai(t,"maxSegmentDuration",fi)),K=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.Z=e.i.presentationTimeline.V()&&"static"==K),e.l.type=K,e.i)for($=e.i.presentationTimeline,Y=c(Object.values(e.s)),J=Y.next();!J.done;J=Y.next())(Z=J.value).segmentIndex&&Z.segmentIndex.Ma($.mb());else ee=e.g.defaultPresentationDelay||1.5*z,$=new xs(G,null!=q?q:ee,e.g.dash.autoCorrectDrift);return $.sc("static"==K),$.V()&&!isNaN(e.g.availabilityWindowOverride)&&(V=e.g.availabilityWindowOverride),null==V&&(V=1/0),$.pe(V),te=t.attributes.profiles||"",e.l.profiles=te.split(","),ne={vb:"static"!=K,presentationTimeline:$,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:j,Kb:null,profiles:te.split(","),roles:null},e.K=0,re=rm(e,ne,B,t),oe=re.duration,ie=re.periods,("static"!=K||e.Z)&&re.rg||$.Za(oe||1/0),e.U&&!e.F&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.F=e.j.isLowLatencyMode()),e.F&&$.$g(e.R),$.xf(W||1),S(le,m,2);case 2:return e.F&&(z=0,ae=null!=q?q:e.g.defaultPresentationDelay,$.Of(ae)),e.i?(e.i.periodCount=ie.length,e.i.gapCount=e.K,S(le,Jh(e,ie,!1),4)):S(le,e.m.Ke(ie,ne.vb),6);case 6:if(e.i={presentationTimeline:$,variants:e.m.j,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:z||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:tm(t),nextUrl:nm(t),periodCount:ie.length,gapCount:e.K,isLowLatency:e.U},!$.nh()){le.u(7);break}return se=ei(t,"UTCTiming"),S(le,function(e,t,n){var r,o,i,a,s,u,l,f;return O(function(p){switch(p.g){case 1:r=n.map(function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}}),o=e.g.dash.clockSyncUri,!r.length&&o&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:o}),i=c(r),a=i.next();case 2:if(a.done){p.u(4);break}switch(s=a.value,C(p,5),u=s.scheme,l=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return p.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return p.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return f=Date.parse(l),p.return(isNaN(f)?0:f-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Q("NTP UTCTiming scheme is not supported");break;default:Q("Unrecognized scheme in UTCTiming element",u)}p.u(9);break;case 7:return S(p,lm(e,t,l,"HEAD"),10);case 10:return p.return(p.h);case 8:return S(p,lm(e,t,l,"GET"),11);case 11:return p.return(p.h);case 9:E(p,3);break;case 5:I(p);case 3:a=i.next(),p.u(2);break;case 4:return Q("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),p.return(0)}})}(e,B,se),8);case 8:if(ue=le.h,!e.j)return le.return();$.ah(ue);case 7:$.Wd();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),k(le)}})}function Jh(e,t,n){var r;return O(function(o){if(1==o.g)return S(o,e.m.Ke(t,!0,n),2);e.i.variants=e.m.j,0<(r=e.m.jf()).length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),k(o)})}function Zh(e,t){for(var n="",r="",o=-1,i="",a=(t=c(t)).next();!a.done;a=t.next())"Period"===(a=a.value).name?n=a.id:"AdaptationSet"===a.name?(r=a.id,null!==a.position&&(o=a.position)):"Representation"===a.name&&(i=a.id);if(t=[],i)t.push(n+","+i);else if(r)for(o=c(e.o.values()),e=o.next();!e.done;e=o.next())(e=e.value).ta.id===n&&e.ja.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<o)for(r=c(e.o.values()),e=r.next();!e.done;e=r.next())(e=e.value).ta.id===n&&e.ja.position===o&&e.J.id&&t.push(n+","+e.J.id);return t}function em(e,t){var n=e.o.get(t),r=e.s[t];r.segmentIndex&&r.segmentIndex.Ma(e.i.presentationTimeline.mb());try{var o=th(n,function(t,n,r,o){return fm(e,t,n,r,o)},e.s,!0,e.g.dash.initialSegmentLimit,e.ba,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return O(function(e){if(1==e.g)return r.segmentIndex?e.u(0):S(e,o.fc(),3);r.segmentIndex=e.h,k(e)})}}catch(i){if((t=n.J.contentType)!=En&&"application"!=t&&"image"!=t||4002!=i.code)throw i}}function tm(e){var t=oi(e,"ServiceDescription");if(!t)return null;if(e=oi(t,"Latency"),t=oi(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function nm(e){if(!(e=ei(e,"SupplementalProperty")).length)return null;for(var t=(e=c(e)).next();!t.done;t=e.next())if("urn:mpeg:dash:chaining:2016"==(t=t.value).attributes.schemeIdUri)return t.attributes.value;return null}function rm(e,t,n,r){var o=t.Kb;o||(o=ai(r,"mediaPresentationDuration",fi),e.l.Kb=o);var i=0;e.i&&e.i.presentationTimeline&&e.Z&&(i=e.i.presentationTimeline.Vb());var a=[],s=i;r=ei(r,"Period");for(var u=0;u<r.length;u++){var l=r[u],c=r[u+1],f=ai(l,"start",fi,s),p=l.attributes.id,d=ai(l,"duration",fi),h=null;if(c){var m=ai(c,"start",fi);null!=m&&(h=m-f)}else null!=o&&(h=o-f+i);if(m=Mn,h&&d&&Math.abs(h-d)>m&&h>d&&e.K++,null==h&&(h=d),!(null!==e.L&&null!==p&&null!==f&&f<e.L)||e.fa.includes(p)||u+1==r.length){if(null!==f&&(null===e.L||f>e.L)&&(e.L=f),s=om(e,t,n,{start:f,duration:h,node:l,ld:null==h||!c}),a.push(s),t.ta.id&&h&&(e.ba[t.ta.id]=h),null==h){s=null;break}s=f+h}}return e.fa=a.map(function(e){return e.id}),null!=o?{periods:a,duration:o+i,rg:!1}:{periods:a,duration:s,rg:!0}}function om(t,n,r,o){n.ta=um(t,o.node,null,r),n.ka=o,n.ta.Ia=n.Ia,n.ta.id||(n.ta.id="__shaka_period_"+o.start);var i=ei(o.node,"EventStream");r=n.presentationTimeline.mb();for(var a=(i=c(i)).next();!a.done;a=i.next())cm(t,o.start,o.duration,a.value,r);if(r=ei(o.node,"AdaptationSet").map(function(r,o){return function(t,n,r,o){function i(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function a(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.ja=um(t,o,n.ta,null),n.ja.position=r;var s,u,l=!1,p=(r=ei(o,"Role")).map(function(e){return e.attributes.value}).filter(Jn),d=void 0,h=n.ja.contentType==En;h&&(d="subtitle");for(var m=(r=c(r)).next();!m.done;m=r.next()){var g=(m=m.value).attributes.schemeIdUri;if(null==g||"urn:mpeg:dash:role:2011"==g)switch(m=m.attributes.value,m){case"main":l=!0;break;case"caption":case"subtitle":d=m}}g=ei(o,"EssentialProperty"),r=null;var v=!1;m=!1;for(var y=(g=c(g)).next();!y.done;y=g.next()){var b=(y=y.value).attributes.schemeIdUri;"http://dashif.org/guidelines/trickmode"==b?r=y.attributes.value:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==b?s=a(parseInt(y.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==b?u=i(parseInt(y.attributes.value,10)):"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=b&&("urn:mpeg:dash:ssr:2023"==b&&t.g.dash.enableFastSwitching?v=!0:m=!0)}var x=null;for(g=c(g=ei(o,"SupplementalProperty")),y=g.next();!y.done;y=g.next())y=y.value,"http://dashif.org/guidelines/last-segment-number"==(b=y.attributes.schemeIdUri)?x=parseInt(y.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==b?s=a(parseInt(y.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==b&&(u=i(parseInt(y.attributes.value,10)));g=ei(o,"Accessibility");var w,T=new Map;for(g=c(g),y=g.next();!y.done;y=g.next())if(b=y.value,y=b.attributes.schemeIdUri,b=b.attributes.value,"urn:scte:dash:cc:cea-608:2015"!=y||t.g.disableText)if("urn:scte:dash:cc:cea-708:2015"!=y||t.g.disableText)"urn:mpeg:dash:role:2011"==y?null!=b&&(p.push(b),"captions"==b&&(d="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==y&&("1"==b?w="visually impaired":"2"==b&&(w="hard of hearing"));else if(y=1,null!=b)for(var C=(b=c(b.split(";"))).next();!C.done;C=b.next()){var A=C.value,E=C=void 0;A.includes("=")?(C="svc"+(A=A.split("="))[0],E=A[1].split(",")[0].split(":").pop()):(C="svc"+y,y++,E=A),T.set(C,rr(E))}else T.set("svc1","und");else if(y=1,null!=b)for(b=b.split(";"),C=c(b),A=C.next();!A.done;A=C.next()){E=A.value;var I=A=void 0;E.includes("=")?(A=(E=E.split("="))[0].startsWith("CC")?E[0]:"CC"+E[0],I=E[1]||"und"):(A="CC"+y,2==b.length?y+=2:y++,I=E),T.set(A,rr(I))}else T.set("CC1","und");if(m)return null;var M=Ed(m=ei(o,"ContentProtection"),t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),R=rr(n.ja.language||"und"),_=n.ja.label;if(m=ei(o,"Representation"),o=m.map(function(r){return(r=function(t,n,r,o,i,a,s,u,l,f,p,d){n.J=um(t,f,n.ja,null);var h=n.J.id;if(t.R=Math.min(t.R,n.J.Ia),t.U=0<t.R,!function(e){var t=e.Rc?1:0;return t+=e.Pb?1:0,0==(t+=e.$b?1:0)?e.contentType==En||"application"==e.contentType:(1!=t&&(e.Rc&&(e.Pb=null),e.$b=null),!0)}(n.J))return null;var m=n.ka.start;n.bandwidth=ai(f,"bandwidth",hi)||0,n.roles=u;var g,v,y=n.J.contentType,b=y==En||"application"==y;y="image"==y;try{var x=void 0;if(r.Fe){var w=n.J.Ga,T=wn(w(),[r.Fe.ti]),C=xo(T,t.g.retryParameters);x={bitsKey:128,blockCipherMode:"CBC",iv:r.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,r,o;return O(function(i){if(1==i.g)return S(i,dm(t,C,6),2);if(3!=i.g){if(!(n=i.h).data||16!=n.data.byteLength)throw new Tt(2,4,4049);return r={name:"AES-CBC"},o=x,S(i,e.crypto.subtle.importKey("raw",n.data,r,!0,["decrypt"]),3)}o.cryptoKey=i.h,x.fetchKey=void 0,k(i)})}}}if(n.J.aesKey=x,w=function(e,n,r,o){return fm(t,e,n,r,o)},n.J.Rc)var A=Wd(n,w,x);else if(n.J.Pb)A=Zd(n,t.s,x);else if(n.J.$b)A=th(n,w,t.s,!!t.i,t.g.dash.initialSegmentLimit,t.ba,x,d,!1);else{var E=n.ka.duration||0,I=n.J.Ga,M=n.J.mimeType,R=n.J.codecs;A={fc:function(){var e=zs(m,E,I());return e.Hb(function(e){e.mimeType=M,e.codecs=R}),Promise.resolve(e)}}}}catch(L){if((b||y)&&4002==L.code)return null;throw L}if(d=function(e,t,n,r){var o=Ed(e,n,r);if(t.tg)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==o.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=o.drmInfos),t.tg=!1;else if(0<o.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(e){return o.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==t.drmInfos.length))throw new Tt(2,4,4008);return o.pg||t.pg}(d=ei(f,"ContentProtection"),r,t.g.dash.ignoreDrmInfo,t.g.dash.keySystemsByURI),d=new Set(d?[d]:[]),w=!1,ei(f,"SupplementalProperty").some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value})&&(w=!0),T=!1,b&&(T=u.includes("forced_subtitle")||u.includes("forced-subtitle")),y&&((f=ei(f,"EssentialProperty").find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)}))&&(g=f.attributes.value),!g))return null;f=n.J.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(f.includes("hvc1.2.4.L153.B0")||f.includes("hev1.2.4.L153.B0"))&&(v="PQ"),b=n.J.id?n.ta.id+","+n.J.id:"",t.B.length&&h&&t.o.set(n.ta.id+","+h,function(e){for(var t={},n=c(Object.keys(e)),r=n.next();!r.done;r=n.next())if(r=r.value,["period","adaptationSet","representation"].includes(r)){var o=e[r];t[r]={Rc:null,Pb:null,$b:o.$b,Ga:o.Ga,width:o.width,height:o.height,contentType:o.contentType,mimeType:o.mimeType,language:o.language,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,emsgSchemeIdUris:o.emsgSchemeIdUris,id:o.id,position:o.position,Jc:o.Jc,audioSamplingRate:o.audioSamplingRate,Ia:o.Ia,Gc:o.Gc}}else"periodInfo"==r?(o=e[r],t[r]={start:o.start,duration:o.duration,node:null,ld:o.ld}):t[r]=e[r];return t}(n));var _=b&&t.s[b]?t.s[b]:{id:t.ea++,originalId:n.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){_.segmentIndex&&(_.segmentIndex.release(),_.segmentIndex=null)},segmentIndex:null,mimeType:n.J.mimeType,codecs:f,frameRate:n.J.frameRate,pixelAspectRatio:n.J.pixelAspectRatio,bandwidth:n.bandwidth,width:n.J.width,height:n.J.height,kind:o,encrypted:0<r.drmInfos.length,drmInfos:r.drmInfos,keyIds:d,language:i,originalLanguage:n.ja.language,label:a,type:n.ja.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:n.J.emsgSchemeIdUris,roles:u,forced:T,channelsCount:n.J.Jc,audioSamplingRate:n.J.audioSamplingRate,spatialAudio:w,closedCaptions:l,hdr:v,colorGamut:void 0,videoLayout:void 0,tilesLayout:g,accessibilityPurpose:p,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ln(n.J.mimeType,n.J.codecs)])};return _.createSegmentIndex=function(){var e;return O(function(t){if(1==t.g)return _.segmentIndex?t.u(0):(e=_,S(t,A.fc(),3));e.segmentIndex=t.h,k(t)})},b&&n.vb&&!t.s[b]&&(t.s[b]=_),_}(t,n,M,d,R,_,l,p,T,r,w,x))&&(r.hdr=r.hdr||s,r.colorGamut=r.colorGamut||u,r.fastSwitching=v),r}).filter(function(e){return!!e}),0==o.length){if(r="image"==n.ja.contentType,t.g.dash.ignoreEmptyAdaptationSet||h||r)return null;throw new Tt(2,4,4003)}if(!n.ja.contentType||"application"==n.ja.contentType)for(n.ja.contentType=pm(o[0].mimeType,o[0].codecs),h=c(o),g=h.next();!g.done;g=h.next())g.value.type=n.ja.contentType;for(h=n.ja.id||"__fake__"+t.ea++,g=c(o),y=g.next();!y.done;y=g.next()){for(y=y.value,C=(b=c(M.drmInfos)).next();!C.done;C=b.next())(C=C.value).keyIds=C.keyIds&&y.keyIds?new Set([].concat(f(C.keyIds),f(y.keyIds))):C.keyIds||y.keyIds;t.g.dash.enableAudioGroups&&(y.groupId=h)}return m=m.map(function(e){return e.attributes.id}).filter(Jn),{id:h,contentType:n.ja.contentType,language:R,ek:l,streams:o,drmInfos:M.drmInfos,Yf:r,Mi:m}}(t,n,o,r)}).filter(Jn),n.vb){for(o=[],a=(i=c(r)).next();!a.done;a=i.next())for(var s=(a=c(a.value.Mi)).next();!s.done;s=a.next())o.push(s.value);if(o.length!=new Set(o).size)throw new Tt(2,4,4018)}for(o=r.filter(function(e){return!e.Yf}),i=(r=c(r=r.filter(function(e){return e.Yf}))).next();!i.done;i=r.next()){a=(i=i.value).Yf.split(" ");for(var u=(s=c(o)).next();!u.done;u=s.next())if(u=u.value,a.includes(u.id))for(var l=(u=c(u.streams)).next(),p={};!l.done;p={Sf:void 0},l=u.next())p.Sf=l.value,p.Sf.trickModeVideo=i.streams.find(function(e){return function(t){return Un(e.Sf.codecs)==Un(t.codecs)}}(p))}if(r=im(t.g.disableAudio,o,"audio"),i=im(t.g.disableVideo,o,"video"),a=im(t.g.disableText,o,En),o=im(t.g.disableThumbnails,o,"image"),0===i.length&&0===r.length)throw new Tt(2,4,4004);return{id:n.ta.id,audioStreams:r,videoStreams:i,textStreams:a,imageStreams:o}}function im(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n||e.push.apply(e,f(t.streams)),e},[])}function am(e){var t,n;return O(function(r){switch(r.g){case 1:return t=0,C(r,2),S(r,Yh(e),4);case 4:t=r.h,E(r,3);break;case 2:if(n=I(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),sm(e,t),k(r)}})}function sm(e,t){if(!(0>e.H)){var n=e.H;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.I.Y(Math.max(n-t,W(e.da)))}}function um(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Jc:null,audioSamplingRate:null,Ia:0,Kf:0},r=r||n.Ga;var o,i=t.attributes.id,a=ei(t,"BaseURL"),s=!1;if(e.h)for(var u=c(a),l=u.next();!l.done;l=u.next()){var f=l.value;l=f.attributes.serviceLocation,f=ni(f),l&&f&&(ch(e.h,i,l,f),s=!0)}s&&e.h||(o=a.map(ni)),u=t.attributes.contentType||n.contentType,l=t.attributes.mimeType||n.mimeType,f=[t.attributes.codecs||n.codecs];var p=si(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");p&&f.push(p),f=gu(f).join(","),p=ai(t,"frameRate",yi)||n.frameRate;var d=t.attributes.sar||n.pixelAspectRatio,h=function(e,t){t=t.slice();for(var n=(e=c(e)).next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}(ei(t,"InbandEventStream"),n.emsgSchemeIdUris),m=ei(t,"AudioChannelConfiguration");m=function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(m)||n.Jc;var g=ai(t,"audioSamplingRate",mi)||n.audioSamplingRate;u||(u=pm(l,f));var v=oi(t,"SegmentBase"),y=oi(t,"SegmentTemplate"),b=v&&ai(v,"availabilityTimeOffset",gi)||0,x=y&&ai(y,"availabilityTimeOffset",gi)||0,w=a&&a.length&&ai(a[0],"availabilityTimeOffset",gi)||0;b=n.Ia+w+b+x,x=null,(w=oi(t,"SegmentSequenceProperties"))&&(w=oi(w,"SAP"))&&(x=ai(w,"cadence",di)),w=t.attributes.label;var S=ei(t,"Label");return S&&S.length&&ti(S=S[0])&&(w=ti(S)),{Ga:function(){return wn(r(),a.length?e.h&&s?fh(e.h,i):o||[]:[])},Rc:v||n.Rc,Pb:oi(t,"SegmentList")||n.Pb,$b:y||n.$b,width:ai(t,"width",mi)||n.width,height:ai(t,"height",mi)||n.height,contentType:u,mimeType:l,codecs:f,frameRate:p,pixelAspectRatio:d,emsgSchemeIdUris:h,id:i,language:t.attributes.lang,Jc:m,audioSamplingRate:g,Ia:b,Gc:null,Kf:x||n.Kf,label:w||null}}function lm(e,t,n,r){var o,i,a,s,u,l,c;return O(function(f){if(1==f.g)return o=[pn(n)],i=wn(t(),o),(a=xo(i,e.g.retryParameters)).method=r,s=e.j.networkingEngine.request(4,a),go(e.N,s),S(f,s.promise,2);if(u=f.h,"HEAD"==r){if(!u.headers||!u.headers.date)return f.return(0);l=u.headers.date}else l=an(u.data);return c=Date.parse(l),isNaN(c)?f.return(0):f.return(c-Date.now())})}function cm(e,t,n,r,o){for(var i=r.attributes.schemeIdUri||"",a=r.attributes.value||"",s=ai(r,"timescale",mi)||1,u=(r=c(ei(r,"Event"))).next();!u.done;u=r.next()){var l=ai(u=u.value,"presentationTime",mi)||0,f=ai(u,"duration",mi)||0;f=(l=l/s+t)+f/s,null!=n&&(l=Math.min(l,t+n),f=Math.min(f,t+n)),f<o||(u={schemeIdUri:i,value:a,startTime:l,endTime:f,id:u.attributes.id||"",eventElement:Ti(u),eventNode:u},e.j.onTimelineRegionAdded(u))}}function fm(e,t,n,r,o){var i,a,s,u;return O(function(l){return 1==l.g?(i=Co,a=o?0:1,s=yu(t,n,r,e.g.retryParameters),S(l,dm(e,s,i,{type:a}),2)):(u=l.h,l.return(u.data))})}function pm(e,t){return Xn(t=Ln(e,t))?En:e.split("/")[0]}function dm(e,t,n,r){return t=e.j.networkingEngine.request(n,t,r),go(e.N,t),t.promise}function hm(){}(o=$h.prototype).configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.V()&&this.I.tc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Zg(this.g.dash.multiTypeVariantsAllowed&&ae()),this.m.gh(this.g.dash.useStreamOnceInPeriodFlattening))},o.start=function(e,t){var n,r=this;return O(function(o){if(1==o.g)return r.F=t.isLowLatencyMode(),r.A=[e],r.j=t,S(o,Yh(r),2);if(n=o.h,r.j&&sm(r,n),!r.j)throw new Tt(2,7,7001);return o.return(r.i)})},o.stop=function(){for(var e=c(Object.values(this.s)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.s={},this.o.clear(),this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.m=null,null!=this.I&&(this.I.stop(),this.I=null),this.h&&this.h.destroy(),this.C&&(this.C.release(),this.C=null),this.N.destroy()},o.update=function(){var e,t=this;return O(function(n){return 1==n.g?(C(n,2),S(n,Yh(t),4)):2!=n.g?E(n,0):(e=I(n),t.j&&e?(t.j.onError(e),void k(n)):n.return())})},o.onExpirationUpdated=function(){},o.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Wb();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,sm(this,0))}}},o.banLocation=function(e){this.h&&this.h.banLocation(e)},o.setMediaElement=function(e){this.G=e},V("shaka.dash.DashParser",$h),ea["application/dash+xml"]=function(){return new $h},ea["video/vnd.mpeg.dash.mpd"]=function(){return new $h},V("shaka.dependencies",hm),hm.has=function(e){return vm.has(e)},hm.add=function(e,t){if(!gm[e])throw Error(e+" is not supported");e==mm?le("mux.js","mux.js is no longer used in Shaka Player."):vm.set(e,function(){return t})};var mm="muxjs",gm={fk:mm,ISOBoxer:"ISOBoxer"};hm.Allowed=gm;var vm=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);function ym(e,t,n){this.type=e,this.g=t,this.segments=n||null}function bm(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=void 0===r?null:r}function xm(e,t){return t?e.toString():(t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function wm(e,t){return(e=e.attributes.filter(function(e){return e.name==t})).length?e[0]:null}function Sm(e,t,n){return(e=wm(e,t))?e.value:n||null}function Tm(e,t){if(!(e=wm(e,t)))throw new Tt(2,4,4023,t);return e.value}function km(e,t,n){n=void 0===n?[]:n,this.g=t,this.h=e,this.zb=n}function Cm(e,t){this.name=e,this.value=t}function Am(e,t){return e.filter(function(e){return e.name==t})}function Em(e,t){return e.filter(function(e){return Tm(e,"TYPE")==t})}function Im(e,t){for(var n=(e=c(e)).next();!n.done;n=e.next())if((n=n.value).name===t)return n;return null}function Mm(e,t,n){return n=void 0===n?0:n,(e=Im(e,t))?Number(e.value):n}function Rm(e,t,n){return t?_m(e,[t],n):[]}function _m(e,t,n){if(!t.length)return[];t=wn(e,t),e=[];for(var r=(t=c(t)).next();!r.done;r=t.next())e.push(Lm(r.value,n));return e}function Lm(e,t){if(!t||!t.size)return e;var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var r=(n=c(n)).next();!r.done;r=n.next()){var o=(r=r.value).slice(2,r.length-1),i=t.get(o);if(!i)throw new Tt(2,4,4039,o);e=e.replace(r,i)}return e}function Dm(){this.g=0}function Pm(e,t){var n=(t=(t=an(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new Tt(2,4,4015);t=0;for(var r=!0,o=c(n),i=o.next();!i.done;i=o.next())if(i=i.value,/^#(?!EXT)/m.test(i)||r)r=!1;else{if(i=Om(e,i),--e.g,Nm.includes(i.name)){t=1;break}"EXT-X-STREAM-INF"==i.name&&(r=!0)}for(o=[],r=!0,i=0;i<n.length;i++){var a=n[i],s=n[i+1];if(/^#(?!EXT)/m.test(a)||r)r=!1;else{if(a=Om(e,a),Um.includes(a.name)){if(1!=t)throw new Tt(2,4,4017);a=n.splice(i,n.length-i),n=[],r=[],i=[],s=null;for(var u=(a=c(a)).next();!u.done;u=a.next())u=u.value,/^(#EXT)/.test(u)?(u=Om(e,u),Nm.includes(u.name)?o.push(u):"EXT-X-MAP"==u.name?s=u:"EXT-X-PART"==u.name?i.push(u):"EXT-X-PRELOAD-HINT"==u.name?"PART"==Sm(u,"TYPE")?i.push(u):"MAP"==Sm(u,"TYPE")&&(u.name="EXT-X-MAP",s=u):r.push(u)):/^#(?!EXT)/m.test(u)||(u=u.trim(),s&&r.push(s),n.push(new km(u,r,i)),r=[],i=[]);return i.length&&(s&&r.push(s),n.push(new km("",r,i))),new ym(t,o,n)}o.push(a),"EXT-X-STREAM-INF"==a.name&&(a.attributes.push(new Cm("URI",s)),r=!0)}}return new ym(t,o)}function Om(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Tt(2,4,4016,t);t=n[1];var r,o=n[2];if(n=[],o){var i;(i=gf(o=new hf(o),/^([^,=]+)(?:,|$)/g))&&(r=i[1]);for(var a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;i=gf(o,a);)n.push(new Cm(i[1],i[2]||i[3])),mf(o)}return new bm(e,t,n,r)}bm.prototype.toString=function(e){var t="#"+this.name,n=this.attributes?this.attributes.filter(function(t){return!e||!e.has(t.name)}).map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&n.unshift(this.value),0<n.length&&(t+=":"+n.join(",")),t};var Nm="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),Um="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function Bm(){}function jm(e){try{var t=Fm(e);return so({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return io(n)}}function Fm(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new Tt(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new Tt(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var o=!1;return 1<n.length&&"base64"==n[n.length-1]&&(o=!0,n.pop()),{data:o?vn(t):ln(t),contentType:r}}function zm(){var e=this;this.g=this.h=null,this.B=1,this.s=new Map,this.G=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(En,new Map),this.N.set("image",new Map),this.ub=new Set,this.i=new Map,this.l=null,this.L="",this.Fa=new Dm,this.H=-1,this.fa=1/0,this.ea=this.Gb=!1,this.A=new _t(function(){e.ba&&!e.g.continueLoadingWhenPaused&&(e.Z.jb(e.ba,"timeupdate"),e.ba.paused)?e.Z.ha(e.ba,"timeupdate",function(){return kg(e)}):kg(e)}),this.xa=Pg,this.m=null,this.ab=0,this.o=1/0,this.Da=this.za=this.U=0,this.da=new mo,this.C=new Map,this.F=new Map,this.qa=new Map,this.oa=new Map,this.K=new Map,this.pa=new Map,this.ya=new Map,this.Fb=this.I=!1,this.Db=new X(5),this.j=null,this.R=!0,this.Ea=new Set,this.Z=new ne,this.ba=null}function Gm(e,t){return Cg(e)?e.N.get(t.type):t.Yd}function Vm(e,t){var n,r,o,i,a,s,u,l,p,d,h,m,g,v,y,b,x,w,T,A,M,R,_,L,D,P,N,U,B,j,F,z,G;return O(function(O){switch(O.g){case 1:for(n=[],r=c(t.M()),o=r.next();!o.done;o=r.next())i=o.value,a=new st(i),s=a.g,t.Fd&&(0<=t.ob&&s.add("_HLS_msn",String(t.ob)),0<=t.pb&&s.add("_HLS_part",String(t.pb))),t.Gd&&s.add("_HLS_skip","YES"),St(s)&&ft(a,s),n.push(a.toString());return C(O,2),S(O,Tg(e,n,!0),4);case 4:u=O.h,E(O,3);break;case 2:throw l=I(O),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return O.return();if(1!=(p=Pm(e.Fa,u.data)).type)throw new Tt(2,4,4017);return(d=u.uri)==u.originalUri||t.M().includes(d)||t.Tg.push(d),h=Am(p.g,"EXT-X-DEFINE"),m=Wm(e,h,d),g=t.stream,v=Gm(e,t),S(O,cg(e,p,g.mimeType,t.M,m),5);case 5:for(y=O.h,b=y.keyIds,x=y.drmInfos,function(e,t){return e.size===t.size&&[].concat(f(e)).every(function(e){return t.has(e)})}(g.keyIds,b)||(g.keyIds=b,g.drmInfos=x,e.h.newDrmInfo(g)),w=yg(e,p,v,m,t.M,t.type),T=w.segments,(A=w.bandwidth)&&(g.bandwidth=A),M=du(g),R=c(T),_=R.next();!_.done;_=R.next())(L=_.value).$&&(L.$.Hc=M);g.segmentIndex.rd(T,e.l.mb()),T.length&&(D=Mm(p.g,"EXT-X-MEDIA-SEQUENCE",0),N=(P=Im(p.g,"EXT-X-SKIP"))?Number(Sm(P,"SKIPPED-SEGMENTS")):0,U=ug(D,T),B=U.ob,j=U.pb,t.ob=B+N,t.pb=j,F=v.get(D),g.segmentIndex.Ma(F)),(z=g.segmentIndex.O[0]||null)&&(t.mc=z.startTime,G=T[T.length-1],t.Jb=G.endTime),Im(p.g,"EXT-X-ENDLIST")&&(t.ed=!0),pg(e,p),vg(e,p.g,g.type,m,t.M),k(O)}})}function Hm(e,t){for(var n=-1==e.H,r=c(t),o=r.next();!o.done;o=r.next()){var i=(o=o.value).stream.segmentIndex,a=Gm(e,o);if(i=i.O[0]||null)for(var s=(a=c(a)).next();!s.done;s=a.next()){var u=(s=c(s.value)).next().value;if(s.next().value==i.startTime){n&&(e.H=Math.max(e.H,u)),o.Re=u;break}}}if(!(0>e.H))for(n=(t=c(t)).next();!n.done;n=t.next())ag(e,(n=n.value).type)&&(r=n.stream.segmentIndex)&&0<(o=e.H-n.Re)&&(r.O.splice(0,o),r=r.O[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),qm(e,n,r))}function qm(e,t,n){t.mc+=n,t.Jb+=n;for(var r=c(e=Gm(e,t)),o=r.next();!o.done;o=r.next()){var i=c(o.value);o=i.next().value,i=i.next().value,e.set(o,i+n)}t.M()}function Xm(e){if(Cg(e)){if(e.xa==Ng){for(var t,n=t=1/0,r=c(e.i.values()),o=r.next();!o.done;o=r.next())(o=o.value).stream.segmentIndex&&"text"!=o.stream.type&&(t=Math.min(t,o.Jb),n=Math.min(n,o.mc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.pe(t)}}else e.l.Za(rg(e));if(!e.l.s)for(n=(t=c(e.i.values())).next();!n.done;n=t.next())!(n=n.value).stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.bh(n.h);e.l.Wd()}function Wm(e,t,n){n=new st(n).g;for(var r=new Map,o=(t=c(t)).next();!o.done;o=t.next()){var i=o.value,a=Sm(i,"NAME"),s=Sm(i,"VALUE");o=Sm(i,"QUERYPARAM"),i=Sm(i,"IMPORT"),a&&s&&(r.has(a)||r.set(a,s)),o&&(a=n.get(o)[0])&&!r.has(a)&&r.set(o,a),i&&(o=e.s.get(i))&&r.set(i,o)}return r}function Km(e){var t=new Set([Ln(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(Ln(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function $m(e,t,n){for(var r={audio:[],video:[]},o=new Map,i=[],a=!1,s=!1,u=c(t),l=u.next();!l.done;l=u.next()){var p=l.value;l=Sm(p,"AUDIO");var d=Sm(p,"VIDEO"),h=l||d;h&&(i.includes(h)||i.push(h),(p=Sm(p,"PATHWAY-ID"))&&o.set(h,p),l?a=!0:d&&(s=!0))}i.length&&n.length&&function(e,t,n){t=t.filter(function(e){var t=Sm(e,"URI")||"";return"SUBTITLES"!=Sm(e,"TYPE")&&""!=t});for(var r={},o=(t=c(t)).next();!o.done;o=t.next()){var i=xm(o=o.value,!e.j);r[i]?r[i].push(o):r[i]=[o]}for(var a in r)tg(e,r[a],n)}(e,u=n.filter(function(e){return i.includes(Tm(e,"GROUP-ID"))}),o),u=(o=i.sort().join(","))&&e.G.has(o)?e.G.get(o):[],a?r.audio.push.apply(r.audio,f(u)):s&&r.video.push.apply(r.video,f(u)),l=!1;var m=t.map(function(e){return Tm(e,"URI")});if(s=r.audio.find(function(e){return e&&e.M().find(function(e){return m.includes(e)})}),d=Cn("video",a=Ym(e,t[0])),(h=Cn("audio",a))&&!d?(s="audio",l=0<r.audio.length):!r.audio.length&&!r.video.length&&h&&d?(s="video",a=[[d,h].join()]):r.audio.length&&s?(s="audio",l=!0):s=r.video.length&&!r.audio.length?"audio":"video",!l){var g=p=h=d=l=null;!u.length&&(n=n.find(function(e){var t=Sm(e,"URI")||"",n=Sm(e,"TYPE");return e=Tm(e,"GROUP-ID"),"SUBTITLES"!=n&&""==t&&i.includes(e)}))&&(l=Sm(n,"LANGUAGE"),d=Sm(n,"NAME"),h=Qm(n),Zm(n),p=Sm(n,"CHARACTERISTICS"),g=Jm(n)),e=function(e,t,n,r,o,i,a,s,u){for(var l=e.B++,f=[],p=c(t),d=p.next();!d.done;d=p.next()){var h=d.value;d=Tm(h,"URI"),h=Sm(h,"PATHWAY-ID"),e.j&&h&&ch(e.j,l,h,d),f.push(d)}if(p=f.sort().join(","),e.i.has(p))return e.i.get(p);e:{if(t=Sm(t[0],"CLOSED-CAPTIONS"),"video"==r){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if("NONE"!=t){t=e.C.get(t);break e}e.R=!1}else if(!t&&e.C.size)for(t=c(e.C.keys()).next();!t.done;){t=e.C.get(t.value);break e}}t=null}return n=kn(r,n),r=ng(e,l,f,n,r,o,!1,i,a,t,s,!1,u,!1),e.i.set(p,r),r}(e,t,a,s,l,d,h,p,g),o&&(e.stream.groupId=o),r[e.stream.type]=[e]}return r}function Ym(e,t){var n=Sm(t,"CODECS")||"";return t=Sm(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),e.push.apply(e,f(t))),gu(e)}function Qm(e){return(e=Sm(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function Jm(e){return(e=Sm(e,"SAMPLE-RATE"))?parseInt(e,10):null}function Zm(e){return!!(e=Sm(e,"CHANNELS"))&&e.includes("/JOC")}function eg(e,t,n,r,o,i,a,s,u,l,f){for(var p=c(n),d=p.next();!d.done;d=p.next())Sg(d.value.stream,o,i,a,s,u,null);for(o=e.g.disableAudio,t.length&&!o||(t=[null]),o=e.g.disableVideo,n.length&&!o||(n=[null]),o=[],i=(t=c(t)).next();!i.done;i=t.next())for(i=i.value,s=(a=c(n)).next();!s.done;s=a.next()){var h=s.value;(s=i?i.stream:null)&&(s.drmInfos=l,s.keyIds=f),(u=h?h.stream:null)&&(u.drmInfos=l,u.keyIds=f),u&&!s&&(u.bandwidth=r),!u&&s&&(s.bandwidth=r),p=i?i.stream.drmInfos:null,d=h?h.stream.drmInfos:null,h=(h=h?h.M().sort().join(","):"")+" - "+(i?i.M().sort().join(","):""),s&&u&&!Ct(p,d)||e.ub.has(h)||(s={id:e.B++,language:s?s.language:"und",disabledUntilTime:0,primary:!!s&&s.primary||!!u&&u.primary,audio:s,video:u,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},o.push(s),e.ub.add(h))}return o}function tg(e,t,n){for(var r=[],o=[],i=new Map,a=c(t),s=a.next();!s.done;s=a.next()){var u=s.value;s=Tm(u,"URI"),u=Tm(u,"GROUP-ID"),r.push(s),o.push(u),i.set(u,s)}if(a=o.sort().join(","),s=t[0],t="","subtitles"==(u=Tm(s,"TYPE").toLowerCase())&&(u=En),u==En)t=Sm(s,"CODECS")||"";else for(var l=(o=c(o)).next();!l.done;l=o.next())if(l=l.value,e.F.has(l)){t=e.F.get(l);break}if(o=r.sort().join(","),e.i.has(o))return e.i.get(o);if(l=e.B++,e.j)for(var f=(i=c(i)).next();!f.done;f=i.next()){var p=c(f.value);f=p.next().value,p=p.next().value,(f=n.get(f))&&ch(e.j,l,f,p)}n=Sm(s,"LANGUAGE"),i=Sm(s,"NAME"),f="YES"==Sm(s,"DEFAULT"),p="audio"==u?Qm(s):null;var d="audio"==u&&Zm(s);return(r=ng(e,l,r,t,u,n,f,i,p,null,Sm(s,"CHARACTERISTICS"),"YES"==Sm(s,"FORCED"),s="audio"==u?Jm(s):null,d)).stream&&(r.stream.groupId=a),e.G.has(a)?e.G.get(a).push(r):e.G.set(a,[r]),e.i.set(o,r),r}function ng(e,t,n,r,o,i,a,s,u,l,f,p,d,h){function m(t){var n,m,x,w,T,A,M,R,_,L,D,P,N,U,B,j,F,z,G,V,H,q;return O(function(O){switch(O.g){case 1:return n=In,m=b.M(),C(O,2),S(O,Tg(e,b.M(),!0),4);case 4:x=O.h,E(O,3);break;case 2:if(w=I(O),v.closeSegmentIndex(),e.h.disableStream(v))return O.return();throw w;case 3:if(t.aborted)return O.return();if((T=x.uri)==x.originalUri||m.includes(T)||y.push(T),1!=(A=Pm(e.Fa,x.data)).type)throw new Tt(2,4,4017);return M=Am(A.g,"EXT-X-DEFINE"),R=Wm(e,M,T),_=!1,(!e.ea&&e.g.hls.disableCodecGuessing||e.R&&o==n.ga&&!e.g.hls.disableClosedCaptionsDetection)&&0<A.segments.length&&(e.R=!1,_=!0),L=!e.ea&&e.g.hls.disableCodecGuessing,D=Cg(e),S(O,sg(e,0,R,A,g,r,o,i,a,s,u,l,f,p,d,h,void 0,_,L),5);case 5:if(P=O.h,t.aborted)return O.return();if(N=P.stream,Cg(e)&&!D&&dg(e,A),b.mc=P.mc,b.Jb=P.Jb,b.Gd=P.Gd,b.Fd=P.Fd,b.ed=P.ed,b.Yd=P.Yd,b.ob=P.ob,b.pb=P.pb,b.vf=!0,v.segmentIndex=N.segmentIndex,v.encrypted=N.encrypted,v.drmInfos=N.drmInfos,v.keyIds=N.keyIds,v.mimeType=N.mimeType,v.bandwidth=v.bandwidth||N.bandwidth,v.codecs=v.codecs||N.codecs,v.closedCaptions=v.closedCaptions||N.closedCaptions,v.width=v.width||N.width,v.height=v.height||N.height,v.hdr=v.hdr||N.hdr,v.colorGamut=v.colorGamut||N.colorGamut,"und"==v.language&&"und"!=N.language&&(v.language=N.language),v.language=v.language||N.language,v.channelsCount=v.channelsCount||N.channelsCount,v.audioSamplingRate=v.audioSamplingRate||N.audioSamplingRate,Km(v),v.drmInfos.length&&e.h.newDrmInfo(v),U=!1,(!l&&v.closedCaptions||l&&v.closedCaptions&&l.size!=v.closedCaptions.size)&&(U=!0),e.m&&U&&e.h.makeTextStreamsForClosedCaptions(e.m),o==n.ga||o==n.X)for(B=c(e.i.values()),j=B.next();!j.done;j=B.next())(F=j.value).vf||F.type!=o||(F.stream.mimeType=N.mimeType,Km(F.stream));o==n.ua&&(z=N.segmentIndex.get(0))&&z.$&&(v.mimeType="application/mp4",Km(v)),G=du(v),v.segmentIndex.Hb(function(e){e.$&&(e.$.Hc=G)}),function(e){if(!e.m)return!1;for(var t=[],n=[],r=(e=c(e.m.variants)).next();!r.done;r=e.next())(r=r.value).video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(e){return e.segmentIndex})||0<n.length&&!n.some(function(e){return e.segmentIndex}))}(e)&&(e.Gb?ig(e,[b]):(e.Gb=!0,V=Array.from(e.i.values()),H=V.filter(function(e){return e.stream.segmentIndex}),ig(e,H),Xm(e),0<(q=e.o)&&e.A.Y(q))),vg(e,A.g,v.type,R,g),k(O)}})}function g(){return e.j&&1<n.length?fh(e.j,t):y.concat(_m([e.L],n,e.s))}var v=lg(e,r,o,i,a,s,u,l,f,p,d,h),y=[],b={stream:v,type:o,Tg:y,M:g,mc:0,Jb:0,Yd:new Map,Gd:!1,Fd:!1,ed:!1,Re:-1,ob:-1,pb:-1,vf:!1},x=null,w=new AbortController;return v.createSegmentIndex=function(){return x||(w=new AbortController,x=new Promise(function(e){e(m(w.signal))}))},v.closeSegmentIndex=function(){x&&!v.segmentIndex&&w.abort(),v.segmentIndex&&(v.segmentIndex.release(),v.segmentIndex=null),x=null},b}function rg(e){for(var t=1/0,n=(e=c(e.i.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Jb));return t}function og(e,t){for(var n=[],r=(t=c(t)).next();!r.done;r=t.next())(r=r.value).segmentIndex&&r.segmentIndex.Hb(function(e){n.push(e)});e.l.sd(n)}function ig(e,t){if(!Cg(e))for(var n=rg(e),r=c(t),o=r.next();!o.done;o=r.next())o.value.stream.segmentIndex.Bc(0,n);og(e,t.map(function(e){return e.stream})),e.g.hls.ignoreManifestProgramDateTime?Hm(e,t):(function(e,t){if(1/0==e.fa)for(var n=(t=c(t)).next();!n.done;n=t.next())null!=(n=n.value.stream.segmentIndex.O[0]||null)&&null!=n.h&&(e.fa=Math.min(e.fa,n.h));if(1/0!=(t=e.fa))for(var r=(n=c(e.i.values())).next();!r.done;r=n.next())if(!ag(e,(r=r.value).type)){var o=r.stream.segmentIndex;if(null!=o){var i=o.O[0]||null;if(i)if(null==i.h)Y("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.M(),"Expect AV sync issues!");else for(qm(e,r,i.h-t-i.startTime),o=(r=c(o)).next();!o.done;o=r.next())o.value.Vf(t)}}}(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&Hm(e,t))}function ag(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function sg(e,t,n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b){var x,w,T,k,A,M,R,_,L,D,P,N,U,B,j,F,z,G,V,H,q,X,W,K,$,Y;return y=void 0===y||y,b=void 0===b||b,O(function(t){switch(t.g){case 1:var Q=Im(r.g,"EXT-X-PLAYLIST-TYPE"),J=Im(r.g,"EXT-X-ENDLIST");if(J=Q&&"VOD"==Q.value||J,Q=Q&&"EVENT"==Q.value&&!J,Q=!J&&!Q,Ag(e,J?Pg:Q?Ng:Og),Cg(e)&&pg(e,r),x=Cg(e)?e.N.get(a):new Map,w=yg(e,r,x,n,o,a),T=w.segments,k=w.bandwidth,_=R=M=A=null,!(0<T.length&&y)){t.u(2);break}return S(t,function(e,t){var n,r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,k,C,A;return O(function(E){switch(E.g){case 1:if(n=hu(e.g.hls.mediaPlaylistFullMimeType),!t.length)return E.return(n);if(r=wg(e,t),o=r.segment,i=r.segmentIndex,a=o.M(),s=a[0],u=new st(s),l=u.Pa.split(".").pop(),f=Rg[l])return E.return(hu(f));if(p=Co,h=d=null,!(m=o.$)){E.u(2);break}return g=yu(m.M(),m.Xb(),m.Ub(),e.g.retryParameters),S(E,Eg(e,g,p,{type:0}),3);case 3:if(v=E.h,d=v.data,!m.aesKey){E.u(4);break}return S(E,vu(d,m.aesKey,0),5);case 5:d=E.h;case 4:(h=v.headers["content-type"])&&(h=h.split(";")[0].toLowerCase());case 2:return y=yu(o.M(),o.Xb(),o.Ub(),e.g.retryParameters),S(E,Eg(e,y,p,{type:1}),6);case 6:if(b=E.h,x=b.data,!o.aesKey){E.u(7);break}return S(E,vu(x,o.aesKey,i),8);case 8:x=E.h;case 7:if((w=b.headers["content-type"])&&(w=w.split(";")[0].toLowerCase()),T="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),k=["audio/mp4","video/mp4","video/iso.segment"],Xa(be(x))){var I=x,M=be(I),R=(M=(new Va).parse(M)).$c();M=M.kf();var _=[],L=!1,D=!1;switch(R.audio){case"aac":case"aac-loas":_.push("mp4a.40.2"),L=!0;break;case"mp3":_.push("mp4a.40.34"),L=!0;break;case"ac3":_.push("ac-3"),L=!0;break;case"ec3":_.push("ec-3"),L=!0;break;case"opus":_.push("opus"),L=!0}switch(R.video){case"avc":M.codec?_.push(M.codec):_.push("avc1.42E01E"),D=!0;break;case"hvc":M.codec?_.push(M.codec):_.push("hvc1.1.6.L93.90"),D=!0;break;case"av1":_.push("av01.0.01M.08"),D=!0}if(_.length){if(R=L&&!D,L=new Map,D){(D=new ke("video/mp2t")).i(I);for(var P=(I=c(D.j())).next();!P.done;P=I.next())P=P.value,L.set(P,P);D.g()}M={type:R?"audio":"video",mimeType:"video/mp2t",codecs:_.join(", "),language:null,height:M.height,width:M.width,channelCount:null,sampleRate:null,closedCaptions:L,xd:null,colorGamut:null}}else M=null;if(C=M)return E.return(C)}else if((T.includes(l)||k.includes(w)||h&&k.includes(h))&&(A=mu(d,x)))return E.return(A);return w?E.return(hu(w)):h?E.return(hu(h)):E.return(n)}})}(e,T),3);case 3:L=t.h,a=L.type,s=L.language,f=L.channelCount,m=L.sampleRate,e.g.disableText||(p=L.closedCaptions),M=L.height,A=L.width,R=L.xd,_=L.colorGamut,b&&(v=L.mimeType,i=L.codecs);case 2:if(v){t.u(4);break}return S(t,function(e,t,n,r){var o,i,a,s,u,l,c,f,p,d,h,m,g,v;return O(function(y){switch(y.g){case 1:return o=Co,i=wg(e,r),2==(a=i.segment).status?y.return(xg(t)):(s=a.M(),u=new st(s[0]),l=u.Pa.split(".").pop(),c=_g[t],(f=c[l])||(f=Rg[l])||(f=bg(t,n))?y.return(f):(d=1,h=xo(s,e.g.retryParameters),C(y,2),h.method="HEAD",S(y,Eg(e,h,o,{type:d}),4)));case 4:m=y.h,p=m.headers["content-type"],E(y,3);break;case 2:if(!(g=I(y))||1002!=g.code&&1001!=g.code){y.u(3);break}return h.method="GET",S(y,Eg(e,h,o,{type:d}),6);case 6:v=y.h,p=v.headers["content-type"];case 3:return p?y.return(p.toLowerCase().split(";")[0]):y.return(xg(t))}})}(e,a,i,T),5);case 5:v=t.h;case 4:return S(t,cg(e,r,v,o,n),6);case 6:if(D=t.h,P=D.drmInfos,N=D.keyIds,U=D.encrypted,B=D.wh,U&&!P.length&&!B)throw new Tt(2,4,4026);return(j=lg(e,i,a,s,u,l,f,p,d,h,m,g)).encrypted=U,j.drmInfos=P,j.keyIds=N,j.mimeType=v,k&&(j.bandwidth=k),Km(j),"video"==a&&(A||M||R||_)&&Sg(j,A,M,null,R,null,_),Cg(e)&&pg(e,r),F=T[0].startTime,z=T[T.length-1],G=z.endTime,V=new Fs(T),j.segmentIndex=V,q=!!(H=Im(r.g,"EXT-X-SERVER-CONTROL"))&&null!=wm(H,"CAN-SKIP-UNTIL"),X=!!H&&null!=wm(H,"CAN-BLOCK-RELOAD"),W=Mm(r.g,"EXT-X-MEDIA-SEQUENCE",0),K=ug(W,T),$=K.ob,Y=K.pb,t.return({stream:j,type:a,Tg:[],M:o,mc:F,Jb:G,Gd:q,Fd:X,ed:!1,Re:-1,ob:$,pb:Y,Yd:x,vf:!1})}})}function ug(e,t){e=e+t.length-1;var n=-1;if(!t.length)return{ob:++e,pb:n};var r=(t=t[t.length-1]).g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{ob:e,pb:n}):(e++,t.m&&(n=0),{ob:e,pb:n})}function lg(e,t,n,r,o,i,a,s,u,l,f,p){var d=bg(n,t)||xg(n),h=[];if(u)for(var m=(u=c(u.split(","))).next();!m.done;m=u.next())h.push(m.value);return u=void 0,m=null,n==En?u=h.includes("public.accessibility.transcribes-spoken-dialog")&&h.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":h.includes("public.accessibility.describes-video")&&(m="visually impaired"),h.length||"subtitle"!==u||h.push("subtitle"),Km(e={id:e.B++,originalId:i,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:d,codecs:t,kind:n==En?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:rr(r||"und"),originalLanguage:r,label:i,type:n,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:h,forced:l,channelsCount:a,audioSamplingRate:f,spatialAudio:p,closedCaptions:s,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:m,external:!1,fastSwitching:!1,fullMimeTypes:new Set}),e}function cg(e,t,n,r,o){var i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,k,C,A,E,I,M,R,_,L,D,P;return O(function(O){switch(O.g){case 1:if(i=new Map,t.segments)for(a=c(t.segments),s=a.next();!s.done;s=a.next())if(u=s.value,l=Am(u.g,"EXT-X-KEY"),f=null,l.length)for(f=hg(e,t,u.g,r,o),p=c(l),d=p.next();!d.done;d=p.next())h=d.value,i.set(h,f);g=m=!1,v=[],y=new Set,b=c(i),x=b.next();case 2:if(x.done){O.u(4);break}if(w=x.value,T=c(w),k=T.next().value,C=T.next().value,E=C,"NONE"==(I=Tm(A=k,"METHOD"))){O.u(3);break}if(m=!0,M=Sm(A,"KEYFORMAT")||"identity",R=null,Ig(I)){g=!0,O.u(3);break}if("identity"!=M){R=(_=Dg[M])?_(A,n):null,O.u(6);break}return S(O,Mg(e,A,n,r,E,o),8);case 8:R=O.h;case 6:if(R){if(R.keyIds)for(L=c(R.keyIds),D=L.next();!D.done;D=L.next())P=D.value,y.add(P);v.push(R)}case 3:x=b.next(),O.u(2);break;case 4:return O.return({drmInfos:v,keyIds:y,encrypted:m,wh:g})}})}function fg(t,n,r,o,i){if(!e.crypto||!e.crypto.subtle)throw Q("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new Tt(2,4,4042);var a=0,s=Sm(n,"IV","");if(s){var u=yn(s.substr(2));if(16!=u.byteLength)throw new Tt(2,4,4048)}else a=Mm(r.g,"EXT-X-MEDIA-SEQUENCE",0);if(r=n.toString()+"-"+a,!t.oa.has(r)){var l={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:a};switch(Tm(n,"METHOD")){case"AES-256":l.bitsKey=256;break;case"AES-256-CTR":l.bitsKey=256,l.blockCipherMode="CTR"}l.fetchKey=function(){var r,a,s,u,c,f;return O(function(p){if(1==p.g)return r=Rm(o(),Tm(n,"URI"),i),a=r.sort().join(""),t.K.has(a)||(s=xo(r,t.g.retryParameters),u=Eg(t,s,6),t.K.set(a,u)),S(p,t.K.get(a),2);if(3!=p.g){if(!(c=p.h).data||c.data.byteLength!=l.bitsKey/8)throw new Tt(2,4,4049);return f={name:"CTR"==l.blockCipherMode?"AES-CTR":"AES-CBC",length:l.bitsKey},S(p,e.crypto.subtle.importKey("raw",c.data,f,!0,["decrypt"]),3)}l.cryptoKey=p.h,l.fetchKey=void 0,k(p)})},t.oa.set(r,l)}return t.oa.get(r)}function pg(e,t){var n=1/0,r=t.segments;if(r.length)for(var o=r.length-1;0<=o;){var i=Im(r[o].g,"EXTINF");if(i){n=Number(i.value.split(",")[0]);break}o--}if(!(r=Im(t.g,"EXT-X-TARGETDURATION")))throw new Tt(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(o=Im(t.g,"EXT-X-PART-INF"))&&(e.U=Number(Tm(o,"PART-TARGET"))),t=Im(t.g,"EXT-X-SERVER-CONTROL"),e.I&&e.U?(e.o=e.Fb?5*e.U<=n?Math.min(e.U,e.o):Math.min(n,e.o):Math.min(e.U,e.o),e.Da=t?Number(Tm(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?wm(t,"HOLD-BACK"):null,e.za=n?Number(n.value):0),e.ab=Math.max(r,e.ab)}function dg(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Da)t=e.Da;else if(e.za)t=e.za;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ab*n}e.l.dh(0),e.l.Of(t),e.l.sc(!1)}function hg(e,t,n,r,o){var i=Im(n,"EXT-X-MAP");if(!i)return null;var a=Tm(i,"URI"),s=Rm(r(),a,o);if(a=[s.toString(),Sm(i,"BYTERANGE","")].join("-"),!e.qa.has(a)){for(var u=void 0,l=null,f=(n=c(n)).next();!f.done;f=n.next())"EXT-X-KEY"==(f=f.value).name?Ig(Tm(f,"METHOD"))&&f.id<i.id&&(u=fg(e,f,t,r,o)):"EXT-X-BYTERANGE"==f.name&&f.id<i.id&&(l=f);t=function(e,t,n,r){var o=0,i=null;return!(t=Sm(t,"BYTERANGE"))&&n&&(t=n.value),t&&(o=t.split("@"),i=Number(o[0]),o=Number(o[1]),i=o+i-1,r&&((n=i+1-o)%16&&(i+=16-n%16))),new oa(function(){return e},o,i,null,null,null,r)}(s,i,l,u),e.qa.set(a,t)}return e.qa.get(a)}function mg(t,n,r,o,i,a,s,u,l){function f(e){e=new st(e).Pa.split(".").pop();var t=_g[s][e];return t||(t=Rg[e]),t}var p=o.g,d=Im(p,"EXTINF"),h=0,m=0,g=null;o.zb.length&&(t.m.isLowLatency=!0);var v=null;if(!t.g.hls.ignoreManifestProgramDateTime){var y=Im(p,"EXT-X-PROGRAM-DATE-TIME");y&&y.value&&(v=ci(y.value))}var b=la;if(Im(p,"EXT-X-GAP")&&(t.m.gapCount++,b=2),!d){if(0==o.zb.length)throw new Tt(2,4,4024,"EXTINF");if(!t.I)return null}var x=[];y=!1;var w=null,S=!1,T=!1;if(t.I&&o.zb.length){h=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var k=v,C={},A=0;A<o.zb.length;C={xe:void 0,ge:void 0},A++){var E=o.zb[A],I=0==A?r:x[x.length-1],M=0==A?i:I.endTime,R=Number(Sm(E,"DURATION"))||t.U;if(R){var _=M+R,L=0,D=null;if("EXT-X-PRELOAD-HINT"==E.name?(L=(L=Sm(E,"BYTERANGE-START"))?Number(L):0,(I=Sm(E,"BYTERANGE-LENGTH"))?D=L+Number(I)-1:L&&(D=Number.MAX_SAFE_INTEGER)):(L=(D=c(gg(I,L=Sm(E,"BYTERANGE")))).next().value,D=D.next().value),C.ge=Sm(E,"URI"),C.ge){I=la,"YES"==Sm(E,"GAP")&&(t.m.gapCount++,I=2,S=!0),C.xe=null;var P=function(e){return function(){return null==e.xe&&(e.xe=Rm(u(),e.ge,a)),e.xe}}(C);h&&0<=L&&null!=D&&(w=P,y=!0),M=new aa(M,_,P,L,D,n,0,0,1/0,[],"",null,k,I,l),"EXT-X-PRELOAD-HINT"==E.name&&(M.wf(),T=!0),"YES"!=Sm(E,"INDEPENDENT")&&0<A&&M.Xd(),(C=f(C.ge))&&(M.mimeType=C,Lg.has(C)&&(M.$=null)),x.push(M),k&&(k+=R)}}}}if(d){if(0==(d=Number(d.value.split(",")[0])))return null;h=i+d}else{if(!x.length)return null;h=x[x.length-1].endTime}y&&(S||0!=x[0].Ha?(y=!1,w=null):x=[]),(d=Im(p,"EXT-X-BYTERANGE"))?(m=(g=c(gg(r,d.value))).next().value,g=g.next().value):x.length&&(m=x[0].Ha,g=x[x.length-1].sa),r="",d=null,"image"==s&&(r="1x1",p=Im(p,"EXT-X-TILES"))&&(r=Tm(p,"LAYOUT"),(p=Sm(p,"DURATION"))&&(d=Number(p)));var O=null;return n=new aa(i,h,function(){return w?w():(null==O&&(O=Rm(u(),o.h,a)),O||[])},m,g,n,0,0,1/0,x,r,d,v,b,l,0<x.length&&!!o.h),(i=f(o.h))&&(n.mimeType=i,Lg.has(i)&&(n.$=null)),y&&(t.Fb=!0,n.Ig(),T&&n.wf()),n}function gg(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),r=(n=n[1]?Number(n[1]):e.sa+1)+t-1),[n,r]}function vg(e,t,n,r,o){if("video"==n||"audio"==n){var i=e.l.m;if(i&&!ag(e,n))for(t=(t=Am(t,"EXT-X-DATERANGE")).sort(function(e,t){return(e=Tm(e,"START-DATE"))<(t=Tm(t,"START-DATE"))?-1:e>t?1:0}),n=0;n<t.length;n++){var a=t[n],s=Tm(a,"ID");if(!e.Ea.has(s)){var u=Tm(a,"START-DATE"),l=ci(u);if(!isNaN(l)){u=Math.max(0,l-i);var f=null,p=Sm(a,"END-DATE");if(p&&(p=ci(p),!isNaN(p)&&0>(f=p-i)))continue;if(null==f&&(p=Sm(a,"DURATION")||Sm(a,"PLANNED-DURATION"))&&(p=parseFloat(p),isNaN(p)||(f=u+p),0>l-i+p))continue;p=Sm(a,"CLASS")||"com.apple.quicktime.HLS";var d="YES"==Sm(a,"END-ON-NEXT");if(null==f&&d){for(d=n+1;d<t.length;d++){var h=Sm(t[d],"CLASS")||"com.apple.quicktime.HLS";if(p==h&&(h=ci(h=Tm(t[d],"START-DATE")),!isNaN(h)&&h&&h>l)){f=Math.max(0,h-i);break}}if(null==f)continue}for(l="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),d=[],h=(a=c(a.attributes)).next();!h.done;h=a.next())if(h=h.value,!l.includes(h.name)){var m=Lm(h.value,r);"X-ASSET-URI"!=h.name&&"X-ASSET-LIST"!=h.name||(m=Rm(o(),h.value,r)[0]),d.push({key:h.name,description:"",data:m,mimeType:null,pictureType:null})}d.length&&e.h.onMetadata(p,u,f,d),e.Ea.add(s)}}}}}function yg(e,t,n,r,o,i){var a=t.segments,s=void 0,u=Mm(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),l=Mm(t.g,"EXT-X-MEDIA-SEQUENCE",0),f=Im(t.g,"EXT-X-SKIP"),p=f?Number(Sm(f,"SKIPPED-SEGMENTS")):0,d=l+p,h=0;Cg(e)&&n.has(d)&&(h=n.get(d)),0===h&&e.xa==Ng&&0<n.size&&!n.has(d)&&(h=e.l.mb());var m=[],g=null;f=[];for(var v=0;v<a.length;v++){var y=a[v],b=0==v?h:g.endTime;d=l+p+v,Im(y.g,"EXT-X-DISCONTINUITY")&&u++;for(var x=c(y.g),w=x.next();!w.done;w=x.next())"EXT-X-KEY"==(w=w.value).name&&(s=Ig(Tm(w,"METHOD"))?fg(e,w,t,o,r):void 0);n.set(d,b),x=hg(e,t,y.g,o,r),!e.I&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.I=e.h.isLowLatencyMode()),(b=mg(e,x,g,y,b,r,i,o,s))&&((g=Mm(y.g,"EXT-X-BITRATE"))?f.push({bitrate:g,duration:b.endTime-b.startTime}):f.length&&((g=f.pop()).duration+=b.endTime-b.startTime,f.push(g)),g=b,b.i=u,ag(e,i)&&null!=e.H&&d<e.H||m.push(b))}if(t=void 0,f.length&&(t=f.reduce(function(e,t){return e+t.duration},0),t=Math.round(f.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),f=m.some(function(e){return null!=e.h}))for(n={},r=0;r<m.length;n={Kd:void 0,Jd:void 0,Bd:void 0,pc:void 0,zd:void 0},r++)if(n.pc=m[r],null==n.pc.h)for(n.Jd=0,n.Kd=r,o=function(e){return function(){var t=m[e.Kd];if(t){if(null!=t.h)return t.h+e.Jd;e.Jd-=t.endTime-t.startTime,e.Kd+=1}return null}}(n),n.zd=0,n.Bd=r,a=function(e){return function(){var t=m[e.Bd];if(t){if(t!=e.pc&&(e.zd+=t.endTime-t.startTime),null!=t.h)return t.h+e.zd;--e.Bd}return null}}(n);null==n.pc.h;)n.pc.h=a(),null==n.pc.h&&(n.pc.h=o());if(f)for(r=(n=c(m)).next();!r.done;r=n.next())for(r=(o=r.value).h,a=(o=c(o.g)).next();!a.done;a=o.next())(a=a.value).h=r,r+=a.endTime-a.startTime;if(n=e.fa,f&&1/0!=n&&!ag(e,i))for(i=(e=c(m)).next();!i.done;i=e.next())i.value.Vf(n);return{segments:m,bandwidth:t}}function bg(e,t){if(e==En){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function xg(e){return e==En?"text/vtt":_g[e].mp4}function wg(e,t){for(var n=t[e=Cg(e)?Math.trunc((t.length-1)/2):0];2==n.Yb()&&e+1<t.length;)n=t[++e];return{segment:n,segmentIndex:e}}function Sg(e,t,n,r,o,i,a){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=o||void 0,e.videoLayout=i||void 0,e.colorGamut=a||void 0)}function Tg(e,t,n){return Eg(e,xo(t,e.g.retryParameters),0,{type:n?2:3})}function kg(e){var t,n,r,o,i,a;return O(function(s){switch(s.g){case 1:return e.h?(C(s,2),t=Date.now(),S(s,e.update(),4)):s.return();case 4:n=Date.now(),Cg(e)&&(r=(n-t)/1e3,e.Db.sample(1,r),o=e.o,i=Math.max(0,o-W(e.Db)),e.A.Y(i)),E(s,3);break;case 2:if(a=I(s),!e.h)return s.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(a),s.return();a.severity=1,e.h.onError(a),e.A.Y(.1);case 3:if(!e.h)return s.return();e.h.onManifestUpdated(),k(s)}})}function Cg(e){return e.xa!=Pg}function Ag(e,t){e.xa=t,e.l&&e.l.sc(!Cg(e)),Cg(e)||e.A.stop()}function Eg(e,t,n,r){if(!e.da)throw new Tt(2,7,7001);return t=e.h.networkingEngine.request(n,t,r),go(e.da,t),t.promise}function Ig(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function Mg(e,t,n,r,o,i){var a,s,u,l,c,f,p,d,h,m,g,v,y;return O(function(b){switch(b.g){case 1:if("video/mp2t"==n)throw new Tt(2,4,4040);if(en())throw new Tt(2,4,4041);if(a=Tm(t,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(a))return b.return(null);if((s=Rm(r(),Tm(t,"URI"),i))[0].startsWith("data:text/plain;base64,")){u=bn(vn(s[0].split("data:text/plain;base64,").pop())),b.u(2);break}return l=s.sort().join(""),e.pa.has(l)||(c=xo(s,e.g.retryParameters),f=Eg(e,c,6),e.pa.set(l,f)),S(b,e.pa.get(l),3);case 3:p=b.h,u=bn(p.data);case 2:if(d="00000000000000000000000000000000",!o){b.u(4);break}if(e.ya.has(o)){h=e.ya.get(o),b.u(5);break}return m=yu(o.M(),o.Xb(),o.Ub(),e.g.retryParameters),S(b,Eg(e,m,Co,{type:0}),6);case 6:g=b.h,h=function(e){var t=null;return(new No).box("moov",Uo).box("trak",Uo).box("mdia",Uo).box("minf",Uo).box("stbl",Uo).S("stsd",Bo).box("encv",jo).box("enca",Fo).box("sinf",Uo).box("schi",Uo).S("tenc",function(e){(e=e.reader).T(),e.T(),e.T(),e.T(),t=bn(e.qb(16))}).parse(e,!0),t}(g.data),e.ya.set(o,h);case 5:h&&(d=h);case 4:return(v=new Map).set(d,u),y="cenc","SAMPLE-AES"==a&&(y="cbcs"),b.return(Tn(v,y))}})}V("shaka.net.DataUriPlugin",Bm),Bm.parse=jm,yo("data",jm),(o=zm.prototype).configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},o.start=function(e,t){var n,r=this;return O(function(o){return 1==o.g?(r.h=t,r.I=t.isLowLatencyMode(),S(o,Tg(r,[e]),2)):3!=o.g?(n=o.h,r.L=n.uri,S(o,function(e,t,n){var r,o,i,a,s,u,l,p,d,h,m,g,v,y,b,x,w,T,k,A,E,M,R,_,L,D,P,N,U,B,j,F;return O(function(z){switch(z.g){case 1:return r=In,o=Pm(e.Fa,t),i=Am(o.g,"EXT-X-DEFINE"),a=[],s=[],u=[],e.l=new xs(null,0),e.l.sc(!0),l=function(){return[n]},p=null,d=new Map,1==o.type?(e.R=!1,w=Am(o.g,"EXT-X-DEFINE"),d=Wm(e,w,e.L),p=r.ga,T="",k=new Map,S(z,sg(e,e.B++,d,o,l,"",p,T,!0,"Media Playlist",null,k,null,!1,null,!1),7)):(function(e,t){for(var n=new st(e.L).g,r=(t=c(t)).next();!r.done;r=t.next()){var o=r.value;r=Sm(o,"NAME");var i=Sm(o,"VALUE");o=Sm(o,"QUERYPARAM"),r&&i&&(e.s.has(r)||e.s.set(r,i)),o&&(r=n.get(o)[0])&&!e.s.has(r)&&e.s.set(o,r)}}(e,i),h=Am(o.g,"EXT-X-MEDIA"),m=Am(o.g,"EXT-X-STREAM-INF"),g=Am(o.g,"EXT-X-IMAGE-STREAM-INF"),v=Am(o.g,"EXT-X-I-FRAME-STREAM-INF"),y=Am(o.g,"EXT-X-SESSION-KEY"),b=Am(o.g,"EXT-X-SESSION-DATA"),x=Am(o.g,"EXT-X-CONTENT-STEERING"),function(e,t){for(var n=(t=c(t)).next();!n.done;n=t.next()){var r=n.value,o=Sm(r,"DATA-ID");n=Sm(r,"URI");var i=Sm(r,"LANGUAGE");r=Sm(r,"VALUE"),o=(new Map).set("id",o),n&&o.set("uri",Rm([e.L],n,e.s)[0]),i&&o.set("language",i),r&&o.set("value",r),n=new co("sessiondata",o),e.h&&e.h.onEvent(n)}}(e,b),S(z,function(e,t){var n,r,o,i,a,s;return O(function(u){if(!e.h||!e.g)return u.return();for(r=c(t),o=r.next();!o.done;o=r.next())if(i=o.value,a=Sm(i,"PATHWAY-ID"),s=Sm(i,"SERVER-URI"),a&&s){e.j=new sh(e.h),e.j.configure(e.g),e.j.i=[e.L],e.j.setManifestType("HLS"),e.j.h=a,n=uh(e.j,s);break}return S(u,n,0)})}(e,x),4));case 4:return function(e,t){for(var n=(t=c(t)).next();!n.done;n=t.next()){var r=n.value,o=Sm(r,"AUDIO");n=Sm(r,"VIDEO");var i=Sm(r,"SUBTITLES");if(r=Ym(e,r),i){var a=Cn(En,r);e.F.set(i,a),_e(r,a)}o&&((i=Cn("audio",r))||(i=e.g.hls.defaultAudioCodec),e.F.set(o,i)),n&&((o=Cn("video",r))||(o=e.g.hls.defaultVideoCodec),e.F.set(n,o))}}(e,m),function(e,t){t=Em(t,"CLOSED-CAPTIONS"),e.R=0==t.length;for(var n=(t=c(t)).next();!n.done;n=t.next()){var r=n.value,o=Sm(r,"LANGUAGE");n=rr(o||"und"),o||(o=Sm(r,"NAME"))&&(n=o),o=Tm(r,"GROUP-ID"),r=Tm(r,"INSTREAM-ID").replace("SERVICE","svc"),e.C.get(o)||e.C.set(o,new Map),e.C.get(o).set(r,n)}}(e,h),S(z,function(e,t,n,r,o,i){var a,s,u,l,p,d,h,m,g,v,y,b,x,w,T,k,C,A,E,I,M,R,_,L,D,P,N,U,B,j,F,z,G,V,H;return O(function(O){switch(O.g){case 1:if(a=[],s=new Set,!(0<n.length)){O.u(2);break}u=c(n),l=u.next();case 3:if(l.done){O.u(2);break}if(p=l.value,d=Tm(p,"METHOD"),h=Sm(p,"KEYFORMAT")||"identity",m=null,"NONE"==d){O.u(4);break}if(Ig(d)){g=Rm(o(),Tm(p,"URI"),i),v=g.sort().join(""),e.K.has(v)||(y=xo(g,e.g.retryParameters),b=Eg(e,y,6),e.K.set(v,b)),O.u(4);break}if("identity"!=h){m=(x=Dg[h])?x(p,""):null,O.u(6);break}return S(O,Mg(e,p,"",o,null,i),9);case 9:m=O.h;case 6:if(m){if(m.keyIds)for(w=c(m.keyIds),T=w.next();!T.done;T=w.next())k=T.value,s.add(k);a.push(m)}case 4:l=u.next(),O.u(3);break;case 2:for(C={},A=c(t),E=A.next();!E.done;E=A.next())I=E.value,M=xm(I,!e.j),C[M]?C[M].push(I):C[M]=[I];for(_ in R=[],C)L=C[_],D=L[0],P=Sm(D,"FRAME-RATE"),N=Number(Sm(D,"AVERAGE-BANDWIDTH"))||Number(Tm(D,"BANDWIDTH")),U=Sm(D,"RESOLUTION"),B=c(U?U.split("x"):[null,null]),j=B.next().value,F=B.next().value,z=Sm(D,"VIDEO-RANGE"),(G=Sm(D,"REQ-VIDEO-LAYOUT"))&&G.includes(",")&&(V=G.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e}),G=V[0]),G=G||"CH-MONO",H=$m(e,L,r),R.push.apply(R,f(eg(e,H.audio,H.video,N,j,F,P,z,G,a,s)));return O.return(R.filter(function(e){return null!=e}))}})}(e,m,y,h,l,e.s),5);case 5:return a=z.h,s=function(e,t){var n=Em(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return tg(e,[t],new Map).stream}catch(s){if(e.g.hls.ignoreTextStreamFailures)return null;throw s}});for(var r=(n=c(n)).next();!r.done;r=n.next()){var o=Tm(r.value,"GROUP-ID");if((r=e.F.get(o))&&(o=e.G.get(o)))for(var i=(o=c(o)).next();!i.done;i=o.next())(i=i.value).stream.codecs=r,i.stream.mimeType=bg(En,r)||xg(En),Km(i.stream)}return t.filter(function(e){return e})}(e,h),S(z,function(e,t,n){var r,o;return O(function(i){return 1==i.g?(r=t.map(function(t){var n,r;return O(function(o){if(1==o.g)return e.g.disableThumbnails?o.return(null):(C(o,2),S(o,function(e,t){var n,r,o,i,a,s,u,l,c,f;return O(function(p){return 1==p.g?(n=Tm(t,"URI"),r=Sm(t,"CODECS","jpeg")||"",e.i.has(n)?p.return(e.i.get(n)):(o=Sm(t,"LANGUAGE"),i=Sm(t,"NAME"),a=Sm(t,"CHARACTERISTICS"),s=ng(e,e.B++,[n],r,"image",o,!1,i,null,null,a,!1,null,!1),(u=Sm(t,"RESOLUTION"))?S(p,s.stream.createSegmentIndex(),3):p.u(2))):(2!=p.g&&(l=s.stream.segmentIndex.get(0),c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1])),(f=Sm(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(f)),e.i.set(n,s),p.return(s))})}(e,t),4));if(2!=o.g)return n=o.h,o.return(n.stream);if(r=I(o),e.g.hls.ignoreImageStreamFailures)return o.return(null);throw r})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=Tm(t,"URI"),r=Sm(t,"CODECS")||"";if(e.i.has(n))var o=e.i.get(n);else{var i=Sm(t,"LANGUAGE"),a=Sm(t,"NAME"),s=Sm(t,"CHARACTERISTICS"),u=ng(e,e.B++,[n],r,"image",i,!1,a,null,null,s,!1,null,!1),l=Sm(t,"RESOLUTION"),f=c(l?l.split("x"):[null,null]),p=f.next().value,d=f.next().value;u.stream.width=Number(p)||void 0,u.stream.height=Number(d)||void 0;var h=Sm(t,"BANDWIDTH");h&&(u.stream.bandwidth=Number(h)),e.i.set(n,u),o=u}return"mjpg"!==(t=o).stream.codecs?null:t.stream}catch(w){if(e.g.hls.ignoreImageStreamFailures)return null;throw w}})),S(i,Promise.all(r),2)):(o=i.h,i.return(o.filter(function(e){return e})))})}(e,g,v),6);case 6:u=z.h,z.u(3);break;case 7:A=z.h,e.i.set(n,A),A.stream&&(E=du(A.stream),A.stream.segmentIndex.Hb(function(e){e.$&&(e.$.Hc=E)})),p=A.stream.type,a.push({id:0,language:rr(T||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==p?A.stream:null,video:"video"==p?A.stream:null,bandwidth:A.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new Tt(2,7,7001);if(1==o.type&&(Cg(e)&&(dg(e,o),M=e.o,e.A.Y(M)),R=Array.from(e.i.values()),ig(e,R),Xm(e),vg(e,o.g,p,d,l)),e.m={presentationTimeline:e.l,variants:a,textStreams:s,imageStreams:u,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.ea||!e.g.hls.disableCodecGuessing){z.u(8);break}for(_=[],L=c(e.m.variants),D=L.next();!D.done;D=L.next())(P=D.value).audio&&""===P.audio.codecs&&_.push(P.audio.createSegmentIndex()),P.video&&""===P.video.codecs&&_.push(P.video.createSegmentIndex());return S(z,Promise.all(_),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),1==a.length){for(N=[],U=a[0],B=c([U.video,U.audio]),j=B.next();!j.done;j=B.next())(F=j.value)&&!F.segmentIndex&&N.push(F.createSegmentIndex());if(0<N.length)return S(z,Promise.all(N),0)}z.u(0)}})}(r,n.data,e),3)):o.return(r.m)})},o.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.da&&(e.push(this.da.destroy()),this.da=null),this.g=this.h=null,this.ub.clear(),this.m=null,this.i.clear(),this.G.clear(),this.F.clear(),this.s.clear(),this.qa.clear(),this.oa.clear(),this.K.clear(),this.pa.clear(),this.ya.clear(),this.Ea.clear(),this.j&&this.j.destroy(),this.Z&&(this.Z.release(),this.Z=null),Promise.all(e)},o.update=function(){var e,t,n,r,o,i,a,s,u,l,p,d=this;return O(function(h){if(1==h.g){if(!Cg(d))return h.return();for(e=[],t=Array.from(d.i.values()),d.o=1/0,d.m.gapCount=0,n=t.filter(function(e){return e.stream.segmentIndex}),r=c(n),o=r.next();!o.done;o=r.next())i=o.value,e.push(Vm(d,i));return S(h,Promise.all(e),2)}for(og(d,n.map(function(e){return e.stream})),a=n.some(function(e){return 0==e.ed}),n.length&&!a&&(Ag(d,Ug.sh),s=n.map(function(e){return e.Jb}),d.l.Za(Math.min.apply(Math,f(s))),d.h.updateDuration()),a&&Xm(d),u=c(n),l=u.next();!l.done;l=u.next())(p=l.value).stream.segmentIndex&&!p.stream.segmentIndex.O[0]&&d.h.disableStream(p.stream);k(h)})},o.onExpirationUpdated=function(){},o.onInitialVariantChosen=function(){},o.banLocation=function(e){this.j&&this.j.banLocation(e)},o.setMediaElement=function(e){this.ba=e},V("shaka.hls.HlsParser",zm);var Rg={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},_g={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Lg=new Set(["video/mp2t"].concat(f(Hn))),Dg={"com.apple.streamingkeydelivery":function(e,t){if("video/mp2t"==t)throw new Tt(2,4,4040);if(en())throw new Tt(2,4,4041);if(t=Tm(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return"SAMPLE-AES"==t&&(n="cbcs"),Sn("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Tm(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Tm(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return"SAMPLE-AES"==t&&(n="cbcs"),n=Sn("com.widevine.alpha",n,[{initDataType:"cenc",initData:t=be((t=Fm((t=Tm(e,"URI")).split("?")[0])).data)}]),(e=Sm(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Tm(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return"SAMPLE-AES"==t&&(n="cbcs"),Sn("com.microsoft.playready",n,[{initDataType:"cenc",initData:e=Ko(e=be((e=Fm((e=Tm(e,"URI")).split("?")[0])).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}])}},Pg="VOD",Og="EVENT",Ng="LIVE",Ug={sh:Pg,qj:Og,yj:Ng};function Bg(e){if(e=jg(e))e:{for(var t=(e=c(ri(e,"DATA"))).next();!t.done;t=e.next())if(t=oi(t.value,"LA_URL")){e=ti(t);break e}e=""}else e="";return e}function jg(e){return(e=function(e){var t=0,n=we(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var o=n.getUint16(e,!0);if(e+=2,1&o||o+e>n.byteLength){n=[];break e}var i=be(n,e,o);t.push({type:r,value:i}),e+=o}n=t}return n}(e=vn(ti(e))).filter(function(e){return e.type===Fg})[0])&&(e=Yo(e=sn(e.value,!0),"WRMHEADER"))?e:null}ea["application/x-mpegurl"]=function(){return new zm},ea["application/vnd.apple.mpegurl"]=function(){return new zm};var Fg=1,zg=(new Map).set("com.microsoft.playready",Bg).set("com.microsoft.playready.recommendation",Bg).set("com.microsoft.playready.software",Bg).set("com.microsoft.playready.hardware",Bg);function Gg(e){if(!Zg){Zg=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);fv=Jg("ftyp",t,r,t,n),t=Jg("dref",pv),dv=Jg("dinf",t)}this.g=e}function Vg(e){for(var t=[],n=c(e.g),r=n.next();!r.done;r=n.next()){var o=t,i=o.push,a=r.value;r=Jg;var s=a.id+1,u=a.stream.width||0,l=a.stream.height||0;"audio"==a.type&&(l=u=0);var p=a.duration*a.timescale,d=Math.floor(p/(ev+1));switch(p=Math.floor(p%(ev+1)),s=Jg("tkhd",s=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(f(Yg(s,4)),[0,0,0,0],f(Yg(d,4)),f(Yg(p,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],f(Yg(u,2)),[0,0],f(Yg(l,2)),[0,0]))),u=Jg,d=a.duration*a.timescale,l=Math.floor(d/(ev+1)),d=Math.floor(d%(ev+1)),p=(p=a.stream.language).charCodeAt(0)-96<<10|p.charCodeAt(1)-96<<5|p.charCodeAt(2)-96,l=Jg("mdhd",l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(f(Yg(a.timescale,4)),f(Yg(l,4)),f(Yg(d,4)),f(Yg(p,2)),[0,0]))),d=a,p=new Uint8Array([]),d.type){case"video":p=nv;break;case"audio":p=rv}d=Jg("hdlr",p);e:{switch(a.type){case"video":a=Jg("minf",Jg("vmhd",uv),dv,Hg(a));break e;case"audio":a=Jg("minf",Jg("smhd",lv),dv,Hg(a));break e}a=new Uint8Array([])}r=r("trak",s,a=u("mdia",l,d,a)),i.call(o,r)}for(t=xn.apply(hn,f(t)),n=Jg,r=(i=e.g[0]).duration*i.timescale,o=Math.floor(r/(ev+1)),r=Math.floor(r%(ev+1)),o=Jg("mvhd",o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(f(Yg(i.timescale,4)),f(Yg(o,4)),f(Yg(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),r=[],u=(e=c(e.g)).next();!u.done;u=e.next())s=(a=r).push,u=Jg("trex",u=new Uint8Array([0,0,0,0].concat(f(Yg(u.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))),s.call(a,u);if(e=Jg("mvex",e=xn.apply(hn,f(r))),r=[],i.encrypted){for(a=(i=c(i.stream.drmInfos)).next();!a.done;a=i.next())if((a=a.value).initData)for(s=(a=c(a.initData)).next();!s.done;s=a.next())r.push(s.value.initData);i=xn.apply(hn,f(r))}else i=new Uint8Array([]);return e=n("moov",o,t,e,i),(t=new Uint8Array(fv.byteLength+e.byteLength)).set(fv),t.set(e,fv.byteLength),t}function Hg(e){var t=Jg,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.wa.byteLength)var o=Jg("avcC",e.wa);else{o=Jg;for(var i=7,a=[],s=[],u=0,l=0,c=0,p=0;p<e.$a.length;p++){var d=Qg(e.$a[p]);switch(31&d[0]){case 7:a.push(d),i+=d.length+2;break;case 8:s.push(d),i+=d.length+2}}for(0<a.length&&(u=a[0][1],c=a[0][2],l=a[0][3]),p=0,(i=new Uint8Array(i))[p++]=1,i[p++]=u,i[p++]=c,i[p++]=l,i[p++]=255,i[p++]=224|a.length,u=0;u<a.length;u++)i[p++]=(65280&a[u].length)>>8,i[p++]=255&a[u].length,i.set(a[u],p),p+=a[u].length;for(i[p++]=s.length,a=0;a<s.length;a++)i[p++]=(65280&s[a].length)>>8,i[p++]=255&s[a].length,i.set(s[a],p),p+=s[a].length;o=o("avcC",i)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(f(Yg(n,2)),f(Yg(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",s=qg(e),a=new Uint8Array([]),e.encrypted&&(a=Wg(e),r="encv"),n=Jg(r,n,o,s,a)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,o=e.stream.height||0,n=new Uint8Array([]),0<e.wa.byteLength&&(n=Jg("hvcC",e.wa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(f(Yg(r,2)),f(Yg(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="hvc1",s=qg(e),a=new Uint8Array([]),e.encrypted&&(a=Wg(e),o="encv"),n=Jg(o,r,n,s,a));break;case"audio":e.codecs.includes("mp3")?e=Jg(".mp3",Xg(e)):e.codecs.includes("ac-3")?(n=Jg("dac3",e.ma),r="ac-3",o=new Uint8Array([]),e.encrypted&&(o=Wg(e),r="enca"),e=Jg(r,Xg(e),n,o)):e.codecs.includes("ec-3")?(n=Jg("dec3",e.ma),r="ec-3",o=new Uint8Array([]),e.encrypted&&(o=Wg(e),r="enca"),e=Jg(r,Xg(e),n,o)):e.codecs.includes("opus")?(n=Jg("dOps",e.ma),r="Opus",o=new Uint8Array([]),e.encrypted&&(o=Wg(e),r="enca"),e=Jg(r,Xg(e),n,o)):(0<e.ma.byteLength?n=Jg("esds",e.ma):(n=Jg,r=e.id+1,o=e.stream.channelsCount||2,a=e.stream.audioSamplingRate||44100,u=kn("audio",e.codecs.split(",")),s=(l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[a],"mp4a.40.5"!==u&&"mp4a.40.29"!==u||(s=l[2*a]),a=parseInt(u.split(".").pop(),10),n=n("esds",r=new Uint8Array([0,0,0,0,3,25].concat(f(Yg(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,a<<3|s>>>1,s<<7|o<<3,6,1,2])))),r="mp4a",o=new Uint8Array([]),e.encrypted&&(o=Wg(e),r="enca"),e=Jg(r,Xg(e),n,o)),n=e}return t("stbl",e=Jg("stsd",cv,n),Jg("stts",ov),Jg("stsc",iv),Jg("stsz",sv),Jg("stco",av))}function qg(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return Jg("pasp",e=new Uint8Array([].concat(f(Yg(e.Ba,4)),f(Yg(t,4)))))}function Xg(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(f(Yg(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Wg(e){for(var t=Jg,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,o=0;o<n.length;o+=1)r|=n.charCodeAt(o)<<8*(n.length-o-1);n=Jg("frma",n=new Uint8Array([].concat(f(Yg(r,4))))),r=Jg("schm",r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0])),o=Jg;for(var i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),a=(e=c(e.stream.drmInfos)).next();!a.done;a=e.next())if((a=a.value)&&a.keyIds&&a.keyIds.size)for(var s=(a=c(a.keyIds)).next();!s.done;s=a.next())i=Qg(s.value);return t("sinf",n,r,o("schi",i=Jg("tenc",e=new Uint8Array([0,0,0,0,0,0,1,8]),i)))}function Kg(e){for(var t=[],n=(e=c(e.g)).next();!n.done;n=e.next()){n=n.value;var r,o=t.push,i=o.apply,a=Jg,s=new Uint8Array([0,0,0,0].concat(f(Yg(n.data?n.data.rb:0,4))));s=Jg("mfhd",s);var u=n.data?n.data.Ya:[],l=new Uint8Array(4+u.length);for(r=0;r<u.length;r++){var p=u[r].flags;l[r+4]=p.Va<<4|p.Xa<<2|p.Wa}var d=(u=Jg("sdtp",l)).length+92;l=Jg,r=Jg("tfhd",r=new Uint8Array([0,0,0,58].concat(f(Yg(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),p=n.data?n.data.baseMediaDecodeTime:0;var h=Math.floor(p%(ev+1));p=Jg("tfdt",p=new Uint8Array([1,0,0,0].concat(f(Yg(Math.floor(p/(ev+1)),4)),f(Yg(h,4)))));var m=d,g=12+16*(h=(d=n.data?n.data.Ya:[]).length),v=new Uint8Array(g);for(m+=8+g,v.set(["video"===n.type?1:0,0,15,1].concat(f(Yg(h,4)),f(Yg(m,4))),0),m=0;m<h;m++){var y=d[m];g=Yg(y.duration,4);var b=Yg(y.size,4),x=y.flags;y=Yg(y.cb,4),v.set([].concat(f(g),f(b),[x.gb<<2|x.Va,x.Xa<<6|x.Wa<<4|x.hb,61440&x.Ua,15&x.Ua],f(y)),12+16*m)}a=a("moof",s,u=l("traf",r,p,d=Jg("trun",v),u)),i.call(o,t,[a,$g(n)])}return xn.apply(hn,f(t))}function $g(e){return e=(e.data?e.data.Ya:[]).map(function(e){return e.data}),Jg("mdat",e=xn.apply(hn,f(e)))}function Yg(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function Qg(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Jg(e){var t=N.apply(1,arguments),n=tv[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],tv[e]=n);for(var r=8,o=t.length-1;0<=o;o--)r+=t[o].byteLength;for((o=new Uint8Array(r))[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=255&r,o.set(n,4),n=0,r=8;n<t.length;n++)o.set(t[n],r),r+=t[n].byteLength;return o}var Zg=!1,ev=Math.pow(2,32)-1,tv={},nv=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),rv=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ov=new Uint8Array([0,0,0,0,0,0,0,0]),iv=new Uint8Array([0,0,0,0,0,0,0,0]),av=new Uint8Array([0,0,0,0,0,0,0,0]),sv=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),uv=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),lv=new Uint8Array([0,0,0,0,0,0,0,0]),cv=new Uint8Array([0,0,0,0,0,0,0,1]),fv=new Uint8Array([]),pv=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),dv=new Uint8Array([]);function hv(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new X(5),this.o=new _t(function(){!function(e){var t;O(function(n){switch(n.g){case 1:return C(n,2),S(n,mv(e),4);case 4:E(n,3);break;case 2:t=I(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();k(n)}})}(e)}),this.A=new mo,this.m=new Map}function mv(e){var t,n,r,o,i,a,s;return O(function(u){if(1==u.g)return t=xo(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),o=n.request(0,t,{type:5}),go(e.A,o),S(u,o.promise,2);if(i=u.h,!e.h)return u.return();i.uri&&!e.l.includes(i.uri)&&e.l.unshift(i.uri);var l=i.uri,p=i.data,d=e.g.mss.manifestPreprocessor;if(d!=Qu){if(le("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),!(p=Wh(p,"SmoothStreamingMedia")))throw new Tt(2,4,4046,l);d(p),p=ln(p.outerHTML)}var h=$o(p,"SmoothStreamingMedia");if(!h)throw new Tt(2,4,4046,l);if((l=e.g.mss.manifestPreprocessorTXml)!=Ju&&l(h),e.i||(e.i=new xs(null,0)),l=ai(h,"IsLive",vi,!1))throw new Tt(2,4,4047);e.i.sc(!l),d=ai(h,"TimeScale",mi,1e7),p=ai(h,"DVRWindowLength",mi),l&&(0===p||isNaN(p))&&(p=1/0);var m,g=ai(h,"CanSeek",vi,!1);for(0===p&&g&&(p=1/0),g=null,p&&0<p&&(g=p/d),l&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride),null==g&&(g=1/0),e.i.pe(g),p=ai(h,"Duration",mi,1/0),l||e.i.Za(p/d),l={variants:[],textStreams:[],timescale:d,duration:p/d},g=ei(h,"Protection"),d=e.g.mss.keySystemsBySystemId,p=[],m=(g=c(g)).next();!m.done;m=g.next())p=p.concat(ei(m.value,"ProtectionHeader"));if(p.length){for(g=[],m=0;m<p.length;m++){var v=p[m],y=v.attributes.SystemID.toLowerCase(),b=d[y];if(b){var x=jg(v);if(x)e:{for(var w=(x=c(ri(x,"DATA"))).next();!w.done;w=x.next())if(w=oi(w.value,"KID")){x=vn(ti(w)),x=bn(x=new Uint8Array([x[3],x[2],x[1],x[0],x[5],x[4],x[7],x[6]].concat(f(x.slice(8)))));break e}x=null}else x=null;y=Sn(b,"cenc",y=[{initData:Ko(w=vn(ti(v)),y=yn(y.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:x}]),x&&y.keyIds.add(x),(b=zg.get(b))&&(y.licenseServerUri=b(v)),g.push(y)}}d=g}else d=[];for(m=d,g=[],d=[],p=[],v=(h=c(h=ei(h,"StreamIndex"))).next();!v.done;v=h.next()){b=ei(v=v.value,"QualityLevel"),y=l.timescale,x=l.duration,w=ei(v,"c");for(var T=[],C=0,A=0;A<w.length;++A){var E=w[A],I=w[A+1],M=ai(E,"t",mi),R=ai(E,"d",mi);if(E=ai(E,"r",di),!R)break;if(M=null!=M?M:C,0>(E=E||0))if(I){if(null==(I=ai(I,"t",mi)))break;if(M>=I)break;E=Math.ceil((I-M)/R)-1}else{if(1/0==x)break;if(M/y>=x)break;E=Math.ceil((x*y-M)/R)-1}for(I=0;I<=E;++I)C=M+R,T.push({start:M/y,end:C/y,$f:M}),M=C}for(y=T,x=(b=c(b)).next();!x.done;x=b.next())(x=gv(e,v,x.value,y,m,l))&&("audio"!=x.type||e.g.disableAudio?"video"!=x.type||e.g.disableVideo?x.type!=En||e.g.disableText||p.push(x):d.push(x):g.push(x))}for(h=[],m=(g=c(0<g.length?g:[null])).next();!m.done;m=g.next())for(m=m.value,T=(v=c(0<d.length?d:[null])).next();!T.done;T=v.next())y=(b=h).push,x=e,w=m,T=T.value,A=0,w&&w.bandwidth&&0<w.bandwidth&&(A+=w.bandwidth),T&&T.bandwidth&&0<T.bandwidth&&(A+=T.bandwidth),x={id:x.s++,language:w?w.language:"und",disabledUntilTime:0,primary:!!w&&w.primary||!!T&&T.primary,audio:w,video:T,bandwidth:A,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},y.call(b,x);l.variants=h,l.textStreams=p,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.Wd()),Promise.resolve(),a=Date.now(),s=(a-r)/1e3,e.B.sample(1,s),k(u)})}function gv(e,t,n,r,o,i){var a=t.attributes.Type;if("audio"!==a&&"video"!==a&&"text"!==a)return Q("Ignoring unrecognized type:",a),null;var s=t.attributes.Language,u=e.s++,l=ai(n,"Bitrate",hi),f=ai(n,"MaxWidth",hi),p=ai(n,"MaxHeight",hi),d=ai(n,"Channels",hi),h=ai(n,"SamplingRate",hi),m=i.duration;r.length&&(m=r[r.length-1].end-r[0].start);var g=e.i.getDuration();e.i.Za(Math.min(m,g));var v={id:u,originalId:t.attributes.Name||String(u),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:f||void 0,height:p||void 0,kind:"",encrypted:0<o.length,drmInfos:o,keyIds:new Set,language:rr(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:d,audioSamplingRate:h,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:i.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((o=t.attributes.Subtype)&&((o=yv[o])&&v.roles.push(o),"main"===o&&(v.primary=!0)),null!==(o=n.attributes.FourCC)&&""!==o||(o=t.attributes.FourCC),!o)if("audio"===a)o="AAC";else if("video"===a)return Q('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!vv.includes(o.toUpperCase()))return Q("Codec not supported:",o),null;switch(n=function(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=o[e],"AACH"===n?(n=new Uint8Array(4),e=o[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,(t=new Uint16Array(2))[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):((n=new Uint8Array(2))[0]=16|r>>1,n[1]=r<<7|t<<3,(t=new Uint16Array(1))[0]=(n[0]<<8)+n[1],t[0].toString(16))}(n,a,o,v),v.mssPrivateData.codecPrivateData=n,a){case"audio":if(!n)return Q("Quality unsupported without CodecPrivateData",a),null;v.type="audio",v.mimeType="mss/audio/mp4",v.codecs=function(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}(o,n);break;case"video":if(!n)return Q("Quality unsupported without CodecPrivateData",a),null;v.type="video",v.mimeType="mss/video/mp4",v.codecs=function(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}(n);break;case"text":v.type=En,v.mimeType="application/mp4",("TTML"===o||"DFXP"===o)&&(v.codecs="stpp")}return v.fullMimeTypes.add(Ln(v.mimeType,v.codecs)),v.createSegmentIndex=function(){if(v.segmentIndex)return Promise.resolve();if(e.m.has(v.id))var n=e.m.get(v.id);else n=[],"video"==v.type&&(n=v.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n=Vg(new Gg([n={id:v.id,type:v.type,codecs:v.codecs,encrypted:v.encrypted,timescale:v.mssPrivateData.timescale,duration:v.mssPrivateData.duration,$a:n,ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:v}])),e.m.set(v.id,n);return n=function(e,t,n,r,o){var i=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];for(var a=(o=c(o)).next(),s={};!a.done;s={re:void 0},a=o.next())s.re=a.value,r.push(new aa(s.re.start,s.re.end,function(t){return function(){return wn(e.l,[i.replace("{start time}",String(t.re.$f))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return r}(e,new oa(function(){return[]},0,null,du(v),v.mssPrivateData.timescale,n),v,t,r),v.segmentIndex=new Fs(n),Promise.resolve()},v.closeSegmentIndex=function(){v.segmentIndex&&(v.segmentIndex.release(),v.segmentIndex=null)},v}(o=hv.prototype).configure=function(e){this.g=e},o.start=function(e,t){var n=this;return O(function(r){if(1==r.g)return n.l=[e],n.h=t,S(r,mv(n),2);if(!n.h)throw new Tt(2,7,7001);return r.return(n.j)})},o.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},o.update=function(){var e,t=this;return O(function(n){return 1==n.g?(C(n,2),S(n,mv(t),4)):2!=n.g?E(n,0):(e=I(n),t.h&&e?(t.h.onError(e),void k(n)):n.return())})},o.onExpirationUpdated=function(){},o.onInitialVariantChosen=function(){},o.banLocation=function(){},o.setMediaElement=function(){},V("shaka.mss.MssParser",hv);var vv="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),yv={CAPT:"main",SUBT:"alternate",DESC:"main"};function bv(e,t,n,r,o,i){if(200<=n&&299>=n&&202!=n)return{uri:o||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var a=null;try{a=un(t)}catch(s){}throw new Tt(401==n||403==n?2:1,1,1001,r,n,a,e,i,o||r)}function xv(){}function wv(e,t,n,r,o){var i=new Ev;_o(t.headers).forEach(function(e,t){i.append(t,e)});var a=new Cv,s={lg:!1,mh:!1};if(e=function(e,t,n,r,o,i,a){var s,u,l,c,f,p,d,h,m,g,v,y,b;return O(function(x){switch(x.g){case 1:return s=kv,u=Av,p=f=0,d=Date.now(),C(x,2),S(x,s(e,n),4);case 4:if(l=x.h,i(Sv(l.headers)),"HEAD"==n.method){x.u(5);break}return h=l.clone().body.getReader(),g=(m=l.headers.get("Content-Length"))?parseInt(m,10):0,v=function(e){function t(){var n,r,i;return O(function(s){switch(s.g){case 1:return C(s,2),S(s,h.read(),4);case 4:n=s.h,E(s,3);break;case 2:return I(s),s.return();case 3:if(n.done){s.u(5);break}if(f+=n.value.byteLength,!a){s.u(5);break}return S(s,a(n.value),5);case 5:(100<(r=Date.now())-d||n.done)&&(i=n.done?0:g-f,o(r-d,f-p,i),p=f,d=r),n.done?e.close():(e.enqueue(n.value),t()),k(s)}})}t()},new u({start:v}),S(x,l.arrayBuffer(),6);case 6:c=x.h;case 5:E(x,3);break;case 2:if(y=I(x),r.lg)throw new Tt(1,1,7001,e,t);if(r.mh)throw new Tt(1,1,1003,e,t);throw new Tt(1,1,1002,e,y,t);case 3:return b=Sv(l.headers),x.return(bv(b,c,l.status,e,l.url,t))}})}(e,n,{body:t.body||void 0,headers:i,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,r,o,t.streamDataCallback),e=new oo(e,function(){return s.lg=!0,a.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var u=new _t(function(){s.mh=!0,a.abort()});u.Y(t/1e3),e.finally(function(){u.stop()})}return e}function Sv(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}function Tv(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(gS){return!1}return!!e.Response&&!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController)}ea["application/vnd.ms-sstr+xml"]=function(){return new hv},V("shaka.net.HttpFetchPlugin",xv),xv.isSupported=Tv,xv.parse=wv;var kv=e.fetch,Cv=e.AbortController,Av=e.ReadableStream,Ev=e.Headers;function Iv(){}function Mv(e,t,n,r,o){var i=new _v,a=Date.now(),s=0,u=new Promise(function(u,l){i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){l(new Tt(1,1,7001,e,n))};var c=!1;for(var f in i.onreadystatechange=function(){if(2==i.readyState&&!c){var e=Rv(i);o(e),c=!0}},i.onload=function(t){var o=Rv(i),c=i.response;try{r(Date.now()-a,t.loaded-s,0);var f=bv(o,c,i.status,e,i.responseURL,n);u(f)}catch(sa){l(sa)}},i.onerror=function(t){l(new Tt(1,1,1002,e,t,n))},i.ontimeout=function(){l(new Tt(1,1,1003,e,n))},i.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(r(t-a,e.loaded-s,4==i.readyState?0:e.total-e.loaded),s=e.loaded,a=t)},t.headers)i.setRequestHeader(f.toLowerCase(),t.headers[f]);i.send(t.body)});return new oo(u,function(){return i.abort(),Promise.resolve()})}function Rv(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=c(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Tv()&&(yo("http",wv,2,!0),yo("https",wv,2,!0),yo("blob",wv,2,!0)),V("shaka.net.HttpXHRPlugin",Iv),Iv.parse=Mv;var _v=e.XMLHttpRequest;function Lv(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function Dv(e){return e.M().map(function(e){return"{"+encodeURI(e)+"}"}).join("")+":"+e.Ha+":"+e.sa}function Pv(e,t){return yu(e.g.M(),e.g.Ha,e.g.sa,t.streaming.retryParameters)}function Ov(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Nv(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Uv(e){var t=this;this.o=e,this.j=new Map,this.i=new Io(function(){return Bv(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Ov}function Bv(e){var t=e.h.map(function(e){return e()});return e.h=[],Promise.all(t)}function jv(e,t,n,r,o,i){Mo(e.i);var a=(e.j.get(t)||Promise.resolve()).then(function(){var t,a,s,u,l,c,f;return O(function(p){if(1==p.g)return S(p,function(e,t){var n,r,o,i;return O(function(a){return 1==a.g?(n=Co,r=e.o.request(n,t),o=function(){return r.abort()},e.h.push(o),S(a,r.promise,2)):(i=a.h,_e(e.h,o),a.return(i.data))})}(e,n),2);if(t=p.h,e.i.g)throw new Tt(2,9,7001);if(o)for(u in a=be(t),(s=new Wo(a)).data)l=Number(u),c=s.data[l],f=s.g[l],e.l(c,f);e.g.close(r,t.byteLength);var d=e.g;return e.m(0==d.i?0:d.j/d.i,e.g.h),p.return(i(t))})});e.j.set(t,a)}function Fv(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new ro,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function zv(e,t){return new Promise(function(n,r){var o=e.h.openCursor();o.onerror=r,o.onsuccess=function(){var e;return O(function(r){if(1==r.g)return null==o.result?(n(),r.return()):(e=o.result,S(r,t(e.key,e.value,e),2));e.continue(),k(r)})}})}function Gv(e){this.h=e,this.g=[]}function Vv(e,t){return Hv(e,t,"readwrite")}function Hv(e,t,n){var r=new Fv(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then(function(){_e(e.g,r)},function(){_e(e.g,r)}),r}function qv(e,t,n){this.h=new Gv(e),this.i=t,this.g=n}function Xv(e){return Promise.reject(new Tt(2,9,9011,"Cannot add new value to "+e))}function Wv(e,t,n,r){t=(e=Vv(e.h,t)).store();for(var o=(n=c(n)).next(),i={};!o.done;i={rf:void 0},o=n.next())i.rf=o.value,t.delete(i.rf).onsuccess=function(e){return function(){return r(e.rf)}}(i);return e.promise()}function Kv(e,t,n){var r,o,i,a,s,u,l;return O(function(f){if(1==f.g){for(r=Hv(e.h,t,"readonly"),o=r.store(),i={},a=[],s=c(n),u=s.next(),l={};!u.done;l={le:void 0,Sd:void 0},u=s.next())l.Sd=u.value,l.le=o.get(l.Sd),l.le.onsuccess=function(e){return function(){null==e.le.result&&a.push(e.Sd),i[e.Sd]=e.le.result}}(l);return S(f,r.promise(),2)}if(a.length)throw new Tt(2,9,9012,"Could not find values for "+a);return f.return(n.map(function(e){return i[e]}))})}function $v(e){this.g=new Gv(e)}function Yv(){this.g=new Map}function Qv(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){e.hasFixedKeySpace()||t||(t={path:{nb:n,Ja:r},Ja:e})})}),t)return t;throw new Tt(2,9,9013,"Could not find a cell that supports add-operations")}function Jv(e,t,n){if(!(e=e.g.get(t)))throw new Tt(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Tt(2,9,9013,"Could not find cell with name "+n);return t}function Zv(e,t){ey.set(e,t)}yo("http",Mv,1,!0),yo("https",Mv,1,!0),yo("blob",Mv,1,!0),Ov.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Uv.prototype.destroy=function(){return this.i.destroy()},Fv.prototype.abort=function(){var e=this;return O(function(t){if(1==t.g){try{e.i.abort()}catch(n){}return C(t,2),S(t,e.g,4)}if(2!=t.g)return E(t,0);I(t),k(t)})},Fv.prototype.store=function(){return this.h},Fv.prototype.promise=function(){return this.g},Gv.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(o=qv.prototype).destroy=function(){return this.h.destroy()},o.hasFixedKeySpace=function(){return!0},o.addSegments=function(){return Xv(this.i)},o.removeSegments=function(e,t){return Wv(this,this.i,e,t)},o.getSegments=function(e){var t,n=this;return O(function(r){return 1==r.g?S(r,Kv(n,n.i,e),2):(t=r.h,r.return(t.map(function(e){return n.og(e)})))})},o.addManifests=function(){return Xv(this.g)},o.updateManifest=function(){return Promise.reject(new Tt(2,9,9016,"Cannot modify values in "+this.g))},o.updateManifestExpiration=function(e,t){var n=Vv(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},o.removeManifests=function(e,t){return Wv(this,this.g,e,t)},o.getManifests=function(e){var t,n=this;return O(function(r){return 1==r.g?S(r,Kv(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map(function(e){return n.Wc(e)}))))})},o.getAllManifests=function(){var e,t,n=this;return O(function(r){return 1==r.g?(e=Hv(n.h,n.g,"readonly"),t=new Map,S(r,zv(e,function(e,r){var o;return O(function(i){if(1==i.g)return S(i,n.Wc(r),2);o=i.h,t.set(e,o),k(i)})}),2)):3!=r.g?S(r,e.promise(),3):r.return(t)})},o.og=function(e){return e},o.Wc=function(e){return Promise.resolve(e)},o.add=function(e,t){var n,r,o,i,a,s,u,l=this;return O(function(f){if(1==f.g){for(n=Vv(l.h,e),r=n.store(),o=[],i=c(t),a=i.next(),s={};!a.done;s={Hf:void 0},a=i.next())u=a.value,s.Hf=r.add(u),s.Hf.onsuccess=function(e){return function(){o.push(e.Hf.result)}}(s);return S(f,n.promise(),2)}return f.return(o)})},$v.prototype.destroy=function(){return this.g.destroy()},$v.prototype.getAll=function(){var e,t,n=this;return O(function(r){return 1==r.g?(e=Hv(n.g,"session-ids","readonly"),t=[],S(r,zv(e,function(e,n){t.push(n)}),2)):3!=r.g?S(r,e.promise(),3):r.return(t)})},$v.prototype.add=function(e){for(var t=Vv(this.g,"session-ids"),n=t.store(),r=(e=c(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},$v.prototype.remove=function(e){var t,n=this;return O(function(r){return 1==r.g?S(r,zv(t=Vv(n.g,"session-ids"),function(t,n,r){e.includes(n.sessionId)&&r.delete()}),2):S(r,t.promise(),0)})},Yv.prototype.destroy=function(){for(var e=[],t=c(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Yv.prototype.init=function(){var e=this;ey.forEach(function(t,n){(t=t())&&e.g.set(n,t)});for(var t=[],n=c(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},V("shaka.offline.StorageMuxer",Yv),Yv.unregister=function(e){ey.delete(e)},Yv.register=Zv,Yv.prototype.destroy=Yv.prototype.destroy;var ey=new Map;function ty(){qv.apply(this,arguments)}function ny(e,t){!function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=c(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(r=(n=c(e)).next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var o=c(e),i=o.next();!i.done;i=o.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(o=c(t)).next();!i.done;i=o.next())i.value.variantIds.push(r);if(e.length&&t.length)for(r=(t=c(t)).next();!r.done;r=t.next())for(r=r.value,i=(o=c(e)).next();!i.done;i=o.next()){i=i.value;var a=n++;r.variantIds.push(a),i.variantIds.push(a)}}}(e);for(var n=c(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(n){return function(e,t,n){var r=e.initSegmentUri?ry(e.initSegmentUri):null,o=t+e.presentationTimeOffset,i=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=ry(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:i,timestampOffset:o,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}(n,e.startTime,t)})}function ry(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Tt(2,9,9004,"Could not parse uri "+e)}function oy(){qv.apply(this,arguments)}function iy(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function ay(){qv.apply(this,arguments)}function sy(){this.m=this.j=this.i=this.h=this.g=this.l=null}function uy(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function ly(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new uy(t,n,r,Number(e[4])):null}function cy(e,t){this.h=e,this.g=t}function fy(e,t){var n=new xs(null,0);n.Za(t.duration);var r=t.streams.filter(function(e){return"audio"==e.type}),o=t.streams.filter(function(e){return"video"==e.type});r=function(e,t,n,r){for(var o=new Set,i=c(t),a=i.next();!a.done;a=i.next())for(var s=(a=c(a.value.variantIds)).next();!s.done;s=a.next())o.add(s.value);for(i=c(n),a=i.next();!a.done;a=i.next())for(a=c(a.value.variantIds),s=a.next();!s.done;s=a.next())o.add(s.value);for(i=new Map,o=c(o),a=o.next();!a.done;a=o.next())a=a.value,i.set(a,{id:a,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=c(t),o=t.next();!o.done;o=t.next())for(a=o.value,o=py(e,a,r),a=c(a.variantIds),s=a.next();!s.done;s=a.next())(s=i.get(s.value)).language=o.language,s.primary=s.primary||o.primary,s.audio=o;for(n=c(n),t=n.next();!t.done;t=n.next())for(o=t.value,t=py(e,o,r),o=c(o.variantIds),a=o.next();!a.done;a=o.next())(a=i.get(a.value)).primary=a.primary||t.primary,a.video=t;return i}(e,r,o,n),o=t.streams.filter(function(e){return e.type==En}).map(function(t){return py(e,t,n)});var i=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return py(e,t,n)}),a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=c(r.values()),u=s.next();!u.done;u=s.next())(u=u.value).audio&&u.audio.encrypted&&(u.audio.drmInfos=a),u.video&&u.video.encrypted&&(u.video.drmInfos=a);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:o,imageStreams:i,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function py(e,t,n){var r=t.segments.map(function(n){return function(e,t,n){var r=new uy("segment",e.h,e.g,t.dataKey);return e=new aa(t.startTime,t.endTime,function(){return[r.toString()]},0,null,null!=t.initSegmentKey?function(e,t){var n=new uy("segment",e.h,e.g,t);return new oa(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}(e,n,t)});return n.sd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Fs(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Ln(t.mimeType,t.codecs)])}}function dy(){this.g=null}function hy(){}function my(e){var t=ly(e);return e=t&&"manifest"==t.g?so(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):t&&"segment"==t.g?function(e,t){var n=new Yv;return so(void 0).Aa(function(){return n.init()}).Aa(function(){return Jv(n,t.nb(),t.Ja())}).Aa(function(e){return e.getSegments([t.key()])}).Aa(function(e){return{uri:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})}(t.key(),t):io(new Tt(2,1,9004,e))}function gy(e,t,n){var r,o,i,a,s,u;return O(function(l){switch(l.g){case 1:r=[];for(var f=[],p=c(n),d=p.next();!d.done;d=p.next()){d=d.value;for(var h=!1,m=c(f),g=m.next();!g.done;g=m.next())if(vy((g=g.value).info,d)){g.sessionIds.push(d.sessionId),h=!0;break}h||f.push({info:d,sessionIds:[d.sessionId]})}o=c(f),i=o.next();case 2:if(i.done){l.u(4);break}return a=i.value,s=function(e,t,n){var r,o;return O(function(i){switch(i.g){case 1:return r=new Ci({Lb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),C(i,2),r.configure(e),S(i,function(e,t,n,r,o,i){var a=new Map;return(o={audioCapabilities:o,videoCapabilities:i,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],a.set(t,o),Li(e,a,[])}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:E(i,3);break;case 2:return I(i),S(i,r.destroy(),5);case 5:return i.return([]);case 3:return o=[],S(i,Promise.all(n.sessionIds.map(function(e){return O(function(t){return 1==t.g?(C(t,2),S(t,function(e,t){var n,r,o;return O(function(i){return 1==i.g?S(i,Oi(e,t,{initData:null,initDataType:null}),2):3!=i.g?(n=i.h)?(r=[],(o=e.i.get(n))&&(o.kb=new ro,r.push(o.kb)),r.push(n.remove()),S(i,Promise.all(r),3)):i.return():(e.i.delete(n),void k(i))})}(r,e),4)):2!=t.g?(o.push(e),E(t,0)):(I(t),void k(t))})})),6);case 6:return S(i,r.destroy(),7);case 7:return i.return(o)}})}(e,t,a),S(l,s,5);case 5:u=l.h,r=r.concat(u),i=o.next(),l.u(2);break;case 4:return l.return(r)}})}function vy(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Le(e.audioCapabilities,t.audioCapabilities,n)&&Le(e.videoCapabilities,t.videoCapabilities,n)}function yy(e,t){var n=fy(new cy(e.nb(),e.Ja()),t),r=t.appMetadata||{};return n=by(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function by(e){for(var t=[],n=Lr(e.variants),r=(n=c(n)).next();!r.done;r=n.next())t.push(kr(r.value));for(n=(e=c(e.textStreams)).next();!n.done;n=e.next())t.push(Cr(n.value));return t}function xy(){this.g={}}function wy(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var o=n.bandwidth||393216,i=r.bandwidth||t.bandwidth-o;0>=i&&(i=t.bandwidth),e.g[n.id]=o,e.g[r.id]=i}}function Sy(e,t){e.g[t.id]=t.bandwidth||2048}function Ty(e,t){return null==(e=e.g[t])&&(e=0),e}function ky(e){var t=this;if(e&&e.constructor!=Yl)throw new Tt(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=$u(),this.g=new vo),this.i=[],this.j=[];var n=!e;this.l=new Io(function(){var e,r,o,i,a;return O(function(s){switch(s.g){case 1:return S(s,Promise.all(t.j.map(function(e){return Bv(e)})),2);case 2:for(e=function(){},r=[],o=c(t.i),i=o.next();!i.done;i=o.next())a=i.value,r.push(a.then(e,e));return S(s,Promise.all(r),3);case 3:if(!n){s.u(4);break}return S(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,k(s)}})})}function Cy(){if(Lt())e:{for(var e=c(ey.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Ay(e){var t,n,r;return O(function(o){switch(o.g){case 1:return S(o,(t=new Yv).init(),2);case 2:return S(o,Qv(t),3);case 3:return n=o.h,r=new uy("manifest",n.path.nb,n.path.Ja,e),S(o,t.destroy(),4);case 4:return S(o,(new ky).remove(r.toString()),0)}})}function Ey(e,t,n,r,o,i){var a,s,u,l,f,p,d,h,m,g,v;return O(function(y){switch(y.g){case 1:for(a=!1,C(y,2),s=!0,u=c(n.streams),l=u.next();!l.done;l=u.next())for(f=l.value,p=c(f.segments),d=p.next();!d.done;d=p.next())h=d.value,null!=(m=h.pendingSegmentRefId?r[h.pendingSegmentRefId]:null)&&(h.dataKey=m,h.pendingSegmentRefId=void 0),null!=(m=h.pendingInitSegmentRefId?r[h.pendingInitSegmentRefId]:null)&&(h.initSegmentKey=m,h.pendingInitSegmentRefId=void 0),h.pendingSegmentRefId&&(s=!1),h.pendingInitSegmentRefId&&(s=!1);return n.size+=o,s&&(n.isIncomplete=!1),S(y,e.updateManifest(t,n),4);case 4:a=!0,i(),E(y,0);break;case 2:return g=I(y),S(y,Ay(t),5);case 5:if(a){y.u(6);break}return v=Object.values(r),S(y,e.removeSegments(v,function(){}),6);case 6:throw g}})}function Iy(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function My(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function Ry(e,t,n,r){if(t.expiration=n.ad(),n=_i(n),t.sessionIds=r.offline.usePersistentLicense?n:[],Iy(e)&&r.offline.usePersistentLicense&&!n.length)throw new Tt(2,9,9007)}function _y(e,t){for(var n=[],r=c(e.streams),o=r.next();!o.done;o=r.next())o=o.value,t&&"video"==o.type?n.push({contentType:Ln(o.mimeType,o.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=o.type||n.push({contentType:Ln(o.mimeType,o.codecs),robustness:e.drmInfo.audioRobustness});return n}function Ly(e,t,n){return O(function(r){return S(r,function(e,t,n,r){var o,i,a;return O(function(s){return 1==s.g?r.drmInfo?(o=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new Tt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),i=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:_y(r,!1),videoCapabilities:_y(r,!0)}}),S(s,gy(t,e,i),2)):s.return():3!=s.g?(a=s.h,S(s,o.remove(a),3)):S(s,o.add(i.filter(function(e){return!a.includes(e.sessionId)})),0)})}(e.g,e.h.drm,n,t),0)})}function Dy(e,t,n){function r(){}var o=function(e){for(var t=new Set,n=(e=c(e.streams)).next();!n.done;n=e.next())for(var r=(n=c(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey);return Array.from(t)}(n);return yy(t,n),Promise.all([e.removeSegments(o,r),e.removeManifests([t.key()],r)])}function Py(e,t,n,r,o,i){var a={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},s=o.offline.numberOfParallelDownloads,u=0;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}(r,n.presentationTimeline.mb(),function(n){var o=Dv(n),l=void 0;if(!i.has(o)){var c=n.endTime-n.startTime;c=Ty(t,r.id)*c,c=Nv(e.g,c),i.set(o,new Lv(n,c,u,!1))}n.$&&(l=Dv(n.$),i.has(l)||(c=.5*Ty(t,r.id),c=Nv(e.g,c),i.set(l,new Lv(n.$,c,u,!0)))),a.segments.push({pendingInitSegmentRefId:l,initSegmentKey:l?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:o,dataKey:0,mimeType:n.mimeType,codecs:n.codecs}),u=(u+1)%s}),a}function Oy(e){if(e.l.g)throw new Tt(2,9,7001)}function Ny(){if(!Cy())throw new Tt(2,9,9e3)}function Uy(e,t){return O(function(n){return 1==n.g?(e.i.push(t),A(n,2),S(n,t,4)):2!=n.g?n.return(n.h):(M(n),_e(e.i,t),R(n,0))})}function By(e){for(var t=new Set,n=c(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(r=(n=c(e.imageStreams)).next();!r.done;r=n.next())t.add(r.value);for(n=(e=c(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}v(ty,qv),ty.prototype.updateManifestExpiration=function(e,t){var n,r,o,i=this;return O(function(a){return n=Vv(i.h,i.g),r=n.store(),o=new ro,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),o.resolve()):o.reject(new Tt(2,9,9012,"Could not find values for "+e))},S(a,Promise.all([n.promise(),o]),0)})},ty.prototype.Wc=function(e){var t,n,r,o,i,a;return O(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,o=r-e.periods[n].startTime,i=ny(e.periods[n],o),t.push(i);return S(s,hh(t),2)}return a=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},ty.prototype.og=function(e){return{data:e.data}},v(oy,qv),oy.prototype.Wc=function(e){var t,n,r,o,i,a;return O(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,o=r-e.periods[n].startTime;for(var u=e.periods[n],l=[],f=c(u.streams),p=f.next();!p.done;p=f.next())0!=(p=p.value).variantIds.length&&l.push(iy(p,u.startTime,u.startTime+o));i=l,t.push(i)}return S(s,hh(t),2)}return a=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:a,sequenceMode:!1})})},v(ay,qv),(o=ay.prototype).hasFixedKeySpace=function(){return!1},o.addSegments=function(e){return this.add(this.i,e)},o.addManifests=function(e){return this.add(this.g,e)},o.updateManifest=function(e,t){return function(e,t,n){var r=(e=Vv(e.h,e.g)).store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}(this,e,t)},o.Wc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(o=sy.prototype).init=function(){var t=this,n=new ro,r=!1,o=new _t(function(){r=!0,n.reject(new Tt(2,9,9017))});o.Y(5);var i=e.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){if(!r){var e=i.result;t.l=e;var a=e.objectStoreNames;a=a.contains("manifest")&&a.contains("segment")?new ty(e,"segment","manifest"):null,t.g=a,a=(a=e.objectStoreNames).contains("manifest-v2")&&a.contains("segment-v2")?new oy(e,"segment-v2","manifest-v2"):null,t.h=a,a=(a=e.objectStoreNames).contains("manifest-v3")&&a.contains("segment-v3")?new oy(e,"segment-v3","manifest-v3"):null,t.i=a,a=(a=e.objectStoreNames).contains("manifest-v5")&&a.contains("segment-v5")?new ay(e,"segment-v5","manifest-v5"):null,t.j=a,e=e.objectStoreNames.contains("session-ids")?new $v(e):null,t.m=e,o.stop(),n.resolve()}},i.onupgradeneeded=function(){for(var e=i.result,t=c(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){r||(n.reject(new Tt(2,9,9001,i.error)),o.stop(),e.preventDefault())},n},o.destroy=function(){var e=this;return O(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return S(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),k(t)}})},o.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},o.getEmeSessionCell=function(){return this.m},o.erase=function(){var t=this;return O(function(n){switch(n.g){case 1:if(!t.g){n.u(2);break}return S(n,t.g.destroy(),2);case 2:if(!t.h){n.u(4);break}return S(n,t.h.destroy(),4);case 4:if(!t.i){n.u(6);break}return S(n,t.i.destroy(),6);case 6:if(!t.j){n.u(8);break}return S(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),S(n,function(){var t=new ro,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Tt(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,S(n,t.init(),0)}})},Zv("idb",function(){return zt()||Ot()||!e.indexedDB?null:new sy}),uy.prototype.nb=function(){return this.i},uy.prototype.Ja=function(){return this.h},uy.prototype.key=function(){return this.l},uy.prototype.toString=function(){return this.j},(o=dy.prototype).configure=function(){},o.start=function(e,t){var n,r,o,i,a,s,u=this;return O(function(l){switch(l.g){case 1:if(n=ly(e),u.g=n,null==n||"manifest"!=n.g)throw new Tt(2,1,9004,e);return r=new Yv,A(l,2),S(l,r.init(),4);case 4:return S(l,Jv(r,n.nb(),n.Ja()),5);case 5:return S(l,l.h.getManifests([n.key()]),6);case 6:return o=l.h,i=o[0],a=new cy(n.nb(),n.Ja()),s=fy(a,i),t.makeTextStreamsForClosedCaptions(s),l.return(s);case 2:return M(l),S(l,r.destroy(),7);case 7:R(l,0)}})},o.stop=function(){return Promise.resolve()},o.update=function(){},o.onExpirationUpdated=function(e,t){var n,r,o,i,a,s,u,l=this;return O(function(c){switch(c.g){case 1:return n=l.g,r=new Yv,C(c,2,3),S(c,r.init(),5);case 5:return S(c,Jv(r,n.nb(),n.Ja()),6);case 6:return S(c,(o=c.h).getManifests([n.key()]),7);case 7:if(i=c.h,a=i[0],s=a.sessionIds.includes(e),u=null==a.expiration||a.expiration>t,!s||!u){c.u(3);break}return S(c,o.updateManifestExpiration(n.key(),t),3);case 3:return M(c),S(c,r.destroy(),10);case 10:R(c,0);break;case 2:I(c),c.u(3)}})},o.onInitialVariantChosen=function(){},o.banLocation=function(){},o.setMediaElement=function(){},ea["application/x-offline-manifest"]=function(){return new dy},V("shaka.offline.OfflineScheme",hy),hy.plugin=my,yo("offline",my),(o=ky.prototype).destroy=function(){return this.l.destroy()},o.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Fu(e,t)),Yu(this.h,e)},o.getConfiguration=function(){var e=$u();return Yu(e,this.h,$u()),e},o.xb=function(){return this.g},o.store=function(e,t,n){var r=this,o=this.getConfiguration(),i=new Uv(this.g);return this.j.push(i),t=function(e,t,n,r,o,i){var a,s,u,l,f,p,d,h,m,g,v,y,b;return O(function(x){switch(x.g){case 1:return Ny(),s=a=null,u=new Yv,p=f=l=null,C(x,2,3),S(x,r(),5);case 5:return a=x.h,S(x,function(e,t,n,r){var o,i,a,s,u;return O(function(l){if(1==l.g)return o=null,i=e.g,a={networkingEngine:i,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){o=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(r.manifest),Oy(e),S(l,n.start(t,a),2);if(3!=l.g)return s=l.h,Oy(e),u=By(s),S(l,Promise.all(Ro(u,function(e){return e.createSegmentIndex()})),3);if(Oy(e),o)throw o;return l.return(s)})}(e,t,a,o),6);case 6:if(d=x.h,Oy(e),d.presentationTimeline.V()||d.presentationTimeline.kc())throw new Tt(2,9,9005,t);return S(x,e.yc(d,function(e){p=p||e},o),7);case 7:if(s=x.h,Oy(e),p)throw p;return S(x,function(e,t,n){var r,o,i,a,s,u,l,f,p,d,h,m,g,v,y,b,x,w,T,A,M,R,_,L,D,P,N,U;return O(function(O){switch(O.g){case 1:return r={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter(function(e){return dr(e,t,n)})}(e,n.restrictions,r),S(O,gr(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(o=[],i=n.preferredDecodingAttributes,a=n.preferredVideoCodecs,s=n.preferredAudioCodecs,pr(e,a,s,i),u=c(e.variants),l=u.next();!l.done;l=u.next())f=l.value,o.push(kr(f));for(p=c(e.textStreams),d=p.next();!d.done;d=p.next())h=d.value,o.push(Cr(h));for(m=c(e.imageStreams),g=m.next();!g.done;g=m.next())v=g.value,o.push(Ar(v));return S(O,n.offline.trackSelectionCallback(o),3);case 3:for(y=O.h,b=e.presentationTimeline.getDuration(),x=0,w=c(y),T=w.next();!T.done;T=w.next())A=T.value,M=A.bandwidth*b/8,x+=M;return C(O,4),S(O,n.offline.downloadSizeCallback(x),6);case 6:if(!O.h)throw new Tt(2,9,9014);E(O,5);break;case 4:if((R=I(O))instanceof Tt)throw R;throw new Tt(2,9,9015);case 5:for(_=new Set,L=new Set,D=new Set,P=c(y),N=P.next();!N.done;N=P.next())"variant"==(U=N.value).type&&_.add(U.id),"text"==U.type&&L.add(U.id),"image"==U.type&&D.add(U.id);e.variants=e.variants.filter(function(e){return _.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return L.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return D.has(e.id)}),function(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=c(t),r=n.next();!r.done;r=n.next())for(var o=(r=c(t)).next();!o.done;o=r.next());for(t=c(e),n=t.next();!n.done;n=t.next())for(n=c(e),r=n.next();!r.done;r=n.next());}(e),k(O)}})}(d,s,o),8);case 8:return S(x,u.init(),9);case 9:return Oy(e),S(x,Qv(u),10);case 10:return l=x.h,Oy(e),h=function(e,t,n,r,o,i){var a=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=by(t),appMetadata:n,isIncomplete:!1}}(n,t,r),s=o.offline.progressCallback;!function(e,t,n){e.m=t,e.l=n}(i,function(e,t){a.size=t,s(a,e)},function(t,n){u&&o.offline.usePersistentLicense&&l==n&&Ri(e,"cenc",t)});var u=Iy(t)&&!My(t),l=null;u&&(l=jy.get(e.g.keySystem));for(var f=new xy,p=c(t.textStreams),d=p.next();!d.done;d=p.next())f.g[d.value.id]=52;for(p=c(t.imageStreams),d=p.next();!d.done;d=p.next())Sy(f,d.value);for(p=c(t.variants),d=p.next();!d.done;d=p.next())wy(f,d.value);return f=function(e,t,n,r){for(var o=new Map,i=By(n),a=new Map,s=(i=c(i)).next();!s.done;s=i.next()){var u=Py(e,t,n,s=s.value,r,o);a.set(s.id,u)}for(e=c(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&a.get(t.audio.id).variantIds.push(t.id),t.video&&a.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(a.values()),Xf:Array.from(o.values())}}(i,f,t,o),i=f.streams,f=f.Xf,p=e.g,d=o.offline.usePersistentLicense,p&&d&&(p.initData=[]),{ui:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:i,sessionIds:d?_i(e):[],drmInfo:p,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Xf:f}}(s,d,t,n,o,i),m=h.ui,g=h.Xf,S(x,l.Ja.addManifests([m]),11);case 11:if(v=x.h,Oy(e),f=v[0],Oy(e),p)throw p;return S(x,function(e,t,n,r,o,i,a,s,u){var l,f,p,d,h,m,g,v,y,b;return O(function(x){switch(x.g){case 1:if(l={},f=0,p=function(t,p){var d,h,m,g,v,y,b;return O(function(x){if(1==x.g){for(d=c(t),h=d.next(),m={};!h.done;m={Ac:void 0},h=d.next())m.Ac=h.value,g=Pv(m.Ac,i),v=m.Ac.i,y=m.Ac.h,b=function(t){return function(n){var r,o,i;return O(function(s){if(1==s.g)return S(s,a.addSegments([{data:n}]),2);r=s.h,Oy(e),o=t.Ac.g,i=Dv(o),l[i]=r[0],f+=n.byteLength,k(s)})}}(m),jv(o,m.Ac.groupId,g,v,y,b);return S(x,function(e){return O(function(t){return 1==t.g?S(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}(o),2)}return p?(Oy(e),Ry(s,r,u,i),S(x,a.updateManifest(n,r),0)):x.u(0)})},d=!1,C(x,2),!Iy(s)||!d||My(s)){x.u(4);break}return S(x,p(t.filter(function(e){return e.h}),!0),5);case 5:return Oy(e),t=t.filter(function(e){return!e.h}),h=l,m=f,l={},f=0,S(x,Ey(a,n,r,h,m,function(){return Oy(e)}),6);case 6:Oy(e);case 4:if(d){x.u(7);break}return S(x,p(t,!1),8);case 8:return Oy(e),g=l,v=f,l={},f=0,S(x,Ey(a,n,r,g,v,function(){return Oy(e)}),9);case 9:Oy(e);case 7:E(x,0);break;case 2:return y=I(x),b=Object.values(l),S(x,a.removeSegments(b,function(){}),10);case 10:throw y}})}(e,g,f,m,i,o,l.Ja,d,s),12);case 12:return Oy(e),Ry(d,m,s,o),S(x,l.Ja.updateManifest(f,m),13);case 13:return Oy(e),y=new uy("manifest",l.path.nb,l.path.Ja,f),x.return(yy(y,m));case 3:return M(x),S(x,u.destroy(),14);case 14:if(!a){x.u(15);break}return S(x,a.stop(),15);case 15:if(!s){x.u(17);break}return S(x,s.destroy(),17);case 17:R(x,0);break;case 2:if(b=I(x),null==f){x.u(19);break}return S(x,Ay(f),19);case 19:throw p||b}})}(this,e,t||{},function(){var t;return O(function(i){return 1==i.g?n?i.u(2):S(i,cl(e,r.g,o.manifest.retryParameters),3):(2!=i.g&&(n=i.h),t=Zi(e,n||null),i.return(t()))})},o,i),(t=new oo(t,function(){return Bv(i)})).finally(function(){_e(r.j,i)}),function(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){_e(e.i,n)})}(this,t)},o.remove=function(e){return Uy(this,function(e,t){var n,r,o,i,a,s;return O(function(u){switch(u.g){case 1:if(Ny(),null==(n=ly(t))||"manifest"!=n.g)throw new Tt(2,9,9004,t);return r=n,o=new Yv,A(u,2),S(u,o.init(),4);case 4:return S(u,Jv(o,r.nb(),r.Ja()),5);case 5:return S(u,(i=u.h).getManifests([r.key()]),6);case 6:return a=u.h,s=a[0],S(u,Promise.all([Ly(e,s,o),Dy(i,r,s)]),2);case 2:return M(u),S(u,o.destroy(),8);case 8:R(u,0)}})}(this,e))},o.Li=function(){return Uy(this,function(e){var t,n,r,o,i,a,s,u,l,f;return O(function(p){switch(p.g){case 1:return Ny(),t=e.g,n=e.h.drm,r=new Yv,o=!1,A(p,2),S(p,r.init(),4);case 4:i=[],function(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}(r,function(e){return i.push(e)}),a=c(i),s=a.next();case 5:if(s.done){p.u(2);break}return S(p,(u=s.value).getAll(),8);case 8:return l=p.h,S(p,gy(n,t,l),9);case 9:return f=p.h,S(p,u.remove(f),10);case 10:f.length!=l.length&&(o=!0),s=a.next(),p.u(5);break;case 2:return M(p),S(p,r.destroy(),11);case 11:R(p,3);break;case 3:return p.return(!o)}})}(this))},o.list=function(){return Uy(this,O(function(r){switch(r.g){case 1:return Ny(),e=[],t=new Yv,A(r,2),S(r,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){t({nb:n,Ja:r},e)})})}(t,function(t,r){n=n.then(function(){return O(function(n){if(1==n.g)return S(n,r.getAllManifests(),2);n.h.forEach(function(n,r){n=yy(new uy("manifest",t.nb,t.Ja,r),n),e.push(n)}),k(n)})})}),S(r,n,2);case 2:return M(r),S(r,t.destroy(),6);case 6:R(r,3);break;case 3:return r.return(e)}}));var e,t,n},o.yc=function(e,t,n){var r,o=this;return O(function(i){return 1==i.g?((r=new Ci({Lb:o.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(n.drm),S(i,function(e,t,n){return e.fa=!0,e.A=new Map,e.R=n,Ei(e,t)}(r,e.variants,n.offline.usePersistentLicense),2)):3!=i.g?S(i,Mi(r),3):i.return(r)})},V("shaka.offline.Storage",ky),ky.deleteAll=function(){var e;return O(function(t){return 1==t.g?(e=new Yv,A(t,2),S(t,function(e){var t,n;return O(function(r){return 1==r.g?(t=Array.from(e.g.values()),(n=0<t.length)||ey.forEach(function(e){(e=e())&&t.push(e)}),S(r,Promise.all(t.map(function(e){return e.erase()})),2)):n?r.u(0):S(r,Promise.all(t.map(function(e){return e.destroy()})),0)})}(e),2)):5!=t.g?(M(t),S(t,e.destroy(),5)):R(t,0)})},ky.prototype.list=ky.prototype.list,ky.prototype.removeEmeSessions=ky.prototype.Li,ky.prototype.remove=ky.prototype.remove,ky.prototype.store=ky.prototype.store,ky.prototype.getNetworkingEngine=ky.prototype.xb,ky.prototype.getConfiguration=ky.prototype.getConfiguration,ky.prototype.configure=ky.prototype.configure,ky.prototype.destroy=ky.prototype.destroy,ky.support=Cy;var jy=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");function Fy(){}function zy(e,t){for(e={priority:t||0,callback:e},t=0;t<Gy.length;t++)if(Gy[t].priority<e.priority)return void Gy.splice(t,0,e);Gy.push(e)}$c.offline=Cy,V("shaka.polyfill",Fy),Fy.register=zy,Fy.installAll=function(){for(var e=c(Gy),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Q("Error installing polyfill!",n)}}};var Gy=[];function Vy(){this.g=new qy}function Hy(){e.AbortController||(e.AbortController=Vy,e.AbortSignal=qy)}function qy(){this.h=!1,this.g=void 0,this.onabort=null,this.i=new ho}function Xy(){}function Wy(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=c(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Ky(t.value)}function Ky(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function $y(){}function Yy(){dS()}function Qy(){}function Jy(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Zy),document.addEventListener("webkitfullscreenerror",Zy),document.addEventListener("mozfullscreenchange",Zy),document.addEventListener("mozfullscreenerror",Zy),document.addEventListener("MSFullscreenChange",Zy),document.addEventListener("MSFullscreenError",Zy)}}function Zy(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function eb(){}function tb(){var e=!0;!zt()||zt()&&Yt()||zt()&&Jt("Fuchsia")||(e=!1),(Vt()||Ht()||qt()||jt()||Nt()||Jt("PC=EOS")||Xt())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),rb=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=nb)}function nb(t){var n,r,o,i,a;return O(function(s){switch(s.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},r=t.video,o=t.audio,"media-source"!=t.type){if("file"!=t.type)return s.return(n);if(r&&!Dt(r.contentType)||o&&!Dt(o.contentType))return s.return(n);s.u(2);break}if(!Lt())return s.return(n);if(!r){s.u(3);break}return S(s,function(t){var n,r;return O(function(o){return 1==o.g?zt()?S(o,function(t){var n,r;return O(function(o){return 1==o.g?e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(n=t.contentType,t.width&&t.height&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&(n+="; framerate="+t.framerate),"pq"===t.transferFunction&&(n+="; eotf=smpte2084"),r=!1,n in cb?(r=cb[n],o.u(2)):S(o,cast.__platform__.canDisplayType(n),3)):o.return(ie(t.contentType)):(2!=o.g&&(r=o.h,cb[n]=r),o.return(r))})}(t),3):Nt()?(n=t.contentType,t.width&&t.height&&(n+="; width="+t.width,n+="; height="+t.height),t.framerate&&(n+="; framerate="+t.framerate),t.bitrate&&(n+="; bitrate="+t.bitrate),o.return(ie(n))):o.u(2):2!=o.g?(r=o.h,o.return(r)):o.return(ie(t.contentType))})}(r),4);case 4:if(!s.h)return s.return(n);case 3:if(o){var u=o.contentType;if(zt()&&o.spatialRendering&&(u+="; spatialRendering=true"),!ie(u))return s.return(n)}case 2:return t.keySystemConfiguration?(i=t.keySystemConfiguration,S(s,function(e,t,n){var r,o,i,a,s,u,l,c,f;return O(function(p){switch(p.g){case 1:if(r=[],o=[],n.audio&&(i={robustness:n.audio.robustness||"",contentType:t.contentType},Nt()&&t.contentType.includes('codecs="ac-3"')&&(i.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(i.encryptionScheme=n.audio.encryptionScheme),r.push(i)),n.video&&(a={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(a.encryptionScheme=n.video.encryptionScheme),o.push(a)),s={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(s.audioCapabilities=r),o.length&&(s.videoCapabilities=o),u=e?e.contentType:"",l=t?t.contentType:"",c=n.keySystem,f=null,C(p,2),Mt.has(u+"#"+l+"#"+c)){f=Mt.get(u+"#"+l+"#"+c)||null,p.u(4);break}return S(p,navigator.requestMediaKeySystemAccess(n.keySystem,[s]),5);case 5:f=p.h,Mt.set(u+"#"+l+"#"+c,f);case 4:E(p,3);break;case 2:I(p);case 3:return p.return(f)}})}(r,o,i),6)):(n.supported=!0,s.return(n));case 6:(a=s.h)&&(n.supported=!0,n.keySystemAccess=a);case 5:return s.return(n)}})}Vy.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new co("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},s.Object.defineProperties(Vy.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Fy.AbortController=Vy,Vy.install=Hy,qy.prototype.addEventListener=function(e,t,n){return this.i.addEventListener(e,t,n)},qy.prototype.removeEventListener=function(e,t,n){return this.i.removeEventListener(e,t,n)},qy.prototype.dispatchEvent=function(e){return this.i.dispatchEvent(e)},qy.prototype.throwIfAborted=function(){if(this.h)throw this.g},s.Object.defineProperties(qy.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),zy(Hy),Fy.Aria=Xy,Xy.install=Wy,zy(Wy),Fy.EncryptionScheme=$y,$y.install=Yy,zy(Yy,-2),Fy.Fullscreen=Qy,Qy.install=Jy,zy(Jy),Fy.MediaCapabilities=eb,eb.install=tb;var rb=null;eb.originalMcap=rb;var ob,ib,ab,sb,ub,lb,cb={};function fb(){}function pb(){var t=Kt();(e.MediaSource||e.ManagedMediaSource)&&(t&&e.MediaSource?10>=t?e.MediaSource=null:12>=t?(db(),hb()):15>=t&&db():Jt("DT_STB_BCM")?(db(),hb()):(Bt()||Ut()||Jt("Tizen 4"))&&function(){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return"opus"!=Bn(e)&&t(e)},e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"opus"!=Bn(e)&&n(e)}}}()),(e.MediaSource||e.ManagedMediaSource)&&function(){if(e.MediaSource){var t=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(e){return"mp2t"!=Nn(e)&&t(e)}}if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=Nn(e)&&n(e)}}}(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;jt()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(e){return e.startsWith("codecs=")});if(0>r)return e(t);var o=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),i=o.findIndex(function(e){return e.startsWith("vp09")});return 0<=i&&(o[i]="vp9",n[r]='codecs="'+o.join(",")+'"',t=n.join("; ")),e(t)})}()}function db(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,N.apply(0,arguments));return t.abort=function(){},t}}function hb(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function mb(){}function gb(){screen.orientation&&screen.orientation.unlock||(null!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new vb;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new co("change");n.dispatchEvent(e)})}())}function vb(){ho.call(this),this.type="",this.angle=0}function yb(){}function bb(e,t){try{var n=new Sb(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function xb(e){var t=this.mediaKeys;return t&&t!=e&&kb(t,null),delete this.mediaKeys,(this.mediaKeys=e)?kb(e,this):Promise.resolve()}function wb(e){if(we(e=be(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ln(e=sn(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=ye(e),this.dispatchEvent(t)}function Sb(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=c(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,o=!1;if(n.audioCapabilities)for(var i=c(n.audioCapabilities),a=i.next();!a.done;a=i.next())(a=a.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.audioCapabilities.push(a),o=!0));if(n.videoCapabilities)for(i=(n=c(n.videoCapabilities)).next();!i.done;i=n.next())(i=i.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,i.contentType.split(";")[0])&&(t.videoCapabilities.push(i),o=!0));r||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=o?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Tb(e){this.h=new WebKitMediaKeys(e),this.g=new ne}function kb(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",wb);try{return As(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function Cb(e){ho.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new ne,this.sessionId="",this.expiration=NaN,this.closed=new ro,this.keyStatuses=new Eb}function Ab(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new co("keystatuseschange"),e.dispatchEvent(t)}function Eb(){this.size=0,this.g=void 0}eb.memoizedCanDisplayTypeRequests_=cb,zy(tb,-1),Fy.MediaSource=fb,fb.install=pb,zy(pb),Fy.Orientation=mb,mb.install=gb,v(vb,ho),vb.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},vb.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},zy(gb),Fy.PatchedMediaKeysApple=yb,yb.uninstall=function(){ob&&(ob=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",ib),HTMLMediaElement.prototype.setMediaKeys=ab,e.MediaKeys=sb,e.MediaKeySystemAccess=ub,navigator.requestMediaKeySystemAccess=lb,ib=lb=ab=ub=sb=null,e.shakaMediaKeysPolyfill="")},yb.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&(void 0!==t&&t&&(ob=!0,ib=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),ab=HTMLMediaElement.prototype.setMediaKeys,sb=e.MediaKeys,ub=e.MediaKeySystemAccess,lb=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=xb,e.MediaKeys=Tb,e.MediaKeySystemAccess=Sb,navigator.requestMediaKeySystemAccess=bb,e.shakaMediaKeysPolyfill=Ib)},Sb.prototype.createMediaKeys=function(){var e=new Tb(this.keySystem);return Promise.resolve(e)},Sb.prototype.getConfiguration=function(){return this.g},Tb.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Cb(this.h)},Tb.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Tb.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},v(Cb,ho),(o=Cb.prototype).generateRequest=function(e,t){var n=this;this.h=new ro;try{var r=this.l.createSession("video/mp4",be(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(e){n.h&&(n.h.resolve(),n.h=null),e=new co("message",e=(new Map).set("messageType",null==n.keyStatuses.Yb()?"license-request":"license-renewal").set("message",ye(e.message))),n.dispatchEvent(e)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(Ab(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Ab(n,"output-not-allowed");break;default:Ab(n,"internal-error")}}),Ab(this,"status-pending")}catch(o){this.h.reject(o)}return this.h},o.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},o.update=function(e){this.g=new ro;try{this.i.update(be(e))}catch(t){this.g.reject(t)}return this.g},o.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(gS){this.closed.reject(gS)}return this.closed},o.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(o=Eb.prototype).Yb=function(){return this.g},o.forEach=function(e){this.g&&e(this.g,It.value())},o.get=function(e){if(this.has(e))return this.g},o.has=function(e){var t=It.value();return!(!this.g||!ge(e,t))},o.entries=function(){},o.keys=function(){},o.values=function(){};var Ib="apple";function Mb(){}function Rb(){e.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||Ut()||Jt("Tizen 4")||Jt("Tizen 5.0")||Ft())&&(MediaKeys.prototype.setServerCertificate=_b)}function _b(){return Promise.resolve(!1)}function Lb(){}function Db(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Pb,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ob,e.MediaKeys=Nb,e.MediaKeySystemAccess=Ub,e.shakaMediaKeysPolyfill=Bb)}function Pb(){return Promise.reject(Error("The key system specified is not supported."))}function Ob(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Nb(){throw new TypeError("Illegal constructor.")}function Ub(){throw this.keySystem="",new TypeError("Illegal constructor.")}Fy.PatchedMediaKeysCert=Mb,Mb.install=Rb,zy(Rb),Fy.PatchedMediaKeysNop=Lb,Lb.install=Db,Nb.prototype.createSession=function(){},Nb.prototype.setServerCertificate=function(){},Nb.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},Ub.prototype.getConfiguration=function(){},Ub.prototype.createMediaKeys=function(){};var Bb="nop";function jb(){}function Fb(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Zb="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Gb,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Vb,e.MediaKeys=qb,e.MediaKeySystemAccess=Hb,e.shakaMediaKeysPolyfill=ex}}function zb(e){return Zb?Zb+e.charAt(0).toUpperCase()+e.slice(1):e}function Gb(e,t){try{var n=new Hb(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Vb(e){var t=this.mediaKeys;return t&&t!=e&&Xb(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Xb(e,this),Promise.resolve()}function Hb(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,o=document.getElementsByTagName("video");o=o.length?o[0]:document.createElement("video");for(var i=(t=c(t)).next();!i.done;i=t.next()){var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(i=i.value).initDataTypes,sessionTypes:["temporary"],label:i.label},s=!1;if(i.audioCapabilities)for(var u=c(i.audioCapabilities),l=u.next();!l.done;l=u.next())(l=l.value).contentType&&(s=!0,o.canPlayType(l.contentType.split(";")[0],this.g)&&(a.audioCapabilities.push(l),r=!0));if(i.videoCapabilities)for(l=(u=c(i.videoCapabilities)).next();!l.done;l=u.next())(l=l.value).contentType&&(s=!0,o.canPlayType(l.contentType,this.g)&&(a.videoCapabilities.push(l),r=!0));if(s||(r=o.canPlayType("video/mp4",this.g)||o.canPlayType("video/webm",this.g)),"required"==i.persistentState&&(n?(a.persistentState="required",a.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=a)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function qb(e){this.l=e,this.h=null,this.g=new ne,this.i=[],this.j=new Map}function Xb(e,t){e.h=t,e.g.Ra();var n=Zb;t&&(e.g.D(t,n+"needkey",function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=ye(t.initData),e.h.dispatchEvent(n)}),e.g.D(t,n+"keymessage",function(t){var n=Wb(e,t.sessionId);n&&(t=new co("message",t=(new Map).set("messageType",null==n.keyStatuses.Yb()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))}),e.g.D(t,n+"keyadded",function(t){(t=Wb(e,t.sessionId))&&t.ready()}),e.g.D(t,n+"keyerror",function(t){var n=Wb(e,t.sessionId);if(n){var r=Error("EME v0.1b key error"),o=t.errorCode;o.systemCode=t.systemCode,r.errorCode=o,!t.sessionId&&n.h?(45==t.systemCode&&(r.message="Unsupported session type."),n.h.reject(r),n.h=null):t.sessionId&&n.g?(n.g.reject(r),n.g=null):(r=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Qb(n,"output-restricted"):Qb(n,1==r?"expired":"internal-error"))}}))}function Wb(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Kb(e,t,n){ho.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new ro,this.keyStatuses=new Jb}function $b(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=be(ln("LOAD_SESSION|"+n));else{var o=ln("PERSISTENT|");r=xn(o,t)}else r=be(t)}catch(a){return Promise.reject(a)}e.h=new ro;var i=zb("generateKeyRequest");try{e.j[i](e.i,r)}catch(a){if("InvalidStateError"!=a.name)return e.h=null,Promise.reject(a);new _t(function(){try{e.j[i](e.i,r)}catch(t){e.h.reject(t),e.h=null}}).Y(.01)}return e.h}function Yb(e,t,n){if(e.g)e.g.then(function(){return Yb(e,t,n)}).catch(function(){return Yb(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=an(n),o=JSON.parse(r);"oct"!=o.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=vn(o.keys[0].k),o=vn(o.keys[0].kid)}else r=be(n),o=null;var i=zb("addKey");try{e.j[i](e.i,r,o,e.sessionId)}catch(a){e.g.reject(a),e.g=null}}}function Qb(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new co("keystatuseschange"),e.dispatchEvent(t)}function Jb(){this.size=0,this.g=void 0}zy(Db,-10),Fy.PatchedMediaKeysWebkit=jb,jb.install=Fb,Hb.prototype.createMediaKeys=function(){var e=new qb(this.g);return Promise.resolve(e)},Hb.prototype.getConfiguration=function(){return this.h},qb.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Kb(t,this.l,e),this.i.push(e),e},qb.prototype.setServerCertificate=function(){return Promise.resolve(!1)},qb.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},v(Kb,ho),(o=Kb.prototype).ready=function(){Qb(this,"usable"),this.g&&this.g.resolve(),this.g=null},o.generateRequest=function(e,t){return $b(this,t,null)},o.load=function(e){return"persistent-license"==this.l?$b(this,null,e):Promise.reject(Error("Not a persistent session."))},o.update=function(e){var t=new ro;return Yb(this,t,e),t},o.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=zb("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},o.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(o=Jb.prototype).Yb=function(){return this.g},o.forEach=function(e){this.g&&e(this.g,It.value())},o.get=function(e){if(this.has(e))return this.g},o.has=function(e){var t=It.value();return!(!this.g||!ge(e,t))},o.entries=function(){},o.keys=function(){},o.values=function(){};var Zb="",ex="webkit";function tx(){}function nx(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=ox,Object.defineProperty(t,"disablePictureInPicture",{get:ax,set:sx,enumerable:!0,configurable:!0}),document.exitPictureInPicture=ix,document.addEventListener("webkitpresentationmodechanged",rx,!0))}}function rx(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function ox(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function ix(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function ax(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function sx(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function ux(){}function lx(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=cx))}function cx(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function fx(){}function px(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:dx})}function dx(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function hx(){}function mx(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function gx(){}function vx(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||Ft())&&(t.getVideoPlaybackQuality=yx)}}function yx(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function bx(){}function xx(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=wx;else if(6==n)t=Sx;else{try{var r=!!wx(1,2,"")}catch(o){r=!1}r&&(t=wx)}t&&(e.VTTCue=function(e,n,r){return t(e,n,r)})}}function wx(t,n,r){return new e.TextTrackCue(t,n,r)}function Sx(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Tx(){}zy(Fb),Fy.PiPWebkit=tx,tx.install=nx,zy(nx),Fy.RandomUUID=ux,ux.install=lx,zy(lx),Fy.Symbol=fx,fx.install=px,zy(px),Fy.VideoPlayPromise=hx,hx.install=mx,zy(mx),Fy.VideoPlaybackQuality=gx,gx.install=vx,zy(vx),Fy.VTTCue=bx,bx.install=xx,zy(xx),Tx.prototype.parseInit=function(){},Tx.prototype.setSequenceMode=function(){},Tx.prototype.setManifestType=function(){},Tx.prototype.parseMedia=function(e,t){for(var n=null,r=[],o=(e=c(e=an(e).split(/\r?\n/))).next();!o.done;o=e.next())if((o=o.value)&&!/^\s+$/.test(o)&&(o=kx.exec(o))){var i=Cx.exec(o[1]);o=new Pe(i=60*parseInt(i[1],10)+parseFloat(i[2].replace(",",".")),t.segmentEnd?t.segmentEnd:i+2,o[2]),n&&(n.endTime=i,r.push(n)),n=o}return n&&r.push(n),r},V("shaka.text.LrcTextParser",Tx),Tx.prototype.parseMedia=Tx.prototype.parseMedia,Tx.prototype.setManifestType=Tx.prototype.setManifestType,Tx.prototype.setSequenceMode=Tx.prototype.setSequenceMode,Tx.prototype.parseInit=Tx.prototype.parseInit;var kx=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,Cx=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function Ax(){}function Ex(e,t,n,r,o,i,a,s,u,l,f,p){var d=l;if(Jo(e)){if(!f)return null;var h={tagName:"span",children:[ti(e)],attributes:{},parent:null}}else h=e;for(var m=null,g=c(Zx),v=g.next();!v.done&&!(m=Dx(h,"backgroundImage",r,"#",v.value)[0]);v=g.next());g=null;var y=li(h,Zx,"backgroundImage");if(p&&y&&!y.startsWith("#")&&(v=new st(p),y=new st(y),(v=v.resolve(y).toString())&&(g=v)),("p"==e.tagName||m||g)&&(f=!0),e=f,v="default"==(h.attributes["xml:space"]||(s?"default":"preserve")),s=[],!(y=h.children.every(Jo)))for(var b=c(h.children),x=b.next();!x.done;x=b.next())(x=Ex(x.value,t,n,r,o,i,a,v,u,h,f,p))&&s.push(x);if(r=null!=l,p=ti(h),p=h.children.length&&p&&/\S/.test(p),!((x=h.attributes.begin||h.attributes.end||h.attributes.dur)||p||"br"==h.tagName||0!=s.length||r&&!v))return null;for(p=(b=Ox(h,n)).start,b=b.end;d&&d.tagName&&"tt"!=d.tagName;)p=(b=Px(d,n,p,b)).start,b=b.end,d=d.parent;if(null==p&&(p=0),p+=t.periodStart,b=null==b?1/0:b+t.periodStart,p=Math.max(p,t.segmentStart),b=Math.min(b,t.segmentEnd),!x&&0<s.length)for(p=1/0,b=0,n=(t=c(s)).next();!n.done;n=t.next())n=n.value,p=Math.min(p,n.startTime),b=Math.max(b,n.endTime);if("br"==h.tagName)return(o=new Pe(p,b,"")).lineBreak=!0,o;if(t="",y&&(t=pn(ti(h)||""),v&&(t=t.replace(/\s+/g," "))),(t=new Pe(p,b,t)).nestedCues=s,f||(t.isContainer=!0),u&&(t.cellResolution=u),u=Dx(h,"region",i,"")[0],h.attributes.region&&u&&u.attributes["xml:id"]){var w=u.attributes["xml:id"];t.region=a.filter(function(e){return e.id==w})[0]}return a=u,l&&r&&!h.attributes.region&&!h.attributes.style&&(a=Dx(l,"region",i,"")[0]),function(e,t,n,r,o,i,a,s){if("rtl"==Mx(t,n,i,"direction",a=a||s)&&(e.direction="rtl"),"tb"==(s=Mx(t,n,i,"writingMode",a))||"tblr"==s?e.writingMode="vertical-lr":"tbrl"==s?e.writingMode="vertical-rl":"rltb"==s||"rl"==s?e.direction="rtl":s&&(e.direction=Ge),(s=Mx(t,n,i,"textAlign",!0))?(e.positionAlign=Yx[s],e.lineAlign=$x[s],e.textAlign=je[s.toUpperCase()]):e.textAlign=Be,(s=Mx(t,n,i,"displayAlign",!0))&&(e.displayAlign=ze[s.toUpperCase()]),(s=Mx(t,n,i,"color",a))&&(e.color=s),(s=Mx(t,n,i,"backgroundColor",a))&&(e.backgroundColor=s),(s=Mx(t,n,i,"border",a))&&(e.border=s),s=Mx(t,n,i,"fontFamily",a))switch(s){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=s.split(",").filter(function(e){return"default"!=e}).join(",")}switch((s=Mx(t,n,i,"fontWeight",a))&&"bold"==s&&(e.fontWeight=700),s=Mx(t,n,i,"wrapOption",a),e.wrapLine=!s||"noWrap"!=s,(s=Mx(t,n,i,"lineHeight",a))&&s.match(zx)&&(e.lineHeight=s),(s=Mx(t,n,i,"fontSize",a))&&(s.match(zx)||s.match(Fx))&&(e.fontSize=s),(s=Mx(t,n,i,"fontStyle",a))&&(e.fontStyle=Qe[s.toUpperCase()]),r?(o=r.attributes.imageType||r.attributes.imagetype,s=r.attributes.encoding,r=ti(r).trim(),"PNG"==o&&"Base64"==s&&r&&(e.backgroundImage="data:image/png;base64,"+r)):o&&(e.backgroundImage=o),(r=Mx(t,n,i,"textOutline",a))&&((r=r.split(" "))[0].match(zx)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(zx)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=Mx(t,n,i,"letterSpacing",a))&&r.match(zx)&&(e.letterSpacing=r),(r=Mx(t,n,i,"linePadding",a))&&r.match(zx)&&(e.linePadding=r),(r=Mx(t,n,i,"opacity",a))&&(e.opacity=parseFloat(r)),(r=Rx(n,i,"textDecoration"))&&Ix(e,r),(r=_x(t,i,"textDecoration"))&&Ix(e,r),(r=Mx(t,n,i,"textCombine",a))&&(e.textCombineUpright=r),Mx(t,n,i,"ruby",a)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}(t,h,a,m,g,o,e,0==s.length),t}function Ix(e,t){for(var n=(t=c(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&_e(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&_e(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&_e(e.textDecoration,"overline")}}function Mx(e,t,n,r,o){return o=void 0===o||o,(e=_x(e,n,r))?e:o?Rx(t,n,r):null}function Rx(e,t,n){if(!e)return null;var r=li(e,Jx,n);return r||Lx(e,t,n)}function _x(e,t,n){var r=li(e,Jx,n);return r||Lx(e,t,n)}function Lx(e,t,n){e=Dx(e,"style",t,"");for(var r=null,o=0;o<e.length;o++){var i=si(e[o],"urn:ebu:tt:style",n);i||(i=li(e[o],Jx,n)),i||(i=_x(e[o],t,n)),i&&(r=i)}return r}function Dx(e,t,n,r,o){var i=[];if(!e||1>n.length)return i;var a=e;for(e=null;!e&&!(e=o?si(a,o,t):a.attributes[t])&&(a=a.parent););if(t=e)for(o=(t=c(t.split(" "))).next();!o.done;o=t.next())for(o=o.value,a=(e=c(n)).next();!a.done;a=e.next())if(r+(a=a.value).attributes["xml:id"]==o){i.push(a);break}return i}function Px(e,t,n,r){return e=Ox(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function Ox(e,t){var n=Nx(e.attributes.begin,t),r=Nx(e.attributes.end,t);return e=Nx(e.attributes.dur,t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function Nx(e,t){var n=null;if(Vx.test(e)){e=Vx.exec(e),n=Number(e[1]);var r=Number(e[2]),o=Number(e[3]),i=Number(e[4]);n=(o+=(i+=(Number(e[5])||0)/t.h)/t.frameRate)+60*r+3600*n}else if(Hx.test(e))n=Ux(Hx,e);else if(qx.test(e))n=Ux(qx,e);else if(Xx.test(e))e=Xx.exec(e),n=Number(e[1])/t.frameRate;else if(Wx.test(e))e=Wx.exec(e),n=Number(e[1])/t.g;else if(Kx.test(e))n=Ux(Kx,e);else if(e)throw new Tt(2,2,2001,"Could not parse cue time range in TTML");return n}function Ux(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Bx(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}$n["application/x-subtitle-lrc"]=function(){return new Tx},Ax.prototype.parseInit=function(){},Ax.prototype.setSequenceMode=function(){},Ax.prototype.setManifestType=function(){},Ax.prototype.parseMedia=function(e,t,n){var r=an(e);if(e=[],""==r)return e;var o=Yo(r,"tt");if(!o)throw new Tt(2,2,2005,"Failed to parse TTML.");if(!(r=ri(o,"body")[0]))return[];var i=li(o,Qx,"frameRate"),a=li(o,Qx,"subFrameRate"),s=li(o,Qx,"frameRateMultiplier"),u=li(o,Qx,"tickRate"),l=li(o,Qx,"cellResolution"),f=o.attributes["xml:space"]||"default",p=li(o,Jx,"extent");if("default"!=f&&"preserve"!=f)throw new Tt(2,2,2005,"Invalid xml:space value: "+f);f="default"==f,i=new Bx(i,a,s,u),l=l&&(l=/^(\d+) (\d+)$/.exec(l))?{dc:parseInt(l[1],10),rows:parseInt(l[2],10)}:null,a=(a=ri(o,"metadata")[0])?a.children:[],s=ri(o,"style"),u=[];for(var d=c(o=ri(o,"region")),h=d.next();!h.done;h=d.next()){var m=h.value;h=new Ee;var g=m.attributes["xml:id"];if(g){h.id=g;var v=null;p&&(v=jx.exec(p)||Gx.exec(p)),g=v?Number(v[1]):null,v=v?Number(v[2]):null;var y,b=Rx(m,s,"extent");if(b){var x=(y=jx.exec(b))||Gx.exec(b);null!=x&&(h.width=Number(x[1]),h.height=Number(x[2]),y||(null!=g&&(h.width=100*h.width/g),null!=v&&(h.height=100*h.height/v)),h.widthUnits=y||null!=g?Ie:0,h.heightUnits=y||null!=v?Ie:0)}(m=Rx(m,s,"origin"))&&null!=(x=(y=jx.exec(m))||Gx.exec(m))&&(h.viewportAnchorX=Number(x[1]),h.viewportAnchorY=Number(x[2]),y?b||(h.width=100-h.viewportAnchorX,h.widthUnits=Ie,h.height=100-h.viewportAnchorY,h.heightUnits=Ie):(null!=v&&(h.viewportAnchorY=100*h.viewportAnchorY/v),null!=g&&(h.viewportAnchorX=100*h.viewportAnchorX/g)),h.viewportAnchorUnits=y||null!=g?Ie:0)}else h=null;h&&u.push(h)}if(ei(r,"p").length)throw new Tt(2,2,2001,"<p> can only be inside <div> in TTML");for(d=(p=c(ei(r,"div"))).next();!d.done;d=p.next())if(ei(d.value,"span").length)throw new Tt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Ex(r,t,i,a,s,o,u,f,l,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},V("shaka.text.TtmlTextParser",Ax),Ax.prototype.parseMedia=Ax.prototype.parseMedia,Ax.prototype.setManifestType=Ax.prototype.setManifestType,Ax.prototype.setSequenceMode=Ax.prototype.setSequenceMode,Ax.prototype.parseInit=Ax.prototype.parseInit;var jx=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Fx=/^(\d{1,4}(?:\.\d+)?|100)%$/,zx=/^(\d+px|\d+em|\d*\.?\d+c)$/,Gx=/^(\d+)px (\d+)px$/,Vx=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Hx=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,qx=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,Xx=/^(\d*(?:\.\d*)?)f$/,Wx=/^(\d*(?:\.\d*)?)t$/,Kx=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),$x={left:qe,center:"center",right:"end",start:qe,end:"end"},Yx={left:"line-left",center:"center",right:"line-right"},Qx=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Jx=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Zx=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function ew(){this.g=new Ax}function tw(){this.h=!1,this.g="UNKNOWN"}function nw(e){for(var t=c(Object.entries(We)),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value;var o=new Pe(0,0,"");o.color=r,e.set("."+n,o)}for(n=(t=c(Object.entries(Ke))).next();!n.done;n=t.next())n=(r=c(n.value)).next().value,r=r.next().value,(o=new Pe(0,0,"")).backgroundColor=r,e.set("."+n,o)}function rw(e,t,n){if(e.includes("<")){0===n.size&&nw(n);var r=e;e=[];for(var o=-1,i=0;i<r.length;i++)"<"===r[i]?o=i+1:">"===r[i]&&0<o&&((o=r.substr(o,i-o)).match(uw)&&e.push(o),o=-1);for(i=(e=c(e)).next();!i.done;i=e.next())i=i.value,r=r.replace("<"+i+">",'<div time="'+i+'">'),r+="</div>";e:{i=e=r,o=[];var a=-1;e="",r=!1;for(var s=0;s<i.length;s++)if("/"===i[s]){var u=i.indexOf(">",s);if(-1===u){e=i;break e}if((u=i.substring(s+1,u))&&"v"==u){r=!0;var l=null;if(o.length&&(l=o[o.length-1]),l){if(l===u)e+="/"+u+">";else{if(!l.startsWith("v")){e+=i[s];continue}e+="/"+l+">"}s+=u.length+1}else e+=i[s]}else e+=i[s]}else"<"===i[s]?"v"!=i[a=s+1]&&(a=-1):">"===i[s]&&0<a&&(o.push(i.substr(a,s-a)),a=-1),e+=i[s];for(o=(i=c(o)).next();!o.done;o=i.next())a=(o=o.value).replace(" ",".voice-"),e=(e=e.replace("<"+o+">","<"+a+">")).replace("</"+o+">","</"+a+">"),r||(e+="</"+a+">")}e=function(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return t[e]||""}):e||""}(e);try{var f=Yo("<span>"+e+"</span>","span")}catch(T){}if(f)if(1!=(f=f.children).length||f[0].tagName)for(e=(f=c(f)).next();!e.done;e=f.next())iw(e.value,t,n);else t.payload=pn(e);else t.payload=pn(e)}else t.payload=pn(e)}function ow(e,t){return e&&0<e.length?e:t}function iw(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Ee,r.position=null,r.size=0,e.tagName)for(var o=c(e.tagName.split(/(?=[ .])+/g)),i=o.next();!i.done;i=o.next()){var a=i=i.value;if(a.startsWith(".voice-")){var s=a.split("-").pop();a='v[voice="'+s+'"]',n.has(a)||(a="v[voice="+s+"]")}switch(n.has(a)&&(s=r,a=n.get(a))&&(s.backgroundColor=ow(a.backgroundColor,s.backgroundColor),s.color=ow(a.color,s.color),s.fontFamily=ow(a.fontFamily,s.fontFamily),s.fontSize=ow(a.fontSize,s.fontSize),s.textShadow=ow(a.textShadow,s.textShadow),s.fontWeight=a.fontWeight,s.fontStyle=a.fontStyle,s.opacity=a.opacity,s.rubyTag=a.rubyTag,s.textCombineUpright=a.textCombineUpright,s.wrapLine=a.wrapLine),i){case"br":return r=Oe(r.startTime,r.endTime),void t.nestedCues.push(r);case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(i=e.attributes.color)&&(r.color=i);break;case"div":if(!(i=e.attributes.time))break;(i=sw(new hf(i)))&&(r.startTime=i);break;case"ruby":case"rp":case"rt":r.rubyTag=i}}if(o=e.children,Jo(e)||1==o.length&&Jo(o[0]))for(n=ti(e).split("\n"),e=!0,o=(n=c(n)).next();!o.done;o=n.next())o=o.value,e||(e=Oe(r.startTime,r.endTime),t.nestedCues.push(e)),0<o.length&&((e=r.clone()).payload=pn(o),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),e=(t=c(o)).next();!e.done;e=t.next())iw(e.value,r,n)}function aw(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?Be:je[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":Ue)):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Xe[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=He,e.line=Number(n[1]),n[2]&&(e.lineAlign=Xe[n[2].toUpperCase()]))}function sw(e){if(null==(e=gf(e,uw)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}$n["application/ttml+xml"]=function(){return new Ax},ew.prototype.parseInit=function(e){var t=!1;if((new No).box("moov",Uo).box("trak",Uo).box("mdia",Uo).box("minf",Uo).box("stbl",Uo).S("stsd",Bo).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new Tt(2,2,2007)},ew.prototype.setSequenceMode=function(){},ew.prototype.setManifestType=function(){},ew.prototype.parseMedia=function(e,t,n){var r=this,o=!1,i=[];if((new No).box("mdat",zo(function(e){o=!0,i=i.concat(r.g.parseMedia(e,t,n))})).parse(e,!1),!o)throw new Tt(2,2,2007);return i},V("shaka.text.Mp4TtmlParser",ew),ew.prototype.parseMedia=ew.prototype.parseMedia,ew.prototype.setManifestType=ew.prototype.setManifestType,ew.prototype.setSequenceMode=ew.prototype.setSequenceMode,ew.prototype.parseInit=ew.prototype.parseInit,$n['application/mp4; codecs="stpp"']=function(){return new ew},$n['application/mp4; codecs="stpp.ttml"']=function(){return new ew},$n['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new ew},$n['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new ew},$n['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new ew},$n['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new ew},$n['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new ew},$n['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new ew},tw.prototype.parseInit=function(){},tw.prototype.setSequenceMode=function(e){this.h=e},tw.prototype.setManifestType=function(e){this.g=e},tw.prototype.parseMedia=function(e,t){var n=(e=(e=an(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Tt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g)if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new Tt(2,2,2e3);if(null==(e=sw(new hf(e[1]))))throw new Tt(2,2,2e3);r=Number(r[1]);for(var o=t.segmentStart-t.periodStart;95443.7176888889<=o;)o-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else e=t.segmentStart;for(t=[],o=(r=c(n[0].split("\n"))).next();!o.done;o=r.next())if(o=o.value,/^Region:/.test(o)){o=new hf(o);var i=new Ee;vf(o),mf(o);for(var a=vf(o);a;){var s=i,u=a;(a=/^id=(.*)$/.exec(u))?s.id=a[1]:(a=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(a[1]):(a=/^lines=(\d+)$/.exec(u))?(s.height=Number(a[1]),s.heightUnits=2):(a=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(a[1]),s.regionAnchorY=Number(a[2])):(a=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(a[1]),s.viewportAnchorY=Number(a[2])):/^scroll=up$/.exec(u)&&(s.scroll="up"),mf(o),a=vf(o)}t.push(i)}for(nw(r=new Map),o=[],i=(n=c(n.slice(1))).next();!i.done;i=n.next()){if((1!=(i=i.value.split("\n")).length||i[0])&&!/^NOTE($|[ \t])/.test(i[0])&&"STYLE"==i[0]){for(s=[],a=-1,u=1;u<i.length;u++)i[u].includes("::cue")&&(s.push([]),a=s.length-1),-1!=a&&(s[a].push(i[u]),i[u].includes("}")&&(a=-1));for(a=(s=c(s)).next();!a.done;a=s.next()){var l=a.value;a="global",(u=l[0].match(/\((.*)\)/))&&(a=u.pop()),u=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(u=l[1].split(";")),(l=r.get(a))||(l=new Pe(0,0,""));for(var f=!1,p=0;p<u.length;p++){var d=/^\s*([^:]+):\s*(.*)/.exec(u[p]);if(d){var h=d[2].trim().replace(";","");switch(d[1].trim()){case"background-color":case"background":f=!0,l.backgroundColor=h;break;case"color":f=!0,l.color=h;break;case"font-family":f=!0,l.fontFamily=h;break;case"font-size":f=!0,l.fontSize=h;break;case"font-weight":(700<=parseInt(h,10)||"bold"==h)&&(f=!0,l.fontWeight=700);break;case"font-style":switch(h){case"normal":f=!0,l.fontStyle=Ye;break;case"italic":f=!0,l.fontStyle="italic";break;case"oblique":f=!0,l.fontStyle="oblique"}break;case"opacity":f=!0,l.opacity=parseFloat(h);break;case"text-combine-upright":f=!0,l.textCombineUpright=h;break;case"text-shadow":f=!0,l.textShadow=h;break;case"white-space":f=!0,l.wrapLine="noWrap"!=h}}}f&&r.set(a,l)}}if(f=e,1==(l=i).length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0]||"REGION"==l[0])i=null;else if(i=null,l[0].includes("--\x3e")||(i=l[0],l.splice(0,1)),a=sw(s=new hf(l[0])),p=gf(s,/[ \t]+--\x3e[ \t]+/g),u=sw(s),null==a||null==p||null==u)Q("Failed to parse VTT time code. Cue skipped:",i,l),i=null;else{for(a+=f,u+=f,l=l.slice(1).join("\n").trim(),r.has("global")?((f=r.get("global").clone()).startTime=a,f.endTime=u,f.payload=""):f=new Pe(a,u,""),mf(s),a=vf(s);a;)aw(f,a,t),mf(s),a=vf(s);rw(l,f,r),null!=i&&(f.id=i),i=f}i&&o.push(i)}return o},V("shaka.text.VttTextParser",tw),tw.prototype.parseMedia=tw.prototype.parseMedia,tw.prototype.setManifestType=tw.prototype.setManifestType,tw.prototype.setSequenceMode=tw.prototype.setSequenceMode,tw.prototype.parseInit=tw.prototype.parseInit;var uw=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function lw(){this.g=null}function cw(e,t,n){var r,o,i;return(new No).box("payl",zo(function(e){r=an(e)})).box("iden",zo(function(e){o=an(e)})).box("sttg",zo(function(e){i=an(e)})).parse(e),r?function(e,t,n,r,o){if(r=new Pe(r,o,""),rw(e,r,new Map),t&&(r.id=t),n)for(e=new hf(n),t=vf(e);t;)aw(r,t,[]),mf(e),t=vf(e);return r}(r,o,i,t,n):null}function fw(){}function pw(e){if(null==(e=gf(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function dw(){this.g=new tw}function hw(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=c((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function mw(){}function gw(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=vw(n))&&(e.color=n),(n=t.BackColour)&&(n=vw(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Fe,e.textAlign="start";break;case 2:e.displayAlign=Fe,e.textAlign=Be;break;case 3:e.displayAlign=Fe,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Be;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Be;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function vw(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function yw(e){return 3600*((e=Sw.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}$n["text/vtt"]=function(){return new tw},$n['text/vtt; codecs="vtt"']=function(){return new tw},$n['text/vtt; codecs="wvtt"']=function(){return new tw},lw.prototype.parseInit=function(e){var t=this,n=!1;if((new No).box("moov",Uo).box("trak",Uo).box("mdia",Uo).S("mdhd",function(e){e=Ca(e.reader,e.version),t.g=e.timescale}).box("minf",Uo).box("stbl",Uo).S("stsd",Bo).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Tt(2,2,2008);if(!n)throw new Tt(2,2,2008)},lw.prototype.setSequenceMode=function(){},lw.prototype.setManifestType=function(){},lw.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Tt(2,2,2008);var n,r=0,o=[],i=[],a=!1,s=!1,u=!1,l=null;if((new No).box("moof",Uo).box("traf",Uo).S("tfdt",function(e){a=!0,r=ka(e.reader,e.version).baseMediaDecodeTime}).S("tfhd",function(e){l=Ta(e.reader,e.flags).Yc}).S("trun",function(e){s=!0,o=Aa(e.reader,e.version,e.flags).Wg}).box("mdat",zo(function(e){u=!0,n=e})).parse(e,!1),!u&&!a&&!s)throw new Tt(2,2,2008);e=r;for(var f=new Do(n,0),p=c(o),d=p.next();!d.done;d=p.next()){var h=(d=d.value).Jf||l,m=d.ne?r+d.ne:e;e=m+(h||0);var g=0;do{var v=f.P();g+=v;var y=null;"vttc"==Vo(f.P())?8<v&&(y=f.qb(v-8)):f.skip(v-8),h&&y&&(v=cw(y,t.periodStart+m/this.g,t.periodStart+e/this.g),i.push(v))}while(d.sampleSize&&g<d.sampleSize)}return i.filter(Jn)},V("shaka.text.Mp4VttParser",lw),lw.prototype.parseMedia=lw.prototype.parseMedia,lw.prototype.setManifestType=lw.prototype.setManifestType,lw.prototype.setSequenceMode=lw.prototype.setSequenceMode,lw.prototype.parseInit=lw.prototype.parseInit,$n['application/mp4; codecs="wvtt"']=function(){return new lw},fw.prototype.parseInit=function(){},fw.prototype.setSequenceMode=function(){},fw.prototype.setManifestType=function(){},fw.prototype.parseMedia=function(e){var t=an(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=c(t.split("\n\n"))).next();!n.done;n=t.next()){var r=new hf((n=n.value.split("\n"))[0]),o=pw(r),i=gf(r,/,/g);if(r=pw(r),null==o||null==i||null==r)throw new Tt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Pe(o,r,n.slice(1).join("\n").trim()))}return e},V("shaka.text.SbvTextParser",fw),fw.prototype.parseMedia=fw.prototype.parseMedia,fw.prototype.setManifestType=fw.prototype.setManifestType,fw.prototype.setSequenceMode=fw.prototype.setSequenceMode,fw.prototype.parseInit=fw.prototype.parseInit,$n["text/x-subviewer"]=function(){return new fw},dw.prototype.parseInit=function(){},dw.prototype.setSequenceMode=function(){},dw.prototype.setManifestType=function(){},dw.prototype.parseMedia=function(e,t,n){return e=be(ln(e=hw(e=an(e)))),this.g.parseMedia(e,t,n)},V("shaka.text.SrtTextParser",dw),dw.srt2webvtt=hw,dw.prototype.parseMedia=dw.prototype.parseMedia,dw.prototype.setManifestType=dw.prototype.setManifestType,dw.prototype.setSequenceMode=dw.prototype.setSequenceMode,dw.prototype.parseInit=dw.prototype.parseInit,$n["text/srt"]=function(){return new dw},mw.prototype.parseInit=function(){},mw.prototype.setSequenceMode=function(){},mw.prototype.setManifestType=function(){},mw.prototype.parseMedia=function(e){var t="",n="",r=null,o=null;for(o=(e=c(o=an(e).split(/\r?\n\s*\r?\n/))).next();!o.done;o=e.next()){var i=o.value;o=i,(i=bw.exec(i))&&(r=i[1],o=i[2]),"V4 Styles"==r||"V4+ Styles"==r?(t=o,t=n?t+"\n"+o:o):"Events"==r&&(n=n?n+"\n"+o:o)}for(r=[],o=null,e=(t=c(t.split(/\r?\n/))).next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(i=xw.exec(e)))if(e=i[1].trim(),i=i[2].trim(),"Format"==e)o=i.split(ww);else if("Style"==e){e=i.split(ww),i={};for(var a=0;a<o.length&&a<e.length;a++)i[o[a]]=e[a];r.push(i)}for(o=[],t=null,i=(n=c(n.split(/\r?\n/))).next(),e={};!i.done;e={jh:void 0},i=n.next())if(i=i.value,!/^\s*;/.test(i)&&(a=xw.exec(i)))if(i=a[1].trim(),a=a[2].trim(),"Format"==i)t=a.split(ww);else if("Dialogue"==i){a=a.split(ww),i={};for(var s=0;s<t.length&&s<a.length;s++)i[t[s]]=a[s];a=new Pe(s=yw(i.Start),yw(i.End),a.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.jh=i.Style,(e=r.find(function(e){return function(t){return t.Name==e.jh}}(e)))&&gw(a,e),o.push(a)}return o},V("shaka.text.SsaTextParser",mw),mw.prototype.parseMedia=mw.prototype.parseMedia,mw.prototype.setManifestType=mw.prototype.setManifestType,mw.prototype.setSequenceMode=mw.prototype.setSequenceMode,mw.prototype.parseInit=mw.prototype.parseInit;var bw=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,xw=/^\s*([^:]+):\s*(.*)/,ww=/\s*,\s*/,Sw=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function Tw(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&0<(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)?{Qd:n,ca:e}:null}function kw(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(60&e[t+2])>>>2;if(r>n.length-1)return null;var o=((192&e[t+2])>>>6)+1,i=(1&e[t+2])<<2;return i|=(192&e[t+3])>>>6,{sampleRate:n[r],channelCount:i,codec:"mp4a.40."+o}}function Cw(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var r=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(r<=n)&&((t+=r)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function Aw(e){this.i=e,this.h=0,this.g=new Map}function Ew(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var r=63&e[t+4],o=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+o>e.length)return null;var i=e[t+6]>>5,a=0;2===i?a+=2:(1&i&&1!==i&&(a+=2),4&i&&(a+=2)),a=(e[t+6]<<8|e[t+7])>>12-a&1;var s=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(3&s)<<6|i<<3|a<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][i]+a,ma:e,ca:o}}function Iw(e,t){if(11===e[t]&&119===e[t+1]){var n,r,o=0,i=5;for(t+=i;0<i;){r=e[t];var a=Math.min(i,8),s=8-a;n=(r&(n=4278190080>>>24+s<<s))>>s,o=o?o<<a|n:n,t+=1,i-=a}if(16>o)return!0}return!1}function Mw(e){this.i=e,this.h=0,this.g=new Map}function Rw(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]))return null;var n=new _a(e.subarray(t+2));Da(n,2),Da(n,3);var r=Pa(n,11)+1<<1,o=Pa(n,2);if(3==o){o=[24e3,22060,16e3][o=Pa(n,2)];var i=3}else o=[48e3,44100,32e3][o],i=Pa(n,2);var a=Pa(n,3),s=Pa(n,1);return n=Pa(n,5),t+r>e.byteLength?null:(e=Math.floor(r*o/(16*[1,2,3,6][i])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,o<<6|n<<1,a<<1|s,0]),{sampleRate:o,channelCount:[2,1,2,3,3,4,4,5][a]+s,ma:e,ca:r})}function _w(e){this.i=e,this.h=0,this.g=new Map}function Lw(e){for(var t=!1,n=[],r=e.find(function(e){return 7==e.type}),o=!1,i=(e=c(e)).next();!i.done;i=e.next()){var a=!1;switch((i=i.value).type){case 1:a=o=!0;var s=i.data;r&&4<s.length&&(2===(s=Ga(new _a(s)))||4===s||7===s||9===s)&&(t=!0);break;case 5:t=a=o=!0;break;case 6:case 7:case 8:case 12:a=!0;break;case 9:o=a=!0;break;default:a=!1}o&&a&&(a=i.fullData.byteLength,(s=new Uint8Array(4))[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,n.push(s),n.push(i.fullData))}return n.length?{data:xn.apply(hn,f(n)),kd:t}:null}$n["text/x-ssa"]=function(){return new mw},(o=Aw.prototype).destroy=function(){this.g.clear()},o.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&ie(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(Fn(t)||"mp4a.40.2")+'"':t},o.getOriginalMimeType=function(){return this.i},o.transmux=function(e,t,n,r){for(var o=be(e),i=Sa(o),a=i.length;a<o.length&&!Cw(o,a);a++);if(e=1e3*n.endTime,(i=wa(i)).length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=i.data),!(i=kw(o,a)))return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=i.sampleRate,t.channelsCount=i.channelCount;for(var s=[];a<o.length;){var u=Tw(o,a);if(!u)return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null));var l=u.Qd+u.ca;a+l<=o.length&&s.push({data:o.subarray(a+u.Qd,a+l),size:u.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),a+=l}return o=i.sampleRate,e=Math.floor(e*o/1e3),r=new Gg([r={id:t.id,type:"audio",codecs:i.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:o,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:s},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Vg(r),this.g.set(n,t)),n=Kg(r),this.h++,t=xn(t,n),Promise.resolve(t)},V("shaka.transmuxer.AacTransmuxer",Aw),Aw.prototype.transmux=Aw.prototype.transmux,Aw.prototype.getOriginalMimeType=Aw.prototype.getOriginalMimeType,Aw.prototype.convertCodecs=Aw.prototype.convertCodecs,Aw.prototype.isSupported=Aw.prototype.isSupported,Aw.prototype.destroy=Aw.prototype.destroy,Ze("audio/aac",function(){return new Aw("audio/aac")},nt),(o=Mw.prototype).destroy=function(){this.g.clear()},o.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&ie(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t},o.getOriginalMimeType=function(){return this.i},o.transmux=function(e,t,n,r){for(var o=Sa(e=be(e)),i=o.length;i<e.length&&!Iw(e,i);i++);var a=1e3*n.endTime;(o=wa(o)).length&&n&&(o=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=o.data),o=0;for(var s=new Uint8Array([]),u=[];i<e.length;){var l=Ew(e,i);if(!l)return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,o=l.sampleRate,s=l.ma,u.push({data:e.subarray(i,i+l.ca),size:l.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),i+=l.ca}return e=Math.floor(a*o/1e3),r=new Gg([r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:o,duration:r,$a:[],ma:s,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:u},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Vg(r),this.g.set(n,t)),n=Kg(r),this.h++,t=xn(t,n),Promise.resolve(t)},V("shaka.transmuxer.Ac3Transmuxer",Mw),Mw.prototype.transmux=Mw.prototype.transmux,Mw.prototype.getOriginalMimeType=Mw.prototype.getOriginalMimeType,Mw.prototype.convertCodecs=Mw.prototype.convertCodecs,Mw.prototype.isSupported=Mw.prototype.isSupported,Mw.prototype.destroy=Mw.prototype.destroy,Ze("audio/ac3",function(){return new Mw("audio/ac3")},nt),(o=_w.prototype).destroy=function(){this.g.clear()},o.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&ie(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},o.getOriginalMimeType=function(){return this.i},o.transmux=function(e,t,n,r){for(var o=Sa(e=be(e)),i=o.length;i<e.length&&2935!=(e[i]<<8|e[i+1]);i++);var a=1e3*n.endTime;(o=wa(o)).length&&n&&(o=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=o.data),o=0;for(var s=new Uint8Array([]),u=[];i<e.length;){var l=Rw(e,i);if(!l)return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,o=l.sampleRate,s=l.ma,u.push({data:e.subarray(i,i+l.ca),size:l.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),i+=l.ca}return e=Math.floor(a*o/1e3),r=new Gg([r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:o,duration:r,$a:[],ma:s,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:u},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Vg(r),this.g.set(n,t)),n=Kg(r),this.h++,t=xn(t,n),Promise.resolve(t)},V("shaka.transmuxer.Ec3Transmuxer",_w),_w.prototype.transmux=_w.prototype.transmux,_w.prototype.getOriginalMimeType=_w.prototype.getOriginalMimeType,_w.prototype.convertCodecs=_w.prototype.convertCodecs,_w.prototype.isSupported=_w.prototype.isSupported,_w.prototype.destroy=_w.prototype.destroy,Ze("audio/ec3",function(){return new _w("audio/ec3")},nt);var Dw=[100,110,122,244,44,83,86,118,128,138,139,134];function Pw(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),r=e.find(function(e){return 34==e.type});if(!t||!n||!r)return null;var o=function(e){var t=new _a(e,!0);return Fa(t),Fa(t),Pa(t,4),Pa(t,2),Pa(t,6),e=Pa(t,3),t=ja(t),{yf:e+1,Wf:t}}(t.fullData);e=function(e){Fa(e=new _a(e,!0)),Fa(e);var t=0,n=0,r=0,o=0;Pa(e,4);var i=Pa(e,3);ja(e);for(var a=Pa(e,2),s=Pa(e,1),u=Pa(e,5),l=Fa(e),c=Fa(e),f=Fa(e),p=Fa(e),d=Fa(e),h=Fa(e),m=Fa(e),g=Fa(e),v=Fa(e),y=Fa(e),b=Fa(e),x=[],w=[],S=0;S<i;S++)x.push(ja(e)),w.push(ja(e));if(0<i)for(S=i;8>S;S++)Pa(e,2);for(S=0;S<i;S++)x[S]&&Pa(e,88),w[S]&&Fa(e);Ua(e),3==(x=Ua(e))&&Pa(e,1),w=Ua(e),S=Ua(e),ja(e)&&(t+=Ua(e),n+=Ua(e),r+=Ua(e),o+=Ua(e));var T=Ua(e),k=Ua(e),C=Ua(e);if(ja(e))for(var A=0;A<=i;A++)Ua(e),Ua(e),Ua(e);else Ua(e),Ua(e),Ua(e);if(Ua(e),Ua(e),Ua(e),Ua(e),Ua(e),Ua(e),ja(e)&&ja(e))for(A=0;4>A;A++)for(var E=0;E<(3===A?2:6);E++)if(ja(e)){var I=Math.min(64,1<<4+(A<<1));1<A&&Ba(e);for(var M=0;M<I;M++)Ba(e)}else Ua(e);for(ja(e),ja(e),ja(e)&&(Fa(e),Ua(e),Ua(e),ja(e)),A=Ua(e),I=E=0;I<A;I++)if(M=!1,0!==I&&(M=ja(e)),M){I===A&&Ua(e),ja(e),Ua(e);for(var R=M=0;R<=E;R++){var _=ja(e),L=!1;_||(L=ja(e)),(_||L)&&M++}E=M}else{for(E=(R=Ua(e))+(M=Ua(e)),_=0;_<R;_++)Ua(e),ja(e);for(R=0;R<M;R++)Ua(e),ja(e)}if(ja(e))for(A=Ua(e),E=0;E<A;E++){for(I=0;I<C+4;I++)Pa(e,1);Pa(e,1)}if(A=C=1,E=0,ja(e),ja(e),ja(e)){if(ja(e)&&(M=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],R=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<(I=Fa(e))&&16>=I?(C=M[I-1],A=R[I-1]):255===I&&(C=Pa(e,16),A=Pa(e,16))),ja(e)&&ja(e),ja(e)&&(Pa(e,3),ja(e),ja(e)&&(Fa(e),Fa(e),Fa(e))),ja(e)&&(Ua(e),Ua(e)),ja(e),ja(e),ja(e),(I=ja(e))&&(Ua(e),Ua(e),Ua(e),Ua(e)),ja(e)&&(Pa(e,32),Pa(e,32),ja(e)&&Ua(e),ja(e)))for(R=!1,I=ja(e),M=ja(e),(I||M)&&((R=ja(e))&&(Fa(e),Pa(e,5),ja(e),Pa(e,5)),Pa(e,4),Pa(e,4),R&&Pa(e,4),Pa(e,5),Pa(e,5),Pa(e,5)),_=0;_<=i;_++){var D=!0;L=1,ja(e)||(D=ja(e));var P=!1;if(D?Ua(e):P=ja(e),P||(L=Ua(e)+1),I){for(D=0;D<L;D++)Ua(e),Ua(e),R&&(Ua(e),Ua(e));ja(e)}if(M){for(D=0;D<L;D++)Ua(e),Ua(e),R&&(Ua(e),Ua(e));ja(e)}}ja(e)&&(ja(e),ja(e),ja(e),E=Ua(e),Ua(e),Ua(e),Ua(e),Ua(e))}return{Ye:b,df:a,ef:s,cf:u,Ze:l,$e:c,af:f,bf:p,Se:d,Te:h,Ue:m,Ve:g,We:v,Xe:y,$d:E,Le:0,Je:x,He:T,Ge:k,width:w-(t+n)*(1===x||2===x?2:1),height:S-(r+o)*(1===x?2:1),Ri:C,Qi:A}}(n.fullData);var i=function(e){var t=new _a(e,!0);Fa(t),Fa(t),Ua(t),Ua(t),ja(t),ja(t),Pa(t,3),ja(t),ja(t),Ua(t),Ua(t),Ba(t),ja(t),ja(t),ja(t)&&Ua(t),Ba(t),Ba(t),ja(t),ja(t),ja(t),ja(t),e=ja(t),t=ja(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Bf:n}}(r.fullData);return t=function(e,t,n,r){var o=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return o[0]=1,o[1]=(3&r.df)<<6|(r.ef?1:0)<<5|31&r.cf,o[2]=r.Ze,o[3]=r.$e,o[4]=r.af,o[5]=r.bf,o[6]=r.Se,o[7]=r.Te,o[8]=r.Ue,o[9]=r.Ve,o[10]=r.We,o[11]=r.Xe,o[12]=r.Ye,o[13]=240|(3840&r.$d)>>8,o[14]=255&r.$d,o[15]=252|3&r.Bf,o[16]=252|3&r.Je,o[17]=248|7&r.He,o[18]=248|7&r.Ge,o[19]=0,o[20]=0,o[21]=(3&r.Le)<<6|(7&r.yf)<<3|(r.Wf?1:0)<<2|3,o[22]=3,o[23]=160,o[24]=0,o[25]=1,o[26]=(65280&e.byteLength)>>8,o[27]=255&e.byteLength,o.set(e,28),o[23+(5+e.byteLength)]=161,o[e.byteLength+29]=0,o[e.byteLength+30]=1,o[e.byteLength+31]=(65280&t.byteLength)>>8,o[e.byteLength+32]=255&t.byteLength,o.set(t,e.byteLength+33),o[23+(e.byteLength+10+t.byteLength)]=162,o[e.byteLength+10+t.byteLength+24]=0,o[e.byteLength+10+t.byteLength+25]=1,o[e.byteLength+10+t.byteLength+26]=(65280&n.byteLength)>>8,o[e.byteLength+10+t.byteLength+27]=255&n.byteLength,o.set(n,e.byteLength+10+t.byteLength+28),o}(t.fullData,n.fullData,r.fullData,{yf:o.yf,Wf:o.Wf,df:e.df,ef:e.ef,Ye:e.Ye,cf:e.cf,Ze:e.Ze,$e:e.$e,af:e.af,bf:e.bf,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Le:e.Le,$d:e.$d,Je:e.Je,He:e.He,Ge:e.Ge,Bf:i.Bf}),{height:e.height,width:e.width,wa:t,Ba:e.Ri,Ca:e.Qi}}function Ow(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,o=e[t+2]>>4&15,i=e[t+2]>>2&3;if(1!==n&&0!==o&&15!==o&&3!==i){var a=e[t+3]>>6;o=1e3*Bw[14*(3===n?3-r:3===r?3:4)+o-1],i=jw[3*(3===n?0:2===n?1:2)+i],n=Fw[n][r];var s=zw[r],u=Math.floor(n*o/i+(e[t+2]>>1&1))*s,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&87>=l&&2===r&&224e3<=o&&0===a&&(e[t+3]|=128),{sampleRate:i,channelCount:3===a?1:2,ca:u,Pi:8*n*s}}return null}function Nw(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function Uw(e,t){if(t+1<e.length&&Nw(e,t)){var n=Ow(e,t),r=4;return n&&n.ca&&(r=n.ca),(t+=r)===e.length||t+1<e.length&&Nw(e,t)}return!1}var Bw=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],jw=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Fw=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],zw=[0,1,1,4];function Gw(e){this.i=e,this.h=0,this.g=new Map}function Vw(e){this.h=e,this.g=null}
/*
      		 @license
      		 MSS Transmuxer
      		 Copyright 2015 Dash Industry Forum
      		 SPDX-License-Identifier: BSD-3-Clause
      		*/
function Hw(e){this.h=e,(this.g=vm.get("ISOBoxer")())&&function(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==Xw[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}(this)}function qw(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}(o=Gw.prototype).destroy=function(){this.g.clear()},o.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&ie(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},o.getOriginalMimeType=function(){return this.i},o.transmux=function(e,t,n,r){for(var o=be(e),i=Sa(o).length;i<o.length&&!Uw(o,i);i++);var a;for(e=[];i<o.length;){var s=Ow(o,i);if(!s)return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null));a||(a=s),i+s.ca<=o.length&&e.push({data:o.subarray(i,i+s.ca),size:s.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),i+=s.ca}return a?(o=9e4*a.Pi/a.sampleRate*this.h,r=new Gg([r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a.sampleRate,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:o,Ya:e},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Vg(r),this.g.set(n,t)),n=Kg(r),this.h++,t=xn(t,n),Promise.resolve(t)):Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null))},V("shaka.transmuxer.Mp3Transmuxer",Gw),Gw.prototype.transmux=Gw.prototype.transmux,Gw.prototype.getOriginalMimeType=Gw.prototype.getOriginalMimeType,Gw.prototype.convertCodecs=Gw.prototype.convertCodecs,Gw.prototype.isSupported=Gw.prototype.isSupported,Gw.prototype.destroy=Gw.prototype.destroy,Ze("audio/mpeg",function(){return new Gw("audio/mpeg")},nt),(o=Vw.prototype).destroy=function(){},o.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=Fn(e).split(","),n=Cn("audio",t);return t=Cn("video",t),!(!n||t||"mp3"!=Un(n))&&ie(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},o.getOriginalMimeType=function(){return this.h},o.transmux=function(e,t,n,r,o){if(this.g?this.g.clearData():this.g=new Va,e=be(e),"mp3"!=(e=this.g.parse(e)).$c().audio||"audio"!=o)return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),o=c(e.Tb()),e=o.next();!e.done;e=o.next())if(e=e.value.data)for(t=0;t<e.length;)(r=Ow(e,t))?(t+r.ca<=e.length&&(n=xn(n,e.subarray(t,t+r.ca))),t+=r.ca):t++;return Promise.resolve(n)},V("shaka.transmuxer.MpegTsTransmuxer",Vw),Vw.prototype.transmux=Vw.prototype.transmux,Vw.prototype.getOriginalMimeType=Vw.prototype.getOriginalMimeType,Vw.prototype.convertCodecs=Vw.prototype.convertCodecs,Vw.prototype.isSupported=Vw.prototype.isSupported,Vw.prototype.destroy=Vw.prototype.destroy,Ze("video/mp2t",function(){return new Vw("video/mp2t")},rt),(o=Hw.prototype).destroy=function(){},o.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?ie(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ie(t)||ie(e)))},o.convertCodecs=function(e,t){return t.replace("mss/","")},o.getOriginalMimeType=function(){return this.h},o.transmux=function(e,t,n){if(!n)return Promise.resolve(be(e));if(!t.mssPrivateData)return Promise.reject(new Tt(2,3,3020,n?n.M()[0]:null));try{var r,o=this.g.parseBuffer(e),i=o.fetch("tfhd");i.track_ID=t.id+1;var a=o.fetch("tfdt"),s=o.fetch("traf");null===a&&((a=this.g.createFullBox("tfdt",s,i)).version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=o.fetch("trun"),l=o.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=o.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var f=o.fetch("sepiff");if(null!==f){f.type="senc",f.usertype=void 0;var p=o.fetch("saio");if(null===p){(p=this.g.createFullBox("saio",s)).version=0,p.flags=0,p.entry_count=1,p.offset=[0];var d=this.g.createFullBox("saiz",s);if(d.version=0,d.flags=0,d.sample_count=f.sample_count,d.default_sample_info_size=0,d.sample_info_size=[],2&f.flags)for(r=0;r<f.sample_count;r+=1)d.sample_info_size[r]=10+6*f.entry[r].NumberOfEntries;else d.default_sample_info_size=8}}i.flags&=16777214,i.flags|=131072,u.flags|=1;var h=o.fetch("moof");u.data_offset=h.getLength()+8;var m=o.fetch("saio");null!==m&&(m.offset[0]=qw(h,"traf")+qw(s,"senc")+16);var g=be(o.write());return Promise.resolve(g)}catch(sa){return sa instanceof Tt?Promise.reject(sa):Promise.reject(new Tt(2,3,3022,n?n.M()[0]:null))}},V("shaka.transmuxer.MssTransmuxer",Hw),Hw.prototype.transmux=Hw.prototype.transmux,Hw.prototype.getOriginalMimeType=Hw.prototype.getOriginalMimeType,Hw.prototype.convertCodecs=Hw.prototype.convertCodecs,Hw.prototype.isSupported=Hw.prototype.isSupported,Hw.prototype.destroy=Hw.prototype.destroy;var Xw=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function Ww(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}Ze("mss/audio/mp4",function(){return new Hw("mss/audio/mp4")},nt),Ze("mss/video/mp4",function(){return new Hw("mss/video/mp4")},nt),(o=Ww.prototype).destroy=function(){this.i.clear(),this.h&&this.h.destroy()},o.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Fn(n).split(",");return n=Cn("audio",r),r=Cn("video",r),!(n&&(n=Un(n),!Yw.includes(n))||r&&(n=Un(r),!Qw.includes(n)))&&(t?ie(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ie(t)||ie(e)))},o.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=Fn(t).replace("mp4a.40.34","mp3").split(",").map(function(e){return Sr(e,"audio/mp4")}).map(Tr).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},o.getOriginalMimeType=function(){return this.l},o.transmux=function(e,t,n,r,o){var i=be(e);if("audio"==o&&!Xa(i)){for(var a=Sa(i),s=a.length;s<i.length;s++)if(Uw(i,s))return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null));for(s=a.length;s<i.length;s++)if(Cw(i,s))return this.h||(this.h=new Aw("audio/aac")),this.h.transmux(e,t,n,r,o);return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new Va;var u=this.j.parse(i),l=[],p=u.$c();try{var d=null;if("video"==o){switch(p.video){case"avc":var h=[],m=null,g=[],v=u.Fc();if(!v.length)throw new Tt(2,3,3023,n?n.M()[0]:null);for(var y=0;y<v.length;y++){var b=v[y],x=b.nalus;g.push.apply(g,f(x));var w,S=Lw(x);if(S)null==m&&(m=b.dts),w=y+1<v.length?(v[y+1].dts||0)-(b.dts||0):1<v.length?(b.dts||0)-(v[y-1].dts||0):9e4*(n.endTime-n.startTime),h.push({data:S.data,size:S.data.byteLength,duration:w,cb:Math.round((b.pts||0)-(b.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:S.kd?2:1,hb:S.kd?0:1}})}var T=function(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new _a(t.data),r=Fa(n);if(Fa(n),Fa(n),Na(n),Dw.includes(r)&&(3===(r=Ua(n))&&Da(n,1),Na(n),Na(n),Da(n,1),ja(n))){r=3!==r?8:12;for(var o=0;o<r;o++)ja(n)&&za(n,6>o?16:64)}if(Na(n),0===(r=Ua(n)))Ua(n);else if(1===r)for(Da(n,1),Na(n),Na(n),r=Ua(n),o=0;o<r;o++)Na(n);Na(n),Da(n,1);var i=Ua(n),a=Ua(n),s=Pa(n,1);0===s&&Da(n,1),Da(n,1);var u=0,l=0,c=0,p=0;if(ja(n)&&(u=Ua(n),l=Ua(n),c=Ua(n),p=Ua(n)),o=r=1,ja(n)&&ja(n)){var d=Fa(n);0<d&&16>=d?(r=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][d-1],o=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][d-1]):255===d&&(r=Pa(n,16),o=Pa(n,16))}return n=(2-s)*(a+1)*16-2*c-2*p,i=16*(i+1)-2*u-2*l,u=[],t=t.fullData,u.push(t.byteLength>>>8&255),u.push(255&t.byteLength),u=u.concat.apply(u,f(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,f(e)),{height:n,width:i,wa:e=new Uint8Array([1,u[3],u[4],u[5],255,225].concat(u,[1],t)),Ba:r,Ca:o}}(g);if(!T||null==m)throw new Tt(2,3,3018,n?n.M()[0]:null);t.height=T.height,t.width=T.width,d={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:T.wa,Ba:T.Ba,Ca:T.Ca,data:{rb:this.g,baseMediaDecodeTime:m,Ya:h},stream:t};break;case"hvc":var k=[],C=null,A=[],E=u.Fc();if(!E.length)throw new Tt(2,3,3023,n?n.M()[0]:null);for(var I=0;I<E.length;I++){var M=E[I],R=M.nalus;A.push.apply(A,f(R));for(var _=!1,L=[],D=!1,P=c(R),O=P.next();!O.done;O=P.next()){var N=O.value;switch(N.type){case 1:case 0:var U=D=!0;break;case 19:case 20:case 21:_=U=D=!0;break;case 32:case 33:case 34:case 39:case 40:U=!0;break;case 35:D=U=!0;break;default:U=!1}if(D&&U){var B=N.fullData.byteLength,j=new Uint8Array(4);j[0]=B>>24&255,j[1]=B>>16&255,j[2]=B>>8&255,j[3]=255&B,L.push(j),L.push(N.fullData)}}var F,z=L.length?{data:xn.apply(hn,f(L)),kd:_}:null;if(z)null==C&&null!=M.dts&&(C=M.dts),F=I+1<E.length?(E[I+1].dts||0)-(M.dts||0):1<E.length?(M.dts||0)-(E[I-1].dts||0):9e4*(n.endTime-n.startTime),k.push({data:z.data,size:z.data.byteLength,duration:F,cb:Math.round((M.pts||0)-(M.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:z.kd?2:1,hb:z.kd?0:1}})}var G=Pw(A);if(!G||null==C)throw new Tt(2,3,3018,n?n.M()[0]:null);t.height=G.height,t.width=G.width,d={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:G.wa,Ba:G.Ba,Ca:G.Ca,data:{rb:this.g,baseMediaDecodeTime:C,Ya:k},stream:t}}d&&(l.push(d),d=null)}if("audio"==o){switch(p.audio){case"aac":for(var V,H=[],q=null,X=c(u.Tb()),W=X.next();!W.done;W=X.next()){var K=W.value,$=K.data;if($){var Y=0;if(!(V=kw($,Y)))throw new Tt(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=V.sampleRate,t.channelsCount=V.channelCount,null==q&&null!==K.pts&&(q=K.pts);Y<$.length;){var Q=Tw($,Y);if(Q){var J=Q.Qd+Q.ca;Y+J<=$.length&&H.push({data:$.subarray(Y+Q.Qd,Y+J),size:Q.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Y+=J}else Y++}}}if(!V||null==q){if(!u.Fc().length)throw new Tt(2,3,3018,n?n.M()[0]:null);q=9e4*n.startTime;var Z=Cn("audio",t.codecs.split(","));if(!Z||!t.channelsCount||!t.audioSamplingRate)throw new Tt(2,3,3018,n?n.M()[0]:null);V={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:Z};var ee=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(Z,t.channelsCount);if(!ee)throw new Tt(2,3,3018,n?n.M()[0]:null);for(var te=q+9e4*(n.endTime-n.startTime),ne=q;ne<te;)H.push({data:ee,size:ee.byteLength,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),ne+=1024/V.sampleRate*9e4}var re=V.sampleRate,oe=q/9e4*re;d={id:t.id,type:"audio",codecs:V.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:re,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:oe,Ya:H},stream:t};break;case"ac3":for(var ie=[],ae=0,se=new Uint8Array([]),ue=null,le=c(u.Tb()),ce=le.next();!ce.done;ce=le.next()){var fe=ce.value,pe=fe.data;null==ue&&null!==fe.pts&&(ue=fe.pts);for(var de=0;de<pe.length;){var he=Ew(pe,de);he?(t.audioSamplingRate=he.sampleRate,t.channelsCount=he.channelCount,ae=he.sampleRate,se=he.ma,ie.push({data:pe.subarray(de,de+he.ca),size:he.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),de+=he.ca):de++}}if(0==ae||0==se.byteLength||null==ue)throw new Tt(2,3,3018,n?n.M()[0]:null);var me=ue/9e4*ae;d={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ae,duration:r,$a:[],ma:se,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:me,Ya:ie},stream:t};break;case"ec3":for(var ge=[],ve=0,ye=new Uint8Array([]),xe=null,we=c(u.Tb()),Se=we.next();!Se.done;Se=we.next()){var Te=Se.value,ke=Te.data;null==xe&&null!==Te.pts&&(xe=Te.pts);for(var Ce=0;Ce<ke.length;){var Ae=Rw(ke,Ce);Ae?(t.audioSamplingRate=Ae.sampleRate,t.channelsCount=Ae.channelCount,ve=Ae.sampleRate,ye=Ae.ma,ge.push({data:ke.subarray(Ce,Ce+Ae.ca),size:Ae.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ce+=Ae.ca):Ce++}}if(0==ve||0==ye.byteLength||null==xe)throw new Tt(2,3,3018,n?n.M()[0]:null);var Ee=xe/9e4*ve;d={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ve,duration:r,$a:[],ma:ye,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:Ee,Ya:ge},stream:t};break;case"mp3":for(var Ie,Me=[],Re=null,_e=c(u.Tb()),Le=_e.next();!Le.done;Le=_e.next()){var De=Le.value,Pe=De.data;if(Pe){null==Re&&null!==De.pts&&(Re=De.pts);for(var Oe=0;Oe<Pe.length;){var Ne=Ow(Pe,Oe);Ne?(Ie||(Ie=Ne),Oe+Ne.ca<=Pe.length&&Me.push({data:Pe.subarray(Oe,Oe+Ne.ca),size:Ne.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Oe+=Ne.ca):Oe++}}}if(!Ie||null==Re)throw new Tt(2,3,3018,n?n.M()[0]:null);var Ue=Ie.sampleRate,Be=Re/9e4*Ue;d={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ue,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:Be,Ya:Me},stream:t};break;case"opus":var je=[],Fe=null,ze=u.F;if(!ze)throw new Tt(2,3,3018,n?n.M()[0]:null);var Ge=[];switch(ze.Ch){case 1:case 2:Ge=[0];break;case 0:Ge=[255,1,1,0,1];break;case 128:Ge=[255,2,0,0,1];break;case 3:Ge=[1,2,1,0,2,1];break;case 4:Ge=[1,2,2,0,1,2,3];break;case 5:Ge=[1,3,2,0,4,1,2,3];break;case 6:Ge=[1,4,2,0,4,1,2,3,5];break;case 7:Ge=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ge=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ge=[1,1,2,0,1];break;case 131:Ge=[1,1,3,0,1,2];break;case 132:Ge=[1,1,4,0,1,2,3];break;case 133:Ge=[1,1,5,0,1,2,3,4];break;case 134:Ge=[1,1,6,0,1,2,3,4,5];break;case 135:Ge=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ge=[1,1,8,0,1,2,3,4,5,6,7]}for(var Ve=new Uint8Array([0,ze.channelCount,0,0,ze.sampleRate>>>24&255,ze.sampleRate>>>17&255,ze.sampleRate>>>8&255,ze.sampleRate>>>0&255,0,0].concat(f(Ge))),He=ze.sampleRate,qe=c(u.Tb()),Xe=qe.next();!Xe.done;Xe=qe.next()){var We=Xe.value,Ke=We.data;null==Fe&&null!==We.pts&&(Fe=We.pts);for(var $e=0;$e<Ke.length;){for(var Ye=!!(16&Ke[$e+1]),Qe=!!(8&Ke[$e+1]),Je=$e+2,Ze=0;255===Ke[Je];)Ze+=255,Je+=1;Ze+=Ke[Je],Je+=1,Je+=Ye?2:0,Je+=Qe?2:0;var et=Ke.slice(Je,Je+Ze);je.push({data:et,size:et.byteLength,duration:960,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),$e=Je+Ze}}if(0==Ve.byteLength||null==Fe)throw new Tt(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=ze.sampleRate,t.channelsCount=ze.channelCount;var tt=Fe/9e4*He;d={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:He,duration:r,$a:[],ma:Ve,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:tt,Ya:je},stream:t}}d&&(l.push(d),d=null)}}catch(st){return st&&3023==st.code?Promise.resolve(new Uint8Array([])):Promise.reject(st)}if(!l.length)return Promise.reject(new Tt(2,3,3018,n?n.M()[0]:null));var nt=new Gg(l),rt=t.id+"_"+n.i;if(this.i.has(rt))var ot=this.i.get(rt);else ot=Vg(nt),this.i.set(rt,ot);var it=Kg(nt);this.g++;var at=xn(ot,it);return Promise.resolve(at)},V("shaka.transmuxer.TsTransmuxer",Ww),Ww.prototype.transmux=Ww.prototype.transmux,Ww.prototype.getOriginalMimeType=Ww.prototype.getOriginalMimeType,Ww.prototype.convertCodecs=Ww.prototype.convertCodecs,Ww.prototype.isSupported=Ww.prototype.isSupported,Ww.prototype.destroy=Ww.prototype.destroy;var Kw,$w,Yw=["aac","ac-3","ec-3","mp3","opus"],Qw=["avc","hevc"];
/*
      		 @license
      		 EME Encryption Scheme Polyfill
      		 Copyright 2019 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/
function Jw(){}function Zw(){Kw||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Kw=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=eS,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function eS(e,t){var n,r=this;return O(function(o){return 1==o.g?(console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),S(o,Kw.call(r,e,t),2)):cS(n=o.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Kw,o.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=tS,o.return(tS.call(r,e,t)))})}function tS(e,t){var n,r,o,i,a,s,u,l,f,p,d,h,m=this;return O(function(g){if(1==g.g){for(console.assert(m==navigator,'bad "this" for requestMediaKeySystemAccess'),n=lS(e),r=[],o=c(t),i=o.next();!i.done;i=o.next())a=i.value,s=nS(a.videoCapabilities,n),u=nS(a.audioCapabilities,n),a.videoCapabilities&&a.videoCapabilities.length&&!s.length||a.audioCapabilities&&a.audioCapabilities.length&&!u.length||((l=Object.assign({},a)).videoCapabilities=s,l.audioCapabilities=u,r.push(l));if(!r.length)throw(f=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",f.code=DOMException.NOT_SUPPORTED_ERR,f;return S(g,Kw.call(m,e,r),2)}return p=g.h,h=d=null,r[0]&&(r[0].videoCapabilities&&(d=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(h=r[0].audioCapabilities[0].encryptionScheme)),g.return(new uS(p,d,h))})}function nS(e,t){return e?e.filter(function(e){return fS(e.encryptionScheme,t)}):e}function rS(){}function oS(){$w||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?($w=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=iS,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function iS(e){var t,n,r=this;return O(function(o){switch(o.g){case 1:return console.assert(r==navigator.mediaCapabilities,'bad "this" for decodingInfo'),S(o,$w.call(r,e),2);case 2:if(t=o.h,!e.keySystemConfiguration)return o.return(t);if((n=t.keySystemAccess)&&cS(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=$w,o.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=aS,n){o.u(3);break}return S(o,sS(e),4);case 4:return t.keySystemAccess=o.h,o.return(t);case 3:return o.return(aS.call(r,e))}})}function aS(e){var t,n,r,o,i,a,s,u=this;return O(function(l){switch(l.g){case 1:return console.assert(u==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=t=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,o=r.keySystem,n=r.audio&&r.audio.encryptionScheme,t=r.video&&r.video.encryptionScheme,i=lS(o),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},fS(n,i)&&fS(t,i))?S(l,$w.call(u,e),2):l.return(a);case 2:if((s=l.h).keySystemAccess){s.keySystemAccess=new uS(s.keySystemAccess,t,n),l.u(3);break}if(!e.keySystemConfiguration){l.u(3);break}return S(l,sS(e),5);case 5:s.keySystemAccess=l.h;case 3:return l.return(s)}})}function sS(e){var t,n;return O(function(r){if(1==r.g){var o=e.keySystemConfiguration,i=[],a=[];return o.audio&&i.push({robustness:o.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:o.audio.encryptionScheme}),o.video&&a.push({robustness:o.video.robustness||"",contentType:e.video.contentType,encryptionScheme:o.video.encryptionScheme}),o={initDataTypes:o.initDataType?[o.initDataType]:[],distinctiveIdentifier:o.distinctiveIdentifier,persistentState:o.persistentState,sessionTypes:o.sessionTypes},i.length&&(o.audioCapabilities=i),a.length&&(o.videoCapabilities=a),t=o,S(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}function uS(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function lS(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function cS(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function fS(e,t){return!e||e==t||!("cbcs"!=e&&"cbcs-1-9"!=e||!mS&&!hS)}function pS(){}function dS(){Zw(),oS()}Ze("video/mp2t",function(){return new Ww("video/mp2t")},ot),V("EmeEncryptionSchemePolyfill",Jw),Jw.install=Zw,V("McEncryptionSchemePolyfill",rS),rS.install=oS,uS.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=c(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(n=(t=c(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},uS.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},V("EncryptionSchemePolyfills",pS),pS.install=dS;var hS=navigator.userAgent.includes("CrKey"),mS=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);void 0!==n&&n.exports&&(n.exports=pS)}.call(n,t,t,void 0),n.shaka)e[r]=n.shaka[r]}()}(Mi)),Mi),Ui=Ei(Ni),Bi={playingState:!1},ji=function(){var e=i(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:if(Ui.polyfill.installAll(),_i=t){e.n=2;break}return(_i=document.createElement("video")).style.cssText="position: absolute; top: 0; left: 0; z-index: -1",_i.width=window.innerWidth,_i.height=window.innerHeight,Ri=new Ui.Player,e.n=1,Ri.attach(_i);case 1:_i.autoplay=!1,Ri.addEventListener("error",function(e){console.error(e)}),document.body.insertBefore(_i,document.body.firstChild);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Fi=function(){var e=i(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:if(Ri&&_i){e.n=1;break}throw"Player not initialized yet";case 1:return e.n=2,Ri.load(t.streamUrl);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),zi=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ri.destroy();case 1:Ri=null,_i.remove(),_i=null;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Gi={init:ji,load:Fi,play:function(){_i.play().then(function(){Bi.playingState=!0})},pause:function(){_i.pause(),Bi.playingState=!1},getCurrentTime:function(){return _i.currentTime},getVideoDuration:function(){return _i.duration},getTimeFormat:function(){var e=function(e){return new Date(1e3*e).toISOString().substr(14,5)};return"".concat(e(_i.currentTime)," : ").concat(e(Math.floor(_i.duration)))},state:Bi,destroy:zi},Vi=Go.Component("Player",{code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0;c[0]=this.element({parent:e||"root"},!0===f?l:t),c[0].populate({}),!0===f&&(p-=1),e=c[0];var d={};c[1]=this.element({parent:e||"root"},!0===f?l:t),d.y=1080,d.mount="{y:1}",d.w=1920,d.h=150,d.color={top:"0x00000000",bottom:"0x444444ff"},d.alpha={transition:t.controlsVisibility},c[1].populate(d),!0===f&&(p-=1),e=c[1];var h={};c[2]=this.element({parent:e||"root"},!0===f?l:t),h.x=60,h.y=50,c[2].populate(h),!0===f&&(p-=1),e=c[2];var m={};c[3]=this.element({parent:e||"root"},!0===f?l:t),m.w=60,m.h=60,m.color="0x0087ceeb",m.effects=[{type:"radius",props:{radius:16}}],c[3].populate(m),!0===f&&(p-=1),e=c[3];var g={};c[4]=this.element({parent:e||"root"},!0===f?l:t),g.y=14,g.x=14,g.w=32,g.h=32,g.src=t.playing?"assets/player/pause.png":"assets/player/play.png",c[4].populate(g),!0===f&&(p-=1),e=c[2];var v={};c[5]=this.element({parent:e||"root"},!0===f?l:t),v.y=22,v.x=100,v.w=t.progressLength,v.h=16,v.color="0xffffff80",v.effects=[{type:"radius",props:{radius:8}}],c[5].populate(v),!0===f&&(p-=1),e=c[5];var y={};c[6]=this.element({parent:e||"root"},!0===f?l:t),y.h=16,y.w={transition:{value:t.progress,d:100,f:"ease-in-out"}},y.effects=[{type:"radius",props:{radius:8}}],y.color="0x0087ceeb",c[6].populate(y),!0===f&&(p-=1);var b=n.components&&n.components.Circle||r.Circle;e=c[5];var x={};c[7]=this.element({parent:e||"root"},!0===f?l:t),x.size=28,x.color="0xffffffff",x.y="-6",x.x={transition:{value:t.progress-8,d:100,f:"ease-in-out"}};var w=[];if(void 0!==b)for(var S in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[S]],w.push(b[Symbol.for("config")].props[S]);c[7].populate(x),!0===f&&(p-=1),e=c[7];var T,k={};if(k.size=28,k.color="0xffffffff",k.y="-6",u={transition:{value:t.progress-8,d:100,f:"ease-in-out"}},!0===Array.isArray(u)&&(u=i(u).slice(0)),k.x=u,"string"==typeof(s=k.is||"Circle")){if(!(T=n.components&&n.components[s]||r[s]))throw new Error('Component "Circle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(T=s);c[8]=T.call(null,{props:k},c[7],t),c[8][Symbol.for("slots")][0]?(e=c[8][Symbol.for("slots")][0],l=c[8],f=!0):e=c[8][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[2];var C={};c[9]=this.element({parent:e||"root"},!0===f?l:t),C.x=1660,C.y=16,c[9].populate(C),!0===f&&(p-=1),e=c[9];var A={};c[10]=this.element({parent:e||"root"},!0===f?l:t),A.content=t.currentTime,A.size=25,A.__textnode=!0,c[10].populate(A),!0===f&&(p-=1),e=c[9];var E={};c[11]=this.element({parent:e||"root"},!0===f?l:t),E.x=70,E.size=25,E.content="/",E.__textnode=!0,c[11].populate(E),!0===f&&(p-=1),e=c[9];var I={};return c[12]=this.element({parent:e||"root"},!0===f?l:t),I.x=85,I.size=25,I.content=t.duration,I.__textnode=!0,c[12].populate(I),!0===f&&(p-=1),c},effects:[function(e,t,n,r,o,i){t[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(e,t,n,r,o,i){t[1].set("alpha",{transition:e.controlsVisibility})},function(e,t,n,r,o,i){t[3].set("effects",[{type:"radius",props:{radius:16}}])},function(e,t,n,r,o,i){t[4].set("src",e.playing?"assets/player/pause.png":"assets/player/play.png")},function(e,t,n,r,o,i){t[5].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[6].set("w",{transition:{value:e.progress,d:100,f:"ease-in-out"}})},function(e,t,n,r,o,i){t[6].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){"undefined"!=typeof skip7&&-1!==skip7.indexOf("x")||t[7].set("x",{transition:{value:e.progress-8,d:100,f:"ease-in-out"}})},function(e,t,n,r,o,i){t[8][Symbol.for("props")].x={transition:{value:e.progress-8,d:100,f:"ease-in-out"}}},function(e,t,n,r,o,i){t[10].set("content",e.currentTime)},function(e,t,n,r,o,i){t[12].set("content",e.duration)}],context:{}},state:function(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus:function(){this.$emit("clearBackground")},unfocus:function(){this.$emit("changeBackground")},init:function(){return i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Gi.init();case 1:return e.a(2)}},e)}))()},ready:function(){var e=this;return i(n().m(function t(){var r,o;return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Gi.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});case 1:r=function(e){return new Date(1e3*e).toISOString().substr(14,5)},(o=Gi.getVideoDuration())&&(e.duration=r(o),e.progressChunkSize=Math.round(e.progressLength/o*100)/100),e.$setInterval(function(){var t=Gi.getCurrentTime();e.currentTime=r(t),e.progress=Math.round(t*e.progressChunkSize)},1e3),e.play();case 2:return t.a(2)}},t)}))()},destroy:function(){return i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Gi.destroy();case 1:return e.a(2)}},e)}))()}},input:{space:function(){this.play()},up:function(){this.showControls(1)},down:function(){this.showControls(0)}},methods:{play:function(){var e=this;this.showControls(1),this.hideTimeout=this.$setTimeout(function(){return e.showControls(0)},3e3),1==Gi.state.playingState?(Gi.pause(),this.playing=!1):(console.log("play!"),Gi.play(),this.playing=!0)},showControls:function(e){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=e}}}),Hi=Go.Component("Colors",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=1920,u.h=1080,u.color={transition:t.bg},s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.x=20,l.y=20,s[1].populate(l),e=s[1];var c={};s[2]=this.element({parent:e||"root"},t),c.w=100,c.h=100,c.x=0,c.color="0xecfeffff",s[2].populate(c),e=s[1];var f={};s[3]=this.element({parent:e||"root"},t),f.w=100,f.h=100,f.x=120,f.color="0xa5f3fcff",s[3].populate(f),e=s[1];var p={};s[4]=this.element({parent:e||"root"},t),p.w=100,p.h=100,p.x=240,p.color="0x22d3eeff",s[4].populate(p),e=s[1];var d={};s[5]=this.element({parent:e||"root"},t),d.w=100,d.h=100,d.x=360,d.color="0x0891b2ff",s[5].populate(d),e=s[0];var h={};s[6]=this.element({parent:e||"root"},t),h.x=20,h.y=140,s[6].populate(h),e=s[6];var m={};s[7]=this.element({parent:e||"root"},t),m.w=100,m.h=100,m.x=0,m.color="0xecfeffff",s[7].populate(m),e=s[6];var g={};s[8]=this.element({parent:e||"root"},t),g.w=100,g.h=100,g.x=120,g.color="0xa5f3fcff",s[8].populate(g),e=s[6];var v={};s[9]=this.element({parent:e||"root"},t),v.w=100,v.h=100,v.x=240,v.color="0x22d3eeff",s[9].populate(v),e=s[6];var y={};s[10]=this.element({parent:e||"root"},t),y.w=100,y.h=100,y.x=360,y.color="0x0891b2ff",s[10].populate(y),e=s[0];var b={};s[11]=this.element({parent:e||"root"},t),b.x=20,b.y=260,s[11].populate(b),e=s[11];var x={};s[12]=this.element({parent:e||"root"},t),x.w=100,x.h=100,x.x=0,x.color="0xecfeffaa",s[12].populate(x),e=s[11];var w={};s[13]=this.element({parent:e||"root"},t),w.w=100,w.h=100,w.x=120,w.color="0xa5f3fc33",s[13].populate(w),e=s[11];var S={};s[14]=this.element({parent:e||"root"},t),S.w=100,S.h=100,S.x=240,S.color="0x22d3ee20",s[14].populate(S),e=s[11];var T={};s[15]=this.element({parent:e||"root"},t),T.w=100,T.h=100,T.x=360,T.color="0x0891b2ff",s[15].populate(T),e=s[0];var k={};s[16]=this.element({parent:e||"root"},t),k.x=20,k.y=380,s[16].populate(k),e=s[16];var C={};s[17]=this.element({parent:e||"root"},t),C.w=100,C.h=100,C.x=0,C.color="0xecfeffff",s[17].populate(C),e=s[16];var A={};s[18]=this.element({parent:e||"root"},t),A.w=100,A.h=100,A.x=120,A.color="0xa5f3fcff",s[18].populate(A),e=s[16];var E={};s[19]=this.element({parent:e||"root"},t),E.w=100,E.h=100,E.x=240,E.color="0x22d3eeff",s[19].populate(E),e=s[16];var I={};s[20]=this.element({parent:e||"root"},t),I.w=100,I.h=100,I.x=360,I.color="0x0891b2ff",s[20].populate(I),e=s[0];var M={};s[21]=this.element({parent:e||"root"},t),M.x=20,M.y=500,s[21].populate(M),e=s[21];var R={};s[22]=this.element({parent:e||"root"},t),R.w=100,R.h=100,R.x=0,R.color="0xecfeffab",s[22].populate(R),e=s[21];var _={};s[23]=this.element({parent:e||"root"},t),_.w=100,_.h=100,_.x=120,_.color="0xa5f3fc33",s[23].populate(_),e=s[21];var L={};s[24]=this.element({parent:e||"root"},t),L.w=100,L.h=100,L.x=240,L.color="0x22d3ee21",s[24].populate(L),e=s[21];var D={};s[25]=this.element({parent:e||"root"},t),D.w=100,D.h=100,D.x=360,D.color="0x0891b2ff",s[25].populate(D),e=s[0];var P={};s[26]=this.element({parent:e||"root"},t),P.x=20,P.y=620,s[26].populate(P),e=s[26];var O={};s[27]=this.element({parent:e||"root"},t),O.w=100,O.h=100,O.x=0,O.color="0x000000ff",s[27].populate(O),e=s[26];var N={};s[28]=this.element({parent:e||"root"},t),N.w=100,N.h=100,N.x=120,N.color="0xccccccff",s[28].populate(N),e=s[26];var U={};s[29]=this.element({parent:e||"root"},t),U.w=100,U.h=100,U.x=240,U.color="0x889900ff",s[29].populate(U),e=s[26];var B={};s[30]=this.element({parent:e||"root"},t),B.w=100,B.h=100,B.x=360,B.color="0x00ff00ff",s[30].populate(B),e=s[0];var j={};s[31]=this.element({parent:e||"root"},t),j.x=20,j.y=740,s[31].populate(j),e=s[31];var F={};s[32]=this.element({parent:e||"root"},t),F.w=100,F.h=100,F.x=0,F.color="0x000000ff",s[32].populate(F),e=s[31];var z={};s[33]=this.element({parent:e||"root"},t),z.w=100,z.h=100,z.x=120,z.color="0xccccccff",s[33].populate(z),e=s[31];var G={};s[34]=this.element({parent:e||"root"},t),G.w=100,G.h=100,G.x=240,G.color="0x889900ff",s[34].populate(G),e=s[31];var V={};s[35]=this.element({parent:e||"root"},t),V.w=100,V.h=100,V.x=360,V.color="0x00ff00ff",s[35].populate(V),e=s[0];var H={};s[36]=this.element({parent:e||"root"},t),H.x=620,H.y=20,s[36].populate(H),e=s[36];var q={};s[37]=this.element({parent:e||"root"},t),q.w=300,q.h=200,q.x=0,q.color={transition:t.color1},s[37].populate(q),e=s[36];var X={};s[38]=this.element({parent:e||"root"},t),X.w=300,X.h=200,X.x=0,X.y=250,X.color={transition:t.color2},s[38].populate(X),e=s[36];var W={};s[39]=this.element({parent:e||"root"},t),W.w=300,W.h=200,W.x=100,W.y=400,W.color={transition:t.color3},s[39].populate(W),e=s[36];var K={};return s[40]=this.element({parent:e||"root"},t),K.w=300,K.h=200,K.x=0,K.y=650,K.color={transition:{value:t.color4,d:1e3,f:"ease-in-out"}},s[40].populate(K),s},effects:[function(e,t,n,r,o,i){t[0].set("color",{transition:e.bg})},function(e,t,n,r,o,i){t[37].set("color",{transition:e.color1})},function(e,t,n,r,o,i){t[38].set("color",{transition:e.color2})},function(e,t,n,r,o,i){t[39].set("color",{transition:e.color3})},function(e,t,n,r,o,i){t[40].set("color",{transition:{value:e.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state:function(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter:function(){this.color1="#0891b2"===this.color1?"#22d3ee":"#0891b2",this.color2="#dc2626"===this.color2?"#0f0":"#dc2626",this.color3="rgba(251, 191, 36)"===this.color3?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4="#1e3a8a"===this.color4?"#bfdbfe":"#1e3a8a"}},hooks:{ready:function(){var e=this,t=0,n=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(function(){(t+=1)===n.length-1&&(t=0),e.bg=n[t]},2e3)}}}),qi=Go.Component("Gradients",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.w=480,u.h=1080,u.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",s[1].populate(u),e=s[0];var l={};s[2]=this.element({parent:e||"root"},t),l.w=480,l.h=1080,l.x=480,l.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",s[2].populate(l),e=s[0];var c={};s[3]=this.element({parent:e||"root"},t),c.w=480,c.h=1080,c.x=960,c.color="{top: '0x0891b2ff', right: '0xf87171ff'}",s[3].populate(c),e=s[0];var f={};return s[4]=this.element({parent:e||"root"},t),f.w=480,f.h=1080,f.x=1440,f.color="{right: '0x008000ff', bottom: '0xffd700ff'}",s[4].populate(f),s},effects:[function(e,t,n,r,o,i){t[1].set("w",480)},function(e,t,n,r,o,i){t[2].set("w",480)},function(e,t,n,r,o,i){t[2].set("x",480)},function(e,t,n,r,o,i){t[3].set("w",480)},function(e,t,n,r,o,i){t[3].set("x",960)},function(e,t,n,r,o,i){t[4].set("w",480)},function(e,t,n,r,o,i){t[4].set("x",1440)}],context:{}}}),Xi=Go.Component("Transitions",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.x=60,s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.w=200,l.h=200,l.x=50,l.y={transition:t.y},l.color="0xc4b5fdff",s[1].populate(l),e=s[0];var c={};s[2]=this.element({parent:e||"root"},t),c.w=200,c.h=200,c.x=300,c.y={transition:{value:t.y}},c.color="0xa78bfaff",s[2].populate(c),e=s[0];var f={};s[3]=this.element({parent:e||"root"},t),f.w=200,f.h=200,f.x=550,f.y={transition:{value:t.y,duration:1e3,start:t.start,end:t.doneTransition3}},f.color="0x8b5cf6ff",f.ref="bla",s[3].populate(f),e=s[0];var p={};s[4]=this.element({parent:e||"root"},t),p.w=200,p.h=200,p.x=800,p.y={transition:{value:t.y,duration:500,delay:500,start:t.start,end:t.finished}},p.color="0x7c3aedff",s[4].populate(p),e=s[0];var d={};s[5]=this.element({parent:e||"root"},t),d.w=200,d.h=200,d.x=1050,d.y={transition:{value:t.y,easing:"ease-in-out",end:t.finished}},d.color="0x6d28d9ff",s[5].populate(d),e=s[0];var h={};s[6]=this.element({parent:e||"root"},t),h.w=200,h.h=200,h.x=1300,h.y={transition:{value:t.y,duration:3e3,easing:"ease-in-out-back",end:t.finished}},h.color="0x5b21b6ff",s[6].populate(h),e=s[0];var m={};return s[7]=this.element({parent:e||"root"},t),m.w=200,m.h=200,m.x=1550,m.y={transition:{value:t.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},m.color="0x4c1d95ff",s[7].populate(m),s},effects:[function(e,t,n,r,o,i){t[1].set("y",{transition:e.y})},function(e,t,n,r,o,i){t[2].set("y",{transition:{value:e.y}})},function(e,t,n,r,o,i){t[3].set("y",{transition:{value:e.y,duration:1e3,start:e.start,end:e.doneTransition3}})},function(e,t,n,r,o,i){t[4].set("y",{transition:{value:e.y,duration:500,delay:500,start:e.start,end:e.finished}})},function(e,t,n,r,o,i){t[5].set("y",{transition:{value:e.y,easing:"ease-in-out",end:e.finished}})},function(e,t,n,r,o,i){t[6].set("y",{transition:{value:e.y,duration:3e3,easing:"ease-in-out-back",end:e.finished}})},function(e,t,n,r,o,i){t[7].set("y",{transition:{value:e.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state:function(){return{y:50}},hooks:{init:function(){var e=this;this.$setInterval(function(){e.go()},12e3),this.go()}},methods:{doneTransition3:function(){this.$log.info("Transition 3 is done!")},start:function(e,t,n){this.$log.info("Start transition",e.nodeId,t,n)},finished:function(e,t,n){this.$log.info("Finished transition",e.nodeId,t,n)},go:function(){var e=this;this.y=50,this.$setTimeout(function(){e.y=830},1e3),this.$setTimeout(function(){e.y=50,e.$setTimeout(function(){e.y=200},1e3)},6e3)}}}),Wi=Go.Component("Alpha",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.y=100,s[1].populate(u),e=s[1];var l={};s[2]=this.element({parent:e||"root"},t),l.w=200,l.h=200,l.x=100,l.color="0xffffffff",l.alpha=.2,s[2].populate(l),e=s[1];var c={};s[3]=this.element({parent:e||"root"},t),c.w=200,c.h=200,c.x=320,c.color="0xffffffff",c.alpha=.4,s[3].populate(c),e=s[1];var f={};s[4]=this.element({parent:e||"root"},t),f.w=200,f.h=200,f.x=540,f.color="0xffffffff",f.alpha=.6,s[4].populate(f),e=s[1];var p={};s[5]=this.element({parent:e||"root"},t),p.w=200,p.h=200,p.x=760,p.color="0xffffffff",p.alpha=.8,s[5].populate(p),e=s[1];var d={};s[6]=this.element({parent:e||"root"},t),d.w=200,d.h=200,d.x=980,d.color="0xffffffff",d.alpha=1,s[6].populate(d),e=s[0];var h={};s[7]=this.element({parent:e||"root"},t),h.w=200,h.h=200,h.x=100,h.y=320,h.color="0xffffffff",h.alpha=t.alpha,s[7].populate(h),e=s[0];var m={};s[8]=this.element({parent:e||"root"},t),m.w=200,m.h=200,m.x=100,m.y=540,m.color="0xffffffff",m.alpha=t.alpha,s[8].populate(m),e=s[0];var g={};s[9]=this.element({parent:e||"root"},t),g.w=200,g.h=200,g.x=100,g.y=760,g.color="0xffffffff",g.alpha={transition:{value:t.alpha,duration:1e3,easing:"ease-in-out-circ"}},s[9].populate(g),e=s[0];var v={};s[10]=this.element({parent:e||"root"},t),v.w=428,v.h=234,v.x=1200,v.y=100,v.src=t.image,v.alpha=1,s[10].populate(v),e=s[0];var y={};s[11]=this.element({parent:e||"root"},t),y.w=428,y.h=234,y.x=1300,y.y=294,y.src=t.image,y.alpha=.4,s[11].populate(y),e=s[0];var b={};s[12]=this.element({parent:e||"root"},t),b.w=428,b.h=234,b.x=1200,b.y=488,b.src=t.image,b.alpha=.1,s[12].populate(b),e=s[0];var x={};s[13]=this.element({parent:e||"root"},t),x.x=400,x.y=400,x.alpha=.2,x.content="Text with alpha applied directly",x.__textnode=!0,s[13].populate(x),e=s[0];var w={};s[14]=this.element({parent:e||"root"},t),w.alpha=.5,w.x=400,w.y=500,s[14].populate(w),e=s[14];var S={};return s[15]=this.element({parent:e||"root"},t),S.content="Text with alpha applied on parent element",S.__textnode=!0,s[15].populate(S),s},effects:[function(e,t,n,r,o,i){t[8].set("alpha",e.alpha)},function(e,t,n,r,o,i){t[9].set("alpha",{transition:{value:e.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(e,t,n,r,o,i){t[10].set("src",e.image)},function(e,t,n,r,o,i){t[11].set("y",294)},function(e,t,n,r,o,i){t[11].set("src",e.image)},function(e,t,n,r,o,i){t[12].set("y",488)},function(e,t,n,r,o,i){t[12].set("src",e.image)}],context:{}},state:function(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t="up"===e.direction?e.alpha+.2:e.alpha-.2;e.alpha=Math.max(Math.min(t,1),.1),1===e.alpha&&(e.direction="down"),.1===e.alpha&&(e.direction="up")},1400)}}}),Ki=Go.Component("Scaling",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.x=100,u.y=100,u.w=150,u.h=150,u.color="0x64748bff",s[1].populate(u),e=s[0];var l={};s[2]=this.element({parent:e||"root"},t),l.x=300,l.y=100,l.w=100,l.h=100,l.color="0x64748bff",l.scale=1.5,s[2].populate(l),e=s[0];var c={};s[3]=this.element({parent:e||"root"},t),c.x=100,c.y=400,c.w=100,c.h=100,c.color="0xb45309ff",c.scale=t.scale,s[3].populate(c),e=s[0];var f={};s[4]=this.element({parent:e||"root"},t),f.x=900,f.y=400,f.w=100,f.h=100,f.src=t.balloon,f.scale={transition:{value:t.scale,easing:"ease-in-out"}},s[4].populate(f),e=s[0];var p={};s[5]=this.element({parent:e||"root"},t),p.x=300,p.y=600,p.w=100,p.h=100,p.color="0x059669ff",p.scale=t.scale2,s[5].populate(p),e=s[5];var d={};s[6]=this.element({parent:e||"root"},t),d.x=10,d.y=10,d.h=60,d.w=80,d.color="0x0369a1ff",s[6].populate(d),e=s[0];var h={};s[7]=this.element({parent:e||"root"},t),h.x=1500,h.y=600,h.w=100,h.h=100,h.color="0x059669ff",h.scale=t.scale2,s[7].populate(h),e=s[7];var m={};return s[8]=this.element({parent:e||"root"},t),m.x=10,m.y=10,m.h=60,m.w=80,m.color="0x0369a1ff",m.scale=t.scale2/2,s[8].populate(m),s},effects:[function(e,t,n,r,o,i){t[4].set("src",e.balloon)},function(e,t,n,r,o,i){t[4].set("scale",{transition:{value:e.scale,easing:"ease-in-out"}})},function(e,t,n,r,o,i){t[5].set("scale",e.scale2)},function(e,t,n,r,o,i){t[7].set("scale",e.scale2)},function(e,t,n,r,o,i){t[8].set("scale",e.scale2/2)}],context:{}},state:function(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t="up"===e.direction?e.scale+.5:0;e.scale=Math.max(Math.min(t,8),0),8===e.scale&&(e.direction="down"),0===e.scale&&(e.direction="up")},500),this.$setInterval(function(){e.scale2=1===e.scale2?3:1},2e3)}}}),$i=Go.Component("Rotation",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.y=70,s[1].populate(u),e=s[1];var l={};s[2]=this.element({parent:e||"root"},t),l.x=100,l.y=0,l.w=200,l.h=100,l.color="0xfee2e2ff",l.rotation=0,s[2].populate(l),e=s[1];var c={};s[3]=this.element({parent:e||"root"},t),c.x=100,c.y=150,c.w=200,c.h=100,c.color="0xfecacaff",c.rotation=10,s[3].populate(c),e=s[1];var f={};s[4]=this.element({parent:e||"root"},t),f.x=100,f.y=300,f.w=200,f.h=100,f.color="0xfca5a5ff",f.rotation=20,s[4].populate(f),e=s[1];var p={};s[5]=this.element({parent:e||"root"},t),p.x=100,p.y=450,p.w=200,p.h=100,p.color="0xf87171ff",p.rotation=30,s[5].populate(p),e=s[1];var d={};s[6]=this.element({parent:e||"root"},t),d.x=100,d.y=610,d.w=200,d.h=100,d.color="0xef4444ff",d.rotation=40,s[6].populate(d),e=s[1];var h={};s[7]=this.element({parent:e||"root"},t),h.x=100,h.y=800,h.w=200,h.h=100,h.color="0xdc2626ff",h.rotation=50,s[7].populate(h),e=s[0];var m={};s[8]=this.element({parent:e||"root"},t),m.y=70,m.x=300,s[8].populate(m),e=s[8];var g={};s[9]=this.element({parent:e||"root"},t),g.x=100,g.y=0,g.w=200,g.h=100,g.color="0xfee2e2ff",g.rotation=60,s[9].populate(g),e=s[8];var v={};s[10]=this.element({parent:e||"root"},t),v.x=100,v.y=150,v.w=200,v.h=100,v.color="0xfecacaff",v.rotation=70,s[10].populate(v),e=s[8];var y={};s[11]=this.element({parent:e||"root"},t),y.x=100,y.y=300,y.w=200,y.h=100,y.color="0xfca5a5ff",y.rotation=80,s[11].populate(y),e=s[8];var b={};s[12]=this.element({parent:e||"root"},t),b.x=100,b.y=450,b.w=200,b.h=100,b.color="0xf87171ff",b.rotation=90,s[12].populate(b),e=s[8];var x={};s[13]=this.element({parent:e||"root"},t),x.x=100,x.y=610,x.w=200,x.h=100,x.color="0xef4444ff",x.rotation=100,s[13].populate(x),e=s[8];var w={};s[14]=this.element({parent:e||"root"},t),w.x=100,w.y=800,w.w=200,w.h=100,w.color="0xdc2626ff",w.rotation=100,s[14].populate(w),e=s[0];var S={};s[15]=this.element({parent:e||"root"},t),S.y=70,S.x=600,s[15].populate(S),e=s[15];var T={};s[16]=this.element({parent:e||"root"},t),T.x=100,T.y=0,T.w=200,T.h=100,T.color="0xfee2e2ff",T.rotation=110,s[16].populate(T),e=s[15];var k={};s[17]=this.element({parent:e||"root"},t),k.x=100,k.y=150,k.w=200,k.h=100,k.color="0xfecacaff",k.rotation=120,s[17].populate(k),e=s[15];var C={};s[18]=this.element({parent:e||"root"},t),C.x=100,C.y=300,C.w=200,C.h=100,C.color="0xfca5a5ff",C.rotation=130,s[18].populate(C),e=s[15];var A={};s[19]=this.element({parent:e||"root"},t),A.x=100,A.y=450,A.w=200,A.h=100,A.color="0xf87171ff",A.rotation=140,s[19].populate(A),e=s[15];var E={};s[20]=this.element({parent:e||"root"},t),E.x=100,E.y=610,E.w=200,E.h=100,E.color="0xef4444ff",E.rotation=150,s[20].populate(E),e=s[15];var I={};s[21]=this.element({parent:e||"root"},t),I.x=100,I.y=800,I.w=200,I.h=100,I.color="0xdc2626ff",I.rotation=160,s[21].populate(I),e=s[0];var M={};s[22]=this.element({parent:e||"root"},t),M.y=70,M.x=900,s[22].populate(M),e=s[22];var R={};s[23]=this.element({parent:e||"root"},t),R.x=100,R.y=0,R.w=200,R.h=100,R.color="0xfee2e2ff",R.rotation=170,s[23].populate(R),e=s[22];var _={};s[24]=this.element({parent:e||"root"},t),_.x=100,_.y=150,_.w=200,_.h=100,_.color="0xfecacaff",_.rotation=180,s[24].populate(_),e=s[22];var L={};s[25]=this.element({parent:e||"root"},t),L.x=100,L.y=300,L.w=200,L.h=100,L.color="0xfca5a5ff",L.rotation=190,s[25].populate(L),e=s[22];var D={};s[26]=this.element({parent:e||"root"},t),D.x=100,D.y=450,D.w=200,D.h=100,D.color="0xf87171ff",D.rotation=200,s[26].populate(D),e=s[22];var P={};s[27]=this.element({parent:e||"root"},t),P.x=100,P.y=610,P.w=200,P.h=100,P.color="0xef4444ff",P.rotation=210,s[27].populate(P),e=s[22];var O={};s[28]=this.element({parent:e||"root"},t),O.x=100,O.y=800,O.w=200,O.h=100,O.color="0xdc2626ff",O.rotation=220,s[28].populate(O),e=s[0];var N={};s[29]=this.element({parent:e||"root"},t),N.y=70,N.x=1200,s[29].populate(N),e=s[29];var U={};s[30]=this.element({parent:e||"root"},t),U.x=100,U.y=0,U.w=200,U.h=100,U.color="0xfee2e2ff",U.rotation=230,s[30].populate(U),e=s[29];var B={};s[31]=this.element({parent:e||"root"},t),B.x=100,B.y=150,B.w=200,B.h=100,B.color="0xfecacaff",B.rotation=240,s[31].populate(B),e=s[29];var j={};s[32]=this.element({parent:e||"root"},t),j.x=100,j.y=300,j.w=200,j.h=100,j.color="0xfca5a5ff",j.rotation=250,s[32].populate(j),e=s[29];var F={};s[33]=this.element({parent:e||"root"},t),F.x=100,F.y=450,F.w=200,F.h=100,F.color="0xf87171ff",F.rotation=260,s[33].populate(F),e=s[29];var z={};s[34]=this.element({parent:e||"root"},t),z.x=100,z.y=610,z.w=200,z.h=100,z.color="0xef4444ff",z.rotation=270,s[34].populate(z),e=s[29];var G={};s[35]=this.element({parent:e||"root"},t),G.x=100,G.y=800,G.w=200,G.h=100,G.color="0xdc2626ff",G.rotation=280,s[35].populate(G),e=s[0];var V={};s[36]=this.element({parent:e||"root"},t),V.y=70,V.x=1500,s[36].populate(V),e=s[36];var H={};s[37]=this.element({parent:e||"root"},t),H.x=100,H.y=0,H.w=200,H.h=100,H.color="0xfee2e2ff",H.rotation=290,s[37].populate(H),e=s[36];var q={};s[38]=this.element({parent:e||"root"},t),q.x=100,q.y=150,q.w=200,q.h=100,q.color="0xfecacaff",q.rotation=300,s[38].populate(q),e=s[36];var X={};s[39]=this.element({parent:e||"root"},t),X.x=100,X.y=300,X.w=200,X.h=100,X.color="0xfca5a5ff",X.rotation=310,s[39].populate(X),e=s[36];var W={};s[40]=this.element({parent:e||"root"},t),W.x=100,W.y=450,W.w=200,W.h=100,W.color="0xf87171ff",W.rotation=320,s[40].populate(W),e=s[36];var K={};s[41]=this.element({parent:e||"root"},t),K.x=100,K.y=610,K.w=200,K.h=100,K.color="0xef4444ff",K.rotation=330,s[41].populate(K),e=s[36];var $={};s[42]=this.element({parent:e||"root"},t),$.x=100,$.y=800,$.w=200,$.h=100,$.color="0xdc2626ff",$.rotation=340,s[42].populate($),e=s[0];var Y={};s[43]=this.element({parent:e||"root"},t),Y.x=200,Y.y=200,Y.w=400,Y.h=400,Y.color="0x0891b2ff",Y.rotation=t.rotation1,s[43].populate(Y),e=s[0];var Q={};s[44]=this.element({parent:e||"root"},t),Q.x=800,Q.y=200,Q.w=400,Q.h=400,Q.color="0x0891b2ff",Q.rotation=t.rotation2,s[44].populate(Q),e=s[0];var J={};return s[45]=this.element({parent:e||"root"},t),J.x=1400,J.y=200,J.w=400,J.h=400,J.color="0x0891b2ff",J.rotation={transition:t.rotation3},s[45].populate(J),s},effects:[function(e,t,n,r,o,i){t[44].set("rotation",e.rotation2)},function(e,t,n,r,o,i){t[45].set("rotation",{transition:e.rotation3})}],context:{}},state:function(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t=e.rotation2+10;e.rotation2=t<=360?t:0},800),this.$setInterval(function(){e.rotation3=Math.max(10,Math.min(720,2*e.rotation3)),720===e.rotation3&&(e.rotation3=0)},2e3)}}}),Yi=Go.Component("KeyInput",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.x=525,u.y=130,s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.w=200,l.h=200,l.color=t.focusColor,l.x=220*t.focusedX,l.y=210*t.focusedY,s[1].populate(l),e=s[0];var c={};s[2]=this.element({parent:e||"root"},t),c.w=180,c.h=180,c.x=10,c.y=10,c.color=t.blockColor,s[2].populate(c),e=s[0];var f={};s[3]=this.element({parent:e||"root"},t),f.w=180,f.h=180,f.x=230,f.y=10,f.color=t.blockColor,s[3].populate(f),e=s[0];var p={};s[4]=this.element({parent:e||"root"},t),p.w=180,p.h=180,p.x=450,p.y=10,p.color=t.blockColor,s[4].populate(p),e=s[0];var d={};s[5]=this.element({parent:e||"root"},t),d.w=180,d.h=180,d.x=670,d.y=10,d.color=t.blockColor,s[5].populate(d),e=s[0];var h={};s[6]=this.element({parent:e||"root"},t),h.w=180,h.h=180,h.x=10,h.y=220,h.color=t.blockColor,s[6].populate(h),e=s[0];var m={};s[7]=this.element({parent:e||"root"},t),m.w=180,m.h=180,m.x=230,m.y=220,m.color=t.blockColor,s[7].populate(m),e=s[0];var g={};s[8]=this.element({parent:e||"root"},t),g.w=180,g.h=180,g.x=450,g.y=220,g.color=t.blockColor,s[8].populate(g),e=s[0];var v={};s[9]=this.element({parent:e||"root"},t),v.w=180,v.h=180,v.x=670,v.y=220,v.color=t.blockColor,s[9].populate(v),e=s[0];var y={};s[10]=this.element({parent:e||"root"},t),y.w=180,y.h=180,y.x=10,y.y=430,y.color=t.blockColor,s[10].populate(y),e=s[0];var b={};s[11]=this.element({parent:e||"root"},t),b.w=180,b.h=180,b.x=230,b.y=430,b.color=t.blockColor,s[11].populate(b),e=s[0];var x={};s[12]=this.element({parent:e||"root"},t),x.w=180,x.h=180,x.x=450,x.y=430,x.color=t.blockColor,s[12].populate(x),e=s[0];var w={};s[13]=this.element({parent:e||"root"},t),w.w=180,w.h=180,w.x=670,w.y=430,w.color=t.blockColor,s[13].populate(w),e=s[0];var S={};s[14]=this.element({parent:e||"root"},t),S.w=180,S.h=180,S.x=10,S.y=640,S.color=t.blockColor,s[14].populate(S),e=s[0];var T={};s[15]=this.element({parent:e||"root"},t),T.w=180,T.h=180,T.x=230,T.y=640,T.color=t.blockColor,s[15].populate(T),e=s[0];var k={};s[16]=this.element({parent:e||"root"},t),k.w=180,k.h=180,k.x=450,k.y=640,k.color=t.blockColor,s[16].populate(k),e=s[0];var C={};return s[17]=this.element({parent:e||"root"},t),C.w=180,C.h=180,C.x=670,C.y=640,C.color=t.blockColor,s[17].populate(C),s},effects:[function(e,t,n,r,o,i){t[1].set("color",e.focusColor)},function(e,t,n,r,o,i){t[1].set("x",220*e.focusedX)},function(e,t,n,r,o,i){t[1].set("y",210*e.focusedY)},function(e,t,n,r,o,i){t[2].set("color",e.blockColor)},function(e,t,n,r,o,i){t[3].set("color",e.blockColor)},function(e,t,n,r,o,i){t[4].set("color",e.blockColor)},function(e,t,n,r,o,i){t[5].set("color",e.blockColor)},function(e,t,n,r,o,i){t[6].set("color",e.blockColor)},function(e,t,n,r,o,i){t[7].set("color",e.blockColor)},function(e,t,n,r,o,i){t[8].set("color",e.blockColor)},function(e,t,n,r,o,i){t[9].set("color",e.blockColor)},function(e,t,n,r,o,i){t[10].set("color",e.blockColor)},function(e,t,n,r,o,i){t[11].set("color",e.blockColor)},function(e,t,n,r,o,i){t[12].set("color",e.blockColor)},function(e,t,n,r,o,i){t[13].set("color",e.blockColor)},function(e,t,n,r,o,i){t[14].set("color",e.blockColor)},function(e,t,n,r,o,i){t[15].set("color",e.blockColor)},function(e,t,n,r,o,i){t[16].set("color",e.blockColor)},function(e,t,n,r,o,i){t[17].set("color",e.blockColor)}],context:{}},state:function(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor:function(){return this.colorscheme,"yellow"===this.colorscheme?"#fef08a":"#bae6fd"},focusColor:function(){return this.colorscheme,"yellow"===this.colorscheme?"#facc15":"#38bdf8"}},input:{left:function(){var e=this.focusedX-1;this.focusedX=Math.max(e,0)},right:function(){var e=this.focusedX+1;this.focusedX=Math.min(e,3)},up:function(){this.focusedY=Math.max(this.focusedY-1,0)},down:function(){this.focusedY=Math.min(this.focusedY+1,3)},enter:function(){this.colorscheme="yellow"===this.colorscheme?"blue":"yellow"},any:function(e){var t=parseInt(e.key);isNaN(t)?this.parent.$focus(e):(this.focusedX=Math.max(0,(t-1)%4),this.focusedY=Math.max(0,Math.ceil(t/4)-1))}}}),Qi=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],Ji=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],Zi=Go.Component("Texts",{code:{render:function(e,t,n,r,o,i,a){var s=this,u=[],l={};u[0]=this.element({parent:e||"root"},t),l.x=100,l.y=100,u[0].populate(l),e=u[0];var c={};u[1]=this.element({parent:e||"root"},t),c.content="Default text",c["@loaded"]=t.textLoaded&&t.textLoaded.bind(t),c.__textnode=!0,u[1].populate(c),e=u[0];var f={};u[2]=this.element({parent:e||"root"},t),f.content="123456",f.x=400,f.__textnode=!0,u[2].populate(f),e=u[0];var p={};u[3]=this.element({parent:e||"root"},t),p.content="Text with a different fontsize",p.size=t.size,p.y=120,p.font="raleway",p.__textnode=!0,u[3].populate(p),e=u[0];var d={};u[4]=this.element({parent:e||"root"},t),d.content="Text with a different color",d.size=50,d.color=t.color,d.y=250,d.__textnode=!0,u[4].populate(d),e=u[0];var h={};u[5]=this.element({parent:e||"root"},t),h.content="Letterspacing",h.size=50,h.color="0x38bdf8ff",h.y=450,h.letterspacing=40,h.__textnode=!0,u[5].populate(h),e=u[0];var m={};u[6]=this.element({parent:e||"root"},t),m.w=800,m.h=100,m.y=550,m.color="0x94a3b8ff",u[6].populate(m),e=u[6];var g={};u[7]=this.element({parent:e||"root"},t),g.content="Text align center",g.size=50,g.y=15,g.color="0xbae6fdff",g.align="center",g.maxwidth=800,g.__textnode=!0,u[7].populate(g),e=u[0];var v={};u[8]=this.element({parent:e||"root"},t),v.w=800,v.h=200,v.x=900,v.y=550,v.color="0x94a3b8ff",u[8].populate(v),e=u[8];var y={};u[9]=this.element({parent:e||"root"},t),y.content=t.longText,y.size=40,y.color="0xbae6fdff",y.maxwidth=800,y.maxlines=5,y.textoverflow="!!!",y.__textnode=!0,u[9].populate(y),e=u[0];var b={};u[10]=this.element({parent:e||"root"},t),b.w=800,b.h=120,b.x=900,b.y=800,b.color="0x94a3b8ff",u[10].populate(b),e=u[10];var x={};u[11]=this.element({parent:e||"root"},t),x.content=t.longText,x.size=40,x.color="0xbae6fdff",x.maxwidth=800,x.maxlines=2,x.lineheight=60,x.textoverflow=!1,x.__textnode=!0,u[11].populate(x),e=u[0];var w={};u[12]=this.element({parent:e||"root"},t),w.content=t.character,w.size=50,w.color=t.color,w.y=750,w.font="opensans",w.__textnode=!0,u[12].populate(w),e=u[0];var S={};u[13]=this.element({parent:e||"root"},t),S.x=1200,S.y=300,u[13].populate(S),e=u[13];var T={};u[14]=this.element({parent:e||"root"},t),T.rotation={transition:t.rotation},T.pivot=0,T.content="Hello",T.__textnode=!0,u[14].populate(T),e=u[13];var k={};u[15]=this.element({parent:e||"root"},t),k.x=150,k.rotation={transition:t.rotation},k.pivot=.5,k.content="World",k.__textnode=!0,u[15].populate(k),e=u[13];var C={};u[16]=this.element({parent:e||"root"},t),C.x=300,C.rotation={transition:t.rotation},C.pivot=1,C.content="!!",C.__textnode=!0,u[16].populate(C),e=u[0];var A={};u[17]=this.element({parent:e||"root"},t),A.x=500,A.y=700,u[17].populate(A),e=u[17];var E,I,M,R=[],_=function(){t[Symbol.for("removeGlobalEffects")](M),M=null,M=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),u=new Set,l=a.length,c={};E=c.from||0,I="to"in c?c.to:a.length;for(;l--;)a[l],l<I&&l>=E&&u.add(""+l);for(var f=r.length;f--;)if(!1===u.has(r[f])){var p=r[f];n[18][p]&&n[18][p].destroy(),delete n[18][p]}r.length=0;for(var d=a.length,h=[],m=function(){if(g<E||g>=I)return 1;var i=Object.create(t);e=n[17],i.text=a[g],i.index=g,i.key=""+g,r.push(i.key),e=n[17],void 0===n[18]&&(n[18]={});var u={};void 0===n[18][i.key]&&(n[18][i.key]=s.element({parent:e||"root"},t)),u.content=i.text,u.y=50*i.index,u.__textnode=!0,void 0===n[18][i.key].nodeId&&n[18][i.key].populate(u);var l=function(){n[18][i.key].set("y",50*i.index)};o(l,null),h.push(l),t[Symbol.for("effects")].push(l)},g=0;g<d;g++)m();return h}(t.texts,u,R)};t[Symbol.for("effects")].push(_),o(_,["texts"]);var L=function(){t.text;for(var e=0;e<t.texts.length;e++)if(!(e<E||e>=I)){var n={};n.index=e,n.text=t.texts[e],n.key=e,u[18][n.key].set("content",n.text)}};return t[Symbol.for("effects")].push(L),o(L),u},effects:[function(e,t,n,r,o,i){t[3].set("size",e.size)},function(e,t,n,r,o,i){t[4].set("color",e.color)},function(e,t,n,r,o,i){t[12].set("content",e.character)},function(e,t,n,r,o,i){t[12].set("color",e.color)},function(e,t,n,r,o,i){t[14].set("rotation",{transition:e.rotation})},function(e,t,n,r,o,i){t[15].set("rotation",{transition:e.rotation})},function(e,t,n,r,o,i){t[16].set("rotation",{transition:e.rotation})}],context:{}},state:function(){return{color:Qi[0],size:10,character:Ji[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready:function(){var e=this,t=0;this.$setInterval(function(){++t>Qi.length-1&&(t=0),e.color=Qi[t],e.size=10*(2*t+1),e.rotation+=30},1e3);var n=0;this.$setInterval(function(){++n>Ji.length-1&&(n=0),e.character=Ji[n]},1400)}},methods:{textLoaded:function(e){this.$log.info("Text loaded with w: ".concat(e.w," and h: ").concat(e.h))}}}),ea=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],ta=Go.Component("Images",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.src="assets/lightningbolt.png",u.w=428,u.h=234,u.x=100,u.y=100,s[1].populate(u),e=s[0];var l={};s[2]=this.element({parent:e||"root"},t),l.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",l.w=428,l.h=234,l.x=100,l.y=400,s[2].populate(l),e=s[0];var c={};s[3]=this.element({parent:e||"root"},t),c.src=t.image,c.x=100,c.y=700,c["@loaded"]=t.imageLoaded&&t.imageLoaded.bind(t),s[3].populate(c),e=s[0];var f={};s[4]=this.element({parent:e||"root"},t),f.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",f.src="assets/lightningbolt.png",f.w=428,f.h=234,f.x=600,f.y=100,s[4].populate(f),e=s[0];var p={};s[5]=this.element({parent:e||"root"},t),p.x=600,p.y=400,p.w=428,p.h=234,p.clipping=t.clipping,s[5].populate(p),e=s[5];var d={};s[6]=this.element({parent:e||"root"},t),d.src="assets/lightningbolt.png",d.w=856,d.h=468,s[6].populate(d),e=s[0];var h={};return s[7]=this.element({parent:e||"root"},t),h.color=t.color,h.src="assets/lightningbolt.png",h.w=428,h.h=234,h.x=1100,h.y=100,s[7].populate(h),s},effects:[function(e,t,n,r,o,i){t[3].set("src",e.image)},function(e,t,n,r,o,i){t[5].set("clipping",e.clipping)},function(e,t,n,r,o,i){t[7].set("color",e.color)}],context:{}},state:function(){return{image:ea[0],clipping:!0,color:"red"}},hooks:{ready:function(){var e=this;this.$setInterval(function(){e.image=e.image===ea[0]?ea[1]:ea[0],e.clipping=!e.clipping,e.color="red"===e.color?"blue":"red"},2e3)}},methods:{imageLoaded:function(e){console.log("backstopjs:ready"),this.$log.info("Image loaded with w: ".concat(e.w," and h: ").concat(e.h))}}}),na=t("S",Go.Component("Square",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};return s[0]=this.element({parent:e||"root"},t),u.w={transition:t.size},u.h={transition:t.size},u.color={transition:t.color},s[0].populate(u),s},effects:[function(e,t,n,r,o,i){t[0].set("w",{transition:e.size})},function(e,t,n,r,o,i){t[0].set("h",{transition:e.size})},function(e,t,n,r,o,i){t[0].set("color",{transition:e.color})}],context:{}},props:[{key:"size",default:80}],state:function(){return{color:"#86198f"}},watch:{size:function(e,t){this.$log.info("Size changed from ".concat(t," to ").concat(e)),this.color="#86198f"===this.color?"#9d174d":"#86198f"}}})),ra=Go.Component("Card",{components:{Square:na},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0,p={};l[0]=this.element({parent:e||"root"},!0===c?u:t),p.w=t.w,p.h=t.h,p.color="0x0891b2ff",l[0].populate(p),!0===c&&(f-=1);var d=n.components&&n.components.Square||r.Square;e=l[0];var h={};l[1]=this.element({parent:e||"root"},!0===c?u:t),h.x=80,h.y=80;var m=[];if(void 0!==d)for(var g in d[Symbol.for("config")].props)delete h[d[Symbol.for("config")].props[g]],m.push(d[Symbol.for("config")].props[g]);l[1].populate(h),!0===c&&(f-=1),e=l[1];var v,y={};if(y.x=80,y.y=80,"string"==typeof(s=y.is||"Square")){if(!(v=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(v=s);l[2]=v.call(null,{props:y},l[1],t),l[2][Symbol.for("slots")][0]?(e=l[2][Symbol.for("slots")][0],u=l[2],c=!0):e=l[2][Symbol.for("children")][0],!0===c&&0===f&&(c=!1);var b=n.components&&n.components.Square||r.Square;e=l[0];var x={};l[3]=this.element({parent:e||"root"},!0===c?u:t),x.x=20,x.y=20,x.size=40;var w=[];if(void 0!==b)for(var S in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[S]],w.push(b[Symbol.for("config")].props[S]);l[3].populate(x),!0===c&&(f-=1),e=l[3];var T,k={};if(k.x=20,k.y=20,k.size=40,"string"==typeof(s=k.is||"Square")){if(!(T=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(T=s);return l[4]=T.call(null,{props:k},l[3],t),l[4][Symbol.for("slots")][0]?(e=l[4][Symbol.for("slots")][0],u=l[4],c=!0):e=l[4][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),l},effects:[],context:{}},props:["size"],computed:{w:function(){return this.size,"large"===this.size?400:200},h:function(){return this.size,"large"===this.size?500:300}}}),oa=Go.Component("Components",{components:{Square:na,Card:ra},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1,d=0;f[0]=this.element({parent:e||"root"},!0===p?l:t),f[0].populate({}),!0===p&&(d-=1);var h=n.components&&n.components.Square||r.Square;e=f[0];var m={};f[1]=this.element({parent:e||"root"},!0===p?l:t),m.x=100,m.y=100,m.size=50;var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);f[1].populate(m),!0===p&&(d-=1),e=f[1];var y,b={};if(b.x=100,b.y=100,b.size=50,"string"==typeof(s=b.is||"Square")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);f[2]=y.call(null,{props:b},f[1],t),f[2][Symbol.for("slots")][0]?(e=f[2][Symbol.for("slots")][0],l=f[2],p=!0):e=f[2][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var x=n.components&&n.components.Square||r.Square;e=f[0];var w={};f[3]=this.element({parent:e||"root"},!0===p?l:t),w.x=100,w.y=200,w.size=100;var S=[];if(void 0!==x)for(var T in x[Symbol.for("config")].props)delete w[x[Symbol.for("config")].props[T]],S.push(x[Symbol.for("config")].props[T]);f[3].populate(w),!0===p&&(d-=1),e=f[3];var k,C={};if(C.x=100,C.y=200,C.size=100,"string"==typeof(s=C.is||"Square")){if(!(k=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(k=s);f[4]=k.call(null,{props:C},f[3],t),f[4][Symbol.for("slots")][0]?(e=f[4][Symbol.for("slots")][0],l=f[4],p=!0):e=f[4][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var A=n.components&&n.components.Square||r.Square;e=f[0];var E={};f[5]=this.element({parent:e||"root"},!0===p?l:t),E.x=100,E.y=350,E.size=200;var I=[];if(void 0!==A)for(var M in A[Symbol.for("config")].props)delete E[A[Symbol.for("config")].props[M]],I.push(A[Symbol.for("config")].props[M]);f[5].populate(E),!0===p&&(d-=1),e=f[5];var R,_={};if(_.x=100,_.y=350,_.size=200,"string"==typeof(s=_.is||"Square")){if(!(R=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(R=s);f[6]=R.call(null,{props:_},f[5],t),f[6][Symbol.for("slots")][0]?(e=f[6][Symbol.for("slots")][0],l=f[6],p=!0):e=f[6][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var L=n.components&&n.components.Square||r.Square;e=f[0];var D={};f[7]=this.element({parent:e||"root"},!0===p?l:t),D.x={transition:t.x},D.y=600,D.size=50;var P=[];if(void 0!==L)for(var O in L[Symbol.for("config")].props)delete D[L[Symbol.for("config")].props[O]],P.push(L[Symbol.for("config")].props[O]);f[7].populate(D),!0===p&&(d-=1),e=f[7];var N,U={};if(u={transition:t.x},!0===Array.isArray(u)&&(u=i(u).slice(0)),U.x=u,U.y=600,U.size=50,"string"==typeof(s=U.is||"Square")){if(!(N=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(N=s);f[8]=N.call(null,{props:U},f[7],t),f[8][Symbol.for("slots")][0]?(e=f[8][Symbol.for("slots")][0],l=f[8],p=!0):e=f[8][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var B=n.components&&n.components.Card||r.Card;e=f[0];var j={};f[9]=this.element({parent:e||"root"},!0===p?l:t),j.x=500,j.y=100;var F=[];if(void 0!==B)for(var z in B[Symbol.for("config")].props)delete j[B[Symbol.for("config")].props[z]],F.push(B[Symbol.for("config")].props[z]);f[9].populate(j),!0===p&&(d-=1),e=f[9];var G,V={};if(V.x=500,V.y=100,"string"==typeof(s=V.is||"Card")){if(!(G=n.components&&n.components[s]||r[s]))throw new Error('Component "Card" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(G=s);f[10]=G.call(null,{props:V},f[9],t),f[10][Symbol.for("slots")][0]?(e=f[10][Symbol.for("slots")][0],l=f[10],p=!0):e=f[10][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var H=n.components&&n.components.Card||r.Card;e=f[0];var q={};f[11]=this.element({parent:e||"root"},!0===p?l:t),q.x=500,q.y=500,q.size="large";var X=[];if(void 0!==H)for(var W in H[Symbol.for("config")].props)delete q[H[Symbol.for("config")].props[W]],X.push(H[Symbol.for("config")].props[W]);f[11].populate(q),!0===p&&(d-=1),e=f[11];var K,$={};if($.x=500,$.y=500,$.size="large","string"==typeof(s=$.is||"Card")){if(!(K=n.components&&n.components[s]||r[s]))throw new Error('Component "Card" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(K=s);f[12]=K.call(null,{props:$},f[11],t),f[12][Symbol.for("slots")][0]?(e=f[12][Symbol.for("slots")][0],l=f[12],p=!0):e=f[12][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=f[0];var Y={};f[13]=this.element({parent:e||"root"},!0===p?l:t),Y.x=1e3,Y.y=100,f[13].populate(Y),!0===p&&(d-=1),e=f[13];var Q={};f[14]=this.element({parent:e||"root"},!0===p?l:t),Q.content="Dynamic components",Q.__textnode=!0,f[14].populate(Q),!0===p&&(d-=1);var J=n.components&&n.components.Component||r.Component;e=f[13];var Z={};f[15]=this.element({parent:e||"root"},!0===p?l:t),Z.is=t.dynamicComponent,Z.y=100,Z.color="0x0000ffff";var ee=[];if(void 0!==J)for(var te in J[Symbol.for("config")].props)delete Z[J[Symbol.for("config")].props[te]],ee.push(J[Symbol.for("config")].props[te]);f[15].populate(Z),!0===p&&(d-=1),e=f[15];var ne,re={};if(re.is=t.dynamicComponent,re.y=100,re.color="0x0000ffff","string"==typeof(s=re.is||"Component")){if(!(ne=n.components&&n.components[s]||r[s]))throw new Error('Component "Component" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(ne=s);f[16]=ne.call(null,{props:re},f[15],t),f[16][Symbol.for("slots")][0]?(e=f[16][Symbol.for("slots")][0],l=f[16],p=!0):e=f[16][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=f[13];var oe,ie,ae,se=[],ue=function(){t[Symbol.for("removeGlobalEffects")](ae),ae=null,ae=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,h=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),m=new Set,g=h.length,v={}||{};oe=v.from||0,ie="to"in v?v.to:h.length;for(;g--;)h[g],g<ie&&g>=oe&&m.add(""+g);for(var y=f.length;y--;)if(!1===m.has(f[y])){var b=f[y];a[17][b]&&a[17][b].destroy(),delete a[17][b],a[18][b]&&a[18][b].destroy(),delete a[18][b]}f.length=0;for(var x=h.length,w=[],S=function(){if(T<oe||T>=ie)return 1;var m=Object.create(t);e=a[13],m.bla=h[T],m.index=T,m.key=""+T,f.push(m.key);var g=n.components&&n.components.Component||r.Component;void 0===a[17]&&(a[17]={});var v={};void 0===a[17][m.key]&&(a[17][m.key]=c.element({parent:e||"root"},!0===p?l:t)),v.is=m.bla,v.x=205*m.index,v.y=300;var y=[];if(void 0!==g)for(var b in g[Symbol.for("config")].props)delete v[g[Symbol.for("config")].props[b]],y.push(g[Symbol.for("config")].props[b]);void 0===a[17][m.key].nodeId&&(a[17][m.key].populate(v),!0===p&&(d-=1)),void 0===a[18]&&(a[18]={}),e=a[17][m.key];var x={};if(void 0===a[18][m.key]){var S;if(x.is=m.bla,u=205*m.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.x=u,x.y=300,"string"==typeof(s=x.is||"Component")){if(!(S=n.components&&n.components[s]||r[s]))throw new Error('Component "Component" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(S=s);a[18][m.key]=S.call(null,{props:x},a[17][m.key],t),a[18][m.key][Symbol.for("slots")][0]?(e=a[18][m.key][Symbol.for("slots")][0],l=a[18][m.key],p=!0):e=a[18][m.key][Symbol.for("children")][0]}var k=function(){void 0!==y&&-1!==y.indexOf("x")||a[17][m.key].set("x",205*m.index)};o(k,null),w.push(k),t[Symbol.for("effects")].push(k),a[18][m.key][Symbol.for("props")].x=205*m.index},T=0;T<x;T++)S();return w}(t.dynamicComponents,f,se)};return t[Symbol.for("effects")].push(ue),o(ue,["dynamicComponents"]),f},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip7&&-1!==skip7.indexOf("x")||t[7].set("x",{transition:e.x})},function(e,t,n,r,o,i){t[8][Symbol.for("props")].x={transition:e.x}}],context:{}},state:function(){return{x:100,dynamicComponent:Si,dynamicComponents:["Square","Card","Square",Si],toggle:!1,size:50}},hooks:{ready:function(){var e=this;this.$setInterval(function(){e.x=100===e.x?250:100,e.size=50===e.size?200:50},2e3)}}}),ia=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],aa=Go.Component("ForLoop",{components:{Square:na},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1;f[0]=this.element({parent:e||"root"},!0===p?l:t),f[0].populate({}),e=f[0];var d={};f[1]=this.element({parent:e||"root"},!0===p?l:t),d.y=20,f[1].populate(d),e=f[1];var h,m,g,v=[],y=function(){t[Symbol.for("removeGlobalEffects")](g),g=null,g=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,s=o.length,u={}||{};h=u.from||0,m="to"in u?u.to:o.length;for(;s--;)o[s],s<m&&s>=h&&a.add(""+s);for(var f=r.length;f--;)if(!1===a.has(r[f])){var d=r[f];n[2][d]&&n[2][d].destroy(),delete n[2][d]}r.length=0;for(var g=o.length,v=0;v<g;v++)if(!(v<h||v>=m)){var y=Object.create(t);e=n[1],y.item=o[v],y[void 0]=v,y.key=""+v,r.push(y.key),e=n[1],void 0===n[2]&&(n[2]={});var b={};void 0===n[2][y.key]&&(n[2][y.key]=c.element({parent:e||"root"},!0===p?l:t)),b.w=80,b.h=80,b.x=y.item,b.color="0x4d7c0fff",void 0===n[2][y.key].nodeId&&n[2][y.key].populate(b)}return[]}(t.collection1,f,v)};t[Symbol.for("effects")].push(y),o(y,["collection1"]),e=f[0];var b={};f[3]=this.element({parent:e||"root"},!0===p?l:t),b.y=120,f[3].populate(b),e=f[3];var x,w,S,T=[],k=function(){t[Symbol.for("removeGlobalEffects")](S),S=null,S=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,u=a.length,f={}||{};x=f.from||0,w="to"in f?f.to:a.length;for(;u--;){var d=a[u];u<w&&u>=x&&s.add(""+d.id)}for(var h=r.length;h--;)if(!1===s.has(r[h])){var m=r[h];n[4][m]&&n[4][m].destroy(),delete n[4][m]}r.length=0;for(var g=a.length,v=[],y=function(){if(b<x||b>=w)return 1;var i=Object.create(t);e=n[3],i.item=a[b],i.index=b,i.key=""+i.item.id,r.push(i.key),e=n[3],void 0===n[4]&&(n[4]={});var s={};void 0===n[4][i.key]&&(n[4][i.key]=c.element({parent:e||"root"},!0===p?l:t)),s.w=80,s.h=80,s.x=i.item.x*i.index,s.color=i.item.color,void 0===n[4][i.key].nodeId&&n[4][i.key].populate(s);var u=function(){n[4][i.key].set("x",i.item.x*i.index)};o(u,null),v.push(u),t[Symbol.for("effects")].push(u)},b=0;b<g;b++)y();return v}(t.collection2,f,T)};t[Symbol.for("effects")].push(k),o(k,["collection2"]),e=f[0];var C={};f[5]=this.element({parent:e||"root"},!0===p?l:t),C.y=220,f[5].populate(C),e=f[5];var A,E,I,M=[],R=function(){t[Symbol.for("removeGlobalEffects")](I),I=null,I=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,u=a.length,f={}||{};A=f.from||0,E="to"in f?f.to:a.length;for(;u--;)a[u],u<E&&u>=A&&s.add(""+u);for(var d=r.length;d--;)if(!1===s.has(r[d])){var h=r[d];n[6][h]&&n[6][h].destroy(),delete n[6][h]}r.length=0;for(var m=a.length,g=[],v=function(){if(y<A||y>=E)return 1;var i=Object.create(t);e=n[5],i.item=a[y],i[void 0]=y,i.key=""+y,r.push(i.key),e=n[5],void 0===n[6]&&(n[6]={});var s={};void 0===n[6][i.key]&&(n[6][i.key]=c.element({parent:e||"root"},!0===p?l:t)),s.w=80,s.h=80,s.x=i.item.x,s.color=i.item.color,void 0===n[6][i.key].nodeId&&n[6][i.key].populate(s);var u=function(){n[6][i.key].set("x",i.item.x)};o(u,null),g.push(u),t[Symbol.for("effects")].push(u)},y=0;y<m;y++)v();return g}(t.collection3,f,M)};t[Symbol.for("effects")].push(R),o(R,["collection3"]),e=f[0];var _={};f[7]=this.element({parent:e||"root"},!0===p?l:t),_.y=320,f[7].populate(_),e=f[7];var L,D,P,O=[],N=function(){t[Symbol.for("removeGlobalEffects")](P),P=null,P=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,m=d.length,g={}||{};L=g.from||0,D="to"in g?g.to:d.length;for(;m--;)d[m],m<D&&m>=L&&h.add(""+m);for(var v=f.length;v--;)if(!1===h.has(f[v])){var y=f[v];a[8][y]&&a[8][y].destroy(),delete a[8][y],a[9][y]&&a[9][y].destroy(),delete a[9][y]}f.length=0;for(var b=d.length,x=[],w=function(){if(S<L||S>=D)return 1;var h=Object.create(t);e=a[7],h.item=d[S],h.index=S,h.key=""+S,f.push(h.key);var m=n.components&&n.components.Square||r.Square;void 0===a[8]&&(a[8]={});var g={};void 0===a[8][h.key]&&(a[8][h.key]=c.element({parent:e||"root"},!0===p?l:t)),g.x=h.item.x*h.index,g.ref="square"+h.index,g.alpha=h.alpha;var v=[];if(void 0!==m)for(var y in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[y]],v.push(m[Symbol.for("config")].props[y]);void 0===a[8][h.key].nodeId&&a[8][h.key].populate(g),void 0===a[9]&&(a[9]={}),e=a[8][h.key];var b={};if(void 0===a[9][h.key]){var w;if(u=h.item.x*h.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.x=u,u="square"+h.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.ref=u,u=h.alpha,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.alpha=u,"string"==typeof(s=b.is||"Square")){if(!(w=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(w=s);a[9][h.key]=w.call(null,{props:b},a[8][h.key],t),a[9][h.key][Symbol.for("slots")][0]?(e=a[9][h.key][Symbol.for("slots")][0],l=a[9][h.key],p=!0):e=a[9][h.key][Symbol.for("children")][0]}var T=function(){void 0!==v&&-1!==v.indexOf("x")||a[8][h.key].set("x",h.item.x*h.index)};o(T,null),x.push(T),t[Symbol.for("effects")].push(T);var k=function(){void 0!==v&&-1!==v.indexOf("ref")||a[8][h.key].set("ref","square"+h.index)};o(k,null),x.push(k),t[Symbol.for("effects")].push(k),a[9][h.key][Symbol.for("props")].x=h.item.x*h.index,a[9][h.key][Symbol.for("props")].ref="square"+h.index},S=0;S<b;S++)w();return x}(t.collection2,f,O)};t[Symbol.for("effects")].push(N),o(N,["collection2"]);var U=function(){t.alpha;for(var e=0;e<t.collection2.length;e++)if(!(e<L||e>=D)){var n={};n.index=e,n.item=t.collection2[e],n.key=e,"undefined"!=typeof skip8&&-1!==skip8.indexOf("alpha")||f[8][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(U),o(U);var B=function(){t.alpha;for(var e=0;e<t.collection2.length;e++)if(!(e<L||e>=D)){var n={};n.index=e,n.item=t.collection2[e],n.key=e,f[9][n.key][Symbol.for("props")].alpha=t.alpha}};t[Symbol.for("effects")].push(B),o(B),e=f[0];var j={};f[10]=this.element({parent:e||"root"},!0===p?l:t),j.y=420,f[10].populate(j),e=f[10];var F,z,G,V=[],H=function(){t[Symbol.for("removeGlobalEffects")](G),G=null,G=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,m=d.length,g={}||{};F=g.from||0,z="to"in g?g.to:d.length;for(;m--;){var v=d[m];m<z&&m>=F&&h.add(""+v.color)}for(var y=f.length;y--;)if(!1===h.has(f[y])){var b=f[y];a[11][b]&&a[11][b].destroy(),delete a[11][b],a[12][b]&&a[12][b].destroy(),delete a[12][b]}f.length=0;for(var x=d.length,w=[],S=function(){if(T<F||T>=z)return 1;var h=Object.create(t);e=a[10],h.item=d[T],h[void 0]=T,h.key=""+h.item.color,f.push(h.key);var m=n.components&&n.components.Square||r.Square;void 0===a[11]&&(a[11]={});var g={};void 0===a[11][h.key]&&(a[11][h.key]=c.element({parent:e||"root"},!0===p?l:t)),g.x=h.item.x,g.alpha=h.alpha;var v=[];if(void 0!==m)for(var y in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[y]],v.push(m[Symbol.for("config")].props[y]);void 0===a[11][h.key].nodeId&&a[11][h.key].populate(g),void 0===a[12]&&(a[12]={}),e=a[11][h.key];var b={};if(void 0===a[12][h.key]){var x;if(u=h.item.x,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.x=u,u=h.alpha,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.alpha=u,"string"==typeof(s=b.is||"Square")){if(!(x=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(x=s);a[12][h.key]=x.call(null,{props:b},a[11][h.key],t),a[12][h.key][Symbol.for("slots")][0]?(e=a[12][h.key][Symbol.for("slots")][0],l=a[12][h.key],p=!0):e=a[12][h.key][Symbol.for("children")][0]}var S=function(){void 0!==v&&-1!==v.indexOf("x")||a[11][h.key].set("x",h.item.x)};o(S,null),w.push(S),t[Symbol.for("effects")].push(S),a[12][h.key][Symbol.for("props")].x=h.item.x},T=0;T<x;T++)S();return w}(t.collection3,f,V)};t[Symbol.for("effects")].push(H),o(H,["collection3"]);var q=function(){t.alpha;for(var e=0;e<t.collection3.length;e++)if(!(e<F||e>=z)){var n={};n[void 0]=e,n.item=t.collection3[e],n.key=n.item.color,"undefined"!=typeof skip11&&-1!==skip11.indexOf("alpha")||f[11][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(q),o(q);var X=function(){t.alpha;for(var e=0;e<t.collection3.length;e++)if(!(e<F||e>=z)){var n={};n[void 0]=e,n.item=t.collection3[e],n.key=n.item.color,f[12][n.key][Symbol.for("props")].alpha=t.alpha}};t[Symbol.for("effects")].push(X),o(X),e=f[0];var W={};f[13]=this.element({parent:e||"root"},!0===p?l:t),W.y=520,f[13].populate(W),e=f[13];var K,$,Y,Q=[],J=function(){t[Symbol.for("removeGlobalEffects")](Y),Y=null,Y=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,s=o.length,u={}||{};K=u.from||0,$="to"in u?u.to:o.length;for(;s--;)o[s],s<$&&s>=K&&a.add(""+s);for(var f=r.length;f--;)if(!1===a.has(r[f])){var d=r[f];n[14][d]&&n[14][d].destroy(),delete n[14][d]}r.length=0;for(var h=o.length,m=0;m<h;m++)if(!(m<K||m>=$)){var g=Object.create(t);e=n[13],g.item=o[m],g[void 0]=m,g.key=""+m,r.push(g.key),e=n[13],void 0===n[14]&&(n[14]={});var v={};void 0===n[14][g.key]&&(n[14][g.key]=c.element({parent:e||"root"},!0===p?l:t)),v.w=80,v.h=80,v.x=g.item,v.color="0xeab308ff",v.alpha=g.alpha,void 0===n[14][g.key].nodeId&&n[14][g.key].populate(v)}return[]}(t.collection1,f,Q)};t[Symbol.for("effects")].push(J),o(J,["collection1"]);var Z=function(){t.item;for(var e=0;e<t.collection1.length;e++)if(!(e<K||e>=$)){var n={};n[void 0]=e,n.item=t.collection1[e],n.key=e,f[14][n.key].set("x",n.item)}};t[Symbol.for("effects")].push(Z),o(Z);var ee=function(){t.alpha;for(var e=0;e<t.collection1.length;e++)if(!(e<K||e>=$)){var n={};n[void 0]=e,n.item=t.collection1[e],n.key=e,f[14][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(ee),o(ee),e=f[0];var te={};f[15]=this.element({parent:e||"root"},!0===p?l:t),te.y=620,f[15].populate(te),e=f[15];var ne,re,oe,ie=[],ae=function(){t[Symbol.for("removeGlobalEffects")](oe),oe=null,oe=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,u=a.length,f={}||{};ne=f.from||0,re="to"in f?f.to:a.length;for(;u--;){var d=a[u];u<re&&u>=ne&&s.add(""+d.id)}for(var h=r.length;h--;)if(!1===s.has(r[h])){var m=r[h];n[16][m]&&n[16][m].destroy(),delete n[16][m]}r.length=0;for(var g=a.length,v=[],y=function(){if(b<ne||b>=re)return 1;var i=Object.create(t);e=n[15],i.item=a[b],i[void 0]=b,i.key=""+i.item.id,r.push(i.key),e=n[15],void 0===n[16]&&(n[16]={});var s={};void 0===n[16][i.key]&&(n[16][i.key]=c.element({parent:e||"root"},!0===p?l:t)),s.w=80,s.h=80,s.x=i.item.x,s.color=i.item.color,s.alpha=i.alpha,void 0===n[16][i.key].nodeId&&n[16][i.key].populate(s);var u=function(){n[16][i.key].set("x",i.item.x)};o(u,null),v.push(u),t[Symbol.for("effects")].push(u)},b=0;b<g;b++)y();return v}(t.collection2,f,ie)};t[Symbol.for("effects")].push(ae),o(ae,["collection2"]);var se=function(){t.alpha;for(var e=0;e<t.collection2.length;e++)if(!(e<ne||e>=re)){var n={};n[void 0]=e,n.item=t.collection2[e],n.key=n.item.id,f[16][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(se),o(se),e=f[0];var ue={};f[17]=this.element({parent:e||"root"},!0===p?l:t),ue.y=720,f[17].populate(ue),e=f[17];var le,ce,fe,pe=[],de=function(){t[Symbol.for("removeGlobalEffects")](fe),fe=null,fe=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,u=a.length,f={}||{};le=f.from||0,ce="to"in f?f.to:a.length;for(;u--;){var d=a[u];u<ce&&u>=le&&s.add(""+d.id)}for(var h=r.length;h--;)if(!1===s.has(r[h])){var m=r[h];n[18][m]&&n[18][m].destroy(),delete n[18][m]}r.length=0;for(var g=a.length,v=[],y=function(){if(b<le||b>=ce)return 1;var i=Object.create(t);e=n[17],i.item=a[b],i[void 0]=b,i.key=""+i.item.id,r.push(i.key),e=n[17],void 0===n[18]&&(n[18]={});var s={};void 0===n[18][i.key]&&(n[18][i.key]=c.element({parent:e||"root"},!0===p?l:t)),s.w=80,s.h=80,s.x=i.item.x,s.color="0x06b6d4ff",void 0===n[18][i.key].nodeId&&n[18][i.key].populate(s);var u=function(){n[18][i.key].set("x",i.item.x)};o(u,null),v.push(u),t[Symbol.for("effects")].push(u)},b=0;b<g;b++)y();return v}(t.collection4,f,pe)};t[Symbol.for("effects")].push(de),o(de,["collection4"]),e=f[0];var he={};f[19]=this.element({parent:e||"root"},!0===p?l:t),he.y=720,he.x=700,f[19].populate(he),e=f[19];var me,ge,ve,ye=[],be=function(){t[Symbol.for("removeGlobalEffects")](ve),ve=null,ve=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,u=a.length,f={}||{};me=f.from||0,ge="to"in f?f.to:a.length;for(;u--;)a[u],u<ge&&u>=me&&s.add(""+u);for(var d=r.length;d--;)if(!1===s.has(r[d])){var h=r[d];n[20][h]&&n[20][h].destroy(),delete n[20][h]}r.length=0;for(var m=a.length,g=[],v=function(){if(y<me||y>=ge)return 1;var i=Object.create(t);e=n[19],i.item=a[y],i[void 0]=y,i.key=""+y,r.push(i.key),e=n[19],void 0===n[20]&&(n[20]={});var s={};void 0===n[20][i.key]&&(n[20][i.key]=c.element({parent:e||"root"},!0===p?l:t)),s.w=80,s.h=80,s.x=i.item.x,s.color="0x8b5cf6ff",void 0===n[20][i.key].nodeId&&n[20][i.key].populate(s);var u=function(){n[20][i.key].set("x",i.item.x)};o(u,null),g.push(u),t[Symbol.for("effects")].push(u)},y=0;y<m;y++)v();return g}(t.collection4,f,ye)};t[Symbol.for("effects")].push(be),o(be,["collection4"]),e=f[0];var xe={};f[21]=this.element({parent:e||"root"},!0===p?l:t),xe.y=920,f[21].populate(xe),e=f[21];var we,Se,Te,ke=[],Ce=function(){t[Symbol.for("removeGlobalEffects")](Te),Te=null,Te=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,m=d.length,g={}||{};we=g.from||0,Se="to"in g?g.to:d.length;for(;m--;){var v=d[m];m<Se&&m>=we&&h.add(""+v.id)}for(var y=f.length;y--;)if(!1===h.has(f[y])){var b=f[y];a[22][b]&&a[22][b].destroy(),delete a[22][b],a[23][b]&&a[23][b].destroy(),delete a[23][b]}f.length=0;for(var x=d.length,w=[],S=function(){if(T<we||T>=Se)return 1;var h=Object.create(t);e=a[21],h.item=d[T],h[void 0]=T,h.key=""+h.item.id,f.push(h.key);var m=n.components&&n.components.Square||r.Square;void 0===a[22]&&(a[22]={});var g={};void 0===a[22][h.key]&&(a[22][h.key]=c.element({parent:e||"root"},!0===p?l:t)),g.w=80,g.h=80,g.x=h.item.x;var v=[];if(void 0!==m)for(var y in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[y]],v.push(m[Symbol.for("config")].props[y]);void 0===a[22][h.key].nodeId&&a[22][h.key].populate(g),void 0===a[23]&&(a[23]={}),e=a[22][h.key];var b={};if(void 0===a[23][h.key]){var x;if(b.w=80,b.h=80,u=h.item.x,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.x=u,"string"==typeof(s=b.is||"Square")){if(!(x=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(x=s);a[23][h.key]=x.call(null,{props:b},a[22][h.key],t),a[23][h.key][Symbol.for("slots")][0]?(e=a[23][h.key][Symbol.for("slots")][0],l=a[23][h.key],p=!0):e=a[23][h.key][Symbol.for("children")][0]}var S=function(){void 0!==v&&-1!==v.indexOf("x")||a[22][h.key].set("x",h.item.x)};o(S,null),w.push(S),t[Symbol.for("effects")].push(S),a[23][h.key][Symbol.for("props")].x=h.item.x},T=0;T<x;T++)S();return w}(t.collection4,f,ke)};t[Symbol.for("effects")].push(Ce),o(Ce,["collection4"]),e=f[0];var Ae={};f[24]=this.element({parent:e||"root"},!0===p?l:t),Ae.y=920,Ae.x=700,f[24].populate(Ae),e=f[24];var Ee,Ie,Me,Re=[],_e=function(){t[Symbol.for("removeGlobalEffects")](Me),Me=null,Me=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,m=d.length,g={}||{};Ee=g.from||0,Ie="to"in g?g.to:d.length;for(;m--;)d[m],m<Ie&&m>=Ee&&h.add(""+m);for(var v=f.length;v--;)if(!1===h.has(f[v])){var y=f[v];a[25][y]&&a[25][y].destroy(),delete a[25][y],a[26][y]&&a[26][y].destroy(),delete a[26][y]}f.length=0;for(var b=d.length,x=[],w=function(){if(S<Ee||S>=Ie)return 1;var h=Object.create(t);e=a[24],h.item=d[S],h[void 0]=S,h.key=""+S,f.push(h.key);var m=n.components&&n.components.Square||r.Square;void 0===a[25]&&(a[25]={});var g={};void 0===a[25][h.key]&&(a[25][h.key]=c.element({parent:e||"root"},!0===p?l:t)),g.w=80,g.h=80,g.x=h.item.x;var v=[];if(void 0!==m)for(var y in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[y]],v.push(m[Symbol.for("config")].props[y]);void 0===a[25][h.key].nodeId&&a[25][h.key].populate(g),void 0===a[26]&&(a[26]={}),e=a[25][h.key];var b={};if(void 0===a[26][h.key]){var w;if(b.w=80,b.h=80,u=h.item.x,!0===Array.isArray(u)&&(u=i(u).slice(0)),b.x=u,"string"==typeof(s=b.is||"Square")){if(!(w=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(w=s);a[26][h.key]=w.call(null,{props:b},a[25][h.key],t),a[26][h.key][Symbol.for("slots")][0]?(e=a[26][h.key][Symbol.for("slots")][0],l=a[26][h.key],p=!0):e=a[26][h.key][Symbol.for("children")][0]}var T=function(){void 0!==v&&-1!==v.indexOf("x")||a[25][h.key].set("x",h.item.x)};o(T,null),x.push(T),t[Symbol.for("effects")].push(T),a[26][h.key][Symbol.for("props")].x=h.item.x},S=0;S<b;S++)w();return x}(t.collection4,f,Re)};return t[Symbol.for("effects")].push(_e),o(_e,["collection4"]),f},effects:[],context:{}},state:function(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:ia[0]},{id:"block2",x:100,color:ia[1]},{id:"block3",x:200,color:ia[2]},{id:"block4",x:300,color:ia[3]},{id:"block5",x:400,color:ia[4]},{id:"block6",x:500,color:ia[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready:function(){var e=this;this.$setTimeout(function(){e.collection2[0].color=ia[5],e.collection2[1].color=ia[4],e.collection2[2].color=ia[3],e.collection2[3].color=ia[2],e.collection2[4].color=ia[1],e.collection2[5].color=ia[0]},4e3);var t=0,n=this.$setInterval(function(){e.collection3.push({x:100*t,color:ia[t]}),++t===ia.length&&clearInterval(n)},1e3);this.$setInterval(function(){e.alpha=.5===e.alpha?1:.5},800),this.$setTimeout(function(){e.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),sa=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],ua=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],la=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],ca=function(e){return Math.round(1e3*Math.random())%e},fa=0,pa=function(){return{id:fa++,text:"".concat(sa[ca(sa.length)]," ").concat(ua[ca(ua.length)]," ").concat(la[ca(la.length)])}},da=Go.Component("LegendItem",{code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0;l[0]=this.element({parent:e||"root"},!0===c?u:t),l[0].populate({}),!0===c&&(f-=1);var p=n.components&&n.components.Circle||r.Circle;e=l[0];var d={};l[1]=this.element({parent:e||"root"},!0===c?u:t),d.color="0xfb923cff",d.size=60;var h=[];if(void 0!==p)for(var m in p[Symbol.for("config")].props)delete d[p[Symbol.for("config")].props[m]],h.push(p[Symbol.for("config")].props[m]);l[1].populate(d),!0===c&&(f-=1),e=l[1];var g,v={};if(v.color="0xfb923cff",v.size=60,"string"==typeof(s=v.is||"Circle")){if(!(g=n.components&&n.components[s]||r[s]))throw new Error('Component "Circle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(g=s);l[2]=g.call(null,{props:v},l[1],t),l[2][Symbol.for("slots")][0]?(e=l[2][Symbol.for("slots")][0],u=l[2],c=!0):e=l[2][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),e=l[0];var y={};l[3]=this.element({parent:e||"root"},!0===c?u:t),y.color="0xe5e5e5ff",y.size=32,y.y=10,y.maxwidth=57,y.align="center",y.content=""+t.id,y.__textnode=!0,l[3].populate(y),!0===c&&(f-=1),e=l[0];var b={};return l[4]=this.element({parent:e||"root"},!0===c?u:t),b.color="0xe5e5e5ff",b.x=80,b.y=14,b.size=28,b.content=""+t.text,b.__textnode=!0,l[4].populate(b),!0===c&&(f-=1),l},effects:[],context:{}},props:["id","text"]}),ha=Go.Component("Row",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=380,u.h=60,u.y=80*t.index,u.color="0xfff7edff",s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.w=10,l.h=60,l.color="0x06b6d4ff",s[1].populate(l),e=s[0];var c={};return s[2]=this.element({parent:e||"root"},t),c.content=t.text,c.x=30,c.y=15,c.font="lato",c.size=28,c.color=t.activeRow==t.index?"0x06b6d4ff":"0x1e293bff",c.__textnode=!0,s[2].populate(c),s},effects:[function(e,t,n,r,o,i){t[0].set("y",80*e.index)},function(e,t,n,r,o,i){t[2].set("content",e.text)},function(e,t,n,r,o,i){t[2].set("color",e.activeRow==e.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),ma=Go.Component("Rows",{components:{Row:ha},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1;f[0]=this.element({parent:e||"root"},!0===p?l:t),f[0].populate({}),e=f[0];var d,h,m,g=[],v=function(){t[Symbol.for("removeGlobalEffects")](m),m=null,m=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,m=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),g=new Set,v=m.length,y={}||{};d=y.from||0,h="to"in y?y.to:m.length;for(;v--;){var b=m[v];v<h&&v>=d&&g.add(b.id+"key2")}for(var x=f.length;x--;)if(!1===g.has(f[x])){var w=f[x];a[1][w]&&a[1][w].destroy(),delete a[1][w],a[2][w]&&a[2][w].destroy(),delete a[2][w]}f.length=0;for(var S=m.length,T=[],k=function(){if(C<d||C>=h)return 1;var g=Object.create(t);e=a[0],g.item=m[C],g.index=C,g.key=g.item.id+"key2",f.push(g.key);var v=n.components&&n.components.Row||r.Row;void 0===a[1]&&(a[1]={});var y={};void 0===a[1][g.key]&&(a[1][g.key]=c.element({parent:e||"root"},!0===p?l:t)),y.activeRow=g.activeRowIndex,y.index=g.index,y.text=g.item.text,y.y=50;var b=[];if(void 0!==v)for(var x in v[Symbol.for("config")].props)delete y[v[Symbol.for("config")].props[x]],b.push(v[Symbol.for("config")].props[x]);void 0===a[1][g.key].nodeId&&a[1][g.key].populate(y),void 0===a[2]&&(a[2]={}),e=a[1][g.key];var w={};if(void 0===a[2][g.key]){var S;if(u=g.activeRowIndex,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.activeRow=u,u=g.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.index=u,u=g.item.text,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.text=u,w.y=50,"string"==typeof(s=w.is||"Row")){if(!(S=n.components&&n.components[s]||r[s]))throw new Error('Component "Row" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(S=s);a[2][g.key]=S.call(null,{props:w},a[1][g.key],t),a[2][g.key][Symbol.for("slots")][0]?(e=a[2][g.key][Symbol.for("slots")][0],l=a[2][g.key],p=!0):e=a[2][g.key][Symbol.for("children")][0]}var k=function(){void 0!==b&&-1!==b.indexOf("index")||a[1][g.key].set("index",g.index)};o(k,null),T.push(k),t[Symbol.for("effects")].push(k);var A=function(){void 0!==b&&-1!==b.indexOf("text")||a[1][g.key].set("text",g.item.text)};o(A,null),T.push(A),t[Symbol.for("effects")].push(A),a[2][g.key][Symbol.for("props")].index=g.index,a[2][g.key][Symbol.for("props")].text=g.item.text},C=0;C<S;C++)k();return T}(t.data,f,g)};t[Symbol.for("effects")].push(v),o(v,["data"]);var y=function(){t.activeRowIndex;for(var e=0;e<t.data.length;e++)if(!(e<d||e>=h)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2","undefined"!=typeof skip1&&-1!==skip1.indexOf("activeRow")||f[1][n.key].set("activeRow",t.activeRowIndex)}};t[Symbol.for("effects")].push(y),o(y);var b=function(){t.activeRowIndex;for(var e=0;e<t.data.length;e++)if(!(e<d||e>=h)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",f[2][n.key][Symbol.for("props")].activeRow=t.activeRowIndex}};return t[Symbol.for("effects")].push(b),o(b),f},effects:[],context:{}},props:["data","activeRowIndex"]}),ga=Go.Component("ForLoop",{components:{Square:na,LegendItem:da,Row:ha,Rows:ma},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1,d=0;f[0]=this.element({parent:e||"root"},!0===p?l:t),f[0].populate({}),!0===p&&(d-=1),e=f[0];var h={};f[1]=this.element({parent:e||"root"},!0===p?l:t),h.x=100,h.y=60,h.size=48,h.content="Array operations test",h.__textnode=!0,f[1].populate(h),!0===p&&(d-=1),e=f[0];var m={};f[2]=this.element({parent:e||"root"},!0===p?l:t),m.y=170,m.x=140,f[2].populate(m),!0===p&&(d-=1),e=f[2];var g={};f[3]=this.element({parent:e||"root"},!0===p?l:t),g.x="-10",g.w=500,g.h=80,g.color="0x64748bff",g.y={transition:t.y},g.alpha={transition:!t.hide},f[3].populate(g),!0===p&&(d-=1);var v=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var y={};f[4]=this.element({parent:e||"root"},!0===p?l:t),y.y=0,y.id="a",y.text="Fill array by assignment";var b=[];if(void 0!==v)for(var x in v[Symbol.for("config")].props)delete y[v[Symbol.for("config")].props[x]],b.push(v[Symbol.for("config")].props[x]);f[4].populate(y),!0===p&&(d-=1),e=f[4];var w,S={};if(S.y=0,S.id="a",S.text="Fill array by assignment","string"==typeof(s=S.is||"LegendItem")){if(!(w=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(w=s);f[5]=w.call(null,{props:S},f[4],t),f[5][Symbol.for("slots")][0]?(e=f[5][Symbol.for("slots")][0],l=f[5],p=!0):e=f[5][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var T=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var k={};f[6]=this.element({parent:e||"root"},!0===p?l:t),k.y=90,k.id="b",k.text="Push new item to array";var C=[];if(void 0!==T)for(var A in T[Symbol.for("config")].props)delete k[T[Symbol.for("config")].props[A]],C.push(T[Symbol.for("config")].props[A]);f[6].populate(k),!0===p&&(d-=1),e=f[6];var E,I={};if(I.y=90,I.id="b",I.text="Push new item to array","string"==typeof(s=I.is||"LegendItem")){if(!(E=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(E=s);f[7]=E.call(null,{props:I},f[6],t),f[7][Symbol.for("slots")][0]?(e=f[7][Symbol.for("slots")][0],l=f[7],p=!0):e=f[7][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var M=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var R={};f[8]=this.element({parent:e||"root"},!0===p?l:t),R.y=180,R.id="c",R.text="Pop item from array";var _=[];if(void 0!==M)for(var L in M[Symbol.for("config")].props)delete R[M[Symbol.for("config")].props[L]],_.push(M[Symbol.for("config")].props[L]);f[8].populate(R),!0===p&&(d-=1),e=f[8];var D,P={};if(P.y=180,P.id="c",P.text="Pop item from array","string"==typeof(s=P.is||"LegendItem")){if(!(D=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(D=s);f[9]=D.call(null,{props:P},f[8],t),f[9][Symbol.for("slots")][0]?(e=f[9][Symbol.for("slots")][0],l=f[9],p=!0):e=f[9][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var O=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var N={};f[10]=this.element({parent:e||"root"},!0===p?l:t),N.y=270,N.id="d",N.text="Shift item from array";var U=[];if(void 0!==O)for(var B in O[Symbol.for("config")].props)delete N[O[Symbol.for("config")].props[B]],U.push(O[Symbol.for("config")].props[B]);f[10].populate(N),!0===p&&(d-=1),e=f[10];var j,F={};if(F.y=270,F.id="d",F.text="Shift item from array","string"==typeof(s=F.is||"LegendItem")){if(!(j=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(j=s);f[11]=j.call(null,{props:F},f[10],t),f[11][Symbol.for("slots")][0]?(e=f[11][Symbol.for("slots")][0],l=f[11],p=!0):e=f[11][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var z=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var G={};f[12]=this.element({parent:e||"root"},!0===p?l:t),G.y=360,G.id="e",G.text="Splice 2 items from array";var V=[];if(void 0!==z)for(var H in z[Symbol.for("config")].props)delete G[z[Symbol.for("config")].props[H]],V.push(z[Symbol.for("config")].props[H]);f[12].populate(G),!0===p&&(d-=1),e=f[12];var q,X={};if(X.y=360,X.id="e",X.text="Splice 2 items from array","string"==typeof(s=X.is||"LegendItem")){if(!(q=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(q=s);f[13]=q.call(null,{props:X},f[12],t),f[13][Symbol.for("slots")][0]?(e=f[13][Symbol.for("slots")][0],l=f[13],p=!0):e=f[13][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var W=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var K={};f[14]=this.element({parent:e||"root"},!0===p?l:t),K.y=450,K.id="f",K.text="Unshift 2 items into array";var $=[];if(void 0!==W)for(var Y in W[Symbol.for("config")].props)delete K[W[Symbol.for("config")].props[Y]],$.push(W[Symbol.for("config")].props[Y]);f[14].populate(K),!0===p&&(d-=1),e=f[14];var Q,J={};if(J.y=450,J.id="f",J.text="Unshift 2 items into array","string"==typeof(s=J.is||"LegendItem")){if(!(Q=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Q=s);f[15]=Q.call(null,{props:J},f[14],t),f[15][Symbol.for("slots")][0]?(e=f[15][Symbol.for("slots")][0],l=f[15],p=!0):e=f[15][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var Z=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var ee={};f[16]=this.element({parent:e||"root"},!0===p?l:t),ee.y=540,ee.id="g",ee.text="Empty array by assignment";var te=[];if(void 0!==Z)for(var ne in Z[Symbol.for("config")].props)delete ee[Z[Symbol.for("config")].props[ne]],te.push(Z[Symbol.for("config")].props[ne]);f[16].populate(ee),!0===p&&(d-=1),e=f[16];var re,oe={};if(oe.y=540,oe.id="g",oe.text="Empty array by assignment","string"==typeof(s=oe.is||"LegendItem")){if(!(re=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(re=s);f[17]=re.call(null,{props:oe},f[16],t),f[17][Symbol.for("slots")][0]?(e=f[17][Symbol.for("slots")][0],l=f[17],p=!0):e=f[17][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var ie=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var ae={};f[18]=this.element({parent:e||"root"},!0===p?l:t),ae.y=630,ae.id="h",ae.text="Concat an array with items";var se=[];if(void 0!==ie)for(var ue in ie[Symbol.for("config")].props)delete ae[ie[Symbol.for("config")].props[ue]],se.push(ie[Symbol.for("config")].props[ue]);f[18].populate(ae),!0===p&&(d-=1),e=f[18];var le,ce={};if(ce.y=630,ce.id="h",ce.text="Concat an array with items","string"==typeof(s=ce.is||"LegendItem")){if(!(le=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(le=s);f[19]=le.call(null,{props:ce},f[18],t),f[19][Symbol.for("slots")][0]?(e=f[19][Symbol.for("slots")][0],l=f[19],p=!0):e=f[19][Symbol.for("children")][0],!0===p&&0===d&&(p=!1);var fe=n.components&&n.components.LegendItem||r.LegendItem;e=f[2];var pe={};f[20]=this.element({parent:e||"root"},!0===p?l:t),pe.y=720,pe.id="i",pe.text="Sort array alphabetically";var de=[];if(void 0!==fe)for(var he in fe[Symbol.for("config")].props)delete pe[fe[Symbol.for("config")].props[he]],de.push(fe[Symbol.for("config")].props[he]);f[20].populate(pe),!0===p&&(d-=1),e=f[20];var me,ge={};if(ge.y=720,ge.id="i",ge.text="Sort array alphabetically","string"==typeof(s=ge.is||"LegendItem")){if(!(me=n.components&&n.components[s]||r[s]))throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(me=s);f[21]=me.call(null,{props:ge},f[20],t),f[21][Symbol.for("slots")][0]?(e=f[21][Symbol.for("slots")][0],l=f[21],p=!0):e=f[21][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),e=f[2];var ve={};f[22]=this.element({parent:e||"root"},!0===p?l:t),ve.y=840,f[22].populate(ve),!0===p&&(d-=1),e=f[22];var ye={};f[23]=this.element({parent:e||"root"},!0===p?l:t),ye.size=26,ye.y=10,ye.content="Array length:",ye.__textnode=!0,f[23].populate(ye),!0===p&&(d-=1),e=f[22];var be={};f[24]=this.element({parent:e||"root"},!0===p?l:t),be.content=t.data.length,be.size=40,be.x=180,be.color="0xfb923cff",be.__textnode=!0,f[24].populate(be),!0===p&&(d-=1),e=f[0];var xe={};f[25]=this.element({parent:e||"root"},!0===p?l:t),xe.x=660,xe.y=100,f[25].populate(xe),!0===p&&(d-=1),e=f[25];var we={};f[26]=this.element({parent:e||"root"},!0===p?l:t),we.content="For loop on Element",we.__textnode=!0,f[26].populate(we),!0===p&&(d-=1),e=f[25];var Se,Te,ke,Ce=[],Ae=function(){t[Symbol.for("removeGlobalEffects")](ke),ke=null,ke=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,u=a.length,f={}||{};Se=f.from||0,Te="to"in f?f.to:a.length;for(;u--;){var h=a[u];u<Te&&u>=Se&&s.add(h.id+"key")}for(var m=r.length;m--;)if(!1===s.has(r[m])){var g=r[m];n[27][g]&&n[27][g].destroy(),delete n[27][g],n[28][g]&&n[28][g].destroy(),delete n[28][g],n[29][g]&&n[29][g].destroy(),delete n[29][g]}r.length=0;for(var v=a.length,y=[],b=function(){if(x<Se||x>=Te)return 1;var i=Object.create(t);e=n[25],i.item=a[x],i.index=x,i.key=i.item.id+"key",r.push(i.key),e=n[25],void 0===n[27]&&(n[27]={});var s={};void 0===n[27][i.key]&&(n[27][i.key]=c.element({parent:e||"root"},!0===p?l:t)),s.w=380,s.h=60,s.y=80*i.index+50,s.color="0xfff7edff",void 0===n[27][i.key].nodeId&&(n[27][i.key].populate(s),!0===p&&(d-=1)),e=n[27][i.key],void 0===n[28]&&(n[28]={});var u={};void 0===n[28][i.key]&&(n[28][i.key]=c.element({parent:e||"root"},!0===p?l:t)),u.w=10,u.h=60,u.color="0xfb923cff",void 0===n[28][i.key].nodeId&&(n[28][i.key].populate(u),!0===p&&(d-=1)),e=n[27][i.key],void 0===n[29]&&(n[29]={});var f={};void 0===n[29][i.key]&&(n[29][i.key]=c.element({parent:e||"root"},!0===p?l:t)),f.content=i.item.text,f.x=30,f.y=15,f.font="lato",f.size=28,f.color=i.activeRowIndex===i.index?"0x06b6d4ff":"0x1e293bff",f.__textnode=!0,void 0===n[29][i.key].nodeId&&(n[29][i.key].populate(f),!0===p&&(d-=1));var h=function(){n[27][i.key].set("y",80*i.index+50)};o(h,null),y.push(h),t[Symbol.for("effects")].push(h);var m=function(){n[29][i.key].set("content",i.item.text)};o(m,null),y.push(m),t[Symbol.for("effects")].push(m)},x=0;x<v;x++)b();return y}(t.data,f,Ce)};t[Symbol.for("effects")].push(Ae),o(Ae,["data"]);var Ee=function(){t.activeRowIndex;for(var e=0;e<t.data.length;e++)if(!(e<Se||e>=Te)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key",f[29][n.key].set("color",t.activeRowIndex===n.index?"0x06b6d4ff":"0x1e293bff")}};t[Symbol.for("effects")].push(Ee),o(Ee),e=f[0];var Ie={};f[30]=this.element({parent:e||"root"},!0===p?l:t),Ie.x=1080,Ie.y=100,f[30].populate(Ie),!0===p&&(d-=1),e=f[30];var Me={};f[31]=this.element({parent:e||"root"},!0===p?l:t),Me.content="For loop on Component",Me.__textnode=!0,f[31].populate(Me),!0===p&&(d-=1),e=f[30];var Re,_e,Le,De=[],Pe=function(){t[Symbol.for("removeGlobalEffects")](Le),Le=null,Le=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,h=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),m=new Set,g=h.length,v={}||{};Re=v.from||0,_e="to"in v?v.to:h.length;for(;g--;){var y=h[g];g<_e&&g>=Re&&m.add(y.id+"key2")}for(var b=f.length;b--;)if(!1===m.has(f[b])){var x=f[b];a[32][x]&&a[32][x].destroy(),delete a[32][x],a[33][x]&&a[33][x].destroy(),delete a[33][x]}f.length=0;for(var w=h.length,S=[],T=function(){if(k<Re||k>=_e)return 1;var m=Object.create(t);e=a[30],m.item=h[k],m.index=k,m.key=m.item.id+"key2",f.push(m.key);var g=n.components&&n.components.Row||r.Row;void 0===a[32]&&(a[32]={});var v={};void 0===a[32][m.key]&&(a[32][m.key]=c.element({parent:e||"root"},!0===p?l:t)),v.activeRow=(m.count,m.activeRowIndex),v.index=m.index,v.text=m.item.text,v.y=50;var y=[];if(void 0!==g)for(var b in g[Symbol.for("config")].props)delete v[g[Symbol.for("config")].props[b]],y.push(g[Symbol.for("config")].props[b]);void 0===a[32][m.key].nodeId&&(a[32][m.key].populate(v),!0===p&&(d-=1)),void 0===a[33]&&(a[33]={}),e=a[32][m.key];var x={};if(void 0===a[33][m.key]){var w;if(m.count,u=m.activeRowIndex,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.activeRow=u,u=m.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.index=u,u=m.item.text,!0===Array.isArray(u)&&(u=i(u).slice(0)),x.text=u,x.y=50,"string"==typeof(s=x.is||"Row")){if(!(w=n.components&&n.components[s]||r[s]))throw new Error('Component "Row" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(w=s);a[33][m.key]=w.call(null,{props:x},a[32][m.key],t),a[33][m.key][Symbol.for("slots")][0]?(e=a[33][m.key][Symbol.for("slots")][0],l=a[33][m.key],p=!0):e=a[33][m.key][Symbol.for("children")][0]}var T=function(){void 0!==y&&-1!==y.indexOf("index")||a[32][m.key].set("index",m.index)};o(T,null),S.push(T),t[Symbol.for("effects")].push(T);var C=function(){void 0!==y&&-1!==y.indexOf("text")||a[32][m.key].set("text",m.item.text)};o(C,null),S.push(C),t[Symbol.for("effects")].push(C),a[33][m.key][Symbol.for("props")].index=m.index,a[33][m.key][Symbol.for("props")].text=m.item.text},k=0;k<w;k++)T();return S}(t.data,f,De)};t[Symbol.for("effects")].push(Pe),o(Pe,["data"]);var Oe=function(){t.activeRowIndex,t.count;for(var e=0;e<t.data.length;e++)if(!(e<Re||e>=_e)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2","undefined"!=typeof skip32&&-1!==skip32.indexOf("activeRow")||f[32][n.key].set("activeRow",(t.count,t.activeRowIndex))}};t[Symbol.for("effects")].push(Oe),o(Oe);var Ne=function(){t.activeRowIndex,t.count;for(var e=0;e<t.data.length;e++)if(!(e<Re||e>=_e)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",f[33][n.key][Symbol.for("props")].activeRow=(t.count,t.activeRowIndex)}};t[Symbol.for("effects")].push(Ne),o(Ne),e=f[0];var Ue={};f[34]=this.element({parent:e||"root"},!0===p?l:t),Ue.x=1500,Ue.y=100,f[34].populate(Ue),!0===p&&(d-=1),e=f[34];var Be={};f[35]=this.element({parent:e||"root"},!0===p?l:t),Be.content="RowsComponent",Be.__textnode=!0,f[35].populate(Be),!0===p&&(d-=1);var je=n.components&&n.components.Rows||r.Rows;e=f[34];var Fe={};f[36]=this.element({parent:e||"root"},!0===p?l:t),Fe.data=t.data,Fe.activeRowIndex=t.activeRowIndex;var ze=[];if(void 0!==je)for(var Ge in je[Symbol.for("config")].props)delete Fe[je[Symbol.for("config")].props[Ge]],ze.push(je[Symbol.for("config")].props[Ge]);f[36].populate(Fe),!0===p&&(d-=1),e=f[36];var Ve,He={};if(u=t.data,!0===Array.isArray(u)&&(u=i(u).slice(0)),He.data=u,u=t.activeRowIndex,!0===Array.isArray(u)&&(u=i(u).slice(0)),He.activeRowIndex=u,"string"==typeof(s=He.is||"Rows")){if(!(Ve=n.components&&n.components[s]||r[s]))throw new Error('Component "Rows" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(Ve=s);return f[37]=Ve.call(null,{props:He},f[36],t),f[37][Symbol.for("slots")][0]?(e=f[37][Symbol.for("slots")][0],l=f[37],p=!0):e=f[37][Symbol.for("children")][0],!0===p&&0===d&&(p=!1),f},effects:[function(e,t,n,r,o,i){t[3].set("y",{transition:e.y})},function(e,t,n,r,o,i){t[3].set("alpha",{transition:!e.hide})},function(e,t,n,r,o,i){t[24].set("content",e.data.length)},function(e,t,n,r,o,i){"undefined"!=typeof skip36&&-1!==skip36.indexOf("data")||t[36].set("data",e.data)},function(e,t,n,r,o,i){"undefined"!=typeof skip36&&-1!==skip36.indexOf("activeRowIndex")||t[36].set("activeRowIndex",e.activeRowIndex)},function(e,t,n,r,o,i){t[37][Symbol.for("props")].data=e.data},function(e,t,n,r,o,i){t[37][Symbol.for("props")].activeRowIndex=e.activeRowIndex}],context:{}},state:function(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show:function(){return this.hide,!0===this.hide},data2:function(){return this.data,this.data}},watch:{y:function(){var e=this;this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(function(){e.hide=!0},600)}},input:{a:function(){this.y=-10,this.$trigger("y");for(var e=[],t=0;t<6;t++)e.push(pa());this.data=e},b:function(){this.y=80,this.$trigger("y"),this.data.push(pa())},c:function(){this.y=170,this.$trigger("y"),this.data.pop()},d:function(){this.y=260,this.$trigger("y"),this.data.shift()},e:function(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f:function(){this.y=440,this.data.unshift(pa(),pa())},g:function(){this.y=530,this.$trigger("y"),this.data=[]},h:function(){this.y=620,this.$trigger("y"),this.data=this.data.concat(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],n=0;n<e;n++)t.push(pa());return t}(3))},i:function(){var e=this;this.y=710,this.$trigger("y"),this.sortDirection=1===this.sortDirection?0:1,this.data=this.data.sort(function(t,n){var r=t.text.toLowerCase(),o=n.text.toLowerCase();return 1===e.sortDirection?r<o?-1:r>o?1:0:r>o?-1:r<o?1:0})},up:function(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down:function(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),va=Go.Component("Effects",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.w=160,u.h=160,u.x=40,u.y=40,u.color="0xfb923cff",u.effects=[{type:"radius",props:{radius:44}}],s[1].populate(u),e=s[0];var l={};s[2]=this.element({parent:e||"root"},t),l.w=160,l.h=160,l.x=240,l.y=40,l.color="0xd97706ff",l.effects=[{type:"radius",props:{radius:25}}],s[2].populate(l),e=s[0];var c={};s[3]=this.element({parent:e||"root"},t),c.w=160,c.h=160,c.x=440,c.y=40,c.color="0xb45309ff",c.effects=[{type:"radius",props:{radius:80}}],s[3].populate(c),e=s[0];var f={};s[4]=this.element({parent:e||"root"},t),f.w=160,f.h=160,f.x=640,f.y=40,f.color="0x78350fff",f.effects=[{type:"radius",props:{radius:10}}],s[4].populate(f),e=s[0];var p={};s[5]=this.element({parent:e||"root"},t),p.w=160,p.h=160,p.x=40,p.y=240,p.color="0x65a30dff",p.effects=[{type:"radius",props:{radius:t.radius}}],s[5].populate(p),e=s[0];var d={};s[6]=this.element({parent:e||"root"},t),d.w=300,d.h=300,d.x=40,d.y=440,d.color="0x0c4a6eff",d.effects=[{type:"radius",props:{radius:30}}],s[6].populate(d),e=s[6];var h={};s[7]=this.element({parent:e||"root"},t),h.w=200,h.h=200,h.x=50,h.y=50,h.color="0x0284c7ff",h.effects=[{type:"radius",props:{radius:40}}],s[7].populate(h),e=s[7];var m={};s[8]=this.element({parent:e||"root"},t),m.w=100,m.h=100,m.x=50,m.y=50,m.color="0x38bdf8ff",m.effects=[{type:"radius",props:{radius:50}}],s[8].populate(m),e=s[8];var g={};s[9]=this.element({parent:e||"root"},t),g.w=40,g.h=40,g.x=30,g.y=30,g.color="0xbae6fdff",g.effects=[{type:"radius",props:{radius:20}}],s[9].populate(g),e=s[0];var v={};s[10]=this.element({parent:e||"root"},t),v.w=160,v.h=160,v.x=840,v.y=40,v.color="0x3b82f6ff",v.effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],s[10].populate(v),e=s[0];var y={};return s[11]=this.element({parent:e||"root"},t),y.w=160,y.h=160,y.x=1040,y.y=40,y.color="0x500724ff",y.effects=t.effects,s[11].populate(y),s},effects:[function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:44}}])},function(e,t,n,r,o,i){t[2].set("effects",[{type:"radius",props:{radius:25}}])},function(e,t,n,r,o,i){t[3].set("effects",[{type:"radius",props:{radius:80}}])},function(e,t,n,r,o,i){t[4].set("effects",[{type:"radius",props:{radius:10}}])},function(e,t,n,r,o,i){t[5].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,r,o,i){t[6].set("effects",[{type:"radius",props:{radius:30}}])},function(e,t,n,r,o,i){t[7].set("effects",[{type:"radius",props:{radius:40}}])},function(e,t,n,r,o,i){t[8].set("effects",[{type:"radius",props:{radius:50}}])},function(e,t,n,r,o,i){t[9].set("effects",[{type:"radius",props:{radius:20}}])},function(e,t,n,r,o,i){t[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(e,t,n,r,o,i){t[11].set("effects",e.effects)}],context:{}},state:function(){return{direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t="up"===e.direction?e.radius+10:e.radius-10;e.radius=Math.max(Math.min(t,80),0),80===e.radius&&(e.direction="down"),0===e.radius&&(e.direction="up")},500);var t=0;this.$setInterval(function(){t++,e.effects=t%2?[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),ya=Go.Component("ShowIf",{components:{Square:na},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0;c[0]=this.element({parent:e||"root"},!0===f?l:t),c[0].populate({}),!0===f&&(p-=1),e=c[0];var d={};c[1]=this.element({parent:e||"root"},!0===f?l:t),d.y=40,c[1].populate(d),!0===f&&(p-=1),e=c[1];var h={};c[2]=this.element({parent:e||"root"},!0===f?l:t),h.x=50,h.w=200,h.h=300,h.color="0xbef264ff",h.show=!0,c[2].populate(h),!0===f&&(p-=1),e=c[1];var m={};c[3]=this.element({parent:e||"root"},!0===f?l:t),m.x=350,m.w=200,m.h=300,m.color="0xff0000ff",m.show=!1,c[3].populate(m),!0===f&&(p-=1),e=c[1];var g={};c[4]=this.element({parent:e||"root"},!0===f?l:t),g.x=650,g.w=200,g.h=300,g.color="0x84cc16ff",g.show=1,c[4].populate(g),!0===f&&(p-=1),e=c[1];var v={};c[5]=this.element({parent:e||"root"},!0===f?l:t),v.x=950,v.w=200,v.h=300,v.color="0xff0000ff",v.show=0,c[5].populate(v),!0===f&&(p-=1),e=c[0];var y={};c[6]=this.element({parent:e||"root"},!0===f?l:t),y.y=380,c[6].populate(y),!0===f&&(p-=1),e=c[6];var b={};c[7]=this.element({parent:e||"root"},!0===f?l:t),b.x=50,b.w=200,b.h=300,b.color="0xfde047ff",b.show=t.showNr,c[7].populate(b),!0===f&&(p-=1),e=c[6];var x={};c[8]=this.element({parent:e||"root"},!0===f?l:t),x.x=350,x.w=200,x.h=300,x.color="0x0000ffff",x.show=t.hideNr,c[8].populate(x),!0===f&&(p-=1),e=c[6];var w={};c[9]=this.element({parent:e||"root"},!0===f?l:t),w.x=650,w.w=200,w.h=300,w.color="0x84cc16ff",w.show=t.showBool,c[9].populate(w),!0===f&&(p-=1),e=c[6];var S={};c[10]=this.element({parent:e||"root"},!0===f?l:t),S.x=950,S.w=200,S.h=300,S.color="0xff0000ff",S.show=t.hideBool,c[10].populate(S),!0===f&&(p-=1),e=c[0];var T={};c[11]=this.element({parent:e||"root"},!0===f?l:t),T.y=720,c[11].populate(T),!0===f&&(p-=1),e=c[11];var k={};c[12]=this.element({parent:e||"root"},!0===f?l:t),k.x=50,k.w=200,k.h=300,k.color="0x5eead4ff",k.show=t.showHideToggle,c[12].populate(k),!0===f&&(p-=1),e=c[0];var C={};c[13]=this.element({parent:e||"root"},!0===f?l:t),C.y=40,C.x=1e3,c[13].populate(C),!0===f&&(p-=1);var A=n.components&&n.components.Square||r.Square;e=c[13];var E={};c[14]=this.element({parent:e||"root"},!0===f?l:t),E.show=!0;var I=[];if(void 0!==A)for(var M in A[Symbol.for("config")].props)delete E[A[Symbol.for("config")].props[M]],I.push(A[Symbol.for("config")].props[M]);c[14].populate(E),!0===f&&(p-=1),e=c[14];var R,_={};if(_.show=!0,"string"==typeof(s=_.is||"Square")){if(!(R=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(R=s);c[15]=R.call(null,{props:_},c[14],t),c[15][Symbol.for("slots")][0]?(e=c[15][Symbol.for("slots")][0],l=c[15],f=!0):e=c[15][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var L=n.components&&n.components.Square||r.Square;e=c[13];var D={};c[16]=this.element({parent:e||"root"},!0===f?l:t),D.y=100,D.show=!1;var P=[];if(void 0!==L)for(var O in L[Symbol.for("config")].props)delete D[L[Symbol.for("config")].props[O]],P.push(L[Symbol.for("config")].props[O]);c[16].populate(D),!0===f&&(p-=1),e=c[16];var N,U={};if(U.y=100,U.show=!1,"string"==typeof(s=U.is||"Square")){if(!(N=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(N=s);c[17]=N.call(null,{props:U},c[16],t),c[17][Symbol.for("slots")][0]?(e=c[17][Symbol.for("slots")][0],l=c[17],f=!0):e=c[17][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var B=n.components&&n.components.Square||r.Square;e=c[13];var j={};c[18]=this.element({parent:e||"root"},!0===f?l:t),j.y=200,j.show=t.showHideToggle;var F=[];if(void 0!==B)for(var z in B[Symbol.for("config")].props)delete j[B[Symbol.for("config")].props[z]],F.push(B[Symbol.for("config")].props[z]);c[18].populate(j),!0===f&&(p-=1),e=c[18];var G,V={};if(V.y=200,u=t.showHideToggle,!0===Array.isArray(u)&&(u=i(u).slice(0)),V.show=u,"string"==typeof(s=V.is||"Square")){if(!(G=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(G=s);c[19]=G.call(null,{props:V},c[18],t),c[19][Symbol.for("slots")][0]?(e=c[19][Symbol.for("slots")][0],l=c[19],f=!0):e=c[19][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[0];var H={};c[20]=this.element({parent:e||"root"},!0===f?l:t),H.y=40,H.x=1400,c[20].populate(H),!0===f&&(p-=1),e=c[20];var q={};c[21]=this.element({parent:e||"root"},!0===f?l:t),q.w=80,q.h=80,q.show=!0,q.alpha=.8,q.color="0xff00e4ff",c[21].populate(q),!0===f&&(p-=1),e=c[20];var X={};c[22]=this.element({parent:e||"root"},!0===f?l:t),X.y=100,X.w=80,X.h=80,X.show=!1,X.alpha=.8,X.color="0xff00e4ff",c[22].populate(X),!0===f&&(p-=1),e=c[20];var W={};c[23]=this.element({parent:e||"root"},!0===f?l:t),W.y=200,W.w=80,W.h=80,W.show=t.showHideToggle,W.alpha=.8,W.color="0xff00e4ff",c[23].populate(W),!0===f&&(p-=1),e=c[0];var K={};c[24]=this.element({parent:e||"root"},!0===f?l:t),K.x=1e3,K.y=380,K.direction="horizontal",K.gap=20,K.padding=20,K.color="0xffffffff",K.__layout=!0,c[24].populate(K),!0===f&&(p-=1),e=c[24];var $={};c[25]=this.element({parent:e||"root"},!0===f?l:t),$.w=40,$.h=40,$.show=t.showHideToggle,$.color="0xbfdbfeff",c[25].populate($),!0===f&&(p-=1),e=c[24];var Y={};c[26]=this.element({parent:e||"root"},!0===f?l:t),Y.w=40,Y.h=40,Y.color="0x60a5faff",c[26].populate(Y),!0===f&&(p-=1),e=c[24];var Q={};return c[27]=this.element({parent:e||"root"},!0===f?l:t),Q.w=40,Q.h=40,Q.color="0x2563ebff",c[27].populate(Q),!0===f&&(p-=1),c},effects:[function(e,t,n,r,o,i){t[12].set("show",e.showHideToggle)},function(e,t,n,r,o,i){"undefined"!=typeof skip18&&-1!==skip18.indexOf("show")||t[18].set("show",e.showHideToggle)},function(e,t,n,r,o,i){t[19][Symbol.for("props")].show=e.showHideToggle},function(e,t,n,r,o,i){t[23].set("show",e.showHideToggle)},function(e,t,n,r,o,i){t[25].set("show",e.showHideToggle)}],context:{}},state:function(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready:function(){var e=this;this.$setInterval(function(){console.log("backstopjs:ready"),e.showHideToggle=!e.showHideToggle},2e3),this.$setTimeout(function(){e.showNr=0,e.hideNr=1,e.showBool=!1,e.hideBool=!0},4e3)}}}),ba=Go.Component("Events",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.x=400,u.y=360,s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.w=280,l.h=280,l.color="0xe5e7ebff",l.x=t.x,l.y="-5",s[1].populate(l),e=s[0];var c={};s[2]=this.element({parent:e||"root"},t),c.w=250,c.h=250,c.x=10,c.y=10,c.color=t.colors[0],s[2].populate(c),e=s[0];var f={};s[3]=this.element({parent:e||"root"},t),f.w=250,f.h=250,f.x=290,f.y=10,f.color=t.colors[1],s[3].populate(f),e=s[0];var p={};s[4]=this.element({parent:e||"root"},t),p.w=250,p.h=250,p.x=570,p.y=10,p.color=t.colors[2],s[4].populate(p),e=s[0];var d={};return s[5]=this.element({parent:e||"root"},t),d.w=250,d.h=250,d.x=850,d.y=10,d.color=t.colors[3],s[5].populate(d),s},effects:[function(e,t,n,r,o,i){t[1].set("x",e.x)}],context:{}},state:function(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x:function(){return this.count,280*this.count-5}},hooks:{unfocus:function(){this.$emit("changeBackground")}},input:{left:function(e){var t=this.count-1;-1===t?this.parent.$focus(e):this.count=Math.max(t,0)},right:function(e){var t=this.count+1;4===t?this.parent.$focus(e):this.count=Math.min(t,3)},enter:function(){this.$emit("changeBackground",this.colors[this.count])}}}),xa=Go.Component("SlotCard",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=300,u.h=500,u.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],u.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l[Symbol.for("isSlot")]=!0,l.x=20,l.y=20,s[1].populate(l),e=s[0];var c={};return s[2]=this.element({parent:e||"root"},t),c.content=t.label,c.maxwidth=260,c.x=20,c.y=400,c.align="center",c.__textnode=!0,s[2].populate(c),s},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),wa=Go.Component("NamedSlotCard",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=700,u.h=300,u.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],u.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.x=20,l.y=20,s[1].populate(l),e=s[1];var c={};s[2]=this.element({parent:e||"root"},t),c.content="First slot",c.__textnode=!0,s[2].populate(c),e=s[1];var f={};s[3]=this.element({parent:e||"root"},t),f[Symbol.for("isSlot")]=!0,f.y=40,f.ref="first",s[3].populate(f),e=s[0];var p={};s[4]=this.element({parent:e||"root"},t),p.x=200,p.y=20,s[4].populate(p),e=s[4];var d={};s[5]=this.element({parent:e||"root"},t),d.content="Second slot",d.__textnode=!0,s[5].populate(d),e=s[4];var h={};s[6]=this.element({parent:e||"root"},t),h[Symbol.for("isSlot")]=!0,h.y=40,h.ref="second",s[6].populate(h),e=s[0];var m={};s[7]=this.element({parent:e||"root"},t),m.x=480,m.y=20,s[7].populate(m),e=s[7];var g={};s[8]=this.element({parent:e||"root"},t),g.content="Third slot",g.__textnode=!0,s[8].populate(g),e=s[7];var v={};return s[9]=this.element({parent:e||"root"},t),v[Symbol.for("isSlot")]=!0,v.y=40,v.ref="third",s[9].populate(v),s},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),Sa=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],Ta=Go.Component("Components",{components:{SlotCard:xa,NamedSlotCard:wa,Card:ra,Square:na},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0;l[0]=this.element({parent:e||"root"},!0===c?u:t),l[0].populate({}),!0===c&&(f-=1);var p=n.components&&n.components.SlotCard||r.SlotCard;e=l[0];var d={};l[1]=this.element({parent:e||"root"},!0===c?u:t),d.x=400,d.y=100,d.label="Element";var h=[];if(void 0!==p)for(var m in p[Symbol.for("config")].props)delete d[p[Symbol.for("config")].props[m]],h.push(p[Symbol.for("config")].props[m]);l[1].populate(d),!0===c&&(f-=1),e=l[1];var g,v={};if(v.x=400,v.y=100,v.label="Element","string"==typeof(s=v.is||"SlotCard")){if(!(g=n.components&&n.components[s]||r[s]))throw new Error('Component "SlotCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(g=s);l[2]=g.call(null,{props:v},l[1],t),l[2][Symbol.for("slots")][0]?(e=l[2][Symbol.for("slots")][0],u=l[2],c=!0):e=l[2][Symbol.for("children")][0],!0===c&&(f=2);l[3]=this.element({parent:e||"root"},!0===c?u:t),l[3].populate({}),!0===c&&(f-=1),e=l[3];var y={};l[4]=this.element({parent:e||"root"},!0===c?u:t),y.color=t.color,y.w=100,y.h=100,l[4].populate(y),!0===c&&(f-=1),!0===c&&0===f&&(c=!1);var b=n.components&&n.components.SlotCard||r.SlotCard;e=l[0];var x={};l[5]=this.element({parent:e||"root"},!0===c?u:t),x.x=800,x.y=100,x.label="Component";var w=[];if(void 0!==b)for(var S in b[Symbol.for("config")].props)delete x[b[Symbol.for("config")].props[S]],w.push(b[Symbol.for("config")].props[S]);l[5].populate(x),!0===c&&(f-=1),e=l[5];var T,k={};if(k.x=800,k.y=100,k.label="Component","string"==typeof(s=k.is||"SlotCard")){if(!(T=n.components&&n.components[s]||r[s]))throw new Error('Component "SlotCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(T=s);l[6]=T.call(null,{props:k},l[5],t),l[6][Symbol.for("slots")][0]?(e=l[6][Symbol.for("slots")][0],u=l[6],c=!0):e=l[6][Symbol.for("children")][0],!0===c&&(f=2);l[7]=this.element({parent:e||"root"},!0===c?u:t),l[7].populate({}),!0===c&&(f-=1);var C=n.components&&n.components.Square||r.Square;e=l[7];var A={};l[8]=this.element({parent:e||"root"},!0===c?u:t),A.size=200,A.y=50;var E=[];if(void 0!==C)for(var I in C[Symbol.for("config")].props)delete A[C[Symbol.for("config")].props[I]],E.push(C[Symbol.for("config")].props[I]);l[8].populate(A),!0===c&&(f-=1),e=l[8];var M,R={};if(R.size=200,R.y=50,"string"==typeof(s=R.is||"Square")){if(!(M=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(M=s);l[9]=M.call(null,{props:R},l[8],t),l[9][Symbol.for("slots")][0]?(e=l[9][Symbol.for("slots")][0],u=l[9],c=!0):e=l[9][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),!0===c&&0===f&&(c=!1);var _=n.components&&n.components.SlotCard||r.SlotCard;e=l[0];var L={};l[10]=this.element({parent:e||"root"},!0===c?u:t),L.x=1200,L.y=100,L.label="Element & Component";var D=[];if(void 0!==_)for(var P in _[Symbol.for("config")].props)delete L[_[Symbol.for("config")].props[P]],D.push(_[Symbol.for("config")].props[P]);l[10].populate(L),!0===c&&(f-=1),e=l[10];var O,N={};if(N.x=1200,N.y=100,N.label="Element & Component","string"==typeof(s=N.is||"SlotCard")){if(!(O=n.components&&n.components[s]||r[s]))throw new Error('Component "SlotCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(O=s);l[11]=O.call(null,{props:N},l[10],t),l[11][Symbol.for("slots")][0]?(e=l[11][Symbol.for("slots")][0],u=l[11],c=!0):e=l[11][Symbol.for("children")][0],!0===c&&(f=3);l[12]=this.element({parent:e||"root"},!0===c?u:t),l[12].populate({}),!0===c&&(f-=1),e=l[12];var U={};l[13]=this.element({parent:e||"root"},!0===c?u:t),U.color=t.color,U.w=100,U.h=100,l[13].populate(U),!0===c&&(f-=1);var B=n.components&&n.components.Square||r.Square;e=l[12];var j={};l[14]=this.element({parent:e||"root"},!0===c?u:t),j.size=200,j.y=150;var F=[];if(void 0!==B)for(var z in B[Symbol.for("config")].props)delete j[B[Symbol.for("config")].props[z]],F.push(B[Symbol.for("config")].props[z]);l[14].populate(j),!0===c&&(f-=1),e=l[14];var G,V={};if(V.size=200,V.y=150,"string"==typeof(s=V.is||"Square")){if(!(G=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(G=s);l[15]=G.call(null,{props:V},l[14],t),l[15][Symbol.for("slots")][0]?(e=l[15][Symbol.for("slots")][0],u=l[15],c=!0):e=l[15][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),!0===c&&0===f&&(c=!1);var H=n.components&&n.components.Card||r.Card;e=l[0];var q={};l[16]=this.element({parent:e||"root"},!0===c?u:t),q.x=400,q.y=700,q.size="small";var X=[];if(void 0!==H)for(var W in H[Symbol.for("config")].props)delete q[H[Symbol.for("config")].props[W]],X.push(H[Symbol.for("config")].props[W]);l[16].populate(q),!0===c&&(f-=1),e=l[16];var K,$={};if($.x=400,$.y=700,$.size="small","string"==typeof(s=$.is||"Card")){if(!(K=n.components&&n.components[s]||r[s]))throw new Error('Component "Card" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(K=s);l[17]=K.call(null,{props:$},l[16],t),l[17][Symbol.for("slots")][0]?(e=l[17][Symbol.for("slots")][0],u=l[17],c=!0):e=l[17][Symbol.for("children")][0],!0===c&&(f=2);l[18]=this.element({parent:e||"root"},!0===c?u:t),l[18].populate({}),!0===c&&(f-=1),e=l[18];var Y={};l[19]=this.element({parent:e||"root"},!0===c?u:t),Y.color=t.color,Y.w=100,Y.h=100,l[19].populate(Y),!0===c&&(f-=1),!0===c&&0===f&&(c=!1);var Q=n.components&&n.components.NamedSlotCard||r.NamedSlotCard;e=l[0];var J={};l[20]=this.element({parent:e||"root"},!0===c?u:t),J.x=800,J.y=700;var Z=[];if(void 0!==Q)for(var ee in Q[Symbol.for("config")].props)delete J[Q[Symbol.for("config")].props[ee]],Z.push(Q[Symbol.for("config")].props[ee]);l[20].populate(J),!0===c&&(f-=1),e=l[20];var te,ne={};if(ne.x=800,ne.y=700,"string"==typeof(s=ne.is||"NamedSlotCard")){if(!(te=n.components&&n.components[s]||r[s]))throw new Error('Component "NamedSlotCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(te=s);l[21]=te.call(null,{props:ne},l[20],t),l[21][Symbol.for("slots")][0]?(e=l[21][Symbol.for("slots")][0],u=l[21],c=!0):e=l[21][Symbol.for("children")][0],!0===c&&(f=5);l[22]=this.element({parent:e||"root"},!0===c?u:t),l[22].populate({}),!0===c&&(f-=1),e=l[22];var re={};l[23]=this.element({parent:e||"root"},!0===c?u:t),re.color="0x0891b2ff",re.x=10,re.y=140,re.w=80,re.h=60,re.parent=void 0!==u[Symbol.for("slots")]&&!0===Array.isArray(u[Symbol.for("slots")])&&u[Symbol.for("slots")].filter(function(e){return"second"===e.ref}).shift()||e,re.slot="second",l[23].populate(re),!0===c&&(f-=1),e=l[22];var oe={};l[24]=this.element({parent:e||"root"},!0===c?u:t),oe.color=t.color,oe.w=100,oe.h=100,oe.parent=void 0!==u[Symbol.for("slots")]&&!0===Array.isArray(u[Symbol.for("slots")])&&u[Symbol.for("slots")].filter(function(e){return"third"===e.ref}).shift()||e,oe.slot="third",l[24].populate(oe),!0===c&&(f-=1);var ie=n.components&&n.components.Square||r.Square;e=l[22];var ae={};l[25]=this.element({parent:e||"root"},!0===c?u:t),ae.size=100,ae.parent=void 0!==u[Symbol.for("slots")]&&!0===Array.isArray(u[Symbol.for("slots")])&&u[Symbol.for("slots")].filter(function(e){return"first"===e.ref}).shift()||e,ae.slot="first";var se=[];if(void 0!==ie)for(var ue in ie[Symbol.for("config")].props)delete ae[ie[Symbol.for("config")].props[ue]],se.push(ie[Symbol.for("config")].props[ue]);l[25].populate(ae),!0===c&&(f-=1),e=l[25];var le,ce={};if(ce.size=100,ce.slot="first","string"==typeof(s=ce.is||"Square")){if(!(le=n.components&&n.components[s]||r[s]))throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(le=s);l[26]=le.call(null,{props:ce},l[25],t),l[26][Symbol.for("slots")][0]?(e=l[26][Symbol.for("slots")][0],u=l[26],c=!0):e=l[26][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),e=l[22];var fe={};return l[27]=this.element({parent:e||"root"},!0===c?u:t),fe.color="0x4d7c0fff",fe.x=40,fe.y=40,fe.w=40,fe.h=60,fe.parent=void 0!==u[Symbol.for("slots")]&&!0===Array.isArray(u[Symbol.for("slots")])&&u[Symbol.for("slots")].filter(function(e){return"second"===e.ref}).shift()||e,fe.slot="second",l[27].populate(fe),!0===c&&(f-=1),!0===c&&0===f&&(c=!1),l},effects:[function(e,t,n,r,o,i){t[4].set("color",e.color)},function(e,t,n,r,o,i){t[13].set("color",e.color)},function(e,t,n,r,o,i){t[19].set("color",e.color)},function(e,t,n,r,o,i){t[24].set("color",e.color)}],context:{}},state:function(){return{color:Sa[0]}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t=Sa.indexOf(e.color)+1;e.color=t<=Sa.length?Sa[t]:Sa[0]},600)}}}),ka=Go.Component("MemoryCard",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=320,u.h=200,u.x=360*t.col,u.y=250*t.row,u.scale={transition:t.scale},u.rotation={transition:t.disabled?-2:0},s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.h={transition:t.h},l.w=320,l.y=125,l.mount="{y: 0.5}",l.color={transition:t.disabled?"#ccc":"#fff"},l.src=t.image+"&w=320&h=200",l.effects=[{type:"radius",props:{radius:6}}],l.show=t.open,s[1].populate(l),e=s[0];var c={};return s[2]=this.element({parent:e||"root"},t),c.h={transition:t.h},c.w=320,c.y=125,c.mount="{y: 0.5}",c.color=t.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},c.effects=[{type:"radius",props:{radius:6}}],s[2].populate(c),s},effects:[function(e,t,n,r,o,i){t[0].set("scale",{transition:e.scale})},function(e,t,n,r,o,i){t[0].set("rotation",{transition:e.disabled?-2:0})},function(e,t,n,r,o,i){t[1].set("h",{transition:e.h})},function(e,t,n,r,o,i){t[1].set("color",{transition:e.disabled?"#ccc":"#fff"})},function(e,t,n,r,o,i){t[1].set("src",e.image+"&w=320&h=200")},function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:6}}])},function(e,t,n,r,o,i){t[1].set("show",e.open)},function(e,t,n,r,o,i){t[2].set("h",{transition:e.h})},function(e,t,n,r,o,i){t[2].set("color",e.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(e,t,n,r,o,i){t[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state:function(){return{disabled:!1,open:!1,h:200,scale:1,announcement:null}},hooks:{init:function(){var e=this;this.$listen("closeMemoryCard",function(t){t===e.index&&e.$setTimeout(function(){return e.flip()},1e3)}),this.$listen("deactivateMemoryCard",function(t){t===e.index&&(e.$setTimeout(function(){e.scale=1.16},500),e.$setTimeout(function(){e.disabled=!0,e.scale=1},800))})},focus:function(e){this.scale=1.08;var t="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.announcement=this.$announcer.speak(t)},unfocus:function(){this.scale=1,this.announcement.cancel()}},input:{enter:function(){this.disabled||(this.open?this.$announcer.speak("Card already open. Choose another"):(this.flip(),this.$announcer.speak("Image of a ".concat(this.description)),this.$emit("selectMemoryCard",this.index)))}},methods:{flip:function(){var e=this;this.h=0,this.$setTimeout(function(){e.open=!e.open,e.h=200},250)}}}),Ca=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],Aa=Go.Component("Announcer",{components:{MemoryCard:ka},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1;f[0]=this.element({parent:e||"root"},!0===p?l:t),f[0].populate({}),e=f[0];var d={};f[1]=this.element({parent:e||"root"},!0===p?l:t),d.font="raleway",d.size=80,d.color="0xffffffff",d.content="Let's play memory!",d.x=580,d.y=60,d.__textnode=!0,f[1].populate(d),e=f[0];var h={};f[2]=this.element({parent:e||"root"},!0===p?l:t),h.font="kalam",h.size=40,h.color="0xb91c1cff",h.content="the Accessible edition :)",h.x=1200,h.y=170,h.rotation="-6",h.__textnode=!0,f[2].populate(h),e=f[0];var m={};f[3]=this.element({parent:e||"root"},!0===p?l:t),m.x=260,m.y=260,f[3].populate(m),e=f[3];var g,v,y,b=[],x=function(){t[Symbol.for("removeGlobalEffects")](y),y=null,y=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,m=d.length,y={}||{};g=y.from||0,v="to"in y?y.to:d.length;for(;m--;){var b=d[m];m<v&&m>=g&&h.add(""+b.id)}for(var x=f.length;x--;)if(!1===h.has(f[x])){var w=f[x];a[4][w]&&a[4][w].destroy(),delete a[4][w],a[5][w]&&a[5][w].destroy(),delete a[5][w]}f.length=0;for(var S=d.length,T=[],k=function(){if(C<g||C>=v)return 1;var h=Object.create(t);e=a[3],h.card=d[C],h.index=C,h.key=""+h.card.id,f.push(h.key);var m=n.components&&n.components.MemoryCard||r.MemoryCard;void 0===a[4]&&(a[4]={});var y={};void 0===a[4][h.key]&&(a[4][h.key]=c.element({parent:e||"root"},!0===p?l:t)),y.col=h.index%4,y.row=Math.floor(h.index/4)%3,y.image=h.card.image,y.description=h.card.description,y.ref="card"+h.index,y.index=h.index;var b=[];if(void 0!==m)for(var x in m[Symbol.for("config")].props)delete y[m[Symbol.for("config")].props[x]],b.push(m[Symbol.for("config")].props[x]);void 0===a[4][h.key].nodeId&&a[4][h.key].populate(y),void 0===a[5]&&(a[5]={}),e=a[4][h.key];var w={};if(void 0===a[5][h.key]){var S;if(u=h.index%4,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.col=u,u=Math.floor(h.index/4)%3,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.row=u,w.image=h.card.image,w.description=h.card.description,u="card"+h.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.ref=u,u=h.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.index=u,"string"==typeof(s=w.is||"MemoryCard")){if(!(S=n.components&&n.components[s]||r[s]))throw new Error('Component "MemoryCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(S=s);a[5][h.key]=S.call(null,{props:w},a[4][h.key],t),a[5][h.key][Symbol.for("slots")][0]?(e=a[5][h.key][Symbol.for("slots")][0],l=a[5][h.key],p=!0):e=a[5][h.key][Symbol.for("children")][0]}var k=function(){void 0!==b&&-1!==b.indexOf("col")||a[4][h.key].set("col",h.index%4)};o(k,null),T.push(k),t[Symbol.for("effects")].push(k);var A=function(){void 0!==b&&-1!==b.indexOf("row")||a[4][h.key].set("row",Math.floor(h.index/4)%3)};o(A,null),T.push(A),t[Symbol.for("effects")].push(A);var E=function(){void 0!==b&&-1!==b.indexOf("ref")||a[4][h.key].set("ref","card"+h.index)};o(E,null),T.push(E),t[Symbol.for("effects")].push(E);var I=function(){void 0!==b&&-1!==b.indexOf("index")||a[4][h.key].set("index",h.index)};o(I,null),T.push(I),t[Symbol.for("effects")].push(I),a[5][h.key][Symbol.for("props")].col=h.index%4,a[5][h.key][Symbol.for("props")].row=Math.floor(h.index/4)%3,a[5][h.key][Symbol.for("props")].ref="card"+h.index,a[5][h.key][Symbol.for("props")].index=h.index},C=0;C<S;C++)k();return T}(t.cards,f,b)};return t[Symbol.for("effects")].push(x),o(x,["cards"]),f},effects:[],context:{}},state:function(){return{cards:Ca.concat(Ca).map(function(e,t){return g(g({},e),{},{id:"card".concat(t)})}),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init:function(){var e=this;this.shuffle(),this.$listen("selectMemoryCard",function(t){e.openCards.length<2&&e.openCards.push(t),2===e.openCards.length&&(e.cards[e.openCards[0]].description===e.cards[e.openCards[1]].description?(e.$emit("deactivateMemoryCard",e.openCards[0]),e.$emit("deactivateMemoryCard",e.openCards[1]),e.pairs++,e.$setTimeout(function(){e.$announcer.speak(e.pairs===e.cards.length/2?"Congratulations, you found all pairs!":"You found a pair! ".concat(e.cards.length/2-e.pairs," more to go."))},1500)):(e.$emit("closeMemoryCard",e.openCards[0]),e.$emit("closeMemoryCard",e.openCards[1]),e.$setTimeout(function(){e.$announcer.speak("No match. Try again")},1500)),e.openCards.length=0)})},destroy:function(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol:function(e){-1!==this.focusedRow?(e+=4*this.focusedRow,this.$select("card"+e).$focus()):this.focusedRow=0},focusedRow:function(e){-1!==this.focusedCol?(e=this.focusedCol+4*e,this.$select("card"+e).$focus()):this.focusedCol=0}},methods:{shuffle:function(){this.cards.sort(function(){return.5-Math.random()})}},input:{left:function(){0===this.focusedCol?0===this.focusedRow?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right:function(){3===this.focusedCol?2===this.focusedRow?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up:function(){0===this.focusedCol&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down:function(){2===this.focusedRow&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),Ea=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},Ia=Go.Component("Item",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};return s[0]=this.element({parent:e||"root"},t),u.src="assets/blits-b-small.png",u.w=96,u.h=168,u.x={transition:{value:t.x,duration:2900}},u.y={transition:{value:t.y,duration:2900}},u.rotation={transition:{value:t.rotation,duration:2900}},u.scale={transition:{value:t.scale,duration:1e3}},s[0].populate(u),s},effects:[function(e,t,n,r,o,i){t[0].set("x",{transition:{value:e.x,duration:2900}})},function(e,t,n,r,o,i){t[0].set("y",{transition:{value:e.y,duration:2900}})},function(e,t,n,r,o,i){t[0].set("rotation",{transition:{value:e.rotation,duration:2900}})},function(e,t,n,r,o,i){t[0].set("scale",{transition:{value:e.scale,duration:1e3}})}],context:{}},state:function(){return{x:Ea(20,1560),y:Ea(20,720),rotation:0,scale:.1}},hooks:{ready:function(){var e=this;this.scale=1,this.$setInterval(function(){e.scale=1,e.x=Ea(20,1740),e.y=Ea(20,900),e.rotation=Ea(10,360)},3e3)}}}),Ma=Go.Component("Exponential",{components:{Item:Ia},code:{render:function(e,t,n,r,o,i,a){var s,u,l=this,c=[],f=!1;c[0]=this.element({parent:e||"root"},!0===f?u:t),c[0].populate({}),e=c[0];var p,d,h,m=[],g=function(){t[Symbol.for("removeGlobalEffects")](h),h=null,h=function(){var o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,c=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,m=c.length,g={}||{};p=g.from||0,d="to"in g?g.to:c.length;for(;m--;){var v=c[m];m<d&&m>=p&&h.add(""+v)}for(var y=a.length;y--;)if(!1===h.has(a[y])){var b=a[y];o[1][b]&&o[1][b].destroy(),delete o[1][b],o[2][b]&&o[2][b].destroy(),delete o[2][b]}a.length=0;for(var x=c.length,w=0;w<x;w++)if(!(w<p||w>=d)){var S=Object.create(t);e=o[0],S.item=c[w],S[void 0]=w,S.key=""+S.item,a.push(S.key);var T=n.components&&n.components.Item||r.Item;void 0===o[1]&&(o[1]={});var k={};void 0===o[1][S.key]&&(o[1][S.key]=l.element({parent:e||"root"},!0===f?u:t));var C=[];if(void 0!==T)for(var A in T[Symbol.for("config")].props)delete k[T[Symbol.for("config")].props[A]],C.push(T[Symbol.for("config")].props[A]);void 0===o[1][S.key].nodeId&&o[1][S.key].populate(k),void 0===o[2]&&(o[2]={}),e=o[1][S.key];var E={};if(void 0===o[2][S.key]){var I=void 0;if("string"==typeof(s=E.is||"Item")){if(!(I=n.components&&n.components[s]||r[s]))throw new Error('Component "Item" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(I=s);o[2][S.key]=I.call(null,{props:E},o[1][S.key],t),o[2][S.key][Symbol.for("slots")][0]?(e=o[2][S.key][Symbol.for("slots")][0],u=o[2][S.key],f=!0):e=o[2][S.key][Symbol.for("children")][0]}}return[]}(t.items,c,m)};return t[Symbol.for("effects")].push(g),o(g,["items"]),c},effects:[],context:{}},state:function(){return{items:[]}},hooks:{ready:function(){var e=this,t=this.$setInterval(function(){for(var n=0;n<=Math.floor(e.items.length/10);n++)e.items.push("item".concat(e.items.length));e.$log.info("# items",e.items.length),e.items.length>100&&clearInterval(t)},2e3)}}}),Ra=Go.Component("Ball",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};return s[0]=this.element({parent:e||"root"},t),u.w=100,u.h=100,u.src="/assets/basketball.png",s[0].populate(u),s},effects:[],context:{}},hooks:{attach:function(){this.$emit("ballUpdate","Attached to render tree")},detach:function(){this.$emit("ballUpdate","Detached from render tree")},enter:function(){this.$emit("ballUpdate","Entered viewport")},exit:function(){this.$emit("ballUpdate","Exited viewport")}}}),_a=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},La=Go.Component("Viewport",{components:{Ball:Ra},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0;c[0]=this.element({parent:e||"root"},!0===f?l:t),c[0].populate({}),!0===f&&(p-=1),e=c[0];var d={};c[1]=this.element({parent:e||"root"},!0===f?l:t),d.size=32,d.x=960,d.y=540,d.mount=.5,d.content=t.status.join("\n"),d.lineheight=52,d.maxwidth=500,d.__textnode=!0,c[1].populate(d),!0===f&&(p-=1);var h=n.components&&n.components.Ball||r.Ball;e=c[0];var m={};c[2]=this.element({parent:e||"root"},!0===f?l:t),m.x={transition:{value:t.x,duration:1250}},m.y={transition:{value:t.y,duration:1250}},m.rotation={transition:{value:t.rotation,duration:1400,easing:"ease-in-out"}},m.w=100,m.h=100;var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);c[2].populate(m),!0===f&&(p-=1),e=c[2];var y,b={};if(u={transition:{value:t.x,duration:1250}},!0===Array.isArray(u)&&(u=i(u).slice(0)),b.x=u,u={transition:{value:t.y,duration:1250}},!0===Array.isArray(u)&&(u=i(u).slice(0)),b.y=u,u={transition:{value:t.rotation,duration:1400,easing:"ease-in-out"}},!0===Array.isArray(u)&&(u=i(u).slice(0)),b.rotation=u,b.w=100,b.h=100,"string"==typeof(s=b.is||"Ball")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "Ball" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);return c[3]=y.call(null,{props:b},c[2],t),c[3][Symbol.for("slots")][0]?(e=c[3][Symbol.for("slots")][0],l=c[3],f=!0):e=c[3][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){t[1].set("content",e.status.join("\n"))},function(e,t,n,r,o,i){"undefined"!=typeof skip2&&-1!==skip2.indexOf("x")||t[2].set("x",{transition:{value:e.x,duration:1250}})},function(e,t,n,r,o,i){"undefined"!=typeof skip2&&-1!==skip2.indexOf("y")||t[2].set("y",{transition:{value:e.y,duration:1250}})},function(e,t,n,r,o,i){"undefined"!=typeof skip2&&-1!==skip2.indexOf("rotation")||t[2].set("rotation",{transition:{value:e.rotation,duration:1400,easing:"ease-in-out"}})},function(e,t,n,r,o,i){t[3][Symbol.for("props")].x={transition:{value:e.x,duration:1250}}},function(e,t,n,r,o,i){t[3][Symbol.for("props")].y={transition:{value:e.y,duration:1250}}},function(e,t,n,r,o,i){t[3][Symbol.for("props")].rotation={transition:{value:e.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state:function(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready:function(){var e=this;this.$listen("ballUpdate",function(t){e.status.unshift("".concat(e.count++," -  ").concat(t)),e.status.length=Math.min(e.status.length,8)}),this.rotation=_a(-90,90),this.x=910,this.y=490,this.$setInterval(function(){e.x=_a(-300,2220),e.y=_a(-300,1380),e.rotation=_a(-90,90)},2500)}}}),Da={code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=1920,u.h=1080,u.color="0xffffffff",u.effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.show=void 0!==t.up,s[1].populate(l),e=s[1];var c={};s[2]=this.element({parent:e||"root"},t),c.src="assets/arrow.png",c.w=100,c.h=44,c.x=960,c.y=40,c.mount="{x: 0.5}",s[2].populate(c),e=s[1];var f={};s[3]=this.element({parent:e||"root"},t),f.content=t.up&&t.up.toUpperCase(),f.x=960,f.y=100,f.size=76,f.mount="{x: 0.5}",f.__textnode=!0,s[3].populate(f),e=s[0];var p={};s[4]=this.element({parent:e||"root"},t),p.show=void 0!==t.right,s[4].populate(p),e=s[4];var d={};s[5]=this.element({parent:e||"root"},t),d.src="assets/arrow.png",d.w=100,d.h=44,d.x=1900,d.y=540,d.mount="{x: 1, y: 0.5}",d.rotation=90,s[5].populate(d),e=s[4];var h={};s[6]=this.element({parent:e||"root"},t),h.content=t.right&&t.right.toUpperCase(),h.x=1760,h.y=540,h.size=76,h.rotation=90,h.mount=.5,h.__textnode=!0,s[6].populate(h),e=s[0];var m={};s[7]=this.element({parent:e||"root"},t),m.show=void 0!==t.down,s[7].populate(m),e=s[7];var g={};s[8]=this.element({parent:e||"root"},t),g.src="assets/arrow.png",g.w=100,g.h=44,g.x=960,g.y=1040,g.mount="{x: 0.5, y: 1}",g.rotation=180,s[8].populate(g),e=s[7];var v={};s[9]=this.element({parent:e||"root"},t),v.content=t.down&&t.down.toUpperCase(),v.x=960,v.y=980,v.size=76,v.mount="{x: 0.5, y: 1}",v.__textnode=!0,s[9].populate(v),e=s[0];var y={};s[10]=this.element({parent:e||"root"},t),y.show=void 0!==t.left,s[10].populate(y),e=s[10];var b={};s[11]=this.element({parent:e||"root"},t),b.src="assets/arrow.png",b.w=100,b.h=44,b.x=40,b.y=540,b.mount="{ y: 0.5}",b.rotation="-90",s[11].populate(b),e=s[10];var x={};s[12]=this.element({parent:e||"root"},t),x.content=t.left&&t.left.toUpperCase(),x.x=180,x.y=540,x.size=76,x.mount=.5,x.rotation="-90",x.__textnode=!0,s[12].populate(x),e=s[0];var w={};return s[13]=this.element({parent:e||"root"},t),w.content=t.pageTitle,w.font="raleway",w.x=960,w.y=540,w.size=240,w.mount=.5,w.__textnode=!0,s[13].populate(w),s},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(e,t,n,r,o,i){t[1].set("show",void 0!==e.up)},function(e,t,n,r,o,i){t[3].set("content",e.up&&e.up.toUpperCase())},function(e,t,n,r,o,i){t[4].set("show",void 0!==e.right)},function(e,t,n,r,o,i){t[6].set("content",e.right&&e.right.toUpperCase())},function(e,t,n,r,o,i){t[7].set("show",void 0!==e.down)},function(e,t,n,r,o,i){t[9].set("content",e.down&&e.down.toUpperCase())},function(e,t,n,r,o,i){t[10].set("show",void 0!==e.left)},function(e,t,n,r,o,i){t[12].set("content",e.left&&e.left.toUpperCase())},function(e,t,n,r,o,i){t[13].set("content",e.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle:function(){return this.page&&this.page.title||this.title}},state:function(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},Pa=Go.Component("RouterHookPage",g(g({},Da),{},{state:function(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right:function(){this.$router.to("/examples/router-hooks/movie")},down:function(){this.$router.to("/examples/router-hooks/episode/1")}}})),Oa=Go.Component("RouterHookMovie",g(g({},Da),{},{state:function(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left:function(){this.$router.back()},right:function(){this.$router.to("/examples/router-hooks/rating")}}})),Na=Go.Component("RouterHookRating",g(g({},Da),{},{state:function(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left:function(){this.$router.back()},right:function(){this.$router.to("/examples/router-hooks/")}}})),Ua=Go.Component("RouterHookEpisode",g(g({},Da),{},{state:function(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left:function(){this.$router.back()},right:function(){this.$router.to("/examples/router-hooks/episode/".concat(this.page.id+1),void 0,{inHistory:!1})}}})),Ba=Go.Component("RouterHookEpisode",g(g({},Da),{},{state:function(){return{title:"Episodes \n overview",right:"FIRST EPISODE"}},input:{left:function(){this.$router.back()},right:function(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}})),ja={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},Fa=[{path:"/examples/router-hooks",component:Pa,hooks:{before:function(e,t){return i(n().m(function r(){return n().w(function(n){for(;;)if(0===n.n)return t&&"examples/router-hooks/movie"===t.path&&(e.transition=ja.slideInOutRight),t&&"examples/router-hooks/rating"===t.path&&(e.transition=ja.slideInOutLeft),t&&t.path.indexOf("episode")>-1&&(e.transition=ja.slideInOutDown),n.a(2,e)},r)}))()}}},{path:"/examples/router-hooks/episode/:id",component:Ua,hooks:{before:function(e,t){t&&t.path.indexOf("episode")>-1&&(e.transition=ja.slideInOutLeft);var n=e.params.id;return n>5?"/examples/router-hooks/":(e.data.page={id:parseInt(n),title:"Episode ".concat(n)},e)}},transition:ja.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:Ba,transition:ja.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:Oa,hooks:{before:function(e,t){return t&&"examples/router-hooks"===t.path&&(e.transition=ja.slideInOutLeft),t&&"examples/router-hooks/rating"===t.path&&(e.transition=ja.slideInOutRight),e}}},{path:"/examples/router-hooks/rating",component:Na,transition:ja.slideInOutLeft}],za=Go.Component("Resize",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.y=30,u.content="fit (Resize Mode) sample",u.maxwidth=1920,u.align="center",u.__textnode=!0,s[1].populate(u),e=s[0];var l={};s[2]=this.element({parent:e||"root"},t),l.x={transition:{value:t.pages.x1,duration:200}},l.y=90,s[2].populate(l),e=s[2];var c={};s[3]=this.element({parent:e||"root"},t),c.x=100,c.content="Image dimensions: 2560 X 1440",c.__textnode=!0,s[3].populate(c),e=s[2];var f={};s[4]=this.element({parent:e||"root"},t),f.x=100,f.y=80,f.content=t.titles.t1,f.__textnode=!0,s[4].populate(f),e=s[2];var p={};s[5]=this.element({parent:e||"root"},t),p.y=150,p.x=100,s[5].populate(p),e=s[5];var d={};s[6]=this.element({parent:e||"root"},t),d.w=t.w,d.h=t.w-300,d.src=t.img,d.fit="{type: 'cover', position: { y: 0 } }",s[6].populate(d),e=s[5];var h={};s[7]=this.element({parent:e||"root"},t),h.w=t.w,h.h=t.w-300,h.src=t.img,h.fit="{ type: 'cover', position: { y: 0.5 } }",h.x=600,s[7].populate(h),e=s[5];var m={};s[8]=this.element({parent:e||"root"},t),m.w=t.w,m.h=t.w-300,m.src=t.img,m.fit="{ type: 'cover', position: { y: 1 } }",m.x=1200,s[8].populate(m),e=s[2];var g={};s[9]=this.element({parent:e||"root"},t),g.x=100,g.y=500,g.content=t.titles.t2,g.__textnode=!0,s[9].populate(g),e=s[2];var v={};s[10]=this.element({parent:e||"root"},t),v.y=600,v.x=100,s[10].populate(v),e=s[10];var y={};s[11]=this.element({parent:e||"root"},t),y.w=t.w,y.h=t.w-150,y.src=t.img,y.fit="{ type: 'cover', position: { x: 0 } }",s[11].populate(y),e=s[10];var b={};s[12]=this.element({parent:e||"root"},t),b.w=t.w,b.h=t.w-150,b.src=t.img,b.fit="{ type: 'cover', position: { x: 0.5 } }",b.x=600,s[12].populate(b),e=s[10];var x={};s[13]=this.element({parent:e||"root"},t),x.w=t.w,x.h=t.w-150,x.src=t.img,x.fit="{ type: 'cover', position: { x: 1 } }",x.x=1200,s[13].populate(x),e=s[0];var w={};s[14]=this.element({parent:e||"root"},t),w.x={transition:{value:t.pages.x2,duration:200}},w.y=90,s[14].populate(w),e=s[14];var S={};s[15]=this.element({parent:e||"root"},t),S.x=100,S.content="Image dimensions: 1440 X 2560",S.__textnode=!0,s[15].populate(S),e=s[14];var T={};s[16]=this.element({parent:e||"root"},t),T.x=100,T.y=80,T.content=t.titles.t3,T.__textnode=!0,s[16].populate(T),e=s[14];var k={};s[17]=this.element({parent:e||"root"},t),k.y=150,k.x=100,s[17].populate(k),e=s[17];var C={};s[18]=this.element({parent:e||"root"},t),C.w=t.w,C.h=t.w-200,C.src=t.img1,C.fit="{ type: 'cover', position: { y: 0, x: 0 } }",s[18].populate(C),e=s[17];var A={};s[19]=this.element({parent:e||"root"},t),A.w=t.w,A.h=t.w-200,A.src=t.img1,A.fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",A.x=600,s[19].populate(A),e=s[17];var E={};s[20]=this.element({parent:e||"root"},t),E.w=t.w,E.h=t.w-200,E.src=t.img1,E.fit="{ type: 'cover', position: { y: 1, x: 1 } }",E.x=1200,s[20].populate(E),e=s[14];var I={};s[21]=this.element({parent:e||"root"},t),I.x=100,I.y=500,I.content=t.titles.t4,I.__textnode=!0,s[21].populate(I),e=s[14];var M={};s[22]=this.element({parent:e||"root"},t),M.y=570,M.x=100,s[22].populate(M),e=s[22];var R={};s[23]=this.element({parent:e||"root"},t),R.w=t.w-350,R.h=t.w-100,R.src=t.img1,R.fit="{ type: 'cover', position: { x: 0 } }",s[23].populate(R),e=s[22];var _={};s[24]=this.element({parent:e||"root"},t),_.w=t.w-350,_.h=t.w-100,_.src=t.img1,_.fit="{ type: 'cover', position: { x: 0.25 } }",_.x=250,s[24].populate(_),e=s[22];var L={};s[25]=this.element({parent:e||"root"},t),L.w=t.w-350,L.h=t.w-100,L.src=t.img1,L.fit="{ type: 'cover', position: { x: 0.5 } }",L.x=500,s[25].populate(L),e=s[22];var D={};s[26]=this.element({parent:e||"root"},t),D.w=t.w-350,D.h=t.w-100,D.src=t.img1,D.fit="{ type: 'cover', position: { x: 0.75 } }",D.x=750,s[26].populate(D),e=s[22];var P={};s[27]=this.element({parent:e||"root"},t),P.w=t.w-350,P.h=t.w-100,P.src=t.img1,P.fit="{ type: 'cover', position: { x: 1 } }",P.x=1e3,s[27].populate(P),e=s[0];var O={};s[28]=this.element({parent:e||"root"},t),O.x={transition:{value:t.pages.x3,duration:200}},O.y=90,s[28].populate(O),e=s[28];var N={};s[29]=this.element({parent:e||"root"},t),N.x=100,N.content="Image dimensions: 2560 X 1440",N.__textnode=!0,s[29].populate(N),e=s[28];var U={};s[30]=this.element({parent:e||"root"},t),U.x=100,U.y=80,U.content=t.titles.t5,U.__textnode=!0,s[30].populate(U),e=s[28];var B={};s[31]=this.element({parent:e||"root"},t),B.y=150,B.x=100,B.w=t.w+100,B.h=t.w-200,B.color="0x000000ff",s[31].populate(B),e=s[31];var j={};s[32]=this.element({parent:e||"root"},t),j.w=t.w+100,j.h=t.w-200,j.src=t.img,j.fit="contain",s[32].populate(j),e=s[28];var F={};s[33]=this.element({parent:e||"root"},t),F.x=100,F.y=500,F.content=t.titles.t6,F.__textnode=!0,s[33].populate(F),e=s[28];var z={};s[34]=this.element({parent:e||"root"},t),z.y=550,z.x=100,z.w=t.w+100,z.h=t.w-100,z.color="0x000000ff",s[34].populate(z),e=s[34];var G={};s[35]=this.element({parent:e||"root"},t),G.w=t.w+100,G.h=t.w-100,G.src=t.img,G.fit="contain",s[35].populate(G),e=s[0];var V={};return s[36]=this.element({parent:e||"root"},t),V.x=1700,V.y=20,V.content="Page "+t.activePage+"/"+t.totalPages,V.__textnode=!0,s[36].populate(V),s},effects:[function(e,t,n,r,o,i){t[2].set("x",{transition:{value:e.pages.x1,duration:200}})},function(e,t,n,r,o,i){t[3].set("content","Image dimensions: 2560 X 1440")},function(e,t,n,r,o,i){t[14].set("x",{transition:{value:e.pages.x2,duration:200}})},function(e,t,n,r,o,i){t[15].set("content","Image dimensions: 1440 X 2560")},function(e,t,n,r,o,i){t[28].set("x",{transition:{value:e.pages.x3,duration:200}})},function(e,t,n,r,o,i){t[29].set("content","Image dimensions: 2560 X 1440")},function(e,t,n,r,o,i){t[36].set("content","Page "+e.activePage+"/"+e.totalPages)}],context:{}},state:function(){return{activePage:1,pages:{x1:0,x2:1920,x3:3840},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages:function(){return this.pages,Object.keys(this.pages).length}},input:{right:function(){if(this.activePage<this.totalPages){for(var e=1;e<=this.totalPages;e++)this.pages["x".concat(e)]=this.pages["x".concat(e)]-1920;this.activePage+=1}},left:function(){if(this.activePage>1){for(var e=this.totalPages;e>=1;e--)this.pages["x".concat(e)]=this.pages["x".concat(e)]+1920;this.activePage-=1}}}}),Ga=Go.Component("Flags",{code:{render:function(e,t,n,r,o,i,a){var s=this,u=[];u[0]=this.element({parent:e||"root"},t),u[0].populate({}),e=u[0];var l,c,f,p=[],d=function(){t[Symbol.for("removeGlobalEffects")](f),f=null,f=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,u=o.length,f={}||{};l=f.from||0,c="to"in f?f.to:o.length;for(;u--;)o[u],u<c&&u>=l&&a.add(""+u);for(var p=r.length;p--;)if(!1===a.has(r[p])){var d=r[p];n[1][d]&&n[1][d].destroy(),delete n[1][d],n[2][d]&&n[2][d].destroy(),delete n[2][d],n[3][d]&&n[3][d].destroy(),delete n[3][d]}r.length=0;for(var h=o.length,m=0;m<h;m++)if(!(m<l||m>=c)){var g=Object.create(t);e=n[0],g.language=o[m],g.index=m,g.key=""+m,r.push(g.key),e=n[0],void 0===n[1]&&(n[1]={});var v={};void 0===n[1][g.key]&&(n[1][g.key]=s.element({parent:e||"root"},t)),v.x=250*g.index,void 0===n[1][g.key].nodeId&&n[1][g.key].populate(v),e=n[1][g.key],void 0===n[2]&&(n[2]={});var y={};void 0===n[2][g.key]&&(n[2][g.key]=s.element({parent:e||"root"},t)),y.src=g.language.flag,y.w=150,y.h=150,y.alpha=g.index===g.activeIndex?1:.6,void 0===n[2][g.key].nodeId&&n[2][g.key].populate(y),e=n[1][g.key],void 0===n[3]&&(n[3]={});var b={};void 0===n[3][g.key]&&(n[3][g.key]=s.element({parent:e||"root"},t)),b.content=g.language.name,b.y=150,b.maxwidth=150,b.align="center",b.color=g.index===g.activeIndex?"0xffffffff":"0xaaaaaaff",b.__textnode=!0,void 0===n[3][g.key].nodeId&&n[3][g.key].populate(b)}return[]}(t.languages,u,p)};t[Symbol.for("effects")].push(d),o(d,["languages"]);var h=function(){t.activeIndex;for(var e=0;e<t.languages.length;e++)if(!(e<l||e>=c)){var n={};n.index=e,n.language=t.languages[e],n.key=e,u[2][n.key].set("alpha",n.index===t.activeIndex?1:.6)}};t[Symbol.for("effects")].push(h),o(h);var m=function(){t.activeIndex;for(var e=0;e<t.languages.length;e++)if(!(e<l||e>=c)){var n={};n.index=e,n.language=t.languages[e],n.key=e,u[3][n.key].set("color",n.index===t.activeIndex?"0xffffffff":"0xaaaaaaff")}};return t[Symbol.for("effects")].push(m),o(m),u},effects:[],context:{}},props:["languages"],state:function(){return{activeIndex:0}},watch:{activeIndex:function(e){var t=this.languages[e];t&&t.code&&this.$language.set(t.code)}},input:{right:function(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left:function(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),Va=Go.Component("LanguagePlugin",{components:{Flags:Ga},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0;l[0]=this.element({parent:e||"root"},!0===c?u:t),l[0].populate({}),!0===c&&(f-=1);var p=n.components&&n.components.Flags||r.Flags;e=l[0];var d={};l[1]=this.element({parent:e||"root"},!0===c?u:t),d.languages=t.languages,d.ref="flags",d.x=500,d.y=150;var h=[];if(void 0!==p)for(var m in p[Symbol.for("config")].props)delete d[p[Symbol.for("config")].props[m]],h.push(p[Symbol.for("config")].props[m]);l[1].populate(d),!0===c&&(f-=1),e=l[1];var g,v={};if(v.languages=t.languages,v.ref="flags",v.x=500,v.y=150,"string"==typeof(s=v.is||"Flags")){if(!(g=n.components&&n.components[s]||r[s]))throw new Error('Component "Flags" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(g=s);l[2]=g.call(null,{props:v},l[1],t),l[2][Symbol.for("slots")][0]?(e=l[2][Symbol.for("slots")][0],u=l[2],c=!0):e=l[2][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),e=l[0];var y={};l[3]=this.element({parent:e||"root"},!0===c?u:t),y.x=960,y.y=540,y.mount=.5,y.content=t.$language.translate("hello"),y.size=80,y.__textnode=!0,l[3].populate(y),!0===c&&(f-=1),e=l[0];var b={};l[4]=this.element({parent:e||"root"},!0===c?u:t),b.x=960,b.y=640,b.mount=.5,b.content=t.$language.translate("bye"),b.size=50,b.__textnode=!0,l[4].populate(b),!0===c&&(f-=1),e=l[0];var x={};l[5]=this.element({parent:e||"root"},!0===c?u:t),x.x=960,x.y=720,x.mount=.5,x.content=t.$language.translate("replacement",{first:"John",last:"Doe",age:18}),x.size=36,x.__textnode=!0,l[5].populate(x),!0===c&&(f-=1),e=l[0];var w={};return l[6]=this.element({parent:e||"root"},!0===c?u:t),w.size=32,w.x=960,w.y=940,w.mount=.5,w.align="center",w.content="Current language: "+t.$language.language+"\n Language file: "+(!0===t.loaded?"Loaded":"loading ..."),w.__textnode=!0,l[6].populate(w),!0===c&&(f-=1),l},effects:[function(e,t,n,r,o,i){t[3].set("content",e.$language.translate("hello"))},function(e,t,n,r,o,i){t[4].set("content",e.$language.translate("bye"))},function(e,t,n,r,o,i){t[5].set("content",e.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(e,t,n,r,o,i){t[6].set("content","Current language: "+e.$language.language+"\n Language file: "+(!0===e.loaded?"Loaded":"loading ..."))}],context:{}},state:function(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init:function(){var e=this;this.$language.set("en-US"),setTimeout(function(){e.$language.load("/assets/translations.json").then(function(){e.loaded=!0})},2e3)},focus:function(){this.$select("flags").$focus()}}}),Ha=Go.Component("Box",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=430,u.h=180,u.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],u.color="{top: '0x667a97ff', bottom: '0x475569ff'}",s[0].populate(u),e=s[0];var l={};s[1]=this.element({parent:e||"root"},t),l.x=25,l.y=20,l.content=t.header,l.w=280,l.color="0x000000ff",l.contain="width",l.__textnode=!0,s[1].populate(l),e=s[0];var c={};return s[2]=this.element({parent:e||"root"},t),c.x=25,c.y=90,c.content=t.text,c.size=45,c.w=350,c.contain="width",c.align="center",c.__textnode=!0,s[2].populate(c),s},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(e,t,n,r,o,i){t[1].set("content",e.header)},function(e,t,n,r,o,i){t[2].set("content",e.text)}],context:{}},props:["header","text"]}),qa=Go.Application({components:{Box:Ha},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0,d={};c[0]=this.element({parent:e||"root"},!0===f?l:t),d.w=1920,d.h=1080,c[0].populate(d),!0===f&&(p-=1),e=c[0];var h={};c[1]=this.element({parent:e||"root"},!0===f?l:t),h.y=250,c[1].populate(h),!0===f&&(p-=1),e=c[1];var m={};c[2]=this.element({parent:e||"root"},!0===f?l:t),m.content="KeyCode Finder",m.font="raleway",m.mount="{x: 0.5}",m.x=960,m.size=62,m.w=800,m.h=200,m.contain="width",m.__textnode=!0,c[2].populate(m),!0===f&&(p-=1),e=c[1];var g={};c[3]=this.element({parent:e||"root"},!0===f?l:t),g.content="Press any key to get find the correct key code mapping",g.mount="{x: 0.5}",g.x=960,g.y=100,g.size=32,g.w=800,g.h=200,g.contain="width",g.__textnode=!0,c[3].populate(g),!0===f&&(p-=1),e=c[0];var v={};c[4]=this.element({parent:e||"root"},!0===f?l:t),v.x=200,c[4].populate(v),!0===f&&(p-=1);var y=n.components&&n.components.Box||r.Box;e=c[4];var b={};c[5]=this.element({parent:e||"root"},!0===f?l:t),b.y=600,b.header="Key",b.text=t.key;var x=[];if(void 0!==y)for(var w in y[Symbol.for("config")].props)delete b[y[Symbol.for("config")].props[w]],x.push(y[Symbol.for("config")].props[w]);c[5].populate(b),!0===f&&(p-=1),e=c[5];var S,T={};if(T.y=600,T.header="Key",u=t.key,!0===Array.isArray(u)&&(u=i(u).slice(0)),T.text=u,"string"==typeof(s=T.is||"Box")){if(!(S=n.components&&n.components[s]||r[s]))throw new Error('Component "Box" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(S=s);c[6]=S.call(null,{props:T},c[5],t),c[6][Symbol.for("slots")][0]?(e=c[6][Symbol.for("slots")][0],l=c[6],f=!0):e=c[6][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var k=n.components&&n.components.Box||r.Box;e=c[4];var C={};c[7]=this.element({parent:e||"root"},!0===f?l:t),C.x=500,C.y=600,C.header="Code",C.text=t.code;var A=[];if(void 0!==k)for(var E in k[Symbol.for("config")].props)delete C[k[Symbol.for("config")].props[E]],A.push(k[Symbol.for("config")].props[E]);c[7].populate(C),!0===f&&(p-=1),e=c[7];var I,M={};if(M.x=500,M.y=600,M.header="Code",u=t.code,!0===Array.isArray(u)&&(u=i(u).slice(0)),M.text=u,"string"==typeof(s=M.is||"Box")){if(!(I=n.components&&n.components[s]||r[s]))throw new Error('Component "Box" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(I=s);c[8]=I.call(null,{props:M},c[7],t),c[8][Symbol.for("slots")][0]?(e=c[8][Symbol.for("slots")][0],l=c[8],f=!0):e=c[8][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var R=n.components&&n.components.Box||r.Box;e=c[4];var _={};c[9]=this.element({parent:e||"root"},!0===f?l:t),_.x=1e3,_.y=600,_.header="keyCode",_.text=t.keyCode;var L=[];if(void 0!==R)for(var D in R[Symbol.for("config")].props)delete _[R[Symbol.for("config")].props[D]],L.push(R[Symbol.for("config")].props[D]);c[9].populate(_),!0===f&&(p-=1),e=c[9];var P,O={};if(O.x=1e3,O.y=600,O.header="keyCode",u=t.keyCode,!0===Array.isArray(u)&&(u=i(u).slice(0)),O.text=u,"string"==typeof(s=O.is||"Box")){if(!(P=n.components&&n.components[s]||r[s]))throw new Error('Component "Box" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(P=s);c[10]=P.call(null,{props:O},c[9],t),c[10][Symbol.for("slots")][0]?(e=c[10][Symbol.for("slots")][0],l=c[10],f=!0):e=c[10][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[0];var N={};return c[11]=this.element({parent:e||"root"},!0===f?l:t),N.mount="{x: 1}",N.x=1860,N.y=1e3,N.size=30,N.content=t.backLabel,N.color=t.backPressed?"0xffffffff":"0x667a97ff",N.__textnode=!0,c[11].populate(N),!0===f&&(p-=1),c},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip5&&-1!==skip5.indexOf("text")||t[5].set("text",e.key)},function(e,t,n,r,o,i){t[6][Symbol.for("props")].text=e.key},function(e,t,n,r,o,i){"undefined"!=typeof skip7&&-1!==skip7.indexOf("text")||t[7].set("text",e.code)},function(e,t,n,r,o,i){t[8][Symbol.for("props")].text=e.code},function(e,t,n,r,o,i){"undefined"!=typeof skip9&&-1!==skip9.indexOf("text")||t[9].set("text",e.keyCode)},function(e,t,n,r,o,i){t[10][Symbol.for("props")].text=e.keyCode},function(e,t,n,r,o,i){t[11].set("content",e.backLabel)},function(e,t,n,r,o,i){t[11].set("color",e.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state:function(){return{backPressed:!1,key:"...",code:"...",keyCode:"..."}},computed:{backLabel:function(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels:function(e){this.key=e.key,this.code=e.code,this.keyCode=e.keyCode+""}},input:{any:function(e){this.backPressed=!1,this.updateLabels(e)},back:function(e){var t=this;return!0===this.backPressed?this.$router.back():this.updateLabels(e),function(){t.backPressed=!0}}}}),Xa=Go.Component("Accent",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=300,u.h=250,u.color=t.bColor,u.effects=[{type:"radius",props:{radius:8}}],s[0].populate(u),e=s[0];var l={};return s[1]=this.element({parent:e||"root"},t),l.x=150,l.y=125,l.mount="{x:0.5, y:0.5}",l.content=t.lang,l.color="0xffffffff",l.font="lato-black",l.__textnode=!0,s[1].populate(l),s},effects:[function(e,t,n,r,o,i){t[0].set("color",e.bColor)},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[1].set("content",e.lang)}],context:{}},state:function(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus:function(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus:function(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),Wa=Go.Component("Accents",{components:{Accent:Xa},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1;f[0]=this.element({parent:e||"root"},!0===p?l:t),f[0].populate({}),e=f[0];var d={};f[1]=this.element({parent:e||"root"},!0===p?l:t),d.x={transition:t.x},f[1].populate(d),e=f[1];var h,m,g,v=[],y=function(){t[Symbol.for("removeGlobalEffects")](g),g=null,g=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),g=new Set,v=d.length,y={}||{};h=y.from||0,m="to"in y?y.to:d.length;for(;v--;){var b=d[v];v<m&&v>=h&&g.add(""+b.lang)}for(var x=f.length;x--;)if(!1===g.has(f[x])){var w=f[x];a[2][w]&&a[2][w].destroy(),delete a[2][w],a[3][w]&&a[3][w].destroy(),delete a[3][w]}f.length=0;for(var S=d.length,T=[],k=function(){if(C<h||C>=m)return 1;var g=Object.create(t);e=a[1],g.item=d[C],g.index=C,g.key=""+g.item.lang,f.push(g.key);var v=n.components&&n.components.Accent||r.Accent;void 0===a[2]&&(a[2]={});var y={};void 0===a[2][g.key]&&(a[2][g.key]=c.element({parent:e||"root"},!0===p?l:t)),y.lang=g.item.lang,y.ref="accent"+g.index,y.x=400*g.index;var b=[];if(void 0!==v)for(var x in v[Symbol.for("config")].props)delete y[v[Symbol.for("config")].props[x]],b.push(v[Symbol.for("config")].props[x]);void 0===a[2][g.key].nodeId&&a[2][g.key].populate(y),void 0===a[3]&&(a[3]={}),e=a[2][g.key];var w={};if(void 0===a[3][g.key]){var S;if(w.lang=g.item.lang,u="accent"+g.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.ref=u,w.x=400*g.index,"string"==typeof(s=w.is||"Accent")){if(!(S=n.components&&n.components[s]||r[s]))throw new Error('Component "Accent" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(S=s);a[3][g.key]=S.call(null,{props:w},a[2][g.key],t),a[3][g.key][Symbol.for("slots")][0]?(e=a[3][g.key][Symbol.for("slots")][0],l=a[3][g.key],p=!0):e=a[3][g.key][Symbol.for("children")][0]}var k=function(){void 0!==b&&-1!==b.indexOf("ref")||a[2][g.key].set("ref","accent"+g.index)};o(k,null),T.push(k),t[Symbol.for("effects")].push(k),a[3][g.key][Symbol.for("props")].ref="accent"+g.index},C=0;C<S;C++)k();return T}(t.data,f,v)};t[Symbol.for("effects")].push(y),o(y,["data"]),e=f[0];var b={};return f[4]=this.element({parent:e||"root"},!0===p?l:t),b.content=t.activeAccent,b.font="lato-black",b.x=960,b.y=400,b.mount="{x:0.5}",b.letterspacing=10,b.size=40,b.__textnode=!0,f[4].populate(b),f},effects:[function(e,t,n,r,o,i){t[1].set("x",{transition:e.x})},function(e,t,n,r,o,i){t[4].set("content",e.activeAccent)}],context:{}},props:["data"],state:function(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex:function(e){var t=this.$select("accent".concat(e));t&&t.$focus&&(t.$focus(),this.activeAccent=this.data[e].chars)}},hooks:{focus:function(){this.$trigger("activeIndex")}},input:{right:function(){this.activeIndex<this.data.length-1&&this.move(1)},left:function(){this.activeIndex>0&&this.move(-1)}},methods:{move:function(e){var t=this.activeIndex+e;this.x=t>3?400*-(t-3)-160:160,this.activeIndex=t}}}),Ka=Go.Component("Characters",{components:{Accents:Wa},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0,p={};l[0]=this.element({parent:e||"root"},!0===c?u:t),p.w=1920,l[0].populate(p),!0===c&&(f-=1),e=l[0];var d={};l[1]=this.element({parent:e||"root"},!0===c?u:t),d.x=960,d.y=50,d.mount="{x:0.5}",d.content="Alphabets",d.font="lato-black",d.size=60,d.__textnode=!0,l[1].populate(d),!0===c&&(f-=1),e=l[0];var h={};l[2]=this.element({parent:e||"root"},!0===c?u:t),h.x=960,h.y=150,h.mount="{x:0.5}",h.content=t.alphabets,h.font="lato-black",h.size=40,h.letterspacing=10,h.__textnode=!0,l[2].populate(h),!0===c&&(f-=1),e=l[0];var m={};l[3]=this.element({parent:e||"root"},!0===c?u:t),m.x=960,m.y=290,m.mount="{x:0.5}",m.content="Accents",m.font="lato-black",m.size=60,m.__textnode=!0,l[3].populate(m),!0===c&&(f-=1);var g=n.components&&n.components.Accents||r.Accents;e=l[0];var v={};l[4]=this.element({parent:e||"root"},!0===c?u:t),v.data=t.accents,v.y=400,v.ref="accents";var y=[];if(void 0!==g)for(var b in g[Symbol.for("config")].props)delete v[g[Symbol.for("config")].props[b]],y.push(g[Symbol.for("config")].props[b]);l[4].populate(v),!0===c&&(f-=1),e=l[4];var x,w={};if(w.data=t.accents,w.y=400,w.ref="accents","string"==typeof(s=w.is||"Accents")){if(!(x=n.components&&n.components[s]||r[s]))throw new Error('Component "Accents" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(x=s);l[5]=x.call(null,{props:w},l[4],t),l[5][Symbol.for("slots")][0]?(e=l[5][Symbol.for("slots")][0],u=l[5],c=!0):e=l[5][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),e=l[0];var S={};l[6]=this.element({parent:e||"root"},!0===c?u:t),S.w=950,S.h=40,S.color="0x000000ff",S.effects=[{type:"radius",props:{radius:10}}],S.y=1e3,S.placement="center",l[6].populate(S),!0===c&&(f-=1),e=l[6];var T={};return l[7]=this.element({parent:e||"root"},!0===c?u:t),T.content="The character ? represents a character that is not supported by the Lato-Black font",T.size=25,T.x=475,T.y=20,T.mount="{x:0.5, y:0.5}",T.__textnode=!0,l[7].populate(T),!0===c&&(f-=1),l},effects:[function(e,t,n,r,o,i){t[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state:function(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus:function(){var e=this.$select("accents");e&&e.$focus&&e.$focus()}}}),$a=Go.Component("Layout",{components:{Ball:Ra},code:{render:function(e,t,n,r,o,i,a){var s,u,l=this,c=[],f=!1,p=0,d={};c[0]=this.element({parent:e||"root"},!0===f?u:t),d.w=1920,d.h=1080,d.color="0xc4b5fdff",c[0].populate(d),!0===f&&(p-=1),e=c[0];var h={};c[1]=this.element({parent:e||"root"},!0===f?u:t),h.x=40,h.y=40,c[1].populate(h),!0===f&&(p-=1),e=c[1];var m={};c[2]=this.element({parent:e||"root"},!0===f?u:t),m.color="0x222222ff",m.content="Static horizontal Layout",m.__textnode=!0,c[2].populate(m),!0===f&&(p-=1),e=c[1];var g={};c[3]=this.element({parent:e||"root"},!0===f?u:t),g.y=50,g.gap=10,g.__layout=!0,c[3].populate(g),!0===f&&(p-=1),e=c[3];var v={};c[4]=this.element({parent:e||"root"},!0===f?u:t),v.w=50,v.h=100,v.color="0xeff6ffff",c[4].populate(v),!0===f&&(p-=1),e=c[3];var y={};c[5]=this.element({parent:e||"root"},!0===f?u:t),y.w=60,y.h=100,y.color="0xbfdbfeff",c[5].populate(y),!0===f&&(p-=1),e=c[3];var b={};c[6]=this.element({parent:e||"root"},!0===f?u:t),b.w=70,b.h=100,b.color="0x60a5faff",c[6].populate(b),!0===f&&(p-=1),e=c[3];var x={};c[7]=this.element({parent:e||"root"},!0===f?u:t),x.w=80,x.h=100,x.color="0x2563ebff",c[7].populate(x),!0===f&&(p-=1),e=c[3];var w={};c[8]=this.element({parent:e||"root"},!0===f?u:t),w.w=90,w.h=100,w.color="0x1e40afff",c[8].populate(w),!0===f&&(p-=1),e=c[0];var S={};c[9]=this.element({parent:e||"root"},!0===f?u:t),S.x=40,S.y=220,c[9].populate(S),!0===f&&(p-=1),e=c[9];var T={};c[10]=this.element({parent:e||"root"},!0===f?u:t),T.color="0x222222ff",T.content="Static vertical Layout",T.__textnode=!0,c[10].populate(T),!0===f&&(p-=1),e=c[9];var k={};c[11]=this.element({parent:e||"root"},!0===f?u:t),k.y=50,k.gap=10,k.direction="vertical",k.__layout=!0,c[11].populate(k),!0===f&&(p-=1),e=c[11];var C={};c[12]=this.element({parent:e||"root"},!0===f?u:t),C.w=100,C.h=50,C.color="0xeff6ffff",c[12].populate(C),!0===f&&(p-=1),e=c[11];var A={};c[13]=this.element({parent:e||"root"},!0===f?u:t),A.w=100,A.h=60,A.color="0xbfdbfeff",c[13].populate(A),!0===f&&(p-=1),e=c[11];var E={};c[14]=this.element({parent:e||"root"},!0===f?u:t),E.w=100,E.h=70,E.color="0x60a5faff",c[14].populate(E),!0===f&&(p-=1),e=c[11];var I={};c[15]=this.element({parent:e||"root"},!0===f?u:t),I.w=100,I.h=80,I.color="0x2563ebff",c[15].populate(I),!0===f&&(p-=1),e=c[11];var M={};c[16]=this.element({parent:e||"root"},!0===f?u:t),M.w=100,M.h=90,M.color="0x1e40afff",c[16].populate(M),!0===f&&(p-=1),e=c[0];var R={};c[17]=this.element({parent:e||"root"},!0===f?u:t),R.x=40,R.y=700,c[17].populate(R),!0===f&&(p-=1),e=c[17];var _={};c[18]=this.element({parent:e||"root"},!0===f?u:t),_.color="0x222222ff",_.content="Nested Layouts",_.__textnode=!0,c[18].populate(_),!0===f&&(p-=1),e=c[17];var L={};c[19]=this.element({parent:e||"root"},!0===f?u:t),L.y=50,L.gap=10,L.direction="horizontal",L.__layout=!0,c[19].populate(L),!0===f&&(p-=1),e=c[19];var D={};c[20]=this.element({parent:e||"root"},!0===f?u:t),D.w=100,D.h=50,D.color="0xeff6ffff",c[20].populate(D),!0===f&&(p-=1),e=c[19];var P={};c[21]=this.element({parent:e||"root"},!0===f?u:t),P.w=100,P.h=60,P.color="0xbfdbfeff",c[21].populate(P),!0===f&&(p-=1),e=c[19];var O={};c[22]=this.element({parent:e||"root"},!0===f?u:t),O.direction="vertical",O.gap=10,O.__layout=!0,c[22].populate(O),!0===f&&(p-=1),e=c[22];var N={};c[23]=this.element({parent:e||"root"},!0===f?u:t),N.w=100,N.h=70,N.color="0x60a5faff",c[23].populate(N),!0===f&&(p-=1),e=c[22];var U={};c[24]=this.element({parent:e||"root"},!0===f?u:t),U.w=100,U.h=70,U.color="0x60a5faff",c[24].populate(U),!0===f&&(p-=1),e=c[22];var B={};c[25]=this.element({parent:e||"root"},!0===f?u:t),B.w=100,B.h=70,B.color="0x60a5faff",c[25].populate(B),!0===f&&(p-=1),e=c[22];var j={};c[26]=this.element({parent:e||"root"},!0===f?u:t),j.gap=50,j.__layout=!0,c[26].populate(j),!0===f&&(p-=1),e=c[26];var F={};c[27]=this.element({parent:e||"root"},!0===f?u:t),F.w=50,F.h=50,F.color="0x2563ebff",c[27].populate(F),!0===f&&(p-=1),e=c[26];var z={};c[28]=this.element({parent:e||"root"},!0===f?u:t),z.w=50,z.h=50,z.color="0x2563ebff",c[28].populate(z),!0===f&&(p-=1),e=c[26];var G={};c[29]=this.element({parent:e||"root"},!0===f?u:t),G.w=50,G.h=50,G.color="0x2563ebff",c[29].populate(G),!0===f&&(p-=1),e=c[19];var V={};c[30]=this.element({parent:e||"root"},!0===f?u:t),V.w=100,V.h=80,V.color="0x2563ebff",c[30].populate(V),!0===f&&(p-=1),e=c[19];var H={};c[31]=this.element({parent:e||"root"},!0===f?u:t),H.w=100,H.h=90,H.color="0x1e40afff",c[31].populate(H),!0===f&&(p-=1),e=c[0];var q={};c[32]=this.element({parent:e||"root"},!0===f?u:t),q.x=800,q.y=40,c[32].populate(q),!0===f&&(p-=1),e=c[32];var X={};c[33]=this.element({parent:e||"root"},!0===f?u:t),X.color="0x222222ff",X.content="Layout with Text",X.__textnode=!0,c[33].populate(X),!0===f&&(p-=1),e=c[32];var W={};c[34]=this.element({parent:e||"root"},!0===f?u:t),W.y=50,W.gap=20,W.__layout=!0,c[34].populate(W),!0===f&&(p-=1),e=c[34];var K={};c[35]=this.element({parent:e||"root"},!0===f?u:t),K.w=3,K.h=32,K.color="0x60a5faff",c[35].populate(K),!0===f&&(p-=1),e=c[34];var $={};c[36]=this.element({parent:e||"root"},!0===f?u:t),$.color="0x1e40afff",$.content="Hello",$.__textnode=!0,c[36].populate($),!0===f&&(p-=1),e=c[34];var Y={};c[37]=this.element({parent:e||"root"},!0===f?u:t),Y.w=3,Y.h=32,Y.color="0x60a5faff",c[37].populate(Y),!0===f&&(p-=1),e=c[34];var Q={};c[38]=this.element({parent:e||"root"},!0===f?u:t),Q.content="World",Q.color="0x1e40afff",Q.__textnode=!0,c[38].populate(Q),!0===f&&(p-=1),e=c[34];var J={};c[39]=this.element({parent:e||"root"},!0===f?u:t),J.w=3,J.h=32,J.color="0x60a5faff",c[39].populate(J),!0===f&&(p-=1),e=c[0];var Z={};c[40]=this.element({parent:e||"root"},!0===f?u:t),Z.x=800,Z.y=210,c[40].populate(Z),!0===f&&(p-=1),e=c[40];var ee={};c[41]=this.element({parent:e||"root"},!0===f?u:t),ee.color="0x222222ff",ee.content="Dynamic dimensions Layout",ee.__textnode=!0,c[41].populate(ee),!0===f&&(p-=1),e=c[40];var te={};c[42]=this.element({parent:e||"root"},!0===f?u:t),te.y=50,te.gap=20,te["@updated"]=t.dynamicLayoutUpdated&&t.dynamicLayoutUpdated.bind(t),te.__layout=!0,c[42].populate(te),!0===f&&(p-=1),e=c[42];var ne={};c[43]=this.element({parent:e||"root"},!0===f?u:t),ne.w=.5*t.w,ne.h=60,ne.color="0xeff6ffff",c[43].populate(ne),!0===f&&(p-=1),e=c[42];var re={};c[44]=this.element({parent:e||"root"},!0===f?u:t),re.w=.6*t.w,re.h=60,re.color="0xbfdbfeff",c[44].populate(re),!0===f&&(p-=1),e=c[42];var oe={};c[45]=this.element({parent:e||"root"},!0===f?u:t),oe.w=.7*t.w,oe.h=60,oe.color="0x60a5faff",c[45].populate(oe),!0===f&&(p-=1),e=c[42];var ie={};c[46]=this.element({parent:e||"root"},!0===f?u:t),ie.w=.8*t.w,ie.h=60,ie.color="0x2563ebff",c[46].populate(ie),!0===f&&(p-=1),e=c[42];var ae={};c[47]=this.element({parent:e||"root"},!0===f?u:t),ae.w=.9*t.w,ae.h=60,ae.color="0x1e40afff",c[47].populate(ae),!0===f&&(p-=1),e=c[0];var se={};c[48]=this.element({parent:e||"root"},!0===f?u:t),se.x=800,se.y=400,c[48].populate(se),!0===f&&(p-=1),e=c[48];var ue={};c[49]=this.element({parent:e||"root"},!0===f?u:t),ue.color="0x222222ff",ue.content="For loop Layout",ue.__textnode=!0,c[49].populate(ue),!0===f&&(p-=1),e=c[48];var le={};c[50]=this.element({parent:e||"root"},!0===f?u:t),le.y=50,le.gap=20,le.__layout=!0,c[50].populate(le),!0===f&&(p-=1),e=c[50];var ce,fe,pe,de=[],he=function(){t[Symbol.for("removeGlobalEffects")](pe),pe=null,pe=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,s=o.length,c={}||{};ce=c.from||0,fe="to"in c?c.to:o.length;for(;s--;)o[s],s<fe&&s>=ce&&a.add(""+s);for(var d=r.length;d--;)if(!1===a.has(r[d])){var h=r[d];n[51][h]&&n[51][h].destroy(),delete n[51][h]}r.length=0;for(var m=o.length,g=0;g<m;g++)if(!(g<ce||g>=fe)){var v=Object.create(t);e=n[50],v.color=o[g],v[void 0]=g,v.key=""+g,r.push(v.key),e=n[50],void 0===n[51]&&(n[51]={});var y={};void 0===n[51][v.key]&&(n[51][v.key]=l.element({parent:e||"root"},!0===f?u:t)),y.w=60,y.h=60,y.color=v.color,void 0===n[51][v.key].nodeId&&(n[51][v.key].populate(y),!0===f&&(p-=1))}return[]}(t.colors,c,de)};t[Symbol.for("effects")].push(he),o(he,["colors"]);var me=function(){t.color;for(var e=0;e<t.colors.length;e++)if(!(e<ce||e>=fe)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,c[51][n.key].set("color",n.color)}};t[Symbol.for("effects")].push(me),o(me),e=c[0];var ge={};c[52]=this.element({parent:e||"root"},!0===f?u:t),ge.x=800,ge.y=600,c[52].populate(ge),!0===f&&(p-=1),e=c[52];var ve={};c[53]=this.element({parent:e||"root"},!0===f?u:t),ve.color="0x222222ff",ve.content="Layout with transitions",ve.__textnode=!0,c[53].populate(ve),!0===f&&(p-=1),e=c[52];var ye={};c[54]=this.element({parent:e||"root"},!0===f?u:t),ye.direction="horizontal",ye.gap=20,ye.y=60,ye.__layout=!0,c[54].populate(ye),!0===f&&(p-=1),e=c[54];var be,xe,we,Se=[],Te=function(){t[Symbol.for("removeGlobalEffects")](we),we=null,we=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,s=o.length,c={}||{};be=c.from||0,xe="to"in c?c.to:o.length;for(;s--;)o[s],s<xe&&s>=be&&a.add(""+s);for(var d=r.length;d--;)if(!1===a.has(r[d])){var h=r[d];n[55][h]&&n[55][h].destroy(),delete n[55][h],n[56][h]&&n[56][h].destroy(),delete n[56][h],n[57][h]&&n[57][h].destroy(),delete n[57][h],n[58][h]&&n[58][h].destroy(),delete n[58][h],n[59][h]&&n[59][h].destroy(),delete n[59][h],n[60][h]&&n[60][h].destroy(),delete n[60][h]}r.length=0;for(var m=o.length,g=0;g<m;g++)if(!(g<be||g>=xe)){var v=Object.create(t);e=n[54],v.color=o[g],v[void 0]=g,v.key=""+g,r.push(v.key),e=n[54],void 0===n[55]&&(n[55]={});var y={};void 0===n[55][v.key]&&(n[55][v.key]=l.element({parent:e||"root"},!0===f?u:t)),y.h=100,y.w={transition:{value:v.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},y.color=v.color,void 0===n[55][v.key].nodeId&&(n[55][v.key].populate(y),!0===f&&(p-=1)),e=n[55][v.key],void 0===n[56]&&(n[56]={});var b={};void 0===n[56][v.key]&&(n[56][v.key]=l.element({parent:e||"root"},!0===f?u:t)),b.gap=10,b.x=10,b.y=35,b.__layout=!0,void 0===n[56][v.key].nodeId&&(n[56][v.key].populate(b),!0===f&&(p-=1)),e=n[56][v.key],void 0===n[57]&&(n[57]={});var x={};void 0===n[57][v.key]&&(n[57][v.key]=l.element({parent:e||"root"},!0===f?u:t)),x.h=20,x.w={transition:{value:v.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},x.color="0xffffffff",void 0===n[57][v.key].nodeId&&(n[57][v.key].populate(x),!0===f&&(p-=1)),e=n[56][v.key],void 0===n[58]&&(n[58]={});var w={};void 0===n[58][v.key]&&(n[58][v.key]=l.element({parent:e||"root"},!0===f?u:t)),w.h=20,w.w={transition:{value:v.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},w.color="0xccccccff",void 0===n[58][v.key].nodeId&&(n[58][v.key].populate(w),!0===f&&(p-=1)),e=n[56][v.key],void 0===n[59]&&(n[59]={});var S={};void 0===n[59][v.key]&&(n[59][v.key]=l.element({parent:e||"root"},!0===f?u:t)),S.h=20,S.w={transition:{value:v.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},S.color="0x333333ff",void 0===n[59][v.key].nodeId&&(n[59][v.key].populate(S),!0===f&&(p-=1)),e=n[56][v.key],void 0===n[60]&&(n[60]={});var T={};void 0===n[60][v.key]&&(n[60][v.key]=l.element({parent:e||"root"},!0===f?u:t)),T.h=20,T.w={transition:{value:v.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},T.color="0x000000ff",void 0===n[60][v.key].nodeId&&(n[60][v.key].populate(T),!0===f&&(p-=1))}return[]}(t.colors,c,Se)};t[Symbol.for("effects")].push(Te),o(Te,["colors"]);var ke=function(){t.w3;for(var e=0;e<t.colors.length;e++)if(!(e<be||e>=xe)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,c[55][n.key].set("w",{transition:{value:t.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(ke),o(ke);var Ce=function(){t.color;for(var e=0;e<t.colors.length;e++)if(!(e<be||e>=xe)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,c[55][n.key].set("color",n.color)}};t[Symbol.for("effects")].push(Ce),o(Ce);var Ae=function(){t.w2;for(var e=0;e<t.colors.length;e++)if(!(e<be||e>=xe)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,c[57][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Ae),o(Ae);var Ee=function(){t.w2;for(var e=0;e<t.colors.length;e++)if(!(e<be||e>=xe)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,c[58][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Ee),o(Ee);var Ie=function(){t.w2;for(var e=0;e<t.colors.length;e++)if(!(e<be||e>=xe)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,c[59][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Ie),o(Ie);var Me=function(){t.w2;for(var e=0;e<t.colors.length;e++)if(!(e<be||e>=xe)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,c[60][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(Me),o(Me),e=c[0];var Re={};c[61]=this.element({parent:e||"root"},!0===f?u:t),Re.x=800,Re.y=840,c[61].populate(Re),!0===f&&(p-=1),e=c[61];var _e={};c[62]=this.element({parent:e||"root"},!0===f?u:t),_e.color="0x222222ff",_e.content="Layout with padding",_e.__textnode=!0,c[62].populate(_e),!0===f&&(p-=1),e=c[61];var Le={};c[63]=this.element({parent:e||"root"},!0===f?u:t),Le.direction="horizontal",Le.gap=20,Le.y=60,Le.padding=20,Le.color="0xffffffff",Le.__layout=!0,c[63].populate(Le),!0===f&&(p-=1),e=c[63];var De={};c[64]=this.element({parent:e||"root"},!0===f?u:t),De.w=40,De.h=40,De.color="0xbfdbfeff",c[64].populate(De),!0===f&&(p-=1),e=c[63];var Pe={};c[65]=this.element({parent:e||"root"},!0===f?u:t),Pe.w=40,Pe.h=40,Pe.color="0x60a5faff",c[65].populate(Pe),!0===f&&(p-=1),e=c[63];var Oe={};c[66]=this.element({parent:e||"root"},!0===f?u:t),Oe.w=40,Oe.h=40,Oe.color="0x2563ebff",c[66].populate(Oe),!0===f&&(p-=1),e=c[61];var Ne={};c[67]=this.element({parent:e||"root"},!0===f?u:t),Ne.direction="horizontal",Ne.gap=20,Ne.y=60,Ne.x=240,Ne.padding={top:40,y:10,left:40,x:10},Ne.color="0xffffffff",Ne.__layout=!0,c[67].populate(Ne),!0===f&&(p-=1),e=c[67];var Ue={};c[68]=this.element({parent:e||"root"},!0===f?u:t),Ue.w=40,Ue.h=40,Ue.color="0xbfdbfeff",c[68].populate(Ue),!0===f&&(p-=1),e=c[67];var Be={};c[69]=this.element({parent:e||"root"},!0===f?u:t),Be.w=40,Be.h=40,Be.color="0x60a5faff",c[69].populate(Be),!0===f&&(p-=1),e=c[67];var je={};c[70]=this.element({parent:e||"root"},!0===f?u:t),je.w=40,je.h=40,je.color="0x2563ebff",c[70].populate(je),!0===f&&(p-=1),e=c[61];var Fe={};c[71]=this.element({parent:e||"root"},!0===f?u:t),Fe.direction="vertical",Fe.gap=20,Fe.y=60,Fe.x=500,Fe.padding=20,Fe.color="0xffffffff",Fe.__layout=!0,c[71].populate(Fe),!0===f&&(p-=1),e=c[71];var ze={};c[72]=this.element({parent:e||"root"},!0===f?u:t),ze.w=40,ze.h=20,ze.color="0xbfdbfeff",c[72].populate(ze),!0===f&&(p-=1),e=c[71];var Ge={};c[73]=this.element({parent:e||"root"},!0===f?u:t),Ge.w=40,Ge.h=20,Ge.color="0x60a5faff",c[73].populate(Ge),!0===f&&(p-=1),e=c[71];var Ve={};c[74]=this.element({parent:e||"root"},!0===f?u:t),Ve.w=40,Ve.h=20,Ve.color="0x2563ebff",c[74].populate(Ve),!0===f&&(p-=1),e=c[61];var He={};c[75]=this.element({parent:e||"root"},!0===f?u:t),He.direction="vertical",He.gap=20,He.y=60,He.x=640,He.padding={top:40,y:10,left:40,x:10},He.color="0xffffffff",He.__layout=!0,c[75].populate(He),!0===f&&(p-=1),e=c[75];var qe={};c[76]=this.element({parent:e||"root"},!0===f?u:t),qe.w=40,qe.h=20,qe.color="0xbfdbfeff",c[76].populate(qe),!0===f&&(p-=1),e=c[75];var Xe={};c[77]=this.element({parent:e||"root"},!0===f?u:t),Xe.w=40,Xe.h=20,Xe.color="0x60a5faff",c[77].populate(Xe),!0===f&&(p-=1),e=c[75];var We={};c[78]=this.element({parent:e||"root"},!0===f?u:t),We.w=40,We.h=20,We.color="0x2563ebff",c[78].populate(We),!0===f&&(p-=1),e=c[0];var Ke={};c[79]=this.element({parent:e||"root"},!0===f?u:t),Ke.x=1300,Ke.y=210,c[79].populate(Ke),!0===f&&(p-=1),e=c[79];var $e={};c[80]=this.element({parent:e||"root"},!0===f?u:t),$e.color="0x222222ff",$e.content="Layout with a Component",$e.__textnode=!0,c[80].populate($e),!0===f&&(p-=1),e=c[79];var Ye={};c[81]=this.element({parent:e||"root"},!0===f?u:t),Ye.y=50,Ye.gap=40,Ye.__layout=!0,c[81].populate(Ye),!0===f&&(p-=1),e=c[81];var Qe={};c[82]=this.element({parent:e||"root"},!0===f?u:t),Qe.w=100,Qe.h=100,Qe.color="0xff0000ff",c[82].populate(Qe),!0===f&&(p-=1),e=c[81];var Je={};c[83]=this.element({parent:e||"root"},!0===f?u:t),Je.w=t.w,Je.h=100,Je.color="0xff0000ff",c[83].populate(Je),!0===f&&(p-=1);var Ze=n.components&&n.components.Ball||r.Ball;e=c[81];var et={};c[84]=this.element({parent:e||"root"},!0===f?u:t),et.y=500,et.w=100;var tt=[];if(void 0!==Ze)for(var nt in Ze[Symbol.for("config")].props)delete et[Ze[Symbol.for("config")].props[nt]],tt.push(Ze[Symbol.for("config")].props[nt]);c[84].populate(et),!0===f&&(p-=1),e=c[84];var rt,ot={};if(ot.y=500,ot.w=100,"string"==typeof(s=ot.is||"Ball")){if(!(rt=n.components&&n.components[s]||r[s]))throw new Error('Component "Ball" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(rt=s);c[85]=rt.call(null,{props:ot},c[84],t),c[85][Symbol.for("slots")][0]?(e=c[85][Symbol.for("slots")][0],u=c[85],f=!0):e=c[85][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),e=c[81];var it={};return c[86]=this.element({parent:e||"root"},!0===f?u:t),it.w=100,it.h=100,it.color="0xff0000ff",c[86].populate(it),!0===f&&(p-=1),c},effects:[function(e,t,n,r,o,i){t[43].set("w",.5*e.w)},function(e,t,n,r,o,i){t[44].set("w",.6*e.w)},function(e,t,n,r,o,i){t[45].set("w",.7*e.w)},function(e,t,n,r,o,i){t[46].set("w",.8*e.w)},function(e,t,n,r,o,i){t[47].set("w",.9*e.w)},function(e,t,n,r,o,i){t[67].set("padding",{top:40,y:10,left:40,x:10})},function(e,t,n,r,o,i){t[75].set("padding",{top:40,y:10,left:40,x:10})},function(e,t,n,r,o,i){t[83].set("w",e.w)}],context:{}},state:function(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready:function(){var e=this;this.$setInterval(function(){e.w=100===e.w?50:100,e.w2=20===e.w2?40:20,e.w3=150===e.w3?250:150},2e3),this.$setTimeout(function(){e.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated:function(e){this.$log.info("Dynamic layout updated",e.w,e.h)}}}),Ya="undefined"!=typeof window?window:{},Qa=[],Ja={};function Za(e){var t;try{t=function(e,t){var n=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(arguments.length>1?arguments[1]:void 0).split("."),n=e,r=function(e){n=(Object.entries(n).find(function(n){var r=v(n,2),o=r[0];r[1];return o.toLowerCase()===t[e].toLowerCase()})||[null,{}])[1]},o=0;o<t.length;o++)r(o);return n}(Di,e);e.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(n={event:e,listening:!0});return"function"==typeof n?null==t?n():n(t):n}(e.method,e.params)}catch(n){setTimeout(function(){return Pi(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:e.id}))})}setTimeout(function(){return Pi(JSON.stringify({jsonrpc:"2.0",result:t,id:e.id}))})}function es(e,t,n){var r=Object.entries(Ja).find(function(n){var r=v(n,2);r[0];return r[1].toLowerCase()===e.toLowerCase()+"."+t.toLowerCase()});if(r){var o=JSON.stringify({jsonrpc:"2.0",id:parseInt(r[0]),result:n});Pi(o)}}Ya.__firebolt&&Ya.__firebolt.testHarness&&(Oi=Ya.__firebolt.testHarness);var ts={send:function e(t){console.debug("Sending message to transport: "+t);var n=JSON.parse(t);if(Array.isArray(n))n.forEach(function(t){return e(JSON.stringify(t))});else{var r=v(n.method.split("."),2),o=r[0],i=r[1];Oi&&Oi.onSend&&Oi.onSend(o,i,n.params,n.id),i.match(/^on[A-Z]/)&&(n.params.listen?Ja[n.id]=o.toLowerCase()+"."+i[2].toLowerCase()+i.substr(3):Object.keys(Ja).forEach(function(e){Ja[e]===o.toLowerCase()+"."+i[2].toLowerCase()+i.substr(3)&&delete Ja[e]})),Di?Za(n):Qa.push(n)}},receive:function(e){Pi=e,Oi&&"function"==typeof Oi.initialize&&Oi.initialize({emit:es,listen:function(){Li.apply(void 0,arguments)}})},event:es};function ns(e,t,n){var r=e?Object.values(e).length:0;return r===n&&void 0===t?"getter":r===n&&"function"==typeof t||0===r&&"function"==typeof t?"subscriber":r===n&&void 0!==t?"setter":null}var rs={};var os={mock:function(e,t,n,r,o,i){var a=ns(n,r,o),s=o?"."+Object.keys(n).filter(function(e){return"value"!==e}).map(function(e){return n[e]}).join("."):"",u="".concat(e,".").concat(t).concat(s);if("getter"===a)return rs.hasOwnProperty(u)?rs[u]:i;if("subscriber"===a);else if("setter"===a)return rs[u]=r,ts.event(e,"".concat(t,"Changed"),{value:r}),null}},is={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(e){return os.mock("Accessibility","closedCaptionsSettings",e,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},voiceGuidance:{enabled:!0,speed:2},voiceGuidanceSettings:function(e){return os.mock("Accessibility","voiceGuidanceSettings",e,void 0,0,{enabled:!0,speed:2})},audioDescriptionSettings:function(e){return os.mock("Accessibility","audioDescriptionSettings",e,void 0,0,{enabled:!0})}},as={id:function(e){return os.mock("Account","id",e,void 0,0,"123")},uid:function(e){return os.mock("Account","uid",e,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},ss={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(e){return os.mock("Advertising","policy",e,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},us={id:function(e){return os.mock("Device","id",e,void 0,0,"123")},distributor:function(e){return os.mock("Device","distributor",e,void 0,0,"Company")},platform:function(e){return os.mock("Device","platform",e,void 0,0,"WPE")},uid:function(e){return os.mock("Device","uid",e,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(e){return os.mock("Device","type",e,void 0,0,"STB")},model:function(e){return os.mock("Device","model",e,void 0,0,"xi6")},sku:function(e){return os.mock("Device","sku",e,void 0,0,"AX061AEI")},make:function(e){return os.mock("Device","make",e,void 0,0,"Arris")},version:function(e){return os.mock("Device","version",e,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(e){return os.mock("Device","hdcp",e,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(e){return os.mock("Device","hdr",e,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(e){return os.mock("Device","audio",e,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(e){return os.mock("Device","screenResolution",e,void 0,0,[1920,1080])},videoResolution:function(e){return os.mock("Device","videoResolution",e,void 0,0,[1920,1080])},name:function(e){return os.mock("Device","name",e,void 0,0,"Living Room")},network:function(e){return os.mock("Device","network",e,void 0,0,{state:"connected",type:"wifi"})}},ls={policy:function(e){return os.mock("Discovery","policy",e,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null},cs={state:"inactive",previous:"initializing"},fs={state:"foreground",previous:"inactive"},ps={state:"unloading",previous:"inactive"},ds=function(e){ts.event("Lifecycle",e.state,e)},hs="undefined"!=typeof window?window:{},ms=!!hs.__firebolt&&!!hs.__firebolt.automation,gs={ready:function(){cs.previous="initializing",setTimeout(function(){return ds(cs)},ms?1:500),fs.previous="inactive",setTimeout(function(){return ds(fs)},ms?2:1e3)},close:function(e){var t=e.reason;if("remoteButton"===t)cs.previous="foreground",setTimeout(function(){return ds(cs)},ms?1:500);else{if(!["userExit","error"].includes(t))throw"Invalid close reason";cs.previous="foreground",ps.previous="inactive",setTimeout(function(){return ds(cs)},ms?1:500),setTimeout(function(){return ds(ps)},ms?2:1e3)}},finished:function(){hs.location&&(hs.location.href="about:blank")}},vs={locality:function(e){return os.mock("Localization","locality",e,void 0,0,"Philadelphia")},postalCode:function(e){return os.mock("Localization","postalCode",e,void 0,0,"19103")},countryCode:function(e){return os.mock("Localization","countryCode",e,void 0,0,"US")},language:function(e){return os.mock("Localization","language",e,void 0,0,"en")},preferredAudioLanguages:function(e){return os.mock("Localization","preferredAudioLanguages",e,void 0,0,["spa","eng"])},locale:function(e){return os.mock("Localization","locale",e,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},ys={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(e){return os.mock("SecondScreen","friendlyName",e,void 0,0,"Living Room")}},bs={localization:vs,device:us,accessibility:is},xs=function(){return d(function e(){f(this,e),this._callback=null,this._queue=[]},[{key:"send",value:function(e){this._queue.push(e)}},{key:"receive",value:function(e){this._callback=e}},{key:"flush",value:function(e){e.receive(this._callback),this._queue.forEach(function(t){return e.send(t)})}}])}(),ws={},Ss=function(){return ws.platform.logLevel},Ts="undefined"!=typeof window?window:{},ks=function(){function e(t){f(this,e),this.bridge=t}return d(e,[{key:"send",value:function(e){this.bridge.JSMessageChanged(e,function(){})}},{key:"receive",value:function(e){Ts.$badger=Ts.$badger||{};var t=Ts.$badger.callback?Ts.$badger.callback.bind(Ts.$badger):null,n=Ts.$badger.event?Ts.$badger.event.bind(Ts.$badger):null;Ts.$badger.callback=function(n,r,o){o.jsonrpc?e(JSON.stringify(o)):t&&t(n,r,o)},Ts.$badger.event=function(t,r){r.jsonrpc?e(JSON.stringify(r)):n&&n(t,r)}}}],[{key:"isLegacy",value:function(t){return e.isXREProxy(t)||void 0===t.send&&t.JSMessageChanged}},{key:"isXREProxy",value:function(e){return void 0!==e.proxyObjectTest}}])}(),Cs=function(){return d(function e(t){f(this,e),this._endpoint=t,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]},[{key:"send",value:function(e){this._connect(),this._connected?this._ws.send(e):this._queue.length<100&&this._queue.push(e)}},{key:"receive",value:function(e){e&&(this._connect(),this._callbacks.push(e))}},{key:"_notifyCallbacks",value:function(e){for(var t=this,n=function(n){setTimeout(function(){return t._callbacks[n](e)},1)},r=0;r<this._callbacks.length;r++)n(r)}},{key:"_connect",value:function(){var e=this;this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",function(t){e._notifyCallbacks(t.data)}),this._ws.addEventListener("error",function(e){}),this._ws.addEventListener("close",function(t){e._ws=null,e._connected=!1}),this._ws.addEventListener("open",function(t){e._connected=!0;for(var n=0;n<e._queue.length;n++)e._ws.send(e._queue[n]);e._queue=[]}))}}])}();var As={transform:function(e,t){if(!t||!t.methods)return e;var n=t.methods,r=JSON.parse(JSON.stringify(e));return Object.keys(n).forEach(function(e){var t=n[e],o=v(t["x-method"].split("."),2),i=o[0],a=o[1],s={};s[t["x-this-param"]]=r,r[e]=function(){for(var e=0;e<arguments.length;e++)s[t["x-additional-params"][e]]=e<0||arguments.length<=e?void 0:arguments[e];return Ms.send(i.toLowerCase(),a,s)}}),r}},Es=null,Is="undefined"!=typeof window?window:{},Ms=function(){function e(){f(this,e),this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new xs,this._deprecated={},this.isMock=!1}return d(e,[{key:"_endpoint",value:function(){return Is.__firebolt&&Is.__firebolt.endpoint?Is.__firebolt.endpoint:null}},{key:"constructTransportLayer",value:function(){var e,t=this,n=this._endpoint();return n&&(n.startsWith("ws://")||n.startsWith("wss://"))?(e=new Cs(n)).receive(this.receiveHandler.bind(this)):void 0!==Is.ServiceManager&&Is.ServiceManager&&Is.ServiceManager.version?(e=this._queue,Is.ServiceManager.getServiceForJavaScript("com.comcast.BridgeObject_1",function(n){e=ks.isLegacy(n)?new ks(n):n,t.setTransportLayer(e)})):(this.isMock=!0,(e=ts).receive(this.receiveHandler.bind(this))),e}},{key:"setTransportLayer",value:function(e){this._transport=e,this._queue.flush(e)}},{key:"_send",value:function(e,t,n,r){return!Array.isArray(e)||t||n?this._sendAndGetId(e,t,n,r).promise:this._batch(e)}},{key:"_sendAndGetId",value:function(e,t,n,r){var o=this._processRequest(e,t,n,r),i=o.promise,a=o.json,s=o.id,u=JSON.stringify(a);return"DEBUG"===Ss()&&console.debug("Sending message to transport: "+u),this._transport.send(u),{id:s,promise:i}}},{key:"_batch",value:function(e){var t=this,n=[],r=[];e.forEach(function(e){var o=e.module,i=e.method,a=e.params,s=e.transforms,u=t._processRequest(o,i,a,s);n.push({promise:u.promise,id:u.id}),r.push(u.json)});var o=JSON.stringify(r);return"DEBUG"===Ss()&&console.debug("Sending message to transport: "+o),this._transport.send(o),n}},{key:"_processRequest",value:function(e,t,n,r){var o={promise:this._addPromiseToQueue(e,t,n,r),json:this._createRequestJSON(e,t,n),id:this._id};return this._id++,o}},{key:"_createRequestJSON",value:function(e,t,n){return{jsonrpc:"2.0",method:e.toLowerCase()+"."+t,params:n,id:this._id}}},{key:"_addPromiseToQueue",value:function(e,t,n,r){var o=this;return new Promise(function(i,a){o._promises[o._id]={},o._promises[o._id].promise=o,o._promises[o._id].resolve=i,o._promises[o._id].reject=a,o._promises[o._id].transforms=r;var s=o._deprecated[e.toLowerCase()+"."+t.toLowerCase()];s&&console.warn("WARNING: ".concat(e,".").concat(t,"() is deprecated. ")+s.alternative),t.match(/^on[A-Z]/)&&(n.listen?o._eventIds.push(o._id):o._eventIds=o._eventIds.filter(function(e){return e!==o._id}))})}},{key:"receiveHandler",value:function(e){"DEBUG"===Ss()&&console.debug("Received message from transport: "+e);var t,n=JSON.parse(e),r=this._promises[n.id];if(r){if(n.error)r.reject(n.error);else{var o=n.result;r.transforms&&(o=Array.isArray(n.result)?o.map(function(e){return As.transform(e,r.transforms)}):As.transform(o,r.transforms)),r.resolve(o)}delete this._promises[n.id]}this._eventIds.includes(n.id)&&(!(t=n.result)||"string"!=typeof t.event||"boolean"!=typeof t.listening)&&this._eventEmitters.forEach(function(e){e(n.id,n.result)})}},{key:"init",value:function(){var e,t;e={},t={log:!0},ws.app=e,ws.platform=g({logLevel:"WARN"},t),ws.user={},this._queue.receive(this.receiveHandler.bind(this)),Is.__firebolt&&(!0===Is.__firebolt.mockTransportLayer?(this.isMock=!0,this.setTransportLayer(ts)):Is.__firebolt.getTransportLayer&&this.setTransportLayer(Is.__firebolt.getTransportLayer())),null==this._transport&&(this._transport=this.constructTransportLayer())}}],[{key:"addEventEmitter",value:function(t){e.get()._eventEmitters.push(t)}},{key:"registerDeprecatedMethod",value:function(t,n,r){e.get()._deprecated[t.toLowerCase()+"."+n.toLowerCase()]={alternative:r||""}}},{key:"send",value:function(t,n,r,o){return e.get()._send(t,n,r,o)}},{key:"listen",value:function(t,n,r,o){return e.get()._sendAndGetId(t,n,r,o)}},{key:"get",value:function(){if(Is.__firebolt=Is.__firebolt||{},null==Is.__firebolt.transport&&null==Es){var t=new e;t.init(),t.isMock?Es=t:(Is.__firebolt=Is.__firebolt||{},Is.__firebolt.transport=t),Is.__firebolt.setTransportLayer=t.setTransportLayer.bind(t)}return Is.__firebolt.transport?Is.__firebolt.transport:Es}}])}();Is.__firebolt=Is.__firebolt||{},Is.__firebolt.setTransportLayer=function(e){Ms.get().setTransportLayer(e)};var Rs=0,_s={internal:{},external:{},get:function(e){return Object.assign(Object.assign({},_s.internal[e]),_s.external[e])},set:function(e,t,n){_s.external[e]=_s.external[e]||{},_s.external[e][t]=n},setInternal:function(e,t,n){_s.internal[e]=_s.internal[e]||{},_s.internal[e][t]=n},find:function(e){var t;return[_s.internal,_s.external].find(function(n){if(t=Object.keys(n).find(function(t){return n[t][e]}))return!0}),t},remove:function(e){[_s.internal,_s.external].forEach(function(t){Object.keys(t).forEach(function(n){t[n]&&t[n][e]&&(delete t[n][e],0===Object.values(t[n]).length&&delete t[n])})})},removeKey:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&_s.internal[e]&&delete _s.internal[e],_s.external[e]&&delete _s.external[e]},keys:function(){return Array.from(new Set(Object.keys(_s.internal).concat(Object.keys(_s.external))))},count:function(e){return Object.values(_s.get(e)).length}},Ls={},Ds=[],Ps={},Os={},Ns=!1,Us=function(e,t){Fs(_s.internal[Ls[e]],[t]),Fs(_s.external[Ls[e]],[t])},Bs=function(e,t){Ps[e.toLowerCase()]=t.concat()},js=function(e,t,n){Os[e.toLowerCase()]=Os[e.toLowerCase()]||{},Os[e.toLowerCase()][t]=n.concat()},Fs=function(e,t){e&&Object.keys(e).forEach(function(n){var r=e[n];Ds.indexOf(parseInt(n))>=0&&(Ds.splice(Ds.indexOf(parseInt(n)),1),delete e[n]),r.apply(null,t)})},zs=function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(Ws(),"function"!=typeof n)return Promise.reject("No valid callback function provided.");if("*"===e)return Promise.reject("No valid module name provided");var a,s,u="*"===t,l=u?Ps[e]:[t],c=[],f=Object.values(r).length>0,p=Object.keys(r).sort().map(function(e){return e+"="+JSON.stringify(r[e])}).join("&");Rs++,o&&Ds.push(Rs),l.forEach(function(t){var o=e+"."+t+(f?".".concat(p):"");if(0===Object.values(_s.get(o)).length){var a=Object.assign({listen:!0},r),s=Ms.listen(e,"on"+t[0].toUpperCase()+t.substring(1),a),l=s.id,d=s.promise;Ls[l]=o,c.push(d)}var h=i?_s.setInternal:_s.set;h(o,""+Rs,u?function(e){return n(t,e)}:n)});var d=new Promise(function(e,t){a=e,s=t});return c.length?Promise.all(c).then(function(e){a(Rs)}).catch(function(e){"*"===t?a(Rs):s(e)}):a(Rs),d},Gs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop(),o=v(Vs.apply(void 0,t),3);return[o[0],o[1],r,o[2]]},Vs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=(t.shift()||"*").toLowerCase(),o=t.shift()||"*",i={},a=0;t.length;a++)i[Os[r][o][a]]=t.shift();return[r,o,i]},Hs=function(){var e=v(Gs.apply(void 0,arguments),4),t=e[0],n=e[1],r=e[2],o=e[3];return zs(t,n,r,o,!1)},qs=function(e,t){var n=v(e.split(".").slice(0,2),2),r=n[0],o=n[1],i=Object.assign({listen:!1},t);Ms.send(r,"on"+o[0].toUpperCase()+o.substr(1),i)},Xs=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if("*"===t&&(t=!1),"number"==typeof e){var r=e.toString(),o=_s.find(r);return!!o&&(_s.remove(r),0===_s.count(o)&&qs(o),!0)}if(e||t)if(t){var i=Object.values(n).length>0,a=Object.keys(n).sort().map(function(e){return e+"="+JSON.stringify(n[e])}).join("&"),s=e+"."+t+(i?".".concat(a):"");_s.removeKey(s),qs(s,n)}else _s.keys().forEach(function(t){0===t.indexOf(e.toLowerCase())&&(_s.removeKey(t),qs(t))});else _s.keys().forEach(function(e){_s.removeKey(e),qs(e)})},Ws=function(){Ns||(Ms.addEventEmitter(Us),Li=Hs,Ns=!0)},Ks={listen:Hs,once:function(){var e=v(Gs.apply(void 0,arguments),4),t=e[0],n=e[1],r=e[2],o=e[3];return zs(t,n,r,o,!0)},clear:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t&&t.length&&"number"==typeof t[0])return Xs(t[0]);if(t&&t.length&&"number"==typeof t[1])return Xs(t[1]);var r=v(Vs.apply(void 0,t),3),o=r[0],i=r[1],a=r[2];return Xs(o,i,a)},broadcast:function(e,t){Us(Object.entries(Ls).find(function(t){var n=v(t,2);n[0];return n[1]==="app."+e})[0],t)}};var $s={prop:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=Object.values(n).length,u=ns(n,r,a);if("getter"===u)return Ms.send(e,t,n);if("subscriber"===u){if(o)throw new Error("Cannot subscribe to an immutable property");return Ks.listen.apply(Ks,[e,t+"Changed"].concat(h(Object.values(n)),[r]))}if("setter"===u){if(o)throw new Error("Cannot set a value to an immutable property");if(i)throw new Error("Cannot set a value to a readonly property");return Ms.send(e,"set"+t[0].toUpperCase()+t.substring(1),Object.assign({value:r},n))}throw s<a?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}};Bs("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","voiceGuidanceSettingsChanged"]),Ms.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead."),Ms.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");var Ys={id:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Account","id",t,e,!0,!0,0)},uid:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Account","uid",t,e,!0,!0,0)}};Bs("Advertising",["policyChanged"]),Ms.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead."),Bs("Capabilities",["available","granted","revoked","unavailable"]),js("Capabilities","available",["capability"]),js("Capabilities","granted",["role","capability"]),js("Capabilities","revoked",["role","capability"]),js("Capabilities","unavailable",["capability"]),Bs("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]),Ms.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead."),Ms.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead."),Ms.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");var Qs={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:function(){return new Promise(function(e,t){Ms.send("device","version").then(function(t){(t=t||{}).sdk=t.sdk||{},t.sdk.major=parseInt("1"),t.sdk.minor=parseInt("4"),t.sdk.patch=parseInt("1"),t.sdk.readable="Firebolt Core SDK 1.4.1",e(t)}).catch(function(e){t(e)})})},audio:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","audio",t,e,!1,!0,0)},clear:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ks.clear.apply(Ks,["Device"].concat(t))},distributor:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","distributor",t,e,!0,!0,0)},hdcp:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","hdcp",t,e,!1,!0,0)},hdr:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","hdr",t,e,!1,!0,0)},id:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","id",t,e,!0,!0,0)},listen:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ks.listen.apply(Ks,["Device"].concat(t))},make:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","make",t,e,!0,!0,0)},model:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","model",t,e,!0,!0,0)},name:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","name",t,e,!1,!0,0)},network:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","network",t,e,!1,!0,0)},once:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ks.once.apply(Ks,["Device"].concat(t))},platform:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","platform",t,e,!0,!0,0)},screenResolution:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","screenResolution",t,e,!1,!0,0)},sku:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","sku",t,e,!0,!0,0)},type:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","type",t,e,!0,!0,0)},uid:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","uid",t,e,!0,!0,0)},videoResolution:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Device","videoResolution",t,e,!1,!0,0)}},Js={};Bs("Discovery",["navigateTo","policyChanged"]),function(e,t,n){if(Js[e])throw"Capability ".concat(e," has multiple provider interfaces registered.");n.forEach(function(e){return e.name="".concat(t,".").concat(e.name)}),Js[e]=n.concat()}("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]),Ms.registerDeprecatedMethod("Discovery","entityInfo","Use null instead."),Ms.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead."),Ms.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead."),Ms.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead."),Ms.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead."),Bs("Lifecycle",["background","foreground","inactive","suspended","unloading"]),Bs("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]),Ms.registerDeprecatedMethod("Localization","language","Use Localization.locale instead."),Ms.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");var Zs={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:function(){return Ms.send("Localization","additionalInfo",{},null)},clear:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ks.clear.apply(Ks,["Localization"].concat(t))},countryCode:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Localization","countryCode",t,e,!1,!0,0)},language:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Localization","language",t,e,!1,!0,0)},latlon:function(){return Ms.send("Localization","latlon",{},null)},listen:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ks.listen.apply(Ks,["Localization"].concat(t))},locale:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Localization","locale",t,e,!1,!0,0)},locality:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Localization","locality",t,e,!1,!0,0)},once:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ks.once.apply(Ks,["Localization"].concat(t))},postalCode:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Localization","postalCode",t,e,!1,!0,0)},preferredAudioLanguages:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),$s.prop("Localization","preferredAudioLanguages",t,e,!1,!0,0)}};Bs("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]),Di={Accessibility:is,Account:as,Advertising:ss,Authentication:{token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},Capabilities:{supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},Device:us,Discovery:ls,Keyboard:{email:"user@domain.com",password:"abc123",standard:"Living Room"},Lifecycle:gs,Localization:vs,Metrics:{ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},Parameters:{initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},Profile:{approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},SecondScreen:ys,SecureStorage:{get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},Platform:bs},Qa.forEach(function(e){return Za(e)}),Qa.length=0;var eu,tu={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},nu=Go.Component("Module",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.w=t.w,u.h=t.h,u.color=t.bColor,u.effects=[{type:"radius",props:{radius:8}}],s[0].populate(u),e=s[0];var l={};return s[1]=this.element({parent:e||"root"},t),l.x=t.w/2,l.y=t.h/2,l.mount="{x:0.5, y:0.5}",l.content=t.name,l.color=t.fColor,l.font="raleway",l.__textnode=!0,s[1].populate(l),s},effects:[function(e,t,n,r,o,i){t[0].set("color",e.bColor)},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[1].set("content",e.name)}],context:{}},state:function(){return{w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}},props:["name"],hooks:{focus:function(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus:function(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter:function(){this.$router.to("/examples/firebolt/".concat(this.name))}}}),ru=Go.Component("Methods",{code:{render:function(e,t,n,r,o,i,a){var s=[];s[0]=this.element({parent:e||"root"},t),s[0].populate({}),e=s[0];var u={};s[1]=this.element({parent:e||"root"},t),u.w=t.w,u.h=t.h,u.color=t.nameBgColor,u.effects=[{type:"radius",props:{radius:[8,8,0,0]}}],s[1].populate(u),e=s[1];var l={};s[2]=this.element({parent:e||"root"},t),l.content=t.name,l.x=t.w/2,l.y=t.h/2,l.mount=.5,l.color="0xffffffff",l.font="lato",l.size=50,l.__textnode=!0,s[2].populate(l),e=s[0];var c={};s[3]=this.element({parent:e||"root"},t),c.w=t.w,c.h=50,c.color="0x4b5563ff",c.y=75,c.effects=[{type:"radius",props:{radius:[0,0,8,8]}}],s[3].populate(c),e=s[3];var f={};return s[4]=this.element({parent:e||"root"},t),f.content=t.about,f.maxwidth=t.w,f.align="center",f.font="lato",f.maxlines=1,f.size=28,f.y=6,f.__textnode=!0,s[4].populate(f),s},effects:[function(e,t,n,r,o,i){t[1].set("color",e.nameBgColor)},function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(e,t,n,r,o,i){t[2].set("content",e.name)},function(e,t,n,r,o,i){t[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(e,t,n,r,o,i){t[4].set("content",e.about)}],context:{}},state:function(){return{w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["name","about"],hooks:{focus:function(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }",this.$emit("execute",this.name)},unfocus:function(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),ou=Go.Component("List",{components:{Method:ru,Module:nu},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=this,f=[],p=!1;f[0]=this.element({parent:e||"root"},!0===p?l:t),f[0].populate({}),e=f[0];var d={};f[1]=this.element({parent:e||"root"},!0===p?l:t),d.y={transition:t.y},f[1].populate(d),e=f[1];var h,m,g,v=[],y=function(){t[Symbol.for("removeGlobalEffects")](g),g=null,g=function(){var a=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),g=new Set,v=d.length,y={}||{};h=y.from||0,m="to"in y?y.to:d.length;for(;v--;){var b=d[v];v<m&&v>=h&&g.add(""+b.name)}for(var x=f.length;x--;)if(!1===g.has(f[x])){var w=f[x];a[2][w]&&a[2][w].destroy(),delete a[2][w],a[3][w]&&a[3][w].destroy(),delete a[3][w]}f.length=0;for(var S=d.length,T=[],k=function(){if(C<h||C>=m)return 1;var g=Object.create(t);e=a[1],g.item=d[C],g.index=C,g.key=""+g.item.name,f.push(g.key);var v=n.components&&n.components.Method||r.Method;void 0===a[2]&&(a[2]={});var y={};void 0===a[2][g.key]&&(a[2][g.key]=c.element({parent:e||"root"},!0===p?l:t)),y.name=g.item.name,y.about=g.item.about,y.y=160*g.index,y.ref=g.type+g.index;var b=[];if(void 0!==v)for(var x in v[Symbol.for("config")].props)delete y[v[Symbol.for("config")].props[x]],b.push(v[Symbol.for("config")].props[x]);void 0===a[2][g.key].nodeId&&a[2][g.key].populate(y),void 0===a[3]&&(a[3]={}),e=a[2][g.key];var w={};if(void 0===a[3][g.key]){var S;if(w.name=g.item.name,w.about=g.item.about,u=160*g.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.y=u,u=g.type+g.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),w.ref=u,"string"==typeof(s=w.is||"Method")){if(!(S=n.components&&n.components[s]||r[s]))throw new Error('Component "Method" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(S=s);a[3][g.key]=S.call(null,{props:w},a[2][g.key],t),a[3][g.key][Symbol.for("slots")][0]?(e=a[3][g.key][Symbol.for("slots")][0],l=a[3][g.key],p=!0):e=a[3][g.key][Symbol.for("children")][0]}var k=function(){void 0!==b&&-1!==b.indexOf("y")||a[2][g.key].set("y",160*g.index)};o(k,null),T.push(k),t[Symbol.for("effects")].push(k),a[3][g.key][Symbol.for("props")].y=160*g.index},C=0;C<S;C++)k();return T}(t.methods,f,v)};t[Symbol.for("effects")].push(y),o(y,["methods"]);var b=function(){t.type;for(var e=0;e<t.methods.length;e++)if(!(e<h||e>=m)){var n={};n.index=e,n.item=t.methods[e],n.key=n.item.name,"undefined"!=typeof skip2&&-1!==skip2.indexOf("ref")||f[2][n.key].set("ref",t.type+n.index)}};t[Symbol.for("effects")].push(b),o(b);var x=function(){t.type;for(var e=0;e<t.methods.length;e++)if(!(e<h||e>=m)){var n={};n.index=e,n.item=t.methods[e],n.key=n.item.name,f[3][n.key][Symbol.for("props")].ref=t.type+n.index}};t[Symbol.for("effects")].push(x),o(x),e=f[0];var w={};f[4]=this.element({parent:e||"root"},!0===p?l:t),w.x={transition:t.x},w.y=325,f[4].populate(w),e=f[4];var S,T,k,C=[],A=function(){t[Symbol.for("removeGlobalEffects")](k),k=null,k=function(){var o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,f=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),d=new Set,h=f.length,m={}||{};S=m.from||0,T="to"in m?m.to:f.length;for(;h--;){var g=f[h];h<T&&h>=S&&d.add(""+g.id)}for(var v=a.length;v--;)if(!1===d.has(a[v])){var y=a[v];o[5][y]&&o[5][y].destroy(),delete o[5][y],o[6][y]&&o[6][y].destroy(),delete o[6][y]}a.length=0;for(var b=f.length,x=0;x<b;x++)if(!(x<S||x>=T)){var w=Object.create(t);e=o[4],w.item=f[x],w.index=x,w.key=""+w.item.id,a.push(w.key);var k=n.components&&n.components.Module||r.Module;void 0===o[5]&&(o[5]={});var C={};void 0===o[5][w.key]&&(o[5][w.key]=c.element({parent:e||"root"},!0===p?l:t)),C.name=w.item.name,C.ref=w.type+w.index,C.x=400*w.index;var A=[];if(void 0!==k)for(var E in k[Symbol.for("config")].props)delete C[k[Symbol.for("config")].props[E]],A.push(k[Symbol.for("config")].props[E]);void 0===o[5][w.key].nodeId&&o[5][w.key].populate(C),void 0===o[6]&&(o[6]={}),e=o[5][w.key];var I={};if(void 0===o[6][w.key]){I.name=w.item.name,u=w.type+w.index,!0===Array.isArray(u)&&(u=i(u).slice(0)),I.ref=u,I.x=400*w.index;var M=void 0;if("string"==typeof(s=I.is||"Module")){if(!(M=n.components&&n.components[s]||r[s]))throw new Error('Component "Module" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(M=s);o[6][w.key]=M.call(null,{props:I},o[5][w.key],t),o[6][w.key][Symbol.for("slots")][0]?(e=o[6][w.key][Symbol.for("slots")][0],l=o[6][w.key],p=!0):e=o[6][w.key][Symbol.for("children")][0]}}return[]}(t.modules,f,C)};t[Symbol.for("effects")].push(A),o(A,["modules"]);var E=function(){t.type;for(var e=0;e<t.modules.length;e++)if(!(e<S||e>=T)){var n={};n.index=e,n.item=t.modules[e],n.key=n.item.id,"undefined"!=typeof skip5&&-1!==skip5.indexOf("ref")||f[5][n.key].set("ref",t.type+n.index)}};t[Symbol.for("effects")].push(E),o(E);var I=function(){t.type;for(var e=0;e<t.modules.length;e++)if(!(e<S||e>=T)){var n={};n.index=e,n.item=t.modules[e],n.key=n.item.id,f[6][n.key][Symbol.for("props")].ref=t.type+n.index}};return t[Symbol.for("effects")].push(I),o(I),f},effects:[function(e,t,n,r,o,i){t[1].set("y",{transition:e.y})},function(e,t,n,r,o,i){t[4].set("x",{transition:e.x})}],context:{}},state:function(){return{x:400,y:100,activeIndex:0}},props:["data","type"],computed:{methods:function(){return this.isModule,this.data,this.isModule?[]:this.data},modules:function(){return this.isModule,this.data,this.isModule?this.data:[]},isModule:function(){return this.type,"module"===this.type}},watch:{activeIndex:function(e){var t=this.$select("".concat(this.type).concat(e));t&&t.$focus&&t.$focus()}},hooks:{focus:function(){this.$trigger("activeIndex")}},input:{right:function(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left:function(){this.isModule&&this.activeIndex>0&&this.move(-1)},down:function(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up:function(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move:function(e){var t=this.activeIndex+e;"method"==this.type?this.y=t>5?160*-(t-5)-100:100:"module"==this.type&&(this.x=t>3?400*-(t-3)-400:400),this.activeIndex=t}}}),iu=Go.Component("FireBolt",{components:{List:ou},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0;l[0]=this.element({parent:e||"root"},!0===c?u:t),l[0].populate({}),!0===c&&(f-=1),e=l[0];var p={};l[1]=this.element({parent:e||"root"},!0===c?u:t),p.content="FireBolt Modules",p.x=960,p.y=80,p.mount="{x:0.5}",p.size=80,p.font="raleway",p.__textnode=!0,l[1].populate(p),!0===c&&(f-=1);var d=n.components&&n.components.List||r.List;e=l[0];var h={};l[2]=this.element({parent:e||"root"},!0===c?u:t),h.data=t.moduleNames,h.type="module",h.ref="modules";var m=[];if(void 0!==d)for(var g in d[Symbol.for("config")].props)delete h[d[Symbol.for("config")].props[g]],m.push(d[Symbol.for("config")].props[g]);l[2].populate(h),!0===c&&(f-=1),e=l[2];var v,y={};if(y.data=t.moduleNames,y.type="module",y.ref="modules","string"==typeof(s=y.is||"List")){if(!(v=n.components&&n.components[s]||r[s]))throw new Error('Component "List" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(v=s);return l[3]=v.call(null,{props:y},l[2],t),l[3][Symbol.for("slots")][0]?(e=l[3][Symbol.for("slots")][0],u=l[3],c=!0):e=l[3][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),l},effects:[],context:{}},computed:{moduleNames:function(){return Object.keys(tu).map(function(e){return{id:e,name:e.charAt(0).toUpperCase()+e.slice(1)}})}},hooks:{focus:function(){var e=this.$select("modules");e&&e.$focus&&e.$focus()}}}),au=Go.Component("DeviceModule",{components:{List:ou},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0;l[0]=this.element({parent:e||"root"},!0===c?u:t),l[0].populate({}),!0===c&&(f-=1),e=l[0];var p={};l[1]=this.element({parent:e||"root"},!0===c?u:t),p.content="Device",p.x=960,p.mount="{x:0.5}",p.y=50,p.font="raleway",p.size=40,p.__textnode=!0,l[1].populate(p),!0===c&&(f-=1),e=l[0];var d={};l[2]=this.element({parent:e||"root"},!0===c?u:t),d.content=t.device.about,d.x=960,d.mount="{x:0.5}",d.y=110,d.font="lato",d.__textnode=!0,l[2].populate(d),!0===c&&(f-=1);var h=n.components&&n.components.List||r.List;e=l[0];var m={};l[3]=this.element({parent:e||"root"},!0===c?u:t),m.data=t.device.methods,m.x=300,m.ref="methods",m.type="method",m.y=100;var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);l[3].populate(m),!0===c&&(f-=1),e=l[3];var y,b={};if(b.data=t.device.methods,b.x=300,b.ref="methods",b.type="method",b.y=100,"string"==typeof(s=b.is||"List")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "List" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);l[4]=y.call(null,{props:b},l[3],t),l[4][Symbol.for("slots")][0]?(e=l[4][Symbol.for("slots")][0],u=l[4],c=!0):e=l[4][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),e=l[0];var x={};l[5]=this.element({parent:e||"root"},!0===c?u:t),x.x=1400,x.y=540,x.content=t.response,x.size=100,x.mount=.5,x.font="lato",x.show=!t.isNetworkRes,x.__textnode=!0,l[5].populate(x),!0===c&&(f-=1),e=l[0];var w={};l[6]=this.element({parent:e||"root"},!0===c?u:t),w.show=t.isNetworkRes,l[6].populate(w),!0===c&&(f-=1),e=l[6];var S={};l[7]=this.element({parent:e||"root"},!0===c?u:t),S.content="State: "+t.networkRes.state,S.size=70,S.font="lato",S.x=1400,S.y=500,S.mount=.5,S.__textnode=!0,l[7].populate(S),!0===c&&(f-=1),e=l[6];var T={};return l[8]=this.element({parent:e||"root"},!0===c?u:t),T.content="Type: "+t.networkRes.type,T.size=70,T.font="lato",T.y=580,T.x=1400,T.mount=.5,T.__textnode=!0,l[8].populate(T),!0===c&&(f-=1),l},effects:[function(e,t,n,r,o,i){t[5].set("content",e.response)},function(e,t,n,r,o,i){t[5].set("show",!e.isNetworkRes)},function(e,t,n,r,o,i){t[6].set("show",e.isNetworkRes)},function(e,t,n,r,o,i){t[7].set("content","State: "+e.networkRes.state)},function(e,t,n,r,o,i){t[8].set("content","Type: "+e.networkRes.type)}],context:{}},state:function(){return{device:tu.device,response:"",networkRes:{},isNetworkRes:!1}},hooks:{ready:function(){var e=this;this.$listen("execute",function(){var t=i(n().m(function t(r){var o,i,a,s;return n().w(function(t){for(;;)switch(t.n){case 0:e.$log.info("Execute Device ".concat(r," API")),e.isNetworkRes=!1,o=r,t.n="make"===o?1:"model"===o?3:"name"===o?5:"network"===o?7:"platform"===o?9:11;break;case 1:return t.n=2,Qs.make();case 2:case 4:case 6:case 10:return e.response=t.v,t.a(3,11);case 3:return t.n=4,Qs.model();case 5:return t.n=6,Qs.name();case 7:return i=Object,a=e.networkRes,t.n=8,Qs.network();case 8:return s=t.v,i.assign.call(i,a,s),e.isNetworkRes=!0,t.a(3,11);case 9:return t.n=10,Qs.platform();case 11:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},focus:function(){var e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),su=Go.Component("AccountModule",{components:{List:ou},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0;l[0]=this.element({parent:e||"root"},!0===c?u:t),l[0].populate({}),!0===c&&(f-=1),e=l[0];var p={};l[1]=this.element({parent:e||"root"},!0===c?u:t),p.content="Account",p.x=960,p.mount="{x:0.5}",p.y=50,p.font="raleway",p.size=40,p.__textnode=!0,l[1].populate(p),!0===c&&(f-=1),e=l[0];var d={};l[2]=this.element({parent:e||"root"},!0===c?u:t),d.content=t.account.about,d.x=960,d.mount="{x:0.5}",d.y=110,d.font="lato",d.__textnode=!0,l[2].populate(d),!0===c&&(f-=1);var h=n.components&&n.components.List||r.List;e=l[0];var m={};l[3]=this.element({parent:e||"root"},!0===c?u:t),m.data=t.account.methods,m.x=300,m.ref="methods",m.y=300,m.type="method";var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);l[3].populate(m),!0===c&&(f-=1),e=l[3];var y,b={};if(b.data=t.account.methods,b.x=300,b.ref="methods",b.y=300,b.type="method","string"==typeof(s=b.is||"List")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "List" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);l[4]=y.call(null,{props:b},l[3],t),l[4][Symbol.for("slots")][0]?(e=l[4][Symbol.for("slots")][0],u=l[4],c=!0):e=l[4][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),e=l[0];var x={};return l[5]=this.element({parent:e||"root"},!0===c?u:t),x.x=1400,x.y=540,x.content=t.response,x.size=t.size,x.mount=.5,x.font="lato",x.__textnode=!0,l[5].populate(x),!0===c&&(f-=1),l},effects:[function(e,t,n,r,o,i){t[5].set("content",e.response)},function(e,t,n,r,o,i){t[5].set("size",e.size)}],context:{}},state:function(){return{account:tu.account,response:"",size:100}},hooks:{ready:function(){var e=this;this.$listen("execute",function(){var t=i(n().m(function t(r){var o;return n().w(function(t){for(;;)switch(t.n){case 0:e.$log.info("Execute Account ".concat(r," API")),o=r,t.n="id"===o?1:"uid"===o?3:5;break;case 1:return e.size=100,t.n=2,Ys.id();case 2:case 4:return e.response=t.v,t.a(3,5);case 3:return e.size=40,t.n=4,Qs.uid();case 5:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},focus:function(){var e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),uu=Go.Component("LocalizationModule",{components:{List:ou},code:{render:function(e,t,n,r,o,i,a){var s,u,l=[],c=!1,f=0;l[0]=this.element({parent:e||"root"},!0===c?u:t),l[0].populate({}),!0===c&&(f-=1),e=l[0];var p={};l[1]=this.element({parent:e||"root"},!0===c?u:t),p.content="Localization",p.x=960,p.mount="{x:0.5}",p.y=50,p.font="raleway",p.size=40,p.__textnode=!0,l[1].populate(p),!0===c&&(f-=1),e=l[0];var d={};l[2]=this.element({parent:e||"root"},!0===c?u:t),d.content=t.localization.about,d.x=960,d.mount="{x:0.5}",d.y=110,d.font="lato",d.__textnode=!0,l[2].populate(d),!0===c&&(f-=1);var h=n.components&&n.components.List||r.List;e=l[0];var m={};l[3]=this.element({parent:e||"root"},!0===c?u:t),m.data=t.localization.methods,m.x=300,m.ref="methods",m.y=100,m.type="method";var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);l[3].populate(m),!0===c&&(f-=1),e=l[3];var y,b={};if(b.data=t.localization.methods,b.x=300,b.ref="methods",b.y=100,b.type="method","string"==typeof(s=b.is||"List")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "List" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);l[4]=y.call(null,{props:b},l[3],t),l[4][Symbol.for("slots")][0]?(e=l[4][Symbol.for("slots")][0],u=l[4],c=!0):e=l[4][Symbol.for("children")][0],!0===c&&0===f&&(c=!1),e=l[0];var x={};return l[5]=this.element({parent:e||"root"},!0===c?u:t),x.x=1400,x.y=540,x.content=t.response,x.size=t.size,x.mount=.5,x.font="lato",x.__textnode=!0,l[5].populate(x),!0===c&&(f-=1),l},effects:[function(e,t,n,r,o,i){t[5].set("content",e.response)},function(e,t,n,r,o,i){t[5].set("size",e.size)}],context:{}},state:function(){return{localization:tu.localization,response:"",size:100}},hooks:{ready:function(){var e=this;this.$listen("execute",function(){var t=i(n().m(function t(r){var o;return n().w(function(t){for(;;)switch(t.n){case 0:e.$log.info("Execute Keyboard ".concat(r," API")),e.response="null",o=r,t.n="countryCode"===o?1:"language"===o?3:"latlon"===o?5:"locality"===o?7:"postalCode"===o?9:11;break;case 1:return t.n=2,Zs.countryCode();case 2:case 4:case 8:case 10:return e.response=t.v,t.a(3,11);case 3:return t.n=4,Zs.language();case 5:return t.n=6,Zs.latlon();case 6:return e.response=t.v.toString(),t.a(3,11);case 7:return t.n=8,Zs.locality();case 9:return t.n=10,Zs.postalCode();case 11:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},focus:function(){var e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),lu=[{path:"/examples/firebolt",component:iu},{path:"/examples/firebolt/device",component:au},{path:"/examples/firebolt/account",component:su},{path:"/examples/firebolt/localization",component:uu}],cu=Go.Component("Item",{code:{render:function(e,t,n,r,o,i,a){var s=[],u={};s[0]=this.element({parent:e||"root"},t),u.color=t.hasFocus?"0xe0f2feff":"0xfef9c3ff",u.w=200,u.h=200,u.effects=[{type:"radius",props:{radius:12}}],s[0].populate(u),e=s[0];var l={};return s[1]=this.element({parent:e||"root"},t),l.content=t.name,l.size=t.hasFocus?38:32,l.color=t.hasFocus?"0x1e3a8aff":"0x2563ebff",l.placement="{x: 'center', y: 'middle'}",l.__textnode=!0,s[1].populate(l),s},effects:[function(e,t,n,r,o,i){t[0].set("color",e.hasFocus?"0xe0f2feff":"0xfef9c3ff")},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:12}}])},function(e,t,n,r,o,i){t[1].set("content",e.name)},function(e,t,n,r,o,i){t[1].set("size",e.hasFocus?38:32)},function(e,t,n,r,o,i){t[1].set("color",e.hasFocus?"0x1e3a8aff":"0x2563ebff")}],context:{}},props:["name"],state:function(){return{message:null}},hooks:{focus:function(){this.message=this.$announcer.speak(this.name)},unfocus:function(){this.message&&(this.message.stop(),this.message.cancel())}}}),fu=Go.Component("Row",{components:{Item:cu},code:{render:function(e,t,n,r,o,i,a){var s,u,l=this,c=[],f=!1;c[0]=this.element({parent:e||"root"},!0===f?u:t),c[0].populate({}),e=c[0];var p={};c[1]=this.element({parent:e||"root"},!0===f?u:t),p.content=t.title,p.size=40,p.__textnode=!0,c[1].populate(p),e=c[0];var d,h,m,g=[],v=function(){t[Symbol.for("removeGlobalEffects")](m),m=null,m=function(){var o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,c=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),p=new Set,m=c.length,g={}||{};d=g.from||0,h="to"in g?g.to:c.length;for(;m--;)c[m],m<h&&m>=d&&p.add(""+m);for(var v=a.length;v--;)if(!1===p.has(a[v])){var y=a[v];o[2][y]&&o[2][y].destroy(),delete o[2][y],o[3][y]&&o[3][y].destroy(),delete o[3][y]}a.length=0;for(var b=c.length,x=0;x<b;x++)if(!(x<d||x>=h)){var w=Object.create(t);e=o[0],w.item=c[x],w.index=x,w.key=""+x,w.__ref="item"+x,a.push(w.key);var S=n.components&&n.components.Item||r.Item;void 0===o[2]&&(o[2]={});var T={};void 0===o[2][w.key]&&(o[2][w.key]=l.element({parent:e||"root"},!0===f?u:t)),T.name=w.item,T.y=100,T.x=250*w.index+100,T.ref=w.__ref;var k=[];if(void 0!==S)for(var C in S[Symbol.for("config")].props)delete T[S[Symbol.for("config")].props[C]],k.push(S[Symbol.for("config")].props[C]);void 0===o[2][w.key].nodeId&&o[2][w.key].populate(T),void 0===o[3]&&(o[3]={}),e=o[2][w.key];var A={};if(void 0===o[3][w.key]){A.name=w.item,A.y=100,A.x=250*w.index+100,A.ref=w.__ref;var E=void 0;if("string"==typeof(s=A.is||"Item")){if(!(E=n.components&&n.components[s]||r[s]))throw new Error('Component "Item" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(E=s);o[3][w.key]=E.call(null,{props:A},o[2][w.key],t),o[3][w.key][Symbol.for("slots")][0]?(e=o[3][w.key][Symbol.for("slots")][0],u=o[3][w.key],f=!0):e=o[3][w.key][Symbol.for("children")][0]}}return[]}(t.items,c,g)};return t[Symbol.for("effects")].push(v),o(v,["items"]),c},effects:[function(e,t,n,r,o,i){t[1].set("content",e.title)}],context:{}},props:["title","items"],state:function(){return{focusIndex:-1,message:null}},hooks:{focus:function(){this.message=this.$announcer.speak("Row with different "+this.title),this.focusIndex=0,this.$trigger("focusIndex")},unfocus:function(){this.message&&(this.message.stop(),this.message.cancel())}},watch:{focusIndex:function(e){this.$select("item"+e).$focus()}},input:{right:function(){this.focusIndex=Math.min(this.focusIndex+1,this.items.length-1)},left:function(){this.focusIndex=Math.max(this.focusIndex-1,0)}}}),pu=Go.Component("Announcer",{components:{Row:fu},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0,d={};c[0]=this.element({parent:e||"root"},!0===f?l:t),d.width=1*e.node.width,d.y=50,c[0].populate(d),!0===f&&(p-=1),e=c[0];var h={};c[1]=this.element({parent:e||"root"},!0===f?l:t),h.placement="{x: 'center'}",h.size=50,h.content="Food",h.__textnode=!0,c[1].populate(h),!0===f&&(p-=1);var m=n.components&&n.components.Row||r.Row;e=c[0];var g={};c[2]=this.element({parent:e||"root"},!0===f?l:t),g.title="Fruits",g.x=200,g.y=150,g.items=["Banana","Strawberry","Kiwi","Mango","Grape"],g.ref="row1";var v=[];if(void 0!==m)for(var y in m[Symbol.for("config")].props)delete g[m[Symbol.for("config")].props[y]],v.push(m[Symbol.for("config")].props[y]);c[2].populate(g),!0===f&&(p-=1),e=c[2];var b,x={};if(x.title="Fruits",x.x=200,x.y=150,u=["Banana","Strawberry","Kiwi","Mango","Grape"],!0===Array.isArray(u)&&(u=i(u).slice(0)),x.items=u,x.ref="row1","string"==typeof(s=x.is||"Row")){if(!(b=n.components&&n.components[s]||r[s]))throw new Error('Component "Row" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(b=s);c[3]=b.call(null,{props:x},c[2],t),c[3][Symbol.for("slots")][0]?(e=c[3][Symbol.for("slots")][0],l=c[3],f=!0):e=c[3][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var w=n.components&&n.components.Row||r.Row;e=c[0];var S={};c[4]=this.element({parent:e||"root"},!0===f?l:t),S.title="Snacks",S.x=200,S.y=600,S.items=["Pizza","Burger","Fries","Popcorn","Chocolate"],S.ref="row2";var T=[];if(void 0!==w)for(var k in w[Symbol.for("config")].props)delete S[w[Symbol.for("config")].props[k]],T.push(w[Symbol.for("config")].props[k]);c[4].populate(S),!0===f&&(p-=1),e=c[4];var C,A={};if(A.title="Snacks",A.x=200,A.y=600,u=["Pizza","Burger","Fries","Popcorn","Chocolate"],!0===Array.isArray(u)&&(u=i(u).slice(0)),A.items=u,A.ref="row2","string"==typeof(s=A.is||"Row")){if(!(C=n.components&&n.components[s]||r[s]))throw new Error('Component "Row" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(C=s);return c[5]=C.call(null,{props:A},c[4],t),c[5][Symbol.for("slots")][0]?(e=c[5][Symbol.for("slots")][0],l=c[5],f=!0):e=c[5][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skip2&&-1!==skip2.indexOf("items")||t[2].set("items",["Banana","Strawberry","Kiwi","Mango","Grape"])},function(e,t,n,r,o,i){t[3][Symbol.for("props")].items=["Banana","Strawberry","Kiwi","Mango","Grape"]},function(e,t,n,r,o,i){"undefined"!=typeof skip4&&-1!==skip4.indexOf("items")||t[4].set("items",["Pizza","Burger","Fries","Popcorn","Chocolate"])},function(e,t,n,r,o,i){t[5][Symbol.for("props")].items=["Pizza","Burger","Fries","Popcorn","Chocolate"]}],context:{}},state:function(){return{focusIndex:1}},watch:{focusIndex:function(e){this.$select("row"+e).$focus()}},hooks:{focus:function(){this.$announcer.speak("The topic is Food"),this.$select("row1").$focus(),this.$trigger("focusIndex")}},input:{up:function(){this.focusIndex=Math.max(this.focusIndex-1,1)},down:function(){this.focusIndex=Math.min(this.focusIndex+1,2)}}}),du=new URLSearchParams(window.location.search),hu=!!du.get("source"),mu=!!du.get("fps"),gu=Go.Application({components:{SourceInfo:Yo},code:{render:function(e,t,n,r,o,i,a){var s,u,l,c=[],f=!1,p=0,d={};c[0]=this.element({parent:e||"root"},!0===f?l:t),d.w=1920,d.h=1080,d.color=t.backgroundColor,c[0].populate(d),!0===f&&(p-=1);var h=n.components&&n.components.RouterView||r.RouterView;e=c[0];var m={};c[1]=this.element({parent:e||"root"},!0===f?l:t),m.w=1*e.node.width,m.h=1*e.node.height;var g=[];if(void 0!==h)for(var v in h[Symbol.for("config")].props)delete m[h[Symbol.for("config")].props[v]],g.push(h[Symbol.for("config")].props[v]);c[1].populate(m),!0===f&&(p-=1),e=c[1];var y,b={};if(b.w=1*e.node.width,b.h=1*e.node.height,"string"==typeof(s=b.is||"RouterView")){if(!(y=n.components&&n.components[s]||r[s]))throw new Error('Component "RouterView" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(y=s);c[2]=y.call(null,{props:b},c[1],t),c[2][Symbol.for("slots")][0]?(e=c[2][Symbol.for("slots")][0],l=c[2],f=!0):e=c[2][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var x=n.components&&n.components.FPScounter||r.FPScounter;e=c[0];var w={};c[3]=this.element({parent:e||"root"},!0===f?l:t),w.x=1610,w.show=t.showFPS;var S=[];if(void 0!==x)for(var T in x[Symbol.for("config")].props)delete w[x[Symbol.for("config")].props[T]],S.push(x[Symbol.for("config")].props[T]);c[3].populate(w),!0===f&&(p-=1),e=c[3];var k,C={};if(C.x=1610,u=t.showFPS,!0===Array.isArray(u)&&(u=i(u).slice(0)),C.show=u,"string"==typeof(s=C.is||"FPScounter")){if(!(k=n.components&&n.components[s]||r[s]))throw new Error('Component "FPScounter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(k=s);c[4]=k.call(null,{props:C},c[3],t),c[4][Symbol.for("slots")][0]?(e=c[4][Symbol.for("slots")][0],l=c[4],f=!0):e=c[4][Symbol.for("children")][0],!0===f&&0===p&&(f=!1);var A=n.components&&n.components.SourceInfo||r.SourceInfo;e=c[0];var E={};c[5]=this.element({parent:e||"root"},!0===f?l:t),E.ref="info",E.show=t.showInfo;var I=[];if(void 0!==A)for(var M in A[Symbol.for("config")].props)delete E[A[Symbol.for("config")].props[M]],I.push(A[Symbol.for("config")].props[M]);c[5].populate(E),!0===f&&(p-=1),e=c[5];var R,_={};if(_.ref="info",u=t.showInfo,!0===Array.isArray(u)&&(u=i(u).slice(0)),_.show=u,"string"==typeof(s=_.is||"SourceInfo")){if(!(R=n.components&&n.components[s]||r[s]))throw new Error('Component "SourceInfo" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(R=s);return c[6]=R.call(null,{props:_},c[5],t),c[6][Symbol.for("slots")][0]?(e=c[6][Symbol.for("slots")][0],l=c[6],f=!0):e=c[6][Symbol.for("children")][0],!0===f&&0===p&&(f=!1),c},effects:[function(e,t,n,r,o,i){t[0].set("color",e.backgroundColor)},function(e,t,n,r,o,i){"undefined"!=typeof skip3&&-1!==skip3.indexOf("show")||t[3].set("show",e.showFPS)},function(e,t,n,r,o,i){t[4][Symbol.for("props")].show=e.showFPS},function(e,t,n,r,o,i){"undefined"!=typeof skip5&&-1!==skip5.indexOf("show")||t[5].set("show",e.showInfo)},function(e,t,n,r,o,i){t[6][Symbol.for("props")].show=e.showInfo}],context:{}},state:function(){return{backgroundColor:"#1e293b",showFPS:mu,showInfo:!1}},routes:[{path:"/",component:Jo,options:{keepAlive:!0}},{path:"/demos/loading",component:function(){return he(function(){return r.import("./Loading-legacy-FCahUEzT.js")})}},{path:"/demos/intro",component:function(){return new Promise(function(e){e(ei)})}},{path:"/demos/theming",component:ri},{path:"/demos/tmdb",component:yi},{path:"/demos/sprites",component:wi},{path:"/demos/focushandling",component:ki},{path:"/demos/memory-game",component:Aa,announce:"Let's play Memory"},{path:"/demos/player",component:Vi},{path:"/examples/positioning",component:Ci},{path:"/examples/colors",component:Hi},{path:"/examples/gradients",component:qi},{path:"/examples/transitions",component:Xi},{path:"/examples/alpha",component:Wi},{path:"/examples/scaling",component:Ki},{path:"/examples/rotation",component:$i},{path:"/examples/keyinput",component:Yi},{path:"/examples/texts",component:Zi},{path:"/examples/images",component:ta},{path:"/examples/components",component:oa},{path:"/examples/forloop",component:aa},{path:"/examples/forloop-advanced",component:ga},{path:"/examples/effects",component:va},{path:"/examples/showif",component:ya},{path:"/examples/events",component:ba},{path:"/examples/slots",component:Ta},{path:"/examples/viewport",component:La}].concat(Fa,[{path:"/examples/resize",component:za},{path:"/examples/languageplugin",component:Va},{path:"/examples/keycodes",component:qa},{path:"/examples/translations",component:Va},{path:"/examples/special-characters",component:Ka},{path:"/examples/layout",component:$a},{path:"/examples/announcer",component:pu,announce:"Welcome to the announcement example page"},{path:"/benchmarks/exponential",component:Ma}],lu),hooks:{ready:function(){var e=this;!0===hu&&(this.showInfo=!0),this.$listen("changeBackground",function(t){e.backgroundColor=t?t+80:"#1e293b"}),this.$listen("clearBackground",function(){e.backgroundColor="transparent"})}},input:{intercept:function(e){var t=this;return i(n().m(function r(){return n().w(function(n){for(;;)switch(n.n){case 0:if("x"!==e.key){n.n=1;break}return t.$log.info("Intercepting key press (".concat(e.key,") in App Component")),n.a(2,new Promise(function(n){t.$log.info("Executing an async operation"),setTimeout(function(){t.$log.info("Finished an async operation"),n(e)},2e3)}));case 1:return n.a(2,e)}},r)}))()},escape:function(){this.quit()},back:function(){this.$router.to("/")},sourceCode:function(){this.showInfo=!1;var e=vu(this.$router.currentRoute.path);e&&window.open("https://github.com/lightning-js/blits-example-app/tree/master/".concat(e),"_blank")}}}),vu=function(e){return{"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"}["/"+e]+".js"},yu={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},bu={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};Go.Plugin(qo,"colors",{themes:{light:yu.light,dark:yu.dark},base:"light",current:"dark"}),Go.Plugin(qo,"sizes",{themes:{small:bu.small,large:bu.large},base:"small",current:"small"}),Go.Plugin(Ho),Go.Launch(gu,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:g(g({},(eu={},Object.keys(Wo).forEach(function(e){Wo[e].test&&"function"==typeof Wo[e].test&&!0===Wo[e].test()&&(eu=Wo[e].mapping)}),eu)),{85:"sourceCode"}),fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0})}}})}();
