!function(){function e(e,n,r,o){var i=t(l(1&o?e.prototype:e),n,r);return 2&o&&"function"==typeof i?function(e){return i.apply(r,e)}:i}function t(){return t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},t.apply(null,arguments)}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function s(n,o,i,a){var s=o&&o.prototype instanceof u?o:u,c=Object.create(s.prototype);return r(c,"_invoke",function(n,r,o){var i,a,s,u=0,c=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,a=0,s=e,d.n=n,l}};function p(n,r){for(a=n,s=r,t=0;!f&&u&&!o&&t<c.length;t++){var o,i=c[t],p=d.p,h=i[2];n>3?(o=h===r)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,d.v=r,d.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,d.n=h,a=0))}if(o||n>1)return l;throw f=!0,r}return function(o,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),a=c,s=h;(t=a<2?e:s)||!f;){i||(a?a<3?(a>1&&(d.n=-1),p(a,s)):d.n=s:d.v=s);try{if(u=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==l)break}catch(t){i=e,a=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,i,a),!0),c}var l={};function u(){}function c(){}function f(){}t=Object.getPrototypeOf;var d=[][i]?t(t([][i]())):(r(t={},i,function(){return this}),t),p=f.prototype=u.prototype=Object.create(d);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=f,r(p,"constructor",f),r(f,"constructor",c),c.displayName="GeneratorFunction",r(f,a,"GeneratorFunction"),r(p),r(p,a,"Generator"),r(p,i,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:h}})()}function r(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}r=function(e,t,n,o){function a(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},r(e,t,n,o)}function o(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,l,"next",e)}function l(e){o(a,r,i,s,l,"throw",e)}s(void 0)})}}function a(e,t,n){return t=l(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function S(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register([],function(t,r){"use strict";return{execute:function(){var o,s,l,c,d,m,b={cleanup:Symbol("cleanup"),currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),internalEvent:Symbol("internalEvent"),intervals:Symbol("intervals"),isProxy:Symbol("isProxy"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),config:Symbol.for("config"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},S=v(v(v({},b.settings,{}),"get",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e in this[b.settings]?this[b.settings][e]:t}),"set",function(e,t){var n=this;"object"===x(e)?Object.keys(e).forEach(function(t){n.set(t,e[t])}):this[b.settings][e]=t}),T=function(){},k=function(e){return String(e).padStart(2,"0")},C=function(){var e=new Date;return k(e.getHours())+":"+k(e.getMinutes())+":"+k(e.getSeconds())},A=function(e){var t=S.get("debugLevel"),n={};return Object.defineProperty(n,"info",{get:function(){return(t>=1||Array.isArray(t)&&t.indexOf("info")>-1)&&console.info.bind(window.console,"%c ⚡️ ".concat(e," %c ").concat(C()),"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||T}}),Object.defineProperty(n,"warn",{get:function(){return(t>=1||Array.isArray(t)&&t.indexOf("warn")>-1)&&console.warn.bind(window.console,"%c ⚡️ ".concat(e," %c ").concat(C()),"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||T}}),Object.defineProperty(n,"error",{get:function(){return(t>=1||Array.isArray(t)&&t.indexOf("error")>-1)&&console.error.bind(window.console,"%c ⚡️ ".concat(e," %c ").concat(C()),"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||T}}),Object.defineProperty(n,"debug",{get:function(){return(t>=2||Array.isArray(t)&&t.indexOf("debug")>-1)&&console.debug.bind(window.console,"%c ⚡️ ".concat(e," %c (").concat((new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),")"),"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||T}}),n},E={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},I=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,M=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,R=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,_={},L=function(e){if(void 0!==_[e])return _[e];var t=parseInt(e).toString(16).padStart(2,"0");return _[e]=t,t},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0xffffffff";if((e=e.toString()).startsWith("0x")&&10===e.length)return e;if(void 0!==E[e])return E[e];if(I.test(e)){3===(e=e.replace("#","").toLowerCase()).length&&(e=e.split("").map(function(e){return e+e}).join(""));var n="0x"+e.padEnd(8,"f");return E[e]=n,n}var r=M.exec(e);if(r){var o=L(r[3]),i=L(r[5]),a=L(r[7]),s="ff";if(r[10]&&"rgba"===r[1]){var l=Math.min(Math.max(Math.round(255*parseFloat(r[10])),0),255);s=L(l)}var u="0x"+o+i+a+s;return E[e]=u,u}return R.test(e)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):t};function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{children:[]},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={renderCode:["const elms = []","const elementConfigs = []","const forloops = []","const props = []","const created = []","const skips = []","let componentType","let rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0","let cmps = []"],effectsCode:[],cleanupCode:["rootComponent = null","propData = null","slotComponent = null","component = null","parent = null"],context:{props:[],components:this.components}};return d=-1,!0===(m=t)&&n.renderCode.push("\n      function propInComponent(prop, kind=\"dynamic\") {\n        const property = prop.includes('.') ? prop.split('.')[0] : prop\n        if (kind === 'reactive' || prop.includes('.') === false) {\n          if (property in component === false) {\n            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')\n          }\n        } else {\n          const nestedKeys = prop.split('.')\n          let base = component\n          for(let i =0; i<nestedKeys.length;i++){\n            if (base[nestedKeys[i]] === undefined) {\n              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')\n            }\n            base = base[nestedKeys[i]]\n          }\n        }\n      }\n    "),j.call(n,e),n.renderCode.push("\n    return { elms, cleanup: () => {\n      ".concat(n.cleanupCode.join("\n"),"\n      cmps.length = 0\n      elms.length = 0\n      components.length = 0\n      elementConfigs.length = 0\n      forloops.length = 0\n      props.length = 0\n      skips.length = 0\n    }}\n  ")),{render:new Function("parent","component","context","components","effect","getRaw","Log",n.renderCode.join("\n")),effects:n.effectsCode.map(function(e){return new Function("component","elms","context","components","rootComponent","effect",e)}),context:n.context}}var O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dynamic",r=function(e){var t=e.match(/\$\$?\w+(\.\w+)?/g);if(null!==t){var n=/\$shader/;return t.filter(function(e){return!n.test(e)})}return!1}(e);if(!1!==r)for(var o=0;o<r.length;o++){var i=r[o];"reactive"===n&&i.includes(".")&&(i=i.split(".")[0]),t.push("propInComponent('".concat(i.replace("$",""),"', '").concat(n,"')"))}},N=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{key:!1,component:"component.",forceEffect:!1,forloop:!1},o=r.forceEffect?this.effectsCode:this.renderCode;n&&o.push("parent = ".concat(n)),"key"in e&&(r.key=F(e.key,r.component));var i=r.key?"elms[".concat(d,"][").concat(r.key,"]"):"elms[".concat(d,"]");r.key&&o.push("\n      if(elms[".concat(d,"] === undefined) {\n        elms[").concat(d,"] = {}\n      }\n    ")),o.push("elementConfigs[".concat(d,"] = {}")),r.forloop&&o.push("if(".concat(i," === undefined) {")),o.push("\n    ".concat(i," = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)\n  ")),r.forloop&&o.push("}");var a=e.children;delete e.children,"Slot"===e[Symbol.for("componentType")]&&o.push("elementConfigs[".concat(d,"][Symbol.for('isSlot')] = true")),Object.keys(e).forEach(function(n){if("slot"===n&&o.push("\n        elementConfigs[".concat(d,"]['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '").concat(e.slot,"').shift() || parent\n      ")),"key"!==n){var a=e[n];if(V(n)){if(r.holder&&":color"===n)return;r.holder?t.effectsCode.push("\n        if(typeof skips === 'undefined' || (typeof skips[".concat(d,"] === 'undefined' ||\n          skips[").concat(d,"].indexOf('").concat(n.substring(1),"') === -1))\n          ").concat(i,".set('").concat(n.substring(1),"', ").concat(F(e[n],r.component),")\n        ")):t.effectsCode.push("\n            ".concat(i,".set('").concat(n.substring(1),"', ").concat(F(e[n],r.component),")\n          ")),!0===m&&"scope."!==r.component&&a.includes("$")&&O(a,o,"reactive"),o.push("elementConfigs[".concat(d,"]['").concat(n.substring(1),"'] = ").concat(F(a,r.component)))}else!0===m&&"scope."!==r.component&&a.includes("$")&&O(a,o),o.push("elementConfigs[".concat(d,"]['").concat(n,"'] = ").concat(z(a,n,r.component)))}}),!0===r.holder&&o.push("\n    skips[".concat(d,"] = []\n    if(typeof cmps[").concat(d,"] !== 'undefined') {\n      for(let key in cmps[").concat(d,"][Symbol.for('config')].props) {\n        delete elementConfigs[").concat(d,"][cmps[").concat(d,"][Symbol.for('config')].props[key]]\n        skips[").concat(d,"].push(cmps[").concat(d,"][Symbol.for('config')].props[key])\n      }\n    }\n    ")),r.forloop&&o.push("if(".concat(i,".nodeId === undefined) {")),o.push("".concat(i,".populate(elementConfigs[").concat(d,"])")),o.push("\n    if(inSlot === true) {\n      slotChildCounter -= 1\n    }\n  "),r.forloop&&o.push("}"),a&&j.call(this,{children:a},"".concat(i),r)},U=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1},o=r.forceEffect?this.effectsCode:this.renderCode;o.push("\n    cmps[".concat(d,"] =\n      (context.components && context.components['").concat(e[Symbol.for("componentType")],"']) || components['").concat(e[Symbol.for("componentType")],"']\n  ")),this.cleanupCode.push("\n    cmps[".concat(d,"] = null\n  ")),"key"in e&&(r.key=F(e.key,r.component));var i=e.children;delete e.children,N.call(this,e,n,g(g({},r),{holder:!0})),n=r.key?"elms[".concat(d,"][").concat(r.key,"]"):"elms[".concat(d,"]"),d++;var a=r.key?"elms[".concat(d,"][").concat(r.key,"]"):"elms[".concat(d,"]");r.key&&o.push("\n      if(elms[".concat(d,"] === undefined) {\n        elms[").concat(d,"] = {}\n      }\n    ")),n&&o.push("parent = ".concat(n,";")),o.push("props[".concat(d,"] = {}")),this.cleanupCode.push("props[".concat(d,"] = null")),r.forloop&&o.push("if(".concat(a," === undefined) {")),Object.keys(e).forEach(function(n){V(n)?(t.effectsCode.push("\n        ".concat(a,"[Symbol.for('props')]['").concat(n.substring(1),"'] = ").concat(F(e[n],r.component))),o.push("\n        propData = ".concat(F(e[n],r.component),"\n        if (Array.isArray(propData) === true) {\n          propData = getRaw(propData).slice(0)\n        }\n        props[").concat(d,"]['").concat(n.substring(1),"'] = propData"))):o.push("props[".concat(d,"]['").concat(n,"'] = ").concat(z(e[n],n,r.component)))}),o.push("\n    componentType = props[".concat(d,"]['is'] || '").concat(e[Symbol.for("componentType")],"'\n\n    components[").concat(d,"]\n    if(typeof componentType === 'string') {\n      components[").concat(d,"] = context.components && context.components[componentType] || components[componentType]\n      if(!components[").concat(d,"]) {\n        throw new Error('Component \"").concat(e[Symbol.for("componentType")],"\" not found')\n      }\n    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {\n      components[").concat(d,"] = componentType\n    }\n\n    ").concat(a," = components[").concat(d,"].call(null, {props: props[").concat(d,"]}, ").concat(n,", component)\n\n    if (").concat(a,"[Symbol.for('slots')][0]) {\n      parent = ").concat(a,"[Symbol.for('slots')][0]\n      slotComponent = ").concat(a,"\n      inSlot = true\n    } else {\n      parent = ").concat(a,"[Symbol.for('children')][0]\n    }\n  ")),this.cleanupCode.push("components[".concat(d,"] = null")),r.forloop&&o.push("}"),i&&(r.forloop||o.push("\n        if(inSlot === true) {\n          slotChildCounter = ".concat(i.length,"  + 1\n        }\n      ")),d++,N.call(this,{children:i},!1,g({},r))),r.forloop||o.push("\n      if (inSlot === true && slotChildCounter === 0) {\n        inSlot = false\n      }\n    ")},B=function(e,t){var n,r=e[":for"];delete e[":for"];var o=e.range||e[":range"]||"{}";delete e.range,delete e[":range"];var i=e.key,a=F(i,"scope."),s=!(e.$shallow&&"false"===e.$shallow.toLowerCase());delete e.$shallow,delete e.key;var l=/(.+)\s+in\s+(.+)/gi.exec(r),u=y(l[1].replace("(","").replace(")","").split(/\s*,\s*/),2),c=u[0],f=u[1],p=new RegExp("(scope\\.(?!".concat(c,"\\.|").concat(f,"|key)(\\w+))"),"gi"),m={renderCode:[],effectsCode:[],cleanupCode:[],context:{props:[],components:this.components}};if(t&&m.renderCode.push("parent = ".concat(t)),void 0!==f){var g=new RegExp("\\$".concat(f,"(?!['\\w])")).exec(i);Array.isArray(g)&&m.renderCode.push("console.warn(\" Using '".concat(f,"' in the key, like key=").concat(i,',  is not recommended")'))}var v=d;m.renderCode.push("\n    created[".concat(v,"] = []\n\n    let from").concat(v,"\n    let to").concat(v,"\n\n    forloops[").concat(v,"] = (collection = [], elms, created) => {\n      const rawCollection = getRaw(collection)\n      const keys = new Set()\n      let l = rawCollection.length\n\n      const range = ").concat(F(o)," || {}\n      from").concat(v," = range['from'] || 0\n      to").concat(v," = 'to' in range ? range['to'] : rawCollection.length\n\n      while(l--) {\n        const ").concat(c," = rawCollection[l]\n  ")),m.cleanupCode.push("\n    created[".concat(v,"].length = 0\n    forloops[").concat(v,"] = null\n  ")),void 0!==f&&m.renderCode.push("\n        const ".concat(f," = l\n    ")),m.renderCode.push("\n        if(l < to".concat(v," && l >= from").concat(v,") {\n          keys.add('' +  ").concat(F(i,"")||"l",")\n        }\n      }\n  "));var b=m.renderCode.length;m.renderCode.push("\n      created.length = 0\n      const length = rawCollection.length\n      const effects = []\n      for(let __index = 0; __index < length; __index++) {\n        if(__index < from".concat(v," || __index >= to").concat(v,") continue\n        const scope = Object.create(component)\n        parent = ").concat(t,"\n        scope['").concat(c,"'] = rawCollection[__index]\n  ")),""!==f&&m.renderCode.push("\n        scope['".concat(f,"'] = __index\n    ")),m.renderCode.push("\n        scope['key'] = '' + ".concat(a||"__index","\n  ")),"ref"in e&&-1===e.ref.indexOf("$")&&(m.renderCode.push("\n        scope['__ref'] = '".concat(e.ref,"' + __index\n    ")),e.ref="$__ref"),m.renderCode.push("\n        created.push(scope.key)\n  "),"Element"===e[Symbol.for("componentType")]||"Slot"===e[Symbol.for("componentType")]||"Text"===e[Symbol.for("componentType")]?("Text"===e[Symbol.for("componentType")]&&(e.__textnode="true"),N.call(m,e,t,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):U.call(m,e,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});var x=m.effectsCode.filter(function(e){return 0===h(e.matchAll(p)).length}),w=m.effectsCode.filter(function(e){return 0!==h(e.matchAll(p)).length});!1===s&&m.renderCode.push("\n      scope['".concat(c,"'] = null\n      scope['").concat(c,"'] = collection[__index]\n  ")),x.forEach(function(e,t){var n=e.indexOf("scope.".concat(t))>-1?"'".concat(F(l[2],""),"'"):null;-1===e.indexOf("Symbol.for('props')")?m.renderCode.push("\n        let eff".concat(t," = () => {\n          ").concat(e,"\n        }\n        effect(eff").concat(t,", ").concat(n,")\n        effects.push(eff").concat(t,")\n        component[Symbol.for('effects')].push(eff").concat(t,")\n      ")):m.renderCode.push("\n        ".concat(e,"\n      "))}),m.renderCode.push("\n    }\n    return effects\n  }");var S=[];S.push("\n      let i = created.length\n\n      while (i--) {\n        if (keys.has(created[i]) === false) {\n          const key = created[i]\n  ");for(var T=d,k=v;k<=T;k++)S.push("\n        elms[".concat(k,"][key] && elms[").concat(k,"][key].destroy()\n        elms[").concat(k,"][key] = null\n        delete elms[").concat(k,"][key]\n    "));S.push("\n      }\n    }\n  "),(n=m.renderCode).splice.apply(n,[b,0].concat(S));var C="".concat(F(l[2],""));C&&C.includes(".")&&(C=C.match(/[^.]+$/)[0]);var A=h(o.matchAll(/\$([^,} ]+)/g)).map(function(e){return"'".concat(e[1],"'")});m.renderCode.push("\n    let eff".concat(v," = () => {\n      forloops[").concat(v,"](").concat(z(l[2],":for"),", elms, created[").concat(v,"])\n    }\n\n    component[Symbol.for('effects')].push(eff").concat(v,")\n\n    effect(eff").concat(v,", ['").concat(C,"', ").concat(A.join(","),"] )\n  ")),m.cleanupCode.push("\n    eff".concat(v," = null\n  ")),w.forEach(function(e,t){for(var n=h(e.matchAll(p)),r=n.length,o=[];r--;){var i=n[r],s="component.".concat(i[2]);-1===o.indexOf(s)&&o.push(s),i[2]!==c&&(e=e.substring(0,i.index)+s+e.substring(i.index+i[1].length))}m.renderCode.push("\n      let eff".concat(v,"_").concat(t," = () => {\n        void ").concat(o.join(", "),"\n        for(let __index = 0; __index < ").concat(F(l[2]),".length; __index++) {\n          if(__index < from").concat(v," || __index >= to").concat(v,") continue\n          const scope = {}\n          scope['").concat(f,"'] = __index\n          scope['").concat(c,"'] = ").concat(F(l[2]),"[__index]\n          scope['key'] = ").concat(a||"__index","\n    ")),m.cleanupCode.push("eff".concat(v,"_").concat(t," = null")),m.renderCode.push("\n          ".concat(e,"\n        }\n      }\n      component[Symbol.for('effects')].push(eff").concat(v,"_").concat(t,")\n      effect(eff").concat(v,"_").concat(t,")\n    "))}),this.renderCode.push(m.renderCode.join("\n")),this.cleanupCode.push(m.cleanupCode.join("\n"))},j=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.children&&e.children.forEach(function(e){d++,Object.keys(e).indexOf(":for")>-1?B.call(t,e,n):"Element"===e[Symbol.for("componentType")]||"Slot"===e[Symbol.for("componentType")]||"Text"===e[Symbol.for("componentType")]||"Layout"===e[Symbol.for("componentType")]?("Text"===e[Symbol.for("componentType")]&&(e.__textnode="true"),"Layout"===e[Symbol.for("componentType")]&&(e.__layout="true"),N.call(t,e,n,r)):U.call(t,e,n,r)})},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component.";if(void 0===e)return e;var n,r=[],o=0,i=w(e.matchAll(/('.*?')+/gi));try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(a[0]),e=e.replace(a[0],"[@@REPLACEMENT".concat(o,"@@]")),o++}}catch(s){i.e(s)}finally{i.f()}return e=e.replace(/\$(\$(?=\$)|\$?)/g,function(e,n){return""===n?t:"$"===n?t+"$":void 0}),r.forEach(function(t,n){e=e.replace("[@@REPLACEMENT".concat(n,"@@]"),t)}),e},z=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"component.";if("content"===n)if(t.startsWith("$"))e="".concat(r).concat(t.replace("$",""));else{var o=t.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");e="'".concat(H(o,r),"'")}else if("color"===n||!1!==/[^0-9%\s.eE]/.test(t)||isNaN(parseFloat(t)))if("true"===t.toLowerCase())e=!0;else if("false"===t.toLowerCase())e=!1;else if(n.startsWith("@")&&t){var i=r.slice(0,-1);e="".concat(i,"['").concat(t.replace("$",""),"'] && ").concat(i,"['").concat(t.replace("$",""),"'].bind(").concat(i,")")}else if(t.startsWith("$"))e="".concat(r).concat(t.replace("$",""));else{if(/\$\w+/gi.exec(t)){var a=t.match(/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g);if(e={},a)for(var s=0;s<a.length;s++){var l=a[s].split(/\s*:\s*/);l&&G(l[0],l[1],r,e)}return q(e)}e='"'.concat(t,'"')}else if(e=parseFloat(t),t.endsWith("%")){var u={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[n];u&&(e="parent.node.".concat(u," * (").concat(e," / 100)"))}return e},V=function(e){return e.startsWith(":")},H=function(e,t){var n=h(e.matchAll(/\{\{\s*(\$\S+)\s*\}\}/g));if(n.length){var r,o=w(n);try{for(o.s();!(r=o.n()).done;){var i=y(r.value,2),a=i[0],s=i[1];e=e.replace(a,"".concat(s.replace("$","'+".concat(t)),"+'"))}}catch(l){o.e(l)}finally{o.f()}}return e},G=function(e,t,n,r){t.startsWith("$")?r[e]="".concat(n).concat(t.replace("$","")):r[e]=t},q=function(e){var t=[];return Object.keys(e).forEach(function(n){t.push("".concat(n,": ").concat(e[n]))})," { ".concat(t.join(", ")," }")},W={},K=0,X={},$=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];X[t]&&X[t][e]&&X[t][e].apply(n,r)},Y=null,J=null,Q=!1,Z=new WeakMap,ee=new Map,te=function(e){if(0!==ee.size){var t,n=w(ee);try{for(n.s();!(t=n.n()).done;){var r=y(t.value,2),o=r[0],i=r[1];if(-1!==e.indexOf(o)){var a=Z.get(i);if(void 0!==a){var s,l=w(a.values());try{for(l.s();!(s=l.n()).done;){s.value.delete(o),ee.delete(o)}}catch(u){l.e(u)}finally{l.f()}}}}}catch(u){n.e(u)}finally{n.f()}}},ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==Y){if(Q)return;if(!0===Array.isArray(J)){if(!1===J.includes(t))return}else if(null!==J&&t!==J)return;var r=Z.get(e);void 0===r&&(r=new Map,Z.set(e,r));var o=r.get(t);void 0===o&&(o=new Set,r.set(t,o)),o.add(Y),!0===n&&ee.set(Y,e)}},re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!0!==Q){var r=Z.get(e);if(void 0!==r){var o=r.get(t);if(void 0!==o){var i,a=w(o);try{for(a.s();!(i=a.n()).done;){(0,i.value)(n)}}catch(s){a.e(s)}finally{a.f()}}}}},oe=function(e){J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(Y=e)(),Y=null,J=null},ie=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=e.length;n--;){var r=e[n],o=t[n];if(Array.isArray(r)&&Array.isArray(o)){if(!1===ie(r,o))return!1}else if("object"===x(r)&&null!==r&&"object"===x(o)&&null!==o){if(!1===ie(Object.entries(r),Object.entries(o)))return!1}else if(r!==o)return!1}return!0},ae=["push","pop","shift","unshift","splice","sort"],se=new WeakMap,le=function(e){var t=e&&e[b.raw];return t?le(t):e},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("object"===x(e)&&!1===Array.isArray(e)&&Object.getPrototypeOf(e)!==Object.prototype)return e;var o=se.get(e);if(void 0!==o)return o;var i={get:function(o,i,a){return i===b.isProxy||(i===b.raw?e:!0===Array.isArray(o)?"object"===x(o[i])&&null!==o[i]?(!0===Array.isArray(o[i])&&ne(o,i,r),ue(le(o[i]),o,i)):-1!==ae.indexOf(i)?function(){Q=!0;for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var s=o[i].apply(this,r);return Q=!1,re(t,n),s}:"length"===i?e.length:Reflect.get(o,i,a):"object"===x(o[i])&&null!==o[i]?(!0===Array.isArray(o[i])&&ne(o,i,r),ue(le(o[i]),o,i)):(ne(o,i,r),Reflect.get(o,i,a)))},set:function(e,r,o,i){var a=le(e[r]),s=le(o),l=!0,u=!1;return!0===Array.isArray(s)&&!0===Array.isArray(a)?u=ie(a,s):a===s&&(u=!0),!1===u&&("object"===x(o)&&(!0===Array.isArray(o)?o=le(o).slice(0):null!==o&&null!==e[r]&&void 0!==e[r]&&!1===Array.isArray(e)&&Object.getPrototypeOf(o)===Object.prototype&&(o=Object.assign(i[r],o))),l=Reflect.set(e,r,o,i)),!0===l&&!1===u&&(!0===Array.isArray(e)&&r in e==!0&&re(t,n,!0),re(e,r,!0)),l}},a=new Proxy(e,i);return se.set(e,a),a},ce=function(e,t){return Object.keys(e).forEach(function(n){var r=e[n];if(null!==e[n]&&"object"===x(e[n])){if(Object.getPrototypeOf(e[n])===Object.prototype)return ce(e[n]);if(!0===Array.isArray(e[n]))for(var o=function(t){e[n][ae[t]]=function(r){Array.prototype[ae[t]].call(this,r),re(e,n)}},i=0;i<ae.length;i++)o(i)}Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){return ne(e,n,t),r},set:function(t){r!==t&&(r=t,re(e,n))}})}),e},fe="undefined"!=typeof Proxy,de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Proxy",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!1===fe&&(t="defineProperty"),"defineProperty"===t?ce(e,n):ue(e,void 0,void 0,n)},pe=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],he={previous:null,current:null,get state(){return this.current},set state(e){if(pe.indexOf(e)>-1&&e!==this.current||"refocus"===e){if(c.debug("Setting lifecycle state from ".concat(this.current," to ").concat(e," for ").concat(this.component.componentId)),this.previous=this.current,this.current=e,"refocus"===e)return;t=e,n=this.component[b.identifier],r=this.component,o=b[t],X[n]&&X[n][o]&&X[n][o].apply(r),$(e,this.component[b.identifier],this.component),"focus"===e&&(this.component[b.state].hasFocus=!0),"unfocus"===e&&(this.component[b.state].hasFocus=!1)}var t,n,r,o}},me=function(e,t,n){var r=Promise.resolve();function o(e){var t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(function(t){var n,r=w(t||[]);try{for(r.s();!(n=r.n()).done;){var i=n.value;"rejected"===i.status&&o(i.reason)}}catch(a){r.e(a)}finally{r.f()}return e().catch(o)})},ge={BASE_URL:"/legacy/chrome-38/",DEV:!1,LEGACY:!0,MODE:"production",PROD:!0,SSR:!1,VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",VITE_TMDB_KEY:"ABC123"};function ye(e,t){if(!0!==Te()&&!e)throw new Error(t||"Assertion failed")}function ve(e,t,n){var r=Math.trunc(e>>>24),o=Math.trunc(e>>>16&255),i=Math.trunc(e>>>8&255),a=Math.trunc(255&e),s=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),u=Math.trunc(t>>>8&255),c=Math.trunc(255&t);return(Math.round(s*n+r*(1-n))<<24|Math.round(l*n+o*(1-n))<<16|Math.round(u*n+i*(1-n))<<8|Math.round(c*n+a*(1-n)))>>>0}function be(e,t){return(e>>>24<<24|(e>>>16&255)<<16|(e>>>8&255)<<8|Math.trunc((255&e)*t))>>>0}var xe=!0;function we(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(255&e)/255*t,o=xe?r:1,i=Math.trunc((e>>>24)*o),a=Math.trunc((e>>>16&255)*o),s=Math.trunc((e>>>8&255)*o),l=Math.trunc(255*r);return n?(l<<24|s<<16|a<<8|i)>>>0:(i<<24|a<<16|s<<8|l)>>>0}function Se(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Te(){return ge&&!0}var ke=1;var Ce,Ae=function(){return p(function e(){f(this,e),v(this,"eventListeners",{})},[{key:"on",value:function(e,t){var n=this.eventListeners[e];n||(n=[]),n.push(t),this.eventListeners[e]=n}},{key:"off",value:function(e,t){var n=this.eventListeners[e];if(n)if(t){var r=n.indexOf(t);r>=0&&n.splice(r,1)}else delete this.eventListeners[e]}},{key:"once",value:function(e,t){var n=this,r=function(o,i){n.off(e,r),t(o,i)};this.on(e,r)}},{key:"emit",value:function(e,t){var n=this,r=this.eventListeners[e];r&&h(r).forEach(function(e){e(n,t)})}},{key:"removeAllListeners",value:function(){this.eventListeners={}}}])}();!function(e){e[e.generic=0]="generic",e[e.color=1]="color",e[e.image=2]="image",e[e.noise=3]="noise",e[e.renderToTexture=4]="renderToTexture",e[e.subTexture=5]="subTexture"}(Ce||(Ce={}));var Ee=function(e){function t(e){var n;return f(this,t),v(n=a(this,t),"txManager",void 0),v(n,"_dimensions",null),v(n,"_error",null),v(n,"state","initial"),v(n,"renderableOwners",new Set),v(n,"renderable",!1),v(n,"type",Ce.generic),v(n,"preventCleanup",!1),v(n,"ctxTexture",void 0),v(n,"textureData",null),n.txManager=e,n}return u(t,e),p(t,[{key:"dimensions",get:function(){return this._dimensions}},{key:"error",get:function(){return this._error}},{key:"setRenderableOwner",value:function(e,t){var n=this.renderableOwners.size;if(!0===t){!1===this.renderableOwners.has(e)&&this.renderableOwners.add(e);var r,o=this.renderableOwners.size;if(o>n&&1===o)this.renderable=!0,null===(r=this.onChangeIsRenderable)||void 0===r||r.call(this,!0),this.load()}else{this.renderableOwners.delete(e);var i,a=this.renderableOwners.size;if(a<n&&0===a)this.renderable=!1,null===(i=this.onChangeIsRenderable)||void 0===i||i.call(this,!1),this.txManager.orphanTexture(this)}}},{key:"load",value:function(){this.txManager.loadTexture(this)}},{key:"loadCtxTexture",value:function(){return void 0===this.ctxTexture&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}},{key:"free",value:function(){var e;null===(e=this.ctxTexture)||void 0===e||e.free()}},{key:"destroy",value:function(){"loaded"===this.state&&this.free(),this.freeTextureData()}},{key:"freeTextureData",value:function(){this.textureData=null}},{key:"setState",value:function(e,t){if(this.state!==e){var n=null;"loaded"===e?(void 0!==t&&"width"in t==!0&&"height"in t==!0&&void 0!==t.width&&void 0!==t.height&&(this._dimensions=t),n=this._dimensions):"failed"===e&&(this._error=t,n=this._error),this.state=e,this.emit(e,n)}}},{key:"getTextureData",value:(r=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:if(null!==this.textureData){e.n=2;break}return e.n=1,this.getTextureSource();case 1:this.textureData=e.v;case 2:return e.a(2,this.textureData)}},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{}}}]);var r}(Ae);v(Ee,"TRANSITIONAL_TEXTURE_STATES",["fetching","fetched","loading"]);var Ie=/^(data|ftps?|https?):/,Me=function(e){return[(e>>>24)/255,(e>>>16&255)/255,(e>>>8&255)/255,(255&e)/255]},Re=function(e){return[e>>>24,e>>>16&255,e>>>8&255,255&e]};function _e(e){return(255&e)/255}function Le(e){var t=Math.floor(255*e[0]),n=Math.floor(255*e[1]),r=Math.floor(255*e[2]),o=Math.floor(255*e[3]);return"rgba(".concat(t,",").concat(n,",").concat(r,",").concat(o.toFixed(4),")")}function Pe(e,t,n,r,o){return o?(o.x1=e,o.y1=t,o.x2=n,o.y2=r,o):{x1:e,y1:t,x2:n,y2:r}}function De(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}function Oe(e,t,n){var r=Math.max(e.x,t.x),o=Math.max(e.y,t.y),i=Math.min(e.x+e.width,t.x+t.width)-r,a=Math.min(e.y+e.height,t.y+t.height)-o;return i>0&&a>0?n?(n.x=r,n.y=o,n.width=i,n.height=a,n):{x:r,y:o,width:i,height:a}:n?(n.x=0,n.y=0,n.width=0,n.height=0,n):{x:0,y:0,width:0,height:0}}function Ne(e,t){return t?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):{x:e.x,y:e.y,width:e.width,height:e.height}}function Ue(e,t){return e.x1<=t.x2&&e.y1<=t.y2&&e.x2>=t.x1&&e.y2>=t.y1}function Be(e,t,n){return!(e<n.x1||e>n.x2||t<n.y1||t>n.y2)}function je(e,t){return Pe(e.x1-t[3],e.y1-t[0],e.x2+t[1],e.y2+t[2])}function Fe(e){return!0===e.startsWith("data:")}function ze(e){for(var t,n=(null===(t=(e=e.replace(/^data:/,"")).match(/image\/[^;]+/))||void 0===t?void 0:t[0])||"",r=e.replace(/^[^,]+,/,""),o=1024,i=atob(r),a=i.length,s=Math.ceil(a/o),l=new Array(s),u=0;u<s;++u){for(var c=u*o,f=Math.min(c+o,a),d=new Array(f-c),p=c,h=0;p<f;++h,++p){var m;d[h]=null===(m=i[p])||void 0===m?void 0:m.charCodeAt(0)}l[u]=new Uint8Array(d)}return new Blob(l,{type:n})}var Ve=function(){function e(){f(this,e),v(this,"ta",void 0),v(this,"tb",void 0),v(this,"tx",void 0),v(this,"tc",void 0),v(this,"td",void 0),v(this,"ty",void 0),v(this,"_floatArr",null),v(this,"mutation",void 0),this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}return p(e,[{key:"translate",value:function(e,t){return this.tx=this.ta*e+this.tb*t+this.tx,this.ty=this.tc*e+this.td*t+this.ty,this.mutation=!0,this}},{key:"scale",value:function(e,t){return this.ta=this.ta*e,this.tb=this.tb*t,this.tc=this.tc*e,this.td=this.td*t,this.mutation=!0,this}},{key:"rotate",value:function(e){if(0===e||!(e%Math.PI*2))return this;var t=Math.cos(e),n=Math.sin(e),r=this.ta*t+this.tb*n,o=this.tb*t-this.ta*n,i=this.tc*t+this.td*n,a=this.td*t-this.tc*n;return this.ta=r,this.tb=o,this.tc=i,this.td=a,this.mutation=!0,this}},{key:"multiply",value:function(t){return e.multiply(this,t,this)}},{key:"getFloatArr",value:function(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}],[{key:"temp",get:function(){return He}},{key:"multiply",value:function(t,n,r){var o=t.ta*n.ta+t.tb*n.tc,i=t.ta*n.tb+t.tb*n.td,a=t.ta*n.tx+t.tb*n.ty+t.tx,s=t.tc*n.ta+t.td*n.tc,l=t.tc*n.tb+t.td*n.td,u=t.tc*n.tx+t.td*n.ty+t.ty;return r||(r=new e),r.ta=o,r.tb=i,r.tx=a,r.tc=s,r.td=l,r.ty=u,r.mutation=!0,r}},{key:"identity",value:function(t){return t||(t=new e),t.ta=1,t.tb=0,t.tx=0,t.tc=0,t.td=1,t.ty=0,t.mutation=!0,t}},{key:"translate",value:function(t,n,r){return r||(r=new e),r.ta=1,r.tb=0,r.tx=t,r.tc=0,r.td=1,r.ty=n,r.mutation=!0,r}},{key:"scale",value:function(t,n,r){return r||(r=new e),r.ta=t,r.tb=0,r.tx=0,r.tc=0,r.td=n,r.ty=0,r.mutation=!0,r}},{key:"rotate",value:function(t,n){var r=Math.cos(t),o=Math.sin(t);return n||(n=new e),n.ta=r,n.tb=-o,n.tx=0,n.tc=o,n.td=r,n.ty=0,n.mutation=!0,n}},{key:"copy",value:function(t,n){return n||(n=new e),n.ta=t.ta,n.tc=t.tc,n.tb=t.tb,n.td=t.td,n.tx=t.tx,n.ty=t.ty,n.mutation=!0,n}}])}(),He=new Ve,Ge=function(){function e(t){f(this,e),v(this,"data",void 0),this.data=new Float32Array(8),t&&(this.data[0]=t[0],this.data[2]=t[2],this.data[4]=t[4],this.data[6]=t[6],this.data[1]=t[1],this.data[3]=t[3],this.data[5]=t[5],this.data[7]=t[7])}return p(e,[{key:"x1",get:function(){return this.data[0]}},{key:"x2",get:function(){return this.data[2]}},{key:"x3",get:function(){return this.data[4]}},{key:"x4",get:function(){return this.data[6]}},{key:"y1",get:function(){return this.data[1]}},{key:"y2",get:function(){return this.data[3]}},{key:"y3",get:function(){return this.data[5]}},{key:"y4",get:function(){return this.data[7]}}],[{key:"translate",value:function(t,n,r,o,i,a,s,l,u){return u||(u=new e),u.data[0]=t,u.data[2]=r,u.data[4]=i,u.data[6]=s,u.data[1]=n,u.data[3]=o,u.data[5]=a,u.data[7]=l,u}}])}(),qe=function(e,t,n,r){var o=3*e,i=3*(n-e)-o,a=1-o-i,s=3*t,l=3*(r-t)-s,u=1-s-l;return function(e){if(e>=1)return 1;if(e<=0)return 0;for(var t,n,r=.5,c=0;c<20;c++){if((n=e-r*(r*(r*a+i)+o))>-1e-8&&n<1e-8)return r*(r*(r*u+l)+s);if((t=r*(r*(3*a)+2*i)+o)>1e-10&&t<1e-10)break;r+=n/t}for(var f=0,d=1,p=0;p<20;p++){if((n=e-(r=.5*(f+d))*(r*(r*a+i)+o))>-1e-8&&n<1e-8)return r*(r*(r*u+l)+s);n<0?d=r:f=r}}},We={},Ke={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},Xe=function(e){return e},$e=function(e){if("linear"===e)return Xe;if(void 0!==We[e])return We[e]||Xe;if("step-start"===e)return function(){return 1};if("step-end"===e)return function(e){return 1===e?1:0};var t=Ke[e];if(void 0!==t){var n=y(t,4),r=n[0],o=n[1],i=n[2],a=n[3],s=qe(r,o,i,a);return We[e]=s,s}return e.startsWith("cubic-bezier")?function(e){var t=e.match(/-?\d*\.?\d+/g);if(t){var n=y(t,4),r=n[0],o=n[1],i=n[2],a=n[3],s=parseFloat(r||"0.42"),l=parseFloat(o||"0"),u=parseFloat(i||"1"),c=parseFloat(a||"1"),f=qe(s,l,u,c);return We[e]=f,f}return console.warn("Unknown cubic-bezier timing: "+e),Xe}(e):(console.warn("Unknown timing function: "+e),Xe)};function Ye(e){return(e/1024/1024).toFixed(2)}var Je,Qe=function(e){function t(e,n,r){var o,i,s,l,u,c,d;for(var p in f(this,t),v(d=a(this,t),"node",void 0),v(d,"props",void 0),v(d,"settings",void 0),v(d,"progress",0),v(d,"delayFor",0),v(d,"delay",0),v(d,"timingFunction",void 0),v(d,"propValuesMap",{}),v(d,"dynPropValuesMap",void 0),d.node=e,d.props=n,n)if("shaderProps"!==p)void 0===d.propValuesMap.props&&(d.propValuesMap.props={}),d.propValuesMap.props[p]={start:e[p]||0,target:n[p]};else if("DynamicShader"!==e.shader.type)for(var h in d.propValuesMap.shaderProps={},n.shaderProps)d.propValuesMap.shaderProps[h]={start:e.shader.props[h],target:n.shaderProps[h]};else{var m=Object.keys(n.shaderProps),g=m.length;d.dynPropValuesMap={};for(var b=0;b<g;b++){var x=m[b],w=n.shaderProps[x];d.dynPropValuesMap[x]={};for(var S=Object.entries(w),T=S.length,k=0;k<T;k++){var C=y(S[k],2),A=C[0],E=C[1];d.dynPropValuesMap[x][A]={start:e.shader.props[x][A],target:E}}}}var I=r.easing||"linear",M=null!==(o=r.delay)&&void 0!==o?o:0;return d.settings={duration:null!==(i=r.duration)&&void 0!==i?i:0,delay:M,easing:I,loop:null!==(s=r.loop)&&void 0!==s&&s,repeat:null!==(l=r.repeat)&&void 0!==l?l:0,repeatDelay:null!==(u=r.repeatDelay)&&void 0!==u?u:0,stopMethod:null!==(c=r.stopMethod)&&void 0!==c&&c},d.timingFunction=$e(I),d.delayFor=M,d.delay=M,d}return u(t,e),p(t,[{key:"reset",value:function(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}},{key:"restoreValues",value:function(e,t){for(var n=Object.entries(t),r=n.length,o=0;o<r;o++){var i=y(n[o],2),a=i[0],s=i[1];e[a]=s.start}}},{key:"restore",value:function(){if(this.reset(),void 0!==this.propValuesMap.props&&this.restoreValues(this.node,this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){var e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(var n=0;n<t;n++){var r=e[n];this.restoreValues(this.node.shader.props[r],this.dynPropValuesMap[r])}}}},{key:"reverseValues",value:function(e){for(var t=Object.entries(e),n=t.length,r=0;r<n;r++){var o=y(t[r],2),i=o[0],a=o[1];e[i]={start:a.target,target:a.start}}}},{key:"reverse",value:function(){if(this.progress=0,void 0!==this.propValuesMap.props&&this.reverseValues(this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.reverseValues(this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){var e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(var n=0;n<t;n++){var r=e[n];this.reverseValues(this.dynPropValuesMap[r])}}this.settings.loop||(this.settings.stopMethod=!1)}},{key:"applyEasing",value:function(e,t,n){return(this.timingFunction(e)||e)*(n-t)+t}},{key:"updateValue",value:function(e,t,n,r){if(1===this.progress)return t;if(0===this.progress)return n;var o=t;return-1!==e.indexOf("color")?n===o?n:ve(n,o,r&&this.timingFunction(this.progress)||this.progress):r?this.applyEasing(this.progress,n,o):n+(o-n)*this.progress}},{key:"updateValues",value:function(e,t,n){for(var r=Object.entries(t),o=r.length,i=0;i<o;i++){var a=y(r[i],2),s=a[0],l=a[1];e[s]=this.updateValue(s,l.target,l.start,n)}}},{key:"update",value:function(e){var t=this.settings,n=t.duration,r=t.loop,o=t.easing,i=t.stopMethod,a=this.delayFor;if(this.node.destroyed)this.emit("destroyed",{});else if(0!==n||0!==a){if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(0!==n)if(0===this.progress&&this.emit("animating",{}),this.progress+=e/n,this.progress>1&&(this.progress=r?0:1,this.delayFor=this.delay,i))this.emit("finished",{});else{if(void 0!==this.propValuesMap.props&&this.updateValues(this.node,this.propValuesMap.props,o),void 0!==this.propValuesMap.shaderProps&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,o),void 0!==this.dynPropValuesMap){var s=Object.keys(this.dynPropValuesMap),l=s.length;if(l>0)for(var u=0;u<l;u++){var c=s[u];this.updateValues(this.node.shader.props[c],this.dynPropValuesMap[c],o)}}this.progress<1&&this.emit("tick",{progress:this.progress}),1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}else this.emit("finished",{})}}])}(Ae),Ze=function(e){function t(e,n){var r;return f(this,t),v(r=a(this,t),"manager",void 0),v(r,"animation",void 0),v(r,"stoppedPromise",void 0),v(r,"stoppedResolve",null),v(r,"state",void 0),r.manager=e,r.animation=n,r.state="stopped",r.stoppedPromise=Promise.resolve(),r.onAnimating=r.onAnimating.bind(r),r.onFinished=r.onFinished.bind(r),r.onTick=r.onTick.bind(r),r.onDestroy=r.onDestroy.bind(r),r}return u(t,e),p(t,[{key:"start",value:function(){return"running"!==this.state&&"scheduled"!==this.state&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}},{key:"stop",value:function(){return this.unregisterAnimation(),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}},{key:"pause",value:function(){return this.unregisterAnimation(),this.state="paused",this}},{key:"restore",value:function(){return this.stoppedResolve=null,this.animation.restore(),this}},{key:"waitUntilStopped",value:function(){return this.stoppedPromise}},{key:"registerAnimation",value:function(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.animation.on("destroyed",this.onDestroy),this.manager.registerAnimation(this.animation)}},{key:"unregisterAnimation",value:function(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick),this.animation.off("destroy",this.onDestroy)}},{key:"makeStoppedPromise",value:function(){var e=this;null===this.stoppedResolve&&(this.stoppedPromise=new Promise(function(t){e.stoppedResolve=t}))}},{key:"onDestroy",value:function(){this.unregisterAnimation(),this.state="stopped"}},{key:"onFinished",value:function(){var e=this.animation.settings,t=e.loop;if("reverse"===e.stopMethod)return this.animation.once("finished",this.onFinished),void this.animation.reverse();t||(this.unregisterAnimation(),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null),this.emit("stopped",this),this.state="stopped")}},{key:"onAnimating",value:function(){this.state="running",this.emit("animating",this)}},{key:"onTick",value:function(e,t){this.emit("tick",t)}}])}(Ae);!function(e){e[e.Init=0]="Init",e[e.OutOfBounds=2]="OutOfBounds",e[e.InBounds=4]="InBounds",e[e.InViewport=8]="InViewport"}(Je||(Je={}));var et,tt=new Map;tt.set(Je.Init,"init"),tt.set(Je.OutOfBounds,"outOfBounds"),tt.set(Je.InBounds,"inBounds"),tt.set(Je.InViewport,"inViewport"),function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.RenderState=512]="RenderState",e[e.IsRenderable=1024]="IsRenderable",e[e.RenderTexture=2048]="RenderTexture",e[e.ParentRenderTexture=4096]="ParentRenderTexture",e[e.RenderBounds=8192]="RenderBounds",e[e.None=0]="None",e[e.All=14335]="All"}(et||(et={}));var nt=function(e){function t(e,n){var r;return f(this,t),v(r=a(this,t),"stage",void 0),v(r,"children",[]),v(r,"_id",ke++),v(r,"props",void 0),v(r,"updateType",et.All),v(r,"childUpdateType",et.None),v(r,"globalTransform",void 0),v(r,"scaleRotateTransform",void 0),v(r,"localTransform",void 0),v(r,"sceneGlobalTransform",void 0),v(r,"renderCoords",void 0),v(r,"sceneRenderCoords",void 0),v(r,"renderBound",void 0),v(r,"strictBound",void 0),v(r,"preloadBound",void 0),v(r,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),v(r,"isRenderable",!1),v(r,"renderState",Je.Init),v(r,"worldAlpha",1),v(r,"premultipliedColorTl",0),v(r,"premultipliedColorTr",0),v(r,"premultipliedColorBl",0),v(r,"premultipliedColorBr",0),v(r,"calcZIndex",0),v(r,"hasRTTupdates",!1),v(r,"parentHasRenderTexture",!1),v(r,"rttParent",null),v(r,"destroyed",!1),v(r,"onTextureLoaded",function(e,t){var n;r.autosizeNode(t),r.setUpdateType(et.IsRenderable),r.stage.requestRender(),r.parentHasRenderTexture&&r.notifyParentRTTOfUpdate(),t.width>1&&t.height>1&&r.emit("loaded",{type:"texture",dimensions:t}),"contain"===(null===(n=r.props.textureOptions)||void 0===n||null===(n=n.resizeMode)||void 0===n?void 0:n.type)&&r.setUpdateType(et.Local)}),v(r,"onTextureFailed",function(e,t){r.isRenderable=!1,r.setUpdateType(et.IsRenderable),r.parentHasRenderTexture&&r.notifyParentRTTOfUpdate(),r.emit("failed",{type:"texture",error:t})}),v(r,"onTextureFreed",function(){r.isRenderable=!1,r.setUpdateType(et.IsRenderable),r.parentHasRenderTexture&&r.notifyParentRTTOfUpdate(),r.emit("freed",{type:"texture"})}),r.stage=e,r.props=g(g({},n),{},{parent:null,texture:null,src:null,rtt:!1}),r.parent=n.parent,r.texture=n.texture,r.src=n.src,r.rtt=n.rtt,r.interactive=n.interactive,n.boundsMargin&&(r.boundsMargin=Array.isArray(n.boundsMargin)?n.boundsMargin:[n.boundsMargin,n.boundsMargin,n.boundsMargin,n.boundsMargin]),r.setUpdateType(et.ScaleRotate|et.Local|et.RenderBounds|et.RenderState),!1===Te()&&!0===n.preventCleanup&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),r.stage.defaultTexture&&"loaded"!==r.stage.defaultTexture.state&&r.stage.defaultTexture.once("loaded",function(){r.setUpdateType(et.IsRenderable)}),r}return u(t,e),p(t,[{key:"loadTexture",value:function(){var e=this,t=this.props.texture;ye(t),queueMicrotask(function(){var n,r;!0===e.textureOptions.preload&&e.stage.txManager.loadTexture(t),t.preventCleanup=null!==(n=null===(r=e.props.textureOptions)||void 0===r?void 0:r.preventCleanup)&&void 0!==n&&n,t.on("loaded",e.onTextureLoaded),t.on("failed",e.onTextureFailed),t.on("freed",e.onTextureFreed),e.parentHasRenderTexture?e.notifyParentRTTOfUpdate():"loaded"===t.state?(ye(t.dimensions),e.onTextureLoaded(t,t.dimensions)):"failed"===t.state?(ye(t.error),e.onTextureFailed(t,t.error)):"freed"===t.state&&e.onTextureFreed(t)})}},{key:"unloadTexture",value:function(){null!==this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}},{key:"autosizeNode",value:function(e){this.autosize&&(this.width=e.width,this.height=e.height)}},{key:"setUpdateType",value:function(e){this.updateType|=e;var t=this.props.parent;t&&0===(t.updateType&et.Children)&&t.setUpdateType(et.Children)}},{key:"sortChildren",value:function(){this.children.sort(function(e,t){return e.calcZIndex-t.calcZIndex})}},{key:"updateScaleRotateTransform",value:function(){var e=this.props,t=e.rotation,n=e.scaleX,r=e.scaleY;this.scaleRotateTransform=0!==t||1!==n||1!==r?Ve.rotate(t,this.scaleRotateTransform).scale(n,r):void 0}},{key:"updateLocalTransform",value:function(){var e,t=this.props,n=t.x,r=t.y,o=t.width,i=t.height,a=this.props.mountX*o,s=this.props.mountY*i;if(this.scaleRotateTransform){var l=this.props.pivotX*o,u=this.props.pivotY*i;this.localTransform=Ve.translate(n-a+l,r-s+u,this.localTransform).multiply(this.scaleRotateTransform).translate(-l,-u)}else this.localTransform=Ve.translate(n-a,r-s,this.localTransform);var c=this.props.texture;if(c&&c.dimensions&&"contain"===(null===(e=this.props.textureOptions)||void 0===e||null===(e=e.resizeMode)||void 0===e?void 0:e.type)){var f=1,d=1,p=0,h=0,m=c.dimensions,g=m.width,y=m.height;if(g/y>o/i){var v=y*(o/g);h=(i-v)/2,d=v/i}else{var b=g*(i/y);p=(o-b)/2,f=b/o}this.localTransform.translate(p,h).scale(f,d)}this.setUpdateType(et.Global)}},{key:"update",value:function(e,t){this.updateType&et.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(et.Local)),this.updateType&et.Local&&(this.updateLocalTransform(),this.setUpdateType(et.Global));var n=this.props.parent,r=null;if(this.updateType&et.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&et.Global&&(ye(this.localTransform),!0===this.parentHasRenderTexture&&!0===(null==n?void 0:n.rtt)?(this.globalTransform=Ve.identity(),this.sceneGlobalTransform=Ve.copy((null==n?void 0:n.globalTransform)||Ve.identity()).multiply(this.localTransform)):!0===this.parentHasRenderTexture&&!1===(null==n?void 0:n.rtt)?(this.sceneGlobalTransform=Ve.copy((null==n?void 0:n.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=Ve.copy((null==n?void 0:n.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=Ve.copy((null==n?void 0:n.globalTransform)||this.localTransform,this.globalTransform),null!==n&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(et.RenderState|et.Children),this.childUpdateType|=et.Global,!0===this.clipping&&(this.setUpdateType(et.Clipping|et.RenderBounds),this.childUpdateType|=et.RenderBounds)),this.updateType&et.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(et.RenderState),this.setUpdateType(et.Children),this.childUpdateType|=et.RenderBounds),this.updateType&et.RenderState&&(r=this.checkRenderBounds(),this.setUpdateType(et.IsRenderable),r!==Je.OutOfBounds&&this.updateRenderState(r)),this.updateType&et.WorldAlpha&&(this.worldAlpha=n?n.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(et.Children|et.PremultipliedColors|et.IsRenderable),this.childUpdateType|=et.WorldAlpha),this.updateType&et.IsRenderable&&this.updateIsRenderable(),this.updateType&et.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(et.Children),this.childUpdateType|=et.Clipping,this.childUpdateType|=et.RenderBounds),this.updateType&et.PremultipliedColors&&(this.premultipliedColorTl=we(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=we(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=we(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=we(this.props.colorBr,this.worldAlpha,!0))),null!==n&&this.updateType&et.CalculatedZIndex&&(this.calculateZIndex(),n.setUpdateType(et.ZIndexSortedChildren)),!0!==this.props.strictBounds||this.renderState!==Je.OutOfBounds){if(this.updateType&et.Children&&this.children.length>0)for(var o=0,i=this.children.length;o<i;o++){var a=this.children[o];if(a.setUpdateType(this.childUpdateType),0!==a.updateType){var s=this.clippingRect;!0===this.rtt&&(s={x:0,y:0,width:0,height:0,valid:!1}),a.update(e,s)}}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&et.ZIndexSortedChildren&&this.sortChildren(),r===Je.OutOfBounds&&(this.updateRenderState(r),this.updateIsRenderable(),!0===this.rtt&&r===Je.OutOfBounds&&this.notifyChildrenRTTOfUpdate(r)),this.updateType=0,this.childUpdateType=0}else this.updateType&=~et.RenderBounds}},{key:"findParentRTTNode",value:function(){for(var e=this.parent;e&&!e.rtt;)e=e.parent;return e}},{key:"getRTTParentRenderState",value:function(){var e=this.rttParent||this.findParentRTTNode();return e?e.renderState:null}},{key:"notifyChildrenRTTOfUpdate",value:function(e){var t,n=w(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.updateRenderState(e),r.updateIsRenderable(),r.notifyChildrenRTTOfUpdate(e)}}catch(o){n.e(o)}finally{n.f()}}},{key:"notifyParentRTTOfUpdate",value:function(){if(null!==this.parent){var e=this.rttParent||this.findParentRTTNode();e&&(e.hasRTTupdates=!0,e.setUpdateType(et.RenderTexture),!0===e.parentHasRenderTexture&&e.notifyParentRTTOfUpdate())}}},{key:"checkRenderBounds",value:function(){return ye(this.renderBound),ye(this.strictBound),ye(this.preloadBound),Ue(this.renderBound,this.strictBound)?Je.InViewport:Ue(this.renderBound,this.preloadBound)?Je.InBounds:(e=this.renderBound,t=this.strictBound,e.x1<t.x1&&e.x2>t.x2&&e.y1<t.y1&&e.y2>t.y2?Je.InViewport:null===this.parent||0!==this.props.width&&0!==this.props.height?Je.OutOfBounds:this.parent.renderState);var e,t}},{key:"updateBoundingRect",value:function(){var e=this.sceneGlobalTransform||this.globalTransform,t=this.sceneRenderCoords||this.renderCoords;ye(e),ye(t);var n=e.tb,r=e.tc,o=t.x1,i=t.y1,a=t.x3,s=t.y3;if(0===n||0===r)this.renderBound=Pe(o,i,a,s,this.renderBound);else{var l=t.x2,u=t.x4,c=t.y2,f=t.y4;this.renderBound=Pe(Math.min(o,l,a,u),Math.min(i,c,s,f),Math.max(o,l,a,u),Math.max(i,c,s,f),this.renderBound)}}},{key:"createRenderBounds",value:function(){if(ye(this.stage),null!==this.parent&&void 0!==this.parent.strictBound){var e=this.parent.strictBound;this.strictBound=Pe(e.x1,e.y1,e.x2,e.y2),this.preloadBound=je(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(!1!==this.props.clipping&&void 0!==this.renderBound&&!1!==Ue(this.renderBound,this.strictBound)){var t=this.props,n=t.x,r=t.y,o=t.width,i=t.height,a=this.sceneGlobalTransform||this.globalTransform||{},s=a.tx,l=a.ty,u=null!=s?s:n,c=null!=l?l:r;this.strictBound=Pe(u,c,u+o,c+i,this.strictBound),this.preloadBound=je(this.strictBound,this.boundsMargin)}}},{key:"updateRenderState",value:function(e){if(e!==this.renderState){var t=this.renderState;this.renderState=e;var n=tt.get(e);ye(n),this.emit(n,{previous:t,current:e})}}},{key:"updateIsRenderable",value:function(){var e=!1,t=!1;if(!1===this.checkBasicRenderability())return this.updateTextureOwnership(!1),void this.setRenderable(!1);null!==this.texture?(t=!0,e="loaded"===this.texture.state):!this.hasShader()&&!0!==this.hasColorProperties()||!0!==this.hasDimensions()||this.stage.defaultTexture&&"loaded"===this.stage.defaultTexture.state&&(e=!0),this.updateTextureOwnership(t),this.setRenderable(e)}},{key:"checkBasicRenderability",value:function(){return 0!==this.worldAlpha&&!0!==this.isOutOfBounds()}},{key:"setRenderable",value:function(e){this.isRenderable=e}},{key:"updateTextureOwnership",value:function(e){var t;null===(t=this.texture)||void 0===t||t.setRenderableOwner(this,e)}},{key:"isOutOfBounds",value:function(){return this.renderState<=Je.OutOfBounds}},{key:"hasDimensions",value:function(){return 0!==this.props.width&&0!==this.props.height}},{key:"hasColorProperties",value:function(){return 0!==this.props.color||0!==this.props.colorTop||0!==this.props.colorBottom||0!==this.props.colorLeft||0!==this.props.colorRight||0!==this.props.colorTl||0!==this.props.colorTr||0!==this.props.colorBl||0!==this.props.colorBr}},{key:"hasShader",value:function(){return null!==this.props.shader}},{key:"calculateRenderCoords",value:function(){var e=this.width,t=this.height,n=this.globalTransform,r=n.tx,o=n.ty,i=n.ta,a=n.tb,s=n.tc,l=n.td;if(0===a&&0===s){var u=r,c=r+e*i,f=o,d=o+t*l;this.renderCoords=Ge.translate(u,f,c,f,c,d,u,d,this.renderCoords)}else this.renderCoords=Ge.translate(r,o,r+e*i,o+e*s,r+e*i+t*a,o+e*s+t*l,r+t*a,o+t*l,this.renderCoords);if(void 0!==this.sceneGlobalTransform){var p=this.sceneGlobalTransform,h=p.tx,m=p.ty,g=p.ta,y=p.tb,v=p.tc,b=p.td;if(0===y&&0===v){var x=h,w=h+e*g,S=m,T=m+t*b;this.sceneRenderCoords=Ge.translate(x,S,w,S,w,T,x,T,this.sceneRenderCoords)}else this.sceneRenderCoords=Ge.translate(h,m,h+e*g,m+e*v,h+e*g+t*y,m+e*v+t*b,h+t*y,m+t*b,this.sceneRenderCoords)}}},{key:"calculateClippingRect",value:function(e){ye(this.globalTransform);var t=this.clippingRect,n=this.props,r=this.globalTransform,o=n.clipping,i=0!==r.tb||0!==r.tc;!0===o&&!1===i?(t.x=r.tx,t.y=r.ty,t.width=this.width*r.ta,t.height=this.height*r.td,t.valid=!0):t.valid=!1,!0===e.valid&&!0===t.valid?Oe(e,t,t):!0===e.valid&&(Ne(e,t),t.valid=!0)}},{key:"calculateZIndex",value:function(){var e,t,n=this.props,r=n.zIndex||0,o=(null===(e=n.parent)||void 0===e?void 0:e.zIndex)||0,i=r;null!==(t=n.parent)&&void 0!==t&&t.zIndexLocked&&(i=r<o?r:o),this.calcZIndex=i}},{key:"destroy",value:function(){if(!0!==this.destroyed){for(this.destroyed=!0,this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;){var e;null===(e=this.children[0])||void 0===e||e.destroy()}this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}}},{key:"renderQuads",value:function(e){if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}ye(this.globalTransform),ye(this.renderCoords),e.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}},{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this.props.data},set:function(e){this.props.data=e}},{key:"x",get:function(){return this.props.x},set:function(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(et.Local))}},{key:"absX",get:function(){var e,t;return this.props.x+-this.props.width*this.props.mountX+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}},{key:"absY",get:function(){var e,t;return this.props.y+-this.props.height*this.props.mountY+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}},{key:"y",get:function(){return this.props.y},set:function(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(et.Local))}},{key:"width",get:function(){return this.props.width},set:function(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(et.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(et.RenderTexture)))}},{key:"height",get:function(){return this.props.height},set:function(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(et.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(et.RenderTexture)))}},{key:"scale",get:function(){return this.scaleX},set:function(e){this.scaleX=e,this.scaleY=e}},{key:"scaleX",get:function(){return this.props.scaleX},set:function(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(et.ScaleRotate))}},{key:"scaleY",get:function(){return this.props.scaleY},set:function(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(et.ScaleRotate))}},{key:"mount",get:function(){return this.props.mount},set:function(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(et.Local))}},{key:"mountX",get:function(){return this.props.mountX},set:function(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(et.Local))}},{key:"mountY",get:function(){return this.props.mountY},set:function(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(et.Local))}},{key:"pivot",get:function(){return this.props.pivot},set:function(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(et.Local))}},{key:"pivotX",get:function(){return this.props.pivotX},set:function(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(et.Local))}},{key:"pivotY",get:function(){return this.props.pivotY},set:function(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(et.Local))}},{key:"rotation",get:function(){return this.props.rotation},set:function(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(et.ScaleRotate))}},{key:"alpha",get:function(){return this.props.alpha},set:function(e){this.props.alpha=e,this.setUpdateType(et.PremultipliedColors|et.WorldAlpha|et.Children|et.IsRenderable),this.childUpdateType|=et.WorldAlpha}},{key:"autosize",get:function(){return this.props.autosize},set:function(e){this.props.autosize=e}},{key:"boundsMargin",get:function(){var e,t,n;return null!==(e=null!==(t=this.props.boundsMargin)&&void 0!==t?t:null===(n=this.parent)||void 0===n?void 0:n.boundsMargin)&&void 0!==e?e:this.stage.boundsMargin},set:function(e){if(e!==this.props.boundsMargin){if(null===e)this.props.boundsMargin=e;else{var t=Array.isArray(e)?e:[e,e,e,e];this.props.boundsMargin=t}this.setUpdateType(et.RenderBounds)}}},{key:"clipping",get:function(){return this.props.clipping},set:function(e){this.props.clipping=e,this.setUpdateType(et.Clipping|et.RenderBounds|et.Children),this.childUpdateType|=et.Global|et.Clipping}},{key:"color",get:function(){return this.props.color},set:function(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(et.PremultipliedColors)}},{key:"colorTop",get:function(){return this.props.colorTop},set:function(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(et.PremultipliedColors)}},{key:"colorBottom",get:function(){return this.props.colorBottom},set:function(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(et.PremultipliedColors)}},{key:"colorLeft",get:function(){return this.props.colorLeft},set:function(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(et.PremultipliedColors)}},{key:"colorRight",get:function(){return this.props.colorRight},set:function(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(et.PremultipliedColors)}},{key:"colorTl",get:function(){return this.props.colorTl},set:function(e){this.props.colorTl=e,this.setUpdateType(et.PremultipliedColors)}},{key:"colorTr",get:function(){return this.props.colorTr},set:function(e){this.props.colorTr=e,this.setUpdateType(et.PremultipliedColors)}},{key:"colorBl",get:function(){return this.props.colorBl},set:function(e){this.props.colorBl=e,this.setUpdateType(et.PremultipliedColors)}},{key:"colorBr",get:function(){return this.props.colorBr},set:function(e){this.props.colorBr=e,this.setUpdateType(et.PremultipliedColors)}},{key:"zIndexLocked",get:function(){return this.props.zIndexLocked||0},set:function(e){this.props.zIndexLocked=e,this.setUpdateType(et.CalculatedZIndex|et.Children);for(var t=0,n=this.children.length;t<n;t++)this.children[t].setUpdateType(et.CalculatedZIndex)}},{key:"zIndex",get:function(){return this.props.zIndex},set:function(e){this.props.zIndex=e,this.setUpdateType(et.CalculatedZIndex|et.Children);for(var t=0,n=this.children.length;t<n;t++)this.children[t].setUpdateType(et.CalculatedZIndex)}},{key:"parent",get:function(){return this.props.parent},set:function(e){var t=this.props.parent;if(t!==e){if(this.props.parent=e,t){var n=t.children.indexOf(this);ye(-1!==n,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(n,1),t.setUpdateType(et.Children|et.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(et.All),e.setUpdateType(et.Children|et.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.applyRTTInheritance(e)),this.updateScaleRotateTransform(),this.setUpdateType(et.RenderBounds|et.Children)}}},{key:"preventCleanup",get:function(){return this.props.textureOptions.preventCleanup||!1},set:function(e){!1===Te()&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=e}},{key:"rtt",get:function(){return this.props.rtt},set:function(e){this.props.rtt!==e&&(this.props.rtt=e,!0===e?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(et.RenderTexture),!0===this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate())}},{key:"initRenderTexture",value:function(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}},{key:"cleanupRenderTexture",value:function(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}},{key:"markChildrenWithRTT",value:function(){var e,t=w(((arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this).children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.setUpdateType(et.All),n.parentHasRenderTexture=!0,n.markChildrenWithRTT()}}catch(r){t.e(r)}finally{t.f()}}},{key:"applyRTTInheritance",value:function(e){e.rtt&&e.setUpdateType(et.RenderTexture),this.markChildrenWithRTT(e)}},{key:"clearRTTInheritance",value:function(){if(!this.rtt){var e,t=w(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parentHasRenderTexture=!1,n.rttParent=null,n.setUpdateType(et.All),n.clearRTTInheritance()}}catch(r){t.e(r)}finally{t.f()}}}},{key:"shader",get:function(){return this.props.shader},set:function(e){this.props.shader!==e&&(this.props.shader=e,this.setUpdateType(et.IsRenderable))}},{key:"src",get:function(){return this.props.src},set:function(e){this.props.src!==e&&(this.props.src=e,this.texture=e?this.stage.txManager.createTexture("ImageTexture",{src:e,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight}):null)}},{key:"imageType",get:function(){return this.props.imageType||null},set:function(e){this.props.imageType!==e&&(this.props.imageType=e)}},{key:"srcHeight",get:function(){return this.props.srcHeight},set:function(e){this.props.srcHeight=e}},{key:"srcWidth",get:function(){return this.props.srcWidth},set:function(e){this.props.srcWidth=e}},{key:"srcX",get:function(){return this.props.srcX},set:function(e){this.props.srcX=e}},{key:"srcY",get:function(){return this.props.srcY},set:function(e){this.props.srcY=e}},{key:"framebufferDimensions",get:function(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}},{key:"parentRenderTexture",get:function(){for(var e=this.parent;e;){if(e.rtt)return e;e=e.parent}return null}},{key:"texture",get:function(){return this.props.texture},set:function(e){if(this.props.texture!==e){var t=this.props.texture;t&&(t.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,null!==e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(et.IsRenderable)}}},{key:"textureOptions",get:function(){return this.props.textureOptions},set:function(e){this.props.textureOptions=e}},{key:"strictBounds",get:function(){return this.props.strictBounds},set:function(e){e!==this.props.strictBounds&&(this.props.strictBounds=e,this.setUpdateType(et.RenderBounds|et.Children),this.childUpdateType|=et.RenderBounds|et.Children)}},{key:"interactive",get:function(){return this.props.interactive},set:function(e){this.props.interactive=e,!0===e&&this.stage.interactiveNodes.add(this)}},{key:"animate",value:function(e,t){var n=new Qe(this,e,t);return new Ze(this.stage.animationManager,n)}},{key:"flush",value:function(){}}])}(Ae),rt=function(){return performance?performance.now():Date.now()},ot=function(){return p(function e(){f(this,e),v(this,"activeAnimations",new Set)},[{key:"registerAnimation",value:function(e){this.activeAnimations.add(e)}},{key:"unregisterAnimation",value:function(e){this.activeAnimations.delete(e)}},{key:"update",value:function(e){this.activeAnimations.forEach(function(t){t.update(e)})}}])}();function it(){self.onmessage=function(e){var t=e.data.src,n=e.data.id,r=e.data.premultiplyAlpha;e.data.sx,e.data.sy,e.data.sw,e.data.sh,function(e,t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){if(200!==o.status&&0!==o.status)return r(new Error("Failed to load image: "+o.statusText));var e=o.response;void 0!==t||e.type.indexOf("image/png"),createImageBitmap(e).then(function(e){n({data:e,premultiplyAlpha:t})}).catch(function(e){r(e)})},o.onerror=function(){r(new Error("Network error occurred while trying to fetch the image."))},o.send()})}(t,r).then(function(e){self.postMessage({id:n,src:t,data:e},[e.data])}).catch(function(e){self.postMessage({id:n,src:t,error:e.message})})}}var at=function(){return p(function e(t,n){var r=this;f(this,e),v(this,"imageWorkersEnabled",!0),v(this,"messageManager",{}),v(this,"workers",[]),v(this,"workerIndex",0),v(this,"nextId",0),this.workers=this.createWorkers(t,n),this.workers.forEach(function(e){e.onmessage=r.handleMessage.bind(r)})},[{key:"handleMessage",value:function(e){var t=e.data,n=t.id,r=t.data,o=t.error,i=this.messageManager[n];if(i){var a=y(i,2),s=a[0],l=a[1];delete this.messageManager[n],o?l(new Error(o)):s(r)}}},{key:"createWorkers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n="(".concat(it.toString(),")()");!0===t.options&&(n=n.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),!0===t.full&&(n=(n=n.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")).replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),n=n.replace('"use strict";',"");for(var r=new Blob([n],{type:"application/javascript"}),o=(self.URL?URL:webkitURL).createObjectURL(r),i=[],a=0;a<e;a++)i.push(new Worker(o));return i}},{key:"getNextWorker",value:function(){var e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}},{key:"getImage",value:function(e,t,n,r,o,i){var a=this;return new Promise(function(s,l){try{if(a.workers){var u=a.nextId++;a.messageManager[u]=[s,l];var c=a.getNextWorker();c&&c.postMessage({id:u,src:e,premultiplyAlpha:t,sx:n,sy:r,sw:o,sh:i})}}catch(f){l(f)}})}}])}(),st=function(e){function t(e,n){var r;return f(this,t),v(r=a(this,t,[e]),"type",Ce.color),v(r,"props",void 0),r.props=t.resolveDefaults(n||{}),r}return u(t,e),p(t,[{key:"color",get:function(){return this.props.color},set:function(e){this.props.color=e}},{key:"getTextureSource",value:(r=i(n().m(function e(){var t;return n().w(function(e){for(;;)if(0===e.n)return t=new Uint8Array(4),4294967295===this.color?(t[0]=255,t[1]=255,t[2]=255,t[3]=255):(t[0]=this.color>>16&255,t[1]=this.color>>8&255,t[2]=255&this.color,t[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),e.a(2,{data:t,premultiplyAlpha:!0})},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){var n=t.resolveDefaults(e);return"ColorTexture,".concat(n.color)}},{key:"resolveDefaults",value:function(e){return{color:e.color||4294967295}}}]);var r}(Ee);v(st,"z$__type__Props",void 0);var lt=function(){var e=i(n().m(function e(t){var r,o;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch(t);case 1:return r=e.v,e.n=2,r.arrayBuffer();case 2:if(o=e.v,-1===t.indexOf(".ktx")){e.n=3;break}return e.a(2,ut(o));case 3:return e.a(2,ct(o))}},e)}));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=i(n().m(function e(t){var r,o,i,a,s,l,u;return n().w(function(e){for(;;)if(0===e.n){for(r=new DataView(t),o=16909060===r.getUint32(12),i=[],a={glInternalFormat:r.getUint32(28,o),pixelWidth:r.getUint32(36,o),pixelHeight:r.getUint32(40,o),numberOfMipmapLevels:r.getUint32(56,o),bytesOfKeyValueData:r.getUint32(60,o)},s=64,s+=a.bytesOfKeyValueData,l=0;l<a.numberOfMipmapLevels;l++)u=r.getUint32(s),s+=4,i.push(r.buffer.slice(s,u)),s+=u;return e.a(2,{data:{glInternalFormat:a.glInternalFormat,mipmaps:i,width:a.pixelWidth||0,height:a.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1})}},e)}));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=i(n().m(function e(t){var r,o,i,a,s,l,u,c,f,d,p,h;return n().w(function(e){for(;;)if(0===e.n){for(r=t,o=new Int32Array(r,0,13),i=o[12]+52,a=new Uint8Array(r,i),s=[],l={pixelWidth:o[7],pixelHeight:o[6],numberOfMipmapLevels:o[11]||0},u=0,c=l.pixelWidth||0,f=l.pixelHeight||0,d=0;d<l.numberOfMipmapLevels;d++)p=(c+3>>2)*(f+3>>2)*8,h=new Uint8Array(r,a.byteOffset+u,p),s.push(h),u+=p,c>>=1,f>>=1;return e.a(2,{data:{glInternalFormat:36196,mipmaps:s,width:l.pixelWidth||0,height:l.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1})}},e)}));return function(t){return e.apply(this,arguments)}}();var ft=function(e,t,n,r,o,i,a){return new Promise(function(s,l){var u=document.createElement("canvas"),c=u.getContext("2d");ye(c),c.imageSmoothingEnabled=!0;var f=new Image;f.onload=function(){var e=null!=r?r:0,l=null!=o?o:0,d=t||f.width,p=n||f.height;u.width=d,u.height=p,c.drawImage(f,0,0,d,p),s({data:c.getImageData(e,l,null!=i?i:d,null!=a?a:p),premultiplyAlpha:!1})},f.onerror=function(e){l(e)},f.src=e})};function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise(function(n,r){var o=new XMLHttpRequest;o.responseType=t,o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(0===o.status||200===o.status?n(o.response):r(o.statusText))},o.open("GET",e,!0),o.send(null)})}var pt=function(e){function t(e,n){var r;return f(this,t),v(r=a(this,t,[e]),"props",void 0),v(r,"type",Ce.image),r.props=t.resolveDefaults(n),r}return u(t,e),p(t,[{key:"hasAlphaChannel",value:function(e){return-1!==e.indexOf("image/png")}},{key:"loadImageFallback",value:(s=i(n().m(function e(t,r){var o;return n().w(function(e){for(;;)if(0===e.n)return o=new Image,"string"==typeof t&&!1===Fe(t)&&(o.crossOrigin="anonymous"),e.a(2,new Promise(function(e){o.onload=function(){e({data:o,premultiplyAlpha:r})},o.onerror=function(){console.warn("Image loading failed, returning fallback object."),e({data:null,premultiplyAlpha:r})},t instanceof Blob?o.src=URL.createObjectURL(t):o.src=t}))},e)})),function(e,t){return s.apply(this,arguments)})},{key:"createImageBitmap",value:function(e){function t(t,n,r,o,i,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=i(n().m(function e(t,r,o,i,a,s){var l,u,c,f,d,p;return n().w(function(e){for(;;)switch(e.n){case 0:if(l=null!=r?r:t.type.includes("image/png"),!0!==(u=this.txManager.imageBitmapSupported).full||null===a||null===s){e.n=2;break}return e.n=1,createImageBitmap(t,o||0,i||0,a,s,{premultiplyAlpha:l?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 1:return c=e.v,e.a(2,{data:c,premultiplyAlpha:l});case 2:if(!0!==u.basic){e.n=4;break}return e.n=3,createImageBitmap(t);case 3:return d=e.v,p=l,e.a(2,{data:d,premultiplyAlpha:p});case 4:return e.n=5,createImageBitmap(t,{premultiplyAlpha:l?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 5:return f=e.v,e.a(2,{data:f,premultiplyAlpha:l})}},e,this)}));return function(t,n,r,o,i,a){return e.apply(this,arguments)}}())},{key:"loadImage",value:(o=i(n().m(function e(t){var r,o,i,a,s,l,u;return n().w(function(e){for(;;)switch(e.n){case 0:if(r=this.props,o=r.premultiplyAlpha,i=r.sx,a=r.sy,s=r.sw,l=r.sh,!0!==this.txManager.hasCreateImageBitmap){e.n=5;break}if(!1!==Fe(t)||!0!==this.txManager.hasWorker||null===this.txManager.imageWorkerManager){e.n=1;break}return e.a(2,this.txManager.imageWorkerManager.getImage(t,o,i,a,s,l));case 1:if(!0!==Fe(t)){e.n=2;break}u=ze(t),e.n=4;break;case 2:return e.n=3,dt(t,"blob").then(function(e){return e});case 3:u=e.v;case 4:return e.a(2,this.createImageBitmap(u,o,i,a,s,l));case 5:return e.a(2,this.loadImageFallback(t,null==o||o))}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"getTextureSource",value:(r=i(n().m(function e(){var t,r,o,i,a,s,l,u,c,f,d;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.determineImageTypeAndLoadImage();case 1:r=e.v,e.n=3;break;case 2:return e.p=2,d=e.v,this.setState("failed",d),e.a(2,{data:null});case 3:if(null!==r.data){e.n=4;break}return this.setState("failed",Error("ImageTexture: No image data")),e.a(2,{data:null});case 4:return r.data instanceof Uint8Array?(o=null!==(a=this.props.width)&&void 0!==a?a:0,i=null!==(s=this.props.height)&&void 0!==s?s:0):(o=null!==(l=null===(u=r.data)||void 0===u?void 0:u.width)&&void 0!==l?l:this.props.width||0,i=null!==(c=null===(f=r.data)||void 0===f?void 0:f.height)&&void 0!==c?c:this.props.height||0),this.setState("fetched",{width:o,height:i}),e.a(2,{data:r.data,premultiplyAlpha:null===(t=this.props.premultiplyAlpha)||void 0===t||t})}},e,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"determineImageTypeAndLoadImage",value:function(){var e=this.props,t=e.src,n=e.premultiplyAlpha,r=e.type;if(null===t)return{data:null};if("string"!=typeof t){if(t instanceof Blob){if(!0===this.txManager.hasCreateImageBitmap){var o=this.props,i=o.sx,a=o.sy,s=o.sw,l=o.sh;return this.createImageBitmap(t,n,i,a,s,l)}return this.loadImageFallback(t,null==n||n)}return t instanceof ImageData?{data:t,premultiplyAlpha:n}:{data:t(),premultiplyAlpha:n}}var u=function(e){if("file:"===self.location.protocol&&!Ie.test(e)){var t=self.location.pathname.split("/");t.pop();var n=t.join("/"),r=self.location.protocol+"//"+n;return"."===e.charAt(0)&&(e=e.slice(1)),"/"===e.charAt(0)&&(e=e.slice(1)),r+"/"+e}return new URL(e,self.location.href).href}(t);return"regular"===r?this.loadImage(u):"svg"===r||!0===/\.(svg)(\?.*)?$/.test(t)?ft(u,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):"compressed"===r||!0===function(e){return/\.(ktx|pvr)$/.test(e)}(t)?lt(u):this.loadImage(u)}}],[{key:"makeCacheKey",value:function(e){var n,r=t.resolveDefaults(e),o=r.key||r.src;if("string"!=typeof o)return!1;var i,a,s="";null!==r.sh&&null!==r.sw&&(s+=",",s+=null!==(i=r.sx)&&void 0!==i?i:"",s+=null!==(a=r.sy)&&void 0!==a?a:"",s+=r.sw||"",s+=r.sh||"");return"ImageTexture,".concat(o,",").concat(null!==(n=r.premultiplyAlpha)&&void 0!==n?n:"true").concat(s)}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a,s,l,u,c;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(n=e.premultiplyAlpha)||void 0===n||n,key:null!==(r=e.key)&&void 0!==r?r:null,type:null!==(o=e.type)&&void 0!==o?o:null,width:null!==(i=e.width)&&void 0!==i?i:null,height:null!==(a=e.height)&&void 0!==a?a:null,sx:null!==(s=e.sx)&&void 0!==s?s:null,sy:null!==(l=e.sy)&&void 0!==l?l:null,sw:null!==(u=e.sw)&&void 0!==u?u:null,sh:null!==(c=e.sh)&&void 0!==c?c:null}}}]);var r,o,s}(Ee);v(pt,"z$__type__Props",void 0);var ht=function(e){function t(e,n){var r;return f(this,t),v(r=a(this,t,[e]),"props",void 0),v(r,"type",Ce.noise),r.props=t.resolveDefaults(n),r}return u(t,e),p(t,[{key:"getTextureSource",value:(r=i(n().m(function e(){var t,r,o,i,a,s,l;return n().w(function(e){for(;;)if(0===e.n){for(t=this.props,r=t.width,o=t.height,i=r*o*4,a=new Uint8ClampedArray(i),s=0;s<i;s+=4)l=Math.floor(256*Math.random()),a[s]=l,a[s+1]=l,a[s+2]=l,a[s+3]=255;return this.setState("fetched"),e.a(2,{data:new ImageData(a,r,o)})}},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){if(void 0===e.cacheId)return!1;var n=t.resolveDefaults(e);return"NoiseTexture,".concat(n.width,",").concat(n.height,",").concat(n.cacheId)}},{key:"resolveDefaults",value:function(e){var t,n,r;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(n=e.height)&&void 0!==n?n:128,cacheId:null!==(r=e.cacheId)&&void 0!==r?r:0}}}]);var r}(Ee);v(ht,"z$__type__Props",void 0);var mt=function(e){function t(e,n){var r;return f(this,t),v(r=a(this,t,[e]),"props",void 0),v(r,"parentTexture",void 0),v(r,"type",Ce.subTexture),v(r,"onParentTxLoaded",function(){r.forwardParentTxState("loaded",{width:r.props.width,height:r.props.height})}),v(r,"onParentTxFailed",function(e,t){r.forwardParentTxState("failed",t)}),v(r,"onParentTxFetched",function(){r.forwardParentTxState("fetched",{width:r.props.width,height:r.props.height})}),v(r,"onParentTxFetching",function(){r.forwardParentTxState("fetching")}),v(r,"onParentTxLoading",function(){r.forwardParentTxState("loading")}),v(r,"onParentTxFreed",function(){r.forwardParentTxState("freed")}),r.props=t.resolveDefaults(n||{}),ye(r.props.texture,"SubTexture requires a parent texture"),ye(r.props.texture instanceof pt,"SubTexture requires an ImageTexture parent"),r.parentTexture=e.resolveParentTexture(r.props.texture),r.renderableOwners.size>0&&r.parentTexture.setRenderableOwner(r,!0),queueMicrotask(function(){var e=r.parentTexture;"loaded"===e.state?r.onParentTxLoaded(e,e.dimensions):"fetching"===e.state?r.onParentTxFetching():"fetched"===e.state?r.onParentTxFetched():"loading"===e.state?r.onParentTxLoading():"failed"===e.state?r.onParentTxFailed(e,e.error):"freed"===e.state&&r.onParentTxFreed(),e.on("fetched",r.onParentTxFetched),e.on("loading",r.onParentTxLoading),e.on("fetching",r.onParentTxFetching),e.on("loaded",r.onParentTxLoaded),e.on("failed",r.onParentTxFailed),e.on("freed",r.onParentTxFreed)}),r}return u(t,e),p(t,[{key:"forwardParentTxState",value:function(e,t){this.setState(e,t)}},{key:"onChangeIsRenderable",value:function(e){this.parentTexture.setRenderableOwner(this,e)}},{key:"getTextureSource",value:(r=i(n().m(function e(){var t=this;return n().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,n){t.setState("fetched"),e({data:t.props})}))},e)})),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}}]);var r}(Ee);v(mt,"z$__type__Props",void 0);var gt=function(e){function t(e,n){var r;return f(this,t),v(r=a(this,t,[e]),"props",void 0),v(r,"type",Ce.renderToTexture),r.props=t.resolveDefaults(n||{}),r}return u(t,e),p(t,[{key:"width",get:function(){return this.props.width},set:function(e){this.props.width=e}},{key:"height",get:function(){return this.props.height},set:function(e){this.props.height=e}},{key:"getTextureSource",value:(r=i(n().m(function e(){return n().w(function(e){for(;;)if(0===e.n)return this.setState("fetched"),e.a(2,{data:null,premultiplyAlpha:null})},e,this)})),function(){return r.apply(this,arguments)})}],[{key:"resolveDefaults",value:function(e){return{width:e.width||256,height:e.height||256}}}]);var r}(Ee);function yt(){return(yt=i(n().m(function e(){var t,r,o,i,a,s,l,u,c,f;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),o={basic:!1,options:!1,full:!1},i=new Blob([r],{type:"image/png"}),e.n=1,createImageBitmap(i);case 1:return a=e.v,null===(t=a.close)||void 0===t||t.call(a),o.basic=!0,e.p=2,l={premultiplyAlpha:"none"},e.n=3,createImageBitmap(i,l);case 3:u=e.v,null===(s=u.close)||void 0===s||s.call(u),o.options=!0,e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,e.n=6,createImageBitmap(i,0,0,1,1,{premultiplyAlpha:"none"});case 6:f=e.v,null===(c=f.close)||void 0===c||c.call(f),o.full=!0,e.n=8;break;case 7:e.p=7,e.v;case 8:return e.a(2,o)}},e,null,[[5,7],[2,4]])}))).apply(this,arguments)}v(gt,"z$__type__Props",void 0);var vt=function(e){function t(e,n){var r;f(this,t),v(r=a(this,t),"keyCache",new Map),v(r,"inverseKeyCache",new WeakMap),v(r,"txConstructors",{}),v(r,"priorityQueue",[]),v(r,"uploadTextureQueue",[]),v(r,"initialized",!1),v(r,"stage",void 0),v(r,"numImageWorkers",void 0),v(r,"imageWorkerManager",null),v(r,"hasCreateImageBitmap",!!self.createImageBitmap),v(r,"imageBitmapSupported",{basic:!1,options:!1,full:!1}),v(r,"hasWorker",!!self.Worker),v(r,"renderer",void 0),v(r,"frameTime",0);var o=n.numImageWorkers,i=n.createImageBitmapSupport;return r.stage=e,r.numImageWorkers=o,"auto"===i?function(){return yt.apply(this,arguments)}().then(function(e){r.initialize(e)}).catch(function(){console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),r.initialized=!0,r.emit("initialized")}):r.initialize({basic:"basic"===i,options:"options"===i,full:"full"===i}),r.registerTextureType("ImageTexture",pt),r.registerTextureType("ColorTexture",st),r.registerTextureType("NoiseTexture",ht),r.registerTextureType("SubTexture",mt),r.registerTextureType("RenderTexture",gt),r}return u(t,e),p(t,[{key:"registerTextureType",value:function(e,t){this.txConstructors[e]=t}},{key:"initialize",value:function(e){this.hasCreateImageBitmap=e.basic||e.options||e.full,this.imageBitmapSupported=e,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new at(this.numImageWorkers,e):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}},{key:"enqueueUploadTexture",value:function(e){!1===this.uploadTextureQueue.includes(e)&&this.uploadTextureQueue.push(e)}},{key:"createTexture",value:function(e,t){var n,r=this.txConstructors[e];if(!r)throw new Error('Texture type "'.concat(e,'" is not registered'));var o=r.makeCacheKey(t);return o&&this.keyCache.has(o)?n=this.keyCache.get(o):(n=new r(this,t),o&&this.initTextureToCache(n,o)),n}},{key:"orphanTexture",value:function(e){this.removeTextureFromQueue(e),e.type!==Ce.subTexture&&this.stage.txMemManager.addToOrphanedTextures(e)}},{key:"loadTexture",value:function(e,t){var n=this;this.stage.txMemManager.removeFromOrphanedTextures(e),e.type!==Ce.subTexture&&"loaded"!==e.state&&(Ee.TRANSITIONAL_TEXTURE_STATES.includes(e.state)||(!1!==this.initialized?("failed"===e.state&&(e.free(),e.freeTextureData()),e.setState("loading"),e.getTextureData().then(function(){"fetched"===e.state?e.type!==Ce.image?n.uploadTexture(e).catch(function(t){console.error("Failed to upload non-image texture:",t),e.setState("failed")}):!0===t?n.uploadTexture(e).catch(function(t){console.error("Failed to upload priority texture:",t),e.setState("failed")}):n.enqueueUploadTexture(e):e.setState("failed")}).catch(function(t){console.error(t),e.setState("failed")})):this.priorityQueue.push(e)))}},{key:"uploadTexture",value:(o=i(n().m(function e(t){var r;return n().w(function(e){for(;;)switch(e.n){case 0:if(!0!==this.stage.txMemManager.doNotExceedCriticalThreshold||!0!==this.stage.txMemManager.criticalCleanupRequested){e.n=1;break}return this.enqueueUploadTexture(t),e.a(2);case 1:if(null===(r=t.loadCtxTexture())||"loaded"!==r.state){e.n=2;break}return t.setState("loaded"),e.a(2);case 2:return e.n=3,r.load();case 3:return e.a(2)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"isProcessingTexture",value:function(e){return!0===this.uploadTextureQueue.includes(e)}},{key:"processSome",value:(r=i(n().m(function e(t){var r,o,i,a,s;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!1!==this.initialized){e.n=1;break}return e.a(2);case 1:r=rt();case 2:if(!(this.priorityQueue.length>0&&rt()-r<t)){e.n=8;break}return o=this.priorityQueue.pop(),e.p=3,e.n=4,o.getTextureData();case 4:return e.n=5,this.uploadTexture(o);case 5:e.n=7;break;case 6:e.p=6,a=e.v,console.error("Failed to process priority texture:",a);case 7:e.n=2;break;case 8:if(!(this.uploadTextureQueue.length>0&&rt()-r<t)){e.n=13;break}return i=this.uploadTextureQueue.shift(),e.p=9,e.n=10,this.uploadTexture(i);case 10:e.n=12;break;case 11:e.p=11,s=e.v,console.error("Failed to upload texture:",s);case 12:e.n=8;break;case 13:return e.a(2)}},e,this,[[9,11],[3,6]])})),function(e){return r.apply(this,arguments)})},{key:"hasUpdates",value:function(){return this.uploadTextureQueue.length>0}},{key:"initTextureToCache",value:function(e,t){var n=this.keyCache,r=this.inverseKeyCache;n.set(t,e),r.set(e,t)}},{key:"getTextureFromCache",value:function(e){return this.keyCache.get(e)}},{key:"removeTextureFromCache",value:function(e){var t=this.inverseKeyCache,n=this.keyCache,r=t.get(e);r&&n.delete(r)}},{key:"removeTextureFromQueue",value:function(e){var t=this.uploadTextureQueue.indexOf(e);-1!==t&&this.uploadTextureQueue.splice(t,1)}},{key:"resolveParentTexture",value:function(e){if(null==e||!e.props)return e;var t=pt.makeCacheKey(e.props),n=t?this.getTextureFromCache(t):void 0;return null!=n?n:e}}]);var r,o}(Ae),bt={normal:400,bold:700,bolder:900,lighter:100},xt=function(e){return"number"==typeof e?e:bt[e]||400};var wt=function(){return p(function e(t){f(this,e),v(this,"textRenderers",void 0),v(this,"fontCache",new Map),this.textRenderers=t},[{key:"addFontFace",value:function(e){for(var t in this.textRenderers){var n=this.textRenderers[t];n&&n.isFontFaceSupported(e)&&n.addFontFace(e)}}},{key:"resolveFontFace",value:function(e,t,n){var r=t.fontFamily,o=t.fontWeight,i=t.fontStyle,a=t.fontStretch,s="".concat(n,"_").concat(r,"_").concat(i,"_").concat(o,"_").concat(a);if(!0===this.fontCache.has(s))return this.fontCache.get(s);var l=function(e,t,n,r,o){var i,a=xt(n),s=w(e);try{for(s.s();!(i=s.n()).done;){var l=i.value[t];if(l){if(1===l.size)return console.warn("TrFontManager: Only one font face found for family: '".concat(t,"' - will be used for all weights and styles")),l.values().next().value;var u,c=new Map,f=w(l);try{for(f.s();!(u=f.n()).done;){var d=u.value,p=xt(d.descriptors.weight);if(p===a&&d.descriptors.style===r&&d.descriptors.stretch===o)return d;c.set(p,d)}}catch(m){f.e(m)}finally{f.f()}var h="TrFontManager: No exact match: '".concat(t," Weight: ").concat(a," Style: ").concat(r," Stretch: ").concat(o,"'");if(console.error(h),400===a&&c.has(500))return c.get(500);if(500===a&&c.has(400))return c.get(400);if(a<400){for(;a>0;){if(c.has(a))return c.get(a);a-=100}a=600}for(;a<1e3;){if(c.has(a))return c.get(a);a+=100}for(a=500;a>0;){if(c.has(a))return c.get(a);a-=100}}}}catch(m){s.e(m)}finally{s.f()}}(e,r,o,i,a);return void 0!==l&&this.fontCache.set(s,l),l}}])}(),St=function(){return p(function e(){f(this,e)},null,[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{}}}])}();function Tt(e,t,n){var r=e.createShader(t);if(!r){var o=e.getError();throw new Error("Unable to create the shader: ".concat(t===e.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER",".").concat(o?" WebGlContext Error: ".concat(o):""))}if(e.shaderSource(r,n),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.error(e.getShaderInfoLog(r)),e.deleteShader(r)}var kt=function(e){function t(e){var n;f(this,t),v(n=a(this,t),"boundBufferCollection",null),v(n,"buffersBound",!1),v(n,"program",void 0),v(n,"vao",void 0),v(n,"renderer",void 0),v(n,"glw",void 0),v(n,"attributeBuffers",void 0),v(n,"attributeLocations",void 0),v(n,"attributeNames",void 0),v(n,"uniformLocations",void 0),v(n,"uniformTypes",void 0),v(n,"supportsIndexedTextures",void 0);var r=n.renderer=e.renderer,o=n.glw=n.renderer.glw;n.supportsIndexedTextures=e.supportsIndexedTextures||!1;var i=o.isWebGl2(),s=i&&e.webgl2Extensions||!i&&e.webgl1Extensions||[],l=i?"2.0":"1.0";s.forEach(function(e){if(!o.getExtension(e))throw new Error('Shader "'.concat(n.constructor.name,'" requires extension "').concat(e,'" for WebGL ').concat(l," but wasn't found"))});var u=e.shaderSources||n.constructor.shaderSources;if(!u)throw new Error('Shader "'.concat(n.constructor.name,'" is missing shaderSources.'));i&&null!=u&&u.webGl2&&(u.fragment=u.webGl2.fragment,u.vertex=u.webGl2.vertex,delete u.webGl2);var c=r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,d=u.vertex instanceof Function?u.vertex(c):u.vertex,p=u.fragment instanceof Function?u.fragment(c):u.fragment,m=Tt(o,o.VERTEX_SHADER,d),g=Tt(o,o.FRAGMENT_SHADER,p);if(!m||!g)throw new Error("Unable to create the following shader(s): ".concat([!m&&"VERTEX_SHADER",!g&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")));var y=function(e,t,n){var r=e.createProgram();if(!r)throw new Error("Unable to create program");if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.warn(e.getProgramInfoLog(r)),e.deleteProgram(r)}(o,m,g);if(!y)throw new Error("Unable to create program");return n.program=y,n.attributeLocations={},n.attributeBuffers={},n.attributeNames=[],h(e.attributes).forEach(function(e){var t=o.getAttribLocation(n.program,e);if(t<0)throw new Error("".concat(n.constructor.name,': Vertex shader must have an attribute "').concat(e,'"!'));var r=o.createBuffer();if(!r)throw new Error("".concat(n.constructor.name,': Could not create buffer for attribute "').concat(e,'"'));n.attributeLocations[e]=t,n.attributeBuffers[e]=r,n.attributeNames.push(e)}),n.uniformLocations={},n.uniformTypes={},e.uniforms.forEach(function(e){var t=o.getUniformLocation(n.program,e.name);n.uniformTypes[e.name]=e.uniform,t?n.uniformLocations[e.name]=t:console.warn('Shader "'.concat(n.constructor.name,'" could not get uniform location for "').concat(e.name,'"'))}),n}return u(t,e),p(t,[{key:"bindBufferAttribute",value:function(e,t,n){var r=this.glw;r.enableVertexAttribArray(e),r.vertexAttribPointer(t,e,n.size,n.type,n.normalized,n.stride,n.offset)}},{key:"disableAttribute",value:function(e){this.glw.disableVertexAttribArray(e)}},{key:"disableAttributes",value:function(){for(var e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}},{key:"canBatchShaderProps",value:function(e,t){return!1}},{key:"bindRenderOp",value:function(e,t){var n;this.bindBufferCollection(e.buffers),e.textures.length>0&&null!==(n=e.textures[0])&&void 0!==n&&n.ctxTexture&&this.bindTextures(e.textures);var r=e.glw,o=e.parentHasRenderTexture;if(!e.renderToTexture||!o){if(o){var i=e.framebufferDimensions||{},a=i.width,s=i.height;r.uniform1f(this.getUniformLocation("u_pixelRatio"),1),r.uniform2f(this.getUniformLocation("u_resolution"),null!=a?a:0,null!=s?s:0)}else r.uniform1f(this.getUniformLocation("u_pixelRatio"),e.options.pixelRatio),r.uniform2f(this.getUniformLocation("u_resolution"),r.canvas.width,r.canvas.height);if(t){if(Se(t,"$dimensions")){var l=t.$dimensions;l||(l=e.dimensions),r.uniform2f(this.getUniformLocation("u_dimensions"),l.width,l.height)}if(Se(t,"$alpha")){var u=t.$alpha;u||(u=e.alpha),r.uniform1f(this.getUniformLocation("u_alpha"),u)}this.bindProps(t)}}}},{key:"getUniformLocation",value:function(e){return this.uniformLocations[e]||null}},{key:"bindBufferCollection",value:function(e){if(this.boundBufferCollection!==e){for(var t in this.attributeLocations){var n=e.getBuffer(t),r=e.getAttributeInfo(t);ye(n,'Buffer for "'.concat(t,'" not found')),ye(r),this.bindBufferAttribute(this.attributeLocations[t],n,r)}this.boundBufferCollection=e}}},{key:"bindProps",value:function(e){}},{key:"bindTextures",value:function(e){}},{key:"attach",value:function(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}},{key:"detach",value:function(){this.disableAttributes()}}])}(St);v(kt,"shaderSources",void 0);var Ct=function(e){function t(e){return f(this,t),a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]}])}return u(t,e),p(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}])}(kt);v(Ct,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});var At=function(e){function t(e){var n;return f(this,t),v(n=a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}]),"supportsIndexedTextures",!0),n}return u(t,e),p(t,[{key:"bindTextures",value:function(e){var t=this.renderer,n=this.glw;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach(function(e,t){n.activeTexture(t),n.bindTexture(e.ctxTexture)});var r=Array.from(Array(e.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),r)}}])}(kt);v(At,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:function(e){return"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(function(e){return"\n          ".concat(0!==e?"else ":"","if (idx == ").concat(e,") {\n            return texture2D(textures[").concat(e,"], uv);\n          }\n        ")}).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")}});var Et=function(){return p(function e(t){f(this,e),v(this,"priority",1),v(this,"name",""),v(this,"ref",void 0),v(this,"target",void 0),v(this,"passParameters",""),v(this,"declaredUniforms",""),v(this,"uniformInfo",{});var n=t.ref,r=t.target,o=t.props,i=void 0===o?{}:o;this.ref=n,this.target=r;var a={},s=[],l="",u=this.constructor.uniforms||{};for(var c in u){var d=u[c],p=d.type,h="".concat(n,"_").concat(c),m="";d.size&&(m="[".concat(d.size(i),"]")),s.push(h),l+="uniform ".concat(p," ").concat(h).concat(m,";"),a[c]={name:h,uniform:u[c].method}}this.passParameters=s.join(","),this.declaredUniforms=l,this.uniformInfo=a},null,[{key:"getEffectKey",value:function(e){return""}},{key:"getMethodParameters",value:function(e,t){var n=[];for(var r in e){var o=e[r],i="";o.size&&(i="[".concat(o.size(t),"]")),n.push("".concat(o.type," ").concat(r).concat(i))}return n.join(",")}},{key:"resolveDefaults",value:function(e){return{}}},{key:"makeEffectKey",value:function(e){return!1}}])}();v(Et,"uniforms",{}),v(Et,"methods",void 0),v(Et,"onShaderMask",void 0),v(Et,"onColorize",void 0),v(Et,"onEffectMask",void 0);var It=new Map,Mt=function(e,t){var n=JSON.stringify(e);if(It.has(n))return It.get(n);for(var r=[],o=(e=null!=e?e:[]).length,i=0;i<o;i++){for(var a=e[i],s=a.name,l=a.type,u=a.props,c={name:s,type:l,props:{}},f=t[l],d=f.resolveDefaults(u),p=f.uniforms,h=Object.keys(p),m=h.length,g=0;g<m;g++){var y=h[g],v=p[y],b={value:d[y],programValue:void 0,method:v.method,updateOnBind:v.updateOnBind||!1,hasValidator:void 0!==v.validator,hasProgramValueUpdater:void 0!==v.updateProgramValue},x=b.hasValidator&&v.validator(d[y],d)||d[y];d[y]!==x&&(b.validatedValue=x),b.hasProgramValueUpdater&&v.updateProgramValue(b),void 0===b.programValue&&(b.programValue=b.value),c.props[y]=b}r.push(c)}return It.set(n,r),r},Rt=function(e){function t(e,n,r){var o;f(this,t);var i=t.createShader(n,r);return v(o=a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"}].concat(h(i.uniforms)),shaderSources:{vertex:i.vertex,fragment:i.fragment}}]),"effects",[]),o.effects=i.effects,o}return u(t,e),p(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"bindUniformMethods",value:function(e){for(var t=this,n=this.glw,r=e.effects,o=r.length,i=0;i<o;i++)for(var a=this.effects[i].uniformInfo,s=r[i],l=Object.keys(s.props),u=l.length,c=function(){var e=l[f],r=s.props[e].method,o=t.getUniformLocation(a[e].name);return"uniform2fv"===r||"uniform2iv"===r||"uniform3iv"===r||"uniform4fv"===r||"uniform4iv"===r||"uniformMatrix2fv"===r||"uniformMatrix3fv"===r||"uniformMatrix4fv"===r||"uniform1f"===r||"uniform1fv"===r||"uniform1i"===r||"uniform1iv"===r?(s.props[e].setUniformValue=function(){n[r](o,this.programValue)},0):"uniform2f"===r||"uniform2i"===r?(s.props[e].setUniformValue=function(){n[r](o,this.programValue[0],this.programValue[1])},0):"uniform3f"===r||"uniform3i"===r?(s.props[e].setUniformValue=function(){n[r](o,this.programValue[0],this.programValue[1],this.programValue[2])},0):"uniform4f"===r||"uniform4i"===r?(s.props[e].setUniformValue=function(){n[r](o,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])},0):void 0},f=0;f<u;f++)c()}},{key:"bindProps",value:function(e){for(var t=e.effects,n=t.length,r=0;r<n;r++)for(var o=t[r],i=Object.keys(o.props),a=i.length,s=0;s<a;s++){var l=i[s],u=o.props[l];if(!0===u.updateOnBind){var c,f=null===(c=this.renderer.shManager.getRegisteredEffects()[o.type])||void 0===c?void 0:c.uniforms[l];null==f||f.updateProgramValue(o.props[l],e)}u.setUniformValue()}}},{key:"canBatchShaderProps",value:function(e,t){if(e.$alpha!==t.$alpha||e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;for(var n=e.effects.length,r=0;r<n;r++){var o=e.effects[r],i=t.effects[r];if(o.type!==i.type)return!1;for(var a in o.props)if(i.props&&!i.props[a]||o.props[a].value!==i.props[a].value)return!1}return!0}}],[{key:"createShader",value:function(e,n){var r={},o={},i="",a=[],s=[],l=e.effects.map(function(e){var t=n[e.type],o=t.getEffectKey(e.props||{});r[o]=r[o]?++r[o]:1;var l=r[o];1===l&&s.push({key:o,type:e.type,props:e.props});var u=new t({ref:"".concat(o).concat(1===l?"":l),target:o,props:e.props});return i+=u.declaredUniforms,a.push.apply(a,h(Object.values(u.uniformInfo))),u}),u="";null==s||s.forEach(function(e){var r,i=n[e.type],a=i.resolveDefaults(null!==(r=e.props)&&void 0!==r?r:{}),s=[];for(var l in i.methods){var c=l,f=i.methods[l];o[l]&&o[l]!==f&&(c=t.resolveMethodDuplicate(l,f,o)),o[c]=f.replace("function",c),s.push({m:l,cm:c})}var d=i.onShaderMask instanceof Function?i.onShaderMask(a):i.onShaderMask,p=i.onColorize instanceof Function?i.onColorize(a):i.onColorize,h=i.onEffectMask instanceof Function?i.onEffectMask(a):i.onEffectMask;s.forEach(function(e){var t=e.m,n=e.cm,r=new RegExp("\\$".concat(t),"g");d&&(d=d.replace(r,n)),p&&(p=p.replace(r,n)),h&&(h=h.replace(r,n))});var m=i.getMethodParameters(i.uniforms,a),g=m.length>0?", ".concat(m):"";d&&(u+="\n        float fx_".concat(e.key,"_onShaderMask(float shaderMask ").concat(g,") {\n          ").concat(d,"\n        }\n        ")),p&&(u+="\n          vec4 fx_".concat(e.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(p,"\n          }\n        ")),h&&(u+="\n          vec4 fx_".concat(e.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(h,"\n          }\n        "))});var c="";for(var f in o)c+=o[f];for(var d="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",p="\n\n    ",m=0;m<l.length;m++){var g=l[m],y=g.passParameters.length>0?", ".concat(g.passParameters):"",v=n[g.name];v.onShaderMask&&(p+="\n        shaderMask = fx_".concat(g.target,"_onShaderMask(shaderMask ").concat(y,");\n        ")),v.onColorize&&(p+="\n        maskColor = fx_".concat(g.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(y,");\n        ")),v.onEffectMask&&(d="fx_".concat(g.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(y,")"));var b=l[m+1];(void 0===b||n[b.name].onEffectMask)&&(p+="\n          shaderColor = ".concat(d,";\n        "))}return{effects:l,uniforms:a,fragment:t.fragment(i,c,u,p),vertex:t.vertex()}}},{key:"resolveMethodDuplicate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e+(r>0?r:"");return n[o]&&n[o]!==t?this.resolveMethodDuplicate(e,t,n,++r):o}},{key:"resolveDefaults",value:function(e,t){var n;return ye(t),{effects:Mt(null!==(n=e.effects)&&void 0!==n?n:[],t),$dimensions:{width:0,height:0},$alpha:0}}},{key:"makeCacheKey",value:function(e,t){var n,r="";return null===(n=e.effects)||void 0===n||n.forEach(function(e){var n=t[e.type].getEffectKey(e.props||{});r+=",".concat(n)}),"DynamicShader".concat(r)}}])}(kt);v(Rt,"z$__type__Props",void 0),v(Rt,"vertex",function(){return"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "}),v(Rt,"fragment",function(e,t,n,r){return"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(t,"\n\n    ").concat(n,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(r,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  ")});var _t=function(e){function t(e){return f(this,t),a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]}])}return u(t,e),p(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"bindProps",value:function(e){var t=Math.min(e.$dimensions.width,e.$dimensions.height)/(2*e.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),e.radius*Math.min(t,1))}},{key:"canBatchShaderProps",value:function(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}],[{key:"resolveDefaults",value:function(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}}])}(kt);v(_t,"z$__type__Props",void 0),v(_t,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var Lt=new Float32Array([1,0,0,0,1,0,0,0,1]),Pt=function(e){function t(e){return f(this,t),a(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]}])}return u(t,e),p(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"bindProps",value:function(e){var n=t.resolveDefaults(e);for(var r in n)if("transform"===r)this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),n[r]);else if("scrollY"===r)this.glw.uniform1f(this.getUniformLocation("u_scrollY"),n[r]);else if("color"===r){var o=Me(n.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),o)}else"size"===r?this.glw.uniform1f(this.getUniformLocation("u_size"),n[r]):"distanceRange"===r?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),n[r]):"debug"===r&&this.glw.uniform1i(this.getUniformLocation("u_debug"),n[r]?1:0)}}],[{key:"resolveDefaults",value:function(){var e,t,n,r,o,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{transform:null!==(e=a.transform)&&void 0!==e?e:Lt,scrollY:null!==(t=a.scrollY)&&void 0!==t?t:0,color:null!==(n=a.color)&&void 0!==n?n:4294967295,size:null!==(r=a.size)&&void 0!==r?r:16,distanceRange:null!==(o=a.distanceRange)&&void 0!==o?o:1,debug:null!==(i=a.debug)&&void 0!==i&&i}}}])}(kt);v(Pt,"z$__type__Props",void 0),v(Pt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});var Dt=function(e){void 0===e.programValue&&(e.programValue=new Float32Array(4));var t=e.value,n=e.programValue;n[0]=(t>>>24)/255,n[1]=(t>>>16&255)/255,n[2]=(t>>>8&255)/255,n[3]=(255&t)/255},Ot=function(e){var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array)for(var n=t.length,r=e.programValue,o=0;o<n;o++)r[o]=t[o];else e.programValue=new Float32Array(t)},Nt=function(e){var t=Array.isArray(e);return t?t&&4===e.length?e:t&&2===e.length?[e[0],e[1],e[0],e[1]]:t&&3===e.length?[e[0],e[1],e[2],e[0]]:[e[0],e[0],e[0],e[0]]:[e,e,e,e]},Ut=function(e,t){void 0===e.programValue&&(e.programValue=new Float32Array(4));var n=e.programValue,r=e.validatedValue||e.value;if(void 0===t&&void 0===e.$dimensions)return n[0]=r[0],n[1]=r[1],n[2]=r[2],void(n[3]=r[3]);var o=e.$dimensions;if(void 0!==t){var i=t.$dimensions;if(void 0!==o&&(o.width===i.width||o.height===i.height))return;void 0===o&&(o={width:null==i?void 0:i.width,height:null==i?void 0:i.height},e.$dimensions=o)}var a=o,s=a.width,l=a.height,u=y(r,4),c=u[0],f=u[1],d=u[2],p=u[3],h=Math.min(Math.min(Math.min(s/Math.max(s,c+f),s/Math.max(s,d+p)),Math.min(l/Math.max(l,c+d),l/Math.max(l,f+p))),1);n[0]=c*h,n[1]=f*h,n[2]=d*h,n[3]=p*h},Bt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","radius"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"radius"}},{key:"resolveDefaults",value:function(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}])}(Et);v(Bt,"z$__type__Props",void 0),v(Bt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Nt,updateProgramValue:Ut}}),v(Bt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),v(Bt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),v(Bt,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");var jt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","border"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"border"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Et);v(jt,"z$__type__Props",void 0),v(jt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Dt,method:"uniform4fv",type:"vec4"}}),v(jt,"onEffectMask","\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),v(jt,"onColorize","\n    return color;\n  ");var Ft=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","linearGradient"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(e){return e.colors.value?"linearGradient".concat(e.colors.value.length):"linearGradient".concat(e.colors.length)}},{key:"resolveDefaults",value:function(e){var t,n,r=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],o=e.stops||[];if(0===o.length||o.length!==r.length){for(var i=r.length,a=0,s=o;a<i;a++)o[a]?(s[a]=o[a],void 0===o[a-1]&&void 0!==s[a-2]&&(s[a-1]=s[a-2]+(o[a]-s[a-2])/2)):s[a]=a*(1/(r.length-1));o=s}return{colors:r,stops:o,angle:null!==(n=e.angle)&&void 0!==n?n:0}}}])}(Et);o=Ft,v(Ft,"z$__type__Props",void 0),v(Ft,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:function(e){return e.reduce(function(e,t){return e.concat(Me(t))},[])},updateProgramValue:Ot,size:function(e){return e.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],size:function(e){return e.colors.length},method:"uniform1fv",type:"float"}}),v(Ft,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),v(Ft,"ColorLoop",function(e){for(var t="",n=2;n<e;n++)t+="colorOut = mix(colorOut, colors[".concat(n,"], clamp((dist - stops[").concat(n-1,"]) / (stops[").concat(n,"] - stops[").concat(n-1,"]), 0.0, 1.0));");return t}),v(Ft,"onColorize",function(e){var t=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ".concat(o.ColorLoop(t),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});var zt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","grayscale"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"grayscale"}},{key:"resolveDefaults",value:function(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}])}(Et);v(zt,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),v(zt,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");var Vt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","borderRight"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"borderRight"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Et);v(Vt,"z$__type__Props",void 0),v(Vt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Dt,method:"uniform4fv",type:"vec4"}}),v(Vt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),v(Vt,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),v(Vt,"onColorize","\n    return color;\n  ");var Ht=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","borderTop"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"borderTop"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Et);v(Ht,"z$__type__Props",void 0),v(Ht,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Dt,method:"uniform4fv",type:"vec4"}}),v(Ht,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),v(Ht,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),v(Ht,"onColorize","\n    return color;\n  ");var Gt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","borderBottom"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"borderBottom"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Et);v(Gt,"z$__type__Props",void 0),v(Gt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Dt,method:"uniform4fv",type:"vec4"}}),v(Gt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),v(Gt,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),v(Gt,"onColorize","\n    return color;\n  ");var qt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","borderLeft"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"borderLeft"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}])}(Et);v(qt,"z$__type__Props",void 0),v(qt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Dt,method:"uniform4fv",type:"vec4"}}),v(qt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),v(qt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),v(qt,"onColorize","\n    return color;\n  ");var Wt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","glitch"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(e){return"glitch"}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(n=e.narrowness)&&void 0!==n?n:4,blockiness:null!==(r=e.blockiness)&&void 0!==r?r:2,minimizer:null!==(o=e.minimizer)&&void 0!==o?o:8,time:null!==(i=e.time)&&void 0!==i?i:Date.now()}}}])}(Et);v(Wt,"z$__type__Props",void 0),v(Wt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:function(e){var t=e.value=(Date.now()-e.value)%1e3;e.programValue=t},type:"float"}}),v(Wt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),v(Wt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");var Kt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","fadeOut"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"fadeOut"}},{key:"resolveDefaults",value:function(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}])}(Et);v(Kt,"z$__type__Props",void 0),v(Kt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:Nt,updateProgramValue:function(e){var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){var n=e.programValue;n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]}else e.programValue=new Float32Array(t)}}}),v(Kt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");var Xt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","radialGradient"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(e){return e.colors.value?"radialGradient".concat(e.colors.value.length):"radialGradient".concat(e.colors.length)}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],s=e.stops||[];if(0===s.length||s.length!==a.length){for(var l=a.length,u=0,c=s;u<l;u++)s[u]?(c[u]=s[u],void 0===s[u-1]&&void 0!==c[u-2]&&(c[u-1]=c[u-2]+(s[u]-c[u-2])/2)):c[u]=u*(1/(a.length-1));s=c}return{colors:a,stops:s,width:null!==(n=e.width)&&void 0!==n?n:0,height:null!==(r=null!==(o=e.height)&&void 0!==o?o:e.width)&&void 0!==r?r:0,pivot:null!==(i=e.pivot)&&void 0!==i?i:[.5,.5]}}}])}(Et);s=Xt,v(Xt,"z$__type__Props",void 0),v(Xt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:function(e){var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){var n=e.programValue;n[0]=t[0],n[1]=t[1]}else e.programValue=new Float32Array(t)},method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:function(e){return e.reduce(function(e,t){return e.concat(Me(t))},[])},updateProgramValue:Ot,size:function(e){return e.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],size:function(e){return e.colors.length},method:"uniform1fv",type:"float"}}),v(Xt,"ColorLoop",function(e){for(var t="",n=2;n<e;n++)t+="colorOut = mix(colorOut, colors[".concat(n,"], clamp((dist - stops[").concat(n-1,"]) / (stops[").concat(n,"] - stops[").concat(n-1,"]), 0.0, 1.0));");return t}),v(Xt,"onColorize",function(e){var t=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ".concat(s.ColorLoop(t),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});var $t=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","radialProgress"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"radialProgress"}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a,s;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(n=e.progress)&&void 0!==n?n:.5,offset:null!==(r=e.offset)&&void 0!==r?r:0,range:null!==(o=e.range)&&void 0!==o?o:2*Math.PI,rounded:null!==(i=e.rounded)&&void 0!==i&&i,radius:null!==(a=e.radius)&&void 0!==a?a:1,color:null!==(s=e.color)&&void 0!==s?s:4294967295}}}])}(Et);v($t,"z$__type__Props",void 0),v($t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:function(e){return e?1:0}},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Dt,method:"uniform4fv",type:"vec4"}}),v($t,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),v($t,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),v($t,"onColorize","\n    return color;\n  ");var Yt=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"name","holePunch"),e}return u(t,e),p(t,null,[{key:"getEffectKey",value:function(){return"holePunch"}},{key:"resolveDefaults",value:function(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:null!==(t=e.radius)&&void 0!==t?t:0}}}])}(Et);v(Yt,"z$__type__Props",void 0),v(Yt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Nt,updateProgramValue:Ut}}),v(Yt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),v(Yt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),v(Yt,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");var Jt=function(e){function t(e){var n;return f(this,t),v(n=a(this,t),"shType",void 0),n.shType=e,n}return u(t,e),p(t,[{key:"bindRenderOp",value:function(){}},{key:"bindProps",value:function(){}},{key:"attach",value:function(){}},{key:"detach",value:function(){}}])}(St),Qt=function(){return p(function e(t,n,r,o){var i=this;f(this,e),v(this,"type",void 0),v(this,"shader",void 0),v(this,"resolvedProps",void 0),v(this,"props",void 0),this.type=t,this.shader=n,this.resolvedProps=r;for(var a=Object.keys(r),s=a.length,l={},u=function(){var e=a[c];Object.defineProperty(l,e,{get:function(){return i.resolvedProps[e]},set:function(t){i.resolvedProps[e]=t,o.requestRender()}})},c=0;c<s;c++)u();this.props=l},[{key:"getResolvedProps",value:function(){return this.resolvedProps}}])}(),Zt=function(){return p(function e(t,n,r){var o=this;f(this,e),v(this,"shader",void 0),v(this,"resolvedProps",void 0),v(this,"props",void 0),v(this,"type",void 0),this.shader=t,this.type="DynamicShader",this.resolvedProps=n;for(var i=r.getRegisteredEffects(),a={},s=n.effects,l=s.length,u=function(e){var t=s[e],n=t.name,l=t.props,u=t.type;if(void 0===n)return 1;for(var c={},f=Object.keys(l),d=f.length,p=function(){var t=f[h];Object.defineProperty(c,t,{get:function(){return o.resolvedProps.effects[e].props[t].value},set:function(n){var a,s,c=o.resolvedProps.effects[e].props[t];(c.value=n,c.hasValidator)&&(n=c.validatedValue=null===(a=i[u].uniforms[t])||void 0===a?void 0:a.validator(n,l));c.hasProgramValueUpdater?null===(s=i[u].uniforms[t])||void 0===s||s.updateProgramValue(c):c.programValue=n;r.renderer.stage.requestRender()}})},h=0;h<d;h++)p();Object.defineProperty(a,n,{get:function(){return c}})},c=0;c<l;c++)u(c);this.props=a},[{key:"getResolvedProps",value:function(){return this.resolvedProps}}])}(),en=function(){return p(function e(){f(this,e),v(this,"shCache",new Map),v(this,"shConstructors",{}),v(this,"attachedShader",null),v(this,"effectConstructors",{}),v(this,"renderer",void 0),this.registerShaderType("DefaultShader",Ct),this.registerShaderType("DefaultShaderBatched",At),this.registerShaderType("RoundedRectangle",_t),this.registerShaderType("DynamicShader",Rt),this.registerShaderType("SdfShader",Pt),this.registerEffectType("border",jt),this.registerEffectType("borderBottom",Gt),this.registerEffectType("borderLeft",qt),this.registerEffectType("borderRight",Vt),this.registerEffectType("borderTop",Ht),this.registerEffectType("fadeOut",Kt),this.registerEffectType("linearGradient",Ft),this.registerEffectType("radialGradient",Xt),this.registerEffectType("grayscale",zt),this.registerEffectType("glitch",Wt),this.registerEffectType("radius",Bt),this.registerEffectType("radialProgress",$t),this.registerEffectType("holePunch",Yt)},[{key:"registerShaderType",value:function(e,t){this.shConstructors[e]=t}},{key:"registerEffectType",value:function(e,t){this.effectConstructors[e]=t}},{key:"getRegisteredEffects",value:function(){return this.effectConstructors}},{key:"getRegisteredShaders",value:function(){return this.shConstructors}},{key:"loadShader",value:function(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");var n=this.shConstructors[e];if(!n)throw new Error('Shader type "'.concat(e,'" is not registered'));if("canvas"===this.renderer.mode&&n.prototype instanceof kt)return this._createShaderCtr(e,new Jt(e),t);if("DynamicShader"===e)return this.loadDynamicShader(t);var r=n.resolveDefaults(t),o=n.makeCacheKey(r)||n.name;if(o&&this.shCache.has(o))return this._createShaderCtr(e,this.shCache.get(o),r);var i=new n(this.renderer,t);return o&&this.shCache.set(o,i),this._createShaderCtr(e,i,r)}},{key:"loadDynamicShader",value:function(e){if(!this.renderer)throw new Error("Renderer is not been defined");var t=Rt.resolveDefaults(e,this.effectConstructors),n=Rt.makeCacheKey(t,this.effectConstructors);if(n&&this.shCache.has(n))return this._createDynShaderCtr(this.shCache.get(n),t);var r=new Rt(this.renderer,e,this.effectConstructors);return n&&this.shCache.set(n,r),this._createDynShaderCtr(r,t)}},{key:"_createShaderCtr",value:function(e,t,n){return new Qt(e,t,n,this.renderer.stage)}},{key:"_createDynShaderCtr",value:function(e,t){return e.bindUniformMethods(t),new Zt(e,t,this)}},{key:"useShader",value:function(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}])}(),tn={x:function(e,t){e.props.x=t},y:function(e,t){e.props.y=t},width:function(e,t){e.props.width=t},height:function(e,t){e.props.height=t},color:function(e,t){e.props.color=t},zIndex:function(e,t){e.props.zIndex=t},fontFamily:function(e,t){e.props.fontFamily=t},fontWeight:function(e,t){e.props.fontWeight=t},fontStyle:function(e,t){e.props.fontStyle=t},fontStretch:function(e,t){e.props.fontStretch=t},fontSize:function(e,t){e.props.fontSize=t},text:function(e,t){e.props.text=t},textAlign:function(e,t){e.props.textAlign=t},contain:function(e,t){e.props.contain=t},offsetY:function(e,t){e.props.offsetY=t},scrollable:function(e,t){e.props.scrollable=t},scrollY:function(e,t){e.props.scrollY=t},letterSpacing:function(e,t){e.props.letterSpacing=t},lineHeight:function(e,t){e.props.lineHeight=t},maxLines:function(e,t){e.props.maxLines=t},textBaseline:function(e,t){e.props.textBaseline=t},verticalAlign:function(e,t){e.props.verticalAlign=t},overflowSuffix:function(e,t){e.props.overflowSuffix=t},debug:function(e,t){e.props.debug=t}},nn=function(){return p(function e(t){var n=this;f(this,e),v(this,"stage",void 0),v(this,"set",void 0),this.stage=t;var r=g(g({},tn),this.getPropertySetters()),o={};Object.keys(r).forEach(function(e){Object.defineProperty(o,e,{value:function(t,o){t.props[e]!==o&&(r[e](t,o),n.stage.requestRender())},writable:!1,configurable:!1})}),this.set=o},[{key:"setStatus",value:function(e,t,n){e.status!==t&&(e.status=t,e.emitter.emit(t,n))}},{key:"setIsRenderable",value:function(e,t){e.isRenderable=t}},{key:"destroyState",value:function(e){this.setStatus(e,"destroyed"),e.emitter.removeAllListeners()}},{key:"scheduleUpdateState",value:function(e){var t=this;e.updateScheduled||(e.updateScheduled=!0,queueMicrotask(function(){"destroyed"!==e.status&&(e.updateScheduled=!1,t.updateState(e))}))}}])}(),rn=function(){return p(function e(){f(this,e),v(this,"data",{})},[{key:"reset",value:function(){this.data={}}},{key:"increment",value:function(e){this.data[e]||(this.data[e]=0),this.data[e]++}},{key:"getData",value:function(){return g({},this.data)}}])}(),on=function(){return p(function e(t,n){var r=this;f(this,e),v(this,"stage",void 0),v(this,"memUsed",0),v(this,"loadedTextures",new Map),v(this,"orphanedTextures",[]),v(this,"criticalThreshold",void 0),v(this,"targetThreshold",void 0),v(this,"cleanupInterval",void 0),v(this,"debugLogging",void 0),v(this,"lastCleanupTime",0),v(this,"baselineMemoryAllocation",void 0),v(this,"criticalCleanupRequested",!1),v(this,"doNotExceedCriticalThreshold",void 0),v(this,"frameTime",0),this.stage=t;var o=n.criticalThreshold,i=n.doNotExceedCriticalThreshold;this.doNotExceedCriticalThreshold=i||!1,this.criticalThreshold=Math.round(o);var a=Math.max(0,Math.min(1,n.targetThresholdLevel));if(this.cleanupInterval=n.cleanupInterval,this.debugLogging=n.debugLogging,this.baselineMemoryAllocation=Math.round(n.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(o*a),this.baselineMemoryAllocation),this.memUsed=Math.round(n.baselineMemoryAllocation),n.debugLogging){var s=0;setInterval(function(){s!==r.memUsed&&(s=r.memUsed,console.log("[TextureMemoryManager] Memory used: ".concat(Ye(r.memUsed)," mb / ").concat(Ye(r.criticalThreshold)," mb (").concat((r.memUsed/r.criticalThreshold*100).toFixed(1),"%)")))},1e3)}0===o&&(this.setTextureMemUse=function(){})},[{key:"addToOrphanedTextures",value:function(e){this.orphanedTextures.includes(e)&&this.removeFromOrphanedTextures(e),!1===e.preventCleanup&&this.orphanedTextures.push(e)}},{key:"removeFromOrphanedTextures",value:function(e){var t=this.orphanedTextures.indexOf(e);-1!==t&&this.orphanedTextures.splice(t,1)}},{key:"setTextureMemUse",value:function(e,t){this.loadedTextures.has(e)&&(this.memUsed-=this.loadedTextures.get(e)),0!==t?(this.memUsed+=t,this.loadedTextures.set(e,t),this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)):this.loadedTextures.delete(e)}},{key:"checkCleanup",value:function(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}},{key:"checkCriticalCleanup",value:function(){return this.memUsed>this.criticalThreshold}},{key:"cleanupQuick",value:function(e){for(var t=this.targetThreshold,n=rt();this.memUsed>=t&&this.orphanedTextures.length>0&&(e||rt()-n<10);){var r=this.orphanedTextures.shift();void 0!==r&&(!0!==r.renderable&&(Ee.TRANSITIONAL_TEXTURE_STATES.includes(r.state)||this.destroyTexture(r)))}}},{key:"destroyTexture",value:function(e){!0===this.debugLogging&&console.log("[TextureMemoryManager] Destroying texture. State: ".concat(e.state));var t=this.stage.txManager;t.removeTextureFromQueue(e),t.removeTextureFromCache(e),e.destroy(),this.removeFromOrphanedTextures(e),this.loadedTextures.delete(e)}},{key:"cleanupDeep",value:function(e){for(var t=e?this.criticalThreshold:this.targetThreshold,n=[],r=h(this.loadedTextures.keys()),o=0;o<r.length;o++){var i=r[o];void 0!==i&&(i.type!==Ce.image&&i.type!==Ce.noise&&i.type!==Ce.renderToTexture||(!0===i.renderable?n.push(i):n.unshift(i)))}for(;this.memUsed>=t&&n.length>0;){var a=n.shift();if(void 0!==a&&!0!==a.preventCleanup){if(!0===a.renderable)break;if(Ee.TRANSITIONAL_TEXTURE_STATES.includes(a.state))break;this.destroyTexture(a)}}}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,!0===t&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),!0===this.debugLogging&&console.log("[TextureMemoryManager] Cleaning up textures. Critical: ".concat(t,". Aggressive: ").concat(e)),this.cleanupQuick(t),!0===e&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(t),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),!0!==this.debugLogging&&!1!==Te()||console.warn("[TextureMemoryManager] Memory usage above critical threshold after cleanup: ".concat(this.memUsed))):this.criticalCleanupRequested=!1}},{key:"getMemoryInfo",value:function(){var e=this,t=0,n=h(this.loadedTextures.keys()).reduce(function(n,r){var o;t+=r.renderable?1:0;var i=null!==(o=e.loadedTextures.get(r))&&void 0!==o?o:0;return n+(r.renderable?i:0)},this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:n,memUsed:this.memUsed,renderableTexturesLoaded:t,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}])}(),an=function(){return p(function e(t,n){f(this,e),v(this,"textureSource",void 0),v(this,"memManager",void 0),v(this,"state","freed"),this.memManager=t,this.textureSource=n},[{key:"setTextureMemUse",value:function(e){this.memManager.setTextureMemUse(this.textureSource,e)}},{key:"renderable",get:function(){return this.textureSource.renderable}}])}(),sn=p(function e(t){f(this,e),v(this,"options",void 0),v(this,"mode",void 0),v(this,"stage",void 0),v(this,"txManager",void 0),v(this,"txMemManager",void 0),v(this,"shManager",void 0),v(this,"rttNodes",[]),this.options=t,this.stage=t.stage,this.txManager=t.txManager,this.txMemManager=t.txMemManager,this.shManager=t.shManager}),ln=function(t){function n(e,t,r){var o;f(this,n),v(o=a(this,n,[e,t]),"textRenderer",void 0),v(o,"trState",void 0),v(o,"_textRendererOverride",null),v(o,"onTextLoaded",function(){var e=o.contain,t=o.trState.props.width,n=o.trState.props.height,r=o.trState.textW||0,i=o.trState.textH||0;"both"===e?(o.props.width=t,o.props.height=n):"width"===e?(o.props.width=t,o.props.height=i):"none"===e&&(o.props.width=r,o.props.height=i),o.updateLocalTransform(),o.stage.requestRender(),o.emit("loaded",{type:"text",dimensions:{width:o.trState.textW||0,height:o.trState.textH||0}})}),v(o,"onTextFailed",function(e,t){o.emit("failed",{type:"text",error:t})}),o._textRendererOverride=t.textRendererOverride,o.textRenderer=r;var i=o.createState({x:0,y:0,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix});return o.trState=i,o}return u(n,t),p(n,[{key:"width",get:function(){return this.props.width},set:function(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),"none"===this.contain&&this.setUpdateType(et.Local)}},{key:"height",get:function(){return this.props.height},set:function(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),"both"!==this.contain&&this.setUpdateType(et.Local)}},{key:"color",get:function(){return this.trState.props.color},set:function(e){this.textRenderer.set.color(this.trState,e)}},{key:"text",get:function(){return this.trState.props.text},set:function(e){this.textRenderer.set.text(this.trState,e)}},{key:"textRendererOverride",get:function(){return this._textRendererOverride},set:function(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);var t=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);t?(this.textRenderer=t,this.trState=this.createState(this.trState.props)):console.warn("Text Renderer not found for font",this.trState.props.fontFamily)}},{key:"fontSize",get:function(){return this.trState.props.fontSize},set:function(e){this.textRenderer.set.fontSize(this.trState,e)}},{key:"fontFamily",get:function(){return this.trState.props.fontFamily},set:function(e){this.textRenderer.set.fontFamily(this.trState,e)}},{key:"fontStretch",get:function(){return this.trState.props.fontStretch},set:function(e){this.textRenderer.set.fontStretch(this.trState,e)}},{key:"fontStyle",get:function(){return this.trState.props.fontStyle},set:function(e){this.textRenderer.set.fontStyle(this.trState,e)}},{key:"fontWeight",get:function(){return this.trState.props.fontWeight},set:function(e){this.textRenderer.set.fontWeight(this.trState,e)}},{key:"textAlign",get:function(){return this.trState.props.textAlign},set:function(e){this.textRenderer.set.textAlign(this.trState,e)}},{key:"contain",get:function(){return this.trState.props.contain},set:function(e){this.textRenderer.set.contain(this.trState,e)}},{key:"scrollable",get:function(){return this.trState.props.scrollable},set:function(e){this.textRenderer.set.scrollable(this.trState,e)}},{key:"scrollY",get:function(){return this.trState.props.scrollY},set:function(e){this.textRenderer.set.scrollY(this.trState,e)}},{key:"offsetY",get:function(){return this.trState.props.offsetY},set:function(e){this.textRenderer.set.offsetY(this.trState,e)}},{key:"letterSpacing",get:function(){return this.trState.props.letterSpacing},set:function(e){this.textRenderer.set.letterSpacing(this.trState,e)}},{key:"lineHeight",get:function(){return this.trState.props.lineHeight},set:function(e){this.textRenderer.set.lineHeight(this.trState,e)}},{key:"maxLines",get:function(){return this.trState.props.maxLines},set:function(e){this.textRenderer.set.maxLines(this.trState,e)}},{key:"textBaseline",get:function(){return this.trState.props.textBaseline},set:function(e){this.textRenderer.set.textBaseline(this.trState,e)}},{key:"verticalAlign",get:function(){return this.trState.props.verticalAlign},set:function(e){this.textRenderer.set.verticalAlign(this.trState,e)}},{key:"overflowSuffix",get:function(){return this.trState.props.overflowSuffix},set:function(e){this.textRenderer.set.overflowSuffix(this.trState,e)}},{key:"debug",get:function(){return this.trState.props.debug},set:function(e){this.textRenderer.set.debug(this.trState,e)}},{key:"update",value:function(t,r){e(n,"update",this,3)([t,r]),ye(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}},{key:"checkBasicRenderability",value:function(){return 0!==this.worldAlpha&&!0!==this.isOutOfBounds()&&!(!this.trState||""===this.trState.props.text)}},{key:"setRenderable",value:function(t){e(n,"setRenderable",this,3)([t]),this.textRenderer.setIsRenderable(this.trState,t)}},{key:"renderQuads",value:function(t){var r;if(ye(this.globalTransform),this.textRenderer.renderQuads){if(this.parentHasRenderTexture){if(!t.renderToTextureActive)return;if(this.parentRenderTexture!==t.activeRttNode)return}this.parentHasRenderTexture&&null!==(r=this.props.parent)&&void 0!==r&&r.rtt&&(this.globalTransform=Ve.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),ye(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions)}else e(n,"renderQuads",this,3)([t])}},{key:"destroy",value:function(){e(n,"destroy",this,3)([]),this.textRenderer.destroyState(this.trState)}},{key:"createState",value:function(e){var t=this.textRenderer.createState(e,this);return t.emitter.on("loaded",this.onTextLoaded),t.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(t),t}}])}(nt);var un=function(){return p(function e(t){var n=this;f(this,e),v(this,"options",void 0),v(this,"animationManager",void 0),v(this,"txManager",void 0),v(this,"txMemManager",void 0),v(this,"fontManager",void 0),v(this,"textRenderers",void 0),v(this,"shManager",void 0),v(this,"renderer",void 0),v(this,"root",void 0),v(this,"interactiveNodes",new Set),v(this,"boundsMargin",void 0),v(this,"defShaderCtr",void 0),v(this,"strictBound",void 0),v(this,"preloadBound",void 0),v(this,"strictBounds",void 0),v(this,"defaultTexture",null),v(this,"targetFrameTime",0),v(this,"eventBus",void 0),v(this,"deltaTime",0),v(this,"lastFrameTime",0),v(this,"currentFrameTime",0),v(this,"fpsNumFrames",0),v(this,"fpsElapsedTime",0),v(this,"numQuadsRendered",0),v(this,"renderRequested",!1),v(this,"frameEventQueue",[]),v(this,"fontResolveMap",{}),v(this,"contextSpy",null),this.options=t;var r=t.canvas,o=t.clearColor,i=t.appWidth,a=t.appHeight,s=t.boundsMargin,l=t.enableContextSpy,u=t.forceWebGL2,c=t.numImageWorkers,d=t.textureMemory,p=t.renderEngine,h=t.fontEngines,m=t.createImageBitmapSupport;this.eventBus=t.eventBus,this.targetFrameTime=t.targetFPS>0?1e3/t.targetFPS:0,this.txManager=new vt(this,{numImageWorkers:c,createImageBitmapSupport:m}),this.txManager.on("initialized",function(){n.requestRender()}),this.txMemManager=new on(this,d),this.shManager=new en,this.animationManager=new ot,this.contextSpy=l?new rn:null,this.strictBounds=t.strictBounds;var g=[0,0,0,0];s&&(g=Array.isArray(s)?s:[s,s,s,s]),this.boundsMargin=g,this.strictBound=Pe(0,0,i,a),this.preloadBound=je(this.strictBound,g);var y={stage:this,canvas:r,pixelRatio:t.devicePhysicalPixelRatio*t.deviceLogicalPixelRatio,clearColor:null!=o?o:4278190080,bufferMemory:2e6,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:u};this.renderer=new p(y);var b=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),xe="webgl"===b,this.txManager.renderer=this.renderer,this.textRenderers={},h.forEach(function(e){var t=new e(n),r=t.type;"sdf"!==r||"canvas"!==b?t instanceof nn&&("canvas"===r?n.textRenderers.canvas=t:"sdf"===r&&(n.textRenderers.sdf=t)):console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...")}),0===Object.keys(this.textRenderers).length&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new wt(this.textRenderers);var x=new nt(this,{x:0,y:0,width:i,height:a,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=x,function(e){var t=!1,n=0,r=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=e.targetFrameTime;if(i>0&&o-n<i)setTimeout(function(){return requestAnimationFrame(r)},i-(o-n));else{if(n=o,e.updateFrameTime(),e.updateAnimations(),!e.hasSceneUpdates())return e.calculateFps(),i>0?setTimeout(function(){return requestAnimationFrame(r)},Math.max(i,16.666666666666668)):setTimeout(function(){return requestAnimationFrame(r)},16.666666666666668),t||(e.eventBus.emit("idle"),t=!0),!0===e.txMemManager.checkCleanup()&&e.txMemManager.cleanup(!1),void e.flushFrameEvents();if(t=!1,e.drawFrame(),e.flushFrameEvents(),i>0){var a=Math.max(0,i-(performance.now()-o));setTimeout(function(){return requestAnimationFrame(r)},a)}else requestAnimationFrame(r)}};requestAnimationFrame(r)}(this)},[{key:"setClearColor",value:function(e){this.renderer.updateClearColor(e),this.renderRequested=!0}},{key:"updateTargetFrameTime",value:function(){this.targetFrameTime=this.options.targetFPS>0?1e3/this.options.targetFPS:0}},{key:"updateFrameTime",value:function(){var e=rt();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=e,this.deltaTime=this.lastFrameTime?e-this.lastFrameTime:100/6,this.txManager.frameTime=e,this.txMemManager.frameTime=e,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}},{key:"createDefaultTexture",value:function(){var e=this;console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),ye(this.defaultTexture instanceof st),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",function(){e.requestRender()})}},{key:"updateAnimations",value:function(){var e=this.animationManager;this.root&&e.update(this.deltaTime)}},{key:"hasSceneUpdates",value:function(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}},{key:"drawFrame",value:function(){var e=this.renderer,t=this.renderRequested;ye(e),0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit).catch(function(e){console.error("Error processing textures:",e)}),e.reset(),!0===this.txMemManager.criticalCleanupRequested&&(this.txMemManager.cleanup(!1),!0===this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(!0)),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),null==e||e.render(),this.calculateFps(),this.calculateQuads(),t&&(this.renderRequested=!1)}},{key:"queueFrameEvent",value:function(e,t){this.frameEventQueue.push([e,t])}},{key:"flushFrameEvents",value:function(){var e,t=w(this.frameEventQueue);try{for(t.s();!(e=t.n()).done;){var n=y(e.value,2),r=n[0],o=n[1];this.eventBus.emit(r,o)}}catch(i){t.e(i)}finally{t.f()}this.frameEventQueue=[]}},{key:"calculateFps",value:function(){var e=this.options.fpsUpdateInterval;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){var t,n,r,o=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:o,contextSpyData:null!==(t=null===(n=this.contextSpy)||void 0===n?void 0:n.getData())&&void 0!==t?t:null}),null===(r=this.contextSpy)||void 0===r||r.reset()}}},{key:"calculateQuads",value:function(){var e=this.renderer.getQuadCount();e&&e!==this.numQuadsRendered&&(this.numQuadsRendered=e,this.queueFrameEvent("quadsUpdate",{quads:e}))}},{key:"addQuads",value:function(e){ye(this.renderer),!0===e.isRenderable&&e.renderQuads(this.renderer);for(var t=0;t<e.children.length;t++){var n=e.children[t];void 0!==n&&(0===n.worldAlpha||!0===n.strictBounds&&n.renderState===Je.OutOfBounds||this.addQuads(n))}}},{key:"requestRender",value:function(){this.renderRequested=!0}},{key:"findNodesAtPoint",value:function(e){var t,n=e.x/this.options.deviceLogicalPixelRatio,r=e.y/this.options.deviceLogicalPixelRatio,o=[],i=w(this.interactiveNodes);try{for(i.s();!(t=i.n()).done;){var a=t.value;!1!==a.isRenderable&&(!0===Be(n,r,a.renderBound)&&o.push(a))}}catch(s){i.e(s)}finally{i.f()}return o}},{key:"getNodeFromPosition",value:function(e){var t=this.findNodesAtPoint(e);if(0===t.length)return null;for(var n=t[0],r=0;r<t.length;r++)t[r].zIndex>n.zIndex&&(n=t[r]);return n||null}},{key:"resolveTextRenderer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat(e.fontFamily).concat(e.fontStyle).concat(e.fontWeight).concat(e.fontStretch).concat(t||"");if(void 0!==this.fontResolveMap[n])return this.fontResolveMap[n];var r=t,o=!1;if(r){var i=this.textRenderers[r];i?i.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(r,"' for font"),e),r=null,o=!0):(console.warn("Text renderer override '".concat(r,"' not found.")),r=null,o=!0)}if(!r){for(var a=0,s=Object.entries(this.textRenderers);a<s.length;a++){var l=y(s[a],2),u=l[0];if(l[1].canRenderFont(e)){r=u;break}}r||void 0===this.textRenderers.canvas||(r="canvas")}if(o&&console.warn("Falling back to text renderer ".concat(String(r))),!r)return null;var c=this.textRenderers[r];return ye(c,"resolvedTextRenderer undefined"),this.fontResolveMap[n]=c,c}},{key:"createShaderCtr",value:function(e,t){return this.shManager.loadShader(e,t)}},{key:"createNode",value:function(e){var t=this.resolveNodeDefaults(e);return new nt(this,t)}},{key:"createTextNode",value:function(e){var t,n,r,o,i,a,s,l,u,c,f,d,p,h,m,y,v,b,x=null!==(t=e.fontSize)&&void 0!==t?t:16,w=g(g({},this.resolveNodeDefaults(e)),{},{text:null!==(n=e.text)&&void 0!==n?n:"",textRendererOverride:null!==(r=e.textRendererOverride)&&void 0!==r?r:null,fontSize:x,fontFamily:null!==(o=e.fontFamily)&&void 0!==o?o:"sans-serif",fontStyle:null!==(i=e.fontStyle)&&void 0!==i?i:"normal",fontWeight:null!==(a=e.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(s=e.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(l=e.textAlign)&&void 0!==l?l:"left",contain:null!==(u=e.contain)&&void 0!==u?u:"none",scrollable:null!==(c=e.scrollable)&&void 0!==c&&c,scrollY:null!==(f=e.scrollY)&&void 0!==f?f:0,offsetY:null!==(d=e.offsetY)&&void 0!==d?d:0,letterSpacing:null!==(p=e.letterSpacing)&&void 0!==p?p:0,lineHeight:e.lineHeight,maxLines:null!==(h=e.maxLines)&&void 0!==h?h:0,textBaseline:null!==(m=e.textBaseline)&&void 0!==m?m:"alphabetic",verticalAlign:null!==(y=e.verticalAlign)&&void 0!==y?y:"middle",overflowSuffix:null!==(v=e.overflowSuffix)&&void 0!==v?v:"...",debug:null!==(b=e.debug)&&void 0!==b?b:{},shaderProps:null}),S=this.resolveTextRenderer(w,e.textRendererOverride);if(!S)throw new Error("No compatible text renderer found for ".concat(w.fontFamily));return new ln(this,w,S)}},{key:"setBoundsMargin",value:function(e){this.boundsMargin=Array.isArray(e)?e:[e,e,e,e],this.root.setUpdateType(et.RenderBounds)}},{key:"resolveNodeDefaults",value:function(e){var t,n,r,o,i,a,s,l,u,c,f,d,p,h,m,g,y,v,b,w,S,T,k,C,A,E,I,M,R,_,L,P,D,O,N,U,B,j,F,z,V,H,G,q,W,K,X,$,Y,J,Q,Z,ee,te=null!==(t=e.color)&&void 0!==t?t:4294967295,ne=null!==(n=null!==(r=null!==(o=e.colorTl)&&void 0!==o?o:e.colorTop)&&void 0!==r?r:e.colorLeft)&&void 0!==n?n:te,re=null!==(i=null!==(a=null!==(s=e.colorTr)&&void 0!==s?s:e.colorTop)&&void 0!==a?a:e.colorRight)&&void 0!==i?i:te,oe=null!==(l=null!==(u=null!==(c=e.colorBl)&&void 0!==c?c:e.colorBottom)&&void 0!==u?u:e.colorLeft)&&void 0!==l?l:te,ie=null!==(f=null!==(d=null!==(p=e.colorBr)&&void 0!==p?p:e.colorBottom)&&void 0!==d?d:e.colorRight)&&void 0!==f?f:te,ae={};!0===this.options.inspector&&(ae=function(e){for(var t={boolean:!0,string:!0,number:!0,undefined:!0},n=Object.keys(e),r=0;r<n.length;r++){var o=n[r];if(o){var i=e[o],a=x(i);"string"===a&&i.length>2048&&(console.warn("Custom Data value for ".concat(o," is too long, it will be truncated to 2048 characters")),e[o]=i.substring(0,2048)),t[a]||(console.warn("Custom Data value for ".concat(o," is not a boolean, string, or number, it will be ignored")),delete e[o])}}return e}(null!==(ee=e.data)&&void 0!==ee?ee:{}));return{x:null!==(h=e.x)&&void 0!==h?h:0,y:null!==(m=e.y)&&void 0!==m?m:0,width:null!==(g=e.width)&&void 0!==g?g:0,height:null!==(y=e.height)&&void 0!==y?y:0,alpha:null!==(v=e.alpha)&&void 0!==v?v:1,autosize:null!==(b=e.autosize)&&void 0!==b&&b,boundsMargin:null!==(w=e.boundsMargin)&&void 0!==w?w:null,clipping:null!==(S=e.clipping)&&void 0!==S&&S,color:te,colorTop:null!==(T=e.colorTop)&&void 0!==T?T:te,colorBottom:null!==(k=e.colorBottom)&&void 0!==k?k:te,colorLeft:null!==(C=e.colorLeft)&&void 0!==C?C:te,colorRight:null!==(A=e.colorRight)&&void 0!==A?A:te,colorBl:oe,colorBr:ie,colorTl:ne,colorTr:re,zIndex:null!==(E=e.zIndex)&&void 0!==E?E:0,zIndexLocked:null!==(I=e.zIndexLocked)&&void 0!==I?I:0,parent:null!==(M=e.parent)&&void 0!==M?M:null,texture:null!==(R=e.texture)&&void 0!==R?R:null,textureOptions:null!==(_=e.textureOptions)&&void 0!==_?_:{},shader:null!==(L=e.shader)&&void 0!==L?L:this.defShaderCtr,src:null!==(P=e.src)&&void 0!==P?P:null,srcHeight:e.srcHeight,srcWidth:e.srcWidth,srcX:e.srcX,srcY:e.srcY,scale:null!==(D=e.scale)&&void 0!==D?D:null,scaleX:null!==(O=null!==(N=e.scaleX)&&void 0!==N?N:e.scale)&&void 0!==O?O:1,scaleY:null!==(U=null!==(B=e.scaleY)&&void 0!==B?B:e.scale)&&void 0!==U?U:1,mount:null!==(j=e.mount)&&void 0!==j?j:0,mountX:null!==(F=null!==(z=e.mountX)&&void 0!==z?z:e.mount)&&void 0!==F?F:0,mountY:null!==(V=null!==(H=e.mountY)&&void 0!==H?H:e.mount)&&void 0!==V?V:0,pivot:null!==(G=e.pivot)&&void 0!==G?G:.5,pivotX:null!==(q=null!==(W=e.pivotX)&&void 0!==W?W:e.pivot)&&void 0!==q?q:.5,pivotY:null!==(K=null!==(X=e.pivotY)&&void 0!==X?X:e.pivot)&&void 0!==K?K:.5,rotation:null!==($=e.rotation)&&void 0!==$?$:0,rtt:null!==(Y=e.rtt)&&void 0!==Y&&Y,data:ae,preventCleanup:null!==(J=e.preventCleanup)&&void 0!==J&&J,imageType:e.imageType,interactive:null!==(Q=e.interactive)&&void 0!==Q&&Q,strictBounds:null!==(Z=e.strictBounds)&&void 0!==Z?Z:this.strictBounds}}},{key:"cleanup",value:function(e){this.txMemManager.cleanup(e)}}])}(),cn=function(e){function t(e,n){var r,o,i,s,l,u,c,d,p,h,m,g,y;f(this,t),v(y=a(this,t),"root",void 0),v(y,"canvas",void 0),v(y,"settings",void 0),v(y,"stage",void 0),v(y,"inspector",null);var b={criticalThreshold:(null===(r=e.textureMemory)||void 0===r?void 0:r.criticalThreshold)||124e6,targetThresholdLevel:(null===(o=e.textureMemory)||void 0===o?void 0:o.targetThresholdLevel)||.5,cleanupInterval:(null===(i=e.textureMemory)||void 0===i?void 0:i.cleanupInterval)||5e3,debugLogging:(null===(s=e.textureMemory)||void 0===s?void 0:s.debugLogging)||!1,baselineMemoryAllocation:(null===(l=e.textureMemory)||void 0===l?void 0:l.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:(null===(u=e.textureMemory)||void 0===u?void 0:u.doNotExceedCriticalThreshold)||!1},x={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,textureMemory:b,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(c=e.clearColor)&&void 0!==c?c:0,fpsUpdateInterval:e.fpsUpdateInterval||0,targetFPS:e.targetFPS||0,numImageWorkers:void 0!==e.numImageWorkers?e.numImageWorkers:2,enableContextSpy:null!==(d=e.enableContextSpy)&&void 0!==d&&d,forceWebGL2:null!==(p=e.forceWebGL2)&&void 0!==p&&p,inspector:null!==(h=e.inspector)&&void 0!==h&&h,renderEngine:e.renderEngine,quadBufferSize:null!==(m=e.quadBufferSize)&&void 0!==m?m:4194304,fontEngines:e.fontEngines,strictBounds:null===(g=e.strictBounds)||void 0===g||g,textureProcessingTimeLimit:e.textureProcessingTimeLimit||42,canvas:e.canvas||document.createElement("canvas"),createImageBitmapSupport:e.createImageBitmapSupport||"full"};y.settings=x;var w,S=x.deviceLogicalPixelRatio,T=x.devicePhysicalPixelRatio,k=x.inspector,C=x.canvas,A=x.appWidth*S,E=x.appHeight*S;if(y.canvas=C,C.width=A*T,C.height=E*T,C.style.width="".concat(A,"px"),C.style.height="".concat(E,"px"),y.stage=new un({appWidth:y.settings.appWidth,appHeight:y.settings.appHeight,boundsMargin:y.settings.boundsMargin,clearColor:y.settings.clearColor,canvas:y.canvas,deviceLogicalPixelRatio:y.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:y.settings.devicePhysicalPixelRatio,enableContextSpy:y.settings.enableContextSpy,forceWebGL2:y.settings.forceWebGL2,fpsUpdateInterval:y.settings.fpsUpdateInterval,targetFPS:y.settings.targetFPS,numImageWorkers:y.settings.numImageWorkers,renderEngine:y.settings.renderEngine,textureMemory:b,eventBus:y,quadBufferSize:y.settings.quadBufferSize,fontEngines:y.settings.fontEngines,inspector:null!==y.settings.inspector,strictBounds:y.settings.strictBounds,textureProcessingTimeLimit:y.settings.textureProcessingTimeLimit,createImageBitmapSupport:y.settings.createImageBitmapSupport}),y.root=y.stage.root,!(w="string"==typeof n?document.getElementById(n):n))throw new Error("Could not find target element");return w.appendChild(C),k&&!Te()&&(y.inspector=new k(C,x)),y}return u(t,e),p(t,[{key:"createNode",value:function(e){var t=this.stage.createNode(e);return this.inspector?this.inspector.createNode(t):t}},{key:"createTextNode",value:function(e){var t=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(t):t}},{key:"destroyNode",value:function(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}},{key:"createTexture",value:function(e,t){return this.stage.txManager.createTexture(e,t)}},{key:"createShader",value:function(e,t){return this.stage.shManager.loadShader(e,t)}},{key:"createDynamicShader",value:function(e){return this.stage.shManager.loadDynamicShader({effects:e})}},{key:"createEffect",value:function(e,t,n){return{name:n,type:e,props:t}}},{key:"getNodeById",value:function(e){var t,n=null===(t=this.stage)||void 0===t?void 0:t.root;if(!n)return null;var r=function(t){if(t.id===e)return t;var n,o=w(t.children);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=r(i);if(a)return a}}catch(s){o.e(s)}finally{o.f()}return null};return r(n)}},{key:"toggleFreeze",value:function(){throw new Error("Not implemented")}},{key:"advanceFrame",value:function(){throw new Error("Not implemented")}},{key:"getBufferInfo",value:function(){return this.stage.renderer.getBufferInfo()}},{key:"rerender",value:function(){this.stage.requestRender()}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stage.cleanup(e)}},{key:"setClearColor",value:function(e){this.stage.setClearColor(e)}},{key:"targetFPS",get:function(){return this.stage.options.targetFPS},set:function(e){this.stage.options.targetFPS=e>0?e:0,this.stage.updateTargetFrameTime()}}])}(Ae),fn=function(e){function t(e){var n;f(this,t),v(n=a(this,t),"fontFamily",void 0),v(n,"descriptors",void 0),v(n,"loaded",!1),v(n,"metrics",null);var r=e.fontFamily,o=e.descriptors,i=e.metrics;return i&&(n.metrics={ascender:i.ascender/i.unitsPerEm,descender:i.descender/i.unitsPerEm,lineGap:i.lineGap/i.unitsPerEm}),n.fontFamily=r,n.descriptors=g({style:"normal",weight:"normal",stretch:"normal"},o),n}return u(t,e),p(t,null,[{key:"convertToCssFontFaceDescriptors",value:function(e){return{style:e.style,weight:"number"==typeof e.weight?"".concat(e.weight):e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}])}(Ae),dn=function(e){function t(e){var n;f(this,t),v(n=a(this,t,[e]),"fontFace",void 0),v(n,"fontUrl",void 0);var r=e.fontFamily,o=e.fontUrl,i=o.replace(/\(|\)/g,""),s=n.descriptors,l={style:s.style,weight:"number"==typeof s.weight?"".concat(s.weight):s.weight,stretch:s.stretch,unicodeRange:s.unicodeRange,featureSettings:s.featureSettings,display:s.display};for(var u in l){var c=u;void 0===l[c]&&delete l[c]}var d=new FontFace(r,"url(".concat(i,")"),l);return i.length>0?d.load().then(function(){n.loaded=!0,n.emit("loaded")}).catch(console.error):(n.loaded=!0,n.emit("loaded")),n.fontFace=d,n.fontUrl=o,n}return u(t,e),p(t)}(fn),pn=function(e){function t(e,n,r,o,i,s,l,u,c,d,p,h,m){var g;return f(this,t),v(g=a(this,t),"glw",void 0),v(g,"options",void 0),v(g,"buffers",void 0),v(g,"shader",void 0),v(g,"shaderProps",void 0),v(g,"alpha",void 0),v(g,"clippingRect",void 0),v(g,"dimensions",void 0),v(g,"bufferIdx",void 0),v(g,"zIndex",void 0),v(g,"renderToTexture",void 0),v(g,"parentHasRenderTexture",void 0),v(g,"framebufferDimensions",void 0),v(g,"length",0),v(g,"numQuads",0),v(g,"textures",[]),v(g,"maxTextures",void 0),g.glw=e,g.options=n,g.buffers=r,g.shader=o,g.shaderProps=i,g.alpha=s,g.clippingRect=l,g.dimensions=u,g.bufferIdx=c,g.zIndex=d,g.renderToTexture=p,g.parentHasRenderTexture=h,g.framebufferDimensions=m,g.maxTextures=o.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1,g}return u(t,e),p(t,[{key:"addTexture",value:function(e){for(var t=this.textures,n=this.maxTextures,r=-1,o=t.length,i=0;i<o;i++){if(t[i]===e){r=i;break}}return-1!==r?r:o>=n?4294967295:(this.textures.push(e),o)}},{key:"draw",value:function(){var e=this.glw,t=this.shader,n=this.shaderProps,r=this.options;r.shManager.useShader(t),t.bindRenderOp(this,n);var o=this.bufferIdx/24*6*2;if(this.clippingRect.valid){var i=this.clippingRect,a=i.x,s=i.y,l=i.width,u=i.height,c=this.parentHasRenderTexture?1:r.pixelRatio,f=r.canvas.height,d=Math.round(a*c),p=Math.round(l*c),h=Math.round(u*c),m=Math.round(f-h-s*c);this.parentHasRenderTexture&&(m=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),e.setScissorTest(!0),e.scissor(d,m,p,h)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,o)}}])}(p(function e(){f(this,e)}));function hn(e){var t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(function(n){t[n]=e.getParameter(e[n])}),t}function mn(e){var t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(function(n){t[n]=e.getExtension(n)}),t}function gn(e){return null!==e&&("object"===x(e)&&e.constructor&&"HTMLImageElement"===e.constructor.name||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)}var yn=new Uint8Array([0,0,0,0]),vn=function(e){function t(e,n,r){var o;return f(this,t),v(o=a(this,t,[n,r]),"glw",void 0),v(o,"_nativeCtxTexture",null),v(o,"_w",0),v(o,"_h",0),o.glw=e,o}return u(t,e),p(t,[{key:"ctxTexture",get:function(){return"freed"===this.state?(this.load(),null):(ye(this._nativeCtxTexture),this._nativeCtxTexture)}},{key:"w",get:function(){return this._w}},{key:"h",get:function(){return this._h}},{key:"load",value:(o=i(n().m(function e(){var t,r,o,i,a,s,l=this;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if("loading"!==this.state&&"loaded"!==this.state){e.n=1;break}return e.a(2,Promise.resolve());case 1:if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),null!==this._nativeCtxTexture){e.n=2;break}throw this.state="failed",t=new Error("Could not create WebGL Texture"),this.textureSource.setState("failed",t),console.error("Could not create WebGL Texture"),t;case 2:return e.p=2,e.n=3,this.onLoadRequest();case 3:if(r=e.v,o=r.width,i=r.height,"freed"!==this.state){e.n=4;break}return e.a(2);case 4:this.state="loaded",this._w=o,this._h=i,this.textureSource.setState("loaded",{width:o,height:i}),queueMicrotask(function(){l.textureSource.freeTextureData()}),e.n=7;break;case 5:if(e.p=5,s=e.v,"freed"!==this.state){e.n=6;break}return e.a(2);case 6:throw this.state="failed",a=s instanceof Error?s:new Error(String(s)),this.textureSource.setState("failed",a),this.textureSource.freeTextureData(),console.error(s),a;case 7:return e.a(2)}},e,this,[[2,5]])})),function(){return o.apply(this,arguments)})},{key:"onLoadRequest",value:(r=i(n().m(function e(){var t,r,o,i,a,s,l,u,c,f,d,p,h,m,g;return n().w(function(e){for(;;)switch(e.n){case 0:if(t=this.glw,null!==(r=this.textureSource.textureData)&&null!==this._nativeCtxTexture){e.n=1;break}throw new Error("Texture data or native texture is null "+this.textureSource.type);case 1:return t.texImage2D(0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null),this.setTextureMemUse(yn.byteLength),o=0,i=0,t.activeTexture(0),a=r.data,s=t.RGBA,"undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap||a instanceof ImageData||gn(a)?(o=a.width,i=a.height,t.bindTexture(this._nativeCtxTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!r.premultiplyAlpha),t.texImage2D(0,s,s,t.UNSIGNED_BYTE,a),this.setTextureMemUse(i*o*4*1.1)):null===a?(o=0,i=0,t.bindTexture(this._nativeCtxTexture),t.texImage2D(0,s,1,1,0,s,t.UNSIGNED_BYTE,yn),this.setTextureMemUse(yn.byteLength)):"mipmaps"in a&&a.mipmaps?(u=a.mipmaps,c=a.width,f=void 0===c?0:c,d=a.height,p=void 0===d?0:d,h=a.type,m=a.glInternalFormat,g="ktx"===h?new DataView(null!==(l=u[0])&&void 0!==l?l:new ArrayBuffer(0)):u[0],t.bindTexture(this._nativeCtxTexture),t.compressedTexImage2D(0,m,f,p,0,g),t.texParameteri(t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_MIN_FILTER,t.LINEAR),this.setTextureMemUse(g.byteLength)):a&&a instanceof Uint8Array?(o=1,i=1,t.bindTexture(this._nativeCtxTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!r.premultiplyAlpha),t.texImage2D(0,s,o,i,0,s,t.UNSIGNED_BYTE,a),this.setTextureMemUse(o*i*4)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",r),e.a(2,{width:o,height:i})}},e,this)})),function(){return r.apply(this,arguments)})},{key:"free",value:function(){"freed"!==this.state&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,null!==this._nativeCtxTexture&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}},{key:"createNativeCtxTexture",value:function(){var e=this.glw,t=e.createTexture();return t?(e.activeTexture(0),e.bindTexture(t),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t):null}}]);var r,o}(an),bn=function(e){function t(e,n,r){return f(this,t),a(this,t,[e,n,r])}return u(t,e),p(t,[{key:"onLoadRequest",value:(r=i(n().m(function e(){var t,r,o;return n().w(function(e){for(;;)switch(e.n){case 0:if(ye(o=this.textureSource.textureData,"SubTexture must have texture data"),!(o.data instanceof Uint8Array)){e.n=1;break}return e.a(2,{width:1,height:1});case 1:return e.a(2,{width:(null===(t=o.data)||void 0===t?void 0:t.width)||0,height:(null===(r=o.data)||void 0===r?void 0:r.height)||0})}},e,this)})),function(){return r.apply(this,arguments)})}]);var r}(vn),xn=function(){return p(function e(t){f(this,e),v(this,"config",void 0),this.config=t},[{key:"getBuffer",value:function(e){var t;return null===(t=this.config.find(function(t){return t.attributes[e]}))||void 0===t?void 0:t.buffer}},{key:"getAttributeInfo",value:function(e){var t;return null===(t=this.config.find(function(t){return t.attributes[e]}))||void 0===t?void 0:t.attributes[e]}}])}();var wn=function(){return p(function e(t){var n=this;f(this,e),v(this,"gl",void 0),v(this,"activeTextureUnit",0),v(this,"texture2dUnits",void 0),v(this,"texture2dParams",new WeakMap),v(this,"scissorEnabled",void 0),v(this,"scissorX",void 0),v(this,"scissorY",void 0),v(this,"scissorWidth",void 0),v(this,"scissorHeight",void 0),v(this,"blendEnabled",void 0),v(this,"blendSrcRgb",void 0),v(this,"blendDstRgb",void 0),v(this,"blendSrcAlpha",void 0),v(this,"blendDstAlpha",void 0),v(this,"boundArrayBuffer",void 0),v(this,"boundElementArrayBuffer",void 0),v(this,"curProgram",void 0),v(this,"canvas",void 0),v(this,"MAX_RENDERBUFFER_SIZE",void 0),v(this,"MAX_TEXTURE_SIZE",void 0),v(this,"MAX_VIEWPORT_DIMS",void 0),v(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS",void 0),v(this,"MAX_TEXTURE_IMAGE_UNITS",void 0),v(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS",void 0),v(this,"MAX_VERTEX_ATTRIBS",void 0),v(this,"MAX_VARYING_VECTORS",void 0),v(this,"MAX_VERTEX_UNIFORM_VECTORS",void 0),v(this,"MAX_FRAGMENT_UNIFORM_VECTORS",void 0),v(this,"TEXTURE_MAG_FILTER",void 0),v(this,"TEXTURE_MIN_FILTER",void 0),v(this,"TEXTURE_WRAP_S",void 0),v(this,"TEXTURE_WRAP_T",void 0),v(this,"LINEAR",void 0),v(this,"CLAMP_TO_EDGE",void 0),v(this,"RGB",void 0),v(this,"RGBA",void 0),v(this,"UNSIGNED_BYTE",void 0),v(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL",void 0),v(this,"UNPACK_FLIP_Y_WEBGL",void 0),v(this,"FLOAT",void 0),v(this,"TRIANGLES",void 0),v(this,"UNSIGNED_SHORT",void 0),v(this,"ONE",void 0),v(this,"ONE_MINUS_SRC_ALPHA",void 0),v(this,"VERTEX_SHADER",void 0),v(this,"FRAGMENT_SHADER",void 0),v(this,"STATIC_DRAW",void 0),v(this,"COMPILE_STATUS",void 0),v(this,"LINK_STATUS",void 0),v(this,"DYNAMIC_DRAW",void 0),v(this,"COLOR_ATTACHMENT0",void 0),v(this,"INVALID_ENUM",void 0),v(this,"INVALID_OPERATION",void 0),this.gl=t,this.activeTextureUnit=t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0;var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(r).fill(void 0).map(function(e,r){return n.activeTexture(r),t.getParameter(t.TEXTURE_BINDING_2D)}),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=t.isEnabled(t.SCISSOR_TEST);var o=t.getParameter(t.SCISSOR_BOX);this.scissorX=o[0],this.scissorY=o[1],this.scissorWidth=o[2],this.scissorHeight=o[3],this.blendEnabled=t.isEnabled(t.BLEND),this.blendSrcRgb=t.getParameter(t.BLEND_SRC_RGB),this.blendDstRgb=t.getParameter(t.BLEND_DST_RGB),this.blendSrcAlpha=t.getParameter(t.BLEND_SRC_ALPHA),this.blendDstAlpha=t.getParameter(t.BLEND_DST_ALPHA),this.boundArrayBuffer=t.getParameter(t.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=t.getParameter(t.CURRENT_PROGRAM),this.canvas=t.canvas,this.MAX_RENDERBUFFER_SIZE=t.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=t.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=t.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=t.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=t.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=t.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=t.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=t.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=t.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=t.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=t.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=t.TEXTURE_WRAP_T,this.LINEAR=t.LINEAR,this.CLAMP_TO_EDGE=t.CLAMP_TO_EDGE,this.RGB=t.RGB,this.RGBA=t.RGBA,this.UNSIGNED_BYTE=t.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=t.UNPACK_FLIP_Y_WEBGL,this.FLOAT=t.FLOAT,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.ONE=t.ONE,this.ONE_MINUS_SRC_ALPHA=t.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.VERTEX_SHADER=t.VERTEX_SHADER,this.FRAGMENT_SHADER=t.FRAGMENT_SHADER,this.STATIC_DRAW=t.STATIC_DRAW,this.COMPILE_STATUS=t.COMPILE_STATUS,this.LINK_STATUS=t.LINK_STATUS,this.DYNAMIC_DRAW=t.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=t.COLOR_ATTACHMENT0,this.INVALID_ENUM=t.INVALID_ENUM,this.INVALID_OPERATION=t.INVALID_OPERATION},[{key:"isWebGl2",value:function(){return e=this.gl,self.WebGL2RenderingContext&&e instanceof self.WebGL2RenderingContext;var e}},{key:"activeTexture",value:function(e){var t=this.gl;this.activeTextureUnit!==e&&(t.activeTexture(e+t.TEXTURE0),this.activeTextureUnit=e)}},{key:"bindTexture",value:function(e){var t=this.gl,n=this.activeTextureUnit,r=this.texture2dUnits;r[n]!==e&&(r[n]=e,t.bindTexture(this.gl.TEXTURE_2D,e))}},{key:"_getActiveTexture",value:function(){var e=this.activeTextureUnit;return this.texture2dUnits[e]}},{key:"texParameteri",value:function(e,t){var n=this.gl,r=this.texture2dParams,o=this._getActiveTexture();if(!o)throw new Error("No active texture");var i=r.get(o);i||(i={},r.set(o,i)),i[e]!==t&&(i[e]=t,n.texParameteri(n.TEXTURE_2D,e,t))}},{key:"texImage2D",value:function(e,t,n,r,o,i,a,s){var l=this.gl;i?l.texImage2D(l.TEXTURE_2D,e,t,n,r,o,i,a,s):l.texImage2D(l.TEXTURE_2D,e,t,n,r,o)}},{key:"compressedTexImage2D",value:function(e,t,n,r,o,i){var a=this.gl;a.compressedTexImage2D(a.TEXTURE_2D,e,t,n,r,o,i)}},{key:"pixelStorei",value:function(e,t){this.gl.pixelStorei(e,t)}},{key:"generateMipmap",value:function(){var e=this.gl;e.generateMipmap(e.TEXTURE_2D)}},{key:"createTexture",value:function(){return this.gl.createTexture()}},{key:"deleteTexture",value:function(e){var t=this.gl;e&&this.texture2dParams.delete(e),t.deleteTexture(e)}},{key:"deleteFramebuffer",value:function(e){this.gl.deleteFramebuffer(e)}},{key:"viewport",value:function(e,t,n,r){this.gl.viewport(e,t,n,r)}},{key:"clearColor",value:function(e,t,n,r){this.gl.clearColor(e,t,n,r)}},{key:"setScissorTest",value:function(e){var t=this.gl;e!==this.scissorEnabled&&(e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.scissorEnabled=e)}},{key:"scissor",value:function(e,t,n,r){var o=this.gl,i=this.scissorX,a=this.scissorY,s=this.scissorWidth,l=this.scissorHeight;e===i&&t===a&&n===s&&r===l||(o.scissor(e,t,n,r),this.scissorX=e,this.scissorY=t,this.scissorWidth=n,this.scissorHeight=r)}},{key:"setBlend",value:function(e){var t=this.gl;e!==this.blendEnabled&&(e?t.enable(t.BLEND):t.disable(t.BLEND),this.blendEnabled=e)}},{key:"blendFunc",value:function(e,t){var n=this.gl,r=this.blendSrcRgb,o=this.blendDstRgb,i=this.blendSrcAlpha,a=this.blendDstAlpha;e===r&&t===o&&e===i&&t===a||(n.blendFunc(e,t),this.blendSrcRgb=e,this.blendDstRgb=t,this.blendSrcAlpha=e,this.blendDstAlpha=t)}},{key:"createBuffer",value:function(){return this.gl.createBuffer()}},{key:"createFramebuffer",value:function(){return this.gl.createFramebuffer()}},{key:"bindFramebuffer",value:function(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e)}},{key:"framebufferTexture2D",value:function(e,t,n){var r=this.gl;r.framebufferTexture2D(r.FRAMEBUFFER,e,r.TEXTURE_2D,t,n)}},{key:"clear",value:function(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT)}},{key:"arrayBufferData",value:function(e,t,n){var r=this.gl;this.boundArrayBuffer!==e&&(r.bindBuffer(r.ARRAY_BUFFER,e),this.boundArrayBuffer=e),r.bufferData(r.ARRAY_BUFFER,t,n)}},{key:"elementArrayBufferData",value:function(e,t,n){var r=this.gl;this.boundElementArrayBuffer!==e&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),this.boundElementArrayBuffer=e),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t,n)}},{key:"vertexAttribPointer",value:function(e,t,n,r,o,i,a){var s=this.gl;this.boundArrayBuffer!==e&&(s.bindBuffer(s.ARRAY_BUFFER,e),this.boundArrayBuffer=e),s.vertexAttribPointer(t,n,r,o,i,a)}},{key:"useProgram",value:function(e){var t=this.gl;this.curProgram!==e&&(t.useProgram(e),this.curProgram=e)}},{key:"uniform1f",value:function(e,t){this.gl.uniform1f(e,t)}},{key:"uniform1fv",value:function(e,t){this.gl.uniform1fv(e,t)}},{key:"uniform1i",value:function(e,t){this.gl.uniform1i(e,t)}},{key:"uniform1iv",value:function(e,t){this.gl.uniform1iv(e,t)}},{key:"uniform2f",value:function(e,t,n){this.gl.uniform2f(e,t,n)}},{key:"uniform2fv",value:function(e,t){this.gl.uniform2fv(e,t)}},{key:"uniform2i",value:function(e,t,n){this.gl.uniform2i(e,t,n)}},{key:"uniform2iv",value:function(e,t){this.gl.uniform2iv(e,t)}},{key:"uniform3f",value:function(e,t,n,r){this.gl.uniform3f(e,t,n,r)}},{key:"uniform3fv",value:function(e,t){this.gl.uniform3fv(e,t)}},{key:"uniform3i",value:function(e,t,n,r){this.gl.uniform3i(e,t,n,r)}},{key:"uniform3iv",value:function(e,t){this.gl.uniform3iv(e,t)}},{key:"uniform4f",value:function(e,t,n,r,o){this.gl.uniform4f(e,t,n,r,o)}},{key:"uniform4fv",value:function(e,t){this.gl.uniform4fv(e,t)}},{key:"uniform4i",value:function(e,t,n,r,o){this.gl.uniform4i(e,t,n,r,o)}},{key:"uniform4iv",value:function(e,t){this.gl.uniform4iv(e,t)}},{key:"uniformMatrix2fv",value:function(e,t){this.gl.uniformMatrix2fv(e,!1,t)}},{key:"uniformMatrix3fv",value:function(e,t){this.gl.uniformMatrix3fv(e,!1,t)}},{key:"uniformMatrix4fv",value:function(e,t){this.gl.uniformMatrix4fv(e,!1,t)}},{key:"getParameter",value:function(e){return this.gl.getParameter(e)}},{key:"drawElements",value:function(e,t,n,r){this.gl.drawElements(e,t,n,r)}},{key:"getExtension",value:function(e){return this.gl.getExtension(e)}},{key:"getError",value:function(){return this.gl.getError()}},{key:"createVertexArray",value:function(){var e=this.gl;return ye(e instanceof WebGL2RenderingContext),e.createVertexArray()}},{key:"bindVertexArray",value:function(e){var t=this.gl;ye(t instanceof WebGL2RenderingContext),t.bindVertexArray(e)}},{key:"getAttribLocation",value:function(e,t){return this.gl.getAttribLocation(e,t)}},{key:"getUniformLocation",value:function(e,t){return this.gl.getUniformLocation(e,t)}},{key:"enableVertexAttribArray",value:function(e){this.gl.enableVertexAttribArray(e)}},{key:"disableVertexAttribArray",value:function(e){this.gl.disableVertexAttribArray(e)}},{key:"createShader",value:function(e){return this.gl.createShader(e)}},{key:"compileShader",value:function(e){this.gl.compileShader(e)}},{key:"attachShader",value:function(e,t){this.gl.attachShader(e,t)}},{key:"linkProgram",value:function(e){this.gl.linkProgram(e)}},{key:"deleteProgram",value:function(e){this.gl.deleteProgram(e)}},{key:"getShaderParameter",value:function(e,t){return this.gl.getShaderParameter(e,t)}},{key:"getShaderInfoLog",value:function(e){return this.gl.getShaderInfoLog(e)}},{key:"createProgram",value:function(){return this.gl.createProgram()}},{key:"getProgramParameter",value:function(e,t){return this.gl.getProgramParameter(e,t)}},{key:"getProgramInfoLog",value:function(e){return this.gl.getProgramInfoLog(e)}},{key:"shaderSource",value:function(e,t){this.gl.shaderSource(e,t)}},{key:"deleteShader",value:function(e){this.gl.deleteShader(e)}}])}(),Sn=function(t){function r(e,t,n){var o;return f(this,r),v(o=a(this,r,[e,t,n]),"framebuffer",null),o}return u(r,t),p(r,[{key:"onLoadRequest",value:(o=i(n().m(function e(){var t,r,o,i,a;return n().w(function(e){for(;;)switch(e.n){case 0:if(t=this.glw,r=this._nativeCtxTexture=this.createNativeCtxTexture()){e.n=1;break}throw new Error("Failed to create native texture for RenderTexture");case 1:return o=this.textureSource,i=o.width,a=o.height,this.framebuffer=t.createFramebuffer(),t.texImage2D(0,t.RGBA,i,a,0,t.RGBA,t.UNSIGNED_BYTE,null),this.setTextureMemUse(i*a*4),t.bindFramebuffer(this.framebuffer),t.framebufferTexture2D(t.COLOR_ATTACHMENT0,r,0),t.bindFramebuffer(null),e.a(2,{width:i,height:a})}},e,this)})),function(){return o.apply(this,arguments)})},{key:"free",value:function(){e(r,"free",this,3)([]),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}]);var o}(vn),Tn=function(e){function t(e){var n;f(this,t),v(n=a(this,t,[e]),"glw",void 0),v(n,"system",void 0),v(n,"quadBuffer",void 0),v(n,"fQuadBuffer",void 0),v(n,"uiQuadBuffer",void 0),v(n,"renderOps",[]),v(n,"curBufferIdx",0),v(n,"curRenderOp",null),v(n,"rttNodes",[]),v(n,"activeRttNode",null),v(n,"defShaderCtrl",void 0),v(n,"defaultShader",void 0),v(n,"quadBufferCollection",void 0),v(n,"clearColor",{raw:0,normalized:[0,0,0,0]}),v(n,"quadBufferUsage",0),v(n,"numQuadsRendered",0),v(n,"renderToTextureActive",!1),n.quadBuffer=new ArrayBuffer(n.stage.options.quadBufferSize),n.fQuadBuffer=new Float32Array(n.quadBuffer),n.uiQuadBuffer=new Uint32Array(n.quadBuffer),n.mode="webgl";var r=e.canvas,o=e.clearColor,i=e.bufferMemory,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},o=e.getContext(t?"webgl2":"webgl",r)||e.getContext("experimental-webgl",r);if(!o)throw new Error("Unable to create WebGL context");return n?new Proxy(o,{get:function(e,t){var r=e[t];return"function"==typeof r?(n.increment(String(t)),r.bind(e)):r}}):o}(r,e.forceWebGL2,e.contextSpy),l=n.glw=new wn(s);l.viewport(0,0,r.width,r.height),n.updateClearColor(o),l.setBlend(!0),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),function(e,t){for(var n=~~(t/80),r=new Uint16Array(6*n),o=0,i=0;o<n;o+=6,i+=4)r[o]=i,r[o+1]=i+1,r[o+2]=i+2,r[o+3]=i+2,r[o+4]=i+1,r[o+5]=i+3;var a=e.createBuffer();e.elementArrayBufferData(a,r,e.STATIC_DRAW)}(l,i),n.system={parameters:hn(n.glw),extensions:mn(n.glw)},n.shManager.renderer=n,n.defShaderCtrl=n.shManager.loadShader("DefaultShader"),n.defaultShader=n.defShaderCtrl.shader;var u=l.createBuffer();ye(u);var c=6*Float32Array.BYTES_PER_ELEMENT;return n.quadBufferCollection=new xn([{buffer:u,attributes:{a_position:{name:"a_position",size:2,type:l.FLOAT,normalized:!1,stride:c,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:l.FLOAT,normalized:!1,stride:c,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:l.UNSIGNED_BYTE,normalized:!0,stride:c,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:l.FLOAT,normalized:!1,stride:c,offset:5*Float32Array.BYTES_PER_ELEMENT}}}]),n}return u(t,e),p(t,[{key:"reset",value:function(){var e=this.glw;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}},{key:"getShaderManager",value:function(){return this.shManager}},{key:"createCtxTexture",value:function(e){return e instanceof mt?new bn(this.glw,this.txMemManager,e):e instanceof gt?new Sn(this.glw,this.txMemManager,e):new vn(this.glw,this.txMemManager,e)}},{key:"addQuad",value:function(e){var t=this.fQuadBuffer,n=this.uiQuadBuffer,r=e.texture;if(ye(null!==r,"Texture is required"),null!==e.shaderProps){if(1==Se(e.shaderProps,"$dimensions")){var o=e.shaderProps.$dimensions;o.width=e.width,o.height=e.height}!0===Se(e.shaderProps,"$alpha")&&(e.shaderProps.$alpha=e.alpha)}var i=this.curBufferIdx,a=(this.curRenderOp,{width:-1,height:-1});a.width=e.width,a.height=e.height;var s=e.shader||this.defaultShader;ye(void 0!==s.getUniformLocation,"Invalid WebGL shader"),!1===this.reuseRenderOp(e)&&(this.newRenderOp(s,e.shaderProps,e.alpha,a,e.clippingRect,i,e.rtt,e.parentHasRenderTexture,e.framebufferDimensions),ye(this.curRenderOp));var l=0,u=0,c=1,f=1;if(r.type===Ce.subTexture){var d=r.props,p=d.x,h=d.y,m=d.width,g=d.height,y=r.parentTexture.dimensions||{width:0,height:0},v=y.width,b=void 0===v?0:v,x=y.height,w=void 0===x?0:x;c=(l=p/b)+m/b,f=(u=h/w)+g/w,r=r.parentTexture}if(r.type===Ce.image&&null!==e.textureOptions&&void 0!==e.textureOptions.resizeMode&&null!==r.dimensions){var S=e.textureOptions.resizeMode,T=r.dimensions,k=T.width,C=T.height;if("cover"===S.type){var A=e.width/k,E=e.height/C,I=Math.max(A,E),M=1/I;if(I&&A&&A<I){var R,_=M*e.width;c=(l=(1-_/k)*(null!==(R=S.clipX)&&void 0!==R?R:.5))+_/k}if(I&&E&&E<I){var L,P=M*e.height;f=(u=(1-P/C)*(null!==(L=S.clipY)&&void 0!==L?L:.5))+P/C}}}var D=0;if(null!==e.textureOptions){if(!0===e.textureOptions.flipX){var O=[c,l];l=O[0],c=O[1]}D=+(e.textureOptions.flipY||!1)}if(D^+(r.type===Ce.renderToTexture)){var N=[f,u];u=N[0],f=N[1]}var U,B=r.ctxTexture;void 0===B&&(B=null===(U=this.stage.defaultTexture)||void 0===U?void 0:U.ctxTexture,console.warn("WebGL Renderer: Texture does not have a ctxTexture, using default texture instead"));var j=this.addTexture(B,i);if(ye(null!==this.curRenderOp),e.renderCoords)t[i++]=e.renderCoords.x1,t[i++]=e.renderCoords.y1,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=j,t[i++]=e.renderCoords.x2,t[i++]=e.renderCoords.y2,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=j,t[i++]=e.renderCoords.x4,t[i++]=e.renderCoords.y4,t[i++]=l,t[i++]=f,n[i++]=e.colorBl,t[i++]=j,t[i++]=e.renderCoords.x3,t[i++]=e.renderCoords.y3,t[i++]=c,t[i++]=f,n[i++]=e.colorBr,t[i++]=j;else if(0!==e.tb||0!==e.tc)t[i++]=e.tx,t[i++]=e.ty,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=j,t[i++]=e.tx+e.width*e.ta,t[i++]=e.ty+e.width*e.tc,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=j,t[i++]=e.tx+e.height*e.tb,t[i++]=e.ty+e.height*e.td,t[i++]=l,t[i++]=f,n[i++]=e.colorBl,t[i++]=j,t[i++]=e.tx+e.width*e.ta+e.height*e.tb,t[i++]=e.ty+e.width*e.tc+e.height*e.td,t[i++]=c,t[i++]=f,n[i++]=e.colorBr,t[i++]=j;else{var F=e.tx+e.width*e.ta,z=e.ty+e.height*e.td;t[i++]=e.tx,t[i++]=e.ty,t[i++]=l,t[i++]=u,n[i++]=e.colorTl,t[i++]=j,t[i++]=F,t[i++]=e.ty,t[i++]=c,t[i++]=u,n[i++]=e.colorTr,t[i++]=j,t[i++]=e.tx,t[i++]=z,t[i++]=l,t[i++]=f,n[i++]=e.colorBl,t[i++]=j,t[i++]=F,t[i++]=z,t[i++]=c,t[i++]=f,n[i++]=e.colorBr,t[i++]=j}this.curRenderOp.length+=24,this.curRenderOp.numQuads++,this.curBufferIdx=i}},{key:"newRenderOp",value:function(e,t,n,r,o,i,a,s,l){var u=new pn(this.glw,this.options,this.quadBufferCollection,e,t,n,o,r,i,0,a,s,l);this.curRenderOp=u,this.renderOps.push(u)}},{key:"addTexture",value:function(e,t,n){var r=this.curRenderOp;ye(r);var o=r.addTexture(e);if(4294967295===o){if(n)throw new Error("Unable to add texture to render op");return this.newRenderOp(r.shader,r.shaderProps,r.alpha,r.dimensions,r.clippingRect,t),this.addTexture(e,t,!0)}return o}},{key:"reuseRenderOp",value:function(e){var t,n,r,o=e.shader,i=e.shaderProps,a=e.parentHasRenderTexture,s=e.rtt,l=e.clippingRect,u=o||this.defaultShader;return(null===(t=this.curRenderOp)||void 0===t?void 0:t.shader)===u&&(!1!=((n=this.curRenderOp.clippingRect)===(r=l)||null!==n&&null!==r&&n.x===r.x&&n.y===r.y&&n.width===r.width&&n.height===r.height)&&(void 0===a&&void 0===s&&(this.curRenderOp.shader===this.defaultShader||null!==i&&!1!==this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,i))))}},{key:"addRenderOp",value:function(e){this.renderOps.push(e),this.curRenderOp=null}},{key:"render",value:function(){var e=this.glw,t=this.quadBuffer,n=new Float32Array(t,0,this.curBufferIdx),r=this.quadBufferCollection.getBuffer("a_position")||null;e.arrayBufferData(r,n,e.STATIC_DRAW);for(var o=0,i=this.renderOps.length;o<i;o++)this.renderOps[o].draw();this.quadBufferUsage=this.curBufferIdx*n.BYTES_PER_ELEMENT;var a=6*n.BYTES_PER_ELEMENT*4;this.numQuadsRendered=this.quadBufferUsage/a}},{key:"getQuadCount",value:function(){return this.numQuadsRendered}},{key:"renderToTexture",value:function(e){for(var t=0;t<this.rttNodes.length;t++)if(this.rttNodes[t]===e)return;this.insertRTTNodeInOrder(e)}},{key:"insertRTTNodeInOrder",value:function(e){for(var t=this.rttNodes.length,n=e;n&&n.parent;){var r=this.rttNodes.indexOf(n.parent);if(-1!==r){t=r;break}n=n.parent}var o=this.findMaxChildRTTIndex(e);-1!==o&&(t=Math.max(t,o+1)),this.rttNodes.splice(t,0,e)}},{key:"findMaxChildRTTIndex",value:function(e){var t=this,n=-1,r=function(e){var o=t.rttNodes.indexOf(e);-1!==o&&(n=Math.max(n,o));var i,a=w(e.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;r(s)}}catch(l){a.e(l)}finally{a.f()}};return r(e),n}},{key:"renderRTTNodes",value:function(){for(var e=this.glw,t=(this.stage.txManager,0);t<this.rttNodes.length;t++){var n=this.rttNodes[t];if(void 0!==n&&!1!==n.hasRTTupdates&&(0!==n.worldAlpha&&(!0!==n.strictBounds||n.renderState!==Je.OutOfBounds)&&null!==n.texture&&"loaded"===n.texture.state)){this.activeRttNode=n,ye(n.texture,"RTT node missing texture");var r=n.texture.ctxTexture;ye(r instanceof Sn),this.renderToTextureActive=!0,e.bindFramebuffer(r.framebuffer),e.viewport(0,0,r.w,r.h),e.clearColor(0,0,0,0),e.clear();for(var o=0;o<n.children.length;o++){var i=n.children[o];void 0!==i&&(this.stage.addQuads(i),i.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,n.hasRTTupdates=!1}}var a=this.clearColor.normalized;e.clearColor(a[0],a[1],a[2],a[3]),e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}},{key:"removeRTTNode",value:function(e){var t=this.rttNodes.indexOf(e);-1!==t&&this.rttNodes.splice(t,1)}},{key:"getBufferInfo",value:function(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}},{key:"getDefShaderCtr",value:function(){return this.defShaderCtrl}},{key:"updateClearColor",value:function(e){if(this.clearColor.raw!==e){var t=this.glw,n=Me(e);t.clearColor(n[0],n[1],n[2],n[3]),this.clearColor={raw:e,normalized:n},t.clear()}}}])}(sn),kn=10,Cn=function(e){function t(e,n){var r;f(this,t),v(r=a(this,t),"data",void 0),v(r,"glyphMap",void 0),v(r,"kernings",void 0),r.data=e,r.glyphMap=n;var o=r.kernings={};return e.kernings.forEach(function(e){var t=e.second;(o[t]=o[t]||{})[e.first]=e.amount}),r.kernings=o,r}return u(t,e),p(t,[{key:"shapeText",value:n().m(function e(t,r){var o,i,a,s,l,u;return n().w(function(e){for(;;)switch(e.n){case 0:i=void 0;case 1:if(!(o=r.peek())||o.done){e.n=5;break}if(a=o.value,s=this.glyphMap.get(a),r.next(),void 0===s){e.n=3;break}return u=void 0!==i?((null===(l=this.kernings[s.id])||void 0===l?void 0:l[i])||0)+t.letterSpacing:0,i=s.id,e.n=2,{mapped:!0,glyphId:s.id,codepoint:a,cluster:r.lastIndex,xAdvance:s.xadvance+u,yAdvance:0,xOffset:s.xoffset+u,yOffset:s.yoffset,xBearing:0,yBearing:0,width:s.width,height:s.height};case 2:e.n=4;break;case 3:return a===kn&&(i=void 0),e.n=4,{mapped:!1,codepoint:a,cluster:r.lastIndex};case 4:e.n=1;break;case 5:return e.a(2)}},e,this)})}])}(p(function e(){f(this,e)})),An=function(e){function t(e,n){var r;f(this,t),v(r=a(this,t,[n]),"type",void 0),v(r,"texture",void 0),v(r,"maxCharHeight",0),v(r,"shaper",void 0),v(r,"glyphMap",new Map),v(r,"data",void 0);var o=n.atlasUrl,i=n.atlasDataUrl,s=n.stage;return r.type=e,ye(s.renderer instanceof Tn,"SDF Font Faces can only be used with the WebGL Renderer"),r.texture=s.txManager.createTexture("ImageTexture",{src:o,premultiplyAlpha:!1}),s.txManager.loadTexture(r.texture,!0),r.texture.preventCleanup=!0,r.texture.on("loaded",function(){r.checkLoaded(),s.requestRender()}),dt(i).then(function(e){r.data=JSON.parse(e),ye(r.data);var t=0;if(r.data.chars.forEach(function(e){r.glyphMap.set(e.id,e);var n=e.yoffset+e.height;n>t&&(t=n)}),r.maxCharHeight=t,r.shaper=new Cn(r.data,r.glyphMap),!r.metrics){var n;if(null===(n=r.data)||void 0===n||!n.lightningMetrics)throw new Error("Font metrics not found in ".concat(r.type," font ").concat(r.fontFamily,". ")+"Make sure you are using the latest version of the Lightning 3 `msdf-generator` tool to generate your SDF fonts.");var o=r.data.lightningMetrics,i=o.ascender,a=o.descender,s=o.lineGap,l=o.unitsPerEm;r.metrics={ascender:i/l,descender:a/l,lineGap:s/l}}r.checkLoaded()}).catch(console.error),r}return u(t,e),p(t,[{key:"getAtlasEntry",value:function(e){var t=this.glyphMap.get(e);if(void 0===t)throw new Error("Glyph ".concat(e," not found in font ").concat(this.fontFamily));return{x:t.x,y:t.y,width:t.width,height:t.height}}},{key:"checkLoaded",value:function(){this.loaded||"loaded"===this.texture.state&&this.data&&(this.loaded=!0,this.emit("loaded"))}}])}(fn);var En=function(){return p(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),v(this,"iterator",void 0),v(this,"peekBuffer",[]),v(this,"_lastIndex",void 0),this.iterator=t,this.iterator=t,this._lastIndex=n-1,this.peekBuffer=[]},[{key:"next",value:function(){var e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}},{key:"peek",value:function(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var e=this.iterator.next();return this.peekBuffer.push(e),e}},{key:"lastIndex",get:function(){return this._lastIndex}}])}();function In(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n().m(function r(){var o,i;return n().w(function(n){for(;;)switch(n.n){case 0:o=t;case 1:if(!(o<e.length)){n.n=4;break}if(void 0!==(i=e.codePointAt(o))){n.n=2;break}throw new Error("Invalid Unicode code point");case 2:return n.n=3,i;case 3:o+=i<=65535?1:2,n.n=1;break;case 4:return n.a(2)}},r)})()}function Mn(e,t,n,r,o,i,a,s,l,u,c,f,d,p,h,m,g,y,v){ye(h,"Font face must be loaded"),ye(h.loaded,"Font face must be loaded"),ye(h.data,"Font face must be loaded"),ye(h.shaper,"Font face must be loaded");var b=s/h.data.info.size,x=l/b,S=i/b,T=u/b,k=d[e],C=(null==k?void 0:k.codepointIndex)||0,A=(null==k?void 0:k.maxX)||0,E=(null==k?void 0:k.maxY)||0,I=t,M=n,R=0,_={codepointIndex:-1,bufferOffset:-1,xStart:-1},L=h.shaper,P={letterSpacing:T};r.endsWith(" ")&&(r+=" ");for(var D,O=L.shapeText(P,new En(In(r,C),C)),N=-1,U=[],B=a/b,j=function(e,t,n){var r,o=0,i=w(n.shapeText(t,new En(In(e,0),0)));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.mapped&&8203!==a.codepoint&&(o+=a.xAdvance)}}catch(s){i.e(s)}finally{i.f()}return o}(y,P,L),F=!0;F;){for(var z=(0===v||e+1<v)&&("both"!==f||g||M+x+h.maxCharHeight<=B),V=z?S:S-j,H=0,G=M+h.maxCharHeight>=p.y1,q=M<=p.y2,W=G&&q;(D=O.next())&&!D.done;){var K=D.value;if(e===d.length)d.push({codepointIndex:K.cluster,maxY:E,maxX:A});else if(e>d.length)throw new Error("Unexpected lineCache length");if(32===K.codepoint||10===K.codepoint||8203===K.codepoint?-1!==_.codepointIndex&&(_.codepointIndex=-1,H=I):-1===_.codepointIndex&&(_.codepointIndex=K.cluster,_.bufferOffset=R,_.xStart=H),K.mapped){var X=I+K.xOffset+K.width;if("none"!==f&&X>=V&&-1!==_.codepointIndex&&_.xStart>0){if(z){O=L.shapeText(P,new En(In(r,_.codepointIndex),_.codepointIndex)),R=_.bufferOffset;break}O=L.shapeText(P,new En(In(y,0),0)),I=_.xStart,R=_.bufferOffset,f="none"}else{var $=I+K.xOffset,Y=M+K.yOffset;if(W){-1===N&&(N=R);var J=h.getAtlasEntry(K.glyphId),Q=J.x/h.data.common.scaleW,Z=J.y/h.data.common.scaleH,ee=J.width/h.data.common.scaleW,te=J.height/h.data.common.scaleH;c[R++]=$,c[R++]=Y,c[R++]=Q,c[R++]=Z,c[R++]=$+K.width,c[R++]=Y,c[R++]=Q+ee,c[R++]=Z,c[R++]=$,c[R++]=Y+K.height,c[R++]=Q,c[R++]=Z+te,c[R++]=$+K.width,c[R++]=Y+K.height,c[R++]=Q+ee,c[R++]=Z+te}E=Math.max(E,Y+K.height),A=Math.max(A,$+K.width),I+=K.xAdvance}}else if(10===K.codepoint){if(z)break;O=L.shapeText(P,new En(In(y,0),0)),f="none"}}-1!==N&&(U.push({bufferStart:N,bufferEnd:R}),N=-1),I=0,M+=x,e++,_.codepointIndex=-1,H=0,!m&&"both"===f&&M>p.y2||D&&D.done?F=!1:z||(F=!1)}if("center"===o)for(var ne="none"===f?A:S,re=0;re<U.length;re++)for(var oe=U[re],ie=(ne-(c[oe.bufferEnd-4]-c[oe.bufferStart]))/2,ae=oe.bufferStart;ae<oe.bufferEnd;ae+=4)c[ae]+=ie;else if("right"===o)for(var se="none"===f?A:S,le=0;le<U.length;le++)for(var ue=U[le],ce=se-(ue.bufferEnd===ue.bufferStart?0:c[ue.bufferEnd-4]-c[ue.bufferStart]),fe=ue.bufferStart;fe<ue.bufferEnd;fe+=4)c[fe]+=ce;return ye(D),{bufferNumFloats:R,bufferNumQuads:R/16,layoutNumCharacters:D.done?r.length-C:D.value.cluster-C+1,fullyProcessed:!!D.done,maxX:A,maxY:E,numLines:d.length}}function Rn(e,t,n,r,o,i,a,s){var l,u,c,f=e.screen,d=e.sdf;if((c=a).x1<c.x2&&c.y1<c.y2){var p=a.x1-t,h=p+(a.x2-a.x1),m=a.y1-n+r,g=(l=m-i,u=o||1,Math.floor(l/u)*u),y=function(e,t){return Math.ceil(e/t)*t}(m+(a.y2-a.y1)+i,o||1);f.x1=p,f.y1=g,f.x2=h,f.y2=y,d.x1=p/s,d.y1=g/s,d.x2=h/s,d.y2=y/s,e.numLines=Math.ceil((y-g)/o),e.firstLineIdx=o?Math.floor(g/o):0}else f.x1=0,f.y1=0,f.x2=0,f.y2=0,d.x1=0,d.y1=0,d.x2=0,d.y2=0,e.numLines=0,e.firstLineIdx=0;e.valid=!0}function _n(e,t){return t*(e.ascender-e.descender+e.lineGap)}var Ln={x:0,y:0,width:0,height:0},Pn=function(t){function n(e){var t;return f(this,n),v(t=a(this,n,[e]),"ssdfFontFamilies",{}),v(t,"msdfFontFamilies",{}),v(t,"fontFamilyArray",[t.ssdfFontFamilies,t.msdfFontFamilies]),v(t,"sdfShader",void 0),v(t,"rendererBounds",void 0),v(t,"type","sdf"),t.sdfShader=t.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,t.rendererBounds={x1:0,y1:0,x2:t.stage.options.appWidth,y2:t.stage.options.appHeight},t}return u(n,t),p(n,[{key:"getPropertySetters",value:function(){var e=this;return{fontFamily:function(t,n){t.props.fontFamily=n,e.releaseFontFace(t),e.invalidateLayoutCache(t)},fontWeight:function(t,n){t.props.fontWeight=n,e.releaseFontFace(t),e.invalidateLayoutCache(t)},fontStyle:function(t,n){t.props.fontStyle=n,e.releaseFontFace(t),e.invalidateLayoutCache(t)},fontStretch:function(t,n){t.props.fontStretch=n,e.releaseFontFace(t),e.invalidateLayoutCache(t)},fontSize:function(t,n){t.props.fontSize=n,e.invalidateLayoutCache(t)},text:function(t,n){t.props.text=n,e.invalidateLayoutCache(t)},textAlign:function(t,n){t.props.textAlign=n,e.invalidateLayoutCache(t)},color:function(e,t){e.props.color=t},x:function(t,n){t.props.x=n,t.elementBounds.valid&&(e.setElementBoundsX(t),!t.renderWindow.valid&&De(t.elementBounds,e.rendererBounds)&&e.scheduleUpdateState(t))},y:function(t,n){t.props.y=n,t.elementBounds.valid&&(e.setElementBoundsY(t),!t.renderWindow.valid&&De(t.elementBounds,e.rendererBounds)&&e.scheduleUpdateState(t))},contain:function(t,n){t.props.contain=n,e.invalidateLayoutCache(t)},width:function(t,n){t.props.width=n,"none"!==t.props.contain&&e.invalidateLayoutCache(t)},height:function(t,n){t.props.height=n,"both"===t.props.contain&&e.invalidateLayoutCache(t)},offsetY:function(t,n){t.props.offsetY=n,e.invalidateLayoutCache(t)},scrollable:function(t,n){t.props.scrollable=n,e.invalidateLayoutCache(t)},scrollY:function(t,n){t.props.scrollY=n,e.scheduleUpdateState(t)},letterSpacing:function(t,n){t.props.letterSpacing=n,e.invalidateLayoutCache(t)},lineHeight:function(t,n){t.props.lineHeight=n,t.resLineHeight=void 0,e.invalidateLayoutCache(t)},maxLines:function(t,n){t.props.maxLines=n,e.invalidateLayoutCache(t)},textBaseline:function(t,n){t.props.textBaseline=n,e.invalidateLayoutCache(t)},verticalAlign:function(t,n){t.props.verticalAlign=n,e.invalidateLayoutCache(t)},overflowSuffix:function(t,n){t.props.overflowSuffix=n,e.invalidateLayoutCache(t)},debug:function(e,t){e.props.debug=t}}}},{key:"canRenderFont",value:function(e){var t=e.fontFamily;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}},{key:"isFontFaceSupported",value:function(e){return e instanceof An}},{key:"addFontFace",value:function(e){ye(e instanceof An);var t=e.fontFamily,n="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(n){var r=n[t];r||(r=new Set,n[t]=r),r.add(e)}else console.warn("Invalid font face type: ".concat(e.type))}},{key:"createState",value:function(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new Ae,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}},{key:"updateState",value:function(e){var t=this,n=e.trFontFace,r=e.textH,o=e.lineCache,i=e.debugData,a=e.forceFullLayoutCalc;if(i.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),void 0===n){if(n=this.resolveFontFace(e.props),e.trFontFace=n,void 0===n){var s="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");return console.error(s),void this.setStatus(e,"failed",new Error(s))}n.texture.setRenderableOwner(e,!0)}if(!1!==n.loaded){ye(n.data,"Font face data should be loaded"),ye(n.metrics,"Font face metrics should be loaded");var l=e.props,u=l.text,c=l.fontSize,f=l.x,d=l.y,p=l.contain,h=l.width,m=l.height,g=l.verticalAlign,y=l.scrollable,v=l.overflowSuffix,b=l.maxLines,x="both"===p&&y?e.props.scrollY:0,w=e.renderWindow,S=n.data.info.size,T=c/S,k=e.resLineHeight;if(void 0===k){var C=e.props.lineHeight;k=void 0===C?_n(n.metrics,c):C,e.resLineHeight=k}var A=k/T;e.distanceRange=T*n.data.distanceField.distanceRange;var E=24*u.length,I=e.vertexBuffer;(!I||I.length<E)&&(I=new Float32Array(2*E));var M=e.elementBounds;if(M.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),M.valid=!0),!a&&w.valid){var R=w.screen;if(f+R.x1<=M.x1&&f+R.x2>=M.x2&&d-x+R.y1<=M.y1&&d-x+R.y2>=M.y2)return void this.setStatus(e,"loaded");w.valid=!1,this.setStatus(e,"loading")}var _=e.props,L=_.offsetY,P=_.textAlign;if(!w.valid){if(!De(M,this.rendererBounds))return;Rn(w,f,d,x,k,"both"===p?M.y2-M.y1:0,M,T)}var D=function(e,t,n,r,o,i,a,s,l){var u=Math.min(Math.max(a.firstLineIdx,0),s.length),c=n.metrics;ye(c,"Font metrics not loaded"),ye(n.data,"Font data not loaded");var f=(c.ascender-c.descender)*e,d=0;"middle"===r?d=(t-f)/2:"bottom"===r&&(d=t-f);var p=o/i,h=n.data.common.base,m=p+(c.ascender*e-h)+u*t+d;if(!(l&&m>=l/i))return{sdfX:0,sdfY:m,lineIndex:u}}(S,A,n,g,L,T,w,o,r);if(D){var O=e.props.letterSpacing,N=Mn(D.lineIndex,D.sdfX,D.sdfY,u,P,h,m,c,k,O,I,p,o,w.sdf,n,a,y,v,b);e.bufferUploaded=!1,e.bufferNumFloats=N.bufferNumFloats,e.bufferNumQuads=N.bufferNumQuads,e.vertexBuffer=I,e.renderWindow=w,i.lastLayoutNumCharacters=N.layoutNumCharacters,i.bufferSize=I.byteLength,N.fullyProcessed&&(e.textW=N.maxX*T,e.textH=N.numLines*A*T),this.setStatus(e,"loaded")}else this.setStatus(e,"loaded")}else n.once("loaded",function(){t.scheduleUpdateState(e)})}},{key:"renderQuads",value:function(e,t,n,r,o,i){var a,s;if(e.vertexBuffer){var l=this.stage.renderer;ye(l instanceof Tn);var u,c,f=e.props,d=f.fontSize,p=f.color,h=f.contain,m=f.scrollable,g=f.zIndex,y=f.debug,v="both"===h&&m?e.props.scrollY:0,b=e.textW,x=void 0===b?0:b,w=e.textH,S=void 0===w?0:w,T=e.distanceRange,k=e.vertexBuffer,C=e.bufferUploaded,A=e.trFontFace,E=e.elementBounds,I=e.webGlBuffers;if(!I){var M=l.glw,R=4*Float32Array.BYTES_PER_ELEMENT,_=M.createBuffer();ye(_),e.webGlBuffers=new xn([{buffer:_,attributes:{a_position:{name:"a_position",size:2,type:M.FLOAT,normalized:!1,stride:R,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:M.FLOAT,normalized:!1,stride:R,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,ye(e.webGlBuffers),I=e.webGlBuffers}if(!C){var L,P,D=l.glw,O=null!==(L=null===(P=I)||void 0===P?void 0:P.getBuffer("a_textureCoordinate"))&&void 0!==L?L:null;D.arrayBufferData(O,k,D.STATIC_DRAW),e.bufferUploaded=!0}if(ye(A),m&&"both"===h){ye(E.valid);var N=(u=E,(c=Ln)?(c.x=u.x1,c.y=u.y1,c.width=u.x2-u.x1,c.height=u.y2-u.y1,c):{x:u.x1,y:u.y1,width:u.x2-u.x1,height:u.y2-u.y1});n.valid?(e.clippingRect.valid=!0,n=Oe(n,N,e.clippingRect)):(e.clippingRect.valid=!0,n=Ne(N,e.clippingRect))}var U=new pn(l.glw,l.options,I,this.sdfShader,{transform:t.getFloatArr(),color:be(p,r),size:d/((null===(a=A.data)||void 0===a?void 0:a.info.size)||0),scrollY:v,distanceRange:T,debug:y.sdfShaderDebug},r,n,{height:S,width:x},0,g,!1,o,i),B=null===(s=e.trFontFace)||void 0===s?void 0:s.texture;ye(B);var j=B.ctxTexture;U.addTexture(j),U.length=e.bufferNumFloats,U.numQuads=e.bufferNumQuads,l.addRenderOp(U)}}},{key:"setIsRenderable",value:function(t,r){var o;e(n,"setIsRenderable",this,3)([t,r]),null===(o=t.trFontFace)||void 0===o||o.texture.setRenderableOwner(t,r)}},{key:"destroyState",value:function(t){var r;e(n,"destroyState",this,3)([t]),null===(r=t.trFontFace)||void 0===r||r.texture.setRenderableOwner(t,!1)}},{key:"resolveFontFace",value:function(e){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,e,"sdf")}},{key:"releaseFontFace",value:function(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}},{key:"invalidateLayoutCache",value:function(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"setElementBoundsX",value:function(e){var t=e.props,n=t.x,r=t.contain,o=t.width,i=e.elementBounds;i.x1=n,i.x2="none"!==r?n+o:1/0}},{key:"setElementBoundsY",value:function(e){var t=e.props,n=t.y,r=t.contain,o=t.height,i=e.elementBounds;i.y1=n,i.y2="both"===r?n+o:1/0}}])}(nn);function Dn(e){return""===e||"​"===e}function On(e,t,n,r,o){return n*(r-1)+("bottom"!==e?.5*t:0)+Math.max(n,t)+(o||0)}var Nn=function(){return p(function e(t,n){f(this,e),v(this,"_canvas",void 0),v(this,"_context",void 0),v(this,"_settings",void 0),this._canvas=t,this._context=n,this._settings=this.mergeDefaults({})},[{key:"settings",get:function(){return this._settings},set:function(e){this._settings=this.mergeDefaults(e)}},{key:"getPrecision",value:function(){return this._settings.precision}},{key:"setFontProperties",value:function(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}},{key:"_getFontSetting",value:function(){for(var e=[this._settings.fontFamily],t=[],n=0,r=e.length;n<r;n++)"serif"===e[n]||"sans-serif"===e[n]?t.push(e[n]):t.push('"'.concat(e[n],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(t.join(","))}},{key:"_load",value:function(){var e=this;if(document.fonts){var t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(function(e){console.warn("[Lightning] Font load error",e,t)}).then(function(){document.fonts.check(t,e._settings.text)||console.warn("[Lightning] Font not found",t)})}catch(n){console.warn("[Lightning] Can't check font loading for "+t)}}}},{key:"calculateRenderInfo",value:function(){var e={},t=this.getPrecision(),n=this._settings.paddingLeft*t,r=this._settings.paddingRight*t,o=this._settings.fontSize*t,i=null===this._settings.offsetY?null:this._settings.offsetY*t,a=this._settings.w*t,s=this._settings.h*t,l=this._settings.wordWrapWidth*t,u=this._settings.cutSx*t,c=this._settings.cutEx*t,f=this._settings.cutSy*t,d=this._settings.cutEy*t,p=(this._settings.letterSpacing||0)*t,h=this._settings.textIndent*t,m=this._settings.trFontFace;this.setFontProperties(),ye(m);var g,y=function(e,t,n){if(t.metrics)return t.metrics;var r,o=e.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");return console.warn("Font metrics not provided for Canvas Web font ".concat(t.fontFamily,". ")+"Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 `msdf-generator` tool to extract the default metrics for the font and provide them in the Canvas Web font definition."),r=o.actualBoundingBoxDescent&&o.actualBoundingBoxAscent?{ascender:o.actualBoundingBoxAscent/n,descender:-o.actualBoundingBoxDescent/n,lineGap:.2}:{ascender:.8,descender:-.2,lineGap:.2},t.metrics=r,r}(this._context,m,o),v=_n(y,o)*t,b=null!==this._settings.lineHeight?this._settings.lineHeight*t:v,x=this._settings.maxHeight,w=null!==x&&b>0?Math.floor(x/b):0,S=this._settings.maxLines,T=w>0&&S>0?Math.min(w,S):Math.max(w,S),k=a||2048/this.getPrecision(),C=k-n;if(C<10&&(k+=10-C,C=10),l||(l=C),this._settings.textOverflow&&!this._settings.wordWrap){var A;switch(this._settings.textOverflow){case"clip":A="";break;case"ellipsis":A=this._settings.overflowSuffix;break;default:A=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,l-h,A)}if(this._settings.wordWrap)g=this.wrapText(this._settings.text,l,p,h);else for(var E=(g={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]}).l.length,I=0;I<E-1;I++)g.n.push(I);var M=g.l;if(T&&M.length>T){var R,_=M.slice(0,T),L=null;if(this._settings.overflowSuffix){var P=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,D=this.wrapText(_[_.length-1],l-P,p,h);_[_.length-1]="".concat(D.l[0]).concat(this._settings.overflowSuffix),L=[D.l.length>1?D.l[1]:""]}else L=[""];var O=M.length,N=0,U=g.n.length;for(R=T;R<O;R++)L[N]+="".concat(L[N]?" ":"").concat(M[R]),R+1<U&&g.n[R+1]&&N++;e.remainingText=L.join("\n"),e.moreTextLines=!0,M=_}else e.moreTextLines=!1,e.remainingText="";for(var B,j=0,F=[],z=0;z<M.length;z++){var V=this.measureText(M[z],p)+(0===z?h:0);F.push(V),j=Math.max(j,V)}return e.lineWidths=F,a||(k=j+n+r,C=j),this._settings.wordWrap&&a>j&&"left"===this._settings.textAlign&&1===M.length&&(k=j+n+r),B=s||On(this._settings.textBaseline,o,b,M.length,i),null===i&&(i=o),e.w=k,e.h=B,e.lines=M,e.precision=t,k||(k=1),B||(B=1),(u||c)&&(k=Math.min(k,c-u)),(f||d)&&(B=Math.min(B,d-f)),e.width=k,e.innerWidth=C,e.height=B,e.fontSize=o,e.cutSx=u,e.cutSy=f,e.cutEx=c,e.cutEy=d,e.lineHeight=b,e.defLineHeight=v,e.lineWidths=F,e.offsetY=i,e.paddingLeft=n,e.paddingRight=r,e.letterSpacing=p,e.textIndent=h,e.metrics=y,e}},{key:"draw",value:function(e,t){var n,r,o=this.getPrecision(),i=(null==t?void 0:t.lines)||e.lines,a=(null==t?void 0:t.lineWidths)||e.lineWidths,s=t?On(this._settings.textBaseline,e.fontSize,e.lineHeight,t.lines.length,null===this._settings.offsetY?null:this._settings.offsetY*o):e.height;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(s),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);for(var l=[],u=e.metrics,c=u?u.ascender*e.fontSize:e.fontSize,f=(u.ascender-u.descender)*e.fontSize,d=0,p=i.length;d<p;d++)n=0===d?e.textIndent:0,r=d*e.lineHeight+c,"middle"==this._settings.verticalAlign?r+=(e.lineHeight-f)/2:"bottom"==this._settings.verticalAlign&&(r+=e.lineHeight-f),"right"===this._settings.textAlign?n+=e.innerWidth-a[d]:"center"===this._settings.textAlign&&(n+=(e.innerWidth-a[d])/2),n+=e.paddingLeft,l.push({text:i[d],x:n,y:r,w:a[d]});if(this._settings.highlight){var h=this._settings.highlightColor,m=this._settings.highlightHeight*o||1.5*e.fontSize,g=this._settings.highlightOffset*o,y=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*o:e.paddingLeft,v=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*o:e.paddingRight;this._context.fillStyle=Le(h);for(var b=0;b<l.length;b++){var x=l[b];this._context.fillRect(x.x-y,x.y-e.offsetY+g,x.w+v+y,m)}}var w=null;this._settings.shadow&&(w=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Le(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*o,this._context.shadowOffsetY=this._settings.shadowOffsetY*o,this._context.shadowBlur=this._settings.shadowBlur*o),this._context.fillStyle=Le(this._settings.textColor);for(var S=0,T=l.length;S<T;S++){var k=l[S];if(0===e.letterSpacing)this._context.fillText(k.text,k.x,k.y);else for(var C=k.text.split(""),A=k.x,E=0,I=C.length;E<I;E++)this._context.fillText(C[E],A,k.y),A+=this.measureText(C[E],e.letterSpacing)}w&&(this._context.shadowColor=w[0],this._context.shadowOffsetX=w[1],this._context.shadowOffsetY=w[2],this._context.shadowBlur=w[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy)}},{key:"wrapWord",value:function(e,t,n){var r=this._context.measureText(n).width,o=e.length,i=this._context.measureText(e).width;if(i<=t)return e;var a=Math.floor(t*o/i),s=this._context.measureText(e.substring(0,a)).width+r;if(s>t)for(;a>0&&(s=this._context.measureText(e.substring(0,a)).width+r)>t;)a-=1;else for(;a<o;){if(!((s=this._context.measureText(e.substring(0,a)).width+r)<t)){a-=1;break}a+=1}return e.substring(0,a)+(t>=r?n:"")}},{key:"wrapText",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=/ |\u200B/g,i=e.split(/\r?\n/g),a=[],s=[],l=0;l<i.length;l++){for(var u=[],c="",f=t-r,d=i[l].split(o),p=i[l].match(o)||[],h=0;h<d.length;h++){var m=p[h-1]||"",g=d[h],y=this.measureText(g,n),v=Dn(m)?y:y+this.measureText(m,n);0===h||v>f?(h>0&&(u.push(c),c=""),c+=g,f=t-y-(0===h?r:0)):(f-=v,c+=m+g)}u.push(c),c="",a=a.concat(u),l<i.length-1&&s.push(a.length)}return{l:a,n:s}}},{key:"measureText",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n?e.split("").reduce(function(e,r){return Dn(r)?e:e+t._context.measureText(r).width+n},0):this._context.measureText(e).width}},{key:"mergeDefaults",value:function(e){return g({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},e)}}])}(),Un="undefined"==typeof self?globalThis:self,Bn=(null===(l=Un.document)||void 0===l?void 0:l.fonts)||Un.fonts;var jn=function(t){function n(e){var t;f(this,n),v(t=a(this,n,[e]),"canvas",void 0),v(t,"context",void 0),v(t,"fontFamilies",{}),v(t,"fontFamilyArray",[t.fontFamilies]),v(t,"type","canvas"),v(t,"loadFont",function(e){var n,r,o,i,a,s,l=(n=e.props,r=n.fontFamily,o=n.fontStyle,i=n.fontWeight,a=n.fontStretch,s=n.fontSize,[o,i,a,"".concat(s,"px"),r].join(" ")),u=t.stage.fontManager.resolveFontFace(t.fontFamilyArray,e.props,"canvas");ye(u,"Could not resolve font face for ".concat(l)),e.fontInfo={fontFace:u,cssString:l,loaded:!1},e.fontInfo.loaded||Bn.load(l).then(t.onFontLoaded.bind(t,e,l)).catch(t.onFontLoadError.bind(t,e,l))}),"undefined"!=typeof OffscreenCanvas?t.canvas=new OffscreenCanvas(0,0):t.canvas=document.createElement("canvas");var r=t.canvas.getContext("2d",{willReadFrequently:!0});return r||(t.canvas=document.createElement("canvas"),r=t.canvas.getContext("2d",{willReadFrequently:!0})),ye(r),t.context=r,t.addFontFace(new dn({fontFamily:"sans-serif",descriptors:{},fontUrl:""})),t}return u(n,t),p(n,[{key:"getPropertySetters",value:function(){var e=this;return{fontFamily:function(t,n){t.props.fontFamily=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontWeight:function(t,n){t.props.fontWeight=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontStyle:function(t,n){t.props.fontStyle=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontStretch:function(t,n){t.props.fontStretch=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontSize:function(t,n){t.props.fontSize=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},text:function(t,n){t.props.text=n,e.invalidateLayoutCache(t)},textAlign:function(t,n){t.props.textAlign=n,e.invalidateLayoutCache(t)},color:function(t,n){t.props.color=n,e.invalidateLayoutCache(t)},x:function(e,t){e.props.x=t},y:function(e,t){e.props.y=t},contain:function(t,n){t.props.contain=n,e.invalidateLayoutCache(t)},width:function(t,n){t.props.width=n,"none"!==t.props.contain&&e.invalidateLayoutCache(t)},height:function(t,n){t.props.height=n,"both"===t.props.contain&&e.invalidateLayoutCache(t)},offsetY:function(t,n){t.props.offsetY=n,e.invalidateLayoutCache(t)},scrollY:function(e,t){e.props.scrollY=t},letterSpacing:function(t,n){t.props.letterSpacing=n,e.invalidateLayoutCache(t)},lineHeight:function(t,n){t.props.lineHeight=n,e.invalidateLayoutCache(t)},maxLines:function(t,n){t.props.maxLines=n,e.invalidateLayoutCache(t)},textBaseline:function(t,n){t.props.textBaseline=n,e.invalidateLayoutCache(t)},verticalAlign:function(t,n){t.props.verticalAlign=n,e.invalidateLayoutCache(t)},overflowSuffix:function(t,n){t.props.overflowSuffix=n,e.invalidateLayoutCache(t)}}}},{key:"canRenderFont",value:function(e){return!0}},{key:"isFontFaceSupported",value:function(e){return e instanceof dn}},{key:"addFontFace",value:function(e){ye(e instanceof dn);var t=e.fontFamily;"sans-serif"!==t&&Bn.add(e.fontFace);var n=this.fontFamilies[t];n||(n=new Set,this.fontFamilies[t]=n),n.add(e)}},{key:"createState",value:function(e,t){return{node:t,props:e,status:"initialState",updateScheduled:!1,emitter:new Ae,textureNode:void 0,lightning2TextRenderer:new Nn(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}},{key:"updateState",value:function(e){if("initialState"===e.status&&this.setStatus(e,"loading"),"loaded"!==e.status)return e.fontInfo?void(e.fontInfo.loaded&&(e.renderInfo||(e.renderInfo=this.calculateRenderInfo(e),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,this.renderSingleCanvasPage(e)))):this.loadFont(e)}},{key:"renderSingleCanvasPage",value:function(e){ye(e.renderInfo);var t=e.node,n=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:function(e,t){return ye(t),e.draw(t,{lines:t.lines,lineWidths:t.lineWidths}),0===this.canvas.width||0===this.canvas.height?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}.bind(this,e.lightning2TextRenderer,e.renderInfo)});if(e.textureNode)e.textureNode.texture=n,e.textureNode.alpha=_e(e.props.color);else{var r=this.stage.createNode({parent:t,texture:n,autosize:!0,alpha:_e(e.props.color)});e.textureNode=r}this.setStatus(e,"loaded")}},{key:"calculateRenderInfo",value:function(e){var t,n;return e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:null===(t=e.fontInfo)||void 0===t?void 0:t.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Me(e.props.color),offsetY:e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:null!==(n=e.props.lineHeight)&&void 0!==n?n:null,maxLines:e.props.maxLines,maxHeight:"both"===e.props.contain?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:"none"!==e.props.contain?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.renderInfo}},{key:"renderQuads",value:function(){}},{key:"destroyState",value:function(t){"destroyed"!==t.status&&(e(n,"destroyState",this,3)([t]),t.textureNode&&(t.textureNode.destroy(),delete t.textureNode),delete t.renderInfo)}},{key:"invalidateLayoutCache",value:function(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"onFontLoaded",value:function(e,t){var n;t===(null===(n=e.fontInfo)||void 0===n?void 0:n.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}},{key:"onFontLoadError",value:function(e,t,n){var r;t===(null===(r=e.fontInfo)||void 0===r?void 0:r.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),n),this.scheduleUpdateState(e))}}])}(nn),Fn={isWhite:!0,a:1,r:255,g:255,b:255};function zn(e){return 4294967295===e?Fn:{isWhite:!1,a:(e>>>24&255)/255,r:255&e,g:255&e>>>8,b:255&e>>>16}}function Vn(e){return 4294967295===e?Fn:{isWhite:!1,r:e>>>24&255,g:255&e>>>16,b:255&e>>>8,a:(255&e)/255}}function Hn(e){var t=e.a,n=e.r,r=e.g,o=e.b;return"rgba(".concat(n,",").concat(r,",").concat(o,",").concat(t,")")}var Gn=function(e){function t(){var e;f(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(e=a(this,t,[].concat(r)),"image",void 0),v(e,"tintCache",void 0),e}return u(t,e),p(t,[{key:"load",value:(o=i(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return this.textureSource.setState("loading"),e.p=1,e.n=2,this.onLoadRequest();case 2:t=e.v,this.textureSource.setState("loaded",t),this.textureSource.freeTextureData(),this.updateMemSize(),e.n=4;break;case 3:throw e.p=3,r=e.v,this.textureSource.setState("failed",r),this.textureSource.freeTextureData(),r;case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return o.apply(this,arguments)})},{key:"free",value:function(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}},{key:"updateMemSize",value:function(){var e=this.tintCache?8:4;if(this.textureSource.dimensions){var t=this.textureSource.dimensions,n=t.width,r=t.height;this.setTextureMemUse(n*r*e)}}},{key:"hasImage",value:function(){return void 0!==this.image}},{key:"getImage",value:function(e){var t,n=this.image;if(ye(n,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),n;var r=Hn(e);if((null===(t=this.tintCache)||void 0===t?void 0:t.key)===r)return this.tintCache.image;var o=this.tintTexture(n,r);return this.tintCache={key:r,image:o},this.updateMemSize(),o}},{key:"tintTexture",value:function(e,t){var n=e.width,r=e.height,o=document.createElement("canvas");o.width=n,o.height=r;var i=o.getContext("2d");return i&&(i.fillStyle=t,i.globalCompositeOperation="copy",i.fillRect(0,0,n,r),i.globalCompositeOperation="multiply",i.drawImage(e,0,0,n,r,0,0,n,r),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0,n,r,0,0,n,r)),o}},{key:"onLoadRequest",value:(r=i(n().m(function e(){var t,r,o,i;return n().w(function(e){for(;;)switch(e.n){case 0:if(ye(null===(t=this.textureSource)||void 0===t||null===(t=t.textureData)||void 0===t?void 0:t.data,"Texture data is null"),!((r=this.textureSource.textureData.data)instanceof ImageData)){e.n=1;break}return(o=document.createElement("canvas")).width=r.width,o.height=r.height,(i=o.getContext("2d"))&&i.putImageData(r,0,0),this.image=o,e.a(2,{width:r.width,height:r.height});case 1:if(!("undefined"!=typeof ImageBitmap&&r instanceof ImageBitmap||r instanceof HTMLImageElement)){e.n=2;break}return this.image=r,e.a(2,{width:r.width,height:r.height});case 2:return e.a(2,{width:0,height:0})}},e,this)})),function(){return r.apply(this,arguments)})}]);var r,o}(an);function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.shader instanceof Jt&&"DynamicShader"===e.shader.shType){var n,r=null===(n=e.shaderProps)||void 0===n?void 0:n.effects;if(r&&r.length){var o=r.find(function(e){return e.type==="border".concat(t)&&e.props&&e.props.width});return o&&o.props}}}function Wn(e,t,n,r,o){if(Object.getPrototypeOf(this).roundRect)this.roundRect(e,t,n,r,o);else{var i="number"==typeof o?{topLeft:o,topRight:o,bottomRight:o,bottomLeft:o}:g({topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},o);!function(e){var t=Math.min(n/2,r/2),o=e.topLeft+e.topRight+e.bottomRight+e.bottomLeft;if(o>n||o>r){var i=t/Math.max(e.topLeft,e.topRight,e.bottomRight,e.bottomLeft);e.topLeft*=i,e.topRight*=i,e.bottomRight*=i,e.bottomLeft*=i}}(i),this.moveTo(e+i.topLeft,t),this.lineTo(e+n-i.topRight,t),this.ellipse(e+n-i.topRight,t+i.topRight,i.topRight,i.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(e+n,t+r-i.bottomRight),this.ellipse(e+n-i.bottomRight,t+r-i.bottomRight,i.bottomRight,i.bottomRight,0,0,.5*Math.PI),this.lineTo(e+i.bottomLeft,t+r),this.ellipse(e+i.bottomLeft,t+r-i.bottomLeft,i.bottomLeft,i.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(e,t+i.topLeft),this.ellipse(e+i.topLeft,t+i.topLeft,i.topLeft,i.topLeft,0,Math.PI,1.5*Math.PI)}}function Kn(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;if(i){var s,l,u=0,c=0;switch(arguments.length>7?arguments[7]:void 0){case"Top":s=t,u=n,l=r+t,c=n;break;case"Right":s=t+r,u=n,l=t+r,c=n+o;break;case"Bottom":s=t,u=n+o,l=t+r,c=n+o;break;case"Left":s=t,u=n,l=t,c=n+o}e.beginPath(),e.lineWidth=i,e.strokeStyle=Hn(Vn(null!=a?a:0)),e.moveTo(s,u),e.lineTo(l,c),e.stroke()}}var Xn=function(e){function t(e){var n;f(this,t),v(n=a(this,t,[e]),"context",void 0),v(n,"canvas",void 0),v(n,"pixelRatio",void 0),v(n,"clearColor",void 0),v(n,"renderToTextureActive",!1),v(n,"activeRttNode",null),v(n,"defShaderCtr",void 0),n.mode="canvas",n.shManager.renderer=n;var r=e.canvas,o=e.pixelRatio,i=e.clearColor;return n.canvas=r,n.context=r.getContext("2d"),n.pixelRatio=o,n.clearColor=i?Re(i):void 0,n.defShaderCtr={type:"DefaultShader",props:{},shader:new Jt("DefaultShader"),getResolvedProps:function(){return function(){return{}}}},n}return u(t,e),p(t,[{key:"reset",value:function(){this.canvas.width=this.canvas.width;var e=this.context;if(this.clearColor){var t=y(this.clearColor,4),n=t[0],r=t[1],o=t[2],i=t[3];e.fillStyle="rgba(".concat(n,", ").concat(r,", ").concat(o,", ").concat(i/255,")"),e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}},{key:"render",value:function(){}},{key:"addQuad",value:function(e){var t,n,r=this.context,o=e.tx,i=e.ty,a=e.width,s=e.height,l=e.alpha,u=e.colorTl,c=e.colorTr,f=e.colorBr,d=e.ta,p=e.tb,h=e.tc,m=e.td,g=e.clippingRect,y=e.texture,v=void 0,b=null===(t=y)||void 0===t?void 0:t.type;if(ye(b,"Texture type is not defined"),b===Ce.image||b===Ce.color||b===Ce.subTexture||b===Ce.noise){if(y){if(y instanceof mt&&(n=y.props,y=y.parentTexture),v=y.ctxTexture,"freed"===y.state)return;if("loaded"!==y.state)return}var x=zn(u),w=1!==d,S=0!==g.width&&0!==g.height,T=u!==c||u!==f,k=Boolean(e.shader),C=k?function(e){if(e.shader instanceof Jt){var t,n,r=e.shader.shType;if("RoundedRectangle"===r)return null!==(t=null===(n=e.shaderProps)||void 0===n?void 0:n.radius)&&void 0!==t?t:0;if("DynamicShader"===r){var o,i=null===(o=e.shaderProps)||void 0===o?void 0:o.effects;if(i){var a=i.find(function(e){var t;return"radius"===e.type&&(null==e||null===(t=e.props)||void 0===t?void 0:t.radius)});return a&&"radius"===a.type&&a.props.radius||0}}}return 0}(e):0,A=k?qn(e):void 0;if((w||S||C)&&r.save(),S){var E=new Path2D,I=g.x,M=g.y,R=g.width,_=g.height;E.rect(I,M,R,_),r.clip(E)}if(w){var L=this.pixelRatio;r.setTransform(d,h,p,m,o*L,i*L),r.scale(L,L),r.translate(-o,-i)}if(C){var P=new Path2D;Wn.call(P,o,i,a,s,C),r.clip(P)}if(b!==Ce.image&&b!==Ce.subTexture&&b!==Ce.noise||!v)if(b===Ce.color&&T){var D,O=o,N=i;u===c?(O=o,N=i+s,D=zn(f)):(O=o+a,N=i,D=zn(c));var U=r.createLinearGradient(o,i,O,N);U.addColorStop(0,Hn(x)),U.addColorStop(1,Hn(D)),r.fillStyle=U,r.fillRect(o,i,a,s)}else b===Ce.color&&(r.fillStyle=Hn(x),r.fillRect(o,i,a,s));else{var B,j=v.getImage(x);if(r.globalAlpha=null!==(B=x.a)&&void 0!==B?B:l,n)r.drawImage(j,n.x,n.y,n.width,n.height,o,i,a,s);else try{r.drawImage(j,o,i,a,s)}catch(X){}r.globalAlpha=1}if(A&&A.width){var F,z=A.width,V=A.width/2,H=Hn(Vn(null!==(F=A.color)&&void 0!==F?F:0));r.beginPath(),r.lineWidth=z,r.strokeStyle=H,r.globalAlpha=l,C?(Wn.call(r,o+V,i+V,a-z,s-z,C),r.stroke()):r.strokeRect(o+V,i+V,a-z,s-z),r.globalAlpha=1}else if(k){var G=qn(e,"Top"),q=qn(e,"Right"),W=qn(e,"Bottom"),K=qn(e,"Left");G&&Kn(r,o,i,a,s,G.width,G.color,"Top"),q&&Kn(r,o,i,a,s,q.width,q.color,"Right"),W&&Kn(r,o,i,a,s,W.width,W.color,"Bottom"),K&&Kn(r,o,i,a,s,K.width,K.color,"Left")}(w||S||C)&&r.restore()}}},{key:"createCtxTexture",value:function(e){return new Gn(this.txMemManager,e)}},{key:"getShaderManager",value:function(){return this.shManager}},{key:"getDefShaderCtr",value:function(){return this.defShaderCtr}},{key:"renderRTTNodes",value:function(){}},{key:"removeRTTNode",value:function(e){}},{key:"renderToTexture",value:function(e){}},{key:"getBufferInfo",value:function(){return null}},{key:"getQuadCount",value:function(){return null}},{key:"updateClearColor",value:function(e){this.clearColor=e?Re(e):void 0}}])}(sn),$n={alpha:function(e){return 1===e?null:{prop:"opacity",value:"".concat(e)}},x:function(e){return{prop:"left",value:"".concat(e,"px")}},y:function(e){return{prop:"top",value:"".concat(e,"px")}},width:function(e){return 0===e?null:{prop:"width",value:"".concat(e,"px")}},height:function(e){return 0===e?null:{prop:"height",value:"".concat(e,"px")}},fontSize:function(e){return 0===e?null:{prop:"font-size",value:"".concat(e,"px")}},lineHeight:function(e){return 0===e?null:{prop:"line-height",value:"".concat(e,"px")}},zIndex:function(){return"z-index"},fontFamily:function(){return"font-family"},fontStyle:function(){return"font-style"},fontWeight:function(){return"font-weight"},fontStretch:function(){return"font-stretch"},letterSpacing:function(){return"letter-spacing"},textAlign:function(){return"text-align"},overflowSuffix:function(){return"overflow-suffix"},maxLines:function(){return"max-lines"},contain:function(){return"contain"},verticalAlign:function(){return"vertical-align"},clipping:function(e){return!1===e?null:{prop:"overflow",value:e?"hidden":"visible"}},rotation:function(e){return 0===e?null:{prop:"transform",value:"rotate(".concat(e,"rad)")}},scale:function(e){return 1===e?null:{prop:"transform",value:"scale(".concat(e,")")}},scaleX:function(e){return 1===e?null:{prop:"transform",value:"scaleX(".concat(e,")")}},scaleY:function(e){return 1===e?null:{prop:"transform",value:"scaleY(".concat(e,")")}},color:function(e){return 0===e?null:{prop:"color",value:Yn(e)}}},Yn=function(e){var t=(255&e)/255,n=e>>8&255,r=e>>16&255;return"rgba(".concat(e>>24&255,",").concat(r,",").concat(n,",").concat(t,")")},Jn={id:"test-id"},Qn=new Set([].concat(h(Object.keys($n)),h(Object.keys(Jn)),["src","parent","data"])),Zn=function(){return p(function e(t,n){var r,o,i,a,s,l;if(f(this,e),v(this,"root",null),v(this,"canvas",null),v(this,"height",1080),v(this,"width",1920),v(this,"scaleX",1),v(this,"scaleY",1),!Te()){if(!n)throw new Error("settings is required");this.height=Math.ceil(null!==(r=n.appHeight)&&void 0!==r?r:1080/(null!==(o=n.deviceLogicalPixelRatio)&&void 0!==o?o:1)),this.width=Math.ceil(null!==(i=n.appWidth)&&void 0!==i?i:1920/(null!==(a=n.deviceLogicalPixelRatio)&&void 0!==a?a:1)),this.scaleX=null!==(s=n.deviceLogicalPixelRatio)&&void 0!==s?s:1,this.scaleY=null!==(l=n.deviceLogicalPixelRatio)&&void 0!==l?l:1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}},[{key:"setRootPosition",value:function(){if(null!==this.root&&null!==this.canvas){var e=this.canvas.getBoundingClientRect(),t=document.documentElement.scrollTop+e.top,n=document.documentElement.scrollLeft+e.left;this.root.id="root",this.root.style.left="".concat(n,"px"),this.root.style.top="".concat(t,"px"),this.root.style.width="".concat(this.width,"px"),this.root.style.height="".concat(this.height,"px"),this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform="scale(".concat(this.scaleX,", ").concat(this.scaleY,")"),this.root.style.overflow="hidden",this.root.style.zIndex="65534"}}},{key:"createDiv",value:function(e,t){var n=document.createElement("div");for(var r in n.style.position="absolute",n.id=e.toString(),t)this.updateNodeProperty(n,r,t[r],t);return n}},{key:"createNode",value:function(e){var t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,e.on("inViewport",function(){return t.setAttribute("state","inViewport")}),e.on("inBounds",function(){return t.setAttribute("state","inBounds")}),e.on("outOfBounds",function(){return t.setAttribute("state","outOfBounds")}),this.createProxy(e,t)}},{key:"createTextNode",value:function(e){var t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,this.createProxy(e,t)}},{key:"createProxy",value:function(e,t){var n=this;Qn.forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);o=Object.getOwnPropertyDescriptor(i,r)}void 0!==o&&Object.defineProperty(e,r,{get:function(){var t;return null===(t=o)||void 0===t||null===(t=t.get)||void 0===t?void 0:t.call(e)},set:function(i){var a;null===(a=o)||void 0===a||null===(a=a.set)||void 0===a||a.call(e,i),n.updateNodeProperty(t,r,i,e.props)},configurable:!0,enumerable:!0})});var r=e.destroy;Object.defineProperty(e,"destroy",{value:function(){n.destroyNode(e.id),r.call(e)}});var o=e.animate;return Object.defineProperty(e,"animate",{value:function(r,i){var a=o.call(e,r,i),s=a.start.bind(a);return a.start=function(){return n.animateNode(t,r,i),s()},a}}),e}},{key:"destroyNode",value:function(e){var t=document.getElementById(e.toString());null==t||t.remove()}},{key:"updateNodeProperty",value:function(e,t,n,r){if(null!==this.root&&null!=n)if("parent"!==t){if("text"===t)return e.innerHTML=String(n),void(e.style.visibility="hidden");if("src"===t&&n)e.setAttribute("data-src",String(n));else if("rtt"===t&&n)e.setAttribute("data-rtt",String(n));else if($n[t]){var o,i=null===(o=$n[t])||void 0===o?void 0:o.call($n,n);if(null===i)return;if("string"==typeof i)return void e.style.setProperty(i,String(n));if("object"===x(i)){var a=i.value;if("x"===t){var s=r.mountX,l=r.width;s&&(a="".concat(parseInt(a)-l*s,"px"))}else if("y"===t){var u=r.mountY,c=r.height;u&&(a="".concat(parseInt(a)-c*u,"px"))}e.style.setProperty(i.prop,a)}}else if(Jn[t]){var f=Jn[t];if(!f)return;e.setAttribute(String(f),String(n))}else if("data"!==t);else for(var d in n){var p=n[d];void 0===p?e.removeAttribute("data-".concat(d)):e.setAttribute("data-".concat(d),String(p))}}else{var h=n.id;if(1===h)return void this.root.appendChild(e);var m=document.getElementById(h.toString());null==m||m.appendChild(e)}}},{key:"animateNode",value:function(e,t,n){var r=n.duration,o=void 0===r?1e3:r,i=n.delay,a=void 0===i?0:i,s=t.x,l=t.y,u=t.width,c=t.height,f=t.alpha,d=void 0===f?1:f,p=t.rotation,h=void 0===p?0:p,m=t.scale,g=void 0===m?1:m,y=t.color,v=t.mountX,b=t.mountY;setTimeout(function(){setTimeout(function(){e.style.top="".concat(l-c*b,"px"),e.style.left="".concat(s-u*v,"px"),e.style.width="".concat(u,"px"),e.style.height="".concat(c,"px"),e.style.opacity="".concat(d),e.style.rotate="".concat(h,"rad"),e.style.scale="".concat(g),e.style.color=Yn(y)},o)},a)}}])}(),er={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},tr={low:.66666667,medium:.85,high:1,retina:2},nr={},rr=function(e){var t="renderMode"in e?e.renderMode:"webgl";return"webgl"===t?Tn:"canvas"===t?Xn:void 0},or=function(e){var t="renderMode"in e?e.renderMode:"webgl";return"webgl"===t?[Pn,jn]:"canvas"===t?[jn]:void 0},ir=function(e){var t=g(g({},{max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1}),"gpuMemory"in e==!0?e.gpuMemory:{});return{criticalThreshold:1024*t.max*1024,targetThresholdLevel:t.target,cleanupInterval:t.cleanupInterval,baselineMemoryAllocation:1024*t.baseline*1024,doNotExceedCriticalThreshold:t.strict}},ar=function(e){for(var t="vertical"===e.direction?"y":"x",n="vertical"===e.direction?"x":"y",r="vertical"===e.direction?"mountX":"mountY",o="vertical"===e.direction?"height":"width",i="vertical"===e.direction?"width":"height",a=function(e,t){if(void 0===e)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if("number"==typeof e)return{start:e,end:e,oppositeStart:e,oppositeEnd:e};if(!0===lr(e)&&(e=ur(e)),"object"===x(e)){var n=e,r=n.top,o=void 0===r?void 0:r,i=n.right,a=void 0===i?void 0:i,s=n.bottom,l=void 0===s?void 0:s,u=n.left,c=void 0===u?void 0:u,f=n.x,d=void 0===f?0:f,p=n.y,h=void 0===p?0:p;return"vertical"===t?{start:void 0!==o?o:h,end:void 0!==l?l:h,oppositeStart:void 0!==c?c:d,oppositeEnd:void 0!==a?a:d}:{start:void 0!==c?c:d,end:void 0!==a?a:d,oppositeStart:void 0!==o?o:h,oppositeEnd:void 0!==l?l:h}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}}(e.padding,e.direction),s=a.start,l=this.node.children,u=l.length,c=this.children,f=0,d=e.gap||0,p=0;p<u;p++)if(void 0===c[p]||!1!==c[p].props.raw.show){var h=l[p];h[t]=s,h[n]=a.oppositeStart,s+="width"===o?h.width+(h.width!==("text"in h?1:0)?d:0):"text"in h?h.width>1?h.height+d:0:0!==h.height?h.height+d:0,f=Math.max(f,h[i]+a.oppositeStart+a.oppositeEnd)}this.node[o]=s-d+a.end,this.node[i]=f;var m={start:0,end:1,center:.5}[e["align-items"]||"start"];if(0!==m)for(var g=0;g<u;g++){var y=l[g];y[n]=f*m,y[r]=m}void 0!==e["@updated"]&&e["@updated"]({w:this.node.width,h:this.node.height},this),this.config.parent&&!0===this.config.parent.props.__layout&&this.config.parent.triggerLayout(this.config.parent.props)},sr=function(e){return null!==e&&"object"===x(e)&&"transition"in e==!0},lr=function(e){return"string"==typeof e&&e.startsWith("{")&&e.endsWith("}")},ur=function(e){return JSON.parse(e.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":'))},cr=function(e,t){return"string"!=typeof e?e:e.indexOf("%")===e.length-1?this.element.config.parent&&(this.element.config.parent.node[t]||0)*(parseFloat(e)/100)||0:e},fr=function(e){if("object"!==x(e)||null===e)return e;if(e.constructor===Object){if("value"in e==!0)return e.value;if("transition"in e==!0)return fr(e.transition)}return e},dr={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"},pr=null,hr={set parent(e){this.props.parent="root"===e?nr.root:e.node},set rotation(e){this.props.rotation=e*(Math.PI/180)},set w(e){this.props.width=cr.call(this,e,"width")},set width(e){this.props.width=cr.call(this,e,"width")},set h(e){this.props.height=cr.call(this,e,"height")},set height(e){this.props.height=cr.call(this,e,"height")},set x(e){this.props.x=cr.call(this,e,"width")},set y(e){this.props.y=cr.call(this,e,"height")},set z(e){this.props.zIndex=e},set zIndex(e){this.props.zIndex=e},set color(e){var t=this;"string"==typeof e&&!1===e.startsWith("{")?this.props.color=P(e):("object"===x(e)||!0===lr(e)&&(e=ur(e)))&&(this.props.color=0,Object.entries(e).forEach(function(e){t.props[dr[e[0]]]=P(e[1])}))},set src(e){this.props.src=e,void 0===this.raw.color&&(this.props.color=this.props.src?4294967295:0),"w"in this.raw||"w"in this.raw||"h"in this.raw||"height"in this.raw||(this.props.autosize=!0)},set texture(e){this.props.texture=e,void 0===this.raw.color&&null==e?this.props.color=0:void 0===this.raw.color&&(this.props.color=4294967295)},set fit(e){var t={};"cover"!==e&&"contain"!==e?("object"===x(e)||!0===lr(e)&&(e=ur(e)))&&(t.type=e.type||"cover","number"==typeof e.position&&(t.clipY=t.clipX=e.position),"object"===x(e.position)&&(t.clipX="x"in e.position==!0?e.position.x:null,t.clipY="y"in e.position==!0?e.position.y:null),this.props.textureOptions={resizeMode:t}):this.props.textureOptions={resizeMode:{type:e}}},set rtt(e){this.props.rtt=e,void 0===this.raw.color&&(this.props.color=!0===e?4294967295:0)},set mount(e){"object"===x(e)||!0===lr(e)&&(e=ur(e))?("x"in e==!0&&(this.props.mountX=e.x),"y"in e==!0&&(this.props.mountY=e.y)):(this.props.mountX=e,this.props.mountY=e)},set pivot(e){"object"===x(e)||!0===lr(e)&&(e=ur(e))?("x"in e==!0&&(this.props.pivotX=e.x),"y"in e==!0&&(this.props.pivotY=e.y)):(this.props.pivotX=e,this.props.pivotY=e)},set scale(e){"object"===x(e)||!0===lr(e)&&(e=ur(e))?("x"in e==!0&&(this.props.scaleX=e.x),"y"in e==!0&&(this.props.scaleY=e.y)):this.props.scale=e},set show(e){this.props.alpha=e?void 0!==this.raw.alpha?this.raw.alpha:1:0},set alpha(e){void 0!==this.raw.show&&1!=this.raw.show||(this.props.alpha=e)},set shader(e){this.props.shader=null!==e?nr.createShader(e.type,e.props):nr.createShader("DefaultShader")},set effects(e){for(var t=0;t<e.length;t++)e[t].props&&e[t].props.color&&(e[t].props.color=P(e[t].props.color));void 0===this.element.node&&(this.props.shader=nr.createShader("DynamicShader",{effects:e.map(function(e){return nr.createEffect(e.type,e.props)})}))},set clipping(e){this.props.clipping=e},set overflow(e){this.props.clipping=!e},set font(e){this.props.fontFamily=e},set size(e){this.props.fontSize=e},set wordwrap(e){c.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=e,this.props.contain="width"},set maxwidth(e){this.props.width=e,this.props.contain="width"},set maxheight(e){this.props.height=e,this.props.contain="both"},set contain(e){this.props.contain=e},set maxlines(e){this.props.maxLines=e},set textoverflow(e){this.props.overflowSuffix=!1===e?" ":!0===e?void 0:e},set letterspacing(e){this.props.letterSpacing=e||1},set lineheight(e){this.props.lineHeight=e},set align(e){this.props.textAlign=e},set content(e){this.props.text=""+e},set placement(e){var t,n;"object"===x(e)||!0===lr(e)&&(e=ur(e))?("x"in e==!0&&(t=e.x),"y"in e==!0&&(n=e.y)):"center"===e||"right"===e?t=e:n=e,"center"===t?(this.x="50%",this.props.mountX=.5):"right"===t&&(this.x="100%",this.props.mountX=1),"middle"===n?(this.y="50%",this.props.mountY=.5):"bottom"===n&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(e){("object"===x(e)||!0===lr(e)&&(e=ur(e)))&&(this.props.data=e)}},mr={populate:function(e){var t=this,n=e;n.node=this.config.node,!0===n[b.isSlot]&&(this[b.isSlot]=!0),this.props.element=this,this.props.parent=n.parent||this.config.parent,delete n.parent,this.props.raw=e;for(var r=Object.keys(n),o=r.length,i=0;i<o;i++){var a=r[i],s=n[a];void 0!==s&&(this.props[a]=fr(s))}void 0===this.props.props.color&&"__textnode"in n==!1&&(this.props.props.color=0),this.node=n.__textnode?nr.createTextNode(g(g({},pr),this.props.props)):nr.createNode(this.props.props),void 0!==n["@loaded"]&&"function"==typeof n["@loaded"]&&this.node.on("loaded",function(e,r){var o=r.type,i=r.dimensions;n["@loaded"]({w:i.width,h:i.height,type:o},t)}),void 0!==n["@error"]&&"function"==typeof n["@error"]&&this.node.on("failed",function(e,r){n["@error"](r,t)}),!0===n.__layout&&(this.triggerLayout=ar.bind(this)),void 0!==this.config.parent.props&&!0===this.config.parent.props.__layout&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",function(){t.config.parent.triggerLayout(t.config.parent.props)}))},set:function(e,t){if(void 0!==t&&this.props.raw[e]!==t){this.props.raw[e]=t,this.props.props={},this.props[e]=fr(t);var n=Object.keys(this.props.props);if(1===n.length){if(!0===sr(t))return this.animate(n[0],this.props.props[n[0]],t.transition);this.node[n[0]]=this.props.props[n[0]]}else for(var r=0;r<n.length;r++){if(!0===sr(t))return this.animate(n[r],this.props.props[n[r]],t.transition);this.node[n[r]]=this.props.props[n[r]]}this.config.parent.props&&!0===this.config.parent.props.__layout&&this.config.parent.triggerLayout(this.config.parent.props)}},animate:function(e,t,n){var r=this;if(void 0!==this.scheduledTransitions[e]&&"scheduled"===this.scheduledTransitions[e].f.state&&this.scheduledTransitions[e].f.stop(),this.node[e]!==t){var o={};o[e]=t;var i=this.node.animate(o,{duration:"object"===x(n)&&"duration"in n?n.duration:300,easing:"object"===x(n)&&"easing"in n?n.easing:"ease",delay:"object"===x(n)&&"delay"in n?n.delay:0}),a=this.node[e];if(this.scheduledTransitions[e]={v:o[e],f:i},void 0!==n.start&&"function"==typeof n.start&&i.once("animating",function(){n.start.call(r.component,r,e,a)}),this.config.parent.props&&!0===this.config.parent.props.__layout&&i.on("tick",function(){r.config.parent.triggerLayout(r.config.parent.props)}),void 0!==n.progress&&"function"==typeof n.progress){var s=0;i.on("tick",function(t,o){var i=o.progress;n.progress.call(r.component,r,e,i,s),s=i})}i.once("stopped",function(){void 0!==r.scheduledTransitions[e]&&!0===r.scheduledTransitions[e].canceled||(void 0!==r.node&&n.end&&"function"==typeof n.end&&n.end.call(r.component,r,e,r.node[e]),delete r.scheduledTransitions[e])}),i.start()}},destroy:function(){if(null!==this.node){c.debug("Deleting Node",this.nodeId);for(var e=Object.keys(this.scheduledTransitions),t=0;t<e.length;t++){var n=this.scheduledTransitions[e[t]];void 0!==n&&(n.canceled=!0,void 0!==n.f&&n.f.stop())}this.scheduledTransitions={},this.component=null,delete this.component,this.config=null,delete this.config,this.props.raw={},this.props.element=null,this.props.props=null,this.props={},delete this.props,this.triggerLayout=null,delete this.triggerLayout,this.forComponent=null,delete this.forComponent,this.node.destroy(),this.node=null}},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){for(var e=this.component[b.getChildren](),t=[],n=e.length,r=0;r<n;r++){var o=e[r];void 0!==o&&o.parent===(this[b.isSlot]?this.node.children[0]:this.node)&&t.push(o)}return t}},gr=function(e,t){return null===pr&&(pr={fontSize:32,fontFamily:S.get("defaultFont","sans-serif")}),Object.assign(Object.create(mr),{props:Object.assign(Object.create(hr),{props:{}}),scheduledTransitions:{},config:e,component:t})},yr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};nr=new cn(g(g({},{appWidth:n.w||1920,appHeight:n.h||1080,fpsUpdateInterval:n.fpsInterval||1e3,devicePhysicalPixelRatio:tr[n.renderQuality]||n.renderQuality||1,deviceLogicalPixelRatio:n.pixelRatio||er[n.screenResolution]||er[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in n?n.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:n.canvasColor&&P(n.canvasColor)||0,inspector:!0===n.inspector?Zn:void 0,boundsMargin:n.viewportMargin||0,renderEngine:rr(n),fontEngines:or(n),canvas:n.canvas,textureProcessingTimeLimit:n.textureProcessingTimeLimit,textureMemory:ir(n),createImageBitmapSupport:"auto",targetFPS:"maxFPS"in n?n.maxFPS:0}),n.advanced||{}),t);var r;return function(){var e=nr.stage;S.get("shaders",[]).forEach(function(t){e.shManager.registerShaderType(t.name,t.type)}),S.get("effects",[]).forEach(function(t){e.shManager.registerShaderType(t.name,t.type)})}(),function(){var e=nr.stage;S.get("fonts",[]).forEach(function(t){"sdf"===t.type||"msdf"===t.type?(!t.png&&t.file&&(t.png=t.file.replace(/\.[^.]+$/,".".concat(t.type,".png"))),!t.json&&t.file&&(t.json=t.file.replace(/\.[^.]+$/,".".concat(t.type,".json"))),e.fontManager.addFontFace(new An(t.type,{fontFamily:t.family,descriptors:{},atlasUrl:t.png,atlasDataUrl:t.json,stage:e,metrics:t.metrics}))):"web"===t.type&&e.fontManager.addFontFace(new dn({fontFamily:t.family,fontUrl:t.file,descriptors:{},metrics:t.metrics}))})}(),(r=e()).quit=function(){c.info("Closing App"),r.destroy(),r=null,nr=null},nr},vr="1.38.2",br={"@lightningjs/renderer":"^2.15.0"},xr={},wr={};function Sr(){return(Sr=i(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,me(function(){return r.import("./package-legacy-dseyxq3q.js")});case 1:if(void 0===(t=e.v)){e.n=2;break}return e.a(2,t.version);case 2:e.n=4;break;case 3:return e.p=3,e.v,e.a(2,br["@lightningjs/renderer"]);case 4:return e.a(2)}},e,null,[[0,3]])}))).apply(this,arguments)}var Tr,kr,Cr,Ar={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},Er=window.speechSynthesis,Ir=/android/i.test((window.navigator||{}).userAgent||""),Mr=new Map,Rr=!1,_r=null,Lr=function(){_r&&(clearTimeout(_r),_r=null)},Pr=function(e){if(!e||_r)return Lr();Er.pause(),setTimeout(function(){Er.resume()},0),_r=setTimeout(function(){Pr(e)},5e3)},Dr={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},Or=function(e){return void 0!==Er?(!1===Rr&&(t=Er.getVoices(),Dr.voice=t[0]||null,Rr=!0),function(e){var t=new SpeechSynthesisUtterance(e.message),n=e.id;return t.lang=e.lang||Dr.lang,t.pitch=e.pitch||Dr.pitch,t.rate=e.rate||Dr.rate,t.voice=e.voice||Dr.voice,t.volume=e.volume||Dr.volume,Mr.set(n,t),!1===Ir&&(t.onstart=function(){Pr(t)},t.onresume=function(){Pr(t)}),new Promise(function(e,r){t.onend=function(){Lr(),Mr.delete(n),e()},t.onerror=function(e){Lr(),Mr.delete(n),r(e)},Er.speak(t)})}(e)):(c.error("speechSynthesis web API not available"),Promise.reject({error:"unavailable"}));var t},Nr=function(){void 0!==Er&&(Er.cancel(),Lr())},Ur=!1,Br=0,jr=[],Fr=!1,zr=null,Vr=null,Hr={then:function(){},done:function(){},cancel:function(){},remove:function(){},stop:function(){}},Gr=function(e){return!1===Ur?Hr:qr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"off")},qr=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Br++,i=new Promise(function(e){n=e});return i.remove=i.cancel=function(){var t=jr.findIndex(function(e){return e.id===o});-1!==t&&jr.splice(t,1),c.debug('Announcer - removed from queue: "'.concat(e,'" (id: ').concat(o,")")),n("canceled")},i.stop=function(){o===zr&&(Nr(),Fr=!1,n("interupted"))},!1===r?"assertive"===t?jr.unshift({message:e,resolveFn:n,id:o}):jr.push({message:e,resolveFn:n,id:o}):jr.push({delay:r,resolveFn:n,id:o}),c.debug('Announcer - added to queue: "'.concat(e,'" (id: ').concat(o,")")),setTimeout(function(){Wr()},100),i},Wr=function(){var e=i(n().m(function e(){var t,r,o,i,a;return n().w(function(e){for(;;)switch(e.n){case 0:if(!0!==Fr&&0!==jr.length){e.n=1;break}return e.a(2);case 1:Fr=!0,t=jr.shift(),r=t.message,o=t.resolveFn,i=t.delay,a=t.id,zr=a,i?setTimeout(function(){Fr=!1,zr=null,o("finished"),Wr()},i):(null!==Vr&&clearTimeout(Vr),Vr=setTimeout(function(){c.debug('Announcer - speaking: "'.concat(r,'" (id: ').concat(a,")")),Or({message:r,id:a}).then(function(){c.debug('Announcer - finished speaking: "'.concat(r,'" (id: ').concat(a,")")),zr=null,Fr=!1,o("finished"),Wr()}).catch(function(e){zr=null,Fr=!1,c.debug('Announcer - error ("'.concat(e.error,'") while speaking: "').concat(r,'" (id: ').concat(a,")")),o(e.error),Wr()}),Vr=null},200));case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Kr={speak:Gr,polite:function(e){return Gr(e,"polite")},assertive:function(e){return Gr(e,"assertive")},stop:function(){Nr()},enable:function(){Ur=!0},disable:function(){Ur=!1},toggle:function(e){Ur=!!e},clear:function(){Fr=!1,jr.length=0},pause:function(e){return!1===Ur?Hr:qr(void 0,void 0,e)}},Xr=de({path:"",navigating:!1,data:null,params:null,hash:""},S.get("reactivityMode"),!0),$r=new Map,Yr=[],Jr={},Qr={},Zr=!1,eo=function(){var e=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:e[0],queryParams:new URLSearchParams(e[1]),hash:document.location.hash}},to=function(e){return e.replace(/^\/+|\/+$/g,"").toLowerCase()},no=function(e){return"object"===x(e)&&null!==e},ro=function(e){return"string"==typeof e},oo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.replace(/^\/+|\/+$/g,"");e=to(e);for(var r=!1,o=0,i=function(){var i=t[o];if(i.path=to(i.path),i.path===e)i.params={},r=i;else if(i.path.indexOf(":")>-1){var a=h(i.path.matchAll(/:([^\s/]+)/gi)),s=i.path;a.reverse().forEach(function(e){s=s.substring(0,e.index)+"([^\\s/]+)"+s.substring(e.index+e[0].length)}),s="^"+s;var l=n.match(new RegExp("".concat(s),"i"));l&&(i.params=a.reverse().reduce(function(e,t,n){return e[t[1]]=l[n+1],e},{}),r=i)}else if(i.path.endsWith("*")){var u=new RegExp(i.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),c=e.match(u);c&&(c[1]&&(i.params={path:c[1]}),r=i)}o++};!r&&o<t.length;)i();return r&&(r.options=g(g(g({},io),r.options),Jr),r.data||(r.data={})),r},io={inHistory:!0,keepAlive:!1,passFocus:!0,reuseComponent:!1},ao=function(){var e=i(n().m(function e(){var t,r,o,i,a,s,l,u,f,d,p,m,y,v,x,w,S,T,k,C,A,E,I,M,R,_,L;return n().w(function(e){for(;;)switch(e.n){case 0:if(Kr.stop(),Kr.clear(),Xr.navigating=!0,t=!1,!this.parent[b.routes]){e.n=21;break}if(r=Tr,o=eo(),i=o.hash,a=o.path,s=o.queryParams,l=oo(a,this.parent[b.routes]),Tr=l,!l){e.n=20;break}for(u={},f=h(s.entries()),d=0;d<f.length;d++)u[f[d][0]]=f[d][1];if(l.data=g(g(g({},l.data),Qr),u),null!==i&&(l.hash=i),!this.parent[b.routerHooks]){e.n=2;break}if(!(m=this.parent[b.routerHooks]).beforeEach){e.n=2;break}return e.n=1,m.beforeEach.call(this.parent,l,r);case 1:if(p=e.v,!ro(p)){e.n=2;break}return uo(p),e.a(2);case 2:if(!(l=no(p)?p:l).hooks){e.n=4;break}if(!l.hooks.before){e.n=4;break}return e.n=3,l.hooks.before.call(this.parent,l,r);case 3:if(y=e.v,!ro(y)){e.n=4;break}return Tr=r,uo(y),e.a(2);case 4:if(l=no(y)?y:l,!1===Zr&&r&&!0===r.options.inHistory&&Yr.push(r),"transition"in l||(l.transition=Ar),"function"==typeof l.transition&&(l.transition=l.transition(r,l)),x=$r.get(l.hash)||{},w=x.view,S=x.focus,T=g(g(g({},this[b.props]),l.params),l.data),r&&l.component===r.component&&!0===l.options.reuseComponent&&!0!==l.options.keepAlive)for(k in t=!0,w=this[b.children][this[b.children].length-1],T)w[b.props][k]=T[k];if(l.announce&&("string"==typeof l.announce&&(l.announce={message:l.announce}),Kr.speak(l.announce.message,l.announce.politeness)),w){e.n=6;break}return(v=wr.element({parent:this[b.children][0]})).populate({}),v.set("w","100%"),v.set("h","100%"),e.n=5,l.component({props:T},v,this);case 5:"Module"===(w=e.v)[Symbol.toStringTag]&&(w.default&&"function"==typeof w.default?w=w.default({props:T},v,this):c.error("Dynamic import doesn't have a default export or default is not a function")),"function"==typeof w&&(w=w({props:T},v,this)),e.n=12;break;case 6:if(v=w[b.holder],C=!1,!l.transition.before){e.n=11;break}if(!Array.isArray(l.transition.before)){e.n=10;break}A=0;case 7:if(!(A<l.transition.before.length)){e.n=9;break}if("alpha"!==l.transition.before[A].prop){e.n=8;break}return C=!0,e.a(3,9);case 8:A++,e.n=7;break;case 9:e.n=11;break;case 10:"alpha"===l.transition.before.prop&&(C=!0);case 11:!1===C&&v.set("alpha",1);case 12:if(!1===t&&this[b.children].push(w),kr=go.get(),E=this[b.children],this.activeView=E[E.length-1],void 0!==l.options&&!1===l.options.passFocus||(S?S.$focus():w.$focus()),l.transition.before)if(Array.isArray(l.transition.before))for(I=0;I<l.transition.before.length;I++)v.set(l.transition.before[I].prop,l.transition.before[I].value);else v.set(l.transition.before.prop,l.transition.before.value);if(M=!1,r&&!1===t&&(M=!0,(R=this[b.children].splice(1,1).pop())&&so(r,R,l.transition.out,Zr)),Xr.path=l.path,Xr.params=l.params,Xr.hash=i,Xr.data=l.data,!l.transition.in){e.n=19;break}if(!Array.isArray(l.transition.in)){e.n=18;break}_=0;case 13:if(!(_<l.transition.in.length)){e.n=17;break}if(_!==l.transition.length-1){e.n=15;break}return e.n=14,lo(v,l.transition.in[_],M);case 14:e.n=16;break;case 15:lo(v,l.transition.in[_],M);case 16:_++,e.n=13;break;case 17:e.n=19;break;case 18:return e.n=19,lo(v,l.transition.in,M);case 19:e.n=21;break;case 20:c.error("Route ".concat(i," not found")),(L=this.parent[b.routerHooks])&&"function"==typeof L.error&&L.error.call(this.parent,"Route ".concat(i," not found"));case 21:Zr=!1,Xr.navigating=!1;case 22:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}(),so=function(){var e=i(n().m(function e(t,r,o,i){var a;return n().w(function(e){for(;;)switch(e.n){case 0:if(!o){e.n=7;break}if(!Array.isArray(o)){e.n=6;break}a=0;case 1:if(!(a<o.length)){e.n=5;break}if(a!==o.length-1){e.n=3;break}return e.n=2,lo(r[b.holder],o[a]);case 2:e.n=4;break;case 3:lo(r[b.holder],o[a]);case 4:a++,e.n=1;break;case 5:e.n=7;break;case 6:return e.n=7,lo(r[b.holder],o);case 7:!1===i&&t.options&&!0===t.options.keepAlive?$r.set(t.hash,{view:r,focus:kr}):!0===i&&$r.delete(t.hash),!t.options||!0===t.options.keepAlive&&!0!==i||(r.destroy(),r=null),kr=null;case 8:return e.a(2)}},e)}));return function(t,n,r,o){return e.apply(this,arguments)}}(),lo=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(r){if(!0===n){var o=t.end;t.end=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o&&o(t),o=null,r()},void 0!==e?e.set(t.prop,{transition:t}):r()}else void 0!==e&&e.set(t.prop,t.value),r()})},uo=function(e){Qr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Jr=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},window.location.hash=e},co=function(){var e=Yr.pop();if(e&&Tr!==e)return Zr=!0,uo(e.hash,e.data,e.options),!0;var t=Tr&&Tr.options.backtrack||!1;if(!1===t)return!1;var n=/(\/:?[\w%\s-]+)$/,r=Tr.path,o=r.split("/").length;if(o<=1)return!1;for(;o--;){if(!n.test(r))return!1;r=r.replace(n,"");var i=oo(r,this.parent[b.routes]);if(i&&t)return uo(i.path),!0}return!1},fo={navigate:ao,back:co},po=null,ho=[],mo=new Map,go={_hold:!1,set hold(e){this._hold=e},get hold(){return this._hold},get:function(){return po},set:function(e,t){if(clearTimeout(Cr),e!==po){if(null===po&&(ho=yo([e])),null!==po)if(ho[ho.length-1]===e.parent)ho.push(e);else{for(var n=yo([e]),r=ho.length;r--&&!(n.indexOf(ho[r])>-1);)ho[r].lifecycle.state="unfocus";ho=n}for(var o=0;o<ho.length-1;)ho[o].lifecycle.state="focus",o++;Cr=setTimeout(function(){return bo(e,t)},!0===this.hold?S.get("holdTimeout",50):0)}},input:function(e,t){if(!0!==Xr.navigating){var n=vo(po,e);if(null!==n){var r,o=n[b.inputEvents];o[e]?r=o[e].call(n,t):o.any&&(r=o.any.call(n,t)),void 0!==r&&mo.set(t.code,r)}}}},yo=function(e){return void 0!==e[0].parent?(e.unshift(e[0].parent),yo(e)):e},vo=function(e,t){return!e[b.inputEvents]||"function"!=typeof e[b.inputEvents][t]&&"function"!=typeof e[b.inputEvents].any?void 0!==e.parent?vo(e.parent,t):null:e},bo=function(e,t){if(c.info("\nFocus chain:\n",ho.map(function(e,t){return"\t".repeat(t)+"↳ "+e.componentId}).join("\n")),po=e,e.lifecycle.state="focus",t instanceof KeyboardEvent){var n=new KeyboardEvent("keydown",t);n[b.internalEvent]=!0,document.dispatchEvent(n)}},xo=new Map,wo=new Map;function So(e){if(null===e||"object"!==x(e))return e;for(var t=function(e){return e&&"object"===x(e)&&!0===e[b.isProxy]}(e)?le(e):e,n=Array.isArray(t)?[]:{},r=0,o=Object.keys(t);r<o.length;r++){var i=o[r],a=t[i];n[i]=a&&"object"===x(a)?So(a):a}return n}var To=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=xo.get(t);void 0===o&&(o=new Map,xo.set(t,o));var i=o.get(e);void 0===i&&(i=new Set,o.set(e,i)),i.add({cb:n,priority:r}),wo.delete(t)},ko=function(e,t){var n=xo.get(t);void 0!==n&&n.has(e)&&(n.delete(e),xo.set(t,n),wo.delete(t))},Co=function(e,t,n){!1===n&&(t=So(t));var r=xo.get(e);if(void 0===r||0===r.size)return!0;if(!1===wo.has(e)){var o,i=[],a=w(r);try{for(a.s();!(o=a.n()).done;){var s,l=y(o.value,2),u=l[0],c=w(l[1]);try{for(c.s();!(s=c.n()).done;){var f=s.value;i.push(g(g({},f),{},{component:u}))}}catch(b){c.e(b)}finally{c.f()}}}catch(b){a.e(b)}finally{a.f()}i.sort(function(e,t){return t.priority-e.priority}),wo.set(e,i)}for(var d=wo.get(e),p=0;p<d.length;p++){var h=d[p],m=h.cb,v=h.component;if(!1===m.call(v,t))return!1}return!0},Ao=function(e){var t,n=w(xo);try{for(n.s();!(t=n.n()).done;){var r=y(t.value,2),o=r[0],i=r[1];i.has(e)&&(i.delete(e),wo.delete(o),0===i.size&&xo.delete(o))}}catch(a){n.e(a)}finally{n.f()}},Eo=v(v(v(v(v(v({focus:{value:function(e){return c.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(e)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(e){"focus"===this.lifecycle.state&&(this.lifecycle.state="refocus"),go.set(this,e)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[b.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){for(var e in this.eol=!0,this.lifecycle.state="destroy",!0===this.hasFocus&&this.parent.$focus(),this[b.state])Array.isArray(this[b.state][e])&&(this[b.state][e]=[]);this.$clearTimeouts(),this.$clearIntervals(),Ao(this),Io(this[b.children]),this[b.children].length=0,te(this[b.effects]),this[b.state]={},this[b.props]={},this[b.computed]=null,this.lifecycle={},this[b.effects].length=0,this.parent=null,this.rootParent=null,this[b.wrapper]=null,this[b.originalState]=null,this[b.slots].length=0,delete this[b.computed],delete this[b.effects],delete this.parent,delete this.rootParent,delete this[b.wrapper],delete this[b.originalState],delete this[b.children],delete this[b.slots],delete this.componentId,delete this[b.id],delete this.ref,delete this[b.state].hasFocus,this[b.holder].destroy(),this[b.holder]=null,delete this[b.holder],this[b.cleanup](),delete this[b.cleanup],c.debug("Destroyed component ".concat(this.componentId))},writable:!1,enumerable:!0,configurable:!1}},b.removeGlobalEffects,{value:function(){te(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])},writable:!1,enumerable:!1,configurable:!1}),"select",{value:function(e){return c.warn("this.select is deprecated, use this.$select instead"),this.$select(e)},writable:!1,enumerable:!0,configurable:!1}),"$select",{value:function(e){if(!0!==this.eol){var t=null;return this[b.children].forEach(function(n){Array.isArray(n)?n.forEach(function(n){n.ref===e&&(t=n)}):Object.getPrototypeOf(n)===Object.prototype?Object.keys(n).forEach(function(r){n[r].ref===e&&(t=n[r])}):n.ref===e&&(t=n)}),t}},writable:!1,enumerable:!0,configurable:!1}),"trigger",{value:function(e){return c.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(e)},writable:!1,enumerable:!0,configurable:!1}),"$trigger",{value:function(e){var t=this[b.originalState];if(e.indexOf(".")>-1){var n=e.split(".");e=n.pop(n);for(var r=0;r<n.length;r++)t=t[n[r]]}re(t,e,!0)},writable:!1,enumerable:!0,configurable:!1}),"shader",{value:function(e,t){return{type:e,props:t}},writable:!1,enumerable:!0,configurable:!1}),Io=function(e){for(var t=0;t<e.length;t++){if(!e[t])return;e[t].destroy&&"function"==typeof e[t].destroy?e[t].destroy():Object.getPrototypeOf(e[t])===Object.prototype&&Io(Object.values(e[t])),e[t]=null}e.length=0},Mo={$setTimeout:{value:function(e,t){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(!0!==this.eol){var a=setTimeout(function(){n.$clearTimeout(a),e.apply(null,o)},t,o);return this[b.timeouts].push(a),a}},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(e){var t=this[b.timeouts].indexOf(e);t>-1&&(this[b.timeouts].splice(t,1),clearTimeout(e))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(var e=0;e<this[b.timeouts].length;e++)clearTimeout(this[b.timeouts][e]);this[b.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(!0!==this.eol){var i=setInterval(function(){return e.apply(null,r)},t,r);return this[b.intervals].push(i),i}},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(e){var t=this[b.intervals].indexOf(e);t>-1&&(this[b.intervals].splice(t,1),clearTimeout(e))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(var e=0;e<this[b.intervals].length;e++)clearInterval(this[b.intervals][e]);this[b.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},Ro={$emit:{value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0!==this.eol)return Co(e,t,n)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==this.eol&&To(this,e,t,n)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(e){ko(this,e)},writable:!1,enumerable:!0,configurable:!1}},_o={$router:{value:{to:uo,back:co,get currentRoute(){return Tr},get routes(){return this[b.routes]},get navigating(){return Xr.navigating},state:Xr},writable:!1,enumerable:!0,configurable:!1}},Lo={$announcer:{value:Kr,writable:!1,enumerable:!0,configurable:!1}},Po=v(v({$size:{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{w:0,h:0};this[b.holder].set("w",e.w||0),this[b.holder].set("h",e.h||0)},writable:!1,enumerable:!0,configurable:!1}},b.renderer,{value:function(){return xr},writable:!1,enumerable:!0,configurable:!1}),b.getChildren,{value:function(){var e=this,t=this.rootParent||this.parent;return(this[b.children]||[]).concat(t&&t[b.getChildren]().map(function(e){return Object.getPrototypeOf(e)===Object.prototype?Object.values(e).map(function(e){return e.forComponent=e[Symbol.for("config")]&&e[Symbol.for("config")].parent.component,e}):e}).flat().filter(function(t){if(t&&t.component)return t.component&&t.component.componentId===e.componentId||t.forComponent&&t.forComponent.componentId===e.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}),Do=g(g(g({},Ro),_o),Lo),Oo=Object.defineProperties(v({},b.launched,!1),g(g(g(g({},Eo),Mo),Do),Po)),No={cast:function(e){return e},required:!1},Uo=0;function Bo(e,t){e[b.identifier]=++Uo,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;X[t]={},[].concat(h(Object.keys(e)),h(Object.getOwnPropertySymbols(e))).forEach(function(n){"function"==typeof e[n]&&(X[t][n]=e[n])})}(t.hooks,e[b.identifier]),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];-1===t.indexOf("ref")&&t.push("ref"),e[b.propKeys]=[];for(var n=t.length,r=function(){var n=g(g({},No),"object"===x(t[o])?t[o]:{key:t[o]});e[b.propKeys].push(n.key),Object.defineProperty(e,n.key,{get:function(){var e=n.cast(void 0!==this[b.props]&&n.key in this[b.props]?this[b.props][n.key]:"default"in n?n.default:void 0);return!0===n.required&&void 0===e&&c.warn("".concat(n.key," is required")),e},set:function(e){c.warn('Warning! Avoid mutating props directly (prop "'.concat(n.key,'" in component "').concat(this.componentId,'")')),this[b.props][n.key]=e}})},o=0;o<n;o++)r()}(e,t.props),t.methods&&function(e,t){for(var n in e[b.methodKeys]=[],t)e[b.propKeys]&&e[b.propKeys].indexOf(n)>-1?c.error("".concat(n," already exists as a prop")):("function"!=typeof t[n]&&c.warn("".concat(n," is not a function")),e[b.methodKeys].push(n),e[n]=t[n])}(e,t.methods),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};Object.defineProperty(e,b.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});var n=Object.keys(t.apply(e)||{});n.indexOf("hasFocus")>-1?c.warn("State `hasFocus` already exists as a built-in Component variable (to indicate whether the component currently has focus). Avoid using your own `hasFocus` key in the Component state"):n.push(["hasFocus"]);for(var r=n.length,o=function(){var t=n[i];void 0!==e[b.propKeys]&&e[b.propKeys].indexOf(t)>-1&&c.error("State ".concat(t," already exists as a prop")),void 0!==e[b.methodKeys]&&e[b.methodKeys].indexOf(t)>-1&&c.error("State ".concat(t," already exists as a method")),e[b.stateKeys].push(t),Object.defineProperty(e,t,{get:function(){return this[b.state][t]},set:function(e){this[b.state][t]=e}})},i=0;i<r;i++)o()}(e,t.state),t.computed&&function(e,t){e[b.computedKeys]=[];var n=function(n){e[b.stateKeys]&&e[b.stateKeys].indexOf(n)>-1?c.error("".concat(n," already exists as a state variable")):e[b.propKeys]&&e[b.propKeys].indexOf(n)>-1?c.error("".concat(n," already exists as a prop")):e[b.methodKeys]&&e[b.methodKeys].indexOf(n)>-1?c.error("".concat(n," already exists as a method")):("function"!=typeof t[n]&&c.warn("".concat(n," is not a function")),e[b.computedKeys].push(n),Object.defineProperty(e,n,{get:function(){return t[n].apply(this)}}))};for(var r in t)n(r)}(e,t.computed),t.watch&&function(e,t){e[b.watchKeys]=[],e[b.watchers]={};var n=function(n){"function"!=typeof t[n]&&console.warn("".concat(n," is not a function")),e[b.watchKeys].push(n),e[b.watchers][n]=function(e,r){t[n].call(this,e,r)}};for(var r in t)n(r)}(e,t.watch);var n=void 0!==t.router?t.router:t.routes;return void 0!==n&&function(e,t){var n=t;!1===Array.isArray(t)&&(e[b.routerHooks]=t.hooks,n=t.routes),e[b.routes]=[];for(var r=n.length,o=0;o<r;o++)e[b.routes][o]=n[o],e[b.routes][o].options=g(g({},{inHistory:!0}),n[o].options)}(e,n),t.input&&function(e,t){e[b.inputEvents]=[],Object.keys(t).forEach(function(n){"function"!=typeof t[n]&&c.warn("".concat(t[n]," is not a function")),e[b.inputEvents][n]=t[n]})}(e,t.input),e}var jo,Fo=null,zo=function(){return{Circle:qo("Circle",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].color=t.color,l[0].w=t.size,l[0].h=t.size,l[0].effects=[t.shader("radius",{radius:t.radius})],s[0].populate(l[0]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("color",e.color)},function(e,t,n,r,o,i){t[0].set("w",e.size)},function(e,t,n,r,o,i){t[0].set("h",e.size)},function(e,t,n,r,o,i){t[0].set("effects",[e.shader("radius",{radius:e.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius:function(){return this.size/2}}}),RouterView:qo("RouterView",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=1*e.node.width,l[0].height=1*e.node.height,s[0].populate(l[0]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[],context:{}},state:function(){return{activeView:null}},hooks:{ready:function(){var e=this;return i(n().m(function t(){return n().w(function(t){for(;;)switch(t.n){case 0:if(!e.parent[b.routerHooks]||!e.parent[b.routerHooks].init){t.n=1;break}return t.n=1,e.parent[b.routerHooks].init.apply(e.parent);case 1:Fo=function(){return fo.navigate.apply(e)},fo.navigate.apply(e),window.addEventListener("hashchange",Fo);case 2:return t.a(2)}},t)}))()},destroy:function(){window.removeEventListener("hashchange",Fo,!1)},focus:function(){this.activeView&&go.get()===this&&this.activeView.$focus()}},input:{back:function(e){!1===fo.back.call(this)&&this.parent.$focus(e)}}}),Sprite:qo("Sprite",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=1*e.node.width,l[0].h=1*e.node.height,l[0].texture=t.texture,l[0].color=t.color,s[0].populate(l[0]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("texture",e.texture)},function(e,t,n,r,o,i){t[0].set("color",e.color)}],context:{}},props:["image","map","frame","color"],state:function(){return{spriteTexture:null}},computed:{texture:function(){var e="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(null!==this.spriteTexture&&e)return this[b.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:e.x,y:e.y,width:e.w,height:e.h})}},hooks:{ready:function(){this.spriteTexture=this[b.renderer]().createTexture("ImageTexture",{src:this.image})}}}),FPScounter:qo("FPScounter",{code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].y=15,f[1].x=20,c[1].populate(f[1]),!0===h&&(m-=1),e=c[1],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),c[2].populate(f[2]),!0===h&&(m-=1),g[3]=n.components&&n.components.Sprite||r.Sprite,e=c[2],f[3]={},c[3]=this.element({parent:e||"root"},!0===h?u:t),f[3].image=t.image,f[3].w=43,f[3].h=25,f[3].map=t.sprite,f[3].frame="fps",p[3]=[],void 0!==g[3])for(var y in g[3][Symbol.for("config")].props)delete f[3][g[3][Symbol.for("config")].props[y]],p[3].push(g[3][Symbol.for("config")].props[y]);if(c[3].populate(f[3]),!0===h&&(m-=1),e=c[3],d[4]={},d[4].image=t.image,d[4].w=43,d[4].h=25,d[4].map=t.sprite,d[4].frame="fps",s=d[4].is||"Sprite",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);if(c[4]=r[4].call(null,{props:d[4]},c[3],t),c[4][Symbol.for("slots")][0]?(e=c[4][Symbol.for("slots")][0],u=c[4],h=!0):e=c[4][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[2],f[5]={},c[5]=this.element({parent:e||"root"},!0===h?u:t),f[5].x=58,f[5].y=2,c[5].populate(f[5]),!0===h&&(m-=1),g[6]=n.components&&n.components.Sprite||r.Sprite,e=c[5],f[6]={},c[6]=this.element({parent:e||"root"},!0===h?u:t),f[6].image=t.image,f[6].x=0,f[6].h=20,f[6].w=20,f[6].map=t.sprite,f[6].frame=t.fps[0],p[6]=[],void 0!==g[6])for(var v in g[6][Symbol.for("config")].props)delete f[6][g[6][Symbol.for("config")].props[v]],p[6].push(g[6][Symbol.for("config")].props[v]);if(c[6].populate(f[6]),!0===h&&(m-=1),e=c[6],d[7]={},d[7].image=t.image,d[7].x=0,d[7].h=20,d[7].w=20,d[7].map=t.sprite,l=t.fps[0],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[7].frame=l,s=d[7].is||"Sprite",r[7],"string"==typeof s){if(r[7]=n.components&&n.components[s]||r[s],!r[7])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[7]=s);if(c[7]=r[7].call(null,{props:d[7]},c[6],t),c[7][Symbol.for("slots")][0]?(e=c[7][Symbol.for("slots")][0],u=c[7],h=!0):e=c[7][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[8]=n.components&&n.components.Sprite||r.Sprite,e=c[5],f[8]={},c[8]=this.element({parent:e||"root"},!0===h?u:t),f[8].image=t.image,f[8].x=18,f[8].h=20,f[8].w=20,f[8].map=t.sprite,f[8].frame=t.fps[1],p[8]=[],void 0!==g[8])for(var b in g[8][Symbol.for("config")].props)delete f[8][g[8][Symbol.for("config")].props[b]],p[8].push(g[8][Symbol.for("config")].props[b]);if(c[8].populate(f[8]),!0===h&&(m-=1),e=c[8],d[9]={},d[9].image=t.image,d[9].x=18,d[9].h=20,d[9].w=20,d[9].map=t.sprite,l=t.fps[1],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[9].frame=l,s=d[9].is||"Sprite",r[9],"string"==typeof s){if(r[9]=n.components&&n.components[s]||r[s],!r[9])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[9]=s);if(c[9]=r[9].call(null,{props:d[9]},c[8],t),c[9][Symbol.for("slots")][0]?(e=c[9][Symbol.for("slots")][0],u=c[9],h=!0):e=c[9][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[10]=n.components&&n.components.Sprite||r.Sprite,e=c[5],f[10]={},c[10]=this.element({parent:e||"root"},!0===h?u:t),f[10].image=t.image,f[10].x=36,f[10].h=20,f[10].w=20,f[10].map=t.sprite,f[10].frame=t.fps[2],p[10]=[],void 0!==g[10])for(var x in g[10][Symbol.for("config")].props)delete f[10][g[10][Symbol.for("config")].props[x]],p[10].push(g[10][Symbol.for("config")].props[x]);if(c[10].populate(f[10]),!0===h&&(m-=1),e=c[10],d[11]={},d[11].image=t.image,d[11].x=36,d[11].h=20,d[11].w=20,d[11].map=t.sprite,l=t.fps[2],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[11].frame=l,s=d[11].is||"Sprite",r[11],"string"==typeof s){if(r[11]=n.components&&n.components[s]||r[s],!r[11])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[11]=s);if(c[11]=r[11].call(null,{props:d[11]},c[10],t),c[11][Symbol.for("slots")][0]?(e=c[11][Symbol.for("slots")][0],u=c[11],h=!0):e=c[11][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[1],f[12]={},c[12]=this.element({parent:e||"root"},!0===h?u:t),f[12].x=150,c[12].populate(f[12]),!0===h&&(m-=1),g[13]=n.components&&n.components.Sprite||r.Sprite,e=c[12],f[13]={},c[13]=this.element({parent:e||"root"},!0===h?u:t),f[13].image=t.image,f[13].y=2,f[13].w=48,f[13].h=25,f[13].map=t.sprite,f[13].frame="avg",p[13]=[],void 0!==g[13])for(var w in g[13][Symbol.for("config")].props)delete f[13][g[13][Symbol.for("config")].props[w]],p[13].push(g[13][Symbol.for("config")].props[w]);if(c[13].populate(f[13]),!0===h&&(m-=1),e=c[13],d[14]={},d[14].image=t.image,d[14].y=2,d[14].w=48,d[14].h=25,d[14].map=t.sprite,d[14].frame="avg",s=d[14].is||"Sprite",r[14],"string"==typeof s){if(r[14]=n.components&&n.components[s]||r[s],!r[14])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[14]=s);if(c[14]=r[14].call(null,{props:d[14]},c[13],t),c[14][Symbol.for("slots")][0]?(e=c[14][Symbol.for("slots")][0],u=c[14],h=!0):e=c[14][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[12],f[15]={},c[15]=this.element({parent:e||"root"},!0===h?u:t),f[15].x=63,f[15].y=2,c[15].populate(f[15]),!0===h&&(m-=1),g[16]=n.components&&n.components.Sprite||r.Sprite,e=c[15],f[16]={},c[16]=this.element({parent:e||"root"},!0===h?u:t),f[16].image=t.image,f[16].x=0,f[16].h=20,f[16].w=20,f[16].map=t.sprite,f[16].frame=t.avgFps[0],p[16]=[],void 0!==g[16])for(var S in g[16][Symbol.for("config")].props)delete f[16][g[16][Symbol.for("config")].props[S]],p[16].push(g[16][Symbol.for("config")].props[S]);if(c[16].populate(f[16]),!0===h&&(m-=1),e=c[16],d[17]={},d[17].image=t.image,d[17].x=0,d[17].h=20,d[17].w=20,d[17].map=t.sprite,l=t.avgFps[0],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[17].frame=l,s=d[17].is||"Sprite",r[17],"string"==typeof s){if(r[17]=n.components&&n.components[s]||r[s],!r[17])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[17]=s);if(c[17]=r[17].call(null,{props:d[17]},c[16],t),c[17][Symbol.for("slots")][0]?(e=c[17][Symbol.for("slots")][0],u=c[17],h=!0):e=c[17][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[18]=n.components&&n.components.Sprite||r.Sprite,e=c[15],f[18]={},c[18]=this.element({parent:e||"root"},!0===h?u:t),f[18].image=t.image,f[18].x=18,f[18].h=20,f[18].w=20,f[18].map=t.sprite,f[18].frame=t.avgFps[1],p[18]=[],void 0!==g[18])for(var T in g[18][Symbol.for("config")].props)delete f[18][g[18][Symbol.for("config")].props[T]],p[18].push(g[18][Symbol.for("config")].props[T]);if(c[18].populate(f[18]),!0===h&&(m-=1),e=c[18],d[19]={},d[19].image=t.image,d[19].x=18,d[19].h=20,d[19].w=20,d[19].map=t.sprite,l=t.avgFps[1],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[19].frame=l,s=d[19].is||"Sprite",r[19],"string"==typeof s){if(r[19]=n.components&&n.components[s]||r[s],!r[19])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[19]=s);if(c[19]=r[19].call(null,{props:d[19]},c[18],t),c[19][Symbol.for("slots")][0]?(e=c[19][Symbol.for("slots")][0],u=c[19],h=!0):e=c[19][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[20]=n.components&&n.components.Sprite||r.Sprite,e=c[15],f[20]={},c[20]=this.element({parent:e||"root"},!0===h?u:t),f[20].image=t.image,f[20].x=36,f[20].h=20,f[20].w=20,f[20].map=t.sprite,f[20].frame=t.avgFps[2],p[20]=[],void 0!==g[20])for(var k in g[20][Symbol.for("config")].props)delete f[20][g[20][Symbol.for("config")].props[k]],p[20].push(g[20][Symbol.for("config")].props[k]);if(c[20].populate(f[20]),!0===h&&(m-=1),e=c[20],d[21]={},d[21].image=t.image,d[21].x=36,d[21].h=20,d[21].w=20,d[21].map=t.sprite,l=t.avgFps[2],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[21].frame=l,s=d[21].is||"Sprite",r[21],"string"==typeof s){if(r[21]=n.components&&n.components[s]||r[s],!r[21])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[21]=s);if(c[21]=r[21].call(null,{props:d[21]},c[20],t),c[21][Symbol.for("slots")][0]?(e=c[21][Symbol.for("slots")][0],u=c[21],h=!0):e=c[21][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[1],f[22]={},c[22]=this.element({parent:e||"root"},!0===h?u:t),f[22].x=0,f[22].y=40,c[22].populate(f[22]),!0===h&&(m-=1),g[23]=n.components&&n.components.Sprite||r.Sprite,e=c[22],f[23]={},c[23]=this.element({parent:e||"root"},!0===h?u:t),f[23].image=t.image,f[23].x="-2",f[23].w=47,f[23].h=25,f[23].map=t.sprite,f[23].frame="min",p[23]=[],void 0!==g[23])for(var C in g[23][Symbol.for("config")].props)delete f[23][g[23][Symbol.for("config")].props[C]],p[23].push(g[23][Symbol.for("config")].props[C]);if(c[23].populate(f[23]),!0===h&&(m-=1),e=c[23],d[24]={},d[24].image=t.image,d[24].x="-2",d[24].w=47,d[24].h=25,d[24].map=t.sprite,d[24].frame="min",s=d[24].is||"Sprite",r[24],"string"==typeof s){if(r[24]=n.components&&n.components[s]||r[s],!r[24])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[24]=s);if(c[24]=r[24].call(null,{props:d[24]},c[23],t),c[24][Symbol.for("slots")][0]?(e=c[24][Symbol.for("slots")][0],u=c[24],h=!0):e=c[24][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[22],f[25]={},c[25]=this.element({parent:e||"root"},!0===h?u:t),f[25].x=58,f[25].y=2,c[25].populate(f[25]),!0===h&&(m-=1),g[26]=n.components&&n.components.Sprite||r.Sprite,e=c[25],f[26]={},c[26]=this.element({parent:e||"root"},!0===h?u:t),f[26].image=t.image,f[26].x=0,f[26].h=20,f[26].w=20,f[26].map=t.sprite,f[26].frame=t.minFps[0],p[26]=[],void 0!==g[26])for(var A in g[26][Symbol.for("config")].props)delete f[26][g[26][Symbol.for("config")].props[A]],p[26].push(g[26][Symbol.for("config")].props[A]);if(c[26].populate(f[26]),!0===h&&(m-=1),e=c[26],d[27]={},d[27].image=t.image,d[27].x=0,d[27].h=20,d[27].w=20,d[27].map=t.sprite,l=t.minFps[0],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[27].frame=l,s=d[27].is||"Sprite",r[27],"string"==typeof s){if(r[27]=n.components&&n.components[s]||r[s],!r[27])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[27]=s);if(c[27]=r[27].call(null,{props:d[27]},c[26],t),c[27][Symbol.for("slots")][0]?(e=c[27][Symbol.for("slots")][0],u=c[27],h=!0):e=c[27][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[28]=n.components&&n.components.Sprite||r.Sprite,e=c[25],f[28]={},c[28]=this.element({parent:e||"root"},!0===h?u:t),f[28].image=t.image,f[28].x=18,f[28].h=20,f[28].w=20,f[28].map=t.sprite,f[28].frame=t.minFps[1],p[28]=[],void 0!==g[28])for(var E in g[28][Symbol.for("config")].props)delete f[28][g[28][Symbol.for("config")].props[E]],p[28].push(g[28][Symbol.for("config")].props[E]);if(c[28].populate(f[28]),!0===h&&(m-=1),e=c[28],d[29]={},d[29].image=t.image,d[29].x=18,d[29].h=20,d[29].w=20,d[29].map=t.sprite,l=t.minFps[1],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[29].frame=l,s=d[29].is||"Sprite",r[29],"string"==typeof s){if(r[29]=n.components&&n.components[s]||r[s],!r[29])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[29]=s);if(c[29]=r[29].call(null,{props:d[29]},c[28],t),c[29][Symbol.for("slots")][0]?(e=c[29][Symbol.for("slots")][0],u=c[29],h=!0):e=c[29][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[30]=n.components&&n.components.Sprite||r.Sprite,e=c[25],f[30]={},c[30]=this.element({parent:e||"root"},!0===h?u:t),f[30].image=t.image,f[30].x=36,f[30].h=20,f[30].w=20,f[30].map=t.sprite,f[30].frame=t.minFps[2],p[30]=[],void 0!==g[30])for(var I in g[30][Symbol.for("config")].props)delete f[30][g[30][Symbol.for("config")].props[I]],p[30].push(g[30][Symbol.for("config")].props[I]);if(c[30].populate(f[30]),!0===h&&(m-=1),e=c[30],d[31]={},d[31].image=t.image,d[31].x=36,d[31].h=20,d[31].w=20,d[31].map=t.sprite,l=t.minFps[2],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[31].frame=l,s=d[31].is||"Sprite",r[31],"string"==typeof s){if(r[31]=n.components&&n.components[s]||r[s],!r[31])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[31]=s);if(c[31]=r[31].call(null,{props:d[31]},c[30],t),c[31][Symbol.for("slots")][0]?(e=c[31][Symbol.for("slots")][0],u=c[31],h=!0):e=c[31][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[1],f[32]={},c[32]=this.element({parent:e||"root"},!0===h?u:t),f[32].x=150,f[32].y=40,c[32].populate(f[32]),!0===h&&(m-=1),g[33]=n.components&&n.components.Sprite||r.Sprite,e=c[32],f[33]={},c[33]=this.element({parent:e||"root"},!0===h?u:t),f[33].image=t.image,f[33].w=53,f[33].h=25,f[33].map=t.sprite,f[33].frame="max",p[33]=[],void 0!==g[33])for(var M in g[33][Symbol.for("config")].props)delete f[33][g[33][Symbol.for("config")].props[M]],p[33].push(g[33][Symbol.for("config")].props[M]);if(c[33].populate(f[33]),!0===h&&(m-=1),e=c[33],d[34]={},d[34].image=t.image,d[34].w=53,d[34].h=25,d[34].map=t.sprite,d[34].frame="max",s=d[34].is||"Sprite",r[34],"string"==typeof s){if(r[34]=n.components&&n.components[s]||r[s],!r[34])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[34]=s);if(c[34]=r[34].call(null,{props:d[34]},c[33],t),c[34][Symbol.for("slots")][0]?(e=c[34][Symbol.for("slots")][0],u=c[34],h=!0):e=c[34][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[32],f[35]={},c[35]=this.element({parent:e||"root"},!0===h?u:t),f[35].x=63,f[35].y=2,c[35].populate(f[35]),!0===h&&(m-=1),g[36]=n.components&&n.components.Sprite||r.Sprite,e=c[35],f[36]={},c[36]=this.element({parent:e||"root"},!0===h?u:t),f[36].image=t.image,f[36].x=0,f[36].h=20,f[36].w=20,f[36].map=t.sprite,f[36].frame=t.maxFps[0],p[36]=[],void 0!==g[36])for(var R in g[36][Symbol.for("config")].props)delete f[36][g[36][Symbol.for("config")].props[R]],p[36].push(g[36][Symbol.for("config")].props[R]);if(c[36].populate(f[36]),!0===h&&(m-=1),e=c[36],d[37]={},d[37].image=t.image,d[37].x=0,d[37].h=20,d[37].w=20,d[37].map=t.sprite,l=t.maxFps[0],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[37].frame=l,s=d[37].is||"Sprite",r[37],"string"==typeof s){if(r[37]=n.components&&n.components[s]||r[s],!r[37])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[37]=s);if(c[37]=r[37].call(null,{props:d[37]},c[36],t),c[37][Symbol.for("slots")][0]?(e=c[37][Symbol.for("slots")][0],u=c[37],h=!0):e=c[37][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[38]=n.components&&n.components.Sprite||r.Sprite,e=c[35],f[38]={},c[38]=this.element({parent:e||"root"},!0===h?u:t),f[38].image=t.image,f[38].x=18,f[38].h=20,f[38].w=20,f[38].map=t.sprite,f[38].frame=t.maxFps[1],p[38]=[],void 0!==g[38])for(var _ in g[38][Symbol.for("config")].props)delete f[38][g[38][Symbol.for("config")].props[_]],p[38].push(g[38][Symbol.for("config")].props[_]);if(c[38].populate(f[38]),!0===h&&(m-=1),e=c[38],d[39]={},d[39].image=t.image,d[39].x=18,d[39].h=20,d[39].w=20,d[39].map=t.sprite,l=t.maxFps[1],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[39].frame=l,s=d[39].is||"Sprite",r[39],"string"==typeof s){if(r[39]=n.components&&n.components[s]||r[s],!r[39])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[39]=s);if(c[39]=r[39].call(null,{props:d[39]},c[38],t),c[39][Symbol.for("slots")][0]?(e=c[39][Symbol.for("slots")][0],u=c[39],h=!0):e=c[39][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[40]=n.components&&n.components.Sprite||r.Sprite,e=c[35],f[40]={},c[40]=this.element({parent:e||"root"},!0===h?u:t),f[40].image=t.image,f[40].x=36,f[40].h=20,f[40].w=20,f[40].map=t.sprite,f[40].frame=t.maxFps[2],p[40]=[],void 0!==g[40])for(var L in g[40][Symbol.for("config")].props)delete f[40][g[40][Symbol.for("config")].props[L]],p[40].push(g[40][Symbol.for("config")].props[L]);if(c[40].populate(f[40]),!0===h&&(m-=1),e=c[40],d[41]={},d[41].image=t.image,d[41].x=36,d[41].h=20,d[41].w=20,d[41].map=t.sprite,l=t.maxFps[2],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[41].frame=l,s=d[41].is||"Sprite",r[41],"string"==typeof s){if(r[41]=n.components&&n.components[s]||r[s],!r[41])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[41]=s);return c[41]=r[41].call(null,{props:d[41]},c[40],t),c[41][Symbol.for("slots")][0]?(e=c[41][Symbol.for("slots")][0],u=c[41],h=!0):e=c[41][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[3]=null,d[4]=null,r[4]=null,g[6]=null,d[7]=null,r[7]=null,g[8]=null,d[9]=null,r[9]=null,g[10]=null,d[11]=null,r[11]=null,g[13]=null,d[14]=null,r[14]=null,g[16]=null,d[17]=null,r[17]=null,g[18]=null,d[19]=null,r[19]=null,g[20]=null,d[21]=null,r[21]=null,g[23]=null,d[24]=null,r[24]=null,g[26]=null,d[27]=null,r[27]=null,g[28]=null,d[29]=null,r[29]=null,g[30]=null,d[31]=null,r[31]=null,g[33]=null,d[34]=null,r[34]=null,g[36]=null,d[37]=null,r[37]=null,g[38]=null,d[39]=null,r[39]=null,g[40]=null,d[41]=null,r[41]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[6]&&-1!==skips[6].indexOf("frame")||t[6].set("frame",e.fps[0])},function(e,t,n,r,o,i){t[7][Symbol.for("props")].frame=e.fps[0]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("frame")||t[8].set("frame",e.fps[1])},function(e,t,n,r,o,i){t[9][Symbol.for("props")].frame=e.fps[1]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[10]&&-1!==skips[10].indexOf("frame")||t[10].set("frame",e.fps[2])},function(e,t,n,r,o,i){t[11][Symbol.for("props")].frame=e.fps[2]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("frame")||t[16].set("frame",e.avgFps[0])},function(e,t,n,r,o,i){t[17][Symbol.for("props")].frame=e.avgFps[0]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("frame")||t[18].set("frame",e.avgFps[1])},function(e,t,n,r,o,i){t[19][Symbol.for("props")].frame=e.avgFps[1]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[20]&&-1!==skips[20].indexOf("frame")||t[20].set("frame",e.avgFps[2])},function(e,t,n,r,o,i){t[21][Symbol.for("props")].frame=e.avgFps[2]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[26]&&-1!==skips[26].indexOf("frame")||t[26].set("frame",e.minFps[0])},function(e,t,n,r,o,i){t[27][Symbol.for("props")].frame=e.minFps[0]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[28]&&-1!==skips[28].indexOf("frame")||t[28].set("frame",e.minFps[1])},function(e,t,n,r,o,i){t[29][Symbol.for("props")].frame=e.minFps[1]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[30]&&-1!==skips[30].indexOf("frame")||t[30].set("frame",e.minFps[2])},function(e,t,n,r,o,i){t[31][Symbol.for("props")].frame=e.minFps[2]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[36]&&-1!==skips[36].indexOf("frame")||t[36].set("frame",e.maxFps[0])},function(e,t,n,r,o,i){t[37][Symbol.for("props")].frame=e.maxFps[0]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[38]&&-1!==skips[38].indexOf("frame")||t[38].set("frame",e.maxFps[1])},function(e,t,n,r,o,i){t[39][Symbol.for("props")].frame=e.maxFps[1]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[40]&&-1!==skips[40].indexOf("frame")||t[40].set("frame",e.maxFps[2])},function(e,t,n,r,o,i){t[41][Symbol.for("props")].frame=e.maxFps[2]}],context:{}},state:function(){return{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready:function(){}}})}},Vo={log:{name:"log",plugin:function(){return A("App")}}},Ho=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0;if("object"===x(t)?n=t:r=t,"function"==typeof e){if(void 0===r)throw Error("Error registering plugin: name is required for plugin");Vo[r]={plugin:e,options:n}}else e.plugin&&Ho(e.plugin,r||e.name,n)},Go=function(e){throw new Error("Parameter ".concat(e," is required"))},qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go("name"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Go("config"),n=void 0,r=function(n,r,o,i){var a=this;this.componentId=function(e){return"BlitsComponent::".concat(e,"_").concat(W[e]=(W[e]||0)+1)}(e),this[b.effects]=[],this.lifecycle=Object.assign(Object.create(he),{component:this,previous:null,current:null}),this.parent=o,this.rootParent=i,this[b.holder]=r,this[b.id]=++K,this[b.props]=de(n.props||{},S.get("reactivityMode")),this[b.timeouts]=[],this[b.intervals]=[],this[b.originalState]=t.state&&"function"==typeof t.state&&t.state.apply(this)||{},this[b.originalState].hasFocus=!1,this[b.state]=de(this[b.originalState],S.get("reactivityMode")),this.lifecycle.state="init";var s=t.code.render.apply(wr,[r,this,t,jo,oe,le,c])||{elms:[],cleanup:function(){}},l=s.elms,u=s.cleanup;this[b.children]=l,this[b.cleanup]=u,this[b.wrapper]=this[b.children][0],this[b.slots]=this[b.children].filter(function(e){return e[b.isSlot]}),t.hooks&&(t.hooks.frameTick&&xr.on("frameTick",function(e,t){return $("frameTick",a[b.identifier],a,[t])}),t.hooks.idle&&xr.on("idle",function(){$("idle",a[b.identifier],a)}),t.hooks.attach&&this[b.wrapper].node.on("inBounds",function(){a.lifecycle.state="attach"}),t.hooks.detach&&this[b.wrapper].node.on("outOfBounds",function(e,t){t.previous>0&&(a.lifecycle.state="detach")}),t.hooks.enter&&this[b.wrapper].node.on("inViewport",function(){a.lifecycle.state="enter"}),t.hooks.exit&&this[b.wrapper].node.on("outOfBounds",function(){a.lifecycle.state="exit"}));for(var f=t.code.effects,d=function(e){var n=function(){f[e](a,a[b.children],t,jo,i,oe)};a[b.effects].push(n),oe(n)},p=0;p<f.length;p++)d(p);if(this[b.watchers])for(var h=Object.keys(this[b.watchers]),m=h.length,g=function(){var e=a,t=h[y],n=t;if(t.indexOf(".")>-1){var r=t.split(".");t=r.pop();for(var o=0;o<r.length;o++)e=e[r[o]]}var i=a[t],s=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=e[t];i===o&&!0!==r||(a[b.watchers][n].apply(a,[o,i]),i=o)};a[b.effects].push(s),oe(s)},y=0;y<m;y++)g();return setTimeout(function(){return a.lifecycle.state="ready"}),this},o=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(!1===Oo[b.launched]){for(var l=Object.keys(Vo),u=l.length,f={},d=0;d<u;d++){var p=l[d],h="$".concat(p);h in Oo&&c.warn('"'.concat(p,'" (this.').concat(h,") already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!"));var m=Vo[p];f[h]={value:Object.defineProperties(m.plugin(m.options),Do),writable:!1,enumerable:!0,configurable:!0}}for(var x in Object.defineProperties(Oo,f),f)Object.defineProperties(Oo[x],f),delete Oo[x][x];jo=zo(),Oo[b.launched]=!0}return void 0===n&&(c.debug("Setting up ".concat(e," component")),n=Bo(Object.create(Oo),t)),void 0===t.code&&(c.debug("Generating code for ".concat(e," component")),t.code=D.call(t,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=0,r=0,o=[],i=null,a=0,s=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,l=/^\s*(\/?>)\s*/,u=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,c=/^<>\s*/,f=/^\s*(<\/>)\s*/,d=function(t){n>=e.length||t()},p=function(e){return e.replace(/<!--[^]*?-->/gm,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim()},h=function(t){var o=e.slice(n).match(t);return o&&(r=n,n+=o[0].length),o},m=function(){h(c)?(o.push(v(v(v(v({},Symbol.for("componentType"),null),b.type,"opening"),b.level,a),b.cursorTagStart,r)),a++,d(m)):d(x)},x=function(){h(f)?(a--,o.push(v(v(v({},Symbol.for("componentType"),null),b.type,"closing"),b.level,a)),d(m)):d(w)},w=function(){var e=h(s);if(!e)throw E("InvalidTag");i=v(v(v({},Symbol.for("componentType"),e[1]),b.level,a),b.cursorTagStart,r),e[0].startsWith("</")?(a--,i[b.type]="closing",i[b.level]=a):(i[b.type]="opening",a++),d(S)},S=function(){var t=h(l);if(t){if("/>"===t[1]){if("closing"===i[b.type])throw E("InvalidClosingTag");i[b.type]="self-closing",a--}if("opening"===i[b.type]){var r=e.slice(n,e.indexOf("<",n));r&&(i.content=r,n+=r.length)}o.push(i),d(m)}else d(T)},T=function(){var e=h(u);if(!e)throw E("InvalidAttribute");if("closing"===i[b.type])throw E("AttributesInClosingTag");var t=e[2],n=new RegExp("^(.*?)".concat(t,"\\s*")),r=h(n);if(!r)throw E("MissingOrInvalidAttributeValue");var o=k(e[1],r[1]);i[o.name]=o.value,d(S)},k=function(e,t){if(e.includes(".")){var n=y(e.split("."),2),r=n[0],o=n[1];return{name:r,value:"{".concat(o,": ").concat(t,"}")}}return["color",":color",":effects","effects"].includes(e)?C(e,t):{name:e,value:t}},C=function(e,t){var n=t,r=P(n,null);if(null===r){for(var o,i=/'([^']+)'/g,a=0,s="";null!==(o=i.exec(t));){var l=o[1],u=o.index,c=o[0].length;s+=t.slice(a,u),s+=null===(r=P(l,null))?t.slice(u,u+c):"'".concat(r,"'"),a=u+c}n=s+=t.slice(a)}else n=r;return{name:e,value:n}},A=function(e){for(var t=[],n=!1,r={children:[]},o=r,i=0;i<e.length;i++){var a=e[i];if(0===a[b.level]&&"closing"!==a[b.type]){if(n)throw I("MultipleTopLevelTags",a);if(void 0!==a[":for"])throw I("ForAttributeOnRootElement",a);n=!0}if("opening"===a[b.type])t.push(v(v(v(v(v({},b.level,a[b.level]),b.type,a[b.type]),b.cursorTagStart,a[b.cursorTagStart]),Symbol.for("componentType"),a[Symbol.for("componentType")]),"parent",o));else if("closing"===a[b.type]){var s=0===t.length,l=!1,u=!1;if(s||(l=t[t.length-1][b.level]!==a[b.level],u=t[t.length-1][Symbol.for("componentType")]!==a[Symbol.for("componentType")]),s||l||u)throw I("MismatchedClosingTag",a);o=t.pop().parent}var c=g({},a);delete c[b.type],delete c[b.level],delete c[b.cursorTagStart],"opening"===a[b.type]?(i+1<e.length&&"closing"!==e[i+1][b.type]&&(c.children=[]),o.children.push(c),o=c):"self-closing"===a[b.type]&&o.children.push(c)}if(t.length>0)throw I("UnclosedTags",t);return r},E=function(t){var o=R();t="".concat(t," in ").concat(o);var i=new Error(t);i.name="TemplateParseError";var a=Math.max(0,r-10),s=Math.min(e.length,n+50),l=e.slice(a,s),u=n-a;return i.context=M(u,l),i},I=function(t,n){var r=R();t="".concat(t," in ").concat(r);var o=new Error(t);function i(t){var n=Math.max(0,t[b.cursorTagStart]-10),r=e.slice(n,n+50);return M(10,r)}return o.name="TemplateStructureError",Array.isArray(n)?o.context=n.map(function(e){return i(e)}).join("\n"):o.context=i(n),o},M=function(e,t){var n=" ".repeat(e)+"^";return"\n".concat(t,"\n").concat(n,"\n")},R=function(){return t||"Blits.Application"};return function(){e=p(e);try{return d(m),A(o)}catch(t){throw"TemplateParseError"!=t.name&&"TemplateStructureError"!=t.name||(t.message="".concat(t.message,"\n").concat(t.context)),t}}()}(t.template))),r.call(Object.create(n),o,i,a,s)};return o[Symbol.for("config")]=t,o[b.isComponent]=!0,o},Wo=t("B",{Component:qo,Application:function(e){var t,r,o,a={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};e.hooks=e.hooks||{};var s=0,l=null;return e.hooks[b.destroy]=function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",r)},e.hooks[b.init]=function(){var e=this;this.$announcer.toggle(S.get("announcer",!1));var u=g(g({},a),S.get("keymap",{})),c=S.get("inputThrottle",0);t=function(){var t=i(n().m(function t(r){var o,i,a;return n().w(function(t){for(;;)switch(t.n){case 0:if(o=performance.now(),i=u[r.key]||u[r.keyCode]||r.key||r.keyCode,a=l===i,l=i,0!==c&&!0!==r[b.internalEvent]&&!1!==a){t.n=2;break}return t.n=1,f.call(e,r,i);case 1:return t.a(2,t.v);case 2:if(!(o-s<c)){t.n=3;break}return t.a(2);case 3:return s=o,t.n=4,f.call(e,r,i);case 4:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}();var f=function(){var e=i(n().m(function e(t,r){return n().w(function(e){for(;;)switch(e.n){case 0:if(void 0===this[b.inputEvents]||void 0===this[b.inputEvents].intercept){e.n=2;break}return e.n=1,this[b.inputEvents].intercept.call(this,t);case 1:if((t=e.v)instanceof KeyboardEvent!=!1){e.n=2;break}return e.a(2);case 2:go.input(r,t),clearTimeout(o),o=setTimeout(function(){go.hold=!0},S.get("holdTimeout",50));case 3:return e.a(2)}},e,this)}));return function(t,n){return e.apply(this,arguments)}}();r=function(e){var t=mo.get(e.code);void 0!==t&&"function"==typeof t&&(mo.delete(e.code),t()),clearTimeout(o),go.hold=!1},document.addEventListener("keydown",t),document.addEventListener("keyup",r),setTimeout(function(){return go.set(e)})},qo("App",e)},Launch:function(e,t,n){S.set(n),c=A("Blits"),function(){return Sr.apply(this,arguments)}().then(function(e){c.info("Blits Version ",vr),c.info("Renderer Version ",e)}),wr.element=gr,xr=yr(e,t,n)},Plugin:Ho}),Ko=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(0===r.status||200===r.status?t(JSON.parse(r.responseText)):n(r.statusText))},r.open("GET",e),r.send(null)})},Xo={name:"language",plugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n={},r=de({language:"",loaded:0},S.get("reactivityMode"),!0),o=function(e){var n=0===Object.keys(t).length?"No translations loaded. Please load a file with translations or specify a translations object manually":e in t==!1&&"Language ".concat(e," not available in the loaded translations");n?(c.warn(n),r.language=e):i(e).then(function(){r.language=e})},i=function(e){return new Promise(function(r){var o=t[e];"object"===x(o)?(n=o,r()):"string"==typeof o&&Ko(o).then(function(o){t[e]=o,n=o,r()}).catch(function(e){c.error(e)})})},a=function(e){return Ko(e).then(function(e){s(e)}).catch(function(e){c.error(e)})},s=function(e){t=e,i(r.language).then(function(){r.loaded++})};return"file"in e?a(e.file).then(function(){"language"in e&&o(e.language)}):"language"in e&&o(e.language),{translate:function(e){r.language,r.loaded;var t=Array.prototype.slice.call(arguments).slice(1);return 0===t.length?n&&n[e]||e:(1===t.length&&"object"===x(t[0])&&(t=t.pop()),Object.keys(Array.isArray(t)?Object.assign({},t):t).reduce(function(e,n){return e.replace(new RegExp("{\\s?"+n+"\\s?}","g"),t[n])},n&&n[e]||e))},get language(){return r.language},set:function(e){o(e)},translations:function(e){s(e)},load:function(e){return a(e)}}}},$o={name:"theme",plugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=de({current:"default"},S.get("reactivityMode"),!0),r={},o=null;return"themes"in e==!0?(r=e.themes,n.current=e.current||"default",o=e.base||"default"):r={default:e},{get:function(e,i){if(n.current,void 0!==t[e])return t[e];var a=function(e,t,n){for(var r=n.split("."),o=0;o<r.length;o++){var i=r[o];if(null!==e&&i in e==1)e=e[i],t=null!==t&&i in t==1?t[i]:null;else{if(null===t||i in t!=1){e=void 0;break}e=t=t[i]}}return e}(r[n.current],r[o]||null,e);return void 0!==a?(t[e]=a,a):i},set:function(e){e in r?(t={},n.current=e):c.warn("Theme ".concat(e," not found"))}}}};new(function(){return p(function e(t){return f(this,e),t=t||{},this.forceCookies=t.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==t.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage,keys:this._getLocalStorageKeys}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies,keys:this._getCookieKeys}},[{key:"_checkIfLocalStorageWorks",value:function(){if("undefined"==typeof localStorage)return!1;try{return localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test")&&(localStorage.removeItem("feature_test"),!0)}catch(e){return!1}}},{key:"_getItemLocalStorage",value:function(e){return window.localStorage.getItem(e)}},{key:"_setItemLocalStorage",value:function(e,t){return window.localStorage.setItem(e,t)}},{key:"_removeItemLocalStorage",value:function(e){return window.localStorage.removeItem(e)}},{key:"_clearLocalStorage",value:function(){return window.localStorage.clear()}},{key:"_getLocalStorageKeys",value:function(){return Object.keys(window.localStorage)}},{key:"_getItemCookie",value:function(e){var t=document.cookie.match(RegExp("(?:^|;\\s*)"+(e.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")+"=([^;]*)")));return t&&""===t[1]&&(t[1]=null),t?t[1]:null}},{key:"_setItemCookie",value:function(e,t){var n=new Date,r=new Date(n.getTime()+15768e7);document.cookie="".concat(e,"=").concat(t,"; expires=").concat(r.toUTCString(),";")}},{key:"_removeItemCookie",value:function(e){document.cookie="".concat(e,"=;Max-Age=-99999999;")}},{key:"_clearCookies",value:function(){document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires=;Max-Age=-99999999")})}},{key:"_getCookieKeys",value:function(){return document.cookie.split(";").map(function(e){return e.trim().split("=")[0]})}}])}());var Yo,Jo,Qo=function(e){return new URLSearchParams(window.location.search).get(e)},Zo={sky:{test:function(){return navigator.userAgent.indexOf("WPE Sky")>-1||"sky"===Qo("keymapping")},mapping:{Escape:"back",27:"back"}},webos:{test:function(){return navigator.userAgent.indexOf("WebOS")>-1||"webos"===Qo("keymapping")},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test:function(){return navigator.userAgent.indexOf("Tizen")>-1||"tizen"===Qo("keymapping")},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},ei=Wo.Component("PortalItem",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=370,l[0].h=320,l[0].scale={transition:t.hasFocus?1.1:1},l[0].color=t.backgroundColor,l[0].effects=[{type:"radius",props:{radius:6}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].x=30,l[1].y=30,l[1].content=t.number,l[1].size=84,l[1].color=t.fontColor,l[1].__textnode=!0,s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].x=30,l[2].y=140,l[2].content=t.title,l[2].size=42,l[2].font="raleway",l[2].color=t.fontColor,l[2].letterspacing=2,l[2].__textnode=!0,s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].x=30,l[3].y=200,l[3].content=t.description,l[3].maxwidth=300,l[3].size=28,l[3].color=t.fontColor,l[3].lineheight=32,l[3].__textnode=!0,s[3].populate(l[3]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("scale",{transition:e.hasFocus?1.1:1})},function(e,t,n,r,o,i){t[0].set("color",e.backgroundColor)},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:6}}])},function(e,t,n,r,o,i){t[1].set("content",e.number)},function(e,t,n,r,o,i){t[1].set("color",e.fontColor)},function(e,t,n,r,o,i){t[2].set("content",e.title)},function(e,t,n,r,o,i){t[2].set("color",e.fontColor)},function(e,t,n,r,o,i){t[3].set("content",e.description)},function(e,t,n,r,o,i){t[3].set("color",e.fontColor)}],context:{}},props:["title","description","index","id"],state:function(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?"0".concat(this.index+1):this.index+1}},hooks:{focus:function(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus:function(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter:function(){this.$router.to("/".concat(this.id))},back:function(){}}}),ti=Wo.Component("PortalRow",{components:{PortalItem:ei},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=[];h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),p[0].populate(h[0]),e=p[0],h[1]={},p[1]=this.element({parent:e||"root"},!0===b?u:t),h[1].alpha={transition:{value:t.itemOffset<240?1:0,duration:200}},p[1].populate(h[1]),e=p[1],h[2]={},p[2]=this.element({parent:e||"root"},!0===b?u:t),h[2].content=t.title,h[2].x=60,h[2].__textnode=!0,p[2].populate(h[2]),e=p[1],h[3]={},p[3]=this.element({parent:e||"root"},!0===b?u:t),h[3].y=50,h[3].x=60,h[3].h=1,h[3].w=1800,h[3].color="0xe8d7f9ff",p[3].populate(h[3]),e=p[0],h[4]={},p[4]=this.element({parent:e||"root"},!0===b?u:t),h[4].y=100,h[4].x={transition:t.rowOffset},p[4].populate(h[4]),e=p[4],y[5]=[],m[5]=function(){var a=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,m=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),y=new Set,w=m.length,S={}||{};c=S.from||0,f="to"in S?S.to:m.length;for(;w--;){var T=m[w];w<f&&w>=c&&y.add(""+T.id)}for(var k=p.length;k--;)if(!1===y.has(p[k])){var C=p[k];a[5][C]&&a[5][C].destroy(),a[5][C]=null,delete a[5][C],a[6][C]&&a[6][C].destroy(),a[6][C]=null,delete a[6][C]}p.length=0;for(var A=m.length,E=[],I=function(){if(M<c||M>=f)return 1;var y=Object.create(t);if(e=a[4],y.item=m[M],y.index=M,y.key=""+y.item.id,p.push(y.key),x[5]=n.components&&n.components.PortalItem||r.PortalItem,void 0===a[5]&&(a[5]={}),h[5]={},void 0===a[5][y.key]&&(a[5][y.key]=d.element({parent:e||"root"},!0===b?u:t)),h[5].x={transition:{value:y.itemOffset+430*y.index,delay:y.index%4*50,duration:500}},h[5].title=y.item.title,h[5].description=y.item.description,h[5].id=y.item.id,h[5].index=y.index,h[5].ref="item"+y.index,v[5]=[],void 0!==x[5])for(var w in x[5][Symbol.for("config")].props)delete h[5][x[5][Symbol.for("config")].props[w]],v[5].push(x[5][Symbol.for("config")].props[w]);if(void 0===a[5][y.key].nodeId&&a[5][y.key].populate(h[5]),void 0===a[6]&&(a[6]={}),e=a[5][y.key],g[6]={},void 0===a[6][y.key]){if(l={transition:{value:y.itemOffset+430*y.index,delay:y.index%4*50,duration:500}},!0===Array.isArray(l)&&(l=i(l).slice(0)),g[6].x=l,g[6].title=y.item.title,g[6].description=y.item.description,g[6].id=y.item.id,g[6].index=y.index,l="item"+y.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[6].ref=l,s=g[6].is||"PortalItem",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "PortalItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);a[6][y.key]=r[6].call(null,{props:g[6]},a[5][y.key],t),a[6][y.key][Symbol.for("slots")][0]?(e=a[6][y.key][Symbol.for("slots")][0],u=a[6][y.key],b=!0):e=a[6][y.key][Symbol.for("children")][0]}var S=function(){void 0!==v&&void 0!==v[5]&&-1!==v[5].indexOf("ref")||a[5][y.key].set("ref","item"+y.index)};o(S,null),E.push(S),t[Symbol.for("effects")].push(S),a[6][y.key][Symbol.for("props")].ref="item"+y.index},M=0;M<A;M++)I();return E};var w=function(){m[5](t.items,p,y[5])};t[Symbol.for("effects")].push(w),o(w,["items"]);var S=function(){t.itemOffset;for(var e=0;e<t.items.length;e++)if(!(e<c||e>=f)){var n={};n.index=e,n.item=t.items[e],n.key=n.item.id,void 0!==v&&void 0!==v[5]&&-1!==v[5].indexOf("x")||p[5][n.key].set("x",{transition:{value:t.itemOffset+430*n.index,delay:n.index%4*50,duration:500}})}};t[Symbol.for("effects")].push(S),o(S);var T=function(){t.itemOffset;for(var e=0;e<t.items.length;e++)if(!(e<c||e>=f)){var n={};n.index=e,n.item=t.items[e],n.key=n.item.id,p[6][n.key][Symbol.for("props")].x={transition:{value:t.itemOffset+430*n.index,delay:n.index%4*50,duration:500}}}};return t[Symbol.for("effects")].push(T),o(T),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,y[5].length=0,m[5]=null,x[5]=null,g[6]=null,r[6]=null,w=null,S=null,T=null,x.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("alpha",{transition:{value:e.itemOffset<240?1:0,duration:200}})},function(e,t,n,r,o,i){t[4].set("x",{transition:e.rowOffset})}],context:{}},props:["title","items"],state:function(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready:function(){this.itemOffset=0},focus:function(){this.$trigger("focused")}},watch:{focused:function(e){var t=this.$select("item".concat(e));t&&t.$focus&&(t.$focus(),e<1?this.rowOffset=60:e>this.items.length-2?this.rowOffset=60-430*(this.items.length-2)+430:this.rowOffset=60-430*e+430)}},input:{left:function(){this.focused>0?this.focused--:this.focused=this.items.length-1},right:function(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),ni=Wo.Component("SourceInfo",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].x=1860,l[0].y={transition:{value:1060+t.offsetY,delay:1e3,duration:300,easing:"ease-out"}},l[0].alpha={transition:{value:t.alpha,delay:1e3,duration:300,easing:"ease-out"}},l[0].w=480,l[0].h=100,l[0].mount=1,l[0].color="{top: '0x000000dd', bottom: '0x000000ff'}",l[0].effects=[{type:"radius",props:{radius:10}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].y=18,l[1].x=20,l[1].size=26,l[1].maxwidth=440,l[1].align="center",l[1].lineheight=32,l[1].content='Press "U" to check out the source code of this example on GitHub',l[1].__textnode=!0,s[1].populate(l[1]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("y",{transition:{value:1060+e.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(e,t,n,r,o,i){t[0].set("alpha",{transition:{value:e.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state:function(){return{offsetY:15,alpha:0}},hooks:{ready:function(){this.offsetY=0,this.alpha=1}}}),ri="1.16.1",oi=Wo.Component("Portal",{components:{PortalRow:ti,SourceInfo:ni},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),f[0].w=1920,f[0].h=1080,f[0].color="{top: '0x44037aff', bottom: '0x240244ff'}",c[0].populate(f[0]),!0===h&&(m-=1),g[1]=n.components&&n.components.PortalRow||r.PortalRow,e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].mount="{y: 0.5}",f[1].h=500,f[1].y={transition:420*-t.rowFocused+550},f[1].title="Demos",f[1].items=t.demo,f[1].ref="row0",p[1]=[],void 0!==g[1])for(var y in g[1][Symbol.for("config")].props)delete f[1][g[1][Symbol.for("config")].props[y]],p[1].push(g[1][Symbol.for("config")].props[y]);if(c[1].populate(f[1]),!0===h&&(m-=1),e=c[1],d[2]={},d[2].mount="{y: 0.5}",d[2].h=500,l={transition:420*-t.rowFocused+550},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[2].y=l,d[2].title="Demos",d[2].items=t.demo,d[2].ref="row0",s=d[2].is||"PortalRow",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "PortalRow" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);if(c[2]=r[2].call(null,{props:d[2]},c[1],t),c[2][Symbol.for("slots")][0]?(e=c[2][Symbol.for("slots")][0],u=c[2],h=!0):e=c[2][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[3]=n.components&&n.components.PortalRow||r.PortalRow,e=c[0],f[3]={},c[3]=this.element({parent:e||"root"},!0===h?u:t),f[3].mount="{y: 0.5}",f[3].h=500,f[3].y={transition:420*-t.rowFocused+1100},f[3].title="Examples and tests",f[3].items=t.example,f[3].ref="row1",p[3]=[],void 0!==g[3])for(var v in g[3][Symbol.for("config")].props)delete f[3][g[3][Symbol.for("config")].props[v]],p[3].push(g[3][Symbol.for("config")].props[v]);if(c[3].populate(f[3]),!0===h&&(m-=1),e=c[3],d[4]={},d[4].mount="{y: 0.5}",d[4].h=500,l={transition:420*-t.rowFocused+1100},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[4].y=l,d[4].title="Examples and tests",d[4].items=t.example,d[4].ref="row1",s=d[4].is||"PortalRow",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "PortalRow" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);if(c[4]=r[4].call(null,{props:d[4]},c[3],t),c[4][Symbol.for("slots")][0]?(e=c[4][Symbol.for("slots")][0],u=c[4],h=!0):e=c[4][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[5]=n.components&&n.components.PortalRow||r.PortalRow,e=c[0],f[5]={},c[5]=this.element({parent:e||"root"},!0===h?u:t),f[5].mount="{y: 0.5}",f[5].h=500,f[5].y={transition:420*-t.rowFocused+1650},f[5].title="Benchmarks and stress tests",f[5].items=t.benchmark,f[5].ref="row2",p[5]=[],void 0!==g[5])for(var b in g[5][Symbol.for("config")].props)delete f[5][g[5][Symbol.for("config")].props[b]],p[5].push(g[5][Symbol.for("config")].props[b]);if(c[5].populate(f[5]),!0===h&&(m-=1),e=c[5],d[6]={},d[6].mount="{y: 0.5}",d[6].h=500,l={transition:420*-t.rowFocused+1650},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[6].y=l,d[6].title="Benchmarks and stress tests",d[6].items=t.benchmark,d[6].ref="row2",s=d[6].is||"PortalRow",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "PortalRow" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);return c[6]=r[6].call(null,{props:d[6]},c[5],t),c[6][Symbol.for("slots")][0]?(e=c[6][Symbol.for("slots")][0],u=c[6],h=!0):e=c[6][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[0],f[7]={},c[7]=this.element({parent:e||"root"},!0===h?u:t),f[7].w=1920,f[7].h=200,f[7].color="0x44037aff",c[7].populate(f[7]),!0===h&&(m-=1),e=c[7],f[8]={},c[8]=this.element({parent:e||"root"},!0===h?u:t),f[8].w=1920,f[8].h=70,f[8].y=200,f[8].color="{top: '0x44037aff'}",c[8].populate(f[8]),!0===h&&(m-=1),e=c[7],f[9]={},c[9]=this.element({parent:e||"root"},!0===h?u:t),f[9].y={transition:{value:80-t.logoOffset,duration:400}},c[9].populate(f[9]),!0===h&&(m-=1),e=c[9],f[10]={},c[10]=this.element({parent:e||"root"},!0===h?u:t),f[10].src="assets/blits-logo-full.png",f[10].w=200,f[10].h=112,f[10].x=60,c[10].populate(f[10]),!0===h&&(m-=1),e=c[9],f[11]={},c[11]=this.element({parent:e||"root"},!0===h?u:t),f[11].w=2,f[11].h=120,f[11].y="-10",f[11].color="0xffffff80",f[11].x=300,c[11].populate(f[11]),!0===h&&(m-=1),e=c[9],f[12]={},c[12]=this.element({parent:e||"root"},!0===h?u:t),f[12].x=320,f[12].y=16,c[12].populate(f[12]),!0===h&&(m-=1),e=c[12],f[13]={},c[13]=this.element({parent:e||"root"},!0===h?u:t),f[13].y=0,f[13].size=36,f[13].content="Example App",f[13].__textnode=!0,c[13].populate(f[13]),!0===h&&(m-=1),e=c[12],f[14]={},c[14]=this.element({parent:e||"root"},!0===h?u:t),f[14].y=50,f[14].size=24,f[14].content="v"+t.version,f[14].__textnode=!0,c[14].populate(f[14]),!0===h&&(m-=1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[1]=null,d[2]=null,r[2]=null,g[3]=null,d[4]=null,r[4]=null,g[5]=null,d[6]=null,r[6]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[1]&&-1!==skips[1].indexOf("y")||t[1].set("y",{transition:420*-e.rowFocused+550})},function(e,t,n,r,o,i){t[2][Symbol.for("props")].y={transition:420*-e.rowFocused+550}},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[3]&&-1!==skips[3].indexOf("y")||t[3].set("y",{transition:420*-e.rowFocused+1100})},function(e,t,n,r,o,i){t[4][Symbol.for("props")].y={transition:420*-e.rowFocused+1100}},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[5]&&-1!==skips[5].indexOf("y")||t[5].set("y",{transition:420*-e.rowFocused+1650})},function(e,t,n,r,o,i){t[6][Symbol.for("props")].y={transition:420*-e.rowFocused+1650}},function(e,t,n,r,o,i){t[9].set("y",{transition:{value:80-e.logoOffset,duration:400}})}],context:{}},state:function(){return{version:ri,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'},{title:"Announcer",id:"examples/announcer",description:'Using the built-in "Announcer" plugin'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready:function(){this.logoOffset=0},focus:function(){this.$trigger("rowFocused")}},watch:{rowFocused:function(e){var t=this.$select("row".concat(e));t&&t.$focus&&t.$focus()}},input:{up:function(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down:function(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),ii=Wo.Component("Letter",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=t.w,l[1].h={transition:{value:410+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},l[1].color="0xe6e6e6ff",s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=t.w,l[2].h=280,l[2].src=t.image,l[2].y={transition:{value:400+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=t.w,l[3].color="0xe6e6e6ff",l[3].h={transition:{value:500-t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},l[3].y={transition:{value:660+t.offset,duration:t.duration,delay:t.wait,easing:t.timingFunction}},s[3].populate(l[3]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("h",{transition:{value:410+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,r,o,i){t[2].set("src",e.image)},function(e,t,n,r,o,i){t[2].set("y",{transition:{value:400+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,r,o,i){t[3].set("h",{transition:{value:500-e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})},function(e,t,n,r,o,i){t[3].set("y",{transition:{value:660+e.offset,duration:e.duration,delay:e.wait,easing:e.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image:function(){return this.letter,"assets/".concat(this.letter,".png")}},state:function(){return{offset:"up"===this.direction?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready:function(){this.animate()}},methods:{animate:function(){var e=this;this.$setTimeout(function(){e.offset=0},1e3),this.$setTimeout(function(){e.wait=e.delay+150,e.duration=1e3,e.offset=1080},2800),this.$setTimeout(function(){e.wait=e.delay/3,e.timingFunction="ease-in-out",e.duration=1500,e.offset=0},5e3)}}}),ai=Wo.Component("Intro",{components:{Letter:ii},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),c[0].w=1920,c[0].h=1080,c[0].src="assets/background.jpg",u[0].populate(c[0]),!0===p&&(h-=1),m[1]=n.components&&n.components.Letter||r.Letter,e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].letter="l",c[1].w=294,d[1]=[],void 0!==m[1])for(var g in m[1][Symbol.for("config")].props)delete c[1][m[1][Symbol.for("config")].props[g]],d[1].push(m[1][Symbol.for("config")].props[g]);if(u[1].populate(c[1]),!0===p&&(h-=1),e=u[1],f[2]={},f[2].letter="l",f[2].w=294,s=f[2].is||"Letter",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);if(u[2]=r[2].call(null,{props:f[2]},u[1],t),u[2][Symbol.for("slots")][0]?(e=u[2][Symbol.for("slots")][0],l=u[2],p=!0):e=u[2][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[3]=n.components&&n.components.Letter||r.Letter,e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].letter="i-1",c[3].w=128,c[3].x=294,c[3].direction="up",c[3].delay=50,d[3]=[],void 0!==m[3])for(var y in m[3][Symbol.for("config")].props)delete c[3][m[3][Symbol.for("config")].props[y]],d[3].push(m[3][Symbol.for("config")].props[y]);if(u[3].populate(c[3]),!0===p&&(h-=1),e=u[3],f[4]={},f[4].letter="i-1",f[4].w=128,f[4].x=294,f[4].direction="up",f[4].delay=50,s=f[4].is||"Letter",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);if(u[4]=r[4].call(null,{props:f[4]},u[3],t),u[4][Symbol.for("slots")][0]?(e=u[4][Symbol.for("slots")][0],l=u[4],p=!0):e=u[4][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[5]=n.components&&n.components.Letter||r.Letter,e=u[0],c[5]={},u[5]=this.element({parent:e||"root"},!0===p?l:t),c[5].letter="g-1",c[5].w=205,c[5].x=422,c[5].delay=100,d[5]=[],void 0!==m[5])for(var v in m[5][Symbol.for("config")].props)delete c[5][m[5][Symbol.for("config")].props[v]],d[5].push(m[5][Symbol.for("config")].props[v]);if(u[5].populate(c[5]),!0===p&&(h-=1),e=u[5],f[6]={},f[6].letter="g-1",f[6].w=205,f[6].x=422,f[6].delay=100,s=f[6].is||"Letter",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);if(u[6]=r[6].call(null,{props:f[6]},u[5],t),u[6][Symbol.for("slots")][0]?(e=u[6][Symbol.for("slots")][0],l=u[6],p=!0):e=u[6][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[7]=n.components&&n.components.Letter||r.Letter,e=u[0],c[7]={},u[7]=this.element({parent:e||"root"},!0===p?l:t),c[7].letter="h",c[7].w=224,c[7].x=627,c[7].direction="up",c[7].delay=150,d[7]=[],void 0!==m[7])for(var b in m[7][Symbol.for("config")].props)delete c[7][m[7][Symbol.for("config")].props[b]],d[7].push(m[7][Symbol.for("config")].props[b]);if(u[7].populate(c[7]),!0===p&&(h-=1),e=u[7],f[8]={},f[8].letter="h",f[8].w=224,f[8].x=627,f[8].direction="up",f[8].delay=150,s=f[8].is||"Letter",r[8],"string"==typeof s){if(r[8]=n.components&&n.components[s]||r[s],!r[8])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[8]=s);if(u[8]=r[8].call(null,{props:f[8]},u[7],t),u[8][Symbol.for("slots")][0]?(e=u[8][Symbol.for("slots")][0],l=u[8],p=!0):e=u[8][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[9]=n.components&&n.components.Letter||r.Letter,e=u[0],c[9]={},u[9]=this.element({parent:e||"root"},!0===p?l:t),c[9].letter="t",c[9].w=190,c[9].x=851,c[9].delay=200,d[9]=[],void 0!==m[9])for(var x in m[9][Symbol.for("config")].props)delete c[9][m[9][Symbol.for("config")].props[x]],d[9].push(m[9][Symbol.for("config")].props[x]);if(u[9].populate(c[9]),!0===p&&(h-=1),e=u[9],f[10]={},f[10].letter="t",f[10].w=190,f[10].x=851,f[10].delay=200,s=f[10].is||"Letter",r[10],"string"==typeof s){if(r[10]=n.components&&n.components[s]||r[s],!r[10])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[10]=s);if(u[10]=r[10].call(null,{props:f[10]},u[9],t),u[10][Symbol.for("slots")][0]?(e=u[10][Symbol.for("slots")][0],l=u[10],p=!0):e=u[10][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[11]=n.components&&n.components.Letter||r.Letter,e=u[0],c[11]={},u[11]=this.element({parent:e||"root"},!0===p?l:t),c[11].letter="n-1",c[11].w=221,c[11].x=1041,c[11].direction="up",c[11].delay=250,d[11]=[],void 0!==m[11])for(var w in m[11][Symbol.for("config")].props)delete c[11][m[11][Symbol.for("config")].props[w]],d[11].push(m[11][Symbol.for("config")].props[w]);if(u[11].populate(c[11]),!0===p&&(h-=1),e=u[11],f[12]={},f[12].letter="n-1",f[12].w=221,f[12].x=1041,f[12].direction="up",f[12].delay=250,s=f[12].is||"Letter",r[12],"string"==typeof s){if(r[12]=n.components&&n.components[s]||r[s],!r[12])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[12]=s);if(u[12]=r[12].call(null,{props:f[12]},u[11],t),u[12][Symbol.for("slots")][0]?(e=u[12][Symbol.for("slots")][0],l=u[12],p=!0):e=u[12][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[13]=n.components&&n.components.Letter||r.Letter,e=u[0],c[13]={},u[13]=this.element({parent:e||"root"},!0===p?l:t),c[13].letter="i-2",c[13].w=115,c[13].x=1262,c[13].delay=300,d[13]=[],void 0!==m[13])for(var S in m[13][Symbol.for("config")].props)delete c[13][m[13][Symbol.for("config")].props[S]],d[13].push(m[13][Symbol.for("config")].props[S]);if(u[13].populate(c[13]),!0===p&&(h-=1),e=u[13],f[14]={},f[14].letter="i-2",f[14].w=115,f[14].x=1262,f[14].delay=300,s=f[14].is||"Letter",r[14],"string"==typeof s){if(r[14]=n.components&&n.components[s]||r[s],!r[14])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[14]=s);if(u[14]=r[14].call(null,{props:f[14]},u[13],t),u[14][Symbol.for("slots")][0]?(e=u[14][Symbol.for("slots")][0],l=u[14],p=!0):e=u[14][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[15]=n.components&&n.components.Letter||r.Letter,e=u[0],c[15]={},u[15]=this.element({parent:e||"root"},!0===p?l:t),c[15].letter="n-2",c[15].w=219,c[15].x=1377,c[15].direction="up",c[15].delay=350,d[15]=[],void 0!==m[15])for(var T in m[15][Symbol.for("config")].props)delete c[15][m[15][Symbol.for("config")].props[T]],d[15].push(m[15][Symbol.for("config")].props[T]);if(u[15].populate(c[15]),!0===p&&(h-=1),e=u[15],f[16]={},f[16].letter="n-2",f[16].w=219,f[16].x=1377,f[16].direction="up",f[16].delay=350,s=f[16].is||"Letter",r[16],"string"==typeof s){if(r[16]=n.components&&n.components[s]||r[s],!r[16])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[16]=s);if(u[16]=r[16].call(null,{props:f[16]},u[15],t),u[16][Symbol.for("slots")][0]?(e=u[16][Symbol.for("slots")][0],l=u[16],p=!0):e=u[16][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[17]=n.components&&n.components.Letter||r.Letter,e=u[0],c[17]={},u[17]=this.element({parent:e||"root"},!0===p?l:t),c[17].letter="g-2",c[17].w=324,c[17].x=1596,c[17].direction="up",c[17].delay=400,d[17]=[],void 0!==m[17])for(var k in m[17][Symbol.for("config")].props)delete c[17][m[17][Symbol.for("config")].props[k]],d[17].push(m[17][Symbol.for("config")].props[k]);if(u[17].populate(c[17]),!0===p&&(h-=1),e=u[17],f[18]={},f[18].letter="g-2",f[18].w=324,f[18].x=1596,f[18].direction="up",f[18].delay=400,s=f[18].is||"Letter",r[18],"string"==typeof s){if(r[18]=n.components&&n.components[s]||r[s],!r[18])throw new Error('Component "Letter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[18]=s);return u[18]=r[18].call(null,{props:f[18]},u[17],t),u[18][Symbol.for("slots")][0]?(e=u[18][Symbol.for("slots")][0],l=u[18],p=!0):e=u[18][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[1]=null,f[2]=null,r[2]=null,m[3]=null,f[4]=null,r[4]=null,m[5]=null,f[6]=null,r[6]=null,m[7]=null,f[8]=null,r[8]=null,m[9]=null,f[10]=null,r[10]=null,m[11]=null,f[12]=null,r[12]=null,m[13]=null,f[14]=null,r[14]=null,m[15]=null,f[16]=null,r[16]=null,m[17]=null,f[18]=null,r[18]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[],context:{}}}),si=Wo.Component("Toggle",{code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),f[0].w=100,f[0].h=50,f[0].y=5,f[0].color=t.bgColor,f[0].effects=[{type:"radius",props:{radius:25}}],c[0].populate(f[0]),!0===h&&(m-=1),g[1]=n.components&&n.components.Circle||r.Circle,e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].x={transition:t.on?0:50},f[1].size=50,p[1]=[],void 0!==g[1])for(var y in g[1][Symbol.for("config")].props)delete f[1][g[1][Symbol.for("config")].props[y]],p[1].push(g[1][Symbol.for("config")].props[y]);if(c[1].populate(f[1]),!0===h&&(m-=1),e=c[1],d[2]={},l={transition:t.on?0:50},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[2].x=l,d[2].size=50,l=t.primaryColor,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[2].color=l,s=d[2].is||"Circle",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Circle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);return c[2]=r[2].call(null,{props:d[2]},c[1],t),c[2][Symbol.for("slots")][0]?(e=c[2][Symbol.for("slots")][0],u=c[2],h=!0):e=c[2][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[1]=null,d[2]=null,r[2]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("color",e.bgColor)},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:25}}])},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[1]&&-1!==skips[1].indexOf("x")||t[1].set("x",{transition:e.on?0:50})},function(e,t,n,r,o,i){t[2][Symbol.for("props")].x={transition:e.on?0:50}},function(e,t,n,r,o,i){t[2][Symbol.for("props")].color=e.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),li=Wo.Component("Bar",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w={value:t.w,duration:t.duration},l[0].h={value:t.h,duration:t.duration},l[0].color=t.bgColor,l[0].x=t.index*(t.w+t.w/4),l[0].effects=[{type:"radius",props:{radius:10}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=t.w,l[1].y={transition:{value:t.h-t.innerH,duration:t.duration}},l[1].h={transition:{value:t.innerH,duration:t.duration}},l[1].color=t.primaryColor,l[1].effects=[{type:"radius",props:{radius:10}}],s[1].populate(l[1]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("w",{value:e.w,duration:e.duration})},function(e,t,n,r,o,i){t[0].set("h",{value:e.h,duration:e.duration})},function(e,t,n,r,o,i){t[0].set("color",e.bgColor)},function(e,t,n,r,o,i){t[0].set("x",e.index*(e.w+e.w/4))},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:10}}])},function(e,t,n,r,o,i){t[1].set("w",e.w)},function(e,t,n,r,o,i){t[1].set("y",{transition:{value:e.h-e.innerH,duration:e.duration}})},function(e,t,n,r,o,i){t[1].set("h",{transition:{value:e.innerH,duration:e.duration}})},function(e,t,n,r,o,i){t[1].set("color",e.primaryColor)},function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state:function(){return{h:200,innerH:0,duration:400}},hooks:{ready:function(){this.innerH=this.height}},computed:{w:function(){return this.size,"large"===this.size?110:72}},watch:{bgColor:function(){var e=this;this.duration=1e-6,this.innerH=0,this.$setTimeout(function(){e.duration=400,e.innerH=e.height},200)},size:function(){var e=this;this.duration=1e-6,this.innerH=0,this.$setTimeout(function(){e.duration=400,e.innerH=e.height},100)}}}),ui=Wo.Component("Theming",{components:{Bar:li,Toggle:si},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),f[0].w=1920,f[0].h=1080,f[0].color={transition:t.$colors.get("bg")},c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].y=1020,f[1].x=1160,f[1].size=28,f[1].color=t.$colors.get("color4"),f[1].content='Use "up", "down", "left" and "right" to change the appearance',f[1].__textnode=!0,c[1].populate(f[1]),!0===h&&(m-=1),e=c[0],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),f[2].x={transition:(1920-t.$sizes.get("w"))/2},f[2].y={transition:(1080-t.$sizes.get("h"))/2},c[2].populate(f[2]),!0===h&&(m-=1),e=c[2],f[3]={},c[3]=this.element({parent:e||"root"},!0===h?u:t),f[3].x="-250",f[3].y="-100",f[3].src="assets/shadow.png",f[3].w=1e3,f[3].h=900,f[3].alpha=.5,c[3].populate(f[3]),!0===h&&(m-=1),e=c[2],f[4]={},c[4]=this.element({parent:e||"root"},!0===h?u:t),f[4].w={transition:t.$sizes.get("w")},f[4].h={transition:t.$sizes.get("h")},f[4].color=t.$colors.get("color1"),f[4].effects=[{type:"radius",props:{radius:t.radius}}],c[4].populate(f[4]),!0===h&&(m-=1),e=c[4],f[5]={},c[5]=this.element({parent:e||"root"},!0===h?u:t),f[5].w={transition:t.$sizes.get("w")},f[5].h=100,f[5].color=t.$colors.get("color2"),f[5].effects=[{type:"radius",props:{radius:t.radius}}],c[5].populate(f[5]),!0===h&&(m-=1),e=c[4],f[6]={},c[6]=this.element({parent:e||"root"},!0===h?u:t),f[6].w={transition:t.$sizes.get("w")},f[6].h=80,f[6].y=20,f[6].color=t.$colors.get("color2"),c[6].populate(f[6]),!0===h&&(m-=1),e=c[4],f[7]={},c[7]=this.element({parent:e||"root"},!0===h?u:t),f[7].content=t.text,f[7].color=t.$colors.get("color3"),f[7].size=28,f[7].x=20,f[7].y=14,f[7].__textnode=!0,c[7].populate(f[7]),!0===h&&(m-=1),g[8]=n.components&&n.components.Toggle||r.Toggle,e=c[4],f[8]={},c[8]=this.element({parent:e||"root"},!0===h?u:t),f[8].x={transition:t.$sizes.get("w")-120},f[8].on="dark"===t.mode,f[8].bgColor=t.$colors.get("color1"),f[8].primaryColor="#22c55e",p[8]=[],void 0!==g[8])for(var y in g[8][Symbol.for("config")].props)delete f[8][g[8][Symbol.for("config")].props[y]],p[8].push(g[8][Symbol.for("config")].props[y]);if(c[8].populate(f[8]),!0===h&&(m-=1),e=c[8],d[9]={},l={transition:t.$sizes.get("w")-120},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[9].x=l,l="dark"===t.mode,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[9].on=l,l=t.$colors.get("color1"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[9].bgColor=l,d[9].primaryColor="#22c55e",s=d[9].is||"Toggle",r[9],"string"==typeof s){if(r[9]=n.components&&n.components[s]||r[s],!r[9])throw new Error('Component "Toggle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[9]=s);if(c[9]=r[9].call(null,{props:d[9]},c[8],t),c[9][Symbol.for("slots")][0]?(e=c[9][Symbol.for("slots")][0],u=c[9],h=!0):e=c[9][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[2],f[10]={},c[10]=this.element({parent:e||"root"},!0===h?u:t),f[10].w=200,f[10].h={transition:t.$sizes.get("block1.h")},f[10].x=25,f[10].y=140,f[10].color=t.$colors.get("color2"),f[10].effects=[{type:"radius",props:{radius:t.radius/2}}],c[10].populate(f[10]),!0===h&&(m-=1),e=c[2],f[11]={},c[11]=this.element({parent:e||"root"},!0===h?u:t),f[11].w={transition:t.$sizes.get("block2.w")},f[11].h=t.$sizes.get("block2.h"),f[11].x=270,f[11].y={transition:t.$sizes.get("block2.y")},f[11].color=t.$colors.get("color2"),f[11].effects=[{type:"radius",props:{radius:t.radius/2}}],c[11].populate(f[11]),!0===h&&(m-=1),e=c[2],f[12]={},c[12]=this.element({parent:e||"root"},!0===h?u:t),f[12].x={transition:t.$sizes.get("graph.x")},f[12].y={transition:t.$sizes.get("graph.y")},f[12].w=t.$sizes.get("graph.w"),f[12].h=t.$sizes.get("graph.h"),f[12].color="0x00000000",c[12].populate(f[12]),!0===h&&(m-=1),e=c[12],f[13]={},c[13]=this.element({parent:e||"root"},!0===h?u:t),f[13].x={transition:t.$sizes.get("graph.offset")},f[13].y={transition:t.$sizes.get("graph.offset")},c[13].populate(f[13]),!0===h&&(m-=1),g[14]=n.components&&n.components.Bar||r.Bar,e=c[13],f[14]={},c[14]=this.element({parent:e||"root"},!0===h?u:t),f[14].bgColor=t.$colors.get("color2"),f[14].primaryColor=t.$colors.get("color4"),f[14].size=t.$sizes.get("graph.size"),f[14].height=100,f[14].index=0,p[14]=[],void 0!==g[14])for(var v in g[14][Symbol.for("config")].props)delete f[14][g[14][Symbol.for("config")].props[v]],p[14].push(g[14][Symbol.for("config")].props[v]);if(c[14].populate(f[14]),!0===h&&(m-=1),e=c[14],d[15]={},l=t.$colors.get("color2"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[15].bgColor=l,l=t.$colors.get("color4"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[15].primaryColor=l,l=t.$sizes.get("graph.size"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[15].size=l,d[15].height=100,d[15].index=0,s=d[15].is||"Bar",r[15],"string"==typeof s){if(r[15]=n.components&&n.components[s]||r[s],!r[15])throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[15]=s);if(c[15]=r[15].call(null,{props:d[15]},c[14],t),c[15][Symbol.for("slots")][0]?(e=c[15][Symbol.for("slots")][0],u=c[15],h=!0):e=c[15][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[16]=n.components&&n.components.Bar||r.Bar,e=c[13],f[16]={},c[16]=this.element({parent:e||"root"},!0===h?u:t),f[16].bgColor=t.$colors.get("color2"),f[16].primaryColor=t.$colors.get("color4"),f[16].size=t.$sizes.get("graph.size"),f[16].height=140,f[16].index=1,p[16]=[],void 0!==g[16])for(var b in g[16][Symbol.for("config")].props)delete f[16][g[16][Symbol.for("config")].props[b]],p[16].push(g[16][Symbol.for("config")].props[b]);if(c[16].populate(f[16]),!0===h&&(m-=1),e=c[16],d[17]={},l=t.$colors.get("color2"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[17].bgColor=l,l=t.$colors.get("color4"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[17].primaryColor=l,l=t.$sizes.get("graph.size"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[17].size=l,d[17].height=140,d[17].index=1,s=d[17].is||"Bar",r[17],"string"==typeof s){if(r[17]=n.components&&n.components[s]||r[s],!r[17])throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[17]=s);if(c[17]=r[17].call(null,{props:d[17]},c[16],t),c[17][Symbol.for("slots")][0]?(e=c[17][Symbol.for("slots")][0],u=c[17],h=!0):e=c[17][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[18]=n.components&&n.components.Bar||r.Bar,e=c[13],f[18]={},c[18]=this.element({parent:e||"root"},!0===h?u:t),f[18].bgColor=t.$colors.get("color2"),f[18].primaryColor=t.$colors.get("color4"),f[18].size=t.$sizes.get("graph.size"),f[18].height=170,f[18].index=2,p[18]=[],void 0!==g[18])for(var x in g[18][Symbol.for("config")].props)delete f[18][g[18][Symbol.for("config")].props[x]],p[18].push(g[18][Symbol.for("config")].props[x]);if(c[18].populate(f[18]),!0===h&&(m-=1),e=c[18],d[19]={},l=t.$colors.get("color2"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[19].bgColor=l,l=t.$colors.get("color4"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[19].primaryColor=l,l=t.$sizes.get("graph.size"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[19].size=l,d[19].height=170,d[19].index=2,s=d[19].is||"Bar",r[19],"string"==typeof s){if(r[19]=n.components&&n.components[s]||r[s],!r[19])throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[19]=s);if(c[19]=r[19].call(null,{props:d[19]},c[18],t),c[19][Symbol.for("slots")][0]?(e=c[19][Symbol.for("slots")][0],u=c[19],h=!0):e=c[19][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[20]=n.components&&n.components.Bar||r.Bar,e=c[13],f[20]={},c[20]=this.element({parent:e||"root"},!0===h?u:t),f[20].bgColor=t.$colors.get("color2"),f[20].primaryColor=t.$colors.get("color4"),f[20].size=t.$sizes.get("graph.size"),f[20].height=150,f[20].index=3,p[20]=[],void 0!==g[20])for(var w in g[20][Symbol.for("config")].props)delete f[20][g[20][Symbol.for("config")].props[w]],p[20].push(g[20][Symbol.for("config")].props[w]);if(c[20].populate(f[20]),!0===h&&(m-=1),e=c[20],d[21]={},l=t.$colors.get("color2"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[21].bgColor=l,l=t.$colors.get("color4"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[21].primaryColor=l,l=t.$sizes.get("graph.size"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[21].size=l,d[21].height=150,d[21].index=3,s=d[21].is||"Bar",r[21],"string"==typeof s){if(r[21]=n.components&&n.components[s]||r[s],!r[21])throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[21]=s);if(c[21]=r[21].call(null,{props:d[21]},c[20],t),c[21][Symbol.for("slots")][0]?(e=c[21][Symbol.for("slots")][0],u=c[21],h=!0):e=c[21][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[22]=n.components&&n.components.Bar||r.Bar,e=c[13],f[22]={},c[22]=this.element({parent:e||"root"},!0===h?u:t),f[22].bgColor=t.$colors.get("color2"),f[22].primaryColor=t.$colors.get("color4"),f[22].size=t.$sizes.get("graph.size"),f[22].height=90,f[22].index=4,p[22]=[],void 0!==g[22])for(var S in g[22][Symbol.for("config")].props)delete f[22][g[22][Symbol.for("config")].props[S]],p[22].push(g[22][Symbol.for("config")].props[S]);if(c[22].populate(f[22]),!0===h&&(m-=1),e=c[22],d[23]={},l=t.$colors.get("color2"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[23].bgColor=l,l=t.$colors.get("color4"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[23].primaryColor=l,l=t.$sizes.get("graph.size"),!0===Array.isArray(l)&&(l=i(l).slice(0)),d[23].size=l,d[23].height=90,d[23].index=4,s=d[23].is||"Bar",r[23],"string"==typeof s){if(r[23]=n.components&&n.components[s]||r[s],!r[23])throw new Error('Component "Bar" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[23]=s);return c[23]=r[23].call(null,{props:d[23]},c[22],t),c[23][Symbol.for("slots")][0]?(e=c[23][Symbol.for("slots")][0],u=c[23],h=!0):e=c[23][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[8]=null,d[9]=null,r[9]=null,g[14]=null,d[15]=null,r[15]=null,g[16]=null,d[17]=null,r[17]=null,g[18]=null,d[19]=null,r[19]=null,g[20]=null,d[21]=null,r[21]=null,g[22]=null,d[23]=null,r[23]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("color",{transition:e.$colors.get("bg")})},function(e,t,n,r,o,i){t[1].set("color",e.$colors.get("color4"))},function(e,t,n,r,o,i){t[2].set("x",{transition:(1920-e.$sizes.get("w"))/2})},function(e,t,n,r,o,i){t[2].set("y",{transition:(1080-e.$sizes.get("h"))/2})},function(e,t,n,r,o,i){t[4].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,r,o,i){t[4].set("h",{transition:e.$sizes.get("h")})},function(e,t,n,r,o,i){t[4].set("color",e.$colors.get("color1"))},function(e,t,n,r,o,i){t[4].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,r,o,i){t[5].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,r,o,i){t[5].set("color",e.$colors.get("color2"))},function(e,t,n,r,o,i){t[5].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,r,o,i){t[6].set("w",{transition:e.$sizes.get("w")})},function(e,t,n,r,o,i){t[6].set("color",e.$colors.get("color2"))},function(e,t,n,r,o,i){t[7].set("content",e.text)},function(e,t,n,r,o,i){t[7].set("color",e.$colors.get("color3"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("x")||t[8].set("x",{transition:e.$sizes.get("w")-120})},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("on")||t[8].set("on","dark"===e.mode)},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("bgColor")||t[8].set("bgColor",e.$colors.get("color1"))},function(e,t,n,r,o,i){t[9][Symbol.for("props")].x={transition:e.$sizes.get("w")-120}},function(e,t,n,r,o,i){t[9][Symbol.for("props")].on="dark"===e.mode},function(e,t,n,r,o,i){t[9][Symbol.for("props")].bgColor=e.$colors.get("color1")},function(e,t,n,r,o,i){t[10].set("h",{transition:e.$sizes.get("block1.h")})},function(e,t,n,r,o,i){t[10].set("color",e.$colors.get("color2"))},function(e,t,n,r,o,i){t[10].set("effects",[{type:"radius",props:{radius:e.radius/2}}])},function(e,t,n,r,o,i){t[11].set("w",{transition:e.$sizes.get("block2.w")})},function(e,t,n,r,o,i){t[11].set("h",e.$sizes.get("block2.h"))},function(e,t,n,r,o,i){t[11].set("y",{transition:e.$sizes.get("block2.y")})},function(e,t,n,r,o,i){t[11].set("color",e.$colors.get("color2"))},function(e,t,n,r,o,i){t[11].set("effects",[{type:"radius",props:{radius:e.radius/2}}])},function(e,t,n,r,o,i){t[12].set("x",{transition:e.$sizes.get("graph.x")})},function(e,t,n,r,o,i){t[12].set("y",{transition:e.$sizes.get("graph.y")})},function(e,t,n,r,o,i){t[12].set("w",e.$sizes.get("graph.w"))},function(e,t,n,r,o,i){t[12].set("h",e.$sizes.get("graph.h"))},function(e,t,n,r,o,i){t[13].set("x",{transition:e.$sizes.get("graph.offset")})},function(e,t,n,r,o,i){t[13].set("y",{transition:e.$sizes.get("graph.offset")})},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[14]&&-1!==skips[14].indexOf("bgColor")||t[14].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[14]&&-1!==skips[14].indexOf("primaryColor")||t[14].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[14]&&-1!==skips[14].indexOf("size")||t[14].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[15][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[15][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[15][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("bgColor")||t[16].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("primaryColor")||t[16].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("size")||t[16].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[17][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[17][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[17][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("bgColor")||t[18].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("primaryColor")||t[18].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("size")||t[18].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[19][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[19][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[19][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[20]&&-1!==skips[20].indexOf("bgColor")||t[20].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[20]&&-1!==skips[20].indexOf("primaryColor")||t[20].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[20]&&-1!==skips[20].indexOf("size")||t[20].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[21][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[21][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[21][Symbol.for("props")].size=e.$sizes.get("graph.size")},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[22]&&-1!==skips[22].indexOf("bgColor")||t[22].set("bgColor",e.$colors.get("color2"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[22]&&-1!==skips[22].indexOf("primaryColor")||t[22].set("primaryColor",e.$colors.get("color4"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[22]&&-1!==skips[22].indexOf("size")||t[22].set("size",e.$sizes.get("graph.size"))},function(e,t,n,r,o,i){t[23][Symbol.for("props")].bgColor=e.$colors.get("color2")},function(e,t,n,r,o,i){t[23][Symbol.for("props")].primaryColor=e.$colors.get("color4")},function(e,t,n,r,o,i){t[23][Symbol.for("props")].size=e.$sizes.get("graph.size")}],context:{}},state:function(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode:function(e){this.$colors.set(e)},sizes:function(e){this.$sizes.set(e)}},computed:{text:function(){return this.mode,"dark"===this.mode?"Dark mode":"Light mode"}},input:{right:function(){var e=this;this.toggleX=0,this.$setTimeout(function(){e.mode="light"},150)},left:function(){var e=this;this.toggleX=48,this.$setTimeout(function(){e.mode="dark"},150)},up:function(){this.sizes="large"},down:function(){this.sizes="small"}}}),ci={headers:{"Content-Type":"application/json",Authorization:"Bearer ABC123"}};function fi(e){return Jo+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w185")+e}function di(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://8b4fa39d.lightningjs.workers.dev"+e,g(g({},ci),t)).then(function(e){return e.json()})}function pi(){return di("/configuration").then(function(e){return Yo=e,Jo=e.images.secure_base_url,e})}var hi={get:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Yo?di.apply(void 0,t):pi().then(function(){return di.apply(void 0,t)})},loadConfig:pi},mi=function(e){return hi.get("/".concat(e,"/popular")).then(gi)},gi=function(e){return e.results.filter(function(e){return!e.adult}).map(function(e){return{poster:fi(e.poster_path||e.profile_path),background:fi(e.backdrop_path,"w1280"),identifier:e.id,title:e.title||e.name,overview:e.overview}})},yi=function(e){var t=Array.isArray(e)?e:[e];return vi("movie").then(function(e){var n=e.genres,r=[];return n.forEach(function(e){t.includes(e.name)&&r.push(e.id)}),hi.get("/discover/movie?with_genres=".concat(r.join())).then(gi)})},vi=function(e){return hi.get("/genre/".concat(e,"/list"))},bi=Wo.Component("Poster",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=1280,l[0].h=720,l[0].x=t.x,l[0].src=t.item.background,l[0].color="{top: '0xffffffff', bottom: '0x000000ff'}",l[0].scale={transition:{value:t.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[0]._effects=[{type:"radius",props:{radius:8}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].alpha={transition:{value:t.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(l[1]),e=s[1],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=185,l[2].h=278,l[2].x=54,l[2].y=220,l[2].src=t.item.poster,s[2].populate(l[2]),e=s[1],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].content=t.item.title,l[3].font="raleway",l[3].y=520,l[3].x=54,l[3].size=64,l[3].maxwidth=1e3,l[3].maxlines=1,l[3].__textnode=!0,s[3].populate(l[3]),e=s[1],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].content=t.item.overview,l[4].size=21,l[4].y=620,l[4].x=60,l[4].color="0xccccccff",l[4].maxwidth=1e3,l[4].maxlines=2,l[4].lineheight=36,l[4].__textnode=!0,s[4].populate(l[4]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("src",e.item.background)},function(e,t,n,r,o,i){t[0].set("scale",{transition:{value:e.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[1].set("alpha",{transition:{value:e.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[2].set("src",e.item.poster)},function(e,t,n,r,o,i){t[3].set("content",e.item.title)},function(e,t,n,r,o,i){t[4].set("content",e.item.overview)}],context:{}},props:["src","index","item","width"],state:function(){return{scale:1,zIndex:1,alpha:0}},computed:{x:function(){return this.index,this.width,this.index*this.width}},hooks:{focus:function(){this.scale=1.1,this.alpha=1},unfocus:function(){this.scale=1,this.alpha=0}}}),xi=Wo.Component("Poster",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=185,l[0].h=278,l[0].x=t.x,l[0].src=t.item.poster,l[0].scale={transition:{value:t.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[0]._effects=[{type:"radius",props:{radius:8}}],s[0].populate(l[0]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("src",e.item.poster)},function(e,t,n,r,o,i){t[0].set("scale",{transition:{value:e.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state:function(){return{scale:1,color:"#333"}},computed:{x:function(){return this.index,this.width,this.index*this.width}},hooks:{focus:function(){this.color="#fff",this.scale=1.1},unfocus:function(){this.color="#333",this.scale=1}}}),wi=Wo.Component("PosterTitle",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=185,l[0].h=278,l[0].x=t.x,l[0].src=t.item.poster,l[0].scale={transition:{value:t.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[0]._effects=[{type:"radius",props:{radius:8}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].x=10,l[1].y={transition:{value:t.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[1].alpha={transition:{value:t.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(l[1]),e=s[1],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].content=t.item.title,l[2].font="raleway",l[2].size=22,l[2].maxwidth=185,l[2].maxlines=2,l[2].lineheight=28,l[2].__textnode=!0,s[2].populate(l[2]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("src",e.item.poster)},function(e,t,n,r,o,i){t[0].set("scale",{transition:{value:e.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[1].set("y",{transition:{value:e.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[1].set("alpha",{transition:{value:e.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(e,t,n,r,o,i){t[2].set("content",e.item.title)}],context:{}},props:["src","index","item","width"],state:function(){return{scale:1,alpha:0,y:278}},computed:{x:function(){return this.index,this.width,this.index*this.width}},hooks:{focus:function(){this.scale=1.1,this.alpha=1,this.y=288},unfocus:function(){this.scale=1,this.alpha=0,this.y=278}}}),Si=Wo.Component("TmdbRow",{components:{Hero:bi,Poster:xi,PosterTitle:wi},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f=this,d=[],p=[],h=[],m=[],g=[],y=[],v=!1,b=[];p[0]={},d[0]=this.element({parent:e||"root"},!0===v?l:t),d[0].populate(p[0]),e=d[0],p[1]={},d[1]=this.element({parent:e||"root"},!0===v?l:t),p[1].x={transition:{value:t.x,duration:300,easing:"ease-in-out"}},p[1].y=80,d[1].populate(p[1]),e=d[1],g[2]=[],h[2]=function(){var o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,g=d.length,x={}||{};u=x.from||0,c="to"in x?x.to:d.length;for(;g--;){var w=d[g];g<c&&g>=u&&h.add(""+w.identifier)}for(var S=a.length;S--;)if(!1===h.has(a[S])){var T=a[S];o[2][T]&&o[2][T].destroy(),o[2][T]=null,delete o[2][T],o[3][T]&&o[3][T].destroy(),o[3][T]=null,delete o[3][T]}a.length=0;for(var k=d.length,C=0;C<k;C++)if(!(C<u||C>=c)){var A=Object.create(t);if(e=o[1],A.item=d[C],A.index=C,A.key=""+A.item.identifier,A.__ref="poster"+C,a.push(A.key),b[2]=n.components&&n.components.Component||r.Component,void 0===o[2]&&(o[2]={}),p[2]={},void 0===o[2][A.key]&&(o[2][A.key]=f.element({parent:e||"root"},!0===v?l:t)),p[2].is=A.type,p[2].index=A.index,p[2].item=A.item,p[2].ref=A.__ref,p[2].width=A.width,y[2]=[],void 0!==b[2])for(var E in b[2][Symbol.for("config")].props)delete p[2][b[2][Symbol.for("config")].props[E]],y[2].push(b[2][Symbol.for("config")].props[E]);if(void 0===o[2][A.key].nodeId&&o[2][A.key].populate(p[2]),void 0===o[3]&&(o[3]={}),e=o[2][A.key],m[3]={},void 0===o[3][A.key]){if(m[3].is=A.type,m[3].index=A.index,m[3].item=A.item,m[3].ref=A.__ref,m[3].width=A.width,s=m[3].is||"Component",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "Component" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);o[3][A.key]=r[3].call(null,{props:m[3]},o[2][A.key],t),o[3][A.key][Symbol.for("slots")][0]?(e=o[3][A.key][Symbol.for("slots")][0],l=o[3][A.key],v=!0):e=o[3][A.key][Symbol.for("children")][0]}}return[]};var x=function(){h[2](t.items,d,g[2])};return t[Symbol.for("effects")].push(x),o(x,["items"]),{elms:d,cleanup:function(){l=null,t=null,e=null,g[2].length=0,h[2]=null,b[2]=null,m[3]=null,r[3]=null,x=null,b.length=0,d.length=0,r.length=0,p.length=0,h.length=0,m.length=0,y.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("x",{transition:{value:e.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state:function(){return{focused:0,offset:0}},hooks:{focus:function(){this.$trigger("focused")}},computed:{x:function(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused:function(e){var t=this.$select("poster"+e);t&&t.$focus&&(t.$focus(),this.$emit("posterSelect",this.items[e]))}},input:{left:function(){this.focused=Math.max(this.focused-1,0)},right:function(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),Ti=Wo.Component("Background",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].src=t.bg1,l[1].w=1920,l[1].h=1080,l[1].color="{top: '0xffffffff', bottom: '0x000000ff'}",l[1].alpha={transition:{value:t.alpha1,duration:400,easing:"ease-in"}},s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].src=t.bg2,l[2].w=1920,l[2].h=1080,l[2].color="{top: '0xffffffff', bottom: '0x000000ff'}",l[2].alpha={transition:{value:t.alpha2,duration:400,easing:"ease-in"}},s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=1920,l[3].h=1080,l[3].src="assets/gradient.png",l[3].color="0x8866ddff",l[3].alpha=.8,s[3].populate(l[3]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("src",e.bg1)},function(e,t,n,r,o,i){t[1].set("alpha",{transition:{value:e.alpha1,duration:400,easing:"ease-in"}})},function(e,t,n,r,o,i){t[2].set("src",e.bg2)},function(e,t,n,r,o,i){t[2].set("alpha",{transition:{value:e.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["bgImg"],state:function(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{bgImg:function(e){this.counter=(this.counter+1)%2,0===this.counter?(this.bg1=e,this.alpha1=.8,this.alpha2=0):(this.bg2=e,this.alpha1=0,this.alpha2=.8)}}}),ki=Wo.Component("TMdb",{components:{Background:Ti,TmdbRow:Si},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=0,w=[];if(h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),h[0].w=1920,h[0].h=1080,h[0].color="0x000000ff",p[0].populate(h[0]),!0===b&&(x-=1),w[1]=n.components&&n.components.Background||r.Background,e=p[0],h[1]={},p[1]=this.element({parent:e||"root"},!0===b?u:t),h[1].bgImg=t.src,v[1]=[],void 0!==w[1])for(var S in w[1][Symbol.for("config")].props)delete h[1][w[1][Symbol.for("config")].props[S]],v[1].push(w[1][Symbol.for("config")].props[S]);if(p[1].populate(h[1]),!0===b&&(x-=1),e=p[1],g[2]={},l=t.src,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[2].bgImg=l,s=g[2].is||"Background",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Background" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);p[2]=r[2].call(null,{props:g[2]},p[1],t),p[2][Symbol.for("slots")][0]?(e=p[2][Symbol.for("slots")][0],u=p[2],b=!0):e=p[2][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),e=p[0],h[3]={},p[3]=this.element({parent:e||"root"},!0===b?u:t),p[3].populate(h[3]),!0===b&&(x-=1),e=p[3],h[4]={},p[4]=this.element({parent:e||"root"},!0===b?u:t),h[4].y={transition:{value:t.contentY,duration:t.duration}},h[4].alpha={transition:{value:t.alpha,duration:t.duration}},p[4].populate(h[4]),!0===b&&(x-=1),e=p[4],h[5]={},p[5]=this.element({parent:e||"root"},!0===b?u:t),h[5].src="assets/logo.png",h[5].x=140,h[5].y=90,h[5].w=243,h[5].h=52,p[5].populate(h[5]),!0===b&&(x-=1),e=p[4],h[6]={},p[6]=this.element({parent:e||"root"},!0===b?u:t),h[6].content=t.title,h[6].font="raleway",h[6].size=80,h[6].x=140,h[6].y=300,h[6].maxwidth=1e3,h[6]["@loaded"]=t.positionText&&t.positionText.bind(t),h[6].maxlines=1,h[6].__textnode=!0,p[6].populate(h[6]),!0===b&&(x-=1),e=p[4],h[7]={},p[7]=this.element({parent:e||"root"},!0===b?u:t),h[7].content=t.overview,h[7].maxwidth=880,h[7].x=140,h[7].y=430,h[7].lineheight=40,h[7].maxlines=3,h[7].__textnode=!0,p[7].populate(h[7]),!0===b&&(x-=1),e=p[3],h[8]={},p[8]=this.element({parent:e||"root"},!0===b?u:t),h[8].y={transition:{value:t.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},p[8].populate(h[8]),!0===b&&(x-=1),e=p[8],y[9]=[],m[9]=function(){var a=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,m=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),y=new Set,S=m.length,T={}||{};c=T.from||0,f="to"in T?T.to:m.length;for(;S--;){var k=m[S];S<f&&S>=c&&y.add(""+k.title)}for(var C=p.length;C--;)if(!1===y.has(p[C])){var A=p[C];a[9][A]&&a[9][A].destroy(),a[9][A]=null,delete a[9][A],a[10][A]&&a[10][A].destroy(),a[10][A]=null,delete a[10][A]}p.length=0;for(var E=m.length,I=[],M=function(){if(R<c||R>=f)return 1;var y=Object.create(t);if(e=a[8],y.row=m[R],y.index=R,y.key=""+y.row.title,y.__ref="row"+R,p.push(y.key),w[9]=n.components&&n.components.TmdbRow||r.TmdbRow,void 0===a[9]&&(a[9]={}),h[9]={},void 0===a[9][y.key]&&(a[9][y.key]=d.element({parent:e||"root"},!0===b?u:t)),h[9].title=y.row.title,h[9].items=y.row.items,h[9].type=y.row.type,h[9].width=y.row.width,h[9].y=y.row.y,h[9].ref=y.__ref,v[9]=[],void 0!==w[9])for(var S in w[9][Symbol.for("config")].props)delete h[9][w[9][Symbol.for("config")].props[S]],v[9].push(w[9][Symbol.for("config")].props[S]);if(void 0===a[9][y.key].nodeId&&(a[9][y.key].populate(h[9]),!0===b&&(x-=1)),void 0===a[10]&&(a[10]={}),e=a[9][y.key],g[10]={},void 0===a[10][y.key]){if(g[10].title=y.row.title,l=y.row.items,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[10].items=l,l=y.row.type,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[10].type=l,l=y.row.width,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[10].width=l,g[10].y=y.row.y,g[10].ref=y.__ref,s=g[10].is||"TmdbRow",r[10],"string"==typeof s){if(r[10]=n.components&&n.components[s]||r[s],!r[10])throw new Error('Component "TmdbRow" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[10]=s);a[10][y.key]=r[10].call(null,{props:g[10]},a[9][y.key],t),a[10][y.key][Symbol.for("slots")][0]?(e=a[10][y.key][Symbol.for("slots")][0],u=a[10][y.key],b=!0):e=a[10][y.key][Symbol.for("children")][0]}var T=function(){void 0!==v&&void 0!==v[9]&&-1!==v[9].indexOf("items")||a[9][y.key].set("items",y.row.items)};o(T,null),I.push(T),t[Symbol.for("effects")].push(T);var k=function(){void 0!==v&&void 0!==v[9]&&-1!==v[9].indexOf("type")||a[9][y.key].set("type",y.row.type)};o(k,null),I.push(k),t[Symbol.for("effects")].push(k);var C=function(){void 0!==v&&void 0!==v[9]&&-1!==v[9].indexOf("width")||a[9][y.key].set("width",y.row.width)};o(C,null),I.push(C),t[Symbol.for("effects")].push(C),a[10][y.key][Symbol.for("props")].items=y.row.items,a[10][y.key][Symbol.for("props")].type=y.row.type,a[10][y.key][Symbol.for("props")].width=y.row.width},R=0;R<E;R++)M();return I};var T=function(){m[9](t.rows,p,y[9])};return t[Symbol.for("effects")].push(T),o(T,["rows"]),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,w[1]=null,g[2]=null,r[2]=null,y[9].length=0,m[9]=null,w[9]=null,g[10]=null,r[10]=null,T=null,w.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[1]&&-1!==skips[1].indexOf("bgImg")||t[1].set("bgImg",e.src)},function(e,t,n,r,o,i){t[2][Symbol.for("props")].bgImg=e.src},function(e,t,n,r,o,i){t[4].set("y",{transition:{value:e.contentY,duration:e.duration}})},function(e,t,n,r,o,i){t[4].set("alpha",{transition:{value:e.alpha,duration:e.duration}})},function(e,t,n,r,o,i){t[6].set("content",e.title)},function(e,t,n,r,o,i){t[7].set("content",e.overview)},function(e,t,n,r,o,i){t[8].set("y",{transition:{value:e.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state:function(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused:function(e){var t=this.$select("row"+e);t&&t.$focus&&t.$focus()}},hooks:{init:function(){var e=this;return i(n().m(function t(){var r,o,i,a,s,l,u,c,f,d,p,h,m,g;return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,mi("movie");case 1:return r=t.v,o={title:"Popular Movies",items:r,type:"Poster",width:215,y:0},t.n=2,yi(["Western"]);case 2:return i=t.v,a={title:"Best Western movies",items:i,type:"Hero",width:1370,y:358},t.n=3,yi(["Comedy"]);case 3:return s=t.v,l={title:"Best Comedy movies",items:s,type:"PosterTitle",width:215,y:1158},t.n=4,mi("tv");case 4:return u=t.v,c={title:"Popular TV shows",items:u,type:"PosterTitle",width:215,y:1536},t.n=5,yi(["adventure","action"]);case 5:return f=t.v,d={title:"Best Adventure and Action movies",items:f,type:"Hero",width:1370,y:1914},t.n=6,yi("Documentary");case 6:return p=t.v,h={title:"Best Documentaries",items:p,type:"PosterTitle",width:215,y:2714},t.n=7,yi("Western");case 7:m=t.v,g={title:"Best Western movies 2",items:m,type:"PosterTitle",width:215,y:3092},e.rows=[o,a,l,c,d,h,g],e.focused=0;case 8:return t.a(2)}},t)}))()},ready:function(){var e=this;this.$listen("posterSelect",function(t){0===e.focused&&(e.src=t.background,e.title=t.title,e.overview=t.overview)})},focus:function(){this.$trigger("focused")}},input:{up:function(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(0===this.focused?550:90)-this.rows[this.focused].y,this.alpha=0===this.focused?1:0},down:function(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(0===this.focused?550:90)-this.rows[this.focused].y,this.alpha=0===this.focused?1:0}}}),Ci=Wo.Component("MenuSprite",{code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].src="assets/menusprite.png",f[1].x=748,f[1].y=120,f[1].w=425,f[1].h=340,c[1].populate(f[1]),!0===h&&(m-=1),e=c[0],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),f[2].y=680,f[2].x=560,c[2].populate(f[2]),!0===h&&(m-=1),g[3]=n.components&&n.components.Sprite||r.Sprite,e=c[2],f[3]={},c[3]=this.element({parent:e||"root"},!0===h?u:t),f[3].image="assets/menusprite.png",f[3].x=0,f[3].w=140,f[3].h=140,f[3].map=t.map,f[3].frame=t.icon1,p[3]=[],void 0!==g[3])for(var y in g[3][Symbol.for("config")].props)delete f[3][g[3][Symbol.for("config")].props[y]],p[3].push(g[3][Symbol.for("config")].props[y]);if(c[3].populate(f[3]),!0===h&&(m-=1),e=c[3],d[4]={},d[4].image="assets/menusprite.png",d[4].x=0,d[4].w=140,d[4].h=140,d[4].map=t.map,l=t.icon1,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[4].frame=l,s=d[4].is||"Sprite",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);if(c[4]=r[4].call(null,{props:d[4]},c[3],t),c[4][Symbol.for("slots")][0]?(e=c[4][Symbol.for("slots")][0],u=c[4],h=!0):e=c[4][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[5]=n.components&&n.components.Sprite||r.Sprite,e=c[2],f[5]={},c[5]=this.element({parent:e||"root"},!0===h?u:t),f[5].image="assets/menusprite.png",f[5].x=220,f[5].w=140,f[5].h=140,f[5].map=t.map,f[5].frame="icon2",p[5]=[],void 0!==g[5])for(var v in g[5][Symbol.for("config")].props)delete f[5][g[5][Symbol.for("config")].props[v]],p[5].push(g[5][Symbol.for("config")].props[v]);if(c[5].populate(f[5]),!0===h&&(m-=1),e=c[5],d[6]={},d[6].image="assets/menusprite.png",d[6].x=220,d[6].w=140,d[6].h=140,d[6].map=t.map,d[6].frame="icon2",s=d[6].is||"Sprite",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);if(c[6]=r[6].call(null,{props:d[6]},c[5],t),c[6][Symbol.for("slots")][0]?(e=c[6][Symbol.for("slots")][0],u=c[6],h=!0):e=c[6][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[7]=n.components&&n.components.Sprite||r.Sprite,e=c[2],f[7]={},c[7]=this.element({parent:e||"root"},!0===h?u:t),f[7].image="assets/menusprite.png",f[7].x=440,f[7].w=140,f[7].h=140,f[7].map=t.map,f[7].frame="icon3",p[7]=[],void 0!==g[7])for(var b in g[7][Symbol.for("config")].props)delete f[7][g[7][Symbol.for("config")].props[b]],p[7].push(g[7][Symbol.for("config")].props[b]);if(c[7].populate(f[7]),!0===h&&(m-=1),e=c[7],d[8]={},d[8].image="assets/menusprite.png",d[8].x=440,d[8].w=140,d[8].h=140,d[8].map=t.map,d[8].frame="icon3",s=d[8].is||"Sprite",r[8],"string"==typeof s){if(r[8]=n.components&&n.components[s]||r[s],!r[8])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[8]=s);if(c[8]=r[8].call(null,{props:d[8]},c[7],t),c[8][Symbol.for("slots")][0]?(e=c[8][Symbol.for("slots")][0],u=c[8],h=!0):e=c[8][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[9]=n.components&&n.components.Sprite||r.Sprite,e=c[2],f[9]={},c[9]=this.element({parent:e||"root"},!0===h?u:t),f[9].image="assets/menusprite.png",f[9].x=660,f[9].w=140,f[9].h=140,f[9].map=t.map,f[9].frame="icon4_unfocus",p[9]=[],void 0!==g[9])for(var x in g[9][Symbol.for("config")].props)delete f[9][g[9][Symbol.for("config")].props[x]],p[9].push(g[9][Symbol.for("config")].props[x]);if(c[9].populate(f[9]),!0===h&&(m-=1),e=c[9],d[10]={},d[10].image="assets/menusprite.png",d[10].x=660,d[10].w=140,d[10].h=140,d[10].map=t.map,d[10].frame="icon4_unfocus",s=d[10].is||"Sprite",r[10],"string"==typeof s){if(r[10]=n.components&&n.components[s]||r[s],!r[10])throw new Error('Component "Sprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[10]=s);return c[10]=r[10].call(null,{props:d[10]},c[9],t),c[10][Symbol.for("slots")][0]?(e=c[10][Symbol.for("slots")][0],u=c[10],h=!0):e=c[10][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[3]=null,d[4]=null,r[4]=null,g[5]=null,d[6]=null,r[6]=null,g[7]=null,d[8]=null,r[8]=null,g[9]=null,d[10]=null,r[10]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[3]&&-1!==skips[3].indexOf("frame")||t[3].set("frame",e.icon1)},function(e,t,n,r,o,i){t[4][Symbol.for("props")].frame=e.icon1}],context:{}},state:function(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready:function(){var e=this;this.$setInterval(function(){e.icon1="icon1_unfocus"===e.icon1?"icon1_focus":"icon1_unfocus"},2e3)}}}),Ai=["menu"],Ei=Wo.Component("Sprites",{components:{MenuSprite:Ci},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),c[0].populate(f[0]),!0===h&&(m-=1),g[1]=n.components&&n.components.MenuSprite||r.MenuSprite,e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].show="menu"===t.currentSprite,p[1]=[],void 0!==g[1])for(var y in g[1][Symbol.for("config")].props)delete f[1][g[1][Symbol.for("config")].props[y]],p[1].push(g[1][Symbol.for("config")].props[y]);if(c[1].populate(f[1]),!0===h&&(m-=1),e=c[1],d[2]={},l="menu"===t.currentSprite,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[2].show=l,s=d[2].is||"MenuSprite",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "MenuSprite" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);return c[2]=r[2].call(null,{props:d[2]},c[1],t),c[2][Symbol.for("slots")][0]?(e=c[2][Symbol.for("slots")][0],u=c[2],h=!0):e=c[2][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[1]=null,d[2]=null,r[2]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[1]&&-1!==skips[1].indexOf("show")||t[1].set("show","menu"===e.currentSprite)},function(e,t,n,r,o,i){t[2][Symbol.for("props")].show="menu"===e.currentSprite}],context:{}},state:function(){return{currentSprite:"menu"}},input:{down:function(){var e=Ai.indexOf(this.currentSprite);e<Ai.length-1?this.currentSprite=Ai[e+1]:this.currentSprite=Ai[0]}}}),Ii=Wo.Component("Button",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=300,l[0].h=80,l[0].color=t.color||"0xff0000ff",l[0].effects=[{type:"radius",props:{radius:20}}],l[0].alpha={transition:t.alpha},l[0].scale={transition:t.scale},l[0].rotation=t.rotate,s[0].populate(l[0]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:20}}])},function(e,t,n,r,o,i){t[0].set("alpha",{transition:e.alpha})},function(e,t,n,r,o,i){t[0].set("scale",{transition:e.scale})},function(e,t,n,r,o,i){t[0].set("rotation",e.rotate)}],context:{}},props:["color"],state:function(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus:function(){this.$log.info("Button with color ".concat(this.color," received focus")),this.alpha=1,this.scale=1===this.scale?1.2:1},unfocus:function(){this.$log.info("Button with color ".concat(this.color," lost focus")),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter:function(){this.rotate=0===this.rotate?-4:0,this.scale=1.2===this.scale?1.3:1.2}}}),Mi=Wo.Component("Menu",{components:{Button:Ii},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),c[0].x={transition:t.x},c[0].w=400,c[0].h=1080,c[0].color="{right: '0x64748baa', left: '0x475569aa'}",u[0].populate(c[0]),!0===p&&(h-=1),e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].x=50,c[1].y=40,u[1].populate(c[1]),!0===p&&(h-=1),m[2]=n.components&&n.components.Button||r.Button,e=u[1],c[2]={},u[2]=this.element({parent:e||"root"},!0===p?l:t),c[2].color="0xe4e4e7ff",c[2].ref="menu1",d[2]=[],void 0!==m[2])for(var g in m[2][Symbol.for("config")].props)delete c[2][m[2][Symbol.for("config")].props[g]],d[2].push(m[2][Symbol.for("config")].props[g]);if(u[2].populate(c[2]),!0===p&&(h-=1),e=u[2],f[3]={},f[3].color="0xe4e4e7ff",f[3].ref="menu1",s=f[3].is||"Button",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);if(u[3]=r[3].call(null,{props:f[3]},u[2],t),u[3][Symbol.for("slots")][0]?(e=u[3][Symbol.for("slots")][0],l=u[3],p=!0):e=u[3][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[4]=n.components&&n.components.Button||r.Button,e=u[1],c[4]={},u[4]=this.element({parent:e||"root"},!0===p?l:t),c[4].color="0xe4e4e7ff",c[4].y=100,c[4].ref="menu2",d[4]=[],void 0!==m[4])for(var y in m[4][Symbol.for("config")].props)delete c[4][m[4][Symbol.for("config")].props[y]],d[4].push(m[4][Symbol.for("config")].props[y]);if(u[4].populate(c[4]),!0===p&&(h-=1),e=u[4],f[5]={},f[5].color="0xe4e4e7ff",f[5].y=100,f[5].ref="menu2",s=f[5].is||"Button",r[5],"string"==typeof s){if(r[5]=n.components&&n.components[s]||r[s],!r[5])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[5]=s);if(u[5]=r[5].call(null,{props:f[5]},u[4],t),u[5][Symbol.for("slots")][0]?(e=u[5][Symbol.for("slots")][0],l=u[5],p=!0):e=u[5][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[6]=n.components&&n.components.Button||r.Button,e=u[1],c[6]={},u[6]=this.element({parent:e||"root"},!0===p?l:t),c[6].color="0xe4e4e7ff",c[6].y=200,c[6].ref="menu3",d[6]=[],void 0!==m[6])for(var v in m[6][Symbol.for("config")].props)delete c[6][m[6][Symbol.for("config")].props[v]],d[6].push(m[6][Symbol.for("config")].props[v]);if(u[6].populate(c[6]),!0===p&&(h-=1),e=u[6],f[7]={},f[7].color="0xe4e4e7ff",f[7].y=200,f[7].ref="menu3",s=f[7].is||"Button",r[7],"string"==typeof s){if(r[7]=n.components&&n.components[s]||r[s],!r[7])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[7]=s);if(u[7]=r[7].call(null,{props:f[7]},u[6],t),u[7][Symbol.for("slots")][0]?(e=u[7][Symbol.for("slots")][0],l=u[7],p=!0):e=u[7][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[8]=n.components&&n.components.Button||r.Button,e=u[1],c[8]={},u[8]=this.element({parent:e||"root"},!0===p?l:t),c[8].color="0xe4e4e7ff",c[8].y=300,c[8].ref="menu4",d[8]=[],void 0!==m[8])for(var b in m[8][Symbol.for("config")].props)delete c[8][m[8][Symbol.for("config")].props[b]],d[8].push(m[8][Symbol.for("config")].props[b]);if(u[8].populate(c[8]),!0===p&&(h-=1),e=u[8],f[9]={},f[9].color="0xe4e4e7ff",f[9].y=300,f[9].ref="menu4",s=f[9].is||"Button",r[9],"string"==typeof s){if(r[9]=n.components&&n.components[s]||r[s],!r[9])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[9]=s);return u[9]=r[9].call(null,{props:f[9]},u[8],t),u[9][Symbol.for("slots")][0]?(e=u[9][Symbol.for("slots")][0],l=u[9],p=!0):e=u[9][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[2]=null,f[3]=null,r[3]=null,m[4]=null,f[5]=null,r[5]=null,m[6]=null,f[7]=null,r[7]=null,m[8]=null,f[9]=null,r[9]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("x",{transition:e.x})}],context:{}},state:function(){return{x:-360,focused:1}},hooks:{focus:function(){this.$trigger("focused"),this.x=0}},watch:{focused:function(){var e=this.$select("menu".concat(this.focused));e&&e.$focus&&e.$focus()}},input:{right:function(){this.parent.$focus(),this.x=-360},down:function(){this.focused=Math.min(this.focused+1,4)},up:function(){this.focused=Math.max(this.focused-1,1)},left:function(){}}}),Ri=Wo.Component("FocusHandling",{components:{Menu:Mi,Button:Ii},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].x=300,f[1].y=150,c[1].populate(f[1]),!0===h&&(m-=1),g[2]=n.components&&n.components.Button||r.Button,e=c[1],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),f[2].color="0xef4444ff",f[2].x=0,f[2].ref="button1",f[2].z=1===t.focused?1:0,p[2]=[],void 0!==g[2])for(var y in g[2][Symbol.for("config")].props)delete f[2][g[2][Symbol.for("config")].props[y]],p[2].push(g[2][Symbol.for("config")].props[y]);if(c[2].populate(f[2]),!0===h&&(m-=1),e=c[2],d[3]={},d[3].color="0xef4444ff",d[3].x=0,d[3].ref="button1",l=1===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[3].z=l,s=d[3].is||"Button",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);if(c[3]=r[3].call(null,{props:d[3]},c[2],t),c[3][Symbol.for("slots")][0]?(e=c[3][Symbol.for("slots")][0],u=c[3],h=!0):e=c[3][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[4]=n.components&&n.components.Button||r.Button,e=c[1],f[4]={},c[4]=this.element({parent:e||"root"},!0===h?u:t),f[4].color="0xf97316ff",f[4].x=320,f[4].ref="button2",f[4].z=2===t.focused?1:0,p[4]=[],void 0!==g[4])for(var v in g[4][Symbol.for("config")].props)delete f[4][g[4][Symbol.for("config")].props[v]],p[4].push(g[4][Symbol.for("config")].props[v]);if(c[4].populate(f[4]),!0===h&&(m-=1),e=c[4],d[5]={},d[5].color="0xf97316ff",d[5].x=320,d[5].ref="button2",l=2===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[5].z=l,s=d[5].is||"Button",r[5],"string"==typeof s){if(r[5]=n.components&&n.components[s]||r[s],!r[5])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[5]=s);if(c[5]=r[5].call(null,{props:d[5]},c[4],t),c[5][Symbol.for("slots")][0]?(e=c[5][Symbol.for("slots")][0],u=c[5],h=!0):e=c[5][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[6]=n.components&&n.components.Button||r.Button,e=c[1],f[6]={},c[6]=this.element({parent:e||"root"},!0===h?u:t),f[6].color="0x84cc16ff",f[6].x=640,f[6].ref="button3",f[6].z=3===t.focused?1:0,p[6]=[],void 0!==g[6])for(var b in g[6][Symbol.for("config")].props)delete f[6][g[6][Symbol.for("config")].props[b]],p[6].push(g[6][Symbol.for("config")].props[b]);if(c[6].populate(f[6]),!0===h&&(m-=1),e=c[6],d[7]={},d[7].color="0x84cc16ff",d[7].x=640,d[7].ref="button3",l=3===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[7].z=l,s=d[7].is||"Button",r[7],"string"==typeof s){if(r[7]=n.components&&n.components[s]||r[s],!r[7])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[7]=s);if(c[7]=r[7].call(null,{props:d[7]},c[6],t),c[7][Symbol.for("slots")][0]?(e=c[7][Symbol.for("slots")][0],u=c[7],h=!0):e=c[7][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[8]=n.components&&n.components.Button||r.Button,e=c[1],f[8]={},c[8]=this.element({parent:e||"root"},!0===h?u:t),f[8].color="0x10b981ff",f[8].x=0,f[8].y=100,f[8].ref="button4",f[8].z=4===t.focused?1:0,p[8]=[],void 0!==g[8])for(var x in g[8][Symbol.for("config")].props)delete f[8][g[8][Symbol.for("config")].props[x]],p[8].push(g[8][Symbol.for("config")].props[x]);if(c[8].populate(f[8]),!0===h&&(m-=1),e=c[8],d[9]={},d[9].color="0x10b981ff",d[9].x=0,d[9].y=100,d[9].ref="button4",l=4===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[9].z=l,s=d[9].is||"Button",r[9],"string"==typeof s){if(r[9]=n.components&&n.components[s]||r[s],!r[9])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[9]=s);if(c[9]=r[9].call(null,{props:d[9]},c[8],t),c[9][Symbol.for("slots")][0]?(e=c[9][Symbol.for("slots")][0],u=c[9],h=!0):e=c[9][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[10]=n.components&&n.components.Button||r.Button,e=c[1],f[10]={},c[10]=this.element({parent:e||"root"},!0===h?u:t),f[10].color="0x06b6d4ff",f[10].y=100,f[10].x=320,f[10].ref="button5",f[10].z=5===t.focused?1:0,p[10]=[],void 0!==g[10])for(var w in g[10][Symbol.for("config")].props)delete f[10][g[10][Symbol.for("config")].props[w]],p[10].push(g[10][Symbol.for("config")].props[w]);if(c[10].populate(f[10]),!0===h&&(m-=1),e=c[10],d[11]={},d[11].color="0x06b6d4ff",d[11].y=100,d[11].x=320,d[11].ref="button5",l=5===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[11].z=l,s=d[11].is||"Button",r[11],"string"==typeof s){if(r[11]=n.components&&n.components[s]||r[s],!r[11])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[11]=s);if(c[11]=r[11].call(null,{props:d[11]},c[10],t),c[11][Symbol.for("slots")][0]?(e=c[11][Symbol.for("slots")][0],u=c[11],h=!0):e=c[11][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[12]=n.components&&n.components.Button||r.Button,e=c[1],f[12]={},c[12]=this.element({parent:e||"root"},!0===h?u:t),f[12].color="0x3b82f6ff",f[12].y=100,f[12].x=640,f[12].ref="button6",f[12].z=6===t.focused?1:0,p[12]=[],void 0!==g[12])for(var S in g[12][Symbol.for("config")].props)delete f[12][g[12][Symbol.for("config")].props[S]],p[12].push(g[12][Symbol.for("config")].props[S]);if(c[12].populate(f[12]),!0===h&&(m-=1),e=c[12],d[13]={},d[13].color="0x3b82f6ff",d[13].y=100,d[13].x=640,d[13].ref="button6",l=6===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[13].z=l,s=d[13].is||"Button",r[13],"string"==typeof s){if(r[13]=n.components&&n.components[s]||r[s],!r[13])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[13]=s);if(c[13]=r[13].call(null,{props:d[13]},c[12],t),c[13][Symbol.for("slots")][0]?(e=c[13][Symbol.for("slots")][0],u=c[13],h=!0):e=c[13][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[14]=n.components&&n.components.Button||r.Button,e=c[1],f[14]={},c[14]=this.element({parent:e||"root"},!0===h?u:t),f[14].color="0x8b5cf6ff",f[14].y=200,f[14].x=0,f[14].ref="button7",f[14].z=7===t.focused?1:0,p[14]=[],void 0!==g[14])for(var T in g[14][Symbol.for("config")].props)delete f[14][g[14][Symbol.for("config")].props[T]],p[14].push(g[14][Symbol.for("config")].props[T]);if(c[14].populate(f[14]),!0===h&&(m-=1),e=c[14],d[15]={},d[15].color="0x8b5cf6ff",d[15].y=200,d[15].x=0,d[15].ref="button7",l=7===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[15].z=l,s=d[15].is||"Button",r[15],"string"==typeof s){if(r[15]=n.components&&n.components[s]||r[s],!r[15])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[15]=s);if(c[15]=r[15].call(null,{props:d[15]},c[14],t),c[15][Symbol.for("slots")][0]?(e=c[15][Symbol.for("slots")][0],u=c[15],h=!0):e=c[15][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[16]=n.components&&n.components.Button||r.Button,e=c[1],f[16]={},c[16]=this.element({parent:e||"root"},!0===h?u:t),f[16].color="0xd946efff",f[16].y=200,f[16].x=320,f[16].ref="button8",f[16].z=8===t.focused?1:0,p[16]=[],void 0!==g[16])for(var k in g[16][Symbol.for("config")].props)delete f[16][g[16][Symbol.for("config")].props[k]],p[16].push(g[16][Symbol.for("config")].props[k]);if(c[16].populate(f[16]),!0===h&&(m-=1),e=c[16],d[17]={},d[17].color="0xd946efff",d[17].y=200,d[17].x=320,d[17].ref="button8",l=8===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[17].z=l,s=d[17].is||"Button",r[17],"string"==typeof s){if(r[17]=n.components&&n.components[s]||r[s],!r[17])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[17]=s);if(c[17]=r[17].call(null,{props:d[17]},c[16],t),c[17][Symbol.for("slots")][0]?(e=c[17][Symbol.for("slots")][0],u=c[17],h=!0):e=c[17][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[18]=n.components&&n.components.Button||r.Button,e=c[1],f[18]={},c[18]=this.element({parent:e||"root"},!0===h?u:t),f[18].color="0xf43f5eff",f[18].y=200,f[18].x=640,f[18].ref="button9",f[18].z=9===t.focused?1:0,p[18]=[],void 0!==g[18])for(var C in g[18][Symbol.for("config")].props)delete f[18][g[18][Symbol.for("config")].props[C]],p[18].push(g[18][Symbol.for("config")].props[C]);if(c[18].populate(f[18]),!0===h&&(m-=1),e=c[18],d[19]={},d[19].color="0xf43f5eff",d[19].y=200,d[19].x=640,d[19].ref="button9",l=9===t.focused?1:0,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[19].z=l,s=d[19].is||"Button",r[19],"string"==typeof s){if(r[19]=n.components&&n.components[s]||r[s],!r[19])throw new Error('Component "Button" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[19]=s);if(c[19]=r[19].call(null,{props:d[19]},c[18],t),c[19][Symbol.for("slots")][0]?(e=c[19][Symbol.for("slots")][0],u=c[19],h=!0):e=c[19][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[20]=n.components&&n.components.Menu||r.Menu,e=c[0],f[20]={},c[20]=this.element({parent:e||"root"},!0===h?u:t),f[20].ref="menu",p[20]=[],void 0!==g[20])for(var A in g[20][Symbol.for("config")].props)delete f[20][g[20][Symbol.for("config")].props[A]],p[20].push(g[20][Symbol.for("config")].props[A]);if(c[20].populate(f[20]),!0===h&&(m-=1),e=c[20],d[21]={},d[21].ref="menu",s=d[21].is||"Menu",r[21],"string"==typeof s){if(r[21]=n.components&&n.components[s]||r[s],!r[21])throw new Error('Component "Menu" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[21]=s);return c[21]=r[21].call(null,{props:d[21]},c[20],t),c[21][Symbol.for("slots")][0]?(e=c[21][Symbol.for("slots")][0],u=c[21],h=!0):e=c[21][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[2]=null,d[3]=null,r[3]=null,g[4]=null,d[5]=null,r[5]=null,g[6]=null,d[7]=null,r[7]=null,g[8]=null,d[9]=null,r[9]=null,g[10]=null,d[11]=null,r[11]=null,g[12]=null,d[13]=null,r[13]=null,g[14]=null,d[15]=null,r[15]=null,g[16]=null,d[17]=null,r[17]=null,g[18]=null,d[19]=null,r[19]=null,g[20]=null,d[21]=null,r[21]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("z")||t[2].set("z",1===e.focused?1:0)},function(e,t,n,r,o,i){t[3][Symbol.for("props")].z=1===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[4]&&-1!==skips[4].indexOf("z")||t[4].set("z",2===e.focused?1:0)},function(e,t,n,r,o,i){t[5][Symbol.for("props")].z=2===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[6]&&-1!==skips[6].indexOf("z")||t[6].set("z",3===e.focused?1:0)},function(e,t,n,r,o,i){t[7][Symbol.for("props")].z=3===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[8]&&-1!==skips[8].indexOf("z")||t[8].set("z",4===e.focused?1:0)},function(e,t,n,r,o,i){t[9][Symbol.for("props")].z=4===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[10]&&-1!==skips[10].indexOf("z")||t[10].set("z",5===e.focused?1:0)},function(e,t,n,r,o,i){t[11][Symbol.for("props")].z=5===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[12]&&-1!==skips[12].indexOf("z")||t[12].set("z",6===e.focused?1:0)},function(e,t,n,r,o,i){t[13][Symbol.for("props")].z=6===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[14]&&-1!==skips[14].indexOf("z")||t[14].set("z",7===e.focused?1:0)},function(e,t,n,r,o,i){t[15][Symbol.for("props")].z=7===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[16]&&-1!==skips[16].indexOf("z")||t[16].set("z",8===e.focused?1:0)},function(e,t,n,r,o,i){t[17][Symbol.for("props")].z=8===e.focused?1:0},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("z")||t[18].set("z",9===e.focused?1:0)},function(e,t,n,r,o,i){t[19][Symbol.for("props")].z=9===e.focused?1:0}],context:{}},state:function(){return{focused:1}},hooks:{focus:function(){this.$trigger("focused")}},watch:{focused:function(e){var t=this.$select("button".concat(e));t&&t.$focus&&t.$focus()}},input:{right:function(){this.focused=Math.min(this.focused+1,9)},left:function(){var e=this.focused-1;if(0===e){var t=this.$select("menu");t&&t.$focus&&t.$focus()}else this.focused=Math.max(e,1)},a:function(){var e=this.$select("menu");e&&e.$focus&&e.$focus()}}}),_i=Wo.Component("Positioning",{code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),u[0].populate(c[0]),!0===p&&(h-=1),e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].w=100,c[1].h=100,c[1].x=20,c[1].y=20,c[1].color="0xecfeffff",u[1].populate(c[1]),!0===p&&(h-=1),e=u[0],c[2]={},u[2]=this.element({parent:e||"root"},!0===p?l:t),c[2].w=100,c[2].h=100,c[2].x=140,c[2].y=20,c[2].color="0xa5f3fcff",u[2].populate(c[2]),!0===p&&(h-=1),e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].w=100,c[3].h=100,c[3].x=260,c[3].y=20,c[3].color="0x22d3eeff",u[3].populate(c[3]),!0===p&&(h-=1),e=u[0],c[4]={},u[4]=this.element({parent:e||"root"},!0===p?l:t),c[4].w=100,c[4].h=100,c[4].x=380,c[4].y=20,c[4].color="0x0891b2ff",u[4].populate(c[4]),!0===p&&(h-=1),e=u[0],c[5]={},u[5]=this.element({parent:e||"root"},!0===p?l:t),c[5].w=100,c[5].h=100,c[5].x=t.x1,c[5].y=t.y,c[5].color="0xfdf4ffff",u[5].populate(c[5]),!0===p&&(h-=1),e=u[0],c[6]={},u[6]=this.element({parent:e||"root"},!0===p?l:t),c[6].w=100,c[6].h=100,c[6].x=t.x2,c[6].y=t.y,c[6].color="0xf5d0feff",u[6].populate(c[6]),!0===p&&(h-=1),e=u[0],c[7]={},u[7]=this.element({parent:e||"root"},!0===p?l:t),c[7].w=100,c[7].h=100,c[7].x=t.x3,c[7].y=t.y,c[7].color="0xe879f9ff",u[7].populate(c[7]),!0===p&&(h-=1),e=u[0],c[8]={},u[8]=this.element({parent:e||"root"},!0===p?l:t),c[8].w=100,c[8].h=100,c[8].x=t.x4,c[8].y=t.y,c[8].color="0xc026d3ff",u[8].populate(c[8]),!0===p&&(h-=1),e=u[0],c[9]={},u[9]=this.element({parent:e||"root"},!0===p?l:t),c[9].w=100,c[9].h=100,c[9].x=t.xA,c[9].y=260,c[9].color="0xfff7edff",u[9].populate(c[9]),!0===p&&(h-=1),e=u[0],c[10]={},u[10]=this.element({parent:e||"root"},!0===p?l:t),c[10].w=100,c[10].h=100,c[10].x=t.xB,c[10].y=260,c[10].color="0xfed7aaff",u[10].populate(c[10]),!0===p&&(h-=1),e=u[0],c[11]={},u[11]=this.element({parent:e||"root"},!0===p?l:t),c[11].w=100,c[11].h=100,c[11].x=t.xC,c[11].y=260,c[11].color="0xfb923cff",u[11].populate(c[11]),!0===p&&(h-=1),e=u[0],c[12]={},u[12]=this.element({parent:e||"root"},!0===p?l:t),c[12].w=100,c[12].h=100,c[12].x=t.xD,c[12].y=260,c[12].color="0xea580cff",u[12].populate(c[12]),!0===p&&(h-=1),e=u[0],c[13]={},u[13]=this.element({parent:e||"root"},!0===p?l:t),c[13].w=800,c[13].h=800,c[13].y=20,c[13].x=800,c[13].color="0xecfdf5ff",u[13].populate(c[13]),!0===p&&(h-=1),e=u[13],c[14]={},u[14]=this.element({parent:e||"root"},!0===p?l:t),c[14].w=600,c[14].h=600,c[14].y=20,c[14].x=20,c[14].color="0xa7f3d0ff",u[14].populate(c[14]),!0===p&&(h-=1),e=u[14],c[15]={},u[15]=this.element({parent:e||"root"},!0===p?l:t),c[15].w=400,c[15].h=400,c[15].y=100,c[15].x=20,c[15].color="0x34d399ff",u[15].populate(c[15]),!0===p&&(h-=1),e=u[15],c[16]={},u[16]=this.element({parent:e||"root"},!0===p?l:t),c[16].w=200,c[16].h=100,c[16].y=150,c[16].x=100,c[16].color="0x059669ff",u[16].populate(c[16]),!0===p&&(h-=1),e=u[16],c[17]={},u[17]=this.element({parent:e||"root"},!0===p?l:t),c[17].w=50,c[17].h=50,c[17].y={transition:t.yNested},c[17].x={transition:t.xNested},c[17].color="0x065f46ff",u[17].populate(c[17]),!0===p&&(h-=1),e=u[0],c[18]={},u[18]=this.element({parent:e||"root"},!0===p?l:t),c[18].w=100,c[18].h=100,c[18].y=500,c[18].x=20,c[18].color="0xe11d48ff",u[18].populate(c[18]),!0===p&&(h-=1),e=u[0],c[19]={},u[19]=this.element({parent:e||"root"},!0===p?l:t),c[19].w=200,c[19].h=200,c[19].x=50,c[19].y=700,c[19].color="0x94a3b8ff",c[19].z=100,u[19].populate(c[19]),!0===p&&(h-=1),e=u[19],c[20]={},u[20]=this.element({parent:e||"root"},!0===p?l:t),c[20].content="Lightning!",c[20].x=100,c[20].y=140,c[20].__textnode=!0,u[20].populate(c[20]),!0===p&&(h-=1),e=u[19],c[21]={},u[21]=this.element({parent:e||"root"},!0===p?l:t),c[21].w=300,c[21].h=100,c[21].color="0x475569ff",u[21].populate(c[21]),!0===p&&(h-=1),m[22]=n.components&&n.components.Circle||r.Circle,e=u[19],c[22]={},u[22]=this.element({parent:e||"root"},!0===p?l:t),c[22].x=150,c[22].y=150,c[22].size=100,c[22].color="0xffffffff",d[22]=[],void 0!==m[22])for(var g in m[22][Symbol.for("config")].props)delete c[22][m[22][Symbol.for("config")].props[g]],d[22].push(m[22][Symbol.for("config")].props[g]);if(u[22].populate(c[22]),!0===p&&(h-=1),e=u[22],f[23]={},f[23].x=150,f[23].y=150,f[23].size=100,f[23].color="0xffffffff",s=f[23].is||"Circle",r[23],"string"==typeof s){if(r[23]=n.components&&n.components[s]||r[s],!r[23])throw new Error('Component "Circle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[23]=s);return u[23]=r[23].call(null,{props:f[23]},u[22],t),u[23][Symbol.for("slots")][0]?(e=u[23][Symbol.for("slots")][0],l=u[23],p=!0):e=u[23][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),e=u[0],c[24]={},u[24]=this.element({parent:e||"root"},!0===p?l:t),c[24].w=300,c[24].h=300,c[24].x=50,c[24].y=700,c[24].color="0xef444480",u[24].populate(c[24]),!0===p&&(h-=1),e=u[0],c[25]={},u[25]=this.element({parent:e||"root"},!0===p?l:t),c[25].w=400,c[25].h=100,c[25].x=800,c[25].y=900,c[25].color="0x0284c7ff",u[25].populate(c[25]),!0===p&&(h-=1),e=u[25],c[26]={},u[26]=this.element({parent:e||"root"},!0===p?l:t),c[26].w=.42*e.node.width,c[26].h=.3*e.node.height,c[26].y=.05*e.node.height,c[26].x=.01*e.node.width,c[26].color="0x075985ff",u[26].populate(c[26]),!0===p&&(h-=1),e=u[25],c[27]={},u[27]=this.element({parent:e||"root"},!0===p?l:t),c[27].w=t.bar2.v,c[27].h=.3*e.node.height,c[27].y=.35*e.node.height,c[27].x=.01*e.node.width,c[27].color="0x6b21a8ff",u[27].populate(c[27]),!0===p&&(h-=1),e=u[25],c[28]={},u[28]=this.element({parent:e||"root"},!0===p?l:t),c[28].w={transition:t.bar3},c[28].h=.3*e.node.height,c[28].y=.65*e.node.height,c[28].x=.01*e.node.width,c[28].color="0x9f1239ff",u[28].populate(c[28]),!0===p&&(h-=1),e=u[0],c[29]={},u[29]=this.element({parent:e||"root"},!0===p?l:t),c[29].w=250,c[29].h=250,c[29].color="0xfef08aff",c[29].x=450,c[29].y=700,u[29].populate(c[29]),!0===p&&(h-=1),e=u[29],c[30]={},u[30]=this.element({parent:e||"root"},!0===p?l:t),c[30].w=40,c[30].h=40,c[30].placement="left",c[30].color="0x818cf8ff",u[30].populate(c[30]),!0===p&&(h-=1),e=u[29],c[31]={},u[31]=this.element({parent:e||"root"},!0===p?l:t),c[31].w=40,c[31].h=40,c[31].placement="center",c[31].color="0x2563ebff",u[31].populate(c[31]),!0===p&&(h-=1),e=u[29],c[32]={},u[32]=this.element({parent:e||"root"},!0===p?l:t),c[32].w=40,c[32].h=40,c[32].placement="right",c[32].color="0x1e40afff",u[32].populate(c[32]),!0===p&&(h-=1),e=u[29],c[33]={},u[33]=this.element({parent:e||"root"},!0===p?l:t),c[33].w=40,c[33].h=40,c[33].x=54,c[33].placement="top",c[33].color="0xf472b6ff",u[33].populate(c[33]),!0===p&&(h-=1),e=u[29],c[34]={},u[34]=this.element({parent:e||"root"},!0===p?l:t),c[34].w=40,c[34].h=40,c[34].x=54,c[34].placement="middle",c[34].color="0xdb2777ff",u[34].populate(c[34]),!0===p&&(h-=1),e=u[29],c[35]={},u[35]=this.element({parent:e||"root"},!0===p?l:t),c[35].w=40,c[35].h=40,c[35].x=54,c[35].placement="bottom",c[35].color="0xbe185dff",u[35].populate(c[35]),!0===p&&(h-=1),e=u[29],c[36]={},u[36]=this.element({parent:e||"root"},!0===p?l:t),c[36].w=40,c[36].h=40,c[36].placement="{x: 'center', y: 'bottom'}",c[36].color="0xa3e635ff",u[36].populate(c[36]),!0===p&&(h-=1),e=u[29],c[37]={},u[37]=this.element({parent:e||"root"},!0===p?l:t),c[37].w=40,c[37].h=40,c[37].placement="{x: 'right', y: 'middle'}",c[37].color="0x65a30dff",u[37].populate(c[37]),!0===p&&(h-=1),e=u[29],c[38]={},u[38]=this.element({parent:e||"root"},!0===p?l:t),c[38].w=40,c[38].h=40,c[38].placement="{x: 'center', y: 'middle'}",c[38].color="0x4d7c0fff",u[38].populate(c[38]),!0===p&&(h-=1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[22]=null,f[23]=null,r[23]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[9].set("x",e.xA)},function(e,t,n,r,o,i){t[10].set("x",e.xB)},function(e,t,n,r,o,i){t[11].set("x",e.xC)},function(e,t,n,r,o,i){t[12].set("x",e.xD)},function(e,t,n,r,o,i){t[16].set("y",150)},function(e,t,n,r,o,i){t[16].set("x",100)},function(e,t,n,r,o,i){t[17].set("y",{transition:e.yNested})},function(e,t,n,r,o,i){t[17].set("x",{transition:e.xNested})},function(e,t,n,r,o,i){t[27].set("w",e.bar2.v)},function(e,t,n,r,o,i){t[28].set("w",{transition:e.bar3})}],context:{}},state:function(){return{x1:20,x2:140,x3:260,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready:function(){var e=this;this.$setTimeout(function(){e.xD=e.xD+200,e.xC=e.xC+100,e.xB=e.xB+50,e.xA=e.xA+25},4e3),this.$setInterval(function(){e.yNested=0===e.yNested?50:0},2e3),this.$setInterval(function(){e.xNested=0===e.xNested?150:0},1e3),this.$setInterval(function(){var t=parseFloat(e.bar2.v),n="up"===e.bar2.direction?t+10:t-10;e.bar2.v=n+"%",n>=90&&(e.bar2.direction="down"),n<=10&&(e.bar2.direction="up")},400),this.$setInterval(function(){e.bar3=Math.ceil(96*Math.random())+"%"},2e3)}}}),Li="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Pi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Di,Oi={};
/*
       @license
       Shaka Player
       Copyright 2016 Google LLC
       SPDX-License-Identifier: Apache-2.0
      */var Ni,Ui,Bi,ji,Fi,zi,Vi=(Di||(Di=1,function(e){!function(){var t="undefined"!=typeof window?window:Li,n={};for(var r in function(e,t,n){var o,i,a="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},s="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},l=function(n){n=["object"==("undefined"==typeof globalThis?"undefined":x(globalThis))&&globalThis,n,"object"==x(e)&&e,"object"==("undefined"==typeof self?"undefined":x(self))&&self,"object"==x(t)&&t];for(var r=0;r<n.length;++r){var o=n[r];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}(this);function u(e,t){if(t)e:{var n=l;e=e.split(".");for(var r=0;r<e.length-1;r++){var o=e[r];if(!(o in n))break e;n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&s(n,e,{configurable:!0,writable:!0,value:t})}}if("function"==typeof Object.setPrototypeOf)i=Object.setPrototypeOf;else{var c;e:{var f={};try{f.__proto__={a:!0},c=f.a;break e}catch(kk){}c=!1}i=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=i;function p(e,t){if(e.prototype=a(t.prototype),e.prototype.constructor=e,d)d(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Jm=t.prototype}function h(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function m(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:h(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function g(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function y(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function v(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function b(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function w(e,t){e.i={Xh:t,li:!0},e.g=e.m||e.j}function S(e,t,n){return e.g=n,{value:t}}function k(e){e.g=0}function C(e,t,n){e.m=t,null!=n&&(e.j=n)}function A(e,t){e.m=0,e.j=t||0}function E(e,t,n){e.g=t,e.m=n||0}function I(e,t){return e.m=t||0,t=e.i.Xh,e.i=null,t}function M(e){e.B=[e.i],e.m=0,e.j=0}function R(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.li?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function _(e){this.g=new v,this.h=e}function L(e,t,n,r){try{var o=t.call(e.g.l,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return e.g.o=!1,o;var i=o.value}catch(a){return e.g.l=null,w(e.g,a),P(e)}return e.g.l=null,r.call(e.g,i),P(e)}function P(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,w(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.li)throw t.Xh;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function D(e){this.next=function(t){return b(e.g),e.g.l?t=L(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=P(e)),t},this.throw=function(t){return b(e.g),e.g.l?t=L(e,e.g.l.throw,t,e.g.u):(w(e.g,t),t=P(e)),t},this.return=function(t){return function(e,t){b(e.g);var n=e.g.l;return n?L(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),P(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function O(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,o){!function e(i){i.done?r(i.value):Promise.resolve(i.value).then(t,n).then(e,o)}(e.next())})}(new D(new _(e)))}function N(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,o=0;o<r;o++){var i=e[o];if(t.call(n,i,o,e))return{gi:o,v:i}}return{gi:-1,v:void 0}}function j(e,t){e instanceof String&&(e+="");var n=0,r=!1,o={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}u("Symbol",function(e){function t(e,t){this.g=e,s(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(o){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(o||"")+"_"+r++,o)}}),u("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=l[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&s(r.prototype,e,{configurable:!0,writable:!0,value:function(){return y(h(this))}})}return e}),v.prototype.u=function(e){this.h=e},v.prototype.return=function(e){this.i={return:e},this.g=this.j},v.prototype.A=function(e){this.g=e},u("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(r){t.reject(r)}}function n(){this.g=null}function o(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=l.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.G),reject:e(this.l)}},t.prototype.G=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.I(e);else{e:switch(x(e)){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.F(e):this.m(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(r){return void this.l(r)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.m=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.H(),this.B()},t.prototype.H=function(){var e=this;i(function(){if(e.C()){var t=l.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var e=l.CustomEvent,t=l.Event,n=l.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=l.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.I=function(e){var t=this.j();e.Pe(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{o(e(t))}catch(n){i(n)}}:t}var o,i,a=new t(function(e,t){o=e,i=t});return this.Pe(r(e,o),r(n,i)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Pe=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},t.resolve=o,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=m(e),i=r.next();!i.done;i=r.next())o(i.value).Pe(t,n)})},t.all=function(e){var n=m(e),r=n.next();return r.done?o([]):new t(function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Pe(i(a.length-1),t),r=n.next()}while(!r.done)})},t}),u("WeakMap",function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=m(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=x(e);return"object"===t&&null!==e||"function"===t}function o(e){if(!U(e,a)){var t=new n;s(e,a,{value:t})}}function i(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&o(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(T){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var l=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(o(e),!U(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.g]=t,this},t.prototype.get=function(e){return r(e)&&U(e,a)?e[a][this.g]:void 0},t.prototype.has=function(e){return r(e)&&U(e,a)&&U(e[a],this.g)},t.prototype.delete=function(e){return!!(r(e)&&U(e,a)&&U(e[a],this.g))&&delete e[a][this.g]},t}),u("Map",function(e){function t(){var e={};return e.wc=e.next=e.head=e}function n(e,t){var n=e[1];return y(function(){if(n){for(;n.head!=e[1];)n=n.wc;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&x(t);"object"==n||"function"==n?i.has(t)?n=i.get(t):(n=""+ ++a,i.set(t,n)):n="p_"+t;var r=e[0][n];if(r&&U(e[0],n))for(e=0;e<r.length;e++){var o=r[e];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:r,index:e,entry:o}}return{id:n,list:r,index:-1,entry:void 0}}function o(e){if(this[0]={},this[1]=t(),this.size=0,e){e=m(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(m([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=r.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!r.next().done)}catch(T){return!1}}())return e;var i=new WeakMap;o.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this[0][n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this[1],wc:this[1].wc,head:this[1],key:e,value:t},n.list.push(n.entry),this[1].wc.next=n.entry,this[1].wc=n.entry,this.size++),this},o.prototype.delete=function(e){return!(!(e=r(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this[0][e.id],e.entry.wc.next=e.entry.next,e.entry.next.wc=e.entry.wc,e.entry.head=null,this.size--,0))},o.prototype.clear=function(){this[0]={},this[1]=this[1].wc=t(),this.size=0},o.prototype.has=function(e){return!!r(this,e).entry},o.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},o.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},o.prototype.keys=function(){return n(this,function(e){return e.key})},o.prototype.values=function(){return n(this,function(e){return e.value})},o.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},o.prototype[Symbol.iterator]=o.prototype.entries;var a=0;return o}),u("Set",function(e){function t(e){if(this.g=new Map,e){e=m(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(m([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&o.value[1]==t&&!(o=r.next()).done&&o.value[0]!=t&&4==o.value[0].x&&o.value[1]==o.value[0]&&r.next().done}catch(i){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(r){return e.call(t,r,r,n)})},t)}),u("Array.prototype.findIndex",function(e){return e||function(e,t){return B(this,e,t).gi}}),u("Array.prototype.values",function(e){return e||function(){return j(this,function(e,t){return t})}}),u("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],o="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof o){e=o.call(e);for(var i=0;!(o=e.next()).done;)r.push(t.call(n,o.value,i++))}else for(o=e.length,i=0;i<o;i++)r.push(t.call(n,e[i],i));return r}}),u("Array.prototype.keys",function(e){return e||function(){return j(this,function(e){return e})}}),u("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),u("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for((t=t||0)<0&&(t=Math.max(t+r,0));t<r;t++){var o=n[t];if(o===e||Object.is(o,e))return!0}return!1}}),u("String.prototype.includes",function(e){return e||function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}}),u("String.fromCodePoint",function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var r=Number(arguments[n]);if(r<0||r>1114111||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),t+=String.fromCharCode(1023&r|56320))}return t}}),u("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=m(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([t]);return!(!r.has(t)||r.has(n))&&(r.delete(t),r.add(n),!r.has(t)&&r.has(n))}catch(o){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)}),u("Array.prototype.find",function(e){return e||function(e,t){return B(this,e,t).v}}),u("String.prototype.startsWith",function(e){return e||function(e,t){var n=F(this,e,"startsWith"),r=n.length,o=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var i=0;i<o&&t<r;)if(n[t++]!=e[i++])return!1;return i>=o}}),u("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)U(e,t)&&n.push([t,e[t]]);return n}});var z="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var o in r)U(r,o)&&(e[o]=r[o])}return e};u("Object.assign",function(e){return e||z}),u("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),u("Array.prototype.entries",function(e){return e||function(){return j(this,function(e,t){return[e,t]})}}),u("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),u("String.prototype.repeat",function(e){return e||function(e){var t=F(this,null,"repeat");if(e<0||e>1342177279)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),u("Number.EPSILON",function(){return 2220446049250313e-31}),u("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),u("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&e!==1/0&&e!==-1/0}}),u("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)U(e,t)&&n.push(e[t]);return n}}),u("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),u("String.prototype.endsWith",function(e){return e||function(e,t){var n=F(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;r>0&&t>0;)if(n[--t]!=e[--r])return!1;return r<=0}}),u("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||e===1/0||e===-1/0||0===e)return e;var t=Math.floor(Math.abs(e));return e<0?-t:t}});var V=this||self;function H(e,t){e=e.split(".");var n,r=V;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function G(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function q(e){return e.h/(1-Math.pow(e.g,e.i))}function W(){this.h=new G(2),this.j=new G(5),this.g=0,this.i=128e3,this.l=16e3}function K(){}function X(){}function $(){}function Y(e){var t=N.apply(1,arguments);Q.has(e)||(Q.add(e),$.apply(K,g(t)))}function J(){}G.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},W.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},W.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},W.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};var Q=new Set;function Z(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function ee(e,t){(t=e.indexOf(t))>-1&&e.splice(t,1)}function te(e,t,n){if(n||(n=Z),e.length!=t.length)return!1;t=t.slice();for(var r=(e=m(e)).next(),o={};!r.done;o={mi:void 0},r=e.next()){if(o.mi=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.mi,t)}}(o))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function ne(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Z),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function re(){this.g=new Map}function oe(){this.g=new re}function ie(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=ae;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(o){t=!1}ae=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}e.console&&((new Map).set(1,function(){return console.error.apply(console,g(N.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,g(N.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,g(N.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,g(N.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,g(N.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,g(N.apply(0,arguments)))}),$=function(){return console.warn.apply(console,g(N.apply(0,arguments)))},X=function(){console.error.apply(console,g(N.apply(0,arguments)))}),(o=re.prototype).push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},o.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},o.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(e){return e!=t});this.g.set(e,n),n.length||this.g.delete(e)}},o.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},o.size=function(){return this.g.size},o.keys=function(){return Array.from(this.g.keys())},(o=oe.prototype).release=function(){this.Qa(),this.g=null},o.D=function(e,t,n,r){this.g&&(e=new ie(e,t,n,r),this.g.push(t,e))},o.Aa=function(e,t,n,r){var o=this;this.D(e,t,function r(i){o.Ma(e,t,r),n(i)},r)},o.Ma=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],o=(r=m(r)).next();!o.done;o=r.next())(o=o.value).target!=e||n!=o.listener&&n||(o.Ma(),this.g.remove(t,o))},o.Qa=function(){if(this.g){for(var e=[],t=m(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,g(n.value));for(t=(e=m(e)).next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},H("shaka.util.EventManager",oe),oe.prototype.removeAll=oe.prototype.Qa,oe.prototype.unlisten=oe.prototype.Ma,oe.prototype.listenOnce=oe.prototype.Aa,oe.prototype.listen=oe.prototype.D,oe.prototype.release=oe.prototype.release,ie.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var ae=void 0;function se(e){this.h=e,this.g=void 0}
/*
      		 @license
      		 Shaka Player
      		 Copyright 2025 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/
function le(){return fe.value()}H("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),se.prototype.value=function(){return void 0===this.g&&(this.g=this.h()),this.g};var ue=null,ce=null,fe=new se(function(){var e=void 0;return ue&&(e=ue()),!e&&ce&&(e=ce()),e});function de(e,t){this.g=e,this.h=t}function pe(e,t){var n=new de(5,0),r=ge,o=r.g,i=n.h-o.h;((n.g-o.g||i)>0?r.i:r.h)(r.g,n,e,t)}function he(e,t,n,r){$([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function me(e,t,n,r){X([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}de.prototype.toString=function(){return"v"+this.g+"."+this.h};var ge=null,ye=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
      		 @license
      		 Copyright 2008 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/
/*
      		 @license
      		 Copyright 2006 The Closure Library Authors
      		 SPDX-License-Identifier: Apache-2.0
      		*/
function ve(e){var t;e instanceof ve?(be(this,e.bc),this.hd=e.hd,xe(this,e.Eb),we(this,e.Cd),this.qb=e.qb,Se(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(ye))?(be(this,t[1]||"",!0),this.hd=Te(t[2]||""),xe(this,t[3]||"",!0),we(this,t[4]),this.qb=Te(t[5]||"",!0),Se(this,t[6]||"",!0),this.Rc=Te(t[7]||"")):this.g=new _e(null)}function be(e,t,n){e.bc=n?Te(t,!0):t,e.bc&&(e.bc=e.bc.replace(/:$/,""))}function xe(e,t,n){e.Eb=n?Te(t,!0):t}function we(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Cd=t}else e.Cd=null}function Se(e,t,n){t instanceof _e?e.g=t:(n||(t=ke(t,Me)),e.g=new _e(t))}function Te(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ke(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Ce),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ce(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(o=ve.prototype).bc="",o.hd="",o.Eb="",o.Cd=null,o.qb="",o.Rc="",o.toString=function(){var e=[],t=this.bc;if(t&&e.push(ke(t,Ae,!0),":"),t=this.Eb){e.push("//");var n=this.hd;n&&e.push(ke(n,Ae,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Cd)&&e.push(":",String(t))}return(t=this.qb)&&(this.Eb&&"/"!=t.charAt(0)&&e.push("/"),e.push(ke(t,"/"==t.charAt(0)?Ie:Ee,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",ke(t,Re)),e.join("")},o.resolve=function(e){var t=this.clone();"data"===t.bc&&(t=new ve);var n=!!e.bc;n?be(t,e.bc):n=!!e.hd,n?t.hd=e.hd:n=!!e.Eb,n?xe(t,e.Eb):n=null!=e.Cd;var r=e.qb;if(n)we(t,e.Cd);else if(n=!!e.qb){if("/"!=r.charAt(0))if(this.Eb&&!this.qb)r="/"+r;else{var o=t.qb.lastIndexOf("/");-1!=o&&(r=t.qb.substr(0,o+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){o=0==r.lastIndexOf("/",0),r=r.split("/");for(var i=[],a=0;a<r.length;){var s=r[a++];"."==s?o&&a==r.length&&i.push(""):".."==s?((i.length>1||1==i.length&&""!=i[0])&&i.pop(),o&&a==r.length&&i.push("")):(i.push(s),o=!0)}r=i.join("/")}}return n?t.qb=r:n=""!==e.g.toString(),n?Se(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},o.clone=function(){return new ve(this)};var Ae=/[#\/\?@]/g,Ee=/[#\?:]/g,Ie=/[#\?]/g,Me=/[#\?@]/g,Re=/#/g;function _e(e){this.g=e||null}function Le(e){if(!e.eb&&(e.eb=new Map,e.Qd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),o=null;if(r>=0){var i=t[n].substring(0,r);o=t[n].substring(r+1)}else i=t[n];i=decodeURIComponent(i),o=o||"",e.add(i,decodeURIComponent(o))}}function Pe(e){return Le(e),e.Qd}function De(){}function Oe(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ue(e);t=Ue(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function Ne(e){return ArrayBuffer.isView(e)?0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function Ue(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Be(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint16Array)}function je(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Fe(e,t,n,r){var o=ArrayBuffer.isView(e)?e.buffer:e,i=1;"BYTES_PER_ELEMENT"in r&&(i=r.BYTES_PER_ELEMENT);var a=((e.byteOffset||0)+e.byteLength)/i;return new r(o,e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/i,a))),Math.floor(Math.min(e+Math.max(n,0),a))-e)}function ze(e,t,n){var r=N.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(o){this.stack=o.stack}}function Ve(){}function He(t){if(!t)return"";if(239==(t=Ue(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!le().sh())return(t=(new TextDecoder).decode(t)).includes("�")&&X('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var o=65533;if(128&t[r]?t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(o=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(o=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(o=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3):o=t[r],o<=65535)n+=String.fromCharCode(o);else{var i=1023&(o-=65536);n+=String.fromCharCode(55296+(o>>10)),n+=String.fromCharCode(56320+i)}}return n}function Ge(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new ze(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=je(e);for(var o=0;o<n;o++)r[o]=e.getUint16(2*o,t);return Xe(r)}function qe(e){function t(e){return n.byteLength<=e||n[e]>=9&&n[e]<=126}if(!e)return"";var n=Ue(e);if(239==n[0]&&187==n[1]&&191==n[2])return He(n);if(254==n[0]&&255==n[1])return Ge(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Ge(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Ge(e,!1);if(0==n[1]&&0==n[3])return Ge(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return He(e);throw new ze(2,2,2003)}function We(t){if(e.TextEncoder&&!le().sh()){var n=new TextEncoder;return Ne(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return Ne(n)}function Ke(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),o=0;o<e.length;++o)r.setUint16(2*o,e.charCodeAt(o),t);return n}function Xe(e){return Ye.value()(e)}function $e(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return"#"==e[1]?(e="x"==e[2]||"X"==e[2]?parseInt(e.substring(3),16):parseInt(e.substring(2),10))>=0&&e<=1114111?String.fromCodePoint(e):"":t[e]||"'"}):e||""}(o=_e.prototype).eb=null,o.Qd=null,o.add=function(e,t){Le(this),this.g=null;var n=this.eb.has(e)?this.eb.get(e):null;return n||this.eb.set(e,n=[]),n.push(t),this.Qd++,this},o.set=function(e,t){return Le(this),this.g=null,this.eb.has(e)?this.eb.set(e,[t]):this.add(e,t),this},o.get=function(e){return Le(this),this.eb.get(e)||[]},o.toString=function(){if(this.g)return this.g;if(!this.eb||!this.eb.size)return"";for(var e=[],t=m(this.eb.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=encodeURIComponent(r),r=this.eb.get(r);for(var o=0;o<r.length;o++){var i=n;""!==r[o]&&(i+="="+encodeURIComponent(r[o])),e.push(i)}}return this.g=e.join("&")},o.clone=function(){var e=new _e;if(e.g=this.g,this.eb){for(var t=new Map,n=m(this.eb),r=n.next();!r.done;r=n.next()){var o=m(r.value);r=o.next().value,o=o.next().value,t.set(r,o.concat())}e.eb=t,e.Qd=this.Qd}return e},H("shaka.util.BufferUtils",De),De.toDataView=je,De.toUint16=Be,De.toUint8=Ue,De.toArrayBuffer=Ne,De.equal=Oe,ze.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},H("shaka.util.Error",ze),ze.Severity={RECOVERABLE:1,CRITICAL:2},ze.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},ze.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007},H("shaka.util.StringUtils",Ve),Ve.resetFromCharCode=function(){Ye.g=void 0},Ve.toUTF16=Ke,Ve.toUTF8=We,Ve.fromBytesAutoDetect=qe,Ve.fromUTF16=Ge,Ve.fromUTF8=He;var Ye=new se(function(){function e(e){try{var t=new Uint8Array(e);return String.fromCharCode.apply(null,t).length>0}catch(n){return!1}}for(var t={Oc:65536};t.Oc>0;(t={Oc:t.Oc}).Oc/=2)if(e(t.Oc))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.Oc)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.Oc));return n}}(t);return null});function Je(){}function Qe(e){return e=Xe(Ue(e)),btoa(e)}function Ze(e,t){return t=null==t||t,e=Qe(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function et(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function tt(t){for(var n=t.length/2,r=new Uint8Array(n),o=0;o<n;o++)r[o]=e.parseInt(t.substr(2*o,2),16);return r}function nt(e){var t=Ue(e);e="";for(var n=(t=m(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function rt(){for(var e=N.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var o=e[r];ArrayBuffer.isView(o)&&1===o.BYTES_PER_ELEMENT?t.set(o,n):t.set(Ue(o),n),n+=o.byteLength}return t}function ot(e,t,n){if(n=void 0===n?"":n,0==t.length)return e;if(1==e.length&&1==t.length){var r=new ve(e[0]);return t=new ve(t[0]),t=r.resolve(t),n&&Se(t,n),[t.toString()]}t=t.map(function(e){return new ve(e)}),r=[];for(var o=(e=m(e)).next();!o.done;o=e.next()){o=new ve(o.value);for(var i=m(t),a=i.next();!a.done;a=i.next())a=o.resolve(a.value),n&&Se(a,n),r.push(a.toString())}return r}function it(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function at(t,n){n=void 0===n?"cenc":n;var r=[],o=[],i=[];t.forEach(function(e,t){var n=t;22!=n.length&&(n=Ze(tt(t),!1));var a=e;22!=a.length&&(a=Ze(tt(e),!1)),e={kty:"oct",kid:n,k:a},r.push(e),o.push(e.kid),i.push(t)}),t=JSON.stringify({keys:r});var a=JSON.stringify({kids:o});return a=[{initData:Ue(We(a)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:a,keyIds:new Set(i)}}function st(e,t){if(1==t.length)return t[0];if(null!=(e=lt(e,t)))return e;throw new ze(2,4,4025,t)}function lt(e,t){for(var n=pt.get(e),r=(n=m(n)).next();!r.done;r=n.next()){r=r.value;for(var o=m(t),i=o.next();!i.done;i=o.next())if(i=i.value,r.test(i.trim()))return i.trim()}return e==ct?"":null}function ut(e,t){for(var n=[],r=(e=m(e=pt.get(e))).next();!r.done;r=e.next()){r=r.value;for(var o=m(t),i=o.next();!i.done;i=o.next())i=i.value,r.test(i.trim())&&n.push(i.trim())}return n}H("shaka.util.Uint8ArrayUtils",Je),Je.concat=rt,Je.toHex=nt,Je.fromHex=tt,Je.fromBase64=et,Je.toBase64=Ze,Je.toStandardBase64=Qe;var ct="text",ft={Ca:"video",ia:"audio",Na:ct,Uf:"image",ql:"application"},dt=1/15,pt=(new Map).set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function ht(e,t,n,r){this.g=null,this.l=e,this.i=t,this.m=n,this.o=r,this.j=!1;e:{if("undefined"==typeof libDPIModule&&$("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){$("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,pe("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?($("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||$(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function mt(e,t,n,r){"video"!==r.type||e.o&&!r.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",r.id,-n,!e.o)}function gt(e){e.g&&e.i.classList.add("shaka-hidden")}function yt(e){return!(!e||"undefined"==typeof LCEVCdec)&&"lvc1"==e.codecs}function vt(t){if(wt.has(t))return wt.get(t);var n=e.ManagedMediaSource||e.MediaSource;return!!n&&(n=n.isTypeSupported(t),wt.set(t,n),n)}function bt(){var t=e.ManagedSourceBuffer||e.SourceBuffer;return!!t&&!!t.prototype&&!!t.prototype.changeType}function xt(){var t=e.ManagedMediaSource||e.MediaSource;return!!(t&&t.prototype&&t.prototype.setLiveSeekableRange&&t.prototype.clearLiveSeekableRange)}ht.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},H("shaka.lcevc.Dec",ht),ht.prototype.release=ht.prototype.release;var wt=new Map;function St(){}function Tt(){}function kt(){}function Ct(e){this.h=new Map,this.i=0,this.j=new Tt,(e=Et(e.toLowerCase()))&&(this.j=e()),this.g=new St,(e=Mt)&&(this.g=e(),this.h.set(this.i,this.g))}function At(e,t){It.set(e,t)}function Et(e){return It.get(e)}St.prototype.extract=function(){},St.prototype.decode=function(){return[]},St.prototype.clear=function(){},St.prototype.getStreams=function(){return[]},Tt.prototype.init=function(){},Tt.prototype.parse=function(){return[]},(o=kt.prototype).init=function(){},o.xf=function(){},o.Ld=function(){},o.remove=function(){},o.Vf=function(){},H("shaka.media.IClosedCaptionParser",kt),(o=Ct.prototype).init=function(e,t,n){if(t=void 0!==t&&t,-1!=(n=void 0===n?-1:n)&&this.i!=n){t=n;var r=this.h.get(t);this.h.set(this.i,this.g),r?this.g=r:((r=Mt)&&(this.g=r()),this.h.set(t,this.g))}else t||this.Ld();this.j.init(e),-1!=n&&(this.i=n)},o.xf=function(e){for(var t=(e=m(e=this.j.parse(e))).next();!t.done;t=e.next()){var n=Ue((t=t.value).packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},o.Ld=function(){this.g.clear()},o.remove=function(e){e=void 0===e?[]:e,e=new Set(e);for(var t=m(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var r=this.h.get(n);r&&r.clear(),this.h.delete(n)}},o.Vf=function(){return this.g.getStreams()},H("shaka.media.ClosedCaptionParser",Ct),Ct.findDecoder=function(){return Mt},Ct.unregisterDecoder=function(){Mt=null},Ct.registerDecoder=function(e){Mt=e},Ct.findParser=Et,Ct.unregisterParser=function(e){It.delete(e)},Ct.registerParser=At;var It=new Map,Mt=null;function Rt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=_t,this.scroll=Lt}H("shaka.text.CueRegion",Rt);var _t=1;Rt.units={PX:0,PERCENTAGE:_t,LINES:2};var Lt="";function Pt(e){this.h=e||"",this.g=0}function Dt(e){Ot(e,/[ \t]+/gm)}function Ot(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Nt(e){return e.g==e.h.length?null:(e=Ot(e,/[^ \t\n]*/gm))?e[0]:null}function Ut(e){if(null==(e=Ot(e,jt)))return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Bt(e){return e?Ut(new Pt(e)):null}Rt.scrollMode={NONE:Lt,UP:"up"};var jt=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Ft(){}function zt(e){var t=new WeakSet;return function e(n){switch(x(n)){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||ArrayBuffer.isView(n))return n;if(t.has(n))return null;var r=Array.isArray(n);if(n.constructor!=Object&&!r)return null;t.add(n);var o,i=r?[]:{};for(o in n)i[o]=e(n[o]);return r&&(i.length=n.length),i}}(e)}function Vt(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ht(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=n.toString(),o=e[n];void 0!==o&&(o=Ht(o))&&t.push(r+":"+o)}e="["+t.join(",")+"]"}else if("function"==typeof e)e="";else if(e instanceof Object){for((n=Object.keys(e)).sort(),t=[],r=(n=m(n)).next();!r.done;r=n.next())o=r.value,r=JSON.stringify(o),void 0!==(o=e[o])&&(o=Ht(o))&&t.push(r+":"+o);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}
/*
      		 @license
      		 tXml
      		 Copyright 2015 Tobias Nickel
      		 SPDX-License-Identifier: MIT
      		*/
function Gt(e,t){var n=void 0!==n&&n;return qt(e=qe(e),t,n)}function qt(e,t,n){return e=function(e,t){function n(i,a){a=void 0!==a&&a;for(var s=[];e[o];)if(60==e.charCodeAt(o)){if(47===e.charCodeAt(o+1)){a=o+2,o=e.indexOf(">",o);var l=(a=e.substring(a,o)).indexOf(i);if(-1==l){var u=i.indexOf(".");u>0&&(l=a.indexOf(i.substring(0,u)))}if(-1==l)throw i=e.substring(0,o).split("\n"),Error("Unexpected close tag\nLine: "+(i.length-1)+"\nColumn: "+(i[i.length-1].length+1)+"\nChar: "+e[o]);o+1&&(o+=1);break}if(33===e.charCodeAt(o+1)){if(45==e.charCodeAt(o+2)){for(;-1!==o&&(62!==e.charCodeAt(o)||45!=e.charCodeAt(o-1)||45!=e.charCodeAt(o-2)||-1==o);)o=e.indexOf(">",o+1);-1===o&&(o=e.length)}else if(91===e.charCodeAt(o+2)&&91===e.charCodeAt(o+8)&&"cdata"===e.substr(o+3,5).toLowerCase()){-1==(l=e.indexOf("]]>",o))?(s.push(e.substr(o+9)),o=e.length):(s.push(e.substring(o+9,l)),o=l+3);continue}o++;continue}e:{u=a,o++;var c=r(),f={};for(l=[];62!==e.charCodeAt(o)&&e[o];){var d=e.charCodeAt(o);if(d>64&&d<91||d>96&&d<123){d=r();for(var p=e.charCodeAt(o);p&&39!==p&&34!==p&&!(p>64&&p<91||p>96&&p<123)&&62!==p;)o++,p=e.charCodeAt(o);var h=o+1;if(o=e.indexOf(e[o],h),h=e.slice(h,o),39===p||34===p){if(-1===o){if(u={tagName:c,attributes:f,children:l,parent:null},t)for(c=0;c<l.length;c++)"string"!=typeof l[c]&&(l[c].parent=u);l=u;break e}}else h=null,o--;if(d.startsWith("xmlns:")){p=h;var m=d.split(":")[1];wn.set(p,m),Sn.set(m,p)}"tt"===c&&"xml:space"===d&&"preserve"===h&&(u=!0),f[d]=h}o++}for(47!==e.charCodeAt(o-1)?(o++,l=n(c,u)):o++,u={tagName:c,attributes:f,children:l,parent:null},c=l.length,f=0;f<c;f++)"string"!=typeof(d=l[f])?t&&(d.parent=u):f==c-1&&"\n"==d&&l.pop();l=u}if(s.push(l),"string"==typeof l)break;"?"===l.tagName[0]&&l.children&&(s.push.apply(s,g(l.children)),l.children=[])}else l=o,-2==(o=e.indexOf("<",o)-1)&&(o=e.length),l=e.slice(l,o+1),a?l.length>0&&s.push(l):(s.length&&1==l.length&&"\n"==l[0]||l.trim().length>0)&&s.push(l),o++;return s}function r(){for(var t=o;-1==="\r\n\t>/= ".indexOf(e[o])&&e[o];)o++;return e.slice(t,o)}var o=0;return n("")}(e,void 0!==n&&n),!t&&e.length?e[0]:(e=e.find(function(e){return t.split(",").includes(e.tagName)}))?e:null}function Wt(e){return wn.has(e)?wn.get(e):""}function Kt(e){return"string"==typeof e}function Xt(e){var t=[];if(!e.children)return[];for(var n=(e=m(e.children)).next();!n.done;n=e.next())"string"!=typeof(n=n.value)&&t.push(n);return t}function $t(e,t){var n=[];if(!e.children)return[];for(var r=(e=m(e.children)).next();!r.done;r=e.next())(r=r.value).tagName===t&&n.push(r);return n}function Yt(e){return"string"==typeof e?$e(e):""===(e=e.children.reduce(function(e,t){return"string"==typeof t?e+t:e},""))?null:$e(e)}function Jt(e){return Array.from(e.children).every(function(e){return"string"==typeof e})?((e=Yt(e))&&(e=e.trim()),e):null}function Qt(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children)for(var r=(e=m(e.children)).next();!r.done;r=e.next())Qt(r.value,t,n);return n}function Zt(e,t){return 1!=(e=$t(e,t)).length?null:e[0]}function en(e,t,n){return 1!=(e=rn(e,t,n)).length?null:e[0]}function tn(e,t,n,r){r=void 0===r?null:r;var o=null;return null!=(e=e.attributes[t])&&(o=n(e)),null==o?r:o}function nn(e,t,n){return t=Wt(t),e.attributes[t+":"+n]||null}function rn(e,t,n){var r=Wt(t);if(t=[],e.children)for(n=r?r+":"+n:n,r=(e=m(e.children)).next();!r.done;r=e.next())(r=r.value)&&r.tagName===n&&t.push(r);return t}function on(e,t,n){for(var r=(t=m(t)).next();!r.done;r=t.next())if(r=nn(e,r.value,n))return r;return null}function an(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function sn(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function ln(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function un(e){return(e=Number(e))%1==0?e:null}function cn(e){return(e=Number(e))%1==0&&e>0?e:null}function fn(e){return(e=Number(e))%1==0&&e>=0?e:null}function dn(e){return e=Number(e),isNaN(e)?null:e}function pn(e){return!!e&&"true"===e.toLowerCase()}function hn(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function mn(e){for(var t=[],n=(e=m(e=$e(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))).next();!n.done;n=e.next()){var r=(n=n.value).match(/^([\w]+)/);if(r){var o=n.match(/(@id='(.*?)')/),i=n.match(/(@t='(\d+)')/),a=n.match(/(@n='(\d+)')/),s=n.match(/\[(\d+)\]/);t.push({name:r[0],id:o?o[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:i?Number(i[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:s?Number(s[1])-1:null,Cc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Cc=n.slice(1))}return t}function gn(e,t){var n=mn(t.attributes.sel||"");if(n.length){var r=n[n.length-1],o=t.attributes.pos||null;null==(n=r.position)&&(null!==r.t&&(n=yn(e,"t",r.t)),null!==r.n&&(n=yn(e,"n",r.n))),null===n?n="prepend"===o?0:e.length:"prepend"===o?--n:"after"===o&&++n,o=t.tagName,(r=r.Cc)&&e[n]?vn(e[n],o,r,Jt(t)||""):("remove"!==o&&"replace"!==o||e.splice(n,1),"add"!==o&&"replace"!==o||e.splice.apply(e,[n,0].concat(g(t.children))))}}function yn(e,t,n){for(var r=0,o=(e=m(e)).next();!o.done;o=e.next()){if(Number(o.value.attributes[t])===n)return r;r++}return null}function vn(e,t,n,r){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=r)}function bn(e){var t="",n=e.tagName.split(":");for(var r in n.length>0&&(t=n[0],t=Sn.has(t)?Sn.get(t):""),t=document.createElementNS(t,e.tagName),e.attributes)t.setAttribute(r,e.attributes[r]);for(r=(e=m(e.children)).next();!r.done;r=e.next())n=void 0,n="string"==typeof(r=r.value)?new Text(r):bn(r),t.appendChild(n);return t}function xn(e){if(!e)return null;for(var t={tagName:e.tagName,attributes:Vt(e.attributes),children:[],parent:null},n=(e=m(e.children)).next();!n.done;n=e.next())"string"==typeof(n=n.value)||((n=xn(n)).parent=t),t.children.push(n);return t}H("shaka.util.ObjectUtils",Ft),Ft.alphabeticalKeyOrderStringify=Ht,Ft.shallowCloneObject=Vt,Ft.cloneObject=zt;var wn=new Map,Sn=new Map;function Tn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Rt,this.position=null,this.positionAlign=Rn,this.size=0,this.textAlign=_n,this.direction=On,this.writingMode=Nn,this.lineInterpretation=Un,this.line=null,this.lineHeight="",this.lineAlign=Bn,this.displayAlign=Pn,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Vn,this.fontStyle=Gn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function kn(e,t){return(e=new Tn(e,t,"")).lineBreak=!0,e}function Cn(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!ne(e.nestedCues,t.nestedCues,Cn))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!ne(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function An(e,t){t=void 0===t?new Map:t;var n=e.payload;if(n.includes("<")){0===t.size&&En(t);var r=n;n=[];for(var o=-1,i=0;i<r.length;i++)"<"===r[i]?o=i+1:">"===r[i]&&o>0&&((o=r.substr(o,i-o)).match(Xn)&&n.push(o),o=-1);for(i=(n=m(n)).next();!i.done;i=n.next())i=i.value,r=r.replace("<"+i+">",'<div time="'+i+'">'),r+="</div>";e:{i=r,o=[];var a=-1;n="",r=!1;for(var s=0;s<i.length;s++)if("/"===i[s]){var l=i.indexOf(">",s);if(-1===l){n=i;break e}if((l=i.substring(s+1,l))&&"v"==l){r=!0;var u=null;if(o.length&&(u=o[o.length-1]),u){if(u===l)n+="/"+l+">";else{if(!u.startsWith("v")){n+=i[s];continue}n+="/"+u+">"}s+=l.length+1}else n+=i[s]}else n+=i[s]}else"<"===i[s]?"v"!=i[a=s+1]&&(a=-1):">"===i[s]&&a>0&&(o.push(i.substr(a,s-a)),a=-1),n+=i[s];for(o=(i=m(o)).next();!o.done;o=i.next())a=(o=o.value).replace(" ",".voice-"),n=(n=n.replace("<"+o+">","<"+a+">")).replace("</"+o+">","</"+a+">"),r||(n+="</"+a+">")}n=function(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return t[e]||""}):e||""}(n),e.payload="";try{var c=qt("<span>"+n+"</span>","span")}catch(T){}if(c)if(1!=(c=c.children).length||c[0].tagName)for(n=(c=m(c)).next();!n.done;n=c.next())In(n.value,e,t);else e.payload=$e(n);else e.payload=$e(n)}else e.payload=$e(n)}function En(e){for(var t=m(Object.entries(Fn)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var o=new Tn(0,0,"");o.color=r,e.set("."+n,o)}for(n=(t=m(Object.entries(zn))).next();!n.done;n=t.next())n=(r=m(n.value)).next().value,r=r.next().value,(o=new Tn(0,0,"")).backgroundColor=r,e.set("."+n,o)}function In(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Rt,r.position=null,r.size=0,r.textAlign=_n,e.tagName)for(var o=m(e.tagName.split(/(?=[ .])+/g)),i=o.next();!i.done;i=o.next()){var a=i=i.value;if(a.startsWith(".voice-")){var s=a.split("-").pop();a='v[voice="'+s+'"]',n.has(a)||(a="v[voice="+s+"]")}switch(n.has(a)&&(s=r,a=n.get(a))&&(s.backgroundColor=Mn(a.backgroundColor,s.backgroundColor),s.color=Mn(a.color,s.color),s.fontFamily=Mn(a.fontFamily,s.fontFamily),s.fontSize=Mn(a.fontSize,s.fontSize),s.textShadow=Mn(a.textShadow,s.textShadow),s.fontWeight=a.fontWeight,s.fontStyle=a.fontStyle,s.opacity=a.opacity,s.rubyTag=a.rubyTag,s.textCombineUpright=a.textCombineUpright,s.wrapLine=a.wrapLine),i){case"br":return r=kn(r.startTime,r.endTime),void t.nestedCues.push(r);case"b":r.fontWeight=Hn;break;case"i":r.fontStyle=qn;break;case"u":r.textDecoration.push(Kn);break;case"font":(i=e.attributes.color)&&(r.color=i);break;case"div":if(!(i=e.attributes.time))break;(i=Bt(i))&&(r.startTime=i);break;case"ruby":case"rp":case"rt":r.rubyTag=i}}if(o=e.children,Kt(e)||1==o.length&&Kt(o[0]))for(n=Yt(e).split("\n"),e=!0,o=(n=m(n)).next();!o.done;o=n.next())o=o.value,e||(e=kn(r.startTime,r.endTime),t.nestedCues.push(e)),o.length>0&&((e=r.clone()).payload=$e(o),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),e=(t=m(o)).next();!e.done;e=t.next())In(e.value,r,n)}function Mn(e,t){return e&&e.length>0?e:t}Tn.prototype.clone=function(){var e,t=new Tn(0,0,"");for(e in this)t[e]=this[e],Array.isArray(t[e])&&(t[e]=t[e].slice());return t},H("shaka.text.Cue",Tn),Tn.parseCuePayload=An,Tn.equal=Cn,Tn.prototype.clone=Tn.prototype.clone;var Rn="auto";Tn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Rn};var _n="center",Ln={LEFT:"left",RIGHT:"right",CENTER:_n,START:"start",END:"end"};Tn.textAlign=Ln;var Pn="after",Dn={BEFORE:"before",CENTER:"center",AFTER:Pn};Tn.displayAlign=Dn;var On="ltr";Tn.direction={HORIZONTAL_LEFT_TO_RIGHT:On,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Nn="horizontal-tb";Tn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Nn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Un=0;Tn.lineInterpretation={LINE_NUMBER:Un,PERCENTAGE:1};var Bn="start",jn={CENTER:"center",START:Bn,END:"end"};Tn.lineAlign=jn;var Fn={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Tn.defaultTextColor=Fn;var zn={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Tn.defaultTextBackgroundColor=zn;var Vn=400,Hn=700;Tn.fontWeight={NORMAL:Vn,BOLD:Hn};var Gn="normal",qn="italic",Wn={NORMAL:Gn,ITALIC:qn,OBLIQUE:"oblique"};Tn.fontStyle=Wn;var Kn="underline";Tn.textDecoration={UNDERLINE:Kn,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Xn=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function $n(){}function Yn(e,t,n){Qn.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,yf:t})}function Jn(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([nr,tr,er,Zn]),o=r.next();!o.done;o=r.next())if(o=Qn.get(n+"-"+o.value)){var i=o.yf(),a=i.isSupported(e,t);if(i.destroy(),a)return o.yf}return null}$n.prototype.destroy=function(){},H("shaka.transmuxer.TransmuxerEngine",$n),$n.findTransmuxer=Jn,$n.unregisterTransmuxer=function(e,t){Qn.delete(e.toLowerCase().split(";")[0]+"-"+t)},$n.registerTransmuxer=Yn,$n.prototype.destroy=$n.prototype.destroy;var Qn=new Map,Zn=1,er=2,tr=3,nr=4;function rr(){}function or(e,t){var n=e;return t&&!hr.includes(e)&&(n+='; codecs="'+t+'"'),n}function ir(e,t){return t&&(e+='; codecs="'+t+'"'),e}function ar(e,t,n){var r=or(e,t);return Jn(t=ir(e,t))?(e=Jn(t))?(n=(e=e()).convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?r.replace("video","audio"):r,n}function sr(e){return e.split(";")[0].split("/")[1]}function lr(e){var t=pr(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:case"ac3"===e:case"ac-3"===e:return"ac-3";case"mp4a"===e&&"a6"===t:case"eac3"===e:case"ec-3"===e:return"ec-3";case"ac-4"===e:return"ac-4";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"vp09"===e:case"vp9"===e:return"vp9";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"vvc1"===e:case"vvi1"===e:return"vvc";case"dvh1"===e:case"dvhe"===e:return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1";case"dvc1"===e:case"dvi1"===e:return"dovi-vvc"}return e}function ur(e){for(var t=[],n=(e=m(e.split(","))).next();!n.done;n=e.next())n=pr(n.value),t.push(n[0]);return t.sort().join(",")}function cr(e){return e.split(";")[0]}function fr(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function dr(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function pr(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}$n.PluginPriority={FALLBACK:Zn,PREFERRED_SECONDARY:er,PREFERRED:tr,APPLICATION:nr},H("shaka.util.MimeUtils",rr),rr.getFullTypeWithAllCodecs=ir,rr.getFullType=or,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var hr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function mr(e){this.i=null,this.j=e,this.C=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.F="",this.B=function(){},this.o=new Map}function gr(e,t){wr.set(e,t)}function yr(e){return wr.get(e)}function vr(e){return!!wr.has(e)||("application/cea-608"==e||"application/cea-708"==e)&&!!Mt}function br(e,t,n){if(e.F=t,t=e.o.get(t))for(var r=m(t.keys()),o=r.next();!o.done;o=r.next())(o=t.get(o.value).filter(function(e){return e.endTime<=n}))&&e.j.append(o)}function xr(e,t,n){t.startTime+=n,t.endTime+=n;for(var r=(t=m(t.nestedCues)).next();!r.done;r=t.next())xr(e,r.value,n)}mr.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},mr.prototype.remove=function(e,t){var n=this;return O(function(r){if(1==r.g)return S(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),k(r)})},H("shaka.text.TextEngine",mr),mr.prototype.destroy=mr.prototype.destroy,mr.findParser=yr,mr.unregisterParser=function(e){wr.delete(e)},mr.registerParser=gr;var wr=new Map;function Sr(e){this.h=e,this.g=null}function Tr(e){this.h=e,this.g=null}function kr(e,t){return e.concat(t)}function Cr(){}function Ar(e){return null!=e}function Er(e,t){return Promise.race([t,new Promise(function(t,n){new Tr(n).ka(e)})])}function Ir(){}function Mr(e,t){return e=Lr(e),t=Lr(t),e.split("-")[0]==t.split("-")[0]}function Rr(e,t){return e=Lr(e),t=Lr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function _r(e,t){return e=Lr(e),t=Lr(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function Lr(e){var t=(e=m(e.split("-x-"))).next().value;t=void 0===t?"":t,e=void 0===(e=e.next().value)?"":e;var n=m(t.split("-"));return t=void 0===(t=n.next().value)?"":t,n=void 0===(n=n.next().value)?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Ur.get(t)||t,((n=n.toUpperCase())?t+"-"+n:t)+(e?"-"+e:"")}function Pr(e,t){return e=Lr(e),(t=Lr(t))==e?4:Rr(t,e)?3:_r(t,e)?2:Rr(e,t)?1:0}function Dr(e){var t=e.indexOf("-");return e=(e=t>=0?e.substring(0,t):e).toLowerCase(),Ur.get(e)||e}function Or(e){return e.language?Lr(e.language):e.audio&&e.audio.language?Lr(e.audio.language):e.video&&e.video.language?Lr(e.video.language):"und"}function Nr(e,t){e=Lr(e);for(var n=new Set,r=(t=m(t)).next();!r.done;r=t.next())n.add(Lr(r.value));for(r=(t=m(n)).next();!r.done;r=t.next())if((r=r.value)==e)return r;for(r=(t=m(n)).next();!r.done;r=t.next())if(Rr(r=r.value,e))return r;for(r=(t=m(n)).next();!r.done;r=t.next())if(_r(r=r.value,e))return r;for(t=(n=m(n)).next();!t.done;t=n.next())if(Rr(e,t=t.value))return t;return null}Sr.prototype.ka=function(t){var n=this;this.stop();var r=!0,o=null;return this.g=function(){e.clearTimeout(o),r=!1},o=e.setTimeout(function(){r&&n.h()},1e3*t),this},Sr.prototype.stop=function(){this.g&&(this.g(),this.g=null)},Tr.prototype.Kb=function(){return this.stop(),this.h(),this},Tr.prototype.ka=function(e){var t=this;return this.stop(),this.g=new Sr(function(){t.h()}).ka(e),this},Tr.prototype.Fa=function(e){var t=this;return this.stop(),this.g=new Sr(function(){t.g.ka(e),t.h()}).ka(e),this},Tr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},H("shaka.util.Timer",Tr),Tr.prototype.stop=Tr.prototype.stop,Tr.prototype.tickEvery=Tr.prototype.Fa,Tr.prototype.tickAfter=Tr.prototype.ka,Tr.prototype.tickNow=Tr.prototype.Kb,H("shaka.util.LanguageUtils",Ir),Ir.findClosestLocale=Nr,Ir.getLocaleForVariant=Or,Ir.getLocaleForText=function(e){return Lr(e.language||"und")},Ir.getBase=Dr,Ir.relatedness=Pr,Ir.areSiblings=function(e,t){var n=Dr(e),r=Dr(t);return e!=n&&t!=r&&n==r},Ir.normalize=Lr,Ir.isSiblingOf=_r,Ir.isParentOf=Rr,Ir.areLanguageCompatible=Mr,Ir.areLocaleCompatible=function(e,t){return(e=Lr(e))==(t=Lr(t))};var Ur=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Br(){}function jr(e,t,n,r,o){function i(e){var t=String(e.width||"")+String(e.height||"")+String(Math.round(e.frameRate||0))+(e.hdr||"")+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),e.roles&&(t+=e.roles.sort().join("_")),t}function a(e){var t=e.language+(e.channelsCount||0)+(e.audioSamplingRate||0)+e.roles.join(",")+e.label+e.groupId+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),t}if(o.length){for(var s=e.textStreams,l=(o=m(o)).next(),u={};!l.done;u={Ch:void 0},l=o.next())if(u.Ch=l.value,(l=s.filter(function(e){return function(t){return!(!t.codecs.startsWith(e.Ch)&&!t.mimeType.startsWith(e.Ch))}}(u))).length){s=l;break}e.textStreams=s}if(s=e.variants,(t.length||n.length)&&(s=function(e,t,n){for(var r=(t=m(t)).next(),o={};!r.done;o={videoCodec:void 0},r=t.next())if(o.videoCodec=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.videoCodec)}}(o)),r.length){e=r;break}for(n=m(n),t=n.next(),r={};!t.done;r={audioCodec:void 0},t=n.next())if(r.audioCodec=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.audioCodec)}}(r)),t.length){e=t;break}return e}(s,t,n)),r.length){for(t=new re,s=(n=m(s)).next();!s.done;s=n.next())s=s.value,t.push(String(s.video.width||0),s);var c=[];t.forEach(function(e,t){e=0;for(var n=[],o=(t=m(t)).next(),i={};!o.done;i={Tf:void 0},o=t.next())i.Tf=o.value,o=r.filter(function(e){return function(t){return e.Tf.decodingInfos[0][t]}}(i)).length,o>e?(e=o,n=[i.Tf]):o==e&&n.push(i.Tf);c.push.apply(c,g(n))}),s=c}for(n=new Set,t=new Set,o=(s=m(s)).next();!o.done;o=s.next())(o=o.value).audio&&n.add(o.audio),o.video&&t.add(o.video);s=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var f=[];for(n=new Map,o=(s=m(s)).next();!o.done;o=s.next()){if(l=a(o=o.value),(u=n.get(l)||[]).length){var d=u[u.length-1],p=lr(d.codecs),h=lr(o.codecs);p!=h||o.bandwidth&&d.bandwidth&&!(o.bandwidth>d.bandwidth)||(u.push(o),f.push(o.id))}else u.push(o),f.push(o.id);n.set(l,u)}var y={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};s=Array.from(t).sort(function(e,t){if(!e.bandwidth||!t.bandwidth||e.bandwidth==t.bandwidth){if(e.codecs&&t.codecs&&e.codecs!=t.codecs&&e.width==t.width){var n=lr(e.codecs),r=lr(t.codecs);if(n!=r)return(y[n]||1)-(y[r]||1)}return e.width-t.width}return e.bandwidth-t.bandwidth}),t=bt();var v=[];for(n=new Map,o=(s=m(s)).next();!o.done;o=s.next()){if(l=i(o=o.value),(u=n.get(l)||[]).length){if(d=u[u.length-1],!t&&(p=lr(d.codecs))!==(h=lr(o.codecs)))continue;(p=lr(d.codecs))!=(h=lr(o.codecs))||o.bandwidth&&d.bandwidth&&!(o.bandwidth>d.bandwidth)||(u.push(o),v.push(o.id))}else u.push(o),v.push(o.id);n.set(l,u)}e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,!(t&&!f.includes(t.id)||e&&!v.includes(e.id))})}function Fr(e,t,n){function r(e,t,n){return e>=t&&e<=n}var o=e.video;if(o&&o.width&&o.height){var i=o.width,a=o.height;if(a>i&&(i=(a=m([a,i])).next().value,a=a.next().value),!r(i,t.minWidth,Math.min(t.maxWidth,n.width))||!r(a,t.minHeight,Math.min(t.maxHeight,n.height))||!r(o.width*o.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function zr(e,t,n,r){return n=void 0===n?[]:n,r=void 0===r?{}:r,O(function(o){return 1==o.g?S(o,Vr(e,t,t.offlineSessionIds.length>0,n,r),2):(function(e){e.textStreams=e.textStreams.filter(function(e){return vr(e=or(e.mimeType,e.codecs))})}(t),S(o,function(e){var t,n,r,o,i,a,s;return O(function(l){switch(l.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){l.A(4);break}if(o=r.value,"application/mp4"==(i=o.mimeType)&&"mjpg"==o.codecs&&(i="image/jpg"),po.has(i)){l.A(5);break}if(!(a=ho.get(i))){po.set(i,!1),l.A(5);break}return S(l,function(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}(a),7);case 7:s=l.h,po.set(i,s);case 5:po.get(i)&&t.push(o),r=n.next(),l.A(2);break;case 4:e.imageStreams=t,k(l)}})}(t),0))})}function Vr(e,t,n,r,o){var i,a;return O(function(s){if(1==s.g)return le().Ui()&&function(e){for(var t=(new Map).set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set,r=(e=m(e)).next();!r.done;r=e.next())(r=r.value).video&&n.add(r.video);for(n=m(n),e=n.next();!e.done;e=n.next()){e=e.value;for(var o=(r=m(t)).next();!o.done;o=r.next()){var i=m(o.value);if(o=i.next().value,i=i.next().value,e.codecs.includes(o)){e.codecs=e.codecs.replace(o,i);break}}}}(t.variants),S(s,qr(t.variants,n,!1,r),2);i=null,e&&(a=e.g)&&(i=a.keySystem),t.variants=t.variants.filter(function(e){var t=function(e,t,n){if(!e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&(n[e.keySystem]||e.keySystem)!=t)}))return!1;var r=le(),o="Xbox"===r.Ob();r="MOBILE"===r.Oa()&&"GECKO"===r.Ea();var i=e.video,a=i&&i.width||0,s=i&&i.height||0;return!(o&&i&&(a>1920||s>1080)&&(i.codecs.includes("avc1.")||i.codecs.includes("avc3."))||(o=i&&i.dependencyStream)&&!yt(o)||(e=e.audio,r&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}(e,i,o);if(!t){var n=[];e.audio&&n.push(so(e.audio)),e.video&&n.push(so(e.video))}return t}),k(s)})}function Hr(e,t){var n,r,o,i,a,s,l;return O(function(u){if(1==u.g){for(n=function(e,t){if(e){var n=Vt(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},r=null,o=[],i=m(t),a=i.next(),s={};!a.done;s={cache:void 0,Oe:void 0},a=i.next())l=a.value,s.Oe=Ht(l),s.cache=co,s.cache.has(s.Oe)?r=n(r,s.cache.get(s.Oe)):o.push(Gr(l).then(function(e){return function(t){for(var o=null,i=(t=m(t||[])).next();!i.done;i=t.next())o=n(o,i.value);o&&(e.cache.set(e.Oe,o),r=n(r,o))}}(s)));return S(u,Promise.all(o),2)}r&&e.decodingInfos.push(r),k(u)})}function Gr(e){var t=[""];e.video&&(t=fr(e.video.contentType).split(","));var n=[""];e.audio&&(n=fr(e.audio.contentType).split(","));for(var r=[],o=(t=m(t)).next();!o.done;o=t.next()){o=o.value;for(var i=m(n),a=i.next(),s={};!a.done;s={Qc:void 0},a=i.next())a=a.value,s.Qc=zt(e),e.video&&(s.Qc.video.contentType=or(cr(s.Qc.video.contentType),o)),e.audio&&(s.Qc.audio.contentType=or(cr(s.Qc.audio.contentType),a)),r.push(new Promise(function(e){return function(t,n){("MOBILE"==le().Oa()?Er(5,navigator.mediaCapabilities.decodingInfo(e.Qc)):navigator.mediaCapabilities.decodingInfo(e.Qc)).then(function(e){t(e)}).catch(n)}}(s)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function qr(e,t,n,r){var o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w,T;return O(function(k){switch(k.g){case 1:if(e.some(function(e){return e.decodingInfos.length}))return k.return();o=m(r),i=o.next(),a={};case 2:if(i.done){k.A(4);break}a.Ci=i.value,s=!1,l=m(e),u=l.next();case 5:if(u.done){k.A(7);break}c=u.value,f=Wr(c,t,n).filter((C=a,function(e){return((e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)===C.Ci})),d=m(f),p=d.next();case 8:if(p.done){k.A(10);break}return h=p.value,S(k,Hr(c,h),9);case 9:p=d.next(),k.A(8);break;case 10:c.decodingInfos.some(function(e){return e.supported})&&(s=!0),u=l.next(),k.A(5);break;case 7:if(s)return k.return();a={Ci:void 0},i=o.next(),k.A(2);break;case 4:g=m(e),y=g.next();case 12:if(y.done){k.A(0);break}v=y.value,b=Wr(v,t,n).filter(function(e){return!(e=(e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!r.includes(e)}),x=m(b),w=x.next();case 15:if(w.done){y=g.next(),k.A(12);break}return T=w.value,S(k,Hr(v,T),16);case 16:w=x.next(),k.A(15)}var C})}function Wr(e,t,n){var r=e.audio,o=e.video,i=[],a=[];if(o)for(var s=m(o.fullMimeTypes),l=s.next();!l.done;l=s.next()){var u=fr(l=l.value);if(u.includes(",")&&!r){var c=u.split(","),f=cr(l);u=st("video",c),f=ar(f,c=Kr(c=st("audio",c),f),"audio"),a.push({contentType:f,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(u=Xr(u),l={contentType:ar(cr(l),u,"video"),width:o.width||64,height:o.height||64,bitrate:o.bandwidth||e.bandwidth||1,framerate:o.frameRate||30},o.hdr)switch(o.hdr){case"PQ":l.transferFunction="pq";break;case"HLG":l.transferFunction="hlg"}o.colorGamut&&(l.colorGamut=o.colorGamut),i.push(l)}if(r)for(l=(s=m(r.fullMimeTypes)).next();!l.done;l=s.next())l=ar(l=cr(u=l.value),u=Kr(fr(u),l),"audio"),a.push({contentType:l,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(s=[],0==i.length&&i.push(null),0==a.length&&a.push(null),l=(i=m(i)).next();!l.done;l=i.next())for(l=l.value,f=(u=m(a)).next();!f.done;f=u.next())f=f.value,c={type:n?"file":"media-source"},l&&(c.video=l),f&&(c.audio=f),s.push(c);if(!(a=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[s];for(e=[],n=new Map,i=(a=m(a)).next();!i.done;i=a.next())i=i.value,n.get(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i);for(a=t?"required":"optional",t=t?["persistent-license"]:["temporary"],l=(i=m(n.keys())).next();!l.done;l=i.next()){for(l=l.value,f=n.get(l),u=new Map,c=(f=m(f)).next();!c.done;c=f.next()){var d=(c=c.value).videoRobustness+","+c.audioRobustness;u.get(d)||u.set(d,[]),u.get(d).push(c)}for(f=(u=m(u.values())).next();!f.done;f=u.next()){f=f.value,c=[];for(var p=(d=m(s)).next();!p.done;p=d.next()){p=Object.assign({},p.value);for(var h={keySystem:l,initDataType:"cenc",persistentState:a,distinctiveIdentifier:"optional",sessionTypes:t},g=m(f),y=g.next();!y.done;y=g.next()){if((y=y.value).initData&&y.initData.length){for(var v=new Set,b=m(y.initData),x=b.next();!x.done;x=b.next())v.add(x.value.initDataType);h.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(h.distinctiveIdentifier="required"),y.persistentStateRequired&&(h.persistentState="required"),y.sessionType&&(h.sessionTypes=[y.sessionType]),r&&(h.audio?(y.encryptionScheme&&(h.audio.encryptionScheme=h.audio.encryptionScheme||y.encryptionScheme),h.audio.robustness=h.audio.robustness||y.audioRobustness):(h.audio={robustness:y.audioRobustness},y.encryptionScheme&&(h.audio.encryptionScheme=y.encryptionScheme)),""==h.audio.robustness&&delete h.audio.robustness),o&&(h.video?(y.encryptionScheme&&(h.video.encryptionScheme=h.video.encryptionScheme||y.encryptionScheme),h.video.robustness=h.video.robustness||y.videoRobustness):(h.video={robustness:y.videoRobustness},y.encryptionScheme&&(h.video.encryptionScheme=y.encryptionScheme)),""==h.video.robustness&&delete h.video.robustness)}p.keySystemConfiguration=h,c.push(p)}e.push(c)}}return e}function Kr(e,t){var n=le();return"flac"==e.toLowerCase()?"WEBKIT"!=n.Ea()?"flac":"fLaC":"opus"===e.toLowerCase()?"WEBKIT"!=n.Ea()?"opus":"mp4"==sr(t)?"Opus":"opus":"ac-3"==e.toLowerCase()&&n.le()?"ec-3":e}function Xr(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function $r(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,o=n?n.mimeType:null,i=t?t.codecs:null,a=n?n.codecs:null,s=t?t.groupId:null,l=[];n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null;var u=[];t&&u.push(t.kind),n&&u.push(n.kind),u=u[0]||null;var c=new Set;if(t)for(var f=m(t.roles),d=f.next();!d.done;d=f.next())c.add(d.value);if(n)for(d=(f=m(n.roles)).next();!d.done;d=f.next())c.add(d.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:u,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:l,audioMimeType:r,videoMimeType:o,codecs:"",audioCodec:i,videoCodec:a,primary:e.primary,roles:Array.from(c),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(r=n.dependencyStream)&&(e.width=r.width||e.width,e.height=r.height||e.height,e.videoCodec=r.codecs||e.videoCodec,e.videoBandwidth&&r.bandwidth&&(e.videoBandwidth+=r.bandwidth)),a.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=o,n=a.split(",");try{e.videoCodec=st("video",n),e.audioCodec=st("audio",n)}catch(p){}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec,e.audioBandwidth&&t.bandwidth&&(e.audioBandwidth+=t.bandwidth)),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Yr(e){return{id:e.id,active:!1,type:ct,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function Jr(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=Dl(e.segmentIndex));var o=e.tilesLayout;return r&&(o=r.tilesLayout||o),o&&null!=t&&(t/=Number(o.split("x")[0])),o&&null!=n&&(n/=Number(o.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:o||null,originalImageId:e.originalId}}function Qr(e){return e.__shaka_id||(e.__shaka_id=fo++),e.__shaka_id}function Zr(e){var t={id:Qr(e),active:"disabled"!=e.mode,type:ct,bandwidth:0,language:Lr(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:"forced"==e.kind,originalTextId:e.id,originalLanguage:e.language};return"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function eo(e,t){var n=e?e.language:null;if(n={id:Qr(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Lr(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!!e&&"main"==e.kind,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+","+n.videoCodec:n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function to(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function no(e){return e.filter(function(e){return to(e)})}function ro(e,t,n,r){var o=e,i=e.filter(function(e){return e.primary});i.length&&(o=i);var a=o.length?o[0].language:"";if(o=o.filter(function(e){return e.language==a}),t){var s=Nr(Lr(t),e.map(function(e){return e.language}));s&&(o=e.filter(function(e){return Lr(e.language)==s}))}if(o=o.filter(function(e){return e.forced==r}),n){if((e=oo(o,n)).length)return e}else if(e=o.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=o.map(function(e){return e.roles}).reduce(kr,[]),e.length?oo(o,e[0]):o}function oo(e,t){return e.filter(function(e){return e.roles.includes(t)})}function io(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function ao(e,t){t.length&&(t=t.filter(function(t){return lr(e.codecs)==lr(t.codecs)}).sort(function(e,t){return e.bandwidth&&t.bandwidth&&e.bandwidth!=t.bandwidth?e.bandwidth-t.bandwidth:(e.width||0)-(t.width||0)}),e.trickModeVideo=t[0],t.length>1&&(t=t.find(function(t){return e.width==t.width&&e.height==t.height})))&&(e.trickModeVideo=t)}function so(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function lo(e,t,n){if(0==n.autoShowText)return!1;if(1==n.autoShowText)return!0;var r=Lr(n.preferredTextLanguage);return t=Lr(t.language),2==n.autoShowText?Mr(t,r):3==n.autoShowText?!!e&&(e=Lr(e.language),Mr(t,r)&&!Mr(e,t)):($("Invalid autoShowText setting!"),!1)}function uo(e){for(var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n=(e=m(e)).next();!n.done;n=e.next()){var r={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:(n=n.value)?cr(n):"",codecs:n?fr(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};r.fullMimeTypes.add(or(r.mimeType,r.codecs)),n.startsWith("audio/")?(r.type="audio",t.audio=r):t.video=r}return t}H("shaka.util.StreamUtils",Br),Br.meetsRestrictions=Fr;var co=new Map,fo=0,po=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),ho=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function mo(){var t=this;this.H=null,this.B=!1,this.u=new W,this.j=new oe,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(t.B&&t.g.useNetworkInformation){t.u=new W,t.g&&t.u.configure(t.g.advanced);var e=t.chooseVariant();e&&navigator.onLine&&t.H(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.o=[],this.I=1,this.J=!1,this.h=this.m=this.g=this.C=null,this.l=new Tr(function(){if(t.B&&(t.g.restrictToElementSize||t.g.restrictToScreenSize)){var e=t.chooseVariant();e&&t.H(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.F=e,"documentPictureInPicture"in e&&this.j.D(e.documentPictureInPicture,"enter",function(){t.F=e.documentPictureInPicture.window,t.l&&t.l.Kb(),t.j.Aa(t.F,"pagehide",function(){t.F=e,t.l&&t.l.Kb()})}),this.G=this.i=null}function go(e,t){if(void 0===t||!t){if(!e.J){if(!((t=e.u).g>=t.i))return;e.J=!0,e.C-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}if(Date.now()-e.C<1e3*e.g.switchInterval)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function yo(e,t,n,r,o){if(e.G){var i=e.G.ci();i&&(n=n.filter(function(e){return!e.bandwidth||!i||e.bandwidth<=i}))}return t&&(n=n.filter(function(e){return Fr(e,t,{width:o,height:r})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}(o=mo.prototype).stop=function(){this.H=null,this.B=!1,this.o=[],this.I=1,this.m=this.C=null,this.h&&(this.h.disconnect(),this.h=null),this.l&&this.l.stop(),this.G=this.i=null},o.release=function(){this.stop(),this.j.release(),this.l=null},o.init=function(e){this.H=e},o.chooseVariant=function(e){e=void 0!==e&&e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,t=this.F.screen.height*n,n*=this.F.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,o=this.m.clientHeight,i=this.m.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.m&&(o=this.i.height,i=this.i.width),t=Math.min(t,o*r),n=Math.min(n,i*r)}if((o=this.o.filter(function(e){return e&&!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})).length||(o=this.o),r=o,e&&o.length!=this.o.length&&(r=this.o.filter(function(e){return e&&!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),e=yo(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=function(e){for(var t=[],n=(e=m(e)).next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}(e),o=(e=m(e)).next();!o.done;o=e.next())if((o=o.value).height>=t&&o.width>=n){t=o.height,n=o.width;break}e=yo(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=[(e=yo(this,null,r,1/0,1/0))[0]]),n=e[0]||null,r=0;r<e.length;r++){o=e[r];var a=isNaN(this.I)?1:Math.abs(this.I);i=a*o.bandwidth/this.g.bandwidthDowngradeTarget;for(var s={bandwidth:1/0},l=r+1;l<e.length;l++)if(o.bandwidth!=e[l].bandwidth){s=e[l];break}a=a*s.bandwidth/this.g.bandwidthUpgradeTarget,t>=i&&t<=a&&(n.bandwidth!=o.bandwidth||n.bandwidth==o.bandwidth&&n.video&&o.video&&(n.video.width<o.video.width||n.video.height<o.video.height))&&(n=o)}return this.C=Date.now(),n},o.enable=function(){this.B=!0},o.disable=function(){this.B=!1},o.segmentDownloaded=function(e,t,n,r){var o=e;this.g.removeLatencyFromFirstPacketTime&&r&&1===r.packetNumber&&r.timeToFirstByte&&(o=e-r.timeToFirstByte),o>=this.g.cacheLoadThreshold&&this.u.sample(o,t),n&&null!=this.C&&this.B&&go(this)},o.trySuggestStreams=function(){this.B&&(this.C=Date.now(),go(this,!0))},o.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.G?this.G.getBandwidthEstimate(e):e)},o.setVariants=function(e){return!te(e,this.o)&&(this.o=e,!0)},o.playbackRateChanged=function(e){this.I=e},o.setMediaElement=function(t){function n(){r.l.ka(vo)}var r=this;this.m=t,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in e&&(this.h=new ResizeObserver(n),this.h.observe(this.m)),this.j.D(t,"enterpictureinpicture",function(e){e.pictureInPictureWindow&&(r.i=e.pictureInPictureWindow,r.j.D(r.i,"resize",n))}),this.j.D(t,"leavepictureinpicture",function(){r.i&&r.j.Ma(r.i,"resize",n),r.i=null})},o.setCmsdManager=function(e){this.G=e},o.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)},H("shaka.abr.SimpleAbrManager",mo),mo.prototype.configure=mo.prototype.configure,mo.prototype.setCmsdManager=mo.prototype.setCmsdManager,mo.prototype.setMediaElement=mo.prototype.setMediaElement,mo.prototype.playbackRateChanged=mo.prototype.playbackRateChanged,mo.prototype.setVariants=mo.prototype.setVariants,mo.prototype.getBandwidthEstimate=mo.prototype.getBandwidthEstimate,mo.prototype.trySuggestStreams=mo.prototype.trySuggestStreams,mo.prototype.segmentDownloaded=mo.prototype.segmentDownloaded,mo.prototype.disable=mo.prototype.disable,mo.prototype.enable=mo.prototype.enable,mo.prototype.chooseVariant=mo.prototype.chooseVariant,mo.prototype.init=mo.prototype.init,mo.prototype.release=mo.prototype.release,mo.prototype.stop=mo.prototype.stop;var vo=1;function bo(e,t){if(e===t||!e.length||!t.length)return!0;for(var n=(e=m(e)).next();!n.done;n=e.next()){if(To(n=n.value))return!0;for(var r=m(t),o=r.next();!o.done;o=r.next())if(o=o.value,n.keySystem===o.keySystem||To(o))return!0}return!1}function xo(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=(e=m(e)).next();!r.done;r=e.next()){r=r.value;for(var o=m(t),i=o.next();!i.done;i=o.next()){if(i=i.value,r.keySystem==i.keySystem){o=new Map;for(var a=m((r.initData||[]).concat(i.initData||[])),s=a.next();!s.done;s=a.next())s=s.value,o.set(s.keyId,s);o=Array.from(o.values()),a=r.keyIds&&i.keyIds?new Set([].concat(g(r.keyIds),g(i.keyIds))):r.keyIds||i.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||i.persistentStateRequired,videoRobustness:r.videoRobustness||i.videoRobustness,audioRobustness:r.audioRobustness||i.audioRobustness,serverCertificate:r.serverCertificate||i.serverCertificate,serverCertificateUri:r.serverCertificateUri||i.serverCertificateUri,initData:o,keyIds:a});break}To(r)?n.push(r):To(i)&&n.push(i)}}return n}function wo(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function So(e){return!!e&&!!e.match(/^com\.apple\.fps/)}function To(e){return!!(e=e.licenseServerUri)&&e.startsWith("data:application/json;base64,")}var ko=new se(function(){return Ne(new Uint8Array([0]))}),Co=new Map;function Ao(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Eo(e){var t,n;return O(function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new ze(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),S(r,new Promise(function(e){new Tr(e).ka(n/1e3)}),2))}e.h*=e.m,k(r)})}function Io(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Mo(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function Ro(e,t){this.promise=e,this.i=t,this.g=null}function _o(e){return new Ro(Promise.reject(e),function(){return Promise.resolve()})}function Lo(){var e=Promise.reject(new ze(2,7,7001));return e.catch(function(){}),new Ro(e,function(){return Promise.resolve()})}function Po(e){return new Ro(Promise.resolve(e),function(){return Promise.resolve()})}function Do(e){return new Ro(e,function(){return e.catch(function(){})})}function Oo(e){return new Ro(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function No(t,n){if(n)if(n instanceof Map)for(var r=m(n.keys()),o=r.next();!o.done;o=r.next())o=o.value,Object.defineProperty(this,o,{value:n.get(o),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Uo(e){var t,n=new No(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}Mo.prototype.resolve=function(){},Mo.prototype.reject=function(){},Ro.prototype.abort=function(){return this.g||(this.g=this.i()),this.g},Ro.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Ro.prototype.Xa=function(e,t){function n(n){return function(s){if(o.g&&n)i.reject(a);else{var l=n?e:t;l?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(o){return n.reject(o),function(){return Promise.resolve()}}}(l,s,i):(n?i.resolve:i.reject)(s)}}}function r(){return i.reject(a),o.abort()}var o=this,i=new Mo;i.catch(function(){});var a=new ze(2,7,7001);return this.promise.then(n(!0),n(!1)),new Ro(i,function(){return r()})},l.Object.defineProperties(Ro.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return null!==this.g}}}),H("shaka.util.AbortableOperation",Ro),Ro.prototype.chain=Ro.prototype.Xa,Ro.prototype.finally=Ro.prototype.finally,Ro.all=Oo,Ro.prototype.abort=Ro.prototype.abort,Ro.notAbortable=Do,Ro.completed=Po,Ro.aborted=Lo,Ro.failed=_o,No.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},No.prototype.stopImmediatePropagation=function(){this.g=!0},No.prototype.stopPropagation=function(){},H("shaka.util.FakeEvent",No);var Bo={ul:"abrstatuschanged",vl:"adaptation",wl:"audiotrackchanged",xl:"audiotrackschanged",yl:"boundarycrossed",zl:"buffering",Al:"canupdatestarttime",Bl:"complete",Cl:"currentitemchanged",Dl:"downloadcompleted",El:"downloadfailed",Fl:"downloadheadersreceived",Gl:"drmsessionupdate",Il:"emsg",Ol:"itemsinserted",Pl:"itemsremoved",gm:"prft",Error:"error",Jl:"expirationupdated",Kl:"firstquartile",Ll:"gapjumped",Ql:"keystatuschanged",Ul:"loaded",Vl:"loading",Xl:"manifestparsed",Yl:"manifestupdated",Zl:"mediaqualitychanged",$l:"mediasourcerecovered",am:"metadataadded",Metadata:"metadata",bm:"midpoint",dm:"nospatialvideoinfo",fm:"onstatechange",hm:"ratechange",lm:"segmentappended",nm:"sessiondata",om:"spatialvideoinfo",pm:"stalldetected",qm:"started",rm:"statechanged",sm:"streaming",tm:"textchanged",um:"texttrackvisibility",vm:"thirdquartile",wm:"timelineregionadded",xm:"timelineregionenter",ym:"timelineregionexit",zm:"trackschanged",Bm:"unloading",Dm:"variantchanged"};function jo(){this.ab=new re,this.Ee=this}function Fo(){this.g=[]}function zo(e,t){e.g.push(t.finally(function(){ee(e.g,t)}))}function Vo(e,t,n,r,o,i,a){jo.call(this),this.i=null,this.j=!1,this.u=new Fo,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=r||null,this.F=o||null,this.H=i||null,this.G=a||null,this.l=new Map}function Ho(e,t,n,r){r=void 0!==r&&r,n=n||Jo;var o=Qo.get(e);(!o||n>=o.priority)&&Qo.set(e,{priority:n,yf:t,Gk:r})}function Go(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(n=(e=m(e.h)).next();!n.done;n=e.next())t.h.add(n.value)}function qo(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Wo(e,t,n,r,o,i,a,s){e.i.forceHTTP&&(n.uris[i]=n.uris[i].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[i]=n.uris[i].replace("http://","https://")),i>0&&e.H&&e.H(t,r,n.uris[i],n.uris[i-1]);var l=new ve(n.uris[i]),u=l.bc,c=!1;u||(be(l,u=(u=location.protocol).slice(0,-1)),n.uris[i]=l.toString()),u=u.toLowerCase();var f=(u=Qo.get(u))?u.yf:null;if(!f)return _o(new ze(2,1,1e3,l));var d=u.Gk;(l=e.l.get(l.Eb))&&(n.headers["common-access-token"]=l);var p,h=null,m=null,g=!1,y=!1;return Do(Eo(o)).Xa(function(){if(e.j)return Lo();p=Date.now();var o=0;n.requestStartTime=Date.now();var a=f(n.uris[i],n,t,function(i,a,l){h&&h.stop(),m&&m.ka(u/1e3),e.o&&t==Yo&&(o++,n.packetNumber=o,e.o(i,a,Ko(r),n,r),c=!0,s.g=l)},function(r){y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(r,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!d)return a;var l=n.retryParameters.connectionTimeout;l&&(h=new Tr(function(){g=!0,a.abort()})).ka(l/1e3);var u=n.retryParameters.stallTimeout;return u&&(m=new Tr(function(){g=!0,a.abort()})),a}).Xa(function(r){h&&h.stop(),m&&m.stop(),null==r.timeMs&&(r.timeMs=Date.now()-p);var o=r.headers["common-access-token"];if(o){var i=new ve(r.uri);e.l.set(i.Eb,o)}return o={response:r,gk:c},!y&&e.m&&e.m(r.headers,n,t),e.B&&e.B(n,r),o},function(l){if(h&&h.stop(),m&&m.stop(),e.C){var u=null,c=0;l instanceof ze&&(u=l,1001==l.code&&(c=l.data[1])),e.C(n,u,c,g)}if(e.j)return Lo();if(g&&(l=new ze(1,1,1003,n.uris[i],t)),l instanceof ze){if(7001==l.code)throw l;if(1010==l.code)throw a;if(1==l.severity){if((u=new No("retry",u=(new Map).set("error",l))).cancelable=!0,e.dispatchEvent(u),u.defaultPrevented)throw l;return i=(i+1)%n.uris.length,Wo(e,t,n,r,o,i,l,s)}}throw l})}function Ko(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}function Xo(){this.g=0}function $o(e,t,n){Ro.call(this,e,t),this.h=n}jo.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},jo.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},jo.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),n=(t=m(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Ee,e.currentTarget=this.Ee;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},jo.prototype.release=function(){this.ab=null},Fo.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},p(Vo,jo),(o=Vo.prototype).configure=function(e){this.i=e},o.Jk=function(e){this.g.add(e)},o.il=function(e){this.g.delete(e)},o.pj=function(){this.g.clear()},o.Kk=function(e){this.h.add(e)},o.jl=function(e){this.h.delete(e)},o.qj=function(){this.h.clear()},o.Rh=function(){this.l.clear()},o.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),jo.prototype.release.call(this),this.u.destroy()},o.request=function(e,t,n){var r=this,o=new Xo;if(this.j){var i=Promise.reject(new ze(2,7,7001));return i.catch(function(){}),new $o(i,function(){return Promise.resolve()},o)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?zt(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=zt(t.uris),i=function(e,t,n,r){function o(e){i=i.Xa(function(){return n.body&&(n.body=Ne(n.body)),e(t,n,r)})}var i=Po(void 0);e.F&&o(e.F);for(var a=(e=m(e.g)).next();!a.done;a=e.next())o(a.value);return i.Xa(void 0,function(e){if(e instanceof ze&&7001==e.code)throw e;throw new ze(2,1,1006,e)})}(this,e,t,n);var a=i.Xa(function(){return Wo(r,e,t,n,new Ao(t.retryParameters,!1),0,null,o)}),s=a.Xa(function(t){return function(e,t,n,r){for(var o=Po(void 0),i=(e=m(e.h)).next(),a={};!i.done;a={Ji:void 0},i=e.next())a.Ji=i.value,o=o.Xa(function(e){return function(){var o=n.response;return o.data&&(o.data=Ne(o.data)),(0,e.Ji)(t,o,r)}}(a));return o.Xa(function(){return n},function(e){var t=2;if(e instanceof ze){if(7001==e.code)throw e;t=e.severity}throw new ze(t,1,1007,e)})}(r,e,t,n)}),l=Date.now(),u=0;i.promise.then(function(){u=Date.now()-l},function(){});var c=0;a.promise.then(function(){c=Date.now()},function(){});var f=s.Xa(function(o){var i=Date.now()-c,a=o.response;return a.timeMs+=u,a.timeMs+=i,o.gk||!r.o||a.fromCache||"HEAD"==t.method||e!=Yo||r.o(a.timeMs,a.data.byteLength,Ko(n),t,n),r.G&&r.G(e,a,n),a},function(e){throw e&&(e.severity=2),e});return i=new $o(f.promise,function(){return f.abort()},o),zo(this.u,i),i},H("shaka.net.NetworkingEngine",Vo),Vo.prototype.request=Vo.prototype.request,Vo.prototype.destroy=Vo.prototype.destroy,Vo.makeRequest=qo,Vo.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Vo.prototype.clearCommonAccessTokenMap=Vo.prototype.Rh,Vo.prototype.clearAllResponseFilters=Vo.prototype.qj,Vo.prototype.unregisterResponseFilter=Vo.prototype.jl,Vo.prototype.registerResponseFilter=Vo.prototype.Kk,Vo.prototype.clearAllRequestFilters=Vo.prototype.pj,Vo.prototype.unregisterRequestFilter=Vo.prototype.il,Vo.prototype.registerRequestFilter=Vo.prototype.Jk,Vo.unregisterScheme=function(e){Qo.delete(e)},Vo.registerScheme=Ho,Vo.prototype.configure=Vo.prototype.configure,Vo.NumBytesRemainingClass=Xo,p($o,Ro),Vo.PendingRequest=$o;var Yo=1;Vo.RequestType={MANIFEST:0,SEGMENT:Yo,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},Vo.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var Jo=3;Vo.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Jo};var Qo=new Map;function Zo(e){this.g=!1,this.h=new Mo,this.i=e}function ei(e,t){if(e.g){if(t instanceof ze&&7003==t.code)throw t;throw new ze(2,7,7003,t)}}function ti(e,t){for(var n=[],r=(e=m(e)).next();!r.done;r=e.next())n.push(t(r.value));return n}function ni(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function ri(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function oi(e,t){this.h=je(e),this.i=t==ai,this.g=0}function ii(){return new ze(2,3,3e3)}Zo.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(o=oi.prototype).Ia=function(){return this.g<this.h.byteLength},o.Pa=function(){return this.g},o.getLength=function(){return this.h.byteLength},o.Y=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw ii()}},o.Ba=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw ii()}},o.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw ii()}},o.$g=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw ii()}},o.Dd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw ii()}if(t>2097151)throw new ze(2,3,3001);return this.g+=8,4294967296*t+e},o.Tb=function(e){if(this.g+e>this.h.byteLength)throw ii();var t=Ue(this.h,this.g,e);return this.g+=e,t},o.skip=function(e){if(this.g+e>this.h.byteLength)throw ii();this.g+=e},o.Ki=function(e){if(this.g<e)throw ii();this.g-=e},o.seek=function(e){if(e<0||e>this.h.byteLength)throw ii();this.g=e},o.Yc=function(){for(var e=this.g;this.Ia()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=Ue(this.h,e,this.g-e),this.g+=1,He(e)},H("shaka.util.DataViewReader",oi),oi.prototype.readTerminatedString=oi.prototype.Yc,oi.prototype.seek=oi.prototype.seek,oi.prototype.rewind=oi.prototype.Ki,oi.prototype.skip=oi.prototype.skip,oi.prototype.readBytes=oi.prototype.Tb,oi.prototype.readUint64=oi.prototype.Dd,oi.prototype.readInt32=oi.prototype.$g,oi.prototype.readUint32=oi.prototype.U,oi.prototype.readUint16=oi.prototype.Ba,oi.prototype.readUint8=oi.prototype.Y,oi.prototype.getLength=oi.prototype.getLength,oi.prototype.getPosition=oi.prototype.Pa,oi.prototype.hasMoreData=oi.prototype.Ia;var ai=1;function si(){this.i=new Map,this.h=new Map,this.g=!1}function li(e){for(var t=mi(e);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function ui(e){for(var t=mi(e),n=e.reader.U(),r=0;r<n&&(e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);r++);}function ci(e){var t=mi(e);for(e.reader.skip(78);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function fi(e){var t=mi(e);e.reader.skip(8);var n=e.reader.Ba();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function di(e){return function(t){e(t.reader.Tb(t.reader.getLength()-t.reader.Pa()))}}function pi(e){for(var t=0,n=(e=m(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function hi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function mi(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}oi.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:ai},(o=si.prototype).box=function(e,t){return e=pi(e),this.i.set(e,gi),this.h.set(e,t),this},o.T=function(e,t){return e=pi(e),this.i.set(e,yi),this.h.set(e,t),this},o.stop=function(){this.g=!0},o.parse=function(e,t,n){for(e=new oi(e,0),this.g=!1;e.Ia()&&!this.g;)this.zd(0,e,t,n)},o.zd=function(e,t,n,r){var o=t.Pa();if(r&&o+8>t.getLength())this.g=!0;else{var i=t.U(),a=t.U(),s=hi(a),l=!1;switch(i){case 0:i=t.getLength()-o;break;case 1:if(r&&t.Pa()+8>t.getLength())return void(this.g=!0);i=t.Dd(),l=!0}var u=this.h.get(a);if(u){var c=null,f=null;if(this.i.get(a)==yi){if(r&&t.Pa()+4>t.getLength())return void(this.g=!0);c=(f=t.U())>>>24,f&=16777215}a=o+i,n&&a>t.getLength()&&(a=t.getLength()),r&&a>t.getLength()?this.g=!0:(a-=t.Pa(),u({name:s,parser:this,partialOkay:n||!1,stopOnPartial:r||!1,version:c,flags:f,reader:t=new oi(t=a>0?t.Tb(a):new Uint8Array(0),0),size:i,start:o+e,has64BitSize:l}))}else t.skip(Math.min(o+i-t.Pa(),t.getLength()-t.Pa()))}},H("shaka.util.Mp4Parser",si),si.headerSize=mi,si.typeToString=hi,si.allData=di,si.audioSampleEntry=fi,si.visualSampleEntry=ci,si.sampleDescription=ui,si.children=li,si.prototype.parseNext=si.prototype.zd,si.prototype.parse=si.prototype.parse,si.prototype.stop=si.prototype.stop,si.prototype.fullBox=si.prototype.T,si.prototype.box=si.prototype.box;var gi=0,yi=1;function vi(e){var t=this;this.g=[],this.h=[],this.data=[],(new si).box("moov",li).box("moof",li).T("pssh",function(e){if(!(e.version>1)){var n=Ue(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(nt(e.reader.Tb(16))),e.version>0){n=e.reader.U();for(var r=0;r<n;r++){var o=nt(e.reader.Tb(16));t.h.push(o)}}}}).parse(e)}function bi(e,t,n,r){var o=e.length,i=12+t.length+4+o;r>0&&(i+=4+16*n.size);var a=new Uint8Array(i),s=je(a),l=0;if(s.setUint32(l,i),l+=4,s.setUint32(l,1886614376),l+=4,r<1?s.setUint32(l,0):s.setUint32(l,16777216),l+=4,a.set(t,l),l+=t.length,r>0)for(s.setUint32(l,n.size),l+=4,n=(t=m(n)).next();!n.done;n=t.next())n=tt(n.value),a.set(n,l),l+=n.length;return s.setUint32(l,o),a.set(e,l+4),a}function xi(e){var t=this;this.F=e,this.j=this.B=null,this.oa=this.S=!1,this.I=0,this.g=null,this.o=new oe,this.i=new Map,this.X=[],this.C=new Map,this.J=!1,this.m=new Mo,this.h=null,this.u=function(n){2==n.severity&&t.m.reject(n),e.onError(n)},this.ba=new Map,this.ma=new Map,this.K=new Tr(function(){return function(e){var t=e.ba,n=e.ma;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.u(new ze(2,6,6014)),e.F.uf(ri(n))}(t)}),this.R=!1,this.N=[],this.$=!1,this.G=new Tr(function(){!function(e){e.i.forEach(function(t,n){var r=t.Vg,o=n.expiration;isNaN(o)&&(o=1/0),o!=r&&(e.F.onExpirationUpdated(n.sessionId,o),t.Vg=o)})}(t)}),this.m.catch(function(){}),this.l=new Zo(function(){return function(e){return O(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.K.stop(),e.K=null,S(t,Di(e),2);case 2:if(!e.j){t.A(3);break}return C(t,4),S(t,e.j.setMediaKeys(null),6);case 6:E(t,5);break;case 4:I(t);case 5:e.j=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.H=null,k(t)}})}(t)}),this.O=!1,this.M=this.H=null,this.V=function(){return!1}}function wi(e,t,n,r){r=void 0===r||r,e.C=new Map;for(var o=(n=m(n)).next();!o.done;o=n.next())e.C.set(o.value,{initData:null,initDataType:null});for(o=(n=m(e.h.persistentSessionsMetadata)).next();!o.done;o=n.next())o=o.value,e.C.set(o.sessionId,{initData:o.initData,initDataType:o.initDataType});return e.R=e.C.size>0,Si(e,t,r)}function Si(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x;return O(function(w){if(1==w.g){for(Bi(e.h.clearKeys,t),r=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),o=ni(e.h.servers),i=ni(e.h.advanced||{}),!r&&n&&function(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(t,o),a=new WeakSet,s=m(t),l=s.next();!l.done;l=s.next())for(u=l.value,c=Oi(u),f=m(c),d=f.next();!d.done;d=f.next())p=d.value,a.has(p)||(a.add(p),Ui(p,o,i,e.h.keySystemsMapping));for(h=function(t,n){for(var r=[],o=(t=m(t)).next();!o.done;o=t.next()){var a,s=(o=o.value)[n]||i.has(o.keySystem)&&i.get(o.keySystem)[n]||"";if((a=""==s)&&(a=!!(a=o.keySystem)&&!!a.match(/^com\.widevine\.alpha/)),a&&("audioRobustness"==n?s=[e.h.defaultAudioRobustnessForWidevine]:"videoRobustness"==n&&(s=[e.h.defaultVideoRobustnessForWidevine])),"string"==typeof s)r.push(o);else if(Array.isArray(s))for(0===s.length&&(s=[""]),a=(s=m(s)).next();!a.done;a=s.next()){var l={};r.push(Object.assign({},o,(l[n]=a.value,l)))}}return r},g=new WeakSet,y=m(t),v=y.next();!v.done;v=y.next())(b=v.value).video&&!g.has(b.video)&&(b.video.drmInfos=h(b.video.drmInfos,"videoRobustness"),b.video.drmInfos=h(b.video.drmInfos,"audioRobustness"),g.add(b.video)),b.audio&&!g.has(b.audio)&&(b.audio.drmInfos=h(b.audio.drmInfos,"videoRobustness"),b.audio.drmInfos=h(b.audio.drmInfos,"audioRobustness"),g.add(b.audio));return S(w,qr(t,e.R,e.O,e.h.preferredKeySystems),2)}return ei(e.l),r||o.size>0?(x=Ei(e,t),w.return(r?x:x.catch(function(){}))):(e.S=!0,w.return(Promise.resolve()))})}function Ti(e){var t;return O(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.H){n.A(2);break}return S(n,e.H,3);case 3:return ei(e.l),n.return();case 2:return C(n,4),e.H=e.j.setMediaKeys(e.B),S(n,e.H,6);case 6:E(n,5);break;case 4:t=I(n),e.u(new ze(2,6,6003,t.message));case 5:ei(e.l),k(n)}})}function ki(e){var t,n,r,o;return O(function(i){if(1==i.g)return e.C.size?(e.C.forEach(function(t,n){Ri(e,n,t)}),S(i,e.m,3)):i.A(2);if(2!=i.g){if((e.g&&e.g.keyIds||new Set([])).size>0&&function(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.ba.get(n.value))return!1;return!0}(e))return i.return(e.m);e.J=!1,e.m=new Mo,e.m.catch(function(){})}for(t=(e.g?e.g.initData:[])||[],n=m(t),r=n.next();!r.done;r=n.next())o=r.value,Ci(e,o.initDataType,o.initData);return Ni(e)&&e.m.resolve(),i.return(e.m)})}function Ci(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){for(var r=e.i.values(),o=(r=m(r)).next();!o.done;o=r.next())if(Oe(n,o.value.initData))return;var i=!1;if(e.C.forEach(function(e){!i&&Oe(n,e.initData)&&(i=!0)}),i)return}e.J=!0,e.i.size>0&&Ni(e)&&(e.m.resolve(),e.J=!1,e.m=new Mo,e.m.catch(function(){})),function(e,t,n,r){try{var o=e.B.createSession(r)}catch(i){return void e.u(new ze(2,6,6005,i.message))}e.o.D(o,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(t):_i(e,t)}),e.o.D(o,"keystatuseschange",function(t){return Li(e,t)}),e.i.set(o,{initData:n,initDataType:t,loaded:!1,Vg:1/0,Lb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(i){return t=i,i instanceof ze||(t=new ze(2,6,6016,i)),void e.u(t)}e.h.logLicenseExchange&&Ze(n),o.generateRequest(t,n).catch(function(t){if(!e.l.g){e.i.delete(o);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;r<0&&(r+=4294967296),r="0x"+r.toString(16)}e.u(new ze(2,6,6006,t.message,t,r))}})}(e,t,n,e.g.sessionType)}}function Ai(e){return e=ti(e=e.i.keys(),function(e){return e.sessionId}),Array.from(e)}function Ei(t,n){var r,o,i,a,s,l;return O(function(u){switch(u.g){case 1:if(r=new Map,o=function(e,t,n){for(var r=m(t),o=r.next();!o.done;o=r.next())for(var i=(o=m(Oi(o.value))).next();!i.done;i=o.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i);if(1==n.size&&n.has(""))throw new ze(2,6,6e3);(r=e.h.preferredKeySystems).length||1==(o=ni(e.h.servers)).size&&(r=Array.from(o.keys()));var a=(o=m(r)).next();for(i={};!a.done;i={Di:void 0},a=o.next()){i.Di=a.value;for(var s=(a=m(t)).next();!s.done;s=a.next())if(s=s.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Di}}(i)))return s.keySystemAccess}for(o=m([!0,!1]),i=o.next();!i.done;i=o.next())for(i=i.value,a=m(t),s=a.next();!s.done;s=a.next())for(var l=(s=m(s.value.decodingInfos)).next();!l.done;l=s.next())if((l=l.value).supported&&l.keySystemAccess){var u=l.keySystemAccess.keySystem;if(!r.includes(u)){var c=n.get(u);for(!c&&e.h.keySystemsMapping[u]&&(c=n.get(e.h.keySystemsMapping[u])),c=(u=m(c)).next();!c.done;c=u.next())if(!!c.value.licenseServerUri==i)return l.keySystemAccess}}return null}(t,n,r),!o){if(!navigator.requestMediaKeySystemAccess)throw new ze(2,6,6020);throw new ze(2,6,6001)}ei(t.l),C(u,2),o.getConfiguration();var c=i=t.h.keySystemsMapping[o.keySystem]||o.keySystem,f=r.get(i),d=[],p=[],h=[],y=[],v=[],b=new Set,x=new Set;!function(t,n,r,o,i,a,s,l){for(var u=[],c=(t=m(t)).next(),f={};!c.done;f={Ka:void 0},c=t.next()){if(f.Ka=c.value,n.includes(f.Ka.encryptionScheme)||n.push(f.Ka.encryptionScheme),"org.w3.clearkey"==f.Ka.keySystem&&f.Ka.licenseServerUri.startsWith("data:application/json;base64,")?u.includes(f.Ka.licenseServerUri)||u.push(f.Ka.licenseServerUri):r.includes(f.Ka.licenseServerUri)||r.push(f.Ka.licenseServerUri),i.includes(f.Ka.serverCertificateUri)||i.push(f.Ka.serverCertificateUri),f.Ka.serverCertificate&&(o.some(function(e){return function(t){return Oe(t,e.Ka.serverCertificate)}}(f))||o.push(f.Ka.serverCertificate)),f.Ka.initData)for(var d=(c=m(f.Ka.initData)).next(),p={};!d.done;p={Mg:void 0},d=c.next())p.Mg=d.value,a.some(function(e){return function(t){var n=e.Mg;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Oe(t.initData,n.initData)}}(p))||a.push(p.Mg);if(f.Ka.keyIds)for(d=(c=m(f.Ka.keyIds)).next();!d.done;d=c.next())s.add(d.value);if(f.Ka.keySystemUris&&l)for(c=(f=m(f.Ka.keySystemUris)).next();!c.done;c=f.next())l.add(c.value)}if(1==u.length)r.push(u[0]);else if(u.length>0){for(n=[],o=(u=m(u)).next();!o.done;o=u.next())o=e.atob(o.value.split("data:application/json;base64,").pop()),o=JSON.parse(o),n.push.apply(n,g(o.keys));u=JSON.stringify({keys:n}),r.push("data:application/json;base64,"+e.btoa(u))}}(f,d,p,y,h,v,b,x);var w=t.R?"persistent-license":"temporary";for(c={keySystem:c,encryptionScheme:d[0],licenseServerUri:p[0],distinctiveIdentifierRequired:f[0].distinctiveIdentifierRequired,persistentStateRequired:f[0].persistentStateRequired,sessionType:f[0].sessionType||w,audioRobustness:f[0].audioRobustness||"",videoRobustness:f[0].videoRobustness||"",serverCertificate:y[0],serverCertificateUri:h[0],initData:v,keyIds:b},x.size>0&&(c.keySystemUris=x),x=(f=m(f)).next();!x.done;x=f.next())(x=x.value).distinctiveIdentifierRequired&&(c.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(c.persistentStateRequired=x.persistentStateRequired);if(t.g=c,!t.g.licenseServerUri)throw new ze(2,6,6012,t.g.keySystem);return S(u,o.createMediaKeys(),4);case 4:if(a=u.h,ei(t.l),t.B=a,""==t.h.minHdcpVersion||!("getStatusForPolicy"in t.B)){u.A(5);break}return C(u,6),S(u,t.B.getStatusForPolicy({minHdcpVersion:t.h.minHdcpVersion}),8);case 8:if("usable"!=u.h)throw new ze(2,6,6018);ei(t.l),E(u,5,2);break;case 6:if((s=I(u,2))instanceof ze)throw s;throw new ze(2,6,6019,s.message);case 5:return t.S=!0,t.G.Fa(t.h.updateExpirationTime),S(u,function(e){var t,n;return O(function(r){switch(r.g){case 1:if(!e.B||!e.g)return r.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){r.A(2);break}return t=qo([e.g.serverCertificateUri],e.h.retryParameters),C(r,3),S(r,e.F.tc.request(5,t,{isPreload:e.V()}).promise,5);case 5:n=r.h,e.g.serverCertificate=Ue(n.data),E(r,4);break;case 3:throw new ze(2,6,6017,I(r));case 4:if(e.l.g)return r.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(C(r,6),S(r,e.B.setServerCertificate(e.g.serverCertificate),8)):r.return();case 8:E(r,0);break;case 6:throw new ze(2,6,6004,I(r).message)}})}(t),9);case 9:ei(t.l),E(u,0);break;case 2:if(l=I(u),ei(t.l,l),t.g=null,l instanceof ze)throw l;throw new ze(2,6,6002,l.message)}})}function Ii(e){Ni(e)&&e.m.resolve()}function Mi(e,t){new Tr(function(){t.loaded=!0,Ii(e)}).ka(Fi)}function Ri(e,t,n){var r,o,i,a,s,l,u;return O(function(c){switch(c.g){case 1:try{r=e.B.createSession("persistent-license")}catch(T){return o=new ze(2,6,6005,T.message),e.u(o),c.return(Promise.reject(o))}return e.o.D(r,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(t):_i(e,t)}),e.o.D(r,"keystatuseschange",function(t){return Li(e,t)}),i={initData:n.initData,initDataType:n.initDataType,loaded:!1,Vg:1/0,Lb:null,type:"persistent-license"},e.i.set(r,i),C(c,2),S(c,r.load(t),4);case 4:return a=c.h,ei(e.l),a||(e.i.delete(r),s=e.h.persistentSessionOnlinePlayback?1:2,e.u(new ze(s,6,6013)),i.loaded=!0),Mi(e,i),Ii(e),c.return(r);case 2:l=I(c),ei(e.l,l),e.i.delete(r),u=e.h.persistentSessionOnlinePlayback?1:2,e.u(new ze(u,6,6005,l.message)),i.loaded=!0,Ii(e);case 3:return c.return(Promise.resolve())}})}function _i(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,g,y,v;O(function(b){switch(b.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Ze(t.message),r=e.i.get(n),o=e.g.licenseServerUri,i=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&i&&i.individualizationServer&&(o=i.individualizationServer),(a=qo([o],e.h.retryParameters)).body=t.message,a.method="POST",a.licenseRequestType=t.messageType,a.sessionId=n.sessionId,a.drmInfo=e.g,r&&(a.initData=r.initData,a.initDataType=r.initDataType),i&&i.headers)for(s in i.headers)a.headers[s]=i.headers[s];if("org.w3.clearkey"===e.g.keySystem){var x=a,w=e.g;try{var T=qe(x.body);if(T){var A=JSON.parse(T);A.type||(A.type=w.sessionType,x.body=We(JSON.stringify(A)))}}catch(pa){}}if(wo(e.g.keySystem))if((x=Ge(a.body,!0,!0)).includes("PlayReadyKeyMessage")){for(T=(w=m(w=Qt(x=qt(x,"PlayReadyKeyMessage"),"HttpHeader"))).next();!T.done;T=w.next())T=Qt(A=T.value,"name")[0],A=Qt(A,"value")[0],a.headers[Yt(T)]=Yt(A);x=Qt(x,"Challenge")[0],a.body=et(Yt(x))}else a.headers["Content-Type"]="text/xml; charset=utf-8";return l=Date.now(),C(b,2),c=e.F.tc.request(2,a,{isPreload:e.V()}),e.X.push(c),S(b,c.promise,4);case 4:u=b.h,ee(e.X,c),E(b,3);break;case 2:return f=I(b),e.l.g||(d={sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType},p=new ze(2,6,6007,f,d),1==e.i.size?(e.u(p),r&&r.Lb&&r.Lb.reject(p)):(r&&r.Lb&&r.Lb.reject(p),e.i.delete(n),Ni(e)&&(e.m.resolve(),e.K.ka(.1)))),b.return();case 3:return e.l.g?b.return():(e.I+=(Date.now()-l)/1e3,e.h.logLicenseExchange&&Ze(u.data),C(b,5),S(b,n.update(u.data),7));case 7:E(b,6);break;case 5:return g=(h=I(b))&&h.message||String(h),y=new ze(2,6,6008,g),e.u(y),r&&r.Lb&&r.Lb.reject(y),b.return();case 6:if(e.l.g)return b.return();v=new No("drmsessionupdate"),e.F.onEvent(v),r&&(r.Lb&&r.Lb.resolve(),Mi(e,r)),k(b)}})}function Li(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(t,o){if("string"==typeof o){var i=o;o=t,t=i}if(i=le(),wo(e.g.keySystem)&&16==o.byteLength&&i.hh()){var a=(i=je(o)).getUint32(0,!0),s=i.getUint16(4,!0),l=i.getUint16(6,!0);i.setUint32(0,a,!1),i.setUint16(4,s,!1),i.setUint16(6,l,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),o=nt(o).slice(0,32),e.ba.set(o,t)});var o=t.expiration-Date.now();(o<0||r&&o<1e3)&&n&&!n.Lb&&(e.i.delete(t),Pi(t)),Ni(e)&&(e.m.resolve(),e.K.ka(zi))}function Pi(e){return O(function(t){return 1==t.g?(C(t,2),S(t,Er(ji,Promise.all([e.close().catch(function(){}),e.closed])),4)):2!=t.g?E(t,0):(I(t),void k(t))})}function Di(e){var t;return O(function(n){return t=Array.from(e.i.entries()),e.i.clear(),S(n,Promise.all(t.map(function(t){var n=(t=m(t)).next().value,r=t.next().value;return O(function(t){return 1==t.g?(C(t,2),e.oa||e.C.has(n.sessionId)||"persistent-license"!==r.type||e.h.persistentSessionOnlinePlayback?S(t,Pi(n),5):S(t,n.remove(),5)):2!=t.g?E(t,0):(I(t),void k(t))})})),0)})}function Oi(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ni(e){return function(e,t){for(var n=(e=m(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),function(e){return e.loaded})}function Ui(t,n,r,o){var i=t.keySystem;!i||"org.w3.clearkey"==i&&t.licenseServerUri||(n.size&&n.get(i)&&(n=n.get(i),t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(i))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),o[i]&&(t.keySystem=o[i]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==i&&(t.keySystem="com.chromecast.playready"))}function Bi(e,t){if(0!=(e=ni(e)).size){e=at(e);for(var n=(t=m(t)).next();!n.done;n=t.next())(n=n.value).video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}(o=xi.prototype).destroy=function(){return this.l.destroy()},o.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.S&&this.g&&this.G.Fa(this.h.updateExpirationTime)},o.fc=function(e){var t,n=this;return O(function(r){if(1==r.g)return n.j===e?r.return():n.B?(n.j=e,n.h.delayLicenseRequestUntilPlayed&&n.o.Aa(n.j,"play",function(){for(var e=m(n.N),t=e.next();!t.done;t=e.next())_i(n,t.value);n.$=!0,n.N=[]}),n.j.remote?(n.o.D(n.j.remote,"connect",function(){return Di(n)}),n.o.D(n.j.remote,"connecting",function(){return Di(n)}),n.o.D(n.j.remote,"disconnect",function(){return Di(n)})):"webkitCurrentPlaybackTargetIsWireless"in n.j&&n.o.D(n.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Di(n)}),n.M=n.g&&n.g.initData.find(function(e){return e.initData.length>0})||null,t=n.g.keySystem,le().Sg(t)||!(n.M||n.C.size||n.h.parseInbandPsshEnabled)?(n.o.D(n.j,"encrypted",function(e){return function(e,t){return O(function(n){if(1==n.g)return S(n,Ti(e),2);Ci(e,t.initDataType,Ue(t.initData)),k(n)})}(n,e)}),r.A(2)):S(r,Ti(n),2)):(n.o.Aa(e,"encrypted",function(){n.u(new ze(2,6,6010))}),r.return());ki(n).catch(function(){}),k(r)})},o.Gg=function(){var e=this,t=this.i.keys();return t=ti(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},o.Ud=function(){for(var e=1/0,t=this.i.keys(),n=(t=m(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},o.We=function(){return ri(this.ma)};var ji=1,Fi=5,zi=.5;function Vi(){this.g=qi,this.i=(new Map).set(qi,2).set(Gi,1),this.h=0}function Hi(e,t){var n=e.g!==t;return e.g=t,n&&t===qi&&(e.h=Date.now()),n}var Gi=0,qi=1;
/*
      		 @license
      		 Shaka Player
      		 Copyright 2023 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/function Wi(e,t,n){this.g=e,this.i=t,this.h=n}function Ki(e,t){return O(function(n){if(1==n.g)return S(n,zr(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||jr(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(to))throw new ze(2,4,4032);return n.return($i(e,t))})}function Xi(e,t){var n=e.g.restrictions;e=e.i;for(var r=!1,o=(t=m(t.variants)).next();!o.done;o=t.next()){var i=(o=o.value).allowedByApplication;o.allowedByApplication=Fr(o,n,e),i!=o.allowedByApplication&&(r=!0)}return r}function $i(e,t){var n=Xi(e,t);if(t){var r=e.h?e.h.g:null;if(r&&e.h.B){for(var o=new Set,i=m(t.variants),a=i.next();!a.done;a=i.next())(a=a.value).audio&&o.add(a.audio),a.video&&o.add(a.video);for(i=(o=m(o)).next();!i.done;i=o.next())Yi(e,r.keySystem,i.value)}Ji(e,t)}return n}function Yi(e,t,n){for(var r=(n=m(n.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==t)for(var o=(r=m(r.initData||[])).next();!o.done;o=r.next())o=o.value,Ci(e.h,o.initDataType,o.initData)}function Ji(e,t){e=e.h?e.h.We():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var r=!1,o=!1,i=new Set,a=new Set,s=new Set,l=(t=m(t.variants)).next();!l.done;l=t.next())(l=l.value).audio&&s.add(l.audio),l.video&&s.add(l.video),l.allowedByApplication?l.allowedByKeySystem&&(r=!0):o=!0;for(t=(s=m(s)).next();!t.done;t=s.next())if((t=t.value).keyIds.size)for(l=(t=m(t.keyIds)).next();!l.done;l=t.next()){l=l.value;var u=e[n?"00":l];u?Qi.includes(u)&&a.add(u):i.add(l)}if(!r)throw new ze(2,4,4012,e={hasAppRestrictions:o,missingKeys:Array.from(i),restrictedKeyStatuses:Array.from(a)})}var Qi=["output-restricted","internal-error"];function Zi(){}function ea(e,t){na.set(e,t)}function ta(e,t){if(t){var n=na.get(t.toLowerCase());if(n)return n}throw new ze(2,4,4e3,e,t)}H("shaka.media.ManifestParser",Zi),Zi.unregisterParserByMime=function(e){na.delete(e)},Zi.registerParserByMime=ea,Zi.registerParserByExtension=function(){pe("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Zi.AccessibilityPurpose={Cm:"visually impaired",Ml:"hard of hearing",jm:"spoken subtitles"};var na=new Map;function ra(e,t){var n=null,r=null,o=null,i=null,a=e.U();return 1&t&&(o=e.Dd()),2&t&&(i=e.U()),8&t&&(n=e.U()),16&t&&(r=e.U()),{trackId:a,Rd:n,Sd:r,lj:o,Li:i}}function oa(e,t){return 1==t?{baseMediaDecodeTime:4294967296*(t=e.U())+(e=e.U())}:{baseMediaDecodeTime:e.U()}}function ia(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ba(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function aa(e,t,n){var r=e.U(),o=[],i=null;1&n&&(i=e.$g()),4&n&&e.skip(4);for(var a=0;a<r;a++){var s={jh:null,sampleSize:null,Cf:null};256&n&&(s.jh=e.U()),512&n&&(s.sampleSize=e.U()),1024&n&&e.skip(4),2048&n&&(s.Cf=0==t?e.U():e.$g()),o.push(s)}return{Im:r,ih:o,mg:i}}function sa(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ba();return e.skip(2),e.skip(2),e.skip(2),{channelCount:t,sampleRate:e=e.Ba()+e.Ba()/65536}}function la(e){return{codec:hi(e=e.U())}}function ua(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function ca(e){return(e<10?"0":"")+e}function fa(e){this.g=e}function da(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var o=t,i=o.push,a=r.value;r=ka;var s=a.id+1,l=a.stream.width||0,u=a.stream.height||0;"audio"==a.type&&(u=l=0);var c=a.duration*a.timescale,f=Math.floor(c/(Ca+1));switch(c=Math.floor(c%(Ca+1)),s=ka("tkhd",s=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(g(wa(s,4)),[0,0,0,0],g(wa(f,4)),g(wa(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],g(wa(l,2)),[0,0],g(wa(u,2)),[0,0]))),l=ka,f=a.duration*a.timescale,u=Math.floor(f/(Ca+1)),f=Math.floor(f%(Ca+1)),c=(c=a.stream.language).charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,u=ka("mdhd",u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(g(wa(a.timescale,4)),g(wa(u,4)),g(wa(f,4)),g(wa(c,2)),[0,0]))),f=a,c=new Uint8Array([]),f.type){case"video":c=Ea.value();break;case"audio":c=Ia.value()}f=ka("hdlr",c);e:{switch(a.type){case"video":a=ka("minf",ka("vmhd",Pa.value()),Ua.value(),ha(a));break e;case"audio":a=ka("minf",ka("smhd",Da.value()),Ua.value(),ha(a));break e}a=new Uint8Array([])}r=r("trak",s,a=l("mdia",u,f,a)),i.call(o,r)}for(t=rt.apply(Je,g(t)),n=ka,r=(i=e.g[0]).duration*i.timescale,o=Math.floor(r/(Ca+1)),r=Math.floor(r%(Ca+1)),o=ka("mvhd",o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(g(wa(i.timescale,4)),g(wa(o,4)),g(wa(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),r=[],l=(e=m(e.g)).next();!l.done;l=e.next())s=(a=r).push,l=ka("trex",l=new Uint8Array([0,0,0,0].concat(g(wa(l.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),s.call(a,l);if(e=ka("mvex",e=rt.apply(Je,g(r))),r=[],i.encrypted){for(a=(i=m(i.stream.drmInfos)).next();!a.done;a=i.next())if((a=a.value).initData)for(s=(a=m(a.initData)).next();!s.done;s=a.next())r.push(s.value.initData);i=rt.apply(Je,g(r))}else i=new Uint8Array([]);return e=n("moov",o,t,e,i),t=Na.value(),(n=new Uint8Array(t.byteLength+e.byteLength)).set(t),n.set(e,t.byteLength),n}function ha(e){var t=ka,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=le().le()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var r=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,r=e.stream.height||0,e.Ra.byteLength>0)var o=ka("avcC",e.Ra);else{o=ka;for(var i=7,a=[],s=[],l=0,u=0,c=0,f=0;f<e.Cb.length;f++){var d=Sa(e.Cb[f]);switch(31&d[0]){case 7:a.push(d),i+=d.length+2;break;case 8:s.push(d),i+=d.length+2}}for(a.length>0&&(l=a[0][1],c=a[0][2],u=a[0][3]),f=0,(i=new Uint8Array(i))[f++]=1,i[f++]=l,i[f++]=c,i[f++]=u,i[f++]=255,i[f++]=224|a.length,l=0;l<a.length;l++)i[f++]=(65280&a[l].length)>>8,i[f++]=255&a[l].length,i.set(a[l],f),f+=a[l].length;for(i[f++]=s.length,a=0;a<s.length;a++)i[f++]=(65280&s[a].length)>>8,i[f++]=255&s[a].length,i.set(s[a],f),f+=s[a].length;o=o("avcC",i)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(g(wa(n,2)),g(wa(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",s=ga(e),a=new Uint8Array([]),e.encrypted&&(a=va(e.stream,e.codecs),r="encv"),r=ka(r,n,o,s,a)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,o=e.stream.height||0,n=new Uint8Array([]),e.Ra.byteLength>0&&(n=ka("hvcC",e.Ra)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(g(wa(r,2)),g(wa(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="hvc1",s=ga(e),a=new Uint8Array([]),e.encrypted&&(a=va(e.stream,e.codecs),o="encv"),r=ka(o,r,n,s,a));break;case"audio":"mp3"==n?e=ka(".mp3",ya(e)):"ac-3"==n?(n=ka("dac3",e.Ha),r="ac-3",o=new Uint8Array([]),e.encrypted&&(o=va(e.stream,e.codecs),r="enca"),e=ka(r,ya(e),n,o)):"ec-3"==n?(n=ka("dec3",e.Ha),r="ec-3",o=new Uint8Array([]),e.encrypted&&(o=va(e.stream,e.codecs),r="enca"),e=ka(r,ya(e),n,o)):"opus"==n?(n=ka("dOps",e.Ha),r="Opus",o=new Uint8Array([]),e.encrypted&&(o=va(e.stream,e.codecs),r="enca"),e=ka(r,ya(e),n,o)):(e.Ha.byteLength>0?n=ka("esds",e.Ha):(n=ka,r=e.id+1,o=e.stream.channelsCount||2,a=e.stream.audioSamplingRate||44100,l=st("audio",e.codecs.split(",")),s=(u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[a],"mp4a.40.5"!==l&&"mp4a.40.29"!==l||(s=u[2*a]),a=parseInt(l.split(".").pop(),10),n=n("esds",r=new Uint8Array([0,0,0,0,3,25].concat(g(wa(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,a<<3|s>>>1,s<<7|o<<3,6,1,2])))),r="mp4a",o=new Uint8Array([]),e.encrypted&&(o=va(e.stream,e.codecs),r="enca"),e=ka(r,ya(e),n,o)),r=e}return t("stbl",e=ka("stsd",Oa.value(),r),ka("stts",Ma.value()),ka("stsc",Ra.value()),ka("stsz",La.value()),ka("stco",_a.value()))}function ga(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return ka("pasp",e=new Uint8Array([].concat(g(wa(e.Za,4)),g(wa(t,4)))))}function ya(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(g(wa(e.stream.audioSamplingRate||44100,2)),[0,0]))}function va(e,t){var n=ka;t=ka("frma",t=new Uint8Array([].concat(g(wa(Ta(t.split(".")[0]),4)))));var r="cenc",o=e.drmInfos[0];o&&o.encryptionScheme&&(r=o.encryptionScheme),r=ka("schm",r=new Uint8Array([0,0,0,0].concat(g(wa(Ta(r),4)),[0,1,0,0]))),o=ka;for(var i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),a=(e=m(e.drmInfos)).next();!a.done;a=e.next())if((a=a.value)&&a.keyIds&&a.keyIds.size)for(var s=(a=m(a.keyIds)).next();!s.done;s=a.next())i=Sa(s.value);return n("sinf",t,r,o("schi",i=ka("tenc",e=new Uint8Array([0,0,0,0,0,0,1,8]),i)))}function ba(e){for(var t=[],n=(e=m(e.g)).next();!n.done;n=e.next()){n=n.value;var r,o=t.push,i=o.apply,a=ka,s=new Uint8Array([0,0,0,0].concat(g(wa(n.data?n.data.sequenceNumber:0,4))));s=ka("mfhd",s);var l=n.data?n.data.Bb:[],u=new Uint8Array(4+l.length);for(r=0;r<l.length;r++){var c=l[r].flags;u[r+4]=c.hb<<4|c.mb<<2|c.jb}var f=(l=ka("sdtp",u)).length+32+20+8+16+8+8;u=ka,r=ka("tfhd",r=new Uint8Array([0,0,0,58].concat(g(wa(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),c=n.data?n.data.baseMediaDecodeTime:0;var d=Math.floor(c%(Ca+1));c=ka("tfdt",c=new Uint8Array([1,0,0,0].concat(g(wa(Math.floor(c/(Ca+1)),4)),g(wa(d,4)))));var p=f,h=12+16*(d=(f=n.data?n.data.Bb:[]).length),y=new Uint8Array(h);for(p+=8+h,y.set(["video"===n.type?1:0,0,15,1].concat(g(wa(d,4)),g(wa(p,4))),0),p=0;p<d;p++){var v=f[p];h=wa(v.duration,4);var b=wa(v.size,4),x=v.flags;v=wa(v.wb,4),y.set([].concat(g(h),g(b),[x.zb<<2|x.hb,x.mb<<6|x.jb<<4|x.Ab,61440&x.gb,15&x.gb],g(v)),12+16*p)}a=a("moof",s,l=u("traf",r,c,f=ka("trun",y),l)),i.call(o,t,[a,xa(n)])}return rt.apply(Je,g(t))}function xa(e){return e=(e.data?e.data.Bb:[]).map(function(e){return e.data}),ka("mdat",e=rt.apply(Je,g(e)))}function wa(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function Sa(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Ta(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function ka(e){var t=N.apply(1,arguments),n=Aa.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Aa.set(e,n));for(var r=8,o=t.length-1;o>=0;o--)r+=t[o].byteLength;for((o=new Uint8Array(r))[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=255&r,o.set(n,4),n=0,r=8;n<t.length;n++)o.set(t[n],r),r+=t[n].byteLength;return o}H("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});var Ca=4294967295,Aa=new Map,Ea=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),Ia=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),Ma=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Ra=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),_a=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),La=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),Pa=new se(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),Da=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Oa=new se(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),Na=new se(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]);return ka("ftyp",e,new Uint8Array([0,0,0,1]),e,t)}),Ua=new se(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=ka("dref",e),ka("dinf",e)});function Ba(e){function t(e){a.push(e),li(e)}var n,r,o,i,a=[];if((new si).box("moof",t).box("traf",t).T("tfhd",function(e){n=e,o=ra(e.reader,e.flags)}).T("trun",function(e){r=e,i=aa(e.reader,e.version,e.flags)}).parse(e),o&&2!==o.Li){var s=n.start+mi(n)+4+(null!==o.lj?8:0),l=je(e);if(null!==o.Li)l.setUint32(s,2);else{Fa(e,n.start,n.size+4);var u=l.getUint32(n.start+8);l.setUint32(n.start+8,2|u),i&&null!==i.mg&&l.setInt32(r.start+mi(r)+4,i.mg+4),u=e.subarray(0,s),l=e.subarray(s),(e=new Uint8Array(e.byteLength+4)).set(u),u=[];for(var c=3;c>=0;c--)u.push(2>>8*c&255);for(e.set(new Uint8Array(u),s),e.set(l,s+4),l=(s=m(a)).next();!l.done;l=s.next())Fa(e,(l=l.value).start,l.size+4)}}return e}function ja(e,t,n,r,o,i){var a=va(e,r.name),s=t.subarray(r.start,r.start+r.size);for((e=new Uint8Array(r.size+a.byteLength)).set(s,0),je(e).setUint32(4,i),e.set(a,r.size),Fa(e,0,e.byteLength),i=new Uint8Array(t.byteLength+e.byteLength),r=le().cf()?r.start:r.start+r.size,a=t.subarray(r),i.set(t.subarray(0,r)),i.set(e,r),i.set(a,r+e.byteLength),o=(t=m(o)).next();!o.done;o=t.next())Fa(i,(o=o.value).start,o.size+e.byteLength);return e=je(i,n.start),n=mi(n),t=e.getUint32(n),e.setUint32(n,t+1),i}function Fa(e,t,n){0!=(t=(e=je(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function za(e,t,n,r,o,i,a,s){this.P=e,this.startByte=t,this.endByte=n,this.xd=void 0===r?null:r,this.timescale=void 0===o?null:o,this.h=void 0===i?null:i,this.aesKey=void 0===a?null:a,this.g=this.mimeType=this.codecs=null,this.encrypted=void 0!==s&&s}function Va(e,t){return e===t||(e&&t?e.Jc()==t.Jc()&&e.Gc()==t.Gc()&&ne(e.P().sort(),t.P().sort())&&Oe(e.Yb(),t.Yb()):e==t)}function Ha(e,t,n,r,o,i,a,s,l,u,c,f,d,p,h,g){for(u=void 0===u?[]:u,p=void 0===p?qa:p,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=r,this.endByte=o,this.aa=i,this.timestampOffset=a,this.appendWindowStart=s,this.appendWindowEnd=l,this.g=u,this.tilesLayout=void 0===c?"":c,this.B=void 0===f?null:f,this.h=void 0===d?null:d,this.status=p,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=void 0===h?null:h,this.thumbnailSprite=null,this.i=-1,this.u=void 0!==g&&g,this.ce=this.Xc=!1,t=(e=m(this.g)).next();!t.done;t=e.next())t.value.ri();this.u&&this.g.length&&this.g[this.g.length-1].pi(),this.o=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}function Ga(e,t){e.aa=t;for(var n=(e=m(e.g)).next();!n.done;n=e.next())Ga(n.value,t)}za.prototype.Jc=function(){return this.startByte},za.prototype.Gc=function(){return this.endByte},za.prototype.me=function(e){this.h=e},za.prototype.Yb=function(){return this.h},H("shaka.media.InitSegmentReference",za),za.prototype.getEndByte=za.prototype.Gc,za.prototype.getStartByte=za.prototype.Jc,(o=Ha.prototype).P=function(){return this.C()},o.getStartTime=function(){return this.startTime},o.Fj=function(){return this.endTime},o.Jc=function(){return this.startByte},o.Gc=function(){return this.endByte},o.bk=function(){return this.tilesLayout},o.$j=function(){return this.B},o.Kc=function(){return this.status},o.yk=function(){this.status=Wa},o.Rg=function(){this.preload=!0},o.isPreload=function(){return this.preload},o.wd=function(){this.l=!1},o.lk=function(){return this.l},o.ri=function(){this.Xc=!0},o.pk=function(){return this.Xc},o.pi=function(){this.ce=!0},o.nk=function(){return this.ce},o.oi=function(){this.m=!0},o.hk=function(){return this.m},o.If=function(e){this.thumbnailSprite=e},o.Yj=function(){return this.thumbnailSprite},o.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},o.Ah=function(e){null==this.h?X("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},o.me=function(e,t){this.o=e,this.F=void 0!==t&&t},o.Yb=function(e){var t=this.o;return(void 0===e||e)&&this.F&&(this.o=null),t},H("shaka.media.SegmentReference",Ha),Ha.prototype.getSegmentData=Ha.prototype.Yb,Ha.prototype.setSegmentData=Ha.prototype.me,Ha.prototype.syncAgainst=Ha.prototype.Ah,Ha.prototype.offset=Ha.prototype.offset,Ha.prototype.getThumbnailSprite=Ha.prototype.Yj,Ha.prototype.setThumbnailSprite=Ha.prototype.If,Ha.prototype.hasByterangeOptimization=Ha.prototype.hk,Ha.prototype.markAsByterangeOptimization=Ha.prototype.oi,Ha.prototype.isLastPartial=Ha.prototype.nk,Ha.prototype.markAsLastPartial=Ha.prototype.pi,Ha.prototype.isPartial=Ha.prototype.pk,Ha.prototype.markAsPartial=Ha.prototype.ri,Ha.prototype.isIndependent=Ha.prototype.lk,Ha.prototype.markAsNonIndependent=Ha.prototype.wd,Ha.prototype.isPreload=Ha.prototype.isPreload,Ha.prototype.markAsPreload=Ha.prototype.Rg,Ha.prototype.markAsUnavailable=Ha.prototype.yk,Ha.prototype.getStatus=Ha.prototype.Kc,Ha.prototype.getTileDuration=Ha.prototype.$j,Ha.prototype.getTilesLayout=Ha.prototype.bk,Ha.prototype.getEndByte=Ha.prototype.Gc,Ha.prototype.getStartByte=Ha.prototype.Jc,Ha.prototype.getEndTime=Ha.prototype.Fj,Ha.prototype.getStartTime=Ha.prototype.getStartTime,Ha.prototype.getUris=Ha.prototype.P;var qa=0,Wa=1;function Ka(e){return 1==e.length&&e.end(0)-e.start(0)<1e-4}function Xa(e){return!e||Ka(e)?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null}function $a(e){return!e||Ka(e)?null:e.length?e.end(e.length-1):null}function Ya(e,t){return!(!e||!e.length||Ka(e)||t>e.end(e.length-1))&&t>=e.start(0)}function Ja(e,t){if(!e||!e.length||Ka(e))return 0;for(var n=0,r=(e=m(Qa(e))).next();!r.done;r=e.next()){var o=r.value;r=o.start,(o=o.end)>t&&(n+=o-Math.max(r,t))}return n}function Qa(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Za(){}function es(e,t){var n=document.createElement("source");return n.src=e,n.type=void 0===t?"":t,n}function ts(e){for(var t=!1,n=e.getElementsByTagName("source"),r=n.length-1;r>=0;--r)e.removeChild(n[r]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function ns(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function rs(){return is||(os||(os=new Tr(function(){is=null})),(is=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(is=document.createElement("video")),os.ka(1),is)}Ha.Status={rl:qa,Am:Wa,Wl:2},H("shaka.util.Dom",Za),Za.removeAllChildren=ns,Za.clearSourceFromVideo=ts;var os=null,is=null;
/*
      		 @license
      		 Shaka Player
      		 Copyright 2022 Google LLC
      		 SPDX-License-Identifier: Apache-2.0
      		*/function as(){}function ss(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function ls(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function us(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function cs(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(e.size<2||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=He(Ue(e.data,1,n)),o=e.data[2+n],i=e.data.subarray(3+n).indexOf(0);if(-1===i)return null;var a,s=He(Ue(e.data,3+n,i));return a="--\x3e"===r?He(Ue(e.data,4+n+i)):Ne(e.data.subarray(4+n+i)),t.mimeType=r,t.pictureType=o,t.description=s,t.data=a,t}return"TXXX"===e.type||"WXXX"===e.type?e.size<2||3!==e.data[0]||-1===(r=e.data.subarray(1).indexOf(0))?null:(n=He(Ue(e.data,1,r)),e=He(Ue(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?e.size<2||-1===(n=e.data.indexOf(0))?null:(n=He(Ue(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=Ne(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?e.size<2||3!==e.data[0]?null:(e=He(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=He(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ne(e.data),t):null}function fs(e){for(var t=0,n=[];ss(e,t);){var r=us(e,t+6);for(e[t+5]>>6&1&&(t+=10),r=(t+=10)+r;t+10<r;){var o=e.subarray(t),i=us(o,4);(i=cs(o={type:String.fromCharCode(o[0],o[1],o[2],o[3]),size:i,data:o.subarray(10,10+i)}))&&n.push(i),t+=o.size+10}ls(e,t)&&(t+=10)}return n}function ds(e,t){for(var n=t=void 0===t?0:t,r=0;ss(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=us(e,t+6),ls(e,t+10)&&(r+=10),t+=r;return r>0?e.subarray(n,n+r):new Uint8Array([])}function ps(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function hs(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)r>=2&&3==e[r]&&0==e[r-1]&&0==e[r-2]||(t[n]=e[r],n++);this.j=Ue(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function ms(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);0!==r&&(n.set(e.j.subarray(t,t+r)),e.h=new oi(n,0).U(),e.g=8*r,e.i-=r)}function gs(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,ms(e)}e.h<<=t,e.g-=t}function ys(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&ms(e),(n=t-n)>0?r<<n|ys(e,n):r}function vs(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return ms(e),t+vs(e)}function bs(e){gs(e,1+vs(e))}function xs(e){return ys(e,vs(e)+1)-1}function ws(e){return 1&(e=xs(e))?1+e>>>1:-1*(e>>>1)}function Ss(e){return 1===ys(e,1)}function Ts(e){return ys(e,8)}function ks(e,t){for(var n=8,r=8,o=0;o<t;o++)0!==r&&(r=(n+(r=ws(e))+256)%256),n=0===r?n:r}function Cs(e){return Ts(e),xs(e),xs(e)}function As(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}function Es(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(192&r){var o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.u&&(e.u=o),n.pts=Ms(o,e.u),e.u=n.pts,n.dts=n.pts,64&r&&(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.o&&(e.o=r),n.dts=n.pts!=o?Ms(r,e.o):r),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function Is(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function Ms(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e}function Rs(e){return!(_s(e)<0)}function _s(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}H("shaka.util.Id3Utils",as),as.getID3Data=ds,as.getID3Frames=fs,H("shaka.util.ExpGolomb",hs),(o=As.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},o.Gf=function(e){null!=this.B&&this.B!=e&&(this.o=this.u=null),this.B=e},o.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,_s(e)),n=e.length-(e.length+t)%188,r=!1,o=t;o<n;o+=188)if(71==e[o]){var i=!!(64&e[o+1]),a=((31&e[o+1])<<8)+e[o+2];if((48&e[o+3])>>4>1){var s=o+5+e[o+4];if(s==o+188)continue}else s=o+4;switch(a){case 0:i&&(s+=e[s]+1),this.I=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.I:i&&(s+=e[s]+1),a={audio:-1,video:-1,$e:-1,audioCodec:"",videoCodec:""};var l=s+3+((15&(i=e)[s+1])<<8|i[s+2])-4;for(s+=12+((15&i[s+10])<<8|i[s+11]);s<l;){var u=(31&i[s+1])<<8|i[s+2],c=(15&i[s+3])<<8|i[s+4];switch(i[s]){case 6:if(c>0)for(var f=s+5,d=c;d>2;){var p=i[f+1]+2;switch(i[f]){case 5:var h=Xe(i.subarray(f+2,f+p));-1==a.audio&&"Opus"===h?(a.audio=u,a.audioCodec="opus"):-1==a.video&&"AV01"===h&&(a.video=u,a.videoCodec="av1");break;case 106:-1==a.audio&&(a.audio=u,a.audioCodec="ac3");break;case 122:-1==a.audio&&(a.audio=u,a.audioCodec="ec3");break;case 124:-1==a.audio&&(a.audio=u,a.audioCodec="aac");break;case 127:"opus"==a.audioCodec&&(h=null,128===i[f+2]&&(h=i[f+3]),null!=h&&(this.H={channelCount:15&h?15&h:2,oj:h,sampleRate:48e3}))}f+=p,d-=p}break;case 15:-1==a.audio&&(a.audio=u,a.audioCodec="aac");break;case 17:-1==a.audio&&(a.audio=u,a.audioCodec="aac-loas");break;case 21:-1==a.$e&&(a.$e=u);break;case 27:-1==a.video&&(a.video=u,a.videoCodec="avc");break;case 3:case 4:-1==a.audio&&(a.audio=u,a.audioCodec="mp3");break;case 36:-1==a.video&&(a.video=u,a.videoCodec="hvc");break;case 129:-1==a.audio&&(a.audio=u,a.audioCodec="ac3");break;case 132:case 135:-1==a.audio&&(a.audio=u,a.audioCodec="ec3")}s+=c+5}-1!=(i=a).video&&(this.K=i.video,this.m=i.videoCodec),-1!=i.audio&&(this.F=i.audio,this.C=i.audioCodec),-1!=i.$e&&(this.G=i.$e),r&&!this.J&&(r=!1,o=t-188),this.J=!0;break;case this.K:s=e.subarray(s,o+188),i?this.j.push([s]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(s);break;case this.F:s=e.subarray(s,o+188),i?this.i.push([s]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(s);break;case this.G:s=e.subarray(s,o+188),i?this.l.push([s]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(s);break;default:r=!0}}return this},o.Fk=function(e){return pe("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Xg(e,{fe:null,state:null})},o.Xg=function(e,t){var n=e.pts?e.pts/9e4:null,r=(e=e.data).byteLength,o=1;"hvc"==this.m&&(o=2);var i=t.state||0,a=i,s=0,l=[],u=-1,c=0;for(-1==i&&(u=0,c="hvc"==this.m?e[0]>>1&63:31&e[0],i=0,s=1);s<r;){var f=e[s++];i?1===i?i=f?0:2:f?1==f?(f=s-i-1,u>=0?l.push({data:e.subarray(u+o,f),fullData:e.subarray(u,f),type:c,time:n,state:null}):(i=l.length?l[l.length-1]:t.fe)&&(a&&s<=4-a&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-a),i.fullData=i.fullData.subarray(0,i.fullData.byteLength-a)),f>0&&(f=e.subarray(0,f),i.data=rt(i.data,f),i.fullData=rt(i.fullData,f),i.state=0)),s<r?(c="hvc"==this.m?e[s]>>1&63:31&e[s],u=s,i=0):i=-1):i=0:i=3:i=f?0:1}return u>=0&&i>=0&&l.push({data:e.subarray(u+o,r),fullData:e.subarray(u,r),type:c,time:n,state:i}),!l.length&&t.fe&&(n=l.length?l[l.length-1]:t.fe)&&(n.data=rt(n.data,e),n.fullData=rt(n.fullData,e)),t.state=i,l},o.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())(n=Es(this,n=rt.apply(Je,g(n.value))))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:fs(n.data),dts:n.dts,pts:n.pts});return e},o.xb=function(){if(this.i.length&&!this.h.length)for(var e=m(this.i),t=e.next();!t.done;t=e.next()){var n=rt.apply(Je,g(t.value)),r=Es(this,n);t=this.h.length?this.h[this.h.length-1]:null,r&&null!=r.pts&&null!=r.dts&&(!t||t.pts!=r.pts&&t.dts!=r.dts)?this.h.push(r):this.h.length&&(n=r?r.data:n)&&((t=this.h.pop()).data=rt(t.data,n),this.h.push(t))}return this.h},o.ud=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=m(this.j),n=t.next();!n.done;n=t.next()){var r=rt.apply(Je,g(n.value)),o=Es(this,r);n=this.g.length?this.g[this.g.length-1]:null,o&&null!=o.pts&&null!=o.dts&&(!n||n.pts!=o.pts&&n.dts!=o.dts)?this.g.push(o):this.g.length&&(r=o?o.data:r)&&((n=this.g.pop()).data=rt(n.data,r),this.g.push(n))}if(e){for(t={fe:null,state:null},n=[],o=(r=m(this.g)).next();!o.done;o=r.next())(o=o.value).nalus=this.Xg(o,t),o.nalus.length&&(n.push(o),t.fe=o.nalus[o.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},o.getStartTime=function(e){if("audio"==e){e=null;var t=this.xb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,(t=this.ud(!1)).length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},o.Td=function(){return{audio:this.C,video:this.m}},o.Ze=function(){for(var e=[],t=m(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,g(n.value.nalus));return e},o.ek=function(){pe("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Kg();return{height:e.height,width:e.width}},o.Kg=function(){return"hvc"==this.m?function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Ze();if(!n.length)return t;if(!(n=n.find(function(e){return 33==e.type})))return t;var r=new hs(n.fullData,!0);Ts(r),Ts(r),ys(r,4);var o=ys(r,3);Ss(r);var i=ys(r,2),a=ys(r,1),s=ys(r,5),l=ys(r,32);n=Ts(r);for(var u=Ts(r),c=Ts(r),f=Ts(r),d=Ts(r),p=Ts(r),h=Ts(r),m=[],g=[],y=0;y<o;y++)m.push(Ss(r)),g.push(Ss(r));if(o>0)for(y=o;y<8;y++)ys(r,2);for(y=0;y<o;y++)m[y]&&ys(r,88),g[y]&&Ts(r);xs(r),3==(o=xs(r))&&ys(r,1),m=xs(r),g=xs(r);var v=y=0,b=0,x=0;return Ss(r)&&(y+=xs(r),v+=xs(r),b+=xs(r),x+=xs(r)),t.width=String(m-(y+v)*(1===o||2===o?2:1)),t.height=String(g-(b+x)*(1===o?2:1)),r=function(e){for(var t=0,n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}(l),a=1==a?"H":"L",i="hvc1."+["","A","B","C"][i]+s,i+="."+r.toString(16).toUpperCase(),i+="."+a+h,p&&(i+="."+p.toString(16).toUpperCase()),d&&(i+="."+d.toString(16).toUpperCase()),f&&(i+="."+f.toString(16).toUpperCase()),c&&(i+="."+c.toString(16).toUpperCase()),u&&(i+="."+u.toString(16).toUpperCase()),n&&(i+="."+n.toString(16).toUpperCase()),t.codec=i,t.frameRate=Is(e),t}(this):function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Ze();if(!n.length)return t;if(!(n=n.find(function(e){return 7==e.type})))return t;var r=Ts(n=new hs(n.data)),o=Ts(n),i=Ts(n);if(bs(n),Ls.includes(r)){var a=xs(n);if(3===a&&gs(n,1),bs(n),bs(n),gs(n,1),Ss(n)){a=3!==a?8:12;for(var s=0;s<a;s++)Ss(n)&&ks(n,s<6?16:64)}}if(bs(n),0===(a=xs(n)))xs(n);else if(1===a)for(gs(n,1),bs(n),bs(n),a=xs(n),s=0;s<a;s++)bs(n);bs(n),gs(n,1),a=xs(n),s=xs(n);var l=ys(n,1);0===l&&gs(n,1),gs(n,1);var u=0,c=0,f=0,d=0;return Ss(n)&&(u=xs(n),c=xs(n),f=xs(n),d=xs(n)),t.height=String((2-l)*(s+1)*16-2*f-2*d),t.width=String(16*(a+1)-2*u-2*c),t.codec="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2),t.frameRate=Is(e),t}(this)},H("shaka.util.TsParser",As),As.syncOffset=_s,As.probe=Rs,As.prototype.getVideoInfo=As.prototype.Kg,As.prototype.getVideoResolution=As.prototype.ek,As.prototype.getVideoNalus=As.prototype.Ze,As.prototype.getCodecs=As.prototype.Td,As.prototype.getStartTime=As.prototype.getStartTime,As.prototype.getVideoData=As.prototype.ud,As.prototype.getAudioData=As.prototype.xb,As.prototype.getMetadata=As.prototype.getMetadata,As.prototype.parseNalus=As.prototype.Xg,As.prototype.parseAvcNalus=As.prototype.Fk,As.prototype.parse=As.prototype.parse,As.prototype.setDiscontinuitySequence=As.prototype.Gf,As.prototype.clearData=As.prototype.clearData,As.Timescale=9e4;var Ls=[100,110,122,244,44,83,86,118,128,138,139,134];function Ps(e,t,n,r,o){var i=this;this.g=e,this.O=n,this.B=r,this.ba=t,this.l=new Map,this.F=new Map,this.Sa=new Map,this.h=null,this.Ga=!1,this.H=o||null,this.o=new Map,this.u=new oe,this.j=new Map,this.K=null,this.M=new Mo,this.Da="",this.ob=!1,this.ya=!0,this.N=!1,this.C=this.R=null,this.i=Ds(this,this.M),this.ab=this.G=!1,this.J=new Zo(function(){return function(e){var t,n,r,o,i,a,s,l,u,c,f,d,p;return O(function(h){if(1==h.g){for(t=[],n=m(e.o),r=n.next();!r.done;r=n.next())for(o=r.value,i=m(o),a=i.next().value,s=i.next().value,l=s[0],u=a,e.o.set(u,s.slice(0,1)),l&&t.push(l.p.catch(Cr)),c=m(s.slice(1)),f=c.next();!f.done;f=c.next())f.value.p.reject(new ze(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),S(h,Promise.all(t),2)}for(d=m(e.j.values()),p=d.next();!p.done;p=d.next())p.value.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.C=null,e.B=null,e.i=null,e.h=null,e.ba=null,e.l.clear(),e.Sa.clear(),e.j.clear(),e.K=null,e.o.clear(),e.H=null,e.$.clear(),e.O=null,k(h)})}(i)}),this.I=!1,this.X="UNKNOWN",this.ib=this.kb=!1,this.Ta=new Mo,this.m=!1,this.xa=null,this.$=new Map,this.oa=this.S=this.wa=this.V=null,this.ma=new Mo,this.g.remote&&(this.N="disconnected"!=this.g.remote.state,this.u.D(this.g.remote,"connect",function(){i.N="disconnected"!=i.g.remote.state}),this.u.D(this.g.remote,"connecting",function(){i.N="disconnected"!=i.g.remote.state}),this.u.D(this.g.remote,"disconnect",function(){i.N="disconnected"!=i.g.remote.state}))}function Ds(t,n){if(t.ya=!0,e.ManagedMediaSource){t.C||(t.g.disableRemotePlayback=!0);var r=new ManagedMediaSource;t.u.D(r,"startstreaming",function(){t.ya=!0}),t.u.D(r,"endstreaming",function(){t.ya=!1})}else r=new MediaSource;return t.u.Aa(r,"sourceopen",function(){URL.revokeObjectURL(t.Da),n.resolve()}),t.u.Aa(t.g,"playing",function(){t.ob=!0}),t.Da=il(r),t.B.useSourceElements?(t.g.removeAttribute("src"),t.R&&t.g.removeChild(t.R),t.C&&t.g.removeChild(t.C),t.R=es(t.Da),t.g.appendChild(t.R),t.C&&t.g.appendChild(t.C),t.g.load()):t.g.src=t.Da,r}function Os(e,t,n,o){"audio"==t&&o&&(o=Kr(o,n.mimeType));var i=or(n.mimeType,o);if(t==ct)Us(e,i,e.I,n.external);else{var a=e.B.forceTransmux;(!vt(i)||!e.I&&hr.includes(i))&&(a=!0);var s=ir(n.mimeType,o);if(a){if(a=lt("audio",(o||"").split(",")),o=lt("video",(o||"").split(",")),a&&o)return e.m=!0,Os(e,"audio",n,a),void Os(e,"video",n,o);(o=Jn(s))&&(i=o(),e.j.set(t,i),i=i.convertCodecs(t,s))}s=i+e.B.addExtraFeaturesToSourceBuffer(i),ei(e.J);try{var l=e.i.addSourceBuffer(s)}catch(r){throw new ze(2,3,3015,r,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.I&&(l.mode=al),e.u.D(l,"error",function(){var n=e.o.get(t)[0];n.p.reject(new ze(2,3,3014,e.g.error?e.g.error.code:0,n.uri))}),e.u.D(l,"updateend",function(){return Js(e,t)}),e.l.set(t,l),e.F.set(t,i),e.Sa.set(t,!!n.drmInfos.length)}}function Ns(e){return e.ya&&!e.N&&!e.G}function Us(e,t,n,r){e.h||(e.h=new mr(e.ba),e.h&&(e.h.B=e.B.modifyCueCallback));var o=e.h;r=r||e.Ga,e=e.X,"application/cea-608"==t||"application/cea-708"==t?o.i=null:(o.i=wr.get(t)(),o.i.setSequenceMode?o.i.setSequenceMode(n):pe("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),o.i.setManifestType?o.i.setManifestType(e):pe("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),o.C=r)}function Bs(e){return!(e.G||e.i&&"ended"!=e.i.readyState)}function js(e){return!(e.G||e.i&&"closed"!=e.i.readyState)}function Fs(e,t){return e.l.size?t==ct?e.h.g:Xa(Vs(e,t)):null}function zs(e,t){return e.l.size?t==ct?e.h.h:$a(Vs(e,t)):null}function Vs(e,t){if(e.G||e.N)return null;try{return e.l.get(t).buffered}catch(n){return e.l.has(t),null}}function Hs(e,t,n,r,o,i,a,s,l,u,c){var f,d,p,h,y,v,b,x,w,T,C,A,E,I,M,R,_,L,P;return a=void 0!==a&&a,s=void 0!==s&&s,l=void 0!==l&&l,u=void 0!==u&&u,O(function(D){switch(D.g){case 1:if(t!=(f=ft).Na){D.A(2);break}if("HLS"!=e.X){D.A(3);break}return S(D,e.Ta,4);case 4:d=D.h,e.h.u=d;case 3:return S(D,function(e,t,n,r,o){var i,a,s,l,u,c,f;return O(function(d){if(1==d.g)return S(d,Promise.resolve(),2);if(!e.i||!e.j)return d.return();if(null==n||null==r)return e.i.parseInit(Ue(t)),d.return();for(i=e.C?n:e.u,a={periodStart:e.u,segmentStart:n,segmentEnd:r,vttOffset:i},s=e.i.parseMedia(Ue(t),a,o,[]),l=m(s),u=l.next();!u.done;u=l.next())c=u.value,e.B(c,o||null,a);f=s.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(f),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),k(d)})}(e.h,n,r?r.startTime:null,r?r.endTime:null,r?r.P()[0]:null),5);case 5:return D.return();case 2:if(u||!e.m){D.A(6);break}return S(D,Hs(e,f.ia,n,r,o,i,a,s,l,!0),7);case 7:return S(D,Hs(e,f.Ca,n,r,o,i,a,s,l,!0),8);case 8:return D.return();case 6:if(!e.l.has(t))return D.return();if(p=e.l.get(t).timestampOffset,h=e.F.get(t),e.j.has(t)&&(h=e.j.get(t).getOriginalMimeType()),r&&(y=function(e,t,n,r,o,i){var a=null,s=[],l=Ue(n);if(hr.includes(i))(t=fs(l)).length&&r&&((n=t.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&"number"==typeof n.data&&(a=Math.round(n.data)/1e3),e.O.onMetadata([{cueTime:r.startTime,data:l,frames:t,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(i.includes("/mp4")&&r&&r.aa&&r.aa.timescale){var u=r.aa.timescale;if(!isNaN(u)){var c=null!=o.emsgSchemeIdUris&&o.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes,f=0,d=!1;l=new si,c&&l.T("emsg",function(t){var n=o.emsgSchemeIdUris;if(0===t.version)var i=t.reader.Yc(),a=t.reader.Yc(),s=t.reader.U(),l=t.reader.U(),u=t.reader.U(),c=t.reader.U(),f=r.startTime+l/s;else s=t.reader.U(),l=(f=t.reader.Dd()/s+r.timestampOffset)-r.startTime,u=t.reader.U(),c=t.reader.U(),i=t.reader.Yc(),a=t.reader.Yc();t=t.reader.Tb(t.reader.getLength()-t.reader.Pa()),(n&&n.includes(i)||e.B.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==i?e.O.Ek():((n=new Uint8Array(t.byteLength)).set(t),t=f+u/s,e.O.Ck({startTime:f,endTime:t,schemeIdUri:i,value:a,timescale:s,presentationTimeDelta:l,eventDuration:u,id:c,messageData:n}),("https://aomedia.org/emsg/ID3"==i||"https://developer.apple.com/streaming/emsg-id3"==i)&&(s=fs(n)).length&&e.O.onMetadata([{cueTime:f,data:n,frames:s,dts:f,pts:f}],0,t)))}),l.T("prft",function(t){var n=t.reader,r=t.version;n.U(),t=1e3*(t=n.U())+n.U()/4294967296*1e3,0===r?n=n.U():(r=n.U(),n=4294967296*r+(n=n.U())),t=ps(t),n=new No("prft",n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/u*1e3)})),e.O.onEvent(n)}).box("moof",li).box("traf",li).T("tfdt",function(e){d||(f=oa(e.reader,e.version).baseMediaDecodeTime/u,d=!0,c||e.parser.stop())}).parse(n,!0),d&&0==r.timestampOffset&&(a=f)}}else i.includes("/mp4")||i.includes("/webm")||!Rs(l)||(e.$.has(t)||e.$.set(t,new As),(s=e.$.get(t)).clearData(),s.Gf(r.i),s.parse(l),null!=(l=s.getStartTime(t))&&(a=l),s=s.getMetadata());return{timestamp:a,metadata:s}}(e,t,n,r,o,h),v=y.timestamp,b=y.metadata,null!=v&&(null==e.V&&t==f.Ca&&(e.V=v,e.wa=r.startTime,null!=e.S&&(x=0,e.wa==e.oa&&(x=e.V-e.S),e.ma.resolve(x))),null==e.S&&t==f.ia&&(e.S=v,e.oa=r.startTime,null!=e.V&&(w=0,e.wa==e.oa&&(w=e.V-e.S),e.ma.resolve(w))),T=v,C=hr,!e.I&&C.includes(e.F.get(t))&&(T=0),A=r.startTime-T,(Math.abs(p-A)>=.001||a||s)&&(!l||A>0||!p)&&(p=A,e.ib&&(Qs(e,t,function(){return Xs(e,t)},null),Qs(e,t,function(){return $s(e,t,p)},null))),(t==f.Ca||!e.l.has(f.Ca))&&e.Ta.resolve(p)),b.length)&&e.O.onMetadata(b,p,r?r.endTime:null),i&&t==f.Ca&&(e.h||Us(e,"application/cea-608",e.I,!1),e.K||(E=h.split(";",1)[0],e.K=new Ct(E)),r?(I=e.K.xf(n)).length&&function(e,t,n,r,o){for(var i=n+" "+r,a=new Map,s=(t=m(t)).next();!s.done;s=t.next()){var l=s.value;s=l.stream,l=l.cue,a.has(s)||a.set(s,new Map),a.get(s).has(i)||a.get(s).set(i,[]),xr(e,l,o),l.startTime>=e.l&&l.startTime<e.m&&(a.get(s).get(i).push(l),s==e.F&&e.j.append([l]))}for(i=(o=m(a.keys())).next();!i.done;i=o.next())for(i=i.value,e.o.has(i)||e.o.set(i,new Map),s=(t=m(a.get(i).keys())).next();!s.done;s=t.next())s=s.value,l=a.get(i).get(s),e.o.get(i).set(s,l);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}(e.h,I,r.startTime,r.endTime,p):e.K.init(n,s,c)),!e.j.has(t)){D.A(9);break}return S(D,e.j.get(t).transmux(n,o,r,e.i.duration,t),10);case 10:M=D.h,ArrayBuffer.isView(M)?n=M:(null!=(R=M).init&&(_=R.init,Qs(e,t,function(){e.H&&mt(e.H,_,p,o),e.l.get(t).appendBuffer(_)},r?r.P()[0]:null)),n=R.data);case 9:if(n=function(e,t,n,r,o){if("mp4"!=sr(e.F.get(o)))return n;var i=null===r,a=e.Sa.get(o),s=e.O.Kj(),l=!1;r&&r.aa&&(l=r.aa.encrypted),r=r?r.P()[0]:null;var u=le();return e.B.correctEc3Enca&&i&&"audio"===o&&(n=function(e){e=Ue(e);var t=null;return(new si).box("moov",li).box("trak",li).box("mdia",li).box("minf",li).box("stbl",li).T("stsd",ui).box("enca",function(e){return t=e.reader.h,fi(e)}).box("sinf",li).box("frma",function(e){e.parser.stop(),"ec-3"===la(e.reader).codec&&t&&2!==t.getUint16(16)&&t.setUint16(16,2)}).parse(e),e}(n)),e.B.insertFakeEncryptionInInit&&a&&u.Ed(s,o)&&(i?n=function(e,t,n){function r(e){f.push({box:e,wi:1701733217})}function o(e){f.push({box:e,wi:1701733238})}function i(e){u=!0,e.parser.stop()}function a(e){c.push(e),li(e)}var s,l=t=Ue(t),u=!1,c=[],f=[];if((new si).box("moov",a).box("trak",a).box("mdia",a).box("minf",a).box("stbl",a).T("stsd",function(e){s=e,c.push(e),ui(e)}).T("encv",i).T("enca",i).T("dvav",o).T("dva1",o).T("dvh1",o).T("dvhe",o).T("dvc1",o).T("dvi1",o).T("hev1",o).T("hvc1",o).T("avc1",o).T("avc3",o).T("ac-3",r).T("ec-3",r).T("ac-4",r).T("Opus",r).T("fLaC",r).T("mp4a",r).parse(t),u)return t;if(0==f.length||!s)throw nt(t),new ze(2,3,3019,n);f.reverse();for(var d=(n=m(f)).next();!d.done;d=n.next())d=d.value,l=ja(e,l,s,d.box,c,d.wi);return le().Gi()?((e=new Uint8Array(t.byteLength+l.byteLength)).set(l),e.set(t,l.byteLength),e):l}(t,n,r):!l&&u.Hi(o)&&(n=function(e){e=Ue(e);var t=[];(new si).box("mdat",function(e){t.push(e)}).parse(e);for(var n=[],r=0;r<t.length;r++){var o=t[r-1],i=t[r];n.push(Ba(e.subarray(o?o.start+o.size:0,i.start+i.size)))}return rt.apply(Je,g(n))}(n))),i&&u.le()&&(n=function(e){function t(e){r.push({start:e.start,size:e.size}),li(e)}var n=Ue(e),r=[];return(new si).box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(e){r.push({start:e.start,size:e.size});for(var t=je(n,e.start),o=0;o<e.size-3;o++){var i=t.getUint32(o);1633889587==i?t.setUint32(o,1700998451):1684103987==i&&t.setUint32(o,1684366131)}}).parse(n),n}(n)),n}(e,o,n,r,t),!r||!e.I||t==f.Na){D.A(11);break}if(!a&&!s){D.A(11);break}if(L=r.startTime,"HLS"!=e.X||e.m||t!=f.ia||!e.l.has(f.Ca)){D.A(13);break}return S(D,e.ma,14);case 14:P=D.h,Math.abs(P)>.15&&(L-=P);case 13:Qs(e,t,function(){return Xs(e,t)},null),Qs(e,t,function(){return $s(e,t,L)},null);case 11:return S(D,Qs(e,t,function(){var r=n;e.H&&mt(e.H,r,p,o),e.l.get(t).appendBuffer(r)},r?r.P()[0]:null),15);case 15:k(D)}})}function Gs(e,t){var n;return O(function(r){return 1==r.g?t==(n=ft).Na?e.h?S(r,e.h.remove(0,1/0),0):r.return():S(r,Qs(e,t,function(){return Ks(e,t,0,e.i.duration)},null),4):e.m?S(r,Qs(e,n.ia,function(){return Ks(e,n.ia,0,e.i.duration)},null),0):r.A(0)})}function qs(e,t,n,r,o,i,a,s,l){var u,c;return O(function(f){return 1==f.g?t==(u=ft).Na?(i||(e.h.u=n),function(e,t,n){e.l=t,e.m=n}(e.h,r,o),f.return()):(c=[],S(f,function(e,t,n,r,o){var i,a,s,l,u,c;return O(function(f){return 1==f.g?(i=ft,a=ol(e,t,n,r,o),s=a.type,l=a.dc,u=a.qf,(c=o.get(i.ia))&&(e.m=c.isAudioMuxedInVideo),s==sl?(e.j.has(t)&&!l?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&l?e.j.set(t,l):l&&(e.j.has(t)&&e.j.get(t).transmux!==l.transmux?(e.j.get(t).destroy(),e.j.set(t,l)):l.destroy()),f.return(!1)):s==ul?S(f,function(e,t,n,r){return Qs(e,t,function(){if(t!==ct){if(e.F.get(t),bt()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),r&&e.j.set(t,r);var o=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(o),e.F.set(t,n)}Js(e,t)}},null)}(e,t,u,l),3):s!=ll?f.A(3):(l&&l.destroy(),S(f,nl(e,o),3))):f.return(!0)})}(e,t,a,s,l),2)):(f.h||(c.push(Qs(e,t,function(){return Xs(e,t)},null)),e.m&&c.push(Qs(e,u.ia,function(){return Xs(e,u.ia)},null))),i||(c.push(Qs(e,t,function(){return $s(e,t,n)},null)),e.m&&c.push(Qs(e,u.ia,function(){return $s(e,u.ia,n)},null))),0==r&&o==1/0||(c.push(Qs(e,t,function(){return Ys(e,t,r,o)},null)),e.m&&c.push(Qs(e,u.ia,function(){return Ys(e,u.ia,r,o)},null))),c.length?S(f,Promise.all(c),0):f.A(0))})}function Ws(e){O(function(t){return e.J.g||e.g.error||e.N||e.G||Bs(e)||js(e)?t.return():S(t,Zs(e,function(){Bs(e)||js(e)||e.i.clearLiveSeekableRange()}),0)})}function Ks(e,t,n,r){r<=n?Js(e,t):e.l.get(t).remove(n,r)}function Xs(e,t){var n=e.l.get(t),r=n.appendWindowStart,o=n.appendWindowEnd;n.abort(),n.appendWindowStart=r,n.appendWindowEnd=o,Js(e,t)}function $s(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,Js(e,t)}function Ys(e,t,n,r){var o=e.l.get(t);o.appendWindowEnd===r&&o.appendWindowStart===n||(o.appendWindowStart=0,o.appendWindowEnd=r,o.appendWindowStart=n),Js(e,t)}function Js(e,t){if(e.G||e.J.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),el(e,t))}function Qs(e,t,n,r){return ei(e.J),n={start:n,p:new Mo,uri:r},e.o.get(t).push(n),1==e.o.get(t).length&&tl(e,t),n.p}function Zs(e,t){var n,r,o,i,a,s,l,u,c,f,d;return O(function(p){switch(p.g){case 1:for(ei(e.J),n=[],r=Array.from(e.l.keys()),o=m(r),i=o.next(),a={};!i.done;a={ready:void 0},i=o.next())s=i.value,a.ready=new Mo,l={start:function(e){return function(){return e.ready.resolve()}}(a),p:a.ready,uri:null},(u=e.o.get(s)).push(l),n.push(a.ready),1==u.length&&l.start();return C(p,2),S(p,Promise.all(n),4);case 4:E(p,3);break;case 2:throw I(p);case 3:return C(p,5,6),S(p,t(),6);case 6:for(M(p),c=m(r),f=c.next();!f.done;f=c.next())d=f.value,el(e,d);R(p,0);break;case 5:throw new ze(2,3,3015,I(p),e.g.error||"No error in the media element",null)}})}function el(e,t){e.o.get(t).shift(),tl(e,t)}function tl(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new ze(2,3,3017,t)):Ns(e)?n.p.reject(new ze(2,3,3015,r,e.g.error||"No error in the media element",n.uri)):n.p.reject(new ze(2,3,3024,t)),el(e,t)}}function nl(e,t){return Zs(e,function(){return function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w;return O(function(T){if(1==T.g){if(e.G||e.N)return T.return();for(n=ft,e.G=!0,e.m=!1,r=e.g.currentTime,o=e.g.autoplay,e.g.paused||(e.ab=!0),e.ob&&(e.g.autoplay=!1),A(T,2),e.u.Qa(),i=m(e.j.values()),a=i.next();!a.done;a=i.next())a.value.destroy();for(s=m(e.l.values()),l=s.next();!l.done;l=s.next()){u=l.value;try{e.i.removeSourceBuffer(u)}catch(pa){}}return e.j.clear(),e.l.clear(),c=e.i.duration,e.M=new Mo,e.i=Ds(e,e.M),S(T,e.M,4)}if(2!=T.g){for(!isNaN(c)&&c?e.i.duration=c:!isNaN(e.xa)&&e.xa&&(e.i.duration=e.xa),f=new Mo,d=e.i.sourceBuffers,p=t.size,h=0,g=function(){++h===p&&(f.resolve(),e.u.Ma(d,"addsourcebuffer",g))},e.u.D(d,"addsourcebuffer",g),y=m(t.keys()),v=y.next();!v.done;v=y.next())b=v.value,x=t.get(b),Os(e,b,x,x.codecs);return(w=t.get(n.ia))&&w.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.ia)&&e.o.set(n.ia,[]),e.g.currentTime=r,S(T,f,2)}return M(T),e.G=!1,ei(e.J),e.u.Aa(e.g,"canplaythrough",function(){e.J.g||(e.g.autoplay=o,e.ab&&(e.ab=!1,e.g.play()))}),R(T,0)})}(e,t)})}function rl(e,t,n,r){var o=!1,i=lt("audio",(r||"").split(",")),a=lt("video",(r||"").split(",")),s=a;"audio"==t&&(s=i),s||(s=r),r=or(n,s);var l=cr(e.F.get(t)),u=e.B.forceTransmux;if(!vt(r)||!e.I&&hr.includes(r)?u=!0:u||n==l||(u=!le().Jf()&&hr.includes(n)),u&&(n=Jn(e=ir(n,s)))){var c=n();i&&a&&(o=!0),r=c.convertCodecs(t,e)}return t=lr(fr(r)),{dc:c,hl:o,Oh:cr(r),codec:t,mimeType:r}}function ol(e,t,n,r,o){if(t==ct)return{type:sl,qf:n,dc:null};var i=lr(fr(e.F.get(t))),a=cr(e.F.get(t)),s=rl(e,t,n,r),l=s.dc,u=s.hl,c=s.Oh,f=s.codec;s=s.mimeType;var d=!0;return u&&e.F.has("audio")&&(n=rl(e,"audio",n,r),r=lr(fr(e.F.get("audio"))),d=cr(e.F.get("audio")),d=r==n.codec&&d==n.Oh,n.dc&&n.dc.destroy()),i===f&&a===c&&d?{type:sl,qf:s,dc:l}:(i=!0,(e.m&&!o.has("audio")||u&&l&&!e.j.has(t))&&(i=!1),i&&"smooth"===e.B.codecSwitchingStrategy&&bt()?{type:ul,qf:s,dc:l}:(l&&l.destroy(),{type:ll,qf:s,dc:null}))}(o=Ps.prototype).destroy=function(){return this.J.destroy()},o.init=function(e,t,n,r){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,r=void 0!==r&&r;var o,i,a,s,l,u,c=this;return O(function(f){if(1==f.g)return o=ft,S(f,c.M,2);if(3!=f.g)return Bs(c)||js(c)?(X("Expected MediaSource to be open during init(); reopening the media source."),c.M=new Mo,c.i=Ds(c,c.M),S(f,c.M,3)):f.A(3);for(c.I=t,c.X=n,c.kb=r,c.ib=!c.I&&"HLS"==c.X&&!c.kb,c.$.clear(),c.V=null,c.wa=null,c.S=null,c.oa=null,c.ma=new Mo,i=m(e.keys()),a=i.next();!a.done;a=i.next())s=a.value,l=e.get(s),Os(c,s,l,l.codecs),c.m?(c.o.set(o.ia,[]),c.o.set(o.Ca,[])):c.o.set(s,[]);(u=e.get(o.ia))&&u.isAudioMuxedInVideo&&(c.m=!0),k(f)})},o.configure=function(e){this.B=e,this.h&&(this.h.B=e.modifyCueCallback)},o.Fc=function(){var e={total:this.G?[]:Qa(this.g.buffered),audio:Qa(Vs(this,"audio")),video:Qa(Vs(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},o.remove=function(e,t,n,r){var o,i=this;return O(function(a){return 1==a.g?(e==(o=ft).Ca&&i.K&&i.K.remove(r),e==o.Na?S(a,i.h.remove(t,n),0):n>t?S(a,Qs(i,e,function(){return Ks(i,e,t,n)},null),5):a.A(0)):i.m?S(a,Qs(i,o.ia,function(){return Ks(i,o.ia,t,n)},null),0):a.A(0)})},o.flush=function(e){var t,n=this;return O(function(r){return 1==r.g?e==(t=ft).Na?r.return():S(r,Qs(n,e,function(){n.g.currentTime-=.001,Js(n,e)},null),2):n.m?S(r,Qs(n,t.ia,function(){var e=t.ia;n.g.currentTime-=.001,Js(n,e)},null),0):r.A(0)})},o.endOfStream=function(e){var t=this;return O(function(n){return S(n,Zs(t,function(){Bs(t)||js(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},o.rb=function(e){var t=this;return O(function(n){return S(n,Zs(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var n=m(t.l.keys()),r=n.next();!r.done;r=n.next()){r=r.value;var o={start:function(){},p:new Mo,uri:null};t.o.get(r).unshift(o)}t.i.duration=e,t.xa=e}),0)})},o.getDuration=function(){return this.i.duration};var il=e.URL.createObjectURL,al="sequence",sl="none",ll="reset",ul="changeType";function cl(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=void 0===n||n,this.H=0,this.o=!1,this.m=e}function fl(e,t,n,r){var o=this;this.u=r,this.g=e,this.F=t,this.h=n,this.j=new oe,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=function(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new pl(new hl(e.g),t,function(){return O(function(t){if(1==t.g)return Qa(e.g.buffered).length?n?(e.g.currentTime+=n,t.A(2)):S(t,e.g.play(),3):t.return();if(2!=t.g){if(!e.g)return t.return();e.g.pause(),e.g.play()}e.H++,e.u(new No("stalldetected")),k(t)})})}(this),this.B=!1,this.j.D(e,"waiting",function(){return dl(o)}),this.i=new Tr(function(){dl(o)}).Fa(this.h.gapJumpTimerTime)}function dl(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){var n=(t=e.o).h,r=ml(n),o=n.g.currentTime,i=Date.now()/1e3;t.g==o&&t.m==r||(t.l=i,t.g=o,t.m=r,t.i=!1),(r=(o=i-t.l)>=t.o&&r&&!t.i)&&(t.j&&t.j(t.g,o),t.i=!0,t.g=n.g.currentTime),t=!r}t&&(t=e.g.currentTime,r=function(e,t,n){return e&&e.length&&!Ka(e)&&(e=Qa(e).findIndex(function(e,r,o){return e.start>t&&(0==r||o[r-1].end-t<=n)}))>=0?e:null}(n=e.g.buffered,t,e.h.gapDetectionThreshold),null==r||0==r&&!e.B||(o=n.start(r),(i=e.h.gapPadding)&&(o=Math.ceil(100*(o+i))/100),o>=e.F.Hb()||o-t<.001||(0!=r&&n.end(r-1),function(e,t){e.C=!0,e.j.Aa(e.g,"seeked",function(){e.C=!1}),e.g.currentTime=t}(e,o),t==e.l&&(e.l=o),e.G++,e.u(new No("gapjumped")))))}}}function pl(e,t,n){this.h=e,this.m=ml(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}function hl(e){var t=this;this.g=e,this.h=new oe,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function ml(e){if(e.g.paused||0==e.g.playbackRate||e.i||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=m(Qa(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function gl(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=yl.value().get(t),n.Aa(e,t,r))}(o=cl.prototype).getDuration=function(){return this.l},o.Nj=function(){return this.h},o.Qi=function(e){this.i=e},o.rb=function(e){this.l=e},o.Tj=function(){return this.i},o.Pi=function(e){this.B=e},o.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},o.Hf=function(e){this.u=e},o.Ye=function(){return this.u},o.oh=function(e){this.F=e},o.Ej=function(){return this.F},o.Ai=function(e,t){if(0!=e.length){var n=(Date.now()+this.B)/1e3;if(0!=(e=e.filter(function(e){return e.start+t<n})).length){var r=e[e.length-1].end+t;this.rf(e[0].start+t),this.h=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.h),this.g=Math.max(this.g,r),null!=this.i&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},o.ge=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3,o=(e=m(e)).next();!o.done;o=e.next())r<(o=o.value).startTime||(t=Math.min(t,o.startTime),n=Math.max(n,o.endTime),this.h=Math.max(this.h,o.endTime-o.startTime));this.rf(t),this.g=Math.max(this.g,n),null!=this.i&&this.G&&!this.o&&(this.i=r-this.g-this.h)}},o.zi=function(e,t){this.rf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},o.Oj=function(){return this.g},o.kf=function(){this.o=!0},o.qk=function(){return this.o},o.ph=function(e){this.m=e},o.Jj=function(){return this.m},o.rf=function(e){null==this.j?this.j=e:this.J||(this.j=Math.min(this.j,e))},o.Tg=function(e){this.h=Math.max(this.h,e)},o.offset=function(e){null!=this.j&&(this.j+=e),null!=this.g&&(this.g+=e)},o.W=function(){return this.l==1/0&&!this.C},o.Vc=function(){return this.l!=1/0&&!this.C},o.Ib=function(){return Math.max(this.I,this.Ic()-this.u)},o.Si=function(e){this.I=e},o.Ic=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},o.Vd=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Ic()-this.u+e,this.Hb()))},o.Xb=function(){return this.Vd(0)},o.Hb=function(){return Math.max(0,this.Ic()-(this.W()||this.Vc()?this.F:0))},o.ej=function(){return!(null==this.i||null!=this.g&&this.G)},o.Oi=function(e){this.H=e},o.zj=function(){return this.H},H("shaka.media.PresentationTimeline",cl),cl.prototype.getAvailabilityTimeOffset=cl.prototype.zj,cl.prototype.setAvailabilityTimeOffset=cl.prototype.Oi,cl.prototype.usingPresentationStartTime=cl.prototype.ej,cl.prototype.getSeekRangeEnd=cl.prototype.Hb,cl.prototype.getSeekRangeStart=cl.prototype.Xb,cl.prototype.getSafeSeekRangeStart=cl.prototype.Vd,cl.prototype.getSegmentAvailabilityEnd=cl.prototype.Ic,cl.prototype.setUserSeekStart=cl.prototype.Si,cl.prototype.getSegmentAvailabilityStart=cl.prototype.Ib,cl.prototype.isInProgress=cl.prototype.Vc,cl.prototype.isLive=cl.prototype.W,cl.prototype.offset=cl.prototype.offset,cl.prototype.notifyMaxSegmentDuration=cl.prototype.Tg,cl.prototype.notifyMinSegmentStartTime=cl.prototype.rf,cl.prototype.getInitialProgramDateTime=cl.prototype.Jj,cl.prototype.setInitialProgramDateTime=cl.prototype.ph,cl.prototype.isStartTimeLocked=cl.prototype.qk,cl.prototype.lockStartTime=cl.prototype.kf,cl.prototype.getMaxSegmentEndTime=cl.prototype.Oj,cl.prototype.notifyPeriodDuration=cl.prototype.zi,cl.prototype.notifySegments=cl.prototype.ge,cl.prototype.notifyTimeRange=cl.prototype.Ai,cl.prototype.getDelay=cl.prototype.Ej,cl.prototype.setDelay=cl.prototype.oh,cl.prototype.getSegmentAvailabilityDuration=cl.prototype.Ye,cl.prototype.setSegmentAvailabilityDuration=cl.prototype.Hf,cl.prototype.setStatic=cl.prototype.cd,cl.prototype.setClockOffset=cl.prototype.Pi,cl.prototype.getPresentationStartTime=cl.prototype.Tj,cl.prototype.setDuration=cl.prototype.rb,cl.prototype.setPresentationStartTime=cl.prototype.Qi,cl.prototype.getMaxSegmentDuration=cl.prototype.Nj,cl.prototype.getDuration=cl.prototype.getDuration,fl.prototype.release=function(){this.j&&(this.j.release(),this.j=null),null!=this.i&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},fl.prototype.vf=function(){this.B=!0,this.i&&this.i.Fa(this.h.gapJumpTimerTime),dl(this)},pl.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null},hl.prototype.release=function(){this.h&&this.h.release(),this.h=null};var yl=new se(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function vl(e,t,n,r){var o=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return null==o.l&&(o.l=r()),o.l},this.o=!1,this.h=new oe,this.i=new Tl(e),gl(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){wl(o,o.j())})}function bl(e){return e.o?e.g.currentTime:e.j()}function xl(e,t){e.g.readyState>0?kl(e.i,t):gl(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){wl(e,e.j())})}function wl(e,t){Math.abs(e.g.currentTime-t)<.001?Sl(e):(e.h.Aa(e.g,"seeking",function(){Sl(e)}),kl(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Sl(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function Tl(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Tr(function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}function kl(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Fa(.1)}function Cl(e){this.g=e,this.i=!1,this.h=null,this.j=new oe}function Al(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function El(e,t){return(e=e.g.seekable).length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Il(e,t,n,r,o,i){var a=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=o,this.o=null,this.i=new fl(e,t.presentationTimeline,n,i),this.j=new vl(e,function(){e:{var e=a.i;e.m=!0,e.B=!1,e.i&&e.i.Fa(e.h.gapJumpTimerTime),dl(e);var t=bl(a.j);if(e=_l(a,t),!xt()&&Math.abs(e-t)>.001){t=!1;var n=le().Mi();if(n){var r=Date.now()/1e3;(!a.o||a.o<r-n)&&(a.o=r,t=!0)}else t=!0;if(t){xl(a.j,e),e=void 0;break e}}a.u(),e=void 0}return e},function(e){var t=a.i;t.g.seeking&&!t.m&&(t.m=!0,t.l=e),t.i&&t.i.Fa(t.h.gapJumpTimerTime),dl(t)},function(){return Ml(a,r)}),this.m=new Tr(function(){if(0!=a.h.readyState&&!a.h.paused){var e=bl(a.j),t=a.g.Xb(),n=a.g.Hb();n-t<3&&(t=n-3),e<t&&(e=_l(a,e),a.h.currentTime=e)}})}function Ml(e,t){return null==t?t=e.g.getDuration()<1/0?e.g.Xb():e.g.Hb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Hb()+t),Rl(e,Ll(e,t))}function Rl(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function _l(e,t){var n=e.l.rebufferingGoal,r=e.l.safeSeekOffset,o=e.g.Xb(),i=e.g.Hb(),a=e.g.getDuration();i-o<3&&(o=i-3);var s=e.g.Vd(n),l=e.g.Vd(r);return n=e.g.Vd(n+r),t>=a?Rl(e,t):t>i?i-e.l.safeSeekEndOffset:t<o?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?i-e.l.safeSeekEndOffset:Ya(e.h.buffered,l)?l:n:t>=s||Ya(e.h.buffered,t)?t:n}function Ll(e,t){var n=e.g.Xb();return t<n?n:t>(e=e.g.Hb())?e:t}function Pl(e){this.g=e,this.m=null,this.i=0,this.o=!1}function Dl(e){return e.g[0]||null}function Ol(e,t,n){return new Pl([e=new Ha(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Nl(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}function Ul(){Pl.call(this,[]),this.h=[]}function Bl(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Xe(),this.h=new Tr(function(){t.g.ui(.25*t.i)})}function jl(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{return void(e.g.Xe()!=t&&e.g.qh(t))}catch(n){}e.h.Fa(.25),0!=e.g.Xe()&&e.g.qh(0)}function Fl(e){var t=this;this.j=e,this.h=new oe,this.g=new Set,this.i=new Tr(function(){zl(t,!1)}).Kb(),e.paused||this.i.Fa(.25),this.h.D(e,"playing",function(){t.i.Kb().Fa(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}function zl(e,t){for(var n=e.j.currentTime,r=(e=m(e.g)).next();!r.done;r=e.next())r.value.j(n,t)}function Vl(e){jo.call(this),this.g=new Map,this.h=e}function Hl(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function Gl(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return"video"==e.type&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),"audio"==e.type&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function ql(e){jo.call(this),this.h=new Map,this.i=e,this.g=null}function Wl(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1);e.h.has(n)||(e.h.set(n,t),t=new No("regionadd",new Map([["region",t]])),e.dispatchEvent(t),function(e){e.g||(e.g=new Tr(function(){for(var t=e.i(),n=m(e.h),r=n.next();!r.done;r=n.next()){var o=m(r.value);r=o.next().value,(o=o.next().value).endTime<t.start&&(e.h.delete(r),r=new No("regionremove",new Map([["region",o]])),e.dispatchEvent(r))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Fa(2))}(e))}function Kl(e,t,n,r,o){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r,this.u=o||function(e,t){return!(t.fastSwitching&&e.Xc&&e.ce)}}function Xl(e,t){e.l=t;for(var n=(e=m(e.h.values())).next();!n.done;n=e.next())n.value.g=t}function $l(e,t,n){if(n=void 0!==n&&n,!e.i.segmentIndex)return Promise.resolve();if(e.g||(e.g=e.i.segmentIndex.Vb(t,!0,e.o)),!e.g)return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value);){var r=!0;if(n.isPreload()&&null!=n.endByte&&(r=!1),2==n.Kc()&&(r=!1),n.Yb(!1)&&(r=!1),r&&n.aa&&t.push(Yl(e,n.aa)),r&&!e.h.has(n)&&(r=new nu(e.l),t.push(ru(r,n,e.i)),e.h.set(n,r)),!e.u(n,e.i))break}return Zl(e),Promise.all(t)}function Yl(e,t){if(!e.i.segmentIndex||t.Yb()||Array.from(e.j.keys()).some(function(e){return Va(e,t)}))return Promise.resolve();var n=new nu(e.l),r=ru(n,t,e.i);return e.j.set(t,n),r}function Jl(e,t){for(var n=(t=m(t.keys())).next();!n.done;n=t.next())(n=n.value)&&tu(e,n)}function Ql(e){Jl(e,e.h),Jl(e,e.j),e.g=null}function Zl(e){for(var t=Array.from(e.h.keys()),n=m(e.j.keys()),r=n.next(),o={};!r.done;o={Ng:void 0},r=n.next())o.Ng=r.value,t.some(function(e){return function(t){return Va(t.aa,e.Ng)}}(o))||tu(e,o.Ng)}function eu(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&tu(e,r)}Zl(e)}function tu(e,t){var n=e.h;t instanceof za&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function nu(e){this.g=e,this.ie=this.xh=null}function ru(e,t,n){var r=new Uint8Array(0);return e.ie=e.g(t,n,function(t){return O(function(n){if(1==n.g)return r=r.byteLength>0?rt(r,t):t,e.xh?S(n,e.xh(r),3):n.A(0);r=new Uint8Array(0),k(n)})}),e.ie.promise.catch(function(e){return e instanceof ze&&7001==e.code?Promise.resolve():Promise.reject(e)})}function ou(e){var t=cr(e);return{type:t.split("/")[0],mimeType:t,codecs:e=fr(e),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ue:null,colorGamut:null,frameRate:null}}function iu(e,t,n){function r(e){a=e.name;var t=e.reader;t.skip(24);var n=t.Ba(),r=t.Ba();t.skip(50),p=String(n),d=String(r),e.reader.Ia()&&li(e)}function o(e){var t=sa(e.reader);h=t.channelCount,g=t.sampleRate,i(e.name)}function i(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":l.push(e+".42E01E"),c=!0;break;case"hev1":case"hvc1":l.push(e+".1.6.L93.90"),c=!0;break;case"dvh1":case"dvhe":l.push(e+".05.04"),c=!0;break;case"vp09":l.push(e+".00.10.08"),c=!0;break;case"av01":l.push(e+".0.01M.08"),c=!0;break;case"mp4a":s.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(e),u=!0;break;case"apac":s.push("apac.31.00"),u=!0}}var a,s=[],l=[],u=!1,c=!1,f=null,d=null,p=null,h=null,g=null,y=null,v=null;if((new si).box("moov",li).box("trak",li).box("mdia",li).T("mdhd",function(e){f=ia(e.reader,e.version).language}).box("minf",li).box("stbl",li).T("stsd",ui).box("mp4a",function(e){var t=sa(e.reader);h=t.channelCount,g=t.sampleRate,e.reader.Ia()?li(e):i(e.name)}).box("esds",function(e){e=e.reader;for(var t,n,r="mp4a";e.Ia();){t=e.Y();for(var o=e.Y();128&o;)o=e.Y();if(3==t)e.Ba(),128&(o=e.Y())&&e.Ba(),64&o&&e.skip(e.Y()),32&o&&e.Ba();else if(4==t)n=e.Y(),e.skip(12);else if(5==t)break}n&&(r+="."+ua(n),5==t&&e.Ia()&&(31==(n=(248&(t=e.Y()))>>3)&&e.Ia()&&(n=32+((7&t)<<3)+((224&e.Y())>>5)),r+="."+n)),s.push(r),u=!0}).box("ac-3",o).box("ec-3",o).box("ac-4",o).box("Opus",o).box("fLaC",o).box("apac",o).box("avc1",r).box("avc3",r).box("hev1",r).box("hvc1",r).box("dva1",r).box("dvav",r).box("dvh1",r).box("dvhe",r).box("vp09",r).box("av01",r).box("avcC",function(e){var t=a||"";switch(a){case"dvav":t="avc3";break;case"dva1":t="avc1"}(e=e.reader).skip(1),e=t+"."+ua(e.Y())+ua(e.Y())+ua(e.Y()),l.push(e),c=!0}).box("hvcC",function(e){var t=a||"";switch(a){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1);var r=["","A","B","C"][(e=n.Y())>>6],o=31&e,i=n.U(),s=(32&e)>>5?"H":"L";e=[n.Y(),n.Y(),n.Y(),n.Y(),n.Y(),n.Y()],n=n.Y();for(var u=0,f=0;f<32&&(u|=1&i,31!=f);f++)u<<=1,i>>=1;for(t=t+"."+r+o+"."+ua(u,!0),t+="."+s+n,r="",o=e.length;o--;)((s=e[o])||r)&&(r="."+s.toString(16).toUpperCase()+r);t+=r,l.push(t),c=!0}).box("dvcC",function(e){var t=a||"";switch(a){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.Y(),n=n.Y(),l.push(t+"."+ca(e>>1&127)+"."+ca(e<<5&32|n>>3&31)),c=!0}).box("dvvC",function(e){var t=a||"";switch(a){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.Y(),n=n.Y(),l.push(t+"."+ca(e>>1&127)+"."+ca(e<<5&32|n>>3&31)),c=!0}).T("vpcC",function(e){var t=a||"",n=e.reader;e=n.Y();var r=n.Y();n=n.Y()>>4&15,l.push(t+"."+ca(e)+"."+ca(r)+"."+ca(n)),c=!0}).box("av1C",function(e){var t=a||"";"dav1"===a&&(t="av01");var n=e.reader;n.skip(1);var r=(e=n.Y())>>>5,o=(64&(n=n.Y()))>>6;l.push(t+"."+r+"."+ca(31&e)+(n>>>7?"H":"M")+"."+ca(2===r&&o?(32&n)>>5?12:10:o?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+ca(1)+"."+ca(1)+"."+ca(1)+".0"),c=!0}).box("enca",fi).box("encv",ci).box("sinf",li).box("frma",function(e){i(e=la(e.reader).codec)}).box("colr",function(e){l=l.map(function(t){if(t.startsWith("av01.")){var n=e.reader,r=n.Pa(),o=n.Tb(4),i=String.fromCharCode(o[0]);if(i+=String.fromCharCode(o[1]),i+=String.fromCharCode(o[2]),"nclx"===(i+=String.fromCharCode(o[3]))){o=n.Ba(),i=n.Ba();var a=n.Ba(),s=n.Y()>>7,l=t.split(".");10==l.length&&(l[6]=ca(o),l[7]=ca(i),l[8]=ca(a),l[9]=String(s),t=l.join("."))}n.seek(r)}return t});var t=function(e){var t=null,n=null,r=e.Tb(4),o=String.fromCharCode(r[0]);if(o+=String.fromCharCode(r[1]),o+=String.fromCharCode(r[2]),"nclx"===(o+=String.fromCharCode(r[3]))){switch(e.Ba()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.Ba(),e.Ba(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ue:n}}(e.reader),n=t.colorGamut;y=t.ue,v=n}).parse(e||t,!0,!0),!s.length&&!l.length)return null;var b=u&&!c,x=new Map;if(c&&!n){n=new Ct("video/mp4"),e&&n.init(e);try{n.xf(t);for(var w=m(n.Vf()),S=w.next();!S.done;S=w.next()){var T=S.value;x.set(T,T)}}catch(pa){}n.Ld()}return{type:b?"audio":"video",mimeType:b?"audio/mp4":"video/mp4",codecs:au(s.concat(l)).join(", "),language:f,height:d,width:p,channelCount:h,sampleRate:g,closedCaptions:x,ue:y,colorGamut:v,frameRate:null}}function au(e){for(var t=new Set,n=[],r=(e=m(e)).next();!r.done;r=e.next()){var o=ur(r=r.value);t.has(o)||(n.push(r),t.add(o))}return t=ut("audio",n),r=ut("video",n),e=ut(ct,n),r=function(e){if(e.length<=1)return e;var t=e.find(function(e){return e.startsWith("dvav.")||e.startsWith("dva1.")||e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")||e.startsWith("dvc1.")||e.startsWith("dvi1.")});return t?vt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(e){return e!=t}):e}(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function su(t,n,r){var o,i,a,s,l;return O(function(u){if(1==u.g)return(o=n).cryptoKey?u.A(2):S(u,o.fetchKey(),3);if(!(i=o.iv))for(i=Ue(new ArrayBuffer(16)),a=o.firstMediaSequenceNumber+r,s=i.byteLength-1;s>=0;s--)i[s]=255&a,a>>=8;return l="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:i}:{name:"AES-CTR",counter:i,length:64},u.return(e.crypto.subtle.decrypt(l,o.cryptoKey,t))})}function lu(e,t,n,r,o){return e=qo(e,r,o),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function uu(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.N=new Map,this.F=1,this.B=this.o=null,this.V=0,this.h=new Map,this.M=!1,this.X=null,this.C=!1,this.l=new Zo(function(){return function(e){var t,n,r,o,i,a;return O(function(s){if(1==s.g){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=m(e.h.values()),r=n.next();!r.done;r=n.next())Mu(o=r.value),t.push(Ru(o)),o.ea&&(Ql(o.ea),o.ea=null);for(i=m(e.m.values()),a=i.next();!a.done;a=i.next())Ql(a.value);return S(s,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,k(s)})}(n)}),this.R=Date.now()/1e3,this.m=new Map,this.S={projection:null,hfov:null},this.ba=0,this.$=1/0,this.H=null,this.O=[],this.u=new Tr(function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var e=n.j.presentationTimeline.Xb(),t=n.j.presentationTimeline.Hb();t-e>1?function(e,t,n){O(function(r){return e.J.g||e.g.error||e.N||e.G||Bs(e)||js(e)?r.return():S(r,Zs(e,function(){Bs(e)||js(e)||e.i.setLiveSeekableRange(t,n)}),0)})}(n.g.Z,e,t):Ws(n.g.Z)}else Ws(n.g.Z),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.I=null,this.J=!1,this.K=new Tr(function(){var e=n.g.video;!e.ended&&n.I&&(n.J=!0,e.currentTime=n.I,n.I=null)}),this.G=new oe}function cu(e,t){for(var n=e.g.Pb()<0,r=m(e.h.values()),o=r.next();!o.done;o=r.next())(o=o.value).ua&&o.ua.Id(n),o.ea&&o.ea.Id(n);for(o=(r=m(e.m.values())).next();!o.done;o=r.next())o.value.Id(n);(n=e.h.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.Mc&&(pu(e,t,!1,0,!1),n.Mc=r):(t=n.Mc)&&(n.Mc=null,pu(e,t,!0,0,!1)))}function fu(e,t,n,r,o,i){n=void 0!==n&&n,r=void 0===r?0:r,o=void 0!==o&&o,i=void 0!==i&&i,e.o=t,e.M&&(t.video&&pu(e,t.video,n,r,o,i),t.audio&&pu(e,t.audio,n,r,o,i))}function du(e,t){O(function(n){if(1==n.g)return e.H=null,e.B=t,e.M?t.segmentIndex?n.A(2):S(n,t.createSegmentIndex(),2):n.return();pu(e,t,!0,0,!1),k(n)})}function pu(e,t,n,r,o,i){var a=e.h.get(t.type);a||t.type!=ct?a&&(a.Mc&&(t.trickModeVideo?(a.Mc=t,t=t.trickModeVideo):a.Mc=null),a.stream!=t||o)&&(e.m.has(t)?a.ea=e.m.get(t):a.ea&&function(e,t){t&&t!==e.i&&(Ql(e),e.i=t)}(a.ea,t),t.type==ct&&a.stream!=t&&(o=or(t.mimeType,t.codecs),Us(e.g.Z,o,e.j.sequenceMode,t.external)),!e.m.has(a.stream)&&a.stream.closeSegmentIndex&&(a.Ja?(o="("+a.type+":"+a.stream.id+")",e.N.has(o)||e.N.set(o,a.stream.closeSegmentIndex)):a.stream.closeSegmentIndex()),o=a.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,a.stream=t,a.ua=null,a.cg=!!i,t.dependencyStream?a.Ec=gu(e,t.dependencyStream):a.Ec=null,Du(e),o&&(a.pb=null,a.nc=null,a.mc=null,t.isAudioMuxedInVideo&&(t=null,"video"===a.type?t=e.h.get("audio"):"audio"===a.type&&(t=e.h.get("video")),t&&(Ru(t).catch(function(){}),t.pb=null,t.nc=null,t.mc=null,mu(e,t),hu(e,t).catch(function(t){e.g&&e.g.onError(t)})))),n?a.Ub?a.Jd=!0:a.Ja?(a.ec=!0,a.ld=r,a.Jd=!0):(Mu(a),Eu(e,a,!0,r).catch(function(t){e.g&&e.g.onError(t)})):a.Ja||a.sb||Iu(e,a,0),hu(e,a).catch(function(t){e.g&&e.g.onError(t)})):function(e,t){var n,r,o,i,a;O(function(s){switch(s.g){case 1:return n=ft,e.V++,r=e.V,C(s,2),S(s,Gs(e.g.Z,n.Na),4);case 4:E(s,3);break;case 2:o=I(s),e.g&&e.g.onError(o);case 3:i=or(t.mimeType,t.codecs),Us(e.g.Z,i,e.j.sequenceMode,t.external),(e.g.Z.ba.isTextVisible()||e.i.alwaysStreamText)&&e.V==r&&(a=gu(e,t),e.h.set(n.Na,a),Iu(e,a,0)),k(s)}})}(e,t)}function hu(e,t){var n,r,o;return O(function(i){if(1==i.g)return t.Ua?(n=t.stream,r=t.Ua,n.segmentIndex?i.A(2):S(i,n.createSegmentIndex(),2)):i.return();if(4!=i.g)return!(o=n.dependencyStream)||o.segmentIndex?i.A(4):S(i,o.createSegmentIndex(),4);if(t.Ua!=r||t.stream!=n)return i.return();var a=e.g.Hc(),s=zs(e.g.Z,t.type),l=t.stream.segmentIndex.find(t.La?t.La.endTime:a),u=null==l?null:t.stream.segmentIndex.get(l);l=u&&u.endByte?u.endByte-u.startByte:null,u&&!l&&(l=(u.endTime-u.getStartTime())*(t.stream.bandwidth||0)/8),l?((u=u.aa)&&(l+=(u.endByte?u.endByte-u.startByte:null)||0),a=8*l/(u=e.g.getBandwidthEstimate())<(s||0)-a-e.i.rebufferingGoal||t.Ua.h.g>l):a=!1,a&&t.Ua.abort(),k(i)})}function mu(e,t){t.Ub||t.ec||(t.Ja?(t.ec=!0,t.ld=0):null==Fs(e.g.Z,t.type)?null==t.sb&&Iu(e,t,0):(Mu(t),Eu(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)})))}function gu(e,t){var n={stream:t,type:t.type,ua:null,ea:yu(e,t),La:null,pb:null,jf:null,nc:null,mc:null,gf:null,hf:null,Mc:null,endOfStream:!1,Ja:!1,sb:null,ec:!1,ld:0,Jd:!1,Ub:!1,bd:!0,cg:!1,bh:!1,Xd:!1,Ua:null,Ec:null};return t.dependencyStream&&(n.Ec=gu(e,t.dependencyStream)),n}function yu(e,t){if("video"===t.type&&e.i.disableVideoPrefetch||"audio"===t.type&&e.i.disableAudioPrefetch||t.type===ct&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===ct&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ea)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new Kl(e.i.segmentPrefetchLimit,t,function(t,n,r){return Au(t,n,r||null,e.i.retryParameters,e.g.tc)},e.g.Pb()<0,e.g.cl):null}function vu(t,n){var r,o,i,a,s,l,u,c,f;return O(function(d){switch(d.g){case 1:if(ei(t.l),r=ft,n.Ja||null==n.sb||n.Ub)return d.return();if(n.sb=null,!n.ec){d.A(2);break}return S(d,Eu(t,n,n.Jd,n.ld),3);case 3:return d.return();case 2:if(function(e,t){for(var n=m(e.N.entries()),r=n.next();!r.done;r=n.next()){var o=m(r.value);r=o.next().value,o=o.next().value,r.includes(t.type)&&(o(),e.N.delete(r))}}(t,n),n.stream.segmentIndex){d.A(4);break}return o=n.stream,C(d,5),S(d,n.stream.createSegmentIndex(),7);case 7:E(d,6);break;case 5:return i=I(d),S(d,_u(t,n,i),8);case 8:return d.return();case 6:if(o!=n.stream)return o.closeSegmentIndex&&o.closeSegmentIndex(),n.Ja||n.sb||Iu(t,n,0),d.return();case 4:if(!n.Ec){d.A(9);break}if(n.Ec.stream.segmentIndex){d.A(9);break}return C(d,11),S(d,n.Ec.stream.createSegmentIndex(),13);case 13:E(d,9);break;case 11:I(d);case 9:C(d,14),a=function(t,n){if(ku(n))return function(e,t){var n=zs(e,"video")||0;br(e.h,t,n)}(t.g.Z,n.stream.originalId||""),null;if(n.type==ct&&function(e){e.h&&br(e.h,"",0)}(t.g.Z),n.stream.isAudioMuxedInVideo&&"audio"==n.type)return null;if(n.type!=ct&&js(t.g.Z))return Lu(t,!0),null;var r=t.i.updateIntervalSeconds/Math.max(1,Math.abs(t.g.Pb()));if(!Ns(t.g.Z)&&n.type!=ct)return r/2;var o=t.g.Hc();if("audio"===n.type)for(var i=m(t.m.keys()),a=i.next();!a.done;a=i.next())(a=t.m.get(a.value)).Ya(o,!0),$l(a,o);i=n.La?n.La.endTime:o;var s=function(e,t,n){return t==ct?null==(e=e.h).h||e.h<n?0:e.h-Math.max(n,e.g):Ja(e=Vs(e,t),n)}(t.g.Z,n.type,o);a=Math.max(1,Math.max(t.i.rebufferingGoal,t.i.bufferingGoal)*t.F);var l=t.j.presentationTimeline.getDuration()-i,u=zs(t.g.Z,n.type);if(l<1e-6&&u)return n.endOfStream=!0,"video"==n.type&&(t=t.h.get(ct))&&ku(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,s>=a)return r/2;if(l=!n.ua,!(u=bu(t,n,o,u)))return r;s=n.pb;var c=u.aa;s&&c&&Va(c,s)&&(s.g=c.g),s=!1,l&&n.cg&&(s=!0,n.cg=!1),l=1/0;for(var f=(c=m(c=Array.from(t.h.values()))).next();!f.done;f=c.next())ku(f=f.value)||f.ua&&!f.ua.current()||(l=Math.min(l,f.La?f.La.endTime:o));return i>=l+t.j.presentationTimeline.h?r:(n.ea&&n.ua&&!t.m.has(n.stream)&&(n.ea.Ya(u.startTime+.001),$l(n.ea,u.startTime).catch(function(){})),Pu(t)&&function(e,t,n){if(t.type===ct)return!1;var r=t.pb;if(!r)return!1;var o=n.aa;if(n=r.g!==o.g,"reset_to_encrypted"===e.i.crossBoundaryStrategy&&(r.encrypted||o.encrypted||(n=!1),r.encrypted&&(e.i.crossBoundaryStrategy="keep")),"RESET_ON_ENCRYPTION_CHANGE"===e.i.crossBoundaryStrategy&&r.encrypted==o.encrypted&&(n=!1),"keep"===e.i.crossBoundaryStrategy&&r.mimeType&&o.mimeType){var i=lr(fr(r.mimeType)),a=lr(fr(r.mimeType));r.mimeType==o.mimeType&&i==a&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,Lu(e,!0).then(function(){var t=(new Map).set("oldEncrypted",r.encrypted).set("newEncrypted",o.encrypted);e.g.onEvent(new No("boundarycrossed",t))})),n}(t,n,u)||(function(t,n,r,o,i){var a,s,l,u,c,f,d,p,h,g,y,v,b,x,w,T;return O(function(A){switch(A.g){case 1:if(a=ft,s=n.stream,l=n.ua,n.Ja=!0,C(A,2),2==o.Kc())throw new ze(1,1,1011);return S(A,function(e,t,n,r){var o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x;return O(function(w){switch(w.g){case 1:if(o=ft,i=null==t.La,a=[],s=Math.max(0,Math.max(n.appendWindowStart,e.ba)-.1),l=Math.min(n.appendWindowEnd,e.$)+.1,u=n.codecs||t.stream.codecs,c=ur(u),f=cr(n.mimeType||t.stream.mimeType),(d=n.timestampOffset)==t.jf&&s==t.nc&&l==t.mc&&c==t.gf&&f==t.hf){w.A(2);break}if(p=t.gf&&t.hf&&function(e,t,n,r,o){return(e=ol(e,t,n,r,o)).dc&&e.dc.destroy(),e.type==ll}(e.g.Z,t.type,f,u,Nu(e)),!p){w.A(3);break}if(h=null,t.type===o.Ca?h=e.h.get(o.ia):t.type===o.ia&&(h=e.h.get(o.Ca)),!h){w.A(3);break}return S(w,Ru(h).catch(function(){}),5);case 5:h.pb=null,h.nc=null,h.mc=null,mu(e,h);case 3:return S(w,wu(e,t,d,s,l,n,c,f),2);case 2:return Va(n.aa,t.pb)||(t.pb=n.aa,n.l&&n.aa&&(g=Cu(e,t,n.aa),y=function(){var i,a,s,l,u,c,f,d,p,h,y;return O(function(v){switch(v.g){case 1:return C(v,2),S(v,g,4);case 4:return i=v.h,ei(e.l),a=null,s=new Map,l={projection:null,hfov:null},t.stream&&(u=t.stream.videoLayout)&&((c=u.split("/")).includes("PROJ-RECT")?l.projection="rect":c.includes("PROJ-EQUI")?l.projection="equi":c.includes("PROJ-HEQU")?l.projection="hequ":c.includes("PROJ-PRIM")?l.projection="prim":c.includes("PROJ-AIV")&&(l.projection="hequ")),(f=new si).box("moov",li).box("trak",li).box("mdia",li).T("mdhd",function(e){a=ia(e.reader,e.version).timescale}).box("hdlr",function(e){switch((e=e.reader).skip(8),e.Yc()){case"soun":s.set(o.ia,a);break;case"vide":s.set(o.Ca,a)}a=null}),t.type!==o.Ca||l.projection||f.box("minf",li).box("stbl",li).T("stsd",ui).box("encv",ci).box("avc1",ci).box("avc3",ci).box("hev1",ci).box("hvc1",ci).box("dvav",ci).box("dva1",ci).box("dvh1",ci).box("dvhe",ci).box("dvc1",ci).box("dvi1",ci).box("vexu",li).box("proj",li).T("prji",function(e){e=e.reader.Yc(),l.projection=e}).box("hfov",function(e){e=e.reader.U()/1e3,l.hfov=e}),f.parse(i,!0,!0),t.type===o.Ca&&function(e,t){if(e.S.projection!=t.projection||e.S.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new No("spatialvideoinfo",n)}else n=new No("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.S=t}}(e,l),s.has(t.type)?n.aa.timescale=s.get(t.type):null!=a&&(n.aa.timescale=a),(d=t.stream.segmentIndex)instanceof Ul&&(p=function(e,t){for(var n=(e=m(e.h)).next();!n.done;n=e.next())if(null!=(n=n.value).find(t))return n.Se();return-1}(d,n.startTime)),h=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,S(v,e.g.Ph(t.type,i),5);case 5:return S(v,Hs(e.g.Z,t.type,i,null,t.stream,h,t.bd,r,!1,!1,p),6);case 6:E(v,0);break;case 2:throw y=I(v),t.pb=null,y}})},v=n.startTime,i&&null!=(b=zs(e.g.Z,t.type))&&(v=b),e.g.Dk(v,n.aa),a.push(y()))),x=t.La?t.La.i:-1,n.i!=x&&a.push(function(e,t,n){var r,o;return O(function(i){return 1==i.g?t==(r=ft).Na?i.return():(t==r.Ca&&(e.Ta=new Mo),!e.I||(o=zs(e,t))&&Math.abs(o-n)<.15?i.return():(Qs(e,t,function(){return Xs(e,t)},null),e.m&&Qs(e,r.ia,function(){return Xs(e,r.ia)},null),S(i,Qs(e,t,function(){return $s(e,t,n)},null),2))):e.m?S(i,Qs(e,r.ia,function(){return $s(e,r.ia,n)},null),0):i.A(0)})}(e.g.Z,t.type,n.startTime)),S(w,Promise.all(a),0)}})}(t,n,o,i),4);case 4:return ei(t.l),t.C?A.return():(u="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,c=e.ReadableStream,t.i.lowLatencyMode&&t.j.isLowLatency&&c&&u&&("HLS"!=t.j.type||o.m)?(d=new Uint8Array(0),h=p=!1,y=function(e){var a,l,u;return O(function(c){switch(c.g){case 1:if(p)return c.return();if(h=!0,ei(t.l),t.C)return c.return();if(C(c,2),d=rt(d,e),a=!1,l=0,(new si).box("mdat",function(e){l=e.size+e.start,a=!0}).parse(d,!1,!0),!a){c.A(4);break}return u=d.subarray(0,l),d=d.subarray(l),S(c,Su(t,n,r,s,o,u,!0,i),5);case 5:n.ea&&n.ua&&$l(n.ea,o.startTime,!0);case 4:E(c,0);break;case 2:g=I(c),k(c)}})},S(A,Cu(t,n,o,y),9)):S(A,Cu(t,n,o),7));case 7:return f=A.h,ei(t.l),t.C?A.return():(ei(t.l),n.ec?(n.Ja=!1,Iu(t,n,0),A.return()):S(A,Su(t,n,r,s,o,f,!1,i),6));case 9:if(v=A.h,g)throw g;if(h){A.A(10);break}return p=!0,ei(t.l),t.C?A.return():n.ec?(n.Ja=!1,Iu(t,n,0),A.return()):S(A,Su(t,n,r,s,o,v,!1,i),10);case 10:n.ea&&n.ua&&$l(n.ea,o.startTime,!0);case 6:if(ei(t.l),t.C)return A.return();n.La=o,l.next(),n.Ja=!1,n.bh=!1,b=t.g.Z.Fc(),x=b[n.type],JSON.stringify(x),n.ec||(w=null,n.type===a.Ca?w=t.h.get(a.ia):n.type===a.ia&&(w=t.h.get(a.Ca)),w&&w.type==a.ia?t.g.vf(o,n.stream,w.stream.isAudioMuxedInVideo):t.g.vf(o,n.stream,n.stream.codecs.includes(","))),Mu(n),Iu(t,n,0),E(A,0);break;case 2:if(T=I(A),ei(t.l,T),t.C)return A.return();if(n.Ja=!1,7001==T.code)n.Ja=!1,Mu(n),Iu(t,n,0),A.A(0);else{if(n.type!=a.Na||!t.i.ignoreTextStreamFailures)return 3017==T.code?S(A,function(e,t,n){var r,o,i;return O(function(a){if(1==a.g){if(Array.from(e.h.values()).some(function(e){return e!=t&&e.bh}))return a.A(2);if(r=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,e.g.disableStream(t.stream,r))return a.return();if(e.i.avoidEvictionOnQuotaExceededError)return Iu(e,t,4),a.return();if((o=Math.round(100*e.F))>20)e.F-=.2;else{if(!(o>4))return t.Xd=!0,e.C=!0,e.g.onError(n),a.return();e.F-=.04}return t.bh=!0,i=e.g.Hc(),S(a,Tu(e,t,i),2)}Iu(e,t,4),k(a)})}(t,n,T),0):(n.Xd=!0,1==T.category&&n.ea&&tu(n.ea,o),T.severity=2,S(A,_u(t,n,T),0));t.h.delete(a.Na),A.A(0)}}})}(t,n,o,u,s).catch(function(){}),n.Ec&&xu(t,n.Ec,o,a)),null)}(t,n),null!=a&&(Iu(t,n,a),n.Xd=!1),E(d,15);break;case 14:return s=I(d),S(d,_u(t,n,s),16);case 16:return d.return();case 15:if(n.type===r.Na)return d.return();if(l=[n],u=n.type===r.ia?r.Ca:r.ia,(c=t.h.get(u))&&l.push(c),!t.M||!l.every(function(e){return e.endOfStream})){d.A(0);break}return S(d,t.g.Z.endOfStream(),18);case 18:ei(t.l),0!=(f=t.g.Z.getDuration())&&f<t.j.presentationTimeline.getDuration()&&t.j.presentationTimeline.rb(f),k(d)}})}function bu(e,t,n,r){if(t.ua)return(n=t.ua.current())&&t.La&&Math.abs(t.La.startTime-n.startTime)<.001&&(n=t.ua.next().value),n;if(t.La||r)return n=t.La?t.La.endTime:r,e=e.g.Pb()<0,t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),t.ua&&t.ua.next().value;r=e.j.sequenceMode||Pu(e)?0:e.i.inaccurateManifestTolerance;var o=Math.max(n-r,0);e=e.g.Pb()<0;var i=null;return r&&(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(o,!1,e)),i=t.ua&&t.ua.next().value),i||(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),i=t.ua&&t.ua.next().value),i}function xu(e,t,n,r){var o,i,a,s,l,u,c,f,d,p;return O(function(h){switch(h.g){case 1:for(o=t.stream,s=(a=(i=o.segmentIndex)&&i.Vb(n))&&a.next().value;s&&e.O.includes(s.startTime);)s=a&&a.next().value;if(!s){h.A(0);break}if(!(l=s.aa)||Va(l,t.pb)){h.A(3);break}return t.pb=l,C(h,4),S(h,Cu(e,t,l),6);case 6:u=h.h;var m=e.g.Z;m.H&&mt(m.H,u,0,o),e.O=[],E(h,3);break;case 4:throw c=I(h),t.pb=null,c;case 3:if(t.La&&t.La==s){h.A(0);break}return t.La=s,C(h,8),S(h,Cu(e,t,s),10);case 10:f=h.h,(m=e.g.Z).H&&mt(m.H,f,0,o),e.O.push(s.startTime),E(h,9);break;case 8:throw d=I(h),t.La=null,d;case 9:if(p=Math.max.apply(Math,[0].concat(g(e.O))),e.g.Hc()+r>p)return S(h,xu(e,t,s.startTime,r),0);h.A(0)}})}function wu(e,t,n,r,o,i,a,s){var l,u,c,f,d;return O(function(p){switch(p.g){case 1:if(l=ft,u=Nu(e),C(p,2),t.nc=r,t.mc=o,a&&(t.gf=a),s&&(t.hf=s),t.jf=n,c=e.j.sequenceMode||"HLS"==e.j.type,f=null,t.type===l.Ca?f=e.h.get(l.ia):t.type===l.ia&&(f=e.h.get(l.Ca)),!(f&&f.stream&&f.stream.isAudioMuxedInVideo)){p.A(4);break}return S(p,qs(e.g.Z,f.type,n,r,o,c,f.stream.mimeType,f.stream.codecs,u),4);case 4:return S(p,qs(e.g.Z,t.type,n,r,o,c,i.mimeType||t.stream.mimeType,i.codecs||t.stream.codecs,u),6);case 6:E(p,0);break;case 2:throw d=I(p),t.nc=null,t.mc=null,t.gf=null,t.hf=null,t.jf=null,d}})}function Su(e,t,n,r,o,i,a,s){var l,u,c,f;return a=void 0!==a&&a,s=void 0!==s&&s,O(function(d){switch(d.g){case 1:return l=r.closedCaptions&&r.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(u="video/mp4"==r.mimeType||"audio/mp4"==r.mimeType,c=null,o.aa&&(c=o.aa.timescale),u&&c&&"video"===r.type&&"DASH"==e.j.type&&(new si).box("moof",li).box("traf",li).T("tfdt",function(n){var r,i,a,s,l;return O(function(u){return r=oa(n.reader,n.version),(i=r.baseMediaDecodeTime)?(a=-i/c,(Number(t.jf)||0)<a?(s=t.nc,l=t.mc,S(u,wu(e,t,a,s,l,o),0)):u.A(0)):u.return()})}).parse(i,!1,a)),S(d,Tu(e,t,n),2);case 2:return ei(e.l),f=t.bd,t.bd=!1,S(d,e.g.Ph(t.type,i),3);case 3:return S(d,Hs(e.g.Z,t.type,i,o,r,l,f,s,a),4);case 4:ei(e.l),k(d)}})}function Tu(e,t,n){var r,o,i,a,s,l,u,c,f;return O(function(d){return 1==d.g?((r=t.stream.segmentIndex)instanceof Ul&&(r.Ya(e.j.presentationTimeline.Ib()),o=[],function(e,t){for(var n=(e=m(e.h)).next();!n.done;n=e.next())t(n.value)}(r,function(e){o.push(e.Se())})),i=Math.max(e.i.bufferBehind*e.F,e.j.presentationTimeline.h),null==(a=Fs(e.g.Z,t.type))?(e.H==t&&(e.H=null),d.return()):(s=n-a,l=e.i.evictionGoal,u=e.j.presentationTimeline.Xb(),c=e.j.presentationTimeline.Hb(),f=s-i,c-u>l&&(f=Math.max(s-i,u-l-a)),f<=l?d.return():S(d,e.g.Z.remove(t.type,a,a+f,o),2))):4!=d.g?(ei(e.l),e.H?S(d,Tu(e,e.H,n),4):d.A(0)):(ei(e.l),void k(d))})}function ku(e){return e&&e.type==ct&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Cu(e,t,n,r){var o,i,a,s,l;return O(function(u){switch(u.g){case 1:if(o=n.Yb())return u.return(o);if(i=null,t.ea){var c=t.ea,f=c.h;n instanceof za&&(f=c.j),f.has(n)?(c=f.get(n),r&&(c.xh=r),i=c.ie):i=null}return i||(i=Au(n,t.stream,r||null,e.i.retryParameters,e.g.tc)),a=0,t.ua&&(a=t.ua.h),t.Ua=i,S(u,i.promise,2);case 2:if(s=u.h,t.Ua=null,l=s.data,!n.aesKey){u.A(3);break}return S(u,su(l,n.aesKey,a),4);case 4:l=u.h;case 3:return u.return(l)}})}function Au(e,t,n,r,o,i){i=void 0!==i&&i;var a=e instanceof Ha?e:void 0,s=a?1:0;return(e=lu(e.P(),e.startByte,e.endByte,r,n)).contentType=t.type,o.request(Yo,e,{type:s,stream:t,segment:a,isPreload:i})}function Eu(e,t,n,r){var o,i;return O(function(a){return 1==a.g?(t.ec=!1,t.Jd=!1,t.ld=0,t.Ub=!0,t.La=null,t.ua=null,t.ea&&!e.m.has(t.stream)&&Ql(t.ea),r?(o=e.g.Hc(),i=e.g.Z.getDuration(),S(a,e.g.Z.remove(t.type,o+r,i),3)):S(a,Gs(e.g.Z,t.type),4)):3!=a.g?(ei(e.l),n?S(a,e.g.Z.flush(t.type),3):a.A(3)):(ei(e.l),t.Ub=!1,t.endOfStream=!1,t.Ja||t.sb||Iu(e,t,0),void k(a))})}function Iu(e,t,n){var r=t.type;(r!=ct||e.h.has(r))&&(t.sb=new Sr(function(){var n;return O(function(r){return 1==r.g?(C(r,2),S(r,vu(e,t),4)):2!=r.g?E(r,0):(n=I(r),e.g&&e.g.onError(n),void k(r))})}).ka(n))}function Mu(e){null!=e.sb&&(e.sb.stop(),e.sb=null)}function Ru(e){return O(function(t){return e.Ua?S(t,e.Ua.abort(),0):t.A(0)})}function _u(e,t,n){var r;return O(function(o){if(1==o.g)return 3024==n.code?(t.Ja=!1,Mu(t),Iu(e,t,0),o.return()):S(o,Eo(e.X),2);if(ei(e.l),1===n.category&&1003!=n.code){if(t.Mc)return cu(e,!1),o.return();r=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)}n.handled&&1011==n.code||e.g.onError(n),n.handled||e.i.failureCallback(n),k(o)})}function Lu(e,t){var n,r,o,i,a,s;return t=void 0!==t&&t,O(function(l){if(1==l.g){if(n=Date.now()/1e3,r=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<r)return l.return(!1);e.R=n}return o=ft,(i=e.h.get(o.ia))&&(Mu(i),i.Ua&&(i.Ua.abort(),i.Ua=null),i.pb=null,i.nc=null,i.mc=null,i.Ja=!1,i.ec=!1,i.ld=0,i.Jd=!1,i.Ub=!1,i.ua&&i.ua.fh()),(a=e.h.get(o.Ca))&&(Mu(a),a.Ua&&(a.Ua.abort(),a.Ua=null),a.pb=null,a.nc=null,a.mc=null,a.Ja=!1,a.ec=!1,a.ld=0,a.Jd=!1,a.Ub=!1,a.ua&&a.ua.fh()),s=e.g.video.paused,S(l,nl(e.g.Z,Nu(e)),2)}return!a||a.Ub||a.Ja||a.sb||Iu(e,a,0),!i||i.Ub||i.Ja||i.sb||Iu(e,i,0),s||e.g.video.play(),l.return(!0)})}function Pu(e){if("keep"!==e.i.crossBoundaryStrategy)return!0;var t=le();if(bt()&&t.Pc()){if(!t.Jf())for(n=(t=m(e.h.keys())).next();!n.done;n=t.next())if((n=e.h.get(n.value)).type!==ft.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,n=(t=m(n.fullMimeTypes)).next();!n.done;n=t.next())e.add(sr(n.value));return e.size>1}}else for(var n=(t=m(e.h.keys())).next();!n.done;n=t.next())if((n=e.h.get(n.value)).type!==ft.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0;return!1}function Du(e){e.G.Qa(),Pu(e)&&(e.G.D(e.g.video,"waiting",function(){return Ou(e)}),e.G.D(e.g.video,"timeupdate",function(){return Ou(e)}))}function Ou(e){if(Pu(e)){e.K.stop();var t=e.g.Hc(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.pb)&&null!==n.g&&((t=n.g-t)<0||t>1||(e.I=n.g+.1,e.K.ka(t)))}}function Nu(e,t){function n(t){if(t.fullMimeTypes&&t.fullMimeTypes.size>1&&e.h.has(t.type)){var n=e.h.get(t.type),r=zs(e.g.Z,n.type),o=e.g.Hc();(n=bu(e,n,o,r))&&n.codecs&&n.mimeType&&(t.codecs=n.codecs,t.mimeType=n.mimeType)}}t=void 0!==t&&t;var r=new Map,o=e.o.audio;return o&&(n(o),r.set("audio",o)),(o=e.o.video)&&(n(o),r.set("video",o)),t&&e.B&&r.set(ct,e.B),r}function Uu(){}function Bu(e,t,n,r,o){var i,a=o in r,s=a?n.constructor==Object&&0==Object.keys(r).length:n.constructor==Object&&0==Object.keys(n).length,l=a||s,u=!0;for(i in t){var c=o+"."+i,f=a?r[o]:n[i];l||i in n?void 0===t[i]?void 0===f||l?delete e[i]:e[i]=zt(f):s?e[i]=t[i]:f.constructor==Object&&t[i]&&t[i].constructor==Object?(e[i]||(e[i]=zt(f)),c=Bu(e[i],t[i],f,r,c),u=u&&c):x(t[i])!=x(f)||null==t[i]||"function"!=typeof t[i]&&t[i].constructor!=f.constructor?(X("Invalid config, wrong type for "+c),u=!1):"function"==typeof n[i]&&n[i].length!=t[i].length?($("Unexpected number of arguments for "+c),e[i]=t[i]):e[i]=Array.isArray(e[i])?t[i].slice():t[i]:(X("Invalid config, unrecognized key "+c),u=!1)}return u}function ju(e,t){for(var n={},r=n,o=0,i=0;!((o=e.indexOf(".",o))<0);)0!=o&&"\\"==e[o-1]||(r[i=e.substring(i,o).replace(/\\\./g,".")]={},r=r[i],i=o+1),o+=1;return r[e.substring(i).replace(/\\\./g,".")]=t,n}function Fu(e,t){return e&&t}function zu(e,t){function n(e){return e&&"object"===x(e)&&!Array.isArray(e)}return e=function e(t,r){return Object.keys(t).reduce(function(o,i){var a=t[i];return r.hasOwnProperty(i)?a instanceof HTMLElement&&r[i]instanceof HTMLElement?a.isEqualNode(r[i])||(o[i]=a):n(a)&&n(r[i])?(a=e(a,r[i]),(Object.keys(a).length>0||!n(a))&&(o[i]=a)):Array.isArray(a)&&Array.isArray(r[i])?te(a,r[i])||(o[i]=a):Number.isNaN(a)&&Number.isNaN(r[i])||a!==r[i]&&(o[i]=a):o[i]=a,o},{})}(e,t),function e(t){for(var r=m(Object.keys(t)),o=r.next();!o.done;o=r.next())if(!(t[o=o.value]instanceof HTMLElement))if(n(t[o])&&0===Object.keys(t[o]).length)delete t[o];else{var i=t[o];Array.isArray(i)&&0===i.length||"function"==typeof t[o]?delete t[o]:n(t[o])&&(e(t[o]),0===Object.keys(t[o]).length&&delete t[o])}}(e),e}function Vu(){}function Hu(e){return new ve(e=qe(e)).Eb}function Gu(e,t,n){function r(e){je(i).setUint32(a,e.byteLength,!0),a+=4,i.set(Ue(e),a),a+=e.byteLength}if(!n||!n.byteLength)throw new ze(2,6,6015);var o;o="string"==typeof t?Ke(t,!0):t,e=Ke(e=qe(e),!0);var i=new Uint8Array(12+e.byteLength+o.byteLength+n.byteLength),a=0;return r(e),r(o),r(n),i}function qu(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Gu(e,n=qe(e).split("skd://").pop(),t))}function Wu(e,t){2===e&&(e=t.drmInfo)&&So(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}function Ku(e,t,n){for(n=void 0===n||n,this.h=e,this.g=new Set([e]),t=(e=m(t=t||[])).next();!t.done;t=e.next())this.add(t.value,n)}function Xu(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return ur(e)}),t=t.codecs.split(",").map(function(e){return ur(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function $u(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=m(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Yu(){this.g=null}function Ju(e,t){return e.filter(function(e){return!(e.audio&&e.audio.channelsCount&&e.audio.channelsCount>t)}).sort(function(e,t){return e.audio||t.audio?e.audio?t.audio?(t.audio.channelsCount||0)-(e.audio.channelsCount||0):1:-1:0})}function Qu(e,t){return e.filter(function(e){return!e.audio||e.audio.codecs==t})}function Zu(){}function ec(){var t=1/0,n=le();navigator.connection&&navigator.connection.saveData&&(t=360);var r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,r){return"apple"===e.shakaMediaKeysPolyfill&&"skd"==n&&(n=r.serverCertificate,t=Gu(t,r=Hu(t),n)),t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},o="reload";bt()&&n.Pc()&&(o="smooth");var i={trackSelectionCallback:function(e){return O(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return O(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?S(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return Fu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:r,manifest:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:rc,manifestPreprocessorTXml:oc,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:n.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:rc,manifestPreprocessorTXml:oc,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},streaming:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return Fu([e])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:o,addExtraFeaturesToSourceBuffer:function(e){return Fu([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(e,t){return Fu([e,t])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:i,abrFactory:function(){return new mo},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Yu,[null].concat(g(N.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return i.trackSelectionCallback=function(e){return O(function(t){return t.return(function(e,t,n){var r=n;"AUTO"==r&&(n=e.some(function(e){return!(!e.hdr||"HLG"!=e.hdr)}),r=le().sd(n));var o=e.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=r)});n=[];var i=Nr(t,o.map(function(e){return e.language}));i&&(n=o.filter(function(e){return Lr(e.language)==i})),0==n.length&&(n=o.filter(function(e){return e.primary})),0==n.length&&(o.map(function(e){return e.language}),n=o);var a=n.filter(function(e){return e.height&&e.height<=480});for(a.length&&(a.sort(function(e,t){return t.height-e.height}),n=a.filter(function(e){return e.height==a[0].height})),t=[],n.length&&(o=Math.floor(n.length/2),n.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.push(n[o])),e=m(e),n=e.next();!n.done;n=e.next())(n=n.value).type!=ct&&"image"!=n.type||t.push(n);return t}(e,a.preferredAudioLanguage,a.preferredVideoHdrLevel))})},n.Wa(a)}function tc(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function nc(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Bu(e,t,n||ec(),r,"")}function rc(e){return Fu([e],e)}function oc(e){return Fu([e],e)}function ic(){this.g=null,this.h=[]}function ac(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=(e=m(e.h)).next();!r.done;r=e.next())n+=(r=r.value).state==t?r.duration:0;return n}function sc(){this.i=this.h=null,this.g=[]}function lc(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function uc(){this.C=this.X=NaN,this.l="",this.j=this.ni=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.S=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new ic,this.h=new sc}function cc(e,t,n){e.X=t,e.C=n}function fc(e,t){e.j=isNaN(e.j)?t:e.j+t}function dc(e){for(var t=e.X,n=e.C,r=e.l,o=e.B,i=e.O,a=e.R,s=e.N,l=e.V,u=e.S,c=e.u,f=e.i,d=e.G,p=e.J,h=e.m,g=ac(e.g,"playing"),y=ac(e.g,"paused"),v=ac(e.g,"buffering"),b=e.o,x=e.F,w=e.K,S=e.ni,T=e.j,k=e.M,C=e.I,A=e.H,E=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=m(e.h),o=r.next();!o.done;o=r.next())n.push(t(o.value));return e.g&&n.push(t(e.g)),n}(e.g),I=[],M=(e=m(e.h.g)).next();!M.done;M=e.next())M=M.value,I.push({timestamp:M.timestamp,id:M.id,type:M.type,fromAdaptation:M.fromAdaptation,bandwidth:M.bandwidth});return{width:t,height:n,currentCodecs:r,streamBandwidth:o,decodedFrames:i,droppedFrames:a,corruptedFrames:s,stallsDetected:l,gapsJumped:u,estimatedBandwidth:c,completionPercent:f,loadLatency:d,manifestTimeSeconds:p,drmTimeSeconds:h,playTime:g,pauseTime:y,bufferingTime:v,licenseTime:b,liveLatency:x,maxSegmentDuration:w,manifestSizeBytes:S,bytesDownloaded:T,nonFatalErrorCount:k,manifestPeriodCount:C,manifestGapCount:A,stateHistory:E,switchHistory:I}}function pc(e,t,n,r){jo.call(this),this.N=e,this.V=t,this.Da=r.networkingEngine,this.m=n,this.C=null,this.ya=0,this.Sa=r.md,this.G=r.wk,this.Ta=r.xk,this.g=r.config,this.l=this.H=this.h=null,this.oa=!1,this.I=r.Ik,this.wa=!1,this.i=null,this.ba=!1,this.u=null,this.M=new Map,this.xa=!1,this.Ga=r.Hk,this.X=new uc,this.ma=new Mo,this.B=new Mo,this.O=null,this.j=!1,this.$=r.jj,this.S=this.o=null,this.R=!1,this.K=[],this.J=[],this.F=!0}function hc(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function mc(e,t){if(e.O=t,e.R=!0,e.K)for(var n=(t=m(e.K)).next();!n.done;n=t.next())(n=n.value)();e.K=null}function gc(e){if(e.j)throw new ze(2,7,7003)}function yc(e,t){e.dispatchEvent(new No("onstatechange",(new Map).set("state",t)))}function vc(e,t){var n,r,o;return O(function(i){switch(i.g){case 1:return!e.h||e.i?i.return():(yc(e,"drm-engine"),e.ya=Date.now()/1e3,e.i=e.Sa(),e.G.h=e.i,e.i.configure(e.g.drm,function(){return e.F}),n=no(e.h.variants),r=!0,e.h&&e.h.presentationTimeline&&(r=e.h.presentationTimeline.W()),S(i,wi(e.i,n,e.h.offlineSessionIds,r),2));case 2:if(gc(e),!t){i.A(3);break}return S(i,e.i.fc(t),4);case 4:gc(e);case 3:return S(i,Ki(e.G,e.h),5);case 5:if(!i.h){i.A(0);break}return o=new No("trackschanged",void 0),S(i,Promise.resolve(),7);case 7:e.dispatchEvent(o),k(i)}})}function bc(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=no(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function xc(e,t,n){var r,o,i,a,s;return O(function(l){return 1==l.g?(r=e.g.streaming.segmentPrefetchLimit||2,o=new Kl(r,t,function(t,n,r){return Au(t,n,r||null,e.g.streaming.retryParameters,e.Da,e.F)},!1),e.M.set(t.id,o),t.segmentIndex?l.A(2):S(l,t.createSegmentIndex(),2)):(i="number"==typeof e.m?e.m:0,a=t.segmentIndex.Vb(i),s=null,a&&((s=a.current())||(s=a.next().value)),s||(s=Dl(t.segmentIndex)),s?n?s.aa?S(l,Yl(o,s.aa),0):l.A(0):S(l,$l(o,s.startTime),0):l.A(0))})}function wc(e,t){jo.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:kc,Uc:function(e,t){return Sc(n,"enter",e,t)}},{kd:Tc,jd:kc,Uc:function(e,t){return Sc(n,"enter",e,t)}},{kd:Cc,jd:kc,Uc:function(e,t){return Sc(n,"enter",e,t)}},{kd:kc,jd:Tc,Uc:function(e,t){return Sc(n,"exit",e,t)}},{kd:kc,jd:Cc,Uc:function(e,t){return Sc(n,"exit",e,t)}},{kd:Tc,jd:Cc,Uc:function(e,t){t?Sc(n,"skip",e,t):(Sc(n,"enter",e,t),Sc(n,"exit",e,t))}},{kd:Cc,jd:Tc,Uc:function(e,t){return Sc(n,"skip",e,t)}}],this.h=new oe,this.h.D(this.i,"regionremove",function(e){n.g.delete(e.region)})}function Sc(e,t,n,r){t=new No(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}vl.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},Tl.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},(o=Cl.prototype).ready=function(){var e=this;gl(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){!function(){if(null==e.h||0==e.h&&e.g.duration!=1/0)e.i=!0;else{var t=e.g.currentTime,n=null;if("number"==typeof e.h)n=e.h;else if(e.h instanceof Date){var r=Al(e);null!==r&&(n=e.h.getTime()/1e3-r,n=El(e,n))}null==n?e.i=!0:(n<0&&(n=Math.max(0,t+n)),t!=n?(e.j.Aa(e.g,"seeking",function(){e.i=!0}),e.g.currentTime=n):e.i=!0)}}()})},o.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},o.Wf=function(e){this.h=this.i?this.h:e},o.He=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=El(this,e=e.getTime()/1e3-(Al(this)||0))),e||0},o.Jh=function(){return 0},o.Hh=function(){return 0},o.Ih=function(){return!1},o.xi=function(){},o.ki=function(){var e=$a(this.g.buffered);return null!=e&&e>=this.g.duration-1},(o=Il.prototype).ready=function(){this.m.Fa(.25)},o.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},o.Wf=function(e){xl(this.j,Ml(this,e))},o.He=function(){var e=bl(this.j);return this.h.readyState>0&&!this.h.paused?Ll(this,e):e},o.Jh=function(){return this.i.H},o.Hh=function(){return this.i.G},o.Ih=function(){return this.i.C},o.xi=function(){this.i.vf()},o.ki=function(){if(this.g.W()){var e=this.g.Ic(),t=$a(this.h.buffered);if(null!=t&&t>=e)return!0}return!1},(o=Pl.prototype).getNumReferences=function(){return this.g.length},o.getNumEvicted=function(){return this.i},o.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},o.zk=function(){this.o=!0},o.Gb=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},o.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var r=this.g[n],o=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<o)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},o.get=function(e){return 0==this.g.length||(e-=this.i)<0||e>=this.g.length?null:this.g[e]},o.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},o.mf=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.g.push.apply(this.g,g(e))}},o.ee=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}),this.mf(e),this.Ya(t)},o.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(t){return t.endTime>e}),this.i+=t-this.g.length}},o.pd=function(e,t,n){if(n=void 0!==n&&n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&((t=new Ha((e=this.g[this.g.length-1]).startTime,t,e.C,e.startByte,e.endByte,e.aa,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey)).mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},o.Nf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new Tr(function(){var e=t();e?n.g.push.apply(n.g,g(e)):(n.m.stop(),n.m=null)}),this.m.Fa(e))},Pl.prototype[Symbol.iterator]=function(){return this.Vb(0)},Pl.prototype.Vb=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var r=this.find(e);if(null==r)return null;var o=this.get(r);n?r++:r--;var i=-1;if(o&&o.g.length>0)for(var a=o.g.length-1;a>=0;--a){var s=o.g[a];if(e>=s.startTime&&e<s.endTime){if(!t){for(;a&&!s.l;)a--,s=o.g[a];if(!s.l)return X("No independent partial segment found!"),null}n?r--:r++,i=a-1;break}}return new Nl(this,r,i,n)},Pl.prototype.Se=function(){return-1},H("shaka.media.SegmentIndex",Pl),Pl.forSingleSegment=Ol,Pl.prototype.getIteratorForTime=Pl.prototype.Vb,Pl.prototype.updateEvery=Pl.prototype.Nf,Pl.prototype.fit=Pl.prototype.pd,Pl.prototype.evict=Pl.prototype.Ya,Pl.prototype.mergeAndEvict=Pl.prototype.ee,Pl.prototype.offset=Pl.prototype.offset,Pl.prototype.get=Pl.prototype.get,Pl.prototype.find=Pl.prototype.find,Pl.prototype.markImmutable=Pl.prototype.zk,Pl.prototype.release=Pl.prototype.release,Pl.prototype.getNumEvicted=Pl.prototype.getNumEvicted,Pl.prototype.getNumReferences=Pl.prototype.getNumReferences,(o=Nl.prototype).Id=function(e){this.reverse=e},o.uj=function(){return this.h},o.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.u&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},o.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.u&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},o.fh=function(){var e=this.current();if(e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},H("shaka.media.SegmentIterator",Nl),Nl.prototype.resetToLastIndependent=Nl.prototype.fh,Nl.prototype.next=Nl.prototype.next,Nl.prototype.current=Nl.prototype.current,Nl.prototype.currentPosition=Nl.prototype.uj,Nl.prototype.setReverse=Nl.prototype.Id,p(Ul,Pl),(o=Ul.prototype).clone=function(){var e=new Ul;return e.h=this.h.slice(),e.i=this.i,e},o.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},o.Gb=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Gb(e)},o.find=function(e){for(var t=this.i,n=m(this.h),r=n.next();!r.done;r=n.next()){var o=(r=r.value).find(e);if(null!=o)return o+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},o.get=function(e){for(var t=this.i,n=m(this.h),r=n.next();!r.done;r=n.next()){var o=(r=r.value).get(e-t);if(o)return o;o=r.getNumReferences(),t+=r.getNumEvicted()+o}return null},o.offset=function(){},o.mf=function(){},o.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),0==t.getNumReferences()&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},o.ee=function(){},o.pd=function(){},o.Nf=function(){},H("shaka.media.MetaSegmentIndex",Ul),Ul.prototype.updateEvery=Ul.prototype.Nf,Ul.prototype.fit=Ul.prototype.pd,Ul.prototype.mergeAndEvict=Ul.prototype.ee,Ul.prototype.evict=Ul.prototype.Ya,Ul.prototype.merge=Ul.prototype.mf,Ul.prototype.offset=Ul.prototype.offset,Ul.prototype.get=Ul.prototype.get,Ul.prototype.find=Ul.prototype.find,Ul.prototype.forEachTopLevelReference=Ul.prototype.Gb,Ul.prototype.release=Ul.prototype.release,Bl.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Bl.prototype.set=function(e){this.i=e,jl(this)},Bl.prototype.Tc=function(){return this.g.Tc()},Fl.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},p(Vl,jo),Vl.prototype.release=function(){this.g.clear(),jo.prototype.release.call(this)},Vl.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){var r=(n=n.value).lg;e:{for(var o=n.ke,i=o.length-1;i>=0;i--){var a=o[i];if(a.position<=e){o=a.xd;break e}}o=null}i=o&&!(r===o||r&&o&&r.bandwidth==o.bandwidth&&r.audioSamplingRate==o.audioSamplingRate&&r.codecs==o.codecs&&r.contentType==o.contentType&&r.frameRate==o.frameRate&&r.height==o.height&&r.mimeType==o.mimeType&&r.channelsCount==o.channelsCount&&r.pixelAspectRatio==o.pixelAspectRatio&&r.width==o.width),a=o&&r&&o.label&&r.label&&r.label!==o.label;var s=o&&r&&o.language&&r.language&&r.language!==o.language;r=o&&r&&o.roles&&r.roles&&!ne(r.roles,o.roles),(a||s||r)&&Hl(this,e,o.contentType)&&(n.lg=o,r=new No("audiotrackchange",new Map([["quality",o],["position",e]])),this.dispatchEvent(r)),i&&Hl(this,e,o.contentType)&&(n.lg=o,JSON.stringify(o),n=new No("qualitychange",new Map([["quality",o],["position",e]])),this.dispatchEvent(n))}},p(ql,jo),ql.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),jo.prototype.release.call(this)},Kl.prototype.Ya=function(e,t){t=void 0!==t&&t;for(var n=m(this.h.keys()),r=n.next();!r.done;r=n.next())e>(r=r.value).endTime&&tu(this,r);t&&Zl(this)},Kl.prototype.Id=function(e){this.o=e,this.g&&this.g.Id(e)},nu.prototype.abort=function(){this.ie&&this.ie.abort()},H("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"}),(o=uu.prototype).destroy=function(){return this.l.destroy()},o.configure=function(e){if(this.i=e,this.X=new Ao({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ea&&(Ql(t.ea),t.ea=null);for(var n=(t=m(this.m.keys())).next();!n.done;n=t.next())n=n.value,Ql(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(ct))&&t.ea&&(Ql(t.ea),t.ea=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ea&&(Ql(t.ea),t.ea=null),n=(t=m(this.h.keys())).next();!n.done;n=t.next())(n=this.h.get(n.value)).ea?(eu(n.ea,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(Ql(n.ea),n.ea=null)):e.segmentPrefetchLimit>0&&(n.ea=yu(this,n.stream));e.disableAudioPrefetch||function(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,r=m(e.j.variants),o=r.next(),i={};!o.done;i={Nb:void 0},o=r.next())if(i.Nb=o.value,i.Nb.audio)if(e.m.has(i.Nb.audio)){if(eu(o=e.m.get(i.Nb.audio),t),!(t>0&&n.some(function(e){return function(t){return Mr(e.Nb.audio.language,t)}}(i)))){var a=e.h.get(i.Nb.audio.type);o!==(a&&a.ea)&&Ql(o),e.m.delete(i.Nb.audio)}}else t<=0||!n.some(function(e){return function(t){return Mr(e.Nb.audio.language,t)}}(i))||!(o=yu(e,i.Nb.audio))||(i.Nb.audio.segmentIndex||i.Nb.audio.createSegmentIndex(),e.m.set(i.Nb.audio,o))}(this)},o.start=function(e){var t=this;return O(function(n){if(1==n.g)return S(n,function(e,t){var n,r,o,i,a,s,l;return O(function(u){if(1==u.g){if(!e.o)throw new ze(2,5,5006);return n=Nu(e,!0),S(u,e.g.Z.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(ei(e.l),e.updateDuration(),r=m(n.keys()),o=r.next();!o.done;o=r.next())i=o.value,a=n.get(i),e.h.has(i)||(s=gu(e,a),t.has(a.id)&&(Xl(l=t.get(a.id),function(t,n,r){return Au(t,n,r||null,e.i.retryParameters,e.g.tc)}),s.ea=l),e.h.set(i,s),Iu(e,s,0));Du(e),k(u)})}(t,e||new Map),2);ei(t.l),t.M=!0,k(n)})},o.bd=function(){if(this.g){for(var e=this.g.Hc(),t=m(this.h.keys()),n=t.next();!n.done;n=t.next()){var r,o=n.value;if(n=this.h.get(o),(r=!this.J)&&(r=this.g.Z,r=!(r=o==ct?null!=(r=r.h).g&&null!=r.h&&e>=r.g&&e<r.h:Ya(r=Vs(r,o),e))),r){if(this.R=0,n.ea&&(n.ea.g=null),"audio"===n.type)for(var i=(r=m(this.m.values())).next();!i.done;i=r.next())i.value.g=null;n.ua=null,(null!=zs(this.g.Z,o)||n.Ja)&&mu(this,n),n.Ua&&(n.Ua.abort(),n.Ua=null),o===ct&&(o=this.g.Z).K&&o.K.Ld(),n.bd=!0}!this.J||n.Ub||n.Ja||n.sb||Iu(this,n,0)}Pu(this)&&Ou(this)}},o.updateDuration=function(){var e=xt(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),Ws(this.g.Z)),this.g.Z.rb(t)):e?(this.u&&this.u.Fa(.5),this.g.Z.rb(1/0)):this.g.Z.rb(4294967296)},H("shaka.util.ConfigUtils",Uu),Uu.getDifferenceFromConfigObjects=zu,Uu.convertToConfigObject=ju,Uu.mergeConfigObjects=Bu,H("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2}),H("shaka.drm.FairPlay",Vu),Vu.commonFairPlayResponse=function(e,t){if(2===e&&(e=t.originalRequest.drmInfo)&&So(e.keySystem)){try{var n=He(t.data)}catch(o){return}if(e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0),!e)try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(o){}e&&(t.data=Ne(et(n)))}},Vu.muxFairPlayRequest=function(e,t){Wu(e,t)},Vu.expressplayFairPlayRequest=function(e,t){if(2===e){var n=t.drmInfo;n&&So(n.keySystem)&&Wu(e,t)}},Vu.conaxFairPlayRequest=function(e,t){Wu(e,t)},Vu.ezdrmFairPlayRequest=function(e,t){Wu(e,t)},Vu.verimatrixFairPlayRequest=function(e,t){2===e&&(e=t.drmInfo)&&So(e.keySystem)&&(e=Ze(e=Ue(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=We("spc="+e))},Vu.muxInitDataTransform=function(e,t,n){return qu(e,t,n)},Vu.expressplayInitDataTransform=function(e,t,n){return qu(e,t,n)},Vu.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=qe(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var o=new ArrayBuffer(2*r.length);o=Be(o);for(var i=0,a=r.length;i<a;i++)o[i]=r.charCodeAt(i);return Gu(t,o,n)},Vu.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Gu(e,n=qe(e).split(";").pop(),t))},Vu.verimatrixInitDataTransform=function(e,t,n){return qu(e,t,n)},Vu.initDataTransform=Gu,Vu.defaultGetContentId=Hu,Vu.isFairPlaySupported=function(){var e;return O(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},C(t,2),S(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(I(t),t.return(!1))})},Ku.prototype.add=function(e,t){var n,r=this.h;if(t=void 0===t||t,!(n=!!r.audio!=!!e.audio||!!r.video!=!!e.video||r.language!=e.language)&&(n=r.audio&&e.audio)){n=r.audio;var o=e.audio;n=!(!((!n.channelsCount||!o.channelsCount||n.channelsCount>2||o.channelsCount>2)&&n.channelsCount!=o.channelsCount||n.spatialAudio!==o.spatialAudio||t&&!Xu(n,o))&&$u(n.roles,o.roles)&&n.groupId===o.groupId)}return!n&&(n=r.video&&e.video)&&(r=r.video,n=e.video,n=!((!t||Xu(r,n))&&$u(r.roles,n.roles))),!n&&(this.g.add(e),!0)},Ku.prototype.values=function(){return this.g.values()},H("shaka.media.AdaptationSet",Ku),Yu.prototype.configure=function(e){this.g=e},Yu.prototype.getConfiguration=function(){return this.g},Yu.prototype.create=function(e){var t;if(this.g.language){var n=function(e,t){var n=Nr(t=Lr(t),e.map(function(e){return Or(e)}));return n?e.filter(function(e){return n==Or(e)}):[]}(e,this.g.language);n.length&&(t=n)}t||(t=(t=e.filter(function(e){return e.primary})).length?t:e),e=function(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}(t,this.g.role),e.length&&(t=e),e=function(e,t){return e.filter(function(e){return!!e.video&&(t?e.video.roles.includes(t):0==e.video.roles.length)})}(t,this.g.videoRole),e.length&&(t=e),this.g.videoLayout&&(e=function(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}(t,this.g.videoLayout),e.length&&(t=e)),this.g.hdrLevel&&(e=function(e,t){if("AUTO"==t){var n=e.some(function(e){return!(!e.video||!e.video.hdr||"HLG"!=e.video.hdr)});t=le().sd(n)}return e.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==t})}(t,this.g.hdrLevel),e.length&&(t=e));var r=[this.g.channelCount,this.g.preferredAudioChannelCount];if((e=r.filter(function(e,t){return e&&r.indexOf(e)===t})).length)for(n=(e=m(e)).next();!n.done;n=e.next())if((n=Ju(t,n.value)).length){t=n;break}this.g.audioLabel&&(e=function(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}(t,this.g.audioLabel),e.length&&(t=e)),this.g.videoLabel&&(e=function(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}(t,this.g.videoLabel),e.length&&(t=e)),e=function(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}(t,this.g.spatialAudio),e.length&&(t=e);var o=[this.g.audioCodec,this.g.activeAudioCodec].concat(g(this.g.preferredAudioCodecs));if((e=o.filter(function(e,t){return e&&o.indexOf(e)===t})).length)for(n=(e=m(e)).next();!n.done;n=e.next())if((n=Qu(t,n.value)).length){t=n;break}return new Ku(t[0],t,!("smooth"==this.g.codecSwitchingStrategy&&bt()))},H("shaka.util.PlayerConfiguration",Zu),Zu.mergeConfigObjects=nc,Zu.createDefaultForLL=tc,Zu.createDefault=ec,p(pc,jo),(o=pc.prototype).getStartTime=function(){return this.m},o.rd=function(){return this.N},o.Hg=function(){return this.h},o.getStats=function(){return this.X},o.Sj=function(){return this.o?$r(this.o):null},o.Rj=function(){return this.S?Yr(this.S):null},o.start=function(){var t,n=this;O(function(r){switch(r.g){case 1:return S(r,Promise.resolve(),2);case 2:return C(r,3),S(r,function(e){var t,n,r,o,i;return O(function(a){switch(a.g){case 1:if(yc(e,"manifest-parser"),e.l||(e.H=ta(e.N,e.V),e.l=e.H(),e.l.configure(e.g.manifest,function(){return e.F})),t=Date.now()/1e3,yc(e,"manifest"),e.h){a.A(2);break}return S(a,e.l.start(e.N,e.Ta),3);case 3:return e.h=a.h,S(a,function(e){var t,n,r,o,i;return O(function(a){if(e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:e.g.preferredAudioChannelCount,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),1!=e.h.variants.length&&"HLS"!=e.h.type)return a.A(0);if(!(t=bc(e)))return a.A(0);for(n=[],r=m([t.video,t.audio]),o=r.next();!o.done;o=r.next())(i=o.value)&&!i.segmentIndex&&n.push(i.createSegmentIndex());return n.length>0?S(a,Promise.all(n),0):a.A(0)})}(e),2);case 2:return e.ma.resolve(),n=new No("manifestparsed",void 0),S(a,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),0==e.h.variants.length)throw new ze(2,4,4036);if(function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.h),!Xi(e.G,e.h)){a.A(6);break}return r=new No("trackschanged",void 0),S(a,Promise.resolve(),7);case 7:gc(e),e.dispatchEvent(r);case 6:o=Date.now()/1e3,i=o-t,e.X.J=i,k(a)}})}(n),5);case 5:if(gc(n),"webkit"===e.shakaMediaKeysPolyfill){r.A(6);break}return S(r,vc(n),7);case 7:gc(n);case 6:if(!n.$){r.A(8);break}return S(r,function(e){var t,n,r,o,i;return O(function(a){return!e.o&&(t=bc(e))&&(e.o=t),e.o?(n=e.h.presentationTimeline.W(),r=[],(o=e.o).video&&r.push(xc(e,o.video,n)),o.audio&&r.push(xc(e,o.audio,n)),(i=ro(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&lo(o.audio,i,e.g)&&(r.push(xc(e,i,n)),e.S=i),S(a,Promise.all(r),0)):a.A(0)})}(n),9);case 9:gc(n);case 8:if(!n.$||!n.i){r.A(10);break}return S(r,function(e){return O(function(t){return 1==t.g?e.J?S(t,e.m,3):t.A(0):S(t,Promise.all(e.X.map(function(e){return e.promise})),0)})}(n.i),11);case 11:gc(n);case 10:n.B.resolve(),E(r,0);break;case 3:(t=I(r))instanceof ze&&(7001==t.code||7003==t.code)||n.B.reject(t),k(r)}})},o.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):jo.prototype.dispatchEvent.call(this,e)},o.onError=function(e){2===e.severity&&(this.B.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new No("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},o.configure=function(e,t){e=ju(e,t),nc(this.g,e)},o.getConfiguration=function(){return zt(this.g)},o.ol=function(){return this.B},o.destroy=function(){var e,t,n=this;return O(function(r){if(1==r.g)return n.j=!0,!n.l||n.oa?r.A(2):S(r,n.l.stop(),2);if(4!=r.g)return n.u&&n.u.release(),n.I&&!n.wa&&n.I.release(),!n.i||n.ba?r.A(4):S(r,n.i.destroy(),4);if(n.M.size>0&&!n.xa)for(e=m(n.M.values()),t=e.next();!t.done;t=e.next())Ql(t.value);k(r)})},H("shaka.media.PreloadManager",pc),pc.prototype.destroy=pc.prototype.destroy,pc.prototype.waitForFinish=pc.prototype.ol,pc.prototype.getPrefetchedTextTrack=pc.prototype.Rj,pc.prototype.getPrefetchedVariantTrack=pc.prototype.Sj,p(wc,jo),wc.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,jo.prototype.release.call(this)},wc.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=m(this.i.h.values()),r=n.next();!r.done;r=n.next()){r=r.value;var o=this.g.get(r),i=e<r.startTime?Tc:e>r.endTime?Cc:kc;this.g.set(r,i);for(var a=m(this.m),s=a.next();!s.done;s=a.next())(s=s.value).kd==o&&s.jd==i&&s.Uc(r,t)}}};var Tc=1,kc=2,Cc=3;function Ac(e,t,n){var r,o,i,a,s,l,u;return O(function(c){switch(c.g){case 1:var f=new ve(e).qb.split("/").pop().split(".");return r=1==f.length?"":f.pop().toLowerCase(),(o=Ec.get(r))?c.return(o):(i=0,a=qo([e],n),C(c,2),a.method="HEAD",S(c,t.request(i,a).promise,4));case 4:s=c.h,o=s.headers["content-type"],E(c,3);break;case 2:if(!(l=I(c))||1002!=l.code&&1001!=l.code){c.A(3);break}return a.method="GET",S(c,t.request(i,a).promise,6);case 6:u=c.h,o=u.headers["content-type"];case 3:return c.return(o?o.toLowerCase().split(";").shift():"")}})}
/*
      		 @license
      		 Copyright 2013 Ali Al Dallal

      		 Licensed under the MIT license.

      		 Permission is hereby granted, free of charge, to any person obtaining a copy
      		 of this software and associated documentation files (the "Software"), to deal
      		 in the Software without restriction, including without limitation the rights
      		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
      		 copies of the Software, and to permit persons to whom the Software is
      		 furnished to do so, subject to the following conditions:

      		 The above copyright notice and this permission notice shall be included in
      		 all copies or substantial portions of the Software.

      		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
      		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
      		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
      		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
      		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
      		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
      		 SOFTWARE.
      		*/
for(var Ec=(new Map).set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html"),Ic={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},Mc=m(Object.keys(Ic)),Rc=Mc.next();!Rc.done;Rc=Mc.next()){var _c=Rc.value;Ic[_c.toLowerCase()]=Ic[_c]}function Lc(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return Lc(t,e)}).join("");if(!e.payload)return e.payload;var n=[],r=e.fontWeight>=Hn,o=e.fontStyle==qn,i=e.textDecoration.includes(Kn);return r&&n.push(["b"]),o&&n.push(["i"]),i&&n.push(["u"]),""==(o=e.color)&&t&&(o=t.color),r="",(o=Pc(o))&&(r+="."+o),""==(o=e.backgroundColor)&&t&&(o=t.backgroundColor),(t=Pc(o))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(e,t){var n=m(t);return"<"+(t=n.next().value)+(void 0===(n=n.next().value)?"":n)+">"+e+"</"+t+">"},e.payload)}function Pc(e){var t=(e=e.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Dc(e,t){for(var n=[],r=(e=m(Oc(e))).next();!r.done;r=e.next())if((r=r.value).isContainer)n.push.apply(n,g(Dc(r.nestedCues,r)));else{var o=r.clone();o.nestedCues=[],o.payload=Lc(r,t),n.push(o)}return n}function Oc(e){for(var t=[],n=(e=m(e)).next(),r={};!n.done;r={ig:void 0},n=e.next())r.ig=n.value,t.some(function(e){return function(t){return Cn(e.ig,t)}}(r))||t.push(r.ig);return t}function Nc(e){function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(r){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),"vertical-lr"==e.writingMode?n.vertical="lr":"vertical-rl"==e.writingMode&&(n.vertical="rl"),1==e.lineInterpretation&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}function Uc(e,t){var n=Dc(t),r=[];t=e.cues?Array.from(e.cues):[];for(var o=(n=m(n)).next(),i={};!o.done;i={vd:void 0},o=n.next())i.vd=o.value,!t.some(function(e){return function(t){return t.startTime==e.vd.startTime&&t.endTime==e.vd.endTime&&t.text==e.vd.payload}}(i))&&i.vd.payload&&(o=Nc(i.vd))&&r.push(o);for(n=(t=m(t=r.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?r.indexOf(t)-r.indexOf(e):r.indexOf(e)-r.indexOf(t)}))).next();!n.done;n=t.next())e.addCue(n.value)}function Bc(e,t){var n=!1;"disabled"===e.mode&&(n=!0,e.mode="hidden");for(var r=0;r<e.cues.length;){var o=e.cues[r];t(o)?e.removeCue(o):r++}n&&(e.mode="disabled")}function jc(e){var t=this;this.i=e,this.l=new oe,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var e=m(t.h.values()),n=e.next();!n.done;n=e.next())n.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){for(var e=new Map,n=t.i.Lc(),r=(n=m(n)).next();!r.done;r=n.next()){if(r=r.value,t.h.has(r.id)){var o=t.h.get(r.id);r.active||"disabled"===o.track.mode||(o.track.mode="disabled"),t.h.delete(r.id)}else{(o=t.j.ownerDocument.createElement("track")).kind=Fc(r);var i=o,a=void 0;if(r.label)a=r.label;else if(r.language)if(r.language in Ic)a=Ic[r.language];else{var s=Dr(r.language);s in Ic&&(a=Ic[s]+" ("+r.language+")")}a||(a=r.originalTextId,r.language&&r.language!==r.originalTextId&&(a+=" ("+r.language+")")),i.label=a,r.language in Ic&&(o.srclang=r.language),"CHROMIUM"===le().Ea()&&(o.src="data:,WEBVTT"),o.track.mode="disabled",t.j.appendChild(o)}e.set(r.id,o),r.active&&(t.g=r.id)}for(r=(n=m(t.h.values())).next();!r.done;r=n.next())r.value.remove();t.g>-1&&(e.has(t.g)?"disabled"===(n=e.get(t.g).track).mode&&(n.mode=t.u?"showing":"hidden"):t.g=-1),t.h=e},this.B=function(){if(!t.o){var e=t.j;t.o=new Tr(function(){if(t.o=null,t.j===e){var n=-1,r=!1;if(t.h.has(t.g)){var o=t.h.get(t.g);"showing"===o.track.mode?(n=t.g,r=!0):"hidden"===o.track.mode&&(n=t.g)}if(!r)for(o=(r=m(t.h)).next();!o.done;o=r.next()){var i=m(o.value);if(o=i.next().value,"showing"===(i=i.next().value).track.mode){n=o;break}n<0&&"hidden"===i.track.mode&&(n=o)}for(o=(r=m(t.h)).next();!o.done;o=r.next())o=(i=m(o.value)).next().value,i=i.next().value,o!==n&&"disabled"!==i.track.mode&&(i.track.mode="disabled");t.g!==n&&(t.g=n,n>-1&&t.i.mh({id:n})),t.i.rh(n>-1&&"showing"===t.h.get(n).track.mode)}}).ka(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}function Fc(e){var t=le();return e.forced&&"WEBKIT"===t.Ea()?"forced":"caption"===e.kind||e.roles&&e.roles.some(function(e){return e.includes("transcribes-spoken-dialog")})&&e.roles.some(function(e){return e.includes("describes-music-and-sound")})?"captions":"subtitles"}function zc(e,t){for(pe("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,t=(e=m(Array.from(this.h.textTracks))).next();!t.done;t=e.next())"metadata"!==(t=t.value).kind&&"chapters"!==t.kind&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}function Vc(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function Hc(){}function Gc(t,n){var r=this;this.m=!1,this.h=[],this.j=t,this.o=n,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new Tr(function(){r.j.paused||Xc(r)}),qc(this),this.l=new Map,this.i=new oe,this.i.D(document,"fullscreenchange",function(){Xc(r,!0)}),this.i.D(this.j,"seeking",function(){Xc(r,!0)}),this.i.D(this.j,"ratechange",function(){qc(r)}),this.i.D(this.j,"resize",function(){var e=r.j,t=e.videoWidth;e=e.videoHeight,r.u=t&&e?t/e:null}),this.F=null,"ResizeObserver"in e&&(this.F=new ResizeObserver(function(){Xc(r,!0)}),this.F.observe(this.g)),this.G=new Map}function qc(e){e.B&&(e.h.length?e.B.Fa((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function Wc(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Kc(e,t,n,r,o){for(var i=!1,a=[],s=[],l=(t=m(t)).next();!l.done;l=t.next()){l=l.value,o.push(l);var u=e.l.get(l),c=l.startTime<=r&&l.endTime>r,f=u?u.gj:null;u&&(a.push(u.kg),u.$c&&a.push(u.$c),c||(i=!0,e.l.delete(l),u=null)),c&&(s.push(l),u?Wc(e,f)||(i=!0):($c(e,l,o),f=(u=e.l.get(l)).gj,i=!0)),l.nestedCues.length>0&&f&&Kc(e,l.nestedCues,f,r,o),o.pop()}if(i){for(o=(r=m(a)).next();!o.done;o=r.next())(o=o.value).parentElement&&o.parentElement.removeChild(o);for(s.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),r=(s=m(s)).next();!r.done;r=s.next())(r=e.l.get(r.value)).$c?(r.$c.contains(n)&&r.$c.removeChild(n),n.appendChild(r.$c),r.$c.appendChild(r.kg)):n.appendChild(r.kg)}}function Xc(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||void 0!==t&&t){for(var r=(t=m(e.G.values())).next();!r.done;r=t.next())ns(r.value);ns(e.g),e.l.clear(),e.G.clear()}e.m&&Kc(e,e.h,e.g,n,[])}}function $c(e,t,n){var r=n.length>1,o=r?"span":"div";t.lineBreak&&(o="br"),t.rubyTag&&(o=t.rubyTag),r=!r&&t.nestedCues.length>0;var i=document.createElement(o);if("br"!=o&&function(e,t,n,r,o){var i=t.style,a=0==n.nestedCues.length,s=r.length>1;i.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,function(e){return" ".repeat(e.length)});if(i.webkitTextStrokeColor=n.textStrokeColor,i.webkitTextStrokeWidth=n.textStrokeWidth,i.color=n.color,i.direction=n.direction,i.opacity=n.opacity,i.paddingLeft=Yc(n.linePadding,n,e.o),i.paddingRight=Yc(n.linePadding,n,e.o),i.textCombineUpright=n.textCombineUpright,i.textShadow=n.textShadow,n.backgroundImage)i.backgroundImage="url('"+n.backgroundImage+"')",i.backgroundRepeat="no-repeat",i.backgroundSize="contain",i.backgroundPosition="center",n.backgroundColor&&(i.backgroundColor=n.backgroundColor),i.width="100%",i.height="100%";else{if(n.nestedCues.length)var u=t;else u=document.createElement("span"),t.appendChild(u);n.border&&(u.style.border=n.border),o||((t=function(e,t){for(var n=e.length-1;n>=0;n--){var r=t(e[n]);if(r||0===r)return r}return null}(r,function(e){return e.backgroundColor}))?u.style.backgroundColor=t:l&&(u.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(u.setAttribute("translate","no"),u.textContent=l)}s&&!r[r.length-1].isContainer?i.display="inline":(i.display="flex",i.flexDirection="column",i.alignItems="center","left"==n.textAlign||"start"==n.textAlign?(i.width="100%",i.alignItems="start"):"right"!=n.textAlign&&"end"!=n.textAlign||(i.width="100%",i.alignItems="end"),i.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),a||(i.margin="0"),i.fontFamily=n.fontFamily,i.fontWeight=n.fontWeight.toString(),i.fontStyle=n.fontStyle,i.letterSpacing=n.letterSpacing,i.fontSize=Yc(n.fontSize,n,e.o,e.C?e.C.fontScaleFactor:1),null!=(r=n.line)&&((a=n.lineInterpretation)==Un&&(a=1,s=16,e.u&&e.u<1&&(s=32),r=r<0?100+r/s*100:r/s*100),1==a&&(i.position="absolute",n.writingMode==Nn?(i.width="100%",n.lineAlign==Bn?i.top=r+"%":"end"==n.lineAlign&&(i.bottom=100-r+"%")):"vertical-lr"==n.writingMode?(i.height="100%",n.lineAlign==Bn?i.left=r+"%":"end"==n.lineAlign&&(i.right=100-r+"%")):(i.height="100%",n.lineAlign==Bn?i.right=r+"%":"end"==n.lineAlign&&(i.left=100-r+"%")))),i.lineHeight=n.lineHeight,e=function(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Rn?n:"left"===e||"start"===e&&t===On||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===On?"line-right":"center"}(n),"line-left"==e?(i.cssFloat="left",null!==n.position&&(i.position="absolute",n.writingMode==Nn?(i.left=n.position+"%",i.width="auto"):i.top=n.position+"%")):"line-right"==e?(i.cssFloat="right",null!==n.position&&(i.position="absolute",n.writingMode==Nn?(i.right=100-n.position+"%",i.width="auto"):i.bottom=n.position+"%")):null!==n.position&&50!=n.position&&(i.position="absolute",n.writingMode==Nn?(i.left=n.position+"%",i.width="auto"):i.top=n.position+"%",n.size&&(i.transform="translateX(-50%)")),i.textAlign=n.textAlign,i.textDecoration=n.textDecoration.join(" "),i.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&i.writingMode==n.writingMode||(i.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Nn?i.width=n.size+"%":i.height=n.size+"%")}(e,i,t,n,r),n=null,t.region&&t.region.id){var a=t.region,s=e.u===4/3?2.5:1.9;if(n=a.id+"_"+a.width+"x"+a.height+(a.heightUnits==_t?"%":"px")+"-"+a.viewportAnchorX+"x"+a.viewportAnchorY+(a.viewportAnchorUnits==_t?"%":"px"),e.G.has(n))n=e.G.get(n);else{o=document.createElement("span");var l=a.heightUnits==_t?"%":"px",u=a.widthUnits==_t?"%":"px",c=a.viewportAnchorUnits==_t?"%":"px";o.id="shaka-text-region---"+n,o.classList.add("shaka-text-region"),o.style.position="absolute";var f=a.height,d=a.width;2===a.heightUnits&&(f=5.33*a.height,l="%"),2===a.widthUnits&&(d=a.width*s,u="%"),o.style.height=f+l,o.style.width=d+u,2===a.viewportAnchorUnits?(s=a.viewportAnchorY/75*100,l=a.viewportAnchorX/(e.u===4/3?160:210)*100,s-=a.regionAnchorY*f/100,l-=a.regionAnchorX*d/100,o.style.top=s+"%",o.style.left=l+"%"):(o.style.top=a.viewportAnchorY-a.regionAnchorY*f/100+c,o.style.left=a.viewportAnchorX-a.regionAnchorX*d/100+c),0!==a.heightUnits&&0!==a.widthUnits&&0!==a.viewportAnchorUnits&&(a=Math.max(0,Math.min(100-(parseInt(o.style.width.slice(0,-1),10)||0),parseInt(o.style.left.slice(0,-1),10)||0)),o.style.top=Math.max(0,Math.min(100-(parseInt(o.style.height.slice(0,-1),10)||0),parseInt(o.style.top.slice(0,-1),10)||0))+"%",o.style.left=a+"%"),o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.G.set(n,o),n=o}}o=i,r&&((o=document.createElement("span")).classList.add("shaka-text-wrapper"),o.style.backgroundColor=t.backgroundColor,o.style.lineHeight="normal",i.appendChild(o)),e.l.set(t,{kg:i,gj:o,$c:n})}function Yc(e,t,n,r){r=void 0===r?1:r;var o=(o=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(o[1]),unit:o[2]}:null;if(!o)return e;switch(e=o.unit,r*=o.value,e){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return r+e}}function Jc(e,t){this.g=t,this.j=e,this.F=new Map,this.l=void 0,this.C=!1,this.J=!0,this.o=this.I=!1,this.B=this.u=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.m={},this.i=new oe,this.G=[],this.h=null}function Qc(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function Zc(e){return(e=e.g.targets)?e.filter(function(e){return e.mode===Ff&&e.enabled}):[]}function ef(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:t.g.version,sf:t.l,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.j.getBandwidthEstimate()/1e3}}function tf(e,t,n){if(n=void 0===n?{}:n,t=cf(e,t=Object.assign({e:t,ts:Date.now()},n),Ff),n=e.g.targets,!(e.g.version<wf)&&n){var r=Zc(e);n=Array.from(new Set([].concat(g(Mf),g(Lf))));for(var o=(r=m(r)).next();!o.done;o=r.next()){var i=of((o=o.value).includeKeys||[],n);i.includes(Nf)||i.push(Nf),i=af(t,i);var a=o.events||[],s=i.e,l=i.sta;s&&(!Pf.includes(s)||!("ps"!==s||l&&Df.includes(l))||a&&a.length>0&&!a.includes(s))||rf(e,i,o)}}}function nf(e,t,n){if(e.g.enabled){n=cf(e,n,Bf);var r=sf({mode:Bf,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.m[r]||(e.m[r]={request:1,response:1}),n.sn=e.m[r].request++,function(e,t,n){if(n)e=df(e),Object.keys(e).length&&Object.assign(t.headers,e);else{var r=ff(e);r&&(t.uris=t.uris.map(function(e){return pf(e,r)}))}}(n=af(n,r=of(r=e.g.includeKeys||[],e.g.version==wf?Array.from(new Set([].concat(g(Mf),g(Rf)))):If)),t,e.g.useHeaders)}}function rf(e,t,n,r){var o={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},i=n.url;if(n.useHeaders){if(t=df(t),!Object.keys(t).length)return;r&&Object.assign(r.headers,t),r=qo([i],o),Object.assign(r.headers,t)}else{if(!(t=ff(t)))return;i=pf(i,t),r&&(r.uri=i),r=qo([i],o)}e.j.Wb().request(9,r)}function of(e,t){if(!e||0===e.length)return t;for(var n=m(e),r=n.next();!r.done;r=n.next())t.includes(r.value);return e.filter(function(e){return t.includes(e)})}function af(e,t){return Object.keys(e).reduce(function(n,r){return t.includes(r)&&(n[r]=e[r]),n},{})}function sf(e){var t=Object.keys(e).sort().reduce(function(t,n){return"enabled"!==n&&(t[n]=e[n]),t},{});return JSON.stringify(t)}function lf(e,t){if(!(t=e.j.Fc()[t]).length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):0}function uf(e,t,n){var r=t.segment,o=0;r&&(o=r.endTime-r.startTime),(o={d:1e3*o,st:e.j.W()?Tf:Sf}).ot=function(e){if(0===e.type)return vf;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?yf:gf;if("audio"==t)return mf;if("text"==t)return"application/mp4"===e.mimeType?xf:bf}}(t);var i=o.ot===gf||o.ot===mf||o.ot===yf||o.ot===xf;if(t=t.stream){var a=e.j.Pb();if(i&&(o.bl=function(e,t){if(!(t=e.j.Fc()[t]).length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}(e,t.type),o.ot!==xf)){var s=lf(e,t.type);o.dl=a?s/Math.abs(a):s}if(t.bandwidth&&(o.br=t.bandwidth/1e3),t.segmentIndex&&r){if((a=t.segmentIndex.Vb(r.endTime,!0,a<0))&&(a=a.next().value)&&a!=r){if(n&&!ne(r.P(),a.P())){s=a.P()[0];var l=new URL(s);if(n=new URL(n),l.origin!==n.origin)n=s;else{for(s=l.pathname.split("/").slice(1),n=n.pathname.split("/").slice(1,-1);s[0]===n[0];)s.shift(),n.shift();for(;n.length;)n.shift(),s.unshift("..");n=s.join("/")}o.nor=n}!a.startByte&&!a.endByte||r.startByte==a.startByte&&r.endByte==a.endByte||(n=a.startByte+"-",a.endByte&&(n+=a.endByte),o.nrr=n)}n=e.j.Pb()||1,a=lf(e,t.type)||500,r=(t=t.bandwidth)?t*(r.endTime-r.startTime)/1e3/(a/n/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(r)||(o.rtp=r)}}return i&&o.ot!==xf&&(o.tb=function(e,t){var n=e.j.lc();if(!n.length)return NaN;e=n[0];for(var r=(n=m(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case gf:return e.videoBandwidth||NaN;case mf:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,o.ot)/1e3),o}function cf(e,t,n){Object.assign(t,ef(e)),t.pr=e.j.Pb();var r=t.ot===gf||t.ot===yf;return e.I&&r&&(t.bs=!0,t.su=!0,e.I=!1),null==t.su&&(t.su=e.J),e.j.W()&&(r=xd(e.j),t.ltc=r||void 0),document.hidden&&(t.bg=!0),null==(r=e.B&&e.u?e.B-(e.H||e.u):void 0)||e.K[n]||(t.msd=r,e.K[n]=!0),t}function ff(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function r(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var o=[],i={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n,ttfb:n,ttlb:n},a=Object.keys(e||{}).sort(),s=(a=m(a)).next();!s.done;s=a.next()){var l=e[s=s.value];if(r(l)&&("v"!==s||1!==l)&&("pr"!=s||1!==l)){var u,c=i[s];c&&(l=c(l)),u="string"===(c=x(l))&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(l):"boolean"===c?s:"symbol"===c?s+"="+l.description:s+"="+l,o.push(u)}}return o.join(",")}function df(e){for(var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],o=[{},{},{},{}],i={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3},a=(t=m(t)).next();!a.done;a=t.next())o[null!=i[a=a.value]?i[a]:1][a]=e[a];for(e=0;e<o.length;e++)(i=ff(o[e]))&&(n["CMCD-"+r[e]]=i);return n}function pf(e,t){return!t||e.includes("offline:")?e:((e=new ve(e)).g.set("CMCD",t),e.toString())}(o=jc.prototype).configure=function(){},o.remove=function(e,t){return!!this.i&&(this.h.has(this.g)&&Bc(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e}),!0)},o.append=function(e){this.h.has(this.g)&&Uc(this.h.get(this.g).track,e)},o.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},o.isTextVisible=function(){return this.u},o.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;"disabled"!==t.mode&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&3===this.i.m)if(t=Array.from(this.i.h.textTracks).filter(function(e){return["captions","subtitles","forced"].includes(e.kind)}),e){e=null;for(var n=(t=m(t)).next();!n.done;n=t.next()){if("showing"===(n=n.value).mode){e=null;break}e||"hidden"!==n.mode||(e=n)}e&&(e.mode="showing")}else for(t=(e=m(t)).next();!t.done;t=e.next())"showing"===(t=t.value).mode&&(t.mode="hidden")},o.setTextLanguage=function(){},o.enableTextDisplayer=function(){!this.j&&this.i&&2===this.i.m&&(this.j=this.i.h,this.l.Aa(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())},H("shaka.text.NativeTextDisplayer",jc),jc.prototype.enableTextDisplayer=jc.prototype.enableTextDisplayer,jc.prototype.setTextLanguage=jc.prototype.setTextLanguage,jc.prototype.setTextVisibility=jc.prototype.setTextVisibility,jc.prototype.isTextVisible=jc.prototype.isTextVisible,jc.prototype.destroy=jc.prototype.destroy,jc.prototype.append=jc.prototype.append,jc.prototype.remove=jc.prototype.remove,jc.prototype.configure=jc.prototype.configure,(o=zc.prototype).configure=function(){},o.remove=function(e,t){return!!this.g&&(Bc(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},o.append=function(e){this.g&&Uc(this.g,e)},o.destroy=function(){return this.g&&(Bc(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},o.isTextVisible=function(){return!!this.g&&"showing"==this.g.mode},o.setTextVisibility=function(e){e&&!this.g&&Vc(this),this.g&&(this.g.mode=e?"showing":"hidden")},o.setTextLanguage=function(){},o.enableTextDisplayer=function(){Vc(this)},H("shaka.text.SimpleTextDisplayer",zc),zc.prototype.enableTextDisplayer=zc.prototype.enableTextDisplayer,zc.prototype.setTextLanguage=zc.prototype.setTextLanguage,zc.prototype.setTextVisibility=zc.prototype.setTextVisibility,zc.prototype.isTextVisible=zc.prototype.isTextVisible,zc.prototype.destroy=zc.prototype.destroy,zc.prototype.append=zc.prototype.append,zc.prototype.remove=zc.prototype.remove,zc.prototype.configure=zc.prototype.configure,(o=Hc.prototype).configure=function(){},o.remove=function(){},o.append=function(){},o.destroy=function(){},o.isTextVisible=function(){return!1},o.setTextVisibility=function(){},o.setTextLanguage=function(){},o.enableTextDisplayer=function(){},H("shaka.text.StubTextDisplayer",Hc),Hc.prototype.enableTextDisplayer=Hc.prototype.enableTextDisplayer,Hc.prototype.setTextLanguage=Hc.prototype.setTextLanguage,Hc.prototype.setTextVisibility=Hc.prototype.setTextVisibility,Hc.prototype.isTextVisible=Hc.prototype.isTextVisible,Hc.prototype.destroy=Hc.prototype.destroy,Hc.prototype.append=Hc.prototype.append,Hc.prototype.remove=Hc.prototype.remove,Hc.prototype.configure=Hc.prototype.configure,(o=Gc.prototype).configure=function(e){this.C=e,qc(this),Xc(this,!0)},o.append=function(e){for(var t=[].concat(g(this.h)),n=(e=m(Oc(e))).next(),r={};!n.done;r={jg:void 0},n=e.next())r.jg=n.value,t.some(function(e){return function(t){return Cn(t,e.jg)}}(r))||this.h.push(r.jg);this.h.length&&qc(this),Xc(this)},o.destroy=function(){return this.g?(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null),Promise.resolve()):Promise.resolve()},o.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(n){return n.startTime<e||n.endTime>=t}),Xc(this,n>this.h.length),this.h.length||qc(this),!0},o.isTextVisible=function(){return this.m},o.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),Xc(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},o.setTextLanguage=function(e){e&&"und"!=e?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},o.enableTextDisplayer=function(){},H("shaka.text.UITextDisplayer",Gc),Gc.prototype.enableTextDisplayer=Gc.prototype.enableTextDisplayer,Gc.prototype.setTextLanguage=Gc.prototype.setTextLanguage,Gc.prototype.setTextVisibility=Gc.prototype.setTextVisibility,Gc.prototype.isTextVisible=Gc.prototype.isTextVisible,Gc.prototype.remove=Gc.prototype.remove,Gc.prototype.destroy=Gc.prototype.destroy,Gc.prototype.append=Gc.prototype.append,Gc.prototype.configure=Gc.prototype.configure,H("shaka.text.WebVttGenerator",function(){}),Jc.prototype.setMediaElement=function(t){this.h=t,function(t){t.i.D(t.h,"playing",function(){t.B||(t.B=Date.now()),tf(t,"ps",{dd:"p"})}),t.i.D(t.h,"volumechange",function(){tf(t,t.h.muted?"m":"um")}),t.i.D(t.h,"play",function(){t.u||(t.u=Date.now(),tf(t,"ps",{dd:"s"}))}),t.i.D(t.h,"pause",function(){tf(t,"ps",{dd:"a"})}),t.i.D(t.j,"buffering",function(){tf(t,"ps",{dd:"w"})}),t.i.D(t.h,"seeking",function(){return tf(t,"ps",{dd:"k"})}),t.i.D(document,"fullscreenchange",function(){tf(t,document.fullscreenElement?"pe":"pc")});var n=t.h;(n.webkitPresentationMode||n.webkitSupportsFullscreen)&&t.i.D(n,"webkitpresentationmodechanged",function(){n.webkitPresentationMode?tf(t,"inline"!==n.webkitPresentationMode?"pe":"pc"):n.webkitSupportsFullscreen&&tf(t,n.webkitDisplayingFullscreen?"pe":"pc")}),t.i.D(t.h,"enterpictureinpicture",function(){tf(t,"pe")}),t.i.D(t.h,"leavepictureinpicture",function(){tf(t,"pc")}),"documentPictureInPicture"in e&&t.i.D(e.documentPictureInPicture,"enter",function(e){tf(t,"pe"),t.i.Aa(e.window,"pagehide",function(){tf(t,"pc")})}),t.i.D(document,"visibilitychange",function(){document.hidden?tf(t,"b",{bg:!0}):tf(t,"b")}),t.i.D(t.j,"complete",function(){tf(t,"ps",{dd:"e"})})}(this)},Jc.prototype.configure=function(e){this.g=e,function(e){Qc(e);for(var t=Zc(e),n=(t=m(t)).next();!n.done;n=t.next())if(void 0===(n=n.value.timeInterval)&&(n=Of),n>=1){var r=new Tr(function(){return tf(e,Uf)});r.Fa(n),e.G.push(r)}}(this)};var hf="m",mf="a",gf="v",yf="av",vf="i",bf="c",xf="tt",wf=2,Sf="v",Tf="l",kf="d",Cf="ld",Af="h",Ef="lh";H("shaka.util.CmcdManager.StreamingFormat",{DASH:kf,Sl:Cf,HLS:Af,Tl:Ef,im:"s",OTHER:"o"});var If="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),Mf="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),Rf="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),_f="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),Lf=["e","sta"],Pf="ps e t c b m um pe pc".split(" "),Df="spawkrfeqd".split(""),Of=10,Nf="ts",Uf="t",Bf="request",jf="response",Ff="event";function zf(e){this.h=e,this.g=null}function Vf(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}(o=zf.prototype).configure=function(e){this.h=e},o.ci=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Gf)?1e3*this.g.get(Gf):null},o.ai=function(){return this.h.enabled&&this.g&&this.g.has(Hf)?1e3*this.g.get(Hf):null},o.Uj=function(){return this.h.enabled&&this.g&&this.g.has(qf)?this.g.get(qf):null},o.Vj=function(){return this.h.enabled&&this.g&&this.g.has(Wf)?this.g.get(Wf):null},o.getBandwidthEstimate=function(e){var t=this.ai();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e},H("shaka.util.CmsdManager",zf),zf.prototype.getBandwidthEstimate=zf.prototype.getBandwidthEstimate,zf.prototype.getRoundTripTime=zf.prototype.Vj,zf.prototype.getResponseDelay=zf.prototype.Uj,zf.prototype.getEstimatedThroughput=zf.prototype.ai,zf.prototype.getMaxBitrate=zf.prototype.ci;var Hf="etp",Gf="mb",qf="rd",Wf="rtt";function Kf(){this.g=null,this.h=[]}function Xf(e,t){return O(function(n){if(1==n.g)return e.g?S(n,new Promise(function(t){return e.h.push(t)}),2):n.A(2);e.g=t,k(n)})}function $f(t,n,r){n=void 0===n?null:n,jo.call(this);var o=this;this.m=ep,this.h=null,this.ve=n,this.$=!1,this.Ge=new oe,this.we=new oe,this.j=new oe,this.ac=new oe,this.xc=new oe,this.G=this.H=this.F=this.J=null,this.Ie=0,this.ma=new Kf,this.O=this.ba=this.X=this.i=this.uc=this.I=this.l=this.re=this.S=this.Lh=this.wa=this.K=this.ib=this.ya=this.se=this.R=this.Ga=this.M=this.ob=null,this.Sa=!1,this.Be=this.o=null,this.Ae=1e9,this.Fe=[],this.kb=[],this.Xf=-1,this.g=kd(this),this.Zf={streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}},this.V=null,this.Je=-1,this.Zb=null,this.xa={width:1/0,height:1/0},this.ze=new Wi(this.g,this.xa,null),this.De=[],this.B=null,this.N=this.g.adaptationSetCriteriaFactory(),this.N.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.yc=this.g.preferredTextLanguage,this.Kd=this.g.preferredTextRole,this.ye=this.g.preferForcedSubs,this.xe=[],r&&r(this),this.K=new Jc(this,this.g.cmcd),this.wa=new zf(this.g.cmsd),this.J=cd(this),this.Fd=this.oa=this.Da=this.C=null,this.ag=!1,this.Yf=[],this.$f=new Tr(function(){return O(function(e){return 1==e.g?o.oa?S(e,o.fc(o.Fd,!0),3):e.A(0):4!=e.g?S(e,o.load(o.oa),4):(o.ag?o.Fd.pause():o.Fd.play(),o.oa=null,o.ag=!1,void k(e))})}),ip&&(this.C=ip(),this.C.configure(this.g.ads),this.xc.D(this.C,"ad-content-pause-requested",function(e){var t;return O(function(n){if(1==n.g)return o.$f.stop(),o.oa?n.A(0):(o.Fd=o.h,o.ag=o.ae(),t=e.saveLivePosition||!1,S(n,o.Vh(!0,t),3));o.oa=n.h,k(n)})}),this.xc.D(this.C,"ad-content-resume-requested",function(e){if(e=e.offset||0,o.oa){var t=o.oa;t.m&&e&&("number"==typeof t.m?t.m+=e:t.m.setTime(t.m.getTime()+1e3*e))}o.$f.ka(.1)}),this.xc.D(this.C,"ad-content-attach-requested",function(){return O(function(e){return o.h||!o.Fd?e.A(0):S(e,o.fc(o.Fd,!0),0)})})),ap&&(this.Da=ap(this),this.Da.configure(this.g.queue)),this.Ge.D(e,"online",function(){Gd(o),o.gh()}),this.Ce=new Tr(function(){for(var e=Date.now()/1e3,t=!1,n=!0,r=m(o.i.variants),i=r.next();!i.done;i=r.next())(i=i.value).disabledUntilTime>0&&i.disabledUntilTime<=e&&(i.disabledUntilTime=0,t=!0),i.disabledUntilTime>0&&(n=!1);n&&o.Ce.stop(),t&&Ld(o,!1,void 0,!1,!1)}),this.Ta=null,t&&(pe("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.fc(t,!0)),this.u=null}function Yf(e){null!=e.S&&(gt(e.S),e.S.release(),e.S=null)}function Jf(e,t){return new No(e,t)}function Qf(e,t){op.set(e,t)}function Zf(e,t){e.dispatchEvent(Jf("onstatechange",(new Map).set("state",t)))}function ed(e,t){var n;return O(function(r){return 1==r.g?(n=++e.Ie,S(r,Xf(e.ma,t),2)):n!=e.Ie?(e.ma.release(),r.return(!0)):r.return(!1)})}function td(e,t){var n,r,o;return t=void 0!==t&&t,O(function(i){if(1==i.g)return n=null,e.i&&e.I&&e.uc&&e.X&&e.g?(r=e.h.currentTime,e.W()&&!t&&(r=null),S(i,rd(e,e.X,r,e.ba,e.g,!0,!1),3)):i.A(2);if(2!=i.g){n=i.h,e.De.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(o=e.l?e.l.o:null)&&(n.o=o);var a=n,s=e.I,l=e.uc;a.h=e.i,a.l=s,a.H=l,n.C=e.N,n.start(),e.i=null,e.I=null,e.uc=null,e.o=null,e.Be=null}return i.return(n)})}function nd(e,t,n,r,o,i){var a,s,l;return o=void 0!==o&&o,O(function(u){return 1==u.g?r?u.A(2):S(u,od(e,t),3):(2!=u.g&&(r=u.h),function(e,t){if(!Ky(le()))return!0;if(t){if(""==(e.h||rs()).canPlayType(t))return!1;if(!Ky(le())||!na.has(t))return!0;if(dr(t))return"WEBKIT"===le().Ea()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if("application/dash+xml"===t||"video/vnd.mpeg.dash.mpd"===t)return e.g.streaming.preferNativeDash}return!1}(e,r)?u.return(null):(a=i||e.g,s=!1,o&&e.h&&"AUDIO"===e.h.nodeName&&(s=!0),l=rd(e,t,n,r||null,a,!o,s),l=o?l.then(function(e){return e.F=!1,e}):l.then(function(t){return e.De.push(t),t}),u.return(l)))})}function rd(e,t,n,r,o,i,a){var s,l,u,c,f,d,p,h,g,y,v,b;return i=void 0===i||i,a=void 0!==a&&a,O(function(x){return 1==x.g?(s=null,l=zt(o),a&&(l.manifest.disableVideo=!0),u=function(){return s.R&&s.j?null:s},c=function(){return u()?u().getConfiguration():e.g},e.xa.width!=1/0||e.xa.height!=1/0||e.g.ignoreHardwareResolution?x.A(2):S(x,le().jc(),3)):(2!=x.g&&(f=x.h,e.xa.width=f.width,e.xa.height=f.height),d=new Wi(l,e.xa,null),p={networkingEngine:e.J,filter:function(e){var t;return O(function(n){return 1==n.g?S(n,Ki(d,e),2):4!=n.g?n.h?(t=Jf("trackschanged"),S(n,Promise.resolve(),4)):n.A(0):(s.dispatchEvent(t),void k(n))})},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,r=m(t.textStreams),o=r.next();!o.done;o=r.next())"application/cea-608"!=(o=o.value).mimeType&&"application/cea-708"!=o.mimeType||n.add(o.originalId);for(r=m(t.variants),o=r.next();!o.done;o=r.next())if((o=o.value.video)&&o.closedCaptions)for(var i=m(o.closedCaptions.keys()),a=i.next();!a.done;a=i.next())if(a=a.value,!n.has(a)){var s=a.startsWith("CC")?"application/cea-608":"application/cea-708",l=new Ul,u=o.closedCaptions.get(a);s={id:e.Ae++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:u,originalLanguage:u,label:null,type:ct,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:o.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([or(s,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(s),n.add(a)}}(e,t)},onTimelineRegionAdded:function(e){Wl(s.I,e)},onEvent:function(e){return s.dispatchEvent(e)},onError:function(e){return s.onError(e)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},updateDuration:function(){e.l&&s.R&&e.l.updateDuration()},newDrmInfo:function(e){var t=s.i,n=t?t.g:null;n&&t.B&&Yi(d,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.W());s.dispatchEvent(Jf("manifestupdated",t)),hc(s,!1,function(){e.C&&e.C.onManifestUpdated(e.W())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(t,n,r,o){var i=t;"com.apple.hls.interstitial"!=t&&"com.apple.hls.overlay"!=t||(i="com.apple.quicktime.HLS",t={startTime:n,endTime:r,values:o},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,t)),t=(o=m(o)).next();for(var a={};!t.done;a={Zg:void 0},t=o.next())a.Zg=t.value,"ID"!=a.Zg.name&&hc(s,!1,function(t){return function(){ud(e,n,r,i,t.Zg)}}(a))},disableStream:function(t){return e.disableStream(t,e.g.streaming.maxDisabledTime)},addFont:function(t,n){return e.addFont(t,n)}},(h=new ql(function(){return e.Va()})).addEventListener("regionadd",function(t){var n=t.region;Wd(e,"timelineregionadded",n,s),hc(s,!1,function(){e.C&&(e.C.onDashTimedMetadata(n),e.C.onDASHInterstitialMetadata(e,e.h,n))})}),g=null,l.streaming.observeQualityChanges&&((g=new Vl(function(){return e.Fc()})).addEventListener("qualitychange",function(t){Kd(e,t.quality,t.position)}),g.addEventListener("audiotrackchange",function(t){Kd(e,t.quality,t.position,!0)})),y=!0,v={tc:e.J,onError:function(e){return s.onError(e)},uf:function(t){hc(s,!0,function(){e.F&&function(e,t){var n=Jf("keystatuschanged");e.dispatchEvent(n);var r=Object.keys(t);1==r.length&&""==r[0]&&(r=["00"],t={"00":t[""]});var o=1==r.length&&"00"==r[0];if(n=!1,r.length){r=e.keySystem();for(var i=ni(e.g.drm.clearKeys),a=function(n,r){n.allowedByKeySystem=!0;for(var i=(r=m(r)).next();!i.done;i=r.next())i=i.value,((i=t[o?"00":i])||e.F.M)&&(n.allowedByKeySystem=n.allowedByKeySystem&&!!i&&!Qi.includes(i))},s=m(e.i.variants),l=s.next();!l.done;l=s.next())for(var u=io(l=l.value),c=(u=m(u)).next();!c.done;c=u.next()){c=c.value;var f=l.allowedByKeySystem;if(c.keyIds.size)if(c.drmInfos.length&&!i.size&&"HLS"==e.i.type)for(var d=m(c.drmInfos),p=d.next();!p.done;p=d.next())(p=p.value).keySystem==r&&(p.keyIds.size?a(l,p.keyIds):a(l,c.keyIds));else a(l,c.keyIds);f!=l.allowedByKeySystem&&(n=!0)}}n&&(Nd(e),!Rd(e))||(n=e.l.o)&&!n.allowedByKeySystem&&Ld(e)}(e,t)})},onExpirationUpdated:function(e,t){var n=Jf("expirationupdated");s.dispatchEvent(n),(n=s.l)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){s.dispatchEvent(t),"drmsessionupdate"==t.type&&y&&(y=!1,t=Date.now()/1e3-s.ya,(e.B||s.getStats()).m=t,e.S&&gt(e.S))}},b=cd(e,u),Go(e.J,b),s=new pc(t,r,n,{config:l,xk:p,Ik:h,Hk:g,md:function(){return e.md(v)},wk:d,networkingEngine:b,jj:i}),x.return(s))})}function od(e,t){var n,r;return O(function(o){return 1==o.g?(n=e.g.manifest.retryParameters,S(o,Ac(t,e.J,n),2)):("application/x-mpegurl"==(r=o.h)&&"WEBKIT"===le().Ea()&&(r="application/vnd.apple.mpegurl"),"video/quicktime"==r&&"CHROMIUM"===le().Ea()&&(r="video/mp4"),o.return(r))})}function id(e,t){var n=e.g.textDisplayFactory;e.Kh!==n||void 0!==t&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):pe("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||pe("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch(function(){})):e.u.setTextVisibility(e.$),e.H&&function(e,t){e.ba=t,e.h&&(e.h.j=t)}(e.H,e.u),e.Kh=n,e.l&&function(e){var t=e.h.get(ct);t&&pu(e,t.stream,!0,0,!0)}(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function ad(e){var t,n,r;return O(function(o){if(1==o.g)return le(),Zf(e,"media-source"),e.g.mediaSource.useSourceElements&&ts(e.h),id(e),t=function(e,t,n,r,o){return new Ps(e,t,n,o,r)}(e.h,e.u,{Kj:function(){return e.keySystem()},onMetadata:function(t,n,r){for(var o=(t=m(t)).next();!o.done;o=t.next())if((o=o.value).data&&"number"==typeof o.cueTime&&o.frames){var i=o.cueTime+n,a=r;a&&i>a&&(a=i);for(var s=m(o.frames),l=s.next();!l.done;l=s.next())ud(e,i,a,"org.id3",l.value);e.C&&e.C.onHlsTimedMetadata(o,i)}},Ck:function(t){e.ib&&Wl(e.ib,{schemeIdUri:t.schemeIdUri,startTime:t.startTime,endTime:t.endTime,id:String(t.id),emsg:t})},onEvent:function(t){return e.dispatchEvent(t)},Ek:function(){e.I&&e.I.update&&e.I.update()}},e.S,e.g.mediaSource),n=e.g.manifest,r=n.segmentRelativeVttTiming,t.Ga=r,S(o,t.M,2);e.H=t,k(o)})}function sd(e,t,n){function r(){return Ed(e)}if(e.j.D(t,"playing",r),e.j.D(t,"pause",r),e.j.D(t,"ended",r),e.j.D(t,"ratechange",function(){var t=e.h.playbackRate;0!=t&&(e.M&&(e.M.set(t),e.m==tp&&e.o.playbackRateChanged(t),Ad(e,t)),t=Jf("ratechange"),e.dispatchEvent(t))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&"connected"==t.remote.state&&Fd(e),Nd(e)}),e.j.D(t.remote,"connecting",function(){return Nd(e)}),e.j.D(t.remote,"disconnect",function(){return O(function(n){if(1==n.g)return e.l&&"disconnected"==t.remote.state?S(n,Lu(e.l),3):n.A(2);2!=n.g&&Fd(e),Nd(e),k(n)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return Nd(e)}),e.j.D(t.audioTracks,"removetrack",function(){return Nd(e)}),e.j.D(t.audioTracks,"change",function(){return Nd(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return Nd(e)}),e.j.D(t.videoTracks,"removetrack",function(){return Nd(e)}),e.j.D(t.videoTracks,"change",function(){return Nd(e)})),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",function(){e.ve&&id(e,!0)}),t.textTracks){var o=function(){e.m===np&&e.u instanceof jc&&Fd(e),Nd(e)};e.j.D(t.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var n=m(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,ud(e,r.startTime,r.endTime,r.type,r.value),e.C&&e.C.onCueMetadataChange(r.value);if(t.cues){n=[];for(var o=(r=m(t.cues)).next(),i={};!o.done;i={Dc:void 0},o=r.next())i.Dc=o.value,"com.apple.quicktime.HLS"==i.Dc.type&&null!=i.Dc.startTime&&(o=n.find(function(e){return function(t){return t.startTime==e.Dc.startTime&&t.endTime==e.Dc.endTime}}(i)),o||(o={startTime:i.Dc.startTime,endTime:i.Dc.endTime,values:[]},n.push(o)),o.values.push(i.Dc.value));for(r=(n=m(n)).next();!r.done;r=n.next())(r=r.value).values.some(function(e){return"X-ASSET-URI"==e.key||"X-ASSET-LIST"==e.key})&&e.C&&(r.values.push({key:"CUE",description:"",data:0!=r.startTime||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,r))}});var n=new Tr(function(){for(var t=function(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}(e),n=(t=m(t)).next();!n.done;n=t.next())n.value.mode="hidden"}).Kb().ka(.5);e.xe.push(function(){n.stop()})}}(e,t);break;case"chapters":!function(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new Tr(function(){t.mode="hidden"}).Kb().ka(.5);e.xe.push(function(){n.stop()})}}(e,t);break;default:o()}}),e.j.D(t.textTracks,"removetrack",o),e.j.D(t.textTracks,"change",o)}"none"!=t.preload&&e.j.Aa(t,"loadedmetadata",function(){e.B.G=Date.now()/1e3-n})}function ld(e,t,n){t=(new Map).set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Jf(n,t))}function ud(e,t,n,r,o){e.ya&&((t={schemeIdUri:r,startTime:t,endTime:n||1/0,id:"",payload:o}).id=JSON.stringify(t),Wl(e.ya,t))}function cd(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function r(e){t()?hc(t(),!0,e):e()}t||(t=function(){return null});var o=new Vo(function(t,n,o,i,a){r(function(){e.o&&e.o.segmentDownloaded(t,n,o,i,a)})},function(t,o,i){n(Jf("downloadheadersreceived",o=(new Map).set("headers",t).set("request",o).set("requestType",i))),r(function(){if(e.wa){var n=e.wa;if(n.h.enabled){var r=t["cmsd-static"];if(r)try{var o=new Map,i=r.split(",");for(r=0;r<i.length;r++){var a=i[r].split("=");o.set(a[0],Vf(a[1]))}}catch(f){}if(o=t["cmsd-dynamic"]){e:{try{var s=new Map,l=o.split(";");for(o=1;o<l.length;o++){var u=l[o].split("=");s.set(u[0],Vf(u[1]))}var c=s;break e}catch(f){c=null;break e}c=void 0}c&&(n.g=c)}}}})},function(e,t){n(Jf("downloadcompleted",e=(new Map).set("request",e).set("response",t)))},function(e,t,r,o){n(Jf("downloadfailed",e=(new Map).set("request",e).set("error",t).set("httpResponseCode",r).set("aborted",o)))},function(t,n,o){r(function(){if(e.K){var r=e.K,i=o;if(i=void 0===i?{}:i,r.g.enabled)if("HEAD"===n.method)nf(r,n,{});else switch(t){case 0:try{if(r.g.enabled){if(i.type){e:{switch(i.type){case 4:var a=r.o?Cf:kf;break e;case 3:case 2:a=r.o?Ef:Af;break e;case 5:a="s";break e}a=void 0}r.l=a}nf(r,n,{ot:hf,su:!r.C})}}catch(l){Y("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",l)}break;case Yo:try{if(r.g.enabled){var s=uf(r,i,n.uris[0]);s.ts=Date.now(),r.F.set(n,s.ts),nf(r,n,s)}}catch(l){Y("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",l)}break;case 2:case 5:case 6:nf(r,n,{ot:"k"});break;case 4:nf(r,n,{ot:"o"})}}})},function(n,r,o,i){(n=t()?t().l:e.I)&&n.banLocation&&n.banLocation(i)},function(n,r,o){if(r.data){var i=r.data.byteLength,a=t()?t().getStats():e.B;if(a&&(fc(a,i),0===n&&(a.ni=i)),i=e.K,o=void 0===o?{}:o,n===Yo)try{var s=uf(i,o,r.uri);r.originalRequest&&null!=r.originalRequest.timeToFirstByte&&(s.ttfb=r.originalRequest.timeToFirstByte),null!=r.timeMs&&(s.ttlb=r.timeMs);var l=r.originalUri||r.uri;if(l.includes("CMCD="))try{var u=new URL(l);u.searchParams.delete("CMCD");var c=u.toString()}catch(f){c=l}else c=l;s.url=c,i.F.has(r.originalRequest)?(s.ts=i.F.get(r.originalRequest),i.F.delete(r.originalRequest)):s.ts||(s.ts=Date.now()),function(e,t,n){var r=e.g.targets;if(r){var o=r.filter(function(e){return e.mode===jf&&!0===e.enabled});r=e.g.version==wf?Array.from(new Set([].concat(g(Mf),g(_f)))):If,n.rc=t.status||0,n=cf(e,n,jf),t.headers&&t.headers["CMSD-Static"]&&(n.cmsds=btoa(t.headers["CMSD-Static"])),t.headers&&t.headers["CMSD-Dynamic"]&&(n.cmsdd=btoa(t.headers["CMSD-Dynamic"]));for(var i=(o=m(o)).next();!i.done;i=o.next()){var a=of((i=i.value).includeKeys||[],r),s=sf(i);e.m[s]||(e.m[s]={request:1,response:1}),n.sn=e.m[s].response++,rf(e,a=af(n,a),i,t)}}}(i,r,s)}catch(f){Y("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",f)}}});return o.configure(e.g.networking),o}function fd(e,t,n){e.R=new Vi,Hi(e.R,Gi),dd(e),Cd(e),e.Ga=new Tr(function(){pd(e)}),e.g.streaming.rebufferingGoal&&e.Ga.Fa(.25),e.j.D(t,"waiting",function(){return pd(e,"waiting")}),e.j.D(t,"canplaythrough",function(){return pd(e,"canplaythrough")}),e.j.D(t,"playing",function(){return pd(e,"playing")}),e.j.D(t,"seeked",function(){return pd(e,"seeked")}),n&&(e.j.D(t,"stalled",function(){return pd(e,"stalled")}),e.j.D(t,"progress",function(){return pd(e,"progress")}),e.j.D(t,"timeupdate",function(){return pd(e,"timeupdate")}))}function dd(e){var t=e.g.streaming.rebufferingGoal;e.R.i.set(qi,Math.min(.5,t/2)).set(Gi,t)}function pd(e,t){if(e.g.streaming.rebufferingGoal){t=!!e.H&&Bs(e.H),t=e.ae()||t||e.G.ki();var n=Ja(e.h.buffered,e.h.currentTime),r=e.R,o=r.i.get(r.g);Hi(r,t||n>=o&&n>0?qi:Gi)&&Cd(e)}else if(t){switch(n=void 0,t){case"seeking":case"waiting":n=Gi;break;case"canplaythrough":case"playing":case"seeked":n=qi}void 0!==n&&Hi(e.R,n)&&Cd(e)}}function hd(e,t){if(e.ze=new Wi(e.g,e.xa,e.F),e.I){var n=zt(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Zd&&$i(e.ze,e.i)&&Nd(e)}catch(o){qd(e,o)}e.o&&Rd(e),!(n=e.l.o)||n.allowedByApplication&&n.allowedByKeySystem||Ld(e)}if(e.J&&e.J.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Ga=e.g.manifest.segmentRelativeVttTiming),e.u&&id(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),Vd(e)),e.R&&dd(e),e.Ga&&(e.g.streaming.rebufferingGoal?e.Ga.Fa(.25):e.Ga.stop()),e.i&&$d(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.wa&&e.wa.configure(e.g.cmsd),e.Da&&e.Da.configure(e.g.queue),e.m==tp&&e.N.getConfiguration){n=e.N.getConfiguration();var r=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,r=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,r=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,r=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,r=!0),r&&(e.N.configure(n),Ld(e))}}function md(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function gd(e,t){var n,r;return O(function(o){return 1==o.g?e.m!=tp&&e.m!=np?o.return(null):(n=e.Fe,e.i&&(n=e.i.imageStreams),(r=n[0])?(null!=t&&(r=n.find(function(e){return e.id==t})),r?r.segmentIndex?o.A(2):S(o,r.createSegmentIndex(),2):o.return(null)):o.return(null)):o.return(r)})}function yd(e,t,n,r){var o=t.width||0,i=t.height||0,a=o/r.columns,s=i/r.rows,l=r.columns*r.rows,u=e.j-e.startTime;u=e.B||u/l;var c=e.startTime,f=0,d=0;return l>1&&(d=Math.floor((n-e.startTime)/u),c=e.startTime+d*u,f=d%r.columns*a,d=Math.floor(d/r.columns)*s),r=!1,(n=e.thumbnailSprite)&&(r=!0,s=n.height,f=n.positionX,d=n.positionY,a=n.width),{segment:e,imageHeight:i,imageWidth:o,height:s,positionX:f,positionY:d,startTime:c,duration:u,uris:e.P(),startByte:e.Jc(),endByte:e.Gc(),width:a,sprite:r,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}function vd(e,t){e.j.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));for(var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},r=[],o=Array.from(t.activeCues||[]),i=(o=m(o)).next();!i.done;i=o.next()){if((i=i.value).endTime===1/0||i.endTime<i.startTime)i=null;else{var a=new Tn(i.startTime,i.endTime,i.text);a.line="number"==typeof i.line?i.line:null,i.lineAlign&&(a.lineAlign=i.lineAlign),a.lineInterpretation=i.snapToLines?Un:1,a.position="number"==typeof i.position?i.position:null,i.positionAlign&&(a.positionAlign=i.positionAlign),a.size=i.size,a.textAlign=i.align,"lr"===i.vertical?a.writingMode="vertical-lr":"rl"===i.vertical&&(a.writingMode="vertical-rl"),i.region&&(a.region.id=i.region.id,a.region.height=i.region.lines,a.region.heightUnits=2,a.region.regionAnchorX=i.region.regionAnchorX,a.region.regionAnchorY=i.region.regionAnchorY,a.region.scroll=i.region.scroll,a.region.viewportAnchorX=i.region.viewportAnchorX,a.region.viewportAnchorY=i.region.viewportAnchorY,a.region.viewportAnchorUnits=_t,a.region.width=i.region.width,a.region.widthUnits=_t),An(a),i=a}i&&((a=e.g.mediaSource.modifyCueCallback)&&a(i,null,n),r.push(i))}e.u.append(r)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}function bd(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function xd(e){return e.h&&e.h.currentTime?(e=e.Ig().getTime()+1e3*e.h.currentTime,Math.floor(Date.now()-e)):null}function wd(e,t){var n;return O(function(r){switch(r.g){case 1:return C(r,2),S(r,Ac(t,e.J,e.g.streaming.retryParameters),4);case 4:n=r.h,E(r,3);break;case 2:I(r);case 3:if(n)return r.return(n);throw new ze(1,2,2011,t)}})}function Sd(e,t,n,r){var o,i,a;return O(function(s){if(1==s.g){o=Yo,(i=qo([t],r)).method="GET";var l=e.K;try{l.g.enabled&&nf(l,i,{ot:bf,su:!0})}catch(u){Y("CMCD_TEXT_ERROR","Could not generate text CMCD data.",u)}return S(s,n.request(o,i).promise,2)}return a=s.h,s.return(a.data)})}function Td(e,t,n,r){var o=yr(n);if(o)return n=o(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ue(t),function(e,t){function n(e){for(var n=e,r=m(t),o=r.next();!o.done;o=r.next())(o=o.value).end&&o.start<e&&(n+=o.end-o.start);return((e=Math.floor(n/3600))<10?"0":"")+e+":"+((r=Math.floor(n/60%60))<10?"0":"")+r+":"+((o=Math.floor(n%60))<10?"0":"")+o+"."+((n=Math.floor(1e3*n%1e3))<100?n<10?"00":"0":"")+n}var r=Dc(e);e="WEBVTT\n\n";for(var o=(r=m(r)).next();!o.done;o=r.next())e+=n((o=o.value).startTime)+" --\x3e "+n(o.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case _n:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(o)+"\n",e+=o.payload+"\n\n";return e}(t=n.parseMedia(t,e,null,[]),r);throw new ze(2,2,2014,n)}function kd(e){var t=ec();return t.streaming.failureCallback=function(t){if(e.W()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.gh(n))}},t.textDisplayFactory=function(){if(e.ve){var t=e.h;t=!(t.webkitDisplayingFullscreen||t.webkitPresentationMode&&"inline"!=t.webkitPresentationMode)}else t=!1;return t?new Gc(e.h,e.ve):"track"in document.createElement("track")?new jc(e):new Hc},t}function Cd(e){var t=e.Og();if(e.B&&e.R&&e.G){if(0==e.g.streaming.rebufferingGoal){var n=e.M;n.j=!1,jl(n)}else(n=e.M).j=t,jl(n);if(e.K&&(n=e.K,t||n.C||(n.C=!0),n.C&&t&&(n.I=!0,tf(n,"ps",{dd:"r"})),n.J=t),Ed(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Je<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,o=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Je*o,n-r))}}t=(new Map).set("buffering",t),e.dispatchEvent(Jf("buffering",t))}function Ad(e,t){e.ac.Qa(),e.ac.D(e.h,"timeupdate",function(){var n=e.h.currentTime,r=e.Va(),o=e.W(),i=o?e.g.streaming.safeSeekOffset:0;t>0?(!o||t>=1)&&Math.floor(n)>=Math.floor(r.end)&&e.Nd():Math.floor(n)<=Math.floor(r.start+i)&&e.Nd()})}function Ed(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==Gi?n="buffering":e.ae()?n="ended":e.h.paused&&(n="paused");var r=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var o=Date.now()/1e3;t.g.duration=o-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:o,state:r,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Jf("statechanged",n)))}}function Id(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,o=e.$h();o<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.qe(r,!1):1==o&&t!==e.M.Tc()&&e.Nd()}if(n&&(n=e.Va(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){r=e.g.streaming.liveSync.targetLatencyTolerance,o=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var i=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var a=e.g.streaming.liveSync.targetLatency,s=a+r,l=Math.max(0,a-r),u=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(a=e.i.serviceDescription.targetLatency,null!=e.i.serviceDescription.targetLatency?s=e.i.serviceDescription.targetLatency+r:null!=e.i.serviceDescription.maxLatency&&(s=e.i.serviceDescription.maxLatency),null!=e.i.serviceDescription.targetLatency?l=Math.max(0,e.i.serviceDescription.targetLatency-r):null!=e.i.serviceDescription.minLatency&&(l=e.i.serviceDescription.minLatency),u=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||"number"!=typeof a||(e.V=a);var f=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;o&&e.Zb&&null!==e.V&&"number"==typeof a&&e.Je<f&&Date.now()-e.Zb>1e3*i&&(i=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(a-i)/2,i+r),e.Zb=Date.now()),o&&null!==e.V&&(s=e.V+r,l=e.V-r),a=n.end-e.h.currentTime,r=0,e.m==np&&(o=e.h.buffered).length>0&&(r=o.end(o.length-1),r=Math.max(u,r-n.end)),n=e.g.streaming.liveSync.panicMode,o=1e3*e.g.streaming.liveSync.panicThreshold,i=Date.now()-e.R.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&i<=o?t!=c&&e.qe(c,!1):null!=s&&u&&a-r>s?(t!=u&&e.qe(u,!1),e.Zb=null):null!=l&&c&&a-r<l?(t!=c&&e.qe(c,!1),e.Zb=null):t!==e.M.Tc()&&(e.Nd(),e.Zb=Date.now())}}function Md(e){if(e.h){var t=function(t,n){var r=void 0===r?Number.EPSILON:r;if(t===n)r=!0;else{var o=Math.abs(t-n);r=o<=r||r!==Number.EPSILON&&Math.abs(o-r)<=Number.EPSILON}return!!((r||n>t)&&e.Xf<t)&&(e.Xf=t,!0)},n=e.Va();if(n=(n=n.end-n.start)>0?e.h.currentTime/n:0,!isNaN(n)){if(t(0,n*=100))var r=Jf("started");else t(25,n)?r=Jf("firstquartile"):t(50,n)?r=Jf("midpoint"):t(75,n)?r=Jf("thirdquartile"):((t(100,n)||n>100)&&(r=Jf("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.ae()&&e.h.pause());r&&e.dispatchEvent(r)}}}function Rd(e){try{Ji(e.ze,e.i)}catch(n){return qd(e,n),!1}var t=no(e.i.variants);return t=e.N.create(t),"boolean"!=typeof(e=e.o.setVariants(Array.from(t.values())))||e}function _d(e,t){return t=void 0!==t&&t,Rd(e)?e.o.chooseVariant(t):null}function Ld(e,t,n,r,o){t=void 0===t||t,n=void 0===n?0:n,r=void 0!==r&&r,o=void 0===o||o;var i=_d(e);i&&Pd(e,i,o,t,n,r)}function Pd(e,t,n,r,o,i){i=void 0!==i&&i;var a=e.l.o;if(t==a)r&&fu(e.l,t,r,o,!0);else{var s=e.B.h;if(s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),fu(e.l,t,r,o,i,n),r=null,a&&(r=$r(a)),(a=$r(t)).active=!0,e.S&&(o=e.S,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),i=0,s=-1,t.mimeType){case"video/webm":i=1;break;case"video/mp4":i=2}switch(e.bi()){case"DASH":s=1;break;case"HLS":s=0}o.g&&(o.g.setLevelSwitching(t.id,!0),o.g.setContainerFormat(i),o.j||o.g.setStreamingFormat(s))}n?Yd(e,n=Jf("adaptation",n=(new Map).set("oldTrack",r).set("newTrack",a))):Ud(e,r,a),Bd(e,r,a)}}function Dd(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var r=Od(e);Ud(e,n=eo(n,r),t=eo(t,r)),Bd(e,n,t)}}function Od(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(e){return e.selected}):null}function Nd(e){Yd(e,Jf("trackschanged")),jd(e)}function Ud(e,t,n){Yd(e,t=Jf("variantchanged",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function Bd(e,t,n){var r=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(r=!0),r&&jd(e)}function jd(e){Yd(e,Jf("audiotrackschanged"))}function Fd(e){Yd(e,Jf("textchanged"))}function zd(e){Yd(e,Jf("texttrackvisibility"))}function Vd(e){e.g.abr.enabled||Gd(e),Yd(e,Jf("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function Hd(e){var t=e.Lc().find(function(e){return e.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function Gd(e,t){if(t=void 0===t||t,e.m==tp){e.Ce.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&Rd(e)}}function qd(e,t){var n,r,o,i;return O(function(a){switch(a.g){case 1:if(e.m==Zd)return a.return();if(1===t.severity&&e.B.M++,n=!0,!(e.Sa&&e.i&&e.l)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3024!=t.code&&3018!=t.code){a.A(2);break}return"WEBKIT"===le().Ea()&&3016==t.code?a.return():(C(a,3),S(a,Lu(e.l),5));case 5:r=a.h,n=!r,r&&(o=Jf("mediasourcerecovered"),e.dispatchEvent(o)),E(a,2);break;case 3:I(a),n=!0;case 2:if(!n)return a.return();2===t.severity&&Gd(e,!1),i=Jf("error",(new Map).set("detail",t)),e.dispatchEvent(i),i.defaultPrevented&&(t.handled=!0),k(a)}})}function Wd(e,t,n,r){r=void 0===r?e:r,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(Jf(t,e))}function Kd(e,t,n,r){r=void 0!==r&&r,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Jf(r?"audiotrackchanged":"mediaqualitychanged",t))}function Xd(e,t){if(t=void 0===t||t,!e.h.error)return t?new ze(2,3,3016):null;var n=e.h.error.code;return t||1!=n?((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new ze(2,3,3016,n,t,e.h.error.message)):null}function $d(e,t,n){t>0&&(e.W()||e.Si(t)),n<(t=e.getDuration())&&(e.W()||e.rb(n))}function Yd(e,t){O(function(n){if(1==n.g)return S(n,Promise.resolve(),2);e.m!=Zd&&e.dispatchEvent(t),k(n)})}function Jd(e){for(var t=new Set,n=(e=m(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Lr(n.language)):t.add("und");return t}function Qd(e){for(var t=new Map,n=new Map,r=0;r<e.length;r++){var o=e[r],i="und",a=[];o.language&&(i=Lr(o.language)),(a="variant"==o.type?o.audioRoles:o.roles)&&a.length||(a=[""]),t.has(i)||t.set(i,new Set);for(var s=(a=m(a)).next();!s.done;s=a.next())s=s.value,t.get(i).add(s),o.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(s,o.label))}var l=[];return t.forEach(function(e,t){for(var r=(e=m(e)).next();!r.done;r=e.next()){r=r.value;var o=null;n.has(t)&&n.get(t).has(r)&&(o=n.get(t).get(r)),l.push({language:t,role:r,label:o})}}),l}Kf.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null},p($f,jo),(o=$f.prototype).destroy=function(){var e,t=this;return O(function(n){switch(n.g){case 1:return t.m==Zd?n.return():(Yf(t),e=t.detach(),t.m=Zd,S(n,e,2));case 2:return S(n,t.ng(),3);case 3:if(t.Ge&&(t.Ge.release(),t.Ge=null),t.we&&(t.we.release(),t.we=null),t.j&&(t.j.release(),t.j=null),t.ac&&(t.ac.release(),t.ac=null),t.xc&&(t.xc.release(),t.xc=null),t.Be=null,t.g=null,t.B=null,t.ve=null,t.K=null,t.wa=null,!t.J){n.A(4);break}return S(n,t.J.destroy(),5);case 5:t.J=null;case 4:t.o&&(t.o.release(),t.o=null),t.Da&&(t.Da.destroy(),t.Da=null),jo.prototype.release.call(t),k(n)}})},o.fc=function(e,t){t=void 0===t||t;var n,r,o,i=this;return O(function(a){switch(a.g){case 1:if(i.m==Zd)throw new ze(2,7,7e3);if(n=i.h&&i.h==e,!i.h||i.h==e){a.A(2);break}return S(a,i.detach(),2);case 2:return S(a,ed(i,"attach"),4);case 4:if(a.h)return a.return();if(C(a,5,6),n||(Zf(i,"attach"),r=function(){var e=Xd(i,!1);e&&qd(i,e)},i.we.D(e,"error",r),i.h=e,i.K&&i.K.setMediaElement(e)),le(),!t||!Ky()||i.H){a.A(6);break}return S(a,ad(i),6);case 6:M(a),i.ma.release(),R(a,0);break;case 5:return o=I(a),S(a,i.detach(),10);case 10:throw o}})},o.kj=function(e){this.Lh=e},o.detach=function(e){e=void 0!==e&&e;var t=this;return O(function(n){if(1==n.g){if(t.m==Zd)throw new ze(2,7,7e3);return S(n,t.Bc(!1,e),2)}if(3!=n.g)return S(n,ed(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.we.Qa(),t.h=null),Zf(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ma.release()}k(n)})},o.Bc=function(t,n){t=void 0===t||t,n=void 0!==n&&n;var r,o,i,a,s,l,u,c,f,d,p,h,g,y=this;return O(function(v){switch(v.g){case 1:return y.m!=Zd&&(y.m=ep),S(v,ed(y,"unload"),2);case 2:return v.h?v.return():(A(v,3),y.Sa=!1,Zf(y,"unload"),Yf(y),r=y.xe.map(function(e){return e()}),y.xe=[],S(v,Promise.all(r),5));case 5:if(y.dispatchEvent(Jf("unloading")),y.se&&(y.se.release(),y.se=null),y.ya&&(y.ya.release(),y.ya=null),y.ib&&(y.ib.release(),y.ib=null),y.h&&(y.j.Qa(),y.ac.Qa()),y.Ce.stop(),y.ob&&(y.ob.release(),y.ob=null),y.Ga&&(y.Ga.stop(),y.Ga=null),!y.I){v.A(6);break}return S(v,y.I.stop(),7);case 7:y.I=null,y.uc=null;case 6:if(y.o&&y.o.stop(),!y.l){v.A(8);break}return S(v,y.l.destroy(),9);case 9:y.l=null;case 8:if(y.M&&(y.M.release(),y.M=null),y.G&&(y.G.release(),y.G=null),"webkit"!==e.shakaMediaKeysPolyfill||!y.F){v.A(10);break}return S(v,y.F.destroy(),11);case 11:y.F=null;case 10:if(!y.H){v.A(12);break}return S(v,y.H.destroy(),13);case 13:y.H=null;case 12:if(y.C&&!n&&y.C.onAssetUnload(),y.oa&&!n&&(y.oa.destroy(),y.oa=null),n||y.$f.stop(),y.K&&function(e){e.F.clear(),e.C=!1,e.J=!0,e.I=!1,e.o=!1,e.u=0,e.B=0,e.H=0,e.K={request:!1,response:!1,event:!1},Qc(e),e.m={},e.h=null,e.i.Qa()}(y.K),y.wa&&(y.wa.g=null),!y.u){v.A(14);break}return S(v,y.u.destroy(),15);case 15:y.u=null;case 14:if(y.$=!1,y.h){for(o=m(y.Yf),i=o.next();!i.done;i=o.next())(a=i.value).src.startsWith("blob:")&&URL.revokeObjectURL(a.src),a.remove();y.Yf=[],ts(y.h)&&y.h.load()}if(!y.F){v.A(16);break}return S(v,y.F.destroy(),17);case 17:y.F=null;case 16:if(y.Ta&&y.X!=y.Ta.rd()&&(y.Ta.j||y.Ta.destroy(),y.Ta=null),y.X=null,y.ba=null,y.R=null,y.i){for(s=m(y.i.variants),l=s.next();!l.done;l=s.next())for(u=l.value,c=m([u.audio,u.video]),f=c.next();!f.done;f=c.next())(d=f.value)&&d.segmentIndex&&d.segmentIndex.release();for(p=m(y.i.textStreams),h=p.next();!h.done;h=p.next())(g=h.value).segmentIndex&&g.segmentIndex.release()}y.g&&y.g.streaming.clearDecodingCache&&(co.clear(),Co.clear()),y.i=null,y.B=new uc,y.Kh=null,y.Zb=null,y.V=null,y.Je=-1,y.Fe=[],y.kb=[],y.Xf=-1,y.J&&y.J.Rh(),Cd(y);case 3:M(v),y.ma.release(),R(v,4);break;case 4:if(le(),t&&Ky()&&!y.H&&y.h)return S(v,ad(y),0);v.A(0)}})},o.ll=function(e){this.O=e},o.load=function(t,n,r){n=void 0===n?null:n;var o,i,a,s,l,u,c,f,d,p,h,g,y,v,b=this;return O(function(x){switch(x.g){case 1:if(b.m==Zd)throw new ze(2,7,7e3);if(o=null,i="",t instanceof pc){if(t.j)throw new ze(2,7,7006);i=(o=t).rd()||""}else i=t||"";return S(x,Xf(b.ma,"load"),2);case 2:if(b.ma.release(),!b.h)throw new ze(2,7,7002);if(!b.X){x.A(3);break}return b.X=i,S(x,b.Bc(!1),3);case 3:if(a=++b.Ie,s=function(){return O(function(e){if(1==e.g)return b.Ie==a?e.A(0):o?S(e,o.destroy(),3):e.A(3);throw new ze(2,7,7e3)})},l=function(e,t){return O(function(n){switch(n.g){case 1:return A(n,2),S(n,Xf(b.ma,t),4);case 4:return S(n,s(),5);case 5:return S(n,e(),6);case 6:return S(n,s(),7);case 7:o&&b.g&&(o.g=b.g);case 2:M(n),b.ma.release(),R(n,0)}})},C(x,5,6),null==n&&o&&(n=o.getStartTime()),b.O=n,b.Sa=!1,b.dispatchEvent(Jf("loading")),o){r=o.V,x.A(8);break}if(r){x.A(8);break}return S(x,l(function(){return O(function(e){if(1==e.g)return S(e,od(b,i),2);r=e.h,k(e)})},"guessMimeType_"),8);case 8:if(u=!!o,o){mc(o,b),b.B=o.getStats(),x.A(11);break}return S(x,nd(b,i,n,r,!0,b.g),12);case 12:(o=x.h)?(o.F=!1,mc(o,b),b.B=o.getStats(),o.start(),o.B.catch(function(){})):b.B=new uc;case 11:return c=!o,f=Date.now()/1e3,b.B=o?o.getStats():new uc,b.X=i,b.ba=r||null,Cd(b),d=function(){var e=b.h?b.h.buffered:null;return{start:Xa(e)||0,end:$a(e)||0}},b.ya=new ql(d),b.ya.addEventListener("regionadd",function(e){ld(b,e.region,"metadataadded")}),c?S(x,l(function(){return O(function(e){return S(e,function(e,t){var n,r,o;return O(function(i){return 1==i.g?(n=Date.now()/1e3,r=!0,e.F=e.md({tc:e.J,onError:function(t){qd(e,t)},uf:function(){},onExpirationUpdated:function(){var t=Jf("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&r&&(r=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),o=uo([t]),e.F.O=!0,S(i,wi(e.F,[o],[]),2)):S(i,e.F.fc(e.h),0)})}(b,r),0)})},"initializeSrcEqualsDrmInner_"),23):(b.ib=new ql(d),S(x,l(function(){return O(function(e){if(1==e.g)return S(e,Promise.race([o.ma,o.B]),2);b.uc=o.H;var t=o;t.oa=!0,b.I=t.l,b.i=o.Hg(),k(e)})},"waitForFinish"),15));case 15:if(b.H){x.A(16);break}return S(x,l(function(){return O(function(e){return S(e,ad(b),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return b.i&&b.i.textStreams.length&&(b.u.enableTextDisplayer?b.u.enableTextDisplayer():pe("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),S(x,l(function(){return O(function(e){return S(e,o.B,0)})},"waitForFinish"),18);case 18:if(b.g=o.getConfiguration(),b.ze=o.G,b.I&&b.I.setMediaElement&&b.h&&b.I.setMediaElement(b.h),b.se=function(e){return e.wa=!0,e.I}(o),b.re=o.Ga,(p=o.C)&&(b.N=p),u&&b.h&&"AUDIO"===b.h.nodeName&&(function(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())(n=n.value).video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(e){return e.audio})}(b),b.configure("manifest.disableVideo",!0)),o.i){x.A(19);break}return S(x,l(function(){return O(function(e){return S(e,vc(o,b.h),0)})},"drmEngine_.init"),19);case 19:return b.F=function(e){return e.ba=!0,e.i}(o),S(x,l(function(){return O(function(e){return S(e,b.F.fc(b.h),0)})},"drmEngine_.attach"),21);case 21:return h=b.g.abrFactory,b.o&&b.Be==h||(b.Be=h,b.o&&b.o.release(),b.o=h(),"function"!=typeof b.o.setMediaElement&&(pe("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),b.o.setMediaElement=function(){}),"function"!=typeof b.o.setCmsdManager&&(pe("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),b.o.setCmsdManager=function(){}),"function"!=typeof b.o.trySuggestStreams&&(pe("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),b.o.trySuggestStreams=function(){}),b.o.configure(b.g.abr)),g=function(e){return e.xa=!0,e.M}(o),y=o.o,S(x,l(function(){return O(function(t){return S(t,function(t,n,r,o){var i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w,T,C,A,E,I,M,R,_,L,P,D;return O(function(N){switch(N.g){case 1:Zf(t,"load"),i=t.h,t.M=new Bl({Xe:function(){return i.playbackRate},Tc:function(){return i.defaultPlaybackRate},qh:function(e){i.playbackRate=e},ui:function(e){i.currentTime+=e}}),sd(t,i,n),"onchange"in e.screen&&t.j.D(e.screen,"change",function(){if(t.N.getConfiguration){var e=t.N.getConfiguration();"AUTO"==e.hdrLevel?Rd(t):"AUTO"==t.g.preferredVideoHdrLevel&&t.g.abr.enabled&&(e.hdrLevel="AUTO",t.N.configure(e),Rd(t))}}),a=!1,s=m(t.i.variants);for(l=s.next();!l.done;l=s.next())u=l.value,(c=u.video&&u.video.dependencyStream)&&(a=yt(c));!function(e,t,n){n||t.lcevc.enabled?(Yf(e),null==e.S&&(e.S=new ht(e.h,e.Lh,t.lcevc,n),e.H&&(e.H.H=e.S))):Yf(e)}(t,t.g,a),t.yc=t.g.preferredTextLanguage,t.Kd=t.g.preferredTextRole,t.ye=t.g.preferForcedSubs,$d(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),t.o.init(function(e,n,r){t.i&&t.l&&e!=t.l.o&&Pd(t,e,!0,void 0!==n&&n,void 0===r?0:r)}),t.o.setMediaElement(i),t.o.setCmsdManager(t.wa),t.l=function(e){return new uu(e.i,{Hc:function(){return e.G?e.G.He():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Pb:function(){return e.Pb()},video:e.h,Z:e.H,tc:e.J,onError:function(t){return qd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},vf:function(t,n,r){var o=t.startTime,i=t.endTime,a=n.type;if(a!=ct){if(e.G){e.G.xi();var s=Fs(e.H,a);!e.W()&&e.h.paused&&!e.h.seeking&&null!=s&&s>0&&e.G.He()<s&&e.G.Wf(s)}pd(e)}r=(new Map).set("start",o).set("end",i).set("contentType",a).set("isMuxed",r),e.dispatchEvent(Jf("segmentappended",r)),e.o&&n.fastSwitching&&t.Xc&&t.ce&&e.o.trySuggestStreams()},Dk:function(t,n){(n=n.xd)&&e.re&&function(e,t,n){var r=function(e,t){var n=e.g.get(t);return n||(n={ke:[],lg:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,r=e[e.length-1].end,o=t.ke;t.ke=o.filter(function(e,t){return!(e.position<=n&&t+1<o.length&&o[t+1].position<=n||e.position>=r)})}else t.ke=[]}(e,r),e={xd:t,position:n},(t=(r=r.ke).findIndex(function(e){return e.position>=n}))>=0?r.splice(t,r[t].position==n?1:0,e):r.push(e)}(e.re,n,t)},Ph:function(t,n){var r=e.F;if(r.h.parseInbandPsshEnabled&&!r.M&&["audio","video"].includes(t)){t=new vi(Ue(n)),n=0;for(var o=m(t.data),i=o.next();!i.done;i=o.next())n+=i.value.length;if(0==n)r=Promise.resolve();else{for(n=new Uint8Array(n),o=0,i=(t=m(t.data)).next();!i.done;i=t.next())i=i.value,n.set(i,o),o+=i.length;Ci(r,"cenc",n),r=r.m}}else r=Promise.resolve();return r},disableStream:function(t,n){return e.disableStream(t,n)},cl:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.ce)}})}(t),t.l.configure(t.g.streaming),t.m=tp,t.dispatchEvent(Jf("streaming")),f=r;case 2:for((p=t.l.o)||f||(f=_d(t,!0)),h=[],g=m([(d=p||f).video,d.audio]),y=g.next();!y.done;y=g.next())(v=y.value)&&!v.segmentIndex&&(h.push(v.createSegmentIndex()),v.dependencyStream&&h.push(v.dependencyStream.createSegmentIndex()));if(!(h.length>0)){N.A(4);break}return S(N,Promise.all(h),4);case 4:if(!d||0!=d.disabledUntilTime){N.A(2);break}if(t.I&&t.I.onInitialVariantChosen&&t.I.onInitialVariantChosen(d),t.i.isLowLatency&&(t.g.streaming.lowLatencyMode?t.configure(t.Zf):$("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),t.K&&(function(e,t){e.o=t,e.o?e.l==kf?e.l=Cf:e.l==Af&&(e.l=Ef):e.l==Cf?e.l=kf:e.l==Ef&&(e.l=Af)}(t.K,t.i.isLowLatency&&t.g.streaming.lowLatencyMode),function(e,t){if(e.g&&e.g.enabled&&(tf(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then(function(){e.H=t}).catch(function(){e.H=0})}}(t.K,1e3*n)),$d(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),function(e,t,n){e.j.presentationTimeline.W()||(e.ba=t,e.$=n)}(t.l,t.g.playRangeStart,t.g.playRangeEnd),t.Sa=!0,t.dispatchEvent(Jf("canupdatestarttime")),b=function(e){t.G=function(e,t){return new Il(e.h,e.i,e.g.streaming,t,function(){e.ob&&zl(e.ob,!e.G.Ih()),e.l&&e.l.bd(),e.R&&pd(e,"seeking")},function(t){return e.dispatchEvent(t)})}(t,e),t.ob=function(e,t){var n=e.W()||"number"==typeof t&&t>0;(t=new wc(e.se,n)).addEventListener("enter",function(t){Wd(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){Wd(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(Wd(e,"timelineregionenter",n),Wd(e,"timelineregionexit",n))});var r=new wc(e.ya,n);r.addEventListener("enter",function(t){ld(e,t.region,"metadata")}),(n=new wc(e.ib,n)).addEventListener("enter",function(t){t=(new Map).set("detail",t.region.emsg),e.dispatchEvent(Jf("emsg",t))});var o=new Fl(e.h);return o.g.add(t),o.g.add(r),o.g.add(n),e.re&&o.g.add(e.re),o}(t,e),fd(t,i,!1)},t.g.streaming.startAtSegmentBoundary||(null==(x=t.O)&&t.i.startTime&&(x=t.i.startTime),b(x)),p){N.A(7);break}if(!t.g.streaming.startAtSegmentBoundary){N.A(8);break}return w=t.i.presentationTimeline,t.O instanceof Date&&(C=w.m||w.i,null!=(A=t.O.getTime()/1e3-C)&&(T=A)),null==T&&(T="number"==typeof t.O?t.O:t.h.currentTime),null==t.O&&t.i.startTime&&(T=t.i.startTime),E=w.Xb(),I=w.Hb(),T<E?T=E:T>I&&(T=I),S(N,function(e,t){var n,r,o,i,a;return O(function(s){return 1==s.g?(n=e.audio,r=e.video,o=function(e,t){var n,r,o;return O(function(i){return 1==i.g?e?e.segmentIndex?i.A(2):S(i,e.createSegmentIndex(),2):i.return(null):(r=(n=e.segmentIndex.Vb(t))?n.next().value:null)?(o=r.startTime,i.return(o)):i.return(null)})},S(s,o(n,t),2)):3!=s.g?(i=s.h,S(s,o(r,t),3)):null!=(a=s.h)&&null!=i?s.return(Math.max(a,i)):null!=a?s.return(a):null!=i?s.return(i):s.return(t)})}(f,T),9);case 9:M=N.h,b(M);case 8:Pd(t,f,!0,!1,0);case 7:return t.G.ready(),t.Lc().find(function(e){return e.active})||((R=ro(t.i.textStreams,t.yc,t.Kd,t.ye)[0]||null)&&lc(t.B.h,R,!0),f&&(R?(lo(f.audio,R,t.g)&&(t.$=!0),t.$&&t.u.setTextVisibility(!0)):(t.$=!1,t.u.setTextVisibility(!1)),zd(t)),R&&(t.g.streaming.alwaysStreamText||t.Pg())&&(du(t.l,R),Hd(t))),S(N,t.l.start(o),10);case 10:t.g.abr.enabled&&(t.o.enable(),Vd(t)),Nd(t),Rd(t),t.i.variants.some(function(e){return e.primary}),((_=t.W())&&(t.g.streaming.liveSync&&t.g.streaming.liveSync.enabled||t.i.serviceDescription||t.g.streaming.liveSync.panicMode)||t.g.streaming.vodDynamicPlaybackRate)&&(L=function(){return Id(t)},t.j.D(i,"timeupdate",L)),_||(P=function(){return Md(t)},t.j.D(i,"timeupdate",P),Md(t),t.i.nextUrl&&(t.g.streaming.preloadNextUrlWindow>0&&(D=function(){var e;return O(function(n){if(1==n.g)return e=t.Va().end-t.h.currentTime,!isNaN(e)&&e<=t.g.streaming.preloadNextUrlWindow?(t.j.Ma(i,"timeupdate",D),S(n,t.preload(t.i.nextUrl),4)):n.A(0);t.Ta=n.h,k(n)})},t.j.D(i,"timeupdate",D)),t.j.D(i,"ended",function(){t.load(t.Ta||t.i.nextUrl)}))),t.C&&t.C.onManifestUpdated(_),k(N)}})}(b,f,y,g),0)})},"loadInner_"),22);case 22:!function(e){if(e.J)for(var t=m(e.J),n=t.next();!n.done;n=t.next())(n=n.value)();e.J=null}(o),b.ba&&le().aj()&&dr(b.ba)&&function(t,n,r){t.g&&e.ManagedMediaSource&&t.i&&t.B.useSourceElements&&(t.C&&t.g.removeChild(t.C),t.C=es(n,r),t.g.appendChild(t.C),t.g.disableRemotePlayback=!1)}(b.H,b.X,b.ba),x.A(14);break;case 23:return S(x,l(function(){return O(function(e){return S(e,function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h;return O(function(g){switch(g.g){case 1:if(Zf(e,"src-equals"),r=e.h,e.G=new Cl(r),o=!1,e.xe.push(function(){o=!0}),e.dispatchEvent(Jf("canupdatestarttime")),null!=e.O&&e.G.Wf(e.O),e.ob=function(e,t){(t=new wc(e.ya,t instanceof Date||t>0)).addEventListener("enter",function(t){ld(e,t.region,"metadata")});var n=new Fl(e.h);return n.g.add(t),n}(e,e.O||0),e.M=new Bl({Xe:function(){return r.playbackRate},Tc:function(){return r.defaultPlaybackRate},qh:function(e){r.playbackRate=e},ui:function(e){r.currentTime+=e}}),fd(e,r,!0),r.textTracks&&(id(e),i=function(t){if(!(e.u instanceof jc)){var n=bd(e).find(function(e){return"disabled"!==e.mode});n&&(n.mode=t?"showing":"hidden"),e.u instanceof zc&&(n=function(e){return Array.from(e.h.textTracks).find(function(e){return"Shaka Player TextTrack"==e.label})}(e))&&(n.mode=!t&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(r,"enterpictureinpicture",function(){return i(!0)}),e.j.D(r,"leavepictureinpicture",function(){return i(!1)}),r.remote?(e.j.D(r.remote,"connect",function(){return i(!1)}),e.j.D(r.remote,"connecting",function(){return i(!1)}),e.j.D(r.remote,"disconnect",function(){return i(!1)})):"webkitCurrentPlaybackTargetIsWireless"in r&&e.j.D(r,"webkitcurrentplaybacktargetiswirelesschanged",function(){return i(!1)}),((a=r).webkitPresentationMode||a.webkitSupportsFullscreen)&&e.j.D(a,"webkitpresentationmodechanged",function(){a.webkitPresentationMode?i("inline"!==a.webkitPresentationMode):a.webkitSupportsFullscreen&&i(a.webkitDisplayingFullscreen)})),sd(e,r,t),s=function(e,t,n){try{if(!e.g.enabled)return t;var r=ef(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var o=mf;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":o=yf;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":o=hf;break e}o=void 0}return r.ot=o,r.su=!0,pf(t,ff(r))}catch(a){return Y("CMCD_SRC_ERROR","Could not generate src CMCD data.",a),t}}(e.K,e.X,n),!s.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(s+="#t=",e.g.playRangeStart>0&&(s+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(s+=","+e.g.playRangeEnd)),!e.H){g.A(2);break}return S(g,e.H.destroy(),3);case 3:e.H=null;case 2:return ts(r),r.src=s,"TV"==(l=le()).Oa()&&r.load(),"none"!=r.preload&&!r.autoplay&&dr(n)&&"WEBKIT"===l.Ea()&&r.load(),e.m=np,e.dispatchEvent(Jf("streaming")),u=new Mo,gl(r,HTMLMediaElement.HAVE_METADATA,e.j,function(){e.G.ready(),e.ba&&dr(e.ba)||u.resolve()}),c=function(){return new Promise(function(t){var n=new Tr(t);e.j.D(r.textTracks,"change",function(){return n.ka(.5)}),n.ka(.5)})},gl(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var t,n,r,i,a;return O(function(s){if(1==s.g)return S(s,c(),2);if(o)return s.return();if(function(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Ni(t,e.g.preferredAudioRole)}(e),(t=bd(e)).some(function(e){return"showing"===e.mode})&&(e.$=!0,e.u.setTextVisibility(!0)),!(e.u instanceof jc))for(t.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():pe("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),n=!1,r=m(t),i=r.next();!i.done;i=r.next())"disabled"!==(a=i.value).mode&&(n?(a.mode="disabled",$("Found more than one enabled text track, disabling it",a)):(vd(e,a),n=!0));!function(e){var t=e.g.preferredTextLanguage;""!=t&&e.kh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}(e),e.ba&&dr(e.ba)&&u.resolve(),k(s)})}),r.error?u.reject(Xd(e)):"none"==r.preload&&($('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.j.Aa(r,"error",function(){u.reject(Xd(e))}),S(g,Er(e.g.streaming.loadTimeout,u),4);case 4:((f=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(d=function(){return Id(e)},e.j.D(r,"timeupdate",d)),f||(p=function(){return Md(e)},e.j.D(r,"timeupdate",p),Md(e)),e.C&&(e.C.onManifestUpdated(f),f&&(h=e.Va().end,e.j.D(r,"progress",function(){var t=e.Va().end;h!=t&&(e.C.onManifestUpdated(e.W()),h=t)}))),e.Sa=!0,k(g)}})}(b,f,r),0)})},"srcEqualsInner_"),14);case 14:b.dispatchEvent(Jf("loaded"));case 6:if(M(x),!o){x.A(25);break}return S(x,o.destroy(),25);case 25:b.Ta=null,R(x,0);break;case 5:if(!(v=I(x))||7e3==v.code){x.A(27);break}return S(x,b.Bc(!1),27);case 27:throw v}})},o.dj=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,r=this;return O(function(o){return 1==o.g?S(o,td(r),2):3!=o.g?(n=o.h,S(o,r.Bc(e,t),3)):o.return(n)})},o.Vh=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t;var n,r=this;return O(function(o){return 1==o.g?S(o,td(r,t),2):3!=o.g?(n=o.h,S(o,r.detach(e),3)):o.return(n)})},o.preload=function(e,t,n,r){t=void 0===t?null:t;var o,i,a=this;return O(function(s){return 1==s.g?(nc(o=kd(a),r||a.g,kd(a)),S(s,nd(a,e,t,n,!1,o),2)):((i=s.h)?i.start():qd(a,new ze(2,7,7005)),s.return(i))})},o.ng=function(){var e,t,n,r,o=this;return O(function(i){for(e=[],t=m(o.De),n=t.next();!n.done;n=t.next())(r=n.value).j||e.push(r.destroy());return o.De=[],S(i,Promise.all(e),0)})},o.Mk=function(){for(var e=this.ma;e.g;)e.release()},o.md=function(e){return new xi(e)},o.configure=function(e,t){var n=this.getConfiguration();if(2==arguments.length&&"string"==typeof e&&(e=ju(e,t)),"preferredVariantRole"in e&&(pe("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(pe("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(pe("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){pe("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var r=le();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&"WEBKIT"===r.Ea(),delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&"boolean"==typeof e.streaming.liveSync&&(pe("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),r=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=r),e.streaming&&(!e.streaming.liveSync||!("targetLatency"in e.streaming.liveSync))&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){r=e.streaming.liveSyncMinLatency||0;var o=Math.abs((e.streaming.liveSyncMaxLatency||1)-r)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=r+o,e.streaming.liveSync.targetLatencyTolerance=o}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(pe("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(pe("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(pe("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(pe("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(pe("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(pe("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(pe("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(pe("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){pe("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var i=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return i},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(pe("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(pe("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(pe("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(pe("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(pe("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(pe("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(pe("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(pe("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(pe("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(pe("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){for(var a in r=!1,e.drm.advanced){var s=e.drm.advanced[a];o=s.videoRobustness,s=s.audioRobustness,"videoRobustness"in e.drm.advanced[a]&&!Array.isArray(e.drm.advanced[a].videoRobustness)&&(e.drm.advanced[a].videoRobustness=[o],r=!0),"audioRobustness"in e.drm.advanced[a]&&!Array.isArray(e.drm.advanced[a].audioRobustness)&&(e.drm.advanced[a].audioRobustness=[s],r=!0)}r&&pe("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(pe("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(pe("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(pe("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),a=nc(this.g,e,kd(this)),hd(this,n),a},o.tj=function(e){this.Zf=e},o.getConfiguration=function(){var e=kd(this);return nc(e,this.g,kd(this)),e},o.Dj=function(){return this.Zf},o.di=function(){return nc(kd(this),this.g,kd(this)),zu(this.g,kd(this))},o.$h=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.h.currentTime+t,this.Va().end)))return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},o.Ii=function(){var e,t=this.getConfiguration();for(e in this.g)delete this.g[e];nc(this.g,kd(this),kd(this)),hd(this,t)},o.Lj=function(){return this.m},o.bi=function(){return this.i?this.i.type:null},o.Pj=function(){return this.h},o.Wb=function(){return this.J},o.rd=function(){return this.X},o.Zh=function(){return this.C?this.C:null},o.ei=function(){return this.Da?this.Da:null},o.W=function(){return this.i&&!this.va()?this.i.presentationTimeline.W():!(!this.h||!this.h.src&&!this.va())&&this.h.duration==1/0},o.Vc=function(){return!!this.i&&this.i.presentationTimeline.Vc()},o.ik=function(){if(this.i&&!this.va()){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src&&!this.va())&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},o.rk=function(){if(this.i&&!this.va()){var e=this.i.variants;return!(!e.length||(e=e[0]).audio||!e.video||e.video.codecs.includes(","))}return!(!this.h||!this.h.src&&!this.va()||!this.h.audioTracks)&&0==this.h.audioTracks.length},o.Va=function(){if(this.i&&!this.va()){if(!this.Sa&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Xb(),end:e.Hb()}}if(this.h&&(this.h.src||this.va())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return{start:t,end:e=Math.min(e.end(e.length-1),n)}}return{start:0,end:0}},o.fk=function(){this.W()&&(this.h.currentTime=this.Va().end)},o.jk=function(){return this.Sa},o.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},o.drmInfo=function(){return this.F?this.F.g:null},o.Ud=function(){return this.F?this.F.Ud():1/0},o.Gg=function(){return this.F?this.F.Gg():[]},o.We=function(){return this.F?this.F.We():{}},o.Og=function(){return this.R?this.R.g==Gi:!!this.X},o.Pb=function(){return this.h?this.M?this.M.i:1:0},o.Gh=function(e){this.m==tp&&this.l&&cu(this.l,e)},o.qe=function(e,t){t=void 0===t||t,0==e?$("A trick play rate of 0 is unsupported!"):(this.M.set(e),this.m==tp&&(this.o.playbackRateChanged(e),this.Gh(t&&1!=e)),Ad(this,e))},o.Nd=function(){var e=this.M.Tc();this.m==np&&this.M.set(e),this.m==tp&&(this.M.set(e),this.o.playbackRateChanged(e),this.Gh(!1)),this.ac.Qa()},o.lc=function(){if(this.i&&!this.va()){for(var e=this.l?this.l.o:null,t=[],n=0,r=m(this.i.variants),o=r.next();!o.done;o=r.next())if(to(o=o.value)){var i=$r(o);i.active=o==e,i.active||1==n||null==e||o.video!=e.video||o.audio!=e.audio||(i.active=!0),i.active&&n++,t.push(i)}return t}if(this.h&&this.h.audioTracks){var a=Od(this);return(e=Array.from(this.h.audioTracks)).length?e.map(function(e){return eo(e,a)}):a?[eo(null,a)]:[]}return[]},o.Lc=function(){if(this.i){if(this.va())return[];for(var e=this.l?this.l.B:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){var o=Yr(r=r.value);o.active=r==e,t.push(o)}return t}return this.h&&this.h.src&&this.h.textTracks?bd(this).map(function(e){return Zr(e)}):[]},o.Ij=function(){var e=this.Fe;return this.i&&(e=this.i.imageStreams),e.map(function(e){return Jr(e)})},o.wj=function(e){var t,n,r=this;return O(function(o){return 1==o.g?S(o,gd(r,e),2):(t=o.h)?(n=[],t.segmentIndex.Gb(function(e){var r=md(e.tilesLayout||t.tilesLayout);if(r)for(var o=r.rows*r.columns,i=e.j-e.startTime,a=0;a<o;a++){var s=yd(e,t,e.startTime+i*a/o,r);n.push(s)}}),t.closeSegmentIndex&&t.closeSegmentIndex(),o.return(n)):o.return(null)})},o.Zj=function(e,t){var n,r,o,i,a=this;return O(function(s){return 1==s.g?S(s,gd(a,e),2):(n=s.h)?null==(r=n.segmentIndex.find(t))?s.return(null):(o=n.segmentIndex.get(r),(i=md(o.tilesLayout||n.tilesLayout))?s.return(yd(o,n,t,i)):s.return(null)):s.return(null)})},o.mh=function(e){var t,n=this;this.i&&this.G&&((t=n.i.textStreams.find(function(t){return t.id==e.id}))&&t!=n.l.B&&(lc(n.B.h,t,!1),du(n.l,t),Fd(n),Hd(n),n.yc=t.language),!this.va())||function(){if(n.h&&n.h.textTracks){var t=bd(n),r=t.find(function(t){return Qr(t)===e.id});if(r){if(n.u instanceof jc)for(var o=(t=m(t)).next();!o.done;o=t.next()){var i=(o=o.value)===r?n.$?"showing":"hidden":"disabled";o.mode!==i&&(o.mode=i)}else(t=t.find(function(e){return"disabled"!==e.mode}))!==r&&(t&&(t.mode="disabled",n.j.Ma(t,"cuechange"),n.u.remove(0,1/0)),r&&vd(n,r));Fd(n),Hd(n)}}}()},o.Ff=function(e,t,n){var r=this;t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.G&&(function(){var o=r.i.variants.find(function(t){return t.id==e.id});if(o&&to(o)){var i=r.l.o;r.g.abr.enabled&&(i.video!=o.video||i.audio&&o.audio&&i.audio.language==o.audio.language&&i.audio.channelsCount==o.audio.channelsCount&&i.audio.label==o.audio.label)&&$("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.va()?Pd(r,o,!1,!1,0):Pd(r,o,!1,t||!1,n||0),r.N.configure({language:o.language,role:o.audio&&o.audio.roles&&o.audio.roles[0]||"",videoRole:o.video&&o.video.roles&&o.video.roles[0]||"",channelCount:o.audio&&o.audio.channelsCount?o.audio.channelsCount:0,hdrLevel:o.video&&o.video.hdr?o.video.hdr:"",spatialAudio:!(!o.audio||!o.audio.spatialAudio)&&o.audio.spatialAudio,videoLayout:o.video&&o.video.videoLayout?o.video.videoLayout:"",audioLabel:o.audio&&o.audio.label?o.audio.label:"",videoLabel:o.video&&o.video.label?o.video.label:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:o.audio&&o.audio.codecs?o.audio.codecs:"",activeAudioCodec:i.audio&&i.audio.codecs?i.audio.codecs:"",activeAudioChannelCount:i.audio&&i.audio.channelsCount?i.audio.channelsCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Rd(r)}}(),!this.va())||function(){if(e.originalAudioId&&r.h&&r.h.audioTracks)for(var t=Array.from(r.h.audioTracks),n=(t=m(t)).next();!n.done;n=t.next())if(Qr(n=n.value)==e.id){Dd(r,n);break}}()},o.Uk=function(e,t){var n,r=this;t=void 0===t?0:t,this.i&&this.G&&((n=r.N.getConfiguration()).audioCodec=e.codecs||"",n.audioLabel=e.label||"",n.channelCount=e.channelsCount||0,n.language=e.language,n.role=e.roles[0]||"",n.spatialAudio=e.spatialAudio,r.N.configure(n),Ld(r,!0,t,!1,!1),!this.va())||function(){if(r.h&&r.h.audioTracks){for(var t=Lr(e.language),n=Array.from(r.h.audioTracks),o=null,i=(n=m(n)).next();!i.done;i=n.next()){var a=(i=i.value).language||"und";if(i.label==e.label&&Lr(a)==t&&i.kind==e.roles[0]){o=i;break}}o&&Dd(r,o)}}()},o.getAudioTracks=function(){if(this.i&&!this.va()){var e=this.lc();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e;if(this.m!=tp||this.va()||(n=e.filter(function(e){return e.originalVideoId===t.originalVideoId&&e.audioCodec})),!n.length)return[];e=new Map;for(var r=(n=m(n)).next();!r.done;r=n.next()){var o=(r=r.value).originalAudioId;o||null==r.audioId||(o=String(r.audioId)),o&&(o+=[r.language,r.label,r.channelsCount,r.spatialAudio].join("_"),e.set(o,{active:r.active,language:r.language,label:r.label,mimeType:r.audioMimeType,codecs:r.audioCodec,primary:r.primary,roles:r.audioRoles||[],accessibilityPurpose:r.accessibilityPurpose,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,originalLanguage:r.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){var t=e.language;return t={active:e.enabled,language:Lr(t||"und"),label:e.label,mimeType:null,codecs:null,primary:"main"==e.kind,roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:t},e.kind&&t.roles.push(e.kind),e.configuration&&(e.configuration.codec&&(t.codecs=e.configuration.codec),e.configuration.sampleRate&&(t.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(t.channelsCount=e.configuration.numberOfChannels)),t}):[]},o.Wk=function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n;var r=this.lc();if(r.length){var o=r.find(function(e){return e.active});o&&(r=r.find(function(t){return t.audioId===o.audioId&&(t.videoBandwidth||t.bandwidth)==e.bandwidth&&t.width==e.width&&t.height==e.height&&t.frameRate==e.frameRate&&t.pixelAspectRatio==e.pixelAspectRatio&&t.hdr==e.hdr&&t.colorGamut==e.colorGamut&&t.videoLayout==e.videoLayout&&t.videoMimeType==e.mimeType&&t.videoCodec==e.codecs&&ne(t.videoRoles,e.roles)&&t.videoLabel==e.label}))&&!r.active&&this.Ff(r,t,n)}},o.getVideoTracks=function(){if(this.m==np||this.va())return[];var e=this.lc();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e.filter(function(e){return e.originalAudioId===t.originalAudioId&&e.audioId===t.audioId&&e.audioGroupId===t.audioGroupId&&e.videoCodec});if(!n.length)return[];e=new Map;for(var r=(n=m(n)).next();!r.done;r=n.next()){var o=(r=r.value).originalVideoId;o||null==r.videoId||(o=String(r.videoId)),o&&e.set(o,{active:r.active,bandwidth:r.videoBandwidth||r.bandwidth,width:r.width,height:r.height,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,mimeType:r.videoMimeType,codecs:r.videoCodec,roles:r.videoRoles||[],label:r.videoLabel})}return Array.from(e.values())},o.yj=function(){return Qd(this.lc())},o.Xj=function(){return Qd(this.Lc())},o.xj=function(){return Array.from(Jd(this.lc()))},o.Wj=function(){return Array.from(Jd(this.Lc()))},o.Ni=function(e,t,n,r,o,i,a){var s=this;n=void 0===n?0:n,r=void 0===r?0:r,o=void 0===o?"":o,i=void 0!==i&&i,a=void 0===a?"":a,this.i&&this.G&&(function(){function l(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0}var u=s.l.o;s.N=s.g.adaptationSetCriteriaFactory(),s.N.configure({language:e,role:t||"",videoRole:u.video&&u.video.roles&&u.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:i||!1,videoLayout:"",audioLabel:a||"",videoLabel:"",codecSwitchingStrategy:s.g.mediaSource.codecSwitchingStrategy,audioCodec:o||"",activeAudioCodec:u.audio&&u.audio.codecs?u.audio.codecs:"",activeAudioChannelCount:u.audio&&u.audio.channelsCount?u.audio.channelsCount:0,preferredAudioCodecs:s.g.preferredAudioCodecs,preferredAudioChannelCount:s.g.preferredAudioChannelCount});for(var c=s.N.create(s.i.variants),f=null,d=(c=m(c.values())).next();!d.done;d=c.next())to(d=d.value)&&(!f||l(f,u)>l(d,u))&&(f=d);f!=u&&(f?(u=$r(f),s.Ff(u,!0,r||0)):Ld(s))}(),!this.va())||function(){if(s.h&&s.h.audioTracks){var n=ro(s.lc(),e,t||"",!1)[0];n&&s.Ff(n)}}()},o.kh=function(e,t,n){var r,o=this;n=void 0!==n&&n,this.i&&this.G&&(function(){o.yc=e,o.Kd=t||"",o.ye=n||!1;var r=ro(o.i.textStreams,o.yc,o.Kd,o.ye)[0]||null;r&&r!=o.l.B&&(lc(o.B.h,r,!1),o.g.streaming.alwaysStreamText||o.Pg())&&(du(o.l,r),Fd(o),Hd(o))}(),!this.va())||(r=ro(o.Lc(),e,t||"",n||!1)[0])&&o.mh(r)},o.Vk=function(e,t,n){var r=this;t=void 0===t||t,n=void 0===n?0:n,this.i&&this.G&&(function(){for(var o=null,i=m(r.i.variants),a=i.next();!a.done;a=i.next())if((a=a.value).audio.label==e){o=a;break}null!=o&&(r.N=r.g.adaptationSetCriteriaFactory(),r.N.configure({language:o.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Ld(r,t,n))}(),!this.va())||function(){if(r.h&&r.h.audioTracks){for(var t=Array.from(r.h.audioTracks),n=null,o=(t=m(t)).next();!o.done;o=t.next())(o=o.value).label==e&&(n=o);n&&Dd(r,n)}}()},o.Pg=function(){var e=this.$;return this.u?this.u.isTextVisible():e},o.Cj=function(){return this.kb.map(function(e){return Yr(e)})},o.Aj=function(e){if(pe("getChapters","Please use an getChaptersAsync."),!this.kb.length)return[];var t=Lr(e);if(!(e=this.kb.filter(function(e){return Lr(e.language)==t})).length)return[];for(var n=[],r=new Set,o=(e=m(e)).next();!o.done;o=e.next())(o=o.value).segmentIndex&&o.segmentIndex.Gb(function(e){var t=e.P()[0],o=e.startTime+"-"+e.endTime+"-"+t;e={id:o,title:t,startTime:e.startTime,endTime:e.endTime},r.has(o)||(n.push(e),r.add(o))});return n},o.Bj=function(e){var t,n,r,o,i,a,s,l=this;return O(function(u){switch(u.g){case 1:if(!l.kb.length)return u.return([]);if(t=Lr(e),!(n=l.kb.filter(function(e){return Lr(e.language)==t})).length)return u.return([]);r=[],o=new Set,i=m(n),a=i.next();case 2:if(a.done){u.A(4);break}if((s=a.value).segmentIndex){u.A(5);break}return S(u,s.createSegmentIndex(),5);case 5:s.segmentIndex.Gb(function(e){var t=e.P()[0],n=e.startTime+"-"+e.endTime+"-"+t;e={id:n,title:t,startTime:e.startTime,endTime:e.endTime},o.has(n)||(r.push(e),o.add(n))}),a=i.next(),u.A(2);break;case 4:return u.return(r)}})},o.rh=function(e){e=!!e,this.$!=e&&(this.$=e,this.m==tp?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=ro(this.i.textStreams,this.yc,this.Kd,this.ye)).length>0&&(du(this.l,e[0]),Fd(this),Hd(this)):function(e){var t=e.h.get(ct);t&&(Mu(t),Ru(t).catch(function(){}),e.H=e.h.get(ct),e.h.delete(ct),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),zd(this))},o.Qj=function(){if(this.G)var e=this.G.He();else{if(null==this.O)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.va()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},o.Ig=function(){if(this.i&&!this.va()){var e=this.i.presentationTimeline;return null===(e=e.m||e.i)?null:new Date(1e3*e)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},o.Ye=function(){return this.W()&&this.i?this.i.presentationTimeline.Ye():null},o.Fc=function(){if(this.m==tp)return this.H.Fc();var e={total:[],audio:[],video:[],text:[]};return this.m==np&&(e.total=Qa(this.h.buffered)),e},o.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},o.getStats=function(){if(this.m!=tp&&this.m!=np)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Ed(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||function(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}(this.B,Math.round(100*t)),this.G&&(this.B.S=this.G.Hh(),this.B.V=this.G.Jh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),function(e,t,n){e.R=t,e.O=n}(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?function(e){return e.I?e.I:NaN}(this.F):NaN,cc(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&null!=this.Ig()&&(e=xd(this)||0,this.B.F=e/1e3),t=this.lc().find(function(e){return e.active}),e=this.Lc().find(function(e){return e.active}),t){if(t.bandwidth){var n=this.M?this.M.i:1,r=n*t.bandwidth;e&&e.bandwidth&&(r+=n*e.bandwidth),this.B.B=r}t.width&&t.height&&cc(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=tp||this.va()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==np&&fc(this.B,NaN),dc(this.B)},o.Md=function(e,t,n,r,o,i,a){a=void 0!==a&&a;var s,l,u,c,f,d,p,h,m,g,y=this;return O(function(v){switch(v.g){case 1:if(y.m!=tp&&y.m!=np)throw new ze(1,7,7004);if("subtitles"!=n&&"captions"!=n&&$("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){v.A(2);break}return S(v,wd(y,e),3);case 3:r=v.h;case 2:if(s=[],y.C&&(s=y.C.getCuePoints()),y.m!=np){v.A(4);break}return l=le(),a&&"WEBKIT"===l.Ea()&&(n="forced"),S(v,function(e,t,n,r,o,i,a){var s,l,u,c;return O(function(f){if(1==f.g)return"text/vtt"!=o||a.length?S(f,Sd(e,t,e.J,e.g.streaming.retryParameters),3):f.A(2);2!=f.g&&(s=f.h,l=Td(e,s,o,a),u=new Blob([l],{type:"text/vtt"}),t=il(u),o="text/vtt"),c=document.createElement("track");e:{var d=e.K,p=t;try{if(!d.g.enabled){var h=p;break e}var m=ef(d);m.ot=bf,m.su=!0,h=pf(p,ff(m));break e}catch(g){Y("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",g),h=p;break e}h=void 0}return c.src=h,c.label=i,c.kind=r,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.Yf.push(c),f.return(c)})}(y,e,t,n,r,i||"",s),5);case 5:if((u=v.h).track)return Nd(y),v.return(Zr(u.track));throw new ze(1,2,2012);case 4:if(c=ft,f=y.Va(),d=f.end-f.start,y.i&&(d=y.i.presentationTimeline.getDuration()),d==1/0)throw new ze(1,4,4033);if(!s.length){v.A(6);break}return S(v,Sd(y,e,y.J,y.g.streaming.retryParameters),7);case 7:p=v.h,h=Td(y,p,r,s),m=new Blob([h],{type:"text/vtt"}),e=il(m),r="text/vtt";case 6:if(g={id:y.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ol(0,d,[e]),mimeType:r||"",codecs:o||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:i||null,type:c.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([or(r||"",o||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},!vr(or(g.mimeType,g.codecs)))throw new ze(2,2,2014,r);return y.i.textStreams.push(g),Nd(y),v.return(Yr(g))}})},o.Le=function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w=this;return O(function(T){switch(T.g){case 1:if(w.m!=tp&&w.m!=np)throw new ze(1,7,7004);if(t){T.A(2);break}return S(T,wd(w,e),3);case 3:t=T.h;case 2:if("text/vtt"!=t)throw new ze(1,2,2017,e);if(n=ft,r=w.Va(),o=r.end-r.start,w.i&&(o=w.i.presentationTimeline.getDuration()),o==1/0)throw new ze(1,4,4045);return S(T,Sd(w,e,w.J,w.g.streaming.retryParameters),4);case 4:if(i=T.h,!(a=yr(t)))throw new ze(2,2,2014,t);for(s=a(),l={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},u=Ue(i),c=s.parseMedia(u,l,e,[]),f=[],d=m(c),p=d.next(),h={};!p.done;h={Sf:void 0,nd:void 0},p=d.next())h.nd=p.value,h.Sf=null,g=function(t){return function(){return null==t.Sf&&(t.Sf=ot([e],[t.nd.payload])),t.Sf||[]}}(h),y=new Ha(h.nd.startTime,h.nd.endTime,g,0,null,null,0,0,1/0),h.nd.payload.includes("#xywh")&&4===(v=h.nd.payload.split("#xywh=")[1].split(",")).length&&y.If({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)}),f.push(y);if(b=t,!f.length){T.A(5);break}return S(T,Ac(f[0].P()[0],w.J,w.g.manifest.retryParameters),6);case 6:b=T.h;case 5:return x={id:w.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pl(f),mimeType:b||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.Uf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([or(b||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},w.m==np?w.Fe.push(x):w.i.imageStreams.push(x),Nd(w),T.return(Jr(x))}})},o.Ke=function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b=this;return O(function(x){switch(x.g){case 1:if(b.m!=tp&&b.m!=np)throw new ze(1,7,7004);if(n){x.A(2);break}return S(x,wd(b,e),3);case 3:n=x.h;case 2:if(r=ft,o=b.Va(),i=o.end-o.start,b.i&&(i=b.i.presentationTimeline.getDuration()),i==1/0)throw new ze(1,4,4054);return S(x,Sd(b,e,b.J,b.g.streaming.retryParameters),4);case 4:if(a=x.h,!(s=yr(n)))throw new ze(2,2,2014,n);for(l=s(),u={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0},c=Ue(a),f=l.parseMedia(c,u,e,[]),d=[],p=m(f),h=p.next(),g={};!h.done;g={Te:void 0},h=p.next())g.Te=h.value,y=new Ha(g.Te.startTime,g.Te.endTime,function(e){return function(){return[e.Te.payload]}}(g),0,null,null,0,0,1/0),d.push(y);return v={id:b.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pl(d),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:r.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([or("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},b.kb.push(v),Nd(b),x.return(Yr(v))}})},o.al=function(e,t){this.xa.width=e,this.xa.height=t},o.gh=function(e){if(this.m==tp){var t=this.l;if(e=void 0===e?.1:e,t.l.g)t=!1;else if(t.C)t=!1;else{for(var n=m(t.h.values()),r=n.next();!r.done;r=n.next())!(r=r.value).Xd||r.Ja||r.sb||(r.Xd=!1,Iu(t,r,e));t=!0}}else t=!1;return t},o.Hg=function(){return $("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},o.Mj=function(){return this.uc},o.Gj=function(){var e={video:null,audio:null,text:null};if(this.m!=tp)return e;for(var t=this.l.o,n=this.h.currentTime,r=(t=m([t.video,t.audio,this.l.B])).next();!r.done;r=t.next())if((r=r.value)&&r.segmentIndex){var o=r.segmentIndex.find(n);o={codecs:(o=r.segmentIndex.get(o)).codecs||r.codecs,mimeType:o.mimeType||r.mimeType,bandwidth:o.bandwidth||r.bandwidth},"video"==r.type?(o.width=r.width,o.height=r.height,e.video=o):"audio"==r.type?e.audio=o:r.type==ct&&(e.text=o)}return e},o.Ti=function(e){this.ve=e},o.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Zd||!navigator.onLine||0==t||!this.i)return!1;if(this.i.variants.some(function(t){var n=t[e.type];return!(!n||n.id===e.id||t.disabledUntilTime||"audio"==e.type&&e.language!==n.language)})){for(var n=!1,r=!1,o=m(this.i.variants),i=o.next();!i.done;i=o.next()){var a=(i=i.value)[e.type];a&&(a.id===e.id?(i.disabledUntilTime=Date.now()/1e3+t,n=!0):a.trickModeVideo&&a.trickModeVideo.id==e.id&&(r=!0))}return!(!n&&r||(this.Ce.Fa(1),t=this.Fc().video.reduce(function(e,t){return e+t.end-t.start},0),Ld(this,!1,t,!0,!1),0))}return!1},o.addFont=function(t,n){return function(t,n){var r,o,i,a,s;return O(function(l){if(1==l.g)return"fonts"in document&&"FontFace"in e?S(l,document.fonts.ready,2):l.return();if(!("entries"in document.fonts))return l.return();for(r=function(e){for(var t=[],n=(e=e.entries()).next();!1===n.done;)t.push(n.value),n=e.next();return t},o=m(r(document.fonts)),i=o.next();!i.done;i=o.next())if((a=i.value).family===t&&"swap"===a.display)return l.return();s=new FontFace(t,"url("+n+")",{display:"swap"}),document.fonts.add(s),k(l)})}(t,n)},o.va=function(){return!(!this.h||!this.h.remote)&&"disconnected"!=this.h.remote.state},o.ae=function(){return!(this.h&&!this.h.ended)||this.Sa&&!this.W()&&this.h.currentTime>=this.Va().end},H("shaka.Player",$f),$f.prototype.isEnded=$f.prototype.ae,$f.prototype.isRemotePlayback=$f.prototype.va,$f.prototype.addFont=$f.prototype.addFont,$f.prototype.setVideoContainer=$f.prototype.Ti,$f.prototype.getFetchedPlaybackInfo=$f.prototype.Gj,$f.prototype.getManifestParserFactory=$f.prototype.Mj,$f.prototype.getManifest=$f.prototype.Hg,$f.prototype.retryStreaming=$f.prototype.gh,$f.prototype.setMaxHardwareResolution=$f.prototype.al,$f.prototype.addChaptersTrack=$f.prototype.Ke,$f.prototype.addThumbnailsTrack=$f.prototype.Le,$f.prototype.addTextTrackAsync=$f.prototype.Md,$f.prototype.getStats=$f.prototype.getStats,$f.prototype.getBufferedInfo=$f.prototype.Fc,$f.prototype.getSegmentAvailabilityDuration=$f.prototype.Ye,$f.prototype.getPresentationStartTimeAsDate=$f.prototype.Ig,$f.prototype.getPlayheadTimeAsDate=$f.prototype.Qj,$f.prototype.setTextTrackVisibility=$f.prototype.rh,$f.prototype.getChaptersAsync=$f.prototype.Bj,$f.prototype.getChapters=$f.prototype.Aj,$f.prototype.getChaptersTracks=$f.prototype.Cj,$f.prototype.isTextTrackVisible=$f.prototype.Pg,$f.prototype.selectVariantsByLabel=$f.prototype.Vk,$f.prototype.selectTextLanguage=$f.prototype.kh,$f.prototype.selectAudioLanguage=$f.prototype.Ni,$f.prototype.getTextLanguages=$f.prototype.Wj,$f.prototype.getAudioLanguages=$f.prototype.xj,$f.prototype.getTextLanguagesAndRoles=$f.prototype.Xj,$f.prototype.getAudioLanguagesAndRoles=$f.prototype.yj,$f.prototype.getVideoTracks=$f.prototype.getVideoTracks,$f.prototype.selectVideoTrack=$f.prototype.Wk,$f.prototype.getAudioTracks=$f.prototype.getAudioTracks,$f.prototype.selectAudioTrack=$f.prototype.Uk,$f.prototype.selectVariantTrack=$f.prototype.Ff,$f.prototype.selectTextTrack=$f.prototype.mh,$f.prototype.getThumbnails=$f.prototype.Zj,$f.prototype.getAllThumbnails=$f.prototype.wj,$f.prototype.getImageTracks=$f.prototype.Ij,$f.prototype.getTextTracks=$f.prototype.Lc,$f.prototype.getVariantTracks=$f.prototype.lc,$f.prototype.cancelTrickPlay=$f.prototype.Nd,$f.prototype.trickPlay=$f.prototype.qe,$f.prototype.useTrickPlayTrackIfAvailable=$f.prototype.Gh,$f.prototype.getPlaybackRate=$f.prototype.Pb,$f.prototype.isBuffering=$f.prototype.Og,$f.prototype.getKeyStatuses=$f.prototype.We,$f.prototype.getActiveSessionsMetadata=$f.prototype.Gg,$f.prototype.getExpiration=$f.prototype.Ud,$f.prototype.drmInfo=$f.prototype.drmInfo,$f.prototype.keySystem=$f.prototype.keySystem,$f.prototype.isFullyLoaded=$f.prototype.jk,$f.prototype.goToLive=$f.prototype.fk,$f.prototype.seekRange=$f.prototype.Va,$f.prototype.isVideoOnly=$f.prototype.rk,$f.prototype.isAudioOnly=$f.prototype.ik,$f.prototype.isInProgress=$f.prototype.Vc,$f.prototype.isLive=$f.prototype.W,$f.prototype.getQueueManager=$f.prototype.ei,$f.prototype.getAdManager=$f.prototype.Zh,$f.prototype.getAssetUri=$f.prototype.rd,$f.prototype.getNetworkingEngine=$f.prototype.Wb,$f.prototype.getMediaElement=$f.prototype.Pj,$f.prototype.getManifestType=$f.prototype.bi,$f.prototype.getLoadMode=$f.prototype.Lj,$f.prototype.resetConfiguration=$f.prototype.Ii,$f.prototype.getBufferFullness=$f.prototype.$h,$f.prototype.getNonDefaultConfiguration=$f.prototype.di,$f.prototype.getConfigurationForLowLatency=$f.prototype.Dj,$f.prototype.getConfiguration=$f.prototype.getConfiguration,$f.prototype.configurationForLowLatency=$f.prototype.tj,$f.prototype.configure=$f.prototype.configure,$f.prototype.releaseAllMutexes=$f.prototype.Mk,$f.prototype.destroyAllPreloads=$f.prototype.ng,$f.prototype.preload=$f.prototype.preload,$f.prototype.detachAndSavePreload=$f.prototype.Vh,$f.prototype.unloadAndSavePreload=$f.prototype.dj,$f.prototype.load=$f.prototype.load,$f.prototype.updateStartTime=$f.prototype.ll,$f.prototype.unload=$f.prototype.Bc,$f.prototype.detach=$f.prototype.detach,$f.prototype.attachCanvas=$f.prototype.kj,$f.prototype.attach=$f.prototype.fc,$f.probeSupport=function(t){var n,r,o,i,a;return t=void 0===t||t,O(function(s){switch(s.g){case 1:if(n={},!t){s.A(2);break}return S(s,function(){var t,n,r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w,T,A,M,R,_,L,P,D,N,U,B,j,F,z;return O(function(V){if(1==V.g){if(t="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)){for(n={},r=m(t),o=r.next();!o.done;o=r.next())i=o.value,n[i]=null;return V.return(n)}for(a="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),l={"com.widevine.alpha":s=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],"com.widevine.alpha.experiment":s,"com.microsoft.playready.recommendation":["150","2000","3000"]},f={videoCapabilities:u=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],initDataTypes:["cenc","sinf","skd","keyids"]},d=[null,"cenc","cbcs"],p=new Map,h=le(),g=function(e,t){var n,r,o,i,s,l,u,c,f,d,g,y,v;return O(function(b){switch(b.g){case 1:return C(b,2),S(b,t.createMediaKeys(),5);case 5:n=b.h;case 4:E(b,3);break;case 2:return I(b),b.return();case 3:if(o=!!(r=t.getConfiguration().sessionTypes)&&r.includes("persistent-license"),h.ti()&&(o=!1),i=t.getConfiguration().videoCapabilities,s=t.getConfiguration().audioCapabilities,l={persistentState:o,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},p.has(e)&&p.get(e)?l=p.get(e):p.set(e,l),(u=i[0].encryptionScheme)&&!l.encryptionSchemes.includes(u)&&l.encryptionSchemes.push(u),(c=i[0].robustness)&&!l.videoRobustnessLevels.includes(c)&&l.videoRobustnessLevels.push(c),(f=s[0].robustness)&&!l.audioRobustnessLevels.includes(f)&&l.audioRobustnessLevels.push(f),"getStatusForPolicy"in n){for(d=[],g=m(a),y=g.next(),v={};!y.done;v={Yd:void 0},y=g.next())v.Yd=y.value,l.minHdcpVersions.includes(v.Yd)||d.push(n.getStatusForPolicy({minHdcpVersion:v.Yd}).then(function(e){return function(t){"usable"!=t||l.minHdcpVersions.includes(e.Yd)||l.minHdcpVersions.push(e.Yd)}}(v)));return S(b,Promise.all(d),0)}b.A(0)}})},y=function(e,t,n,r){var o,i,a,s,l,u,c,d,p,h;return O(function(y){switch(y.g){case 1:for(C(y,2),o=zt(f),i=m(o.videoCapabilities),a=i.next();!a.done;a=i.next())(s=a.value).encryptionScheme=t,s.robustness=n;for(l=m(o.audioCapabilities),u=l.next();!u.done;u=l.next())(c=u.value).encryptionScheme=t,c.robustness=r;return(d=zt(o)).persistentState="required",d.sessionTypes=["persistent-license"],p=[d,o],"MOBILE"==le().Oa()?S(y,Er(5,navigator.requestMediaKeySystemAccess(e,p)),7):S(y,navigator.requestMediaKeySystemAccess(e,p),6);case 6:h=y.h,y.A(5);break;case 7:h=y.h;case 5:return S(y,g(e,h),8);case 8:E(y,0);break;case 2:I(y),k(y)}})},v=function(e,t,n,r){var o,i,a;return O(function(s){switch(s.g){case 1:return C(s,2),o={type:"media-source",video:{contentType:u[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:c[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:e,video:{encryptionScheme:t,robustness:n},audio:{encryptionScheme:t,robustness:r}}},"MOBILE"==le().Oa()?S(s,Er(5,navigator.mediaCapabilities.decodingInfo(o)),7):S(s,navigator.mediaCapabilities.decodingInfo(o),6);case 6:i=s.h,s.A(5);break;case 7:i=s.h;case 5:return a=i.keySystemAccess,S(s,g(e,a),8);case 8:E(s,0);break;case 2:I(s),k(s)}})},b=m(t),x=b.next();!x.done;x=b.next())w=x.value,p.set(w,null);for(T=function(e){return"WEBKIT"!==le().Ea()||"org.w3.clearkey"!==e},A=[],M=m(d),R=M.next();!R.done;R=M.next())for(_=R.value,L=m(t),P=L.next();!P.done;P=L.next())D=P.value,T(D)&&(A.push(y(D,_,"","")),A.push(v(D,_,"","")));for(N=m(t),U=N.next();!U.done;U=N.next())for(B=U.value,j=m(l[B]||[]),F=j.next();!F.done;F=j.next())z=F.value,T(B)&&(A.push(y(B,null,z,"")),A.push(y(B,null,"",z)),A.push(v(B,null,z,"")),A.push(v(B,null,"",z)));return S(V,Promise.all(A),2)}return V.return(ri(p))})}(),3);case 3:n=s.h;case 2:return r=function(){var e={};if(le(),Ky())for(var t=m(na.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(n=(t=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!n.done;n=t.next())e[n=n.value]=Ky()?na.has(n):""!=rs().canPlayType(n);return e}(),o=function(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(g(hr)),t={};le();for(var n=(e=m(e)).next();!n.done;n=e.next()){if(vr(n=n.value))t[n]=!0;else if(Ky()){var r=cr(n);r=or(r,Kr(fr(n),r)),t[n]=vt(r)||!!Jn(r)}else t[n]=""!=rs().canPlayType(n);t[r=n.split(";")[0]]=t[r]||t[n]}return t}(),S(s,le().jc(),4);case 4:return i=s.h,a={manifest:r,media:o,drm:n,hardwareResolution:i},op.forEach(function(e,t){a[t]=e()}),s.return(a)}})},$f.isBrowserSupported=function(){return e.Promise||$("A Promise implementation or polyfill is required"),!(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")||(le(),!Ky()&&""==rs().canPlayType("application/x-mpegurl")))},$f.setQueueManagerFactory=function(e){ap=e},$f.setAdManagerFactory=function(e){ip=e},$f.registerSupportPlugin=Qf,$f.prototype.destroy=$f.prototype.destroy;var Zd=0,ep=1,tp=2,np=3;$f.LoadMode={DESTROYED:Zd,NOT_LOADED:ep,MEDIA_SOURCE:tp,SRC_EQUALS:np},$f.version="v4.16.0";var rp=["4","16"];ge=new function(e){this.g=e,this.i=he,this.h=me}(new de(Number(rp[0]),Number(rp[1])));var op=new Map,ip=null,ap=null;function sp(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function lp(e){return e.g.length?e.g.reduce(function(e,t){return e+t},0)/e.g.length:0}function up(e,t,n){var r=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new oe,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}function cp(){}function fp(e,t){for(var n=[],r=(e=m($t(e,"Ad"))).next();!r.done;r=e.next())if((r=Zt(r.value,"InLine"))&&(r=Zt(r,"Creatives")))for(var o=(r=m($t(r,"Creative"))).next();!o.done;o=r.next()){var i=Zt(o=o.value,"Linear");if(i&&dp(n,t,i),o=Zt(o,"NonLinearAds"))for(var a=(o=m(o=$t(o,"NonLinear"))).next();!a.done;a=o.next())e:{i=n;var s=t,l=a.value,u=Zt(l,"StaticResource");if(u)a=u.attributes.creativeType;else{if(!(u=Zt(l,"HTMLResource")))break e;a="text/html"}if(u=Jt(u)){"text/html"===a&&(u="data:text/html;charset=UTF-8,"+encodeURIComponent(u));var c=tn(l,"width",un)||tn(l,"expandedWidth",un),f=tn(l,"height",un)||tn(l,"expandedHeight",un);if(c||f){var d=null,p=Zt(l,"NonLinearClickThrough");p&&(p=Jt(p))&&(d=p),p=null,(l=l.attributes.minSuggestedDuration)&&(p=Bt(l)),l=0,null!=s&&(l=s),i.push({id:null,groupId:null,startTime:l,endTime:null,uri:u,mimeType:a,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:p,once:!0,pre:null==s,post:s==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:f||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:d})}}}}return n}function dp(e,t,n){var r=0;null!=t&&(r=t);var o=null;n.attributes.skipoffset&&(o=Bt(n.attributes.skipoffset),isNaN(o)&&(o=null));var i=Zt(n,"MediaFiles");if(i){var a=null;for((n=Zt(n,"VideoClicks"))&&(n=Zt(n,"ClickThrough"))&&(n=Jt(n))&&(a=n),i=n=$t(i,"MediaFile"),n=n.filter(function(e){return"streaming"==e.attributes.delivery}),n.length&&(i=n),i=i.sort(function(e,t){return(parseInt(t.attributes.height,10)||0)-(parseInt(e.attributes.height,10)||0)}),n=(i=m(i)).next();!n.done;n=i.next())if(!(n=n.value).attributes.apiFramework){var s=Jt(n);if(s){e.push({id:null,groupId:null,startTime:r,endTime:null,uri:s,mimeType:n.attributes.type||null,isSkippable:null!=o,skipOffset:o,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:null==t,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:a});break}}}}function pp(t,n,r,o,i){var a=this;this.u=t,this.i=n,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=i,this.j=null,this.h=new oe,google.ima.settings.setLocale(r),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.0"),this.g=null,this.C=o||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){!function(t,n){if(t.l(new No("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.H))),t.o.customPlayheadTracker){var r={currentTime:t.i.currentTime};t.g=n.getAdsManager(r,t.C),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.D(t.i,"timeupdate",function(){t.i.duration&&(r.currentTime=t.i.currentTime)}),t.h.D(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.C);t.l(new No("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var o=t.g.getCuePoints();if(o.length){n=[];for(var i=(o=m(o)).next();!i.done;i=o.next())n.push({start:i.value,end:null});t.l(new No("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new No(n,t))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){hp(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){mp(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(t){mp(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){gp(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){gp(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight),t.h.D(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),"ResizeObserver"in e?(t.B=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.B.observe(t.i)):t.h.D(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.G||t.o.skipPlayDetection?t.g.start():t.h.Aa(t.i,"play",function(){t.G=!0,t.g.start()})}catch(a){gp(t,null)}}(a,t)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){hp(a,e)}),this.h.D(this.i,"ended",function(){a.m.contentComplete()}),this.h.Aa(this.i,"play",function(){a.G=!0})}function hp(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.l(new No("ad-error",t)),gp(e,null),e.l(new No("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function mp(e,t){var n=t.getAd();n?(e.j=new up(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new No("ad-content-pause-requested")),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new No("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?((t=e.j).j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):$("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function gp(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new No("ad-content-resume-requested")),e.l(new No("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function yp(e,t,n,r,o,i){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=r,this.m=o,this.u=i,this.C=t.overlay}function vp(e,t,n){this.g=e,this.j=t,this.h=n,this.i=null==e.overlay}function bp(e,t,n,r){var o=this;this.N=null,this.o=e,this.F=t,this.g=n,this.H=null,this.C=!0,this.h=this.g,this.i=r,this.V=new Set,this.I=new Set,this.G=new Map,this.M=new Map,this.j=new $f,Mp(this),this.J=new oe,this.l=new oe,this.K=!1,this.ba=this.u=this.B=this.m=null,this.ma=!1,this.R=-1,this.$=function(){if(!o.K&&o.m&&!o.F.va()){o.m=o.g.currentTime;var e=kp(o);e&&Cp(o,e,1,1,Date.now())}},this.X=function(){if(!(o.K||o.m||o.F.va())){o.m=o.g.currentTime;var e=kp(o,!0);e||(e=kp(o)),e&&Cp(o,e,1,1,Date.now())}},this.oa=function(){if(!o.K&&o.m&&!o.F.va()){var e=o.g.currentTime;o.B&&!o.B.pre&&!o.B.post&&e<(o.B.endTime||o.B.startTime)&&(o.B=null)}},this.S=new Tr(this.$),this.O=new Tr(function(){var e,t,n,r,i,a,s,l,u,c,f;return O(function(d){switch(d.g){case 1:if(!o.I.size||null==o.m){d.A(0);break}if((e=o.F.m)==Zd||e==ep)return d.return();t=!1,n=Array.from(o.I),r=o.F.Va(),i=m(n),a=i.next();case 3:if(a.done){d.A(5);break}if((s=a.value)==o.B){d.A(4);break}if(l=s.endTime||s.startTime,!(r.start-l>=1)){(u=s.startTime-o.m)>0&&u<=10&&(!o.G.has(s)&&_p(s)&&o.G.set(s,o.j.preload(s.uri,null,s.mimeType||void 0)),Pp(o,s)),d.A(4);break}if(!o.G.has(s)){d.A(7);break}return S(d,o.G.get(s),8);case 8:(c=d.h)&&c.destroy(),o.G.delete(s);case 7:Dp(o,s),f=JSON.stringify(s),o.V.has(f)&&o.V.delete(f),o.I.delete(s),xp(o),s.overlay||(t=!0);case 4:a=i.next(),d.A(3);break;case 5:t&&Ip(o),k(d)}})}),this.configure(this.F.getConfiguration().ads)}function xp(e){e.ma&&!e.I.size&&(e.J.Ma(e.g,"playing",e.X),e.J.Ma(e.g,"timeupdate",e.X),e.J.Ma(e.g,"seeked",e.oa),e.J.Ma(e.g,"ended",e.$),-1!=e.R&&(e.g.cancelVideoFrameCallback(e.R),e.R=-1),e.S&&e.S.stop(),e.O&&e.O.stop(),e.ma=!1)}function wp(e){if(e.o&&e.N&&!e.K){var t=e.N.supportsMultipleMediaElements,n=e.g;(n.webkitPresentationMode&&"inline"!==n.webkitPresentationMode||n.webkitDisplayingFullscreen)&&(t=!1),e.C==t&&(e.C=!t,e.C?(e.h=e.g,e.H&&(e.H.parentElement&&e.o.removeChild(e.H),e.H=null)):(e.H||((t=document.createElement(e.g.tagName)).autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.H=t),e.h=e.H))}else e.C=!0}function Sp(e,t){var n;O(function(r){if(1==r.g)return Mp(e),n=[],t&&t.values.find(function(e){return"X-OVERLAY-ID"==e.key})?(n=function(e){var t=[];if(!e)return t;var n=e.values.find(function(e){return"X-ASSET-URI"==e.key});if(!n)return t;if(!(n=n.data))return t;var r=null,o=e.values.find(function(e){return"X-OVERLAY-ID"==e.key});o&&(r=o.data),o=null==r?Math.floor(10*e.startTime)/10:e.startTime;var i=e.endTime;e.endTime&&e.endTime!=1/0&&"number"==typeof e.endTime&&(i=null==r?Math.floor(10*e.endTime)/10:e.endTime);var a=!1,s=!1,l=!1,u=e.values.find(function(e){return"CUE"==e.key});u&&(l=u.data,a=l.includes("ONCE"),s=l.includes("PRE"),l=l.includes("POST")),u=null;var c=e.values.find(function(e){return"X-ASSET-MIMETYPE"==e.key});c&&(u=c.data),c=!1;var f=e.values.find(function(e){return"X-LOOP"==e.key});f&&(c="YES"==f.data),f=1;var d=e.values.find(function(e){return"X-DEPTH"==e.key});d&&(f=parseFloat(d.data),isNaN(f)&&(f=1)),d=null;var p=e.values.find(function(e){return"X-BACKGROUND"==e.key});p&&(d=p.data),p=1920;var h=1080,m=e.values.find(function(e){return"X-VIEWPORT"==e.key});if(m){if(2!=(h=m.data.split("x")).length)return t;p=parseFloat(h[0]),h=parseFloat(h[1])}if(p={viewport:{x:p,y:h},topLeft:{x:0,y:0},size:{x:p,y:h}},h=e.values.find(function(e){return"X-OVERLAY-POSITION"==e.key})){if(2!=(h=h.data.split("x")).length)return t;p.topLeft.x=parseFloat(h[0]),p.topLeft.y=parseFloat(h[1])}if(h=e.values.find(function(e){return"X-OVERLAY-SIZE"==e.key})){if(2!=(h=h.data.split("x")).length)return t;p.size.x=parseFloat(h[0]),p.size.y=parseFloat(h[1])}if(h=null,(m=e.values.find(function(e){return"X-SQUEEZECURRENT"==e.key}))&&(h=parseFloat(m.data),isNaN(h)&&(h=1),h={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*h,y:1080*h}},e=e.values.find(function(e){return"X-SQUEEZECURRENT-POSITION"==e.key}))){if(2!=(e=e.data.split("x")).length)return t;h.topLeft.x=parseFloat(e[0]),h.topLeft.y=parseFloat(e[1])}return t.push({id:r,groupId:null,startTime:o,endTime:i,uri:n,mimeType:u,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:a,pre:s,post:l,timelineRange:!0,loop:c,overlay:p,displayOnBackground:-1==f,currentVideo:h,background:d,clickThroughUrl:null}),t}(t),r.A(2)):S(r,function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,m,g,y,v,b,x,w,T,k,A,M,R,_,L,P,D,N,U,B,j,F,z,V,H,G,q,W,K;return O(function(O){switch(O.g){case 1:if(n=[],!t)return O.return(n);if(r=t.values.find(function(e){return"X-ASSET-URI"==e.key}),o=t.values.find(function(e){return"X-ASSET-LIST"==e.key}),!r&&!o)return O.return(n);if(i=null,(a=t.values.find(function(e){return"ID"==e.key}))&&(i=a.data),s=null==i?Math.floor(10*t.startTime)/10:t.startTime,(l=t.endTime)&&t.endTime!=1/0&&"number"==typeof t.endTime&&(l=null==i?Math.floor(10*t.endTime)/10:t.endTime),u=t.values.find(function(e){return"X-RESTRICT"==e.key}),f=c=!0,u&&u.data&&(d=u.data,c=!d.includes("SKIP"),f=!d.includes("JUMP")),p=c?0:null,(h=t.values.find(function(e){return"X-ENABLE-SKIP-AFTER"==e.key}))&&(m=h.data,p=parseFloat(m),isNaN(p)&&(p=c?0:null)),g=null,(y=t.values.find(function(e){return"X-ENABLE-SKIP-FOR"==e.key}))&&(v=y.data,g=parseFloat(v),isNaN(p)&&(g=null)),b=null,(x=t.values.find(function(e){return"X-RESUME-OFFSET"==e.key}))&&(w=x.data,b=parseFloat(w),isNaN(b)&&(b=null)),T=null,(k=t.values.find(function(e){return"X-PLAYOUT-LIMIT"==e.key}))&&(A=k.data,T=parseFloat(A),isNaN(T)&&(T=null)),_=R=M=!1,(L=t.values.find(function(e){return"CUE"==e.key}))&&(P=L.data,M=P.includes("ONCE"),R=P.includes("PRE"),_=P.includes("POST")),D=!1,(N=t.values.find(function(e){return"X-TIMELINE-OCCUPIES"==e.key}))?(U=N.data,D=U.includes("RANGE")):!x&&e.F.W()&&(D=!R&&!_),r){if(!(B=r.data))return O.return(n);n.push({id:i,groupId:null,startTime:s,endTime:l,uri:B,mimeType:null,isSkippable:c,skipOffset:p,skipFor:g,canJump:f,resumeOffset:b,playoutLimit:T,once:M,pre:R,post:_,timelineRange:D,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),O.A(2);break}if(!o){O.A(2);break}return(j=o.data)?(C(O,4),S(O,Rp(e,j,{type:11}),6)):O.return(n);case 6:for(F=O.h,z=He(F),V=JSON.parse(z),(H=V["SKIP-CONTROL"])&&("number"==typeof(G=H["ENABLE-SKIP-AFTER"])&&(p=parseFloat(G),isNaN(G)&&(p=c?0:null)),"number"==typeof(q=H["ENABLE-SKIP-FOR"])&&(g=parseFloat(q),isNaN(q)&&(g=null))),W=0;W<V.ASSETS.length;W++)(K=V.ASSETS[W]).URI&&n.push({id:i+"_shaka_asset_"+W,groupId:i,startTime:s,endTime:l,uri:K.URI,mimeType:null,isSkippable:c,skipOffset:p,skipFor:g,canJump:f,resumeOffset:b,playoutLimit:T,once:M,pre:R,post:_,timelineRange:D,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});E(O,2);break;case 4:I(O);case 2:return O.return(n)}})}(e,t),3);2!=r.g&&(n=r.h),n.length?Tp(e,n):$("Unsupported HLS interstitial",t),k(r)})}function Tp(e,t){var n,r,o,i,a,s,l,u;O(function(c){switch(c.g){case 1:n=!1,r=m(t),o=r.next();case 2:if(o.done){c.A(4);break}if(!(i=o.value).uri){$("Missing URL in interstitial",i),c.A(3);break}if(i.mimeType){c.A(5);break}return C(c,6),a=e.j.Wb(),S(c,Ac(i.uri,a,e.F.getConfiguration().streaming.retryParameters),8);case 8:i.mimeType=c.h,E(c,5);break;case 6:I(c);case 5:if(s=i.id||JSON.stringify(i),e.V.has(s)){c.A(3);break}i.loop&&!i.overlay&&$("Loop is only supported in overlay interstitials",i),i.overlay||(n=!0),e.V.add(s),e.I.add(i),l=!1,i.pre&&null==e.m?l=!0:0!=i.startTime||i.canJump?null!=e.m&&(u=i.startTime-e.m)>0&&u<=10&&(l=!0):l=!0,l&&(!e.G.has(i)&&_p(i)&&e.G.set(i,e.j.preload(i.uri,null,i.mimeType||void 0)),Pp(e,i));case 3:o=r.next(),c.A(2);break;case 4:n&&Ip(e),function(e){if(!e.ma&&e.I.size){if(e.J.D(e.g,"playing",e.X),e.J.D(e.g,"timeupdate",e.X),e.J.D(e.g,"seeked",e.oa),e.J.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!Lp()){var t=e.g,n=function(){-1!=e.R&&(e.$(),-1!=e.R&&(e.R=t.requestVideoFrameCallback(n)))};e.R=t.requestVideoFrameCallback(n)}else e.S.Fa(.025);e.O&&e.O.Fa(1),e.ma=!0}}(e),k(c)}})}function kp(e,t,n){t=void 0!==t&&t,n=void 0===n?null:n;var r=0,o=null;if(e.I.size&&null!=e.m){var i=e.g.ended,a=Array.from(e.I).sort(function(e,t){return t.startTime-e.startTime}),s=a;for(s=t?a.filter(function(e){return e.pre}):i?a.filter(function(e){return e.post}):a.filter(function(e){return!e.pre&&!e.post}),s=(a=m(s)).next();!s.done;s=a.next()){s=s.value;var l=!1;if(t)l=s.pre;else if(i)l=s.post;else if(!s.pre&&!s.post){var u=e.m-Math.round(1e3*s.startTime)/1e3,c=1;e.N.allowStartInMiddleOfInterstitial&&s.endTime&&s.endTime!=1/0&&(c=s.endTime-s.startTime),(u>0||0==u&&0==e.m)&&(u<=c||!s.canJump)&&(l=!(null==n&&e.B&&!e.B.pre&&!e.B.post&&e.B.startTime>=s.startTime))}l&&(!e.B||s.startTime>=e.B.startTime)&&(r==(n||0)?o=s:o&&!s.canJump&&Math.round(1e3*s.startTime)/1e3-Math.round(1e3*o.startTime)/1e3>.001&&(o=s,r=0),r++)}}return o}function Cp(t,n,r,o,i,a){a=void 0===a?0:a,t.B=n,wp(t),t.C||!t.o||t.h.parentElement||t.o.appendChild(t.h),1==o&&1==r&&(r=Array.from(t.I).filter(function(e){return n.pre?e.pre==n.pre:n.post?e.post==n.post:Math.abs(e.startTime-n.startTime)<.001}).length),n.once&&(a++,t.I.delete(n),xp(t),n.overlay||Ip(t)),n.mimeType&&(n.mimeType.startsWith("image/")||"text/html"===n.mimeType)?n.overlay?function(t,n,r,o,i){function a(){t.u&&(t.u.stop(),t.u=null),t.o.removeChild(u),Ep(t,n),t.i(new No("ad-stopped")),t.l.Qa();var e=kp(t,n.pre,o-i);e?Cp(t,e,r,++o,Date.now(),i):t.K=!1}t.K=!0;var s=n.overlay,l="text/html"==n.mimeType?"iframe":"img",u=document.createElement(l);u.style.objectFit="contain",u.style.position="absolute",u.style.border="none",Ap(t,n),t.i(new No("ad-started",(new Map).set("ad",new vp(n,r,o)))),"iframe"==l?u.src=n.uri:(u.src=n.uri,u.onerror=function(e){t.i(new No("ad-error",(new Map).set("originalEvent",e))),a()});var c=s.viewport,f=s.topLeft;s=s.size,0==c.x&&0==c.y?(u.width=n.overlay.size.x,u.height=n.overlay.size.y,u.style.bottom="10%",u.style.left="0",u.style.right="0",u.style.width="100%",n.overlay.size.y||"iframe"!=l||(u.style.height="auto")):(u.style.height=s.y/c.y*100+"%",u.style.left=f.x/c.x*100+"%",u.style.top=f.y/c.y*100+"%",u.style.width=s.x/c.x*100+"%"),t.o.appendChild(u);var d=Date.now();t.u&&t.u.stop(),t.u=new Tr(function(){n.playoutLimit&&(Date.now()-d)/1e3>n.playoutLimit||n.endTime&&t.g.currentTime>n.endTime?(t.i(new No("ad-complete")),a()):t.g.currentTime<n.startTime&&(t.i(new No("ad-skipped")),a())}),n.playoutLimit&&!n.endTime?t.u.ka(n.playoutLimit):n.endTime&&t.u.Fa(.025),t.l.D(t.g,"seeked",function(){var e=t.g.currentTime;(e<n.startTime||n.endTime&&e>n.endTime)&&(t.u&&t.u.stop(),t.i(new No("ad-skipped")),a())}),n.clickThroughUrl&&t.l.D(u,"click",function(){n.clickThroughUrl&&e.open(n.clickThroughUrl,"_blank")})}(t,n,r,o,a):$("Unsupported interstitial",n):t.C&&n.overlay?$("Unsupported interstitial",n):function(t,n,r,o,i,a){var s,l,u,c,f,d,p,h,m,g,y,v,b,x,w,T,A,M,R,_,L;O(function(P){switch(P.g){case 1:if(s=Date.now(),t.K=!0,l=!1,u=function(){if(!t.C&&!n.overlay&&null==n.resumeOffset)if(n.timelineRange&&n.endTime&&n.endTime!=1/0)t.g.currentTime!=n.endTime&&(t.g.currentTime=n.endTime);else{var e=Date.now();t.g.currentTime+=(e-i)/1e3,i=e}},c=function(e){var s,l;return O(function(c){if(1==c.g){if(u(),s=kp(t,n.pre,o-a),e&&n.groupId)for(;s&&s.groupId==n.groupId;)o++,s=kp(t,n.pre,o-a);return t.u&&(!n.groupId||s&&s.groupId!=n.groupId)&&(t.u.stop(),t.u=null),Ep(t,n),s&&!s.overlay?c.A(2):(n.post&&(t.m=null,t.B=null),t.C?S(c,t.j.detach(),4):S(c,t.j.Bc(),4))}2!=c.g&&(t.C&&(null==(l=n.resumeOffset)&&(l=n.timelineRange&&n.endTime&&n.endTime!=1/0?n.endTime-(t.m||0):(Date.now()-i)/1e3),t.i(new No("ad-content-resume-requested",(new Map).set("offset",l)))),t.i(new No("ad-stopped")),t.l.Qa(),t.K=!1,t.C?Ip(t):(t.h.style.display="none",u(),t.g.ended||t.g.play())),wp(t),s&&(t.i(new No("ad-stopped")),t.l.Qa(),Cp(t,s,r,++o,i,a)),k(c)})},f=function(e){return O(function(n){return l?n.return():(l=!0,t.i(new No("ad-error",(new Map).set("originalEvent",e))),S(n,c(!1),0))})},d=function(){return O(function(e){if(1==e.g)return l?e.return():(l=!0,S(e,c(!1),2));t.i(new No("ad-complete")),k(e)})},t.ba=function(){return O(function(e){return l?e.return():(l=!0,t.i(new No("ad-skipped")),S(e,c(!0),0))})},p=new yp(t.h,n,t.ba,r,o,!t.C),t.C||(p.setMuted(t.g.muted),p.setVolume(t.g.volume)),t.i(new No("ad-started",(new Map).set("ad",p))),(h=p.canSkipNow())&&t.i(new No("ad-skip-state-changed")),t.l.Aa(t.j,"error",f),t.l.D(t.h,"timeupdate",function(){if(t.h.duration){var e=p.canSkipNow();h!=e&&p.getRemainingTime()>0&&p.getDuration()>0&&t.i(new No("ad-skip-state-changed")),h=e}}),t.l.Aa(t.j,"firstquartile",function(){u(),t.i(new No("ad-first-quartile"))}),t.l.Aa(t.j,"midpoint",function(){u(),t.i(new No("ad-midpoint"))}),t.l.Aa(t.j,"thirdquartile",function(){u(),t.i(new No("ad-third-quartile"))}),t.l.Aa(t.j,"complete",d),t.l.D(t.h,"play",function(){t.i(new No("ad-resumed"))}),t.l.D(t.h,"pause",function(){var e=t.j.getConfiguration();t.h.currentTime>=e.playRangeEnd?d():t.i(new No("ad-paused"))}),t.l.D(t.h,"volumechange",function(){t.h.muted?t.i(new No("ad-muted")):t.i(new No("ad-volume-changed"))}),n.clickThroughUrl&&(m=t.o||t.h,t.l.D(m,"click",function(){n.clickThroughUrl&&(p.isPaused()||p.pause(),e.open(n.clickThroughUrl,"_blank"))})),!t.C||1!=o){P.A(2);break}return t.i(new No("ad-content-pause-requested",(new Map).set("saveLivePosition",!0))),g=new Mo,y=function(e){return O(function(n){if(1==n.g)return"detach"!=e.state?n.A(0):Lp()?S(n,new Promise(function(e){return new Tr(e).ka(.1)}),3):n.A(3);g.resolve(),t.l.Ma(t.F,"onstatechange",y),k(n)})},t.l.D(t.F,"onstatechange",y),S(P,g,2);case 2:return Ap(t,n),t.C||(t.h.style.display="",n.overlay?(t.h.loop=n.loop,v=n.overlay.viewport,b=n.overlay.topLeft,x=n.overlay.size,t.h.style.height=x.y/v.y*100+"%",t.h.style.left=b.x/v.x*100+"%",t.h.style.top=b.y/v.y*100+"%",t.h.style.width=x.x/v.x*100+"%"):(t.g.pause(),null!=n.resumeOffset&&0!=n.resumeOffset&&(t.g.currentTime+=n.resumeOffset),t.h.loop=!1,t.h.style.height="100%",t.h.style.left="0",t.h.style.top="0",t.h.style.width="100%")),C(P,4),Mp(t),n.startTime&&n.endTime&&n.endTime!=1/0&&n.startTime!=n.endTime&&(w=n.endTime-n.startTime)>0&&t.j.configure("playRangeEnd",w),n.playoutLimit&&!t.u&&(t.u=new Tr(function(){t.ba()}).ka(n.playoutLimit),t.j.configure("playRangeEnd",n.playoutLimit)),S(P,t.j.fc(t.h),6);case 6:return T=null,t.N.allowStartInMiddleOfInterstitial&&null!=t.m&&(A=t.m-n.startTime,Math.abs(A)>.25&&(T=A)),t.G.has(n)?S(P,t.G.get(n),10):S(P,t.j.load(n.uri,T,n.mimeType||void 0),8);case 10:return M=P.h,t.G.delete(n),S(P,M?t.j.load(M):t.j.load(n.uri,T,n.mimeType||void 0),8);case 8:t.h.play(),R=(Date.now()-s)/1e3,t.i(new No("ads-loaded",(new Map).set("loadTime",R))),t.C&&t.g.play(),n.overlay&&(_=function(){var e=t.g.currentTime-n.startTime;Math.abs(e-t.h.currentTime)>.1&&(t.h.currentTime=e)},t.l.Aa(t.h,"playing",_),t.l.D(t.g,"seeking",_),t.l.D(t.g,"seeked",function(){var e=t.g.currentTime;(e<n.startTime||n.endTime&&e>n.endTime)&&t.ba()})),E(P,0);break;case 4:if(L=I(P),!t.K)return P.return();f(L),k(P)}})}(t,n,r,o,i,a)}function Ap(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),null!=t.currentVideo){var n=t.currentVideo;e.g.style.transformOrigin="top left";var r=!0,o=[],i=n.topLeft.x/n.viewport.x*100;i>0&&i<=100&&(o.push("translateX("+i+"%)"),r=!1),(i=n.topLeft.y/n.viewport.y*100)>0&&i<=100&&(o.push("translateY("+i+"%)"),r=!1),(i=n.size.x/n.viewport.x)<1&&o.push("scaleX("+i+")"),n=n.size.y/n.viewport.y,i<1&&o.push("scaleY("+n+")"),o.length&&(e.g.style.transform=o.join(" ")),r&&(e.g.style.transition="transform 250ms")}e.o&&(t.clickThroughUrl?(e.o.setAttribute("ad-active","true"),e.o.style.pointerEvents=""):e.o.style.pointerEvents="none",t.background&&(e.o.style.background=t.background)),e.H&&(e.H.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Ep(e,t){t&&!t.displayOnBackground||(e.g.style.zIndex=""),t&&null==t.currentVideo||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.o&&(e.o.removeAttribute("ad-active"),e.o.style.pointerEvents="",!t||t.background)&&(e.o.style.background=""),e.H&&(e.H.style.background="")}function Ip(e){for(var t=[],n=m(e.I),r=n.next(),o={};!r.done;o={Ac:void 0},r=n.next())(r=r.value).overlay||(o.Ac={start:r.startTime,end:null},r.pre?(o.Ac.start=0,o.Ac.end=null):r.post?(o.Ac.start=-1,o.Ac.end=null):r.timelineRange&&(o.Ac.end=r.endTime),t.find(function(e){return function(t){return e.Ac.start==t.start&&e.Ac.end==t.end}}(o))||t.push(o.Ac));e.i(new No("ad-cue-points-changed",(new Map).set("cuepoints",t)))}function Mp(e){e.j.configure(e.F.di()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),Go(e.F.Wb(),e.j.Wb())}function Rp(e,t,n){var r,o;return O(function(i){return 1==i.g?(r=qo([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),S(i,e.F.Wb().request(7,r,n).promise,2)):(o=i.h,i.return(o.data))})}function _p(e){return!(e=e.mimeType)||!e.startsWith("image/")&&"text/html"!==e}function Lp(){var e=le().Oa();return"TV"==e||"CONSOLE"==e||"CAST"==e}function Pp(e,t){if(!(e.M.has(t)||e.N&&!e.N.allowPreloadOnDomElements)){var n=function(e){var t=document.createElement("link");return t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t),t},r=[];if(t.background){var o=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);o&&r.push(n(o[2]))}t.mimeType.startsWith("image/")&&r.push(n(t.uri)),e.M.set(t,r)}}function Dp(e,t){if(e.M.has(t)){for(var n=e.M.get(t),r=(n=m(n)).next();!r.done;r=n.next())(r=r.value).parentNode.removeChild(r);e.M.delete(t)}}function Op(e,t,n,r,o){this.h=e,this.j=Bt(this.h.skipOffset),this.g=o,this.i=t,this.l=n,this.o=r,this.m=!1}function Np(e,t,n,r){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=r,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new oe}function Up(e,t){var n,r,o,i,a,s,l,u;O(function(c){return 1==c.g?t.staticResource?(n=Bp(t),e.G.get(n)?c.return():(r={type:9},o=qo([t.staticResource],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),i=e.K.request(7,o,r),C(c,2),e.G.set(n,[]),S(c,i.promise,4))):c.return():2!=c.g?(a=c.h,s=He(a.data),l=JSON.parse(s),u=l.apps,e.G.set(n,u),E(c,0)):(I(c),e.G.delete(n),void k(c))})}function Bp(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function jp(e){var t=e.h.currentTime;if(0!=t&&null==e.B){for(var n,r,o=m(e.j),i=o.next();!i.done;i=o.next())for(var a=m((i=i.value).ads),s=a.next();!s.done;s=a.next())if(s=s.value,r){if(s.startTimeInSeconds<t&&s.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=s,n=i;break}}else s.startTimeInSeconds<t&&(r=s,n=i);n&&r&&!e.N.includes(r.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function Fp(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.F,o=r.startTimeInSeconds+.5*r.durationInSeconds,i=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),Hp(e,"firstQuartile")):t>=o&&!e.u.includes("midpoint")?(e.u.push("midpoint"),Hp(e,"midpoint")):t>=i&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),Hp(e,"thirdQuartile")),r=e.g.getRemainingTime(),o=e.g.getDuration(),e.g.canSkipNow()&&r>0&&o>0&&Hp(e,"skipStateChanged"),o>0&&(r<=0||r>o)&&zp(e)}if(!e.g||!e.g.isLinear()){e:for(r=m(e.j),o=r.next();!o.done&&(o=o.value,!e.g||!e.g.isLinear());o=r.next())for(i=0;i<o.ads.length;i++){var a=o.ads[i],s=a.startTimeInSeconds+a.durationInSeconds;if(a.startTimeInSeconds<=t&&s>t){if(e.N.includes(a.adId)){if(e.h.ended)continue;e.h.currentTime=s;break e}zp(e),e.M=o,e.g=new Op(a,i+1,o.ads.length,!0,e.h),e.F=a,0===i&&Hp(e,"breakStart"),Vp(e);break}}if(!e.g)for(o=(r=m(e.j)).next();!o.done&&(o=o.value,!e.g);o=r.next())for(i=0;i<o.nonLinearAdsList.length;i++)if((a=o.nonLinearAdsList[i]).nonLinearAdList.length){s=o.startTimeInSeconds;var l=e.G.get(Bp(a.nonLinearAdList[0]));if(s<=t&&l&&l.length){zp(e),s=e;for(var u=(l=m(l)).next();!u.done;u=l.next())if((u=u.value).data.source.length){var c=document.createElement("img");c.src=u.data.source[0].url,c.style.top=(u.placeholder.top||0)+"%",c.style.height=100-(u.placeholder.top||0)+"%",c.style.left=(u.placeholder.left||0)+"%",c.style.maxWidth=100-(u.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",s.C.appendChild(c)}e.M=o,e.g=new Op(a,i+1,o.ads.length,!1,e.h),e.F=a,0===i&&Hp(e,"breakStart"),Vp(e);break}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function zp(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;Hp(e,void 0!==t&&t?"skip":"complete");for(var n=(t=m(e.m)).next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],(t=e.g.getPositionInSequence())===(n=e.g.getSequenceLength())&&Hp(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function Vp(e){var t=!1;e.h.paused?t=!0:(Hp(e,"impression"),Hp(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Hp(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Hp(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Hp(e,"impression"),Hp(e,"start"),t=!1):Hp(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Hp(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function Hp(e,t){var n=e.F.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n)for(var r={type:10},o=(n=m(n.beaconUrls)).next();!o.done;o=n.next())(o=o.value)&&""!=o&&((o=qo([o],Io())).method="POST",e.K.request(7,o,r));switch(t){case"impression":e.i(new No("ad-impression"));break;case"start":e.i(new No("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new No("ad-muted"));break;case"unmute":e.i(new No("ad-volume-changed"));break;case"resume":e.i(new No("ad-resumed"));break;case"pause":e.i(new No("ad-paused"));break;case"firstQuartile":e.i(new No("ad-first-quartile"));break;case"midpoint":e.i(new No("ad-midpoint"));break;case"thirdQuartile":e.i(new No("ad-third-quartile"));break;case"complete":e.i(new No("ad-complete")),e.i(new No("ad-stopped"));break;case"skip":e.i(new No("ad-skipped")),e.i(new No("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new No("ad-skip-state-changed"))}}function Gp(e,t){this.g=e,this.i=null,this.h=t}function qp(e,t,n,r){var o=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=r,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new oe,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new No("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){!function(e,t){e.i(new No("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}})}(o,e)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){o.C.length?o.j.resolve(o.C):o.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),o.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),o.m=new Gp(e,o.l),o.B&&(o.m.i=o.B),o.i(new No("ad-started",(new Map).set("ad",o.m))),o.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){o.u.removeAttribute("ad-active");var e=o.l.currentTime;o.o&&o.o>e&&(o.l.currentTime=o.o,o.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){o.B=e.getStreamData().adProgressData,o.m&&(o.m.i=o.B)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){o.i(new No("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){o.i(new No("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){o.i(new No("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){o.i(new No("ad-complete")),o.i(new No("ad-stopped")),o.u.removeAttribute("ad-active"),o.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){o.i(new No("ad-skipped")),o.i(new No("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[];for(var n=(t=m(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});o.F=e,o.i(new No("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Wp(){jo.call(this),this.h=this.i=this.j=this.g=null,this.m=new sp,this.o=navigator.language,this.l=null}function Kp(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}function Xp(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof No){var n={};for(r in t)(e=t[r])&&"object"==x(e)?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(e=(n=m(Object.getOwnPropertyNames(t))).next();!e.done;e=n.next())r.add(e.value);for(n={},e=(r=m(r)).next();!e.done;e=r.next())n[e=e.value]=t[e];t={__type__:"Error",contents:n}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=m(Qa(t))).next();!n.done;n=t.next())e=(n=n.value).end,r.start.push(n.start),r.end.push(e);t=r}else t=ArrayBuffer.isView(t)&&1===t.BYTES_PER_ELEMENT?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return t}})}function $p(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==x(t)&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==x(t)&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==x(t)&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n})}(o=up.prototype).needsSkipUI=function(){return!1},o.isClientRendering=function(){return!0},o.hasCustomClick=function(){return!0},o.isUsingAnotherMediaElement=function(){return!0},o.getDuration=function(){return this.g.getDuration()},o.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},o.getRemainingTime=function(){return this.h.getRemainingTime()},o.isPaused=function(){return this.i},o.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},o.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},o.canSkipNow=function(){return this.h.getAdSkippableState()},o.skip=function(){return this.h.skip()},o.pause=function(){return this.h.pause()},o.play=function(){return this.h.resume()},o.getVolume=function(){return this.h.getVolume()},o.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},o.isMuted=function(){return 0==this.h.getVolume()},o.isLinear=function(){return this.g.isLinear()},o.resize=function(e,t){this.h.resize(e,t)},o.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},o.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},o.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},o.getTitle=function(){return this.g.getTitle()},o.getDescription=function(){return this.g.getDescription()},o.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},o.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},o.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},o.getVastAdId=function(){return""},o.getAdId=function(){return this.g.getAdId()},o.getCreativeAdId=function(){return this.g.getCreativeAdId()},o.getAdvertiserName=function(){return this.g.getAdvertiserName()},o.getMediaUrl=function(){return this.g.getMediaUrl()},o.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},o.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},o.release=function(){this.h=this.g=null},H("shaka.ads.ClientSideAd",up),up.prototype.release=up.prototype.release,up.prototype.getPodIndex=up.prototype.getPodIndex,up.prototype.getTimeOffset=up.prototype.getTimeOffset,up.prototype.getMediaUrl=up.prototype.getMediaUrl,up.prototype.getAdvertiserName=up.prototype.getAdvertiserName,up.prototype.getCreativeAdId=up.prototype.getCreativeAdId,up.prototype.getAdId=up.prototype.getAdId,up.prototype.getVastAdId=up.prototype.getVastAdId,up.prototype.getVastMediaWidth=up.prototype.getVastMediaWidth,up.prototype.getVastMediaHeight=up.prototype.getVastMediaHeight,up.prototype.getVastMediaBitrate=up.prototype.getVastMediaBitrate,up.prototype.getDescription=up.prototype.getDescription,up.prototype.getTitle=up.prototype.getTitle,up.prototype.getPositionInSequence=up.prototype.getPositionInSequence,up.prototype.getSequenceLength=up.prototype.getSequenceLength,up.prototype.setMuted=up.prototype.setMuted,up.prototype.resize=up.prototype.resize,up.prototype.isLinear=up.prototype.isLinear,up.prototype.isMuted=up.prototype.isMuted,up.prototype.setVolume=up.prototype.setVolume,up.prototype.getVolume=up.prototype.getVolume,up.prototype.play=up.prototype.play,up.prototype.pause=up.prototype.pause,up.prototype.skip=up.prototype.skip,up.prototype.canSkipNow=up.prototype.canSkipNow,up.prototype.getTimeUntilSkippable=up.prototype.getTimeUntilSkippable,up.prototype.isSkippable=up.prototype.isSkippable,up.prototype.isPaused=up.prototype.isPaused,up.prototype.getRemainingTime=up.prototype.getRemainingTime,up.prototype.getMinSuggestedDuration=up.prototype.getMinSuggestedDuration,up.prototype.getDuration=up.prototype.getDuration,up.prototype.isUsingAnotherMediaElement=up.prototype.isUsingAnotherMediaElement,up.prototype.hasCustomClick=up.prototype.hasCustomClick,up.prototype.isClientRendering=up.prototype.isClientRendering,up.prototype.needsSkipUI=up.prototype.needsSkipUI,H("shaka.ads.Utils",cp),cp.ADS_LOADED="ads-loaded",cp.AD_STARTED="ad-started",cp.AD_FIRST_QUARTILE="ad-first-quartile",cp.AD_MIDPOINT="ad-midpoint",cp.AD_THIRD_QUARTILE="ad-third-quartile",cp.AD_COMPLETE="ad-complete",cp.AD_STOPPED="ad-stopped",cp.AD_SKIPPED="ad-skipped",cp.AD_VOLUME_CHANGED="ad-volume-changed",cp.AD_MUTED="ad-muted",cp.AD_PAUSED="ad-paused",cp.AD_RESUMED="ad-resumed",cp.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",cp.CUEPOINTS_CHANGED="ad-cue-points-changed",cp.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",cp.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",cp.AD_CLICKED="ad-clicked",cp.AD_PROGRESS="ad-progress",cp.AD_BUFFERING="ad-buffering",cp.AD_IMPRESSION="ad-impression",cp.AD_DURATION_CHANGED="ad-duration-changed",cp.AD_CLOSED="ad-closed",cp.AD_LOADED="ad-loaded",cp.ALL_ADS_COMPLETED="all-ads-completed",cp.AD_LINEAR_CHANGED="ad-linear-changed",cp.AD_METADATA="ad-metadata",cp.AD_RECOVERABLE_ERROR="ad-recoverable-error",cp.AD_ERROR="ad-error",cp.AD_BREAK_READY="ad-break-ready",cp.AD_INTERACTION="ad-interaction",cp.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",cp.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",cp.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",pp.prototype.configure=function(e){this.o=e},pp.prototype.stop=function(){this.g&&this.g.stop(),this.u&&ns(this.u)},pp.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()},(o=yp.prototype).needsSkipUI=function(){return!0},o.isClientRendering=function(){return!0},o.hasCustomClick=function(){return null!=this.h.clickThroughUrl},o.isUsingAnotherMediaElement=function(){return this.u},o.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},o.getMinSuggestedDuration=function(){return this.getDuration()},o.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},o.isPaused=function(){return this.g.paused},o.isSkippable=function(){return this.i&&null!=this.l?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},o.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},o.canSkipNow=function(){return this.i&&0==this.getTimeUntilSkippable()},o.skip=function(){this.canSkipNow()&&this.B()},o.pause=function(){return this.g.pause()},o.play=function(){return this.g.play()},o.getVolume=function(){return this.g.volume},o.setVolume=function(e){this.g.volume=e},o.isMuted=function(){return this.g.muted},o.isLinear=function(){return null==this.C},o.resize=function(){},o.setMuted=function(e){this.g.muted=e},o.getSequenceLength=function(){return this.o},o.getPositionInSequence=function(){return this.m},o.getTitle=function(){return""},o.getDescription=function(){return""},o.getVastMediaBitrate=function(){return 0},o.getVastMediaHeight=function(){return 0},o.getVastMediaWidth=function(){return 0},o.getVastAdId=function(){return""},o.getAdId=function(){return this.h.id||""},o.getCreativeAdId=function(){return""},o.getAdvertiserName=function(){return""},o.getMediaUrl=function(){return this.h.uri},o.getTimeOffset=function(){return 0},o.getPodIndex=function(){return 0},o.release=function(){this.g=null},H("shaka.ads.InterstitialAd",yp),yp.prototype.release=yp.prototype.release,yp.prototype.getPodIndex=yp.prototype.getPodIndex,yp.prototype.getTimeOffset=yp.prototype.getTimeOffset,yp.prototype.getMediaUrl=yp.prototype.getMediaUrl,yp.prototype.getAdvertiserName=yp.prototype.getAdvertiserName,yp.prototype.getCreativeAdId=yp.prototype.getCreativeAdId,yp.prototype.getAdId=yp.prototype.getAdId,yp.prototype.getVastAdId=yp.prototype.getVastAdId,yp.prototype.getVastMediaWidth=yp.prototype.getVastMediaWidth,yp.prototype.getVastMediaHeight=yp.prototype.getVastMediaHeight,yp.prototype.getVastMediaBitrate=yp.prototype.getVastMediaBitrate,yp.prototype.getDescription=yp.prototype.getDescription,yp.prototype.getTitle=yp.prototype.getTitle,yp.prototype.getPositionInSequence=yp.prototype.getPositionInSequence,yp.prototype.getSequenceLength=yp.prototype.getSequenceLength,yp.prototype.setMuted=yp.prototype.setMuted,yp.prototype.resize=yp.prototype.resize,yp.prototype.isLinear=yp.prototype.isLinear,yp.prototype.isMuted=yp.prototype.isMuted,yp.prototype.setVolume=yp.prototype.setVolume,yp.prototype.getVolume=yp.prototype.getVolume,yp.prototype.play=yp.prototype.play,yp.prototype.pause=yp.prototype.pause,yp.prototype.skip=yp.prototype.skip,yp.prototype.canSkipNow=yp.prototype.canSkipNow,yp.prototype.getTimeUntilSkippable=yp.prototype.getTimeUntilSkippable,yp.prototype.isSkippable=yp.prototype.isSkippable,yp.prototype.isPaused=yp.prototype.isPaused,yp.prototype.getRemainingTime=yp.prototype.getRemainingTime,yp.prototype.getMinSuggestedDuration=yp.prototype.getMinSuggestedDuration,yp.prototype.getDuration=yp.prototype.getDuration,yp.prototype.isUsingAnotherMediaElement=yp.prototype.isUsingAnotherMediaElement,yp.prototype.hasCustomClick=yp.prototype.hasCustomClick,yp.prototype.isClientRendering=yp.prototype.isClientRendering,yp.prototype.needsSkipUI=yp.prototype.needsSkipUI,(o=vp.prototype).needsSkipUI=function(){return!0},o.isClientRendering=function(){return!0},o.hasCustomClick=function(){return null!=this.g.clickThroughUrl},o.isUsingAnotherMediaElement=function(){return!1},o.getDuration=function(){return-1},o.getMinSuggestedDuration=function(){return this.getDuration()},o.getRemainingTime=function(){return-1},o.isPaused=function(){return!1},o.isSkippable=function(){return!1},o.getTimeUntilSkippable=function(){return 0},o.canSkipNow=function(){return!1},o.skip=function(){},o.pause=function(){},o.play=function(){},o.getVolume=function(){return 1},o.setVolume=function(){},o.isMuted=function(){return!1},o.isLinear=function(){return this.i},o.resize=function(){},o.setMuted=function(){},o.getSequenceLength=function(){return this.j},o.getPositionInSequence=function(){return this.h},o.getTitle=function(){return""},o.getDescription=function(){return""},o.getVastMediaBitrate=function(){return 0},o.getVastMediaHeight=function(){return 0},o.getVastMediaWidth=function(){return 0},o.getVastAdId=function(){return""},o.getAdId=function(){return this.g.id||""},o.getCreativeAdId=function(){return""},o.getAdvertiserName=function(){return""},o.getMediaUrl=function(){return this.g.uri},o.getTimeOffset=function(){return 0},o.getPodIndex=function(){return 0},o.release=function(){},H("shaka.ads.InterstitialStaticAd",vp),vp.prototype.release=vp.prototype.release,vp.prototype.getPodIndex=vp.prototype.getPodIndex,vp.prototype.getTimeOffset=vp.prototype.getTimeOffset,vp.prototype.getMediaUrl=vp.prototype.getMediaUrl,vp.prototype.getAdvertiserName=vp.prototype.getAdvertiserName,vp.prototype.getCreativeAdId=vp.prototype.getCreativeAdId,vp.prototype.getAdId=vp.prototype.getAdId,vp.prototype.getVastAdId=vp.prototype.getVastAdId,vp.prototype.getVastMediaWidth=vp.prototype.getVastMediaWidth,vp.prototype.getVastMediaHeight=vp.prototype.getVastMediaHeight,vp.prototype.getVastMediaBitrate=vp.prototype.getVastMediaBitrate,vp.prototype.getDescription=vp.prototype.getDescription,vp.prototype.getTitle=vp.prototype.getTitle,vp.prototype.getPositionInSequence=vp.prototype.getPositionInSequence,vp.prototype.getSequenceLength=vp.prototype.getSequenceLength,vp.prototype.setMuted=vp.prototype.setMuted,vp.prototype.resize=vp.prototype.resize,vp.prototype.isLinear=vp.prototype.isLinear,vp.prototype.isMuted=vp.prototype.isMuted,vp.prototype.setVolume=vp.prototype.setVolume,vp.prototype.getVolume=vp.prototype.getVolume,vp.prototype.play=vp.prototype.play,vp.prototype.pause=vp.prototype.pause,vp.prototype.skip=vp.prototype.skip,vp.prototype.canSkipNow=vp.prototype.canSkipNow,vp.prototype.getTimeUntilSkippable=vp.prototype.getTimeUntilSkippable,vp.prototype.isSkippable=vp.prototype.isSkippable,vp.prototype.isPaused=vp.prototype.isPaused,vp.prototype.getRemainingTime=vp.prototype.getRemainingTime,vp.prototype.getMinSuggestedDuration=vp.prototype.getMinSuggestedDuration,vp.prototype.getDuration=vp.prototype.getDuration,vp.prototype.isUsingAnotherMediaElement=vp.prototype.isUsingAnotherMediaElement,vp.prototype.hasCustomClick=vp.prototype.hasCustomClick,vp.prototype.isClientRendering=vp.prototype.isClientRendering,vp.prototype.needsSkipUI=vp.prototype.needsSkipUI,(o=bp.prototype).configure=function(e){this.N=e,wp(this)},o.stop=function(){if(this.l&&this.l.Qa(),this.V.clear(),this.I.clear(),this.j.ng(),this.G.size)for(var e=Array.from(this.G.values()),t=(e=m(e)).next();!t.done;t=e.next())(t=t.value)&&t.then(function(e){e&&e.destroy()});if(this.G.clear(),this.M.size)for(t=(e=m(e=Array.from(this.M.keys()))).next();!t.done;t=e.next())Dp(this,t.value);this.M.clear(),this.j.detach(),this.K=!1,this.B=this.m=null,this.C=!0,this.h=this.g,this.H=null,Ep(this),xp(this),this.o&&ns(this.o),this.u&&(this.u.stop(),this.u=null)},o.release=function(){this.stop(),this.J&&this.J.release(),this.l&&this.l.release(),this.S&&(this.S.stop(),this.S=null),this.O&&(this.O.stop(),this.O=null),this.j.destroy()},o.td=function(){return this.j},o.addAdUrlInterstitial=function(e){var t,n,r,o,i,a,s,l,u,c=this;return O(function(f){if(1==f.g)return S(f,Rp(c,e,t={type:12}),2);if(3!=f.g){if(n=f.h,!(r=Gt(n,"VAST,vmap:VMAP")))throw new ze(2,10,10007);if(o=[],"VAST"==r.tagName)return o=fp(r,c.m),f.A(3);if("vmap:VMAP"!=r.tagName)return f.A(3);for(i=function(e){var n,r;return O(function(i){if(1==i.g)return S(i,Rp(c,e.uri,t),2);if(n=i.h,!(r=Gt(n,"VAST")))throw new ze(2,10,10007);o.push.apply(o,g(fp(r,e.time))),k(i)})},a=[],s=m(function(e){for(var t=[],n=(e=m($t(e,"vmap:AdBreak"))).next();!n.done;n=e.next()){var r=n.value,o=r.attributes.timeOffset;o&&(n=null,n="start"==o?null:"end"==o?1/0:Bt(o),(r=Zt(r,"vmap:AdSource"))&&(r=Zt(r,"vmap:AdTagURI"))&&(r=Yt(r))&&t.push({time:n,uri:r}))}return t}(r)),l=s.next();!l.done;l=s.next())u=l.value,a.push(i(u));return a.length?S(f,Promise.all(a),3):f.A(3)}Tp(c,o),k(f)})},(o=Op.prototype).needsSkipUI=function(){return!0},o.isClientRendering=function(){return!1},o.hasCustomClick=function(){return!1},o.isUsingAnotherMediaElement=function(){return!1},o.getDuration=function(){return this.h.durationInSeconds},o.getMinSuggestedDuration=function(){return this.getDuration()},o.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},o.isPaused=function(){return this.g.paused},o.isSkippable=function(){return"number"==typeof this.j},o.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},o.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},o.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},o.pause=function(){return this.g.pause()},o.play=function(){return this.g.play()},o.getVolume=function(){return this.g.volume},o.setVolume=function(e){this.g.volume=e},o.isMuted=function(){return this.g.muted},o.isLinear=function(){return this.o},o.resize=function(){},o.setMuted=function(e){this.g.muted=e},o.getSequenceLength=function(){return this.l?this.l:1},o.getPositionInSequence=function(){return this.i?this.i:1},o.getTitle=function(){return this.h.adTitle},o.getDescription=function(){return""},o.getVastMediaBitrate=function(){return 0},o.getVastMediaHeight=function(){return 0},o.getVastMediaWidth=function(){return 0},o.getVastAdId=function(){return this.h.vastAdId||""},o.getAdId=function(){return this.h.adId},o.getCreativeAdId=function(){return this.h.creativeId},o.getAdvertiserName=function(){return""},o.getMediaUrl=function(){return null},o.getTimeOffset=function(){return 0},o.getPodIndex=function(){return 0},o.release=function(){this.l=this.i=this.g=this.h=null},H("shaka.ads.MediaTailorAd",Op),Op.prototype.release=Op.prototype.release,Op.prototype.getPodIndex=Op.prototype.getPodIndex,Op.prototype.getTimeOffset=Op.prototype.getTimeOffset,Op.prototype.getMediaUrl=Op.prototype.getMediaUrl,Op.prototype.getAdvertiserName=Op.prototype.getAdvertiserName,Op.prototype.getCreativeAdId=Op.prototype.getCreativeAdId,Op.prototype.getAdId=Op.prototype.getAdId,Op.prototype.getVastAdId=Op.prototype.getVastAdId,Op.prototype.getVastMediaWidth=Op.prototype.getVastMediaWidth,Op.prototype.getVastMediaHeight=Op.prototype.getVastMediaHeight,Op.prototype.getVastMediaBitrate=Op.prototype.getVastMediaBitrate,Op.prototype.getDescription=Op.prototype.getDescription,Op.prototype.getTitle=Op.prototype.getTitle,Op.prototype.getPositionInSequence=Op.prototype.getPositionInSequence,Op.prototype.getSequenceLength=Op.prototype.getSequenceLength,Op.prototype.setMuted=Op.prototype.setMuted,Op.prototype.resize=Op.prototype.resize,Op.prototype.isLinear=Op.prototype.isLinear,Op.prototype.isMuted=Op.prototype.isMuted,Op.prototype.setVolume=Op.prototype.setVolume,Op.prototype.getVolume=Op.prototype.getVolume,Op.prototype.play=Op.prototype.play,Op.prototype.pause=Op.prototype.pause,Op.prototype.skip=Op.prototype.skip,Op.prototype.canSkipNow=Op.prototype.canSkipNow,Op.prototype.getTimeUntilSkippable=Op.prototype.getTimeUntilSkippable,Op.prototype.isSkippable=Op.prototype.isSkippable,Op.prototype.isPaused=Op.prototype.isPaused,Op.prototype.getRemainingTime=Op.prototype.getRemainingTime,Op.prototype.getMinSuggestedDuration=Op.prototype.getMinSuggestedDuration,Op.prototype.getDuration=Op.prototype.getDuration,Op.prototype.isUsingAnotherMediaElement=Op.prototype.isUsingAnotherMediaElement,Op.prototype.hasCustomClick=Op.prototype.hasCustomClick,Op.prototype.isClientRendering=Op.prototype.isClientRendering,Op.prototype.needsSkipUI=Op.prototype.needsSkipUI,Np.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);zp(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},Np.prototype.release=function(){this.stop(),this.o&&this.o.release()},Np.prototype.onManifestUpdated=function(e){this.J=e,""!=this.H&&(function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b;O(function(x){if(1==x.g)return r={type:8},o=qo([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),i=e.K.request(7,o,r),C(x,2),S(x,i.promise,4);if(2!=x.g){if(a=x.h,s=[],l=He(a.data),(u=JSON.parse(l)).avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(u.avails)){for(e.j=u.avails,c=m(e.j),f=c.next();!f.done;f=c.next())for(d=f.value,p=m(d.nonLinearAdsList),h=p.next();!h.done;h=p.next())for(g=h.value,y=m(g.nonLinearAdList),v=y.next();!v.done;v=y.next())b=v.value,Up(e,b);s=e.getCuePoints(),e.i(new No("ad-cue-points-changed",(new Map).set("cuepoints",s)))}}else e.j.length&&e.i(new No("ad-cue-points-changed",(new Map).set("cuepoints",s))),zp(e),e.j=[];return n&&(e.J||s.length>0)&&function(e){Fp(e),e.J||(jp(e),e.o.D(e.h,"seeked",function(){jp(e)}),e.o.D(e.h,"ended",function(){zp(e)})),e.o.D(e.h,"timeupdate",function(){Fp(e)})}(e),E(x,0)}I(x),k(x)})}(this,this.H,this.O),this.O=!1)},Np.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next())for(var r=(n=m(n.value.ads)).next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds});return e},(o=Gp.prototype).needsSkipUI=function(){return!0},o.isClientRendering=function(){return!1},o.hasCustomClick=function(){return!0},o.isUsingAnotherMediaElement=function(){return!1},o.getDuration=function(){return this.i?this.i.duration:-1},o.getMinSuggestedDuration=function(){return this.getDuration()},o.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},o.isPaused=function(){return this.h.paused},o.isSkippable=function(){return this.g.isSkippable()},o.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},o.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},o.skip=function(){this.h.currentTime+=this.getRemainingTime()},o.pause=function(){return this.h.pause()},o.play=function(){return this.h.play()},o.getVolume=function(){return this.h.volume},o.setVolume=function(e){this.h.volume=e},o.isMuted=function(){return this.h.muted},o.isLinear=function(){return!0},o.resize=function(){},o.setMuted=function(e){this.h.muted=e},o.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},o.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},o.getTitle=function(){return this.g.getTitle()},o.getDescription=function(){return this.g.getDescription()},o.getVastMediaBitrate=function(){return 0},o.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},o.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},o.getVastAdId=function(){return""},o.getAdId=function(){return this.g.getAdId()},o.getCreativeAdId=function(){return this.g.getCreativeAdId()},o.getAdvertiserName=function(){return this.g.getAdvertiserName()},o.getMediaUrl=function(){return null},o.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},o.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},o.release=function(){this.h=this.i=this.g=null},H("shaka.ads.ServerSideAd",Gp),Gp.prototype.release=Gp.prototype.release,Gp.prototype.getPodIndex=Gp.prototype.getPodIndex,Gp.prototype.getTimeOffset=Gp.prototype.getTimeOffset,Gp.prototype.getMediaUrl=Gp.prototype.getMediaUrl,Gp.prototype.getAdvertiserName=Gp.prototype.getAdvertiserName,Gp.prototype.getCreativeAdId=Gp.prototype.getCreativeAdId,Gp.prototype.getAdId=Gp.prototype.getAdId,Gp.prototype.getVastAdId=Gp.prototype.getVastAdId,Gp.prototype.getVastMediaWidth=Gp.prototype.getVastMediaWidth,Gp.prototype.getVastMediaHeight=Gp.prototype.getVastMediaHeight,Gp.prototype.getVastMediaBitrate=Gp.prototype.getVastMediaBitrate,Gp.prototype.getDescription=Gp.prototype.getDescription,Gp.prototype.getTitle=Gp.prototype.getTitle,Gp.prototype.getPositionInSequence=Gp.prototype.getPositionInSequence,Gp.prototype.getSequenceLength=Gp.prototype.getSequenceLength,Gp.prototype.setMuted=Gp.prototype.setMuted,Gp.prototype.resize=Gp.prototype.resize,Gp.prototype.isLinear=Gp.prototype.isLinear,Gp.prototype.isMuted=Gp.prototype.isMuted,Gp.prototype.setVolume=Gp.prototype.setVolume,Gp.prototype.getVolume=Gp.prototype.getVolume,Gp.prototype.play=Gp.prototype.play,Gp.prototype.pause=Gp.prototype.pause,Gp.prototype.skip=Gp.prototype.skip,Gp.prototype.canSkipNow=Gp.prototype.canSkipNow,Gp.prototype.getTimeUntilSkippable=Gp.prototype.getTimeUntilSkippable,Gp.prototype.isSkippable=Gp.prototype.isSkippable,Gp.prototype.isPaused=Gp.prototype.isPaused,Gp.prototype.getRemainingTime=Gp.prototype.getRemainingTime,Gp.prototype.getMinSuggestedDuration=Gp.prototype.getMinSuggestedDuration,Gp.prototype.getDuration=Gp.prototype.getDuration,Gp.prototype.isUsingAnotherMediaElement=Gp.prototype.isUsingAnotherMediaElement,Gp.prototype.hasCustomClick=Gp.prototype.hasCustomClick,Gp.prototype.isClientRendering=Gp.prototype.isClientRendering,Gp.prototype.needsSkipUI=Gp.prototype.needsSkipUI,(o=qp.prototype).configure=function(){},o.stop=function(){this.C="",this.o=null,this.F=[]},o.release=function(){this.stop(),this.h&&this.h.release()},o.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},o.getCuePoints=function(){return this.F},p(Wp,jo),(o=Wp.prototype).setLocale=function(e){this.o=e},o.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},o.initInterstitial=function(e,t,n){var r=this;this.g&&this.g.release(),this.g=new bp(e,t,n,function(e){return Kp(r,e)}),this.g.configure(this.l)},o.initClientSide=function(t,n,r){var o=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new ze(2,10,1e4);this.j&&this.j.release(),this.j=new pp(t,n,this.o,r,function(e){return Kp(o,e)}),this.j.configure(this.l)},o.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),jo.prototype.release.call(this)},o.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new No("ad-stopped")),this.dispatchEvent(new No("ad-content-attach-requested")),this.m=new sp},o.requestClientSideAds=function(e){if(!this.j)throw new ze(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},o.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new ze(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},o.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new Np(e,t,n,function(e){return Kp(r,e)})},o.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new ze(1,10,10005);var r=this.i;return n=void 0===n?"":n,r.l?e=Promise.reject(new ze(1,10,10004)):(r.l=new Mo,function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h;O(function(m){if(1==m.g)return r={type:7},(o=qo([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",n&&(i=JSON.stringify(n),o.body=We(i)),a=e.K.request(7,o,r),C(m,2),S(m,a.promise,4);if(2!=m.g){if(s=m.h,l=He(s.data),!(u=JSON.parse(l)).manifestUrl||!u.trackingUrl)throw Error("Insufficient data from MediaTailor.");return c=new ve(t),f=new ve(u.trackingUrl),e.H=c.resolve(f).toString(),d=Date.now()/1e3,p=d-e.R,e.i(new No("ads-loaded",(new Map).set("loadTime",p))),h=new ve(u.manifestUrl),e.l.resolve(c.resolve(h).toString()),e.l=null,E(m,0)}if(I(m),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,m.return();e.l.resolve(e.I),e.l=null,k(m)})}(r,e,t),r.I=n||"",r.R=Date.now()/1e3,e=r.l),e},o.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new ze(1,10,10005);var t=this.i;t.H=e,t.i(new No("ads-loaded",(new Map).set("loadTime",0)))},o.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new ze(2,10,10002);this.h&&this.h.release(),this.h=new qp(t,n,this.o,function(e){return Kp(r,e)}),this.h.configure(this.l)},o.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.h)throw new ze(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&$('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.0",(n=this.h).j?e=Promise.reject(new ze(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new Mo,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},o.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new ze(1,10,10003);(e.mpt||e.mpv)&&$('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.0",this.h.g.replaceAdTagParameters(e)},o.getServerSideCuePoints=function(){return pe("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},o.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},o.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:lp(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},o.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},o.onDashTimedMetadata=function(e){this.h&&"urn:google:dai:2018"==e.schemeIdUri&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},o.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},o.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},o.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&Sp(this.g,n))},o.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var r=n.schemeIdUri;if("urn:mpeg:dash:event:alternativeMPD:insert:2025"==r||"urn:mpeg:dash:event:alternativeMPD:replace:2025"==r){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t="urn:mpeg:dash:event:alternativeMPD:replace:2025"==n.schemeIdUri,r="urn:mpeg:dash:event:alternativeMPD:insert:2025"==n.schemeIdUri,t||r)){for(var o,i=n.startTime,a=n.endTime,s=null,l=0,u=m(n.eventNode.children),c=u.next();!c.done;c=u.next())if("AlternativeMPD"==(c=c.value).tagName){if(c=c.attributes.uri){o=c;break}}else if("InsertPresentation"==c.tagName||"ReplacePresentation"==c.tagName){var f=c.attributes.url;if(f){o=$e(f),(u=tn(c,"maxDuration",un))&&(s=u/n.timescale),(u=tn(c,"returnOffset",un))&&(l=u/n.timescale),t&&l&&(a=i+l);break}}o&&Tp(e,[{id:n.id,groupId:null,startTime:i,endTime:a,uri:o,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:r?l:null,playoutLimit:s,once:!1,pre:!1,post:!1,timelineRange:t&&!r,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else("urn:mpeg:dash:event:2012"==r||"urn:scte:dash:scte214-events"==r)&&n.eventNode&&Zt(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&function(e,t){var n=Zt(t.eventNode,"OverlayEvent"),r=n.attributes.uri,o=n.attributes.mimeType,i="true"==n.attributes.loop,a=tn(n,"z",un);if(r&&0!=a){var s=null,l=Zt(n,"Background");if(l){var u=l.attributes.uri;s=u?"center / contain no-repeat url('"+u+"')":Jt(l)}l=1920,u=1080;var c=Zt(n,"Viewport");if(c){if(null==(l=tn(c,"x",un)))return;if(null==(u=tn(c,"y",un)))return}var f={viewport:{x:l,y:u},topLeft:{x:0,y:0},size:{x:l,y:u}},d=Zt(n,"Overlay");if(c&&d){var p=Zt(d,"TopLeft"),h=Zt(d,"Size");if(p&&h){if(null==(d=tn(p,"x",un)))return;if(null==(p=tn(p,"y",un)))return;var m=tn(h,"x",un);if(null==m)return;if(null==(h=tn(h,"y",un)))return;f.topLeft.x=d,f.topLeft.y=p,f.size.x=m,f.size.y=h}}if(d=null,n=Zt(n,"Squeeze"),c&&n&&(h=Zt(n,"TopLeft"),n=Zt(n,"Size"),h&&n)){if(null==(c=tn(h,"x",un)))return;if(null==(d=tn(h,"y",un)))return;if(null==(h=tn(n,"x",un)))return;if(null==(n=tn(n,"y",un)))return;d={viewport:{x:l,y:u},topLeft:{x:c,y:d},size:{x:h,y:n}}}Tp(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:r,mimeType:o,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:i,overlay:f,displayOnBackground:-1==a,currentVideo:d,background:s,clickThroughUrl:null}])}}(this.g,n))}},o.addCustomInterstitial=function(e){if(!this.g)throw new ze(1,10,10006);Tp(this.g,[e])},o.addAdUrlInterstitial=function(e){if(!this.g)throw new ze(1,10,10006);return this.g.addAdUrlInterstitial(e)},o.getInterstitialPlayer=function(){if(!this.g)throw new ze(1,10,10006);return this.g.td()},H("shaka.ads.AdManager",Wp),Wp.prototype.getInterstitialPlayer=Wp.prototype.getInterstitialPlayer,Wp.prototype.addAdUrlInterstitial=Wp.prototype.addAdUrlInterstitial,Wp.prototype.addCustomInterstitial=Wp.prototype.addCustomInterstitial,Wp.prototype.onDASHInterstitialMetadata=Wp.prototype.onDASHInterstitialMetadata,Wp.prototype.onHLSInterstitialMetadata=Wp.prototype.onHLSInterstitialMetadata,Wp.prototype.onCueMetadataChange=Wp.prototype.onCueMetadataChange,Wp.prototype.onHlsTimedMetadata=Wp.prototype.onHlsTimedMetadata,Wp.prototype.onDashTimedMetadata=Wp.prototype.onDashTimedMetadata,Wp.prototype.onManifestUpdated=Wp.prototype.onManifestUpdated,Wp.prototype.getStats=Wp.prototype.getStats,Wp.prototype.getCuePoints=Wp.prototype.getCuePoints,Wp.prototype.getServerSideCuePoints=Wp.prototype.getServerSideCuePoints,Wp.prototype.replaceServerSideAdTagParameters=Wp.prototype.replaceServerSideAdTagParameters,Wp.prototype.requestServerSideStream=Wp.prototype.requestServerSideStream,Wp.prototype.initServerSide=Wp.prototype.initServerSide,Wp.prototype.addMediaTailorTrackingUrl=Wp.prototype.addMediaTailorTrackingUrl,Wp.prototype.requestMediaTailorStream=Wp.prototype.requestMediaTailorStream,Wp.prototype.initMediaTailor=Wp.prototype.initMediaTailor,Wp.prototype.updateClientSideAdsRenderingSettings=Wp.prototype.updateClientSideAdsRenderingSettings,Wp.prototype.requestClientSideAds=Wp.prototype.requestClientSideAds,Wp.prototype.onAssetUnload=Wp.prototype.onAssetUnload,Wp.prototype.release=Wp.prototype.release,Wp.prototype.initClientSide=Wp.prototype.initClientSide,Wp.prototype.initInterstitial=Wp.prototype.initInterstitial,Wp.prototype.configure=Wp.prototype.configure,Wp.prototype.setLocale=Wp.prototype.setLocale,Wp.ADS_LOADED="ads-loaded",Wp.AD_STARTED="ad-started",Wp.AD_FIRST_QUARTILE="ad-first-quartile",Wp.AD_MIDPOINT="ad-midpoint",Wp.AD_THIRD_QUARTILE="ad-third-quartile",Wp.AD_COMPLETE="ad-complete",Wp.AD_STOPPED="ad-stopped",Wp.AD_SKIPPED="ad-skipped",Wp.AD_VOLUME_CHANGED="ad-volume-changed",Wp.AD_MUTED="ad-muted",Wp.AD_PAUSED="ad-paused",Wp.AD_RESUMED="ad-resumed",Wp.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Wp.CUEPOINTS_CHANGED="ad-cue-points-changed",Wp.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Wp.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Wp.AD_CLICKED="ad-clicked",Wp.AD_PROGRESS="ad-progress",Wp.AD_BUFFERING="ad-buffering",Wp.AD_IMPRESSION="ad-impression",Wp.AD_DURATION_CHANGED="ad-duration-changed",Wp.AD_CLOSED="ad-closed",Wp.AD_LOADED="ad-loaded",Wp.ALL_ADS_COMPLETED="all-ads-completed",Wp.AD_LINEAR_CHANGED="ad-linear-changed",Wp.AD_METADATA="ad-metadata",Wp.AD_RECOVERABLE_ERROR="ad-recoverable-error",Wp.AD_ERROR="ad-error",Wp.AD_BREAK_READY="ad-break-ready",Wp.AD_INTERACTION="ad-interaction",Wp.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Wp.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Wp.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",ip=function(){return new Wp};var Yp="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Jp="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Qp=["loop","playbackRate"],Zp=["pause","play"],eh=(new Map).set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1),th=(new Map).set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),nh=(new Map).set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),rh=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],oh=[["isTextTrackVisible","setTextTrackVisibility"]],ih="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),ah="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function sh(e,t,n,r,o,i,a){var s=this;this.H=e,this.K=a,this.l=new Tr(t),this.M=n,this.u=!1,this.B=r,this.G=o,this.N=i,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return fh(s)},this.F=function(e,t){switch((e=$p(t)).type){case"event":var n=e.targetName,r=Uo(e.event);s.B(n,r);break;case"update":for(r in n=e.update)for(var o in e=s.g[r]||{},n[r])e[o]=n[r][o];s.u&&(s.M(),s.u=!1);break;case"asyncComplete":if(o=e.id,r=e.error,t=e.res,e=s.h.get(o),s.h.delete(o),e)if(r){for(n in o=new ze(r.severity,r.category,r.code),r)o[n]=r[n];e.reject(o)}else e.resolve(t)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,vh.add(this)}function lh(e,t){var n=e.N();gh=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),fh(e),ph(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function uh(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new ze(2,8,n,t))}function ch(e){var t=gh;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function fh(e){var t=!!gh&&"connected"==gh.status;if(e.i&&!t){for(var n in e.G(),e.g)e.g[n]={};dh(e)}e.i=t,e.J=t?gh.receiver.friendlyName:"",e.l.Kb()}function dh(e){if(e.h)for(var t=m(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var r=e.h.get(n);e.h.delete(n),r.reject(new ze(1,7,7e3))}}function ph(e,t){t=Xp(t);var n=gh;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},J)}catch(r){throw t=new ze(2,8,8005,r),n=new No("error",(new Map).set("detail",t)),e.B("player",n),e.qd(),t}}(o=sh.prototype).destroy=function(){return vh.delete(this),dh(this),gh&&ch(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},o.yb=function(){return this.i},o.ah=function(){return this.J},o.init=function(){if(this.H.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Kb();var t=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=m(vh),n=t.next();!n.done;n=t.next()){var r=e;(n=n.value).j=new Mo,n.u=!0,lh(n,r)}},function(e){for(var t=m(vh),n=t.next();!n.done;n=t.next())n=n.value,mh="available"==e,n.l.Kb()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),mh&&this.l.ka(hh),(t=gh)&&t.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Mo,this.u=!0,lh(this,t)):gh=null}else e.__onGCastApiAvailable!==bh&&(yh=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=bh)},o.nh=function(e){this.o=e,this.i&&ph(this,{type:"appData",appData:this.o})},o.cast=function(){var e=this;return O(function(t){if(!e.m)throw new ze(1,8,8e3);if(!mh)throw new ze(1,8,8001);if(e.i)throw new ze(1,8,8002);return e.j=new Mo,chrome.cast.requestSession(function(t){return lh(e,t)},function(t){return uh(e,t)}),S(t,e.j,0)})},o.qd=function(){if(this.i){if(dh(this),gh){ch(this);try{gh.stop(function(){},function(){})}catch(kk){}gh=null}fh(this)}},o.get=function(e,t){var n=this;if("video"==e){if(Zp.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(g(N.apply(0,arguments))))}}else if("player"==e){if(nh.has(t)&&!this.get("player","isLive")())return function(){};if(ih.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(g(N.apply(0,arguments))))};if(ah.includes(t))return function(){return n.Nk.apply(n,[e,t].concat(g(N.apply(0,arguments))))};if(eh.has(t)||th.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},o.set=function(e,t,n){this.g[e][t]=n,ph(this,{type:"set",targetName:e,property:t,value:n})},o.Fi=function(e,t){ph(this,{type:"call",targetName:e,methodName:t,args:N.apply(2,arguments)})},o.Nk=function(e,t){var n=N.apply(2,arguments),r=new Mo,o=this.I.toString();this.I++,this.h.set(o,r);try{ph(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:o})}catch(i){r.reject(i)}return r};var hh=.02,mh=!1,gh=null,yh=null,vh=new Set;function bh(t){if(yh?e.__onGCastApiAvailable=yh:delete e.__onGCastApiAvailable,yh=null,t)for(var n=m(vh),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function xh(t,n,r,o){o=void 0!==o&&o,jo.call(this);var i=this;this.i=t,this.h=n,this.l=this.o=this.m=this.u=this.j=null,this.I=r,this.H=o,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,e.chrome?(this.g=new sh(r,function(){return Th(i)},function(){return kh(i)},function(e,t){return Ih(i,e,t)},function(){return Ch(i)},function(){return Sh(i)},o),function(e){e.g.init(),e.l=new oe;for(var t=m(Yp),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(t){e.g.yb()||(t=Uo(t),e.m.dispatchEvent(t))});for(var r in Bo)e.l.D(e.h,Bo[r],function(t){e.g.yb()||e.o.dispatchEvent(t)});for(var o in e.j={},t={},e.i)(t={be:t.be}).be=o,Object.defineProperty(e.j,t.be,{configurable:!1,enumerable:!0,get:function(t){return function(){return Ah(e,t.be)}}(t),set:function(t){return function(n){var r=t.be;e.g.yb()?e.g.set("video",r,n):e.i[r]=n}}(t)});e.u={},wh(e,function(t){Object.defineProperty(e.u,t,{configurable:!1,enumerable:!0,get:function(){return Eh(e,t)}})}),function(e){var t=new Map;wh(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.G.set(n,r):e.G.set(r,n)):t.set(r,n)})}(e),e.m=new jo,e.m.Ee=e.j,e.o=new jo,e.o.Ee=e.u,e.l.D(e.h,"unloading",function(){e.g&&e.g.yb()||Mh(e)})}(this)):(this.j=this.i,this.u=this.h)}function wh(e,t){function n(e){return"constructor"!=e&&"function"==typeof o[e]&&!i.has(e)}var r,o=e.h,i=new Set;for(r in o)n(r)&&(i.add(r),t(r,o[r]));for(e=Object.getPrototypeOf(o),r=Object.getPrototypeOf({});e&&e!=r;){for(var a=m(Object.getOwnPropertyNames(e)),s=a.next();!s.done;s=a.next())n(s=s.value)&&(i.add(s),t(s,o[s]));e=Object.getPrototypeOf(e)}}function Sh(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=m(Qp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),r=(n=m(rh)).next();!r.done;r=n.next()){var o=r.value;r=o[1],o=e.h[o[0]](),t.player[r]=o}for(r=(n=m(oh)).next();!r.done;r=n.next())r=(o=r.value)[1],o=e.h[o[0]](),t.playerAfterLoad[r]=o;return t}function Th(e){var t=new No("caststatuschanged");e.dispatchEvent(t)}function kh(e){var t=new No(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function Ch(e){for(var t=m(rh),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var o=e.F,i=e.C,a=e.B;Mh(e);var s=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var l,u=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime")),(r=e.g.get("player","getTextTracks")())&&r.length&&(l=r.find(function(e){return e.active}));var c=e.g.get("player","isTextTrackVisible")();s&&(e.i.autoplay=!1,t=e.h.load(s,n));var f={};for(r=(n=m(Qp)).next();!r.done;r=n.next())r=r.value,f[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var t=m(o),n=t.next();!n.done;n=t.next()){var r;n=n.value,(r=e.td()).Le.apply(r,g(n))}for(r=(t=m(i)).next();!r.done;r=t.next()){var d;r=r.value,(d=e.td()).Md.apply(d,g(r))}for(t=(d=m(a)).next();!t.done;t=d.next()){var p;t=t.value,(p=e.td()).Ke.apply(p,g(t))}for(d=(p=m(Qp)).next();!d.done;d=p.next())d=d.value,e.i[d]=f[d];for(d=(p=m(oh)).next();!d.done;d=p.next())d=(t=d.value)[1],t=e.g.get("player",t[0])(),e.h[d](t);e.h.rh(c),l&&e.h.kh(l.language,l.roles,l.forced),e.i.autoplay=u,s&&e.i.play()}},function(t){t=new No("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)})}function Ah(e,t){if("addEventListener"==t)return function(t,n,r){return e.m.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.m.removeEventListener(t,n,r)};if(e.g.yb()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.yb()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function Eh(e,t,n){if(n=void 0!==n&&n,e.G.has(t)&&(t=e.G.get(t)),"addEventListener"==t)return function(t,n,r){return e.o.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.o.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.j};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Wb()};if("getDrmEngine"==t)return function(){return e.h.F};if("getAdManager"==t)return function(){return e.h.Zh()};if("getQueueManager"==t)return function(){return e.h.ei()};if("setVideoContainer"==t)return function(t){return e.h.Ti(t)};if(!n){if("addThumbnailsTrack"==t)return function(){var n=N.apply(0,arguments);return e.F.push(n),Eh(e,t,!0).apply(null,g(n))};if("addTextTrackAsync"==t)return function(){var n=N.apply(0,arguments);return e.C.push(n),Eh(e,t,!0).apply(null,g(n))};if("addChaptersTrack"==t)return function(){var n=N.apply(0,arguments);return e.B.push(n),Eh(e,t,!0).apply(null,g(n))}}if(e.g.yb()){if("getManifest"==t||"drmInfo"==t)return function(){return $(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return $(t+"() does not work while casting!"),Promise.resolve()};if("getChapters"==t)return function(){return $(t+"() does not work while casting!"),[]}}return e.g.yb()&&0==Object.keys(e.g.g.video).length&&(eh.has(t)||th.has(t))||!e.g.yb()?e.h[t].bind(e.h):e.g.get("player",t)}function Ih(e,t,n){e.g.yb()&&("video"==t?e.m.dispatchEvent(n):"player"==t&&("unloading"==n.type&&Mh(e),e.o.dispatchEvent(n)))}function Mh(e){e.F=[],e.C=[],e.B=[]}function Rh(e,t,n,r){jo.call(this);var o=this;this.h=e,this.g=t,this.j=new oe,this.I={video:e,player:t},this.G=n||function(){},this.J=r||function(e){return e},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new Tr(function(){Dh(o)}),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return _h(e)},t.onSenderDisconnected=function(){return _h(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Bh(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Bh(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(t){return function(e,t){var n=$p(t.data);switch(n.type){case"PLAY":e.h.play(),jh(e);break;case"PAUSE":e.h.pause(),jh(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.h.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.h.play(),jh(e)):r&&"PLAYBACK_PAUSE"==r&&(e.h.pause(),jh(e));break;case"STOP":e.g.Bc().then(function(){e.g&&jh(e)});break;case"GET_STATUS":Nh(e,Number(n.requestId));break;case"VOLUME":t=(r=n.volume).level,r=r.muted;var o=e.h.volume,i=e.h.muted;null!=t&&(e.h.volume=Number(t)),null!=r&&(e.h.muted=r),o==e.h.volume&&i==e.h.muted||jh(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,r=n.currentTime,o=e.J(t.contentId),i=n.autoplay||!0,e.G(t.customData),i&&(e.h.autoplay=!0),e.g.load(o,r).then(function(){e.g&&Nh(e)}).catch(function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),Bh(e,{requestId:Number(n.requestId),type:r},e.u)});break;default:Bh(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=$p(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,y,v,b,x,w,T,A;O(function(M){switch(M.g){case 1:for(r in t.player)o=t.player[r],e.g[r](o);return e.G(n),i=e.h.autoplay,t.manifest?(e.h.autoplay=!1,C(M,5),S(M,e.g.load(t.manifest,t.startTime),7)):S(M,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(a=m(t.addThumbnailsTrackCalls),s=a.next();!s.done;s=a.next())l=s.value,e.g.Le.apply(e.g,g(l));if(t.addTextTrackAsyncCalls)for(u=m(t.addTextTrackAsyncCalls),c=u.next();!c.done;c=u.next())f=c.value,e.g.Md.apply(e.g,g(f));if(t.addChaptersTrackCalls)for(d=m(t.addChaptersTrackCalls),p=d.next();!p.done;p=d.next())h=p.value,e.g.Ke.apply(e.g,g(h));E(M,3);break;case 5:return y=I(M),v=(new Map).set("detail",y),b=new No("error",v),e.g&&e.g.dispatchEvent(b),M.return();case 3:if(!e.g)return M.return();for(x in t.video)w=t.video[x],e.h[x]=w;for(T in t.playerAfterLoad)A=t.playerAfterLoad[T],e.g[T](A);e.h.autoplay=i,t.manifest&&(e.h.play(),jh(e)),k(M)}})}(e,n.initState,n.appData),Dh(e);break;case"appData":e.G(n.appData);break;case"set":var r=n.targetName,o=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==o){t.setSystemVolumeLevel(n);break}if("muted"==o){t.setSystemVolumeMuted(n);break}}e.I[r][o]=n;break;case"call":(r=e.I[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,o=n.methodName,"player"==r&&"load"==o&&(e.m=0,e.C=!1);var i=n.id,a=t.senderId;n=(t=e.I[r])[o].apply(t,n.args),"player"==r&&"load"==o&&(n=n.then(function(){e.B=!0})),n.then(function(t){return Uh(e,a,i,null,t)},function(t){return Uh(e,a,i,t,null)})}}(e,t)},t.start();for(var n=(t=m(Yp)).next();!n.done;n=t.next())e.j.D(e.h,n.value,function(t){return Ph(e,"video",t)});for(var r in Bo)e.j.D(e.g,Bo[r],function(t){return Ph(e,"player",t)});e.j.D(e.h,"loadeddata",function(){e.C=!0}),e.j.D(e.g,"loading",function(){e.o=!1,Lh(e)}),e.j.D(e.h,"playing",function(){e.o=!1,Lh(e)}),e.j.D(e.h,"pause",function(){Lh(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,Lh(e)}),e.j.D(e.h,"ended",function(){new Tr(function(){e.h&&e.h.ended&&(e.o=!0,Lh(e))}).ka(zh)})}(this)}function _h(e){e.m=0,e.B=!0,e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Lh(e)}function Lh(e){var t;O(function(n){return 1==n.g?S(n,Promise.resolve(),2):e.g?(t=new No("caststatuschanged"),e.dispatchEvent(t),Oh(e)||jh(e),void k(n)):n.return()})}function Ph(e,t,n){e.g&&(Dh(e),Bh(e,{type:"event",targetName:t,event:n},e.l))}function Dh(e){e.F.ka(Fh);for(var t={video:{},player:{}},n=m(Jp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.h[r];e.g.W()&&nh.forEach(function(n,r){e.m%n==0&&(t.player[r]=e.g[r]())}),eh.forEach(function(n,r){e.m%n==0&&(t.player[r]=e.g[r]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Bh(e,{type:"update",update:t},e.l),th.forEach(function(t,n){e.m%t==0&&((t={player:{}}).player[n]=e.g[n](),Bh(e,{type:"update",update:t},e.l))}),e.C&&(e.m+=1),Oh(e)}function Oh(e){return!(!e.B||!e.h.duration&&!e.g.W()||(Nh(e),e.B=!1,0))}function Nh(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),jh(e,void 0===t?0:t,n)}function Uh(e,t,n,r,o){e.g&&Bh(e,{type:"asyncComplete",id:n,error:r,res:o},e.l,t)}function Bh(e,t,n,r){e.H&&(e=Xp(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function jh(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?Vh:e.g.Og()?Gh:e.h.paused?qh:Hh,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(r.media=n),Bh(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.u)}p(xh,jo),(o=xh.prototype).destroy=function(e){return this.g&&void 0!==e&&e&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,jo.prototype.release.call(this),Promise.all(e)},o.dk=function(){return this.j},o.td=function(){return this.u},o.mj=function(){return!!this.g&&this.g.m&&mh},o.yb=function(){return!!this.g&&this.g.yb()},o.ah=function(){return this.g?this.g.ah():""},o.cast=function(){var e=this;return O(function(t){return 1==t.g?e.g?S(t,e.g.cast(),2):t.return():e.h?S(t,e.h.Bc(),0):t.return()})},o.nh=function(e){this.g&&this.g.nh(e)},o.fl=function(){var e;this.g&&(e=this.g).i&&chrome.cast.requestSession(function(t){return lh(e,t)},function(t){return uh(e,t)})},o.qd=function(){this.g&&this.g.qd()},o.nj=function(e,t){t=void 0!==t&&t;var n=this;return O(function(r){if(1==r.g)return e==n.I&&t==n.H?r.return():(n.I=e,n.H=t,n.g?(n.g.qd(),S(r,n.g.destroy(),2)):r.return());n.g=null,n.g=new sh(e,function(){return Th(n)},function(){return kh(n)},function(e,t){return Ih(n,e,t)},function(){return Ch(n)},function(){return Sh(n)},t),n.g.init(),k(r)})},H("shaka.cast.CastProxy",xh),xh.prototype.changeReceiverId=xh.prototype.nj,xh.prototype.forceDisconnect=xh.prototype.qd,xh.prototype.suggestDisconnect=xh.prototype.fl,xh.prototype.setAppData=xh.prototype.nh,xh.prototype.cast=xh.prototype.cast,xh.prototype.receiverName=xh.prototype.ah,xh.prototype.isCasting=xh.prototype.yb,xh.prototype.canCast=xh.prototype.mj,xh.prototype.getPlayer=xh.prototype.td,xh.prototype.getVideo=xh.prototype.dk,xh.prototype.destroy=xh.prototype.destroy,p(Rh,jo),(o=Rh.prototype).isConnected=function(){return this.H},o.kk=function(){return this.o},o.Zk=function(e){this.i=e},o.rj=function(){this.i=null},o.$k=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},o.Yk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},o.Xk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},o.destroy=function(){var e,t=this;return O(function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.g&&(e.push(t.g.destroy()),t.g=null),t.F&&(t.F.stop(),t.F=null),t.h=null,t.I=null,t.G=null,t.H=!1,t.o=!0,t.l=null,t.u=null,jo.prototype.release.call(t),S(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),k(n)})},H("shaka.cast.CastReceiver",Rh),Rh.prototype.destroy=Rh.prototype.destroy,Rh.prototype.setContentArtist=Rh.prototype.Xk,Rh.prototype.setContentImage=Rh.prototype.Yk,Rh.prototype.setContentTitle=Rh.prototype.$k,Rh.prototype.clearContentMetadata=Rh.prototype.rj,Rh.prototype.setContentMetadata=Rh.prototype.Zk,Rh.prototype.isIdle=Rh.prototype.kk,Rh.prototype.isConnected=Rh.prototype.isConnected;var Fh=.5,zh=5,Vh="IDLE",Hh="PLAYING",Gh="BUFFERING",qh="PAUSED";function Wh(e,t,n,r,o){if(r>=o)return null;for(var i=-1,a=-1,s=0;s<n.length;s++)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){i=s;break}for(s=n.length-1;s>=0;s--)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){a=s;break}if(-1===i||-1===a)return null;for(var l=s=!1,u="white",c="black",f=Kh(r,o,s,l,u,c);i<=a;i++){for(var d=n[i],p=-1,h=-1,m=0;m<d.length;m++)if(null!=d[m]&&""!==d[m].g.trim()){p=m;break}for(m=d.length-1;m>=0;m--)if(null!=d[m]&&""!==d[m].g.trim()){h=m;break}if(-1===p||-1===h)d=Xh(r,o),e.nestedCues.push(d);else{for(;p<=h;p++)if(m=d[p]){var g=m.l,y=m.i,v=m.j,b=m.h;g==s&&y==l&&v==u&&b==c||(f.payload&&e.nestedCues.push(f),f=Kh(r,o,g,y,v,b),s=g,l=y,u=v,c=b),f.payload+=m.g}else f.payload+=" ";f.payload&&e.nestedCues.push(f),i!==a&&(f=Xh(r,o),e.nestedCues.push(f)),f=Kh(r,o,s,l,u,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Kh(e,t,n,r,o,i){return e=new Tn(e,t,""),n&&e.textDecoration.push(Kn),r&&(e.fontStyle=qn),e.color=o,e.backgroundColor=i,e}function Xh(e,t){return(e=new Tn(e,t,"")).lineBreak=!0,e}function $h(e,t,n,r,o){this.g=e,this.l=t,this.i=n,this.h=r,this.j=o}function Yh(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,Qh(this)}function Jh(e,t,n){var r="CC"+(1+(e.F<<1|e.C)),o=new Tn(t,n,"");o.lineInterpretation=1;var i=am.get(e.g);return i&&(o.line=i),null!=e.u&&null!=e.B&&(o.position=10+Math.min(70,10*e.u)+2.5*e.B),(t=Wh(o,r,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(i=am.get(e.g+3-t.cue.nestedCues.length))&&(o.line=i),t}function Qh(e){tm(e,0,15),e.g=1}function Zh(e,t,n){if(!(n<32||n>127)){var r="";switch(t){case 0:r=nm.has(n)?nm.get(n):String.fromCharCode(n);break;case 1:r=rm.get(n);break;case 2:e.i[e.g].pop(),r=om.get(n);break;case 3:e.i[e.g].pop(),r=im.get(n)}r&&e.i[e.g].push(new $h(r,e.m,e.j,e.o,e.l))}}function em(e,t,n,r){if(!(n<0||t<0))if(t>=n)for(--r;r>=0;r--)e.i[t+r]=e.i[n+r].map(function(e){return e});else for(var o=0;o<r;o++)e.i[t+o]=e.i[n+o].map(function(e){return e})}function tm(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var nm=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),rm=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),om=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),im=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),am=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function sm(e,t){this.h=0,this.o=new Yh(e,t),this.i=new Yh(e,t),this.g=this.j=new Yh(e,t),this.l=0,this.m=null}function lm(e,t,n){e.g=e.i;var r=e.g,o=null;return 3!==e.h&&4!==e.h&&(o=Jh(r,e.l,n),(n=e.i).g=n.h>0?n.h:0,tm(n,0,15),(n=e.j).g=n.h>0?n.h:0,tm(n,0,15),r.g=15),e.h=3,r.h=t,o}function um(e){e.h=1,e.g=e.j,e.g.h=0}function cm(e){Y("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var fm="black green blue cyan red yellow magenta black".split(" "),dm="white green blue cyan red yellow magenta white_italics".split(" ");function pm(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",hm(this)}function hm(e){e.i=[];for(var t=0;t<16;t++)e.i.push(mm())}function mm(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function gm(e,t){ym(e)&&(e.i[e.h][e.g]=new $h(t,e.F,e.B,e.u,e.C),e.g++)}function ym(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}function vm(e,t,n){var r=new Tn(e.j,t,"");r.textAlign=0===e.G?"left":1===e.G?"right":_n;var o=r.region;switch(e.J&&(o.id+="svc"+e.J),o.id+="win"+e.N,o.height=e.o,o.width=e.m,o.heightUnits=2,o.widthUnits=2,o.viewportAnchorX=e.I,o.viewportAnchorY=e.M,o.viewportAnchorUnits=e.K?_t:2,e.H){case 0:o.regionAnchorX=0,o.regionAnchorY=0;break;case 1:o.regionAnchorX=50,o.regionAnchorY=0;break;case 2:o.regionAnchorX=100,o.regionAnchorY=0;break;case 3:o.regionAnchorX=0,o.regionAnchorY=50;break;case 4:o.regionAnchorX=50,o.regionAnchorY=50;break;case 5:o.regionAnchorX=100,o.regionAnchorY=50;break;case 6:o.regionAnchorX=0,o.regionAnchorY=100;break;case 7:o.regionAnchorX=50,o.regionAnchorY=100;break;case 8:o.regionAnchorX=100,o.regionAnchorY=100}return(n=Wh(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function bm(){this.i=[],this.h=null,this.g=0}function xm(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new wm(e.h)),e.h=null,e.g=0))}function wm(e){this.g=0,this.h=e}function Sm(e){if(!e.Ia())throw new ze(2,2,3e3);return e.h[e.g++]}function Tm(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function km(e,t,n,r){if(!e.g)return[];if(24==n)return n=Sm(t).value,r=Sm(t).value,n=[n,r].map(function(e){return("0"+(255&e).toString(16)).slice(-2)}).join(""),gm(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var o=null;switch(n){case 8:!ym(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(o=vm(t,r,e.i)),t.h+1>=t.o?function(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=mm()}(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(o=vm(t,r,e.i)),t.i[t.h]=mm(),t.g=0;break;case 12:t.isVisible()&&(o=vm(t,r,e.i)),hm(t),t.h=0,t.g=0}return o?[o]:[]}function Cm(e,t,n,r){if(n>=128&&n<=135)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=Sm(t).value,t=[];for(var o=(n=m(Am(e,n))).next();!o.done;o=n.next()){if((o=e.h[o.value]).isVisible()){var i=vm(o,r,e.i);i&&t.push(i)}hm(o)}return t}if(137===n)for(n=(t=m(Am(e,t=Sm(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=r),n.display();else{if(138===n){for(n=Sm(t).value,t=null,o=(n=m(Am(e,n))).next();!o.done;o=n.next())(o=e.h[o.value]).isVisible()&&(t=vm(o,r,e.i)),o.l=!1;return t?[t]:[]}if(139===n){for(n=Sm(t).value,t=null,o=(n=m(Am(e,n))).next();!o.done;o=n.next())(o=e.h[o.value]).isVisible()?t=vm(o,r,e.i):o.j=r,o.l=!o.l;return t?[t]:[]}if(140===n)return Em(e,t=Sm(t).value,r);if(143===n)return r=Em(e,255,r),Im(e),r;if(144===n)t.skip(1),r=Sm(t).value,e.g&&(e.g.B=(128&r)>0,e.g.F=(64&r)>0);else if(145===n)r=Sm(t).value,n=Sm(t).value,t.skip(1),e.g&&(t=Mm((48&n)>>4,(12&n)>>2,3&n),e.g.C=Mm((48&r)>>4,(12&r)>>2,3&r),e.g.u=t);else if(146===n)r=Sm(t).value,t=Sm(t).value,e.g&&((e=e.g).h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=Sm(t).value,t.skip(1),e.g&&(e.g.G=3&r);else if(n>=152&&n<=159){n=(15&n)-8,(o=null!==e.h[n])||((i=new pm(n,e.i)).j=r,e.h[n]=i),r=Sm(t).value,i=Sm(t).value;var a=Sm(t).value,s=Sm(t).value,l=Sm(t).value;t=Sm(t).value,o&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),(t=e.h[n]).l=(32&r)>0,t.M=127&i,t.I=a,t.H=(240&s)>>4,t.K=(128&i)>0,t.o=1+(15&s),t.m=1+(63&l),e.g=e.h[n]}}}return[]}function Am(e,t){for(var n=[],r=0;r<8;r++)!(1&~t)&&e.h[r]&&n.push(r),t>>=1;return n}function Em(e,t,n){for(var r=[],o=(t=m(Am(e,t))).next();!o.done;o=t.next()){o=o.value;var i=e.h[o];i.isVisible()&&(i=vm(i,n,e.i))&&r.push(i),e.h[o]=null}return r}function Im(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Mm(e,t,n){var r={0:0,1:0,2:1,3:1};return _m[(e=r[e])<<2|(t=r[t])<<1|(n=r[n])]}pm.prototype.isVisible=function(){return this.l},pm.prototype.display=function(){this.l=!0},wm.prototype.Ia=function(){return this.g<this.h.length},wm.prototype.Pa=function(){return this.g},wm.prototype.skip=function(e){if(this.g+e>this.h.length)throw new ze(2,2,3e3);this.g+=e},wm.prototype.Ki=function(e){if(this.g-e<0)throw new ze(2,2,3e3);this.g-=e};var Rm=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),_m="black blue green cyan red magenta yellow white".split(" ");function Lm(){this.h=[],this.g=[],this.i=new bm,this.l=0,this.m=new Map([["CC1",new sm(0,0)],["CC2",new sm(0,1)],["CC3",new sm(1,0)],["CC4",new sm(1,1)]]),this.u=this.o=0,this.j=new Map,this.C=!0,this.B=new Set,Pm(this)}function Pm(e){e.o=0,e.u=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())(n=n.value).h=0,n.g=n.j,n.m=null,Qh(n.i),Qh(n.j),Qh(n.o);e.C=!0}function Dm(e,t){var n=t.type;if(16==(112&t.Db)){var r=t.Db>>3&1;0===n?e.o=r:e.u=r}if(r="CC"+(1+(n<<1|(n?e.u:e.o))),n=e.m.get(r),255===t.Db&&255===t.hc||!t.Db&&!t.hc||!Nm(t.Db)||!Nm(t.hc))return++e.l>=45&&Pm(e),null;e.l=0,t.Db&=127,t.hc&=127;var o=t.Db;if(o>=1&&o<=15||!t.Db&&!t.hc)return null;if(o=null,16==(112&t.Db))e:{if(e.B.add(r),r=t.Db,e=t.hc,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1],r="white",o=!1;var i=null,a=e>95?e-96:e-64;a<=13?r=dm[Math.floor(a/2)]:a<=15?o=!0:i=Math.floor((a-16)/2),e=!(1&~e),4!==n.h&&(a=n.g,3===n.h&&t!==a.g&&(em(a,n=1+t-a.h,1+a.g-a.h,a.h),tm(a,0,n-1),tm(a,t+1,15-t)),a.g=t,a.m=e,a.j=o,a.l=r,a.u=i,a.o="black")}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",Zh(n.g,0,32),r=!1,"white_italics"===(t=dm[(14&e)>>1])&&(t="white",r=!0),n.g.m=!(1&~e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",!(7&r)&&(t=fm[(14&e)>>1]),n.g.o=t;else if(17==(247&r)&&48==(240&e))Zh(n.g,1,e);else if(18==(246&r)&&32==(224&e))Zh(n.g,1&r?3:2,e);else{if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.hc){case 32:um(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:r=lm(n,2,e);break;case 38:r=lm(n,3,e);break;case 39:r=lm(n,4,e);break;case 40:Zh(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Qh(n.o),cm(n);break;case 43:cm(n);break;case 44:t=n.i,r=null,4!==n.h&&(r=Jh(t,n.l,e)),tm(t,0,15);break;case 45:t=n.g,3!==n.h?r=null:(r=Jh(t,n.l,e),em(t,(o=t.g-t.h+1)-1,o,t.h),tm(t,0,o-1),tm(t,t.g,15-t.g),n.l=e);break;case 46:tm(n.j,0,15);break;case 47:t=null,4!==n.h&&(t=Jh(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,um(n),n.l=e,r=t}o=r;break e}(23==r||31==r)&&e>=33&&e<=35&&(n.g.B=e-32)}o=null}else e=t.hc,Zh(n.g,0,t.Db),Zh(n.g,0,e);return o}function Om(e,t){var n=[];try{for(;t.Ia();){var r=Sm(t).value,o=(224&r)>>5,i=31&r;if(7===o&&0!=i&&(o=63&Sm(t).value),0!=o){e.B.add("svc"+o),e.j.has(o)||e.j.set(o,new Tm(o));for(var a=e.j.get(o),s=t.Pa();t.Pa()-s<i;){o=a;var l=t,u=Sm(l),c=u.value,f=u.pts;if(16===c&&(c=c<<16|Sm(l).value),c>=0&&c<=31)var d=km(o,l,c,f);else if(c>=128&&c<=159)d=Cm(o,l,c,f);else{if(c>=4096&&c<=4127)o=l,(l=255&c)>=8&&l<=15?o.skip(1):l>=16&&l<=23?o.skip(2):l>=24&&l<=31&&o.skip(3);else if(c>=4224&&c<=4255)o=l,(l=255&c)>=128&&l<=135?o.skip(4):l>=136&&l<=143&&o.skip(5);else if(c>=32&&c<=127)l=c,o.g&&gm(o.g,127===l?"♪":String.fromCharCode(l));else if(c>=160&&c<=255)o.g&&gm(o.g,String.fromCharCode(c));else if(c>=4128&&c<=4223){if(l=255&c,o.g)if(Rm.has(l)){var p=Rm.get(l);gm(o.g,p)}else gm(o.g,"_")}else c>=4256&&c<=4351&&o.g&&gm(o.g,160!=(255&c)?"_":"[CC]");d=[]}n.push.apply(n,g(d))}}}}catch(h){if(!(h instanceof ze&&3e3===h.code))throw h;Y("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Nm(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function Um(e){for(var t=[],n=e,r=e=0;r<n.length;)2==e&&3==n[r]?(e=0,(n=[].concat(g(n))).splice(r,1),n=new Uint8Array(n)):0==n[r]?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;255==e[r];)n+=255,r++;n+=e[r++];for(var o=0;255==e[r];)o+=255,r++;o+=e[r++],4==n&&t.push(e.subarray(r,r+o)),r+=o}return t}function Bm(){this.j=new Map,this.i=this.h=0,this.g=Fm}function jm(e,t,n,r,o,i,a,s,l){var u=0,c=i,f=s.map(function(e){return e.ih});for((f=[].concat.apply([],g(f))).length&&(c=f[0].sampleSize||i),t.skip(a+s[0].mg);t.Ia();){a=t.U();var d=t.Y(),p=null;switch(p=!1,s=1,e.g){case zm:p=6==(p=31&d);break;case Vm:s=2,t.skip(1),p=39==(p=d>>1&63)||40==p;break;case Hm:s=2,t.skip(1),p=23==(p=d>>1&63)||24==p;break;default:return}if(p)for(d=0,u<f.length&&(d=f[u].Cf||0),d=(n+d)/r,p=(s=m(Um(t.Tb(a-s)))).next();!p.done;p=s.next())l.push({packet:p.value,pts:d});else try{t.skip(a-s)}catch(h){break}0==(c-=a+4)&&(n=u<f.length?n+(f[u].jh||o):n+o,c=++u<f.length&&f[u].sampleSize||i)}}Lm.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Pm(this);for(var t=(e=m(this.j.values())).next();!t.done;t=e.next())Im(t.value)},Lm.prototype.extract=function(e,t){if(this.C){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.C=!1}if(!((e=new oi(e,0)).getLength()<8)&&181===e.Y()&&49===e.Ba()&&1195456820===e.U()&&3===e.Y()&&64&(n=e.Y()))for(n&=31,e.skip(1),r=0;r<n;r++){var o=e.Y(),i=(4&o)>>2,a=e.Y(),s=e.Y();i&&(0==(o&=3)||1===o?this.h.push({pts:t,type:o,Db:a,hc:s,order:this.h.length}):(this.g.push({pts:t,type:o,value:a,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}},Lm.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=Dm(this,r.value))&&t.push(r);for(r=(n=m(this.g)).next();!r.done;r=n.next())xm(this.i,r.value);for(r=(n=m(this.i.i)).next();!r.done;r=n.next())r=Om(this,r.value),t.push.apply(t,g(r));return this.i.i=[],this.h=[],this.g=[],t},Lm.prototype.getStreams=function(){return Array.from(this.B)},H("shaka.cea.CeaDecoder",Lm),Mt=function(){return new Lm},Bm.prototype.init=function(e){function t(e){e=e.name,Gm.has(e)&&(n.g=Gm.get(e))}var n=this,r=[],o=[];if((new si).box("moov",li).box("mvex",li).T("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.U(),t=t.U(),n.h=e,n.i=t}).box("trak",li).T("tkhd",function(e){var t=e.reader;1==(e=e.version)?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.U();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.Ba(),t.Ba(),t.Ba(),t.Ba(),r.push(n)}).box("mdia",li).T("mdhd",function(e){e=ia(e.reader,e.version),o.push(e.timescale)}).box("minf",li).box("stbl",li).T("stsd",ui).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",ci).box("sinf",li).box("frma",function(e){e=la(e.reader).codec,Gm.has(e)&&(n.g=Gm.get(e))}).parse(e,!0,!0),!r.length||!o.length||r.length!=o.length)throw new ze(2,2,2010);this.g==Fm&&$("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(e,t){n.j.set(e,o[t])})},Bm.prototype.parse=function(e){var t=this;if(this.g==Fm)return[];var n=[],r=0,o=[];return(new si).box("moof",function(e){r=e.start,o=[],li(e)}).box("traf",function(e){o.push({baseMediaDecodeTime:null,Rd:t.h,Sd:t.i,Bi:[],timescale:9e4}),li(e)}).T("trun",function(e){var t=o[o.length-1];e=aa(e.reader,e.version,e.flags),t.Bi.push(e)}).T("tfhd",function(e){var n=o[o.length-1];e=ra(e.reader,e.flags),n.Rd=e.Rd||t.h,n.Sd=e.Sd||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))}).T("tfdt",function(e){var t=o[o.length-1];e=oa(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime}).box("mdat",function(e){for(var i=r-e.start-8,a=e.reader.Pa(),s=m(o),l=s.next();!l.done;l=s.next())null===(l=l.value).baseMediaDecodeTime?$("Unable to find base media decode time for CEA captions!"):(e.reader.seek(a),jm(t,e.reader,l.baseMediaDecodeTime,l.timescale,l.Rd,l.Sd,i,l.Bi,n))}).parse(e,!1,!0),n},H("shaka.cea.Mp4CeaParser",Bm);var Fm=0,zm=1,Vm=2,Hm=3,Gm=(new Map).set("avc1",zm).set("avc3",zm).set("dvav",zm).set("dva1",zm).set("hev1",Vm).set("hvc1",Vm).set("dvh1",Vm).set("dvhe",Vm).set("vvc1",Hm).set("vvi1",Hm).set("dvc1",Hm).set("dvi1",Hm);function qm(){this.g=null}function Wm(e){return(e=function(e){var t=0,n=je(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var o=n.getUint16(e,!0);if(e+=2,1&o||o+e>n.byteLength){n=[];break e}var i=Ue(n,e,o);t.push({type:r,value:i}),e+=o}n=t}return n}(e=et(Yt(e))).filter(function(e){return e.type===Xm})[0])&&(e=qt(e=Ge(e.value,!0),"WRMHEADER"))?e:null}function Km(e){try{var t=Wm(e);if(t)e:{for(var n=m(Qt(t,"DATA")),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.children)for(var i=m(o.children),a=i.next();!a.done;a=i.next()){var s=a.value;if("LA_URL"==s.tagName){var l=Yt(s);break e}}}l=""}else l="";return l}catch(u){return""}}At("video/mp4",function(){return new Bm}),qm.prototype.init=function(){},qm.prototype.parse=function(e){this.g?this.g.clearData():this.g=new As;var t=[];if(!Rs(e=Ue(e)))return t;var n=(e=this.g.parse(e)).Td(),r=e.Ze();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(r=(n=m(r)).next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&null!=r.time)for(var o=m(Um(r.data)),i=o.next();!i.done;i=o.next())t.push({packet:i.value,pts:r.time});return t},H("shaka.cea.TsCeaParser",qm),At("video/mp2t",function(){return new qm});var Xm=1;function $m(){this.g=new Map}function Ym(t,n,r,o){var i=function(e,t){for(var n=[],r=(t=m(t)).next();!r.done;r=t.next())(r=Qm(e,r.value))&&n.push(r);return n}(t,n),a=null;t=[];var s=[];n=null;var l=new Set(i.map(function(e){return e.keyId}));l.delete(null);var u="cenc";if(l.size>1)throw new ze(2,4,4010);if(!r){if((s=i.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.Gd})).length>1)throw new ze(2,4,4050);s.length&&(n=function(t){if(!e.crypto||!e.crypto.subtle)throw $("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new ze(2,4,4042);var n=en(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new ze(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new ze(2,4,4051);if(!(n=en(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new ze(2,4,4051);if(t=n.attributes.IV,n=$e(n.attributes.keyUriTemplate),!t||!n)throw new ze(2,4,4051);if(16!=(t=tt(t.substr(2))).byteLength)throw new ze(2,4,4048);return{tk:n,iv:t}}(s[0])),(s=i.find(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Gd}))&&s.encryptionScheme&&(u=s.encryptionScheme),(s=i.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Gd?(a=e.init||a,!1):"urn:mpeg:dash:sea:2012"!=e.Gd})).length&&(t=function(e,t,n,r,o){for(var i=[],a=(n=m(n)).next();!a.done;a=n.next()){var s=r[(a=a.value).Gd];if(s){var l;if((l=en(a.node,"urn:microsoft:playready","pro"))&&Yt(l)){l=et(l=Yt(l));var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);l=[{initData:bi(l,u,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else l=null;if(u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.Gd){u=a;var c=o;if(0==c.size)u=null;else{var f=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);u=[{initData:bi(new Uint8Array([]),f,c,1),initDataType:"cenc",keyId:u.keyId}]}}l=it(s,t,a.init||e||l||u),(s=Zm.get(s))&&(l.licenseServerUri=s(a)),(a=en(a.node,"https://dashif.org/CPS","Certurl"))&&(a=Yt(a))||(a=""),l.serverCertificateUri=a,i.push(l)}}return i}(a,u,s,o,l),0==t.length&&(t=[it("",u,a)]))}if(i.length&&!n&&(r||!s.length))for(t=[],o=(r=m(Object.values(o))).next();!o.done;o=r.next())"org.w3.clearkey"!=(o=o.value)&&t.push(it(o,u,a));if(l=Array.from(l)[0]||null)for(r=(u=m(t)).next();!r.done;r=u.next())for(o=(r=m(r.value.initData)).next();!o.done;o=r.next())o.value.keyId=l;return{Th:l,Fm:a,drmInfos:t,dg:n,Yh:!0}}function Jm(e){var t=en(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=Yt(t)))return t;if((t=en(e.node,"urn:microsoft:playready","pro"))&&Yt(t))return Km(t);if((e=en(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=Yt(e))){t=et(e),e=8;var n=(t=je(t)).getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),Km(e=qt("<pro>"+(e=Qe(e=Ue(t,e+4)))+"</pro>"))}return""}function Qm(e,t){var n=t.attributes.schemeIdUri,r=nn(t,"urn:mpeg:cenc:2013","default_KID"),o=rn(t,"urn:mpeg:cenc:2013","pssh").map(Jt),i=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase()).includes(" "))throw new ze(2,4,4009);var a=[];try{a=o.map(function(t){if(!e.g.has(t)){var n=et(t);e.g.set(t,n)}return{initDataType:"cenc",initData:e.g.get(t),keyId:null}})}catch(s){throw new ze(2,4,4007)}return{node:t,Gd:n,keyId:r,init:a.length>0?a:null,encryptionScheme:i}}$m.prototype.release=function(){this.g.clear()};var Zm=(new Map).set("com.apple.fps",function(t){if("apple"===e.shakaMediaKeysPolyfill)throw new ze(2,4,4054);return(t=en(t.node,"https://dashif.org/CPS","Laurl"))&&(t=Yt(t))?t:""}).set("com.widevine.alpha",function(e){var t=en(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Yt(t))?t:(e=en(e.node,"urn:microsoft","laurl"))&&$e(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Jm).set("com.microsoft.playready.recommendation",Jm).set("com.microsoft.playready.software",Jm).set("com.microsoft.playready.hardware",Jm).set("org.w3.clearkey",function(e){var t=en(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Yt(t))?t:(e=en(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=Yt(e))?e:""});function eg(t,n,r,o,i,a){var s=(new Map).set("RepresentationID",n).set("Number",r).set("SubNumber",o).set("Bandwidth",i).set("Time",a);return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,r,o){if("$$"==t)return"$";var i=s.get(n);if(null==i)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&"bigint"!=typeof i&&(Math.abs(i-Math.round(i))>=.2&&$("Calculated $Time$ values must be close to integers"),i=Math.round(i)),o){case void 0:case"d":case"i":case"u":t=i.toString();break;case"o":t=i.toString(8);break;case"x":t=i.toString(16);break;case"X":t=i.toString(16).toUpperCase();break;default:t=i.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t})}function tg(e,t){var n=rg(e,t,"timescale"),r=1;n&&(r=cn(n)||1);var o=(n=cn((n=rg(e,t,"duration"))||""))?n/r:null,i=rg(e,t,"startNumber"),a=Number(rg(e,t,"presentationTimeOffset"))||0,s=fn(i||"");if(null!=i&&null!=s||(s=1),i=null,t=og(e,t,"SegmentTimeline")){t=$t(t,"S"),i=r,e=e.na.duration||1/0;for(var l=s,u=[],c=-a,f=0;f<t.length;++f){var d=t[f],p=t[f+1],h=tn(d,"t",fn),m=tn(d,"d",fn),g=tn(d,"r",un);if(d=tn(d,"k",un)||0,null!=h&&(h-=a),m){if(h=null!=h?h:c,(g=g||0)<0)if(p){if(null==(p=tn(p,"t",fn)))break;if(h>=p)break;g=Math.ceil((p-h)/m)-1}else{if(e==1/0)break;if(h/i>=e)break;g=Math.ceil((e*i-h)/m)-1}for(u.length>0&&h!=c&&(u[u.length-1].end=h/i),p=0;p<=g;++p)c=h+m,u.push({start:h/i,end:c/i,Fh:h,vc:d,Tk:u.length+l}),h=c}}i=u}return{timescale:r,Mf:n,fb:o,oe:s,Jb:a/r||0,gd:a,timeline:i}}function ng(e,t){return[t(e.L),t(e.qa),t(e.sa)].filter(Ar)}function rg(e,t,n){t=ng(e,t),e=null;for(var r=(t=m(t)).next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function og(e,t,n){t=ng(e,t),e=null;for(var r=(t=m(t)).next();!r.done&&!(e=Zt(r.value,n));r=t.next());return e}function ig(e,t,n,r,o,i){if(i=void 0===i?0:i,nn(e,"http://www.w3.org/1999/xlink","href")){var a=function(e,t,n,r,o,i){for(var a=nn(e,"http://www.w3.org/1999/xlink","href"),s=nn(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=m(Object.keys(e.attributes)),u=l.next();!u.done;u=l.next()){var c=(u=u.value).split(":"),f=Wt("http://www.w3.org/1999/xlink");c[0]==f&&delete e.attributes[u]}if(i>=5)return _o(new ze(2,4,4028));if("onLoad"!=s)return _o(new ze(2,4,4027));var d=ot([r],[a]);return o.request(0,qo(d,t)).Xa(function(r){if(!(r=Gt(r.data,e.tagName)))return _o(new ze(2,4,4001,a));for(e.children=[];r.children.length;){var s=r.children.shift();e.children.push(s)}for(var l=(s=m(Object.keys(r.attributes))).next();!l.done;l=s.next())l=l.value,e.attributes[l]=r.attributes[l];return ig(e,t,n,d[0],o,i+1)})}(e,t,n,r,o,i);return n&&(a=a.Xa(void 0,function(){return ig(e,t,n,r,o,i)})),a}a=[];for(var s=m(Xt(e)),l=s.next(),u={};!l.done;u={Od:void 0},l=s.next())u.Od=l.value,"urn:mpeg:dash:resolve-to-zero:2013"==nn(u.Od,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.Od}}(u)):"SegmentTimeline"!=u.Od.tagName&&a.push(ig(u.Od,t,n,r,o,i));return Oo(a).Xa(function(){return e})}function ag(e,t,n,r,o,i,a){var s,l=(new si).T("sidx",function(e){s=function(e,t,n,r,o,i,a){var s=[];a.reader.skip(4);var l=a.reader.U();if(0==l)throw new ze(2,3,3005);if(0==a.version)var u=a.reader.U(),c=a.reader.U();else u=a.reader.Dd(),c=a.reader.Dd();a.reader.skip(2);var f=a.reader.Ba();for(e=e+a.size+c,c=0;c<f;c++){var d=a.reader.U(),p=(2147483648&d)>>>31;d&=2147483647;var h=a.reader.U();if(a.reader.skip(4),1==p)throw new ze(2,3,3006);s.push(new Ha(u/l+n,(u+h)/l+n,function(){return i},e,e+d-1,t,n,r,o)),u+=h,e+=d}return a.parser.stop(),s}(t,r,o,i,a,n,e)});if(e&&l.parse(e),s)return s;throw new ze(2,3,3004)}function sg(e){this.h=je(e),this.g=new oi(this.h,0)}function lg(e){var t=ug(e);if(t.length>7)throw new ze(2,3,3002);for(var n=0,r=(t=m(t)).next();!r.done;r=t.next())n=256*n+r.value;t=ug(e);e:{for(var o=(r=m(cg)).next();!o.done;o=r.next())if(Oe(t,new Uint8Array(o.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.Pa();else{if(8==t.length&&224&t[1])throw new ze(2,3,3001);for(o=r=0;o<t.length;o++){var i=t[o];r=0==o?i&(1<<8-t.length)-1:256*r+i}t=r}return t=e.g.Pa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Pa(),r=je(e.h,e.g.Pa(),t),e.g.skip(t),new fg(n,r)}function ug(e){var t=e.g.Pa(),n=e.g.Y();if(0==n)throw new ze(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ue(e.h,t,n)}sg.prototype.Ia=function(){return this.g.Ia()};var cg=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function fg(e,t){this.id=e,this.g=t}function dg(e){if(e.g.byteLength>8)throw new ze(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new ze(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function pg(e){var t=new sg(e.g);if(179!=(e=lg(t)).id)throw new ze(2,3,3013);if(e=dg(e),183!=(t=lg(t)).id)throw new ze(2,3,3012);t=new sg(t.g);for(var n=0;t.Ia();){var r=lg(t);if(241==r.id){n=dg(r);break}}return{kl:e,Lk:n}}function hg(e,t,n){if(!(t=og(e,t,"Initialization")))return null;var r=e.L.cb(),o=t.attributes.sourceURL;o&&(r=ot(r,[$e(o)],e.Mb())),o=0;var i=null;return(t=tn(t,"range",ln))&&(o=t.start,i=t.end),(n=new za(function(){return r},o,i,xg(e),null,null,n,e.qa.encrypted)).codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.df&&(n.g=e.na.start+e.na.duration),n}function mg(e,t,n){var r=Number(rg(e,yg,"presentationTimeOffset"))||0,o=rg(e,yg,"timescale"),i=1;o&&(i=cn(o)||1);var a=r/i||0,s=hg(e,yg,n);!function(e,t){if(bg(e,t),!vg(e))throw new ze(2,4,4002)}(e,s);var l=Vt(e);return{endTime:-1,timeline:-1,Sc:function(){var e=og(l,yg,"RepresentationIndex"),n=l.L.cb();return e&&(e=$e(e.attributes.sourceURL))&&(n=ot(n,[e],l.Mb())),e=vg(l),gg(l,t,s,n,e.start,e.end,a)},timescale:i}}function gg(e,t,n,r,o,i,a){var s,l,u,c,f,d,p,h,g,y,v,b,x,w,T,k,C,A;return O(function(E){if(1==E.g)return s=e.presentationTimeline,l=!e.Fb||!e.na.df,u=e.na.start,c=e.na.duration,f=e.L.mimeType.split("/")[1],p=null,h=[(d=t)(r,o,i,!1),"webm"==f?d(n.P(),n.startByte,n.endByte,!0):null],d=null,S(E,Promise.all(h),2);if(g=E.h,y=g[0],v=g[1]||null,x=u-a,w=u,T=c?u+c:1/0,"mp4"==f)var I=ag(y,o,r,n,x,w,T);else{I=y;var M=new sg(v);if(440786851!=lg(M).id)throw new ze(2,3,3008);var R=lg(M);if(408125543!=R.id)throw new ze(2,3,3009);M=R.g.byteOffset,R=new sg(R.g);for(var _=null;R.Ia();){var L=lg(R);if(357149030==L.id){_=L;break}}if(!_)throw new ze(2,3,3010);for(_=new sg(_.g),L=1e6,R=null;_.Ia();){var P=lg(_);if(2807729==P.id)L=dg(P);else if(17545==P.id)if(4==P.g.byteLength)R=P.g.getFloat32(0);else{if(8!=P.g.byteLength)throw new ze(2,3,3003);R=P.g.getFloat64(0)}}if(null==R)throw new ze(2,3,3011);if(R*=_=L/1e9,475249515!=(I=lg(new sg(I))).id)throw new ze(2,3,3007);I=function(e,t,n,r,o,i,a,s,l){function u(){return o}var c=[];e=new sg(e.g);for(var f=null,d=null;e.Ia();){var p=lg(e);if(187==p.id){var h=pg(p);h&&(p=n*h.kl,h=t+h.Lk,null!=f&&c.push(new Ha(f+a,p+a,u,d,h-1,i,a,s,l)),f=p,d=h)}}return null!=f&&c.push(new Ha(f+a,r+a,u,d,null,i,a,s,l)),c}(I,M,_,R,r,n,x,w,T)}for(k=m(b=I),C=k.next();!C.done;C=k.next())(A=C.value).codecs=e.L.codecs,A.mimeType=e.L.mimeType,A.bandwidth=e.bandwidth;return s.ge(b),p=new Pl(b),l&&p.pd(w,T,!0),E.return(p)})}function yg(e){return e.Hd}function vg(e){var t=og(e,yg,"RepresentationIndex");return e=ln((e=rg(e,yg,"indexRange"))||""),t&&(e=tn(t,"range",ln,e)),e}function bg(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=ct&&"mp4"!=n&&"webm"!=n)throw new ze(2,4,4006);if("webm"==n&&!t)throw new ze(2,4,4005)}function xg(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.tf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function wg(e,t,n){var r=hg(e,Sg,n),o=function(e){var t=function(e){return[e.L.zc,e.qa.zc,e.sa.zc].filter(Ar).map(function(e){return $t(e,"SegmentURL")}).reduce(function(e,t){return e.length>0?e:t}).map(function(t){return t.attributes.indexRange&&!e.Lg&&(e.Lg=!0),{Ak:$e(t.attributes.media),start:(t=tn(t,"mediaRange",ln,{start:0,end:null})).start,end:t.end}})}(e),n=(e=tg(e,Sg)).oe;0==n&&(n=1);var r=0;return e.fb?r=e.fb*(n-1):e.timeline&&e.timeline.length>0&&(r=e.timeline[0].start),{fb:e.fb,startTime:r,oe:n,Jb:e.Jb,timescale:e.timescale,timeline:e.timeline,yd:t}}(e);if(!o.fb&&!o.timeline&&o.yd.length>1)throw new ze(2,4,4002);if(!o.fb&&!e.na.duration&&!o.timeline&&1==o.yd.length)throw new ze(2,4,4002);if(o.timeline&&0==o.timeline.length)throw new ze(2,4,4002);var i=null,a=null;e.sa.id&&e.L.id&&(a=t.get(e.sa.id+","+e.L.id))&&(i=a.segmentIndex);var s=function(e,t,n,r,o,i,a,s,l,u){var c=r.yd.length;r.timeline&&r.timeline.length!=r.yd.length&&(c=Math.min(r.timeline.length,r.yd.length));for(var f=e-r.Jb,d=t?e+t:1/0,p=[],h=r.startTime,m={},g=0;g<c;m={Of:void 0,Df:void 0},g++){m.Df=r.yd[g];var y=h;h=void 0,h=null!=r.fb?y+r.fb:r.timeline?r.timeline[g].end:y+t,m.Of=null,(m=new Ha(e+y,e+h,function(e){return function(){return null==e.Of&&(e.Of=ot(n(),[e.Df.Ak],u())),e.Of}}(m),m.Df.start,m.Df.end,o,f,e,d,[],"",null,null,qa,i)).codecs=s,m.mimeType=a,m.bandwidth=l,p.push(m)}return p}(e.na.start,e.na.duration,e.L.cb,o,r,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Mb);return t=!i,i?i.ee(s,e.presentationTimeline.Ib()):i=new Pl(s),e.presentationTimeline.ge(s),e.Fb&&e.na.df||i.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),a&&(a.segmentIndex=i),{endTime:-1,timeline:-1,Sc:function(){return i&&0!=i.getNumReferences()||i.mf(s),Promise.resolve(i)},timescale:o.timescale}}function Sg(e){return e.zc}function Tg(t,n,r,o,i,a,s,l,u,c){u||t.L.bf||(t.L.bf=rg(t,kg,"initialization"));var f=t.L.bf?function(e,t){var n=e.L.bf;if(n||(n=rg(e,kg,"initialization")),!n)return null;n=$e(n);var r=e.L.originalId,o=e.bandwidth||null,i=e.L.cb,a=e.Mb;return t=new za(function(){var e=eg(n,r,null,null,o,null);return ot(i(),[e],a())},0,null,xg(e),null,null,t,e.qa.encrypted),t.codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.df&&(t.g=e.na.start+e.na.duration),t}(t,s):null,d=function(e){var t=tg(e,kg),n=rg(e,kg,"media"),r=rg(e,kg,"index"),o=rg(e,kg,"k"),i=0;return o&&(i=parseInt(o,10)),{Mf:t.Mf,fb:t.fb,timescale:t.timescale,oe:t.oe,Jb:t.Jb,gd:t.gd,timeline:t.timeline,$b:n&&$e(n),$d:r,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,Bk:i}}(t);!function(e){var t=e.$d?1:0;if(t+=e.timeline?1:0,0==(t+=e.fb?1:0))throw new ze(2,4,4002);if(1!=t&&(e.$d&&(e.timeline=null),e.Mf=null,e.fb=null),!e.$d&&!e.$b)throw new ze(2,4,4002)}(d);var p=Vt(t);if(d.$d)return bg(t,f),{endTime:-1,timeline:-1,Sc:function(){var e=eg(d.$d,p.L.originalId,null,null,p.bandwidth||null,null);return e=ot(p.L.cb(),[e]),gg(p,n,f,e,0,null,d.Jb)},timescale:d.timescale};if(d.fb)return o||"image"===t.qa.contentType||"text"===t.qa.contentType||(o=t.na.start,c=t.sa.id,r=t.na.duration,c=(c=null!=c&&a.get(c)||r)?o+c:1/0,t.presentationTimeline.Tg(d.fb),t.presentationTimeline.zi(o,c)),{endTime:-1,timeline:-1,Sc:function(){return function(t,n,r,o,i,a,s,l){function u(r){var i=r-v,s=i*y,u=n.Mf,c=i*u;"BigInt"in e&&c>Number.MAX_SAFE_INTEGER&&(c=BigInt(i)*BigInt(u)),i=(s+=p)+y,u=Math.min(i,f());var d=[],h=n.Bk;if(h)for(var m=(u-s)/h,g={},C=0;C<h;g={Wi:void 0},C++){var A=s+m*C,E=A+m;g.Wi=C,(g=new Ha(A,E,function(e){return function(){var t=eg(b,w,r,e.Wi,x,c);return ot(S(),[t],T())}}(g),0,null,o,k,p,f(),[],"",null,null,qa,a)).codecs=t.L.codecs,g.mimeType=t.L.mimeType,0==l?C>0&&g.wd():C%l!=0&&g.wd(),d.push(g)}return(s=new Ha(s,u,function(){if(h)return[];var e=eg(b,w,r,null,x,c);return ot(S(),[e],T())},0,null,o,k,p,f(),d,"",null,null,qa,a,d.length>0)).codecs=t.L.codecs,s.mimeType=t.L.mimeType,s.bandwidth=t.bandwidth,s.j=i,s}function c(){var e=[Math.max(d.Ib(),p),Math.min(d.Ic(),f())].map(function(e){return e-p});return e=[Math.ceil(e[0]/y),Math.ceil(e[1]/y)-1],t.L.ub&&e[1]++,e.map(function(e){return e+v})}function f(){var e=null!=h&&i.get(h)||g;return e?p+e:1/0}var d=t.presentationTimeline,p=t.na.start,h=t.sa.id,g=t.na.duration,y=n.fb,v=n.oe,b=n.$b,x=t.bandwidth||null,w=t.L.originalId,S=t.L.cb,T=t.Mb,k=p-n.Jb,C=c();r=t.Fb?Math.max(C[0],C[1]-r+1):C[0],s=s||C[1],C=[];for(var A=r;A<=s;++A){var E=u(A);C.push(E)}var I=new Pl(C);if(C=d.Ic()<f(),A=d.W(),C||A){var M=Math.max(r,s+1);r=y,t.L.ub&&(r=.1),I.Nf(r,function(){var e=d.Ib();I.Ya(e);var t=m(c());t.next(),t=t.next().value;for(var n=[];M<=t;){var r=u(M);n.push(r),M++}return e>f()&&!n.length?null:n})}return Promise.resolve(I)}(p,d,i,f,a,s,l,t.L.Ef)},timescale:d.timescale};var h=null;o=o=null,t.sa.id&&t.L.id&&(o=t.sa.id+","+t.L.id,o=r.get(o))&&(h=o.segmentIndex);var g=t.na.start,y=t.na.duration?g+t.na.duration:1/0;if(h)Ag(c=h,d,g,y,f,t.Fb),c.Ya(t.presentationTimeline.Ib());else{if(r=0,u=-1,null!=t.sa.id&&null!=t.L.id){var v=c.get(t.sa.id);if(v)u=v.timeline;else for(v=(c=m(c.values())).next();!v.done;v=c.next()){if(v=v.value,Math.abs(d.Jb-v.endTime)<=dt&&v.dh.includes(t.L.id)){u=v.timeline;break}v.timeline>=r&&(r=v.timeline+1)}}-1==u&&(u=r),h=new Cg(t.Fb,d,t.L.originalId,t.bandwidth,t.L.cb,t.Mb,g,y,f,s,t.L.Ef,u)}return d.timeline&&"image"!==t.qa.contentType&&"text"!==t.qa.contentType&&t.presentationTimeline.Ai(h.h?h.h.timeline:[],g),o&&t.Fb&&(o.segmentIndex=h),o=(o=(o=d.timeline)&&o[o.length-1])?o.end+d.Jb:-1,c=-1,h instanceof Cg&&(c=h.Se()),{endTime:o,timeline:c,Sc:function(){return h instanceof Cg&&0==h.getNumReferences()&&Ag(h,d,g,y,f,t.Fb),Promise.resolve(h)},timescale:d.timescale}}function kg(e){return e.Nc}function Cg(e,t,n,r,o,i,a,s,l,u,c,f){Pl.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=r,this.G=o,this.J=i,this.j=a,this.l=s,this.u=l,this.B=u,this.I=c,this.K=f,Eg(this)}function Ag(e,t,n,r,o,i){if(function(e,t){if(e.u!==t){e.u=t;for(var n=(e=m(e.g)).next();!n.done;n=e.next())(n=n.value)&&Ga(n,t)}}(e,o),e.F=i,e.h){if(e.h.gd!==t.gd&&(e.h.timeline=t.timeline,e.h.gd=t.gd,e.h.Jb=t.Jb),e.h.$b!==t.$b&&(e.h.$b=t.$b),(n=e.h.timeline).length){var a=n[n.length-1];t=t.timeline.filter(function(e){return e.end>a.end})}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,g(t)),e.l!==r&&(e.l=r)}else e.h=t,e.j=n,e.l=r;Eg(e)}function Eg(e){if(e.h&&!e.o){for(var t=[],n=m(e.h.timeline),r=n.next();!r.done;r=n.next())(r=r.value).start>=e.l||r.end<=0||t.push(r);e.h.timeline=t,e.Ya(e.j)}}function Ig(e,t,n,r,o,i,a,s){return e=eg(e,t,n,i,r||null,o),ot(a(),[e],s()).map(function(e){return e.toString()})}function Mg(e){this.o=null,this.B=e,this.H=new Fo,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}function Rg(e,t){var n,r,o,i,a,s,l;return O(function(u){return 1==u.g?(n=ot(e.i,[_g(e,t)]),r=qo(n,e.o.retryParameters),o=e.B.networkingEngine.request(8,r),zo(e.H,o),C(u,2),S(u,o.promise,4)):2!=u.g?(i=u.h,a=He(i.data),1==(s=JSON.parse(a)).VERSION&&function(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new Tr(function(){Rg(e,r)}),(n=t.TTL)&&(e.F=n),e.g.ka(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}(e,s,i.uri),E(u,0)):(l=I(u))&&7001==l.code?u.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new Tr(function(){Rg(e,t)}),e.g.ka(e.F),void k(u))})}function _g(e,t){if(!e.m.length)return t;t=new ve(t);var n=e.C||e.m[0],r=Math.round(e.B.getBandwidthEstimate()),o=t.g;return"DASH"==e.u?(o.add("_DASH_pathway",n),o.add("_DASH_throughput",String(r))):"HLS"==e.u&&(o.add("_HLS_pathway",n),o.add("_HLS_throughput",String(r))),Pe(o)&&Se(t,o),t.toString()}function Lg(e,t,n,r){var o=e.l.get(t);o||(o=new Map),o.set(n,r),e.l.set(t,o)}function Pg(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var r=[],o=m(e.m),i=o.next(),a={};!i.done;a={Bd:void 0},i=o.next())if(a.Bd=i.value,i=t.get(a.Bd))r.push({Yg:a.Bd,location:i});else if(i=e.G.find(function(e){return function(t){return t.Nl==e.Bd}}(a))){var s=t.get(i["BASE-ID"]);s&&(i["URI-REPLACEMENT"].hj?(xe(s=new ve(s),i["URI-REPLACEMENT"].hj),r.push({Yg:a.Bd,location:s.toString()})):r.push({Yg:a.Bd,location:s}))}for(o=Date.now(),i=(a=m(e.j.keys())).next();!i.done;i=a.next())i=i.value,o>(s=e.j.get(i))&&e.j.delete(i);if(r=r.filter(function(t){for(var n=m(e.j.keys()),r=n.next();!r.done;r=n.next())if(r.value.includes(new ve(t.location).Eb))return!1;return!0}),r.length&&(e.C=r[0].Yg),r=r.map(function(e){return e.location}),!r.length&&e.h)for(a=(o=m(e.h.split(","))).next();!a.done;a=o.next())(a=t.get(a.value))&&(e.C=e.h,r.push(a));if(!r.length)for(o=(t=m(t.values())).next();!o.done;o=t.next())r.push(o.value);return n?r:ot(e.i,r)}function Dg(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}function Og(e,t){for(var n=[],r=[],o=[],i=[],a=(e=m(e)).next();!a.done;a=e.next()){var s=a.value;a=new Map(s.audioStreams.map(function(e){return[ly(e),e]}));var l=new Map(s.videoStreams.map(function(e){return[sy(e),e]})),u=new Map(s.textStreams.map(function(e){return[uy(e),e]}));if(s=new Map(s.imageStreams.map(function(e){return[cy(e),e]})),t){var c=ny(ct);u.set(uy(c),c),c=ny("image"),s.set(cy(c),c)}n.push(a),r.push(l),o.push(u),i.push(s)}return{Nh:n,fj:r,bj:o,ji:i}}function Ng(e){var t,n,r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w,T,k,C,A,E,I,M,R,_;return O(function(L){switch(L.g){case 1:if(t=ft,1==e.length)return L.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ia}).map(function(e){return[ly(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Ca}).map(function(e){return[sy(e),e]}))}),o=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Na}).map(function(e){return[uy(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Uf}).map(function(e){return[cy(e),e]}))}),a=m(o),s=a.next();!s.done;s=a.next())l=s.value,u=ty(t.Na),l.set(uy(u),u);for(c=m(i),f=c.next();!f.done;f=c.next())d=f.value,p=ty(t.Uf),d.set(cy(p),p);return S(L,Ug(h=new Dg,[],n,0,Vg,Gg,0),2);case 2:return g=L.h,S(L,Ug(h,[],r,0,Vg,Gg,0),3);case 3:return y=L.h,S(L,Ug(h,[],o,0,Vg,Gg,0),4);case 4:return v=L.h,S(L,Ug(h,[],i,0,Vg,Gg,0),5);case 5:if(b=L.h,x=0,y.length&&g.length)for(C=m(g),A=C.next();!A.done;A=C.next())for(E=A.value,I=m(y),M=I.next();!M.done;M=I.next())R=M.value,_=x++,R.variantIds.push(_),E.variantIds.push(_);else for(w=y.concat(g),T=m(w),k=T.next();!k.done;k=T.next())k.value.variantIds=[x++];return L.return(y.concat(g).concat(v).concat(b))}})}function Ug(e,t,n,r,o,i,a){var s,l,u,c,f,d,p,h,g,y,v,b,x,w,T,k,C,A;return O(function(E){switch(E.g){case 1:for(s=[],l=0;l<n.length;l++)l>=r?s.push(new Set(n[l].values())):s.push(new Set);u=m(t),c=u.next();case 2:if(c.done){E.A(4);break}return f=c.value,S(E,function(e,t,n,r,o,i,a){return O(function(s){return 1==s.g?(qg(e,n,t,a>0),t.matchedStreams?t.segmentIndex?S(s,Bg(t,r+a),2):s.A(2):s.return(!1)):(Fg(t,r,o,i,a),s.return(!0))})}(e,f,n,r,i,s,a),5);case 5:if(!E.h)throw new ze(2,4,4037);c=u.next(),E.A(2);break;case 4:for(d=m(s),p=d.next();!p.done;p=d.next())for(h=p.value,g=m(h),y=g.next();!y.done;y=g.next())v=y.value,(b=jg(e,v,n,o,i,s))&&t.push(b);for(x=m(s),w=x.next();!w.done;w=x.next())for(T=w.value,k=m(T),C=k.next(),A={};!C.done;A={uh:void 0},C=k.next())if(A.uh=C.value,!ay(A.uh)&&t.some(function(e){return function(t){return Xg(e.uh,t)}}(A)))throw new ze(2,4,4037);return E.return(t)}})}function Bg(e,t){var n,r,o,i,a,s;return O(function(l){if(1==l.g){for(n=[],r=e.matchedStreams,o=t;o<r.length;o++)i=r[o],n.push(i.createSegmentIndex()),i.trickModeVideo&&!i.trickModeVideo.segmentIndex&&n.push(i.trickModeVideo.createSegmentIndex()),i.dependencyStream&&!i.dependencyStream.segmentIndex&&n.push(i.dependencyStream.createSegmentIndex());return S(l,Promise.all(n),2)}if(e.segmentIndex instanceof Ul)for(a=t;a<r.length;a++)(s=r[a]).segmentIndex&&e.segmentIndex.h.push(s.segmentIndex);k(l)})}function jg(e,t,n,r,o,i){if(ay(t))return null;var a=r(t);return qg(e,n,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return O(function(e){return a.segmentIndex?e.A(0):(a.segmentIndex=new Ul,S(e,Bg(a,0),0))})}),a.matchedStreams&&a.matchedStreams.length?(Fg(a,0,o,i,0),a):null}function Fg(e,t,n,r,o){var i=e.matchedStreams;for(t+=o;t<i.length;t++){var a=i[t];n(e,a);var s=!0;if("audio"==e.type&&0==Pr(e.language,a.language)&&(s=!1),s&&(r[t-o].delete(a),a.fullMimeTypes))for(s=(a=m(a.fullMimeTypes.values())).next();!s.done;s=a.next())e.fullMimeTypes.add(s.value)}}function zg(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=m(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function Vg(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function Hg(e,t){function n(e,t){e||(e=[]);for(var n=(t=m(t)).next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),o=r.next();!o.done;o=r.next())e.keyIds.add(o.value);if(null==e.originalId?e.originalId=t.originalId:(r=t.originalId||"")&&!e.originalId.endsWith(r)&&(e.originalId+=","+r),r=xo(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new ze(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),o=(r=m(t.closedCaptions)).next();!o.done;o=r.next()){var i=m(o.value);o=i.next().value,i=i.next().value,e.closedCaptions.set(o,i)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=zg(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var t=new Ul,n=m(e.trickModeVideo.matchedStreams),r=n.next();!r.done;r=n.next())t.h.push(r.value.segmentIndex);return e.trickModeVideo.segmentIndex=t,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),Hg(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),Hg(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=zg(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var t=new Ul,n=m(e.dependencyStream.matchedStreams),r=n.next();!r.done;r=n.next())t.h.push(r.value.segmentIndex);return e.dependencyStream.segmentIndex=t,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),Hg(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),Hg(e.dependencyStream,t))}function Gg(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),o=r.next();!o.done;o=r.next())o=o.value,n.includes(o)||n.push(o);for(e.roles=n,r=(n=m(t.keyIds)).next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,g(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=m(t.closedCaptions)).next();!n.done;n=t.next())n=(r=m(n.value)).next().value,r=r.next().value,e.closedCaptions.set(n,r)}function qg(e,t,n,r){r=void 0!==r&&r?n.matchedStreams:[];for(var o=(t=m(t)).next();!o.done;o=t.next()){if(!(o=Wg(e,o.value,n)))return;r.push(o)}n.matchedStreams=r}function Wg(e,t,n){var r={audio:ly,video:sy,text:uy,image:cy}[n.type],o=null,i=r(n);if(t.has(i))o=t.get(i);else{i={audio:function(e,t){return Xg(e,t)},video:function(e,t){return Xg(e,t)},text:$g,image:Yg}[n.type];for(var a={audio:Jg,video:Qg,text:Zg,image:ey}[n.type],s=m(t.values()),l=s.next();!l.done;l=s.next())!i(n,l=l.value)||n.fastSwitching!=l.fastSwitching||o&&!a(n,o,l)||(o=l)}return e.o&&!ay(o)&&t.delete(r(o)),o}function Kg(e,t){return e.mimeType==t.mimeType&&dy(e.codecs)===dy(t.codecs)}function Xg(e,t){return!(e.drmInfos&&!bo(e.drmInfos,t.drmInfos))}function $g(e,t){return!t.language||e.forced===t.forced&&0!=Pr(e.language,t.language)&&t.kind==e.kind}function Yg(){return!0}function Jg(e,t,n){var r=oy(e,t,n);if(r===py)return!0;if(r===my)return!1;r=Pr(e.language,t.language);var o=Pr(e.language,n.language);if(o>r)return!0;if(o<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),(o=n.roles.filter(function(t){return e.roles.includes(t)})).length>r.length)return!0;if(o.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=ry(e.channelsCount,t.channelsCount,n.channelsCount))==py||r!=my&&((r=ry(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==py||r!=my&&!(!e.bandwidth||iy(e.bandwidth,t.bandwidth,n.bandwidth)!=py)))}function Qg(e,t,n){var r=oy(e,t,n);if(r===py)return!0;if(r===my)return!1;if((r=ry(e.width*e.height,t.width*t.height,n.width*n.height))==py)return!0;if(r==my)return!1;if(e.frameRate){if((r=ry(e.frameRate,t.frameRate,n.frameRate))==py)return!0;if(r==my)return!1}return!(!e.bandwidth||iy(e.bandwidth,t.bandwidth,n.bandwidth)!=py)}function Zg(e,t,n){var r=Pr(e.language,t.language),o=Pr(e.language,n.language);if(o>r)return!0;if(o<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),(o=n.roles.filter(function(t){return e.roles.includes(t)})).length>r.length)return!0;if(o.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function ey(e,t,n){return ry(e.width*e.height,t.width*t.height,n.width*n.height)==py}function ty(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function ny(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pl([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function ry(e,t,n){if(t==e&&e!=n)return my;if(n==e&&e!=t)return py;if(t>e){if(n<=e||n-e<t-e)return py;if(n-e>t-e)return my}else{if(n>e)return my;if(e-n<e-t)return py;if(e-n>e-t)return my}return hy}function oy(e,t,n){var r=e.mimeType===t.mimeType&&e.codecs===t.codecs,o=e.mimeType===n.mimeType&&e.codecs===n.codecs;return r&&!o?my:!r&&o?py:(t=Kg(e,t),e=Kg(e,n),t&&!e?my:!t&&e?py:hy)}function iy(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?py:t<e?my:hy}function ay(e){switch(e.type){case ct:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function sy(e){return fy([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function ly(e){return fy([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function uy(e){return fy([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function cy(e){return fy([e.width,e.codecs,e.mimeType])}function fy(e){return JSON.stringify(e)}function dy(e){if(!gy.has(e)){var t=lr(e);gy.set(e,t)}return gy.get(e)}p(Cg,Pl),(o=Cg.prototype).getNumReferences=function(){return this.h?this.h.timeline.length:0},o.release=function(){Pl.prototype.release.call(this),this.h=null},o.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.j<=e;r+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.getNumReferences()&&this.release())}},o.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var o=t[r],i=o.start+this.j;if(o=r<n?t[r+1].start+this.j:this.l===1/0?o.end+this.j:this.l,e>=i&&e<o)return r+this.i}return null},o.get=function(e){var t=this;if((e-=this.i)<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=(n=this.h.timeline[e]).Tk,o=n.Fh+this.h.gd,i=this.j-this.h.Jb,a=this.j+n.end,s=a;e===this.getNumReferences()-1&&this.l!==1/0&&(s=this.F&&Math.abs(s-this.l)>.1?Math.min(s,this.l):this.l);var l=this.h.codecs,u=this.h.mimeType,c=this.h.bandwidth,f=[],d=!1;if(n.vc&&this.h&&this.h.$b&&(d=this.h.$b.includes("$SubNumber$")),d){d=(n.end-n.start)/n.vc;for(var p={},h=0;h<n.vc;p={Pf:void 0,Xi:void 0},h++){var m=n.start+d*h,g=m+d;p.Xi=h,p.Pf=null,(p=new Ha(this.j+m,this.j+g,function(e){return function(){return t.h?(null==e.Pf&&(e.Pf=Ig(t.h.$b,t.H,r,t.C,o,e.Xi,t.G,t.J)),e.Pf):[]}}(p),0,null,this.u,i,this.j,this.l,[],"",null,null,qa,this.B)).codecs=l,p.mimeType=u,p.bandwidth=c,0==this.I?h>0&&p.wd():h%this.I!=0&&p.wd(),f.push(p)}}(n=new Ha(this.j+n.start,s,function(){return f.length>0||!t.h?[]:Ig(t.h.$b,t.H,r,t.C,o,null,t.G,t.J)},0,null,this.u,i,this.j,this.l,f,"",null,null,qa,this.B,f.length>0)).codecs=l,n.mimeType=u,n.j=a,n.bandwidth=c,this.g[e]=n}return n},o.Gb=function(e){Eg(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}},o.Se=function(){return this.K},Mg.prototype.configure=function(e){this.o=e},Mg.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.H.destroy()},Mg.prototype.setManifestType=function(e){this.u=e},Mg.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},(o=Dg.prototype).release=function(){for(var e=m(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},o.ck=function(){return this.l},o.Jg=function(){return this.j.slice()},o.Hj=function(){return this.i},o.Uh=function(e,t){if(e){if("audio"==e.type)for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter(function(t){return t!==e});else if("video"==e.type)for(r=(n=m(this.g)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter(function(t){return t!==e}),r.trickModeVideo&&(r.trickModeVideo.matchedStreams=r.trickModeVideo.matchedStreams.filter(function(t){return t!==e})),r.dependencyStream&&(r.dependencyStream.matchedStreams=r.dependencyStream.matchedStreams.filter(function(t){return t!==e}));else if(e.type==ct)for(r=(n=m(this.j)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter(function(t){return t!==e});else if("image"==e.type)for(r=(n=m(this.i)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter(function(t){return t!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}},o.hg=function(e,t,n){n=void 0!==n&&n;var r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w,T,C,A,E,I,M,R,_,L,P,D,N,U,B,j=this;return O(function(O){if(1==O.g){if(r=ft,!t&&1==e.length)return o=Og(e,!1),i=o.Nh,a=o.fj,s=o.bj,l=o.ji,j.h=Array.from(i[0].values()),j.g=Array.from(a[0].values()),j.j=Array.from(s[0].values()),j.i=Array.from(l[0].values()),O.A(2);for(u=n?j.m.size:0,c=-1,f=0;f<e.length;f++)d=e[f],j.m.has(d.id)||(j.m.add(d.id),-1==c&&(c=f));return-1==c?O.return():(p=Og(e,!0),h=p.Nh,g=p.fj,y=p.bj,v=p.ji,S(O,Promise.all([Ug(j,j.h,h,c,zg,Hg,u),Ug(j,j.g,g,c,zg,Hg,u),Ug(j,j.j,y,c,zg,Hg,u),Ug(j,j.i,v,c,zg,Hg,u)]),2))}if(b=0,x=[],j.g.length&&j.h.length)for(M=m(j.h),R=M.next();!R.done;R=M.next())for(_=R.value,L=m(j.g),P=L.next();!P.done;P=L.next())D=P.value,N=xo(_.drmInfos,D.drmInfos),_.drmInfos.length&&D.drmInfos.length&&!N.length||(U=(_.bandwidth||0)+(D.bandwidth||0),_.dependencyStream&&(U+=_.dependencyStream.bandwidth||0),D.dependencyStream&&(U+=D.dependencyStream.bandwidth||0),B=b++,x.push({id:B,language:_.language,disabledUntilTime:0,primary:_.primary,audio:_,video:D,bandwidth:U,drmInfos:N,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(w=j.g.length?j.g:j.h,T=m(w),C=T.next();!C.done;C=T.next())A=C.value,E=b++,I=A.bandwidth||0,A.dependencyStream&&(I+=A.dependencyStream.bandwidth||0),x.push({id:E,language:A.language,disabledUntilTime:0,primary:A.primary,audio:A.type==r.ia?A:null,video:A.type==r.Ca?A:null,bandwidth:I,drmInfos:A.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});j.l=x,k(O)})},o.Ri=function(e){this.o=e},H("shaka.util.PeriodCombiner",Dg),Dg.prototype.setUseStreamOnce=Dg.prototype.Ri,Dg.prototype.combinePeriods=Dg.prototype.hg,Dg.prototype.deleteStream=Dg.prototype.Uh,Dg.prototype.getImageStreams=Dg.prototype.Hj,Dg.prototype.getTextStreams=Dg.prototype.Jg,Dg.prototype.getVariants=Dg.prototype.ck;var py=1,hy=0,my=-1,gy=new Map;function yy(e,t){try{return function(e,t){var n=new DOMParser,r=vy.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(o){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}(qe(e),t)}catch(n){return null}}var vy=new se(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});function by(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Ga=1,this.H=[],this.l={pf:"",type:"",profiles:[],sc:null,ub:0,cb:null,je:0},this.u=new Map,this.C=new Map,this.o=new Map,this.F=new Map,this.ya=new Map,this.m=new Dg,this.K=0,this.Da=new G(5),this.M=new Tr(function(){e.J&&!e.g.continueLoadingWhenPaused&&(e.I.Ma(e.J,"timeupdate"),e.J.paused)?e.I.Aa(e.J,"timeupdate",function(){return Dy(e)}):Dy(e)}),this.R=new Fo,this.O=null,this.G=[],this.ba=1/0,this.wa=!1,this.i=null,this.N=0,this.S=!1,this.I=new oe,this.J=null,this.V=!1,this.$="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.xa=new $m}function xy(e){var t,n,r,o,i,a,s,l,u,c,f;return O(function(d){return 1==d.g?(t=4,n="MPD",r=function(e){var t=e.l.je;if(!e.l.pf||!t||!e.H.length)return[];var n=Date.now()/1e3,r=e.H.filter(function(e){return!(e=fn(e.attributes.ttl))||t+e>n}).map(Jt).filter(Ar);return r.length?ot(e.B,r):[]}(e),o=e.B,r.length?(o=r,n="Patch",t=6):e.B.length>1&&e.i&&(i=Pg(e.i,"Location",!0)).length&&(o=i),a=qo(o,e.g.retryParameters),s=Date.now(),S(d,zy(e,a,0,{type:t}),2)):3!=d.g?(l=d.h,e.j?(l.uri&&l.uri!=l.originalUri&&!e.B.includes(l.uri)&&e.B.unshift(l.uri),u=new ve(l.uri),e.$=u.g.toString(),S(d,function(e,t,n,r){var o,i,a,s,l,u,c,f;return O(function(d){if(1==d.g){if(o=t,(i=e.g.dash.manifestPreprocessor)!=rc){if(pe("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),!(a=yy(o,r)))throw new ze(2,4,4001,n);i(a),o=We(a.outerHTML)}if(!(s=Gt(o,r)))throw new ze(2,4,4001,n);return(l=e.g.dash.manifestPreprocessorTXml)!=oc&&l(s),"Patch"===r?d.return(function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,y,v,b,x,w,T,C,A,E,I,M;return O(function(R){if(1==R.g){if(n=t.attributes.mpdId,r=tn(t,"originalPublishTime",an),!n||n!==e.l.pf||r!==e.l.je)throw e.H=[],new ze(1,4,4052);for(o=[],i=[],a=new Set,s=m(Xt(t)),l=s.next();!l.done;l=s.next())if(u=l.value,c=mn(u.attributes.sel||""),f=c[c.length-1],d=Jt(u)||"","MPD"===f.name)if("mediaPresentationDuration"===f.Cc){var _=sn(Jt(u)||"");if(null!=_){e.l.sc=_;for(var L=m(e.u.values()),P=L.next();!P.done;P=L.next())P.value.sc=_}}else if("type"===f.Cc){for(e.h.presentationTimeline.cd("static"==d),e.l.type=d,L=(_=m(e.u.values())).next();!L.done;L=_.next())L.value.Fb="dynamic"==d;"static"==d&&(e.K=-1)}else"publishTime"===f.Cc?e.l.je=an(d)||0:null===f.Cc&&"add"===u.tagName&&i.push(u);else if("PatchLocation"===f.name)gn(e.H,u);else if("Period"===f.name)"add"===u.tagName?i.push(u):"remove"===u.tagName&&f.id&&ky(e,f.id);else if("SegmentTemplate"===f.name){if((_=(L=mn(u.attributes.sel||""))[L.length-1]).Cc){L=Cy(e,L),P=Jt(u)||"";for(var D=m(L),O=D.next();!O.done;O=D.next())vn((O=e.u.get(O.value)).L.Nc,u.tagName,_.Cc,P);_=L}else _=[];for(p=m(_),h=p.next();!h.done;h=p.next())y=h.value,a.add(y)}else if("SegmentTimeline"===f.name||"S"===f.name){for(_=mn(u.attributes.sel||""),P=(L=m(_=Cy(e,_))).next();!P.done;P=L.next())gn(D=$t(P=og(P=e.u.get(P.value),kg,"SegmentTimeline"),"S"),u),P.children=D;for(v=m(_),b=v.next();!b.done;b=v.next())x=b.value,a.add(x)}for(w=m(a),T=w.next();!T.done;T=w.next())C=T.value,Ay(e,C);for(A=m(i),E=A.next();!E.done;E=A.next())I=E.value,o.push.apply(o,g(Ty(e,I)));return o.length?(e.h.periodCount+=o.length,e.h.gapCount=e.N,S(R,Sy(e,o,!0),2)):R.A(2)}"static"==e.l.type&&(M=e.l.sc,e.h.presentationTimeline.rb(M||1/0)),k(R)})}(e,s)):e.g.dash.disableXlinkProcessing?d.return(wy(e,s,n)):(u=e.g.dash.xlinkFailGracefully,c=ig(s,e.g.retryParameters,u,n,e.j.networkingEngine),zo(e.R,c),S(d,c.promise,2))}return f=d.h,d.return(wy(e,f,n))})}(e,l.data,l.uri,n),3)):d.return(0)):(c=Date.now(),f=(c-s)/1e3,e.Da.sample(1,f),e.ma.clear(),d.return(f))})}function wy(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,y,v,b,x,w,T,A,M,R,_,L,P,D,N,U,B,j,F,z,V,H,G,q,W,K,X,Y,J,Q,Z,ee,te,ne,re,oe,ie,ae,se,le,ue,ce,fe;return O(function(de){switch(de.g){case 1:for(e.i&&e.i.l.clear(),r=[n],o=[],i=new Map,a=$t(t,"Location"),s=m(a),l=s.next();!l.done;l=s.next())u=l.value,c=u.attributes.serviceLocation,(f=Jt(u))&&(d=ot(r,[f])[0],c&&(e.i?Lg(e.i,"Location",c,d):i.set(c,d)),o.push(d));if(e.i?(p=Pg(e.i,"Location",!0)).length>0&&(r=e.B=p):o.length&&(r=e.B=o),e.l.pf=t.attributes.id||"",e.l.je=tn(t,"publishTime",an)||0,e.H=$t(t,"PatchLocation"),h=Promise.resolve(),(y=Zt(t,"ContentSteering"))&&e.j)for(v=y.attributes.defaultServiceLocation,e.i?(e.i.i=r,e.i.h=v):(e.i=new Mg(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=r,e.i.h=v,(b=Jt(y))&&(tn(y,"queryBeforeStart",pn,!1)?h=Rg(e.i,b):Rg(e.i,b))),x=m(i.keys()),w=x.next();!w.done;w=x.next())T=w.value,A=i.get(T),Lg(e.i,"Location",T,A);if(M=$t(t,"BaseURL"),R=!1,e.i)for(_=m(M),L=_.next();!L.done;L=_.next())P=L.value,D=P.attributes.serviceLocation,N=Jt(P),D&&N&&(Lg(e.i,"BaseURL",D,N),R=!0);if(e.X.splice(0),R&&e.i||(U=M.map(Jt),e.X.push.apply(e.X,g(ot(r,U)))),B=e.i,j=e.X,F=function(){return B&&R?Pg(B,"BaseURL"):j.slice()},e.l.cb=F,z=0,M&&M.length&&(z=tn(M[0],"availabilityTimeOffset",dn)||0),e.l.ub=z,e.K=tn(t,"minimumUpdatePeriod",sn,-1),V=tn(t,"availabilityStartTime",an),H=tn(t,"timeShiftBufferDepth",sn),G=e.g.dash.ignoreSuggestedPresentationDelay,q=null,G||(q=tn(t,"suggestedPresentationDelay",sn)),W=e.g.dash.ignoreMaxSegmentDuration,K=null,W||(K=tn(t,"maxSegmentDuration",sn)),X=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&"static"==X),e.l.type=X,e.h)for(Y=e.h.presentationTimeline,J=Y.Ib(),Q=m(e.o.values()),Z=Q.next();!Z.done;Z=Q.next())(ee=Z.value).segmentIndex&&ee.segmentIndex.Ya(J);else te=e.g.dash.ignoreMinBufferTime,ne=0,te||(ne=tn(t,"minBufferTime",sn)||0),re=null!=q?Math.min(q,H||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(1.5*ne,H||1/0),Y=new cl(V,re,e.g.dash.autoCorrectDrift);return Y.cd("static"==X),Y.W()&&!isNaN(e.g.availabilityWindowOverride)&&(H=e.g.availabilityWindowOverride),null==H&&(H=1/0),Y.Hf(H),oe=t.attributes.profiles||"",e.l.profiles=oe.split(","),ie={Fb:"static"!=X,presentationTimeline:Y,sa:null,na:null,qa:null,L:null,bandwidth:0,Lg:!1,ub:z,sc:null,profiles:oe.split(","),roles:null,Mb:function(){return""}},S(de,h,2);case 2:return e.N=0,ae=My(e,ie,F,t,!1),se=ae.duration,le=ae.periods,("static"!=X||e.V)&&ae.Wh||Y.rb(se||1/0),e.S&&e.wa&&Y.Oi(e.ba),Y.Tg(K||1),e.S&&e.wa&&(ue=null!=q?q:e.g.defaultPresentationDelay,Y.oh(ue)),e.h?(e.h.periodCount=le.length,e.h.gapCount=e.N,S(de,Sy(e,le,!1),4)):S(de,e.m.hg(le,ie.Fb),6);case 6:if(e.h={presentationTimeline:Y,variants:e.m.l,textStreams:e.m.Jg(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Ey(t),nextUrl:Iy(t),periodCount:le.length,gapCount:e.N,isLowLatency:e.S,startTime:null},!Y.ej()){de.A(7);break}return ce=$t(t,"UTCTiming"),S(de,function(e,t,n){var r,o,i,a,s,l,u,c;return O(function(f){switch(f.g){case 1:r=n.map(function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}}),o=e.g.dash.clockSyncUri,!r.length&&o&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:o}),i=m(r),a=i.next();case 2:if(a.done){f.A(4);break}switch(s=a.value,C(f,5),l=s.scheme,u=s.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return f.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return f.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(u),f.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":$("NTP UTCTiming scheme is not supported");break;default:$("Unrecognized scheme in UTCTiming element",l)}f.A(9);break;case 7:return S(f,Uy(e,t,u,"HEAD"),10);case 10:return f.return(f.h);case 8:return S(f,Uy(e,t,u,"GET"),11);case 11:return f.return(f.h);case 9:E(f,3);break;case 5:I(f);case 3:a=i.next(),f.A(2);break;case 4:return $("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),f.return(0)}})}(e,F,ce),8);case 8:if(fe=de.h,!e.j)return de.return();Y.Pi(fe);case 7:Y.kf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),function(e){for(var t=Array.from(e.F.keys()).filter(function(t){return!e.G.includes(t)}),n=(t=m(t)).next();!n.done;n=t.next()){n=n.value;for(var r=!0,o=m(e.F.get(n)),i=o.next();!i.done;i=o.next()){i=i.value;var a=e.o.get(i);a&&(a.segmentIndex&&0!=a.segmentIndex.getNumReferences()?r=!1:(e.m&&e.m.Uh(a,n),e.o.delete(i)))}r&&e.F.delete(n)}}(e),function(e,t){t=new Set(t.map(function(e){return e.id}));for(var n=m(e.C.keys()),r=n.next();!r.done;r=n.next())r=r.value,t.has(r)||e.C.delete(r)}(e,le),k(de)}})}function Sy(e,t,n){var r;return O(function(o){if(1==o.g)return S(o,e.m.hg(t,!0,n),2);e.h.variants=e.m.l,(r=e.m.Jg()).length>0&&(e.h.textStreams=r),e.h.imageStreams=e.m.i,e.j.filter(e.h),k(o)})}function Ty(e,t){return My(e,{Fb:"dynamic"==e.l.type,presentationTimeline:e.h.presentationTimeline,sa:null,na:null,qa:null,L:null,bandwidth:0,Lg:!1,ub:e.l.ub,profiles:e.l.profiles,sc:e.l.sc,roles:null,Mb:function(){return""}},e.l.cb,t,!0).periods}function ky(e,t){e.h.periodCount--;for(var n=m(e.u.keys()),r=n.next();!r.done;r=n.next())(r=r.value).startsWith(t)&&(og(e.u.get(r),kg,"SegmentTimeline").children=[],Ay(e,r),e.u.delete(r));e.G=e.G.filter(function(e){return e!==t})}function Cy(e,t){for(var n="",r="",o=-1,i="",a=(t=m(t)).next();!a.done;a=t.next())"Period"===(a=a.value).name?n=a.id:"AdaptationSet"===a.name?(r=a.id,null!==a.position&&(o=a.position)):"Representation"===a.name&&(i=a.id);if(t=[],i)t.push(n+","+i);else if(r)for(o=m(e.u.values()),e=o.next();!e.done;e=o.next())(e=e.value).sa.id===n&&e.qa.id===r&&e.L.id&&t.push(n+","+e.L.id);else if(o>-1)for(r=m(e.u.values()),e=r.next();!e.done;e=r.next())(e=e.value).sa.id===n&&e.qa.position===o&&e.L.id&&t.push(n+","+e.L.id);return t}function Ay(e,t){var n=e.u.get(t),r=e.o.get(t);r.segmentIndex&&r.segmentIndex.Ya(e.h.presentationTimeline.Ib());try{var o=Tg(n,function(t,n,r,o){return jy(e,t,n,r,o)},e.o,!0,e.g.dash.initialSegmentLimit,e.ya,n.L.aesKey,null,!0,e.C);r.createSegmentIndex=function(){return O(function(e){if(1==e.g)return r.segmentIndex?e.A(0):S(e,o.Sc(),3);r.segmentIndex=e.h,k(e)})}}catch(i){if((t=n.L.contentType)!=ct&&"application"!=t&&"image"!=t||4002!=i.code)throw i}}function Ey(e){var t=Zt(e,"ServiceDescription");if(!t)return null;if(e=Zt(t,"Latency"),t=Zt(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function Iy(e){if(!(e=$t(e,"SupplementalProperty")).length)return null;for(var t=(e=m(e)).next();!t.done;t=e.next())if("urn:mpeg:dash:chaining:2016"==(t=t.value).attributes.schemeIdUri)return t.attributes.value;return null}function My(e,t,n,r,o){var i=t.sc;i||(i=tn(r,"mediaPresentationDuration",sn),e.l.sc=i);var a=0;e.h&&e.h.presentationTimeline&&e.V&&(a=e.h.presentationTimeline.Xb());var s=[],l=a;r=$t(r,"Period");for(var u=0;u<r.length;u++){var c=r[u],f=r[u+1],d=tn(c,"start",sn,l),p=c.attributes.id,h=tn(c,"duration",sn);d=0==u&&0==d&&e.V?a:d;var g=null;if(f){var y=tn(f,"start",sn);null!=y&&(g=y-d+a)}else null!=i&&(g=i-d+a);if(y=dt,g&&h&&Math.abs(g-h)>y&&g>h&&e.N++,null==g&&(g=h),!(null!==e.O&&null!==p&&null!==d&&d<e.O)||e.G.includes(p)||u+1==r.length){if(null!==d&&(null===e.O||d>e.O)&&(e.O=d),l=Ry(e,t,n,{start:d,duration:g,node:c,df:null==g||!f}),s.push(l),t.sa.id&&g&&e.ya.set(t.sa.id,g),null==g){l=null;break}l=d+g}}if(o)for(n=(t=m(s)).next();!n.done;n=t.next())n=n.value.id,e.G.includes(n)||e.G.push(n);else e.G=s.map(function(e){return e.id});return null!=i?{periods:s,duration:i+a,Wh:!1}:{periods:s,duration:l,Wh:!0}}function Ry(e,t,n,r){t.sa=Ny(e,r.node,null,n),t.na=r,t.sa.ub=t.ub,t.sa.id||(t.sa.id="__shaka_period_"+r.start);var o=$t(r.node,"EventStream");n=t.presentationTimeline.Ib();for(var i=(o=m(o)).next();!i.done;i=o.next())By(e,r.start,r.duration,i.value,n);for(o=(n=m(n=$t(r.node,"SupplementalProperty"))).next();!o.done;o=n.next())"urn:mpeg:dash:urlparam:2014"==(o=o.value).attributes.schemeIdUri&&(o=Py(e,o))&&(t.Mb=o);if(n=$t(r.node,"AdaptationSet").map(function(n,r){return Ly(e,t,r,n)}).filter(Ar),t.Fb){o=[];for(var a=(i=m(n)).next();!a.done;a=i.next())for(var s=(a=m(a.value.Pk)).next();!s.done;s=a.next())o.push(s.value);if(o.length!=new Set(o).size)throw new ze(2,4,4018)}for(o=new Map,a=(i=m(n)).next();!a.done;a=i.next())for(s=(a=m(a.value.vj)).next();!s.done;s=a.next()){var l=m(s.value);s=l.next().value,l=l.next().value,o.set(s,l)}if(o.size)for(i=null,s=(a=m(n)).next();!s.done;s=a.next()){l=[];for(var u=m((s=s.value).streams),c=u.next(),f={};!c.done;f={wh:void 0},c=u.next())if(f.wh=c.value,o.has(f.wh.originalId)){i||(i=$t(r.node,"AdaptationSet").map(function(n,r){return Ly(e,t,r,n)}).filter(Ar));for(var d=(c=m(i)).next();!d.done;d=c.next())(d=d.value.streams.find(function(e){return function(t){return t.originalId==e.wh.originalId}}(f)))&&(d.dependencyStream=o.get(d.originalId),d.originalId+=d.dependencyStream.originalId,l.push(d))}l.length&&s.streams.push.apply(s.streams,g(l))}if(r=n.filter(function(e){return!e.Eh}),n=n.filter(function(e){return e.Eh}),!e.g.disableIFrames)for(o=(n=m(n)).next();!o.done;o=n.next())for(i=(o=o.value).Eh.split(" "),s=(a=m(r)).next();!s.done;s=a.next())if(s=s.value,i.includes(s.id))for(l=(s=m(s.streams)).next();!l.done;l=s.next())ao(l.value,o.streams);if(n=_y(e.g.disableAudio,r,"audio"),o=_y(e.g.disableVideo,r,"video"),i=_y(e.g.disableText,r,ct),r=_y(e.g.disableThumbnails,r,"image"),0===o.length&&0===n.length)throw new ze(2,4,4004);return{id:t.sa.id,audioStreams:n,videoStreams:o,textStreams:i,imageStreams:r}}function _y(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n||e.push.apply(e,g(t.streams)),e},[])}function Ly(t,n,r,o){function i(e){var r=e.attributes["dvb:fontFamily"];e=e.attributes["dvb:url"],r&&e&&(e=ot(n.qa.cb(),[e],n.Mb()),t.j.addFont(r,e[0]))}function a(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.qa=Ny(t,o,n.sa,null),n.qa.position=r;var l=!1,u=(r=$t(o,"Role")).map(function(e){return e.attributes.value}).filter(Ar),c=void 0,f=n.qa.contentType==ct;f&&(c="subtitle");for(var d=(r=m(r)).next();!d.done;d=r.next()){var p=(d=d.value).attributes.schemeIdUri;if(null==p||"urn:mpeg:dash:role:2011"==p)switch(d=d.attributes.value,d){case"main":l=!0;break;case"caption":case"subtitle":c=d}}var h=$t(o,"EssentialProperty");r=null;var y=!1;d=null,p=!1;for(var v=(h=m(h)).next();!v.done;v=h.next()){var b=(v=v.value).attributes.schemeIdUri;if("http://dashif.org/guidelines/trickmode"==b)r=v.attributes.value;else if("urn:mpeg:mpegB:cicp:TransferCharacteristics"==b)var x=s(parseInt(v.attributes.value,10));else if("urn:mpeg:mpegB:cicp:ColourPrimaries"==b)var w=a(parseInt(v.attributes.value,10));else"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=b&&("urn:mpeg:dash:ssr:2023"==b&&t.g.dash.enableFastSwitching?y=!0:"urn:dvb:dash:fontdownload:2014"==b?i(v):"urn:mpeg:dash:urlparam:2014"==b&&(d=Py(t,v))||(p=!0))}if(p)return null;var T=null;for(h=(p=m(p=$t(o,"SupplementalProperty"))).next();!h.done;h=p.next())"http://dashif.org/guidelines/last-segment-number"==(v=(h=h.value).attributes.schemeIdUri)?T=parseInt(h.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==v?x=s(parseInt(h.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==v?w=a(parseInt(h.attributes.value,10)):"urn:dvb:dash:fontdownload:2014"==v?i(h):"urn:mpeg:dash:urlparam:2014"==v&&(d=Py(t,h));d&&(n.Mb=d),d=$t(o,"Accessibility");var C,A=new Map;for(p=(d=m(d)).next();!p.done;p=d.next())if(p=(h=p.value).attributes.schemeIdUri,h=h.attributes.value,"urn:scte:dash:cc:cea-608:2015"!=p||t.g.disableText)if("urn:scte:dash:cc:cea-708:2015"!=p||t.g.disableText)"urn:mpeg:dash:role:2011"==p?null!=h&&(u.push(h),"captions"==h&&(c="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==p&&("1"==h?C="visually impaired":"2"==h?C="hard of hearing":"9"==h&&(C="spoken subtitles"));else if(p=1,null!=h)for(v=(h=m(h.split(";"))).next();!v.done;v=h.next()){b=v.value;var E=v=void 0;b.includes("=")?(v="svc"+(b=b.split("="))[0],E=b[1].split(",")[0].split(":").pop()):(v="svc"+p,p++,E=b),A.set(v,Lr(E))}else A.set("svc1","und");else if(p=1,null!=h)for(b=(v=m(h=h.split(";"))).next();!b.done;b=v.next()){E=b.value;var I=b=void 0;E.includes("=")?(b=(E=E.split("="))[0].startsWith("CC")?E[0]:"CC"+E[0],I=E[1]||"und"):(b="CC"+p,2==h.length?p+=2:p++,I=E),A.set(b,Lr(I))}else A.set("CC1","und");d=$t(o,"ContentProtection");var M=Ym(t.xa,d,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI);n.qa.encrypted=d.length>0;var R=Lr(n.qa.language||"und"),_=n.qa.label,L=new Map;if(o=$t(o,"Representation"),!t.g.ignoreSupplementalCodecs){for(d=[],h=(p=m(o)).next();!h.done;h=p.next())(h=nn(v=h.value,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&((v=zt(v)).attributes.codecs=h.split(" ").join(","),v.attributes.id&&(v.attributes.supplementalId=v.attributes.id+"_supplementalCodecs"),d.push(v));o.push.apply(o,g(d))}if(d=o.map(function(r){var o=function(t,n,r,o,i,a,s,l,u,c,f,d){n.L=Ny(t,c,n.qa,null);var p=n.L.id;if(t.ba=Math.min(t.ba,n.L.ub),t.S=t.ba>0,!function(e){var t=e.Hd?1:0;return t+=e.zc?1:0,0==(t+=e.Nc?1:0)?e.contentType==ct||"application"==e.contentType:(1!=t&&(e.Hd&&(e.zc=null),e.Nc=null),!0)}(n.L))return null;var h=n.na.start;n.bandwidth=tn(c,"bandwidth",cn)||0,n.roles=l;var m=$t(c,"SupplementalProperty"),g=$t(c,"EssentialProperty"),y=$t(c,"ContentProtection");c=null;var v,b,x=g.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri});(x||(x=m.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri})))&&(c=Py(t,x)),c&&(n.Mb=c),x=n.L.contentType,c=x==ct||"application"==x,x="image"==x,y.length&&(n.qa.encrypted=!0);try{var w=void 0;if(r.dg){var T=n.L.cb,C=n.Mb,A=qo(ot(T(),[r.dg.tk],C()),t.g.retryParameters);w={bitsKey:128,blockCipherMode:"CBC",iv:r.dg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,r,o;return O(function(i){if(1==i.g)return S(i,zy(t,A,6),2);if(3!=i.g){if(!(n=i.h).data||16!=n.data.byteLength)throw new ze(2,4,4049);return r={name:"AES-CBC"},o=w,S(i,e.crypto.subtle.importKey("raw",n.data,r,!0,["decrypt"]),3)}o.cryptoKey=i.h,w.fetchKey=void 0,k(i)})}}}if(n.L.aesKey=w,T=function(e,n,r,o){return jy(t,e,n,r,o)},n.L.Hd)var E=mg(n,T,w);else if(n.L.zc)E=wg(n,t.o,w);else if(n.L.Nc)E=Tg(n,T,t.o,!!t.h,t.g.dash.initialSegmentLimit,t.ya,w,d,!1,t.C);else{var I=n.na.duration||0,M=n.L.cb,R=n.L.mimeType,_=n.L.codecs;E={endTime:-1,timeline:-1,Sc:function(){var e=Ol(h,I,M());return e.Gb(function(e){e.mimeType=R,e.codecs=_}),Promise.resolve(e)},timescale:1}}}catch(ma){if((c||x)&&4002==ma.code)return null;throw ma}if(d=function(e,t,n,r,o){var i=Ym(e,t,r,o);if(n.Yh)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==i.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=i.drmInfos),n.Yh=!1;else if(i.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==n.drmInfos.length))throw new ze(2,4,4008);return i.Th||n.Th}(t.xa,y,r,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI),d=new Set(d?[d]:[]),y=!1,m.some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value})&&(y=!0),m=!1,c&&(m=l.includes("forced_subtitle")||l.includes("forced-subtitle")),x&&((g=g.find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)}))&&(v=g.attributes.value),!v))return null;c=n.L.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(b="PQ"),g=n.L.id?n.sa.id+","+n.L.id:"",t.H.length&&p&&t.u.set(n.sa.id+","+p,function(e){function t(e){return e?((e=Vt(e)).Hd=null,e.zc=null,e.Nc=xn(e.Nc),e.zf=null,e):null}return(e=Vt(e)).sa=t(e.sa),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=Vt(e.na),e.na.node=null),e}(n)),n.L.zf&&function(e,t,n,r){if(!e.ma.has(t)){e.ma.add(t);var o,i=tn(t,"presentationTime",fn)||0,a=Zt(t,"UTCTiming");(o=a&&a.attributes.schemeIdUri)&&(o=!("urn:mpeg:dash:utc:http-ntp:2014"===(a=a.attributes.schemeIdUri)||"urn:mpeg:dash:utc:ntp:2014"===a||"urn:mpeg:dash:utc:sntp:2014"===a)),t=o?1e3*(tn(t,"wallClockTime",an)||0):ps(t=tn(t,"wallClockTime",fn)||0),i=(n=new Date(t-i/n.timescale*1e3)).getTime()/1e3,isNaN(i)||(r.o||r.ph(i),r=new No("prft",r=(new Map).set("detail",{wallClockTime:t,programStartDate:n})),e.j.onEvent(r))}}(t,n.L.zf,E,n.presentationTimeline),-1!=E.endTime&&null!=n.sa.id&&null!=n.L.id&&((p=t.C.get(n.sa.id))?(p.endTime=E.endTime,p.dh.includes(n.L.id)||p.dh.push(n.L.id),t.C.set(n.sa.id,p)):t.C.set(n.sa.id,{endTime:E.endTime,timeline:E.timeline,dh:[n.L.id]}));var L=g&&t.o.has(g)?t.o.get(g):{id:t.Ga++,originalId:n.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){L.segmentIndex&&(L.segmentIndex.release(),L.segmentIndex=null)},segmentIndex:null,mimeType:n.L.mimeType,codecs:c,frameRate:n.L.frameRate,pixelAspectRatio:n.L.pixelAspectRatio,bandwidth:n.bandwidth,width:n.L.width,height:n.L.height,kind:o,encrypted:r.drmInfos.length>0,drmInfos:r.drmInfos,keyIds:d,language:i,originalLanguage:n.qa.language,label:a,type:n.qa.contentType,primary:s,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:n.L.emsgSchemeIdUris,roles:l,forced:m,channelsCount:n.L.tf,audioSamplingRate:n.L.audioSamplingRate,spatialAudio:y,closedCaptions:u,hdr:b,colorGamut:void 0,videoLayout:void 0,tilesLayout:v,accessibilityPurpose:f,external:!1,fastSwitching:!1,fullMimeTypes:new Set([or(n.L.mimeType,n.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return L.createSegmentIndex=function(){var e;return O(function(t){if(1==t.g)return L.segmentIndex?t.A(0):(e=L,S(t,E.Sc(),3));e.segmentIndex=t.h,k(t)})},g&&n.Fb&&!t.o.has(g)&&(n=n.sa.id||"",t.F.has(n)||t.F.set(n,[]),t.o.set(g,L),t.F.get(n).push(g)),L}(t,n,M,c,R,_,l,u,A,r,C,T);return o&&(o.hdr=o.hdr||x,o.colorGamut=o.colorGamut||w,o.fastSwitching=y,r=r.attributes.dependencyId)?(o.baseOriginalId=r,L.set(r,o),null):o}).filter(function(e){return!!e}),0==d.length&&0==L.size){if(r="image"==n.qa.contentType,t.g.dash.ignoreEmptyAdaptationSet||f||r)return null;throw new ze(2,4,4003)}if(!n.qa.contentType||"application"==n.qa.contentType)for(n.qa.contentType=Fy(d[0].mimeType,d[0].codecs),p=(f=m(d)).next();!p.done;p=f.next())p.value.type=n.qa.contentType;for(f=n.qa.id||"__fake__"+t.Ga++,h=(p=m(d)).next();!h.done;h=p.next()){for(h=h.value,b=(v=m(M.drmInfos)).next();!b.done;b=v.next())(b=b.value).keyIds=b.keyIds&&h.keyIds?new Set([].concat(g(b.keyIds),g(h.keyIds))):b.keyIds||h.keyIds;t.g.enableAudioGroups&&(h.groupId=f)}return o=o.map(function(e){return e.attributes.supplementalId||e.attributes.id}).filter(Ar),{id:f,contentType:n.qa.contentType,language:R,Gm:l,streams:d,drmInfos:M.drmInfos,Eh:r,Pk:o,vj:L}}function Py(e,t){if((t=en(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&tn(t,"useMPDUrlQuery",pn,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return"$querypart$"==n?e.$:n.split("&").map(function(t){if("$querypart$"==t)return e.$;var n=/\$query:(.*?)\$/g.exec(t);if(n&&2==n.length){n=n[1];var r=new _e(e.$).get(n);if(r.length)return n+"="+r[0]}return t}).join("&")}}return null}function Dy(e){var t,n;return O(function(r){switch(r.g){case 1:return t=0,C(r,2),S(r,xy(e),4);case 4:t=r.h,E(r,3);break;case 2:if(n=I(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),Oy(e,t),k(r)}})}function Oy(e,t){if(!(e.K<0)){var n=e.K;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.M.ka(Math.max(n-t,q(e.Da)))}}function Ny(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,tf:null,audioSamplingRate:null,ub:0,Ef:1,encrypted:!1},r=r||n.cb;var o,i=t.attributes.id,a=t.attributes.supplementalId,s=$t(t,"BaseURL"),l=!1;if(e.i)for(var u=m(s),c=u.next();!c.done;c=u.next()){var f=c.value;c=f.attributes.serviceLocation,f=Jt(f),c&&f&&(Lg(e.i,i,c,f),l=!0)}l&&e.i||(o=s.map(Jt));var d=e.i;e=t.attributes.contentType||n.contentType,u=t.attributes.mimeType||n.mimeType,c=au([t.attributes.codecs||n.codecs]).join(","),f=tn(t,"frameRate",hn)||n.frameRate;var p=t.attributes.sar||n.pixelAspectRatio,h=function(e,t){t=t.slice();for(var n=(e=m(e)).next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}($t(t,"InbandEventStream"),n.emsgSchemeIdUris),g=$t(t,"AudioChannelConfiguration");g=function(e){for(var t=(e=m(e)).next();!t.done;t=e.next()){var n=(t=t.value).attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(t,10)))continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],!(t=parseInt(t,16)))continue;for(var r=0,o=0;o<n.length;o++)t&1<<o&&(r+=n[o]);if(r)return r;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),!(t=parseInt(t,16)))continue;for(o=r=0;o<n.length;o++)t&1<<o&&(r+=n[o]);if(r)return r;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}(g)||n.tf;var y=tn(t,"audioSamplingRate",fn)||n.audioSamplingRate;e||(e=Fy(u,c));var v=Zt(t,"SegmentBase"),b=Zt(t,"SegmentTemplate"),x=v&&tn(v,"availabilityTimeOffset",dn)||0,w=b&&tn(b,"availabilityTimeOffset",dn)||0,S=s&&s.length&&tn(s[0],"availabilityTimeOffset",dn)||0;x=n.ub+S+x+w,w=null,(S=Zt(t,"SegmentSequenceProperties"))&&(S=tn(S,"cadence",cn))&&(w=S),S=t.attributes.label;var T=$t(t,"Label");return T&&T.length&&Yt(T=T[0])&&(S=Yt(T)),{cb:function(){return ot(r(),s.length?d&&l?Pg(d,i):o||[]:[])},Hd:v||n.Hd,zc:Zt(t,"SegmentList")||n.zc,Nc:b||n.Nc,zf:Zt(t,"ProducerReferenceTime")||n.zf,width:tn(t,"width",fn)||n.width,height:tn(t,"height",fn)||n.height,contentType:e,mimeType:u,codecs:c,frameRate:f,pixelAspectRatio:p,emsgSchemeIdUris:h,id:a||i,originalId:i,language:t.attributes.lang,tf:g,audioSamplingRate:y,ub:x,bf:null,Ef:w||n.Ef,label:S||null,encrypted:!1}}function Uy(e,t,n,r){var o,i,a,s,l,u,c;return O(function(f){if(1==f.g)return o=[$e(n)],i=ot(t(),o),(a=qo(i,e.g.retryParameters)).method=r,s=e.j.networkingEngine.request(4,a,{isPreload:e.oa()}),zo(e.R,s),S(f,s.promise,2);if(l=f.h,"HEAD"==r){if(!l.headers||!l.headers.date)return f.return(0);u=l.headers.date}else u=He(l.data);return c=Date.parse(u),isNaN(c)?f.return(0):f.return(c-Date.now())})}function By(e,t,n,r,o){for(var i=r.attributes.schemeIdUri||"",a=r.attributes.value||"",s=tn(r,"timescale",fn)||1,l=tn(r,"presentationTimeOffset",fn)||0,u=(r=m($t(r,"Event"))).next();!u.done;u=r.next()){var c=tn(u=u.value,"presentationTime",fn)||0,f=tn(u,"duration",fn)||0;f=(c=Math.max((c-l)/s+t,t))+f/s,null!=n&&(c=Math.min(c,t+n),f=Math.min(f,t+n)),f<o||(u={schemeIdUri:i,value:a,startTime:c,endTime:f,id:u.attributes.id||"",timescale:s,eventElement:bn(u),eventNode:xn(u)},e.j.onTimelineRegionAdded(u))}}function jy(e,t,n,r,o){var i,a,s,l;return O(function(u){return 1==u.g?(i=Yo,a=o?0:1,s=lu(t,n,r,e.g.retryParameters),S(u,zy(e,s,i,{type:a}),2)):(l=u.h,u.return(l.data))})}function Fy(e,t){return vr(t=or(e,t))?ct:e.split("/")[0]}function zy(e,t,n,r){return r||(r={}),r.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,r),zo(e.R,t),t.promise}function Vy(){}(o=by.prototype).configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.M.Kb(),this.i&&this.i.configure(this.g),this.m&&this.m.Ri(this.g.dash.useStreamOnceInPeriodFlattening)},o.start=function(e,t){var n,r=this;return O(function(o){if(1==o.g)return r.wa=t.isLowLatencyMode(),r.B=[e],r.j=t,S(o,xy(r),2);if(n=o.h,r.j&&Oy(r,n),!r.j)throw new ze(2,7,7001);return o.return(r.h)})},o.stop=function(){for(var e=m(this.o.values()),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.F.clear(),this.u.clear(),this.C.clear(),this.l={pf:"",type:"",profiles:[],sc:null,ub:0,cb:null,je:0},this.m=null,null!=this.M&&(this.M.stop(),this.M=null),this.i&&this.i.destroy(),this.I&&(this.I.release(),this.I=null),this.ma.clear(),this.xa.release(),this.R.destroy()},o.update=function(){var e,t=this;return O(function(n){return 1==n.g?(C(n,2),S(n,xy(t),4)):2!=n.g?E(n,0):(e=I(n),t.j&&e?(t.j.onError(e),void k(n)):n.return())})},o.onExpirationUpdated=function(){},o.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Ic();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,Oy(this,0))}}},o.banLocation=function(e){this.i&&this.i.banLocation(e)},o.setMediaElement=function(e){this.J=e},H("shaka.dash.DashParser",by),ea("application/dash+xml",function(){return new by}),ea("video/vnd.mpeg.dash.mpd",function(){return new by}),H("shaka.dependencies",Vy),Vy.has=function(e){return qy.has(e)},Vy.add=function(e,t){if(!Gy[e])throw Error(e+" is not supported");e==Hy?pe("mux.js","mux.js is no longer used in Shaka Player."):qy.set(e,function(){return t})};var Hy="muxjs",Gy={Hm:Hy,ISOBoxer:"ISOBoxer"};Vy.Allowed=Gy;var qy=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);function Wy(){this.j=new se(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase()?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new se(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function Ky(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function Xy(){Wy.call(this),this.g=new se(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new se(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}function $y(){if(!Yy())throw Error("Not a Chromecast device!");Wy.call(this),this.h=new se(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new se(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return(e=e.toLowerCase()).includes("android")?Jy:e.includes("fuchsia")?Qy:Zy})}function Yy(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}(o=Wy.prototype).cc=function(){return!!navigator.mediaCapabilities},o.Oa=function(){return this.j.value()},o.Ea=function(){return this.l.value()},o.Ed=function(){return!1},o.Gi=function(){return!1},o.cf=function(){return!1},o.Hi=function(){return!1},o.le=function(){return!1},o.fd=function(){return!0},o.Pc=function(){return!0},o.pe=function(){return!0},o.Mi=function(){return 0},o.jc=function(){return Promise.resolve({width:1/0,height:1/0})},o.Ui=function(){return!1},o.sh=function(){return!1},o.Wa=function(e){var t=this.Oa();return"TV"!==t&&"CONSOLE"!==t&&"CAST"!==t||(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},o.yh=function(){return!!e.indexedDB},o.Ei=function(){return[]},o.sd=function(t){return void 0!==e.matchMedia&&e.matchMedia("(color-gamut: p3)").matches?t?"HLG":"PQ":"SDR"},o.aj=function(){return!1},o.si=function(){return!1},o.hh=function(){return!1},o.Kf=function(){return!0},o.ti=function(){return!1},o.$i=function(){return!0},o.ed=function(){return!1},o.Sg=function(e){return"com.apple.fps"===e},o.Jf=function(){return!0},o.toString=function(){return"Device: "+this.Ob()+" v"+this.za()+"; Type: "+this.Oa()},p(Xy,Wy),(o=Xy.prototype).za=function(){return this.g.value()},o.Ob=function(){return"Apple Browser"},o.Oa=function(){return this.h.value()},o.Ea=function(){return"WEBKIT"},o.cc=function(){return!1},o.Ed=function(e,t){return"audio"===t},o.cf=function(){return!0},o.Hi=function(e){return"audio"===e},o.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},o.aj=function(){return!0},o.Jf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(ue=function(){return new Xy}),p($y,Wy),(o=$y.prototype).za=function(){return this.h.value()},o.Ob=function(){return"Chromecast with "+this.g.value()},o.Oa=function(){return"CAST"},o.Ea=function(){return"CHROMIUM"},o.cc=function(){return Wy.prototype.cc.call(this)&&this.g.value()!==Zy},o.Pc=function(){return this.g.value()!==Zy},o.Mi=function(){switch(this.g.value()){case Jy:return 0;case Qy:return 3;default:return 1}},o.jc=function(){var t,n,r,o;return O(function(i){switch(i.g){case 1:if(t=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,n={width:1280,height:720},C(i,2),!(r=t)){i.A(4);break}return S(i,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:r=i.h;case 4:if(r){n.width=3840,n.height=2160,i.A(6);break}if(!(o=t)){i.A(7);break}return S(i,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:o=i.h;case 7:o&&(n.width=1920,n.height=1080);case 6:E(i,3);break;case 2:X("Failed to check canDisplayType:",I(i));case 3:return i.return(n)}})},o.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},o.yh=function(){return!1},o.ed=function(){return!0};var Jy="Android",Qy="Fuchsia",Zy="Linux";function ev(){Wy.call(this);var e=this;this.i=new se(function(){var e=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return e?parseInt(e[2],10):null}),this.g=new se(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new se(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("win32")}),this.u=new se(function(){return!navigator.userAgent.match(/Edge?\//)||!e.h.value()}),this.o=new se(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new se(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase():!!navigator.userAgent.includes("Android")})}function tv(){Wy.apply(this,arguments)}function nv(){Wy.call(this),this.g=new se(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}function rv(){Wy.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}function ov(){Wy.apply(this,arguments)}function iv(){Wy.call(this),this.i=new se(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new se(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new se(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}function av(){Wy.call(this);var e=this;this.h=function(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(t){t=JSON.parse(t),e.g=t.sj["tv.model.supportHDR"]||t.sj["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({Em:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(n){$("WebOS: getConfigs call failed",n)}}if(Yy()&&(ue=function(){return new $y}),p(ev,Wy),(o=ev.prototype).za=function(){return this.i.value()},o.Ob=function(){return this.g.value()},o.Ed=function(e){return!!wo(e)&&"Edge"===this.g.value()&&this.h.value()},o.Gi=function(){return"Edge"===this.g.value()&&this.h.value()},o.cf=function(){return"Edge"===this.g.value()&&this.h.value()},o.Pc=function(){return this.u.value()},o.Wa=function(e){if(Wy.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},o.hh=function(){return"Edge"===this.g.value()||this.o.value()},o.ed=function(){if("GECKO"===this.Ea()){var e=this.za();return null!==e?e>=100:Wy.prototype.ed.call(this)}return Wy.prototype.ed.call(this)},o.Sg=function(e){return"GECKO"===this.Ea()?e.startsWith("com.microsoft.playready.recommendation"):Wy.prototype.Sg.call(this,e)},ce=function(){return new ev},p(tv,Wy),(o=tv.prototype).za=function(){return null},o.Ob=function(){return"Hisense"},o.Oa=function(){return"TV"},o.cc=function(){return!1},o.jc=function(){var t={width:1920,height:1080},n=null;if(e.Hisense_Get4KSupportState)try{n=e.Hisense_Get4KSupportState()}catch(r){}return null==n&&(n=navigator.userAgent.includes("UHD")),n&&(t.width=3840,t.height=2160),Promise.resolve(t)},o.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(ue=function(){return new tv}),p(nv,Wy),(o=nv.prototype).Ob=function(){return"PlayStation"},o.Oa=function(){return"CONSOLE"},o.Ea=function(){return"WEBKIT"},o.za=function(){return this.g.value()},o.cc=function(){return!1},o.fd=function(){return!1},o.Pc=function(){return!1},o.sh=function(){return 4===this.za()},o.jc=function(){var t,n,r,o;return O(function(i){switch(i.g){case 1:return t={width:1920,height:1080},n=!1,C(i,2),S(i,e.msdk.device.getDisplayInfo(),4);case 4:r=i.h,n="4K"===r.resolution,E(i,3);break;case 2:return I(i),C(i,5),S(i,e.msdk.device.getDisplayInfoImmediate(),7);case 7:o=i.h,n="4K"===o.resolution,E(i,3);break;case 5:$("PlayStation: Failed to get the display info:",I(i));case 3:return n&&(t.width=3840,t.height=2160),i.return(t)}})},o.Wa=function(e){return Wy.prototype.Wa.call(this,e),4===this.za()&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},o.hh=function(){return 4===this.za()},o.Kf=function(){return 4!==this.za()},navigator.userAgent.includes("PlayStation")&&(ue=function(){return new nv}),p(rv,Wy),(o=rv.prototype).za=function(){return this.g},o.Ob=function(){return"Tizen"},o.Ea=function(){return"CHROMIUM"},o.Oa=function(){return"TV"},o.Ed=function(){return!0},o.le=function(){return 3===this.za()},o.cc=function(){return!1},o.fd=function(){var e=this.za();return null!==e?e>=4:Wy.prototype.fd.call(this)},o.Pc=function(){return!1},o.pe=function(){return this.g&&this.h?5===this.g?this.h>=5:this.g>5:Wy.prototype.pe.call(this)},o.jc=function(){var t=e.devicePixelRatio;t={width:e.screen.width*t>1920?3840:1920,height:e.screen.height*t>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var n=webapis.systeminfo.getMaxVideoResolution();t.width=n.width,t.height=n.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(t.width=7680,t.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(t.width=3840,t.height=2160)}catch(r){$("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},o.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=2!==this.za(),3===this.za()&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},o.Ei=function(){var e=[];return null!==this.g&&this.g<5&&e.push("opus"),e},o.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch(t){return Wy.prototype.sd.call(this,e)}return"SDR"},o.si=function(){return!0},o.ti=function(){return 3===this.za()},navigator.userAgent.includes("Tizen")&&(ue=function(){return new rv}),p(ov,Wy),ov.prototype.za=function(){return null},ov.prototype.Ob=function(){return"Vizio"},ov.prototype.Oa=function(){return"TV"},ov.prototype.cc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(ue=function(){return new ov}),p(iv,Wy),(o=iv.prototype).za=function(){return this.g.value()},o.Ob=function(){return"WebKit STB"},o.Oa=function(){return"TV"},o.Ea=function(){return"WEBKIT"},o.cc=function(){return!1},o.fd=function(){var e=this.g.value();return null===e||e>=15},o.Ed=function(){return this.h.value()},o.jc=function(){return Promise.resolve({width:e.screen.width*e.devicePixelRatio,height:e.screen.height*e.devicePixelRatio})},o.Kf=function(){return!this.i.value()},o.Jf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(ue=function(){return new iv}),p(av,Wy),(o=av.prototype).za=function(){return this.h},o.Ob=function(){return"WebOS"},o.Oa=function(){return"TV"},o.Ea=function(){return"CHROMIUM"},o.cc=function(){return!1},o.fd=function(){var e=this.za();return null!==e?e>3:Wy.prototype.fd.call(this)},o.Pc=function(){var e=this.za();return null!==e?e>6:Wy.prototype.Pc.call(this)},o.pe=function(){var e=this.za();return null!==e?e>3:Wy.prototype.pe.call(this)},o.jc=function(){var t={width:1920,height:1080};try{var n=JSON.parse(e.PalmSystem.deviceInfo);t.width=Math.max(1920,n.screenWidth),t.height=Math.max(1080,n.screenHeight)}catch(r){$("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},o.Wa=function(e){return Wy.prototype.Wa.call(this,e),3===this.za()&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},o.sd=function(e){return null==this.g?($("WebOS: getConfigs call haven't finished"),Wy.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"},o.$i=function(){return!1},o.ed=function(){var e=this.za();return null!==e?e>=6:Wy.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var sv=new av;ue=function(){return sv}}function lv(){Wy.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}function uv(){var e=null;try{e="undefined"!=typeof Windows?Windows:chrome.webview.hostObjects.sync.Windows}catch(t){}return e}function cv(e,t,n){this.type=e,this.ha=t,this.segments=n||null}function fv(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=void 0===r?null:r}function dv(e,t){return t?e.toString():(t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function pv(e,t){return(e=e.attributes.filter(function(e){return e.name==t})).length?e[0]:null}function hv(e,t,n){return(e=pv(e,t))?e.value:n||null}function mv(e,t){if(!(e=pv(e,t)))throw new ze(2,4,4023,t);return e.value}function gv(e,t,n){n=void 0===n?[]:n,this.ha=t,this.g=e,this.vc=n}function yv(e,t){this.name=e,this.value=t}function vv(e,t){return e.filter(function(e){return e.name==t})}function bv(e,t){return e.filter(function(e){return mv(e,"TYPE")==t})}function xv(e,t){for(var n=(e=m(e)).next();!n.done;n=e.next())if((n=n.value).name===t)return n;return null}function wv(e,t,n){return n=void 0===n?0:n,(e=xv(e,t))?Number(e.value):n}function Sv(e,t,n){return t?Tv(e,[t],n):[]}function Tv(e,t,n){if(!t.length)return[];var r=t;return n&&n.size&&(r=t.map(function(e){return kv(e,n)})),ot(e,r)}function kv(e,t){if(!t||!t.size)return e;var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var r=(n=m(n)).next();!r.done;r=n.next()){var o=(r=r.value).slice(2,r.length-1),i=t.get(o);if(!i)throw new ze(2,4,4039,o);e=e.replace(r,i)}return e}function Cv(){this.g=0}function Av(e,t){var n=(t=(t=He(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new ze(2,4,4015);t=0;for(var r=!0,o=m(n),i=o.next();!i.done;i=o.next())if(i=i.value,/^#(?!EXT)/m.test(i)||r)r=!1;else{if(i=Ev(e,i),--e.g,Iv.includes(i.name)){t=1;break}"EXT-X-STREAM-INF"==i.name&&(r=!0)}for(o=[],r=!0,i=0;i<n.length;i++){var a=n[i],s=n[i+1];if(/^#(?!EXT)/m.test(a)||r)r=!1;else{if(a=Ev(e,a),Mv.includes(a.name)){if(1!=t)throw new ze(2,4,4017);a=n.splice(i,n.length-i),n=[],r=[],i=[],s=null;for(var l=(a=m(a)).next();!l.done;l=a.next())l=l.value,/^(#EXT)/.test(l)?(l=Ev(e,l),Iv.includes(l.name)?o.push(l):"EXT-X-MAP"==l.name?s=l:"EXT-X-PART"==l.name?i.push(l):"EXT-X-PRELOAD-HINT"==l.name?"PART"==hv(l,"TYPE")?i.push(l):"MAP"==hv(l,"TYPE")&&(l.name="EXT-X-MAP",s=l):r.push(l)):/^#(?!EXT)/m.test(l)||(l=l.trim(),s&&r.push(s),n.push(new gv(l,r,i)),r=[],i=[]);return i.length&&(s&&r.push(s),n.push(new gv("",r,i))),new cv(t,o,n)}o.push(a),"EXT-X-STREAM-INF"==a.name&&(a.attributes.push(new yv("URI",s)),r=!0)}}return new cv(t,o)}function Ev(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new ze(2,4,4016,t);t=n[1];var r,o=n[2];if(n=[],o){var i;(i=Ot(o=new Pt(o),/^([^,=]+)(?:,|$)/g))&&(r=i[1]);for(var a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;i=Ot(o,a);)n.push(new yv(i[1],i[2]||i[3])),Dt(o)}return new fv(e,t,n,r)}p(lv,Wy),(o=lv.prototype).za=function(){return this.h},o.Ob=function(){return"Xbox"},o.Oa=function(){return"CONSOLE"},o.Ea=function(){return this.g?"EDGE":"CHROMIUM"},o.Ed=function(){return!0},o.cf=function(){return!0},o.Ui=function(){return this.g},o.jc=function(){var e={width:1920,height:1080},t=uv();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,r=t.Media.Protection.ProtectionCapabilityResult;t=null;do{t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(t===r.maybe);t===r.probably&&(e.width=3840,e.height=2160)}catch(o){$("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},o.Wa=function(e){return Wy.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},o.yh=function(){return!1},(navigator.userAgent.includes("Xbox One")||null!==uv())&&(ue=function(){return new lv}),fv.prototype.toString=function(e){var t="#"+this.name,n=this.attributes?this.attributes.filter(function(t){return!e||!e.has(t.name)}).map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&n.unshift(this.value),n.length>0&&(t+=":"+n.join(",")),t};var Iv="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),Mv="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function Rv(){}function _v(e,t){try{var n=Lv(e);return Po({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(r){return _o(r)}}function Lv(t){var n=t.split(":");if(n.length<2||"data"!=n[0])throw new ze(2,1,1004,t);if((n=n.slice(1).join(":").split(",")).length<2)throw new ze(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var o=!1;return n.length>1&&"base64"==n[n.length-1]&&(o=!0,n.pop()),{data:o?et(t):We(t),contentType:r}}function Pv(){var t=this;this.g=this.h=null,this.G=1,this.B=new Map,this.M=new Map,this.C=new Map,this.C.set("video",new Map),this.C.set("audio",new Map),this.C.set(ct,new Map),this.C.set("image",new Map),this.uc=(new Map).set("com.apple.streamingkeydelivery",function(n,r,o){return function(t,n,r,o){var i,a,s,l,u;return O(function(c){if(1==c.g){if("video/mp2t"==r)throw new ze(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new ze(2,4,4041);if(i=mv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i))return c.return(null);a="cenc","SAMPLE-AES"==i&&(a="cbcs"),s=mv(n,"URI"),l=it("com.apple.fps",a,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],s);var f=new ve(s).Eb.replace(/-/g,"").toLowerCase();return(u=32===f.length&&/^[0-9a-f]+$/.test(f)?f:null)||!o?c.A(2):S(c,Sb(t,o),3)}return 2!=c.g&&(u=c.h),u&&l.keyIds.add(u),c.return(l)})}(t,n,r,o)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(e){var n=mv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";"SAMPLE-AES"==n&&(r="cbcs");var o=mv(e,"URI");n=Lv(o.split("?")[0]),o=o.split("?")[0],t.I.has(o)||(n=Ue(n.data),t.I.set(o,n)),r=it("com.widevine.alpha",r,[{initDataType:"cenc",initData:t.I.get(o)}]),(e=hv(e,"KEYID"))&&r.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(r)}else e=Promise.resolve(null);return e}).set("com.microsoft.playready",function(e){var t=mv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),n=it("com.microsoft.playready",n,[{initDataType:"cenc",initData:t=bi(e=Ue((e=Lv((e=mv(e,"URI")).split("?")[0])).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]),(e=qt(["<PLAYREADY>",Ze(e),"</PLAYREADY>"].join("\n")))&&(n.licenseServerUri=Km(e)),n=Promise.resolve(n)}else n=Promise.resolve(null);return n}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(e){var n=mv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";"SAMPLE-AES"==n&&(r="cbcs");var o=mv(e,"URI");n=Lv(o.split("?")[0]),o=o.split("?")[0],t.I.has(o)||(n=Ue(n.data),t.I.set(o,n)),r=it("com.huawei.wiseplay",r,[{initDataType:"cenc",initData:t.I.get(o)}]),(e=hv(e,"KEYID"))&&r.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(r)}else e=Promise.resolve(null);return e}),this.ob=new Set,this.i=new Map,this.l=null,this.H="",this.Ta=new Cv,this.N=-1,this.ma=1/0,this.ba=this.yc=this.kb=!1,this.F=new Tr(function(){t.X&&!t.g.continueLoadingWhenPaused&&(t.V.Ma(t.X,"timeupdate"),t.X.paused)?t.V.Aa(t.X,"timeupdate",function(){return gb(t)}):gb(t)}),this.Ga=Rb,this.m=null,this.ib=0,this.o=1/0,this.ab=this.Sa=this.S=0,this.$=new Fo,this.J=new Map,this.K=new Map,this.Da=new Map,this.wa=new Map,this.O=new Map,this.xa=new Map,this.ya=new Map,this.xc=this.oa=!1,this.Zb=new G(5),this.j=null,this.R=!0,this.V=new oe,this.u=this.X=null,this.ac=function(){return!1},this.I=new Map}function Dv(e,t){return yb(e)?e.C.get(t.type):t.lf}function Ov(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,y,v,b,x,w,T,A,M,R,_,L,P,D,N,U,B,j,F,z,V,H,G;return O(function(O){switch(O.g){case 1:if(t.stream.isAudioMuxedInVideo)return O.return();for(n=[],r=m(t.P()),o=r.next();!o.done;o=r.next())i=o.value,a=new ve(i),s=a.g,t.Qe&&(t.Rb>=0&&s.add("_HLS_msn",String(t.Rb)),t.Sb>=0&&s.add("_HLS_part",String(t.Sb))),t.Re&&s.add("_HLS_skip","YES"),Pe(s)&&Se(a,Te(s.toString())),n.push(a.toString());return C(O,2),S(O,mb(e,n,!0).promise,4);case 4:l=O.h,E(O,3);break;case 2:throw u=I(O),e.h&&e.h.disableStream(t.stream),u;case 3:if(!t.stream.segmentIndex)return O.return();if(1!=(c=Av(e.Ta,l.data)).type)throw new ze(2,4,4017);return(f=l.uri)==l.originalUri||t.P().includes(f)||t.Af.push(f),d=vv(c.ha,"EXT-X-DEFINE"),p=Fv(e,d,f),h=t.stream,y=Dv(e,t),S(O,tb(e,c,h.mimeType,t.P,p),5);case 5:for(v=O.h,b=v.keyIds,x=v.drmInfos,w=v.encrypted,T=v.Mh,h.encrypted||!w||T||(h.encrypted=!0),function(e,t){return e.size===t.size&&[].concat(g(e)).every(function(e){return t.has(e)})}(h.keyIds,b)||(h.keyIds=b,h.drmInfos=x,e.h.newDrmInfo(h)),A=cb(e,c,y,p,t.P,t.type),M=A.segments,(R=A.bandwidth)&&(h.bandwidth=R),_=Gl(h),L=m(M),P=L.next();!P.done;P=L.next())(D=P.value).aa&&(D.aa.xd=_);h.segmentIndex.ee(M,e.l.Ib()),M.length&&(N=wv(c.ha,"EXT-X-MEDIA-SEQUENCE",0),B=(U=xv(c.ha,"EXT-X-SKIP"))?Number(hv(U,"SKIPPED-SEGMENTS")):0,j=Zv(N,M),F=j.Rb,z=j.Sb,t.Rb=F+B,t.Sb=z,V=y.get(N),h.segmentIndex.Ya(V)),(H=Dl(h.segmentIndex))&&(t.Wc=H.startTime,G=M[M.length-1],t.qc=G.endTime),xv(c.ha,"EXT-X-ENDLIST")&&(t.Wd=!0),ob(e,c),ub(e,c.ha,h.type,p,t.P),k(O)}})}function Nv(e,t,n){n=void 0!==n&&n;for(var r=-1==e.N,o=m(t),i=o.next();!i.done;i=o.next()){var a=(i=i.value).stream.segmentIndex,s=Dv(e,i);if(a=Dl(a))for(var l=(s=m(s)).next();!l.done;l=s.next()){var u=(l=m(l.value)).next().value;if(l.next().value==a.startTime){r&&(e.N=Math.max(e.N,u)),i.og=u;break}}}if(!(e.N<0))for(r=(t=m(t)).next();!r.done;r=t.next())(Jv(e,(r=r.value).type)||n)&&(o=r.stream.segmentIndex)&&(i=e.N-r.og)>0&&(o.g.splice(0,i),o=Dl(o))&&(o=-o.startTime,r.stream.segmentIndex.offset(o),Uv(e,r,o))}function Uv(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.qc+=n;for(var r=m(e=Dv(e,t)),o=r.next();!o.done;o=r.next()){var i=m(o.value);o=i.next().value,i=i.next().value,e.set(o,i+n)}t.P()}}function Bv(e,t,n){var r,o,i,a,s;return O(function(l){switch(l.g){case 1:return t?(r=Yo,o=lu(t.P(),t.Jc(),t.Gc(),e.g.retryParameters),S(l,bb(e,o,r,{type:t instanceof Ha?1:0}).promise,2)):l.return({mimeType:null,data:null});case 2:if(i=l.h,a=i.data,!t.aesKey){l.A(3);break}return S(l,su(a,t.aesKey,n),4);case 4:a=l.h;case 3:return t instanceof Ha?t.me(a,!0):t.me(a),(s=i.headers["content-type"])&&(s=s.split(";")[0].toLowerCase()),l.return({mimeType:s,data:a})}})}function jv(e){if(yb(e)){if(e.Ga==Lb){for(var t=1/0,n=1/0,r=m(e.i.values()),o=r.next();!o.done;o=r.next())(o=o.value).stream.segmentIndex&&"text"!=o.stream.type&&!o.stream.isAudioMuxedInVideo&&(t=Math.min(t,o.qc),n=Math.min(n,o.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Hf(t)}}else e.l.rb(Xv(e));if(!e.l.o)for(n=(t=m(e.i.values())).next();!n.done;n=t.next())!(n=n.value).stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=Dl(n.stream.segmentIndex))&&n.h&&e.l.ph(n.h);e.l.kf()}function Fv(e,t,n){n=new ve(n).g;for(var r=new Map,o=(t=m(t)).next();!o.done;o=t.next()){var i=o.value,a=hv(i,"NAME"),s=hv(i,"VALUE");o=hv(i,"QUERYPARAM"),i=hv(i,"IMPORT"),a&&s&&(r.has(a)||r.set(a,s)),o&&(a=n.get(o)[0])&&!r.has(a)&&r.set(o,a),i&&(o=e.B.get(i))&&r.set(i,o)}return r}function zv(e){var t=new Set([or(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Gb(function(n){n.mimeType&&t.add(or(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function Vv(e,t,n){for(var r={audio:[],video:[]},o=new Map,i=[],a=!1,s=!1,l=m(t),u=l.next();!u.done;u=l.next()){var c=u.value;u=hv(c,"AUDIO");var f=hv(c,"VIDEO"),d=u||f;d&&(i.includes(d)||i.push(d),(c=hv(c,"PATHWAY-ID"))&&o.set(d,c),u?a=!0:f&&(s=!0))}i.length&&n.length&&function(e,t,n){t=t.filter(function(e){var t=hv(e,"URI")||"";return"SUBTITLES"!=(e=hv(e,"TYPE"))&&(""!=t||"AUDIO"==e)});for(var r={},o=(t=m(t)).next();!o.done;o=t.next()){var i=dv(o=o.value,!e.j);r[i]?r[i].push(o):r[i]=[o]}for(var a in r)qv(e,r[a],n,!1)}(e,n=n.filter(function(e){return i.includes(mv(e,"GROUP-ID"))}),o),n=(o=i.sort().join(","))&&e.M.has(o)?e.M.get(o):[],a?r.audio.push.apply(r.audio,g(n)):s&&r.video.push.apply(r.video,g(n)),s=!1;var p=t.map(function(e){return mv(e,"URI")});return a=r.audio.find(function(e){return e&&e.P().find(function(e){return p.includes(e)})}),l=lt("video",n=Hv(e,t[0])),(u=lt("audio",n))&&!l?(a="audio",s=r.audio.length>0&&!r.audio.some(function(e){return e.stream.isAudioMuxedInVideo})):!r.audio.length&&!r.video.length&&u&&l?(a="video",n=[[l,u].join()]):r.audio.length&&a?(a="audio",s=!0):a=r.video.length&&!r.audio.length?"audio":"video",s||(t=function(e,t,n,r){for(var o=e.G++,i=[],a=m(t),s=a.next();!s.done;s=a.next()){var l=s.value;s=mv(l,"URI"),l=hv(l,"PATHWAY-ID"),e.j&&l&&Lg(e.j,o,l,s),i.push(s)}if(a=i.sort().join(",")+n.sort().join(","),e.i.has(a))return e.i.get(a);s=i.join(",");e:{if(t=hv(t[0],"CLOSED-CAPTIONS"),"video"==r){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if("NONE"!=t){t=e.J.get(t);break e}e.R=!1}else if(!t&&e.J.size)for(t=(t=m(e.J.keys())).next();!t.done;t=t.next()){t=e.J.get(t.value);break e}}t=null}return n=st(r,n),r=Kv(e,o,i,n,r,null,!1,s,null,t,null,!1,null,!1),e.i.set(a,r),r}(e,t,n,a),o&&e.g.enableAudioGroups&&(t.stream.groupId=o),"audio"==t.stream.type&&"audio"===a&&r.audio.some(function(e){return e.stream.isAudioMuxedInVideo})&&(e=r.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),r[t.stream.type]=[t]),r}function Hv(e,t){return t=hv(t,"CODECS")||"",e.ba=t.length>0,e.ba||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),au(t.split(/\s*,\s*/))}function Gv(e,t,n,r,o,i,a,s,l,u,c,f){for(var d=m(n),p=d.next();!p.done;p=d.next())hb(p.value.stream,o,i,a,s,l,null);for(o=e.g.disableVideo,n.length&&!o||(n=[null]),o&&(t=t.filter(function(e){return!e.stream.isAudioMuxedInVideo})),o=e.g.disableAudio,t.length&&!o||(t=[null]),o=[],i=(t=m(t)).next();!i.done;i=t.next())for(i=i.value,s=(a=m(n)).next();!s.done;s=a.next()){var h=s.value;(s=i?i.stream:null)&&(s.drmInfos=u,s.keyIds=c),(l=h?h.stream:null)&&(l.drmInfos=u,l.keyIds=c,e.g.disableIFrames||ao(l,f)),l&&!s&&(l.bandwidth=r),!l&&s&&(s.bandwidth=r),d=i?i.stream.drmInfos:null,p=h?h.stream.drmInfos:null,h=h?h.P().sort().join(","):"";var g=i?i.P().sort().join(","):"",y=[];s&&s.codecs&&y.push(s.codecs),l&&l.codecs&&y.push(l.codecs),h=[h,g,y.sort()].join("-"),s&&l&&!bo(d,p)||e.ob.has(h)||(s={id:e.G++,language:s?s.language:"und",disabledUntilTime:0,primary:!!s&&s.primary||!!l&&l.primary,audio:s,video:l,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},o.push(s),e.ob.add(h))}return o}function qv(e,t,n,r){r=void 0===r||r;for(var o=[],i=[],a=new Map,s=m(t),l=s.next(),u={};!l.done;u={ii:void 0},l=s.next())l=l.value,u.ii=++e.G,u=function(e){return function(){return"shaka://hls-muxed"+e.ii}}(u),u=r?mv(l,"URI"):hv(l,"URI")||u(),l=mv(l,"GROUP-ID"),o.push(u),i.push(l),a.set(l,u);if(r=i.sort().join(","),l=t[0],t="",s=function(e){return"subtitles"==(e=mv(e,"TYPE").toLowerCase())&&(e=ct),e}(l),s==ct)t=hv(l,"CODECS")||"";else for(u=(i=m(i)).next();!u.done;u=i.next())if(u=u.value,e.K.has(u)){t=e.K.get(u);break}if(i=o.sort().join(","),e.i.has(i))return e.i.get(i);if(u=e.G++,e.j)for(var c=(a=m(a)).next();!c.done;c=a.next()){var f=m(c.value);c=f.next().value,f=f.next().value,(c=n.get(c))&&Lg(e.j,u,c,f)}n=hv(l,"LANGUAGE"),a=hv(l,"NAME"),c="YES"==hv(l,"DEFAULT"),f="audio"==s?function(e){return(e=hv(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}(l):null;var d="audio"==s&&function(e){return!!(e=hv(e,"CHANNELS"))&&2==(e=e.split("/")).length&&("JOC"===e[1]||e[1].includes("ATMOS"))}(l),p=hv(l,"CHARACTERISTICS"),h="YES"==hv(l,"FORCED");return l="audio"==s?function(e){return(e=hv(e,"SAMPLE-RATE"))?parseInt(e,10):null}(l):null,(o=Kv(e,u,o,t,s,n,c,a,f,null,p,h,l,d)).stream&&e.g.enableAudioGroups&&(o.stream.groupId=r),e.M.has(r)?e.M.get(r).push(o):e.M.set(r,[o]),e.i.set(i,o),o}function Wv(e,t){var n="video",r=mv(t,"URI"),o=hv(t,"CODECS")||"";if("mjpg"==o&&(n="image"),e.i.has(r))return e.i.get(r);var i=hv(t,"LANGUAGE"),a=hv(t,"NAME"),s=hv(t,"CHARACTERISTICS");return n=Kv(e,e.G++,[r],o,n,i,!1,a,null,null,s,!1,null,!1),i=m((o=hv(t,"RESOLUTION"))?o.split("x"):[null,null]),o=i.next().value,i=i.next().value,n.stream.width=Number(o)||void 0,n.stream.height=Number(i)||void 0,(t=hv(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(r,n),n}function Kv(e,t,n,r,o,i,a,s,l,u,c,f,d,p){function h(t){var n,h,v,x,w,T,A,M,R,_,L,P,D,N,U,B,j,F;return O(function(O){switch(O.g){case 1:return n=ft,C(O,2),S(O,t.promise,4);case 4:if(h=O.h,t.aborted)return O.return();if((v=h.uri)!=h.originalUri&&(b.P().includes(v)||b.Af.push(v)),1!=(x=Av(e.Ta,h.data)).type)throw new ze(2,4,4017);return w=vv(x.ha,"EXT-X-DEFINE"),T=Fv(e,w,v),A=!1,(!e.ba&&e.g.hls.disableCodecGuessing||e.R&&o==n.Ca&&!e.g.hls.disableClosedCaptionsDetection)&&x.segments.length>0&&(e.R=!1,A=!0),M=!e.ba&&e.g.hls.disableCodecGuessing,R=yb(e),S(O,Qv(e,0,T,x,g,r,o,i,a,s,l,u,c,f,d,p,void 0,A,M),5);case 5:if(_=O.h,t.aborted)return O.return();L=_.stream,rb(e,x),yb(e)&&!R&&ib(e,x),b.Wc=_.Wc,b.qc=_.qc,b.Re=_.Re,b.Qe=_.Qe,b.Wd=_.Wd,b.lf=_.lf,b.Rb=_.Rb,b.Sb=_.Sb,y.segmentIndex=L.segmentIndex,y.encrypted=L.encrypted,y.drmInfos=L.drmInfos,y.keyIds=L.keyIds,y.mimeType=L.mimeType,y.bandwidth=y.bandwidth||L.bandwidth,y.codecs=y.codecs||L.codecs,y.closedCaptions=y.closedCaptions||L.closedCaptions,y.width=y.width||L.width,y.height=y.height||L.height,y.hdr=y.hdr||L.hdr,y.colorGamut=y.colorGamut||L.colorGamut,y.frameRate=y.frameRate||L.frameRate,"und"==y.language&&"und"!=L.language&&(y.language=L.language),y.language=y.language||L.language,y.channelsCount=y.channelsCount||L.channelsCount,y.audioSamplingRate=y.audioSamplingRate||L.audioSamplingRate,zv(y),y.drmInfos.length&&e.h.newDrmInfo(y),P=!1,(!u&&y.closedCaptions||u&&y.closedCaptions&&u.size!=y.closedCaptions.size)&&(P=!0),e.m&&P&&e.h.makeTextStreamsForClosedCaptions(e.m),o==n.Na&&(D=Dl(L.segmentIndex))&&D.aa&&(y.mimeType="application/mp4",zv(y)),N=Gl(y),y.segmentIndex.Gb(function(e){e.aa&&(e.aa.xd=N)}),function(e){if(!e.m)return!1;for(var t=[],n=[],r=(e=m(e.m.variants)).next();!r.done;r=e.next())(r=r.value).video&&t.push(r.video),r.audio&&n.push(r.audio);return!(t.length>0&&!t.some(function(e){return e.segmentIndex})||n.length>0&&!n.some(function(e){return e.segmentIndex}))}(e)&&(e.yc?Yv(e,[b]):(e.yc=!0,U=Array.from(e.i.values()),B=U.filter(function(e){return e.stream.segmentIndex}),Yv(e,B),jv(e),(j=e.o)>0&&e.F.ka(j))),ub(e,x.ha,y.type,T,g),e.m&&(e.m.startTime=e.u),E(O,0);break;case 2:if(F=I(O),y.closeSegmentIndex(),7001===F.code)return O.return();if(!e.h.disableStream(y))throw F;k(O)}})}function g(){return e.j&&n.length>1?Pg(e.j,t):b.Af.concat(Tv([e.H],n,e.B))}var y=eb(e,r,o,i,a,s,l,u,c,f,d,p);n.some(function(e){return e.startsWith("shaka://hls-muxed")})&&(y.isAudioMuxedInVideo=!0,y.mimeType="video/mp2t",zv(y));var v,b={stream:y,type:o,Af:[],Wc:0,qc:0,lf:new Map,Re:!1,Qe:!1,Wd:!1,og:-1,Rb:-1,Sb:-1,P:g},x=null;return y.createSegmentIndex=function(){return x||(y.isAudioMuxedInVideo?(y.segmentIndex=new Pl([]),Promise.resolve()):(v=mb(e,b.P(),!0),x=new Promise(function(e){e(h(v))})))},y.closeSegmentIndex=function(){x&&!y.segmentIndex&&v.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),x=null},b}function Xv(e){for(var t=1/0,n=(e=m(e.i.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.qc));return t}function $v(e,t){for(var n=[],r=(t=m(t)).next();!r.done;r=t.next())(r=r.value).segmentIndex&&r.segmentIndex.Gb(function(e){n.push(e)});e.l.ge(n)}function Yv(e,t){if(!yb(e))for(var n=Xv(e),r=m(t),o=r.next();!o.done;o=r.next())o.value.stream.segmentIndex.pd(0,n);$v(e,t.map(function(e){return e.stream})),n=(r=Array.from(e.i.values()).filter(function(e){return e.stream.segmentIndex})).some(function(e){return"audio"==e.stream.type}),o=r.some(function(e){return"video"==e.stream.type}),r=yb(e)&&!e.kb,n=!yb(e)&&e.kb&&!(n&&o),e.g.hls.ignoreManifestProgramDateTime||r||n?Nv(e,t,r):(function(e,t){if(e.ma==1/0)for(var n=(t=m(t)).next();!n.done;n=t.next())null!=(n=Dl(n.value.stream.segmentIndex))&&null!=n.h&&(e.ma=Math.min(e.ma,n.h));if((t=e.ma)!=1/0)for(var r=(n=m(e.i.values())).next();!r.done;r=n.next())if(!Jv(e,(r=r.value).type)){var o=r.stream.segmentIndex;if(null!=o){var i=Dl(o);if(i)if(null==i.h)X("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.P(),"Expect AV sync issues!");else for(Uv(e,r,i.h-t-i.startTime),o=(r=m(o)).next();!o.done;o=r.next())o.value.Ah(t)}}}(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&Nv(e,t))}function Jv(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function Qv(e,t,n,r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b){var x,w,T,k,A,M,R,_,L,P,D,N,U,B,j,F,z,V,H,G,q,W,K,X,$,Y,J,Q,Z;return v=void 0===v||v,b=void 0===b||b,O(function(t){switch(t.g){case 1:if(x=r.segments||[],w=x.every(function(e){return!!xv(e.ha,"EXT-X-GAP")}),!x.length||w)throw new ze(2,4,4053);if(function(e,t){var n=xv(t.ha,"EXT-X-PLAYLIST-TYPE");t=xv(t.ha,"EXT-X-ENDLIST"),t=n&&"VOD"==n.value||t,n=n&&"EVENT"==n.value&&!t,n=!t&&!n,vb(e,t?Rb:n?Lb:_b)}(e,r),yb(e)&&ob(e,r),T=yb(e)?e.C.get(a):new Map,k=cb(e,r,T,n,o,a),A=k.segments,M=k.bandwidth,D=P=L=_=R=null,!(A.length>0&&v)){t.A(2);break}return S(t,function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x;return O(function(w){if(1==w.g)return n=ou(e.g.hls.mediaPlaylistFullMimeType),t.length?(r=pb(e,t),o=r.segment,i=r.segmentIndex,a=o.P(),s=a[0],l=new ve(s),u=l.qb.split(".").pop(),(c=Tb.get(u))?w.return(ou(c)):S(w,Promise.all([Bv(e,o.aa,0),Bv(e,o,i)]),2)):w.return(n);if(f=w.h,d=f[1].mimeType,p=f[0].data,h=f[1].data,g="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),y=["audio/mp4","video/mp4","video/iso.segment"],!(v=o.aa||y.includes(d))&&Rs(Ue(h))){var T=h,k=e.g.disableAudio,C=e.g.disableVideo,A=e.g.disableText,E=Ue(T),I=(new As).parse(E),M=I.Td();E=I.Kg();var R=[],_=!1,L=!1;if(!k)switch(M.audio){case"aac":case"aac-loas":I.xb().length&&(R.push("mp4a.40.2"),_=!0);break;case"mp3":I.xb().length&&(R.push("mp4a.40.34"),_=!0);break;case"ac3":I.xb().length&&(R.push("ac-3"),_=!0);break;case"ec3":I.xb().length&&(R.push("ec-3"),_=!0);break;case"opus":I.xb().length&&(R.push("opus"),_=!0)}if(!C)switch(M.video){case"avc":E.codec?R.push(E.codec):R.push("avc1.42E01E"),L=!0;break;case"hvc":E.codec?R.push(E.codec):R.push("hvc1.1.6.L93.90"),L=!0;break;case"av1":R.push("av01.0.01M.08"),L=!0}if(R.length){if(k=_&&!L,C=new Map,L&&!A){for((A=new Ct("video/mp2t")).xf(T),L=(T=m(A.Vf())).next();!L.done;L=T.next())L=L.value,C.set(L,L);A.Ld()}E={type:k?"audio":"video",mimeType:"video/mp2t",codecs:R.join(", "),language:null,height:E.height,width:E.width,channelCount:null,sampleRate:null,closedCaptions:C,ue:null,colorGamut:null,frameRate:E.frameRate}}else E=null;if(b=E)return w.return(b)}else if((v||g.includes(u))&&(x=iu(p,h,e.g.disableText)))return w.return(x);return d?w.return(ou(d)):w.return(n)})}(e,A),3);case 3:N=t.h,a!=N.type&&yb(e)&&(e.C.set(N.type,e.C.get(a)),e.C.set(a,new Map)),a=N.type,s=N.language,c=N.channelCount,h=N.sampleRate,e.g.disableText||(f=N.closedCaptions),_=N.height,R=N.width,L=N.ue,P=N.colorGamut,D=N.frameRate,b&&(y=N.mimeType,i=N.codecs);case 2:if(y){t.A(4);break}return S(t,function(e,t,n,r){var o,i,a,s,l,u,c,f,d,p,h,m,g;return O(function(y){switch(y.g){case 1:return o=Yo,i=pb(e,r),2==(a=i.segment).status?y.return(db(t)):(s=a.P(),l=new ve(s[0]),u=l.qb.split(".").pop(),c=Ib.get(t),(f=c.get(u))||(f=Tb.get(u))||(f=fb(t,n))?y.return(f):(p=1,h=qo(s,e.g.retryParameters),C(y,2),h.method="HEAD",S(y,bb(e,h,o,{type:p}).promise,4)));case 4:m=y.h,d=m.headers["content-type"],E(y,3);break;case 2:if(!(g=I(y))||1002!=g.code&&1001!=g.code){y.A(3);break}return h.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(h.headers.Range="bytes=0-0"),S(y,bb(e,h,o,{type:p}).promise,6);case 6:m=y.h,d=m.headers["content-type"];case 3:if(!d){y.A(7);break}if("application/octet-stream"!=(f=d.toLowerCase().split(";")[0])){y.A(8);break}if(m.data.byteLength){y.A(9);break}return h.method="GET",S(y,bb(e,h,o,{type:p}).promise,10);case 10:m=y.h;case 9:Rs(Ue(m.data))&&(f="video/mp2t");case 8:if("application/octet-stream"!=f)return y.return(f);case 7:return y.return(db(t))}})}(e,a,i,A),5);case 5:y=t.h,a!=ct||i||"application/mp4"!=y||!A[0]||A[0].aa||(y="text/vtt");case 4:return S(t,tb(e,r,y,o,n),6);case 6:if(U=t.h,B=U.drmInfos,j=U.keyIds,F=U.encrypted,z=U.Mh,F&&!B.length&&!z)throw new ze(2,4,4026);return(V=eb(e,i,a,s,l,u,c,f,d,p,h,g)).encrypted=F&&!z,V.drmInfos=B,V.keyIds=j,V.mimeType=y,M&&(V.bandwidth=M),zv(V),"video"==a&&(R||_||L||P)&&hb(V,R,_,D,L,null,P),yb(e)&&ob(e,r),H=A[0].startTime,G=A[A.length-1],q=G.endTime,W=new Pl(A),V.segmentIndex=W,X=!!(K=xv(r.ha,"EXT-X-SERVER-CONTROL"))&&null!=pv(K,"CAN-SKIP-UNTIL"),$=!!K&&null!=pv(K,"CAN-BLOCK-RELOAD"),Y=wv(r.ha,"EXT-X-MEDIA-SEQUENCE",0),J=Zv(Y,A),Q=J.Rb,Z=J.Sb,t.return({stream:V,type:a,Af:[],P:o,Wc:H,qc:q,Re:X,Qe:$,Wd:!1,og:-1,Rb:Q,Sb:Z,lf:T})}})}function Zv(e,t){e=e+t.length-1;var n=-1;if(!t.length)return{Rb:++e,Sb:n};var r=(t=t[t.length-1]).g;return t.g.length?(n=r.length-1,r[r.length-1].isPreload()||(e++,n=0),{Rb:e,Sb:n}):(e++,t.m&&(n=0),{Rb:e,Sb:n})}function eb(e,t,n,r,o,i,a,s,l,u,c,f){var d=fb(n,t)||db(n),p=[];if(l)for(var h=(l=m(l.split(","))).next();!h.done;h=l.next())p.push(h.value);return l=void 0,h=null,n==ct?l=p.includes("public.accessibility.transcribes-spoken-dialog")&&p.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":p.includes("public.accessibility.describes-video")&&(h="visually impaired"),p.length||"subtitle"!==l||p.push("subtitle"),zv(e={id:e.G++,originalId:i,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:d,codecs:t,kind:n==ct?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Lr(r||"und"),originalLanguage:r,label:i,type:n,primary:o,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:u,channelsCount:a,audioSamplingRate:c,spatialAudio:f,closedCaptions:s,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:h,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}),e}function tb(e,t,n,r,o){var i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w,T,k,C,A,E,I,M,R,_,L,P,D,N;return O(function(O){switch(O.g){case 1:if(i=new Map,!e.g.ignoreDrmInfo&&t.segments)for(a=m(t.segments),s=a.next();!s.done;s=a.next())if(l=s.value,u=vv(l.ha,"EXT-X-KEY"),c=null,u.length)for(c=ab(e,t,l.ha,r,o),f=m(u),d=f.next();!d.done;d=f.next())p=d.value,i.set(p,c);g=h=!1,y=[],v=new Set,b=m(i),x=b.next();case 2:if(x.done){O.A(4);break}if(w=x.value,T=m(w),k=T.next().value,C=T.next().value,E=C,"NONE"==(I=mv(A=k,"METHOD"))){O.A(3);break}if(h=!0,M=hv(A,"KEYFORMAT")||"identity",R=null,xb(I)){g=!0,O.A(3);break}if("identity"==M)return S(O,wb(e,A,n,r,E,o),11);if(!(_=e.uc.get(M))){L=null,O.A(9);break}return S(O,_(A,n,E),10);case 10:L=O.h;case 9:R=L,O.A(6);break;case 11:R=O.h;case 6:if(R){if(R.keyIds)for(P=m(R.keyIds),D=P.next();!D.done;D=P.next())N=D.value,v.add(N);y.push(R)}case 3:x=b.next(),O.A(2);break;case 4:return O.return({drmInfos:y,keyIds:v,encrypted:h,Mh:g})}})}function nb(t,n,r,o,i){if(!e.crypto||!e.crypto.subtle)throw $("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new ze(2,4,4042);var a=0,s=hv(n,"IV","");if(s){var l=tt(s.substr(2));if(16!=l.byteLength)throw new ze(2,4,4048)}else a=wv(r.ha,"EXT-X-MEDIA-SEQUENCE",0);var u=Sv(o(),mv(n,"URI"),i),c=u.sort().join("");if(r=n.toString()+"-"+a+"-"+c,!t.wa.has(r)){var f={bitsKey:128,blockCipherMode:"CBC",iv:l,firstMediaSequenceNumber:a};switch(mv(n,"METHOD")){case"AES-256":f.bitsKey=256;break;case"AES-256-CTR":f.bitsKey=256,f.blockCipherMode="CTR"}f.fetchKey=function(){var n,r,o,i;return O(function(a){if(1==a.g)return t.O.has(c)||(n=qo(u,t.g.retryParameters),r=bb(t,n,6).promise,t.O.set(c,r)),S(a,t.O.get(c),2);if(3!=a.g){if(!(o=a.h).data||o.data.byteLength!=f.bitsKey/8)throw new ze(2,4,4049);return i={name:"CTR"==f.blockCipherMode?"AES-CTR":"AES-CBC",length:f.bitsKey},S(a,e.crypto.subtle.importKey("raw",o.data,i,!0,["decrypt"]),3)}f.cryptoKey=a.h,f.fetchKey=void 0,k(a)})},t.wa.set(r,f)}return t.wa.get(r)}function rb(e,t){null==e.u&&(t=xv(t.ha,"EXT-X-START"))&&(e.u=Number(mv(t,"TIME-OFFSET")))}function ob(e,t){var n=1/0,r=t.segments;if(r.length)for(var o=r.length-1;o>=0;){var i=xv(r[o].ha,"EXTINF");if(i){n=Number(i.value.split(",")[0]);break}o--}if(!(r=xv(t.ha,"EXT-X-TARGETDURATION")))throw new ze(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(o=xv(t.ha,"EXT-X-PART-INF"))&&(e.S=Number(mv(o,"PART-TARGET"))),t=xv(t.ha,"EXT-X-SERVER-CONTROL"),e.oa&&e.S?(e.o=e.xc?5*e.S<=n?Math.min(e.S,e.o):Math.min(n,e.o):Math.min(e.S,e.o),e.ab=t?Number(mv(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?pv(t,"HOLD-BACK"):null,e.Sa=n?Number(n.value):0),e.ib=Math.max(r,e.ib)}function ib(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.ab)n=e.ab;else if(e.Sa)n=e.Sa;else for(var r=t.segments.length,o=r-Math.min(r,e.g.hls.liveSegmentsDelay);o<r;o++){var i=xv(t.segments[o].ha,"EXTINF");n=i?n+Number(i.value.split(",")[0]):n+e.ib}e.u&&e.u<0&&(n=Math.min(-e.u,n),e.u+=n),e.l.Qi(0),e.l.oh(n),e.l.cd(!1)}function ab(e,t,n,r,o){var i=xv(n,"EXT-X-MAP");if(!i)return null;var a=mv(i,"URI"),s=Sv(r(),a,o);if(a=[s.toString(),hv(i,"BYTERANGE","")].join("-"),!e.Da.has(a)){for(var l=void 0,u=null,c=!1,f=(n=m(n)).next();!f.done;f=n.next())"EXT-X-KEY"==(f=f.value).name?xb(c=mv(f,"METHOD"))&&f.id<i.id?(c=!1,l=nb(e,f,t,r,o)):c="NONE"!=c:"EXT-X-BYTERANGE"==f.name&&f.id<i.id&&(u=f);t=function(e,t,n,r,o){var i=0,a=null;return!(t=hv(t,"BYTERANGE"))&&n&&(t=n.value),t&&(i=t.split("@"),a=Number(i[0]),i=Number(i[1]),a=i+a-1,r&&((n=a+1-i)%16&&(a+=16-n%16))),new za(function(){return e},i,a,null,null,null,r,o)}(s,i,u,l,c),e.Da.set(a,t)}return e.Da.get(a)}function sb(t,n,r,o,i,a,s,l,u){function c(e){e=new ve(e).qb.split(".").pop();var t=Ib.get(s).get(e);return t||(t=Tb.get(e)),t}var f=o.ha,d=xv(f,"EXTINF"),p=0,h=0,g=null;o.vc.length&&(t.m.isLowLatency=!0);var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var v=xv(f,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=an(v.value),t.kb=!0)}var b=qa;if(xv(f,"EXT-X-GAP")&&(t.m.gapCount++,b=2),!d){if(0==o.vc.length)throw new ze(2,4,4024,"EXTINF");if(!t.oa)return null}var x=[];v=!1;var w=null,S=!1,T=!1;if(t.oa&&o.vc.length){p=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var k=y,C={},A=0;A<o.vc.length;C={Qf:void 0,wf:void 0},A++){var E=o.vc[A],I=0==A?r:x[x.length-1],M=0==A?i:I.endTime,R=Number(hv(E,"DURATION"))||t.S;if(R){var _=M+R,L=0,P=null;if("EXT-X-PRELOAD-HINT"==E.name?(L=(L=hv(E,"BYTERANGE-START"))?Number(L):0,(I=hv(E,"BYTERANGE-LENGTH"))?P=L+Number(I)-1:L&&(P=Number.MAX_SAFE_INTEGER)):(L=(P=m(lb(I,L=hv(E,"BYTERANGE")))).next().value,P=P.next().value),C.wf=hv(E,"URI"),C.wf){I=qa,"YES"==hv(E,"GAP")&&(t.m.gapCount++,I=2,S=!0),C.Qf=null;var D=function(e){return function(){return null==e.Qf&&(e.Qf=Sv(l(),e.wf,a)),e.Qf}}(C);p&&L>=0&&null!=P&&(w=D,v=!0),M=new Ha(M,_,D,L,P,n,0,0,1/0,[],"",null,k,I,u),"EXT-X-PRELOAD-HINT"==E.name&&(M.Rg(),T=!0),"YES"!=hv(E,"INDEPENDENT")&&A>0&&M.wd(),(C=c(C.wf))&&(M.mimeType=C,Mb.has(C)&&(M.aa=null)),x.push(M),k&&(k+=R)}}}}if(d){if(0==(d=Number(d.value.split(",")[0])))return null;p=i+d}else{if(!x.length)return null;p=x[x.length-1].endTime}v&&(S||0!=x[0].startByte?(v=!1,w=null):x=[]),(d=xv(f,"EXT-X-BYTERANGE"))?(h=(g=m(lb(r,d.value))).next().value,g=g.next().value):x.length&&(h=x[0].startByte,g=x[x.length-1].endByte),r="",d=null,"image"==s&&(r="1x1",f=xv(f,"EXT-X-TILES"))&&(r=mv(f,"LAYOUT"),(f=hv(f,"DURATION"))&&(d=Number(f)));var O=null;return n=new Ha(i,p,function(){return w?w():(null==O&&(O=Sv(l(),o.g,a)),O||[])},h,g,n,0,0,1/0,x,r,d,y,b,u,x.length>0&&!!o.g),(i=c(o.g))&&(n.mimeType=i,Mb.has(i)&&(n.aa=null)),v&&(t.xc=!0,n.oi(),T&&n.Rg()),n}function lb(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),r=(n=n[1]?Number(n[1]):e.endByte+1)+t-1),[n,r]}function ub(e,t,n,r,o){if("video"==n||"audio"==n){var i=e.l.m;if(i&&!Jv(e,n))for(t=(t=vv(t,"EXT-X-DATERANGE")).filter(function(e){return null!=pv(e,"START-DATE")}).sort(function(e,t){return(e=mv(e,"START-DATE"))<(t=mv(t,"START-DATE"))?-1:e>t?1:0}),n=0;n<t.length;n++){var a=t[n];try{var s=an(mv(a,"START-DATE"));if(!isNaN(s)){var l=Math.max(0,s-i),u=null,c=hv(a,"END-DATE");if(c){var f=an(c);if(!isNaN(f)&&(u=f-i)<0)continue}if(null==u){var d=hv(a,"DURATION")||hv(a,"PLANNED-DURATION");if(d){var p=parseFloat(d);if(isNaN(p)||(u=l+p),s-i+p<0)continue}}var h=hv(a,"CLASS")||"com.apple.quicktime.HLS",g="YES"==hv(a,"END-ON-NEXT");if(null==u&&g){for(var y=n+1;y<t.length;y++)if(h==(hv(t[y],"CLASS")||"com.apple.quicktime.HLS")){var v=an(mv(t[y],"START-DATE"));if(!isNaN(v)&&v&&v>s){u=Math.max(0,v-i);break}}if(null==u)continue}y=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var b=[],x=m(a.attributes),w=x.next();!w.done;w=x.next()){var S=w.value;if(!y.includes(S.name)){var T=kv(S.value,r);"X-ASSET-URI"!=S.name&&"X-ASSET-LIST"!=S.name||(T=Sv(o(),S.value,r)[0]),b.push({key:S.name,description:"",data:T,mimeType:null,pictureType:null})}}b.length>1&&e.h.onMetadata(h,l,u,b)}}catch(k){}}}}function cb(e,t,n,r,o,i){var a=t.segments,s=void 0,l=wv(t.ha,"EXT-X-DISCONTINUITY-SEQUENCE",-1),u=wv(t.ha,"EXT-X-MEDIA-SEQUENCE",0),c=xv(t.ha,"EXT-X-SKIP"),f=c?Number(hv(c,"SKIPPED-SEGMENTS")):0,d=u+f,p=0;yb(e)&&n.has(d)&&(p=n.get(d)),0===p&&e.Ga==Lb&&n.size>0&&!n.has(d)&&null!=e.l.i&&(p=e.l.Ib());var h=[],g=null;c=[];for(var y=0;y<a.length;y++){var v=a[y],b=0==y?p:g.endTime;d=u+f+y,xv(v.ha,"EXT-X-DISCONTINUITY")&&(l++,g&&g.aa&&(g.aa.g=b));for(var x=m(v.ha),w=x.next();!w.done;w=x.next())"EXT-X-KEY"==(w=w.value).name&&(s=xb(mv(w,"METHOD"))?nb(e,w,t,o,r):void 0);n.set(d,b),(b=sb(e,x=ab(e,t,v.ha,o,r),g,v,b,r,i,o,s))&&((g=wv(v.ha,"EXT-X-BITRATE"))?c.push({bitrate:g,duration:b.endTime-b.startTime}):c.length&&((g=c.pop()).duration+=b.endTime-b.startTime,c.push(g)),g=b,b.i=l,Jv(e,i)&&null!=e.N&&d<e.N||h.push(b))}if(t=void 0,c.length&&(t=c.reduce(function(e,t){return e+t.duration},0),t=Math.round(c.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),c=h.some(function(e){return null!=e.h}))for(n={},r=0;r<h.length;n={Ve:void 0,Ue:void 0,Ne:void 0,Zc:void 0,Me:void 0},r++)if(n.Zc=h[r],null==n.Zc.h)for(n.Ue=0,n.Ve=r,o=function(e){return function(){var t=h[e.Ve];if(t){if(null!=t.h)return t.h+e.Ue;e.Ue-=t.endTime-t.startTime,e.Ve+=1}return null}}(n),n.Me=0,n.Ne=r,a=function(e){return function(){var t=h[e.Ne];if(t){if(t!=e.Zc&&(e.Me+=t.endTime-t.startTime),null!=t.h)return t.h+e.Me;--e.Ne}return null}}(n);null==n.Zc.h;)n.Zc.h=a(),null==n.Zc.h&&(n.Zc.h=o());if(c)for(r=(n=m(h)).next();!r.done;r=n.next())for(r=(o=r.value).h,a=(o=m(o.g)).next();!a.done;a=o.next())(a=a.value).h=r,r+=a.endTime-a.startTime;if(n=e.ma,c&&n!=1/0&&!Jv(e,i))for(i=(e=m(h)).next();!i.done;i=e.next())i.value.Ah(n);return{segments:h,bandwidth:t}}function fb(e,t){if(e==ct){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function db(e){return e==ct?"text/vtt":Ib.get(e).get("mp4")}function pb(e,t){for(var n=t[e=yb(e)?Math.trunc((t.length-1)/2):0];2==n.Kc()&&e+1<t.length;)n=t[++e];return{segment:n,segmentIndex:e}}function hb(e,t,n,r,o,i,a){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=o||void 0,e.videoLayout=i||void 0,e.colorGamut=a||void 0)}function mb(e,t,n){return bb(e,qo(t,e.g.retryParameters),0,{type:n?2:3})}function gb(e){var t,n,r,o,i,a;return O(function(s){switch(s.g){case 1:return e.h?(C(s,2),t=Date.now(),S(s,e.update(),4)):s.return();case 4:n=Date.now(),yb(e)&&(r=(n-t)/1e3,e.Zb.sample(1,r),o=e.g.updatePeriod>0?e.g.updatePeriod:e.o,i=Math.max(0,o-q(e.Zb)),e.F.ka(i)),E(s,3);break;case 2:if(a=I(s),!e.h)return s.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(a),s.return();a.severity=1,e.h.onError(a),e.F.ka(.1);case 3:if(!e.h)return s.return();e.h.onManifestUpdated(),k(s)}})}function yb(e){return e.Ga!=Rb}function vb(e,t){e.Ga=t,e.l&&e.l.cd(!yb(e)),yb(e)||e.F.stop()}function bb(e,t,n,r){if(!e.$)throw new ze(2,7,7001);return r||(r={}),r.isPreload=e.ac(),t=e.h.networkingEngine.request(n,t,r),zo(e.$,t),t}function xb(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function wb(t,n,r,o,i,a){var s,l,u,c,f,d,p,h,m,g,y;return O(function(v){switch(v.g){case 1:if("video/mp2t"==r)throw new ze(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new ze(2,4,4041);if(s=mv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(s))return v.return(null);if((l=Sv(o(),mv(n,"URI"),a))[0].startsWith("data:text/plain;base64,")){u=nt(et(l[0].split("data:text/plain;base64,").pop())),v.A(2);break}return c=l.sort().join(""),t.xa.has(c)||(f=qo(l,t.g.retryParameters),d=bb(t,f,6).promise,t.xa.set(c,d)),S(v,t.xa.get(c),3);case 3:p=v.h,u=nt(p.data);case 2:if(h="00000000000000000000000000000000",!i){v.A(4);break}return S(v,Sb(t,i),5);case 5:(m=v.h)&&(h=m);case 4:return(g=new Map).set(h,u),y="cenc","SAMPLE-AES"==s&&(y="cbcs"),v.return(at(g,y))}})}function Sb(e,t){var n,r,o;return O(function(i){return 1==i.g?(n=null,e.ya.has(t)?(n=e.ya.get(t),i.A(2)):(r=lu(t.P(),t.Jc(),t.Gc(),e.g.retryParameters),S(i,bb(e,r,Yo,{type:0}).promise,3))):(2!=i.g&&(o=i.h,t.me(o.data),n=function(e){var t=null;return(new si).box("moov",li).box("trak",li).box("mdia",li).box("minf",li).box("stbl",li).T("stsd",ui).box("encv",ci).box("enca",fi).box("sinf",li).box("schi",li).T("tenc",function(e){(e=e.reader).Y(),e.Y(),e.Y(),e.Y(),t=nt(e.Tb(16))}).parse(e,!0),t}(o.data),e.ya.set(t,n)),i.return(n))})}H("shaka.net.DataUriPlugin",Rv),Rv.parse=_v,Ho("data",_v),(o=Pv.prototype).configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.ac=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.W()&&this.F.Kb()},o.start=function(e,t){var n,r=this;return O(function(o){return 1==o.g?(r.h=t,r.oa=t.isLowLatencyMode(),S(o,mb(r,[e]).promise,2)):3!=o.g?(n=o.h,r.H=n.uri,S(o,function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,y,v,b,x,w,T,A,E,M,R,_,L,P,D,N,U,B,j,F,z,V,H,G,q,W,K,X,$,Y,J;return O(function(Q){switch(Q.g){case 1:return n=ft,r=Av(e.Ta,t),o=vv(r.ha,"EXT-X-DEFINE"),i=[],a=[],s=[],e.l=new cl(null,0),e.l.cd(!0),l=function(){return[e.H]},u=null,c=new Map,1==r.type?(e.R=!1,F=vv(r.ha,"EXT-X-DEFINE"),c=Fv(e,F,e.H),u=n.Ca,z="",V=new Map,S(Q,Qv(e,e.G++,c,r,l,"",u,z,!0,"Media Playlist",null,V,null,!1,null,!1),7)):(function(e,t){for(var n=new ve(e.H).g,r=(t=m(t)).next();!r.done;r=t.next()){var o=r.value;r=hv(o,"NAME");var i=hv(o,"VALUE");o=hv(o,"QUERYPARAM"),r&&i&&(e.B.has(r)||e.B.set(r,i)),o&&(r=n.get(o)[0])&&!e.B.has(r)&&e.B.set(o,r)}}(e,o),f=vv(r.ha,"EXT-X-MEDIA"),d=vv(r.ha,"EXT-X-STREAM-INF"),p=vv(r.ha,"EXT-X-IMAGE-STREAM-INF"),h=vv(r.ha,"EXT-X-I-FRAME-STREAM-INF"),y=vv(r.ha,"EXT-X-SESSION-KEY"),v=vv(r.ha,"EXT-X-SESSION-DATA"),b=vv(r.ha,"EXT-X-CONTENT-STEERING"),function(e,t){for(var n=(t=m(t)).next();!n.done;n=t.next()){var r=n.value,o=hv(r,"DATA-ID");n=hv(r,"URI");var i=hv(r,"LANGUAGE");r=hv(r,"VALUE"),o=(new Map).set("id",o),n&&o.set("uri",Sv([e.H],n,e.B)[0]),i&&o.set("language",i),r&&o.set("value",r),n=new No("sessiondata",o),e.h&&e.h.onEvent(n)}}(e,v),S(Q,function(e,t){var n,r,o,i,a,s;return O(function(l){if(!e.h||!e.g)return l.return();for(r=m(t),o=r.next();!o.done;o=r.next())if(i=o.value,a=hv(i,"PATHWAY-ID"),s=hv(i,"SERVER-URI"),a&&s){e.j=new Mg(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=a,n=Rg(e.j,s);break}return S(l,n,0)})}(e,b),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(x=[],w=m(d),T=w.next(),A={};!T.done;A={Yi:void 0},T=w.next())E=T.value,(M=hv(E,"SUPPLEMENTAL-CODECS"))&&(A.Yi=M.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),R=E.attributes.map(function(e){return function(t){var n=t.name,r=t.value;return"CODECS"==n&&(r=e.Yi.join(","),(t=t.value.split(",")).length>1&&(t=lt("audio",t))&&(r+=","+t)),new yv(n,r)}}(A)),x.push(new fv(E.id,E.name,R,null)));for(d.push.apply(d,g(x)),_=[],L=m(h),P=L.next(),D={};!P.done;D={Zi:void 0},P=L.next())N=P.value,(U=hv(N,"SUPPLEMENTAL-CODECS"))&&(D.Zi=U.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),B=N.attributes.map(function(e){return function(t){var n=t.name;return t=t.value,"CODECS"==n&&(t=e.Zi.join(",")),new yv(n,t)}}(D)),_.push(new fv(N.id,N.name,B,null)));h.push.apply(h,g(_))}return function(e,t){for(var n=(t=m(t)).next();!n.done;n=t.next()){var r=n.value,o=hv(r,"AUDIO");n=hv(r,"VIDEO");var i=hv(r,"SUBTITLES");if(r=Hv(e,r),i){var a=lt(ct,r);e.K.set(i,a),ee(r,a)}o&&((i=lt("audio",r))||(i=e.g.hls.defaultAudioCodec),e.K.set(o,i)),n&&((o=lt("video",r))||(o=e.g.hls.defaultVideoCodec),e.K.set(n,o))}}(e,d),function(e,t){t=bv(t,"CLOSED-CAPTIONS"),e.R=0==t.length;for(var n=(t=m(t)).next();!n.done;n=t.next()){var r=n.value,o=hv(r,"LANGUAGE");n=Lr(o||"und"),o||(o=hv(r,"NAME"))&&(n=o),o=mv(r,"GROUP-ID"),r=mv(r,"INSTREAM-ID").replace("SERVICE","svc"),e.J.get(o)||e.J.set(o,new Map),e.J.get(o).set(r,n)}}(e,f),j=function(e,t){return t.map(function(t){return"video"!==(t=Wv(e,t)).stream.type?null:t.stream}).filter(function(e){return e})}(e,h),S(Q,function(e,t,n,r,o,i,a){var s,l,u,c,f,d,p,h,y,v,b,x,w,T,k,C,A,E,I,M,R,_,L,P,D,N,U,B,j,F,z,V,H,G,q,W;return O(function(O){switch(O.g){case 1:if(s=[],l=new Set,e.g.ignoreDrmInfo||!(n.length>0)){O.A(2);break}u=m(n),c=u.next();case 3:if(c.done){O.A(2);break}if(f=c.value,d=mv(f,"METHOD"),p=hv(f,"KEYFORMAT")||"identity",h=null,"NONE"==d){O.A(4);break}if(xb(d)){y=Sv(o(),mv(f,"URI"),i),v=y.sort().join(""),e.O.has(v)||(b=qo(y,e.g.retryParameters),x=bb(e,b,6).promise,e.O.set(v,x)),O.A(4);break}if("identity"==p)return S(O,wb(e,f,"",o,null,i),12);if(!(w=e.uc.get(p))){T=null,O.A(10);break}return S(O,w(f,"",null),11);case 11:T=O.h;case 10:h=T,O.A(6);break;case 12:h=O.h;case 6:if(h){if(h.keyIds)for(k=m(h.keyIds),C=k.next();!C.done;C=k.next())A=C.value,l.add(A);s.push(h)}case 4:c=u.next(),O.A(3);break;case 2:for(E={},I=m(t),M=I.next();!M.done;M=I.next())R=M.value,_=dv(R,!e.j),E[_]?E[_].push(R):E[_]=[R];for(P in L=[],E)D=E[P],N=D[0],U=hv(N,"FRAME-RATE"),B=Number(hv(N,"AVERAGE-BANDWIDTH"))||Number(mv(N,"BANDWIDTH")),j=hv(N,"RESOLUTION"),F=m(j?j.split("x"):[null,null]),z=F.next().value,V=F.next().value,H=hv(N,"VIDEO-RANGE"),(G=hv(N,"REQ-VIDEO-LAYOUT"))&&G.includes(",")&&(q=G.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e}),G=q[0]),G=G||"CH-MONO",W=Vv(e,D,r),L.push.apply(L,g(Gv(e,W.audio,W.video,B,z,V,U,H,G,s,l,a)));return O.return(L.filter(function(e){return null!=e}))}})}(e,d,y,f,l,e.B,j),5);case 5:return i=Q.h,a=function(e,t){var n=bv(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return qv(e,[t],new Map).stream}catch(s){if(e.g.hls.ignoreTextStreamFailures)return null;throw s}});for(var r=(n=m(n)).next();!r.done;r=n.next()){var o=mv(r.value,"GROUP-ID");if((r=e.K.get(o))&&(o=e.M.get(o)))for(var i=(o=m(o)).next();!i.done;i=o.next())(i=i.value).stream.codecs=r,i.stream.mimeType=fb(ct,r)||db(ct),zv(i.stream)}return t.filter(function(e){return e})}(e,f),S(Q,function(e,t,n){var r,o;return O(function(i){return 1==i.g?(r=t.map(function(t){var n,r;return O(function(o){if(1==o.g)return e.g.disableThumbnails?o.return(null):(C(o,2),S(o,function(e,t){var n,r,o,i,a,s,l,u,c,f;return O(function(d){return 1==d.g?(n=mv(t,"URI"),r=hv(t,"CODECS","jpeg")||"",e.i.has(n)?d.return(e.i.get(n)):(o=hv(t,"LANGUAGE"),i=hv(t,"NAME"),a=hv(t,"CHARACTERISTICS"),s=Kv(e,e.G++,[n],r,"image",o,!1,i,null,null,a,!1,null,!1),(l=hv(t,"RESOLUTION"))?S(d,s.stream.createSegmentIndex(),3):d.A(2))):(2!=d.g&&(u=Dl(s.stream.segmentIndex),c=u.tilesLayout)&&(s.stream.width=Number(l.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(l.split("x")[1])*Number(c.split("x")[1])),(f=hv(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(f)),e.i.set(n,s),d.return(s))})}(e,t),4));if(2!=o.g)return n=o.h,o.return(n.stream);if(r=I(o),e.g.hls.ignoreImageStreamFailures)return o.return(null);throw r})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=Wv(e,t);return"image"!==n.stream.type?null:n.stream}catch(l){if(e.g.hls.ignoreImageStreamFailures)return null;throw l}})),S(i,Promise.all(r),2)):(o=i.h,i.return(o.filter(function(e){return e})))})}(e,p,h),6);case 6:s=Q.h,Q.A(3);break;case 7:H=Q.h,e.i.set(e.H,H),H.stream&&(G=Gl(H.stream),H.stream.segmentIndex.Gb(function(e){e.aa&&(e.aa.xd=G)})),u=H.stream.type,q=!0,(e.g.disableAudio&&"audio"==H.type||e.g.disableVideo&&"video"==H.type&&!H.stream.codecs.includes(","))&&(q=!1),q&&i.push({id:0,language:Lr(z||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==H.type?H.stream:null,video:"video"==H.type?H.stream:null,bandwidth:H.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new ze(2,7,7001);if(rb(e,r),1==r.type&&(yb(e)&&(ib(e,r),W=e.o,e.F.ka(W)),K=Array.from(e.i.values()),Yv(e,K),jv(e),ub(e,r.ha,u,c,l)),e.m={presentationTimeline:e.l,variants:i,textStreams:a,imageStreams:s,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.ba||!e.g.hls.disableCodecGuessing){Q.A(8);break}for(X=[],$=m(e.m.variants),Y=$.next();!Y.done;Y=$.next())(J=Y.value).audio&&""===J.audio.codecs&&X.push(J.audio.createSegmentIndex()),J.video&&""===J.video.codecs&&X.push(J.video.createSegmentIndex());return S(Q,Promise.all(X),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),k(Q)}})}(r,n.data),3)):o.return(r.m)})},o.stop=function(){this.F&&(this.F.stop(),this.F=null);var e=[];return this.$&&(e.push(this.$.destroy()),this.$=null),this.g=this.h=null,this.ob.clear(),this.m=null,this.i.clear(),this.M.clear(),this.K.clear(),this.B.clear(),this.Da.clear(),this.wa.clear(),this.O.clear(),this.xa.clear(),this.ya.clear(),this.I.clear(),this.j&&this.j.destroy(),this.V&&(this.V.release(),this.V=null),Promise.all(e)},o.update=function(){var e,t,n,r,o,i,a,s,l,u,c,f=this;return O(function(d){if(1==d.g){if(!yb(f))return d.return();for(e=[],t=Array.from(f.i.values()),f.o=1/0,f.m.gapCount=0,n=t.filter(function(e){return e.stream.segmentIndex}),r=m(n),o=r.next();!o.done;o=r.next())i=o.value,e.push(Ov(f,i));return S(d,Promise.all(e),2)}for($v(f,n.map(function(e){return e.stream})),a=n.some(function(e){return 0==e.Wd}),n.length&&!a&&(vb(f,Pb.ij),s=n.map(function(e){return e.qc}),f.l.rb(Math.min.apply(Math,g(s))),f.h.updateDuration()),a&&jv(f),l=m(n),u=l.next();!u.done;u=l.next())(c=u.value).stream.isAudioMuxedInVideo||!c.stream.segmentIndex||Dl(c.stream.segmentIndex)||f.h.disableStream(c.stream);k(d)})},o.onExpirationUpdated=function(){},o.onInitialVariantChosen=function(){},o.banLocation=function(e){this.j&&this.j.banLocation(e)},o.setMediaElement=function(e){this.X=e},H("shaka.hls.HlsParser",Pv);var Tb=(new Map).set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),kb=(new Map).set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),Cb=(new Map).set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),Ab=(new Map).set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),Eb=(new Map).set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Ib=(new Map).set("audio",kb).set("video",Cb).set("text",Ab).set("image",Eb),Mb=new Set(["video/mp2t"].concat(g(hr))),Rb="VOD",_b="EVENT",Lb="LIVE",Pb={ij:Rb,Hl:_b,Rl:Lb};function Db(e){return Km(e)}ea("application/x-mpegurl",function(){return new Pv}),ea("application/vnd.apple.mpegurl",function(){return new Pv});var Ob=(new Map).set("com.microsoft.playready",Db).set("com.microsoft.playready.recommendation",Db).set("com.microsoft.playready.software",Db).set("com.microsoft.playready.hardware",Db);function Nb(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new G(5),this.o=new Tr(function(){!function(e){var t;O(function(n){switch(n.g){case 1:return C(n,2),S(n,Ub(e),4);case 4:E(n,3);break;case 2:t=I(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();k(n)}})}(e)}),this.C=new Fo,this.m=new Map,this.B=function(){return!1}}function Ub(e){var t,n,r,o,i,a,s;return O(function(l){if(1==l.g)return t=qo(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),o=n.request(0,t,{type:5,isPreload:e.B()}),zo(e.C,o),S(l,o.promise,2);if(i=l.h,!e.h)return l.return();i.uri&&!e.l.includes(i.uri)&&e.l.unshift(i.uri);var u=i.uri,c=i.data,f=e.g.mss.manifestPreprocessor;if(f!=rc){if(pe("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),!(c=yy(c,"SmoothStreamingMedia")))throw new ze(2,4,4046,u);f(c),c=We(c.outerHTML)}var d=Gt(c,"SmoothStreamingMedia");if(!d)throw new ze(2,4,4046,u);if((u=e.g.mss.manifestPreprocessorTXml)!=oc&&u(d),e.i||(e.i=new cl(null,0)),u=tn(d,"IsLive",pn,!1))throw new ze(2,4,4047);e.i.cd(!u),f=tn(d,"TimeScale",fn,1e7),c=tn(d,"DVRWindowLength",fn),u&&(0===c||isNaN(c))&&(c=1/0);var p,h=tn(d,"CanSeek",pn,!1);for(0===c&&h&&(c=1/0),h=null,c&&c>0&&(h=c/f),u&&!isNaN(e.g.availabilityWindowOverride)&&(h=e.g.availabilityWindowOverride),null==h&&(h=1/0),e.i.Hf(h),c=tn(d,"Duration",fn,1/0),u||e.i.rb(c/f),u={variants:[],textStreams:[],timescale:f,duration:c/f},h=$t(d,"Protection"),f=e.g.mss.keySystemsBySystemId,c=[],p=(h=m(h)).next();!p.done;p=h.next())c=c.concat($t(p.value,"ProtectionHeader"));if(c.length){for(h=[],p=0;p<c.length;p++){var y=c[p],v=y.attributes.SystemID.toLowerCase(),b=f[v];if(b){var x;e:{if(x=Wm(y))for(var w=(x=m(Qt(x,"DATA"))).next();!w.done;w=x.next())if(w=Zt(w.value,"KID")){x=et(Yt(w)),x=nt(x=new Uint8Array([x[3],x[2],x[1],x[0],x[5],x[4],x[7],x[6]].concat(g(x.slice(8)))));break e}x=null}v=it(b,"cenc",v=[{initData:bi(w=et(Yt(y)),v=tt(v.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:x}]),x&&v.keyIds.add(x),(b=Ob.get(b))&&(v.licenseServerUri=b(y)),h.push(v)}}f=h}else f=[];for(p=f,h=[],f=[],c=[],y=(d=m(d=$t(d,"StreamIndex"))).next();!y.done;y=d.next()){b=$t(y=y.value,"QualityLevel"),v=u.timescale,x=u.duration,w=$t(y,"c");for(var T=[],C=0,A=0;A<w.length;++A){var E=w[A],I=w[A+1],M=tn(E,"t",fn),R=tn(E,"d",fn);if(E=tn(E,"r",un),!R)break;if(M=null!=M?M:C,(E=E||0)&&E--,E<0)if(I){if(null==(I=tn(I,"t",fn)))break;if(M>=I)break;E=Math.ceil((I-M)/R)-1}else{if(x==1/0)break;if(M/v>=x)break;E=Math.ceil((x*v-M)/R)-1}for(I=0;I<=E;++I)C=M+R,T.push({start:M/v,end:C/v,Fh:M}),M=C}for(v=T,x=(b=m(b)).next();!x.done;x=b.next())(x=Bb(e,y,x.value,v,p,u))&&("audio"!=x.type||e.g.disableAudio?"video"!=x.type||e.g.disableVideo?x.type!=ct||e.g.disableText||c.push(x):f.push(x):h.push(x))}for(d=[],p=(h=m(h.length>0?h:[null])).next();!p.done;p=h.next())for(p=p.value,T=(y=m(f.length>0?f:[null])).next();!T.done;T=y.next())v=(b=d).push,x=e,w=p,T=T.value,A=0,w&&w.bandwidth&&w.bandwidth>0&&(A+=w.bandwidth),T&&T.bandwidth&&T.bandwidth>0&&(A+=T.bandwidth),x={id:x.u++,language:w?w.language:"und",disabledUntilTime:0,primary:!!w&&w.primary||!!T&&T.primary,audio:w,video:T,bandwidth:A,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(b,x);u.variants=d,u.textStreams=c,e.j?(e.j.variants=u.variants,e.j.textStreams=u.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:u.variants,textStreams:u.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.kf()),Promise.resolve(),a=Date.now(),s=(a-r)/1e3,e.F.sample(1,s),k(l)})}function Bb(e,t,n,r,o,i){var a=t.attributes.Type;if("audio"!==a&&"video"!==a&&"text"!==a)return $("Ignoring unrecognized type:",a),null;var s=t.attributes.Language,l=e.u++,u=tn(n,"Bitrate",cn),c=tn(n,"MaxWidth",cn),f=tn(n,"MaxHeight",cn),d=tn(n,"Channels",cn),p=tn(n,"SamplingRate",cn),h=i.duration;r.length&&(h=r[r.length-1].end-r[0].start);var g=e.i.getDuration();e.i.rb(Math.min(h,g));var y={id:l,originalId:t.attributes.Name||String(l),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:u||0,width:c||void 0,height:f||void 0,kind:"",encrypted:o.length>0,drmInfos:o,keyIds:new Set,language:Lr(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:d,audioSamplingRate:p,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:h,timescale:i.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((o=t.attributes.Subtype)&&((o=Fb.get(o))&&y.roles.push(o),"main"===o&&(y.primary=!0)),null!==(o=n.attributes.FourCC)&&""!==o||(o=t.attributes.FourCC),!o)if("audio"===a)o="AAC";else if("video"===a)return $('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!jb.includes(o.toUpperCase()))return $("Codec not supported:",o),null;switch(n=function(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=o[e],"AACH"===n?(n=new Uint8Array(4),e=o[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,(t=new Uint16Array(2))[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):((n=new Uint8Array(2))[0]=16|r>>1,n[1]=r<<7|t<<3,(t=new Uint16Array(1))[0]=(n[0]<<8)+n[1],t[0].toString(16))}(n,a,o,y),y.mssPrivateData.codecPrivateData=n,a){case"audio":if(!n)return $("Quality unsupported without CodecPrivateData",a),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=function(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}(o,n);break;case"video":if(!n)return $("Quality unsupported without CodecPrivateData",a),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=function(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}(n);break;case"text":y.type=ct,y.mimeType="application/mp4",("TTML"===o||"DFXP"===o)&&(y.codecs="stpp")}return y.fullMimeTypes.add(or(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var n=e.m.get(y.id);else n=[],"video"==y.type&&(n=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n=da(new fa([n={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Cb:n,Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:null,stream:y}])),e.m.set(y.id,n);return n=function(e,t,n,r,o){var i=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];for(var a=(o=m(o)).next(),s={};!a.done;s={Lf:void 0},a=o.next())s.Lf=a.value,r.push(new Ha(s.Lf.start,s.Lf.end,function(t){return function(){return ot(e.l,[i.replace("{start time}",String(t.Lf.Fh))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return r}(e,new za(function(){return[]},0,null,Gl(y),y.mssPrivateData.timescale,n,null,y.encrypted),y,t,r),y.segmentIndex=new Pl(n),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}(o=Nb.prototype).configure=function(e,t){this.g=e,t&&(this.B=t)},o.start=function(e,t){var n=this;return O(function(r){if(1==r.g)return n.l=[e],n.h=t,S(r,Ub(n),2);if(!n.h)throw new ze(2,7,7001);return r.return(n.j)})},o.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},o.update=function(){var e,t=this;return O(function(n){return 1==n.g?(C(n,2),S(n,Ub(t),4)):2!=n.g?E(n,0):(e=I(n),t.h&&e?(t.h.onError(e),void k(n)):n.return())})},o.onExpirationUpdated=function(){},o.onInitialVariantChosen=function(){},o.banLocation=function(){},o.setMediaElement=function(){},H("shaka.mss.MssParser",Nb);var jb="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Fb=(new Map).set("CAPT","main").set("SUBT","alternate").set("DESC","main");function zb(e,t,n,r,o,i,a){if(n>=200&&n<=299&&202!=n||304==n)return{uri:o||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:i};i=null;try{i=qe(t)}catch(s){}throw new ze(401==n||403==n?2:1,1,1001,r,n,i,e,a,o||r)}function Vb(){}function Hb(e,t,n,r,o,i){var a=new Xb;try{ni(t.headers).forEach(function(e,t){a.append(t,e)})}catch(c){return _o(new ze(1,1,1002,e,c,n))}var s=new Wb,l={Qh:!1,cj:!1};if(e=function(e,t,n,r,o,i,a,s,l){var u,c,f,d,p,h,m,g,y,v,b,x,w,T,A;return O(function(M){switch(M.g){case 1:return u=qb,c=Kb,d=new ArrayBuffer(0),h=p=0,m={},g=Date.now(),C(M,2),S(M,u(e,r),4);case 4:if(f=M.h,m=function(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}(f.headers),a(m),"HEAD"==r.method){M.A(5);break}return v=(y=f.headers.get("Content-Length"))?parseInt(y,10):0,f.body?(b=f.clone().body.getReader(),x=function(e){function t(){var n,r,o,a;return O(function(u){switch(u.g){case 1:return C(u,2),S(u,b.read(),4);case 4:n=u.h,E(u,3);break;case 2:return I(u),u.return();case 3:if(n.done){u.A(5);break}if(p+=n.value.byteLength,!s){u.A(5);break}return S(u,s(n.value),5);case 5:r=Date.now(),o=p-h,(r-g>100&&o>=l||n.done)&&(a=n.done?0:v-p,i(r-g,o,a),h=p,g=r),n.done?e.close():(e.enqueue(n.value),t()),k(u)}})}t()},new c({start:x}),S(M,f.arrayBuffer(),8)):S(M,f.arrayBuffer(),9);case 8:d=M.h,M.A(5);break;case 9:d=M.h,w=Date.now(),i(w-g,d.byteLength,0);case 5:t.headers.Range&&2==(T=t.headers.Range.replace("bytes=","").split("-").filter(function(e){return e}).map(function(e){return parseInt(e,10)})).length&&d.byteLength!=T[1]-T[0]+1&&$("Payload length does not match range requested bytes",t,f),E(M,3);break;case 2:if(A=I(M),o.Qh)throw new ze(1,1,7001,e,n);if(o.cj)throw new ze(1,1,1003,e,n);throw new ze(1,1,1002,e,A,n);case 3:return M.return(zb(m,d,f.status,e,f.url,t,n))}})}(e,t,n,{body:t.body||void 0,headers:a,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},l,r,o,t.streamDataCallback,i.minBytesForProgressEvents||0),e=new Ro(e,function(){return l.Qh=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var u=new Tr(function(){l.cj=!0,s.abort()});u.ka(t/1e3),e.finally(function(){u.stop()})}return e}function Gb(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(kk){return!1}return!!e.Response&&!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController)}ea("application/vnd.ms-sstr+xml",function(){return new Nb}),H("shaka.net.HttpFetchPlugin",Vb),Vb.isSupported=Gb,Vb.parse=Hb;var qb=e.fetch,Wb=e.AbortController,Kb=e.ReadableStream,Xb=e.Headers;function $b(){}function Yb(e,t,n,r,o,i){var a=new Jb,s=Date.now(),l=0,u=new Promise(function(u,c){a.open(t.method,e,!0),a.responseType="arraybuffer",a.timeout=t.retryParameters.timeout,a.withCredentials=t.allowCrossSiteCredentials;var f={};for(var d in a.onabort=function(){c(new ze(1,1,7001,e,n))},a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.HEADERS_RECEIVED){for(var e=a.getAllResponseHeaders().trim().split("\r\n"),t={},n=(e=m(e)).next();!n.done;n=e.next())t[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");o(f=t)}},a.onload=function(o){var i=a.response;try{r(Date.now()-s,o.loaded-l,0);var d=zb(f,i,a.status,e,a.responseURL,t,n);u(d)}catch(p){c(p)}},a.onerror=function(t){c(new ze(1,1,1002,e,t,n))},a.ontimeout=function(){c(new ze(1,1,1003,e,n))},a.onprogress=function(e){var t=Date.now(),n=i.minBytesForProgressEvents||0,o=e.loaded-l;(t-s>100&&o>=n||e.lengthComputable&&e.loaded==e.total)&&(r(t-s,o,4==a.readyState?0:e.total-e.loaded),l=e.loaded,s=t)},t.headers)try{a.setRequestHeader(d.toLowerCase(),t.headers[d])}catch(p){throw new ze(1,1,1002,e,p,n)}a.send(t.body)});return new Ro(u,function(){return a.abort(),Promise.resolve()})}Gb()&&(Ho("http",Hb,2,!0),Ho("https",Hb,2,!0),Ho("blob",Hb,2,!0)),H("shaka.net.HttpXHRPlugin",$b),$b.parse=Yb;var Jb=e.XMLHttpRequest;function Qb(e,t,n,r,o){this.g=e,this.i=t,this.groupId=n,this.h=r,this.j=o}function Zb(e){var t=e.Yb(!1);return t?Ze(t):e.P().map(function(e){return"{"+encodeURI(e.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function ex(e,t){return lu(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function tx(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function nx(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}function rx(e){return 0==e.i?0:e.j/e.i}function ox(e){var t=this;this.u=e,this.i=new Map,this.h=new Zo(function(){return ix(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new tx,this.l=!1}function ix(e){e.l=!0;var t=e.j.map(function(e){return e()});return e.j=[],Promise.all(t)}function ax(e,t,n,r,o,i){ei(e.h);var a=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new ze(2,9,7001);if(o){var t=Ue(n);for(var a in(t=new vi(t)).data){var s=Number(a);e.m(t.data[s],t.g[s])}}return e.g.close(r,n.byteLength),e.o(rx(e.g),e.g.g),i(n)});e.i.set(t,a)}function sx(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Mo,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function lx(e,t){return new Promise(function(n,r){var o=e.h.openCursor();o.onerror=r,o.onsuccess=function(){var e;return O(function(r){if(1==r.g)return null==o.result?(n(),r.return()):(e=o.result,S(r,t(e.key,e.value,e),2));e.continue(),k(r)})}})}function ux(e){this.h=e,this.g=[]}function cx(e,t){return fx(e,t,"readwrite")}function fx(e,t,n){var r=new sx(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then(function(){ee(e.g,r)},function(){ee(e.g,r)}),r}function dx(e,t,n){this.h=new ux(e),this.i=t,this.g=n}function px(e){return Promise.reject(new ze(2,9,9011,"Cannot add new value to "+e))}function hx(e,t,n,r){t=(e=cx(e.h,t)).store();for(var o=(n=m(n)).next(),i={};!o.done;i={Qg:void 0},o=n.next())i.Qg=o.value,t.delete(i.Qg).onsuccess=function(e){return function(){return r(e.Qg)}}(i);return e.promise()}function mx(e,t,n){var r,o,i,a,s,l,u;return O(function(c){if(1==c.g){for(r=fx(e.h,t,"readonly"),o=r.store(),i={},a=[],s=m(n),l=s.next(),u={};!l.done;u={Bf:void 0,ef:void 0},l=s.next())u.ef=l.value,u.Bf=o.get(u.ef),u.Bf.onsuccess=function(e){return function(){null==e.Bf.result&&a.push(e.ef),i[e.ef]=e.Bf.result}}(u);return S(c,r.promise(),2)}if(a.length)throw new ze(2,9,9012,"Could not find values for "+a);return c.return(n.map(function(e){return i[e]}))})}function gx(e){this.g=new ux(e)}function yx(){this.g=new Map}function vx(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){e.hasFixedKeySpace()||t||(t={path:{Qb:n,bb:r},bb:e})})}),t)return t;throw new ze(2,9,9013,"Could not find a cell that supports add-operations")}function bx(e,t,n){if(!(e=e.g.get(t)))throw new ze(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new ze(2,9,9013,"Could not find cell with name "+n);return t}function xx(e,t){wx.set(e,t)}Ho("http",Yb,1,!0),Ho("https",Yb,1,!0),Ho("blob",Yb,1,!0),tx.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}},ox.prototype.destroy=function(){return this.h.destroy()},ox.prototype.queue=function(e,t,n,r,o){var i=this;ei(this.h);var a=(this.i.get(e)||Promise.resolve()).then(function(){var e,a,s,l,u,c,f;return O(function(d){if(1==d.g)return S(d,function(e,t){var n,r,o,i;return O(function(a){return 1==a.g?(n=Yo,r=e.u.request(n,t),o=function(){return r.abort()},e.j.push(o),S(a,r.promise,2)):(i=a.h,ee(e.j,o),a.return(i.data))})}(i,t),2);if(e=d.h,i.h.g)throw new ze(2,9,7001);if(r)for(l in a=Ue(e),(s=new vi(a)).data)u=Number(l),c=s.data[u],f=s.g[u],i.m(c,f);return i.g.close(n,e.byteLength),i.o(rx(i.g),i.g.g),d.return(o(e))})});return this.i.set(e,a),a},sx.prototype.abort=function(){var e=this;return O(function(t){if(1==t.g){try{e.i.abort()}catch(n){}return C(t,2),S(t,e.g,4)}if(2!=t.g)return E(t,0);I(t),k(t)})},sx.prototype.store=function(){return this.h},sx.prototype.promise=function(){return this.g},ux.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(o=dx.prototype).destroy=function(){return this.h.destroy()},o.hasFixedKeySpace=function(){return!0},o.addSegments=function(){return px(this.i)},o.removeSegments=function(e,t){return hx(this,this.i,e,t)},o.getSegments=function(e){var t,n=this;return O(function(r){return 1==r.g?S(r,mx(n,n.i,e),2):(t=r.h,r.return(t.map(function(e){return n.Sh(e)})))})},o.addManifests=function(){return px(this.g)},o.updateManifest=function(){return Promise.reject(new ze(2,9,9016,"Cannot modify values in "+this.g))},o.updateManifestExpiration=function(e,t){var n=cx(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},o.removeManifests=function(e,t){return hx(this,this.g,e,t)},o.getManifests=function(e){var t,n=this;return O(function(r){return 1==r.g?S(r,mx(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map(function(e){return n.Pd(e)}))))})},o.getAllManifests=function(){var e,t,n=this;return O(function(r){return 1==r.g?(e=fx(n.h,n.g,"readonly"),t=new Map,S(r,lx(e,function(e,r){var o;return O(function(i){if(1==i.g)return S(i,n.Pd(r),2);o=i.h,t.set(e,o),k(i)})}),2)):3!=r.g?S(r,e.promise(),3):r.return(t)})},o.Sh=function(e){return e},o.Pd=function(e){return Promise.resolve(e)},o.add=function(e,t){var n,r,o,i,a,s,l,u=this;return O(function(c){if(1==c.g){for(n=cx(u.h,e),r=n.store(),o=[],i=m(t),a=i.next(),s={};!a.done;s={eh:void 0},a=i.next())l=a.value,s.eh=r.add(l),s.eh.onsuccess=function(e){return function(){o.push(e.eh.result)}}(s);return S(c,n.promise(),2)}return c.return(o)})},gx.prototype.destroy=function(){return this.g.destroy()},gx.prototype.getAll=function(){var e,t,n=this;return O(function(r){return 1==r.g?(e=fx(n.g,"session-ids","readonly"),t=[],S(r,lx(e,function(e,n){t.push(n)}),2)):3!=r.g?S(r,e.promise(),3):r.return(t)})},gx.prototype.add=function(e){for(var t=cx(this.g,"session-ids"),n=t.store(),r=(e=m(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},gx.prototype.remove=function(e){var t,n=this;return O(function(r){return 1==r.g?S(r,lx(t=cx(n.g,"session-ids"),function(t,n,r){e.includes(n.sessionId)&&r.delete()}),2):S(r,t.promise(),0)})},yx.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},yx.prototype.init=function(){var e=this;wx.forEach(function(t,n){(t=t())&&e.g.set(n,t)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},H("shaka.offline.StorageMuxer",yx),yx.unregister=function(e){wx.delete(e)},yx.register=xx,yx.prototype.destroy=yx.prototype.destroy;var wx=new Map;function Sx(){dx.apply(this,arguments)}function Tx(e,t){!function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(r=(n=m(e)).next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var o=m(e),i=o.next();!i.done;i=o.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(o=m(t)).next();!i.done;i=o.next())i.value.variantIds.push(r);if(e.length&&t.length)for(r=(t=m(t)).next();!r.done;r=t.next())for(r=r.value,i=(o=m(e)).next();!i.done;i=o.next()){i=i.value;var a=n++;r.variantIds.push(a),i.variantIds.push(a)}}}(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(n){return function(e,t,n){var r=e.initSegmentUri?kx(e.initSegmentUri):null,o=t+e.presentationTimeOffset,i=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=kx(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:i,timestampOffset:o,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}(n,e.startTime,t)})}function kx(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ze(2,9,9004,"Could not parse uri "+e)}function Cx(){dx.apply(this,arguments)}function Ax(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function Ex(){dx.apply(this,arguments)}function Ix(){this.m=this.j=this.i=this.h=this.g=this.l=null}p(Sx,dx),Sx.prototype.updateManifestExpiration=function(e,t){var n,r,o,i=this;return O(function(a){return n=cx(i.h,i.g),r=n.store(),o=new Mo,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),o.resolve()):o.reject(new ze(2,9,9012,"Could not find values for "+e))},S(a,Promise.all([n.promise(),o]),0)})},Sx.prototype.Pd=function(e){var t,n,r,o,i,a;return O(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,o=r-e.periods[n].startTime,i=Tx(e.periods[n],o),t.push(i);return S(s,Ng(t),2)}return a=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},Sx.prototype.Sh=function(e){return{data:e.data}},p(Cx,dx),Cx.prototype.Pd=function(e){var t,n,r,o,i,a;return O(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,o=r-e.periods[n].startTime;for(var l=e.periods[n],u=[],c=m(l.streams),f=c.next();!f.done;f=c.next())0!=(f=f.value).variantIds.length&&u.push(Ax(f,l.startTime,l.startTime+o));i=u,t.push(i)}return S(s,Ng(t),2)}return a=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:a,sequenceMode:!1})})},p(Ex,dx),(o=Ex.prototype).hasFixedKeySpace=function(){return!1},o.addSegments=function(e){return this.add(this.i,e)},o.addManifests=function(e){return this.add(this.g,e)},o.updateManifest=function(e,t){return function(e,t,n){var r=(e=cx(e.h,e.g)).store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}(this,e,t)},o.Pd=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(o=Ix.prototype).init=function(){var t=this,n=new Mo,r=!1,o=new Tr(function(){r=!0,n.reject(new ze(2,9,9017))});"number"==typeof Mx&&Mx>0&&o.ka(Mx);var i=e.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){if(!r){o.stop();var e=i.result;t.l=e;var a=e.objectStoreNames;a=a.contains("manifest")&&a.contains("segment")?new Sx(e,"segment","manifest"):null,t.g=a,a=(a=e.objectStoreNames).contains("manifest-v2")&&a.contains("segment-v2")?new Cx(e,"segment-v2","manifest-v2"):null,t.h=a,a=(a=e.objectStoreNames).contains("manifest-v3")&&a.contains("segment-v3")?new Cx(e,"segment-v3","manifest-v3"):null,t.i=a,a=(a=e.objectStoreNames).contains("manifest-v5")&&a.contains("segment-v5")?new Ex(e,"segment-v5","manifest-v5"):null,t.j=a,e=e.objectStoreNames.contains("session-ids")?new gx(e):null,t.m=e,n.resolve()}},i.onupgradeneeded=function(){for(var e=i.result,t=m(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){r||(o.stop(),n.reject(new ze(2,9,9001,i.error)),e.preventDefault())},n},o.destroy=function(){var e=this;return O(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return S(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),k(t)}})},o.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},o.getEmeSessionCell=function(){return this.m},o.erase=function(){var t=this;return O(function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return S(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return S(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return S(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return S(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),S(n,function(){var t=new Mo,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new ze(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,S(n,t.init(),0)}})};var Mx=5;function Rx(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function _x(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new Rx(t,n,r,Number(e[4])):null}function Lx(e,t){this.h=e,this.g=t}function Px(e,t){var n=new cl(null,0);n.rb(t.duration);var r=t.streams.filter(function(e){return"audio"==e.type}),o=t.streams.filter(function(e){return"video"==e.type});r=function(e,t,n,r){for(var o=new Set,i=m(t),a=i.next();!a.done;a=i.next())for(var s=(a=m(a.value.variantIds)).next();!s.done;s=a.next())o.add(s.value);for(i=m(n),a=i.next();!a.done;a=i.next())for(a=m(a.value.variantIds),s=a.next();!s.done;s=a.next())o.add(s.value);for(i=new Map,o=m(o),a=o.next();!a.done;a=o.next())a=a.value,i.set(a,{id:a,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),o=t.next();!o.done;o=t.next())for(a=o.value,o=Dx(e,a,r),a=m(a.variantIds),s=a.next();!s.done;s=a.next())(s=i.get(s.value)).language=o.language,s.primary=s.primary||o.primary,s.audio=o;for(n=m(n),t=n.next();!t.done;t=n.next())for(o=t.value,t=Dx(e,o,r),o=m(o.variantIds),a=o.next();!a.done;a=o.next())(a=i.get(a.value)).primary=a.primary||t.primary,a.video=t;return i}(e,r,o,n),o=t.streams.filter(function(e){return e.type==ct}).map(function(t){return Dx(e,t,n)});var i=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return Dx(e,t,n)}),a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=m(r.values()),l=s.next();!l.done;l=s.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=a),l.video&&l.video.encrypted&&(l.video.drmInfos=a);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:o,imageStreams:i,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function Dx(e,t,n){var r=t.segments.map(function(n){return function(e,t,n){var r=new Rx("segment",e.h,e.g,t.dataKey);return e=new Ha(t.startTime,t.endTime,function(){return[r.toString()]},0,null,null!=t.initSegmentKey?function(e,t){var n=new Rx("segment",e.h,e.g,t);return new za(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.If(t.thumbnailSprite),e}(e,n,t)});return n.ge(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pl(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([or(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function Ox(){this.g=null}function Nx(){}function Ux(e,t){var n=_x(e);return e=n&&"manifest"==n.g?Po(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t}):n&&"segment"==n.g?function(e,t,n){var r=new yx;return Po(void 0).Xa(function(){return r.init()}).Xa(function(){return bx(r,t.Qb(),t.bb())}).Xa(function(e){return e.getSegments([t.key()])}).Xa(function(e){return{uri:t,data:e[0].data,headers:{},originalRequest:n}}).finally(function(){return r.destroy()})}(n.key(),n,t):_o(new ze(2,1,9004,e)),e}function Bx(e,t,n){var r,o,i,a,s,l;return O(function(u){switch(u.g){case 1:r=[];for(var c=[],f=m(n),d=f.next();!d.done;d=f.next()){d=d.value;for(var p=!1,h=m(c),g=h.next();!g.done;g=h.next())if(jx((g=g.value).info,d)){g.sessionIds.push(d.sessionId),p=!0;break}p||c.push({info:d,sessionIds:[d.sessionId]})}o=m(c),i=o.next();case 2:if(i.done){u.A(4);break}return a=i.value,s=function(e,t,n){var r,o;return O(function(i){switch(i.g){case 1:return r=new xi({tc:t,onError:function(){},uf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),C(i,2),r.configure(e),S(i,function(e,t,n,r,o,i){var a,s,l,u,c;return O(function(f){return 1==f.g?(a=[],i.length&&a.push(i[0].contentType),o.length&&a.push(o[0].contentType),s=function(e){return(e=it(t,e,null)).licenseServerUri=n,e.serverCertificate=r,e.persistentStateRequired=!0,e.sessionType="persistent-license",e},(l=uo(a)).video&&(u=s(i[0].encryptionScheme||""),l.video.drmInfos.push(u)),l.audio&&(c=s(o[0].encryptionScheme||""),l.audio.drmInfos.push(c)),S(f,qr([l],!0,e.O,[]),2)):(ei(e.l),f.return(Ei(e,[l])))})}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:E(i,3);break;case 2:return I(i),S(i,r.destroy(),5);case 5:return i.return([]);case 3:return o=[],S(i,Promise.all(n.sessionIds.map(function(e){return O(function(t){return 1==t.g?(C(t,2),S(t,function(e,t){var n,r,o;return O(function(i){return 1==i.g?S(i,Ri(e,t,{initData:null,initDataType:null}),2):3!=i.g?(n=i.h)?(r=[],(o=e.i.get(n))&&(o.Lb=new Mo,r.push(o.Lb)),r.push(n.remove()),S(i,Promise.all(r),3)):i.return():(e.i.delete(n),void k(i))})}(r,e),4)):2!=t.g?(o.push(e),E(t,0)):(I(t),void k(t))})})),6);case 6:return S(i,r.destroy(),7);case 7:return i.return(o)}})}(e,t,a),S(u,s,5);case 5:l=u.h,r=r.concat(l),i=o.next(),u.A(2);break;case 4:return u.return(r)}})}function jx(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&te(e.audioCapabilities,t.audioCapabilities,n)&&te(e.videoCapabilities,t.videoCapabilities,n)}function Fx(e,t){var n=Px(new Lx(e.Qb(),e.bb()),t),r=t.appMetadata||{};return n=zx(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function zx(e){for(var t=[],n=no(e.variants),r=(n=m(n)).next();!r.done;r=n.next())t.push($r(r.value));for(n=(e=m(e.textStreams)).next();!n.done;n=e.next())t.push(Yr(n.value));return t}function Vx(){this.g=new Map}function Hx(e,t){var n=t.audio,r=t.video;if(n&&!r&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&r&&e.g.set(r.id,r.bandwidth||t.bandwidth),n&&r){var o=n.bandwidth||393216,i=r.bandwidth||t.bandwidth-o;i<=0&&(i=t.bandwidth),e.g.set(n.id,o),e.g.set(r.id,i)}}function Gx(e,t){e.g.set(t.id,t.bandwidth||2048)}function qx(e,t){return null==(e=e.g.get(t))&&(e=0),e}function Wx(e){var t=this;if(e&&e.constructor!=$f)throw new ze(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Wb()):(this.h=ec(),this.g=new Vo,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new Zo(function(){var e,r,o,i,a;return O(function(s){switch(s.g){case 1:return S(s,Promise.all(t.l.map(function(e){return ix(e)})),2);case 2:for(e=function(){},r=[],o=m(t.i),i=o.next();!i.done;i=o.next())a=i.value,r.push(a.then(e,e));return S(s,Promise.all(r),3);case 3:if(!n){s.A(4);break}return S(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,k(s)}})}),this.m=1e9}function Kx(){if(Ky(le()))e:{for(var e=m(wx.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Xx(e){var t,n,r;return O(function(o){switch(o.g){case 1:return S(o,(t=new yx).init(),2);case 2:return S(o,vx(t),3);case 3:return n=o.h,r=new Rx("manifest",n.path.Qb,n.path.bb,e),S(o,t.destroy(),4);case 4:return S(o,(new Wx).remove(r.toString()),0)}})}function $x(e,t,n,r,o,i){var a,s,l,u,c,f,d,p,h,g,y;return O(function(v){switch(v.g){case 1:for(a=!1,C(v,2),s=!0,l=m(n.streams),u=l.next();!u.done;u=l.next())for(c=u.value,f=m(c.segments),d=f.next();!d.done;d=f.next())p=d.value,null!=(h=p.pendingSegmentRefId?r[p.pendingSegmentRefId]:null)&&(p.dataKey=h,p.pendingSegmentRefId=void 0),null!=(h=p.pendingInitSegmentRefId?r[p.pendingInitSegmentRefId]:null)&&(p.initSegmentKey=h,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);return n.size+=o,s&&(n.isIncomplete=!1),S(v,e.updateManifest(t,n),4);case 4:a=!0,i(),E(v,0);break;case 2:return g=I(v),S(v,Xx(t),5);case 5:if(a){v.A(6);break}return y=Object.values(r),S(v,e.removeSegments(y,function(){}),6);case 6:throw g}})}function Yx(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function Jx(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function Qx(e,t,n,r){if(t.expiration=n.Ud(),n=Ai(n),t.sessionIds=r?n:[],Yx(e)&&r&&!n.length)throw new ze(2,9,9007)}function Zx(e,t){for(var n=[],r=m(e.streams),o=r.next();!o.done;o=r.next())o=o.value,t&&"video"==o.type?n.push({contentType:or(o.mimeType,o.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=o.type||n.push({contentType:or(o.mimeType,o.codecs),robustness:e.drmInfo.audioRobustness});return n}function ew(e,t,n){return O(function(r){return S(r,function(e,t,n,r){var o,i,a;return O(function(s){return 1==s.g?r.drmInfo?(o=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new ze(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),i=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Zx(r,!1),videoCapabilities:Zx(r,!0)}}),S(s,Bx(t,e,i),2)):s.return():3!=s.g?(a=s.h,S(s,o.remove(a),3)):S(s,o.add(i.filter(function(e){return!a.includes(e.sessionId)})),0)})}(e.g,e.h.drm,n,t),0)})}function tw(e,t,n){function r(){}var o=function(e){for(var t=new Set,n=(e=m(e.streams)).next();!n.done;n=e.next())for(var r=(n=m(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey);return Array.from(t)}(n);return Fx(t,n),Promise.all([e.removeSegments(o,r),e.removeManifests([t.key()],r)])}function nw(e,t){var n;return O(function(r){switch(r.g){case 1:return C(r,2),S(r,Ac(t,e.g,e.h.streaming.retryParameters),4);case 4:n=r.h,E(r,3);break;case 2:I(r);case 3:if(n)return r.return(n);throw new ze(1,2,2011,t)}})}function rw(e,t,n,r,o,i){var a={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,mssPrivateData:r.mssPrivateData,external:r.external,fastSwitching:r.fastSwitching,isAudioMuxedInVideo:r.isAudioMuxedInVideo},s=o.offline.numberOfParallelDownloads,l=0===s?r.id:0;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r,t),r=e.segmentIndex.get(++t)}(r,n.presentationTimeline.Ib(),function(n,o){var u=Zb(n),c=void 0;if(!i.has(u)){var f=n.endTime-n.startTime;f=qx(t,r.id)*f,f=nx(e.g,f),i.set(u,new Qb(n,f,l,!1,o))}n.aa&&(c=Zb(n.aa),i.has(c)||(f=.5*qx(t,r.id),f=nx(e.g,f),i.set(c,new Qb(n.aa,f,l,!0,o)))),a.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:u,dataKey:0,mimeType:n.mimeType,codecs:n.codecs,thumbnailSprite:n.thumbnailSprite}),0!==s&&(l=(l+1)%s)}),a}function ow(e){if(e.j.g)throw new ze(2,9,7001)}function iw(){if(!Kx())throw new ze(2,9,9e3)}function aw(e,t){return O(function(n){return 1==n.g?(e.i.push(t),A(n,2),S(n,t,4)):2!=n.g?n.return(n.h):(M(n),ee(e.i,t),R(n,0))})}function sw(e){for(var t=new Set,n=m(e.variants),r=n.next();!r.done;r=n.next())(r=r.value).audio&&t.add(r.audio),r.video&&t.add(r.video);for(r=(n=m(e.textStreams)).next();!r.done;r=n.next())t.add(r.value);for(n=(e=m(e.imageStreams)).next();!n.done;n=e.next())t.add(n.value);return t}H("shaka.offline.indexeddb.StorageMechanismOpenTimeout",Mx),xx("idb",function(){return le().yh()?new Ix:null}),Rx.prototype.Qb=function(){return this.i},Rx.prototype.bb=function(){return this.h},Rx.prototype.key=function(){return this.l},Rx.prototype.toString=function(){return this.j},(o=Ox.prototype).configure=function(){},o.start=function(e,t){var n,r,o,i,a,s,l=this;return O(function(u){switch(u.g){case 1:if(n=_x(e),l.g=n,null==n||"manifest"!=n.g)throw new ze(2,1,9004,e);return r=new yx,A(u,2),S(u,r.init(),4);case 4:return S(u,bx(r,n.Qb(),n.bb()),5);case 5:return S(u,u.h.getManifests([n.key()]),6);case 6:return o=u.h,i=o[0],a=new Lx(n.Qb(),n.bb()),s=Px(a,i),t.makeTextStreamsForClosedCaptions(s),u.return(s);case 2:return M(u),S(u,r.destroy(),7);case 7:R(u,0)}})},o.stop=function(){return Promise.resolve()},o.update=function(){},o.onExpirationUpdated=function(e,t){var n,r,o,i,a,s,l,u=this;return O(function(c){switch(c.g){case 1:return n=u.g,r=new yx,C(c,2,3),S(c,r.init(),5);case 5:return S(c,bx(r,n.Qb(),n.bb()),6);case 6:return S(c,(o=c.h).getManifests([n.key()]),7);case 7:if(i=c.h,a=i[0],s=a.sessionIds.includes(e),l=null==a.expiration||a.expiration>t,!s||!l){c.A(3);break}return S(c,o.updateManifestExpiration(n.key(),t),3);case 3:return M(c),S(c,r.destroy(),10);case 10:R(c,0);break;case 2:I(c),c.A(3)}})},o.onInitialVariantChosen=function(){},o.banLocation=function(){},o.setMediaElement=function(){},ea("application/x-offline-manifest",function(){return new Ox}),H("shaka.offline.OfflineScheme",Nx),Nx.plugin=Ux,Ho("offline",Ux),(o=Wx.prototype).destroy=function(){return this.j.destroy()},o.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=ju(e,t)),nc(this.h,e)},o.getConfiguration=function(){var e=ec();return nc(e,this.h,ec()),e},o.Wb=function(){return this.g},o.store=function(e,t,n,r,o){var i=this,a=this.getConfiguration(),s=new ox(this.g);return this.l.push(s),t=function(e,t,n,r,o,i,a,s){var l,u,c,f,d,p,h,g,y,v,b,x,w,T,A,_,L,P,D,N,U,B,j;return O(function(F){switch(F.g){case 1:return iw(),u=l=null,c=new yx,p=d=f=null,C(F,2,3),S(F,i(),5);case 5:return l=F.h,S(F,function(e,t,n,r){var o,i,a,s,l;return O(function(u){if(1==u.g)return o=null,i=e.g,a={networkingEngine:i,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){o=e},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(r.manifest),ow(e),S(u,n.start(t,a),2);if(3!=u.g)return s=u.h,ow(e),l=sw(s),S(u,Promise.all(ti(l,function(e){return e.createSegmentIndex()})),3);if(ow(e),o)throw o;return u.return(s)})}(e,t,l,a),6);case 6:if(h=F.h,ow(e),h.presentationTimeline.W()||h.presentationTimeline.Vc())throw new ze(2,9,9005,t);g=m(r),y=g.next();case 7:if(y.done){F.A(9);break}return v=y.value,S(F,function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,g,y,v;return O(function(b){switch(b.g){case 1:return S(b,nw(e,t),2);case 2:if("text/vtt"!=(r=b.h))throw new ze(1,2,2017,t);return S(b,function(e,t,n){var r,o,i;return O(function(a){return 1==a.g?(r=Yo,(o=qo([e],n)).method="GET",S(a,t.request(r,o).promise,2)):(i=a.h,a.return(i.data))})}(t,e.g,e.h.streaming.retryParameters),3);case 3:if(o=b.h,!(i=yr(r)))throw new ze(2,2,2014,r);for(a=i(),s={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},l=Ue(o),u=a.parseMedia(l,s,t,[]),c=[],f=m(u),d=f.next(),p={};!d.done;p={Rf:void 0,od:void 0},d=f.next())p.od=d.value,p.Rf=null,h=function(e){return function(){return null==e.Rf&&(e.Rf=ot([t],[e.od.payload])),e.Rf||[]}}(p),g=new Ha(p.od.startTime,p.od.endTime,h,0,null,null,0,0,1/0),p.od.payload.includes("#xywh")&&4===(y=p.od.payload.split("#xywh=")[1].split(",")).length&&g.If({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)}),c.push(g);if(v=r,!c.length){b.A(4);break}return S(b,Ac(c[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:v=b.h;case 4:return b.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pl(c),mimeType:v||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([or(v||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}(e,v,h),10);case 10:b=F.h,h.imageStreams.push(b),ow(e),y=g.next(),F.A(7);break;case 9:x=m(o),w=x.next();case 11:return w.done?(Bi(a.drm.clearKeys,h.variants),_=h.variants.some(function(e){if(e.audio)for(var t=m(e.audio.drmInfos),n=t.next();!n.done;n=t.next())if(n.value.licenseServerUri.startsWith("data:"))return!0;if(e.video)for(t=(e=m(e.video.drmInfos)).next();!t.done;t=e.next())if(t.value.licenseServerUri.startsWith("data:"))return!0;return!1}),L=a.offline.usePersistentLicense,_&&(L=!1),S(F,e.md(h,function(e){p=p||e},a,L),15)):(T=w.value,S(F,function(e,t,n,r,o,i,a){var s;return O(function(l){if(1==l.g)return i?l.A(2):S(l,nw(e,n),3);if(2!=l.g&&(i=l.h),s={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ol(0,t.presentationTimeline.getDuration(),[n]),mimeType:i||"",codecs:a||"",kind:o,encrypted:!1,drmInfos:[],keyIds:new Set,language:r,originalLanguage:r,label:null,type:ct,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([or(i||"",a||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},!vr(or(s.mimeType,s.codecs)))throw new ze(2,2,2014,i);return l.return(s)})}(e,h,T.uri,T.language,T.kind,T.mime,T.codecs),14));case 14:A=F.h,h.textStreams.push(A),ow(e),w=x.next(),F.A(11);break;case 15:if(u=F.h,ow(e),p)throw p;return S(F,function(e,t,n,r){var o,i,a,s,l,u,c,f,d,p,h,g,y,v,b,x,w,T,A,M,R,_,L,P,D,N,U,B,j;return O(function(O){switch(O.g){case 1:return o={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter(function(e){return Fr(e,t,n)})}(e,n.restrictions,o),S(O,Vr(t,e,r,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(i=[],a=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,l=n.preferredAudioCodecs,u=n.preferredTextFormats,jr(e,s,l,a,u),c=m(e.variants),f=c.next();!f.done;f=c.next())d=f.value,i.push($r(d));for(p=m(e.textStreams),h=p.next();!h.done;h=p.next())g=h.value,i.push(Yr(g));for(y=m(e.imageStreams),v=y.next();!v.done;v=y.next())b=v.value,i.push(Jr(b));return S(O,n.offline.trackSelectionCallback(i),3);case 3:for(x=O.h,w=e.presentationTimeline.getDuration(),T=0,A=m(x),M=A.next();!M.done;M=A.next())R=M.value,_=R.bandwidth*w/8,T+=_;return C(O,4),S(O,n.offline.downloadSizeCallback(T),6);case 6:if(!O.h)throw new ze(2,9,9014);E(O,5);break;case 4:if((L=I(O))instanceof ze)throw L;throw new ze(2,9,9015);case 5:for(P=new Set,D=new Set,N=new Set,U=m(x),B=U.next();!B.done;B=U.next())"variant"==(j=B.value).type&&P.add(j.id),"text"==j.type&&D.add(j.id),"image"==j.type&&N.add(j.id);e.variants=e.variants.filter(function(e){return P.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return D.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return N.has(e.id)}),function(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next())for(var o=(r=m(t)).next();!o.done;o=r.next());for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}(e),k(O)}})}(h,u,a,L),16);case 16:return S(F,c.init(),17);case 17:return ow(e),S(F,vx(c),18);case 18:return f=F.h,ow(e),P=function(e,t,n,r,o,i,a){var s=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=zx(t),appMetadata:n,isIncomplete:!1}}(n,t,r),l=o.offline.progressCallback;!function(e,t,n){e.o=t,e.m=n}(i,function(e,t){s.size=t,l(s,e)},function(t,n){u&&a&&c==n&&Ci(e,"cenc",t)});var u=Yx(t)&&!Jx(t),c=null;u&&(c=lw.get(e.g.keySystem));for(var f=new Vx,d=m(t.textStreams),p=d.next();!p.done;p=d.next())f.g.set(p.value.id,52);for(d=m(t.imageStreams),p=d.next();!p.done;p=d.next())Gx(f,p.value);for(d=m(t.variants),p=d.next();!p.done;p=d.next())Hx(f,p.value);return i=function(e,t,n,r){for(var o=new Map,i=sw(n),a=new Map,s=(i=m(i)).next();!s.done;s=i.next()){var l=rw(e,t,n,s=s.value,r,o);a.set(s.id,l)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&a.get(t.audio.id).variantIds.push(t.id),t.video&&a.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(a.values()),Dh:Array.from(o.values())}}(i,f,t,o),o=i.streams,i=i.Dh,(f=e.g)&&a&&(f.initData=[]),{vk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Ud(),streams:o,sessionIds:a?Ai(e):[],drmInfo:f,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Dh:i}}(u,h,t,n,a,s,L),D=P.vk,N=P.Dh,S(F,f.bb.addManifests([D]),19);case 19:if(U=F.h,ow(e),d=U[0],ow(e),p)throw p;return S(F,function(e,t,n,r,o,i,a,s,l,u){var c,f,d,p,h,g,y,v,b,x,w;return O(function(T){switch(T.g){case 1:if(c={},f=0,d=function(){if(e.j.g||o.l)throw new ze(2,9,7001)},p=function(e,t){var p,h,g,y,v,b,x,w,T;return O(function(C){if(1==C.g){for(p=m(e),h=p.next(),g={};!h.done;g={kc:void 0},h=p.next())g.kc=h.value,d(),y=ex(g.kc,i),v=g.kc.i,b=g.kc.h,x=function(e){return function(t){var n,r,o,i;return O(function(s){switch(s.g){case 1:if(n=e.kc.g,r=n.Yb(!1),!n.aesKey||r){s.A(2);break}return S(s,su(t,n.aesKey,e.kc.j),3);case 3:t=s.h;case 2:return o=Zb(n),S(s,a.addSegments([{data:t}]),4);case 4:i=s.h,d(),c[o]=i[0],f+=t.byteLength,k(s)}})}}(g),w=g.kc.g,(T=w.Yb(!1))?ax(o,g.kc.groupId,T,v,b,x):o.queue(g.kc.groupId,y,v,b,x);return S(C,function(e){return O(function(t){return 1==t.g?S(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}(o),2)}return d(),!t||o.l?C.A(0):(Qx(s,r,l,u),S(C,a.updateManifest(n,r),0))})},h=!1,C(T,2),!Yx(s)||!h||Jx(s)){T.A(4);break}return S(T,p(t.filter(function(e){return e.h}),!0),5);case 5:return d(),t=t.filter(function(e){return!e.h}),g=c,y=f,c={},f=0,S(T,$x(a,n,r,g,y,function(){return ow(e)}),6);case 6:d();case 4:if(h){T.A(7);break}return S(T,p(t,!1),8);case 8:return d(),v=c,b=f,c={},f=0,S(T,$x(a,n,r,v,b,function(){return d()}),9);case 9:d();case 7:E(T,0);break;case 2:return x=I(T),w=Object.values(c),S(T,a.removeSegments(w,function(){}),10);case 10:throw x}})}(e,N,d,D,s,a,f.bb,h,u,L),20);case 20:return ow(e),Qx(h,D,u,L),S(F,f.bb.updateManifest(d,D),21);case 21:return ow(e),B=new Rx("manifest",f.path.Qb,f.path.bb,d),F.return(Fx(B,D));case 3:return M(F),S(F,c.destroy(),22);case 22:if(!l){F.A(23);break}return S(F,l.stop(),23);case 23:if(!u){F.A(25);break}return S(F,u.destroy(),25);case 25:R(F,0);break;case 2:if(j=I(F),null==d){F.A(27);break}return S(F,Xx(d),27);case 27:throw p||j}})}(this,e,t||{},r||[],o||[],function(){var t;return O(function(r){return 1==r.g?n?r.A(2):S(r,Ac(e,i.g,a.manifest.retryParameters),3):(2!=r.g&&(n=r.h),t=ta(e,n||null),r.return(t()))})},a,s),(t=new Ro(t,function(){return ix(s)})).finally(function(){ee(i.l,s)}),function(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){ee(e.i,n)})}(this,t)},o.remove=function(e){return aw(this,function(e,t){var n,r,o,i,a,s;return O(function(l){switch(l.g){case 1:if(iw(),null==(n=_x(t))||"manifest"!=n.g)throw new ze(2,9,9004,t);return r=n,o=new yx,A(l,2),S(l,o.init(),4);case 4:return S(l,bx(o,r.Qb(),r.bb()),5);case 5:return S(l,(i=l.h).getManifests([r.key()]),6);case 6:return a=l.h,s=a[0],S(l,Promise.all([ew(e,s,o),tw(i,r,s)]),2);case 2:return M(l),S(l,o.destroy(),8);case 8:R(l,0)}})}(this,e))},o.Ok=function(){return aw(this,function(e){var t,n,r,o,i,a,s,l,u,c;return O(function(f){switch(f.g){case 1:return iw(),t=e.g,n=e.h.drm,r=new yx,o=!1,A(f,2),S(f,r.init(),4);case 4:i=[],function(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}(r,function(e){return i.push(e)}),a=m(i),s=a.next();case 5:if(s.done){f.A(2);break}return S(f,(l=s.value).getAll(),8);case 8:return u=f.h,S(f,Bx(n,t,u),9);case 9:return c=f.h,S(f,l.remove(c),10);case 10:c.length!=u.length&&(o=!0),s=a.next(),f.A(5);break;case 2:return M(f),S(f,r.destroy(),11);case 11:R(f,3);break;case 3:return f.return(!o)}})}(this))},o.list=function(){return aw(this,O(function(r){switch(r.g){case 1:return iw(),e=[],t=new yx,A(r,2),S(r,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){t({Qb:n,bb:r},e)})})}(t,function(t,r){n=n.then(function(){return O(function(n){if(1==n.g)return S(n,r.getAllManifests(),2);n.h.forEach(function(n,r){n=Fx(new Rx("manifest",t.Qb,t.bb,r),n),e.push(n)}),k(n)})})}),S(r,n,2);case 2:return M(r),S(r,t.destroy(),6);case 6:R(r,3);break;case 3:return r.return(e)}}));var e,t,n},o.md=function(e,t,n,r){var o,i=this;return O(function(a){return 1==a.g?((o=new xi({tc:i.g,onError:t,uf:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(n.drm),S(a,function(e,t,n){return e.oa=!0,e.C=new Map,e.R=n,Si(e,t,!1)}(o,e.variants,r),2)):3!=a.g?S(a,ki(o),3):a.return(o)})},H("shaka.offline.Storage",Wx),Wx.deleteAll=function(){var e;return O(function(t){return 1==t.g?(e=new yx,A(t,2),S(t,function(e){var t,n;return O(function(r){return 1==r.g?(t=Array.from(e.g.values()),(n=t.length>0)||wx.forEach(function(e){(e=e())&&t.push(e)}),S(r,Promise.all(t.map(function(e){return e.erase()})),2)):n?r.A(0):S(r,Promise.all(t.map(function(e){return e.destroy()})),0)})}(e),2)):5!=t.g?(M(t),S(t,e.destroy(),5)):R(t,0)})},Wx.prototype.list=Wx.prototype.list,Wx.prototype.removeEmeSessions=Wx.prototype.Ok,Wx.prototype.remove=Wx.prototype.remove,Wx.prototype.store=Wx.prototype.store,Wx.prototype.getNetworkingEngine=Wx.prototype.Wb,Wx.prototype.getConfiguration=Wx.prototype.getConfiguration,Wx.prototype.configure=Wx.prototype.configure,Wx.prototype.destroy=Wx.prototype.destroy,Wx.support=Kx;var lw=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");function uw(){}function cw(e,t){for(e={priority:t||0,callback:e},t=0;t<pw.length;t++)if(pw[t].priority<e.priority)return void pw.splice(t,0,e);pw.push(e)}Qf("offline",Kx),H("shaka.polyfill",uw),uw.register=cw,uw.installAll=function(){for(var e=m(pw),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){$("Error installing polyfill!",n)}}};var fw,dw,pw=[];function hw(){}function mw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())gw(t.value)}function gw(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function yw(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function vw(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":($("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function bw(e){if(!e)return!1;var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function xw(e,t){return!(e&&e!=t&&("cbcs"!=e&&"cbcs-1-9"!=e||!le().ed()))}function ww(){}function Sw(){le().Kf()&&!fw&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(fw=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=Tw,navigator.emeEncryptionSchemePolyfilled=!0)}function Tw(e,t){var n,r=this;return O(function(o){return 1==o.g?S(o,fw.call(r,e,t),2):bw(n=o.h)?(navigator.requestMediaKeySystemAccess=fw,o.return(n)):(navigator.requestMediaKeySystemAccess=kw,o.return(kw.call(r,e,t)))})}function kw(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h=this;return O(function(g){if(1==g.g){for(n=vw(e),r=[],o=m(t),i=o.next();!i.done;i=o.next())a=i.value,s=Cw(a.videoCapabilities,n),l=Cw(a.audioCapabilities,n),a.videoCapabilities&&a.videoCapabilities.length&&!s.length||a.audioCapabilities&&a.audioCapabilities.length&&!l.length||((u=Object.assign({},a)).videoCapabilities=s,u.audioCapabilities=l,r.push(u));if(!r.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return S(g,fw.call(h,e,r),2)}return f=g.h,p=d=null,r[0]&&(r[0].videoCapabilities&&(d=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(p=r[0].audioCapabilities[0].encryptionScheme)),g.return(new yw(f,d,p))})}function Cw(e,t){return e?e.filter(function(e){return xw(e.encryptionScheme,t)}):e}function Aw(){}function Ew(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Iw),document.addEventListener("webkitfullscreenerror",Iw),document.addEventListener("mozfullscreenchange",Iw),document.addEventListener("mozfullscreenerror",Iw),document.addEventListener("MSFullscreenChange",Iw),document.addEventListener("MSFullscreenError",Iw)}}function Iw(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function Mw(){}function Rw(){le().Kf()&&!dw&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(dw=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=_w,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function _w(e){var t,n,r=this;return O(function(o){switch(o.g){case 1:return S(o,dw.call(r,e),2);case 2:if(!(t=o.h).supported||!e.keySystemConfiguration)return o.return(t);if(bw(n=t.keySystemAccess))return navigator.mediaCapabilities.decodingInfo=dw,o.return(t);if(navigator.mediaCapabilities.decodingInfo=Lw,n){o.A(3);break}return S(o,Pw(e),4);case 4:return t.keySystemAccess=o.h,o.return(t);case 3:return o.return(Lw.call(r,e))}})}function Lw(e){var t,n,r,o,i,a,s,l=this;return O(function(u){switch(u.g){case 1:return n=t=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,o=r.keySystem,n=r.audio&&r.audio.encryptionScheme,t=r.video&&r.video.encryptionScheme,i=vw(o),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},xw(n,i)&&xw(t,i))?S(u,dw.call(l,e),2):u.return(a);case 2:if((s=u.h).keySystemAccess){s.keySystemAccess=new yw(s.keySystemAccess,t,n),u.A(3);break}if(!e.keySystemConfiguration){u.A(3);break}return S(u,Pw(e),5);case 5:s.keySystemAccess=u.h;case 3:return u.return(s)}})}function Pw(e){var t,n;return O(function(r){if(1==r.g){var o=e.keySystemConfiguration,i=[],a=[];return o.audio&&i.push({robustness:o.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:o.audio.encryptionScheme}),o.video&&a.push({robustness:o.video.robustness||"",contentType:e.video.contentType,encryptionScheme:o.video.encryptionScheme}),o={initDataTypes:o.initDataType?[o.initDataType]:[],distinctiveIdentifier:o.distinctiveIdentifier,persistentState:o.persistentState,sessionTypes:o.sessionTypes},i.length&&(o.audioCapabilities=i),a.length&&(o.videoCapabilities=a),t=o,S(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}function Dw(){}function Ow(){le().cc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Dw.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Nw)}function Nw(t){var n,r,o,i,a,s,l;return O(function(u){switch(u.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},le(),r=t.video,o=t.audio,"media-source"!=t.type){if("file"!=t.type)return u.return(n);if(r&&(i=r.contentType,""==rs().canPlayType(i))||o&&(a=o.contentType,""==rs().canPlayType(a)))return u.return(n);u.A(2);break}if(!Ky())return u.return(n);if(!r){u.A(3);break}return S(u,function(t){var n;return O(function(r){return 1==r.g?"CAST"!==le().Oa()?r.A(2):S(r,function(t){var n,r,o,i;return O(function(a){if(1==a.g){if(!(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return a.return(vt(t.contentType));switch(n=t.contentType,t.width&&t.height&&t.width>1280&&t.height>720&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&((r=Math.round(t.framerate))<24||r>30)&&(n+="; framerate="+t.framerate),t.transferFunction||""){case"":case"srgb":break;case"pq":n+="; eotf=smpte2084";break;case"hlg":n+="; eotf=arib-std-b67";break;default:return a.return(!1)}return o=!1,(i=Hw).has(n)?(o=i.get(n),a.A(2)):S(a,cast.__platform__.canDisplayType(n),3)}return 2!=a.g&&(o=a.h,i.set(n,o)),a.return(o)})}(t),3):2!=r.g?(n=r.h,r.return(n)):r.return(vt(t.contentType))})}(r),4);case 4:if(!u.h)return u.return(n);case 3:if(o){var c=le().Oa(),f=o.contentType;if("CAST"===c&&o.spatialRendering&&(f+="; spatialRendering=true"),!vt(f))return u.return(n)}case 2:return t.keySystemConfiguration?(s=t.keySystemConfiguration,S(u,function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p;return O(function(h){switch(h.g){case 1:if(r=[],o=[],n.audio&&(i={robustness:n.audio.robustness||"",contentType:t.contentType},le().si()&&t.contentType.includes('codecs="ac-3"')&&(i.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(i.encryptionScheme=n.audio.encryptionScheme),r.push(i)),n.video&&(a={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(a.encryptionScheme=n.video.encryptionScheme),o.push(a)),s={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(s.audioCapabilities=r),o.length&&(s.videoCapabilities=o),l=e?e.contentType:"",u=t?t.contentType:"",c=cr(l)+";"+ur(l),f=cr(u)+";"+ur(u),d=n.keySystem,p=null,C(h,2),Co.has(c+"#"+f+"#"+d)){p=Co.get(c+"#"+f+"#"+d)||null,h.A(4);break}return S(h,navigator.requestMediaKeySystemAccess(n.keySystem,[s]),5);case 5:p=h.h,Co.set(c+"#"+f+"#"+d,p);case 4:E(h,3);break;case 2:I(h);case 3:return h.return(p)}})}(r,o,s),6)):(n.supported=!0,u.return(n));case 6:(l=u.h)&&(n.supported=!0,n.keySystemAccess=l);case 5:return u.return(n)}})}uw.Aria=hw,hw.install=mw,cw(mw),yw.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(n=(t=m(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},yw.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},uw.EmeEncryptionScheme=ww,ww.install=Sw,cw(Sw),uw.Fullscreen=Aw,Aw.install=Ew,cw(Ew),uw.MCapEncryptionScheme=Mw,Mw.install=Rw,cw(Rw,-2),uw.MediaCapabilities=Dw,Dw.install=Ow,Dw.originalMcap=null;var Uw,Bw,jw,Fw,zw,Vw,Hw=new Map;function Gw(){}function qw(){var t=le(),n="WEBKIT"===t.Ea()?t.za():null;for((e.MediaSource||e.ManagedMediaSource)&&n&&e.MediaSource&&(n<=12?(Ww(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):n<=15&&Ww()),n=(t=m(t.Ei())).next();!n.done;n=t.next())Kw(n.value);(e.MediaSource||e.ManagedMediaSource)&&function(){if(e.MediaSource){var t=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(e){return"mp2t"!=sr(e)&&t(e)}}if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=sr(e)&&n(e)}}}(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;le().$i()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(e){return e.startsWith("codecs=")});if(r<0)return e(t);var o=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),i=o.findIndex(function(e){return e.startsWith("vp09")});return i>=0&&(o[i]="vp9",n[r]='codecs="'+o.join(",")+'"',t=n.join("; ")),e(t)})}()}function Ww(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,N.apply(0,arguments));return t.abort=function(){},t}}function Kw(t){var n=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return ur(e)!=t&&n(e)},e.ManagedMediaSource){var r=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return ur(e)!=t&&r(e)}}}function Xw(){}function $w(){screen.orientation&&screen.orientation.unlock||(null!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Yw;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new No("change");n.dispatchEvent(e)})}())}function Yw(){jo.call(this),this.type="",this.angle=0}function Jw(){}function Qw(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&e.shakaMediaKeysPolyfill!=lS&&(void 0!==t&&t&&(Uw=!0,Bw=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),jw=HTMLMediaElement.prototype.setMediaKeys,Fw=e.MediaKeys,zw=e.MediaKeySystemAccess,Vw=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=eS,e.MediaKeys=rS,e.MediaKeySystemAccess=nS,navigator.requestMediaKeySystemAccess=Zw,e.shakaMediaKeysPolyfill=lS,co.clear(),Co.clear())}function Zw(e,t){try{var n=new nS(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function eS(e){var t=this.mediaKeys;return t&&t!=e&&oS(t,null),delete this.mediaKeys,(this.mediaKeys=e)?oS(e,this):Promise.resolve()}function tS(e){if(je(e=Ue(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=We(e=Ge(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Ne(e),this.dispatchEvent(t)}function nS(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=m(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,o=!1;if(n.audioCapabilities)for(var i=m(n.audioCapabilities),a=i.next();!a.done;a=i.next())(a=a.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.audioCapabilities.push(a),o=!0));if(n.videoCapabilities)for(i=(n=m(n.videoCapabilities)).next();!i.done;i=n.next())(i=i.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,i.contentType.split(";")[0])&&(t.videoCapabilities.push(i),o=!0));r||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=o?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function rS(e){this.h=new WebKitMediaKeys(e),this.g=new oe}function oS(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",tS);try{return gl(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function iS(e){jo.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new oe,this.sessionId="",this.expiration=NaN,this.closed=new Mo,this.keyStatuses=new sS,this.onkeystatuseschange=null}function aS(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new No("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function sS(){this.size=0,this.g=void 0}cw(Ow,-1),uw.MediaSource=Gw,Gw.install=qw,cw(qw),uw.Orientation=Xw,Xw.install=$w,p(Yw,jo),Yw.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Yw.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},cw($w),uw.PatchedMediaKeysApple=Jw,Jw.uninstall=function(){e.shakaMediaKeysPolyfill==lS&&Uw&&(Uw=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Bw),HTMLMediaElement.prototype.setMediaKeys=jw,e.MediaKeys=Fw,e.MediaKeySystemAccess=zw,navigator.requestMediaKeySystemAccess=Vw,Bw=Vw=jw=zw=Fw=null,e.shakaMediaKeysPolyfill="",co.clear(),Co.clear())},Jw.install=Qw,nS.prototype.createMediaKeys=function(){var e=new rS(this.keySystem);return Promise.resolve(e)},nS.prototype.getConfiguration=function(){return this.g},rS.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new iS(this.h)},rS.prototype.setServerCertificate=function(){return Promise.resolve(!1)},rS.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},p(iS,jo),(o=iS.prototype).generateRequest=function(e,t){var n=this;this.h=new Mo;try{var r=this.l.createSession("video/mp4",Ue(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(e){n.h&&(n.h.resolve(),n.h=null),e=new No("message",e=(new Map).set("messageType",null==n.keyStatuses.Kc()?"license-request":"license-renewal").set("message",Ne(e.message))),n.dispatchEvent(e)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(aS(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:aS(n,"output-not-allowed");break;default:aS(n,"internal-error")}}),aS(this,"status-pending")}catch(o){this.h.reject(o)}return this.h},o.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},o.update=function(e){this.g=new Mo;try{this.i.update(Ue(e))}catch(t){this.g.reject(t)}return this.g},o.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(kk){this.closed.reject(kk)}return this.closed},o.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(o=sS.prototype).Kc=function(){return this.g},o.forEach=function(e){this.g&&e(this.g,ko.value())},o.get=function(e){if(this.has(e))return this.g},o.has=function(e){var t=ko.value();return!(!this.g||!Oe(e,t))},o.entries=function(){},o.keys=function(){},o.values=function(){};var lS="apple";function uS(){}function cS(){if(e.MediaKeys){var t=le();MediaKeys.prototype.setServerCertificate&&t.pe()||(MediaKeys.prototype.setServerCertificate=fS)}}function fS(){return Promise.resolve(!1)}function dS(){}function pS(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)AS="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=mS,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=gS,e.MediaKeys=vS,e.MediaKeySystemAccess=yS,e.shakaMediaKeysPolyfill=ES}}function hS(e){return AS?AS+e.charAt(0).toUpperCase()+e.slice(1):e}function mS(e,t){try{var n=new yS(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function gS(e){var t=this.mediaKeys;return t&&t!=e&&bS(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&bS(e,this),Promise.resolve()}function yS(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,o=document.getElementsByTagName("video");o=o.length?o[0]:document.createElement("video");for(var i=(t=m(t)).next();!i.done;i=t.next()){var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(i=i.value).initDataTypes,sessionTypes:["temporary"],label:i.label},s=!1;if(i.audioCapabilities)for(var l=m(i.audioCapabilities),u=l.next();!u.done;u=l.next())(u=u.value).contentType&&(s=!0,o.canPlayType(u.contentType.split(";")[0],this.g)&&(a.audioCapabilities.push(u),r=!0));if(i.videoCapabilities)for(u=(l=m(i.videoCapabilities)).next();!u.done;u=l.next())(u=u.value).contentType&&(s=!0,o.canPlayType(u.contentType,this.g)&&(a.videoCapabilities.push(u),r=!0));if(s||(r=o.canPlayType("video/mp4",this.g)||o.canPlayType("video/webm",this.g)),"required"==i.persistentState&&(n?(a.persistentState="required",a.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=a)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function vS(e){this.l=e,this.h=null,this.g=new oe,this.i=[],this.j=new Map}function bS(e,t){e.h=t,e.g.Qa();var n=AS;t&&(e.g.D(t,n+"needkey",function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Ne(t.initData),e.h.dispatchEvent(n)}),e.g.D(t,n+"keymessage",function(t){var n=xS(e,t.sessionId);n&&(t=new No("message",t=(new Map).set("messageType",null==n.keyStatuses.Kc()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))}),e.g.D(t,n+"keyadded",function(t){(t=xS(e,t.sessionId))&&t.ready()}),e.g.D(t,n+"keyerror",function(t){var n=xS(e,t.sessionId);if(n){var r=Error("EME v0.1b key error"),o=t.errorCode;o.systemCode=t.systemCode,r.errorCode=o,!t.sessionId&&n.h?(45==t.systemCode&&(r.message="Unsupported session type."),n.h.reject(r),n.h=null):t.sessionId&&n.g?(n.g.reject(r),n.g=null):(r=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?kS(n,"output-restricted"):kS(n,1==r?"expired":"internal-error"))}}))}function xS(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function wS(e,t,n){jo.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Mo,this.keyStatuses=new CS,this.onkeystatuseschange=null}function SS(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=Ue(We("LOAD_SESSION|"+n));else{var o=We("PERSISTENT|");r=rt(o,t)}else r=Ue(t)}catch(a){return Promise.reject(a)}e.h=new Mo;var i=hS("generateKeyRequest");try{e.j[i](e.i,r)}catch(a){if("InvalidStateError"!=a.name)return e.h=null,Promise.reject(a);new Tr(function(){try{e.j[i](e.i,r)}catch(t){e.h.reject(t),e.h=null}}).ka(.01)}return e.h}function TS(e,t,n){if(e.g)e.g.then(function(){return TS(e,t,n)}).catch(function(){return TS(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=He(n),o=JSON.parse(r);"oct"!=o.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=et(o.keys[0].k),o=et(o.keys[0].kid)}else r=Ue(n),o=null;var i=hS("addKey");try{e.j[i](e.i,r,o,e.sessionId)}catch(a){e.g.reject(a),e.g=null}}}function kS(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new No("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function CS(){this.size=0,this.g=void 0}cw(function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||Qw())}),uw.PatchedMediaKeysCert=uS,uS.install=cS,cw(cS),uw.PatchedMediaKeysWebkit=dS,dS.install=pS,yS.prototype.createMediaKeys=function(){var e=new vS(this.g);return Promise.resolve(e)},yS.prototype.getConfiguration=function(){return this.h},vS.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new wS(t,this.l,e),this.i.push(e),e},vS.prototype.setServerCertificate=function(){return Promise.resolve(!1)},vS.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},p(wS,jo),(o=wS.prototype).ready=function(){kS(this,"usable"),this.g&&this.g.resolve(),this.g=null},o.generateRequest=function(e,t){return SS(this,t,null)},o.load=function(e){return"persistent-license"==this.l?SS(this,null,e):Promise.reject(Error("Not a persistent session."))},o.update=function(e){var t=new Mo;return TS(this,t,e),t},o.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=hS("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},o.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(o=CS.prototype).Kc=function(){return this.g},o.forEach=function(e){this.g&&e(this.g,ko.value())},o.get=function(e){if(this.has(e))return this.g},o.has=function(e){var t=ko.value();return!(!this.g||!Oe(e,t))},o.entries=function(){},o.keys=function(){},o.values=function(){};var AS="",ES="webkit";function IS(){}function MS(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=_S,Object.defineProperty(t,"disablePictureInPicture",{get:PS,set:DS,enumerable:!0,configurable:!0}),document.exitPictureInPicture=LS,document.addEventListener("webkitpresentationmodechanged",RS,!0))}}function RS(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function _S(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function LS(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function PS(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function DS(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function OS(){}function NS(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=US))}function US(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function BS(){}function jS(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:FS})}function FS(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function zS(){}function VS(){for(var e=m([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())(t=t.value).prototype.indexOf||(t.prototype.indexOf=HS),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=GS),t.prototype.includes||(t.prototype.includes=qS)}function HS(e,t){return Array.prototype.indexOf.call(this,e,t)}function GS(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function qS(e,t){return-1!==this.indexOf(e,t)}function WS(){}function KS(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function XS(){}function $S(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||"number"==typeof rs().webkitDroppedFrameCount)&&(t.getVideoPlaybackQuality=YS)}}function YS(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function JS(){}function QS(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=ZS;else if(6==n)t=eT;else{try{var r=!!ZS(1,2,"")}catch(o){r=!1}r&&(t=ZS)}t&&(e.VTTCue=function(e,n,r){return t(e,n,r)})}}function ZS(t,n,r){return new e.TextTrackCue(t,n,r)}function eT(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function tT(e){jo.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new oe}function nT(){}cw(pS),uw.PiPWebkit=IS,IS.install=MS,cw(MS),uw.RandomUUID=OS,OS.install=NS,cw(NS),uw.Symbol=BS,BS.install=jS,cw(jS),uw.TypedArray=zS,zS.install=VS,cw(VS),uw.VideoPlayPromise=WS,WS.install=KS,cw(KS),uw.VideoPlaybackQuality=XS,XS.install=$S,cw($S),uw.VTTCue=JS,JS.install=QS,cw(QS),p(tT,jo),(o=tT.prototype).destroy=function(){var e=this;return O(function(t){if(1==t.g)return S(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),jo.prototype.release.call(e),k(t)})},o.configure=function(e){this.m=e},o.getConfiguration=function(){return this.m},o.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},o.getCurrentItemIndex=function(){return this.j},o.getItems=function(){return this.h.slice()},o.insertItems=function(e){this.h.push.apply(this.h,g(e)),this.dispatchEvent(new No("itemsinserted"))},o.removeAllItems=function(){var e,t,n,r,o=this;return O(function(i){if(1==i.g)return o.o.Qa(),o.h.length&&o.j>=0?S(i,o.g.Bc(),2):i.A(2);if(4!=i.g){for(e=[],o.i&&(o.i.preloadManager.j||e.push(o.i.preloadManager.destroy()),o.i=null),o.l&&(o.l.preloadManager.j||e.push(o.l.preloadManager.destroy()),o.l=null),t=m(o.h),n=t.next();!n.done;n=t.next())(r=n.value).preloadManager&&!r.preloadManager.j&&e.push(r.preloadManager.destroy());return e.length?S(i,Promise.all(e),4):i.A(4)}o.h=[],o.j=-1,o.dispatchEvent(new No("itemsremoved")),k(i)})},o.playItem=function(e){var t,n,r,o,i,a,s,l,u,c,f,d,p,h,g,y,v,b=this;return O(function(x){switch(x.g){case 1:if(b.o.Qa(),!b.h.length||e>=b.h.length)throw new ze(2,7,7007);if(t=b.getCurrentItem(),n=b.h[e],b.j!=e&&(b.j=e,b.dispatchEvent(new No("currentitemchanged"))),r=b.g.h,(o=b.m?b.m.preloadNextUrlWindow:0)>0&&(i=!1,b.o.D(r,"timeupdate",function(){var e,t,n,a;return O(function(s){switch(s.g){case 1:if(b.l||b.h.length<=1||i||b.g.W()||!r.duration)return s.return();if(e=b.g.Va().end-r.currentTime,isNaN(e)){s.A(0);break}if(!(e<=o)){s.A(0);break}if(t=b.m&&b.m.repeatMode,n=null,b.j+1<b.h.length?n=b.h[b.j+1]:1==t&&(n=b.h[0]),!n||n.preloadManager&&!n.preloadManager.j){s.A(0);break}return i=!0,a=null,C(s,5),S(s,b.g.preload(n.manifestUri,n.startTime,n.mimeType,n.config),7);case 7:a=s.h,E(s,6);break;case 5:I(s),a=null;case 6:b.l={item:n,preloadManager:a},i=!1,k(s)}})})),b.o.D(b.g,"complete",function(){var e=b.m&&b.m.repeatMode,t=!1;if(2==e)t=!0;else{var n=b.j+1;n<b.h.length?b.playItem(n):1==e&&(1==b.h.length?t=!0:b.playItem(0))}t&&(r.paused?(r.currentTime=b.g.Va().start,r.play()):b.o.D(r,"paused",function(){r.currentTime=b.g.Va().start,r.play()}))}),a=n.manifestUri,n.preloadManager&&!n.preloadManager.j&&(a=n.preloadManager),s=!1,b.l&&b.l.item==n&&b.l.preloadManager?a=b.l.preloadManager:b.i&&b.i.item==n&&b.i.preloadManager&&(a=b.i.preloadManager,s=!0),!b.i){x.A(2);break}if(s||b.i.preloadManager.j){x.A(3);break}return S(x,b.i.preloadManager.destroy(),3);case 3:b.i=null;case 2:if(!(b.m&&b.m.preloadPrevItem&&t&&b.g.m===tp)){x.A(5);break}return l=null,C(x,6),S(x,b.g.dj(),8);case 8:l=x.h,E(x,7);break;case 6:I(x),l=null;case 7:b.i={item:t,preloadManager:l};case 5:return n.config&&(b.g.Ii(),b.g.configure(n.config)),S(x,b.g.load(a,n.startTime,n.mimeType),9);case 9:if(b.l=null,n.extraText)for(u=m(n.extraText),c=u.next();!c.done;c=u.next())(f=c.value).mime?b.g.Md(f.uri,f.language,f.kind,f.mime,f.codecs):b.g.Md(f.uri,f.language,f.kind);if(n.extraThumbnail)for(d=m(n.extraThumbnail),p=d.next();!p.done;p=d.next())h=p.value,b.g.Le(h);if(n.extraChapter)for(g=m(n.extraChapter),y=g.next();!y.done;y=g.next())v=y.value,b.g.Ke(v.uri,v.language,v.mime);k(x)}})},H("shaka.queue.QueueManager",tT),tT.prototype.playItem=tT.prototype.playItem,tT.prototype.removeAllItems=tT.prototype.removeAllItems,tT.prototype.insertItems=tT.prototype.insertItems,tT.prototype.getItems=tT.prototype.getItems,tT.prototype.getCurrentItemIndex=tT.prototype.getCurrentItemIndex,tT.prototype.getCurrentItem=tT.prototype.getCurrentItem,tT.prototype.getConfiguration=tT.prototype.getConfiguration,tT.prototype.configure=tT.prototype.configure,tT.prototype.destroy=tT.prototype.destroy,ap=function(e){return new tT(e)},nT.prototype.parseInit=function(){},nT.prototype.setSequenceMode=function(){},nT.prototype.setManifestType=function(){},nT.prototype.parseMedia=function(e,t){for(var n=null,r=[],o=(e=m(e=He(e).split(/\r?\n/))).next();!o.done;o=e.next())if((o=o.value)&&!/^\s+$/.test(o)&&(o=rT.exec(o))){var i=oT.exec(o[1]);o=new Tn(i=60*parseInt(i[1],10)+parseFloat(i[2].replace(",",".")),t.segmentEnd?t.segmentEnd:i+2,o[2]),n&&(n.endTime=i,r.push(n)),n=o}return n&&r.push(n),r},H("shaka.text.LrcTextParser",nT),nT.prototype.parseMedia=nT.prototype.parseMedia,nT.prototype.setManifestType=nT.prototype.setManifestType,nT.prototype.setSequenceMode=nT.prototype.setSequenceMode,nT.prototype.parseInit=nT.prototype.parseInit;var rT=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,oT=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function iT(){this.g="UNKNOWN"}function aT(e,t,n,r,o,i,a,s,l,u,c,f,d,p){var h=c;if(Kt(t)){if(!f)return null;var g={tagName:"span",children:[Yt(t)],attributes:{},parent:null}}else g=t;for(var y=null,v=m(DT),b=v.next();!b.done&&!(y=hT(g,"backgroundImage",o,"#",b.value)[0]);b=v.next());v=null;var x=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if((b=on(g,DT,"backgroundImage"))&&x.test(b)){if((v=parseInt(b.split(":").pop(),10)-1)>=p.length)return null;v=p[v]}else d&&b&&!b.startsWith("#")&&(x=new ve(d),b=new ve(b),(b=x.resolve(b).toString())&&(v=b));if(("p"==t.tagName||y||v)&&(f=!0),t=f,b="default"==(g.attributes["xml:space"]||(l?"default":"preserve")),l=[],!(x=g.children.every(Kt)))for(var w=m(g.children),S=w.next();!S.done;S=w.next())(S=aT(e,S.value,n,r,o,i,a,s,b,u,g,f,d,p))&&l.push(S);if(o=null!=c,d=Yt(g),d=g.children.length&&d&&/\S/.test(d),!((w=g.attributes.begin||g.attributes.end||g.attributes.dur)||d||"br"==g.tagName||0!=l.length||o&&!b))return null;for(d=(p=gT(g,r)).start,p=p.end;h&&h.tagName&&"tt"!=h.tagName;)d=(p=mT(h,r,d,p)).start,p=p.end,h=h.parent;if(null==d&&(d=0),d+=n.periodStart,p=null==p?1/0:p+n.periodStart,"HLS"!==e.g&&(d=Math.max(d,n.segmentStart),p=Math.min(p,n.segmentEnd)),!w&&l.length>0)for(d=1/0,p=0,r=(n=m(l)).next();!r.done;r=n.next())r=r.value,d=Math.min(d,r.startTime),p=Math.max(p,r.endTime);if("br"==g.tagName)return(e=new Tn(d,p,"")).lineBreak=!0,e;if(n="",x&&(n=$e(Yt(g)||""),b&&(n=n.replace(/\s+/g," "))),(n=new Tn(d,p,n)).nestedCues=l,f||(n.isContainer=!0),u&&(n.cellResolution=u),u=hT(g,"region",a,"")[0],g.attributes.region&&u&&u.attributes["xml:id"]){var T=u.attributes["xml:id"];n.region=s.filter(function(e){return e.id==T})[0]}return s=u,c&&o&&!g.attributes.region&&!g.attributes.style&&(s=hT(c,"region",a,"")[0]),function(e,t,n,r,o,i,a,s,l){if("rtl"==cT(e,n,r,a,"direction",s=s||l)&&(t.direction="rtl"),"tb"==(l=cT(e,n,r,a,"writingMode",s))||"tblr"==l?t.writingMode="vertical-lr":"tbrl"==l?t.writingMode="vertical-rl":"rltb"==l||"rl"==l?t.direction="rtl":l&&(t.direction=On),(l=cT(e,n,r,a,"textAlign",!0))?(t.positionAlign=_T.get(l),t.lineAlign=RT.get(l),t.textAlign=Ln[l.toUpperCase()]):t.textAlign=_n,(l=cT(e,n,r,a,"displayAlign",!0))&&(t.displayAlign=Dn[l.toUpperCase()]),(l=cT(e,n,r,a,"color",s))&&(t.color=lT(l)),(l=cT(e,n,r,a,"backgroundColor",s))&&(t.backgroundColor=lT(l)),(l=cT(e,n,r,a,"border",s))&&(t.border=l),l=cT(e,n,r,a,"fontFamily",s))switch(l){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=l.split(",").filter(function(e){return"default"!=e}).join(",")}switch((l=cT(e,n,r,a,"fontWeight",s))&&"bold"==l&&(t.fontWeight=Hn),l=cT(e,n,r,a,"wrapOption",s),t.wrapLine=!l||"noWrap"!=l,(l=cT(e,n,r,a,"lineHeight",s))&&l.match(ST)&&(t.lineHeight=l),(l=cT(e,n,r,a,"fontSize",s))&&(l.match(ST)||l.match(wT))&&(t.fontSize=l),(l=cT(e,n,r,a,"fontStyle",s))&&(t.fontStyle=Wn[l.toUpperCase()]),o?(i=o.attributes.imageType||o.attributes.imagetype,l=o.attributes.encoding,o=Yt(o).trim(),"PNG"==i&&"Base64"==l&&o&&(t.backgroundImage="data:image/png;base64,"+o)):i&&(t.backgroundImage=i),(o=cT(e,n,r,a,"textOutline",s))&&((o=o.split(" "))[0].match(ST)?t.textStrokeColor=t.color:(t.textStrokeColor=lT(o[0]),o.shift()),o[0]&&o[0].match(ST)?t.textStrokeWidth=o[0]:t.textStrokeColor=""),(o=cT(e,n,r,a,"letterSpacing",s))&&o.match(ST)&&(t.letterSpacing=o),(o=cT(e,n,r,a,"linePadding",s))&&o.match(ST)&&(t.linePadding=o),(o=cT(e,n,r,a,"opacity",s))&&(t.opacity=parseFloat(o)),(o=fT(e,r,a,"textDecoration"))&&uT(t,o),(o=dT(e,n,a,"textDecoration"))&&uT(t,o),(o=cT(e,n,r,a,"textCombine",s))&&(t.textCombineUpright=o),cT(e,n,r,a,"ruby",s)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}(e,n,g,s,y,v,i,t,0==l.length),n}function sT(e,t,n,r){var o=new Rt,i=t.attributes["xml:id"];if(!i)return null;o.id=i,i=null,r&&(i=xT.exec(r)||TT.exec(r)),r=i?Number(i[1]):null,i=i?Number(i[2]):null;var a,s=fT(e,t,n,"extent");if(s){var l=(a=xT.exec(s))||TT.exec(s);null!=l&&(o.width=Number(l[1]),o.height=Number(l[2]),a||(null!=r&&(o.width=100*o.width/r),null!=i&&(o.height=100*o.height/i)),o.widthUnits=a||null!=r?_t:0,o.heightUnits=a||null!=i?_t:0)}return(e=fT(e,t,n,"origin"))&&null!=(l=(a=xT.exec(e))||TT.exec(e))&&(o.viewportAnchorX=Number(l[1]),o.viewportAnchorY=Number(l[2]),a?s||(o.width=100-o.viewportAnchorX,o.widthUnits=_t,o.height=100-o.viewportAnchorY,o.heightUnits=_t):(null!=i&&(o.viewportAnchorY=100*o.viewportAnchorY/i),null!=r&&(o.viewportAnchorX=100*o.viewportAnchorX/r)),o.viewportAnchorUnits=a||null!=r?_t:0),o}function lT(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&4==(t=t[1].split(",")).length?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function uT(e,t){for(var n=(t=m(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Kn)||e.textDecoration.push(Kn);break;case"noUnderline":e.textDecoration.includes(Kn)&&ee(e.textDecoration,Kn);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&ee(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&ee(e.textDecoration,"overline")}}function cT(e,t,n,r,o,i){return i=void 0===i||i,(t=dT(e,t,r,o))?t:i?fT(e,n,r,o):null}function fT(e,t,n,r){if(!t)return null;var o=on(t,PT,r);return o||pT(e,t,n,r)}function dT(e,t,n,r){var o=on(t,PT,r);return o||pT(e,t,n,r)}function pT(e,t,n,r){t=hT(t,"style",n,"");for(var o=null,i=0;i<t.length;i++){var a=nn(t[i],"urn:ebu:tt:style",r);a||(a=on(t[i],PT,r)),a||(a=dT(e,t[i],n,r)),a&&(o=a)}return o}function hT(e,t,n,r,o){var i=[];if(!e||n.length<1)return i;var a=e;for(e=null;!e&&!(e=o?nn(a,o,t):a.attributes[t])&&(a=a.parent););if(t=e)for(o=(t=m(t.split(" "))).next();!o.done;o=t.next())for(o=o.value,a=(e=m(n)).next();!a.done;a=e.next())if(r+(a=a.value).attributes["xml:id"]==o){i.push(a);break}return i}function mT(e,t,n,r){return e=gT(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function gT(e,t){var n=yT(e.attributes.begin,t),r=yT(e.attributes.end,t);return e=yT(e.attributes.dur,t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function yT(e,t){var n=null;if(kT.test(e)){e=kT.exec(e),n=Number(e[1]);var r=Number(e[2]),o=Number(e[3]),i=Number(e[4]);n=(o+=(i+=(Number(e[5])||0)/t.h)/t.frameRate)+60*r+3600*n}else if(CT.test(e))n=vT(CT,e);else if(AT.test(e))n=vT(AT,e);else if(ET.test(e))e=ET.exec(e),n=Number(e[1])/t.frameRate;else if(IT.test(e))e=IT.exec(e),n=Number(e[1])/t.g;else if(MT.test(e))n=vT(MT,e);else if(e)throw new ze(2,2,2001,"Could not parse cue time range in TTML");return n}function vT(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function bT(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}gr("application/x-subtitle-lrc",function(){return new nT}),iT.prototype.parseInit=function(){},iT.prototype.setSequenceMode=function(){},iT.prototype.setManifestType=function(e){this.g=e},iT.prototype.parseMedia=function(e,t,n,r){var o=He(e);if(e=[],""==o)return e;var i=qt(o,"tt",!0);if(!i)throw new ze(2,2,2005,"Failed to parse TTML.");if(!(o=Qt(i,"body")[0]))return[];var a=on(i,LT,"frameRate"),s=on(i,LT,"subFrameRate"),l=on(i,LT,"frameRateMultiplier"),u=on(i,LT,"tickRate"),c=on(i,LT,"cellResolution"),f=i.attributes["xml:space"]||"default",d=on(i,PT,"extent");if("default"!=f&&"preserve"!=f)throw new ze(2,2,2005,"Invalid xml:space value: "+f);f="default"==f,a=new bT(a,s,l,u),c=function(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}(c),s=((s=Qt(i,"metadata")[0])?s.children:[]).filter(function(e){return"\n"!=e}),l=Qt(i,"style"),u=[];for(var p=m(i=Qt(i,"region")),h=p.next();!h.done;h=p.next())(h=sT(this,h.value,l,d))&&u.push(h);if($t(o,"p").length)throw new ze(2,2,2001,"<p> can only be inside <div> in TTML");for(p=(d=m($t(o,"div"))).next();!p.done;p=d.next())if($t(p.value,"span").length)throw new ze(2,2,2001,"<span> can only be inside <p> in TTML");return(t=aT(this,o,t,a,s,l,i,u,f,c,null,!1,n,r))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},H("shaka.text.TtmlTextParser",iT),iT.prototype.parseMedia=iT.prototype.parseMedia,iT.prototype.setManifestType=iT.prototype.setManifestType,iT.prototype.setSequenceMode=iT.prototype.setSequenceMode,iT.prototype.parseInit=iT.prototype.parseInit;var xT=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,wT=/^(\d{1,4}(?:\.\d+)?|100)%$/,ST=/^(\d+px|\d+em|\d*\.?\d+c)$/,TT=/^(\d+)px (\d+)px$/,kT=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,CT=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,AT=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,ET=/^(\d*(?:\.\d*)?)f$/,IT=/^(\d*(?:\.\d*)?)t$/,MT=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),RT=(new Map).set("left",Bn).set("center","center").set("right","end").set("start",Bn).set("end","end"),_T=(new Map).set("left","line-left").set("center","center").set("right","line-right"),LT=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],PT=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],DT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function OT(){this.g=new iT}function NT(){this.g="UNKNOWN"}function UT(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?_n:Ln[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":Rn)):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Un,e.line=Number(n[1]),n[2]&&(e.lineAlign=jn[n[2].toUpperCase()]))}function BT(){this.g=null}function jT(e,t,n){var r,o,i;return(new si).box("payl",di(function(e){r=He(e)})).box("iden",di(function(e){o=He(e)})).box("sttg",di(function(e){i=He(e)})).parse(e),r?function(e,t,n,r,o){if(An(e=new Tn(r,o,e)),t&&(e.id=t),n)for(t=new Pt(n),n=Nt(t);n;)UT(e,n,[]),Dt(t),n=Nt(t);return e}(r,o,i,t,n):null}function FT(){}function zT(){this.g=new NT}function VT(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=m((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function HT(){}function GT(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=qT(n))&&(e.color=n),(n=t.BackColour)&&(n=qT(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Hn),t.Italic&&(e.fontStyle=qn),t.Underline&&e.textDecoration.push(Kn),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Pn,e.textAlign="start";break;case 2:e.displayAlign=Pn,e.textAlign=_n;break;case 3:e.displayAlign=Pn,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=_n;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=_n;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function qT(e){return(e=parseInt(e.replace("&H",""),16))>=0?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function WT(e){return 3600*((e=YT.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}gr("application/ttml+xml",function(){return new iT}),OT.prototype.parseInit=function(e){var t=!1;if((new si).box("moov",li).box("trak",li).box("mdia",li).box("minf",li).box("stbl",li).T("stsd",ui).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new ze(2,2,2007)},OT.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},OT.prototype.setManifestType=function(e){this.g.setManifestType(e)},OT.prototype.parseMedia=function(e,t,n){var r=[],o=null,i=[],a=new Map,s=[];if((new si).box("moof",li).box("traf",li).T("tfhd",function(e){o=ra(e.reader,e.flags).Sd}).T("trun",function(e){for(var t=(e=m((e=aa(e.reader,e.version,e.flags)).ih)).next();!t.done;t=e.next())s.push(t.value.sampleSize||o||0)}).T("subs",function(e){for(var t=e.reader,n=t.U(),r=-1,o=0;o<n;o++){var i=t.U();r+=i,i=t.Ba();for(var s=[],l=0;l<i;l++)1==e.version?s.push(t.U()):s.push(t.Ba()),t.Y(),t.Y(),t.U();a.set(r,s)}}).box("mdat",di(function(e){i.push(e)})).parse(e,!1),0==i.length)throw new ze(2,2,2007);for(var l=rt.apply(Je,g(i)),u=0,c=0;c<s.length;c++){var f=Ue(l,u,s[c]);u+=s[c];var d=a.get(c);if(d&&d.length){f=Ue(f,0,d[0]);for(var p=[],h=d[0],y=1;y<d.length;y++){var v=Ue(e,h,d[y]);v=Qe(v),p.push("data:image/png;base64,"+v),h+=d[y]}r=r.concat(this.g.parseMedia(f,t,n,p))}else r=r.concat(this.g.parseMedia(f,t,n,[]))}return r},H("shaka.text.Mp4TtmlParser",OT),OT.prototype.parseMedia=OT.prototype.parseMedia,OT.prototype.setManifestType=OT.prototype.setManifestType,OT.prototype.setSequenceMode=OT.prototype.setSequenceMode,OT.prototype.parseInit=OT.prototype.parseInit,gr('application/mp4; codecs="stpp"',function(){return new OT}),gr('application/mp4; codecs="stpp.ttml"',function(){return new OT}),gr('application/mp4; codecs="stpp.ttml.im1i"',function(){return new OT}),gr('application/mp4; codecs="stpp.ttml.im1t"',function(){return new OT}),gr('application/mp4; codecs="stpp.ttml.im2i"',function(){return new OT}),gr('application/mp4; codecs="stpp.ttml.im2t"',function(){return new OT}),gr('application/mp4; codecs="stpp.ttml.etd1"',function(){return new OT}),gr('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new OT}),gr('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new OT}),gr('application/mp4; codecs="stpp.TTML.im1t"',function(){return new OT}),NT.prototype.parseInit=function(){},NT.prototype.setSequenceMode=function(){},NT.prototype.setManifestType=function(e){this.g=e},NT.prototype.parseMedia=function(e,t){var n=(e=(e=He(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new ze(2,2,2e3);if(e=t.vttOffset,"HLS"==this.g)if(n[0].includes("X-TIMESTAMP-MAP")){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new ze(2,2,2e3);if(null==(e=Bt(e[1])))throw new ze(2,2,2e3);r=Number(r[1]);for(var o=t.segmentStart-t.periodStart;o>=95443.7176888889;)o-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],o=(r=m(n[0].split("\n"))).next();!o.done;o=r.next())if(o=o.value,/^Region:/.test(o)){o=new Pt(o);var i=new Rt;Nt(o),Dt(o);for(var a=Nt(o);a;){var s=i,l=a;(a=/^id=(.*)$/.exec(l))?s.id=a[1]:(a=/^width=(\d{1,2}|100)%$/.exec(l))?s.width=Number(a[1]):(a=/^lines=(\d+)$/.exec(l))?(s.height=Number(a[1]),s.heightUnits=2):(a=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(s.regionAnchorX=Number(a[1]),s.regionAnchorY=Number(a[2])):(a=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(s.viewportAnchorX=Number(a[1]),s.viewportAnchorY=Number(a[2])):/^scroll=up$/.exec(l)&&(s.scroll="up"),Dt(o),a=Nt(o)}t.push(i)}for(En(r=new Map),o=[],i=(n=m(n.slice(1))).next();!i.done;i=n.next()){if((1!=(i=i.value.split("\n")).length||i[0])&&!/^NOTE($|[ \t])/.test(i[0])&&"STYLE"==i[0]){for(s=[],a=-1,l=1;l<i.length;l++)i[l].includes("::cue")&&(s.push([]),a=s.length-1),-1!=a&&(s[a].push(i[l]),i[l].includes("}")&&(a=-1));for(a=(s=m(s)).next();!a.done;a=s.next()){var u=a.value;a="global",(l=u[0].match(/\((.*)\)/))&&(a=l.pop()),l=u.slice(1,-1),u[0].includes("}")&&(u=/\{(.*?)\}/.exec(u[0]))&&(l=u[1].split(";")),(u=r.get(a))||(u=new Tn(0,0,""));for(var c=!1,f=0;f<l.length;f++){var d=/^\s*([^:]+):\s*(.*)/.exec(l[f]);if(d){var p=d[2].trim().replace(";","");switch(d[1].trim()){case"background-color":case"background":c=!0,u.backgroundColor=p;break;case"color":c=!0,u.color=p;break;case"font-family":c=!0,u.fontFamily=p;break;case"font-size":c=!0,u.fontSize=p;break;case"font-weight":(parseInt(p,10)>=700||"bold"==p)&&(c=!0,u.fontWeight=Hn);break;case"font-style":switch(p){case"normal":c=!0,u.fontStyle=Gn;break;case"italic":c=!0,u.fontStyle=qn;break;case"oblique":c=!0,u.fontStyle="oblique"}break;case"opacity":c=!0,u.opacity=parseFloat(p);break;case"text-combine-upright":c=!0,u.textCombineUpright=p;break;case"text-shadow":c=!0,u.textShadow=p;break;case"white-space":c=!0,u.wrapLine="noWrap"!=p}}}c&&r.set(a,u)}}if(c=e,1==(u=i).length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0]||"REGION"==u[0])i=null;else if(i=null,u[0].includes("--\x3e")||(i=u[0],u.splice(0,1)),a=Ut(s=new Pt(u[0])),f=Ot(s,/[ \t]+--\x3e[ \t]+/g),l=Ut(s),null==a||null==f||null==l)$("Failed to parse VTT time code. Cue skipped:",i,u),i=null;else{for(a+=c,l+=c,c=u.slice(1).join("\n").trim(),r.has("global")?((u=r.get("global").clone()).startTime=a,u.endTime=l,u.payload=c):u=new Tn(a,l,c),Dt(s),a=Nt(s);a;)UT(u,a,t),Dt(s),a=Nt(s);An(u,r),null!=i&&(u.id=i),i=u}i&&o.push(i)}return o},H("shaka.text.VttTextParser",NT),NT.prototype.parseMedia=NT.prototype.parseMedia,NT.prototype.setManifestType=NT.prototype.setManifestType,NT.prototype.setSequenceMode=NT.prototype.setSequenceMode,NT.prototype.parseInit=NT.prototype.parseInit,gr("text/vtt",function(){return new NT}),gr('text/vtt; codecs="vtt"',function(){return new NT}),gr('text/vtt; codecs="wvtt"',function(){return new NT}),BT.prototype.parseInit=function(e){var t=this,n=!1;if((new si).box("moov",li).box("trak",li).box("mdia",li).T("mdhd",function(e){e=ia(e.reader,e.version),t.g=e.timescale}).box("minf",li).box("stbl",li).T("stsd",ui).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new ze(2,2,2008);if(!n)throw new ze(2,2,2008)},BT.prototype.setSequenceMode=function(){},BT.prototype.setManifestType=function(){},BT.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new ze(2,2,2008);var n,r=0,o=[],i=[],a=!1,s=!1,l=!1,u=null;if((new si).box("moof",li).box("traf",li).T("tfdt",function(e){a=!0,r=oa(e.reader,e.version).baseMediaDecodeTime}).T("tfhd",function(e){u=ra(e.reader,e.flags).Rd}).T("trun",function(e){s=!0,o=aa(e.reader,e.version,e.flags).ih}).box("mdat",di(function(e){l=!0,n=e})).parse(e,!1),!l&&!a&&!s)throw new ze(2,2,2008);e=r;for(var c=new oi(n,0),f=m(o),d=f.next();!d.done;d=f.next()){var p=(d=d.value).jh||u,h=d.Cf?r+d.Cf:e;e=h+(p||0);var g=0;do{var y=c.U();g+=y;var v=null;"vttc"==hi(c.U())?y>8&&(v=c.Tb(y-8)):c.skip(y-8),p&&v&&(y=jT(v,t.periodStart+h/this.g,t.periodStart+e/this.g),i.push(y))}while(d.sampleSize&&g<d.sampleSize)}return i.filter(Ar)},H("shaka.text.Mp4VttParser",BT),BT.prototype.parseMedia=BT.prototype.parseMedia,BT.prototype.setManifestType=BT.prototype.setManifestType,BT.prototype.setSequenceMode=BT.prototype.setSequenceMode,BT.prototype.parseInit=BT.prototype.parseInit,gr('application/mp4; codecs="wvtt"',function(){return new BT}),FT.prototype.parseInit=function(){},FT.prototype.setSequenceMode=function(){},FT.prototype.setManifestType=function(){},FT.prototype.parseMedia=function(e){var t=He(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=m(t.split("\n\n"))).next();!n.done;n=t.next()){var r=new Pt((n=n.value.split("\n"))[0]),o=Ut(r),i=Ot(r,/,/g);if(r=Ut(r),null==o||null==i||null==r)throw new ze(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Tn(o,r,n.slice(1).join("\n").trim()))}return e},H("shaka.text.SbvTextParser",FT),FT.prototype.parseMedia=FT.prototype.parseMedia,FT.prototype.setManifestType=FT.prototype.setManifestType,FT.prototype.setSequenceMode=FT.prototype.setSequenceMode,FT.prototype.parseInit=FT.prototype.parseInit,gr("text/x-subviewer",function(){return new FT}),zT.prototype.parseInit=function(){},zT.prototype.setSequenceMode=function(){},zT.prototype.setManifestType=function(){},zT.prototype.parseMedia=function(e,t,n){return e=Ue(We(e=VT(e=He(e)))),this.g.parseMedia(e,t,n,[])},H("shaka.text.SrtTextParser",zT),zT.srt2webvtt=VT,zT.prototype.parseMedia=zT.prototype.parseMedia,zT.prototype.setManifestType=zT.prototype.setManifestType,zT.prototype.setSequenceMode=zT.prototype.setSequenceMode,zT.prototype.parseInit=zT.prototype.parseInit,gr("text/srt",function(){return new zT}),HT.prototype.parseInit=function(){},HT.prototype.setSequenceMode=function(){},HT.prototype.setManifestType=function(){},HT.prototype.parseMedia=function(e){var t="",n="",r=null,o=null;for(o=(e=m(o=He(e).split(/\r?\n\s*\r?\n/))).next();!o.done;o=e.next()){var i=o.value;o=i,(i=KT.exec(i))&&(r=i[1],o=i[2]),"V4 Styles"==r||"V4+ Styles"==r?(t=o,t=n?t+"\n"+o:o):"Events"==r&&(n=n?n+"\n"+o:o)}for(r=[],o=null,e=(t=m(t.split(/\r?\n/))).next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(i=XT.exec(e)))if(e=i[1].trim(),i=i[2].trim(),"Format"==e)o=i.split($T);else if("Style"==e){e=i.split($T),i={};for(var a=0;a<o.length&&a<e.length;a++)i[o[a]]=e[a];r.push(i)}for(o=[],t=null,i=(n=m(n.split(/\r?\n/))).next(),e={};!i.done;e={Vi:void 0},i=n.next())if(i=i.value,!/^\s*;/.test(i)&&(a=XT.exec(i)))if(i=a[1].trim(),a=a[2].trim(),"Format"==i)t=a.split($T);else if("Dialogue"==i){a=a.split($T),i={};for(var s=0;s<t.length&&s<a.length;s++)i[t[s]]=a[s];a=new Tn(s=WT(i.Start),WT(i.End),a.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.Vi=i.Style,(e=r.find(function(e){return function(t){return t.Name==e.Vi}}(e)))&&GT(a,e),o.push(a)}return o},H("shaka.text.SsaTextParser",HT),HT.prototype.parseMedia=HT.prototype.parseMedia,HT.prototype.setManifestType=HT.prototype.setManifestType,HT.prototype.setSequenceMode=HT.prototype.setSequenceMode,HT.prototype.parseInit=HT.prototype.parseInit;var KT=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,XT=/^\s*([^:]+):\s*(.*)/,$T=/\s*,\s*/,YT=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function JT(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)>0?{Zd:n,ra:e}:null}function QT(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(60&e[t+2])>>>2;if(r>n.length-1)return null;var o=((192&e[t+2])>>>6)+1,i=(1&e[t+2])<<2;return i|=(192&e[t+3])>>>6,{sampleRate:n[r],channelCount:i,codec:"mp4a.40."+o}}function ZT(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var r=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(r<=n)&&((t+=r)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function ek(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function tk(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(n>=3)return null;var r=63&e[t+4],o=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+o>e.length)return null;var i=e[t+6]>>5,a=0;2===i?a+=2:(1&i&&1!==i&&(a+=2),4&i&&(a+=2)),a=(e[t+6]<<8|e[t+7])>>12-a&1;var s=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(3&s)<<6|i<<3|a<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][i]+a,Ha:e,ra:o}}function nk(e,t){if(11===e[t]&&119===e[t+1]){var n,r,o=0,i=5;for(t+=i;i>0;){r=e[t];var a=Math.min(i,8),s=8-a;n=(r&(n=4278190080>>>24+s<<s))>>s,o=o?o<<a|n:n,t+=1,i-=a}if(o<16)return!0}return!1}function rk(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function ok(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]))return null;var n=new hs(e.subarray(t+2));gs(n,2),gs(n,3);var r=ys(n,11)+1<<1,o=ys(n,2);if(3==o){o=[24e3,22060,16e3][o=ys(n,2)];var i=3}else o=[48e3,44100,32e3][o],i=ys(n,2);var a=ys(n,3),s=ys(n,1);return n=ys(n,5),t+r>e.byteLength?null:(e=Math.floor(r*o/(16*[1,2,3,6][i])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,o<<6|n<<1,a<<1|s,0]),{sampleRate:o,channelCount:[2,1,2,3,3,4,4,5][a]+s,Ha:e,ra:r})}function ik(e){this.j=e,this.h=0,this.g=new Map,this.i=null}gr("text/x-ssa",function(){return new HT}),(o=ek.prototype).destroy=function(){this.g.clear()},o.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&vt(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(fr(t)||"mp4a.40.2")+'"':t},o.getOriginalMimeType=function(){return this.j},o.transmux=function(e,t,n,r){for(var o=Ue(e),i=ds(o),a=i.length;a<o.length&&!ZT(o,a);a++);if(e=1e3*n.endTime,(i=fs(i)).length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=i.data),!(i=QT(o,a)))return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=i.sampleRate,t.channelsCount=i.channelCount;for(var s=[];a<o.length;){var l=JT(o,a);if(!l)return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null));var u=l.Zd+l.ra;a+u<=o.length&&s.push({data:o.subarray(a+l.Zd,a+u),size:l.ra,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),a+=u}return o=i.sampleRate,e=Math.floor(e*o/1e3),r=new fa([r={id:t.id,type:"audio",codecs:i.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:o,duration:r,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:s},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=da(r),this.g.set(n,t)),n=this.i!==t,r=ba(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},H("shaka.transmuxer.AacTransmuxer",ek),ek.prototype.transmux=ek.prototype.transmux,ek.prototype.getOriginalMimeType=ek.prototype.getOriginalMimeType,ek.prototype.convertCodecs=ek.prototype.convertCodecs,ek.prototype.isSupported=ek.prototype.isSupported,ek.prototype.destroy=ek.prototype.destroy,Yn("audio/aac",function(){return new ek("audio/aac")},Zn),(o=rk.prototype).destroy=function(){this.g.clear()},o.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&vt(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?le().le()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},o.getOriginalMimeType=function(){return this.j},o.transmux=function(e,t,n,r){for(var o=ds(e=Ue(e)),i=o.length;i<e.length&&!nk(e,i);i++);var a=1e3*n.endTime;(o=fs(o)).length&&n&&(o=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=o.data),o=0;for(var s=new Uint8Array([]),l=[];i<e.length;){var u=tk(e,i);if(!u)return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,o=u.sampleRate,s=u.Ha,l.push({data:e.subarray(i,i+u.ra),size:u.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),i+=u.ra}return e=Math.floor(a*o/1e3),r=new fa([r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:o,duration:r,Cb:[],Ha:s,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:l},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=da(r),this.g.set(n,t)),n=this.i!==t,r=ba(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},H("shaka.transmuxer.Ac3Transmuxer",rk),rk.prototype.transmux=rk.prototype.transmux,rk.prototype.getOriginalMimeType=rk.prototype.getOriginalMimeType,rk.prototype.convertCodecs=rk.prototype.convertCodecs,rk.prototype.isSupported=rk.prototype.isSupported,rk.prototype.destroy=rk.prototype.destroy,Yn("audio/ac3",function(){return new rk("audio/ac3")},Zn),(o=ik.prototype).destroy=function(){this.g.clear()},o.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&vt(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},o.getOriginalMimeType=function(){return this.j},o.transmux=function(e,t,n,r){for(var o=ds(e=Ue(e)),i=o.length;i<e.length&&2935!=(e[i]<<8|e[i+1]);i++);var a=1e3*n.endTime;(o=fs(o)).length&&n&&(o=o.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=o.data),o=0;for(var s=new Uint8Array([]),l=[];i<e.length;){var u=ok(e,i);if(!u)return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,o=u.sampleRate,s=u.Ha,l.push({data:e.subarray(i,i+u.ra),size:u.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),i+=u.ra}return e=Math.floor(a*o/1e3),r=new fa([r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:o,duration:r,Cb:[],Ha:s,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:l},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=da(r),this.g.set(n,t)),n=this.i!==t,r=ba(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},H("shaka.transmuxer.Ec3Transmuxer",ik),ik.prototype.transmux=ik.prototype.transmux,ik.prototype.getOriginalMimeType=ik.prototype.getOriginalMimeType,ik.prototype.convertCodecs=ik.prototype.convertCodecs,ik.prototype.isSupported=ik.prototype.isSupported,ik.prototype.destroy=ik.prototype.destroy,Yn("audio/ec3",function(){return new ik("audio/ec3")},Zn);var ak=[100,110,122,244,44,83,86,118,128,138,139,134];function sk(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),r=e.find(function(e){return 34==e.type});if(!t||!n||!r)return null;var o=function(e){var t=new hs(e,!0);return Ts(t),Ts(t),ys(t,4),ys(t,2),ys(t,6),e=ys(t,3),t=Ss(t),{Ug:e+1,Bh:t}}(t.fullData);e=function(e){Ts(e=new hs(e,!0)),Ts(e);var t=0,n=0,r=0,o=0;ys(e,4);var i=ys(e,3);Ss(e);for(var a=ys(e,2),s=ys(e,1),l=ys(e,5),u=Ts(e),c=Ts(e),f=Ts(e),d=Ts(e),p=Ts(e),h=Ts(e),m=Ts(e),g=Ts(e),y=Ts(e),v=Ts(e),b=Ts(e),x=[],w=[],S=0;S<i;S++)x.push(Ss(e)),w.push(Ss(e));if(i>0)for(S=i;S<8;S++)ys(e,2);for(S=0;S<i;S++)x[S]&&ys(e,88),w[S]&&Ts(e);xs(e),3==(x=xs(e))&&ys(e,1),w=xs(e),S=xs(e),Ss(e)&&(t+=xs(e),n+=xs(e),r+=xs(e),o+=xs(e));var T=xs(e),k=xs(e),C=xs(e);if(Ss(e))for(var A=0;A<=i;A++)xs(e),xs(e),xs(e);else xs(e),xs(e),xs(e);if(xs(e),xs(e),xs(e),xs(e),xs(e),xs(e),Ss(e)&&Ss(e))for(A=0;A<4;A++)for(var E=0;E<(3===A?2:6);E++)if(Ss(e)){var I=Math.min(64,1<<4+(A<<1));A>1&&ws(e);for(var M=0;M<I;M++)ws(e)}else xs(e);for(Ss(e),Ss(e),Ss(e)&&(Ts(e),xs(e),xs(e),Ss(e)),A=xs(e),I=E=0;I<A;I++)if(M=!1,0!==I&&(M=Ss(e)),M){I===A&&xs(e),Ss(e),xs(e);for(var R=M=0;R<=E;R++){var _=Ss(e),L=!1;_||(L=Ss(e)),(_||L)&&M++}E=M}else{for(E=(R=xs(e))+(M=xs(e)),_=0;_<R;_++)xs(e),Ss(e);for(R=0;R<M;R++)xs(e),Ss(e)}if(Ss(e))for(A=xs(e),E=0;E<A;E++){for(I=0;I<C+4;I++)ys(e,1);ys(e,1)}if(A=C=1,E=!0,I=1,R=M=0,Ss(e),Ss(e),Ss(e)){if(Ss(e)){L=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var P=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];(_=Ts(e))>0&&_<=16?(C=L[_-1],A=P[_-1]):255===_&&(C=ys(e,16),A=ys(e,16))}if(Ss(e)&&Ss(e),Ss(e)&&(ys(e,3),Ss(e),Ss(e)&&(Ts(e),Ts(e),Ts(e))),Ss(e)&&(xs(e),xs(e)),Ss(e),Ss(e),Ss(e),(_=Ss(e))&&(bs(e),bs(e),bs(e),bs(e)),Ss(e)&&(I=ys(e,32),M=ys(e,32),Ss(e)&&xs(e),Ss(e))){P=!1,_=Ss(e),L=Ss(e),(_||L)&&((P=Ss(e))&&(Ts(e),ys(e,5),Ss(e),ys(e,5)),ys(e,4),ys(e,4),P&&ys(e,4),ys(e,5),ys(e,5),ys(e,5));for(var D=0;D<=i;D++){var O=!0,N=1;(E=Ss(e))||(O=Ss(e));var U=!1;if(O?xs(e):U=Ss(e),U||(N=xs(e)+1),_){for(O=0;O<N;O++)xs(e),xs(e),P&&(xs(e),xs(e));Ss(e)}if(L){for(O=0;O<N;O++)xs(e),xs(e),P&&(xs(e),xs(e));Ss(e)}}}Ss(e)&&(Ss(e),Ss(e),Ss(e),R=xs(e),xs(e),xs(e),xs(e),xs(e))}return{yg:b,Eg:a,Fg:s,Dg:l,zg:u,Ag:c,Bg:f,Cg:d,rg:p,sg:h,ug:m,vg:g,wg:y,xg:v,nf:R,gg:x,fg:T,eg:k,width:w-(t+n)*(1===x||2===x?2:1),height:S-(r+o)*(1===x?2:1),Sk:C,Rk:A,qg:M/I,pg:E}}(n.fullData);var i=function(e){var t=new hs(e,!0);Ts(t),Ts(t),xs(t),xs(t),Ss(t),Ss(t),ys(t,3),Ss(t),Ss(t),xs(t),xs(t),ws(t),Ss(t),Ss(t),Ss(t)&&xs(t),ws(t),ws(t),Ss(t),Ss(t),Ss(t),Ss(t),e=Ss(t),t=Ss(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Wg:n}}(r.fullData);return t=function(e,t,n,r){var o=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(o[0]=1,o[1]=(3&r.Eg)<<6|(r.Fg?1:0)<<5|31&r.Dg,o[2]=r.zg,o[3]=r.Ag,o[4]=r.Bg,o[5]=r.Cg,o[6]=r.rg,o[7]=r.sg,o[8]=r.ug,o[9]=r.vg,o[10]=r.wg,o[11]=r.xg,o[12]=r.yg,o[13]=240|(3840&r.nf)>>8,o[14]=255&r.nf,o[15]=252|3&r.Wg,o[16]=252|3&r.gg,o[17]=248|7&r.fg,o[18]=248|7&r.eg,o[19]=0,o[20]=parseInt(r.qg,10),o[21]=(3&(r.pg?1:0))<<6|(7&r.Ug)<<3|(r.Bh?1:0)<<2|3,o[22]=3,e=[e,t,n],t=23,n=e.length-1,r=0;r<e.length;r+=1)o.set(new Uint8Array([32+r|(r===n?128:0),0,1]),t),t+=3,o.set(new Uint8Array([e[r].byteLength>>8,255&e[r].byteLength]),t),t+=2,o.set(e[r],t),t+=e[r].byteLength;return o}(t.fullData,n.fullData,r.fullData,{Ug:o.Ug,Bh:o.Bh,Eg:e.Eg,Fg:e.Fg,yg:e.yg,Dg:e.Dg,zg:e.zg,Ag:e.Ag,Bg:e.Bg,Cg:e.Cg,rg:e.rg,sg:e.sg,ug:e.ug,vg:e.vg,wg:e.wg,xg:e.xg,nf:e.nf,gg:e.gg,fg:e.fg,eg:e.eg,Wg:i.Wg,qg:e.qg,pg:e.pg}),{height:e.height,width:e.width,Ra:t,Za:e.Sk,$a:e.Rk}}function lk(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,o=e[t+2]>>4&15,i=e[t+2]>>2&3;if(1!==n&&0!==o&&15!==o&&3!==i){var a=e[t+3]>>6;o=1e3*fk[14*(3===n?3-r:3===r?3:4)+o-1],i=dk[3*(3===n?0:2===n?1:2)+i],n=pk[n][r];var s=hk[r],l=Math.floor(n*o/i+(e[t+2]>>1&1))*s,u=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(u=u?parseInt(u[1],10):0)&&u<=87&&2===r&&o>=224e3&&0===a&&(e[t+3]|=128),{sampleRate:i,channelCount:3===a?1:2,ra:l,Qk:8*n*s}}return null}function uk(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function ck(e,t){if(t+1<e.length&&uk(e,t)){var n=lk(e,t),r=4;return n&&n.ra&&(r=n.ra),(t+=r)===e.length||t+1<e.length&&uk(e,t)}return!1}var fk=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],dk=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],pk=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],hk=[0,1,1,4];function mk(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function gk(e){this.h=e,this.g=null}
/*
      		 @license
      		 MSS Transmuxer
      		 Copyright 2015 Dash Industry Forum
      		 SPDX-License-Identifier: BSD-3-Clause
      		*/
function yk(e){this.h=e,(this.g=qy.get("ISOBoxer")())&&function(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;n<16;n++)this.usertype[n]!==bk[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}(this)}function vk(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}(o=mk.prototype).destroy=function(){this.g.clear()},o.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&vt(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},o.getOriginalMimeType=function(){return this.j},o.transmux=function(e,t,n,r){for(var o=Ue(e),i=ds(o).length;i<o.length&&!ck(o,i);i++);var a;for(e=[];i<o.length;){var s=lk(o,i);if(!s)return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null));a||(a=s),i+s.ra<=o.length&&e.push({data:o.subarray(i,i+s.ra),size:s.ra,duration:1152,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),i+=s.ra}return a?(o=9e4*a.Qk/a.sampleRate*this.h,r=new fa([r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:a.sampleRate,duration:r,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:o,Bb:e},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=da(r),this.g.set(n,t)),n=this.i!==t,r=ba(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})):Promise.reject(new ze(2,3,3018,n?n.P()[0]:null))},H("shaka.transmuxer.Mp3Transmuxer",mk),mk.prototype.transmux=mk.prototype.transmux,mk.prototype.getOriginalMimeType=mk.prototype.getOriginalMimeType,mk.prototype.convertCodecs=mk.prototype.convertCodecs,mk.prototype.isSupported=mk.prototype.isSupported,mk.prototype.destroy=mk.prototype.destroy,Yn("audio/mpeg",function(){return new mk("audio/mpeg")},Zn),(o=gk.prototype).destroy=function(){},o.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=fr(e).split(","),n=lt("audio",t);return t=lt("video",t),!(!n||t||"mp3"!=lr(n))&&vt(this.convertCodecs("audio",e))},o.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},o.getOriginalMimeType=function(){return this.h},o.transmux=function(e,t,n,r,o){if(this.g?this.g.clearData():this.g=new As,this.g.Gf(n.i),e=Ue(e),"mp3"!=(e=this.g.parse(e)).Td().audio||"audio"!=o)return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),o=m(e.xb()),e=o.next();!e.done;e=o.next())if(e=e.value.data)for(t=0;t<e.length;)(r=lk(e,t))?(t+r.ra<=e.length&&(n=rt(n,e.subarray(t,t+r.ra))),t+=r.ra):t++;return Promise.resolve(n)},H("shaka.transmuxer.MpegTsTransmuxer",gk),gk.prototype.transmux=gk.prototype.transmux,gk.prototype.getOriginalMimeType=gk.prototype.getOriginalMimeType,gk.prototype.convertCodecs=gk.prototype.convertCodecs,gk.prototype.isSupported=gk.prototype.isSupported,gk.prototype.destroy=gk.prototype.destroy,Yn("video/mp2t",function(){return new gk("video/mp2t")},er),(o=yk.prototype).destroy=function(){},o.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?vt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),vt(t)||vt(e)))},o.convertCodecs=function(e,t){return t.replace("mss/","")},o.getOriginalMimeType=function(){return this.h},o.transmux=function(e,t,n){if(!n)return Promise.resolve(Ue(e));if(!t.mssPrivateData)return Promise.reject(new ze(2,3,3020,n?n.P()[0]:null));try{var r,o=this.g.parseBuffer(e),i=o.fetch("tfhd");i.track_ID=t.id+1;var a=o.fetch("tfdt"),s=o.fetch("traf");null===a&&((a=this.g.createFullBox("tfdt",s,i)).version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var l=o.fetch("trun"),u=o.fetch("tfxd");u&&u._parent.boxes.splice(u._parent.boxes.indexOf(u),1);var c=o.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var f=o.fetch("sepiff");if(null!==f){f.type="senc",f.usertype=void 0;var d=o.fetch("saio");if(null===d){(d=this.g.createFullBox("saio",s)).version=0,d.flags=0,d.entry_count=1,d.offset=[0];var p=this.g.createFullBox("saiz",s);if(p.version=0,p.flags=0,p.sample_count=f.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],2&f.flags)for(r=0;r<f.sample_count;r+=1)p.sample_info_size[r]=10+6*f.entry[r].NumberOfEntries;else p.default_sample_info_size=8}}i.flags&=16777214,i.flags|=131072,l.flags|=1;var h=o.fetch("moof");l.data_offset=h.getLength()+8;var m=o.fetch("saio");null!==m&&(m.offset[0]=vk(h,"traf")+vk(s,"senc")+16);var g=Ue(o.write());return Promise.resolve(g)}catch(y){return y instanceof ze?Promise.reject(y):Promise.reject(new ze(2,3,3022,n?n.P()[0]:null))}},H("shaka.transmuxer.MssTransmuxer",yk),yk.prototype.transmux=yk.prototype.transmux,yk.prototype.getOriginalMimeType=yk.prototype.getOriginalMimeType,yk.prototype.convertCodecs=yk.prototype.convertCodecs,yk.prototype.isSupported=yk.prototype.isSupported,yk.prototype.destroy=yk.prototype.destroy;var bk=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function xk(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}Yn("mss/audio/mp4",function(){return new yk("mss/audio/mp4")},Zn),Yn("mss/video/mp4",function(){return new yk("mss/video/mp4")},Zn),(o=xk.prototype).destroy=function(){this.j.clear(),this.i&&this.i.destroy()},o.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=fr(n).split(",");return n=lt("audio",r),r=lt("video",r),!(n&&(n=lr(n),!wk.includes(n))||r&&(n=lr(r),!Sk.includes(n)))&&(t?vt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),vt(t)||vt(e)))},o.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=fr(t).replace("mp4a.40.34","mp3").split(",").map(function(e){return Kr(e,"audio/mp4")}).map(Xr).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},o.getOriginalMimeType=function(){return this.m},o.transmux=function(e,t,n,r,o){var i=Ue(e);if("audio"==o&&!Rs(i)){for(var a=ds(i),s=a.length;s<i.length;s++)if(ck(i,s))return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null));for(s=a.length;s<i.length;s++)if(ZT(i,s))return this.i||(this.i=new ek("audio/aac")),this.i.transmux(e,t,n,r,o);return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new As,this.h.Gf(n.i);var l=this.h.parse(i),u=[],c=l.Td();try{var f=null;if("video"==o){switch(c.video){case"avc":var d=[],p=null,h=l.ud(),y=function(e){function t(e){o={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:e.pts,dts:e.dts,nalus:[]}}function n(){if(o&&o.nalus.length&&o.frame){for(var e=[],t=m(o.nalus),n=t.next();!n.done;n=t.next()){var i=(n=n.value).fullData.byteLength,a=new Uint8Array(4);a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=255&i,e.push(a),e.push(n.fullData)}o.data=rt.apply(Je,g(e)),r.push(o)}}for(var r=[],o=null,i=!1,a=0;a<e.length;a++){var s=e[a],l=s.nalus,u=!1;o&&l.length&&!i&&(n(),t(s));for(var c=(l=m(s.nalus)).next();!c.done;c=l.next()){var f=!1;switch((c=c.value).type){case 1:var d=!1;f=!0;var p=c.data;u&&p.length>4&&(2===(p=Cs(new hs(p)))||4===p||7===p||9===p)&&(d=!0),d&&o&&o.frame&&!o.isKeyframe&&(n(),o=null),o||t(s),o.frame=!0,o.isKeyframe=d;break;case 5:f=!0,o&&o.frame&&!o.isKeyframe&&(n(),o=null),o||t(s),o.frame=!0,o.isKeyframe=!0;break;case 6:case 8:case 12:f=!0;break;case 7:u=f=!0;break;case 9:i=f=!0,o&&o.frame&&(n(),o=null),o||t(s);break;default:f=!1}o&&f&&o.nalus.push(c)}}return n(),r}(h);if(!y.length)throw new ze(2,3,3023,n?n.P()[0]:null);for(var v=0;v<y.length;v++){var b,x=y[v];null==p&&(p=x.dts),b=v+1<y.length?(y[v+1].dts||0)-(x.dts||0):y.length>1?(x.dts||0)-(y[v-1].dts||0):9e4*(n.endTime-n.startTime),d.push({data:x.data,size:x.data.byteLength,duration:b,wb:Math.round((x.pts||0)-(x.dts||0)),flags:{zb:0,mb:0,jb:0,gb:0,hb:x.isKeyframe?2:1,Ab:x.isKeyframe?0:1}})}for(var w=[],S=m(h),T=S.next();!T.done;T=S.next())w.push.apply(w,g(T.value.nalus));var k=function(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new hs(t.data),r=Ts(n);if(Ts(n),Ts(n),bs(n),ak.includes(r)&&(3===(r=xs(n))&&gs(n,1),bs(n),bs(n),gs(n,1),Ss(n))){r=3!==r?8:12;for(var o=0;o<r;o++)Ss(n)&&ks(n,o<6?16:64)}if(bs(n),0===(r=xs(n)))xs(n);else if(1===r)for(gs(n,1),bs(n),bs(n),r=xs(n),o=0;o<r;o++)bs(n);bs(n),gs(n,1);var i=xs(n),a=xs(n),s=ys(n,1);0===s&&gs(n,1),gs(n,1);var l=0,u=0,c=0,f=0;if(Ss(n)&&(l=xs(n),u=xs(n),c=xs(n),f=xs(n)),o=r=1,Ss(n)&&Ss(n)){var d=Ts(n);d>0&&d<=16?(r=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][d-1],o=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][d-1]):255===d&&(r=ys(n,16),o=ys(n,16))}return n=(2-s)*(a+1)*16-2*c-2*f,i=16*(i+1)-2*l-2*u,l=[],t=t.fullData,l.push(t.byteLength>>>8&255),l.push(255&t.byteLength),l=l.concat.apply(l,g(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,g(e)),{height:n,width:i,Ra:e=new Uint8Array([1,l[3],l[4],l[5],255,225].concat(l,[1],t)),Za:r,$a:o}}(w);if(!k||null==p)throw new ze(2,3,3018,n?n.P()[0]:null);t.height=k.height,t.width=k.width,f={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:r,Cb:[],Ha:new Uint8Array([]),Ra:k.Ra,Za:k.Za,$a:k.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:p,Bb:d},stream:t};break;case"hvc":var C=[],A=null,E=[],I=l.ud();if(!I.length)throw new ze(2,3,3023,n?n.P()[0]:null);for(var M=0;M<I.length;M++){var R=I[M],_=R.nalus;E.push.apply(E,g(_));for(var L=!1,P=[],D=!1,O=m(_),N=O.next();!N.done;N=O.next()){var U=N.value;switch(U.type){case 1:case 0:var B=D=!0;break;case 19:case 20:case 21:L=B=D=!0;break;case 32:case 33:case 34:case 39:case 40:B=!0;break;case 35:D=B=!0;break;default:B=!1}if(D&&B){var j=U.fullData.byteLength,F=new Uint8Array(4);F[0]=j>>24&255,F[1]=j>>16&255,F[2]=j>>8&255,F[3]=255&j,P.push(F),P.push(U.fullData)}}var z,V=P.length?{data:rt.apply(Je,g(P)),isKeyframe:L}:null;if(V)null==A&&null!=R.dts&&(A=R.dts),z=M+1<I.length?(I[M+1].dts||0)-(R.dts||0):I.length>1?(R.dts||0)-(I[M-1].dts||0):9e4*(n.endTime-n.startTime),C.push({data:V.data,size:V.data.byteLength,duration:z,wb:Math.round((R.pts||0)-(R.dts||0)),flags:{zb:0,mb:0,jb:0,gb:0,hb:V.isKeyframe?2:1,Ab:V.isKeyframe?0:1}})}var H=sk(E);if(!H||null==A)throw new ze(2,3,3018,n?n.P()[0]:null);t.height=H.height,t.width=H.width,f={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:r,Cb:[],Ha:new Uint8Array([]),Ra:H.Ra,Za:H.Za,$a:H.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:A,Bb:C},stream:t}}f&&(u.push(f),f=null)}if("audio"==o){switch(c.audio){case"aac":for(var G,q=[],W=null,K=null,X=null,$=m(l.xb()),Y=$.next();!Y.done;Y=$.next()){var J=Y.value,Q=J.data;if(Q){var Z=0;if(-1==K&&X)Q=rt(X,J.data),K=null;else if(null!=K&&X){Z=Math.max(0,K);var ee=rt(X,Q.subarray(0,Z));q.push({data:ee,size:ee.byteLength,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),K=X=null}if(!(G=QT(Q,Z)))throw new ze(2,3,3018,n?n.P()[0]:null);for(t.audioSamplingRate=G.sampleRate,t.channelsCount=G.channelCount,null==W&&null!==J.pts&&(W=J.pts);Z<Q.length;){var te=JT(Q,Z);if(!te){X=Q.subarray(Z,Q.length),K=-1;break}var ne=te.Zd+te.ra;0!=(K=Math.max(0,Z+ne-Q.length))?X=Q.subarray(Z+te.Zd,Z+ne):Z+ne<=Q.length&&q.push({data:Q.subarray(Z+te.Zd,Z+ne),size:te.ra,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),Z+=ne}}}if(!G||null==W){W=9e4*n.startTime;var re=lt("audio",t.codecs.split(","));if(!re||!t.channelsCount||!t.audioSamplingRate)throw new ze(2,3,3018,n?n.P()[0]:null);G={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:re};var oe=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(re,t.channelsCount);if(!oe)throw new ze(2,3,3018,n?n.P()[0]:null);for(var ie=W+9e4*(n.endTime-n.startTime),ae=W;ae<ie;)q.push({data:oe,size:oe.byteLength,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),ae+=1024/G.sampleRate*9e4}var se=G.sampleRate,le=W/9e4*se;f={id:t.id,type:"audio",codecs:G.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:se,duration:r,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:le,Bb:q},stream:t};break;case"ac3":for(var ue=[],ce=0,fe=new Uint8Array([]),de=null,pe=m(l.xb()),he=pe.next();!he.done;he=pe.next()){var me=he.value,ge=me.data;null==de&&null!==me.pts&&(de=me.pts);for(var ye=0;ye<ge.length;){var ve=tk(ge,ye);ve?(t.audioSamplingRate=ve.sampleRate,t.channelsCount=ve.channelCount,ce=ve.sampleRate,fe=ve.Ha,ue.push({data:ge.subarray(ye,ye+ve.ra),size:ve.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),ye+=ve.ra):ye++}}if(0==ce||0==fe.byteLength||null==de)throw new ze(2,3,3018,n?n.P()[0]:null);var be=de/9e4*ce;f={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:ce,duration:r,Cb:[],Ha:fe,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:be,Bb:ue},stream:t};break;case"ec3":for(var xe=[],we=0,Se=new Uint8Array([]),Te=null,ke=m(l.xb()),Ce=ke.next();!Ce.done;Ce=ke.next()){var Ae=Ce.value,Ee=Ae.data;null==Te&&null!==Ae.pts&&(Te=Ae.pts);for(var Ie=0;Ie<Ee.length;){var Me=ok(Ee,Ie);Me?(t.audioSamplingRate=Me.sampleRate,t.channelsCount=Me.channelCount,we=Me.sampleRate,Se=Me.Ha,xe.push({data:Ee.subarray(Ie,Ie+Me.ra),size:Me.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),Ie+=Me.ra):Ie++}}if(0==we||0==Se.byteLength||null==Te)throw new ze(2,3,3018,n?n.P()[0]:null);var Re=Te/9e4*we;f={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:we,duration:r,Cb:[],Ha:Se,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Re,Bb:xe},stream:t};break;case"mp3":for(var _e,Le=[],Pe=null,De=m(l.xb()),Oe=De.next();!Oe.done;Oe=De.next()){var Ne=Oe.value,Be=Ne.data;if(Be){null==Pe&&null!==Ne.pts&&(Pe=Ne.pts);for(var je=0;je<Be.length;){var Fe=lk(Be,je);Fe?(_e||(_e=Fe),je+Fe.ra<=Be.length&&Le.push({data:Be.subarray(je,je+Fe.ra),size:Fe.ra,duration:1152,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),je+=Fe.ra):je++}}}if(!_e||null==Pe)throw new ze(2,3,3018,n?n.P()[0]:null);var Ve=_e.sampleRate,He=Pe/9e4*Ve;f={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Ve,duration:r,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:He,Bb:Le},stream:t};break;case"opus":var Ge=[],qe=null,We=l.H;if(!We)throw new ze(2,3,3018,n?n.P()[0]:null);var Ke=[];switch(We.oj){case 1:case 2:Ke=[0];break;case 0:Ke=[255,1,1,0,1];break;case 128:Ke=[255,2,0,0,1];break;case 3:Ke=[1,2,1,0,2,1];break;case 4:Ke=[1,2,2,0,1,2,3];break;case 5:Ke=[1,3,2,0,4,1,2,3];break;case 6:Ke=[1,4,2,0,4,1,2,3,5];break;case 7:Ke=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ke=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ke=[1,1,2,0,1];break;case 131:Ke=[1,1,3,0,1,2];break;case 132:Ke=[1,1,4,0,1,2,3];break;case 133:Ke=[1,1,5,0,1,2,3,4];break;case 134:Ke=[1,1,6,0,1,2,3,4,5];break;case 135:Ke=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ke=[1,1,8,0,1,2,3,4,5,6,7]}for(var Xe=new Uint8Array([0,We.channelCount,0,0,We.sampleRate>>>24&255,We.sampleRate>>>17&255,We.sampleRate>>>8&255,We.sampleRate>>>0&255,0,0].concat(g(Ke))),$e=We.sampleRate,Ye=m(l.xb()),Qe=Ye.next();!Qe.done;Qe=Ye.next()){var Ze=Qe.value,et=Ze.data;null==qe&&null!==Ze.pts&&(qe=Ze.pts);for(var tt=0;tt<et.length;){for(var nt=!!(16&et[tt+1]),ot=!!(8&et[tt+1]),it=tt+2,at=0;255===et[it];)at+=255,it+=1;at+=et[it],it+=1,it+=nt?2:0,it+=ot?2:0;var st=et.slice(it,it+at);Ge.push({data:st,size:st.byteLength,duration:960,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),tt=it+at}}if(0==Xe.byteLength||null==qe)throw new ze(2,3,3018,n?n.P()[0]:null);t.audioSamplingRate=We.sampleRate,t.channelsCount=We.channelCount;var ut=qe/9e4*$e;f={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:$e,duration:r,Cb:[],Ha:Xe,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:ut,Bb:Ge},stream:t}}f&&(u.push(f),f=null)}}catch(mt){return mt&&3023==mt.code?Promise.resolve(new Uint8Array([])):Promise.reject(mt)}if(!u.length)return Promise.reject(new ze(2,3,3018,n?n.P()[0]:null));var ct=new fa(u),ft=t.id+"_"+n.i;if(this.j.has(ft))var dt=this.j.get(ft);else dt=da(ct),this.j.set(ft,dt);var pt=this.l!==dt,ht=ba(ct);return this.l=dt,this.g++,Promise.resolve({data:ht,init:pt?dt:null})},H("shaka.transmuxer.TsTransmuxer",xk),xk.prototype.transmux=xk.prototype.transmux,xk.prototype.getOriginalMimeType=xk.prototype.getOriginalMimeType,xk.prototype.convertCodecs=xk.prototype.convertCodecs,xk.prototype.isSupported=xk.prototype.isSupported,xk.prototype.destroy=xk.prototype.destroy;var wk=["aac","ac-3","ec-3","mp3","opus"],Sk=["avc","hevc"];function Tk(){}Yn("video/mp2t",function(){return new xk("video/mp2t")},tr),p(Tk,Vu),H("shaka.util.FairPlayUtils",Tk)}.call(n,t,t,void 0),n.shaka)e[r]=n.shaka[r]}()}(Oi)),Oi),Hi=Pi(Vi),Gi={playingState:!1},qi=function(){var e=i(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:if(Hi.polyfill.installAll(),Ui=t){e.n=2;break}return(Ui=document.createElement("video")).style.cssText="position: absolute; top: 0; left: 0; z-index: -1",Ui.width=window.innerWidth,Ui.height=window.innerHeight,Ni=new Hi.Player,e.n=1,Ni.attach(Ui);case 1:Ui.autoplay=!1,Ni.addEventListener("error",function(e){console.error(e)}),document.body.insertBefore(Ui,document.body.firstChild);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Wi=function(){var e=i(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:if(Ni&&Ui){e.n=1;break}throw"Player not initialized yet";case 1:return e.n=2,Ni.load(t.streamUrl);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ki=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ni.destroy();case 1:Ni=null,Ui.remove(),Ui=null;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Xi={init:qi,load:Wi,play:function(){Ui.play().then(function(){Gi.playingState=!0})},pause:function(){Ui.pause(),Gi.playingState=!1},getCurrentTime:function(){return Ui.currentTime},getVideoDuration:function(){return Ui.duration},getTimeFormat:function(){var e=function(e){return new Date(1e3*e).toISOString().substr(14,5)};return"".concat(e(Ui.currentTime)," : ").concat(e(Math.floor(Ui.duration)))},state:Gi,destroy:Ki},$i=Wo.Component("Player",{code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].y=1080,f[1].mount="{y:1}",f[1].w=1920,f[1].h=150,f[1].color={top:"0x00000000",bottom:"0x444444ff"},f[1].alpha={transition:t.controlsVisibility},c[1].populate(f[1]),!0===h&&(m-=1),e=c[1],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),f[2].x=60,f[2].y=50,c[2].populate(f[2]),!0===h&&(m-=1),e=c[2],f[3]={},c[3]=this.element({parent:e||"root"},!0===h?u:t),f[3].w=60,f[3].h=60,f[3].color="0x0087ceeb",f[3].effects=[{type:"radius",props:{radius:16}}],c[3].populate(f[3]),!0===h&&(m-=1),e=c[3],f[4]={},c[4]=this.element({parent:e||"root"},!0===h?u:t),f[4].y=14,f[4].x=14,f[4].w=32,f[4].h=32,f[4].src=t.playing?"assets/player/pause.png":"assets/player/play.png",c[4].populate(f[4]),!0===h&&(m-=1),e=c[2],f[5]={},c[5]=this.element({parent:e||"root"},!0===h?u:t),f[5].y=22,f[5].x=100,f[5].w=t.progressLength,f[5].h=16,f[5].color="0xffffff80",f[5].effects=[{type:"radius",props:{radius:8}}],c[5].populate(f[5]),!0===h&&(m-=1),e=c[5],f[6]={},c[6]=this.element({parent:e||"root"},!0===h?u:t),f[6].h=16,f[6].w={transition:{value:t.progress,d:100,f:"ease-in-out"}},f[6].effects=[{type:"radius",props:{radius:8}}],f[6].color="0x0087ceeb",c[6].populate(f[6]),!0===h&&(m-=1),g[7]=n.components&&n.components.Circle||r.Circle,e=c[5],f[7]={},c[7]=this.element({parent:e||"root"},!0===h?u:t),f[7].size=28,f[7].color="0xffffffff",f[7].y="-6",f[7].x={transition:{value:t.progress-8,d:100,f:"ease-in-out"}},p[7]=[],void 0!==g[7])for(var y in g[7][Symbol.for("config")].props)delete f[7][g[7][Symbol.for("config")].props[y]],p[7].push(g[7][Symbol.for("config")].props[y]);if(c[7].populate(f[7]),!0===h&&(m-=1),e=c[7],d[8]={},d[8].size=28,d[8].color="0xffffffff",d[8].y="-6",l={transition:{value:t.progress-8,d:100,f:"ease-in-out"}},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[8].x=l,s=d[8].is||"Circle",r[8],"string"==typeof s){if(r[8]=n.components&&n.components[s]||r[s],!r[8])throw new Error('Component "Circle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[8]=s);return c[8]=r[8].call(null,{props:d[8]},c[7],t),c[8][Symbol.for("slots")][0]?(e=c[8][Symbol.for("slots")][0],u=c[8],h=!0):e=c[8][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[2],f[9]={},c[9]=this.element({parent:e||"root"},!0===h?u:t),f[9].x=1660,f[9].y=16,c[9].populate(f[9]),!0===h&&(m-=1),e=c[9],f[10]={},c[10]=this.element({parent:e||"root"},!0===h?u:t),f[10].content=t.currentTime,f[10].size=25,f[10].__textnode=!0,c[10].populate(f[10]),!0===h&&(m-=1),e=c[9],f[11]={},c[11]=this.element({parent:e||"root"},!0===h?u:t),f[11].x=70,f[11].size=25,f[11].content="/",f[11].__textnode=!0,c[11].populate(f[11]),!0===h&&(m-=1),e=c[9],f[12]={},c[12]=this.element({parent:e||"root"},!0===h?u:t),f[12].x=85,f[12].size=25,f[12].content=t.duration,f[12].__textnode=!0,c[12].populate(f[12]),!0===h&&(m-=1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[7]=null,d[8]=null,r[8]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(e,t,n,r,o,i){t[1].set("alpha",{transition:e.controlsVisibility})},function(e,t,n,r,o,i){t[3].set("effects",[{type:"radius",props:{radius:16}}])},function(e,t,n,r,o,i){t[4].set("src",e.playing?"assets/player/pause.png":"assets/player/play.png")},function(e,t,n,r,o,i){t[5].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[6].set("w",{transition:{value:e.progress,d:100,f:"ease-in-out"}})},function(e,t,n,r,o,i){t[6].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[7]&&-1!==skips[7].indexOf("x")||t[7].set("x",{transition:{value:e.progress-8,d:100,f:"ease-in-out"}})},function(e,t,n,r,o,i){t[8][Symbol.for("props")].x={transition:{value:e.progress-8,d:100,f:"ease-in-out"}}},function(e,t,n,r,o,i){t[10].set("content",e.currentTime)},function(e,t,n,r,o,i){t[12].set("content",e.duration)}],context:{}},state:function(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus:function(){this.$emit("clearBackground")},unfocus:function(){this.$emit("changeBackground")},init:function(){return i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Xi.init();case 1:return e.a(2)}},e)}))()},ready:function(){var e=this;return i(n().m(function t(){var r,o;return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Xi.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});case 1:r=function(e){return new Date(1e3*e).toISOString().substr(14,5)},(o=Xi.getVideoDuration())&&(e.duration=r(o),e.progressChunkSize=Math.round(e.progressLength/o*100)/100),e.$setInterval(function(){var t=Xi.getCurrentTime();e.currentTime=r(t),e.progress=Math.round(t*e.progressChunkSize)},1e3),e.play();case 2:return t.a(2)}},t)}))()},destroy:function(){return i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Xi.destroy();case 1:return e.a(2)}},e)}))()}},input:{space:function(){this.play()},up:function(){this.showControls(1)},down:function(){this.showControls(0)}},methods:{play:function(){var e=this;this.showControls(1),this.hideTimeout=this.$setTimeout(function(){return e.showControls(0)},3e3),1==Xi.state.playingState?(Xi.pause(),this.playing=!1):(console.log("play!"),Xi.play(),this.playing=!0)},showControls:function(e){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=e}}}),Yi=Wo.Component("Colors",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=1920,l[0].h=1080,l[0].color={transition:t.bg},s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].x=20,l[1].y=20,s[1].populate(l[1]),e=s[1],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=100,l[2].h=100,l[2].x=0,l[2].color="0xecfeffff",s[2].populate(l[2]),e=s[1],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=100,l[3].h=100,l[3].x=120,l[3].color="0xa5f3fcff",s[3].populate(l[3]),e=s[1],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].w=100,l[4].h=100,l[4].x=240,l[4].color="0x22d3eeff",s[4].populate(l[4]),e=s[1],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].w=100,l[5].h=100,l[5].x=360,l[5].color="0x0891b2ff",s[5].populate(l[5]),e=s[0],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].x=20,l[6].y=140,s[6].populate(l[6]),e=s[6],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].w=100,l[7].h=100,l[7].x=0,l[7].color="0xecfeffff",s[7].populate(l[7]),e=s[6],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].w=100,l[8].h=100,l[8].x=120,l[8].color="0xa5f3fcff",s[8].populate(l[8]),e=s[6],l[9]={},s[9]=this.element({parent:e||"root"},t),l[9].w=100,l[9].h=100,l[9].x=240,l[9].color="0x22d3eeff",s[9].populate(l[9]),e=s[6],l[10]={},s[10]=this.element({parent:e||"root"},t),l[10].w=100,l[10].h=100,l[10].x=360,l[10].color="0x0891b2ff",s[10].populate(l[10]),e=s[0],l[11]={},s[11]=this.element({parent:e||"root"},t),l[11].x=20,l[11].y=260,s[11].populate(l[11]),e=s[11],l[12]={},s[12]=this.element({parent:e||"root"},t),l[12].w=100,l[12].h=100,l[12].x=0,l[12].color="0xecfeffaa",s[12].populate(l[12]),e=s[11],l[13]={},s[13]=this.element({parent:e||"root"},t),l[13].w=100,l[13].h=100,l[13].x=120,l[13].color="0xa5f3fc33",s[13].populate(l[13]),e=s[11],l[14]={},s[14]=this.element({parent:e||"root"},t),l[14].w=100,l[14].h=100,l[14].x=240,l[14].color="0x22d3ee20",s[14].populate(l[14]),e=s[11],l[15]={},s[15]=this.element({parent:e||"root"},t),l[15].w=100,l[15].h=100,l[15].x=360,l[15].color="0x0891b2ff",s[15].populate(l[15]),e=s[0],l[16]={},s[16]=this.element({parent:e||"root"},t),l[16].x=20,l[16].y=380,s[16].populate(l[16]),e=s[16],l[17]={},s[17]=this.element({parent:e||"root"},t),l[17].w=100,l[17].h=100,l[17].x=0,l[17].color="0xecfeffff",s[17].populate(l[17]),e=s[16],l[18]={},s[18]=this.element({parent:e||"root"},t),l[18].w=100,l[18].h=100,l[18].x=120,l[18].color="0xa5f3fcff",s[18].populate(l[18]),e=s[16],l[19]={},s[19]=this.element({parent:e||"root"},t),l[19].w=100,l[19].h=100,l[19].x=240,l[19].color="0x22d3eeff",s[19].populate(l[19]),e=s[16],l[20]={},s[20]=this.element({parent:e||"root"},t),l[20].w=100,l[20].h=100,l[20].x=360,l[20].color="0x0891b2ff",s[20].populate(l[20]),e=s[0],l[21]={},s[21]=this.element({parent:e||"root"},t),l[21].x=20,l[21].y=500,s[21].populate(l[21]),e=s[21],l[22]={},s[22]=this.element({parent:e||"root"},t),l[22].w=100,l[22].h=100,l[22].x=0,l[22].color="0xecfeffab",s[22].populate(l[22]),e=s[21],l[23]={},s[23]=this.element({parent:e||"root"},t),l[23].w=100,l[23].h=100,l[23].x=120,l[23].color="0xa5f3fc33",s[23].populate(l[23]),e=s[21],l[24]={},s[24]=this.element({parent:e||"root"},t),l[24].w=100,l[24].h=100,l[24].x=240,l[24].color="0x22d3ee21",s[24].populate(l[24]),e=s[21],l[25]={},s[25]=this.element({parent:e||"root"},t),l[25].w=100,l[25].h=100,l[25].x=360,l[25].color="0x0891b2ff",s[25].populate(l[25]),e=s[0],l[26]={},s[26]=this.element({parent:e||"root"},t),l[26].x=20,l[26].y=620,s[26].populate(l[26]),e=s[26],l[27]={},s[27]=this.element({parent:e||"root"},t),l[27].w=100,l[27].h=100,l[27].x=0,l[27].color="0x000000ff",s[27].populate(l[27]),e=s[26],l[28]={},s[28]=this.element({parent:e||"root"},t),l[28].w=100,l[28].h=100,l[28].x=120,l[28].color="0xccccccff",s[28].populate(l[28]),e=s[26],l[29]={},s[29]=this.element({parent:e||"root"},t),l[29].w=100,l[29].h=100,l[29].x=240,l[29].color="0x889900ff",s[29].populate(l[29]),e=s[26],l[30]={},s[30]=this.element({parent:e||"root"},t),l[30].w=100,l[30].h=100,l[30].x=360,l[30].color="0x00ff00ff",s[30].populate(l[30]),e=s[0],l[31]={},s[31]=this.element({parent:e||"root"},t),l[31].x=20,l[31].y=740,s[31].populate(l[31]),e=s[31],l[32]={},s[32]=this.element({parent:e||"root"},t),l[32].w=100,l[32].h=100,l[32].x=0,l[32].color="0x000000ff",s[32].populate(l[32]),e=s[31],l[33]={},s[33]=this.element({parent:e||"root"},t),l[33].w=100,l[33].h=100,l[33].x=120,l[33].color="0xccccccff",s[33].populate(l[33]),e=s[31],l[34]={},s[34]=this.element({parent:e||"root"},t),l[34].w=100,l[34].h=100,l[34].x=240,l[34].color="0x889900ff",s[34].populate(l[34]),e=s[31],l[35]={},s[35]=this.element({parent:e||"root"},t),l[35].w=100,l[35].h=100,l[35].x=360,l[35].color="0x00ff00ff",s[35].populate(l[35]),e=s[0],l[36]={},s[36]=this.element({parent:e||"root"},t),l[36].x=620,l[36].y=20,s[36].populate(l[36]),e=s[36],l[37]={},s[37]=this.element({parent:e||"root"},t),l[37].w=300,l[37].h=200,l[37].x=0,l[37].color={transition:t.color1},s[37].populate(l[37]),e=s[36],l[38]={},s[38]=this.element({parent:e||"root"},t),l[38].w=300,l[38].h=200,l[38].x=0,l[38].y=250,l[38].color={transition:t.color2},s[38].populate(l[38]),e=s[36],l[39]={},s[39]=this.element({parent:e||"root"},t),l[39].w=300,l[39].h=200,l[39].x=100,l[39].y=400,l[39].color={transition:t.color3},s[39].populate(l[39]),e=s[36],l[40]={},s[40]=this.element({parent:e||"root"},t),l[40].w=300,l[40].h=200,l[40].x=0,l[40].y=650,l[40].color={transition:{value:t.color4,d:1e3,f:"ease-in-out"}},s[40].populate(l[40]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("color",{transition:e.bg})},function(e,t,n,r,o,i){t[37].set("color",{transition:e.color1})},function(e,t,n,r,o,i){t[38].set("color",{transition:e.color2})},function(e,t,n,r,o,i){t[39].set("color",{transition:e.color3})},function(e,t,n,r,o,i){t[40].set("color",{transition:{value:e.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state:function(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter:function(){this.color1="#0891b2"===this.color1?"#22d3ee":"#0891b2",this.color2="#dc2626"===this.color2?"#0f0":"#dc2626",this.color3="rgba(251, 191, 36)"===this.color3?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4="#1e3a8a"===this.color4?"#bfdbfe":"#1e3a8a"}},hooks:{ready:function(){var e=this,t=0,n=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(function(){(t+=1)===n.length-1&&(t=0),e.bg=n[t]},2e3)}}}),Ji=Wo.Component("Gradients",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=480,l[1].h=1080,l[1].color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=480,l[2].h=1080,l[2].x=480,l[2].color="{left: '0xdc2626ff',  right: '0xf87171ff'}",s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=480,l[3].h=1080,l[3].x=960,l[3].color="{top: '0x0891b2ff', right: '0xf87171ff'}",s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].w=480,l[4].h=1080,l[4].x=1440,l[4].color="{right: '0x008000ff', bottom: '0xffd700ff'}",s[4].populate(l[4]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("w",480)},function(e,t,n,r,o,i){t[2].set("w",480)},function(e,t,n,r,o,i){t[2].set("x",480)},function(e,t,n,r,o,i){t[3].set("w",480)},function(e,t,n,r,o,i){t[3].set("x",960)},function(e,t,n,r,o,i){t[4].set("w",480)},function(e,t,n,r,o,i){t[4].set("x",1440)}],context:{}}}),Qi=Wo.Component("Transitions",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].x=60,s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=200,l[1].h=200,l[1].x=50,l[1].y={transition:t.y},l[1].color="0xc4b5fdff",s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=200,l[2].h=200,l[2].x=300,l[2].y={transition:{value:t.y}},l[2].color="0xa78bfaff",s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=200,l[3].h=200,l[3].x=550,l[3].y={transition:{value:t.y,duration:1e3,start:t.start,end:t.doneTransition3}},l[3].color="0x8b5cf6ff",l[3].ref="bla",s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].w=200,l[4].h=200,l[4].x=800,l[4].y={transition:{value:t.y,duration:500,delay:500,start:t.start,end:t.finished}},l[4].color="0x7c3aedff",s[4].populate(l[4]),e=s[0],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].w=200,l[5].h=200,l[5].x=1050,l[5].y={transition:{value:t.y,easing:"ease-in-out",end:t.finished}},l[5].color="0x6d28d9ff",s[5].populate(l[5]),e=s[0],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].w=200,l[6].h=200,l[6].x=1300,l[6].y={transition:{value:t.y,duration:3e3,easing:"ease-in-out-back",end:t.finished}},l[6].color="0x5b21b6ff",s[6].populate(l[6]),e=s[0],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].w=200,l[7].h=200,l[7].x=1550,l[7].y={transition:{value:t.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},l[7].color="0x4c1d95ff",s[7].populate(l[7]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("y",{transition:e.y})},function(e,t,n,r,o,i){t[2].set("y",{transition:{value:e.y}})},function(e,t,n,r,o,i){t[3].set("y",{transition:{value:e.y,duration:1e3,start:e.start,end:e.doneTransition3}})},function(e,t,n,r,o,i){t[4].set("y",{transition:{value:e.y,duration:500,delay:500,start:e.start,end:e.finished}})},function(e,t,n,r,o,i){t[5].set("y",{transition:{value:e.y,easing:"ease-in-out",end:e.finished}})},function(e,t,n,r,o,i){t[6].set("y",{transition:{value:e.y,duration:3e3,easing:"ease-in-out-back",end:e.finished}})},function(e,t,n,r,o,i){t[7].set("y",{transition:{value:e.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state:function(){return{y:50}},hooks:{init:function(){var e=this;this.$setInterval(function(){e.go()},12e3),this.go()}},methods:{doneTransition3:function(){this.$log.info("Transition 3 is done!")},start:function(e,t,n){this.$log.info("Start transition",e.nodeId,t,n)},finished:function(e,t,n){this.$log.info("Finished transition",e.nodeId,t,n)},go:function(){var e=this;this.y=50,this.$setTimeout(function(){e.y=830},1e3),this.$setTimeout(function(){e.y=50,e.$setTimeout(function(){e.y=200},1e3)},6e3)}}}),Zi=Wo.Component("Alpha",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].y=100,s[1].populate(l[1]),e=s[1],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=200,l[2].h=200,l[2].x=100,l[2].color="0xffffffff",l[2].alpha=.2,s[2].populate(l[2]),e=s[1],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=200,l[3].h=200,l[3].x=320,l[3].color="0xffffffff",l[3].alpha=.4,s[3].populate(l[3]),e=s[1],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].w=200,l[4].h=200,l[4].x=540,l[4].color="0xffffffff",l[4].alpha=.6,s[4].populate(l[4]),e=s[1],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].w=200,l[5].h=200,l[5].x=760,l[5].color="0xffffffff",l[5].alpha=.8,s[5].populate(l[5]),e=s[1],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].w=200,l[6].h=200,l[6].x=980,l[6].color="0xffffffff",l[6].alpha=1,s[6].populate(l[6]),e=s[0],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].w=200,l[7].h=200,l[7].x=100,l[7].y=320,l[7].color="0xffffffff",l[7].alpha=t.alpha,s[7].populate(l[7]),e=s[0],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].w=200,l[8].h=200,l[8].x=100,l[8].y=540,l[8].color="0xffffffff",l[8].alpha=t.alpha,s[8].populate(l[8]),e=s[0],l[9]={},s[9]=this.element({parent:e||"root"},t),l[9].w=200,l[9].h=200,l[9].x=100,l[9].y=760,l[9].color="0xffffffff",l[9].alpha={transition:{value:t.alpha,duration:1e3,easing:"ease-in-out-circ"}},s[9].populate(l[9]),e=s[0],l[10]={},s[10]=this.element({parent:e||"root"},t),l[10].w=428,l[10].h=234,l[10].x=1200,l[10].y=100,l[10].src=t.image,l[10].alpha=1,s[10].populate(l[10]),e=s[0],l[11]={},s[11]=this.element({parent:e||"root"},t),l[11].w=428,l[11].h=234,l[11].x=1300,l[11].y=294,l[11].src=t.image,l[11].alpha=.4,s[11].populate(l[11]),e=s[0],l[12]={},s[12]=this.element({parent:e||"root"},t),l[12].w=428,l[12].h=234,l[12].x=1200,l[12].y=488,l[12].src=t.image,l[12].alpha=.1,s[12].populate(l[12]),e=s[0],l[13]={},s[13]=this.element({parent:e||"root"},t),l[13].x=400,l[13].y=400,l[13].alpha=.2,l[13].content="Text with alpha applied directly",l[13].__textnode=!0,s[13].populate(l[13]),e=s[0],l[14]={},s[14]=this.element({parent:e||"root"},t),l[14].alpha=.5,l[14].x=400,l[14].y=500,s[14].populate(l[14]),e=s[14],l[15]={},s[15]=this.element({parent:e||"root"},t),l[15].content="Text with alpha applied on parent element",l[15].__textnode=!0,s[15].populate(l[15]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[8].set("alpha",e.alpha)},function(e,t,n,r,o,i){t[9].set("alpha",{transition:{value:e.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(e,t,n,r,o,i){t[10].set("src",e.image)},function(e,t,n,r,o,i){t[11].set("y",294)},function(e,t,n,r,o,i){t[11].set("src",e.image)},function(e,t,n,r,o,i){t[12].set("y",488)},function(e,t,n,r,o,i){t[12].set("src",e.image)}],context:{}},state:function(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t="up"===e.direction?e.alpha+.2:e.alpha-.2;e.alpha=Math.max(Math.min(t,1),.1),1===e.alpha&&(e.direction="down"),.1===e.alpha&&(e.direction="up")},1400)}}}),ea=Wo.Component("Scaling",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].x=100,l[1].y=100,l[1].w=150,l[1].h=150,l[1].color="0x64748bff",s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].x=300,l[2].y=100,l[2].w=100,l[2].h=100,l[2].color="0x64748bff",l[2].scale=1.5,s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].x=100,l[3].y=400,l[3].w=100,l[3].h=100,l[3].color="0xb45309ff",l[3].scale=t.scale,s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].x=900,l[4].y=400,l[4].w=100,l[4].h=100,l[4].src=t.balloon,l[4].scale={transition:{value:t.scale,easing:"ease-in-out"}},s[4].populate(l[4]),e=s[0],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].x=300,l[5].y=600,l[5].w=100,l[5].h=100,l[5].color="0x059669ff",l[5].scale=t.scale2,s[5].populate(l[5]),e=s[5],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].x=10,l[6].y=10,l[6].h=60,l[6].w=80,l[6].color="0x0369a1ff",s[6].populate(l[6]),e=s[0],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].x=1500,l[7].y=600,l[7].w=100,l[7].h=100,l[7].color="0x059669ff",l[7].scale=t.scale2,s[7].populate(l[7]),e=s[7],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].x=10,l[8].y=10,l[8].h=60,l[8].w=80,l[8].color="0x0369a1ff",l[8].scale=t.scale2/2,s[8].populate(l[8]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[4].set("src",e.balloon)},function(e,t,n,r,o,i){t[4].set("scale",{transition:{value:e.scale,easing:"ease-in-out"}})},function(e,t,n,r,o,i){t[5].set("scale",e.scale2)},function(e,t,n,r,o,i){t[7].set("scale",e.scale2)},function(e,t,n,r,o,i){t[8].set("scale",e.scale2/2)}],context:{}},state:function(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t="up"===e.direction?e.scale+.5:0;e.scale=Math.max(Math.min(t,8),0),8===e.scale&&(e.direction="down"),0===e.scale&&(e.direction="up")},500),this.$setInterval(function(){e.scale2=1===e.scale2?3:1},2e3)}}}),ta=Wo.Component("Rotation",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].y=70,s[1].populate(l[1]),e=s[1],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].x=100,l[2].y=0,l[2].w=200,l[2].h=100,l[2].color="0xfee2e2ff",l[2].rotation=0,s[2].populate(l[2]),e=s[1],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].x=100,l[3].y=150,l[3].w=200,l[3].h=100,l[3].color="0xfecacaff",l[3].rotation=10,s[3].populate(l[3]),e=s[1],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].x=100,l[4].y=300,l[4].w=200,l[4].h=100,l[4].color="0xfca5a5ff",l[4].rotation=20,s[4].populate(l[4]),e=s[1],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].x=100,l[5].y=450,l[5].w=200,l[5].h=100,l[5].color="0xf87171ff",l[5].rotation=30,s[5].populate(l[5]),e=s[1],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].x=100,l[6].y=610,l[6].w=200,l[6].h=100,l[6].color="0xef4444ff",l[6].rotation=40,s[6].populate(l[6]),e=s[1],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].x=100,l[7].y=800,l[7].w=200,l[7].h=100,l[7].color="0xdc2626ff",l[7].rotation=50,s[7].populate(l[7]),e=s[0],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].y=70,l[8].x=300,s[8].populate(l[8]),e=s[8],l[9]={},s[9]=this.element({parent:e||"root"},t),l[9].x=100,l[9].y=0,l[9].w=200,l[9].h=100,l[9].color="0xfee2e2ff",l[9].rotation=60,s[9].populate(l[9]),e=s[8],l[10]={},s[10]=this.element({parent:e||"root"},t),l[10].x=100,l[10].y=150,l[10].w=200,l[10].h=100,l[10].color="0xfecacaff",l[10].rotation=70,s[10].populate(l[10]),e=s[8],l[11]={},s[11]=this.element({parent:e||"root"},t),l[11].x=100,l[11].y=300,l[11].w=200,l[11].h=100,l[11].color="0xfca5a5ff",l[11].rotation=80,s[11].populate(l[11]),e=s[8],l[12]={},s[12]=this.element({parent:e||"root"},t),l[12].x=100,l[12].y=450,l[12].w=200,l[12].h=100,l[12].color="0xf87171ff",l[12].rotation=90,s[12].populate(l[12]),e=s[8],l[13]={},s[13]=this.element({parent:e||"root"},t),l[13].x=100,l[13].y=610,l[13].w=200,l[13].h=100,l[13].color="0xef4444ff",l[13].rotation=100,s[13].populate(l[13]),e=s[8],l[14]={},s[14]=this.element({parent:e||"root"},t),l[14].x=100,l[14].y=800,l[14].w=200,l[14].h=100,l[14].color="0xdc2626ff",l[14].rotation=100,s[14].populate(l[14]),e=s[0],l[15]={},s[15]=this.element({parent:e||"root"},t),l[15].y=70,l[15].x=600,s[15].populate(l[15]),e=s[15],l[16]={},s[16]=this.element({parent:e||"root"},t),l[16].x=100,l[16].y=0,l[16].w=200,l[16].h=100,l[16].color="0xfee2e2ff",l[16].rotation=110,s[16].populate(l[16]),e=s[15],l[17]={},s[17]=this.element({parent:e||"root"},t),l[17].x=100,l[17].y=150,l[17].w=200,l[17].h=100,l[17].color="0xfecacaff",l[17].rotation=120,s[17].populate(l[17]),e=s[15],l[18]={},s[18]=this.element({parent:e||"root"},t),l[18].x=100,l[18].y=300,l[18].w=200,l[18].h=100,l[18].color="0xfca5a5ff",l[18].rotation=130,s[18].populate(l[18]),e=s[15],l[19]={},s[19]=this.element({parent:e||"root"},t),l[19].x=100,l[19].y=450,l[19].w=200,l[19].h=100,l[19].color="0xf87171ff",l[19].rotation=140,s[19].populate(l[19]),e=s[15],l[20]={},s[20]=this.element({parent:e||"root"},t),l[20].x=100,l[20].y=610,l[20].w=200,l[20].h=100,l[20].color="0xef4444ff",l[20].rotation=150,s[20].populate(l[20]),e=s[15],l[21]={},s[21]=this.element({parent:e||"root"},t),l[21].x=100,l[21].y=800,l[21].w=200,l[21].h=100,l[21].color="0xdc2626ff",l[21].rotation=160,s[21].populate(l[21]),e=s[0],l[22]={},s[22]=this.element({parent:e||"root"},t),l[22].y=70,l[22].x=900,s[22].populate(l[22]),e=s[22],l[23]={},s[23]=this.element({parent:e||"root"},t),l[23].x=100,l[23].y=0,l[23].w=200,l[23].h=100,l[23].color="0xfee2e2ff",l[23].rotation=170,s[23].populate(l[23]),e=s[22],l[24]={},s[24]=this.element({parent:e||"root"},t),l[24].x=100,l[24].y=150,l[24].w=200,l[24].h=100,l[24].color="0xfecacaff",l[24].rotation=180,s[24].populate(l[24]),e=s[22],l[25]={},s[25]=this.element({parent:e||"root"},t),l[25].x=100,l[25].y=300,l[25].w=200,l[25].h=100,l[25].color="0xfca5a5ff",l[25].rotation=190,s[25].populate(l[25]),e=s[22],l[26]={},s[26]=this.element({parent:e||"root"},t),l[26].x=100,l[26].y=450,l[26].w=200,l[26].h=100,l[26].color="0xf87171ff",l[26].rotation=200,s[26].populate(l[26]),e=s[22],l[27]={},s[27]=this.element({parent:e||"root"},t),l[27].x=100,l[27].y=610,l[27].w=200,l[27].h=100,l[27].color="0xef4444ff",l[27].rotation=210,s[27].populate(l[27]),e=s[22],l[28]={},s[28]=this.element({parent:e||"root"},t),l[28].x=100,l[28].y=800,l[28].w=200,l[28].h=100,l[28].color="0xdc2626ff",l[28].rotation=220,s[28].populate(l[28]),e=s[0],l[29]={},s[29]=this.element({parent:e||"root"},t),l[29].y=70,l[29].x=1200,s[29].populate(l[29]),e=s[29],l[30]={},s[30]=this.element({parent:e||"root"},t),l[30].x=100,l[30].y=0,l[30].w=200,l[30].h=100,l[30].color="0xfee2e2ff",l[30].rotation=230,s[30].populate(l[30]),e=s[29],l[31]={},s[31]=this.element({parent:e||"root"},t),l[31].x=100,l[31].y=150,l[31].w=200,l[31].h=100,l[31].color="0xfecacaff",l[31].rotation=240,s[31].populate(l[31]),e=s[29],l[32]={},s[32]=this.element({parent:e||"root"},t),l[32].x=100,l[32].y=300,l[32].w=200,l[32].h=100,l[32].color="0xfca5a5ff",l[32].rotation=250,s[32].populate(l[32]),e=s[29],l[33]={},s[33]=this.element({parent:e||"root"},t),l[33].x=100,l[33].y=450,l[33].w=200,l[33].h=100,l[33].color="0xf87171ff",l[33].rotation=260,s[33].populate(l[33]),e=s[29],l[34]={},s[34]=this.element({parent:e||"root"},t),l[34].x=100,l[34].y=610,l[34].w=200,l[34].h=100,l[34].color="0xef4444ff",l[34].rotation=270,s[34].populate(l[34]),e=s[29],l[35]={},s[35]=this.element({parent:e||"root"},t),l[35].x=100,l[35].y=800,l[35].w=200,l[35].h=100,l[35].color="0xdc2626ff",l[35].rotation=280,s[35].populate(l[35]),e=s[0],l[36]={},s[36]=this.element({parent:e||"root"},t),l[36].y=70,l[36].x=1500,s[36].populate(l[36]),e=s[36],l[37]={},s[37]=this.element({parent:e||"root"},t),l[37].x=100,l[37].y=0,l[37].w=200,l[37].h=100,l[37].color="0xfee2e2ff",l[37].rotation=290,s[37].populate(l[37]),e=s[36],l[38]={},s[38]=this.element({parent:e||"root"},t),l[38].x=100,l[38].y=150,l[38].w=200,l[38].h=100,l[38].color="0xfecacaff",l[38].rotation=300,s[38].populate(l[38]),e=s[36],l[39]={},s[39]=this.element({parent:e||"root"},t),l[39].x=100,l[39].y=300,l[39].w=200,l[39].h=100,l[39].color="0xfca5a5ff",l[39].rotation=310,s[39].populate(l[39]),e=s[36],l[40]={},s[40]=this.element({parent:e||"root"},t),l[40].x=100,l[40].y=450,l[40].w=200,l[40].h=100,l[40].color="0xf87171ff",l[40].rotation=320,s[40].populate(l[40]),e=s[36],l[41]={},s[41]=this.element({parent:e||"root"},t),l[41].x=100,l[41].y=610,l[41].w=200,l[41].h=100,l[41].color="0xef4444ff",l[41].rotation=330,s[41].populate(l[41]),e=s[36],l[42]={},s[42]=this.element({parent:e||"root"},t),l[42].x=100,l[42].y=800,l[42].w=200,l[42].h=100,l[42].color="0xdc2626ff",l[42].rotation=340,s[42].populate(l[42]),e=s[0],l[43]={},s[43]=this.element({parent:e||"root"},t),l[43].x=200,l[43].y=200,l[43].w=400,l[43].h=400,l[43].color="0x0891b2ff",l[43].rotation=t.rotation1,s[43].populate(l[43]),e=s[0],l[44]={},s[44]=this.element({parent:e||"root"},t),l[44].x=800,l[44].y=200,l[44].w=400,l[44].h=400,l[44].color="0x0891b2ff",l[44].rotation=t.rotation2,s[44].populate(l[44]),e=s[0],l[45]={},s[45]=this.element({parent:e||"root"},t),l[45].x=1400,l[45].y=200,l[45].w=400,l[45].h=400,l[45].color="0x0891b2ff",l[45].rotation={transition:t.rotation3},s[45].populate(l[45]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[44].set("rotation",e.rotation2)},function(e,t,n,r,o,i){t[45].set("rotation",{transition:e.rotation3})}],context:{}},state:function(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t=e.rotation2+10;e.rotation2=t<=360?t:0},800),this.$setInterval(function(){e.rotation3=Math.max(10,Math.min(720,2*e.rotation3)),720===e.rotation3&&(e.rotation3=0)},2e3)}}}),na=Wo.Component("KeyInput",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].x=525,l[0].y=130,s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=200,l[1].h=200,l[1].color=t.focusColor,l[1].x=220*t.focusedX,l[1].y=210*t.focusedY,s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=180,l[2].h=180,l[2].x=10,l[2].y=10,l[2].color=t.blockColor,s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=180,l[3].h=180,l[3].x=230,l[3].y=10,l[3].color=t.blockColor,s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].w=180,l[4].h=180,l[4].x=450,l[4].y=10,l[4].color=t.blockColor,s[4].populate(l[4]),e=s[0],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].w=180,l[5].h=180,l[5].x=670,l[5].y=10,l[5].color=t.blockColor,s[5].populate(l[5]),e=s[0],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].w=180,l[6].h=180,l[6].x=10,l[6].y=220,l[6].color=t.blockColor,s[6].populate(l[6]),e=s[0],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].w=180,l[7].h=180,l[7].x=230,l[7].y=220,l[7].color=t.blockColor,s[7].populate(l[7]),e=s[0],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].w=180,l[8].h=180,l[8].x=450,l[8].y=220,l[8].color=t.blockColor,s[8].populate(l[8]),e=s[0],l[9]={},s[9]=this.element({parent:e||"root"},t),l[9].w=180,l[9].h=180,l[9].x=670,l[9].y=220,l[9].color=t.blockColor,s[9].populate(l[9]),e=s[0],l[10]={},s[10]=this.element({parent:e||"root"},t),l[10].w=180,l[10].h=180,l[10].x=10,l[10].y=430,l[10].color=t.blockColor,s[10].populate(l[10]),e=s[0],l[11]={},s[11]=this.element({parent:e||"root"},t),l[11].w=180,l[11].h=180,l[11].x=230,l[11].y=430,l[11].color=t.blockColor,s[11].populate(l[11]),e=s[0],l[12]={},s[12]=this.element({parent:e||"root"},t),l[12].w=180,l[12].h=180,l[12].x=450,l[12].y=430,l[12].color=t.blockColor,s[12].populate(l[12]),e=s[0],l[13]={},s[13]=this.element({parent:e||"root"},t),l[13].w=180,l[13].h=180,l[13].x=670,l[13].y=430,l[13].color=t.blockColor,s[13].populate(l[13]),e=s[0],l[14]={},s[14]=this.element({parent:e||"root"},t),l[14].w=180,l[14].h=180,l[14].x=10,l[14].y=640,l[14].color=t.blockColor,s[14].populate(l[14]),e=s[0],l[15]={},s[15]=this.element({parent:e||"root"},t),l[15].w=180,l[15].h=180,l[15].x=230,l[15].y=640,l[15].color=t.blockColor,s[15].populate(l[15]),e=s[0],l[16]={},s[16]=this.element({parent:e||"root"},t),l[16].w=180,l[16].h=180,l[16].x=450,l[16].y=640,l[16].color=t.blockColor,s[16].populate(l[16]),e=s[0],l[17]={},s[17]=this.element({parent:e||"root"},t),l[17].w=180,l[17].h=180,l[17].x=670,l[17].y=640,l[17].color=t.blockColor,s[17].populate(l[17]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("color",e.focusColor)},function(e,t,n,r,o,i){t[1].set("x",220*e.focusedX)},function(e,t,n,r,o,i){t[1].set("y",210*e.focusedY)},function(e,t,n,r,o,i){t[2].set("color",e.blockColor)},function(e,t,n,r,o,i){t[3].set("color",e.blockColor)},function(e,t,n,r,o,i){t[4].set("color",e.blockColor)},function(e,t,n,r,o,i){t[5].set("color",e.blockColor)},function(e,t,n,r,o,i){t[6].set("color",e.blockColor)},function(e,t,n,r,o,i){t[7].set("color",e.blockColor)},function(e,t,n,r,o,i){t[8].set("color",e.blockColor)},function(e,t,n,r,o,i){t[9].set("color",e.blockColor)},function(e,t,n,r,o,i){t[10].set("color",e.blockColor)},function(e,t,n,r,o,i){t[11].set("color",e.blockColor)},function(e,t,n,r,o,i){t[12].set("color",e.blockColor)},function(e,t,n,r,o,i){t[13].set("color",e.blockColor)},function(e,t,n,r,o,i){t[14].set("color",e.blockColor)},function(e,t,n,r,o,i){t[15].set("color",e.blockColor)},function(e,t,n,r,o,i){t[16].set("color",e.blockColor)},function(e,t,n,r,o,i){t[17].set("color",e.blockColor)}],context:{}},state:function(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor:function(){return this.colorscheme,"yellow"===this.colorscheme?"#fef08a":"#bae6fd"},focusColor:function(){return this.colorscheme,"yellow"===this.colorscheme?"#facc15":"#38bdf8"}},input:{left:function(){var e=this.focusedX-1;this.focusedX=Math.max(e,0)},right:function(){var e=this.focusedX+1;this.focusedX=Math.min(e,3)},up:function(){this.focusedY=Math.max(this.focusedY-1,0)},down:function(){this.focusedY=Math.min(this.focusedY+1,3)},enter:function(){this.colorscheme="yellow"===this.colorscheme?"blue":"yellow"},any:function(e){var t=parseInt(e.key);isNaN(t)?this.parent.$focus(e):(this.focusedX=Math.max(0,(t-1)%4),this.focusedY=Math.max(0,Math.ceil(t/4)-1))}}}),ra=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],oa=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],ia=Wo.Component("Texts",{code:{render:function(e,t,n,r,o,i,a){var s,l,u=this,c=[],f=[],d=[],p=[];f[0]={},c[0]=this.element({parent:e||"root"},t),f[0].x=100,f[0].y=100,c[0].populate(f[0]),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},t),f[1].content="Default text",f[1]["@loaded"]=t.textLoaded&&t.textLoaded.bind(t),f[1].__textnode=!0,c[1].populate(f[1]),e=c[0],f[2]={},c[2]=this.element({parent:e||"root"},t),f[2].content="123456",f[2].x=400,f[2].__textnode=!0,c[2].populate(f[2]),e=c[0],f[3]={},c[3]=this.element({parent:e||"root"},t),f[3].content="Text with a different fontsize",f[3].size=t.size,f[3].y=120,f[3].font="raleway",f[3].__textnode=!0,c[3].populate(f[3]),e=c[0],f[4]={},c[4]=this.element({parent:e||"root"},t),f[4].content="Text with a different color",f[4].size=50,f[4].color=t.color,f[4].y=250,f[4].__textnode=!0,c[4].populate(f[4]),e=c[0],f[5]={},c[5]=this.element({parent:e||"root"},t),f[5].content="Letterspacing",f[5].size=50,f[5].color="0x38bdf8ff",f[5].y=450,f[5].letterspacing=40,f[5].__textnode=!0,c[5].populate(f[5]),e=c[0],f[6]={},c[6]=this.element({parent:e||"root"},t),f[6].w=800,f[6].h=100,f[6].y=550,f[6].color="0x94a3b8ff",c[6].populate(f[6]),e=c[6],f[7]={},c[7]=this.element({parent:e||"root"},t),f[7].content="Text align center",f[7].size=50,f[7].y=15,f[7].color="0xbae6fdff",f[7].align="center",f[7].maxwidth=800,f[7].__textnode=!0,c[7].populate(f[7]),e=c[0],f[8]={},c[8]=this.element({parent:e||"root"},t),f[8].w=800,f[8].h=200,f[8].x=900,f[8].y=550,f[8].color="0x94a3b8ff",c[8].populate(f[8]),e=c[8],f[9]={},c[9]=this.element({parent:e||"root"},t),f[9].content=t.longText,f[9].size=40,f[9].color="0xbae6fdff",f[9].maxwidth=800,f[9].maxlines=5,f[9].textoverflow="!!!",f[9].__textnode=!0,c[9].populate(f[9]),e=c[0],f[10]={},c[10]=this.element({parent:e||"root"},t),f[10].w=800,f[10].h=120,f[10].x=900,f[10].y=800,f[10].color="0x94a3b8ff",c[10].populate(f[10]),e=c[10],f[11]={},c[11]=this.element({parent:e||"root"},t),f[11].content=t.longText,f[11].size=40,f[11].color="0xbae6fdff",f[11].maxwidth=800,f[11].maxlines=2,f[11].lineheight=60,f[11].textoverflow=!1,f[11].__textnode=!0,c[11].populate(f[11]),e=c[0],f[12]={},c[12]=this.element({parent:e||"root"},t),f[12].content=t.character,f[12].size=50,f[12].color=t.color,f[12].y=750,f[12].font="opensans",f[12].__textnode=!0,c[12].populate(f[12]),e=c[0],f[13]={},c[13]=this.element({parent:e||"root"},t),f[13].x=1200,f[13].y=300,c[13].populate(f[13]),e=c[13],f[14]={},c[14]=this.element({parent:e||"root"},t),f[14].rotation={transition:t.rotation},f[14].pivot=0,f[14].content="Hello",f[14].__textnode=!0,c[14].populate(f[14]),e=c[13],f[15]={},c[15]=this.element({parent:e||"root"},t),f[15].x=150,f[15].rotation={transition:t.rotation},f[15].pivot=.5,f[15].content="World",f[15].__textnode=!0,c[15].populate(f[15]),e=c[13],f[16]={},c[16]=this.element({parent:e||"root"},t),f[16].x=300,f[16].rotation={transition:t.rotation},f[16].pivot=1,f[16].content="!!",f[16].__textnode=!0,c[16].populate(f[16]),e=c[0],f[17]={},c[17]=this.element({parent:e||"root"},t),f[17].x=500,f[17].y=700,c[17].populate(f[17]),e=c[17],p[18]=[],d[18]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),c=new Set,d=a.length,p={};s=p.from||0,l="to"in p?p.to:a.length;for(;d--;)a[d],d<l&&d>=s&&c.add(""+d);for(var h=r.length;h--;)if(!1===c.has(r[h])){var m=r[h];n[18][m]&&n[18][m].destroy(),n[18][m]=null,delete n[18][m]}r.length=0;for(var g=a.length,y=[],v=function(){if(b<s||b>=l)return 1;var i=Object.create(t);e=n[17],i.text=a[b],i.index=b,i.key=""+b,r.push(i.key),e=n[17],void 0===n[18]&&(n[18]={}),f[18]={},void 0===n[18][i.key]&&(n[18][i.key]=u.element({parent:e||"root"},t)),f[18].content=i.text,f[18].y=50*i.index,f[18].__textnode=!0,void 0===n[18][i.key].nodeId&&n[18][i.key].populate(f[18]);var c=function(){n[18][i.key].set("y",50*i.index)};o(c,null),y.push(c),t[Symbol.for("effects")].push(c)},b=0;b<g;b++)v();return y};var h=function(){d[18](t.texts,c,p[18])};t[Symbol.for("effects")].push(h),o(h,["texts"]);var m=function(){t.text;for(var e=0;e<t.texts.length;e++)if(!(e<s||e>=l)){var n={};n.index=e,n.text=t.texts[e],n.key=e,c[18][n.key].set("content",n.text)}};return t[Symbol.for("effects")].push(m),o(m),{elms:c,cleanup:function(){t=null,e=null,p[18].length=0,d[18]=null,h=null,m=null,c.length=0,r.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[3].set("size",e.size)},function(e,t,n,r,o,i){t[4].set("color",e.color)},function(e,t,n,r,o,i){t[12].set("content",e.character)},function(e,t,n,r,o,i){t[12].set("color",e.color)},function(e,t,n,r,o,i){t[14].set("rotation",{transition:e.rotation})},function(e,t,n,r,o,i){t[15].set("rotation",{transition:e.rotation})},function(e,t,n,r,o,i){t[16].set("rotation",{transition:e.rotation})}],context:{}},state:function(){return{color:ra[0],size:10,character:oa[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready:function(){var e=this,t=0;this.$setInterval(function(){++t>ra.length-1&&(t=0),e.color=ra[t],e.size=10*(2*t+1),e.rotation+=30},1e3);var n=0;this.$setInterval(function(){++n>oa.length-1&&(n=0),e.character=oa[n]},1400)}},methods:{textLoaded:function(e){this.$log.info("Text loaded with w: ".concat(e.w," and h: ").concat(e.h))}}}),aa=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],sa=Wo.Component("Images",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].src="assets/lightningbolt.png",l[1].w=428,l[1].h=234,l[1].x=100,l[1].y=100,s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",l[2].w=428,l[2].h=234,l[2].x=100,l[2].y=400,s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].src=t.image,l[3].x=100,l[3].y=700,l[3]["@loaded"]=t.imageLoaded&&t.imageLoaded.bind(t),s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].color="{top: '0xff0000ff', bottom: '0xffd700ff'}",l[4].src="assets/lightningbolt.png",l[4].w=428,l[4].h=234,l[4].x=600,l[4].y=100,s[4].populate(l[4]),e=s[0],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].x=600,l[5].y=400,l[5].w=428,l[5].h=234,l[5].clipping=t.clipping,s[5].populate(l[5]),e=s[5],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].src="assets/lightningbolt.png",l[6].w=856,l[6].h=468,s[6].populate(l[6]),e=s[0],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].color=t.color,l[7].src="assets/lightningbolt.png",l[7].w=428,l[7].h=234,l[7].x=1100,l[7].y=100,s[7].populate(l[7]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[3].set("src",e.image)},function(e,t,n,r,o,i){t[5].set("clipping",e.clipping)},function(e,t,n,r,o,i){t[7].set("color",e.color)}],context:{}},state:function(){return{image:aa[0],clipping:!0,color:"red"}},hooks:{ready:function(){var e=this;this.$setInterval(function(){e.image=e.image===aa[0]?aa[1]:aa[0],e.clipping=!e.clipping,e.color="red"===e.color?"blue":"red"},2e3)}},methods:{imageLoaded:function(e){console.log("backstopjs:ready"),this.$log.info("Image loaded with w: ".concat(e.w," and h: ").concat(e.h))}}}),la=t("S",Wo.Component("Square",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w={transition:t.size},l[0].h={transition:t.size},l[0].color={transition:t.color},s[0].populate(l[0]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("w",{transition:e.size})},function(e,t,n,r,o,i){t[0].set("h",{transition:e.size})},function(e,t,n,r,o,i){t[0].set("color",{transition:e.color})}],context:{}},props:[{key:"size",default:80}],state:function(){return{color:"#86198f"}},watch:{size:function(e,t){this.$log.info("Size changed from ".concat(t," to ").concat(e)),this.color="#86198f"===this.color?"#9d174d":"#86198f"}}})),ua=Wo.Component("Card",{components:{Square:la},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),c[0].w=t.w,c[0].h=t.h,c[0].color="0x0891b2ff",u[0].populate(c[0]),!0===p&&(h-=1),m[1]=n.components&&n.components.Square||r.Square,e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].x=80,c[1].y=80,d[1]=[],void 0!==m[1])for(var g in m[1][Symbol.for("config")].props)delete c[1][m[1][Symbol.for("config")].props[g]],d[1].push(m[1][Symbol.for("config")].props[g]);if(u[1].populate(c[1]),!0===p&&(h-=1),e=u[1],f[2]={},f[2].x=80,f[2].y=80,s=f[2].is||"Square",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);if(u[2]=r[2].call(null,{props:f[2]},u[1],t),u[2][Symbol.for("slots")][0]?(e=u[2][Symbol.for("slots")][0],l=u[2],p=!0):e=u[2][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),m[3]=n.components&&n.components.Square||r.Square,e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].x=20,c[3].y=20,c[3].size=40,d[3]=[],void 0!==m[3])for(var y in m[3][Symbol.for("config")].props)delete c[3][m[3][Symbol.for("config")].props[y]],d[3].push(m[3][Symbol.for("config")].props[y]);if(u[3].populate(c[3]),!0===p&&(h-=1),e=u[3],f[4]={},f[4].x=20,f[4].y=20,f[4].size=40,s=f[4].is||"Square",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);return u[4]=r[4].call(null,{props:f[4]},u[3],t),u[4][Symbol.for("slots")][0]?(e=u[4][Symbol.for("slots")][0],l=u[4],p=!0):e=u[4][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[1]=null,f[2]=null,r[2]=null,m[3]=null,f[4]=null,r[4]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[],context:{}},props:["size"],computed:{w:function(){return this.size,"large"===this.size?400:200},h:function(){return this.size,"large"===this.size?500:300}}}),ca=Wo.Component("Components",{components:{Square:la,Card:ua},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=0,w=[];if(h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),p[0].populate(h[0]),!0===b&&(x-=1),w[1]=n.components&&n.components.Square||r.Square,e=p[0],h[1]={},p[1]=this.element({parent:e||"root"},!0===b?u:t),h[1].x=100,h[1].y=100,h[1].size=50,v[1]=[],void 0!==w[1])for(var S in w[1][Symbol.for("config")].props)delete h[1][w[1][Symbol.for("config")].props[S]],v[1].push(w[1][Symbol.for("config")].props[S]);if(p[1].populate(h[1]),!0===b&&(x-=1),e=p[1],g[2]={},g[2].x=100,g[2].y=100,g[2].size=50,s=g[2].is||"Square",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);if(p[2]=r[2].call(null,{props:g[2]},p[1],t),p[2][Symbol.for("slots")][0]?(e=p[2][Symbol.for("slots")][0],u=p[2],b=!0):e=p[2][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[3]=n.components&&n.components.Square||r.Square,e=p[0],h[3]={},p[3]=this.element({parent:e||"root"},!0===b?u:t),h[3].x=100,h[3].y=200,h[3].size=100,v[3]=[],void 0!==w[3])for(var T in w[3][Symbol.for("config")].props)delete h[3][w[3][Symbol.for("config")].props[T]],v[3].push(w[3][Symbol.for("config")].props[T]);if(p[3].populate(h[3]),!0===b&&(x-=1),e=p[3],g[4]={},g[4].x=100,g[4].y=200,g[4].size=100,s=g[4].is||"Square",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);if(p[4]=r[4].call(null,{props:g[4]},p[3],t),p[4][Symbol.for("slots")][0]?(e=p[4][Symbol.for("slots")][0],u=p[4],b=!0):e=p[4][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[5]=n.components&&n.components.Square||r.Square,e=p[0],h[5]={},p[5]=this.element({parent:e||"root"},!0===b?u:t),h[5].x=100,h[5].y=350,h[5].size=200,v[5]=[],void 0!==w[5])for(var k in w[5][Symbol.for("config")].props)delete h[5][w[5][Symbol.for("config")].props[k]],v[5].push(w[5][Symbol.for("config")].props[k]);if(p[5].populate(h[5]),!0===b&&(x-=1),e=p[5],g[6]={},g[6].x=100,g[6].y=350,g[6].size=200,s=g[6].is||"Square",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);if(p[6]=r[6].call(null,{props:g[6]},p[5],t),p[6][Symbol.for("slots")][0]?(e=p[6][Symbol.for("slots")][0],u=p[6],b=!0):e=p[6][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[7]=n.components&&n.components.Square||r.Square,e=p[0],h[7]={},p[7]=this.element({parent:e||"root"},!0===b?u:t),h[7].x={transition:t.x},h[7].y=600,h[7].size=50,v[7]=[],void 0!==w[7])for(var C in w[7][Symbol.for("config")].props)delete h[7][w[7][Symbol.for("config")].props[C]],v[7].push(w[7][Symbol.for("config")].props[C]);if(p[7].populate(h[7]),!0===b&&(x-=1),e=p[7],g[8]={},l={transition:t.x},!0===Array.isArray(l)&&(l=i(l).slice(0)),g[8].x=l,g[8].y=600,g[8].size=50,s=g[8].is||"Square",r[8],"string"==typeof s){if(r[8]=n.components&&n.components[s]||r[s],!r[8])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[8]=s);if(p[8]=r[8].call(null,{props:g[8]},p[7],t),p[8][Symbol.for("slots")][0]?(e=p[8][Symbol.for("slots")][0],u=p[8],b=!0):e=p[8][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[9]=n.components&&n.components.Card||r.Card,e=p[0],h[9]={},p[9]=this.element({parent:e||"root"},!0===b?u:t),h[9].x=500,h[9].y=100,v[9]=[],void 0!==w[9])for(var A in w[9][Symbol.for("config")].props)delete h[9][w[9][Symbol.for("config")].props[A]],v[9].push(w[9][Symbol.for("config")].props[A]);if(p[9].populate(h[9]),!0===b&&(x-=1),e=p[9],g[10]={},g[10].x=500,g[10].y=100,s=g[10].is||"Card",r[10],"string"==typeof s){if(r[10]=n.components&&n.components[s]||r[s],!r[10])throw new Error('Component "Card" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[10]=s);if(p[10]=r[10].call(null,{props:g[10]},p[9],t),p[10][Symbol.for("slots")][0]?(e=p[10][Symbol.for("slots")][0],u=p[10],b=!0):e=p[10][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[11]=n.components&&n.components.Card||r.Card,e=p[0],h[11]={},p[11]=this.element({parent:e||"root"},!0===b?u:t),h[11].x=500,h[11].y=500,h[11].size="large",v[11]=[],void 0!==w[11])for(var E in w[11][Symbol.for("config")].props)delete h[11][w[11][Symbol.for("config")].props[E]],v[11].push(w[11][Symbol.for("config")].props[E]);if(p[11].populate(h[11]),!0===b&&(x-=1),e=p[11],g[12]={},g[12].x=500,g[12].y=500,g[12].size="large",s=g[12].is||"Card",r[12],"string"==typeof s){if(r[12]=n.components&&n.components[s]||r[s],!r[12])throw new Error('Component "Card" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[12]=s);if(p[12]=r[12].call(null,{props:g[12]},p[11],t),p[12][Symbol.for("slots")][0]?(e=p[12][Symbol.for("slots")][0],u=p[12],b=!0):e=p[12][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),e=p[0],h[13]={},p[13]=this.element({parent:e||"root"},!0===b?u:t),h[13].x=1e3,h[13].y=100,p[13].populate(h[13]),!0===b&&(x-=1),e=p[13],h[14]={},p[14]=this.element({parent:e||"root"},!0===b?u:t),h[14].content="Dynamic components",h[14].__textnode=!0,p[14].populate(h[14]),!0===b&&(x-=1),w[15]=n.components&&n.components.Component||r.Component,e=p[13],h[15]={},p[15]=this.element({parent:e||"root"},!0===b?u:t),h[15].is=t.dynamicComponent,h[15].y=100,h[15].color="0x0000ffff",v[15]=[],void 0!==w[15])for(var I in w[15][Symbol.for("config")].props)delete h[15][w[15][Symbol.for("config")].props[I]],v[15].push(w[15][Symbol.for("config")].props[I]);if(p[15].populate(h[15]),!0===b&&(x-=1),e=p[15],g[16]={},g[16].is=t.dynamicComponent,g[16].y=100,g[16].color="0x0000ffff",s=g[16].is||"Component",r[16],"string"==typeof s){if(r[16]=n.components&&n.components[s]||r[s],!r[16])throw new Error('Component "Component" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[16]=s);p[16]=r[16].call(null,{props:g[16]},p[15],t),p[16][Symbol.for("slots")][0]?(e=p[16][Symbol.for("slots")][0],u=p[16],b=!0):e=p[16][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),e=p[13],y[17]=[],m[17]=function(){var a=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,m=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),y=new Set,S=m.length,T={}||{};c=T.from||0,f="to"in T?T.to:m.length;for(;S--;)m[S],S<f&&S>=c&&y.add(""+S);for(var k=p.length;k--;)if(!1===y.has(p[k])){var C=p[k];a[17][C]&&a[17][C].destroy(),a[17][C]=null,delete a[17][C],a[18][C]&&a[18][C].destroy(),a[18][C]=null,delete a[18][C]}p.length=0;for(var A=m.length,E=[],I=function(){if(M<c||M>=f)return 1;var y=Object.create(t);if(e=a[13],y.bla=m[M],y.index=M,y.key=""+M,p.push(y.key),w[17]=n.components&&n.components.Component||r.Component,void 0===a[17]&&(a[17]={}),h[17]={},void 0===a[17][y.key]&&(a[17][y.key]=d.element({parent:e||"root"},!0===b?u:t)),h[17].is=y.bla,h[17].x=205*y.index,h[17].y=300,v[17]=[],void 0!==w[17])for(var S in w[17][Symbol.for("config")].props)delete h[17][w[17][Symbol.for("config")].props[S]],v[17].push(w[17][Symbol.for("config")].props[S]);if(void 0===a[17][y.key].nodeId&&(a[17][y.key].populate(h[17]),!0===b&&(x-=1)),void 0===a[18]&&(a[18]={}),e=a[17][y.key],g[18]={},void 0===a[18][y.key]){if(g[18].is=y.bla,l=205*y.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[18].x=l,g[18].y=300,s=g[18].is||"Component",r[18],"string"==typeof s){if(r[18]=n.components&&n.components[s]||r[s],!r[18])throw new Error('Component "Component" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[18]=s);a[18][y.key]=r[18].call(null,{props:g[18]},a[17][y.key],t),a[18][y.key][Symbol.for("slots")][0]?(e=a[18][y.key][Symbol.for("slots")][0],u=a[18][y.key],b=!0):e=a[18][y.key][Symbol.for("children")][0]}var T=function(){void 0!==v&&void 0!==v[17]&&-1!==v[17].indexOf("x")||a[17][y.key].set("x",205*y.index)};o(T,null),E.push(T),t[Symbol.for("effects")].push(T),a[18][y.key][Symbol.for("props")].x=205*y.index},M=0;M<A;M++)I();return E};var M=function(){m[17](t.dynamicComponents,p,y[17])};return t[Symbol.for("effects")].push(M),o(M,["dynamicComponents"]),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,w[1]=null,g[2]=null,r[2]=null,w[3]=null,g[4]=null,r[4]=null,w[5]=null,g[6]=null,r[6]=null,w[7]=null,g[8]=null,r[8]=null,w[9]=null,g[10]=null,r[10]=null,w[11]=null,g[12]=null,r[12]=null,w[15]=null,g[16]=null,r[16]=null,y[17].length=0,m[17]=null,w[17]=null,g[18]=null,r[18]=null,M=null,w.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[7]&&-1!==skips[7].indexOf("x")||t[7].set("x",{transition:e.x})},function(e,t,n,r,o,i){t[8][Symbol.for("props")].x={transition:e.x}}],context:{}},state:function(){return{x:100,dynamicComponent:Ii,dynamicComponents:["Square","Card","Square",Ii],toggle:!1,size:50}},hooks:{ready:function(){var e=this;this.$setInterval(function(){e.x=100===e.x?250:100,e.size=50===e.size?200:50},2e3)}}}),fa=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],da=Wo.Component("ForLoop",{components:{Square:la},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=[];h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),p[0].populate(h[0]),e=p[0],h[1]={},p[1]=this.element({parent:e||"root"},!0===b?u:t),h[1].y=20,p[1].populate(h[1]),e=p[1],y[2]=[],m[2]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,s=o.length,l={}||{};c=l.from||0,f="to"in l?l.to:o.length;for(;s--;)o[s],s<f&&s>=c&&a.add(""+s);for(var p=r.length;p--;)if(!1===a.has(r[p])){var m=r[p];n[2][m]&&n[2][m].destroy(),n[2][m]=null,delete n[2][m]}r.length=0;for(var g=o.length,y=0;y<g;y++)if(!(y<c||y>=f)){var v=Object.create(t);e=n[1],v.item=o[y],v[void 0]=y,v.key=""+y,r.push(v.key),e=n[1],void 0===n[2]&&(n[2]={}),h[2]={},void 0===n[2][v.key]&&(n[2][v.key]=d.element({parent:e||"root"},!0===b?u:t)),h[2].w=80,h[2].h=80,h[2].x=v.item,h[2].color="0x4d7c0fff",void 0===n[2][v.key].nodeId&&n[2][v.key].populate(h[2])}return[]};var w,S,T=function(){m[2](t.collection1,p,y[2])};t[Symbol.for("effects")].push(T),o(T,["collection1"]),e=p[0],h[3]={},p[3]=this.element({parent:e||"root"},!0===b?u:t),h[3].y=120,p[3].populate(h[3]),e=p[3],y[4]=[],m[4]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,l=a.length,c={}||{};w=c.from||0,S="to"in c?c.to:a.length;for(;l--;){var f=a[l];l<S&&l>=w&&s.add(""+f.id)}for(var p=r.length;p--;)if(!1===s.has(r[p])){var m=r[p];n[4][m]&&n[4][m].destroy(),n[4][m]=null,delete n[4][m]}r.length=0;for(var g=a.length,y=[],v=function(){if(x<w||x>=S)return 1;var i=Object.create(t);e=n[3],i.item=a[x],i.index=x,i.key=""+i.item.id,r.push(i.key),e=n[3],void 0===n[4]&&(n[4]={}),h[4]={},void 0===n[4][i.key]&&(n[4][i.key]=d.element({parent:e||"root"},!0===b?u:t)),h[4].w=80,h[4].h=80,h[4].x=i.item.x*i.index,h[4].color=i.item.color,void 0===n[4][i.key].nodeId&&n[4][i.key].populate(h[4]);var s=function(){n[4][i.key].set("x",i.item.x*i.index)};o(s,null),y.push(s),t[Symbol.for("effects")].push(s)},x=0;x<g;x++)v();return y};var k,C,A=function(){m[4](t.collection2,p,y[4])};t[Symbol.for("effects")].push(A),o(A,["collection2"]),e=p[0],h[5]={},p[5]=this.element({parent:e||"root"},!0===b?u:t),h[5].y=220,p[5].populate(h[5]),e=p[5],y[6]=[],m[6]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,l=a.length,c={}||{};k=c.from||0,C="to"in c?c.to:a.length;for(;l--;)a[l],l<C&&l>=k&&s.add(""+l);for(var f=r.length;f--;)if(!1===s.has(r[f])){var p=r[f];n[6][p]&&n[6][p].destroy(),n[6][p]=null,delete n[6][p]}r.length=0;for(var m=a.length,g=[],y=function(){if(v<k||v>=C)return 1;var i=Object.create(t);e=n[5],i.item=a[v],i[void 0]=v,i.key=""+v,r.push(i.key),e=n[5],void 0===n[6]&&(n[6]={}),h[6]={},void 0===n[6][i.key]&&(n[6][i.key]=d.element({parent:e||"root"},!0===b?u:t)),h[6].w=80,h[6].h=80,h[6].x=i.item.x,h[6].color=i.item.color,void 0===n[6][i.key].nodeId&&n[6][i.key].populate(h[6]);var s=function(){n[6][i.key].set("x",i.item.x)};o(s,null),g.push(s),t[Symbol.for("effects")].push(s)},v=0;v<m;v++)y();return g};var E,I,M=function(){m[6](t.collection3,p,y[6])};t[Symbol.for("effects")].push(M),o(M,["collection3"]),e=p[0],h[7]={},p[7]=this.element({parent:e||"root"},!0===b?u:t),h[7].y=320,p[7].populate(h[7]),e=p[7],y[8]=[],m[8]=function(){var a=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,f=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),p=new Set,m=f.length,y={}||{};E=y.from||0,I="to"in y?y.to:f.length;for(;m--;)f[m],m<I&&m>=E&&p.add(""+m);for(var w=c.length;w--;)if(!1===p.has(c[w])){var S=c[w];a[8][S]&&a[8][S].destroy(),a[8][S]=null,delete a[8][S],a[9][S]&&a[9][S].destroy(),a[9][S]=null,delete a[9][S]}c.length=0;for(var T=f.length,k=[],C=function(){if(A<E||A>=I)return 1;var p=Object.create(t);if(e=a[7],p.item=f[A],p.index=A,p.key=""+A,c.push(p.key),x[8]=n.components&&n.components.Square||r.Square,void 0===a[8]&&(a[8]={}),h[8]={},void 0===a[8][p.key]&&(a[8][p.key]=d.element({parent:e||"root"},!0===b?u:t)),h[8].x=p.item.x*p.index,h[8].ref="square"+p.index,h[8].alpha=p.alpha,v[8]=[],void 0!==x[8])for(var m in x[8][Symbol.for("config")].props)delete h[8][x[8][Symbol.for("config")].props[m]],v[8].push(x[8][Symbol.for("config")].props[m]);if(void 0===a[8][p.key].nodeId&&a[8][p.key].populate(h[8]),void 0===a[9]&&(a[9]={}),e=a[8][p.key],g[9]={},void 0===a[9][p.key]){if(l=p.item.x*p.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[9].x=l,l="square"+p.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[9].ref=l,l=p.alpha,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[9].alpha=l,s=g[9].is||"Square",r[9],"string"==typeof s){if(r[9]=n.components&&n.components[s]||r[s],!r[9])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[9]=s);a[9][p.key]=r[9].call(null,{props:g[9]},a[8][p.key],t),a[9][p.key][Symbol.for("slots")][0]?(e=a[9][p.key][Symbol.for("slots")][0],u=a[9][p.key],b=!0):e=a[9][p.key][Symbol.for("children")][0]}var y=function(){void 0!==v&&void 0!==v[8]&&-1!==v[8].indexOf("x")||a[8][p.key].set("x",p.item.x*p.index)};o(y,null),k.push(y),t[Symbol.for("effects")].push(y);var w=function(){void 0!==v&&void 0!==v[8]&&-1!==v[8].indexOf("ref")||a[8][p.key].set("ref","square"+p.index)};o(w,null),k.push(w),t[Symbol.for("effects")].push(w),a[9][p.key][Symbol.for("props")].x=p.item.x*p.index,a[9][p.key][Symbol.for("props")].ref="square"+p.index},A=0;A<T;A++)C();return k};var R=function(){m[8](t.collection2,p,y[8])};t[Symbol.for("effects")].push(R),o(R,["collection2"]);var _=function(){t.alpha;for(var e=0;e<t.collection2.length;e++)if(!(e<E||e>=I)){var n={};n.index=e,n.item=t.collection2[e],n.key=e,void 0!==v&&void 0!==v[8]&&-1!==v[8].indexOf("alpha")||p[8][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(_),o(_);var L,P,D=function(){t.alpha;for(var e=0;e<t.collection2.length;e++)if(!(e<E||e>=I)){var n={};n.index=e,n.item=t.collection2[e],n.key=e,p[9][n.key][Symbol.for("props")].alpha=t.alpha}};t[Symbol.for("effects")].push(D),o(D),e=p[0],h[10]={},p[10]=this.element({parent:e||"root"},!0===b?u:t),h[10].y=420,p[10].populate(h[10]),e=p[10],y[11]=[],m[11]=function(){var a=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,f=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),p=new Set,m=f.length,y={}||{};L=y.from||0,P="to"in y?y.to:f.length;for(;m--;){var w=f[m];m<P&&m>=L&&p.add(""+w.color)}for(var S=c.length;S--;)if(!1===p.has(c[S])){var T=c[S];a[11][T]&&a[11][T].destroy(),a[11][T]=null,delete a[11][T],a[12][T]&&a[12][T].destroy(),a[12][T]=null,delete a[12][T]}c.length=0;for(var k=f.length,C=[],A=function(){if(E<L||E>=P)return 1;var p=Object.create(t);if(e=a[10],p.item=f[E],p[void 0]=E,p.key=""+p.item.color,c.push(p.key),x[11]=n.components&&n.components.Square||r.Square,void 0===a[11]&&(a[11]={}),h[11]={},void 0===a[11][p.key]&&(a[11][p.key]=d.element({parent:e||"root"},!0===b?u:t)),h[11].x=p.item.x,h[11].alpha=p.alpha,v[11]=[],void 0!==x[11])for(var m in x[11][Symbol.for("config")].props)delete h[11][x[11][Symbol.for("config")].props[m]],v[11].push(x[11][Symbol.for("config")].props[m]);if(void 0===a[11][p.key].nodeId&&a[11][p.key].populate(h[11]),void 0===a[12]&&(a[12]={}),e=a[11][p.key],g[12]={},void 0===a[12][p.key]){if(l=p.item.x,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[12].x=l,l=p.alpha,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[12].alpha=l,s=g[12].is||"Square",r[12],"string"==typeof s){if(r[12]=n.components&&n.components[s]||r[s],!r[12])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[12]=s);a[12][p.key]=r[12].call(null,{props:g[12]},a[11][p.key],t),a[12][p.key][Symbol.for("slots")][0]?(e=a[12][p.key][Symbol.for("slots")][0],u=a[12][p.key],b=!0):e=a[12][p.key][Symbol.for("children")][0]}var y=function(){void 0!==v&&void 0!==v[11]&&-1!==v[11].indexOf("x")||a[11][p.key].set("x",p.item.x)};o(y,null),C.push(y),t[Symbol.for("effects")].push(y),a[12][p.key][Symbol.for("props")].x=p.item.x},E=0;E<k;E++)A();return C};var O=function(){m[11](t.collection3,p,y[11])};t[Symbol.for("effects")].push(O),o(O,["collection3"]);var N=function(){t.alpha;for(var e=0;e<t.collection3.length;e++)if(!(e<L||e>=P)){var n={};n[void 0]=e,n.item=t.collection3[e],n.key=n.item.color,void 0!==v&&void 0!==v[11]&&-1!==v[11].indexOf("alpha")||p[11][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(N),o(N);var U,B,j=function(){t.alpha;for(var e=0;e<t.collection3.length;e++)if(!(e<L||e>=P)){var n={};n[void 0]=e,n.item=t.collection3[e],n.key=n.item.color,p[12][n.key][Symbol.for("props")].alpha=t.alpha}};t[Symbol.for("effects")].push(j),o(j),e=p[0],h[13]={},p[13]=this.element({parent:e||"root"},!0===b?u:t),h[13].y=520,p[13].populate(h[13]),e=p[13],y[14]=[],m[14]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,s=o.length,l={}||{};U=l.from||0,B="to"in l?l.to:o.length;for(;s--;)o[s],s<B&&s>=U&&a.add(""+s);for(var c=r.length;c--;)if(!1===a.has(r[c])){var f=r[c];n[14][f]&&n[14][f].destroy(),n[14][f]=null,delete n[14][f]}r.length=0;for(var p=o.length,m=0;m<p;m++)if(!(m<U||m>=B)){var g=Object.create(t);e=n[13],g.item=o[m],g[void 0]=m,g.key=""+m,r.push(g.key),e=n[13],void 0===n[14]&&(n[14]={}),h[14]={},void 0===n[14][g.key]&&(n[14][g.key]=d.element({parent:e||"root"},!0===b?u:t)),h[14].w=80,h[14].h=80,h[14].x=g.item,h[14].color="0xeab308ff",h[14].alpha=g.alpha,void 0===n[14][g.key].nodeId&&n[14][g.key].populate(h[14])}return[]};var F=function(){m[14](t.collection1,p,y[14])};t[Symbol.for("effects")].push(F),o(F,["collection1"]);var z=function(){t.item;for(var e=0;e<t.collection1.length;e++)if(!(e<U||e>=B)){var n={};n[void 0]=e,n.item=t.collection1[e],n.key=e,p[14][n.key].set("x",n.item)}};t[Symbol.for("effects")].push(z),o(z);var V,H,G=function(){t.alpha;for(var e=0;e<t.collection1.length;e++)if(!(e<U||e>=B)){var n={};n[void 0]=e,n.item=t.collection1[e],n.key=e,p[14][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(G),o(G),e=p[0],h[15]={},p[15]=this.element({parent:e||"root"},!0===b?u:t),h[15].y=620,p[15].populate(h[15]),e=p[15],y[16]=[],m[16]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,l=a.length,c={}||{};V=c.from||0,H="to"in c?c.to:a.length;for(;l--;){var f=a[l];l<H&&l>=V&&s.add(""+f.id)}for(var p=r.length;p--;)if(!1===s.has(r[p])){var m=r[p];n[16][m]&&n[16][m].destroy(),n[16][m]=null,delete n[16][m]}r.length=0;for(var g=a.length,y=[],v=function(){if(x<V||x>=H)return 1;var i=Object.create(t);e=n[15],i.item=a[x],i[void 0]=x,i.key=""+i.item.id,r.push(i.key),e=n[15],void 0===n[16]&&(n[16]={}),h[16]={},void 0===n[16][i.key]&&(n[16][i.key]=d.element({parent:e||"root"},!0===b?u:t)),h[16].w=80,h[16].h=80,h[16].x=i.item.x,h[16].color=i.item.color,h[16].alpha=i.alpha,void 0===n[16][i.key].nodeId&&n[16][i.key].populate(h[16]);var s=function(){n[16][i.key].set("x",i.item.x)};o(s,null),y.push(s),t[Symbol.for("effects")].push(s)},x=0;x<g;x++)v();return y};var q=function(){m[16](t.collection2,p,y[16])};t[Symbol.for("effects")].push(q),o(q,["collection2"]);var W,K,X=function(){t.alpha;for(var e=0;e<t.collection2.length;e++)if(!(e<V||e>=H)){var n={};n[void 0]=e,n.item=t.collection2[e],n.key=n.item.id,p[16][n.key].set("alpha",t.alpha)}};t[Symbol.for("effects")].push(X),o(X),e=p[0],h[17]={},p[17]=this.element({parent:e||"root"},!0===b?u:t),h[17].y=720,p[17].populate(h[17]),e=p[17],y[18]=[],m[18]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,l=a.length,c={}||{};W=c.from||0,K="to"in c?c.to:a.length;for(;l--;){var f=a[l];l<K&&l>=W&&s.add(""+f.id)}for(var p=r.length;p--;)if(!1===s.has(r[p])){var m=r[p];n[18][m]&&n[18][m].destroy(),n[18][m]=null,delete n[18][m]}r.length=0;for(var g=a.length,y=[],v=function(){if(x<W||x>=K)return 1;var i=Object.create(t);e=n[17],i.item=a[x],i[void 0]=x,i.key=""+i.item.id,r.push(i.key),e=n[17],void 0===n[18]&&(n[18]={}),h[18]={},void 0===n[18][i.key]&&(n[18][i.key]=d.element({parent:e||"root"},!0===b?u:t)),h[18].w=80,h[18].h=80,h[18].x=i.item.x,h[18].color="0x06b6d4ff",void 0===n[18][i.key].nodeId&&n[18][i.key].populate(h[18]);var s=function(){n[18][i.key].set("x",i.item.x)};o(s,null),y.push(s),t[Symbol.for("effects")].push(s)},x=0;x<g;x++)v();return y};var $,Y,J=function(){m[18](t.collection4,p,y[18])};t[Symbol.for("effects")].push(J),o(J,["collection4"]),e=p[0],h[19]={},p[19]=this.element({parent:e||"root"},!0===b?u:t),h[19].y=720,h[19].x=700,p[19].populate(h[19]),e=p[19],y[20]=[],m[20]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,l=a.length,c={}||{};$=c.from||0,Y="to"in c?c.to:a.length;for(;l--;)a[l],l<Y&&l>=$&&s.add(""+l);for(var f=r.length;f--;)if(!1===s.has(r[f])){var p=r[f];n[20][p]&&n[20][p].destroy(),n[20][p]=null,delete n[20][p]}r.length=0;for(var m=a.length,g=[],y=function(){if(v<$||v>=Y)return 1;var i=Object.create(t);e=n[19],i.item=a[v],i[void 0]=v,i.key=""+v,r.push(i.key),e=n[19],void 0===n[20]&&(n[20]={}),h[20]={},void 0===n[20][i.key]&&(n[20][i.key]=d.element({parent:e||"root"},!0===b?u:t)),h[20].w=80,h[20].h=80,h[20].x=i.item.x,h[20].color="0x8b5cf6ff",void 0===n[20][i.key].nodeId&&n[20][i.key].populate(h[20]);var s=function(){n[20][i.key].set("x",i.item.x)};o(s,null),g.push(s),t[Symbol.for("effects")].push(s)},v=0;v<m;v++)y();return g};var Q,Z,ee=function(){m[20](t.collection4,p,y[20])};t[Symbol.for("effects")].push(ee),o(ee,["collection4"]),e=p[0],h[21]={},p[21]=this.element({parent:e||"root"},!0===b?u:t),h[21].y=920,p[21].populate(h[21]),e=p[21],y[22]=[],m[22]=function(){var a=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,f=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),p=new Set,m=f.length,y={}||{};Q=y.from||0,Z="to"in y?y.to:f.length;for(;m--;){var w=f[m];m<Z&&m>=Q&&p.add(""+w.id)}for(var S=c.length;S--;)if(!1===p.has(c[S])){var T=c[S];a[22][T]&&a[22][T].destroy(),a[22][T]=null,delete a[22][T],a[23][T]&&a[23][T].destroy(),a[23][T]=null,delete a[23][T]}c.length=0;for(var k=f.length,C=[],A=function(){if(E<Q||E>=Z)return 1;var p=Object.create(t);if(e=a[21],p.item=f[E],p[void 0]=E,p.key=""+p.item.id,c.push(p.key),x[22]=n.components&&n.components.Square||r.Square,void 0===a[22]&&(a[22]={}),h[22]={},void 0===a[22][p.key]&&(a[22][p.key]=d.element({parent:e||"root"},!0===b?u:t)),h[22].w=80,h[22].h=80,h[22].x=p.item.x,v[22]=[],void 0!==x[22])for(var m in x[22][Symbol.for("config")].props)delete h[22][x[22][Symbol.for("config")].props[m]],v[22].push(x[22][Symbol.for("config")].props[m]);if(void 0===a[22][p.key].nodeId&&a[22][p.key].populate(h[22]),void 0===a[23]&&(a[23]={}),e=a[22][p.key],g[23]={},void 0===a[23][p.key]){if(g[23].w=80,g[23].h=80,l=p.item.x,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[23].x=l,s=g[23].is||"Square",r[23],"string"==typeof s){if(r[23]=n.components&&n.components[s]||r[s],!r[23])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[23]=s);a[23][p.key]=r[23].call(null,{props:g[23]},a[22][p.key],t),a[23][p.key][Symbol.for("slots")][0]?(e=a[23][p.key][Symbol.for("slots")][0],u=a[23][p.key],b=!0):e=a[23][p.key][Symbol.for("children")][0]}var y=function(){void 0!==v&&void 0!==v[22]&&-1!==v[22].indexOf("x")||a[22][p.key].set("x",p.item.x)};o(y,null),C.push(y),t[Symbol.for("effects")].push(y),a[23][p.key][Symbol.for("props")].x=p.item.x},E=0;E<k;E++)A();return C};var te,ne,re=function(){m[22](t.collection4,p,y[22])};t[Symbol.for("effects")].push(re),o(re,["collection4"]),e=p[0],h[24]={},p[24]=this.element({parent:e||"root"},!0===b?u:t),h[24].y=920,h[24].x=700,p[24].populate(h[24]),e=p[24],y[25]=[],m[25]=function(){var a=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,f=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),p=new Set,m=f.length,y={}||{};te=y.from||0,ne="to"in y?y.to:f.length;for(;m--;)f[m],m<ne&&m>=te&&p.add(""+m);for(var w=c.length;w--;)if(!1===p.has(c[w])){var S=c[w];a[25][S]&&a[25][S].destroy(),a[25][S]=null,delete a[25][S],a[26][S]&&a[26][S].destroy(),a[26][S]=null,delete a[26][S]}c.length=0;for(var T=f.length,k=[],C=function(){if(A<te||A>=ne)return 1;var p=Object.create(t);if(e=a[24],p.item=f[A],p[void 0]=A,p.key=""+A,c.push(p.key),x[25]=n.components&&n.components.Square||r.Square,void 0===a[25]&&(a[25]={}),h[25]={},void 0===a[25][p.key]&&(a[25][p.key]=d.element({parent:e||"root"},!0===b?u:t)),h[25].w=80,h[25].h=80,h[25].x=p.item.x,v[25]=[],void 0!==x[25])for(var m in x[25][Symbol.for("config")].props)delete h[25][x[25][Symbol.for("config")].props[m]],v[25].push(x[25][Symbol.for("config")].props[m]);if(void 0===a[25][p.key].nodeId&&a[25][p.key].populate(h[25]),void 0===a[26]&&(a[26]={}),e=a[25][p.key],g[26]={},void 0===a[26][p.key]){if(g[26].w=80,g[26].h=80,l=p.item.x,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[26].x=l,s=g[26].is||"Square",r[26],"string"==typeof s){if(r[26]=n.components&&n.components[s]||r[s],!r[26])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[26]=s);a[26][p.key]=r[26].call(null,{props:g[26]},a[25][p.key],t),a[26][p.key][Symbol.for("slots")][0]?(e=a[26][p.key][Symbol.for("slots")][0],u=a[26][p.key],b=!0):e=a[26][p.key][Symbol.for("children")][0]}var y=function(){void 0!==v&&void 0!==v[25]&&-1!==v[25].indexOf("x")||a[25][p.key].set("x",p.item.x)};o(y,null),k.push(y),t[Symbol.for("effects")].push(y),a[26][p.key][Symbol.for("props")].x=p.item.x},A=0;A<T;A++)C();return k};var oe=function(){m[25](t.collection4,p,y[25])};return t[Symbol.for("effects")].push(oe),o(oe,["collection4"]),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,y[2].length=0,m[2]=null,T=null,y[4].length=0,m[4]=null,A=null,y[6].length=0,m[6]=null,M=null,y[8].length=0,m[8]=null,x[8]=null,g[9]=null,r[9]=null,R=null,_=null,D=null,y[11].length=0,m[11]=null,x[11]=null,g[12]=null,r[12]=null,O=null,N=null,j=null,y[14].length=0,m[14]=null,F=null,z=null,G=null,y[16].length=0,m[16]=null,q=null,X=null,y[18].length=0,m[18]=null,J=null,y[20].length=0,m[20]=null,ee=null,y[22].length=0,m[22]=null,x[22]=null,g[23]=null,r[23]=null,re=null,y[25].length=0,m[25]=null,x[25]=null,g[26]=null,r[26]=null,oe=null,x.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[],context:{}},state:function(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:fa[0]},{id:"block2",x:100,color:fa[1]},{id:"block3",x:200,color:fa[2]},{id:"block4",x:300,color:fa[3]},{id:"block5",x:400,color:fa[4]},{id:"block6",x:500,color:fa[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready:function(){var e=this;this.$setTimeout(function(){e.collection2[0].color=fa[5],e.collection2[1].color=fa[4],e.collection2[2].color=fa[3],e.collection2[3].color=fa[2],e.collection2[4].color=fa[1],e.collection2[5].color=fa[0]},4e3);var t=0,n=this.$setInterval(function(){e.collection3.push({x:100*t,color:fa[t]}),++t===fa.length&&clearInterval(n)},1e3);this.$setInterval(function(){e.alpha=.5===e.alpha?1:.5},800),this.$setTimeout(function(){e.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),pa=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],ha=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],ma=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],ga=function(e){return Math.round(1e3*Math.random())%e},ya=0,va=function(){return{id:ya++,text:"".concat(pa[ga(pa.length)]," ").concat(ha[ga(ha.length)]," ").concat(ma[ga(ma.length)])}},ba=Wo.Component("LegendItem",{code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),u[0].populate(c[0]),!0===p&&(h-=1),m[1]=n.components&&n.components.Circle||r.Circle,e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].color="0xfb923cff",c[1].size=60,d[1]=[],void 0!==m[1])for(var g in m[1][Symbol.for("config")].props)delete c[1][m[1][Symbol.for("config")].props[g]],d[1].push(m[1][Symbol.for("config")].props[g]);if(u[1].populate(c[1]),!0===p&&(h-=1),e=u[1],f[2]={},f[2].color="0xfb923cff",f[2].size=60,s=f[2].is||"Circle",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Circle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);return u[2]=r[2].call(null,{props:f[2]},u[1],t),u[2][Symbol.for("slots")][0]?(e=u[2][Symbol.for("slots")][0],l=u[2],p=!0):e=u[2][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].color="0xe5e5e5ff",c[3].size=32,c[3].y=10,c[3].maxwidth=57,c[3].align="center",c[3].content=""+t.id,c[3].__textnode=!0,u[3].populate(c[3]),!0===p&&(h-=1),e=u[0],c[4]={},u[4]=this.element({parent:e||"root"},!0===p?l:t),c[4].color="0xe5e5e5ff",c[4].x=80,c[4].y=14,c[4].size=28,c[4].content=""+t.text,c[4].__textnode=!0,u[4].populate(c[4]),!0===p&&(h-=1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[1]=null,f[2]=null,r[2]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[],context:{}},props:["id","text"]}),xa=Wo.Component("Row",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=380,l[0].h=60,l[0].y=80*t.index,l[0].color="0xfff7edff",s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=10,l[1].h=60,l[1].color="0x06b6d4ff",s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].content=t.text,l[2].x=30,l[2].y=15,l[2].font="lato",l[2].size=28,l[2].color=t.activeRow==t.index?"0x06b6d4ff":"0x1e293bff",l[2].__textnode=!0,s[2].populate(l[2]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("y",80*e.index)},function(e,t,n,r,o,i){t[2].set("content",e.text)},function(e,t,n,r,o,i){t[2].set("color",e.activeRow==e.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),wa=Wo.Component("Rows",{components:{Row:xa},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=[];h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),p[0].populate(h[0]),e=p[0],y[1]=[],m[1]=function(){var a=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,m=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),y=new Set,w=m.length,S={}||{};c=S.from||0,f="to"in S?S.to:m.length;for(;w--;){var T=m[w];w<f&&w>=c&&y.add(T.id+"key2")}for(var k=p.length;k--;)if(!1===y.has(p[k])){var C=p[k];a[1][C]&&a[1][C].destroy(),a[1][C]=null,delete a[1][C],a[2][C]&&a[2][C].destroy(),a[2][C]=null,delete a[2][C]}p.length=0;for(var A=m.length,E=[],I=function(){if(M<c||M>=f)return 1;var y=Object.create(t);if(e=a[0],y.item=m[M],y.index=M,y.key=y.item.id+"key2",p.push(y.key),x[1]=n.components&&n.components.Row||r.Row,void 0===a[1]&&(a[1]={}),h[1]={},void 0===a[1][y.key]&&(a[1][y.key]=d.element({parent:e||"root"},!0===b?u:t)),h[1].activeRow=y.activeRowIndex,h[1].index=y.index,h[1].text=y.item.text,h[1].y=50,v[1]=[],void 0!==x[1])for(var w in x[1][Symbol.for("config")].props)delete h[1][x[1][Symbol.for("config")].props[w]],v[1].push(x[1][Symbol.for("config")].props[w]);if(void 0===a[1][y.key].nodeId&&a[1][y.key].populate(h[1]),void 0===a[2]&&(a[2]={}),e=a[1][y.key],g[2]={},void 0===a[2][y.key]){if(l=y.activeRowIndex,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[2].activeRow=l,l=y.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[2].index=l,l=y.item.text,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[2].text=l,g[2].y=50,s=g[2].is||"Row",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Row" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);a[2][y.key]=r[2].call(null,{props:g[2]},a[1][y.key],t),a[2][y.key][Symbol.for("slots")][0]?(e=a[2][y.key][Symbol.for("slots")][0],u=a[2][y.key],b=!0):e=a[2][y.key][Symbol.for("children")][0]}var S=function(){void 0!==v&&void 0!==v[1]&&-1!==v[1].indexOf("index")||a[1][y.key].set("index",y.index)};o(S,null),E.push(S),t[Symbol.for("effects")].push(S);var T=function(){void 0!==v&&void 0!==v[1]&&-1!==v[1].indexOf("text")||a[1][y.key].set("text",y.item.text)};o(T,null),E.push(T),t[Symbol.for("effects")].push(T),a[2][y.key][Symbol.for("props")].index=y.index,a[2][y.key][Symbol.for("props")].text=y.item.text},M=0;M<A;M++)I();return E};var w=function(){m[1](t.data,p,y[1])};t[Symbol.for("effects")].push(w),o(w,["data"]);var S=function(){t.activeRowIndex;for(var e=0;e<t.data.length;e++)if(!(e<c||e>=f)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",void 0!==v&&void 0!==v[1]&&-1!==v[1].indexOf("activeRow")||p[1][n.key].set("activeRow",t.activeRowIndex)}};t[Symbol.for("effects")].push(S),o(S);var T=function(){t.activeRowIndex;for(var e=0;e<t.data.length;e++)if(!(e<c||e>=f)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",p[2][n.key][Symbol.for("props")].activeRow=t.activeRowIndex}};return t[Symbol.for("effects")].push(T),o(T),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,y[1].length=0,m[1]=null,x[1]=null,g[2]=null,r[2]=null,w=null,S=null,T=null,x.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[],context:{}},props:["data","activeRowIndex"]}),Sa=Wo.Component("ForLoop",{components:{Square:la,LegendItem:ba,Row:xa,Rows:wa},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=0,w=[];if(h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),p[0].populate(h[0]),!0===b&&(x-=1),e=p[0],h[1]={},p[1]=this.element({parent:e||"root"},!0===b?u:t),h[1].x=100,h[1].y=60,h[1].size=48,h[1].content="Array operations test",h[1].__textnode=!0,p[1].populate(h[1]),!0===b&&(x-=1),e=p[0],h[2]={},p[2]=this.element({parent:e||"root"},!0===b?u:t),h[2].y=170,h[2].x=140,p[2].populate(h[2]),!0===b&&(x-=1),e=p[2],h[3]={},p[3]=this.element({parent:e||"root"},!0===b?u:t),h[3].x="-10",h[3].w=500,h[3].h=80,h[3].color="0x64748bff",h[3].y={transition:t.y},h[3].alpha={transition:!t.hide},p[3].populate(h[3]),!0===b&&(x-=1),w[4]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[4]={},p[4]=this.element({parent:e||"root"},!0===b?u:t),h[4].y=0,h[4].id="a",h[4].text="Fill array by assignment",v[4]=[],void 0!==w[4])for(var S in w[4][Symbol.for("config")].props)delete h[4][w[4][Symbol.for("config")].props[S]],v[4].push(w[4][Symbol.for("config")].props[S]);if(p[4].populate(h[4]),!0===b&&(x-=1),e=p[4],g[5]={},g[5].y=0,g[5].id="a",g[5].text="Fill array by assignment",s=g[5].is||"LegendItem",r[5],"string"==typeof s){if(r[5]=n.components&&n.components[s]||r[s],!r[5])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[5]=s);if(p[5]=r[5].call(null,{props:g[5]},p[4],t),p[5][Symbol.for("slots")][0]?(e=p[5][Symbol.for("slots")][0],u=p[5],b=!0):e=p[5][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[6]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[6]={},p[6]=this.element({parent:e||"root"},!0===b?u:t),h[6].y=90,h[6].id="b",h[6].text="Push new item to array",v[6]=[],void 0!==w[6])for(var T in w[6][Symbol.for("config")].props)delete h[6][w[6][Symbol.for("config")].props[T]],v[6].push(w[6][Symbol.for("config")].props[T]);if(p[6].populate(h[6]),!0===b&&(x-=1),e=p[6],g[7]={},g[7].y=90,g[7].id="b",g[7].text="Push new item to array",s=g[7].is||"LegendItem",r[7],"string"==typeof s){if(r[7]=n.components&&n.components[s]||r[s],!r[7])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[7]=s);if(p[7]=r[7].call(null,{props:g[7]},p[6],t),p[7][Symbol.for("slots")][0]?(e=p[7][Symbol.for("slots")][0],u=p[7],b=!0):e=p[7][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[8]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[8]={},p[8]=this.element({parent:e||"root"},!0===b?u:t),h[8].y=180,h[8].id="c",h[8].text="Pop item from array",v[8]=[],void 0!==w[8])for(var k in w[8][Symbol.for("config")].props)delete h[8][w[8][Symbol.for("config")].props[k]],v[8].push(w[8][Symbol.for("config")].props[k]);if(p[8].populate(h[8]),!0===b&&(x-=1),e=p[8],g[9]={},g[9].y=180,g[9].id="c",g[9].text="Pop item from array",s=g[9].is||"LegendItem",r[9],"string"==typeof s){if(r[9]=n.components&&n.components[s]||r[s],!r[9])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[9]=s);if(p[9]=r[9].call(null,{props:g[9]},p[8],t),p[9][Symbol.for("slots")][0]?(e=p[9][Symbol.for("slots")][0],u=p[9],b=!0):e=p[9][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[10]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[10]={},p[10]=this.element({parent:e||"root"},!0===b?u:t),h[10].y=270,h[10].id="d",h[10].text="Shift item from array",v[10]=[],void 0!==w[10])for(var C in w[10][Symbol.for("config")].props)delete h[10][w[10][Symbol.for("config")].props[C]],v[10].push(w[10][Symbol.for("config")].props[C]);if(p[10].populate(h[10]),!0===b&&(x-=1),e=p[10],g[11]={},g[11].y=270,g[11].id="d",g[11].text="Shift item from array",s=g[11].is||"LegendItem",r[11],"string"==typeof s){if(r[11]=n.components&&n.components[s]||r[s],!r[11])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[11]=s);if(p[11]=r[11].call(null,{props:g[11]},p[10],t),p[11][Symbol.for("slots")][0]?(e=p[11][Symbol.for("slots")][0],u=p[11],b=!0):e=p[11][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[12]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[12]={},p[12]=this.element({parent:e||"root"},!0===b?u:t),h[12].y=360,h[12].id="e",h[12].text="Splice 2 items from array",v[12]=[],void 0!==w[12])for(var A in w[12][Symbol.for("config")].props)delete h[12][w[12][Symbol.for("config")].props[A]],v[12].push(w[12][Symbol.for("config")].props[A]);if(p[12].populate(h[12]),!0===b&&(x-=1),e=p[12],g[13]={},g[13].y=360,g[13].id="e",g[13].text="Splice 2 items from array",s=g[13].is||"LegendItem",r[13],"string"==typeof s){if(r[13]=n.components&&n.components[s]||r[s],!r[13])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[13]=s);if(p[13]=r[13].call(null,{props:g[13]},p[12],t),p[13][Symbol.for("slots")][0]?(e=p[13][Symbol.for("slots")][0],u=p[13],b=!0):e=p[13][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[14]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[14]={},p[14]=this.element({parent:e||"root"},!0===b?u:t),h[14].y=450,h[14].id="f",h[14].text="Unshift 2 items into array",v[14]=[],void 0!==w[14])for(var E in w[14][Symbol.for("config")].props)delete h[14][w[14][Symbol.for("config")].props[E]],v[14].push(w[14][Symbol.for("config")].props[E]);if(p[14].populate(h[14]),!0===b&&(x-=1),e=p[14],g[15]={},g[15].y=450,g[15].id="f",g[15].text="Unshift 2 items into array",s=g[15].is||"LegendItem",r[15],"string"==typeof s){if(r[15]=n.components&&n.components[s]||r[s],!r[15])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[15]=s);if(p[15]=r[15].call(null,{props:g[15]},p[14],t),p[15][Symbol.for("slots")][0]?(e=p[15][Symbol.for("slots")][0],u=p[15],b=!0):e=p[15][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[16]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[16]={},p[16]=this.element({parent:e||"root"},!0===b?u:t),h[16].y=540,h[16].id="g",h[16].text="Empty array by assignment",v[16]=[],void 0!==w[16])for(var I in w[16][Symbol.for("config")].props)delete h[16][w[16][Symbol.for("config")].props[I]],v[16].push(w[16][Symbol.for("config")].props[I]);if(p[16].populate(h[16]),!0===b&&(x-=1),e=p[16],g[17]={},g[17].y=540,g[17].id="g",g[17].text="Empty array by assignment",s=g[17].is||"LegendItem",r[17],"string"==typeof s){if(r[17]=n.components&&n.components[s]||r[s],!r[17])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[17]=s);if(p[17]=r[17].call(null,{props:g[17]},p[16],t),p[17][Symbol.for("slots")][0]?(e=p[17][Symbol.for("slots")][0],u=p[17],b=!0):e=p[17][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[18]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[18]={},p[18]=this.element({parent:e||"root"},!0===b?u:t),h[18].y=630,h[18].id="h",h[18].text="Concat an array with items",v[18]=[],void 0!==w[18])for(var M in w[18][Symbol.for("config")].props)delete h[18][w[18][Symbol.for("config")].props[M]],v[18].push(w[18][Symbol.for("config")].props[M]);if(p[18].populate(h[18]),!0===b&&(x-=1),e=p[18],g[19]={},g[19].y=630,g[19].id="h",g[19].text="Concat an array with items",s=g[19].is||"LegendItem",r[19],"string"==typeof s){if(r[19]=n.components&&n.components[s]||r[s],!r[19])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[19]=s);if(p[19]=r[19].call(null,{props:g[19]},p[18],t),p[19][Symbol.for("slots")][0]?(e=p[19][Symbol.for("slots")][0],u=p[19],b=!0):e=p[19][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),w[20]=n.components&&n.components.LegendItem||r.LegendItem,e=p[2],h[20]={},p[20]=this.element({parent:e||"root"},!0===b?u:t),h[20].y=720,h[20].id="i",h[20].text="Sort array alphabetically",v[20]=[],void 0!==w[20])for(var R in w[20][Symbol.for("config")].props)delete h[20][w[20][Symbol.for("config")].props[R]],v[20].push(w[20][Symbol.for("config")].props[R]);if(p[20].populate(h[20]),!0===b&&(x-=1),e=p[20],g[21]={},g[21].y=720,g[21].id="i",g[21].text="Sort array alphabetically",s=g[21].is||"LegendItem",r[21],"string"==typeof s){if(r[21]=n.components&&n.components[s]||r[s],!r[21])throw new Error('Component "LegendItem" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[21]=s);p[21]=r[21].call(null,{props:g[21]},p[20],t),p[21][Symbol.for("slots")][0]?(e=p[21][Symbol.for("slots")][0],u=p[21],b=!0):e=p[21][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),e=p[2],h[22]={},p[22]=this.element({parent:e||"root"},!0===b?u:t),h[22].y=840,p[22].populate(h[22]),!0===b&&(x-=1),e=p[22],h[23]={},p[23]=this.element({parent:e||"root"},!0===b?u:t),h[23].size=26,h[23].y=10,h[23].content="Array length:",h[23].__textnode=!0,p[23].populate(h[23]),!0===b&&(x-=1),e=p[22],h[24]={},p[24]=this.element({parent:e||"root"},!0===b?u:t),h[24].content=t.data.length,h[24].size=40,h[24].x=180,h[24].color="0xfb923cff",h[24].__textnode=!0,p[24].populate(h[24]),!0===b&&(x-=1),e=p[0],h[25]={},p[25]=this.element({parent:e||"root"},!0===b?u:t),h[25].x=660,h[25].y=100,p[25].populate(h[25]),!0===b&&(x-=1),e=p[25],h[26]={},p[26]=this.element({parent:e||"root"},!0===b?u:t),h[26].content="For loop on Element",h[26].__textnode=!0,p[26].populate(h[26]),!0===b&&(x-=1),e=p[25],y[27]=[],m[27]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),s=new Set,l=a.length,p={}||{};c=p.from||0,f="to"in p?p.to:a.length;for(;l--;){var m=a[l];l<f&&l>=c&&s.add(m.id+"key")}for(var g=r.length;g--;)if(!1===s.has(r[g])){var y=r[g];n[27][y]&&n[27][y].destroy(),n[27][y]=null,delete n[27][y],n[28][y]&&n[28][y].destroy(),n[28][y]=null,delete n[28][y],n[29][y]&&n[29][y].destroy(),n[29][y]=null,delete n[29][y]}r.length=0;for(var v=a.length,w=[],S=function(){if(T<c||T>=f)return 1;var i=Object.create(t);e=n[25],i.item=a[T],i.index=T,i.key=i.item.id+"key",r.push(i.key),e=n[25],void 0===n[27]&&(n[27]={}),h[27]={},void 0===n[27][i.key]&&(n[27][i.key]=d.element({parent:e||"root"},!0===b?u:t)),h[27].w=380,h[27].h=60,h[27].y=80*i.index+50,h[27].color="0xfff7edff",void 0===n[27][i.key].nodeId&&(n[27][i.key].populate(h[27]),!0===b&&(x-=1)),e=n[27][i.key],void 0===n[28]&&(n[28]={}),h[28]={},void 0===n[28][i.key]&&(n[28][i.key]=d.element({parent:e||"root"},!0===b?u:t)),h[28].w=10,h[28].h=60,h[28].color="0xfb923cff",void 0===n[28][i.key].nodeId&&(n[28][i.key].populate(h[28]),!0===b&&(x-=1)),e=n[27][i.key],void 0===n[29]&&(n[29]={}),h[29]={},void 0===n[29][i.key]&&(n[29][i.key]=d.element({parent:e||"root"},!0===b?u:t)),h[29].content=i.item.text,h[29].x=30,h[29].y=15,h[29].font="lato",h[29].size=28,h[29].color=i.activeRowIndex===i.index?"0x06b6d4ff":"0x1e293bff",h[29].__textnode=!0,void 0===n[29][i.key].nodeId&&(n[29][i.key].populate(h[29]),!0===b&&(x-=1));var s=function(){n[27][i.key].set("y",80*i.index+50)};o(s,null),w.push(s),t[Symbol.for("effects")].push(s);var l=function(){n[29][i.key].set("content",i.item.text)};o(l,null),w.push(l),t[Symbol.for("effects")].push(l)},T=0;T<v;T++)S();return w};var _=function(){m[27](t.data,p,y[27])};t[Symbol.for("effects")].push(_),o(_,["data"]);var L,P,D=function(){t.activeRowIndex;for(var e=0;e<t.data.length;e++)if(!(e<c||e>=f)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key",p[29][n.key].set("color",t.activeRowIndex===n.index?"0x06b6d4ff":"0x1e293bff")}};t[Symbol.for("effects")].push(D),o(D),e=p[0],h[30]={},p[30]=this.element({parent:e||"root"},!0===b?u:t),h[30].x=1080,h[30].y=100,p[30].populate(h[30]),!0===b&&(x-=1),e=p[30],h[31]={},p[31]=this.element({parent:e||"root"},!0===b?u:t),h[31].content="For loop on Component",h[31].__textnode=!0,p[31].populate(h[31]),!0===b&&(x-=1),e=p[30],y[32]=[],m[32]=function(){var a=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,f=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),p=new Set,m=f.length,y={}||{};L=y.from||0,P="to"in y?y.to:f.length;for(;m--;){var S=f[m];m<P&&m>=L&&p.add(S.id+"key2")}for(var T=c.length;T--;)if(!1===p.has(c[T])){var k=c[T];a[32][k]&&a[32][k].destroy(),a[32][k]=null,delete a[32][k],a[33][k]&&a[33][k].destroy(),a[33][k]=null,delete a[33][k]}c.length=0;for(var C=f.length,A=[],E=function(){if(I<L||I>=P)return 1;var p=Object.create(t);if(e=a[30],p.item=f[I],p.index=I,p.key=p.item.id+"key2",c.push(p.key),w[32]=n.components&&n.components.Row||r.Row,void 0===a[32]&&(a[32]={}),h[32]={},void 0===a[32][p.key]&&(a[32][p.key]=d.element({parent:e||"root"},!0===b?u:t)),h[32].activeRow=(p.count,p.activeRowIndex),h[32].index=p.index,h[32].text=p.item.text,h[32].y=50,v[32]=[],void 0!==w[32])for(var m in w[32][Symbol.for("config")].props)delete h[32][w[32][Symbol.for("config")].props[m]],v[32].push(w[32][Symbol.for("config")].props[m]);if(void 0===a[32][p.key].nodeId&&(a[32][p.key].populate(h[32]),!0===b&&(x-=1)),void 0===a[33]&&(a[33]={}),e=a[32][p.key],g[33]={},void 0===a[33][p.key]){if(p.count,l=p.activeRowIndex,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[33].activeRow=l,l=p.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[33].index=l,l=p.item.text,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[33].text=l,g[33].y=50,s=g[33].is||"Row",r[33],"string"==typeof s){if(r[33]=n.components&&n.components[s]||r[s],!r[33])throw new Error('Component "Row" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[33]=s);a[33][p.key]=r[33].call(null,{props:g[33]},a[32][p.key],t),a[33][p.key][Symbol.for("slots")][0]?(e=a[33][p.key][Symbol.for("slots")][0],u=a[33][p.key],b=!0):e=a[33][p.key][Symbol.for("children")][0]}var y=function(){void 0!==v&&void 0!==v[32]&&-1!==v[32].indexOf("index")||a[32][p.key].set("index",p.index)};o(y,null),A.push(y),t[Symbol.for("effects")].push(y);var S=function(){void 0!==v&&void 0!==v[32]&&-1!==v[32].indexOf("text")||a[32][p.key].set("text",p.item.text)};o(S,null),A.push(S),t[Symbol.for("effects")].push(S),a[33][p.key][Symbol.for("props")].index=p.index,a[33][p.key][Symbol.for("props")].text=p.item.text},I=0;I<C;I++)E();return A};var O=function(){m[32](t.data,p,y[32])};t[Symbol.for("effects")].push(O),o(O,["data"]);var N=function(){t.activeRowIndex,t.count;for(var e=0;e<t.data.length;e++)if(!(e<L||e>=P)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",void 0!==v&&void 0!==v[32]&&-1!==v[32].indexOf("activeRow")||p[32][n.key].set("activeRow",(t.count,t.activeRowIndex))}};t[Symbol.for("effects")].push(N),o(N);var U=function(){t.activeRowIndex,t.count;for(var e=0;e<t.data.length;e++)if(!(e<L||e>=P)){var n={};n.index=e,n.item=t.data[e],n.key=n.item.id+"key2",p[33][n.key][Symbol.for("props")].activeRow=(t.count,t.activeRowIndex)}};if(t[Symbol.for("effects")].push(U),o(U),e=p[0],h[34]={},p[34]=this.element({parent:e||"root"},!0===b?u:t),h[34].x=1500,h[34].y=100,p[34].populate(h[34]),!0===b&&(x-=1),e=p[34],h[35]={},p[35]=this.element({parent:e||"root"},!0===b?u:t),h[35].content="RowsComponent",h[35].__textnode=!0,p[35].populate(h[35]),!0===b&&(x-=1),w[36]=n.components&&n.components.Rows||r.Rows,e=p[34],h[36]={},p[36]=this.element({parent:e||"root"},!0===b?u:t),h[36].data=t.data,h[36].activeRowIndex=t.activeRowIndex,v[36]=[],void 0!==w[36])for(var B in w[36][Symbol.for("config")].props)delete h[36][w[36][Symbol.for("config")].props[B]],v[36].push(w[36][Symbol.for("config")].props[B]);if(p[36].populate(h[36]),!0===b&&(x-=1),e=p[36],g[37]={},l=t.data,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[37].data=l,l=t.activeRowIndex,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[37].activeRowIndex=l,s=g[37].is||"Rows",r[37],"string"==typeof s){if(r[37]=n.components&&n.components[s]||r[s],!r[37])throw new Error('Component "Rows" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[37]=s);return p[37]=r[37].call(null,{props:g[37]},p[36],t),p[37][Symbol.for("slots")][0]?(e=p[37][Symbol.for("slots")][0],u=p[37],b=!0):e=p[37][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,w[4]=null,g[5]=null,r[5]=null,w[6]=null,g[7]=null,r[7]=null,w[8]=null,g[9]=null,r[9]=null,w[10]=null,g[11]=null,r[11]=null,w[12]=null,g[13]=null,r[13]=null,w[14]=null,g[15]=null,r[15]=null,w[16]=null,g[17]=null,r[17]=null,w[18]=null,g[19]=null,r[19]=null,w[20]=null,g[21]=null,r[21]=null,y[27].length=0,m[27]=null,_=null,D=null,y[32].length=0,m[32]=null,w[32]=null,g[33]=null,r[33]=null,O=null,N=null,U=null,w[36]=null,g[37]=null,r[37]=null,w.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[function(e,t,n,r,o,i){t[3].set("y",{transition:e.y})},function(e,t,n,r,o,i){t[3].set("alpha",{transition:!e.hide})},function(e,t,n,r,o,i){t[24].set("content",e.data.length)},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[36]&&-1!==skips[36].indexOf("data")||t[36].set("data",e.data)},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[36]&&-1!==skips[36].indexOf("activeRowIndex")||t[36].set("activeRowIndex",e.activeRowIndex)},function(e,t,n,r,o,i){t[37][Symbol.for("props")].data=e.data},function(e,t,n,r,o,i){t[37][Symbol.for("props")].activeRowIndex=e.activeRowIndex}],context:{}},state:function(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show:function(){return this.hide,!0===this.hide},data2:function(){return this.data,this.data}},watch:{y:function(){var e=this;this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(function(){e.hide=!0},600)}},input:{a:function(){this.y=-10,this.$trigger("y");for(var e=[],t=0;t<6;t++)e.push(va());this.data=e},b:function(){this.y=80,this.$trigger("y"),this.data.push(va())},c:function(){this.y=170,this.$trigger("y"),this.data.pop()},d:function(){this.y=260,this.$trigger("y"),this.data.shift()},e:function(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f:function(){this.y=440,this.data.unshift(va(),va())},g:function(){this.y=530,this.$trigger("y"),this.data=[]},h:function(){this.y=620,this.$trigger("y"),this.data=this.data.concat(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],n=0;n<e;n++)t.push(va());return t}(3))},i:function(){var e=this;this.y=710,this.$trigger("y"),this.sortDirection=1===this.sortDirection?0:1,this.data=this.data.sort(function(t,n){var r=t.text.toLowerCase(),o=n.text.toLowerCase();return 1===e.sortDirection?r<o?-1:r>o?1:0:r>o?-1:r<o?1:0})},up:function(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down:function(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),Ta=Wo.Component("Effects",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=160,l[1].h=160,l[1].x=40,l[1].y=40,l[1].color="0xfb923cff",l[1].effects=[{type:"radius",props:{radius:44}}],s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=160,l[2].h=160,l[2].x=240,l[2].y=40,l[2].color="0xd97706ff",l[2].effects=[{type:"radius",props:{radius:25}}],s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=160,l[3].h=160,l[3].x=440,l[3].y=40,l[3].color="0xb45309ff",l[3].effects=[{type:"radius",props:{radius:80}}],s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].w=160,l[4].h=160,l[4].x=640,l[4].y=40,l[4].color="0x78350fff",l[4].effects=[{type:"radius",props:{radius:10}}],s[4].populate(l[4]),e=s[0],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].w=160,l[5].h=160,l[5].x=40,l[5].y=240,l[5].color="0x65a30dff",l[5].effects=[{type:"radius",props:{radius:t.radius}}],s[5].populate(l[5]),e=s[0],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].w=300,l[6].h=300,l[6].x=40,l[6].y=440,l[6].color="0x0c4a6eff",l[6].effects=[{type:"radius",props:{radius:30}}],s[6].populate(l[6]),e=s[6],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].w=200,l[7].h=200,l[7].x=50,l[7].y=50,l[7].color="0x0284c7ff",l[7].effects=[{type:"radius",props:{radius:40}}],s[7].populate(l[7]),e=s[7],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].w=100,l[8].h=100,l[8].x=50,l[8].y=50,l[8].color="0x38bdf8ff",l[8].effects=[{type:"radius",props:{radius:50}}],s[8].populate(l[8]),e=s[8],l[9]={},s[9]=this.element({parent:e||"root"},t),l[9].w=40,l[9].h=40,l[9].x=30,l[9].y=30,l[9].color="0xbae6fdff",l[9].effects=[{type:"radius",props:{radius:20}}],s[9].populate(l[9]),e=s[0],l[10]={},s[10]=this.element({parent:e||"root"},t),l[10].w=160,l[10].h=160,l[10].x=840,l[10].y=40,l[10].color="0x3b82f6ff",l[10].effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],s[10].populate(l[10]),e=s[0],l[11]={},s[11]=this.element({parent:e||"root"},t),l[11].w=160,l[11].h=160,l[11].x=1040,l[11].y=40,l[11].color="0x500724ff",l[11].effects=t.effects,s[11].populate(l[11]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:44}}])},function(e,t,n,r,o,i){t[2].set("effects",[{type:"radius",props:{radius:25}}])},function(e,t,n,r,o,i){t[3].set("effects",[{type:"radius",props:{radius:80}}])},function(e,t,n,r,o,i){t[4].set("effects",[{type:"radius",props:{radius:10}}])},function(e,t,n,r,o,i){t[5].set("effects",[{type:"radius",props:{radius:e.radius}}])},function(e,t,n,r,o,i){t[6].set("effects",[{type:"radius",props:{radius:30}}])},function(e,t,n,r,o,i){t[7].set("effects",[{type:"radius",props:{radius:40}}])},function(e,t,n,r,o,i){t[8].set("effects",[{type:"radius",props:{radius:50}}])},function(e,t,n,r,o,i){t[9].set("effects",[{type:"radius",props:{radius:20}}])},function(e,t,n,r,o,i){t[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(e,t,n,r,o,i){t[11].set("effects",e.effects)}],context:{}},state:function(){return{direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t="up"===e.direction?e.radius+10:e.radius-10;e.radius=Math.max(Math.min(t,80),0),80===e.radius&&(e.direction="down"),0===e.radius&&(e.direction="up")},500);var t=0;this.$setInterval(function(){t++,e.effects=t%2?[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),ka=Wo.Component("ShowIf",{components:{Square:la},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].y=40,c[1].populate(f[1]),!0===h&&(m-=1),e=c[1],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),f[2].x=50,f[2].w=200,f[2].h=300,f[2].color="0xbef264ff",f[2].show=!0,c[2].populate(f[2]),!0===h&&(m-=1),e=c[1],f[3]={},c[3]=this.element({parent:e||"root"},!0===h?u:t),f[3].x=350,f[3].w=200,f[3].h=300,f[3].color="0xff0000ff",f[3].show=!1,c[3].populate(f[3]),!0===h&&(m-=1),e=c[1],f[4]={},c[4]=this.element({parent:e||"root"},!0===h?u:t),f[4].x=650,f[4].w=200,f[4].h=300,f[4].color="0x84cc16ff",f[4].show=1,c[4].populate(f[4]),!0===h&&(m-=1),e=c[1],f[5]={},c[5]=this.element({parent:e||"root"},!0===h?u:t),f[5].x=950,f[5].w=200,f[5].h=300,f[5].color="0xff0000ff",f[5].show=0,c[5].populate(f[5]),!0===h&&(m-=1),e=c[0],f[6]={},c[6]=this.element({parent:e||"root"},!0===h?u:t),f[6].y=380,c[6].populate(f[6]),!0===h&&(m-=1),e=c[6],f[7]={},c[7]=this.element({parent:e||"root"},!0===h?u:t),f[7].x=50,f[7].w=200,f[7].h=300,f[7].color="0xfde047ff",f[7].show=t.showNr,c[7].populate(f[7]),!0===h&&(m-=1),e=c[6],f[8]={},c[8]=this.element({parent:e||"root"},!0===h?u:t),f[8].x=350,f[8].w=200,f[8].h=300,f[8].color="0x0000ffff",f[8].show=t.hideNr,c[8].populate(f[8]),!0===h&&(m-=1),e=c[6],f[9]={},c[9]=this.element({parent:e||"root"},!0===h?u:t),f[9].x=650,f[9].w=200,f[9].h=300,f[9].color="0x84cc16ff",f[9].show=t.showBool,c[9].populate(f[9]),!0===h&&(m-=1),e=c[6],f[10]={},c[10]=this.element({parent:e||"root"},!0===h?u:t),f[10].x=950,f[10].w=200,f[10].h=300,f[10].color="0xff0000ff",f[10].show=t.hideBool,c[10].populate(f[10]),!0===h&&(m-=1),e=c[0],f[11]={},c[11]=this.element({parent:e||"root"},!0===h?u:t),f[11].y=720,c[11].populate(f[11]),!0===h&&(m-=1),e=c[11],f[12]={},c[12]=this.element({parent:e||"root"},!0===h?u:t),f[12].x=50,f[12].w=200,f[12].h=300,f[12].color="0x5eead4ff",f[12].show=t.showHideToggle,c[12].populate(f[12]),!0===h&&(m-=1),e=c[0],f[13]={},c[13]=this.element({parent:e||"root"},!0===h?u:t),f[13].y=40,f[13].x=1e3,c[13].populate(f[13]),!0===h&&(m-=1),g[14]=n.components&&n.components.Square||r.Square,e=c[13],f[14]={},c[14]=this.element({parent:e||"root"},!0===h?u:t),f[14].show=!0,p[14]=[],void 0!==g[14])for(var y in g[14][Symbol.for("config")].props)delete f[14][g[14][Symbol.for("config")].props[y]],p[14].push(g[14][Symbol.for("config")].props[y]);if(c[14].populate(f[14]),!0===h&&(m-=1),e=c[14],d[15]={},d[15].show=!0,s=d[15].is||"Square",r[15],"string"==typeof s){if(r[15]=n.components&&n.components[s]||r[s],!r[15])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[15]=s);if(c[15]=r[15].call(null,{props:d[15]},c[14],t),c[15][Symbol.for("slots")][0]?(e=c[15][Symbol.for("slots")][0],u=c[15],h=!0):e=c[15][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[16]=n.components&&n.components.Square||r.Square,e=c[13],f[16]={},c[16]=this.element({parent:e||"root"},!0===h?u:t),f[16].y=100,f[16].show=!1,p[16]=[],void 0!==g[16])for(var v in g[16][Symbol.for("config")].props)delete f[16][g[16][Symbol.for("config")].props[v]],p[16].push(g[16][Symbol.for("config")].props[v]);if(c[16].populate(f[16]),!0===h&&(m-=1),e=c[16],d[17]={},d[17].y=100,d[17].show=!1,s=d[17].is||"Square",r[17],"string"==typeof s){if(r[17]=n.components&&n.components[s]||r[s],!r[17])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[17]=s);if(c[17]=r[17].call(null,{props:d[17]},c[16],t),c[17][Symbol.for("slots")][0]?(e=c[17][Symbol.for("slots")][0],u=c[17],h=!0):e=c[17][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[18]=n.components&&n.components.Square||r.Square,e=c[13],f[18]={},c[18]=this.element({parent:e||"root"},!0===h?u:t),f[18].y=200,f[18].show=t.showHideToggle,p[18]=[],void 0!==g[18])for(var b in g[18][Symbol.for("config")].props)delete f[18][g[18][Symbol.for("config")].props[b]],p[18].push(g[18][Symbol.for("config")].props[b]);if(c[18].populate(f[18]),!0===h&&(m-=1),e=c[18],d[19]={},d[19].y=200,l=t.showHideToggle,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[19].show=l,s=d[19].is||"Square",r[19],"string"==typeof s){if(r[19]=n.components&&n.components[s]||r[s],!r[19])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[19]=s);return c[19]=r[19].call(null,{props:d[19]},c[18],t),c[19][Symbol.for("slots")][0]?(e=c[19][Symbol.for("slots")][0],u=c[19],h=!0):e=c[19][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[0],f[20]={},c[20]=this.element({parent:e||"root"},!0===h?u:t),f[20].y=40,f[20].x=1400,c[20].populate(f[20]),!0===h&&(m-=1),e=c[20],f[21]={},c[21]=this.element({parent:e||"root"},!0===h?u:t),f[21].w=80,f[21].h=80,f[21].show=!0,f[21].alpha=.8,f[21].color="0xff00e4ff",c[21].populate(f[21]),!0===h&&(m-=1),e=c[20],f[22]={},c[22]=this.element({parent:e||"root"},!0===h?u:t),f[22].y=100,f[22].w=80,f[22].h=80,f[22].show=!1,f[22].alpha=.8,f[22].color="0xff00e4ff",c[22].populate(f[22]),!0===h&&(m-=1),e=c[20],f[23]={},c[23]=this.element({parent:e||"root"},!0===h?u:t),f[23].y=200,f[23].w=80,f[23].h=80,f[23].show=t.showHideToggle,f[23].alpha=.8,f[23].color="0xff00e4ff",c[23].populate(f[23]),!0===h&&(m-=1),e=c[0],f[24]={},c[24]=this.element({parent:e||"root"},!0===h?u:t),f[24].x=1e3,f[24].y=380,f[24].direction="horizontal",f[24].gap=20,f[24].padding=20,f[24].color="0xffffffff",f[24].__layout=!0,c[24].populate(f[24]),!0===h&&(m-=1),e=c[24],f[25]={},c[25]=this.element({parent:e||"root"},!0===h?u:t),f[25].w=40,f[25].h=40,f[25].show=t.showHideToggle,f[25].color="0xbfdbfeff",c[25].populate(f[25]),!0===h&&(m-=1),e=c[24],f[26]={},c[26]=this.element({parent:e||"root"},!0===h?u:t),f[26].w=40,f[26].h=40,f[26].color="0x60a5faff",c[26].populate(f[26]),!0===h&&(m-=1),e=c[24],f[27]={},c[27]=this.element({parent:e||"root"},!0===h?u:t),f[27].w=40,f[27].h=40,f[27].color="0x2563ebff",c[27].populate(f[27]),!0===h&&(m-=1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[14]=null,d[15]=null,r[15]=null,g[16]=null,d[17]=null,r[17]=null,g[18]=null,d[19]=null,r[19]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){t[12].set("show",e.showHideToggle)},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[18]&&-1!==skips[18].indexOf("show")||t[18].set("show",e.showHideToggle)},function(e,t,n,r,o,i){t[19][Symbol.for("props")].show=e.showHideToggle},function(e,t,n,r,o,i){t[23].set("show",e.showHideToggle)},function(e,t,n,r,o,i){t[25].set("show",e.showHideToggle)}],context:{}},state:function(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready:function(){var e=this;this.$setInterval(function(){console.log("backstopjs:ready"),e.showHideToggle=!e.showHideToggle},2e3),this.$setTimeout(function(){e.showNr=0,e.hideNr=1,e.showBool=!1,e.hideBool=!0},4e3)}}}),Ca=Wo.Component("Events",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].x=400,l[0].y=360,s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=280,l[1].h=280,l[1].color="0xe5e7ebff",l[1].x=t.x,l[1].y="-5",s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=250,l[2].h=250,l[2].x=10,l[2].y=10,l[2].color=t.colors[0],s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=250,l[3].h=250,l[3].x=290,l[3].y=10,l[3].color=t.colors[1],s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].w=250,l[4].h=250,l[4].x=570,l[4].y=10,l[4].color=t.colors[2],s[4].populate(l[4]),e=s[0],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].w=250,l[5].h=250,l[5].x=850,l[5].y=10,l[5].color=t.colors[3],s[5].populate(l[5]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("x",e.x)}],context:{}},state:function(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x:function(){return this.count,280*this.count-5}},hooks:{unfocus:function(){this.$emit("changeBackground")}},input:{left:function(e){var t=this.count-1;-1===t?this.parent.$focus(e):this.count=Math.max(t,0)},right:function(e){var t=this.count+1;4===t?this.parent.$focus(e):this.count=Math.min(t,3)},enter:function(){this.$emit("changeBackground",this.colors[this.count])}}}),Aa=Wo.Component("SlotCard",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=300,l[0].h=500,l[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],l[0].color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1][Symbol.for("isSlot")]=!0,l[1].x=20,l[1].y=20,s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].content=t.label,l[2].maxwidth=260,l[2].x=20,l[2].y=400,l[2].align="center",l[2].__textnode=!0,s[2].populate(l[2]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),Ea=Wo.Component("NamedSlotCard",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=700,l[0].h=300,l[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],l[0].color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].x=20,l[1].y=20,s[1].populate(l[1]),e=s[1],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].content="First slot",l[2].__textnode=!0,s[2].populate(l[2]),e=s[1],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3][Symbol.for("isSlot")]=!0,l[3].y=40,l[3].ref="first",s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].x=200,l[4].y=20,s[4].populate(l[4]),e=s[4],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].content="Second slot",l[5].__textnode=!0,s[5].populate(l[5]),e=s[4],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6][Symbol.for("isSlot")]=!0,l[6].y=40,l[6].ref="second",s[6].populate(l[6]),e=s[0],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].x=480,l[7].y=20,s[7].populate(l[7]),e=s[7],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].content="Third slot",l[8].__textnode=!0,s[8].populate(l[8]),e=s[7],l[9]={},s[9]=this.element({parent:e||"root"},t),l[9][Symbol.for("isSlot")]=!0,l[9].y=40,l[9].ref="third",s[9].populate(l[9]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),Ia=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],Ma=Wo.Component("Components",{components:{SlotCard:Aa,NamedSlotCard:Ea,Card:ua,Square:la},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),u[0].populate(c[0]),!0===p&&(h-=1),m[1]=n.components&&n.components.SlotCard||r.SlotCard,e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].x=400,c[1].y=100,c[1].label="Element",d[1]=[],void 0!==m[1])for(var g in m[1][Symbol.for("config")].props)delete c[1][m[1][Symbol.for("config")].props[g]],d[1].push(m[1][Symbol.for("config")].props[g]);if(u[1].populate(c[1]),!0===p&&(h-=1),e=u[1],f[2]={},f[2].x=400,f[2].y=100,f[2].label="Element",s=f[2].is||"SlotCard",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "SlotCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);if(u[2]=r[2].call(null,{props:f[2]},u[1],t),u[2][Symbol.for("slots")][0]?(e=u[2][Symbol.for("slots")][0],l=u[2],p=!0):e=u[2][Symbol.for("children")][0],!0===p&&(h=2),c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),u[3].populate(c[3]),!0===p&&(h-=1),e=u[3],c[4]={},u[4]=this.element({parent:e||"root"},!0===p?l:t),c[4].color=t.color,c[4].w=100,c[4].h=100,u[4].populate(c[4]),!0===p&&(h-=1),!0===p&&0===h&&(p=!1),m[5]=n.components&&n.components.SlotCard||r.SlotCard,e=u[0],c[5]={},u[5]=this.element({parent:e||"root"},!0===p?l:t),c[5].x=800,c[5].y=100,c[5].label="Component",d[5]=[],void 0!==m[5])for(var y in m[5][Symbol.for("config")].props)delete c[5][m[5][Symbol.for("config")].props[y]],d[5].push(m[5][Symbol.for("config")].props[y]);if(u[5].populate(c[5]),!0===p&&(h-=1),e=u[5],f[6]={},f[6].x=800,f[6].y=100,f[6].label="Component",s=f[6].is||"SlotCard",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "SlotCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);if(u[6]=r[6].call(null,{props:f[6]},u[5],t),u[6][Symbol.for("slots")][0]?(e=u[6][Symbol.for("slots")][0],l=u[6],p=!0):e=u[6][Symbol.for("children")][0],!0===p&&(h=2),c[7]={},u[7]=this.element({parent:e||"root"},!0===p?l:t),u[7].populate(c[7]),!0===p&&(h-=1),m[8]=n.components&&n.components.Square||r.Square,e=u[7],c[8]={},u[8]=this.element({parent:e||"root"},!0===p?l:t),c[8].size=200,c[8].y=50,d[8]=[],void 0!==m[8])for(var v in m[8][Symbol.for("config")].props)delete c[8][m[8][Symbol.for("config")].props[v]],d[8].push(m[8][Symbol.for("config")].props[v]);if(u[8].populate(c[8]),!0===p&&(h-=1),e=u[8],f[9]={},f[9].size=200,f[9].y=50,s=f[9].is||"Square",r[9],"string"==typeof s){if(r[9]=n.components&&n.components[s]||r[s],!r[9])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[9]=s);if(u[9]=r[9].call(null,{props:f[9]},u[8],t),u[9][Symbol.for("slots")][0]?(e=u[9][Symbol.for("slots")][0],l=u[9],p=!0):e=u[9][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),!0===p&&0===h&&(p=!1),m[10]=n.components&&n.components.SlotCard||r.SlotCard,e=u[0],c[10]={},u[10]=this.element({parent:e||"root"},!0===p?l:t),c[10].x=1200,c[10].y=100,c[10].label="Element & Component",d[10]=[],void 0!==m[10])for(var b in m[10][Symbol.for("config")].props)delete c[10][m[10][Symbol.for("config")].props[b]],d[10].push(m[10][Symbol.for("config")].props[b]);if(u[10].populate(c[10]),!0===p&&(h-=1),e=u[10],f[11]={},f[11].x=1200,f[11].y=100,f[11].label="Element & Component",s=f[11].is||"SlotCard",r[11],"string"==typeof s){if(r[11]=n.components&&n.components[s]||r[s],!r[11])throw new Error('Component "SlotCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[11]=s);if(u[11]=r[11].call(null,{props:f[11]},u[10],t),u[11][Symbol.for("slots")][0]?(e=u[11][Symbol.for("slots")][0],l=u[11],p=!0):e=u[11][Symbol.for("children")][0],!0===p&&(h=3),c[12]={},u[12]=this.element({parent:e||"root"},!0===p?l:t),u[12].populate(c[12]),!0===p&&(h-=1),e=u[12],c[13]={},u[13]=this.element({parent:e||"root"},!0===p?l:t),c[13].color=t.color,c[13].w=100,c[13].h=100,u[13].populate(c[13]),!0===p&&(h-=1),m[14]=n.components&&n.components.Square||r.Square,e=u[12],c[14]={},u[14]=this.element({parent:e||"root"},!0===p?l:t),c[14].size=200,c[14].y=150,d[14]=[],void 0!==m[14])for(var x in m[14][Symbol.for("config")].props)delete c[14][m[14][Symbol.for("config")].props[x]],d[14].push(m[14][Symbol.for("config")].props[x]);if(u[14].populate(c[14]),!0===p&&(h-=1),e=u[14],f[15]={},f[15].size=200,f[15].y=150,s=f[15].is||"Square",r[15],"string"==typeof s){if(r[15]=n.components&&n.components[s]||r[s],!r[15])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[15]=s);if(u[15]=r[15].call(null,{props:f[15]},u[14],t),u[15][Symbol.for("slots")][0]?(e=u[15][Symbol.for("slots")][0],l=u[15],p=!0):e=u[15][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),!0===p&&0===h&&(p=!1),m[16]=n.components&&n.components.Card||r.Card,e=u[0],c[16]={},u[16]=this.element({parent:e||"root"},!0===p?l:t),c[16].x=400,c[16].y=700,c[16].size="small",d[16]=[],void 0!==m[16])for(var w in m[16][Symbol.for("config")].props)delete c[16][m[16][Symbol.for("config")].props[w]],d[16].push(m[16][Symbol.for("config")].props[w]);if(u[16].populate(c[16]),!0===p&&(h-=1),e=u[16],f[17]={},f[17].x=400,f[17].y=700,f[17].size="small",s=f[17].is||"Card",r[17],"string"==typeof s){if(r[17]=n.components&&n.components[s]||r[s],!r[17])throw new Error('Component "Card" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[17]=s);if(u[17]=r[17].call(null,{props:f[17]},u[16],t),u[17][Symbol.for("slots")][0]?(e=u[17][Symbol.for("slots")][0],l=u[17],p=!0):e=u[17][Symbol.for("children")][0],!0===p&&(h=2),c[18]={},u[18]=this.element({parent:e||"root"},!0===p?l:t),u[18].populate(c[18]),!0===p&&(h-=1),e=u[18],c[19]={},u[19]=this.element({parent:e||"root"},!0===p?l:t),c[19].color=t.color,c[19].w=100,c[19].h=100,u[19].populate(c[19]),!0===p&&(h-=1),!0===p&&0===h&&(p=!1),m[20]=n.components&&n.components.NamedSlotCard||r.NamedSlotCard,e=u[0],c[20]={},u[20]=this.element({parent:e||"root"},!0===p?l:t),c[20].x=800,c[20].y=700,d[20]=[],void 0!==m[20])for(var S in m[20][Symbol.for("config")].props)delete c[20][m[20][Symbol.for("config")].props[S]],d[20].push(m[20][Symbol.for("config")].props[S]);if(u[20].populate(c[20]),!0===p&&(h-=1),e=u[20],f[21]={},f[21].x=800,f[21].y=700,s=f[21].is||"NamedSlotCard",r[21],"string"==typeof s){if(r[21]=n.components&&n.components[s]||r[s],!r[21])throw new Error('Component "NamedSlotCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[21]=s);if(u[21]=r[21].call(null,{props:f[21]},u[20],t),u[21][Symbol.for("slots")][0]?(e=u[21][Symbol.for("slots")][0],l=u[21],p=!0):e=u[21][Symbol.for("children")][0],!0===p&&(h=5),c[22]={},u[22]=this.element({parent:e||"root"},!0===p?l:t),u[22].populate(c[22]),!0===p&&(h-=1),e=u[22],c[23]={},u[23]=this.element({parent:e||"root"},!0===p?l:t),c[23].color="0x0891b2ff",c[23].x=10,c[23].y=140,c[23].w=80,c[23].h=60,c[23].parent=void 0!==l[Symbol.for("slots")]&&!0===Array.isArray(l[Symbol.for("slots")])&&l[Symbol.for("slots")].filter(function(e){return"second"===e.ref}).shift()||e,c[23].slot="second",u[23].populate(c[23]),!0===p&&(h-=1),e=u[22],c[24]={},u[24]=this.element({parent:e||"root"},!0===p?l:t),c[24].color=t.color,c[24].w=100,c[24].h=100,c[24].parent=void 0!==l[Symbol.for("slots")]&&!0===Array.isArray(l[Symbol.for("slots")])&&l[Symbol.for("slots")].filter(function(e){return"third"===e.ref}).shift()||e,c[24].slot="third",u[24].populate(c[24]),!0===p&&(h-=1),m[25]=n.components&&n.components.Square||r.Square,e=u[22],c[25]={},u[25]=this.element({parent:e||"root"},!0===p?l:t),c[25].size=100,c[25].parent=void 0!==l[Symbol.for("slots")]&&!0===Array.isArray(l[Symbol.for("slots")])&&l[Symbol.for("slots")].filter(function(e){return"first"===e.ref}).shift()||e,c[25].slot="first",d[25]=[],void 0!==m[25])for(var T in m[25][Symbol.for("config")].props)delete c[25][m[25][Symbol.for("config")].props[T]],d[25].push(m[25][Symbol.for("config")].props[T]);if(u[25].populate(c[25]),!0===p&&(h-=1),e=u[25],f[26]={},f[26].size=100,f[26].slot="first",s=f[26].is||"Square",r[26],"string"==typeof s){if(r[26]=n.components&&n.components[s]||r[s],!r[26])throw new Error('Component "Square" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[26]=s);return u[26]=r[26].call(null,{props:f[26]},u[25],t),u[26][Symbol.for("slots")][0]?(e=u[26][Symbol.for("slots")][0],l=u[26],p=!0):e=u[26][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),e=u[22],c[27]={},u[27]=this.element({parent:e||"root"},!0===p?l:t),c[27].color="0x4d7c0fff",c[27].x=40,c[27].y=40,c[27].w=40,c[27].h=60,c[27].parent=void 0!==l[Symbol.for("slots")]&&!0===Array.isArray(l[Symbol.for("slots")])&&l[Symbol.for("slots")].filter(function(e){return"second"===e.ref}).shift()||e,c[27].slot="second",u[27].populate(c[27]),!0===p&&(h-=1),!0===p&&0===h&&(p=!1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[1]=null,f[2]=null,r[2]=null,m[5]=null,f[6]=null,r[6]=null,m[8]=null,f[9]=null,r[9]=null,m[10]=null,f[11]=null,r[11]=null,m[14]=null,f[15]=null,r[15]=null,m[16]=null,f[17]=null,r[17]=null,m[20]=null,f[21]=null,r[21]=null,m[25]=null,f[26]=null,r[26]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[4].set("color",e.color)},function(e,t,n,r,o,i){t[13].set("color",e.color)},function(e,t,n,r,o,i){t[19].set("color",e.color)},function(e,t,n,r,o,i){t[24].set("color",e.color)}],context:{}},state:function(){return{color:Ia[0]}},hooks:{ready:function(){var e=this;this.$setInterval(function(){var t=Ia.indexOf(e.color)+1;e.color=t<=Ia.length?Ia[t]:Ia[0]},600)}}}),Ra=Wo.Component("MemoryCard",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=320,l[0].h=200,l[0].x=360*t.col,l[0].y=250*t.row,l[0].scale={transition:t.scale},l[0].rotation={transition:t.disabled?-2:0},s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].h={transition:t.h},l[1].w=320,l[1].y=125,l[1].mount="{y: 0.5}",l[1].color={transition:t.disabled?"#ccc":"#fff"},l[1].src=t.image+"&w=320&h=200",l[1].effects=[{type:"radius",props:{radius:6}}],l[1].show=t.open,s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].h={transition:t.h},l[2].w=320,l[2].y=125,l[2].mount="{y: 0.5}",l[2].color=t.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},l[2].effects=[{type:"radius",props:{radius:6}}],s[2].populate(l[2]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("scale",{transition:e.scale})},function(e,t,n,r,o,i){t[0].set("rotation",{transition:e.disabled?-2:0})},function(e,t,n,r,o,i){t[1].set("h",{transition:e.h})},function(e,t,n,r,o,i){t[1].set("color",{transition:e.disabled?"#ccc":"#fff"})},function(e,t,n,r,o,i){t[1].set("src",e.image+"&w=320&h=200")},function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:6}}])},function(e,t,n,r,o,i){t[1].set("show",e.open)},function(e,t,n,r,o,i){t[2].set("h",{transition:e.h})},function(e,t,n,r,o,i){t[2].set("color",e.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(e,t,n,r,o,i){t[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state:function(){return{disabled:!1,open:!1,h:200,scale:1,announcement:null}},hooks:{init:function(){var e=this;this.$listen("closeMemoryCard",function(t){t===e.index&&e.$setTimeout(function(){return e.flip()},1e3)}),this.$listen("deactivateMemoryCard",function(t){t===e.index&&(e.$setTimeout(function(){e.scale=1.16},500),e.$setTimeout(function(){e.disabled=!0,e.scale=1},800))})},focus:function(){this.scale=1.08;var e="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.announcement=this.$announcer.speak(e)},unfocus:function(){this.scale=1,this.announcement.cancel()}},input:{enter:function(){this.disabled||(this.open?this.$announcer.speak("Card already open. Choose another"):(this.flip(),this.$announcer.speak("Image of a ".concat(this.description)),this.$emit("selectMemoryCard",this.index)))}},methods:{flip:function(){var e=this;this.h=0,this.$setTimeout(function(){e.open=!e.open,e.h=200},250)}}}),_a=Wo.Component("Toggle",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=t.width,l[1].h=t.height,l[1].color="0x121212ff",l[1].alpha={transition:t.hasFocus?0:1},l[1].effects=[{type:"radius",props:{radius:t.radius}},{type:"border",props:{width:2,color:"0x888888ff"}}],s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].w=t.width,l[2].h=t.height,l[2].color="0x121212ff",l[2].alpha={transition:t.hasFocus?1:0},l[2].effects=[{type:"radius",props:{radius:t.radius}},{type:"border",props:{width:4,color:"0xffffffff"}}],s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=t.innerWidth,l[3].h=t.innerHeight,l[3].mount=.5,l[3].x={transition:t.toggled?t.width-t.offset:t.offset},l[3].y=t.height/2,l[3].color={transition:t.toggled?"#fff":"#888"},l[3].effects=[{type:"radius",props:{radius:t.innerRadius}}],s[3].populate(l[3]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("alpha",{transition:e.hasFocus?0:1})},function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:e.radius}},{type:"border",props:{width:2,color:"0x888888ff"}}])},function(e,t,n,r,o,i){t[2].set("alpha",{transition:e.hasFocus?1:0})},function(e,t,n,r,o,i){t[2].set("effects",[{type:"radius",props:{radius:e.radius}},{type:"border",props:{width:4,color:"0xffffffff"}}])},function(e,t,n,r,o,i){t[3].set("x",{transition:e.toggled?e.width-e.offset:e.offset})},function(e,t,n,r,o,i){t[3].set("color",{transition:e.toggled?"#fff":"#888"})},function(e,t,n,r,o,i){t[3].set("effects",[{type:"radius",props:{radius:e.innerRadius}}])}],context:{}},props:["toggled"],state:function(){return{borderWidth:2,height:40,innerHeight:18,innerRadius:9,innerWidth:18,radius:20,width:60,offset:20}}}),La=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],Pa=Wo.Component("Announcer",{components:{MemoryCard:Ra,Toggle:_a},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=0,w=[];if(h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),p[0].populate(h[0]),!0===b&&(x-=1),e=p[0],h[1]={},p[1]=this.element({parent:e||"root"},!0===b?u:t),h[1].font="raleway",h[1].size=80,h[1].color="0xffffffff",h[1].content="Let's play memory!",h[1].x=580,h[1].y=60,h[1].__textnode=!0,p[1].populate(h[1]),!0===b&&(x-=1),e=p[0],h[2]={},p[2]=this.element({parent:e||"root"},!0===b?u:t),h[2].font="kalam",h[2].size=40,h[2].color="0xb91c1cff",h[2].content="the Accessible edition :)",h[2].x=1200,h[2].y=170,h[2].rotation="-6",h[2].__textnode=!0,p[2].populate(h[2]),!0===b&&(x-=1),e=p[0],h[3]={},p[3]=this.element({parent:e||"root"},!0===b?u:t),h[3].size=26,h[3].color="0xffffffff",h[3].content="Announcer on / off",h[3].x=260,h[3].y=200,h[3].__textnode=!0,p[3].populate(h[3]),!0===b&&(x-=1),w[4]=n.components&&n.components.Toggle||r.Toggle,e=p[0],h[4]={},p[4]=this.element({parent:e||"root"},!0===b?u:t),h[4].ref="toggle",h[4].x=525,h[4].y=200,h[4].toggled=t.toggle,v[4]=[],void 0!==w[4])for(var S in w[4][Symbol.for("config")].props)delete h[4][w[4][Symbol.for("config")].props[S]],v[4].push(w[4][Symbol.for("config")].props[S]);if(p[4].populate(h[4]),!0===b&&(x-=1),e=p[4],g[5]={},g[5].ref="toggle",g[5].x=525,g[5].y=200,l=t.toggle,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[5].toggled=l,s=g[5].is||"Toggle",r[5],"string"==typeof s){if(r[5]=n.components&&n.components[s]||r[s],!r[5])throw new Error('Component "Toggle" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[5]=s);p[5]=r[5].call(null,{props:g[5]},p[4],t),p[5][Symbol.for("slots")][0]?(e=p[5][Symbol.for("slots")][0],u=p[5],b=!0):e=p[5][Symbol.for("children")][0],!0===b&&0===x&&(b=!1),e=p[0],h[6]={},p[6]=this.element({parent:e||"root"},!0===b?u:t),h[6].x=260,h[6].y=260,p[6].populate(h[6]),!0===b&&(x-=1),e=p[6],y[7]=[],m[7]=function(){var a=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,m=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),y=new Set,S=m.length,T={}||{};c=T.from||0,f="to"in T?T.to:m.length;for(;S--;){var k=m[S];S<f&&S>=c&&y.add(""+k.id)}for(var C=p.length;C--;)if(!1===y.has(p[C])){var A=p[C];a[7][A]&&a[7][A].destroy(),a[7][A]=null,delete a[7][A],a[8][A]&&a[8][A].destroy(),a[8][A]=null,delete a[8][A]}p.length=0;for(var E=m.length,I=[],M=function(){if(R<c||R>=f)return 1;var y=Object.create(t);if(e=a[6],y.card=m[R],y.index=R,y.key=""+y.card.id,p.push(y.key),w[7]=n.components&&n.components.MemoryCard||r.MemoryCard,void 0===a[7]&&(a[7]={}),h[7]={},void 0===a[7][y.key]&&(a[7][y.key]=d.element({parent:e||"root"},!0===b?u:t)),h[7].col=y.index%4,h[7].row=Math.floor(y.index/4)%3,h[7].image=y.card.image,h[7].description=y.card.description,h[7].ref="card"+y.index,h[7].index=y.index,v[7]=[],void 0!==w[7])for(var S in w[7][Symbol.for("config")].props)delete h[7][w[7][Symbol.for("config")].props[S]],v[7].push(w[7][Symbol.for("config")].props[S]);if(void 0===a[7][y.key].nodeId&&(a[7][y.key].populate(h[7]),!0===b&&(x-=1)),void 0===a[8]&&(a[8]={}),e=a[7][y.key],g[8]={},void 0===a[8][y.key]){if(l=y.index%4,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[8].col=l,l=Math.floor(y.index/4)%3,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[8].row=l,g[8].image=y.card.image,g[8].description=y.card.description,l="card"+y.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[8].ref=l,l=y.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[8].index=l,s=g[8].is||"MemoryCard",r[8],"string"==typeof s){if(r[8]=n.components&&n.components[s]||r[s],!r[8])throw new Error('Component "MemoryCard" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[8]=s);a[8][y.key]=r[8].call(null,{props:g[8]},a[7][y.key],t),a[8][y.key][Symbol.for("slots")][0]?(e=a[8][y.key][Symbol.for("slots")][0],u=a[8][y.key],b=!0):e=a[8][y.key][Symbol.for("children")][0]}var T=function(){void 0!==v&&void 0!==v[7]&&-1!==v[7].indexOf("col")||a[7][y.key].set("col",y.index%4)};o(T,null),I.push(T),t[Symbol.for("effects")].push(T);var k=function(){void 0!==v&&void 0!==v[7]&&-1!==v[7].indexOf("row")||a[7][y.key].set("row",Math.floor(y.index/4)%3)};o(k,null),I.push(k),t[Symbol.for("effects")].push(k);var C=function(){void 0!==v&&void 0!==v[7]&&-1!==v[7].indexOf("ref")||a[7][y.key].set("ref","card"+y.index)};o(C,null),I.push(C),t[Symbol.for("effects")].push(C);var A=function(){void 0!==v&&void 0!==v[7]&&-1!==v[7].indexOf("index")||a[7][y.key].set("index",y.index)};o(A,null),I.push(A),t[Symbol.for("effects")].push(A),a[8][y.key][Symbol.for("props")].col=y.index%4,a[8][y.key][Symbol.for("props")].row=Math.floor(y.index/4)%3,a[8][y.key][Symbol.for("props")].ref="card"+y.index,a[8][y.key][Symbol.for("props")].index=y.index},R=0;R<E;R++)M();return I};var T=function(){m[7](t.cards,p,y[7])};return t[Symbol.for("effects")].push(T),o(T,["cards"]),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,w[4]=null,g[5]=null,r[5]=null,y[7].length=0,m[7]=null,w[7]=null,g[8]=null,r[8]=null,T=null,w.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[4]&&-1!==skips[4].indexOf("toggled")||t[4].set("toggled",e.toggle)},function(e,t,n,r,o,i){t[5][Symbol.for("props")].toggled=e.toggle}],context:{}},state:function(){return{cards:La.concat(La).map(function(e,t){return g(g({},e),{},{id:"card".concat(t)})}),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0,toggle:!0,focusable:["toggle"],focusIndex:0}},hooks:{init:function(){var e=this;this.shuffle(),this.$listen("selectMemoryCard",function(t){e.openCards.length<2&&e.openCards.push(t),2===e.openCards.length&&(e.cards[e.openCards[0]].description===e.cards[e.openCards[1]].description?(e.$emit("deactivateMemoryCard",e.openCards[0]),e.$emit("deactivateMemoryCard",e.openCards[1]),e.pairs++,e.$setTimeout(function(){e.$announcer.speak(e.pairs===e.cards.length/2?"Congratulations, you found all pairs!":"You found a pair! ".concat(e.cards.length/2-e.pairs," more to go."))},1500)):(e.$emit("closeMemoryCard",e.openCards[0]),e.$emit("closeMemoryCard",e.openCards[1]),e.$setTimeout(function(){e.$announcer.speak("No match. Try again")},1500)),e.openCards.length=0)})},ready:function(){this.$announcer.enable(),this.focusedRow=0,this.focusedCol=0},destroy:function(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol:function(e){-1!==this.focusedRow?(e+=4*this.focusedRow,this.$select("card"+e).$focus()):this.focusedRow=0},focusedRow:function(e){-1!==this.focusedCol?(e=this.focusedCol+4*e,this.$select("card"+e).$focus()):this.focusedCol=0}},methods:{shuffle:function(){this.cards.sort(function(){return.5-Math.random()})}},input:{left:function(){0===this.focusIndex&&(0===this.focusedCol?0===this.focusedRow?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1))},right:function(){0===this.focusIndex&&(3===this.focusedCol?2===this.focusedRow?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1))},up:function(){0===this.focusIndex&&(0===this.focusedRow?(this.$select("toggle").$focus(),this.focusIndex=-1):this.focusedRow=Math.max(0,this.focusedRow-1))},down:function(){-1===this.focusIndex?(this.$select("card0").$focus(),this.focusIndex=0,this.focusedRow=0,this.focusedCol=0):2===this.focusedRow?this.$announcer.speak("You are already at the last card"):this.focusedRow=Math.min(2,this.focusedRow+1)},enter:function(){-1===this.focusIndex&&(this.toggle=!this.toggle,console.log("Toggle:",this.toggle),this.toggle?this.$announcer.enable():this.$announcer.disable())}}}),Da=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},Oa=Wo.Component("Item",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].src="assets/blits-b-small.png",l[0].w=96,l[0].h=168,l[0].x={transition:{value:t.x,duration:2900}},l[0].y={transition:{value:t.y,duration:2900}},l[0].rotation={transition:{value:t.rotation,duration:2900}},l[0].scale={transition:{value:t.scale,duration:1e3}},s[0].populate(l[0]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("x",{transition:{value:e.x,duration:2900}})},function(e,t,n,r,o,i){t[0].set("y",{transition:{value:e.y,duration:2900}})},function(e,t,n,r,o,i){t[0].set("rotation",{transition:{value:e.rotation,duration:2900}})},function(e,t,n,r,o,i){t[0].set("scale",{transition:{value:e.scale,duration:1e3}})}],context:{}},state:function(){return{x:Da(20,1560),y:Da(20,720),rotation:0,scale:.1}},hooks:{ready:function(){var e=this;this.scale=1,this.$setInterval(function(){e.scale=1,e.x=Da(20,1740),e.y=Da(20,900),e.rotation=Da(10,360)},3e3)}}}),Na=Wo.Component("Exponential",{components:{Item:Oa},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f=this,d=[],p=[],h=[],m=[],g=[],y=[],v=!1,b=[];p[0]={},d[0]=this.element({parent:e||"root"},!0===v?l:t),d[0].populate(p[0]),e=d[0],g[1]=[],h[1]=function(){var o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,g=d.length,x={}||{};u=x.from||0,c="to"in x?x.to:d.length;for(;g--;){var w=d[g];g<c&&g>=u&&h.add(""+w)}for(var S=a.length;S--;)if(!1===h.has(a[S])){var T=a[S];o[1][T]&&o[1][T].destroy(),o[1][T]=null,delete o[1][T],o[2][T]&&o[2][T].destroy(),o[2][T]=null,delete o[2][T]}a.length=0;for(var k=d.length,C=0;C<k;C++)if(!(C<u||C>=c)){var A=Object.create(t);if(e=o[0],A.item=d[C],A[void 0]=C,A.key=""+A.item,a.push(A.key),b[1]=n.components&&n.components.Item||r.Item,void 0===o[1]&&(o[1]={}),p[1]={},void 0===o[1][A.key]&&(o[1][A.key]=f.element({parent:e||"root"},!0===v?l:t)),y[1]=[],void 0!==b[1])for(var E in b[1][Symbol.for("config")].props)delete p[1][b[1][Symbol.for("config")].props[E]],y[1].push(b[1][Symbol.for("config")].props[E]);if(void 0===o[1][A.key].nodeId&&o[1][A.key].populate(p[1]),void 0===o[2]&&(o[2]={}),e=o[1][A.key],m[2]={},void 0===o[2][A.key]){if(s=m[2].is||"Item",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Item" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);o[2][A.key]=r[2].call(null,{props:m[2]},o[1][A.key],t),o[2][A.key][Symbol.for("slots")][0]?(e=o[2][A.key][Symbol.for("slots")][0],l=o[2][A.key],v=!0):e=o[2][A.key][Symbol.for("children")][0]}}return[]};var x=function(){h[1](t.items,d,g[1])};return t[Symbol.for("effects")].push(x),o(x,["items"]),{elms:d,cleanup:function(){l=null,t=null,e=null,g[1].length=0,h[1]=null,b[1]=null,m[2]=null,r[2]=null,x=null,b.length=0,d.length=0,r.length=0,p.length=0,h.length=0,m.length=0,y.length=0}}},effects:[],context:{}},state:function(){return{items:[]}},hooks:{ready:function(){var e=this,t=this.$setInterval(function(){for(var n=0;n<=Math.floor(e.items.length/10);n++)e.items.push("item".concat(e.items.length));e.$log.info("# items",e.items.length),e.items.length>100&&clearInterval(t)},2e3)}}}),Ua=Wo.Component("Ball",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=100,l[0].h=100,l[0].src="/assets/basketball.png",s[0].populate(l[0]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[],context:{}},hooks:{attach:function(){this.$emit("ballUpdate","Attached to render tree")},detach:function(){this.$emit("ballUpdate","Detached from render tree")},enter:function(){this.$emit("ballUpdate","Entered viewport")},exit:function(){this.$emit("ballUpdate","Exited viewport")}}}),Ba=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},ja=Wo.Component("Viewport",{components:{Ball:Ua},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].size=32,f[1].x=960,f[1].y=540,f[1].mount=.5,f[1].content=t.status.join("\n"),f[1].lineheight=52,f[1].maxwidth=500,f[1].__textnode=!0,c[1].populate(f[1]),!0===h&&(m-=1),g[2]=n.components&&n.components.Ball||r.Ball,e=c[0],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),f[2].x={transition:{value:t.x,duration:1250}},f[2].y={transition:{value:t.y,duration:1250}},f[2].rotation={transition:{value:t.rotation,duration:1400,easing:"ease-in-out"}},f[2].w=100,f[2].h=100,p[2]=[],void 0!==g[2])for(var y in g[2][Symbol.for("config")].props)delete f[2][g[2][Symbol.for("config")].props[y]],p[2].push(g[2][Symbol.for("config")].props[y]);if(c[2].populate(f[2]),!0===h&&(m-=1),e=c[2],d[3]={},l={transition:{value:t.x,duration:1250}},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[3].x=l,l={transition:{value:t.y,duration:1250}},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[3].y=l,l={transition:{value:t.rotation,duration:1400,easing:"ease-in-out"}},!0===Array.isArray(l)&&(l=i(l).slice(0)),d[3].rotation=l,d[3].w=100,d[3].h=100,s=d[3].is||"Ball",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "Ball" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);return c[3]=r[3].call(null,{props:d[3]},c[2],t),c[3][Symbol.for("slots")][0]?(e=c[3][Symbol.for("slots")][0],u=c[3],h=!0):e=c[3][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[2]=null,d[3]=null,r[3]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("content",e.status.join("\n"))},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("x")||t[2].set("x",{transition:{value:e.x,duration:1250}})},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("y")||t[2].set("y",{transition:{value:e.y,duration:1250}})},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("rotation")||t[2].set("rotation",{transition:{value:e.rotation,duration:1400,easing:"ease-in-out"}})},function(e,t,n,r,o,i){t[3][Symbol.for("props")].x={transition:{value:e.x,duration:1250}}},function(e,t,n,r,o,i){t[3][Symbol.for("props")].y={transition:{value:e.y,duration:1250}}},function(e,t,n,r,o,i){t[3][Symbol.for("props")].rotation={transition:{value:e.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state:function(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready:function(){var e=this;this.$listen("ballUpdate",function(t){e.status.unshift("".concat(e.count++," -  ").concat(t)),e.status.length=Math.min(e.status.length,8)}),this.rotation=Ba(-90,90),this.x=910,this.y=490,this.$setInterval(function(){e.x=Ba(-300,2220),e.y=Ba(-300,1380),e.rotation=Ba(-90,90)},2500)}}}),Fa={code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=1920,l[0].h=1080,l[0].color="0xffffffff",l[0].effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].show=void 0!==t.up,s[1].populate(l[1]),e=s[1],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].src="assets/arrow.png",l[2].w=100,l[2].h=44,l[2].x=960,l[2].y=40,l[2].mount="{x: 0.5}",s[2].populate(l[2]),e=s[1],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].content=t.up&&t.up.toUpperCase(),l[3].x=960,l[3].y=100,l[3].size=76,l[3].mount="{x: 0.5}",l[3].__textnode=!0,s[3].populate(l[3]),e=s[0],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].show=void 0!==t.right,s[4].populate(l[4]),e=s[4],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].src="assets/arrow.png",l[5].w=100,l[5].h=44,l[5].x=1900,l[5].y=540,l[5].mount="{x: 1, y: 0.5}",l[5].rotation=90,s[5].populate(l[5]),e=s[4],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].content=t.right&&t.right.toUpperCase(),l[6].x=1760,l[6].y=540,l[6].size=76,l[6].rotation=90,l[6].mount=.5,l[6].__textnode=!0,s[6].populate(l[6]),e=s[0],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].show=void 0!==t.down,s[7].populate(l[7]),e=s[7],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].src="assets/arrow.png",l[8].w=100,l[8].h=44,l[8].x=960,l[8].y=1040,l[8].mount="{x: 0.5, y: 1}",l[8].rotation=180,s[8].populate(l[8]),e=s[7],l[9]={},s[9]=this.element({parent:e||"root"},t),l[9].content=t.down&&t.down.toUpperCase(),l[9].x=960,l[9].y=980,l[9].size=76,l[9].mount="{x: 0.5, y: 1}",l[9].__textnode=!0,s[9].populate(l[9]),e=s[0],l[10]={},s[10]=this.element({parent:e||"root"},t),l[10].show=void 0!==t.left,s[10].populate(l[10]),e=s[10],l[11]={},s[11]=this.element({parent:e||"root"},t),l[11].src="assets/arrow.png",l[11].w=100,l[11].h=44,l[11].x=40,l[11].y=540,l[11].mount="{ y: 0.5}",l[11].rotation="-90",s[11].populate(l[11]),e=s[10],l[12]={},s[12]=this.element({parent:e||"root"},t),l[12].content=t.left&&t.left.toUpperCase(),l[12].x=180,l[12].y=540,l[12].size=76,l[12].mount=.5,l[12].rotation="-90",l[12].__textnode=!0,s[12].populate(l[12]),e=s[0],l[13]={},s[13]=this.element({parent:e||"root"},t),l[13].content=t.pageTitle,l[13].font="raleway",l[13].x=960,l[13].y=540,l[13].size=240,l[13].mount=.5,l[13].__textnode=!0,s[13].populate(l[13]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(e,t,n,r,o,i){t[1].set("show",void 0!==e.up)},function(e,t,n,r,o,i){t[3].set("content",e.up&&e.up.toUpperCase())},function(e,t,n,r,o,i){t[4].set("show",void 0!==e.right)},function(e,t,n,r,o,i){t[6].set("content",e.right&&e.right.toUpperCase())},function(e,t,n,r,o,i){t[7].set("show",void 0!==e.down)},function(e,t,n,r,o,i){t[9].set("content",e.down&&e.down.toUpperCase())},function(e,t,n,r,o,i){t[10].set("show",void 0!==e.left)},function(e,t,n,r,o,i){t[12].set("content",e.left&&e.left.toUpperCase())},function(e,t,n,r,o,i){t[13].set("content",e.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle:function(){return this.page&&this.page.title||this.title}},state:function(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},za=Wo.Component("RouterHookPage",g(g({},Fa),{},{state:function(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right:function(){this.$router.to("/examples/router-hooks/movie")},down:function(){this.$router.to("/examples/router-hooks/episode/1")}}})),Va=Wo.Component("RouterHookMovie",g(g({},Fa),{},{state:function(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left:function(){this.$router.back()},right:function(){this.$router.to("/examples/router-hooks/rating")}}})),Ha=Wo.Component("RouterHookRating",g(g({},Fa),{},{state:function(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left:function(){this.$router.back()},right:function(){this.$router.to("/examples/router-hooks/")}}})),Ga=Wo.Component("RouterHookEpisode",g(g({},Fa),{},{state:function(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left:function(){this.$router.back()},right:function(){this.$router.to("/examples/router-hooks/episode/".concat(this.page.id+1),void 0,{inHistory:!1})}}})),qa=Wo.Component("RouterHookEpisode",g(g({},Fa),{},{state:function(){return{title:"Episodes \n overview",right:"FIRST EPISODE"}},input:{left:function(){this.$router.back()},right:function(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}})),Wa={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},Ka=[{path:"/examples/router-hooks",component:za,hooks:{before:function(e,t){return i(n().m(function r(){return n().w(function(n){for(;;)if(0===n.n)return t&&"examples/router-hooks/movie"===t.path&&(e.transition=Wa.slideInOutRight),t&&"examples/router-hooks/rating"===t.path&&(e.transition=Wa.slideInOutLeft),t&&t.path.indexOf("episode")>-1&&(e.transition=Wa.slideInOutDown),n.a(2,e)},r)}))()}}},{path:"/examples/router-hooks/episode/:id",component:Ga,hooks:{before:function(e,t){t&&t.path.indexOf("episode")>-1&&(e.transition=Wa.slideInOutLeft);var n=e.params.id;return n>5?"/examples/router-hooks/":(e.data.page={id:parseInt(n),title:"Episode ".concat(n)},e)}},transition:Wa.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:qa,transition:Wa.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:Va,hooks:{before:function(e,t){return t&&"examples/router-hooks"===t.path&&(e.transition=Wa.slideInOutLeft),t&&"examples/router-hooks/rating"===t.path&&(e.transition=Wa.slideInOutRight),e}}},{path:"/examples/router-hooks/rating",component:Ha,transition:Wa.slideInOutLeft}],Xa=Wo.Component("Resize",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].y=30,l[1].content="fit (Resize Mode) sample",l[1].maxwidth=1920,l[1].align="center",l[1].__textnode=!0,s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].x={transition:{value:t.pages.x1,duration:200}},l[2].y=90,s[2].populate(l[2]),e=s[2],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].x=100,l[3].content="Image dimensions: 2560 X 1440",l[3].__textnode=!0,s[3].populate(l[3]),e=s[2],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].x=100,l[4].y=80,l[4].content=t.titles.t1,l[4].__textnode=!0,s[4].populate(l[4]),e=s[2],l[5]={},s[5]=this.element({parent:e||"root"},t),l[5].y=150,l[5].x=100,s[5].populate(l[5]),e=s[5],l[6]={},s[6]=this.element({parent:e||"root"},t),l[6].w=t.w,l[6].h=t.w-300,l[6].src=t.img,l[6].fit="{type: 'cover', position: { y: 0 } }",s[6].populate(l[6]),e=s[5],l[7]={},s[7]=this.element({parent:e||"root"},t),l[7].w=t.w,l[7].h=t.w-300,l[7].src=t.img,l[7].fit="{ type: 'cover', position: { y: 0.5 } }",l[7].x=600,s[7].populate(l[7]),e=s[5],l[8]={},s[8]=this.element({parent:e||"root"},t),l[8].w=t.w,l[8].h=t.w-300,l[8].src=t.img,l[8].fit="{ type: 'cover', position: { y: 1 } }",l[8].x=1200,s[8].populate(l[8]),e=s[2],l[9]={},s[9]=this.element({parent:e||"root"},t),l[9].x=100,l[9].y=500,l[9].content=t.titles.t2,l[9].__textnode=!0,s[9].populate(l[9]),e=s[2],l[10]={},s[10]=this.element({parent:e||"root"},t),l[10].y=600,l[10].x=100,s[10].populate(l[10]),e=s[10],l[11]={},s[11]=this.element({parent:e||"root"},t),l[11].w=t.w,l[11].h=t.w-150,l[11].src=t.img,l[11].fit="{ type: 'cover', position: { x: 0 } }",s[11].populate(l[11]),e=s[10],l[12]={},s[12]=this.element({parent:e||"root"},t),l[12].w=t.w,l[12].h=t.w-150,l[12].src=t.img,l[12].fit="{ type: 'cover', position: { x: 0.5 } }",l[12].x=600,s[12].populate(l[12]),e=s[10],l[13]={},s[13]=this.element({parent:e||"root"},t),l[13].w=t.w,l[13].h=t.w-150,l[13].src=t.img,l[13].fit="{ type: 'cover', position: { x: 1 } }",l[13].x=1200,s[13].populate(l[13]),e=s[0],l[14]={},s[14]=this.element({parent:e||"root"},t),l[14].x={transition:{value:t.pages.x2,duration:200}},l[14].y=90,s[14].populate(l[14]),e=s[14],l[15]={},s[15]=this.element({parent:e||"root"},t),l[15].x=100,l[15].content="Image dimensions: 1440 X 2560",l[15].__textnode=!0,s[15].populate(l[15]),e=s[14],l[16]={},s[16]=this.element({parent:e||"root"},t),l[16].x=100,l[16].y=80,l[16].content=t.titles.t3,l[16].__textnode=!0,s[16].populate(l[16]),e=s[14],l[17]={},s[17]=this.element({parent:e||"root"},t),l[17].y=150,l[17].x=100,s[17].populate(l[17]),e=s[17],l[18]={},s[18]=this.element({parent:e||"root"},t),l[18].w=t.w,l[18].h=t.w-200,l[18].src=t.img1,l[18].fit="{ type: 'cover', position: { y: 0, x: 0 } }",s[18].populate(l[18]),e=s[17],l[19]={},s[19]=this.element({parent:e||"root"},t),l[19].w=t.w,l[19].h=t.w-200,l[19].src=t.img1,l[19].fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",l[19].x=600,s[19].populate(l[19]),e=s[17],l[20]={},s[20]=this.element({parent:e||"root"},t),l[20].w=t.w,l[20].h=t.w-200,l[20].src=t.img1,l[20].fit="{ type: 'cover', position: { y: 1, x: 1 } }",l[20].x=1200,s[20].populate(l[20]),e=s[14],l[21]={},s[21]=this.element({parent:e||"root"},t),l[21].x=100,l[21].y=500,l[21].content=t.titles.t4,l[21].__textnode=!0,s[21].populate(l[21]),e=s[14],l[22]={},s[22]=this.element({parent:e||"root"},t),l[22].y=570,l[22].x=100,s[22].populate(l[22]),e=s[22],l[23]={},s[23]=this.element({parent:e||"root"},t),l[23].w=t.w-350,l[23].h=t.w-100,l[23].src=t.img1,l[23].fit="{ type: 'cover', position: { x: 0 } }",s[23].populate(l[23]),e=s[22],l[24]={},s[24]=this.element({parent:e||"root"},t),l[24].w=t.w-350,l[24].h=t.w-100,l[24].src=t.img1,l[24].fit="{ type: 'cover', position: { x: 0.25 } }",l[24].x=250,s[24].populate(l[24]),e=s[22],l[25]={},s[25]=this.element({parent:e||"root"},t),l[25].w=t.w-350,l[25].h=t.w-100,l[25].src=t.img1,l[25].fit="{ type: 'cover', position: { x: 0.5 } }",l[25].x=500,s[25].populate(l[25]),e=s[22],l[26]={},s[26]=this.element({parent:e||"root"},t),l[26].w=t.w-350,l[26].h=t.w-100,l[26].src=t.img1,l[26].fit="{ type: 'cover', position: { x: 0.75 } }",l[26].x=750,s[26].populate(l[26]),e=s[22],l[27]={},s[27]=this.element({parent:e||"root"},t),l[27].w=t.w-350,l[27].h=t.w-100,l[27].src=t.img1,l[27].fit="{ type: 'cover', position: { x: 1 } }",l[27].x=1e3,s[27].populate(l[27]),e=s[0],l[28]={},s[28]=this.element({parent:e||"root"},t),l[28].x={transition:{value:t.pages.x3,duration:200}},l[28].y=90,s[28].populate(l[28]),e=s[28],l[29]={},s[29]=this.element({parent:e||"root"},t),l[29].x=100,l[29].content="Image dimensions: 2560 X 1440",l[29].__textnode=!0,s[29].populate(l[29]),e=s[28],l[30]={},s[30]=this.element({parent:e||"root"},t),l[30].x=100,l[30].y=80,l[30].content=t.titles.t5,l[30].__textnode=!0,s[30].populate(l[30]),e=s[28],l[31]={},s[31]=this.element({parent:e||"root"},t),l[31].y=150,l[31].x=100,l[31].w=t.w+100,l[31].h=t.w-200,l[31].color="0x000000ff",s[31].populate(l[31]),e=s[31],l[32]={},s[32]=this.element({parent:e||"root"},t),l[32].w=t.w+100,l[32].h=t.w-200,l[32].src=t.img,l[32].fit="contain",s[32].populate(l[32]),e=s[28],l[33]={},s[33]=this.element({parent:e||"root"},t),l[33].x=100,l[33].y=500,l[33].content=t.titles.t6,l[33].__textnode=!0,s[33].populate(l[33]),e=s[28],l[34]={},s[34]=this.element({parent:e||"root"},t),l[34].y=550,l[34].x=100,l[34].w=t.w+100,l[34].h=t.w-100,l[34].color="0x000000ff",s[34].populate(l[34]),e=s[34],l[35]={},s[35]=this.element({parent:e||"root"},t),l[35].w=t.w+100,l[35].h=t.w-100,l[35].src=t.img,l[35].fit="contain",s[35].populate(l[35]),e=s[0],l[36]={},s[36]=this.element({parent:e||"root"},t),l[36].x=1700,l[36].y=20,l[36].content="Page "+t.activePage+"/"+t.totalPages,l[36].__textnode=!0,s[36].populate(l[36]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[2].set("x",{transition:{value:e.pages.x1,duration:200}})},function(e,t,n,r,o,i){t[3].set("content","Image dimensions: 2560 X 1440")},function(e,t,n,r,o,i){t[14].set("x",{transition:{value:e.pages.x2,duration:200}})},function(e,t,n,r,o,i){t[15].set("content","Image dimensions: 1440 X 2560")},function(e,t,n,r,o,i){t[28].set("x",{transition:{value:e.pages.x3,duration:200}})},function(e,t,n,r,o,i){t[29].set("content","Image dimensions: 2560 X 1440")},function(e,t,n,r,o,i){t[36].set("content","Page "+e.activePage+"/"+e.totalPages)}],context:{}},state:function(){return{activePage:1,pages:{x1:0,x2:1920,x3:3840},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages:function(){return this.pages,Object.keys(this.pages).length}},input:{right:function(){if(this.activePage<this.totalPages){for(var e=1;e<=this.totalPages;e++)this.pages["x".concat(e)]=this.pages["x".concat(e)]-1920;this.activePage+=1}},left:function(){if(this.activePage>1){for(var e=this.totalPages;e>=1;e--)this.pages["x".concat(e)]=this.pages["x".concat(e)]+1920;this.activePage-=1}}}}),$a=Wo.Component("Flags",{code:{render:function(e,t,n,r,o,i,a){var s,l,u=this,c=[],f=[],d=[],p=[];f[0]={},c[0]=this.element({parent:e||"root"},t),c[0].populate(f[0]),e=c[0],p[1]=[],d[1]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,c=o.length,d={}||{};s=d.from||0,l="to"in d?d.to:o.length;for(;c--;)o[c],c<l&&c>=s&&a.add(""+c);for(var p=r.length;p--;)if(!1===a.has(r[p])){var h=r[p];n[1][h]&&n[1][h].destroy(),n[1][h]=null,delete n[1][h],n[2][h]&&n[2][h].destroy(),n[2][h]=null,delete n[2][h],n[3][h]&&n[3][h].destroy(),n[3][h]=null,delete n[3][h]}r.length=0;for(var m=o.length,g=0;g<m;g++)if(!(g<s||g>=l)){var y=Object.create(t);e=n[0],y.language=o[g],y.index=g,y.key=""+g,r.push(y.key),e=n[0],void 0===n[1]&&(n[1]={}),f[1]={},void 0===n[1][y.key]&&(n[1][y.key]=u.element({parent:e||"root"},t)),f[1].x=250*y.index,void 0===n[1][y.key].nodeId&&n[1][y.key].populate(f[1]),e=n[1][y.key],void 0===n[2]&&(n[2]={}),f[2]={},void 0===n[2][y.key]&&(n[2][y.key]=u.element({parent:e||"root"},t)),f[2].src=y.language.flag,f[2].w=150,f[2].h=150,f[2].alpha=y.index===y.activeIndex?1:.6,void 0===n[2][y.key].nodeId&&n[2][y.key].populate(f[2]),e=n[1][y.key],void 0===n[3]&&(n[3]={}),f[3]={},void 0===n[3][y.key]&&(n[3][y.key]=u.element({parent:e||"root"},t)),f[3].content=y.language.name,f[3].y=150,f[3].maxwidth=150,f[3].align="center",f[3].color=y.index===y.activeIndex?"0xffffffff":"0xaaaaaaff",f[3].__textnode=!0,void 0===n[3][y.key].nodeId&&n[3][y.key].populate(f[3])}return[]};var h=function(){d[1](t.languages,c,p[1])};t[Symbol.for("effects")].push(h),o(h,["languages"]);var m=function(){t.activeIndex;for(var e=0;e<t.languages.length;e++)if(!(e<s||e>=l)){var n={};n.index=e,n.language=t.languages[e],n.key=e,c[2][n.key].set("alpha",n.index===t.activeIndex?1:.6)}};t[Symbol.for("effects")].push(m),o(m);var g=function(){t.activeIndex;for(var e=0;e<t.languages.length;e++)if(!(e<s||e>=l)){var n={};n.index=e,n.language=t.languages[e],n.key=e,c[3][n.key].set("color",n.index===t.activeIndex?"0xffffffff":"0xaaaaaaff")}};return t[Symbol.for("effects")].push(g),o(g),{elms:c,cleanup:function(){t=null,e=null,p[1].length=0,d[1]=null,h=null,m=null,g=null,c.length=0,r.length=0,f.length=0,d.length=0}}},effects:[],context:{}},props:["languages"],state:function(){return{activeIndex:0}},watch:{activeIndex:function(e){var t=this.languages[e];t&&t.code&&this.$language.set(t.code)}},input:{right:function(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left:function(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),Ya=Wo.Component("LanguagePlugin",{components:{Flags:$a},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),u[0].populate(c[0]),!0===p&&(h-=1),m[1]=n.components&&n.components.Flags||r.Flags,e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].languages=t.languages,c[1].ref="flags",c[1].x=500,c[1].y=150,d[1]=[],void 0!==m[1])for(var g in m[1][Symbol.for("config")].props)delete c[1][m[1][Symbol.for("config")].props[g]],d[1].push(m[1][Symbol.for("config")].props[g]);if(u[1].populate(c[1]),!0===p&&(h-=1),e=u[1],f[2]={},f[2].languages=t.languages,f[2].ref="flags",f[2].x=500,f[2].y=150,s=f[2].is||"Flags",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "Flags" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);return u[2]=r[2].call(null,{props:f[2]},u[1],t),u[2][Symbol.for("slots")][0]?(e=u[2][Symbol.for("slots")][0],l=u[2],p=!0):e=u[2][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].x=960,c[3].y=540,c[3].mount=.5,c[3].content=t.$language.translate("hello"),c[3].size=80,c[3].__textnode=!0,u[3].populate(c[3]),!0===p&&(h-=1),e=u[0],c[4]={},u[4]=this.element({parent:e||"root"},!0===p?l:t),c[4].x=960,c[4].y=640,c[4].mount=.5,c[4].content=t.$language.translate("bye"),c[4].size=50,c[4].__textnode=!0,u[4].populate(c[4]),!0===p&&(h-=1),e=u[0],c[5]={},u[5]=this.element({parent:e||"root"},!0===p?l:t),c[5].x=960,c[5].y=720,c[5].mount=.5,c[5].content=t.$language.translate("replacement",{first:"John",last:"Doe",age:18}),c[5].size=36,c[5].__textnode=!0,u[5].populate(c[5]),!0===p&&(h-=1),e=u[0],c[6]={},u[6]=this.element({parent:e||"root"},!0===p?l:t),c[6].size=32,c[6].x=960,c[6].y=940,c[6].mount=.5,c[6].align="center",c[6].content="Current language: "+t.$language.language+"\n Language file: "+(!0===t.loaded?"Loaded":"loading ..."),c[6].__textnode=!0,u[6].populate(c[6]),!0===p&&(h-=1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[1]=null,f[2]=null,r[2]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[3].set("content",e.$language.translate("hello"))},function(e,t,n,r,o,i){t[4].set("content",e.$language.translate("bye"))},function(e,t,n,r,o,i){t[5].set("content",e.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(e,t,n,r,o,i){t[6].set("content","Current language: "+e.$language.language+"\n Language file: "+(!0===e.loaded?"Loaded":"loading ..."))}],context:{}},state:function(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init:function(){var e=this;this.$language.set("en-US"),setTimeout(function(){e.$language.load("/assets/translations.json").then(function(){e.loaded=!0})},2e3)},focus:function(){this.$select("flags").$focus()}}}),Ja=Wo.Component("Box",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=430,l[0].h=180,l[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],l[0].color="{top: '0x667a97ff', bottom: '0x475569ff'}",s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].x=25,l[1].y=20,l[1].content=t.header,l[1].w=280,l[1].color="0x000000ff",l[1].contain="width",l[1].__textnode=!0,s[1].populate(l[1]),e=s[0],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].x=25,l[2].y=90,l[2].content=t.text,l[2].size=45,l[2].w=350,l[2].contain="width",l[2].align="center",l[2].__textnode=!0,s[2].populate(l[2]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(e,t,n,r,o,i){t[1].set("content",e.header)},function(e,t,n,r,o,i){t[2].set("content",e.text)}],context:{}},props:["header","text"]}),Qa=Wo.Application({components:{Box:Ja},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),f[0].w=1920,f[0].h=1080,c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].y=250,c[1].populate(f[1]),!0===h&&(m-=1),e=c[1],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),f[2].content="KeyCode Finder",f[2].font="raleway",f[2].mount="{x: 0.5}",f[2].x=960,f[2].size=62,f[2].w=800,f[2].h=200,f[2].contain="width",f[2].__textnode=!0,c[2].populate(f[2]),!0===h&&(m-=1),e=c[1],f[3]={},c[3]=this.element({parent:e||"root"},!0===h?u:t),f[3].content="Press any key to get find the correct key code mapping",f[3].mount="{x: 0.5}",f[3].x=960,f[3].y=100,f[3].size=32,f[3].w=800,f[3].h=200,f[3].contain="width",f[3].__textnode=!0,c[3].populate(f[3]),!0===h&&(m-=1),e=c[0],f[4]={},c[4]=this.element({parent:e||"root"},!0===h?u:t),f[4].x=200,c[4].populate(f[4]),!0===h&&(m-=1),g[5]=n.components&&n.components.Box||r.Box,e=c[4],f[5]={},c[5]=this.element({parent:e||"root"},!0===h?u:t),f[5].y=600,f[5].header="Key",f[5].text=t.key,p[5]=[],void 0!==g[5])for(var y in g[5][Symbol.for("config")].props)delete f[5][g[5][Symbol.for("config")].props[y]],p[5].push(g[5][Symbol.for("config")].props[y]);if(c[5].populate(f[5]),!0===h&&(m-=1),e=c[5],d[6]={},d[6].y=600,d[6].header="Key",l=t.key,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[6].text=l,s=d[6].is||"Box",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "Box" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);if(c[6]=r[6].call(null,{props:d[6]},c[5],t),c[6][Symbol.for("slots")][0]?(e=c[6][Symbol.for("slots")][0],u=c[6],h=!0):e=c[6][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[7]=n.components&&n.components.Box||r.Box,e=c[4],f[7]={},c[7]=this.element({parent:e||"root"},!0===h?u:t),f[7].x=500,f[7].y=600,f[7].header="Code",f[7].text=t.code,p[7]=[],void 0!==g[7])for(var v in g[7][Symbol.for("config")].props)delete f[7][g[7][Symbol.for("config")].props[v]],p[7].push(g[7][Symbol.for("config")].props[v]);if(c[7].populate(f[7]),!0===h&&(m-=1),e=c[7],d[8]={},d[8].x=500,d[8].y=600,d[8].header="Code",l=t.code,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[8].text=l,s=d[8].is||"Box",r[8],"string"==typeof s){if(r[8]=n.components&&n.components[s]||r[s],!r[8])throw new Error('Component "Box" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[8]=s);if(c[8]=r[8].call(null,{props:d[8]},c[7],t),c[8][Symbol.for("slots")][0]?(e=c[8][Symbol.for("slots")][0],u=c[8],h=!0):e=c[8][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[9]=n.components&&n.components.Box||r.Box,e=c[4],f[9]={},c[9]=this.element({parent:e||"root"},!0===h?u:t),f[9].x=1e3,f[9].y=600,f[9].header="keyCode",f[9].text=t.keyCode,p[9]=[],void 0!==g[9])for(var b in g[9][Symbol.for("config")].props)delete f[9][g[9][Symbol.for("config")].props[b]],p[9].push(g[9][Symbol.for("config")].props[b]);if(c[9].populate(f[9]),!0===h&&(m-=1),e=c[9],d[10]={},d[10].x=1e3,d[10].y=600,d[10].header="keyCode",l=t.keyCode,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[10].text=l,s=d[10].is||"Box",r[10],"string"==typeof s){if(r[10]=n.components&&n.components[s]||r[s],!r[10])throw new Error('Component "Box" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[10]=s);return c[10]=r[10].call(null,{props:d[10]},c[9],t),c[10][Symbol.for("slots")][0]?(e=c[10][Symbol.for("slots")][0],u=c[10],h=!0):e=c[10][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),e=c[0],f[11]={},c[11]=this.element({parent:e||"root"},!0===h?u:t),f[11].mount="{x: 1}",f[11].x=1860,f[11].y=1e3,f[11].size=30,f[11].content=t.backLabel,f[11].color=t.backPressed?"0xffffffff":"0x667a97ff",f[11].__textnode=!0,c[11].populate(f[11]),!0===h&&(m-=1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[5]=null,d[6]=null,r[6]=null,g[7]=null,d[8]=null,r[8]=null,g[9]=null,d[10]=null,r[10]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[5]&&-1!==skips[5].indexOf("text")||t[5].set("text",e.key)},function(e,t,n,r,o,i){t[6][Symbol.for("props")].text=e.key},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[7]&&-1!==skips[7].indexOf("text")||t[7].set("text",e.code)},function(e,t,n,r,o,i){t[8][Symbol.for("props")].text=e.code},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[9]&&-1!==skips[9].indexOf("text")||t[9].set("text",e.keyCode)},function(e,t,n,r,o,i){t[10][Symbol.for("props")].text=e.keyCode},function(e,t,n,r,o,i){t[11].set("content",e.backLabel)},function(e,t,n,r,o,i){t[11].set("color",e.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state:function(){return{backPressed:!1,key:"...",code:"...",keyCode:"..."}},computed:{backLabel:function(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels:function(e){this.key=e.key,this.code=e.code,this.keyCode=e.keyCode+""}},input:{any:function(e){this.backPressed=!1,this.updateLabels(e)},back:function(e){var t=this;return!0===this.backPressed?this.$router.back():this.updateLabels(e),function(){t.backPressed=!0}}}}),Za=Wo.Component("Accent",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=300,l[0].h=250,l[0].color=t.bColor,l[0].effects=[{type:"radius",props:{radius:8}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].x=150,l[1].y=125,l[1].mount="{x:0.5, y:0.5}",l[1].content=t.lang,l[1].color="0xffffffff",l[1].font="lato-black",l[1].__textnode=!0,s[1].populate(l[1]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("color",e.bColor)},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[1].set("content",e.lang)}],context:{}},state:function(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus:function(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus:function(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),es=Wo.Component("Accents",{components:{Accent:Za},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=[];h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),p[0].populate(h[0]),e=p[0],h[1]={},p[1]=this.element({parent:e||"root"},!0===b?u:t),h[1].x={transition:t.x},p[1].populate(h[1]),e=p[1],y[2]=[],m[2]=function(){var a=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,m=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),y=new Set,w=m.length,S={}||{};c=S.from||0,f="to"in S?S.to:m.length;for(;w--;){var T=m[w];w<f&&w>=c&&y.add(""+T.lang)}for(var k=p.length;k--;)if(!1===y.has(p[k])){var C=p[k];a[2][C]&&a[2][C].destroy(),a[2][C]=null,delete a[2][C],a[3][C]&&a[3][C].destroy(),a[3][C]=null,delete a[3][C]}p.length=0;for(var A=m.length,E=[],I=function(){if(M<c||M>=f)return 1;var y=Object.create(t);if(e=a[1],y.item=m[M],y.index=M,y.key=""+y.item.lang,p.push(y.key),x[2]=n.components&&n.components.Accent||r.Accent,void 0===a[2]&&(a[2]={}),h[2]={},void 0===a[2][y.key]&&(a[2][y.key]=d.element({parent:e||"root"},!0===b?u:t)),h[2].lang=y.item.lang,h[2].ref="accent"+y.index,h[2].x=400*y.index,v[2]=[],void 0!==x[2])for(var w in x[2][Symbol.for("config")].props)delete h[2][x[2][Symbol.for("config")].props[w]],v[2].push(x[2][Symbol.for("config")].props[w]);if(void 0===a[2][y.key].nodeId&&a[2][y.key].populate(h[2]),void 0===a[3]&&(a[3]={}),e=a[2][y.key],g[3]={},void 0===a[3][y.key]){if(g[3].lang=y.item.lang,l="accent"+y.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[3].ref=l,g[3].x=400*y.index,s=g[3].is||"Accent",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "Accent" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);a[3][y.key]=r[3].call(null,{props:g[3]},a[2][y.key],t),a[3][y.key][Symbol.for("slots")][0]?(e=a[3][y.key][Symbol.for("slots")][0],u=a[3][y.key],b=!0):e=a[3][y.key][Symbol.for("children")][0]}var S=function(){void 0!==v&&void 0!==v[2]&&-1!==v[2].indexOf("ref")||a[2][y.key].set("ref","accent"+y.index)};o(S,null),E.push(S),t[Symbol.for("effects")].push(S),a[3][y.key][Symbol.for("props")].ref="accent"+y.index},M=0;M<A;M++)I();return E};var w=function(){m[2](t.data,p,y[2])};return t[Symbol.for("effects")].push(w),o(w,["data"]),e=p[0],h[4]={},p[4]=this.element({parent:e||"root"},!0===b?u:t),h[4].content=t.activeAccent,h[4].font="lato-black",h[4].x=960,h[4].y=400,h[4].mount="{x:0.5}",h[4].letterspacing=10,h[4].size=40,h[4].__textnode=!0,p[4].populate(h[4]),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,y[2].length=0,m[2]=null,x[2]=null,g[3]=null,r[3]=null,w=null,x.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("x",{transition:e.x})},function(e,t,n,r,o,i){t[4].set("content",e.activeAccent)}],context:{}},props:["data"],state:function(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex:function(e){var t=this.$select("accent".concat(e));t&&t.$focus&&(t.$focus(),this.activeAccent=this.data[e].chars)}},hooks:{focus:function(){this.$trigger("activeIndex")}},input:{right:function(){this.activeIndex<this.data.length-1&&this.move(1)},left:function(){this.activeIndex>0&&this.move(-1)}},methods:{move:function(e){var t=this.activeIndex+e;this.x=t>3?400*-(t-3)-160:160,this.activeIndex=t}}}),ts=Wo.Component("Characters",{components:{Accents:es},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),c[0].w=1920,u[0].populate(c[0]),!0===p&&(h-=1),e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].x=960,c[1].y=50,c[1].mount="{x:0.5}",c[1].content="Alphabets",c[1].font="lato-black",c[1].size=60,c[1].__textnode=!0,u[1].populate(c[1]),!0===p&&(h-=1),e=u[0],c[2]={},u[2]=this.element({parent:e||"root"},!0===p?l:t),c[2].x=960,c[2].y=150,c[2].mount="{x:0.5}",c[2].content=t.alphabets,c[2].font="lato-black",c[2].size=40,c[2].letterspacing=10,c[2].__textnode=!0,u[2].populate(c[2]),!0===p&&(h-=1),e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].x=960,c[3].y=290,c[3].mount="{x:0.5}",c[3].content="Accents",c[3].font="lato-black",c[3].size=60,c[3].__textnode=!0,u[3].populate(c[3]),!0===p&&(h-=1),m[4]=n.components&&n.components.Accents||r.Accents,e=u[0],c[4]={},u[4]=this.element({parent:e||"root"},!0===p?l:t),c[4].data=t.accents,c[4].y=400,c[4].ref="accents",d[4]=[],void 0!==m[4])for(var g in m[4][Symbol.for("config")].props)delete c[4][m[4][Symbol.for("config")].props[g]],d[4].push(m[4][Symbol.for("config")].props[g]);if(u[4].populate(c[4]),!0===p&&(h-=1),e=u[4],f[5]={},f[5].data=t.accents,f[5].y=400,f[5].ref="accents",s=f[5].is||"Accents",r[5],"string"==typeof s){if(r[5]=n.components&&n.components[s]||r[s],!r[5])throw new Error('Component "Accents" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[5]=s);return u[5]=r[5].call(null,{props:f[5]},u[4],t),u[5][Symbol.for("slots")][0]?(e=u[5][Symbol.for("slots")][0],l=u[5],p=!0):e=u[5][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),e=u[0],c[6]={},u[6]=this.element({parent:e||"root"},!0===p?l:t),c[6].w=950,c[6].h=40,c[6].color="0x000000ff",c[6].effects=[{type:"radius",props:{radius:10}}],c[6].y=1e3,c[6].placement="center",u[6].populate(c[6]),!0===p&&(h-=1),e=u[6],c[7]={},u[7]=this.element({parent:e||"root"},!0===p?l:t),c[7].content="The character ? represents a character that is not supported by the Lato-Black font",c[7].size=25,c[7].x=475,c[7].y=20,c[7].mount="{x:0.5, y:0.5}",c[7].__textnode=!0,u[7].populate(c[7]),!0===p&&(h-=1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[4]=null,f[5]=null,r[5]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state:function(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus:function(){var e=this.$select("accents");e&&e.$focus&&e.$focus()}}}),ns=Wo.Component("Layout",{components:{Ball:Ua},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f=this,d=[],p=[],h=[],m=[],g=[],y=[],v=!1,b=0,x=[];p[0]={},d[0]=this.element({parent:e||"root"},!0===v?l:t),p[0].w=1920,p[0].h=1080,p[0].color="0xc4b5fdff",d[0].populate(p[0]),!0===v&&(b-=1),e=d[0],p[1]={},d[1]=this.element({parent:e||"root"},!0===v?l:t),p[1].x=40,p[1].y=40,d[1].populate(p[1]),!0===v&&(b-=1),e=d[1],p[2]={},d[2]=this.element({parent:e||"root"},!0===v?l:t),p[2].color="0x222222ff",p[2].content="Static horizontal Layout",p[2].__textnode=!0,d[2].populate(p[2]),!0===v&&(b-=1),e=d[1],p[3]={},d[3]=this.element({parent:e||"root"},!0===v?l:t),p[3].y=50,p[3].gap=10,p[3].__layout=!0,d[3].populate(p[3]),!0===v&&(b-=1),e=d[3],p[4]={},d[4]=this.element({parent:e||"root"},!0===v?l:t),p[4].w=50,p[4].h=100,p[4].color="0xeff6ffff",d[4].populate(p[4]),!0===v&&(b-=1),e=d[3],p[5]={},d[5]=this.element({parent:e||"root"},!0===v?l:t),p[5].w=60,p[5].h=100,p[5].color="0xbfdbfeff",d[5].populate(p[5]),!0===v&&(b-=1),e=d[3],p[6]={},d[6]=this.element({parent:e||"root"},!0===v?l:t),p[6].w=70,p[6].h=100,p[6].color="0x60a5faff",d[6].populate(p[6]),!0===v&&(b-=1),e=d[3],p[7]={},d[7]=this.element({parent:e||"root"},!0===v?l:t),p[7].w=80,p[7].h=100,p[7].color="0x2563ebff",d[7].populate(p[7]),!0===v&&(b-=1),e=d[3],p[8]={},d[8]=this.element({parent:e||"root"},!0===v?l:t),p[8].w=90,p[8].h=100,p[8].color="0x1e40afff",d[8].populate(p[8]),!0===v&&(b-=1),e=d[0],p[9]={},d[9]=this.element({parent:e||"root"},!0===v?l:t),p[9].x=40,p[9].y=220,d[9].populate(p[9]),!0===v&&(b-=1),e=d[9],p[10]={},d[10]=this.element({parent:e||"root"},!0===v?l:t),p[10].color="0x222222ff",p[10].content="Static vertical Layout",p[10].__textnode=!0,d[10].populate(p[10]),!0===v&&(b-=1),e=d[9],p[11]={},d[11]=this.element({parent:e||"root"},!0===v?l:t),p[11].y=50,p[11].gap=10,p[11].direction="vertical",p[11].__layout=!0,d[11].populate(p[11]),!0===v&&(b-=1),e=d[11],p[12]={},d[12]=this.element({parent:e||"root"},!0===v?l:t),p[12].w=100,p[12].h=50,p[12].color="0xeff6ffff",d[12].populate(p[12]),!0===v&&(b-=1),e=d[11],p[13]={},d[13]=this.element({parent:e||"root"},!0===v?l:t),p[13].w=100,p[13].h=60,p[13].color="0xbfdbfeff",d[13].populate(p[13]),!0===v&&(b-=1),e=d[11],p[14]={},d[14]=this.element({parent:e||"root"},!0===v?l:t),p[14].w=100,p[14].h=70,p[14].color="0x60a5faff",d[14].populate(p[14]),!0===v&&(b-=1),e=d[11],p[15]={},d[15]=this.element({parent:e||"root"},!0===v?l:t),p[15].w=100,p[15].h=80,p[15].color="0x2563ebff",d[15].populate(p[15]),!0===v&&(b-=1),e=d[11],p[16]={},d[16]=this.element({parent:e||"root"},!0===v?l:t),p[16].w=100,p[16].h=90,p[16].color="0x1e40afff",d[16].populate(p[16]),!0===v&&(b-=1),e=d[0],p[17]={},d[17]=this.element({parent:e||"root"},!0===v?l:t),p[17].x=40,p[17].y=700,d[17].populate(p[17]),!0===v&&(b-=1),e=d[17],p[18]={},d[18]=this.element({parent:e||"root"},!0===v?l:t),p[18].color="0x222222ff",p[18].content="Nested Layouts",p[18].__textnode=!0,d[18].populate(p[18]),!0===v&&(b-=1),e=d[17],p[19]={},d[19]=this.element({parent:e||"root"},!0===v?l:t),p[19].y=50,p[19].gap=10,p[19].direction="horizontal",p[19].__layout=!0,d[19].populate(p[19]),!0===v&&(b-=1),e=d[19],p[20]={},d[20]=this.element({parent:e||"root"},!0===v?l:t),p[20].w=100,p[20].h=50,p[20].color="0xeff6ffff",d[20].populate(p[20]),!0===v&&(b-=1),e=d[19],p[21]={},d[21]=this.element({parent:e||"root"},!0===v?l:t),p[21].w=100,p[21].h=60,p[21].color="0xbfdbfeff",d[21].populate(p[21]),!0===v&&(b-=1),e=d[19],p[22]={},d[22]=this.element({parent:e||"root"},!0===v?l:t),p[22].direction="vertical",p[22].gap=10,p[22].__layout=!0,d[22].populate(p[22]),!0===v&&(b-=1),e=d[22],p[23]={},d[23]=this.element({parent:e||"root"},!0===v?l:t),p[23].w=100,p[23].h=70,p[23].color="0x60a5faff",d[23].populate(p[23]),!0===v&&(b-=1),e=d[22],p[24]={},d[24]=this.element({parent:e||"root"},!0===v?l:t),p[24].w=100,p[24].h=70,p[24].color="0x60a5faff",d[24].populate(p[24]),!0===v&&(b-=1),e=d[22],p[25]={},d[25]=this.element({parent:e||"root"},!0===v?l:t),p[25].w=100,p[25].h=70,p[25].color="0x60a5faff",d[25].populate(p[25]),!0===v&&(b-=1),e=d[22],p[26]={},d[26]=this.element({parent:e||"root"},!0===v?l:t),p[26].gap=50,p[26].__layout=!0,d[26].populate(p[26]),!0===v&&(b-=1),e=d[26],p[27]={},d[27]=this.element({parent:e||"root"},!0===v?l:t),p[27].w=50,p[27].h=50,p[27].color="0x2563ebff",d[27].populate(p[27]),!0===v&&(b-=1),e=d[26],p[28]={},d[28]=this.element({parent:e||"root"},!0===v?l:t),p[28].w=50,p[28].h=50,p[28].color="0x2563ebff",d[28].populate(p[28]),!0===v&&(b-=1),e=d[26],p[29]={},d[29]=this.element({parent:e||"root"},!0===v?l:t),p[29].w=50,p[29].h=50,p[29].color="0x2563ebff",d[29].populate(p[29]),!0===v&&(b-=1),e=d[19],p[30]={},d[30]=this.element({parent:e||"root"},!0===v?l:t),p[30].w=100,p[30].h=80,p[30].color="0x2563ebff",d[30].populate(p[30]),!0===v&&(b-=1),e=d[19],p[31]={},d[31]=this.element({parent:e||"root"},!0===v?l:t),p[31].w=100,p[31].h=90,p[31].color="0x1e40afff",d[31].populate(p[31]),!0===v&&(b-=1),e=d[0],p[32]={},d[32]=this.element({parent:e||"root"},!0===v?l:t),p[32].x=800,p[32].y=40,d[32].populate(p[32]),!0===v&&(b-=1),e=d[32],p[33]={},d[33]=this.element({parent:e||"root"},!0===v?l:t),p[33].color="0x222222ff",p[33].content="Layout with Text",p[33].__textnode=!0,d[33].populate(p[33]),!0===v&&(b-=1),e=d[32],p[34]={},d[34]=this.element({parent:e||"root"},!0===v?l:t),p[34].y=50,p[34].gap=20,p[34].__layout=!0,d[34].populate(p[34]),!0===v&&(b-=1),e=d[34],p[35]={},d[35]=this.element({parent:e||"root"},!0===v?l:t),p[35].w=3,p[35].h=32,p[35].color="0x60a5faff",d[35].populate(p[35]),!0===v&&(b-=1),e=d[34],p[36]={},d[36]=this.element({parent:e||"root"},!0===v?l:t),p[36].color="0x1e40afff",p[36].content="Hello",p[36].__textnode=!0,d[36].populate(p[36]),!0===v&&(b-=1),e=d[34],p[37]={},d[37]=this.element({parent:e||"root"},!0===v?l:t),p[37].w=3,p[37].h=32,p[37].color="0x60a5faff",d[37].populate(p[37]),!0===v&&(b-=1),e=d[34],p[38]={},d[38]=this.element({parent:e||"root"},!0===v?l:t),p[38].content="World",p[38].color="0x1e40afff",p[38].__textnode=!0,d[38].populate(p[38]),!0===v&&(b-=1),e=d[34],p[39]={},d[39]=this.element({parent:e||"root"},!0===v?l:t),p[39].w=3,p[39].h=32,p[39].color="0x60a5faff",d[39].populate(p[39]),!0===v&&(b-=1),e=d[0],p[40]={},d[40]=this.element({parent:e||"root"},!0===v?l:t),p[40].x=800,p[40].y=210,d[40].populate(p[40]),!0===v&&(b-=1),e=d[40],p[41]={},d[41]=this.element({parent:e||"root"},!0===v?l:t),p[41].color="0x222222ff",p[41].content="Dynamic dimensions Layout",p[41].__textnode=!0,d[41].populate(p[41]),!0===v&&(b-=1),e=d[40],p[42]={},d[42]=this.element({parent:e||"root"},!0===v?l:t),p[42].y=50,p[42].gap=20,p[42]["@updated"]=t.dynamicLayoutUpdated&&t.dynamicLayoutUpdated.bind(t),p[42].__layout=!0,d[42].populate(p[42]),!0===v&&(b-=1),e=d[42],p[43]={},d[43]=this.element({parent:e||"root"},!0===v?l:t),p[43].w=.5*t.w,p[43].h=60,p[43].color="0xeff6ffff",d[43].populate(p[43]),!0===v&&(b-=1),e=d[42],p[44]={},d[44]=this.element({parent:e||"root"},!0===v?l:t),p[44].w=.6*t.w,p[44].h=60,p[44].color="0xbfdbfeff",d[44].populate(p[44]),!0===v&&(b-=1),e=d[42],p[45]={},d[45]=this.element({parent:e||"root"},!0===v?l:t),p[45].w=.7*t.w,p[45].h=60,p[45].color="0x60a5faff",d[45].populate(p[45]),!0===v&&(b-=1),e=d[42],p[46]={},d[46]=this.element({parent:e||"root"},!0===v?l:t),p[46].w=.8*t.w,p[46].h=60,p[46].color="0x2563ebff",d[46].populate(p[46]),!0===v&&(b-=1),e=d[42],p[47]={},d[47]=this.element({parent:e||"root"},!0===v?l:t),p[47].w=.9*t.w,p[47].h=60,p[47].color="0x1e40afff",d[47].populate(p[47]),!0===v&&(b-=1),e=d[0],p[48]={},d[48]=this.element({parent:e||"root"},!0===v?l:t),p[48].x=800,p[48].y=400,d[48].populate(p[48]),!0===v&&(b-=1),e=d[48],p[49]={},d[49]=this.element({parent:e||"root"},!0===v?l:t),p[49].color="0x222222ff",p[49].content="For loop Layout",p[49].__textnode=!0,d[49].populate(p[49]),!0===v&&(b-=1),e=d[48],p[50]={},d[50]=this.element({parent:e||"root"},!0===v?l:t),p[50].y=50,p[50].gap=20,p[50].__layout=!0,d[50].populate(p[50]),!0===v&&(b-=1),e=d[50],g[51]=[],h[51]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,s=o.length,d={}||{};u=d.from||0,c="to"in d?d.to:o.length;for(;s--;)o[s],s<c&&s>=u&&a.add(""+s);for(var h=r.length;h--;)if(!1===a.has(r[h])){var m=r[h];n[51][m]&&n[51][m].destroy(),n[51][m]=null,delete n[51][m]}r.length=0;for(var g=o.length,y=0;y<g;y++)if(!(y<u||y>=c)){var x=Object.create(t);e=n[50],x.color=o[y],x[void 0]=y,x.key=""+y,r.push(x.key),e=n[50],void 0===n[51]&&(n[51]={}),p[51]={},void 0===n[51][x.key]&&(n[51][x.key]=f.element({parent:e||"root"},!0===v?l:t)),p[51].w=60,p[51].h=60,p[51].color=x.color,void 0===n[51][x.key].nodeId&&(n[51][x.key].populate(p[51]),!0===v&&(b-=1))}return[]};var w=function(){h[51](t.colors,d,g[51])};t[Symbol.for("effects")].push(w),o(w,["colors"]);var S,T,k=function(){t.color;for(var e=0;e<t.colors.length;e++)if(!(e<u||e>=c)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,d[51][n.key].set("color",n.color)}};t[Symbol.for("effects")].push(k),o(k),e=d[0],p[52]={},d[52]=this.element({parent:e||"root"},!0===v?l:t),p[52].x=800,p[52].y=600,d[52].populate(p[52]),!0===v&&(b-=1),e=d[52],p[53]={},d[53]=this.element({parent:e||"root"},!0===v?l:t),p[53].color="0x222222ff",p[53].content="Layout with transitions",p[53].__textnode=!0,d[53].populate(p[53]),!0===v&&(b-=1),e=d[52],p[54]={},d[54]=this.element({parent:e||"root"},!0===v?l:t),p[54].direction="horizontal",p[54].gap=20,p[54].y=60,p[54].__layout=!0,d[54].populate(p[54]),!0===v&&(b-=1),e=d[54],g[55]=[],h[55]=function(){var n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),a=new Set,s=o.length,u={}||{};S=u.from||0,T="to"in u?u.to:o.length;for(;s--;)o[s],s<T&&s>=S&&a.add(""+s);for(var c=r.length;c--;)if(!1===a.has(r[c])){var d=r[c];n[55][d]&&n[55][d].destroy(),n[55][d]=null,delete n[55][d],n[56][d]&&n[56][d].destroy(),n[56][d]=null,delete n[56][d],n[57][d]&&n[57][d].destroy(),n[57][d]=null,delete n[57][d],n[58][d]&&n[58][d].destroy(),n[58][d]=null,delete n[58][d],n[59][d]&&n[59][d].destroy(),n[59][d]=null,delete n[59][d],n[60][d]&&n[60][d].destroy(),n[60][d]=null,delete n[60][d]}r.length=0;for(var h=o.length,m=0;m<h;m++)if(!(m<S||m>=T)){var g=Object.create(t);e=n[54],g.color=o[m],g[void 0]=m,g.key=""+m,r.push(g.key),e=n[54],void 0===n[55]&&(n[55]={}),p[55]={},void 0===n[55][g.key]&&(n[55][g.key]=f.element({parent:e||"root"},!0===v?l:t)),p[55].h=100,p[55].w={transition:{value:g.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},p[55].color=g.color,void 0===n[55][g.key].nodeId&&(n[55][g.key].populate(p[55]),!0===v&&(b-=1)),e=n[55][g.key],void 0===n[56]&&(n[56]={}),p[56]={},void 0===n[56][g.key]&&(n[56][g.key]=f.element({parent:e||"root"},!0===v?l:t)),p[56].gap=10,p[56].x=10,p[56].y=35,p[56].__layout=!0,void 0===n[56][g.key].nodeId&&(n[56][g.key].populate(p[56]),!0===v&&(b-=1)),e=n[56][g.key],void 0===n[57]&&(n[57]={}),p[57]={},void 0===n[57][g.key]&&(n[57][g.key]=f.element({parent:e||"root"},!0===v?l:t)),p[57].h=20,p[57].w={transition:{value:g.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},p[57].color="0xffffffff",void 0===n[57][g.key].nodeId&&(n[57][g.key].populate(p[57]),!0===v&&(b-=1)),e=n[56][g.key],void 0===n[58]&&(n[58]={}),p[58]={},void 0===n[58][g.key]&&(n[58][g.key]=f.element({parent:e||"root"},!0===v?l:t)),p[58].h=20,p[58].w={transition:{value:g.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},p[58].color="0xccccccff",void 0===n[58][g.key].nodeId&&(n[58][g.key].populate(p[58]),!0===v&&(b-=1)),e=n[56][g.key],void 0===n[59]&&(n[59]={}),p[59]={},void 0===n[59][g.key]&&(n[59][g.key]=f.element({parent:e||"root"},!0===v?l:t)),p[59].h=20,p[59].w={transition:{value:g.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},p[59].color="0x333333ff",void 0===n[59][g.key].nodeId&&(n[59][g.key].populate(p[59]),!0===v&&(b-=1)),e=n[56][g.key],void 0===n[60]&&(n[60]={}),p[60]={},void 0===n[60][g.key]&&(n[60][g.key]=f.element({parent:e||"root"},!0===v?l:t)),p[60].h=20,p[60].w={transition:{value:g.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},p[60].color="0x000000ff",void 0===n[60][g.key].nodeId&&(n[60][g.key].populate(p[60]),!0===v&&(b-=1))}return[]};var C=function(){h[55](t.colors,d,g[55])};t[Symbol.for("effects")].push(C),o(C,["colors"]);var A=function(){t.w3;for(var e=0;e<t.colors.length;e++)if(!(e<S||e>=T)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,d[55][n.key].set("w",{transition:{value:t.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(A),o(A);var E=function(){t.color;for(var e=0;e<t.colors.length;e++)if(!(e<S||e>=T)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,d[55][n.key].set("color",n.color)}};t[Symbol.for("effects")].push(E),o(E);var I=function(){t.w2;for(var e=0;e<t.colors.length;e++)if(!(e<S||e>=T)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,d[57][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(I),o(I);var M=function(){t.w2;for(var e=0;e<t.colors.length;e++)if(!(e<S||e>=T)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,d[58][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(M),o(M);var R=function(){t.w2;for(var e=0;e<t.colors.length;e++)if(!(e<S||e>=T)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,d[59][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};t[Symbol.for("effects")].push(R),o(R);var _=function(){t.w2;for(var e=0;e<t.colors.length;e++)if(!(e<S||e>=T)){var n={};n[void 0]=e,n.color=t.colors[e],n.key=e,d[60][n.key].set("w",{transition:{value:t.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};if(t[Symbol.for("effects")].push(_),o(_),e=d[0],p[61]={},d[61]=this.element({parent:e||"root"},!0===v?l:t),p[61].x=800,p[61].y=840,d[61].populate(p[61]),!0===v&&(b-=1),e=d[61],p[62]={},d[62]=this.element({parent:e||"root"},!0===v?l:t),p[62].color="0x222222ff",p[62].content="Layout with padding",p[62].__textnode=!0,d[62].populate(p[62]),!0===v&&(b-=1),e=d[61],p[63]={},d[63]=this.element({parent:e||"root"},!0===v?l:t),p[63].direction="horizontal",p[63].gap=20,p[63].y=60,p[63].padding=20,p[63].color="0xffffffff",p[63].__layout=!0,d[63].populate(p[63]),!0===v&&(b-=1),e=d[63],p[64]={},d[64]=this.element({parent:e||"root"},!0===v?l:t),p[64].w=40,p[64].h=40,p[64].color="0xbfdbfeff",d[64].populate(p[64]),!0===v&&(b-=1),e=d[63],p[65]={},d[65]=this.element({parent:e||"root"},!0===v?l:t),p[65].w=40,p[65].h=40,p[65].color="0x60a5faff",d[65].populate(p[65]),!0===v&&(b-=1),e=d[63],p[66]={},d[66]=this.element({parent:e||"root"},!0===v?l:t),p[66].w=40,p[66].h=40,p[66].color="0x2563ebff",d[66].populate(p[66]),!0===v&&(b-=1),e=d[61],p[67]={},d[67]=this.element({parent:e||"root"},!0===v?l:t),p[67].direction="horizontal",p[67].gap=20,p[67].y=60,p[67].x=240,p[67].padding={top:40,y:10,left:40,x:10},p[67].color="0xffffffff",p[67].__layout=!0,d[67].populate(p[67]),!0===v&&(b-=1),e=d[67],p[68]={},d[68]=this.element({parent:e||"root"},!0===v?l:t),p[68].w=40,p[68].h=40,p[68].color="0xbfdbfeff",d[68].populate(p[68]),!0===v&&(b-=1),e=d[67],p[69]={},d[69]=this.element({parent:e||"root"},!0===v?l:t),p[69].w=40,p[69].h=40,p[69].color="0x60a5faff",d[69].populate(p[69]),!0===v&&(b-=1),e=d[67],p[70]={},d[70]=this.element({parent:e||"root"},!0===v?l:t),p[70].w=40,p[70].h=40,p[70].color="0x2563ebff",d[70].populate(p[70]),!0===v&&(b-=1),e=d[61],p[71]={},d[71]=this.element({parent:e||"root"},!0===v?l:t),p[71].direction="vertical",p[71].gap=20,p[71].y=60,p[71].x=500,p[71].padding=20,p[71].color="0xffffffff",p[71].__layout=!0,d[71].populate(p[71]),!0===v&&(b-=1),e=d[71],p[72]={},d[72]=this.element({parent:e||"root"},!0===v?l:t),p[72].w=40,p[72].h=20,p[72].color="0xbfdbfeff",d[72].populate(p[72]),!0===v&&(b-=1),e=d[71],p[73]={},d[73]=this.element({parent:e||"root"},!0===v?l:t),p[73].w=40,p[73].h=20,p[73].color="0x60a5faff",d[73].populate(p[73]),!0===v&&(b-=1),e=d[71],p[74]={},d[74]=this.element({parent:e||"root"},!0===v?l:t),p[74].w=40,p[74].h=20,p[74].color="0x2563ebff",d[74].populate(p[74]),!0===v&&(b-=1),e=d[61],p[75]={},d[75]=this.element({parent:e||"root"},!0===v?l:t),p[75].direction="vertical",p[75].gap=20,p[75].y=60,p[75].x=640,p[75].padding={top:40,y:10,left:40,x:10},p[75].color="0xffffffff",p[75].__layout=!0,d[75].populate(p[75]),!0===v&&(b-=1),e=d[75],p[76]={},d[76]=this.element({parent:e||"root"},!0===v?l:t),p[76].w=40,p[76].h=20,p[76].color="0xbfdbfeff",d[76].populate(p[76]),!0===v&&(b-=1),e=d[75],p[77]={},d[77]=this.element({parent:e||"root"},!0===v?l:t),p[77].w=40,p[77].h=20,p[77].color="0x60a5faff",d[77].populate(p[77]),!0===v&&(b-=1),e=d[75],p[78]={},d[78]=this.element({parent:e||"root"},!0===v?l:t),p[78].w=40,p[78].h=20,p[78].color="0x2563ebff",d[78].populate(p[78]),!0===v&&(b-=1),e=d[0],p[79]={},d[79]=this.element({parent:e||"root"},!0===v?l:t),p[79].x=1300,p[79].y=210,d[79].populate(p[79]),!0===v&&(b-=1),e=d[79],p[80]={},d[80]=this.element({parent:e||"root"},!0===v?l:t),p[80].color="0x222222ff",p[80].content="Layout with a Component",p[80].__textnode=!0,d[80].populate(p[80]),!0===v&&(b-=1),e=d[79],p[81]={},d[81]=this.element({parent:e||"root"},!0===v?l:t),p[81].y=50,p[81].gap=40,p[81].__layout=!0,d[81].populate(p[81]),!0===v&&(b-=1),e=d[81],p[82]={},d[82]=this.element({parent:e||"root"},!0===v?l:t),p[82].w=100,p[82].h=100,p[82].color="0xff0000ff",d[82].populate(p[82]),!0===v&&(b-=1),e=d[81],p[83]={},d[83]=this.element({parent:e||"root"},!0===v?l:t),p[83].w=t.w,p[83].h=100,p[83].color="0xff0000ff",d[83].populate(p[83]),!0===v&&(b-=1),x[84]=n.components&&n.components.Ball||r.Ball,e=d[81],p[84]={},d[84]=this.element({parent:e||"root"},!0===v?l:t),p[84].y=500,p[84].w=100,y[84]=[],void 0!==x[84])for(var L in x[84][Symbol.for("config")].props)delete p[84][x[84][Symbol.for("config")].props[L]],y[84].push(x[84][Symbol.for("config")].props[L]);if(d[84].populate(p[84]),!0===v&&(b-=1),e=d[84],m[85]={},m[85].y=500,m[85].w=100,s=m[85].is||"Ball",r[85],"string"==typeof s){if(r[85]=n.components&&n.components[s]||r[s],!r[85])throw new Error('Component "Ball" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[85]=s);return d[85]=r[85].call(null,{props:m[85]},d[84],t),d[85][Symbol.for("slots")][0]?(e=d[85][Symbol.for("slots")][0],l=d[85],v=!0):e=d[85][Symbol.for("children")][0],!0===v&&0===b&&(v=!1),e=d[81],p[86]={},d[86]=this.element({parent:e||"root"},!0===v?l:t),p[86].w=100,p[86].h=100,p[86].color="0xff0000ff",d[86].populate(p[86]),!0===v&&(b-=1),{elms:d,cleanup:function(){l=null,t=null,e=null,g[51].length=0,h[51]=null,w=null,k=null,g[55].length=0,h[55]=null,C=null,A=null,E=null,I=null,M=null,R=null,_=null,x[84]=null,m[85]=null,r[85]=null,x.length=0,d.length=0,r.length=0,p.length=0,h.length=0,m.length=0,y.length=0}}},effects:[function(e,t,n,r,o,i){t[43].set("w",.5*e.w)},function(e,t,n,r,o,i){t[44].set("w",.6*e.w)},function(e,t,n,r,o,i){t[45].set("w",.7*e.w)},function(e,t,n,r,o,i){t[46].set("w",.8*e.w)},function(e,t,n,r,o,i){t[47].set("w",.9*e.w)},function(e,t,n,r,o,i){t[67].set("padding",{top:40,y:10,left:40,x:10})},function(e,t,n,r,o,i){t[75].set("padding",{top:40,y:10,left:40,x:10})},function(e,t,n,r,o,i){t[83].set("w",e.w)}],context:{}},state:function(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready:function(){var e=this;this.$setInterval(function(){e.w=100===e.w?50:100,e.w2=20===e.w2?40:20,e.w3=150===e.w3?250:150},2e3),this.$setTimeout(function(){e.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated:function(e){this.$log.info("Dynamic layout updated",e.w,e.h)}}}),rs="undefined"!=typeof window?window:{},os=[],is={};function as(e){var t;try{t=function(e,t){var n=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(arguments.length>1?arguments[1]:void 0).split("."),n=e,r=function(e){n=(Object.entries(n).find(function(n){var r=y(n,2),o=r[0];r[1];return o.toLowerCase()===t[e].toLowerCase()})||[null,{}])[1]},o=0;o<t.length;o++)r(o);return n}(ji,e);e.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(n={event:e,listening:!0});return"function"==typeof n?null==t?n():n(t):n}(e.method,e.params)}catch(n){setTimeout(function(){return Fi(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:e.id}))})}setTimeout(function(){return Fi(JSON.stringify({jsonrpc:"2.0",result:t,id:e.id}))})}function ss(e,t,n){var r=Object.entries(is).find(function(n){var r=y(n,2);r[0];return r[1].toLowerCase()===e.toLowerCase()+"."+t.toLowerCase()});if(r){var o=JSON.stringify({jsonrpc:"2.0",id:parseInt(r[0]),result:n});Fi(o)}}rs.__firebolt&&rs.__firebolt.testHarness&&(zi=rs.__firebolt.testHarness);var ls={send:function e(t){console.debug("Sending message to transport: "+t);var n=JSON.parse(t);if(Array.isArray(n))n.forEach(function(t){return e(JSON.stringify(t))});else{var r=y(n.method.split("."),2),o=r[0],i=r[1];zi&&zi.onSend&&zi.onSend(o,i,n.params,n.id),i.match(/^on[A-Z]/)&&(n.params.listen?is[n.id]=o.toLowerCase()+"."+i[2].toLowerCase()+i.substr(3):Object.keys(is).forEach(function(e){is[e]===o.toLowerCase()+"."+i[2].toLowerCase()+i.substr(3)&&delete is[e]})),ji?as(n):os.push(n)}},receive:function(e){Fi=e,zi&&"function"==typeof zi.initialize&&zi.initialize({emit:ss,listen:function(){Bi.apply(void 0,arguments)}})},event:ss};function us(e,t,n){var r=e?Object.values(e).length:0;return r===n&&void 0===t?"getter":r===n&&"function"==typeof t||0===r&&"function"==typeof t?"subscriber":r===n&&void 0!==t?"setter":null}var cs={};var fs={mock:function(e,t,n,r,o,i){var a=us(n,r,o),s=o?"."+Object.keys(n).filter(function(e){return"value"!==e}).map(function(e){return n[e]}).join("."):"",l="".concat(e,".").concat(t).concat(s);if("getter"===a)return cs.hasOwnProperty(l)?cs[l]:i;if("subscriber"===a);else if("setter"===a)return cs[l]=r,ls.event(e,"".concat(t,"Changed"),{value:r}),null}},ds={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(e){return fs.mock("Accessibility","closedCaptionsSettings",e,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},highContrastUI:function(e){return fs.mock("Accessibility","highContrastUI",e,void 0,0,!0)},voiceGuidance:{enabled:!0,navigationHints:!0,rate:1},voiceGuidanceSettings:function(e){return fs.mock("Accessibility","voiceGuidanceSettings",e,void 0,0,{enabled:!0,navigationHints:!0,rate:1})},audioDescriptionSettings:function(e){return fs.mock("Accessibility","audioDescriptionSettings",e,void 0,0,{enabled:!0})}},ps={id:function(e){return fs.mock("Account","id",e,void 0,0,"123")},uid:function(e){return fs.mock("Account","uid",e,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},hs={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(e){return fs.mock("Advertising","policy",e,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},ms={id:function(e){return fs.mock("Device","id",e,void 0,0,"123")},distributor:function(e){return fs.mock("Device","distributor",e,void 0,0,"Company")},platform:function(e){return fs.mock("Device","platform",e,void 0,0,"WPE")},uid:function(e){return fs.mock("Device","uid",e,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(e){return fs.mock("Device","type",e,void 0,0,"STB")},model:function(e){return fs.mock("Device","model",e,void 0,0,"xi6")},sku:function(e){return fs.mock("Device","sku",e,void 0,0,"AX061AEI")},make:function(e){return fs.mock("Device","make",e,void 0,0,"Arris")},version:function(e){return fs.mock("Device","version",e,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(e){return fs.mock("Device","hdcp",e,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(e){return fs.mock("Device","hdr",e,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(e){return fs.mock("Device","audio",e,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(e){return fs.mock("Device","screenResolution",e,void 0,0,[1920,1080])},videoResolution:function(e){return fs.mock("Device","videoResolution",e,void 0,0,[1920,1080])},name:function(e){return fs.mock("Device","name",e,void 0,0,"Living Room")},network:function(e){return fs.mock("Device","network",e,void 0,0,{state:"connected",type:"wifi"})}},gs={policy:function(e){return fs.mock("Discovery","policy",e,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null},ys={state:"inactive",previous:"initializing"},vs={state:"foreground",previous:"inactive"},bs={state:"unloading",previous:"inactive"},xs=function(e){ls.event("Lifecycle",e.state,e)},ws="undefined"!=typeof window?window:{},Ss=!!ws.__firebolt&&!!ws.__firebolt.automation,Ts={ready:function(){ys.previous="initializing",setTimeout(function(){return xs(ys)},Ss?1:500),vs.previous="inactive",setTimeout(function(){return xs(vs)},Ss?2:1e3)},close:function(e){var t=e.reason;if("remoteButton"===t)ys.previous="foreground",setTimeout(function(){return xs(ys)},Ss?1:500);else{if(!["userExit","error"].includes(t))throw"Invalid close reason";ys.previous="foreground",bs.previous="inactive",setTimeout(function(){return xs(ys)},Ss?1:500),setTimeout(function(){return xs(bs)},Ss?2:1e3)}},finished:function(){ws.location&&(ws.location.href="about:blank")}},ks={locality:function(e){return fs.mock("Localization","locality",e,void 0,0,"Philadelphia")},postalCode:function(e){return fs.mock("Localization","postalCode",e,void 0,0,"19103")},countryCode:function(e){return fs.mock("Localization","countryCode",e,void 0,0,"US")},language:function(e){return fs.mock("Localization","language",e,void 0,0,"en")},preferredAudioLanguages:function(e){return fs.mock("Localization","preferredAudioLanguages",e,void 0,0,["spa","eng"])},locale:function(e){return fs.mock("Localization","locale",e,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},Cs={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(e){return fs.mock("SecondScreen","friendlyName",e,void 0,0,"Living Room")}},As={localization:ks,device:ms,accessibility:ds},Es=function(){return p(function e(){f(this,e),this._callback=null,this._queue=[]},[{key:"send",value:function(e){this._queue.push(e)}},{key:"receive",value:function(e){this._callback=e}},{key:"flush",value:function(e){e.receive(this._callback),this._queue.forEach(function(t){return e.send(t)})}}])}(),Is={},Ms=function(){return Is.platform.logLevel},Rs="undefined"!=typeof window?window:{},_s=function(){function e(t){f(this,e),this.bridge=t}return p(e,[{key:"send",value:function(e){this.bridge.JSMessageChanged(e,function(){})}},{key:"receive",value:function(e){Rs.$badger=Rs.$badger||{};var t=Rs.$badger.callback?Rs.$badger.callback.bind(Rs.$badger):null,n=Rs.$badger.event?Rs.$badger.event.bind(Rs.$badger):null;Rs.$badger.callback=function(n,r,o){o.jsonrpc?e(JSON.stringify(o)):t&&t(n,r,o)},Rs.$badger.event=function(t,r){r.jsonrpc?e(JSON.stringify(r)):n&&n(t,r)}}}],[{key:"isLegacy",value:function(t){return e.isXREProxy(t)||void 0===t.send&&t.JSMessageChanged}},{key:"isXREProxy",value:function(e){return void 0!==e.proxyObjectTest}}])}(),Ls=function(){return p(function e(t){f(this,e),this._endpoint=t,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]},[{key:"send",value:function(e){this._connect(),this._connected?this._ws.send(e):this._queue.length<100&&this._queue.push(e)}},{key:"receive",value:function(e){e&&(this._connect(),this._callbacks.push(e))}},{key:"_notifyCallbacks",value:function(e){for(var t=this,n=function(n){setTimeout(function(){return t._callbacks[n](e)},1)},r=0;r<this._callbacks.length;r++)n(r)}},{key:"_connect",value:function(){var e=this;this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",function(t){e._notifyCallbacks(t.data)}),this._ws.addEventListener("error",function(e){}),this._ws.addEventListener("close",function(t){e._ws=null,e._connected=!1}),this._ws.addEventListener("open",function(t){e._connected=!0;for(var n=0;n<e._queue.length;n++)e._ws.send(e._queue[n]);e._queue=[]}))}}])}();var Ps={transform:function(e,t){if(!t||!t.methods)return e;var n=t.methods,r=JSON.parse(JSON.stringify(e));return Object.keys(n).forEach(function(e){var t=n[e],o=y(t["x-method"].split("."),2),i=o[0],a=o[1],s={};s[t["x-this-param"]]=r,r[e]=function(){for(var e=0;e<arguments.length;e++)s[t["x-additional-params"][e]]=e<0||arguments.length<=e?void 0:arguments[e];return Ns.send(i.toLowerCase(),a,s)}}),r}},Ds=null,Os="undefined"!=typeof window?window:{},Ns=function(){function e(){f(this,e),this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new Es,this._deprecated={},this.isMock=!1}return p(e,[{key:"_endpoint",value:function(){return Os.__firebolt&&Os.__firebolt.endpoint?Os.__firebolt.endpoint:null}},{key:"constructTransportLayer",value:function(){var e,t=this,n=this._endpoint();return n&&(n.startsWith("ws://")||n.startsWith("wss://"))?(e=new Ls(n)).receive(this.receiveHandler.bind(this)):void 0!==Os.ServiceManager&&Os.ServiceManager&&Os.ServiceManager.version?(e=this._queue,Os.ServiceManager.getServiceForJavaScript("com.comcast.BridgeObject_1",function(n){e=_s.isLegacy(n)?new _s(n):n,t.setTransportLayer(e)})):(this.isMock=!0,(e=ls).receive(this.receiveHandler.bind(this))),e}},{key:"setTransportLayer",value:function(e){this._transport=e,this._queue.flush(e)}},{key:"_send",value:function(e,t,n,r){return!Array.isArray(e)||t||n?this._sendAndGetId(e,t,n,r).promise:this._batch(e)}},{key:"_sendAndGetId",value:function(e,t,n,r){var o=this._processRequest(e,t,n,r),i=o.promise,a=o.json,s=o.id,l=JSON.stringify(a);return"DEBUG"===Ms()&&console.debug("Sending message to transport: "+l),this._transport.send(l),{id:s,promise:i}}},{key:"_batch",value:function(e){var t=this,n=[],r=[];e.forEach(function(e){var o=e.module,i=e.method,a=e.params,s=e.transforms,l=t._processRequest(o,i,a,s);n.push({promise:l.promise,id:l.id}),r.push(l.json)});var o=JSON.stringify(r);return"DEBUG"===Ms()&&console.debug("Sending message to transport: "+o),this._transport.send(o),n}},{key:"_processRequest",value:function(e,t,n,r){var o={promise:this._addPromiseToQueue(e,t,n,r),json:this._createRequestJSON(e,t,n),id:this._id};return this._id++,o}},{key:"_createRequestJSON",value:function(e,t,n){return{jsonrpc:"2.0",method:e.toLowerCase()+"."+t,params:n,id:this._id}}},{key:"_addPromiseToQueue",value:function(e,t,n,r){var o=this;return new Promise(function(i,a){o._promises[o._id]={},o._promises[o._id].promise=o,o._promises[o._id].resolve=i,o._promises[o._id].reject=a,o._promises[o._id].transforms=r;var s=o._deprecated[e.toLowerCase()+"."+t.toLowerCase()];s&&console.warn("WARNING: ".concat(e,".").concat(t,"() is deprecated. ")+s.alternative),t.match(/^on[A-Z]/)&&(n.listen?o._eventIds.push(o._id):o._eventIds=o._eventIds.filter(function(e){return e!==o._id}))})}},{key:"receiveHandler",value:function(e){"DEBUG"===Ms()&&console.debug("Received message from transport: "+e);var t,n=JSON.parse(e),r=this._promises[n.id];if(r){if(n.error)r.reject(n.error);else{var o=n.result;r.transforms&&(o=Array.isArray(n.result)?o.map(function(e){return Ps.transform(e,r.transforms)}):Ps.transform(o,r.transforms)),r.resolve(o)}delete this._promises[n.id]}this._eventIds.includes(n.id)&&(!(t=n.result)||"string"!=typeof t.event||"boolean"!=typeof t.listening)&&this._eventEmitters.forEach(function(e){e(n.id,n.result)})}},{key:"init",value:function(){var e,t;e={},t={log:!0},Is.app=e,Is.platform=g({logLevel:"WARN"},t),Is.user={},this._queue.receive(this.receiveHandler.bind(this)),Os.__firebolt&&(!0===Os.__firebolt.mockTransportLayer?(this.isMock=!0,this.setTransportLayer(ls)):Os.__firebolt.getTransportLayer&&this.setTransportLayer(Os.__firebolt.getTransportLayer())),null==this._transport&&(this._transport=this.constructTransportLayer())}}],[{key:"addEventEmitter",value:function(t){e.get()._eventEmitters.push(t)}},{key:"registerDeprecatedMethod",value:function(t,n,r){e.get()._deprecated[t.toLowerCase()+"."+n.toLowerCase()]={alternative:r||""}}},{key:"send",value:function(t,n,r,o){return e.get()._send(t,n,r,o)}},{key:"listen",value:function(t,n,r,o){return e.get()._sendAndGetId(t,n,r,o)}},{key:"get",value:function(){if(Os.__firebolt=Os.__firebolt||{},null==Os.__firebolt.transport&&null==Ds){var t=new e;t.init(),t.isMock?Ds=t:(Os.__firebolt=Os.__firebolt||{},Os.__firebolt.transport=t),Os.__firebolt.setTransportLayer=t.setTransportLayer.bind(t)}return Os.__firebolt.transport?Os.__firebolt.transport:Ds}}])}();Os.__firebolt=Os.__firebolt||{},Os.__firebolt.setTransportLayer=function(e){Ns.get().setTransportLayer(e)};var Us=0,Bs={internal:{},external:{},get:function(e){return Object.assign(Object.assign({},Bs.internal[e]),Bs.external[e])},set:function(e,t,n){Bs.external[e]=Bs.external[e]||{},Bs.external[e][t]=n},setInternal:function(e,t,n){Bs.internal[e]=Bs.internal[e]||{},Bs.internal[e][t]=n},find:function(e){var t;return[Bs.internal,Bs.external].find(function(n){if(t=Object.keys(n).find(function(t){return n[t][e]}))return!0}),t},remove:function(e){[Bs.internal,Bs.external].forEach(function(t){Object.keys(t).forEach(function(n){t[n]&&t[n][e]&&(delete t[n][e],0===Object.values(t[n]).length&&delete t[n])})})},removeKey:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&Bs.internal[e]&&delete Bs.internal[e],Bs.external[e]&&delete Bs.external[e]},keys:function(){return Array.from(new Set(Object.keys(Bs.internal).concat(Object.keys(Bs.external))))},count:function(e){return Object.values(Bs.get(e)).length}},js={},Fs=[],zs={},Vs={},Hs=!1,Gs=function(e,t){Ks(Bs.internal[js[e]],[t]),Ks(Bs.external[js[e]],[t])},qs=function(e,t){zs[e.toLowerCase()]=t.concat()},Ws=function(e,t,n){Vs[e.toLowerCase()]=Vs[e.toLowerCase()]||{},Vs[e.toLowerCase()][t]=n.concat()},Ks=function(e,t){e&&Object.keys(e).forEach(function(n){var r=e[n];Fs.indexOf(parseInt(n))>=0&&(Fs.splice(Fs.indexOf(parseInt(n)),1),delete e[n]),r.apply(null,t)})},Xs=function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(el(),"function"!=typeof n)return Promise.reject("No valid callback function provided.");if("*"===e)return Promise.reject("No valid module name provided");var a,s,l="*"===t,u=l?zs[e]:[t],c=[],f=Object.values(r).length>0,d=Object.keys(r).sort().map(function(e){return e+"="+JSON.stringify(r[e])}).join("&");Us++,o&&Fs.push(Us),u.forEach(function(t){var o=e+"."+t+(f?".".concat(d):"");if(0===Object.values(Bs.get(o)).length){var a=Object.assign({listen:!0},r),s=Ns.listen(e,"on"+t[0].toUpperCase()+t.substring(1),a),u=s.id,p=s.promise;js[u]=o,c.push(p)}var h=i?Bs.setInternal:Bs.set;h(o,""+Us,l?function(e){return n(t,e)}:n)});var p=new Promise(function(e,t){a=e,s=t}),h=Us;return c.length?c.reduce(function(e,n){return e.then(function(){return n}).then(function(e){a(h)}).catch(function(e){"*"===t?a(h):(Zs(h,t,r),s(e))})},Promise.resolve()):a(Us),p},$s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop(),o=y(Ys.apply(void 0,t),3);return[o[0],o[1],r,o[2]]},Ys=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=(t.shift()||"*").toLowerCase(),o=t.shift()||"*",i={},a=0;t.length;a++)i[Vs[r][o][a]]=t.shift();return[r,o,i]},Js=function(){var e=y($s.apply(void 0,arguments),4),t=e[0],n=e[1],r=e[2],o=e[3];return Xs(t,n,r,o,!1)},Qs=function(e,t){var n=y(e.split(".").slice(0,2),2),r=n[0],o=n[1],i=Object.assign({listen:!1},t);Ns.send(r,"on"+o[0].toUpperCase()+o.substr(1),i)},Zs=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if("*"===t&&(t=!1),"number"==typeof e){var r=e.toString(),o=Bs.find(r);return!!o&&(Bs.remove(r),0===Bs.count(o)&&Qs(o),!0)}if(e||t)if(t){var i=Object.values(n).length>0,a=Object.keys(n).sort().map(function(e){return e+"="+JSON.stringify(n[e])}).join("&"),s=e+"."+t+(i?".".concat(a):"");Bs.removeKey(s),Qs(s,n)}else Bs.keys().forEach(function(t){0===t.indexOf(e.toLowerCase())&&(Bs.removeKey(t),Qs(t))});else Bs.keys().forEach(function(e){Bs.removeKey(e),Qs(e)})},el=function(){Hs||(Ns.addEventEmitter(Gs),Bi=Js,Hs=!0)},tl={listen:Js,once:function(){var e=y($s.apply(void 0,arguments),4),t=e[0],n=e[1],r=e[2],o=e[3];return Xs(t,n,r,o,!0)},clear:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t&&t.length&&"number"==typeof t[0])return Zs(t[0]);if(t&&t.length&&"number"==typeof t[1])return Zs(t[1]);var r=y(Ys.apply(void 0,t),3),o=r[0],i=r[1],a=r[2];return Zs(o,i,a)},broadcast:function(e,t){Gs(Object.entries(js).find(function(t){var n=y(t,2);n[0];return n[1]==="app."+e})[0],t)}};var nl={prop:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=Object.values(n).length,l=us(n,r,a);if("getter"===l)return Ns.send(e,t,n);if("subscriber"===l){if(o)throw new Error("Cannot subscribe to an immutable property");return tl.listen.apply(tl,[e,t+"Changed"].concat(h(Object.values(n)),[r]))}if("setter"===l){if(o)throw new Error("Cannot set a value to an immutable property");if(i)throw new Error("Cannot set a value to a readonly property");return Ns.send(e,"set"+t[0].toUpperCase()+t.substring(1),Object.assign({value:r},n))}throw s<a?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}};qs("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","highContrastUIChanged","voiceGuidanceSettingsChanged"]),Ns.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead."),Ns.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");var rl={id:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Account","id",t,e,!0,!0,0)},uid:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Account","uid",t,e,!0,!0,0)}};qs("Advertising",["policyChanged"]),Ns.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead."),qs("Capabilities",["available","granted","revoked","unavailable"]),Ws("Capabilities","available",["capability"]),Ws("Capabilities","granted",["role","capability"]),Ws("Capabilities","revoked",["role","capability"]),Ws("Capabilities","unavailable",["capability"]),qs("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]),Ns.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead."),Ns.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead."),Ns.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");var ol={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:function(){return new Promise(function(e,t){Ns.send("device","version").then(function(t){(t=t||{}).sdk=t.sdk||{},t.sdk.major=parseInt("1"),t.sdk.minor=parseInt("5"),t.sdk.patch=parseInt("0"),t.sdk.readable="Firebolt Core SDK 1.5.0",e(t)}).catch(function(e){t(e)})})},audio:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","audio",t,e,!1,!0,0)},clear:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tl.clear.apply(tl,["Device"].concat(t))},distributor:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","distributor",t,e,!0,!0,0)},hdcp:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","hdcp",t,e,!1,!0,0)},hdr:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","hdr",t,e,!1,!0,0)},id:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","id",t,e,!0,!0,0)},listen:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tl.listen.apply(tl,["Device"].concat(t))},make:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","make",t,e,!0,!0,0)},model:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","model",t,e,!0,!0,0)},name:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","name",t,e,!1,!0,0)},network:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","network",t,e,!1,!0,0)},once:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tl.once.apply(tl,["Device"].concat(t))},platform:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","platform",t,e,!0,!0,0)},screenResolution:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","screenResolution",t,e,!1,!0,0)},sku:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","sku",t,e,!0,!0,0)},type:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","type",t,e,!0,!0,0)},uid:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","uid",t,e,!0,!0,0)},videoResolution:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Device","videoResolution",t,e,!1,!0,0)}},il={};qs("Discovery",["navigateTo","policyChanged"]),function(e,t,n){if(il[e])throw"Capability ".concat(e," has multiple provider interfaces registered.");n.forEach(function(e){return e.name="".concat(t,".").concat(e.name)}),il[e]=n.concat()}("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]),Ns.registerDeprecatedMethod("Discovery","entityInfo","Use null instead."),Ns.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead."),Ns.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead."),Ns.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead."),Ns.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead."),qs("Lifecycle",["background","foreground","inactive","suspended","unloading"]),qs("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]),Ns.registerDeprecatedMethod("Localization","language","Use Localization.locale instead."),Ns.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");var al={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:function(){return Ns.send("Localization","additionalInfo",{},null)},clear:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tl.clear.apply(tl,["Localization"].concat(t))},countryCode:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Localization","countryCode",t,e,!1,!0,0)},language:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Localization","language",t,e,!1,!0,0)},latlon:function(){return Ns.send("Localization","latlon",{},null)},listen:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tl.listen.apply(tl,["Localization"].concat(t))},locale:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Localization","locale",t,e,!1,!0,0)},locality:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Localization","locality",t,e,!1,!0,0)},once:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tl.once.apply(tl,["Localization"].concat(t))},postalCode:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Localization","postalCode",t,e,!1,!0,0)},preferredAudioLanguages:function(){var e=arguments[0],t={};return 1===arguments.length&&"function"==typeof arguments[0]&&(e=arguments[0],t={}),nl.prop("Localization","preferredAudioLanguages",t,e,!1,!0,0)}};qs("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]),ji={Accessibility:ds,Account:ps,Advertising:hs,Authentication:{token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},Capabilities:{supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},Device:ms,Discovery:gs,Keyboard:{email:"user@domain.com",password:"abc123",standard:"Living Room"},Lifecycle:Ts,Localization:ks,Metrics:{ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},Parameters:{initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},Profile:{approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},SecondScreen:Cs,SecureStorage:{get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},Platform:As},os.forEach(function(e){return as(e)}),os.length=0;var sl,ll={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},ul=Wo.Component("Module",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].w=t.w,l[0].h=t.h,l[0].color=t.bColor,l[0].effects=[{type:"radius",props:{radius:8}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].x=t.w/2,l[1].y=t.h/2,l[1].mount="{x:0.5, y:0.5}",l[1].content=t.name,l[1].color=t.fColor,l[1].font="raleway",l[1].__textnode=!0,s[1].populate(l[1]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("color",e.bColor)},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:8}}])},function(e,t,n,r,o,i){t[1].set("content",e.name)}],context:{}},state:function(){return{w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}},props:["name"],hooks:{focus:function(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus:function(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter:function(){this.$router.to("/examples/firebolt/".concat(this.name))}}}),cl=Wo.Component("Methods",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].w=t.w,l[1].h=t.h,l[1].color=t.nameBgColor,l[1].effects=[{type:"radius",props:{radius:[8,8,0,0]}}],s[1].populate(l[1]),e=s[1],l[2]={},s[2]=this.element({parent:e||"root"},t),l[2].content=t.name,l[2].x=t.w/2,l[2].y=t.h/2,l[2].mount=.5,l[2].color="0xffffffff",l[2].font="lato",l[2].size=50,l[2].__textnode=!0,s[2].populate(l[2]),e=s[0],l[3]={},s[3]=this.element({parent:e||"root"},t),l[3].w=t.w,l[3].h=50,l[3].color="0x4b5563ff",l[3].y=75,l[3].effects=[{type:"radius",props:{radius:[0,0,8,8]}}],s[3].populate(l[3]),e=s[3],l[4]={},s[4]=this.element({parent:e||"root"},t),l[4].content=t.about,l[4].maxwidth=t.w,l[4].align="center",l[4].font="lato",l[4].maxlines=1,l[4].size=28,l[4].y=6,l[4].__textnode=!0,s[4].populate(l[4]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("color",e.nameBgColor)},function(e,t,n,r,o,i){t[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(e,t,n,r,o,i){t[2].set("content",e.name)},function(e,t,n,r,o,i){t[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(e,t,n,r,o,i){t[4].set("content",e.about)}],context:{}},state:function(){return{w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["name","about"],hooks:{focus:function(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }",this.$emit("execute",this.name)},unfocus:function(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),fl=Wo.Component("List",{components:{Method:cl,Module:ul},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f,d=this,p=[],h=[],m=[],g=[],y=[],v=[],b=!1,x=[];h[0]={},p[0]=this.element({parent:e||"root"},!0===b?u:t),p[0].populate(h[0]),e=p[0],h[1]={},p[1]=this.element({parent:e||"root"},!0===b?u:t),h[1].y={transition:t.y},p[1].populate(h[1]),e=p[1],y[2]=[],m[2]=function(){var a=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,m=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),y=new Set,w=m.length,S={}||{};c=S.from||0,f="to"in S?S.to:m.length;for(;w--;){var T=m[w];w<f&&w>=c&&y.add(""+T.name)}for(var k=p.length;k--;)if(!1===y.has(p[k])){var C=p[k];a[2][C]&&a[2][C].destroy(),a[2][C]=null,delete a[2][C],a[3][C]&&a[3][C].destroy(),a[3][C]=null,delete a[3][C]}p.length=0;for(var A=m.length,E=[],I=function(){if(M<c||M>=f)return 1;var y=Object.create(t);if(e=a[1],y.item=m[M],y.index=M,y.key=""+y.item.name,p.push(y.key),x[2]=n.components&&n.components.Method||r.Method,void 0===a[2]&&(a[2]={}),h[2]={},void 0===a[2][y.key]&&(a[2][y.key]=d.element({parent:e||"root"},!0===b?u:t)),h[2].name=y.item.name,h[2].about=y.item.about,h[2].y=160*y.index,h[2].ref=y.type+y.index,v[2]=[],void 0!==x[2])for(var w in x[2][Symbol.for("config")].props)delete h[2][x[2][Symbol.for("config")].props[w]],v[2].push(x[2][Symbol.for("config")].props[w]);if(void 0===a[2][y.key].nodeId&&a[2][y.key].populate(h[2]),void 0===a[3]&&(a[3]={}),e=a[2][y.key],g[3]={},void 0===a[3][y.key]){if(g[3].name=y.item.name,g[3].about=y.item.about,l=160*y.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[3].y=l,l=y.type+y.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[3].ref=l,s=g[3].is||"Method",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "Method" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);a[3][y.key]=r[3].call(null,{props:g[3]},a[2][y.key],t),a[3][y.key][Symbol.for("slots")][0]?(e=a[3][y.key][Symbol.for("slots")][0],u=a[3][y.key],b=!0):e=a[3][y.key][Symbol.for("children")][0]}var S=function(){void 0!==v&&void 0!==v[2]&&-1!==v[2].indexOf("y")||a[2][y.key].set("y",160*y.index)};o(S,null),E.push(S),t[Symbol.for("effects")].push(S),a[3][y.key][Symbol.for("props")].y=160*y.index},M=0;M<A;M++)I();return E};var w=function(){m[2](t.methods,p,y[2])};t[Symbol.for("effects")].push(w),o(w,["methods"]);var S=function(){t.type;for(var e=0;e<t.methods.length;e++)if(!(e<c||e>=f)){var n={};n.index=e,n.item=t.methods[e],n.key=n.item.name,void 0!==v&&void 0!==v[2]&&-1!==v[2].indexOf("ref")||p[2][n.key].set("ref",t.type+n.index)}};t[Symbol.for("effects")].push(S),o(S);var T,k,C=function(){t.type;for(var e=0;e<t.methods.length;e++)if(!(e<c||e>=f)){var n={};n.index=e,n.item=t.methods[e],n.key=n.item.name,p[3][n.key][Symbol.for("props")].ref=t.type+n.index}};t[Symbol.for("effects")].push(C),o(C),e=p[0],h[4]={},p[4]=this.element({parent:e||"root"},!0===b?u:t),h[4].x={transition:t.x},h[4].y=325,p[4].populate(h[4]),e=p[4],y[5]=[],m[5]=function(){var o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,c=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),f=new Set,p=c.length,m={}||{};T=m.from||0,k="to"in m?m.to:c.length;for(;p--;){var y=c[p];p<k&&p>=T&&f.add(""+y.id)}for(var w=a.length;w--;)if(!1===f.has(a[w])){var S=a[w];o[5][S]&&o[5][S].destroy(),o[5][S]=null,delete o[5][S],o[6][S]&&o[6][S].destroy(),o[6][S]=null,delete o[6][S]}a.length=0;for(var C=c.length,A=0;A<C;A++)if(!(A<T||A>=k)){var E=Object.create(t);if(e=o[4],E.item=c[A],E.index=A,E.key=""+E.item.id,a.push(E.key),x[5]=n.components&&n.components.Module||r.Module,void 0===o[5]&&(o[5]={}),h[5]={},void 0===o[5][E.key]&&(o[5][E.key]=d.element({parent:e||"root"},!0===b?u:t)),h[5].name=E.item.name,h[5].ref=E.type+E.index,h[5].x=400*E.index,v[5]=[],void 0!==x[5])for(var I in x[5][Symbol.for("config")].props)delete h[5][x[5][Symbol.for("config")].props[I]],v[5].push(x[5][Symbol.for("config")].props[I]);if(void 0===o[5][E.key].nodeId&&o[5][E.key].populate(h[5]),void 0===o[6]&&(o[6]={}),e=o[5][E.key],g[6]={},void 0===o[6][E.key]){if(g[6].name=E.item.name,l=E.type+E.index,!0===Array.isArray(l)&&(l=i(l).slice(0)),g[6].ref=l,g[6].x=400*E.index,s=g[6].is||"Module",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "Module" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);o[6][E.key]=r[6].call(null,{props:g[6]},o[5][E.key],t),o[6][E.key][Symbol.for("slots")][0]?(e=o[6][E.key][Symbol.for("slots")][0],u=o[6][E.key],b=!0):e=o[6][E.key][Symbol.for("children")][0]}}return[]};var A=function(){m[5](t.modules,p,y[5])};t[Symbol.for("effects")].push(A),o(A,["modules"]);var E=function(){t.type;for(var e=0;e<t.modules.length;e++)if(!(e<T||e>=k)){var n={};n.index=e,n.item=t.modules[e],n.key=n.item.id,void 0!==v&&void 0!==v[5]&&-1!==v[5].indexOf("ref")||p[5][n.key].set("ref",t.type+n.index)}};t[Symbol.for("effects")].push(E),o(E);var I=function(){t.type;for(var e=0;e<t.modules.length;e++)if(!(e<T||e>=k)){var n={};n.index=e,n.item=t.modules[e],n.key=n.item.id,p[6][n.key][Symbol.for("props")].ref=t.type+n.index}};return t[Symbol.for("effects")].push(I),o(I),{elms:p,cleanup:function(){l=null,u=null,t=null,e=null,y[2].length=0,m[2]=null,x[2]=null,g[3]=null,r[3]=null,w=null,S=null,C=null,y[5].length=0,m[5]=null,x[5]=null,g[6]=null,r[6]=null,A=null,E=null,I=null,x.length=0,p.length=0,r.length=0,h.length=0,m.length=0,g.length=0,v.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("y",{transition:e.y})},function(e,t,n,r,o,i){t[4].set("x",{transition:e.x})}],context:{}},state:function(){return{x:400,y:100,activeIndex:0}},props:["data","type"],computed:{methods:function(){return this.isModule,this.data,this.isModule?[]:this.data},modules:function(){return this.isModule,this.data,this.isModule?this.data:[]},isModule:function(){return this.type,"module"===this.type}},watch:{activeIndex:function(e){var t=this.$select("".concat(this.type).concat(e));t&&t.$focus&&t.$focus()}},hooks:{focus:function(){this.$trigger("activeIndex")}},input:{right:function(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left:function(){this.isModule&&this.activeIndex>0&&this.move(-1)},down:function(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up:function(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move:function(e){var t=this.activeIndex+e;"method"==this.type?this.y=t>5?160*-(t-5)-100:100:"module"==this.type&&(this.x=t>3?400*-(t-3)-400:400),this.activeIndex=t}}}),dl=Wo.Component("FireBolt",{components:{List:fl},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),u[0].populate(c[0]),!0===p&&(h-=1),e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].content="FireBolt Modules",c[1].x=960,c[1].y=80,c[1].mount="{x:0.5}",c[1].size=80,c[1].font="raleway",c[1].__textnode=!0,u[1].populate(c[1]),!0===p&&(h-=1),m[2]=n.components&&n.components.List||r.List,e=u[0],c[2]={},u[2]=this.element({parent:e||"root"},!0===p?l:t),c[2].data=t.moduleNames,c[2].type="module",c[2].ref="modules",d[2]=[],void 0!==m[2])for(var g in m[2][Symbol.for("config")].props)delete c[2][m[2][Symbol.for("config")].props[g]],d[2].push(m[2][Symbol.for("config")].props[g]);if(u[2].populate(c[2]),!0===p&&(h-=1),e=u[2],f[3]={},f[3].data=t.moduleNames,f[3].type="module",f[3].ref="modules",s=f[3].is||"List",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "List" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);return u[3]=r[3].call(null,{props:f[3]},u[2],t),u[3][Symbol.for("slots")][0]?(e=u[3][Symbol.for("slots")][0],l=u[3],p=!0):e=u[3][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[2]=null,f[3]=null,r[3]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[],context:{}},computed:{moduleNames:function(){return Object.keys(ll).map(function(e){return{id:e,name:e.charAt(0).toUpperCase()+e.slice(1)}})}},hooks:{focus:function(){var e=this.$select("modules");e&&e.$focus&&e.$focus()}}}),pl=Wo.Component("DeviceModule",{components:{List:fl},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),u[0].populate(c[0]),!0===p&&(h-=1),e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].content="Device",c[1].x=960,c[1].mount="{x:0.5}",c[1].y=50,c[1].font="raleway",c[1].size=40,c[1].__textnode=!0,u[1].populate(c[1]),!0===p&&(h-=1),e=u[0],c[2]={},u[2]=this.element({parent:e||"root"},!0===p?l:t),c[2].content=t.device.about,c[2].x=960,c[2].mount="{x:0.5}",c[2].y=110,c[2].font="lato",c[2].__textnode=!0,u[2].populate(c[2]),!0===p&&(h-=1),m[3]=n.components&&n.components.List||r.List,e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].data=t.device.methods,c[3].x=300,c[3].ref="methods",c[3].type="method",c[3].y=100,d[3]=[],void 0!==m[3])for(var g in m[3][Symbol.for("config")].props)delete c[3][m[3][Symbol.for("config")].props[g]],d[3].push(m[3][Symbol.for("config")].props[g]);if(u[3].populate(c[3]),!0===p&&(h-=1),e=u[3],f[4]={},f[4].data=t.device.methods,f[4].x=300,f[4].ref="methods",f[4].type="method",f[4].y=100,s=f[4].is||"List",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "List" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);return u[4]=r[4].call(null,{props:f[4]},u[3],t),u[4][Symbol.for("slots")][0]?(e=u[4][Symbol.for("slots")][0],l=u[4],p=!0):e=u[4][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),e=u[0],c[5]={},u[5]=this.element({parent:e||"root"},!0===p?l:t),c[5].x=1400,c[5].y=540,c[5].content=t.response,c[5].size=100,c[5].mount=.5,c[5].font="lato",c[5].show=!t.isNetworkRes,c[5].__textnode=!0,u[5].populate(c[5]),!0===p&&(h-=1),e=u[0],c[6]={},u[6]=this.element({parent:e||"root"},!0===p?l:t),c[6].show=t.isNetworkRes,u[6].populate(c[6]),!0===p&&(h-=1),e=u[6],c[7]={},u[7]=this.element({parent:e||"root"},!0===p?l:t),c[7].content="State: "+t.networkRes.state,c[7].size=70,c[7].font="lato",c[7].x=1400,c[7].y=500,c[7].mount=.5,c[7].__textnode=!0,u[7].populate(c[7]),!0===p&&(h-=1),e=u[6],c[8]={},u[8]=this.element({parent:e||"root"},!0===p?l:t),c[8].content="Type: "+t.networkRes.type,c[8].size=70,c[8].font="lato",c[8].y=580,c[8].x=1400,c[8].mount=.5,c[8].__textnode=!0,u[8].populate(c[8]),!0===p&&(h-=1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[3]=null,f[4]=null,r[4]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[5].set("content",e.response)},function(e,t,n,r,o,i){t[5].set("show",!e.isNetworkRes)},function(e,t,n,r,o,i){t[6].set("show",e.isNetworkRes)},function(e,t,n,r,o,i){t[7].set("content","State: "+e.networkRes.state)},function(e,t,n,r,o,i){t[8].set("content","Type: "+e.networkRes.type)}],context:{}},state:function(){return{device:ll.device,response:"",networkRes:{},isNetworkRes:!1}},hooks:{ready:function(){var e=this;this.$listen("execute",function(){var t=i(n().m(function t(r){var o,i,a;return n().w(function(t){for(;;)switch(t.n){case 0:e.$log.info("Execute Device ".concat(r," API")),e.isNetworkRes=!1,o=r,t.n="make"===o?1:"model"===o?3:"name"===o?5:"network"===o?7:"platform"===o?9:11;break;case 1:return t.n=2,ol.make();case 2:case 4:case 6:case 10:return e.response=t.v,t.a(3,11);case 3:return t.n=4,ol.model();case 5:return t.n=6,ol.name();case 7:return i=Object,a=e.networkRes,t.n=8,ol.network();case 8:return i.assign.call(i,a,t.v),e.isNetworkRes=!0,t.a(3,11);case 9:return t.n=10,ol.platform();case 11:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},focus:function(){var e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),hl=Wo.Component("AccountModule",{components:{List:fl},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),u[0].populate(c[0]),!0===p&&(h-=1),e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].content="Account",c[1].x=960,c[1].mount="{x:0.5}",c[1].y=50,c[1].font="raleway",c[1].size=40,c[1].__textnode=!0,u[1].populate(c[1]),!0===p&&(h-=1),e=u[0],c[2]={},u[2]=this.element({parent:e||"root"},!0===p?l:t),c[2].content=t.account.about,c[2].x=960,c[2].mount="{x:0.5}",c[2].y=110,c[2].font="lato",c[2].__textnode=!0,u[2].populate(c[2]),!0===p&&(h-=1),m[3]=n.components&&n.components.List||r.List,e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].data=t.account.methods,c[3].x=300,c[3].ref="methods",c[3].y=300,c[3].type="method",d[3]=[],void 0!==m[3])for(var g in m[3][Symbol.for("config")].props)delete c[3][m[3][Symbol.for("config")].props[g]],d[3].push(m[3][Symbol.for("config")].props[g]);if(u[3].populate(c[3]),!0===p&&(h-=1),e=u[3],f[4]={},f[4].data=t.account.methods,f[4].x=300,f[4].ref="methods",f[4].y=300,f[4].type="method",s=f[4].is||"List",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "List" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);return u[4]=r[4].call(null,{props:f[4]},u[3],t),u[4][Symbol.for("slots")][0]?(e=u[4][Symbol.for("slots")][0],l=u[4],p=!0):e=u[4][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),e=u[0],c[5]={},u[5]=this.element({parent:e||"root"},!0===p?l:t),c[5].x=1400,c[5].y=540,c[5].content=t.response,c[5].size=t.size,c[5].mount=.5,c[5].font="lato",c[5].__textnode=!0,u[5].populate(c[5]),!0===p&&(h-=1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[3]=null,f[4]=null,r[4]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[5].set("content",e.response)},function(e,t,n,r,o,i){t[5].set("size",e.size)}],context:{}},state:function(){return{account:ll.account,response:"",size:100}},hooks:{ready:function(){var e=this;this.$listen("execute",function(){var t=i(n().m(function t(r){var o;return n().w(function(t){for(;;)switch(t.n){case 0:e.$log.info("Execute Account ".concat(r," API")),o=r,t.n="id"===o?1:"uid"===o?3:5;break;case 1:return e.size=100,t.n=2,rl.id();case 2:case 4:return e.response=t.v,t.a(3,5);case 3:return e.size=40,t.n=4,ol.uid();case 5:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},focus:function(){var e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),ml=Wo.Component("LocalizationModule",{components:{List:fl},code:{render:function(e,t,n,r,o,i,a){var s,l,u=[],c=[],f=[],d=[],p=!1,h=0,m=[];if(c[0]={},u[0]=this.element({parent:e||"root"},!0===p?l:t),u[0].populate(c[0]),!0===p&&(h-=1),e=u[0],c[1]={},u[1]=this.element({parent:e||"root"},!0===p?l:t),c[1].content="Localization",c[1].x=960,c[1].mount="{x:0.5}",c[1].y=50,c[1].font="raleway",c[1].size=40,c[1].__textnode=!0,u[1].populate(c[1]),!0===p&&(h-=1),e=u[0],c[2]={},u[2]=this.element({parent:e||"root"},!0===p?l:t),c[2].content=t.localization.about,c[2].x=960,c[2].mount="{x:0.5}",c[2].y=110,c[2].font="lato",c[2].__textnode=!0,u[2].populate(c[2]),!0===p&&(h-=1),m[3]=n.components&&n.components.List||r.List,e=u[0],c[3]={},u[3]=this.element({parent:e||"root"},!0===p?l:t),c[3].data=t.localization.methods,c[3].x=300,c[3].ref="methods",c[3].y=100,c[3].type="method",d[3]=[],void 0!==m[3])for(var g in m[3][Symbol.for("config")].props)delete c[3][m[3][Symbol.for("config")].props[g]],d[3].push(m[3][Symbol.for("config")].props[g]);if(u[3].populate(c[3]),!0===p&&(h-=1),e=u[3],f[4]={},f[4].data=t.localization.methods,f[4].x=300,f[4].ref="methods",f[4].y=100,f[4].type="method",s=f[4].is||"List",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "List" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);return u[4]=r[4].call(null,{props:f[4]},u[3],t),u[4][Symbol.for("slots")][0]?(e=u[4][Symbol.for("slots")][0],l=u[4],p=!0):e=u[4][Symbol.for("children")][0],!0===p&&0===h&&(p=!1),e=u[0],c[5]={},u[5]=this.element({parent:e||"root"},!0===p?l:t),c[5].x=1400,c[5].y=540,c[5].content=t.response,c[5].size=t.size,c[5].mount=.5,c[5].font="lato",c[5].__textnode=!0,u[5].populate(c[5]),!0===p&&(h-=1),{elms:u,cleanup:function(){l=null,t=null,e=null,m[3]=null,f[4]=null,r[4]=null,m.length=0,u.length=0,r.length=0,c.length=0,f.length=0,d.length=0}}},effects:[function(e,t,n,r,o,i){t[5].set("content",e.response)},function(e,t,n,r,o,i){t[5].set("size",e.size)}],context:{}},state:function(){return{localization:ll.localization,response:"",size:100}},hooks:{ready:function(){var e=this;this.$listen("execute",function(){var t=i(n().m(function t(r){var o;return n().w(function(t){for(;;)switch(t.n){case 0:e.$log.info("Execute Keyboard ".concat(r," API")),e.response="null",o=r,t.n="countryCode"===o?1:"language"===o?3:"latlon"===o?5:"locality"===o?7:"postalCode"===o?9:11;break;case 1:return t.n=2,al.countryCode();case 2:case 4:case 8:case 10:return e.response=t.v,t.a(3,11);case 3:return t.n=4,al.language();case 5:return t.n=6,al.latlon();case 6:return e.response=t.v.toString(),t.a(3,11);case 7:return t.n=8,al.locality();case 9:return t.n=10,al.postalCode();case 11:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},focus:function(){var e=this.$select("methods");e&&e.$focus&&e.$focus()}}}),gl=[{path:"/examples/firebolt",component:dl},{path:"/examples/firebolt/device",component:pl},{path:"/examples/firebolt/account",component:hl},{path:"/examples/firebolt/localization",component:ml}],yl=Wo.Component("Item",{code:{render:function(e,t,n,r,o,i,a){var s=[],l=[];return l[0]={},s[0]=this.element({parent:e||"root"},t),l[0].color=t.hasFocus?"0xe0f2feff":"0xfef9c3ff",l[0].w=200,l[0].h=200,l[0].effects=[{type:"radius",props:{radius:12}}],s[0].populate(l[0]),e=s[0],l[1]={},s[1]=this.element({parent:e||"root"},t),l[1].content=t.name,l[1].size=t.hasFocus?38:32,l[1].color=t.hasFocus?"0x1e3a8aff":"0x2563ebff",l[1].placement="{x: 'center', y: 'middle'}",l[1].__textnode=!0,s[1].populate(l[1]),{elms:s,cleanup:function(){t=null,e=null,s.length=0,r.length=0,l.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("color",e.hasFocus?"0xe0f2feff":"0xfef9c3ff")},function(e,t,n,r,o,i){t[0].set("effects",[{type:"radius",props:{radius:12}}])},function(e,t,n,r,o,i){t[1].set("content",e.name)},function(e,t,n,r,o,i){t[1].set("size",e.hasFocus?38:32)},function(e,t,n,r,o,i){t[1].set("color",e.hasFocus?"0x1e3a8aff":"0x2563ebff")}],context:{}},props:["name"],state:function(){return{message:null}},hooks:{focus:function(){this.message=this.$announcer.speak(this.name)},unfocus:function(){this.message&&(this.message.stop(),this.message.cancel())}}}),vl=Wo.Component("Row",{components:{Item:yl},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c,f=this,d=[],p=[],h=[],m=[],g=[],y=[],v=!1,b=[];p[0]={},d[0]=this.element({parent:e||"root"},!0===v?l:t),d[0].populate(p[0]),e=d[0],p[1]={},d[1]=this.element({parent:e||"root"},!0===v?l:t),p[1].content=t.title,p[1].size=40,p[1].__textnode=!0,d[1].populate(p[1]),e=d[0],g[2]=[],h[2]=function(){var o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,d=i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),h=new Set,g=d.length,x={}||{};u=x.from||0,c="to"in x?x.to:d.length;for(;g--;)d[g],g<c&&g>=u&&h.add(""+g);for(var w=a.length;w--;)if(!1===h.has(a[w])){var S=a[w];o[2][S]&&o[2][S].destroy(),o[2][S]=null,delete o[2][S],o[3][S]&&o[3][S].destroy(),o[3][S]=null,delete o[3][S]}a.length=0;for(var T=d.length,k=0;k<T;k++)if(!(k<u||k>=c)){var C=Object.create(t);if(e=o[0],C.item=d[k],C.index=k,C.key=""+k,C.__ref="item"+k,a.push(C.key),b[2]=n.components&&n.components.Item||r.Item,void 0===o[2]&&(o[2]={}),p[2]={},void 0===o[2][C.key]&&(o[2][C.key]=f.element({parent:e||"root"},!0===v?l:t)),p[2].name=C.item,p[2].y=100,p[2].x=250*C.index+100,p[2].ref=C.__ref,y[2]=[],void 0!==b[2])for(var A in b[2][Symbol.for("config")].props)delete p[2][b[2][Symbol.for("config")].props[A]],y[2].push(b[2][Symbol.for("config")].props[A]);if(void 0===o[2][C.key].nodeId&&o[2][C.key].populate(p[2]),void 0===o[3]&&(o[3]={}),e=o[2][C.key],m[3]={},void 0===o[3][C.key]){if(m[3].name=C.item,m[3].y=100,m[3].x=250*C.index+100,m[3].ref=C.__ref,s=m[3].is||"Item",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "Item" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);o[3][C.key]=r[3].call(null,{props:m[3]},o[2][C.key],t),o[3][C.key][Symbol.for("slots")][0]?(e=o[3][C.key][Symbol.for("slots")][0],l=o[3][C.key],v=!0):e=o[3][C.key][Symbol.for("children")][0]}}return[]};var x=function(){h[2](t.items,d,g[2])};return t[Symbol.for("effects")].push(x),o(x,["items"]),{elms:d,cleanup:function(){l=null,t=null,e=null,g[2].length=0,h[2]=null,b[2]=null,m[3]=null,r[3]=null,x=null,b.length=0,d.length=0,r.length=0,p.length=0,h.length=0,m.length=0,y.length=0}}},effects:[function(e,t,n,r,o,i){t[1].set("content",e.title)}],context:{}},props:["title","items"],state:function(){return{focusIndex:-1,message:null}},hooks:{focus:function(){this.message=this.$announcer.speak("Row with different "+this.title),this.focusIndex=0,this.$trigger("focusIndex")},unfocus:function(){this.message&&(this.message.stop(),this.message.cancel())}},watch:{focusIndex:function(e){this.$select("item"+e).$focus()}},input:{right:function(){this.focusIndex=Math.min(this.focusIndex+1,this.items.length-1)},left:function(){this.focusIndex=Math.max(this.focusIndex-1,0)}}}),bl=Wo.Component("Announcer",{components:{Row:vl},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),f[0].width=1*e.node.width,f[0].y=50,c[0].populate(f[0]),!0===h&&(m-=1),e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].placement="{x: 'center'}",f[1].size=50,f[1].content="Food",f[1].__textnode=!0,c[1].populate(f[1]),!0===h&&(m-=1),g[2]=n.components&&n.components.Row||r.Row,e=c[0],f[2]={},c[2]=this.element({parent:e||"root"},!0===h?u:t),f[2].title="Fruits",f[2].x=200,f[2].y=150,f[2].items=["Banana","Strawberry","Kiwi","Mango","Grape"],f[2].ref="row1",p[2]=[],void 0!==g[2])for(var y in g[2][Symbol.for("config")].props)delete f[2][g[2][Symbol.for("config")].props[y]],p[2].push(g[2][Symbol.for("config")].props[y]);if(c[2].populate(f[2]),!0===h&&(m-=1),e=c[2],d[3]={},d[3].title="Fruits",d[3].x=200,d[3].y=150,l=["Banana","Strawberry","Kiwi","Mango","Grape"],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[3].items=l,d[3].ref="row1",s=d[3].is||"Row",r[3],"string"==typeof s){if(r[3]=n.components&&n.components[s]||r[s],!r[3])throw new Error('Component "Row" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[3]=s);if(c[3]=r[3].call(null,{props:d[3]},c[2],t),c[3][Symbol.for("slots")][0]?(e=c[3][Symbol.for("slots")][0],u=c[3],h=!0):e=c[3][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[4]=n.components&&n.components.Row||r.Row,e=c[0],f[4]={},c[4]=this.element({parent:e||"root"},!0===h?u:t),f[4].title="Snacks",f[4].x=200,f[4].y=600,f[4].items=["Pizza","Burger","Fries","Popcorn","Chocolate"],f[4].ref="row2",p[4]=[],void 0!==g[4])for(var v in g[4][Symbol.for("config")].props)delete f[4][g[4][Symbol.for("config")].props[v]],p[4].push(g[4][Symbol.for("config")].props[v]);if(c[4].populate(f[4]),!0===h&&(m-=1),e=c[4],d[5]={},d[5].title="Snacks",d[5].x=200,d[5].y=600,l=["Pizza","Burger","Fries","Popcorn","Chocolate"],!0===Array.isArray(l)&&(l=i(l).slice(0)),d[5].items=l,d[5].ref="row2",s=d[5].is||"Row",r[5],"string"==typeof s){if(r[5]=n.components&&n.components[s]||r[s],!r[5])throw new Error('Component "Row" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[5]=s);return c[5]=r[5].call(null,{props:d[5]},c[4],t),c[5][Symbol.for("slots")][0]?(e=c[5][Symbol.for("slots")][0],u=c[5],h=!0):e=c[5][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[2]=null,d[3]=null,r[3]=null,g[4]=null,d[5]=null,r[5]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[2]&&-1!==skips[2].indexOf("items")||t[2].set("items",["Banana","Strawberry","Kiwi","Mango","Grape"])},function(e,t,n,r,o,i){t[3][Symbol.for("props")].items=["Banana","Strawberry","Kiwi","Mango","Grape"]},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[4]&&-1!==skips[4].indexOf("items")||t[4].set("items",["Pizza","Burger","Fries","Popcorn","Chocolate"])},function(e,t,n,r,o,i){t[5][Symbol.for("props")].items=["Pizza","Burger","Fries","Popcorn","Chocolate"]}],context:{}},state:function(){return{focusIndex:1}},watch:{focusIndex:function(e){this.$select("row"+e).$focus()}},hooks:{focus:function(){this.$announcer.speak("The topic is Food"),this.$trigger("focusIndex")}},input:{up:function(){this.focusIndex=Math.max(this.focusIndex-1,1)},down:function(){this.focusIndex=Math.min(this.focusIndex+1,2)}}}),xl=new URLSearchParams(window.location.search),wl=!!xl.get("source"),Sl=!!xl.get("fps"),Tl=Wo.Application({components:{SourceInfo:ni},code:{render:function(e,t,n,r,o,i,a){var s,l,u,c=[],f=[],d=[],p=[],h=!1,m=0,g=[];if(f[0]={},c[0]=this.element({parent:e||"root"},!0===h?u:t),f[0].w=1920,f[0].h=1080,f[0].color=t.backgroundColor,c[0].populate(f[0]),!0===h&&(m-=1),g[1]=n.components&&n.components.RouterView||r.RouterView,e=c[0],f[1]={},c[1]=this.element({parent:e||"root"},!0===h?u:t),f[1].w=1*e.node.width,f[1].h=1*e.node.height,p[1]=[],void 0!==g[1])for(var y in g[1][Symbol.for("config")].props)delete f[1][g[1][Symbol.for("config")].props[y]],p[1].push(g[1][Symbol.for("config")].props[y]);if(c[1].populate(f[1]),!0===h&&(m-=1),e=c[1],d[2]={},d[2].w=1*e.node.width,d[2].h=1*e.node.height,s=d[2].is||"RouterView",r[2],"string"==typeof s){if(r[2]=n.components&&n.components[s]||r[s],!r[2])throw new Error('Component "RouterView" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[2]=s);if(c[2]=r[2].call(null,{props:d[2]},c[1],t),c[2][Symbol.for("slots")][0]?(e=c[2][Symbol.for("slots")][0],u=c[2],h=!0):e=c[2][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[3]=n.components&&n.components.FPScounter||r.FPScounter,e=c[0],f[3]={},c[3]=this.element({parent:e||"root"},!0===h?u:t),f[3].x=1610,f[3].show=t.showFPS,p[3]=[],void 0!==g[3])for(var v in g[3][Symbol.for("config")].props)delete f[3][g[3][Symbol.for("config")].props[v]],p[3].push(g[3][Symbol.for("config")].props[v]);if(c[3].populate(f[3]),!0===h&&(m-=1),e=c[3],d[4]={},d[4].x=1610,l=t.showFPS,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[4].show=l,s=d[4].is||"FPScounter",r[4],"string"==typeof s){if(r[4]=n.components&&n.components[s]||r[s],!r[4])throw new Error('Component "FPScounter" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[4]=s);if(c[4]=r[4].call(null,{props:d[4]},c[3],t),c[4][Symbol.for("slots")][0]?(e=c[4][Symbol.for("slots")][0],u=c[4],h=!0):e=c[4][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),g[5]=n.components&&n.components.SourceInfo||r.SourceInfo,e=c[0],f[5]={},c[5]=this.element({parent:e||"root"},!0===h?u:t),f[5].ref="info",f[5].show=t.showInfo,p[5]=[],void 0!==g[5])for(var b in g[5][Symbol.for("config")].props)delete f[5][g[5][Symbol.for("config")].props[b]],p[5].push(g[5][Symbol.for("config")].props[b]);if(c[5].populate(f[5]),!0===h&&(m-=1),e=c[5],d[6]={},d[6].ref="info",l=t.showInfo,!0===Array.isArray(l)&&(l=i(l).slice(0)),d[6].show=l,s=d[6].is||"SourceInfo",r[6],"string"==typeof s){if(r[6]=n.components&&n.components[s]||r[s],!r[6])throw new Error('Component "SourceInfo" not found')}else"function"==typeof s&&!0===s[Symbol.for("isComponent")]&&(r[6]=s);return c[6]=r[6].call(null,{props:d[6]},c[5],t),c[6][Symbol.for("slots")][0]?(e=c[6][Symbol.for("slots")][0],u=c[6],h=!0):e=c[6][Symbol.for("children")][0],!0===h&&0===m&&(h=!1),{elms:c,cleanup:function(){l=null,u=null,t=null,e=null,g[1]=null,d[2]=null,r[2]=null,g[3]=null,d[4]=null,r[4]=null,g[5]=null,d[6]=null,r[6]=null,g.length=0,c.length=0,r.length=0,f.length=0,d.length=0,p.length=0}}},effects:[function(e,t,n,r,o,i){t[0].set("color",e.backgroundColor)},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[3]&&-1!==skips[3].indexOf("show")||t[3].set("show",e.showFPS)},function(e,t,n,r,o,i){t[4][Symbol.for("props")].show=e.showFPS},function(e,t,n,r,o,i){"undefined"!=typeof skips&&void 0!==skips[5]&&-1!==skips[5].indexOf("show")||t[5].set("show",e.showInfo)},function(e,t,n,r,o,i){t[6][Symbol.for("props")].show=e.showInfo}],context:{}},state:function(){return{backgroundColor:"#1e293b",showFPS:Sl,showInfo:!1}},routes:[{path:"/",component:oi,options:{keepAlive:!0}},{path:"/demos/loading",component:function(){return me(function(){return r.import("./Loading-legacy-Qj6IiKVA.js")})}},{path:"/demos/intro",component:function(){return new Promise(function(e){e(ai)})}},{path:"/demos/theming",component:ui},{path:"/demos/tmdb",component:ki},{path:"/demos/sprites",component:Ei},{path:"/demos/focushandling",component:Ri},{path:"/demos/memory-game",component:Pa,announce:"Let's play Memory"},{path:"/demos/player",component:$i},{path:"/examples/positioning",component:_i},{path:"/examples/colors",component:Yi},{path:"/examples/gradients",component:Ji},{path:"/examples/transitions",component:Qi},{path:"/examples/alpha",component:Zi},{path:"/examples/scaling",component:ea},{path:"/examples/rotation",component:ta},{path:"/examples/keyinput",component:na},{path:"/examples/texts",component:ia},{path:"/examples/images",component:sa},{path:"/examples/components",component:ca},{path:"/examples/forloop",component:da},{path:"/examples/forloop-advanced",component:Sa},{path:"/examples/effects",component:Ta},{path:"/examples/showif",component:ka},{path:"/examples/events",component:Ca},{path:"/examples/slots",component:Ma},{path:"/examples/viewport",component:ja}].concat(Ka,[{path:"/examples/resize",component:Xa},{path:"/examples/languageplugin",component:Ya},{path:"/examples/keycodes",component:Qa},{path:"/examples/translations",component:Ya},{path:"/examples/special-characters",component:ts},{path:"/examples/layout",component:ns},{path:"/examples/announcer",component:bl,announce:"Welcome to the announcement example page"},{path:"/benchmarks/exponential",component:Na}],gl),hooks:{ready:function(){var e=this;!0===wl&&(this.showInfo=!0),this.$listen("changeBackground",function(t){e.backgroundColor=t?t+80:"#1e293b"}),this.$listen("clearBackground",function(){e.backgroundColor="transparent"})}},input:{intercept:function(e){var t=this;return i(n().m(function r(){return n().w(function(n){for(;;)switch(n.n){case 0:if("x"!==e.key){n.n=1;break}return t.$log.info("Intercepting key press (".concat(e.key,") in App Component")),n.a(2,new Promise(function(n){t.$log.info("Executing an async operation"),setTimeout(function(){t.$log.info("Finished an async operation"),n(e)},2e3)}));case 1:return n.a(2,e)}},r)}))()},escape:function(){this.quit()},back:function(){this.$router.to("/")},sourceCode:function(){this.showInfo=!1;var e=kl(this.$router.currentRoute.path);e&&window.open("https://github.com/lightning-js/blits-example-app/tree/master/".concat(e),"_blank")}}}),kl=function(e){return{"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"}["/"+e]+".js"},Cl={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},Al={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};Wo.Plugin($o,"colors",{themes:{light:Cl.light,dark:Cl.dark},base:"light",current:"dark"}),Wo.Plugin($o,"sizes",{themes:{small:Al.small,large:Al.large},base:"small",current:"small"}),Wo.Plugin(Xo),Wo.Launch(Tl,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:g(g({},(sl={},Object.keys(Zo).forEach(function(e){Zo[e].test&&"function"==typeof Zo[e].test&&!0===Zo[e].test()&&(sl=Zo[e].mapping)}),sl)),{85:"sourceCode"}),fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0})}}})}();
