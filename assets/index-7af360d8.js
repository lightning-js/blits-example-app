var Rb=Object.defineProperty;var Lb=(h,r,i)=>r in h?Rb(h,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[r]=i;var R=(h,r,i)=>(Lb(h,typeof r!="symbol"?r+"":r,i),i);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const x of y.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function i(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function l(d){if(d.ep)return;d.ep=!0;const y=i(d);fetch(d.href,y)}})();const fe={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType")},io={[fe.settings]:{},get(h,r=null){return h in this[fe.settings]?this[fe.settings][h]:r},set(h,r){typeof h=="object"?Object.keys(h).forEach(i=>{this.set(i,h[i])}):this[fe.settings][h]=r}},Xl=()=>{},Od=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Jx=h=>{const r=io.get("debugLevel"),i={};return Object.defineProperty(i,"info",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${h} %c ${Od()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Xl}}),Object.defineProperty(i,"warn",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${h} %c ${Od()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Xl}}),Object.defineProperty(i,"error",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${h} %c ${Od()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Xl}}),Object.defineProperty(i,"debug",{get(){return(r>=2||Array.isArray(r)&&r.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${h} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Xl}}),i};let Vt;const Pb=()=>{Vt=Jx("Blits")},Aa={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},Db=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,Nb=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,Ob=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,Ud={},Kl=h=>{if(Ud[h]!==void 0)return Ud[h];const r=parseInt(h).toString(16).padStart(2,"0");return Ud[h]=r,r},hs={normalize:(h="",r="0xffffffff")=>{if(h=h.toString(),Aa[h]!==void 0)return Aa[h];if(h.startsWith("0x")&&h.length===10)return Aa[h]=h,h;if(Db.test(h)){h=h.replace("#","").toLowerCase(),h.length===3&&(h=h.split("").map(d=>d+d).join(""));const l="0x"+h.padEnd(8,"f");return Aa[h]=l,l}const i=Nb.exec(h);if(i){const l=Kl(i[3]),d=Kl(i[5]),y=Kl(i[7]);let x="ff";if(i[10]&&i[1]==="rgba"){const g=Math.min(Math.max(Math.round(parseFloat(i[10])*255),0),255);x=Kl(g)}const s="0x"+l+d+y+x;return Aa[h]=s,s}return Ob.test(h)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):r}},Ub=(h="",r,i,l=null)=>{let d=0,y=0,x=[],s=null,g=0;const k=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,A=/^\s*(\/?>)\s*/,I=/^([A-Za-z0-9:.\-_@]+)=\s*(["'])/,M=/^<>\s*/,O=/^\s*(<\/>)\s*/,w=()=>{h=F(h);try{return L(W),le(x)}catch(ne){throw(ne.name=="TemplateParseError"||ne.name=="TemplateStructureError")&&(ne.message=`${ne.message}
${ne.context}`),ne}},L=ne=>{d>=h.length||ne()},F=ne=>ne.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),U=ne=>{const ue=h.slice(d).match(ne);return ue&&(y=d,d+=ue[0].length),ue},W=()=>{U(M)?(x.push({[Symbol.for("componentType")]:null,[fe.type]:"opening",[fe.level]:g,[fe.cursorTagStart]:y}),g++,L(W)):L(X)},X=()=>{U(O)?(g--,x.push({[Symbol.for("componentType")]:null,[fe.type]:"closing",[fe.level]:g}),L(W)):L(Q)},Q=()=>{const ne=U(k);if(ne)s={[Symbol.for("componentType")]:ne[1],[fe.level]:g,[fe.cursorTagStart]:y},ne[0].startsWith("</")?(g--,s[fe.type]="closing",s[fe.level]=g):(s[fe.type]="opening",g++),L(ee);else throw re("InvalidTag")},ee=()=>{const ne=U(A);if(ne){if(ne[1]==="/>"){if(s[fe.type]==="closing")throw re("InvalidClosingTag");s[fe.type]="self-closing",g--}if(s[fe.type]==="opening"){const ue=h.slice(d,h.indexOf("<",d));ue&&(s.content=ue,d+=ue.length)}x.push(s),L(W)}else L(Z)},Z=()=>{const ne=U(I);if(ne){if(s[fe.type]==="closing")throw re("AttributesInClosingTag");const ue=ne[2],ve=new RegExp(`^(.*?)${ue}\\s*`),xe=U(ve);if(xe){const Se=H(ne[1],xe[1]);s[Se.name]=Se.value,L(ee)}else throw re("MissingOrInvalidAttributeValue")}else throw re("InvalidAttribute")},H=(ne,ue)=>{if(ne.includes(".")){const[ve,xe]=ne.split(".");return{name:ve,value:`{${xe}: ${ue}}`}}return["color",":color",":effects","effects"].includes(ne)?J(ne,ue):{name:ne,value:ue}},J=(ne,ue)=>{let ve=ue,xe=hs.normalize(ve,null);if(xe===null){const Se=/'([^']+)'/g;let be,Ee=0,_e="";for(;(be=Se.exec(ue))!==null;){const z=be[1],Re=be.index,Ce=be[0].length;_e+=ue.slice(Ee,Re),xe=hs.normalize(z,null),xe===null?_e+=ue.slice(Re,Re+Ce):_e+=`'${xe}'`,Ee=Re+Ce}_e+=ue.slice(Ee),ve=_e}else ve=xe;return{name:ne,value:ve}},le=ne=>{let ue=[],ve=!1,xe={children:[]},Se=xe;for(let be=0;be<ne.length;be++){let Ee=ne[be];if(Ee[fe.level]===0&&Ee[fe.type]!=="closing"){if(ve)throw ye("MultipleTopLevelTags",Ee);ve=!0}if(Ee[fe.type]==="opening")ue.push({[fe.level]:Ee[fe.level],[fe.type]:Ee[fe.type],[fe.cursorTagStart]:Ee[fe.cursorTagStart],[Symbol.for("componentType")]:Ee[Symbol.for("componentType")],parent:Se});else if(Ee[fe.type]==="closing"){const z=ue.length===0;let Re=!1,Ce=!1;if(z||(Re=ue[ue.length-1][fe.level]!==Ee[fe.level],Ce=ue[ue.length-1][Symbol.for("componentType")]!==Ee[Symbol.for("componentType")]),z||Re||Ce)throw ye("MismatchedClosingTag",Ee);Se=ue.pop().parent}const _e={...Ee};delete _e[fe.type],delete _e[fe.level],delete _e[fe.cursorTagStart],Ee[fe.type]==="opening"?(be+1<ne.length&&ne[be+1][fe.type]!=="closing"&&(_e.children=[]),Se.children.push(_e),Se=_e):Ee[fe.type]==="self-closing"&&Se.children.push(_e)}if(ue.length>0)throw ye("UnclosedTags",ue);return xe},E=10,j=50,re=ne=>{const ue=se();ne=`${ne} in ${ue}`;const ve=new Error(ne);ve.name="TemplateParseError";const xe=Math.max(0,y-E),Se=Math.min(h.length,d+j),be=h.slice(xe,Se),Ee=d-xe;return ve.context=ie(Ee,be),ve},ye=(ne,ue)=>{const ve=se();ne=`${ne} in ${ve}`;const xe=new Error(ne);xe.name="TemplateStructureError",Array.isArray(ue)?xe.context=ue.map(be=>Se(be)).join(`
`):xe.context=Se(ue);function Se(be){const Ee=Math.max(0,be[fe.cursorTagStart]-E),_e=h.slice(Ee,Ee+j);return ie(E,_e)}return xe},ie=(ne,ue)=>{const ve=" ".repeat(ne)+"^";return`
${ue}
${ve}
`},se=()=>{if(i){let ne=r||"",ue=i;for(;ue;)ne=`${ue[Symbol.for("componentType")]}/${ne}`,ue=ue.parent;return ne}return l||"Blits.Application"};return w()};let mt;function Bb(h={children:[]}){const r={renderCode:["const elms = []","let componentType","const rootComponent = component"],effectsCode:[],context:{props:[],components:this.components}};return mt=-1,t2.call(r,h),r.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw",r.renderCode.join(`
`)),effects:r.effectsCode.map(i=>new Function("component","elms","context","components","rootComponent","effect",i)),context:r.context}}const Ef=function(h,r=!1,i={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const l=i.forceEffect?this.effectsCode:this.renderCode;r&&l.push(`parent = ${r}`),"key"in h&&(i.key=mi(h.key,i.component));const d=i.key?`elms[${mt}][${i.key}]`:`elms[${mt}]`;i.key&&l.push(`
      if(elms[${mt}] === undefined) {
        elms[${mt}] = {}
      }
    `),l.push(`const elementConfig${mt} = {}`),i.forloop&&l.push(`if(!${d}) {`),l.push(`
    ${d} = this.element({parent: parent || 'root'}, component)
  `),i.forloop&&l.push("}");const y=h.children;delete h.children,h[Symbol.for("componentType")]==="Slot"&&l.push(`elementConfig${mt}[Symbol.for('isSlot')] = true`),Object.keys(h).forEach(x=>{if(x==="slot"&&l.push(`
        elementConfig${mt}['parent'] = component[Symbol.for('slots')].filter(slot => slot.ref === '${h.slot}').shift() || component[Symbol.for('slots')][0] || parent
      `),x!=="key")if(n2(x)){if(i.holder&&x===":color")return;this.effectsCode.push(`${d}.set('${x.substring(1)}', ${mi(h[x],i.component)})`),l.push(`elementConfig${mt}['${x.substring(1)}'] = ${mi(h[x],i.component)}`)}else l.push(`elementConfig${mt}['${x}'] = ${dp(h[x],x,i.component)}`)}),i.holder===!0&&l.push(`
    if(typeof cmp${mt} !== 'undefined') {
      for(let key in cmp${mt}.config.props) {
        delete elementConfig${mt}[cmp${mt}.config.props[key]]
      }
    }
    `),i.forloop&&l.push(`if(!${d}.nodeId) {`),l.push(`${d}.populate(elementConfig${mt})`),i.forloop&&l.push("}"),y&&t2.call(this,{children:y},`${d}`,i)},e2=function(h,r=!1,i={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const l=i.forceEffect?this.effectsCode:this.renderCode;l.push(`
    const cmp${mt} =
      (context.components && context.components['${h[Symbol.for("componentType")]}']) || components['${h[Symbol.for("componentType")]}']
  `),"key"in h&&(i.key=mi(h.key,i.component));const d=h.children;delete h.children,Ef.call(this,h,r,{...i,holder:!0}),r=i.key?`elms[${mt}][${i.key}]`:`elms[${mt}]`,mt++;const y=i.key?`elms[${mt}][${i.key}]`:`elms[${mt}]`;i.key&&l.push(`
      if(elms[${mt}] === undefined) {
        elms[${mt}] = {}
      }
    `),r&&l.push(`parent = ${r}`),l.push(`const props${mt} = {}`),Object.keys(h).forEach(x=>{n2(x)?(this.effectsCode.push(`
        ${y}[Symbol.for('props')]['${x.substring(1)}'] = ${mi(h[x],i.component)}`),l.push(`props${mt}['${x.substring(1)}'] = ${mi(h[x],i.component)}`)):l.push(`props${mt}['${x}'] = ${dp(h[x],x,i.component)}`)}),i.forloop&&l.push(`if(!${y}) {`),l.push(`
    componentType = props${mt}['is'] || '${h[Symbol.for("componentType")]}'

    let component${mt}
    if(typeof componentType === 'string') {
      component${mt} = context.components && context.components[componentType] || components[componentType]
      if(!component${mt}) {
        throw new Error('Component "${h[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType.name === 'factory') {
      component${mt} = componentType
    }

    ${y} = component${mt}.call(null, {props: props${mt}}, ${r}, component)

    if (${y}[Symbol.for('slots')][0]) {
      parent = ${y}[Symbol.for('slots')][0]
      component = ${y}
    } else {
      parent = ${y}[Symbol.for('children')][0]
    }
  `),i.forloop&&l.push("}"),d&&(mt++,Ef.call(this,{children:d},!1,{...i}))},jb=function(h,r){const i=h[":for"];delete h[":for"];const l=h.key,d=mi(l,"scope.");delete h.key;const x=/(.+)\s+in\s+(.+)/gi.exec(i),[s,g="index"]=x[1].replace("(","").replace(")","").split(/\s*,\s*/),k=new RegExp(`(scope\\.(?!${s}\\.|${g}|key)(\\w+))`,"gi"),A={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};r&&A.renderCode.push(`parent = ${r}`);const I=mt;A.renderCode.push(`
    const created${I} = []
    const forloop${I} = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set(rawCollection.map((${s}) => '' +  ${mi(l,"")}))
  `);const M=A.renderCode.length;A.renderCode.push(`
      created.length = 0
      const length = collection.length
      for(let __index = 0; __index < length; __index++) {
        const scope = Object.create(component)
        parent = ${r}
        scope['${g}'] = __index
        scope['${s}'] = rawCollection[__index]
        scope['key'] = ${d||"__index"}
  `),"ref"in h&&h.ref.indexOf("$")===-1&&(A.renderCode.push(`
        scope['__ref'] = '${h.ref}' + __index
    `),h.ref="$__ref"),A.renderCode.push(`
        created.push(scope.key)
  `),h[Symbol.for("componentType")]==="Element"||h[Symbol.for("componentType")]==="Slot"||h[Symbol.for("componentType")]==="Text"?Ef.call(A,h,r,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0}):e2.call(A,h,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const O=A.effectsCode.filter(U=>[...U.matchAll(k)].length===0),w=A.effectsCode.filter(U=>[...U.matchAll(k)].length!==0);A.renderCode.push(`
    scope['${s}'] = collection[__index]
  `),O.forEach(U=>{const W=U.indexOf(`scope.${g}`)>-1?`'${mi(x[2],"")}'`:null;A.renderCode.push(`
      effect(() => {
        ${U}
      }, ${W})
    `)}),A.renderCode.push(`
      if(elms[${I}][0] && elms[${I}][0].forComponent && elms[${I}][0].forComponent.___layout) {
        elms[${I}][0].forComponent.___layout()
      }
    }
  }`);const L=[];L.push(`
      let i = created.length

      while (i--) {
        const key = created[i]
        if (!keys.has(key)) {
  `);const F=mt;for(let U=I;U<=F;U++)L.push(`
          elms[${U}][key] && elms[${U}][key].destroy()
          delete elms[${U}][key]
      `);L.push(`
       }
    }
  `),A.renderCode.splice(M,0,...L),A.renderCode.push(`
    effect(() => {
      forloop${I}(${dp(x[2],":for")}, elms, created${I})
    }, '${mi(x[2],"")}')
  `),w.forEach(U=>{const W=[...U.matchAll(k)];let X=W.length;const Q=[];for(;X--;){const ee=W[X],Z=`component.${ee[2]}`;Q.indexOf(Z)===-1&&Q.push(Z),U=U.substring(0,ee.index)+Z+U.substring(ee.index+ee[1].length)}A.renderCode.push(`
      effect(() => {
        void ${Q.join(", ")}
        for(let __index = 0; __index < ${mi(x[2])}.length; __index++) {
          const scope = {}
          scope['${g}'] = __index
          scope['${s}'] = ${mi(x[2])}[__index]
          scope['key'] = ${d||"__index"}
    `),A.renderCode.push(`
          ${U}
        }
      })
    `)}),this.renderCode.push(A.renderCode.join(`
`))},t2=function(h,r=!1,i={}){h.children&&h.children.forEach(l=>{mt++,Object.keys(l).indexOf(":for")>-1?jb.call(this,l,r):l[Symbol.for("componentType")]==="Element"||l[Symbol.for("componentType")]==="Slot"||l[Symbol.for("componentType")]==="Text"?(l[Symbol.for("componentType")]==="Text"&&(l.__textnode="true"),Ef.call(this,l,r,i)):e2.call(this,l,r,i)})},mi=(h,r="component.")=>{if(h===void 0)return h;const i=/('.*?')+/gi,l=/\$/gi,d=h.matchAll(i),y=[];let x=0;for(const s of d)y.push(s[0]),h=h.replace(s[0],`[@@REPLACEMENT${x}@@]`),x++;return h=h.replace(l,r||""),y.forEach((s,g)=>{h=h.replace(`[@@REPLACEMENT${g}@@]`,s)}),h},dp=(h="",r=!1,i="component.")=>{let l;if(r==="content")if(h.startsWith("$"))l=`${i}${h.replace("$","")}`;else{const d=h.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");l=`'${Fb(d,i)}'`}else if(r!=="color"&&!isNaN(parseFloat(h))){if(l=parseFloat(h),h.endsWith("%")){const y={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[r];y&&(l=`parent.node.${y} * (${l} / 100)`)}}else if(h.toLowerCase()==="true")l=!0;else if(h.toLowerCase()==="false")l=!1;else if(r.startsWith("@")&&h){const d=i.slice(0,-1);l=`${d}['${h.replace("$","")}'] && ${d}['${h.replace("$","")}'].bind(${d})`}else h.startsWith("$")?l=`${i}${h.replace("$","")}`:l=`"${h}"`;return l},n2=h=>h.startsWith(":"),Fb=(h,r)=>{const i=/\{\{\s*(\$\S+)\s*\}\}/g,l=[...h.matchAll(i)];if(l.length)for(let[d,y]of l)h=h.replace(d,`${y.replace("$",`'+${r}`)}+'`);return h},wx={};let zb=0;const Vb=h=>`BlitsComponent::${h}_${wx[h]=(wx[h]||0)+1}`,Hb=()=>++zb,Eo={},Yd=(h,r,i,l=[])=>{Eo[r]&&Eo[r][h]&&Eo[r][h].apply(i,l)},$b=(h,r,i)=>{const l=fe[h];Eo[r]&&Eo[r][l]&&Eo[r][l].apply(i)},Gb=(h={},r)=>{Eo[r]={},[...Object.keys(h),...Object.getOwnPropertySymbols(h)].forEach(l=>{typeof h[l]=="function"&&(Eo[r][l]=h[l])})};let Na=null,Af=null,Uf=!1;const Wb=()=>{Uf=!0},Xb=()=>{Uf=!1},qd=new WeakMap,gf=(h,r)=>{if(Na){if(Uf||Af!==null&&r!==Af)return;let i=qd.get(h);i||(i=new Map,qd.set(h,i));let l=i.get(r);l||(l=new Set,i.set(r,l)),l.add(Na)}},ds=(h,r,i=!1)=>{if(Uf===!0)return;const l=qd.get(h);if(!l)return;const d=l.get(r);if(d)for(let y of d)y(i)},Yl=(h,r=null)=>{Na=h,Af=r,Na(),Na=null,Af=null},yf=["push","pop","shift","unshift","splice","sort"],Sx=new WeakMap,fs=h=>{const r=h&&h[fe.raw];return r?fs(r):h},Qd=(h,r=null,i)=>{if(typeof h=="object"&&h[fe.id]||h.constructor.name==="_ImageTexture")return h;const l=Sx.get(h);if(l)return l;const d={get(x,s,g){return s===fe.raw?h:Array.isArray(x)?typeof x[s]=="object"&&x[s]!==null?(Array.isArray(x[s])&&gf(x,s),Qd(fs(x[s]),x,s)):yf.indexOf(s)!==-1?function(...k){Wb();const A=x[s].apply(this,k);return Xb(),ds(r,i),A}:s==="length"?h.length:Reflect.get(x,s,g):typeof x[s]=="object"&&x[s]!==null?(Array.isArray(x[s])&&gf(x,s),Qd(fs(x[s]),x,s)):(gf(x,s),Reflect.get(x,s,g))},set(x,s,g,k){const A=fs(x[s]),I=fs(g);let M=!0;return A!==I&&(M=Reflect.set(x,s,g,k)),M&&A!==I&&(Array.isArray(x)&&s in x&&ds(r,i,!0),ds(x,s,!0)),M}},y=new Proxy(h,d);return Sx.set(h,y),y},i2=h=>(Object.keys(h).forEach(r=>{let i=h[r];if(h[r]!==null&&typeof h[r]=="object"){if(Object.getPrototypeOf(h[r])===Object.prototype)return i2(h[r]);if(Array.isArray(h[r]))for(let l=0;l<yf.length-1;l++)h[r][yf[l]]=function(d){Array.prototype[yf[l]].call(this,d),ds(h,r)}}Object.defineProperty(h,r,{enumerable:!0,configurable:!0,get(){return gf(h,r),i},set(l){i!==l&&(i=l,ds(h,r))}})}),h),Tx=(h,r="Proxy")=>r==="defineProperty"?i2(h):Qd(h),Kb=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],Yb={previous:null,current:null,get state(){return this.current},set state(h){Kb.indexOf(h)>-1&&(h!==this.current||h==="focus")&&(Vt.debug(`Setting lifecycle state from ${this.current} to ${h} for ${this.component.componentId}`),this.previous=this.current,this.current=h,$b(h,this.component[fe.identifier],this.component),Yd(h,this.component[fe.identifier],this.component))}};function qb(h,r){const i={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},l=h.getContext("webgl",i)||h.getContext("experimental-webgl",i);if(!l)throw new Error("Unable to create WebGL context");return r?new Proxy(l,{get(d,y){const x=d[y];return typeof x=="function"?(r.increment(String(y)),x.bind(d)):x}}):l}function Ke(h,r){if(!pp()&&!h)throw new Error(r||"Assertion failed")}function Cx(h,r,i){const l=Math.trunc(h>>>24),d=Math.trunc(h>>>16&255),y=Math.trunc(h>>>8&255),x=Math.trunc(h&255),s=Math.trunc(r>>>24),g=Math.trunc(r>>>16&255),k=Math.trunc(r>>>8&255),A=Math.trunc(r&255),I=Math.round(s*i+l*(1-i)),M=Math.round(g*i+d*(1-i)),O=Math.round(k*i+y*(1-i)),w=Math.round(A*i+x*(1-i));return(I<<24|M<<16|O<<8|w)>>>0}function Qb(h,r){const i=h>>>24,l=h>>>16&255,d=h>>>8&255,y=Math.trunc((h&255)*r);return(i<<24|l<<16|d<<8|y)>>>0}let o2=!0;function Zb(h){o2=h==="webgl"}function ql(h,r,i=!1){const l=(h&255)/255*r,d=o2?l:1,y=Math.trunc((h>>>24)*d),x=Math.trunc((h>>>16&255)*d),s=Math.trunc((h>>>8&255)*d),g=Math.trunc(l*255);return i?(g<<24|s<<16|x<<8|y)>>>0:(y<<24|x<<16|s<<8|g)>>>0}function Zd(h,r){return Object.prototype.hasOwnProperty.call(h,r)}function pp(){return{VITE_TMDB_KEY:"ABC123",VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!0}let Jb=1;function eI(){return Jb++}class Ao{constructor(){R(this,"eventListeners",{})}on(r,i){let l=this.eventListeners[r];l||(l=[]),l.push(i),this.eventListeners[r]=l}off(r,i){const l=this.eventListeners[r];if(!l)return;if(!i){delete this.eventListeners[r];return}const d=l.indexOf(i);d>=0&&l.splice(d,1)}once(r,i){const l=(d,y)=>{this.off(r,l),i(d,y)};this.on(r,l)}emit(r,i){const l=this.eventListeners[r];l&&[...l].forEach(d=>{d(this,i)})}removeAllListeners(){this.eventListeners={}}}const tI=/^(data|ftps?|https?):/,za=h=>{const r=h>>>24,i=h>>>16&255,l=h>>>8&255,d=h&255;return[r/255,i/255,l/255,d/255]},nI=h=>{const r=h>>>24,i=h>>>16&255,l=h>>>8&255,d=h&255;return[r,i,l,d]};function iI(h){return(h&255)/255}function Bd(h){const r=Math.floor(h[0]*255),i=Math.floor(h[1]*255),l=Math.floor(h[2]*255),d=Math.floor(h[3]*255);return`rgba(${r},${i},${l},${d.toFixed(4)})`}function Ql(h,r,i,l,d){return d?(d.x1=h,d.y1=r,d.x2=i,d.y2=l,d):{x1:h,y1:r,x2:i,y2:l}}function jd(h,r){return h.x1<r.x2&&h.x2>r.x1&&h.y1<r.y2&&h.y2>r.y1}function oI(h,r){return r?(r.x=h.x1,r.y=h.y1,r.width=h.x2-h.x1,r.height=h.y2-h.y1,r):{x:h.x1,y:h.y1,width:h.x2-h.x1,height:h.y2-h.y1}}function r2(h,r,i){const l=Math.max(h.x,r.x),d=Math.max(h.y,r.y),y=Math.min(h.x+h.width,r.x+r.width)-l,x=Math.min(h.y+h.height,r.y+r.height)-d;return y>0&&x>0?i?(i.x=l,i.y=d,i.width=y,i.height=x,i):{x:l,y:d,width:y,height:x}:i?(i.x=0,i.y=0,i.width=0,i.height=0,i):{x:0,y:0,width:0,height:0}}function s2(h,r){return r?(r.x=h.x,r.y=h.y,r.width=h.width,r.height=h.height,r):{x:h.x,y:h.y,width:h.width,height:h.height}}function rI(h,r){return h===r?!0:h===null||r===null?!1:h.x===r.x&&h.y===r.y&&h.width===r.width&&h.height===r.height}function Ex(h,r){return h.x1<=r.x2&&h.y1<=r.y2&&h.x2>=r.x1&&h.y2>=r.y1}function sI(h){return h.x1<h.x2&&h.y1<h.y2}function aI(h){if(self.location.protocol==="file:"&&!tI.test(h)){const i=self.location.pathname.split("/");i.pop();const l=i.join("/"),d=self.location.protocol+"//"+l;return h.charAt(0)==="."&&(h=h.slice(1)),h.charAt(0)==="/"&&(h=h.slice(1)),d+"/"+h}return new URL(h,self.location.href).href}class kn{constructor(){R(this,"ta");R(this,"tb");R(this,"tx");R(this,"tc");R(this,"td");R(this,"ty");R(this,"_floatArr",null);R(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return uI}static multiply(r,i,l){const d=r.ta*i.ta+r.tb*i.tc,y=r.ta*i.tb+r.tb*i.td,x=r.ta*i.tx+r.tb*i.ty+r.tx,s=r.tc*i.ta+r.td*i.tc,g=r.tc*i.tb+r.td*i.td,k=r.tc*i.tx+r.td*i.ty+r.ty;return l||(l=new kn),l.ta=d,l.tb=y,l.tx=x,l.tc=s,l.td=g,l.ty=k,l.mutation=!0,l}static identity(r){return r||(r=new kn),r.ta=1,r.tb=0,r.tx=0,r.tc=0,r.td=1,r.ty=0,r.mutation=!0,r}static translate(r,i,l){return l||(l=new kn),l.ta=1,l.tb=0,l.tx=r,l.tc=0,l.td=1,l.ty=i,l.mutation=!0,l}static scale(r,i,l){return l||(l=new kn),l.ta=r,l.tb=0,l.tx=0,l.tc=0,l.td=i,l.ty=0,l.mutation=!0,l}static rotate(r,i){const l=Math.cos(r),d=Math.sin(r);return i||(i=new kn),i.ta=l,i.tb=-d,i.tx=0,i.tc=d,i.td=l,i.ty=0,i.mutation=!0,i}static copy(r,i){return i||(i=new kn),i.ta=r.ta,i.tc=r.tc,i.tb=r.tb,i.td=r.td,i.tx=r.tx,i.ty=r.ty,i.mutation=!0,i}translate(r,i){return this.tx=this.ta*r+this.tb*i+this.tx,this.ty=this.tc*r+this.td*i+this.ty,this.mutation=!0,this}scale(r,i){return this.ta=this.ta*r,this.tb=this.tb*i,this.tc=this.tc*r,this.td=this.td*i,this.mutation=!0,this}rotate(r){if(r===0||!(r%Math.PI*2))return this;const i=Math.cos(r),l=Math.sin(r),d=this.ta*i+this.tb*l,y=this.tb*i-this.ta*l,x=this.tc*i+this.td*l,s=this.td*i-this.tc*l;return this.ta=d,this.tb=y,this.tc=x,this.td=s,this.mutation=!0,this}multiply(r){return kn.multiply(this,r,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const uI=new kn,Zl=0,Jl=2,ef=4,tf=6,nf=1,of=3,rf=5,sf=7;class bf{constructor(r){R(this,"data");this.data=new Float32Array(8),r&&(this.data[Zl]=r[Zl],this.data[Jl]=r[Jl],this.data[ef]=r[ef],this.data[tf]=r[tf],this.data[nf]=r[nf],this.data[of]=r[of],this.data[rf]=r[rf],this.data[sf]=r[sf])}static translate(r,i,l,d,y,x,s,g,k){return k||(k=new bf),k.data[Zl]=r,k.data[Jl]=l,k.data[ef]=y,k.data[tf]=s,k.data[nf]=i,k.data[of]=d,k.data[rf]=x,k.data[sf]=g,k}get x1(){return this.data[Zl]}get x2(){return this.data[Jl]}get x3(){return this.data[ef]}get x4(){return this.data[tf]}get y1(){return this.data[nf]}get y2(){return this.data[of]}get y3(){return this.data[rf]}get y4(){return this.data[sf]}}const Ax=h=>h&&!(h&h-1),a2=(h,r,i,l)=>{const d=3*h,y=3*(i-h)-d,x=1-d-y,s=3*r,g=3*(l-r)-s,k=1-s-g;return function(A){if(A>=1)return 1;if(A<=0)return 0;let I=.5,M,O,w;for(let U=0;U<20;U++){if(M=I*(I*(I*x+y)+d),w=A-M,w>-1e-8&&w<1e-8)return I*(I*(I*k+g)+s);if(O=I*(I*(3*x)+2*y)+d,O>1e-10&&O<1e-10)break;I+=w/O}let L=0,F=1;for(let U=0;U<20;U++){if(I=.5*(L+F),M=I*(I*(I*x+y)+d),w=A-M,w>-1e-8&&w<1e-8)return I*(I*(I*k+g)+s);w<0?F=I:L=I}}},vf={},lI={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},xf=h=>h,fI=h=>{const r=/-?\d*\.?\d+/g,i=h.match(r);if(i){const[l,d,y,x]=i,s=parseFloat(l||"0.42"),g=parseFloat(d||"0"),k=parseFloat(y||"1"),A=parseFloat(x||"1"),I=a2(s,g,k,A);return vf[h]=I,I}return console.warn("Unknown cubic-bezier timing: "+h),xf},cI=h=>{if(h==="linear")return xf;if(vf[h]!==void 0)return vf[h]||xf;if(h==="step-start")return()=>1;if(h==="step-end")return i=>i===1?1:0;const r=lI[h];if(r!==void 0){const[i,l,d,y]=r,x=a2(i,l,d,y);return vf[h]=x,x}return h.startsWith("cubic-bezier")?fI(h):(console.warn("Unknown timing function: "+h),xf)};function bx(h){return(h/1024/1024).toFixed(2)}class hI extends Ao{constructor(i,l,d){super();R(this,"node");R(this,"props");R(this,"settings");R(this,"progress",0);R(this,"delayFor",0);R(this,"timingFunction");R(this,"propValuesMap",{});R(this,"dynPropValuesMap");this.node=i,this.props=l;for(const s in l)if(s!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[s]={start:i[s],target:l[s]};else if(i.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const g in l.shaderProps)this.propValuesMap.shaderProps[g]={start:i.shader.props[g],target:l.shaderProps[g]}}else{const g=Object.keys(l.shaderProps),k=g.length;this.dynPropValuesMap={};for(let A=0;A<k;A++){const I=g[A],M=l.shaderProps[I];this.dynPropValuesMap[I]={};const O=Object.entries(M),w=O.length;for(let L=0;L<w;L++){const[F,U]=O[L];this.dynPropValuesMap[I][F]={start:i.shader.props[I][F],target:U}}}}const y=d.easing||"linear",x=d.delay??0;this.settings={duration:d.duration??0,delay:x,easing:y,loop:d.loop??!1,repeat:d.repeat??0,repeatDelay:d.repeatDelay??0,stopMethod:d.stopMethod??!1},this.timingFunction=cI(y),this.delayFor=x}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(i,l){const d=Object.entries(l),y=d.length;for(let x=0;x<y;x++){const[s,g]=d[x];i[s]=g.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),l=i.length;if(l>0)for(let d=0;d<l;d++){const y=i[d];this.restoreValues(this.node.shader.props[y],this.dynPropValuesMap[y])}}}reverseValues(i){const l=Object.entries(i),d=l.length;for(let y=0;y<d;y++){const[x,s]=l[y];i[x]={start:s.target,target:s.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),l=i.length;if(l>0)for(let d=0;d<l;d++){const y=i[d];this.reverseValues(this.dynPropValuesMap[y])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(i,l,d){return(this.timingFunction(i)||i)*(d-l)+l}updateValue(i,l,d,y){if(this.progress===1)return l;if(this.progress===0)return d;const x=l;if(i.indexOf("color")!==-1){if(d===x)return d;if(y){const s=this.timingFunction(this.progress)||this.progress;return Cx(d,x,s)}return Cx(d,x,this.progress)}return y?this.applyEasing(this.progress,d,x):d+(x-d)*this.progress}updateValues(i,l,d){const y=Object.entries(l),x=y.length;for(let s=0;s<x;s++){const[g,k]=y[s];i[g]=this.updateValue(g,k.target,k.start,d)}}update(i){const{duration:l,loop:d,easing:y,stopMethod:x}=this.settings,{delayFor:s}=this;if(l===0&&s===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=i,this.delayFor>=0)return;i=-this.delayFor,this.delayFor=0}if(l===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=i/l,this.progress>1&&(this.progress=d?0:1,x)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,y),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,y),this.dynPropValuesMap!==void 0){const g=Object.keys(this.dynPropValuesMap),k=g.length;if(k>0)for(let A=0;A<k;A++){const I=g[A];this.updateValues(this.node.shader.props[I],this.dynPropValuesMap[I],y)}}this.progress===1&&this.emit("finished",{})}}class dI extends Ao{constructor(i,l){super();R(this,"manager");R(this,"animation");R(this,"stoppedPromise");R(this,"stoppedResolve",null);R(this,"state");this.manager=i,this.animation=l,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this)}start(){return this.state!=="running"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="running"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(i=>{this.stoppedResolve=i}))}onFinished(){Ke(this.stoppedResolve);const{loop:i,stopMethod:l}=this.animation.settings;if(l==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}i||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.emit("animating",this)}}var Ii;(function(h){h[h.Init=0]="Init",h[h.OutOfBounds=2]="OutOfBounds",h[h.InBounds=4]="InBounds",h[h.InViewport=8]="InViewport"})(Ii||(Ii={}));const Va=new Map;Va.set(Ii.Init,"init");Va.set(Ii.OutOfBounds,"outOfBounds");Va.set(Ii.InBounds,"inBounds");Va.set(Ii.InViewport,"inViewport");var Pe;(function(h){h[h.Children=1]="Children",h[h.ScaleRotate=2]="ScaleRotate",h[h.Local=4]="Local",h[h.Global=8]="Global",h[h.Clipping=16]="Clipping",h[h.CalculatedZIndex=32]="CalculatedZIndex",h[h.ZIndexSortedChildren=64]="ZIndexSortedChildren",h[h.PremultipliedColors=128]="PremultipliedColors",h[h.WorldAlpha=256]="WorldAlpha",h[h.RenderState=512]="RenderState",h[h.IsRenderable=1024]="IsRenderable",h[h.RenderTexture=2048]="RenderTexture",h[h.ParentRenderTexture=4096]="ParentRenderTexture",h[h.None=0]="None",h[h.All=8191]="All"})(Pe||(Pe={}));class Jd extends Ao{constructor(i,l){super();R(this,"stage");R(this,"children",[]);R(this,"_id",eI());R(this,"props");R(this,"updateType",Pe.All);R(this,"globalTransform");R(this,"scaleRotateTransform");R(this,"localTransform");R(this,"renderCoords");R(this,"renderBound");R(this,"strictBound");R(this,"preloadBound");R(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});R(this,"isRenderable",!1);R(this,"renderState",Ii.Init);R(this,"worldAlpha",1);R(this,"premultipliedColorTl",0);R(this,"premultipliedColorTr",0);R(this,"premultipliedColorBl",0);R(this,"premultipliedColorBr",0);R(this,"calcZIndex",0);R(this,"hasRTTupdates",!1);R(this,"parentHasRenderTexture",!1);R(this,"onTextureLoaded",(i,l)=>{var d,y;this.autosizeNode(l),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:l}),((y=(d=this.props.textureOptions)==null?void 0:d.resizeMode)==null?void 0:y.type)==="contain"&&this.setUpdateType(Pe.Local)});R(this,"onTextureFailed",(i,l)=>{this.emit("failed",{type:"texture",error:l})});R(this,"onTextureFreed",()=>{this.emit("freed",{type:"texture"})});this.stage=i,this.props={...l,parent:null,texture:null,src:null,rtt:!1},this.parent=l.parent,this.texture=l.texture,this.src=l.src,this.rtt=l.rtt,this.updateScaleRotateTransform()}loadTexture(){const{texture:i}=this.props;Ke(i),queueMicrotask(()=>{this.textureOptions.preload&&i.ctxTexture.load(),i.state==="loaded"?(Ke(i.dimensions),this.onTextureLoaded(i,i.dimensions)):i.state==="failed"?(Ke(i.error),this.onTextureFailed(i,i.error)):i.state==="freed"&&this.onTextureFreed(i),i.on("loaded",this.onTextureLoaded),i.on("failed",this.onTextureFailed),i.on("freed",this.onTextureFreed)})}unloadTexture(){this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(i){this.autosize&&(this.width=i.width,this.height=i.height)}setUpdateType(i){this.updateType|=i;const l=this.props.parent;l&&!(l.updateType&Pe.Children)&&l.setUpdateType(Pe.Children),this.parentHasRenderTexture&&this.setRTTUpdates(i)}sortChildren(){this.children.sort((i,l)=>i.calcZIndex-l.calcZIndex)}updateScaleRotateTransform(){const{rotation:i,scaleX:l,scaleY:d}=this.props;if(i===0&&l===1&&d===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=kn.rotate(i,this.scaleRotateTransform).scale(l,d)}updateLocalTransform(){var k,A;const{x:i,y:l,width:d,height:y}=this.props,x=this.props.mountX*d,s=this.props.mountY*y;if(this.scaleRotateTransform){const I=this.props.pivotX*d,M=this.props.pivotY*y;this.localTransform=kn.translate(i-x+I,l-s+M,this.localTransform).multiply(this.scaleRotateTransform).translate(-I,-M)}else this.localTransform=kn.translate(i-x,l-s,this.localTransform);const g=this.props.texture;if(g&&g.dimensions&&((A=(k=this.props.textureOptions)==null?void 0:k.resizeMode)==null?void 0:A.type)==="contain"){let I=1,M=1,O=0,w=0;const{width:L,height:F}=g.dimensions,U=L/F,W=d/y;if(U>W){const X=d/L,Q=F*X;w=(y-Q)/2,M=Q/y}else{const X=y/F,Q=L*X;O=(d-Q)/2,I=Q/d}this.localTransform.translate(O,w).scale(I,M)}this.setUpdateType(Pe.Global)}update(i,l){var x;this.updateType&Pe.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Pe.Local)),this.updateType&Pe.Local&&(this.updateLocalTransform(),this.setUpdateType(Pe.Global));const d=this.props.parent;let y=Pe.None;if(this.updateType&Pe.ParentRenderTexture){let s=this.parent;for(;s;)s.rtt&&(this.parentHasRenderTexture=!0),s=s.parent}this.updateType^Pe.All&&this.updateType&Pe.RenderTexture&&this.children.forEach(s=>{s.setUpdateType(Pe.All)}),this.updateType&Pe.Global&&(Ke(this.localTransform),this.globalTransform=kn.copy((d==null?void 0:d.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((x=this.props.parent)!=null&&x.rtt)&&(this.globalTransform=kn.identity()),d&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Pe.Clipping|Pe.RenderState|Pe.Children),y|=Pe.Global),this.updateType&Pe.Clipping&&(this.calculateClippingRect(l),this.setUpdateType(Pe.Children),y|=Pe.Clipping),this.updateType&Pe.WorldAlpha&&(d?this.worldAlpha=d.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(Pe.Children|Pe.PremultipliedColors|Pe.IsRenderable),y|=Pe.WorldAlpha),this.updateType&Pe.PremultipliedColors&&(this.premultipliedColorTl=ql(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=ql(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=ql(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=ql(this.props.colorBr,this.worldAlpha,!0))),this.updateType&Pe.RenderState&&(this.updateRenderState(l),this.setUpdateType(Pe.IsRenderable)),this.updateType&Pe.IsRenderable&&this.updateIsRenderable(),d&&this.updateType&Pe.CalculatedZIndex&&(this.calculateZIndex(),d.setUpdateType(Pe.ZIndexSortedChildren)),this.updateType&Pe.Children&&this.children.length&&!this.rtt&&this.children.forEach(s=>{s.setUpdateType(y),s.updateType!==0&&s.update(i,this.clippingRect)}),this.updateType&Pe.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader!==this.stage.defShaderCtr||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(i){Ke(this.renderBound);const l=i.width||this.stage.root.width,d=i.height||this.stage.root.height;if(this.strictBound=Ql(i.x,i.y,i.x+l,i.y+d,this.strictBound),Ex(this.renderBound,this.strictBound))return Ii.InViewport;const y=this.stage.boundsMargin;return this.preloadBound=Ql(this.strictBound.x1-y[3],this.strictBound.y1-y[0],this.strictBound.x2+y[1],this.strictBound.y2+y[2],this.preloadBound),Ex(this.renderBound,this.preloadBound)?Ii.InBounds:Ii.OutOfBounds}updateRenderState(i){const l=this.checkRenderBounds(i);if(l===this.renderState)return;const d=this.renderState;this.renderState=l;const y=Va.get(l);Ke(y),this.emit(y,{previous:d,current:l})}updateIsRenderable(){let i;this.worldAlpha===0||!this.checkRenderProps()?i=!1:i=this.renderState>Ii.OutOfBounds,this.isRenderable!==i&&(this.isRenderable=i,this.onChangeIsRenderable(i))}onChangeIsRenderable(i){var l;(l=this.texture)==null||l.setRenderableOwner(this,i)}calculateRenderCoords(){const{width:i,height:l,globalTransform:d}=this;Ke(d);const{tx:y,ty:x,ta:s,tb:g,tc:k,td:A}=d;if(g===0&&k===0){const I=y,M=y+i*s,O=x,w=x+l*A;this.renderCoords=bf.translate(I,O,M,O,M,w,I,w,this.renderCoords)}else this.renderCoords=bf.translate(y,x,y+i*s,x+i*k,y+i*s+l*g,x+i*k+l*A,y+l*g,x+l*A,this.renderCoords)}updateBoundingRect(){const{renderCoords:i,globalTransform:l}=this;Ke(l),Ke(i);const{tb:d,tc:y}=l,{x1:x,y1:s,x3:g,y3:k}=i;if(d===0||y===0)this.renderBound=Ql(x,s,g,k,this.renderBound);else{const{x2:A,x4:I,y2:M,y4:O}=i;this.renderBound=Ql(Math.min(x,A,g,I),Math.min(s,M,k,O),Math.max(x,A,g,I),Math.max(s,M,k,O),this.renderBound)}}calculateClippingRect(i){Ke(this.globalTransform);const{clippingRect:l,props:d,globalTransform:y}=this,{clipping:x}=d,s=y.tb!==0||y.tc!==0;x&&!s?(l.x=y.tx,l.y=y.ty,l.width=this.width*y.ta,l.height=this.height*y.td,l.valid=!0):l.valid=!1,i.valid&&l.valid?r2(i,l,l):i.valid&&(s2(i,l),l.valid=!0)}calculateZIndex(){var x,s;const i=this.props,l=i.zIndex||0,d=((x=i.parent)==null?void 0:x.zIndex)||0;let y=l;(s=i.parent)!=null&&s.zIndexLocked&&(y=l<d?l:d),this.calcZIndex=y}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;const i=[...this.children];for(let l=0;l<i.length;l++)i[l].destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(i){const{texture:l,width:d,height:y,textureOptions:x,rtt:s,shader:g}=this.props;if(this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode))return;const{premultipliedColorTl:k,premultipliedColorTr:A,premultipliedColorBl:I,premultipliedColorBr:M}=this,{zIndex:O,worldAlpha:w,globalTransform:L,clippingRect:F,renderCoords:U}=this;Ke(L),Ke(U),i.addQuad({width:d,height:y,colorTl:k,colorTr:A,colorBl:I,colorBr:M,texture:l,textureOptions:x,zIndex:O,shader:g.shader,shaderProps:g.getResolvedProps(),alpha:w,clippingRect:F,tx:L.tx,ty:L.ty,ta:L.ta,tb:L.tb,tc:L.tc,td:L.td,renderCoords:U,rtt:s,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this._id}get x(){return this.props.x}set x(i){this.props.x!==i&&(this.props.x=i,this.setUpdateType(Pe.Local))}get absX(){var i,l,d;return this.props.x+(((i=this.props.parent)==null?void 0:i.absX)||((d=(l=this.props.parent)==null?void 0:l.globalTransform)==null?void 0:d.tx)||0)}get absY(){var i;return this.props.y+(((i=this.props.parent)==null?void 0:i.absY)??0)}get y(){return this.props.y}set y(i){this.props.y!==i&&(this.props.y=i,this.setUpdateType(Pe.Local))}get width(){return this.props.width}set width(i){this.props.width!==i&&(this.props.width=i,this.setUpdateType(Pe.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(Pe.RenderTexture)))}get height(){return this.props.height}set height(i){this.props.height!==i&&(this.props.height=i,this.setUpdateType(Pe.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(Pe.RenderTexture)))}get scale(){return this.scaleX}set scale(i){this.scaleX=i,this.scaleY=i}get scaleX(){return this.props.scaleX}set scaleX(i){this.props.scaleX!==i&&(this.props.scaleX=i,this.setUpdateType(Pe.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(i){this.props.scaleY!==i&&(this.props.scaleY=i,this.setUpdateType(Pe.ScaleRotate))}get mount(){return this.props.mount}set mount(i){(this.props.mountX!==i||this.props.mountY!==i)&&(this.props.mountX=i,this.props.mountY=i,this.props.mount=i,this.setUpdateType(Pe.Local))}get mountX(){return this.props.mountX}set mountX(i){this.props.mountX!==i&&(this.props.mountX=i,this.setUpdateType(Pe.Local))}get mountY(){return this.props.mountY}set mountY(i){this.props.mountY!==i&&(this.props.mountY=i,this.setUpdateType(Pe.Local))}get pivot(){return this.props.pivot}set pivot(i){(this.props.pivotX!==i||this.props.pivotY!==i)&&(this.props.pivotX=i,this.props.pivotY=i,this.props.pivot=i,this.setUpdateType(Pe.Local))}get pivotX(){return this.props.pivotX}set pivotX(i){this.props.pivotX!==i&&(this.props.pivotX=i,this.setUpdateType(Pe.Local))}get pivotY(){return this.props.pivotY}set pivotY(i){this.props.pivotY!==i&&(this.props.pivotY=i,this.setUpdateType(Pe.Local))}get rotation(){return this.props.rotation}set rotation(i){this.props.rotation!==i&&(this.props.rotation=i,this.setUpdateType(Pe.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(i){this.props.alpha=i,this.setUpdateType(Pe.PremultipliedColors|Pe.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(i){this.props.autosize=i}get clipping(){return this.props.clipping}set clipping(i){this.props.clipping=i,this.setUpdateType(Pe.Clipping)}get color(){return this.props.color}set color(i){this.colorTop=i,this.colorBottom=i,this.colorLeft=i,this.colorRight=i,this.props.color=i,this.setUpdateType(Pe.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(i){(this.props.colorTl!==i||this.props.colorTr!==i)&&(this.colorTl=i,this.colorTr=i),this.props.colorTop=i,this.setUpdateType(Pe.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(i){(this.props.colorBl!==i||this.props.colorBr!==i)&&(this.colorBl=i,this.colorBr=i),this.props.colorBottom=i,this.setUpdateType(Pe.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(i){(this.props.colorTl!==i||this.props.colorBl!==i)&&(this.colorTl=i,this.colorBl=i),this.props.colorLeft=i,this.setUpdateType(Pe.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(i){(this.props.colorTr!==i||this.props.colorBr!==i)&&(this.colorTr=i,this.colorBr=i),this.props.colorRight=i,this.setUpdateType(Pe.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(i){this.props.colorTl=i,this.setUpdateType(Pe.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(i){this.props.colorTr=i,this.setUpdateType(Pe.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(i){this.props.colorBl=i,this.setUpdateType(Pe.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(i){this.props.colorBr=i,this.setUpdateType(Pe.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(i){this.props.zIndexLocked=i,this.setUpdateType(Pe.CalculatedZIndex|Pe.Children),this.children.forEach(l=>{l.setUpdateType(Pe.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(i){this.props.zIndex=i,this.setUpdateType(Pe.CalculatedZIndex|Pe.Children),this.children.forEach(l=>{l.setUpdateType(Pe.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(i){const l=this.props.parent;if(l!==i){if(this.props.parent=i,l){const d=l.children.indexOf(this);Ke(d!==-1,"CoreNode.parent: Node not found in old parent's children!"),l.children.splice(d,1),l.setUpdateType(Pe.Children|Pe.ZIndexSortedChildren)}i&&(i.children.push(this),this.setUpdateType(Pe.All),i.setUpdateType(Pe.Children|Pe.ZIndexSortedChildren),(i.rtt||i.parentHasRenderTexture)&&this.setRTTUpdates(Pe.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(i){var l,d;if(this.props.rtt===!0&&(this.props.rtt=i,i===!1&&this.texture!==null)){this.unloadTexture(),this.setUpdateType(Pe.All),this.children.forEach(y=>{y.parentHasRenderTexture=!1}),(l=this.stage.renderer)==null||l.removeRTTNode(this);return}i!==!1&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(Pe.All),this.children.forEach(y=>{y.setUpdateType(Pe.All)}),(d=this.stage.renderer)==null||d.renderToTexture(this))}get shader(){return this.props.shader}set shader(i){this.props.shader!==i&&(this.props.shader=i,this.setUpdateType(Pe.IsRenderable))}get src(){return this.props.src}set src(i){if(this.props.src!==i){if(this.props.src=i,!i){this.texture=null;return}this.texture=this.stage.txManager.loadTexture("ImageTexture",{src:i})}}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let i=this.parent;for(;i;){if(i.rtt)return i;i=i.parent}return null}get texture(){return this.props.texture}set texture(i){if(this.props.texture===i)return;const l=this.props.texture;l&&(l.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=i,i&&(i.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Pe.IsRenderable)}set textureOptions(i){this.props.textureOptions=i}get textureOptions(){return this.props.textureOptions}setRTTUpdates(i){var l;this.hasRTTupdates=!0,(l=this.parent)==null||l.setRTTUpdates(i)}animate(i,l){const d=new hI(this,i,l);return new dI(this.stage.animationManager,d)}flush(){}}const af={alpha:h=>h===1?null:{prop:"opacity",value:`${h}`},x:h=>({prop:"left",value:`${h}px`}),y:h=>({prop:"top",value:`${h}px`}),width:h=>h===0?null:{prop:"width",value:`${h}px`},height:h=>h===0?null:{prop:"height",value:`${h}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:h=>h===!1?null:{prop:"overflow",value:h?"hidden":"visible"},rotation:h=>h===0?null:{prop:"transform",value:`rotate(${h}rad)`},scale:h=>h===1?null:{prop:"transform",value:`scale(${h})`},scaleX:h=>h===1?null:{prop:"transform",value:`scaleX(${h})`},scaleY:h=>h===1?null:{prop:"transform",value:`scaleY(${h})`},color:h=>h===0?null:{prop:"color",value:u2(h)}},u2=h=>{const r=(h&255)/255,i=h>>8&255,l=h>>16&255;return`rgba(${h>>24&255},${l},${i},${r})`},Ix={id:"id"};class pI{constructor(r,i){R(this,"root",null);R(this,"canvas",null);R(this,"height",1080);R(this,"width",1920);R(this,"scaleX",1);R(this,"scaleY",1);if(pp())return;if(!i)throw new Error("settings is required");this.height=Math.ceil(i.appHeight??1080/(i.deviceLogicalPixelRatio??1)),this.width=Math.ceil(i.appWidth??1900/(i.deviceLogicalPixelRatio??1)),this.scaleX=i.deviceLogicalPixelRatio??1,this.scaleY=i.deviceLogicalPixelRatio??1,this.canvas=r,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(r,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(r),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const r=this.canvas.getBoundingClientRect(),i=document.documentElement.scrollTop+r.top,l=document.documentElement.scrollLeft+r.left;this.root.id="root",this.root.style.left=`${l}px`,this.root.style.top=`${i}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(r,i){const l=document.createElement("div");l.style.position="absolute",l.id=r.toString();for(const d in i)this.updateNodeProperty(l,d,i[d]);return l}createNode(r){const i=this.createDiv(r.id,r.props);return i.node=r,r.div=i,this.createProxy(r,i)}createTextNode(r){const i=this.createDiv(r.id,r.props);return i.node=r,r.div=i,this.createProxy(r,i)}createProxy(r,i){return new Proxy(r,{set:(l,d,y)=>(this.updateNodeProperty(i,d,y),Reflect.set(l,d,y)),get:(l,d,y)=>(d==="destroy"&&this.destroyNode(l.id),d==="animate"?(x,s)=>{const g=l.animate(x,s);return new Proxy(g,{get:(k,A,I)=>(A==="start"&&this.animateNode(i,x,s),Reflect.get(k,A,I))})}:Reflect.get(l,d,y))})}destroyNode(r){const i=document.getElementById(r.toString());i==null||i.remove()}updateNodeProperty(r,i,l){var d;if(!(this.root===null||l===void 0||l===null)){if(i==="parent"){const y=l.id;if(y===1){this.root.appendChild(r);return}const x=document.getElementById(y.toString());x==null||x.appendChild(r);return}if(i==="text"){r.innerHTML=String(l),r.style.visibility="hidden";return}if(i==="src"&&l){r.setAttribute("data-src",String(l));return}if(af[i]){const y=(d=af[i])==null?void 0:d.call(af,l);if(y===null)return;if(typeof y=="string"){r.style.setProperty(y,String(l));return}typeof y=="object"&&r.style.setProperty(y.prop,y.value);return}if(Ix[i]){const y=Ix[i];if(!y)return;r.setAttribute(String(y),String(l));return}if(i==="data"){for(const y in l){const x=l[y];x===void 0?r.removeAttribute(`data-${y}`):r.setAttribute(`data-${y}`,String(x))}return}}}animateNode(r,i,l){const{duration:d=1e3,delay:y=0}=l,{x,y:s,width:g,height:k,alpha:A=1,rotation:I=0,scale:M=1,color:O}=i;function w(){setTimeout(()=>{r.style.top=`${s}px`,r.style.left=`${x}px`,r.style.width=`${g}px`,r.style.height=`${k}px`,r.style.opacity=`${A}`,r.style.rotate=`${I}rad`,r.style.scale=`${M}`,r.style.color=u2(O)},d)}setTimeout(w,y)}}const mI=h=>{let r=!1;const i=()=>{if(h.updateFrameTime(),h.updateAnimations(),!h.hasSceneUpdates()){h.calculateFps(),setTimeout(i,16.666666666666668),r||(h.txMemManager.checkCleanup()&&h.txMemManager.cleanup(),h.eventBus.emit("idle"),r=!0),h.flushFrameEvents();return}r=!1,h.drawFrame(),h.flushFrameEvents(),requestAnimationFrame(i)};requestAnimationFrame(i)},gI=()=>performance?performance.now():Date.now();class l2{constructor(r,i){R(this,"textureSource");R(this,"memManager");this.memManager=r,this.textureSource=i}setTextureMemUse(r){this.memManager.setTextureMemUse(this.textureSource,r)}get renderable(){return this.textureSource.renderable}}class f2{constructor(r){R(this,"options");R(this,"mode");R(this,"stage");R(this,"txManager");R(this,"txMemManager");R(this,"shManager");R(this,"rttNodes",[]);this.options=r,this.stage=r.stage,this.txManager=r.txManager,this.txMemManager=r.txMemManager,this.shManager=r.shManager}}class yI{}class c2{static makeCacheKey(r){return!1}static resolveDefaults(r){return{}}}function kx(h,r,i){const l=h.createShader(r);if(!l)throw new Error;if(h.shaderSource(l,i),h.compileShader(l),h.getShaderParameter(l,h.COMPILE_STATUS))return l;console.log(h.getShaderInfoLog(l)),h.deleteShader(l)}function vI(h,r,i){const l=h.createProgram();if(!l)throw new Error;if(h.attachShader(l,r),h.attachShader(l,i),h.linkProgram(l),h.getProgramParameter(l,h.LINK_STATUS))return l;console.log(h.getProgramInfoLog(l)),h.deleteProgram(l)}class bo extends c2{constructor(i){super();R(this,"boundBufferCollection",null);R(this,"buffersBound",!1);R(this,"program");R(this,"vao");R(this,"renderer");R(this,"glw");R(this,"attributeBuffers");R(this,"attributeLocations");R(this,"attributeNames");R(this,"uniformLocations");R(this,"uniformTypes");R(this,"supportsIndexedTextures");const l=this.renderer=i.renderer,d=this.glw=this.renderer.glw;this.supportsIndexedTextures=i.supportsIndexedTextures||!1;const y=d.isWebGl2(),x=y&&i.webgl2Extensions||!y&&i.webgl1Extensions||[],s=y?"2.0":"1.0";x.forEach(L=>{if(!d.getExtension(L))throw new Error(`Shader "${this.constructor.name}" requires extension "${L}" for WebGL ${s} but wasn't found`)});const g=i.shaderSources||this.constructor.shaderSources;if(g)y&&(g!=null&&g.webGl2)&&(g.fragment=g.webGl2.fragment,g.vertex=g.webGl2.vertex,delete g.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const k=l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,A=g.vertex instanceof Function?g.vertex(k):g.vertex,I=g.fragment instanceof Function?g.fragment(k):g.fragment,M=kx(d,d.VERTEX_SHADER,A),O=kx(d,d.FRAGMENT_SHADER,I);if(!M||!O)throw new Error;const w=vI(d,M,O);if(!w)throw new Error;if(this.program=w,y){const L=d.createVertexArray();if(!L)throw new Error;this.vao=L,d.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...i.attributes].forEach(L=>{const F=d.getAttribLocation(this.program,L);if(F<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${L}"!`);const U=d.createBuffer();if(!U)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${L}"`);this.attributeLocations[L]=F,this.attributeBuffers[L]=U,this.attributeNames.push(L)}),this.uniformLocations={},this.uniformTypes={},i.uniforms.forEach(L=>{const F=d.getUniformLocation(this.program,L.name);if(this.uniformTypes[L.name]=L.uniform,!F){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${L.name}"`);return}this.uniformLocations[L.name]=F})}bindBufferAttribute(i,l,d){const{glw:y}=this;y.enableVertexAttribArray(i),y.vertexAttribPointer(l,i,d.size,d.type,d.normalized,d.stride,d.offset)}disableAttribute(i){this.glw.disableVertexAttribArray(i)}disableAttributes(){for(const i in this.attributeLocations)this.disableAttribute(this.attributeLocations[i]);this.boundBufferCollection=null}canBatchShaderProps(i,l){return!1}bindRenderOp(i,l){this.bindBufferCollection(i.buffers),i.textures.length>0&&this.bindTextures(i.textures);const{glw:d,parentHasRenderTexture:y,renderToTexture:x}=i;if(!(x&&y)){if(y){const{width:s,height:g}=i.framebufferDimensions||{};this.setUniform("u_pixelRatio",1),this.setUniform("u_resolution",new Float32Array([s??0,g??0]))}else this.setUniform("u_pixelRatio",i.options.pixelRatio),this.setUniform("u_resolution",new Float32Array([d.canvas.width,d.canvas.height]));if(l){if(Zd(l,"$dimensions")){let s=l.$dimensions;s||(s=i.dimensions),this.setUniform("u_dimensions",[s.width,s.height])}if(Zd(l,"$alpha")){let s=l.$alpha;s||(s=i.alpha),this.setUniform("u_alpha",s)}this.bindProps(l)}}}setUniform(i,...l){this.glw.setUniform(this.uniformTypes[i],this.uniformLocations[i],...l)}bindBufferCollection(i){if(this.boundBufferCollection!==i){for(const l in this.attributeLocations){const d=i.getBuffer(l),y=i.getAttributeInfo(l);Ke(d,`Buffer for "${l}" not found`),Ke(y),this.bindBufferAttribute(this.attributeLocations[l],d,y)}this.boundBufferCollection=i}}bindProps(i){}bindTextures(i){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}R(bo,"shaderSources");class h2 extends yI{constructor(i,l,d,y,x,s,g,k,A,I,M,O,w){super();R(this,"glw");R(this,"options");R(this,"buffers");R(this,"shader");R(this,"shaderProps");R(this,"alpha");R(this,"clippingRect");R(this,"dimensions");R(this,"bufferIdx");R(this,"zIndex");R(this,"renderToTexture");R(this,"parentHasRenderTexture");R(this,"framebufferDimensions");R(this,"length",0);R(this,"numQuads",0);R(this,"textures",[]);R(this,"maxTextures");this.glw=i,this.options=l,this.buffers=d,this.shader=y,this.shaderProps=x,this.alpha=s,this.clippingRect=g,this.dimensions=k,this.bufferIdx=A,this.zIndex=I,this.renderToTexture=M,this.parentHasRenderTexture=O,this.framebufferDimensions=w,this.maxTextures=y.supportsIndexedTextures?i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(i){const{textures:l,maxTextures:d}=this,y=l.findIndex(s=>s===i);if(y!==-1)return y;const x=l.length;return x>=d?4294967295:(this.textures.push(i),x)}draw(){const{glw:i,shader:l,shaderProps:d,options:y}=this,{shManager:x}=y;x.useShader(l),l.bindRenderOp(this,d);const s=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:g,y:k,width:A,height:I}=this.clippingRect,M=y.pixelRatio,O=y.canvas.height,w=Math.round(g*M),L=Math.round(A*M),F=Math.round(I*M),U=Math.round(O-F-k*M);i.setScissorTest(!0),i.scissor(w,U,L,F)}else i.setScissorTest(!1);i.drawElements(i.TRIANGLES,6*this.numQuads,i.UNSIGNED_SHORT,s)}}function xI(h){const r={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(r).forEach(l=>{r[l]=h.getParameter(h[l])}),r}function wI(h){const r={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(r).forEach(l=>{r[l]=h.getExtension(l)}),r}function SI(h,r){const i=~~(r/80),l=new Uint16Array(i*6);for(let y=0,x=0;y<i;y+=6,x+=4)l[y]=x,l[y+1]=x+1,l[y+2]=x+2,l[y+3]=x+2,l[y+4]=x+1,l[y+5]=x+3;const d=h.createBuffer();h.elementArrayBufferData(d,l,h.STATIC_DRAW)}function TI(h){return h!==null&&typeof h=="object"&&h.constructor&&h.constructor.name==="HTMLImageElement"}const Fd=new Uint8Array([0,0,0,0]);class If extends l2{constructor(i,l,d){super(l,d);R(this,"glw");R(this,"_nativeCtxTexture",null);R(this,"_state","freed");R(this,"_w",0);R(this,"_h",0);this.glw=i}get ctxTexture(){return this._state==="freed"&&this.load(),Ke(this._nativeCtxTexture),this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this.onLoadRequest().then(({width:i,height:l})=>{this._state!=="freed"&&(this._state="loaded",this._w=i,this._h=l,this.textureSource.setState("loaded",{width:i,height:l}))}).catch(i=>{this._state!=="freed"&&(this._state="failed",this.textureSource.setState("failed",i),console.error(i))}))}async onLoadRequest(){var x;const{glw:i}=this;i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(Fd.byteLength);const l=await((x=this.textureSource)==null?void 0:x.getTextureData());if(!this._nativeCtxTexture)return Ke(this._state==="freed"),{width:0,height:0};let d=0,y=0;if(Ke(this._nativeCtxTexture),i.activeTexture(0),l.data instanceof ImageBitmap||l.data instanceof ImageData||TI(l.data)){const s=l.data;d=s.width,y=s.height,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!l.premultiplyAlpha),i.texImage2D(0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,s),this.setTextureMemUse(d*y*4),(i.isWebGl2()||Ax(d)&&Ax(y))&&i.generateMipmap()}else if(l.data===null)d=0,y=0,i.bindTexture(this._nativeCtxTexture),i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Fd),this.setTextureMemUse(Fd.byteLength);else if("mipmaps"in l.data&&l.data.mipmaps){const{mipmaps:s,width:g=0,height:k=0,type:A,glInternalFormat:I}=l.data,M=A==="ktx"?new DataView(s[0]??new ArrayBuffer(0)):s[0];i.bindTexture(this._nativeCtxTexture),i.compressedTexImage2D(0,I,g,k,0,M),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),this.setTextureMemUse(M.byteLength)}else console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",l);return{width:d,height:y}}free(){if(this._state==="freed"||(this._state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:i}=this;i.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:i}=this,l=i.createTexture();if(!l)throw new Error("Could not create WebGL Texture");return i.activeTexture(0),i.bindTexture(l),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),l}}class gs extends Ao{constructor(i){super();R(this,"txManager");R(this,"dimensions",null);R(this,"error",null);R(this,"state","freed");R(this,"renderableOwners",new Set);R(this,"renderable",!1);R(this,"lastRenderableChangeTime",0);this.txManager=i}setRenderableOwner(i,l){var y,x;const d=this.renderableOwners.size;if(l){this.renderableOwners.add(i);const s=this.renderableOwners.size;s>d&&s===1&&(this.renderable=!0,this.lastRenderableChangeTime=this.txManager.frameTime,(y=this.onChangeIsRenderable)==null||y.call(this,!0))}else{this.renderableOwners.delete(i);const s=this.renderableOwners.size;s<d&&s===0&&(this.renderable=!1,this.lastRenderableChangeTime=this.txManager.frameTime,(x=this.onChangeIsRenderable)==null||x.call(this,!1))}}get ctxTexture(){const i=this.txManager.renderer.createCtxTexture(this);return Object.defineProperty(this,"ctxTexture",{value:i}),i}setState(i,...l){if(this.state!==i){if(this.state=i,i==="loaded"){const d=l;this.dimensions=d[0]}else if(i==="failed"){const d=l;this.error=d[0]}this.emit(i,...l)}}static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}const Oa=class Oa extends gs{constructor(i,l){super(i);R(this,"props");this.props=Oa.resolveDefaults(l||{})}get color(){return this.props.color}set color(i){this.props.color=i}async getTextureData(){const i=new Uint32Array([this.color]),l=new Uint8ClampedArray(i.buffer);return{data:new ImageData(l,1,1),premultiplyAlpha:!0}}static makeCacheKey(i){return`ColorTexture,${Oa.resolveDefaults(i).color}`}static resolveDefaults(i){return{color:i.color||4294967295}}};R(Oa,"z$__type__Props");let kf=Oa;const Df=class Df extends gs{constructor(i,l){super(i);R(this,"props");R(this,"parentTexture");R(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});R(this,"onParentTxFailed",(i,l)=>{this.setState("failed",l)});this.props=Df.resolveDefaults(l||{}),this.parentTexture=this.props.texture,queueMicrotask(()=>{const d=this.parentTexture;d.state==="loaded"?this.onParentTxLoaded(d,d.dimensions):d.state==="failed"&&this.onParentTxFailed(d,d.error),d.on("loaded",this.onParentTxLoaded),d.on("failed",this.onParentTxFailed)})}onChangeIsRenderable(i){this.parentTexture.setRenderableOwner(this,i)}async getTextureData(){return{data:this.props}}static makeCacheKey(i){return!1}static resolveDefaults(i){return{texture:i.texture,x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0}}};R(Df,"z$__type__Props");let ms=Df;class CI extends If{constructor(r,i,l){super(r,i,l)}async onLoadRequest(){var i,l;const r=await this.textureSource.getTextureData();return{width:((i=r.data)==null?void 0:i.width)||0,height:((l=r.data)==null?void 0:l.height)||0}}}class d2 extends bo{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}}R(d2,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class p2 extends bo{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});R(this,"supportsIndexedTextures",!0)}bindTextures(i){const{renderer:l,glw:d}=this;if(i.length>l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);i.forEach((x,s)=>{d.activeTexture(s),d.bindTexture(x.ctxTexture)});const y=Array.from(Array(i.length).keys());this.setUniform("u_textures[0]",y)}}R(p2,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:i=>`
      #define txUnits ${i}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${i}], int idx, vec2 uv) {
        ${Array.from(Array(i).keys()).map(l=>`
          ${l!==0?"else ":""}if (idx == ${l}) {
            return texture2D(textures[${l}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class an{constructor(r){R(this,"priority",1);R(this,"name","");R(this,"ref");R(this,"target");R(this,"passParameters","");R(this,"declaredUniforms","");R(this,"uniformInfo",{});const{ref:i,target:l,props:d={}}=r;this.ref=i,this.target=l;const y={},x=[];let s="";const g=this.constructor.uniforms||{};for(const k in g){const A=g[k],I=A.type,M=`${i}_${k}`;let O="";A.size&&(O=`[${A.size(d)}]`),x.push(M),s+=`uniform ${I} ${M}${O};`,y[k]={name:M,uniform:g[k].method}}this.passParameters=x.join(","),this.declaredUniforms=s,this.uniformInfo=y}static getEffectKey(r){return""}static getMethodParameters(r,i){const l=[];for(const d in r){const y=r[d];let x="";y.size&&(x=`[${y.size(i)}]`),l.push(`${y.type} ${d}${x}`)}return l.join(",")}static resolveDefaults(r){return{}}static makeEffectKey(r){return!1}}R(an,"uniforms",{}),R(an,"methods"),R(an,"onShaderMask"),R(an,"onColorize"),R(an,"onEffectMask");const zd=new Map,EI=(h,r)=>{const i=JSON.stringify(h);if(zd.has(i))return zd.get(i);h=h??[];const l=[],d=h.length;let y=0;for(;y<d;y++){const{name:x,type:s,props:g}=h[y],k={name:x,type:s,props:{}},A=r[s],I=A.resolveDefaults(g),M=A.uniforms,O=Object.keys(M),w=O.length;let L=0;for(;L<w;L++){const F=O[L],U=M[F],W={value:I[F],programValue:void 0,updateOnBind:U.updateOnBind||!1,hasValidator:U.validator!==void 0,hasProgramValueUpdater:U.updateProgramValue!==void 0},X=W.hasValidator&&U.validator(I[F],I)||I[F];I[F]!==X&&(W.validatedValue=X),W.hasProgramValueUpdater&&U.updateProgramValue(W),W.programValue===void 0&&(W.programValue=W.value),k.props[F]=W}l.push(k)}return zd.set(i,l),l},no=class no extends bo{constructor(i,l,d){const y=no.createShader(l,d);super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...y.uniforms],shaderSources:{vertex:y.vertex,fragment:y.fragment}});R(this,"effects",[]);this.effects=y.effects}bindTextures(i){const{glw:l}=this;l.activeTexture(0),l.bindTexture(i[0].ctxTexture)}bindProps(i){var x;const l=i.effects,d=l.length;let y=0;for(;y<d;y++){const s=l[y],g=this.effects[y].uniformInfo,k=Object.keys(s.props),A=k.length;let I=0;for(;I<A;I++){const M=k[I];if(s.props[M].updateOnBind===!0){const w=(x=this.renderer.shManager.getRegisteredEffects()[s.type])==null?void 0:x.uniforms[M];w==null||w.updateProgramValue(s.props[M],i)}this.setUniform(g[M].name,s.props[M].programValue)}}}canBatchShaderProps(i,l){if(i.$dimensions.width!==l.$dimensions.width||i.$dimensions.height!==l.$dimensions.height||i.effects.length!==l.effects.length)return!1;const d=i.effects.length;let y=0;for(;y<d;y++){const x=i.effects[y],s=l.effects[y];if(x.type!==s.type)return!1;for(const g in x.props)if(s.props&&!s.props[g]||x.props[g].value!==s.props[g].value)return!1}return!0}static createShader(i,l){const d={},y={};let x="";const s=[],g=[],k=i.effects.map(w=>{const L=l[w.type],F=L.getEffectKey(w.props||{});d[F]=d[F]?++d[F]:1;const U=d[F];U===1&&g.push({key:F,type:w.type,props:w.props});const W=new L({ref:`${F}${U===1?"":U}`,target:F,props:w.props});return x+=W.declaredUniforms,s.push(...Object.values(W.uniformInfo)),W});let A="";g==null||g.forEach(w=>{const L=l[w.type],F=L.resolveDefaults(w.props??{}),U=[];for(const H in L.methods){let J=H;const le=L.methods[H];y[H]&&y[H]!==le&&(J=no.resolveMethodDuplicate(H,le,y)),y[J]=le.replace("function",J),U.push({m:H,cm:J})}let W=L.onShaderMask instanceof Function?L.onShaderMask(F):L.onShaderMask,X=L.onColorize instanceof Function?L.onColorize(F):L.onColorize,Q=L.onEffectMask instanceof Function?L.onEffectMask(F):L.onEffectMask;U.forEach(H=>{const{m:J,cm:le}=H,E=new RegExp(`\\$${J}`,"g");W&&(W=W.replace(E,le)),X&&(X=X.replace(E,le)),Q&&(Q=Q.replace(E,le))});const ee=L.getMethodParameters(L.uniforms,F),Z=ee.length>0?`, ${ee}`:"";W&&(A+=`
        float fx_${w.key}_onShaderMask(float shaderMask ${Z}) {
          ${W}
        }
        `),X&&(A+=`
          vec4 fx_${w.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${Z}) {
            ${X}
          }
        `),Q&&(A+=`
          vec4 fx_${w.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${Z}) {
            ${Q}
          }
        `)});let I="";for(const w in y)I+=y[w];let M="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",O=`

    `;for(let w=0;w<k.length;w++){const L=k[w],F=L.passParameters.length>0?`, ${L.passParameters}`:"",U=l[L.name];U.onShaderMask&&(O+=`
        shaderMask = fx_${L.target}_onShaderMask(shaderMask ${F});
        `),U.onColorize&&(O+=`
        maskColor = fx_${L.target}_onColorize(shaderMask, maskColor, shaderColor${F});
        `),U.onEffectMask&&(M=`fx_${L.target}_onEffectMask(shaderMask, maskColor, shaderColor${F})`);const W=k[w+1];(W===void 0||l[W.name].onEffectMask)&&(O+=`
          shaderColor = ${M};
        `)}return{effects:k,uniforms:s,fragment:no.fragment(x,I,A,O),vertex:no.vertex()}}static resolveMethodDuplicate(i,l,d,y=0){const x=i+(y>0?y:"");return d[x]&&d[x]!==l?this.resolveMethodDuplicate(i,l,d,++y):x}static resolveDefaults(i,l){return Ke(l),{effects:EI(i.effects??[],l),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(i,l){var y;let d="";return(y=i.effects)==null||y.forEach(x=>{const g=l[x.type].getEffectKey(x.props||{});d+=`,${g}`}),`DynamicShader${d}`}};R(no,"z$__type__Props"),R(no,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),R(no,"fragment",(i,l,d,y)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${i}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${l}

    ${d}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${y}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let cs=no;class ep extends bo{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(r){return{radius:r.radius||10,$dimensions:{width:0,height:0}}}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}bindProps(r){const i=Math.min(r.$dimensions.width,r.$dimensions.height)/(2*r.radius);this.setUniform("u_radius",r.radius*Math.min(i,1))}canBatchShaderProps(r,i){return r.radius===i.radius&&r.$dimensions.width===i.$dimensions.width&&r.$dimensions.height===i.$dimensions.height}}R(ep,"z$__type__Props"),R(ep,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const AI=new Float32Array([1,0,0,0,1,0,0,0,1]),Nf=class Nf extends bo{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}bindProps(r){const i=Nf.resolveDefaults(r);for(const l in i)if(l==="transform")this.setUniform("u_transform",!1,i[l]);else if(l==="scrollY")this.setUniform("u_scrollY",i[l]);else if(l==="color"){const d=za(i.color);this.setUniform("u_color",d)}else l==="size"?this.setUniform("u_size",i[l]):l==="distanceRange"?this.setUniform("u_distanceRange",i[l]):l==="debug"&&this.setUniform("u_debug",i[l]?1:0)}static resolveDefaults(r={}){return{transform:r.transform??AI,scrollY:r.scrollY??0,color:r.color??4294967295,size:r.size??16,distanceRange:r.distanceRange??1,debug:r.debug??!1}}};R(Nf,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let tp=Nf;const ys=h=>{h.programValue===void 0&&(h.programValue=new Float32Array(4));const r=h.value,i=h.programValue;i[0]=(r>>>24)/255,i[1]=(r>>>16&255)/255,i[2]=(r>>>8&255)/255,i[3]=(r&255)/255},bI=h=>{const r=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=h.programValue;i[0]=r[0],i[1]=r[1]}else h.programValue=new Float32Array(r)},II=h=>{const r=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=h.programValue;i[0]=r[0],i[1]=r[1],i[2]=r[1],i[3]=r[1]}else h.programValue=new Float32Array(r)},m2=h=>{const r=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=r.length,l=h.programValue;for(let d=0;d<i;d++)l[d]=r[d]}else h.programValue=new Float32Array(r)},mp=h=>{const r=Array.isArray(h);if(r){if(r&&h.length===4)return h;if(r&&h.length===2)return[h[0],h[1],h[0],h[1]];if(r&&h.length===3)return[h[0],h[1],h[2],h[0]]}else return[h,h,h,h];return[h[0],h[0],h[0],h[0]]},g2=(h,r)=>{h.programValue===void 0&&(h.programValue=new Float32Array(4));const i=h.programValue,l=h.validatedValue||h.value;if(r===void 0&&h.$dimensions===void 0){i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3];return}let d=h.$dimensions;if(r!==void 0){const{$dimensions:M}=r;if(d!==void 0&&(d.width===M.width||d.height===M.height))return;d===void 0&&(d={width:M==null?void 0:M.width,height:M==null?void 0:M.height},h.$dimensions=d)}const{width:y,height:x}=d,[s,g,k,A]=l,I=Math.min(Math.min(Math.min(y/Math.max(y,s+g),y/Math.max(y,k+A)),Math.min(x/Math.max(x,s+k),x/Math.max(x,g+A))),1);i[0]=s*I,i[1]=g*I,i[2]=k*I,i[3]=A*I};class ns extends an{constructor(){super(...arguments);R(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(i){return{radius:i.radius??10}}}R(ns,"z$__type__Props"),R(ns,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:mp,updateProgramValue:g2}}),R(ns,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),R(ns,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),R(ns,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class _a extends an{constructor(){super(...arguments);R(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}R(_a,"z$__type__Props"),R(_a,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ys,method:"uniform4fv",type:"vec4"}}),R(_a,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),R(_a,"onColorize",`
    return color;
  `);const So=class So extends an{constructor(){super(...arguments);R(this,"name","linearGradient")}static getEffectKey(i){return`linearGradient${i.colors.length}`}static resolveDefaults(i){const l=i.colors??[4278190080,4294967295];let d=i.stops||[];if(d.length===0||d.length!==l.length){const y=l.length;let x=0;const s=d;for(;x<y;x++)d[x]?(s[x]=d[x],d[x-1]===void 0&&s[x-2]!==void 0&&(s[x-1]=s[x-2]+(d[x]-s[x-2])/2)):s[x]=x*(1/(l.length-1));d=s}return{colors:l,stops:d,angle:i.angle??0}}};R(So,"z$__type__Props"),R(So,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:i=>i.reduce((l,d)=>l.concat(za(d)),[]),updateProgramValue:m2,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),R(So,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),R(So,"ColorLoop",i=>{let l="";for(let d=2;d<i;d++)l+=`colorOut = mix(colorOut, colors[${d}], clamp((dist - stops[${d-1}]) / (stops[${d}] - stops[${d-1}]), 0.0, 1.0));`;return l}),R(So,"onColorize",i=>{const l=i.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${So.ColorLoop(l)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let np=So;class ip extends an{constructor(){super(...arguments);R(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(i){return{amount:i.amount??1}}}R(ip,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),R(ip,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class is extends an{constructor(){super(...arguments);R(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}R(is,"z$__type__Props"),R(is,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ys,method:"uniform4fv",type:"vec4"}}),R(is,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),R(is,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),R(is,"onColorize",`
    return color;
  `);class os extends an{constructor(){super(...arguments);R(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}R(os,"z$__type__Props"),R(os,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ys,method:"uniform4fv",type:"vec4"}}),R(os,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),R(os,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),R(os,"onColorize",`
    return color;
  `);class rs extends an{constructor(){super(...arguments);R(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}R(rs,"z$__type__Props"),R(rs,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ys,method:"uniform4fv",type:"vec4"}}),R(rs,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),R(rs,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),R(rs,"onColorize",`
    return color;
  `);class ss extends an{constructor(){super(...arguments);R(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}R(ss,"z$__type__Props"),R(ss,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ys,method:"uniform4fv",type:"vec4"}}),R(ss,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),R(ss,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),R(ss,"onColorize",`
    return color;
  `);class Ra extends an{constructor(){super(...arguments);R(this,"name","glitch")}static getEffectKey(i){return"glitch"}static resolveDefaults(i){return{amplitude:i.amplitude??.2,narrowness:i.narrowness??4,blockiness:i.blockiness??2,minimizer:i.minimizer??8,time:i.time??Date.now()}}}R(Ra,"z$__type__Props"),R(Ra,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:i=>{const l=i.value=(Date.now()-i.value)%1e3;i.programValue=l},type:"float"}}),R(Ra,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),R(Ra,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class wf extends an{constructor(){super(...arguments);R(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(i){return{fade:i.fade??10}}}R(wf,"z$__type__Props"),R(wf,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:mp,updateProgramValue:II}}),R(wf,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const er=class er extends an{constructor(){super(...arguments);R(this,"name","radialGradient")}static getEffectKey(i){return`radialGradient${i.colors.length}`}static resolveDefaults(i){const l=i.colors??[4278190080,4294967295];let d=i.stops||[];if(d.length===0||d.length!==l.length){const y=l.length;let x=0;const s=d;for(;x<y;x++)d[x]?(s[x]=d[x],d[x-1]===void 0&&s[x-2]!==void 0&&(s[x-1]=s[x-2]+(d[x]-s[x-2])/2)):s[x]=x*(1/(l.length-1));d=s}return{colors:l,stops:d,width:i.width??0,height:i.height??i.width??0,pivot:i.pivot??[.5,.5]}}};R(er,"z$__type__Props"),R(er,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:bI,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:i=>i.reduce((l,d)=>l.concat(za(d)),[]),updateProgramValue:m2,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),R(er,"ColorLoop",i=>{let l="";for(let d=2;d<i;d++)l+=`colorOut = mix(colorOut, colors[${d}], clamp((dist - stops[${d-1}]) / (stops[${d}] - stops[${d-1}]), 0.0, 1.0));`;return l}),R(er,"onColorize",i=>{const l=i.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${er.ColorLoop(l)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let op=er;class as extends an{constructor(){super(...arguments);R(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(i){return{width:i.width??10,progress:i.progress??.5,offset:i.offset??0,range:i.range??Math.PI*2,rounded:i.rounded??!1,radius:i.radius??1,color:i.color??4294967295}}}R(as,"z$__type__Props"),R(as,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:i=>i?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ys,method:"uniform4fv",type:"vec4"}}),R(as,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),R(as,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),R(as,"onColorize",`
    return color;
  `);class us extends an{constructor(){super(...arguments);R(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(i){return{x:i.x||0,y:i.y||0,width:i.width||50,height:i.height||50,radius:i.radius??0}}}R(us,"z$__type__Props"),R(us,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:mp,updateProgramValue:g2}}),R(us,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),R(us,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),R(us,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const y2="RoundedRectangle";class gp extends c2{constructor(i){super();R(this,"shType");this.shType=i,i!==y2&&console.warn("Unsupported shader:",i)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class kI{constructor(r,i,l,d){R(this,"type");R(this,"shader");R(this,"resolvedProps");R(this,"props");this.type=r,this.shader=i,this.resolvedProps=l;const y=Object.keys(l),x=y.length,s={};for(let g=0;g<x;g++){const k=y[g];Object.defineProperty(s,k,{get:()=>this.resolvedProps[k],set:A=>{this.resolvedProps[k]=A,d.requestRender()}})}this.props=s}getResolvedProps(){return this.resolvedProps}}class MI{constructor(r,i,l){R(this,"shader");R(this,"resolvedProps");R(this,"props");R(this,"type");this.shader=r,this.type="DynamicShader",this.resolvedProps=i;const d=l.getRegisteredEffects(),y={},x=i.effects,s=x.length;for(let g=0;g<s;g++){const{name:k,props:A,type:I}=x[g];if(k===void 0)continue;const M={},O=Object.keys(A),w=O.length;for(let L=0;L<w;L++){const F=O[L];Object.defineProperty(M,F,{get:()=>this.resolvedProps.effects[g].props[F].value,set:U=>{var X,Q;const W=this.resolvedProps.effects[g].props[F];W.value=U,W.hasValidator&&(U=W.validatedValue=(X=d[I].uniforms[F])==null?void 0:X.validator(U,A)),W.hasProgramValueUpdater?(Q=d[I].uniforms[F])==null||Q.updateProgramValue(W):W.programValue=U,l.renderer.stage.requestRender()}})}Object.defineProperty(y,k,{get:()=>M})}this.props=y}getResolvedProps(){return this.resolvedProps}}class _I{constructor(){R(this,"shCache",new Map);R(this,"shConstructors",{});R(this,"attachedShader",null);R(this,"effectConstructors",{});R(this,"renderer");this.registerShaderType("DefaultShader",d2),this.registerShaderType("DefaultShaderBatched",p2),this.registerShaderType("RoundedRectangle",ep),this.registerShaderType("DynamicShader",cs),this.registerShaderType("SdfShader",tp),this.registerEffectType("border",_a),this.registerEffectType("borderBottom",rs),this.registerEffectType("borderLeft",ss),this.registerEffectType("borderRight",is),this.registerEffectType("borderTop",os),this.registerEffectType("fadeOut",wf),this.registerEffectType("linearGradient",np),this.registerEffectType("radialGradient",op),this.registerEffectType("grayscale",ip),this.registerEffectType("glitch",Ra),this.registerEffectType("radius",ns),this.registerEffectType("radialProgress",as),this.registerEffectType("holePunch",us)}registerShaderType(r,i){this.shConstructors[r]=i}registerEffectType(r,i){this.effectConstructors[r]=i}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(r,i){if(!this.renderer)throw new Error("Renderer is not been defined");const l=this.shConstructors[r];if(!l)throw new Error(`Shader type "${r}" is not registered`);if(this.renderer.mode==="canvas"&&l.prototype instanceof bo)return this._createShaderCtr(r,new gp(r),i);if(r==="DynamicShader")return this.loadDynamicShader(i);const d=l.resolveDefaults(i),y=l.makeCacheKey(d)||l.name;if(y&&this.shCache.has(y))return this._createShaderCtr(r,this.shCache.get(y),d);const x=new l(this.renderer,i);return y&&this.shCache.set(y,x),this._createShaderCtr(r,x,d)}loadDynamicShader(r){if(!this.renderer)throw new Error("Renderer is not been defined");const i=cs.resolveDefaults(r,this.effectConstructors),l=cs.makeCacheKey(i,this.effectConstructors);if(l&&this.shCache.has(l))return this._createDynShaderCtr(this.shCache.get(l),i);const d=new cs(this.renderer,r,this.effectConstructors);return l&&this.shCache.set(l,d),this._createDynShaderCtr(d,i)}_createShaderCtr(r,i,l){return new kI(r,i,l,this.renderer.stage)}_createDynShaderCtr(r,i){return new MI(r,i,this)}useShader(r){this.attachedShader!==r&&(this.attachedShader&&this.attachedShader.detach(),r.attach(),this.attachedShader=r)}}class v2{constructor(r){R(this,"config");this.config=r}getBuffer(r){var i;return(i=this.config.find(l=>l.attributes[r]))==null?void 0:i.buffer}getAttributeInfo(r){var i;return(i=this.config.find(l=>l.attributes[r]))==null?void 0:i.attributes[r]}}function RI(h){return self.WebGL2RenderingContext&&h instanceof self.WebGL2RenderingContext}class LI{constructor(r){R(this,"gl");R(this,"activeTextureUnit",0);R(this,"texture2dUnits");R(this,"texture2dParams",new WeakMap);R(this,"scissorEnabled");R(this,"scissorX");R(this,"scissorY");R(this,"scissorWidth");R(this,"scissorHeight");R(this,"blendEnabled");R(this,"blendSrcRgb");R(this,"blendDstRgb");R(this,"blendSrcAlpha");R(this,"blendDstAlpha");R(this,"boundArrayBuffer");R(this,"boundElementArrayBuffer");R(this,"curProgram");R(this,"programUniforms",new WeakMap);R(this,"canvas");R(this,"MAX_RENDERBUFFER_SIZE");R(this,"MAX_TEXTURE_SIZE");R(this,"MAX_VIEWPORT_DIMS");R(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");R(this,"MAX_TEXTURE_IMAGE_UNITS");R(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");R(this,"MAX_VERTEX_ATTRIBS");R(this,"MAX_VARYING_VECTORS");R(this,"MAX_VERTEX_UNIFORM_VECTORS");R(this,"MAX_FRAGMENT_UNIFORM_VECTORS");R(this,"TEXTURE_MAG_FILTER");R(this,"TEXTURE_MIN_FILTER");R(this,"TEXTURE_WRAP_S");R(this,"TEXTURE_WRAP_T");R(this,"LINEAR");R(this,"CLAMP_TO_EDGE");R(this,"RGBA");R(this,"UNSIGNED_BYTE");R(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");R(this,"UNPACK_FLIP_Y_WEBGL");R(this,"FLOAT");R(this,"TRIANGLES");R(this,"UNSIGNED_SHORT");R(this,"ONE");R(this,"ONE_MINUS_SRC_ALPHA");R(this,"VERTEX_SHADER");R(this,"FRAGMENT_SHADER");R(this,"STATIC_DRAW");R(this,"COMPILE_STATUS");R(this,"LINK_STATUS");R(this,"DYNAMIC_DRAW");R(this,"COLOR_ATTACHMENT0");this.gl=r,this.activeTextureUnit=r.getParameter(r.ACTIVE_TEXTURE)-r.TEXTURE0;const i=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(i).fill(void 0).map((d,y)=>(this.activeTexture(y),r.getParameter(r.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=r.isEnabled(r.SCISSOR_TEST);const l=r.getParameter(r.SCISSOR_BOX);this.scissorX=l[0],this.scissorY=l[1],this.scissorWidth=l[2],this.scissorHeight=l[3],this.blendEnabled=r.isEnabled(r.BLEND),this.blendSrcRgb=r.getParameter(r.BLEND_SRC_RGB),this.blendDstRgb=r.getParameter(r.BLEND_DST_RGB),this.blendSrcAlpha=r.getParameter(r.BLEND_SRC_ALPHA),this.blendDstAlpha=r.getParameter(r.BLEND_DST_ALPHA),this.boundArrayBuffer=r.getParameter(r.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=r.getParameter(r.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=r.getParameter(r.CURRENT_PROGRAM),this.canvas=r.canvas,this.MAX_RENDERBUFFER_SIZE=r.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=r.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=r.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=r.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=r.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=r.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=r.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=r.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=r.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=r.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=r.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=r.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=r.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=r.TEXTURE_WRAP_T,this.LINEAR=r.LINEAR,this.CLAMP_TO_EDGE=r.CLAMP_TO_EDGE,this.RGBA=r.RGBA,this.UNSIGNED_BYTE=r.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=r.UNPACK_FLIP_Y_WEBGL,this.FLOAT=r.FLOAT,this.TRIANGLES=r.TRIANGLES,this.UNSIGNED_SHORT=r.UNSIGNED_SHORT,this.ONE=r.ONE,this.ONE_MINUS_SRC_ALPHA=r.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=r.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=r.TRIANGLES,this.UNSIGNED_SHORT=r.UNSIGNED_SHORT,this.VERTEX_SHADER=r.VERTEX_SHADER,this.FRAGMENT_SHADER=r.FRAGMENT_SHADER,this.STATIC_DRAW=r.STATIC_DRAW,this.COMPILE_STATUS=r.COMPILE_STATUS,this.LINK_STATUS=r.LINK_STATUS,this.DYNAMIC_DRAW=r.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=r.COLOR_ATTACHMENT0}isWebGl2(){return RI(this.gl)}activeTexture(r){const{gl:i}=this;this.activeTextureUnit!==r&&(i.activeTexture(r+i.TEXTURE0),this.activeTextureUnit=r)}bindTexture(r){const{gl:i,activeTextureUnit:l,texture2dUnits:d}=this;d[l]!==r&&(d[l]=r,i.bindTexture(this.gl.TEXTURE_2D,r))}_getActiveTexture(){const{activeTextureUnit:r,texture2dUnits:i}=this;return i[r]}texParameteri(r,i){const{gl:l,texture2dParams:d}=this,y=this._getActiveTexture();if(!y)throw new Error("No active texture");let x=d.get(y);x||(x={},d.set(y,x)),x[r]!==i&&(x[r]=i,l.texParameteri(l.TEXTURE_2D,r,i))}texImage2D(r,i,l,d,y,x,s,g){const{gl:k}=this;x?k.texImage2D(k.TEXTURE_2D,r,i,l,d,y,x,s,g):k.texImage2D(k.TEXTURE_2D,r,i,l,d,y)}compressedTexImage2D(r,i,l,d,y,x){const{gl:s}=this;s.compressedTexImage2D(s.TEXTURE_2D,r,i,l,d,y,x)}pixelStorei(r,i){const{gl:l}=this;l.pixelStorei(r,i)}generateMipmap(){const{gl:r}=this;r.generateMipmap(r.TEXTURE_2D)}createTexture(){const{gl:r}=this;return r.createTexture()}deleteTexture(r){const{gl:i}=this;r&&this.texture2dParams.delete(r),i.deleteTexture(r)}viewport(r,i,l,d){const{gl:y}=this;y.viewport(r,i,l,d)}clearColor(r,i,l,d){const{gl:y}=this;y.clearColor(r,i,l,d)}setScissorTest(r){const{gl:i,scissorEnabled:l}=this;r!==l&&(r?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),this.scissorEnabled=r)}scissor(r,i,l,d){const{gl:y,scissorX:x,scissorY:s,scissorWidth:g,scissorHeight:k}=this;(r!==x||i!==s||l!==g||d!==k)&&(y.scissor(r,i,l,d),this.scissorX=r,this.scissorY=i,this.scissorWidth=l,this.scissorHeight=d)}setBlend(r){const{gl:i,blendEnabled:l}=this;r!==l&&(r?i.enable(i.BLEND):i.disable(i.BLEND),this.blendEnabled=r)}blendFunc(r,i){const{gl:l,blendSrcRgb:d,blendDstRgb:y,blendSrcAlpha:x,blendDstAlpha:s}=this;(r!==d||i!==y||r!==x||i!==s)&&(l.blendFunc(r,i),this.blendSrcRgb=r,this.blendDstRgb=i,this.blendSrcAlpha=r,this.blendDstAlpha=i)}createBuffer(){const{gl:r}=this;return r.createBuffer()}createFramebuffer(){const{gl:r}=this;return r.createFramebuffer()}bindFramebuffer(r){const{gl:i}=this;i.bindFramebuffer(i.FRAMEBUFFER,r)}framebufferTexture2D(r,i,l){const{gl:d}=this;d.framebufferTexture2D(d.FRAMEBUFFER,r,d.TEXTURE_2D,i,l)}clear(){const{gl:r}=this;r.clear(r.COLOR_BUFFER_BIT)}arrayBufferData(r,i,l){const{gl:d,boundArrayBuffer:y}=this;y!==r&&(d.bindBuffer(d.ARRAY_BUFFER,r),this.boundArrayBuffer=r),d.bufferData(d.ARRAY_BUFFER,i,l)}elementArrayBufferData(r,i,l){const{gl:d,boundElementArrayBuffer:y}=this;y!==r&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),this.boundElementArrayBuffer=r),d.bufferData(d.ELEMENT_ARRAY_BUFFER,i,l)}vertexAttribPointer(r,i,l,d,y,x,s){const{gl:g,boundArrayBuffer:k}=this;k!==r&&(g.bindBuffer(g.ARRAY_BUFFER,r),this.boundArrayBuffer=r),g.vertexAttribPointer(i,l,d,y,x,s)}useProgram(r){const{gl:i,curProgram:l}=this;l!==r&&(i.useProgram(r),this.curProgram=r)}setUniform(r,i,...l){const{gl:d,programUniforms:y}=this;let x=y.get(this.curProgram);x||(x=new Map,y.set(this.curProgram,x));const s=x.get(i);(!s||!PI(s,l))&&(x.set(i,l),d[r](i,...l))}getParameter(r){const{gl:i}=this;return i.getParameter(r)}drawElements(r,i,l,d){const{gl:y}=this;y.drawElements(r,i,l,d)}getExtension(r){const{gl:i}=this;return i.getExtension(r)}createVertexArray(){const{gl:r}=this;return Ke(r instanceof WebGL2RenderingContext),r.createVertexArray()}bindVertexArray(r){const{gl:i}=this;Ke(i instanceof WebGL2RenderingContext),i.bindVertexArray(r)}getAttribLocation(r,i){const{gl:l}=this;return l.getAttribLocation(r,i)}getUniformLocation(r,i){const{gl:l}=this;return l.getUniformLocation(r,i)}enableVertexAttribArray(r){const{gl:i}=this;i.enableVertexAttribArray(r)}disableVertexAttribArray(r){const{gl:i}=this;i.disableVertexAttribArray(r)}createShader(r){const{gl:i}=this;return i.createShader(r)}compileShader(r){const{gl:i}=this;i.compileShader(r)}attachShader(r,i){const{gl:l}=this;l.attachShader(r,i)}linkProgram(r){const{gl:i}=this;i.linkProgram(r)}deleteProgram(r){const{gl:i}=this;i.deleteProgram(r)}getShaderParameter(r,i){const{gl:l}=this;return l.getShaderParameter(r,i)}getShaderInfoLog(r){const{gl:i}=this;return i.getShaderInfoLog(r)}createProgram(){const{gl:r}=this;return r.createProgram()}getProgramParameter(r,i){const{gl:l}=this;return l.getProgramParameter(r,i)}getProgramInfoLog(r){const{gl:i}=this;return i.getProgramInfoLog(r)}shaderSource(r,i){const{gl:l}=this;l.shaderSource(r,i)}deleteShader(r){const{gl:i}=this;i.deleteShader(r)}}function PI(h,r){return h.length!==r.length?!1:h.every((i,l)=>Array.isArray(i)||i instanceof Float32Array?!1:i===r[l])}const Of=class Of extends gs{constructor(i,l){super(i);R(this,"props");this.props=Of.resolveDefaults(l||{})}get width(){return this.props.width}set width(i){this.props.width=i}get height(){return this.props.height}set height(i){this.props.height=i}async getTextureData(){return{data:null,premultiplyAlpha:null}}static resolveDefaults(i){return{width:i.width||256,height:i.height||256}}};R(Of,"z$__type__Props");let ja=Of;class Mx extends If{constructor(i,l,d){super(i,l,d);R(this,"framebuffer");const y=i.createFramebuffer();Ke(y,"Unable to create framebuffer"),this.framebuffer=y}async onLoadRequest(){const{glw:i}=this,l=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:d,height:y}=this.textureSource;return i.texImage2D(0,i.RGBA,d,y,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(d*y*4),i.bindFramebuffer(this.framebuffer),i.framebufferTexture2D(i.COLOR_ATTACHMENT0,l,0),i.bindFramebuffer(null),{width:d,height:y}}}function DI(h){return/\.(ktx|pvr)$/.test(h)}const NI=async h=>{const i=await(await fetch(h)).arrayBuffer();return h.indexOf(".ktx")!==-1?OI(i):UI(i)},OI=async h=>{const r=new DataView(h),i=r.getUint32(12)===16909060,l=[],d={glInternalFormat:r.getUint32(28,i),pixelWidth:r.getUint32(36,i),pixelHeight:r.getUint32(40,i),numberOfMipmapLevels:r.getUint32(56,i),bytesOfKeyValueData:r.getUint32(60,i)};let y=64;y+=d.bytesOfKeyValueData;for(let x=0;x<d.numberOfMipmapLevels;x++){const s=r.getUint32(y);y+=4,l.push(r.buffer.slice(y,s)),y+=s}return{data:{glInternalFormat:d.glInternalFormat,mipmaps:l,width:d.pixelWidth||0,height:d.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},UI=async h=>{const s=h,g=new Int32Array(s,0,13),k=g[12]+52,A=new Uint8Array(s,k),I=[],M={pixelWidth:g[7],pixelHeight:g[6],numberOfMipmapLevels:g[11]||0};let O=0,w=M.pixelWidth||0,L=M.pixelHeight||0;for(let F=0;F<M.numberOfMipmapLevels;F++){const U=(w+3>>2)*(L+3>>2)*8,W=new Uint8Array(s,A.byteOffset+O,U);I.push(W),O+=U,w=w>>1,L=L>>1}return{data:{glInternalFormat:36196,mipmaps:I,width:M.pixelWidth||0,height:M.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},Ua=class Ua extends gs{constructor(i,l){super(i);R(this,"props");this.props=Ua.resolveDefaults(l)}hasAlphaChannel(i){return i.indexOf("image/png")!==-1}async getTextureData(){const{src:i,premultiplyAlpha:l}=this.props;if(!i)return{data:null};if(typeof i!="string")return i instanceof ImageData?{data:i,premultiplyAlpha:l}:{data:i(),premultiplyAlpha:l};if(DI(i))return NI(i);const d=aI(i);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(d,l);if(this.txManager.hasCreateImageBitmap){const x=await(await fetch(d)).blob(),s=l??this.hasAlphaChannel(x.type);return{data:await createImageBitmap(x,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}else{const y=new Image;return i.substr(0,5)!=="data:"&&(y.crossOrigin="Anonymous"),y.src=d,await new Promise((x,s)=>{y.onload=()=>x(),y.onerror=()=>s(new Error("Failed to load image"))}).catch(x=>{console.error(x)}),{data:y,premultiplyAlpha:l??!0}}}static makeCacheKey(i){const l=Ua.resolveDefaults(i),d=l.key||l.src;return typeof d!="string"?!1:`ImageTexture,${d},${l.premultiplyAlpha??"true"}`}static resolveDefaults(i){return{src:i.src??"",premultiplyAlpha:i.premultiplyAlpha??!0,key:i.key??null}}};R(Ua,"z$__type__Props");let Mf=Ua;const BI=24;class yp extends f2{constructor(i){super(i);R(this,"glw");R(this,"system");R(this,"quadBuffer");R(this,"fQuadBuffer");R(this,"uiQuadBuffer");R(this,"renderOps",[]);R(this,"curBufferIdx",0);R(this,"curRenderOp",null);R(this,"rttNodes",[]);R(this,"activeRttNode",null);R(this,"defShaderCtrl");R(this,"defaultShader");R(this,"quadBufferCollection");R(this,"defaultTexture");R(this,"quadBufferUsage",0);R(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:l,clearColor:d,bufferMemory:y}=i;this.defaultTexture=new kf(this.txManager),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.stage.requestRender()});const x=qb(l,i.contextSpy),s=this.glw=new LI(x),g=za(d);s.viewport(0,0,l.width,l.height),s.clearColor(g[0],g[1],g[2],g[3]),s.setBlend(!0),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),SI(s,y),this.system={parameters:xI(this.glw),extensions:wI(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const k=s.createBuffer();Ke(k);const A=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new v2([{buffer:k,attributes:{a_position:{name:"a_position",size:2,type:s.FLOAT,normalized:!1,stride:A,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:s.FLOAT,normalized:!1,stride:A,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:s.UNSIGNED_BYTE,normalized:!0,stride:A,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:s.FLOAT,normalized:!1,stride:A,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:i}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,i.setScissorTest(!1),i.clear()}getShaderManager(){return this.shManager}createCtxTexture(i){return i instanceof ms?new CI(this.glw,this.txMemManager,i):i instanceof ja?new Mx(this.glw,this.txMemManager,i):new If(this.glw,this.txMemManager,i)}addQuad(i){const{fQuadBuffer:l,uiQuadBuffer:d}=this,{width:y,height:x,colorTl:s,colorTr:g,colorBl:k,colorBr:A,textureOptions:I,shader:M,shaderProps:O,alpha:w,clippingRect:L,tx:F,ty:U,ta:W,tb:X,tc:Q,td:ee,renderCoords:Z,rtt:H,parentHasRenderTexture:J,framebufferDimensions:le}=i;let{texture:E}=i;if(O&&Zd(O,"$dimensions")){const z=O.$dimensions;z.width=y,z.height=x}E=E??this.defaultTexture,Ke(E instanceof gs,"Invalid texture type");let{curBufferIdx:j,curRenderOp:re}=this;const ye={width:y,height:x},ie=M||this.defaultShader;Ke(ie instanceof bo),this.reuseRenderOp(i)||(this.newRenderOp(ie,O,w,ye,L,j,H,J,le),re=this.curRenderOp,Ke(re));const se=(I==null?void 0:I.flipX)??!1;let ne=(I==null?void 0:I.flipY)??!1;E instanceof ja&&(ne=!ne);let ue=0,ve=0,xe=1,Se=1;if(E instanceof ms){const{x:z,y:Re,width:Ce,height:oe}=E.props,{width:P=0,height:ge=0}=E.parentTexture.dimensions||{width:0,height:0};ue=z/P,xe=ue+Ce/P,ve=Re/ge,Se=ve+oe/ge,E=E.parentTexture}const be=(I==null?void 0:I.resizeMode)??!1;if(E instanceof Mf&&be&&E.dimensions){const{width:z,height:Re}=E.dimensions;if(be.type==="cover"){const Ce=y/z,oe=x/Re,P=Math.max(Ce,oe),ge=1/P;if(P&&Ce&&Ce<P){const Te=ge*y;ue=(1-Te/z)*(be.clipX??.5),xe=ue+Te/z}if(P&&oe&&oe<P){const Te=ge*x;ve=(1-Te/Re)*(be.clipY??.5),Se=ve+Te/Re}}}se&&([ue,xe]=[xe,ue]),ne&&([ve,Se]=[Se,ve]);const Ee=E.ctxTexture;Ke(Ee instanceof If);const _e=this.addTexture(Ee,j);if(re=this.curRenderOp,Ke(re),Z){const{x1:z,y1:Re,x2:Ce,y2:oe,x3:P,y3:ge,x4:Te,y4:Fe}=Z;l[j++]=z,l[j++]=Re,l[j++]=ue,l[j++]=ve,d[j++]=s,l[j++]=_e,l[j++]=Ce,l[j++]=oe,l[j++]=xe,l[j++]=ve,d[j++]=g,l[j++]=_e,l[j++]=Te,l[j++]=Fe,l[j++]=ue,l[j++]=Se,d[j++]=k,l[j++]=_e,l[j++]=P,l[j++]=ge,l[j++]=xe,l[j++]=Se,d[j++]=A,l[j++]=_e}else if(X!==0||Q!==0)l[j++]=F,l[j++]=U,l[j++]=ue,l[j++]=ve,d[j++]=s,l[j++]=_e,l[j++]=F+y*W,l[j++]=U+y*Q,l[j++]=xe,l[j++]=ve,d[j++]=g,l[j++]=_e,l[j++]=F+x*X,l[j++]=U+x*ee,l[j++]=ue,l[j++]=Se,d[j++]=k,l[j++]=_e,l[j++]=F+y*W+x*X,l[j++]=U+y*Q+x*ee,l[j++]=xe,l[j++]=Se,d[j++]=A,l[j++]=_e;else{const z=F+y*W,Re=U+x*ee;l[j++]=F,l[j++]=U,l[j++]=ue,l[j++]=ve,d[j++]=s,l[j++]=_e,l[j++]=z,l[j++]=U,l[j++]=xe,l[j++]=ve,d[j++]=g,l[j++]=_e,l[j++]=F,l[j++]=Re,l[j++]=ue,l[j++]=Se,d[j++]=k,l[j++]=_e,l[j++]=z,l[j++]=Re,l[j++]=xe,l[j++]=Se,d[j++]=A,l[j++]=_e}re.length+=BI,re.numQuads++,this.curBufferIdx=j}newRenderOp(i,l,d,y,x,s,g,k,A){const I=new h2(this.glw,this.options,this.quadBufferCollection,i,l,d,x,y,s,0,g,k,A);this.curRenderOp=I,this.renderOps.push(I)}addTexture(i,l,d){const{curRenderOp:y}=this;Ke(y);const x=y.addTexture(i);if(x===4294967295){if(d)throw new Error("Unable to add texture to render op");const{shader:s,shaderProps:g,dimensions:k,clippingRect:A,alpha:I}=y;return this.newRenderOp(s,g,I,k,A,l),this.addTexture(i,l,!0)}return x}reuseRenderOp(i){var k;const{shader:l,shaderProps:d,parentHasRenderTexture:y,rtt:x,clippingRect:s}=i,g=l||this.defaultShader;return!(((k=this.curRenderOp)==null?void 0:k.shader)!==g||!rI(this.curRenderOp.clippingRect,s)||y||x||this.curRenderOp.shader!==this.defaultShader&&(!d||!this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,d)))}addRenderOp(i){this.renderOps.push(i),this.curRenderOp=null}render(i="screen"){const{glw:l,quadBuffer:d}=this,y=new Float32Array(d,0,this.curBufferIdx),x=this.quadBufferCollection.getBuffer("a_position")??null;l.arrayBufferData(x,y,l.STATIC_DRAW),this.renderOps.forEach((s,g)=>{s.draw()}),this.quadBufferUsage=this.curBufferIdx*y.BYTES_PER_ELEMENT}renderToTexture(i){for(let l=0;l<this.rttNodes.length;l++)if(this.rttNodes[l]===i)return;this.rttNodes.unshift(i)}renderRTTNodes(){const{glw:i}=this;this.stage;for(let l=0;l<this.rttNodes.length;l++){const d=this.rttNodes[l];if(!d||!d.hasRTTupdates)continue;this.activeRttNode=d,Ke(d.texture,"RTT node missing texture");const y=d.texture.ctxTexture;Ke(y instanceof Mx),this.renderToTextureActive=!0,i.bindFramebuffer(y.framebuffer),i.viewport(0,0,y.w,y.h),i.clear();for(let x=0;x<d.children.length;x++){const s=d.children[x];s&&(s.update(this.stage.deltaTime,{x:0,y:0,width:0,height:0,valid:!1}),this.stage.addQuads(s),s.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,d.hasRTTupdates=!1}i.bindFramebuffer(null),i.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(i){const l=this.rttNodes.indexOf(i);l!==-1&&this.rttNodes.splice(l,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}}class jI{constructor(){R(this,"activeAnimations",new Set)}registerAnimation(r){this.activeAnimations.add(r)}unregisterAnimation(r){this.activeAnimations.delete(r)}update(r){this.activeAnimations.forEach(i=>{i.update(r)})}}function FI(){function h(i){return i.indexOf("image/png")!==-1}function r(i,l){return new Promise(function(d,y){var x=new XMLHttpRequest;x.open("GET",i,!0),x.responseType="blob",x.onload=function(){if(x.status!==200)return y(new Error("Failed to load image: "+x.statusText));var s=x.response,g=l!==void 0?l:h(s.type);createImageBitmap(s,{premultiplyAlpha:g?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(k){d({data:k,premultiplyAlpha:l})}).catch(function(k){y(k)})},x.onerror=function(){y(new Error("Network error occurred while trying to fetch the image."))},x.send()})}self.onmessage=i=>{var l=i.data.src,d=i.data.id,y=i.data.premultiplyAlpha;r(l,y).then(function(x){self.postMessage({id:d,src:l,data:x})}).catch(function(x){self.postMessage({id:d,src:l,error:x.message})})}}class zI{constructor(r){R(this,"imageWorkersEnabled",!0);R(this,"messageManager",{});R(this,"workers",[]);R(this,"workerIndex",0);R(this,"nextId",0);this.workers=this.createWorkers(r),this.workers.forEach(i=>{i.onmessage=this.handleMessage.bind(this)})}handleMessage(r){const{id:i,data:l,error:d}=r.data,y=this.messageManager[i];if(y){const[x,s]=y;delete this.messageManager[i],d?s(new Error(d)):x(l)}}createWorkers(r=1){const i=`(${FI.toString()})()`,l=new Blob([i.replace('"use strict";',"")],{type:"application/javascript"}),d=(self.URL?URL:webkitURL).createObjectURL(l),y=[];for(let x=0;x<r;x++)y.push(new Worker(d));return y}getNextWorker(){const r=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,r}getImage(r,i){return new Promise((l,d)=>{try{if(this.workers){const y=this.nextId++;this.messageManager[y]=[l,d];const x=this.getNextWorker();x&&x.postMessage({id:y,src:r,premultiplyAlpha:i})}}catch(y){d(y)}})}}const Ba=class Ba extends gs{constructor(i,l){super(i);R(this,"props");this.props=Ba.resolveDefaults(l)}async getTextureData(){const{width:i,height:l}=this.props,d=i*l*4,y=new Uint8ClampedArray(d);for(let x=0;x<d;x+=4){const s=Math.floor(Math.random()*256);y[x]=s,y[x+1]=s,y[x+2]=s,y[x+3]=255}return{data:new ImageData(y,i,l)}}static makeCacheKey(i){if(i.cacheId===void 0)return!1;const l=Ba.resolveDefaults(i);return`NoiseTexture,${l.width},${l.height},${l.cacheId}`}static resolveDefaults(i){return{width:i.width??128,height:i.height??128,cacheId:i.cacheId??0}}};R(Ba,"z$__type__Props");let rp=Ba;class VI{constructor(r){R(this,"keyCache",new Map);R(this,"inverseKeyCache",new WeakMap);R(this,"txConstructors",{});R(this,"imageWorkerManager",null);R(this,"hasCreateImageBitmap",!!self.createImageBitmap);R(this,"hasWorker",!!self.Worker);R(this,"renderer");R(this,"frameTime",0);this.hasCreateImageBitmap&&this.hasWorker&&r>0&&(this.imageWorkerManager=new zI(r)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",Mf),this.registerTextureType("ColorTexture",kf),this.registerTextureType("NoiseTexture",rp),this.registerTextureType("SubTexture",ms),this.registerTextureType("RenderTexture",ja)}registerTextureType(r,i){this.txConstructors[r]=i}loadTexture(r,i){let l;const d=this.txConstructors[r];if(!d)throw new Error(`Texture type "${r}" is not registered`);if(!l){const y=d.makeCacheKey(i);y&&this.keyCache.has(y)?l=this.keyCache.get(y):(l=new d(this,i),y&&this.initTextureToCache(l,y))}return l}initTextureToCache(r,i){const{keyCache:l,inverseKeyCache:d}=this;l.set(i,r),d.set(r,i)}removeTextureFromCache(r){const{inverseKeyCache:i,keyCache:l}=this,d=i.get(r);d&&l.delete(d)}}function HI(h,r){var i=0,l,d;r=r||{};function y(){var x=l,s=arguments.length,g,k;e:for(;x;){if(x.args.length!==arguments.length){x=x.next;continue}for(k=0;k<s;k++)if(x.args[k]!==arguments[k]){x=x.next;continue e}return x!==l&&(x===d&&(d=x.prev),x.prev.next=x.next,x.next&&(x.next.prev=x.prev),x.next=l,x.prev=null,l.prev=x,l=x),x.val}for(g=new Array(s),k=0;k<s;k++)g[k]=arguments[k];return x={args:g,val:h.apply(null,g)},l?(l.prev=x,x.next=l):d=x,i===r.maxSize?(d=d.prev,d.next=null):i++,l=x,x.val}return y.clear=function(){l=null,d=null,i=0},y}const $I={normal:400,bold:700,bolder:900,lighter:100},_x=h=>typeof h=="number"?h:$I[h]||400;function GI(h,r,i,l,d){let y=_x(i);for(const x of h){const s=x[r];if(!s)continue;if(s.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${r}' - will be used for all weights and styles`),s.values().next().value;const g=new Map;for(const A of s){const I=_x(A.descriptors.weight);if(I===y&&A.descriptors.style===l&&A.descriptors.stretch===d)return A;g.set(I,A)}const k=`TrFontManager: No exact match: '${r} Weight: ${y} Style: ${l} Stretch: ${d}'`;if(console.error(k),y===400&&g.has(500))return g.get(500);if(y===500&&g.has(400))return g.get(400);if(y<400){for(;y>0;){if(g.has(y))return g.get(y);y-=100}y=600}for(;y<1e3;){if(g.has(y))return g.get(y);y+=100}for(y=500;y>0;){if(g.has(y))return g.get(y);y-=100}}}const WI=HI(GI);class vp{constructor(r){R(this,"textRenderers");this.textRenderers=r}addFontFace(r){for(const i in this.textRenderers){const l=this.textRenderers[i];l&&l.isFontFaceSupported(r)&&l.addFontFace(r)}}static resolveFontFace(r,i){const{fontFamily:l,fontWeight:d,fontStyle:y,fontStretch:x}=i;return WI(r,l,d,y,x)}}const XI={x:(h,r)=>{h.props.x=r},y:(h,r)=>{h.props.y=r},width:(h,r)=>{h.props.width=r},height:(h,r)=>{h.props.height=r},color:(h,r)=>{h.props.color=r},zIndex:(h,r)=>{h.props.zIndex=r},fontFamily:(h,r)=>{h.props.fontFamily=r},fontWeight:(h,r)=>{h.props.fontWeight=r},fontStyle:(h,r)=>{h.props.fontStyle=r},fontStretch:(h,r)=>{h.props.fontStretch=r},fontSize:(h,r)=>{h.props.fontSize=r},text:(h,r)=>{h.props.text=r},textAlign:(h,r)=>{h.props.textAlign=r},contain:(h,r)=>{h.props.contain=r},offsetY:(h,r)=>{h.props.offsetY=r},scrollable:(h,r)=>{h.props.scrollable=r},scrollY:(h,r)=>{h.props.scrollY=r},letterSpacing:(h,r)=>{h.props.letterSpacing=r},lineHeight:(h,r)=>{h.props.lineHeight=r},maxLines:(h,r)=>{h.props.maxLines=r},textBaseline:(h,r)=>{h.props.textBaseline=r},verticalAlign:(h,r)=>{h.props.verticalAlign=r},overflowSuffix:(h,r)=>{h.props.overflowSuffix=r},debug:(h,r)=>{h.props.debug=r}};class x2{constructor(r){R(this,"stage");R(this,"set");this.stage=r;const i={...XI,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(i).map(([l,d])=>[l,(y,x)=>{y.props[l]!==x&&(d(y,x),this.stage.requestRender())}])))}setStatus(r,i,l){r.status!==i&&(r.status=i,r.emitter.emit(i,l))}setIsRenderable(r,i){r.isRenderable=i}destroyState(r){this.setStatus(r,"destroyed"),r.emitter.removeAllListeners()}scheduleUpdateState(r){r.updateScheduled||(r.updateScheduled=!0,queueMicrotask(()=>{r.status!=="destroyed"&&(r.updateScheduled=!1,this.updateState(r))}))}}class w2 extends Ao{constructor(i){super();R(this,"fontFamily");R(this,"descriptors");R(this,"loaded",!1);R(this,"metrics",null);const{fontFamily:l,descriptors:d,metrics:y}=i;y&&(this.metrics={ascender:y.ascender/y.unitsPerEm,descender:y.descender/y.unitsPerEm,lineGap:y.lineGap/y.unitsPerEm}),this.fontFamily=l,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...d}}static convertToCssFontFaceDescriptors(i){return{style:i.style,weight:typeof i.weight=="number"?`${i.weight}`:i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,featureSettings:i.featureSettings,display:i.display}}}const KI={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class YI{}class qI extends YI{constructor(i,l){super();R(this,"data");R(this,"glyphMap");R(this,"kernings");this.data=i,this.glyphMap=l;const d=this.kernings={};i.kernings.forEach(y=>{const x=y.second,s=d[x]=d[x]||{};s[y.first]=y.amount}),this.kernings=d}*shapeText(i,l){var x;let d,y;for(;(d=l.peek())&&!d.done;){const s=d.value,g=this.glyphMap.get(s);if(l.next(),g!==void 0){const k=y!==void 0?(((x=this.kernings[g.id])==null?void 0:x[y])||0)+i.letterSpacing:0;y=g.id,yield{mapped:!0,glyphId:g.id,codepoint:s,cluster:l.lastIndex,xAdvance:g.xadvance+k,yAdvance:0,xOffset:g.xoffset+k,yOffset:g.yoffset,xBearing:0,yBearing:0,width:g.width,height:g.height}}else s===KI.LINE_FEED&&(y=void 0),yield{mapped:!1,codepoint:s,cluster:l.lastIndex}}}}class sp extends w2{constructor(i,l){super(l);R(this,"type");R(this,"texture");R(this,"maxCharHeight",0);R(this,"data");R(this,"shaper");R(this,"glyphMap",new Map);const{atlasUrl:d,atlasDataUrl:y,stage:x}=l;this.type=i;const s=x.renderer;Ke(s instanceof yp,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=x.txManager.loadTexture("ImageTexture",{src:d,premultiplyAlpha:!1}),this.texture.on("loaded",()=>{this.checkLoaded(),x.requestRender()}),this.texture.ctxTexture.load(),fetch(y).then(async g=>{var A;this.data=await g.json(),Ke(this.data);let k=0;if(this.data.chars.forEach(I=>{this.glyphMap.set(I.id,I);const M=I.yoffset+I.height;M>k&&(k=M)}),this.maxCharHeight=k,this.shaper=new qI(this.data,this.glyphMap),!this.metrics)if((A=this.data)!=null&&A.lightningMetrics){const{ascender:I,descender:M,lineGap:O,unitsPerEm:w}=this.data.lightningMetrics;this.metrics={ascender:I/w,descender:M/w,lineGap:O/w}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(i){const l=this.glyphMap.get(i);if(l===void 0)throw new Error(`Glyph ${i} not found in font ${this.fontFamily}`);return{x:l.x,y:l.y,width:l.width,height:l.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const QI=24;function ZI(h,r,i,l,d,y,x,s,g){const k=Math.min(Math.max(x.firstLineIdx,0),s.length),A=0,{metrics:I}=i;Ke(I,"Font metrics not loaded"),Ke(i.data,"Font data not loaded");const M=(I.ascender-I.descender)*h;let O=0;l==="middle"?O=(r-M)/2:l==="bottom"&&(O=r-M);const w=d/y,L=i.data.common.base,U=I.ascender*h-L,W=w+U+k*r+O;if(!(g&&W>=g/y))return{sdfX:A,sdfY:W,lineIndex:k}}class La{constructor(r,i=0){R(this,"iterator");R(this,"peekBuffer",[]);R(this,"_lastIndex");this.iterator=r,this.iterator=r,this._lastIndex=i-1,this.peekBuffer=[]}next(){const r=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return r.done?this._lastIndex=-1:this._lastIndex++,r}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const r=this.iterator.next();return this.peekBuffer.push(r),r}get lastIndex(){return this._lastIndex}}function*Pa(h,r=0){let i=r;for(;i<h.length;){const l=h.codePointAt(i);if(l===void 0)throw new Error("Invalid Unicode code point");yield l,i+=l<=65535?1:2}}function JI(h,r,i){const l=i.shapeText(r,new La(Pa(h,0),0));let d=0;for(const y of l)y.mapped&&(d+=y.xAdvance);return d}function e3(h,r,i,l,d,y,x,s,g,k,A,I,M,O,w,L,F,U,W){Ke(w,"Font face must be loaded"),Ke(w.loaded,"Font face must be loaded"),Ke(w.data,"Font face must be loaded"),Ke(w.shaper,"Font face must be loaded");const X=s/w.data.info.size,Q=g/X,ee=y/X,Z=k/X,H=M[h],J=(H==null?void 0:H.codepointIndex)||0,le=(H==null?void 0:H.maxX)||0,E=(H==null?void 0:H.maxY)||0;let j=le,re=E,ye=r,ie=i,se=0;const ne={codepointIndex:-1,bufferOffset:-1,xStart:-1},ue=w.shaper,ve={letterSpacing:Z};let xe=ue.shapeText(ve,new La(Pa(l,J),J)),Se,be=-1;const Ee=[],_e=x/X,z=JI(U,ve,ue);let Re=!0;for(;Re;){const Ce=(W===0||h+1<W)&&(I!=="both"||F||ie+Q+w.maxCharHeight<=_e),oe=Ce?ee:ee-z;let P=0;const ge=ie+w.maxCharHeight>=O.y1,Te=ie<=O.y2,Fe=ge&&Te;for(;(Se=xe.next())&&!Se.done;){const ae=Se.value;if(h===M.length)M.push({codepointIndex:ae.cluster,maxY:re,maxX:j});else if(h>M.length)throw new Error("Unexpected lineCache length");if(ae.codepoint===32||ae.codepoint===10?ne.codepointIndex!==-1&&(ne.codepointIndex=-1,P=ye):ne.codepointIndex===-1&&(ne.codepointIndex=ae.cluster,ne.bufferOffset=se,ne.xStart=P),ae.mapped){const Ue=ye+ae.xOffset+ae.width;if(I!=="none"&&Ue>=oe&&ne.codepointIndex!==-1&&ne.xStart>0)if(Ce){xe=ue.shapeText(ve,new La(Pa(l,ne.codepointIndex),ne.codepointIndex)),se=ne.bufferOffset;break}else xe=ue.shapeText(ve,new La(Pa(U,0),0)),ye=ne.xStart,se=ne.bufferOffset,I="none";else{const Y=ye+ae.xOffset,$=ie+ae.yOffset;if(Fe){be===-1&&(be=se);const Ae=w.getAtlasEntry(ae.glyphId),De=Ae.x/w.data.common.scaleW,Le=Ae.y/w.data.common.scaleH,it=Ae.width/w.data.common.scaleW,zn=Ae.height/w.data.common.scaleH;A[se++]=Y,A[se++]=$,A[se++]=De,A[se++]=Le,A[se++]=Y+ae.width,A[se++]=$,A[se++]=De+it,A[se++]=Le,A[se++]=Y,A[se++]=$+ae.height,A[se++]=De,A[se++]=Le+zn,A[se++]=Y+ae.width,A[se++]=$+ae.height,A[se++]=De+it,A[se++]=Le+zn}re=Math.max(re,$+ae.height),j=Math.max(j,Y+ae.width),ye+=ae.xAdvance}}else if(ae.codepoint===10){if(Ce)break;xe=ue.shapeText(ve,new La(Pa(U,0),0)),I="none"}}be!==-1&&(Ee.push({bufferStart:be,bufferEnd:se}),be=-1),ye=0,ie+=Q,h++,ne.codepointIndex=-1,P=0,!L&&I==="both"&&ie>O.y2||Se&&Se.done?Re=!1:Ce||(Re=!1)}if(d==="center"){const Ce=I==="none"?j:ee;for(let oe=0;oe<Ee.length;oe++){const P=Ee[oe],ge=A[P.bufferEnd-4]-A[P.bufferStart],Te=(Ce-ge)/2;for(let Fe=P.bufferStart;Fe<P.bufferEnd;Fe+=4)A[Fe]+=Te}}else if(d==="right"){const Ce=I==="none"?j:ee;for(let oe=0;oe<Ee.length;oe++){const P=Ee[oe],ge=P.bufferEnd===P.bufferStart?0:A[P.bufferEnd-4]-A[P.bufferStart],Te=Ce-ge;for(let Fe=P.bufferStart;Fe<P.bufferEnd;Fe+=4)A[Fe]+=Te}}return Ke(Se),{bufferNumFloats:se,bufferNumQuads:se/16,layoutNumCharacters:Se.done?l.length-J:Se.value.cluster-J+1,fullyProcessed:!!Se.done,maxX:j,maxY:re,numLines:M.length}}function t3(h,r){return Math.ceil(h/r)*r}function n3(h,r){return Math.floor(h/r)*r}function i3(h,r,i,l,d,y,x,s){const{screen:g,sdf:k}=h;if(!sI(x))g.x1=0,g.y1=0,g.x2=0,g.y2=0,k.x1=0,k.y1=0,k.x2=0,k.y2=0,h.numLines=0,h.firstLineIdx=0;else{const A=x.x1-r,I=A+(x.x2-x.x1),M=x.y1-i+l,O=n3(M-y,d||1),w=t3(M+(x.y2-x.y1)+y,d||1);g.x1=A,g.y1=O,g.x2=I,g.y2=w,k.x1=A/s,k.y1=O/s,k.x2=I/s,k.y2=w/s,h.numLines=Math.ceil((w-O)/d),h.firstLineIdx=d?Math.floor(O/d):0}h.valid=!0}function S2(h,r){return r*(h.ascender-h.descender+h.lineGap)}const o3={x:0,y:0,width:0,height:0};class r3 extends x2{constructor(i){super(i);R(this,"ssdfFontFamilies",{});R(this,"msdfFontFamilies",{});R(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);R(this,"sdfShader");R(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(i,l)=>{i.props.fontFamily=l,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontWeight:(i,l)=>{i.props.fontWeight=l,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStyle:(i,l)=>{i.props.fontStyle=l,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStretch:(i,l)=>{i.props.fontStretch=l,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontSize:(i,l)=>{i.props.fontSize=l,this.invalidateLayoutCache(i)},text:(i,l)=>{i.props.text=l,this.invalidateLayoutCache(i)},textAlign:(i,l)=>{i.props.textAlign=l,this.invalidateLayoutCache(i)},color:(i,l)=>{i.props.color=l},x:(i,l)=>{i.props.x=l,i.elementBounds.valid&&(this.setElementBoundsX(i),!i.renderWindow.valid&&jd(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},y:(i,l)=>{i.props.y=l,i.elementBounds.valid&&(this.setElementBoundsY(i),!i.renderWindow.valid&&jd(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},contain:(i,l)=>{i.props.contain=l,this.invalidateLayoutCache(i)},width:(i,l)=>{i.props.width=l,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,l)=>{i.props.height=l,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,l)=>{i.props.offsetY=l,this.invalidateLayoutCache(i)},scrollable:(i,l)=>{i.props.scrollable=l,this.invalidateLayoutCache(i)},scrollY:(i,l)=>{i.props.scrollY=l,this.scheduleUpdateState(i)},letterSpacing:(i,l)=>{i.props.letterSpacing=l,this.invalidateLayoutCache(i)},lineHeight:(i,l)=>{i.props.lineHeight=l,i.resLineHeight=void 0,this.invalidateLayoutCache(i)},maxLines:(i,l)=>{i.props.maxLines=l,this.invalidateLayoutCache(i)},textBaseline:(i,l)=>{i.props.textBaseline=l,this.invalidateLayoutCache(i)},verticalAlign:(i,l)=>{i.props.verticalAlign=l,this.invalidateLayoutCache(i)},overflowSuffix:(i,l)=>{i.props.overflowSuffix=l,this.invalidateLayoutCache(i)},debug:(i,l)=>{i.props.debug=l}}}canRenderFont(i){const{fontFamily:l}=i;return l in this.ssdfFontFamilies||l in this.msdfFontFamilies||l==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(i){return i instanceof sp}addFontFace(i){Ke(i instanceof sp);const l=i.fontFamily,d=i.type==="ssdf"?this.ssdfFontFamilies:i.type==="msdf"?this.msdfFontFamilies:void 0;if(!d){console.warn(`Invalid font face type: ${i.type}`);return}let y=d[l];y||(y=new Set,d[l]=y),y.add(i)}createState(i){return{props:i,status:"initialState",updateScheduled:!1,emitter:new Ao,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(i){let{trFontFace:l}=i;const{textH:d,lineCache:y,debugData:x,forceFullLayoutCalc:s}=i;if(x.updateCount++,i.status==="initialState"&&this.setStatus(i,"loading"),!l){if(l=this.resolveFontFace(i.props),i.trFontFace=l,!l){const ue=`SdfTextRenderer: Could not resolve font face for family: '${i.props.fontFamily}'`;console.error(ue),this.setStatus(i,"failed",new Error(ue));return}l.texture.setRenderableOwner(i,!0)}if(!l.loaded){l.once("loaded",()=>{this.scheduleUpdateState(i)});return}Ke(l.data,"Font face data should be loaded"),Ke(l.metrics,"Font face metrics should be loaded");const{text:g,fontSize:k,x:A,y:I,contain:M,width:O,height:w,verticalAlign:L,scrollable:F,overflowSuffix:U,maxLines:W}=i.props,X=M==="both"&&F?i.props.scrollY:0,{renderWindow:Q}=i,ee=l.data.info.size,Z=k/ee;let H=i.resLineHeight;if(H===void 0){const ue=i.props.lineHeight;ue===void 0?H=S2(l.metrics,k):H=ue,i.resLineHeight=H}const J=H/Z;i.distanceRange=Z*l.data.distanceField.distanceRange;const le=g.length*QI;let E=i.vertexBuffer;(!E||E.length<le)&&(E=new Float32Array(le*2));const j=i.elementBounds;if(j.valid||(this.setElementBoundsX(i),this.setElementBoundsY(i),j.valid=!0),!s&&Q.valid){const ue=Q.screen;if(A+ue.x1<=j.x1&&A+ue.x2>=j.x2&&I-X+ue.y1<=j.y1&&I-X+ue.y2>=j.y2){this.setStatus(i,"loaded");return}Q.valid=!1,this.setStatus(i,"loading")}const{offsetY:re,textAlign:ye}=i.props;if(!Q.valid){if(!jd(j,this.rendererBounds))return;i3(Q,A,I,X,H,M==="both"?j.y2-j.y1:0,j,Z)}const ie=ZI(ee,J,l,L,re,Z,Q,y,d);if(!ie){this.setStatus(i,"loaded");return}const{letterSpacing:se}=i.props,ne=e3(ie.lineIndex,ie.sdfX,ie.sdfY,g,ye,O,w,k,H,se,E,M,y,Q.sdf,l,s,F,U,W);i.bufferUploaded=!1,i.bufferNumFloats=ne.bufferNumFloats,i.bufferNumQuads=ne.bufferNumQuads,i.vertexBuffer=E,i.renderWindow=Q,x.lastLayoutNumCharacters=ne.layoutNumCharacters,x.bufferSize=E.byteLength,ne.fullyProcessed&&(i.textW=ne.maxX*Z,i.textH=ne.numLines*J*Z),this.setStatus(i,"loaded")}renderQuads(i,l,d,y,x,s){var j,re;if(!i.vertexBuffer)return;const g=this.stage.renderer;Ke(g instanceof yp);const{fontSize:k,color:A,contain:I,scrollable:M,zIndex:O,debug:w}=i.props,L=I==="both"&&M?i.props.scrollY:0,{textW:F=0,textH:U=0,distanceRange:W,vertexBuffer:X,bufferUploaded:Q,trFontFace:ee,elementBounds:Z}=i;let{webGlBuffers:H}=i;if(!H){const ye=g.glw,ie=4*Float32Array.BYTES_PER_ELEMENT,se=ye.createBuffer();Ke(se),i.webGlBuffers=new v2([{buffer:se,attributes:{a_position:{name:"a_position",size:2,type:ye.FLOAT,normalized:!1,stride:ie,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:ye.FLOAT,normalized:!1,stride:ie,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),i.bufferUploaded=!1,Ke(i.webGlBuffers),H=i.webGlBuffers}if(!Q){const ye=g.glw,ie=(H==null?void 0:H.getBuffer("a_textureCoordinate"))??null;ye.arrayBufferData(ie,X,ye.STATIC_DRAW),i.bufferUploaded=!0}if(Ke(ee),M&&I==="both"){Ke(Z.valid);const ye=oI(Z,o3);d.valid?(i.clippingRect.valid=!0,d=r2(d,ye,i.clippingRect)):(i.clippingRect.valid=!0,d=s2(ye,i.clippingRect))}const J=new h2(g.glw,g.options,H,this.sdfShader,{transform:l.getFloatArr(),color:Qb(A,y),size:k/(((j=ee.data)==null?void 0:j.info.size)||0),scrollY:L,distanceRange:W,debug:w.sdfShaderDebug},y,d,{height:U,width:F},0,O,!1,x,s),le=(re=i.trFontFace)==null?void 0:re.texture;Ke(le);const E=le.ctxTexture;J.addTexture(E),J.length=i.bufferNumFloats,J.numQuads=i.bufferNumQuads,g.addRenderOp(J)}setIsRenderable(i,l){var d;super.setIsRenderable(i,l),(d=i.trFontFace)==null||d.texture.setRenderableOwner(i,l)}destroyState(i){var l;super.destroyState(i),(l=i.trFontFace)==null||l.texture.setRenderableOwner(i,!1)}resolveFontFace(i){return vp.resolveFontFace(this.fontFamilyArray,i)}releaseFontFace(i){i.resLineHeight=void 0,i.trFontFace&&(i.trFontFace.texture.setRenderableOwner(i,!1),i.trFontFace=void 0)}invalidateLayoutCache(i){i.renderWindow.valid=!1,i.elementBounds.valid=!1,i.textH=void 0,i.textW=void 0,i.lineCache=[],this.setStatus(i,"loading"),this.scheduleUpdateState(i)}setElementBoundsX(i){const{x:l,contain:d,width:y}=i.props,{elementBounds:x}=i;x.x1=l,x.x2=d!=="none"?l+y:1/0}setElementBoundsY(i){const{y:l,contain:d,height:y}=i.props,{elementBounds:x}=i;x.y1=l,x.y2=d==="both"?l+y:1/0}}class Sf extends w2{constructor(i){super(i);R(this,"fontFace");R(this,"fontUrl");const{fontFamily:l,fontUrl:d}=i,y=d.replace(/\(|\)/g,""),x=this.descriptors,s={style:x.style,weight:typeof x.weight=="number"?`${x.weight}`:x.weight,stretch:x.stretch,unicodeRange:x.unicodeRange,featureSettings:x.featureSettings,display:x.display},g=new FontFace(l,`url(${y})`,s);g.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=g,this.fontUrl=d}}function s3(h,r,i){if(r.metrics)return r.metrics;const l=h.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${r.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let d;return l.actualBoundingBoxDescent&&l.actualBoundingBoxAscent?d={ascender:l.actualBoundingBoxAscent/i,descender:-l.actualBoundingBoxDescent/i,lineGap:.2}:d={ascender:.8,descender:-.2,lineGap:.2},r.metrics=d,d}const Rx=2048;function Lx(h,r,i,l,d){const y=h!=="bottom"?.5*r:0;return i*(l-1)+y+Math.max(i,r)+(d||0)}class a3{constructor(r,i){R(this,"_canvas");R(this,"_context");R(this,"_settings");this._canvas=r,this._context=i,this._settings=this.mergeDefaults({})}set settings(r){this._settings=this.mergeDefaults(r)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const r=[this._settings.fontFamily],i=[];for(let l=0,d=r.length;l<d;l++)r[l]==="serif"||r[l]==="sans-serif"?i.push(r[l]):i.push(`"${r[l]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${i.join(",")}`}_load(){if(document.fonts){const r=this._getFontSetting();try{if(!document.fonts.check(r,this._settings.text))return document.fonts.load(r,this._settings.text).catch(i=>{console.warn("[Lightning] Font load error",i,r)}).then(()=>{document.fonts.check(r,this._settings.text)||console.warn("[Lightning] Font not found",r)})}catch{console.warn("[Lightning] Can't check font loading for "+r)}}}calculateRenderInfo(){const r={},i=this.getPrecision(),l=this._settings.paddingLeft*i,d=this._settings.paddingRight*i,y=this._settings.fontSize*i;let x=this._settings.offsetY===null?null:this._settings.offsetY*i;const s=this._settings.w*i,g=this._settings.h*i;let k=this._settings.wordWrapWidth*i;const A=this._settings.cutSx*i,I=this._settings.cutEx*i,M=this._settings.cutSy*i,O=this._settings.cutEy*i,w=(this._settings.letterSpacing||0)*i,L=this._settings.textIndent*i,F=this._settings.trFontFace;this.setFontProperties(),Ke(F);const U=s3(this._context,F,y),W=S2(U,y)*i,X=this._settings.lineHeight!==null?this._settings.lineHeight*i:W,Q=this._settings.maxHeight,ee=Q!==null&&X>0?Math.floor(Q/X):0,Z=this._settings.maxLines,H=ee>0&&Z>0?Math.min(ee,Z):Math.max(ee,Z);let J=s||2048/this.getPrecision(),le=J-l;if(le<10&&(J+=10-le,le=10),k||(k=le),this._settings.textOverflow&&!this._settings.wordWrap){let se;switch(this._settings.textOverflow){case"clip":se="";break;case"ellipsis":se=this._settings.overflowSuffix;break;default:se=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,k-L,se)}let E;if(this._settings.wordWrap)E=this.wrapText(this._settings.text,k,w,L);else{E={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const se=E.l.length;for(let ne=0;ne<se-1;ne++)E.n.push(ne)}let j=E.l;if(H&&j.length>H){const se=j.slice(0,H);let ne=null;if(this._settings.overflowSuffix){const be=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,Ee=this.wrapText(se[se.length-1],k-be,w,L);se[se.length-1]=`${Ee.l[0]}${this._settings.overflowSuffix}`,ne=[Ee.l.length>1?Ee.l[1]:""]}else ne=[""];let ue;const ve=j.length;let xe=0;const Se=E.n.length;for(ue=H;ue<ve;ue++)ne[xe]+=`${ne[xe]?" ":""}${j[ue]}`,ue+1<Se&&E.n[ue+1]&&xe++;r.remainingText=ne.join(`
`),r.moreTextLines=!0,j=se}else r.moreTextLines=!1,r.remainingText="";let re=0;const ye=[];for(let se=0;se<j.length;se++){const ne=this.measureText(j[se],w)+(se===0?L:0);ye.push(ne),re=Math.max(re,ne)}r.lineWidths=ye,s||(J=re+l+d,le=re);let ie;return g?ie=g:ie=Lx(this._settings.textBaseline,y,X,j.length,x),x===null&&(x=y),r.w=J,r.h=ie,r.lines=j,r.precision=i,J||(J=1),ie||(ie=1),(A||I)&&(J=Math.min(J,I-A)),(M||O)&&(ie=Math.min(ie,O-M)),r.width=J,r.innerWidth=le,r.height=ie,r.fontSize=y,r.cutSx=A,r.cutSy=M,r.cutEx=I,r.cutEy=O,r.lineHeight=X,r.defLineHeight=W,r.lineWidths=ye,r.offsetY=x,r.paddingLeft=l,r.paddingRight=d,r.letterSpacing=w,r.textIndent=L,r.metrics=U,r}draw(r,i){const l=this.getPrecision(),d=(i==null?void 0:i.lines)||r.lines,y=(i==null?void 0:i.lineWidths)||r.lineWidths,x=i?Lx(this._settings.textBaseline,r.fontSize,r.lineHeight,i.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*l):r.height;this._canvas.width=Math.min(Math.ceil(r.width+this._settings.textRenderIssueMargin),Rx),this._canvas.height=Math.min(Math.ceil(x),Rx),this.setFontProperties(),r.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(r.cutSx||r.cutSy)&&this._context.translate(-r.cutSx,-r.cutSy);let s,g;const k=[],{metrics:A}=r,I=A?A.ascender*r.fontSize:r.fontSize,M=(A.ascender-A.descender)*r.fontSize;for(let w=0,L=d.length;w<L;w++)s=w===0?r.textIndent:0,g=w*r.lineHeight+I,this._settings.verticalAlign=="middle"?g+=(r.lineHeight-M)/2:this._settings.verticalAlign=="bottom"&&(g+=r.lineHeight-M),this._settings.textAlign==="right"?s+=r.innerWidth-y[w]:this._settings.textAlign==="center"&&(s+=(r.innerWidth-y[w])/2),s+=r.paddingLeft,k.push({text:d[w],x:s,y:g,w:y[w]});if(this._settings.highlight){const w=this._settings.highlightColor,L=this._settings.highlightHeight*l||r.fontSize*1.5,F=this._settings.highlightOffset*l,U=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*l:r.paddingLeft,W=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*l:r.paddingRight;this._context.fillStyle=Bd(w);for(let X=0;X<k.length;X++){const Q=k[X];this._context.fillRect(Q.x-U,Q.y-r.offsetY+F,Q.w+W+U,L)}}let O=null;this._settings.shadow&&(O=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Bd(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*l,this._context.shadowOffsetY=this._settings.shadowOffsetY*l,this._context.shadowBlur=this._settings.shadowBlur*l),this._context.fillStyle=Bd(this._settings.textColor);for(let w=0,L=k.length;w<L;w++){const F=k[w];if(r.letterSpacing===0)this._context.fillText(F.text,F.x,F.y);else{const U=F.text.split("");let W=F.x;for(let X=0,Q=U.length;X<Q;X++)this._context.fillText(U[X],W,F.y),W+=this.measureText(U[X],r.letterSpacing)}}O&&(this._context.shadowColor=O[0],this._context.shadowOffsetX=O[1],this._context.shadowOffsetY=O[2],this._context.shadowBlur=O[3]),(r.cutSx||r.cutSy)&&this._context.translate(r.cutSx,r.cutSy)}wrapWord(r,i,l){const d=this._context.measureText(l).width,y=r.length,x=this._context.measureText(r).width;if(x<=i)return r;let s=Math.floor(i*y/x),g=this._context.measureText(r.substring(0,s)).width+d;if(g>i)for(;s>0&&(g=this._context.measureText(r.substring(0,s)).width+d,g>i);)s-=1;else for(;s<y;)if(g=this._context.measureText(r.substring(0,s)).width+d,g<i)s+=1;else{s-=1;break}return r.substring(0,s)+(i>=d?l:"")}wrapText(r,i,l,d=0){const y=r.split(/\r?\n/g);let x=[];const s=[];for(let g=0;g<y.length;g++){const k=[];let A="",I=i-d;const M=y[g].split(" ");for(let O=0;O<M.length;O++){const w=this.measureText(M[O],l),L=w+this.measureText(" ",l);O===0||L>I?(O>0&&(k.push(A),A=""),A+=M[O],I=i-w-(O===0?d:0)):(I-=L,A+=` ${M[O]}`)}k.push(A),A="",x=x.concat(k),g<y.length-1&&s.push(x.length)}return{l:x,n:s}}measureText(r,i=0){return i?r.split("").reduce((l,d)=>l+this._context.measureText(d).width+i,0):this._context.measureText(r).width}mergeDefaults(r){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...r}}}const Px=typeof self>"u"?globalThis:self;var Zx;const Dx=((Zx=Px.document)==null?void 0:Zx.fonts)||Px.fonts;function u3(h){const{fontFamily:r,fontStyle:i,fontWeight:l,fontStretch:d,fontSize:y}=h;return[i,l,d,`${y}px`,r].join(" ")}class Nx extends x2{constructor(i){super(i);R(this,"canvas");R(this,"context");R(this,"fontFamilies",{});R(this,"fontFamilyArray",[this.fontFamilies]);R(this,"loadFont",i=>{const l=u3(i.props),d=vp.resolveFontFace(this.fontFamilyArray,i.props);if(Ke(d,`Could not resolve font face for ${l}`),i.fontInfo={fontFace:d,cssString:l,loaded:!1},!i.fontInfo.loaded){Dx.load(l).then(this.onFontLoaded.bind(this,i,l)).catch(this.onFontLoadError.bind(this,i,l));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let l=this.canvas.getContext("2d",{willReadFrequently:!0});l||(this.canvas=document.createElement("canvas"),l=this.canvas.getContext("2d",{willReadFrequently:!0})),Ke(l),this.context=l,this.addFontFace(new Sf({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(i,l)=>{i.props.fontFamily=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontWeight:(i,l)=>{i.props.fontWeight=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStyle:(i,l)=>{i.props.fontStyle=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStretch:(i,l)=>{i.props.fontStretch=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontSize:(i,l)=>{i.props.fontSize=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},text:(i,l)=>{i.props.text=l,this.invalidateLayoutCache(i)},textAlign:(i,l)=>{i.props.textAlign=l,this.invalidateLayoutCache(i)},color:(i,l)=>{i.props.color=l,this.invalidateLayoutCache(i)},x:(i,l)=>{i.props.x=l},y:(i,l)=>{i.props.y=l},contain:(i,l)=>{i.props.contain=l,this.invalidateLayoutCache(i)},width:(i,l)=>{i.props.width=l,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,l)=>{i.props.height=l,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,l)=>{i.props.offsetY=l,this.invalidateLayoutCache(i)},scrollY:(i,l)=>{i.props.scrollY=l},letterSpacing:(i,l)=>{i.props.letterSpacing=l,this.invalidateLayoutCache(i)},lineHeight:(i,l)=>{i.props.lineHeight=l,this.invalidateLayoutCache(i)},maxLines:(i,l)=>{i.props.maxLines=l,this.invalidateLayoutCache(i)},textBaseline:(i,l)=>{i.props.textBaseline=l,this.invalidateLayoutCache(i)},verticalAlign:(i,l)=>{i.props.verticalAlign=l,this.invalidateLayoutCache(i)},overflowSuffix:(i,l)=>{i.props.overflowSuffix=l,this.invalidateLayoutCache(i)}}}canRenderFont(i){return!0}isFontFaceSupported(i){return i instanceof Sf}addFontFace(i){Ke(i instanceof Sf),i.fontFamily!=="sans-serif"&&Dx.add(i.fontFace);const{fontFamilies:l}=this,d=i.fontFace.family;let y=l[d];y||(y=new Set,l[d]=y),y.add(i)}createState(i,l){return{node:l,props:i,status:"initialState",updateScheduled:!1,emitter:new Ao,textureNode:void 0,lightning2TextRenderer:new a3(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(i){if(i.status==="initialState"&&this.setStatus(i,"loading"),i.status!=="loaded"){if(!i.fontInfo)return this.loadFont(i);i.fontInfo.loaded&&(i.renderInfo||(i.renderInfo=this.calculateRenderInfo(i),i.textH=i.renderInfo.lineHeight*i.renderInfo.lines.length,i.textW=i.renderInfo.width,this.renderSingleCanvasPage(i)))}}renderSingleCanvasPage(i){Ke(i.renderInfo);const l=i.node,d=this.stage.txManager.loadTexture("ImageTexture",{src:(function(y,x){return Ke(x),y.draw(x,{lines:x.lines,lineWidths:x.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,i.lightning2TextRenderer,i.renderInfo)});if(i.textureNode)i.textureNode.texture=d;else{const y=this.stage.createNode({parent:l,texture:d,autosize:!0,alpha:iI(i.props.color)});i.textureNode=y}this.setStatus(i,"loaded")}calculateRenderInfo(i){var l;return i.lightning2TextRenderer.settings={text:i.props.text,textAlign:i.props.textAlign,fontFamily:i.props.fontFamily,trFontFace:(l=i.fontInfo)==null?void 0:l.fontFace,fontSize:i.props.fontSize,fontStyle:[i.props.fontStretch,i.props.fontStyle,i.props.fontWeight].join(" "),textColor:za(i.props.color),offsetY:i.props.offsetY,wordWrap:i.props.contain!=="none",wordWrapWidth:i.props.contain==="none"?void 0:i.props.width,letterSpacing:i.props.letterSpacing,lineHeight:i.props.lineHeight??null,maxLines:i.props.maxLines,maxHeight:i.props.contain==="both"?i.props.height-i.props.offsetY:null,textBaseline:i.props.textBaseline,verticalAlign:i.props.verticalAlign,overflowSuffix:i.props.overflowSuffix,w:i.props.contain!=="none"?i.props.width:void 0},i.renderInfo=i.lightning2TextRenderer.calculateRenderInfo(),i.renderInfo}renderQuads(){}destroyState(i){i.status!=="destroyed"&&(super.destroyState(i),i.textureNode&&(i.textureNode.destroy(),delete i.textureNode),delete i.renderInfo)}invalidateLayoutCache(i){i.renderInfo=void 0,this.setStatus(i,"loading"),this.scheduleUpdateState(i)}onFontLoaded(i,l){var d;l!==((d=i.fontInfo)==null?void 0:d.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,this.scheduleUpdateState(i))}onFontLoadError(i,l,d){var y;l!==((y=i.fontInfo)==null?void 0:y.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${i.fontInfo.cssString}'`,d),this.scheduleUpdateState(i))}}class l3{constructor(){R(this,"data",{})}reset(){this.data={}}increment(r){this.data[r]||(this.data[r]=0),this.data[r]++}getData(){return{...this.data}}}class f3{constructor(r,i){R(this,"stage");R(this,"memUsed",0);R(this,"loadedTextures",new Map);R(this,"criticalThreshold");R(this,"targetThreshold");R(this,"cleanupInterval");R(this,"debugLogging");R(this,"lastCleanupTime",0);R(this,"criticalCleanupRequested",!1);R(this,"frameTime",0);this.stage=r;const{criticalThreshold:l}=i;this.criticalThreshold=Math.round(l);const d=Math.max(0,Math.min(1,i.targetThresholdLevel));if(this.targetThreshold=Math.round(l*d),this.cleanupInterval=i.cleanupInterval,this.debugLogging=i.debugLogging,i.debugLogging){let y=0;setInterval(()=>{y!==this.memUsed&&(y=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${bx(this.memUsed)} mb / ${bx(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}l===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(r,i){if(this.loadedTextures.has(r)&&(this.memUsed-=this.loadedTextures.get(r)),i===0){this.loadedTextures.delete(r);return}else this.memUsed+=i,this.loadedTextures.set(r,i);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){const r=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,r&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${r}`);const i=[...this.loadedTextures.keys()].sort((y,x)=>{const s=y.renderable,g=x.renderable;return s===g?y.lastRenderableChangeTime-x.lastRenderableChangeTime:s?1:g?-1:0}),l=this.targetThreshold,d=this.stage.txManager;for(const y of i)if(y.renderable||(y.ctxTexture.free(),d.removeTextureFromCache(y),this.memUsed<=l))break;this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`))}getMemoryInfo(){let r=0;const i=[...this.loadedTextures.keys()].reduce((l,d)=>(r+=d.renderable?1:0,l+(d.renderable?this.loadedTextures.get(d):0)),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:i,memUsed:this.memUsed,renderableTexturesLoaded:r,loadedTextures:this.loadedTextures.size}}}const c3={isWhite:!0,a:1,r:255,g:255,b:255};function Vd(h){if(h===4294967295)return c3;const r=(h>>>24&255)/255,i=h>>>16&255&255,l=h>>>8&255&255,d=h&255&255;return{isWhite:!1,a:r,r:d,g:l,b:i}}function Tf({a:h,r,g:i,b:l}){return`rgba(${r},${i},${l},${h})`}class h3 extends l2{constructor(){super(...arguments);R(this,"image");R(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(i=>{this.textureSource.setState("loaded",i),this.updateMemSize()}).catch(i=>{this.textureSource.setState("failed",i)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0)}updateMemSize(){const i=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:l,height:d}=this.textureSource.dimensions;this.setTextureMemUse(l*d*i)}}hasImage(){return this.image!==void 0}getImage(i){var x;const l=this.image;if(Ke(l,"Attempt to get unloaded image texture"),i.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),l;const d=Tf(i);if(((x=this.tintCache)==null?void 0:x.key)===d)return this.tintCache.image;const y=this.tintTexture(l,d);return this.tintCache={key:d,image:y},this.updateMemSize(),y}tintTexture(i,l){const{width:d,height:y}=i,x=document.createElement("canvas");x.width=d,x.height=y;const s=x.getContext("2d");return s&&(s.fillStyle=l,s.globalCompositeOperation="copy",s.fillRect(0,0,d,y),s.globalCompositeOperation="multiply",s.drawImage(i,0,0,d,y,0,0,d,y),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0,d,y,0,0,d,y)),x}async onLoadRequest(){const{data:i}=await this.textureSource.getTextureData();if(i instanceof ImageData){const l=document.createElement("canvas");l.width=i.width,l.height=i.height;const d=l.getContext("2d");return d&&d.putImageData(i,0,0),this.image=l,{width:i.width,height:i.height}}else if(i instanceof ImageBitmap)return this.image=i,{width:i.width,height:i.height};return{width:0,height:0}}}function d3(h){var r;return h.shader instanceof gp&&h.shader.shType===y2?((r=h.shaderProps)==null?void 0:r.radius)??0:0}class p3 extends f2{constructor(i){super(i);R(this,"context");R(this,"canvas");R(this,"pixelRatio");R(this,"clearColor");R(this,"renderToTextureActive",!1);R(this,"activeRttNode",null);R(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:l,pixelRatio:d,clearColor:y}=i;this.canvas=l,this.context=l.getContext("2d"),this.pixelRatio=d,this.clearColor=y?nI(y):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new gp("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const i=this.context;if(this.clearColor){const[l,d,y,x]=this.clearColor;i.fillStyle=`rgba(${l}, ${d}, ${y}, ${x/255})`,i.fillRect(0,0,this.canvas.width,this.canvas.height)}i.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(i){const l=this.context,{tx:d,ty:y,width:x,height:s,alpha:g,colorTl:k,colorTr:A,colorBr:I,ta:M,tb:O,tc:w,td:L,clippingRect:F}=i;let U=i.texture,W,X;if(U){if(U instanceof ms&&(X=U.props,U=U.parentTexture),W=U.ctxTexture,U.state==="freed"){W.load();return}if(U.state!=="loaded"||!W.hasImage())return}const Q=Vd(k),ee=M!==1,Z=F.width!==0&&F.height!==0,H=k!==A||k!==I,J=i.shader?d3(i):0;if((ee||Z||J)&&l.save(),Z){const le=new Path2D,{x:E,y:j,width:re,height:ye}=F;le.rect(E,j,re,ye),l.clip(le)}if(ee){const le=this.pixelRatio;l.setTransform(M,w,O,L,d*le,y*le),l.scale(le,le),l.translate(-d,-y)}if(J){const le=new Path2D;le.roundRect(d,y,x,s,J),l.clip(le)}if(W){const le=W.getImage(Q);l.globalAlpha=g,X?l.drawImage(le,X.x,X.y,X.width,X.height,d,y,x,s):l.drawImage(le,d,y,x,s),l.globalAlpha=1}else if(H){let le=d,E=y,j;k===A?(le=d,E=y+s,j=Vd(I)):(le=d+x,E=y,j=Vd(A));const re=l.createLinearGradient(d,y,le,E);re.addColorStop(0,Tf(Q)),re.addColorStop(1,Tf(j)),l.fillStyle=re,l.fillRect(d,y,x,s)}else l.fillStyle=Tf(Q),l.fillRect(d,y,x,s);(ee||Z||J)&&l.restore()}createCtxTexture(i){return new h3(this.txMemManager,i)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(i){}renderToTexture(i){}getBufferInfo(){return null}}class m3 extends Jd{constructor(i,l){super(i,l);R(this,"textRenderer");R(this,"trState");R(this,"_textRendererOverride",null);R(this,"onTextLoaded",()=>{const{contain:i}=this,l=this.trState.props.width,d=this.trState.props.height,y=this.trState.textW||0,x=this.trState.textH||0;i==="both"?(this.props.width=l,this.props.height=d):i==="width"?(this.props.width=l,this.props.height=x):i==="none"&&(this.props.width=y,this.props.height=x),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});R(this,"onTextFailed",(i,l)=>{this.emit("failed",{type:"text",error:l})});this._textRendererOverride=l.textRendererOverride;const{resolvedTextRenderer:d,textRendererState:y}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:l.width,height:l.height,textAlign:l.textAlign,color:l.color,zIndex:l.zIndex,contain:l.contain,scrollable:l.scrollable,scrollY:l.scrollY,offsetY:l.offsetY,letterSpacing:l.letterSpacing,debug:l.debug,fontFamily:l.fontFamily,fontSize:l.fontSize,fontStretch:l.fontStretch,fontStyle:l.fontStyle,fontWeight:l.fontWeight,text:l.text,lineHeight:l.lineHeight,maxLines:l.maxLines,textBaseline:l.textBaseline,verticalAlign:l.verticalAlign,overflowSuffix:l.overflowSuffix});this.textRenderer=d,this.trState=y}get width(){return this.props.width}set width(i){this.props.width=i,this.textRenderer.set.width(this.trState,i),this.contain==="none"&&this.setUpdateType(Pe.Local)}get height(){return this.props.height}set height(i){this.props.height=i,this.textRenderer.set.height(this.trState,i),this.contain!=="both"&&this.setUpdateType(Pe.Local)}get color(){return this.trState.props.color}set color(i){this.textRenderer.set.color(this.trState,i)}get text(){return this.trState.props.text}set text(i){this.textRenderer.set.text(this.trState,i)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(i){this._textRendererOverride=i,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:l,textRendererState:d}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=l,this.trState=d}get fontSize(){return this.trState.props.fontSize}set fontSize(i){this.textRenderer.set.fontSize(this.trState,i)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(i){this.textRenderer.set.fontFamily(this.trState,i)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(i){this.textRenderer.set.fontStretch(this.trState,i)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(i){this.textRenderer.set.fontStyle(this.trState,i)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(i){this.textRenderer.set.fontWeight(this.trState,i)}get textAlign(){return this.trState.props.textAlign}set textAlign(i){this.textRenderer.set.textAlign(this.trState,i)}get contain(){return this.trState.props.contain}set contain(i){this.textRenderer.set.contain(this.trState,i)}get scrollable(){return this.trState.props.scrollable}set scrollable(i){this.textRenderer.set.scrollable(this.trState,i)}get scrollY(){return this.trState.props.scrollY}set scrollY(i){this.textRenderer.set.scrollY(this.trState,i)}get offsetY(){return this.trState.props.offsetY}set offsetY(i){this.textRenderer.set.offsetY(this.trState,i)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(i){this.textRenderer.set.letterSpacing(this.trState,i)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(i){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,i)}get maxLines(){return this.trState.props.maxLines}set maxLines(i){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,i)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(i){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,i)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(i){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,i)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(i){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,i)}get debug(){return this.trState.props.debug}set debug(i){this.textRenderer.set.debug(this.trState,i)}update(i,l){super.update(i,l),Ke(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(i){super.onChangeIsRenderable(i),this.textRenderer.setIsRenderable(this.trState,i)}renderQuads(i){var l;if(Ke(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(i);return}this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(this.parentHasRenderTexture&&((l=this.props.parent)!=null&&l.rtt)&&(this.globalTransform=kn.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),Ke(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(i){const l=this.stage.resolveTextRenderer(i,this._textRendererOverride),d=l.createState(i,this);return d.emitter.on("loaded",this.onTextLoaded),d.emitter.on("failed",this.onTextFailed),l.scheduleUpdateState(d),{resolvedTextRenderer:l,textRendererState:d}}}function g3(h){const r={boolean:!0,string:!0,number:!0,undefined:!0},i=Object.keys(h);for(let l=0;l<i.length;l++){const d=i[l];if(!d)continue;const y=h[d],x=typeof y;x==="string"&&y.length>2048&&(console.warn(`Custom Data value for ${d} is too long, it will be truncated to 2048 characters`),h[d]=y.substring(0,2048)),r[x]||(console.warn(`Custom Data value for ${d} is not a boolean, string, or number, it will be ignored`),delete h[d])}return h}const y3=2e6;class v3{constructor(r){R(this,"options");R(this,"animationManager");R(this,"txManager");R(this,"txMemManager");R(this,"fontManager");R(this,"textRenderers");R(this,"shManager");R(this,"renderer");R(this,"root");R(this,"boundsMargin");R(this,"defShaderCtr");R(this,"eventBus");R(this,"deltaTime",0);R(this,"lastFrameTime",0);R(this,"currentFrameTime",0);R(this,"fpsNumFrames",0);R(this,"fpsElapsedTime",0);R(this,"renderRequested",!1);R(this,"frameEventQueue",[]);R(this,"contextSpy",null);this.options=r;const{canvas:i,clearColor:l,appWidth:d,appHeight:y,boundsMargin:x,enableContextSpy:s,numImageWorkers:g,textureMemory:k,renderMode:A}=r;this.eventBus=r.eventBus,this.txManager=new VI(g),this.txMemManager=new f3(this,k),this.shManager=new _I,this.animationManager=new jI,this.contextSpy=s?new l3:null;let I=[0,0,0,0];x&&(I=Array.isArray(x)?x:[x,x,x,x]),this.boundsMargin=I;const M={stage:this,canvas:i,pixelRatio:r.devicePhysicalPixelRatio*r.deviceLogicalPixelRatio,clearColor:l??4278190080,bufferMemory:y3,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};A==="canvas"?this.renderer=new p3(M):this.renderer=new yp(M),this.defShaderCtr=this.renderer.getDefShaderCtr(),Zb(A),this.txManager.renderer=this.renderer,this.textRenderers=A==="webgl"?{canvas:new Nx(this),sdf:new r3(this)}:{canvas:new Nx(this)},this.fontManager=new vp(this.textRenderers);const O=new Jd(this,{x:0,y:0,width:d,height:y,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1});this.root=O,mI(this)}updateFrameTime(){const r=gI();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=r,this.deltaTime=this.lastFrameTime?r-this.lastFrameTime:100/6,this.txManager.frameTime=r,this.txMemManager.frameTime=r,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}updateAnimations(){const{animationManager:r}=this;this.root&&r.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:r,renderRequested:i}=this;Ke(r),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),r.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),r.rttNodes.length>0&&r.renderRTTNodes(),this.addQuads(this.root),r==null||r.render(),this.calculateFps(),i&&(this.renderRequested=!1)}queueFrameEvent(r,i){this.frameEventQueue.push([r,i])}flushFrameEvents(){for(const[r,i]of this.frameEventQueue)this.eventBus.emit(r,i);this.frameEventQueue=[]}calculateFps(){var i,l;const{fpsUpdateInterval:r}=this.options;if(r&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=r)){const d=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:d,contextSpyData:((i=this.contextSpy)==null?void 0:i.getData())??null}),(l=this.contextSpy)==null||l.reset()}}addQuads(r){Ke(this.renderer&&r.globalTransform),r.isRenderable&&r.renderQuads(this.renderer);for(let i=0;i<r.children.length;i++){const l=r.children[i];l&&(l==null?void 0:l.worldAlpha)!==0&&this.addQuads(l)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(r,i=null){let l=i,d=!1;if(l){const x=this.textRenderers[l];x?x.canRenderFont(r)||(console.warn(`Cannot use override text renderer '${l}' for font`,r),l=null,d=!0):(console.warn(`Text renderer override '${l}' not found.`),l=null,d=!0)}if(!l){for(const[x,s]of Object.entries(this.textRenderers))if(x!=="canvas"&&s.canRenderFont(r)){l=x;break}l||(l="canvas")}d&&console.warn(`Falling back to text renderer ${String(l)}`);const y=this.textRenderers[l];return Ke(y,"resolvedTextRenderer undefined"),y}createShaderCtr(r,i){return this.shManager.loadShader(r,i)}createNode(r){const i=this.resolveNodeDefaults(r);return new Jd(this,i)}createTextNode(r){const i=r.fontSize??16,l={...this.resolveNodeDefaults(r),text:r.text??"",textRendererOverride:r.textRendererOverride??null,fontSize:i,fontFamily:r.fontFamily??"sans-serif",fontStyle:r.fontStyle??"normal",fontWeight:r.fontWeight??"normal",fontStretch:r.fontStretch??"normal",textAlign:r.textAlign??"left",contain:r.contain??"none",scrollable:r.scrollable??!1,scrollY:r.scrollY??0,offsetY:r.offsetY??0,letterSpacing:r.letterSpacing??0,lineHeight:r.lineHeight,maxLines:r.maxLines??0,textBaseline:r.textBaseline??"alphabetic",verticalAlign:r.verticalAlign??"middle",overflowSuffix:r.overflowSuffix??"...",debug:r.debug??{},shaderProps:null};return new m3(this,l)}resolveNodeDefaults(r){const i=r.color??4294967295,l=r.colorTl??r.colorTop??r.colorLeft??i,d=r.colorTr??r.colorTop??r.colorRight??i,y=r.colorBl??r.colorBottom??r.colorLeft??i,x=r.colorBr??r.colorBottom??r.colorRight??i,s=g3(r.data??{});return{x:r.x??0,y:r.y??0,width:r.width??0,height:r.height??0,alpha:r.alpha??1,autosize:r.autosize??!1,clipping:r.clipping??!1,color:i,colorTop:r.colorTop??i,colorBottom:r.colorBottom??i,colorLeft:r.colorLeft??i,colorRight:r.colorRight??i,colorBl:y,colorBr:x,colorTl:l,colorTr:d,zIndex:r.zIndex??0,zIndexLocked:r.zIndexLocked??0,parent:r.parent??null,texture:r.texture??null,textureOptions:r.textureOptions??{},shader:r.shader??this.defShaderCtr,src:r.src??null,scale:r.scale??null,scaleX:r.scaleX??r.scale??1,scaleY:r.scaleY??r.scale??1,mount:r.mount??0,mountX:r.mountX??r.mount??0,mountY:r.mountY??r.mount??0,pivot:r.pivot??.5,pivotX:r.pivotX??r.pivot??.5,pivotY:r.pivotY??r.pivot??.5,rotation:r.rotation??0,rtt:r.rtt??!1,data:s}}}class x3 extends Ao{constructor(i,l){var L,F,U,W;super();R(this,"root");R(this,"canvas");R(this,"settings");R(this,"stage");R(this,"inspector",null);const d={criticalThreshold:((L=i.textureMemory)==null?void 0:L.criticalThreshold)||124e6,targetThresholdLevel:((F=i.textureMemory)==null?void 0:F.targetThresholdLevel)||.5,cleanupInterval:((U=i.textureMemory)==null?void 0:U.cleanupInterval)||3e4,debugLogging:((W=i.textureMemory)==null?void 0:W.debugLogging)||!1},y={appWidth:i.appWidth||1920,appHeight:i.appHeight||1080,textureMemory:d,boundsMargin:i.boundsMargin||0,deviceLogicalPixelRatio:i.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:i.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:i.clearColor??0,fpsUpdateInterval:i.fpsUpdateInterval||0,numImageWorkers:i.numImageWorkers!==void 0?i.numImageWorkers:2,enableContextSpy:i.enableContextSpy??!1,enableInspector:i.enableInspector??!1,renderMode:i.renderMode??"webgl",quadBufferSize:i.quadBufferSize??4*1024*1024};this.settings=y;const{appWidth:x,appHeight:s,deviceLogicalPixelRatio:g,devicePhysicalPixelRatio:k,enableInspector:A}=y,I=x*g,M=s*g,O=document.createElement("canvas");this.canvas=O,O.width=I*k,O.height=M*k,O.style.width=`${I}px`,O.style.height=`${M}px`,this.stage=new v3({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderMode:this.settings.renderMode,textureMemory:d,eventBus:this,quadBufferSize:this.settings.quadBufferSize}),this.root=this.stage.root;let w;if(typeof l=="string"?w=document.getElementById(l):w=l,!w)throw new Error("Could not find target element");w.appendChild(O),A&&!pp()&&(this.inspector=new pI(O,y))}createNode(i){Ke(this.stage,"Stage is not initialized");const l=this.stage.createNode(i);return this.inspector?this.inspector.createNode(l):l}createTextNode(i){const l=this.stage.createTextNode(i);return this.inspector?this.inspector.createTextNode(l):l}destroyNode(i){return this.inspector&&this.inspector.destroyNode(i.id),i.destroy()}createTexture(i,l){return this.stage.txManager.loadTexture(i,l)}createShader(i,l){return this.stage.shManager.loadShader(i,l)}createDynamicShader(i){return this.stage.shManager.loadDynamicShader({effects:i})}createEffect(i,l,d){return{name:d,type:i,props:l}}getNodeById(i){var y;const l=(y=this.stage)==null?void 0:y.root;if(!l)return null;const d=x=>{if(x.id===i)return x;for(const s of x.children){const g=d(s);if(g)return g}return null};return d(l)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){throw new Error("Not implemented")}}const Ox={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},w3=()=>{const h=ki.stage;io.get("fonts",[]).forEach(r=>{r.type==="sdf"||r.type==="msdf"?(!r.png&&r.file&&(r.png=r.file.replace(/\.[^.]+$/,`.${r.type}.png`)),!r.json&&r.file&&(r.json=r.file.replace(/\.[^.]+$/,`.${r.type}.json`)),h.fontManager.addFontFace(new sp(r.type,{fontFamily:r.family,descriptors:{},atlasUrl:r.png,atlasDataUrl:r.json,stage:h,metrics:r.metrics}))):r.type==="web"&&h.fontManager.addFontFace(new Sf({fontFamily:r.family,fontUrl:r.file,descriptors:{},metrics:r.metrics}))})},S3=()=>{const h=ki.stage;io.get("shaders",[]).forEach(r=>{h.shManager.registerShaderType(r.name,r.type)}),io.get("effects",[]).forEach(r=>{h.shManager.registerShaderType(r.name,r.type)})};let ki={};const T3=(h,r,i={})=>{"fontLoader"in i&&Vt.warn("\n\nStarting version 0.9.0 of Blits, the Launch setting `fontLoader` is not supported / required anymore.\nYou can remove the option from your `src/index.js`-file. And you can safely remove the file `src/fontLoader.js` from your project.\n      "),ki=new x3({appWidth:i.w||1920,appHeight:i.h||1080,fpsUpdateInterval:i.fpsInterval||1e3,deviceLogicalPixelRatio:i.pixelRatio||Ox[i.screenResolution]||Ox[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in i?i.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:i.canvasColor&&hs.normalize(i.canvasColor)||0,enableInspector:i.inspector||!1,boundsMargin:i.viewportMargin||0,txMemByteThreshold:"gpuMemoryLimit"in i?i.gpuMemoryLimit*1024*1024:200*1024*1024,renderMode:"renderMode"in i?i.renderMode:"webgl"},r);const l=()=>{let d=h();d.quit=()=>{Vt.info("Closing App"),d.destroy(),d=null,ki=null}};return S3(),w3(),l(),ki},Ux=h=>h!==null&&typeof h=="object"&&"transition"in h,uf=h=>typeof h=="string"&&h.startsWith("{")&&h.endsWith("}"),lf=h=>JSON.parse(h.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),ts=function(h,r){return typeof h!="string"?h:h.indexOf("%")===h.length-1?this.element.parent&&this.element.parent[r]&&this.element.parent[r]*(parseFloat(h)/100):h},ap=h=>{if(h===null||typeof h=="string")return h;if(typeof h=="number")return h;if(typeof h=="object"&&h.constructor===Object){if("value"in h)return h.value;if("transition"in h)return ap(h.transition)}return h},C3={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let up;const E3={set parent(h){this.props.parent=h==="root"?ki.root:h.node},set rotation(h){this.props.rotation=h*(Math.PI/180)},set w(h){this.props.width=ts.call(this,h,"width")},set width(h){this.props.width=ts.call(this,h,"width")},set h(h){this.props.height=ts.call(this,h,"height")},set height(h){this.props.height=ts.call(this,h,"height")},set x(h){this.props.x=ts.call(this,h,"width")},set y(h){this.props.y=ts.call(this,h,"height")},set z(h){this.props.zIndex=h},set zIndex(h){this.props.zIndex=h},set color(h){typeof h=="string"&&h.indexOf("{")===-1?this.props.color=hs.normalize(h):(typeof h=="object"||uf(h)&&(h=lf(h)))&&(this.props.color=0,Object.entries(h).forEach(r=>{this.props[C3[r[0]]]=hs.normalize(r[1])}))},set src(h){this.props.src=h,this.raw.get("color")===void 0&&(this.props.color=4294967295)},set texture(h){this.props.texture=h,this.raw.get("color")===void 0&&h==null?this.props.color=0:this.raw.get("color")===void 0&&(this.props.color=4294967295)},set rtt(h){this.props.rtt=h,h===!0&&this.raw.get("color")===void 0&&(this.props.color=4294967295)},set mount(h){typeof h=="object"||uf(h)&&(h=lf(h))?("x"in h&&(this.props.mountX=h.x),"y"in h&&(this.props.mountY=h.y)):(this.props.mountX=h,this.props.mountY=h)},set pivot(h){typeof h=="object"||uf(h)&&(h=lf(h))?("x"in h&&(this.props.pivotX=h.x),"y"in h&&(this.props.pivotY=h.y)):(this.props.pivotX=h,this.props.pivotY=h)},set scale(h){typeof h=="object"||uf(h)&&(h=lf(h))?("x"in h&&(this.props.scaleX=h.x),"y"in h&&(this.props.scaleY=h.y)):this.props.scale=h},set show(h){this.props.alpha=h?1:0},set alpha(h){this.props.alpha=h},set shader(h){h!==null?this.props.shader=ki.createShader(h.type,h.props):this.props.shader=ki.createShader("DefaultShader")},set effects(h){this.props.shader=ki.createShader("DynamicShader",{effects:h.map(r=>(r.props&&r.props.color&&(r.props.color=hs.normalize(r.props.color)),r))})},set clipping(h){this.props.clipping=h},set overflow(h){this.props.clipping=!h},set font(h){this.props.fontFamily=h},set size(h){this.props.fontSize=h},set wordwrap(h){this.props.width=h,this.props.contain="width"},set maxheight(h){this.props.height=h,this.props.contain="both"},set contain(h){this.props.contain=h},set maxlines(h){this.props.maxLines=h},set textoverflow(h){this.props.overflowSuffix=h===!1?" ":h===!0?void 0:h},set letterspacing(h){this.props.letterSpacing=h||1},set lineheight(h){this.props.lineHeight=h},set align(h){this.props.textAlign=h},set content(h){this.props.text=""+h}},A3={populate(h){const r={...this.config,...h};r[fe.isSlot]&&(this[fe.isSlot]=!0),this.props.element=this;const i=Object.keys(r),l=i.length;this.props.parent=r.parent,delete r.parent,this.props.raw=new Map(Object.entries(r));for(let d=0;d<l;d++){const y=i[d],x=r[y];x!==void 0&&(this.props[y]=ap(x))}this.props.props.color===void 0&&!("__textnode"in r)&&(this.props.props.color=0),this.node=r.__textnode?ki.createTextNode({...up,...this.props.props}):this.node=ki.createNode(this.props.props),r["@loaded"]&&this.node.on("loaded",(d,{type:y,dimensions:x})=>{r["@loaded"]({w:x.width,h:x.height,type:y},this)}),r["@error"]&&this.node.on("failed",(d,y)=>{r["@error"](y,this)}),this.component&&this.component.___layout&&this.node.on("loaded",()=>{this.component.___layout()})},set(h,r){if(r===void 0||this.props.raw.get(h)===r)return;this.props.raw.set(h,r),this.props.props={},this.props[h]=ap(r);const i=Object.entries(this.props.props);if(i.length===1){const[l,d]=i[0];if(Ux(r))return this.animate(l,d,r.transition);this.node[l]=d}else for(let l=0;l<i.length;l++){const[d,y]=i[l];if(Ux(r))return this.animate(d,y,r.transition);this.node[d]=y}this.component&&this.component.___layout&&this.component.___layout()},animate(h,r,i){if(this.node[h]===r)return;this.scheduledTransitions[h]&&this.scheduledTransitions[h].f.state==="running"&&(this.node[h]=this.scheduledTransitions[h].v);const l={};l[h]=r;const d=this.node.animate(l,{duration:typeof i=="object"&&"duration"in i?i.duration:300,easing:typeof i=="object"&&"easing"in i?i.easing:"ease",delay:typeof i=="object"&&"delay"in i?i.delay:0}),y=this.node[h];this.scheduledTransitions[h]={v:l[h],cancel:!1,f:d},i.start&&typeof i.start=="function"&&d.once("animating",()=>{i.start.call(this.component,this,h,y)}),d.once("stopped",()=>{this.scheduledTransitions[h]=null,i.end&&typeof i.end=="function"&&i.end.call(this.component,this,h,this.node[h])}),d.start()},destroy(){Vt.debug("Deleting  Node",this.nodeId),this.node.destroy()},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){return this.component[fe.getChildren]().filter(h=>h.parent===(this[fe.isSlot]?this.node.children[0]:this.node))}},b3=(h,r)=>(up||(up={fontSize:32,fontFamily:io.get("defaultFont","sans-serif")}),Object.assign(Object.create(A3),{props:Object.assign(Object.create(E3),{props:{}}),scheduledTransitions:{},config:h,component:r})),Bx={Element:b3,Launch:T3};let Fa;const _f={},I3=(h,r,i)=>{io.set(i),Pb(),_f.element=Bx.Element,Fa=Bx.Launch(h,r,i)},k3={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},To=window.speechSynthesis,M3=()=>(window.navigator||{}).userAgent||"",jx=()=>/android/i.test(M3());let T2=!1,Rf=null;const xp=()=>Rf&&clearTimeout(Rf),lp=h=>{if(!h||Rf)return xp();To.pause(),To.resume(),Rf=setTimeout(()=>{lp(h)},5e3)},ls={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},_3=()=>{ls.voice=To.getVoices()[0],T2=!0},R3=(h,r)=>{const i=new SpeechSynthesisUtterance(r.value);i.lang=r.lang||ls.lang,i.pitch=r.pitch||ls.pitch,i.rate=r.rate||ls.rate,i.voice=r.voice||ls.voice,i.volume=r.volume||ls.volume,i.onstart=()=>{jx()||lp(i),h.onstart()},i.onresume=()=>{jx()||lp(i),h.onresume()},i.onpause=()=>{h.onpause()},i.onend=()=>{h.onend()},i.onerror=()=>{xp(),h.onerror()},To.speak(i)},Cf={speak(h){T2||_3(),this.cancel(),R3(this,h)},resume(){To.resume()},pause(){To.pause()},cancel(){To.cancel(),xp()},getVoices(){return To.getVoices()},onend(){},onerror(){},onstart(){},onresume(){},onpause(){}};let Fx;const wp=(h,r="off")=>{clearTimeout(Fx),Cf.cancel(),r==="assertive"?Cf.speak({value:h}):Fx=setTimeout(()=>{Cf.speak({value:h})},400)},L3=h=>wp(h,"polite"),P3=h=>wp(h,"assertive"),D3=()=>{Cf.cancel()},C2={speak:wp,polite:L3,assertive:P3,stop:D3};let Lf,Pf=!1;const E2=new WeakMap,A2=[];let b2={},I2={},fp=!1,k2;const N3=()=>(document.location.hash||"/").replace(/^#/,""),zx=h=>h.replace(/^\/+|\/+$/g,"").toLowerCase(),O3=h=>typeof h=="object"&&h!==null,U3=h=>typeof h=="string",B3=(h,r=[])=>{const i=h;h=zx(h);let l=!1,d=0;for(;!l&&d<r.length;){const y=r[d];if(y.path=zx(y.path),y.path===h)y.params={},l=y;else if(y.path.indexOf(":")>-1){const x=[...y.path.matchAll(/:([^\s/]+)/gi)];let s=y.path;x.reverse().forEach(k=>{s=s.substring(0,k.index)+"([^\\s/]+)"+s.substring(k.index+k[0].length)});const g=i.match(new RegExp(`${s}`,"i"));g&&(y.params=x.reverse().reduce((k,A,I)=>(k[A[1]]=g[I+1],k),{}),l=y)}else if(y.path.endsWith("*")){const x=new RegExp(y.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),s=h.match(x);s&&(s[1]&&(y.params={path:s[1]}),l=y)}d++}return l&&(l.options={...l.options,...b2},l.data||(l.data={}),Lf=l),l},j3=async function(){if(Pf=!0,this.parent[fe.routes]){const h=Lf,r=N3();let i=B3(r,this.parent[fe.routes]),l;if(i){if(i.hooks&&i.hooks.before&&(l=await i.hooks.before(i,h),U3(l))){Lf=h,Bf(l);return}i=O3(l)?l:i,fp===!1&&h&&h.options.inHistory===!0&&A2.push(h),"transition"in i||(i.transition=k3),typeof i.transition=="function"&&(i.transition=i.transition(h,i));let d,{view:y,focus:x}=E2.get(i)||{};if(y)d=y[fe.holder];else{d=_f.element({parent:this[fe.children][0]}),d.populate({}),d.set("w","100%"),d.set("h","100%");const g={...this[fe.props],...i.params,...I2,...i.data};y=await i.component({props:g},d,this),y[Symbol.toStringTag]==="Module"&&(y.default&&typeof y.default=="function"?y=y.default({props:g},d,this):Vt.error("Dynamic import doesn't have a default export or default is not a function")),typeof y=="function"&&(y=y({props:g},d,this))}if(this[fe.children].push(y),k2=Co.get(),x?Co.set(x):Co.set(y),i.transition.before)if(Array.isArray(i.transition.before))for(let g=0;g<i.transition.before.length;g++)d.set(i.transition.before[g].prop,i.transition.before[g].value);else d.set(i.transition.before.prop,i.transition.before.value);let s=!1;if(h){s=!0;const g=this[fe.children].splice(1,1).pop();g&&F3(h,g,i.transition.out)}if(i.transition.in)if(Array.isArray(i.transition.in))for(let g=0;g<i.transition.in.length;g++)g===i.transition.length-1?await ps(d,i.transition.in[g],s):ps(d,i.transition.in[g],s);else await ps(d,i.transition.in,s);i.announce&&(typeof i.announce=="string"&&(i.announce={message:i.announce}),C2.speak(i.announce.message,i.announce.politeness)),this.activeView=this[fe.children][this[fe.children].length-1]}else Vt.error(`Route ${r} not found`)}fp=!1,Pf=!1},F3=async(h,r,i)=>{if(i)if(Array.isArray(i))for(let l=0;l<i.length;l++)l===i.length-1?await ps(r[fe.holder],i[l]):ps(r[fe.holder],i[l]);else await ps(r[fe.holder],i);h.options&&h.options.keepAlive===!0?E2.set(h,{view:r,focus:k2}):(r.destroy(),r=null)},ps=(h,r,i=!0)=>new Promise(l=>{if(i){const d=r.end;r.end=d?(...y)=>{d(...y),l()}:l,h.set(r.prop,{transition:r})}else h.set(r.prop,r.value),l()}),Bf=(h,r={},i={})=>{I2=r,b2=i,window.location.hash=`#${h}`},M2=()=>{const h=A2.pop();if(h){fp=!0;let r=h.path;return r.indexOf(":")>-1&&Object.keys(h.params).forEach(i=>{r=r.replace(`:${i}`,h.params[i])}),Bf(r),!0}else return!1},Hd={navigate:j3,to:Bf,back:M2};let xo=null,ff=[],Vx;const Co={_hold:!1,set hold(h){this._hold=h},get hold(){return this._hold},get(){return xo},set(h,r){clearTimeout(Vx),xo&&xo!==h.parent&&xo.unfocus(),ff.reverse().forEach(i=>i.unfocus()),h!==xo&&(Vx=setTimeout(()=>{xo=h,xo.lifecycle.state="focus",r instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",r)):ff=[]},this.hold?50:0))},input(h,r){if(Pf===!0)return;ff=_2([xo],h);const i=ff.shift();i&&(i[fe.inputEvents][h]?i[fe.inputEvents][h].call(i,r):i[fe.inputEvents].any&&i[fe.inputEvents].any.call(i,r))}},_2=(h,r)=>h[0][fe.inputEvents]&&(typeof h[0][fe.inputEvents][r]=="function"||typeof h[0][fe.inputEvents].any=="function")?h:h[0].parent?(h.unshift(h[0].parent),_2(h,r)):[],cf=new Map,cp={registerListener(h,r,i){let l=cf.get(r);l||(l=new Map,cf.set(r,l));let d=l.get(h);d||(d=new Set,l.set(h,d)),d.add(i)},executeListeners(h,r){const i=cf.get(h);i&&i.forEach(l=>{l.forEach(d=>{d(r)})})},removeListeners(h){cf.forEach(r=>{const i=r.get(h);i&&(i.clear(),r.delete(i))})}},z3={focus:{value:function(h){this[fe.state].hasFocus=!0,Co.set(this,h)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[fe.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy",this.$clearTimeouts(),this.$clearIntervals(),cp.removeListeners(this),R2(this[fe.children]),Vt.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},select:{value:function(h){let r=null;return this[fe.children].forEach(i=>{Array.isArray(i)?i.forEach(l=>{l.ref===h&&(r=l)}):Object.getPrototypeOf(i)===Object.prototype?Object.keys(i).forEach(l=>{i[l].ref===h&&(r=i[l])}):i.ref===h&&(r=i)}),r},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(h){ds(this[fe.originalState],h,!0)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(h){return Vt.warn("this.$trigger is deprecated, use this.trigger instead"),this.trigger(h)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(h,r){return{type:h,props:r}},writable:!1,enumerable:!0,configurable:!1}},R2=function(h){for(let r=0;r<h.length;r++){if(!h[r])return;h[r].destroy&&typeof h[r].destroy=="function"?h[r].destroy():Object.getPrototypeOf(h[r])===Object.prototype&&R2(Object.values(h[r])),h[r]=null}h.length=0},V3={$setTimeout:{value:function(h,r,...i){const l=setTimeout(()=>{this[fe.timeouts]=this[fe.timeouts].filter(d=>d!==l),h.apply(null,i)},r,i);return this[fe.timeouts].push(l),l},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(h){this[fe.timeouts].indexOf(h)>-1&&(this[fe.timeouts]=this[fe.timeouts].filter(r=>r!==h),clearTimeout(h))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let h=0;h<this[fe.timeouts].length;h++)clearTimeout(this[fe.timeouts][h]);this[fe.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(h,r,...i){const l=setInterval(()=>h.apply(null,i),r,i);return this[fe.intervals].push(l),l},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(h){this[fe.intervals].indexOf(h)>-1&&(this[fe.intervals]=this[fe.intervals].filter(r=>r!==h),clearInterval(h))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let h=0;h<this[fe.intervals].length;h++)clearInterval(this[fe.intervals][h]);this[fe.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},H3={$emit:{value:function(h,r){cp.executeListeners(h,r)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(h,r){cp.registerListener(this,h,r)},writable:!1,enumerable:!0,configurable:!1}},$3={$log:{value:Jx("App"),writable:!1,enumerable:!1,configurable:!1}},G3={$router:{value:{to:Bf,back:M2,get currentRoute(){return Lf},get routes(){return this[fe.routes]},get navigating(){return Pf}},writable:!1,enumerable:!0,configurable:!1}},W3={$announcer:{value:C2,writable:!1,enumerable:!0,configurable:!1}},X3={[fe.renderer]:{value:()=>Fa,writable:!1,enumerable:!0,configurable:!1},[fe.getChildren]:{value(){const h=this.rootParent||this.parent;return(this[fe.children]||[]).concat(h&&h[fe.getChildren]().map(r=>Object.getPrototypeOf(r)===Object.prototype?Object.values(r).map(i=>(i.forComponent=i.config&&i.config.parent.component,i)):r).flat().filter(r=>{if(r&&r.component)return r.component&&r.component.componentId===this.componentId||r.forComponent&&r.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},K3=Object.defineProperties({},{...z3,...V3,...H3,...$3,...G3,...W3,...X3}),Y3={cast:h=>h,required:!1},q3=(h,r=[])=>{r.indexOf("ref")===-1&&r.push("ref"),h[fe.propKeys]=[],r.forEach(i=>{i={...Y3,...typeof i=="object"?i:{key:i}},h[fe.propKeys].push(i.key),Object.defineProperty(h,i.key,{get(){const l=i.cast(this[fe.props]&&i.key in this[fe.props]?this[fe.props][i.key]:"default"in i?i.default:void 0);return i.required&&l===void 0&&Vt.warn(`${i.key} is required`),l},set(l){Vt.warn(`Warning! Avoid mutating props directly (${i.key})`),this[fe.props][i.key]=l}})})},Q3=(h,r)=>{h[fe.methodKeys]=[];for(let i in r)h[fe.propKeys]&&h[fe.propKeys].indexOf(i)>-1?Vt.error(`${i} already exists as a prop`):(typeof r[i]!="function"&&Vt.warn(`${i} is not a function`),h[fe.methodKeys].push(i),h[i]=r[i])},Z3=(h,r=()=>{})=>{Object.defineProperty(h,fe.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1}),Object.keys(r.apply(h)||{}).concat(["hasFocus"]).forEach(l=>{h[fe.propKeys]&&h[fe.propKeys].indexOf(l)>-1&&Vt.error(`State ${l} already exists as a prop`),h[fe.methodKeys]&&h[fe.methodKeys].indexOf(l)>-1&&Vt.error(`State ${l} already exists as a method`),h[fe.stateKeys].push(l);try{Object.defineProperty(h,l,{get(){return this[fe.state]&&l in this[fe.state]&&this[fe.state][l]},set(d){this[fe.state]&&(this[fe.state][l]=d)}})}catch(d){Vt.error(d)}})},J3=(h,r)=>{h[fe.computedKeys]=[];for(let i in r)h[fe.stateKeys]&&h[fe.stateKeys].indexOf(i)>-1?Vt.error(`${i} already exists as a state variable`):h[fe.propKeys]&&h[fe.propKeys].indexOf(i)>-1?Vt.error(`${i} already exists as a prop`):h[fe.methodKeys]&&h[fe.methodKeys].indexOf(i)>-1?Vt.error(`${i} already exists as a method`):(typeof r[i]!="function"&&Vt.warn(`${i} is not a function`),h[fe.computedKeys].push(i),Object.defineProperty(h,i,{get(){return r[i].apply(this)}}))},ek=(h,r)=>{h[fe.inputEvents]=[],Object.keys(r).forEach(i=>{typeof r[i]!="function"&&Vt.warn(`${r[i]} is not a function`),h[fe.inputEvents][i]=r[i]})},tk=(h,r)=>{h[fe.routes]=[],Object.keys(r).forEach(i=>{h[fe.routes][i]={...r[i],options:{inHistory:!0,...r[i].options}}})},nk=(h,r)=>{h[fe.watchKeys]=[],h[fe.watchers]={};for(let i in r)typeof r[i]!="function"&&console.warn(`${i} is not a function`),h[fe.watchKeys].push(i),h[fe.watchers][i]=function(l,d){r[i].call(this,l,d)}};let ik=0;function ok(h,r){return h[fe.identifier]=++ik,Gb(r.hooks,h[fe.identifier]),q3(h,r.props),r.methods&&Q3(h,r.methods),Z3(h,r.state),r.computed&&J3(h,r.computed),r.watch&&nk(h,r.watch),r.routes&&tk(h,r.routes),r.input&&ek(h,r.input),h}const rk=()=>Io("Image",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.imageSource=i.imageSource,s[0].populate(g),s},effects:[function(r,i,l,d,y,x){i[0].set("imageSource",r.imageSource)}],context:{}},props:["src"],computed:{imageSource(){return/^(?:https?:)?\/\//i.test(this.src)?this.src:`${window.location.protocol}//${window.location.host}/${this.src}`}}}),sk=()=>Io("Circle",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.color=i.color,g.w=i.size,g.h=i.size,g.effects=[i.shader("radius",{radius:i.radius})],s[0].populate(g),s},effects:[function(r,i,l,d,y,x){i[0].set("color",r.color)},function(r,i,l,d,y,x){i[0].set("w",r.size)},function(r,i,l,d,y,x){i[0].set("h",r.size)},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:r.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let $d;const ak=()=>Io("RouterView",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=r.node.width*(100/100),g.height=r.node.height*(100/100),s[0].populate(g),s},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){$d=()=>Hd.navigate.apply(this),Hd.navigate.apply(this),window.addEventListener("hashchange",$d)},destroy(){window.removeEventListener("hashchange",$d,!1)},focus(){this.activeView&&this.activeView.focus()}},input:{back(){Hd.back()}}}),uk=()=>Io("Sprite",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=r.node.width*(100/100),g.h=r.node.height*(100/100),g.texture=i.texture,g.color=i.color,s[0].populate(g),s},effects:[function(r,i,l,d,y,x){i[0].set("texture",r.texture)},function(r,i,l,d,y,x){i[0].set("color",r.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:!1}},computed:{texture(){const h="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture&&h)return this[fe.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:h.x,y:h.y,width:h.w,height:h.h})}},hooks:{ready(){this.spriteTexture=this[fe.renderer]().createTexture("ImageTexture",{src:this.image})}}}),lk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",fk=()=>Io("FPScounter",{code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.y=15,A.x=20,s[1].populate(A),r=s[1];const I={};s[2]=this.element({parent:r||"root"},i),s[2].populate(I);const M=l.components&&l.components.Sprite||d.Sprite;r=s[2];const O={};if(s[3]=this.element({parent:r||"root"},i),O.image=i.image,O.w=43,O.h=25,O.map=i.sprite,O.frame="fps",typeof M<"u")for(let vt in M.config.props)delete O[M.config.props[vt]];s[3].populate(O),r=s[3];const w={};w.image=i.image,w.w=43,w.h=25,w.map=i.sprite,w.frame="fps",g=w.is||"Sprite";let L;if(typeof g=="string"){if(L=l.components&&l.components[g]||d[g],!L)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(L=g);s[4]=L.call(null,{props:w},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0],r=s[2];const F={};s[5]=this.element({parent:r||"root"},i),F.x=58,F.y=2,s[5].populate(F);const U=l.components&&l.components.Sprite||d.Sprite;r=s[5];const W={};if(s[6]=this.element({parent:r||"root"},i),W.image=i.image,W.x=0,W.h=20,W.w=20,W.map=i.sprite,W.frame=i.fps[0],typeof U<"u")for(let vt in U.config.props)delete W[U.config.props[vt]];s[6].populate(W),r=s[6];const X={};X.image=i.image,X.x=0,X.h=20,X.w=20,X.map=i.sprite,X.frame=i.fps[0],g=X.is||"Sprite";let Q;if(typeof g=="string"){if(Q=l.components&&l.components[g]||d[g],!Q)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(Q=g);s[7]=Q.call(null,{props:X},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],i=s[7]):r=s[7][Symbol.for("children")][0];const ee=l.components&&l.components.Sprite||d.Sprite;r=s[5];const Z={};if(s[8]=this.element({parent:r||"root"},i),Z.image=i.image,Z.x=18,Z.h=20,Z.w=20,Z.map=i.sprite,Z.frame=i.fps[1],typeof ee<"u")for(let vt in ee.config.props)delete Z[ee.config.props[vt]];s[8].populate(Z),r=s[8];const H={};H.image=i.image,H.x=18,H.h=20,H.w=20,H.map=i.sprite,H.frame=i.fps[1],g=H.is||"Sprite";let J;if(typeof g=="string"){if(J=l.components&&l.components[g]||d[g],!J)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(J=g);s[9]=J.call(null,{props:H},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0];const le=l.components&&l.components.Sprite||d.Sprite;r=s[5];const E={};if(s[10]=this.element({parent:r||"root"},i),E.image=i.image,E.x=36,E.h=20,E.w=20,E.map=i.sprite,E.frame=i.fps[2],typeof le<"u")for(let vt in le.config.props)delete E[le.config.props[vt]];s[10].populate(E),r=s[10];const j={};j.image=i.image,j.x=36,j.h=20,j.w=20,j.map=i.sprite,j.frame=i.fps[2],g=j.is||"Sprite";let re;if(typeof g=="string"){if(re=l.components&&l.components[g]||d[g],!re)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(re=g);s[11]=re.call(null,{props:j},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],i=s[11]):r=s[11][Symbol.for("children")][0],r=s[1];const ye={};s[12]=this.element({parent:r||"root"},i),ye.x=150,s[12].populate(ye);const ie=l.components&&l.components.Sprite||d.Sprite;r=s[12];const se={};if(s[13]=this.element({parent:r||"root"},i),se.image=i.image,se.y=2,se.w=48,se.h=25,se.map=i.sprite,se.frame="avg",typeof ie<"u")for(let vt in ie.config.props)delete se[ie.config.props[vt]];s[13].populate(se),r=s[13];const ne={};ne.image=i.image,ne.y=2,ne.w=48,ne.h=25,ne.map=i.sprite,ne.frame="avg",g=ne.is||"Sprite";let ue;if(typeof g=="string"){if(ue=l.components&&l.components[g]||d[g],!ue)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(ue=g);s[14]=ue.call(null,{props:ne},s[13],i),s[14][Symbol.for("slots")][0]?(r=s[14][Symbol.for("slots")][0],i=s[14]):r=s[14][Symbol.for("children")][0],r=s[12];const ve={};s[15]=this.element({parent:r||"root"},i),ve.x=63,ve.y=2,s[15].populate(ve);const xe=l.components&&l.components.Sprite||d.Sprite;r=s[15];const Se={};if(s[16]=this.element({parent:r||"root"},i),Se.image=i.image,Se.x=0,Se.h=20,Se.w=20,Se.map=i.sprite,Se.frame=i.avgFps[0],typeof xe<"u")for(let vt in xe.config.props)delete Se[xe.config.props[vt]];s[16].populate(Se),r=s[16];const be={};be.image=i.image,be.x=0,be.h=20,be.w=20,be.map=i.sprite,be.frame=i.avgFps[0],g=be.is||"Sprite";let Ee;if(typeof g=="string"){if(Ee=l.components&&l.components[g]||d[g],!Ee)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(Ee=g);s[17]=Ee.call(null,{props:be},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const _e=l.components&&l.components.Sprite||d.Sprite;r=s[15];const z={};if(s[18]=this.element({parent:r||"root"},i),z.image=i.image,z.x=18,z.h=20,z.w=20,z.map=i.sprite,z.frame=i.avgFps[1],typeof _e<"u")for(let vt in _e.config.props)delete z[_e.config.props[vt]];s[18].populate(z),r=s[18];const Re={};Re.image=i.image,Re.x=18,Re.h=20,Re.w=20,Re.map=i.sprite,Re.frame=i.avgFps[1],g=Re.is||"Sprite";let Ce;if(typeof g=="string"){if(Ce=l.components&&l.components[g]||d[g],!Ce)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(Ce=g);s[19]=Ce.call(null,{props:Re},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0];const oe=l.components&&l.components.Sprite||d.Sprite;r=s[15];const P={};if(s[20]=this.element({parent:r||"root"},i),P.image=i.image,P.x=36,P.h=20,P.w=20,P.map=i.sprite,P.frame=i.avgFps[2],typeof oe<"u")for(let vt in oe.config.props)delete P[oe.config.props[vt]];s[20].populate(P),r=s[20];const ge={};ge.image=i.image,ge.x=36,ge.h=20,ge.w=20,ge.map=i.sprite,ge.frame=i.avgFps[2],g=ge.is||"Sprite";let Te;if(typeof g=="string"){if(Te=l.components&&l.components[g]||d[g],!Te)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(Te=g);s[21]=Te.call(null,{props:ge},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0],r=s[1];const Fe={};s[22]=this.element({parent:r||"root"},i),Fe.x=0,Fe.y=40,s[22].populate(Fe);const ae=l.components&&l.components.Sprite||d.Sprite;r=s[22];const Ue={};if(s[23]=this.element({parent:r||"root"},i),Ue.image=i.image,Ue.x=-2,Ue.w=47,Ue.h=25,Ue.map=i.sprite,Ue.frame="min",typeof ae<"u")for(let vt in ae.config.props)delete Ue[ae.config.props[vt]];s[23].populate(Ue),r=s[23];const Y={};Y.image=i.image,Y.x=-2,Y.w=47,Y.h=25,Y.map=i.sprite,Y.frame="min",g=Y.is||"Sprite";let $;if(typeof g=="string"){if($=l.components&&l.components[g]||d[g],!$)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&($=g);s[24]=$.call(null,{props:Y},s[23],i),s[24][Symbol.for("slots")][0]?(r=s[24][Symbol.for("slots")][0],i=s[24]):r=s[24][Symbol.for("children")][0],r=s[22];const Ae={};s[25]=this.element({parent:r||"root"},i),Ae.x=58,Ae.y=2,s[25].populate(Ae);const De=l.components&&l.components.Sprite||d.Sprite;r=s[25];const Le={};if(s[26]=this.element({parent:r||"root"},i),Le.image=i.image,Le.x=0,Le.h=20,Le.w=20,Le.map=i.sprite,Le.frame=i.minFps[0],typeof De<"u")for(let vt in De.config.props)delete Le[De.config.props[vt]];s[26].populate(Le),r=s[26];const it={};it.image=i.image,it.x=0,it.h=20,it.w=20,it.map=i.sprite,it.frame=i.minFps[0],g=it.is||"Sprite";let zn;if(typeof g=="string"){if(zn=l.components&&l.components[g]||d[g],!zn)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(zn=g);s[27]=zn.call(null,{props:it},s[26],i),s[27][Symbol.for("slots")][0]?(r=s[27][Symbol.for("slots")][0],i=s[27]):r=s[27][Symbol.for("children")][0];const oo=l.components&&l.components.Sprite||d.Sprite;r=s[25];const gi={};if(s[28]=this.element({parent:r||"root"},i),gi.image=i.image,gi.x=18,gi.h=20,gi.w=20,gi.map=i.sprite,gi.frame=i.minFps[1],typeof oo<"u")for(let vt in oo.config.props)delete gi[oo.config.props[vt]];s[28].populate(gi),r=s[28];const yi={};yi.image=i.image,yi.x=18,yi.h=20,yi.w=20,yi.map=i.sprite,yi.frame=i.minFps[1],g=yi.is||"Sprite";let wt;if(typeof g=="string"){if(wt=l.components&&l.components[g]||d[g],!wt)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(wt=g);s[29]=wt.call(null,{props:yi},s[28],i),s[29][Symbol.for("slots")][0]?(r=s[29][Symbol.for("slots")][0],i=s[29]):r=s[29][Symbol.for("children")][0];const ke=l.components&&l.components.Sprite||d.Sprite;r=s[25];const Nt={};if(s[30]=this.element({parent:r||"root"},i),Nt.image=i.image,Nt.x=36,Nt.h=20,Nt.w=20,Nt.map=i.sprite,Nt.frame=i.minFps[2],typeof ke<"u")for(let vt in ke.config.props)delete Nt[ke.config.props[vt]];s[30].populate(Nt),r=s[30];const Zt={};Zt.image=i.image,Zt.x=36,Zt.h=20,Zt.w=20,Zt.map=i.sprite,Zt.frame=i.minFps[2],g=Zt.is||"Sprite";let Mn;if(typeof g=="string"){if(Mn=l.components&&l.components[g]||d[g],!Mn)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(Mn=g);s[31]=Mn.call(null,{props:Zt},s[30],i),s[31][Symbol.for("slots")][0]?(r=s[31][Symbol.for("slots")][0],i=s[31]):r=s[31][Symbol.for("children")][0],r=s[1];const Vn={};s[32]=this.element({parent:r||"root"},i),Vn.x=150,Vn.y=40,s[32].populate(Vn);const _n=l.components&&l.components.Sprite||d.Sprite;r=s[32];const nt={};if(s[33]=this.element({parent:r||"root"},i),nt.image=i.image,nt.w=53,nt.h=25,nt.map=i.sprite,nt.frame="max",typeof _n<"u")for(let vt in _n.config.props)delete nt[_n.config.props[vt]];s[33].populate(nt),r=s[33];const Ye={};Ye.image=i.image,Ye.w=53,Ye.h=25,Ye.map=i.sprite,Ye.frame="max",g=Ye.is||"Sprite";let Pt;if(typeof g=="string"){if(Pt=l.components&&l.components[g]||d[g],!Pt)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(Pt=g);s[34]=Pt.call(null,{props:Ye},s[33],i),s[34][Symbol.for("slots")][0]?(r=s[34][Symbol.for("slots")][0],i=s[34]):r=s[34][Symbol.for("children")][0],r=s[32];const Ve={};s[35]=this.element({parent:r||"root"},i),Ve.x=63,Ve.y=2,s[35].populate(Ve);const Xt=l.components&&l.components.Sprite||d.Sprite;r=s[35];const Et={};if(s[36]=this.element({parent:r||"root"},i),Et.image=i.image,Et.x=0,Et.h=20,Et.w=20,Et.map=i.sprite,Et.frame=i.maxFps[0],typeof Xt<"u")for(let vt in Xt.config.props)delete Et[Xt.config.props[vt]];s[36].populate(Et),r=s[36];const ni={};ni.image=i.image,ni.x=0,ni.h=20,ni.w=20,ni.map=i.sprite,ni.frame=i.maxFps[0],g=ni.is||"Sprite";let Mi;if(typeof g=="string"){if(Mi=l.components&&l.components[g]||d[g],!Mi)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(Mi=g);s[37]=Mi.call(null,{props:ni},s[36],i),s[37][Symbol.for("slots")][0]?(r=s[37][Symbol.for("slots")][0],i=s[37]):r=s[37][Symbol.for("children")][0];const nn=l.components&&l.components.Sprite||d.Sprite;r=s[35];const vn={};if(s[38]=this.element({parent:r||"root"},i),vn.image=i.image,vn.x=18,vn.h=20,vn.w=20,vn.map=i.sprite,vn.frame=i.maxFps[1],typeof nn<"u")for(let vt in nn.config.props)delete vn[nn.config.props[vt]];s[38].populate(vn),r=s[38];const xn={};xn.image=i.image,xn.x=18,xn.h=20,xn.w=20,xn.map=i.sprite,xn.frame=i.maxFps[1],g=xn.is||"Sprite";let ko;if(typeof g=="string"){if(ko=l.components&&l.components[g]||d[g],!ko)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(ko=g);s[39]=ko.call(null,{props:xn},s[38],i),s[39][Symbol.for("slots")][0]?(r=s[39][Symbol.for("slots")][0],i=s[39]):r=s[39][Symbol.for("children")][0];const wn=l.components&&l.components.Sprite||d.Sprite;r=s[35];const vi={};if(s[40]=this.element({parent:r||"root"},i),vi.image=i.image,vi.x=36,vi.h=20,vi.w=20,vi.map=i.sprite,vi.frame=i.maxFps[2],typeof wn<"u")for(let vt in wn.config.props)delete vi[wn.config.props[vt]];s[40].populate(vi),r=s[40];const ii={};ii.image=i.image,ii.x=36,ii.h=20,ii.w=20,ii.map=i.sprite,ii.frame=i.maxFps[2],g=ii.is||"Sprite";let ft;if(typeof g=="string"){if(ft=l.components&&l.components[g]||d[g],!ft)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(ft=g);return s[41]=ft.call(null,{props:ii},s[40],i),s[41][Symbol.for("slots")][0]?(r=s[41][Symbol.for("slots")][0],i=s[41]):r=s[41][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[6].set("frame",r.fps[0])},function(r,i,l,d,y,x){i[7][Symbol.for("props")].frame=r.fps[0]},function(r,i,l,d,y,x){i[8].set("frame",r.fps[1])},function(r,i,l,d,y,x){i[9][Symbol.for("props")].frame=r.fps[1]},function(r,i,l,d,y,x){i[10].set("frame",r.fps[2])},function(r,i,l,d,y,x){i[11][Symbol.for("props")].frame=r.fps[2]},function(r,i,l,d,y,x){i[16].set("frame",r.avgFps[0])},function(r,i,l,d,y,x){i[17][Symbol.for("props")].frame=r.avgFps[0]},function(r,i,l,d,y,x){i[18].set("frame",r.avgFps[1])},function(r,i,l,d,y,x){i[19][Symbol.for("props")].frame=r.avgFps[1]},function(r,i,l,d,y,x){i[20].set("frame",r.avgFps[2])},function(r,i,l,d,y,x){i[21][Symbol.for("props")].frame=r.avgFps[2]},function(r,i,l,d,y,x){i[26].set("frame",r.minFps[0])},function(r,i,l,d,y,x){i[27][Symbol.for("props")].frame=r.minFps[0]},function(r,i,l,d,y,x){i[28].set("frame",r.minFps[1])},function(r,i,l,d,y,x){i[29][Symbol.for("props")].frame=r.minFps[1]},function(r,i,l,d,y,x){i[30].set("frame",r.minFps[2])},function(r,i,l,d,y,x){i[31][Symbol.for("props")].frame=r.minFps[2]},function(r,i,l,d,y,x){i[36].set("frame",r.maxFps[0])},function(r,i,l,d,y,x){i[37][Symbol.for("props")].frame=r.maxFps[0]},function(r,i,l,d,y,x){i[38].set("frame",r.maxFps[1])},function(r,i,l,d,y,x){i[39][Symbol.for("props")].frame=r.maxFps[1]},function(r,i,l,d,y,x){i[40].set("frame",r.maxFps[2])},function(r,i,l,d,y,x){i[41][Symbol.for("props")].frame=r.maxFps[2]}],context:{}},state(){return{image:lk,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){let h=1e4,r=0,i=0,l=0,d=0;Fa.on("fpsUpdate",(y,{fps:x})=>{h=Math.min(x,h),r=Math.max(x,r),l+=x,d++,i=Math.round(l/d),this.fps=x.toString().padStart(3,"0"),this.avgFps=i.toString().padStart(3,"0"),this.minFps=h.toString().padStart(3,"0"),this.maxFps=r.toString().padStart(3,"0")})}}}),ck=()=>Io("Layout",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g[Symbol.for("isSlot")]=!0,g.ref="slot",s[0].populate(g),s},effects:[],context:{}},props:["direction",{key:"gap",default:0}],hooks:{ready(){this.___layout()}},methods:{___layout(){let h=0;this.select("slot").children.forEach(r=>{r.set(this.direction==="vertical"?"y":"x",h),h+=(r.node[this.direction==="vertical"?"height":"width"]||0)+(this.gap||0)})}}}),hk=()=>({Image:rk(),Circle:sk(),RouterView:ak(),Sprite:uk(),FPScounter:fk(),Layout:ck()});let hf;const Hx=h=>{throw new Error(`Parameter ${h} is required`)},Io=(h=Hx("name"),r=Hx("config"))=>{let i;const l=function(y,x,s,g){this.componentId=Vb(h),this.lifecycle=Object.assign(Object.create(Yb),{component:this,previous:null,current:null}),this.parent=s,this.rootParent=g,this[fe.holder]=x,this[fe.id]=Hb(),this[fe.props]=Tx(y.props||{},io.get("reactivityMode")),this[fe.timeouts]=[],this[fe.intervals]=[],this[fe.originalState]={...r.state&&typeof r.state=="function"&&r.state.apply(this)||{},hasFocus:!1},this[fe.state]=Tx(this[fe.originalState],io.get("reactivityMode")),this.lifecycle.state="init",this[fe.children]=r.code.render.apply(_f,[x,this,r,hf,Yl,fs])||[],this[fe.wrapper]=this[fe.children][0],this[fe.slots]=this[fe.children].filter(k=>k[fe.isSlot]),r.hooks&&(r.hooks.frameTick&&Fa.on("frameTick",(k,A)=>Yd("frameTick",this[fe.identifier],this,[A])),r.hooks.idle&&Fa.on("idle",()=>{Yd("idle",this[fe.identifier],this)}),r.hooks.attach&&this[fe.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),r.hooks.detach&&this[fe.wrapper].node.on("outOfBounds",(k,{previous:A})=>{A>0&&(this.lifecycle.state="detach")}),r.hooks.enter&&this[fe.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),r.hooks.exit&&this[fe.wrapper].node.on("outOfViewport",()=>{this.lifecycle.state="exit"}));for(let k=0;k<r.code.effects.length;k++)Yl(()=>{r.code.effects[k].apply(_f,[this,this[fe.children],r,hf,g,Yl])});return this[fe.watchers]&&Object.keys(this[fe.watchers]).forEach(k=>{let A=this[k];Yl((I=!1)=>{(A!==this[k]||I===!0)&&(this[fe.watchers][k].apply(this,[this[k],A]),A=this[k])})}),Object.getOwnPropertySymbols(this).forEach(k=>{Object.defineProperties(this,{[k]:{enumerable:!1,configurable:!1}})}),setTimeout(()=>this.lifecycle.state="ready"),this},d=(y={},x,s,g)=>(i||(Vt.debug(`Setting up ${h} component`),i=ok(Object.create(K3),r)),r.code||(Vt.debug(`Generating code for ${h} component`),r.code=Bb.call(r,Ub(r.template,h))),hf||(hf=hk()),l.call(Object.create(i),y,x,s,g));return d.config=r,d},dk=h=>{const r={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};h.hooks=h.hooks||{};let i,l,d;return h.hooks[fe.destroy]=function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",l)},h.hooks[fe.init]=function(){const y={...r,...io.get("keymap",{})};i=x=>{const s=y[x.key]||y[x.keyCode]||x.key||x.keyCode;Co.input(s,x),clearTimeout(d),d=setTimeout(()=>{Co.hold=!0},50)},l=()=>{clearTimeout(d),Co.hold=!1},document.addEventListener("keydown",i),document.addEventListener("keyup",l),setTimeout(()=>Co.set(this))},Io("App",h)},tt={Component:Io,Application:dk,Launch:I3},Gd=h=>new URLSearchParams(window.location.search).get(h),ba={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||Gd("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||Gd("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||Gd("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},pk=()=>{let h={};return Object.keys(ba).forEach(r=>{if(ba[r].test&&typeof ba[r].test=="function"&&ba[r].test()===!0){h=ba[r].mapping;return}}),h},mk="modulepreload",gk=function(h){return"/"+h},$x={},yk=function(r,i,l){if(!i||i.length===0)return r();const d=document.getElementsByTagName("link");return Promise.all(i.map(y=>{if(y=gk(y),y in $x)return;$x[y]=!0;const x=y.endsWith(".css"),s=x?'[rel="stylesheet"]':"";if(!!l)for(let A=d.length-1;A>=0;A--){const I=d[A];if(I.href===y&&(!x||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${s}`))return;const k=document.createElement("link");if(k.rel=x?"stylesheet":mk,x||(k.as="script",k.crossOrigin=""),k.href=y,document.head.appendChild(k),x)return new Promise((A,I)=>{k.addEventListener("load",A),k.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${y}`)))})})).then(()=>r()).catch(y=>{const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=y,window.dispatchEvent(x),!x.defaultPrevented)throw y})},vk=tt.Component("PortalItem",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=370,g.h=320,g.scale={transition:i.hasFocus?1.1:1},g.color=i.backgroundColor,g.effects=[i.shader("radius",{radius:6})],s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.x=30,k.y=30,k.content=i.number,k.size=84,k.color=i.fontColor,k.__textnode=!0,s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.x=30,A.y=140,A.content=i.title,A.size=42,A.font="raleway",A.color=i.fontColor,A.letterspacing=2,A.__textnode=!0,s[2].populate(A),r=s[0];const I={};return s[3]=this.element({parent:r||"root"},i),I.x=30,I.y=200,I.content=i.description,I.wordwrap=300,I.size=28,I.color=i.fontColor,I.lineheight=32,I.__textnode=!0,s[3].populate(I),s},effects:[function(r,i,l,d,y,x){i[0].set("scale",{transition:r.hasFocus?1.1:1})},function(r,i,l,d,y,x){i[0].set("color",r.backgroundColor)},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:6})])},function(r,i,l,d,y,x){i[1].set("content",r.number)},function(r,i,l,d,y,x){i[1].set("color",r.fontColor)},function(r,i,l,d,y,x){i[2].set("content",r.title)},function(r,i,l,d,y,x){i[2].set("color",r.fontColor)},function(r,i,l,d,y,x){i[3].set("content",r.description)},function(r,i,l,d,y,x){i[3].set("color",r.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),xk=tt.Component("PortalRow",{components:{PortalItem:vk},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.alpha={transition:{value:i.itemOffset<240?1:0,duration:200}},s[1].populate(A),r=s[1];const I={};s[2]=this.element({parent:r||"root"},i),I.content=i.title,I.x=60,I.__textnode=!0,s[2].populate(I),r=s[1];const M={};s[3]=this.element({parent:r||"root"},i),M.y=50,M.x=60,M.h=1,M.w=1800,M.color="0xe8d7f9ff",s[3].populate(M),r=s[0];const O={};s[4]=this.element({parent:r||"root"},i),O.y=100,O.x={transition:i.rowOffset},s[4].populate(O),r=s[4];const w=[],L=(F=[],U,W)=>{const X=x(F),Q=new Set(X.map(H=>""+H.id));let ee=W.length;for(;ee--;){const H=W[ee];Q.has(H)||(U[5][H]&&U[5][H].destroy(),delete U[5][H],U[6][H]&&U[6][H].destroy(),delete U[6][H])}W.length=0;const Z=F.length;for(let H=0;H<Z;H++){const J=Object.create(i);r=U[4],J.index=H,J.item=X[H],J.key=J.item.id,W.push(J.key);const le=l.components&&l.components.PortalItem||d.PortalItem;U[5]===void 0&&(U[5]={});const E={};if(U[5][J.key]||(U[5][J.key]=this.element({parent:r||"root"},i)),E.x={transition:{value:J.itemOffset+J.index*430,delay:50*(J.index%4),duration:500}},E.title=J.item.title,E.description=J.item.description,E.id=J.item.id,E.index=J.index,E.ref="item"+J.index,typeof le<"u")for(let re in le.config.props)delete E[le.config.props[re]];U[5][J.key].nodeId||U[5][J.key].populate(E),U[6]===void 0&&(U[6]={}),r=U[5][J.key];const j={};if(j.x={transition:{value:J.itemOffset+J.index*430,delay:50*(J.index%4),duration:500}},j.title=J.item.title,j.description=J.item.description,j.id=J.item.id,j.index=J.index,j.ref="item"+J.index,!U[6][J.key]){g=j.is||"PortalItem";let re;if(typeof g=="string"){if(re=l.components&&l.components[g]||d[g],!re)throw new Error('Component "PortalItem" not found')}else typeof g=="function"&&g.name==="factory"&&(re=g);U[6][J.key]=re.call(null,{props:j},U[5][J.key],i),U[6][J.key][Symbol.for("slots")][0]?(r=U[6][J.key][Symbol.for("slots")][0],i=U[6][J.key]):r=U[6][J.key][Symbol.for("children")][0]}J.item=F[H],y(()=>{U[5][J.key].set("ref","item"+J.index)},"items"),y(()=>{U[6][J.key][Symbol.for("props")].ref="item"+J.index},"items"),U[5][0]&&U[5][0].forComponent&&U[5][0].forComponent.___layout&&U[5][0].forComponent.___layout()}};return y(()=>{L(i.items,s,w)},"items"),y(()=>{i.itemOffset;for(let F=0;F<i.items.length;F++){const U={};U.index=F,U.item=i.items[F],U.key=U.item.id,s[5][U.key].set("x",{transition:{value:i.itemOffset+U.index*430,delay:50*(U.index%4),duration:500}})}}),y(()=>{i.itemOffset;for(let F=0;F<i.items.length;F++){const U={};U.index=F,U.item=i.items[F],U.key=U.item.id,s[6][U.key][Symbol.for("props")].x={transition:{value:i.itemOffset+U.index*430,delay:50*(U.index%4),duration:500}}}}),s},effects:[function(r,i,l,d,y,x){i[1].set("alpha",{transition:{value:r.itemOffset<240?1:0,duration:200}})},function(r,i,l,d,y,x){i[4].set("x",{transition:r.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.trigger("focused")}},watch:{focused(h){const r=this.select(`item${h}`);r&&r.focus&&(r.focus(),h<1?this.rowOffset=60:h>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-h*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),wk="@lightningjs/blits-example-app",Sk="1.0.1",Tk="Lightning 3 Blits Example App",Ck="index.js",Ek="module",Ak={start:"npm run dev","start:test":"NODE_ENV=testing npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host",test:"NODE_ENV=testing backstop --config=backstop.cjs test","test:reference":"NODE_ENV=testing backstop --config=backstop.cjs reference"},bk={hooks:{"pre-commit":"lint-staged"}},Ik="Michiel van der Geest <hello@michielvandergeest.com>",kk="Apache-2",Mk={backstopjs:"^6.3.22",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",playwright:"^1.41.0",prettier:"^2.5.1","shaka-player":"^4.7.1",vite:"^4.0.4"},_k={"@lightningjs/blits":"^1.0.0"},Rk={name:wk,version:Sk,description:Tk,main:Ck,type:Ek,scripts:Ak,"lint-staged":{"*.js":["eslint --fix"]},husky:bk,author:Ik,license:kk,devDependencies:Mk,dependencies:_k},Lk=tt.Component("Portal",{components:{PortalRow:xk},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),k.w=1920,k.h=1080,k.color="{top: '0x44037aff', bottom: '0x240244ff'}",s[0].populate(k);const A=l.components&&l.components.PortalRow||d.PortalRow;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.mount="{y: 0.5}",I.h=500,I.y={transition:-i.rowFocused*420+550},I.title="Demos",I.items=i.demo,I.ref="row0",typeof A<"u")for(let ie in A.config.props)delete I[A.config.props[ie]];s[1].populate(I),r=s[1];const M={};M.mount="{y: 0.5}",M.h=500,M.y={transition:-i.rowFocused*420+550},M.title="Demos",M.items=i.demo,M.ref="row0",g=M.is||"PortalRow";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "PortalRow" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const w=l.components&&l.components.PortalRow||d.PortalRow;r=s[0];const L={};if(s[3]=this.element({parent:r||"root"},i),L.mount="{y: 0.5}",L.h=500,L.y={transition:-i.rowFocused*420+1100},L.title="Examples and tests",L.items=i.example,L.ref="row1",typeof w<"u")for(let ie in w.config.props)delete L[w.config.props[ie]];s[3].populate(L),r=s[3];const F={};F.mount="{y: 0.5}",F.h=500,F.y={transition:-i.rowFocused*420+1100},F.title="Examples and tests",F.items=i.example,F.ref="row1",g=F.is||"PortalRow";let U;if(typeof g=="string"){if(U=l.components&&l.components[g]||d[g],!U)throw new Error('Component "PortalRow" not found')}else typeof g=="function"&&g.name==="factory"&&(U=g);s[4]=U.call(null,{props:F},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const W=l.components&&l.components.PortalRow||d.PortalRow;r=s[0];const X={};if(s[5]=this.element({parent:r||"root"},i),X.mount="{y: 0.5}",X.h=500,X.y={transition:-i.rowFocused*420+1650},X.title="Benchmarks and stress tests",X.items=i.benchmark,X.ref="row2",typeof W<"u")for(let ie in W.config.props)delete X[W.config.props[ie]];s[5].populate(X),r=s[5];const Q={};Q.mount="{y: 0.5}",Q.h=500,Q.y={transition:-i.rowFocused*420+1650},Q.title="Benchmarks and stress tests",Q.items=i.benchmark,Q.ref="row2",g=Q.is||"PortalRow";let ee;if(typeof g=="string"){if(ee=l.components&&l.components[g]||d[g],!ee)throw new Error('Component "PortalRow" not found')}else typeof g=="function"&&g.name==="factory"&&(ee=g);s[6]=ee.call(null,{props:Q},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0],r=s[0];const Z={};s[7]=this.element({parent:r||"root"},i),Z.w=1920,Z.h=200,Z.color="0x44037aff",s[7].populate(Z),r=s[7];const H={};s[8]=this.element({parent:r||"root"},i),H.w=1920,H.h=70,H.y=200,H.color="{top: '0x44037aff'}",s[8].populate(H),r=s[7];const J={};s[9]=this.element({parent:r||"root"},i),J.y={transition:{value:80-i.logoOffset,duration:400}},s[9].populate(J),r=s[9];const le={};s[10]=this.element({parent:r||"root"},i),le.src="assets/blits-logo-full.png",le.w=200,le.h=112,le.x=60,s[10].populate(le),r=s[9];const E={};s[11]=this.element({parent:r||"root"},i),E.w=2,E.h=120,E.y=-10,E.color="0xffffff80",E.x=300,s[11].populate(E),r=s[9];const j={};s[12]=this.element({parent:r||"root"},i),j.x=320,j.y=16,s[12].populate(j),r=s[12];const re={};s[13]=this.element({parent:r||"root"},i),re.y=0,re.size=36,re.content="Example App",re.__textnode=!0,s[13].populate(re),r=s[12];const ye={};return s[14]=this.element({parent:r||"root"},i),ye.y=50,ye.size=24,ye.content="v"+i.version,ye.__textnode=!0,s[14].populate(ye),s},effects:[function(r,i,l,d,y,x){i[1].set("y",{transition:-r.rowFocused*420+550})},function(r,i,l,d,y,x){i[2][Symbol.for("props")].y={transition:-r.rowFocused*420+550}},function(r,i,l,d,y,x){i[3].set("y",{transition:-r.rowFocused*420+1100})},function(r,i,l,d,y,x){i[4][Symbol.for("props")].y={transition:-r.rowFocused*420+1100}},function(r,i,l,d,y,x){i[5].set("y",{transition:-r.rowFocused*420+1650})},function(r,i,l,d,y,x){i[6][Symbol.for("props")].y={transition:-r.rowFocused*420+1650}},function(r,i,l,d,y,x){i[9].set("y",{transition:{value:80-r.logoOffset,duration:400}})}],context:{}},state(){return{version:Rk.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.trigger("rowFocused"),console.log("backstopjs:ready")}},watch:{rowFocused(h){const r=this.select(`row${h}`);r&&r.focus&&r.focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),Pk=tt.Component("Letter",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.w=i.w,k.h={transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},k.color="0xe6e6e6ff",s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.w=i.w,A.h=280,A.src=i.image,A.y={transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},s[2].populate(A),r=s[0];const I={};return s[3]=this.element({parent:r||"root"},i),I.w=i.w,I.color="0xe6e6e6ff",I.h={transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},I.y={transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},s[3].populate(I),s},effects:[function(r,i,l,d,y,x){i[1].set("h",{transition:{value:410+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,l,d,y,x){i[2].set("src",r.image)},function(r,i,l,d,y,x){i[2].set("y",{transition:{value:400+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,l,d,y,x){i[3].set("h",{transition:{value:500-r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,l,d,y,x){i[3].set("y",{transition:{value:660+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),Dk=tt.Component("Intro",{components:{Letter:Pk},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),k.w=1920,k.h=1080,k.src="assets/background.jpg",s[0].populate(k);const A=l.components&&l.components.Letter||d.Letter;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.letter="l",I.w=294,typeof A<"u")for(let Te in A.config.props)delete I[A.config.props[Te]];s[1].populate(I),r=s[1];const M={};M.letter="l",M.w=294,g=M.is||"Letter";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const w=l.components&&l.components.Letter||d.Letter;r=s[0];const L={};if(s[3]=this.element({parent:r||"root"},i),L.letter="i-1",L.w=128,L.x=294,L.direction="up",L.delay=50,typeof w<"u")for(let Te in w.config.props)delete L[w.config.props[Te]];s[3].populate(L),r=s[3];const F={};F.letter="i-1",F.w=128,F.x=294,F.direction="up",F.delay=50,g=F.is||"Letter";let U;if(typeof g=="string"){if(U=l.components&&l.components[g]||d[g],!U)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(U=g);s[4]=U.call(null,{props:F},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const W=l.components&&l.components.Letter||d.Letter;r=s[0];const X={};if(s[5]=this.element({parent:r||"root"},i),X.letter="g-1",X.w=205,X.x=422,X.delay=100,typeof W<"u")for(let Te in W.config.props)delete X[W.config.props[Te]];s[5].populate(X),r=s[5];const Q={};Q.letter="g-1",Q.w=205,Q.x=422,Q.delay=100,g=Q.is||"Letter";let ee;if(typeof g=="string"){if(ee=l.components&&l.components[g]||d[g],!ee)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(ee=g);s[6]=ee.call(null,{props:Q},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0];const Z=l.components&&l.components.Letter||d.Letter;r=s[0];const H={};if(s[7]=this.element({parent:r||"root"},i),H.letter="h",H.w=224,H.x=627,H.direction="up",H.delay=150,typeof Z<"u")for(let Te in Z.config.props)delete H[Z.config.props[Te]];s[7].populate(H),r=s[7];const J={};J.letter="h",J.w=224,J.x=627,J.direction="up",J.delay=150,g=J.is||"Letter";let le;if(typeof g=="string"){if(le=l.components&&l.components[g]||d[g],!le)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(le=g);s[8]=le.call(null,{props:J},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],i=s[8]):r=s[8][Symbol.for("children")][0];const E=l.components&&l.components.Letter||d.Letter;r=s[0];const j={};if(s[9]=this.element({parent:r||"root"},i),j.letter="t",j.w=190,j.x=851,j.delay=200,typeof E<"u")for(let Te in E.config.props)delete j[E.config.props[Te]];s[9].populate(j),r=s[9];const re={};re.letter="t",re.w=190,re.x=851,re.delay=200,g=re.is||"Letter";let ye;if(typeof g=="string"){if(ye=l.components&&l.components[g]||d[g],!ye)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(ye=g);s[10]=ye.call(null,{props:re},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],i=s[10]):r=s[10][Symbol.for("children")][0];const ie=l.components&&l.components.Letter||d.Letter;r=s[0];const se={};if(s[11]=this.element({parent:r||"root"},i),se.letter="n-1",se.w=221,se.x=1041,se.direction="up",se.delay=250,typeof ie<"u")for(let Te in ie.config.props)delete se[ie.config.props[Te]];s[11].populate(se),r=s[11];const ne={};ne.letter="n-1",ne.w=221,ne.x=1041,ne.direction="up",ne.delay=250,g=ne.is||"Letter";let ue;if(typeof g=="string"){if(ue=l.components&&l.components[g]||d[g],!ue)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(ue=g);s[12]=ue.call(null,{props:ne},s[11],i),s[12][Symbol.for("slots")][0]?(r=s[12][Symbol.for("slots")][0],i=s[12]):r=s[12][Symbol.for("children")][0];const ve=l.components&&l.components.Letter||d.Letter;r=s[0];const xe={};if(s[13]=this.element({parent:r||"root"},i),xe.letter="i-2",xe.w=115,xe.x=1262,xe.delay=300,typeof ve<"u")for(let Te in ve.config.props)delete xe[ve.config.props[Te]];s[13].populate(xe),r=s[13];const Se={};Se.letter="i-2",Se.w=115,Se.x=1262,Se.delay=300,g=Se.is||"Letter";let be;if(typeof g=="string"){if(be=l.components&&l.components[g]||d[g],!be)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(be=g);s[14]=be.call(null,{props:Se},s[13],i),s[14][Symbol.for("slots")][0]?(r=s[14][Symbol.for("slots")][0],i=s[14]):r=s[14][Symbol.for("children")][0];const Ee=l.components&&l.components.Letter||d.Letter;r=s[0];const _e={};if(s[15]=this.element({parent:r||"root"},i),_e.letter="n-2",_e.w=219,_e.x=1377,_e.direction="up",_e.delay=350,typeof Ee<"u")for(let Te in Ee.config.props)delete _e[Ee.config.props[Te]];s[15].populate(_e),r=s[15];const z={};z.letter="n-2",z.w=219,z.x=1377,z.direction="up",z.delay=350,g=z.is||"Letter";let Re;if(typeof g=="string"){if(Re=l.components&&l.components[g]||d[g],!Re)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(Re=g);s[16]=Re.call(null,{props:z},s[15],i),s[16][Symbol.for("slots")][0]?(r=s[16][Symbol.for("slots")][0],i=s[16]):r=s[16][Symbol.for("children")][0];const Ce=l.components&&l.components.Letter||d.Letter;r=s[0];const oe={};if(s[17]=this.element({parent:r||"root"},i),oe.letter="g-2",oe.w=324,oe.x=1596,oe.direction="up",oe.delay=400,typeof Ce<"u")for(let Te in Ce.config.props)delete oe[Ce.config.props[Te]];s[17].populate(oe),r=s[17];const P={};P.letter="g-2",P.w=324,P.x=1596,P.direction="up",P.delay=400,g=P.is||"Letter";let ge;if(typeof g=="string"){if(ge=l.components&&l.components[g]||d[g],!ge)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g.name==="factory"&&(ge=g);return s[18]=ge.call(null,{props:P},s[17],i),s[18][Symbol.for("slots")][0]?(r=s[18][Symbol.for("slots")][0],i=s[18]):r=s[18][Symbol.for("children")][0],s},effects:[],context:{}}}),Nk=tt.Component("Toggle",{code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),k.w=100,k.h=50,k.y=5,k.color=i.bgColor,k.effects=[i.shader("radius",{radius:25})],s[0].populate(k);const A=l.components&&l.components.Circle||d.Circle;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.x={transition:i.on?0:50},I.size=50,typeof A<"u")for(let w in A.config.props)delete I[A.config.props[w]];s[1].populate(I),r=s[1];const M={};M.x={transition:i.on?0:50},M.size=50,M.color=i.primaryColor,g=M.is||"Circle";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "Circle" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);return s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[0].set("color",r.bgColor)},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:25})])},function(r,i,l,d,y,x){i[1].set("x",{transition:r.on?0:50})},function(r,i,l,d,y,x){i[2][Symbol.for("props")].x={transition:r.on?0:50}},function(r,i,l,d,y,x){i[2][Symbol.for("props")].color=r.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),Ok=tt.Component("Bar",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w={value:i.w,duration:i.duration},g.h={value:i.h,duration:i.duration},g.color=i.bgColor,g.x=i.index*(i.w+i.w/4),g.effects=[i.shader("radius",{radius:10})],s[0].populate(g),r=s[0];const k={};return s[1]=this.element({parent:r||"root"},i),k.w=i.w,k.y={transition:{value:i.h-i.innerH,duration:i.duration}},k.h={transition:{value:i.innerH,duration:i.duration}},k.color=i.primaryColor,k.effects=[i.shader("radius",{radius:10})],s[1].populate(k),s},effects:[function(r,i,l,d,y,x){i[0].set("w",{value:r.w,duration:r.duration})},function(r,i,l,d,y,x){i[0].set("h",{value:r.h,duration:r.duration})},function(r,i,l,d,y,x){i[0].set("color",r.bgColor)},function(r,i,l,d,y,x){i[0].set("x",r.index*(r.w+r.w/4))},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:10})])},function(r,i,l,d,y,x){i[1].set("w",r.w)},function(r,i,l,d,y,x){i[1].set("y",{transition:{value:r.h-r.innerH,duration:r.duration}})},function(r,i,l,d,y,x){i[1].set("h",{transition:{value:r.innerH,duration:r.duration}})},function(r,i,l,d,y,x){i[1].set("color",r.primaryColor)},function(r,i,l,d,y,x){i[1].set("effects",[r.shader("radius",{radius:10})])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),Uk={color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"},Bk={color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},jk=tt.Component("Theming",{components:{Bar:Ok,Toggle:Nk},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),k.w=1920,k.h=1080,k.color={transition:i.colors.bg},s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.y=1020,A.x=1160,A.size=28,A.color=i.colors.color4,A.content='Use "up", "down", "left" and "right" to change the appearance',A.__textnode=!0,s[1].populate(A),r=s[0];const I={};s[2]=this.element({parent:r||"root"},i),I.x={transition:(1920-i.width)/2},I.y={transition:(1080-i.height)/2},s[2].populate(I),r=s[2];const M={};s[3]=this.element({parent:r||"root"},i),M.x=-250,M.y=-100,M.src="assets/shadow.png",M.w=1e3,M.h=900,M.alpha=.5,s[3].populate(M),r=s[2];const O={};s[4]=this.element({parent:r||"root"},i),O.w={transition:i.width},O.h={transition:i.height},O.color=i.colors.color1,O.effects=[i.shader("radius",{radius:i.radius})],s[4].populate(O),r=s[4];const w={};s[5]=this.element({parent:r||"root"},i),w.w={transition:i.width},w.h=100,w.color=i.colors.color2,w.effects=[i.shader("radius",{radius:i.radius})],s[5].populate(w),r=s[4];const L={};s[6]=this.element({parent:r||"root"},i),L.w={transition:i.width},L.h=80,L.y=20,L.color=i.colors.color2,s[6].populate(L),r=s[4];const F={};s[7]=this.element({parent:r||"root"},i),F.content=i.text,F.color=i.colors.color3,F.size=28,F.x=20,F.y=14,F.__textnode=!0,s[7].populate(F);const U=l.components&&l.components.Toggle||d.Toggle;r=s[4];const W={};if(s[8]=this.element({parent:r||"root"},i),W.x={transition:i.width-120},W.on=i.mode==="dark",W.bgColor=i.colors.color1,W.primaryColor="#22c55e",typeof U<"u")for(let ge in U.config.props)delete W[U.config.props[ge]];s[8].populate(W),r=s[8];const X={};X.x={transition:i.width-120},X.on=i.mode==="dark",X.bgColor=i.colors.color1,X.primaryColor="#22c55e",g=X.is||"Toggle";let Q;if(typeof g=="string"){if(Q=l.components&&l.components[g]||d[g],!Q)throw new Error('Component "Toggle" not found')}else typeof g=="function"&&g.name==="factory"&&(Q=g);s[9]=Q.call(null,{props:X},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0],r=s[2];const ee={};s[10]=this.element({parent:r||"root"},i),ee.w=200,ee.h={transition:i.block1.height},ee.x=25,ee.y=140,ee.color=i.colors.color2,ee.effects=[i.shader("radius",{radius:i.radius/2})],s[10].populate(ee),r=s[2];const Z={};s[11]=this.element({parent:r||"root"},i),Z.w={transition:i.block2.w},Z.h=i.block2.h,Z.x=270,Z.y={transition:i.block2.y},Z.color=i.colors.color2,Z.effects=[i.shader("radius",{radius:i.radius/2})],s[11].populate(Z),r=s[2];const H={};s[12]=this.element({parent:r||"root"},i),H.x={transition:i.graph.x},H.y={transition:i.graph.y},H.w=i.graph.w,H.h=i.graph.h,H.color="0x00000000",s[12].populate(H),r=s[12];const J={};s[13]=this.element({parent:r||"root"},i),J.x={transition:i.graph.offset},J.y={transition:i.graph.offset},s[13].populate(J);const le=l.components&&l.components.Bar||d.Bar;r=s[13];const E={};if(s[14]=this.element({parent:r||"root"},i),E.bgColor=i.colors.color2,E.primaryColor=i.colors.color4,E.size=i.graph.size,E.height=100,E.index=0,typeof le<"u")for(let ge in le.config.props)delete E[le.config.props[ge]];s[14].populate(E),r=s[14];const j={};j.bgColor=i.colors.color2,j.primaryColor=i.colors.color4,j.size=i.graph.size,j.height=100,j.index=0,g=j.is||"Bar";let re;if(typeof g=="string"){if(re=l.components&&l.components[g]||d[g],!re)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g.name==="factory"&&(re=g);s[15]=re.call(null,{props:j},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const ye=l.components&&l.components.Bar||d.Bar;r=s[13];const ie={};if(s[16]=this.element({parent:r||"root"},i),ie.bgColor=i.colors.color2,ie.primaryColor=i.colors.color4,ie.size=i.graph.size,ie.height=140,ie.index=1,typeof ye<"u")for(let ge in ye.config.props)delete ie[ye.config.props[ge]];s[16].populate(ie),r=s[16];const se={};se.bgColor=i.colors.color2,se.primaryColor=i.colors.color4,se.size=i.graph.size,se.height=140,se.index=1,g=se.is||"Bar";let ne;if(typeof g=="string"){if(ne=l.components&&l.components[g]||d[g],!ne)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g.name==="factory"&&(ne=g);s[17]=ne.call(null,{props:se},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const ue=l.components&&l.components.Bar||d.Bar;r=s[13];const ve={};if(s[18]=this.element({parent:r||"root"},i),ve.bgColor=i.colors.color2,ve.primaryColor=i.colors.color4,ve.size=i.graph.size,ve.height=170,ve.index=2,typeof ue<"u")for(let ge in ue.config.props)delete ve[ue.config.props[ge]];s[18].populate(ve),r=s[18];const xe={};xe.bgColor=i.colors.color2,xe.primaryColor=i.colors.color4,xe.size=i.graph.size,xe.height=170,xe.index=2,g=xe.is||"Bar";let Se;if(typeof g=="string"){if(Se=l.components&&l.components[g]||d[g],!Se)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g.name==="factory"&&(Se=g);s[19]=Se.call(null,{props:xe},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0];const be=l.components&&l.components.Bar||d.Bar;r=s[13];const Ee={};if(s[20]=this.element({parent:r||"root"},i),Ee.bgColor=i.colors.color2,Ee.primaryColor=i.colors.color4,Ee.size=i.graph.size,Ee.height=150,Ee.index=3,typeof be<"u")for(let ge in be.config.props)delete Ee[be.config.props[ge]];s[20].populate(Ee),r=s[20];const _e={};_e.bgColor=i.colors.color2,_e.primaryColor=i.colors.color4,_e.size=i.graph.size,_e.height=150,_e.index=3,g=_e.is||"Bar";let z;if(typeof g=="string"){if(z=l.components&&l.components[g]||d[g],!z)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g.name==="factory"&&(z=g);s[21]=z.call(null,{props:_e},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0];const Re=l.components&&l.components.Bar||d.Bar;r=s[13];const Ce={};if(s[22]=this.element({parent:r||"root"},i),Ce.bgColor=i.colors.color2,Ce.primaryColor=i.colors.color4,Ce.size=i.graph.size,Ce.height=90,Ce.index=4,typeof Re<"u")for(let ge in Re.config.props)delete Ce[Re.config.props[ge]];s[22].populate(Ce),r=s[22];const oe={};oe.bgColor=i.colors.color2,oe.primaryColor=i.colors.color4,oe.size=i.graph.size,oe.height=90,oe.index=4,g=oe.is||"Bar";let P;if(typeof g=="string"){if(P=l.components&&l.components[g]||d[g],!P)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g.name==="factory"&&(P=g);return s[23]=P.call(null,{props:oe},s[22],i),s[23][Symbol.for("slots")][0]?(r=s[23][Symbol.for("slots")][0],i=s[23]):r=s[23][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[0].set("color",{transition:r.colors.bg})},function(r,i,l,d,y,x){i[1].set("color",r.colors.color4)},function(r,i,l,d,y,x){i[2].set("x",{transition:(1920-r.width)/2})},function(r,i,l,d,y,x){i[2].set("y",{transition:(1080-r.height)/2})},function(r,i,l,d,y,x){i[4].set("w",{transition:r.width})},function(r,i,l,d,y,x){i[4].set("h",{transition:r.height})},function(r,i,l,d,y,x){i[4].set("color",r.colors.color1)},function(r,i,l,d,y,x){i[4].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,l,d,y,x){i[5].set("w",{transition:r.width})},function(r,i,l,d,y,x){i[5].set("color",r.colors.color2)},function(r,i,l,d,y,x){i[5].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,l,d,y,x){i[6].set("w",{transition:r.width})},function(r,i,l,d,y,x){i[6].set("color",r.colors.color2)},function(r,i,l,d,y,x){i[7].set("content",r.text)},function(r,i,l,d,y,x){i[7].set("color",r.colors.color3)},function(r,i,l,d,y,x){i[8].set("x",{transition:r.width-120})},function(r,i,l,d,y,x){i[8].set("on",r.mode==="dark")},function(r,i,l,d,y,x){i[8].set("bgColor",r.colors.color1)},function(r,i,l,d,y,x){i[9][Symbol.for("props")].x={transition:r.width-120}},function(r,i,l,d,y,x){i[9][Symbol.for("props")].on=r.mode==="dark"},function(r,i,l,d,y,x){i[9][Symbol.for("props")].bgColor=r.colors.color1},function(r,i,l,d,y,x){i[10].set("h",{transition:r.block1.height})},function(r,i,l,d,y,x){i[10].set("color",r.colors.color2)},function(r,i,l,d,y,x){i[10].set("effects",[r.shader("radius",{radius:r.radius/2})])},function(r,i,l,d,y,x){i[11].set("w",{transition:r.block2.w})},function(r,i,l,d,y,x){i[11].set("h",r.block2.h)},function(r,i,l,d,y,x){i[11].set("y",{transition:r.block2.y})},function(r,i,l,d,y,x){i[11].set("color",r.colors.color2)},function(r,i,l,d,y,x){i[11].set("effects",[r.shader("radius",{radius:r.radius/2})])},function(r,i,l,d,y,x){i[12].set("x",{transition:r.graph.x})},function(r,i,l,d,y,x){i[12].set("y",{transition:r.graph.y})},function(r,i,l,d,y,x){i[12].set("w",r.graph.w)},function(r,i,l,d,y,x){i[12].set("h",r.graph.h)},function(r,i,l,d,y,x){i[13].set("x",{transition:r.graph.offset})},function(r,i,l,d,y,x){i[13].set("y",{transition:r.graph.offset})},function(r,i,l,d,y,x){i[14].set("bgColor",r.colors.color2)},function(r,i,l,d,y,x){i[14].set("primaryColor",r.colors.color4)},function(r,i,l,d,y,x){i[14].set("size",r.graph.size)},function(r,i,l,d,y,x){i[15][Symbol.for("props")].bgColor=r.colors.color2},function(r,i,l,d,y,x){i[15][Symbol.for("props")].primaryColor=r.colors.color4},function(r,i,l,d,y,x){i[15][Symbol.for("props")].size=r.graph.size},function(r,i,l,d,y,x){i[16].set("bgColor",r.colors.color2)},function(r,i,l,d,y,x){i[16].set("primaryColor",r.colors.color4)},function(r,i,l,d,y,x){i[16].set("size",r.graph.size)},function(r,i,l,d,y,x){i[17][Symbol.for("props")].bgColor=r.colors.color2},function(r,i,l,d,y,x){i[17][Symbol.for("props")].primaryColor=r.colors.color4},function(r,i,l,d,y,x){i[17][Symbol.for("props")].size=r.graph.size},function(r,i,l,d,y,x){i[18].set("bgColor",r.colors.color2)},function(r,i,l,d,y,x){i[18].set("primaryColor",r.colors.color4)},function(r,i,l,d,y,x){i[18].set("size",r.graph.size)},function(r,i,l,d,y,x){i[19][Symbol.for("props")].bgColor=r.colors.color2},function(r,i,l,d,y,x){i[19][Symbol.for("props")].primaryColor=r.colors.color4},function(r,i,l,d,y,x){i[19][Symbol.for("props")].size=r.graph.size},function(r,i,l,d,y,x){i[20].set("bgColor",r.colors.color2)},function(r,i,l,d,y,x){i[20].set("primaryColor",r.colors.color4)},function(r,i,l,d,y,x){i[20].set("size",r.graph.size)},function(r,i,l,d,y,x){i[21][Symbol.for("props")].bgColor=r.colors.color2},function(r,i,l,d,y,x){i[21][Symbol.for("props")].primaryColor=r.colors.color4},function(r,i,l,d,y,x){i[21][Symbol.for("props")].size=r.graph.size},function(r,i,l,d,y,x){i[22].set("bgColor",r.colors.color2)},function(r,i,l,d,y,x){i[22].set("primaryColor",r.colors.color4)},function(r,i,l,d,y,x){i[22].set("size",r.graph.size)},function(r,i,l,d,y,x){i[23][Symbol.for("props")].bgColor=r.colors.color2},function(r,i,l,d,y,x){i[23][Symbol.for("props")].primaryColor=r.colors.color4},function(r,i,l,d,y,x){i[23][Symbol.for("props")].size=r.graph.size}],context:{}},state(){return{mode:"dark",radius:20,width:500,height:600}},computed:{colors(){return this.mode==="dark"?Uk:Bk},text(){return this.mode==="dark"?"Dark mode":"Light mode"},block1(){return{height:this.height===600?180:720}},block2(){return{y:this.height===600?140:560,h:this.height===600?180:300,w:this.height===600?200:890}},graph(){return{x:this.height===600?32:270,y:this.height===600?370:140,w:this.height===600?0:890,h:this.height===600?0:400,offset:this.height===600?0:110,size:this.height===600?"small":"large"}}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.width=1200,this.height=900},down(){this.width=500,this.height=600}}}),Fk="ABC123",zk="https://8b4fa39d.lightningjs.workers.dev";let L2,P2;const Vk="w185",Hk={headers:{"Content-Type":"application/json",Authorization:"Bearer "+Fk}};function Gx(h,r=Vk){return P2+r+h}function $k(...h){return L2?hp(...h):D2().then(()=>hp(...h))}function hp(h,r={}){return fetch(zk+h,{...Hk,...r}).then(i=>i.json())}function D2(){return hp("/configuration").then(h=>(L2=h,P2=h.images.secure_base_url,h))}const Sp={get:$k,loadConfig:D2},Wx=h=>Sp.get(`/${h}/popular`).then(N2),N2=h=>h.results.filter(i=>!i.adult).map(i=>({poster:Gx(i.poster_path||i.profile_path),background:Gx(i.backdrop_path,"w1280"),identifier:i.id,title:i.title||i.name,overview:i.overview})),Ia=h=>{const r=Array.isArray(h)?h:[h];return Gk("movie").then(({genres:i})=>{let l=[];return i.forEach(d=>{r.includes(d.name)&&l.push(d.id)}),Sp.get(`/discover/movie?with_genres=${l.join()}`).then(N2)})},Gk=h=>Sp.get(`/genre/${h}/list`),Wk=tt.Component("Poster",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=1280,g.h=720,g.x=i.x,g.src=i.item.background,g.color="{top: '0xffffffff', bottom: '0x000000ff'}",g.scale={transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},g._effects=[i.shader("radius",{radius:8})],s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(k),r=s[1];const A={};s[2]=this.element({parent:r||"root"},i),A.w=185,A.h=278,A.x=54,A.y=220,A.src=i.item.poster,s[2].populate(A),r=s[1];const I={};s[3]=this.element({parent:r||"root"},i),I.content=i.item.title,I.font="raleway",I.y=520,I.x=54,I.size=64,I.wordwrap=1e3,I.maxlines=1,I.__textnode=!0,s[3].populate(I),r=s[1];const M={};return s[4]=this.element({parent:r||"root"},i),M.content=i.item.overview,M.size=21,M.y=620,M.x=60,M.color="0xccccccff",M.wordwrap=1e3,M.maxlines=2,M.lineheight=36,M.__textnode=!0,s[4].populate(M),s},effects:[function(r,i,l,d,y,x){i[0].set("src",r.item.background)},function(r,i,l,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])},function(r,i,l,d,y,x){i[1].set("alpha",{transition:{value:r.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[2].set("src",r.item.poster)},function(r,i,l,d,y,x){i[3].set("content",r.item.title)},function(r,i,l,d,y,x){i[4].set("content",r.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),Xk=tt.Component("Poster",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=185,g.h=278,g.x=i.x,g.src=i.item.poster,g.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},g._effects=[i.shader("radius",{radius:8})],s[0].populate(g),s},effects:[function(r,i,l,d,y,x){i[0].set("src",r.item.poster)},function(r,i,l,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),Kk=tt.Component("PosterTitle",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=185,g.h=278,g.x=i.x,g.src=i.item.poster,g.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},g._effects=[i.shader("radius",{radius:8})],s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.x=10,k.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},k.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(k),r=s[1];const A={};return s[2]=this.element({parent:r||"root"},i),A.content=i.item.title,A.font="raleway",A.size=22,A.wordwrap=185,A.maxlines=2,A.lineheight=28,A.__textnode=!0,s[2].populate(A),s},effects:[function(r,i,l,d,y,x){i[0].set("src",r.item.poster)},function(r,i,l,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])},function(r,i,l,d,y,x){i[1].set("y",{transition:{value:r.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[1].set("alpha",{transition:{value:r.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[2].set("content",r.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),Yk=tt.Component("TmdbRow",{components:{Hero:Wk,Poster:Xk,PosterTitle:Kk},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.x={transition:{value:i.x,duration:300,easing:"ease-in-out"}},A.y=80,s[1].populate(A),r=s[1];const I=[],M=(O=[],w,L)=>{const F=x(O),U=new Set(F.map(Q=>""+Q.identifier));let W=L.length;for(;W--;){const Q=L[W];U.has(Q)||(w[2][Q]&&w[2][Q].destroy(),delete w[2][Q],w[3][Q]&&w[3][Q].destroy(),delete w[3][Q])}L.length=0;const X=O.length;for(let Q=0;Q<X;Q++){const ee=Object.create(i);r=w[1],ee.index=Q,ee.item=F[Q],ee.key=ee.item.identifier,ee.__ref="poster"+Q,L.push(ee.key);const Z=l.components&&l.components.Component||d.Component;w[2]===void 0&&(w[2]={});const H={};if(w[2][ee.key]||(w[2][ee.key]=this.element({parent:r||"root"},i)),H.is=ee.type,H.index=ee.index,H.item=ee.item,H.ref=ee.__ref,H.width=ee.width,typeof Z<"u")for(let le in Z.config.props)delete H[Z.config.props[le]];w[2][ee.key].nodeId||w[2][ee.key].populate(H),w[3]===void 0&&(w[3]={}),r=w[2][ee.key];const J={};if(J.is=ee.type,J.index=ee.index,J.item=ee.item,J.ref=ee.__ref,J.width=ee.width,!w[3][ee.key]){g=J.is||"Component";let le;if(typeof g=="string"){if(le=l.components&&l.components[g]||d[g],!le)throw new Error('Component "Component" not found')}else typeof g=="function"&&g.name==="factory"&&(le=g);w[3][ee.key]=le.call(null,{props:J},w[2][ee.key],i),w[3][ee.key][Symbol.for("slots")][0]?(r=w[3][ee.key][Symbol.for("slots")][0],i=w[3][ee.key]):r=w[3][ee.key][Symbol.for("children")][0]}ee.item=O[Q],w[2][0]&&w[2][0].forComponent&&w[2][0].forComponent.___layout&&w[2][0].forComponent.___layout()}};return y(()=>{M(i.items,s,I)},"items"),s},effects:[function(r,i,l,d,y,x){i[1].set("x",{transition:{value:r.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.trigger("focused")}},computed:{x(){return 150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(h){const r=this.select("poster"+h);r&&r.focus&&(r.focus(),this.$emit("posterSelect",this.items[h]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),qk=tt.Component("Background",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.src=i.bg1,k.w=1920,k.h=1080,k.color="{top: '0xffffffff', bottom: '0x000000ff'}",k.alpha={transition:{value:i.alpha1,duration:400,easing:"ease-in"}},s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.src=i.bg2,A.w=1920,A.h=1080,A.color="{top: '0xffffffff', bottom: '0x000000ff'}",A.alpha={transition:{value:i.alpha2,duration:400,easing:"ease-in"}},s[2].populate(A),r=s[0];const I={};return s[3]=this.element({parent:r||"root"},i),I.w=1920,I.h=1080,I.src="assets/gradient.png",I.color="0x8866ddff",I.alpha=.8,s[3].populate(I),s},effects:[function(r,i,l,d,y,x){i[1].set("src",r.bg1)},function(r,i,l,d,y,x){i[1].set("alpha",{transition:{value:r.alpha1,duration:400,easing:"ease-in"}})},function(r,i,l,d,y,x){i[2].set("src",r.bg2)},function(r,i,l,d,y,x){i[2].set("alpha",{transition:{value:r.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["src"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{src(h){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=h,this.alpha1=.8,this.alpha2=0):(this.bg2=h,this.alpha1=0,this.alpha2=.8)}}}),Qk=tt.Component("TMdb",{components:{Background:qk,TmdbRow:Yk},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),k.w=1920,k.h=1080,k.color="0x000000ff",s[0].populate(k);const A=l.components&&l.components.Background||d.Background;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.src=i.src,typeof A<"u")for(let Z in A.config.props)delete I[A.config.props[Z]];s[1].populate(I),r=s[1];const M={};M.src=i.src,g=M.is||"Background";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "Background" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],r=s[0];const w={};s[3]=this.element({parent:r||"root"},i),s[3].populate(w),r=s[3];const L={};s[4]=this.element({parent:r||"root"},i),L.y={transition:{value:i.contentY,duration:i.duration}},L.alpha={transition:{value:i.alpha,duration:i.duration}},s[4].populate(L),r=s[4];const F={};s[5]=this.element({parent:r||"root"},i),F.src="assets/logo.png",F.x=140,F.y=90,F.w=243,F.h=52,s[5].populate(F),r=s[4];const U={};s[6]=this.element({parent:r||"root"},i),U.content=i.title,U.font="raleway",U.size=80,U.x=140,U.y=300,U.wordwrap=1e3,U["@loaded"]=i.positionText&&i.positionText.bind(i),U.maxlines=1,U.__textnode=!0,s[6].populate(U),r=s[4];const W={};s[7]=this.element({parent:r||"root"},i),W.content=i.overview,W.wordwrap=880,W.x=140,W.y=430,W.lineheight=40,W.maxlines=3,W.__textnode=!0,s[7].populate(W),r=s[3];const X={};s[8]=this.element({parent:r||"root"},i),X.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[8].populate(X),r=s[8];const Q=[],ee=(Z=[],H,J)=>{const le=x(Z),E=new Set(le.map(ye=>""+ye.title));let j=J.length;for(;j--;){const ye=J[j];E.has(ye)||(H[9][ye]&&H[9][ye].destroy(),delete H[9][ye],H[10][ye]&&H[10][ye].destroy(),delete H[10][ye])}J.length=0;const re=Z.length;for(let ye=0;ye<re;ye++){const ie=Object.create(i);r=H[8],ie.index=ye,ie.row=le[ye],ie.key=ie.row.title,ie.__ref="row"+ye,J.push(ie.key);const se=l.components&&l.components.TmdbRow||d.TmdbRow;H[9]===void 0&&(H[9]={});const ne={};if(H[9][ie.key]||(H[9][ie.key]=this.element({parent:r||"root"},i)),ne.title=ie.row.title,ne.items=ie.row.items,ne.type=ie.row.type,ne.width=ie.row.width,ne.y=ie.row.y,ne.ref=ie.__ref,typeof se<"u")for(let ve in se.config.props)delete ne[se.config.props[ve]];H[9][ie.key].nodeId||H[9][ie.key].populate(ne),H[10]===void 0&&(H[10]={}),r=H[9][ie.key];const ue={};if(ue.title=ie.row.title,ue.items=ie.row.items,ue.type=ie.row.type,ue.width=ie.row.width,ue.y=ie.row.y,ue.ref=ie.__ref,!H[10][ie.key]){g=ue.is||"TmdbRow";let ve;if(typeof g=="string"){if(ve=l.components&&l.components[g]||d[g],!ve)throw new Error('Component "TmdbRow" not found')}else typeof g=="function"&&g.name==="factory"&&(ve=g);H[10][ie.key]=ve.call(null,{props:ue},H[9][ie.key],i),H[10][ie.key][Symbol.for("slots")][0]?(r=H[10][ie.key][Symbol.for("slots")][0],i=H[10][ie.key]):r=H[10][ie.key][Symbol.for("children")][0]}ie.row=Z[ye],y(()=>{H[9][ie.key].set("items",ie.row.items)},null),y(()=>{H[9][ie.key].set("type",ie.row.type)},null),y(()=>{H[9][ie.key].set("width",ie.row.width)},null),y(()=>{H[10][ie.key][Symbol.for("props")].items=ie.row.items},null),y(()=>{H[10][ie.key][Symbol.for("props")].type=ie.row.type},null),y(()=>{H[10][ie.key][Symbol.for("props")].width=ie.row.width},null),H[9][0]&&H[9][0].forComponent&&H[9][0].forComponent.___layout&&H[9][0].forComponent.___layout()}};return y(()=>{ee(i.rows,s,Q)},"rows"),s},effects:[function(r,i,l,d,y,x){i[1].set("src",r.src)},function(r,i,l,d,y,x){i[2][Symbol.for("props")].src=r.src},function(r,i,l,d,y,x){i[4].set("y",{transition:{value:r.contentY,duration:r.duration}})},function(r,i,l,d,y,x){i[4].set("alpha",{transition:{value:r.alpha,duration:r.duration}})},function(r,i,l,d,y,x){i[6].set("content",r.title)},function(r,i,l,d,y,x){i[7].set("content",r.overview)},function(r,i,l,d,y,x){i[8].set("y",{transition:{value:r.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],items:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(h){const r=this.select("row"+h);r&&r.focus&&r.focus()}},hooks:{async ready(){this.$listen("posterSelect",h=>{this.focused===0&&(this.src=h.background,this.title=h.title,this.overview=h.overview)}),this.rows.push({title:"Popular Movies",items:await Wx("movie"),type:"Poster",width:215,y:0}),this.rows.push({title:"Best Western movies",items:await Ia(["Western"]),type:"Hero",width:1370,y:358}),this.rows.push({title:"Best Comedy movies",items:await Ia(["Comedy"]),type:"PosterTitle",width:215,y:1158}),this.rows.push({title:"Popular TV shows",items:await Wx("tv"),type:"PosterTitle",width:215,y:1536}),this.rows.push({title:"Best Adventure and Action movies",items:await Ia(["adventure","action"]),type:"Hero",width:1370,y:1914}),this.rows.push({title:"Best Documentaries",items:await Ia("Documentary"),type:"PosterTitle",width:215,y:2714}),this.rows.push({title:"Best Western movies 2",items:await Ia("Western"),type:"PosterTitle",width:215,y:3092}),this.focused=0},focus(){this.trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),Zk=tt.Component("MenuSprite",{code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.src="assets/menusprite.png",A.x=748,A.y=120,A.w=425,A.h=340,s[1].populate(A),r=s[0];const I={};s[2]=this.element({parent:r||"root"},i),I.y=680,I.x=560,s[2].populate(I);const M=l.components&&l.components.Sprite||d.Sprite;r=s[2];const O={};if(s[3]=this.element({parent:r||"root"},i),O.image="assets/menusprite.png",O.x=0,O.w=140,O.h=140,O.map=i.map,O.frame=i.icon1,typeof M<"u")for(let re in M.config.props)delete O[M.config.props[re]];s[3].populate(O),r=s[3];const w={};w.image="assets/menusprite.png",w.x=0,w.w=140,w.h=140,w.map=i.map,w.frame=i.icon1,g=w.is||"Sprite";let L;if(typeof g=="string"){if(L=l.components&&l.components[g]||d[g],!L)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(L=g);s[4]=L.call(null,{props:w},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const F=l.components&&l.components.Sprite||d.Sprite;r=s[2];const U={};if(s[5]=this.element({parent:r||"root"},i),U.image="assets/menusprite.png",U.x=220,U.w=140,U.h=140,U.map=i.map,U.frame="icon2",typeof F<"u")for(let re in F.config.props)delete U[F.config.props[re]];s[5].populate(U),r=s[5];const W={};W.image="assets/menusprite.png",W.x=220,W.w=140,W.h=140,W.map=i.map,W.frame="icon2",g=W.is||"Sprite";let X;if(typeof g=="string"){if(X=l.components&&l.components[g]||d[g],!X)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(X=g);s[6]=X.call(null,{props:W},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0];const Q=l.components&&l.components.Sprite||d.Sprite;r=s[2];const ee={};if(s[7]=this.element({parent:r||"root"},i),ee.image="assets/menusprite.png",ee.x=440,ee.w=140,ee.h=140,ee.map=i.map,ee.frame="icon3",typeof Q<"u")for(let re in Q.config.props)delete ee[Q.config.props[re]];s[7].populate(ee),r=s[7];const Z={};Z.image="assets/menusprite.png",Z.x=440,Z.w=140,Z.h=140,Z.map=i.map,Z.frame="icon3",g=Z.is||"Sprite";let H;if(typeof g=="string"){if(H=l.components&&l.components[g]||d[g],!H)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(H=g);s[8]=H.call(null,{props:Z},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],i=s[8]):r=s[8][Symbol.for("children")][0];const J=l.components&&l.components.Sprite||d.Sprite;r=s[2];const le={};if(s[9]=this.element({parent:r||"root"},i),le.image="assets/menusprite.png",le.x=660,le.w=140,le.h=140,le.map=i.map,le.frame="icon4_unfocus",typeof J<"u")for(let re in J.config.props)delete le[J.config.props[re]];s[9].populate(le),r=s[9];const E={};E.image="assets/menusprite.png",E.x=660,E.w=140,E.h=140,E.map=i.map,E.frame="icon4_unfocus",g=E.is||"Sprite";let j;if(typeof g=="string"){if(j=l.components&&l.components[g]||d[g],!j)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g.name==="factory"&&(j=g);return s[10]=j.call(null,{props:E},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],i=s[10]):r=s[10][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[3].set("frame",r.icon1)},function(r,i,l,d,y,x){i[4][Symbol.for("props")].frame=r.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),df=["menu"],Jk=tt.Component("Sprites",{components:{MenuSprite:Zk},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k);const A=l.components&&l.components.MenuSprite||d.MenuSprite;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.show=i.currentSprite==="menu",typeof A<"u")for(let w in A.config.props)delete I[A.config.props[w]];s[1].populate(I),r=s[1];const M={};M.show=i.currentSprite==="menu",g=M.is||"MenuSprite";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "MenuSprite" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);return s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[1].set("show",r.currentSprite==="menu")},function(r,i,l,d,y,x){i[2][Symbol.for("props")].show=r.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const h=df.indexOf(this.currentSprite);h<df.length-1?this.currentSprite=df[h+1]:this.currentSprite=df[0]}}}),O2=tt.Component("Button",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=300,g.h=80,g.color=i.color,g.effects=[i.shader("radius",{radius:20})],g.alpha={transition:i.alpha},g.scale={transition:i.scale},g.z=i.zIndex,g.rotation=i.rotate,s[0].populate(g),s},effects:[function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20})])},function(r,i,l,d,y,x){i[0].set("alpha",{transition:r.alpha})},function(r,i,l,d,y,x){i[0].set("scale",{transition:r.scale})},function(r,i,l,d,y,x){i[0].set("z",r.zIndex)},function(r,i,l,d,y,x){i[0].set("rotation",r.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,zIndex:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1,this.zIndex=100},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.zIndex=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),eM=tt.Component("Menu",{components:{Button:O2},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),k.x={transition:i.x},k.w=400,k.h=1080,k.color="{right: '0x64748baa', left: '0x475569aa'}",s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.x=50,A.y=40,s[1].populate(A);const I=l.components&&l.components.Button||d.Button;r=s[1];const M={};if(s[2]=this.element({parent:r||"root"},i),M.color="0xe4e4e7ff",M.ref="menu1",typeof I<"u")for(let j in I.config.props)delete M[I.config.props[j]];s[2].populate(M),r=s[2];const O={};O.color="0xe4e4e7ff",O.ref="menu1",g=O.is||"Button";let w;if(typeof g=="string"){if(w=l.components&&l.components[g]||d[g],!w)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(w=g);s[3]=w.call(null,{props:O},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],i=s[3]):r=s[3][Symbol.for("children")][0];const L=l.components&&l.components.Button||d.Button;r=s[1];const F={};if(s[4]=this.element({parent:r||"root"},i),F.color="0xe4e4e7ff",F.y=100,F.ref="menu2",typeof L<"u")for(let j in L.config.props)delete F[L.config.props[j]];s[4].populate(F),r=s[4];const U={};U.color="0xe4e4e7ff",U.y=100,U.ref="menu2",g=U.is||"Button";let W;if(typeof g=="string"){if(W=l.components&&l.components[g]||d[g],!W)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(W=g);s[5]=W.call(null,{props:U},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],i=s[5]):r=s[5][Symbol.for("children")][0];const X=l.components&&l.components.Button||d.Button;r=s[1];const Q={};if(s[6]=this.element({parent:r||"root"},i),Q.color="0xe4e4e7ff",Q.y=200,Q.ref="menu3",typeof X<"u")for(let j in X.config.props)delete Q[X.config.props[j]];s[6].populate(Q),r=s[6];const ee={};ee.color="0xe4e4e7ff",ee.y=200,ee.ref="menu3",g=ee.is||"Button";let Z;if(typeof g=="string"){if(Z=l.components&&l.components[g]||d[g],!Z)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(Z=g);s[7]=Z.call(null,{props:ee},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],i=s[7]):r=s[7][Symbol.for("children")][0];const H=l.components&&l.components.Button||d.Button;r=s[1];const J={};if(s[8]=this.element({parent:r||"root"},i),J.color="0xe4e4e7ff",J.y=300,J.ref="menu4",typeof H<"u")for(let j in H.config.props)delete J[H.config.props[j]];s[8].populate(J),r=s[8];const le={};le.color="0xe4e4e7ff",le.y=300,le.ref="menu4",g=le.is||"Button";let E;if(typeof g=="string"){if(E=l.components&&l.components[g]||d[g],!E)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(E=g);return s[9]=E.call(null,{props:le},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[0].set("x",{transition:r.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.trigger("focused"),this.x=0}},watch:{focused(){const h=this.select(`menu${this.focused}`);h&&h.focus&&h.focus()}},input:{right(){this.parent.focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),tM=tt.Component("FocusHandling",{components:{Menu:eM,Button:O2},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.x=300,A.y=150,s[1].populate(A);const I=l.components&&l.components.Button||d.Button;r=s[1];const M={};if(s[2]=this.element({parent:r||"root"},i),M.color="0xef4444ff",M.x=0,M.ref="button1",typeof I<"u")for(let $ in I.config.props)delete M[I.config.props[$]];s[2].populate(M),r=s[2];const O={};O.color="0xef4444ff",O.x=0,O.ref="button1",g=O.is||"Button";let w;if(typeof g=="string"){if(w=l.components&&l.components[g]||d[g],!w)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(w=g);s[3]=w.call(null,{props:O},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],i=s[3]):r=s[3][Symbol.for("children")][0];const L=l.components&&l.components.Button||d.Button;r=s[1];const F={};if(s[4]=this.element({parent:r||"root"},i),F.color="0xf97316ff",F.x=320,F.ref="button2",typeof L<"u")for(let $ in L.config.props)delete F[L.config.props[$]];s[4].populate(F),r=s[4];const U={};U.color="0xf97316ff",U.x=320,U.ref="button2",g=U.is||"Button";let W;if(typeof g=="string"){if(W=l.components&&l.components[g]||d[g],!W)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(W=g);s[5]=W.call(null,{props:U},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],i=s[5]):r=s[5][Symbol.for("children")][0];const X=l.components&&l.components.Button||d.Button;r=s[1];const Q={};if(s[6]=this.element({parent:r||"root"},i),Q.color="0x84cc16ff",Q.x=640,Q.ref="button3",typeof X<"u")for(let $ in X.config.props)delete Q[X.config.props[$]];s[6].populate(Q),r=s[6];const ee={};ee.color="0x84cc16ff",ee.x=640,ee.ref="button3",g=ee.is||"Button";let Z;if(typeof g=="string"){if(Z=l.components&&l.components[g]||d[g],!Z)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(Z=g);s[7]=Z.call(null,{props:ee},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],i=s[7]):r=s[7][Symbol.for("children")][0];const H=l.components&&l.components.Button||d.Button;r=s[1];const J={};if(s[8]=this.element({parent:r||"root"},i),J.color="0x10b981ff",J.x=0,J.y=100,J.ref="button4",typeof H<"u")for(let $ in H.config.props)delete J[H.config.props[$]];s[8].populate(J),r=s[8];const le={};le.color="0x10b981ff",le.x=0,le.y=100,le.ref="button4",g=le.is||"Button";let E;if(typeof g=="string"){if(E=l.components&&l.components[g]||d[g],!E)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(E=g);s[9]=E.call(null,{props:le},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0];const j=l.components&&l.components.Button||d.Button;r=s[1];const re={};if(s[10]=this.element({parent:r||"root"},i),re.color="0x06b6d4ff",re.y=100,re.x=320,re.ref="button5",typeof j<"u")for(let $ in j.config.props)delete re[j.config.props[$]];s[10].populate(re),r=s[10];const ye={};ye.color="0x06b6d4ff",ye.y=100,ye.x=320,ye.ref="button5",g=ye.is||"Button";let ie;if(typeof g=="string"){if(ie=l.components&&l.components[g]||d[g],!ie)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(ie=g);s[11]=ie.call(null,{props:ye},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],i=s[11]):r=s[11][Symbol.for("children")][0];const se=l.components&&l.components.Button||d.Button;r=s[1];const ne={};if(s[12]=this.element({parent:r||"root"},i),ne.color="0x3b82f6ff",ne.y=100,ne.x=640,ne.ref="button6",typeof se<"u")for(let $ in se.config.props)delete ne[se.config.props[$]];s[12].populate(ne),r=s[12];const ue={};ue.color="0x3b82f6ff",ue.y=100,ue.x=640,ue.ref="button6",g=ue.is||"Button";let ve;if(typeof g=="string"){if(ve=l.components&&l.components[g]||d[g],!ve)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(ve=g);s[13]=ve.call(null,{props:ue},s[12],i),s[13][Symbol.for("slots")][0]?(r=s[13][Symbol.for("slots")][0],i=s[13]):r=s[13][Symbol.for("children")][0];const xe=l.components&&l.components.Button||d.Button;r=s[1];const Se={};if(s[14]=this.element({parent:r||"root"},i),Se.color="0x8b5cf6ff",Se.y=200,Se.x=0,Se.ref="button7",typeof xe<"u")for(let $ in xe.config.props)delete Se[xe.config.props[$]];s[14].populate(Se),r=s[14];const be={};be.color="0x8b5cf6ff",be.y=200,be.x=0,be.ref="button7",g=be.is||"Button";let Ee;if(typeof g=="string"){if(Ee=l.components&&l.components[g]||d[g],!Ee)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(Ee=g);s[15]=Ee.call(null,{props:be},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const _e=l.components&&l.components.Button||d.Button;r=s[1];const z={};if(s[16]=this.element({parent:r||"root"},i),z.color="0xd946efff",z.y=200,z.x=320,z.ref="button8",typeof _e<"u")for(let $ in _e.config.props)delete z[_e.config.props[$]];s[16].populate(z),r=s[16];const Re={};Re.color="0xd946efff",Re.y=200,Re.x=320,Re.ref="button8",g=Re.is||"Button";let Ce;if(typeof g=="string"){if(Ce=l.components&&l.components[g]||d[g],!Ce)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(Ce=g);s[17]=Ce.call(null,{props:Re},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const oe=l.components&&l.components.Button||d.Button;r=s[1];const P={};if(s[18]=this.element({parent:r||"root"},i),P.color="0xf43f5eff",P.y=200,P.x=640,P.ref="button9",typeof oe<"u")for(let $ in oe.config.props)delete P[oe.config.props[$]];s[18].populate(P),r=s[18];const ge={};ge.color="0xf43f5eff",ge.y=200,ge.x=640,ge.ref="button9",g=ge.is||"Button";let Te;if(typeof g=="string"){if(Te=l.components&&l.components[g]||d[g],!Te)throw new Error('Component "Button" not found')}else typeof g=="function"&&g.name==="factory"&&(Te=g);s[19]=Te.call(null,{props:ge},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0];const Fe=l.components&&l.components.Menu||d.Menu;r=s[0];const ae={};if(s[20]=this.element({parent:r||"root"},i),ae.ref="menu",typeof Fe<"u")for(let $ in Fe.config.props)delete ae[Fe.config.props[$]];s[20].populate(ae),r=s[20];const Ue={};Ue.ref="menu",g=Ue.is||"Menu";let Y;if(typeof g=="string"){if(Y=l.components&&l.components[g]||d[g],!Y)throw new Error('Component "Menu" not found')}else typeof g=="function"&&g.name==="factory"&&(Y=g);return s[21]=Y.call(null,{props:Ue},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0],s},effects:[],context:{}},state(){return{focused:1}},hooks:{focus(){this.trigger("focused")}},watch:{focused(h){const r=this.select(`button${h}`);r&&r.focus&&r.focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const h=this.focused-1;if(h===0){const r=this.select("menu");r&&r.focus&&r.focus()}else this.focused=Math.max(h,1)},a(){const h=this.select("menu");h&&h.focus&&h.focus()}}}),nM=tt.Component("Positioning",{code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.w=100,A.h=100,A.x=20,A.y=20,A.color="0xecfeffff",s[1].populate(A),r=s[0];const I={};s[2]=this.element({parent:r||"root"},i),I.w=100,I.h=100,I.x=140,I.y=20,I.color="0xa5f3fcff",s[2].populate(I),r=s[0];const M={};s[3]=this.element({parent:r||"root"},i),M.w=100,M.h=100,M.x=260,M.y=20,M.color="0x22d3eeff",s[3].populate(M),r=s[0];const O={};s[4]=this.element({parent:r||"root"},i),O.w=100,O.h=100,O.x=380,O.y=20,O.color="0x0891b2ff",s[4].populate(O),r=s[0];const w={};s[5]=this.element({parent:r||"root"},i),w.w=100,w.h=100,w.x=i.x1,w.y=i.y,w.color="0xfdf4ffff",s[5].populate(w),r=s[0];const L={};s[6]=this.element({parent:r||"root"},i),L.w=100,L.h=100,L.x=i.x2,L.y=i.y,L.color="0xf5d0feff",s[6].populate(L),r=s[0];const F={};s[7]=this.element({parent:r||"root"},i),F.w=100,F.h=100,F.x=i.x3,F.y=i.y,F.color="0xe879f9ff",s[7].populate(F),r=s[0];const U={};s[8]=this.element({parent:r||"root"},i),U.w=100,U.h=100,U.x=i.x4,U.y=i.y,U.color="0xc026d3ff",s[8].populate(U),r=s[0];const W={};s[9]=this.element({parent:r||"root"},i),W.w=100,W.h=100,W.x=i.xA,W.y=260,W.color="0xfff7edff",s[9].populate(W),r=s[0];const X={};s[10]=this.element({parent:r||"root"},i),X.w=100,X.h=100,X.x=i.xB,X.y=260,X.color="0xfed7aaff",s[10].populate(X),r=s[0];const Q={};s[11]=this.element({parent:r||"root"},i),Q.w=100,Q.h=100,Q.x=i.xC,Q.y=260,Q.color="0xfb923cff",s[11].populate(Q),r=s[0];const ee={};s[12]=this.element({parent:r||"root"},i),ee.w=100,ee.h=100,ee.x=i.xD,ee.y=260,ee.color="0xea580cff",s[12].populate(ee),r=s[0];const Z={};s[13]=this.element({parent:r||"root"},i),Z.w=800,Z.h=800,Z.y=20,Z.x=800,Z.color="0xecfdf5ff",s[13].populate(Z),r=s[13];const H={};s[14]=this.element({parent:r||"root"},i),H.w=600,H.h=600,H.y=20,H.x=20,H.color="0xa7f3d0ff",s[14].populate(H),r=s[14];const J={};s[15]=this.element({parent:r||"root"},i),J.w=400,J.h=400,J.y=100,J.x=20,J.color="0x34d399ff",s[15].populate(J),r=s[15];const le={};s[16]=this.element({parent:r||"root"},i),le.w=200,le.h=100,le.y=(400-100)/2,le.x=(400-200)/2,le.color="0x059669ff",s[16].populate(le),r=s[16];const E={};s[17]=this.element({parent:r||"root"},i),E.w=50,E.h=50,E.y={transition:i.yNested},E.x={transition:i.xNested},E.color="0x065f46ff",s[17].populate(E),r=s[0];const j={};s[18]=this.element({parent:r||"root"},i),j.w=100,j.h=100,j.y=500,j.x=20,j.color="0xe11d48ff",s[18].populate(j),r=s[0];const re={};s[19]=this.element({parent:r||"root"},i),re.w=200,re.h=200,re.x=300,re.y=600,re.color="0x94a3b8ff",re.z=100,s[19].populate(re),r=s[19];const ye={};s[20]=this.element({parent:r||"root"},i),ye.content="Lightning!",ye.x=100,ye.y=140,ye.__textnode=!0,s[20].populate(ye),r=s[19];const ie={};s[21]=this.element({parent:r||"root"},i),ie.w=300,ie.h=100,ie.color="0x475569ff",s[21].populate(ie);const se=l.components&&l.components.Circle||d.Circle;r=s[19];const ne={};if(s[22]=this.element({parent:r||"root"},i),ne.x=150,ne.y=150,ne.size=100,ne.color="0xffffffff",typeof se<"u")for(let z in se.config.props)delete ne[se.config.props[z]];s[22].populate(ne),r=s[22];const ue={};ue.x=150,ue.y=150,ue.size=100,ue.color="0xffffffff",g=ue.is||"Circle";let ve;if(typeof g=="string"){if(ve=l.components&&l.components[g]||d[g],!ve)throw new Error('Component "Circle" not found')}else typeof g=="function"&&g.name==="factory"&&(ve=g);s[23]=ve.call(null,{props:ue},s[22],i),s[23][Symbol.for("slots")][0]?(r=s[23][Symbol.for("slots")][0],i=s[23]):r=s[23][Symbol.for("children")][0],r=s[0];const xe={};s[24]=this.element({parent:r||"root"},i),xe.w=300,xe.h=300,xe.x=300,xe.y=600,xe.color="0xef444480",s[24].populate(xe),r=s[0];const Se={};s[25]=this.element({parent:r||"root"},i),Se.w=400,Se.h=100,Se.x=800,Se.y=900,Se.color="0x0284c7ff",s[25].populate(Se),r=s[25];const be={};s[26]=this.element({parent:r||"root"},i),be.w=r.node.width*(42/100),be.h=r.node.height*(30/100),be.y=r.node.height*(5/100),be.x=r.node.width*(1/100),be.color="0x075985ff",s[26].populate(be),r=s[25];const Ee={};s[27]=this.element({parent:r||"root"},i),Ee.w=i.bar2.v,Ee.h=r.node.height*(30/100),Ee.y=r.node.height*(35/100),Ee.x=r.node.width*(1/100),Ee.color="0x6b21a8ff",s[27].populate(Ee),r=s[25];const _e={};return s[28]=this.element({parent:r||"root"},i),_e.w={transition:i.bar3},_e.h=r.node.height*(30/100),_e.y=r.node.height*(65/100),_e.x=r.node.width*(1/100),_e.color="0x9f1239ff",s[28].populate(_e),s},effects:[function(r,i,l,d,y,x){i[9].set("x",r.xA)},function(r,i,l,d,y,x){i[10].set("x",r.xB)},function(r,i,l,d,y,x){i[11].set("x",r.xC)},function(r,i,l,d,y,x){i[12].set("x",r.xD)},function(r,i,l,d,y,x){i[16].set("y",(400-100)/2)},function(r,i,l,d,y,x){i[16].set("x",(400-200)/2)},function(r,i,l,d,y,x){i[17].set("y",{transition:r.yNested})},function(r,i,l,d,y,x){i[17].set("x",{transition:r.xNested})},function(r,i,l,d,y,x){i[27].set("w",r.bar2.v)},function(r,i,l,d,y,x){i[28].set("w",{transition:r.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const h=parseFloat(this.bar2.v),r=this.bar2.direction==="up"?h+10:h-10;this.bar2.v=r+"%",r>=90&&(this.bar2.direction="down"),r<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var iM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oM(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var U2={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(h){(function(){var r=typeof window<"u"?window:iM,i={};(function(d,y,x){var s;function g(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var k=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function A(e){e=[typeof globalThis=="object"&&globalThis,e,typeof d=="object"&&d,typeof self=="object"&&self,typeof y=="object"&&y];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var I=A(this);function M(e,t){if(t)e:{var n=I;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))break e;n=n[a]}e=e[e.length-1],o=n[e],t=t(o),t!=o&&t!=null&&k(n,e,{configurable:!0,writable:!0,value:t})}}M("Symbol",function(e){function t(u){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(o+(u||"")+"_"+a++,u)}function n(u,f){this.g=u,k(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return t}),M("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var o=I[t[n]];typeof o=="function"&&typeof o.prototype[e]!="function"&&k(o.prototype,e,{configurable:!0,writable:!0,value:function(){return O(g(this))}})}return e});function O(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function w(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:g(e)}}function L(e){if(!(e instanceof Array)){e=w(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var F=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},U;if(typeof Object.setPrototypeOf=="function")U=Object.setPrototypeOf;else{var W;e:{var X={a:!0},Q={};try{Q.__proto__=X,W=Q.a;break e}catch{}W=!1}U=W?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var ee=U;function Z(e,t){if(e.prototype=F(t.prototype),e.prototype.constructor=e,ee)ee(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(e,n,o)}else e[n]=t[n];e.ej=t.prototype}function H(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function J(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}H.prototype.s=function(e){this.h=e};function le(e,t){e.i={Mf:t,Xf:!0},e.g=e.m||e.j}H.prototype.return=function(e){this.i={return:e},this.g=this.j};function E(e,t,n){return e.g=n,{value:t}}H.prototype.B=function(e){this.g=e};function j(e){e.g=0}function re(e,t,n){e.m=t,n!=null&&(e.j=n)}function ye(e,t){e.m=0,e.j=t||0}function ie(e,t,n){e.g=t,e.m=n||0}function se(e,t){return e.m=t||0,t=e.i.Mf,e.i=null,t}function ne(e){e.u=[e.i],e.m=0,e.j=0}function ue(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.Xf?e.g=e.m||e.j:n.B!=null&&e.j<n.B?(e.g=n.B,e.i=null):e.g=e.j:e.g=t}function ve(e){this.g=new H,this.h=e}function xe(e,t){J(e.g);var n=e.g.l;return n?Se(e,"return"in n?n.return:function(o){return{value:o,done:!0}},t,e.g.return):(e.g.return(t),be(e))}function Se(e,t,n,o){try{var a=t.call(e.g.l,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.o=!1,a;var u=a.value}catch(f){return e.g.l=null,le(e.g,f),be(e)}return e.g.l=null,o.call(e.g,u),be(e)}function be(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,le(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Xf)throw t.Mf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Ee(e){this.next=function(t){return J(e.g),e.g.l?t=Se(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=be(e)),t},this.throw=function(t){return J(e.g),e.g.l?t=Se(e,e.g.l.throw,t,e.g.s):(le(e.g,t),t=be(e)),t},this.return=function(t){return xe(e,t)},this[Symbol.iterator]=function(){return this}}function _e(e){function t(o){return e.next(o)}function n(o){return e.throw(o)}return new Promise(function(o,a){function u(f){f.done?o(f.value):Promise.resolve(f.value).then(t,n).then(u,a)}u(e.next())})}function z(e){return _e(new Ee(new ve(e)))}function Re(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}M("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var c=this.j();try{f(c.resolve,c.reject)}catch(p){c.reject(p)}}function n(){this.g=null}function o(f){return f instanceof t?f:new t(function(c){c(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var c=this;this.i(function(){c.l()})}this.g.push(f)};var a=I.setTimeout;n.prototype.i=function(f){a(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var c=0;c<f.length;++c){var p=f[c];f[c]=null;try{p()}catch(m){this.j(m)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(m){return function(v){p||(p=!0,m.call(c,v))}}var c=this,p=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var c=f!=null;break e;case"function":c=!0;break e;default:c=!1}c?this.C(f):this.m(f)}},t.prototype.C=function(f){var c=void 0;try{c=f.then}catch(p){this.l(p);return}typeof c=="function"?this.I(c,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,c){if(this.h!=0)throw Error("Cannot settle("+f+", "+c+"): Promise already settled in state"+this.h);this.h=f,this.i=c,this.h===2&&this.G(),this.u()},t.prototype.G=function(){var f=this;a(function(){if(f.A()){var c=I.console;typeof c<"u"&&c.error(f.i)}},1)},t.prototype.A=function(){if(this.o)return!1;var f=I.CustomEvent,c=I.Event,p=I.dispatchEvent;return typeof p>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof c=="function"?f=new c("unhandledrejection",{cancelable:!0}):(f=I.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,p(f))},t.prototype.u=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)u.h(this.g[f]);this.g=null}};var u=new n;return t.prototype.H=function(f){var c=this.j();f.rd(c.resolve,c.reject)},t.prototype.I=function(f,c){var p=this.j();try{f.call(c,p.resolve,p.reject)}catch(m){p.reject(m)}},t.prototype.then=function(f,c){function p(C,T){return typeof C=="function"?function(b){try{m(C(b))}catch(_){v(_)}}:T}var m,v,S=new t(function(C,T){m=C,v=T});return this.rd(p(f,m),p(c,v)),S},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.rd=function(f,c){function p(){switch(m.h){case 1:f(m.i);break;case 2:c(m.i);break;default:throw Error("Unexpected state: "+m.h)}}var m=this;this.g==null?u.h(p):this.g.push(p),this.o=!0},t.resolve=o,t.reject=function(f){return new t(function(c,p){p(f)})},t.race=function(f){return new t(function(c,p){for(var m=w(f),v=m.next();!v.done;v=m.next())o(v.value).rd(c,p)})},t.all=function(f){var c=w(f),p=c.next();return p.done?o([]):new t(function(m,v){function S(b){return function(_){C[b]=_,T--,T==0&&m(C)}}var C=[],T=0;do C.push(void 0),T++,o(p.value).rd(S(C.length-1),v),p=c.next();while(!p.done)})},t});function Ce(e,t){return Object.prototype.hasOwnProperty.call(e,t)}M("WeakMap",function(e){function t(p){if(this.g=(c+=Math.random()+1).toString(),p){p=w(p);for(var m;!(m=p.next()).done;)m=m.value,this.set(m[0],m[1])}}function n(){}function o(p){var m=typeof p;return m==="object"&&p!==null||m==="function"}function a(p){if(!Ce(p,f)){var m=new n;k(p,f,{value:m})}}function u(p){var m=Object[p];m&&(Object[p]=function(v){return v instanceof n?v:(Object.isExtensible(v)&&a(v),m(v))})}if(function(){if(!e||!Object.seal)return!1;try{var p=Object.seal({}),m=Object.seal({}),v=new e([[p,2],[m,3]]);return v.get(p)!=2||v.get(m)!=3?!1:(v.delete(p),v.set(m,4),!v.has(p)&&v.get(m)==4)}catch{return!1}}())return e;var f="$jscomp_hidden_"+Math.random();u("freeze"),u("preventExtensions"),u("seal");var c=0;return t.prototype.set=function(p,m){if(!o(p))throw Error("Invalid WeakMap key");if(a(p),!Ce(p,f))throw Error("WeakMap key fail: "+p);return p[f][this.g]=m,this},t.prototype.get=function(p){return o(p)&&Ce(p,f)?p[f][this.g]:void 0},t.prototype.has=function(p){return o(p)&&Ce(p,f)&&Ce(p[f],this.g)},t.prototype.delete=function(p){return o(p)&&Ce(p,f)&&Ce(p[f],this.g)?delete p[f][this.g]:!1},t}),M("Map",function(e){function t(){var c={};return c.sb=c.next=c.head=c}function n(c,p){var m=c.g;return O(function(){if(m){for(;m.head!=c.g;)m=m.sb;for(;m.next!=m.head;)return m=m.next,{done:!1,value:p(m)};m=null}return{done:!0,value:void 0}})}function o(c,p){var m=p&&typeof p;m=="object"||m=="function"?u.has(p)?m=u.get(p):(m=""+ ++f,u.set(p,m)):m="p_"+p;var v=c.h[m];if(v&&Ce(c.h,m))for(c=0;c<v.length;c++){var S=v[c];if(p!==p&&S.key!==S.key||p===S.key)return{id:m,list:v,index:c,entry:S}}return{id:m,list:v,index:-1,entry:void 0}}function a(c){if(this.h={},this.g=t(),this.size=0,c){c=w(c);for(var p;!(p=c.next()).done;)p=p.value,this.set(p[0],p[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var c=Object.seal({x:4}),p=new e(w([[c,"s"]]));if(p.get(c)!="s"||p.size!=1||p.get({x:4})||p.set({x:4},"t")!=p||p.size!=2)return!1;var m=p.entries(),v=m.next();return v.done||v.value[0]!=c||v.value[1]!="s"?!1:(v=m.next(),!(v.done||v.value[0].x!=4||v.value[1]!="t"||!m.next().done))}catch{return!1}}())return e;var u=new WeakMap;a.prototype.set=function(c,p){c=c===0?0:c;var m=o(this,c);return m.list||(m.list=this.h[m.id]=[]),m.entry?m.entry.value=p:(m.entry={next:this.g,sb:this.g.sb,head:this.g,key:c,value:p},m.list.push(m.entry),this.g.sb.next=m.entry,this.g.sb=m.entry,this.size++),this},a.prototype.delete=function(c){return c=o(this,c),c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.h[c.id],c.entry.sb.next=c.entry.next,c.entry.next.sb=c.entry.sb,c.entry.head=null,this.size--,!0):!1},a.prototype.clear=function(){this.h={},this.g=this.g.sb=t(),this.size=0},a.prototype.has=function(c){return!!o(this,c).entry},a.prototype.get=function(c){return(c=o(this,c).entry)&&c.value},a.prototype.entries=function(){return n(this,function(c){return[c.key,c.value]})},a.prototype.keys=function(){return n(this,function(c){return c.key})},a.prototype.values=function(){return n(this,function(c){return c.value})},a.prototype.forEach=function(c,p){for(var m=this.entries(),v;!(v=m.next()).done;)v=v.value,c.call(p,v[1],v[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var f=0;return a}),M("Set",function(e){function t(n){if(this.g=new Map,n){n=w(n);for(var o;!(o=n.next()).done;)this.add(o.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),o=new e(w([n]));if(!o.has(n)||o.size!=1||o.add(n)!=o||o.size!=1||o.add({x:4})!=o||o.size!=2)return!1;var a=o.entries(),u=a.next();return u.done||u.value[0]!=n||u.value[1]!=n?!1:(u=a.next(),u.done||u.value[0]==n||u.value[0].x!=4||u.value[1]!=u.value[0]?!1:a.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,o){var a=this;this.g.forEach(function(u){return n.call(o,u,u,a)})},t)});function oe(e,t,n){e instanceof String&&(e=String(e));for(var o=e.length,a=0;a<o;a++){var u=e[a];if(t.call(n,u,a,e))return{Uf:a,v:u}}return{Uf:-1,v:void 0}}M("Array.prototype.findIndex",function(e){return e||function(t,n){return oe(this,t,n).Uf}}),M("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),M("Array.prototype.includes",function(e){return e||function(t,n){var o=this;o instanceof String&&(o=String(o));var a=o.length;for(n=n||0,0>n&&(n=Math.max(n+a,0));n<a;n++){var u=o[n];if(u===t||Object.is(u,t))return!0}return!1}});function P(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}M("String.prototype.includes",function(e){return e||function(t,n){return P(this,t,"includes").indexOf(t,n||0)!==-1}}),M("Array.prototype.find",function(e){return e||function(t,n){return oe(this,t,n).v}}),M("String.prototype.startsWith",function(e){return e||function(t,n){var o=P(this,t,"startsWith"),a=o.length,u=t.length;n=Math.max(0,Math.min(n|0,o.length));for(var f=0;f<u&&n<a;)if(o[n++]!=t[f++])return!1;return f>=u}});function ge(e,t){e instanceof String&&(e+="");var n=0,o=!1,a={next:function(){if(!o&&n<e.length){var u=n++;return{value:t(u,e[u]),done:!1}}return o=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}M("Array.prototype.keys",function(e){return e||function(){return ge(this,function(t){return t})}}),M("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=w(n);for(var o;!(o=n.next()).done;)this.add(o.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),o=Object.seal({}),a=new e([n]);return!a.has(n)||a.has(o)?!1:(a.delete(n),a.add(o),!a.has(n)&&a.has(o))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),M("Array.from",function(e){return e||function(t,n,o){n=n??function(c){return c};var a=[],u=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof u=="function"){t=u.call(t);for(var f=0;!(u=t.next()).done;)a.push(n.call(o,u.value,f++))}else for(u=t.length,f=0;f<u;f++)a.push(n.call(o,t[f],f));return a}});var Te=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var a in o)Ce(o,a)&&(e[a]=o[a])}return e};M("Object.assign",function(e){return e||Te}),M("Array.prototype.values",function(e){return e||function(){return ge(this,function(t,n){return n})}}),M("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),M("Array.prototype.entries",function(e){return e||function(){return ge(this,function(t,n){return[t,n]})}}),M("String.prototype.repeat",function(e){return e||function(t){var n=P(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var o="";t;)t&1&&(o+=n),(t>>>=1)&&(n+=n);return o}}),M("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),M("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),M("Object.values",function(e){return e||function(t){var n=[],o;for(o in t)Ce(t,o)&&n.push(t[o]);return n}}),M("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),M("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),M("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),M("Object.entries",function(e){return e||function(t){var n=[],o;for(o in t)Ce(t,o)&&n.push([o,t[o]]);return n}});var Fe=this||self;function ae(e,t){e=e.split(".");var n=Fe;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)e.length||t===void 0?n[o]&&n[o]!==Object.prototype[o]?n=n[o]:n=n[o]={}:n[o]=t}function Ue(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Ue.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function Y(e){return e.h/(1-Math.pow(e.g,e.i))}function $(){this.h=new Ue(2),this.j=new Ue(5),this.g=0,this.i=128e3,this.l=16e3}$.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},$.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},$.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Y(this.h),Y(this.j))};function Ae(){}function De(){}function Le(){}function it(e){var t=Re.apply(1,arguments);wt.has(e)||(wt.add(e),Le.apply(Ae,L(t)))}function zn(){}function oo(){}function gi(){}function yi(){}var wt=new Set;d.console&&(Le=function(){return console.warn.apply(console,L(Re.apply(0,arguments)))},De=function(){console.error.apply(console,L(Re.apply(0,arguments)))});function ke(e){if(Zt.has(e))return Zt.get(e);if(d.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return Zt.set(e,t),t}return d.MediaSource?(t=MediaSource.isTypeSupported(e),Zt.set(e,t),t):!1}function Nt(){return!!d.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var Zt=new Map;function Mn(){}Mn.prototype.extract=function(){},Mn.prototype.decode=function(){return[]},Mn.prototype.clear=function(){},Mn.prototype.getStreams=function(){return[]};function Vn(){}Vn.prototype.init=function(){},Vn.prototype.parse=function(){return[]};function _n(){}function nt(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Ye(e)==Ye(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ve(e);t=Ve(t);for(var o=0;o<e.byteLength;o++)if(n[o]!=t[o])return!1;return!0}function Ye(e){return e instanceof ArrayBuffer?e:e.buffer}function Pt(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ve(e,t,n){return n=n===void 0?1/0:n,ni(e,t===void 0?0:t,n,Uint8Array)}function Xt(e,t,n){return n=n===void 0?1/0:n,ni(e,t===void 0?0:t,n,Uint16Array)}function Et(e,t,n){return n=n===void 0?1/0:n,ni(e,t===void 0?0:t,n,DataView)}function ni(e,t,n,o){var a=Ye(e),u=1;"BYTES_PER_ELEMENT"in o&&(u=o.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/u;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/u,f))),new o(a,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}ae("shaka.util.BufferUtils",_n),_n.toDataView=Et,_n.toUint16=Xt,_n.toUint8=Ve,_n.toArrayBuffer=Pt,_n.equal=nt;function Mi(){}Mi.prototype.init=function(){},Mi.prototype.i=function(){},Mi.prototype.h=function(){},Mi.prototype.j=function(){},ae("shaka.media.IClosedCaptionParser",Mi);function nn(e){this.l=new Vn,(e=vn[e.toLowerCase()])&&(this.l=e()),this.g=new Mn,(e=xn)&&(this.g=e())}nn.prototype.init=function(e){this.l.init(e)},nn.prototype.i=function(e){e=this.l.parse(e),e=w(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Ve(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},nn.prototype.h=function(){this.g.clear()},nn.prototype.j=function(){return this.g.getStreams()},ae("shaka.media.ClosedCaptionParser",nn),nn.findDecoder=function(){return xn},nn.unregisterDecoder=function(){xn=null},nn.registerDecoder=function(e){xn=e},nn.findParser=function(e){return vn[e]},nn.unregisterParser=function(e){delete vn[e]},nn.registerParser=function(e,t){vn[e]=t};var vn={},xn=null;function ko(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function wn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function vi(e,t,n){if(n||(n=ko),e.length!=t.length)return!1;t=t.slice();var o={};e=w(e);for(var a=e.next();!a.done;o={ae:o.ae},a=e.next()){if(o.ae=a.value,a=t.findIndex(function(u){return function(f){return n(u.ae,f)}}(o)),a==-1)return!1;t[a]=t[t.length-1],t.pop()}return t.length==0}function ii(e,t,n){if(n||(n=ko),e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0}function ft(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new _o,this.position=null,this.positionAlign=Ha,this.size=0,this.textAlign=Oi,this.direction=ws,this.writingMode=Ss,this.lineInterpretation=$a,this.line=null,this.lineHeight="",this.lineAlign=Mo,this.displayAlign=xs,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=bp,this.fontStyle=Vf,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Kb:32,rows:15}}function vt(e,t){return e=new ft(e,t,""),e.lineBreak=!0,e}ft.prototype.clone=function(){var e=new ft(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function jf(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!ii(e.nestedCues,t.nestedCues,jf))return!1}else if(n=="region"||n=="cellResolution"){for(var o in e[n])if(e[n][o]!=t[n][o])return!1}else if(Array.isArray(e[n])){if(!ii(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}ae("shaka.text.Cue",ft),ft.equal=jf,ft.prototype.clone=ft.prototype.clone;var Ha="auto";ft.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Ha};var Oi="center",Ff={LEFT:"left",RIGHT:"right",CENTER:Oi,START:"start",END:"end"};ft.textAlign=Ff;var xs="after",Cp={BEFORE:"before",CENTER:"center",AFTER:xs};ft.displayAlign=Cp;var ws="ltr";ft.direction={HORIZONTAL_LEFT_TO_RIGHT:ws,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ss="horizontal-tb";ft.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ss,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var $a=0;ft.lineInterpretation={LINE_NUMBER:$a,PERCENTAGE:1};var Mo="start",zf={CENTER:"center",START:Mo,END:"end"};ft.lineAlign=zf;var Ep={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};ft.defaultTextColor=Ep;var Ap={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};ft.defaultTextBackgroundColor=Ap;var bp=400;ft.fontWeight={NORMAL:bp,BOLD:700};var Vf="normal",Ip={NORMAL:Vf,ITALIC:"italic",OBLIQUE:"oblique"};ft.fontStyle=Ip,ft.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function _o(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Hn,this.scroll=kp}ae("shaka.text.CueRegion",_o);var Hn=1;_o.units={PX:0,PERCENTAGE:Hn,LINES:2};var kp="";_o.scrollMode={NONE:kp,UP:"up"};function ro(){}ro.prototype.destroy=function(){};function Ui(e,t,n){Hf[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,Vd:t}}function Ro(e,t){for(var n=e.toLowerCase().split(";")[0],o=w([Mp,Gf,$f,so]),a=o.next();!a.done;a=o.next())if(a=Hf[n+"-"+a.value]){var u=a.Vd(),f=u.isSupported(e,t);if(u.destroy(),f)return a.Vd}return null}ae("shaka.transmuxer.TransmuxerEngine",ro),ro.findTransmuxer=Ro,ro.unregisterTransmuxer=function(e,t){delete Hf[e.toLowerCase().split(";")[0]+"-"+t]},ro.registerTransmuxer=Ui,ro.prototype.destroy=ro.prototype.destroy;var Hf={},so=1,$f=2,Gf=3,Mp=4;ro.PluginPriority={FALLBACK:so,PREFERRED_SECONDARY:$f,PREFERRED:Gf,APPLICATION:Mp};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var F2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Ut(e){var t;e instanceof Ut?(Ga(this,e.ab),this.Wb=e.Wb,Wa(this,e.ob),Wf(this,e.nc),this.Ga=e.Ga,Ts(this,e.g.clone()),this.Lb=e.Lb):e&&(t=String(e).match(F2))?(Ga(this,t[1]||"",!0),this.Wb=Cs(t[2]||""),Wa(this,t[3]||"",!0),Wf(this,t[4]),this.Ga=Cs(t[5]||"",!0),Ts(this,t[6]||"",!0),this.Lb=Cs(t[7]||"")):this.g=new As(null)}s=Ut.prototype,s.ab="",s.Wb="",s.ob="",s.nc=null,s.Ga="",s.Lb="",s.toString=function(){var e=[],t=this.ab;if(t&&e.push(Es(t,_p,!0),":"),t=this.ob){e.push("//");var n=this.Wb;n&&e.push(Es(n,_p,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.nc,t!=null&&e.push(":",String(t))}return(t=this.Ga)&&(this.ob&&t.charAt(0)!="/"&&e.push("/"),e.push(Es(t,t.charAt(0)=="/"?H2:V2,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Lb)&&e.push("#",Es(t,G2)),e.join("")},s.resolve=function(e){var t=this.clone();t.ab==="data"&&(t=new Ut);var n=!!e.ab;n?Ga(t,e.ab):n=!!e.Wb,n?t.Wb=e.Wb:n=!!e.ob,n?Wa(t,e.ob):n=e.nc!=null;var o=e.Ga;if(n)Wf(t,e.nc);else if(n=!!e.Ga){if(o.charAt(0)!="/")if(this.ob&&!this.Ga)o="/"+o;else{var a=t.Ga.lastIndexOf("/");a!=-1&&(o=t.Ga.substr(0,a+1)+o)}if(o==".."||o==".")o="";else if(o.indexOf("./")!=-1||o.indexOf("/.")!=-1){a=o.lastIndexOf("/",0)==0,o=o.split("/");for(var u=[],f=0;f<o.length;){var c=o[f++];c=="."?a&&f==o.length&&u.push(""):c==".."?((1<u.length||u.length==1&&u[0]!="")&&u.pop(),a&&f==o.length&&u.push("")):(u.push(c),a=!0)}o=u.join("/")}}return n?t.Ga=o:n=e.g.toString()!=="",n?Ts(t,e.g.clone()):n=!!e.Lb,n&&(t.Lb=e.Lb),t},s.clone=function(){return new Ut(this)};function Ga(e,t,n){e.ab=n?Cs(t,!0):t,e.ab&&(e.ab=e.ab.replace(/:$/,""))}function Wa(e,t,n){e.ob=n?Cs(t,!0):t}function Wf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.nc=t}else e.nc=null}function Ts(e,t,n){t instanceof As?e.g=t:(n||(t=Es(t,$2)),e.g=new As(t))}function Cs(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Es(e,t,n){return e!=null?(e=encodeURI(e).replace(t,z2),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function z2(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var _p=/[#\/\?@]/g,V2=/[#\?:]/g,H2=/[#\?]/g,$2=/[#\?@]/g,G2=/#/g;function As(e){this.g=e||null}function Xa(e){if(!e.xa&&(e.xa={},e.Nc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var o=t[n].indexOf("="),a=null;if(0<=o){var u=t[n].substring(0,o);a=t[n].substring(o+1)}else u=t[n];u=decodeURIComponent(u.replace(/\+/g," ")),a=a||"",e.add(u,decodeURIComponent(a.replace(/\+/g," ")))}}s=As.prototype,s.xa=null,s.Nc=null;function Rp(e){return Xa(e),e.Nc}s.add=function(e,t){Xa(this),this.g=null;var n=this.xa.hasOwnProperty(e)?this.xa[e]:null;return n||(this.xa[e]=n=[]),n.push(t),this.Nc++,this},s.set=function(e,t){return Xa(this),this.g=null,this.xa.hasOwnProperty(e)?this.xa[e]=[t]:this.add(e,t),this},s.get=function(e){return Xa(this),this.xa[e]||[]},s.toString=function(){if(this.g)return this.g;if(!this.xa)return"";var e=[],t;for(t in this.xa)for(var n=encodeURIComponent(t),o=this.xa[t],a=0;a<o.length;a++){var u=n;o[a]!==""&&(u+="="+encodeURIComponent(o[a])),e.push(u)}return this.g=e.join("&")},s.clone=function(){var e=new As;if(e.g=this.g,this.xa){var t={},n;for(n in this.xa)t[n]=this.xa[n].concat();e.xa=t,e.Nc=this.Nc}return e};function K(e,t,n){var o=Re.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=o,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(a){this.stack=a.stack}}K.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ae("shaka.util.Error",K),K.Severity={RECOVERABLE:1,CRITICAL:2},K.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},K.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function on(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new Ut(e[0]);return t=new Ut(t[0]),[n.resolve(t).toString()]}t=t.map(function(f){return new Ut(f)}),n=[],e=w(e);for(var o=e.next();!o.done;o=e.next()){o=new Ut(o.value);for(var a=w(t),u=a.next();!u.done;u=a.next())n.push(o.resolve(u.value).toString())}return n}function ao(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function nr(e,t){if(t.length==1)return t[0];if(e=Sn(e,t),e!=null)return e;throw new K(2,4,4025,t)}function Sn(e,t){for(var n=w(W2[e]),o=n.next();!o.done;o=n.next()){o=o.value;for(var a=w(t),u=a.next();!u.done;u=a.next())if(u=u.value,o.test(u.trim()))return u.trim()}return e==at?"":null}var at="text",$t={$:"video",P:"audio",na:at,he:"image",fi:"application"},W2={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Xf(){}function Rn(e,t){var n=e;return t&&!rr.includes(e)&&(n+='; codecs="'+t+'"'),n}function ir(e,t){return t&&(e+='; codecs="'+t+'"'),e}function or(e,t,n){var o=Rn(e,t);return t=ir(e,t),Ro(t)?(e=Ro(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?o.replace("video","audio"):o,n}function oi(e){var t=Lp(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function xi(e){var t=[];e=w(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Lp(n.value),t.push(n[0]);return t.sort().join(",")}function Bi(e){return e.split(";")[0]}function ri(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Lp(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}ae("shaka.util.MimeUtils",Xf),Xf.getFullTypeWithAllCodecs=ir,Xf.getFullType=Rn,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var rr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function ji(e){this.i=null,this.j=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.A="",this.o=new Map}function Ka(e){return Kt[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!xn:!1}ji.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function X2(e,t,n,o,a){var u,f,c,p;return z(function(m){if(m.g==1)return E(m,Promise.resolve(),2);if(!e.i||!e.j)return m.return();if(n==null||o==null)return e.i.parseInit(Ve(t)),m.return();u=e.u?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:o,vttOffset:u},c=e.i.parseMedia(Ve(t),f,a),p=c.filter(function(v){return v.startTime>=e.l&&v.startTime<e.m}),e.j.append(p),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(o,e.m),j(m)})}ji.prototype.remove=function(e,t){var n=this;return z(function(o){if(o.g==1)return E(o,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),j(o)})};function K2(e,t,n){e.l=t,e.m=n}function Pp(e,t,n){if(e.A=t,t=e.o.get(t))for(var o=w(t.keys()),a=o.next();!a.done;a=o.next())(a=t.get(a.value).filter(function(u){return u.endTime<=n}))&&e.j.append(a)}function Dp(e,t,n){t.startTime+=n,t.endTime+=n,t=w(t.nestedCues);for(var o=t.next();!o.done;o=t.next())Dp(e,o.value,n)}function Y2(e,t,n,o,a){var u=n+" "+o,f=new Map;t=w(t);for(var c=t.next();!c.done;c=t.next()){var p=c.value;c=p.stream,p=p.cue,f.has(c)||f.set(c,new Map),f.get(c).has(u)||f.get(c).set(u,[]),Dp(e,p,a),p.startTime>=e.l&&p.startTime<e.m&&(f.get(c).get(u).push(p),c==e.A&&e.j.append([p]))}for(a=w(f.keys()),u=a.next();!u.done;u=a.next())for(u=u.value,e.o.has(u)||e.o.set(u,new Map),t=w(f.get(u).keys()),c=t.next();!c.done;c=t.next())c=c.value,p=f.get(u).get(c),e.o.get(u).set(c,p);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(o,e.m))}ae("shaka.text.TextEngine",ji),ji.prototype.destroy=ji.prototype.destroy,ji.findParser=function(e){return Kt[e]},ji.unregisterParser=function(e){delete Kt[e]},ji.registerParser=function(e,t){Kt[e]=t};var Kt={};function q2(e,t){return e.concat(t)}function Np(){}function sr(e){return e!=null}function si(){}function Ya(e,t){return e=ct(e),t=ct(t),e.split("-")[0]==t.split("-")[0]}function bs(e,t){return e=ct(e),t=ct(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Kf(e,t){return e=ct(e),t=ct(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function ct(e){e=w(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=w(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Op.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Lo(e,t){return e=ct(e),t=ct(t),t==e?4:bs(t,e)?3:Kf(t,e)?2:bs(e,t)?1:0}function Yf(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Op.get(e)||e}function qf(e){return e.language?ct(e.language):e.audio&&e.audio.language?ct(e.audio.language):e.video&&e.video.language?ct(e.video.language):"und"}function qa(e,t){e=ct(e);var n=new Set,o=w(t);for(t=o.next();!t.done;t=o.next())n.add(ct(t.value));for(o=w(n),t=o.next();!t.done;t=o.next())if(t=t.value,t==e)return t;for(o=w(n),t=o.next();!t.done;t=o.next())if(t=t.value,bs(t,e))return t;for(o=w(n),t=o.next();!t.done;t=o.next())if(t=t.value,Kf(t,e))return t;for(n=w(n),t=n.next();!t.done;t=n.next())if(t=t.value,bs(e,t))return t;return null}ae("shaka.util.LanguageUtils",si),si.findClosestLocale=qa,si.getLocaleForVariant=qf,si.getLocaleForText=function(e){return ct(e.language||"und")},si.getBase=Yf,si.relatedness=Lo,si.areSiblings=function(e,t){var n=Yf(e),o=Yf(t);return e!=n&&t!=o&&n==o},si.normalize=ct,si.isSiblingOf=Kf,si.isParentOf=bs,si.areLanguageCompatible=Ya,si.areLocaleCompatible=function(e,t){return e=ct(e),t=ct(t),e==t};var Op=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Qa(){this.g={}}s=Qa.prototype,s.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},s.get=function(e){return(e=this.g[e])?e.slice():null},s.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},s.forEach=function(e){for(var t in this.g)e(t,this.g[t])},s.size=function(){return Object.keys(this.g).length},s.keys=function(){return Object.keys(this.g)};function Po(e){function t(o){switch(typeof o){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return o;default:if(!o||o.buffer&&o.buffer.constructor==ArrayBuffer)return o;if(n.has(o))return null;var a=o.constructor==Array;if(o.constructor!=Object&&!a)return null;n.add(o);var u=a?[]:{},f;for(f in o)u[f]=t(o[f]);return a&&(u.length=o.length),u}}var n=new WeakSet;return t(e)}function Up(e){var t={},n;for(n in e)t[n]=e[n];return t}function Is(e){this.h=e,this.g=null}Is.prototype.U=function(e){var t=this;this.stop();var n=!0,o=null;return this.g=function(){d.clearTimeout(o),n=!1},o=d.setTimeout(function(){n&&t.h()},1e3*e),this},Is.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function rt(e){this.h=e,this.g=null}rt.prototype.qc=function(){return this.stop(),this.h(),this},rt.prototype.U=function(e){var t=this;return this.stop(),this.g=new Is(function(){t.h()}).U(e),this},rt.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Is(function(){t.g.U(e),t.h()}).U(e),this},rt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},ae("shaka.util.Timer",rt),rt.prototype.stop=rt.prototype.stop,rt.prototype.tickEvery=rt.prototype.$a,rt.prototype.tickAfter=rt.prototype.U,rt.prototype.tickNow=rt.prototype.qc;function wi(){var e=d.ManagedMediaSource||d.MediaSource;return!!(e&&e.isTypeSupported)}function ks(e){return Bp().canPlayType(e)!=""}function Qf(){return!!navigator.userAgent.match(/Edge?\//)}function Ms(){return Rt("Xbox One")}function Do(){return Rt("Tizen")}function Za(){return Rt("Tizen 3")}function Ja(){return Rt("Tizen 2")}function Zf(){return Rt("Web0S")&&Rt("Chrome/38.0.2125.122 Safari/537.36")}function ar(){return Rt("CrKey")}function eu(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Do()&&!Rt("PC=EOS")&&!Rt("PC=APL")&&!Rt("VirginMedia")&&!Rt("SOPOpenBrowser")&&!ur()&&!Rt("AFT")&&!Rt("WPE")}function ur(){return Rt("PlayStation 4")}function tu(){if(!eu())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Rt(e){return(navigator.userAgent||"").includes(e)}function Bp(){return lr||(Jf||(Jf=new rt(function(){lr=null})),(lr=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(lr=document.createElement("video")),Jf.U(1),lr)}var Jf=null,lr=null;function jp(){}function Fp(e,t,n,o){var a=e.variants;if((t.length||n.length)&&(a=Q2(a,t,n)),o.length){for(t=new Qa,n=w(a),a=n.next();!a.done;a=n.next())a=a.value,t.push(String(a.video.width||0),a);var u=[];t.forEach(function(b,_){b=0;var D=[],B={};_=w(_);for(var N=_.next();!N.done;B={Gc:B.Gc},N=_.next())B.Gc=N.value,N=o.filter(function(G){return function(V){return G.Gc.decodingInfos[0][V]}}(B)).length,N>b?(b=N,D=[B.Gc]):N==b&&D.push(B.Gc);u.push.apply(u,L(D))}),a=u}n=new Set,t=new Set;var f=w(a);for(a=f.next();!a.done;a=f.next())a=a.value,a.audio&&n.add(a.audio),a.video&&t.add(a.video);n=Array.from(n).sort(function(b,_){return b.bandwidth-_.bandwidth});var c=[];for(a=new Map,n=w(n),f=n.next();!f.done;f=n.next()){f=f.value;var p=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,m=a.get(p)||[];if(m.length){var v=m[m.length-1],S=oi(v.codecs),C=oi(f.codecs);S==C&&f.bandwidth>v.bandwidth&&(m.push(f),c.push(f.id))}else m.push(f),c.push(f.id);a.set(p,m)}n=Array.from(t).sort(function(b,_){return b.bandwidth&&_.bandwidth?b.bandwidth-_.bandwidth:b.width-_.width}),t=Nt();var T=[];for(a=new Map,n=w(n),f=n.next();!f.done;f=n.next()){if(f=f.value,p=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,m=a.get(p)||[],m.length){if(v=m[m.length-1],!t&&(S=oi(v.codecs),C=oi(f.codecs),S!==C))continue;f.width>v.width||f.height>v.height?(m.push(f),T.push(f.id)):f.width==v.width&&f.height==v.height&&(S=oi(v.codecs),C=oi(f.codecs),S==C&&f.bandwidth>v.bandwidth&&(m.push(f),T.push(f.id)))}else m.push(f),T.push(f.id);a.set(p,m)}e.variants=e.variants.filter(function(b){var _=b.audio;return b=b.video,!(_&&!c.includes(_.id)||b&&!T.includes(b.id))})}function Q2(e,t,n){var o={};t=w(t);for(var a=t.next();!a.done;o={ge:o.ge},a=t.next())if(o.ge=a.value,a=e.filter(function(u){return function(f){return f.video&&f.video.codecs.startsWith(u.ge)}}(o)),a.length){e=a;break}for(o={},n=w(n),t=n.next();!t.done;o={$d:o.$d},t=n.next())if(o.$d=t.value,t=e.filter(function(u){return function(f){return f.audio&&f.audio.codecs.startsWith(u.$d)}}(o)),t.length){e=t;break}return e}function Z2(e,t,n){e.variants=e.variants.filter(function(o){return nu(o,t,n)})}function nu(e,t,n){function o(u,f,c){return u>=f&&u<=c}var a=e.video;return!(a&&a.width&&a.height&&(!o(a.width,t.minWidth,Math.min(t.maxWidth,n.width))||!o(a.height,t.minHeight,Math.min(t.maxHeight,n.height))||!o(a.width*a.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!o(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!o(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function zp(e,t,n){var o=!1;e=w(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var u=a.allowedByApplication;a.allowedByApplication=nu(a,t,n),u!=a.allowedByApplication&&(o=!0)}return o}function J2(e,t){return z(function(n){return n.g==1?E(n,Vp(e,t,0<t.offlineSessionIds.length),2):(tw(t),E(n,nw(t),0))})}function Vp(e,t,n){var o,a,u,f,c;return z(function(p){if(p.g==1)return E(p,Gp(t.variants,n,!1,[]),2);o=null,e&&(a=e.g)&&(o=a.keySystem),u=$t,f=Ms(),c=Rt("Firefox")&&Rt("Android"),t.variants=t.variants.filter(function(m){var v=m.video,S=v&&v.width||0,C=v&&v.height||0;if(f&&v&&(1920<S||1080<C)&&(v.codecs.includes("avc1.")||v.codecs.includes("avc3.")))return oc(m),!1;if(v){if(S=ou(v.codecs),v.codecs.includes(",")){C=v.codecs.split(","),S=nr(u.$,C),S=ou(S),C=nr(u.P,C),C=iu(C);var T=or(v.mimeType,C,u.P);if(!ke(T))return!1;S=[S,C].join()}if(C=or(v.mimeType,S,u.$),!ke(C))return!1;v.codecs=S}if(v=m.audio,c&&v&&v.encrypted&&v.codecs.toLowerCase().includes("opus"))return oc(m),!1;if(v){if(S=iu(v.codecs),C=or(v.mimeType,S,u.P),!ke(C))return!1;v.codecs=S}return(v=m.decodingInfos.some(function(b){return!(!b.supported||o&&(b=b.keySystemAccess)&&b.keySystem!=o)}))||(oc(m),void 0),v}),j(p)})}function Hp(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=w(t);for(var o=t.next();!o.done;o=t.next()){var a=o.value;o=JSON.stringify(a),a=e[a],a instanceof Object?(a=Hp(a),n.push(o+":"+a)):(a=JSON.stringify(a),n.push(o+":"+a))}return"{"+n.join(",")+"}"}function $p(e,t){var n,o,a,u,f,c,p;return z(function(m){if(m.g==1)return n=Hp(t),o=ow,o[n]?(e.decodingInfos.push(o[n]),m.B(0)):E(m,ew(t),3);if((a=m.h)&&a.length){for(u=null,f=w(a),c=f.next();!c.done;c=f.next())p=c.value,u?(u.supported=u.supported&&p.supported,u.powerEfficient=u.powerEfficient&&p.powerEfficient,u.smooth=u.smooth&&p.smooth,p.keySystemAccess||(u.keySystemAccess=null)):u=p;u&&(o[n]=u,e.decodingInfos.push(u))}j(m)})}function ew(e){var t=[""];e.video&&(t=ri(e.video.contentType).split(","));var n=[""];e.audio&&(n=ri(e.audio.contentType).split(","));var o=[];t=w(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;for(var u={},f=w(n),c=f.next();!c.done;u={Gb:u.Gb},c=f.next())c=c.value,u.Gb=Po(e),e.video&&(u.Gb.video.contentType=Rn(Bi(u.Gb.video.contentType),a)),e.audio&&(u.Gb.audio.contentType=Rn(Bi(u.Gb.audio.contentType),c)),o.push(new Promise(function(p){return function(m,v){navigator.mediaCapabilities.decodingInfo(p.Gb).then(function(S){m(S)}).catch(v)}}(u)))}return Promise.all(o).catch(function(){return JSON.stringify(e),null})}function Gp(e,t,n,o){var a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G;return z(function(V){switch(V.g){case 1:if(e.some(function(q){return q.decodingInfos.length}))return V.return();a={},u=w(o),f=u.next();case 2:if(f.done){V.B(4);break}a.be=f.value,c=!1,p=w(e),m=p.next();case 5:if(m.done){V.B(7);break}v=m.value,S=Wp(v,t,n).filter(function(q){return function(te){return(te.keySystemConfiguration&&te.keySystemConfiguration.keySystem)===q.be}}(a)),C=w(S),T=C.next();case 8:if(T.done){V.B(10);break}return b=T.value,E(V,$p(v,b),9);case 9:T=C.next(),V.B(8);break;case 10:v.decodingInfos.length&&(c=!0),m=p.next(),V.B(5);break;case 7:if(c)return V.return();a={be:a.be},f=u.next(),V.B(2);break;case 4:_=w(e),m=_.next();case 12:if(m.done){V.B(0);break}D=m.value,B=Wp(D,t,n).filter(function(q){return q=q.keySystemConfiguration&&q.keySystemConfiguration.keySystem,!q||!o.includes(q)}),N=w(B),T=N.next();case 15:if(T.done){m=_.next(),V.B(12);break}return G=T.value,E(V,$p(D,G),16);case 16:T=N.next(),V.B(15)}})}function Wp(e,t,n){var o=e.audio,a=e.video;if(n={type:n?"file":"media-source"},a){var u=a.codecs;if(a.codecs.includes(",")){var f=a.codecs.split(",");u=nr("video",f),u=ou(u),f=nr("audio",f),f=iu(f),f=or(a.mimeType,f,"audio"),n.audio={contentType:f,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(u=ou(u),u=or(a.mimeType,u,"video"),n.video={contentType:u,width:a.width||64,height:a.height||64,bitrate:a.bandwidth||e.bandwidth||1,framerate:a.frameRate||1},a.hdr)switch(a.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(o&&(u=iu(o.codecs),u=or(o.mimeType,u,"audio"),n.audio={contentType:u,channels:o.channelsCount||2,bitrate:o.bandwidth||e.bandwidth||1,samplerate:o.audioSamplingRate||1,spatialRendering:o.spatialAudio}),f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[n];e=[],u=new Map,f=w(f);for(var c=f.next();!c.done;c=f.next()){var p=c.value;u.get(p.keySystem)||u.set(p.keySystem,[]),u.get(p.keySystem).push(p)}f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],p=w(u.keys());for(var m=p.next();!m.done;m=p.next()){var v=m.value;m=Object.assign({},n);var S=u.get(v);for(v={keySystem:v,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t},S=w(S),c=S.next();!c.done;c=S.next()){if(c=c.value,c.initData&&c.initData.length){for(var C=new Set,T=w(c.initData),b=T.next();!b.done;b=T.next())C.add(b.value.initDataType);v.initDataType=c.initData[0].initDataType}c.distinctiveIdentifierRequired&&(v.distinctiveIdentifier="required"),c.persistentStateRequired&&(v.persistentState="required"),c.sessionType&&(v.sessionTypes=[c.sessionType]),o&&(c.audioRobustness!=""?v.audio?v.audio.robustness=v.audio.robustness||c.audioRobustness:v.audio={robustness:c.audioRobustness}:v.audio||(v.audio={})),a&&(c.videoRobustness!=""?v.video?v.video.robustness=v.video.robustness||c.videoRobustness:v.video={robustness:c.videoRobustness}:v.video||(v.video={}))}m.keySystemConfiguration=v,e.push(m)}return e}function iu(e){return e!=="fLaC"||tu()?e==="Opus"?"opus":e:"flac"}function ou(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function tw(e){e.textStreams=e.textStreams.filter(function(t){return t=Rn(t.mimeType,t.codecs),Ka(t)})}function nw(e){var t,n,o,a,u,f,c;return z(function(p){switch(p.g){case 1:t=[],n=w(e.imageStreams),o=n.next();case 2:if(o.done){p.B(4);break}if(a=o.value,u=a.mimeType,u=="application/mp4"&&a.codecs=="mjpg"&&(u="image/jpg"),au.has(u)){p.B(5);break}if(f=sw.get(u),!f){au.set(u,!1),p.B(5);break}return E(p,iw(f),7);case 7:c=p.h,au.set(u,c);case 5:au.get(u)&&t.push(a),o=n.next(),p.B(2);break;case 4:e.imageStreams=t,j(p)}})}function iw(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function fr(e){var t=e.audio,n=e.video,o=t?t.mimeType:null,a=n?n.mimeType:null,u=t?t.codecs:null,f=n?n.codecs:null,c=[];f&&c.push(f),u&&c.push(u);var p=[];n&&p.push(n.mimeType),t&&p.push(t.mimeType),p=p[0]||null;var m=[];t&&m.push(t.kind),n&&m.push(n.kind),m=m[0]||null;var v=new Set;if(t)for(var S=w(t.roles),C=S.next();!C.done;C=S.next())v.add(C.value);if(n)for(S=w(n.roles),C=S.next();!C.done;C=S.next())v.add(C.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:m,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:p,audioMimeType:o,videoMimeType:a,codecs:c.join(", "),audioCodec:u,videoCodec:f,primary:e.primary,roles:Array.from(v),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function ru(e){return{id:e.id,active:!1,type:at,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function ec(e){var t=e.width||null,n=e.height||null,o=null;e.segmentIndex&&(o=e.segmentIndex.get(0));var a=e.tilesLayout;return o&&(a=o.tilesLayout||a),a&&t!=null&&(t/=Number(a.split("x")[0])),a&&n!=null&&(n/=Number(a.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:a||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function tc(e){return e.__shaka_id||(e.__shaka_id=rw++),e.__shaka_id}function Xp(e){var t=Kp(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="application/cea-608"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function nc(e){var t=Kp(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Kp(e){var t=e.language;return{id:tc(e),active:!1,type:"",bandwidth:0,language:ct(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function su(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function ic(e){return e.filter(function(t){return su(t)})}function _s(e,t,n,o){var a=e,u=e.filter(function(p){return p.primary});u.length&&(a=u);var f=a.length?a[0].language:"";if(a=a.filter(function(p){return p.language==f}),t){var c=qa(ct(t),e.map(function(p){return p.language}));c&&(a=e.filter(function(p){return ct(p.language)==c}))}if(a=a.filter(function(p){return p.forced==o}),n){if(e=Yp(a,n),e.length)return e}else if(e=a.filter(function(p){return p.roles.length==0}),e.length)return e;return e=a.map(function(p){return p.roles}).reduce(q2,[]),e.length?Yp(a,e[0]):a}function Yp(e,t){return e.filter(function(n){return n.roles.includes(t)})}function oc(e){var t=[];return e.audio&&t.push(qp(e.audio)),e.video&&t.push(qp(e.video)),t.join(", ")}function qp(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}ae("shaka.util.StreamUtils",jp),jp.meetsRestrictions=nu;var ow={},rw=0,au=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),sw=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function At(){var e=this;this.s=null,this.o=!1,this.i=new $,this.A=null,navigator.connection&&navigator.connection.addEventListener&&(this.A=function(){if(e.o&&e.g.useNetworkInformation){e.i=new $,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.A)),this.m=[],this.C=1,this.G=!1,this.h=this.l=this.g=this.u=null,this.F=new rt(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}s=At.prototype,s.stop=function(){this.s=null,this.o=!1,this.m=[],this.C=1,this.l=this.u=null,this.h&&(this.h.disconnect(),this.h=null),this.F.stop(),this.j=null},s.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.A),this.A=null),this.F=null},s.init=function(e){this.s=e},s.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:d.devicePixelRatio,t=d.screen.height*n,n*=d.screen.width),this.h&&this.g.restrictToElementSize){var o=this.g.ignoreDevicePixelRatio?1:d.devicePixelRatio;t=Math.min(t,this.l.clientHeight*o),n=Math.min(n,this.l.clientWidth*o)}var a=this.m.filter(function(m){return!(m.audio&&m.audio.fastSwitching||m.video&&m.video.fastSwitching)});if(a.length||(a=this.m),o=a,e&&a.length!=this.m.length&&(o=this.m.filter(function(m){return!!(m.audio&&m.audio.fastSwitching||m.video&&m.video.fastSwitching)})),e=rc(this,this.g.restrictions,o,1/0,1/0),t!=1/0||n!=1/0){for(e=aw(e),e=w(e),a=e.next();!a.done;a=e.next())if(a=a.value,a.height>=t&&a.width>=n){t=a.height,n=a.width;break}e=rc(this,this.g.restrictions,o,t,n)}for(t=this.getBandwidthEstimate(),o.length&&!e.length&&(e=rc(this,null,o,1/0,1/0),e=[e[0]]),n=e[0]||null,o=0;o<e.length;o++){a=e[o];for(var u=isNaN(this.C)?1:Math.abs(this.C),f=u*a.bandwidth/this.g.bandwidthDowngradeTarget,c={bandwidth:1/0},p=o+1;p<e.length;p++)if(a.bandwidth!=e[p].bandwidth){c=e[p];break}u=u*c.bandwidth/this.g.bandwidthUpgradeTarget,t>=f&&t<=u&&n.bandwidth!=a.bandwidth&&(n=a)}return this.u=Date.now(),n},s.enable=function(){this.o=!0},s.disable=function(){this.o=!1},s.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.u!=null&&this.o&&Qp(this)},s.trySuggestStreams=function(){this.u!=null&&this.o&&Qp(this)},s.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},s.setVariants=function(e){this.m=e},s.playbackRateChanged=function(e){this.C=e},s.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in d&&(this.h=new ResizeObserver(function(){t.F.U(uw)}),this.h.observe(this.l))},s.setCmsdManager=function(e){this.j=e},s.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Qp(e){if(e.G){if(Date.now()-e.u<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function rc(e,t,n,o,a){if(e.j){var u=e.j.Rf();u&&(n=n.filter(function(f){return f.bandwidth&&u?f.bandwidth<=u:!0}))}return t&&(n=n.filter(function(f){return nu(f,t,{width:a,height:o})})),n.sort(function(f,c){return f.bandwidth-c.bandwidth})}function aw(e){var t=[];e=w(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(o,a){return o.width-a.width})}ae("shaka.abr.SimpleAbrManager",At),At.prototype.configure=At.prototype.configure,At.prototype.setCmsdManager=At.prototype.setCmsdManager,At.prototype.setMediaElement=At.prototype.setMediaElement,At.prototype.playbackRateChanged=At.prototype.playbackRateChanged,At.prototype.setVariants=At.prototype.setVariants,At.prototype.getBandwidthEstimate=At.prototype.getBandwidthEstimate,At.prototype.trySuggestStreams=At.prototype.trySuggestStreams,At.prototype.segmentDownloaded=At.prototype.segmentDownloaded,At.prototype.disable=At.prototype.disable,At.prototype.enable=At.prototype.enable,At.prototype.chooseVariant=At.prototype.chooseVariant,At.prototype.init=At.prototype.init,At.prototype.release=At.prototype.release,At.prototype.stop=At.prototype.stop;var uw=1;function sc(e,t){this.g=e,this.h=t}sc.prototype.toString=function(){return"v"+this.g+"."+this.h};function ai(e,t){var n=new sc(5,0),o=Zp,a=o.g,u=n.h-a.h;(0<(n.g-a.g||u)?o.i:o.h)(o.g,n,e,t)}function lw(e,t,n,o){Le([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",o].join(" "))}function fw(e,t,n,o){De([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",o].join(" "))}var Zp=null;ae("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ae("shaka.config.CodecSwitchingStrategy",{Hi:"reload",yg:"smooth"});function uu(e,t,n,o){for(n=n===void 0?!0:n,o=o===void 0?!1:o,this.h=e,this.g=new Set([e]),t=t||[],e=w(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,o)}uu.prototype.add=function(e,t,n){return Jp(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function Jp(e,t,n,o){var a;if(!(a=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(a=e.audio&&t.audio)){a=e.audio;var u=t.audio;a=!!((!a.channelsCount||!u.channelsCount||2<a.channelsCount||2<u.channelsCount)&&a.channelsCount!=u.channelsCount||n&&!e0(a,u)||!t0(a.roles,u.roles)||o&&a.groupId!==u.groupId)}return!(o=a)&&(o=e.video&&t.video)&&(e=e.video,t=t.video,o=!((!n||e0(e,t))&&t0(e.roles,t.roles))),!o}uu.prototype.values=function(){return this.g.values()};function e0(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(o){return xi(o)}),t=t.codecs.split(",").map(function(o){return xi(o)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function t0(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=w(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function n0(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new cr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}n0.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Nt(),o=e.filter(function(a){return Jp(t.i,a,!n,t.g)});return o.length?new uu(o[0],o,!n,this.g):this.j.create(e)};function cr(e,t,n,o,a,u,f,c,p,m){this.s=e,this.u=t,this.h=n,this.i=o,this.A=a,this.l=u,this.g=f===void 0?"":f,this.j=c===void 0?"":c,this.m=p===void 0?"reload":p,this.o=m===void 0?!1:m}cr.prototype.create=function(e){var t=[];t=cw(e,this.s);var n=e.filter(function(o){return o.primary});return t=t.length?t:n.length?n:e,e=hw(t,this.u),e.length&&(t=e),this.l&&(e=yw(t,this.l),e.length&&(t=e)),this.i&&(e=gw(t,this.i),e.length&&(t=e)),this.h&&(e=mw(t,this.h),e.length&&(t=e)),this.g&&(e=dw(t,this.g),e.length&&(t=e)),this.j&&(e=pw(t,this.j),e.length&&(t=e)),e=vw(t,this.A),e.length&&(t=e),new uu(t[0],t,!(this.m=="smooth"&&Nt()),this.o)};function cw(e,t){t=ct(t);var n=qa(t,e.map(function(o){return qf(o)}));return n?e.filter(function(o){return n==qf(o)}):[]}function hw(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function dw(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function pw(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function mw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function gw(e,t){return t=="AUTO"&&(t=d.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function yw(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function vw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function xw(){this.g=lu,this.h=new Map().set(lu,2).set(hr,1)}function i0(e,t,n){e.h.set(lu,n).set(hr,t)}var hr=0,lu=1;function o0(e,t){var n=_i();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function r0(e){var t,n;return z(function(o){if(o.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new K(2,7,1010);return t=e.g,e.g++,t==0?o.return():(n=e.h*(1+(2*Math.random()-1)*e.o),E(o,new Promise(function(a){new rt(a).U(n/1e3)}),2))}e.h*=e.m,j(o)})}function _i(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function bt(){var e,t,n=new Promise(function(o,a){e=o,t=a});return n.resolve=e,n.reject=t,n}bt.prototype.resolve=function(){},bt.prototype.reject=function(){};function Ot(e,t){this.promise=e,this.i=t,this.g=!1}function No(e){return new Ot(Promise.reject(e),function(){return Promise.resolve()})}function ac(){var e=Promise.reject(new K(2,7,7001));return e.catch(function(){}),new Ot(e,function(){return Promise.resolve()})}function dr(e){return new Ot(Promise.resolve(e),function(){return Promise.resolve()})}function s0(e){return new Ot(e,function(){return e.catch(function(){})})}Ot.prototype.abort=function(){return this.g=!0,this.i()};function a0(e){return new Ot(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Ot.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Ot.prototype.pa=function(e,t){function n(c){return function(p){if(a.g&&c)u.reject(f);else{var m=c?e:t;m?o=ww(m,p,u):(c?u.resolve:u.reject)(p)}}}function o(){return u.reject(f),a.abort()}var a=this,u=new bt,f=new K(2,7,7001);return this.promise.then(n(!0),n(!1)),new Ot(u,function(){return o()})};function ww(e,t,n){try{var o=e(t);return o&&o.promise&&o.abort?(n.resolve(o.promise),function(){return o.abort()}):(n.resolve(o),function(){return Promise.resolve(o).then(function(){},function(){})})}catch(a){return n.reject(a),function(){return Promise.resolve()}}}ae("shaka.util.AbortableOperation",Ot),Ot.prototype.chain=Ot.prototype.pa,Ot.prototype.finally=Ot.prototype.finally,Ot.all=a0,Ot.prototype.abort=Ot.prototype.abort,Ot.notAbortable=s0,Ot.completed=dr,Ot.aborted=ac,Ot.failed=No;function Ge(e,t){if(t)if(t instanceof Map)for(var n=w(t.keys()),o=n.next();!o.done;o=n.next())o=o.value,Object.defineProperty(this,o,{value:t.get(o),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=d.performance&&d.performance.now?d.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function u0(e){var t=new Ge(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Ge.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ge.prototype.stopImmediatePropagation=function(){this.g=!0},Ge.prototype.stopPropagation=function(){},ae("shaka.util.FakeEvent",Ge);var fu={hi:"abrstatuschanged",ii:"adaptation",ji:"buffering",ki:"complete",li:"downloadfailed",mi:"downloadheadersreceived",ni:"drmsessionupdate",pi:"emsg",Gi:"prft",Error:"error",ri:"expirationupdated",si:"firstquartile",ti:"gapjumped",wi:"keystatuschanged",yi:"loaded",zi:"loading",Bi:"manifestparsed",Ci:"manifestupdated",Di:"mediaqualitychanged",Metadata:"metadata",Ei:"midpoint",Fi:"onstatechange",Ii:"ratechange",Ji:"segmentappended",Ki:"sessiondata",Li:"stalldetected",Mi:"started",Ni:"statechanged",Oi:"streaming",Pi:"textchanged",Qi:"texttrackvisibility",Ri:"thirdquartile",Si:"timelineregionadded",Ti:"timelineregionenter",Ui:"timelineregionexit",Vi:"trackschanged",Xi:"unloading",Zi:"variantchanged"};function ht(){this.ka=new Qa,this.zd=this}ht.prototype.addEventListener=function(e,t){this.ka&&this.ka.push(e,t)},ht.prototype.removeEventListener=function(e,t){this.ka&&this.ka.remove(e,t)},ht.prototype.dispatchEvent=function(e){if(!this.ka)return!0;var t=this.ka.get(e.type)||[],n=this.ka.get("All");for(n&&(t=t.concat(n)),t=w(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.zd,e.currentTarget=this.zd;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},ht.prototype.release=function(){this.ka=null};function pr(){this.g=[]}function Oo(e,t){e.g.push(t.finally(function(){wn(e.g,t)}))}pr.prototype.destroy=function(){for(var e=[],t=w(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Tt(e,t,n,o,a){ht.call(this),this.i=!1,this.m=new pr,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.u=o||null,this.A=a||null,this.o=!1}Z(Tt,ht),s=Tt.prototype,s.nf=function(e){this.o=e};function Fi(e,t,n,o){n=n||h0;var a=hu[e];(!a||n>=a.priority)&&(hu[e]={priority:n,Vd:t,Ih:o===void 0?!1:o})}s.Jh=function(e){this.g.add(e)},s.bi=function(e){this.g.delete(e)},s.Hg=function(){this.g.clear()},s.Kh=function(e){this.h.add(e)},s.ci=function(e){this.h.delete(e)},s.Ig=function(){this.h.clear()};function Yt(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}s.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),ht.prototype.release.call(this),this.m.destroy()},s.request=function(e,t,n){var o=this,a=new c0;if(this.i){var u=Promise.reject(new K(2,7,7001));return u.catch(function(){}),new cu(u,function(){return Promise.resolve()},a)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Po(t.retryParameters):_i(),t.uris=Po(t.uris),u=Sw(this,e,t,n);var f=u.pa(function(){return l0(o,e,t,n,new o0(t.retryParameters,!1),0,null,a)}),c=f.pa(function(C){return Tw(o,e,C,n)}),p=Date.now(),m=0;u.promise.then(function(){m=Date.now()-p},function(){});var v=0;f.promise.then(function(){v=Date.now()},function(){});var S=c.pa(function(C){var T=Date.now()-v,b=C.response;return b.timeMs+=m,b.timeMs+=T,C.qh||!o.l||b.fromCache||t.method=="HEAD"||e!=Ri||o.l(b.timeMs,b.data.byteLength,f0(n)),b},function(C){throw C&&(C.severity=2),C});return u=new cu(S.promise,function(){return S.abort()},a),Oo(this.m,u),u};function Sw(e,t,n,o){function a(c){u=u.pa(function(){return n.body&&(n.body=Pt(n.body)),c(t,n,o)})}var u=dr(void 0);e.u&&a(e.u),e=w(e.g);for(var f=e.next();!f.done;f=e.next())a(f.value);return u.pa(void 0,function(c){throw c instanceof K&&c.code==7001?c:new K(2,1,1006,c)})}function l0(e,t,n,o,a,u,f,c){e.o&&(n.uris[u]=n.uris[u].replace("http://","https://")),0<u&&e.A&&e.A(t,o,n.uris[u],n.uris[u-1]);var p=new Ut(n.uris[u]),m=p.ab,v=!1;m||(m=location.protocol,m=m.slice(0,-1),Ga(p,m),n.uris[u]=p.toString()),m=m.toLowerCase();var S=(m=hu[m])?m.Vd:null;if(!S)return No(new K(2,1,1e3,p));var C=m.Ih,T=null,b=null,_=!1,D=!1,B;return s0(r0(a)).pa(function(){if(e.i)return ac();B=Date.now();var N=S(n.uris[u],n,t,function(q,te,de){T&&T.stop(),b&&b.U(V/1e3),e.l&&t==Ri&&(e.l(q,te,f0(o)),v=!0,c.g=de)},function(q){e.j&&e.j(q,n,t),D=!0});if(!C)return N;var G=n.retryParameters.connectionTimeout;G&&(T=new rt(function(){_=!0,N.abort()}),T.U(G/1e3));var V=n.retryParameters.stallTimeout;return V&&(b=new rt(function(){_=!0,N.abort()})),N}).pa(function(N){T&&T.stop(),b&&b.stop(),N.timeMs==null&&(N.timeMs=Date.now()-B);var G={response:N,qh:v};return!D&&e.j&&e.j(N.headers,n,t),G},function(N){if(T&&T.stop(),b&&b.stop(),e.s){var G=null,V=0;N instanceof K&&(G=N,N.code==1001&&(V=N.data[1])),e.s(n,G,V,_)}if(e.i)return ac();if(_&&(N=new K(1,1,1003,n.uris[u],t)),N instanceof K){if(N.code==7001)throw N;if(N.code==1010)throw f;if(N.severity==1)return G=new Map().set("error",N),G=new Ge("retry",G),e.dispatchEvent(G),u=(u+1)%n.uris.length,l0(e,t,n,o,a,u,N,c)}throw N})}function Tw(e,t,n,o){var a=dr(void 0),u={};e=w(e.h);for(var f=e.next();!f.done;u={de:u.de},f=e.next())u.de=f.value,a=a.pa(function(c){return function(){var p=n.response;return p.data&&(p.data=Pt(p.data)),c.de(t,p,o)}}(u));return a.pa(function(){return n},function(c){var p=2;if(c instanceof K){if(c.code==7001)throw c;p=c.severity}throw new K(p,1,1007,c)})}function f0(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Zc)return!1}return!0}ae("shaka.net.NetworkingEngine",Tt),Tt.prototype.request=Tt.prototype.request,Tt.prototype.destroy=Tt.prototype.destroy,Tt.makeRequest=Yt,Tt.defaultRetryParameters=function(){return _i()},Tt.prototype.clearAllResponseFilters=Tt.prototype.Ig,Tt.prototype.unregisterResponseFilter=Tt.prototype.ci,Tt.prototype.registerResponseFilter=Tt.prototype.Kh,Tt.prototype.clearAllRequestFilters=Tt.prototype.Hg,Tt.prototype.unregisterRequestFilter=Tt.prototype.bi,Tt.prototype.registerRequestFilter=Tt.prototype.Jh,Tt.unregisterScheme=function(e){delete hu[e]},Tt.registerScheme=Fi,Tt.prototype.setForceHTTPS=Tt.prototype.nf;function c0(){this.g=0}Tt.NumBytesRemainingClass=c0;function cu(e,t,n){Ot.call(this,e,t),this.h=n}Z(cu,Ot),Tt.PendingRequest=cu;var Ri=1;Tt.RequestType={MANIFEST:0,SEGMENT:Ri,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Tt.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var h0=3;Tt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:h0};var hu={};function mr(e){this.g=!1,this.h=new bt,this.i=e}mr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function gt(e,t){if(e.g)throw t instanceof K&&t.code==7003?t:new K(2,7,7003,t)}function Ct(){this.g=new Qa}s=Ct.prototype,s.release=function(){this.Za(),this.g=null},s.D=function(e,t,n,o){this.g&&(e=new d0(e,t,n,o),this.g.push(t,e))},s.ja=function(e,t,n,o){function a(f){u.Vb(e,t,a),n(f)}var u=this;this.D(e,t,a,o)},s.Vb=function(e,t,n){if(this.g){var o=this.g.get(t)||[];o=w(o);for(var a=o.next();!a.done;a=o.next())a=a.value,a.target!=e||n!=a.listener&&n||(a.Vb(),this.g.remove(t,a))}},s.Za=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,L(e.g[n]));for(e=w(t),t=e.next();!t.done;t=e.next())t.value.Vb();this.g.g={}}},ae("shaka.util.EventManager",Ct),Ct.prototype.removeAll=Ct.prototype.Za,Ct.prototype.unlisten=Ct.prototype.Vb,Ct.prototype.listenOnce=Ct.prototype.ja,Ct.prototype.listen=Ct.prototype.D,Ct.prototype.release=Ct.prototype.release;function d0(e,t,n,o){this.target=e,this.type=t,this.listener=n,this.g=Cw(e,o),this.target.addEventListener(t,n,this.g)}d0.prototype.Vb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Cw(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(o){return!n.has(o)}),Ew(e)?t:t.capture||!1}function Ew(e){var t=p0;if(t==null){t=!1;try{var n={},o={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",o),Object.defineProperty(n,"capture",o),o=function(){},e.addEventListener("test",o,n),e.removeEventListener("test",o,n)}catch{t=!1}p0=t}return t||!1}var p0=void 0;function uc(e,t){var n=[];e=w(e);for(var o=e.next();!o.done;o=e.next())n.push(t(o.value));return n}function Aw(e,t){e=w(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function gr(e){this.h=e,this.g=void 0}gr.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Rs(e){for(var t=new Map,n=w(Object.keys(e)),o=n.next();!o.done;o=n.next())o=o.value,t.set(o,e[o]);return t}function lc(e){var t={};return e.forEach(function(n,o){t[o]=n}),t}function Uo(){}function It(e){if(!e)return"";if(e=Ve(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),d.TextDecoder&&!ur())return e=new TextDecoder().decode(e),e.includes("�")&&De('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var o=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(o=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(o=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(o=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):o=e[n],65535>=o)t+=String.fromCharCode(o);else{o-=65536;var a=o&1023;t+=String.fromCharCode(55296+(o>>10)),t+=String.fromCharCode(56320+a)}}return t}function zi(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new K(2,2,2004);n=Math.floor(e.byteLength/2);var o=new Uint16Array(n);e=Et(e);for(var a=0;a<n;a++)o[a]=e.getUint16(2*a,t);return cc.value()(o)}function uo(e){function t(o){return n.byteLength<=o||32<=n[o]&&126>=n[o]}if(!e)return"";var n=Ve(e);if(n[0]==239&&n[1]==187&&n[2]==191)return It(n);if(n[0]==254&&n[1]==255)return zi(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return zi(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return zi(e,!1);if(n[1]==0&&n[3]==0)return zi(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return It(e);throw new K(2,2,2003)}function Vi(e){if(d.TextEncoder&&!ur()){var t=new TextEncoder;return Pt(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Pt(t)}function fc(e,t){for(var n=new ArrayBuffer(2*e.length),o=new DataView(n),a=0;a<e.length;++a)o.setUint16(2*a,e.charCodeAt(a),t);return n}ae("shaka.util.StringUtils",Uo),Uo.resetFromCharCode=function(){cc.g=void 0},Uo.toUTF16=fc,Uo.toUTF8=Vi,Uo.fromBytesAutoDetect=uo,Uo.fromUTF16=zi,Uo.fromUTF8=It;var cc=new gr(function(){function e(n){try{var o=new Uint8Array(n);return 0<String.fromCharCode.apply(null,o).length}catch{return!1}}for(var t={yb:65536};0<t.yb;t={yb:t.yb},t.yb/=2)if(e(t.yb))return function(n){return function(o){for(var a="",u=0;u<o.length;u+=n.yb)a+=String.fromCharCode.apply(null,o.subarray(u,u+n.yb));return a}}(t);return null});function yt(e,t){this.h=Et(e),this.i=t==m0,this.g=0}s=yt.prototype,s.ia=function(){return this.g<this.h.byteLength},s.qa=function(){return this.g},s.getLength=function(){return this.h.byteLength},s.ga=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Hi()}},s.Ea=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Hi()}},s.L=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Hi()}},s.fg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Hi()}},s.oc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Hi()}if(2097151<t)throw new K(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},s.ub=function(e){if(this.g+e>this.h.byteLength)throw Hi();var t=Ve(this.h,this.g,e);return this.g+=e,t},s.skip=function(e){if(this.g+e>this.h.byteLength)throw Hi();this.g+=e},s.Rh=function(e){if(this.g<e)throw Hi();this.g-=e},s.seek=function(e){if(0>e||e>this.h.byteLength)throw Hi();this.g=e},s.ad=function(){for(var e=this.g;this.ia()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Ve(this.h,e,this.g-e),this.g+=1,It(e)};function Hi(){return new K(2,3,3e3)}ae("shaka.util.DataViewReader",yt),yt.prototype.readTerminatedString=yt.prototype.ad,yt.prototype.seek=yt.prototype.seek,yt.prototype.rewind=yt.prototype.Rh,yt.prototype.skip=yt.prototype.skip,yt.prototype.readBytes=yt.prototype.ub,yt.prototype.readUint64=yt.prototype.oc,yt.prototype.readInt32=yt.prototype.fg,yt.prototype.readUint32=yt.prototype.L,yt.prototype.readUint16=yt.prototype.Ea,yt.prototype.readUint8=yt.prototype.ga,yt.prototype.getLength=yt.prototype.getLength,yt.prototype.getPosition=yt.prototype.qa,yt.prototype.hasMoreData=yt.prototype.ia;var m0=1;yt.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:m0};function St(){this.i=[],this.h=[],this.g=!1}s=St.prototype,s.box=function(e,t){return e=g0(e),this.i[e]=bw,this.h[e]=t,this},s.O=function(e,t){return e=g0(e),this.i[e]=y0,this.h[e]=t,this},s.stop=function(){this.g=!0},s.parse=function(e,t,n){for(e=new yt(e,0),this.g=!1;e.ia()&&!this.g;)this.Yc(0,e,t,n)},s.Yc=function(e,t,n,o){var a=t.qa();if(o&&a+8>t.getLength())this.g=!0;else{var u=t.L(),f=t.L(),c=pu(f),p=!1;switch(u){case 0:u=t.getLength()-a;break;case 1:if(o&&t.qa()+8>t.getLength()){this.g=!0;return}u=t.oc(),p=!0}var m=this.h[f];if(m){var v=null,S=null;if(this.i[f]==y0){if(o&&t.qa()+4>t.getLength()){this.g=!0;return}S=t.L(),v=S>>>24,S&=16777215}f=a+u,n&&f>t.getLength()&&(f=t.getLength()),o&&f>t.getLength()?this.g=!0:(o=f-t.qa(),t=0<o?t.ub(o):new Uint8Array(0),t=new yt(t,0),m({name:c,parser:this,partialOkay:n||!1,version:v,flags:S,reader:t,size:u,start:a+e,has64BitSize:p}))}else t.skip(Math.min(a+u-t.qa(),t.getLength()-t.qa()))}};function dt(e){for(var t=Ls(e);e.reader.ia()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function yr(e){for(var t=Ls(e),n=e.reader.L(),o=0;o<n&&(e.parser.Yc(e.start+t,e.reader,e.partialOkay),!e.parser.g);o++);}function du(e){var t=Ls(e);for(e.reader.skip(78);e.reader.ia()&&!e.parser.g;)e.parser.Yc(e.start+t,e.reader,e.partialOkay)}function vr(e){return function(t){e(t.reader.ub(t.reader.getLength()-t.reader.qa()))}}function g0(e){var t=0;e=w(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function pu(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Ls(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}ae("shaka.util.Mp4Parser",St),St.headerSize=Ls,St.typeToString=pu,St.allData=vr,St.visualSampleEntry=du,St.sampleDescription=yr,St.children=dt,St.prototype.parseNext=St.prototype.Yc,St.prototype.parse=St.prototype.parse,St.prototype.stop=St.prototype.stop,St.prototype.fullBox=St.prototype.O,St.prototype.box=St.prototype.box;var bw=0,y0=1;function un(){}function v0(e){return e=Ve(e),e=cc.value()(e),btoa(e)}function Bo(e,t){return t=t??!0,e=v0(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function ui(e){e=d.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function jo(e){for(var t=e.length/2,n=new Uint8Array(t),o=0;o<t;o++)n[o]=d.parseInt(e.substr(2*o,2),16);return n}function xr(e){var t=Ve(e);e="",t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function Lt(){for(var e=Re.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var o=n=0;o<e.length;++o){var a=e[o];a instanceof Uint8Array?t.set(a,n):t.set(Ve(a),n),n+=a.byteLength}return t}ae("shaka.util.Uint8ArrayUtils",un),un.concat=Lt,un.toHex=xr,un.fromHex=jo,un.fromBase64=ui,un.toBase64=Bo,un.toStandardBase64=v0;function x0(e){var t=this;this.g=[],this.h=[],this.data=[],new St().box("moov",dt).box("moof",dt).O("pssh",function(n){if(!(1<n.version)){var o=Ve(n.reader.h,-12,n.size);if(t.data.push(o),t.g.push(xr(n.reader.ub(16))),0<n.version){o=n.reader.L();for(var a=0;a<o;a++){var u=xr(n.reader.ub(16));t.h.push(u)}}}}).parse(e)}function mu(e,t,n,o){var a=e.length,u=t.length+16+a;0<o&&(u+=4+16*n.size);var f=new Uint8Array(u),c=Et(f),p=0;if(c.setUint32(p,u),p+=4,c.setUint32(p,1886614376),p+=4,1>o?c.setUint32(p,0):c.setUint32(p,16777216),p+=4,f.set(t,p),p+=t.length,0<o)for(c.setUint32(p,n.size),p+=4,t=w(n),n=t.next();!n.done;n=t.next())n=jo(n.value),f.set(n,p),p+=n.length;return c.setUint32(p,a),f.set(e,p+4),f}function li(e,t){return e=kt(e,t),e.length!=1?null:e[0]}function $i(e,t,n){return e=w0(e,t,n),e.length!=1?null:e[0]}function kt(e,t){var n=[];e=w(e.childNodes);for(var o=e.next();!o.done;o=e.next())o=o.value,o instanceof Element&&o.tagName==t&&n.push(o);return n}function Iw(e){return Array.from(e.childNodes).filter(function(t){return t instanceof Element})}function w0(e,t,n){var o=[];e=w(e.childNodes);for(var a=e.next();!a.done;a=e.next())a=a.value,a instanceof Element&&a.localName==n&&a.namespaceURI==t&&o.push(a);return o}function Fo(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Li(e,t,n){t=w(t);for(var o=t.next();!o.done;o=t.next())if(o=o.value,e.hasAttributeNS(o,n))return e.getAttributeNS(o,n);return null}function zo(e){return Array.from(e.childNodes).every(hc)?e.textContent.trim():null}function hc(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function st(e,t,n,o){o=o===void 0?null:o;var a=null;return e=e.getAttribute(t),e!=null&&(a=n(e)),a??o}function S0(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Gi(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function gu(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function yu(e){return e=Number(e),e%1===0?e:null}function Wi(e){return e=Number(e),e%1===0&&0<e?e:null}function dn(e){return e=Number(e),e%1===0&&0<=e?e:null}function Ps(e){return e=Number(e),isNaN(e)?null:e}function dc(e){return e?e.toLowerCase()==="true":!1}function kw(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function wr(e,t){var n=new DOMParser,o=Mw.value()(e);e=null;try{e=n.parseFromString(o,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function pc(e,t){try{var n=uo(e);return wr(n,t)}catch{return null}}var Mw=new gr(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function vu(e,t){var n=this;t=t===void 0?1:t,this.C=e,this.H=new Set,this.m=this.s=null,this.ma=this.da=!1,this.I=0,this.g=null,this.A=new Ct,this.i=new Map,this.u=new Map,this.l=new bt,this.h=null,this.o=function(o){o.severity==2&&n.l.reject(o),e.onError(o)},this.V=new Map,this.ea=new Map,this.W=new rt(function(){return Fw(n)}),this.K=!1,this.J=[],this.N=!1,this.ka=new rt(function(){Hw(n)}).$a(t),this.l.catch(function(){}),this.j=new mr(function(){return _w(n)}),this.Y=!1,this.F=this.G=null}s=vu.prototype,s.destroy=function(){return this.j.destroy()};function _w(e){return z(function(t){switch(t.g){case 1:return e.A.release(),e.A=null,e.l.reject(),e.ka.stop(),e.ka=null,e.W.stop(),e.W=null,E(t,L0(e),2);case 2:if(!e.m){t.B(3);break}return re(t,4),E(t,e.m.setMediaKeys(null),6);case 6:ie(t,5);break;case 4:se(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.u=new Map,e.h=null,e.o=function(){},e.C=null,e.Y=!1,e.G=null,j(t)}})}s.configure=function(e){this.h=e};function Rw(e,t,n){return e.ma=!0,e.u=new Map,e.K=n,C0(e,t)}function T0(e,t,n){e.u=new Map,n=w(n);for(var o=n.next();!o.done;o=n.next())e.u.set(o.value,{initData:null,initDataType:null});for(n=w(e.h.persistentSessionsMetadata),o=n.next();!o.done;o=n.next())o=o.value,e.u.set(o.sessionId,{initData:o.initData,initDataType:o.initDataType});return e.K=0<e.u.size,C0(e,t)}function Lw(e,t,n,o,a,u){var f=new Map;return a={audioCapabilities:a,videoCapabilities:u,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},a.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:o,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,a),k0(e,f,[])}function C0(e,t){var n,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N;return z(function(G){if(G.g==1){if(n=Bw(e))for(o=w(t),a=o.next();!a.done;a=o.next())u=a.value,u.video&&(u.video.drmInfos=[n]),u.audio&&(u.audio.drmInfos=[n]);for(f=t.some(function(V){return!!(V.video&&V.video.drmInfos.length||V.audio&&V.audio.drmInfos.length)}),f||(c=Rs(e.h.servers),Gw(t,c)),p=new Set,m=w(t),a=m.next();!a.done;a=m.next())for(v=a.value,S=D0(v),C=w(S),T=C.next();!T.done;T=C.next())b=T.value,p.add(b);for(_=w(p),T=_.next();!T.done;T=_.next())D=T.value,Ww(D,Rs(e.h.servers),Rs(e.h.advanced||{}),e.h.keySystemsMapping);return E(G,Gp(t,e.K,e.Y,e.h.preferredKeySystems),2)}return B=f||Object.keys(e.h.servers).length,B?(N=k0(e,void 0,t),G.return(f?N:N.catch(function(){}))):(e.da=!0,G.return(Promise.resolve()))})}function E0(e){var t;return z(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.B(2);break}return E(n,e.G,3);case 3:return gt(e.j),n.return();case 2:return re(n,4),e.G=e.m.setMediaKeys(e.s),E(n,e.G,6);case 6:ie(n,5);break;case 4:t=se(n),e.o(new K(2,6,6003,t.message));case 5:gt(e.j),j(n)}})}function Pw(e,t){return z(function(n){if(n.g==1)return E(n,E0(e),2);Ds(e,t.initDataType,Ve(t.initData)),j(n)})}s.Ic=function(e){var t=this;return z(function(n){if(n.g==1)return t.s?(t.m=e,t.A.ja(t.m,"play",function(){for(var o=w(t.J),a=o.next();!a.done;a=o.next())gc(t,a.value);t.N=!0,t.J=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.A.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return L0(t)}),t.F=t.g&&t.g.initData.find(function(o){return 0<o.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.u.size?E(n,E0(t),2):n.B(2)):(t.A.ja(e,"encrypted",function(){t.o(new K(2,6,6010))}),n.return());A0(t).catch(function(){}),t.F||t.u.size||t.h.parseInbandPsshEnabled||t.A.D(t.m,"encrypted",function(o){return Pw(t,o)}),j(n)})};function Dw(e){var t,n,o,a,u;return z(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.B(2);break}return t=Yt([e.g.serverCertificateUri],e.h.retryParameters),re(f,3),n=e.C.Tb.request(5,t),E(f,n.promise,5);case 5:o=f.h,e.g.serverCertificate=Ve(o.data),ie(f,4);break;case 3:throw a=se(f),new K(2,6,6017,a);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(re(f,6),E(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:ie(f,0);break;case 6:throw u=se(f),new K(2,6,6004,u.message)}})}function Nw(e,t){var n,o,a;return z(function(u){if(u.g==1)return E(u,_0(e,t,{initData:null,initDataType:null}),2);if(u.g!=3)return n=u.h,n?(o=[],(a=e.i.get(n))&&(a.hb=new bt,o.push(a.hb)),o.push(n.remove()),E(u,Promise.all(o),3)):u.return();e.i.delete(n),j(u)})}function A0(e){var t,n,o,a,u;return z(function(f){if(f.g==1)return e.u.size?(e.u.forEach(function(c,p){_0(e,p,c)}),E(f,e.l,3)):f.B(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&$w(e))return f.return(e.l);e.l=new bt,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],o=w(n),a=o.next();!a.done;a=o.next())u=a.value,Ds(e,u.initDataType,u.initData);return n.length||e.l.resolve(),f.return(e.l)})}function Ds(e,t,n){if(n.length){var o=e.i.values();o=w(o);for(var a=o.next();!a.done;a=o.next())if(nt(n,a.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&vc(e)&&(e.l.resolve(),e.l=new bt,e.l.catch(function(){})),jw(e,t,n,e.g.sessionType)}}function b0(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function I0(e){return e=e.i.keys(),e=uc(e,function(t){return t.sessionId}),Array.from(e)}s.Fe=function(){var e=this,t=this.i.keys();return t=uc(t,function(n){var o=e.i.get(n);return{sessionId:n.sessionId,sessionType:o.type,initData:o.initData,initDataType:o.initDataType}}),Array.from(t)},s.Qc=function(){var e=1/0,t=this.i.keys();t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},s.Bd=function(){return lc(this.ea)};function k0(e,t,n){var o,a,u,f,c,p,m,v,S,C,T,b,_,D,B;return z(function(N){switch(N.g){case 1:if(o=new Map,n.length){a=Ow(e,n,o),N.B(2);break}return E(N,Uw(e,t),3);case 3:a=N.h;case 2:if(u=a,!u)throw new K(2,6,6001);for(gt(e.j),re(N,4),e.H.clear(),f=u.getConfiguration(),c=f.audioCapabilities||[],p=f.videoCapabilities||[],m=w(c),v=m.next();!v.done;v=m.next())S=v.value,e.H.add(S.contentType.toLowerCase());for(C=w(p),v=C.next();!v.done;v=C.next())T=v.value,e.H.add(T.contentType.toLowerCase());if(n.length){var G=u.keySystem,V=o.get(u.keySystem),q=[],te=[],de=[],ce=[],he=new Set;N0(V,q,de,te,ce,he);var me=e.K?"persistent-license":"temporary";for(G={keySystem:G,licenseServerUri:q[0],distinctiveIdentifierRequired:V[0].distinctiveIdentifierRequired,persistentStateRequired:V[0].persistentStateRequired,sessionType:V[0].sessionType||me,audioRobustness:V[0].audioRobustness||"",videoRobustness:V[0].videoRobustness||"",serverCertificate:de[0],serverCertificateUri:te[0],initData:ce,keyIds:he},V=w(V),q=V.next();!q.done;q=V.next())q=q.value,q.distinctiveIdentifierRequired&&(G.distinctiveIdentifierRequired=q.distinctiveIdentifierRequired),q.persistentStateRequired&&(G.persistentStateRequired=q.persistentStateRequired);V=G}else V=u.keySystem,G=t.get(u.keySystem),q=[],te=[],de=[],ce=[],he=new Set,N0(G.drmInfos,q,de,te,ce,he),V={keySystem:V,licenseServerUri:q[0],distinctiveIdentifierRequired:G.distinctiveIdentifier=="required",persistentStateRequired:G.persistentState=="required",sessionType:G.sessionTypes[0]||"temporary",audioRobustness:(G.audioCapabilities?G.audioCapabilities[0].robustness:"")||"",videoRobustness:(G.videoCapabilities?G.videoCapabilities[0].robustness:"")||"",serverCertificate:de[0],serverCertificateUri:te[0],initData:ce,keyIds:he};if(e.g=V,!e.g.licenseServerUri)throw new K(2,6,6012,e.g.keySystem);return E(N,u.createMediaKeys(),6);case 6:if(b=N.h,gt(e.j),e.s=b,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){N.B(7);break}return re(N,8),E(N,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(_=N.h,_!="usable")throw new K(2,6,6018);gt(e.j),ie(N,7,4);break;case 8:throw D=se(N,4),D instanceof K?D:new K(2,6,6019,D.message);case 7:return e.da=!0,E(N,Dw(e),11);case 11:gt(e.j),ie(N,0);break;case 4:throw B=se(N),gt(e.j,B),e.g=null,e.H.clear(),B instanceof K?B:new K(2,6,6002,B.message)}})}function Ow(e,t,n){for(var o=w(t),a=o.next();!a.done;a=o.next()){var u=w(D0(a.value));for(a=u.next();!a.done;a=u.next())a=a.value,n.has(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a)}if(n.size==1&&n.has(""))throw new K(2,6,6e3);for(o={},e=w(e.h.preferredKeySystems),a=e.next();!a.done;o={ce:o.ce},a=e.next())for(o.ce=a.value,u=w(t),a=u.next();!a.done;a=u.next())if(a=a.value.decodingInfos.find(function(m){return function(v){return v.supported&&v.keySystemAccess!=null&&v.keySystemAccess.keySystem==m.ce}}(o)))return a.keySystemAccess;for(e=w([!0,!1]),a=e.next();!a.done;a=e.next())for(o=a.value,u=w(t),a=u.next();!a.done;a=u.next()){var f=w(a.value.decodingInfos);for(a=f.next();!a.done;a=f.next()){var c=a.value;if(c.supported&&c.keySystemAccess){a=n.get(c.keySystemAccess.keySystem);var p=w(a);for(a=p.next();!a.done;a=p.next())if(!!a.value.licenseServerUri==o)return c.keySystemAccess}}}return null}function Uw(e,t){var n,o,a,u,f,c,p,m,v,S,C,T,b,_,D;return z(function(B){switch(B.g){case 1:if(t.size==1&&t.has(""))throw new K(2,6,6e3);for(o=w(t.values()),a=o.next();!a.done;a=o.next())u=a.value,u.audioCapabilities.length==0&&delete u.audioCapabilities,u.videoCapabilities.length==0&&delete u.videoCapabilities;f=w(e.h.preferredKeySystems),c=f.next();case 2:if(c.done){B.B(4);break}if(p=c.value,!t.has(p)){B.B(3);break}return m=t.get(p),re(B,6),E(B,navigator.requestMediaKeySystemAccess(p,[m]),8);case 8:return n=B.h,B.return(n);case 6:se(B);case 7:gt(e.j);case 3:c=f.next(),B.B(2);break;case 4:v=w([!0,!1]),S=v.next();case 9:if(S.done){B.B(11);break}C=S.value,T=w(t.keys()),c=T.next();case 12:if(c.done){S=v.next(),B.B(9);break}if(b=c.value,_=t.get(b),D=_.drmInfos.some(function(N){return!!N.licenseServerUri}),D!=C){B.B(13);break}return re(B,15),E(B,navigator.requestMediaKeySystemAccess(b,[_]),17);case 17:return n=B.h,B.return(n);case 15:se(B);case 16:gt(e.j);case 13:c=T.next(),B.B(12);break;case 11:return B.return(n)}})}function Bw(e){if(e=Rs(e.h.clearKeys),e.size==0)return null;var t=[],n=[];e.forEach(function(a,u){var f=u;f.length!=22&&(f=Bo(jo(u),!1)),u=a,u.length!=22&&(u=Bo(jo(a),!1)),a={kty:"oct",kid:f,k:u},t.push(a),n.push(a.kid)}),e=JSON.stringify({keys:t});var o=JSON.stringify({kids:n});return o=[{initData:Ve(Vi(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+d.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(n)}}function mc(e){vc(e)&&e.l.resolve()}function M0(e,t){new rt(function(){t.loaded=!0,mc(e)}).U(Kw)}function _0(e,t,n){var o,a,u,f,c,p,m;return z(function(v){switch(v.g){case 1:try{o=e.s.createSession("persistent-license")}catch(S){return a=new K(2,6,6005,S.message),e.o(a),v.return(Promise.reject(a))}return e.A.D(o,"message",function(S){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.N?e.J.push(S):gc(e,S)}),e.A.D(o,"keystatuseschange",function(S){return R0(e,S)}),u={initData:n.initData,initDataType:n.initDataType,loaded:!1,$e:1/0,hb:null,type:"persistent-license"},e.i.set(o,u),re(v,2),E(v,o.load(t),4);case 4:return f=v.h,gt(e.j),f||(e.i.delete(o),c=e.h.persistentSessionOnlinePlayback?1:2,e.o(new K(c,6,6013)),u.loaded=!0),M0(e,u),mc(e),v.return(o);case 2:p=se(v),gt(e.j,p),e.i.delete(o),m=e.h.persistentSessionOnlinePlayback?1:2,e.o(new K(m,6,6005,p.message)),u.loaded=!0,mc(e);case 3:return v.return(Promise.resolve())}})}function jw(e,t,n,o){try{var a=e.s.createSession(o)}catch(u){e.o(new K(2,6,6005,u.message));return}e.A.D(a,"message",function(u){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.N?e.J.push(u):gc(e,u)}),e.A.D(a,"keystatuseschange",function(u){return R0(e,u)}),e.i.set(a,{initData:n,initDataType:t,loaded:!1,$e:1/0,hb:null,type:o});try{n=e.h.initDataTransform(n,t,e.g)}catch(u){t=u,u instanceof K||(t=new K(2,6,6016,u)),e.o(t);return}e.h.logLicenseExchange&&Bo(n),a.generateRequest(t,n).catch(function(u){if(!e.j.g){e.i.delete(a);var f=u.errorCode;if(f&&f.systemCode){var c=f.systemCode;0>c&&(c+=Math.pow(2,32)),c="0x"+c.toString(16)}e.o(new K(2,6,6006,u.message,u,c))}})}function gc(e,t){var n,o,a,u,f,c,p,m,v,S,C,T,b;z(function(_){switch(_.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Bo(t.message),o=e.i.get(n),a=e.g.licenseServerUri,u=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&u&&u.individualizationServer&&(a=u.individualizationServer),f=Yt([a],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,o&&(f.initData=o.initData,f.initDataType=o.initDataType),b0(e.g.keySystem)){var D=zi(f.body,!0,!0);if(D.includes("PlayReadyKeyMessage")){D=wr(D,"PlayReadyKeyMessage");for(var B=w(D.getElementsByTagName("HttpHeader")),N=B.next();!N.done;N=B.next())N=N.value,f.headers[N.getElementsByTagName("name")[0].textContent]=N.getElementsByTagName("value")[0].textContent;f.body=ui(D.getElementsByTagName("Challenge")[0].textContent)}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return c=Date.now(),re(_,2),m=e.C.Tb.request(2,f),E(_,m.promise,4);case 4:p=_.h,ie(_,3);break;case 2:return v=se(_),S=new K(2,6,6007,v),e.o(S),o&&o.hb&&o.hb.reject(S),_.return();case 3:return e.j.g?_.return():(e.I+=(Date.now()-c)/1e3,e.h.logLicenseExchange&&Bo(p.data),re(_,5),E(_,n.update(p.data),7));case 7:ie(_,6);break;case 5:return C=se(_),T=new K(2,6,6008,C.message),e.o(T),o&&o.hb&&o.hb.reject(T),_.return();case 6:if(e.j.g)return _.return();b=new Ge("drmsessionupdate"),e.C.onEvent(b),o&&(o.hb&&o.hb.resolve(),M0(e,o)),j(_)}})}function R0(e,t){t=t.target;var n=e.i.get(t),o=!1;t.keyStatuses.forEach(function(u,f){if(typeof f=="string"){var c=f;f=u,u=c}if(b0(e.g.keySystem)&&f.byteLength==16&&(Qf()||ur())){c=Et(f);var p=c.getUint32(0,!0),m=c.getUint16(4,!0),v=c.getUint16(6,!0);c.setUint32(0,p,!1),c.setUint16(4,m,!1),c.setUint16(6,v,!1)}u!="status-pending"&&(n.loaded=!0),u=="expired"&&(o=!0),f=xr(f).slice(0,32),e.V.set(f,u)});var a=t.expiration-Date.now();(0>a||o&&1e3>a)&&n&&!n.hb&&(e.i.delete(t),t.close().catch(function(){})),vc(e)&&(e.l.resolve(),e.W.U(Yw))}function Fw(e){var t=e.V,n=e.ea;n.clear(),t.forEach(function(o,a){return n.set(a,o)}),t=Array.from(n.values()),t.length&&t.every(function(o){return o=="expired"})&&e.o(new K(2,6,6014)),e.C.Ud(lc(n))}function zw(){var e,t,n,o,a,u,f,c;return z(function(p){return p.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},o={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},a=[o,n],u=new Map,f=function(m){var v,S,C;return z(function(T){switch(T.g){case 1:if(re(T,2),m==="org.w3.clearkey"&&tu())throw Error("Unsupported keySystem");return E(T,navigator.requestMediaKeySystemAccess(m,a),4);case 4:return v=T.h,C=(S=v.getConfiguration().sessionTypes)?S.includes("persistent-license"):!1,Za()&&(C=!1),u.set(m,{persistentState:C}),E(T,v.createMediaKeys(),5);case 5:ie(T,0);break;case 2:se(T),u.set(m,null),j(T)}})},c=e.map(function(m){return f(m)}),E(p,Promise.all(c),2)):p.return(lc(u))})}function Vw(e){var t;return z(function(n){if(n.g==1)return t=new Promise(function(o,a){new rt(a).U(Xw)}),re(n,2),E(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return ie(n,0);se(n),j(n)})}function L0(e){var t;return z(function(n){return t=Array.from(e.i.entries()),e.i.clear(),E(n,Promise.all(t.map(function(o){o=w(o);var a=o.next().value,u=o.next().value;return z(function(f){if(f.g==1)return re(f,2),e.ma||e.u.has(a.sessionId)||u.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?E(f,Vw(a),5):E(f,a.remove(),5);if(f.g!=2)return ie(f,0);se(f),j(f)})})),0)})}function P0(e,t){return e.length&&t.length&&e!==t?0<yc(e,t).length:!0}function yc(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=w(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;for(var a=w(t),u=a.next();!u.done;u=a.next())if(u=u.value,o.keySystem==u.keySystem){a=new Map;for(var f=w((o.initData||[]).concat(u.initData||[])),c=f.next();!c.done;c=f.next())c=c.value,a.set(c.keyId,c);a=Array.from(a.values()),f=o.keyIds&&u.keyIds?new Set([].concat(L(o.keyIds),L(u.keyIds))):o.keyIds||u.keyIds,n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||u.persistentStateRequired,videoRobustness:o.videoRobustness||u.videoRobustness,audioRobustness:o.audioRobustness||u.audioRobustness,serverCertificate:o.serverCertificate||u.serverCertificate,serverCertificateUri:o.serverCertificateUri||u.serverCertificateUri,initData:a,keyIds:f});break}}return n}function D0(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Hw(e){e.i.forEach(function(t,n){var o=t.$e,a=n.expiration;isNaN(a)&&(a=1/0),a!=o&&(e.C.onExpirationUpdated(n.sessionId,a),t.$e=a)})}function vc(e){return e=e.i.values(),Aw(e,function(t){return t.loaded})}function $w(e){for(var t=w(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.V.get(n.value)!=="usable")return!1;return!0}function Gw(e,t){var n=[];for(t.forEach(function(o,a){n.push({keySystem:a,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=w(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function N0(e,t,n,o,a,u){var f={};e=w(e);for(var c=e.next();!c.done;f={Fa:f.Fa},c=e.next()){if(f.Fa=c.value,t.includes(f.Fa.licenseServerUri)||t.push(f.Fa.licenseServerUri),o.includes(f.Fa.serverCertificateUri)||o.push(f.Fa.serverCertificateUri),f.Fa.serverCertificate&&(n.some(function(v){return function(S){return nt(S,v.Fa.serverCertificate)}}(f))||n.push(f.Fa.serverCertificate)),f.Fa.initData){c={};for(var p=w(f.Fa.initData),m=p.next();!m.done;c={kd:c.kd},m=p.next())c.kd=m.value,a.some(function(v){return function(S){var C=v.kd;return S.keyId&&S.keyId==C.keyId?!0:S.initDataType==C.initDataType&&nt(S.initData,C.initData)}}(c))||a.push(c.kd)}if(f.Fa.keyIds)for(c=w(f.Fa.keyIds),p=c.next();!p.done;p=c.next())u.add(p.value)}}function Ww(e,t,n,o){var a=e.keySystem;a&&(a!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(a)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(a))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),o[a]&&(e.keySystem=o[a]),d.cast&&d.cast.__platform__&&a=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Xw=1,Kw=5,Yw=.5,xu=new gr(function(){return Pt(new Uint8Array([0]))});function Ns(){}function O0(e,t){if(t){var n=fi[t.toLowerCase()];if(n)return n}throw new K(2,4,4e3,e,t)}ae("shaka.media.ManifestParser",Ns),Ns.unregisterParserByMime=function(e){delete fi[e]},Ns.registerParserByMime=function(e,t){fi[e]=t},Ns.registerParserByExtension=function(){ai("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Ns.AccessibilityPurpose={Yi:"visually impaired",ui:"hard of hearing"};var fi={};function qw(e){function t(){o=!0}function n(m){u.push(m),dt(m)}e=Ve(e);var o=!1,a,u=[],f=[];if(new St().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(m){a=m,u.push(m),yr(m)}).O("encv",t).O("enca",t).O("dvav",function(m){f.push({box:m,Ma:1701733238})}).O("dva1",function(m){f.push({box:m,Ma:1701733238})}).O("dvh1",function(m){f.push({box:m,Ma:1701733238})}).O("dvhe",function(m){f.push({box:m,Ma:1701733238})}).O("hev1",function(m){f.push({box:m,Ma:1701733238})}).O("hvc1",function(m){f.push({box:m,Ma:1701733238})}).O("avc1",function(m){f.push({box:m,Ma:1701733238})}).O("avc3",function(m){f.push({box:m,Ma:1701733238})}).O("ac-3",function(m){f.push({box:m,Ma:1701733217})}).O("ec-3",function(m){f.push({box:m,Ma:1701733217})}).O("ac-4",function(m){f.push({box:m,Ma:1701733217})}).O("mp4a",function(m){f.push({box:m,Ma:1701733217})}).parse(e),o)return e;if(f.length==0||!a)throw xr(e),new K(2,3,3019);f.reverse();for(var c=w(f),p=c.next();!p.done;p=c.next())p=p.value,e=Qw(e,a,p.box,u,p.Ma);return e}function Qw(e,t,n,o,a){var u=Zw.value(),f=e.subarray(n.start,n.start+n.size),c=Et(f),p=new Uint8Array(n.size+u.byteLength);for(p.set(f,0),f=Et(p),f.setUint32(4,a),p.set(u,n.size),a=c.getUint32(4),f.setUint32(n.size+16,a),U0(p,0,p.byteLength),a=new Uint8Array(e.byteLength+p.byteLength),n=Ms()?n.start:n.start+n.size,u=e.subarray(n),a.set(e.subarray(0,n)),a.set(p,n),a.set(u,n+p.byteLength),e=w(o),o=e.next();!o.done;o=e.next())o=o.value,U0(a,o.start,o.size+p.byteLength);return p=Et(a,t.start),t=Ls(t),e=p.getUint32(t),p.setUint32(t,e+1),a}function U0(e,t,n){e=Et(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Zw=new gr(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function $n(e,t,n,o,a,u,f){this.Z=e,this.Qa=t,this.wa=n,this.Ve=o===void 0?null:o,this.timescale=a===void 0?null:a,this.g=u===void 0?null:u,this.aes128Key=f===void 0?null:f,this.mimeType=this.codecs=null}$n.prototype.ic=function(){return this.Qa},$n.prototype.fc=function(){return this.wa};function B0(e,t){return e===t?!0:e&&t?e.ic()==t.ic()&&e.fc()==t.fc()&&ii(e.Z().sort(),t.Z().sort())&&nt(e.g,t.g):e==t}ae("shaka.media.InitSegmentReference",$n),$n.prototype.getEndByte=$n.prototype.fc,$n.prototype.getStartByte=$n.prototype.ic;function We(e,t,n,o,a,u,f,c,p,m,v,S,C,T,b,_){for(m=m===void 0?[]:m,T=T===void 0?lo:T,this.startTime=e,this.h=this.endTime=t,this.A=n,this.Qa=o,this.wa=a,this.aa=u,this.timestampOffset=f,this.appendWindowStart=c,this.appendWindowEnd=p,this.g=m,this.tilesLayout=v===void 0?"":v,this.u=S===void 0?null:S,this.ca=C===void 0?null:C,this.status=T,this.l=!1,this.j=!0,this.m=!1,this.aes128Key=b===void 0?null:b,this.s=null,this.i=0,this.o=_===void 0?!1:_,this.Md=this.Zc=!1,e=w(this.g),t=e.next();!t.done;t=e.next())t.value.ag();this.o&&this.g.length&&this.g[this.g.length-1].$f(),this.mimeType=this.codecs=null}s=We.prototype,s.Z=function(){return this.A()},s.getStartTime=function(){return this.startTime},s.Ug=function(){return this.endTime},s.ic=function(){return this.Qa},s.fc=function(){return this.wa},s.lh=function(){return this.tilesLayout},s.kh=function(){return this.u},s.Pb=function(){return this.status},s.Bh=function(){this.status=j0},s.Ue=function(){this.l=!0},s.xh=function(){return this.l},s.Od=function(){this.j=!1},s.uh=function(){return this.j},s.ag=function(){this.Zc=!0},s.wh=function(){return this.Zc},s.$f=function(){this.Md=!0},s.vh=function(){return this.Md},s.Zf=function(){this.m=!0},s.rh=function(){return this.m},s.pg=function(e){this.s=e},s.jh=function(){return this.s},s.offset=function(e){this.startTime+=e,this.endTime+=e,this.h+=e;for(var t=w(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.h+=e},s.tf=function(e){this.ca==null?De("Sync attempted without sync time!"):(e=this.ca-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},ae("shaka.media.SegmentReference",We),We.prototype.syncAgainst=We.prototype.tf,We.prototype.offset=We.prototype.offset,We.prototype.getThumbnailSprite=We.prototype.jh,We.prototype.setThumbnailSprite=We.prototype.pg,We.prototype.hasByterangeOptimization=We.prototype.rh,We.prototype.markAsByterangeOptimization=We.prototype.Zf,We.prototype.isLastPartial=We.prototype.vh,We.prototype.markAsLastPartial=We.prototype.$f,We.prototype.isPartial=We.prototype.wh,We.prototype.markAsPartial=We.prototype.ag,We.prototype.isIndependent=We.prototype.uh,We.prototype.markAsNonIndependent=We.prototype.Od,We.prototype.isPreload=We.prototype.xh,We.prototype.markAsPreload=We.prototype.Ue,We.prototype.markAsUnavailable=We.prototype.Bh,We.prototype.getStatus=We.prototype.Pb,We.prototype.getTileDuration=We.prototype.kh,We.prototype.getTilesLayout=We.prototype.lh,We.prototype.getEndByte=We.prototype.fc,We.prototype.getStartByte=We.prototype.ic,We.prototype.getEndTime=We.prototype.Ug,We.prototype.getStartTime=We.prototype.getStartTime,We.prototype.getUris=We.prototype.Z;var lo=0,j0=1;We.Status={gi:lo,Wi:j0,Ai:2};function xc(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function wc(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function F0(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=w(fo(e));for(var o=e.next();!o.done;o=e.next()){var a=o.value;o=a.start,a=a.end,a>t&&(n+=a-Math.max(o,t))}return n}function Jw(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=fo(e).findIndex(function(o,a,u){return o.start>t&&(a==0||u[a-1].end-t<=n)}),0<=e?e:null)}function fo(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Sc(){}function z0(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function V0(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Tc(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function eS(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var o=It(Ve(e.data,1,n)),a=e.data[2+n],u=e.data.subarray(3+n).indexOf(0);if(u===-1)return null;var f=It(Ve(e.data,3+n,u)),c;return o==="-->"?c=It(Ve(e.data,4+n+u)):c=Pt(e.data.subarray(4+n+u)),t.mimeType=o,t.pictureType=a,t.description=f,t.data=c,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0),o===-1)?null:(n=It(Ve(e.data,1,o)),e=It(Ve(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0),o===-1)?null:(n=It(Ve(e.data,1,o)),e=It(Ve(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=It(Ve(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Pt(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=It(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=It(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Pt(e.data),t):null}function Vo(e){for(var t=0,n=[];z0(e,t);){var o=Tc(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,o=t+o;t+10<o;){var a=e.subarray(t),u=Tc(a,4);a={type:String.fromCharCode(a[0],a[1],a[2],a[3]),size:u,data:a.subarray(10,10+u)},(u=eS(a))&&n.push(u),t+=a.size+10}V0(e,t)&&(t+=10)}return n}function Os(e,t){for(var n=t=t===void 0?0:t,o=0;z0(e,t);)e[t+5]>>6&1&&(o+=10),o+=10,o+=Tc(e,t+6),V0(e,t+10)&&(o+=10),t+=o;return 0<o?e.subarray(n,n+o):new Uint8Array([])}ae("shaka.util.Id3Utils",Sc),Sc.getID3Data=Os,Sc.getID3Frames=Vo;function H0(e,t){var n=null,o=null,a=null,u=e.L();return t&1&&(a=e.oc()),t&2&&e.skip(4),t&8&&(n=e.L()),t&16&&(o=e.L()),{trackId:u,Kf:n,Mg:o,$i:a}}function Cc(e,t){return t==1?(t=e.L(),e=e.L(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.L()}}function wu(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.L(),e.skip(4),e=e.Ea(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function $0(e,t,n){var o=e.L(),a=[],u=null;n&1&&(u=e.L()),n&4&&e.skip(4);for(var f=0;f<o;f++){var c={hf:null,sampleSize:null,Wd:null};n&256&&(c.hf=e.L()),n&512&&(c.sampleSize=e.L()),n&1024&&e.skip(4),n&2048&&(c.Wd=t==0?e.L():e.fg()),a.push(c)}return{dj:o,ig:a,Lg:u}}function G0(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.L();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.Ea()+e.Ea()/16,e=e.Ea()+e.Ea()/16,{trackId:n,width:t,height:e}}function tS(e){for(var t="mp4a",n,o;e.ia();){n=e.ga();for(var a=e.ga();a&128;)a=e.ga();if(n==3)e.Ea(),a=e.ga(),a&128&&e.Ea(),a&64&&e.skip(e.ga()),a&32&&e.Ea();else if(n==4)o=e.ga(),e.skip(12);else if(n==5)break}return o&&(t+="."+this.g(o),n==5&&e.ia()&&(n=e.ga(),o=(n&248)>>3,o===31&&e.ia()&&(o=32+((n&7)<<3)+((e.ga()&224)>>5)),t+="."+o)),{ha:t}}function W0(e,t){return e.skip(87),{ha:t+"."+this.g(e.ga())+this.g(e.ga())+this.g(e.ga())}}function X0(e){return e=e.L(),{ha:pu(e)}}function Xi(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,o=0;o<e.byteLength;o++)2<=o&&e[o]==3&&e[o-1]==0&&e[o-2]==0||(t[n]=e[o],n++);this.j=Ve(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Ec(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),o=Math.min(4,e.i);o!==0&&(n.set(e.j.subarray(t,t+o)),e.h=new yt(n,0).L(),e.g=8*o,e.i-=o)}function Tn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Ec(e)}e.h<<=t,e.g-=t}function et(e,t){var n=Math.min(e.g,t),o=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Ec(e),n=t-n,0<n?o<<n|et(e,n):o}function Ac(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Ec(e),t+Ac(e)}function pn(e){Tn(e,1+Ac(e))}function Me(e){var t=Ac(e);return et(e,t+1)-1}function Sr(e){return e=Me(e),1&e?1+e>>>1:-1*(e>>>1)}function Be(e){return et(e,1)===1}function ut(e){return et(e,8)}function Su(e,t){for(var n=8,o=8,a=0;a<t;a++)o!==0&&(o=Sr(e),o=(n+o+256)%256),n=o===0?n:o}function nS(e){return ut(e),Me(e),Me(e)}ae("shaka.util.ExpGolomb",Xi);function xt(){this.A=null,this.C=!1,this.m=this.F=null,this.j=[],this.g=[],this.o=this.s=null,this.i=[],this.h=[],this.u=null,this.l=[]}s=xt.prototype,s.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},s.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,kc(e)),n=e.length-(e.length+t)%188,o=!1,a=t;a<n;a+=188)if(e[a]==71){var u=!!(e[a+1]&64),f=((e[a+1]&31)<<8)+e[a+2];if(1<(e[a+3]&48)>>4){var c=a+5+e[a+4];if(c==a+188)continue}else c=a+4;switch(f){case 0:u&&(c+=e[c]+1),this.A=(e[c+10]&31)<<8|e[c+11];break;case 17:case 8191:break;case this.A:u&&(c+=e[c]+1),u=e,f={audio:-1,video:-1,Jd:-1,audioCodec:"",videoCodec:""};var p=c+3+((u[c+1]&15)<<8|u[c+2])-4;for(c+=12+((u[c+10]&15)<<8|u[c+11]);c<p;){var m=(u[c+1]&31)<<8|u[c+2],v=(u[c+3]&15)<<8|u[c+4];switch(u[c]){case 6:if(f.audio==-1&&0<v)for(var S=c+5,C=v;2<C;){switch(u[S]){case 106:f.audio=m,f.audioCodec="ac3";break;case 122:f.audio=m,f.audioCodec="ec3"}var T=u[S+1]+2;S+=T,C-=T}break;case 15:f.audio==-1&&(f.audio=m,f.audioCodec="aac");break;case 21:f.Jd==-1&&(f.Jd=m);break;case 27:f.video==-1&&(f.video=m,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=m,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=m,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=m,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=m,f.audioCodec="ec3")}c+=v+5}u=f,u.video!=-1&&(this.F=u.video,this.m=u.videoCodec),u.audio!=-1&&(this.s=u.audio,this.o=u.audioCodec),u.Jd!=-1&&(this.u=u.Jd),o&&!this.C&&(o=!1,a=t-188),this.C=!0;break;case this.F:c=e.subarray(c,a+188),u?this.j.push([c]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(c);break;case this.s:c=e.subarray(c,a+188),u?this.i.push([c]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(c);break;case this.u:c=e.subarray(c,a+188),u?this.l.push([c]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(c);break;default:o=!0}}return this};function bc(e){if((e[0]<<16|e[1]<<8|e[2])!==1)return null;var t={data:new Uint8Array(0),packetLength:e[4]<<8|e[5],pts:null,dts:null,nalus:[]};if(t.packetLength&&t.packetLength>e.byteLength-6)return null;var n=e[7];return n&192&&(t.pts=536870912*(e[9]&14)+4194304*(e[10]&255)+16384*(e[11]&254)+128*(e[12]&255)+(e[13]&254)/2,t.dts=t.pts,n&64&&(t.dts=536870912*(e[14]&14)+4194304*(e[15]&255)+16384*(e[16]&254)+128*(e[17]&255)+(e[18]&254)/2)),n=e[8]+9,e.byteLength<=n?null:(t.data=e.subarray(n),t)}s.Hh=function(e){return ai("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.cf(e)},s.cf=function(e,t,n){var o=e.pts?e.pts/9e4:null;e=e.data;var a=e.byteLength,u=1;this.m=="hvc"&&(u=2);for(var f=n||0,c=[],p=-1,m=0,v,S=0;S<a;++S){var C=e[S];if(C){if(2<=f&&C==1){if(t&&!c.length&&p==-1&&(C=S-(3<f?3:f),n&&C!=0&&(C=e.subarray(0,C),t.data=Lt(t.data,C),t.fullData=Lt(t.fullData,C))),0<=p?(f=S-((3<f?3:f)+1),c.push({data:e.subarray(p+u,f+1),fullData:e.subarray(p,f+1),type:m,time:o})):t&&!c.length&&(p=S-f,0<p&&(p=e.subarray(0,p),t.data=Lt(t.data,p),t.fullData=Lt(t.fullData,p))),S>=a-u)return c;S++,p=S,m=this.m=="hvc"?e[S]>>1&63:e[S]&31}f=0}else f++;S>=a-1&&0<=p&&0<=f&&(v={data:e.subarray(p+u,a),fullData:e.subarray(p,a),type:m,time:o})}return v&&c.push(v),!c.length&&t&&(t.data=Lt(t.data,e),t.fullData=Lt(t.fullData,e)),c},s.getMetadata=function(){for(var e=[],t=w(this.l),n=t.next();!n.done;n=t.next())n=Lt.apply(un,L(n.value)),(n=bc(n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Vo(n.data),dts:n.dts,pts:n.pts});return e},s.Mb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=w(this.i),n=t.next();!n.done;n=t.next()){var o=Lt.apply(un,L(n.value)),a=bc(o);n=this.h.length?this.h[this.h.length-1]:null,a&&a.pts!=null&&a.dts!=null&&(!n||n.pts!=a.pts&&n.dts!=a.dts)?(this.h.length&&a.dts<(n.dts||0)&&(e=!0),this.h.push(a)):this.h.length&&(o=a?a.data:o)&&(n=this.h.pop(),n.data=Lt(n.data,o),this.h.push(n))}e&&(this.h=this.h.sort(function(u,f){var c=(u.pts||0)-(f.pts||0);return(u.dts||0)-(f.dts||0)||c}))}return this.h},s.kc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=w(this.j),o=n.next();!o.done;o=n.next()){var a=Lt.apply(un,L(o.value)),u=bc(a);o=this.g.length?this.g[this.g.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!o||o.pts!=u.pts&&o.dts!=u.dts)?(this.g.length&&u.dts<(o.dts||0)&&(t=!0),this.g.push(u)):this.g.length&&(a=u?u.data:a)&&(o=this.g.pop(),o.data=Lt(o.data,a),this.g.push(o))}if(e){var f;for(n=w(this.g),o=n.next();!o.done;o=n.next())o=o.value,o.nalus=this.cf(o,f,void 0),o.nalus.length&&(f=o.nalus[o.nalus.length-1]);this.g=this.g.filter(function(c){return c.nalus.length})}t&&(this.g=this.g.sort(function(c,p){var m=(c.pts||0)-(p.pts||0);return(c.dts||0)-(p.dts||0)||m}))}return e?this.g:(e=this.g,this.g=[],e)},s.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Mb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.kc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},s.Pc=function(){return{audio:this.o,video:this.m}},s.Fd=function(){for(var e=[],t=w(this.kc()),n=t.next();!n.done;n=t.next())e.push.apply(e,L(n.value.nalus));return e},s.oh=function(){ai("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Je();return{height:e.height,width:e.width}},s.Je=function(){return this.m=="hvc"?oS(this):iS(this)};function iS(e){var t={height:null,width:null,ha:null};if(e=e.Fd(),!e.length||(e=e.find(function(C){return C.type==7}),!e))return t;e=new Xi(e.data);var n=ut(e),o=ut(e),a=ut(e);if(pn(e),rS.includes(n)){var u=Me(e);if(u===3&&Tn(e,1),pn(e),pn(e),Tn(e,1),Be(e)){u=u!==3?8:12;for(var f=0;f<u;f++)Be(e)&&(6>f?Su(e,16):Su(e,64))}}if(pn(e),u=Me(e),u===0)Me(e);else if(u===1)for(Tn(e,1),pn(e),pn(e),u=Me(e),f=0;f<u;f++)pn(e);pn(e),Tn(e,1),u=Me(e),f=Me(e);var c=et(e,1);c===0&&Tn(e,1),Tn(e,1);var p=0,m=0,v=0,S=0;return Be(e)&&(p=Me(e),m=Me(e),v=Me(e),S=Me(e)),t.height=String((2-c)*(f+1)*16-2*v-2*S),t.width=String(16*(u+1)-2*p-2*m),t.ha="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t}function oS(e){var t={height:null,width:null,ha:null};if(e=e.Fd(),!e.length||(e=e.find(function(V){return V.type==33}),!e))return t;var n=new Xi(e.fullData,!0);ut(n),ut(n),et(n,4);var o=et(n,3);Be(n);var a=et(n,2),u=et(n,1),f=et(n,5),c=et(n,32);e=ut(n);for(var p=ut(n),m=ut(n),v=ut(n),S=ut(n),C=ut(n),T=ut(n),b=[],_=[],D=0;D<o;D++)b.push(Be(n)),_.push(Be(n));if(0<o)for(D=o;8>D;D++)et(n,2);for(D=0;D<o;D++)b[D]&&et(n,88),_[D]&&ut(n);Me(n),o=Me(n),o==3&&et(n,1),b=Me(n),_=Me(n);var B=D=0,N=0,G=0;return Be(n)&&(D+=Me(n),B+=Me(n),N+=Me(n),G+=Me(n)),t.width=String(b-(D+B)*(o===1||o===2?2:1)),t.height=String(_-(N+G)*(o===1?2:1)),n=function(V){for(var q=0,te=0;32>te;te++)q|=(V>>te&1)<<31-te;return q>>>0}(c),u=u==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+f),a+="."+n.toString(16).toUpperCase(),a+="."+u+T,C&&(a+="."+C.toString(16).toUpperCase()),S&&(a+="."+S.toString(16).toUpperCase()),v&&(a+="."+v.toString(16).toUpperCase()),m&&(a+="."+m.toString(16).toUpperCase()),p&&(a+="."+p.toString(16).toUpperCase()),e&&(a+="."+e.toString(16).toUpperCase()),t.ha=a,t}function Ic(e){return!(0>kc(e))}function kc(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}ae("shaka.util.TsParser",xt),xt.syncOffset=kc,xt.probe=Ic,xt.prototype.getVideoInfo=xt.prototype.Je,xt.prototype.getVideoResolution=xt.prototype.oh,xt.prototype.getVideoNalus=xt.prototype.Fd,xt.prototype.getCodecs=xt.prototype.Pc,xt.prototype.getStartTime=xt.prototype.getStartTime,xt.prototype.getVideoData=xt.prototype.kc,xt.prototype.getAudioData=xt.prototype.Mb,xt.prototype.getMetadata=xt.prototype.getMetadata,xt.prototype.parseNalus=xt.prototype.cf,xt.prototype.parseAvcNalus=xt.prototype.Hh,xt.prototype.parse=xt.prototype.parse,xt.prototype.clearData=xt.prototype.clearData,xt.Timescale=9e4;var rS=[100,110,122,244,44,83,86,118,128,138,139,134];function Us(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Le("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,ai("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Le("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Le("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Le(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function K0(e){e.g&&e.i.classList.add("shaka-hidden")}Us.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Y0(e,t,n){var o=sS,a=cS;switch(t.mimeType){case"video/webm":o=aS;break;case"video/mp4":o=uS}switch(n){case"DASH":a=fS;break;case"HLS":a=lS}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(o),e.j||e.g.setStreamingFormat(a))}ae("shaka.lcevc.Dec",Us),Us.prototype.release=Us.prototype.release;var sS=0,aS=1,uS=2,lS=0,fS=1,cS=-1;function q0(e,t,n,o){var a=this;this.i=e,this.C=null,this.F=t,this.g={},this.G={},this.ma={},this.h=null,this.Y=!1,this.Aa=n||function(){},this.N=o||null,this.j={},this.s=new Ct,this.m={},this.H=null,this.J=new bt,this.K="",this.da=!1,this.l=Q0(this,this.J),this.A=!1,this.I=new mr(function(){return hS(a)}),this.u=!1,this.W="UNKNOWN",this.ka=this.za=!1,this.Ba=new bt,this.o=!1,this.ea=!0,this.V=null}function Q0(e,t){if(d.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.ea=!0}),e.s.D(n,"endstreaming",function(){e.ea=!1}),e.s.ja(n,"sourceopen",function(){URL.revokeObjectURL(e.K),t.resolve()}),e.s.ja(e.i,"playing",function(){e.da=!0}),e.K=Iu(n),e.i.src=e.K,n}return n=new MediaSource,e.s.ja(n,"sourceopen",function(){URL.revokeObjectURL(e.K),t.resolve()}),e.s.ja(e.i,"playing",function(){e.da=!0}),e.K=Iu(n),e.i.src=e.K,n}s=q0.prototype,s.destroy=function(){return this.I.destroy()};function hS(e){var t,n,o,a,u,f,c,p;return z(function(m){if(m.g==1){t=[];for(n in e.j)for(o=e.j[n],a=o[0],e.j[n]=o.slice(0,1),a&&t.push(a.p.catch(Np)),u=w(o.slice(1)),f=u.next();!f.done;f=u.next())c=f.value,c.p.reject(new K(2,7,7003,void 0));e.h&&t.push(e.h.destroy()),e.F&&t.push(e.F.destroy());for(p in e.m)t.push(e.m[p].destroy());return E(m,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.C=null,e.l=null,e.h=null,e.F=null,e.g={},e.m={},e.H=null,e.j={},e.N=null,j(m)})}s.init=function(e,t,n,o){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,o=o===void 0?!1:o;var a=this,u,f,c,p,m;return z(function(v){if(v.g==1)return u=$t,E(v,a.J,2);for(a.u=t,a.W=n,a.za=o,a.ka=!a.u&&a.W=="HLS"&&!a.za,f=w(e.keys()),c=f.next();!c.done;c=f.next())p=c.value,m=e.get(p),Tu(a,p,m,m.codecs),a.o?(a.j[u.P]=[],a.j[u.$]=[]):a.j[p]=[];j(v)})};function Tu(e,t,n,o,a){a=a===void 0?!1:a;var u=Rn(n.mimeType,o);if(t==at)Cu(e,u,e.u,n.external);else{var f=e.C.forceTransmux||a;if((!ke(u)||!e.u&&rr.includes(u))&&(f=!0),a=ir(n.mimeType,o),f){if(f=Sn("audio",(o||"").split(",")),o=Sn("video",(o||"").split(",")),f&&o){e.o=!0,Tu(e,"audio",n,f,!0),Tu(e,"video",n,o,!0);return}(o=Ro(a))&&(u=o(),e.m[t]=u,u=u.convertCodecs(t,a))}a=u+e.C.sourceBufferExtraFeatures,gt(e.I);try{var c=e.l.addSourceBuffer(a)}catch(p){throw new K(2,3,3015,p,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.u&&(c.mode=ES),e.s.D(c,"error",function(){e.j[t][0].p.reject(new K(2,3,3014,e.i.error?e.i.error.code:0))}),e.s.D(c,"updateend",function(){return Ki(e,t)}),e.g[t]=c,e.G[t]=u,e.ma[t]=!!n.drmInfos.length}}s.configure=function(e){this.C=e};function Cu(e,t,n,o){e.h||(e.h=new ji(e.F));var a=e.h;o=o||e.Y,e=e.W,t=="application/cea-608"||t=="application/cea-708"?a.i=null:(a.i=(0,Kt[t])(),a.i.setSequenceMode?a.i.setSequenceMode(n):Le('Text parsers should have a "setSequenceMode" method!'),a.i.setManifestType?a.i.setManifestType(e):Le('Text parsers should have a "setManifestType" method!'),a.u=o)}function Z0(e){return e.A?!1:e.l?e.l.readyState=="ended":!0}function J0(e,t){return e.A||!Object.keys(e.g).length?e=null:t==at?e=e.h.g:(e=Tr(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Eu(e,t){return e.A?null:t==at?e.h.h:xc(Tr(e,t))}function dS(e,t,n){return e.A?0:t==at?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Tr(e,t),F0(e,n))}s.pb=function(){var e={total:this.A?[]:fo(this.i.buffered),audio:this.A?[]:fo(Tr(this,"audio")),video:this.A?[]:fo(Tr(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Tr(e,t){try{return e.g[t].buffered}catch{return null}}function pS(e,t,n,o,a,u){var f=null,c=Ve(n);if(rr.includes(a))u=Vo(c),u.length&&o&&((t=u.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.Aa([{cueTime:o.startTime,data:c,frames:u,dts:o.startTime,pts:o.startTime}],0,o.endTime));else if(a.includes("/mp4")&&o&&o.timestampOffset==0&&o.aa&&o.aa.timescale){var p=o.aa.timescale;if(!isNaN(p)){var m=0,v=!1;new St().box("moof",dt).box("traf",dt).O("tfdt",function(S){m=Cc(S.reader,S.version).baseMediaDecodeTime/p,v=!0,S.parser.stop()}).parse(n,!0),v&&(f=m)}}else a.includes("/mp4")||a.includes("/webm")||!Ic(c)||(c=new xt().parse(c),t=c.getStartTime(t),t!=null&&(f=t),c=c.getMetadata(),c.length&&e.Aa(c,u,o?o.endTime:null));return f}function Au(e,t,n,o,a,u,f,c,p,m){f=f===void 0?!1:f,c=c===void 0?!1:c,p=p===void 0?!1:p,m=m===void 0?!1:m;var v,S,C,T,b,_,D,B,N,G,V;return z(function(q){switch(q.g){case 1:if(v=$t,t!=v.na){q.B(2);break}if(!e.u){q.B(3);break}return E(q,e.Ba,4);case 4:S=q.h,e.h.s=S;case 3:return E(q,X2(e.h,n,o?o.startTime:null,o?o.endTime:null,o?o.Z()[0]:null),5);case 5:return q.return();case 2:if(m||!e.o){q.B(6);break}return E(q,Au(e,v.P,n,o,a,u,f,c,p,!0),7);case 7:return E(q,Au(e,v.$,n,o,a,u,f,c,p,!0),8);case 8:return q.return();case 6:if(!e.g[t])return q.return();if(C=e.g[t].timestampOffset,T=e.G[t],e.m[t]&&(T=e.m[t].getOriginalMimeType()),o&&(b=pS(e,t,n,o,T,C),b!=null&&(_=o.startTime-b,D=Math.abs(C-_),(.001<=D||f||c)&&(!p||0<_||!C)&&(C=_,e.ka&&(Ht(e,t,function(){return Cr(e,t)}),Ht(e,t,function(){return Er(e,t,C)}))),B=t==v.$||!(v.$ in e.g),e.u&&B&&e.Ba.resolve(C))),u&&t==v.$&&(e.h||Cu(e,"application/cea-608",e.u,!1),e.H||(N=T.split(";",1)[0],e.H=new nn(N)),o?(G=e.H.i(n),G.length&&Y2(e.h,G,o.startTime,o.endTime,C)):e.H.init(n)),!e.m[t]){q.B(9);break}return E(q,e.m[t].transmux(n,a,o,e.l.duration,t),10);case 10:n=q.h;case 9:return n=xS(e,n,o?o.startTime:null,t),o&&e.u&&t!=v.na&&(f||c)&&(V=o.startTime,Ht(e,t,function(){return Cr(e,t)}),Ht(e,t,function(){return Er(e,t,V)})),E(q,Ht(e,t,function(){var te=n;if(t=="video"&&e.N){var de=e.N;de.g&&de.g.appendBuffer(te,"video",de.o,-C)}e.g[t].appendBuffer(te)}),11);case 11:j(q)}})}function mS(e,t){var n=Eu(e,"video")||0;Pp(e.h,t,n)}function gS(e){e.h&&Pp(e.h,"",0)}s.remove=function(e,t,n){var o=this,a;return z(function(u){return u.g==1?(a=$t,e==a.na?E(u,o.h.remove(t,n),0):E(u,Ht(o,e,function(){return bu(o,e,t,n)}),4)):o.o?E(u,Ht(o,a.P,function(){return bu(o,a.P,t,n)}),0):u.B(0)})};function em(e,t){var n;return z(function(o){return o.g==1?(n=$t,t==n.na?e.h?E(o,e.h.remove(0,1/0),0):o.return():E(o,Ht(e,t,function(){return bu(e,t,0,e.l.duration)}),4)):e.o?E(o,Ht(e,n.P,function(){return bu(e,n.P,0,e.l.duration)}),0):o.B(0)})}s.flush=function(e){var t=this,n;return z(function(o){return o.g==1?(n=$t,e==n.na?o.return():E(o,Ht(t,e,function(){t.i.currentTime-=.001,Ki(t,e)}),2)):t.o?E(o,Ht(t,n.P,function(){var a=n.P;t.i.currentTime-=.001,Ki(t,a)}),0):o.B(0)})};function yS(e,t,n,o,a,u,f,c,p){var m,v,S;return z(function(C){return C.g==1?(m=$t,t==m.na?(u||(e.h.s=n),K2(e.h,o,a),C.return()):(v=[],E(C,TS(e,t,f,c,p),2))):(S=C.h,S||(v.push(Ht(e,t,function(){return Cr(e,t)})),e.o&&v.push(Ht(e,m.P,function(){return Cr(e,m.P)}))),u||(v.push(Ht(e,t,function(){return Er(e,t,n)})),e.o&&v.push(Ht(e,m.P,function(){return Er(e,m.P,n)}))),v.push(Ht(e,t,function(){e.g[t].appendWindowStart=0,e.g[t].appendWindowEnd=a,e.g[t].appendWindowStart=o,Ki(e,t)})),e.o&&v.push(Ht(e,m.P,function(){var T=m.P;e.g[T].appendWindowStart=0,e.g[T].appendWindowEnd=a,e.g[T].appendWindowStart=o,Ki(e,T)})),E(C,Promise.all(v),0))})}function vS(e,t,n){var o;return z(function(a){return a.g==1?(o=$t,t==o.na?a.return():(Ht(e,t,function(){return Cr(e,t)}),e.o&&Ht(e,o.P,function(){return Cr(e,o.P)}),E(a,Ht(e,t,function(){return Er(e,t,n)}),2))):e.o?E(a,Ht(e,o.P,function(){return Er(e,o.P,n)}),0):a.B(0)})}s.endOfStream=function(e){var t=this;return z(function(n){return E(n,Mc(t,function(){Z0(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},s.Pa=function(e){var t=this;return z(function(n){return E(n,Mc(t,function(){if(e<t.l.duration)for(var o in t.g){var a={start:function(){},p:new bt};t.j[o].unshift(a)}t.l.duration=e,t.V=e}),0)})},s.getDuration=function(){return this.l.duration};function bu(e,t,n,o){o<=n?Ki(e,t):e.g[t].remove(n,o)}function Cr(e,t){var n=e.g[t].appendWindowStart,o=e.g[t].appendWindowEnd;e.g[t].abort(),e.g[t].appendWindowStart=n,e.g[t].appendWindowEnd=o,Ki(e,t)}function Er(e,t,n){0>n&&(n+=.001),e.g[t].timestampOffset=n,Ki(e,t)}function Ki(e,t){if(!e.A){var n=e.j[t][0];n&&(n.p.resolve(),_c(e,t))}}function Ht(e,t,n){return gt(e.I),n={start:n,p:new bt},e.j[t].push(n),e.j[t].length==1&&tm(e,t),n.p}function Mc(e,t){var n,o,a,u,f,c,p;return z(function(m){switch(m.g){case 1:gt(e.I),n=[],o={};for(a in e.g)o.yc=new bt,u={start:function(v){return function(){return v.yc.resolve()}}(o),p:o.yc},e.j[a].push(u),n.push(o.yc),e.j[a].length==1&&u.start(),o={yc:o.yc};return re(m,2),E(m,Promise.all(n),4);case 4:ie(m,3);break;case 2:throw f=se(m),f;case 3:return re(m,5,6),E(m,t(),6);case 6:ne(m);for(c in e.g)_c(e,c);ue(m,0);break;case 5:throw p=se(m),new K(2,3,3015,p,e.i.error||"No error in the media element")}})}function _c(e,t){e.j[t].shift(),tm(e,t)}function tm(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(o){o.name=="QuotaExceededError"?n.p.reject(new K(2,3,3017,t)):n.p.reject(new K(2,3,3015,o,e.i.error||"No error in the media element")),_c(e,t)}}function xS(e,t,n,o){var a=e.ma[o];return e.C.insertFakeEncryptionInInit&&n==null&&a&&(Do()||Ms()||Rt("SOPOpenBrowser"))&&e.G[o].split(";")[0].split("/")[1]=="mp4"&&(t=qw(t)),t}function wS(e,t,n,o){return Ht(e,t,function(){t!==at&&(Nt()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),o&&(e.m[t]=o),e.g[t].changeType(n+e.C.sourceBufferExtraFeatures),e.G[t]=n),Ki(e,t))})}function SS(e,t){var n,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V,q,te,de,ce;return z(function(he){switch(he.g){case 1:n=$t,e.A=!0,e.o=!1,o=e.i.currentTime,a=e.i.autoplay,u=e.i.paused,e.da&&(e.i.autoplay=!1),ye(he,2),e.s.Za(),f=[];for(c in e.m)f.push(e.m[c].destroy());for(p in e.j)for(m=e.j[p],v=m[0],e.j[p]=m.slice(0,1),v&&f.push(v.p.catch(Np)),S=w(m.slice(1)),C=S.next();!C.done;C=S.next())T=C.value,T.p.reject(new K(2,7,7003,void 0));for(b in e.g){_=e.g[b];try{e.l.removeSourceBuffer(_)}catch{}}return E(he,Promise.all(f),4);case 4:return e.m={},e.g={},D=e.l.duration,e.J=new bt,e.l=Q0(e,e.J),E(he,e.J,5);case 5:for(!isNaN(D)&&D?e.l.duration=D:!isNaN(e.V)&&e.V&&(e.l.duration=e.V),B=new bt,N=e.l.sourceBuffers,G=t.size,V=0,e.s.D(N,"addsourcebuffer",function(){V++,V===G&&B.resolve()}),q=w(t.keys()),te=q.next();!te.done;te=q.next())de=te.value,ce=t.get(de),Tu(e,de,ce,ce.codecs),e.o?(e.j[n.P]=[],e.j[n.$]=[]):e.j[de]=[];return e.i.currentTime=o,E(he,B,2);case 2:ne(he),e.A=!1,gt(e.I),e.s.ja(e.i,"canplaythrough",function(){gt(e.I),e.i.autoplay=a,u||e.i.play()}),ue(he,0)}})}function nm(e,t){return Mc(e,function(){return SS(e,t)})}function TS(e,t,n,o,a){var u,f,c,p,m,v,S,C,T,b,_,D,B,N,G;return z(function(V){return V.g==1?(u=$t,t==u.na||(f=xi(ri(e.G[t])),c=Bi(e.G[t]),m=!1,v=Rn(n,o),S=e.C.forceTransmux,(!ke(v)||!e.u&&rr.includes(v)||o.includes(","))&&(S=!0),S&&(C=ir(n,o),T=Ro(C))&&(p=T(),b=Sn(u.P,(o||"").split(",")),_=Sn(u.$,(o||"").split(",")),b&&_?(m=!0,D=_,t==u.P&&(D=b),v=p.convertCodecs(t,ir(n,D))):v=p.convertCodecs(t,C)),B=xi(ri(v)),N=Bi(v),f===B&&c===N)?V.return(!1):(G=!0,(e.o||m&&p&&!e.m[t])&&(G=!1),G&&e.C.codecSwitchingStrategy==="smooth"&&Nt()?E(V,wS(e,t,v,p),3):(p&&p.destroy(),E(V,nm(e,a),3)))):V.return(!0)})}function CS(e,t,n){if(t==at)var o=!1;else{o=xi(ri(e.G[t]));var a=Bi(e.G[t]),u=Rn(n.mimeType,n.codecs),f=e.C.forceTransmux;(!ke(u)||!e.u&&rr.includes(u)||n.codecs.includes(","))&&(f=!0),n=ir(n.mimeType,n.codecs),f&&(f=Ro(n))&&(f=f(),u=f.convertCodecs(t,n),f.destroy()),t=xi(ri(u)),u=Bi(u),o=o!==t||a!==u}return o?e.C.codecSwitchingStrategy!=="smooth"||!Nt()||e.o:!1}var Iu=d.URL.createObjectURL,ES="sequence";function Je(e,t,n){this.i=e,this.o=t,this.u=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.C=!0,this.F=0,this.A=n===void 0?!0:n,this.G=0,this.m=!1}s=Je.prototype,s.getDuration=function(){return this.j},s.$g=function(){return this.g},s.qf=function(e){this.i=e},s.Pa=function(e){this.j=e},s.eh=function(){return this.i},s.mg=function(e){this.s=e},s.pc=function(e){this.C=e},s.Xd=function(e){this.u=e},s.ng=function(e){this.o=e},s.Tg=function(){return this.o},s.dg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.Sd(e[0].start+t),this.g=e.reduce(function(o,a){return Math.max(o,a.end-a.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.A&&!this.m&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}},s.Xc=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,o=(Date.now()+this.s)/1e3;e=w(e);for(var a=e.next();!a.done;a=e.next())a=a.value,o<a.startTime||(t=Math.min(t,a.startTime),n=Math.max(n,a.endTime),this.g=Math.max(this.g,a.endTime-a.startTime));this.Sd(t),this.h=Math.max(this.h,n),this.i!=null&&this.A&&!this.m&&(this.i=o-this.h-this.g)}},s.Nd=function(){this.m=!0},s.yh=function(){return this.m},s.Sd=function(e){this.l=this.l==null?e:Math.min(this.l,e)},s.Ye=function(e){this.g=Math.max(this.g,e)},s.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},s.R=function(){return this.j==1/0&&!this.C},s.Rb=function(){return this.j!=1/0&&!this.C},s.eb=function(){return Math.max(this.F,this.Bb()-this.u)},s.qg=function(e){this.F=e},s.Bb=function(){return this.R()||this.Rb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.G,this.j):this.h?Math.min(this.h,this.j):this.j},s.Rc=function(e){var t=Math.max(this.l,this.F);return this.u==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Bb()-this.u+e,this.qb()))},s.hc=function(){return this.Rc(0)},s.qb=function(){return Math.max(0,this.Bb()-(this.R()||this.Rb()?this.o:0))},s.ug=function(){return!(this.i==null||this.h!=null&&this.A)},s.lg=function(e){this.G=e},ae("shaka.media.PresentationTimeline",Je),Je.prototype.setAvailabilityTimeOffset=Je.prototype.lg,Je.prototype.usingPresentationStartTime=Je.prototype.ug,Je.prototype.getSeekRangeEnd=Je.prototype.qb,Je.prototype.getSeekRangeStart=Je.prototype.hc,Je.prototype.getSafeSeekRangeStart=Je.prototype.Rc,Je.prototype.getSegmentAvailabilityEnd=Je.prototype.Bb,Je.prototype.setUserSeekStart=Je.prototype.qg,Je.prototype.getSegmentAvailabilityStart=Je.prototype.eb,Je.prototype.isInProgress=Je.prototype.Rb,Je.prototype.isLive=Je.prototype.R,Je.prototype.offset=Je.prototype.offset,Je.prototype.notifyMaxSegmentDuration=Je.prototype.Ye,Je.prototype.notifyMinSegmentStartTime=Je.prototype.Sd,Je.prototype.isStartTimeLocked=Je.prototype.yh,Je.prototype.lockStartTime=Je.prototype.Nd,Je.prototype.notifySegments=Je.prototype.Xc,Je.prototype.notifyTimeRange=Je.prototype.dg,Je.prototype.getDelay=Je.prototype.Tg,Je.prototype.setDelay=Je.prototype.ng,Je.prototype.setSegmentAvailabilityDuration=Je.prototype.Xd,Je.prototype.setStatic=Je.prototype.pc,Je.prototype.setClockOffset=Je.prototype.mg,Je.prototype.getPresentationStartTime=Je.prototype.eh,Je.prototype.setDuration=Je.prototype.Pa,Je.prototype.setPresentationStartTime=Je.prototype.qf,Je.prototype.getMaxSegmentDuration=Je.prototype.$g,Je.prototype.getDuration=Je.prototype.getDuration;function im(e,t,n){this.j=n,this.l=e,this.s=om(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}im.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function AS(e,t){e.i=t}function bS(e){this.g=e}function om(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=w(fo(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Rc(e,t,n,o,a){var u=this;this.u=a,this.g=e,this.A=t,this.s=n,this.l=new Ct,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=o,this.o=!1,this.l.D(e,"waiting",function(){return Lc(u)}),this.m=new rt(function(){Lc(u)}).$a(this.s.gapJumpTimerTime)}Rc.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.A=this.u=null},Rc.prototype.af=function(){this.o=!0,Lc(this)};function Lc(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,o=om(n),a=n.g.currentTime,u=Date.now()/1e3;(t.g!=a||t.s!=o)&&(t.m=u,t.g=a,t.s=o,t.h=!1),a=u-t.m,(o=a>=t.u&&o&&!t.h)&&(t.i(t.g,a),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Ge("stalldetected"))),t=!o}t&&(t=e.g.currentTime,n=e.g.buffered,o=Jw(n,t,e.s.gapDetectionThreshold),o==null||o==0&&!e.o||(a=n.start(o),a>=e.A.qb()||.001>a-t||(o!=0&&n.end(o-1),e.g.currentTime=a,t==e.i&&(e.i=a),e.C++,e.u(new Ge("gapjumped")))))}}}function Ar(e,t,n,o){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?o():(t=IS.value().get(t),n.ja(e,t,o))}var IS=new gr(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function rm(e,t,n,o){var a=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return a.l==null&&(a.l=o()),a.l},this.o=!1,this.h=new Ct,this.i=new lm(e),Ar(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){am(a,a.j())})}rm.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Pc(e){return e.o?e.g.currentTime:e.j()}function sm(e,t){0<e.g.readyState?fm(e.i,t):Ar(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){am(e,e.j())})}function am(e,t){.001>Math.abs(e.g.currentTime-t)?um(e):(e.h.ja(e.g,"seeking",function(){um(e)}),fm(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function um(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function lm(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new rt(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}lm.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function fm(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function cm(e){this.g=e,this.j=!1,this.h=null,this.i=new Ct}s=cm.prototype,s.ie=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.ja(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Ar(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},s.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},s.je=function(e){this.h=this.j?this.h:e},s.qd=function(){return(this.j?this.g.currentTime:this.h)||0},s.Bf=function(){return 0},s.Af=function(){return 0},s.cg=function(){};function hm(e,t,n,o,a,u){var f=this;this.i=e,this.g=t.presentationTimeline,this.A=t.minBufferTime||0,this.l=n,this.u=a,this.s=null,this.o=kS(e,n,u),this.j=new Rc(e,t.presentationTimeline,n,this.o,u),this.h=new rm(e,function(){e:{var c=f.j;c.j=!0,c.o=!1;var p=Pc(f.h);if(c=pm(f,p),.001<Math.abs(c-p)&&(p=Date.now()/1e3,!f.s||f.s<p-1)){f.s=p,sm(f.h,c),c=void 0;break e}f.u(),c=void 0}return c},function(c){var p=f.j;p.g.seeking&&!p.j&&(p.j=!0,p.i=c)},function(){var c=o;return c==null?c=1/0>f.g.getDuration()?f.g.hc():f.g.qb():0>c&&(c=f.g.qb()+c),dm(f,mm(f,c))}),this.m=new rt(function(){if(f.i.readyState!=0&&!f.i.paused){var c=Pc(f.h),p=f.g.hc(),m=f.g.qb();3>m-p&&(p=m-3),c<p&&(c=pm(f,c),f.i.currentTime=c)}})}s=hm.prototype,s.ie=function(){this.m.$a(.25)},s.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},s.je=function(e){sm(this.h,e)},s.qd=function(){var e=Pc(this.h);return 0<this.i.readyState&&!this.i.paused?mm(this,e):e},s.Bf=function(){return this.o?this.o.o:0},s.Af=function(){return this.j.C},s.cg=function(){this.j.af()};function dm(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function pm(e,t){var n=Math.max(e.A,e.l.rebufferingGoal),o=e.l.safeSeekOffset,a=e.g.hc(),u=e.g.qb(),f=e.g.getDuration();3>u-a&&(a=u-3);var c=e.g.Rc(n),p=e.g.Rc(o);return n=e.g.Rc(n+o),t>=f?dm(e,t):t>u?u:t<a?wc(e.i.buffered,p)?p:n:t>=c||wc(e.i.buffered,t)?t:n}function mm(e,t){var n=e.g.hc();return t<n?n:(e=e.g.qb(),t>e?e:t)}function kS(e,t,n){if(!t.stallEnabled)return null;var o=t.stallSkip;return t=new im(new bS(e),t.stallThreshold,n),AS(t,function(){o?e.currentTime+=o:(e.pause(),e.play())}),t}function lt(e){this.g=e,this.m=null,this.j=0,this.o=!1}s=lt.prototype,s.Ab=function(){return this.g.length},s.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},s.Ch=function(){this.o=!0};function Dc(e,t){e=w(e.g);for(var n=e.next();!n.done;n=e.next())t(n.value)}s.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var o=this.g[n],a=n<t?this.g[n+1].startTime:o.endTime;if(e>=o.startTime&&e<a)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},s.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},s.offset=function(e){if(!this.o)for(var t=w(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},s.Qd=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,L(e))}},s.Wc=function(e,t){var n=this;e=e.filter(function(o){return o.endTime>t&&(n.g.length==0||o.endTime>n.g[0].startTime)}),this.Qd(e),this.bb(t)},s.bb=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},s.bc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new We(e.startTime,t,e.A,e.Qa,e.wa,e.aa,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.u,e.ca,e.status,e.aes128Key),this.g[this.g.length-1].i=e.i)}},s.Yd=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new rt(function(){var o=t();o?n.g.push.apply(n.g,L(o)):(n.m.stop(),n.m=null)}),this.m.$a(e))},lt.prototype[Symbol.iterator]=function(){return this.Nb(0)},lt.prototype.Nb=function(e){var t=this.find(e);if(t==null)return null;t--;var n=this.get(t+1),o=-1;if(n&&0<n.g.length)for(var a=n.g.length-1;0<=a;--a){var u=n.g[a];if(e>=u.startTime&&e<u.endTime){for(;a&&!u.j;)a--,u=n.g[a];if(!u.j)return De("No independent partial segment found!"),null;t++,o=a-1;break}}return new Si(this,t,o)};function Nc(e,t,n){return e=new We(e,e+t,function(){return n},0,null,null,e,e,e+t),new lt([e])}ae("shaka.media.SegmentIndex",lt),lt.forSingleSegment=Nc,lt.prototype.getIteratorForTime=lt.prototype.Nb,lt.prototype.updateEvery=lt.prototype.Yd,lt.prototype.fit=lt.prototype.bc,lt.prototype.evict=lt.prototype.bb,lt.prototype.mergeAndEvict=lt.prototype.Wc,lt.prototype.offset=lt.prototype.offset,lt.prototype.get=lt.prototype.get,lt.prototype.find=lt.prototype.find,lt.prototype.markImmutable=lt.prototype.Ch,lt.prototype.release=lt.prototype.release;function Si(e,t,n){this.i=e,this.g=t,this.h=n}Si.prototype.Kg=function(){return this.g},Si.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.g.length&&e.o&&this.h>=e.g.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.g.length?e.g[this.h]:e},Si.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.g.length?(this.h++,e.o&&this.h==e.g.length&&(this.g++,this.h=0)):(this.g++,this.h=0),e=this.current(),{value:e,done:!e}},ae("shaka.media.SegmentIterator",Si),Si.prototype.next=Si.prototype.next,Si.prototype.current=Si.prototype.current,Si.prototype.currentPosition=Si.prototype.Kg;function Bt(){lt.call(this,[]),this.h=[]}Z(Bt,lt),s=Bt.prototype,s.clone=function(){var e=new Bt;return e.h=this.h.slice(),e},s.release=function(){for(var e=w(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},s.find=function(e){for(var t=0,n=w(this.h),o=n.next();!o.done;o=n.next()){o=o.value;var a=o.find(e);if(a!=null)return a+t;t+=o.j+o.Ab()}return null},s.get=function(e){for(var t=0,n=w(this.h),o=n.next();!o.done;o=n.next()){o=o.value;var a=o.get(e-t);if(a)return a;t+=o.j+o.Ab()}return null},s.offset=function(){},s.Qd=function(){},s.bb=function(){},s.Wc=function(){},s.bc=function(){},s.Yd=function(){},ae("shaka.media.MetaSegmentIndex",Bt),Bt.prototype.updateEvery=Bt.prototype.Yd,Bt.prototype.fit=Bt.prototype.bc,Bt.prototype.mergeAndEvict=Bt.prototype.Wc,Bt.prototype.evict=Bt.prototype.bb,Bt.prototype.merge=Bt.prototype.Qd,Bt.prototype.offset=Bt.prototype.offset,Bt.prototype.get=Bt.prototype.get,Bt.prototype.find=Bt.prototype.find,Bt.prototype.release=Bt.prototype.release;function Bs(e){var t=this;this.g=e,this.h=this.g.Ed(),this.i=new rt(function(){t.g.bg(.25*t.h)})}Bs.prototype.release=function(){this.set(this.ec()),this.i&&(this.i.stop(),this.i=null),this.g=null},Bs.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Ed()!=t&&this.g.rf(t);break e}catch{}this.i.$a(.25),this.g.Ed()!=0&&this.g.rf(0)}},Bs.prototype.ec=function(){return this.g.ec()};function gm(e){var t=this;this.h=e,this.g=new Set,this.i=new rt(function(){ym(t,!1)}).$a(.25)}gm.prototype.release=function(){this.i.stop();for(var e=w(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function ym(e,t){for(var n=w(e.g),o=n.next();!o.done;o=n.next())o.value.j(e.h.currentTime,t)}function ku(e){ht.call(this),this.g=new Map,this.h=e}Z(ku,ht),ku.prototype.release=function(){this.g.clear(),ht.prototype.release.call(this)};function MS(e,t){var n=e.g.get(t);return n||(n={$c:[],If:null,contentType:t},e.g.set(t,n)),n}function _S(e,t,n){var o=MS(e,t.contentType);RS(e,o),e={Ve:t,position:n},o=o.$c,t=o.findIndex(function(a){return a.position>=n}),0<=t?o.splice(t,o[t].position==n?1:0,e):o.push(e)}ku.prototype.j=function(e){for(var t=w(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var o=n.$c,a=o.length-1;0<=a;a--){var u=o[a];if(u.position<=e){o=u.Ve;break e}}o=null}if((a=o)&&(a=n.If,a=!(a===o||a&&o&&a.bandwidth==o.bandwidth&&a.audioSamplingRate==o.audioSamplingRate&&a.codecs==o.codecs&&a.contentType==o.contentType&&a.frameRate==o.frameRate&&a.height==o.height&&a.mimeType==o.mimeType&&a.channelsCount==o.channelsCount&&a.pixelAspectRatio==o.pixelAspectRatio&&a.width==o.width)),a)e:{if(a=e,u=o.contentType,(u=this.h()[u])&&0<u.length){var f=u[u.length-1].end;if(a>=u[0].start&&a<f){a=!0;break e}}a=!1}a&&(n.If=o,JSON.stringify(o),n=new Ge("qualitychange",new Map([["quality",o],["position",e]])),this.dispatchEvent(n))}};function RS(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,o=e[e.length-1].end,a=t.$c;t.$c=a.filter(function(u,f){return!(u.position<=n&&f+1<a.length&&a[f+1].position<=n||u.position>=o)})}else t.$c=[]}function Oc(e){ht.call(this);var t=this;this.g=new Set,this.i=e,this.h=new rt(function(){for(var n=t.i(),o=w(t.g),a=o.next();!a.done;a=o.next())a=a.value,a.endTime<n.start&&(t.g.delete(a),a=new Ge("regionremove",new Map([["region",a]])),t.dispatchEvent(a))}).$a(2)}Z(Oc,ht),Oc.prototype.release=function(){this.g.clear(),this.h.stop(),ht.prototype.release.call(this)};function Mu(e,t){ht.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Yb:null,Xb:br,Qb:function(o,a){return Ho(n,"enter",o,a)}},{Yb:js,Xb:br,Qb:function(o,a){return Ho(n,"enter",o,a)}},{Yb:Fs,Xb:br,Qb:function(o,a){return Ho(n,"enter",o,a)}},{Yb:br,Xb:js,Qb:function(o,a){return Ho(n,"exit",o,a)}},{Yb:br,Xb:Fs,Qb:function(o,a){return Ho(n,"exit",o,a)}},{Yb:js,Xb:Fs,Qb:function(o,a){return Ho(n,"skip",o,a)}},{Yb:Fs,Xb:js,Qb:function(o,a){return Ho(n,"skip",o,a)}}],this.h=new Ct,this.h.D(this.i,"regionremove",function(o){n.g.delete(o.region)})}Z(Mu,ht),Mu.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ht.prototype.release.call(this)},Mu.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=w(this.i.g),o=n.next();!o.done;o=n.next()){o=o.value;var a=this.g.get(o),u=e<o.startTime?js:e>o.endTime?Fs:br;this.g.set(o,u);for(var f=w(this.m),c=f.next();!c.done;c=f.next())c=c.value,c.Yb==a&&c.Xb==u&&c.Qb(o,t)}}};function Ho(e,t,n,o){t=new Ge(t,new Map([["region",n],["seeking",o]])),e.dispatchEvent(t)}var js=1,br=2,Fs=3;function LS(e,t,n){this.i=e,this.h=t,this.j=0,this.l=n,this.g=new Map}function Uc(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex){var o=e.h.segmentIndex.Nb(Math.max(t.startTime,e.j));if(o){var a=t;for(n&&(a=o.next().value)&&a.startTime==t.startTime&&a.endTime==t.endTime&&(a=null);e.g.size<e.i&&a!=null&&(t=!0,a.l&&a.wa!=null&&(t=!1),a.Pb()==2&&(t=!1),t&&!e.g.has(a)&&(t=new Bc(e.l),wm(t,a,e.h),e.g.set(a,t)),e.j=a.startTime,!(e.h.fastSwitching&&a.Zc&&a.Md));)a=o.next().value}}}function PS(e,t){if(e.h.segmentIndex&&e.g.size<e.i&&!e.g.has(t)){var n=new Bc(e.l);wm(n,t,e.h),e.g.set(t,n)}}function vm(e){if(e.g.size!==0){for(var t=w(e.g.keys()),n=t.next();!n.done;n=t.next())(n=n.value)&&xm(e,n);e.j=0}}function DS(e,t){t&&t!==e.h&&(vm(e),e.h=t)}function xm(e,t){var n=e.g.get(t);e.g.delete(t),n&&n.abort()}function Bc(e){this.i=e,this.g=this.h=null}function wm(e,t,n){var o=new Uint8Array(0);e.g=e.i(t,n,function(a){return z(function(u){if(u.g==1)return 0<o.byteLength?o=Lt(o,a):o=a,e.h?E(u,e.h(o),3):u.B(0);o=new Uint8Array(0),j(u)})})}Bc.prototype.abort=function(){this.g&&this.g.abort()};function _u(e,t,n,o,a){return e=Yt(e,o,a),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Sm(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.u=1,this.o=this.j=null,this.F=0,this.C=!1,this.i=new Map,this.A=!1,this.G=null,this.s=!1,this.l=new mr(function(){return NS(n)}),this.H=Date.now()/1e3}s=Sm.prototype,s.destroy=function(){return this.l.destroy()};function NS(e){var t,n,o,a;return z(function(u){if(u.g==1){for(t=[],n=w(e.i.values()),o=n.next();!o.done;o=n.next())a=o.value,Vs(a),t.push(Hs(a));return E(u,Promise.all(t),2)}e.i.clear(),e.g=null,e.m=null,e.h=null,j(u)})}s.configure=function(e){this.h=e,this.G=new o0({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=w(this.i.keys()),n=t.next();!n.done;n=t.next())if(n=this.i.get(n.value),n.ra){var o=n.ra,a=e.segmentPrefetchLimit;o.i=a;for(var u=Array.from(o.g.keys());u.length>a;){var f=u.pop();f&&xm(o,f)}0<e.segmentPrefetchLimit||(n.ra=null)}else 0<e.segmentPrefetchLimit&&(n.ra=Am(this,n.stream))},s.start=function(){var e=this;return z(function(t){if(t.g==1)return E(t,jS(e),2);gt(e.l),e.A=!0,j(t)})};function OS(e,t){var n,o,a,u,f,c;z(function(p){switch(p.g){case 1:return n=$t,e.F++,o=e.F,re(p,2),E(p,em(e.g.T,n.na),4);case 4:ie(p,3);break;case 2:a=se(p),e.g&&e.g.onError(a);case 3:u=Rn(t.mimeType,t.codecs),Cu(e.g.T,u,e.m.sequenceMode,t.external),f=e.g.T.F,(f.isTextVisible()||e.h.alwaysStreamText)&&e.F==o&&(c=Em(e,t),e.i.set(n.na,c),ci(e,c,0)),j(p)}})}function US(e){var t=e.i.get(at);t&&(Vs(t),Hs(t).catch(function(){}),e.i.delete(at)),e.o=null}function Tm(e,t){var n=e.i.get("video");if(n){var o=n.stream;o&&(t?(t=o.trickModeVideo)&&!n.Ub&&(Ir(e,t,!1,0,!1),n.Ub=o):(o=n.Ub)&&(n.Ub=null,Ir(e,o,!0,0,!1)))}}function Cm(e,t,n,o,a,u){n=n===void 0?!1:n,o=o===void 0?0:o,a=a===void 0?!1:a,u=u===void 0?!1:u,e.j=t,e.A&&(t.video&&Ir(e,t.video,n,o,a,u),t.audio&&Ir(e,t.audio,n,o,a,u))}function Ru(e,t){z(function(n){if(n.g==1)return e.o=t,e.A?t.segmentIndex?n.B(2):E(n,t.createSegmentIndex(),2):n.return();Ir(e,t,!0,0,!1),j(n)})}function Ir(e,t,n,o,a,u){var f=e.i.get(t.type);f||t.type!=at?f&&(f.Ub&&(t.trickModeVideo?(f.Ub=t,t=t.trickModeVideo):f.Ub=null),f.stream!=t||a)&&(f.ra&&DS(f.ra,t),t.type==at&&(a=Rn(t.mimeType,t.codecs),Cu(e.g.T,a,e.m.sequenceMode,t.external)),f.stream.closeSegmentIndex&&f.stream.closeSegmentIndex(),f.stream=t,f.X=null,f.Cf=!!u,n&&(f.Lc?f.Zd=!0:f.Da?(f.wb=!0,f.vd=o,f.Zd=!0):(Vs(f),Vc(e,f,!0,o).catch(function(c){e.g&&e.g.onError(c)}))),BS(e,f).catch(function(c){e.g&&e.g.onError(c)})):OS(e,t)}function BS(e,t){var n,o;return z(function(a){if(a.g==1)return t.Na?(n=t.stream,o=t.Na,n.segmentIndex?a.B(2):E(a,n.createSegmentIndex(),2)):a.return();if(t.Na!=o||t.stream!=n)return a.return();var u=e.g.Dd(),f=Eu(e.g.T,t.type),c=t.stream.segmentIndex.find(t.Ca?t.Ca.endTime:u),p=c==null?null:t.stream.segmentIndex.get(c);c=p&&p.wa?p.wa-p.Qa:null,p&&!c&&(c=(p.endTime-p.getStartTime())*(t.stream.bandwidth||0)/8),c?((p=p.aa)&&(c+=(p.wa?p.wa-p.Qa:null)||0),p=e.g.getBandwidthEstimate(),u=8*c/p<(f||0)-u-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Na.h.g>c):u=!1,u&&t.Na.abort(),j(a)})}s.dd=function(){if(this.g)for(var e=this.g.Dd(),t=w(this.i.keys()),n=t.next();!n.done;n=t.next()){var o=n.value;n=this.i.get(o);var a=null;n.X&&(a=n.X.current()),(!a||a.startTime>e||a.endTime<e)&&(n.X=null),a=this.g.T,a.A?a=!1:o==at?(a=a.h,a=a.g==null||a.h==null?!1:e>=a.g&&e<a.h):(a=Tr(a,o),a=wc(a,e)),a||((Eu(this.g.T,o)!=null||n.Da)&&zs(this,n),n.Na&&(n.Na.abort(),n.Na=null),o===at&&(o=this.g.T,o.H&&o.H.h()),n.dd=!0)}};function zs(e,t){t.Lc||t.wb||(t.Da?(t.wb=!0,t.vd=0):J0(e.g.T,t.type)==null?t.ib==null&&ci(e,t,0):(Vs(t),Vc(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function jS(e){var t,n,o,a,u,f,c,p,m;return z(function(v){if(v.g==1){if(t=$t,!e.j)throw new K(2,5,5006);return n=new Map,o=new Set,e.j.audio&&(n.set(t.P,e.j.audio),o.add(e.j.audio)),e.j.video&&(n.set(t.$,e.j.video),o.add(e.j.video)),e.o&&(n.set(t.na,e.o),o.add(e.o)),a=e.g.T,E(v,a.init(n,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(gt(e.l),e.updateDuration(),u=w(n.keys()),f=u.next();!f.done;f=u.next())c=f.value,p=n.get(c),e.i.has(c)||(m=Em(e,p),e.i.set(c,m),ci(e,m,0));j(v)})}function Em(e,t){return{stream:t,type:t.type,X:null,ra:Am(e,t),Ca:null,Db:null,Re:null,Pe:null,Oe:null,Ub:null,endOfStream:!1,Da:!1,ib:null,wb:!1,vd:0,Zd:!1,Lc:!1,dd:!0,Xe:!1,ff:!1,Tc:!1,Na:null}}function Am(e,t){return t.type!=="video"&&t.type!=="audio"?null:0<e.h.segmentPrefetchLimit?new LS(e.h.segmentPrefetchLimit,t,function(n,o,a){return bm(e,n,o,a)}):null}s.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.T.Pa(e):this.g.T.Pa(Math.pow(2,32))};function FS(e,t){var n,o,a,u,f;return z(function(c){switch(c.g){case 1:if(gt(e.l),t.Da||t.ib==null||t.Lc)return c.return();if(t.ib=null,!t.wb){c.B(2);break}return E(c,Vc(e,t,t.Zd,t.vd),3);case 3:return c.return();case 2:if(t.stream.segmentIndex){c.B(4);break}return n=t.stream,E(c,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Da||t.ib||ci(e,t,0),c.return();case 4:re(c,6),o=zS(e,t),o!=null&&(ci(e,t,o),t.Tc=!1),ie(c,7);break;case 6:return a=se(c),E(c,Im(e,t,a),8);case 8:return c.return();case 7:if(u=Array.from(e.i.values()),!e.A||!u.every(function(p){return p.endOfStream})){c.B(0);break}return E(c,e.g.T.endOfStream(),10);case 10:gt(e.l),f=e.g.T.getDuration(),f!=0&&f<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Pa(f),j(c)}})}function zS(e,t){if(Fc(t))return mS(e.g.T,t.stream.originalId||""),null;if(t.type==at&&gS(e.g.T),!e.g.T.ea&&t.type!=at)return e.h.updateIntervalSeconds/2;var n=e.g.Dd(),o=t.Ca?t.Ca.endTime:n,a=dS(e.g.T,t.type,n),u=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.u),f=e.m.presentationTimeline.getDuration()-o,c=Eu(e.g.T,t.type);if(1e-6>f&&c)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(at))&&Fc(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,a>=u)return e.h.updateIntervalSeconds/2;if(a=VS(e,t,n,c),!a)return e.h.updateIntervalSeconds;for(u=1/0,f=Array.from(e.i.values()),f=w(f),c=f.next();!c.done;c=f.next())c=c.value,Fc(c)||c.X&&!c.X.current()||(u=Math.min(u,c.Ca?c.Ca.endTime:n));return o>=u+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.ra&&t.X&&(o=a.aa,!o||t.Ca&&B0(o,t.Db)||PS(t.ra,o),Uc(t.ra,a)),HS(e,t,n,a).catch(function(){}),null)}function VS(e,t,n,o){if(t.X)return t.X.current();if(t.Ca||o)return n=t.Ca?t.Ca.endTime:o,t.Xe=!0,t.X=t.stream.segmentIndex.Nb(n),t.X&&t.X.next().value;e=e.h.inaccurateManifestTolerance,o=Math.max(n-e,0);var a=null;return e&&(t.X=t.stream.segmentIndex.Nb(o),a=t.X&&t.X.next().value),a||(t.X=t.stream.segmentIndex.Nb(n),a=t.X&&t.X.next().value),a}function HS(e,t,n,o){var a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G;return z(function(V){switch(V.g){case 1:if(a=$t,u=t.stream,f=t.X,t.Da=!0,re(V,2),o.Pb()==2)throw new K(1,1,1011);return E(V,XS(e,t,o),4);case 4:return gt(e.l),e.s?V.return():(c=u.mimeType=="video/mp4"||u.mimeType=="audio/mp4",p=d.ReadableStream,e.h.lowLatencyMode&&p&&c&&(e.m.type!="HLS"||o.m)?(S=new Uint8Array(0),T=C=!1,_=function(q){var te,de,ce;return z(function(he){switch(he.g){case 1:if(C||(T=!0,gt(e.l),e.s))return he.return();if(re(he,2),S=GS(S,q),te=!1,de=0,new St().box("mdat",function(me){de=me.size+me.start,te=!0}).parse(S,!1,!0),!te){he.B(4);break}return ce=S.subarray(0,de),S=S.subarray(de),E(he,jc(e,t,n,u,o,ce,!0),5);case 5:t.ra&&t.X&&Uc(t.ra,o,!0);case 4:ie(he,0);break;case 2:b=se(he),j(he)}})},E(V,zc(e,t,o,_),9)):(m=zc(e,t,o),E(V,m,7)));case 7:return v=V.h,gt(e.l),e.s?V.return():(gt(e.l),t.wb?(t.Da=!1,ci(e,t,0),V.return()):E(V,jc(e,t,n,u,o,v),6));case 9:if(D=V.h,b)throw b;if(T){V.B(10);break}return C=!0,gt(e.l),e.s?V.return():t.wb?(t.Da=!1,ci(e,t,0),V.return()):E(V,jc(e,t,n,u,o,D),10);case 10:t.ra&&t.X&&Uc(t.ra,o,!0);case 6:if(gt(e.l),e.s)return V.return();t.Ca=o,f.next(),t.Da=!1,t.ff=!1,B=e.g.T.pb(),N=B[t.type],JSON.stringify(N),t.wb||e.g.af(o,t.stream),ci(e,t,0),ie(V,0);break;case 2:if(G=se(V),gt(e.l,G),e.s)return V.return();if(t.Da=!1,G.code==7001)t.Da=!1,Vs(t),ci(e,t,0),V.B(0);else if(t.type==a.na&&e.h.ignoreTextStreamFailures)e.i.delete(a.na),V.B(0);else if(G.code==3017)WS(e,t,G),V.B(0);else return t.Tc=!0,G.severity=2,E(V,Im(e,t,G),0)}})}function $S(e,t,n){var o,a,u,f;return z(function(c){if(c.g==1)return o=t,o.cryptoKey?c.B(2):E(c,o.fetchKey(),3);if(a=o.iv,!a)for(a=Ve(new ArrayBuffer(16)),u=o.firstMediaSequenceNumber+n,f=a.byteLength-1;0<=f;f--)a[f]=u&255,u>>=8;return c.return(d.crypto.subtle.decrypt({name:"AES-CBC",iv:a},o.cryptoKey,e))})}function GS(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function WS(e,t,n){if(!Array.from(e.i.values()).some(function(a){return a!=t&&a.ff})){if(0<e.h.maxDisabledTime&&e.g.wd(t.stream,e.h.maxDisabledTime))return;var o=Math.round(100*e.u);if(20<o)e.u-=.2;else if(4<o)e.u-=.04;else{t.Tc=!0,e.s=!0,e.g.onError(n);return}t.ff=!0}ci(e,t,4)}function XS(e,t,n){var o,a,u,f,c,p,m,v,S,C,T,b,_;return z(function(D){return D.g==1?(o=$t,a=[],u=Math.max(0,n.appendWindowStart-.1),f=n.appendWindowEnd+.01,c=xi(t.stream.codecs),p=Bi(t.stream.mimeType),m=n.timestampOffset,m==t.Re&&u==t.Pe&&f==t.Oe&&c==t.Qe&&p==t.Yf?D.B(2):((v=t.Qe&&t.Yf&&CS(e.g.T,t.type,t.stream))&&(S=null,t.type===o.$?S=e.i.get(o.P):t.type===o.P&&(S=e.i.get(o.$)),S&&(S.Db=null,zs(e,S),Hs(S).catch(function(){}))),C=function(){var B,N,G,V;return z(function(q){if(q.g==1)return B=new Map,e.j.audio&&B.set(o.P,e.j.audio),e.j.video&&B.set(o.$,e.j.video),re(q,2),t.Pe=u,t.Oe=f,t.Qe=c,t.Yf=p,t.Re=m,N=e.m.sequenceMode||e.m.type=="HLS",E(q,yS(e.g.T,t.type,m,u,f,N,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,B),4);if(q.g!=2)return v&&(G=null,t.type===o.$?G=e.i.get(o.P):t.type===o.P&&(G=e.i.get(o.$)),G&&(G.wb=!1,G.Da=!1,zs(e,G))),ie(q,0);throw V=se(q),t.Pe=null,t.Oe=null,t.Qe=null,t.Re=null,V})},E(D,C(),2))):(B0(n.aa,t.Db)||(t.Db=n.aa,n.j&&n.aa&&(T=zc(e,t,n.aa),b=function(){var B,N,G,V,q,te;return z(function(de){switch(de.g){case 1:return re(de,2),E(de,T,4);case 4:return B=de.h,gt(e.l),N=null,G=new Map,V=new St,V.box("moov",dt).box("trak",dt).box("mdia",dt).O("mdhd",function(ce){N=wu(ce.reader,ce.version).timescale}).box("hdlr",function(ce){ce=ce.reader,ce.skip(8),ce=ce.ub(4);var he=String.fromCharCode(ce[0]);switch(he+=String.fromCharCode(ce[1]),he+=String.fromCharCode(ce[2]),he+=String.fromCharCode(ce[3]),he){case"soun":G.set(o.P,N);break;case"vide":G.set(o.$,N)}N=null}).parse(B),G.has(t.type)?n.aa.timescale=G.get(t.type):N!=null&&(n.aa.timescale=N),q=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,E(de,e.g.Ef(t.type,B),5);case 5:return E(de,Au(e.g.T,t.type,B,null,t.stream,q),6);case 6:ie(de,0);break;case 2:throw te=se(de),t.Db=null,te}})},e.g.Eh(n.startTime,n.aa),a.push(b()))),e.m.sequenceMode&&(_=t.Ca?t.Ca.i:null,n.i!=_||t.Xe)&&(t.Xe=!1,a.push(vS(e.g.T,t.type,n.startTime))),E(D,Promise.all(a),0))})}function jc(e,t,n,o,a,u,f){f=f===void 0?!1:f;var c,p,m,v,S,C;return z(function(T){switch(T.g){case 1:return c=o.closedCaptions&&0<o.closedCaptions.size,m=o.emsgSchemeIdUris!=null&&0<o.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,v=e.h.parsePrftBox&&!e.C,(m||v)&&(p=new St),m&&p.O("emsg",function(b){var _=o.emsgSchemeIdUris;if(b.version===0)var D=b.reader.ad(),B=b.reader.ad(),N=b.reader.L(),G=b.reader.L(),V=b.reader.L(),q=b.reader.L(),te=a.startTime+G/N;else N=b.reader.L(),te=b.reader.oc()/N+a.timestampOffset,G=te-a.startTime,V=b.reader.L(),q=b.reader.L(),D=b.reader.ad(),B=b.reader.ad();b=b.reader.ub(b.reader.getLength()-b.reader.qa()),(_&&_.includes(D)||e.h.dispatchAllEmsgBoxes)&&(D=="urn:mpeg:dash:event:2012"?e.g.Fh():(_=new Map().set("detail",{startTime:te,endTime:te+V/N,schemeIdUri:D,value:B,timescale:N,presentationTimeDelta:G,eventDuration:V,id:q,messageData:b}),_=new Ge("emsg",_),_.cancelable=!0,e.g.onEvent(_),_.defaultPrevented||D!="https://aomedia.org/emsg/ID3"&&D!="https://developer.apple.com/streaming/emsg-id3"||(D=Vo(b),D.length&&a&&e.g.Gh([{cueTime:a.startTime,data:b,frames:D,dts:a.startTime,pts:a.startTime}],0,a.endTime))))}),v&&p.O("prft",function(b){if(!e.C&&a.aa.timescale){var _=b.reader,D=b.version;_.L(),b=_.L();var B=_.L();b=1e3*b+B/Math.pow(2,32)*1e3,D===0?_=_.L():(D=_.L(),_=_.L(),_=D*Math.pow(2,32)+_),b=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+b).getTime(),_=new Map().set("detail",{wallClockTime:b,programStartDate:new Date(b-_/a.aa.timescale*1e3)}),_=new Ge("prft",_),e.g.onEvent(_),e.C=!0}}),(m||v)&&p.parse(u),E(T,KS(e,t,n),2);case 2:return gt(e.l),S=t.dd,t.dd=!1,C=t.Cf,t.Cf=!1,E(T,e.g.Ef(t.type,u),3);case 3:return E(T,Au(e.g.T,t.type,u,a,o,c,S,C,f),4);case 4:gt(e.l),j(T)}})}function KS(e,t,n){var o,a,u,f;return z(function(c){if(c.g==1)return o=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),a=J0(e.g.T,t.type),a==null?c.return():(u=n-a,f=u-o,1>=f?c.return():E(c,e.g.T.remove(t.type,a,a+f),2));gt(e.l),j(c)})}function Fc(e){return e&&e.type==at&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function zc(e,t,n,o){var a,u,f,c,p;return z(function(m){switch(m.g){case 1:if(n instanceof $n&&(a=n.g))return m.return(a);if(u=null,t.ra){var v=t.ra;if(v.g.has(n)){var S=v.g.get(n);o&&(S.h=o),v.g.delete(n),u=S.g}else u=null}return u||(u=bm(e,n,t.stream,o)),f=0,t.X&&(f=t.X.g),t.Na=u,E(m,u.promise,2);case 2:if(c=m.h,t.Na=null,p=c.data,!n.aes128Key){m.B(3);break}return E(m,$S(p,n.aes128Key,f),4);case 4:p=m.h;case 3:return m.return(p)}})}function bm(e,t,n,o){var a=t instanceof We?t:void 0,u=a?1:0;return t=_u(t.Z(),t.Qa,t.wa,e.h.retryParameters,o),e.g.Tb.request(Ri,t,{type:u,stream:n,segment:a})}function Vc(e,t,n,o){var a,u;return z(function(f){if(f.g==1)return t.wb=!1,t.Zd=!1,t.vd=0,t.Lc=!0,t.Ca=null,t.Db=null,t.X=null,t.ra&&vm(t.ra),o?(a=e.g.Dd(),u=e.g.T.getDuration(),E(f,e.g.T.remove(t.type,a+o,u),3)):E(f,em(e.g.T,t.type),4);if(f.g!=3)return gt(e.l),n?E(f,e.g.T.flush(t.type),3):f.B(3);gt(e.l),t.Lc=!1,t.endOfStream=!1,t.Da||t.ib||ci(e,t,0),j(f)})}function ci(e,t,n){var o=t.type;(o!=at||e.i.has(o))&&(t.ib=new Is(function(){var a;return z(function(u){if(u.g==1)return re(u,2),E(u,FS(e,t),4);if(u.g!=2)return ie(u,0);a=se(u),e.g&&e.g.onError(a),j(u)})}).U(n))}function Vs(e){e.ib!=null&&(e.ib.stop(),e.ib=null)}function Hs(e){return z(function(t){return e.Na?E(t,e.Na.abort(),0):t.B(0)})}function Im(e,t,n){var o;return z(function(a){if(a.g==1)return E(a,r0(e.G),2);gt(e.l),o=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<o&&(n.handled=e.g.wd(t.stream,o),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),j(a)})}function YS(e){var t,n,o,a,u,f;return z(function(c){return c.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.H<n?c.return(!1):(e.H=t,o=$t,(a=e.i.get(o.P))&&(a.Db=null,zs(e,a),Hs(a).catch(function(){})),(u=e.i.get(o.$))&&(u.Db=null,zs(e,u),Hs(u).catch(function(){})),f=new Map,e.j.audio&&f.set(o.P,e.j.audio),e.j.video&&f.set(o.$,e.j.video),E(c,nm(e.g.T,f),2))):c.return(!0)})}function Hc(e,t,n){var o,a,u,f,c,p,m;return z(function(v){switch(v.g){case 1:var S=new Ut(e).Ga.split("/").pop().split(".");return o=S.length==1?"":S.pop().toLowerCase(),(a=qS[o])?v.return(a):(u=0,f=Yt([e],n),re(v,2),f.method="HEAD",E(v,t.request(u,f).promise,4));case 4:c=v.h,a=c.headers["content-type"],ie(v,3);break;case 2:if(p=se(v),!p||p.code!=1002&&p.code!=1001){v.B(3);break}return f.method="GET",E(v,t.request(u,f).promise,6);case 6:m=v.h,a=m.headers["content-type"];case 3:return v.return(a?a.toLowerCase().split(";").shift():"")}})}var qS={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function km(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(f){return km(f,e)}).join("");var n=[],o=700<=e.fontWeight,a=e.fontStyle=="italic",u=e.textDecoration.includes("underline");return o&&n.push(["b"]),a&&n.push(["i"]),u&&n.push(["u"]),a=e.color,a==""&&t&&(a=t.color),o="",(a=Mm(a))&&(o+="."+a),a=e.backgroundColor,a==""&&t&&(a=t.backgroundColor),(t=Mm(a))&&(o+=".bg_"+t),o&&n.push(["c",o]),n.reduceRight(function(f,c){var p=w(c);return c=p.next().value,p=p.next().value,"<"+c+(p===void 0?"":p)+">"+f+"</"+c+">"},e.payload)}function Mm(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function $c(e,t){var n=[];e=w(e);for(var o=e.next();!o.done;o=e.next())if(o=o.value,o.isContainer)n.push.apply(n,L($c(o.nestedCues,o)));else{var a=o.clone();a.nestedCues=[],a.payload=km(o,t),n.push(a)}return n}function Gn(e,t){this.g=null;for(var n=w(Array.from(e.textTracks)),o=n.next();!o.done;o=n.next())o=o.value,o.mode="disabled",o.label==t&&(this.g=o);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}s=Gn.prototype,s.remove=function(e,t){return this.g?(_m(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},s.append=function(e){var t=$c(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var o={};t=w(t);for(var a=t.next();!a.done;o={Zb:o.Zb},a=t.next())o.Zb=a.value,e.some(function(u){return function(f){return f.startTime==u.Zb.startTime&&f.endTime==u.Zb.endTime&&f.text==u.Zb.payload}}(o))||(a=QS(o.Zb))&&n.push(a);for(e=n.slice().sort(function(u,f){return u.startTime!=f.startTime?u.startTime-f.startTime:u.endTime!=f.endTime?u.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(u):n.indexOf(u)-n.indexOf(f)}),e=w(e),o=e.next();!o.done;o=e.next())this.g.addCue(o.value)},s.destroy=function(){return this.g&&(_m(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},s.isTextVisible=function(){return this.g.mode=="showing"},s.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function QS(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch{}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function _m(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var o=w(Array.from(e.cues)),a=o.next();!a.done;a=o.next())(a=a.value)&&t(a)&&e.removeCue(a);e.mode=n}ae("shaka.text.SimpleTextDisplayer",Gn),Gn.prototype.setTextVisibility=Gn.prototype.setTextVisibility,Gn.prototype.isTextVisible=Gn.prototype.isTextVisible,Gn.prototype.destroy=Gn.prototype.destroy,Gn.prototype.append=Gn.prototype.append,Gn.prototype.remove=Gn.prototype.remove;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Wn(){}s=Wn.prototype,s.remove=function(){},s.append=function(){},s.destroy=function(){},s.isTextVisible=function(){return!1},s.setTextVisibility=function(){},ae("shaka.text.StubTextDisplayer",Wn),Wn.prototype.setTextVisibility=Wn.prototype.setTextVisibility,Wn.prototype.isTextVisible=Wn.prototype.isTextVisible,Wn.prototype.destroy=Wn.prototype.destroy,Wn.prototype.append=Wn.prototype.append,Wn.prototype.remove=Wn.prototype.remove;function Rm(){}function $s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}ae("shaka.util.Dom",Rm),Rm.removeAllChildren=$s;function Xn(e,t){var n=this;this.m=!1,this.i=[],this.A=e,this.s=t,this.j=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),this.C=new rt(function(){Gs(n)}).$a(.25),this.h=new Map,this.l=new Ct,this.l.D(document,"fullscreenchange",function(){Gs(n,!0)}),this.l.D(this.A,"resize",function(){var o=n.A,a=o.videoWidth;o=o.videoHeight,a&&o?n.j=a/o:n.j=null}),this.o=null,"ResizeObserver"in d&&(this.o=new ResizeObserver(function(){Gs(n,!0)}),this.o.observe(this.g)),this.u=new Map}s=Xn.prototype,s.append=function(e){var t=[].concat(L(this.i)),n={};e=w(e);for(var o=e.next();!o.done;n={jd:n.jd},o=e.next())n.jd=o.value,t.some(function(a){return function(u){return jf(u,a.jd)}}(n))||this.i.push(n.jd);Gs(this)},s.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.i=[],this.C&&this.C.stop(),this.h.clear(),this.l&&(this.l.release(),this.l=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},s.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter(function(o){return o.startTime<e||o.endTime>=t}),Gs(this,n>this.i.length),!0},s.isTextVisible=function(){return this.m},s.setTextVisibility=function(e){this.m=e};function ZS(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function Lm(e,t,n,o,a){var u=!1,f=[],c=[];t=w(t);for(var p=t.next();!p.done;p=t.next()){p=p.value,a.push(p);var m=e.h.get(p),v=p.startTime<=o&&p.endTime>o,S=m?m.wg:null;m&&(f.push(m.pe),m.bd&&f.push(m.bd),v||(u=!0,e.h.delete(p),m=null)),v&&(c.push(p),m?ZS(e,S)||(u=!0):(JS(e,p,a),m=e.h.get(p),S=m.wg,u=!0)),0<p.nestedCues.length&&S&&Lm(e,p.nestedCues,S,o,a),a.pop()}if(u){for(o=w(f),a=o.next();!a.done;a=o.next())a=a.value,a.parentElement&&a.parentElement.removeChild(a);for(c.sort(function(C,T){return C.startTime!=T.startTime?C.startTime-T.startTime:C.endTime-T.endTime}),c=w(c),p=c.next();!p.done;p=c.next())o=e.h.get(p.value),o.bd?(n.appendChild(o.bd),o.bd.appendChild(o.pe)):n.appendChild(o.pe)}}function Gs(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=w(e.u.values());for(var o=t.next();!o.done;o=t.next())$s(o.value);$s(e.g),e.h.clear(),e.u.clear()}if(e.m){t=new Map,o=w(e.h.keys());for(var a=o.next();!a.done;a=o.next())a=a.value,t.set(a,e.h.get(a));Lm(e,e.i,e.g,n,[])}}}function JS(e,t,n){var o=1<n.length,a=o?"span":"div";t.lineBreak&&(a="br"),t.rubyTag&&(a=t.rubyTag),o=!o&&0<t.nestedCues.length;var u=document.createElement(a);if(a!="br"&&tT(e,u,t,n,o),n=null,t.region&&t.region.id){n=t.region,a=e.j===4/3?2.5:1.9;var f=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==Hn?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==Hn?"%":"px");if(e.u.has(f))n=e.u.get(f);else{var c=document.createElement("span"),p=n.heightUnits==Hn?"%":"px",m=n.widthUnits==Hn?"%":"px",v=n.viewportAnchorUnits==Hn?"%":"px";c.id="shaka-text-region---"+f,c.classList.add("shaka-text-region"),c.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(c.style.height=5.33*n.height+"%",c.style.width=n.width*a+"%"):(c.style.height=n.height+p,c.style.width=n.width+m),n.viewportAnchorUnits===2?(p=n.viewportAnchorY/75*100,m=n.viewportAnchorX/(e.j===4/3?160:210)*100,p-=n.regionAnchorY*n.height*5.33/100,m-=n.regionAnchorX*n.width*a/100,c.style.top=p+"%",c.style.left=m+"%"):(c.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+v,c.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+v),c.style.display="flex",c.style.flexDirection="column",c.style.alignItems="center",c.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.u.set(f,c),n=c}}a=u,o&&(a=document.createElement("span"),a.classList.add("shaka-text-wrapper"),a.style.backgroundColor=t.backgroundColor,a.style.lineHeight="normal",u.appendChild(a)),e.h.set(t,{pe:u,wg:a,bd:n})}function eT(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Ha?n:e==="left"||e==="start"&&t===ws||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===ws?"line-right":"center"}function tT(e,t,n,o,a){var u=t.style,f=n.nestedCues.length==0,c=1<o.length;u.whiteSpace="pre-wrap";var p=n.payload.replace(/\s+$/g,function(v){return" ".repeat(v.length)});if(u.webkitTextStrokeColor=n.textStrokeColor,u.webkitTextStrokeWidth=n.textStrokeWidth,u.color=n.color,u.direction=n.direction,u.opacity=n.opacity,u.paddingLeft=Gc(n.linePadding,n,e.s),u.paddingRight=Gc(n.linePadding,n,e.s),u.textCombineUpright=n.textCombineUpright,u.textShadow=n.textShadow,n.backgroundImage)u.backgroundImage="url('"+n.backgroundImage+"')",u.backgroundRepeat="no-repeat",u.backgroundSize="contain",u.backgroundPosition="center",u.width="100%",u.height="100%";else{if(n.nestedCues.length)var m=t;else m=document.createElement("span"),t.appendChild(m);n.border&&(m.style.border=n.border),!a&&((t=Pm(o,function(v){return v.backgroundColor}))?m.style.backgroundColor=t:p&&(m.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=Pm(o,function(v){return v.fontFamily}))&&(m.style.fontFamily=t),p&&(m.textContent=p)}c&&!o[o.length-1].isContainer?u.display="inline":(u.display="flex",u.flexDirection="column",u.alignItems="center",u.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(u.margin="0"),u.fontFamily=n.fontFamily,u.fontWeight=n.fontWeight.toString(),u.fontStyle=n.fontStyle,u.letterSpacing=n.letterSpacing,u.fontSize=Gc(n.fontSize,n,e.s),o=n.line,o!=null&&(f=n.lineInterpretation,f==$a&&(f=1,c=16,e.j&&1>e.j&&(c=32),o=0>o?100+o/c*100:o/c*100),f==1&&(u.position="absolute",n.writingMode==Ss?(u.width="100%",n.lineAlign==Mo?u.top=o+"%":n.lineAlign=="end"&&(u.bottom=100-o+"%")):n.writingMode=="vertical-lr"?(u.height="100%",n.lineAlign==Mo?u.left=o+"%":n.lineAlign=="end"&&(u.right=100-o+"%")):(u.height="100%",n.lineAlign==Mo?u.right=o+"%":n.lineAlign=="end"&&(u.left=100-o+"%")))),u.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==Ss?u.paddingLeft=n.position:u.paddingTop=n.position),e=eT(n),e=="line-left"?u.cssFloat="left":e=="line-right"&&(u.cssFloat="right"),u.textAlign=n.textAlign,u.textDecoration=n.textDecoration.join(" "),u.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&u.writingMode==n.writingMode||(u.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Ss?u.width=n.size+"%":u.height=n.size+"%")}function Gc(e,t,n){var o=(o=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(o[1]),unit:o[2]}:null;if(!o)return e;var a=o.value;switch(o.unit){case"%":return a/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*a/t.cellResolution.rows+"px";default:return e}}function Pm(e,t){for(var n=e.length-1;0<=n;n--){var o=t(e[n]);if(o||o===0)return o}return null}ae("shaka.text.UITextDisplayer",Xn),Xn.prototype.setTextVisibility=Xn.prototype.setTextVisibility,Xn.prototype.isTextVisible=Xn.prototype.isTextVisible,Xn.prototype.remove=Xn.prototype.remove,Xn.prototype.destroy=Xn.prototype.destroy,Xn.prototype.append=Xn.prototype.append;function nT(e,t){function n(u){for(var f=u,c=w(t),p=c.next();!p.done;p=c.next())p=p.value,p.end&&p.start<u&&(f+=p.end-p.start);return u=Math.floor(f/3600),c=Math.floor(f/60%60),p=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>u?"0":"")+u+":"+(10>c?"0":"")+c+":"+(10>p?"0":"")+p+"."+(100>f?10>f?"00":"0":"")+f}var o=$c(e);e=`WEBVTT

`,o=w(o);for(var a=o.next();!a.done;a=o.next())a=a.value,e+=n(a.startTime)+" --> "+n(a.endTime)+function(u){var f=[];switch(u.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case Oi:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(u.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(a)+`
`,e+=a.payload+`

`;return e}ae("shaka.text.WebVttGenerator",function(){});function Dm(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}Dm.prototype.configure=function(e){this.g=e};function iT(e,t,n){try{if(!e.g.enabled)return t;var o=Wc(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var a=Pu;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":a=Nu;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":a=Nm;break e}a=void 0}o.ot=a,o.su=!0;var u=Lu(o);return Xc(t,u)}catch(f){return it("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function Wc(e){return e.g.sessionId||(e.g.sessionId=d.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function kr(e,t,n){n=n===void 0?{}:n;var o=o===void 0?e.g.useHeaders:o;if(e.g.enabled){Object.assign(n,Wc(e)),n.pr=e.h.Cd();var a=n.ot===Du||n.ot===Nu;if(e.j&&a&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),o)e=aT(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var u=Lu(n);u&&(t.uris=t.uris.map(function(f){return Xc(f,u)}))}}}function oT(e){if(e.type===0)return uT;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Nu:Du;if(t=="audio")return Pu;if(t=="text")return e.mimeType==="application/mp4"?Yc:Kc}}function rT(e,t){if(t=e.h.pb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(o){return o.start<=n&&o.end>=n}))?1e3*(e.end-n):NaN}function sT(e,t){var n=e.h.Cb();if(!n.length)return NaN;e=n[0],n=w(n);for(var o=n.next();!o.done;o=n.next())o=o.value,o.type==="variant"&&o.bandwidth>e.bandwidth&&(e=o);switch(t){case Du:return e.videoBandwidth||NaN;case Pu:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Lu(e){function t(S){return 100*n(S/100)}function n(S){return Math.round(S)}function o(S){return!Number.isNaN(S)&&S!=null&&S!==""&&S!==!1}var a=[],u={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(S){return encodeURIComponent(S)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=w(f);for(var c=f.next();!c.done;c=f.next()){c=c.value;var p=e[c];if(o(p)&&(c!=="v"||p!==1)&&(c!="pr"||p!==1)){var m=u[c];m&&(p=m(p)),m=typeof p;var v=void 0;v=m==="string"&&c!=="ot"&&c!=="sf"&&c!=="st"?c+"="+JSON.stringify(p):m==="boolean"?c:m==="symbol"?c+"="+p.description:c+"="+p,a.push(v)}}return a.join(",")}function aT(e){var t=Object.keys(e),n={},o=["Object","Request","Session","Status"],a=[{},{},{},{}],u={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=w(t);for(var f=t.next();!f.done;f=t.next())f=f.value,a[u[f]!=null?u[f]:1][f]=e[f];for(e=0;e<a.length;e++)(u=Lu(a[e]))&&(n["CMCD-"+o[e]]=u);return n}function Xc(e,t){return!t||e.includes("offline:")?e:(e=new Ut(e),e.g.set("CMCD",t),e.toString())}var Nm="m",Pu="a",Du="v",Nu="av",uT="i",Kc="c",Yc="tt";ae("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",yg:"s",OTHER:"o"});function Kn(e){this.h=e,this.g=null}s=Kn.prototype,s.configure=function(e){this.h=e},s.Rf=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Bm)?1e3*this.g.get(Bm):null},s.Qf=function(){return this.h.enabled&&this.g&&this.g.has(Um)?1e3*this.g.get(Um):null},s.fh=function(){return this.h.enabled&&this.g&&this.g.has(jm)?this.g.get(jm):null},s.gh=function(){return this.h.enabled&&this.g&&this.g.has(Fm)?this.g.get(Fm):null},s.getBandwidthEstimate=function(e){var t=this.Qf();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function Om(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}ae("shaka.util.CmsdManager",Kn),Kn.prototype.getBandwidthEstimate=Kn.prototype.getBandwidthEstimate,Kn.prototype.getRoundTripTime=Kn.prototype.gh,Kn.prototype.getResponseDelay=Kn.prototype.fh,Kn.prototype.getEstimatedThroughput=Kn.prototype.Qf,Kn.prototype.getMaxBitrate=Kn.prototype.Rf;var Um="etp",Bm="mb",jm="rd",Fm="rtt";function qc(){}function Qc(e,t,n,o,a){var u=a in o,f=!0,c;for(c in t){var p=a+"."+c,m=u?o[a]:n[c];u||c in n?t[c]===void 0?m===void 0||u?delete e[c]:e[c]=Po(m):m.constructor==Object&&t[c]&&t[c].constructor==Object?(e[c]||(e[c]=Po(m)),p=Qc(e[c],t[c],m,o,p),f=f&&p):typeof t[c]!=typeof m||t[c]==null||typeof t[c]!="function"&&t[c].constructor!=m.constructor?(De("Invalid config, wrong type for "+p),f=!1):(typeof n[c]=="function"&&n[c].length!=t[c].length&&Le("Unexpected number of arguments for "+p),e[c]=t[c]):(De("Invalid config, unrecognized key "+p),f=!1)}return f}function Zc(e,t){for(var n={},o=n,a=0,u=0;a=e.indexOf(".",a),!(0>a);)(a==0||e[a-1]!="\\")&&(u=e.substring(u,a).replace(/\\\./g,"."),o[u]={},o=o[u],u=a+1),a+=1;return o[e.substring(u).replace(/\\\./g,".")]=t,n}function Ou(e,t){return e&&t}ae("shaka.util.ConfigUtils",qc),qc.convertToConfigObject=Zc,qc.mergeConfigObjects=Qc;function zm(){this.g=null,this.h=[]}function Jc(e,t){return z(function(n){if(n.g==1)return e.g?E(n,new Promise(function(o){return e.h.push(o)}),2):n.B(2);e.g=t,j(n)})}zm.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function Yn(){}function Vm(e){return e=uo(e),new Ut(e).ob}function Ws(e,t,n){function o(c){Et(u).setUint32(f,c.byteLength,!0),f+=4,u.set(Ve(c),f),f+=c.byteLength}if(!n||!n.byteLength)throw new K(2,6,6015);var a;typeof t=="string"?a=fc(t,!0):a=t,e=uo(e),e=fc(e,!0);var u=new Uint8Array(12+e.byteLength+a.byteLength+n.byteLength),f=0;return o(e),o(a),o(n),u}function Hm(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=uo(e).split("skd://").pop(),Ws(e,n,t))}function eh(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}ae("shaka.util.FairPlayUtils",Yn),Yn.commonFairPlayResponse=function(e,t){if(e===2){try{var n=It(t.data)}catch{return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var o=JSON.parse(n);o.ckc&&(n=o.ckc,e=!0),o.CkcMessage&&(n=o.CkcMessage,e=!0),o.License&&(n=o.License,e=!0)}catch{}e&&(t.data=Pt(ui(n)))}},Yn.expressplayFairPlayRequest=function(e,t){eh(e,t)},Yn.conaxFairPlayRequest=function(e,t){eh(e,t)},Yn.ezdrmFairPlayRequest=function(e,t){eh(e,t)},Yn.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Ve(t.body),e=Bo(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Vi("spc="+e))},Yn.expressplayInitDataTransform=function(e,t,n){return Hm(e,t,n)},Yn.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=uo(e).split("skd://").pop().split("?").shift(),n=d.atob(n);var o=new ArrayBuffer(2*n.length);o=Xt(o);for(var a=0,u=n.length;a<u;a++)o[a]=n.charCodeAt(a);return Ws(e,o,t)},Yn.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=uo(e).split(";").pop(),Ws(e,n,t))},Yn.verimatrixInitDataTransform=function(e,t,n){return Hm(e,t,n)},Yn.initDataTransform=Ws,Yn.defaultGetContentId=Vm,Yn.isFairPlaySupported=function(){var e;return z(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},re(t,2),E(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(se(t),t.return(!1))})};function th(){}function Mr(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:_i(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(c,p,m){return d.shakaMediaKeysPolyfill&&p=="skd"&&(p=m.serverCertificate,m=Vm(c),c=Ws(c,m,p)),c},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Ms(),minHdcpVersion:"",ignoreDuplicateInitData:!Ja()},n="reload",o=!1;Ja()||Za()||Rt("Tizen 4")||Zf()||navigator.userAgent.match(/webOS\/4/i)||navigator.userAgent.match(/webOS\/5/i)||(n="smooth",o=!0),o={retryParameters:_i(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(c){return Ou([c],c)},sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:o},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Za()||Ja()||Zf()||ur()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:function(c){return Ou([c],c)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var a={retryParameters:_i(),failureCallback:function(c){return Ou([c])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5};(Rt("Web0S")||Do()||ar()||Rt("Hisense")||Rt("VIDAA"))&&(a.stallSkip=0);var u={trackSelectionCallback:function(c){return z(function(p){return p.return(c)})},downloadSizeCallback:function(c){var p;return z(function(m){return m.g==1?navigator.storage&&navigator.storage.estimate?E(m,navigator.storage.estimate(),3):m.return(!0):(p=m.h,m.return(p.usage+c<.95*p.quota))})},progressCallback:function(c,p){return Ou([c,p])},usePersistentLicense:!0,numberOfParallelDownloads:5},f={drm:t,manifest:o,streaming:a,mediaSource:{codecSwitchingStrategy:n,sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:u,abrFactory:function(){return new At},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};return u.trackSelectionCallback=function(c){return z(function(p){return p.return(lT(c,f.preferredAudioLanguage,f.preferredVideoHdrLevel))})},f}function _r(e,t,n){var o={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Qc(e,t,n||Mr(),o,"")}function lT(e,t,n){var o=n;o=="AUTO"&&(o=d.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var a=e.filter(function(c){return!(c.type!="variant"||c.hdr&&c.hdr!=o)});n=[];var u=qa(t,a.map(function(c){return c.language}));u&&(n=a.filter(function(c){return ct(c.language)==u})),n.length==0&&(n=a.filter(function(c){return c.primary})),n.length==0&&(a.map(function(c){return c.language}),n=a);var f=n.filter(function(c){return c.height&&480>=c.height});for(f.length&&(f.sort(function(c,p){return p.height-c.height}),n=f.filter(function(c){return c.height==f[0].height})),t=[],n.length&&(a=Math.floor(n.length/2),n.sort(function(c,p){return c.bandwidth-p.bandwidth}),t.push(n[a])),e=w(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=at&&n.type!="image"||t.push(n);return t}ae("shaka.util.PlayerConfiguration",th),th.mergeConfigObjects=_r,th.createDefault=Mr;function fT(){this.g=null,this.h=[]}function nh(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=w(e.h);for(var o=e.next();!o.done;o=e.next())o=o.value,n+=o.state==t?o.duration:0;return n}function cT(e){function t(u){return{timestamp:u.timestamp,state:u.state,duration:u.duration}}for(var n=[],o=w(e.h),a=o.next();!a.done;a=o.next())n.push(t(a.value));return e.g&&n.push(t(e.g)),n}function hT(){this.i=this.h=null,this.g=[]}function ih(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function $m(){this.u=this.A=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.K=this.N=this.H=this.I=this.J=this.l=this.o=NaN,this.g=new fT,this.h=new hT}function pe(e,t){ht.call(this);var n=this;this.l=dh,this.xd=this.h=null,this.da=!1,this.Gd=new Ct,this.sc=new Ct,this.o=new Ct,this.Ba=new Ct,this.C=this.G=this.m=this.H=null,this.Kd=0,this.W=new zm,this.ma=this.ea=this.i=this.Ld=this.F=this.j=this.za=this.J=this.eg=this.Y=this.V=this.Aa=this.K=this.I=this.$b=null,this.mb=!1,this.Ne=this.s=null,this.We=1e9,this.Oc=[],this.N=NaN,this.g=Lr(this),this.Id={width:1/0,height:1/0},this.u=null,this.kb=new cr(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.lb=this.g.preferredTextLanguage,this.Kc=this.g.preferredTextRole,this.Jc=this.g.preferForcedSubs,this.Hc=[],t&&t(this),this.V=MT(this),this.Y=new Kn(this.g.cmsd),this.H=AT(this),this.H.nf(this.g.streaming.forceHTTPS),this.A=null,Vu&&(this.A=Vu(),this.A.configure(this.g.ads)),this.Gd.D(d,"online",function(){fh(n),n.gf()}),this.yd=new rt(function(){return NT(n)}),e&&(ai("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Ic(e,!0))}Z(pe,ht);function Uu(e){e.J!=null&&(K0(e.J),e.J.release(),e.J=null)}function dT(e,t){if(t.lcevc.enabled){var n=e.Cb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(Qf()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Le("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),Uu(e),e.J==null&&(e.J=new Us(e.h,e.eg,t.lcevc),e.G&&(e.G.N=e.J))}else Uu(e)}function Mt(e,t){return new Ge(e,t)}s=pe.prototype,s.destroy=function(){var e=this,t;return z(function(n){switch(n.g){case 1:return e.l==Ti?n.return():(Uu(e),t=e.detach(),e.l=Ti,E(n,t,2));case 2:if(e.Gd&&(e.Gd.release(),e.Gd=null),e.sc&&(e.sc.release(),e.sc=null),e.o&&(e.o.release(),e.o=null),e.Ba&&(e.Ba.release(),e.Ba=null),e.Ne=null,e.g=null,e.u=null,e.xd=null,e.V=null,e.Y=null,!e.H){n.B(3);break}return E(n,e.H.destroy(),4);case 4:e.H=null;case 3:e.s&&(e.s.release(),e.s=null),ht.prototype.release.call(e),j(n)}})};function Yi(e,t){e.dispatchEvent(Mt("onstatechange",new Map().set("state",t)))}s.Ic=function(e,t){t=t===void 0?!0:t;var n=this,o,a;return z(function(u){switch(u.g){case 1:if(n.l==Ti)throw new K(2,7,7e3);if(!n.h||n.h==e){u.B(2);break}return E(u,n.detach(),2);case 2:return E(u,oh(n,"attach"),4);case 4:if(u.h)return u.return();if(re(u,5,6),Yi(n,"attach"),o=function(){var f=ch(n);f&&$o(n,f)},n.sc.D(e,"error",o),n.h=e,!t||!wi()||n.G){u.B(6);break}return E(u,rh(n),6);case 6:ne(u),n.W.release(),ue(u,0);break;case 5:return a=se(u),E(u,n.detach(),10);case 10:throw a}})},s.Eg=function(e){this.eg=e},s.detach=function(e){e=e===void 0?!1:e;var t=this;return z(function(n){if(n.g==1){if(t.l==Ti)throw new K(2,7,7e3);return E(n,t.rc(!1,e),2)}if(n.g!=3)return E(n,oh(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.sc.Za(),t.h=null),Yi(t,"detach"),t.A&&!e&&t.A.release()}finally{t.W.release()}j(n)})};function oh(e,t){var n;return z(function(o){return o.g==1?(n=++e.Kd,E(o,Jc(e.W,t),2)):n!=e.Kd?(e.W.release(),o.return(!0)):o.return(!1)})}s.rc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,o,a,u,f,c,p,m,v,S;return z(function(C){switch(C.g){case 1:return n.l!=Ti&&(n.l=dh),E(C,oh(n,"unload"),2);case 2:return C.h?C.return():(ye(C,3),n.mb=!1,Yi(n,"unload"),e&&!wi()&&(e=!1),Uu(n),o=n.Hc.map(function(T){return T()}),n.Hc=[],E(C,Promise.all(o),5));case 5:if(n.dispatchEvent(Mt("unloading")),n.Aa&&(n.Aa.release(),n.Aa=null),n.h&&(n.o.Za(),n.Ba.Za()),n.yd.stop(),n.$b&&(n.$b.release(),n.$b=null),!n.F){C.B(6);break}return E(C,n.F.stop(),7);case 7:n.F=null,n.Ld=null;case 6:if(!n.s){C.B(8);break}return E(C,n.s.stop(),8);case 8:if(!n.j){C.B(10);break}return E(C,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.I&&(n.I.release(),n.I=null),n.C&&(n.C.release(),n.C=null),!n.G){C.B(12);break}return E(C,n.G.destroy(),13);case 13:n.G=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.Y&&(n.Y.g=null),n.h&&$s(n.h),!n.h||!n.h.src){C.B(14);break}return E(C,new Promise(function(T){return new rt(T).U(.1)}),15);case 15:n.h.removeAttribute("src"),n.h.load();case 14:if(!n.m){C.B(16);break}return E(C,n.m.destroy(),17);case 17:n.m=null;case 16:if(n.ea=null,n.K=null,n.i){for(a=w(n.i.variants),u=a.next();!u.done;u=a.next())for(f=u.value,c=w([f.audio,f.video]),p=c.next();!p.done;p=c.next())(m=p.value)&&m.segmentIndex&&m.segmentIndex.release();for(v=w(n.i.textStreams),p=v.next();!p.done;p=v.next())S=p.value,S.segmentIndex&&S.segmentIndex.release()}n.i=null,n.u=new $m,n.Te=null,n.Oc=[],n.N=NaN,lh(n);case 3:ne(C),n.W.release(),ue(C,4);break;case 4:if(e&&wi()&&!n.G)return E(C,rh(n),0);C.B(0)}})},s.ei=function(e){this.ma=e},s.load=function(e,t,n){t=t===void 0?null:t;var o=this,a,u,f,c,p;return z(function(m){switch(m.g){case 1:if(o.l==Ti)throw new K(2,7,7e3);return E(m,Jc(o.W,"load"),2);case 2:if(o.W.release(),!o.h)throw new K(2,7,7002);if(!o.ea){m.B(3);break}return E(m,o.rc(!1),3);case 3:if(a=++o.Kd,u=function(){if(o.Kd!=a)throw new K(2,7,7e3)},f=function(v,S){return z(function(C){switch(C.g){case 1:return ye(C,2),E(C,Jc(o.W,S),4);case 4:return u(),E(C,v(),5);case 5:u();case 2:ne(C),o.W.release(),ue(C,0)}})},re(m,5),o.ma=t,o.mb=!1,o.dispatchEvent(Mt("loading")),c=Date.now()/1e3,o.u=new $m,o.ea=e,n){m.B(7);break}return E(m,f(function(){return z(function(v){if(v.g==1)return E(v,pT(o),2);n=v.h,j(v)})},"guessMimeType_"),7);case 7:if(mT(o,n))return E(m,f(function(){return z(function(v){return E(v,xT(o,n),0)})},"initializeSrcEqualsDrmInner_"),16);if(o.G){m.B(11);break}return E(m,f(function(){return z(function(v){return E(v,rh(o),0)})},"initializeMediaSourceEngineInner_"),11);case 11:return E(m,f(function(){return z(function(v){return E(v,gT(o,n),0)})},"parseManifestInner_"),13);case 13:return E(m,f(function(){return z(function(v){return E(v,yT(o),0)})},"initializeDrmInner_"),14);case 14:return E(m,f(function(){return z(function(v){return E(v,vT(o,c),0)})},"loadInner_"),10);case 16:return E(m,f(function(){return z(function(v){return E(v,wT(o,c,n),0)})},"srcEqualsInner_"),10);case 10:o.dispatchEvent(Mt("loaded")),ie(m,0);break;case 5:if(p=se(m),p.code==7e3){m.B(18);break}return E(m,o.rc(!1),18);case 18:throw p}})};function pT(e){var t,n;return z(function(o){return o.g==1?(t=e.g.manifest.retryParameters,E(o,Hc(e.ea,e.H,t),2)):(n=o.h,n=="application/x-mpegurl"&&eu()&&(n="application/vnd.apple.mpegurl"),o.return(n))})}function mT(e,t){if(!wi())return!0;if(t){if((e.h||Bp()).canPlayType(t)=="")return!1;if(!(wi()&&t in fi))return!0;if(t==="application/x-mpegurl"||t==="application/vnd.apple.mpegurl"){if(e.g.streaming.preferNativeHls)return!0;if(eu())return e.g.streaming.useNativeHlsOnSafari}}return!1}function rh(e){var t,n,o,a,u;return z(function(f){if(f.g==1)return Yi(e,"media-source"),t=e.g.textDisplayFactory,n=t(),e.Te=t,o=kT(e.h,n,function(c,p,m){Gm(e,c,p,m)},e.J),o.configure(e.g.mediaSource),a=e.g.manifest,u=a.segmentRelativeVttTiming,o.Y=u,E(f,o.J,2);e.G=o,j(f)})}function gT(e,t){var n,o,a,u,f,c,p,m;return z(function(v){if(v.g==1)return n=e.H,Yi(e,"manifest-parser"),e.Ld=O0(e.ea,t||null),e.F=e.Ld(),o=Po(e.g.manifest),e.h&&e.h.nodeName==="AUDIO"&&(o.disableVideo=!0),e.F.configure(o),e.Aa=new Oc(function(){return e.Eb()}),e.Aa.addEventListener("regionadd",function(S){S=S.region,Ks(e,"timelineregionadded",S),e.A&&e.A.onDashTimedMetadata(S)}),e.za=null,e.g.streaming.observeQualityChanges&&(e.za=new ku(function(){return e.pb()}),e.za.addEventListener("qualitychange",function(S){var C=S.quality;S=S.position,C=new Map().set("mediaQuality",{bandwidth:C.bandwidth,audioSamplingRate:C.audioSamplingRate,codecs:C.codecs,contentType:C.contentType,frameRate:C.frameRate,height:C.height,mimeType:C.mimeType,channelsCount:C.channelsCount,pixelAspectRatio:C.pixelAspectRatio,width:C.width}).set("position",S),e.dispatchEvent(Mt("mediaqualitychanged",C))})),a={networkingEngine:n,filter:function(S){return tg(e,S)},makeTextStreamsForClosedCaptions:function(S){return LT(e,S)},onTimelineRegionAdded:function(S){var C=e.Aa;e:{for(var T=w(C.g),b=T.next();!b.done;b=T.next())if(b=b.value,b.schemeIdUri==S.schemeIdUri&&b.id==S.id&&b.startTime==S.startTime&&b.endTime==S.endTime){T=b;break e}T=null}T==null&&(C.g.add(S),S=new Ge("regionadd",new Map([["region",S]])),C.dispatchEvent(S))},onEvent:function(S){return e.dispatchEvent(S)},onError:function(S){return $o(e,S)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(S){var C=e.m?e.m.g:null;C&&e.m.s&&uh(e,C.keySystem,S)},onManifestUpdated:function(){var S=new Map().set("isLive",e.R());e.dispatchEvent(Mt("manifestupdated",S)),e.A&&e.A.onManifestUpdated(e.R())},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()}},u=Date.now()/1e3,Yi(e,"manifest"),f=e,E(v,e.F.start(e.ea,a),2);if(f.i=v.h,c=Mt("manifestparsed"),e.dispatchEvent(c),e.i.variants.length==0)throw new K(2,4,4036);ET(e.i),p=Date.now()/1e3,m=p-u,e.u.F=m,j(v)})}function yT(e){var t,n,o;return z(function(a){return a.g==1?(Yi(e,"drm-engine"),t=Date.now()/1e3,n=!0,e.m=Km(e,{Tb:e.H,onError:function(u){$o(e,u)},Ud:function(u){fg(e,u)},onExpirationUpdated:function(u,f){cg(e,u,f)},onEvent:function(u){e.dispatchEvent(u),u.type=="drmsessionupdate"&&n&&(n=!1,e.u.j=Date.now()/1e3-t,e.J&&K0(e.J))}}),e.m.configure(e.g.drm),zp(e.i.variants,e.g.restrictions,e.Id)&&e.j&&Ln(e),o=ic(e.i.variants),E(a,T0(e.m,o,e.i.offlineSessionIds),2)):a.g!=3?E(a,e.m.Ic(e.h),3):E(a,tg(e,e.i),0)})}function vT(e,t){var n,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V;return z(function(q){switch(q.g){case 1:for(Yi(e,"load"),n=e.h,e.I=new Bs({Ed:function(){return n.playbackRate},ec:function(){return n.defaultPlaybackRate},rf:function(te){n.playbackRate=te},bg:function(te){n.currentTime+=te}}),o=function(){return Bu(e)},a=function(){return ig(e)},e.o.D(n,"playing",o),e.o.D(n,"pause",o),e.o.D(n,"ended",o),e.o.D(n,"ratechange",a),dT(e,e.g),u=e.g.abrFactory,e.s&&e.Ne==u||(e.Ne=u,e.s=u(),typeof e.s.setMediaElement!="function"&&(ai("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),e.s.setMediaElement=function(){}),typeof e.s.setCmsdManager!="function"&&(ai("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),e.s.setCmsdManager=function(){}),typeof e.s.trySuggestStreams!="function"&&(ai("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),e.s.trySuggestStreams=function(){}),e.s.configure(e.g.abr)),e.kb=new cr(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),e.lb=e.g.preferredTextLanguage,e.Kc=e.g.preferredTextRole,e.Jc=e.g.preferForcedSubs,hh(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.s.init(function(te,de,ce){e.j&&te!=e.j.j&&Fu(e,te,!0,de===void 0?!1:de,ce===void 0?0:ce)}),e.s.setMediaElement(n),e.s.setCmsdManager(e.Y),Fp(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes),e.j=_T(e),e.j.configure(e.g.streaming),e.l=ln,n.textTracks&&e.o.D(n.textTracks,"addtrack",function(te){if(te.track)switch(te=te.track,te.kind){case"chapters":Xm(e,te)}}),e.dispatchEvent(Mt("streaming")),f=null,(c=e.j.j)||(f=rg(e,!0)),p=[],m=c||f,v=w([m.video,m.audio]),S=v.next();!S.done;S=v.next())(C=S.value)&&!C.segmentIndex&&p.push(C.createSegmentIndex());if(!(0<p.length)){q.B(2);break}return E(q,Promise.all(p),2);case 2:if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(m),hh(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C=bT(e,e.ma),e.$b=IT(e,t),T=Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal),Ym(e,n,T),c){q.B(4);break}if(Fu(e,f,!0,!1,0),!e.g.streaming.startAtSegmentBoundary){q.B(4);break}return b=e.C,_=b.je,E(q,DT(f,e.C.qd()),6);case 6:_.call(b,q.h);case 4:return e.C.ie(),D=e.jc().find(function(te){return te.active}),D||((B=_s(e.i.textStreams,e.lb,e.Kc,e.Jc)[0]||null)&&ih(e.u.h,B,!0),f&&(B?(f.audio&&OT(e,f.audio,B)&&(e.da=!0),e.da&&e.G.F.setTextVisibility(!0),ug(e)):e.da=!1),B&&(e.g.streaming.alwaysStreamText||e.Me())&&Ru(e.j,B)),E(q,e.j.start(),7);case 7:e.g.abr.enabled&&(e.s.enable(),lg(e)),Ln(e),Pr(e),e.i.variants.some(function(te){return te.primary}),(N=e.R())&&(e.g.streaming.liveSync||e.i.serviceDescription)?(G=function(){return og(e)},e.o.D(n,"timeupdate",G)):N||(V=function(){return ju(e)},e.o.D(n,"timeupdate",V),ju(e)),e.A&&e.A.onManifestUpdated(N),e.mb=!0,e.o.ja(n,"loadedmetadata",function(){e.u.m=Date.now()/1e3-t}),j(q)}})}function xT(e,t){var n,o,a,u;return z(function(f){return f.g==1?(n=$t,o=Date.now()/1e3,a=!0,e.m=Km(e,{Tb:e.H,onError:function(c){$o(e,c)},Ud:function(c){fg(e,c)},onExpirationUpdated:function(c,p){cg(e,c,p)},onEvent:function(c){e.dispatchEvent(c),c.type=="drmsessionupdate"&&a&&(a=!1,e.u.j=Date.now()/1e3-o)}}),e.m.configure(e.g.drm),u={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Bi(t):"",codecs:t?ri(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.$,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.Y=!0,E(f,T0(e.m,[u],[]),2)):E(f,e.m.Ic(e.h),0)})}function wT(e,t,n){var o,a,u,f,c,p,m,v,S,C;return z(function(T){if(T.g==1)return Yi(e,"src-equals"),o=e.h,e.C=new cm(o),a=!1,e.Hc.push(function(){a=!0}),e.ma!=null&&e.C.je(e.ma),e.I=new Bs({Ed:function(){return o.playbackRate},ec:function(){return o.defaultPlaybackRate},rf:function(b){o.playbackRate=b},bg:function(b){o.currentTime+=b}}),u=e.g.streaming.rebufferingGoal,Ym(e,o,u),f=function(){return Bu(e)},c=function(){return ig(e)},e.o.D(o,"playing",f),e.o.D(o,"pause",f),e.o.D(o,"ended",f),e.o.D(o,"ratechange",c),o.preload!="none"&&e.o.ja(o,"loadedmetadata",function(){e.u.m=Date.now()/1e3-t}),o.audioTracks&&(e.o.D(o.audioTracks,"addtrack",function(){return Ln(e)}),e.o.D(o.audioTracks,"removetrack",function(){return Ln(e)}),e.o.D(o.audioTracks,"change",function(){return Ln(e)})),o.textTracks&&(e.o.D(o.textTracks,"addtrack",function(b){if(b.track)switch(b=b.track,b.kind){case"metadata":CT(e,b);break;case"chapters":Xm(e,b);break;default:Ln(e)}}),e.o.D(o.textTracks,"removetrack",function(){return Ln(e)}),e.o.D(o.textTracks,"change",function(){return Ln(e)})),o.src=iT(e.V,e.ea,n),(Do()||Rt("Web0S"))&&o.load(),e.l=Cn,e.dispatchEvent(Mt("streaming")),p=new bt,Ar(o,HTMLMediaElement.HAVE_METADATA,e.o,function(){e.C.ie(),p.resolve()}),Ar(o,HTMLMediaElement.HAVE_CURRENT_DATA,e.o,function(){var b;return z(function(_){if(_.g==1)return ST(e),b=Xs(e),b.find(function(D){return D.mode!="disabled"})?(0<b.length&&(e.da=!0),_.B(2)):E(_,new Promise(function(D){e.o.ja(o.textTracks,"change",D),new rt(D).U(1)}),2);if(a)return _.return();TT(e),j(_)})}),o.error?p.reject(ch(e)):o.preload=="none"&&(Le('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),p.resolve()),e.o.ja(o,"error",function(){p.reject(ch(e))}),E(T,p,2);(m=e.R())&&e.g.streaming.liveSync?(v=function(){return og(e)},e.o.D(o,"timeupdate",v)):m||(S=function(){return ju(e)},e.o.D(o,"timeupdate",S),ju(e)),e.A&&(e.A.onManifestUpdated(m),m&&(C=e.Eb().end,e.o.D(o,"progress",function(){var b=e.Eb().end;C!=b&&(e.A.onManifestUpdated(e.R()),C=b)}))),e.mb=!0,j(T)})}function ST(e){var t=e.g.preferredAudioLanguage;t!=""&&e.jg(t,e.g.preferredVariantRole)}function TT(e){var t=e.g.preferredTextLanguage;t!=""&&e.kf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function CT(e,t){if(t.kind=="metadata"){t.mode="hidden",e.o.D(t,"cuechange",function(){if(t.activeCues)for(var o=w(t.activeCues),a=o.next();!a.done;a=o.next())a=a.value,Wm(e,a.startTime,a.endTime,a.type,a.value),e.A&&e.A.onCueMetadataChange(a.value)});var n=new rt(function(){var o=RT(e);o=w(o);for(var a=o.next();!a.done;a=o.next())a.value.mode="hidden"}).qc().U(.5);e.Hc.push(function(){n.stop()})}}function Gm(e,t,n,o){t=w(t);for(var a=t.next();!a.done;a=t.next())if(a=a.value,a.data&&a.cueTime&&a.frames){var u=a.cueTime+n,f=o;f&&u>f&&(f=u);for(var c=w(a.frames),p=c.next();!p.done;p=c.next())Wm(e,u,f,"org.id3",p.value);e.A&&e.A.onHlsTimedMetadata(a,u)}}function Wm(e,t,n,o,a){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",o).set("payload",a),e.dispatchEvent(Mt("metadata",t))}function Xm(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new rt(function(){t.mode="hidden"}).qc().U(.5);e.Hc.push(function(){n.stop()})}}function ET(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}s.Mh=function(){for(var e=this.W;e.g;)e.release()};function Km(e,t){return new vu(t,e.g.drm.updateExpirationTime)}function AT(e){return new Tt(function(t,n,o){e.s&&e.s.segmentDownloaded(t,n,o)},function(t,n,o){if(n=new Map().set("headers",t).set("request",n).set("requestType",o),e.dispatchEvent(Mt("downloadheadersreceived",n)),e.Y&&(n=e.Y,n.h.enabled)){if(o=t["cmsd-static"])try{var a=new Map,u=o.split(",");for(o=0;o<u.length;o++){var f=u[o].split("=");a.set(f[0],Om(f[1]))}}catch{}if(t=t["cmsd-dynamic"]){try{var c=new Map,p=t.split(";");for(t=1;t<p.length;t++){var m=p[t].split("=");c.set(m[0],Om(m[1]))}var v=c}catch{v=null}v&&(n.g=v)}}},function(t,n,o,a){t=new Map().set("request",t).set("error",n).set("httpResponseCode",o).set("aborted",a),e.dispatchEvent(Mt("downloadfailed",t))},function(t,n,o){var a=e.V;if(o=o===void 0?{}:o,a.g.enabled)if(n.method==="HEAD")kr(a,n);else switch(t){case 0:try{if(a.g.enabled){if(o.type){e:{switch(o.type){case 4:var u="d";break e;case 3:case 2:u="h";break e;case 5:u="s";break e}u=void 0}a.m=u}kr(a,n,{ot:Nm,su:!a.i})}}catch(v){it("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",v)}break;case Ri:t=o;try{if(a.g.enabled){var f=t.segment;u=0,f&&(u=f.endTime-f.startTime);var c={d:1e3*u,st:a.h.R()?"l":"v"};c.ot=oT(t);var p=c.ot===Du||c.ot===Pu||c.ot===Nu||c.ot===Yc,m=t.stream;m&&(p&&(c.bl=rT(a,m.type)),m.bandwidth&&(c.br=m.bandwidth/1e3)),p&&c.ot!==Yc&&(c.tb=sT(a,c.ot)/1e3),kr(a,n,c)}}catch(v){it("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",v)}break;case 2:case 5:case 6:kr(a,n,{ot:"k"});break;case 4:kr(a,n,{ot:"o"})}},function(t,n,o,a){e.F&&e.F.banLocation&&e.F.banLocation(a)})}function bT(e,t){return new hm(e.h,e.i,e.g.streaming,t,function(){e.$b&&ym(e.$b,!0),e.j&&e.j.dd(),e.K&&Rr(e)},function(n){return e.dispatchEvent(n)})}function IT(e,t){t=new Mu(e.Aa,e.R()||0<t),t.addEventListener("enter",function(o){Ks(e,"timelineregionenter",o.region)}),t.addEventListener("exit",function(o){Ks(e,"timelineregionexit",o.region)}),t.addEventListener("skip",function(o){var a=o.region;o.seeking||(Ks(e,"timelineregionenter",a),Ks(e,"timelineregionexit",a))});var n=new gm(e.h);return n.g.add(t),e.za&&n.g.add(e.za),n}function Ym(e,t,n){e.K=new xw,e.K.g=hr,i0(e.K,n,Math.min(.5,n/2)),lh(e),e.o.D(t,"waiting",function(){return Rr(e)}),e.o.D(t,"stalled",function(){return Rr(e)}),e.o.D(t,"canplaythrough",function(){return Rr(e)}),e.o.D(t,"progress",function(){return Rr(e)})}function Rr(e){switch(e.l){case Cn:if(e.h.ended)var t=!0;else{var n=xc(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case ln:e:if(e.h.ended||Z0(e.G))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Bb();var o=xc(e.h.buffered);if(o!=null&&o>=n){t=!0;break e}}t=!1}break;default:t=!1}o=F0(e.h.buffered,e.h.currentTime),n=e.K;var a=t,u=n.h.get(n.g);t=n.g,o=a||o>=u?lu:hr,n.g=o,t!=o&&lh(e)}function kT(e,t,n,o){return new q0(e,t,n,o)}function MT(e){return new Dm({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},pb:function(){return e.pb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Cd:function(){return e.Cd()},Ob:function(){return e.Ob()},Cb:function(){return e.Cb()},R:function(){return e.R()}},e.g.cmcd)}function _T(e){return new Sm(e.i,{Dd:function(){return e.C?e.C.qd():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},T:e.G,Tb:e.H,onError:function(t){return $o(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Fh:function(){e.F&&e.F.update&&e.F.update()},af:function(t,n){var o=t.startTime,a=t.endTime,u=n.type;e.C&&e.C.cg(),Rr(e),o=new Map().set("start",o).set("end",a).set("contentType",u),e.dispatchEvent(Mt("segmentappended",o)),e.s&&n.fastSwitching&&t.Zc&&t.Md&&e.s.trySuggestStreams()},Eh:function(t,n){(n=n.Ve)&&e.za&&_S(e.za,n,t)},Ef:function(t,n){var o=e.m;if(o.h.parseInbandPsshEnabled&&!o.F&&["audio","video"].includes(t)){n=new x0(Ve(n));var a=0,u=w(n.data);for(t=u.next();!t.done;t=u.next())a+=t.value.length;if(a==0)o=Promise.resolve();else{for(a=new Uint8Array(a),u=0,n=w(n.data),t=n.next();!t.done;t=n.next())t=t.value,a.set(t,u),u+=t.length;Ds(o,"cenc",a),o=o.l}}else o=Promise.resolve();return o},Gh:function(t,n,o){Gm(e,t,n,o)},wd:function(t,n){return e.wd(t,n)}})}s.configure=function(e,t){arguments.length==2&&typeof e=="string"&&(e=Zc(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(ai("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(ai("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var n=_r(this.g,e,Lr(this));return qm(this),n};function qm(e){if(e.F){var t=Po(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.F.configure(t)}if(e.m&&e.m.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{ng(e,e.i)}catch(u){$o(e,u)}e.s&&Pr(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||Dr(e)}if(e.H&&e.H.nf(e.g.streaming.forceHTTPS),e.G&&(e.G.configure(e.g.mediaSource),e.G.Y=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.Te!=t)){var n=t(),o=e.G,a=o.F;o.F=n,a&&(n.setTextVisibility(a.isTextVisible()),a.destroy()),o.h&&(o.h.j=n),e.Te=t,e.j&&(t=e.j,(n=t.i.get(at))&&Ir(t,n.stream,!0,0,!0))}e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),lg(e)),e.K&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),i0(e.K,t,Math.min(.5,t/2))),e.i&&hh(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.V&&e.V.configure(e.g.cmcd),e.Y&&e.Y.configure(e.g.cmsd)}s.getConfiguration=function(){var e=Lr(this);return _r(e,this.g,Lr(this)),e},s.Qg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Eb().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},s.Qh=function(){for(var e in this.g)delete this.g[e];_r(this.g,Lr(this),Lr(this)),qm(this)},s.Xg=function(){return this.l},s.He=function(){return this.i?this.i.type:null},s.ah=function(){return this.h},s.Ob=function(){return this.H},s.Ge=function(){return this.ea},s.Of=function(){return this.A?this.A:null},s.R=function(){return this.i?this.i.presentationTimeline.R():this.h&&this.h.src?this.h.duration==1/0:!1},s.Rb=function(){return this.i?this.i.presentationTimeline.Rb():!1},s.sh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},s.Eb=function(){if(this.i){if(!this.mb&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.hc(),end:e.qb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},s.ph=function(){this.R()&&(this.h.currentTime=this.Eb().end)},s.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},s.drmInfo=function(){return this.m?this.m.g:null},s.Qc=function(){return this.m?this.m.Qc():1/0},s.Fe=function(){return this.m?this.m.Fe():[]},s.Bd=function(){return this.m?this.m.Bd():{}},s.Ke=function(){return this.K?this.K.g==hr:!1},s.Cd=function(){return this.h?this.I?this.I.h:1:0},s.xf=function(e){var t=this;e==0?Le("A trick play rate of 0 is unsupported!"):(this.Ba.Za(),this.h.paused&&this.h.play(),this.I.set(e),this.l==ln&&(this.s.playbackRateChanged(e),Tm(this.j,1<Math.abs(e))),this.R()&&this.Ba.D(this.h,"timeupdate",function(){var n=t.h.currentTime,o=t.Eb(),a=t.g.streaming.safeSeekOffset;0<e?n>=o.end&&t.ud():n<=o.start+a&&t.ud()}))},s.ud=function(){var e=this.I.ec();this.l==Cn&&this.I.set(e),this.l==ln&&(this.I.set(e),this.s.playbackRateChanged(e),Tm(this.j,!1)),this.Ba.Za()},s.Cb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,o=w(this.i.variants),a=o.next();!a.done;a=o.next())if(a=a.value,su(a)){var u=fr(a);u.active=a==e,u.active||n==1||e==null||a.video!=e.video||a.audio!=e.audio||(u.active=!0),u.active&&n++,t.push(u)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(f){return nc(f)}):[]},s.jc=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=w(this.i.textStreams),o=n.next();!o.done;o=n.next()){o=o.value;var a=ru(o);a.active=o==e,t.push(a)}return t}return this.h&&this.h.src&&this.h.textTracks?Xs(this).map(function(u){return Xp(u)}):[]},s.Wg=function(){var e=this.Oc;return this.i&&(e=this.i.imageStreams),e.map(function(t){return ec(t)})},s.Ng=function(e){var t=this,n,o,a,u;return z(function(f){return f.g==1?t.l!=ln&&t.l!=Cn?f.return(null):(n=t.Oc,t.i&&(n=t.i.imageStreams),(o=n.find(function(c){return c.id==e}))?o.segmentIndex?f.B(2):E(f,o.createSegmentIndex(),2):f.return(null)):f.g!=4?(a=[],Dc(o.segmentIndex,function(c){var p=Qm(c.tilesLayout||o.tilesLayout);if(p){p=p.rows*p.Kb;for(var m=c.h-c.startTime,v=0;v<p;v++)a.push(t.Tf(e,c.startTime+m*v/p))}}),E(f,Promise.all(a),4)):(u=f.h,f.return(u.filter(function(c){return c})))})};function Qm(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Kb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}s.Tf=function(e,t){var n=this,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V;return z(function(q){return q.g==1?n.l!=ln&&n.l!=Cn?q.return(null):(o=n.Oc,n.i&&(o=n.i.imageStreams),(a=o.find(function(te){return te.id==e}))?a.segmentIndex?q.B(2):E(q,a.createSegmentIndex(),2):q.return(null)):(u=a.segmentIndex.find(t),u==null||(f=a.segmentIndex.get(u),c=Qm(f.tilesLayout||a.tilesLayout),!c)?q.return(null):(p=a.width||0,m=a.height||0,v=p/c.Kb,S=m/c.rows,C=c.Kb*c.rows,T=f.h-f.startTime,b=f.u||T/C,_=f.startTime,B=D=0,1<C&&(N=Math.floor((t-f.startTime)/b),_=f.startTime+N*b,D=N%c.Kb*v,B=Math.floor(N/c.Kb)*S),G=!1,(V=f.s)&&(G=!0,S=V.height,D=V.positionX,B=V.positionY,v=V.width),q.return({segment:f,imageHeight:m,imageWidth:p,height:S,positionX:D,positionY:B,startTime:_,duration:b,uris:f.Z(),width:v,sprite:G})))})},s.kg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(o){return o.id==e.id});t&&t!=this.j.o&&(ih(this.u.h,t,!1),Ru(this.j,t),zu(this),this.lb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Xs(this),t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,tc(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";zu(this)}},s.lf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.g.abr.enabled&&Le("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var o=this.i.variants.find(function(a){return a.id==e.id});o&&su(o)&&(Fu(this,o,!1,t,n),this.kb=new n0(o,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Pr(this))}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=w(t),n=t.next();!n.done;n=t.next())if(n=n.value,tc(n)==e.id){sg(this,n);break}}},s.Pg=function(){return pg(this.Cb())},s.ih=function(){return pg(this.jc())},s.Og=function(){return Array.from(dg(this.Cb()))},s.hh=function(){return Array.from(dg(this.jc()))},s.jg=function(e,t,n,o){if(n=n===void 0?0:n,o=o===void 0?0:o,this.i&&this.C){this.kb=new cr(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),e=function(f,c){return f.video||c.video?f.video&&c.video?Math.abs((f.video.height||0)-(c.video.height||0))+Math.abs((f.video.width||0)-(c.video.width||0)):1/0:0},t=this.j.j;var a=this.kb.create(this.i.variants);n=null,a=w(a.values());for(var u=a.next();!u.done;u=a.next())u=u.value,(!n||e(n,t)>e(u,t))&&(n=u);n?(e=fr(n),this.lf(e,!0,o)):Dr(this)}else this.h&&this.h.audioTracks&&(o=_s(this.Cb(),e,t||"",!1)[0])&&this.lf(o)},s.kf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.lb=e,this.Kc=t||"",this.Jc=n,(e=_s(this.i.textStreams,this.lb,this.Kc,this.Jc)[0]||null)&&e!=this.j.o&&(ih(this.u.h,e,!1),this.g.streaming.alwaysStreamText||this.Me())&&(Ru(this.j,e),zu(this))):(e=_s(this.jc(),e,t||"",n)[0])&&this.kg(e)},s.Wh=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var o=null,a=w(this.i.variants),u=a.next();!u.done;u=a.next())if(u=u.value,u.audio.label==e){o=u;break}o!=null&&(this.kb=new cr(o.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Dr(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=w(n),o=n.next();!o.done;o=n.next())o=o.value,o.label==e&&(t=o);t&&sg(this,t)}},s.Me=function(){var e=this.da;return this.G&&this.l==ln?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Xs(this).some(function(t){return t.mode=="showing"}):e},s.Pf=function(){return this.h&&this.h.src&&this.h.textTracks?Zm(this).map(function(e){return Xp(e)}):[]},s.Rg=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=ct(e),n=Zm(this).filter(function(c){return ct(c.language)==t});if(!n||!n.length)return[];e=[];var o=new Set;n=w(n);for(var a=n.next();!a.done;a=n.next())if((a=a.value)&&a.cues){a=w(a.cues);for(var u=a.next();!u.done;u=a.next()){var f=u.value;(u=f.id)&&u!=""||(u=f.startTime+"-"+f.endTime+"-"+f.text),f={id:u,title:f.text,startTime:f.startTime,endTime:f.endTime},o.has(u)||(e.push(f),o.add(u))}}return e};function Xs(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function RT(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function Zm(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}s.og=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==ln)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.o||(e=_s(this.i.textStreams,this.lb,this.Kc,this.Jc),0<e.length&&(Ru(this.j,e[0]),zu(this))):US(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Xs(this);t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}ug(this)}},s.dh=function(){if(!this.R())return null;if(this.C)var e=this.C.qd();else{if(this.ma==null)return new Date;e=this.ma}if(this.i)return new Date(1e3*(this.i.presentationTimeline.i+e));if(this.h&&this.h.getStartDate){var t=this.h.getStartDate();return isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)}return null},s.Sf=function(){if(!this.R())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?null:e}return null},s.pb=function(){if(this.l==ln)return this.G.pb();var e={total:[],audio:[],video:[],text:[]};return this.l==Cn&&(e.total=fo(this.h.buffered)),e},s.getStats=function(){if(this.l!=ln&&this.l!=Cn)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Bu(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.u;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.u.K=this.C.Af(),this.u.N=this.C.Bf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.u;var o=Number(n.totalVideoFrames);t.J=Number(n.droppedVideoFrames),t.I=o,this.u.H=Number(n.corruptedVideoFrames)}if(this.m?(n=this.m,n=n.I?n.I:NaN):n=NaN,this.u.s=n,this.l==ln){if(n=this.j.j,t=this.j.o,n){o=this.I?this.I.h:1;var a=o*n.bandwidth;t&&t.bandwidth&&(a+=o*t.bandwidth),this.u.A=a}n&&n.video&&(t=this.u,o=n.video.height||NaN,t.o=n.video.width||NaN,t.l=o),this.R()&&(n=this.Sf().valueOf()+1e3*e.currentTime,this.u.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.u.G=this.i.presentationTimeline.g),n=this.s.getBandwidthEstimate(),this.u.u=n}this.l==Cn&&(n=this.u,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var u=this.u;e=u.o,n=u.l,t=u.A,o=u.I,a=u.J;var f=u.H,c=u.N,p=u.K,m=u.u,v=u.i,S=u.m,C=u.F,T=u.j,b=nh(u.g,"playing"),_=nh(u.g,"paused"),D=nh(u.g,"buffering"),B=u.s,N=u.C,G=u.G,V=cT(u.g),q=[];u=w(u.h.g);for(var te=u.next();!te.done;te=u.next())te=te.value,q.push({timestamp:te.timestamp,id:te.id,type:te.type,fromAdaptation:te.fromAdaptation,bandwidth:te.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:o,droppedFrames:a,corruptedFrames:f,stallsDetected:c,gapsJumped:p,estimatedBandwidth:m,completionPercent:v,loadLatency:S,manifestTimeSeconds:C,drmTimeSeconds:T,playTime:b,pauseTime:_,bufferingTime:D,licenseTime:B,liveLatency:N,maxSegmentDuration:G,stateHistory:V,switchHistory:q}},s.Bg=function(e,t,n,o,a,u,f){f=f===void 0?!1:f;var c=this,p,m,v,S,C,T,b,_,D,B,N,G;return z(function(V){switch(V.g){case 1:if(c.l!=ln&&c.l!=Cn)throw new K(1,7,7004);if(n!="subtitles"&&n!="captions"&&Le("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),o){V.B(2);break}return E(V,sh(c,e),3);case 3:o=V.h;case 2:if(p=[],c.A&&(p=c.A.getCuePoints()),c.l!=Cn){V.B(4);break}return f&&(n="forced"),E(V,Jm(c,e,t,n,o,u||"",p),5);case 5:if(m=ct(t),v=c.jc(),S=v.find(function(q){return ct(q.language)==m&&q.label==(u||"")&&q.kind==n}))return Ln(c),V.return(S);throw new K(1,2,2012);case 4:if(C=$t,T=c.h.duration,c.i&&(T=c.i.presentationTimeline.getDuration()),T==1/0)throw new K(1,4,4033);if(!p.length){V.B(6);break}return E(V,ah(c,e,c.H,c.g.streaming.retryParameters),7);case 7:b=V.h,_=eg(c,b,o,p),D=new Blob([_],{type:"text/vtt"}),e=Iu(D),o="text/vtt";case 6:if(B={id:c.We++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Nc(0,T,[e]),mimeType:o||"",codecs:a||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:u||null,type:C.na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1},N=Rn(B.mimeType,B.codecs),G=Ka(N),!G)throw new K(2,2,2014,o);return c.i.textStreams.push(B),Ln(c),V.return(ru(B))}})},s.Cg=function(e,t){var n=this,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N;return z(function(G){switch(G.g){case 1:if(n.l!=ln&&n.l!=Cn)throw new K(1,7,7004);if(t){G.B(2);break}return E(G,sh(n,e),3);case 3:t=G.h;case 2:if(t!="text/vtt")throw new K(1,2,2017,e);if(o=$t,a=n.h.duration,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new K(1,4,4045);return E(G,ah(n,e,n.H,n.g.streaming.retryParameters),4);case 4:if(u=G.h,f=Kt[t],!f)throw new K(2,2,2014,t);for(c=f(),p={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},m=Ve(u),v=c.parseMedia(m,p,e),S=[],C={},T=w(v),b=T.next();!b.done;C={Dc:C.Dc,Hb:C.Hb},b=T.next())C.Hb=b.value,C.Dc=null,_=function(V){return function(){return V.Dc==null&&(V.Dc=on([e],[V.Hb.payload])),V.Dc||[]}}(C),D=new We(C.Hb.startTime,C.Hb.endTime,_,0,null,null,0,0,1/0),C.Hb.payload.includes("#xywh")&&(B=C.Hb.payload.split("#xywh=")[1].split(","),B.length===4&&D.pg({height:parseInt(B[3],10),positionX:parseInt(B[0],10),positionY:parseInt(B[1],10),width:parseInt(B[2],10)})),S.push(D);return N={id:n.We++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new lt(S),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:o.he,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1},n.l==Cn?n.Oc.push(N):n.i.imageStreams.push(N),Ln(n),G.return(ec(N))}})},s.Ag=function(e,t,n){var o=this,a,u,f,c;return z(function(p){switch(p.g){case 1:if(o.l!=ln&&o.l!=Cn)throw new K(1,7,7004);if(n){p.B(2);break}return E(p,sh(o,e),3);case 3:n=p.h;case 2:return a=[],o.A&&(a=o.A.getCuePoints()),E(p,Jm(o,e,t,"chapters",n,"",a),4);case 4:if(u=p.h,f=o.Pf(),c=f.find(function(m){return m.language==t}),!c){p.B(5);break}return E(p,new Promise(function(m,v){o.o.ja(u,"load",m),o.o.ja(u,"error",function(){v(new K(1,2,2015))})}),6);case 6:return Ln(o),p.return(c);case 5:throw new K(1,2,2012)}})};function sh(e,t){var n;return z(function(o){switch(o.g){case 1:return re(o,2),E(o,Hc(t,e.H,e.g.streaming.retryParameters),4);case 4:n=o.h,ie(o,3);break;case 2:se(o);case 3:if(n)return o.return(n);throw new K(1,2,2011,t)}})}function Jm(e,t,n,o,a,u,f){var c,p,m,v;return z(function(S){if(S.g==1)return a!="text/vtt"||f.length?E(S,ah(e,t,e.H,e.g.streaming.retryParameters),3):S.B(2);S.g!=2&&(c=S.h,p=eg(e,c,a,f),m=new Blob([p],{type:"text/vtt"}),t=Iu(m),a="text/vtt"),v=document.createElement("track");var C=e.V,T=t;try{if(C.g.enabled){var b=Wc(C);b.ot=Kc,b.su=!0;var _=Lu(b),D=Xc(T,_)}else D=T}catch(B){it("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",B),D=T}return v.src=D,v.label=u,v.kind=o,v.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(v),S.return(v)})}function ah(e,t,n,o){var a,u,f;return z(function(c){if(c.g==1){a=Ri,u=Yt([t],o),u.method="GET";var p=e.V;try{p.g.enabled&&kr(p,u,{ot:Kc,su:!0})}catch(m){it("CMCD_TEXT_ERROR","Could not generate text CMCD data.",m)}return E(c,n.request(a,u).promise,2)}return f=c.h,c.return(f.data)})}function eg(e,t,n,o){var a=Kt[n];if(a)return n=a(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ve(t),t=n.parseMedia(t,e,null),nT(t,o);throw new K(2,2,2014,n)}s.pf=function(e,t){this.Id.width=e,this.Id.height=t},s.gf=function(e){if(this.l==ln){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.s)t=!1;else{for(var n=w(t.i.values()),o=n.next();!o.done;o=n.next())o=o.value,!o.Tc||o.Da||o.ib||(o.Tc=!1,ci(t,o,e));t=!0}}else t=!1;return t},s.Yg=function(){return Le("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},s.Zg=function(){return this.Ld};function Lr(e){var t=Mr();return t.streaming.failureCallback=function(n){if(e.R()){var o=null;n.code==1001||n.code==1002?o=1:n.code==1003&&(o=.1),o!=null&&(n.severity=1,e.gf(o))}},t.textDisplayFactory=function(){return e.xd?new Xn(e.h,e.xd):HTMLMediaElement.prototype.addTextTrack?new Gn(e.h,"Shaka Player TextTrack"):new Wn},t}s.rg=function(e){this.xd=e};function LT(e,t){for(var n=new Set,o=w(t.textStreams),a=o.next();!a.done;a=o.next())a=a.value,a.mimeType!="application/cea-608"&&a.mimeType!="application/cea-708"||n.add(a.originalId);for(o=w(t.variants),a=o.next();!a.done;a=o.next())if((a=a.value.video)&&a.closedCaptions){for(var u=w(a.closedCaptions.keys()),f=u.next();!f.done;f=u.next())if(f=f.value,!n.has(f)){var c=f.startsWith("CC")?"application/cea-608":"application/cea-708",p=new Bt,m=a.closedCaptions.get(f);c={id:e.We++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:p,mimeType:c,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:m,originalLanguage:m,label:null,type:at,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},t.textStreams.push(c),n.add(f)}}}function tg(e,t){return z(function(n){if(n.g==1)return E(n,PT(e,t),2);ng(e,t),j(n)})}function PT(e,t){return z(function(n){if(n.g==1)return E(n,J2(e.m,t),2);if(!t.variants.some(su))throw new K(2,4,4032);j(n)})}function ng(e,t){if(e.l!=Ti){zp(t.variants,e.g.restrictions,e.Id)&&e.j&&Ln(e);var n=e.m?e.m.g:null;if(n&&e.m.s)for(var o=w(t.variants),a=o.next();!a.done;a=o.next())a=a.value,uh(e,n.keySystem,a.video),uh(e,n.keySystem,a.audio);hg(e,t)}}function uh(e,t,n){if(n){n=w(n.drmInfos);for(var o=n.next();!o.done;o=n.next())if(o=o.value,o.keySystem==t){o=w(o.initData||[]);for(var a=o.next();!a.done;a=o.next())a=a.value,Ds(e.m,a.initDataType,a.initData)}}}function DT(e,t){var n,o,a,u,f;return z(function(c){return c.g==1?(n=e.audio,o=e.video,a=function(p,m){var v,S,C;return z(function(T){return T.g==1?p?E(T,p.createSegmentIndex(),2):T.return(null):(S=(v=p.segmentIndex.Nb(m))?v.next().value:null,S?(C=S.startTime,T.return(C)):T.return(null))})},E(c,a(n,t),2)):c.g!=3?(u=c.h,E(c,a(o,t),3)):(f=c.h,f!=null&&u!=null?c.return(Math.max(f,u)):f!=null?c.return(f):u!=null?c.return(u):c.return(t))})}function lh(e){var t=e.Ke();if(e.u&&e.K&&e.C){if(e.V){var n=e.V;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}Bu(e)}t=new Map().set("buffering",t),e.dispatchEvent(Mt("buffering",t))}function ig(e){var t=e.h.playbackRate;t!=0&&(e.I&&e.I.set(t),t=Mt("ratechange"),e.dispatchEvent(t))}function Bu(e){if(e.u&&e.K){var t=e.u.g,n="playing";e.K.g==hr?n="buffering":e.h.paused?n="paused":e.h.ended&&(n="ended");var o=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:o,duration:0},t=!0;else{var a=Date.now()/1e3;t.g.duration=a-t.g.timestamp,t.g.state==o?t=!1:(t.h.push(t.g),t.g={timestamp:a,state:o,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Mt("statechanged",n)))}}function og(e){if(e.R()){var t=e.Eb();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync)var n=e.g.streaming.liveSyncMaxLatency,o=e.g.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(n=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,o=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);if(e.g.streaming.liveSync)var a=e.g.streaming.liveSyncMinLatency,u=e.g.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(a=e.i.serviceDescription.minLatency||e.g.streaming.liveSyncMinLatency,u=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSyncMinPlaybackRate);var f=e.h.playbackRate,c=t.end-e.h.currentTime,p=0;if(e.l==Cn){var m=e.h.buffered;0<m.length&&(p=m.end(m.length-1),p=Math.max(o,p-t.end))}n&&o&&c-p>n?f!=o&&e.xf(o):a&&u&&c-p<a?f!=u&&e.xf(u):f!==e.I.ec()&&e.ud()}}}function ju(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var o;e.N==0?o=Mt("started"):e.N==25?o=Mt("firstquartile"):e.N==50?o=Mt("midpoint"):e.N==75?o=Mt("thirdquartile"):e.N==100&&(o=Mt("complete")),o&&e.dispatchEvent(o)}}}function Pr(e){try{hg(e,e.i)}catch(n){return $o(e,n),!1}var t=ic(e.i.variants);return t=e.kb.create(t),e.s.setVariants(Array.from(t.values())),!0}function rg(e,t){return t=t===void 0?!1:t,Pr(e)?e.s.chooseVariant(t):null}function NT(e){function t(f){var c="";return f.video&&(c+="video:"+f.video.id),f.audio&&(c=c+(c?"&":"")+("audio:"+f.audio.id)),c}for(var n=Date.now()/1e3,o=!1,a=w(e.i.variants),u=a.next();!u.done;u=a.next())u=u.value,0<u.disabledUntilTime&&u.disabledUntilTime<=n&&(u.disabledUntilTime=0,o=!0,""+t(u),void 0);e.i.variants.every(function(f){return f.disabledUntilTime===0})&&e.yd.stop(),o&&Dr(e,!0,void 0,!1,!1)}function Dr(e,t,n,o,a){t=t===void 0?!0:t,n=n===void 0?0:n,o=o===void 0?!1:o,a=a===void 0?!0:a;var u=rg(e);u&&Fu(e,u,a,t,n,o)}function Fu(e,t,n,o,a,u){u=u===void 0?!1:u;var f=e.j.j;if(t==f)o&&Cm(e.j,t,o,a,!0);else{var c=e.u.h;c.h!=t&&(c.h=t,c.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Cm(e.j,t,o,a,u,n),o=null,f&&(o=fr(f)),t=fr(t),n?(n=new Map().set("oldTrack",o).set("newTrack",t),e.J&&Y0(e.J,t,e.He()),n=Mt("adaptation",n),Nr(e,n)):ag(e,o,t)}}function sg(e,t){var n=Array.from(e.h.audioTracks).find(function(o){return o.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=nc(n),t=nc(t),ag(e,n,t)}function OT(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var o=ct(e.g.preferredTextLanguage);return n=ct(n.language),e.g.autoShowText==2?Ya(n,o):e.g.autoShowText==3?(e=ct(t.language),Ya(n,o)&&!Ya(e,n)):(Le("Invalid autoShowText setting!"),!1)}function Ln(e){var t=Mt("trackschanged");Nr(e,t)}function ag(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.J&&Y0(e.J,n,e.He()),n=Mt("variantchanged",t),Nr(e,n)}function zu(e){var t=Mt("textchanged");Nr(e,t)}function ug(e){var t=Mt("texttrackvisibility");Nr(e,t)}function lg(e){e.g.abr.enabled||fh(e);var t=new Map().set("newStatus",e.g.abr.enabled);Nr(e,Mt("abrstatuschanged",t))}function fh(e,t){if(t=t===void 0?!0:t,e.l==ln){e.yd.stop();for(var n=w(e.i.variants),o=n.next();!o.done;o=n.next())o.value.disabledUntilTime=0;t&&Pr(e)}}s.wd=function(e,t){if(!this.g.abr.enabled||this.l===Ti||!navigator.onLine)return!1;if(this.i.variants.some(function(u){return(u=u[e.type])&&u.id!==e.id?e.type=="audio"?e.language===u.language:!0:!1})){for(var n=w(this.i.variants),o=n.next();!o.done;o=n.next()){o=o.value;var a=o[e.type];a&&a.id===e.id&&(o.disabledUntilTime=Date.now()/1e3+t)}return this.yd.$a(1),t=this.pb().video.reduce(function(u,f){return u+f.end-f.start},0),Dr(this,!0,t,!0,!1),!0}return!1};function $o(e,t){var n,o,a;return z(function(u){switch(u.g){case 1:if(e.l==Ti)return u.return();if(n=!0,!(e.mb&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){u.B(2);break}return re(u,3),E(u,YS(e.j),5);case 5:o=u.h,n=!o,ie(u,2);break;case 3:se(u),n=!0;case 2:if(!n)return u.return();t.severity===2&&fh(e,!1),a=Mt("error",new Map().set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),j(u)}})}function Ks(e,t,n){n=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Mt(t,n))}function ch(e){if(!e.h.error)return null;var t=e.h.error.code;if(t==1)return null;var n=e.h.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new K(2,3,3016,t,n,e.h.error.message)}function fg(e,t){if(e.j){var n=Mt("keystatuschanged");e.dispatchEvent(n);var o=Object.keys(t);n=o.length==1&&o[0]=="00";var a=!1;if(o.length){o=w(e.i.variants);for(var u=o.next();!u.done;u=o.next()){u=u.value;var f=[];u.audio&&f.push(u.audio),u.video&&f.push(u.video),f=w(f);for(var c=f.next();!c.done;c=f.next()){var p=c.value;if(c=u.allowedByKeySystem,p.keyIds.size){u.allowedByKeySystem=!0,p=w(p.keyIds);for(var m=p.next();!m.done;m=p.next())m=m.value,((m=t[n?"00":m])||e.m.F)&&(u.allowedByKeySystem=u.allowedByKeySystem&&!!m&&!gg.includes(m))}c!=u.allowedByKeySystem&&(a=!0)}}}if(a&&(Ln(e),!Pr(e)))return;(t=e.j.j)&&!t.allowedByKeySystem&&Dr(e)}}function cg(e,t,n){e.F&&e.F.onExpirationUpdated&&e.F.onExpirationUpdated(t,n),t=Mt("expirationupdated"),e.dispatchEvent(t)}function hh(e,t,n){0<t&&(e.R()||e.qg(t)),t=e.getDuration(),n<t&&(e.R()||e.Pa(n))}function hg(e,t){e=e.m?e.m.Bd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var o=!1,a=!1,u=new Set,f=new Set;t=w(t.variants);for(var c=t.next();!c.done;c=t.next()){c=c.value;var p=[];c.audio&&p.push(c.audio),c.video&&p.push(c.video),p=w(p);for(var m=p.next();!m.done;m=p.next())if(m=m.value,m.keyIds.size){m=w(m.keyIds);for(var v=m.next();!v.done;v=m.next()){v=v.value;var S=e[n?"00":v];S?gg.includes(S)&&f.add(S):u.add(v)}}c.allowedByApplication?c.allowedByKeySystem&&(o=!0):a=!0}if(!o)throw e={hasAppRestrictions:a,missingKeys:Array.from(u),restrictedKeyStatuses:Array.from(f)},new K(2,4,4012,e)}function Nr(e,t){z(function(n){if(n.g==1)return E(n,Promise.resolve(),2);e.l!=Ti&&e.dispatchEvent(t),j(n)})}function dg(e){var t=new Set;e=w(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(ct(n.language)):t.add("und");return t}function pg(e){var t=new Map,n=new Map;e=w(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var a="und",u=[];o.language&&(a=ct(o.language)),o.type=="variant"?u=o.audioRoles:u=o.roles,u&&u.length||(u=[""]),t.has(a)||t.set(a,new Set),u=w(u);for(var f=u.next();!f.done;f=u.next())f=f.value,t.get(a).add(f),o.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(f,o.label))}var c=[];return t.forEach(function(p,m){p=w(p);for(var v=p.next();!v.done;v=p.next()){v=v.value;var S=null;n.has(m)&&n.get(m).has(v)&&(S=n.get(m).get(v)),c.push({language:m,role:v,label:S})}}),c}ae("shaka.Player",pe),pe.prototype.setVideoContainer=pe.prototype.rg,pe.prototype.getManifestParserFactory=pe.prototype.Zg,pe.prototype.getManifest=pe.prototype.Yg,pe.prototype.retryStreaming=pe.prototype.gf,pe.prototype.setMaxHardwareResolution=pe.prototype.pf,pe.prototype.addChaptersTrack=pe.prototype.Ag,pe.prototype.addThumbnailsTrack=pe.prototype.Cg,pe.prototype.addTextTrackAsync=pe.prototype.Bg,pe.prototype.getStats=pe.prototype.getStats,pe.prototype.getBufferedInfo=pe.prototype.pb,pe.prototype.getPresentationStartTimeAsDate=pe.prototype.Sf,pe.prototype.getPlayheadTimeAsDate=pe.prototype.dh,pe.prototype.setTextTrackVisibility=pe.prototype.og,pe.prototype.getChapters=pe.prototype.Rg,pe.prototype.getChaptersTracks=pe.prototype.Pf,pe.prototype.isTextTrackVisible=pe.prototype.Me,pe.prototype.selectVariantsByLabel=pe.prototype.Wh,pe.prototype.selectTextLanguage=pe.prototype.kf,pe.prototype.selectAudioLanguage=pe.prototype.jg,pe.prototype.getTextLanguages=pe.prototype.hh,pe.prototype.getAudioLanguages=pe.prototype.Og,pe.prototype.getTextLanguagesAndRoles=pe.prototype.ih,pe.prototype.getAudioLanguagesAndRoles=pe.prototype.Pg,pe.prototype.selectVariantTrack=pe.prototype.lf,pe.prototype.selectTextTrack=pe.prototype.kg,pe.prototype.getThumbnails=pe.prototype.Tf,pe.prototype.getAllThumbnails=pe.prototype.Ng,pe.prototype.getImageTracks=pe.prototype.Wg,pe.prototype.getTextTracks=pe.prototype.jc,pe.prototype.getVariantTracks=pe.prototype.Cb,pe.prototype.cancelTrickPlay=pe.prototype.ud,pe.prototype.trickPlay=pe.prototype.xf,pe.prototype.getPlaybackRate=pe.prototype.Cd,pe.prototype.isBuffering=pe.prototype.Ke,pe.prototype.getKeyStatuses=pe.prototype.Bd,pe.prototype.getActiveSessionsMetadata=pe.prototype.Fe,pe.prototype.getExpiration=pe.prototype.Qc,pe.prototype.drmInfo=pe.prototype.drmInfo,pe.prototype.keySystem=pe.prototype.keySystem,pe.prototype.goToLive=pe.prototype.ph,pe.prototype.seekRange=pe.prototype.Eb,pe.prototype.isAudioOnly=pe.prototype.sh,pe.prototype.isInProgress=pe.prototype.Rb,pe.prototype.isLive=pe.prototype.R,pe.prototype.getAdManager=pe.prototype.Of,pe.prototype.getAssetUri=pe.prototype.Ge,pe.prototype.getNetworkingEngine=pe.prototype.Ob,pe.prototype.getMediaElement=pe.prototype.ah,pe.prototype.getManifestType=pe.prototype.He,pe.prototype.getLoadMode=pe.prototype.Xg,pe.prototype.resetConfiguration=pe.prototype.Qh,pe.prototype.getBufferFullness=pe.prototype.Qg,pe.prototype.getConfiguration=pe.prototype.getConfiguration,pe.prototype.configure=pe.prototype.configure,pe.prototype.releaseAllMutexes=pe.prototype.Mh,pe.prototype.load=pe.prototype.load,pe.prototype.updateStartTime=pe.prototype.ei,pe.prototype.unload=pe.prototype.rc,pe.prototype.detach=pe.prototype.detach,pe.prototype.attachCanvas=pe.prototype.Eg,pe.prototype.attach=pe.prototype.Ic,pe.probeSupport=function(e){e=e===void 0?!0:e;var t,n,o,a,u,f;return z(function(c){if(c.g==1)return t={},e?E(c,zw(),3):c.B(2);c.g!=2&&(t=c.h);var p={};if(wi())for(var m in fi)p[m]=!0;m=w(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var v=m.next();!v.done;v=m.next())v=v.value,p[v]=wi()?!!fi[v]:ks(v);for(n=p,m='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(L(rr)),p={},m=w(m),v=m.next();!v.done;v=m.next()){v=v.value,p[v]=wi()?Ka(v)?!0:ke(v)||!!Ro(v):ks(v);var S=v.split(";")[0];p[S]=p[S]||p[v]}o=p,a={manifest:n,media:o,drm:t},u=ph;for(f in u)a[f]=u[f]();return c.return(a)})},pe.isBrowserSupported=function(){if(d.Promise||Le("A Promise implementation or polyfill is required"),!(d.Promise&&d.Uint8Array&&Array.prototype.forEach)||Rt("Trident/"))return!1;var e=tu();return e&&9>e||!(d.MediaKeys&&d.navigator&&d.navigator.requestMediaKeySystemAccess&&d.MediaKeySystemAccess&&d.MediaKeySystemAccess.prototype.getConfiguration)?!1:wi()?!0:ks("application/x-mpegurl")},pe.setAdManagerFactory=function(e){Vu=e},pe.registerSupportPlugin=function(e,t){ph[e]=t},pe.prototype.destroy=pe.prototype.destroy;var Ti=0,dh=1,ln=2,Cn=3;pe.LoadMode={DESTROYED:Ti,NOT_LOADED:dh,MEDIA_SOURCE:ln,SRC_EQUALS:Cn},pe.version="v4.7.11";var mg=["4","7"];Zp=new function(e){this.g=e,this.i=lw,this.h=fw}(new sc(Number(mg[0]),Number(mg[1])));var gg=["output-restricted","internal-error"],ph={},Vu=null;function yg(){this.h=[],this.j=this.i=this.g=0}function qe(e,t,n){var o=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Ct,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){o.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){o.i=!1})}s=qe.prototype,s.getDuration=function(){return this.g.getDuration()},s.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},s.getRemainingTime=function(){return this.h.getRemainingTime()},s.isPaused=function(){return this.i},s.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},s.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},s.canSkipNow=function(){return this.h.getAdSkippableState()},s.skip=function(){return this.h.skip()},s.pause=function(){return this.h.pause()},s.play=function(){return this.h.resume()},s.getVolume=function(){return this.h.getVolume()},s.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},s.isMuted=function(){return this.h.getVolume()==0},s.isLinear=function(){return this.g.isLinear()},s.resize=function(e,t){var n=!1,o=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:o.webkitSupportsFullscreen&&(n=o.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},s.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},s.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},s.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},s.getTitle=function(){return this.g.getTitle()},s.getDescription=function(){return this.g.getDescription()},s.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},s.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},s.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},s.getAdId=function(){return this.g.getAdId()},s.getCreativeAdId=function(){return this.g.getCreativeAdId()},s.getAdvertiserName=function(){return this.g.getAdvertiserName()},s.getMediaUrl=function(){return this.g.getMediaUrl()},s.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},s.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},s.release=function(){this.h=this.g=null},ae("shaka.ads.ClientSideAd",qe),qe.prototype.release=qe.prototype.release,qe.prototype.getPodIndex=qe.prototype.getPodIndex,qe.prototype.getTimeOffset=qe.prototype.getTimeOffset,qe.prototype.getMediaUrl=qe.prototype.getMediaUrl,qe.prototype.getAdvertiserName=qe.prototype.getAdvertiserName,qe.prototype.getCreativeAdId=qe.prototype.getCreativeAdId,qe.prototype.getAdId=qe.prototype.getAdId,qe.prototype.getVastMediaWidth=qe.prototype.getVastMediaWidth,qe.prototype.getVastMediaHeight=qe.prototype.getVastMediaHeight,qe.prototype.getVastMediaBitrate=qe.prototype.getVastMediaBitrate,qe.prototype.getDescription=qe.prototype.getDescription,qe.prototype.getTitle=qe.prototype.getTitle,qe.prototype.getPositionInSequence=qe.prototype.getPositionInSequence,qe.prototype.getSequenceLength=qe.prototype.getSequenceLength,qe.prototype.setMuted=qe.prototype.setMuted,qe.prototype.resize=qe.prototype.resize,qe.prototype.isLinear=qe.prototype.isLinear,qe.prototype.isMuted=qe.prototype.isMuted,qe.prototype.setVolume=qe.prototype.setVolume,qe.prototype.getVolume=qe.prototype.getVolume,qe.prototype.play=qe.prototype.play,qe.prototype.pause=qe.prototype.pause,qe.prototype.skip=qe.prototype.skip,qe.prototype.canSkipNow=qe.prototype.canSkipNow,qe.prototype.getTimeUntilSkippable=qe.prototype.getTimeUntilSkippable,qe.prototype.isSkippable=qe.prototype.isSkippable,qe.prototype.isPaused=qe.prototype.isPaused,qe.prototype.getRemainingTime=qe.prototype.getRemainingTime,qe.prototype.getMinSuggestedDuration=qe.prototype.getMinSuggestedDuration,qe.prototype.getDuration=qe.prototype.getDuration;function Hu(e,t,n,o,a){var u=this;this.o=e,this.i=t,this.A=!1,this.s=this.C=null,this.F=NaN,this.m=a,this.j=null,this.h=new Ct,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.7.11"),this.g=null,this.u=o||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){UT(u,f)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){vg(u,f)}),this.h.D(this.i,"ended",function(){u.l.contentComplete()}),this.h.ja(this.i,"play",function(){u.A=!0})}Hu.prototype.configure=function(e){this.C=e},Hu.prototype.stop=function(){this.g&&this.g.stop(),this.o&&$s(this.o)},Hu.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function vg(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Ge("ad-error",t)),Gu(e,null),e.m(new Ge("ad-cue-points-changed",new Map().set("cuepoints",[])))}function UT(e,t){if(e.m(new Ge("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.C.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.u),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.u);e.m(new Ge("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var o=e.g.getCuePoints();if(o.length){t=[],o=w(o);for(var a=o.next();!a.done;a=o.next())t.push({start:a.value,end:null});e.m(new Ge("ad-cue-points-changed",new Map().set("cuepoints",t)))}BT(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,$u(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,$u(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in d?(e.s=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,$u(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.s.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,$u(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A?e.g.start():e.h.ja(e.i,"play",function(){e.A=!0,e.g.start()})}catch{Gu(e,null)}}function $u(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function BT(e){function t(n,o){n=new Map().set("originalEvent",n),e.m(new Ge(o,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){vg(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){xg(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){xg(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Gu(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Gu(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function xg(e,t){var n=t.getAd();n?(e.j=new qe(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Ge("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Le("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Gu(e,t){e.m(new Ge("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.ended||e.i.play())}function Xe(e,t,n,o,a){this.h=e,this.g=a,this.i=t,this.j=n,this.l=o}s=Xe.prototype,s.getDuration=function(){return this.h.durationInSeconds},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},s.isPaused=function(){return this.g.paused},s.isSkippable=function(){return!!this.h.skipOffset},s.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.g.currentTime+=this.getRemainingTime()},s.pause=function(){return this.g.pause()},s.play=function(){return this.g.play()},s.getVolume=function(){return this.g.volume},s.setVolume=function(e){this.g.volume=e},s.isMuted=function(){return this.g.muted},s.isLinear=function(){return this.l},s.resize=function(){},s.setMuted=function(e){this.g.muted=e},s.getSequenceLength=function(){return this.j?this.j:1},s.getPositionInSequence=function(){return this.i?this.i:1},s.getTitle=function(){return this.h.adTitle},s.getDescription=function(){return""},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return 0},s.getVastMediaWidth=function(){return 0},s.getAdId=function(){return this.h.adId},s.getCreativeAdId=function(){return this.h.creativeId},s.getAdvertiserName=function(){return""},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){return 0},s.getPodIndex=function(){return 0},s.release=function(){this.j=this.i=this.g=this.h=null},ae("shaka.ads.MediaTailorAd",Xe),Xe.prototype.release=Xe.prototype.release,Xe.prototype.getPodIndex=Xe.prototype.getPodIndex,Xe.prototype.getTimeOffset=Xe.prototype.getTimeOffset,Xe.prototype.getMediaUrl=Xe.prototype.getMediaUrl,Xe.prototype.getAdvertiserName=Xe.prototype.getAdvertiserName,Xe.prototype.getCreativeAdId=Xe.prototype.getCreativeAdId,Xe.prototype.getAdId=Xe.prototype.getAdId,Xe.prototype.getVastMediaWidth=Xe.prototype.getVastMediaWidth,Xe.prototype.getVastMediaHeight=Xe.prototype.getVastMediaHeight,Xe.prototype.getVastMediaBitrate=Xe.prototype.getVastMediaBitrate,Xe.prototype.getDescription=Xe.prototype.getDescription,Xe.prototype.getTitle=Xe.prototype.getTitle,Xe.prototype.getPositionInSequence=Xe.prototype.getPositionInSequence,Xe.prototype.getSequenceLength=Xe.prototype.getSequenceLength,Xe.prototype.setMuted=Xe.prototype.setMuted,Xe.prototype.resize=Xe.prototype.resize,Xe.prototype.isLinear=Xe.prototype.isLinear,Xe.prototype.isMuted=Xe.prototype.isMuted,Xe.prototype.setVolume=Xe.prototype.setVolume,Xe.prototype.getVolume=Xe.prototype.getVolume,Xe.prototype.play=Xe.prototype.play,Xe.prototype.pause=Xe.prototype.pause,Xe.prototype.skip=Xe.prototype.skip,Xe.prototype.canSkipNow=Xe.prototype.canSkipNow,Xe.prototype.getTimeUntilSkippable=Xe.prototype.getTimeUntilSkippable,Xe.prototype.isSkippable=Xe.prototype.isSkippable,Xe.prototype.isPaused=Xe.prototype.isPaused,Xe.prototype.getRemainingTime=Xe.prototype.getRemainingTime,Xe.prototype.getMinSuggestedDuration=Xe.prototype.getMinSuggestedDuration,Xe.prototype.getDuration=Xe.prototype.getDuration;function Ys(e,t,n,o){this.A=e,this.I=t,this.g=n,this.l=null,this.W=NaN,this.i=o,this.H=!1,this.u=null,this.j=[],this.K=[],this.J=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.N="",this.V=!0,this.G="",this.o=new Ct}Ys.prototype.stop=function(){for(var e=w(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Vb(t.target,t.type,t.listener);Or(this),this.m=[],this.s=[],this.N="",this.V=!0,this.G="",this.u=null,this.j=[],this.K=[],this.F.clear()},Ys.prototype.release=function(){this.stop(),this.o&&this.o.release()},Ys.prototype.onManifestUpdated=function(e){this.H=e,this.N!=""&&(FT(this,this.N,this.V),this.V=!1)},Ys.prototype.getCuePoints=function(){for(var e=[],t=w(this.j),n=t.next();!n.done;n=t.next()){n=w(n.value.ads);for(var o=n.next();!o.done;o=n.next())o=o.value,e.push({start:o.startTimeInSeconds,end:o.startTimeInSeconds+o.durationInSeconds})}return e};function jT(e,t,n){var o,a,u,f,c,p,m,v,S,C,T;z(function(b){if(b.g==1)return o=Yt([t],_i()),o.method="POST",n&&(a=JSON.stringify(n),o.body=Vi(a)),u=e.I.request(7,o),re(b,2),E(b,u.promise,4);if(b.g!=2){if(f=b.h,c=It(f.data),p=JSON.parse(c),p.manifestUrl&&p.trackingUrl)m=new Ut(t),v=new Ut(p.trackingUrl),e.N=m.resolve(v).toString(),S=Date.now()/1e3,C=S-e.W,e.i(new Ge("ads-loaded",new Map().set("loadTime",C))),T=new Ut(p.manifestUrl),e.l.resolve(m.resolve(T).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return ie(b,0)}if(se(b),!e.G.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,b.return();e.l.resolve(e.G),e.l=null,j(b)})}function FT(e,t,n){var o,a,u,f,c,p,m,v,S,C,T,b,_,D,B;z(function(N){if(N.g==1)return o=Yt([t],_i()),a=e.I.request(7,o),re(N,2),E(N,a.promise,4);if(N.g!=2){if(u=N.h,f=[],c=It(u.data),p=JSON.parse(c),0<p.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(p.avails)){for(e.j=p.avails,m=w(e.j),v=m.next();!v.done;v=m.next())for(S=v.value,C=w(S.nonLinearAdsList),T=C.next();!T.done;T=C.next())for(b=T.value,_=w(b.nonLinearAdList),D=_.next();!D.done;D=_.next())B=D.value,zT(e,B);f=e.getCuePoints(),e.i(new Ge("ad-cue-points-changed",new Map().set("cuepoints",f)))}}else e.j.length&&e.i(new Ge("ad-cue-points-changed",new Map().set("cuepoints",f))),Or(e),e.j=[];return n&&(e.H||0<f.length)&&VT(e),ie(N,0)}se(N),j(N)})}function zT(e,t){var n,o,a,u,f,c,p;z(function(m){if(m.g==1)return!t.staticResource||(n=wg(t),e.F.get(n))?m.return():(o=Yt([t.staticResource],_i()),a=e.I.request(7,o),re(m,2),e.F.set(n,[]),E(m,a.promise,4));if(m.g!=2)return u=m.h,f=It(u.data),c=JSON.parse(f),p=c.apps,e.F.set(n,p),ie(m,0);se(m),e.F.delete(n),j(m)})}function wg(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function VT(e){Tg(e),e.H||(Sg(e),e.o.D(e.g,"seeked",function(){Sg(e)}),e.o.D(e.g,"ended",function(){Or(e)})),e.o.D(e.g,"timeupdate",function(){Tg(e)})}function Sg(e){var t=e.g.currentTime;if(t!=0&&e.u==null){for(var n,o,a=w(e.j),u=a.next();!u.done;u=a.next()){u=u.value;for(var f=w(u.ads),c=f.next();!c.done;c=f.next())if(c=c.value,!o)c.startTimeInSeconds<t&&(o=c,n=u);else if(c.startTimeInSeconds<t&&c.startTimeInSeconds>o.startTimeInSeconds+o.durationInSeconds){o=c,n=u;break}}n&&o&&!e.K.includes(o.adId)&&(e.u=t,e.g.currentTime=n.startTimeInSeconds)}}function Tg(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var o=e.C,a=o.startTimeInSeconds+.5*o.durationInSeconds,u=o.startTimeInSeconds+.75*o.durationInSeconds;t>=o.startTimeInSeconds+.25*o.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),En(e,"firstQuartile")):t>=a&&!e.s.includes("midpoint")?(e.s.push("midpoint"),En(e,"midpoint")):t>=u&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),En(e,"thirdQuartile")),o=e.h.getRemainingTime(),a=e.h.getDuration(),0<a&&(0>=o||o>a)&&Or(e)}if(!e.h||!e.h.isLinear()){e:for(o=w(e.j),a=o.next();!a.done&&(a=a.value,!(e.h&&e.h.isLinear()));a=o.next())for(u=0;u<a.ads.length;u++){var f=a.ads[u],c=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&c>t){if(e.K.includes(f.adId)){if(e.g.ended)continue;e.g.currentTime=c;break e}Or(e),e.J=a,e.h=new Xe(f,u+1,a.ads.length,!0,e.g),e.C=f,u===0&&En(e,"breakStart"),Cg(e);break}}if(!e.h){for(o=w(e.j),a=o.next();!a.done&&(a=a.value,!e.h);a=o.next())for(u=0;u<a.nonLinearAdsList.length;u++)if(f=a.nonLinearAdsList[u],f.nonLinearAdList.length){c=a.startTimeInSeconds;var p=e.F.get(wg(f.nonLinearAdList[0]));if(c<=t&&p&&p.length){Or(e),c=e,p=w(p);for(var m=p.next();!m.done;m=p.next())if(m=m.value,m.data.source.length){var v=document.createElement("img");v.src=m.data.source[0].url,v.style.top=(m.placeholder.top||0)+"%",v.style.height=100-(m.placeholder.top||0)+"%",v.style.left=(m.placeholder.left||0)+"%",v.style.maxWidth=100-(m.placeholder.left||0)+"%",v.style.objectFit="contain",v.style.position="absolute",c.A.appendChild(v)}e.J=a,e.h=new Xe(f,u+1,a.ads.length,!1,e.g),e.C=f,u===0&&En(e,"breakStart"),Cg(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.u&&e.u>t&&(e.g.currentTime=e.u),e.u=null)}}}function Or(e){if(e.h){for(;e.A.lastChild;)e.A.removeChild(e.A.firstChild);e.H||e.K.push(e.C.adId),En(e,"complete");for(var t=w(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Vb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&En(e,"breakEnd"),e.h=null,e.C=null,e.J=null}}function Cg(e){var t=!1;e.g.paused?t=!0:(En(e,"impression"),En(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&En(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||En(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(En(e,"impression"),En(e,"start"),t=!1):En(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){En(e,"pause")}});for(var n=w(e.m),o=n.next();!o.done;o=n.next())o=o.value,e.o.D(o.target,o.type,o.listener)}function En(e,t){var n=e.C.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.J.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){n=w(n.beaconUrls);for(var o=n.next();!o.done;o=n.next())(o=o.value)&&o!=""&&(o=Yt([o],_i()),o.method="POST",e.I.request(7,o))}switch(t){case"impression":e.i(new Ge("ad-impression"));break;case"start":e.i(new Ge("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Ge("ad-muted"));break;case"unmute":e.i(new Ge("ad-volume-changed"));break;case"resume":e.i(new Ge("ad-resumed"));break;case"pause":e.i(new Ge("ad-paused"));break;case"firstQuartile":e.i(new Ge("ad-first-quartile"));break;case"midpoint":e.i(new Ge("ad-midpoint"));break;case"thirdQuartile":e.i(new Ge("ad-third-quartile"));break;case"complete":e.i(new Ge("ad-complete")),e.i(new Ge("ad-stopped"));break;case"breakStart":e.A.setAttribute("ad-active","true");break;case"breakEnd":e.A.removeAttribute("ad-active")}}function Qe(e,t){this.g=e,this.i=null,this.h=t}s=Qe.prototype,s.getDuration=function(){return this.i?this.i.duration:-1},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},s.isPaused=function(){return this.h.paused},s.isSkippable=function(){return this.g.isSkippable()},s.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.h.currentTime+=this.getRemainingTime()},s.pause=function(){return this.h.pause()},s.play=function(){return this.h.play()},s.getVolume=function(){return this.h.volume},s.setVolume=function(e){this.h.volume=e},s.isMuted=function(){return this.h.muted},s.isLinear=function(){return!0},s.resize=function(){},s.setMuted=function(e){this.h.muted=e},s.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},s.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},s.getTitle=function(){return this.g.getTitle()},s.getDescription=function(){return this.g.getDescription()},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},s.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},s.getAdId=function(){return this.g.getAdId()},s.getCreativeAdId=function(){return this.g.getCreativeAdId()},s.getAdvertiserName=function(){return this.g.getAdvertiserName()},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},s.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},s.release=function(){this.h=this.i=this.g=null},ae("shaka.ads.ServerSideAd",Qe),Qe.prototype.release=Qe.prototype.release,Qe.prototype.getPodIndex=Qe.prototype.getPodIndex,Qe.prototype.getTimeOffset=Qe.prototype.getTimeOffset,Qe.prototype.getMediaUrl=Qe.prototype.getMediaUrl,Qe.prototype.getAdvertiserName=Qe.prototype.getAdvertiserName,Qe.prototype.getCreativeAdId=Qe.prototype.getCreativeAdId,Qe.prototype.getAdId=Qe.prototype.getAdId,Qe.prototype.getVastMediaWidth=Qe.prototype.getVastMediaWidth,Qe.prototype.getVastMediaHeight=Qe.prototype.getVastMediaHeight,Qe.prototype.getVastMediaBitrate=Qe.prototype.getVastMediaBitrate,Qe.prototype.getDescription=Qe.prototype.getDescription,Qe.prototype.getTitle=Qe.prototype.getTitle,Qe.prototype.getPositionInSequence=Qe.prototype.getPositionInSequence,Qe.prototype.getSequenceLength=Qe.prototype.getSequenceLength,Qe.prototype.setMuted=Qe.prototype.setMuted,Qe.prototype.resize=Qe.prototype.resize,Qe.prototype.isLinear=Qe.prototype.isLinear,Qe.prototype.isMuted=Qe.prototype.isMuted,Qe.prototype.setVolume=Qe.prototype.setVolume,Qe.prototype.getVolume=Qe.prototype.getVolume,Qe.prototype.play=Qe.prototype.play,Qe.prototype.pause=Qe.prototype.pause,Qe.prototype.skip=Qe.prototype.skip,Qe.prototype.canSkipNow=Qe.prototype.canSkipNow,Qe.prototype.getTimeUntilSkippable=Qe.prototype.getTimeUntilSkippable,Qe.prototype.isSkippable=Qe.prototype.isSkippable,Qe.prototype.isPaused=Qe.prototype.isPaused,Qe.prototype.getRemainingTime=Qe.prototype.getRemainingTime,Qe.prototype.getMinSuggestedDuration=Qe.prototype.getMinSuggestedDuration,Qe.prototype.getDuration=Qe.prototype.getDuration;function Eg(e,t,n,o){var a=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=o,this.G=!1,this.u=this.m=this.o=null,this.A="",this.C=[],this.h=new Ct,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Ge("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(u){HT(a,u)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){a.A.length?a.j.resolve(a.A):a.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),a.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(u){u=u.getAd(),a.m=new Qe(u,a.l),a.u&&(a.m.i=a.u),a.i(new Ge("ad-started",new Map().set("ad",a.m))),a.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){a.s.removeAttribute("ad-active");var u=a.l.currentTime;a.o&&a.o>u&&(a.l.currentTime=a.o,a.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(u){a.u=u.getStreamData().adProgressData,a.m&&(a.m.i=a.u)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){a.i(new Ge("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){a.i(new Ge("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){a.i(new Ge("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){a.i(new Ge("ad-complete")),a.i(new Ge("ad-stopped")),a.s.removeAttribute("ad-active"),a.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){a.i(new Ge("ad-skipped")),a.i(new Ge("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(u){var f=u.getStreamData();u=[],f=w(f.cuepoints);for(var c=f.next();!c.done;c=f.next())c=c.value,u.push({start:c.start,end:c.end});a.C=u,a.i(new Ge("ad-cue-points-changed",new Map().set("cuepoints",u)))})}s=Eg.prototype,s.configure=function(){},s.stop=function(){this.A="",this.o=null,this.C=[]},s.release=function(){this.stop(),this.h&&this.h.release()},s.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},s.getCuePoints=function(){return this.C};function HT(e,t){e.i(new Ge("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var o=e.g.previousCuePointForStreamTime(n);o&&!o.played&&(e.o=n,e.l.currentTime=o.start)}})}function He(){ht.call(this),this.g=this.i=this.h=null,this.j=new yg,this.m=navigator.language,this.l=null}Z(He,ht),s=He.prototype,s.setLocale=function(e){this.m=e},s.configure=function(e){this.l=e,this.h&&this.h.configure(this.l),this.g&&this.g.configure(this.l)},s.initClientSide=function(e,t,n){var o=this;if(!d.google||!google.ima||!google.ima.AdsLoader)throw new K(2,10,1e4);this.h&&this.h.release(),this.h=new Hu(e,t,this.m,n,function(a){return mh(o,a)}),this.h.configure(this.l)},s.release=function(){this.h&&(this.h.release(),this.h=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),ht.prototype.release.call(this)},s.onAssetUnload=function(){this.h&&this.h.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Ge("ad-stopped")),this.j=new yg},s.requestClientSideAds=function(e){if(!this.h)throw new K(1,10,10001);var t=this.h;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},s.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new K(1,10,10001);var t=this.h;t.u=e,t.g&&t.g.updateAdsRenderingSettings(t.u)},s.initMediaTailor=function(e,t,n){var o=this;this.i&&this.i.release(),this.i=new Ys(e,t,n,function(a){return mh(o,a)})},s.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new K(1,10,10005);var o=this.i;return n=n===void 0?"":n,o.l?e=Promise.reject(new K(1,10,10004)):(o.l=new bt,jT(o,e,t),o.G=n||"",o.W=Date.now()/1e3,e=o.l),e},s.initServerSide=function(e,t){var n=this;if(!d.google||!google.ima||!google.ima.dai)throw new K(2,10,10002);this.g&&this.g.release(),this.g=new Eg(e,t,this.m,function(o){return mh(n,o)}),this.g.configure(this.l)},s.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new K(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Le('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.7.11",n=this.g,n.j?e=Promise.reject(new K(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new bt,n.g.requestStream(e),n.A=t||"",n.F=Date.now()/1e3,e=n.j),e},s.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new K(1,10,10003);(e.mpt||e.mpv)&&Le('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.7.11",this.g.g.replaceAdTagParameters(e)},s.getServerSideCuePoints=function(){return ai("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},s.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},s.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},s.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},s.onDashTimedMetadata=function(e){if(this.g&&e.schemeIdUri=="urn:google:dai:2018"){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},s.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},s.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function mh(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}ae("shaka.ads.AdManager",He),He.prototype.onCueMetadataChange=He.prototype.onCueMetadataChange,He.prototype.onHlsTimedMetadata=He.prototype.onHlsTimedMetadata,He.prototype.onDashTimedMetadata=He.prototype.onDashTimedMetadata,He.prototype.onManifestUpdated=He.prototype.onManifestUpdated,He.prototype.getStats=He.prototype.getStats,He.prototype.getCuePoints=He.prototype.getCuePoints,He.prototype.getServerSideCuePoints=He.prototype.getServerSideCuePoints,He.prototype.replaceServerSideAdTagParameters=He.prototype.replaceServerSideAdTagParameters,He.prototype.requestServerSideStream=He.prototype.requestServerSideStream,He.prototype.initServerSide=He.prototype.initServerSide,He.prototype.requestMediaTailorStream=He.prototype.requestMediaTailorStream,He.prototype.initMediaTailor=He.prototype.initMediaTailor,He.prototype.updateClientSideAdsRenderingSettings=He.prototype.updateClientSideAdsRenderingSettings,He.prototype.requestClientSideAds=He.prototype.requestClientSideAds,He.prototype.onAssetUnload=He.prototype.onAssetUnload,He.prototype.release=He.prototype.release,He.prototype.initClientSide=He.prototype.initClientSide,He.prototype.configure=He.prototype.configure,He.prototype.setLocale=He.prototype.setLocale,He.ADS_LOADED="ads-loaded",He.AD_STARTED="ad-started",He.AD_FIRST_QUARTILE="ad-first-quartile",He.AD_MIDPOINT="ad-midpoint",He.AD_THIRD_QUARTILE="ad-third-quartile",He.AD_COMPLETE="ad-complete",He.AD_STOPPED="ad-stopped",He.AD_SKIPPED="ad-skipped",He.AD_VOLUME_CHANGED="ad-volume-changed",He.AD_MUTED="ad-muted",He.AD_PAUSED="ad-paused",He.AD_RESUMED="ad-resumed",He.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",He.CUEPOINTS_CHANGED="ad-cue-points-changed",He.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",He.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",He.AD_CLICKED="ad-clicked",He.AD_PROGRESS="ad-progress",He.AD_BUFFERING="ad-buffering",He.AD_IMPRESSION="ad-impression",He.AD_DURATION_CHANGED="ad-duration-changed",He.AD_CLOSED="ad-closed",He.AD_LOADED="ad-loaded",He.ALL_ADS_COMPLETED="all-ads-completed",He.AD_LINEAR_CHANGED="ad-linear-changed",He.AD_METADATA="ad-metadata",He.AD_RECOVERABLE_ERROR="ad-recoverable-error",He.AD_ERROR="ad-error",He.AD_BREAK_READY="ad-break-ready",He.AD_INTERACTION="ad-interaction",Vu=function(){return new He};function Ag(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Ge){var o={};for(a in n)(t=n[a])&&typeof t=="object"?a=="detail"&&(o[a]=t):a in Event||(o[a]=t);return o}if(n instanceof Error){var a=new Set(["name","message","stack"]);for(o in n)a.add(o);for(t=w(Object.getOwnPropertyNames(n)),o=t.next();!o.done;o=t.next())a.add(o.value);for(t={},a=w(a),o=a.next();!o.done;o=a.next())o=o.value,t[o]=n[o];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(a={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=w(fo(n)),o=n.next();!o.done;o=n.next())o=o.value,t=o.end,a.start.push(o.start),a.end.push(t);n=a}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function gh(e){return JSON.parse(e,function(t,n){if(n=="NaN")var o=NaN;else if(n=="-Infinity")o=-1/0;else if(n=="Infinity")o=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")o=$T(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")o=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(o in t)n[o]=t[o];o=n}else o=n;return o})}function $T(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var bg="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),GT="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),yh=["loop","playbackRate"],WT=["pause","play"],Wu={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},Xu={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},vh={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Ig=[["getConfiguration","configure"]],kg=[["isTextTrackVisible","setTextTrackVisibility"]],XT="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),KT=["attach","attachCanvas","detach","load","unload"];function xh(e,t,n,o,a,u,f){var c=this;this.G=e,this.K=f,this.j=new rt(t),this.N=n,this.u=!1,this.s=o,this.F=a,this.I=u,this.h=this.m=!1,this.J="",this.o=null,this.A=function(){return Sh(c)},this.C=function(p,m){switch(p=gh(m),p.type){case"event":var v=p.targetName,S=u0(p.event);c.s(v,S);break;case"update":v=p.update;for(S in v){p=c.g[S]||{};for(var C in v[S])p[C]=v[S][C]}c.u&&(c.N(),c.u=!1);break;case"asyncComplete":if(S=p.id,C=p.error,p=c.i[S],delete c.i[S],p)if(C){S=new K(C.severity,C.category,C.code);for(v in C)S[v]=C[v];p.reject(S)}else p.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,Qs.add(this)}s=xh.prototype,s.destroy=function(){return Qs.delete(this),Th(this),hi&&Rg(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.C=this.A=this.l=this.i=this.g=this.o=null,Promise.resolve()},s.Ka=function(){return this.h},s.ef=function(){return this.J},s.init=function(){if(this.G.length)if(d.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.qc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=w(Qs),o=n.next();!o.done;o=n.next())_g(o.value,t)},function(t){for(var n=w(Qs),o=n.next();!o.done;o=n.next())o=o.value,Ku=t=="available",o.j.qc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Ku&&this.j.U(qT),(e=hi)&&e.status!=chrome.cast.SessionStatus.STOPPED?_g(this,e):hi=null}else d.__onGCastApiAvailable!==Lg&&(Yu=d.__onGCastApiAvailable||null,d.__onGCastApiAvailable=Lg)},s.mf=function(e){this.o=e,this.h&&qs(this,{type:"appData",appData:this.o})},s.cast=function(e){var t=this;return z(function(n){if(!t.m)throw new K(1,8,8e3);if(!Ku)throw new K(1,8,8001);if(t.h)throw new K(1,8,8002);return t.l=new bt,chrome.cast.requestSession(function(o){return wh(t,e,o)},function(o){return Mg(t,o)}),E(n,t.l,0)})};function YT(e){if(e.h){var t=e.I();chrome.cast.requestSession(function(n){return wh(e,t,n)},function(n){return Mg(e,n)})}}s.cc=function(){if(this.h){if(Th(this),hi){Rg(this);try{hi.stop(function(){},function(){})}catch{}hi=null}Sh(this)}},s.get=function(e,t){var n=this;if(e=="video"){if(WT.includes(t))return function(){return n.hg.apply(n,[e,t].concat(L(Re.apply(0,arguments))))}}else if(e=="player"){if(vh[t]&&!this.get("player","isLive")())return function(){};if(XT.includes(t))return function(){return n.hg.apply(n,[e,t].concat(L(Re.apply(0,arguments))))};if(KT.includes(t))return function(){return n.Nh.apply(n,[e,t].concat(L(Re.apply(0,arguments))))};if(Wu[t]||Xu[t])return function(){return n.g[e][t]}}return this.g[e][t]},s.set=function(e,t,n){this.g[e][t]=n,qs(this,{type:"set",targetName:e,property:t,value:n})};function wh(e,t,n){hi=n,n.addUpdateListener(e.A),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),Sh(e),qs(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function Mg(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new K(2,8,n,t))}s.hg=function(e,t){qs(this,{type:"call",targetName:e,methodName:t,args:Re.apply(2,arguments)})},s.Nh=function(e,t){var n=Re.apply(2,arguments),o=new bt,a=this.H.toString();this.H++,this.i[a]=o;try{qs(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:a})}catch(u){o.reject(u)}return o};function _g(e,t){var n=e.I();e.l=new bt,e.u=!0,wh(e,n,t)}function Rg(e){var t=hi;t.removeUpdateListener(e.A),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function Sh(e){var t=hi?hi.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};Th(e)}e.h=t,e.J=t?hi.receiver.friendlyName:"",e.j.qc()}function Th(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new K(1,7,7e3))}}function qs(e,t){t=Ag(t);var n=hi;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},zn)}catch(o){throw t=new K(2,8,8005,o),n=new Ge("error",new Map().set("detail",t)),e.s("player",n),e.cc(),t}}var qT=.02,Ku=!1,hi=null,Yu=null,Qs=new Set;function Lg(e){if(Yu?d.__onGCastApiAvailable=Yu:delete d.__onGCastApiAvailable,Yu=null,e)for(var t=w(Qs),n=t.next();!n.done;n=t.next())n.value.init();typeof d.__onGCastApiAvailable=="function"&&d.__onGCastApiAvailable(e)}function jt(e,t,n,o){o=o===void 0?!1:o,ht.call(this);var a=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.A=o,this.u=new Map,this.g=new xh(n,function(){return Dg(a)},function(){return Ng(a)},function(u,f){return Ug(a,u,f)},function(){return Og(a)},function(){return Ch(a)},o),QT(this)}Z(jt,ht),s=jt.prototype,s.destroy=function(e){return e&&this.g.cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,ht.prototype.release.call(this),Promise.all(e)},s.nh=function(){return this.l},s.bh=function(){return this.s},s.Fg=function(){return this.g.m&&Ku},s.Ka=function(){return this.g.Ka()},s.ef=function(){return this.g.ef()},s.cast=function(){var e=this,t;return z(function(n){return n.g==1?(t=Ch(e),E(n,e.g.cast(t),2)):e.h?E(n,e.h.rc(),0):n.return()})},s.mf=function(e){this.g.mf(e)},s.ai=function(){YT(this.g)},s.cc=function(){this.g.cc()},s.Gg=function(e,t){t=t===void 0?!1:t;var n=this;return z(function(o){if(o.g==1)return e==n.C&&t==n.A?o.return():(n.C=e,n.A=t,n.g.cc(),E(o,n.g.destroy(),2));n.g=null,n.g=new xh(e,function(){return Dg(n)},function(){return Ng(n)},function(a,u){return Ug(n,a,u)},function(){return Og(n)},function(){return Ch(n)},t),n.g.init(),j(o)})};function QT(e){e.g.init(),e.m=new Ct;for(var t=w(bg),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(u){e.g.Ka()||(u=u0(u),e.j.dispatchEvent(u))});for(var o in fu)e.m.D(e.h,fu[o],function(u){e.g.Ka()||e.o.dispatchEvent(u)});e.l={},t={};for(var a in e.i)t.wc=a,Object.defineProperty(e.l,t.wc,{configurable:!1,enumerable:!0,get:function(u){return function(){return JT(e,u.wc)}}(t),set:function(u){return function(f){var c=u.wc;e.g.Ka()?e.g.set("video",c,f):e.i[c]=f}}(t)}),t={wc:t.wc};e.s={},Pg(e,function(u){Object.defineProperty(e.s,u,{configurable:!1,enumerable:!0,get:function(){return eC(e,u)}})}),ZT(e),e.j=new ht,e.j.zd=e.l,e.o=new ht,e.o.zd=e.s}function ZT(e){var t=new Map;Pg(e,function(n,o){t.has(o)?(o=t.get(o),n.length<o.length?e.u.set(n,o):e.u.set(o,n)):t.set(o,n)})}function Pg(e,t){function n(p){return p=="constructor"||typeof o[p]!="function"?!1:!a.has(p)}var o=e.h,a=new Set,u;for(u in o)n(u)&&(a.add(u),t(u,o[u]));for(e=Object.getPrototypeOf(o),u=Object.getPrototypeOf({});e&&e!=u;){for(var f=w(Object.getOwnPropertyNames(e)),c=f.next();!c.done;c=f.next())c=c.value,n(c)&&(a.add(c),t(c,o[c]));e=Object.getPrototypeOf(e)}}function Ch(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Ge(),startTime:null};e.i.pause();for(var n=w(yh),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.i[o];for(e.i.ended||(t.startTime=e.i.currentTime),n=w(Ig),o=n.next();!o.done;o=n.next()){var a=o.value;o=a[1],a=e.h[a[0]](),t.player[o]=a}for(n=w(kg),o=n.next();!o.done;o=n.next())a=o.value,o=a[1],a=e.h[a[0]](),t.playerAfterLoad[o]=a;return t}function Dg(e){var t=new Ge("caststatuschanged");e.dispatchEvent(t)}function Ng(e){var t=new Ge(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Og(e){for(var t=w(Ig),n=t.next();!n.done;n=t.next()){var o=n.value;n=o[1],o=e.g.get("player",o[0])(),e.h[n](o)}var a=e.g.get("player","getAssetUri")();o=e.g.get("video","ended"),t=Promise.resolve();var u=e.i.autoplay;n=null,o||(n=e.g.get("video","currentTime"));var f;(o=e.g.get("player","getTextTracks")())&&o.length&&(f=o.find(function(m){return m.active}));var c=e.g.get("player","isTextTrackVisible")();a&&(e.i.autoplay=!1,t=e.h.load(a,n));var p={};for(n=w(yh),o=n.next();!o.done;o=n.next())o=o.value,p[o]=e.g.get("video",o);t.then(function(){if(e.i){for(var m=w(yh),v=m.next();!v.done;v=m.next())v=v.value,e.i[v]=p[v];for(m=w(kg),v=m.next();!v.done;v=m.next()){var S=v.value;v=S[1],S=e.g.get("player",S[0])(),e.h[v](S)}e.h.og(c),f&&e.h.kf(f.language,f.roles,f.forced),e.i.autoplay=u,a&&e.i.play()}},function(m){m=new Map().set("detail",m),m=new Ge("error",m),e.h.dispatchEvent(m)})}function JT(e,t){if(t=="addEventListener")return function(o,a,u){return e.j.addEventListener(o,a,u)};if(t=="removeEventListener")return function(o,a,u){return e.j.removeEventListener(o,a,u)};if(e.g.Ka()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ka()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function eC(e,t){if(e.u.has(t)&&(t=e.u.get(t)),t=="addEventListener")return function(n,o,a){return e.o.addEventListener(n,o,a)};if(t=="removeEventListener")return function(n,o,a){return e.o.removeEventListener(n,o,a)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Ob()};if(t=="getDrmEngine")return function(){return e.h.m};if(t=="getAdManager")return function(){return e.h.Of()};if(t=="setVideoContainer")return function(n){return e.h.rg(n)};if(e.g.Ka()){if(t=="getManifest"||t=="drmInfo")return function(){return Le(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Le(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ka()&&Object.keys(e.g.g.video).length==0&&(Wu[t]||Xu[t])||!e.g.Ka()?e.h[t].bind(e.h):e.g.get("player",t)}function Ug(e,t,n){e.g.Ka()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}ae("shaka.cast.CastProxy",jt),jt.prototype.changeReceiverId=jt.prototype.Gg,jt.prototype.forceDisconnect=jt.prototype.cc,jt.prototype.suggestDisconnect=jt.prototype.ai,jt.prototype.setAppData=jt.prototype.mf,jt.prototype.cast=jt.prototype.cast,jt.prototype.receiverName=jt.prototype.ef,jt.prototype.isCasting=jt.prototype.Ka,jt.prototype.canCast=jt.prototype.Fg,jt.prototype.getPlayer=jt.prototype.bh,jt.prototype.getVideo=jt.prototype.nh,jt.prototype.destroy=jt.prototype.destroy;function Jt(e,t,n,o){ht.call(this);var a=this;this.g=e,this.h=t,this.j=new Ct,this.H={video:e,player:t},this.C=n||function(){},this.I=o||function(u){return u},this.i=null,this.F=!1,this.o=!0,this.m=0,this.A=!1,this.u=!0,this.s=this.l=null,this.G=new rt(function(){Eh(a)}),tC(this)}Z(Jt,ht),s=Jt.prototype,s.isConnected=function(){return this.F},s.th=function(){return this.o},s.Zh=function(e){this.i=e},s.Jg=function(){this.i=null},s.$h=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},s.Yh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},s.Xh=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},s.destroy=function(){var e=this,t,n;return z(function(o){if(o.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,ht.prototype.release.call(e),E(o,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),j(o)})};function tC(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Bg(e)},t.onSenderDisconnected=function(){return Bg(e)},t.onSystemVolumeChanged=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&qi(e,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},e.l),qi(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(a){return oC(e,a)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(a){return iC(e,a)},t.start(),t=w(bg);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(a){return jg(e,"video",a)});for(var o in fu)e.j.D(e.h,fu[o],function(a){return jg(e,"player",a)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.pf(3840,2160):e.h.pf(1920,1080),e.j.D(e.g,"loadeddata",function(){e.A=!0}),e.j.D(e.h,"loading",function(){e.o=!1,Ur(e)}),e.j.D(e.g,"playing",function(){e.o=!1,Ur(e)}),e.j.D(e.g,"pause",function(){Ur(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,Ur(e)}),e.j.D(e.g,"ended",function(){new rt(function(){e.g&&e.g.ended&&(e.o=!0,Ur(e))}).U(sC)})}function Bg(e){e.m=0,e.u=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,Ur(e)}function Ur(e){var t;z(function(n){if(n.g==1)return E(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Ge("caststatuschanged"),e.dispatchEvent(t),Fg(e)||Qi(e),j(n)})}function nC(e,t,n){var o,a,u,f,c,p,m,v,S,C;z(function(T){switch(T.g){case 1:for(o in t.player)a=t.player[o],e.h[o](a);return e.C(n),u=e.g.autoplay,t.manifest?(e.g.autoplay=!1,re(T,5),E(T,e.h.load(t.manifest,t.startTime),7)):E(T,Promise.resolve(),3);case 7:ie(T,3);break;case 5:return f=se(T),c=new Map().set("detail",f),p=new Ge("error",c),e.h&&e.h.dispatchEvent(p),T.return();case 3:if(!e.h)return T.return();for(m in t.video)v=t.video[m],e.g[m]=v;for(S in t.playerAfterLoad)C=t.playerAfterLoad[S],e.h[S](C);e.g.autoplay=u,t.manifest&&(e.g.play(),Qi(e)),j(T)}})}function jg(e,t,n){e.h&&(Eh(e),qi(e,{type:"event",targetName:t,event:n},e.l))}function Eh(e){e.G.U(rC);for(var t={video:{},player:{}},n=w(GT),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.g[o];if(e.h.R())for(var a in vh)e.m%vh[a]==0&&(t.player[a]=e.h[a]());for(var u in Wu)e.m%Wu[u]==0&&(t.player[u]=e.h[u]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),qi(e,{type:"update",update:t},e.l);for(var f in Xu)e.m%Xu[f]==0&&(t={player:{}},t.player[f]=e.h[f](),qi(e,{type:"update",update:t},e.l));e.A&&(e.m+=1),Fg(e)}function Fg(e){return e.u&&(e.g.duration||e.h.R())?(Ah(e),e.u=!1,!0):!1}function Ah(e,t){var n={contentId:e.h.Ge(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Qi(e,t===void 0?0:t,n)}function iC(e,t){var n=gh(t.data);switch(n.type){case"init":e.m=0,e.A=!1,e.u=!0,nC(e,n.initState,n.appData),Eh(e);break;case"appData":e.C(n.appData);break;case"set":var o=n.targetName,a=n.property;if(n=n.value,o=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),a=="volume"){t.setSystemVolumeLevel(n);break}else if(a=="muted"){t.setSystemVolumeMuted(n);break}}e.H[o][a]=n;break;case"call":o=e.H[n.targetName],o[n.methodName].apply(o,n.args);break;case"asyncCall":o=n.targetName,a=n.methodName,o=="player"&&a=="load"&&(e.m=0,e.A=!1);var u=n.id,f=t.senderId;t=e.H[o],n=t[a].apply(t,n.args),o=="player"&&a=="load"&&(n=n.then(function(){e.u=!0})),n.then(function(){return zg(e,f,u,null)},function(c){return zg(e,f,u,c)})}}function oC(e,t){var n=gh(t.data);switch(n.type){case"PLAY":e.g.play(),Qi(e);break;case"PAUSE":e.g.pause(),Qi(e);break;case"SEEK":t=n.currentTime;var o=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),o&&o=="PLAYBACK_START"?(e.g.play(),Qi(e)):o&&o=="PLAYBACK_PAUSE"&&(e.g.pause(),Qi(e));break;case"STOP":e.h.rc().then(function(){e.h&&Qi(e)});break;case"GET_STATUS":Ah(e,Number(n.requestId));break;case"VOLUME":o=n.volume,t=o.level,o=o.muted;var a=e.g.volume,u=e.g.muted;t!=null&&(e.g.volume=Number(t)),o!=null&&(e.g.muted=o),a==e.g.volume&&u==e.g.muted||Qi(e);break;case"LOAD":e.m=0,e.A=!1,e.u=!1,t=n.media,o=n.currentTime,a=e.I(t.contentId),u=n.autoplay||!0,e.C(t.customData),u&&(e.g.autoplay=!0),e.h.load(a,o).then(function(){e.h&&Ah(e)}).catch(function(f){var c="LOAD_FAILED";f.category==7&&f.code==7e3&&(c="LOAD_CANCELLED"),qi(e,{requestId:Number(n.requestId),type:c},e.s)});break;default:qi(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function zg(e,t,n,o){e.h&&qi(e,{type:"asyncComplete",id:n,error:o},e.l,t)}function qi(e,t,n,o){e.F&&(e=Ag(t),o?n.getCastChannel(o).send(e):n.broadcast(e))}function Qi(e,t,n){n=n===void 0?null:n;var o={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?aC:e.h.Ke()?lC:e.g.paused?fC:uC,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(o.media=n),qi(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[o]},e.s)}ae("shaka.cast.CastReceiver",Jt),Jt.prototype.destroy=Jt.prototype.destroy,Jt.prototype.setContentArtist=Jt.prototype.Xh,Jt.prototype.setContentImage=Jt.prototype.Yh,Jt.prototype.setContentTitle=Jt.prototype.$h,Jt.prototype.clearContentMetadata=Jt.prototype.Jg,Jt.prototype.setContentMetadata=Jt.prototype.Zh,Jt.prototype.isIdle=Jt.prototype.th,Jt.prototype.isConnected=Jt.prototype.isConnected;var rC=.5,sC=5,aC="IDLE",uC="PLAYING",lC="BUFFERING",fC="PAUSED";function Vg(e,t,n,o,a){if(o>=a)return null;for(var u=-1,f=-1,c=0;c<n.length;c++)if(n[c].some(function(V){return V!=null&&V.g.trim()!=""})){u=c;break}for(c=n.length-1;0<=c;c--)if(n[c].some(function(V){return V!=null&&V.g.trim()!=""})){f=c;break}if(u===-1||f===-1)return null;for(var p=c=!1,m="white",v="black",S=bh(o,a,c,p,m,v);u<=f;u++){for(var C=n[u],T=-1,b=-1,_=0;_<C.length;_++)if(C[_]!=null&&C[_].g.trim()!==""){T=_;break}for(_=C.length-1;0<=_;_--)if(C[_]!=null&&C[_].g.trim()!==""){b=_;break}if(T===-1||b===-1)C=Hg(o,a),e.nestedCues.push(C);else{for(;T<=b;T++)if(_=C[T]){var D=_.l,B=_.i,N=_.j,G=_.h;(D!=c||B!=p||N!=m||G!=v)&&(S.payload&&e.nestedCues.push(S),S=bh(o,a,D,B,N,G),c=D,p=B,m=N,v=G),S.payload+=_.g}else S.payload+=" ";S.payload&&e.nestedCues.push(S),u!==f&&(S=Hg(o,a),e.nestedCues.push(S)),S=bh(o,a,c,p,m,v)}}return e.nestedCues.length?{cue:e,stream:t}:null}function bh(e,t,n,o,a,u){return e=new ft(e,t,""),n&&e.textDecoration.push("underline"),o&&(e.fontStyle="italic"),e.color=a,e.backgroundColor=u,e}function Hg(e,t){return e=new ft(e,t,""),e.lineBreak=!0,e}function $g(e,t,n,o,a){this.g=e,this.l=t,this.i=n,this.h=o,this.j=a}function Ih(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Zs(this)}function qu(e,t,n){var o="CC"+((e.u<<1|e.s)+1),a=new ft(t,n,"");a.lineInterpretation=1;var u=pC.get(e.g);return u&&(a.line=u),Vg(a,o,e.i,t,n)}function Zs(e){Zi(e,0,15),e.g=1}function Br(e,t,n){if(!(32>n||127<n)){var o="";switch(t){case Js:o=Yg.has(n)?Yg.get(n):String.fromCharCode(n);break;case Wg:o=cC.get(n);break;case Xg:e.i[e.g].pop(),o=hC.get(n);break;case Kg:e.i[e.g].pop(),o=dC.get(n)}o&&e.i[e.g].push(new $g(o,e.m,e.j,e.o,e.l))}}function Gg(e,t,n,o){if(!(0>n||0>t))if(t>=n)for(--o;0<=o;o--)e.i[t+o]=e.i[n+o].map(function(u){return u});else for(var a=0;a<o;a++)e.i[t+a]=e.i[n+a].map(function(u){return u})}function Zi(e,t,n){for(var o=0;o<=n;o++)e.i[t+o]=[]}var Js=0,Wg=1,Xg=2,Kg=3,Yg=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),cC=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),hC=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),dC=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),pC=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Qu(e,t){this.h=Zg,this.o=new Ih(e,t),this.i=new Ih(e,t),this.g=this.j=new Ih(e,t),this.l=0,this.m=null}function kh(e,t,n){e.g=e.i;var o=e.g,a=null;return e.h!==Zu&&e.h!==ea&&(a=qu(o,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Zi(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Zi(n,0,15),o.g=15),e.h=Zu,o.h=t,a}function qg(e){e.h=mC,e.g=e.j,e.g.h=0}function Qg(e){it("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=ea}var Zg=0,mC=1,Zu=3,ea=4,gC="black green blue cyan red yellow magenta black".split(" "),Jg="white green blue cyan red yellow magenta white_italics".split(" ");function ey(e,t){this.I=t,this.N=e,this.J=this.l=!1,this.m=this.o=this.G=this.K=this.H=0,this.F=xC,this.i=[],this.g=this.h=this.j=0,this.C=this.u=!1,this.A="white",this.s="black",Mh(this)}function Mh(e){e.i=[];for(var t=0;16>t;t++)e.i.push(_h())}function _h(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Go(e,t){ty(e)&&(e.i[e.h][e.g]=new $g(t,e.C,e.u,e.s,e.A),e.g++)}function ty(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}ey.prototype.isVisible=function(){return this.l};function Wo(e,t,n){var o=new ft(e.j,t,"");o.textAlign=e.F===yC?"left":e.F===vC?"right":Oi;var a=o.region;switch(e.I&&(a.id+="svc"+e.I),a.id+="win"+e.N,a.height=e.o,a.width=e.m,a.heightUnits=2,a.widthUnits=2,a.viewportAnchorX=e.H,a.viewportAnchorY=e.K,a.viewportAnchorUnits=e.J?Hn:2,e.G){case wC:a.regionAnchorX=0,a.regionAnchorY=0;break;case SC:a.regionAnchorX=50,a.regionAnchorY=0;break;case TC:a.regionAnchorX=100,a.regionAnchorY=0;break;case CC:a.regionAnchorX=0,a.regionAnchorY=50;break;case EC:a.regionAnchorX=50,a.regionAnchorY=50;break;case AC:a.regionAnchorX=100,a.regionAnchorY=50;break;case bC:a.regionAnchorX=0,a.regionAnchorY=100;break;case IC:a.regionAnchorX=50,a.regionAnchorY=100;break;case kC:a.regionAnchorX=100,a.regionAnchorY=100}return(n=Vg(o,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var yC=0,vC=1,xC=2,wC=0,SC=1,TC=2,CC=3,EC=4,AC=5,bC=6,IC=7,kC=8;function MC(){this.i=[],this.h=null,this.g=0}function _C(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Ju(e.h)),e.h=null,e.g=0))}function Ju(e){this.g=0,this.h=e}Ju.prototype.ia=function(){return this.g<this.h.length},Ju.prototype.qa=function(){return this.g};function Gt(e){if(!e.ia())throw new K(2,2,3e3);return e.h[e.g++]}Ju.prototype.skip=function(e){if(this.g+e>this.h.length)throw new K(2,2,3e3);this.g+=e};function RC(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function LC(e,t,n,o){if(128<=n&&135>=n)o=n&7,e.h[o]&&(e.g=e.h[o]);else{if(n===136){n=Gt(t).value,t=null,n=w(ta(e,n));for(var a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=Wo(a,o,e.i)),Mh(a);return t}if(n===137)for(t=Gt(t).value,t=w(ta(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=o),n.l=!0;else{if(n===138){for(n=Gt(t).value,t=null,n=w(ta(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=Wo(a,o,e.i)),a.l=!1;return t}if(n===139){for(n=Gt(t).value,t=null,n=w(ta(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()?t=Wo(a,o,e.i):a.j=o,a.l=!a.l;return t}if(n===140)return t=Gt(t).value,ny(e,t,o);if(n===143)return o=ny(e,255,o),iy(e),o;if(n===144)t.skip(1),o=Gt(t).value,e.g&&(e.g.u=0<(o&128),e.g.C=0<(o&64));else if(n===145)o=Gt(t).value,n=Gt(t).value,t.skip(1),e.g&&(t=oy((n&48)>>4,(n&12)>>2,n&3),e.g.A=oy((o&48)>>4,(o&12)>>2,o&3),e.g.s=t);else if(n===146)o=Gt(t).value,t=Gt(t).value,e.g&&(e=e.g,e.h=o&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),o=Gt(t).value,t.skip(1),e.g&&(e.g.F=o&3);else if(152<=n&&159>=n){if(n=(n&15)-8,a=e.h[n]!==null,!a){var u=new ey(n,e.i);u.j=o,e.h[n]=u}o=Gt(t).value,u=Gt(t).value;var f=Gt(t).value,c=Gt(t).value,p=Gt(t).value;t=Gt(t).value,a&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.u=!1,t.A="white",t.s="black"),t=e.h[n],t.l=0<(o&32),t.K=u&127,t.H=f,t.G=(c&240)>>4,t.J=0<(u&128),t.o=(c&15)+1,t.m=(p&63)+1,e.g=e.h[n]}}}return null}function ta(e,t){for(var n=[],o=0;8>o;o++)(t&1)===1&&e.h[o]&&n.push(o),t>>=1;return n}function ny(e,t,n){var o=null;t=w(ta(e,t));for(var a=t.next();!a.done;a=t.next()){a=a.value;var u=e.h[a];u.isVisible()&&(o=Wo(u,n,e.i)),e.h[a]=null}return o}function iy(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function oy(e,t,n){var o={0:0,1:0,2:1,3:1};return e=o[e],t=o[t],n=o[n],PC[e<<2|t<<1|n]}var ry=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),PC="black blue green cyan red magenta yellow white".split(" ");function jr(){this.h=[],this.g=[],this.i=new MC,this.l=0,this.m=new Map([["CC1",new Qu(0,0)],["CC2",new Qu(0,1)],["CC3",new Qu(1,0)],["CC4",new Qu(1,1)]]),this.s=this.o=0,this.j=new Map,this.A=!0,this.u=new Set,Rh(this)}jr.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Rh(this),e=w(this.j.values());for(var t=e.next();!t.done;t=e.next())iy(t.value)};function Rh(e){e.o=0,e.s=0;for(var t=w(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=Zg,n.g=n.j,n.m=null,Zs(n.i),Zs(n.j),Zs(n.o);e.A=!0}jr.prototype.extract=function(e,t){if(this.A){for(var n=w(this.m.values()),o=n.next();!o.done;o=n.next())o.value.l=t;this.A=!1}if(e=new yt(e,0),!(8>e.getLength())&&e.ga()===181&&e.Ea()===49&&e.L()===1195456820&&e.ga()===3&&(n=e.ga(),(n&64)!==0))for(n&=31,e.skip(1),o=0;o<n;o++){var a=e.ga(),u=(a&4)>>2,f=e.ga(),c=e.ga();u&&(a&=3,a===0||a===1?this.h.push({pts:t,type:a,Sa:f,nb:c,order:this.h.length}):(this.g.push({pts:t,type:a,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:c,order:this.g.length})))}},jr.prototype.decode=function(){function e(a,u){return a.pts-u.pts||a.order-u.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=w(this.h),o=n.next();!o.done;o=n.next())(o=DC(this,o.value))&&t.push(o);for(n=w(this.g),o=n.next();!o.done;o=n.next())_C(this.i,o.value);for(n=w(this.i.i),o=n.next();!o.done;o=n.next())o=NC(this,o.value),t.push.apply(t,L(o));return this.i.i=[],this.h=[],this.g=[],t};function DC(e,t){var n=t.type;if((t.Sa&112)===16){var o=t.Sa>>3&1;n===0?e.o=o:e.s=o}if(o="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(o),t.Sa===255&&t.nb===255||!t.Sa&&!t.nb||!sy(t.Sa)||!sy(t.nb))return 45<=++e.l&&Rh(e),null;if(e.l=0,t.Sa&=127,t.nb&=127,!t.Sa&&!t.nb)return null;if(e.u.add(o),e=null,(t.Sa&112)===16)e:{if(o=t.Sa,e=t.nb,n.m===(o<<8|e))n.m=null;else if(n.m=o<<8|e,(o&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(o&7)<<1|e>>5&1];var a=(e&30)>>1;o="white";var u=!1;7>a?o=Jg[a]:a===7&&(u=!0),e=(e&1)===1,n.h!==ea&&(a=n.g,n.h===Zu&&t!==a.g&&(n=1+t-a.h,Gg(a,n,1+a.g-a.h,a.h),Zi(a,0,n-1),Zi(a,t+1,15-t)),a.g=t,a.m=e,a.j=u,a.l=o,a.o="black")}else if((o&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Br(n.g,Js,32),o=!1,t=Jg[(e&14)>>1],t==="white_italics"&&(t="white",o=!0),n.g.m=(e&1)===1,n.g.j=o,n.g.l=t;else if((o&247)===16&&(e&240)===32||(o&247)===23&&(e&255)===45)t="black",!(o&7)&&(t=gC[(e&14)>>1]),n.g.o=t;else if((o&247)===17&&(e&240)===48)Br(n.g,Wg,e);else if((o&246)===18&&(e&224)===32)Br(n.g,o&1?Kg:Xg,e);else if((o&246)===20&&(e&240)===32){switch(e=t.pts,o=null,t.nb){case 32:qg(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:o=kh(n,2,e);break;case 38:o=kh(n,3,e);break;case 39:o=kh(n,4,e);break;case 40:Br(n.g,Js,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Zs(n.o),Qg(n);break;case 43:Qg(n);break;case 44:t=n.i,o=null,n.h!==ea&&(o=qu(t,n.l,e)),Zi(t,0,15);break;case 45:t=n.g,n.h!==Zu?o=null:(o=qu(t,n.l,e),u=t.g-t.h+1,Gg(t,u-1,u,t.h),Zi(t,0,u-1),Zi(t,t.g,15-t.g),n.l=e);break;case 46:Zi(n.j,0,15);break;case 47:t=null,n.h!==ea&&(t=qu(n.i,n.l,e)),o=n.j,n.j=n.i,n.i=o,qg(n),n.l=e,o=t}e=o;break e}e=null}else o=t.nb,Br(n.g,Js,t.Sa),Br(n.g,Js,o);return e}function NC(e,t){var n=[];try{for(;t.ia();){var o=Gt(t).value,a=(o&224)>>5,u=o&31;if(a===7&&u!=0&&(a=Gt(t).value&63),a!=0){e.u.add("svc"+a),e.j.has(a)||e.j.set(a,new RC(a));for(var f=e.j.get(a),c=t.qa();t.qa()-c<u;){a=t;var p=Gt(a),m=p.value,v=p.pts;if(m===16){var S=Gt(a);m=m<<16|S.value}if(0<=m&&31>=m){var C=v;if(f.g){var T=f.g;switch(a=null,m){case 8:!ty(T)||0>=T.g&&0>=T.h||(0>=T.g?(T.g=T.m-1,T.h--):T.g--,T.i[T.h][T.g]=null);break;case 13:if(T.isVisible()&&(a=Wo(T,C,f.i)),T.h+1>=T.o){C=T;for(var b=0,_=1;16>_;_++,b++)C.i[b]=C.i[_];for(_=0;1>_;_++,b++)C.i[b]=_h()}else T.h++;T.g=0;break;case 14:T.isVisible()&&(a=Wo(T,C,f.i)),T.i[T.h]=_h(),T.g=0;break;case 12:T.isVisible()&&(a=Wo(T,C,f.i)),Mh(T),C=T,C.h=0,C.g=0}var D=a}else D=null}else if(128<=m&&159>=m)D=LC(f,a,m,v);else{if(4096<=m&&4127>=m)C=m&255,8<=C&&15>=C?a.skip(1):16<=C&&23>=C?a.skip(2):24<=C&&31>=C&&a.skip(3);else if(4224<=m&&4255>=m)C=m&255,128<=C&&135>=C?a.skip(4):136<=C&&143>=C&&a.skip(5);else if(32<=m&&127>=m)a=m,f.g&&(a===127?Go(f.g,"♪"):Go(f.g,String.fromCharCode(a)));else if(160<=m&&255>=m)f.g&&Go(f.g,String.fromCharCode(m));else if(4128<=m&&4223>=m){if(a=m&255,f.g)if(ry.has(a)){var B=ry.get(a);Go(f.g,B)}else Go(f.g,"_")}else 4256<=m&&4351>=m&&f.g&&((m&255)!=160?Go(f.g,"_"):Go(f.g,"[CC]"));D=null}(a=D)&&n.push(a)}}}}catch(N){if(N instanceof K&&N.code===3e3)it("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw N}return n}function sy(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}jr.prototype.getStreams=function(){return Array.from(this.u)},ae("shaka.cea.CeaDecoder",jr),xn=function(){return new jr};function ay(e){for(var t=[],n=e,o=e=0;o<n.length;)e==2&&n[o]==3?(e=0,n=[].concat(L(n)),n.splice(o,1),n=new Uint8Array(n)):n[o]==0?e++:e=0,o++;for(e=n,o=0;o<e.length;){for(n=0;e[o]==255;)n+=255,o++;n+=e[o++];for(var a=0;e[o]==255;)a+=255,o++;a+=e[o++],n==4&&t.push(e.subarray(o,o+a)),o+=a}return t}function el(){this.j=new Map,this.i=this.h=0,this.g=Lh}el.prototype.init=function(e){function t(u){u=u.name,u in tl&&(n.g=tl[u])}var n=this,o=[],a=[];if(new St().box("moov",dt).box("mvex",dt).O("trex",function(u){var f=u.reader;f.skip(4),f.skip(4),u=f.L(),f=f.L(),n.h=u,n.i=f}).box("trak",dt).O("tkhd",function(u){u=G0(u.reader,u.version),o.push(u.trackId)}).box("mdia",dt).O("mdhd",function(u){u=wu(u.reader,u.version),a.push(u.timescale)}).box("minf",dt).box("stbl",dt).O("stsd",yr).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",du).box("sinf",dt).box("frma",function(u){u=X0(u.reader).ha,u in tl&&(n.g=tl[u])}).parse(e,!0),!o.length||!a.length||o.length!=a.length)throw new K(2,2,2010);this.g==Lh&&Le("Unable to determine bitstream format for CEA parsing!"),o.forEach(function(u,f){n.j.set(u,a[f])})},el.prototype.parse=function(e){var t=this;if(this.g==Lh)return[];var n=[],o=this.h,a=this.i,u=0,f=[],c=null,p=9e4;return new St().box("moof",function(m){u=m.start,f=[],dt(m)}).box("traf",dt).O("trun",function(m){m=$0(m.reader,m.version,m.flags),f.push(m)}).O("tfhd",function(m){m=H0(m.reader,m.flags),o=m.Kf||t.h,a=m.Mg||t.i,m=m.trackId,t.j.has(m)&&(p=t.j.get(m))}).O("tfdt",function(m){c=Cc(m.reader,m.version).baseMediaDecodeTime}).box("mdat",function(m){if(c===null)throw Le("Unable to find base media decode time for CEA captions!"),new K(2,2,2010);OC(t,m.reader,c,p,o,a,u-m.start-8,f,n)}).parse(e,!1),n};function OC(e,t,n,o,a,u,f,c,p){var m=0,v=u,S=c.map(function(b){return b.ig});for(S=[].concat.apply([],L(S)),S.length&&(v=S[0].sampleSize||u),t.skip(f+c[0].Lg);t.ia();){f=t.L();var C=t.ga(),T=null;switch(T=!1,c=1,e.g){case Ph:T=C&31,T=T==6;break;case na:c=2,t.skip(1),T=C>>1&63,T=T==39||T==40;break;default:return}if(T)for(C=0,m<S.length&&(C=S[m].Wd||0),C=(n+C)/o,c=w(ay(t.ub(f-c))),T=c.next();!T.done;T=c.next())p.push({packet:T.value,pts:C});else try{t.skip(f-c)}catch{break}v-=f+4,v==0&&(n=m<S.length?n+(S[m].hf||a):n+a,m++,m<S.length?v=S[m].sampleSize||u:v=u)}}ae("shaka.cea.Mp4CeaParser",el);var Lh=0,Ph=1,na=2,tl={avc1:Ph,avc3:Ph,hev1:na,hvc1:na,dvh1:na,dvhe:na};vn["video/mp4"]=function(){return new el};function nl(){}nl.prototype.init=function(){},nl.prototype.parse=function(e){var t=[];if(e=Ve(e),!Ic(e))return t;e=new xt().parse(e);var n=e.Pc(),o=e.Fd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=w(o),o=n.next();!o.done;o=n.next())if(o=o.value,e.includes(o.type)&&o.time!=null)for(var a=w(ay(o.data)),u=a.next();!u.done;u=a.next())t.push({packet:u.value,pts:o.time});return t},ae("shaka.cea.TsCeaParser",nl),vn["video/mp2t"]=function(){return new nl};function uy(e,t,n){var o=zC(e),a=null;e=[];var u=[],f=null,c=new Set(o.map(function(p){return p.keyId}));if(c.delete(null),1<c.size)throw new K(2,4,4010);if(!t){if(u=o.filter(function(p){return p.cd=="urn:mpeg:dash:sea:2012"}),1<u.length)throw new K(2,4,4050);u.length&&(f=HC(u[0])),u=o.filter(function(p){return p.cd=="urn:mpeg:dash:mp4protection:2011"?(a=p.init||a,!1):p.cd!="urn:mpeg:dash:sea:2012"}),u.length&&(e=FC(a,u,n,c),e.length==0&&(e=[ao("",a)]))}if(o.length&&!f&&(t||!u.length))for(e=[],t=w(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(ao(n,a));if(c=Array.from(c)[0]||null)for(t=w(e),n=t.next();!n.done;n=t.next())for(n=w(n.value.initData),o=n.next();!o.done;o=n.next())o.value.keyId=c;return{Jf:c,aj:a,drmInfos:e,ke:f,Nf:!0}}function UC(e,t,n,o){var a=uy(e,n,o);if(t.Nf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=a.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=a.drmInfos),t.Nf=!1;else if(0<a.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(u){return a.drmInfos.some(function(f){return f.keySystem==u.keySystem})}),t.drmInfos.length==0))throw new K(2,4,4008);return a.Jf||t.Jf}function BC(e){var t=0,n=Et(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var u=Ve(n,e,a);t.push({type:o,value:u}),e+=a}n=t}return n}function jC(e){e=w(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=w(t.value.childNodes);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n instanceof Element&&n.tagName=="LA_URL")return n.textContent}return""}function il(e){var t=$i(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=$i(e.node,"urn:microsoft:playready","pro"),!e||(e=ui(e.textContent),e=BC(e).filter(function(n){return n.type===$C})[0],!e)?"":(e=zi(e.value,!0),(e=wr(e,"WRMHEADER"))?jC(e):""))}function FC(e,t,n,o){var a=[];t=w(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var f=n[u.cd];if(f){var c;if(c=$i(u.node,"urn:microsoft:playready","pro")){c=ui(c.textContent);var p=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);c=[{initData:mu(c,p,new Set,0),initDataType:"cenc",keyId:u.keyId}]}else c=null;if(p=null,u.cd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(p=o,p.size==0)p=null;else{var m=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),v=new Uint8Array([]);p=[{initData:mu(v,m,p,1),initDataType:"cenc",keyId:u.keyId}]}c=ao(f,u.init||e||c||p),(f=GC.get(f))&&(c.licenseServerUri=f(u)),a.push(c)}}return a}function zC(e){var t=[];e=w(e);for(var n=e.next();!n.done;n=e.next())(n=VC(n.value))&&t.push(n);return t}function VC(e){var t=e.getAttribute("schemeIdUri"),n=Fo(e,"urn:mpeg:cenc:2013","default_KID"),o=w0(e,"urn:mpeg:cenc:2013","pssh").map(zo);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new K(2,4,4009);var a=[];try{a=o.map(function(u){return{initDataType:"cenc",initData:ui(u),keyId:null}})}catch{throw new K(2,4,4007)}return{node:e,cd:t,keyId:n,init:0<a.length?a:null}}function HC(e){if(!d.crypto||!d.crypto.subtle)throw Le("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new K(2,4,4042);var t=$i(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new K(2,4,4051);if(t.getAttribute("schemeIdUri")!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new K(2,4,4051);if(t=$i(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new K(2,4,4051);if(e=t.getAttribute("IV"),t=t.getAttribute("keyUriTemplate"),!e||!t)throw new K(2,4,4051);if(e=jo(e.substr(2)),e.byteLength!=16)throw new K(2,4,4048);return{zh:t,iv:e}}var $C=1,GC=new Map().set("com.widevine.alpha",function(e){var t=$i(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=$i(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",il).set("com.microsoft.playready.recommendation",il).set("com.microsoft.playready.software",il).set("com.microsoft.playready.hardware",il).set("org.w3.clearkey",function(e){var t=$i(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=$i(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.getAttribute("Lic_type")==="EME-1.0"&&e.textContent?e.textContent:""});function ol(e,t,n,o,a,u){var f={RepresentationID:t,Number:n,SubNumber:o,Bandwidth:a,Time:u};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(c,p,m,v){if(c=="$$")return"$";var S=f[p];if(S==null)return c;switch(p=="RepresentationID"&&m&&(m=void 0),p=="Time"&&typeof S!="bigint"&&(.2<=Math.abs(S-Math.round(S))&&Le("Calculated $Time$ values must be close to integers"),S=Math.round(S)),v){case void 0:case"d":case"i":case"u":c=S.toString();break;case"o":c=S.toString(8);break;case"x":c=S.toString(16);break;case"X":c=S.toString(16).toUpperCase();break;default:c=S.toString()}return m=d.parseInt(m,10)||1,Array(Math.max(0,m-c.length)+1).join("0")+c})}function ly(e,t){var n=Pi(e,t,"timescale"),o=1;n&&(o=Wi(n)||1);var a=Pi(e,t,"duration");n=Wi(a||""),e.M.contentType=="image"&&(n=Ps(a||"")),n&&(n/=o);var u=Pi(e,t,"startNumber");a=Number(Pi(e,t,"presentationTimeOffset"))||0;var f=dn(u||"");(u==null||f==null)&&(f=1);var c=rl(e,t,"SegmentTimeline");if(t=null,c){t=o,e=e.ba.duration||1/0,u=f,c=kt(c,"S");for(var p=[],m=-a,v=0;v<c.length;++v){var S=c[v],C=c[v+1],T=st(S,"t",dn),b=st(S,"d",dn),_=st(S,"r",yu);if(S=st(S,"k",yu)||0,T!=null&&(T-=a),!b)break;if(T=T??m,_=_||0,0>_)if(C){if(C=st(C,"t",dn),C==null)break;if(T>=C)break;_=Math.ceil((C-T)/b)-1}else{if(e==1/0)break;if(T/t>=e)break;_=Math.ceil((e*t-T)/b)-1}for(0<p.length&&T!=m&&(p[p.length-1].end=T/t),C=0;C<=_;++C)m=T+b,p.push({start:T/t,end:m/t,zf:T,fb:S,Vh:p.length+u}),T=m}t=p}return{timescale:o,ya:n,gd:f,vb:a/o||0,yf:a,timeline:t}}function fy(e,t){return[t(e.M),t(e.oa),t(e.ta)].filter(sr)}function Pi(e,t,n){t=fy(e,t),e=null,t=w(t);for(var o=t.next();!o.done&&!(e=o.value.getAttribute(n));o=t.next());return e}function rl(e,t,n){t=fy(e,t),e=null,t=w(t);for(var o=t.next();!o.done&&!(e=li(o.value,n));o=t.next());return e}function WC(e,t,n,o,a,u){for(var f=Fo(e,"http://www.w3.org/1999/xlink","href"),c=Fo(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",p=w(Array.from(e.attributes)),m=p.next();!m.done;m=p.next())m=m.value,m.namespaceURI=="http://www.w3.org/1999/xlink"&&e.removeAttributeNS(m.namespaceURI,m.localName);if(5<=u)return No(new K(2,4,4028));if(c!="onLoad")return No(new K(2,4,4027));var v=on([o],[f]);return a.request(0,Yt(v,t)).pa(function(S){if(S=pc(S.data,e.tagName),!S)return No(new K(2,4,4001,f));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;S.childNodes.length;){var C=S.childNodes[0];S.removeChild(C),e.appendChild(C)}for(S=w(Array.from(S.attributes)),C=S.next();!C.done;C=S.next())e.setAttributeNode(C.value.cloneNode(!1));return sl(e,t,n,v[0],a,u+1)})}function sl(e,t,n,o,a,u){if(u=u===void 0?0:u,Fo(e,"http://www.w3.org/1999/xlink","href")){var f=WC(e,t,n,o,a,u);return n&&(f=f.pa(void 0,function(){return sl(e,t,n,o,a,u)})),f}f=[];for(var c=w(Array.from(e.childNodes)),p=c.next();!p.done;p=c.next())p=p.value,p instanceof Element&&(Fo(p,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.removeChild(p):p.tagName!="SegmentTimeline"&&f.push(sl(p,t,n,o,a,u)));return a0(f).pa(function(){return e})}function XC(e,t,n,o,a,u,f){var c,p=new St().O("sidx",function(m){c=KC(t,o,a,u,f,n,m)});if(e&&p.parse(e),c)return c;throw new K(2,3,3004)}function KC(e,t,n,o,a,u,f){var c=[];f.reader.skip(4);var p=f.reader.L();if(p==0)throw new K(2,3,3005);if(f.version==0)var m=f.reader.L(),v=f.reader.L();else m=f.reader.oc(),v=f.reader.oc();f.reader.skip(2);var S=f.reader.Ea();for(e=e+f.size+v,v=0;v<S;v++){var C=f.reader.L(),T=(C&2147483648)>>>31;C&=2147483647;var b=f.reader.L();if(f.reader.skip(4),T==1)throw new K(2,3,3006);c.push(new We(m/p+n,(m+b)/p+n,function(){return u},e,e+C-1,t,n,o,a)),m+=b,e+=C}return f.parser.stop(),c}function co(e){this.h=Et(e),this.g=new yt(this.h,0)}co.prototype.ia=function(){return this.g.ia()};function Ji(e){var t=cy(e);if(7<t.length)throw new K(2,3,3002);var n=0;t=w(t);for(var o=t.next();!o.done;o=t.next())n=256*n+o.value;t=cy(e);e:{o=w(YC);for(var a=o.next();!a.done;a=o.next())if(nt(t,new Uint8Array(a.value))){o=!0;break e}o=!1}if(o)t=e.h.byteLength-e.g.qa();else{if(t.length==8&&t[1]&224)throw new K(2,3,3001);for(a=o=0;a<t.length;a++){var u=t[a];o=a==0?u&(1<<8-t.length)-1:256*o+u}t=o}return t=e.g.qa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.qa(),o=Et(e.h,e.g.qa(),t),e.g.skip(t),new qC(n,o)}function cy(e){var t=e.g.qa(),n=e.g.ga();if(n==0)throw new K(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ve(e.h,t,n)}var YC=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function qC(e,t){this.id=e,this.g=t}function Dh(e){if(8<e.g.byteLength)throw new K(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new K(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var o=e.g.getUint8(n);t=256*t+o}return t}function QC(e,t,n,o,a,u,f,c,p){function m(){return a}var v=[];e=new co(e.g);for(var S=null,C=null;e.ia();){var T=Ji(e);if(T.id==187){var b=ZC(T);b&&(T=n*b.di,b=t+b.Lh,S!=null&&v.push(new We(S+f,T+f,m,C,b-1,u,f,c,p)),S=T,C=b)}}return S!=null&&v.push(new We(S+f,o+f,m,C,null,u,f,c,p)),v}function ZC(e){var t=new co(e.g);if(e=Ji(t),e.id!=179)throw new K(2,3,3013);if(e=Dh(e),t=Ji(t),t.id!=183)throw new K(2,3,3012);t=new co(t.g);for(var n=0;t.ia();){var o=Ji(t);if(o.id==241){n=Dh(o);break}}return{di:e,Lh:n}}function hy(e,t,n){if(t=rl(e,t,"Initialization"),!t)return null;var o=e.M.cb(),a=t.getAttribute("sourceURL");a&&(o=on(o,[a])),a=0;var u=null;return(t=st(t,"range",gu))&&(a=t.start,u=t.end),new $n(function(){return o},a,u,gy(e),null,null,n)}function JC(e,t,n){var o=Number(Pi(e,Fr,"presentationTimeOffset"))||0,a=Pi(e,Fr,"timescale"),u=1;a&&(u=Wi(a)||1);var f=o/u||0,c=hy(e,Fr,n);eE(e,c);var p=Up(e);return{dc:function(){var m=rl(p,Fr,"RepresentationIndex"),v=p.M.cb();return m&&(m=m.getAttribute("sourceURL"))&&(v=on(v,[m])),m=py(p),dy(p,t,c,v,m.start,m.end,f)}}}function dy(e,t,n,o,a,u,f){var c,p,m,v,S,C,T,b,_,D,B,N,G,V,q;return z(function(te){if(te.g==1)return c=e.presentationTimeline,p=!e.zb||!e.ba.Le,m=e.ba.start,v=e.ba.duration,S=e.M.mimeType.split("/")[1],C=t,T=null,b=[C(o,a,u,!1),S=="webm"?C(n.Z(),n.Qa,n.wa,!0):null],C=null,E(te,Promise.all(b),2);if(_=te.h,D=_[0],B=_[1]||null,N=null,G=m-f,V=m,q=v?m+v:1/0,S=="mp4")var de=XC(D,a,o,n,G,V,q);else{if(de=new co(B),Ji(de).id!=440786851)throw new K(2,3,3008);var ce=Ji(de);if(ce.id!=408125543)throw new K(2,3,3009);de=ce.g.byteOffset,ce=new co(ce.g);for(var he=null;ce.ia();){var me=Ji(ce);if(me.id==357149030){he=me;break}}if(!he)throw new K(2,3,3010);for(he=new co(he.g),me=1e6,ce=null;he.ia();){var we=Ji(he);if(we.id==2807729)me=Dh(we);else if(we.id==17545)if(we.g.byteLength==4)ce=we.g.getFloat32(0);else if(we.g.byteLength==8)ce=we.g.getFloat64(0);else throw new K(2,3,3003)}if(ce==null)throw new K(2,3,3011);if(he=me/1e9,ce*=he,me=Ji(new co(D)),me.id!=475249515)throw new K(2,3,3007);de=QC(me,de,he,ce,o,n,G,V,q)}return N=de,c.Xc(N),T=new lt(N),p&&T.bc(V,q,!0),te.return(T)})}function Fr(e){return e.ed}function py(e){var t=rl(e,Fr,"RepresentationIndex");return e=Pi(e,Fr,"indexRange"),e=gu(e||""),t&&(e=st(t,"range",gu,e)),e}function eE(e,t){if(my(e,t),!py(e))throw new K(2,4,4002)}function my(e,t){var n=e.M.mimeType.split("/")[1];if(e.M.contentType!=at&&n!="mp4"&&n!="webm")throw new K(2,4,4006);if(n=="webm"&&!t)throw new K(2,4,4005)}function gy(e){var t=e.M;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Td,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function tE(e,t,n){var o=hy(e,yy,n),a=nE(e);if(!a.ya&&!a.timeline&&1<a.lc.length)throw new K(2,4,4002);if(!a.ya&&!e.ba.duration&&!a.timeline&&a.lc.length==1)throw new K(2,4,4002);if(a.timeline&&a.timeline.length==0)throw new K(2,4,4002);var u=null,f=null;e.ta.id&&e.M.id&&(f=t[e.ta.id+","+e.M.id])&&(u=f.segmentIndex);var c=iE(e.ba.start,e.ba.duration,e.M.cb,a,o,n);return t=!u,u?u.Wc(c,e.presentationTimeline.eb()):u=new lt(c),e.presentationTimeline.Xc(c),e.zb&&e.ba.Le||u.bc(e.ba.start,e.ba.duration?e.ba.start+e.ba.duration:1/0,t),f&&(f.segmentIndex=u),{dc:function(){return u&&u.Ab()!=0||u.Qd(c),Promise.resolve(u)}}}function yy(e){return e.Fb}function nE(e){var t=oE(e);e=ly(e,yy);var n=e.gd;n==0&&(n=1);var o=0;return e.ya?o=e.ya*(n-1):e.timeline&&0<e.timeline.length&&(o=e.timeline[0].start),{ya:e.ya,startTime:o,gd:n,vb:e.vb,timeline:e.timeline,lc:t}}function iE(e,t,n,o,a,u){var f=o.lc.length;o.timeline&&o.timeline.length!=o.lc.length&&(f=Math.min(o.timeline.length,o.lc.length));for(var c=e-o.vb,p=t?e+t:1/0,m=[],v=o.startTime,S={},C=0;C<f;S={Ec:S.Ec,Ac:S.Ac},C++){S.Ac=o.lc[C];var T=void 0;T=o.ya!=null?v+o.ya:o.timeline?o.timeline[C].end:v+t,S.Ec=null,m.push(new We(e+v,e+T,function(b){return function(){return b.Ec==null&&(b.Ec=on(n(),[b.Ac.Dh])),b.Ec}}(S),S.Ac.start,S.Ac.end,a,c,e,p,[],"",null,null,lo,u)),v=T}return m}function oE(e){return[e.M.Fb,e.oa.Fb,e.ta.Fb].filter(sr).map(function(t){return kt(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.getAttribute("indexRange")&&!e.Wf&&(e.Wf=!0);var n=t.getAttribute("media");return t=st(t,"mediaRange",gu,{start:0,end:null}),{Dh:n,start:t.start,end:t.end}})}function rE(e,t,n,o,a,u,f){var c=lE(e,f),p=sE(e);aE(p);var m=Up(e);if(p.Uc)return my(e,c),{dc:function(){var b=ol(p.Uc,m.M.id,null,null,m.bandwidth||null,null);return b=on(m.M.cb(),[b]),dy(m,t,c,b,0,null,p.vb)}};if(p.ya)return o||e.oa.contentType==="image"||(e.presentationTimeline.Ye(p.ya),e.presentationTimeline.Sd(e.ba.start)),{dc:function(){return uE(m,p,a,c,u,f)}};var v=null;o=o=null,e.ta.id&&e.M.id&&(o=e.ta.id+","+e.M.id,o=n[o])&&(v=o.segmentIndex);var S=e.ba.start,C=e.ba.duration?S+e.ba.duration:1/0,T=!(e.zb&&e.ba.Le);return v?(n=v,vy(n,p,S,C,T,c),n.bb(e.presentationTimeline.eb())):v=new ul(p,e.M.id,e.bandwidth,e.M.cb,S,C,c,T,f,e.M.jf),p.timeline&&e.oa.contentType!=="image"&&e.presentationTimeline.dg(p.timeline,S),o&&e.zb&&(o.segmentIndex=v),{dc:function(){return v instanceof ul&&v.Ab()==0&&vy(v,p,S,C,T,c),Promise.resolve(v)}}}function al(e){return e.fd}function sE(e){var t=ly(e,al),n=Pi(e,al,"media");return e=Pi(e,al,"index"),{ya:t.ya,timescale:t.timescale,gd:t.gd,vb:t.vb,yf:t.yf,timeline:t.timeline,mc:n,Uc:e}}function aE(e){var t=e.Uc?1:0;if(t+=e.timeline?1:0,t+=e.ya?1:0,t==0)throw new K(2,4,4002);if(t!=1&&(e.Uc&&(e.timeline=null),e.ya=null),!e.Uc&&!e.mc)throw new K(2,4,4002)}function uE(e,t,n,o,a,u){function f(me){var we=(me-b)*T,Ie=we+t.vb,Ne=we+v;we=Ne+T;var ze=Math.min(we,p());return Ne=new We(Ne,ze,function(){var $e=Ie*_;return"BigInt"in d&&$e>Number.MAX_SAFE_INTEGER&&($e=BigInt(Ie)*BigInt(_)),$e=ol(D,N,me,null,B,$e),on(G(),[$e])},0,null,o,V,v,p(),[],"",null,null,lo,u),Ne.h=we,Ne}function c(){var me=[Math.max(m.eb(),v),Math.min(m.Bb(),p())].map(function(we){return we-v});return[Math.ceil(me[0]/T),Math.ceil(me[1]/T)-1].map(function(we){return we+b})}function p(){var me=S!=null&&a[S]||C;return me?v+me:1/0}var m=e.presentationTimeline,v=e.ba.start,S=e.ta.id,C=e.ba.duration,T=t.ya,b=t.gd,_=t.timescale,D=t.mc,B=e.bandwidth||null,N=e.M.id,G=e.M.cb,V=v-t.vb,q=c();e=e.zb?Math.max(q[0],q[1]-n+1):q[0],q=q[1],n=[];for(var te=e;te<=q;++te){var de=f(te);n.push(de)}var ce=new lt(n);if(n=m.Bb()<p(),te=m.R(),n||te){var he=Math.max(e,q+1);ce.Yd(T,function(){var me=m.eb();ce.bb(me);var we=w(c());we.next(),we=we.next().value;for(var Ie=[];he<=we;){var Ne=f(he);Ie.push(Ne),he++}return me>p()&&!Ie.length?null:Ie})}return Promise.resolve(ce)}function lE(e,t){var n=Pi(e,al,"initialization");if(!n)return null;var o=e.M.id,a=e.bandwidth||null,u=e.M.cb;return new $n(function(){var f=ol(n,o,null,null,a,null);return on(u(),[f])},0,null,gy(e),null,null,t)}function ul(e,t,n,o,a,u,f,c,p,m){lt.call(this,[]),this.h=e,this.F=t,this.A=n,this.C=o,this.i=a,this.l=u,this.s=f,this.u=p,this.G=m,c&&xy(this)}Z(ul,lt),s=ul.prototype,s.Ab=function(){return this.h?this.h.timeline.length:0},s.release=function(){lt.prototype.release.call(this),this.h=null},s.bb=function(e){if(this.h){for(var t=0,n=this.h.timeline,o=0;o<n.length&&n[o].end+this.i<=e;o+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.Ab()===0&&this.release())}};function vy(e,t,n,o,a,u){if(e.s=u,e.h){n=e.h.timeline,e.h.mc=t.mc;var f=n[n.length-1];t=t.timeline.filter(function(c){return c.start>=f.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,L(t)),e.l!==o&&(e.l=o)}else e.h=t,e.i=n,e.l=o;a&&xy(e)}function xy(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.bb(e.i)}}s.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,o=0;o<t.length;o++){var a=t[o],u=a.start+this.i;if(a=o<n?t[o+1].start+this.i:this.l===1/0?a.end+this.i:this.l,e>=u&&e<a)return o+this.j}return null},s.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.Ab()||!this.h)return null;var n=this.g[e];if(!n){var o=this.h.mc,a=this.h.timeline[e],u=a.Vh,f=this.h.yf+a.zf;n=this.i-this.h.vb;var c=this.i+a.end,p=c;e===this.Ab()-1&&this.l!==1/0&&(p=this.l);for(var m=[],v=(a.end-a.start)/a.fb,S={},C=0;C<a.fb;S={Fc:S.Fc,fe:S.fe},C++){var T=a.start+v*C,b=T+v;S.fe=C+1,S.Fc=null,T=new We(this.i+T,this.i+b,function(_){return function(){return t.h?(_.Fc==null&&(_.Fc=wy(t.h.mc,t.F,u,t.A,f,_.fe,t.C)),_.Fc):[]}}(S),0,null,this.s,n,this.i,this.l,[],"",null,null,lo,this.u),this.G==0?0<C&&T.Od():C%this.G!=0&&T.Od(),m.push(T)}n=new We(this.i+a.start,p,function(){return 0<a.fb?[]:wy(o,t.F,u,t.A,f,null,t.C)},0,null,this.s,n,this.i,this.l,m,"",null,null,lo,this.u,0<a.fb),n.h=c,this.g[e]=n}return n};function wy(e,t,n,o,a,u,f){return e=ol(e,t,n,u,o||null,a),on(f(),[e]).map(function(c){return c.toString()})}function ia(e){this.o=null,this.u=e,this.G=new pr,this.j=[],this.h=null,this.m=[],this.A=null,this.F=[],this.C=300,this.l=new Map,this.i=new Map,this.g=null,this.s="UNKNOWN"}ia.prototype.configure=function(e){this.o=e},ia.prototype.destroy=function(){return this.u=this.o=null,this.j=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},ia.prototype.setManifestType=function(e){this.s=e};function oa(e,t){var n,o,a,u,f,c,p;return z(function(m){if(m.g==1)return n=on(e.j,[fE(e,t)]),o=Yt(n,e.o.retryParameters),a=e.u.networkingEngine.request(8,o),Oo(e.G,a),re(m,2),E(m,a.promise,4);if(m.g!=2)return u=m.h,f=It(u.data),c=JSON.parse(f),c.VERSION==1&&cE(e,c,u.uri),ie(m,0);if((p=se(m))&&p.code==7001)return m.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new rt(function(){oa(e,t)}),e.g.U(e.C),j(m)})}function fE(e,t){if(!e.m.length)return t;t=new Ut(t);var n=e.A||e.m[0],o=Math.round(e.u.getBandwidthEstimate()),a=t.g;return e.s=="DASH"?(a.add("_DASH_pathway",n),a.add("_DASH_throughput",String(o))):e.s=="HLS"&&(a.add("_HLS_pathway",n),a.add("_HLS_throughput",String(o))),Rp(a)&&Ts(t,a),t.toString()}function cE(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var o=t["RELOAD-URI"]||n;e.g=new rt(function(){oa(e,o)}),(n=t.TTL)&&(e.C=n),e.g.U(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function zr(e,t,n,o){var a=e.l.get(t);a||(a=new Map),a.set(n,o),e.l.set(t,a)}function ra(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var o=[],a={},u=w(e.m),f=u.next();!f.done;a={Jb:a.Jb},f=u.next())if(a.Jb=f.value,f=t.get(a.Jb))o.push({df:a.Jb,location:f});else if(f=e.F.find(function(p){return function(m){return m.vi==p.Jb}}(a))){var c=t.get(f["BASE-ID"]);c&&(f["URI-REPLACEMENT"].xg?(c=new Ut(c),Wa(c,f["URI-REPLACEMENT"].xg),o.push({df:a.Jb,location:c.toString()})):o.push({df:a.Jb,location:c}))}for(a=Date.now(),u=w(e.i.keys()),f=u.next();!f.done;f=u.next())f=f.value,c=e.i.get(f),a>c&&e.i.delete(f);if(o=o.filter(function(p){for(var m=w(e.i.keys()),v=m.next();!v.done;v=m.next())if(v.value.includes(new Ut(p.location).ob))return!1;return!0}),o.length&&(e.A=o[0].df),o=o.map(function(p){return p.location}),!o.length&&e.h)for(a=w(e.h.split(",")),f=a.next();!f.done;f=a.next())(u=t.get(f.value))&&(e.A=e.h,o.push(u));if(!o.length)for(t=w(t.values()),a=t.next();!a.done;a=t.next())o.push(a.value);return n?o:on(e.j,o)}function di(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.m=!1,this.o=new Set}s=di.prototype,s.release=function(){for(var e=w(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},s.mh=function(){return this.j},s.Ie=function(){return this.l.slice()},s.Vg=function(){return this.i};function Sy(e,t){var n=[],o=[],a=[],u=[];e=w(e);for(var f=e.next();!f.done;f=e.next()){var c=f.value;f=new Map(c.audioStreams.map(function(S){return[Uh(S),S]}));var p=new Map(c.videoStreams.map(function(S){return[Oh(S),S]})),m=new Map(c.textStreams.map(function(S){return[la(S),S]}));if(c=new Map(c.imageStreams.map(function(S){return[fa(S),S]})),t){var v=Iy(at);m.set(la(v),v),v=Iy("image"),c.set(fa(v),v)}n.push(f),o.push(p),a.push(m),u.push(c)}return{Df:n,vg:o,sg:a,Vf:u}}s.Gf=function(e,t){var n=this,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V,q,te,de,ce,he,me,we,Ie,Ne,ze,$e;return z(function(Ze){if(Ze.g==1){if(o=$t,!t&&e.length==1)return a=Sy(e,!1),u=a.Df,f=a.vg,c=a.sg,p=a.Vf,n.h=Array.from(u[0].values()),n.g=Array.from(f[0].values()),n.l=Array.from(c[0].values()),n.i=Array.from(p[0].values()),Ze.B(2);for(m=-1,v=0;v<e.length;v++)S=e[v],n.o.has(S.id)||(n.o.add(S.id),m==-1&&(m=v));return m==-1?Ze.return():(C=Sy(e,!0),T=C.Df,b=C.vg,_=C.sg,D=C.Vf,E(Ze,Promise.all([ho(n,n.h,T,m,sa,Vr),ho(n,n.g,b,m,sa,Vr),ho(n,n.l,_,m,sa,Vr),ho(n,n.i,D,m,sa,Vr)]),2))}if(B=0,N=[],n.g.length&&n.h.length)for(ce=w(n.h),he=ce.next();!he.done;he=ce.next())for(me=he.value,we=w(n.g),Ie=we.next();!Ie.done;Ie=we.next())Ne=Ie.value,ze=yc(me.drmInfos,Ne.drmInfos),me.drmInfos.length&&Ne.drmInfos.length&&!ze.length||($e=B++,N.push({id:$e,language:me.language,disabledUntilTime:0,primary:me.primary,audio:me,video:Ne,bandwidth:(me.bandwidth||0)+(Ne.bandwidth||0),drmInfos:ze,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(G=n.g.length?n.g:n.h,V=w(G),q=V.next();!q.done;q=V.next())te=q.value,de=B++,N.push({id:de,language:te.language,disabledUntilTime:0,primary:te.primary,audio:te.type==o.P?te:null,video:te.type==o.$?te:null,bandwidth:te.bandwidth||0,drmInfos:te.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=N,j(Ze)})};function Ty(e){var t,n,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V,q,te,de,ce,he,me,we,Ie,Ne,ze;return z(function($e){switch($e.g){case 1:if(t=$t,e.length==1)return $e.return(e[0]);for(n=e.map(function(Ze){return new Map(Ze.filter(function(Oe){return Oe.type===t.P}).map(function(Oe){return[Uh(Oe),Oe]}))}),o=e.map(function(Ze){return new Map(Ze.filter(function(Oe){return Oe.type===t.$}).map(function(Oe){return[Oh(Oe),Oe]}))}),a=e.map(function(Ze){return new Map(Ze.filter(function(Oe){return Oe.type===t.na}).map(function(Oe){return[la(Oe),Oe]}))}),u=e.map(function(Ze){return new Map(Ze.filter(function(Oe){return Oe.type===t.he}).map(function(Oe){return[fa(Oe),Oe]}))}),f=w(a),c=f.next();!c.done;c=f.next())p=c.value,m=by(t.na),p.set(la(m),m);for(v=w(u),S=v.next();!S.done;S=v.next())C=S.value,T=by(t.he),C.set(fa(T),T);return b=new di,E($e,ho(b,[],n,0,ll,fl),2);case 2:return _=$e.h,E($e,ho(b,[],o,0,ll,fl),3);case 3:return D=$e.h,E($e,ho(b,[],a,0,ll,fl),4);case 4:return B=$e.h,E($e,ho(b,[],u,0,ll,fl),5);case 5:if(N=$e.h,G=0,D.length&&_.length)for(ce=w(_),he=ce.next();!he.done;he=ce.next())for(me=he.value,we=w(D),Ie=we.next();!Ie.done;Ie=we.next())Ne=Ie.value,ze=G++,Ne.variantIds.push(ze),me.variantIds.push(ze);else for(V=D.concat(_),q=w(V),te=q.next();!te.done;te=q.next())de=te.value,de.variantIds=[G++];return $e.return(D.concat(_).concat(B).concat(N))}})}function ho(e,t,n,o,a,u){var f,c,p,m,v,S,C,T,b,_,D,B,N,G,V,q,te,de;return z(function(ce){switch(ce.g){case 1:for(f=[],c=0;c<o;c++)f.push(new Set);for(p=o;p<n.length;p++)f.push(new Set(n[p].values()));m=w(t),v=m.next();case 2:if(v.done){ce.B(4);break}return S=v.value,E(ce,hE(e,S,n,o,u,f),5);case 5:if(C=ce.h,!C)throw new K(2,4,4037);v=m.next(),ce.B(2);break;case 4:for(T=w(f),b=T.next();!b.done;b=T.next())for(_=b.value,D=w(_),B=D.next();!B.done;B=D.next())N=B.value,(G=dE(e,N,n,a,u,f))&&t.push(G);for(V=w(f),b=V.next();!b.done;b=V.next())for(q=b.value,te={},de=w(q),B=de.next();!B.done;te={od:te.od},B=de.next())if(te.od=B.value,!My(te.od)&&t.some(function(he){return function(me){return Nh(e,he.od,me)}}(te)))throw new K(2,4,4037);return ce.return(t)}})}function hE(e,t,n,o,a,u){return z(function(f){return f.g==1?(Ay(e,n,t),t.matchedStreams?t.segmentIndex?E(f,Cy(t,o),2):f.B(2):f.return(!1)):(Ey(t,o,a,u),f.return(!0))})}function Cy(e,t){var n,o,a,u,f,c,p;return z(function(m){if(m.g==1){for(n=[],o=e.matchedStreams,a=w(o),u=a.next();!u.done;u=a.next())f=u.value,n.push(f.createSegmentIndex()),f.trickModeVideo&&!f.trickModeVideo.segmentIndex&&n.push(f.trickModeVideo.createSegmentIndex());return E(m,Promise.all(n),2)}if(e.segmentIndex instanceof Bt)for(c={},p=t;p<o.length;c={jb:c.jb},p++)c.jb=o[p],c.jb.segmentIndex&&(Dc(c.jb.segmentIndex,function(v){return function(S){S.codecs=v.jb.codecs,S.mimeType=v.jb.mimeType,S.aa&&(S.aa.codecs=v.jb.codecs,S.aa.mimeType=v.jb.mimeType)}}(c)),e.segmentIndex.h.push(c.jb.segmentIndex));j(m)})}function dE(e,t,n,o,a,u){if(My(t))return null;var f=o(t);return Ay(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return z(function(c){return f.segmentIndex?c.B(0):(f.segmentIndex=new Bt,E(c,Cy(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(Ey(f,0,a,u),f)}function Ey(e,t,n,o){for(var a=e.matchedStreams;t<a.length;t++){var u=a[t];n(e,u);var f=!0;if(e.type=="audio"&&Lo(e.language,u.language)==0&&(f=!1),f){o[t].delete(u),f=new Set(e.codecs.split(",")),u=w(u.codecs.split(","));for(var c=u.next();!c.done;c=u.next())(c=c.value)&&f.add(c);c=Array.from(f),f=new Set,u=[],c=w(c);for(var p=c.next();!p.done;p=c.next()){p=p.value;var m=xi(p);f.has(m)||(u.push(p),f.add(m))}e.codecs=u.join(",")}}}function sa(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=w(t.matchedStreams),o=n.next();!o.done;o=n.next())o=o.value,o.segmentIndex&&(o.segmentIndex.release(),o.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function ll(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Vr(e,t){function n(f,c){f||(f=[]),c=w(c);for(var p=c.next();!p.done;p=c.next())p=p.value,f.includes(p)||f.push(p);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var o=w(t.keyIds),a=o.next();!a.done;a=o.next())e.keyIds.add(a.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),o=yc(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!o.length)throw new K(2,4,4038);if(e.drmInfos=o,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),o=w(t.closedCaptions),a=o.next();!a.done;a=o.next()){var u=w(a.value);a=u.next().value,u=u.next().value,e.closedCaptions.set(a,u)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=sa(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Vr(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Vr(e.trickModeVideo,t)}function fl(e,t){var n=e.roles;n||(n=[]);for(var o=w(t.roles),a=o.next();!a.done;a=o.next())a=a.value,n.includes(a)||n.push(a);for(e.roles=n,n=w(t.keyIds),o=n.next();!o.done;o=n.next())e.keyIds.add(o.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,L(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=w(t.closedCaptions),n=t.next();!n.done;n=t.next())o=w(n.value),n=o.next().value,o=o.next().value,e.closedCaptions.set(n,o)}function Ay(e,t,n){var o=[];t=w(t);for(var a=t.next();!a.done;a=t.next()){if(a=pE(e,a.value,n),!a)return;o.push(a)}n.matchedStreams=o}function pE(e,t,n){var o=null,a=(0,{audio:Uh,video:Oh,text:la,image:fa}[n.type])(n);if(t.has(a))o=t.get(a);else{a={audio:function(c,p){return Nh(e,c,p)},video:function(c,p){return Nh(e,c,p)},text:mE,image:gE}[n.type];var u={audio:yE,video:vE,text:xE,image:wE}[n.type];t=w(t.values());for(var f=t.next();!f.done;f=t.next())f=f.value,!a(n,f)||n.fastSwitching!=f.fastSwitching||o&&!u(n,o,f)||(o=f)}return o}function aa(e,t){function n(o){if(!Bh.has(o)){var a=oi(o);Bh.set(o,a)}return Bh.get(o)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}function Nh(e,t,n){return!(!aa(t,n)&&!e.m||t.drmInfos&&!P0(t.drmInfos,n.drmInfos))}function mE(e,t){return t.language?!(e.forced!==t.forced||Lo(e.language,t.language)==0||t.kind!=e.kind):!0}function gE(){return!0}function yE(e,t,n){var o=aa(e,t),a=aa(e,n);if(o&&!a)return!1;if(!o&&a||(o=Lo(e.language,t.language),a=Lo(e.language,n.language),a>o))return!0;if(a<o)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(o=t.roles.filter(function(u){return e.roles.includes(u)}),a=n.roles.filter(function(u){return e.roles.includes(u)}),a.length>o.length?!0:a.length<o.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(o=ua(e.channelsCount,t.channelsCount,n.channelsCount),o==Ci?!0:o==eo?!1:(o=ua(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),o==Ci?!0:o==eo?!1:!!(e.bandwidth&&ky(e.bandwidth,t.bandwidth,n.bandwidth)==Ci)))}function vE(e,t,n){var o=aa(e,t),a=aa(e,n);if(o&&!a)return!1;if(!o&&a||(o=ua(e.width*e.height,t.width*t.height,n.width*n.height),o==Ci))return!0;if(o==eo)return!1;if(e.frameRate){if(o=ua(e.frameRate,t.frameRate,n.frameRate),o==Ci)return!0;if(o==eo)return!1}return!!(e.bandwidth&&ky(e.bandwidth,t.bandwidth,n.bandwidth)==Ci)}function xE(e,t,n){var o=Lo(e.language,t.language),a=Lo(e.language,n.language);if(a>o)return!0;if(a<o)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(u){return e.roles.includes(u)}),a=n.roles.filter(function(u){return e.roles.includes(u)}),a.length>o.length)return!0;if(a.length<o.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function wE(e,t,n){return ua(e.width*e.height,t.width*t.height,n.width*n.height)==Ci}function by(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Iy(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new lt([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1}}function ua(e,t,n){if(t==e&&e!=n)return eo;if(n==e&&e!=t)return Ci;if(t>e){if(n<=e||n-e<t-e)return Ci;if(n-e>t-e)return eo}else{if(n>e)return eo;if(e-n<e-t)return Ci;if(e-n>e-t)return eo}return _y}function ky(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Ci:t<e?eo:_y}function My(e){switch(e.type){case at:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Oh(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function Uh(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function la(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function fa(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}ae("shaka.util.PeriodCombiner",di),di.prototype.combinePeriods=di.prototype.Gf,di.prototype.getImageStreams=di.prototype.Vg,di.prototype.getTextStreams=di.prototype.Ie,di.prototype.getVariants=di.prototype.mh;var Ci=1,_y=0,eo=-1,Bh=new Map;function cl(){var e=this;this.i=this.h=null,this.o=[],this.j=null,this.I=1,this.m={},this.K={},this.l=new di,this.F=0,this.H=new Ue(5),this.G=new rt(function(){IE(e)}),this.C=new pr,this.u=null,this.J=[],this.A=1/0,this.s=!1,this.g=null}s=cl.prototype,s.configure=function(e){this.h=e,this.g&&this.g.configure(this.h),this.l&&(this.l.m=this.h.dash.multiTypeVariantsAllowed&&Nt())},s.start=function(e,t){var n=this,o;return z(function(a){if(a.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,E(a,jh(n),2);if(o=a.h,n.i&&Fh(n,o),!n.i)throw new K(2,7,7001);return a.return(n.j)})},s.stop=function(){for(var e=w(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.h=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.G!=null&&(this.G.stop(),this.G=null),this.g&&this.g.destroy(),this.C.destroy()},s.update=function(){var e=this,t;return z(function(n){if(n.g==1)return re(n,2),E(n,jh(e),4);if(n.g!=2)return ie(n,0);if(t=se(n),!e.i||!t)return n.return();e.i.onError(t),j(n)})},s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Bb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.F=t.endTime-e,Fh(this,0))}}},s.banLocation=function(e){this.g&&this.g.i.set(e,Date.now()+6e4)};function jh(e){var t,n,o,a,u,f,c;return z(function(p){return p.g==1?(t=e.o,1<e.o.length&&e.g&&(n=ra(e.g,"Location",!0),n.length&&(t=n)),o=Yt(t,e.h.retryParameters),a=Date.now(),E(p,Vh(e,o,0,{type:4}),2)):p.g!=3?(u=p.h,e.i?(u.uri&&u.uri!=u.originalUri&&!e.o.includes(u.uri)&&e.o.unshift(u.uri),E(p,SE(e,u.data,u.uri),3)):p.return(0)):(f=Date.now(),c=(f-a)/1e3,e.H.sample(1,c),p.return(c))})}function SE(e,t,n){var o,a,u,f;return z(function(c){if(c.g==1){if(o=pc(t,"MPD"),!o)throw new K(2,4,4001,n);return e.h.dash.disableXlinkProcessing?c.return(Ry(e,o,n)):(a=e.h.dash.xlinkFailGracefully,u=sl(o,e.h.retryParameters,a,n,e.i.networkingEngine),Oo(e.C,u),E(c,u.promise,2))}return f=c.h,c.return(Ry(e,f,n))})}function Ry(e,t,n){var o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V,q,te,de,ce,he,me,we,Ie,Ne,ze,$e,Ze,Oe,Ft,Qt,pi,gn,Ai,pt,In,yn,jn,zt,qr,go,Zo,Qr,bi,Jo,Zr,yo,Jr,vo,Ni,Ea,es;return z(function(to){switch(to.g){case 1:for((o=e.h.dash.manifestPreprocessor)&&o(t),e.g&&e.g.l.clear(),a=[n],u=[],f=new Map,c=kt(t,"Location"),p=w(c),m=p.next();!m.done;m=p.next())v=m.value,S=v.getAttribute("serviceLocation"),(C=zo(v))&&(T=on(a,[C])[0],S&&(e.g?zr(e.g,"Location",S,T):f.set(S,T)),u.push(T));if(e.g?(b=ra(e.g,"Location",!0),0<b.length&&(a=e.o=b)):u.length&&(a=e.o=u),_=Promise.resolve(),(D=li(t,"ContentSteering"))&&e.i)for(B=D.getAttribute("defaultServiceLocation"),e.g?(e.g.j=a,e.g.h=B):(e.g=new ia(e.i),e.g.configure(e.h),e.g.setManifestType("DASH"),e.g.j=a,e.g.h=B,(N=zo(D))&&(st(D,"queryBeforeStart",dc,!1)?_=oa(e.g,N):oa(e.g,N))),G=w(f.keys()),V=G.next();!V.done;V=G.next())q=V.value,te=f.get(q),zr(e.g,"Location",q,te);if(de=kt(t,"BaseURL"),he=!1,e.g)for(me=w(de),we=me.next();!we.done;we=me.next())Ie=we.value,Ne=Ie.getAttribute("serviceLocation"),ze=zo(Ie),Ne&&ze&&(zr(e.g,"BaseURL",Ne,ze),he=!0);if(he&&e.g||($e=de.map(zo),ce=on(a,$e)),Ze=function(){return e.g&&he?ra(e.g,"BaseURL"):ce||[]},Oe=0,de&&de.length&&(Oe=st(de[0],"availabilityTimeOffset",Ps)||0),Ft=e.h.dash.ignoreMinBufferTime,Qt=0,Ft||(Qt=st(t,"minBufferTime",Gi)||0),e.F=st(t,"minimumUpdatePeriod",Gi,-1),pi=st(t,"availabilityStartTime",S0),gn=st(t,"timeShiftBufferDepth",Gi),Ai=e.h.dash.ignoreSuggestedPresentationDelay,pt=null,Ai||(pt=st(t,"suggestedPresentationDelay",Gi)),In=e.h.dash.ignoreMaxSegmentDuration,yn=null,In||(yn=st(t,"maxSegmentDuration",Gi)),jn=t.getAttribute("type")||"static",e.j)for(zt=e.j.presentationTimeline,qr=w(Object.values(e.m)),go=qr.next();!go.done;go=qr.next())Zo=go.value,Zo.segmentIndex&&Zo.segmentIndex.bb(zt.eb());else Qr=e.h.defaultPresentationDelay||1.5*Qt,bi=pt??Qr,zt=new Je(pi,bi,e.h.dash.autoCorrectDrift);return zt.pc(jn=="static"),zt.R()&&!isNaN(e.h.availabilityWindowOverride)&&(gn=e.h.availabilityWindowOverride),gn==null&&(gn=1/0),zt.Xd(gn),Jo=t.getAttribute("profiles")||"",Zr={zb:jn!="static",presentationTimeline:zt,ta:null,ba:null,oa:null,M:null,bandwidth:0,Wf:!1,ac:Oe,profiles:Jo.split(",")},yo=CE(e,Zr,Ze,t),Jr=yo.duration,vo=yo.periods,jn!="static"&&yo.Lf||zt.Pa(Jr||1/0),e.A&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?zt.lg(e.A):e.A&&Le("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),zt.Ye(yn||1),E(to,e.l.Gf(vo,Zr.zb),2);case 2:return E(to,_,3);case 3:if(e.s&&(Qt=0),e.j){e.j.variants=e.l.j,Ni=e.l.Ie(),0<Ni.length&&(e.j.textStreams=Ni),e.j.imageStreams=e.l.i,e.i.filter(e.j),to.B(4);break}if(e.j={presentationTimeline:zt,variants:e.l.j,textStreams:e.l.Ie(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:Qt||0,sequenceMode:e.h.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:TE(t)},!zt.ug()){to.B(5);break}return Ea=kt(t,"UTCTiming"),E(to,RE(e,Ze,Ea),6);case 6:if(es=to.h,!e.i)return to.return();zt.mg(es);case 5:zt.Nd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),j(to)}})}function TE(e){if(e=li(e,"ServiceDescription"),!e)return null;var t=li(e,"Latency"),n=li(e,"PlaybackRate");if(t&&t.getAttribute("max")||n){e=t&&t.getAttribute("max")?parseInt(t.getAttribute("max"),10)/1e3:null;var o=n?parseFloat(n.getAttribute("max")):null;return t=t&&t.getAttribute("min")?parseInt(t.getAttribute("min"),10)/1e3:null,n=n?parseFloat(n.getAttribute("min")):null,{maxLatency:e,maxPlaybackRate:o,minLatency:t,minPlaybackRate:n}}return null}function CE(e,t,n,o){var a=st(o,"mediaPresentationDuration",Gi),u=[],f=0;o=kt(o,"Period");for(var c=0;c<o.length;c++){var p=o[c],m=o[c+1],v=st(p,"start",Gi,f),S=p.id,C=st(p,"duration",Gi),T=null;if(m){var b=st(m,"start",Gi);b!=null&&(T=b-v)}else a!=null&&(T=a-v);if(T==null&&(T=C),!(e.u!==null&&S!==null&&v!==null&&v<e.u)||e.J.includes(S)||c+1==o.length){if(v!==null&&(e.u===null||v>e.u)&&(e.u=v),f=EE(e,t,n,{start:v,duration:T,node:p,Le:T==null||!m}),u.push(f),t.ta.id&&T&&(e.K[t.ta.id]=T),T==null){f=null;break}f=v+T}}return e.J=u.map(function(_){return _.id}),a!=null?{periods:u,duration:a,Lf:!1}:{periods:u,duration:f,Lf:!0}}function EE(e,t,n,o){t.ta=zh(e,o.node,null,n),t.ba=o,t.ta.ac=t.ac,t.ta.id||(t.ta.id="__shaka_period_"+o.start);var a=kt(o.node,"EventStream");n=t.presentationTimeline.eb(),a=w(a);for(var u=a.next();!u.done;u=a.next())LE(e,o.start,o.duration,u.value,n);if(n=kt(o.node,"AdaptationSet").map(function(v){return AE(e,t,v)}).filter(sr),t.zb){for(o=[],a=w(n),u=a.next();!u.done;u=a.next()){u=w(u.value.Ph);for(var f=u.next();!f.done;f=u.next())o.push(f.value)}if(o.length!=new Set(o).size)throw new K(2,4,4018)}for(o=n.filter(function(v){return!v.wf}),n=n.filter(function(v){return v.wf}),n=w(n),a=n.next();!a.done;a=n.next()){a=a.value,u=a.wf.split(" "),f=w(o);for(var c=f.next();!c.done;c=f.next()){var p=c.value;if(u.includes(p.id)){c={},p=w(p.streams);for(var m=p.next();!m.done;c={pd:c.pd},m=p.next())c.pd=m.value,c.pd.trickModeVideo=a.streams.find(function(v){return function(S){return oi(v.pd.codecs)==oi(S.codecs)}}(c))}}}if(n=hl(e.h.disableAudio,o,"audio"),a=hl(e.h.disableVideo,o,"video"),u=hl(e.h.disableText,o,at),o=hl(e.h.disableThumbnails,o,"image"),a.length===0&&n.length===0)throw new K(2,4,4004);return{id:t.ta.id,audioStreams:n,videoStreams:a,textStreams:u,imageStreams:o}}function hl(e,t,n){return e||!t.length?[]:t.reduce(function(o,a){return a.contentType!=n||o.push.apply(o,L(a.streams)),o},[])}function AE(e,t,n){function o(ce){switch(ce){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.oa=zh(e,n,t.ta,null);var a=!1,u=kt(n,"Role"),f=u.map(function(ce){return ce.getAttribute("value")}).filter(sr),c=void 0,p=t.oa.contentType==at;p&&(c="subtitle"),u=w(u);for(var m=u.next();!m.done;m=u.next()){m=m.value;var v=m.getAttribute("schemeIdUri");if(v==null||v=="urn:mpeg:dash:role:2011")switch(m=m.getAttribute("value"),m){case"main":a=!0;break;case"caption":case"subtitle":c=m}}var S;v=kt(n,"EssentialProperty"),u=null;var C=!1;m=!1,v=w(v);for(var T=v.next();!T.done;T=v.next()){T=T.value;var b=T.getAttribute("schemeIdUri");b=="http://dashif.org/guidelines/trickmode"?u=T.getAttribute("value"):b=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?S=o(parseInt(T.getAttribute("value"),10)):b!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&b!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(b=="urn:mpeg:dash:ssr:2023"?C=!0:m=!0)}for(v=kt(n,"SupplementalProperty"),v=w(v),T=v.next();!T.done;T=v.next())T=T.value,T.getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(S=o(parseInt(T.getAttribute("value"),10)));v=kt(n,"Accessibility");var _=new Map,D;for(v=w(v),T=v.next();!T.done;T=v.next())if(b=T.value,T=b.getAttribute("schemeIdUri"),b=b.getAttribute("value"),T=="urn:scte:dash:cc:cea-608:2015")if(T=1,b!=null){b=b.split(";");for(var B=w(b),N=B.next();!N.done;N=B.next()){var G=N.value,V=N=void 0;G.includes("=")?(G=G.split("="),N=G[0].startsWith("CC")?G[0]:"CC"+G[0],V=G[1]||"und"):(N="CC"+T,b.length==2?T+=2:T++,V=G),_.set(N,ct(V))}}else _.set("CC1","und");else if(T=="urn:scte:dash:cc:cea-708:2015")if(T=1,b!=null)for(b=w(b.split(";")),N=b.next();!N.done;N=b.next())N=N.value,G=B=void 0,N.includes("=")?(N=N.split("="),B="svc"+N[0],G=N[1].split(",")[0].split(":").pop()):(B="svc"+T,T++,G=N),_.set(B,ct(G));else _.set("svc1","und");else T=="urn:mpeg:dash:role:2011"?b!=null&&(f.push(b),b=="captions"&&(c="caption")):T=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(b=="1"?D="visually impaired":b=="2"&&(D="hard of hearing"));if(m)return null;m=kt(n,"ContentProtection");var q=uy(m,e.h.dash.ignoreDrmInfo,e.h.dash.keySystemsByURI),te=ct(t.oa.language||"und"),de=n.getAttribute("label");if((m=kt(n,"Label"))&&m.length&&(m=m[0],m.textContent&&(de=m.textContent)),m=kt(n,"Representation"),n=m.map(function(ce){return(ce=bE(e,t,q,c,te,de,a,f,_,ce,D))&&(ce.hdr=ce.hdr||S,ce.fastSwitching=C),ce}).filter(function(ce){return!!ce}),n.length==0){if(u=t.oa.contentType=="image",e.h.dash.ignoreEmptyAdaptationSet||p||u)return null;throw new K(2,4,4003)}if(!t.oa.contentType||t.oa.contentType=="application")for(t.oa.contentType=Py(n[0].mimeType,n[0].codecs),p=w(n),T=p.next();!T.done;T=p.next())T.value.type=t.oa.contentType;for(p=t.oa.id||"__fake__"+e.I++,v=w(n),T=v.next();!T.done;T=v.next()){for(T=T.value,b=w(q.drmInfos),B=b.next();!B.done;B=b.next())B=B.value,B.keyIds=B.keyIds&&T.keyIds?new Set([].concat(L(B.keyIds),L(T.keyIds))):B.keyIds||T.keyIds;e.h.dash.enableAudioGroups&&(T.groupId=p)}return m=m.map(function(ce){return ce.getAttribute("id")}).filter(sr),{id:p,contentType:t.oa.contentType,language:te,bj:a,streams:n,drmInfos:q.drmInfos,wf:u,Ph:m}}function bE(e,t,n,o,a,u,f,c,p,m,v){if(t.M=zh(e,m,t.oa,null),e.A=Math.min(e.A,t.M.ac),!_E(t.M))return null;var S=t.ba.start;t.bandwidth=st(m,"bandwidth",Wi)||0;var C=t.M.contentType,T=C==at||C=="application";C=C=="image";try{var b=void 0;if(n.ke){var _=t.M.cb,D=on(_(),[n.ke.zh]),B=Yt(D,e.h.retryParameters);b={method:"AES-128",iv:n.ke.iv,firstMediaSequenceNumber:0,fetchKey:function(){var he,me,we;return z(function(Ie){if(Ie.g==1)return E(Ie,Vh(e,B,6),2);if(Ie.g!=3){if(he=Ie.h,!he.data||he.data.byteLength!=16)throw new K(2,4,4049);return me={name:"AES-CBC"},we=b,E(Ie,d.crypto.subtle.importKey("raw",he.data,me,!0,["decrypt"]),3)}we.cryptoKey=Ie.h,b.fetchKey=void 0,j(Ie)})}}}if(_=function(he,me,we,Ie){return PE(e,he,me,we,Ie)},t.M.ed)var N=JC(t,_,b);else if(t.M.Fb)N=tE(t,e.m,b);else if(t.M.fd)N=rE(t,_,e.m,!!e.j,e.h.dash.initialSegmentLimit,e.K,b);else{var G=t.ba.duration||0,V=t.M.cb;N={dc:function(){return Promise.resolve(Nc(S,G,V()))}}}}catch(he){if((T||C)&&he.code==4002)return null;throw he}_=kt(m,"ContentProtection"),_=UC(_,n,e.h.dash.ignoreDrmInfo,e.h.dash.keySystemsByURI),_=new Set(_?[_]:[]),D=!1,kt(m,"SupplementalProperty").some(function(he){return he.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&he.getAttribute("value")=="JOC"})&&(D=!0);var q=!1;T&&(q=c.includes("forced_subtitle")||c.includes("forced-subtitle"));var te;if(C&&((m=kt(m,"EssentialProperty").find(function(he){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(he.getAttribute("schemeIdUri"))}))&&(te=m.getAttribute("value")),!te))return null;var de;m=t.M.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(m.includes("hvc1.2.4.L153.B0")||m.includes("hev1.2.4.L153.B0"))&&(de="PQ"),m=t.M.id?t.ta.id+","+t.M.id:"";var ce=m&&e.m[m]?e.m[m]:{id:e.I++,originalId:t.M.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){ce.segmentIndex&&(ce.segmentIndex.release(),ce.segmentIndex=null)},segmentIndex:null,mimeType:t.M.mimeType,codecs:t.M.codecs,frameRate:t.M.frameRate,pixelAspectRatio:t.M.pixelAspectRatio,bandwidth:t.bandwidth,width:t.M.width,height:t.M.height,kind:o,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:_,language:a,originalLanguage:t.oa.language,label:u,type:t.oa.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.M.emsgSchemeIdUris,roles:c,forced:q,channelsCount:t.M.Td,audioSamplingRate:t.M.audioSamplingRate,spatialAudio:D,closedCaptions:p,hdr:de,videoLayout:void 0,tilesLayout:te,accessibilityPurpose:v,external:!1,fastSwitching:!1};return ce.createSegmentIndex=function(){var he;return z(function(me){if(me.g==1)return ce.segmentIndex?me.B(0):(he=ce,E(me,N.dc(),3));he.segmentIndex=me.h,j(me)})},m&&t.zb&&!e.m[m]&&(e.m[m]=ce),ce}function IE(e){var t,n;z(function(o){switch(o.g){case 1:return t=0,re(o,2),E(o,jh(e),4);case 4:t=o.h,ie(o,3);break;case 2:if(n=se(o),e.i){if(e.h.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),o.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return o.return();e.i.onManifestUpdated(),Fh(e,t),j(o)}})}function Fh(e,t){0>e.F||e.G.U(Math.max(e.F-t,Y(e.H)))}function zh(e,t,n,o){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Td:null,audioSamplingRate:null,ac:0,jf:0},o=o||n.cb;var a=t.getAttribute("id"),u=kt(t,"BaseURL"),f,c=!1;if(e.g)for(var p=w(u),m=p.next();!m.done;m=p.next()){var v=m.value;m=v.getAttribute("serviceLocation"),v=zo(v),m&&v&&(zr(e.g,a,m,v),c=!0)}c&&e.g||(f=u.map(zo)),p=t.getAttribute("contentType")||n.contentType,m=t.getAttribute("mimeType")||n.mimeType,v=t.getAttribute("codecs")||n.codecs;var S=st(t,"frameRate",kw)||n.frameRate,C=t.getAttribute("sar")||n.pixelAspectRatio,T=kE(kt(t,"InbandEventStream"),n.emsgSchemeIdUris),b=kt(t,"AudioChannelConfiguration");b=ME(b)||n.Td;var _=st(t,"audioSamplingRate",dn)||n.audioSamplingRate;p||(p=Py(m,v));var D=li(t,"SegmentBase"),B=li(t,"SegmentTemplate"),N=D&&st(D,"availabilityTimeOffset",Ps)||0,G=B&&st(B,"availabilityTimeOffset",Ps)||0,V=u&&u.length&&st(u[0],"availabilityTimeOffset",Ps)||0;return N=n.ac+V+N+G,G=null,(V=li(t,"SegmentSequenceProperties"))&&(V=li(V,"SAP"))&&(G=st(V,"cadence",yu)),{cb:function(){return on(o(),u.length?e.g&&c?ra(e.g,a):f||[]:[])},ed:D||n.ed,Fb:li(t,"SegmentList")||n.Fb,fd:B||n.fd,width:st(t,"width",dn)||n.width,height:st(t,"height",dn)||n.height,contentType:p,mimeType:m,codecs:v,frameRate:S,pixelAspectRatio:C,emsgSchemeIdUris:T,id:a,language:t.getAttribute("lang"),Td:b,audioSamplingRate:_,ac:N,jf:G||n.jf}}function kE(e,t){t=t.slice(),e=w(e);for(var n=e.next();!n.done;n=e.next())n=n.value.getAttribute("schemeIdUri"),t.includes(n)||t.push(n);return t}function ME(e){e=w(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function _E(e){var t=e.ed?1:0;return t+=e.Fb?1:0,t+=e.fd?1:0,t==0?e.contentType==at||e.contentType=="application":(t!=1&&(e.ed&&(e.Fb=null),e.fd=null),!0)}function Ly(e,t,n,o){var a,u,f,c,p,m;return z(function(v){if(v.g==1)return a=on(t(),[n]),u=Yt(a,e.h.retryParameters),u.method=o,f=e.i.networkingEngine.request(4,u),Oo(e.C,f),E(v,f.promise,2);if(c=v.h,o=="HEAD"){if(!c.headers||!c.headers.date)return v.return(0);p=c.headers.date}else p=It(c.data);return m=Date.parse(p),isNaN(m)?v.return(0):v.return(m-Date.now())})}function RE(e,t,n){var o,a,u,f,c,p,m,v;return z(function(S){switch(S.g){case 1:o=n.map(function(C){return{scheme:C.getAttribute("schemeIdUri"),value:C.getAttribute("value")}}),a=e.h.dash.clockSyncUri,!o.length&&a&&o.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:a}),u=w(o),f=u.next();case 2:if(f.done){S.B(4);break}switch(c=f.value,re(S,5),p=c.scheme,m=c.value,p){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return S.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return S.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return v=Date.parse(m),S.return(isNaN(v)?0:v-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Le("NTP UTCTiming scheme is not supported");break;default:Le("Unrecognized scheme in UTCTiming element",p)}S.B(9);break;case 7:return E(S,Ly(e,t,m,"HEAD"),10);case 10:return S.return(S.h);case 8:return E(S,Ly(e,t,m,"GET"),11);case 11:return S.return(S.h);case 9:ie(S,3);break;case 5:se(S);case 3:f=u.next(),S.B(2);break;case 4:return Le("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),S.return(0)}})}function LE(e,t,n,o,a){var u=o.getAttribute("schemeIdUri")||"",f=o.getAttribute("value")||"",c=st(o,"timescale",dn)||1;o=w(kt(o,"Event"));for(var p=o.next();!p.done;p=o.next()){p=p.value;var m=st(p,"presentationTime",dn)||0,v=st(p,"duration",dn)||0;m=m/c+t,v=m+v/c,n!=null&&(m=Math.min(m,t+n),v=Math.min(v,t+n)),v<a||(p={schemeIdUri:u,value:f,startTime:m,endTime:v,id:p.getAttribute("id")||"",eventElement:p},e.i.onTimelineRegionAdded(p))}}function PE(e,t,n,o,a){var u,f,c,p;return z(function(m){return m.g==1?(u=Ri,f=a?0:1,c=_u(t,n,o,e.h.retryParameters),E(m,Vh(e,c,u,{type:f}),2)):(p=m.h,m.return(p.data))})}function Py(e,t){return t=Rn(e,t),Ka(t)?at:e.split("/")[0]}function Vh(e,t,n,o){return t=e.i.networkingEngine.request(n,t,o),Oo(e.C,t),t.promise}ae("shaka.dash.DashParser",cl),fi["application/dash+xml"]=function(){return new cl},fi["video/vnd.mpeg.dash.mpd"]=function(){return new cl};function dl(){}ae("shaka.dependencies",dl),dl.has=function(e){return Hh.has(e)},dl.add=function(e,t){if(!Ny[e])throw Error(e+" is not supported");e==Dy?ai("mux.js","mux.js is no longer used in Shaka Player."):Hh.set(e,function(){return t})};var Dy="muxjs",Ny={cj:Dy,ISOBoxer:"ISOBoxer"};dl.Allowed=Ny;var Hh=new Map([["ISOBoxer",function(){return d.ISOBoxer}]]);function Oy(e,t,n){this.type=e,this.g=t,this.segments=n||null}function $h(e,t,n,o){this.id=e,this.name=t,this.g=n,this.value=o===void 0?null:o}$h.prototype.toString=function(e){function t(a){return a.name+"="+(isNaN(Number(a.value))?'"'+a.value+'"':a.value)}var n="#"+this.name,o=this.g?this.g.filter(function(a){return e?!e.has(a.name):!0}).map(t):[];return this.value&&o.unshift(this.value),0<o.length&&(n+=":"+o.join(",")),n};function Uy(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}$h.prototype.getAttribute=function(e){var t=this.g.filter(function(n){return n.name==e});return t.length?t[0]:null};function je(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Dt(e,t){if(e=e.getAttribute(t),!e)throw new K(2,4,4023,t);return e.value}function By(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.fb=n}function jy(e,t){this.name=e,this.value=t}function Ei(e,t){return e.filter(function(n){return n.name==t})}function Fy(e,t){return e.filter(function(n){return Dt(n,"TYPE")==t})}function rn(e,t){e=w(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Hr(e,t,n){return n=n===void 0?0:n,(e=rn(e,t))?Number(e.value):n}function Xo(e,t,n){return t?zy(e,[t],n):[]}function zy(e,t,n){if(!t.length)return[];t=on(e,t),e=[],t=w(t);for(var o=t.next();!o.done;o=t.next()){var a=e,u=a.push,f=o.value;if((o=n)&&o.size){f=String(f).replace(/%7B/g,"{").replace(/%7D/g,"}");var c=f.match(/{\$\w*}/g);if(c){c=w(c);for(var p=c.next();!p.done;p=c.next()){p=p.value;var m=p.slice(2,p.length-1),v=o.get(m);if(v)f=f.replace(p,v);else throw new K(2,4,4039,m)}}o=f}else o=f;u.call(a,o)}return e}function Ko(e){this.h=e||"",this.g=0}function $r(e){po(e,/[ \t]+/gm)}function po(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Yo(e){return e.g==e.h.length?null:(e=po(e,/[^ \t\n]*/gm))?e[0]:null}function DE(){this.g=0}function Gh(e,t){t=It(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new K(2,4,4015);t=0;for(var o=!0,a=w(n),u=a.next();!u.done;u=a.next())if(u=u.value,/^#(?!EXT)/m.test(u)||o)o=!1;else if(u=Wh(e,u),--e.g,Vy.includes(u.name)){t=1;break}else u.name=="EXT-X-STREAM-INF"&&(o=!0);for(a=[],o=!0,u=0;u<n.length;u++){var f=n[u],c=n[u+1];if(/^#(?!EXT)/m.test(f)||o)o=!1;else{if(f=Wh(e,f),NE.includes(f.name)){if(t!=1)throw new K(2,4,4017);f=n.splice(u,n.length-u),n=[],o=[],u=[],c=null,f=w(f);for(var p=f.next();!p.done;p=f.next())p=p.value,/^(#EXT)/.test(p)?(p=Wh(e,p),Vy.includes(p.name)?a.push(p):p.name=="EXT-X-MAP"?c=p:p.name=="EXT-X-PART"?u.push(p):p.name=="EXT-X-PRELOAD-HINT"?je(p,"TYPE")=="PART"?u.push(p):je(p,"TYPE")=="MAP"&&(p.name="EXT-X-MAP",c=p):o.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),c&&o.push(c),n.push(new By(p,o,u)),o=[],u=[]);return u.length&&(c&&o.push(c),n.push(new By("",o,u))),new Oy(t,a,n)}a.push(f),f.name=="EXT-X-STREAM-INF"&&(f.g.push(new jy("URI",c)),o=!0)}}return new Oy(t,a)}function Wh(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new K(2,4,4016,t);t=n[1];var o=n[2];n=[];var a;if(o){o=new Ko(o);var u;(u=po(o,/^([^,=]+)(?:,|$)/g))&&(a=u[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;u=po(o,f);)n.push(new jy(u[1],u[2]||u[3])),$r(o)}return new $h(e,t,n,a)}var Vy="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),NE="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Hy(){}function $y(e){try{var t=Xh(e);return dr({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return No(n)}}function Xh(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new K(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new K(2,1,1004,e);var n=t[0];e=d.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var o=!1;1<t.length&&t[t.length-1]=="base64"&&(o=!0,t.pop());var a;return o?a=ui(e):a=Vi(e),{data:a,contentType:n}}ae("shaka.net.DataUriPlugin",Hy),Hy.parse=$y,Fi("data",$y);function Gy(e){var t=Bi(e),n=t.split("/")[0];return e=ri(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map}}function OE(e,t){function n(_){return o(_.name)}function o(_){switch(_=_.toLowerCase(),_){case"avc1":case"avc3":a.push(_+".42E01E"),f=!0;break;case"hev1":case"hvc1":a.push(_+".1.6.L93.90"),f=!0;break;case"dvh1":case"dvhe":a.push(_+".05.04"),f=!0;break;case"vp09":a.push(_+".00.10.08"),f=!0;break;case"av01":a.push(_+".0.01M.08"),f=!0;break;case"mp4a":a.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":a.push(_),u=!0}}var a=[],u=!1,f=!1,c=null,p=null,m=null,v=null,S=null;if(new St().box("moov",dt).box("trak",dt).O("tkhd",function(_){_=G0(_.reader,_.version),p=String(_.height),m=String(_.width)}).box("mdia",dt).O("mdhd",function(_){c=wu(_.reader,_.version).language}).box("minf",dt).box("stbl",dt).O("stsd",yr).box("mp4a",function(_){var D=_.reader;D.skip(6),D.skip(2),D.skip(8);var B=D.Ea();D.skip(2),D.skip(2),D.skip(2),D=D.Ea()+D.Ea()/65536,v=B,S=D,_.reader.ia()?dt(_):n(_)}).box("esds",function(_){_=tS(_.reader),a.push(_.ha),u=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(_){_=W0(_.reader,_.name),a.push(_.ha),f=!0}).box("avc3",function(_){_=W0(_.reader,_.name),a.push(_.ha),f=!0}).box("hev1",n).box("hvc1",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("enca",du).box("encv",du).box("sinf",dt).box("frma",function(_){_=X0(_.reader).ha,o(_)}).parse(e||t,!0),!a.length)return null;var C=u&&!f,T=new Map;if(f){var b=new nn("video/mp4");for(e&&b.init(e),b.i(t),e=w(b.j()),t=e.next();!t.done;t=e.next())t=t.value,T.set(t,t);b.h()}return{type:C?"audio":"video",mimeType:C?"audio/mp4":"video/mp4",codecs:UE(a).join(", "),language:c,height:p,width:m,channelCount:v,sampleRate:S,closedCaptions:T}}function UE(e){var t=new Set,n=[];e=w(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var a=xi(o);t.has(a)||(n.push(o),t.add(a))}return n}function pl(){var e=this;this.g=this.i=null,this.u=1,this.o=new Map,this.H=new Map,this.J=new Map,this.J.set("video",new Map),this.J.set("audio",new Map),this.J.set(at,new Map),this.J.set("image",new Map),this.Ba=new Set,this.h=new Map,this.l=null,this.Y="",this.za=new DE,this.I=-1,this.V=1/0,this.da=this.mb=!1,this.s=new rt(function(){sA(e)}),this.ea=yl,this.C=null,this.Aa=0,this.m=1/0,this.ma=this.ka=this.K=0,this.N=new pr,this.F=new Map,this.G=new Map,this.W=new Map,this.lb=this.A=!1,this.kb=new Ue(5),this.j=null}s=pl.prototype,s.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},s.start=function(e,t){var n=this,o;return z(function(a){return a.g==1?(n.i=t,n.A=t.isLowLatencyMode(),E(a,ed(n,[e]),2)):a.g!=3?(o=a.h,n.Y=o.uri,E(a,zE(n,o.data,e),3)):a.return(n.C)})},s.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ba.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.W.clear(),this.j&&this.j.destroy(),Promise.all(e)},s.update=function(){var e=this,t,n,o,a,u,f,c,p,m;return z(function(v){if(v.g==1){if(!Pn(e))return v.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,o=n.filter(function(S){return S.stream.segmentIndex}),a=w(o),u=a.next();!u.done;u=a.next())f=u.value,t.push(BE(e,f));return E(v,Promise.all(t),2)}t1(e,o.map(function(S){return S.stream})),c=o.some(function(S){return S.Sc==0}),o.length&&!c&&(p=aA,gl(e,p.zg),m=o.map(function(S){return S.rb}),e.l.Pa(Math.min.apply(Math,L(m))),e.i.updateDuration()),c&&Yh(e),j(v)})};function Kh(e,t){return Pn(e)?e.J.get(t.type):t.Pd}function BE(e,t){var n,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V,q,te,de,ce,he,me,we,Ie,Ne,ze;return z(function($e){if($e.g==1){for(n=[],o=w(t.Z()),a=o.next();!a.done;a=o.next())u=a.value,f=new Ut(u),c=f.g,t.sd&&(0<=t.Xa&&c.add("_HLS_msn",String(t.Xa)),0<=t.Ya&&c.add("_HLS_part",String(t.Ya))),t.td&&c.add("_HLS_skip","YES"),Rp(c)&&Ts(f,c),n.push(f.toString());return E($e,ed(e,n,!0),2)}if(p=$e.h,!t.stream.segmentIndex)return $e.return();if(m=Gh(e.za,p.data),m.type!=1)throw new K(2,4,4017);v=p.uri,v==p.originalUri||t.Z().includes(v)||t.gg.push(v),S=Ei(m.g,"EXT-X-DEFINE"),C=Ky(e,S,v),T=t.stream,b=Kh(e,t),_=r1(m,T.mimeType),D=_.keyIds,B=_.drmInfos,N=function(Ze,Oe){return Ze.size===Oe.size&&[].concat(L(Ze)).every(function(Ft){return Oe.has(Ft)})},N(T.keyIds,D)||(T.keyIds=D,T.drmInfos=B,e.i.newDrmInfo(T)),G=f1(e,m,T,b,C,t.Z),V=G.segments,(q=G.bandwidth)&&(T.bandwidth=q),T.segmentIndex.Wc(V,e.l.eb()),V.length&&(te=Hr(m.g,"EXT-X-MEDIA-SEQUENCE",0),ce=(de=rn(m.g,"EXT-X-SKIP"))?Number(je(de,"SKIPPED-SEGMENTS")):0,he=i1(te,V),me=he.Xa,we=he.Ya,t.Xa=me+ce,t.Ya=we,Ie=b.get(te),T.segmentIndex.bb(Ie)),Ne=V[0],t.Sb=Ne.startTime,ze=V[V.length-1],t.rb=ze.endTime,rn(m.g,"EXT-X-ENDLIST")&&(t.Sc=!0),Qh(e,m),j($e)})}s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(){},s.banLocation=function(e){this.j&&this.j.i.set(e,Date.now()+6e4)};function jE(e,t){for(var n=e.I==-1,o=w(t),a=o.next();!a.done;a=o.next()){a=a.value;var u=a.stream.segmentIndex,f=Kh(e,a);if(u=u.g[0]||null){f=w(f);for(var c=f.next();!c.done;c=f.next()){c=w(c.value);var p=c.next().value;if(c.next().value==u.startTime){n&&(e.I=Math.max(e.I,p)),a.qe=p;break}}}}if(!(0>e.I))for(t=w(t),a=t.next();!a.done;a=t.next())n=a.value,(o=n.stream.segmentIndex)&&(o.g.splice(0,e.I-n.qe),(o=o.g[0]||null)&&(o=-o.startTime,n.stream.segmentIndex.offset(o),Wy(e,n,o)))}function FE(e,t){if(e.V==1/0){t=w(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value.stream.segmentIndex.g[0]||null;o!=null&&o.ca!=null&&(e.V=Math.min(e.V,o.ca))}}if(t=e.V,t!=1/0)for(o=w(e.h.values()),n=o.next();!n.done;n=o.next()){n=n.value;var a=n.stream.segmentIndex;if(a!=null){var u=a.g[0]||null;if(u.ca==null)De("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.Z(),"Expect AV sync issues!");else for(Wy(e,n,u.ca-t-u.startTime),n=w(a),a=n.next();!a.done;a=n.next())a.value.tf(t)}}}function Wy(e,t,n){t.Sb+=n,t.rb+=n,e=Kh(e,t);for(var o=w(e),a=o.next();!a.done;a=o.next()){var u=w(a.value);a=u.next().value,u=u.next().value,e.set(a,u+n)}t.Z()}function zE(e,t,n){var o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V,q,te,de,ce,he,me,we,Ie,Ne,ze,$e,Ze;return z(function(Oe){switch(Oe.g){case 1:return o=Gh(e.za,t),a=Ei(o.g,"EXT-X-DEFINE"),u=[],f=[],c=[],o.type==1?(_=function(){return[n]},E(Oe,Xy(e,o,_),6)):(VE(e,a),p=Ei(o.g,"EXT-X-MEDIA"),m=Ei(o.g,"EXT-X-STREAM-INF"),v=Ei(o.g,"EXT-X-IMAGE-STREAM-INF"),S=Ei(o.g,"EXT-X-I-FRAME-STREAM-INF"),C=Ei(o.g,"EXT-X-SESSION-KEY"),T=Ei(o.g,"EXT-X-SESSION-DATA"),b=Ei(o.g,"EXT-X-CONTENT-STEERING"),$E(e,T),E(Oe,GE(e,b),4));case 4:return HE(e,m),ZE(e,p),u=YE(e,m,C,p),f=WE(e,p),E(Oe,XE(e,v,S),5);case 5:c=Oe.h,Oe.B(3);break;case 6:return D=Oe.h,B=D.type,N=D.mimeType,G=D.codecs,V=D.language,q=D.height,te=D.width,de=D.channelCount,ce=D.sampleRate,he=D.closedCaptions,E(Oe,n1(e,e.u++,o,_,n,G,B,V,!0,"Media Playlist",de,he,null,!1,ce,!1,N),7);case 7:me=Oe.h,e.h.set(n,me),B=="video"&&c1(me.stream,te,q,null,null,null),u.push({id:0,language:ct(V||"und"),disabledUntilTime:0,primary:!0,audio:B=="audio"?me.stream:null,video:B=="video"?me.stream:null,bandwidth:me.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new K(2,7,7001);if(e.l=new Je(null,0),e.l.pc(!0),o.type==1&&(Pn(e)&&(a1(e,o),we=e.m,e.s.U(we)),Ie=Array.from(e.h.values()),qh(e,Ie),Yh(e)),e.C={presentationTimeline:e.l,variants:u,textStreams:f,imageStreams:c,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.da||!e.g.hls.disableCodecGuessing){Oe.B(8);break}for(Ne=[],ze=w(e.C.variants),$e=ze.next();!$e.done;$e=ze.next())Ze=$e.value,Ze.audio&&Ze.audio.codecs===""&&Ne.push(Ze.audio.createSegmentIndex()),Ze.video&&Ze.video.codecs===""&&Ne.push(Ze.video.createSegmentIndex());return E(Oe,Promise.all(Ne),8);case 8:e.i.makeTextStreamsForClosedCaptions(e.C),j(Oe)}})}function Xy(e,t,n){var o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V;return z(function(q){switch(q.g){case 1:if(o=Gy(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return q.return(o);if(a=Math.trunc((t.segments.length-1)/2),u=t.segments[a],f=Xo(n(),t.segments[0].h),c=f[0],p=new Ut(c),m=p.Ga.split(".").pop(),v=h1[m])return q.return(Gy(v));if(S=Ri,C=null,T=u1(e,t,u.g,n),e.W.clear(),!T){q.B(2);break}return b=_u(T.Z(),T.ic(),T.fc(),e.g.retryParameters),E(q,Gr(e,b,S,{type:0}),3);case 3:_=q.h,C=_.data;case 2:return D=Yt(f,e.g.retryParameters),E(q,Gr(e,D,S,{type:1}),4);case 4:if(B=q.h,(N=B.headers["content-type"])&&(N=N.split(";")[0].toLowerCase()),m=="ts"||N=="video/mp2t"){var te=B.data,de=Ve(te);de=new xt().parse(de);var ce=de.Pc();de=de.Je();var he=[],me=!1,we=!1;switch(ce.audio){case"aac":he.push("mp4a.40.2"),me=!0;break;case"mp3":he.push("mp4a.40.34"),me=!0;break;case"ac3":he.push("ac-3"),me=!0;break;case"ec3":he.push("ec-3"),me=!0}switch(ce.video){case"avc":de.ha?he.push(de.ha):he.push("avc1.42E01E"),we=!0;break;case"hvc":de.ha?he.push(de.ha):he.push("hvc1.1.6.L93.90"),we=!0}if(he.length){if(ce=me&&!we,me=new Map,we){we=new nn("video/mp2t"),we.i(te),te=w(we.j());for(var Ie=te.next();!Ie.done;Ie=te.next())Ie=Ie.value,me.set(Ie,Ie);we.h()}de={type:ce?"audio":"video",mimeType:"video/mp2t",codecs:he.join(", "),language:null,height:de.height,width:de.width,channelCount:null,sampleRate:null,closedCaptions:me}}else de=null;if(G=de)return q.return(G)}else if((m=="mp4"||m=="cmfv"||m=="m4s"||N=="video/mp4"||N=="audio/mp4"||N=="video/iso.segment")&&(V=OE(C,B.data)))return q.return(V);return q.return(o)}})}function Yh(e){if(Pn(e)){if(e.ea==vl){var t=tA(e);e.g.hls.useSafariBehaviorForLive&&(t=e.l.o),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Xd(t)}if(!e.l.m){t=Array.from(e.h.values()).filter(function(o){return o.stream.segmentIndex}),t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,(n.type=="audio"||n.type=="video")&&(n=n.stream.segmentIndex.get(0))&&n.ca&&e.l.qf(n.ca)}}else e.l.Pa(e1(e));e.l.Nd()}function VE(e,t){var n=new Ut(e.Y).g;t=w(t);for(var o=t.next();!o.done;o=t.next()){var a=o.value;o=je(a,"NAME");var u=je(a,"VALUE");a=je(a,"QUERYPARAM"),o&&u&&(e.o.has(o)||e.o.set(o,u)),a&&(o=n.get(a)[0])&&!e.o.has(o)&&e.o.set(a,o)}}function Ky(e,t,n){n=new Ut(n).g;var o=new Map;t=w(t);for(var a=t.next();!a.done;a=t.next()){var u=a.value,f=je(u,"NAME"),c=je(u,"VALUE");a=je(u,"QUERYPARAM"),u=je(u,"IMPORT"),f&&c&&(o.has(f)||o.set(f,c)),a&&(f=n.get(a)[0])&&!o.has(f)&&o.set(a,f),u&&(a=e.o.get(u))&&o.set(u,a)}return o}function HE(e,t){t=w(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=je(o,"AUDIO");n=je(o,"VIDEO");var u=je(o,"SUBTITLES");if(o=Yy(e,o),u){var f=Sn(at,o);e.G.set(u,f),wn(o,f)}a&&(u=Sn("audio",o),u||(u=e.g.hls.defaultAudioCodec),e.G.set(a,u)),n&&(a=Sn("video",o),a||(a=e.g.hls.defaultVideoCodec),e.G.set(n,a))}}function $E(e,t){t=w(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=je(o,"DATA-ID");n=je(o,"URI");var u=je(o,"LANGUAGE");o=je(o,"VALUE"),a=new Map().set("id",a),n&&a.set("uri",Xo([e.Y],n,e.o)[0]),u&&a.set("language",u),o&&a.set("value",o),n=new Ge("sessiondata",a),e.i&&e.i.onEvent(n)}}function GE(e,t){var n,o,a,u,f,c;return z(function(p){if(!e.i||!e.g)return p.return();for(o=w(t),a=o.next();!a.done;a=o.next())if(u=a.value,f=je(u,"PATHWAY-ID"),c=je(u,"SERVER-URI"),f&&c){e.j=new ia(e.i),e.j.configure(e.g),e.j.j=[e.Y],e.j.setManifestType("HLS"),e.j.h=f,n=oa(e.j,c);break}return E(p,n,0)})}function WE(e,t){var n=Fy(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return Jy(e,[f],new Map).stream}catch(c){if(e.g.hls.ignoreTextStreamFailures)return null;throw c}}),n=w(n);for(var o=n.next();!o.done;o=n.next()){var a=Dt(o.value,"GROUP-ID");if((o=e.G.get(a))&&(a=e.H.get(a))){a=w(a);for(var u=a.next();!u.done;u=a.next())u=u.value,u.stream.codecs=o,u.stream.mimeType=Zh(at,o)||Jh(at)}}return t.filter(function(f){return f})}function XE(e,t,n){var o,a;return z(function(u){return u.g==1?(o=t.map(function(f){var c,p;return z(function(m){if(m.g==1)return e.g.disableThumbnails?m.return(null):(re(m,2),E(m,JE(e,f),4));if(m.g!=2)return c=m.h,m.return(c.stream);if(p=se(m),e.g.hls.ignoreImageStreamFailures)return m.return(null);throw p})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var c=Dt(f,"URI"),p=je(f,"CODECS")||"";if(e.h.has(c))var m=e.h.get(c);else{var v=je(f,"LANGUAGE"),S=je(f,"NAME"),C=je(f,"CHARACTERISTICS"),T=ml(e,e.u++,[c],p,"image",v,!1,S,null,null,C,!1,null,!1),b=je(f,"RESOLUTION"),_=w(b?b.split("x"):[null,null]),D=_.next().value,B=_.next().value;T.stream.width=Number(D)||void 0,T.stream.height=Number(B)||void 0;var N=je(f,"BANDWIDTH");N&&(T.stream.bandwidth=Number(N)),e.h.set(c,T),m=T}return f=m,f.stream.codecs!=="mjpg"?null:f.stream}catch(G){if(e.g.hls.ignoreImageStreamFailures)return null;throw G}})),E(u,Promise.all(o),2)):(a=u.h,u.return(a.filter(function(f){return f})))})}function KE(e,t,n){t=t.filter(function(c){var p=je(c,"URI")||"";return je(c,"TYPE")!="SUBTITLES"&&p!=""});var o={};t=w(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var u=Uy(a);o[u]?o[u].push(a):o[u]=[a]}for(var f in o)Jy(e,o[f],n)}function YE(e,t,n,o){var a=[],u=new Set;if(0<n.length){n=w(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var c=Dt(f,"METHOD");if(c!="NONE"&&c!="AES-128"&&(c=je(f,"KEYFORMAT")||"identity",f=(c=p1[c])?c(f,""):null)){if(f.keyIds){c=w(f.keyIds);for(var p=c.next();!p.done;p=c.next())u.add(p.value)}a.push(f)}}}for(n={},t=w(t),f=t.next();!f.done;f=t.next())f=f.value,c=Uy(f),n[c]?n[c].push(f):n[c]=[f];t=[];for(var m in n){p=n[m];var v=p[0];f=je(v,"FRAME-RATE"),c=Number(je(v,"AVERAGE-BANDWIDTH"))||Number(Dt(v,"BANDWIDTH"));var S=je(v,"RESOLUTION"),C=w(S?S.split("x"):[null,null]);S=C.next().value,C=C.next().value;var T=je(v,"VIDEO-RANGE");(v=je(v,"REQ-VIDEO-LAYOUT"))&&v.includes(",")&&(v=v.split(",").filter(function(b){return b=="CH-STEREO"||b=="CH-MONO"})[0]),v=v||"CH-MONO",p=qE(e,p,o,c),t.push.apply(t,L(QE(e,p.audio,p.video,c,S,C,f,T,v,a,u)))}return t.filter(function(b){return b!=null})}function qE(e,t,n,o){for(var a={audio:[],video:[]},u=new Map,f=[],c=!1,p=!1,m=w(t),v=m.next();!v.done;v=m.next()){var S=v.value;v=je(S,"AUDIO");var C=je(S,"VIDEO"),T=v||C;T&&(f.includes(T)||f.push(T),(S=je(S,"PATHWAY-ID"))&&u.set(T,S),v?c=!0:C&&(p=!0))}f.length&&n.length&&(m=n.filter(function(D){return f.includes(Dt(D,"GROUP-ID"))}),KE(e,m,u)),m=(u=f.sort().join(","))&&e.H.has(u)?e.H.get(u):[],c?a.audio.push.apply(a.audio,L(m)):p&&a.video.push.apply(a.video,L(m)),v=!1;var b=t.map(function(D){return Dt(D,"URI")});if(p=a.audio.find(function(D){return D&&D.Z().find(function(B){return b.includes(B)})}),c=Yy(e,t[0]),C=Sn("video",c),(T=Sn("audio",c))&&!C?(p="audio",v=0<a.audio.length):!a.audio.length&&!a.video.length&&T&&C?(p="video",c=[[C,T].join()]):a.audio.length&&p?(p="audio",v=!0):p=a.video.length&&!a.audio.length?"audio":"video",!v){var _=S=T=C=v=null;!m.length&&(n=n.find(function(D){var B=je(D,"URI")||"",N=je(D,"TYPE");return D=Dt(D,"GROUP-ID"),N!="SUBTITLES"&&B==""&&f.includes(D)}))&&(v=je(n,"LANGUAGE"),C=je(n,"NAME"),T=qy(n),Zy(n),S=je(n,"CHARACTERISTICS"),_=Qy(n)),e=eA(e,t,c,p,v,C,T,S,_),u&&(e.stream.groupId=u),m.length||(e.stream.bandwidth=o),a[e.stream.type]=[e]}return a}function Yy(e,t){var n=je(t,"CODECS")||"";e.da=0<n.length,e.da||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),n=t.join(",")),e=new Set,t=[],n=w(n.split(/\s*,\s*/));for(var o=n.next();!o.done;o=n.next()){o=o.value;var a=xi(o);e.has(a)||(t.push(o),e.add(a))}return t}function qy(e){return(e=je(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function Qy(e){return(e=je(e,"SAMPLE-RATE"))?parseInt(e,10):null}function Zy(e){return(e=je(e,"CHANNELS"))?e.includes("/JOC"):!1}function QE(e,t,n,o,a,u,f,c,p,m,v){for(var S=w(n),C=S.next();!C.done;C=S.next())c1(C.value.stream,a,u,f,c,p);for(a=e.g.disableAudio,(!t.length||a)&&(t=[null]),a=e.g.disableVideo,(!n.length||a)&&(n=[null]),a=[],t=w(t),u=t.next();!u.done;u=t.next())for(u=u.value,f=w(n),c=f.next();!c.done;c=f.next()){var T=c.value;(c=u?u.stream:null)&&(c.drmInfos=m,c.keyIds=v),(p=T?T.stream:null)&&(p.drmInfos=m,p.keyIds=v),S=u?u.stream.drmInfos:null,C=T?T.stream.drmInfos:null,T=T?T.Z().sort().join(","):"";var b=u?u.Z().sort().join(","):"";T=T+" - "+b,c&&p&&!P0(S,C)||e.Ba.has(T)||(c={id:e.u++,language:c?c.language:"und",disabledUntilTime:0,primary:!!c&&c.primary||!!p&&p.primary,audio:c,video:p,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},a.push(c),e.Ba.add(T))}return a}function ZE(e,t){t=Fy(t,"CLOSED-CAPTIONS"),t=w(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=je(o,"LANGUAGE");n=ct(a||"und"),a||(a=je(o,"NAME"))&&(n=a),a=Dt(o,"GROUP-ID"),o=Dt(o,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(a)||e.F.set(a,new Map),e.F.get(a).set(o,n)}}function Jy(e,t,n){for(var o=[],a=[],u=new Map,f=w(t),c=f.next();!c.done;c=f.next()){var p=c.value;c=Dt(p,"URI"),p=Dt(p,"GROUP-ID"),o.push(c),a.push(p),u.set(p,c)}if(f=a.sort().join(","),c=t[0],t="",p=Dt(c,"TYPE").toLowerCase(),p=="subtitles"&&(p=at),p==at)t=je(c,"CODECS")||"";else{a=w(a);for(var m=a.next();!m.done;m=a.next())if(m=m.value,e.G.has(m)){t=e.G.get(m);break}}if(a=o.sort().join(","),e.h.has(a))return e.h.get(a);if(m=e.u++,e.j){u=w(u);for(var v=u.next();!v.done;v=u.next()){var S=w(v.value);v=S.next().value,S=S.next().value,(v=n.get(v))&&zr(e.j,m,v,S)}}n=je(c,"LANGUAGE"),u=je(c,"NAME"),v=je(c,"DEFAULT")=="YES",S=p=="audio"?qy(c):null;var C=p=="audio"?Zy(c):!1,T=je(c,"CHARACTERISTICS"),b=je(c,"FORCED")=="YES";return c=p=="audio"?Qy(c):null,o=ml(e,m,o,t,p,n,v,u,S,null,T,b,c,C),o.stream&&(o.stream.groupId=f),e.H.has(f)?e.H.get(f).push(o):e.H.set(f,[o]),e.h.set(a,o),o}function JE(e,t){var n,o,a,u,f,c,p,m,v,S;return z(function(C){return C.g==1?(n=Dt(t,"URI"),o=je(t,"CODECS","jpeg")||"",e.h.has(n)?C.return(e.h.get(n)):(a=je(t,"LANGUAGE"),u=je(t,"NAME"),f=je(t,"CHARACTERISTICS"),c=ml(e,e.u++,[n],o,"image",a,!1,u,null,null,f,!1,null,!1),(p=je(t,"RESOLUTION"))?E(C,c.stream.createSegmentIndex(),3):C.B(2))):(C.g!=2&&(m=c.stream.segmentIndex.get(0),v=m.tilesLayout)&&(c.stream.width=Number(p.split("x")[0])*Number(v.split("x")[0]),c.stream.height=Number(p.split("x")[1])*Number(v.split("x")[1])),(S=je(t,"BANDWIDTH"))&&(c.stream.bandwidth=Number(S)),e.h.set(n,c),C.return(c))})}function eA(e,t,n,o,a,u,f,c,p){for(var m=e.u++,v=[],S=w(t),C=S.next();!C.done;C=S.next()){var T=C.value;C=Dt(T,"URI"),T=je(T,"PATHWAY-ID"),e.j&&T&&zr(e.j,m,T,C),v.push(C)}if(S=v.sort().join(","),e.h.has(S))return e.h.get(S);e:{if(t=je(t[0],"CLOSED-CAPTIONS"),o=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=w(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=nr(o,n),o=ml(e,m,v,n,o,a,!1,u,f,t,c,!1,p,!1),e.h.set(S,o),o}function ml(e,t,n,o,a,u,f,c,p,m,v,S,C,T){function b(q){var te,de,ce,he,me,we,Ie,Ne,ze,$e,Ze,Oe,Ft,Qt,pi,gn,Ai;return z(function(pt){switch(pt.g){case 1:return te=N.Z(),E(pt,ed(e,N.Z(),!0),2);case 2:if(de=pt.h,q.aborted)return pt.return();if(ce=de.uri,ce==de.originalUri||te.includes(ce)||B.push(ce),he=Gh(e.za,de.data),me=void 0,e.da||!e.g.hls.disableCodecGuessing){pt.B(3);break}return E(pt,Xy(e,he,_),4);case 4:we=pt.h,me=we.mimeType,o=we.codecs;case 3:return Ie=Pn(e),E(pt,n1(e,0,he,_,ce,o,a,u,f,c,p,m,v,S,C,T,me),5);case 5:if(Ne=pt.h,q.aborted)return pt.return();if(ze=Ne.stream,Pn(e)&&!Ie&&a1(e,he),N.Sb=Ne.Sb,N.rb=Ne.rb,N.td=Ne.td,N.sd=Ne.sd,N.Sc=Ne.Sc,N.Pd=Ne.Pd,N.Xa=Ne.Xa,N.Ya=Ne.Ya,N.Se=!0,D.segmentIndex=ze.segmentIndex,D.encrypted=ze.encrypted,D.drmInfos=ze.drmInfos,D.keyIds=ze.keyIds,D.mimeType=ze.mimeType,D.bandwidth=D.bandwidth||ze.bandwidth,D.codecs=D.codecs||ze.codecs,D.drmInfos.length&&e.i.newDrmInfo(D),$e=$t,a==$e.$||a==$e.P)for(Ze=w(e.h.values()),Oe=Ze.next();!Oe.done;Oe=Ze.next())Ft=Oe.value,Ft.Se||Ft.type!=a||(Ft.stream.mimeType=ze.mimeType);a==$e.na&&(Qt=ze.segmentIndex.get(0))&&Qt.aa&&(D.mimeType="application/mp4"),nA(e)&&(e.mb?qh(e,[N]):(e.mb=!0,pi=Array.from(e.h.values()),gn=pi.filter(function(In){return In.stream.segmentIndex}),qh(e,gn),Yh(e),Ai=e.m,0<Ai&&e.s.U(Ai))),j(pt)}})}function _(){return e.j&&1<n.length?ra(e.j,t):B.concat(zy([e.Y],n,e.o))}var D=o1(e,o,a,u,f,c,p,m,v,S,C,T),B=[],N={stream:D,type:a,gg:B,Z:_,Sb:0,rb:0,Pd:new Map,td:!1,sd:!1,Sc:!1,qe:-1,Xa:-1,Ya:-1,Se:!1},G=null,V=new AbortController;return D.createSegmentIndex=function(){return G||(V=new AbortController,G=new Promise(function(q){q(b(V.signal))}))},D.closeSegmentIndex=function(){G&&!D.segmentIndex&&V.abort(),D.segmentIndex&&(D.segmentIndex.release(),D.segmentIndex=null),G=null},N}function e1(e){var t=1/0;e=w(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.rb));return t}function tA(e){var t=1/0,n=1/0;e=w(e.h.values());for(var o=e.next();!o.done;o=e.next())o=o.value,o.stream.segmentIndex&&o.stream.type!="text"&&(t=Math.min(t,o.rb),n=Math.min(n,o.Sb));return t-n}function t1(e,t){var n=[];t=w(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.segmentIndex&&Dc(o.segmentIndex,function(a){n.push(a)});e.l.Xc(n)}function qh(e,t){if(!Pn(e))for(var n=e1(e),o=w(t),a=o.next();!a.done;a=o.next())a.value.stream.segmentIndex.bc(0,n);t1(e,t.map(function(u){return u.stream})),e.g.hls.ignoreManifestProgramDateTime?jE(e,t):FE(e,t)}function nA(e){if(!e.C)return!1;var t=[],n=[];e=w(e.C.variants);for(var o=e.next();!o.done;o=e.next())o=o.value,o.video&&t.push(o.video),o.audio&&n.push(o.audio);return!(0<t.length&&!t.some(function(a){return a.segmentIndex})||0<n.length&&!n.some(function(a){return a.segmentIndex}))}function n1(e,t,n,o,a,u,f,c,p,m,v,S,C,T,b,_,D){var B,N,G,V,q,te,de,ce,he,me,we,Ie,Ne,ze,$e,Ze,Oe,Ft,Qt,pi,gn,Ai,pt;return z(function(In){if(In.g==1){if(n.type!=1)throw new K(2,4,4017);B=Ei(n.g,"EXT-X-DEFINE"),N=Ky(e,B,a);var yn=rn(n.g,"EXT-X-PLAYLIST-TYPE"),jn=rn(n.g,"EXT-X-ENDLIST");return jn=yn&&yn.value=="VOD"||jn,yn=yn&&yn.value=="EVENT"&&!jn,yn=!jn&&!yn,jn?gl(e,yl):yn?gl(e,vl):gl(e,m1),Pn(e)&&Qh(e,n),D?In.B(2):E(In,rA(e,f,u,n,N,o),3)}if(In.g!=2&&(D=In.h),G=r1(n,D),V=G.drmInfos,q=G.keyIds,te=G.encrypted,de=G.Dg,te&&!V.length&&!de)throw new K(2,4,4026);return ce=o1(e,u,f,c,p,m,v,S,C,T,b,_),ce.encrypted=te,ce.drmInfos=V,ce.keyIds=q,ce.mimeType=D,he=Pn(e)?e.J.get(f):new Map,me=f1(e,n,ce,he,N,o),we=me.segments,(Ie=me.bandwidth)&&(ce.bandwidth=Ie),Pn(e)&&Qh(e,n),Ne=we[0].startTime,ze=we[we.length-1],$e=ze.endTime,Ze=new lt(we),ce.segmentIndex=Ze,Ft=(Oe=rn(n.g,"EXT-X-SERVER-CONTROL"))?Oe.getAttribute("CAN-SKIP-UNTIL")!=null:!1,Qt=Oe?Oe.getAttribute("CAN-BLOCK-RELOAD")!=null:!1,pi=Hr(n.g,"EXT-X-MEDIA-SEQUENCE",0),gn=i1(pi,we),Ai=gn.Xa,pt=gn.Ya,In.return({stream:ce,type:f,gg:[],Z:o,Sb:Ne,rb:$e,td:Ft,sd:Qt,Sc:!1,qe:-1,Xa:Ai,Ya:pt,Pd:he,Se:!1})})}function i1(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Xa:e,Ya:n};t=t[t.length-1];var o=t.g;return t.g.length?(n=o.length-1,o[o.length-1].l||(e++,n=0),{Xa:e,Ya:n}):(e++,t.m&&(n=0),{Xa:e,Ya:n})}function o1(e,t,n,o,a,u,f,c,p,m,v,S){var C=Zh(n,t)||Jh(n),T=[];if(p){p=w(p.split(","));for(var b=p.next();!b.done;b=p.next())T.push(b.value)}return p=void 0,b=null,n==at?p=T.includes("public.accessibility.transcribes-spoken-dialog")&&T.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":T.includes("public.accessibility.describes-video")&&(b="visually impaired"),T.length||p!=="subtitle"||T.push("subtitle"),{id:e.u++,originalId:u,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:C,codecs:t,kind:n==at?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:ct(o||"und"),originalLanguage:o,label:u,type:n,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:T,forced:m,channelsCount:f,audioSamplingRate:v,spatialAudio:S,closedCaptions:c,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:b,external:!1,fastSwitching:!1}}function r1(e,t){var n=[];if(e.segments){e=w(e.segments);for(var o=e.next();!o.done;o=e.next())o=Ei(o.value.g,"EXT-X-KEY"),n.push.apply(n,L(o))}o=e=!1;var a=[],u=new Set;n=w(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var c=Dt(f,"METHOD");if(c!="NONE"){if(e=!0,c=="AES-128")o=!0;else if(c=je(f,"KEYFORMAT")||"identity",f=(c=p1[c])?c(f,t):null){if(f.keyIds){c=w(f.keyIds);for(var p=c.next();!p.done;p=c.next())u.add(p.value)}a.push(f)}}}return{drmInfos:a,keyIds:u,encrypted:e,Dg:o}}function s1(e,t,n,o,a){if(!d.crypto||!d.crypto.subtle)throw Le("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new K(2,4,4042);var u=0,f=je(t,"IV","");if(f){var c=jo(f.substr(2));if(c.byteLength!=16)throw new K(2,4,4048)}else u=Hr(n.g,"EXT-X-MEDIA-SEQUENCE",0);var p={method:"AES-128",iv:c,firstMediaSequenceNumber:u,fetchKey:function(){var m,v,S,C,T;return z(function(b){if(b.g==1)return m=Xo(o(),Dt(t,"URI"),a),v=Yt(m,e.g.retryParameters),E(b,Gr(e,v,6),2);if(b.g!=3){if(S=b.h,!S.data||S.data.byteLength!=16)throw new K(2,4,4049);return C={name:"AES-CBC"},T=p,E(b,d.crypto.subtle.importKey("raw",S.data,C,!0,["decrypt"]),3)}T.cryptoKey=b.h,p.fetchKey=void 0,j(b)})}};return p}function Qh(e,t){var n=1/0,o=t.segments;if(o.length)for(var a=o.length-1;0<=a;){var u=rn(o[a].g,"EXTINF");if(u){n=Number(u.value.split(",")[0]);break}a--}if(o=rn(t.g,"EXT-X-TARGETDURATION"),!o)throw new K(2,4,4024,"EXT-X-TARGETDURATION");o=Number(o.value),(a=rn(t.g,"EXT-X-PART-INF"))&&(e.K=Number(Dt(a,"PART-TARGET"))),t=rn(t.g,"EXT-X-SERVER-CONTROL"),e.A&&e.K?(e.m=e.lb?5*e.K<=n?Math.min(e.K,e.m):Math.min(n,e.m):Math.min(e.K,e.m),e.ma=t?Number(Dt(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?t.getAttribute("HOLD-BACK"):null,e.ka=n?Number(n.value):0),e.Aa=Math.max(o,e.Aa)}function a1(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ma)t=e.ma;else if(e.ka)t=e.ka;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Aa*n}e.l.qf(0),e.l.ng(t),e.l.pc(!1)}function u1(e,t,n,o,a){var u=rn(n,"EXT-X-MAP");if(!u)return null;var f=Dt(u,"URI"),c=Xo(o(),f,a);if(f=[c.toString(),je(u,"BYTERANGE","")].join("-"),!e.W.has(f)){var p=void 0,m=null;n=w(n);for(var v=n.next();!v.done;v=n.next())v=v.value,v.name=="EXT-X-KEY"?Dt(v,"METHOD")=="AES-128"&&v.id<u.id&&(p=s1(e,v,t,o,a)):v.name=="EXT-X-BYTERANGE"&&v.id<u.id&&(m=v);t=iA(c,u,m,p),e.W.set(f,t)}return e.W.get(f)}function iA(e,t,n,o){var a=0,u=null;return t=je(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),u=Number(a[0]),a=Number(a[1]),u=a+u-1,o&&(n=u+1-a,n%16&&(u+=16-n%16))),new $n(function(){return e},a,u,null,null,null,o)}function oA(e,t,n,o,a,u,f,c,p){var m=o.g,v=rn(m,"EXTINF"),S=0,C=0,T=null;o.fb.length&&!e.A&&Le("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var b=null;if(!e.g.hls.ignoreManifestProgramDateTime){var _=rn(m,"EXT-X-PROGRAM-DATE-TIME");_&&_.value&&(b=S0(_.value))}var D=lo;if(rn(m,"EXT-X-GAP")&&(D=2),!v){if(o.fb.length==0)throw new K(2,4,4024,"EXTINF");if(!e.A)return null}var B=[];_=!1;var N=null,G=!1,V=!1;if(e.A&&o.fb.length){S=(f.mimeType=="video/mp4"||f.mimeType=="audio/mp4")&&d.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var q=b,te={},de=0;de<o.fb.length;te={Cc:te.Cc,md:te.md},de++){var ce=o.fb[de],he=de==0?n:B[B.length-1],me=de==0?a:he.endTime,we=Number(je(ce,"DURATION"))||e.K;if(we){var Ie=me+we,Ne=0,ze=null;if(ce.name=="EXT-X-PRELOAD-HINT"?(Ne=(Ne=je(ce,"BYTERANGE-START"))?Number(Ne):0,(he=je(ce,"BYTERANGE-LENGTH"))?ze=Ne+Number(he)-1:Ne&&(ze=Number.MAX_SAFE_INTEGER)):(Ne=je(ce,"BYTERANGE"),ze=w(l1(he,Ne)),Ne=ze.next().value,ze=ze.next().value),te.md=je(ce,"URI"),te.md){he=lo,je(ce,"GAP")=="YES"&&(he=2,G=!0),te.Cc=null;var $e=function(Oe){return function(){return Oe.Cc==null&&(Oe.Cc=Xo(c(),Oe.md,u)),Oe.Cc}}(te);S&&0<=Ne&&ze!=null&&(N=$e,_=!0),me=new We(me,Ie,$e,Ne,ze,t,0,0,1/0,[],"",null,q,he,p),ce.name=="EXT-X-PRELOAD-HINT"&&(me.Ue(),V=!0),je(ce,"INDEPENDENT")!="YES"&&0<de&&me.Od(),B.push(me),q&&(q+=we)}}}}if(v){if(v=Number(v.value.split(",")[0]),v==0)return null;S=a+v}else if(B.length)S=B[B.length-1].endTime;else return null;_&&(G||B[0].Qa!=0?(_=!1,N=null):B=[]),(v=rn(m,"EXT-X-BYTERANGE"))?(T=w(l1(n,v.value)),C=T.next().value,T=T.next().value):B.length&&(C=B[0].Qa,T=B[B.length-1].wa),n="",v=null,f.type=="image"&&(n="1x1",f=rn(m,"EXT-X-TILES"))&&(n=Dt(f,"LAYOUT"),(f=je(f,"DURATION"))&&(v=Number(f)));var Ze=null;return t=new We(a,S,function(){return N?N():(Ze==null&&(Ze=Xo(c(),o.h,u)),Ze||[])},C,T,t,0,0,1/0,B,n,v,b,D,p,0<B.length&&!!o.h),_&&(e.lb=!0,t.Zf(),V&&t.Ue()),t}function l1(e,t){var n=0,o=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.wa+1,o=n+t-1),[n,o]}function f1(e,t,n,o,a,u){var f=t.segments,c=void 0,p=Hr(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),m=Hr(t.g,"EXT-X-MEDIA-SEQUENCE",0),v=rn(t.g,"EXT-X-SKIP"),S=v?Number(je(v,"SKIPPED-SEGMENTS")):0,C=m+S,T=0;Pn(e)&&o.has(C)&&(T=o.get(C)),T===0&&e.ea==vl&&0<o.size&&!o.has(C)&&(T=e.l.eb());var b=[],_=null;v=[];for(var D=0;D<f.length;D++){var B=f[D],N=D==0?T:_.endTime;C=m+S+D,rn(B.g,"EXT-X-DISCONTINUITY")&&p++;for(var G=w(B.g),V=G.next();!V.done;V=G.next())V=V.value,V.name=="EXT-X-KEY"&&(Dt(V,"METHOD")=="AES-128"?c=s1(e,V,t,u,a):c=void 0);o.set(C,N),G=u1(e,t,B.g,u,a),!e.A&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.A=e.i.isLowLatencyMode()),(N=oA(e,G,_,B,N,a,n,u,c))&&((_=Hr(B.g,"EXT-X-BITRATE"))?v.push({bitrate:_,duration:N.endTime-N.startTime}):v.length&&(_=v.pop(),_.duration+=N.endTime-N.startTime,v.push(_)),_=N,N.i=p,e.g.hls.ignoreManifestProgramDateTime&&e.I!=null&&C<e.I||b.push(N))}if(t=void 0,v.length&&(t=v.reduce(function(q,te){return q+te.duration},0),t=Math.round(v.reduce(function(q,te){return q+te.bitrate*te.duration},0)/t*1e3)),v=b.some(function(q){return q.ca!=null})){for(n={},o=0;o<b.length;n={vc:n.vc,uc:n.uc,hd:n.hd,xb:n.xb,tc:n.tc},o++)if(n.xb=b[o],n.xb.ca==null)for(n.uc=0,n.vc=o,a=function(q){return function(){var te=b[q.vc];if(te){if(te.ca!=null)return te.ca+q.uc;q.uc-=te.endTime-te.startTime,q.vc+=1}return null}}(n),n.tc=0,n.hd=o,u=function(q){return function(){var te=b[q.hd];if(te){if(te!=q.xb&&(q.tc+=te.endTime-te.startTime),te.ca!=null)return te.ca+q.tc;--q.hd}return null}}(n);n.xb.ca==null;)n.xb.ca=u(),n.xb.ca==null&&(n.xb.ca=a())}if(v)for(n=w(b),o=n.next();!o.done;o=n.next())for(a=o.value,o=a.ca,a=w(a.g),u=a.next();!u.done;u=a.next())u=u.value,u.ca=o,o+=u.endTime-u.startTime;if(e=e.V,v&&e!=1/0)for(v=w(b),o=v.next();!o.done;o=v.next())o.value.tf(e);return{segments:b,bandwidth:t}}function Zh(e,t){if(e==at){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Jh(e){return e==at?"text/vtt":d1[e].mp4}function rA(e,t,n,o,a,u){var f,c,p,m,v,S,C,T,b,_,D,B,N;return z(function(G){switch(G.g){case 1:return f=Ri,c=Math.trunc((o.segments.length-1)/2),p=Xo(u(),o.segments[c].h,a),m=new Ut(p[0]),v=m.Ga.split(".").pop(),S=d1[t],(C=S[v])||(C=h1[v])||(C=Zh(t,n))?G.return(C):(b=1,_=Yt(p,e.g.retryParameters),re(G,2),_.method="HEAD",E(G,Gr(e,_,f,{type:b}),4));case 4:D=G.h,T=D.headers["content-type"],ie(G,3);break;case 2:if(B=se(G),!B||B.code!=1002&&B.code!=1001){G.B(3);break}return _.method="GET",E(G,Gr(e,_,f,{type:b}),6);case 6:N=G.h,T=N.headers["content-type"];case 3:return T?G.return(T.split(";")[0]):G.return(Jh(t))}})}function c1(e,t,n,o,a,u){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(o)||void 0,e.hdr=a||void 0,e.videoLayout=u||void 0)}function ed(e,t,n){return Gr(e,Yt(t,e.g.retryParameters),0,{type:n?2:3})}function sA(e){var t,n,o,a,u,f;z(function(c){switch(c.g){case 1:return e.i?(re(c,2),t=Date.now(),E(c,e.update(),4)):c.return();case 4:n=Date.now(),Pn(e)&&(o=(n-t)/1e3,e.kb.sample(1,o),a=e.m,u=Math.max(0,a-Y(e.kb)),e.s.U(u)),ie(c,3);break;case 2:if(f=se(c),!e.i)return c.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(f),c.return();f.severity=1,e.i.onError(f),e.s.U(.1);case 3:if(!e.i)return c.return();e.i.onManifestUpdated(),j(c)}})}function Pn(e){return e.ea!=yl}function gl(e,t){e.ea=t,e.l&&e.l.pc(!Pn(e)),Pn(e)||e.s.stop()}function Gr(e,t,n,o){if(!e.N)throw new K(2,7,7001);return t=e.i.networkingEngine.request(n,t,o),Oo(e.N,t),t.promise}ae("shaka.hls.HlsParser",pl);var h1={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},d1={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},p1={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new K(2,4,4040);if(d.shakaMediaKeysPolyfill)throw new K(2,4,4041);return ao("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Dt(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Dt(e,"URI"),t=Xh(t),t=Ve(t.data),t=ao("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=je(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=Dt(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(e=Dt(e,"URI"),e=Xh(e),e=Ve(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=mu(e,t,new Set,0),ao("com.microsoft.playready",[{initDataType:"cenc",initData:e}])):null},identity:function(e,t){if(t=="video/mp2t")throw new K(2,4,4040);if(d.shakaMediaKeysPolyfill)throw new K(2,4,4041);return e=Dt(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?ao("org.w3.clearkey",null):null}},yl="VOD",m1="EVENT",vl="LIVE",aA={zg:yl,oi:m1,xi:vl};fi["application/x-mpegurl"]=function(){return new pl},fi["application/vnd.apple.mpegurl"]=function(){return new pl};function uA(e){var t=0,n=Et(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var u=Ve(n,e,a);t.push({type:o,value:u}),e+=a}n=t}return n}function xl(e){if(e=g1(e))e:{e=w(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next())if(t=li(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function g1(e){return e=ui(e.textContent),e=uA(e).filter(function(t){return t.type===lA})[0],e?(e=zi(e.value,!0),(e=wr(e,"WRMHEADER"))?e:null):null}var lA=1,fA=new Map().set("com.microsoft.playready",xl).set("com.microsoft.playready.recommendation",xl).set("com.microsoft.playready.software",xl).set("com.microsoft.playready.hardware",xl);function Wr(e){if(!w1){w1=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Sl=ot("ftyp",t,o,t,n),t=ot("dref",SA),td=ot("dinf",t)}this.g=e}function Xr(e){for(var t=[],n=w(e.g),o=n.next();!o.done;o=n.next()){var a=t,u=a.push,f=o.value;o=ot;var c=f.id+1,p=f.stream.width||0,m=f.stream.height||0;f.type=="audio"&&(m=p=0);var v=f.duration*f.timescale,S=Math.floor(v/(mo+1));switch(v=Math.floor(v%(mo+1)),c=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(_t(c,4)),[0,0,0,0],L(_t(S,4)),L(_t(v,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],L(_t(p,2)),[0,0],L(_t(m,2)),[0,0])),c=ot("tkhd",c),p=ot,S=f.duration*f.timescale,m=Math.floor(S/(mo+1)),S=Math.floor(S%(mo+1)),v=f.stream.language,v=v.charCodeAt(0)-96<<10|v.charCodeAt(1)-96<<5|v.charCodeAt(2)-96,m=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(_t(f.timescale,4)),L(_t(m,4)),L(_t(S,4)),L(_t(v,2)),[0,0])),m=ot("mdhd",m),S=f,v=new Uint8Array([]),S.type){case"video":v=hA;break;case"audio":v=dA}S=ot("hdlr",v);e:{switch(f.type){case"video":f=ot("minf",ot("vmhd",vA),td,y1(f));break e;case"audio":f=ot("minf",ot("smhd",xA),td,y1(f));break e}f=new Uint8Array([])}f=p("mdia",m,S,f),o=o("trak",c,f),u.call(a,o)}for(t=Lt.apply(un,L(t)),u=e.g[0],n=ot,o=u.duration*u.timescale,a=Math.floor(o/(mo+1)),o=Math.floor(o%(mo+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(_t(u.timescale,4)),L(_t(a,4)),L(_t(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),a=ot("mvhd",a),o=[],e=w(e.g),p=e.next();!p.done;p=e.next())f=o,c=f.push,p=new Uint8Array([0,0,0,0].concat(L(_t(p.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),p=ot("trex",p),c.call(f,p);if(e=Lt.apply(un,L(o)),e=ot("mvex",e),o=[],u.encrypted){for(u=w(u.stream.drmInfos),f=u.next();!f.done;f=u.next())if(f=f.value,f.initData)for(f=w(f.initData),c=f.next();!c.done;c=f.next())o.push(c.value.initData);u=Lt.apply(un,L(o))}else u=new Uint8Array([]);return e=n("moov",a,t,e,u),t=new Uint8Array(Sl.byteLength+e.byteLength),t.set(Sl),t.set(e,Sl.byteLength),t}function y1(e){var t=ot,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var o=e.stream.height||0;if(0<e.la.byteLength)var a=ot("avcC",e.la);else{a=ot;for(var u=7,f=[],c=[],p=0,m=0,v=0,S=0;S<e.Ra.length;S++){var C=x1(e.Ra[S]);switch(C[0]&31){case 7:f.push(C),u+=C.length+2;break;case 8:c.push(C),u+=C.length+2}}for(0<f.length&&(p=f[0][1],v=f[0][2],m=f[0][3]),u=new Uint8Array(u),S=0,u[S++]=1,u[S++]=p,u[S++]=v,u[S++]=m,u[S++]=255,u[S++]=224|f.length,p=0;p<f.length;p++)u[S++]=(f[p].length&65280)>>8,u[S++]=f[p].length&255,u.set(f[p],S),S+=f[p].length;for(u[S++]=c.length,f=0;f<c.length;f++)u[S++]=(c[f].length&65280)>>8,u[S++]=c[f].length&255,u.set(c[f],S),S+=c[f].length;a=a("avcC",u)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(L(_t(n,2)),L(_t(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="avc1",c=v1(e),f=new Uint8Array([]),e.encrypted&&(f=ca(e),o="encv"),n=ot(o,n,a,c,f)}else e.codecs.includes("hvc1")&&(o=e.stream.width||0,a=e.stream.height||0,n=new Uint8Array([]),0<e.la.byteLength&&(n=ot("hvcC",e.la)),o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(L(_t(o,2)),L(_t(a,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),a="hvc1",c=v1(e),f=new Uint8Array([]),e.encrypted&&(f=ca(e),a="encv"),n=ot(a,o,n,c,f));break;case"audio":e.codecs.includes("mp3")?e=ot(".mp3",wl(e)):e.codecs.includes("ac-3")?(n=ot("dac3",e.fa),o="ac-3",a=new Uint8Array([]),e.encrypted&&(a=ca(e),o="enca"),e=ot(o,wl(e),n,a)):e.codecs.includes("ec-3")?(n=ot("dec3",e.fa),o="ec-3",a=new Uint8Array([]),e.encrypted&&(a=ca(e),o="enca"),e=ot(o,wl(e),n,a)):(0<e.fa.byteLength?n=ot("esds",e.fa):(n=ot,o=e.id+1,a=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,p=nr("audio",e.codecs.split(",")),m={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},c=m[f],(p==="mp4a.40.5"||p==="mp4a.40.29")&&(c=m[2*f]),f=parseInt(p.split(".").pop(),10),o=new Uint8Array([0,0,0,0,3,25].concat(L(_t(o,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|c>>>1,c<<7|a<<3,6,1,2])),n=n("esds",o)),o="mp4a",a=new Uint8Array([]),e.encrypted&&(a=ca(e),o="enca"),e=ot(o,wl(e),n,a)),n=e}return e=ot("stsd",wA,n),t("stbl",e,ot("stts",pA),ot("stsc",mA),ot("stsz",yA),ot("stco",gA))}function v1(e){if(!e.sa&&!e.ua)return new Uint8Array([]);var t=e.ua;return e=new Uint8Array([].concat(L(_t(e.sa,4)),L(_t(t,4)))),ot("pasp",e)}function wl(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(L(_t(e.stream.audioSamplingRate||44100,2)),[0,0]))}function ca(e){for(var t=ot,n=e.codecs.substring(0,e.codecs.indexOf(".")),o=0,a=0;a<n.length;a+=1)o|=n.charCodeAt(a)<<8*(n.length-a-1);n=new Uint8Array([].concat(L(_t(o,4)))),n=ot("frma",n),o=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),o=ot("schm",o),a=ot;var u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=w(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=w(f.keyIds);for(var c=f.next();!c.done;c=f.next())u=x1(c.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),u=ot("tenc",e,u),t("sinf",n,o,a("schi",u))}function ha(e){var t=[];e=w(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var o=t.push,a=o.apply,u=ot,f=new Uint8Array([0,0,0,0].concat(L(_t(n.data?n.data.gb:0,4))));f=ot("mfhd",f);var c,p=n.data?n.data.Oa:[],m=new Uint8Array(4+p.length);for(c=0;c<p.length;c++){var v=p[c].flags;m[c+4]=v.Ia<<4|v.La<<2|v.Ja}p=ot("sdtp",m);var S=p.length+92;m=ot,c=new Uint8Array([0,0,0,58].concat(L(_t(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),c=ot("tfhd",c),v=n.data?n.data.baseMediaDecodeTime:0;var C=Math.floor(v%(mo+1));v=new Uint8Array([1,0,0,0].concat(L(_t(Math.floor(v/(mo+1)),4)),L(_t(C,4)))),v=ot("tfdt",v);var T=S;S=n.data?n.data.Oa:[],C=S.length;var b=12+16*C,_=new Uint8Array(b);for(T+=8+b,_.set([n.type==="video"?1:0,0,15,1].concat(L(_t(C,4)),L(_t(T,4))),0),T=0;T<C;T++){var D=S[T];b=_t(D.duration,4);var B=_t(D.size,4),N=D.flags;D=_t(D.Ta,4),_.set([].concat(L(b),L(B),[N.Ua<<2|N.Ia,N.La<<6|N.Ja<<4|N.Va,N.Ha&61440,N.Ha&15],L(D)),12+16*T)}S=ot("trun",_),p=m("traf",c,v,S,p),u=u("moof",f,p),a.call(o,t,[u,cA(n)])}return Lt.apply(un,L(t))}function cA(e){return e=(e.data?e.data.Oa:[]).map(function(t){return t.data}),e=Lt.apply(un,L(e)),ot("mdat",e)}function _t(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function x1(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function ot(e){var t=Re.apply(1,arguments),n=S1[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],S1[e]=n);for(var o=8,a=t.length-1;0<=a;a--)o+=t[a].byteLength;for(a=new Uint8Array(o),a[0]=o>>24&255,a[1]=o>>16&255,a[2]=o>>8&255,a[3]=o&255,a.set(n,4),n=0,o=8;n<t.length;n++)a.set(t[n],o),o+=t[n].byteLength;return a}var w1=!1,mo=Math.pow(2,32)-1,S1={},hA=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),dA=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),pA=new Uint8Array([0,0,0,0,0,0,0,0]),mA=new Uint8Array([0,0,0,0,0,0,0,0]),gA=new Uint8Array([0,0,0,0,0,0,0,0]),yA=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),vA=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),xA=new Uint8Array([0,0,0,0,0,0,0,0]),wA=new Uint8Array([0,0,0,0,0,0,0,1]),Sl=new Uint8Array([]),SA=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),td=new Uint8Array([]);function nd(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.A=new Ue(5),this.o=new rt(function(){TA(e)}),this.u=new pr,this.m=new Map}s=nd.prototype,s.configure=function(e){this.g=e},s.start=function(e,t){var n=this;return z(function(o){if(o.g==1)return n.l=[e],n.h=t,E(o,id(n),2);if(!n.h)throw new K(2,7,7001);return o.return(n.j)})};function TA(e){var t;z(function(n){switch(n.g){case 1:return re(n,2),E(n,id(e),4);case 4:ie(n,3);break;case 2:t=se(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();j(n)}})}s.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.u.destroy()},s.update=function(){var e=this,t;return z(function(n){if(n.g==1)return re(n,2),E(n,id(e),4);if(n.g!=2)return ie(n,0);if(t=se(n),!e.h||!t)return n.return();e.h.onError(t),j(n)})},s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(){},s.banLocation=function(){};function id(e){var t,n,o,a,u,f,c;return z(function(p){if(p.g==1)return t=Yt(e.l,e.g.retryParameters),n=e.h.networkingEngine,o=Date.now(),a=n.request(0,t,{type:5}),Oo(e.u,a),E(p,a.promise,2);if(u=p.h,!e.h)return p.return();u.uri&&!e.l.includes(u.uri)&&e.l.unshift(u.uri);var m=u.uri,v=pc(u.data,"SmoothStreamingMedia");if(!v)throw new K(2,4,4046,m);if((m=e.g.mss.manifestPreprocessor)&&m(v),e.i||(e.i=new Je(null,0)),m=st(v,"IsLive",dc,!1))throw new K(2,4,4047);e.i.pc(!m);var S=st(v,"TimeScale",dn,1e7),C=st(v,"DVRWindowLength",dn);m&&(C===0||isNaN(C))&&(C=1/0);var T=st(v,"CanSeek",dc,!1);C===0&&T&&(C=1/0),T=null,C&&0<C&&(T=C/S),m&&!isNaN(e.g.availabilityWindowOverride)&&(T=e.g.availabilityWindowOverride),T==null&&(T=1/0),e.i.Xd(T),C=st(v,"Duration",dn,1/0),m||e.i.Pa(C/S),m={variants:[],textStreams:[],timescale:S,duration:C/S},T=kt(v,"Protection");var b;for(S=e.g.mss.keySystemsBySystemId,C=[],T=w(T),b=T.next();!b.done;b=T.next())C=C.concat(kt(b.value,"ProtectionHeader"));if(C.length){for(T=[],b=0;b<C.length;b++){var _=C[b],D=_.getAttribute("SystemID").toLowerCase(),B=S[D];if(B){var N=g1(_);if(N)e:{N=w(N.getElementsByTagName("DATA"));for(var G=N.next();!G.done;G=N.next())if(G=li(G.value,"KID")){N=ui(G.textContent),N=new Uint8Array([N[3],N[2],N[1],N[0],N[5],N[4],N[7],N[6]].concat(L(N.slice(8)))),N=xr(N);break e}N=null}else N=null;G=ui(_.textContent),D=jo(D.replace(/-/g,"")),D=[{initData:mu(G,D,new Set,0),initDataType:"cenc",keyId:N}],D=ao(B,D),N&&D.keyIds.add(N),(B=fA.get(B))&&(D.licenseServerUri=B(_)),T.push(D)}}S=T}else S=[];for(b=S,T=[],S=[],C=[],v=kt(v,"StreamIndex"),v=w(v),_=v.next();!_.done;_=v.next()){_=_.value,B=kt(_,"QualityLevel"),D=m.timescale,N=m.duration,G=kt(_,"c");for(var V=[],q=0,te=0;te<G.length;++te){var de=G[te],ce=G[te+1],he=st(de,"t",dn),me=st(de,"d",dn);if(de=st(de,"r",yu),!me)break;if(he=he??q,de=de||0,0>de)if(ce){if(ce=st(ce,"t",dn),ce==null)break;if(he>=ce)break;de=Math.ceil((ce-he)/me)-1}else{if(N==1/0)break;if(he/D>=N)break;de=Math.ceil((N*D-he)/me)-1}for(ce=0;ce<=de;++ce)q=he+me,V.push({start:he/D,end:q/D,zf:he}),he=q}for(D=V,B=w(B),N=B.next();!N.done;N=B.next())(N=CA(e,_,N.value,D,b,m))&&(N.type!="audio"||e.g.disableAudio?N.type!="video"||e.g.disableVideo?N.type!=at||e.g.disableText||C.push(N):S.push(N):T.push(N))}for(v=[],T=w(0<T.length?T:[null]),b=T.next();!b.done;b=T.next())for(b=b.value,_=w(0<S.length?S:[null]),N=_.next();!N.done;N=_.next())B=v,D=B.push,N=N.value,G=0,b&&b.bandwidth&&0<b.bandwidth&&(G+=b.bandwidth),N&&N.bandwidth&&0<N.bandwidth&&(G+=N.bandwidth),N={id:e.s++,language:b?b.language:"und",disabledUntilTime:0,primary:!!b&&b.primary||!!N&&N.primary,audio:b,video:N,bandwidth:G,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},D.call(B,N);m.variants=v,m.textStreams=C,e.j?(e.j.variants=m.variants,e.j.textStreams=m.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:m.variants,textStreams:m.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Nd()),Promise.resolve(),f=Date.now(),c=(f-o)/1e3,e.A.sample(1,c),j(p)})}function CA(e,t,n,o,a,u){var f=t.getAttribute("Type");if(f!=="audio"&&f!=="video"&&f!=="text")return Le("Ignoring unrecognized type:",f),null;var c=t.getAttribute("Language"),p=e.s++,m=st(n,"Bitrate",Wi),v=st(n,"MaxWidth",Wi),S=st(n,"MaxHeight",Wi),C=st(n,"Channels",Wi),T=st(n,"SamplingRate",Wi),b=u.duration;o.length&&(b=o[o.length-1].end-o[0].start);var _=e.i.getDuration();e.i.Pa(Math.min(b,_));var D={id:p,originalId:t.getAttribute("Name")||String(p),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:m||0,width:v||void 0,height:S||void 0,kind:"",encrypted:0<a.length,drmInfos:a,keyIds:new Set,language:ct(c||"und"),originalLanguage:c,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:C,audioSamplingRate:T,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:b,timescale:u.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1};if((a=t.getAttribute("Subtype"))&&((a=MA[a])&&D.roles.push(a),a==="main"&&(D.primary=!0)),a=n.getAttribute("FourCC"),(a===null||a==="")&&(a=t.getAttribute("FourCC")),!a){if(f==="audio")a="AAC";else if(f==="video")return Le('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!kA.includes(a.toUpperCase()))return Le("Codec not supported:",a),null;switch(n=EA(n,f,a,D),D.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return Le("Quality unsupported without CodecPrivateData",f),null;D.type="audio",D.mimeType="mss/audio/mp4",D.codecs=AA(a,n);break;case"video":if(!n)return Le("Quality unsupported without CodecPrivateData",f),null;D.type="video",D.mimeType="mss/video/mp4",D.codecs=bA(n);break;case"text":D.type=at,D.mimeType="application/mp4",(a==="TTML"||a==="DFXP")&&(D.codecs="stpp")}return D.createSegmentIndex=function(){if(D.segmentIndex)return Promise.resolve();if(e.m.has(D.id))var B=e.m.get(D.id);else B=[],D.type=="video"&&(B=D.mssPrivateData.codecPrivateData.split("00000001").slice(1)),B={id:D.id,type:D.type,codecs:D.codecs,encrypted:D.encrypted,timescale:D.mssPrivateData.timescale,duration:D.mssPrivateData.duration,Ra:B,fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:null,stream:D},B=Xr(new Wr([B])),e.m.set(D.id,B);return B=IA(e,new $n(function(){return[]},0,null,null,void 0,B),D,t,o),D.segmentIndex=new lt(B),Promise.resolve()},D.closeSegmentIndex=function(){D.segmentIndex&&(D.segmentIndex.release(),D.segmentIndex=null)},D}function EA(e,t,n,o){if(e=e.getAttribute("CodecPrivateData"))return e;if(t!=="audio")return null;t=o.channelsCount||2,e=o.audioSamplingRate||44100;var a={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return o=a[e],n==="AACH"?(n=new Uint8Array(4),e=a[2*e],n[0]=40|o>>1,n[1]=o<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|o>>1,n[1]=o<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function AA(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function bA(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function IA(e,t,n,o,a){var u=o.getAttribute("Url").replace("{bitrate}",String(n.bandwidth));o=[];var f={};a=w(a);for(var c=a.next();!c.done;f={Bc:f.Bc},c=a.next())f.Bc=c.value,o.push(new We(f.Bc.start,f.Bc.end,function(p){return function(){return on(e.l,[u.replace("{start time}",String(p.Bc.zf))])}}(f),0,null,t,0,0,n.mssPrivateData.duration));return o}ae("shaka.mss.MssParser",nd);var kA="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),MA={CAPT:"main",SUBT:"alternate",DESC:"main"};fi["application/vnd.ms-sstr+xml"]=function(){return new nd};function T1(e,t,n,o,a,u){if(200<=n&&299>=n&&n!=202)return{uri:a||o,originalUri:o,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};a=null;try{a=uo(t)}catch{}throw new K(n==401||n==403?2:1,1,1001,o,n,a,e,u)}function od(){}function Tl(e,t,n,o,a){var u=new DA;Rs(t.headers).forEach(function(m,v){u.append(v,m)});var f=new LA,c={Ff:!1,tg:!1};if(e=_A(e,n,{body:t.body||void 0,headers:u,method:t.method,signal:f.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},c,o,a,t.streamDataCallback),e=new Ot(e,function(){return c.Ff=!0,f.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var p=new rt(function(){c.tg=!0,f.abort()});p.U(t/1e3),e.finally(function(){p.stop()})}return e}function _A(e,t,n,o,a,u,f){var c,p,m,v,S,C,T,b,_,D,B,N,G;return z(function(V){switch(V.g){case 1:return c=RA,p=PA,C=S=0,T=Date.now(),re(V,2),E(V,c(e,n),4);case 4:if(m=V.h,u(C1(m.headers)),n.method=="HEAD"){V.B(5);break}return b=m.clone().body.getReader(),D=(_=m.headers.get("Content-Length"))?parseInt(_,10):0,B=function(q){function te(){var de,ce;return z(function(he){switch(he.g){case 1:return re(he,2),E(he,b.read(),4);case 4:de=he.h,ie(he,3);break;case 2:return se(he),he.return();case 3:if(de.done){he.B(5);break}if(S+=de.value.byteLength,!f){he.B(5);break}return E(he,f(de.value),5);case 5:ce=Date.now(),(100<ce-T||de.done)&&(a(ce-T,S-C,D-S),C=S,T=ce),de.done?q.close():(q.enqueue(de.value),te()),j(he)}})}te()},new p({start:B}),E(V,m.arrayBuffer(),6);case 6:v=V.h;case 5:ie(V,3);break;case 2:throw N=se(V),o.Ff?new K(1,1,7001,e,t):o.tg?new K(1,1,1003,e,t):new K(1,1,1002,e,N,t);case 3:return G=C1(m.headers),V.return(T1(G,v,m.status,e,m.url,t))}})}function C1(e){var t={};return e.forEach(function(n,o){t[o.trim()]=n}),t}function E1(){if(d.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(d.Response){if(!new Response("").body)return!1}else return!1;return!(!d.fetch||!d.AbortController)}ae("shaka.net.HttpFetchPlugin",od),od.isSupported=E1,od.parse=Tl;var RA=d.fetch,LA=d.AbortController,PA=d.ReadableStream,DA=d.Headers;E1()&&(Fi("http",Tl,2,!0),Fi("https",Tl,2,!0),Fi("blob",Tl,2,!0));function A1(){}function Cl(e,t,n,o,a){var u=new NA,f=Date.now(),c=0,p=new Promise(function(m,v){u.open(t.method,e,!0),u.responseType="arraybuffer",u.timeout=t.retryParameters.timeout,u.withCredentials=t.allowCrossSiteCredentials,u.onabort=function(){v(new K(1,1,7001,e,n))};var S=!1;u.onreadystatechange=function(){if(u.readyState==2&&!S){var T=b1(u);a(T),S=!0}},u.onload=function(){var T=b1(u),b=u.response;try{var _=T1(T,b,u.status,e,u.responseURL,n);m(_)}catch(D){v(D)}},u.onerror=function(T){v(new K(1,1,1002,e,T,n))},u.ontimeout=function(){v(new K(1,1,1003,e,n))},u.onprogress=function(T){var b=Date.now();(100<b-f||T.lengthComputable&&T.loaded==T.total)&&(o(b-f,T.loaded-c,T.total-T.loaded),c=T.loaded,f=b)};for(var C in t.headers)u.setRequestHeader(C.toLowerCase(),t.headers[C]);u.send(t.body)});return new Ot(p,function(){return u.abort(),Promise.resolve()})}function b1(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}ae("shaka.net.HttpXHRPlugin",A1),A1.parse=Cl;var NA=d.XMLHttpRequest;Fi("http",Cl,1,!0),Fi("https",Cl,1,!0),Fi("blob",Cl,1,!0);function I1(e,t,n,o){this.g=e,this.i=t,this.groupId=n,this.h=o}function rd(e){return e.Z().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Qa+":"+e.wa}function OA(e,t){return _u(e.g.Z(),e.g.Qa,e.g.wa,t.streaming.retryParameters)}function k1(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function M1(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}k1.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function _1(e){var t=this;this.o=e,this.j=new Map,this.i=new mr(function(){return sd(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new k1}_1.prototype.destroy=function(){return this.i.destroy()};function UA(e,t,n){e.m=t,e.l=n}function sd(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function BA(e,t,n,o,a,u){gt(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var c,p,m,v,S,C,T;return z(function(b){if(b.g==1)return E(b,FA(e,n),2);if(c=b.h,e.i.g)throw new K(2,9,7001);if(a)for(v in p=Ve(c),m=new x0(p),m.data)S=Number(v),C=m.data[S],T=m.g[S],e.l(C,T);e.g.close(o,c.byteLength);var _=e.g;return e.m(_.i==0?0:_.j/_.i,e.g.h),b.return(u(c))})});e.j.set(t,f)}function jA(e){return z(function(t){return t.g==1?E(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function FA(e,t){var n,o,a,u;return z(function(f){return f.g==1?(n=Ri,o=e.o.request(n,t),a=function(){return o.abort()},e.h.push(a),E(f,o.promise,2)):(u=f.h,wn(e.h,a),f.return(u.data))})}function El(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new bt,e.onabort=function(o){o.preventDefault(),n.g.reject()},e.onerror=function(o){o.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}El.prototype.abort=function(){var e=this;return z(function(t){if(t.g==1){try{e.i.abort()}catch{}return re(t,2),E(t,e.g,4)}if(t.g!=2)return ie(t,0);se(t),j(t)})};function ad(e,t){return new Promise(function(n,o){var a=e.h.openCursor();a.onerror=o,a.onsuccess=function(){var u;return z(function(f){if(f.g==1)return a.result==null?(n(),f.return()):(u=a.result,E(f,t(u.key,u.value,u),2));u.continue(),j(f)})}})}El.prototype.store=function(){return this.h},El.prototype.promise=function(){return this.g};function ud(e){this.h=e,this.g=[]}ud.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function qo(e,t){return Al(e,t,"readwrite")}function Al(e,t,n){n=e.h.transaction([t],n);var o=new El(n,t);return e.g.push(o),o.promise().then(function(){wn(e.g,o)},function(){wn(e.g,o)}),o}function Qo(e,t,n){this.h=new ud(e),this.i=t,this.g=n}s=Qo.prototype,s.destroy=function(){return this.h.destroy()},s.hasFixedKeySpace=function(){return!0},s.addSegments=function(){return R1(this.i)},s.removeSegments=function(e,t){return L1(this,this.i,e,t)},s.getSegments=function(e){var t=this,n;return z(function(o){return o.g==1?E(o,P1(t,t.i,e),2):(n=o.h,o.return(n.map(function(a){return t.Hf(a)})))})},s.addManifests=function(){return R1(this.g)},s.updateManifest=function(){return Promise.reject(new K(2,9,9016,"Cannot modify values in "+this.g))};function zA(e,t,n){e=qo(e.h,e.g);var o=e.store();return o.get(t).onsuccess=function(){o.put(n,t)},e.promise()}s.updateManifestExpiration=function(e,t){var n=qo(this.h,this.g),o=n.store();return o.get(e).onsuccess=function(a){(a=a.target.result)&&(a.expiration=t,o.put(a,e))},n.promise()},s.removeManifests=function(e,t){return L1(this,this.g,e,t)},s.getManifests=function(e){var t=this,n;return z(function(o){return o.g==1?E(o,P1(t,t.g,e),2):(n=o.h,o.return(Promise.all(n.map(function(a){return t.Mc(a)}))))})},s.getAllManifests=function(){var e=this,t,n;return z(function(o){return o.g==1?(t=Al(e.h,e.g,"readonly"),n=new Map,E(o,ad(t,function(a,u){var f;return z(function(c){if(c.g==1)return E(c,e.Mc(u),2);f=c.h,n.set(a,f),j(c)})}),2)):o.g!=3?E(o,t.promise(),3):o.return(n)})},s.Hf=function(e){return e},s.Mc=function(e){return Promise.resolve(e)};function R1(e){return Promise.reject(new K(2,9,9011,"Cannot add new value to "+e))}s.add=function(e,t){var n=this,o,a,u,f,c,p,m;return z(function(v){if(v.g==1){for(o=qo(n.h,e),a=o.store(),u=[],f={},c=w(t),p=c.next();!p.done;f={nd:f.nd},p=c.next())m=p.value,f.nd=a.add(m),f.nd.onsuccess=function(S){return function(){u.push(S.nd.result)}}(f);return E(v,o.promise(),2)}return v.return(u)})};function L1(e,t,n,o){e=qo(e.h,t),t=e.store();var a={};n=w(n);for(var u=n.next();!u.done;a={ld:a.ld},u=n.next())a.ld=u.value,t.delete(a.ld).onsuccess=function(f){return function(){return o(f.ld)}}(a);return e.promise()}function P1(e,t,n){var o,a,u,f,c,p,m;return z(function(v){if(v.g==1){for(o=Al(e.h,t,"readonly"),a=o.store(),u={},f=[],c={},p=w(n),m=p.next();!m.done;c={zc:c.zc,xc:c.xc},m=p.next())c.xc=m.value,c.zc=a.get(c.xc),c.zc.onsuccess=function(S){return function(){S.zc.result==null&&f.push(S.xc),u[S.xc]=S.zc.result}}(c);return E(v,o.promise(),2)}if(f.length)throw new K(2,9,9012,"Could not find values for "+f);return v.return(n.map(function(S){return u[S]}))})}function da(e){this.g=new ud(e)}da.prototype.destroy=function(){return this.g.destroy()},da.prototype.getAll=function(){var e=this,t,n;return z(function(o){return o.g==1?(t=Al(e.g,"session-ids","readonly"),n=[],E(o,ad(t,function(a,u){n.push(u)}),2)):o.g!=3?E(o,t.promise(),3):o.return(n)})},da.prototype.add=function(e){var t=qo(this.g,"session-ids"),n=t.store();e=w(e);for(var o=e.next();!o.done;o=e.next())n.add(o.value);return t.promise()},da.prototype.remove=function(e){var t=this,n;return z(function(o){return o.g==1?(n=qo(t.g,"session-ids"),E(o,ad(n,function(a,u,f){e.includes(u.sessionId)&&f.delete()}),2)):E(o,n.promise(),0)})};function mn(){this.g=new Map}mn.prototype.destroy=function(){for(var e=[],t=w(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},mn.prototype.init=function(){var e=this;pa.forEach(function(a,u){(a=a())&&e.g.set(u,a)});for(var t=[],n=w(this.g.values()),o=n.next();!o.done;o=n.next())t.push(o.value.init());return Promise.all(t)};function D1(e){var t=null;if(e.g.forEach(function(n,o){n.getCells().forEach(function(a,u){a.hasFixedKeySpace()||t||(t={path:{Wa:o,va:u},va:a})})}),t)return t;throw new K(2,9,9013,"Could not find a cell that supports add-operations")}function VA(e,t){e.g.forEach(function(n,o){n.getCells().forEach(function(a,u){t({Wa:o,va:u},a)})})}function bl(e,t,n){if(e=e.g.get(t),!e)throw new K(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new K(2,9,9013,"Could not find cell with name "+n);return t}function HA(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function $A(e){var t=Array.from(e.g.keys());if(!t.length)throw new K(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function GA(e){var t,n,o;return z(function(a){return a.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(o=pa,o.forEach(function(u){(u=u())&&t.push(u)})),E(a,Promise.all(t.map(function(u){return u.erase()})),2)):n?a.B(0):E(a,Promise.all(t.map(function(u){return u.destroy()})),0)})}function N1(e,t){pa.set(e,t)}ae("shaka.offline.StorageMuxer",mn),mn.unregister=function(e){pa.delete(e)},mn.register=N1,mn.prototype.destroy=mn.prototype.destroy;var pa=new Map;function ma(){Qo.apply(this,arguments)}Z(ma,Qo),ma.prototype.updateManifestExpiration=function(e,t){var n=this,o,a,u;return z(function(f){return o=qo(n.h,n.g),a=o.store(),u=new bt,a.get(e).onsuccess=function(c){(c=c.target.result)?(c.expiration=t,a.put(c),u.resolve()):u.reject(new K(2,9,9012,"Could not find values for "+e))},E(f,Promise.all([o.promise(),u]),0)})},ma.prototype.Mc=function(e){var t,n,o,a,u,f;return z(function(c){if(c.g==1){for(t=[],n=0;n<e.periods.length;++n)o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=o-e.periods[n].startTime,u=WA(e.periods[n],a),t.push(u);return E(c,Ty(t),2)}return f=c.h,c.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function WA(e,t){KA(e);for(var n=w(e.streams),o=n.next();!o.done;o=n.next());return e.streams.map(function(a){return XA(a,e.startTime,t)})}function XA(e,t,n){var o=e.initSegmentUri?O1(e.initSegmentUri):null,a=t+e.presentationTimeOffset,u=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:o,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var c=O1(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:c,initSegmentKey:o,appendWindowStart:t,appendWindowEnd:u,timestampOffset:a,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}ma.prototype.Hf=function(e){return{data:e.data}};function O1(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new K(2,9,9004,"Could not parse uri "+e)}function KA(e){var t=e.streams.filter(function(c){return c.contentType=="audio"});if(e=e.streams.filter(function(c){return c.contentType=="video"}),!t.every(function(c){return c.variantIds})||!e.every(function(c){return c.variantIds})){for(var n=w(t),o=n.next();!o.done;o=n.next())o.value.variantIds=[];for(n=w(e),o=n.next();!o.done;o=n.next())o.value.variantIds=[];if(n=0,e.length&&!t.length){var a=n++,u=w(e);for(o=u.next();!o.done;o=u.next())o.value.variantIds.push(a)}if(!e.length&&t.length)for(a=n++,u=w(t),o=u.next();!o.done;o=u.next())o.value.variantIds.push(a);if(e.length&&t.length)for(t=w(t),o=t.next();!o.done;o=t.next())for(o=o.value,a=w(e),u=a.next();!u.done;u=a.next()){u=u.value;var f=n++;o.variantIds.push(f),u.variantIds.push(f)}}}function Il(){Qo.apply(this,arguments)}Z(Il,Qo),Il.prototype.Mc=function(e){var t,n,o,a,u,f;return z(function(c){if(c.g==1){for(t=[],n=0;n<e.periods.length;++n){o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=o-e.periods[n].startTime;for(var p=e.periods[n],m=[],v=w(p.streams),S=v.next();!S.done;S=v.next())S=S.value,S.variantIds.length!=0&&m.push(YA(S,p.startTime,p.startTime+a));u=m,t.push(u)}return E(c,Ty(t),2)}return f=c.h,c.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function YA(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){return{startTime:t+o.startTime,endTime:t+o.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:o.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function ld(){Qo.apply(this,arguments)}Z(ld,Qo),s=ld.prototype,s.hasFixedKeySpace=function(){return!1},s.addSegments=function(e){return this.add(this.i,e)},s.addManifests=function(e){return this.add(this.g,e)},s.updateManifest=function(e,t){return zA(this,e,t)},s.Mc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function U1(){this.m=this.j=this.i=this.h=this.g=this.l=null}s=U1.prototype,s.init=function(){var e=this,t=new bt,n=!1,o=new rt(function(){n=!0,t.reject(new K(2,9,9017))});o.U(5);var a=d.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!n){var u=a.result;e.l=u;var f=u.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new ma(u,"segment","manifest"):null,e.g=f,f=u.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new Il(u,"segment-v2","manifest-v2"):null,e.h=f,f=u.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new Il(u,"segment-v3","manifest-v3"):null,e.i=f,f=u.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new ld(u,"segment-v5","manifest-v5"):null,e.j=f,u=u.objectStoreNames.contains("session-ids")?new da(u):null,e.m=u,o.stop(),t.resolve()}},a.onupgradeneeded=function(){for(var u=a.result,f=w(["segment-v5","manifest-v5","session-ids"]),c=f.next();!c.done;c=f.next())c=c.value,u.objectStoreNames.contains(c)||u.createObjectStore(c,{autoIncrement:!0})},a.onerror=function(u){n||(t.reject(new K(2,9,9001,a.error)),o.stop(),u.preventDefault())},t},s.destroy=function(){var e=this;return z(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return E(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return E(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),j(t)}})},s.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},s.getEmeSessionCell=function(){return this.m},s.erase=function(){var e=this;return z(function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return E(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),E(t,qA(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,E(t,e.init(),0)}})};function qA(){var e=new bt,t=d.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new K(2,9,9001,t.error)),n.preventDefault()},e}N1("idb",function(){return ar()||Ms()||!d.indexedDB?null:new U1});function Di(e,t,n,o){this.g=e,this.i=t,this.h=n,this.l=o,this.j=["offline:",e,"/",t,"/",n,"/",o].join("")}Di.prototype.Wa=function(){return this.i},Di.prototype.va=function(){return this.h},Di.prototype.key=function(){return this.l},Di.prototype.toString=function(){return this.j};function fd(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var o=e[3];return o&&t!=null?new Di(t,n,o,Number(e[4])):null}function B1(e,t){this.h=e,this.g=t}function j1(e,t){var n=new Je(null,0);n.Pa(t.duration);var o=t.streams.filter(function(m){return m.type=="audio"}),a=t.streams.filter(function(m){return m.type=="video"});o=QA(e,o,a,n),a=t.streams.filter(function(m){return m.type==at}).map(function(m){return kl(e,m,n)});var u=t.streams.filter(function(m){return m.type=="image"}).map(function(m){return kl(e,m,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var c=w(o.values()),p=c.next();!p.done;p=c.next())p=p.value,p.audio&&p.audio.encrypted&&(p.audio.drmInfos=f),p.video&&p.video.encrypted&&(p.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(o.values()),textStreams:a,imageStreams:u,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function QA(e,t,n,o){for(var a=new Set,u=w(t),f=u.next();!f.done;f=u.next()){var c=w(f.value.variantIds);for(f=c.next();!f.done;f=c.next())a.add(f.value)}for(u=w(n),f=u.next();!f.done;f=u.next())for(c=w(f.value.variantIds),f=c.next();!f.done;f=c.next())a.add(f.value);for(u=new Map,a=w(a),f=a.next();!f.done;f=a.next())f=f.value,u.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=w(t),a=t.next();!a.done;a=t.next())for(a=a.value,f=kl(e,a,o),c=w(a.variantIds),a=c.next();!a.done;a=c.next())a=u.get(a.value),a.language=f.language,a.primary=a.primary||f.primary,a.audio=f;for(n=w(n),t=n.next();!t.done;t=n.next())for(a=t.value,t=kl(e,a,o),f=w(a.variantIds),a=f.next();!a.done;a=f.next())a=u.get(a.value),a.primary=a.primary||t.primary,a.video=t;return u}function kl(e,t,n){var o=t.segments.map(function(a){return ZA(e,a)});return n.Xc(o),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new lt(o),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching}}function ZA(e,t){var n=new Di("segment",e.h,e.g,t.dataKey);return new We(t.startTime,t.endTime,function(){return[n.toString()]},0,null,t.initSegmentKey!=null?JA(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function JA(e,t){var n=new Di("segment",e.h,e.g,t);return new $n(function(){return[n.toString()]},0,null)}function F1(){this.g=null}s=F1.prototype,s.configure=function(){},s.start=function(e,t){var n=this,o,a,u,f,c,p,m;return z(function(v){switch(v.g){case 1:if(o=fd(e),n.g=o,o==null||o.g!="manifest")throw new K(2,1,9004,e);return a=new mn,ye(v,2),E(v,a.init(),4);case 4:return E(v,bl(a,o.Wa(),o.va()),5);case 5:return u=v.h,E(v,u.getManifests([o.key()]),6);case 6:return f=v.h,c=f[0],p=new B1(o.Wa(),o.va()),m=j1(p,c),t.makeTextStreamsForClosedCaptions(m),v.return(m);case 2:return ne(v),E(v,a.destroy(),7);case 7:ue(v,0)}})},s.stop=function(){return Promise.resolve()},s.update=function(){},s.onExpirationUpdated=function(e,t){var n=this,o,a,u,f,c,p,m;return z(function(v){switch(v.g){case 1:return o=n.g,a=new mn,re(v,2,3),E(v,a.init(),5);case 5:return E(v,bl(a,o.Wa(),o.va()),6);case 6:return u=v.h,E(v,u.getManifests([o.key()]),7);case 7:if(f=v.h,c=f[0],p=c.sessionIds.includes(e),m=c.expiration==null||c.expiration>t,!p||!m){v.B(3);break}return E(v,u.updateManifestExpiration(o.key(),t),3);case 3:return ne(v),E(v,a.destroy(),10);case 10:ue(v,0);break;case 2:se(v),v.B(3)}})},s.onInitialVariantChosen=function(){},s.banLocation=function(){},fi["application/x-offline-manifest"]=function(){return new F1};function z1(){}function V1(e){var t=fd(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=dr(e)):e=t&&t.g=="segment"?e4(t.key(),t):No(new K(2,1,9004,e)),e}function e4(e,t){var n=new mn;return dr(void 0).pa(function(){return n.init()}).pa(function(){return bl(n,t.Wa(),t.va())}).pa(function(o){return o.getSegments([t.key()])}).pa(function(o){return{uri:t,data:o[0].data,headers:{}}}).finally(function(){return n.destroy()})}ae("shaka.offline.OfflineScheme",z1),z1.plugin=V1,Fi("offline",V1);function H1(e,t,n){var o,a,u,f,c,p;return z(function(m){switch(m.g){case 1:o=[];for(var v=[],S=w(n),C=S.next();!C.done;C=S.next()){C=C.value;for(var T=!1,b=w(v),_=b.next();!_.done;_=b.next())if(_=_.value,n4(_.info,C)){_.sessionIds.push(C.sessionId),T=!0;break}T||v.push({info:C,sessionIds:[C.sessionId]})}a=w(v),u=a.next();case 2:if(u.done){m.B(4);break}return f=u.value,c=t4(e,t,f),E(m,c,5);case 5:p=m.h,o=o.concat(p),u=a.next(),m.B(2);break;case 4:return m.return(o)}})}function t4(e,t,n){var o,a;return z(function(u){switch(u.g){case 1:return o=new vu({Tb:t,onError:function(){},Ud:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),re(u,2),o.configure(e),E(u,Lw(o,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ie(u,3);break;case 2:return se(u),E(u,o.destroy(),5);case 5:return u.return([]);case 3:return a=[],E(u,Promise.all(n.sessionIds.map(function(f){return z(function(c){if(c.g==1)return re(c,2),E(c,Nw(o,f),4);if(c.g!=2)return a.push(f),ie(c,0);se(c),j(c)})})),6);case 6:return E(u,o.destroy(),7);case 7:return u.return(a)}})}function n4(e,t){function n(o,a){return o.robustness==a.robustness&&o.contentType==a.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&vi(e.audioCapabilities,t.audioCapabilities,n)&&vi(e.videoCapabilities,t.videoCapabilities,n)}function i4(e,t,n){var o=t.presentationTimeline.getDuration();return t=$1(t),{offlineUri:null,originalManifestUri:e,duration:o,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function cd(e,t){var n=j1(new B1(e.Wa(),e.va()),t),o=t.appMetadata||{};return n=$1(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:o,isIncomplete:t.isIncomplete||!1}}function $1(e){var t=[],n=ic(e.variants);n=w(n);for(var o=n.next();!o.done;o=n.next())t.push(fr(o.value));for(e=w(e.textStreams),n=e.next();!n.done;n=e.next())t.push(ru(n.value));return t}function o4(){this.g={}}function r4(e,t){var n=t.audio,o=t.video;if(n&&!o&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&o&&(e.g[o.id]=o.bandwidth||t.bandwidth),n&&o){var a=n.bandwidth||393216,u=o.bandwidth||t.bandwidth-a;0>=u&&(u=t.bandwidth),e.g[n.id]=a,e.g[o.id]=u}}function s4(e,t){e.g[t.id]=t.bandwidth||2048}function G1(e,t){return e=e.g[t],e==null&&(e=0),e}function Wt(e){var t=this;if(e&&e.constructor!=pe)throw new K(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Ob()):(this.h=Mr(),this.g=new Tt),this.i=[],this.j=[];var n=!e;this.l=new mr(function(){var o,a,u,f,c;return z(function(p){switch(p.g){case 1:return E(p,Promise.all(t.j.map(function(m){return sd(m)})),2);case 2:for(o=function(){},a=[],u=w(t.i),f=u.next();!f.done;f=u.next())c=f.value,a.push(c.then(o,o));return E(p,Promise.all(a),3);case 3:if(!n){p.B(4);break}return E(p,t.g.destroy(),4);case 4:t.h=null,t.g=null,j(p)}})})}function hd(){if(wi())e:{for(var e=w(pa.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}s=Wt.prototype,s.destroy=function(){return this.l.destroy()},s.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Zc(e,t)),_r(this.h,e)},s.getConfiguration=function(){var e=Mr();return _r(e,this.h,Mr()),e},s.Ob=function(){return this.g},s.store=function(e,t,n){var o=this,a=this.getConfiguration(),u=new _1(this.g);return this.j.push(u),t=a4(this,e,t||{},function(){var f;return z(function(c){return c.g==1?n?c.B(2):E(c,Hc(e,o.g,a.manifest.retryParameters),3):(c.g!=2&&(n=c.h),f=O0(e,n||null),c.return(f()))})},a,u),t=new Ot(t,function(){return sd(u)}),t.finally(function(){wn(o.j,u)}),S4(this,t)};function a4(e,t,n,o,a,u){var f,c,p,m,v,S,C,T,b,_,D,B,N,G;return z(function(V){switch(V.g){case 1:return Ml(),c=f=null,p=new mn,S=v=m=null,re(V,2,3),E(V,o(),5);case 5:return f=V.h,E(V,g4(e,t,f,a),6);case 6:if(C=V.h,en(e),T=!C.presentationTimeline.R()&&!C.presentationTimeline.Rb(),!T)throw new K(2,9,9005,t);return E(V,y4(e,C,function(q){S=S||q},a),7);case 7:if(c=V.h,en(e),S)throw S;return E(V,l4(C,c,a),8);case 8:return E(V,p.init(),9);case 9:return en(e),E(V,D1(p),10);case 10:return m=V.h,en(e),b=f4(c,C,t,n,a,u),_=b.Ah,D=b.vf,E(V,m.va.addManifests([_]),11);case 11:if(B=V.h,en(e),v=B[0],en(e),S)throw S;return E(V,u4(e,D,v,_,u,a,m.va,C,c),12);case 12:return en(e),Y1(C,_,c,a),E(V,m.va.updateManifest(v,_),13);case 13:return en(e),N=new Di("manifest",m.path.Wa,m.path.va,v),V.return(cd(N,_));case 3:return ne(V),E(V,p.destroy(),14);case 14:if(!f){V.B(15);break}return E(V,f.stop(),15);case 15:if(!c){V.B(17);break}return E(V,c.destroy(),17);case 17:ue(V,0);break;case 2:if(G=se(V),v==null){V.B(19);break}return E(V,W1(v),19);case 19:throw S||G}})}function u4(e,t,n,o,a,u,f,c,p){var m,v,S,C,T,b,_,D,B,N;return z(function(G){switch(G.g){case 1:if(m={},v=0,S=function(V,q){var te,de,ce,he,me,we,Ie;return z(function(Ne){if(Ne.g==1){for(te={},de=w(V),ce=de.next();!ce.done;te={Ib:te.Ib},ce=de.next())te.Ib=ce.value,he=OA(te.Ib,u),me=te.Ib.i,we=te.Ib.h,Ie=function(ze){return function($e){var Ze,Oe,Ft;return z(function(Qt){if(Qt.g==1)return E(Qt,f.addSegments([{data:$e}]),2);Ze=Qt.h,en(e),Oe=ze.Ib.g,Ft=rd(Oe),m[Ft]=Ze[0],v+=$e.byteLength,j(Qt)})}}(te),BA(a,te.Ib.groupId,he,me,we,Ie);return E(Ne,jA(a),2)}return q?(en(e),Y1(c,o,p,u),E(Ne,f.updateManifest(n,o),0)):Ne.B(0)})},C=!1,re(G,2),!dd(c)||!C||K1(c)){G.B(4);break}return E(G,S(t.filter(function(V){return V.h}),!0),5);case 5:return en(e),t=t.filter(function(V){return!V.h}),T=m,b=v,m={},v=0,E(G,X1(f,n,o,T,b,function(){return en(e)}),6);case 6:en(e);case 4:if(C){G.B(7);break}return E(G,S(t,!1),8);case 8:return en(e),_=m,D=v,m={},v=0,E(G,X1(f,n,o,_,D,function(){return en(e)}),9);case 9:en(e);case 7:ie(G,0);break;case 2:return B=se(G),N=Object.values(m),E(G,f.removeSegments(N,function(){}),10);case 10:throw B}})}function W1(e){var t,n,o,a;return z(function(u){switch(u.g){case 1:return t=new mn,E(u,t.init(),2);case 2:return E(u,D1(t),3);case 3:return n=u.h,o=new Di("manifest",n.path.Wa,n.path.va,e),E(u,t.destroy(),4);case 4:return a=new Wt,E(u,a.remove(o.toString()),0)}})}function X1(e,t,n,o,a,u){var f,c,p,m,v,S,C,T,b,_,D;return z(function(B){switch(B.g){case 1:for(f=!1,re(B,2),c=!0,p=w(n.streams),m=p.next();!m.done;m=p.next())for(v=m.value,S=w(v.segments),C=S.next();!C.done;C=S.next())T=C.value,b=T.pendingSegmentRefId?o[T.pendingSegmentRefId]:null,b!=null&&(T.dataKey=b,T.pendingSegmentRefId=void 0),b=T.pendingInitSegmentRefId?o[T.pendingInitSegmentRefId]:null,b!=null&&(T.initSegmentKey=b,T.pendingInitSegmentRefId=void 0),T.pendingSegmentRefId&&(c=!1),T.pendingInitSegmentRefId&&(c=!1);return n.size+=a,c&&(n.isIncomplete=!1),E(B,e.updateManifest(t,n),4);case 4:f=!0,u(),ie(B,0);break;case 2:return _=se(B),E(B,W1(t),5);case 5:if(f){B.B(6);break}return D=Object.values(o),E(B,e.removeSegments(D,function(){}),6);case 6:throw _}})}function l4(e,t,n){var o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G,V,q,te,de,ce,he,me,we,Ie,Ne,ze;return z(function($e){switch($e.g){case 1:return o={width:1/0,height:1/0},Z2(e,n.restrictions,o),E($e,Vp(t,e,n.offline.usePersistentLicense),2);case 2:for(a=[],u=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,c=n.preferredAudioCodecs,Fp(e,f,c,u),p=w(e.variants),m=p.next();!m.done;m=p.next())v=m.value,a.push(fr(v));for(S=w(e.textStreams),C=S.next();!C.done;C=S.next())T=C.value,a.push(ru(T));for(b=w(e.imageStreams),_=b.next();!_.done;_=b.next())D=_.value,a.push(ec(D));return E($e,n.offline.trackSelectionCallback(a),3);case 3:for(B=$e.h,N=e.presentationTimeline.getDuration(),G=0,V=w(B),q=V.next();!q.done;q=V.next())te=q.value,de=te.bandwidth*N/8,G+=de;return re($e,4),E($e,n.offline.downloadSizeCallback(G),6);case 6:if(ce=$e.h,!ce)throw new K(2,9,9014);ie($e,5);break;case 4:throw he=se($e),he instanceof K?he:new K(2,9,9015);case 5:for(me=new Set,we=new Set,Ie=new Set,Ne=w(B),q=Ne.next();!q.done;q=Ne.next())ze=q.value,ze.type=="variant"&&me.add(ze.id),ze.type=="text"&&we.add(ze.id),ze.type=="image"&&Ie.add(ze.id);e.variants=e.variants.filter(function(Ze){return me.has(Ze.id)}),e.textStreams=e.textStreams.filter(function(Ze){return we.has(Ze.id)}),e.imageStreams=e.imageStreams.filter(function(Ze){return Ie.has(Ze.id)}),E4(e),j($e)}})}function f4(e,t,n,o,a,u){var f=i4(n,t,o),c=a.offline.progressCallback;UA(u,function(T,b){f.size=b,c(f,T)},function(T,b){p&&a.offline.usePersistentLicense&&m==b&&Ds(e,"cenc",T)});var p=dd(t)&&!K1(t),m=null;p&&(m=A4.get(e.g.keySystem));for(var v=new o4,S=w(t.textStreams),C=S.next();!C.done;C=S.next())v.g[C.value.id]=52;for(S=w(t.imageStreams),C=S.next();!C.done;C=S.next())s4(v,C.value);for(C=w(t.variants),S=C.next();!S.done;S=C.next())r4(v,S.value);return v=v4(u,v,t,a),u=v.streams,v=v.vf,C=e.g,S=a.offline.usePersistentLicense,C&&S&&(C.initData=[]),{Ah:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Qc(),streams:u,sessionIds:S?I0(e):[],drmInfo:C,appMetadata:o,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},vf:v}}function dd(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function K1(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function Y1(e,t,n,o){if(t.expiration=n.Qc(),n=I0(n),t.sessionIds=o.offline.usePersistentLicense?n:[],dd(e)&&o.offline.usePersistentLicense&&!n.length)throw new K(2,9,9007)}s.remove=function(e){return pd(this,c4(this,e))};function c4(e,t){var n,o,a,u,f,c;return z(function(p){switch(p.g){case 1:if(Ml(),n=fd(t),n==null||n.g!="manifest")throw new K(2,9,9004,t);return o=n,a=new mn,ye(p,2),E(p,a.init(),4);case 4:return E(p,bl(a,o.Wa(),o.va()),5);case 5:return u=p.h,E(p,u.getManifests([o.key()]),6);case 6:return f=p.h,c=f[0],E(p,Promise.all([h4(e,c,a),d4(u,o,c)]),2);case 2:return ne(p),E(p,a.destroy(),8);case 8:ue(p,0)}})}function q1(e,t){for(var n=[],o=w(e.streams),a=o.next();!a.done;a=o.next())a=a.value,t&&a.type=="video"?n.push({contentType:Rn(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||a.type!="audio"||n.push({contentType:Rn(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function h4(e,t,n){return z(function(o){return E(o,C4(e.g,e.h.drm,n,t),0)})}function d4(e,t,n){function o(){}var a=T4(n);return cd(t,n),Promise.all([e.removeSegments(a,o),e.removeManifests([t.key()],o)])}s.Oh=function(){return pd(this,p4(this))};function p4(e){var t,n,o,a,u,f,c,p,m,v;return z(function(S){switch(S.g){case 1:return Ml(),t=e.g,n=e.h.drm,o=new mn,a=!1,ye(S,2),E(S,o.init(),4);case 4:u=[],HA(o,function(C){return u.push(C)}),f=w(u),c=f.next();case 5:if(c.done){S.B(2);break}return p=c.value,E(S,p.getAll(),8);case 8:return m=S.h,E(S,H1(n,t,m),9);case 9:return v=S.h,E(S,p.remove(v),10);case 10:v.length!=m.length&&(a=!0),c=f.next(),S.B(5);break;case 2:return ne(S),E(S,o.destroy(),11);case 11:ue(S,3);break;case 3:return S.return(!a)}})}s.list=function(){return pd(this,m4())};function m4(){var e,t,n;return z(function(o){switch(o.g){case 1:return Ml(),e=[],t=new mn,ye(o,2),E(o,t.init(),4);case 4:return n=Promise.resolve(),VA(t,function(a,u){n=n.then(function(){var f;return z(function(c){if(c.g==1)return E(c,u.getAllManifests(),2);f=c.h,f.forEach(function(p,m){p=cd(new Di("manifest",a.Wa,a.va,m),p),e.push(p)}),j(c)})})}),E(o,n,2);case 2:return ne(o),E(o,t.destroy(),6);case 6:ue(o,3);break;case 3:return o.return(e)}})}function g4(e,t,n,o){var a,u,f,c,p;return z(function(m){if(m.g==1)return a=null,u=e.g,f={networkingEngine:u,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(v){a=v},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return o.abr.defaultBandwidthEstimate}},n.configure(o.manifest),en(e),E(m,n.start(t,f),2);if(m.g!=3)return c=m.h,en(e),p=Q1(c),E(m,Promise.all(uc(p,function(v){return v.createSegmentIndex()})),3);if(en(e),a)throw a;return m.return(c)})}function y4(e,t,n,o){var a;return z(function(u){return u.g==1?(a=new vu({Tb:e.g,onError:n,Ud:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(o.drm),E(u,Rw(a,t.variants,o.offline.usePersistentLicense),2)):u.g!=3?E(u,A0(a),3):u.return(a)})}function v4(e,t,n,o){var a=new Map,u=Q1(n),f=new Map;u=w(u);for(var c=u.next();!c.done;c=u.next()){c=c.value;var p=x4(e,t,n,c,o,a);f.set(c.id,p)}for(e=w(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),vf:Array.from(a.values())}}function x4(e,t,n,o,a,u){var f={id:o.id,originalId:o.originalId,groupId:o.groupId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,videoLayout:o.videoLayout,kind:o.kind,language:o.language,originalLanguage:o.originalLanguage,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout,external:o.external,fastSwitching:o.fastSwitching},c=a.offline.numberOfParallelDownloads,p=0;return w4(o,n.presentationTimeline.eb(),function(m){var v=rd(m),S=void 0;if(!u.has(v)){var C=m.endTime-m.startTime;C=G1(t,o.id)*C,C=M1(e.g,C),u.set(v,new I1(m,C,p,!1))}m.aa&&(S=rd(m.aa),u.has(S)||(C=.5*G1(t,o.id),C=M1(e.g,C),u.set(S,new I1(m.aa,C,p,!0)))),f.segments.push({pendingInitSegmentRefId:S,initSegmentKey:S?0:null,startTime:m.startTime,endTime:m.endTime,appendWindowStart:m.appendWindowStart,appendWindowEnd:m.appendWindowEnd,timestampOffset:m.timestampOffset,tilesLayout:m.tilesLayout,pendingSegmentRefId:v,dataKey:0}),p=(p+1)%c}),f}function w4(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var o=e.segmentIndex.get(t);o;)n(o),o=e.segmentIndex.get(++t)}function en(e){if(e.l.g)throw new K(2,9,7001)}function Ml(){if(!hd())throw new K(2,9,9e3)}function pd(e,t){return z(function(n){return n.g==1?(e.i.push(t),ye(n,2),E(n,t,4)):n.g!=2?n.return(n.h):(ne(n),wn(e.i,t),ue(n,0))})}function S4(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){wn(e.i,n)})}function T4(e){var t=new Set;e=w(e.streams);for(var n=e.next();!n.done;n=e.next()){n=w(n.value.segments);for(var o=n.next();!o.done;o=n.next())o=o.value,o.initSegmentKey!=null&&t.add(o.initSegmentKey),t.add(o.dataKey)}return Array.from(t)}function C4(e,t,n,o){var a,u,f;return z(function(c){return c.g==1?o.drmInfo?(a=$A(n),u=o.sessionIds.map(function(p){return{sessionId:p,keySystem:o.drmInfo.keySystem,licenseUri:o.drmInfo.licenseServerUri,serverCertificate:o.drmInfo.serverCertificate,audioCapabilities:q1(o,!1),videoCapabilities:q1(o,!0)}}),E(c,H1(t,e,u),2)):c.return():c.g!=3?(f=c.h,E(c,a.remove(f),3)):E(c,a.add(u.filter(function(p){return!f.includes(p.sessionId)})),0)})}function Q1(e){for(var t=new Set,n=w(e.textStreams),o=n.next();!o.done;o=n.next())t.add(o.value);for(n=w(e.imageStreams),o=n.next();!o.done;o=n.next())t.add(o.value);for(e=w(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function E4(e){e.variants.map(function(u){return u.video});var t=new Set(e.variants.map(function(u){return u.audio}));e=e.textStreams;for(var n=w(t),o=n.next();!o.done;o=n.next()){o=w(t);for(var a=o.next();!a.done;a=o.next());}for(t=w(e),n=t.next();!n.done;n=t.next())for(n=w(e),o=n.next();!o.done;o=n.next());}ae("shaka.offline.Storage",Wt),Wt.deleteAll=function(){var e;return z(function(t){return t.g==1?(e=new mn,ye(t,2),E(t,GA(e),2)):t.g!=5?(ne(t),E(t,e.destroy(),5)):ue(t,0)})},Wt.prototype.list=Wt.prototype.list,Wt.prototype.removeEmeSessions=Wt.prototype.Oh,Wt.prototype.remove=Wt.prototype.remove,Wt.prototype.store=Wt.prototype.store,Wt.prototype.getNetworkingEngine=Wt.prototype.Ob,Wt.prototype.getConfiguration=Wt.prototype.getConfiguration,Wt.prototype.configure=Wt.prototype.configure,Wt.prototype.destroy=Wt.prototype.destroy,Wt.support=hd;var A4=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");ph.offline=hd;function qt(){}function fn(e,t){for(e={priority:t||0,callback:e},t=0;t<ga.length;t++)if(ga[t].priority<e.priority){ga.splice(t,0,e);return}ga.push(e)}ae("shaka.polyfill",qt),qt.register=fn,qt.installAll=function(){for(var e=w(ga),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Le("Error installing polyfill!",n)}}};var ga=[];function ya(){this.g=new _l}function Z1(){d.AbortController||(d.AbortController=ya,d.AbortSignal=_l)}ya.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Ge("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},I.Object.defineProperties(ya.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),qt.AbortController=ya,ya.install=Z1;function _l(){ht.call(this),this.h=!1,this.g=void 0,this.onabort=null}Z(_l,ht),I.Object.defineProperties(_l.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),fn(Z1);function J1(){}function ev(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=w(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())b4(t.value)}function b4(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}qt.Aria=J1,J1.install=ev,fn(ev);function tv(){}function nv(){xx()}qt.EncryptionScheme=tv,tv.install=nv,fn(nv,-2);function iv(){}function ov(){if(d.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Kr),document.addEventListener("webkitfullscreenerror",Kr),document.addEventListener("mozfullscreenchange",Kr),document.addEventListener("mozfullscreenerror",Kr),document.addEventListener("MSFullscreenChange",Kr),document.addEventListener("MSFullscreenError",Kr)}}function Kr(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}qt.Fullscreen=iv,iv.install=ov,fn(ov);function Rl(){}function rv(){var e=!0;(eu()||Rt("PlayStation 5")||ur()||Rt("Web0S")||Do()||ar()||Rt("PC=EOS")||Rt("Hisense")||Rt("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),sv=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=I4)}function I4(e){var t,n,o,a,u,f,c,p,m,v,S,C,T,b,_,D,B,N,G;return z(function(V){switch(V.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return V.return(t);if(n=e.video,o=e.audio,e.type=="media-source"){if(!wi())return V.return(t);if(n){if(ar())if(d.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var q=n.contentType;n.width&&n.height&&(q+="; width="+n.width+"; height="+n.height),n.framerate&&(q+="; framerate="+n.framerate),n.transferFunction==="pq"&&(q+="; eotf=smpte2084"),a=cast.__platform__.canDisplayType(q)}else a=ke(n.contentType);else Do()?(u=n.contentType,n.width&&n.height&&(u+="; width="+n.width,u+="; height="+n.height),n.framerate&&(u+="; framerate="+n.framerate),n.bitrate&&(u+="; bitrate="+n.bitrate),a=ke(u)):a=ke(n.contentType);if(!a)return V.return(t)}if(o&&(ar()&&o.spatialRendering?(c=o.contentType+"; spatialRendering=true",f=ke(c)):f=ke(o.contentType),!f))return V.return(t)}else if(e.type=="file"){if(n&&(p=n.contentType,m=ks(p),!m)||o&&(v=o.contentType,S=ks(v),!S))return V.return(t)}else return V.return(t);if(!e.keySystemConfiguration)return t.supported=!0,V.return(Promise.resolve(t));if(C=e.keySystemConfiguration,T=[],b=[],C.audio&&(_={robustness:C.audio.robustness||"",contentType:e.audio.contentType},Do()&&e.audio.contentType.includes('codecs="ac-3"')&&(_={robustness:_.robustness,contentType:'audio/mp4; codecs="ec-3"'}),T.push(_)),C.video&&(D={robustness:C.video.robustness||"",contentType:e.video.contentType},b.push(D)),B={initDataTypes:[C.initDataType],distinctiveIdentifier:C.distinctiveIdentifier,persistentState:C.persistentState,sessionTypes:C.sessionTypes},T.length&&(B.audioCapabilities=T),b.length&&(B.videoCapabilities=b),N=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,re(V,3),N in Ll){G=Ll[N],V.B(5);break}return E(V,navigator.requestMediaKeySystemAccess(C.keySystem,[B]),6);case 6:G=V.h,Ll[N]=G;case 5:ie(V,4);break;case 3:se(V);case 4:G&&(t.supported=!0,t.keySystemAccess=G);case 2:return V.return(t)}})}qt.MediaCapabilities=Rl,Rl.install=rv;var sv=null;Rl.originalMcap=sv;var Ll={};Rl.memoizedMediaKeySystemAccessRequests_=Ll,fn(rv,-1);function av(){}function uv(){var e=tu();d.MediaSource&&(ar()?fv():e?10>=e?d.MediaSource=null:12>=e?(lv(),k4()):15>=e&&lv():Qf()?fv():(Ja()||Za()||Rt("Tizen 4"))&&M4()),d.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&_4()}function lv(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Re.apply(0,arguments));return t.abort=function(){},t}}function k4(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function fv(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return t.split(";")[0].split("/")[1]!="mp2t"&&e(t)}}function M4(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return xi(t)!="opus"&&e(t)}}function _4(){var e=MediaSource.isTypeSupported;Rt("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),o=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>o)return e(t);var a=n[o].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),u=a.findIndex(function(f){return f.startsWith("vp09")});return 0<=u&&(a[u]="vp9",n[o]='codecs="'+a.join(",")+'"',t=n.join("; ")),e(t)})}qt.MediaSource=av,av.install=uv,fn(uv);function cv(){}function hv(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?R4():d.orientation!=null&&L4())}function R4(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function L4(){function e(){switch(d.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Pl;screen.orientation=t,e(),d.addEventListener("orientationchange",function(){e();var n=new Ge("change");t.dispatchEvent(n)})}qt.Orientation=cv,cv.install=hv;function Pl(){ht.call(this),this.type="",this.angle=0}Z(Pl,ht),Pl.prototype.lock=function(e){function t(o){return screen.lockOrientation?screen.lockOrientation(o):screen.mozLockOrientation?screen.mozLockOrientation(o):screen.msLockOrientation?screen.msLockOrientation(o):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Pl.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},fn(hv);function md(){}var gd,yd,vd,xd,wd,Sd;function P4(e,t){try{var n=new Dl(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function D4(e){var t=this.mediaKeys;return t&&t!=e&&dv(t,null),delete this.mediaKeys,(this.mediaKeys=e)?dv(e,this):Promise.resolve()}function N4(e){if(e=Ve(e.initData),Et(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=zi(e.subarray(4),!0),e=Vi(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Pt(e),this.dispatchEvent(t)}qt.PatchedMediaKeysApple=md,md.uninstall=function(){gd&&(gd=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",yd),HTMLMediaElement.prototype.setMediaKeys=vd,d.MediaKeys=xd,d.MediaKeySystemAccess=wd,navigator.requestMediaKeySystemAccess=Sd,yd=Sd=vd=wd=xd=null,d.shakaMediaKeysPolyfill=!1)},md.install=function(e){d.HTMLVideoElement&&d.WebKitMediaKeys&&(e!==void 0&&e&&(gd=!0,yd=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),vd=HTMLMediaElement.prototype.setMediaKeys,xd=d.MediaKeys,wd=d.MediaKeySystemAccess,Sd=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=D4,d.MediaKeys=va,d.MediaKeySystemAccess=Dl,navigator.requestMediaKeySystemAccess=P4,d.shakaMediaKeysPolyfill=!0)};function Dl(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=w(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var o=!1,a=!1;if(n.audioCapabilities)for(var u=w(n.audioCapabilities),f=u.next();!f.done;f=u.next())f=f.value,f.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),a=!0));if(n.videoCapabilities)for(n=w(n.videoCapabilities),f=n.next();!f.done;f=n.next())u=f.value,u.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(t.videoCapabilities.push(u),a=!0));o||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=a?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Dl.prototype.createMediaKeys=function(){var e=new va(this.keySystem);return Promise.resolve(e)},Dl.prototype.getConfiguration=function(){return this.g};function va(e){this.h=new WebKitMediaKeys(e),this.g=new Ct}va.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Td(this.h)},va.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function dv(e,t){if(e.g.Za(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",N4);try{return Ar(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}va.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Td(e){ht.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ct,this.sessionId="",this.expiration=NaN,this.closed=new bt,this.keyStatuses=new pv}Z(Td,ht),s=Td.prototype,s.generateRequest=function(e,t){var n=this;this.h=new bt;try{var o=this.l.createSession("video/mp4",Ve(t));this.i=o,this.sessionId=o.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(a){n.h&&(n.h.resolve(),n.h=null),a=new Map().set("messageType",n.keyStatuses.Pb()==null?"license-request":"license-renewal").set("message",Pt(a.message)),a=new Ge("message",a),n.dispatchEvent(a)}),this.j.D(o,"webkitkeyadded",function(){n.g&&(Nl(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(o,"webkitkeyerror",function(){var a=Error("EME PatchedMediaKeysApple key error");if(a.errorCode=n.i.error,n.h!=null)n.h.reject(a),n.h=null;else if(n.g!=null)n.g.reject(a),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Nl(n,"output-not-allowed");break;default:Nl(n,"internal-error")}}),Nl(this,"status-pending")}catch(a){this.h.reject(a)}return this.h},s.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},s.update=function(e){this.g=new bt;try{this.i.update(Ve(e))}catch(t){this.g.reject(t)}return this.g},s.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Za()}catch(e){this.closed.reject(e)}return this.closed},s.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Nl(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Ge("keystatuseschange"),e.dispatchEvent(t)}function pv(){this.size=0,this.g=void 0}s=pv.prototype,s.Pb=function(){return this.g},s.forEach=function(e){this.g&&e(this.g,xu.value())},s.get=function(e){if(this.has(e))return this.g},s.has=function(e){var t=xu.value();return!!(this.g&&nt(e,t))},s.entries=function(){},s.keys=function(){},s.values=function(){};function mv(){}function gv(){!d.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=O4,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=U4,d.MediaKeys=Ol,d.MediaKeySystemAccess=Cd,d.shakaMediaKeysPolyfill=!0)}function O4(){return Promise.reject(Error("The key system specified is not supported."))}function U4(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}qt.PatchedMediaKeysNop=mv,mv.install=gv;function Ol(){throw new TypeError("Illegal constructor.")}Ol.prototype.createSession=function(){},Ol.prototype.setServerCertificate=function(){},Ol.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Cd(){throw this.keySystem="",new TypeError("Illegal constructor.")}Cd.prototype.getConfiguration=function(){},Cd.prototype.createMediaKeys=function(){},fn(gv,-10);function yv(){}function vv(){if(!(!d.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)kd="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=B4,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=j4,d.MediaKeys=xa,d.MediaKeySystemAccess=Ul,d.shakaMediaKeysPolyfill=!0}}function Ed(e){var t=kd;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function B4(e,t){try{var n=new Ul(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function j4(e){var t=this.mediaKeys;return t&&t!=e&&xv(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&xv(e,this),Promise.resolve()}qt.PatchedMediaKeysWebkit=yv,yv.install=vv;function Ul(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var o=!1,a=document.getElementsByTagName("video");a=a.length?a[0]:document.createElement("video"),t=w(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:u.initDataTypes,sessionTypes:["temporary"],label:u.label},c=!1;if(u.audioCapabilities)for(var p=w(u.audioCapabilities),m=p.next();!m.done;m=p.next())m=m.value,m.contentType&&(c=!0,a.canPlayType(m.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(m),o=!0));if(u.videoCapabilities)for(p=w(u.videoCapabilities),m=p.next();!m.done;m=p.next())m=m.value,m.contentType&&(c=!0,a.canPlayType(m.contentType,this.g)&&(f.videoCapabilities.push(m),o=!0));if(c||(o=a.canPlayType("video/mp4",this.g)||a.canPlayType("video/webm",this.g)),u.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):o=!1),o){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ul.prototype.createMediaKeys=function(){var e=new xa(this.g);return Promise.resolve(e)},Ul.prototype.getConfiguration=function(){return this.h};function xa(e){this.l=e,this.h=null,this.g=new Ct,this.i=[],this.j=new Map}function xv(e,t){e.h=t,e.g.Za();var n=kd;t&&(e.g.D(t,n+"needkey",function(o){var a=new CustomEvent("encrypted");a.initDataType="cenc",a.initData=Pt(o.initData),e.h.dispatchEvent(a)}),e.g.D(t,n+"keymessage",function(o){var a=Ad(e,o.sessionId);a&&(o=new Map().set("messageType",a.keyStatuses.Pb()==null?"licenserequest":"licenserenewal").set("message",o.message),o=new Ge("message",o),a.h&&(a.h.resolve(),a.h=null),a.dispatchEvent(o))}),e.g.D(t,n+"keyadded",function(o){(o=Ad(e,o.sessionId))&&(Bl(o,"usable"),o.g&&o.g.resolve(),o.g=null)}),e.g.D(t,n+"keyerror",function(o){var a=Ad(e,o.sessionId);if(a){var u=Error("EME v0.1b key error"),f=o.errorCode;f.systemCode=o.systemCode,u.errorCode=f,!o.sessionId&&a.h?(o.systemCode==45&&(u.message="Unsupported session type."),a.h.reject(u),a.h=null):o.sessionId&&a.g?(a.g.reject(u),a.g=null):(u=o.systemCode,o.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Bl(a,"output-restricted"):u==1?Bl(a,"expired"):Bl(a,"internal-error"))}}))}xa.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new bd(t,this.l,e),this.i.push(e),e},xa.prototype.setServerCertificate=function(){return Promise.resolve(!1)},xa.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Ad(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function bd(e,t,n){ht.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new bt,this.keyStatuses=new Sv}Z(bd,ht);function wv(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var o=Ve(Vi("LOAD_SESSION|"+n));else{var a=Vi("PERSISTENT|");o=Lt(a,t)}else o=Ve(t)}catch(f){return Promise.reject(f)}e.h=new bt;var u=Ed("generateKeyRequest");try{e.j[u](e.i,o)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new rt(function(){try{e.j[u](e.i,o)}catch(c){e.h.reject(c),e.h=null}}).U(.01)}return e.h}function Id(e,t,n){if(e.g)e.g.then(function(){return Id(e,t,n)}).catch(function(){return Id(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var o=It(n),a=JSON.parse(o);a.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),o=ui(a.keys[0].k),a=ui(a.keys[0].kid)}else o=Ve(n),a=null;var u=Ed("addKey");try{e.j[u](e.i,o,a,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function Bl(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Ge("keystatuseschange"),e.dispatchEvent(t)}s=bd.prototype,s.generateRequest=function(e,t){return wv(this,t,null)},s.load=function(e){return this.l=="persistent-license"?wv(this,null,e):Promise.reject(Error("Not a persistent session."))},s.update=function(e){var t=new bt;return Id(this,t,e),t},s.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ed("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},s.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Sv(){this.size=0,this.g=void 0}s=Sv.prototype,s.Pb=function(){return this.g},s.forEach=function(e){this.g&&e(this.g,xu.value())},s.get=function(e){if(this.has(e))return this.g},s.has=function(e){var t=xu.value();return!!(this.g&&nt(e,t))},s.entries=function(){},s.keys=function(){},s.values=function(){};var kd="";fn(vv);function Tv(){}function Cv(){if(d.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=z4,Object.defineProperty(e,"disablePictureInPicture",{get:H4,set:$4,enumerable:!0,configurable:!0}),document.exitPictureInPicture=V4,document.addEventListener("webkitpresentationmodechanged",F4,!0))}}function F4(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function z4(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function V4(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function H4(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function $4(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}qt.PiPWebkit=Tv,Tv.install=Cv,fn(Cv);function Ev(){}function Av(){d.crypto&&("randomUUID"in d.crypto||(d.crypto.randomUUID=G4))}function G4(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}qt.RandomUUID=Ev,Ev.install=Av,fn(Av);function bv(){}function Iv(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=W4)}function W4(){return new Promise(function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(n,o){e({usage:n,quota:o})},t)})}qt.StorageEstimate=bv,bv.install=Iv,fn(Iv);function kv(){}function Mv(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:X4})}function X4(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}qt.Symbol=kv,kv.install=Mv,fn(Mv);function _v(){}function Rv(){if(d.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}qt.VideoPlayPromise=_v,_v.install=Rv,fn(Rv);function Lv(){}function Pv(){if(d.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||Zf())&&(e.getVideoPlaybackQuality=K4)}}function K4(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}qt.VideoPlaybackQuality=Lv,Lv.install=Pv,fn(Pv);function Dv(){}function Nv(){if(!d.VTTCue&&d.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=Md;else if(t==6)e=Y4;else{try{var n=!!Md(1,2,"")}catch{n=!1}n&&(e=Md)}e&&(d.VTTCue=function(o,a,u){return e(o,a,u)})}}function Md(e,t,n){return new d.TextTrackCue(e,t,n)}function Y4(e,t,n){return new d.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}qt.VTTCue=Dv,Dv.install=Nv,fn(Nv);function Dn(){}Dn.prototype.parseInit=function(){},Dn.prototype.setSequenceMode=function(){},Dn.prototype.setManifestType=function(){},Dn.prototype.parseMedia=function(e,t){var n=null,o=[];e=It(e).split(/\r?\n/),e=w(e);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&!/^\s+$/.test(a)&&(a=q4.exec(a))){var u=Q4.exec(a[1]);u=60*parseInt(u[1],10)+parseFloat(u[2].replace(",",".")),a=new ft(u,t.segmentEnd?t.segmentEnd:u+2,a[2]),n&&(n.endTime=u,o.push(n)),n=a}return n&&o.push(n),o},ae("shaka.text.LrcTextParser",Dn),Dn.prototype.parseMedia=Dn.prototype.parseMedia,Dn.prototype.setManifestType=Dn.prototype.setManifestType,Dn.prototype.setSequenceMode=Dn.prototype.setSequenceMode,Dn.prototype.parseInit=Dn.prototype.parseInit;var q4=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,Q4=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Kt["application/x-subtitle-lrc"]=function(){return new Dn};function An(){}An.prototype.parseInit=function(){},An.prototype.setSequenceMode=function(){},An.prototype.setManifestType=function(){},An.prototype.parseMedia=function(e,t,n){var o=It(e);if(e=[],o=="")return e;var a=wr(o,"tt");if(!a)throw new K(2,2,2005,"Failed to parse TTML.");if(o=a.getElementsByTagName("body")[0],!o)return[];var u=Li(a,wa,"frameRate"),f=Li(a,wa,"subFrameRate"),c=Li(a,wa,"frameRateMultiplier"),p=Li(a,wa,"tickRate"),m=Li(a,wa,"cellResolution"),v=a.getAttribute("xml:space")||"default",S=Li(a,zl,"extent");if(v!="default"&&v!="preserve")throw new K(2,2,2005,"Invalid xml:space value: "+v);v=v=="default",u=new eb(u,f,c,p),m=m&&(m=/^(\d+) (\d+)$/.exec(m))?{Kb:parseInt(m[1],10),rows:parseInt(m[2],10)}:null,f=(f=a.getElementsByTagName("metadata")[0])?Iw(f):[],c=Array.from(a.getElementsByTagName("style")),a=Array.from(a.getElementsByTagName("region")),p=[];for(var C=w(a),T=C.next();!T.done;T=C.next()){var b=T.value;T=new _o;var _=b.getAttribute("xml:id");if(_){T.id=_;var D=null;S&&(D=Pd.exec(S)||Dd.exec(S)),_=D?Number(D[1]):null,D=D?Number(D[2]):null;var B,N=jl(b,c,"extent");if(N){var G=(B=Pd.exec(N))||Dd.exec(N);G!=null&&(T.width=Number(G[1]),T.height=Number(G[2]),B||(_!=null&&(T.width=100*T.width/_),D!=null&&(T.height=100*T.height/D)),T.widthUnits=B||_!=null?Hn:0,T.heightUnits=B||D!=null?Hn:0)}(b=jl(b,c,"origin"))&&(G=(B=Pd.exec(b))||Dd.exec(b),G!=null&&(T.viewportAnchorX=Number(G[1]),T.viewportAnchorY=Number(G[2]),B?N||(T.width=100-T.viewportAnchorX,T.widthUnits=Hn,T.height=100-T.viewportAnchorY,T.heightUnits=Hn):(D!=null&&(T.viewportAnchorY=100*T.viewportAnchorY/D),_!=null&&(T.viewportAnchorX=100*T.viewportAnchorX/_)),T.viewportAnchorUnits=B||_!=null?Hn:0))}else T=null;T&&p.push(T)}if(kt(o,"p").length)throw new K(2,2,2001,"<p> can only be inside <div> in TTML");for(S=w(kt(o,"div")),C=S.next();!C.done;C=S.next())if(kt(C.value,"span").length)throw new K(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Ov(o,t,u,f,c,a,p,v,m,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function Ov(e,t,n,o,a,u,f,c,p,m,v,S){var C=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!v)return null;var T=document.createElement("span");T.textContent=e.textContent}else T=e;for(var b=null,_=w(Wv),D=_.next();!D.done&&!(b=Fl(T,"backgroundImage",o,"#",D.value)[0]);D=_.next());_=null;var B=Li(T,Wv,"backgroundImage");if(S&&B&&!B.startsWith("#")&&(D=new Ut(S),B=new Ut(B),(D=D.resolve(B).toString())&&(_=D)),(e.nodeName=="p"||b||_)&&(v=!0),e=v,D=(T.getAttribute("xml:space")||(c?"default":"preserve"))=="default",B=Array.from(T.childNodes).every(function(q){return q.nodeType==Node.TEXT_NODE}),c=[],!B)for(var N=w(T.childNodes),G=N.next();!G.done;G=N.next())(G=Ov(G.value,t,n,o,a,u,f,D,p,T,v,S))&&c.push(G);if(o=m!=null,S=/\S/.test(T.textContent),G=T.hasAttribute("begin")||T.hasAttribute("end")||T.hasAttribute("dur"),!(G||S||T.tagName=="br"||c.length!=0||o&&!D))return null;for(N=jv(T,n),S=N.start,N=N.end;C&&C.nodeType==Node.ELEMENT_NODE&&C.tagName!="tt";)N=J4(C,n,S,N),S=N.start,N=N.end,C=C.parentNode;if(S==null&&(S=0),S+=t.periodStart,N=N==null?1/0:N+t.periodStart,S=Math.max(S,t.segmentStart),N=Math.min(N,t.segmentEnd),!G&&0<c.length)for(S=1/0,N=0,t=w(c),n=t.next();!n.done;n=t.next())n=n.value,S=Math.min(S,n.startTime),N=Math.max(N,n.endTime);if(T.tagName=="br")return a=new ft(S,N,""),a.lineBreak=!0,a;if(t="",B&&(t=T.textContent,D&&(t=t.trim(),t=t.replace(/\s+/g," "))),t=new ft(S,N,t),t.nestedCues=c,v||(t.isContainer=!0),p&&(t.cellResolution=p),p=Fl(T,"region",u,"")[0],T.hasAttribute("region")&&p&&p.getAttribute("xml:id")){var V=p.getAttribute("xml:id");t.region=f.filter(function(q){return q.id==V})[0]}return f=p,m&&o&&!T.getAttribute("region")&&!T.getAttribute("style")&&(f=Fl(m,"region",u,"")[0]),Z4(t,T,f,b,_,a,e,c.length==0),t}function Z4(e,t,n,o,a,u,f,c){if(f=f||c,tn(t,n,u,"direction",f)=="rtl"&&(e.direction="rtl"),c=tn(t,n,u,"writingMode",f),c=="tb"||c=="tblr"?e.writingMode="vertical-lr":c=="tbrl"?e.writingMode="vertical-rl":c=="rltb"||c=="rl"?e.direction="rtl":c&&(e.direction=ws),(c=tn(t,n,u,"textAlign",!0))?(e.positionAlign=ib[c],e.lineAlign=nb[c],e.textAlign=Ff[c.toUpperCase()]):e.textAlign=Oi,(c=tn(t,n,u,"displayAlign",!0))&&(e.displayAlign=Cp[c.toUpperCase()]),(c=tn(t,n,u,"color",f))&&(e.color=c),(c=tn(t,n,u,"backgroundColor",f))&&(e.backgroundColor=c),(c=tn(t,n,u,"border",f))&&(e.border=c),c=tn(t,n,u,"fontFamily",f))switch(c){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=c}switch((c=tn(t,n,u,"fontWeight",f))&&c=="bold"&&(e.fontWeight=700),c=tn(t,n,u,"wrapOption",f),e.wrapLine=!(c&&c=="noWrap"),(c=tn(t,n,u,"lineHeight",f))&&c.match(Yr)&&(e.lineHeight=c),(c=tn(t,n,u,"fontSize",f))&&(c.match(Yr)||c.match(tb))&&(e.fontSize=c),(c=tn(t,n,u,"fontStyle",f))&&(e.fontStyle=Ip[c.toUpperCase()]),o?(a=o.getAttribute("imageType")||o.getAttribute("imagetype"),c=o.getAttribute("encoding"),o=o.textContent.trim(),a=="PNG"&&c=="Base64"&&o&&(e.backgroundImage="data:image/png;base64,"+o)):a&&(e.backgroundImage=a),(o=tn(t,n,u,"textOutline",f))&&(o=o.split(" "),o[0].match(Yr)?e.textStrokeColor=e.color:(e.textStrokeColor=o[0],o.shift()),o[0]&&o[0].match(Yr)?e.textStrokeWidth=o[0]:e.textStrokeColor=""),(o=tn(t,n,u,"letterSpacing",f))&&o.match(Yr)&&(e.letterSpacing=o),(o=tn(t,n,u,"linePadding",f))&&o.match(Yr)&&(e.linePadding=o),(o=tn(t,n,u,"opacity",f))&&(e.opacity=parseFloat(o)),(o=jl(n,u,"textDecoration"))&&Uv(e,o),(o=_d(t,u,"textDecoration"))&&Uv(e,o),(o=tn(t,n,u,"textCombine",f))&&(e.textCombineUpright=o),tn(t,n,u,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function Uv(e,t){t=w(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&wn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&wn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&wn(e.textDecoration,"overline")}}function tn(e,t,n,o,a){return a=a===void 0?!0:a,(e=_d(e,n,o))?e:a?jl(t,n,o):null}function jl(e,t,n){if(!e)return null;var o=Li(e,zl,n);return o||Bv(e,t,n)}function _d(e,t,n){var o=Li(e,zl,n);return o||Bv(e,t,n)}function Bv(e,t,n){e=Fl(e,"style",t,"");for(var o=null,a=0;a<e.length;a++){var u=Fo(e[a],"urn:ebu:tt:style",n);u||(u=Li(e[a],zl,n)),u||(u=_d(e[a],t,n)),u&&(o=u)}return o}function Fl(e,t,n,o,a){var u=[];if(!e||1>n.length)return u;var f=e;for(e=null;f&&!(e=a?Fo(f,a,t):f.getAttribute(t))&&(f=f.parentNode,f instanceof Element););if(t=e){for(t=w(t.split(" ")),a=t.next();!a.done;a=t.next())for(a=a.value,e=w(n),f=e.next();!f.done;f=e.next())if(f=f.value,o+f.getAttribute("xml:id")==a){u.push(f);break}}return u}function J4(e,t,n,o){return e=jv(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),o==null?o=e.end:e.start!=null&&(o+=e.start),{start:n,end:o}}function jv(e,t){var n=Rd(e.getAttribute("begin"),t),o=Rd(e.getAttribute("end"),t);return e=Rd(e.getAttribute("dur"),t),o==null&&e!=null&&(o=n+e),{start:n,end:o}}function Rd(e,t){var n=null;if(Fv.test(e)){e=Fv.exec(e),n=Number(e[1]);var o=Number(e[2]),a=Number(e[3]),u=Number(e[4]);u+=(Number(e[5])||0)/t.h,a+=u/t.frameRate,n=a+60*o+3600*n}else if(zv.test(e))n=Ld(zv,e);else if(Vv.test(e))n=Ld(Vv,e);else if(Hv.test(e))e=Hv.exec(e),n=Number(e[1])/t.frameRate;else if($v.test(e))e=$v.exec(e),n=Number(e[1])/t.g;else if(Gv.test(e))n=Ld(Gv,e);else if(e)throw new K(2,2,2001,"Could not parse cue time range in TTML");return n}function Ld(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}ae("shaka.text.TtmlTextParser",An),An.prototype.parseMedia=An.prototype.parseMedia,An.prototype.setManifestType=An.prototype.setManifestType,An.prototype.setSequenceMode=An.prototype.setSequenceMode,An.prototype.parseInit=An.prototype.parseInit;function eb(e,t,n,o){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(o),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var Pd=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,tb=/^(\d{1,2}(?:\.\d+)?|100)%$/,Yr=/^(\d+px|\d+em|\d*\.?\d+c)$/,Dd=/^(\d+)px (\d+)px$/,Fv=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,zv=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Vv=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Hv=/^(\d*(?:\.\d*)?)f$/,$v=/^(\d*(?:\.\d*)?)t$/,Gv=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),nb={left:Mo,center:"center",right:"end",start:Mo,end:"end"},ib={left:"line-left",center:"center",right:"line-right"},wa=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],zl=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Wv=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Kt["application/ttml+xml"]=function(){return new An};function cn(){this.g=new An}cn.prototype.parseInit=function(e){var t=!1;if(new St().box("moov",dt).box("trak",dt).box("mdia",dt).box("minf",dt).box("stbl",dt).O("stsd",yr).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new K(2,2,2007)},cn.prototype.setSequenceMode=function(){},cn.prototype.setManifestType=function(){},cn.prototype.parseMedia=function(e,t,n){var o=this,a=!1,u=[];if(new St().box("mdat",vr(function(f){a=!0,u=u.concat(o.g.parseMedia(f,t,n))})).parse(e,!1),!a)throw new K(2,2,2007);return u},ae("shaka.text.Mp4TtmlParser",cn),cn.prototype.parseMedia=cn.prototype.parseMedia,cn.prototype.setManifestType=cn.prototype.setManifestType,cn.prototype.setSequenceMode=cn.prototype.setSequenceMode,cn.prototype.parseInit=cn.prototype.parseInit,Kt['application/mp4; codecs="stpp"']=function(){return new cn},Kt['application/mp4; codecs="stpp.ttml"']=function(){return new cn},Kt['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new cn},Kt['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new cn};function hn(){this.h=!1,this.g="UNKNOWN"}hn.prototype.parseInit=function(){},hn.prototype.setSequenceMode=function(e){this.h=e},hn.prototype.setManifestType=function(e){this.g=e},hn.prototype.parseMedia=function(e,t){e=It(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new K(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.h){var o=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(o&&a){if(e=Vl(new Ko(o[1])),e==null)throw new K(2,2,2e3);for(a=Number(a[1]),o=t.segmentStart-t.periodStart;95443.7176888889<=o;)o-=95443.7176888889,a+=8589934592;e=t.periodStart+a/9e4-e}}else n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS"&&(e=t.segmentStart);for(t=[],a=w(n[0].split(`
`)),o=a.next();!o.done;o=a.next())if(o=o.value,/^Region:/.test(o)){o=new Ko(o);var u=new _o;Yo(o),$r(o);for(var f=Yo(o);f;){var c=u,p=f;(f=/^id=(.*)$/.exec(p))?c.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(p))?c.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(p))?(c.height=Number(f[1]),c.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(c.regionAnchorX=Number(f[1]),c.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(c.viewportAnchorX=Number(f[1]),c.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(p)&&(c.scroll="up"),$r(o),f=Yo(o)}t.push(u)}for(a=new Map,Xv(a),o=[],n=w(n.slice(1)),u=n.next();!u.done;u=n.next()){if(u=u.value.split(`
`),(u.length!=1||u[0])&&!/^NOTE($|[ \t])/.test(u[0])&&u[0]=="STYLE"){for(c=[],f=-1,p=1;p<u.length;p++)u[p].includes("::cue")&&(c.push([]),f=c.length-1),f!=-1&&(c[f].push(u[p]),u[p].includes("}")&&(f=-1));for(c=w(c),f=c.next();!f.done;f=c.next()){var m=f.value;f="global",(p=m[0].match(/\((.*)\)/))&&(f=p.pop()),p=m.slice(1,-1),m[0].includes("}")&&(m=/\{(.*?)\}/.exec(m[0]))&&(p=m[1].split(";")),(m=a.get(f))||(m=new ft(0,0,""));for(var v=!1,S=0;S<p.length;S++){var C=/^\s*([^:]+):\s*(.*)/.exec(p[S]);if(C){var T=C[2].trim().replace(";","");switch(C[1].trim()){case"background-color":case"background":v=!0,m.backgroundColor=T;break;case"color":v=!0,m.color=T;break;case"font-family":v=!0,m.fontFamily=T;break;case"font-size":v=!0,m.fontSize=T;break;case"font-weight":(700<=parseInt(T,10)||T=="bold")&&(v=!0,m.fontWeight=700);break;case"font-style":switch(T){case"normal":v=!0,m.fontStyle=Vf;break;case"italic":v=!0,m.fontStyle="italic";break;case"oblique":v=!0,m.fontStyle="oblique"}break;case"opacity":v=!0,m.opacity=parseFloat(T);break;case"text-combine-upright":v=!0,m.textCombineUpright=T;break;case"text-shadow":v=!0,m.textShadow=T;break;case"white-space":v=!0,m.wrapLine=T!="noWrap"}}}v&&a.set(f,m)}}if(v=e,u.length==1&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||u[0]=="STYLE"||u[0]=="REGION")u=null;else if(c=null,u[0].includes("-->")||(c=u[0],u.splice(0,1)),f=new Ko(u[0]),p=Vl(f),S=po(f,/[ \t]+--\x3e[ \t]+/g),m=Vl(f),p==null||S==null||m==null)Le("Failed to parse VTT time code. Cue skipped:",c,u),u=null;else{for(p+=v,m+=v,u=u.slice(1).join(`
`).trim(),a.has("global")?(v=a.get("global").clone(),v.startTime=p,v.endTime=m,v.payload=""):v=new ft(p,m,""),$r(f),p=Yo(f);p;)qv(v,p,t),$r(f),p=Yo(f);Kv(u,v,a),c!=null&&(v.id=c),u=v}u&&o.push(u)}return o};function Xv(e){for(var t=w(Object.entries(Ep)),n=t.next();!n.done;n=t.next()){var o=w(n.value);n=o.next().value,o=o.next().value;var a=new ft(0,0,"");a.color=o,e.set("."+n,a)}for(t=w(Object.entries(Ap)),n=t.next();!n.done;n=t.next())o=w(n.value),n=o.next().value,o=o.next().value,a=new ft(0,0,""),a.backgroundColor=o,e.set("."+n,a)}function Kv(e,t,n){if(e.includes("<")){n.size===0&&Xv(n);e:{for(var o=[],a=-1,u="",f=0;f<e.length;f++)if(e[f]==="/"&&0<f&&e[f-1]==="<"){var c=e.indexOf(">",f);if(c<=f)break e;if((c=e.substring(f+1,c))&&c==="c"){var p=o.pop();p?p===c?(u+="/"+c+">",f+=c.length+1):p.startsWith("c.")?(f+=c.length+1,u+="/"+p+">"):u+=e[f]:u+=e[f]}else u+=e[f]}else e[f]==="<"?(a=f+1,e[a]!="c"&&(a=-1)):e[f]===">"&&0<a&&(o.push(e.substr(a,f-a)),a=-1),u+=e[f];e=u}for(o=e,e=[],u=-1,a=0;a<o.length;a++)o[a]==="<"?u=a+1:o[a]===">"&&0<u&&(u=o.substr(u,a-u),u.match(Qv)&&e.push(u),u=-1);for(e=w(e),a=e.next();!a.done;a=e.next())a=a.value,o=o.replace("<"+a+">",'<div time="'+a+'">'),o+="</div>";e=o;e:{for(a=e,u=[],f=-1,e="",o=!1,c=0;c<a.length;c++)if(a[c]==="/"){if(p=a.indexOf(">",c),p===-1){e=a;break e}if((p=a.substring(c+1,p))&&p=="v"){o=!0;var m=null;if(u.length&&(m=u[u.length-1]),m){if(m===p)e+="/"+p+">";else{if(!m.startsWith("v")){e+=a[c];continue}e+="/"+m+">"}c+=p.length+1}else e+=a[c]}else e+=a[c]}else a[c]==="<"?(f=c+1,a[f]!="v"&&(f=-1)):a[c]===">"&&0<f&&(u.push(a.substr(f,c-f)),f=-1),e+=a[c];for(a=w(u),u=a.next();!u.done;u=a.next())u=u.value,f=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+f+">"),e=e.replace("</"+u+">","</"+f+">"),o||(e+="</"+f+">")}if(o=wr("<span>"+e+"</span>","span")){if(o=o.childNodes,o.length==1&&(a=o[0],a.nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE)){t.payload=Hl(e);return}for(e=w(o),o=e.next();!o.done;o=e.next())Yv(o.value,t,n)}else t.payload=Hl(e)}else t.payload=Hl(e)}function Sa(e,t){return e&&0<e.length?e:t}function Yv(e,t,n){var o=t.clone();if(o.nestedCues=[],o.payload="",o.rubyTag="",o.line=null,o.region=new _o,o.position=null,o.size=0,e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=w(e.nodeName.split(/(?=[ .])+/g)),u=a.next();!u.done;u=a.next()){var f=u=u.value;if(f.startsWith(".voice-")){var c=f.split("-").pop();f='v[voice="'+c+'"]',n.has(f)||(f="v[voice="+c+"]")}switch(n.has(f)&&(f=n.get(f))&&(o.backgroundColor=Sa(f.backgroundColor,o.backgroundColor),o.color=Sa(f.color,o.color),o.fontFamily=Sa(f.fontFamily,o.fontFamily),o.fontSize=Sa(f.fontSize,o.fontSize),o.textShadow=Sa(f.textShadow,o.textShadow),o.fontWeight=f.fontWeight,o.fontStyle=f.fontStyle,o.opacity=f.opacity,o.rubyTag=f.rubyTag,o.textCombineUpright=f.textCombineUpright,o.wrapLine=f.wrapLine),u){case"br":o=vt(o.startTime,o.endTime),t.nestedCues.push(o);return;case"b":o.fontWeight=700;break;case"i":o.fontStyle="italic";break;case"u":o.textDecoration.push("underline");break;case"font":(u=e.getAttribute("color"))&&(o.color=u);break;case"div":if(u=e.getAttribute("time"),!u)break;(u=Vl(new Ko(u)))&&(o.startTime=u);break;case"ruby":case"rp":case"rt":o.rubyTag=u}}if(a=e.childNodes,hc(e)||a.length==1&&hc(a[0]))for(a=!0,n=w(e.textContent.split(`
`)),e=n.next();!e.done;e=n.next())e=e.value,a||(a=vt(o.startTime,o.endTime),t.nestedCues.push(a)),0<e.length&&(a=o.clone(),a.payload=Hl(e),t.nestedCues.push(a)),a=!1;else for(t.nestedCues.push(o),t=w(a),e=t.next();!e.done;e=t.next())Yv(e.value,o,n)}function qv(e,t,n){var o;(o=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=o[1],t=="middle"?e.textAlign=Oi:e.textAlign=Ff[t.toUpperCase()]):(o=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=o[1]=="lr"?"vertical-lr":"vertical-rl":(o=/^size:([\d.]+)%$/.exec(t))?e.size=Number(o[1]):(o=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(o[1]),o[2]&&(t=o[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Ha)):(o=/^region:(.*)$/.exec(t))?(t=ob(n,o[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=zf[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=$a,e.line=Number(n[1]),n[2]&&(e.lineAlign=zf[n[2].toUpperCase()]))}function ob(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function Vl(e){if(e=po(e,Qv),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Hl(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(a){return t[a]||"'"}):e||""}ae("shaka.text.VttTextParser",hn),hn.prototype.parseMedia=hn.prototype.parseMedia,hn.prototype.setManifestType=hn.prototype.setManifestType,hn.prototype.setSequenceMode=hn.prototype.setSequenceMode,hn.prototype.parseInit=hn.prototype.parseInit;var Qv=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Kt["text/vtt"]=function(){return new hn},Kt['text/vtt; codecs="vtt"']=function(){return new hn},Kt['text/vtt; codecs="wvtt"']=function(){return new hn};function Nn(){this.g=null}Nn.prototype.parseInit=function(e){var t=this,n=!1;if(new St().box("moov",dt).box("trak",dt).box("mdia",dt).O("mdhd",function(o){o=wu(o.reader,o.version),t.g=o.timescale}).box("minf",dt).box("stbl",dt).O("stsd",yr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new K(2,2,2008);if(!n)throw new K(2,2,2008)},Nn.prototype.setSequenceMode=function(){},Nn.prototype.setManifestType=function(){},Nn.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new K(2,2,2008);var n=0,o=[],a,u=[],f=!1,c=!1,p=!1,m=null;if(new St().box("moof",dt).box("traf",dt).O("tfdt",function(G){f=!0,n=Cc(G.reader,G.version).baseMediaDecodeTime}).O("tfhd",function(G){m=H0(G.reader,G.flags).Kf}).O("trun",function(G){c=!0,o=$0(G.reader,G.version,G.flags).ig}).box("mdat",vr(function(G){p=!0,a=G})).parse(e,!1),!p&&!f&&!c)throw new K(2,2,2008);e=n;for(var v=new yt(a,0),S=w(o),C=S.next();!C.done;C=S.next()){C=C.value;var T=C.hf||m,b=C.Wd?n+C.Wd:e;e=b+(T||0);var _=0;do{var D=v.L();_+=D;var B=v.L(),N=null;pu(B)=="vttc"?8<D&&(N=v.ub(D-8)):v.skip(D-8),T&&N&&(D=rb(N,t.periodStart+b/this.g,t.periodStart+e/this.g),u.push(D))}while(C.sampleSize&&_<C.sampleSize)}return u.filter(sr)};function rb(e,t,n){var o,a,u;return new St().box("payl",vr(function(f){o=It(f)})).box("iden",vr(function(f){a=It(f)})).box("sttg",vr(function(f){u=It(f)})).parse(e),o?sb(o,a,u,t,n):null}function sb(e,t,n,o,a){if(o=new ft(o,a,""),Kv(e,o,new Map),t&&(o.id=t),n)for(e=new Ko(n),t=Yo(e);t;)qv(o,t,[]),$r(e),t=Yo(e);return o}ae("shaka.text.Mp4VttParser",Nn),Nn.prototype.parseMedia=Nn.prototype.parseMedia,Nn.prototype.setManifestType=Nn.prototype.setManifestType,Nn.prototype.setSequenceMode=Nn.prototype.setSequenceMode,Nn.prototype.parseInit=Nn.prototype.parseInit,Kt['application/mp4; codecs="wvtt"']=function(){return new Nn};function On(){}On.prototype.parseInit=function(){},On.prototype.setSequenceMode=function(){},On.prototype.setManifestType=function(){},On.prototype.parseMedia=function(e){var t=It(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=w(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var o=new Ko(n[0]),a=Zv(o),u=po(o,/,/g);if(o=Zv(o),a==null||u==null||o==null)throw new K(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new ft(a,o,n.slice(1).join(`
`).trim()))}return e};function Zv(e){if(e=po(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}ae("shaka.text.SbvTextParser",On),On.prototype.parseMedia=On.prototype.parseMedia,On.prototype.setManifestType=On.prototype.setManifestType,On.prototype.setSequenceMode=On.prototype.setSequenceMode,On.prototype.parseInit=On.prototype.parseInit,Kt["text/x-subviewer"]=function(){return new On};function bn(){this.g=new hn}bn.prototype.parseInit=function(){},bn.prototype.setSequenceMode=function(){},bn.prototype.setManifestType=function(){},bn.prototype.parseMedia=function(e,t,n){return e=It(e),e=Jv(e),e=Ve(Vi(e)),this.g.parseMedia(e,t,n)};function Jv(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=w(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}ae("shaka.text.SrtTextParser",bn),bn.srt2webvtt=Jv,bn.prototype.parseMedia=bn.prototype.parseMedia,bn.prototype.setManifestType=bn.prototype.setManifestType,bn.prototype.setSequenceMode=bn.prototype.setSequenceMode,bn.prototype.parseInit=bn.prototype.parseInit,Kt["text/srt"]=function(){return new bn};function Un(){}Un.prototype.parseInit=function(){},Un.prototype.setSequenceMode=function(){},Un.prototype.setManifestType=function(){},Un.prototype.parseMedia=function(e){var t="",n="";e=It(e).split(/\r?\n\s*\r?\n/),e=w(e);for(var o=e.next();!o.done;o=e.next()){var a=ub.exec(o.value);a&&(o=a[1],a=a[2],o=="V4 Styles"||o=="V4+ Styles"?t=a:o=="Events"&&(n=a))}e=[],o=null,t=w(t.split(/\r?\n/));for(var u=t.next();!u.done;u=t.next())if(a=u.value,!/^\s*;/.test(a)&&(u=nx.exec(a))){if(a=u[1].trim(),u=u[2].trim(),a=="Format")o=u.split($l);else if(a=="Style"){a=u.split($l),u={};for(var f=0;f<o.length&&f<a.length;f++)u[o[f]]=a[f];e.push(u)}}for(o=[],t=null,a={},n=w(n.split(/\r?\n/)),u=n.next();!u.done;a={ee:a.ee},u=n.next())if(u=u.value,!/^\s*;/.test(u)&&(f=nx.exec(u))){if(u=f[1].trim(),f=f[2].trim(),u=="Format")t=f.split($l);else if(u=="Dialogue"){f=f.split($l),u={};for(var c=0;c<t.length&&c<f.length;c++)u[t[c]]=f[c];c=tx(u.Start);var p=tx(u.End);f=new ft(c,p,f.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),a.ee=u.Style,(u=e.find(function(m){return function(v){return v.Name==m.ee}}(a)))&&ab(f,u),o.push(f)}}return o};function ab(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=ex(n))&&(e.color=n),(n=t.BackColour)&&(n=ex(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=xs,e.textAlign="start";break;case 2:e.displayAlign=xs,e.textAlign=Oi;break;case 3:e.displayAlign=xs,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Oi;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Oi;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function ex(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function tx(e){return e=lb.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ae("shaka.text.SsaTextParser",Un),Un.prototype.parseMedia=Un.prototype.parseMedia,Un.prototype.setManifestType=Un.prototype.setManifestType,Un.prototype.setSequenceMode=Un.prototype.setSequenceMode,Un.prototype.parseInit=Un.prototype.parseInit;var ub=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,nx=/^\s*([^:]+):\s*(.*)/,$l=/\s*,\s*/,lb=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Kt["text/x-ssa"]=function(){return new Un};function ix(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Hd:n,S:e}:null}function ox(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=(e[t+2]&60)>>>2;if(o>n.length-1)return null;var a=((e[t+2]&192)>>>6)+1,u=(e[t+2]&1)<<2;return u|=(e[t+3]&192)>>>6,{sampleRate:n[o],channelCount:u,ha:"mp4a.40."+a}}function fb(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var o=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return o<=n?!1:(t+=o,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function cb(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function qn(e){this.i=e,this.h=0,this.g=new Map}s=qn.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?ke(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(ri(t)||"mp4a.40.2")+'"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){for(var a=Ve(e),u=Os(a),f=u.length;f<a.length&&!fb(a,f);f++);if(e=1e3*n.endTime,u=Vo(u),u.length&&n&&(n=u.find(function(m){return m.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=ox(a,f),!n)return Promise.reject(new K(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,u=[];f<a.length;){var c=ix(a,f);if(!c)return Promise.reject(new K(2,3,3018));var p=c.Hd+c.S;f+p<=a.length&&u.push({data:a.subarray(f+c.Hd,f+p),size:c.S,duration:1024,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),f+=p}return a=n.sampleRate,e=Math.floor(e*a/1e3),o={id:t.id,type:"audio",codecs:n.ha,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:o,Ra:[],fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.h,baseMediaDecodeTime:e,Oa:u},stream:t},e=new Wr([o]),this.g.has(t.id)?o=this.g.get(t.id):(o=Xr(e),this.g.set(t.id,o)),t=ha(e),this.h++,t=Lt(o,t),Promise.resolve(t)},ae("shaka.transmuxer.AacTransmuxer",qn),qn.prototype.transmux=qn.prototype.transmux,qn.prototype.getOriginalMimeType=qn.prototype.getOriginalMimeType,qn.prototype.convertCodecs=qn.prototype.convertCodecs,qn.prototype.isSupported=qn.prototype.isSupported,qn.prototype.destroy=qn.prototype.destroy,Ui("audio/aac",function(){return new qn("audio/aac")},so);function rx(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var o=e[t+4]&63,a=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+n];if(t+a>e.length)return null;var u=e[t+6]>>5,f=0;u===2?f+=2:(u&1&&u!==1&&(f+=2),u&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var c=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|c>>2,(c&3)<<6|u<<3|f<<2|o>>4,o<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][u]+f,fa:e,S:a}}function hb(e,t){if(e[t]===11&&e[t+1]===119){var n=0,o=5;t+=o;for(var a,u;0<o;){u=e[t];var f=Math.min(o,8),c=8-f;a=4278190080>>>24+c<<c,a=(u&a)>>c,n=n?n<<f|a:a,t+=1,o-=f}if(16>n)return!0}return!1}function Qn(e){this.i=e,this.h=0,this.g=new Map}s=Qn.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?ke(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){e=Ve(e);for(var a=Os(e),u=a.length;u<e.length&&!hb(e,u);u++);var f=1e3*n.endTime;a=Vo(a),a.length&&n&&(n=a.find(function(m){return m.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,a=new Uint8Array([]);for(var c=[];u<e.length;){var p=rx(e,u);if(!p)return Promise.reject(new K(2,3,3018));t.audioSamplingRate=p.sampleRate,t.channelsCount=p.channelCount,n=p.sampleRate,a=p.fa,c.push({data:e.subarray(u,u+p.S),size:p.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=p.S}return e=Math.floor(f*n/1e3),o={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:o,Ra:[],fa:a,la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.h,baseMediaDecodeTime:e,Oa:c},stream:t},e=new Wr([o]),this.g.has(t.id)?o=this.g.get(t.id):(o=Xr(e),this.g.set(t.id,o)),t=ha(e),this.h++,t=Lt(o,t),Promise.resolve(t)},ae("shaka.transmuxer.Ac3Transmuxer",Qn),Qn.prototype.transmux=Qn.prototype.transmux,Qn.prototype.getOriginalMimeType=Qn.prototype.getOriginalMimeType,Qn.prototype.convertCodecs=Qn.prototype.convertCodecs,Qn.prototype.isSupported=Qn.prototype.isSupported,Qn.prototype.destroy=Qn.prototype.destroy,Ui("audio/ac3",function(){return new Qn("audio/ac3")},so);function sx(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Xi(e.subarray(t+2));Tn(n,2),Tn(n,3);var o=et(n,11)+1<<1,a=et(n,2);if(a==3){a=et(n,2),a=[24e3,22060,16e3][a];var u=3}else a=[48e3,44100,32e3][a],u=et(n,2);var f=et(n,3),c=et(n,1);return n=et(n,5),t+o>e.byteLength?null:(e=Math.floor(o*a/(16*[1,2,3,6][u])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,a<<6|n<<1|0,0|f<<1|c<<0,0]),{sampleRate:a,channelCount:[2,1,2,3,3,4,4,5][f]+c,fa:e,S:o})}function Zn(e){this.i=e,this.h=0,this.g=new Map}s=Zn.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?ke(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){e=Ve(e);for(var a=Os(e),u=a.length;u<e.length&&(e[u]<<8|e[u+1]<<0)!==2935;u++);var f=1e3*n.endTime;a=Vo(a),a.length&&n&&(n=a.find(function(m){return m.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,a=new Uint8Array([]);for(var c=[];u<e.length;){var p=sx(e,u);if(!p)return Promise.reject(new K(2,3,3018));t.audioSamplingRate=p.sampleRate,t.channelsCount=p.channelCount,n=p.sampleRate,a=p.fa,c.push({data:e.subarray(u,u+p.S),size:p.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=p.S}return e=Math.floor(f*n/1e3),o={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:o,Ra:[],fa:a,la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.h,baseMediaDecodeTime:e,Oa:c},stream:t},e=new Wr([o]),this.g.has(t.id)?o=this.g.get(t.id):(o=Xr(e),this.g.set(t.id,o)),t=ha(e),this.h++,t=Lt(o,t),Promise.resolve(t)},ae("shaka.transmuxer.Ec3Transmuxer",Zn),Zn.prototype.transmux=Zn.prototype.transmux,Zn.prototype.getOriginalMimeType=Zn.prototype.getOriginalMimeType,Zn.prototype.convertCodecs=Zn.prototype.convertCodecs,Zn.prototype.isSupported=Zn.prototype.isSupported,Zn.prototype.destroy=Zn.prototype.destroy,Ui("audio/ec3",function(){return new Zn("audio/ec3")},so);function db(e){if(!e.length)return null;var t=e.find(function(_){return _.type==7});if(e=e.find(function(_){return _.type==8}),!t||!e)return null;var n=new Xi(t.data),o=ut(n);if(ut(n),ut(n),pn(n),mb.includes(o)&&(o=Me(n),o===3&&Tn(n,1),pn(n),pn(n),Tn(n,1),Be(n))){o=o!==3?8:12;for(var a=0;a<o;a++)Be(n)&&(6>a?Su(n,16):Su(n,64))}if(pn(n),o=Me(n),o===0)Me(n);else if(o===1)for(Tn(n,1),pn(n),pn(n),o=Me(n),a=0;a<o;a++)pn(n);pn(n),Tn(n,1);var u=Me(n),f=Me(n),c=et(n,1);c===0&&Tn(n,1),Tn(n,1);var p=0,m=0,v=0,S=0;if(Be(n)&&(p=Me(n),m=Me(n),v=Me(n),S=Me(n)),a=o=1,Be(n)&&Be(n)){var C=ut(n),T=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],b=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<C&&16>C?(o=T[C-1],a=b[C-1]):C===255&&(o=et(n,16),a=et(n,16))}return n=(2-c)*(f+1)*16-2*v-2*S,u=16*(u+1)-2*p-2*m,p=[],t=t.fullData,p.push(t.byteLength>>>8&255),p.push(t.byteLength&255),p=p.concat.apply(p,L(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,L(e)),e=new Uint8Array([1,p[3],p[4],p[5],255,225].concat(p,[1],t)),{height:n,width:u,la:e,sa:o,ua:a}}function pb(e){var t=!1,n=[],o=e.find(function(p){return p.type==7}),a=!1;e=w(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var f=!1;switch(u.type){case 1:f=a=!0;var c=u.data;o&&4<c.length&&(c=nS(new Xi(c)),c===2||c===4||c===7||c===9)&&(t=!0);break;case 5:t=f=a=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:a=f=!0;break;case 12:f=!0;break;default:f=!1}a&&f&&(f=u.fullData.byteLength,c=new Uint8Array(4),c[0]=f>>24&255,c[1]=f>>16&255,c[2]=f>>8&255,c[3]=f&255,n.push(Lt(c,u.fullData)))}return n.length?{data:Lt.apply(un,L(n)),Vc:t}:null}var mb=[100,110,122,244,44,83,86,118,128,138,139,134];function gb(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),o=e.find(function(f){return f.type==34});if(!t||!n||!o)return null;var a=yb(t.fullData);e=vb(n.fullData);var u=xb(o.fullData);return t=wb(t.fullData,n.fullData,o.fullData,{Ze:a.Ze,uf:a.uf,De:e.De,Ee:e.Ee,xe:e.xe,Ce:e.Ce,ye:e.ye,ze:e.ze,Ae:e.Ae,Be:e.Be,re:e.re,se:e.se,te:e.te,ue:e.ue,ve:e.ve,we:e.we,oe:e.oe,Rd:e.Rd,ne:e.ne,me:e.me,le:e.le,bf:u.bf}),{height:e.height,width:e.width,la:t,sa:e.Uh,ua:e.Th}}function yb(e){var t=new Xi(e,!0);return ut(t),ut(t),et(t,4),et(t,2),et(t,6),e=et(t,3),t=Be(t),{Ze:e+1,uf:t}}function vb(e){e=new Xi(e,!0),ut(e),ut(e);var t=0,n=0,o=0,a=0;et(e,4);var u=et(e,3);Be(e);for(var f=et(e,2),c=et(e,1),p=et(e,5),m=ut(e),v=ut(e),S=ut(e),C=ut(e),T=ut(e),b=ut(e),_=ut(e),D=ut(e),B=ut(e),N=ut(e),G=ut(e),V=[],q=[],te=0;te<u;te++)V.push(Be(e)),q.push(Be(e));if(0<u)for(te=u;8>te;te++)et(e,2);for(te=0;te<u;te++)V[te]&&et(e,88),q[te]&&ut(e);Me(e),V=Me(e),V==3&&et(e,1),q=Me(e),te=Me(e),Be(e)&&(t+=Me(e),n+=Me(e),o+=Me(e),a+=Me(e));var de=Me(e),ce=Me(e),he=Me(e);if(Be(e))for(var me=0;me<=u;me++)Me(e),Me(e),Me(e);else Me(e),Me(e),Me(e);if(Me(e),Me(e),Me(e),Me(e),Me(e),Me(e),Be(e)&&Be(e))for(me=0;4>me;me++)for(var we=0;we<(me===3?2:6);we++)if(Be(e)){var Ie=Math.min(64,1<<4+(me<<1));1<me&&Sr(e);for(var Ne=0;Ne<Ie;Ne++)Sr(e)}else Me(e);for(Be(e),Be(e),Be(e)&&(ut(e),Me(e),Me(e),Be(e)),me=Me(e),Ie=we=0;Ie<me;Ie++)if(Ne=!1,Ie!==0&&(Ne=Be(e)),Ne){Ie===me&&Me(e),Be(e),Me(e);for(var ze=Ne=0;ze<=we;ze++){var $e=Be(e),Ze=!1;$e||(Ze=Be(e)),($e||Ze)&&Ne++}we=Ne}else{for(ze=Me(e),Ne=Me(e),we=ze+Ne,$e=0;$e<ze;$e++)Me(e),Be(e);for(ze=0;ze<Ne;ze++)Me(e),Be(e)}if(Be(e))for(me=Me(e),we=0;we<me;we++){for(Ie=0;Ie<he+4;Ie++)et(e,1);et(e,1)}if(me=he=1,we=0,Be(e),Be(e),Be(e)){if(Be(e)&&(Ie=ut(e),Ne=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ze=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<Ie&&16>Ie?(he=Ne[Ie-1],me=ze[Ie-1]):Ie===255&&(he=et(e,16),me=et(e,16))),Be(e)&&Be(e),Be(e)&&(et(e,3),Be(e),Be(e)&&(ut(e),ut(e),ut(e))),Be(e)&&(Me(e),Me(e)),Be(e),Be(e),Be(e),(Ie=Be(e))&&(Me(e),Me(e),Me(e),Me(e)),Be(e)&&(et(e,32),et(e,32),Be(e)&&Me(e),Be(e)))for(ze=!1,Ie=Be(e),Ne=Be(e),(Ie||Ne)&&((ze=Be(e))&&(ut(e),et(e,5),Be(e),et(e,5)),et(e,4),et(e,4),ze&&et(e,4),et(e,5),et(e,5),et(e,5)),$e=0;$e<=u;$e++){var Oe=!0;Ze=1,Be(e)||(Oe=Be(e));var Ft=!1;if(Oe?Me(e):Ft=Be(e),Ft||(Ze=Me(e)+1),Ie){for(Oe=0;Oe<Ze;Oe++)Me(e),Me(e),ze&&(Me(e),Me(e));Be(e)}if(Ne){for(Oe=0;Oe<Ze;Oe++)Me(e),Me(e),ze&&(Me(e),Me(e));Be(e)}}Be(e)&&(Be(e),Be(e),Be(e),we=Me(e),Me(e),Me(e),Me(e),Me(e))}return{xe:G,De:f,Ee:c,Ce:p,ye:m,ze:v,Ae:S,Be:C,re:T,se:b,te:_,ue:D,ve:B,we:N,Rd:we,oe:0,ne:V,me:de,le:ce,width:q-(t+n)*(V===1||V===2?2:1),height:te-(o+a)*(V===1?2:1),Uh:he,Th:me}}function xb(e){var t=new Xi(e,!0);ut(t),ut(t),Me(t),Me(t),Be(t),Be(t),et(t,3),Be(t),Be(t),Me(t),Me(t),Sr(t),Be(t),Be(t),Be(t)&&Me(t),Sr(t),Sr(t),Be(t),Be(t),Be(t),Be(t),e=Be(t),t=Be(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{bf:n}}function wb(e,t,n,o){var a=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return a[0]=1,a[1]=(o.De&3)<<6|(o.Ee?1:0)<<5|o.Ce&31,a[2]=o.ye,a[3]=o.ze,a[4]=o.Ae,a[5]=o.Be,a[6]=o.re,a[7]=o.se,a[8]=o.te,a[9]=o.ue,a[10]=o.ve,a[11]=o.we,a[12]=o.xe,a[13]=240|(o.Rd&3840)>>8,a[14]=o.Rd&255,a[15]=252|o.bf&3,a[16]=252|o.ne&3,a[17]=248|o.me&7,a[18]=248|o.le&7,a[19]=0,a[20]=0,a[21]=(o.oe&3)<<6|(o.Ze&7)<<3|(o.uf?1:0)<<2|3,a[22]=3,a[23]=160,a[24]=0,a[25]=1,a[26]=(e.byteLength&65280)>>8,a[27]=(e.byteLength&255)>>0,a.set(e,28),a[23+(5+e.byteLength)]=161,a[e.byteLength+29]=0,a[e.byteLength+30]=1,a[e.byteLength+31]=(t.byteLength&65280)>>8,a[e.byteLength+32]=(t.byteLength&255)>>0,a.set(t,e.byteLength+33),a[23+(e.byteLength+10+t.byteLength)]=162,a[e.byteLength+10+t.byteLength+24]=0,a[e.byteLength+10+t.byteLength+25]=1,a[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,a[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,a.set(n,e.byteLength+10+t.byteLength+28),a}function Gl(e,t){var n=e[t+1]>>3&3,o=e[t+1]>>1&3,a=e[t+2]>>4&15,u=e[t+2]>>2&3;if(n!==1&&a!==0&&a!==15&&u!==3){var f=e[t+3]>>6;a=1e3*Sb[14*(n===3?3-o:o===3?3:4)+a-1],u=Tb[3*(n===3?0:n===2?1:2)+u],n=Cb[n][o];var c=Eb[o],p=Math.floor(n*a/u+(e[t+2]>>1&1))*c,m=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(m=m?parseInt(m[1],10):0)&&87>=m&&o===2&&224e3<=a&&f===0&&(e[t+3]|=128),{sampleRate:u,channelCount:f===3?1:2,S:p,Sh:8*n*c}}return null}function ax(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}var Sb=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Tb=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Cb=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Eb=[0,1,1,4];function Jn(e){this.i=e,this.h=0,this.g=new Map}s=Jn.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?ke(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){for(e=Ve(e),n=Os(e).length;n<e.length;n++){var a=n;if(a+1<e.length&&ax(e,a)){var u=Gl(e,a),f=4;u&&u.S&&(f=u.S),a+=f,a=a===e.length||a+1<e.length&&ax(e,a)}else a=!1;if(a)break}var c;for(a=[];n<e.length;){if(u=Gl(e,n),!u)return Promise.reject(new K(2,3,3018));c||(c=u),n+u.S<=e.length&&a.push({data:e.subarray(n,n+u.S),size:u.S,duration:1152,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),n+=u.S}return c?(e=9e4*c.Sh/c.sampleRate*this.h,o={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:o,Ra:[],fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.h,baseMediaDecodeTime:e,Oa:a},stream:t},c=new Wr([o]),this.g.has(t.id)?o=this.g.get(t.id):(o=Xr(c),this.g.set(t.id,o)),t=ha(c),this.h++,t=Lt(o,t),Promise.resolve(t)):Promise.reject(new K(2,3,3018))},ae("shaka.transmuxer.Mp3Transmuxer",Jn),Jn.prototype.transmux=Jn.prototype.transmux,Jn.prototype.getOriginalMimeType=Jn.prototype.getOriginalMimeType,Jn.prototype.convertCodecs=Jn.prototype.convertCodecs,Jn.prototype.isSupported=Jn.prototype.isSupported,Jn.prototype.destroy=Jn.prototype.destroy,Ui("audio/mpeg",function(){return new Jn("audio/mpeg")},so);function ei(e){this.h=e,this.g=null}s=ei.prototype,s.destroy=function(){},s.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=ri(e).split(","),n=Sn("audio",t);return t=Sn("video",t),!n||t||oi(n)!="mp3"?!1:ke(this.convertCodecs("audio",e))},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},s.getOriginalMimeType=function(){return this.h},s.transmux=function(e,t,n,o,a){if(this.g?this.g.clearData():this.g=new xt,e=Ve(e),e=this.g.parse(e),e.Pc().audio!="mp3"||a!="audio")return Promise.reject(new K(2,3,3018));for(a=new Uint8Array([]),e=w(e.Mb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(o=Gl(t,n))?(n+o.S<=t.length&&(a=Lt(a,t.subarray(n,n+o.S))),n+=o.S):n++;return Promise.resolve(a)},ae("shaka.transmuxer.MpegTsTransmuxer",ei),ei.prototype.transmux=ei.prototype.transmux,ei.prototype.getOriginalMimeType=ei.prototype.getOriginalMimeType,ei.prototype.convertCodecs=ei.prototype.convertCodecs,ei.prototype.isSupported=ei.prototype.isSupported,ei.prototype.destroy=ei.prototype.destroy,Ui("video/mp2t",function(){return new ei("video/mp2t")},$f);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Bn(e){this.h=e,(this.g=Hh.get("ISOBoxer")())&&Ab(this)}function Ab(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(o){this._procEntryField(o,"BytesOfClearData","uint",16),this._procEntryField(o,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,o=0;16>o;o++)this.usertype[o]!==bb[o]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}s=Bn.prototype,s.destroy=function(){},s.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?ke(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ke(t)||ke(e))},s.convertCodecs=function(e,t){return t.replace("mss/","")},s.getOriginalMimeType=function(){return this.h},s.transmux=function(e,t,n){if(!n)return Promise.resolve(Ve(e));if(!t.mssPrivateData)return Promise.reject(new K(2,3,3020));try{var o,a=this.g.parseBuffer(e),u=a.fetch("tfhd");u.track_ID=t.id+1;var f=a.fetch("tfdt"),c=a.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",c,u),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var p=a.fetch("trun"),m=a.fetch("tfxd");m&&m._parent.boxes.splice(m._parent.boxes.indexOf(m),1);var v=a.fetch("tfrf");v&&v._parent.boxes.splice(v._parent.boxes.indexOf(v),1);var S=a.fetch("sepiff");if(S!==null){S.type="senc",S.usertype=void 0;var C=a.fetch("saio");if(C===null){C=this.g.createFullBox("saio",c),C.version=0,C.flags=0,C.entry_count=1,C.offset=[0];var T=this.g.createFullBox("saiz",c);if(T.version=0,T.flags=0,T.sample_count=S.sample_count,T.default_sample_info_size=0,T.sample_info_size=[],S.flags&2)for(o=0;o<S.sample_count;o+=1)T.sample_info_size[o]=10+6*S.entry[o].NumberOfEntries;else T.default_sample_info_size=8}}u.flags&=16777214,u.flags|=131072,p.flags|=1;var b=a.fetch("moof");p.data_offset=b.getLength()+8;var _=a.fetch("saio");_!==null&&(_.offset[0]=ux(b,"traf")+ux(c,"senc")+16);var D=Ve(a.write());return Promise.resolve(D)}catch(B){return B instanceof K?Promise.reject(B):Promise.reject(new K(2,3,3022))}};function ux(e,t){for(var n=8,o=0;o<e.boxes.length&&e.boxes[o].type!==t;o++)n+=e.boxes[o].size;return n}ae("shaka.transmuxer.MssTransmuxer",Bn),Bn.prototype.transmux=Bn.prototype.transmux,Bn.prototype.getOriginalMimeType=Bn.prototype.getOriginalMimeType,Bn.prototype.convertCodecs=Bn.prototype.convertCodecs,Bn.prototype.isSupported=Bn.prototype.isSupported,Bn.prototype.destroy=Bn.prototype.destroy;var bb=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ui("mss/audio/mp4",function(){return new Bn("mss/audio/mp4")},so),Ui("mss/video/mp4",function(){return new Bn("mss/video/mp4")},so);function ti(e){this.j=e,this.g=0,this.h=new Map,this.i=null}s=ti.prototype,s.destroy=function(){this.h.clear()},s.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var o=ri(n).split(",");return n=Sn("audio",o),o=Sn("video",o),n&&(n=oi(n),!Ib.includes(n))||o&&(n=oi(o),!kb.includes(n))?!1:t?ke(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ke(t)||ke(e))},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=ri(t).replace("mp4a.40.34","mp3").split(",").map(this.Sg).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},s.Sg=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},s.getOriginalMimeType=function(){return this.j},s.transmux=function(e,t,n,o,a){this.i?this.i.clearData():this.i=new xt,e=Ve(e);var u=this.i.parse(e);e=[];var f=u.Pc();try{var c=null;if(a=="video"){switch(f.video){case"avc":var p=[],m=null,v=[],S=u.kc();if(!S.length)throw new K(2,3,3023);for(var C=0;C<S.length;C++){var T=S[C],b=T.nalus;v.push.apply(v,L(b));var _=pb(b);if(_){m==null&&(m=T.dts);var D=void 0;D=C+1<S.length?(S[C+1].dts||0)-(T.dts||0):1<S.length?(T.dts||0)-(S[C-1].dts||0):9e4*(n.endTime-n.startTime),p.push({data:_.data,size:_.data.byteLength,duration:D,Ta:Math.round((T.pts||0)-(T.dts||0)),flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:_.Vc?2:1,Va:_.Vc?0:1}})}}var B=db(v);if(!B||m==null)throw new K(2,3,3018);t.height=B.height,t.width=B.width,c={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:o,Ra:[],fa:new Uint8Array([]),la:B.la,sa:B.sa,ua:B.ua,data:{gb:this.g,baseMediaDecodeTime:m,Oa:p},stream:t};break;case"hvc":if(S=[],T=null,b=[],p=u.kc(),!p.length)throw new K(2,3,3023);for(_=0;_<p.length;_++){m=p[_],v=m.nalus,b.push.apply(b,L(v)),B=!1;var N=[],G=!1;for(C=w(v),D=C.next();!D.done;D=C.next()){var V=D.value;switch(V.type){case 1:case 0:var q=G=!0;break;case 19:case 20:case 21:B=q=G=!0;break;case 32:q=!0;break;case 33:q=!0;break;case 34:q=!0;break;case 35:G=q=!0;break;case 39:case 40:q=!0;break;default:q=!1}if(G&&q){var te=V.fullData.byteLength,de=new Uint8Array(4);de[0]=te>>24&255,de[1]=te>>16&255,de[2]=te>>8&255,de[3]=te&255,N.push(Lt(de,V.fullData))}}var ce=N.length?{data:Lt.apply(un,L(N)),Vc:B}:null;ce&&(T==null&&m.dts!=null&&(T=m.dts),B=void 0,B=_+1<p.length?(p[_+1].dts||0)-(m.dts||0):1<p.length?(m.dts||0)-(p[_-1].dts||0):9e4*(n.endTime-n.startTime),S.push({data:ce.data,size:ce.data.byteLength,duration:B,Ta:Math.round((m.pts||0)-(m.dts||0)),flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:ce.Vc?2:1,Va:ce.Vc?0:1}}))}var he=gb(b);if(!he||T==null)throw new K(2,3,3018);t.height=he.height,t.width=he.width,c={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:o,Ra:[],fa:new Uint8Array([]),la:he.la,sa:he.sa,ua:he.ua,data:{gb:this.g,baseMediaDecodeTime:T,Oa:S},stream:t}}c&&(e.push(c),c=null)}if(a=="audio"){switch(f.audio){case"aac":for(var me=[],we,Ie=null,Ne=w(u.Mb()),ze=Ne.next();!ze.done;ze=Ne.next()){var $e=ze.value,Ze=$e.data;if(Ze){var Oe=0;if(we=ox(Ze,Oe),!we)throw new K(2,3,3018);for(t.audioSamplingRate=we.sampleRate,t.channelsCount=we.channelCount,Ie==null&&$e.pts!==null&&(Ie=$e.pts);Oe<Ze.length;){var Ft=ix(Ze,Oe);if(Ft){var Qt=Ft.Hd+Ft.S;Oe+Qt<=Ze.length&&me.push({data:Ze.subarray(Oe+Ft.Hd,Oe+Qt),size:Ft.S,duration:1024,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),Oe+=Qt}else Oe++}}}if(!we||Ie==null){if(!u.kc().length)throw new K(2,3,3018);Ie=9e4*n.startTime;var pi=Sn("audio",t.codecs.split(","));if(!pi||!t.channelsCount||!t.audioSamplingRate)throw new K(2,3,3018);we={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,ha:pi};var gn=cb(pi,t.channelsCount);if(!gn)throw new K(2,3,3018);var Ai=Ie+9e4*(n.endTime-n.startTime);for(u=Ie;u<Ai;)me.push({data:gn,size:gn.byteLength,duration:1024,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=1024/we.sampleRate*9e4}var pt=we.sampleRate;u=Ie/9e4*pt,c={id:t.id,type:"audio",codecs:we.ha,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:pt,duration:o,Ra:[],fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.g,baseMediaDecodeTime:u,Oa:me},stream:t};break;case"ac3":we=[],pt=0,me=new Uint8Array([]),Ie=null,Oe=w(u.Mb());for(var In=Oe.next();!In.done;In=Oe.next()){var yn=In.value,jn=yn.data;for(Ie==null&&yn.pts!==null&&(Ie=yn.pts),u=0;u<jn.length;){var zt=rx(jn,u);zt?(t.audioSamplingRate=zt.sampleRate,t.channelsCount=zt.channelCount,pt=zt.sampleRate,me=zt.fa,we.push({data:jn.subarray(u,u+zt.S),size:zt.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=zt.S):u++}}if(pt==0||me.byteLength==0||Ie==null)throw new K(2,3,3018);u=Ie/9e4*pt,c={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:pt,duration:o,Ra:[],fa:me,la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.g,baseMediaDecodeTime:u,Oa:we},stream:t};break;case"ec3":we=[],pt=0,Ie=new Uint8Array([]),me=null;for(var qr=w(u.Mb()),go=qr.next();!go.done;go=qr.next()){var Zo=go.value,Qr=Zo.data;for(me==null&&Zo.pts!==null&&(me=Zo.pts),u=0;u<Qr.length;){var bi=sx(Qr,u);bi?(t.audioSamplingRate=bi.sampleRate,t.channelsCount=bi.channelCount,pt=bi.sampleRate,Ie=bi.fa,we.push({data:Qr.subarray(u,u+bi.S),size:bi.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=bi.S):u++}}if(pt==0||Ie.byteLength==0||me==null)throw new K(2,3,3018);u=me/9e4*pt,c={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:pt,duration:o,Ra:[],fa:Ie,la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.g,baseMediaDecodeTime:u,Oa:we},stream:t};break;case"mp3":we=[];var Jo;pt=null;for(var Zr=w(u.Mb()),yo=Zr.next();!yo.done;yo=Zr.next()){var Jr=yo.value,vo=Jr.data;if(vo)for(pt==null&&Jr.pts!==null&&(pt=Jr.pts),u=0;u<vo.length;){var Ni=Gl(vo,u);Ni?(Jo||(Jo=Ni),u+Ni.S<=vo.length&&we.push({data:vo.subarray(u,u+Ni.S),size:Ni.S,duration:1152,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=Ni.S):u++}}if(!Jo||pt==null)throw new K(2,3,3018);var Ea=Jo.sampleRate;u=pt/9e4*Ea,c={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ea,duration:o,Ra:[],fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.g,baseMediaDecodeTime:u,Oa:we},stream:t}}c&&e.push(c)}}catch(es){return es&&es.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(es)}return e.length?(e=new Wr(e),this.h.has(t.id)?o=this.h.get(t.id):(o=Xr(e),this.h.set(t.id,o)),t=ha(e),this.g++,t=Lt(o,t),Promise.resolve(t)):Promise.reject(new K(2,3,3018))},ae("shaka.transmuxer.TsTransmuxer",ti),ti.prototype.transmux=ti.prototype.transmux,ti.prototype.getOriginalMimeType=ti.prototype.getOriginalMimeType,ti.prototype.convertCodecs=ti.prototype.convertCodecs,ti.prototype.isSupported=ti.prototype.isSupported,ti.prototype.destroy=ti.prototype.destroy;var Ib=["aac","ac-3","ec-3","mp3"],kb=["avc","hevc"];Ui("video/mp2t",function(){return new ti("video/mp2t")},Gf);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function lx(){}var Ta;function fx(){Ta?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Ta=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Mb):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Mb(e,t){var n=this,o;return z(function(a){return a.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),E(a,Ta.call(n,e,t),2)):(o=a.h,vx(o)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Ta,a.return(o)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=cx,a.return(cx.call(n,e,t))))})}function cx(e,t){var n=this,o,a,u,f,c,p,m,v,S,C;return z(function(T){if(T.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),o=yx(e),a=[],u=w(t),f=u.next();!f.done;f=u.next())c=f.value,p=hx(c.videoCapabilities,o),m=hx(c.audioCapabilities,o),c.videoCapabilities&&c.videoCapabilities.length&&!p.length||c.audioCapabilities&&c.audioCapabilities.length&&!m.length||(v=Object.assign({},c),v.videoCapabilities=p,v.audioCapabilities=m,a.push(v));if(!a.length)throw S=Error("Unsupported keySystem or supportedConfigurations."),S.name="NotSupportedError",S.code=DOMException.NOT_SUPPORTED_ERR,S;return E(T,Ta.call(n,e,a),2)}return C=T.h,T.return(new Wl(C,o))})}function hx(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}ae("EmeEncryptionSchemePolyfill",lx),lx.install=fx;function dx(){}var Ca;function px(){Ca?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Ca=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=_b):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function _b(e){var t=this,n,o,a;return z(function(u){switch(u.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(u,Ca.call(t,e),2);case 2:if(n=u.h,!e.keySystemConfiguration)return u.return(n);if((o=n.keySystemAccess)&&vx(o))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Ca,u.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=mx,o){u.B(3);break}return a=n,E(u,gx(e),4);case 4:return a.keySystemAccess=u.h,u.return(n);case 3:return u.return(mx.call(t,e))}})}function mx(e){var t=this,n,o,a,u,f,c,p,m;return z(function(v){switch(v.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(o=e.keySystemConfiguration,a=o.keySystem,u=o.audio&&o.audio.encryptionScheme,f=o.video&&o.video.encryptionScheme,n=yx(a),c={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},u&&u!=n||f&&f!=n)?v.return(c):E(v,Ca.call(t,e),2);case 2:if(p=v.h,p.keySystemAccess){p.keySystemAccess=new Wl(p.keySystemAccess,n),v.B(3);break}if(!e.keySystemConfiguration){v.B(3);break}return m=p,E(v,gx(e),5);case 5:m.keySystemAccess=v.h;case 3:return v.return(p)}})}function gx(e){var t,n;return z(function(o){if(o.g==1){var a=e.keySystemConfiguration,u=[],f=[];return a.audio&&u.push({robustness:a.audio.robustness||"",contentType:e.audio.contentType}),a.video&&f.push({robustness:a.video.robustness||"",contentType:e.video.contentType}),a={initDataTypes:a.initDataType?[a.initDataType]:[],distinctiveIdentifier:a.distinctiveIdentifier,persistentState:a.persistentState,sessionTypes:a.sessionTypes},u.length&&(a.audioCapabilities=u),f.length&&(a.videoCapabilities=f),t=a,E(o,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=o.h,o.return(n)})}ae("McEncryptionSchemePolyfill",dx),dx.install=px;function Wl(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}Wl.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=w(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=w(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Wl.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function yx(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function vx(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Nd(){}function xx(){fx(),px()}ae("EncryptionSchemePolyfills",Nd),Nd.install=xx,typeof x<"u"&&x.exports&&(x.exports=Nd)}).call(i,r,r,void 0);for(var l in i.shaka)h[l]=i.shaka[l]})()})(U2);const Xx=oM(U2);let tr,sn;const Tp={playingState:!1},rM=async h=>{Xx.polyfill.installAll(),sn=h,sn||(sn=document.createElement("video"),sn.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",sn.width=1920,sn.height=1080,tr=new Xx.Player,await tr.attach(sn),sn.autoplay=!1,tr.addEventListener("error",r=>{console.error(r)}),document.body.insertBefore(sn,document.body.firstChild))},sM=async h=>{if(!tr||!sn)throw"Player not initialized yet";await tr.load(h.streamUrl)},aM=()=>{sn.play().then(()=>{Tp.playingState=!0})},uM=()=>{sn.pause(),Tp.playingState=!1},lM=async()=>{await tr.destroy(),tr=null,sn.remove(),sn=null},fM=()=>sn.currentTime,cM=()=>sn.duration,hM=()=>{let h=r=>new Date(r*1e3).toISOString().substr(14,5);return`${h(sn.currentTime)} : ${h(Math.floor(sn.duration))}`},wo={init:rM,load:sM,play:aM,pause:uM,getCurrentTime:fM,getVideoDuration:cM,getTimeFormat:hM,state:Tp,destroy:lM},dM=tt.Component("Player",{code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.y=1080,A.mount="{y:1}",A.w=1920,A.h=150,A.color={top:"0x00000000",bottom:"0x444444ff"},A.alpha={transition:i.controlsVisibility},s[1].populate(A),r=s[1];const I={};s[2]=this.element({parent:r||"root"},i),I.x=60,I.y=50,s[2].populate(I),r=s[2];const M={};s[3]=this.element({parent:r||"root"},i),M.w=60,M.h=60,M.color="0x0087ceeb",M.effects=[i.shader("radius",{radius:16})],s[3].populate(M),r=s[3];const O={};s[4]=this.element({parent:r||"root"},i),O.y=14,O.x=14,O.w=32,O.h=32,O.src=i.playing?"assets/player/pause.png":"assets/player/play.png",s[4].populate(O),r=s[2];const w={};s[5]=this.element({parent:r||"root"},i),w.y=22,w.x=100,w.w=i.progressLength,w.h=16,w.color="0xffffff80",w.effects=[i.shader("radius",{radius:8})],s[5].populate(w),r=s[5];const L={};s[6]=this.element({parent:r||"root"},i),L.h=16,L.w={transition:{value:i.progress,d:100,f:"ease-in-out"}},L.effects=[i.shader("radius",{radius:8})],L.color="0x0087ceeb",s[6].populate(L);const F=l.components&&l.components.Circle||d.Circle;r=s[5];const U={};if(s[7]=this.element({parent:r||"root"},i),U.size=28,U.color="0xffffffff",U.y=-6,U.x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},typeof F<"u")for(let J in F.config.props)delete U[F.config.props[J]];s[7].populate(U),r=s[7];const W={};W.size=28,W.color="0xffffffff",W.y=-6,W.x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},g=W.is||"Circle";let X;if(typeof g=="string"){if(X=l.components&&l.components[g]||d[g],!X)throw new Error('Component "Circle" not found')}else typeof g=="function"&&g.name==="factory"&&(X=g);s[8]=X.call(null,{props:W},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],i=s[8]):r=s[8][Symbol.for("children")][0],r=s[2];const Q={};s[9]=this.element({parent:r||"root"},i),Q.x=1660,Q.y=16,s[9].populate(Q),r=s[9];const ee={};s[10]=this.element({parent:r||"root"},i),ee.content=i.currentTime,ee.size=25,ee.__textnode=!0,s[10].populate(ee),r=s[9];const Z={};s[11]=this.element({parent:r||"root"},i),Z.x=70,Z.size=25,Z.content="/",Z.__textnode=!0,s[11].populate(Z),r=s[9];const H={};return s[12]=this.element({parent:r||"root"},i),H.x=85,H.size=25,H.content=i.duration,H.__textnode=!0,s[12].populate(H),s},effects:[function(r,i,l,d,y,x){i[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(r,i,l,d,y,x){i[1].set("alpha",{transition:r.controlsVisibility})},function(r,i,l,d,y,x){i[3].set("effects",[r.shader("radius",{radius:16})])},function(r,i,l,d,y,x){i[4].set("src",r.playing?"assets/player/pause.png":"assets/player/play.png")},function(r,i,l,d,y,x){i[5].set("effects",[r.shader("radius",{radius:8})])},function(r,i,l,d,y,x){i[6].set("w",{transition:{value:r.progress,d:100,f:"ease-in-out"}})},function(r,i,l,d,y,x){i[6].set("effects",[r.shader("radius",{radius:8})])},function(r,i,l,d,y,x){i[7].set("x",{transition:{value:r.progress-8,d:100,f:"ease-in-out"}})},function(r,i,l,d,y,x){i[8][Symbol.for("props")].x={transition:{value:r.progress-8,d:100,f:"ease-in-out"}}},function(r,i,l,d,y,x){i[10].set("content",r.currentTime)},function(r,i,l,d,y,x){i[12].set("content",r.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await wo.init()},async ready(){await wo.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const h=i=>new Date(i*1e3).toISOString().substr(14,5),r=wo.getVideoDuration();r&&(this.duration=h(r),this.progressChunkSize=Math.round(this.progressLength/r*100)/100),this.$setInterval(()=>{const i=wo.getCurrentTime();this.currentTime=h(i),this.progress=Math.round(i*this.progressChunkSize)},1e3),this.play()},async destroy(){await wo.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),wo.state.playingState==!0?(wo.pause(),this.playing=!1):(console.log("play!"),wo.play(),this.playing=!0)},showControls(h){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=h}}}),pM=tt.Component("Colors",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=1920,g.h=1080,g.color={transition:i.bg},s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.x=20,k.y=20,s[1].populate(k),r=s[1];const A={};s[2]=this.element({parent:r||"root"},i),A.w=100,A.h=100,A.x=0,A.color="0xecfeffff",s[2].populate(A),r=s[1];const I={};s[3]=this.element({parent:r||"root"},i),I.w=100,I.h=100,I.x=120,I.color="0xa5f3fcff",s[3].populate(I),r=s[1];const M={};s[4]=this.element({parent:r||"root"},i),M.w=100,M.h=100,M.x=240,M.color="0x22d3eeff",s[4].populate(M),r=s[1];const O={};s[5]=this.element({parent:r||"root"},i),O.w=100,O.h=100,O.x=360,O.color="0x0891b2ff",s[5].populate(O),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.x=20,w.y=140,s[6].populate(w),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.w=100,L.h=100,L.x=0,L.color="0xecfeffff",s[7].populate(L),r=s[6];const F={};s[8]=this.element({parent:r||"root"},i),F.w=100,F.h=100,F.x=120,F.color="0xa5f3fcff",s[8].populate(F),r=s[6];const U={};s[9]=this.element({parent:r||"root"},i),U.w=100,U.h=100,U.x=240,U.color="0x22d3eeff",s[9].populate(U),r=s[6];const W={};s[10]=this.element({parent:r||"root"},i),W.w=100,W.h=100,W.x=360,W.color="0x0891b2ff",s[10].populate(W),r=s[0];const X={};s[11]=this.element({parent:r||"root"},i),X.x=20,X.y=260,s[11].populate(X),r=s[11];const Q={};s[12]=this.element({parent:r||"root"},i),Q.w=100,Q.h=100,Q.x=0,Q.color="0xecfeffaa",s[12].populate(Q),r=s[11];const ee={};s[13]=this.element({parent:r||"root"},i),ee.w=100,ee.h=100,ee.x=120,ee.color="0xa5f3fc33",s[13].populate(ee),r=s[11];const Z={};s[14]=this.element({parent:r||"root"},i),Z.w=100,Z.h=100,Z.x=240,Z.color="0x22d3ee20",s[14].populate(Z),r=s[11];const H={};s[15]=this.element({parent:r||"root"},i),H.w=100,H.h=100,H.x=360,H.color="0x0891b2ff",s[15].populate(H),r=s[0];const J={};s[16]=this.element({parent:r||"root"},i),J.x=20,J.y=380,s[16].populate(J),r=s[16];const le={};s[17]=this.element({parent:r||"root"},i),le.w=100,le.h=100,le.x=0,le.color="0xecfeffff",s[17].populate(le),r=s[16];const E={};s[18]=this.element({parent:r||"root"},i),E.w=100,E.h=100,E.x=120,E.color="0xa5f3fcff",s[18].populate(E),r=s[16];const j={};s[19]=this.element({parent:r||"root"},i),j.w=100,j.h=100,j.x=240,j.color="0x22d3eeff",s[19].populate(j),r=s[16];const re={};s[20]=this.element({parent:r||"root"},i),re.w=100,re.h=100,re.x=360,re.color="0x0891b2ff",s[20].populate(re),r=s[0];const ye={};s[21]=this.element({parent:r||"root"},i),ye.x=20,ye.y=500,s[21].populate(ye),r=s[21];const ie={};s[22]=this.element({parent:r||"root"},i),ie.w=100,ie.h=100,ie.x=0,ie.color="0xecfeffab",s[22].populate(ie),r=s[21];const se={};s[23]=this.element({parent:r||"root"},i),se.w=100,se.h=100,se.x=120,se.color="0xa5f3fc33",s[23].populate(se),r=s[21];const ne={};s[24]=this.element({parent:r||"root"},i),ne.w=100,ne.h=100,ne.x=240,ne.color="0x22d3ee21",s[24].populate(ne),r=s[21];const ue={};s[25]=this.element({parent:r||"root"},i),ue.w=100,ue.h=100,ue.x=360,ue.color="0x0891b2ff",s[25].populate(ue),r=s[0];const ve={};s[26]=this.element({parent:r||"root"},i),ve.x=20,ve.y=620,s[26].populate(ve),r=s[26];const xe={};s[27]=this.element({parent:r||"root"},i),xe.w=100,xe.h=100,xe.x=0,xe.color="0x000000ff",s[27].populate(xe),r=s[26];const Se={};s[28]=this.element({parent:r||"root"},i),Se.w=100,Se.h=100,Se.x=120,Se.color="0xccccccff",s[28].populate(Se),r=s[26];const be={};s[29]=this.element({parent:r||"root"},i),be.w=100,be.h=100,be.x=240,be.color="0x889900ff",s[29].populate(be),r=s[26];const Ee={};s[30]=this.element({parent:r||"root"},i),Ee.w=100,Ee.h=100,Ee.x=360,Ee.color="0x00ff00ff",s[30].populate(Ee),r=s[0];const _e={};s[31]=this.element({parent:r||"root"},i),_e.x=20,_e.y=740,s[31].populate(_e),r=s[31];const z={};s[32]=this.element({parent:r||"root"},i),z.w=100,z.h=100,z.x=0,z.color="0x000000ff",s[32].populate(z),r=s[31];const Re={};s[33]=this.element({parent:r||"root"},i),Re.w=100,Re.h=100,Re.x=120,Re.color="0xccccccff",s[33].populate(Re),r=s[31];const Ce={};s[34]=this.element({parent:r||"root"},i),Ce.w=100,Ce.h=100,Ce.x=240,Ce.color="0x889900ff",s[34].populate(Ce),r=s[31];const oe={};s[35]=this.element({parent:r||"root"},i),oe.w=100,oe.h=100,oe.x=360,oe.color="0x00ff00ff",s[35].populate(oe),r=s[0];const P={};s[36]=this.element({parent:r||"root"},i),P.x=620,P.y=20,s[36].populate(P),r=s[36];const ge={};s[37]=this.element({parent:r||"root"},i),ge.w=300,ge.h=200,ge.x=0,ge.color={transition:i.color1},s[37].populate(ge),r=s[36];const Te={};s[38]=this.element({parent:r||"root"},i),Te.w=300,Te.h=200,Te.x=0,Te.y=250,Te.color={transition:i.color2},s[38].populate(Te),r=s[36];const Fe={};s[39]=this.element({parent:r||"root"},i),Fe.w=300,Fe.h=200,Fe.x=100,Fe.y=400,Fe.color={transition:i.color3},s[39].populate(Fe),r=s[36];const ae={};return s[40]=this.element({parent:r||"root"},i),ae.w=300,ae.h=200,ae.x=0,ae.y=650,ae.color={transition:{value:i.color4,d:1e3,f:"ease-in-out"}},s[40].populate(ae),s},effects:[function(r,i,l,d,y,x){i[0].set("color",{transition:r.bg})},function(r,i,l,d,y,x){i[37].set("color",{transition:r.color1})},function(r,i,l,d,y,x){i[38].set("color",{transition:r.color2})},function(r,i,l,d,y,x){i[39].set("color",{transition:r.color3})},function(r,i,l,d,y,x){i[40].set("color",{transition:{value:r.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let h=0;const r=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{h=h+1,h===r.length-1&&(h=0),this.bg=r[h]},2e3)}}}),mM=tt.Component("Gradients",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.w=1920/4,k.h=1080,k.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.w=1920/4,A.h=1080,A.x=1920/4,A.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",s[2].populate(A),r=s[0];const I={};s[3]=this.element({parent:r||"root"},i),I.w=1920/4,I.h=1080,I.x=1920/4*2,I.color="{top: '0x0891b2ff', right: '0xf87171ff'}",s[3].populate(I),r=s[0];const M={};return s[4]=this.element({parent:r||"root"},i),M.w=1920/4,M.h=1080,M.x=1920/4*3,M.color="{right: '0x008000ff', bottom: '0xffd700ff'}",s[4].populate(M),s},effects:[function(r,i,l,d,y,x){i[1].set("w",1920/4)},function(r,i,l,d,y,x){i[2].set("w",1920/4)},function(r,i,l,d,y,x){i[2].set("x",1920/4)},function(r,i,l,d,y,x){i[3].set("w",1920/4)},function(r,i,l,d,y,x){i[3].set("x",1920/4*2)},function(r,i,l,d,y,x){i[4].set("w",1920/4)},function(r,i,l,d,y,x){i[4].set("x",1920/4*3)}],context:{}}}),gM=tt.Component("Transitions",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.w=200,k.h=200,k.x=50,k.y={transition:i.y},k.color="0xc4b5fdff",s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.w=200,A.h=200,A.x=300,A.y={transition:{value:i.y}},A.color="0xa78bfaff",s[2].populate(A),r=s[0];const I={};s[3]=this.element({parent:r||"root"},i),I.w=200,I.h=200,I.x=550,I.y={transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}},I.color="0x8b5cf6ff",I.ref="bla",s[3].populate(I),r=s[0];const M={};s[4]=this.element({parent:r||"root"},i),M.w=200,M.h=200,M.x=800,M.y={transition:{value:i.y,duration:500,delay:1e3,start:i.start,end:i.finished}},M.color="0x7c3aedff",s[4].populate(M),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.w=200,O.h=200,O.x=1050,O.y={transition:{value:i.y,easing:"ease-in-out",end:i.finished}},O.color="0x6d28d9ff",s[5].populate(O),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.w=200,w.h=200,w.x=1300,w.y={transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}},w.color="0x5b21b6ff",s[6].populate(w),r=s[0];const L={};return s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=1550,L.y={transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},L.color="0x4c1d95ff",s[7].populate(L),s},effects:[function(r,i,l,d,y,x){i[1].set("y",{transition:r.y})},function(r,i,l,d,y,x){i[2].set("y",{transition:{value:r.y}})},function(r,i,l,d,y,x){i[3].set("y",{transition:{value:r.y,duration:1e3,start:r.start,end:r.doneTransition3}})},function(r,i,l,d,y,x){i[4].set("y",{transition:{value:r.y,duration:500,delay:1e3,start:r.start,end:r.finished}})},function(r,i,l,d,y,x){i[5].set("y",{transition:{value:r.y,easing:"ease-in-out",end:r.finished}})},function(r,i,l,d,y,x){i[6].set("y",{transition:{value:r.y,duration:3e3,easing:"ease-in-out-back",end:r.finished}})},function(r,i,l,d,y,x){i[7].set("y",{transition:{value:r.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{ready(){this.$setTimeout(()=>{this.y=1080-50-200},500)}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(h,r,i){this.$log.info("Start transition",h.nodeId,r,i)},finished(h,r,i){this.$log.info("Finished transition",h.nodeId,r,i)}}}),yM=tt.Component("Alpha",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.y=100,s[1].populate(k),r=s[1];const A={};s[2]=this.element({parent:r||"root"},i),A.w=200,A.h=200,A.x=100,A.color="0xffffffff",A.alpha=.2,s[2].populate(A),r=s[1];const I={};s[3]=this.element({parent:r||"root"},i),I.w=200,I.h=200,I.x=320,I.color="0xffffffff",I.alpha=.4,s[3].populate(I),r=s[1];const M={};s[4]=this.element({parent:r||"root"},i),M.w=200,M.h=200,M.x=540,M.color="0xffffffff",M.alpha=.6,s[4].populate(M),r=s[1];const O={};s[5]=this.element({parent:r||"root"},i),O.w=200,O.h=200,O.x=760,O.color="0xffffffff",O.alpha=.8,s[5].populate(O),r=s[1];const w={};s[6]=this.element({parent:r||"root"},i),w.w=200,w.h=200,w.x=980,w.color="0xffffffff",w.alpha=1,s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=100,L.y=320,L.color="0xffffffff",L.alpha=i.alpha,s[7].populate(L),r=s[0];const F={};s[8]=this.element({parent:r||"root"},i),F.w=200,F.h=200,F.x=100,F.y=540,F.color="0xffffffff",F.alpha=i.alpha,s[8].populate(F),r=s[0];const U={};s[9]=this.element({parent:r||"root"},i),U.w=200,U.h=200,U.x=100,U.y=760,U.color="0xffffffff",U.alpha={transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}},s[9].populate(U),r=s[0];const W={};s[10]=this.element({parent:r||"root"},i),W.w=428,W.h=234,W.x=1200,W.y=100,W.src=i.image,W.alpha=1,s[10].populate(W),r=s[0];const X={};s[11]=this.element({parent:r||"root"},i),X.w=428,X.h=234,X.x=1300,X.y=100+234-40,X.src=i.image,X.alpha=.4,s[11].populate(X),r=s[0];const Q={};s[12]=this.element({parent:r||"root"},i),Q.w=428,Q.h=234,Q.x=1200,Q.y=100+234*2-40*2,Q.src=i.image,Q.alpha=.1,s[12].populate(Q),r=s[0];const ee={};s[13]=this.element({parent:r||"root"},i),ee.x=400,ee.y=400,ee.alpha=.2,ee.content="Text with alpha applied directly",ee.__textnode=!0,s[13].populate(ee),r=s[0];const Z={};s[14]=this.element({parent:r||"root"},i),Z.alpha=.5,Z.x=400,Z.y=500,s[14].populate(Z),r=s[14];const H={};return s[15]=this.element({parent:r||"root"},i),H.content="Text with alpha applied on parent element",H.__textnode=!0,s[15].populate(H),s},effects:[function(r,i,l,d,y,x){i[8].set("alpha",r.alpha)},function(r,i,l,d,y,x){i[9].set("alpha",{transition:{value:r.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(r,i,l,d,y,x){i[10].set("src",r.image)},function(r,i,l,d,y,x){i[11].set("y",100+234-40)},function(r,i,l,d,y,x){i[11].set("src",r.image)},function(r,i,l,d,y,x){i[12].set("y",100+234*2-40*2)},function(r,i,l,d,y,x){i[12].set("src",r.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const h=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(h,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),vM=tt.Component("Scaling",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.x=100,k.y=100,k.w=150,k.h=150,k.color="0x64748bff",s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.x=300,A.y=100,A.w=100,A.h=100,A.color="0x64748bff",A.scale=1.5,s[2].populate(A),r=s[0];const I={};s[3]=this.element({parent:r||"root"},i),I.x=100,I.y=400,I.w=100,I.h=100,I.color="0xb45309ff",I.scale=i.scale,s[3].populate(I),r=s[0];const M={};s[4]=this.element({parent:r||"root"},i),M.x=900,M.y=400,M.w=100,M.h=100,M.src=i.balloon,M.scale={transition:{value:i.scale,easing:"ease-in-out"}},s[4].populate(M),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.x=300,O.y=600,O.w=100,O.h=100,O.color="0x059669ff",O.scale=i.scale2,s[5].populate(O),r=s[5];const w={};s[6]=this.element({parent:r||"root"},i),w.x=10,w.y=10,w.h=60,w.w=80,w.color="0x0369a1ff",s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.x=1500,L.y=600,L.w=100,L.h=100,L.color="0x059669ff",L.scale=i.scale2,s[7].populate(L),r=s[7];const F={};return s[8]=this.element({parent:r||"root"},i),F.x=10,F.y=10,F.h=60,F.w=80,F.color="0x0369a1ff",F.scale=i.scale2/2,s[8].populate(F),s},effects:[function(r,i,l,d,y,x){i[4].set("src",r.balloon)},function(r,i,l,d,y,x){i[4].set("scale",{transition:{value:r.scale,easing:"ease-in-out"}})},function(r,i,l,d,y,x){i[5].set("scale",r.scale2)},function(r,i,l,d,y,x){i[7].set("scale",r.scale2)},function(r,i,l,d,y,x){i[8].set("scale",r.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),xM=tt.Component("Rotation",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.y=70,s[1].populate(k),r=s[1];const A={};s[2]=this.element({parent:r||"root"},i),A.x=100,A.y=0,A.w=200,A.h=100,A.color="0xfee2e2ff",A.rotation=0,s[2].populate(A),r=s[1];const I={};s[3]=this.element({parent:r||"root"},i),I.x=100,I.y=150,I.w=200,I.h=100,I.color="0xfecacaff",I.rotation=10,s[3].populate(I),r=s[1];const M={};s[4]=this.element({parent:r||"root"},i),M.x=100,M.y=300,M.w=200,M.h=100,M.color="0xfca5a5ff",M.rotation=20,s[4].populate(M),r=s[1];const O={};s[5]=this.element({parent:r||"root"},i),O.x=100,O.y=450,O.w=200,O.h=100,O.color="0xf87171ff",O.rotation=30,s[5].populate(O),r=s[1];const w={};s[6]=this.element({parent:r||"root"},i),w.x=100,w.y=610,w.w=200,w.h=100,w.color="0xef4444ff",w.rotation=40,s[6].populate(w),r=s[1];const L={};s[7]=this.element({parent:r||"root"},i),L.x=100,L.y=800,L.w=200,L.h=100,L.color="0xdc2626ff",L.rotation=50,s[7].populate(L),r=s[0];const F={};s[8]=this.element({parent:r||"root"},i),F.y=70,F.x=300,s[8].populate(F),r=s[8];const U={};s[9]=this.element({parent:r||"root"},i),U.x=100,U.y=0,U.w=200,U.h=100,U.color="0xfee2e2ff",U.rotation=60,s[9].populate(U),r=s[8];const W={};s[10]=this.element({parent:r||"root"},i),W.x=100,W.y=150,W.w=200,W.h=100,W.color="0xfecacaff",W.rotation=70,s[10].populate(W),r=s[8];const X={};s[11]=this.element({parent:r||"root"},i),X.x=100,X.y=300,X.w=200,X.h=100,X.color="0xfca5a5ff",X.rotation=80,s[11].populate(X),r=s[8];const Q={};s[12]=this.element({parent:r||"root"},i),Q.x=100,Q.y=450,Q.w=200,Q.h=100,Q.color="0xf87171ff",Q.rotation=90,s[12].populate(Q),r=s[8];const ee={};s[13]=this.element({parent:r||"root"},i),ee.x=100,ee.y=610,ee.w=200,ee.h=100,ee.color="0xef4444ff",ee.rotation=100,s[13].populate(ee),r=s[8];const Z={};s[14]=this.element({parent:r||"root"},i),Z.x=100,Z.y=800,Z.w=200,Z.h=100,Z.color="0xdc2626ff",Z.rotation=100,s[14].populate(Z),r=s[0];const H={};s[15]=this.element({parent:r||"root"},i),H.y=70,H.x=600,s[15].populate(H),r=s[15];const J={};s[16]=this.element({parent:r||"root"},i),J.x=100,J.y=0,J.w=200,J.h=100,J.color="0xfee2e2ff",J.rotation=110,s[16].populate(J),r=s[15];const le={};s[17]=this.element({parent:r||"root"},i),le.x=100,le.y=150,le.w=200,le.h=100,le.color="0xfecacaff",le.rotation=120,s[17].populate(le),r=s[15];const E={};s[18]=this.element({parent:r||"root"},i),E.x=100,E.y=300,E.w=200,E.h=100,E.color="0xfca5a5ff",E.rotation=130,s[18].populate(E),r=s[15];const j={};s[19]=this.element({parent:r||"root"},i),j.x=100,j.y=450,j.w=200,j.h=100,j.color="0xf87171ff",j.rotation=140,s[19].populate(j),r=s[15];const re={};s[20]=this.element({parent:r||"root"},i),re.x=100,re.y=610,re.w=200,re.h=100,re.color="0xef4444ff",re.rotation=150,s[20].populate(re),r=s[15];const ye={};s[21]=this.element({parent:r||"root"},i),ye.x=100,ye.y=800,ye.w=200,ye.h=100,ye.color="0xdc2626ff",ye.rotation=160,s[21].populate(ye),r=s[0];const ie={};s[22]=this.element({parent:r||"root"},i),ie.y=70,ie.x=900,s[22].populate(ie),r=s[22];const se={};s[23]=this.element({parent:r||"root"},i),se.x=100,se.y=0,se.w=200,se.h=100,se.color="0xfee2e2ff",se.rotation=170,s[23].populate(se),r=s[22];const ne={};s[24]=this.element({parent:r||"root"},i),ne.x=100,ne.y=150,ne.w=200,ne.h=100,ne.color="0xfecacaff",ne.rotation=180,s[24].populate(ne),r=s[22];const ue={};s[25]=this.element({parent:r||"root"},i),ue.x=100,ue.y=300,ue.w=200,ue.h=100,ue.color="0xfca5a5ff",ue.rotation=190,s[25].populate(ue),r=s[22];const ve={};s[26]=this.element({parent:r||"root"},i),ve.x=100,ve.y=450,ve.w=200,ve.h=100,ve.color="0xf87171ff",ve.rotation=200,s[26].populate(ve),r=s[22];const xe={};s[27]=this.element({parent:r||"root"},i),xe.x=100,xe.y=610,xe.w=200,xe.h=100,xe.color="0xef4444ff",xe.rotation=210,s[27].populate(xe),r=s[22];const Se={};s[28]=this.element({parent:r||"root"},i),Se.x=100,Se.y=800,Se.w=200,Se.h=100,Se.color="0xdc2626ff",Se.rotation=220,s[28].populate(Se),r=s[0];const be={};s[29]=this.element({parent:r||"root"},i),be.y=70,be.x=1200,s[29].populate(be),r=s[29];const Ee={};s[30]=this.element({parent:r||"root"},i),Ee.x=100,Ee.y=0,Ee.w=200,Ee.h=100,Ee.color="0xfee2e2ff",Ee.rotation=230,s[30].populate(Ee),r=s[29];const _e={};s[31]=this.element({parent:r||"root"},i),_e.x=100,_e.y=150,_e.w=200,_e.h=100,_e.color="0xfecacaff",_e.rotation=240,s[31].populate(_e),r=s[29];const z={};s[32]=this.element({parent:r||"root"},i),z.x=100,z.y=300,z.w=200,z.h=100,z.color="0xfca5a5ff",z.rotation=250,s[32].populate(z),r=s[29];const Re={};s[33]=this.element({parent:r||"root"},i),Re.x=100,Re.y=450,Re.w=200,Re.h=100,Re.color="0xf87171ff",Re.rotation=260,s[33].populate(Re),r=s[29];const Ce={};s[34]=this.element({parent:r||"root"},i),Ce.x=100,Ce.y=610,Ce.w=200,Ce.h=100,Ce.color="0xef4444ff",Ce.rotation=270,s[34].populate(Ce),r=s[29];const oe={};s[35]=this.element({parent:r||"root"},i),oe.x=100,oe.y=800,oe.w=200,oe.h=100,oe.color="0xdc2626ff",oe.rotation=280,s[35].populate(oe),r=s[0];const P={};s[36]=this.element({parent:r||"root"},i),P.y=70,P.x=1500,s[36].populate(P),r=s[36];const ge={};s[37]=this.element({parent:r||"root"},i),ge.x=100,ge.y=0,ge.w=200,ge.h=100,ge.color="0xfee2e2ff",ge.rotation=290,s[37].populate(ge),r=s[36];const Te={};s[38]=this.element({parent:r||"root"},i),Te.x=100,Te.y=150,Te.w=200,Te.h=100,Te.color="0xfecacaff",Te.rotation=300,s[38].populate(Te),r=s[36];const Fe={};s[39]=this.element({parent:r||"root"},i),Fe.x=100,Fe.y=300,Fe.w=200,Fe.h=100,Fe.color="0xfca5a5ff",Fe.rotation=310,s[39].populate(Fe),r=s[36];const ae={};s[40]=this.element({parent:r||"root"},i),ae.x=100,ae.y=450,ae.w=200,ae.h=100,ae.color="0xf87171ff",ae.rotation=320,s[40].populate(ae),r=s[36];const Ue={};s[41]=this.element({parent:r||"root"},i),Ue.x=100,Ue.y=610,Ue.w=200,Ue.h=100,Ue.color="0xef4444ff",Ue.rotation=330,s[41].populate(Ue),r=s[36];const Y={};s[42]=this.element({parent:r||"root"},i),Y.x=100,Y.y=800,Y.w=200,Y.h=100,Y.color="0xdc2626ff",Y.rotation=340,s[42].populate(Y),r=s[0];const $={};s[43]=this.element({parent:r||"root"},i),$.x=200,$.y=200,$.w=400,$.h=400,$.color="0x0891b2ff",$.rotation=i.rotation1,s[43].populate($),r=s[0];const Ae={};s[44]=this.element({parent:r||"root"},i),Ae.x=800,Ae.y=200,Ae.w=400,Ae.h=400,Ae.color="0x0891b2ff",Ae.rotation=i.rotation2,s[44].populate(Ae),r=s[0];const De={};return s[45]=this.element({parent:r||"root"},i),De.x=1400,De.y=200,De.w=400,De.h=400,De.color="0x0891b2ff",De.rotation={transition:i.rotation3},s[45].populate(De),s},effects:[function(r,i,l,d,y,x){i[44].set("rotation",r.rotation2)},function(r,i,l,d,y,x){i[45].set("rotation",{transition:r.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let h=800,r=2e3;this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},h),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},r)}}}),wM=tt.Component("KeyInput",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.x=525,g.y=130,s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.w=200,k.h=200,k.color=i.focusColor,k.x=i.focusedX*220,k.y=i.focusedY*210,s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.w=180,A.h=180,A.x=10,A.y=10,A.color=i.blockColor,s[2].populate(A),r=s[0];const I={};s[3]=this.element({parent:r||"root"},i),I.w=180,I.h=180,I.x=230,I.y=10,I.color=i.blockColor,s[3].populate(I),r=s[0];const M={};s[4]=this.element({parent:r||"root"},i),M.w=180,M.h=180,M.x=450,M.y=10,M.color=i.blockColor,s[4].populate(M),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.w=180,O.h=180,O.x=670,O.y=10,O.color=i.blockColor,s[5].populate(O),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.w=180,w.h=180,w.x=10,w.y=220,w.color=i.blockColor,s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.w=180,L.h=180,L.x=230,L.y=220,L.color=i.blockColor,s[7].populate(L),r=s[0];const F={};s[8]=this.element({parent:r||"root"},i),F.w=180,F.h=180,F.x=450,F.y=220,F.color=i.blockColor,s[8].populate(F),r=s[0];const U={};s[9]=this.element({parent:r||"root"},i),U.w=180,U.h=180,U.x=670,U.y=220,U.color=i.blockColor,s[9].populate(U),r=s[0];const W={};s[10]=this.element({parent:r||"root"},i),W.w=180,W.h=180,W.x=10,W.y=430,W.color=i.blockColor,s[10].populate(W),r=s[0];const X={};s[11]=this.element({parent:r||"root"},i),X.w=180,X.h=180,X.x=230,X.y=430,X.color=i.blockColor,s[11].populate(X),r=s[0];const Q={};s[12]=this.element({parent:r||"root"},i),Q.w=180,Q.h=180,Q.x=450,Q.y=430,Q.color=i.blockColor,s[12].populate(Q),r=s[0];const ee={};s[13]=this.element({parent:r||"root"},i),ee.w=180,ee.h=180,ee.x=670,ee.y=430,ee.color=i.blockColor,s[13].populate(ee),r=s[0];const Z={};s[14]=this.element({parent:r||"root"},i),Z.w=180,Z.h=180,Z.x=10,Z.y=640,Z.color=i.blockColor,s[14].populate(Z),r=s[0];const H={};s[15]=this.element({parent:r||"root"},i),H.w=180,H.h=180,H.x=230,H.y=640,H.color=i.blockColor,s[15].populate(H),r=s[0];const J={};s[16]=this.element({parent:r||"root"},i),J.w=180,J.h=180,J.x=450,J.y=640,J.color=i.blockColor,s[16].populate(J),r=s[0];const le={};return s[17]=this.element({parent:r||"root"},i),le.w=180,le.h=180,le.x=670,le.y=640,le.color=i.blockColor,s[17].populate(le),s},effects:[function(r,i,l,d,y,x){i[1].set("color",r.focusColor)},function(r,i,l,d,y,x){i[1].set("x",r.focusedX*220)},function(r,i,l,d,y,x){i[1].set("y",r.focusedY*210)},function(r,i,l,d,y,x){i[2].set("color",r.blockColor)},function(r,i,l,d,y,x){i[3].set("color",r.blockColor)},function(r,i,l,d,y,x){i[4].set("color",r.blockColor)},function(r,i,l,d,y,x){i[5].set("color",r.blockColor)},function(r,i,l,d,y,x){i[6].set("color",r.blockColor)},function(r,i,l,d,y,x){i[7].set("color",r.blockColor)},function(r,i,l,d,y,x){i[8].set("color",r.blockColor)},function(r,i,l,d,y,x){i[9].set("color",r.blockColor)},function(r,i,l,d,y,x){i[10].set("color",r.blockColor)},function(r,i,l,d,y,x){i[11].set("color",r.blockColor)},function(r,i,l,d,y,x){i[12].set("color",r.blockColor)},function(r,i,l,d,y,x){i[13].set("color",r.blockColor)},function(r,i,l,d,y,x){i[14].set("color",r.blockColor)},function(r,i,l,d,y,x){i[15].set("color",r.blockColor)},function(r,i,l,d,y,x){i[16].set("color",r.blockColor)},function(r,i,l,d,y,x){i[17].set("color",r.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const h=this.focusedX-1;this.focusedX=Math.max(h,0)},right(){const h=this.focusedX+1;this.focusedX=Math.min(h,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(h){const r=parseInt(h.key);isNaN(r)?this.parent.focus(h):(this.focusedX=Math.max(0,(r-1)%4),this.focusedY=Math.max(0,Math.ceil(r/4)-1))}}}),Wd=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],Xd=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],SM=tt.Component("Texts",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.x=100,g.y=100,s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.content="Default text",k["@loaded"]=i.textLoaded&&i.textLoaded.bind(i),k.__textnode=!0,s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.content="123456",A.x=400,A.__textnode=!0,s[2].populate(A),r=s[0];const I={};s[3]=this.element({parent:r||"root"},i),I.content="Text with a different fontsize",I.size=i.size,I.y=120,I.font="raleway",I.__textnode=!0,s[3].populate(I),r=s[0];const M={};s[4]=this.element({parent:r||"root"},i),M.content="Text with a different color",M.size=50,M.color=i.color,M.y=250,M.__textnode=!0,s[4].populate(M),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.content="Letterspacing",O.size=50,O.color="0x38bdf8ff",O.y=450,O.letterspacing=40,O.__textnode=!0,s[5].populate(O),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.w=800,w.h=100,w.y=550,w.color="0x94a3b8ff",s[6].populate(w),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.content="Text align center",L.size=50,L.y=15,L.color="0xbae6fdff",L.align="center",L.wordwrap=800,L.__textnode=!0,s[7].populate(L),r=s[0];const F={};s[8]=this.element({parent:r||"root"},i),F.w=800,F.h=200,F.x=900,F.y=550,F.color="0x94a3b8ff",s[8].populate(F),r=s[8];const U={};s[9]=this.element({parent:r||"root"},i),U.content=i.longText,U.size=40,U.color="0xbae6fdff",U.wordwrap=800,U.maxlines=5,U.textoverflow="!!!",U.__textnode=!0,s[9].populate(U),r=s[0];const W={};s[10]=this.element({parent:r||"root"},i),W.w=800,W.h=120,W.x=900,W.y=800,W.color="0x94a3b8ff",s[10].populate(W),r=s[10];const X={};s[11]=this.element({parent:r||"root"},i),X.content=i.longText,X.size=40,X.color="0xbae6fdff",X.wordwrap=800,X.maxlines=2,X.lineheight=60,X.textoverflow=!1,X.__textnode=!0,s[11].populate(X),r=s[0];const Q={};s[12]=this.element({parent:r||"root"},i),Q.content=i.character,Q.size=50,Q.color=i.color,Q.y=750,Q.font="opensans",Q.__textnode=!0,s[12].populate(Q),r=s[0];const ee={};s[13]=this.element({parent:r||"root"},i),ee.x=1200,ee.y=300,s[13].populate(ee),r=s[13];const Z={};s[14]=this.element({parent:r||"root"},i),Z.rotation={transition:i.rotation},Z.pivot=0,Z.content="Hello",Z.__textnode=!0,s[14].populate(Z),r=s[13];const H={};s[15]=this.element({parent:r||"root"},i),H.x=150,H.rotation={transition:i.rotation},H.pivot=.5,H.content="World",H.__textnode=!0,s[15].populate(H),r=s[13];const J={};return s[16]=this.element({parent:r||"root"},i),J.x=300,J.rotation={transition:i.rotation},J.pivot=1,J.content="!!",J.__textnode=!0,s[16].populate(J),s},effects:[function(r,i,l,d,y,x){i[3].set("size",r.size)},function(r,i,l,d,y,x){i[4].set("color",r.color)},function(r,i,l,d,y,x){i[12].set("content",r.character)},function(r,i,l,d,y,x){i[12].set("color",r.color)},function(r,i,l,d,y,x){i[14].set("rotation",{transition:r.rotation})},function(r,i,l,d,y,x){i[15].set("rotation",{transition:r.rotation})},function(r,i,l,d,y,x){i[16].set("rotation",{transition:r.rotation})}],context:{}},state(){return{color:Wd[0],size:10,character:Xd[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0}},hooks:{ready(){let h=0;this.$setInterval(()=>{h++,h>Wd.length-1&&(h=0),this.color=Wd[h],this.size=10*(h*2+1),this.rotation+=30},1e3);let r=0;this.$setInterval(()=>{r++,r>Xd.length-1&&(r=0),this.character=Xd[r]},1400)}},methods:{textLoaded(h){this.$log.info(`Text loaded with w: ${h.w} and h: ${h.h}`)}}}),pf=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],TM=tt.Component("Images",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.src="assets/lightningbolt.png",k.w=428,k.h=234,k.x=100,k.y=100,s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",A.w=428,A.h=234,A.x=100,A.y=400,s[2].populate(A),r=s[0];const I={};s[3]=this.element({parent:r||"root"},i),I.src=i.image,I.w=428,I.h=234,I.x=100,I.y=700,I["@loaded"]=i.imageLoaded&&i.imageLoaded.bind(i),s[3].populate(I),r=s[0];const M={};s[4]=this.element({parent:r||"root"},i),M.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",M.src="assets/lightningbolt.png",M.w=428,M.h=234,M.x=600,M.y=100,s[4].populate(M),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.x=600,O.y=400,O.w=428,O.h=234,O.clipping=i.clipping,s[5].populate(O),r=s[5];const w={};s[6]=this.element({parent:r||"root"},i),w.src="assets/lightningbolt.png",w.w=856,w.h=468,s[6].populate(w),r=s[0];const L={};return s[7]=this.element({parent:r||"root"},i),L.color=i.color,L.src="assets/lightningbolt.png",L.w=428,L.h=234,L.x=1100,L.y=100,s[7].populate(L),s},effects:[function(r,i,l,d,y,x){i[3].set("src",r.image)},function(r,i,l,d,y,x){i[5].set("clipping",r.clipping)},function(r,i,l,d,y,x){i[7].set("color",r.color)}],context:{}},state(){return{image:pf[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===pf[0]?pf[1]:pf[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(h){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${h.w} and h: ${h.h}`)}}}),vs=tt.Component("Square",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w={transition:i.size},g.h={transition:i.size},g.color={transition:i.color},s[0].populate(g),s},effects:[function(r,i,l,d,y,x){i[0].set("w",{transition:r.size})},function(r,i,l,d,y,x){i[0].set("h",{transition:r.size})},function(r,i,l,d,y,x){i[0].set("color",{transition:r.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(h,r){this.$log.info(`Size changed from ${r} to ${h}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),B2=tt.Component("Card",{components:{Square:vs},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),k.w=i.w,k.h=i.h,k.color="0x0891b2ff",s[0].populate(k);const A=l.components&&l.components.Square||d.Square;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.x=80,I.y=80,typeof A<"u")for(let W in A.config.props)delete I[A.config.props[W]];s[1].populate(I),r=s[1];const M={};M.x=80,M.y=80,g=M.is||"Square";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const w=l.components&&l.components.Square||d.Square;r=s[0];const L={};if(s[3]=this.element({parent:r||"root"},i),L.x=20,L.y=20,L.size=40,typeof w<"u")for(let W in w.config.props)delete L[w.config.props[W]];s[3].populate(L),r=s[3];const F={};F.x=20,F.y=20,F.size=40,g=F.is||"Square";let U;if(typeof g=="string"){if(U=l.components&&l.components[g]||d[g],!U)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(U=g);return s[4]=U.call(null,{props:F},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0],s},effects:[],context:{}},props:["size"],computed:{w(){return this.size==="large"?400:200},h(){return this.size==="large"?500:300}}}),CM=tt.Component("Components",{components:{Square:vs,Card:B2},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k);const A=l.components&&l.components.Square||d.Square;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.x=100,I.y=100,I.size=50,typeof A<"u")for(let Ce in A.config.props)delete I[A.config.props[Ce]];s[1].populate(I),r=s[1];const M={};M.x=100,M.y=100,M.size=50,g=M.is||"Square";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const w=l.components&&l.components.Square||d.Square;r=s[0];const L={};if(s[3]=this.element({parent:r||"root"},i),L.x=100,L.y=200,L.size=100,typeof w<"u")for(let Ce in w.config.props)delete L[w.config.props[Ce]];s[3].populate(L),r=s[3];const F={};F.x=100,F.y=200,F.size=100,g=F.is||"Square";let U;if(typeof g=="string"){if(U=l.components&&l.components[g]||d[g],!U)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(U=g);s[4]=U.call(null,{props:F},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const W=l.components&&l.components.Square||d.Square;r=s[0];const X={};if(s[5]=this.element({parent:r||"root"},i),X.x=100,X.y=350,X.size=200,typeof W<"u")for(let Ce in W.config.props)delete X[W.config.props[Ce]];s[5].populate(X),r=s[5];const Q={};Q.x=100,Q.y=350,Q.size=200,g=Q.is||"Square";let ee;if(typeof g=="string"){if(ee=l.components&&l.components[g]||d[g],!ee)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(ee=g);s[6]=ee.call(null,{props:Q},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0];const Z=l.components&&l.components.Square||d.Square;r=s[0];const H={};if(s[7]=this.element({parent:r||"root"},i),H.x={transition:i.x},H.y=600,H.size=50,typeof Z<"u")for(let Ce in Z.config.props)delete H[Z.config.props[Ce]];s[7].populate(H),r=s[7];const J={};J.x={transition:i.x},J.y=600,J.size=50,g=J.is||"Square";let le;if(typeof g=="string"){if(le=l.components&&l.components[g]||d[g],!le)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(le=g);s[8]=le.call(null,{props:J},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],i=s[8]):r=s[8][Symbol.for("children")][0];const E=l.components&&l.components.Card||d.Card;r=s[0];const j={};if(s[9]=this.element({parent:r||"root"},i),j.x=500,j.y=100,typeof E<"u")for(let Ce in E.config.props)delete j[E.config.props[Ce]];s[9].populate(j),r=s[9];const re={};re.x=500,re.y=100,g=re.is||"Card";let ye;if(typeof g=="string"){if(ye=l.components&&l.components[g]||d[g],!ye)throw new Error('Component "Card" not found')}else typeof g=="function"&&g.name==="factory"&&(ye=g);s[10]=ye.call(null,{props:re},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],i=s[10]):r=s[10][Symbol.for("children")][0];const ie=l.components&&l.components.Card||d.Card;r=s[0];const se={};if(s[11]=this.element({parent:r||"root"},i),se.x=500,se.y=500,se.size="large",typeof ie<"u")for(let Ce in ie.config.props)delete se[ie.config.props[Ce]];s[11].populate(se),r=s[11];const ne={};ne.x=500,ne.y=500,ne.size="large",g=ne.is||"Card";let ue;if(typeof g=="string"){if(ue=l.components&&l.components[g]||d[g],!ue)throw new Error('Component "Card" not found')}else typeof g=="function"&&g.name==="factory"&&(ue=g);s[12]=ue.call(null,{props:ne},s[11],i),s[12][Symbol.for("slots")][0]?(r=s[12][Symbol.for("slots")][0],i=s[12]):r=s[12][Symbol.for("children")][0],r=s[0];const ve={};s[13]=this.element({parent:r||"root"},i),ve.x=1100,ve.y=200,s[13].populate(ve),r=s[13];const xe={};s[14]=this.element({parent:r||"root"},i),xe.content="Dynamic components",xe.__textnode=!0,s[14].populate(xe);const Se=l.components&&l.components.Component||d.Component;r=s[13];const be={};if(s[15]=this.element({parent:r||"root"},i),be.is=i.dynamicComponent,be.y=100,typeof Se<"u")for(let Ce in Se.config.props)delete be[Se.config.props[Ce]];s[15].populate(be),r=s[15];const Ee={};Ee.is=i.dynamicComponent,Ee.y=100,g=Ee.is||"Component";let _e;if(typeof g=="string"){if(_e=l.components&&l.components[g]||d[g],!_e)throw new Error('Component "Component" not found')}else typeof g=="function"&&g.name==="factory"&&(_e=g);s[16]=_e.call(null,{props:Ee},s[15],i),s[16][Symbol.for("slots")][0]?(r=s[16][Symbol.for("slots")][0],i=s[16]):r=s[16][Symbol.for("children")][0],r=s[13];const z=[],Re=(Ce=[],oe,P)=>{const ge=x(Ce),Te=new Set(ge.map(Ue=>""+void 0));let Fe=P.length;for(;Fe--;){const Ue=P[Fe];Te.has(Ue)||(oe[17][Ue]&&oe[17][Ue].destroy(),delete oe[17][Ue],oe[18][Ue]&&oe[18][Ue].destroy(),delete oe[18][Ue])}P.length=0;const ae=Ce.length;for(let Ue=0;Ue<ae;Ue++){const Y=Object.create(i);r=oe[13],Y.index=Ue,Y.component=ge[Ue],Y.key=Ue,P.push(Y.key);const $=l.components&&l.components.Component||d.Component;oe[17]===void 0&&(oe[17]={});const Ae={};if(oe[17][Y.key]||(oe[17][Y.key]=this.element({parent:r||"root"},i)),Ae.is=Y.component,Ae.x=250*Y.index,Ae.y=300,typeof $<"u")for(let Le in $.config.props)delete Ae[$.config.props[Le]];oe[17][Y.key].nodeId||oe[17][Y.key].populate(Ae),oe[18]===void 0&&(oe[18]={}),r=oe[17][Y.key];const De={};if(De.is=Y.component,De.x=250*Y.index,De.y=300,!oe[18][Y.key]){g=De.is||"Component";let Le;if(typeof g=="string"){if(Le=l.components&&l.components[g]||d[g],!Le)throw new Error('Component "Component" not found')}else typeof g=="function"&&g.name==="factory"&&(Le=g);oe[18][Y.key]=Le.call(null,{props:De},oe[17][Y.key],i),oe[18][Y.key][Symbol.for("slots")][0]?(r=oe[18][Y.key][Symbol.for("slots")][0],i=oe[18][Y.key]):r=oe[18][Y.key][Symbol.for("children")][0]}Y.component=Ce[Ue],y(()=>{oe[17][Y.key].set("x",250*Y.index)},"dynamicComponents"),y(()=>{oe[18][Y.key][Symbol.for("props")].x=250*Y.index},"dynamicComponents"),oe[17][0]&&oe[17][0].forComponent&&oe[17][0].forComponent.___layout&&oe[17][0].forComponent.___layout()}};return y(()=>{Re(i.dynamicComponents,s,z)},"dynamicComponents"),s},effects:[function(r,i,l,d,y,x){i[7].set("x",{transition:r.x})},function(r,i,l,d,y,x){i[8][Symbol.for("props")].x={transition:r.x}}],context:{}},state(){return{x:100,dynamicComponent:"Square",dynamicComponents:["Square","Card","Square"],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),Fn=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],EM=tt.Component("ForLoop",{components:{Square:vs},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.y=20,s[1].populate(A),r=s[1];const I=[],M=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+void 0));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[2][Y]&&P[2][Y].destroy(),delete P[2][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[1],$.index=Y,$.item=Te[Y],$.key=Y,ge.push($.key),r=P[1],P[2]===void 0&&(P[2]={});const Ae={};P[2][$.key]||(P[2][$.key]=this.element({parent:r||"root"},i)),Ae.w=80,Ae.h=80,Ae.x=$.item,Ae.color="0x4d7c0fff",P[2][$.key].nodeId||P[2][$.key].populate(Ae),$.item=oe[Y],P[2][0]&&P[2][0].forComponent&&P[2][0].forComponent.___layout&&P[2][0].forComponent.___layout()}};y(()=>{M(i.collection1,s,I)},"collection1"),r=s[0];const O={};s[3]=this.element({parent:r||"root"},i),O.y=120,s[3].populate(O),r=s[3];const w=[],L=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+Y.id));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[4][Y]&&P[4][Y].destroy(),delete P[4][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[3],$.index=Y,$.item=Te[Y],$.key=$.item.id,ge.push($.key),r=P[3],P[4]===void 0&&(P[4]={});const Ae={};P[4][$.key]||(P[4][$.key]=this.element({parent:r||"root"},i)),Ae.w=80,Ae.h=80,Ae.x=$.item.x*$.index,Ae.color=$.item.color,P[4][$.key].nodeId||P[4][$.key].populate(Ae),$.item=oe[Y],y(()=>{P[4][$.key].set("x",$.item.x*$.index)},"collection2"),P[4][0]&&P[4][0].forComponent&&P[4][0].forComponent.___layout&&P[4][0].forComponent.___layout()}};y(()=>{L(i.collection2,s,w)},"collection2"),r=s[0];const F={};s[5]=this.element({parent:r||"root"},i),F.y=220,s[5].populate(F),r=s[5];const U=[],W=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+void 0));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[6][Y]&&P[6][Y].destroy(),delete P[6][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[5],$.index=Y,$.item=Te[Y],$.key=Y,ge.push($.key),r=P[5],P[6]===void 0&&(P[6]={});const Ae={};P[6][$.key]||(P[6][$.key]=this.element({parent:r||"root"},i)),Ae.w=80,Ae.h=80,Ae.x=$.item.x,Ae.color=$.item.color,P[6][$.key].nodeId||P[6][$.key].populate(Ae),$.item=oe[Y],y(()=>{P[6][$.key].set("x",$.item.x)},null),P[6][0]&&P[6][0].forComponent&&P[6][0].forComponent.___layout&&P[6][0].forComponent.___layout()}};y(()=>{W(i.collection3,s,U)},"collection3"),r=s[0];const X={};s[7]=this.element({parent:r||"root"},i),X.y=320,s[7].populate(X),r=s[7];const Q=[],ee=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+void 0));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[8][Y]&&P[8][Y].destroy(),delete P[8][Y],P[9][Y]&&P[9][Y].destroy(),delete P[9][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[7],$.index=Y,$.item=Te[Y],$.key=Y,ge.push($.key);const Ae=l.components&&l.components.Square||d.Square;P[8]===void 0&&(P[8]={});const De={};if(P[8][$.key]||(P[8][$.key]=this.element({parent:r||"root"},i)),De.x=$.item.x*$.index,De.ref="square"+$.index,De.alpha=$.alpha,typeof Ae<"u")for(let it in Ae.config.props)delete De[Ae.config.props[it]];P[8][$.key].nodeId||P[8][$.key].populate(De),P[9]===void 0&&(P[9]={}),r=P[8][$.key];const Le={};if(Le.x=$.item.x*$.index,Le.ref="square"+$.index,Le.alpha=$.alpha,!P[9][$.key]){g=Le.is||"Square";let it;if(typeof g=="string"){if(it=l.components&&l.components[g]||d[g],!it)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(it=g);P[9][$.key]=it.call(null,{props:Le},P[8][$.key],i),P[9][$.key][Symbol.for("slots")][0]?(r=P[9][$.key][Symbol.for("slots")][0],i=P[9][$.key]):r=P[9][$.key][Symbol.for("children")][0]}$.item=oe[Y],y(()=>{P[8][$.key].set("x",$.item.x*$.index)},"collection2"),y(()=>{P[8][$.key].set("ref","square"+$.index)},"collection2"),y(()=>{P[9][$.key][Symbol.for("props")].x=$.item.x*$.index},"collection2"),y(()=>{P[9][$.key][Symbol.for("props")].ref="square"+$.index},"collection2"),P[8][0]&&P[8][0].forComponent&&P[8][0].forComponent.___layout&&P[8][0].forComponent.___layout()}};y(()=>{ee(i.collection2,s,Q)},"collection2"),y(()=>{i.alpha;for(let oe=0;oe<i.collection2.length;oe++){const P={};P.index=oe,P.item=i.collection2[oe],P.key=oe,s[8][P.key].set("alpha",i.alpha)}}),y(()=>{i.alpha;for(let oe=0;oe<i.collection2.length;oe++){const P={};P.index=oe,P.item=i.collection2[oe],P.key=oe,s[9][P.key][Symbol.for("props")].alpha=i.alpha}}),r=s[0];const Z={};s[10]=this.element({parent:r||"root"},i),Z.y=420,s[10].populate(Z),r=s[10];const H=[],J=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+Y.color));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[11][Y]&&P[11][Y].destroy(),delete P[11][Y],P[12][Y]&&P[12][Y].destroy(),delete P[12][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[10],$.index=Y,$.item=Te[Y],$.key=$.item.color,ge.push($.key);const Ae=l.components&&l.components.Square||d.Square;P[11]===void 0&&(P[11]={});const De={};if(P[11][$.key]||(P[11][$.key]=this.element({parent:r||"root"},i)),De.x=$.item.x,De.alpha=$.alpha,typeof Ae<"u")for(let it in Ae.config.props)delete De[Ae.config.props[it]];P[11][$.key].nodeId||P[11][$.key].populate(De),P[12]===void 0&&(P[12]={}),r=P[11][$.key];const Le={};if(Le.x=$.item.x,Le.alpha=$.alpha,!P[12][$.key]){g=Le.is||"Square";let it;if(typeof g=="string"){if(it=l.components&&l.components[g]||d[g],!it)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(it=g);P[12][$.key]=it.call(null,{props:Le},P[11][$.key],i),P[12][$.key][Symbol.for("slots")][0]?(r=P[12][$.key][Symbol.for("slots")][0],i=P[12][$.key]):r=P[12][$.key][Symbol.for("children")][0]}$.item=oe[Y],y(()=>{P[11][$.key].set("x",$.item.x)},null),y(()=>{P[12][$.key][Symbol.for("props")].x=$.item.x},null),P[11][0]&&P[11][0].forComponent&&P[11][0].forComponent.___layout&&P[11][0].forComponent.___layout()}};y(()=>{J(i.collection3,s,H)},"collection3"),y(()=>{i.alpha;for(let oe=0;oe<i.collection3.length;oe++){const P={};P.index=oe,P.item=i.collection3[oe],P.key=P.item.color,s[11][P.key].set("alpha",i.alpha)}}),y(()=>{i.alpha;for(let oe=0;oe<i.collection3.length;oe++){const P={};P.index=oe,P.item=i.collection3[oe],P.key=P.item.color,s[12][P.key][Symbol.for("props")].alpha=i.alpha}}),r=s[0];const le={};s[13]=this.element({parent:r||"root"},i),le.y=520,s[13].populate(le),r=s[13];const E=[],j=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+void 0));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[14][Y]&&P[14][Y].destroy(),delete P[14][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[13],$.index=Y,$.item=Te[Y],$.key=Y,ge.push($.key),r=P[13],P[14]===void 0&&(P[14]={});const Ae={};P[14][$.key]||(P[14][$.key]=this.element({parent:r||"root"},i)),Ae.w=80,Ae.h=80,Ae.x=$.item,Ae.color="0xeab308ff",Ae.alpha=$.alpha,P[14][$.key].nodeId||P[14][$.key].populate(Ae),$.item=oe[Y],P[14][0]&&P[14][0].forComponent&&P[14][0].forComponent.___layout&&P[14][0].forComponent.___layout()}};y(()=>{j(i.collection1,s,E)},"collection1"),y(()=>{i.item;for(let oe=0;oe<i.collection1.length;oe++){const P={};P.index=oe,P.item=i.collection1[oe],P.key=oe,s[14][P.key].set("x",i.item)}}),y(()=>{i.alpha;for(let oe=0;oe<i.collection1.length;oe++){const P={};P.index=oe,P.item=i.collection1[oe],P.key=oe,s[14][P.key].set("alpha",i.alpha)}}),r=s[0];const re={};s[15]=this.element({parent:r||"root"},i),re.y=620,s[15].populate(re),r=s[15];const ye=[],ie=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+Y.id));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[16][Y]&&P[16][Y].destroy(),delete P[16][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[15],$.index=Y,$.item=Te[Y],$.key=$.item.id,ge.push($.key),r=P[15],P[16]===void 0&&(P[16]={});const Ae={};P[16][$.key]||(P[16][$.key]=this.element({parent:r||"root"},i)),Ae.w=80,Ae.h=80,Ae.x=$.item.x,Ae.color=$.item.color,Ae.alpha=$.alpha,P[16][$.key].nodeId||P[16][$.key].populate(Ae),$.item=oe[Y],y(()=>{P[16][$.key].set("x",$.item.x)},null),P[16][0]&&P[16][0].forComponent&&P[16][0].forComponent.___layout&&P[16][0].forComponent.___layout()}};y(()=>{ie(i.collection2,s,ye)},"collection2"),y(()=>{i.alpha;for(let oe=0;oe<i.collection2.length;oe++){const P={};P.index=oe,P.item=i.collection2[oe],P.key=P.item.id,s[16][P.key].set("alpha",i.alpha)}}),r=s[0];const se={};s[17]=this.element({parent:r||"root"},i),se.y=720,s[17].populate(se),r=s[17];const ne=[],ue=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+Y.id));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[18][Y]&&P[18][Y].destroy(),delete P[18][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[17],$.index=Y,$.item=Te[Y],$.key=$.item.id,ge.push($.key),r=P[17],P[18]===void 0&&(P[18]={});const Ae={};P[18][$.key]||(P[18][$.key]=this.element({parent:r||"root"},i)),Ae.w=80,Ae.h=80,Ae.x=$.item.x,Ae.color="0x06b6d4ff",P[18][$.key].nodeId||P[18][$.key].populate(Ae),$.item=oe[Y],y(()=>{P[18][$.key].set("x",$.item.x)},null),P[18][0]&&P[18][0].forComponent&&P[18][0].forComponent.___layout&&P[18][0].forComponent.___layout()}};y(()=>{ue(i.collection4,s,ne)},"collection4"),r=s[0];const ve={};s[19]=this.element({parent:r||"root"},i),ve.y=720,ve.x=700,s[19].populate(ve),r=s[19];const xe=[],Se=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+void 0));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[20][Y]&&P[20][Y].destroy(),delete P[20][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[19],$.index=Y,$.item=Te[Y],$.key=Y,ge.push($.key),r=P[19],P[20]===void 0&&(P[20]={});const Ae={};P[20][$.key]||(P[20][$.key]=this.element({parent:r||"root"},i)),Ae.w=80,Ae.h=80,Ae.x=$.item.x,Ae.color="0x8b5cf6ff",P[20][$.key].nodeId||P[20][$.key].populate(Ae),$.item=oe[Y],y(()=>{P[20][$.key].set("x",$.item.x)},null),P[20][0]&&P[20][0].forComponent&&P[20][0].forComponent.___layout&&P[20][0].forComponent.___layout()}};y(()=>{Se(i.collection4,s,xe)},"collection4"),r=s[0];const be={};s[21]=this.element({parent:r||"root"},i),be.y=920,s[21].populate(be),r=s[21];const Ee=[],_e=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+Y.id));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[22][Y]&&P[22][Y].destroy(),delete P[22][Y],P[23][Y]&&P[23][Y].destroy(),delete P[23][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[21],$.index=Y,$.item=Te[Y],$.key=$.item.id,ge.push($.key);const Ae=l.components&&l.components.Square||d.Square;P[22]===void 0&&(P[22]={});const De={};if(P[22][$.key]||(P[22][$.key]=this.element({parent:r||"root"},i)),De.w=80,De.h=80,De.x=$.item.x,typeof Ae<"u")for(let it in Ae.config.props)delete De[Ae.config.props[it]];P[22][$.key].nodeId||P[22][$.key].populate(De),P[23]===void 0&&(P[23]={}),r=P[22][$.key];const Le={};if(Le.w=80,Le.h=80,Le.x=$.item.x,!P[23][$.key]){g=Le.is||"Square";let it;if(typeof g=="string"){if(it=l.components&&l.components[g]||d[g],!it)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(it=g);P[23][$.key]=it.call(null,{props:Le},P[22][$.key],i),P[23][$.key][Symbol.for("slots")][0]?(r=P[23][$.key][Symbol.for("slots")][0],i=P[23][$.key]):r=P[23][$.key][Symbol.for("children")][0]}$.item=oe[Y],y(()=>{P[22][$.key].set("x",$.item.x)},null),y(()=>{P[23][$.key][Symbol.for("props")].x=$.item.x},null),P[22][0]&&P[22][0].forComponent&&P[22][0].forComponent.___layout&&P[22][0].forComponent.___layout()}};y(()=>{_e(i.collection4,s,Ee)},"collection4"),r=s[0];const z={};s[24]=this.element({parent:r||"root"},i),z.y=920,z.x=700,s[24].populate(z),r=s[24];const Re=[],Ce=(oe=[],P,ge)=>{const Te=x(oe),Fe=new Set(Te.map(Y=>""+void 0));let ae=ge.length;for(;ae--;){const Y=ge[ae];Fe.has(Y)||(P[25][Y]&&P[25][Y].destroy(),delete P[25][Y],P[26][Y]&&P[26][Y].destroy(),delete P[26][Y])}ge.length=0;const Ue=oe.length;for(let Y=0;Y<Ue;Y++){const $=Object.create(i);r=P[24],$.index=Y,$.item=Te[Y],$.key=Y,ge.push($.key);const Ae=l.components&&l.components.Square||d.Square;P[25]===void 0&&(P[25]={});const De={};if(P[25][$.key]||(P[25][$.key]=this.element({parent:r||"root"},i)),De.w=80,De.h=80,De.x=$.item.x,typeof Ae<"u")for(let it in Ae.config.props)delete De[Ae.config.props[it]];P[25][$.key].nodeId||P[25][$.key].populate(De),P[26]===void 0&&(P[26]={}),r=P[25][$.key];const Le={};if(Le.w=80,Le.h=80,Le.x=$.item.x,!P[26][$.key]){g=Le.is||"Square";let it;if(typeof g=="string"){if(it=l.components&&l.components[g]||d[g],!it)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(it=g);P[26][$.key]=it.call(null,{props:Le},P[25][$.key],i),P[26][$.key][Symbol.for("slots")][0]?(r=P[26][$.key][Symbol.for("slots")][0],i=P[26][$.key]):r=P[26][$.key][Symbol.for("children")][0]}$.item=oe[Y],y(()=>{P[25][$.key].set("x",$.item.x)},null),y(()=>{P[26][$.key][Symbol.for("props")].x=$.item.x},null),P[25][0]&&P[25][0].forComponent&&P[25][0].forComponent.___layout&&P[25][0].forComponent.___layout()}};return y(()=>{Ce(i.collection4,s,Re)},"collection4"),s},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:Fn[0]},{id:"block2",x:100,color:Fn[1]},{id:"block3",x:200,color:Fn[2]},{id:"block4",x:300,color:Fn[3]},{id:"block5",x:400,color:Fn[4]},{id:"block6",x:500,color:Fn[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=Fn[5],this.collection2[1].color=Fn[4],this.collection2[2].color=Fn[3],this.collection2[3].color=Fn[2],this.collection2[4].color=Fn[1],this.collection2[5].color=Fn[0]},4e3);let h=0;const r=this.$setInterval(()=>{this.collection3.push({x:h*100,color:Fn[h]}),h++,h===Fn.length&&clearInterval(r)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),Kx=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],Yx=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],qx=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],Kd=h=>Math.round(Math.random()*1e3)%h;let AM=0;const Da=()=>({id:AM++,text:`${Kx[Kd(Kx.length)]} ${Yx[Kd(Yx.length)]} ${qx[Kd(qx.length)]}`}),bM=(h=1)=>{const r=[];for(let i=0;i<h;i++)r.push(Da());return r},IM=tt.Component("LegendItem",{code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k);const A=l.components&&l.components.Circle||d.Circle;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.color="0xfb923cff",I.size=60,typeof A<"u")for(let F in A.config.props)delete I[A.config.props[F]];s[1].populate(I),r=s[1];const M={};M.color="0xfb923cff",M.size=60,g=M.is||"Circle";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "Circle" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],r=s[0];const w={};s[3]=this.element({parent:r||"root"},i),w.color="0xe5e5e5ff",w.size=32,w.y=10,w.wordwrap=57,w.align="center",w.content=""+i.id,w.__textnode=!0,s[3].populate(w),r=s[0];const L={};return s[4]=this.element({parent:r||"root"},i),L.color="0xe5e5e5ff",L.x=80,L.y=14,L.size=28,L.content=""+i.text,L.__textnode=!0,s[4].populate(L),s},effects:[],context:{}},props:["id","text"]}),j2=tt.Component("Row",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=500,g.h=60,g.y=i.index*80,g.color="0xfff7edff",s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.w=10,k.h=60,k.color="0x06b6d4ff",s[1].populate(k),r=s[0];const A={};return s[2]=this.element({parent:r||"root"},i),A.content=i.text,A.x=30,A.y=10,A.font="opensans",A.color="0x1e293bff",A.__textnode=!0,s[2].populate(A),s},effects:[function(r,i,l,d,y,x){i[0].set("y",r.index*80)}],context:{}},props:["index","text"]}),kM=tt.Component("Row",{components:{Row:j2},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k=[],A=(I=[],M,O)=>{const w=x(I),L=new Set(w.map(W=>""+W.id+"key2"));let F=O.length;for(;F--;){const W=O[F];L.has(W)||(M[0][W]&&M[0][W].destroy(),delete M[0][W],M[1][W]&&M[1][W].destroy(),delete M[1][W])}O.length=0;const U=I.length;for(let W=0;W<U;W++){const X=Object.create(i);r=!1,X.index=W,X.item=w[W],X.key=X.item.id+"key2",O.push(X.key);const Q=l.components&&l.components.Row||d.Row;M[0]===void 0&&(M[0]={});const ee={};if(M[0][X.key]||(M[0][X.key]=this.element({parent:r||"root"},i)),ee.index=X.index,ee.text=X.item.text,ee.y=50,typeof Q<"u")for(let H in Q.config.props)delete ee[Q.config.props[H]];M[0][X.key].nodeId||M[0][X.key].populate(ee),M[1]===void 0&&(M[1]={}),r=M[0][X.key];const Z={};if(Z.index=X.index,Z.text=X.item.text,Z.y=50,!M[1][X.key]){g=Z.is||"Row";let H;if(typeof g=="string"){if(H=l.components&&l.components[g]||d[g],!H)throw new Error('Component "Row" not found')}else typeof g=="function"&&g.name==="factory"&&(H=g);M[1][X.key]=H.call(null,{props:Z},M[0][X.key],i),M[1][X.key][Symbol.for("slots")][0]?(r=M[1][X.key][Symbol.for("slots")][0],i=M[1][X.key]):r=M[1][X.key][Symbol.for("children")][0]}X.item=I[W],y(()=>{M[0][X.key].set("index",X.index)},"data"),y(()=>{M[1][X.key][Symbol.for("props")].index=X.index},"data"),M[0][0]&&M[0][0].forComponent&&M[0][0].forComponent.___layout&&M[0][0].forComponent.___layout()}};return y(()=>{A(i.data,s,k)},"data"),s},effects:[],context:{}},props:["data"]}),MM=tt.Component("ForLoop",{components:{Square:vs,LegendItem:IM,Row:j2,Rows:kM},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.x=100,A.y=60,A.size=48,A.content="Array operations test",A.__textnode=!0,s[1].populate(A),r=s[0];const I={};s[2]=this.element({parent:r||"root"},i),I.y=170,I.x=140,s[2].populate(I),r=s[2];const M={};s[3]=this.element({parent:r||"root"},i),M.x=-10,M.w=500,M.h=80,M.color="0x64748bff",M.y={transition:i.y},M.alpha={transition:!i.hide},s[3].populate(M);const O=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const w={};if(s[4]=this.element({parent:r||"root"},i),w.y=0,w.id="a",w.text="Fill array by assignment",typeof O<"u")for(let wt in O.config.props)delete w[O.config.props[wt]];s[4].populate(w),r=s[4];const L={};L.y=0,L.id="a",L.text="Fill array by assignment",g=L.is||"LegendItem";let F;if(typeof g=="string"){if(F=l.components&&l.components[g]||d[g],!F)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(F=g);s[5]=F.call(null,{props:L},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],i=s[5]):r=s[5][Symbol.for("children")][0];const U=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const W={};if(s[6]=this.element({parent:r||"root"},i),W.y=90,W.id="b",W.text="Push new item to array",typeof U<"u")for(let wt in U.config.props)delete W[U.config.props[wt]];s[6].populate(W),r=s[6];const X={};X.y=90,X.id="b",X.text="Push new item to array",g=X.is||"LegendItem";let Q;if(typeof g=="string"){if(Q=l.components&&l.components[g]||d[g],!Q)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(Q=g);s[7]=Q.call(null,{props:X},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],i=s[7]):r=s[7][Symbol.for("children")][0];const ee=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const Z={};if(s[8]=this.element({parent:r||"root"},i),Z.y=180,Z.id="c",Z.text="Pop item from array",typeof ee<"u")for(let wt in ee.config.props)delete Z[ee.config.props[wt]];s[8].populate(Z),r=s[8];const H={};H.y=180,H.id="c",H.text="Pop item from array",g=H.is||"LegendItem";let J;if(typeof g=="string"){if(J=l.components&&l.components[g]||d[g],!J)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(J=g);s[9]=J.call(null,{props:H},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0];const le=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const E={};if(s[10]=this.element({parent:r||"root"},i),E.y=270,E.id="d",E.text="Shift item from array",typeof le<"u")for(let wt in le.config.props)delete E[le.config.props[wt]];s[10].populate(E),r=s[10];const j={};j.y=270,j.id="d",j.text="Shift item from array",g=j.is||"LegendItem";let re;if(typeof g=="string"){if(re=l.components&&l.components[g]||d[g],!re)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(re=g);s[11]=re.call(null,{props:j},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],i=s[11]):r=s[11][Symbol.for("children")][0];const ye=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const ie={};if(s[12]=this.element({parent:r||"root"},i),ie.y=360,ie.id="e",ie.text="Splice 2 items from array",typeof ye<"u")for(let wt in ye.config.props)delete ie[ye.config.props[wt]];s[12].populate(ie),r=s[12];const se={};se.y=360,se.id="e",se.text="Splice 2 items from array",g=se.is||"LegendItem";let ne;if(typeof g=="string"){if(ne=l.components&&l.components[g]||d[g],!ne)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(ne=g);s[13]=ne.call(null,{props:se},s[12],i),s[13][Symbol.for("slots")][0]?(r=s[13][Symbol.for("slots")][0],i=s[13]):r=s[13][Symbol.for("children")][0];const ue=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const ve={};if(s[14]=this.element({parent:r||"root"},i),ve.y=450,ve.id="f",ve.text="Unshift 2 items into array",typeof ue<"u")for(let wt in ue.config.props)delete ve[ue.config.props[wt]];s[14].populate(ve),r=s[14];const xe={};xe.y=450,xe.id="f",xe.text="Unshift 2 items into array",g=xe.is||"LegendItem";let Se;if(typeof g=="string"){if(Se=l.components&&l.components[g]||d[g],!Se)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(Se=g);s[15]=Se.call(null,{props:xe},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const be=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const Ee={};if(s[16]=this.element({parent:r||"root"},i),Ee.y=540,Ee.id="g",Ee.text="Empty array by assignment",typeof be<"u")for(let wt in be.config.props)delete Ee[be.config.props[wt]];s[16].populate(Ee),r=s[16];const _e={};_e.y=540,_e.id="g",_e.text="Empty array by assignment",g=_e.is||"LegendItem";let z;if(typeof g=="string"){if(z=l.components&&l.components[g]||d[g],!z)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(z=g);s[17]=z.call(null,{props:_e},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const Re=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const Ce={};if(s[18]=this.element({parent:r||"root"},i),Ce.y=630,Ce.id="h",Ce.text="Concat an array with items",typeof Re<"u")for(let wt in Re.config.props)delete Ce[Re.config.props[wt]];s[18].populate(Ce),r=s[18];const oe={};oe.y=630,oe.id="h",oe.text="Concat an array with items",g=oe.is||"LegendItem";let P;if(typeof g=="string"){if(P=l.components&&l.components[g]||d[g],!P)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(P=g);s[19]=P.call(null,{props:oe},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0];const ge=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const Te={};if(s[20]=this.element({parent:r||"root"},i),Te.y=720,Te.id="i",Te.text="Sort array alphabetically",typeof ge<"u")for(let wt in ge.config.props)delete Te[ge.config.props[wt]];s[20].populate(Te),r=s[20];const Fe={};Fe.y=720,Fe.id="i",Fe.text="Sort array alphabetically",g=Fe.is||"LegendItem";let ae;if(typeof g=="string"){if(ae=l.components&&l.components[g]||d[g],!ae)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g.name==="factory"&&(ae=g);s[21]=ae.call(null,{props:Fe},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0],r=s[2];const Ue={};s[22]=this.element({parent:r||"root"},i),Ue.y=840,s[22].populate(Ue),r=s[22];const Y={};s[23]=this.element({parent:r||"root"},i),Y.size=26,Y.y=10,Y.content="Array length:",Y.__textnode=!0,s[23].populate(Y),r=s[22];const $={};s[24]=this.element({parent:r||"root"},i),$.content=i.data.length,$.size=40,$.x=180,$.color="0xfb923cff",$.__textnode=!0,s[24].populate($),r=s[0];const Ae={};s[25]=this.element({parent:r||"root"},i),Ae.x=740,Ae.y=100,s[25].populate(Ae),r=s[25];const De={};s[26]=this.element({parent:r||"root"},i),De.content="For loop on Element",De.__textnode=!0,s[26].populate(De),r=s[25];const Le=[],it=(wt=[],ke,Nt)=>{const Zt=x(wt),Mn=new Set(Zt.map(nt=>""+nt.id+"key"));let Vn=Nt.length;for(;Vn--;){const nt=Nt[Vn];Mn.has(nt)||(ke[27][nt]&&ke[27][nt].destroy(),delete ke[27][nt],ke[28][nt]&&ke[28][nt].destroy(),delete ke[28][nt],ke[29][nt]&&ke[29][nt].destroy(),delete ke[29][nt])}Nt.length=0;const _n=wt.length;for(let nt=0;nt<_n;nt++){const Ye=Object.create(i);r=ke[25],Ye.index=nt,Ye.item=Zt[nt],Ye.key=Ye.item.id+"key",Nt.push(Ye.key),r=ke[25],ke[27]===void 0&&(ke[27]={});const Pt={};ke[27][Ye.key]||(ke[27][Ye.key]=this.element({parent:r||"root"},i)),Pt.w=500,Pt.h=60,Pt.y=Ye.index*80+50,Pt.color="0xfff7edff",ke[27][Ye.key].nodeId||ke[27][Ye.key].populate(Pt),r=ke[27][Ye.key],ke[28]===void 0&&(ke[28]={});const Ve={};ke[28][Ye.key]||(ke[28][Ye.key]=this.element({parent:r||"root"},i)),Ve.w=10,Ve.h=60,Ve.color="0xfb923cff",ke[28][Ye.key].nodeId||ke[28][Ye.key].populate(Ve),r=ke[27][Ye.key],ke[29]===void 0&&(ke[29]={});const Xt={};ke[29][Ye.key]||(ke[29][Ye.key]=this.element({parent:r||"root"},i)),Xt.content=Ye.item.text,Xt.x=30,Xt.y=10,Xt.font="opensans",Xt.color="0x1e293bff",Xt.__textnode=!0,ke[29][Ye.key].nodeId||ke[29][Ye.key].populate(Xt),Ye.item=wt[nt],y(()=>{ke[27][Ye.key].set("y",Ye.index*80+50)},"data"),ke[27][0]&&ke[27][0].forComponent&&ke[27][0].forComponent.___layout&&ke[27][0].forComponent.___layout()}};y(()=>{it(i.data,s,Le)},"data"),r=s[0];const zn={};s[30]=this.element({parent:r||"root"},i),zn.x=1280,zn.y=100,s[30].populate(zn),r=s[30];const oo={};s[31]=this.element({parent:r||"root"},i),oo.content="For loop on Component",oo.__textnode=!0,s[31].populate(oo),r=s[30];const gi=[],yi=(wt=[],ke,Nt)=>{const Zt=x(wt),Mn=new Set(Zt.map(nt=>""+nt.id+"key2"));let Vn=Nt.length;for(;Vn--;){const nt=Nt[Vn];Mn.has(nt)||(ke[32][nt]&&ke[32][nt].destroy(),delete ke[32][nt],ke[33][nt]&&ke[33][nt].destroy(),delete ke[33][nt])}Nt.length=0;const _n=wt.length;for(let nt=0;nt<_n;nt++){const Ye=Object.create(i);r=ke[30],Ye.index=nt,Ye.item=Zt[nt],Ye.key=Ye.item.id+"key2",Nt.push(Ye.key);const Pt=l.components&&l.components.Row||d.Row;ke[32]===void 0&&(ke[32]={});const Ve={};if(ke[32][Ye.key]||(ke[32][Ye.key]=this.element({parent:r||"root"},i)),Ve.index=Ye.index,Ve.text=Ye.item.text,Ve.y=50,typeof Pt<"u")for(let Et in Pt.config.props)delete Ve[Pt.config.props[Et]];ke[32][Ye.key].nodeId||ke[32][Ye.key].populate(Ve),ke[33]===void 0&&(ke[33]={}),r=ke[32][Ye.key];const Xt={};if(Xt.index=Ye.index,Xt.text=Ye.item.text,Xt.y=50,!ke[33][Ye.key]){g=Xt.is||"Row";let Et;if(typeof g=="string"){if(Et=l.components&&l.components[g]||d[g],!Et)throw new Error('Component "Row" not found')}else typeof g=="function"&&g.name==="factory"&&(Et=g);ke[33][Ye.key]=Et.call(null,{props:Xt},ke[32][Ye.key],i),ke[33][Ye.key][Symbol.for("slots")][0]?(r=ke[33][Ye.key][Symbol.for("slots")][0],i=ke[33][Ye.key]):r=ke[33][Ye.key][Symbol.for("children")][0]}Ye.item=wt[nt],y(()=>{ke[32][Ye.key].set("index",Ye.index)},"data"),y(()=>{ke[33][Ye.key][Symbol.for("props")].index=Ye.index},"data"),ke[32][0]&&ke[32][0].forComponent&&ke[32][0].forComponent.___layout&&ke[32][0].forComponent.___layout()}};return y(()=>{yi(i.data,s,gi)},"data"),s},effects:[function(r,i,l,d,y,x){i[3].set("y",{transition:r.y})},function(r,i,l,d,y,x){i[3].set("alpha",{transition:!r.hide})},function(r,i,l,d,y,x){i[24].set("content",r.data.length)}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1}},computed:{show(){return this.hide===!0},data2(){return this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.trigger("y");const h=[];for(let r=0;r<6;r++)h.push(Da());this.data=h},b(){this.y=80,this.trigger("y"),this.data.push(Da())},c(){this.y=170,this.trigger("y"),this.data.pop()},d(){this.y=260,this.trigger("y"),this.data.shift()},e(){this.y=350,this.trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.trigger("y"),this.data.unshift(Da(),Da())},g(){this.y=530,this.trigger("y"),this.data=[]},h(){this.y=620,this.trigger("y"),this.data=this.data.concat(bM(3))},i(){this.y=710,this.trigger("y"),this.data=this.data.sort((h,r)=>{const i=h.text.toLowerCase(),l=r.text.toLowerCase();return this.sortDirection=this.sortDirection===1?0:1,this.sortDirection===1?i<l?-1:i>l?1:0:i>l?-1:i<l?1:0})}}}),_M=tt.Component("Effects",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.w=160,k.h=160,k.x=40,k.y=40,k.color="0xfb923cff",k.effects=[i.shader("radius",{radius:44})],s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.w=160,A.h=160,A.x=240,A.y=40,A.color="0xd97706ff",A.effects=[i.shader("radius",{radius:25})],s[2].populate(A),r=s[0];const I={};s[3]=this.element({parent:r||"root"},i),I.w=160,I.h=160,I.x=440,I.y=40,I.color="0xb45309ff",I.effects=[i.shader("radius",{radius:80})],s[3].populate(I),r=s[0];const M={};s[4]=this.element({parent:r||"root"},i),M.w=160,M.h=160,M.x=640,M.y=40,M.color="0x78350fff",M.effects=[i.shader("radius",{radius:10})],s[4].populate(M),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.w=160,O.h=160,O.x=40,O.y=240,O.color="0x65a30dff",O.effects=[i.shader("radius",{radius:i.radius})],s[5].populate(O),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.w=300,w.h=300,w.x=40,w.y=440,w.color="0x0c4a6eff",w.effects=[i.shader("radius",{radius:30})],s[6].populate(w),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=50,L.y=50,L.color="0x0284c7ff",L.effects=[i.shader("radius",{radius:40})],s[7].populate(L),r=s[7];const F={};s[8]=this.element({parent:r||"root"},i),F.w=100,F.h=100,F.x=50,F.y=50,F.color="0x38bdf8ff",F.effects=[i.shader("radius",{radius:50})],s[8].populate(F),r=s[8];const U={};s[9]=this.element({parent:r||"root"},i),U.w=40,U.h=40,U.x=30,U.y=30,U.color="0xbae6fdff",U.effects=[i.shader("radius",{radius:20})],s[9].populate(U),r=s[0];const W={};s[10]=this.element({parent:r||"root"},i),W.w=160,W.h=160,W.x=840,W.y=40,W.color="0x3b82f6ff",W.effects=[i.shader("radius",{radius:10}),i.shader("border",{width:20,color:"0x60a5faff"})],s[10].populate(W),r=s[0];const X={};return s[11]=this.element({parent:r||"root"},i),X.w=160,X.h=160,X.x=1040,X.y=40,X.color="0x500724ff",X.effects=i.effects,s[11].populate(X),s},effects:[function(r,i,l,d,y,x){i[1].set("effects",[r.shader("radius",{radius:44})])},function(r,i,l,d,y,x){i[2].set("effects",[r.shader("radius",{radius:25})])},function(r,i,l,d,y,x){i[3].set("effects",[r.shader("radius",{radius:80})])},function(r,i,l,d,y,x){i[4].set("effects",[r.shader("radius",{radius:10})])},function(r,i,l,d,y,x){i[5].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,l,d,y,x){i[6].set("effects",[r.shader("radius",{radius:30})])},function(r,i,l,d,y,x){i[7].set("effects",[r.shader("radius",{radius:40})])},function(r,i,l,d,y,x){i[8].set("effects",[r.shader("radius",{radius:50})])},function(r,i,l,d,y,x){i[9].set("effects",[r.shader("radius",{radius:20})])},function(r,i,l,d,y,x){i[10].set("effects",[r.shader("radius",{radius:10}),r.shader("border",{width:20,color:"0x60a5faff"})])},function(r,i,l,d,y,x){i[11].set("effects",r.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]}},hooks:{ready(){this.$setInterval(()=>{const r=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(r,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let h=0;this.$setInterval(()=>{h++,h%2?this.effects=[this.shader("borderLeft",{width:20,color:"#be123c"}),this.shader("borderRight",{width:20,color:"#f43f5e"})]:this.effects=[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]},2e3)}}}),RM=tt.Component("ShowIf",{components:{Square:vs},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.y=40,s[1].populate(A),r=s[1];const I={};s[2]=this.element({parent:r||"root"},i),I.x=50,I.w=200,I.h=300,I.color="0xbef264ff",I.show=!0,s[2].populate(I),r=s[1];const M={};s[3]=this.element({parent:r||"root"},i),M.x=350,M.w=200,M.h=300,M.color="0xff0000ff",M.show=!1,s[3].populate(M),r=s[1];const O={};s[4]=this.element({parent:r||"root"},i),O.x=650,O.w=200,O.h=300,O.color="0x84cc16ff",O.show=1,s[4].populate(O),r=s[1];const w={};s[5]=this.element({parent:r||"root"},i),w.x=950,w.w=200,w.h=300,w.color="0xff0000ff",w.show=0,s[5].populate(w),r=s[0];const L={};s[6]=this.element({parent:r||"root"},i),L.y=380,s[6].populate(L),r=s[6];const F={};s[7]=this.element({parent:r||"root"},i),F.x=50,F.w=200,F.h=300,F.color="0xfde047ff",F.show=i.showNr,s[7].populate(F),r=s[6];const U={};s[8]=this.element({parent:r||"root"},i),U.x=350,U.w=200,U.h=300,U.color="0x0000ffff",U.show=i.hideNr,s[8].populate(U),r=s[6];const W={};s[9]=this.element({parent:r||"root"},i),W.x=650,W.w=200,W.h=300,W.color="0x84cc16ff",W.show=i.showBool,s[9].populate(W),r=s[6];const X={};s[10]=this.element({parent:r||"root"},i),X.x=950,X.w=200,X.h=300,X.color="0xff0000ff",X.show=i.hideBool,s[10].populate(X),r=s[0];const Q={};s[11]=this.element({parent:r||"root"},i),Q.y=720,s[11].populate(Q),r=s[11];const ee={};s[12]=this.element({parent:r||"root"},i),ee.x=50,ee.w=200,ee.h=300,ee.color="0x5eead4ff",ee.show=i.showHideToggle,s[12].populate(ee),r=s[0];const Z={};s[13]=this.element({parent:r||"root"},i),Z.y=40,Z.x=1e3,s[13].populate(Z);const H=l.components&&l.components.Square||d.Square;r=s[13];const J={};if(s[14]=this.element({parent:r||"root"},i),J.show=!0,typeof H<"u")for(let xe in H.config.props)delete J[H.config.props[xe]];s[14].populate(J),r=s[14];const le={};le.show=!0,g=le.is||"Square";let E;if(typeof g=="string"){if(E=l.components&&l.components[g]||d[g],!E)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(E=g);s[15]=E.call(null,{props:le},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const j=l.components&&l.components.Square||d.Square;r=s[13];const re={};if(s[16]=this.element({parent:r||"root"},i),re.y=100,re.show=!1,typeof j<"u")for(let xe in j.config.props)delete re[j.config.props[xe]];s[16].populate(re),r=s[16];const ye={};ye.y=100,ye.show=!1,g=ye.is||"Square";let ie;if(typeof g=="string"){if(ie=l.components&&l.components[g]||d[g],!ie)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(ie=g);s[17]=ie.call(null,{props:ye},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const se=l.components&&l.components.Square||d.Square;r=s[13];const ne={};if(s[18]=this.element({parent:r||"root"},i),ne.y=200,ne.show=i.showHideToggle,typeof se<"u")for(let xe in se.config.props)delete ne[se.config.props[xe]];s[18].populate(ne),r=s[18];const ue={};ue.y=200,ue.show=i.showHideToggle,g=ue.is||"Square";let ve;if(typeof g=="string"){if(ve=l.components&&l.components[g]||d[g],!ve)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(ve=g);return s[19]=ve.call(null,{props:ue},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[12].set("show",r.showHideToggle)},function(r,i,l,d,y,x){i[18].set("show",r.showHideToggle)},function(r,i,l,d,y,x){i[19][Symbol.for("props")].show=r.showHideToggle}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),LM=tt.Component("Events",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.x=400,g.y=360,s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.w=280,k.h=280,k.color="0xe5e7ebff",k.x=i.x,k.y=-5,s[1].populate(k),r=s[0];const A={};s[2]=this.element({parent:r||"root"},i),A.w=250,A.h=250,A.x=10,A.y=10,A.color=i.colors[0],s[2].populate(A),r=s[0];const I={};s[3]=this.element({parent:r||"root"},i),I.w=250,I.h=250,I.x=290,I.y=10,I.color=i.colors[1],s[3].populate(I),r=s[0];const M={};s[4]=this.element({parent:r||"root"},i),M.w=250,M.h=250,M.x=570,M.y=10,M.color=i.colors[2],s[4].populate(M),r=s[0];const O={};return s[5]=this.element({parent:r||"root"},i),O.w=250,O.h=250,O.x=850,O.y=10,O.color=i.colors[3],s[5].populate(O),s},effects:[function(r,i,l,d,y,x){i[1].set("x",r.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(h){const r=this.count-1;r===-1?this.parent.focus(h):this.count=Math.max(r,0)},right(h){const r=this.count+1;r===4?this.parent.focus(h):this.count=Math.min(r,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),PM=tt.Component("SlotCard",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=300,g.h=500,g.effects=[i.shader("radius",{radius:20}),i.shader("border",{width:6,color:"0xe2e8f0ff"})],g.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k[Symbol.for("isSlot")]=!0,k.x=20,k.y=20,s[1].populate(k),r=s[0];const A={};return s[2]=this.element({parent:r||"root"},i),A.content=i.label,A.wordwrap=260,A.x=20,A.y=400,A.align="center",A.__textnode=!0,s[2].populate(A),s},effects:[function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20}),r.shader("border",{width:6,color:"0xe2e8f0ff"})])}],context:{}},props:[{key:"label"}]}),DM=tt.Component("NamedSlotCard",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=700,g.h=300,g.effects=[i.shader("radius",{radius:20}),i.shader("border",{width:6,color:"0xe2e8f0ff"})],g.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.x=20,k.y=20,s[1].populate(k),r=s[1];const A={};s[2]=this.element({parent:r||"root"},i),A.content="First slot",A.__textnode=!0,s[2].populate(A),r=s[1];const I={};s[3]=this.element({parent:r||"root"},i),I[Symbol.for("isSlot")]=!0,I.y=40,I.ref="first",s[3].populate(I),r=s[0];const M={};s[4]=this.element({parent:r||"root"},i),M.x=200,M.y=20,s[4].populate(M),r=s[4];const O={};s[5]=this.element({parent:r||"root"},i),O.content="Second slot",O.__textnode=!0,s[5].populate(O),r=s[4];const w={};s[6]=this.element({parent:r||"root"},i),w[Symbol.for("isSlot")]=!0,w.y=40,w.ref="second",s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.x=480,L.y=20,s[7].populate(L),r=s[7];const F={};s[8]=this.element({parent:r||"root"},i),F.content="Third slot",F.__textnode=!0,s[8].populate(F),r=s[7];const U={};return s[9]=this.element({parent:r||"root"},i),U[Symbol.for("isSlot")]=!0,U.y=40,U.ref="third",s[9].populate(U),s},effects:[function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20}),r.shader("border",{width:6,color:"0xe2e8f0ff"})])}],context:{}}}),ka=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],NM=tt.Component("Components",{components:{SlotCard:PM,NamedSlotCard:DM,Card:B2,Square:vs},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k);const A=l.components&&l.components.SlotCard||d.SlotCard;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),I.x=400,I.y=100,I.label="Element",typeof A<"u")for(let De in A.config.props)delete I[A.config.props[De]];s[1].populate(I),r=s[1];const M={};M.x=400,M.y=100,M.label="Element",g=M.is||"SlotCard";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "SlotCard" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const w={};s[3]=this.element({parent:r||"root"},i),s[3].populate(w),r=s[3];const L={};s[4]=this.element({parent:r||"root"},i),L.color=i.color,L.w=100,L.h=100,s[4].populate(L);const F=l.components&&l.components.SlotCard||d.SlotCard;r=s[0];const U={};if(s[5]=this.element({parent:r||"root"},i),U.x=800,U.y=100,U.label="Component",typeof F<"u")for(let De in F.config.props)delete U[F.config.props[De]];s[5].populate(U),r=s[5];const W={};W.x=800,W.y=100,W.label="Component",g=W.is||"SlotCard";let X;if(typeof g=="string"){if(X=l.components&&l.components[g]||d[g],!X)throw new Error('Component "SlotCard" not found')}else typeof g=="function"&&g.name==="factory"&&(X=g);s[6]=X.call(null,{props:W},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0];const Q={};s[7]=this.element({parent:r||"root"},i),s[7].populate(Q);const ee=l.components&&l.components.Square||d.Square;r=s[7];const Z={};if(s[8]=this.element({parent:r||"root"},i),Z.size=200,Z.y=50,typeof ee<"u")for(let De in ee.config.props)delete Z[ee.config.props[De]];s[8].populate(Z),r=s[8];const H={};H.size=200,H.y=50,g=H.is||"Square";let J;if(typeof g=="string"){if(J=l.components&&l.components[g]||d[g],!J)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(J=g);s[9]=J.call(null,{props:H},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0];const le=l.components&&l.components.SlotCard||d.SlotCard;r=s[0];const E={};if(s[10]=this.element({parent:r||"root"},i),E.x=1200,E.y=100,E.label="Element & Component",typeof le<"u")for(let De in le.config.props)delete E[le.config.props[De]];s[10].populate(E),r=s[10];const j={};j.x=1200,j.y=100,j.label="Element & Component",g=j.is||"SlotCard";let re;if(typeof g=="string"){if(re=l.components&&l.components[g]||d[g],!re)throw new Error('Component "SlotCard" not found')}else typeof g=="function"&&g.name==="factory"&&(re=g);s[11]=re.call(null,{props:j},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],i=s[11]):r=s[11][Symbol.for("children")][0];const ye={};s[12]=this.element({parent:r||"root"},i),s[12].populate(ye),r=s[12];const ie={};s[13]=this.element({parent:r||"root"},i),ie.color=i.color,ie.w=100,ie.h=100,s[13].populate(ie);const se=l.components&&l.components.Square||d.Square;r=s[12];const ne={};if(s[14]=this.element({parent:r||"root"},i),ne.size=200,ne.y=150,typeof se<"u")for(let De in se.config.props)delete ne[se.config.props[De]];s[14].populate(ne),r=s[14];const ue={};ue.size=200,ue.y=150,g=ue.is||"Square";let ve;if(typeof g=="string"){if(ve=l.components&&l.components[g]||d[g],!ve)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&(ve=g);s[15]=ve.call(null,{props:ue},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const xe=l.components&&l.components.Card||d.Card;r=s[0];const Se={};if(s[16]=this.element({parent:r||"root"},i),Se.x=400,Se.y=700,Se.size="small",typeof xe<"u")for(let De in xe.config.props)delete Se[xe.config.props[De]];s[16].populate(Se),r=s[16];const be={};be.x=400,be.y=700,be.size="small",g=be.is||"Card";let Ee;if(typeof g=="string"){if(Ee=l.components&&l.components[g]||d[g],!Ee)throw new Error('Component "Card" not found')}else typeof g=="function"&&g.name==="factory"&&(Ee=g);s[17]=Ee.call(null,{props:be},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const _e={};s[18]=this.element({parent:r||"root"},i),s[18].populate(_e),r=s[18];const z={};s[19]=this.element({parent:r||"root"},i),z.color=i.color,z.w=100,z.h=100,s[19].populate(z);const Re=l.components&&l.components.NamedSlotCard||d.NamedSlotCard;r=s[0];const Ce={};if(s[20]=this.element({parent:r||"root"},i),Ce.x=800,Ce.y=700,typeof Re<"u")for(let De in Re.config.props)delete Ce[Re.config.props[De]];s[20].populate(Ce),r=s[20];const oe={};oe.x=800,oe.y=700,g=oe.is||"NamedSlotCard";let P;if(typeof g=="string"){if(P=l.components&&l.components[g]||d[g],!P)throw new Error('Component "NamedSlotCard" not found')}else typeof g=="function"&&g.name==="factory"&&(P=g);s[21]=P.call(null,{props:oe},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0];const ge={};s[22]=this.element({parent:r||"root"},i),s[22].populate(ge),r=s[22];const Te={};s[23]=this.element({parent:r||"root"},i),Te.color="0x0891b2ff",Te.x=10,Te.y=140,Te.w=80,Te.h=60,Te.parent=i[Symbol.for("slots")].filter(De=>De.ref==="second").shift()||i[Symbol.for("slots")][0]||r,Te.slot="second",s[23].populate(Te),r=s[22];const Fe={};s[24]=this.element({parent:r||"root"},i),Fe.color=i.color,Fe.w=100,Fe.h=100,Fe.parent=i[Symbol.for("slots")].filter(De=>De.ref==="third").shift()||i[Symbol.for("slots")][0]||r,Fe.slot="third",s[24].populate(Fe);const ae=l.components&&l.components.Square||d.Square;r=s[22];const Ue={};if(s[25]=this.element({parent:r||"root"},i),Ue.size=100,Ue.parent=i[Symbol.for("slots")].filter(De=>De.ref==="first").shift()||i[Symbol.for("slots")][0]||r,Ue.slot="first",typeof ae<"u")for(let De in ae.config.props)delete Ue[ae.config.props[De]];s[25].populate(Ue),r=s[25];const Y={};Y.size=100,Y.slot="first",g=Y.is||"Square";let $;if(typeof g=="string"){if($=l.components&&l.components[g]||d[g],!$)throw new Error('Component "Square" not found')}else typeof g=="function"&&g.name==="factory"&&($=g);s[26]=$.call(null,{props:Y},s[25],i),s[26][Symbol.for("slots")][0]?(r=s[26][Symbol.for("slots")][0],i=s[26]):r=s[26][Symbol.for("children")][0],r=s[22];const Ae={};return s[27]=this.element({parent:r||"root"},i),Ae.color="0x4d7c0fff",Ae.x=40,Ae.y=40,Ae.w=40,Ae.h=60,Ae.parent=i[Symbol.for("slots")].filter(De=>De.ref==="second").shift()||i[Symbol.for("slots")][0]||r,Ae.slot="second",s[27].populate(Ae),s},effects:[function(r,i,l,d,y,x){i[4].set("color",r.color)},function(r,i,l,d,y,x){i[13].set("color",r.color)},function(r,i,l,d,y,x){i[19].set("color",r.color)},function(r,i,l,d,y,x){i[24].set("color",r.color)}],context:{}},state(){return{color:ka[0]}},hooks:{ready(){this.$setInterval(()=>{const h=ka.indexOf(this.color)+1;this.color=h<=ka.length?ka[h]:ka[0]},600)}}}),OM=tt.Component("MemoryCard",{code:{render:function(r,i,l,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=320,g.h=200,g.x=i.col*360,g.y=i.row*250,g.scale={transition:i.scale},g.rotation={transition:i.disabled?-2:0},s[0].populate(g),r=s[0];const k={};s[1]=this.element({parent:r||"root"},i),k.h={transition:i.h},k.w=320,k.y=125,k.mount="{y: 0.5}",k.color={transition:i.disabled?"#ccc":"#fff"},k.src=i.image+"&w=320&h=200",k.effects=[i.shader("radius",{radius:6})],k.show=i.open,s[1].populate(k),r=s[0];const A={};return s[2]=this.element({parent:r||"root"},i),A.h={transition:i.h},A.w=320,A.y=125,A.mount="{y: 0.5}",A.color=i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},A.effects=[i.shader("radius",{radius:6})],s[2].populate(A),s},effects:[function(r,i,l,d,y,x){i[0].set("scale",{transition:r.scale})},function(r,i,l,d,y,x){i[0].set("rotation",{transition:r.disabled?-2:0})},function(r,i,l,d,y,x){i[1].set("h",{transition:r.h})},function(r,i,l,d,y,x){i[1].set("color",{transition:r.disabled?"#ccc":"#fff"})},function(r,i,l,d,y,x){i[1].set("src",r.image+"&w=320&h=200")},function(r,i,l,d,y,x){i[1].set("effects",[r.shader("radius",{radius:6})])},function(r,i,l,d,y,x){i[1].set("show",r.open)},function(r,i,l,d,y,x){i[2].set("h",{transition:r.h})},function(r,i,l,d,y,x){i[2].set("color",r.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(r,i,l,d,y,x){i[2].set("effects",[r.shader("radius",{radius:6})])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1}},hooks:{init(){this.$listen("closeMemoryCard",h=>{h===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",h=>{h===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(h){this.scale=1.08;const r="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.$announcer.speak(r)},unfocus(){this.scale=1}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),Qx=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],UM=tt.Component("Announcer",{components:{MemoryCard:OM},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.font="raleway",A.size=80,A.color="0xffffffff",A.content="Let's play memory!",A.x=580,A.y=60,A.__textnode=!0,s[1].populate(A),r=s[0];const I={};s[2]=this.element({parent:r||"root"},i),I.font="kalam",I.size=40,I.color="0xb91c1cff",I.content="the Accessible edition :)",I.x=1200,I.y=170,I.rotation=-6,I.__textnode=!0,s[2].populate(I),r=s[0];const M={};s[3]=this.element({parent:r||"root"},i),M.x=260,M.y=260,s[3].populate(M),r=s[3];const O=[],w=(L=[],F,U)=>{const W=x(L),X=new Set(W.map(Z=>""+Z.id));let Q=U.length;for(;Q--;){const Z=U[Q];X.has(Z)||(F[4][Z]&&F[4][Z].destroy(),delete F[4][Z],F[5][Z]&&F[5][Z].destroy(),delete F[5][Z])}U.length=0;const ee=L.length;for(let Z=0;Z<ee;Z++){const H=Object.create(i);r=F[3],H.index=Z,H.card=W[Z],H.key=H.card.id,U.push(H.key);const J=l.components&&l.components.MemoryCard||d.MemoryCard;F[4]===void 0&&(F[4]={});const le={};if(F[4][H.key]||(F[4][H.key]=this.element({parent:r||"root"},i)),le.col=H.index%4,le.row=Math.floor(H.index/4)%3,le.image=H.card.image,le.description=H.card.description,le.ref="card"+H.index,le.index=H.index,typeof J<"u")for(let j in J.config.props)delete le[J.config.props[j]];F[4][H.key].nodeId||F[4][H.key].populate(le),F[5]===void 0&&(F[5]={}),r=F[4][H.key];const E={};if(E.col=H.index%4,E.row=Math.floor(H.index/4)%3,E.image=H.card.image,E.description=H.card.description,E.ref="card"+H.index,E.index=H.index,!F[5][H.key]){g=E.is||"MemoryCard";let j;if(typeof g=="string"){if(j=l.components&&l.components[g]||d[g],!j)throw new Error('Component "MemoryCard" not found')}else typeof g=="function"&&g.name==="factory"&&(j=g);F[5][H.key]=j.call(null,{props:E},F[4][H.key],i),F[5][H.key][Symbol.for("slots")][0]?(r=F[5][H.key][Symbol.for("slots")][0],i=F[5][H.key]):r=F[5][H.key][Symbol.for("children")][0]}H.card=L[Z],y(()=>{F[4][H.key].set("col",H.index%4)},"cards"),y(()=>{F[4][H.key].set("row",Math.floor(H.index/4)%3)},"cards"),y(()=>{F[4][H.key].set("ref","card"+H.index)},"cards"),y(()=>{F[4][H.key].set("index",H.index)},"cards"),y(()=>{F[5][H.key][Symbol.for("props")].col=H.index%4},"cards"),y(()=>{F[5][H.key][Symbol.for("props")].row=Math.floor(H.index/4)%3},"cards"),y(()=>{F[5][H.key][Symbol.for("props")].ref="card"+H.index},"cards"),y(()=>{F[5][H.key][Symbol.for("props")].index=H.index},"cards"),F[4][0]&&F[4][0].forComponent&&F[4][0].forComponent.___layout&&F[4][0].forComponent.___layout()}};return y(()=>{w(i.cards,s,O)},"cards"),s},effects:[],context:{}},state(){return{cards:Qx.concat(Qx).map((h,r)=>({...h,id:`card${r}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",h=>{this.openCards.length<2&&this.openCards.push(h),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(h){if(this.focusedRow===-1){this.focusedRow=0;return}h=h+this.focusedRow*4,this.select("card"+h).focus()},focusedRow(h){if(this.focusedCol===-1){this.focusedCol=0;return}h=this.focusedCol+h*4,this.select("card"+h).focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),Ma=(h,r)=>Math.floor(Math.random()*(r-h+1)+h),BM=tt.Component("Item",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.src="assets/blits-b-small.png",g.w=96,g.h=168,g.x={transition:{value:i.x,duration:2900}},g.y={transition:{value:i.y,duration:2900}},g.rotation={transition:{value:i.rotation,duration:2900}},g.scale={transition:{value:i.scale,duration:1e3}},s[0].populate(g),s},effects:[function(r,i,l,d,y,x){i[0].set("x",{transition:{value:r.x,duration:2900}})},function(r,i,l,d,y,x){i[0].set("y",{transition:{value:r.y,duration:2900}})},function(r,i,l,d,y,x){i[0].set("rotation",{transition:{value:r.rotation,duration:2900}})},function(r,i,l,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:1e3}})}],context:{}},state(){return{x:Ma(20,1560),y:Ma(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=Ma(20,1740),this.y=Ma(20,900),this.rotation=Ma(10,360)},3e3)}}}),jM=tt.Component("Exponential",{components:{Item:BM},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A=[],I=(M=[],O,w)=>{const L=x(M),F=new Set(L.map(X=>""+X));let U=w.length;for(;U--;){const X=w[U];F.has(X)||(O[1][X]&&O[1][X].destroy(),delete O[1][X],O[2][X]&&O[2][X].destroy(),delete O[2][X])}w.length=0;const W=M.length;for(let X=0;X<W;X++){const Q=Object.create(i);r=O[0],Q.index=X,Q.item=L[X],Q.key=Q.item,w.push(Q.key);const ee=l.components&&l.components.Item||d.Item;O[1]===void 0&&(O[1]={});const Z={};if(O[1][Q.key]||(O[1][Q.key]=this.element({parent:r||"root"},i)),typeof ee<"u")for(let J in ee.config.props)delete Z[ee.config.props[J]];O[1][Q.key].nodeId||O[1][Q.key].populate(Z),O[2]===void 0&&(O[2]={}),r=O[1][Q.key];const H={};if(!O[2][Q.key]){g=H.is||"Item";let J;if(typeof g=="string"){if(J=l.components&&l.components[g]||d[g],!J)throw new Error('Component "Item" not found')}else typeof g=="function"&&g.name==="factory"&&(J=g);O[2][Q.key]=J.call(null,{props:H},O[1][Q.key],i),O[2][Q.key][Symbol.for("slots")][0]?(r=O[2][Q.key][Symbol.for("slots")][0],i=O[2][Q.key]):r=O[2][Q.key][Symbol.for("children")][0]}Q.item=M[X],O[1][0]&&O[1][0].forComponent&&O[1][0].forComponent.___layout&&O[1][0].forComponent.___layout()}};return y(()=>{I(i.items,s,A)},"items"),s},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const h=this.$setInterval(()=>{for(let r=0;r<=Math.floor(this.items.length/10);r++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(h)},2e3)}}}),FM=tt.Component("Ball",{code:{render:function(r,i,l,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=100,g.h=100,g.src="/assets/basketball.png",s[0].populate(g),s},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),mf=(h,r)=>Math.floor(Math.random()*(r-h+1)+h),zM=tt.Component("Viewport",{components:{Ball:FM},code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),s[0].populate(k),r=s[0];const A={};s[1]=this.element({parent:r||"root"},i),A.size=32,A.x=960,A.y=540,A.mount=.5,A.content=i.status.join(`
`),A.lineheight=52,A.wordwrap=500,A.__textnode=!0,s[1].populate(A);const I=l.components&&l.components.Ball||d.Ball;r=s[0];const M={};if(s[2]=this.element({parent:r||"root"},i),M.x={transition:{value:i.x,duration:1250}},M.y={transition:{value:i.y,duration:1250}},M.rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},M.w=100,M.h=100,typeof I<"u")for(let L in I.config.props)delete M[I.config.props[L]];s[2].populate(M),r=s[2];const O={};O.x={transition:{value:i.x,duration:1250}},O.y={transition:{value:i.y,duration:1250}},O.rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},O.w=100,O.h=100,g=O.is||"Ball";let w;if(typeof g=="string"){if(w=l.components&&l.components[g]||d[g],!w)throw new Error('Component "Ball" not found')}else typeof g=="function"&&g.name==="factory"&&(w=g);return s[3]=w.call(null,{props:O},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],i=s[3]):r=s[3][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[1].set("content",r.status.join(`
`))},function(r,i,l,d,y,x){i[2].set("x",{transition:{value:r.x,duration:1250}})},function(r,i,l,d,y,x){i[2].set("y",{transition:{value:r.y,duration:1250}})},function(r,i,l,d,y,x){i[2].set("rotation",{transition:{value:r.rotation,duration:1400,easing:"ease-in-out"}})},function(r,i,l,d,y,x){i[3][Symbol.for("props")].x={transition:{value:r.x,duration:1250}}},function(r,i,l,d,y,x){i[3][Symbol.for("props")].y={transition:{value:r.y,duration:1250}}},function(r,i,l,d,y,x){i[3][Symbol.for("props")].rotation={transition:{value:r.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",h=>{this.status.unshift(`${this.count++} -  ${h}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=mf(-90,90),this.x=(1920-100)/2,this.y=(1080-100)/2,this.$setInterval(()=>{this.x=mf(-300,2220),this.y=mf(-300,1380),this.rotation=mf(-90,90)},2500)}}}),VM=tt.Application({code:{render:function(r,i,l,d,y,x){const s=[];let g;const k={};s[0]=this.element({parent:r||"root"},i),k.w=1920,k.h=1080,k.color=i.backgroundColor,s[0].populate(k);const A=l.components&&l.components.RouterView||d.RouterView;r=s[0];const I={};if(s[1]=this.element({parent:r||"root"},i),typeof A<"u")for(let w in A.config.props)delete I[A.config.props[w]];s[1].populate(I),r=s[1];const M={};g=M.is||"RouterView";let O;if(typeof g=="string"){if(O=l.components&&l.components[g]||d[g],!O)throw new Error('Component "RouterView" not found')}else typeof g=="function"&&g.name==="factory"&&(O=g);return s[2]=O.call(null,{props:M},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],s},effects:[function(r,i,l,d,y,x){i[0].set("color",r.backgroundColor)}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:!0}},routes:[{path:"/",component:Lk,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>yk(()=>import("./Loading-532f903c.js"),[])},{path:"/demos/intro",component:()=>new Promise(h=>{h(Dk)})},{path:"/demos/theming",component:jk},{path:"/demos/tmdb",component:Qk},{path:"/demos/sprites",component:Jk},{path:"/demos/focushandling",component:tM},{path:"/demos/memory-game",component:UM,announce:"Let's play Memory"},{path:"/demos/player",component:dM},{path:"/examples/positioning",component:nM},{path:"/examples/colors",component:pM},{path:"/examples/gradients",component:mM},{path:"/examples/transitions",component:gM},{path:"/examples/alpha",component:yM},{path:"/examples/scaling",component:vM},{path:"/examples/rotation",component:xM},{path:"/examples/keyinput",component:wM},{path:"/examples/texts",component:SM},{path:"/examples/images",component:TM},{path:"/examples/components",component:CM},{path:"/examples/forloop",component:EM},{path:"/examples/forloop-advanced",component:MM},{path:"/examples/effects",component:_M},{path:"/examples/showif",component:RM},{path:"/examples/events",component:LM},{path:"/examples/slots",component:NM},{path:"/examples/viewport",component:zM},{path:"/benchmarks/exponential",component:jM}],hooks:{ready(){this.$listen("changeBackground",h=>{this.backgroundColor=h?h+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{escape(){this.quit()},back(){this.$router.to("/")}}});tt.Launch(VM,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",keymap:pk(),defaultFont:"lato",fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"}],canvasColor:"transparent",viewportMargin:100});export{tt as B,vs as S};
