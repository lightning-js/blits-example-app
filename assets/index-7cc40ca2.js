var VM=Object.defineProperty;var HM=(f,o,i)=>o in f?VM(f,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):f[o]=i;var P=(f,o,i)=>(HM(f,typeof o!="symbol"?o+"":o,i),i);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))u(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const w of g.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&u(w)}).observe(document,{childList:!0,subtree:!0});function i(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function u(h){if(h.ep)return;h.ep=!0;const g=i(h);fetch(h.href,g)}})();const ge={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},uo={[ge.settings]:{},get(f,o=null){return f in this[ge.settings]?this[ge.settings][f]:o},set(f,o){typeof f=="object"?Object.keys(f).forEach(i=>{this.set(i,f[i])}):this[ge.settings][f]=o}},ah=()=>{},Sm=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),UC=f=>{const o=uo.get("debugLevel"),i={};return Object.defineProperty(i,"info",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${f} %c ${Sm()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||ah}}),Object.defineProperty(i,"warn",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${f} %c ${Sm()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||ah}}),Object.defineProperty(i,"error",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${f} %c ${Sm()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||ah}}),Object.defineProperty(i,"debug",{get(){return(o>=2||Array.isArray(o)&&o.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${f} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||ah}}),i};let un;const GM=()=>{un=UC("Blits")},uh={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},WM=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,XM=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,qM=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,Cm={},lh=f=>{if(Cm[f]!==void 0)return Cm[f];const o=parseInt(f).toString(16).padStart(2,"0");return Cm[f]=o,o},$a={normalize:(f="",o="0xffffffff")=>{if(f=f.toString(),f.startsWith("0x")&&f.length===10)return f;if(uh[f]!==void 0)return uh[f];if(WM.test(f)){f=f.replace("#","").toLowerCase(),f.length===3&&(f=f.split("").map(h=>h+h).join(""));const u="0x"+f.padEnd(8,"f");return uh[f]=u,u}const i=XM.exec(f);if(i){const u=lh(i[3]),h=lh(i[5]),g=lh(i[7]);let w="ff";if(i[10]&&i[1]==="rgba"){const m=Math.min(Math.max(Math.round(parseFloat(i[10])*255),0),255);w=lh(m)}const s="0x"+u+h+g+w;return uh[f]=s,s}return qM.test(f)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):o}},KM=(f="",o,i,u=null)=>{let h=0,g=0,w=[],s=null,m=0;const S=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,v=/^\s*(\/?>)\s*/,y=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,I=/^<>\s*/,D=/^\s*(<\/>)\s*/,T=()=>{f=B(f);try{return L(z),le(w)}catch(ie){throw(ie.name=="TemplateParseError"||ie.name=="TemplateStructureError")&&(ie.message=`${ie.message}
${ie.context}`),ie}},L=ie=>{h>=f.length||ie()},B=ie=>ie.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),N=ie=>{const ue=f.slice(h).match(ie);return ue&&(g=h,h+=ue[0].length),ue},z=()=>{N(I)?(w.push({[Symbol.for("componentType")]:null,[ge.type]:"opening",[ge.level]:m,[ge.cursorTagStart]:g}),m++,L(z)):L(F)},F=()=>{N(D)?(m--,w.push({[Symbol.for("componentType")]:null,[ge.type]:"closing",[ge.level]:m}),L(z)):L(H)},H=()=>{const ie=N(S);if(ie)s={[Symbol.for("componentType")]:ie[1],[ge.level]:m,[ge.cursorTagStart]:g},ie[0].startsWith("</")?(m--,s[ge.type]="closing",s[ge.level]=m):(s[ge.type]="opening",m++),L(X);else throw Q("InvalidTag")},X=()=>{const ie=N(v);if(ie){if(ie[1]==="/>"){if(s[ge.type]==="closing")throw Q("InvalidClosingTag");s[ge.type]="self-closing",m--}if(s[ge.type]==="opening"){const ue=f.slice(h,f.indexOf("<",h));ue&&(s.content=ue,h+=ue.length)}w.push(s),L(z)}else L($)},$=()=>{const ie=N(y);if(ie){if(s[ge.type]==="closing")throw Q("AttributesInClosingTag");const ue=ie[2],ve=new RegExp(`^(.*?)${ue}\\s*`),Te=N(ve);if(Te){const xe=oe(ie[1],Te[1]);s[xe.name]=xe.value,L(X)}else throw Q("MissingOrInvalidAttributeValue")}else throw Q("InvalidAttribute")},oe=(ie,ue)=>{if(ie.includes(".")){const[ve,Te]=ie.split(".");return{name:ve,value:`{${Te}: ${ue}}`}}return["color",":color",":effects","effects"].includes(ie)?fe(ie,ue):{name:ie,value:ue}},fe=(ie,ue)=>{let ve=ue,Te=$a.normalize(ve,null);if(Te===null){const xe=/'([^']+)'/g;let ke,pe=0,Le="";for(;(ke=xe.exec(ue))!==null;){const G=ke[1],Ie=ke.index,Oe=ke[0].length;Le+=ue.slice(pe,Ie),Te=$a.normalize(G,null),Te===null?Le+=ue.slice(Ie,Ie+Oe):Le+=`'${Te}'`,pe=Ie+Oe}Le+=ue.slice(pe),ve=Le}else ve=Te;return{name:ie,value:ve}},le=ie=>{let ue=[],ve=!1,Te={children:[]},xe=Te;for(let ke=0;ke<ie.length;ke++){let pe=ie[ke];if(pe[ge.level]===0&&pe[ge.type]!=="closing"){if(ve)throw ee("MultipleTopLevelTags",pe);ve=!0}if(pe[ge.type]==="opening")ue.push({[ge.level]:pe[ge.level],[ge.type]:pe[ge.type],[ge.cursorTagStart]:pe[ge.cursorTagStart],[Symbol.for("componentType")]:pe[Symbol.for("componentType")],parent:xe});else if(pe[ge.type]==="closing"){const G=ue.length===0;let Ie=!1,Oe=!1;if(G||(Ie=ue[ue.length-1][ge.level]!==pe[ge.level],Oe=ue[ue.length-1][Symbol.for("componentType")]!==pe[Symbol.for("componentType")]),G||Ie||Oe)throw ee("MismatchedClosingTag",pe);xe=ue.pop().parent}const Le={...pe};delete Le[ge.type],delete Le[ge.level],delete Le[ge.cursorTagStart],pe[ge.type]==="opening"?(ke+1<ie.length&&ie[ke+1][ge.type]!=="closing"&&(Le.children=[]),xe.children.push(Le),xe=Le):pe[ge.type]==="self-closing"&&xe.children.push(Le)}if(ue.length>0)throw ee("UnclosedTags",ue);return Te},A=10,Y=50,Q=ie=>{const ue=W();ie=`${ie} in ${ue}`;const ve=new Error(ie);ve.name="TemplateParseError";const Te=Math.max(0,g-A),xe=Math.min(f.length,h+Y),ke=f.slice(Te,xe),pe=h-Te;return ve.context=q(pe,ke),ve},ee=(ie,ue)=>{const ve=W();ie=`${ie} in ${ve}`;const Te=new Error(ie);Te.name="TemplateStructureError",Array.isArray(ue)?Te.context=ue.map(ke=>xe(ke)).join(`
`):Te.context=xe(ue);function xe(ke){const pe=Math.max(0,ke[ge.cursorTagStart]-A),Le=f.slice(pe,pe+Y);return q(A,Le)}return Te},q=(ie,ue)=>{const ve=" ".repeat(ie)+"^";return`
${ue}
${ve}
`},W=()=>{if(i){let ie=o||"",ue=i;for(;ue;)ie=`${ue[Symbol.for("componentType")]}/${ie}`,ue=ue.parent;return ie}return u||"Blits.Application"};return T()};let Nt;function YM(f={children:[]}){const o={renderCode:["const elms = []","let componentType","const rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0"],effectsCode:[],context:{props:[],components:this.components}};return Nt=-1,jC.call(o,f),o.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw",o.renderCode.join(`
`)),effects:o.effectsCode.map(i=>new Function("component","elms","context","components","rootComponent","effect",i)),context:o.context}}const Uh=function(f,o=!1,i={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const u=i.forceEffect?this.effectsCode:this.renderCode;o&&u.push(`parent = ${o}`),"key"in f&&(i.key=ao(f.key,i.component));const h=i.key?`elms[${Nt}][${i.key}]`:`elms[${Nt}]`;i.key&&u.push(`
      if(elms[${Nt}] === undefined) {
        elms[${Nt}] = {}
      }
    `),u.push(`const elementConfig${Nt} = {}`),i.forloop&&u.push(`if(${h} === undefined) {`),u.push(`
    ${h} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)
  `),i.forloop&&u.push("}");const g=f.children;delete f.children,f[Symbol.for("componentType")]==="Slot"&&u.push(`elementConfig${Nt}[Symbol.for('isSlot')] = true`),Object.keys(f).forEach(w=>{if(w==="slot"&&u.push(`
        elementConfig${Nt}['parent'] = component[Symbol.for('slots')] !== undefined && Array.isArray(component[Symbol.for('slots')]) === true && component[Symbol.for('slots')].filter(slot => slot.ref === '${f.slot}').shift() || parent
      `),w!=="key")if(FC(w)){if(i.holder&&w===":color")return;i.holder?this.effectsCode.push(`
        if(typeof skip${Nt} === 'undefined' ||
          skip${Nt}.indexOf('${w.substring(1)}') === -1)
          ${h}.set('${w.substring(1)}', ${ao(f[w],i.component)})
        `):this.effectsCode.push(`
            ${h}.set('${w.substring(1)}', ${ao(f[w],i.component)})
          `),u.push(`elementConfig${Nt}['${w.substring(1)}'] = ${ao(f[w],i.component)}`)}else u.push(`elementConfig${Nt}['${w}'] = ${ug(f[w],w,i.component)}`)}),i.holder===!0&&u.push(`
    const skip${Nt} = []
    if(typeof cmp${Nt} !== 'undefined') {
      for(let key in cmp${Nt}.config.props) {
        delete elementConfig${Nt}[cmp${Nt}.config.props[key]]
        skip${Nt}.push(cmp${Nt}.config.props[key])
      }
    }
    `),i.forloop&&u.push(`if(${h}.nodeId === undefined) {`),u.push(`${h}.populate(elementConfig${Nt})`),u.push(`
    if(inSlot === true) {
      slotChildCounter -= 1
    }
  `),i.forloop&&u.push("}"),g&&jC.call(this,{children:g},`${h}`,i)},BC=function(f,o=!1,i={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const u=i.forceEffect?this.effectsCode:this.renderCode;u.push(`
    const cmp${Nt} =
      (context.components && context.components['${f[Symbol.for("componentType")]}']) || components['${f[Symbol.for("componentType")]}']
  `),"key"in f&&(i.key=ao(f.key,i.component));const h=f.children;delete f.children,Uh.call(this,f,o,{...i,holder:!0}),o=i.key?`elms[${Nt}][${i.key}]`:`elms[${Nt}]`,Nt++;const g=i.key?`elms[${Nt}][${i.key}]`:`elms[${Nt}]`;i.key&&u.push(`
      if(elms[${Nt}] === undefined) {
        elms[${Nt}] = {}
      }
    `),o&&u.push(`parent = ${o}`),u.push(`const props${Nt} = {}`),i.forloop&&u.push(`if(${g} === undefined) {`),Object.keys(f).forEach(w=>{FC(w)?(this.effectsCode.push(`
        ${g}[Symbol.for('props')]['${w.substring(1)}'] = ${ao(f[w],i.component)}`),u.push(`
        propData = ${ao(f[w],i.component)}
        if (Array.isArray(propData) === true) {
          propData = getRaw(propData).slice(0)
        }
        props${Nt}['${w.substring(1)}'] = propData`)):u.push(`props${Nt}['${w}'] = ${ug(f[w],w,i.component)}`)}),u.push(`
    componentType = props${Nt}['is'] || '${f[Symbol.for("componentType")]}'

    let component${Nt}
    if(typeof componentType === 'string') {
      component${Nt} = context.components && context.components[componentType] || components[componentType]
      if(!component${Nt}) {
        throw new Error('Component "${f[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {
      component${Nt} = componentType
    }

    ${g} = component${Nt}.call(null, {props: props${Nt}}, ${o}, component)

    if (${g}[Symbol.for('slots')][0]) {
      parent = ${g}[Symbol.for('slots')][0]
      slotComponent = ${g}
      inSlot = true
    } else {
      parent = ${g}[Symbol.for('children')][0]
    }
  `),i.forloop&&u.push("}"),h&&(i.forloop||u.push(`
        if(inSlot === true) {
          slotChildCounter = ${h.length}  + 1
        }
      `),Nt++,Uh.call(this,{children:h},!1,{...i})),i.forloop||u.push(`
      if (inSlot === true && slotChildCounter === 0) {
        inSlot = false
      }
    `)},QM=function(f,o){const i=f[":for"];delete f[":for"];const u=f.key,h=ao(u,"scope."),g=!(f.$shallow&&f.$shallow.toLowerCase()==="false");delete f.$shallow,delete f.key;const s=/(.+)\s+in\s+(.+)/gi.exec(i),[m,S]=s[1].replace("(","").replace(")","").split(/\s*,\s*/),v=new RegExp(`(scope\\.(?!${m}\\.|${S}|key)(\\w+))`,"gi"),y={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};if(o&&y.renderCode.push(`parent = ${o}`),S!==void 0){const H=new RegExp(`\\$${S}(?!['\\w])`).exec(u);Array.isArray(H)&&y.renderCode.push(`console.warn(" Using '${S}' in the key, like key=${u},  is not recommended")`)}const I=Nt;y.renderCode.push(`
    const created${I} = []
    const forloop${I} = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set()
      let l = rawCollection.length
      while(l--) {
        const ${m} = rawCollection[l]
  `),S!==void 0&&y.renderCode.push(`
        const ${S} = l
    `),y.renderCode.push(`
        keys.add('' +  ${ao(u,"")||"l"})
      }
  `);const D=y.renderCode.length;y.renderCode.push(`
      created.length = 0
      const length = rawCollection.length
      const effects = []
      for(let __index = 0; __index < length; __index++) {
        const scope = Object.create(component)
        parent = ${o}
        scope['${m}'] = rawCollection[__index]
  `),S!==""&&y.renderCode.push(`
        scope['${S}'] = __index
    `),y.renderCode.push(`
        scope['key'] = '' + ${h||"__index"}
  `),"ref"in f&&f.ref.indexOf("$")===-1&&(y.renderCode.push(`
        scope['__ref'] = '${f.ref}' + __index
    `),f.ref="$__ref"),y.renderCode.push(`
        created.push(scope.key)
  `),f[Symbol.for("componentType")]==="Element"||f[Symbol.for("componentType")]==="Slot"||f[Symbol.for("componentType")]==="Text"?(f[Symbol.for("componentType")]==="Text"&&(f.__textnode="true"),Uh.call(y,f,o,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):BC.call(y,f,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const T=y.effectsCode.filter(F=>[...F.matchAll(v)].length===0),L=y.effectsCode.filter(F=>[...F.matchAll(v)].length!==0);g===!1&&y.renderCode.push(`
      scope['${m}'] = null
      scope['${m}'] = collection[__index]
  `),T.forEach((F,H)=>{const X=F.indexOf(`scope.${H}`)>-1?`'${ao(s[2],"")}'`:null;F.indexOf("Symbol.for('props')")===-1?y.renderCode.push(`
        let eff${H} = () => {
          ${F}
        }
        effect(eff${H}, ${X})
        effects.push(eff${H})
      `):y.renderCode.push(`
        ${F}
      `)}),y.renderCode.push(`
    }
    return effects
  }`);const B=[];B.push(`
      let i = created.length

      while (i--) {
        if (keys.has(created[i]) === false) {
          const key = created[i]
  `);const N=Nt;for(let F=I;F<=N;F++)B.push(`
          elms[${F}][key] && elms[${F}][key].destroy()
          delete elms[${F}][key]
      `);B.push(`
      }
    }
  `),y.renderCode.splice(D,0,...B);let z=`${ao(s[2],"")}`;z&&z.includes(".")&&(z=z.match(/[^.]+$/)[0]),y.renderCode.push(`
    let forEffects${I}
    effect(() => {
      component[Symbol.for('removeGlobalEffects')](forEffects${I})
      forEffects${I} = null
      forEffects${I} = forloop${I}(${ug(s[2],":for")}, elms, created${I})
    }, '${z}' )
  `),L.forEach(F=>{const H=[...F.matchAll(v)];let X=H.length;const $=[];for(;X--;){const oe=H[X],fe=`component.${oe[2]}`;$.indexOf(fe)===-1&&$.push(fe),oe[2]!==m&&(F=F.substring(0,oe.index)+fe+F.substring(oe.index+oe[1].length))}y.renderCode.push(`
      effect(() => {
        void ${$.join(", ")}
        for(let __index = 0; __index < ${ao(s[2])}.length; __index++) {
          const scope = {}
          scope['${S}'] = __index
          scope['${m}'] = ${ao(s[2])}[__index]
          scope['key'] = ${h||"__index"}
    `),y.renderCode.push(`
          ${F}
        }
      })
    `)}),this.renderCode.push(y.renderCode.join(`
`))},jC=function(f,o=!1,i={}){f.children&&f.children.forEach(u=>{Nt++,Object.keys(u).indexOf(":for")>-1?QM.call(this,u,o):u[Symbol.for("componentType")]==="Element"||u[Symbol.for("componentType")]==="Slot"||u[Symbol.for("componentType")]==="Text"||u[Symbol.for("componentType")]==="Layout"?(u[Symbol.for("componentType")]==="Text"&&(u.__textnode="true"),u[Symbol.for("componentType")]==="Layout"&&(u.__layout="true"),Uh.call(this,u,o,i)):BC.call(this,u,o,i)})},ao=(f,o="component.")=>{if(f===void 0)return f;const i=/('.*?')+/gi,u=/\$(\$(?=\$)|\$?)/g,h=f.matchAll(i),g=[];let w=0;for(const s of h)g.push(s[0]),f=f.replace(s[0],`[@@REPLACEMENT${w}@@]`),w++;return f=f.replace(u,(s,m)=>{if(m==="")return o;if(m==="$")return o+"$"}),g.forEach((s,m)=>{f=f.replace(`[@@REPLACEMENT${m}@@]`,s)}),f},ug=(f="",o=!1,i="component.")=>{const u=/\$\w+/gi;let h;if(o==="content")if(f.startsWith("$"))h=`${i}${f.replace("$","")}`;else{const g=f.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");h=`'${ZM(g,i)}'`}else if(o!=="color"&&!isNaN(parseFloat(f))){if(h=parseFloat(f),f.endsWith("%")){const w={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[o];w&&(h=`parent.node.${w} * (${h} / 100)`)}}else if(f.toLowerCase()==="true")h=!0;else if(f.toLowerCase()==="false")h=!1;else if(o.startsWith("@")&&f){const g=i.slice(0,-1);h=`${g}['${f.replace("$","")}'] && ${g}['${f.replace("$","")}'].bind(${g})`}else if(f.startsWith("$"))h=`${i}${f.replace("$","")}`;else if(u.exec(f)){const g=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,w=f.match(g);if(h={},w)for(let s=0;s<w.length;s++){const m=w[s].split(/\s*:\s*/);m&&JM(m[0],m[1],i,h)}return e_(h)}else h=`"${f}"`;return h},FC=f=>f.startsWith(":"),ZM=(f,o)=>{const i=/\{\{\s*(\$\S+)\s*\}\}/g,u=[...f.matchAll(i)];if(u.length)for(let[h,g]of u)f=f.replace(h,`${g.replace("$",`'+${o}`)}+'`);return f},JM=(f,o,i,u)=>{o.startsWith("$")?u[f]=`${i}${o.replace("$","")}`:u[f]=o},e_=f=>{const o=[];return Object.keys(f).forEach(i=>{o.push(`${i}: ${f[i]}`)}),` { ${o.join(", ")} }`},VS={};let t_=0;const n_=f=>`BlitsComponent::${f}_${VS[f]=(VS[f]||0)+1}`,i_=()=>++t_,Fr={},$m=(f,o,i,u=[])=>{Fr[o]&&Fr[o][f]&&Fr[o][f].apply(i,u)},o_=(f,o,i)=>{const u=ge[f];Fr[o]&&Fr[o][u]&&Fr[o][u].apply(i)},r_=(f={},o)=>{Fr[o]={},[...Object.keys(f),...Object.getOwnPropertySymbols(f)].forEach(u=>{typeof f[u]=="function"&&(Fr[o][u]=f[u])})};let za=null,Bh=null,ed=!1;const s_=()=>{ed=!0},a_=()=>{ed=!1},jh=new WeakMap,kh=new Map,HS=f=>{if(kh.size!==0)for(const[o,i]of kh){if(f.indexOf(o)===-1)continue;const u=jh.get(i);if(u!==void 0)for(const h of u.values())h.delete(o),kh.delete(o)}},Ah=(f,o,i=!1)=>{if(za){if(ed||Bh!==null&&o!==Bh)return;let u=jh.get(f);u||(u=new Map,jh.set(f,u));let h=u.get(o);h||(h=new Set,u.set(o,h)),h.add(za),i===!0&&kh.set(za,f)}},Va=(f,o,i=!1)=>{if(ed===!0)return;const u=jh.get(f);if(!u)return;const h=u.get(o);if(h)for(let g of h)g(i)},fh=(f,o=null)=>{za=f,Bh=o,za(),za=null,Bh=null},zm=(f,o)=>{if(f===o)return!0;if(f.length!==o.length)return!1;let i=f.length;for(;i--;){const u=f[i],h=o[i];if(Array.isArray(u)&&Array.isArray(h)){if(zm(u,h)===!1)return!1}else if(typeof u=="object"&&u!==null&&typeof h=="object"&&h!==null){if(zm(Object.entries(u),Object.entries(h))===!1)return!1}else if(u!==h)return!1}return!0},Ih=["push","pop","shift","unshift","splice","sort"],GS=new WeakMap,ds=f=>{const o=f&&f[ge.raw];return o?ds(o):f},Vm=(f,o=null,i,u)=>{if(typeof f=="object"&&Array.isArray(f)===!1&&Object.getPrototypeOf(f)!==Object.prototype)return f;const h=GS.get(f);if(h!==void 0)return h;const g={get(s,m,S){return m===ge.raw?f:Array.isArray(s)===!0?typeof s[m]=="object"&&s[m]!==null?(Array.isArray(s[m])===!0&&Ah(s,m,u),Vm(ds(s[m]),s,m)):Ih.indexOf(m)!==-1?function(...v){s_();const y=s[m].apply(this,v);return a_(),Va(o,i),y}:m==="length"?f.length:Reflect.get(s,m,S):typeof s[m]=="object"&&s[m]!==null?(Array.isArray(s[m])===!0&&Ah(s,m,u),Vm(ds(s[m]),s,m)):(Ah(s,m,u),Reflect.get(s,m,S))},set(s,m,S,v){const y=ds(s[m]),I=ds(S);let D=!0;const T=Array.isArray(I)===!0?zm(y,I):y===I;return T===!1&&(typeof S=="object"&&(Array.isArray(S)===!0?S=ds(S).slice(0):s[m]!==null&&s[m]!==void 0&&Array.isArray(s)===!1&&Object.getPrototypeOf(S)===Object.prototype&&(S=Object.assign(v[m],S))),D=Reflect.set(s,m,S,v)),D===!0&&T===!1&&(Array.isArray(s)===!0&&m in s&&Va(o,i,!0),Va(s,m,!0)),D}},w=new Proxy(f,g);return GS.set(f,w),w},$C=(f,o)=>(Object.keys(f).forEach(i=>{let u=f[i];if(f[i]!==null&&typeof f[i]=="object"){if(Object.getPrototypeOf(f[i])===Object.prototype)return $C(f[i]);if(Array.isArray(f[i])===!0)for(let h=0;h<Ih.length-1;h++)f[i][Ih[h]]=function(g){Array.prototype[Ih[h]].call(this,g),Va(f,i)}}Object.defineProperty(f,i,{enumerable:!0,configurable:!0,get(){return Ah(f,i,o),u},set(h){u!==h&&(u=h,Va(f,i))}})}),f),u_=typeof Proxy<"u",Rl=(f,o="Proxy",i=!1)=>(u_===!1&&(o="defineProperty"),o==="defineProperty"?$C(f,i):Vm(f,void 0,void 0,i)),l_=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],f_={previous:null,current:null,get state(){return this.current},set state(f){l_.indexOf(f)>-1&&(f!==this.current||f==="focus")&&(un.debug(`Setting lifecycle state from ${this.current} to ${f} for ${this.component.componentId}`),this.previous=this.current,this.current=f,o_(f,this.component[ge.identifier],this.component),$m(f,this.component[ge.identifier],this.component))}};function c_(f,o=!1,i){const u={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},h=f.getContext(o?"webgl2":"webgl",u)||f.getContext("experimental-webgl",u);if(!h)throw new Error("Unable to create WebGL context");return i?new Proxy(h,{get(g,w){const s=g[w];return typeof s=="function"?(i.increment(String(w)),s.bind(g)):s}}):h}function ot(f,o){if(Wa()!==!0&&!f)throw new Error(o||"Assertion failed")}function WS(f,o,i){const u=Math.trunc(f>>>24),h=Math.trunc(f>>>16&255),g=Math.trunc(f>>>8&255),w=Math.trunc(f&255),s=Math.trunc(o>>>24),m=Math.trunc(o>>>16&255),S=Math.trunc(o>>>8&255),v=Math.trunc(o&255),y=Math.round(s*i+u*(1-i)),I=Math.round(m*i+h*(1-i)),D=Math.round(S*i+g*(1-i)),T=Math.round(v*i+w*(1-i));return(y<<24|I<<16|D<<8|T)>>>0}function h_(f,o){const i=f>>>24,u=f>>>16&255,h=f>>>8&255,g=Math.trunc((f&255)*o);return(i<<24|u<<16|h<<8|g)>>>0}let zC=!0;function d_(f){zC=f==="webgl"}function ch(f,o,i=!1){const u=(f&255)/255*o,h=zC?u:1,g=Math.trunc((f>>>24)*h),w=Math.trunc((f>>>16&255)*h),s=Math.trunc((f>>>8&255)*h),m=Math.trunc(u*255);return i?(m<<24|s<<16|w<<8|g)>>>0:(g<<24|w<<16|s<<8|m)>>>0}function Fh(f,o){return Object.prototype.hasOwnProperty.call(f,o)}function Wa(){return{VITE_TMDB_KEY:"ABC123",VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!0}let p_=1;function m_(){return p_++}class vr{constructor(){P(this,"eventListeners",{})}on(o,i){let u=this.eventListeners[o];u||(u=[]),u.push(i),this.eventListeners[o]=u}off(o,i){const u=this.eventListeners[o];if(!u)return;if(!i){delete this.eventListeners[o];return}const h=u.indexOf(i);h>=0&&u.splice(h,1)}once(o,i){const u=(h,g)=>{this.off(o,u),i(h,g)};this.on(o,u)}emit(o,i){const u=this.eventListeners[o];u&&[...u].forEach(h=>{h(this,i)})}removeAllListeners(){this.eventListeners={}}}var Nn;(function(f){f[f.generic=0]="generic",f[f.color=1]="color",f[f.image=2]="image",f[f.noise=3]="noise",f[f.renderToTexture=4]="renderToTexture",f[f.subTexture=5]="subTexture"})(Nn||(Nn={}));class Nl extends vr{constructor(i){super();P(this,"txManager");P(this,"dimensions",null);P(this,"error",null);P(this,"state","initial");P(this,"renderableOwners",new Set);P(this,"renderable",!1);P(this,"type",Nn.generic);P(this,"preventCleanup",!1);P(this,"ctxTexture");P(this,"textureData",null);this.txManager=i}setRenderableOwner(i,u){var g,w;const h=this.renderableOwners.size;if(u===!0){this.renderableOwners.has(i)===!1&&this.renderableOwners.add(i);const s=this.renderableOwners.size;s>h&&s===1&&(this.renderable=!0,(g=this.onChangeIsRenderable)==null||g.call(this,!0),this.load())}else{this.renderableOwners.delete(i);const s=this.renderableOwners.size;s<h&&s===0&&(this.renderable=!1,(w=this.onChangeIsRenderable)==null||w.call(this,!1),this.txManager.orphanTexture(this))}}load(){this.txManager.loadTexture(this)}loadCtxTexture(){return this.ctxTexture===void 0&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var i;(i=this.ctxTexture)==null||i.free()}freeTextureData(){this.textureData=null}setState(i,u){if(this.state===i)return;let h=null;i==="loaded"?(this.dimensions=u,h=this.dimensions):i==="failed"&&(this.error=u,h=this.error),this.state=i,this.emit(i,h)}async getTextureData(){return this.textureData===null&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}const g_=/^(data|ftps?|https?):/,Ul=f=>{const o=f>>>24,i=f>>>16&255,u=f>>>8&255,h=f&255;return[o/255,i/255,u/255,h/255]},XS=f=>{const o=f>>>24,i=f>>>16&255,u=f>>>8&255,h=f&255;return[o,i,u,h]};function qS(f){return(f&255)/255}function Tm(f){const o=Math.floor(f[0]*255),i=Math.floor(f[1]*255),u=Math.floor(f[2]*255),h=Math.floor(f[3]*255);return`rgba(${o},${i},${u},${h.toFixed(4)})`}function Ua(f,o,i,u,h){return h?(h.x1=f,h.y1=o,h.x2=i,h.y2=u,h):{x1:f,y1:o,x2:i,y2:u}}function bm(f,o){return f.x1<o.x2&&f.x2>o.x1&&f.y1<o.y2&&f.y2>o.y1}function y_(f,o){return o?(o.x=f.x1,o.y=f.y1,o.width=f.x2-f.x1,o.height=f.y2-f.y1,o):{x:f.x1,y:f.y1,width:f.x2-f.x1,height:f.y2-f.y1}}function VC(f,o,i){const u=Math.max(f.x,o.x),h=Math.max(f.y,o.y),g=Math.min(f.x+f.width,o.x+o.width)-u,w=Math.min(f.y+f.height,o.y+o.height)-h;return g>0&&w>0?i?(i.x=u,i.y=h,i.width=g,i.height=w,i):{x:u,y:h,width:g,height:w}:i?(i.x=0,i.y=0,i.width=0,i.height=0,i):{x:0,y:0,width:0,height:0}}function HC(f,o){return o?(o.x=f.x,o.y=f.y,o.width=f.width,o.height=f.height,o):{x:f.x,y:f.y,width:f.width,height:f.height}}function v_(f,o){return f===o?!0:f===null||o===null?!1:f.x===o.x&&f.y===o.y&&f.width===o.width&&f.height===o.height}function Em(f,o){return f.x1<=o.x2&&f.y1<=o.y2&&f.x2>=o.x1&&f.y2>=o.y1}function x_(f,o){return f.x1<o.x1&&f.x2>o.x2&&f.y1<o.y1&&f.y2>o.y2}function w_(f){return f.x1<f.x2&&f.y1<f.y2}function Hm(f,o){return Ua(f.x1-o[3],f.y1-o[0],f.x2+o[1],f.y2+o[2])}function S_(f){if(self.location.protocol==="file:"&&!g_.test(f)){const i=self.location.pathname.split("/");i.pop();const u=i.join("/"),h=self.location.protocol+"//"+u;return f.charAt(0)==="."&&(f=f.slice(1)),f.charAt(0)==="/"&&(f=f.slice(1)),h+"/"+f}return new URL(f,self.location.href).href}function KS(f){return f.startsWith("data:")===!0}class Ni{constructor(){P(this,"ta");P(this,"tb");P(this,"tx");P(this,"tc");P(this,"td");P(this,"ty");P(this,"_floatArr",null);P(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return C_}static multiply(o,i,u){const h=o.ta*i.ta+o.tb*i.tc,g=o.ta*i.tb+o.tb*i.td,w=o.ta*i.tx+o.tb*i.ty+o.tx,s=o.tc*i.ta+o.td*i.tc,m=o.tc*i.tb+o.td*i.td,S=o.tc*i.tx+o.td*i.ty+o.ty;return u||(u=new Ni),u.ta=h,u.tb=g,u.tx=w,u.tc=s,u.td=m,u.ty=S,u.mutation=!0,u}static identity(o){return o||(o=new Ni),o.ta=1,o.tb=0,o.tx=0,o.tc=0,o.td=1,o.ty=0,o.mutation=!0,o}static translate(o,i,u){return u||(u=new Ni),u.ta=1,u.tb=0,u.tx=o,u.tc=0,u.td=1,u.ty=i,u.mutation=!0,u}static scale(o,i,u){return u||(u=new Ni),u.ta=o,u.tb=0,u.tx=0,u.tc=0,u.td=i,u.ty=0,u.mutation=!0,u}static rotate(o,i){const u=Math.cos(o),h=Math.sin(o);return i||(i=new Ni),i.ta=u,i.tb=-h,i.tx=0,i.tc=h,i.td=u,i.ty=0,i.mutation=!0,i}static copy(o,i){return i||(i=new Ni),i.ta=o.ta,i.tc=o.tc,i.tb=o.tb,i.td=o.td,i.tx=o.tx,i.ty=o.ty,i.mutation=!0,i}translate(o,i){return this.tx=this.ta*o+this.tb*i+this.tx,this.ty=this.tc*o+this.td*i+this.ty,this.mutation=!0,this}scale(o,i){return this.ta=this.ta*o,this.tb=this.tb*i,this.tc=this.tc*o,this.td=this.td*i,this.mutation=!0,this}rotate(o){if(o===0||!(o%Math.PI*2))return this;const i=Math.cos(o),u=Math.sin(o),h=this.ta*i+this.tb*u,g=this.tb*i-this.ta*u,w=this.tc*i+this.td*u,s=this.td*i-this.tc*u;return this.ta=h,this.tb=g,this.tc=w,this.td=s,this.mutation=!0,this}multiply(o){return Ni.multiply(this,o,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const C_=new Ni,hh=0,dh=2,ph=4,mh=6,gh=1,yh=3,vh=5,xh=7;class $h{constructor(o){P(this,"data");this.data=new Float32Array(8),o&&(this.data[hh]=o[hh],this.data[dh]=o[dh],this.data[ph]=o[ph],this.data[mh]=o[mh],this.data[gh]=o[gh],this.data[yh]=o[yh],this.data[vh]=o[vh],this.data[xh]=o[xh])}static translate(o,i,u,h,g,w,s,m,S){return S||(S=new $h),S.data[hh]=o,S.data[dh]=u,S.data[ph]=g,S.data[mh]=s,S.data[gh]=i,S.data[yh]=h,S.data[vh]=w,S.data[xh]=m,S}get x1(){return this.data[hh]}get x2(){return this.data[dh]}get x3(){return this.data[ph]}get x4(){return this.data[mh]}get y1(){return this.data[gh]}get y2(){return this.data[yh]}get y3(){return this.data[vh]}get y4(){return this.data[xh]}}const GC=(f,o,i,u)=>{const h=3*f,g=3*(i-f)-h,w=1-h-g,s=3*o,m=3*(u-o)-s,S=1-s-m;return function(v){if(v>=1)return 1;if(v<=0)return 0;let y=.5,I,D,T;for(let N=0;N<20;N++){if(I=y*(y*(y*w+g)+h),T=v-I,T>-1e-8&&T<1e-8)return y*(y*(y*S+m)+s);if(D=y*(y*(3*w)+2*g)+h,D>1e-10&&D<1e-10)break;y+=T/D}let L=0,B=1;for(let N=0;N<20;N++){if(y=.5*(L+B),I=y*(y*(y*w+g)+h),T=v-I,T>-1e-8&&T<1e-8)return y*(y*(y*S+m)+s);T<0?B=y:L=y}}},Mh={},T_={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},_h=f=>f,b_=f=>{const o=/-?\d*\.?\d+/g,i=f.match(o);if(i){const[u,h,g,w]=i,s=parseFloat(u||"0.42"),m=parseFloat(h||"0"),S=parseFloat(g||"1"),v=parseFloat(w||"1"),y=GC(s,m,S,v);return Mh[f]=y,y}return console.warn("Unknown cubic-bezier timing: "+f),_h},E_=f=>{if(f==="linear")return _h;if(Mh[f]!==void 0)return Mh[f]||_h;if(f==="step-start")return()=>1;if(f==="step-end")return i=>i===1?1:0;const o=T_[f];if(o!==void 0){const[i,u,h,g]=o,w=GC(i,u,h,g);return Mh[f]=w,w}return f.startsWith("cubic-bezier")?b_(f):(console.warn("Unknown timing function: "+f),_h)};function YS(f){return(f/1024/1024).toFixed(2)}class k_ extends vr{constructor(i,u,h){super();P(this,"node");P(this,"props");P(this,"settings");P(this,"progress",0);P(this,"delayFor",0);P(this,"delay",0);P(this,"timingFunction");P(this,"propValuesMap",{});P(this,"dynPropValuesMap");this.node=i,this.props=u;for(const s in u)if(s!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[s]={start:i[s]||0,target:u[s]};else if(i.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const m in u.shaderProps)this.propValuesMap.shaderProps[m]={start:i.shader.props[m],target:u.shaderProps[m]}}else{const m=Object.keys(u.shaderProps),S=m.length;this.dynPropValuesMap={};for(let v=0;v<S;v++){const y=m[v],I=u.shaderProps[y];this.dynPropValuesMap[y]={};const D=Object.entries(I),T=D.length;for(let L=0;L<T;L++){const[B,N]=D[L];this.dynPropValuesMap[y][B]={start:i.shader.props[y][B],target:N}}}}const g=h.easing||"linear",w=h.delay??0;this.settings={duration:h.duration??0,delay:w,easing:g,loop:h.loop??!1,repeat:h.repeat??0,repeatDelay:h.repeatDelay??0,stopMethod:h.stopMethod??!1},this.timingFunction=E_(g),this.delayFor=w,this.delay=w}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(i,u){const h=Object.entries(u),g=h.length;for(let w=0;w<g;w++){const[s,m]=h[w];i[s]=m.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),u=i.length;if(u>0)for(let h=0;h<u;h++){const g=i[h];this.restoreValues(this.node.shader.props[g],this.dynPropValuesMap[g])}}}reverseValues(i){const u=Object.entries(i),h=u.length;for(let g=0;g<h;g++){const[w,s]=u[g];i[w]={start:s.target,target:s.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),u=i.length;if(u>0)for(let h=0;h<u;h++){const g=i[h];this.reverseValues(this.dynPropValuesMap[g])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(i,u,h){return(this.timingFunction(i)||i)*(h-u)+u}updateValue(i,u,h,g){if(this.progress===1)return u;if(this.progress===0)return h;const w=u;if(i.indexOf("color")!==-1){if(h===w)return h;if(g){const s=this.timingFunction(this.progress)||this.progress;return WS(h,w,s)}return WS(h,w,this.progress)}return g?this.applyEasing(this.progress,h,w):h+(w-h)*this.progress}updateValues(i,u,h){const g=Object.entries(u),w=g.length;for(let s=0;s<w;s++){const[m,S]=g[s];i[m]=this.updateValue(m,S.target,S.start,h)}}update(i){const{duration:u,loop:h,easing:g,stopMethod:w}=this.settings,{delayFor:s}=this;if(u===0&&s===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=i,this.delayFor>=0)return;i=-this.delayFor,this.delayFor=0}if(u===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=i/u,this.progress>1&&(this.progress=h?0:1,this.delayFor=this.delay,w)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,g),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,g),this.dynPropValuesMap!==void 0){const m=Object.keys(this.dynPropValuesMap),S=m.length;if(S>0)for(let v=0;v<S;v++){const y=m[v];this.updateValues(this.node.shader.props[y],this.dynPropValuesMap[y],g)}}this.progress<1&&this.emit("tick",{progress:this.progress}),this.progress===1&&this.emit("finished",{})}}class A_ extends vr{constructor(i,u){super();P(this,"manager");P(this,"animation");P(this,"stoppedPromise");P(this,"stoppedResolve",null);P(this,"state");this.manager=i,this.animation=u,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this)}start(){return this.state!=="running"&&this.state!=="scheduled"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(i=>{this.stoppedResolve=i}))}onFinished(){ot(this.stoppedResolve);const{loop:i,stopMethod:u}=this.animation.settings;if(u==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}i||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(i,u){this.emit("tick",u)}}var di;(function(f){f[f.Init=0]="Init",f[f.OutOfBounds=2]="OutOfBounds",f[f.InBounds=4]="InBounds",f[f.InViewport=8]="InViewport"})(di||(di={}));const Bl=new Map;Bl.set(di.Init,"init");Bl.set(di.OutOfBounds,"outOfBounds");Bl.set(di.InBounds,"inBounds");Bl.set(di.InViewport,"inViewport");var De;(function(f){f[f.Children=1]="Children",f[f.ScaleRotate=2]="ScaleRotate",f[f.Local=4]="Local",f[f.Global=8]="Global",f[f.Clipping=16]="Clipping",f[f.CalculatedZIndex=32]="CalculatedZIndex",f[f.ZIndexSortedChildren=64]="ZIndexSortedChildren",f[f.PremultipliedColors=128]="PremultipliedColors",f[f.WorldAlpha=256]="WorldAlpha",f[f.RenderState=512]="RenderState",f[f.IsRenderable=1024]="IsRenderable",f[f.RenderTexture=2048]="RenderTexture",f[f.ParentRenderTexture=4096]="ParentRenderTexture",f[f.RenderBounds=8192]="RenderBounds",f[f.None=0]="None",f[f.All=14335]="All"})(De||(De={}));class Gm extends vr{constructor(i,u){super();P(this,"stage");P(this,"children",[]);P(this,"_id",m_());P(this,"props");P(this,"updateType",De.All);P(this,"childUpdateType",De.None);P(this,"globalTransform");P(this,"scaleRotateTransform");P(this,"localTransform");P(this,"renderCoords");P(this,"renderBound");P(this,"strictBound");P(this,"preloadBound");P(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});P(this,"isRenderable",!1);P(this,"renderState",di.Init);P(this,"worldAlpha",1);P(this,"premultipliedColorTl",0);P(this,"premultipliedColorTr",0);P(this,"premultipliedColorBl",0);P(this,"premultipliedColorBr",0);P(this,"calcZIndex",0);P(this,"hasRTTupdates",!1);P(this,"parentHasRenderTexture",!1);P(this,"rttParent",null);P(this,"onTextureLoaded",(i,u)=>{var h,g;this.autosizeNode(u),this.setUpdateType(De.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),u.width>1&&u.height>1&&this.emit("loaded",{type:"texture",dimensions:u}),((g=(h=this.props.textureOptions)==null?void 0:h.resizeMode)==null?void 0:g.type)==="contain"&&this.setUpdateType(De.Local)});P(this,"onTextureFailed",(i,u)=>{this.setUpdateType(De.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:u})});P(this,"onTextureFreed",()=>{this.setUpdateType(De.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})});this.stage=i,this.props={...u,parent:null,texture:null,src:null,rtt:!1},this.parent=u.parent,this.texture=u.texture,this.src=u.src,this.rtt=u.rtt,this.setUpdateType(De.ScaleRotate|De.Local|De.RenderBounds|De.RenderState),Wa()===!1&&u.preventCleanup===!0&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&this.stage.defaultTexture.state!=="loaded"&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(De.IsRenderable)})}loadTexture(){const{texture:i}=this.props;ot(i),queueMicrotask(()=>{var u;if(this.textureOptions.preload===!0&&this.stage.txManager.loadTexture(i),i.preventCleanup=((u=this.props.textureOptions)==null?void 0:u.preventCleanup)??!1,i.on("loaded",this.onTextureLoaded),i.on("failed",this.onTextureFailed),i.on("freed",this.onTextureFreed),this.parentHasRenderTexture){this.notifyParentRTTOfUpdate();return}i.state==="loaded"?(ot(i.dimensions),this.onTextureLoaded(i,i.dimensions)):i.state==="failed"?(ot(i.error),this.onTextureFailed(i,i.error)):i.state==="freed"&&this.onTextureFreed(i)})}unloadTexture(){this.texture!==null&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(i){this.autosize&&(this.width=i.width,this.height=i.height)}setUpdateType(i){this.updateType|=i;const u=this.props.parent;u&&(u.updateType&De.Children||u.setUpdateType(De.Children))}sortChildren(){this.children.sort((i,u)=>i.calcZIndex-u.calcZIndex)}updateScaleRotateTransform(){const{rotation:i,scaleX:u,scaleY:h}=this.props;if(i===0&&u===1&&h===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=Ni.rotate(i,this.scaleRotateTransform).scale(u,h)}updateLocalTransform(){var S,v;const{x:i,y:u,width:h,height:g}=this.props,w=this.props.mountX*h,s=this.props.mountY*g;if(this.scaleRotateTransform){const y=this.props.pivotX*h,I=this.props.pivotY*g;this.localTransform=Ni.translate(i-w+y,u-s+I,this.localTransform).multiply(this.scaleRotateTransform).translate(-y,-I)}else this.localTransform=Ni.translate(i-w,u-s,this.localTransform);const m=this.props.texture;if(m&&m.dimensions&&((v=(S=this.props.textureOptions)==null?void 0:S.resizeMode)==null?void 0:v.type)==="contain"){let y=1,I=1,D=0,T=0;const{width:L,height:B}=m.dimensions,N=L/B,z=h/g;if(N>z){const F=h/L,H=B*F;T=(g-H)/2,I=H/g}else{const F=g/B,H=L*F;D=(h-H)/2,y=H/h}this.localTransform.translate(D,T).scale(y,I)}this.setUpdateType(De.Global)}update(i,u){var w;this.updateType&De.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(De.Local)),this.updateType&De.Local&&(this.updateLocalTransform(),this.setUpdateType(De.Global));const h=this.props.parent;let g=null;if(this.updateType&De.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0,this.loadRenderTexture()),this.updateType&De.Global&&(ot(this.localTransform),this.globalTransform=Ni.copy((h==null?void 0:h.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((w=this.props.parent)!=null&&w.rtt)&&(this.globalTransform=Ni.identity()),h&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(De.RenderState|De.Children),this.childUpdateType|=De.Global,this.clipping===!0&&(this.setUpdateType(De.Clipping|De.RenderBounds),this.childUpdateType|=De.RenderBounds)),this.updateType&De.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(De.RenderState),this.setUpdateType(De.Children)),this.updateType&De.RenderState&&(g=this.checkRenderBounds(),this.setUpdateType(De.IsRenderable),g!==di.OutOfBounds&&this.updateRenderState(g)),this.updateType&De.WorldAlpha&&(h?this.worldAlpha=h.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(De.Children|De.PremultipliedColors|De.IsRenderable),this.childUpdateType|=De.WorldAlpha),this.updateType&De.IsRenderable&&this.updateIsRenderable(),this.updateType&De.Clipping&&(this.calculateClippingRect(u),this.setUpdateType(De.Children),this.childUpdateType|=De.Clipping,this.childUpdateType|=De.RenderBounds),this.updateType&De.PremultipliedColors&&(this.premultipliedColorTl=ch(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=ch(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=ch(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=ch(this.props.colorBr,this.worldAlpha,!0))),h!==null&&this.updateType&De.CalculatedZIndex&&(this.calculateZIndex(),h.setUpdateType(De.ZIndexSortedChildren)),!(this.props.strictBounds===!0&&this.renderState===di.OutOfBounds)){if(this.updateType&De.Children&&this.children.length>0)for(let s=0,m=this.children.length;s<m;s++){const S=this.children[s];if(S.setUpdateType(this.childUpdateType),S.updateType===0)continue;let v=this.clippingRect;this.rtt===!0&&(v={x:0,y:0,width:0,height:0,valid:!1}),S.update(i,v)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&De.ZIndexSortedChildren&&this.sortChildren(),g===di.OutOfBounds&&(this.updateRenderState(g),this.updateIsRenderable()),this.updateType=0,this.childUpdateType=0}}findParentRTTNode(){let i=this.parent;for(;i&&!i.rtt;)i=i.parent;return i}notifyParentRTTOfUpdate(){if(this.parent===null)return;const i=this.rttParent||this.findParentRTTNode();i&&(i.hasRTTupdates=!0,i.setUpdateType(De.RenderTexture),i.parentHasRenderTexture===!0&&i.notifyParentRTTOfUpdate())}checkRenderBounds(){return ot(this.renderBound),ot(this.strictBound),ot(this.preloadBound),Em(this.renderBound,this.strictBound)?di.InViewport:Em(this.renderBound,this.preloadBound)?di.InBounds:x_(this.renderBound,this.strictBound)?di.InViewport:this.parentHasRenderTexture===!0?di.InBounds:this.parent!==null&&(this.props.width===0||this.props.height===0)?this.parent.renderState:di.OutOfBounds}updateBoundingRect(){const{renderCoords:i,globalTransform:u}=this;ot(u),ot(i);const{tb:h,tc:g}=u,{x1:w,y1:s,x3:m,y3:S}=i;if(h===0||g===0)this.renderBound=Ua(w,s,m,S,this.renderBound);else{const{x2:v,x4:y,y2:I,y4:D}=i;this.renderBound=Ua(Math.min(w,v,m,y),Math.min(s,I,S,D),Math.max(w,v,m,y),Math.max(s,I,S,D),this.renderBound)}}createRenderBounds(){if(ot(this.stage),this.parent!==null&&this.parent.strictBound!==void 0){const v=this.parent.strictBound;this.strictBound=Ua(v.x1,v.y1,v.x2,v.y2),this.preloadBound=Hm(this.strictBound,this.stage.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(this.props.clipping===!1||this.renderBound===void 0||Em(this.renderBound,this.strictBound)===!1)return;const{x:i,y:u,width:h,height:g}=this.props,{tx:w,ty:s}=this.globalTransform||{},m=w??i,S=s??u;this.strictBound=Ua(m,S,m+h,S+g,this.strictBound),this.preloadBound=Hm(this.strictBound,this.stage.boundsMargin)}updateRenderState(i){if(i===this.renderState)return;const u=this.renderState;this.renderState=i;const h=Bl.get(i);ot(h),this.emit(h,{previous:u,current:i})}updateIsRenderable(){let i=!1,u=!1;if(this.checkBasicRenderability()===!1){this.updateTextureOwnership(!1),this.setRenderable(!1);return}this.texture!==null?(u=!0,i=this.texture.state==="loaded"):(this.hasShader()||this.hasColorProperties()===!0)&&this.hasDimensions()===!0&&this.stage.defaultTexture&&this.stage.defaultTexture.state==="loaded"&&(i=!0),this.updateTextureOwnership(u),this.setRenderable(i)}checkBasicRenderability(){return!(this.worldAlpha===0||this.isOutOfBounds()===!0)}setRenderable(i){this.isRenderable=i}updateTextureOwnership(i){var u;(u=this.texture)==null||u.setRenderableOwner(this,i)}isOutOfBounds(){return this.renderState<=di.OutOfBounds}hasDimensions(){return this.props.width!==0&&this.props.height!==0}hasColorProperties(){return this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0}hasShader(){return this.props.shader!==null}calculateRenderCoords(){const{width:i,height:u,globalTransform:h}=this;ot(h);const{tx:g,ty:w,ta:s,tb:m,tc:S,td:v}=h;if(m===0&&S===0){const y=g,I=g+i*s,D=w,T=w+u*v;this.renderCoords=$h.translate(y,D,I,D,I,T,y,T,this.renderCoords)}else this.renderCoords=$h.translate(g,w,g+i*s,w+i*S,g+i*s+u*m,w+i*S+u*v,g+u*m,w+u*v,this.renderCoords)}calculateClippingRect(i){ot(this.globalTransform);const{clippingRect:u,props:h,globalTransform:g}=this,{clipping:w}=h,s=g.tb!==0||g.tc!==0;w===!0&&s===!1?(u.x=g.tx,u.y=g.ty,u.width=this.width*g.ta,u.height=this.height*g.td,u.valid=!0):u.valid=!1,i.valid===!0&&u.valid===!0?VC(i,u,u):i.valid===!0&&(HC(i,u),u.valid=!0)}calculateZIndex(){var w,s;const i=this.props,u=i.zIndex||0,h=((w=i.parent)==null?void 0:w.zIndex)||0;let g=u;(s=i.parent)!=null&&s.zIndexLocked&&(g=u<h?u:h),this.calcZIndex=g}destroy(){var i;for(this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;)(i=this.children[0])==null||i.destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(i){this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(ot(this.globalTransform),ot(this.renderCoords),i.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions}))}get id(){return this._id}get data(){return this.props.data}set data(i){this.props.data=i}get x(){return this.props.x}set x(i){this.props.x!==i&&(this.props.x=i,this.setUpdateType(De.Local))}get absX(){var i,u,h;return this.props.x+-this.props.width*this.props.mountX+(((i=this.props.parent)==null?void 0:i.absX)||((h=(u=this.props.parent)==null?void 0:u.globalTransform)==null?void 0:h.tx)||0)}get absY(){var i;return this.props.y+-this.props.height*this.props.mountY+(((i=this.props.parent)==null?void 0:i.absY)??0)}get y(){return this.props.y}set y(i){this.props.y!==i&&(this.props.y=i,this.setUpdateType(De.Local))}get width(){return this.props.width}set width(i){this.props.width!==i&&(this.props.width=i,this.setUpdateType(De.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(De.RenderTexture)))}get height(){return this.props.height}set height(i){this.props.height!==i&&(this.props.height=i,this.setUpdateType(De.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(De.RenderTexture)))}get scale(){return this.scaleX}set scale(i){this.scaleX=i,this.scaleY=i}get scaleX(){return this.props.scaleX}set scaleX(i){this.props.scaleX!==i&&(this.props.scaleX=i,this.setUpdateType(De.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(i){this.props.scaleY!==i&&(this.props.scaleY=i,this.setUpdateType(De.ScaleRotate))}get mount(){return this.props.mount}set mount(i){(this.props.mountX!==i||this.props.mountY!==i)&&(this.props.mountX=i,this.props.mountY=i,this.props.mount=i,this.setUpdateType(De.Local))}get mountX(){return this.props.mountX}set mountX(i){this.props.mountX!==i&&(this.props.mountX=i,this.setUpdateType(De.Local))}get mountY(){return this.props.mountY}set mountY(i){this.props.mountY!==i&&(this.props.mountY=i,this.setUpdateType(De.Local))}get pivot(){return this.props.pivot}set pivot(i){(this.props.pivotX!==i||this.props.pivotY!==i)&&(this.props.pivotX=i,this.props.pivotY=i,this.props.pivot=i,this.setUpdateType(De.Local))}get pivotX(){return this.props.pivotX}set pivotX(i){this.props.pivotX!==i&&(this.props.pivotX=i,this.setUpdateType(De.Local))}get pivotY(){return this.props.pivotY}set pivotY(i){this.props.pivotY!==i&&(this.props.pivotY=i,this.setUpdateType(De.Local))}get rotation(){return this.props.rotation}set rotation(i){this.props.rotation!==i&&(this.props.rotation=i,this.setUpdateType(De.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(i){this.props.alpha=i,this.setUpdateType(De.PremultipliedColors|De.WorldAlpha|De.Children|De.IsRenderable),this.childUpdateType|=De.WorldAlpha}get autosize(){return this.props.autosize}set autosize(i){this.props.autosize=i}get clipping(){return this.props.clipping}set clipping(i){this.props.clipping=i,this.setUpdateType(De.Clipping|De.RenderBounds|De.Children),this.childUpdateType|=De.Global|De.Clipping}get color(){return this.props.color}set color(i){this.colorTop=i,this.colorBottom=i,this.colorLeft=i,this.colorRight=i,this.props.color=i,this.setUpdateType(De.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(i){(this.props.colorTl!==i||this.props.colorTr!==i)&&(this.colorTl=i,this.colorTr=i),this.props.colorTop=i,this.setUpdateType(De.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(i){(this.props.colorBl!==i||this.props.colorBr!==i)&&(this.colorBl=i,this.colorBr=i),this.props.colorBottom=i,this.setUpdateType(De.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(i){(this.props.colorTl!==i||this.props.colorBl!==i)&&(this.colorTl=i,this.colorBl=i),this.props.colorLeft=i,this.setUpdateType(De.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(i){(this.props.colorTr!==i||this.props.colorBr!==i)&&(this.colorTr=i,this.colorBr=i),this.props.colorRight=i,this.setUpdateType(De.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(i){this.props.colorTl=i,this.setUpdateType(De.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(i){this.props.colorTr=i,this.setUpdateType(De.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(i){this.props.colorBl=i,this.setUpdateType(De.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(i){this.props.colorBr=i,this.setUpdateType(De.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(i){this.props.zIndexLocked=i,this.setUpdateType(De.CalculatedZIndex|De.Children);for(let u=0,h=this.children.length;u<h;u++)this.children[u].setUpdateType(De.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(i){this.props.zIndex=i,this.setUpdateType(De.CalculatedZIndex|De.Children);for(let u=0,h=this.children.length;u<h;u++)this.children[u].setUpdateType(De.CalculatedZIndex)}get parent(){return this.props.parent}set parent(i){const u=this.props.parent;if(u!==i){if(this.props.parent=i,u){const h=u.children.indexOf(this);ot(h!==-1,"CoreNode.parent: Node not found in old parent's children!"),u.children.splice(h,1),u.setUpdateType(De.Children|De.ZIndexSortedChildren)}i&&(i.children.push(this),this.setUpdateType(De.All),i.setUpdateType(De.Children|De.ZIndexSortedChildren),(i.rtt||i.parentHasRenderTexture)&&this.applyRTTInheritance(i)),this.updateScaleRotateTransform(),this.setUpdateType(De.RenderBounds|De.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(i){Wa()===!1&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=i}get rtt(){return this.props.rtt}set rtt(i){this.props.rtt!==i&&(this.props.rtt=i,i===!0?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(De.RenderTexture),this.parentHasRenderTexture===!0&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.loadRenderTexture()}loadRenderTexture(){var i;if(this.texture!==null){if(this.texture.state==="loaded"){(i=this.stage.renderer)==null||i.renderToTexture(this);return}this.stage.txManager.loadTexture(this.texture,!0),this.texture.once("loaded",()=>{var u;(u=this.stage.renderer)==null||u.renderToTexture(this),this.setUpdateType(De.IsRenderable)})}}cleanupRenderTexture(){var i;this.unloadTexture(),this.clearRTTInheritance(),(i=this.stage.renderer)==null||i.removeRTTNode(this),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(i=null){const u=i||this;for(const h of u.children)h.setUpdateType(De.All),h.parentHasRenderTexture=!0,h.markChildrenWithRTT()}applyRTTInheritance(i){i.rtt&&i.setUpdateType(De.RenderTexture),this.markChildrenWithRTT(i)}clearRTTInheritance(){if(!this.rtt)for(const i of this.children)i.parentHasRenderTexture=!1,i.rttParent=null,i.setUpdateType(De.All),i.clearRTTInheritance()}get shader(){return this.props.shader}set shader(i){this.props.shader!==i&&(this.props.shader=i,this.setUpdateType(De.IsRenderable))}get src(){return this.props.src}set src(i){if(this.props.src!==i){if(this.props.src=i,!i){this.texture=null;return}this.texture=this.stage.txManager.createTexture("ImageTexture",{src:i,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(i){this.props.imageType!==i&&(this.props.imageType=i)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(i){this.props.srcHeight=i}get srcWidth(){return this.props.srcWidth}set srcWidth(i){this.props.srcWidth=i}get srcX(){return this.props.srcX}set srcX(i){this.props.srcX=i}get srcY(){return this.props.srcY}set srcY(i){this.props.srcY=i}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let i=this.parent;for(;i;){if(i.rtt)return i;i=i.parent}return null}get texture(){return this.props.texture}set texture(i){if(this.props.texture===i)return;const u=this.props.texture;u&&(u.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=i,i!==null&&(i.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(De.IsRenderable)}set textureOptions(i){this.props.textureOptions=i}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(i){i!==this.props.strictBounds&&(this.props.strictBounds=i,this.setUpdateType(De.RenderBounds|De.Children),this.childUpdateType|=De.RenderBounds|De.Children)}animate(i,u){const h=new k_(this,i,u);return new A_(this.stage.animationManager,h)}flush(){}}const I_=f=>{let o=!1;const i=()=>{if(f.updateFrameTime(),f.updateAnimations(),!f.hasSceneUpdates()){f.calculateFps(),setTimeout(i,16.666666666666668),o||(f.txMemManager.checkCleanup()&&f.txMemManager.cleanup(),f.eventBus.emit("idle"),o=!0),f.flushFrameEvents();return}o=!1,f.drawFrame(),f.flushFrameEvents(),requestAnimationFrame(i)};requestAnimationFrame(i)},ms=()=>performance?performance.now():Date.now();class M_{constructor(){P(this,"activeAnimations",new Set)}registerAnimation(o){this.activeAnimations.add(o)}unregisterAnimation(o){this.activeAnimations.delete(o)}update(o){this.activeAnimations.forEach(i=>{i.update(o)})}}function __(){function f(i){return i.indexOf("image/png")!==-1}function o(i,u,h,g,w,s,m){return new Promise(function(S,v){var y=m.supportsOptionsCreateImageBitmap,I=m.supportsFullCreateImageBitmap,D=new XMLHttpRequest;D.open("GET",i,!0),D.responseType="blob",D.onload=function(){if(D.status!==200&&D.status!==0)return v(new Error("Failed to load image: "+D.statusText));var T=D.response,L=u!==void 0?u:f(T.type);if(I===!0&&w!==null&&s!==null){createImageBitmap(T,h||0,g||0,w,s,{premultiplyAlpha:L?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(B){S({data:B,premultiplyAlpha:u})}).catch(function(B){v(B)});return}else y===!0?createImageBitmap(T,{premultiplyAlpha:L?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(B){S({data:B,premultiplyAlpha:u})}).catch(function(B){v(B)}):createImageBitmap(T).then(function(B){S({data:B,premultiplyAlpha:u})}).catch(function(B){v(B)})},D.onerror=function(){v(new Error("Network error occurred while trying to fetch the image."))},D.send()})}self.onmessage=i=>{var u=i.data.src,h=i.data.id,g=i.data.premultiplyAlpha,w=i.data.sx,s=i.data.sy,m=i.data.sw,S=i.data.sh,v=!1,y=!1;o(u,g,w,s,m,S,{supportsOptionsCreateImageBitmap:v,supportsFullCreateImageBitmap:y}).then(function(I){self.postMessage({id:h,src:u,data:I})}).catch(function(I){self.postMessage({id:h,src:u,error:I.message})})}}class R_{constructor(o,i){P(this,"imageWorkersEnabled",!0);P(this,"messageManager",{});P(this,"workers",[]);P(this,"workerIndex",0);P(this,"nextId",0);this.workers=this.createWorkers(o,i),this.workers.forEach(u=>{u.onmessage=this.handleMessage.bind(this)})}handleMessage(o){const{id:i,data:u,error:h}=o.data,g=this.messageManager[i];if(g){const[w,s]=g;delete this.messageManager[i],h?s(new Error(h)):w(u)}}createWorkers(o=1,i){let u=`(${__.toString()})()`;i.options&&(u=u.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),i.full&&(u=u.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),u=u.replace('"use strict";',"");const h=new Blob([u],{type:"application/javascript"}),g=(self.URL?URL:webkitURL).createObjectURL(h),w=[];for(let s=0;s<o;s++)w.push(new Worker(g));return w}getNextWorker(){const o=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,o}getImage(o,i,u,h,g,w){return new Promise((s,m)=>{try{if(this.workers){const S=this.nextId++;this.messageManager[S]=[s,m];const v=this.getNextWorker();v&&v.postMessage({id:S,src:o,premultiplyAlpha:i,sx:u,sy:h,sw:g,sh:w})}}catch(S){m(S)}})}}const Al=class Al extends Nl{constructor(i,u){super(i);P(this,"type",Nn.color);P(this,"props");this.props=Al.resolveDefaults(u||{})}get color(){return this.props.color}set color(i){this.props.color=i}async getTextureSource(){const i=new Uint8Array(4);return this.color===4294967295?(i[0]=255,i[1]=255,i[2]=255,i[3]=255):(i[0]=this.color>>16&255,i[1]=this.color>>8&255,i[2]=this.color&255,i[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:i,premultiplyAlpha:!0}}static makeCacheKey(i){return`ColorTexture,${Al.resolveDefaults(i).color}`}static resolveDefaults(i){return{color:i.color||4294967295}}};P(Al,"z$__type__Props");let zh=Al;function L_(f){return/\.(ktx|pvr)$/.test(f)}const QS=async f=>{const i=await(await fetch(f)).arrayBuffer();return f.indexOf(".ktx")!==-1?D_(i):P_(i)},D_=async f=>{const o=new DataView(f),i=o.getUint32(12)===16909060,u=[],h={glInternalFormat:o.getUint32(28,i),pixelWidth:o.getUint32(36,i),pixelHeight:o.getUint32(40,i),numberOfMipmapLevels:o.getUint32(56,i),bytesOfKeyValueData:o.getUint32(60,i)};let g=64;g+=h.bytesOfKeyValueData;for(let w=0;w<h.numberOfMipmapLevels;w++){const s=o.getUint32(g);g+=4,u.push(o.buffer.slice(g,s)),g+=s}return{data:{glInternalFormat:h.glInternalFormat,mipmaps:u,width:h.pixelWidth||0,height:h.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},P_=async f=>{const s=f,m=new Int32Array(s,0,13),S=m[12]+52,v=new Uint8Array(s,S),y=[],I={pixelWidth:m[7],pixelHeight:m[6],numberOfMipmapLevels:m[11]||0};let D=0,T=I.pixelWidth||0,L=I.pixelHeight||0;for(let B=0;B<I.numberOfMipmapLevels;B++){const N=(T+3>>2)*(L+3>>2)*8,z=new Uint8Array(s,v.byteOffset+D,N);y.push(z),D+=N,T=T>>1,L=L>>1}return{data:{glInternalFormat:36196,mipmaps:y,width:I.pixelWidth||0,height:I.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function O_(f){return/\.(svg)(\?.*)?$/.test(f)}const ZS=(f,o,i,u,h,g,w)=>new Promise((s,m)=>{const S=document.createElement("canvas"),v=S.getContext("2d");ot(v),v.imageSmoothingEnabled=!0;const y=new Image;y.onload=()=>{const I=u??0,D=h??0,T=o||y.width,L=i||y.height;S.width=T,S.height=L,v.drawImage(y,0,0,T,L),s({data:v.getImageData(I,D,g??T,w??L),premultiplyAlpha:!1})},y.onerror=I=>{m(I)},y.src=f});function WC(f,o=""){return new Promise((i,u)=>{const h=new XMLHttpRequest;h.responseType=o,h.onreadystatechange=function(){h.readyState==XMLHttpRequest.DONE&&(h.status===0||h.status===200?i(h.response):u(h.statusText))},h.open("GET",f,!0),h.send(null)})}const Il=class Il extends Nl{constructor(i,u){super(i);P(this,"props");P(this,"type",Nn.image);this.props=Il.resolveDefaults(u)}hasAlphaChannel(i){return i.indexOf("image/png")!==-1}async loadImageFallback(i,u){const h=new Image;return KS(i)===!1&&(h.crossOrigin="anonymous"),new Promise(g=>{h.onload=()=>{g({data:h,premultiplyAlpha:u})},h.onerror=()=>{console.warn("Image loading failed, returning fallback object."),g({data:h,premultiplyAlpha:u})},h.src=i})}async createImageBitmap(i,u,h,g,w,s){const m=u??i.type.includes("image/png"),S=this.txManager.imageBitmapSupported;return S.full===!0&&h!==null&&g!==null&&w!==null&&s!==null?{data:await createImageBitmap(i,h,g,w,s,{premultiplyAlpha:m?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:m}:S.options===!0?{data:await createImageBitmap(i,{premultiplyAlpha:m?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:m}:{data:await createImageBitmap(i),premultiplyAlpha:m}}async loadImage(i){const{premultiplyAlpha:u,sx:h,sy:g,sw:w,sh:s}=this.props;if(this.txManager.hasCreateImageBitmap===!0){if(KS(i)===!1&&this.txManager.hasWorker===!0&&this.txManager.imageWorkerManager!==null)return this.txManager.imageWorkerManager.getImage(i,u,h,g,w,s);const m=await WC(i,"blob").then(S=>S);return this.createImageBitmap(m,u,h,g,w,s)}return this.loadImageFallback(i,u??!0)}async getTextureSource(){var g,w;let i;try{i=await this.determineImageTypeAndLoadImage()}catch(s){return this.setState("failed",s),{data:null}}if(i.data===null)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};let u,h;return i.data instanceof Uint8Array?(u=this.props.width??0,h=this.props.height??0):(u=((g=i.data)==null?void 0:g.width)??(this.props.width||0),h=((w=i.data)==null?void 0:w.height)??(this.props.height||0)),this.setState("fetched",{width:u,height:h}),{data:i.data,premultiplyAlpha:this.props.premultiplyAlpha??!0}}determineImageTypeAndLoadImage(){const{src:i,premultiplyAlpha:u,type:h}=this.props;if(i===null)return{data:null};if(typeof i!="string")return i instanceof ImageData?{data:i,premultiplyAlpha:u}:{data:i(),premultiplyAlpha:u};const g=S_(i);return h==="regular"?this.loadImage(g):h==="svg"?ZS(g,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):O_(i)===!0?ZS(g,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):h==="compressed"||L_(i)===!0?QS(g):this.loadImage(g)}static makeCacheKey(i){const u=Il.resolveDefaults(i),h=u.key||u.src;if(typeof h!="string")return!1;let g="";return u.sh!==null&&u.sw!==null&&(g+=",",g+=u.sx??"",g+=u.sy??"",g+=u.sw||"",g+=u.sh||""),`ImageTexture,${h},${u.premultiplyAlpha??"true"}${g}`}static resolveDefaults(i){return{src:i.src??"",premultiplyAlpha:i.premultiplyAlpha??!0,key:i.key??null,type:i.type??null,width:i.width??null,height:i.height??null,sx:i.sx??null,sy:i.sy??null,sw:i.sw??null,sh:i.sh??null}}};P(Il,"z$__type__Props");let Ll=Il;const Ml=class Ml extends Nl{constructor(i,u){super(i);P(this,"props");P(this,"type",Nn.noise);this.props=Ml.resolveDefaults(u)}async getTextureSource(){const{width:i,height:u}=this.props,h=i*u*4,g=new Uint8ClampedArray(h);for(let w=0;w<h;w+=4){const s=Math.floor(Math.random()*256);g[w]=s,g[w+1]=s,g[w+2]=s,g[w+3]=255}return this.setState("fetched"),{data:new ImageData(g,i,u)}}static makeCacheKey(i){if(i.cacheId===void 0)return!1;const u=Ml.resolveDefaults(i);return`NoiseTexture,${u.width},${u.height},${u.cacheId}`}static resolveDefaults(i){return{width:i.width??128,height:i.height??128,cacheId:i.cacheId??0}}};P(Ml,"z$__type__Props");let Wm=Ml;const Zh=class Zh extends Nl{constructor(i,u){super(i);P(this,"props");P(this,"parentTexture");P(this,"type",Nn.subTexture);P(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height})});P(this,"onParentTxFailed",(i,u)=>{this.forwardParentTxState("failed",u)});P(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})});P(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")});P(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")});P(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed")});this.props=Zh.resolveDefaults(u||{}),ot(this.props.texture,"SubTexture requires a parent texture"),ot(this.props.texture instanceof Ll,"SubTexture requires an ImageTexture parent"),this.parentTexture=i.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const h=this.parentTexture;h.state==="loaded"?this.onParentTxLoaded(h,h.dimensions):h.state==="fetching"?this.onParentTxFetching():h.state==="fetched"?this.onParentTxFetched():h.state==="loading"?this.onParentTxLoading():h.state==="failed"?this.onParentTxFailed(h,h.error):h.state==="freed"&&this.onParentTxFreed(),h.on("fetched",this.onParentTxFetched),h.on("loading",this.onParentTxLoading),h.on("fetching",this.onParentTxFetching),h.on("loaded",this.onParentTxLoaded),h.on("failed",this.onParentTxFailed),h.on("freed",this.onParentTxFreed)})}forwardParentTxState(i,u){this.setState(i,u)}onChangeIsRenderable(i){this.parentTexture.setRenderableOwner(this,i)}async getTextureSource(){return new Promise((i,u)=>{this.setState("fetched"),i({data:this.props})})}static makeCacheKey(i){return!1}static resolveDefaults(i){return{texture:i.texture,x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0}}};P(Zh,"z$__type__Props");let Dl=Zh;const Jh=class Jh extends Nl{constructor(i,u){super(i);P(this,"props");P(this,"type",Nn.renderToTexture);this.props=Jh.resolveDefaults(u||{})}get width(){return this.props.width}set width(i){this.props.width=i}get height(){return this.props.height}set height(i){this.props.height=i}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(i){return{width:i.width||256,height:i.height||256}}};P(Jh,"z$__type__Props");let Vh=Jh;class N_ extends vr{constructor(i,u){super();P(this,"keyCache",new Map);P(this,"inverseKeyCache",new WeakMap);P(this,"txConstructors",{});P(this,"downloadTextureSourceQueue",[]);P(this,"priorityQueue",[]);P(this,"uploadTextureQueue",[]);P(this,"initialized",!1);P(this,"stage");P(this,"imageWorkerManager",null);P(this,"hasCreateImageBitmap",!!self.createImageBitmap);P(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1});P(this,"hasWorker",!!self.Worker);P(this,"renderer");P(this,"frameTime",0);this.stage=i,this.validateCreateImageBitmap().then(h=>{this.hasCreateImageBitmap=h.basic||h.options||h.full,this.imageBitmapSupported=h,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&u>0?this.imageWorkerManager=new R_(u,h):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}).catch(h=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}),this.registerTextureType("ImageTexture",Ll),this.registerTextureType("ColorTexture",zh),this.registerTextureType("NoiseTexture",Wm),this.registerTextureType("SubTexture",Dl),this.registerTextureType("RenderTexture",Vh)}async validateCreateImageBitmap(){var w,s,m;const i=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),u={basic:!1,options:!1,full:!1},h=new Blob([i],{type:"image/png"}),g=await createImageBitmap(h);(w=g.close)==null||w.call(g),u.basic=!0;try{const S={premultiplyAlpha:"none"},v=await createImageBitmap(h,S);(s=v.close)==null||s.call(v),u.options=!0}catch{}try{const S=await createImageBitmap(h,0,0,1,1,{premultiplyAlpha:"none"});(m=S.close)==null||m.call(S),u.full=!0}catch{}return u}registerTextureType(i,u){this.txConstructors[i]=u}enqueueDownloadTextureSource(i){this.downloadTextureSourceQueue.includes(i)||this.downloadTextureSourceQueue.push(i)}enqueueUploadTexture(i){this.uploadTextureQueue.includes(i)===!1&&this.uploadTextureQueue.push(i)}createTexture(i,u){let h;const g=this.txConstructors[i];if(!g)throw new Error(`Texture type "${i}" is not registered`);const w=g.makeCacheKey(u);return w&&this.keyCache.has(w)?h=this.keyCache.get(w):(h=new g(this,u),w&&this.initTextureToCache(h,w)),h}orphanTexture(i){const u=this.downloadTextureSourceQueue.indexOf(i);u!==-1&&this.downloadTextureSourceQueue.splice(u,1);const h=this.uploadTextureQueue.indexOf(i);h!==-1&&this.uploadTextureQueue.splice(h,1),i.type!==Nn.subTexture&&this.stage.txMemManager.addToOrphanedTextures(i)}loadTexture(i,u){if(this.stage.txMemManager.removeFromOrphanedTextures(i),!(i.state!=="initial"&&i.state!=="freed")){if(i.setState("loading"),this.initialized===!1){this.priorityQueue.push(i);return}if(i.type===Nn.subTexture||i.type===Nn.color||i.type===Nn.renderToTexture){i.setState("fetched"),this.enqueueUploadTexture(i);return}u===!0&&i.getTextureData().then(()=>{this.uploadTexture(i)}).catch(h=>{console.error(h)}),this.enqueueDownloadTextureSource(i)}}uploadTexture(i){if(i.state!=="fetched")return;i.loadCtxTexture().load()}isProcessingTexture(i){return this.downloadTextureSourceQueue.includes(i)===!0||this.uploadTextureQueue.includes(i)===!0}processSome(i){if(this.initialized===!1)return;const u=ms();for(;this.priorityQueue.length>0&&ms()-u<i;){const h=this.priorityQueue.pop();h.getTextureData().then(()=>{this.uploadTexture(h)})}for(;this.uploadTextureQueue.length>0&&ms()-u<i;)this.uploadTexture(this.uploadTextureQueue.pop());for(;this.downloadTextureSourceQueue.length>0&&ms()-u<i;){const h=this.downloadTextureSourceQueue.shift();h.getTextureData().then(()=>{h.state==="fetched"&&this.enqueueUploadTexture(h)})}}hasUpdates(){return this.downloadTextureSourceQueue.length>0||this.uploadTextureQueue.length>0}initTextureToCache(i,u){const{keyCache:h,inverseKeyCache:g}=this;h.set(u,i),g.set(i,u)}getTextureFromCache(i){return this.keyCache.get(i)}removeTextureFromCache(i){const{inverseKeyCache:u,keyCache:h}=this,g=u.get(i);g&&h.delete(g)}resolveParentTexture(i){if(!(i!=null&&i.props))return i;const u=Ll.makeCacheKey(i.props);return(u?this.getTextureFromCache(u):void 0)??i}}const U_={normal:400,bold:700,bolder:900,lighter:100},JS=f=>typeof f=="number"?f:U_[f]||400;function B_(f,o,i,u,h){let g=JS(i);for(const w of f){const s=w[o];if(!s)continue;if(s.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${o}' - will be used for all weights and styles`),s.values().next().value;const m=new Map;for(const v of s){const y=JS(v.descriptors.weight);if(y===g&&v.descriptors.style===u&&v.descriptors.stretch===h)return v;m.set(y,v)}const S=`TrFontManager: No exact match: '${o} Weight: ${g} Style: ${u} Stretch: ${h}'`;if(console.error(S),g===400&&m.has(500))return m.get(500);if(g===500&&m.has(400))return m.get(400);if(g<400){for(;g>0;){if(m.has(g))return m.get(g);g-=100}g=600}for(;g<1e3;){if(m.has(g))return m.get(g);g+=100}for(g=500;g>0;){if(m.has(g))return m.get(g);g-=100}}}class j_{constructor(o){P(this,"textRenderers");P(this,"fontCache",new Map);this.textRenderers=o}addFontFace(o){for(const i in this.textRenderers){const u=this.textRenderers[i];u&&u.isFontFaceSupported(o)&&u.addFontFace(o)}}resolveFontFace(o,i,u){const{fontFamily:h,fontWeight:g,fontStyle:w,fontStretch:s}=i,m=`${u}_${h}_${w}_${g}_${s}`;if(this.fontCache.has(m)===!0)return this.fontCache.get(m);const S=B_(o,h,g,w,s);return S!==void 0&&this.fontCache.set(m,S),S}}class XC{static makeCacheKey(o){return!1}static resolveDefaults(o){return{}}}function eC(f,o,i){const u=f.createShader(o);if(!u){const g=f.getError();throw new Error(`Unable to create the shader: ${o===f.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${g?` WebGlContext Error: ${g}`:""}`)}if(f.shaderSource(u,i),f.compileShader(u),!!f.getShaderParameter(u,f.COMPILE_STATUS))return u;console.error(f.getShaderInfoLog(u)),f.deleteShader(u)}function F_(f,o,i){const u=f.createProgram();if(!u)throw new Error("Unable to create program");if(f.attachShader(u,o),f.attachShader(u,i),f.linkProgram(u),!!f.getProgramParameter(u,f.LINK_STATUS))return u;console.warn(f.getProgramInfoLog(u)),f.deleteProgram(u)}class xs extends XC{constructor(i){super();P(this,"boundBufferCollection",null);P(this,"buffersBound",!1);P(this,"program");P(this,"vao");P(this,"renderer");P(this,"glw");P(this,"attributeBuffers");P(this,"attributeLocations");P(this,"attributeNames");P(this,"uniformLocations");P(this,"uniformTypes");P(this,"supportsIndexedTextures");const u=this.renderer=i.renderer,h=this.glw=this.renderer.glw;this.supportsIndexedTextures=i.supportsIndexedTextures||!1;const g=h.isWebGl2(),w=g&&i.webgl2Extensions||!g&&i.webgl1Extensions||[],s=g?"2.0":"1.0";w.forEach(L=>{if(!h.getExtension(L))throw new Error(`Shader "${this.constructor.name}" requires extension "${L}" for WebGL ${s} but wasn't found`)});const m=i.shaderSources||this.constructor.shaderSources;if(m)g&&(m!=null&&m.webGl2)&&(m.fragment=m.webGl2.fragment,m.vertex=m.webGl2.vertex,delete m.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const S=u.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,v=m.vertex instanceof Function?m.vertex(S):m.vertex,y=m.fragment instanceof Function?m.fragment(S):m.fragment,I=eC(h,h.VERTEX_SHADER,v),D=eC(h,h.FRAGMENT_SHADER,y);if(!I||!D)throw new Error(`Unable to create the following shader(s): ${[!I&&"VERTEX_SHADER",!D&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const T=F_(h,I,D);if(!T)throw new Error("Unable to create program");this.program=T,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...i.attributes].forEach(L=>{const B=h.getAttribLocation(this.program,L);if(B<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${L}"!`);const N=h.createBuffer();if(!N)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${L}"`);this.attributeLocations[L]=B,this.attributeBuffers[L]=N,this.attributeNames.push(L)}),this.uniformLocations={},this.uniformTypes={},i.uniforms.forEach(L=>{const B=h.getUniformLocation(this.program,L.name);if(this.uniformTypes[L.name]=L.uniform,!B){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${L.name}"`);return}this.uniformLocations[L.name]=B})}bindBufferAttribute(i,u,h){const{glw:g}=this;g.enableVertexAttribArray(i),g.vertexAttribPointer(u,i,h.size,h.type,h.normalized,h.stride,h.offset)}disableAttribute(i){this.glw.disableVertexAttribArray(i)}disableAttributes(){for(const i in this.attributeLocations)this.disableAttribute(this.attributeLocations[i]);this.boundBufferCollection=null}canBatchShaderProps(i,u){return!1}bindRenderOp(i,u){this.bindBufferCollection(i.buffers),i.textures.length>0&&this.bindTextures(i.textures);const{glw:h,parentHasRenderTexture:g,renderToTexture:w}=i;if(!(w&&g)){if(g){const{width:s,height:m}=i.framebufferDimensions||{};h.uniform1f(this.getUniformLocation("u_pixelRatio"),1),h.uniform2f(this.getUniformLocation("u_resolution"),s??0,m??0)}else h.uniform1f(this.getUniformLocation("u_pixelRatio"),i.options.pixelRatio),h.uniform2f(this.getUniformLocation("u_resolution"),h.canvas.width,h.canvas.height);if(u){if(Fh(u,"$dimensions")){let s=u.$dimensions;s||(s=i.dimensions),h.uniform2f(this.getUniformLocation("u_dimensions"),s.width,s.height)}if(Fh(u,"$alpha")){let s=u.$alpha;s||(s=i.alpha),h.uniform1f(this.getUniformLocation("u_alpha"),s)}this.bindProps(u)}}}getUniformLocation(i){return this.uniformLocations[i]||null}bindBufferCollection(i){if(this.boundBufferCollection!==i){for(const u in this.attributeLocations){const h=i.getBuffer(u),g=i.getAttributeInfo(u);ot(h,`Buffer for "${u}" not found`),ot(g),this.bindBufferAttribute(this.attributeLocations[u],h,g)}this.boundBufferCollection=i}}bindProps(i){}bindTextures(i){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}P(xs,"shaderSources");class qC extends xs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}}P(qC,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class KC extends xs{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});P(this,"supportsIndexedTextures",!0)}bindTextures(i){const{renderer:u,glw:h}=this;if(i.length>u.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${u.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);i.forEach((w,s)=>{h.activeTexture(s),h.bindTexture(w.ctxTexture)});const g=Array.from(Array(i.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),g)}}P(KC,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:i=>`
      #define txUnits ${i}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${i}], int idx, vec2 uv) {
        ${Array.from(Array(i).keys()).map(u=>`
          ${u!==0?"else ":""}if (idx == ${u}) {
            return texture2D(textures[${u}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class ri{constructor(o){P(this,"priority",1);P(this,"name","");P(this,"ref");P(this,"target");P(this,"passParameters","");P(this,"declaredUniforms","");P(this,"uniformInfo",{});const{ref:i,target:u,props:h={}}=o;this.ref=i,this.target=u;const g={},w=[];let s="";const m=this.constructor.uniforms||{};for(const S in m){const v=m[S],y=v.type,I=`${i}_${S}`;let D="";v.size&&(D=`[${v.size(h)}]`),w.push(I),s+=`uniform ${y} ${I}${D};`,g[S]={name:I,uniform:m[S].method}}this.passParameters=w.join(","),this.declaredUniforms=s,this.uniformInfo=g}static getEffectKey(o){return""}static getMethodParameters(o,i){const u=[];for(const h in o){const g=o[h];let w="";g.size&&(w=`[${g.size(i)}]`),u.push(`${g.type} ${h}${w}`)}return u.join(",")}static resolveDefaults(o){return{}}static makeEffectKey(o){return!1}}P(ri,"uniforms",{}),P(ri,"methods"),P(ri,"onShaderMask"),P(ri,"onColorize"),P(ri,"onEffectMask");const km=new Map,$_=(f,o)=>{const i=JSON.stringify(f);if(km.has(i))return km.get(i);f=f??[];const u=[],h=f.length;let g=0;for(;g<h;g++){const{name:w,type:s,props:m}=f[g],S={name:w,type:s,props:{}},v=o[s],y=v.resolveDefaults(m),I=v.uniforms,D=Object.keys(I),T=D.length;let L=0;for(;L<T;L++){const B=D[L],N=I[B],z={value:y[B],programValue:void 0,method:N.method,updateOnBind:N.updateOnBind||!1,hasValidator:N.validator!==void 0,hasProgramValueUpdater:N.updateProgramValue!==void 0},F=z.hasValidator&&N.validator(y[B],y)||y[B];y[B]!==F&&(z.validatedValue=F),z.hasProgramValueUpdater&&N.updateProgramValue(z),z.programValue===void 0&&(z.programValue=z.value),S.props[B]=z}u.push(S)}return km.set(i,u),u},yr=class yr extends xs{constructor(i,u,h){const g=yr.createShader(u,h);super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...g.uniforms],shaderSources:{vertex:g.vertex,fragment:g.fragment}});P(this,"effects",[]);this.effects=g.effects}bindTextures(i){const{glw:u}=this;u.activeTexture(0),u.bindTexture(i[0].ctxTexture)}bindUniformMethods(i){const u=this.glw,h=i.effects,g=h.length;for(let w=0;w<g;w++){const s=this.effects[w].uniformInfo,m=h[w],S=Object.keys(m.props),v=S.length;for(let y=0;y<v;y++){const I=S[y],D=m.props[I].method,T=this.getUniformLocation(s[I].name);if(D==="uniform2fv"||D==="uniform2iv"||D==="uniform3iv"||D==="uniform4fv"||D==="uniform4iv"||D==="uniformMatrix2fv"||D==="uniformMatrix3fv"||D==="uniformMatrix4fv"||D==="uniform1f"||D==="uniform1fv"||D==="uniform1i"||D==="uniform1iv"){m.props[I].setUniformValue=function(){u[D](T,this.programValue)};continue}if(D==="uniform2f"||D==="uniform2i"){m.props[I].setUniformValue=function(){u[D](T,this.programValue[0],this.programValue[1])};continue}if(D==="uniform3f"||D==="uniform3i"){m.props[I].setUniformValue=function(){u[D](T,this.programValue[0],this.programValue[1],this.programValue[2])};continue}if(D==="uniform4f"||D==="uniform4i"){m.props[I].setUniformValue=function(){u[D](T,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])};continue}}}}bindProps(i){var w;const u=i.effects,h=u.length;let g=0;for(;g<h;g++){const s=u[g],m=Object.keys(s.props),S=m.length;let v=0;for(;v<S;v++){const y=m[v],I=s.props[y];if(I.updateOnBind===!0){const D=(w=this.renderer.shManager.getRegisteredEffects()[s.type])==null?void 0:w.uniforms[y];D==null||D.updateProgramValue(s.props[y],i)}I.setUniformValue()}}}canBatchShaderProps(i,u){if(i.$alpha!==u.$alpha||i.$dimensions.width!==u.$dimensions.width||i.$dimensions.height!==u.$dimensions.height||i.effects.length!==u.effects.length)return!1;const h=i.effects.length;let g=0;for(;g<h;g++){const w=i.effects[g],s=u.effects[g];if(w.type!==s.type)return!1;for(const m in w.props)if(s.props&&!s.props[m]||w.props[m].value!==s.props[m].value)return!1}return!0}static createShader(i,u){const h={},g={};let w="";const s=[],m=[],S=i.effects.map(T=>{const L=u[T.type],B=L.getEffectKey(T.props||{});h[B]=h[B]?++h[B]:1;const N=h[B];N===1&&m.push({key:B,type:T.type,props:T.props});const z=new L({ref:`${B}${N===1?"":N}`,target:B,props:T.props});return w+=z.declaredUniforms,s.push(...Object.values(z.uniformInfo)),z});let v="";m==null||m.forEach(T=>{const L=u[T.type],B=L.resolveDefaults(T.props??{}),N=[];for(const oe in L.methods){let fe=oe;const le=L.methods[oe];g[oe]&&g[oe]!==le&&(fe=yr.resolveMethodDuplicate(oe,le,g)),g[fe]=le.replace("function",fe),N.push({m:oe,cm:fe})}let z=L.onShaderMask instanceof Function?L.onShaderMask(B):L.onShaderMask,F=L.onColorize instanceof Function?L.onColorize(B):L.onColorize,H=L.onEffectMask instanceof Function?L.onEffectMask(B):L.onEffectMask;N.forEach(oe=>{const{m:fe,cm:le}=oe,A=new RegExp(`\\$${fe}`,"g");z&&(z=z.replace(A,le)),F&&(F=F.replace(A,le)),H&&(H=H.replace(A,le))});const X=L.getMethodParameters(L.uniforms,B),$=X.length>0?`, ${X}`:"";z&&(v+=`
        float fx_${T.key}_onShaderMask(float shaderMask ${$}) {
          ${z}
        }
        `),F&&(v+=`
          vec4 fx_${T.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${$}) {
            ${F}
          }
        `),H&&(v+=`
          vec4 fx_${T.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${$}) {
            ${H}
          }
        `)});let y="";for(const T in g)y+=g[T];let I="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",D=`

    `;for(let T=0;T<S.length;T++){const L=S[T],B=L.passParameters.length>0?`, ${L.passParameters}`:"",N=u[L.name];N.onShaderMask&&(D+=`
        shaderMask = fx_${L.target}_onShaderMask(shaderMask ${B});
        `),N.onColorize&&(D+=`
        maskColor = fx_${L.target}_onColorize(shaderMask, maskColor, shaderColor${B});
        `),N.onEffectMask&&(I=`fx_${L.target}_onEffectMask(shaderMask, maskColor, shaderColor${B})`);const z=S[T+1];(z===void 0||u[z.name].onEffectMask)&&(D+=`
          shaderColor = ${I};
        `)}return{effects:S,uniforms:s,fragment:yr.fragment(w,y,v,D),vertex:yr.vertex()}}static resolveMethodDuplicate(i,u,h,g=0){const w=i+(g>0?g:"");return h[w]&&h[w]!==u?this.resolveMethodDuplicate(i,u,h,++g):w}static resolveDefaults(i,u){return ot(u),{effects:$_(i.effects??[],u),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(i,u){var g;let h="";return(g=i.effects)==null||g.forEach(w=>{const m=u[w.type].getEffectKey(w.props||{});h+=`,${m}`}),`DynamicShader${h}`}};P(yr,"z$__type__Props"),P(yr,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),P(yr,"fragment",(i,u,h,g)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${i}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${u}

    ${h}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${g}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Ba=yr;class Xm extends xs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(o){return{radius:o.radius||10,$dimensions:{width:0,height:0}}}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}bindProps(o){const i=Math.min(o.$dimensions.width,o.$dimensions.height)/(2*o.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),o.radius*Math.min(i,1))}canBatchShaderProps(o,i){return o.radius===i.radius&&o.$dimensions.width===i.$dimensions.width&&o.$dimensions.height===i.$dimensions.height}}P(Xm,"z$__type__Props"),P(Xm,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const z_=new Float32Array([1,0,0,0,1,0,0,0,1]),_l=class _l extends xs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}bindProps(o){const i=_l.resolveDefaults(o);for(const u in i)if(u==="transform")this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),i[u]);else if(u==="scrollY")this.glw.uniform1f(this.getUniformLocation("u_scrollY"),i[u]);else if(u==="color"){const h=Ul(i.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),h)}else u==="size"?this.glw.uniform1f(this.getUniformLocation("u_size"),i[u]):u==="distanceRange"?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),i[u]):u==="debug"&&this.glw.uniform1i(this.getUniformLocation("u_debug"),i[u]?1:0)}static resolveDefaults(o={}){return{transform:o.transform??z_,scrollY:o.scrollY??0,color:o.color??4294967295,size:o.size??16,distanceRange:o.distanceRange??1,debug:o.debug??!1}}};P(_l,"z$__type__Props"),P(_l,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let qm=_l;const Xa=f=>{f.programValue===void 0&&(f.programValue=new Float32Array(4));const o=f.value,i=f.programValue;i[0]=(o>>>24)/255,i[1]=(o>>>16&255)/255,i[2]=(o>>>8&255)/255,i[3]=(o&255)/255},V_=f=>{const o=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const i=f.programValue;i[0]=o[0],i[1]=o[1]}else f.programValue=new Float32Array(o)},H_=f=>{const o=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const i=f.programValue;i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3]}else f.programValue=new Float32Array(o)},YC=f=>{const o=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const i=o.length,u=f.programValue;for(let h=0;h<i;h++)u[h]=o[h]}else f.programValue=new Float32Array(o)},lg=f=>{const o=Array.isArray(f);if(o){if(o&&f.length===4)return f;if(o&&f.length===2)return[f[0],f[1],f[0],f[1]];if(o&&f.length===3)return[f[0],f[1],f[2],f[0]]}else return[f,f,f,f];return[f[0],f[0],f[0],f[0]]},QC=(f,o)=>{f.programValue===void 0&&(f.programValue=new Float32Array(4));const i=f.programValue,u=f.validatedValue||f.value;if(o===void 0&&f.$dimensions===void 0){i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3];return}let h=f.$dimensions;if(o!==void 0){const{$dimensions:I}=o;if(h!==void 0&&(h.width===I.width||h.height===I.height))return;h===void 0&&(h={width:I==null?void 0:I.width,height:I==null?void 0:I.height},f.$dimensions=h)}const{width:g,height:w}=h,[s,m,S,v]=u,y=Math.min(Math.min(Math.min(g/Math.max(g,s+m),g/Math.max(g,S+v)),Math.min(w/Math.max(w,s+S),w/Math.max(w,m+v))),1);i[0]=s*y,i[1]=m*y,i[2]=S*y,i[3]=v*y};class Ia extends ri{constructor(){super(...arguments);P(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(i){return{radius:i.radius??10}}}P(Ia,"z$__type__Props"),P(Ia,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:lg,updateProgramValue:QC}}),P(Ia,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),P(Ia,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),P(Ia,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class wl extends ri{constructor(){super(...arguments);P(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(wl,"z$__type__Props"),P(wl,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Xa,method:"uniform4fv",type:"vec4"}}),P(wl,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),P(wl,"onColorize",`
    return color;
  `);const Ur=class Ur extends ri{constructor(){super(...arguments);P(this,"name","linearGradient")}static getEffectKey(i){return i.colors.value?`linearGradient${i.colors.value.length}`:`linearGradient${i.colors.length}`}static resolveDefaults(i){const u=i.colors??[4278190080,4294967295];let h=i.stops||[];if(h.length===0||h.length!==u.length){const g=u.length;let w=0;const s=h;for(;w<g;w++)h[w]?(s[w]=h[w],h[w-1]===void 0&&s[w-2]!==void 0&&(s[w-1]=s[w-2]+(h[w]-s[w-2])/2)):s[w]=w*(1/(u.length-1));h=s}return{colors:u,stops:h,angle:i.angle??0}}};P(Ur,"z$__type__Props"),P(Ur,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:i=>i.reduce((u,h)=>u.concat(Ul(h)),[]),updateProgramValue:YC,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),P(Ur,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),P(Ur,"ColorLoop",i=>{let u="";for(let h=2;h<i;h++)u+=`colorOut = mix(colorOut, colors[${h}], clamp((dist - stops[${h-1}]) / (stops[${h}] - stops[${h-1}]), 0.0, 1.0));`;return u}),P(Ur,"onColorize",i=>{const u=i.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${Ur.ColorLoop(u)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let Km=Ur;class Ym extends ri{constructor(){super(...arguments);P(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(i){return{amount:i.amount??1}}}P(Ym,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),P(Ym,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Ma extends ri{constructor(){super(...arguments);P(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(Ma,"z$__type__Props"),P(Ma,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Xa,method:"uniform4fv",type:"vec4"}}),P(Ma,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Ma,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Ma,"onColorize",`
    return color;
  `);class _a extends ri{constructor(){super(...arguments);P(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(_a,"z$__type__Props"),P(_a,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Xa,method:"uniform4fv",type:"vec4"}}),P(_a,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(_a,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(_a,"onColorize",`
    return color;
  `);class Ra extends ri{constructor(){super(...arguments);P(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(Ra,"z$__type__Props"),P(Ra,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Xa,method:"uniform4fv",type:"vec4"}}),P(Ra,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Ra,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Ra,"onColorize",`
    return color;
  `);class La extends ri{constructor(){super(...arguments);P(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(La,"z$__type__Props"),P(La,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Xa,method:"uniform4fv",type:"vec4"}}),P(La,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(La,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(La,"onColorize",`
    return color;
  `);class Sl extends ri{constructor(){super(...arguments);P(this,"name","glitch")}static getEffectKey(i){return"glitch"}static resolveDefaults(i){return{amplitude:i.amplitude??.2,narrowness:i.narrowness??4,blockiness:i.blockiness??2,minimizer:i.minimizer??8,time:i.time??Date.now()}}}P(Sl,"z$__type__Props"),P(Sl,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:i=>{const u=i.value=(Date.now()-i.value)%1e3;i.programValue=u},type:"float"}}),P(Sl,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),P(Sl,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class Rh extends ri{constructor(){super(...arguments);P(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(i){return{fade:i.fade??10}}}P(Rh,"z$__type__Props"),P(Rh,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:lg,updateProgramValue:H_}}),P(Rh,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const ps=class ps extends ri{constructor(){super(...arguments);P(this,"name","radialGradient")}static getEffectKey(i){return i.colors.value?`radialGradient${i.colors.value.length}`:`radialGradient${i.colors.length}`}static resolveDefaults(i){const u=i.colors??[4278190080,4294967295];let h=i.stops||[];if(h.length===0||h.length!==u.length){const g=u.length;let w=0;const s=h;for(;w<g;w++)h[w]?(s[w]=h[w],h[w-1]===void 0&&s[w-2]!==void 0&&(s[w-1]=s[w-2]+(h[w]-s[w-2])/2)):s[w]=w*(1/(u.length-1));h=s}return{colors:u,stops:h,width:i.width??0,height:i.height??i.width??0,pivot:i.pivot??[.5,.5]}}};P(ps,"z$__type__Props"),P(ps,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:V_,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:i=>i.reduce((u,h)=>u.concat(Ul(h)),[]),updateProgramValue:YC,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),P(ps,"ColorLoop",i=>{let u="";for(let h=2;h<i;h++)u+=`colorOut = mix(colorOut, colors[${h}], clamp((dist - stops[${h-1}]) / (stops[${h}] - stops[${h-1}]), 0.0, 1.0));`;return u}),P(ps,"onColorize",i=>{const u=i.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${ps.ColorLoop(u)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let Qm=ps;class Da extends ri{constructor(){super(...arguments);P(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(i){return{width:i.width??10,progress:i.progress??.5,offset:i.offset??0,range:i.range??Math.PI*2,rounded:i.rounded??!1,radius:i.radius??1,color:i.color??4294967295}}}P(Da,"z$__type__Props"),P(Da,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:i=>i?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Xa,method:"uniform4fv",type:"vec4"}}),P(Da,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),P(Da,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),P(Da,"onColorize",`
    return color;
  `);class Pa extends ri{constructor(){super(...arguments);P(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(i){return{x:i.x||0,y:i.y||0,width:i.width||50,height:i.height||50,radius:i.radius??0}}}P(Pa,"z$__type__Props"),P(Pa,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:lg,updateProgramValue:QC}}),P(Pa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),P(Pa,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),P(Pa,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const G_="RoundedRectangle";class td extends XC{constructor(i){super();P(this,"shType");this.shType=i}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class W_{constructor(o,i,u,h){P(this,"type");P(this,"shader");P(this,"resolvedProps");P(this,"props");this.type=o,this.shader=i,this.resolvedProps=u;const g=Object.keys(u),w=g.length,s={};for(let m=0;m<w;m++){const S=g[m];Object.defineProperty(s,S,{get:()=>this.resolvedProps[S],set:v=>{this.resolvedProps[S]=v,h.requestRender()}})}this.props=s}getResolvedProps(){return this.resolvedProps}}class X_{constructor(o,i,u){P(this,"shader");P(this,"resolvedProps");P(this,"props");P(this,"type");this.shader=o,this.type="DynamicShader",this.resolvedProps=i;const h=u.getRegisteredEffects(),g={},w=i.effects,s=w.length;for(let m=0;m<s;m++){const{name:S,props:v,type:y}=w[m];if(S===void 0)continue;const I={},D=Object.keys(v),T=D.length;for(let L=0;L<T;L++){const B=D[L];Object.defineProperty(I,B,{get:()=>this.resolvedProps.effects[m].props[B].value,set:N=>{var F,H;const z=this.resolvedProps.effects[m].props[B];z.value=N,z.hasValidator&&(N=z.validatedValue=(F=h[y].uniforms[B])==null?void 0:F.validator(N,v)),z.hasProgramValueUpdater?(H=h[y].uniforms[B])==null||H.updateProgramValue(z):z.programValue=N,u.renderer.stage.requestRender()}})}Object.defineProperty(g,S,{get:()=>I})}this.props=g}getResolvedProps(){return this.resolvedProps}}class q_{constructor(){P(this,"shCache",new Map);P(this,"shConstructors",{});P(this,"attachedShader",null);P(this,"effectConstructors",{});P(this,"renderer");this.registerShaderType("DefaultShader",qC),this.registerShaderType("DefaultShaderBatched",KC),this.registerShaderType("RoundedRectangle",Xm),this.registerShaderType("DynamicShader",Ba),this.registerShaderType("SdfShader",qm),this.registerEffectType("border",wl),this.registerEffectType("borderBottom",Ra),this.registerEffectType("borderLeft",La),this.registerEffectType("borderRight",Ma),this.registerEffectType("borderTop",_a),this.registerEffectType("fadeOut",Rh),this.registerEffectType("linearGradient",Km),this.registerEffectType("radialGradient",Qm),this.registerEffectType("grayscale",Ym),this.registerEffectType("glitch",Sl),this.registerEffectType("radius",Ia),this.registerEffectType("radialProgress",Da),this.registerEffectType("holePunch",Pa)}registerShaderType(o,i){this.shConstructors[o]=i}registerEffectType(o,i){this.effectConstructors[o]=i}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(o,i){if(!this.renderer)throw new Error("Renderer is not been defined");const u=this.shConstructors[o];if(!u)throw new Error(`Shader type "${o}" is not registered`);if(this.renderer.mode==="canvas"&&u.prototype instanceof xs)return this._createShaderCtr(o,new td(o),i);if(o==="DynamicShader")return this.loadDynamicShader(i);const h=u.resolveDefaults(i),g=u.makeCacheKey(h)||u.name;if(g&&this.shCache.has(g))return this._createShaderCtr(o,this.shCache.get(g),h);const w=new u(this.renderer,i);return g&&this.shCache.set(g,w),this._createShaderCtr(o,w,h)}loadDynamicShader(o){if(!this.renderer)throw new Error("Renderer is not been defined");const i=Ba.resolveDefaults(o,this.effectConstructors),u=Ba.makeCacheKey(i,this.effectConstructors);if(u&&this.shCache.has(u))return this._createDynShaderCtr(this.shCache.get(u),i);const h=new Ba(this.renderer,o,this.effectConstructors);return u&&this.shCache.set(u,h),this._createDynShaderCtr(h,i)}_createShaderCtr(o,i,u){return new W_(o,i,u,this.renderer.stage)}_createDynShaderCtr(o,i){return o.bindUniformMethods(i),new X_(o,i,this)}useShader(o){this.attachedShader!==o&&(this.attachedShader&&this.attachedShader.detach(),o.attach(),this.attachedShader=o)}}const K_={x:(f,o)=>{f.props.x=o},y:(f,o)=>{f.props.y=o},width:(f,o)=>{f.props.width=o},height:(f,o)=>{f.props.height=o},color:(f,o)=>{f.props.color=o},zIndex:(f,o)=>{f.props.zIndex=o},fontFamily:(f,o)=>{f.props.fontFamily=o},fontWeight:(f,o)=>{f.props.fontWeight=o},fontStyle:(f,o)=>{f.props.fontStyle=o},fontStretch:(f,o)=>{f.props.fontStretch=o},fontSize:(f,o)=>{f.props.fontSize=o},text:(f,o)=>{f.props.text=o},textAlign:(f,o)=>{f.props.textAlign=o},contain:(f,o)=>{f.props.contain=o},offsetY:(f,o)=>{f.props.offsetY=o},scrollable:(f,o)=>{f.props.scrollable=o},scrollY:(f,o)=>{f.props.scrollY=o},letterSpacing:(f,o)=>{f.props.letterSpacing=o},lineHeight:(f,o)=>{f.props.lineHeight=o},maxLines:(f,o)=>{f.props.maxLines=o},textBaseline:(f,o)=>{f.props.textBaseline=o},verticalAlign:(f,o)=>{f.props.verticalAlign=o},overflowSuffix:(f,o)=>{f.props.overflowSuffix=o},debug:(f,o)=>{f.props.debug=o}};class fg{constructor(o){P(this,"stage");P(this,"set");this.stage=o;const i={...K_,...this.getPropertySetters()},u={};Object.keys(i).forEach(h=>{Object.defineProperty(u,h,{value:(g,w)=>{g.props[h]!==w&&(i[h](g,w),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=u}setStatus(o,i,u){o.status!==i&&(o.status=i,o.emitter.emit(i,u))}setIsRenderable(o,i){o.isRenderable=i}destroyState(o){this.setStatus(o,"destroyed"),o.emitter.removeAllListeners()}scheduleUpdateState(o){o.updateScheduled||(o.updateScheduled=!0,queueMicrotask(()=>{o.status!=="destroyed"&&(o.updateScheduled=!1,this.updateState(o))}))}}class Y_{constructor(){P(this,"data",{})}reset(){this.data={}}increment(o){this.data[o]||(this.data[o]=0),this.data[o]++}getData(){return{...this.data}}}class Q_{constructor(o,i){P(this,"stage");P(this,"memUsed",0);P(this,"loadedTextures",new Map);P(this,"orphanedTextures",[]);P(this,"criticalThreshold");P(this,"targetThreshold");P(this,"cleanupInterval");P(this,"debugLogging");P(this,"lastCleanupTime",0);P(this,"criticalCleanupRequested",!1);P(this,"frameTime",0);this.stage=o;const{criticalThreshold:u}=i;this.criticalThreshold=Math.round(u);const h=Math.max(0,Math.min(1,i.targetThresholdLevel));if(this.targetThreshold=Math.round(u*h),this.cleanupInterval=i.cleanupInterval,this.debugLogging=i.debugLogging,this.memUsed=Math.round(i.baselineMemoryAllocation),i.debugLogging){let g=0;setInterval(()=>{g!==this.memUsed&&(g=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${YS(this.memUsed)} mb / ${YS(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}u===0&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(o){this.orphanedTextures.includes(o)&&this.removeFromOrphanedTextures(o),o.preventCleanup===!1&&this.orphanedTextures.push(o)}removeFromOrphanedTextures(o){const i=this.orphanedTextures.indexOf(o);i!==-1&&this.orphanedTextures.splice(i,1)}setTextureMemUse(o,i){if(this.loadedTextures.has(o)&&(this.memUsed-=this.loadedTextures.get(o)),i===0){this.loadedTextures.delete(o);return}else this.memUsed+=i,this.loadedTextures.set(o,i);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){const o=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,o===!0&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${o}`);const i=this.targetThreshold,u=this.stage.txManager,h=ms();for(;this.memUsed>=i&&this.orphanedTextures.length>0&&(o||ms()-h<10);){const g=this.orphanedTextures.shift();g.renderable!==!0&&(g.free(),u.removeTextureFromCache(g))}this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),(this.debugLogging===!0||Wa()===!1)&&console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`))}getMemoryInfo(){let o=0;const i=[...this.loadedTextures.keys()].reduce((u,h)=>(o+=h.renderable?1:0,u+(h.renderable?this.loadedTextures.get(h):0)),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:i,memUsed:this.memUsed,renderableTexturesLoaded:o,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.memUsed-i}}}class ZC{constructor(o,i){P(this,"textureSource");P(this,"memManager");P(this,"state","freed");this.memManager=o,this.textureSource=i}setTextureMemUse(o){this.memManager.setTextureMemUse(this.textureSource,o)}get renderable(){return this.textureSource.renderable}}class JC{constructor(o){P(this,"options");P(this,"mode");P(this,"stage");P(this,"txManager");P(this,"txMemManager");P(this,"shManager");P(this,"rttNodes",[]);this.options=o,this.stage=o.stage,this.txManager=o.txManager,this.txMemManager=o.txMemManager,this.shManager=o.shManager}}class Z_ extends Gm{constructor(i,u,h){super(i,u);P(this,"textRenderer");P(this,"trState");P(this,"_textRendererOverride",null);P(this,"onTextLoaded",()=>{const{contain:i}=this,u=this.trState.props.width,h=this.trState.props.height,g=this.trState.textW||0,w=this.trState.textH||0;i==="both"?(this.props.width=u,this.props.height=h):i==="width"?(this.props.width=u,this.props.height=w):i==="none"&&(this.props.width=g,this.props.height=w),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});P(this,"onTextFailed",(i,u)=>{this.emit("failed",{type:"text",error:u})});this._textRendererOverride=u.textRendererOverride,this.textRenderer=h;const g=this.createState({x:this.absX,y:this.absY,width:u.width,height:u.height,textAlign:u.textAlign,color:u.color,zIndex:u.zIndex,contain:u.contain,scrollable:u.scrollable,scrollY:u.scrollY,offsetY:u.offsetY,letterSpacing:u.letterSpacing,debug:u.debug,fontFamily:u.fontFamily,fontSize:u.fontSize,fontStretch:u.fontStretch,fontStyle:u.fontStyle,fontWeight:u.fontWeight,text:u.text,lineHeight:u.lineHeight,maxLines:u.maxLines,textBaseline:u.textBaseline,verticalAlign:u.verticalAlign,overflowSuffix:u.overflowSuffix});this.trState=g}get width(){return this.props.width}set width(i){this.props.width=i,this.textRenderer.set.width(this.trState,i),this.contain==="none"&&this.setUpdateType(De.Local)}get height(){return this.props.height}set height(i){this.props.height=i,this.textRenderer.set.height(this.trState,i),this.contain!=="both"&&this.setUpdateType(De.Local)}get color(){return this.trState.props.color}set color(i){this.textRenderer.set.color(this.trState,i)}get text(){return this.trState.props.text}set text(i){this.textRenderer.set.text(this.trState,i)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(i){this._textRendererOverride=i,this.textRenderer.destroyState(this.trState);const u=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!u){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=u,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(i){this.textRenderer.set.fontSize(this.trState,i)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(i){this.textRenderer.set.fontFamily(this.trState,i)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(i){this.textRenderer.set.fontStretch(this.trState,i)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(i){this.textRenderer.set.fontStyle(this.trState,i)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(i){this.textRenderer.set.fontWeight(this.trState,i)}get textAlign(){return this.trState.props.textAlign}set textAlign(i){this.textRenderer.set.textAlign(this.trState,i)}get contain(){return this.trState.props.contain}set contain(i){this.textRenderer.set.contain(this.trState,i)}get scrollable(){return this.trState.props.scrollable}set scrollable(i){this.textRenderer.set.scrollable(this.trState,i)}get scrollY(){return this.trState.props.scrollY}set scrollY(i){this.textRenderer.set.scrollY(this.trState,i)}get offsetY(){return this.trState.props.offsetY}set offsetY(i){this.textRenderer.set.offsetY(this.trState,i)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(i){this.textRenderer.set.letterSpacing(this.trState,i)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(i){this.textRenderer.set.lineHeight(this.trState,i)}get maxLines(){return this.trState.props.maxLines}set maxLines(i){this.textRenderer.set.maxLines(this.trState,i)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(i){this.textRenderer.set.textBaseline(this.trState,i)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(i){this.textRenderer.set.verticalAlign(this.trState,i)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(i){this.textRenderer.set.overflowSuffix(this.trState,i)}get debug(){return this.trState.props.debug}set debug(i){this.textRenderer.set.debug(this.trState,i)}update(i,u){super.update(i,u),ot(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return this.worldAlpha===0||this.isOutOfBounds()===!0?!1:!!(this.trState&&this.trState.props.text!=="")}setRenderable(i){super.setRenderable(i),this.textRenderer.setIsRenderable(this.trState,i)}renderQuads(i){var u;if(ot(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(i);return}this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(this.parentHasRenderTexture&&((u=this.props.parent)!=null&&u.rtt)&&(this.globalTransform=Ni.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),ot(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(i){const u=this.textRenderer.createState(i,this);return u.emitter.on("loaded",this.onTextLoaded),u.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(u),u}}function J_(f){const o={boolean:!0,string:!0,number:!0,undefined:!0},i=Object.keys(f);for(let u=0;u<i.length;u++){const h=i[u];if(!h)continue;const g=f[h],w=typeof g;w==="string"&&g.length>2048&&(console.warn(`Custom Data value for ${h} is too long, it will be truncated to 2048 characters`),f[h]=g.substring(0,2048)),o[w]||(console.warn(`Custom Data value for ${h} is not a boolean, string, or number, it will be ignored`),delete f[h])}return f}const eR=2e6;class tR{constructor(o){P(this,"options");P(this,"animationManager");P(this,"txManager");P(this,"txMemManager");P(this,"fontManager");P(this,"textRenderers");P(this,"shManager");P(this,"renderer");P(this,"root");P(this,"boundsMargin");P(this,"defShaderCtr");P(this,"strictBound");P(this,"preloadBound");P(this,"strictBounds");P(this,"defaultTexture",null);P(this,"eventBus");P(this,"deltaTime",0);P(this,"lastFrameTime",0);P(this,"currentFrameTime",0);P(this,"fpsNumFrames",0);P(this,"fpsElapsedTime",0);P(this,"numQuadsRendered",0);P(this,"renderRequested",!1);P(this,"frameEventQueue",[]);P(this,"fontResolveMap",{});P(this,"contextSpy",null);this.options=o;const{canvas:i,clearColor:u,appWidth:h,appHeight:g,boundsMargin:w,enableContextSpy:s,forceWebGL2:m,numImageWorkers:S,textureMemory:v,renderEngine:y,fontEngines:I}=o;this.eventBus=o.eventBus,this.txManager=new N_(this,S),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new Q_(this,v),this.shManager=new q_,this.animationManager=new M_,this.contextSpy=s?new Y_:null,this.strictBounds=o.strictBounds;let D=[0,0,0,0];w&&(D=Array.isArray(w)?w:[w,w,w,w]),this.boundsMargin=D,this.strictBound=Ua(0,0,h,g),this.preloadBound=Hm(this.strictBound,D);const T={stage:this,canvas:i,pixelRatio:o.devicePhysicalPixelRatio*o.deviceLogicalPixelRatio,clearColor:u??4278190080,bufferMemory:eR,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:m};this.renderer=new y(T);const L=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),d_(L),this.txManager.renderer=this.renderer,this.textRenderers={},I.forEach(N=>{const z=new N(this),F=z.type;if(F==="sdf"&&L==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}z instanceof fg&&(F==="canvas"?this.textRenderers.canvas=z:F==="sdf"&&(this.textRenderers.sdf=z))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new j_(this.textRenderers);const B=new Gm(this,{x:0,y:0,width:h,height:g,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=B,I_(this)}setClearColor(o){this.renderer.updateClearColor(o),this.renderRequested=!0}updateFrameTime(){const o=ms();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=o,this.deltaTime=this.lastFrameTime?o-this.lastFrameTime:100/6,this.txManager.frameTime=o,this.txMemManager.frameTime=o,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),ot(this.defaultTexture instanceof zh),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:o}=this;this.root&&o.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:o,renderRequested:i}=this;ot(o),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit),o.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),o.rttNodes.length>0&&o.renderRTTNodes(),this.addQuads(this.root),o==null||o.render(),this.calculateFps(),this.calculateQuads(),i&&(this.renderRequested=!1)}queueFrameEvent(o,i){this.frameEventQueue.push([o,i])}flushFrameEvents(){for(const[o,i]of this.frameEventQueue)this.eventBus.emit(o,i);this.frameEventQueue=[]}calculateFps(){var i,u;const{fpsUpdateInterval:o}=this.options;if(o&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=o)){const h=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:h,contextSpyData:((i=this.contextSpy)==null?void 0:i.getData())??null}),(u=this.contextSpy)==null||u.reset()}}calculateQuads(){const o=this.renderer.getQuadCount();o&&o!==this.numQuadsRendered&&(this.numQuadsRendered=o,this.queueFrameEvent("quadsUpdate",{quads:o}))}addQuads(o){ot(this.renderer),o.isRenderable===!0&&o.renderQuads(this.renderer);for(let i=0;i<o.children.length;i++){const u=o.children[i];u!==void 0&&(u.worldAlpha===0||u.strictBounds===!0&&u.renderState===di.OutOfBounds||this.addQuads(u))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(o,i=null){const u=`${o.fontFamily}${o.fontStyle}${o.fontWeight}${o.fontStretch}${i||""}`;if(this.fontResolveMap[u]!==void 0)return this.fontResolveMap[u];let h=i,g=!1;if(h){const s=this.textRenderers[h];s?s.canRenderFont(o)||(console.warn(`Cannot use override text renderer '${h}' for font`,o),h=null,g=!0):(console.warn(`Text renderer override '${h}' not found.`),h=null,g=!0)}if(!h){for(const[s,m]of Object.entries(this.textRenderers))if(m.canRenderFont(o)){h=s;break}!h&&this.textRenderers.canvas!==void 0&&(h="canvas")}if(g&&console.warn(`Falling back to text renderer ${String(h)}`),!h)return null;const w=this.textRenderers[h];return ot(w,"resolvedTextRenderer undefined"),this.fontResolveMap[u]=w,w}createShaderCtr(o,i){return this.shManager.loadShader(o,i)}createNode(o){const i=this.resolveNodeDefaults(o);return new Gm(this,i)}createTextNode(o){const i=o.fontSize??16,u={...this.resolveNodeDefaults(o),text:o.text??"",textRendererOverride:o.textRendererOverride??null,fontSize:i,fontFamily:o.fontFamily??"sans-serif",fontStyle:o.fontStyle??"normal",fontWeight:o.fontWeight??"normal",fontStretch:o.fontStretch??"normal",textAlign:o.textAlign??"left",contain:o.contain??"none",scrollable:o.scrollable??!1,scrollY:o.scrollY??0,offsetY:o.offsetY??0,letterSpacing:o.letterSpacing??0,lineHeight:o.lineHeight,maxLines:o.maxLines??0,textBaseline:o.textBaseline??"alphabetic",verticalAlign:o.verticalAlign??"middle",overflowSuffix:o.overflowSuffix??"...",debug:o.debug??{},shaderProps:null},h=this.resolveTextRenderer(u,o.textRendererOverride);if(!h)throw new Error(`No compatible text renderer found for ${u.fontFamily}`);return new Z_(this,u,h)}resolveNodeDefaults(o){const i=o.color??4294967295,u=o.colorTl??o.colorTop??o.colorLeft??i,h=o.colorTr??o.colorTop??o.colorRight??i,g=o.colorBl??o.colorBottom??o.colorLeft??i,w=o.colorBr??o.colorBottom??o.colorRight??i;let s={};return this.options.inspector===!0&&(s=J_(o.data??{})),{x:o.x??0,y:o.y??0,width:o.width??0,height:o.height??0,alpha:o.alpha??1,autosize:o.autosize??!1,clipping:o.clipping??!1,color:i,colorTop:o.colorTop??i,colorBottom:o.colorBottom??i,colorLeft:o.colorLeft??i,colorRight:o.colorRight??i,colorBl:g,colorBr:w,colorTl:u,colorTr:h,zIndex:o.zIndex??0,zIndexLocked:o.zIndexLocked??0,parent:o.parent??null,texture:o.texture??null,textureOptions:o.textureOptions??{},shader:o.shader??this.defShaderCtr,src:o.src??null,srcHeight:o.srcHeight,srcWidth:o.srcWidth,srcX:o.srcX,srcY:o.srcY,scale:o.scale??null,scaleX:o.scaleX??o.scale??1,scaleY:o.scaleY??o.scale??1,mount:o.mount??0,mountX:o.mountX??o.mount??0,mountY:o.mountY??o.mount??0,pivot:o.pivot??.5,pivotX:o.pivotX??o.pivot??.5,pivotY:o.pivotY??o.pivot??.5,rotation:o.rotation??0,rtt:o.rtt??!1,data:s,preventCleanup:o.preventCleanup??!1,imageType:o.imageType,strictBounds:o.strictBounds??this.strictBounds}}cleanup(){this.txMemManager.cleanup()}}class nR extends vr{constructor(i,u){var L,B,N,z,F;super();P(this,"root");P(this,"canvas");P(this,"settings");P(this,"stage");P(this,"inspector",null);const h={criticalThreshold:((L=i.textureMemory)==null?void 0:L.criticalThreshold)||124e6,targetThresholdLevel:((B=i.textureMemory)==null?void 0:B.targetThresholdLevel)||.5,cleanupInterval:((N=i.textureMemory)==null?void 0:N.cleanupInterval)||3e4,debugLogging:((z=i.textureMemory)==null?void 0:z.debugLogging)||!1,baselineMemoryAllocation:((F=i.textureMemory)==null?void 0:F.baselineMemoryAllocation)||26e6},g={appWidth:i.appWidth||1920,appHeight:i.appHeight||1080,textureMemory:h,boundsMargin:i.boundsMargin||0,deviceLogicalPixelRatio:i.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:i.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:i.clearColor??0,fpsUpdateInterval:i.fpsUpdateInterval||0,numImageWorkers:i.numImageWorkers!==void 0?i.numImageWorkers:2,enableContextSpy:i.enableContextSpy??!1,forceWebGL2:i.forceWebGL2??!1,inspector:i.inspector??!1,renderEngine:i.renderEngine,quadBufferSize:i.quadBufferSize??4*1024*1024,fontEngines:i.fontEngines,strictBounds:i.strictBounds??!0,textureProcessingTimeLimit:i.textureProcessingTimeLimit||10,canvas:i.canvas||document.createElement("canvas")};this.settings=g;const{appWidth:w,appHeight:s,deviceLogicalPixelRatio:m,devicePhysicalPixelRatio:S,inspector:v,canvas:y}=g,I=w*m,D=s*m;this.canvas=y,y.width=I*S,y.height=D*S,y.style.width=`${I}px`,y.style.height=`${D}px`,this.stage=new tR({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:h,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:this.settings.inspector!==null,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit}),this.root=this.stage.root;let T;if(typeof u=="string"?T=document.getElementById(u):T=u,!T)throw new Error("Could not find target element");T.appendChild(y),v&&!Wa()&&(this.inspector=new v(y,g))}createNode(i){const u=this.stage.createNode(i);return this.inspector?this.inspector.createNode(u):u}createTextNode(i){const u=this.stage.createTextNode(i);return this.inspector?this.inspector.createTextNode(u):u}destroyNode(i){return this.inspector&&this.inspector.destroyNode(i.id),i.destroy()}createTexture(i,u){return this.stage.txManager.createTexture(i,u)}createShader(i,u){return this.stage.shManager.loadShader(i,u)}createDynamicShader(i){return this.stage.shManager.loadDynamicShader({effects:i})}createEffect(i,u,h){return{name:h,type:i,props:u}}getNodeById(i){var g;const u=(g=this.stage)==null?void 0:g.root;if(!u)return null;const h=w=>{if(w.id===i)return w;for(const s of w.children){const m=h(s);if(m)return m}return null};return h(u)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}cleanup(){this.stage.cleanup()}setClearColor(i){this.stage.setClearColor(i)}}class eT extends vr{constructor(i){super();P(this,"fontFamily");P(this,"descriptors");P(this,"loaded",!1);P(this,"metrics",null);const{fontFamily:u,descriptors:h,metrics:g}=i;g&&(this.metrics={ascender:g.ascender/g.unitsPerEm,descender:g.descender/g.unitsPerEm,lineGap:g.lineGap/g.unitsPerEm}),this.fontFamily=u,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...h}}static convertToCssFontFaceDescriptors(i){return{style:i.style,weight:typeof i.weight=="number"?`${i.weight}`:i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,featureSettings:i.featureSettings,display:i.display}}}class Lh extends eT{constructor(i){super(i);P(this,"fontFace");P(this,"fontUrl");const{fontFamily:u,fontUrl:h}=i,g=h.replace(/\(|\)/g,""),w=this.descriptors;let s={style:w.style,weight:typeof w.weight=="number"?`${w.weight}`:w.weight,stretch:w.stretch,unicodeRange:w.unicodeRange,featureSettings:w.featureSettings,display:w.display};for(const S in s){const v=S;s[v]===void 0&&delete s[v]}const m=new FontFace(u,`url(${g})`,s);g.length>0?m.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=m,this.fontUrl=h}}class iR{}class tT extends iR{constructor(i,u,h,g,w,s,m,S,v,y,I,D,T){super();P(this,"glw");P(this,"options");P(this,"buffers");P(this,"shader");P(this,"shaderProps");P(this,"alpha");P(this,"clippingRect");P(this,"dimensions");P(this,"bufferIdx");P(this,"zIndex");P(this,"renderToTexture");P(this,"parentHasRenderTexture");P(this,"framebufferDimensions");P(this,"length",0);P(this,"numQuads",0);P(this,"textures",[]);P(this,"maxTextures");this.glw=i,this.options=u,this.buffers=h,this.shader=g,this.shaderProps=w,this.alpha=s,this.clippingRect=m,this.dimensions=S,this.bufferIdx=v,this.zIndex=y,this.renderToTexture=I,this.parentHasRenderTexture=D,this.framebufferDimensions=T,this.maxTextures=g.supportsIndexedTextures?i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(i){const{textures:u,maxTextures:h}=this;let g=-1;const w=u.length;for(let s=0;s<w;s++)if(u[s]===i){g=s;break}return g!==-1?g:w>=h?4294967295:(this.textures.push(i),w)}draw(){const{glw:i,shader:u,shaderProps:h,options:g}=this,{shManager:w}=g;w.useShader(u),u.bindRenderOp(this,h);const s=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:m,y:S,width:v,height:y}=this.clippingRect,I=this.parentHasRenderTexture?1:g.pixelRatio,D=g.canvas.height,T=Math.round(m*I),L=Math.round(v*I),B=Math.round(y*I);let N=Math.round(D-B-S*I);this.parentHasRenderTexture&&(N=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),i.setScissorTest(!0),i.scissor(T,N,L,B)}else i.setScissorTest(!1);i.drawElements(i.TRIANGLES,6*this.numQuads,i.UNSIGNED_SHORT,s)}}function oR(f){const o={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(o).forEach(u=>{o[u]=f.getParameter(f[u])}),o}function rR(f){const o={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(o).forEach(u=>{o[u]=f.getExtension(u)}),o}function sR(f,o){const i=~~(o/80),u=new Uint16Array(i*6);for(let g=0,w=0;g<i;g+=6,w+=4)u[g]=w,u[g+1]=w+1,u[g+2]=w+2,u[g+3]=w+2,u[g+4]=w+1,u[g+5]=w+3;const h=f.createBuffer();f.elementArrayBufferData(h,u,f.STATIC_DRAW)}function aR(f){return f!==null&&(typeof f=="object"&&f.constructor&&f.constructor.name==="HTMLImageElement"||typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement)}const Am=new Uint8Array([0,0,0,0]);class Hh extends ZC{constructor(i,u,h){super(u,h);P(this,"glw");P(this,"_nativeCtxTexture",null);P(this,"_w",0);P(this,"_h",0);this.glw=i}get ctxTexture(){return this.state==="freed"?(this.load(),null):(ot(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}load(){if(!(this.state==="loading"||this.state==="loaded")){if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this._nativeCtxTexture===null){this.state="failed",this.textureSource.setState("failed",new Error("Could not create WebGL Texture")),console.error("Could not create WebGL Texture");return}this.onLoadRequest().then(({width:i,height:u})=>{this.state!=="freed"&&(this.state="loaded",this._w=i,this._h=u,this.textureSource.setState("loaded",{width:i,height:u}),this.textureSource.freeTextureData())}).catch(i=>{this.state!=="freed"&&(this.state="failed",this.textureSource.setState("failed",i),this.textureSource.freeTextureData(),console.error(i))})}}async onLoadRequest(){const{glw:i}=this,u=this.textureSource.textureData;if(ot(u,"Texture data is null"),i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(Am.byteLength),!this._nativeCtxTexture)return ot(this.state==="freed"),{width:0,height:0};let h=0,g=0;i.activeTexture(0);const w=u.data,s=i.RGBA,m=4,S=1.1;if(typeof ImageBitmap<"u"&&w instanceof ImageBitmap||w instanceof ImageData||aR(w))h=w.width,g=w.height,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!u.premultiplyAlpha),i.texImage2D(0,s,s,i.UNSIGNED_BYTE,w),this.setTextureMemUse(g*h*m*S);else if(w===null)h=0,g=0,i.bindTexture(this._nativeCtxTexture),i.texImage2D(0,s,1,1,0,s,i.UNSIGNED_BYTE,Am),this.setTextureMemUse(Am.byteLength);else if("mipmaps"in w&&w.mipmaps){const{mipmaps:v,width:y=0,height:I=0,type:D,glInternalFormat:T}=w,L=D==="ktx"?new DataView(v[0]??new ArrayBuffer(0)):v[0];i.bindTexture(this._nativeCtxTexture),i.compressedTexImage2D(0,T,y,I,0,L),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),this.setTextureMemUse(L.byteLength)}else w&&w instanceof Uint8Array?(h=1,g=1,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!u.premultiplyAlpha),i.texImage2D(0,s,h,g,0,s,i.UNSIGNED_BYTE,w),this.setTextureMemUse(h*g*m)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",u);return{width:h,height:g}}free(){if(this.state==="freed"||(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:i}=this;i.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null,this.textureSource.freeTextureData()}createNativeCtxTexture(){const{glw:i}=this,u=i.createTexture();return u?(i.activeTexture(0),i.bindTexture(u),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),u):null}}class uR extends Hh{constructor(o,i,u){super(o,i,u)}async onLoadRequest(){var i,u;const o=this.textureSource.textureData;return ot(o,"SubTexture must have texture data"),o.data instanceof Uint8Array?{width:1,height:1}:{width:((i=o.data)==null?void 0:i.width)||0,height:((u=o.data)==null?void 0:u.height)||0}}}class nT{constructor(o){P(this,"config");this.config=o}getBuffer(o){var i;return(i=this.config.find(u=>u.attributes[o]))==null?void 0:i.buffer}getAttributeInfo(o){var i;return(i=this.config.find(u=>u.attributes[o]))==null?void 0:i.attributes[o]}}function lR(f){return self.WebGL2RenderingContext&&f instanceof self.WebGL2RenderingContext}class fR{constructor(o){P(this,"gl");P(this,"activeTextureUnit",0);P(this,"texture2dUnits");P(this,"texture2dParams",new WeakMap);P(this,"scissorEnabled");P(this,"scissorX");P(this,"scissorY");P(this,"scissorWidth");P(this,"scissorHeight");P(this,"blendEnabled");P(this,"blendSrcRgb");P(this,"blendDstRgb");P(this,"blendSrcAlpha");P(this,"blendDstAlpha");P(this,"boundArrayBuffer");P(this,"boundElementArrayBuffer");P(this,"curProgram");P(this,"canvas");P(this,"MAX_RENDERBUFFER_SIZE");P(this,"MAX_TEXTURE_SIZE");P(this,"MAX_VIEWPORT_DIMS");P(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");P(this,"MAX_TEXTURE_IMAGE_UNITS");P(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");P(this,"MAX_VERTEX_ATTRIBS");P(this,"MAX_VARYING_VECTORS");P(this,"MAX_VERTEX_UNIFORM_VECTORS");P(this,"MAX_FRAGMENT_UNIFORM_VECTORS");P(this,"TEXTURE_MAG_FILTER");P(this,"TEXTURE_MIN_FILTER");P(this,"TEXTURE_WRAP_S");P(this,"TEXTURE_WRAP_T");P(this,"LINEAR");P(this,"CLAMP_TO_EDGE");P(this,"RGB");P(this,"RGBA");P(this,"UNSIGNED_BYTE");P(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");P(this,"UNPACK_FLIP_Y_WEBGL");P(this,"FLOAT");P(this,"TRIANGLES");P(this,"UNSIGNED_SHORT");P(this,"ONE");P(this,"ONE_MINUS_SRC_ALPHA");P(this,"VERTEX_SHADER");P(this,"FRAGMENT_SHADER");P(this,"STATIC_DRAW");P(this,"COMPILE_STATUS");P(this,"LINK_STATUS");P(this,"DYNAMIC_DRAW");P(this,"COLOR_ATTACHMENT0");P(this,"INVALID_ENUM");P(this,"INVALID_OPERATION");this.gl=o,this.activeTextureUnit=o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0;const i=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(i).fill(void 0).map((h,g)=>(this.activeTexture(g),o.getParameter(o.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=o.isEnabled(o.SCISSOR_TEST);const u=o.getParameter(o.SCISSOR_BOX);this.scissorX=u[0],this.scissorY=u[1],this.scissorWidth=u[2],this.scissorHeight=u[3],this.blendEnabled=o.isEnabled(o.BLEND),this.blendSrcRgb=o.getParameter(o.BLEND_SRC_RGB),this.blendDstRgb=o.getParameter(o.BLEND_DST_RGB),this.blendSrcAlpha=o.getParameter(o.BLEND_SRC_ALPHA),this.blendDstAlpha=o.getParameter(o.BLEND_DST_ALPHA),this.boundArrayBuffer=o.getParameter(o.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=o.getParameter(o.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=o.getParameter(o.CURRENT_PROGRAM),this.canvas=o.canvas,this.MAX_RENDERBUFFER_SIZE=o.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=o.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=o.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=o.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=o.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=o.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=o.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=o.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=o.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=o.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=o.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=o.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=o.TEXTURE_WRAP_T,this.LINEAR=o.LINEAR,this.CLAMP_TO_EDGE=o.CLAMP_TO_EDGE,this.RGB=o.RGB,this.RGBA=o.RGBA,this.UNSIGNED_BYTE=o.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=o.UNPACK_FLIP_Y_WEBGL,this.FLOAT=o.FLOAT,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.ONE=o.ONE,this.ONE_MINUS_SRC_ALPHA=o.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.VERTEX_SHADER=o.VERTEX_SHADER,this.FRAGMENT_SHADER=o.FRAGMENT_SHADER,this.STATIC_DRAW=o.STATIC_DRAW,this.COMPILE_STATUS=o.COMPILE_STATUS,this.LINK_STATUS=o.LINK_STATUS,this.DYNAMIC_DRAW=o.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=o.COLOR_ATTACHMENT0,this.INVALID_ENUM=o.INVALID_ENUM,this.INVALID_OPERATION=o.INVALID_OPERATION}isWebGl2(){return lR(this.gl)}activeTexture(o){const{gl:i}=this;this.activeTextureUnit!==o&&(i.activeTexture(o+i.TEXTURE0),this.activeTextureUnit=o)}bindTexture(o){const{gl:i,activeTextureUnit:u,texture2dUnits:h}=this;h[u]!==o&&(h[u]=o,i.bindTexture(this.gl.TEXTURE_2D,o))}_getActiveTexture(){const{activeTextureUnit:o,texture2dUnits:i}=this;return i[o]}texParameteri(o,i){const{gl:u,texture2dParams:h}=this,g=this._getActiveTexture();if(!g)throw new Error("No active texture");let w=h.get(g);w||(w={},h.set(g,w)),w[o]!==i&&(w[o]=i,u.texParameteri(u.TEXTURE_2D,o,i))}texImage2D(o,i,u,h,g,w,s,m){const{gl:S}=this;w?S.texImage2D(S.TEXTURE_2D,o,i,u,h,g,w,s,m):S.texImage2D(S.TEXTURE_2D,o,i,u,h,g)}compressedTexImage2D(o,i,u,h,g,w){const{gl:s}=this;s.compressedTexImage2D(s.TEXTURE_2D,o,i,u,h,g,w)}pixelStorei(o,i){const{gl:u}=this;u.pixelStorei(o,i)}generateMipmap(){const{gl:o}=this;o.generateMipmap(o.TEXTURE_2D)}createTexture(){const{gl:o}=this;return o.createTexture()}deleteTexture(o){const{gl:i}=this;o&&this.texture2dParams.delete(o),i.deleteTexture(o)}viewport(o,i,u,h){const{gl:g}=this;g.viewport(o,i,u,h)}clearColor(o,i,u,h){const{gl:g}=this;g.clearColor(o,i,u,h)}setScissorTest(o){const{gl:i,scissorEnabled:u}=this;o!==u&&(o?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),this.scissorEnabled=o)}scissor(o,i,u,h){const{gl:g,scissorX:w,scissorY:s,scissorWidth:m,scissorHeight:S}=this;(o!==w||i!==s||u!==m||h!==S)&&(g.scissor(o,i,u,h),this.scissorX=o,this.scissorY=i,this.scissorWidth=u,this.scissorHeight=h)}setBlend(o){const{gl:i,blendEnabled:u}=this;o!==u&&(o?i.enable(i.BLEND):i.disable(i.BLEND),this.blendEnabled=o)}blendFunc(o,i){const{gl:u,blendSrcRgb:h,blendDstRgb:g,blendSrcAlpha:w,blendDstAlpha:s}=this;(o!==h||i!==g||o!==w||i!==s)&&(u.blendFunc(o,i),this.blendSrcRgb=o,this.blendDstRgb=i,this.blendSrcAlpha=o,this.blendDstAlpha=i)}createBuffer(){const{gl:o}=this;return o.createBuffer()}createFramebuffer(){const{gl:o}=this;return o.createFramebuffer()}bindFramebuffer(o){const{gl:i}=this;i.bindFramebuffer(i.FRAMEBUFFER,o)}framebufferTexture2D(o,i,u){const{gl:h}=this;h.framebufferTexture2D(h.FRAMEBUFFER,o,h.TEXTURE_2D,i,u)}clear(){const{gl:o}=this;o.clear(o.COLOR_BUFFER_BIT)}arrayBufferData(o,i,u){const{gl:h,boundArrayBuffer:g}=this;g!==o&&(h.bindBuffer(h.ARRAY_BUFFER,o),this.boundArrayBuffer=o),h.bufferData(h.ARRAY_BUFFER,i,u)}elementArrayBufferData(o,i,u){const{gl:h,boundElementArrayBuffer:g}=this;g!==o&&(h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.boundElementArrayBuffer=o),h.bufferData(h.ELEMENT_ARRAY_BUFFER,i,u)}vertexAttribPointer(o,i,u,h,g,w,s){const{gl:m,boundArrayBuffer:S}=this;S!==o&&(m.bindBuffer(m.ARRAY_BUFFER,o),this.boundArrayBuffer=o),m.vertexAttribPointer(i,u,h,g,w,s)}useProgram(o){const{gl:i,curProgram:u}=this;u!==o&&(i.useProgram(o),this.curProgram=o)}uniform1f(o,i){const{gl:u}=this;u.uniform1f(o,i)}uniform1fv(o,i){const{gl:u}=this;u.uniform1fv(o,i)}uniform1i(o,i){const{gl:u}=this;u.uniform1i(o,i)}uniform1iv(o,i){const{gl:u}=this;u.uniform1iv(o,i)}uniform2f(o,i,u){const{gl:h}=this;h.uniform2f(o,i,u)}uniform2fv(o,i){const{gl:u}=this;u.uniform2fv(o,i)}uniform2i(o,i,u){const{gl:h}=this;h.uniform2i(o,i,u)}uniform2iv(o,i){const{gl:u}=this;u.uniform2iv(o,i)}uniform3f(o,i,u,h){const{gl:g}=this;g.uniform3f(o,i,u,h)}uniform3fv(o,i){const{gl:u}=this;u.uniform3fv(o,i)}uniform3i(o,i,u,h){const{gl:g}=this;g.uniform3i(o,i,u,h)}uniform3iv(o,i){const{gl:u}=this;u.uniform3iv(o,i)}uniform4f(o,i,u,h,g){const{gl:w}=this;w.uniform4f(o,i,u,h,g)}uniform4fv(o,i){const{gl:u}=this;u.uniform4fv(o,i)}uniform4i(o,i,u,h,g){const{gl:w}=this;w.uniform4i(o,i,u,h,g)}uniform4iv(o,i){const{gl:u}=this;u.uniform4iv(o,i)}uniformMatrix2fv(o,i){const{gl:u}=this;u.uniformMatrix2fv(o,!1,i)}uniformMatrix3fv(o,i){const{gl:u}=this;u.uniformMatrix3fv(o,!1,i)}uniformMatrix4fv(o,i){const{gl:u}=this;u.uniformMatrix4fv(o,!1,i)}getParameter(o){const{gl:i}=this;return i.getParameter(o)}drawElements(o,i,u,h){const{gl:g}=this;g.drawElements(o,i,u,h)}getExtension(o){const{gl:i}=this;return i.getExtension(o)}getError(){const{gl:o}=this;return o.getError()}createVertexArray(){const{gl:o}=this;return ot(o instanceof WebGL2RenderingContext),o.createVertexArray()}bindVertexArray(o){const{gl:i}=this;ot(i instanceof WebGL2RenderingContext),i.bindVertexArray(o)}getAttribLocation(o,i){const{gl:u}=this;return u.getAttribLocation(o,i)}getUniformLocation(o,i){const{gl:u}=this;return u.getUniformLocation(o,i)}enableVertexAttribArray(o){const{gl:i}=this;i.enableVertexAttribArray(o)}disableVertexAttribArray(o){const{gl:i}=this;i.disableVertexAttribArray(o)}createShader(o){const{gl:i}=this;return i.createShader(o)}compileShader(o){const{gl:i}=this;i.compileShader(o)}attachShader(o,i){const{gl:u}=this;u.attachShader(o,i)}linkProgram(o){const{gl:i}=this;i.linkProgram(o)}deleteProgram(o){const{gl:i}=this;i.deleteProgram(o)}getShaderParameter(o,i){const{gl:u}=this;return u.getShaderParameter(o,i)}getShaderInfoLog(o){const{gl:i}=this;return i.getShaderInfoLog(o)}createProgram(){const{gl:o}=this;return o.createProgram()}getProgramParameter(o,i){const{gl:u}=this;return u.getProgramParameter(o,i)}getProgramInfoLog(o){const{gl:i}=this;return i.getProgramInfoLog(o)}shaderSource(o,i){const{gl:u}=this;u.shaderSource(o,i)}deleteShader(o){const{gl:i}=this;i.deleteShader(o)}}class tC extends Hh{constructor(i,u,h){super(i,u,h);P(this,"framebuffer");const g=i.createFramebuffer();ot(g,"Unable to create framebuffer"),this.framebuffer=g}async onLoadRequest(){const{glw:i}=this,u=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:h,height:g}=this.textureSource;return i.texImage2D(0,i.RGBA,h,g,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(h*g*4),i.bindFramebuffer(this.framebuffer),i.framebufferTexture2D(i.COLOR_ATTACHMENT0,u,0),i.bindFramebuffer(null),{width:h,height:g}}}const cR=24;class cg extends JC{constructor(i){super(i);P(this,"glw");P(this,"system");P(this,"quadBuffer");P(this,"fQuadBuffer");P(this,"uiQuadBuffer");P(this,"renderOps",[]);P(this,"curBufferIdx",0);P(this,"curRenderOp",null);P(this,"rttNodes",[]);P(this,"activeRttNode",null);P(this,"defShaderCtrl");P(this,"defaultShader");P(this,"quadBufferCollection");P(this,"clearColor",{raw:0,normalized:[0,0,0,0]});P(this,"quadBufferUsage",0);P(this,"numQuadsRendered",0);P(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:u,clearColor:h,bufferMemory:g}=i,w=c_(u,i.forceWebGL2,i.contextSpy),s=this.glw=new fR(w);s.viewport(0,0,u.width,u.height),this.updateClearColor(h),s.setBlend(!0),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),sR(s,g),this.system={parameters:oR(this.glw),extensions:rR(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const m=s.createBuffer();ot(m);const S=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new nT([{buffer:m,attributes:{a_position:{name:"a_position",size:2,type:s.FLOAT,normalized:!1,stride:S,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:s.FLOAT,normalized:!1,stride:S,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:s.UNSIGNED_BYTE,normalized:!0,stride:S,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:s.FLOAT,normalized:!1,stride:S,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:i}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,i.setScissorTest(!1),i.clear()}getShaderManager(){return this.shManager}createCtxTexture(i){return i instanceof Dl?new uR(this.glw,this.txMemManager,i):i instanceof Vh?new tC(this.glw,this.txMemManager,i):new Hh(this.glw,this.txMemManager,i)}addQuad(i){const{fQuadBuffer:u,uiQuadBuffer:h}=this;let g=i.texture;if(ot(g!==null,"Texture is required"),i.shaderProps!==null){if(Fh(i.shaderProps,"$dimensions")==!0){const N=i.shaderProps.$dimensions;N.width=i.width,N.height=i.height}Fh(i.shaderProps,"$alpha")===!0&&(i.shaderProps.$alpha=i.alpha)}let{curBufferIdx:w,curRenderOp:s}=this;const m={width:-1,height:-1};m.width=i.width,m.height=i.height;const S=i.shader||this.defaultShader;ot(S.getUniformLocation!==void 0,"Invalid WebGL shader"),this.reuseRenderOp(i)===!1&&(this.newRenderOp(S,i.shaderProps,i.alpha,m,i.clippingRect,w,i.rtt,i.parentHasRenderTexture,i.framebufferDimensions),s=this.curRenderOp,ot(s));let v=0,y=0,I=1,D=1;if(g.type===Nn.subTexture){const{x:N,y:z,width:F,height:H}=g.props,{width:X=0,height:$=0}=g.parentTexture.dimensions||{width:0,height:0};v=N/X,I=v+F/X,y=z/$,D=y+H/$,g=g.parentTexture}if(g.type===Nn.image&&i.textureOptions!==null&&i.textureOptions.resizeMode!==void 0&&g.dimensions!==null){const N=i.textureOptions.resizeMode,{width:z,height:F}=g.dimensions;if(N.type==="cover"){const H=i.width/z,X=i.height/F,$=Math.max(H,X),oe=1/$;if($&&H&&H<$){const fe=oe*i.width;v=(1-fe/z)*(N.clipX??.5),I=v+fe/z}if($&&X&&X<$){const fe=oe*i.height;y=(1-fe/F)*(N.clipY??.5),D=y+fe/F}}}let T=0;i.textureOptions!==null&&(i.textureOptions.flipX===!0&&([v,I]=[I,v]),T=+(i.textureOptions.flipY||!1)),T^+(g.type===Nn.renderToTexture)&&([y,D]=[D,y]);const L=g.ctxTexture;ot(L instanceof Hh);const B=this.addTexture(L,w);if(ot(this.curRenderOp!==null),i.renderCoords)u[w++]=i.renderCoords.x1,u[w++]=i.renderCoords.y1,u[w++]=v,u[w++]=y,h[w++]=i.colorTl,u[w++]=B,u[w++]=i.renderCoords.x2,u[w++]=i.renderCoords.y2,u[w++]=I,u[w++]=y,h[w++]=i.colorTr,u[w++]=B,u[w++]=i.renderCoords.x4,u[w++]=i.renderCoords.y4,u[w++]=v,u[w++]=D,h[w++]=i.colorBl,u[w++]=B,u[w++]=i.renderCoords.x3,u[w++]=i.renderCoords.y3,u[w++]=I,u[w++]=D,h[w++]=i.colorBr,u[w++]=B;else if(i.tb!==0||i.tc!==0)u[w++]=i.tx,u[w++]=i.ty,u[w++]=v,u[w++]=y,h[w++]=i.colorTl,u[w++]=B,u[w++]=i.tx+i.width*i.ta,u[w++]=i.ty+i.width*i.tc,u[w++]=I,u[w++]=y,h[w++]=i.colorTr,u[w++]=B,u[w++]=i.tx+i.height*i.tb,u[w++]=i.ty+i.height*i.td,u[w++]=v,u[w++]=D,h[w++]=i.colorBl,u[w++]=B,u[w++]=i.tx+i.width*i.ta+i.height*i.tb,u[w++]=i.ty+i.width*i.tc+i.height*i.td,u[w++]=I,u[w++]=D,h[w++]=i.colorBr,u[w++]=B;else{const N=i.tx+i.width*i.ta,z=i.ty+i.height*i.td;u[w++]=i.tx,u[w++]=i.ty,u[w++]=v,u[w++]=y,h[w++]=i.colorTl,u[w++]=B,u[w++]=N,u[w++]=i.ty,u[w++]=I,u[w++]=y,h[w++]=i.colorTr,u[w++]=B,u[w++]=i.tx,u[w++]=z,u[w++]=v,u[w++]=D,h[w++]=i.colorBl,u[w++]=B,u[w++]=N,u[w++]=z,u[w++]=I,u[w++]=D,h[w++]=i.colorBr,u[w++]=B}this.curRenderOp.length+=cR,this.curRenderOp.numQuads++,this.curBufferIdx=w}newRenderOp(i,u,h,g,w,s,m,S,v){const y=new tT(this.glw,this.options,this.quadBufferCollection,i,u,h,w,g,s,0,m,S,v);this.curRenderOp=y,this.renderOps.push(y)}addTexture(i,u,h){const{curRenderOp:g}=this;ot(g);const w=g.addTexture(i);if(w===4294967295){if(h)throw new Error("Unable to add texture to render op");return this.newRenderOp(g.shader,g.shaderProps,g.alpha,g.dimensions,g.clippingRect,u),this.addTexture(i,u,!0)}return w}reuseRenderOp(i){var S;const{shader:u,shaderProps:h,parentHasRenderTexture:g,rtt:w,clippingRect:s}=i,m=u||this.defaultShader;return!(((S=this.curRenderOp)==null?void 0:S.shader)!==m||!v_(this.curRenderOp.clippingRect,s)||g||w||this.curRenderOp.shader!==this.defaultShader&&(!h||!this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,h)))}addRenderOp(i){this.renderOps.push(i),this.curRenderOp=null}render(i="screen"){const{glw:u,quadBuffer:h}=this,g=new Float32Array(h,0,this.curBufferIdx),w=this.quadBufferCollection.getBuffer("a_position")??null;u.arrayBufferData(w,g,u.STATIC_DRAW);for(let m=0,S=this.renderOps.length;m<S;m++)this.renderOps[m].draw();this.quadBufferUsage=this.curBufferIdx*g.BYTES_PER_ELEMENT;const s=4*(6*g.BYTES_PER_ELEMENT);this.numQuadsRendered=this.quadBufferUsage/s}getQuadCount(){return this.numQuadsRendered}renderToTexture(i){for(let u=0;u<this.rttNodes.length;u++)if(this.rttNodes[u]===i)return;this.insertRTTNodeInOrder(i)}insertRTTNodeInOrder(i){let u=this.rttNodes.length,h=i;for(;h&&h.parent;){const w=this.rttNodes.indexOf(h.parent);if(w!==-1){u=w;break}h=h.parent}const g=this.findMaxChildRTTIndex(i);g!==-1&&(u=Math.max(u,g+1)),this.rttNodes.splice(u,0,i)}findMaxChildRTTIndex(i){let u=-1;const h=g=>{const w=this.rttNodes.indexOf(g);w!==-1&&(u=Math.max(u,w));for(const s of g.children)h(s)};return h(i),u}renderRTTNodes(){const{glw:i}=this;this.stage;for(let h=0;h<this.rttNodes.length;h++){const g=this.rttNodes[h];if(!g||!g.hasRTTupdates)continue;if(!g.texture||!g.texture.ctxTexture){console.warn("Texture not loaded for RTT node",g);continue}this.activeRttNode=g,ot(g.texture,"RTT node missing texture");const w=g.texture.ctxTexture;ot(w instanceof tC),this.renderToTextureActive=!0,i.bindFramebuffer(w.framebuffer),i.viewport(0,0,w.w,w.h),i.clearColor(0,0,0,0),i.clear();for(let s=0;s<g.children.length;s++){const m=g.children[s];m&&(this.stage.addQuads(m),m.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,g.hasRTTupdates=!1}const u=this.clearColor.normalized;i.clearColor(u[0],u[1],u[2],u[3]),i.bindFramebuffer(null),i.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(i){const u=this.rttNodes.indexOf(i);u!==-1&&this.rttNodes.splice(u,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(i){if(this.clearColor.raw===i)return;const u=this.glw,h=Ul(i);u.clearColor(h[0],h[1],h[2],h[3]),this.clearColor={raw:i,normalized:h},u.clear()}}const hR={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class dR{}class pR extends dR{constructor(i,u){super();P(this,"data");P(this,"glyphMap");P(this,"kernings");this.data=i,this.glyphMap=u;const h=this.kernings={};i.kernings.forEach(g=>{const w=g.second,s=h[w]=h[w]||{};s[g.first]=g.amount}),this.kernings=h}*shapeText(i,u){var w;let h,g;for(;(h=u.peek())&&!h.done;){const s=h.value,m=this.glyphMap.get(s);if(u.next(),m!==void 0){const S=g!==void 0?(((w=this.kernings[m.id])==null?void 0:w[g])||0)+i.letterSpacing:0;g=m.id,yield{mapped:!0,glyphId:m.id,codepoint:s,cluster:u.lastIndex,xAdvance:m.xadvance+S,yAdvance:0,xOffset:m.xoffset+S,yOffset:m.yoffset,xBearing:0,yBearing:0,width:m.width,height:m.height}}else s===hR.LINE_FEED&&(g=void 0),yield{mapped:!1,codepoint:s,cluster:u.lastIndex}}}}class Zm extends eT{constructor(i,u){super(u);P(this,"type");P(this,"texture");P(this,"maxCharHeight",0);P(this,"shaper");P(this,"glyphMap",new Map);P(this,"data");const{atlasUrl:h,atlasDataUrl:g,stage:w}=u;this.type=i;const s=w.renderer;ot(s instanceof cg,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=w.txManager.createTexture("ImageTexture",{src:h,premultiplyAlpha:!1}),w.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),w.requestRender()}),WC(g).then(m=>{var v;this.data=JSON.parse(m),ot(this.data);let S=0;if(this.data.chars.forEach(y=>{this.glyphMap.set(y.id,y);const I=y.yoffset+y.height;I>S&&(S=I)}),this.maxCharHeight=S,this.shaper=new pR(this.data,this.glyphMap),!this.metrics)if((v=this.data)!=null&&v.lightningMetrics){const{ascender:y,descender:I,lineGap:D,unitsPerEm:T}=this.data.lightningMetrics;this.metrics={ascender:y/T,descender:I/T,lineGap:D/T}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(i){const u=this.glyphMap.get(i);if(u===void 0)throw new Error(`Glyph ${i} not found in font ${this.fontFamily}`);return{x:u.x,y:u.y,width:u.width,height:u.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const mR=24;function gR(f,o,i,u,h,g,w,s,m){const S=Math.min(Math.max(w.firstLineIdx,0),s.length),v=0,{metrics:y}=i;ot(y,"Font metrics not loaded"),ot(i.data,"Font data not loaded");const I=(y.ascender-y.descender)*f;let D=0;u==="middle"?D=(o-I)/2:u==="bottom"&&(D=o-I);const T=h/g,L=i.data.common.base,N=y.ascender*f-L,z=T+N+S*o+D;if(!(m&&z>=m/g))return{sdfX:v,sdfY:z,lineIndex:S}}class Cl{constructor(o,i=0){P(this,"iterator");P(this,"peekBuffer",[]);P(this,"_lastIndex");this.iterator=o,this.iterator=o,this._lastIndex=i-1,this.peekBuffer=[]}next(){const o=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return o.done?this._lastIndex=-1:this._lastIndex++,o}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const o=this.iterator.next();return this.peekBuffer.push(o),o}get lastIndex(){return this._lastIndex}}function*Tl(f,o=0){let i=o;for(;i<f.length;){const u=f.codePointAt(i);if(u===void 0)throw new Error("Invalid Unicode code point");yield u,i+=u<=65535?1:2}}function yR(f,o,i){const u=i.shapeText(o,new Cl(Tl(f,0),0));let h=0;for(const g of u)g.mapped&&g.codepoint!==8203&&(h+=g.xAdvance);return h}function vR(f,o,i,u,h,g,w,s,m,S,v,y,I,D,T,L,B,N,z){ot(T,"Font face must be loaded"),ot(T.loaded,"Font face must be loaded"),ot(T.data,"Font face must be loaded"),ot(T.shaper,"Font face must be loaded");const F=s/T.data.info.size,H=m/F,X=g/F,$=S/F,oe=I[f],fe=(oe==null?void 0:oe.codepointIndex)||0,le=(oe==null?void 0:oe.maxX)||0,A=(oe==null?void 0:oe.maxY)||0;let Y=le,Q=A,ee=o,q=i,W=0;const ie={codepointIndex:-1,bufferOffset:-1,xStart:-1},ue=T.shaper,ve={letterSpacing:$};u.endsWith(" ")&&(u+=" ");let Te=ue.shapeText(ve,new Cl(Tl(u,fe),fe)),xe,ke=-1;const pe=[],Le=w/F,G=yR(N,ve,ue);let Ie=!0;for(;Ie;){const Oe=(z===0||f+1<z)&&(y!=="both"||B||q+H+T.maxCharHeight<=Le),Be=Oe?X:X-G;let Ve=0;const qe=q+T.maxCharHeight>=D.y1,ze=q<=D.y2,it=qe&&ze;for(;(xe=Te.next())&&!xe.done;){const me=xe.value;if(f===I.length)I.push({codepointIndex:me.cluster,maxY:Q,maxX:Y});else if(f>I.length)throw new Error("Unexpected lineCache length");if(me.codepoint===32||me.codepoint===10||me.codepoint===8203?ie.codepointIndex!==-1&&(ie.codepointIndex=-1,Ve=ee):ie.codepointIndex===-1&&(ie.codepointIndex=me.cluster,ie.bufferOffset=W,ie.xStart=Ve),me.mapped){const wt=ee+me.xOffset+me.width;if(y!=="none"&&wt>=Be&&ie.codepointIndex!==-1&&ie.xStart>0)if(Oe){Te=ue.shapeText(ve,new Cl(Tl(u,ie.codepointIndex),ie.codepointIndex)),W=ie.bufferOffset;break}else Te=ue.shapeText(ve,new Cl(Tl(N,0),0)),ee=ie.xStart,W=ie.bufferOffset,y="none";else{const ft=ee+me.xOffset,rt=q+me.yOffset;if(it){ke===-1&&(ke=W);const St=T.getAtlasEntry(me.glyphId),nt=St.x/T.data.common.scaleW,st=St.y/T.data.common.scaleH,Xe=St.width/T.data.common.scaleW,He=St.height/T.data.common.scaleH;v[W++]=ft,v[W++]=rt,v[W++]=nt,v[W++]=st,v[W++]=ft+me.width,v[W++]=rt,v[W++]=nt+Xe,v[W++]=st,v[W++]=ft,v[W++]=rt+me.height,v[W++]=nt,v[W++]=st+He,v[W++]=ft+me.width,v[W++]=rt+me.height,v[W++]=nt+Xe,v[W++]=st+He}Q=Math.max(Q,rt+me.height),Y=Math.max(Y,ft+me.width),ee+=me.xAdvance}}else if(me.codepoint===10){if(Oe)break;Te=ue.shapeText(ve,new Cl(Tl(N,0),0)),y="none"}}ke!==-1&&(pe.push({bufferStart:ke,bufferEnd:W}),ke=-1),ee=0,q+=H,f++,ie.codepointIndex=-1,Ve=0,!L&&y==="both"&&q>D.y2||xe&&xe.done?Ie=!1:Oe||(Ie=!1)}if(h==="center"){const Oe=y==="none"?Y:X;for(let Be=0;Be<pe.length;Be++){const Ve=pe[Be],qe=v[Ve.bufferEnd-4]-v[Ve.bufferStart],ze=(Oe-qe)/2;for(let it=Ve.bufferStart;it<Ve.bufferEnd;it+=4)v[it]+=ze}}else if(h==="right"){const Oe=y==="none"?Y:X;for(let Be=0;Be<pe.length;Be++){const Ve=pe[Be],qe=Ve.bufferEnd===Ve.bufferStart?0:v[Ve.bufferEnd-4]-v[Ve.bufferStart],ze=Oe-qe;for(let it=Ve.bufferStart;it<Ve.bufferEnd;it+=4)v[it]+=ze}}return ot(xe),{bufferNumFloats:W,bufferNumQuads:W/16,layoutNumCharacters:xe.done?u.length-fe:xe.value.cluster-fe+1,fullyProcessed:!!xe.done,maxX:Y,maxY:Q,numLines:I.length}}function xR(f,o){return Math.ceil(f/o)*o}function wR(f,o){return Math.floor(f/o)*o}function SR(f,o,i,u,h,g,w,s){const{screen:m,sdf:S}=f;if(!w_(w))m.x1=0,m.y1=0,m.x2=0,m.y2=0,S.x1=0,S.y1=0,S.x2=0,S.y2=0,f.numLines=0,f.firstLineIdx=0;else{const v=w.x1-o,y=v+(w.x2-w.x1),I=w.y1-i+u,D=wR(I-g,h||1),T=xR(I+(w.y2-w.y1)+g,h||1);m.x1=v,m.y1=D,m.x2=y,m.y2=T,S.x1=v/s,S.y1=D/s,S.x2=y/s,S.y2=T/s,f.numLines=Math.ceil((T-D)/h),f.firstLineIdx=h?Math.floor(D/h):0}f.valid=!0}function iT(f,o){return o*(f.ascender-f.descender+f.lineGap)}const CR={x:0,y:0,width:0,height:0};class TR extends fg{constructor(i){super(i);P(this,"ssdfFontFamilies",{});P(this,"msdfFontFamilies",{});P(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);P(this,"sdfShader");P(this,"rendererBounds");P(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(i,u)=>{i.props.fontFamily=u,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontWeight:(i,u)=>{i.props.fontWeight=u,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStyle:(i,u)=>{i.props.fontStyle=u,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStretch:(i,u)=>{i.props.fontStretch=u,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontSize:(i,u)=>{i.props.fontSize=u,this.invalidateLayoutCache(i)},text:(i,u)=>{i.props.text=u,this.invalidateLayoutCache(i)},textAlign:(i,u)=>{i.props.textAlign=u,this.invalidateLayoutCache(i)},color:(i,u)=>{i.props.color=u},x:(i,u)=>{i.props.x=u,i.elementBounds.valid&&(this.setElementBoundsX(i),!i.renderWindow.valid&&bm(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},y:(i,u)=>{i.props.y=u,i.elementBounds.valid&&(this.setElementBoundsY(i),!i.renderWindow.valid&&bm(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},contain:(i,u)=>{i.props.contain=u,this.invalidateLayoutCache(i)},width:(i,u)=>{i.props.width=u,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,u)=>{i.props.height=u,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,u)=>{i.props.offsetY=u,this.invalidateLayoutCache(i)},scrollable:(i,u)=>{i.props.scrollable=u,this.invalidateLayoutCache(i)},scrollY:(i,u)=>{i.props.scrollY=u,this.scheduleUpdateState(i)},letterSpacing:(i,u)=>{i.props.letterSpacing=u,this.invalidateLayoutCache(i)},lineHeight:(i,u)=>{i.props.lineHeight=u,i.resLineHeight=void 0,this.invalidateLayoutCache(i)},maxLines:(i,u)=>{i.props.maxLines=u,this.invalidateLayoutCache(i)},textBaseline:(i,u)=>{i.props.textBaseline=u,this.invalidateLayoutCache(i)},verticalAlign:(i,u)=>{i.props.verticalAlign=u,this.invalidateLayoutCache(i)},overflowSuffix:(i,u)=>{i.props.overflowSuffix=u,this.invalidateLayoutCache(i)},debug:(i,u)=>{i.props.debug=u}}}canRenderFont(i){const{fontFamily:u}=i;return u in this.ssdfFontFamilies||u in this.msdfFontFamilies||u==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(i){return i instanceof Zm}addFontFace(i){ot(i instanceof Zm);const u=i.fontFamily,h=i.type==="ssdf"?this.ssdfFontFamilies:i.type==="msdf"?this.msdfFontFamilies:void 0;if(!h){console.warn(`Invalid font face type: ${i.type}`);return}let g=h[u];g||(g=new Set,h[u]=g),g.add(i)}createState(i){return{props:i,status:"initialState",updateScheduled:!1,emitter:new vr,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(i){let{trFontFace:u}=i;const{textH:h,lineCache:g,debugData:w,forceFullLayoutCalc:s}=i;if(w.updateCount++,i.status==="initialState"&&this.setStatus(i,"loading"),u===void 0){if(u=this.resolveFontFace(i.props),i.trFontFace=u,u===void 0){const ue=`SdfTextRenderer: Could not resolve font face for family: '${i.props.fontFamily}'`;console.error(ue),this.setStatus(i,"failed",new Error(ue));return}u.texture.setRenderableOwner(i,!0)}if(u.loaded===!1){u.once("loaded",()=>{this.scheduleUpdateState(i)});return}ot(u.data,"Font face data should be loaded"),ot(u.metrics,"Font face metrics should be loaded");const{text:m,fontSize:S,x:v,y,contain:I,width:D,height:T,verticalAlign:L,scrollable:B,overflowSuffix:N,maxLines:z}=i.props,F=I==="both"&&B?i.props.scrollY:0,{renderWindow:H}=i,X=u.data.info.size,$=S/X;let oe=i.resLineHeight;if(oe===void 0){const ue=i.props.lineHeight;ue===void 0?oe=iT(u.metrics,S):oe=ue,i.resLineHeight=oe}const fe=oe/$;i.distanceRange=$*u.data.distanceField.distanceRange;const le=m.length*mR;let A=i.vertexBuffer;(!A||A.length<le)&&(A=new Float32Array(le*2));const Y=i.elementBounds;if(Y.valid||(this.setElementBoundsX(i),this.setElementBoundsY(i),Y.valid=!0),!s&&H.valid){const ue=H.screen;if(v+ue.x1<=Y.x1&&v+ue.x2>=Y.x2&&y-F+ue.y1<=Y.y1&&y-F+ue.y2>=Y.y2){this.setStatus(i,"loaded");return}H.valid=!1,this.setStatus(i,"loading")}const{offsetY:Q,textAlign:ee}=i.props;if(!H.valid){if(!bm(Y,this.rendererBounds))return;SR(H,v,y,F,oe,I==="both"?Y.y2-Y.y1:0,Y,$)}const q=gR(X,fe,u,L,Q,$,H,g,h);if(!q){this.setStatus(i,"loaded");return}const{letterSpacing:W}=i.props,ie=vR(q.lineIndex,q.sdfX,q.sdfY,m,ee,D,T,S,oe,W,A,I,g,H.sdf,u,s,B,N,z);i.bufferUploaded=!1,i.bufferNumFloats=ie.bufferNumFloats,i.bufferNumQuads=ie.bufferNumQuads,i.vertexBuffer=A,i.renderWindow=H,w.lastLayoutNumCharacters=ie.layoutNumCharacters,w.bufferSize=A.byteLength,ie.fullyProcessed&&(i.textW=ie.maxX*$,i.textH=ie.numLines*fe*$),this.setStatus(i,"loaded")}renderQuads(i,u,h,g,w,s){var Y,Q;if(!i.vertexBuffer)return;const m=this.stage.renderer;ot(m instanceof cg);const{fontSize:S,color:v,contain:y,scrollable:I,zIndex:D,debug:T}=i.props,L=y==="both"&&I?i.props.scrollY:0,{textW:B=0,textH:N=0,distanceRange:z,vertexBuffer:F,bufferUploaded:H,trFontFace:X,elementBounds:$}=i;let{webGlBuffers:oe}=i;if(!oe){const ee=m.glw,q=4*Float32Array.BYTES_PER_ELEMENT,W=ee.createBuffer();ot(W),i.webGlBuffers=new nT([{buffer:W,attributes:{a_position:{name:"a_position",size:2,type:ee.FLOAT,normalized:!1,stride:q,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:ee.FLOAT,normalized:!1,stride:q,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),i.bufferUploaded=!1,ot(i.webGlBuffers),oe=i.webGlBuffers}if(!H){const ee=m.glw,q=(oe==null?void 0:oe.getBuffer("a_textureCoordinate"))??null;ee.arrayBufferData(q,F,ee.STATIC_DRAW),i.bufferUploaded=!0}if(ot(X),I&&y==="both"){ot($.valid);const ee=y_($,CR);h.valid?(i.clippingRect.valid=!0,h=VC(h,ee,i.clippingRect)):(i.clippingRect.valid=!0,h=HC(ee,i.clippingRect))}const fe=new tT(m.glw,m.options,oe,this.sdfShader,{transform:u.getFloatArr(),color:h_(v,g),size:S/(((Y=X.data)==null?void 0:Y.info.size)||0),scrollY:L,distanceRange:z,debug:T.sdfShaderDebug},g,h,{height:N,width:B},0,D,!1,w,s),le=(Q=i.trFontFace)==null?void 0:Q.texture;ot(le);const A=le.ctxTexture;fe.addTexture(A),fe.length=i.bufferNumFloats,fe.numQuads=i.bufferNumQuads,m.addRenderOp(fe)}setIsRenderable(i,u){var h;super.setIsRenderable(i,u),(h=i.trFontFace)==null||h.texture.setRenderableOwner(i,u)}destroyState(i){var u;super.destroyState(i),(u=i.trFontFace)==null||u.texture.setRenderableOwner(i,!1)}resolveFontFace(i){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i,"sdf")}releaseFontFace(i){i.resLineHeight=void 0,i.trFontFace&&(i.trFontFace.texture.setRenderableOwner(i,!1),i.trFontFace=void 0)}invalidateLayoutCache(i){i.renderWindow.valid=!1,i.elementBounds.valid=!1,i.textH=void 0,i.textW=void 0,i.lineCache=[],this.setStatus(i,"loading"),this.scheduleUpdateState(i)}setElementBoundsX(i){const{x:u,contain:h,width:g}=i.props,{elementBounds:w}=i;w.x1=u,w.x2=h!=="none"?u+g:1/0}setElementBoundsY(i){const{y:u,contain:h,height:g}=i.props,{elementBounds:w}=i;w.y1=u,w.y2=h==="both"?u+g:1/0}}function nC(f){return f===""||f==="​"}function bR(f,o,i){if(o.metrics)return o.metrics;const u=f.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${o.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let h;return u.actualBoundingBoxDescent&&u.actualBoundingBoxAscent?h={ascender:u.actualBoundingBoxAscent/i,descender:-u.actualBoundingBoxDescent/i,lineGap:.2}:h={ascender:.8,descender:-.2,lineGap:.2},o.metrics=h,h}const iC=2048;function oC(f,o,i,u,h){const g=f!=="bottom"?.5*o:0;return i*(u-1)+g+Math.max(i,o)+(h||0)}class ER{constructor(o,i){P(this,"_canvas");P(this,"_context");P(this,"_settings");this._canvas=o,this._context=i,this._settings=this.mergeDefaults({})}set settings(o){this._settings=this.mergeDefaults(o)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const o=[this._settings.fontFamily],i=[];for(let u=0,h=o.length;u<h;u++)o[u]==="serif"||o[u]==="sans-serif"?i.push(o[u]):i.push(`"${o[u]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${i.join(",")}`}_load(){if(document.fonts){const o=this._getFontSetting();try{if(!document.fonts.check(o,this._settings.text))return document.fonts.load(o,this._settings.text).catch(i=>{console.warn("[Lightning] Font load error",i,o)}).then(()=>{document.fonts.check(o,this._settings.text)||console.warn("[Lightning] Font not found",o)})}catch{console.warn("[Lightning] Can't check font loading for "+o)}}}calculateRenderInfo(){const o={},i=this.getPrecision(),u=this._settings.paddingLeft*i,h=this._settings.paddingRight*i,g=this._settings.fontSize*i;let w=this._settings.offsetY===null?null:this._settings.offsetY*i;const s=this._settings.w*i,m=this._settings.h*i;let S=this._settings.wordWrapWidth*i;const v=this._settings.cutSx*i,y=this._settings.cutEx*i,I=this._settings.cutSy*i,D=this._settings.cutEy*i,T=(this._settings.letterSpacing||0)*i,L=this._settings.textIndent*i,B=this._settings.trFontFace;this.setFontProperties(),ot(B);const N=bR(this._context,B,g),z=iT(N,g)*i,F=this._settings.lineHeight!==null?this._settings.lineHeight*i:z,H=this._settings.maxHeight,X=H!==null&&F>0?Math.floor(H/F):0,$=this._settings.maxLines,oe=X>0&&$>0?Math.min(X,$):Math.max(X,$);let fe=s||2048/this.getPrecision(),le=fe-u;if(le<10&&(fe+=10-le,le=10),S||(S=le),this._settings.textOverflow&&!this._settings.wordWrap){let W;switch(this._settings.textOverflow){case"clip":W="";break;case"ellipsis":W=this._settings.overflowSuffix;break;default:W=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,S-L,W)}let A;if(this._settings.wordWrap)A=this.wrapText(this._settings.text,S,T,L);else{A={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const W=A.l.length;for(let ie=0;ie<W-1;ie++)A.n.push(ie)}let Y=A.l;if(oe&&Y.length>oe){const W=Y.slice(0,oe);let ie=null;if(this._settings.overflowSuffix){const ke=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,pe=this.wrapText(W[W.length-1],S-ke,T,L);W[W.length-1]=`${pe.l[0]}${this._settings.overflowSuffix}`,ie=[pe.l.length>1?pe.l[1]:""]}else ie=[""];let ue;const ve=Y.length;let Te=0;const xe=A.n.length;for(ue=oe;ue<ve;ue++)ie[Te]+=`${ie[Te]?" ":""}${Y[ue]}`,ue+1<xe&&A.n[ue+1]&&Te++;o.remainingText=ie.join(`
`),o.moreTextLines=!0,Y=W}else o.moreTextLines=!1,o.remainingText="";let Q=0;const ee=[];for(let W=0;W<Y.length;W++){const ie=this.measureText(Y[W],T)+(W===0?L:0);ee.push(ie),Q=Math.max(Q,ie)}o.lineWidths=ee,s||(fe=Q+u+h,le=Q),this._settings.wordWrap&&s>Q&&this._settings.textAlign==="left"&&Y.length===1&&(fe=Q+u+h);let q;return m?q=m:q=oC(this._settings.textBaseline,g,F,Y.length,w),w===null&&(w=g),o.w=fe,o.h=q,o.lines=Y,o.precision=i,fe||(fe=1),q||(q=1),(v||y)&&(fe=Math.min(fe,y-v)),(I||D)&&(q=Math.min(q,D-I)),o.width=fe,o.innerWidth=le,o.height=q,o.fontSize=g,o.cutSx=v,o.cutSy=I,o.cutEx=y,o.cutEy=D,o.lineHeight=F,o.defLineHeight=z,o.lineWidths=ee,o.offsetY=w,o.paddingLeft=u,o.paddingRight=h,o.letterSpacing=T,o.textIndent=L,o.metrics=N,o}draw(o,i){const u=this.getPrecision(),h=(i==null?void 0:i.lines)||o.lines,g=(i==null?void 0:i.lineWidths)||o.lineWidths,w=i?oC(this._settings.textBaseline,o.fontSize,o.lineHeight,i.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*u):o.height;this._canvas.width=Math.min(Math.ceil(o.width+this._settings.textRenderIssueMargin),iC),this._canvas.height=Math.min(Math.ceil(w),iC),this.setFontProperties(),o.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(o.cutSx||o.cutSy)&&this._context.translate(-o.cutSx,-o.cutSy);let s,m;const S=[],{metrics:v}=o,y=v?v.ascender*o.fontSize:o.fontSize,I=(v.ascender-v.descender)*o.fontSize;for(let T=0,L=h.length;T<L;T++)s=T===0?o.textIndent:0,m=T*o.lineHeight+y,this._settings.verticalAlign=="middle"?m+=(o.lineHeight-I)/2:this._settings.verticalAlign=="bottom"&&(m+=o.lineHeight-I),this._settings.textAlign==="right"?s+=o.innerWidth-g[T]:this._settings.textAlign==="center"&&(s+=(o.innerWidth-g[T])/2),s+=o.paddingLeft,S.push({text:h[T],x:s,y:m,w:g[T]});if(this._settings.highlight){const T=this._settings.highlightColor,L=this._settings.highlightHeight*u||o.fontSize*1.5,B=this._settings.highlightOffset*u,N=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*u:o.paddingLeft,z=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*u:o.paddingRight;this._context.fillStyle=Tm(T);for(let F=0;F<S.length;F++){const H=S[F];this._context.fillRect(H.x-N,H.y-o.offsetY+B,H.w+z+N,L)}}let D=null;this._settings.shadow&&(D=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Tm(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*u,this._context.shadowOffsetY=this._settings.shadowOffsetY*u,this._context.shadowBlur=this._settings.shadowBlur*u),this._context.fillStyle=Tm(this._settings.textColor);for(let T=0,L=S.length;T<L;T++){const B=S[T];if(o.letterSpacing===0)this._context.fillText(B.text,B.x,B.y);else{const N=B.text.split("");let z=B.x;for(let F=0,H=N.length;F<H;F++)this._context.fillText(N[F],z,B.y),z+=this.measureText(N[F],o.letterSpacing)}}D&&(this._context.shadowColor=D[0],this._context.shadowOffsetX=D[1],this._context.shadowOffsetY=D[2],this._context.shadowBlur=D[3]),(o.cutSx||o.cutSy)&&this._context.translate(o.cutSx,o.cutSy)}wrapWord(o,i,u){const h=this._context.measureText(u).width,g=o.length,w=this._context.measureText(o).width;if(w<=i)return o;let s=Math.floor(i*g/w),m=this._context.measureText(o.substring(0,s)).width+h;if(m>i)for(;s>0&&(m=this._context.measureText(o.substring(0,s)).width+h,m>i);)s-=1;else for(;s<g;)if(m=this._context.measureText(o.substring(0,s)).width+h,m<i)s+=1;else{s-=1;break}return o.substring(0,s)+(i>=h?u:"")}wrapText(o,i,u,h=0){const g=/ |\u200B/g,w=o.split(/\r?\n/g);let s=[];const m=[];for(let S=0;S<w.length;S++){const v=[];let y="",I=i-h;const D=w[S].split(g),T=w[S].match(g)||[];for(let L=0;L<D.length;L++){const B=T[L-1]||"",N=D[L],z=this.measureText(N,u),F=nC(B)?z:z+this.measureText(B,u);L===0||F>I?(L>0&&(v.push(y),y=""),y+=N,I=i-z-(L===0?h:0)):(I-=F,y+=B+N)}v.push(y),y="",s=s.concat(v),S<w.length-1&&m.push(s.length)}return{l:s,n:m}}measureText(o,i=0){return i?o.split("").reduce((u,h)=>nC(h)?u:u+this._context.measureText(h).width+i,0):this._context.measureText(o).width}mergeDefaults(o){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...o}}}const rC=typeof self>"u"?globalThis:self;var NC;const sC=((NC=rC.document)==null?void 0:NC.fonts)||rC.fonts;function kR(f){const{fontFamily:o,fontStyle:i,fontWeight:u,fontStretch:h,fontSize:g}=f;return[i,u,h,`${g}px`,o].join(" ")}class aC extends fg{constructor(i){super(i);P(this,"canvas");P(this,"context");P(this,"fontFamilies",{});P(this,"fontFamilyArray",[this.fontFamilies]);P(this,"type","canvas");P(this,"loadFont",i=>{const u=kR(i.props),h=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i.props,"canvas");if(ot(h,`Could not resolve font face for ${u}`),i.fontInfo={fontFace:h,cssString:u,loaded:!1},!i.fontInfo.loaded){sC.load(u).then(this.onFontLoaded.bind(this,i,u)).catch(this.onFontLoadError.bind(this,i,u));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let u=this.canvas.getContext("2d",{willReadFrequently:!0});u||(this.canvas=document.createElement("canvas"),u=this.canvas.getContext("2d",{willReadFrequently:!0})),ot(u),this.context=u,this.addFontFace(new Lh({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(i,u)=>{i.props.fontFamily=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontWeight:(i,u)=>{i.props.fontWeight=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStyle:(i,u)=>{i.props.fontStyle=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStretch:(i,u)=>{i.props.fontStretch=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontSize:(i,u)=>{i.props.fontSize=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},text:(i,u)=>{i.props.text=u,this.invalidateLayoutCache(i)},textAlign:(i,u)=>{i.props.textAlign=u,this.invalidateLayoutCache(i)},color:(i,u)=>{i.props.color=u,this.invalidateLayoutCache(i)},x:(i,u)=>{i.props.x=u},y:(i,u)=>{i.props.y=u},contain:(i,u)=>{i.props.contain=u,this.invalidateLayoutCache(i)},width:(i,u)=>{i.props.width=u,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,u)=>{i.props.height=u,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,u)=>{i.props.offsetY=u,this.invalidateLayoutCache(i)},scrollY:(i,u)=>{i.props.scrollY=u},letterSpacing:(i,u)=>{i.props.letterSpacing=u,this.invalidateLayoutCache(i)},lineHeight:(i,u)=>{i.props.lineHeight=u,this.invalidateLayoutCache(i)},maxLines:(i,u)=>{i.props.maxLines=u,this.invalidateLayoutCache(i)},textBaseline:(i,u)=>{i.props.textBaseline=u,this.invalidateLayoutCache(i)},verticalAlign:(i,u)=>{i.props.verticalAlign=u,this.invalidateLayoutCache(i)},overflowSuffix:(i,u)=>{i.props.overflowSuffix=u,this.invalidateLayoutCache(i)}}}canRenderFont(i){return!0}isFontFaceSupported(i){return i instanceof Lh}addFontFace(i){ot(i instanceof Lh);const u=i.fontFamily;u!=="sans-serif"&&sC.add(i.fontFace);let h=this.fontFamilies[u];h||(h=new Set,this.fontFamilies[u]=h),h.add(i)}createState(i,u){return{node:u,props:i,status:"initialState",updateScheduled:!1,emitter:new vr,textureNode:void 0,lightning2TextRenderer:new ER(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(i){if(i.status==="initialState"&&this.setStatus(i,"loading"),i.status!=="loaded"){if(!i.fontInfo)return this.loadFont(i);i.fontInfo.loaded&&(i.renderInfo||(i.renderInfo=this.calculateRenderInfo(i),i.textH=i.renderInfo.lineHeight*i.renderInfo.lines.length,i.textW=i.renderInfo.width,this.renderSingleCanvasPage(i)))}}renderSingleCanvasPage(i){ot(i.renderInfo);const u=i.node,h=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:(function(g,w){return ot(w),g.draw(w,{lines:w.lines,lineWidths:w.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,i.lightning2TextRenderer,i.renderInfo)});if(i.textureNode)i.textureNode.texture=h,i.textureNode.alpha=qS(i.props.color);else{const g=this.stage.createNode({parent:u,texture:h,autosize:!0,alpha:qS(i.props.color)});i.textureNode=g}this.setStatus(i,"loaded")}calculateRenderInfo(i){var u;return i.lightning2TextRenderer.settings={text:i.props.text,textAlign:i.props.textAlign,fontFamily:i.props.fontFamily,trFontFace:(u=i.fontInfo)==null?void 0:u.fontFace,fontSize:i.props.fontSize,fontStyle:[i.props.fontStretch,i.props.fontStyle,i.props.fontWeight].join(" "),textColor:Ul(i.props.color),offsetY:i.props.offsetY,wordWrap:i.props.contain!=="none",wordWrapWidth:i.props.contain==="none"?void 0:i.props.width,letterSpacing:i.props.letterSpacing,lineHeight:i.props.lineHeight??null,maxLines:i.props.maxLines,maxHeight:i.props.contain==="both"?i.props.height-i.props.offsetY:null,textBaseline:i.props.textBaseline,verticalAlign:i.props.verticalAlign,overflowSuffix:i.props.overflowSuffix,w:i.props.contain!=="none"?i.props.width:void 0},i.renderInfo=i.lightning2TextRenderer.calculateRenderInfo(),i.renderInfo}renderQuads(){}destroyState(i){i.status!=="destroyed"&&(super.destroyState(i),i.textureNode&&(i.textureNode.destroy(),delete i.textureNode),delete i.renderInfo)}invalidateLayoutCache(i){i.renderInfo=void 0,this.setStatus(i,"loading"),this.scheduleUpdateState(i)}onFontLoaded(i,u){var h;u!==((h=i.fontInfo)==null?void 0:h.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,this.scheduleUpdateState(i))}onFontLoadError(i,u,h){var g;u!==((g=i.fontInfo)==null?void 0:g.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${i.fontInfo.cssString}'`,h),this.scheduleUpdateState(i))}}const oT={isWhite:!0,a:1,r:255,g:255,b:255};function Im(f){if(f===4294967295)return oT;const o=(f>>>24&255)/255,i=f>>>16&255&255,u=f>>>8&255&255,h=f&255&255;return{isWhite:!1,a:o,r:h,g:u,b:i}}function rT(f){if(f===4294967295)return oT;const o=f>>>24&255,i=f>>>16&255&255,u=f>>>8&255&255,h=(f&255&255)/255;return{isWhite:!1,r:o,g:i,b:u,a:h}}function ja({a:f,r:o,g:i,b:u}){return`rgba(${o},${i},${u},${f})`}class AR extends ZC{constructor(){super(...arguments);P(this,"image");P(this,"tintCache")}load(){this.textureSource.setState("loading"),this.onLoadRequest().then(i=>{this.textureSource.setState("loaded",i),this.textureSource.freeTextureData(),this.updateMemSize()}).catch(i=>{this.textureSource.setState("failed",i),this.textureSource.freeTextureData()})}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}updateMemSize(){const i=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:u,height:h}=this.textureSource.dimensions;this.setTextureMemUse(u*h*i)}}hasImage(){return this.image!==void 0}getImage(i){var w;const u=this.image;if(ot(u,"Attempt to get unloaded image texture"),i.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),u;const h=ja(i);if(((w=this.tintCache)==null?void 0:w.key)===h)return this.tintCache.image;const g=this.tintTexture(u,h);return this.tintCache={key:h,image:g},this.updateMemSize(),g}tintTexture(i,u){const{width:h,height:g}=i,w=document.createElement("canvas");w.width=h,w.height=g;const s=w.getContext("2d");return s&&(s.fillStyle=u,s.globalCompositeOperation="copy",s.fillRect(0,0,h,g),s.globalCompositeOperation="multiply",s.drawImage(i,0,0,h,g,0,0,h,g),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0,h,g,0,0,h,g)),w}async onLoadRequest(){var u,h;ot((h=(u=this.textureSource)==null?void 0:u.textureData)==null?void 0:h.data,"Texture data is null");const{data:i}=this.textureSource.textureData;if(i instanceof ImageData){const g=document.createElement("canvas");g.width=i.width,g.height=i.height;const w=g.getContext("2d");return w&&w.putImageData(i,0,0),this.image=g,{width:i.width,height:i.height}}else if(typeof ImageBitmap<"u"&&i instanceof ImageBitmap||i instanceof HTMLImageElement)return this.image=i,{width:i.width,height:i.height};return{width:0,height:0}}}function IR(f){var o,i;if(f.shader instanceof td){const u=f.shader.shType;if(u===G_)return((o=f.shaderProps)==null?void 0:o.radius)??0;if(u==="DynamicShader"){const h=(i=f.shaderProps)==null?void 0:i.effects;if(h){const g=h.find(w=>{var s;return w.type==="radius"&&((s=w==null?void 0:w.props)==null?void 0:s.radius)});return g&&g.type==="radius"&&g.props.radius||0}}}return 0}function cl(f,o=""){var i;if(f.shader instanceof td&&f.shader.shType==="DynamicShader"){const h=(i=f.shaderProps)==null?void 0:i.effects;if(h&&h.length){const g=h.find(w=>w.type===`border${o}`&&w.props&&w.props.width);return g&&g.props}}}function uC(f,o,i,u,h){if(Object.getPrototypeOf(this).roundRect)this.roundRect(f,o,i,u,h);else{const w=m=>{const S=Math.min(i/2,u/2),v=m.topLeft+m.topRight+m.bottomRight+m.bottomLeft;if(v>i||v>u){const y=S/Math.max(m.topLeft,m.topRight,m.bottomRight,m.bottomLeft);m.topLeft*=y,m.topRight*=y,m.bottomRight*=y,m.bottomLeft*=y}},s=typeof h=="number"?{topLeft:h,topRight:h,bottomRight:h,bottomLeft:h}:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,...h};w(s),this.moveTo(f+s.topLeft,o),this.lineTo(f+i-s.topRight,o),this.ellipse(f+i-s.topRight,o+s.topRight,s.topRight,s.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(f+i,o+u-s.bottomRight),this.ellipse(f+i-s.bottomRight,o+u-s.bottomRight,s.bottomRight,s.bottomRight,0,0,.5*Math.PI),this.lineTo(f+s.bottomLeft,o+u),this.ellipse(f+s.bottomLeft,o+u-s.bottomLeft,s.bottomLeft,s.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(f,o+s.topLeft),this.ellipse(f+s.topLeft,o+s.topLeft,s.topLeft,s.topLeft,0,Math.PI,1.5*Math.PI)}}function wh(f,o,i,u,h,g=0,w,s){if(!g)return;let m,S=0,v,y=0;switch(s){case"Top":m=o,S=i,v=u+o,y=i;break;case"Right":m=o+u,S=i,v=o+u,y=i+h;break;case"Bottom":m=o,S=i+h,v=o+u,y=i+h;break;case"Left":m=o,S=i,v=o,y=i+h;break}f.beginPath(),f.lineWidth=g,f.strokeStyle=ja(rT(w??0)),f.moveTo(m,S),f.lineTo(v,y),f.stroke()}class MR extends JC{constructor(i){super(i);P(this,"context");P(this,"canvas");P(this,"pixelRatio");P(this,"clearColor");P(this,"renderToTextureActive",!1);P(this,"activeRttNode",null);P(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:u,pixelRatio:h,clearColor:g}=i;this.canvas=u,this.context=u.getContext("2d"),this.pixelRatio=h,this.clearColor=g?XS(g):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new td("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const i=this.context;if(this.clearColor){const[u,h,g,w]=this.clearColor;i.fillStyle=`rgba(${u}, ${h}, ${g}, ${w/255})`,i.fillRect(0,0,this.canvas.width,this.canvas.height)}i.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(i){const u=this.context,{tx:h,ty:g,width:w,height:s,alpha:m,colorTl:S,colorTr:v,colorBr:y,ta:I,tb:D,tc:T,td:L,clippingRect:B}=i;let N=i.texture,z,F;const H=N==null?void 0:N.type;if(ot(H,"Texture type is not defined"),H!==Nn.image&&H!==Nn.color&&H!==Nn.subTexture&&H!==Nn.noise||N&&(N instanceof Dl&&(F=N.props,N=N.parentTexture),z=N.ctxTexture,N.state==="freed"||N.state!=="loaded"))return;const X=Im(S),$=I!==1,oe=B.width!==0&&B.height!==0,fe=S!==v||S!==y,le=!!i.shader,A=le?IR(i):0,Y=le?cl(i):void 0;if(($||oe||A)&&u.save(),oe){const Q=new Path2D,{x:ee,y:q,width:W,height:ie}=B;Q.rect(ee,q,W,ie),u.clip(Q)}if($){const Q=this.pixelRatio;u.setTransform(I,T,D,L,h*Q,g*Q),u.scale(Q,Q),u.translate(-h,-g)}if(A){const Q=new Path2D;uC.call(Q,h,g,w,s,A),u.clip(Q)}if((H===Nn.image||H===Nn.subTexture||H===Nn.noise)&&z){const Q=z.getImage(X);if(u.globalAlpha=X.a??m,F)u.drawImage(Q,F.x,F.y,F.width,F.height,h,g,w,s);else try{u.drawImage(Q,h,g,w,s)}catch{}u.globalAlpha=1}else if(H===Nn.color&&fe){let Q=h,ee=g,q;S===v?(Q=h,ee=g+s,q=Im(y)):(Q=h+w,ee=g,q=Im(v));const W=u.createLinearGradient(h,g,Q,ee);W.addColorStop(0,ja(X)),W.addColorStop(1,ja(q)),u.fillStyle=W,u.fillRect(h,g,w,s)}else H===Nn.color&&(u.fillStyle=ja(X),u.fillRect(h,g,w,s));if(Y&&Y.width){const Q=Y.width,ee=Y.width/2,q=ja(rT(Y.color??0));u.beginPath(),u.lineWidth=Q,u.strokeStyle=q,u.globalAlpha=m,A?(uC.call(u,h+ee,g+ee,w-Q,s-Q,A),u.stroke()):u.strokeRect(h+ee,g+ee,w-Q,s-Q),u.globalAlpha=1}else if(le){const Q=cl(i,"Top"),ee=cl(i,"Right"),q=cl(i,"Bottom"),W=cl(i,"Left");Q&&wh(u,h,g,w,s,Q.width,Q.color,"Top"),ee&&wh(u,h,g,w,s,ee.width,ee.color,"Right"),q&&wh(u,h,g,w,s,q.width,q.color,"Bottom"),W&&wh(u,h,g,w,s,W.width,W.color,"Left")}($||oe||A)&&u.restore()}createCtxTexture(i){return new AR(this.txMemManager,i)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(i){}renderToTexture(i){}getBufferInfo(){return null}getQuadCount(){return null}updateClearColor(i){this.clearColor=i?XS(i):void 0}}const bl={alpha:f=>f===1?null:{prop:"opacity",value:`${f}`},x:f=>({prop:"left",value:`${f}px`}),y:f=>({prop:"top",value:`${f}px`}),width:f=>f===0?null:{prop:"width",value:`${f}px`},height:f=>f===0?null:{prop:"height",value:`${f}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:f=>f===!1?null:{prop:"overflow",value:f?"hidden":"visible"},rotation:f=>f===0?null:{prop:"transform",value:`rotate(${f}rad)`},scale:f=>f===1?null:{prop:"transform",value:`scale(${f})`},scaleX:f=>f===1?null:{prop:"transform",value:`scaleX(${f})`},scaleY:f=>f===1?null:{prop:"transform",value:`scaleY(${f})`},color:f=>f===0?null:{prop:"color",value:sT(f)}},sT=f=>{const o=(f&255)/255,i=f>>8&255,u=f>>16&255;return`rgba(${f>>24&255},${u},${i},${o})`},Jm={id:"test-id"},_R=new Set([...Object.keys(bl),...Object.keys(Jm),"src","parent","data"]);class RR{constructor(o,i){P(this,"root",null);P(this,"canvas",null);P(this,"height",1080);P(this,"width",1920);P(this,"scaleX",1);P(this,"scaleY",1);if(Wa())return;if(!i)throw new Error("settings is required");this.height=Math.ceil(i.appHeight??1080/(i.deviceLogicalPixelRatio??1)),this.width=Math.ceil(i.appWidth??1920/(i.deviceLogicalPixelRatio??1)),this.scaleX=i.deviceLogicalPixelRatio??1,this.scaleY=i.deviceLogicalPixelRatio??1,this.canvas=o,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(o,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(o),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const o=this.canvas.getBoundingClientRect(),i=document.documentElement.scrollTop+o.top,u=document.documentElement.scrollLeft+o.left;this.root.id="root",this.root.style.left=`${u}px`,this.root.style.top=`${i}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(o,i){const u=document.createElement("div");u.style.position="absolute",u.id=o.toString();for(const h in i)this.updateNodeProperty(u,h,i[h],i);return u}createNode(o){const i=this.createDiv(o.id,o.props);return i.node=o,o.div=i,o.on("inViewport",()=>i.setAttribute("state","inViewport")),o.on("inBounds",()=>i.setAttribute("state","inBounds")),o.on("outOfBounds",()=>i.setAttribute("state","outOfBounds")),this.createProxy(o,i)}createTextNode(o){const i=this.createDiv(o.id,o.props);return i.node=o,o.div=i,this.createProxy(o,i)}createProxy(o,i){_R.forEach(g=>{let w=Object.getOwnPropertyDescriptor(o,g);if(w===void 0){const s=Object.getPrototypeOf(o);w=Object.getOwnPropertyDescriptor(s,g)}w!==void 0&&Object.defineProperty(o,g,{get(){var s;return(s=w==null?void 0:w.get)==null?void 0:s.call(o)},set:s=>{var m;(m=w==null?void 0:w.set)==null||m.call(o,s),this.updateNodeProperty(i,g,s,o.props)},configurable:!0,enumerable:!0})});const u=o.destroy;Object.defineProperty(o,"destroy",{value:()=>{this.destroyNode(o.id),u.call(o)}});const h=o.animate;return Object.defineProperty(o,"animate",{value:(g,w)=>{const s=h.call(o,g,w),m=s.start.bind(s);return s.start=()=>(this.animateNode(i,g,w),m()),s}}),o}destroyNode(o){const i=document.getElementById(o.toString());i==null||i.remove()}updateNodeProperty(o,i,u,h){var g;if(!(this.root===null||u===void 0||u===null)){if(i==="parent"){const w=u.id;if(w===1){this.root.appendChild(o);return}const s=document.getElementById(w.toString());s==null||s.appendChild(o);return}if(i==="text"){o.innerHTML=String(u),o.style.visibility="hidden";return}if(i==="src"&&u){o.setAttribute("data-src",String(u));return}if(bl[i]){const w=(g=bl[i])==null?void 0:g.call(bl,u);if(w===null)return;if(typeof w=="string"){o.style.setProperty(w,String(u));return}if(typeof w=="object"){let s=w.value;if(i==="x"){const m=h.mountX,S=h.width;m&&(s=`${parseInt(s)-S*m}px`)}else if(i==="y"){const m=h.mountY,S=h.height;m&&(s=`${parseInt(s)-S*m}px`)}o.style.setProperty(w.prop,s)}return}if(Jm[i]){const w=Jm[i];if(!w)return;o.setAttribute(String(w),String(u));return}if(i==="data"){for(const w in u){const s=u[w];s===void 0?o.removeAttribute(`data-${w}`):o.setAttribute(`data-${w}`,String(s))}return}}}animateNode(o,i,u){const{duration:h=1e3,delay:g=0}=u,{x:w,y:s,width:m,height:S,alpha:v=1,rotation:y=0,scale:I=1,color:D,mountX:T,mountY:L}=i;function B(){setTimeout(()=>{o.style.top=`${s-S*L}px`,o.style.left=`${w-m*T}px`,o.style.width=`${m}px`,o.style.height=`${S}px`,o.style.opacity=`${v}`,o.style.rotate=`${y}rad`,o.style.scale=`${I}`,o.style.color=sT(D)},h)}setTimeout(B,g)}}const aT=50,lC={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},LR={low:.66666667,medium:.85,high:1,retina:2},DR=()=>{const f=Co.stage;uo.get("fonts",[]).forEach(o=>{o.type==="sdf"||o.type==="msdf"?(!o.png&&o.file&&(o.png=o.file.replace(/\.[^.]+$/,`.${o.type}.png`)),!o.json&&o.file&&(o.json=o.file.replace(/\.[^.]+$/,`.${o.type}.json`)),f.fontManager.addFontFace(new Zm(o.type,{fontFamily:o.family,descriptors:{},atlasUrl:o.png,atlasDataUrl:o.json,stage:f,metrics:o.metrics}))):o.type==="web"&&f.fontManager.addFontFace(new Lh({fontFamily:o.family,fontUrl:o.file,descriptors:{},metrics:o.metrics}))})},PR=()=>{const f=Co.stage;uo.get("shaders",[]).forEach(o=>{f.shManager.registerShaderType(o.name,o.type)}),uo.get("effects",[]).forEach(o=>{f.shManager.registerShaderType(o.name,o.type)})};let Co={};const OR=f=>{const o="renderMode"in f?f.renderMode:"webgl";if(o==="webgl")return cg;if(o==="canvas")return MR},NR=f=>{const o="renderMode"in f?f.renderMode:"webgl";if(o==="webgl")return[TR,aC];if(o==="canvas")return[aC]},UR=(f,o,i={})=>{Co=new nR({appWidth:i.w||1920,appHeight:i.h||1080,fpsUpdateInterval:i.fpsInterval||1e3,devicePhysicalPixelRatio:LR[i.renderQuality]||i.renderQuality||1,deviceLogicalPixelRatio:i.pixelRatio||lC[i.screenResolution]||lC[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in i?i.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:i.canvasColor&&$a.normalize(i.canvasColor)||0,inspector:i.inspector===!0?RR:void 0,boundsMargin:i.viewportMargin||0,txMemByteThreshold:"gpuMemoryLimit"in i?i.gpuMemoryLimit*1024*1024:200*1024*1024,renderEngine:OR(i),fontEngines:NR(i),canvas:i.canvas,textureProcessingTimeLimit:i.textureProcessingTimeLimit},o);const u=()=>{let h=f();h.quit=()=>{un.info("Closing App"),h.destroy(),h=null,Co=null}};return PR(),DR(),u(),Co},BR=(f,o)=>{if(f===void 0)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if(typeof f=="number")return{start:f,end:f,oppositeStart:f,oppositeEnd:f};if(Or(f)===!0&&(f=Nr(f)),typeof f=="object"){const{top:i=void 0,right:u=void 0,bottom:h=void 0,left:g=void 0,x:w=0,y:s=0}=f;return o==="vertical"?{start:i!==void 0?i:s,end:h!==void 0?h:s,oppositeStart:g!==void 0?g:w,oppositeEnd:u!==void 0?u:w}:{start:g!==void 0?g:w,end:u!==void 0?u:w,oppositeStart:i!==void 0?i:s,oppositeEnd:h!==void 0?h:s}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}},jR=function(f){const o=f.direction==="vertical"?"y":"x",i=f.direction==="vertical"?"x":"y",u=f.direction==="vertical"?"mountX":"mountY",h=f.direction==="vertical"?"height":"width",g=f.direction==="vertical"?"width":"height",w=BR(f.padding,f.direction);let s=w.start;const m=this.node.children,S=m.length;let v=0;const y=f.gap||0;for(let D=0;D<S;D++){const T=m[D];T[o]=s,T[i]=w.oppositeStart,h==="width"?s+=T.width+(T.width!==("text"in T?1:0)?y:0):s+="text"in T?T.width>1?T.height+y:0:T.height!==0?T.height+y:0,v=Math.max(v,T[g]+w.oppositeStart+w.oppositeEnd)}this.node[h]=s-y+w.end,this.node[g]=v;const I={start:0,end:1,center:.5}[f["align-items"]||"start"];if(I!==0)for(let D=0;D<S;D++){const T=m[D];T[i]=v*I,T[u]=I}f["@updated"]!==void 0&&f["@updated"]({w:this.node.width,h:this.node.height},this)},fC=f=>f!==null&&typeof f=="object"&&"transition"in f,Or=f=>typeof f=="string"&&f.startsWith("{")&&f.endsWith("}"),Nr=f=>JSON.parse(f.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),Ea=function(f,o){return typeof f!="string"?f:f.indexOf("%")===f.length-1?this.element.config.parent&&(this.element.config.parent.node[o]||0)*(parseFloat(f)/100)||0:f},eg=f=>{if(typeof f!="object"||f===null)return f;if(f.constructor===Object){if("value"in f)return f.value;if("transition"in f)return eg(f.transition)}return f},FR={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let tg=null;const $R={set parent(f){this.props.parent=f==="root"?Co.root:f.node},set rotation(f){this.props.rotation=f*(Math.PI/180)},set w(f){this.props.width=Ea.call(this,f,"width")},set width(f){this.props.width=Ea.call(this,f,"width")},set h(f){this.props.height=Ea.call(this,f,"height")},set height(f){this.props.height=Ea.call(this,f,"height")},set x(f){this.props.x=Ea.call(this,f,"width")},set y(f){this.props.y=Ea.call(this,f,"height")},set z(f){this.props.zIndex=f},set zIndex(f){this.props.zIndex=f},set color(f){typeof f=="string"&&f.startsWith("{")===!1?this.props.color=$a.normalize(f):(typeof f=="object"||Or(f)===!0&&(f=Nr(f)))&&(this.props.color=0,Object.entries(f).forEach(o=>{this.props[FR[o[0]]]=$a.normalize(o[1])}))},set src(f){this.props.src=f,this.raw.color===void 0&&(this.props.color=this.props.src?4294967295:0),!("w"in this.raw)&&!("w"in this.raw)&&!("h"in this.raw)&&!("height"in this.raw)&&(this.props.autosize=!0)},set texture(f){this.props.texture=f,this.raw.color===void 0&&f==null?this.props.color=0:this.raw.color===void 0&&(this.props.color=4294967295)},set fit(f){const o={};if(f==="cover"||f==="contain"){this.props.textureOptions={resizeMode:{type:f}};return}(typeof f=="object"||Or(f)===!0&&(f=Nr(f)))&&(o.type=f.type||"cover",typeof f.position=="number"&&(o.clipY=o.clipX=f.position),typeof f.position=="object"&&(o.clipX="x"in f.position?f.position.x:null,o.clipY="y"in f.position?f.position.y:null),this.props.textureOptions={resizeMode:o})},set rtt(f){this.props.rtt=f,this.raw.color===void 0&&(this.props.color=f===!0?4294967295:0)},set mount(f){typeof f=="object"||Or(f)===!0&&(f=Nr(f))?("x"in f&&(this.props.mountX=f.x),"y"in f&&(this.props.mountY=f.y)):(this.props.mountX=f,this.props.mountY=f)},set pivot(f){typeof f=="object"||Or(f)===!0&&(f=Nr(f))?("x"in f&&(this.props.pivotX=f.x),"y"in f&&(this.props.pivotY=f.y)):(this.props.pivotX=f,this.props.pivotY=f)},set scale(f){typeof f=="object"||Or(f)===!0&&(f=Nr(f))?("x"in f&&(this.props.scaleX=f.x),"y"in f&&(this.props.scaleY=f.y)):this.props.scale=f},set show(f){f?(this.props.alpha=this.raw.alpha!==void 0?this.raw.alpha:1,this.props.width=this.raw.w||this.raw.width||0,this.props.height=this.raw.h||this.raw.height||0):(this.props.alpha=0,this.props.width=0,this.props.height=0)},set alpha(f){(this.raw.show===void 0||this.raw.show===!0)&&(this.props.alpha=f)},set shader(f){f!==null?this.props.shader=Co.createShader(f.type,f.props):this.props.shader=Co.createShader("DefaultShader")},set effects(f){for(let o=0;o<f.length;o++)f[o].props&&f[o].props.color&&(f[o].props.color=$a.normalize(f[o].props.color));if(this.element.node===void 0)this.props.shader=Co.createShader("DynamicShader",{effects:f.map(o=>Co.createEffect(o.type,o.props,o.type))});else for(let o=0;o<f.length;o++){const i=this.element.node.shader.props[f[o].type],u=Object.keys(f[o].props);for(let h=0;h<u.length;h++)i[u[h]]=f[o].props[u[h]]}},set clipping(f){this.props.clipping=f},set overflow(f){this.props.clipping=!f},set font(f){this.props.fontFamily=f},set size(f){this.props.fontSize=f},set wordwrap(f){un.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=f,this.props.contain="width"},set maxwidth(f){this.props.width=f,this.props.contain="width"},set maxheight(f){this.props.height=f,this.props.contain="both"},set contain(f){this.props.contain=f},set maxlines(f){this.props.maxLines=f},set textoverflow(f){this.props.overflowSuffix=f===!1?" ":f===!0?void 0:f},set letterspacing(f){this.props.letterSpacing=f||1},set lineheight(f){this.props.lineHeight=f},set align(f){this.props.textAlign=f},set content(f){this.props.text=""+f},set placement(f){let o,i;typeof f=="object"||Or(f)===!0&&(f=Nr(f))?("x"in f&&(o=f.x),"y"in f&&(i=f.y)):f==="center"||f==="right"?o=f:i=f,o==="center"?(this.x="50%",this.props.mountX=.5):o==="right"&&(this.x="100%",this.props.mountX=1),i==="middle"?(this.y="50%",this.props.mountY=.5):i==="bottom"&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(f){(typeof f=="object"||Or(f)===!0&&(f=Nr(f)))&&(this.props.data=f)}},zR={populate(f){const o=f;o.node=this.config.node,o[ge.isSlot]===!0&&(this[ge.isSlot]=!0),this.props.element=this,this.props.parent=o.parent||this.config.parent,delete o.parent,this.props.raw=f;const i=Object.keys(o),u=i.length;for(let h=0;h<u;h++){const g=i[h],w=o[g];w!==void 0&&(this.props[g]=eg(w))}this.props.props.color===void 0&&!("__textnode"in o)&&(this.props.props.color=0),this.node=o.__textnode?Co.createTextNode({...tg,...this.props.props}):Co.createNode(this.props.props),o["@loaded"]!==void 0&&typeof o["@loaded"]=="function"&&this.node.on("loaded",(h,{type:g,dimensions:w})=>{o["@loaded"]({w:w.width,h:w.height,type:g},this)}),o["@error"]!==void 0&&typeof o["@error"]=="function"&&this.node.on("failed",(h,g)=>{o["@error"](g,this)}),o.__layout===!0&&(this.triggerLayout=jR.bind(this)),this.config.parent.props!==void 0&&this.config.parent.props.__layout===!0&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(f,o){if(o===void 0||this.props.raw[f]===o)return;this.props.raw[f]=o,this.props.props={},this.props[f]=eg(o);const i=Object.keys(this.props.props);if(i.length===1){if(fC(o)===!0)return this.animate(i[0],this.props.props[i[0]],o.transition);this.node[i[0]]=this.props.props[i[0]]}else for(let u=0;u<i.length;u++){if(fC(o)===!0)return this.animate(i[u],this.props.props[i[u]],o.transition);this.node[i[u]]=this.props.props[i[u]]}this.config.parent.props&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},animate(f,o,i){if(this.scheduledTransitions[f]!==void 0&&this.scheduledTransitions[f].f.state==="scheduled"&&this.scheduledTransitions[f].f.stop(),this.node[f]===o)return;const u={};u[f]=o;const h=this.node.animate(u,{duration:typeof i=="object"&&"duration"in i?i.duration:300,easing:typeof i=="object"&&"easing"in i?i.easing:"ease",delay:typeof i=="object"&&"delay"in i?i.delay:0}),g=this.node[f];if(this.scheduledTransitions[f]={v:u[f],f:h},i.start!==void 0&&typeof i.start=="function"&&h.once("animating",()=>{i.start.call(this.component,this,f,g)}),this.config.parent.props&&this.config.parent.props.__layout===!0&&h.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),i.progress!==void 0&&typeof i.progress=="function"){let w=0;h.on("tick",(s,{progress:m})=>{i.progress.call(this.component,this,f,m,w),w=m})}h.once("stopped",()=>{this.scheduledTransitions[f]!==void 0&&this.scheduledTransitions[f].canceled===!0||(i.end&&typeof i.end=="function"&&i.end.call(this.component,this,f,this.node[f]),delete this.scheduledTransitions[f])}),h.start()},destroy(){un.debug("Deleting  Node",this.nodeId),this.node.destroy();const f=Object.keys(this.scheduledTransitions);for(let o=0;o<f.length;o++){const i=this.scheduledTransitions[f[o]];i!==void 0&&(i.canceled=!0,i.f!==void 0&&i.f.stop())}},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){return this.component[ge.getChildren]().filter(f=>f.parent===(this[ge.isSlot]?this.node.children[0]:this.node))}},VR=(f,o)=>(tg===null&&(tg={fontSize:32,fontFamily:uo.get("defaultFont","sans-serif")}),Object.assign(Object.create(zR),{props:Object.assign(Object.create($R),{props:{}}),scheduledTransitions:{},config:f,component:o})),cC={Element:VR,Launch:UR},HR="@lightningjs/blits",GR="1.20.0",WR="Blits: The Lightning 3 App Development Framework",XR="bin/index.js",qR={".":"./index.js","./vite":"./vite/index.js","./transitions":"./src/router/transitions/index.js","./precompiler":"./src/lib/precompiler/precompiler.js","./plugins":"./src/plugins/index.js","./symbols":"./src/lib/symbols.js","./blitsFileConverter":"./src/lib/blitsfileconverter/blitsfileconverter.js"},KR={test:"c8 npm run test:run","test:run":"node -r global-jsdom/register ./node_modules/.bin/tape '{,!(node_modules|packages)/**/}*.test.js' | tap-diff",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",prepublishOnly:"node scripts/prepublishOnly.js",postpublish:"node scripts/postpublish.js"},YR="./index.d.ts",QR={hooks:{"pre-commit":"lint-staged"}},ZR="module",JR="Michiel van der Geest <hello@michielvandergeest.com>",e5="Apache-2.0",t5={"@babel/eslint-parser":"^7.26.5","@babel/plugin-syntax-import-assertions":"^7.26.0","babel-eslint":"^10.1.0",c8:"^8.0.1",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","global-jsdom":"24.0.0",husky:"^7.0.4",jsdom:"24.0.0","lint-staged":"^12.3.3",prettier:"^2.5.1","tap-diff":"^0.1.1",tape:"^5.5.0"},n5={"@lightningjs/msdf-generator":"^1.1.1","@lightningjs/renderer":"^2.12.0"},i5={type:"git",url:"https://github.com/lightning-js/blits.git"},hC={name:HR,version:GR,description:WR,bin:XR,exports:qR,scripts:KR,types:YR,"lint-staged":{"*.js":["eslint --fix"]},husky:QR,type:ZR,author:JR,license:e5,devDependencies:t5,dependencies:n5,repository:i5};let Pl={};const hg={},o5=(f,o,i)=>{uo.set(i),GM(),un.info("Blits Version ",hC.version),un.info("Renderer Version ",hC.dependencies["@lightningjs/renderer"]),hg.element=cC.Element,Pl=cC.Launch(f,o,i)},r5={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},Br=window.speechSynthesis,s5=()=>(window.navigator||{}).userAgent||"",dC=()=>/android/i.test(s5());let uT=!1,Gh=null;const dg=()=>Gh&&clearTimeout(Gh),ng=f=>{if(!f||Gh)return dg();Br.pause(),Br.resume(),Gh=setTimeout(()=>{ng(f)},5e3)},Oa={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},a5=()=>{Oa.voice=Br.getVoices()[0],uT=!0},u5=(f,o)=>{const i=new SpeechSynthesisUtterance(o.value);i.lang=o.lang||Oa.lang,i.pitch=o.pitch||Oa.pitch,i.rate=o.rate||Oa.rate,i.voice=o.voice||Oa.voice,i.volume=o.volume||Oa.volume,i.onstart=()=>{dC()||ng(i),f.onstart()},i.onresume=()=>{dC()||ng(i),f.onresume()},i.onpause=()=>{f.onpause()},i.onend=()=>{f.onend()},i.onerror=()=>{dg(),f.onerror()},Br.speak(i)},Dh={speak(f){uT||a5(),this.cancel(),u5(this,f)},resume(){Br.resume()},pause(){Br.pause()},cancel(){Br.cancel(),dg()},getVoices(){return Br.getVoices()},onend(){},onerror(){},onstart(){},onresume(){},onpause(){}};let pC;const pg=(f,o="off")=>{clearTimeout(pC),Dh.cancel(),o==="assertive"?Dh.speak({value:f}):pC=setTimeout(()=>{Dh.speak({value:f})},400)},l5=f=>pg(f,"polite"),f5=f=>pg(f,"assertive"),c5=()=>{Dh.cancel()},lT={speak:pg,polite:l5,assertive:f5,stop:c5};let jr;const Ha=Rl({path:null,navigating:!1}),fT=new WeakMap,cT=[];let hT={},dT={},ig=!1,pT;const h5=()=>{const f=(document.location.hash||"/").replace(/^#/,"").split("?");return{hash:f[0],queryParams:new URLSearchParams(f[1])}},mC=f=>f.replace(/^\/+|\/+$/g,"").toLowerCase(),d5=f=>typeof f=="object"&&f!==null,p5=f=>typeof f=="string",mT=(f,o=[])=>{const i=f;f=mC(f);let u=!1,h=0;for(;!u&&h<o.length;){const g=o[h];if(g.path=mC(g.path),g.path===f)g.params={},u=g;else if(g.path.indexOf(":")>-1){const w=[...g.path.matchAll(/:([^\s/]+)/gi)];let s=g.path;w.reverse().forEach(S=>{s=s.substring(0,S.index)+"([^\\s/]+)"+s.substring(S.index+S[0].length)});const m=i.match(new RegExp(`${s}`,"i"));m&&(g.params=w.reverse().reduce((S,v,y)=>(S[v[1]]=m[y+1],S),{}),u=g)}else if(g.path.endsWith("*")){const w=new RegExp(g.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),s=f.match(w);s&&(s[1]&&(g.params={path:s[1]}),u=g)}h++}return u&&(u.options={...u.options,...hT},u.data||(u.data={}),jr=u),u},m5=async function(){if(Ha.navigating=!0,this.parent[ge.routes]){const f=jr,{hash:o,queryParams:i}=h5();let u=mT(o,this.parent[ge.routes]),h;if(u){if(u.hooks&&u.hooks.before&&(h=await u.hooks.before.call(this.parent,u,f),p5(h))){jr=f,Ol(h);return}u=d5(h)?h:u,ig===!1&&f&&f.options.inHistory===!0&&cT.push(f),"transition"in u||(u.transition=r5),typeof u.transition=="function"&&(u.transition=u.transition(f,u));let g,{view:w,focus:s}=fT.get(u)||{};if(w){g=w[ge.holder];let S=!1;if(u.transition.before)if(Array.isArray(u.transition.before)){for(let v=0;v<u.transition.before.length;v++)if(u.transition.before[v].prop==="alpha"){S=!0;break}}else u.transition.before.prop==="alpha"&&(S=!0);S===!1&&g.set("alpha",1)}else{g=hg.element({parent:this[ge.children][0]}),g.populate({}),g.set("w","100%"),g.set("h","100%");const S={},v=[...i.entries()];for(let I=0;I<v.length;I++)S[v[I][0]]=v[I][1];const y={...this[ge.props],...u.params,...dT,...u.data,...S};w=await u.component({props:y},g,this),w[Symbol.toStringTag]==="Module"&&(w.default&&typeof w.default=="function"?w=w.default({props:y},g,this):un.error("Dynamic import doesn't have a default export or default is not a function")),typeof w=="function"&&(w=w({props:y},g,this))}if(this[ge.children].push(w),pT=Fa.get(),s?s.$focus():w.$focus(),u.transition.before)if(Array.isArray(u.transition.before))for(let S=0;S<u.transition.before.length;S++)g.set(u.transition.before[S].prop,u.transition.before[S].value);else g.set(u.transition.before.prop,u.transition.before.value);let m=!1;if(f){m=!0;const S=this[ge.children].splice(1,1).pop();S&&g5(f,S,u.transition.out)}if(Ha.path=u.path,u.transition.in)if(Array.isArray(u.transition.in))for(let S=0;S<u.transition.in.length;S++)S===u.transition.length-1?await Ga(g,u.transition.in[S],m):Ga(g,u.transition.in[S],m);else await Ga(g,u.transition.in,m);u.announce&&(typeof u.announce=="string"&&(u.announce={message:u.announce}),lT.speak(u.announce.message,u.announce.politeness)),this.activeView=this[ge.children][this[ge.children].length-1]}else un.error(`Route ${o} not found`)}ig=!1,Ha.navigating=!1},g5=async(f,o,i)=>{if(i)if(Array.isArray(i))for(let u=0;u<i.length;u++)u===i.length-1?await Ga(o[ge.holder],i[u]):Ga(o[ge.holder],i[u]);else await Ga(o[ge.holder],i);f.options&&f.options.keepAlive===!0?fT.set(f,{view:o,focus:pT}):(o.destroy(),o=null)},Ga=(f,o,i=!0)=>new Promise(u=>{if(i){const h=o.end;o.end=h?(...g)=>{h(...g),u()}:u,f.set(o.prop,{transition:o})}else f.set(o.prop,o.value),u()}),Ol=(f,o={},i={})=>{dT=o,hT=i,window.location.hash=`#${f}`},gT=function(){const f=cT.pop();if(f&&jr!==f){ig=!0;let g=f.path;return g.indexOf(":")>-1&&Object.keys(f.params).forEach(w=>{g=g.replace(`:${w}`,f.params[w])}),Ol(g),!0}const o=jr&&jr.options.backtrack||!1;if(o===!1)return!1;const i=/(\/:?[\w%\s-]+)$/;let u=jr.path,h=u.split("/").length;if(h<=1)return!1;for(;h--;){if(!i.test(u))return!1;u=u.replace(i,"");const g=mT(u,this.parent[ge.routes]);if(g&&o)return Ol(g.path),!0}return!1},Mm={navigate:m5,to:Ol,back:gT};let mr=null,Sh=[],gC;const og=new Map,Fa={_hold:!1,set hold(f){this._hold=f},get hold(){return this._hold},get(){return mr},set(f,o){f!==mr&&(clearTimeout(gC),mr&&mr!==f.parent&&mr.unfocus(),Sh.reverse().forEach(i=>i.unfocus()),f!==mr&&(gC=setTimeout(()=>{mr=f,mr.lifecycle.state="focus",o instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",o)):Sh=[]},this.hold?uo.get("holdTimeout",aT):0)))},input(f,o){if(Ha.navigating===!0)return;Sh=yT([mr],f);const i=Sh.shift();if(i){let u;i[ge.inputEvents][f]?u=i[ge.inputEvents][f].call(i,o):i[ge.inputEvents].any&&(u=i[ge.inputEvents].any.call(i,o)),u!==void 0&&og.set(o.code,u)}}},yT=(f,o)=>f[0][ge.inputEvents]&&(typeof f[0][ge.inputEvents][o]=="function"||typeof f[0][ge.inputEvents].any=="function")?f:f[0].parent?(f.unshift(f[0].parent),yT(f,o)):[],cs=new Map,ka=new Map,Ph={registerListener(f,o,i,u=0){let h=cs.get(o);h===void 0&&(h=new Map,cs.set(o,h));let g=h.get(f);g===void 0&&(g=new Set,h.set(f,g)),g.add({cb:i,priority:u}),ka.delete(o)},deregisterListener(f,o){let i=cs.get(o);i!==void 0&&i.contains(f)&&(i.delete(f),cs.set(o,i),ka.delete(o))},executeListeners(f,o){const i=cs.get(f);if(i===void 0||i.size===0)return!0;if(ka.has(f)===!1){const h=[];for(const[g,w]of i)for(const s of w)h.push({...s,component:g});h.sort((g,w)=>w.priority-g.priority),ka.set(f,h)}const u=ka.get(f);for(let h=0;h<u.length;h++){const{cb:g,component:w}=u[h];if(g.call(w,o)===!1)return!1}return!0},removeListeners(f){for(const[o,i]of cs)i.has(f)&&(i.delete(f),ka.delete(o),i.size===0&&cs.delete(o))}},y5={focus:{value:function(f){return un.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(f)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(f){this[ge.state].hasFocus=!0,Fa.set(this,f)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[ge.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy",this.$clearTimeouts(),this.$clearIntervals(),Ph.removeListeners(this),vT(this[ge.children]),HS(this[ge.effects]),un.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},[ge.removeGlobalEffects]:{value:function(f=[]){HS(f)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(f){return un.warn("this.select is deprecated, use this.$select instead"),this.$select(f)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(f){let o=null;return this[ge.children].forEach(i=>{Array.isArray(i)?i.forEach(u=>{u.ref===f&&(o=u)}):Object.getPrototypeOf(i)===Object.prototype?Object.keys(i).forEach(u=>{i[u].ref===f&&(o=i[u])}):i.ref===f&&(o=i)}),o},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(f){return un.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(f)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(f){let o=this[ge.originalState];if(f.indexOf(".")>-1){const i=f.split(".");f=i.pop(i);for(let u=0;u<i.length;u++)o=o[i[u]]}Va(o,f,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(f,o){return{type:f,props:o}},writable:!1,enumerable:!0,configurable:!1}},vT=function(f){for(let o=0;o<f.length;o++){if(!f[o])return;f[o].destroy&&typeof f[o].destroy=="function"?f[o].destroy():Object.getPrototypeOf(f[o])===Object.prototype&&vT(Object.values(f[o])),f[o]=null}f.length=0},v5={$setTimeout:{value:function(f,o,...i){const u=setTimeout(()=>{this[ge.timeouts]=this[ge.timeouts].filter(h=>h!==u),f.apply(null,i)},o,i);return this[ge.timeouts].push(u),u},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(f){this[ge.timeouts].indexOf(f)>-1&&(this[ge.timeouts]=this[ge.timeouts].filter(o=>o!==f),clearTimeout(f))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let f=0;f<this[ge.timeouts].length;f++)clearTimeout(this[ge.timeouts][f]);this[ge.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(f,o,...i){const u=setInterval(()=>f.apply(null,i),o,i);return this[ge.intervals].push(u),u},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(f){this[ge.intervals].indexOf(f)>-1&&(this[ge.intervals]=this[ge.intervals].filter(o=>o!==f),clearInterval(f))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let f=0;f<this[ge.intervals].length;f++)clearInterval(this[ge.intervals][f]);this[ge.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},x5={$emit:{value:function(f,o){return Ph.executeListeners(f,o)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(f,o,i=0){Ph.registerListener(this,f,o,i)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(f){Ph.deregisterListener(this,f)},writable:!1,enumerable:!0,configurable:!1}},w5={$router:{value:{to:Ol,back:gT,get currentRoute(){return jr},get routes(){return this[ge.routes]},get navigating(){return Ha.navigating},state:Ha},writable:!1,enumerable:!0,configurable:!1}},S5={$announcer:{value:lT,writable:!1,enumerable:!0,configurable:!1}},C5={$size:{value:function(f={w:0,h:0}){this[ge.holder].set("w",f.w||0),this[ge.holder].set("h",f.h||0)},writable:!1,enumerable:!0,configurable:!1},[ge.renderer]:{value:()=>Pl,writable:!1,enumerable:!0,configurable:!1},[ge.getChildren]:{value(){const f=this.rootParent||this.parent;return(this[ge.children]||[]).concat(f&&f[ge.getChildren]().map(o=>Object.getPrototypeOf(o)===Object.prototype?Object.values(o).map(i=>(i.forComponent=i.config&&i.config.parent.component,i)):o).flat().filter(o=>{if(o&&o.component)return o.component&&o.component.componentId===this.componentId||o.forComponent&&o.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},hl=Object.defineProperties({[ge.launched]:!1},{...y5,...v5,...x5,...w5,...S5,...C5}),T5={cast:f=>f,required:!1},b5=(f,o=[])=>{o.indexOf("ref")===-1&&o.push("ref"),f[ge.propKeys]=[];const i=o.length;for(let u=0;u<i;u++){const h={...T5,...typeof o[u]=="object"?o[u]:{key:o[u]}};f[ge.propKeys].push(h.key),Object.defineProperty(f,h.key,{get(){const g=h.cast(this[ge.props]!==void 0&&h.key in this[ge.props]?this[ge.props][h.key]:"default"in h?h.default:void 0);return h.required===!0&&g===void 0&&un.warn(`${h.key} is required`),g},set(g){un.warn(`Warning! Avoid mutating props directly (${h.key})`),this[ge.props][h.key]=g}})}},E5=(f,o)=>{f[ge.methodKeys]=[];for(let i in o)f[ge.propKeys]&&f[ge.propKeys].indexOf(i)>-1?un.error(`${i} already exists as a prop`):(typeof o[i]!="function"&&un.warn(`${i} is not a function`),f[ge.methodKeys].push(i),f[i]=o[i])},k5=(f,o=()=>{})=>{Object.defineProperty(f,ge.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const i=Object.keys(o.apply(f)||{});i.push(["hasFocus"]);const u=i.length;for(let h=0;h<u;h++){const g=i[h];f[ge.propKeys]!==void 0&&f[ge.propKeys].indexOf(g)>-1&&un.error(`State ${g} already exists as a prop`),f[ge.methodKeys]!==void 0&&f[ge.methodKeys].indexOf(g)>-1&&un.error(`State ${g} already exists as a method`),f[ge.stateKeys].push(g),Object.defineProperty(f,g,{get(){return this[ge.state][g]},set(w){this[ge.state][g]=w}})}},A5=(f,o)=>{f[ge.computedKeys]=[];for(let i in o)f[ge.stateKeys]&&f[ge.stateKeys].indexOf(i)>-1?un.error(`${i} already exists as a state variable`):f[ge.propKeys]&&f[ge.propKeys].indexOf(i)>-1?un.error(`${i} already exists as a prop`):f[ge.methodKeys]&&f[ge.methodKeys].indexOf(i)>-1?un.error(`${i} already exists as a method`):(typeof o[i]!="function"&&un.warn(`${i} is not a function`),f[ge.computedKeys].push(i),Object.defineProperty(f,i,{get(){return o[i].apply(this)}}))},I5=(f,o)=>{f[ge.inputEvents]=[],Object.keys(o).forEach(i=>{typeof o[i]!="function"&&un.warn(`${o[i]} is not a function`),f[ge.inputEvents][i]=o[i]})},M5=(f,o)=>{f[ge.routes]=[],Object.keys(o).forEach(i=>{f[ge.routes][i]={...o[i],options:{inHistory:!0,...o[i].options}}})},_5=(f,o)=>{f[ge.watchKeys]=[],f[ge.watchers]={};for(let i in o)typeof o[i]!="function"&&console.warn(`${i} is not a function`),f[ge.watchKeys].push(i),f[ge.watchers][i]=function(u,h){o[i].call(this,u,h)}};let R5=0;function L5(f,o){return f[ge.identifier]=++R5,f[ge.effects]=[],r_(o.hooks,f[ge.identifier]),b5(f,o.props),o.methods&&E5(f,o.methods),k5(f,o.state),o.computed&&A5(f,o.computed),o.watch&&_5(f,o.watch),o.routes&&M5(f,o.routes),o.input&&I5(f,o.input),f}const D5=()=>qa("Circle",{code:{render:function(o,i,u,h,g,w){const s=[],m={};return s[0]=this.element({parent:o||"root"},i),m.color=i.color,m.w=i.size,m.h=i.size,m.effects=[i.shader("radius",{radius:i.radius})],s[0].populate(m),s},effects:[function(o,i,u,h,g,w){i[0].set("color",o.color)},function(o,i,u,h,g,w){i[0].set("w",o.size)},function(o,i,u,h,g,w){i[0].set("h",o.size)},function(o,i,u,h,g,w){i[0].set("effects",[o.shader("radius",{radius:o.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let _m=null;const P5=()=>qa("RouterView",{code:{render:function(o,i,u,h,g,w){const s=[],m={};return s[0]=this.element({parent:o||"root"},i),m.w=o.node.width*(100/100),m.height=o.node.height*(100/100),s[0].populate(m),s},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){_m=()=>Mm.navigate.apply(this),Mm.navigate.apply(this),window.addEventListener("hashchange",_m)},destroy(){window.removeEventListener("hashchange",_m,!1)},focus(){this.activeView&&this.activeView.$focus()}},input:{back(f){Mm.back.call(this)===!1&&this.parent.$focus(f)}}}),O5=()=>qa("Sprite",{code:{render:function(o,i,u,h,g,w){const s=[],m={};return s[0]=this.element({parent:o||"root"},i),m.w=o.node.width*(100/100),m.h=o.node.height*(100/100),m.texture=i.texture,m.color=i.color,s[0].populate(m),s},effects:[function(o,i,u,h,g,w){i[0].set("texture",o.texture)},function(o,i,u,h,g,w){i[0].set("color",o.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:null}},computed:{texture(){const f="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture!==null&&f)return this[ge.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:f.x,y:f.y,width:f.w,height:f.h})}},hooks:{ready(){this.spriteTexture=this[ge.renderer]().createTexture("ImageTexture",{src:this.image})}}}),N5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",U5=()=>qa("FPScounter",{code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.y=15,T.x=20,s[1].populate(T),y===!0&&(I-=1),o=s[1];const L={};s[2]=this.element({parent:o||"root"},y===!0?v:i),s[2].populate(L),y===!0&&(I-=1);const B=u.components&&u.components.Sprite||h.Sprite;o=s[2];const N={};s[3]=this.element({parent:o||"root"},y===!0?v:i),N.image=i.image,N.w=43,N.h=25,N.map=i.sprite,N.frame="fps";const z=[];if(typeof B<"u")for(let dt in B.config.props)delete N[B.config.props[dt]],z.push(B.config.props[dt]);s[3].populate(N),y===!0&&(I-=1),o=s[3];const F={};F.image=i.image,F.w=43,F.h=25,F.map=i.sprite,F.frame="fps",m=F.is||"Sprite";let H;if(typeof m=="string"){if(H=u.components&&u.components[m]||h[m],!H)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(H=m);s[4]=H.call(null,{props:F},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],v=s[4],y=!0):o=s[4][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[2];const X={};s[5]=this.element({parent:o||"root"},y===!0?v:i),X.x=58,X.y=2,s[5].populate(X),y===!0&&(I-=1);const $=u.components&&u.components.Sprite||h.Sprite;o=s[5];const oe={};s[6]=this.element({parent:o||"root"},y===!0?v:i),oe.image=i.image,oe.x=0,oe.h=20,oe.w=20,oe.map=i.sprite,oe.frame=i.fps[0];const fe=[];if(typeof $<"u")for(let dt in $.config.props)delete oe[$.config.props[dt]],fe.push($.config.props[dt]);s[6].populate(oe),y===!0&&(I-=1),o=s[6];const le={};le.image=i.image,le.x=0,le.h=20,le.w=20,le.map=i.sprite,S=i.fps[0],Array.isArray(S)===!0&&(S=w(S).slice(0)),le.frame=S,m=le.is||"Sprite";let A;if(typeof m=="string"){if(A=u.components&&u.components[m]||h[m],!A)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(A=m);s[7]=A.call(null,{props:le},s[6],i),s[7][Symbol.for("slots")][0]?(o=s[7][Symbol.for("slots")][0],v=s[7],y=!0):o=s[7][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Y=u.components&&u.components.Sprite||h.Sprite;o=s[5];const Q={};s[8]=this.element({parent:o||"root"},y===!0?v:i),Q.image=i.image,Q.x=18,Q.h=20,Q.w=20,Q.map=i.sprite,Q.frame=i.fps[1];const ee=[];if(typeof Y<"u")for(let dt in Y.config.props)delete Q[Y.config.props[dt]],ee.push(Y.config.props[dt]);s[8].populate(Q),y===!0&&(I-=1),o=s[8];const q={};q.image=i.image,q.x=18,q.h=20,q.w=20,q.map=i.sprite,S=i.fps[1],Array.isArray(S)===!0&&(S=w(S).slice(0)),q.frame=S,m=q.is||"Sprite";let W;if(typeof m=="string"){if(W=u.components&&u.components[m]||h[m],!W)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[9]=W.call(null,{props:q},s[8],i),s[9][Symbol.for("slots")][0]?(o=s[9][Symbol.for("slots")][0],v=s[9],y=!0):o=s[9][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ie=u.components&&u.components.Sprite||h.Sprite;o=s[5];const ue={};s[10]=this.element({parent:o||"root"},y===!0?v:i),ue.image=i.image,ue.x=36,ue.h=20,ue.w=20,ue.map=i.sprite,ue.frame=i.fps[2];const ve=[];if(typeof ie<"u")for(let dt in ie.config.props)delete ue[ie.config.props[dt]],ve.push(ie.config.props[dt]);s[10].populate(ue),y===!0&&(I-=1),o=s[10];const Te={};Te.image=i.image,Te.x=36,Te.h=20,Te.w=20,Te.map=i.sprite,S=i.fps[2],Array.isArray(S)===!0&&(S=w(S).slice(0)),Te.frame=S,m=Te.is||"Sprite";let xe;if(typeof m=="string"){if(xe=u.components&&u.components[m]||h[m],!xe)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xe=m);s[11]=xe.call(null,{props:Te},s[10],i),s[11][Symbol.for("slots")][0]?(o=s[11][Symbol.for("slots")][0],v=s[11],y=!0):o=s[11][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[1];const ke={};s[12]=this.element({parent:o||"root"},y===!0?v:i),ke.x=150,s[12].populate(ke),y===!0&&(I-=1);const pe=u.components&&u.components.Sprite||h.Sprite;o=s[12];const Le={};s[13]=this.element({parent:o||"root"},y===!0?v:i),Le.image=i.image,Le.y=2,Le.w=48,Le.h=25,Le.map=i.sprite,Le.frame="avg";const G=[];if(typeof pe<"u")for(let dt in pe.config.props)delete Le[pe.config.props[dt]],G.push(pe.config.props[dt]);s[13].populate(Le),y===!0&&(I-=1),o=s[13];const Ie={};Ie.image=i.image,Ie.y=2,Ie.w=48,Ie.h=25,Ie.map=i.sprite,Ie.frame="avg",m=Ie.is||"Sprite";let Oe;if(typeof m=="string"){if(Oe=u.components&&u.components[m]||h[m],!Oe)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Oe=m);s[14]=Oe.call(null,{props:Ie},s[13],i),s[14][Symbol.for("slots")][0]?(o=s[14][Symbol.for("slots")][0],v=s[14],y=!0):o=s[14][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[12];const Be={};s[15]=this.element({parent:o||"root"},y===!0?v:i),Be.x=63,Be.y=2,s[15].populate(Be),y===!0&&(I-=1);const Ve=u.components&&u.components.Sprite||h.Sprite;o=s[15];const qe={};s[16]=this.element({parent:o||"root"},y===!0?v:i),qe.image=i.image,qe.x=0,qe.h=20,qe.w=20,qe.map=i.sprite,qe.frame=i.avgFps[0];const ze=[];if(typeof Ve<"u")for(let dt in Ve.config.props)delete qe[Ve.config.props[dt]],ze.push(Ve.config.props[dt]);s[16].populate(qe),y===!0&&(I-=1),o=s[16];const it={};it.image=i.image,it.x=0,it.h=20,it.w=20,it.map=i.sprite,S=i.avgFps[0],Array.isArray(S)===!0&&(S=w(S).slice(0)),it.frame=S,m=it.is||"Sprite";let me;if(typeof m=="string"){if(me=u.components&&u.components[m]||h[m],!me)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(me=m);s[17]=me.call(null,{props:it},s[16],i),s[17][Symbol.for("slots")][0]?(o=s[17][Symbol.for("slots")][0],v=s[17],y=!0):o=s[17][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const wt=u.components&&u.components.Sprite||h.Sprite;o=s[15];const ft={};s[18]=this.element({parent:o||"root"},y===!0?v:i),ft.image=i.image,ft.x=18,ft.h=20,ft.w=20,ft.map=i.sprite,ft.frame=i.avgFps[1];const rt=[];if(typeof wt<"u")for(let dt in wt.config.props)delete ft[wt.config.props[dt]],rt.push(wt.config.props[dt]);s[18].populate(ft),y===!0&&(I-=1),o=s[18];const St={};St.image=i.image,St.x=18,St.h=20,St.w=20,St.map=i.sprite,S=i.avgFps[1],Array.isArray(S)===!0&&(S=w(S).slice(0)),St.frame=S,m=St.is||"Sprite";let nt;if(typeof m=="string"){if(nt=u.components&&u.components[m]||h[m],!nt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(nt=m);s[19]=nt.call(null,{props:St},s[18],i),s[19][Symbol.for("slots")][0]?(o=s[19][Symbol.for("slots")][0],v=s[19],y=!0):o=s[19][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const st=u.components&&u.components.Sprite||h.Sprite;o=s[15];const Xe={};s[20]=this.element({parent:o||"root"},y===!0?v:i),Xe.image=i.image,Xe.x=36,Xe.h=20,Xe.w=20,Xe.map=i.sprite,Xe.frame=i.avgFps[2];const He=[];if(typeof st<"u")for(let dt in st.config.props)delete Xe[st.config.props[dt]],He.push(st.config.props[dt]);s[20].populate(Xe),y===!0&&(I-=1),o=s[20];const Pe={};Pe.image=i.image,Pe.x=36,Pe.h=20,Pe.w=20,Pe.map=i.sprite,S=i.avgFps[2],Array.isArray(S)===!0&&(S=w(S).slice(0)),Pe.frame=S,m=Pe.is||"Sprite";let J;if(typeof m=="string"){if(J=u.components&&u.components[m]||h[m],!J)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(J=m);s[21]=J.call(null,{props:Pe},s[20],i),s[21][Symbol.for("slots")][0]?(o=s[21][Symbol.for("slots")][0],v=s[21],y=!0):o=s[21][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[1];const Ge={};s[22]=this.element({parent:o||"root"},y===!0?v:i),Ge.x=0,Ge.y=40,s[22].populate(Ge),y===!0&&(I-=1);const Ye=u.components&&u.components.Sprite||h.Sprite;o=s[22];const ht={};s[23]=this.element({parent:o||"root"},y===!0?v:i),ht.image=i.image,ht.x=-2,ht.w=47,ht.h=25,ht.map=i.sprite,ht.frame="min";const vt=[];if(typeof Ye<"u")for(let dt in Ye.config.props)delete ht[Ye.config.props[dt]],vt.push(Ye.config.props[dt]);s[23].populate(ht),y===!0&&(I-=1),o=s[23];const Ae={};Ae.image=i.image,Ae.x=-2,Ae.w=47,Ae.h=25,Ae.map=i.sprite,Ae.frame="min",m=Ae.is||"Sprite";let Ue;if(typeof m=="string"){if(Ue=u.components&&u.components[m]||h[m],!Ue)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);s[24]=Ue.call(null,{props:Ae},s[23],i),s[24][Symbol.for("slots")][0]?(o=s[24][Symbol.for("slots")][0],v=s[24],y=!0):o=s[24][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[22];const Ze={};s[25]=this.element({parent:o||"root"},y===!0?v:i),Ze.x=58,Ze.y=2,s[25].populate(Ze),y===!0&&(I-=1);const Ce=u.components&&u.components.Sprite||h.Sprite;o=s[25];const ce={};s[26]=this.element({parent:o||"root"},y===!0?v:i),ce.image=i.image,ce.x=0,ce.h=20,ce.w=20,ce.map=i.sprite,ce.frame=i.minFps[0];const Ne=[];if(typeof Ce<"u")for(let dt in Ce.config.props)delete ce[Ce.config.props[dt]],Ne.push(Ce.config.props[dt]);s[26].populate(ce),y===!0&&(I-=1),o=s[26];const xt={};xt.image=i.image,xt.x=0,xt.h=20,xt.w=20,xt.map=i.sprite,S=i.minFps[0],Array.isArray(S)===!0&&(S=w(S).slice(0)),xt.frame=S,m=xt.is||"Sprite";let Ut;if(typeof m=="string"){if(Ut=u.components&&u.components[m]||h[m],!Ut)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ut=m);s[27]=Ut.call(null,{props:xt},s[26],i),s[27][Symbol.for("slots")][0]?(o=s[27][Symbol.for("slots")][0],v=s[27],y=!0):o=s[27][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Ft=u.components&&u.components.Sprite||h.Sprite;o=s[25];const Tt={};s[28]=this.element({parent:o||"root"},y===!0?v:i),Tt.image=i.image,Tt.x=18,Tt.h=20,Tt.w=20,Tt.map=i.sprite,Tt.frame=i.minFps[1];const Vt=[];if(typeof Ft<"u")for(let dt in Ft.config.props)delete Tt[Ft.config.props[dt]],Vt.push(Ft.config.props[dt]);s[28].populate(Tt),y===!0&&(I-=1),o=s[28];const ln={};ln.image=i.image,ln.x=18,ln.h=20,ln.w=20,ln.map=i.sprite,S=i.minFps[1],Array.isArray(S)===!0&&(S=w(S).slice(0)),ln.frame=S,m=ln.is||"Sprite";let pi;if(typeof m=="string"){if(pi=u.components&&u.components[m]||h[m],!pi)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pi=m);s[29]=pi.call(null,{props:ln},s[28],i),s[29][Symbol.for("slots")][0]?(o=s[29][Symbol.for("slots")][0],v=s[29],y=!0):o=s[29][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Qn=u.components&&u.components.Sprite||h.Sprite;o=s[25];const zn={};s[30]=this.element({parent:o||"root"},y===!0?v:i),zn.image=i.image,zn.x=36,zn.h=20,zn.w=20,zn.map=i.sprite,zn.frame=i.minFps[2];const Vn=[];if(typeof Qn<"u")for(let dt in Qn.config.props)delete zn[Qn.config.props[dt]],Vn.push(Qn.config.props[dt]);s[30].populate(zn),y===!0&&(I-=1),o=s[30];const In={};In.image=i.image,In.x=36,In.h=20,In.w=20,In.map=i.sprite,S=i.minFps[2],Array.isArray(S)===!0&&(S=w(S).slice(0)),In.frame=S,m=In.is||"Sprite";let ni;if(typeof m=="string"){if(ni=u.components&&u.components[m]||h[m],!ni)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ni=m);s[31]=ni.call(null,{props:In},s[30],i),s[31][Symbol.for("slots")][0]?(o=s[31][Symbol.for("slots")][0],v=s[31],y=!0):o=s[31][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[1];const yn={};s[32]=this.element({parent:o||"root"},y===!0?v:i),yn.x=150,yn.y=40,s[32].populate(yn),y===!0&&(I-=1);const Me=u.components&&u.components.Sprite||h.Sprite;o=s[32];const $e={};s[33]=this.element({parent:o||"root"},y===!0?v:i),$e.image=i.image,$e.w=53,$e.h=25,$e.map=i.sprite,$e.frame="max";const Qt=[];if(typeof Me<"u")for(let dt in Me.config.props)delete $e[Me.config.props[dt]],Qt.push(Me.config.props[dt]);s[33].populate($e),y===!0&&(I-=1),o=s[33];const Sn={};Sn.image=i.image,Sn.w=53,Sn.h=25,Sn.map=i.sprite,Sn.frame="max",m=Sn.is||"Sprite";let En;if(typeof m=="string"){if(En=u.components&&u.components[m]||h[m],!En)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(En=m);s[34]=En.call(null,{props:Sn},s[33],i),s[34][Symbol.for("slots")][0]?(o=s[34][Symbol.for("slots")][0],v=s[34],y=!0):o=s[34][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[32];const dn={};s[35]=this.element({parent:o||"root"},y===!0?v:i),dn.x=63,dn.y=2,s[35].populate(dn),y===!0&&(I-=1);const Mn=u.components&&u.components.Sprite||h.Sprite;o=s[35];const _n={};s[36]=this.element({parent:o||"root"},y===!0?v:i),_n.image=i.image,_n.x=0,_n.h=20,_n.w=20,_n.map=i.sprite,_n.frame=i.maxFps[0];const Wn=[];if(typeof Mn<"u")for(let dt in Mn.config.props)delete _n[Mn.config.props[dt]],Wn.push(Mn.config.props[dt]);s[36].populate(_n),y===!0&&(I-=1),o=s[36];const Ct={};Ct.image=i.image,Ct.x=0,Ct.h=20,Ct.w=20,Ct.map=i.sprite,S=i.maxFps[0],Array.isArray(S)===!0&&(S=w(S).slice(0)),Ct.frame=S,m=Ct.is||"Sprite";let et;if(typeof m=="string"){if(et=u.components&&u.components[m]||h[m],!et)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(et=m);s[37]=et.call(null,{props:Ct},s[36],i),s[37][Symbol.for("slots")][0]?(o=s[37][Symbol.for("slots")][0],v=s[37],y=!0):o=s[37][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Un=u.components&&u.components.Sprite||h.Sprite;o=s[35];const Ht={};s[38]=this.element({parent:o||"root"},y===!0?v:i),Ht.image=i.image,Ht.x=18,Ht.h=20,Ht.w=20,Ht.map=i.sprite,Ht.frame=i.maxFps[1];const Rn=[];if(typeof Un<"u")for(let dt in Un.config.props)delete Ht[Un.config.props[dt]],Rn.push(Un.config.props[dt]);s[38].populate(Ht),y===!0&&(I-=1),o=s[38];const pn={};pn.image=i.image,pn.x=18,pn.h=20,pn.w=20,pn.map=i.sprite,S=i.maxFps[1],Array.isArray(S)===!0&&(S=w(S).slice(0)),pn.frame=S,m=pn.is||"Sprite";let Lt;if(typeof m=="string"){if(Lt=u.components&&u.components[m]||h[m],!Lt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Lt=m);s[39]=Lt.call(null,{props:pn},s[38],i),s[39][Symbol.for("slots")][0]?(o=s[39][Symbol.for("slots")][0],v=s[39],y=!0):o=s[39][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Si=u.components&&u.components.Sprite||h.Sprite;o=s[35];const Cn={};s[40]=this.element({parent:o||"root"},y===!0?v:i),Cn.image=i.image,Cn.x=36,Cn.h=20,Cn.w=20,Cn.map=i.sprite,Cn.frame=i.maxFps[2];const To=[];if(typeof Si<"u")for(let dt in Si.config.props)delete Cn[Si.config.props[dt]],To.push(Si.config.props[dt]);s[40].populate(Cn),y===!0&&(I-=1),o=s[40];const lt={};lt.image=i.image,lt.x=36,lt.h=20,lt.w=20,lt.map=i.sprite,S=i.maxFps[2],Array.isArray(S)===!0&&(S=w(S).slice(0)),lt.frame=S,m=lt.is||"Sprite";let _e;if(typeof m=="string"){if(_e=u.components&&u.components[m]||h[m],!_e)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(_e=m);return s[41]=_e.call(null,{props:lt},s[40],i),s[41][Symbol.for("slots")][0]?(o=s[41][Symbol.for("slots")][0],v=s[41],y=!0):o=s[41][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){(typeof skip6>"u"||skip6.indexOf("frame")===-1)&&i[6].set("frame",o.fps[0])},function(o,i,u,h,g,w){i[7][Symbol.for("props")].frame=o.fps[0]},function(o,i,u,h,g,w){(typeof skip8>"u"||skip8.indexOf("frame")===-1)&&i[8].set("frame",o.fps[1])},function(o,i,u,h,g,w){i[9][Symbol.for("props")].frame=o.fps[1]},function(o,i,u,h,g,w){(typeof skip10>"u"||skip10.indexOf("frame")===-1)&&i[10].set("frame",o.fps[2])},function(o,i,u,h,g,w){i[11][Symbol.for("props")].frame=o.fps[2]},function(o,i,u,h,g,w){(typeof skip16>"u"||skip16.indexOf("frame")===-1)&&i[16].set("frame",o.avgFps[0])},function(o,i,u,h,g,w){i[17][Symbol.for("props")].frame=o.avgFps[0]},function(o,i,u,h,g,w){(typeof skip18>"u"||skip18.indexOf("frame")===-1)&&i[18].set("frame",o.avgFps[1])},function(o,i,u,h,g,w){i[19][Symbol.for("props")].frame=o.avgFps[1]},function(o,i,u,h,g,w){(typeof skip20>"u"||skip20.indexOf("frame")===-1)&&i[20].set("frame",o.avgFps[2])},function(o,i,u,h,g,w){i[21][Symbol.for("props")].frame=o.avgFps[2]},function(o,i,u,h,g,w){(typeof skip26>"u"||skip26.indexOf("frame")===-1)&&i[26].set("frame",o.minFps[0])},function(o,i,u,h,g,w){i[27][Symbol.for("props")].frame=o.minFps[0]},function(o,i,u,h,g,w){(typeof skip28>"u"||skip28.indexOf("frame")===-1)&&i[28].set("frame",o.minFps[1])},function(o,i,u,h,g,w){i[29][Symbol.for("props")].frame=o.minFps[1]},function(o,i,u,h,g,w){(typeof skip30>"u"||skip30.indexOf("frame")===-1)&&i[30].set("frame",o.minFps[2])},function(o,i,u,h,g,w){i[31][Symbol.for("props")].frame=o.minFps[2]},function(o,i,u,h,g,w){(typeof skip36>"u"||skip36.indexOf("frame")===-1)&&i[36].set("frame",o.maxFps[0])},function(o,i,u,h,g,w){i[37][Symbol.for("props")].frame=o.maxFps[0]},function(o,i,u,h,g,w){(typeof skip38>"u"||skip38.indexOf("frame")===-1)&&i[38].set("frame",o.maxFps[1])},function(o,i,u,h,g,w){i[39][Symbol.for("props")].frame=o.maxFps[1]},function(o,i,u,h,g,w){(typeof skip40>"u"||skip40.indexOf("frame")===-1)&&i[40].set("frame",o.maxFps[2])},function(o,i,u,h,g,w){i[41][Symbol.for("props")].frame=o.maxFps[2]}],context:{}},state(){return{image:N5,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){let f=1e4,o=0,i=0,u=0,h=0;Pl.on("fpsUpdate",(g,{fps:w})=>{f=Math.min(w,f),o=Math.max(w,o),u+=w,h++,i=Math.round(u/h),this.fps=w.toString().padStart(3,"0"),this.avgFps=i.toString().padStart(3,"0"),this.minFps=f.toString().padStart(3,"0"),this.maxFps=o.toString().padStart(3,"0")})}}}),B5=()=>({Circle:D5(),RouterView:P5(),Sprite:O5(),FPScounter:U5()}),j5={name:"log",plugin(){return UC("App")}},rg={log:j5},xT=(f,o="",i={})=>{let u;if(typeof o=="object"?i=o:u=o,typeof f=="function"){if(u===void 0)throw Error("Error registering plugin: name is required for plugin");rg[u]={plugin:f,options:i}}else f.plugin&&xT(f.plugin,u||f.name,i)};let Rm;const yC=f=>{throw new Error(`Parameter ${f} is required`)},qa=(f=yC("name"),o=yC("config"))=>{let i;const u=function(g,w,s,m){this.componentId=n_(f),this.lifecycle=Object.assign(Object.create(f_),{component:this,previous:null,current:null}),this.parent=s,this.rootParent=m,this[ge.holder]=w,this[ge.id]=i_(),this[ge.props]=Rl(g.props||{},uo.get("reactivityMode")),this[ge.timeouts]=[],this[ge.intervals]=[],this[ge.originalState]=o.state&&typeof o.state=="function"&&o.state.apply(this)||{},this[ge.originalState].hasFocus=!1,this[ge.state]=Rl(this[ge.originalState],uo.get("reactivityMode")),this.lifecycle.state="init",this[ge.children]=o.code.render.apply(hg,[w,this,o,Rm,fh,ds])||[],this[ge.wrapper]=this[ge.children][0],this[ge.slots]=this[ge.children].filter(v=>v[ge.isSlot]),o.hooks&&(o.hooks.frameTick&&Pl.on("frameTick",(v,y)=>$m("frameTick",this[ge.identifier],this,[y])),o.hooks.idle&&Pl.on("idle",()=>{$m("idle",this[ge.identifier],this)}),o.hooks.attach&&this[ge.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),o.hooks.detach&&this[ge.wrapper].node.on("outOfBounds",(v,{previous:y})=>{y>0&&(this.lifecycle.state="detach")}),o.hooks.enter&&this[ge.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),o.hooks.exit&&this[ge.wrapper].node.on("outOfViewport",()=>{this.lifecycle.state="exit"}));const S=o.code.effects;for(let v=0;v<S.length;v++){const y=()=>{S[v](this,this[ge.children],o,Rm,m,fh)};this[ge.effects].push(y),fh(y)}if(this[ge.watchers]){const v=Object.keys(this[ge.watchers]),y=v.length;for(let I=0;I<y;I++){let D=this,T=v[I];const L=T;if(T.indexOf(".")>-1){const N=T.split(".");T=N.pop();for(let z=0;z<N.length;z++)D=D[N[z]]}let B=this[T];fh((N=!1)=>{const z=D[T];(B!==z||N===!0)&&(this[ge.watchers][L].apply(this,[z,B]),B=z)})}}return setTimeout(()=>this.lifecycle.state="ready"),this},h=(g={},w,s,m)=>{if(hl[ge.launched]===!1){const S=Object.keys(rg),v=S.length;for(let y=0;y<v;y++){const I=S[y],D=`$${I}`;D in hl&&un.warn(`"${I}" (this.${D}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const T=rg[I];Object.defineProperty(hl,D,{value:T.plugin(T.options),writable:!1,enumerable:!0,configurable:!1})}Rm=B5(),hl[ge.launched]=!0}return i===void 0&&(un.debug(`Setting up ${f} component`),i=L5(Object.create(hl),o)),o.code===void 0&&(un.debug(`Generating code for ${f} component`),o.code=YM.call(o,KM(o.template,f))),u.call(Object.create(i),g,w,s,m)};return h.config=o,h[ge.isComponent]=!0,h},F5=f=>{const o={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};f.hooks=f.hooks||{};let i,u,h;return f.hooks[ge.destroy]=function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",u)},f.hooks[ge.init]=function(){const g={...o,...uo.get("keymap",{})};i=async w=>{const s=g[w.key]||g[w.keyCode]||w.key||w.keyCode;this[ge.inputEvents]!==void 0&&this[ge.inputEvents].intercept!==void 0&&(w=await this[ge.inputEvents].intercept.call(this,w),!(w instanceof KeyboardEvent))||(Fa.input(s,w),clearTimeout(h),h=setTimeout(()=>{Fa.hold=!0},uo.get("holdTimeout",aT)))},u=w=>{const s=og.get(w.code);s!==void 0&&typeof s=="function"&&(og.delete(w.code),s()),clearTimeout(h),Fa.hold=!1},document.addEventListener("keydown",i),document.addEventListener("keyup",u),setTimeout(()=>Fa.set(this))},qa("App",f)},Je={Component:qa,Application:F5,Launch:o5,Plugin:xT},vC=f=>new Promise((o,i)=>{const u=new XMLHttpRequest;u.onreadystatechange=function(){u.readyState==XMLHttpRequest.DONE&&(u.status===0||u.status===200?o(JSON.parse(u.responseText)):i(u.statusText))},u.open("GET",f),u.send(null)}),$5={name:"language",plugin(f={}){let o={},i={};const u=Rl({language:"",loaded:0},uo.get("reactivityMode"),!0),h=m=>{const S=Object.keys(o).length===0?"No translations loaded. Please load a file with translations or specify a translations object manually":m in o?!1:`Language ${m} not available in the loaded translations`;S?(un.warn(S),u.language=m):g(m).then(()=>{u.language=m})},g=m=>new Promise(S=>{const v=o[m];typeof v=="object"?(i=v,S()):typeof v=="string"&&vC(v).then(y=>{o[m]=y,i=y,S()}).catch(y=>{un.error(y)})}),w=m=>vC(m).then(S=>{s(S)}).catch(S=>{un.error(S)}),s=m=>{o=m,g(u.language).then(()=>{u.loaded++})};return"file"in f?w(f.file).then(()=>{"language"in f&&h(f.language)}):"language"in f&&h(f.language),{translate(m){u.language,u.loaded;let S=[...arguments].slice(1);return S.length===0?i&&i[m]||m:(S.length===1&&typeof S[0]=="object"&&(S=S.pop()),Object.keys(Array.isArray(S)?Object.assign({},S):S).reduce((v,y)=>v.replace(new RegExp("{\\s?"+y+"\\s?}","g"),S[y]),i&&i[m]||m))},get language(){return u.language},set(m){h(m)},translations(m){s(m)},load(m){return w(m)}}}},z5=(f,o,i)=>{const u=i.split(".");for(let h=0;h<u.length;h++){const g=u[h];if(f!==null&&g in f)f=f[g],o=o!==null&&g in o?o[g]:null;else if(o!==null&&g in o)o=o[g],f=o;else{f=void 0;break}}return f},wT={name:"theme",plugin(f={}){let o={};const i=Rl({current:"default"},uo.get("reactivityMode"),!0);let u={},h=null;return"themes"in f?(u=f.themes,i.current=f.current||"default",h=f.base||"default"):u={default:f},{get(g,w){if(i.current,o[g]!==void 0)return o[g];const s=z5(u[i.current],u[h]||null,g);return s!==void 0?(o[g]=s,s):w},set(g){g in u?(o={},i.current=g):un.warn(`Theme ${g} not found`)}}}},Lm=f=>new URLSearchParams(window.location.search).get(f),dl={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||Lm("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||Lm("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||Lm("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},V5=()=>{let f={};return Object.keys(dl).forEach(o=>{if(dl[o].test&&typeof dl[o].test=="function"&&dl[o].test()===!0){f=dl[o].mapping;return}}),f},H5="modulepreload",G5=function(f){return"/"+f},xC={},W5=function(o,i,u){if(!i||i.length===0)return o();const h=document.getElementsByTagName("link");return Promise.all(i.map(g=>{if(g=G5(g),g in xC)return;xC[g]=!0;const w=g.endsWith(".css"),s=w?'[rel="stylesheet"]':"";if(!!u)for(let v=h.length-1;v>=0;v--){const y=h[v];if(y.href===g&&(!w||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${s}`))return;const S=document.createElement("link");if(S.rel=w?"stylesheet":H5,w||(S.as="script",S.crossOrigin=""),S.href=g,document.head.appendChild(S),w)return new Promise((v,y)=>{S.addEventListener("load",v),S.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${g}`)))})})).then(()=>o()).catch(g=>{const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=g,window.dispatchEvent(w),!w.defaultPrevented)throw g})},X5=Je.Component("PortalItem",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=370,m.h=320,m.scale={transition:i.hasFocus?1.1:1},m.color=i.backgroundColor,m.effects=[{type:"radius",props:{radius:6}}],s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.x=30,S.y=30,S.content=i.number,S.size=84,S.color=i.fontColor,S.__textnode=!0,s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.x=30,v.y=140,v.content=i.title,v.size=42,v.font="raleway",v.color=i.fontColor,v.letterspacing=2,v.__textnode=!0,s[2].populate(v),o=s[0];const y={};return s[3]=this.element({parent:o||"root"},i),y.x=30,y.y=200,y.content=i.description,y.maxwidth=300,y.size=28,y.color=i.fontColor,y.lineheight=32,y.__textnode=!0,s[3].populate(y),s},effects:[function(o,i,u,h,g,w){i[0].set("scale",{transition:o.hasFocus?1.1:1})},function(o,i,u,h,g,w){i[0].set("color",o.backgroundColor)},function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:6}}])},function(o,i,u,h,g,w){i[1].set("content",o.number)},function(o,i,u,h,g,w){i[1].set("color",o.fontColor)},function(o,i,u,h,g,w){i[2].set("content",o.title)},function(o,i,u,h,g,w){i[2].set("color",o.fontColor)},function(o,i,u,h,g,w){i[3].set("content",o.description)},function(o,i,u,h,g,w){i[3].set("color",o.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),q5=Je.Component("PortalRow",{components:{PortalItem:X5},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1;const I={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(I),o=s[0];const D={};s[1]=this.element({parent:o||"root"},y===!0?v:i),D.alpha={transition:{value:i.itemOffset<240?1:0,duration:200}},s[1].populate(D),o=s[1];const T={};s[2]=this.element({parent:o||"root"},y===!0?v:i),T.content=i.title,T.x=60,T.__textnode=!0,s[2].populate(T),o=s[1];const L={};s[3]=this.element({parent:o||"root"},y===!0?v:i),L.y=50,L.x=60,L.h=1,L.w=1800,L.color="0xe8d7f9ff",s[3].populate(L),o=s[0];const B={};s[4]=this.element({parent:o||"root"},y===!0?v:i),B.y=100,B.x={transition:i.rowOffset},s[4].populate(B),o=s[4];const N=[],z=(H=[],X,$)=>{const oe=w(H),fe=new Set;let le=oe.length;for(;le--;){const ee=oe[le];fe.add(""+ee.id)}let A=$.length;for(;A--;)if(fe.has($[A])===!1){const ee=$[A];X[5][ee]&&X[5][ee].destroy(),delete X[5][ee],X[6][ee]&&X[6][ee].destroy(),delete X[6][ee]}$.length=0;const Y=oe.length,Q=[];for(let ee=0;ee<Y;ee++){const q=Object.create(i);o=X[4],q.item=oe[ee],q.index=ee,q.key=""+q.item.id,$.push(q.key);const W=u.components&&u.components.PortalItem||h.PortalItem;X[5]===void 0&&(X[5]={});const ie={};X[5][q.key]===void 0&&(X[5][q.key]=this.element({parent:o||"root"},y===!0?v:i)),ie.x={transition:{value:q.itemOffset+q.index*430,delay:50*(q.index%4),duration:500}},ie.title=q.item.title,ie.description=q.item.description,ie.id=q.item.id,ie.index=q.index,ie.ref="item"+q.index;const ue=[];if(typeof W<"u")for(let xe in W.config.props)delete ie[W.config.props[xe]],ue.push(W.config.props[xe]);X[5][q.key].nodeId===void 0&&X[5][q.key].populate(ie),X[6]===void 0&&(X[6]={}),o=X[5][q.key];const ve={};if(X[6][q.key]===void 0){S={transition:{value:q.itemOffset+q.index*430,delay:50*(q.index%4),duration:500}},Array.isArray(S)===!0&&(S=w(S).slice(0)),ve.x=S,ve.title=q.item.title,ve.description=q.item.description,ve.id=q.item.id,ve.index=q.index,S="item"+q.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),ve.ref=S,m=ve.is||"PortalItem";let xe;if(typeof m=="string"){if(xe=u.components&&u.components[m]||h[m],!xe)throw new Error('Component "PortalItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xe=m);X[6][q.key]=xe.call(null,{props:ve},X[5][q.key],i),X[6][q.key][Symbol.for("slots")][0]?(o=X[6][q.key][Symbol.for("slots")][0],v=X[6][q.key],y=!0):o=X[6][q.key][Symbol.for("children")][0]}let Te=()=>{(typeof ue>"u"||ue.indexOf("ref")===-1)&&X[5][q.key].set("ref","item"+q.index)};g(Te,null),Q.push(Te),X[6][q.key][Symbol.for("props")].ref="item"+q.index}return Q};let F;return g(()=>{i[Symbol.for("removeGlobalEffects")](F),F=null,F=z(i.items,s,N)},"items"),g(()=>{i.itemOffset;for(let H=0;H<i.items.length;H++){const X={};X.index=H,X.item=i.items[H],X.key=X.item.id,(typeof skip5>"u"||skip5.indexOf("x")===-1)&&s[5][X.key].set("x",{transition:{value:i.itemOffset+X.index*430,delay:50*(X.index%4),duration:500}})}}),g(()=>{i.itemOffset;for(let H=0;H<i.items.length;H++){const X={};X.index=H,X.item=i.items[H],X.key=X.item.id,s[6][X.key][Symbol.for("props")].x={transition:{value:i.itemOffset+X.index*430,delay:50*(X.index%4),duration:500}}}}),s},effects:[function(o,i,u,h,g,w){i[1].set("alpha",{transition:{value:o.itemOffset<240?1:0,duration:200}})},function(o,i,u,h,g,w){i[4].set("x",{transition:o.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(f){const o=this.$select(`item${f}`);o&&o.$focus&&(o.$focus(),f<1?this.rowOffset=60:f>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-f*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),ST=Je.Component("SourceInfo",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.x=1860,m.y={transition:{value:1060+i.offsetY,delay:1e3,duration:300,easing:"ease-out"}},m.alpha={transition:{value:i.alpha,delay:1e3,duration:300,easing:"ease-out"}},m.w=480,m.h=100,m.mount=1,m.color="{top: '0x000000dd', bottom: '0x000000ff'}",m.effects=[{type:"radius",props:{radius:10}}],s[0].populate(m),o=s[0];const S={};return s[1]=this.element({parent:o||"root"},i),S.y=18,S.x=20,S.size=26,S.maxwidth=440,S.align="center",S.lineheight=32,S.content='Press "U" to check out the source code of this example on GitHub',S.__textnode=!0,s[1].populate(S),s},effects:[function(o,i,u,h,g,w){i[0].set("y",{transition:{value:1060+o.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(o,i,u,h,g,w){i[0].set("alpha",{transition:{value:o.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{offsetY:15,alpha:0}},hooks:{ready(){this.offsetY=0,this.alpha=1}}}),K5="@lightningjs/blits-example-app",Y5="1.11.0",Q5="Lightning 3 Blits Example App",Z5="index.js",J5="module",eL={start:"npm run dev","start:test":"NODE_ENV=testing npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host",test:"NODE_ENV=testing backstop --config=backstop.cjs test","test:reference":"NODE_ENV=testing backstop --config=backstop.cjs reference"},tL={hooks:{"pre-commit":"lint-staged"}},nL="Michiel van der Geest <hello@michielvandergeest.com>",iL="Apache-2",oL={backstopjs:"^6.3.22",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",playwright:"^1.41.0",prettier:"^2.5.1","shaka-player":"^4.7.1",vite:"^4.0.4"},rL={"@firebolt-js/sdk":"^1.4.1","@lightningjs/blits":"^1.20.0"},sL={name:K5,version:Y5,description:Q5,main:Z5,type:J5,scripts:eL,"lint-staged":{"*.js":["eslint --fix"]},husky:tL,author:nL,license:iL,devDependencies:oL,dependencies:rL},aL=Je.Component("Portal",{components:{PortalRow:q5,SourceInfo:ST},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),D.w=1920,D.h=1080,D.color="{top: '0x44037aff', bottom: '0x240244ff'}",s[0].populate(D),y===!0&&(I-=1);const T=u.components&&u.components.PortalRow||h.PortalRow;o=s[0];const L={};s[1]=this.element({parent:o||"root"},y===!0?v:i),L.mount="{y: 0.5}",L.h=500,L.y={transition:-i.rowFocused*420+550},L.title="Demos",L.items=i.demo,L.ref="row0";const B=[];if(typeof T<"u")for(let ke in T.config.props)delete L[T.config.props[ke]],B.push(T.config.props[ke]);s[1].populate(L),y===!0&&(I-=1),o=s[1];const N={};N.mount="{y: 0.5}",N.h=500,S={transition:-i.rowFocused*420+550},Array.isArray(S)===!0&&(S=w(S).slice(0)),N.y=S,N.title="Demos",N.items=i.demo,N.ref="row0",m=N.is||"PortalRow";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:N},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],v=s[2],y=!0):o=s[2][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const F=u.components&&u.components.PortalRow||h.PortalRow;o=s[0];const H={};s[3]=this.element({parent:o||"root"},y===!0?v:i),H.mount="{y: 0.5}",H.h=500,H.y={transition:-i.rowFocused*420+1100},H.title="Examples and tests",H.items=i.example,H.ref="row1";const X=[];if(typeof F<"u")for(let ke in F.config.props)delete H[F.config.props[ke]],X.push(F.config.props[ke]);s[3].populate(H),y===!0&&(I-=1),o=s[3];const $={};$.mount="{y: 0.5}",$.h=500,S={transition:-i.rowFocused*420+1100},Array.isArray(S)===!0&&(S=w(S).slice(0)),$.y=S,$.title="Examples and tests",$.items=i.example,$.ref="row1",m=$.is||"PortalRow";let oe;if(typeof m=="string"){if(oe=u.components&&u.components[m]||h[m],!oe)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(oe=m);s[4]=oe.call(null,{props:$},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],v=s[4],y=!0):o=s[4][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const fe=u.components&&u.components.PortalRow||h.PortalRow;o=s[0];const le={};s[5]=this.element({parent:o||"root"},y===!0?v:i),le.mount="{y: 0.5}",le.h=500,le.y={transition:-i.rowFocused*420+1650},le.title="Benchmarks and stress tests",le.items=i.benchmark,le.ref="row2";const A=[];if(typeof fe<"u")for(let ke in fe.config.props)delete le[fe.config.props[ke]],A.push(fe.config.props[ke]);s[5].populate(le),y===!0&&(I-=1),o=s[5];const Y={};Y.mount="{y: 0.5}",Y.h=500,S={transition:-i.rowFocused*420+1650},Array.isArray(S)===!0&&(S=w(S).slice(0)),Y.y=S,Y.title="Benchmarks and stress tests",Y.items=i.benchmark,Y.ref="row2",m=Y.is||"PortalRow";let Q;if(typeof m=="string"){if(Q=u.components&&u.components[m]||h[m],!Q)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Q=m);s[6]=Q.call(null,{props:Y},s[5],i),s[6][Symbol.for("slots")][0]?(o=s[6][Symbol.for("slots")][0],v=s[6],y=!0):o=s[6][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[0];const ee={};s[7]=this.element({parent:o||"root"},y===!0?v:i),ee.w=1920,ee.h=200,ee.color="0x44037aff",s[7].populate(ee),y===!0&&(I-=1),o=s[7];const q={};s[8]=this.element({parent:o||"root"},y===!0?v:i),q.w=1920,q.h=70,q.y=200,q.color="{top: '0x44037aff'}",s[8].populate(q),y===!0&&(I-=1),o=s[7];const W={};s[9]=this.element({parent:o||"root"},y===!0?v:i),W.y={transition:{value:80-i.logoOffset,duration:400}},s[9].populate(W),y===!0&&(I-=1),o=s[9];const ie={};s[10]=this.element({parent:o||"root"},y===!0?v:i),ie.src="assets/blits-logo-full.png",ie.w=200,ie.h=112,ie.x=60,s[10].populate(ie),y===!0&&(I-=1),o=s[9];const ue={};s[11]=this.element({parent:o||"root"},y===!0?v:i),ue.w=2,ue.h=120,ue.y=-10,ue.color="0xffffff80",ue.x=300,s[11].populate(ue),y===!0&&(I-=1),o=s[9];const ve={};s[12]=this.element({parent:o||"root"},y===!0?v:i),ve.x=320,ve.y=16,s[12].populate(ve),y===!0&&(I-=1),o=s[12];const Te={};s[13]=this.element({parent:o||"root"},y===!0?v:i),Te.y=0,Te.size=36,Te.content="Example App",Te.__textnode=!0,s[13].populate(Te),y===!0&&(I-=1),o=s[12];const xe={};return s[14]=this.element({parent:o||"root"},y===!0?v:i),xe.y=50,xe.size=24,xe.content="v"+i.version,xe.__textnode=!0,s[14].populate(xe),y===!0&&(I-=1),s},effects:[function(o,i,u,h,g,w){(typeof skip1>"u"||skip1.indexOf("y")===-1)&&i[1].set("y",{transition:-o.rowFocused*420+550})},function(o,i,u,h,g,w){i[2][Symbol.for("props")].y={transition:-o.rowFocused*420+550}},function(o,i,u,h,g,w){(typeof skip3>"u"||skip3.indexOf("y")===-1)&&i[3].set("y",{transition:-o.rowFocused*420+1100})},function(o,i,u,h,g,w){i[4][Symbol.for("props")].y={transition:-o.rowFocused*420+1100}},function(o,i,u,h,g,w){(typeof skip5>"u"||skip5.indexOf("y")===-1)&&i[5].set("y",{transition:-o.rowFocused*420+1650})},function(o,i,u,h,g,w){i[6][Symbol.for("props")].y={transition:-o.rowFocused*420+1650}},function(o,i,u,h,g,w){i[9].set("y",{transition:{value:80-o.logoOffset,duration:400}})}],context:{}},state(){return{version:sL.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(f){const o=this.$select(`row${f}`);o&&o.$focus&&o.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),uL=Je.Component("Letter",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.w=i.w,S.h={transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},S.color="0xe6e6e6ff",s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.w=i.w,v.h=280,v.src=i.image,v.y={transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},s[2].populate(v),o=s[0];const y={};return s[3]=this.element({parent:o||"root"},i),y.w=i.w,y.color="0xe6e6e6ff",y.h={transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},y.y={transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},s[3].populate(y),s},effects:[function(o,i,u,h,g,w){i[1].set("h",{transition:{value:410+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,u,h,g,w){i[2].set("src",o.image)},function(o,i,u,h,g,w){i[2].set("y",{transition:{value:400+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,u,h,g,w){i[3].set("h",{transition:{value:500-o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,u,h,g,w){i[3].set("y",{transition:{value:660+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),lL=Je.Component("Intro",{components:{Letter:uL},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),I.w=1920,I.h=1080,I.src="assets/background.jpg",s[0].populate(I),v===!0&&(y-=1);const D=u.components&&u.components.Letter||h.Letter;o=s[0];const T={};s[1]=this.element({parent:o||"root"},v===!0?S:i),T.letter="l",T.w=294;const L=[];if(typeof D<"u")for(let J in D.config.props)delete T[D.config.props[J]],L.push(D.config.props[J]);s[1].populate(T),v===!0&&(y-=1),o=s[1];const B={};B.letter="l",B.w=294,m=B.is||"Letter";let N;if(typeof m=="string"){if(N=u.components&&u.components[m]||h[m],!N)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(N=m);s[2]=N.call(null,{props:B},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],S=s[2],v=!0):o=s[2][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const z=u.components&&u.components.Letter||h.Letter;o=s[0];const F={};s[3]=this.element({parent:o||"root"},v===!0?S:i),F.letter="i-1",F.w=128,F.x=294,F.direction="up",F.delay=50;const H=[];if(typeof z<"u")for(let J in z.config.props)delete F[z.config.props[J]],H.push(z.config.props[J]);s[3].populate(F),v===!0&&(y-=1),o=s[3];const X={};X.letter="i-1",X.w=128,X.x=294,X.direction="up",X.delay=50,m=X.is||"Letter";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);s[4]=$.call(null,{props:X},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],S=s[4],v=!0):o=s[4][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const oe=u.components&&u.components.Letter||h.Letter;o=s[0];const fe={};s[5]=this.element({parent:o||"root"},v===!0?S:i),fe.letter="g-1",fe.w=205,fe.x=422,fe.delay=100;const le=[];if(typeof oe<"u")for(let J in oe.config.props)delete fe[oe.config.props[J]],le.push(oe.config.props[J]);s[5].populate(fe),v===!0&&(y-=1),o=s[5];const A={};A.letter="g-1",A.w=205,A.x=422,A.delay=100,m=A.is||"Letter";let Y;if(typeof m=="string"){if(Y=u.components&&u.components[m]||h[m],!Y)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[6]=Y.call(null,{props:A},s[5],i),s[6][Symbol.for("slots")][0]?(o=s[6][Symbol.for("slots")][0],S=s[6],v=!0):o=s[6][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const Q=u.components&&u.components.Letter||h.Letter;o=s[0];const ee={};s[7]=this.element({parent:o||"root"},v===!0?S:i),ee.letter="h",ee.w=224,ee.x=627,ee.direction="up",ee.delay=150;const q=[];if(typeof Q<"u")for(let J in Q.config.props)delete ee[Q.config.props[J]],q.push(Q.config.props[J]);s[7].populate(ee),v===!0&&(y-=1),o=s[7];const W={};W.letter="h",W.w=224,W.x=627,W.direction="up",W.delay=150,m=W.is||"Letter";let ie;if(typeof m=="string"){if(ie=u.components&&u.components[m]||h[m],!ie)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ie=m);s[8]=ie.call(null,{props:W},s[7],i),s[8][Symbol.for("slots")][0]?(o=s[8][Symbol.for("slots")][0],S=s[8],v=!0):o=s[8][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const ue=u.components&&u.components.Letter||h.Letter;o=s[0];const ve={};s[9]=this.element({parent:o||"root"},v===!0?S:i),ve.letter="t",ve.w=190,ve.x=851,ve.delay=200;const Te=[];if(typeof ue<"u")for(let J in ue.config.props)delete ve[ue.config.props[J]],Te.push(ue.config.props[J]);s[9].populate(ve),v===!0&&(y-=1),o=s[9];const xe={};xe.letter="t",xe.w=190,xe.x=851,xe.delay=200,m=xe.is||"Letter";let ke;if(typeof m=="string"){if(ke=u.components&&u.components[m]||h[m],!ke)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ke=m);s[10]=ke.call(null,{props:xe},s[9],i),s[10][Symbol.for("slots")][0]?(o=s[10][Symbol.for("slots")][0],S=s[10],v=!0):o=s[10][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const pe=u.components&&u.components.Letter||h.Letter;o=s[0];const Le={};s[11]=this.element({parent:o||"root"},v===!0?S:i),Le.letter="n-1",Le.w=221,Le.x=1041,Le.direction="up",Le.delay=250;const G=[];if(typeof pe<"u")for(let J in pe.config.props)delete Le[pe.config.props[J]],G.push(pe.config.props[J]);s[11].populate(Le),v===!0&&(y-=1),o=s[11];const Ie={};Ie.letter="n-1",Ie.w=221,Ie.x=1041,Ie.direction="up",Ie.delay=250,m=Ie.is||"Letter";let Oe;if(typeof m=="string"){if(Oe=u.components&&u.components[m]||h[m],!Oe)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Oe=m);s[12]=Oe.call(null,{props:Ie},s[11],i),s[12][Symbol.for("slots")][0]?(o=s[12][Symbol.for("slots")][0],S=s[12],v=!0):o=s[12][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const Be=u.components&&u.components.Letter||h.Letter;o=s[0];const Ve={};s[13]=this.element({parent:o||"root"},v===!0?S:i),Ve.letter="i-2",Ve.w=115,Ve.x=1262,Ve.delay=300;const qe=[];if(typeof Be<"u")for(let J in Be.config.props)delete Ve[Be.config.props[J]],qe.push(Be.config.props[J]);s[13].populate(Ve),v===!0&&(y-=1),o=s[13];const ze={};ze.letter="i-2",ze.w=115,ze.x=1262,ze.delay=300,m=ze.is||"Letter";let it;if(typeof m=="string"){if(it=u.components&&u.components[m]||h[m],!it)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(it=m);s[14]=it.call(null,{props:ze},s[13],i),s[14][Symbol.for("slots")][0]?(o=s[14][Symbol.for("slots")][0],S=s[14],v=!0):o=s[14][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const me=u.components&&u.components.Letter||h.Letter;o=s[0];const wt={};s[15]=this.element({parent:o||"root"},v===!0?S:i),wt.letter="n-2",wt.w=219,wt.x=1377,wt.direction="up",wt.delay=350;const ft=[];if(typeof me<"u")for(let J in me.config.props)delete wt[me.config.props[J]],ft.push(me.config.props[J]);s[15].populate(wt),v===!0&&(y-=1),o=s[15];const rt={};rt.letter="n-2",rt.w=219,rt.x=1377,rt.direction="up",rt.delay=350,m=rt.is||"Letter";let St;if(typeof m=="string"){if(St=u.components&&u.components[m]||h[m],!St)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(St=m);s[16]=St.call(null,{props:rt},s[15],i),s[16][Symbol.for("slots")][0]?(o=s[16][Symbol.for("slots")][0],S=s[16],v=!0):o=s[16][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const nt=u.components&&u.components.Letter||h.Letter;o=s[0];const st={};s[17]=this.element({parent:o||"root"},v===!0?S:i),st.letter="g-2",st.w=324,st.x=1596,st.direction="up",st.delay=400;const Xe=[];if(typeof nt<"u")for(let J in nt.config.props)delete st[nt.config.props[J]],Xe.push(nt.config.props[J]);s[17].populate(st),v===!0&&(y-=1),o=s[17];const He={};He.letter="g-2",He.w=324,He.x=1596,He.direction="up",He.delay=400,m=He.is||"Letter";let Pe;if(typeof m=="string"){if(Pe=u.components&&u.components[m]||h[m],!Pe)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Pe=m);return s[18]=Pe.call(null,{props:He},s[17],i),s[18][Symbol.for("slots")][0]?(o=s[18][Symbol.for("slots")][0],S=s[18],v=!0):o=s[18][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),s},effects:[],context:{}}}),fL=Je.Component("Toggle",{code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),D.w=100,D.h=50,D.y=5,D.color=i.bgColor,D.effects=[{type:"radius",props:{radius:25}}],s[0].populate(D),y===!0&&(I-=1);const T=u.components&&u.components.Circle||h.Circle;o=s[0];const L={};s[1]=this.element({parent:o||"root"},y===!0?v:i),L.x={transition:i.on?0:50},L.size=50;const B=[];if(typeof T<"u")for(let F in T.config.props)delete L[T.config.props[F]],B.push(T.config.props[F]);s[1].populate(L),y===!0&&(I-=1),o=s[1];const N={};S={transition:i.on?0:50},Array.isArray(S)===!0&&(S=w(S).slice(0)),N.x=S,N.size=50,S=i.primaryColor,Array.isArray(S)===!0&&(S=w(S).slice(0)),N.color=S,m=N.is||"Circle";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);return s[2]=z.call(null,{props:N},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],v=s[2],y=!0):o=s[2][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){i[0].set("color",o.bgColor)},function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:25}}])},function(o,i,u,h,g,w){(typeof skip1>"u"||skip1.indexOf("x")===-1)&&i[1].set("x",{transition:o.on?0:50})},function(o,i,u,h,g,w){i[2][Symbol.for("props")].x={transition:o.on?0:50}},function(o,i,u,h,g,w){i[2][Symbol.for("props")].color=o.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),cL=Je.Component("Bar",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w={value:i.w,duration:i.duration},m.h={value:i.h,duration:i.duration},m.color=i.bgColor,m.x=i.index*(i.w+i.w/4),m.effects=[{type:"radius",props:{radius:10}}],s[0].populate(m),o=s[0];const S={};return s[1]=this.element({parent:o||"root"},i),S.w=i.w,S.y={transition:{value:i.h-i.innerH,duration:i.duration}},S.h={transition:{value:i.innerH,duration:i.duration}},S.color=i.primaryColor,S.effects=[{type:"radius",props:{radius:10}}],s[1].populate(S),s},effects:[function(o,i,u,h,g,w){i[0].set("w",{value:o.w,duration:o.duration})},function(o,i,u,h,g,w){i[0].set("h",{value:o.h,duration:o.duration})},function(o,i,u,h,g,w){i[0].set("color",o.bgColor)},function(o,i,u,h,g,w){i[0].set("x",o.index*(o.w+o.w/4))},function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:10}}])},function(o,i,u,h,g,w){i[1].set("w",o.w)},function(o,i,u,h,g,w){i[1].set("y",{transition:{value:o.h-o.innerH,duration:o.duration}})},function(o,i,u,h,g,w){i[1].set("h",{transition:{value:o.innerH,duration:o.duration}})},function(o,i,u,h,g,w){i[1].set("color",o.primaryColor)},function(o,i,u,h,g,w){i[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),hL=Je.Component("Theming",{components:{Bar:cL,Toggle:fL},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),D.w=1920,D.h=1080,D.color={transition:i.$colors.get("bg")},s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.y=1020,T.x=1160,T.size=28,T.color=i.$colors.get("color4"),T.content='Use "up", "down", "left" and "right" to change the appearance',T.__textnode=!0,s[1].populate(T),y===!0&&(I-=1),o=s[0];const L={};s[2]=this.element({parent:o||"root"},y===!0?v:i),L.x={transition:(1920-i.$sizes.get("w"))/2},L.y={transition:(1080-i.$sizes.get("h"))/2},s[2].populate(L),y===!0&&(I-=1),o=s[2];const B={};s[3]=this.element({parent:o||"root"},y===!0?v:i),B.x=-250,B.y=-100,B.src="assets/shadow.png",B.w=1e3,B.h=900,B.alpha=.5,s[3].populate(B),y===!0&&(I-=1),o=s[2];const N={};s[4]=this.element({parent:o||"root"},y===!0?v:i),N.w={transition:i.$sizes.get("w")},N.h={transition:i.$sizes.get("h")},N.color=i.$colors.get("color1"),N.effects=[{type:"radius",props:{radius:i.radius}}],s[4].populate(N),y===!0&&(I-=1),o=s[4];const z={};s[5]=this.element({parent:o||"root"},y===!0?v:i),z.w={transition:i.$sizes.get("w")},z.h=100,z.color=i.$colors.get("color2"),z.effects=[{type:"radius",props:{radius:i.radius}}],s[5].populate(z),y===!0&&(I-=1),o=s[4];const F={};s[6]=this.element({parent:o||"root"},y===!0?v:i),F.w={transition:i.$sizes.get("w")},F.h=80,F.y=20,F.color=i.$colors.get("color2"),s[6].populate(F),y===!0&&(I-=1),o=s[4];const H={};s[7]=this.element({parent:o||"root"},y===!0?v:i),H.content=i.text,H.color=i.$colors.get("color3"),H.size=28,H.x=20,H.y=14,H.__textnode=!0,s[7].populate(H),y===!0&&(I-=1);const X=u.components&&u.components.Toggle||h.Toggle;o=s[4];const $={};s[8]=this.element({parent:o||"root"},y===!0?v:i),$.x={transition:i.$sizes.get("w")-120},$.on=i.mode==="dark",$.bgColor=i.$colors.get("color1"),$.primaryColor="#22c55e";const oe=[];if(typeof X<"u")for(let Xe in X.config.props)delete $[X.config.props[Xe]],oe.push(X.config.props[Xe]);s[8].populate($),y===!0&&(I-=1),o=s[8];const fe={};S={transition:i.$sizes.get("w")-120},Array.isArray(S)===!0&&(S=w(S).slice(0)),fe.x=S,S=i.mode==="dark",Array.isArray(S)===!0&&(S=w(S).slice(0)),fe.on=S,S=i.$colors.get("color1"),Array.isArray(S)===!0&&(S=w(S).slice(0)),fe.bgColor=S,fe.primaryColor="#22c55e",m=fe.is||"Toggle";let le;if(typeof m=="string"){if(le=u.components&&u.components[m]||h[m],!le)throw new Error('Component "Toggle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(le=m);s[9]=le.call(null,{props:fe},s[8],i),s[9][Symbol.for("slots")][0]?(o=s[9][Symbol.for("slots")][0],v=s[9],y=!0):o=s[9][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[2];const A={};s[10]=this.element({parent:o||"root"},y===!0?v:i),A.w=200,A.h={transition:i.$sizes.get("block1.h")},A.x=25,A.y=140,A.color=i.$colors.get("color2"),A.effects=[{type:"radius",props:{radius:i.radius/2}}],s[10].populate(A),y===!0&&(I-=1),o=s[2];const Y={};s[11]=this.element({parent:o||"root"},y===!0?v:i),Y.w={transition:i.$sizes.get("block2.w")},Y.h=i.$sizes.get("block2.h"),Y.x=270,Y.y={transition:i.$sizes.get("block2.y")},Y.color=i.$colors.get("color2"),Y.effects=[{type:"radius",props:{radius:i.radius/2}}],s[11].populate(Y),y===!0&&(I-=1),o=s[2];const Q={};s[12]=this.element({parent:o||"root"},y===!0?v:i),Q.x={transition:i.$sizes.get("graph.x")},Q.y={transition:i.$sizes.get("graph.y")},Q.w=i.$sizes.get("graph.w"),Q.h=i.$sizes.get("graph.h"),Q.color="0x00000000",s[12].populate(Q),y===!0&&(I-=1),o=s[12];const ee={};s[13]=this.element({parent:o||"root"},y===!0?v:i),ee.x={transition:i.$sizes.get("graph.offset")},ee.y={transition:i.$sizes.get("graph.offset")},s[13].populate(ee),y===!0&&(I-=1);const q=u.components&&u.components.Bar||h.Bar;o=s[13];const W={};s[14]=this.element({parent:o||"root"},y===!0?v:i),W.bgColor=i.$colors.get("color2"),W.primaryColor=i.$colors.get("color4"),W.size=i.$sizes.get("graph.size"),W.height=100,W.index=0;const ie=[];if(typeof q<"u")for(let Xe in q.config.props)delete W[q.config.props[Xe]],ie.push(q.config.props[Xe]);s[14].populate(W),y===!0&&(I-=1),o=s[14];const ue={};S=i.$colors.get("color2"),Array.isArray(S)===!0&&(S=w(S).slice(0)),ue.bgColor=S,S=i.$colors.get("color4"),Array.isArray(S)===!0&&(S=w(S).slice(0)),ue.primaryColor=S,S=i.$sizes.get("graph.size"),Array.isArray(S)===!0&&(S=w(S).slice(0)),ue.size=S,ue.height=100,ue.index=0,m=ue.is||"Bar";let ve;if(typeof m=="string"){if(ve=u.components&&u.components[m]||h[m],!ve)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);s[15]=ve.call(null,{props:ue},s[14],i),s[15][Symbol.for("slots")][0]?(o=s[15][Symbol.for("slots")][0],v=s[15],y=!0):o=s[15][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Te=u.components&&u.components.Bar||h.Bar;o=s[13];const xe={};s[16]=this.element({parent:o||"root"},y===!0?v:i),xe.bgColor=i.$colors.get("color2"),xe.primaryColor=i.$colors.get("color4"),xe.size=i.$sizes.get("graph.size"),xe.height=140,xe.index=1;const ke=[];if(typeof Te<"u")for(let Xe in Te.config.props)delete xe[Te.config.props[Xe]],ke.push(Te.config.props[Xe]);s[16].populate(xe),y===!0&&(I-=1),o=s[16];const pe={};S=i.$colors.get("color2"),Array.isArray(S)===!0&&(S=w(S).slice(0)),pe.bgColor=S,S=i.$colors.get("color4"),Array.isArray(S)===!0&&(S=w(S).slice(0)),pe.primaryColor=S,S=i.$sizes.get("graph.size"),Array.isArray(S)===!0&&(S=w(S).slice(0)),pe.size=S,pe.height=140,pe.index=1,m=pe.is||"Bar";let Le;if(typeof m=="string"){if(Le=u.components&&u.components[m]||h[m],!Le)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Le=m);s[17]=Le.call(null,{props:pe},s[16],i),s[17][Symbol.for("slots")][0]?(o=s[17][Symbol.for("slots")][0],v=s[17],y=!0):o=s[17][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const G=u.components&&u.components.Bar||h.Bar;o=s[13];const Ie={};s[18]=this.element({parent:o||"root"},y===!0?v:i),Ie.bgColor=i.$colors.get("color2"),Ie.primaryColor=i.$colors.get("color4"),Ie.size=i.$sizes.get("graph.size"),Ie.height=170,Ie.index=2;const Oe=[];if(typeof G<"u")for(let Xe in G.config.props)delete Ie[G.config.props[Xe]],Oe.push(G.config.props[Xe]);s[18].populate(Ie),y===!0&&(I-=1),o=s[18];const Be={};S=i.$colors.get("color2"),Array.isArray(S)===!0&&(S=w(S).slice(0)),Be.bgColor=S,S=i.$colors.get("color4"),Array.isArray(S)===!0&&(S=w(S).slice(0)),Be.primaryColor=S,S=i.$sizes.get("graph.size"),Array.isArray(S)===!0&&(S=w(S).slice(0)),Be.size=S,Be.height=170,Be.index=2,m=Be.is||"Bar";let Ve;if(typeof m=="string"){if(Ve=u.components&&u.components[m]||h[m],!Ve)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ve=m);s[19]=Ve.call(null,{props:Be},s[18],i),s[19][Symbol.for("slots")][0]?(o=s[19][Symbol.for("slots")][0],v=s[19],y=!0):o=s[19][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const qe=u.components&&u.components.Bar||h.Bar;o=s[13];const ze={};s[20]=this.element({parent:o||"root"},y===!0?v:i),ze.bgColor=i.$colors.get("color2"),ze.primaryColor=i.$colors.get("color4"),ze.size=i.$sizes.get("graph.size"),ze.height=150,ze.index=3;const it=[];if(typeof qe<"u")for(let Xe in qe.config.props)delete ze[qe.config.props[Xe]],it.push(qe.config.props[Xe]);s[20].populate(ze),y===!0&&(I-=1),o=s[20];const me={};S=i.$colors.get("color2"),Array.isArray(S)===!0&&(S=w(S).slice(0)),me.bgColor=S,S=i.$colors.get("color4"),Array.isArray(S)===!0&&(S=w(S).slice(0)),me.primaryColor=S,S=i.$sizes.get("graph.size"),Array.isArray(S)===!0&&(S=w(S).slice(0)),me.size=S,me.height=150,me.index=3,m=me.is||"Bar";let wt;if(typeof m=="string"){if(wt=u.components&&u.components[m]||h[m],!wt)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(wt=m);s[21]=wt.call(null,{props:me},s[20],i),s[21][Symbol.for("slots")][0]?(o=s[21][Symbol.for("slots")][0],v=s[21],y=!0):o=s[21][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ft=u.components&&u.components.Bar||h.Bar;o=s[13];const rt={};s[22]=this.element({parent:o||"root"},y===!0?v:i),rt.bgColor=i.$colors.get("color2"),rt.primaryColor=i.$colors.get("color4"),rt.size=i.$sizes.get("graph.size"),rt.height=90,rt.index=4;const St=[];if(typeof ft<"u")for(let Xe in ft.config.props)delete rt[ft.config.props[Xe]],St.push(ft.config.props[Xe]);s[22].populate(rt),y===!0&&(I-=1),o=s[22];const nt={};S=i.$colors.get("color2"),Array.isArray(S)===!0&&(S=w(S).slice(0)),nt.bgColor=S,S=i.$colors.get("color4"),Array.isArray(S)===!0&&(S=w(S).slice(0)),nt.primaryColor=S,S=i.$sizes.get("graph.size"),Array.isArray(S)===!0&&(S=w(S).slice(0)),nt.size=S,nt.height=90,nt.index=4,m=nt.is||"Bar";let st;if(typeof m=="string"){if(st=u.components&&u.components[m]||h[m],!st)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(st=m);return s[23]=st.call(null,{props:nt},s[22],i),s[23][Symbol.for("slots")][0]?(o=s[23][Symbol.for("slots")][0],v=s[23],y=!0):o=s[23][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){i[0].set("color",{transition:o.$colors.get("bg")})},function(o,i,u,h,g,w){i[1].set("color",o.$colors.get("color4"))},function(o,i,u,h,g,w){i[2].set("x",{transition:(1920-o.$sizes.get("w"))/2})},function(o,i,u,h,g,w){i[2].set("y",{transition:(1080-o.$sizes.get("h"))/2})},function(o,i,u,h,g,w){i[4].set("w",{transition:o.$sizes.get("w")})},function(o,i,u,h,g,w){i[4].set("h",{transition:o.$sizes.get("h")})},function(o,i,u,h,g,w){i[4].set("color",o.$colors.get("color1"))},function(o,i,u,h,g,w){i[4].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,u,h,g,w){i[5].set("w",{transition:o.$sizes.get("w")})},function(o,i,u,h,g,w){i[5].set("color",o.$colors.get("color2"))},function(o,i,u,h,g,w){i[5].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,u,h,g,w){i[6].set("w",{transition:o.$sizes.get("w")})},function(o,i,u,h,g,w){i[6].set("color",o.$colors.get("color2"))},function(o,i,u,h,g,w){i[7].set("content",o.text)},function(o,i,u,h,g,w){i[7].set("color",o.$colors.get("color3"))},function(o,i,u,h,g,w){(typeof skip8>"u"||skip8.indexOf("x")===-1)&&i[8].set("x",{transition:o.$sizes.get("w")-120})},function(o,i,u,h,g,w){(typeof skip8>"u"||skip8.indexOf("on")===-1)&&i[8].set("on",o.mode==="dark")},function(o,i,u,h,g,w){(typeof skip8>"u"||skip8.indexOf("bgColor")===-1)&&i[8].set("bgColor",o.$colors.get("color1"))},function(o,i,u,h,g,w){i[9][Symbol.for("props")].x={transition:o.$sizes.get("w")-120}},function(o,i,u,h,g,w){i[9][Symbol.for("props")].on=o.mode==="dark"},function(o,i,u,h,g,w){i[9][Symbol.for("props")].bgColor=o.$colors.get("color1")},function(o,i,u,h,g,w){i[10].set("h",{transition:o.$sizes.get("block1.h")})},function(o,i,u,h,g,w){i[10].set("color",o.$colors.get("color2"))},function(o,i,u,h,g,w){i[10].set("effects",[{type:"radius",props:{radius:o.radius/2}}])},function(o,i,u,h,g,w){i[11].set("w",{transition:o.$sizes.get("block2.w")})},function(o,i,u,h,g,w){i[11].set("h",o.$sizes.get("block2.h"))},function(o,i,u,h,g,w){i[11].set("y",{transition:o.$sizes.get("block2.y")})},function(o,i,u,h,g,w){i[11].set("color",o.$colors.get("color2"))},function(o,i,u,h,g,w){i[11].set("effects",[{type:"radius",props:{radius:o.radius/2}}])},function(o,i,u,h,g,w){i[12].set("x",{transition:o.$sizes.get("graph.x")})},function(o,i,u,h,g,w){i[12].set("y",{transition:o.$sizes.get("graph.y")})},function(o,i,u,h,g,w){i[12].set("w",o.$sizes.get("graph.w"))},function(o,i,u,h,g,w){i[12].set("h",o.$sizes.get("graph.h"))},function(o,i,u,h,g,w){i[13].set("x",{transition:o.$sizes.get("graph.offset")})},function(o,i,u,h,g,w){i[13].set("y",{transition:o.$sizes.get("graph.offset")})},function(o,i,u,h,g,w){(typeof skip14>"u"||skip14.indexOf("bgColor")===-1)&&i[14].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,w){(typeof skip14>"u"||skip14.indexOf("primaryColor")===-1)&&i[14].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,w){(typeof skip14>"u"||skip14.indexOf("size")===-1)&&i[14].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,w){i[15][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,w){i[15][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,w){i[15][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,u,h,g,w){(typeof skip16>"u"||skip16.indexOf("bgColor")===-1)&&i[16].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,w){(typeof skip16>"u"||skip16.indexOf("primaryColor")===-1)&&i[16].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,w){(typeof skip16>"u"||skip16.indexOf("size")===-1)&&i[16].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,w){i[17][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,w){i[17][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,w){i[17][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,u,h,g,w){(typeof skip18>"u"||skip18.indexOf("bgColor")===-1)&&i[18].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,w){(typeof skip18>"u"||skip18.indexOf("primaryColor")===-1)&&i[18].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,w){(typeof skip18>"u"||skip18.indexOf("size")===-1)&&i[18].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,w){i[19][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,w){i[19][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,w){i[19][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,u,h,g,w){(typeof skip20>"u"||skip20.indexOf("bgColor")===-1)&&i[20].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,w){(typeof skip20>"u"||skip20.indexOf("primaryColor")===-1)&&i[20].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,w){(typeof skip20>"u"||skip20.indexOf("size")===-1)&&i[20].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,w){i[21][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,w){i[21][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,w){i[21][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,u,h,g,w){(typeof skip22>"u"||skip22.indexOf("bgColor")===-1)&&i[22].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,w){(typeof skip22>"u"||skip22.indexOf("primaryColor")===-1)&&i[22].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,w){(typeof skip22>"u"||skip22.indexOf("size")===-1)&&i[22].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,w){i[23][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,w){i[23][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,w){i[23][Symbol.for("props")].size=o.$sizes.get("graph.size")}],context:{}},state(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode(f){this.$colors.set(f)},sizes(f){this.$sizes.set(f)}},computed:{text(){return this.mode==="dark"?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}}),dL="ABC123",pL="https://8b4fa39d.lightningjs.workers.dev";let CT,TT;const mL="w185",gL={headers:{"Content-Type":"application/json",Authorization:"Bearer "+dL}};function wC(f,o=mL){return TT+o+f}function yL(...f){return CT?sg(...f):bT().then(()=>sg(...f))}function sg(f,o={}){return fetch(pL+f,{...gL,...o}).then(i=>i.json())}function bT(){return sg("/configuration").then(f=>(CT=f,TT=f.images.secure_base_url,f))}const mg={get:yL,loadConfig:bT},SC=f=>mg.get(`/${f}/popular`).then(ET),ET=f=>f.results.filter(i=>!i.adult).map(i=>({poster:wC(i.poster_path||i.profile_path),background:wC(i.backdrop_path,"w1280"),identifier:i.id,title:i.title||i.name,overview:i.overview})),pl=f=>{const o=Array.isArray(f)?f:[f];return vL("movie").then(({genres:i})=>{let u=[];return i.forEach(h=>{o.includes(h.name)&&u.push(h.id)}),mg.get(`/discover/movie?with_genres=${u.join()}`).then(ET)})},vL=f=>mg.get(`/genre/${f}/list`),xL=Je.Component("Poster",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=1280,m.h=720,m.x=i.x,m.src=i.item.background,m.color="{top: '0xffffffff', bottom: '0x000000ff'}",m.scale={transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(S),o=s[1];const v={};s[2]=this.element({parent:o||"root"},i),v.w=185,v.h=278,v.x=54,v.y=220,v.src=i.item.poster,s[2].populate(v),o=s[1];const y={};s[3]=this.element({parent:o||"root"},i),y.content=i.item.title,y.font="raleway",y.y=520,y.x=54,y.size=64,y.maxwidth=1e3,y.maxlines=1,y.__textnode=!0,s[3].populate(y),o=s[1];const I={};return s[4]=this.element({parent:o||"root"},i),I.content=i.item.overview,I.size=21,I.y=620,I.x=60,I.color="0xccccccff",I.maxwidth=1e3,I.maxlines=2,I.lineheight=36,I.__textnode=!0,s[4].populate(I),s},effects:[function(o,i,u,h,g,w){i[0].set("src",o.item.background)},function(o,i,u,h,g,w){i[0].set("scale",{transition:{value:o.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,w){i[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,w){i[1].set("alpha",{transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,w){i[2].set("src",o.item.poster)},function(o,i,u,h,g,w){i[3].set("content",o.item.title)},function(o,i,u,h,g,w){i[4].set("content",o.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),wL=Je.Component("Poster",{code:{render:function(o,i,u,h,g,w){const s=[],m={};return s[0]=this.element({parent:o||"root"},i),m.w=185,m.h=278,m.x=i.x,m.src=i.item.poster,m.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),s},effects:[function(o,i,u,h,g,w){i[0].set("src",o.item.poster)},function(o,i,u,h,g,w){i[0].set("scale",{transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,w){i[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),SL=Je.Component("PosterTitle",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=185,m.h=278,m.x=i.x,m.src=i.item.poster,m.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.x=10,S.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},S.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(S),o=s[1];const v={};return s[2]=this.element({parent:o||"root"},i),v.content=i.item.title,v.font="raleway",v.size=22,v.maxwidth=185,v.maxlines=2,v.lineheight=28,v.__textnode=!0,s[2].populate(v),s},effects:[function(o,i,u,h,g,w){i[0].set("src",o.item.poster)},function(o,i,u,h,g,w){i[0].set("scale",{transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,w){i[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,w){i[1].set("y",{transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,w){i[1].set("alpha",{transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,w){i[2].set("content",o.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),CL=Je.Component("TmdbRow",{components:{Hero:xL,Poster:wL,PosterTitle:SL},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1;const y={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(y),o=s[0];const I={};s[1]=this.element({parent:o||"root"},v===!0?S:i),I.x={transition:{value:i.x,duration:300,easing:"ease-in-out"}},I.y=80,s[1].populate(I),o=s[1];const D=[],T=(B=[],N,z)=>{const F=w(B),H=new Set;let X=F.length;for(;X--;){const le=F[X];H.add(""+le.identifier)}let $=z.length;for(;$--;)if(H.has(z[$])===!1){const le=z[$];N[2][le]&&N[2][le].destroy(),delete N[2][le],N[3][le]&&N[3][le].destroy(),delete N[3][le]}z.length=0;const oe=F.length,fe=[];for(let le=0;le<oe;le++){const A=Object.create(i);o=N[1],A.item=F[le],A.index=le,A.key=""+A.item.identifier,A.__ref="poster"+le,z.push(A.key);const Y=u.components&&u.components.Component||h.Component;N[2]===void 0&&(N[2]={});const Q={};N[2][A.key]===void 0&&(N[2][A.key]=this.element({parent:o||"root"},v===!0?S:i)),Q.is=A.type,Q.index=A.index,Q.item=A.item,Q.ref=A.__ref,Q.width=A.width;const ee=[];if(typeof Y<"u")for(let W in Y.config.props)delete Q[Y.config.props[W]],ee.push(Y.config.props[W]);N[2][A.key].nodeId===void 0&&N[2][A.key].populate(Q),N[3]===void 0&&(N[3]={}),o=N[2][A.key];const q={};if(N[3][A.key]===void 0){q.is=A.type,q.index=A.index,q.item=A.item,q.ref=A.__ref,q.width=A.width,m=q.is||"Component";let W;if(typeof m=="string"){if(W=u.components&&u.components[m]||h[m],!W)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);N[3][A.key]=W.call(null,{props:q},N[2][A.key],i),N[3][A.key][Symbol.for("slots")][0]?(o=N[3][A.key][Symbol.for("slots")][0],S=N[3][A.key],v=!0):o=N[3][A.key][Symbol.for("children")][0]}}return fe};let L;return g(()=>{i[Symbol.for("removeGlobalEffects")](L),L=null,L=T(i.items,s,D)},"items"),s},effects:[function(o,i,u,h,g,w){i[1].set("x",{transition:{value:o.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return 150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(f){const o=this.$select("poster"+f);o&&o.$focus&&(o.$focus(),this.$emit("posterSelect",this.items[f]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),TL=Je.Component("Background",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.src=i.bg1,S.w=1920,S.h=1080,S.color="{top: '0xffffffff', bottom: '0x000000ff'}",S.alpha={transition:{value:i.alpha1,duration:400,easing:"ease-in"}},s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.src=i.bg2,v.w=1920,v.h=1080,v.color="{top: '0xffffffff', bottom: '0x000000ff'}",v.alpha={transition:{value:i.alpha2,duration:400,easing:"ease-in"}},s[2].populate(v),o=s[0];const y={};return s[3]=this.element({parent:o||"root"},i),y.w=1920,y.h=1080,y.src="assets/gradient.png",y.color="0x8866ddff",y.alpha=.8,s[3].populate(y),s},effects:[function(o,i,u,h,g,w){i[1].set("src",o.bg1)},function(o,i,u,h,g,w){i[1].set("alpha",{transition:{value:o.alpha1,duration:400,easing:"ease-in"}})},function(o,i,u,h,g,w){i[2].set("src",o.bg2)},function(o,i,u,h,g,w){i[2].set("alpha",{transition:{value:o.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["src"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{src(f){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=f,this.alpha1=.8,this.alpha2=0):(this.bg2=f,this.alpha1=0,this.alpha2=.8)}}}),bL=Je.Component("TMdb",{components:{Background:TL,TmdbRow:CL},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),D.w=1920,D.h=1080,D.color="0x000000ff",s[0].populate(D),y===!0&&(I-=1);const T=u.components&&u.components.Background||h.Background;o=s[0];const L={};s[1]=this.element({parent:o||"root"},y===!0?v:i),L.src=i.src;const B=[];if(typeof T<"u")for(let Q in T.config.props)delete L[T.config.props[Q]],B.push(T.config.props[Q]);s[1].populate(L),y===!0&&(I-=1),o=s[1];const N={};S=i.src,Array.isArray(S)===!0&&(S=w(S).slice(0)),N.src=S,m=N.is||"Background";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "Background" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:N},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],v=s[2],y=!0):o=s[2][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[0];const F={};s[3]=this.element({parent:o||"root"},y===!0?v:i),s[3].populate(F),y===!0&&(I-=1),o=s[3];const H={};s[4]=this.element({parent:o||"root"},y===!0?v:i),H.y={transition:{value:i.contentY,duration:i.duration}},H.alpha={transition:{value:i.alpha,duration:i.duration}},s[4].populate(H),y===!0&&(I-=1),o=s[4];const X={};s[5]=this.element({parent:o||"root"},y===!0?v:i),X.src="assets/logo.png",X.x=140,X.y=90,X.w=243,X.h=52,s[5].populate(X),y===!0&&(I-=1),o=s[4];const $={};s[6]=this.element({parent:o||"root"},y===!0?v:i),$.content=i.title,$.font="raleway",$.size=80,$.x=140,$.y=300,$.maxwidth=1e3,$["@loaded"]=i.positionText&&i.positionText.bind(i),$.maxlines=1,$.__textnode=!0,s[6].populate($),y===!0&&(I-=1),o=s[4];const oe={};s[7]=this.element({parent:o||"root"},y===!0?v:i),oe.content=i.overview,oe.maxwidth=880,oe.x=140,oe.y=430,oe.lineheight=40,oe.maxlines=3,oe.__textnode=!0,s[7].populate(oe),y===!0&&(I-=1),o=s[3];const fe={};s[8]=this.element({parent:o||"root"},y===!0?v:i),fe.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[8].populate(fe),y===!0&&(I-=1),o=s[8];const le=[],A=(Q=[],ee,q)=>{const W=w(Q),ie=new Set;let ue=W.length;for(;ue--;){const ke=W[ue];ie.add(""+ke.title)}let ve=q.length;for(;ve--;)if(ie.has(q[ve])===!1){const ke=q[ve];ee[9][ke]&&ee[9][ke].destroy(),delete ee[9][ke],ee[10][ke]&&ee[10][ke].destroy(),delete ee[10][ke]}q.length=0;const Te=W.length,xe=[];for(let ke=0;ke<Te;ke++){const pe=Object.create(i);o=ee[8],pe.row=W[ke],pe.index=ke,pe.key=""+pe.row.title,pe.__ref="row"+ke,q.push(pe.key);const Le=u.components&&u.components.TmdbRow||h.TmdbRow;ee[9]===void 0&&(ee[9]={});const G={};ee[9][pe.key]===void 0&&(ee[9][pe.key]=this.element({parent:o||"root"},y===!0?v:i)),G.title=pe.row.title,G.items=pe.row.items,G.type=pe.row.type,G.width=pe.row.width,G.y=pe.row.y,G.ref=pe.__ref;const Ie=[];if(typeof Le<"u")for(let ze in Le.config.props)delete G[Le.config.props[ze]],Ie.push(Le.config.props[ze]);ee[9][pe.key].nodeId===void 0&&(ee[9][pe.key].populate(G),y===!0&&(I-=1)),ee[10]===void 0&&(ee[10]={}),o=ee[9][pe.key];const Oe={};if(ee[10][pe.key]===void 0){Oe.title=pe.row.title,S=pe.row.items,Array.isArray(S)===!0&&(S=w(S).slice(0)),Oe.items=S,S=pe.row.type,Array.isArray(S)===!0&&(S=w(S).slice(0)),Oe.type=S,S=pe.row.width,Array.isArray(S)===!0&&(S=w(S).slice(0)),Oe.width=S,Oe.y=pe.row.y,Oe.ref=pe.__ref,m=Oe.is||"TmdbRow";let ze;if(typeof m=="string"){if(ze=u.components&&u.components[m]||h[m],!ze)throw new Error('Component "TmdbRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ze=m);ee[10][pe.key]=ze.call(null,{props:Oe},ee[9][pe.key],i),ee[10][pe.key][Symbol.for("slots")][0]?(o=ee[10][pe.key][Symbol.for("slots")][0],v=ee[10][pe.key],y=!0):o=ee[10][pe.key][Symbol.for("children")][0]}let Be=()=>{(typeof Ie>"u"||Ie.indexOf("items")===-1)&&ee[9][pe.key].set("items",pe.row.items)};g(Be,null),xe.push(Be);let Ve=()=>{(typeof Ie>"u"||Ie.indexOf("type")===-1)&&ee[9][pe.key].set("type",pe.row.type)};g(Ve,null),xe.push(Ve);let qe=()=>{(typeof Ie>"u"||Ie.indexOf("width")===-1)&&ee[9][pe.key].set("width",pe.row.width)};g(qe,null),xe.push(qe),ee[10][pe.key][Symbol.for("props")].items=pe.row.items,ee[10][pe.key][Symbol.for("props")].type=pe.row.type,ee[10][pe.key][Symbol.for("props")].width=pe.row.width}return xe};let Y;return g(()=>{i[Symbol.for("removeGlobalEffects")](Y),Y=null,Y=A(i.rows,s,le)},"rows"),s},effects:[function(o,i,u,h,g,w){(typeof skip1>"u"||skip1.indexOf("src")===-1)&&i[1].set("src",o.src)},function(o,i,u,h,g,w){i[2][Symbol.for("props")].src=o.src},function(o,i,u,h,g,w){i[4].set("y",{transition:{value:o.contentY,duration:o.duration}})},function(o,i,u,h,g,w){i[4].set("alpha",{transition:{value:o.alpha,duration:o.duration}})},function(o,i,u,h,g,w){i[6].set("content",o.title)},function(o,i,u,h,g,w){i[7].set("content",o.overview)},function(o,i,u,h,g,w){i[8].set("y",{transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(f){const o=this.$select("row"+f);o&&o.$focus&&o.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await SC("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await pl(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await pl(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await SC("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await pl(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await pl("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await pl("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",f=>{this.focused===0&&(this.src=f.background,this.title=f.title,this.overview=f.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),EL=Je.Component("MenuSprite",{code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.src="assets/menusprite.png",T.x=748,T.y=120,T.w=425,T.h=340,s[1].populate(T),y===!0&&(I-=1),o=s[0];const L={};s[2]=this.element({parent:o||"root"},y===!0?v:i),L.y=680,L.x=560,s[2].populate(L),y===!0&&(I-=1);const B=u.components&&u.components.Sprite||h.Sprite;o=s[2];const N={};s[3]=this.element({parent:o||"root"},y===!0?v:i),N.image="assets/menusprite.png",N.x=0,N.w=140,N.h=140,N.map=i.map,N.frame=i.icon1;const z=[];if(typeof B<"u")for(let xe in B.config.props)delete N[B.config.props[xe]],z.push(B.config.props[xe]);s[3].populate(N),y===!0&&(I-=1),o=s[3];const F={};F.image="assets/menusprite.png",F.x=0,F.w=140,F.h=140,F.map=i.map,S=i.icon1,Array.isArray(S)===!0&&(S=w(S).slice(0)),F.frame=S,m=F.is||"Sprite";let H;if(typeof m=="string"){if(H=u.components&&u.components[m]||h[m],!H)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(H=m);s[4]=H.call(null,{props:F},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],v=s[4],y=!0):o=s[4][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const X=u.components&&u.components.Sprite||h.Sprite;o=s[2];const $={};s[5]=this.element({parent:o||"root"},y===!0?v:i),$.image="assets/menusprite.png",$.x=220,$.w=140,$.h=140,$.map=i.map,$.frame="icon2";const oe=[];if(typeof X<"u")for(let xe in X.config.props)delete $[X.config.props[xe]],oe.push(X.config.props[xe]);s[5].populate($),y===!0&&(I-=1),o=s[5];const fe={};fe.image="assets/menusprite.png",fe.x=220,fe.w=140,fe.h=140,fe.map=i.map,fe.frame="icon2",m=fe.is||"Sprite";let le;if(typeof m=="string"){if(le=u.components&&u.components[m]||h[m],!le)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(le=m);s[6]=le.call(null,{props:fe},s[5],i),s[6][Symbol.for("slots")][0]?(o=s[6][Symbol.for("slots")][0],v=s[6],y=!0):o=s[6][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const A=u.components&&u.components.Sprite||h.Sprite;o=s[2];const Y={};s[7]=this.element({parent:o||"root"},y===!0?v:i),Y.image="assets/menusprite.png",Y.x=440,Y.w=140,Y.h=140,Y.map=i.map,Y.frame="icon3";const Q=[];if(typeof A<"u")for(let xe in A.config.props)delete Y[A.config.props[xe]],Q.push(A.config.props[xe]);s[7].populate(Y),y===!0&&(I-=1),o=s[7];const ee={};ee.image="assets/menusprite.png",ee.x=440,ee.w=140,ee.h=140,ee.map=i.map,ee.frame="icon3",m=ee.is||"Sprite";let q;if(typeof m=="string"){if(q=u.components&&u.components[m]||h[m],!q)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(q=m);s[8]=q.call(null,{props:ee},s[7],i),s[8][Symbol.for("slots")][0]?(o=s[8][Symbol.for("slots")][0],v=s[8],y=!0):o=s[8][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const W=u.components&&u.components.Sprite||h.Sprite;o=s[2];const ie={};s[9]=this.element({parent:o||"root"},y===!0?v:i),ie.image="assets/menusprite.png",ie.x=660,ie.w=140,ie.h=140,ie.map=i.map,ie.frame="icon4_unfocus";const ue=[];if(typeof W<"u")for(let xe in W.config.props)delete ie[W.config.props[xe]],ue.push(W.config.props[xe]);s[9].populate(ie),y===!0&&(I-=1),o=s[9];const ve={};ve.image="assets/menusprite.png",ve.x=660,ve.w=140,ve.h=140,ve.map=i.map,ve.frame="icon4_unfocus",m=ve.is||"Sprite";let Te;if(typeof m=="string"){if(Te=u.components&&u.components[m]||h[m],!Te)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Te=m);return s[10]=Te.call(null,{props:ve},s[9],i),s[10][Symbol.for("slots")][0]?(o=s[10][Symbol.for("slots")][0],v=s[10],y=!0):o=s[10][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){(typeof skip3>"u"||skip3.indexOf("frame")===-1)&&i[3].set("frame",o.icon1)},function(o,i,u,h,g,w){i[4][Symbol.for("props")].frame=o.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),Ch=["menu"],kL=Je.Component("Sprites",{components:{MenuSprite:EL},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1);const T=u.components&&u.components.MenuSprite||h.MenuSprite;o=s[0];const L={};s[1]=this.element({parent:o||"root"},y===!0?v:i),L.show=i.currentSprite==="menu";const B=[];if(typeof T<"u")for(let F in T.config.props)delete L[T.config.props[F]],B.push(T.config.props[F]);s[1].populate(L),y===!0&&(I-=1),o=s[1];const N={};S=i.currentSprite==="menu",Array.isArray(S)===!0&&(S=w(S).slice(0)),N.show=S,m=N.is||"MenuSprite";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "MenuSprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);return s[2]=z.call(null,{props:N},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],v=s[2],y=!0):o=s[2][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){(typeof skip1>"u"||skip1.indexOf("show")===-1)&&i[1].set("show",o.currentSprite==="menu")},function(o,i,u,h,g,w){i[2][Symbol.for("props")].show=o.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const f=Ch.indexOf(this.currentSprite);f<Ch.length-1?this.currentSprite=Ch[f+1]:this.currentSprite=Ch[0]}}}),Wh=Je.Component("Button",{code:{render:function(o,i,u,h,g,w){const s=[],m={};return s[0]=this.element({parent:o||"root"},i),m.w=300,m.h=80,m.color=i.color||"0xff0000ff",m.effects=[{type:"radius",props:{radius:20}}],m.alpha={transition:i.alpha},m.scale={transition:i.scale},m.rotation=i.rotate,s[0].populate(m),s},effects:[function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:20}}])},function(o,i,u,h,g,w){i[0].set("alpha",{transition:o.alpha})},function(o,i,u,h,g,w){i[0].set("scale",{transition:o.scale})},function(o,i,u,h,g,w){i[0].set("rotation",o.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),AL=Je.Component("Menu",{components:{Button:Wh},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),I.x={transition:i.x},I.w=400,I.h=1080,I.color="{right: '0x64748baa', left: '0x475569aa'}",s[0].populate(I),v===!0&&(y-=1),o=s[0];const D={};s[1]=this.element({parent:o||"root"},v===!0?S:i),D.x=50,D.y=40,s[1].populate(D),v===!0&&(y-=1);const T=u.components&&u.components.Button||h.Button;o=s[1];const L={};s[2]=this.element({parent:o||"root"},v===!0?S:i),L.color="0xe4e4e7ff",L.ref="menu1";const B=[];if(typeof T<"u")for(let ve in T.config.props)delete L[T.config.props[ve]],B.push(T.config.props[ve]);s[2].populate(L),v===!0&&(y-=1),o=s[2];const N={};N.color="0xe4e4e7ff",N.ref="menu1",m=N.is||"Button";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[3]=z.call(null,{props:N},s[2],i),s[3][Symbol.for("slots")][0]?(o=s[3][Symbol.for("slots")][0],S=s[3],v=!0):o=s[3][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const F=u.components&&u.components.Button||h.Button;o=s[1];const H={};s[4]=this.element({parent:o||"root"},v===!0?S:i),H.color="0xe4e4e7ff",H.y=100,H.ref="menu2";const X=[];if(typeof F<"u")for(let ve in F.config.props)delete H[F.config.props[ve]],X.push(F.config.props[ve]);s[4].populate(H),v===!0&&(y-=1),o=s[4];const $={};$.color="0xe4e4e7ff",$.y=100,$.ref="menu2",m=$.is||"Button";let oe;if(typeof m=="string"){if(oe=u.components&&u.components[m]||h[m],!oe)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(oe=m);s[5]=oe.call(null,{props:$},s[4],i),s[5][Symbol.for("slots")][0]?(o=s[5][Symbol.for("slots")][0],S=s[5],v=!0):o=s[5][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const fe=u.components&&u.components.Button||h.Button;o=s[1];const le={};s[6]=this.element({parent:o||"root"},v===!0?S:i),le.color="0xe4e4e7ff",le.y=200,le.ref="menu3";const A=[];if(typeof fe<"u")for(let ve in fe.config.props)delete le[fe.config.props[ve]],A.push(fe.config.props[ve]);s[6].populate(le),v===!0&&(y-=1),o=s[6];const Y={};Y.color="0xe4e4e7ff",Y.y=200,Y.ref="menu3",m=Y.is||"Button";let Q;if(typeof m=="string"){if(Q=u.components&&u.components[m]||h[m],!Q)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Q=m);s[7]=Q.call(null,{props:Y},s[6],i),s[7][Symbol.for("slots")][0]?(o=s[7][Symbol.for("slots")][0],S=s[7],v=!0):o=s[7][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const ee=u.components&&u.components.Button||h.Button;o=s[1];const q={};s[8]=this.element({parent:o||"root"},v===!0?S:i),q.color="0xe4e4e7ff",q.y=300,q.ref="menu4";const W=[];if(typeof ee<"u")for(let ve in ee.config.props)delete q[ee.config.props[ve]],W.push(ee.config.props[ve]);s[8].populate(q),v===!0&&(y-=1),o=s[8];const ie={};ie.color="0xe4e4e7ff",ie.y=300,ie.ref="menu4",m=ie.is||"Button";let ue;if(typeof m=="string"){if(ue=u.components&&u.components[m]||h[m],!ue)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ue=m);return s[9]=ue.call(null,{props:ie},s[8],i),s[9][Symbol.for("slots")][0]?(o=s[9][Symbol.for("slots")][0],S=s[9],v=!0):o=s[9][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),s},effects:[function(o,i,u,h,g,w){i[0].set("x",{transition:o.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const f=this.$select(`menu${this.focused}`);f&&f.$focus&&f.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),IL=Je.Component("FocusHandling",{components:{Menu:AL,Button:Wh},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.x=300,T.y=150,s[1].populate(T),y===!0&&(I-=1);const L=u.components&&u.components.Button||h.Button;o=s[1];const B={};s[2]=this.element({parent:o||"root"},y===!0?v:i),B.color="0xef4444ff",B.x=0,B.ref="button1",B.z=i.focused===1?1:0;const N=[];if(typeof L<"u")for(let Ze in L.config.props)delete B[L.config.props[Ze]],N.push(L.config.props[Ze]);s[2].populate(B),y===!0&&(I-=1),o=s[2];const z={};z.color="0xef4444ff",z.x=0,z.ref="button1",S=i.focused===1?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),z.z=S,m=z.is||"Button";let F;if(typeof m=="string"){if(F=u.components&&u.components[m]||h[m],!F)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(F=m);s[3]=F.call(null,{props:z},s[2],i),s[3][Symbol.for("slots")][0]?(o=s[3][Symbol.for("slots")][0],v=s[3],y=!0):o=s[3][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const H=u.components&&u.components.Button||h.Button;o=s[1];const X={};s[4]=this.element({parent:o||"root"},y===!0?v:i),X.color="0xf97316ff",X.x=320,X.ref="button2",X.z=i.focused===2?1:0;const $=[];if(typeof H<"u")for(let Ze in H.config.props)delete X[H.config.props[Ze]],$.push(H.config.props[Ze]);s[4].populate(X),y===!0&&(I-=1),o=s[4];const oe={};oe.color="0xf97316ff",oe.x=320,oe.ref="button2",S=i.focused===2?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),oe.z=S,m=oe.is||"Button";let fe;if(typeof m=="string"){if(fe=u.components&&u.components[m]||h[m],!fe)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);s[5]=fe.call(null,{props:oe},s[4],i),s[5][Symbol.for("slots")][0]?(o=s[5][Symbol.for("slots")][0],v=s[5],y=!0):o=s[5][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const le=u.components&&u.components.Button||h.Button;o=s[1];const A={};s[6]=this.element({parent:o||"root"},y===!0?v:i),A.color="0x84cc16ff",A.x=640,A.ref="button3",A.z=i.focused===3?1:0;const Y=[];if(typeof le<"u")for(let Ze in le.config.props)delete A[le.config.props[Ze]],Y.push(le.config.props[Ze]);s[6].populate(A),y===!0&&(I-=1),o=s[6];const Q={};Q.color="0x84cc16ff",Q.x=640,Q.ref="button3",S=i.focused===3?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),Q.z=S,m=Q.is||"Button";let ee;if(typeof m=="string"){if(ee=u.components&&u.components[m]||h[m],!ee)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[7]=ee.call(null,{props:Q},s[6],i),s[7][Symbol.for("slots")][0]?(o=s[7][Symbol.for("slots")][0],v=s[7],y=!0):o=s[7][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const q=u.components&&u.components.Button||h.Button;o=s[1];const W={};s[8]=this.element({parent:o||"root"},y===!0?v:i),W.color="0x10b981ff",W.x=0,W.y=100,W.ref="button4",W.z=i.focused===4?1:0;const ie=[];if(typeof q<"u")for(let Ze in q.config.props)delete W[q.config.props[Ze]],ie.push(q.config.props[Ze]);s[8].populate(W),y===!0&&(I-=1),o=s[8];const ue={};ue.color="0x10b981ff",ue.x=0,ue.y=100,ue.ref="button4",S=i.focused===4?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),ue.z=S,m=ue.is||"Button";let ve;if(typeof m=="string"){if(ve=u.components&&u.components[m]||h[m],!ve)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);s[9]=ve.call(null,{props:ue},s[8],i),s[9][Symbol.for("slots")][0]?(o=s[9][Symbol.for("slots")][0],v=s[9],y=!0):o=s[9][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Te=u.components&&u.components.Button||h.Button;o=s[1];const xe={};s[10]=this.element({parent:o||"root"},y===!0?v:i),xe.color="0x06b6d4ff",xe.y=100,xe.x=320,xe.ref="button5",xe.z=i.focused===5?1:0;const ke=[];if(typeof Te<"u")for(let Ze in Te.config.props)delete xe[Te.config.props[Ze]],ke.push(Te.config.props[Ze]);s[10].populate(xe),y===!0&&(I-=1),o=s[10];const pe={};pe.color="0x06b6d4ff",pe.y=100,pe.x=320,pe.ref="button5",S=i.focused===5?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),pe.z=S,m=pe.is||"Button";let Le;if(typeof m=="string"){if(Le=u.components&&u.components[m]||h[m],!Le)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Le=m);s[11]=Le.call(null,{props:pe},s[10],i),s[11][Symbol.for("slots")][0]?(o=s[11][Symbol.for("slots")][0],v=s[11],y=!0):o=s[11][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const G=u.components&&u.components.Button||h.Button;o=s[1];const Ie={};s[12]=this.element({parent:o||"root"},y===!0?v:i),Ie.color="0x3b82f6ff",Ie.y=100,Ie.x=640,Ie.ref="button6",Ie.z=i.focused===6?1:0;const Oe=[];if(typeof G<"u")for(let Ze in G.config.props)delete Ie[G.config.props[Ze]],Oe.push(G.config.props[Ze]);s[12].populate(Ie),y===!0&&(I-=1),o=s[12];const Be={};Be.color="0x3b82f6ff",Be.y=100,Be.x=640,Be.ref="button6",S=i.focused===6?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),Be.z=S,m=Be.is||"Button";let Ve;if(typeof m=="string"){if(Ve=u.components&&u.components[m]||h[m],!Ve)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ve=m);s[13]=Ve.call(null,{props:Be},s[12],i),s[13][Symbol.for("slots")][0]?(o=s[13][Symbol.for("slots")][0],v=s[13],y=!0):o=s[13][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const qe=u.components&&u.components.Button||h.Button;o=s[1];const ze={};s[14]=this.element({parent:o||"root"},y===!0?v:i),ze.color="0x8b5cf6ff",ze.y=200,ze.x=0,ze.ref="button7",ze.z=i.focused===7?1:0;const it=[];if(typeof qe<"u")for(let Ze in qe.config.props)delete ze[qe.config.props[Ze]],it.push(qe.config.props[Ze]);s[14].populate(ze),y===!0&&(I-=1),o=s[14];const me={};me.color="0x8b5cf6ff",me.y=200,me.x=0,me.ref="button7",S=i.focused===7?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),me.z=S,m=me.is||"Button";let wt;if(typeof m=="string"){if(wt=u.components&&u.components[m]||h[m],!wt)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(wt=m);s[15]=wt.call(null,{props:me},s[14],i),s[15][Symbol.for("slots")][0]?(o=s[15][Symbol.for("slots")][0],v=s[15],y=!0):o=s[15][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ft=u.components&&u.components.Button||h.Button;o=s[1];const rt={};s[16]=this.element({parent:o||"root"},y===!0?v:i),rt.color="0xd946efff",rt.y=200,rt.x=320,rt.ref="button8",rt.z=i.focused===8?1:0;const St=[];if(typeof ft<"u")for(let Ze in ft.config.props)delete rt[ft.config.props[Ze]],St.push(ft.config.props[Ze]);s[16].populate(rt),y===!0&&(I-=1),o=s[16];const nt={};nt.color="0xd946efff",nt.y=200,nt.x=320,nt.ref="button8",S=i.focused===8?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),nt.z=S,m=nt.is||"Button";let st;if(typeof m=="string"){if(st=u.components&&u.components[m]||h[m],!st)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(st=m);s[17]=st.call(null,{props:nt},s[16],i),s[17][Symbol.for("slots")][0]?(o=s[17][Symbol.for("slots")][0],v=s[17],y=!0):o=s[17][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Xe=u.components&&u.components.Button||h.Button;o=s[1];const He={};s[18]=this.element({parent:o||"root"},y===!0?v:i),He.color="0xf43f5eff",He.y=200,He.x=640,He.ref="button9",He.z=i.focused===9?1:0;const Pe=[];if(typeof Xe<"u")for(let Ze in Xe.config.props)delete He[Xe.config.props[Ze]],Pe.push(Xe.config.props[Ze]);s[18].populate(He),y===!0&&(I-=1),o=s[18];const J={};J.color="0xf43f5eff",J.y=200,J.x=640,J.ref="button9",S=i.focused===9?1:0,Array.isArray(S)===!0&&(S=w(S).slice(0)),J.z=S,m=J.is||"Button";let Ge;if(typeof m=="string"){if(Ge=u.components&&u.components[m]||h[m],!Ge)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ge=m);s[19]=Ge.call(null,{props:J},s[18],i),s[19][Symbol.for("slots")][0]?(o=s[19][Symbol.for("slots")][0],v=s[19],y=!0):o=s[19][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Ye=u.components&&u.components.Menu||h.Menu;o=s[0];const ht={};s[20]=this.element({parent:o||"root"},y===!0?v:i),ht.ref="menu";const vt=[];if(typeof Ye<"u")for(let Ze in Ye.config.props)delete ht[Ye.config.props[Ze]],vt.push(Ye.config.props[Ze]);s[20].populate(ht),y===!0&&(I-=1),o=s[20];const Ae={};Ae.ref="menu",m=Ae.is||"Menu";let Ue;if(typeof m=="string"){if(Ue=u.components&&u.components[m]||h[m],!Ue)throw new Error('Component "Menu" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);return s[21]=Ue.call(null,{props:Ae},s[20],i),s[21][Symbol.for("slots")][0]?(o=s[21][Symbol.for("slots")][0],v=s[21],y=!0):o=s[21][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){(typeof skip2>"u"||skip2.indexOf("z")===-1)&&i[2].set("z",o.focused===1?1:0)},function(o,i,u,h,g,w){i[3][Symbol.for("props")].z=o.focused===1?1:0},function(o,i,u,h,g,w){(typeof skip4>"u"||skip4.indexOf("z")===-1)&&i[4].set("z",o.focused===2?1:0)},function(o,i,u,h,g,w){i[5][Symbol.for("props")].z=o.focused===2?1:0},function(o,i,u,h,g,w){(typeof skip6>"u"||skip6.indexOf("z")===-1)&&i[6].set("z",o.focused===3?1:0)},function(o,i,u,h,g,w){i[7][Symbol.for("props")].z=o.focused===3?1:0},function(o,i,u,h,g,w){(typeof skip8>"u"||skip8.indexOf("z")===-1)&&i[8].set("z",o.focused===4?1:0)},function(o,i,u,h,g,w){i[9][Symbol.for("props")].z=o.focused===4?1:0},function(o,i,u,h,g,w){(typeof skip10>"u"||skip10.indexOf("z")===-1)&&i[10].set("z",o.focused===5?1:0)},function(o,i,u,h,g,w){i[11][Symbol.for("props")].z=o.focused===5?1:0},function(o,i,u,h,g,w){(typeof skip12>"u"||skip12.indexOf("z")===-1)&&i[12].set("z",o.focused===6?1:0)},function(o,i,u,h,g,w){i[13][Symbol.for("props")].z=o.focused===6?1:0},function(o,i,u,h,g,w){(typeof skip14>"u"||skip14.indexOf("z")===-1)&&i[14].set("z",o.focused===7?1:0)},function(o,i,u,h,g,w){i[15][Symbol.for("props")].z=o.focused===7?1:0},function(o,i,u,h,g,w){(typeof skip16>"u"||skip16.indexOf("z")===-1)&&i[16].set("z",o.focused===8?1:0)},function(o,i,u,h,g,w){i[17][Symbol.for("props")].z=o.focused===8?1:0},function(o,i,u,h,g,w){(typeof skip18>"u"||skip18.indexOf("z")===-1)&&i[18].set("z",o.focused===9?1:0)},function(o,i,u,h,g,w){i[19][Symbol.for("props")].z=o.focused===9?1:0}],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(f){const o=this.$select(`button${f}`);o&&o.$focus&&o.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const f=this.focused-1;if(f===0){const o=this.$select("menu");o&&o.$focus&&o.$focus()}else this.focused=Math.max(f,1)},a(){const f=this.$select("menu");f&&f.$focus&&f.$focus()}}}),ML=Je.Component("Positioning",{code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(I),v===!0&&(y-=1),o=s[0];const D={};s[1]=this.element({parent:o||"root"},v===!0?S:i),D.w=100,D.h=100,D.x=20,D.y=20,D.color="0xecfeffff",s[1].populate(D),v===!0&&(y-=1),o=s[0];const T={};s[2]=this.element({parent:o||"root"},v===!0?S:i),T.w=100,T.h=100,T.x=140,T.y=20,T.color="0xa5f3fcff",s[2].populate(T),v===!0&&(y-=1),o=s[0];const L={};s[3]=this.element({parent:o||"root"},v===!0?S:i),L.w=100,L.h=100,L.x=260,L.y=20,L.color="0x22d3eeff",s[3].populate(L),v===!0&&(y-=1),o=s[0];const B={};s[4]=this.element({parent:o||"root"},v===!0?S:i),B.w=100,B.h=100,B.x=380,B.y=20,B.color="0x0891b2ff",s[4].populate(B),v===!0&&(y-=1),o=s[0];const N={};s[5]=this.element({parent:o||"root"},v===!0?S:i),N.w=100,N.h=100,N.x=i.x1,N.y=i.y,N.color="0xfdf4ffff",s[5].populate(N),v===!0&&(y-=1),o=s[0];const z={};s[6]=this.element({parent:o||"root"},v===!0?S:i),z.w=100,z.h=100,z.x=i.x2,z.y=i.y,z.color="0xf5d0feff",s[6].populate(z),v===!0&&(y-=1),o=s[0];const F={};s[7]=this.element({parent:o||"root"},v===!0?S:i),F.w=100,F.h=100,F.x=i.x3,F.y=i.y,F.color="0xe879f9ff",s[7].populate(F),v===!0&&(y-=1),o=s[0];const H={};s[8]=this.element({parent:o||"root"},v===!0?S:i),H.w=100,H.h=100,H.x=i.x4,H.y=i.y,H.color="0xc026d3ff",s[8].populate(H),v===!0&&(y-=1),o=s[0];const X={};s[9]=this.element({parent:o||"root"},v===!0?S:i),X.w=100,X.h=100,X.x=i.xA,X.y=260,X.color="0xfff7edff",s[9].populate(X),v===!0&&(y-=1),o=s[0];const $={};s[10]=this.element({parent:o||"root"},v===!0?S:i),$.w=100,$.h=100,$.x=i.xB,$.y=260,$.color="0xfed7aaff",s[10].populate($),v===!0&&(y-=1),o=s[0];const oe={};s[11]=this.element({parent:o||"root"},v===!0?S:i),oe.w=100,oe.h=100,oe.x=i.xC,oe.y=260,oe.color="0xfb923cff",s[11].populate(oe),v===!0&&(y-=1),o=s[0];const fe={};s[12]=this.element({parent:o||"root"},v===!0?S:i),fe.w=100,fe.h=100,fe.x=i.xD,fe.y=260,fe.color="0xea580cff",s[12].populate(fe),v===!0&&(y-=1),o=s[0];const le={};s[13]=this.element({parent:o||"root"},v===!0?S:i),le.w=800,le.h=800,le.y=20,le.x=800,le.color="0xecfdf5ff",s[13].populate(le),v===!0&&(y-=1),o=s[13];const A={};s[14]=this.element({parent:o||"root"},v===!0?S:i),A.w=600,A.h=600,A.y=20,A.x=20,A.color="0xa7f3d0ff",s[14].populate(A),v===!0&&(y-=1),o=s[14];const Y={};s[15]=this.element({parent:o||"root"},v===!0?S:i),Y.w=400,Y.h=400,Y.y=100,Y.x=20,Y.color="0x34d399ff",s[15].populate(Y),v===!0&&(y-=1),o=s[15];const Q={};s[16]=this.element({parent:o||"root"},v===!0?S:i),Q.w=200,Q.h=100,Q.y=(400-100)/2,Q.x=(400-200)/2,Q.color="0x059669ff",s[16].populate(Q),v===!0&&(y-=1),o=s[16];const ee={};s[17]=this.element({parent:o||"root"},v===!0?S:i),ee.w=50,ee.h=50,ee.y={transition:i.yNested},ee.x={transition:i.xNested},ee.color="0x065f46ff",s[17].populate(ee),v===!0&&(y-=1),o=s[0];const q={};s[18]=this.element({parent:o||"root"},v===!0?S:i),q.w=100,q.h=100,q.y=500,q.x=20,q.color="0xe11d48ff",s[18].populate(q),v===!0&&(y-=1),o=s[0];const W={};s[19]=this.element({parent:o||"root"},v===!0?S:i),W.w=200,W.h=200,W.x=50,W.y=700,W.color="0x94a3b8ff",W.z=100,s[19].populate(W),v===!0&&(y-=1),o=s[19];const ie={};s[20]=this.element({parent:o||"root"},v===!0?S:i),ie.content="Lightning!",ie.x=100,ie.y=140,ie.__textnode=!0,s[20].populate(ie),v===!0&&(y-=1),o=s[19];const ue={};s[21]=this.element({parent:o||"root"},v===!0?S:i),ue.w=300,ue.h=100,ue.color="0x475569ff",s[21].populate(ue),v===!0&&(y-=1);const ve=u.components&&u.components.Circle||h.Circle;o=s[19];const Te={};s[22]=this.element({parent:o||"root"},v===!0?S:i),Te.x=150,Te.y=150,Te.size=100,Te.color="0xffffffff";const xe=[];if(typeof ve<"u")for(let st in ve.config.props)delete Te[ve.config.props[st]],xe.push(ve.config.props[st]);s[22].populate(Te),v===!0&&(y-=1),o=s[22];const ke={};ke.x=150,ke.y=150,ke.size=100,ke.color="0xffffffff",m=ke.is||"Circle";let pe;if(typeof m=="string"){if(pe=u.components&&u.components[m]||h[m],!pe)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);s[23]=pe.call(null,{props:ke},s[22],i),s[23][Symbol.for("slots")][0]?(o=s[23][Symbol.for("slots")][0],S=s[23],v=!0):o=s[23][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[0];const Le={};s[24]=this.element({parent:o||"root"},v===!0?S:i),Le.w=300,Le.h=300,Le.x=50,Le.y=700,Le.color="0xef444480",s[24].populate(Le),v===!0&&(y-=1),o=s[0];const G={};s[25]=this.element({parent:o||"root"},v===!0?S:i),G.w=400,G.h=100,G.x=800,G.y=900,G.color="0x0284c7ff",s[25].populate(G),v===!0&&(y-=1),o=s[25];const Ie={};s[26]=this.element({parent:o||"root"},v===!0?S:i),Ie.w=o.node.width*(42/100),Ie.h=o.node.height*(30/100),Ie.y=o.node.height*(5/100),Ie.x=o.node.width*(1/100),Ie.color="0x075985ff",s[26].populate(Ie),v===!0&&(y-=1),o=s[25];const Oe={};s[27]=this.element({parent:o||"root"},v===!0?S:i),Oe.w=i.bar2.v,Oe.h=o.node.height*(30/100),Oe.y=o.node.height*(35/100),Oe.x=o.node.width*(1/100),Oe.color="0x6b21a8ff",s[27].populate(Oe),v===!0&&(y-=1),o=s[25];const Be={};s[28]=this.element({parent:o||"root"},v===!0?S:i),Be.w={transition:i.bar3},Be.h=o.node.height*(30/100),Be.y=o.node.height*(65/100),Be.x=o.node.width*(1/100),Be.color="0x9f1239ff",s[28].populate(Be),v===!0&&(y-=1),o=s[0];const Ve={};s[29]=this.element({parent:o||"root"},v===!0?S:i),Ve.w=250,Ve.h=250,Ve.color="0xfef08aff",Ve.x=450,Ve.y=700,s[29].populate(Ve),v===!0&&(y-=1),o=s[29];const qe={};s[30]=this.element({parent:o||"root"},v===!0?S:i),qe.w=40,qe.h=40,qe.placement="left",qe.color="0x818cf8ff",s[30].populate(qe),v===!0&&(y-=1),o=s[29];const ze={};s[31]=this.element({parent:o||"root"},v===!0?S:i),ze.w=40,ze.h=40,ze.placement="center",ze.color="0x2563ebff",s[31].populate(ze),v===!0&&(y-=1),o=s[29];const it={};s[32]=this.element({parent:o||"root"},v===!0?S:i),it.w=40,it.h=40,it.placement="right",it.color="0x1e40afff",s[32].populate(it),v===!0&&(y-=1),o=s[29];const me={};s[33]=this.element({parent:o||"root"},v===!0?S:i),me.w=40,me.h=40,me.x=54,me.placement="top",me.color="0xf472b6ff",s[33].populate(me),v===!0&&(y-=1),o=s[29];const wt={};s[34]=this.element({parent:o||"root"},v===!0?S:i),wt.w=40,wt.h=40,wt.x=54,wt.placement="middle",wt.color="0xdb2777ff",s[34].populate(wt),v===!0&&(y-=1),o=s[29];const ft={};s[35]=this.element({parent:o||"root"},v===!0?S:i),ft.w=40,ft.h=40,ft.x=54,ft.placement="bottom",ft.color="0xbe185dff",s[35].populate(ft),v===!0&&(y-=1),o=s[29];const rt={};s[36]=this.element({parent:o||"root"},v===!0?S:i),rt.w=40,rt.h=40,rt.placement="{x: 'center', y: 'bottom'}",rt.color="0xa3e635ff",s[36].populate(rt),v===!0&&(y-=1),o=s[29];const St={};s[37]=this.element({parent:o||"root"},v===!0?S:i),St.w=40,St.h=40,St.placement="{x: 'right', y: 'middle'}",St.color="0x65a30dff",s[37].populate(St),v===!0&&(y-=1),o=s[29];const nt={};return s[38]=this.element({parent:o||"root"},v===!0?S:i),nt.w=40,nt.h=40,nt.placement="{x: 'center', y: 'middle'}",nt.color="0x4d7c0fff",s[38].populate(nt),v===!0&&(y-=1),s},effects:[function(o,i,u,h,g,w){i[9].set("x",o.xA)},function(o,i,u,h,g,w){i[10].set("x",o.xB)},function(o,i,u,h,g,w){i[11].set("x",o.xC)},function(o,i,u,h,g,w){i[12].set("x",o.xD)},function(o,i,u,h,g,w){i[16].set("y",(400-100)/2)},function(o,i,u,h,g,w){i[16].set("x",(400-200)/2)},function(o,i,u,h,g,w){i[17].set("y",{transition:o.yNested})},function(o,i,u,h,g,w){i[17].set("x",{transition:o.xNested})},function(o,i,u,h,g,w){i[27].set("w",o.bar2.v)},function(o,i,u,h,g,w){i[28].set("w",{transition:o.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const f=parseFloat(this.bar2.v),o=this.bar2.direction==="up"?f+10:f-10;this.bar2.v=o+"%",o>=90&&(this.bar2.direction="down"),o<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var _L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RL(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var kT={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(f){(function(){var o=typeof window<"u"?window:_L,i={};(function(h,g,w){var s;function m(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var S=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function v(e){e=[typeof globalThis=="object"&&globalThis,e,typeof h=="object"&&h,typeof self=="object"&&self,typeof g=="object"&&g];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=v(this);function I(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];if(!(a in n))break e;n=n[a]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&S(n,e,{configurable:!0,writable:!0,value:t})}}I("Symbol",function(e){function t(l){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(l||"")+"_"+a++,l)}function n(l,c){this.g=l,S(this,"description",{configurable:!0,writable:!0,value:c})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return t}),I("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&S(r.prototype,e,{configurable:!0,writable:!0,value:function(){return D(m(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function T(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:m(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function L(e){if(!(e instanceof Array)){e=T(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var B=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},N;if(typeof Object.setPrototypeOf=="function")N=Object.setPrototypeOf;else{var z;e:{var F={a:!0},H={};try{H.__proto__=F,z=H.a;break e}catch{}z=!1}N=z?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var X=N;function $(e,t){if(e.prototype=B(t.prototype),e.prototype.constructor=e,X)X(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.hk=t.prototype}function oe(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function fe(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}oe.prototype.s=function(e){this.h=e};function le(e,t){e.i={sg:t,Fg:!0},e.g=e.m||e.j}oe.prototype.return=function(e){this.i={return:e},this.g=this.j};function A(e,t,n){return e.g=n,{value:t}}oe.prototype.u=function(e){this.g=e};function Y(e){e.g=0}function Q(e,t,n){e.m=t,n!=null&&(e.j=n)}function ee(e,t){e.m=0,e.j=t||0}function q(e,t,n){e.g=t,e.m=n||0}function W(e,t){return e.m=t||0,t=e.i.sg,e.i=null,t}function ie(e){e.A=[e.i],e.m=0,e.j=0}function ue(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Fg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function ve(e){this.g=new oe,this.h=e}function Te(e,t){fe(e.g);var n=e.g.l;return n?xe(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),ke(e))}function xe(e,t,n,r){try{var a=t.call(e.g.l,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.o=!1,a;var l=a.value}catch(c){return e.g.l=null,le(e.g,c),ke(e)}return e.g.l=null,r.call(e.g,l),ke(e)}function ke(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,le(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Fg)throw t.sg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function pe(e){this.next=function(t){return fe(e.g),e.g.l?t=xe(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=ke(e)),t},this.throw=function(t){return fe(e.g),e.g.l?t=xe(e,e.g.l.throw,t,e.g.s):(le(e.g,t),t=ke(e)),t},this.return=function(t){return Te(e,t)},this[Symbol.iterator]=function(){return this}}function Le(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,a){function l(c){c.done?r(c.value):Promise.resolve(c.value).then(t,n).then(l,a)}l(e.next())})}function G(e){return Le(new pe(new ve(e)))}function Ie(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}I("Promise",function(e){function t(c){this.h=0,this.i=void 0,this.g=[],this.o=!1;var d=this.j();try{c(d.resolve,d.reject)}catch(p){d.reject(p)}}function n(){this.g=null}function r(c){return c instanceof t?c:new t(function(d){d(c)})}if(e)return e;n.prototype.h=function(c){if(this.g==null){this.g=[];var d=this;this.i(function(){d.l()})}this.g.push(c)};var a=y.setTimeout;n.prototype.i=function(c){a(c,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var c=this.g;this.g=[];for(var d=0;d<c.length;++d){var p=c[d];c[d]=null;try{p()}catch(x){this.j(x)}}}this.g=null},n.prototype.j=function(c){this.i(function(){throw c})},t.prototype.j=function(){function c(x){return function(C){p||(p=!0,x.call(d,C))}}var d=this,p=!1;return{resolve:c(this.F),reject:c(this.l)}},t.prototype.F=function(c){if(c===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof t)this.H(c);else{e:switch(typeof c){case"object":var d=c!=null;break e;case"function":d=!0;break e;default:d=!1}d?this.C(c):this.m(c)}},t.prototype.C=function(c){var d=void 0;try{d=c.then}catch(p){this.l(p);return}typeof d=="function"?this.I(d,c):this.m(c)},t.prototype.l=function(c){this.s(2,c)},t.prototype.m=function(c){this.s(1,c)},t.prototype.s=function(c,d){if(this.h!=0)throw Error("Cannot settle("+c+", "+d+"): Promise already settled in state"+this.h);this.h=c,this.i=d,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var c=this;a(function(){if(c.B()){var d=y.console;typeof d<"u"&&d.error(c.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var c=y.CustomEvent,d=y.Event,p=y.dispatchEvent;return typeof p>"u"?!0:(typeof c=="function"?c=new c("unhandledrejection",{cancelable:!0}):typeof d=="function"?c=new d("unhandledrejection",{cancelable:!0}):(c=y.document.createEvent("CustomEvent"),c.initCustomEvent("unhandledrejection",!1,!0,c)),c.promise=this,c.reason=this.i,p(c))},t.prototype.A=function(){if(this.g!=null){for(var c=0;c<this.g.length;++c)l.h(this.g[c]);this.g=null}};var l=new n;return t.prototype.H=function(c){var d=this.j();c.Ed(d.resolve,d.reject)},t.prototype.I=function(c,d){var p=this.j();try{c.call(d,p.resolve,p.reject)}catch(x){p.reject(x)}},t.prototype.then=function(c,d){function p(k,E){return typeof k=="function"?function(M){try{x(k(M))}catch(R){C(R)}}:E}var x,C,b=new t(function(k,E){x=k,C=E});return this.Ed(p(c,x),p(d,C)),b},t.prototype.catch=function(c){return this.then(void 0,c)},t.prototype.Ed=function(c,d){function p(){switch(x.h){case 1:c(x.i);break;case 2:d(x.i);break;default:throw Error("Unexpected state: "+x.h)}}var x=this;this.g==null?l.h(p):this.g.push(p),this.o=!0},t.resolve=r,t.reject=function(c){return new t(function(d,p){p(c)})},t.race=function(c){return new t(function(d,p){for(var x=T(c),C=x.next();!C.done;C=x.next())r(C.value).Ed(d,p)})},t.all=function(c){var d=T(c),p=d.next();return p.done?r([]):new t(function(x,C){function b(M){return function(R){k[M]=R,E--,E==0&&x(k)}}var k=[],E=0;do k.push(void 0),E++,r(p.value).Ed(b(k.length-1),C),p=d.next();while(!p.done)})},t});function Oe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}I("WeakMap",function(e){function t(p){if(this.g=(d+=Math.random()+1).toString(),p){p=T(p);for(var x;!(x=p.next()).done;)x=x.value,this.set(x[0],x[1])}}function n(){}function r(p){var x=typeof p;return x==="object"&&p!==null||x==="function"}function a(p){if(!Oe(p,c)){var x=new n;S(p,c,{value:x})}}function l(p){var x=Object[p];x&&(Object[p]=function(C){return C instanceof n?C:(Object.isExtensible(C)&&a(C),x(C))})}if(function(){if(!e||!Object.seal)return!1;try{var p=Object.seal({}),x=Object.seal({}),C=new e([[p,2],[x,3]]);return C.get(p)!=2||C.get(x)!=3?!1:(C.delete(p),C.set(x,4),!C.has(p)&&C.get(x)==4)}catch{return!1}}())return e;var c="$jscomp_hidden_"+Math.random();l("freeze"),l("preventExtensions"),l("seal");var d=0;return t.prototype.set=function(p,x){if(!r(p))throw Error("Invalid WeakMap key");if(a(p),!Oe(p,c))throw Error("WeakMap key fail: "+p);return p[c][this.g]=x,this},t.prototype.get=function(p){return r(p)&&Oe(p,c)?p[c][this.g]:void 0},t.prototype.has=function(p){return r(p)&&Oe(p,c)&&Oe(p[c],this.g)},t.prototype.delete=function(p){return r(p)&&Oe(p,c)&&Oe(p[c],this.g)?delete p[c][this.g]:!1},t}),I("Map",function(e){function t(){var d={};return d.Mb=d.next=d.head=d}function n(d,p){var x=d[1];return D(function(){if(x){for(;x.head!=d[1];)x=x.Mb;for(;x.next!=x.head;)return x=x.next,{done:!1,value:p(x)};x=null}return{done:!0,value:void 0}})}function r(d,p){var x=p&&typeof p;x=="object"||x=="function"?l.has(p)?x=l.get(p):(x=""+ ++c,l.set(p,x)):x="p_"+p;var C=d[0][x];if(C&&Oe(d[0],x))for(d=0;d<C.length;d++){var b=C[d];if(p!==p&&b.key!==b.key||p===b.key)return{id:x,list:C,index:d,entry:b}}return{id:x,list:C,index:-1,entry:void 0}}function a(d){if(this[0]={},this[1]=t(),this.size=0,d){d=T(d);for(var p;!(p=d.next()).done;)p=p.value,this.set(p[0],p[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var d=Object.seal({x:4}),p=new e(T([[d,"s"]]));if(p.get(d)!="s"||p.size!=1||p.get({x:4})||p.set({x:4},"t")!=p||p.size!=2)return!1;var x=p.entries(),C=x.next();return C.done||C.value[0]!=d||C.value[1]!="s"?!1:(C=x.next(),!(C.done||C.value[0].x!=4||C.value[1]!="t"||!x.next().done))}catch{return!1}}())return e;var l=new WeakMap;a.prototype.set=function(d,p){d=d===0?0:d;var x=r(this,d);return x.list||(x.list=this[0][x.id]=[]),x.entry?x.entry.value=p:(x.entry={next:this[1],Mb:this[1].Mb,head:this[1],key:d,value:p},x.list.push(x.entry),this[1].Mb.next=x.entry,this[1].Mb=x.entry,this.size++),this},a.prototype.delete=function(d){return d=r(this,d),d.entry&&d.list?(d.list.splice(d.index,1),d.list.length||delete this[0][d.id],d.entry.Mb.next=d.entry.next,d.entry.next.Mb=d.entry.Mb,d.entry.head=null,this.size--,!0):!1},a.prototype.clear=function(){this[0]={},this[1]=this[1].Mb=t(),this.size=0},a.prototype.has=function(d){return!!r(this,d).entry},a.prototype.get=function(d){return(d=r(this,d).entry)&&d.value},a.prototype.entries=function(){return n(this,function(d){return[d.key,d.value]})},a.prototype.keys=function(){return n(this,function(d){return d.key})},a.prototype.values=function(){return n(this,function(d){return d.value})},a.prototype.forEach=function(d,p){for(var x=this.entries(),C;!(C=x.next()).done;)C=C.value,d.call(p,C[1],C[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var c=0;return a}),I("Set",function(e){function t(n){if(this.g=new Map,n){n=T(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(T([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var a=r.entries(),l=a.next();return l.done||l.value[0]!=n||l.value[1]!=n?!1:(l=a.next(),l.done||l.value[0]==n||l.value[0].x!=4||l.value[1]!=l.value[0]?!1:a.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var a=this;this.g.forEach(function(l){return n.call(r,l,l,a)})},t)});function Be(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var l=n++;return{value:t(l,e[l]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}I("Array.prototype.keys",function(e){return e||function(){return Be(this,function(t){return t})}});function Ve(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,a=0;a<r;a++){var l=e[a];if(t.call(n,l,a,e))return{Dg:a,v:l}}return{Dg:-1,v:void 0}}I("Array.prototype.findIndex",function(e){return e||function(t,n){return Ve(this,t,n).Dg}}),I("Array.from",function(e){return e||function(t,n,r){n=n??function(d){return d};var a=[],l=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof l=="function"){t=l.call(t);for(var c=0;!(l=t.next()).done;)a.push(n.call(r,l.value,c++))}else for(l=t.length,c=0;c<l;c++)a.push(n.call(r,t[c],c));return a}}),I("Array.prototype.values",function(e){return e||function(){return Be(this,function(t,n){return n})}}),I("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),I("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var a=r.length;for(n=n||0,0>n&&(n=Math.max(n+a,0));n<a;n++){var l=r[n];if(l===t||Object.is(l,t))return!0}return!1}});function qe(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}I("String.prototype.includes",function(e){return e||function(t,n){return qe(this,t,"includes").indexOf(t,n||0)!==-1}}),I("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var a=Number(arguments[r]);if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),n+=String.fromCharCode(a&1023|56320))}return n}}),I("Array.prototype.find",function(e){return e||function(t,n){return Ve(this,t,n).v}}),I("String.prototype.startsWith",function(e){return e||function(t,n){var r=qe(this,t,"startsWith"),a=r.length,l=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var c=0;c<l&&n<a;)if(r[n++]!=t[c++])return!1;return c>=l}}),I("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=T(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),a=new e([n]);return!a.has(n)||a.has(r)?!1:(a.delete(n),a.add(r),!a.has(n)&&a.has(r))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)});var ze=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Oe(r,a)&&(e[a]=r[a])}return e};I("Object.assign",function(e){return e||ze}),I("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),I("Array.prototype.entries",function(e){return e||function(){return Be(this,function(t,n){return[t,n]})}}),I("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),I("String.prototype.repeat",function(e){return e||function(t){var n=qe(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),I("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),I("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)Oe(t,r)&&n.push(t[r]);return n}}),I("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),I("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),I("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),I("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)Oe(t,r)&&n.push([r,t[r]]);return n}});var it=this||self;function me(e,t){e=e.split(".");var n=it;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function wt(){}function ft(){}function rt(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}rt.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function St(e){return e.h/(1-Math.pow(e.g,e.i))}function nt(){this.h=new rt(2),this.j=new rt(5),this.g=0,this.i=128e3,this.l=16e3}nt.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},nt.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},nt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(St(this.h),St(this.j))};function st(){}function Xe(){}function He(){}function Pe(e){var t=Ie.apply(1,arguments);ht.has(e)||(ht.add(e),He.apply(st,L(t)))}function J(){}function Ge(){}function Ye(){}var ht=new Set;h.console&&(He=function(){return console.warn.apply(console,L(Ie.apply(0,arguments)))},Xe=function(){console.error.apply(console,L(Ie.apply(0,arguments)))});function vt(){this.g={}}s=vt.prototype,s.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},s.get=function(e){return(e=this.g[e])?e.slice():null},s.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},s.forEach=function(e){for(var t in this.g)e(t,this.g[t])},s.size=function(){return Object.keys(this.g).length},s.keys=function(){return Object.keys(this.g)};function Ae(){this.g=new vt}s=Ae.prototype,s.release=function(){this.Ra(),this.g=null},s.D=function(e,t,n,r){this.g&&(e=new Ue(e,t,n,r),this.g.push(t,e))},s.ha=function(e,t,n,r){function a(c){l.jb(e,t,a),n(c)}var l=this;this.D(e,t,a,r)},s.jb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=T(r);for(var a=r.next();!a.done;a=r.next())a=a.value,a.target!=e||n!=a.listener&&n||(a.jb(),this.g.remove(t,a))}},s.Ra=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,L(e.g[n]));for(e=T(t),t=e.next();!t.done;t=e.next())t.value.jb();this.g.g={}}},me("shaka.util.EventManager",Ae),Ae.prototype.removeAll=Ae.prototype.Ra,Ae.prototype.unlisten=Ae.prototype.jb,Ae.prototype.listenOnce=Ae.prototype.ha,Ae.prototype.listen=Ae.prototype.D,Ae.prototype.release=Ae.prototype.release;function Ue(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=Ze(e,r),this.target.addEventListener(t,n,this.g)}Ue.prototype.jb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Ze(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Ce(e)?t:t.capture||!1}function Ce(e){var t=ce;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch{t=!1}ce=t}return t||!1}var ce=void 0;function Ne(e){if(Ut.has(e))return Ut.get(e);if(h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return Ut.set(e,t),t}return h.MediaSource?(t=MediaSource.isTypeSupported(e),Ut.set(e,t),t):!1}function xt(){return!!h.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var Ut=new Map;function Ft(e,t){this.g=e,this.h=t}Ft.prototype.toString=function(){return"v"+this.g+"."+this.h};function Tt(e,t){var n=new Ft(5,0),r=pi,a=r.g,l=n.h-a.h;(0<(n.g-a.g||l)?r.i:r.h)(r.g,n,e,t)}function Vt(e,t,n,r){He([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function ln(e,t,n,r){Xe([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var pi=null;function Qn(){}Qn.prototype.extract=function(){},Qn.prototype.decode=function(){return[]},Qn.prototype.clear=function(){},Qn.prototype.getStreams=function(){return[]};function zn(){}zn.prototype.init=function(){},zn.prototype.parse=function(){return[]};function Vn(){}function In(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ni(e)==ni(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Me(e);t=Me(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function ni(e){return e instanceof ArrayBuffer?e:e.buffer}function yn(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Me(e,t,n){return n=n===void 0?1/0:n,Sn(e,t===void 0?0:t,n,Uint8Array)}function $e(e,t,n){return n=n===void 0?1/0:n,Sn(e,t===void 0?0:t,n,Uint16Array)}function Qt(e,t,n){return n=n===void 0?1/0:n,Sn(e,t===void 0?0:t,n,DataView)}function Sn(e,t,n,r){var a=ni(e),l=1;"BYTES_PER_ELEMENT"in r&&(l=r.BYTES_PER_ELEMENT);var c=((e.byteOffset||0)+e.byteLength)/l;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/l,c))),new r(a,e,Math.floor(Math.min(e+Math.max(n,0),c))-e)}me("shaka.util.BufferUtils",Vn),Vn.toDataView=Qt,Vn.toUint16=$e,Vn.toUint8=Me,Vn.toArrayBuffer=yn,Vn.equal=In;function En(){}En.prototype.init=function(){},En.prototype.i=function(){},En.prototype.g=function(){},En.prototype.j=function(){},me("shaka.media.IClosedCaptionParser",En);function dn(e){this.l=new zn,(e=Mn[e.toLowerCase()])&&(this.l=e()),this.h=new Qn,(e=_n)&&(this.h=e())}dn.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},dn.prototype.i=function(e){e=this.l.parse(e),e=T(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Me(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},dn.prototype.g=function(){this.h.clear()},dn.prototype.j=function(){return this.h.getStreams()},me("shaka.media.ClosedCaptionParser",dn),dn.findDecoder=function(){return _n},dn.unregisterDecoder=function(){_n=null},dn.registerDecoder=function(e){_n=e},dn.findParser=function(e){return Mn[e]},dn.unregisterParser=function(e){delete Mn[e]},dn.registerParser=function(e,t){Mn[e]=t};var Mn={},_n=null;function Wn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ct,this.scroll=et}me("shaka.text.CueRegion",Wn);var Ct=1;Wn.units={PX:0,PERCENTAGE:Ct,LINES:2};var et="";Wn.scrollMode={NONE:et,UP:"up"};function Un(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Ht(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function Rn(e,t,n){if(n||(n=Un),e.length!=t.length)return!1;t=t.slice(),e=T(e);for(var r=e.next(),a={};!r.done;a={Gg:void 0},r=e.next()){if(a.Gg=r.value,r=t.findIndex(function(l){return function(c){return n(l.Gg,c)}}(a)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function pn(e,t,n){if(n||(n=Un),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Lt(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Wn,this.position=null,this.positionAlign=To,this.size=0,this.textAlign=lt,this.direction=bo,this.writingMode=Ci,this.lineInterpretation=fo,this.line=null,this.lineHeight="",this.lineAlign=Eo,this.displayAlign=dt,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=co,this.fontStyle=Go,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={dc:32,rows:15}}function Si(e,t){return e=new Lt(e,t,""),e.lineBreak=!0,e}Lt.prototype.clone=function(){var e=new Lt(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Cn(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!pn(e.nestedCues,t.nestedCues,Cn))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!pn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}me("shaka.text.Cue",Lt),Lt.equal=Cn,Lt.prototype.clone=Lt.prototype.clone;var To="auto";Lt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:To};var lt="center",_e={LEFT:"left",RIGHT:"right",CENTER:lt,START:"start",END:"end"};Lt.textAlign=_e;var dt="after",lo={BEFORE:"before",CENTER:"center",AFTER:dt};Lt.displayAlign=lo;var bo="ltr";Lt.direction={HORIZONTAL_LEFT_TO_RIGHT:bo,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ci="horizontal-tb";Lt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ci,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var fo=0;Lt.lineInterpretation={LINE_NUMBER:fo,PERCENTAGE:1};var Eo="start",zr={CENTER:"center",START:Eo,END:"end"};Lt.lineAlign=zr;var Gt={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Lt.defaultTextColor=Gt;var bt={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Lt.defaultTextBackgroundColor=bt;var co=400;Lt.fontWeight={NORMAL:co,BOLD:700};var Go="normal",Vr={NORMAL:Go,ITALIC:"italic",OBLIQUE:"oblique"};Lt.fontStyle=Vr,Lt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function qi(){}qi.prototype.destroy=function(){};function Ui(e,t,n){rd[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ie:t}}function Ki(e,t){for(var n=e.toLowerCase().split(";")[0],r=T([vg,ad,sd,xr]),a=r.next();!a.done;a=r.next())if(a=rd[n+"-"+a.value]){var l=a.ie(),c=l.isSupported(e,t);if(l.destroy(),c)return a.ie}return null}me("shaka.transmuxer.TransmuxerEngine",qi),qi.findTransmuxer=Ki,qi.unregisterTransmuxer=function(e,t){delete rd[e.toLowerCase().split(";")[0]+"-"+t]},qi.registerTransmuxer=Ui,qi.prototype.destroy=qi.prototype.destroy;var rd={},xr=1,sd=2,ad=3,vg=4;qi.PluginPriority={FALLBACK:xr,PREFERRED_SECONDARY:sd,PREFERRED:ad,APPLICATION:vg};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var GT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Tn(e){var t;e instanceof Tn?(Fl(this,e.Bb),this.uc=e.uc,$l(this,e.Eb),ud(this,e.Mc),this.Pa=e.Pa,Ya(this,e.g.clone()),this.ec=e.ec):e&&(t=String(e).match(GT))?(Fl(this,t[1]||"",!0),this.uc=Qa(t[2]||""),$l(this,t[3]||"",!0),ud(this,t[4]),this.Pa=Qa(t[5]||"",!0),Ya(this,t[6]||"",!0),this.ec=Qa(t[7]||"")):this.g=new Ja(null)}s=Tn.prototype,s.Bb="",s.uc="",s.Eb="",s.Mc=null,s.Pa="",s.ec="",s.toString=function(){var e=[],t=this.Bb;if(t&&e.push(Za(t,xg,!0),":"),t=this.Eb){e.push("//");var n=this.uc;n&&e.push(Za(n,xg,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Mc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Eb&&t.charAt(0)!="/"&&e.push("/"),e.push(Za(t,t.charAt(0)=="/"?qT:XT,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.ec)&&e.push("#",Za(t,YT)),e.join("")},s.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new Tn);var n=!!e.Bb;n?Fl(t,e.Bb):n=!!e.uc,n?t.uc=e.uc:n=!!e.Eb,n?$l(t,e.Eb):n=e.Mc!=null;var r=e.Pa;if(n)ud(t,e.Mc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.Eb&&!this.Pa)r="/"+r;else{var a=t.Pa.lastIndexOf("/");a!=-1&&(r=t.Pa.substr(0,a+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){a=r.lastIndexOf("/",0)==0,r=r.split("/");for(var l=[],c=0;c<r.length;){var d=r[c++];d=="."?a&&c==r.length&&l.push(""):d==".."?((1<l.length||l.length==1&&l[0]!="")&&l.pop(),a&&c==r.length&&l.push("")):(l.push(d),a=!0)}r=l.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?Ya(t,e.g.clone()):n=!!e.ec,n&&(t.ec=e.ec),t},s.clone=function(){return new Tn(this)};function Fl(e,t,n){e.Bb=n?Qa(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function $l(e,t,n){e.Eb=n?Qa(t,!0):t}function ud(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Mc=t}else e.Mc=null}function Ya(e,t,n){t instanceof Ja?e.g=t:(n||(t=Za(t,KT)),e.g=new Ja(t))}function Qa(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Za(e,t,n){return e!=null?(e=encodeURI(e).replace(t,WT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function WT(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var xg=/[#\/\?@]/g,XT=/[#\?:]/g,qT=/[#\?]/g,KT=/[#\?@]/g,YT=/#/g;function Ja(e){this.g=e||null}function zl(e){if(!e.Ka&&(e.Ka={},e.Xc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),a=null;if(0<=r){var l=t[n].substring(0,r);a=t[n].substring(r+1)}else l=t[n];l=decodeURIComponent(l.replace(/\+/g," ")),a=a||"",e.add(l,decodeURIComponent(a.replace(/\+/g," ")))}}s=Ja.prototype,s.Ka=null,s.Xc=null;function wg(e){return zl(e),e.Xc}s.add=function(e,t){zl(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Xc++,this},s.set=function(e,t){return zl(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},s.get=function(e){return zl(this),this.Ka[e]||[]},s.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),r=this.Ka[t],a=0;a<r.length;a++){var l=n;r[a]!==""&&(l+="="+encodeURIComponent(r[a])),e.push(l)}return this.g=e.join("&")},s.clone=function(){var e=new Ja;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Xc=this.Xc}return e};function ne(e,t,n){var r=Ie.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(a){this.stack=a.stack}}ne.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},me("shaka.util.Error",ne),ne.Severity={RECOVERABLE:1,CRITICAL:2},ne.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},ne.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function Ss(e){this.h=e,this.g=void 0}Ss.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Sg(e,t){return e.length&&t.length&&e!==t?0<ld(e,t).length:!0}function ld(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=T(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var a=T(t),l=a.next();!l.done;l=a.next())if(l=l.value,r.keySystem==l.keySystem){a=new Map;for(var c=T((r.initData||[]).concat(l.initData||[])),d=c.next();!d.done;d=c.next())d=d.value,a.set(d.keyId,d);a=Array.from(a.values()),c=r.keyIds&&l.keyIds?new Set([].concat(L(r.keyIds),L(l.keyIds))):r.keyIds||l.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||l.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||l.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||l.persistentStateRequired,videoRobustness:r.videoRobustness||l.videoRobustness,audioRobustness:r.audioRobustness||l.audioRobustness,serverCertificate:r.serverCertificate||l.serverCertificate,serverCertificateUri:r.serverCertificateUri||l.serverCertificateUri,initData:a,keyIds:c});break}}return n}function fd(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var Vl=new Ss(function(){return yn(new Uint8Array([0]))}),Hl=new Map;function eu(e){this.h=e,this.g=null}eu.prototype.Y=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){h.clearTimeout(r),n=!1},r=h.setTimeout(function(){n&&t.h()},1e3*e),this},eu.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Et(e){this.h=e,this.g=null}Et.prototype.tc=function(){return this.stop(),this.h(),this},Et.prototype.Y=function(e){var t=this;return this.stop(),this.g=new eu(function(){t.h()}).Y(e),this},Et.prototype.Sa=function(e){var t=this;return this.stop(),this.g=new eu(function(){t.g.Y(e),t.h()}).Y(e),this},Et.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},me("shaka.util.Timer",Et),Et.prototype.stop=Et.prototype.stop,Et.prototype.tickEvery=Et.prototype.Sa,Et.prototype.tickAfter=Et.prototype.Y,Et.prototype.tickNow=Et.prototype.tc;function ko(){var e=h.ManagedMediaSource||h.MediaSource;return!!(e&&e.isTypeSupported)}function tu(e){return Tg().canPlayType(e)!=""}function nu(){return!!navigator.userAgent.match(/Edge?\//)}function Oo(){return Wt("Xbox One")}function No(){return Wt("Tizen")}function iu(){return Wt("Tizen 3")}function Gl(){return Wt("Tizen 2")}function Uo(){return Wt("Web0S")}function Wl(){return Uo()&&cd()===38}function Bi(){return Wt("CrKey")}function cd(){if(!Wt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function Cs(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!No()&&!Wt("PC=EOS")&&!Wt("PC=APL")&&!Wt("VirginMedia")&&!hd()&&!Bo()&&!Wt("AFT")&&!Wt("WPE")&&!Wt("DT_STB_BCM")}function Xl(){return Wt("PlayStation 5")}function Bo(){return Wt("PlayStation 4")}function ql(){return Wt("Hisense")||Wt("VIDAA")}function hd(){return Wt("SOPOpenBrowser")}function Ts(){if(!Cs())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function dd(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function Kl(){return Wt("Android")}function Cg(){return!!(No()||Uo()||Oo()||Bo()||Xl()||Wt("AFT")||Wt("PC=EOS")||Wt("PC=APL")||Wt("VirginMedia")||hd()||Wt("WPE")||Bi()||ql()||Wt("DT_STB_BCM"))}function Wt(e){return(navigator.userAgent||"").includes(e)}function Tg(){return bs||(pd||(pd=new Et(function(){bs=null})),(bs=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(bs=document.createElement("video")),pd.Y(1),bs)}function Yl(e){return e?e===h.shakaMediaKeysPolyfill:!!h.shakaMediaKeysPolyfill}function bg(){var e,t,n,r,a,l,c,d,p,x,C,b,k,E,M;return G(function(R){switch(R.g){case 1:if(e={width:1/0,height:1/0},Bi()){if(b=h.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,Q(R,15),!(k=b)){R.u(17);break}return A(R,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(No()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{He("Tizen: Error detecting screen size, default screen size 1920x1080.")}R.u(3);break}if(Oo()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,r=new n.Media.Protection.ProtectionCapabilities,a=n.Media.Protection.ProtectionCapabilityResult,l=null;do l=r.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(l===a.maybe);l===a.probably&&(e.width=3840,e.height=2160)}catch{He("Xbox: Error detecting screen size, default screen size 1920x1080.")}R.u(3);break}if(Uo()){try{c=JSON.parse(h.PalmSystem.deviceInfo),e.width=Math.max(1920,c.screenWidth),e.height=Math.max(1080,c.screenHeight)}catch{He("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}R.u(3);break}if(ql()){h.Hisense_Get4KSupportState&&h.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),R.u(3);break}if(!Bo()&&!Xl()){R.u(3);break}return d=!1,Q(R,9),A(R,h.msdk.device.getDisplayInfo(),11);case 11:p=R.h,d=p.resolution==="4K",q(R,10);break;case 9:return W(R),Q(R,12),A(R,h.msdk.device.getDisplayInfoImmediate(),14);case 14:x=R.h,d=x.resolution==="4K",q(R,10);break;case 12:C=W(R),He("PlayStation: Failed to get the display info:",C);case 10:d?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),R.u(3);break;case 18:k=R.h;case 17:if(k){e.width=3840,e.height=2160,R.u(19);break}if(!(E=b)){R.u(20);break}return A(R,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:E=R.h;case 20:E&&(e.width=1920,e.height=1080);case 19:q(R,3);break;case 15:M=W(R),Xe("Failed to check canDisplayType:",M);case 3:return R.return(e)}})}var pd=null,bs=null;function Hr(){}function nn(e){if(!e)return"";if(e=Me(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),h.TextDecoder&&!Bo())return e=new TextDecoder().decode(e),e.includes("�")&&Xe('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var a=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+a)}}return t}function Wo(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new ne(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=Qt(e);for(var a=0;a<n;a++)r[a]=e.getUint16(2*a,t);return gd(r)}function Xo(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Me(e);if(n[0]==239&&n[1]==187&&n[2]==191)return nn(n);if(n[0]==254&&n[1]==255)return Wo(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Wo(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Wo(e,!1);if(n[1]==0&&n[3]==0)return Wo(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return nn(e);throw new ne(2,2,2003)}function Ao(e){if(h.TextEncoder&&!Bo()){var t=new TextEncoder;return yn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return yn(t)}function md(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),a=0;a<e.length;++a)r.setUint16(2*a,e.charCodeAt(a),t);return n}function gd(e){return Eg.value()(e)}function mi(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(a){return a[1]=="#"?(a=a[2]=="x"||a[2]=="X"?parseInt(a.substring(3),16):parseInt(a.substring(2),10),0<=a&&1114111>=a?String.fromCodePoint(a):""):t[a]||"'"}):e||""}me("shaka.util.StringUtils",Hr),Hr.resetFromCharCode=function(){Eg.g=void 0},Hr.toUTF16=md,Hr.toUTF8=Ao,Hr.fromBytesAutoDetect=Xo,Hr.fromUTF16=Wo,Hr.fromUTF8=nn;var Eg=new Ss(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch{return!1}}for(var t={ac:65536};0<t.ac;t={ac:t.ac},t.ac/=2)if(e(t.ac))return function(n){return function(r){for(var a="",l=0;l<r.length;l+=n.ac)a+=String.fromCharCode.apply(null,r.subarray(l,l+n.ac));return a}}(t);return null});function si(){}function kg(e){return e=gd(Me(e)),btoa(e)}function Gr(e,t){return t=t??!0,e=kg(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Yi(e){e=h.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Wr(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=h.parseInt(e.substr(2*r,2),16);return n}function qo(e){var t=Me(e);e="",t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function vn(){for(var e=Ie.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var a=e[r];a instanceof Uint8Array?t.set(a,n):t.set(Me(a),n),n+=a.byteLength}return t}me("shaka.util.Uint8ArrayUtils",si),si.concat=vn,si.toHex=qo,si.fromHex=Wr,si.fromBase64=Yi,si.toBase64=Gr,si.toStandardBase64=kg;function Zn(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new Tn(e[0]);return t=new Tn(t[0]),[n.resolve(t).toString()]}t=t.map(function(c){return new Tn(c)}),n=[],e=T(e);for(var r=e.next();!r.done;r=e.next()){r=new Tn(r.value);for(var a=T(t),l=a.next();!l.done;l=a.next())n.push(r.resolve(l.value).toString())}return n}function Xr(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function Ag(e,t){t=t===void 0?"cenc":t;var n=[],r=[],a=[];e.forEach(function(c,d){var p=d;p.length!=22&&(p=Gr(Wr(d),!1));var x=c;x.length!=22&&(x=Gr(Wr(c),!1)),c={kty:"oct",kid:p,k:x},n.push(c),r.push(c.kid),a.push(d)}),e=JSON.stringify({keys:n});var l=JSON.stringify({kids:r});return l=[{initData:Me(Ao(l)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+h.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:l,keyIds:new Set(a)}}function Es(e,t){if(t.length==1)return t[0];if(e=Ti(e,t),e!=null)return e;throw new ne(2,4,4025,t)}function Ti(e,t){for(var n=T(Ig[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var a=T(t),l=a.next();!l.done;l=a.next())if(l=l.value,r.test(l.trim()))return l.trim()}return e==_t?"":null}function yd(e,t){var n=[];e=T(Ig[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var a=T(t),l=a.next();!l.done;l=a.next())l=l.value,r.test(l.trim())&&n.push(l.trim())}return n}var _t="text",Ln={ga:"video",X:"audio",ua:_t,De:"image",gj:"application"},QT=1/15,Ig={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function vd(){}function Dn(e,t){var n=e;return t&&!wr.includes(e)&&(n+='; codecs="'+t+'"'),n}function qr(e,t){return t&&(e+='; codecs="'+t+'"'),e}function ks(e,t,n){var r=Dn(e,t);return t=qr(e,t),Ki(t)?(e=Ki(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function ZT(e,t,n){var r=[t];return JT.forEach(function(a,l){var c=e[l];l=="codecs"?wr.includes(e.mimeType)||r.push('codecs="'+n+'"'):c&&r.push(a+'="'+c+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function Ql(e){return e.split(";")[0].split("/")[1]}function gi(e){var t=_g(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function As(e){var t=[];e=T(e.split(","));for(var n=e.next();!n.done;n=e.next())n=_g(n.value),t.push(n[0]);return t.sort().join(",")}function ho(e){return e.split(";")[0]}function ji(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Mg(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function _g(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}me("shaka.util.MimeUtils",vd),vd.getFullTypeWithAllCodecs=qr,vd.getFullType=Dn;var JT=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),wr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ko(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function ou(e){return Pn[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!_n:!1}Ko.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function eb(e,t,n,r,a){var l,c,d,p,x,C,b;return G(function(k){if(k.g==1)return A(k,Promise.resolve(),2);if(!e.i||!e.j)return k.return();if(n==null||r==null)return e.i.parseInit(Me(t)),k.return();for(l=e.B?n:e.s,c={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:l},d=e.i.parseMedia(Me(t),c,a),p=T(d),x=p.next();!x.done;x=p.next())C=x.value,e.A(C,a||null,c);b=d.filter(function(E){return E.startTime>=e.l&&E.startTime<e.m}),e.j.append(b),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),Y(k)})}Ko.prototype.remove=function(e,t){var n=this;return G(function(r){if(r.g==1)return A(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),Y(r)})};function tb(e,t,n){e.l=t,e.m=n}function Rg(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=T(t.keys()),a=r.next();!a.done;a=r.next())(a=t.get(a.value).filter(function(l){return l.endTime<=n}))&&e.j.append(a)}function Lg(e,t,n){t.startTime+=n,t.endTime+=n,t=T(t.nestedCues);for(var r=t.next();!r.done;r=t.next())Lg(e,r.value,n)}function nb(e,t,n,r,a){var l=n+" "+r,c=new Map;t=T(t);for(var d=t.next();!d.done;d=t.next()){var p=d.value;d=p.stream,p=p.cue,c.has(d)||c.set(d,new Map),c.get(d).has(l)||c.get(d).set(l,[]),Lg(e,p,a),p.startTime>=e.l&&p.startTime<e.m&&(c.get(d).get(l).push(p),d==e.C&&e.j.append([p]))}for(a=T(c.keys()),l=a.next();!l.done;l=a.next())for(l=l.value,e.o.has(l)||e.o.set(l,new Map),t=T(c.get(l).keys()),d=t.next();!d.done;d=t.next())d=d.value,p=c.get(l).get(d),e.o.get(l).set(d,p);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}me("shaka.text.TextEngine",Ko),Ko.prototype.destroy=Ko.prototype.destroy,Ko.findParser=function(e){return Pn[e]},Ko.unregisterParser=function(e){delete Pn[e]},Ko.registerParser=function(e,t){Pn[e]=t};var Pn={};function ib(e,t){return e.concat(t)}function Dg(){}function Kr(e){return e!=null}function po(){}function Is(e,t){return e=$t(e),t=$t(t),e.split("-")[0]==t.split("-")[0]}function ru(e,t){return e=$t(e),t=$t(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function xd(e,t){return e=$t(e),t=$t(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function $t(e){e=T(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=T(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Pg.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Yr(e,t){return e=$t(e),t=$t(t),t==e?4:ru(t,e)?3:xd(t,e)?2:ru(e,t)?1:0}function wd(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Pg.get(e)||e}function Sd(e){return e.language?$t(e.language):e.audio&&e.audio.language?$t(e.audio.language):e.video&&e.video.language?$t(e.video.language):"und"}function Zl(e,t){e=$t(e);var n=new Set;t=T(t);for(var r=t.next();!r.done;r=t.next())n.add($t(r.value));for(t=T(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=T(n),r=t.next();!r.done;r=t.next())if(r=r.value,ru(r,e))return r;for(t=T(n),r=t.next();!r.done;r=t.next())if(r=r.value,xd(r,e))return r;for(n=T(n),t=n.next();!t.done;t=n.next())if(t=t.value,ru(e,t))return t;return null}me("shaka.util.LanguageUtils",po),po.findClosestLocale=Zl,po.getLocaleForVariant=Sd,po.getLocaleForText=function(e){return $t(e.language||"und")},po.getBase=wd,po.relatedness=Yr,po.areSiblings=function(e,t){var n=wd(e),r=wd(t);return e!=n&&t!=r&&n==r},po.normalize=$t,po.isSiblingOf=xd,po.isParentOf=ru,po.areLanguageCompatible=Is,po.areLocaleCompatible=function(e,t){return e=$t(e),t=$t(t),e==t};var Pg=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function jo(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer instanceof ArrayBuffer)return r;if(n.has(r))return null;var a=r.constructor==Array;if(r.constructor!=Object&&!a)return null;n.add(r);var l=a?[]:{},c;for(c in r)l[c]=t(r[c]);return a&&(l.length=r.length),l}}var n=new WeakSet;return t(e)}function Cd(e){var t={},n;for(n in e)t[n]=e[n];return t}function Og(){}function Ng(e,t,n,r){var a=e.variants;if((t.length||n.length)&&(a=ob(a,t,n)),r.length){for(t=new vt,a=T(a),n=a.next();!n.done;n=a.next())n=n.value,t.push(String(n.video.width||0),n);var l=[];t.forEach(function(M,R){M=0;var _=[];R=T(R);for(var j=R.next(),U={};!j.done;U={Ae:void 0},j=R.next())U.Ae=j.value,j=r.filter(function(K){return function(O){return K.Ae.decodingInfos[0][O]}}(U)).length,j>M?(M=j,_=[U.Ae]):j==M&&_.push(U.Ae);l.push.apply(l,L(_))}),a=l}n=new Set,t=new Set,a=T(a);for(var c=a.next();!c.done;c=a.next())c=c.value,c.audio&&n.add(c.audio),c.video&&t.add(c.video);n=Array.from(n).sort(function(M,R){return M.bandwidth-R.bandwidth});var d=[];for(a=new Map,n=T(n),c=n.next();!c.done;c=n.next()){c=c.value;var p=c.language+(c.channelsCount||0)+(c.audioSamplingRate||0)+c.roles.join(",")+c.label+c.groupId+c.fastSwitching,x=a.get(p)||[];if(x.length){var C=x[x.length-1],b=gi(C.codecs),k=gi(c.codecs);b!=k||c.bandwidth&&C.bandwidth&&!(c.bandwidth>C.bandwidth)||(x.push(c),d.push(c.id))}else x.push(c),d.push(c.id);a.set(p,x)}n=Array.from(t).sort(function(M,R){return M.bandwidth&&R.bandwidth?M.bandwidth-R.bandwidth:M.width-R.width}),t=xt();var E=[];for(a=new Map,n=T(n),c=n.next();!c.done;c=n.next()){if(c=c.value,p=Math.round(c.frameRate||0)+(c.hdr||"")+c.fastSwitching,x=a.get(p)||[],x.length){if(C=x[x.length-1],!t&&(b=gi(C.codecs),k=gi(c.codecs),b!==k))continue;c.width>C.width||c.height>C.height?(x.push(c),E.push(c.id)):c.width==C.width&&c.height==C.height&&(b=gi(C.codecs),k=gi(c.codecs),b!=k||c.bandwidth&&C.bandwidth&&!(c.bandwidth>C.bandwidth)||(x.push(c),E.push(c.id)))}else x.push(c),E.push(c.id);a.set(p,x)}e.variants=e.variants.filter(function(M){var R=M.audio;return M=M.video,!(R&&!d.includes(R.id)||M&&!E.includes(M.id))})}function ob(e,t,n){t=T(t);for(var r=t.next(),a={};!r.done;a={oh:void 0},r=t.next())if(a.oh=r.value,r=e.filter(function(l){return function(c){return c.video&&c.video.codecs.startsWith(l.oh)}}(a)),r.length){e=r;break}for(n=T(n),t=n.next(),r={};!t.done;r={ig:void 0},t=n.next())if(r.ig=t.value,t=e.filter(function(l){return function(c){return c.audio&&c.audio.codecs.startsWith(l.ig)}}(r)),t.length){e=t;break}return e}function rb(e,t,n){e.variants=e.variants.filter(function(r){return Jl(r,t,n)})}function Jl(e,t,n){function r(d,p,x){return d>=p&&d<=x}var a=e.video;if(a&&a.width&&a.height){var l=a.width,c=a.height;if(c>l&&(c=T([c,l]),l=c.next().value,c=c.next().value),!r(l,t.minWidth,Math.min(t.maxWidth,n.width))||!r(c,t.minHeight,Math.min(t.maxHeight,n.height))||!r(a.width*a.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Ug(e,t,n){var r=!1;e=T(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var l=a.allowedByApplication;a.allowedByApplication=Jl(a,t,n),l!=a.allowedByApplication&&(r=!0)}return r}function sb(e,t,n){return n=n===void 0?[]:n,G(function(r){return r.g==1?A(r,Bg(e,t,0<t.offlineSessionIds.length,n),2):(fb(t),A(r,cb(t),0))})}function Bg(e,t,n,r){var a,l;return G(function(c){if(c.g==1)return Oo()&&ab(t.variants),A(c,$g(t.variants,n,!1,r),2);a=null,e&&(l=e.g)&&(a=l.keySystem),t.variants=t.variants.filter(function(d){var p=ub(d,a);if(!p){var x=[];d.audio&&x.push(Wg(d.audio)),d.video&&x.push(Wg(d.video))}return p}),Y(c)})}function ab(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=T(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=T(n),e=n.next();!e.done;e=n.next()){e=e.value,r=T(Object.keys(t));for(var a=r.next();!a.done;a=r.next())if(a=a.value,e.codecs.includes(a)){e.codecs=e.codecs.replace(a,t[a]);break}}}function ub(e,t){var n=Oo(),r=Wt("Firefox")&&Kl(),a=e.video,l=a&&a.width||0,c=a&&a.height||0;if(n&&a&&(1920<l||1080<c)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3.")))return!1;if(a){if(n=su(a.codecs),a.codecs.includes(",")){if(l=a.codecs.split(","),n=Es("video",l),n=su(n),l=Es("audio",l),l=Ms(l,a.mimeType),c=ks(a.mimeType,l,"audio"),!Ne(c))return!1;n=[n,l].join()}if(l=ks(a.mimeType,n,"video"),!Ne(l))return!1;a.codecs=n}if(a=e.audio,r&&a&&a.encrypted&&a.codecs.toLowerCase().includes("opus"))return!1;if(a){if(r=Ms(a.codecs,a.mimeType),n=ks(a.mimeType,r,"audio"),!Ne(n))return!1;a.codecs=r}return e.decodingInfos.some(function(d){return!(!d.supported||t&&(d=d.keySystemAccess)&&d.keySystem!=t)})}function jg(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=T(t);for(var r=t.next();!r.done;r=t.next()){var a=r.value;r=JSON.stringify(a),a=e[a],a instanceof Object?(a=jg(a),n.push(r+":"+a)):(a=JSON.stringify(a),n.push(r+":"+a))}return"{"+n.join(",")+"}"}function Fg(e,t){var n,r,a,l,c,d,p;return G(function(x){if(x.g==1){for(n=function(C,b){if(C){var k=Cd(C);return k.supported=C.supported&&b.supported,k.powerEfficient=C.powerEfficient&&b.powerEfficient,k.smooth=C.smooth&&b.smooth,b.keySystemAccess&&!k.keySystemAccess&&(k.keySystemAccess=b.keySystemAccess),k}return b},r=null,a=[],l=T(t),c=l.next(),d={};!c.done;d={cache:void 0,Dd:void 0},c=l.next())p=c.value,d.Dd=jg(p),d.cache=Xg,d.cache[d.Dd]?r=n(r,d.cache[d.Dd]):a.push(lb(p).then(function(C){return function(b){var k=null;b=T(b||[]);for(var E=b.next();!E.done;E=b.next())k=n(k,E.value);k&&(C.cache[C.Dd]=k,r=n(r,k))}}(d)));return A(x,Promise.all(a),2)}r&&e.decodingInfos.push(r),Y(x)})}function lb(e){var t=[""];e.video&&(t=ji(e.video.contentType).split(","));var n=[""];e.audio&&(n=ji(e.audio.contentType).split(","));var r=[];t=T(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;for(var l=T(n),c=l.next(),d={};!c.done;d={xc:void 0},c=l.next())c=c.value,d.xc=jo(e),e.video&&(d.xc.video.contentType=Dn(ho(d.xc.video.contentType),a)),e.audio&&(d.xc.audio.contentType=Dn(ho(d.xc.audio.contentType),c)),r.push(new Promise(function(p){return function(x,C){navigator.mediaCapabilities.decodingInfo(p.xc).then(function(b){x(b)}).catch(C)}}(d)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function $g(e,t,n,r){var a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V;return G(function(Z){switch(Z.g){case 1:if(e.some(function(te){return te.decodingInfos.length}))return Z.return();a=T(r),l=a.next(),c={};case 2:if(l.done){Z.u(4);break}c.Qg=l.value,d=!1,p=T(e),x=p.next();case 5:if(x.done){Z.u(7);break}C=x.value,b=zg(C,t,n).filter(function(te){return function(re){return re=re[0],(re.keySystemConfiguration&&re.keySystemConfiguration.keySystem)===te.Qg}}(c)),k=T(b),E=k.next();case 8:if(E.done){Z.u(10);break}return M=E.value,A(Z,Fg(C,M),9);case 9:E=k.next(),Z.u(8);break;case 10:C.decodingInfos.length&&(d=!0),x=p.next(),Z.u(5);break;case 7:if(d)return Z.return();c={Qg:void 0},l=a.next(),Z.u(2);break;case 4:R=T(e),_=R.next();case 12:if(_.done){Z.u(0);break}j=_.value,U=zg(j,t,n).filter(function(te){return te=te[0],te=te.keySystemConfiguration&&te.keySystemConfiguration.keySystem,!te||!r.includes(te)}),K=T(U),O=K.next();case 15:if(O.done){_=R.next(),Z.u(12);break}return V=O.value,A(Z,Fg(j,V),16);case 16:O=K.next(),Z.u(15)}})}function zg(e,t,n){var r=e.audio,a=e.video,l=[],c=[];if(a)for(var d=T(a.fullMimeTypes),p=d.next();!p.done;p=d.next()){p=p.value;var x=ji(p);if(x.includes(",")&&!r){var C=x.split(","),b=ho(p);x=Es("video",C),C=Es("audio",C),C=Ms(C,b),b=ks(b,C,"audio"),c.push({contentType:b,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(x=su(x),p={contentType:ks(ho(p),x,"video"),width:a.width||64,height:a.height||64,bitrate:a.bandwidth||e.bandwidth||1,framerate:a.frameRate||1},a.hdr)switch(a.hdr){case"SDR":p.transferFunction="srgb";break;case"PQ":p.transferFunction="pq";break;case"HLG":p.transferFunction="hlg"}a.colorGamut&&(p.colorGamut=a.colorGamut),l.push(p)}if(r)for(d=T(r.fullMimeTypes),p=d.next();!p.done;p=d.next())x=p.value,p=ho(x),x=Ms(ji(x),p),p=ks(p,x,"audio"),c.push({contentType:p,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(d=[],l.length==0&&l.push(null),c.length==0&&c.push(null),l=T(l),p=l.next();!p.done;p=l.next())for(p=p.value,x=T(c),b=x.next();!b.done;b=x.next())b=b.value,C={type:n?"file":"media-source"},p&&(C.video=p),b&&(C.audio=b),d.push(C);if(c=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!c.length)return[d];for(e=[],n=new Map,c=T(c),l=c.next();!l.done;l=c.next())l=l.value,n.get(l.keySystem)||n.set(l.keySystem,[]),n.get(l.keySystem).push(l);for(c=t?"required":"optional",t=t?["persistent-license"]:["temporary"],l=T(n.keys()),p=l.next();!p.done;p=l.next()){for(p=p.value,x=[],b=T(d),C=b.next();!C.done;C=b.next()){C=Object.assign({},C.value);var k=n.get(p),E={keySystem:p,initDataType:"cenc",persistentState:c,distinctiveIdentifier:"optional",sessionTypes:t};k=T(k);for(var M=k.next();!M.done;M=k.next()){if(M=M.value,M.initData&&M.initData.length){for(var R=new Set,_=T(M.initData),j=_.next();!j.done;j=_.next())R.add(j.value.initDataType);E.initDataType=M.initData[0].initDataType}M.distinctiveIdentifierRequired&&(E.distinctiveIdentifier="required"),M.persistentStateRequired&&(E.persistentState="required"),M.sessionType&&(E.sessionTypes=[M.sessionType]),r&&(E.audio?(M.encryptionScheme&&(E.audio.encryptionScheme=E.audio.encryptionScheme||M.encryptionScheme),E.audio.robustness=E.audio.robustness||M.audioRobustness):(E.audio={robustness:M.audioRobustness},M.encryptionScheme&&(E.audio.encryptionScheme=M.encryptionScheme)),E.audio.robustness==""&&delete E.audio.robustness),a&&(E.video?(M.encryptionScheme&&(E.video.encryptionScheme=E.video.encryptionScheme||M.encryptionScheme),E.video.robustness=E.video.robustness||M.videoRobustness):(E.video={robustness:M.videoRobustness},M.encryptionScheme&&(E.video.encryptionScheme=M.encryptionScheme)),E.video.robustness==""&&delete E.video.robustness)}C.keySystemConfiguration=E,x.push(C)}e.push(x)}return e}function Ms(e,t){return e.toLowerCase()=="flac"?Ts()?"fLaC":"flac":e.toLowerCase()==="opus"?Ts()&&Ql(t)=="mp4"?"Opus":"opus":e}function su(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function fb(e){e.textStreams=e.textStreams.filter(function(t){return t=Dn(t.mimeType,t.codecs),ou(t)})}function cb(e){var t,n,r,a,l,c,d;return G(function(p){switch(p.g){case 1:t=[],n=T(e.imageStreams),r=n.next();case 2:if(r.done){p.u(4);break}if(a=r.value,l=a.mimeType,l=="application/mp4"&&a.codecs=="mjpg"&&(l="image/jpg"),nf.has(l)){p.u(5);break}if(c=pb.get(l),!c){nf.set(l,!1),p.u(5);break}return A(p,hb(c),7);case 7:d=p.h,nf.set(l,d);case 5:nf.get(l)&&t.push(a),r=n.next(),p.u(2);break;case 4:e.imageStreams=t,Y(p)}})}function hb(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function _s(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,a=n?n.mimeType:null,l=t?t.codecs:null,c=n?n.codecs:null,d=[];c&&d.push(c),l&&d.push(l);var p=[];n&&p.push(n.mimeType),t&&p.push(t.mimeType),p=p[0]||null;var x=[];t&&x.push(t.kind),n&&x.push(n.kind),x=x[0]||null;var C=new Set;if(t)for(var b=T(t.roles),k=b.next();!k.done;k=b.next())C.add(k.value);if(n)for(b=T(n.roles),k=b.next();!k.done;k=b.next())C.add(k.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:x,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:p,audioMimeType:r,videoMimeType:a,codecs:d.join(", "),audioCodec:l,videoCodec:c,primary:e.primary,roles:Array.from(C),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,c.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function ef(e){return{id:e.id,active:!1,type:_t,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Td(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var a=e.tilesLayout;return r&&(a=r.tilesLayout||a),a&&t!=null&&(t/=Number(a.split("x")[0])),a&&n!=null&&(n/=Number(a.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:a||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function bd(e){return e.__shaka_id||(e.__shaka_id=db++),e.__shaka_id}function Vg(e){var t=Hg(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Ed(e){var t=Hg(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Hg(e){var t=e.language;return{id:bd(e),active:!1,type:"",bandwidth:0,language:$t(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function au(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function tf(e){return e.filter(function(t){return au(t)})}function uu(e,t,n,r){var a=e,l=e.filter(function(p){return p.primary});l.length&&(a=l);var c=a.length?a[0].language:"";if(a=a.filter(function(p){return p.language==c}),t){var d=Zl($t(t),e.map(function(p){return p.language}));d&&(a=e.filter(function(p){return $t(p.language)==d}))}if(a=a.filter(function(p){return p.forced==r}),n){if(e=Gg(a,n),e.length)return e}else if(e=a.filter(function(p){return p.roles.length==0}),e.length)return e;return e=a.map(function(p){return p.roles}).reduce(ib,[]),e.length?Gg(a,e[0]):a}function Gg(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Wg(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}me("shaka.util.StreamUtils",Og),Og.meetsRestrictions=Jl;var Xg={},db=0,nf=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),pb=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function sn(){var e=this;this.A=null,this.j=!1,this.i=new nt,this.F=new Ae,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new nt,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new Et(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}s=sn.prototype,s.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},s.release=function(){this.F.release(),this.C=null},s.init=function(e){this.A=e},s.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:h.devicePixelRatio;e=h.screen.height*n,t=h.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:h.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(x){return x&&!(x.audio&&x.audio.fastSwitching||x.video&&x.video.fastSwitching)}),n.length||(n=this.s);var r=n;if(n.length!=this.s.length&&(r=this.s.filter(function(x){return x&&!!(x.audio&&x.audio.fastSwitching||x.video&&x.video.fastSwitching)})),n=kd(this,this.g.restrictions,r,1/0,1/0),e!=1/0||t!=1/0){n=mb(n),n=T(n);for(var a=n.next();!a.done;a=n.next())if(a=a.value,a.height>=e&&a.width>=t){e=a.height,t=a.width;break}n=kd(this,this.g.restrictions,r,e,t)}for(e=this.getBandwidthEstimate(),r.length&&!n.length&&(n=kd(this,null,r,1/0,1/0),n=[n[0]]),t=n[0]||null,r=0;r<n.length;r++){a=n[r];for(var l=isNaN(this.B)?1:Math.abs(this.B),c=l*a.bandwidth/this.g.bandwidthDowngradeTarget,d={bandwidth:1/0},p=r+1;p<n.length;p++)if(a.bandwidth!=n[p].bandwidth){d=n[p];break}l=l*d.bandwidth/this.g.bandwidthUpgradeTarget,e>=c&&e<=l&&(t.bandwidth!=a.bandwidth||t.bandwidth==a.bandwidth&&t.video&&a.video&&(t.video.width<a.video.width||t.video.height<a.video.height))&&(t=a)}return this.l=Date.now(),t},s.enable=function(){this.j=!0},s.disable=function(){this.j=!1},s.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&qg(this))},s.trySuggestStreams=function(){this.l!=null&&this.j&&qg(this)},s.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e},s.setVariants=function(e){this.s=e},s.playbackRateChanged=function(e){this.B=e},s.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in h&&(this.h=new ResizeObserver(function(){t.C.Y(gb)}),this.h.observe(this.o))},s.setCmsdManager=function(e){this.m=e},s.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function qg(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function kd(e,t,n,r,a){if(e.m){var l=e.m.zg();l&&(n=n.filter(function(c){return c.bandwidth&&l?c.bandwidth<=l:!0}))}return t&&(n=n.filter(function(c){return Jl(c,t,{width:a,height:r})})),n.sort(function(c,d){return c.bandwidth-d.bandwidth})}function mb(e){var t=[];e=T(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,a){return r.width-a.width})}me("shaka.abr.SimpleAbrManager",sn),sn.prototype.configure=sn.prototype.configure,sn.prototype.setCmsdManager=sn.prototype.setCmsdManager,sn.prototype.setMediaElement=sn.prototype.setMediaElement,sn.prototype.playbackRateChanged=sn.prototype.playbackRateChanged,sn.prototype.setVariants=sn.prototype.setVariants,sn.prototype.getBandwidthEstimate=sn.prototype.getBandwidthEstimate,sn.prototype.trySuggestStreams=sn.prototype.trySuggestStreams,sn.prototype.segmentDownloaded=sn.prototype.segmentDownloaded,sn.prototype.disable=sn.prototype.disable,sn.prototype.enable=sn.prototype.enable,sn.prototype.chooseVariant=sn.prototype.chooseVariant,sn.prototype.init=sn.prototype.init,sn.prototype.release=sn.prototype.release,sn.prototype.stop=sn.prototype.stop;var gb=1;me("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),me("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function of(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=T(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}of.prototype.add=function(e,t,n){return Kg(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function Kg(e,t,n,r){var a;if(!(a=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(a=e.audio&&t.audio)){a=e.audio;var l=t.audio;a=!!((!a.channelsCount||!l.channelsCount||2<a.channelsCount||2<l.channelsCount)&&a.channelsCount!=l.channelsCount||a.spatialAudio!==l.spatialAudio||n&&!Yg(a,l)||!Qg(a.roles,l.roles)||r&&a.groupId!==l.groupId)}return!(r=a)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Yg(e,t))&&Qg(e.roles,t.roles))),!r}of.prototype.values=function(){return this.g.values()};function Yg(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return As(r)}),t=t.codecs.split(",").map(function(r){return As(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Qg(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=T(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Zg(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Rs(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Zg.prototype.create=function(e){var t=this,n=this.h=="smooth"&&xt(),r=e.filter(function(a){return Kg(t.i,a,!n,t.g)});return r.length?new of(r[0],r,!n,this.g):this.j.create(e)};function Rs(e,t,n,r,a,l,c,d,p,x,C){this.A=e,this.B=t,this.i=n,this.j=r,this.C=a,this.m=l,this.h=c===void 0?"":c,this.l=d===void 0?"":d,this.o=p===void 0?"reload":p,this.s=x===void 0?!1:x,this.g=C===void 0?"":C}Rs.prototype.create=function(e){var t=[];t=yb(e,this.A);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=vb(t,this.B),e.length&&(t=e),this.m&&(e=Tb(t,this.m),e.length&&(t=e)),this.j&&(e=Cb(t,this.j),e.length&&(t=e)),this.i&&(e=Sb(t,this.i),e.length&&(t=e)),this.h&&(e=xb(t,this.h),e.length&&(t=e)),this.l&&(e=wb(t,this.l),e.length&&(t=e)),e=bb(t,this.C),e.length&&(t=e),this.g&&(e=Eb(t,this.g),e.length&&(t=e)),new of(t[0],t,!(this.o=="smooth"&&xt()),this.s)};function yb(e,t){t=$t(t);var n=Zl(t,e.map(function(r){return Sd(r)}));return n?e.filter(function(r){return n==Sd(r)}):[]}function vb(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function xb(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function wb(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Sb(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function Cb(e,t){return t=="AUTO"&&(t=h.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function Tb(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function bb(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Eb(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function kb(){this.g=lu,this.i=new Map().set(lu,2).set(Ls,1),this.h=0}function Jg(e,t,n){e.i.set(lu,n).set(Ls,t)}var Ls=0,lu=1;function ey(e,t){var n=Io();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function ty(e){var t,n;return G(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new ne(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),A(r,new Promise(function(a){new Et(a).Y(n/1e3)}),2))}e.h*=e.m,Y(r)})}function Io(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Xt(){var e,t,n=new Promise(function(r,a){e=r,t=a});return n.resolve=e,n.reject=t,n}Xt.prototype.resolve=function(){},Xt.prototype.reject=function(){};function bn(e,t){this.promise=e,this.i=t,this.g=!1}function Qr(e){return new bn(Promise.reject(e),function(){return Promise.resolve()})}function Ad(){var e=Promise.reject(new ne(2,7,7001));return e.catch(function(){}),new bn(e,function(){return Promise.resolve()})}function Ds(e){return new bn(Promise.resolve(e),function(){return Promise.resolve()})}function ny(e){return new bn(e,function(){return e.catch(function(){})})}bn.prototype.abort=function(){return this.g=!0,this.i()};function iy(e){return new bn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}bn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},bn.prototype.Aa=function(e,t){function n(d){return function(p){if(a.g&&d)l.reject(c);else{var x=d?e:t;x?r=Ab(x,p,l):(d?l.resolve:l.reject)(p)}}}function r(){return l.reject(c),a.abort()}var a=this,l=new Xt,c=new ne(2,7,7001);return this.promise.then(n(!0),n(!1)),new bn(l,function(){return r()})};function Ab(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(a){return n.reject(a),function(){return Promise.resolve()}}}me("shaka.util.AbortableOperation",bn),bn.prototype.chain=bn.prototype.Aa,bn.prototype.finally=bn.prototype.finally,bn.all=iy,bn.prototype.abort=bn.prototype.abort,bn.notAbortable=ny,bn.completed=Ds,bn.aborted=Ad,bn.failed=Qr;function Fe(e,t){if(t)if(t instanceof Map)for(var n=T(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=h.performance&&h.performance.now?h.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function oy(e){var t=new Fe(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Fe.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Fe.prototype.stopImmediatePropagation=function(){this.g=!0},Fe.prototype.stopPropagation=function(){},me("shaka.util.FakeEvent",Fe);var rf={ij:"abrstatuschanged",jj:"adaptation",kj:"audiotrackchanged",lj:"buffering",mj:"complete",nj:"downloadfailed",oj:"downloadheadersreceived",pj:"drmsessionupdate",rj:"emsg",Ij:"prft",Error:"error",sj:"expirationupdated",tj:"firstquartile",uj:"gapjumped",xj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Metadata:"metadata",Fj:"midpoint",Gj:"nospatialvideoinfo",Hj:"onstatechange",Jj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"spatialvideoinfo",Oj:"stalldetected",Pj:"started",Qj:"statechanged",Rj:"streaming",Sj:"textchanged",Tj:"texttrackvisibility",Uj:"thirdquartile",Vj:"timelineregionadded",Wj:"timelineregionenter",Xj:"timelineregionexit",Yj:"trackschanged",$j:"unloading",bk:"variantchanged"};function Bt(){this.ya=new vt,this.me=this}Bt.prototype.addEventListener=function(e,t){this.ya&&this.ya.push(e,t)},Bt.prototype.removeEventListener=function(e,t){this.ya&&this.ya.remove(e,t)},Bt.prototype.dispatchEvent=function(e){if(!this.ya)return!0;var t=this.ya.get(e.type)||[],n=this.ya.get("All");for(n&&(t=t.concat(n)),t=T(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.me,e.currentTarget=this.me;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Bt.prototype.release=function(){this.ya=null};function Ps(){this.g=[]}function Zr(e,t){e.g.push(t.finally(function(){Ht(e.g,t)}))}Ps.prototype.destroy=function(){for(var e=[],t=T(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Zt(e,t,n,r,a,l){Bt.call(this),this.i=!1,this.m=new Ps,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=r||null,this.F=a||null,this.C=l||null,this.o=this.s=!1}$(Zt,Bt),s=Zt.prototype,s.Pf=function(e){this.s=e},s.Qf=function(e){this.o=e};function Yo(e,t,n,r){n=n||ly;var a=af[e];(!a||n>=a.priority)&&(af[e]={priority:n,ie:t,Di:r===void 0?!1:r})}function ry(e,t){for(var n=T(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=T(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}s.Gi=function(e){this.g.add(e)},s.bj=function(e){this.g.delete(e)},s.mg=function(){this.g.clear()},s.Hi=function(e){this.h.add(e)},s.cj=function(e){this.h.delete(e)},s.ng=function(){this.h.clear()};function Hn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}s.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Bt.prototype.release.call(this),this.m.destroy()},s.request=function(e,t,n){var r=this,a=new uy;if(this.i){var l=Promise.reject(new ne(2,7,7001));return l.catch(function(){}),new sf(l,function(){return Promise.resolve()},a)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?jo(t.retryParameters):Io(),t.uris=jo(t.uris),l=Ib(this,e,t,n);var c=l.Aa(function(){return sy(r,e,t,n,new ey(t.retryParameters,!1),0,null,a)}),d=c.Aa(function(k){return Mb(r,e,k,n)}),p=Date.now(),x=0;l.promise.then(function(){x=Date.now()-p},function(){});var C=0;c.promise.then(function(){C=Date.now()},function(){});var b=d.Aa(function(k){var E=Date.now()-C,M=k.response;return M.timeMs+=x,M.timeMs+=E,k.ii||!r.l||M.fromCache||t.method=="HEAD"||e!=Mo||r.l(M.timeMs,M.data.byteLength,ay(n)),r.C&&r.C(e,M,n),M},function(k){throw k&&(k.severity=2),k});return l=new sf(b.promise,function(){return b.abort()},a),Zr(this.m,l),l};function Ib(e,t,n,r){function a(d){l=l.Aa(function(){return n.body&&(n.body=yn(n.body)),d(t,n,r)})}var l=Ds(void 0);e.B&&a(e.B),e=T(e.g);for(var c=e.next();!c.done;c=e.next())a(c.value);return l.Aa(void 0,function(d){throw d instanceof ne&&d.code==7001?d:new ne(2,1,1006,d)})}function sy(e,t,n,r,a,l,c,d){e.s&&(n.uris[l]=n.uris[l].replace("https://","http://")),e.o&&(n.uris[l]=n.uris[l].replace("http://","https://")),0<l&&e.F&&e.F(t,r,n.uris[l],n.uris[l-1]);var p=new Tn(n.uris[l]),x=p.Bb,C=!1;x||(x=location.protocol,x=x.slice(0,-1),Fl(p,x),n.uris[l]=p.toString()),x=x.toLowerCase();var b=(x=af[x])?x.ie:null;if(!b)return Qr(new ne(2,1,1e3,p));var k=x.Di,E=null,M=null,R=!1,_=!1,j;return ny(ty(a)).Aa(function(){if(e.i)return Ad();j=Date.now();var U=0;n.requestStartTime=Date.now();var K=b(n.uris[l],n,t,function(Z,te,re){E&&E.stop(),M&&M.Y(V/1e3),e.l&&t==Mo&&(U++,n.packetNumber=U,e.l(Z,te,ay(r),n),C=!0,d.g=re)},function(Z){e.j&&e.j(Z,n,t),_=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!k)return K;var O=n.retryParameters.connectionTimeout;O&&(E=new Et(function(){R=!0,K.abort()}),E.Y(O/1e3));var V=n.retryParameters.stallTimeout;return V&&(M=new Et(function(){R=!0,K.abort()})),K}).Aa(function(U){E&&E.stop(),M&&M.stop(),U.timeMs==null&&(U.timeMs=Date.now()-j);var K={response:U,ii:C};return!_&&e.j&&e.j(U.headers,n,t),K},function(U){if(E&&E.stop(),M&&M.stop(),e.A){var K=null,O=0;U instanceof ne&&(K=U,U.code==1001&&(O=U.data[1])),e.A(n,K,O,R)}if(e.i)return Ad();if(R&&(U=new ne(1,1,1003,n.uris[l],t)),U instanceof ne){if(U.code==7001)throw U;if(U.code==1010)throw c;if(U.severity==1)return K=new Map().set("error",U),K=new Fe("retry",K),e.dispatchEvent(K),l=(l+1)%n.uris.length,sy(e,t,n,r,a,l,U,d)}throw U})}function Mb(e,t,n,r){var a=Ds(void 0);e=T(e.h);for(var l=e.next(),c={};!l.done;c={Vg:void 0},l=e.next())c.Vg=l.value,a=a.Aa(function(d){return function(){var p=n.response;return p.data&&(p.data=yn(p.data)),(0,d.Vg)(t,p,r)}}(c));return a.Aa(function(){return n},function(d){var p=2;if(d instanceof ne){if(d.code==7001)throw d;p=d.severity}throw new ne(p,1,1007,d)})}function ay(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}me("shaka.net.NetworkingEngine",Zt),Zt.prototype.request=Zt.prototype.request,Zt.prototype.destroy=Zt.prototype.destroy,Zt.makeRequest=Hn,Zt.defaultRetryParameters=function(){return Io()},Zt.prototype.clearAllResponseFilters=Zt.prototype.ng,Zt.prototype.unregisterResponseFilter=Zt.prototype.cj,Zt.prototype.registerResponseFilter=Zt.prototype.Hi,Zt.prototype.clearAllRequestFilters=Zt.prototype.mg,Zt.prototype.unregisterRequestFilter=Zt.prototype.bj,Zt.prototype.registerRequestFilter=Zt.prototype.Gi,Zt.unregisterScheme=function(e){delete af[e]},Zt.registerScheme=Yo,Zt.prototype.setForceHTTPS=Zt.prototype.Qf,Zt.prototype.setForceHTTP=Zt.prototype.Pf;function uy(){this.g=0}Zt.NumBytesRemainingClass=uy;function sf(e,t,n){bn.call(this,e,t),this.h=n}$(sf,bn),Zt.PendingRequest=sf;var Mo=1;Zt.RequestType={MANIFEST:0,SEGMENT:Mo,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Zt.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var ly=3;Zt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:ly};var af={};function Os(e){this.g=!1,this.h=new Xt,this.i=e}Os.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function qt(e,t){if(e.g)throw t instanceof ne&&t.code==7003?t:new ne(2,7,7003,t)}function Id(e,t){var n=[];e=T(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function _b(e,t){e=T(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function fu(e){for(var t=new Map,n=T(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Md(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function Kt(e,t){this.h=Qt(e),this.i=t==fy,this.g=0}s=Kt.prototype,s.na=function(){return this.g<this.h.byteLength},s.va=function(){return this.g},s.getLength=function(){return this.h.byteLength},s.T=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Qo()}},s.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Qo()}},s.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Qo()}},s.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Qo()}},s.Nc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Qo()}if(2097151<t)throw new ne(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},s.qb=function(e){if(this.g+e>this.h.byteLength)throw Qo();var t=Me(this.h,this.g,e);return this.g+=e,t},s.skip=function(e){if(this.g+e>this.h.byteLength)throw Qo();this.g+=e},s.Oi=function(e){if(this.g<e)throw Qo();this.g-=e},s.seek=function(e){if(0>e||e>this.h.byteLength)throw Qo();this.g=e},s.oc=function(){for(var e=this.g;this.na()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Me(this.h,e,this.g-e),this.g+=1,nn(e)};function Qo(){return new ne(2,3,3e3)}me("shaka.util.DataViewReader",Kt),Kt.prototype.readTerminatedString=Kt.prototype.oc,Kt.prototype.seek=Kt.prototype.seek,Kt.prototype.rewind=Kt.prototype.Oi,Kt.prototype.skip=Kt.prototype.skip,Kt.prototype.readBytes=Kt.prototype.qb,Kt.prototype.readUint64=Kt.prototype.Nc,Kt.prototype.readInt32=Kt.prototype.Sg,Kt.prototype.readUint32=Kt.prototype.P,Kt.prototype.readUint16=Kt.prototype.la,Kt.prototype.readUint8=Kt.prototype.T,Kt.prototype.getLength=Kt.prototype.getLength,Kt.prototype.getPosition=Kt.prototype.va,Kt.prototype.hasMoreData=Kt.prototype.na;var fy=1;Kt.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:fy};function Yt(){this.i=[],this.h=[],this.g=!1}s=Yt.prototype,s.box=function(e,t){return e=cy(e),this.i[e]=Rb,this.h[e]=t,this},s.S=function(e,t){return e=cy(e),this.i[e]=hy,this.h[e]=t,this},s.stop=function(){this.g=!0},s.parse=function(e,t,n){for(e=new Kt(e,0),this.g=!1;e.na()&&!this.g;)this.Kc(0,e,t,n)},s.Kc=function(e,t,n,r){var a=t.va();if(r&&a+8>t.getLength())this.g=!0;else{var l=t.P(),c=t.P(),d=uf(c),p=!1;switch(l){case 0:l=t.getLength()-a;break;case 1:if(r&&t.va()+8>t.getLength()){this.g=!0;return}l=t.Nc(),p=!0}var x=this.h[c];if(x){var C=null,b=null;if(this.i[c]==hy){if(r&&t.va()+4>t.getLength()){this.g=!0;return}b=t.P(),C=b>>>24,b&=16777215}c=a+l,n&&c>t.getLength()&&(c=t.getLength()),r&&c>t.getLength()?this.g=!0:(r=c-t.va(),t=0<r?t.qb(r):new Uint8Array(0),t=new Kt(t,0),x({name:d,parser:this,partialOkay:n||!1,version:C,flags:b,reader:t,size:l,start:a+e,has64BitSize:p}))}else t.skip(Math.min(a+l-t.va(),t.getLength()-t.va()))}};function At(e){for(var t=Us(e);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Sr(e){for(var t=Us(e),n=e.reader.P(),r=0;r<n&&(e.parser.Kc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function bi(e){var t=Us(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function _d(e){var t=Us(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Ns(e){return function(t){e(t.reader.qb(t.reader.getLength()-t.reader.va()))}}function cy(e){var t=0;e=T(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function uf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Us(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}me("shaka.util.Mp4Parser",Yt),Yt.headerSize=Us,Yt.typeToString=uf,Yt.allData=Ns,Yt.audioSampleEntry=_d,Yt.visualSampleEntry=bi,Yt.sampleDescription=Sr,Yt.children=At,Yt.prototype.parseNext=Yt.prototype.Kc,Yt.prototype.parse=Yt.prototype.parse,Yt.prototype.stop=Yt.prototype.stop,Yt.prototype.fullBox=Yt.prototype.S,Yt.prototype.box=Yt.prototype.box;var Rb=0,hy=1;function dy(e){var t=this;this.g=[],this.h=[],this.data=[],new Yt().box("moov",At).box("moof",At).S("pssh",function(n){if(!(1<n.version)){var r=Me(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(qo(n.reader.qb(16))),0<n.version){r=n.reader.P();for(var a=0;a<r;a++){var l=qo(n.reader.qb(16));t.h.push(l)}}}}).parse(e)}function lf(e,t,n,r){var a=e.length,l=t.length+16+a;0<r&&(l+=4+16*n.size);var c=new Uint8Array(l),d=Qt(c),p=0;if(d.setUint32(p,l),p+=4,d.setUint32(p,1886614376),p+=4,1>r?d.setUint32(p,0):d.setUint32(p,16777216),p+=4,c.set(t,p),p+=t.length,0<r)for(d.setUint32(p,n.size),p+=4,t=T(n),n=t.next();!n.done;n=t.next())n=Wr(n.value),c.set(n,p),p+=n.length;return d.setUint32(p,a),c.set(e,p+4),c}function Rd(e,t){return e=Xo(e),Bs(e,t)}function Bs(e,t){return e=Lb(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Ld(e){return Pd.has(e)?Pd.get(e):""}function Lb(e){function t(a,l){l=l===void 0?!1:l;for(var c=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){l=r+2,r=e.indexOf(">",r),l=e.substring(l,r);var d=l.indexOf(a);if(d==-1){var p=a.indexOf(".");0<p&&(d=l.indexOf(a.substring(0,p)))}if(d==-1)throw a=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(a.length-1)+`
Column: `+(a[a.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){d=e.indexOf("]]>",r),d==-1?(c.push(e.substr(r+9)),r=e.length):(c.push(e.substring(r+9,d)),r=d+3);continue}r++;continue}e:{p=l,r++;var x=n(),C={};for(d=[];e.charCodeAt(r)!==62&&e[r];){var b=e.charCodeAt(r);if(64<b&&91>b||96<b&&123>b){b=n();for(var k=e.charCodeAt(r);k&&k!==39&&k!==34&&!(64<k&&91>k||96<k&&123>k)&&k!==62;)r++,k=e.charCodeAt(r);var E=r+1;if(r=e.indexOf(e[r],E),E=e.slice(E,r),k===39||k===34){if(r===-1){for(p={tagName:x,attributes:C,children:d,parent:null},x=0;x<d.length;x++)typeof d[x]!="string"&&(d[x].parent=p);d=p;break e}}else E=null,r--;b.startsWith("xmlns:")&&Pd.set(E,b.split(":")[1]),x==="tt"&&b==="xml:space"&&E==="preserve"&&(p=!0),C[b]=E}r++}for(e.charCodeAt(r-1)!==47?(r++,d=t(x,p)):r++,p={tagName:x,attributes:C,children:d,parent:null},x=d.length,C=0;C<x;C++)b=d[C],typeof b!="string"?b.parent=p:C==x-1&&b==`
`&&d.pop();d=p}if(c.push(d),typeof d=="string")break;d.tagName[0]==="?"&&d.children&&(c.push.apply(c,L(d.children)),d.children=[])}else d=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),d=e.slice(d,r+1),l?0<d.length&&c.push(d):(c.length&&d.length==1&&d[0]==`
`||0<d.trim().length)&&c.push(d),r++;return c}function n(){for(var a=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return e.slice(a,r)}var r=0;return t("")}function ff(e){return typeof e=="string"}function py(e){var t=[];if(!e.children)return[];e=T(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Jt(e,t){var n=[];if(!e.children)return[];e=T(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function On(e){return typeof e=="string"?mi(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:mi(e))}function mo(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=On(e))&&(e=e.trim()),e):null}function go(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=T(e.children);for(var r=e.next();!r.done;r=e.next())go(r.value,t,n)}return n}function yo(e,t){return e=Jt(e,t),e.length!=1?null:e[0]}function Zo(e,t,n){return e=my(e,t,n),e.length!=1?null:e[0]}function Rt(e,t,n,r){r=r===void 0?null:r;var a=null;return e=e.attributes[t],e!=null&&(a=n(e)),a??r}function Jo(e,t,n){return t=Ld(t),e.attributes[t+":"+n]||null}function my(e,t,n){t=Ld(t);var r=[];if(e.children){e=T(e.children);for(var a=e.next();!a.done;a=e.next())(a=a.value)&&a.tagName===t+":"+n&&r.push(a)}return r}function Fo(e,t,n){t=T(t);for(var r=t.next();!r.done;r=t.next())if(r=Jo(e,r.value,n))return r;return null}function Cr(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function $o(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function cf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function hf(e){return e=Number(e),e%1===0?e:null}function er(e){return e=Number(e),e%1===0&&0<e?e:null}function ai(e){return e=Number(e),e%1===0&&0<=e?e:null}function df(e){return e=Number(e),isNaN(e)?null:e}function Dd(e){return e?e.toLowerCase()==="true":!1}function Db(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function pf(e){var t=[];e=mi(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=T(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var a=n.match(/(@id='(.*?)')/),l=n.match(/(@t='(\d+)')/),c=n.match(/(@n='(\d+)')/),d=n.match(/\[(\d+)\]/);t.push({name:r[0],id:a?a[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:l?Number(l[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:c?Number(c[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:d?Number(d[1])-1:null,Sb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Sb=n.slice(1))}return t}function gy(e,t){var n=pf(t.attributes.sel||"");if(n.length){var r=n[n.length-1],a=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=yy(e,"t",r.t)),r.n!==null&&(n=yy(e,"n",r.n))),n===null?n=a==="prepend"?0:e.length:a==="prepend"?--n:a==="after"&&++n,a=t.tagName,(r=r.Sb)&&e[n]?vy(e[n],a,r,mo(t)||""):(a!=="remove"&&a!=="replace"||e.splice(n,1),a!=="add"&&a!=="replace"||e.splice.apply(e,[n,0].concat(L(t.children))))}}function yy(e,t,n){var r=0;e=T(e);for(var a=e.next();!a.done;a=e.next()){if(Number(a.value.attributes[t])===n)return r;r++}return null}function vy(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function xy(e){var t=document.createElementNS("",e.tagName),n;for(n in e.attributes)t.setAttribute(n,e.attributes[n]);for(e=T(e.children),n=e.next();!n.done;n=e.next()){n=n.value;var r=void 0;typeof n=="string"?r=new Text(n):r=xy(n),t.appendChild(r)}return t}var Pd=new Map([]);function mf(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.fa=this.da=!1,this.I=0,this.g=null,this.B=new Ae,this.i=new Map,this.A=new Map,this.l=new Xt,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.Z=new Map,this.ea=new Map,this.L=new Et(function(){return Hb(t)}),this.R=!1,this.N=[],this.U=!1,this.K=new Et(function(){Xb(t)}),this.l.catch(function(){}),this.j=new Os(function(){return Pb(t)}),this.ba=!1,this.F=this.G=null}s=mf.prototype,s.destroy=function(){return this.j.destroy()};function Pb(e){return G(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,A(t,My(e),2);case 2:if(!e.m){t.u(3);break}return Q(t,4),A(t,e.m.setMediaKeys(null),6);case 6:q(t,5);break;case 4:W(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,Y(t)}})}s.configure=function(e){this.h=e,this.K&&this.K.Sa(this.h.updateExpirationTime)};function Ob(e,t,n){return e.fa=!0,e.A=new Map,e.R=n,Sy(e,t)}function wy(e,t,n){e.A=new Map,n=T(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=T(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.R=0<e.A.size,Sy(e,t)}function Nb(e,t,n,r,a,l){var c=new Map;return a={audioCapabilities:a,videoCapabilities:l,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},a.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],c.set(t,a),Ey(e,c,[])}function Sy(e,t){var n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O;return G(function(V){if(V.g==1){if(n=zb(e))for(r=T(t),a=r.next();!a.done;a=r.next())l=a.value,l.video&&(l.video.drmInfos=[n]),l.audio&&(l.audio.drmInfos=[n]);for(c=t.some(function(Z){return!!(Z.video&&Z.video.drmInfos.length||Z.audio&&Z.audio.drmInfos.length)}),c||(d=fu(e.h.servers),Kb(t,d)),p=new Set,x=T(t),C=x.next();!C.done;C=x.next())for(b=C.value,k=_y(b),E=T(k),M=E.next();!M.done;M=E.next())R=M.value,p.add(R);for(_=T(p),j=_.next();!j.done;j=_.next())U=j.value,Yb(U,fu(e.h.servers),fu(e.h.advanced||{}),e.h.keySystemsMapping);return A(V,$g(t,e.R,e.ba,e.h.preferredKeySystems),2)}return qt(e.j),K=c||Object.keys(e.h.servers).length,K?(O=Ey(e,void 0,t),V.return(c?O:O.catch(function(){}))):(e.da=!0,V.return(Promise.resolve()))})}function Cy(e){var t;return G(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return A(n,e.G,3);case 3:return qt(e.j),n.return();case 2:return Q(n,4),e.G=e.m.setMediaKeys(e.s),A(n,e.G,6);case 6:q(n,5);break;case 4:t=W(n),e.o(new ne(2,6,6003,t.message));case 5:qt(e.j),Y(n)}})}function Ub(e,t){return G(function(n){if(n.g==1)return A(n,Cy(e),2);cu(e,t.initDataType,Me(t.initData)),Y(n)})}s.Rb=function(e){var t=this;return G(function(n){if(n.g==1)return t.s?(t.m=e,t.B.ha(t.m,"play",function(){for(var r=T(t.N),a=r.next();!a.done;a=r.next())Nd(t,a.value);t.U=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return My(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?A(n,Cy(t),2):n.u(2)):(t.B.ha(e,"encrypted",function(){t.o(new ne(2,6,6010))}),n.return());Ty(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return Ub(t,r)}),Y(n)})};function Bb(e){var t,n,r,a,l;return G(function(c){switch(c.g){case 1:if(!e.s||!e.g)return c.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){c.u(2);break}return t=Hn([e.g.serverCertificateUri],e.h.retryParameters),Q(c,3),n=e.C.Lb.request(5,t),A(c,n.promise,5);case 5:r=c.h,e.g.serverCertificate=Me(r.data),q(c,4);break;case 3:throw a=W(c),new ne(2,6,6017,a);case 4:if(e.j.g)return c.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?c.return():(Q(c,6),A(c,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:q(c,0);break;case 6:throw l=W(c),new ne(2,6,6004,l.message)}})}function jb(e,t){var n,r,a;return G(function(l){if(l.g==1)return A(l,Ay(e,t,{initData:null,initDataType:null}),2);if(l.g!=3)return n=l.h,n?(r=[],(a=e.i.get(n))&&(a.kb=new Xt,r.push(a.kb)),r.push(n.remove()),A(l,Promise.all(r),3)):l.return();e.i.delete(n),Y(l)})}function Ty(e){var t,n,r,a,l;return G(function(c){if(c.g==1)return e.A.size?(e.A.forEach(function(d,p){Ay(e,p,d)}),A(c,e.l,3)):c.u(2);if(c.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&qb(e))return c.return(e.l);e.l=new Xt,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=T(n),a=r.next();!a.done;a=r.next())l=a.value,cu(e,l.initDataType,l.initData);return hu(e)&&e.l.resolve(),c.return(e.l)})}function cu(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var r=e.i.values();r=T(r);for(var a=r.next();!a.done;a=r.next())if(In(n,a.value.initData))return}0<e.i.size&&hu(e)&&(e.l.resolve(),e.l=new Xt,e.l.catch(function(){})),Vb(e,t,n,e.g.sessionType)}}function by(e){return e=e.i.keys(),e=Id(e,function(t){return t.sessionId}),Array.from(e)}s.ff=function(){var e=this,t=this.i.keys();return t=Id(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},s.ad=function(){var e=1/0,t=this.i.keys();t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},s.Ld=function(){return Md(this.ea)};function Ey(e,t,n){var r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U;return G(function(K){switch(K.g){case 1:if(r=new Map,n.length){a=Fb(e,n,r),K.u(2);break}return A(K,$b(e,t),3);case 3:a=K.h;case 2:if(l=a,!l)throw new ne(2,6,6001);for(qt(e.j),Q(K,4),e.H.clear(),c=l.getConfiguration(),d=c.audioCapabilities||[],p=c.videoCapabilities||[],x=T(d),C=x.next();!C.done;C=x.next())b=C.value,e.H.add(b.contentType.toLowerCase());for(k=T(p),E=k.next();!E.done;E=k.next())M=E.value,e.H.add(M.contentType.toLowerCase());if(n.length){var O=l.keySystem,V=r.get(l.keySystem),Z=[],te=[],re=[],de=[],se=[],ae=new Set,he=new Set;Ry(V,Z,te,de,re,se,ae,he);var Se=e.R?"persistent-license":"temporary";for(O={keySystem:O,encryptionScheme:Z[0],licenseServerUri:te[0],distinctiveIdentifierRequired:V[0].distinctiveIdentifierRequired,persistentStateRequired:V[0].persistentStateRequired,sessionType:V[0].sessionType||Se,audioRobustness:V[0].audioRobustness||"",videoRobustness:V[0].videoRobustness||"",serverCertificate:de[0],serverCertificateUri:re[0],initData:se,keyIds:ae},0<he.size&&(O.keySystemUris=he),V=T(V),he=V.next();!he.done;he=V.next())he=he.value,he.distinctiveIdentifierRequired&&(O.distinctiveIdentifierRequired=he.distinctiveIdentifierRequired),he.persistentStateRequired&&(O.persistentStateRequired=he.persistentStateRequired);V=O}else V=l.keySystem,he=t.get(l.keySystem),O=[],Z=[],te=[],re=[],de=[],se=new Set,Ry(he.drmInfos,O,Z,re,te,de,se),V={keySystem:V,encryptionScheme:O[0],licenseServerUri:Z[0],distinctiveIdentifierRequired:he.distinctiveIdentifier=="required",persistentStateRequired:he.persistentState=="required",sessionType:he.sessionTypes[0]||"temporary",audioRobustness:(he.audioCapabilities?he.audioCapabilities[0].robustness:"")||"",videoRobustness:(he.videoCapabilities?he.videoCapabilities[0].robustness:"")||"",serverCertificate:re[0],serverCertificateUri:te[0],initData:de,keyIds:se};if(e.g=V,!e.g.licenseServerUri)throw new ne(2,6,6012,e.g.keySystem);return A(K,l.createMediaKeys(),6);case 6:if(R=K.h,qt(e.j),e.s=R,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){K.u(7);break}return Q(K,8),A(K,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(_=K.h,_!="usable")throw new ne(2,6,6018);qt(e.j),q(K,7,4);break;case 8:throw j=W(K,4),j instanceof ne?j:new ne(2,6,6019,j.message);case 7:return e.da=!0,A(K,Bb(e),11);case 11:qt(e.j),q(K,0);break;case 4:throw U=W(K),qt(e.j,U),e.g=null,e.H.clear(),U instanceof ne?U:new ne(2,6,6002,U.message)}})}function Fb(e,t,n){for(var r=T(t),a=r.next();!a.done;a=r.next()){a=T(_y(a.value));for(var l=a.next();!l.done;l=a.next())l=l.value,n.has(l.keySystem)||n.set(l.keySystem,[]),n.get(l.keySystem).push(l)}if(n.size==1&&n.has(""))throw new ne(2,6,6e3);for(e=T(e.h.preferredKeySystems),a=e.next(),r={};!a.done;r={Rg:void 0},a=e.next())for(r.Rg=a.value,a=T(t),l=a.next();!l.done;l=a.next())if(l=l.value.decodingInfos.find(function(x){return function(C){return C.supported&&C.keySystemAccess!=null&&C.keySystemAccess.keySystem==x.Rg}}(r)))return l.keySystemAccess;for(e=T([!0,!1]),r=e.next();!r.done;r=e.next())for(r=r.value,a=T(t),l=a.next();!l.done;l=a.next()){l=T(l.value.decodingInfos);for(var c=l.next();!c.done;c=l.next())if(c=c.value,c.supported&&c.keySystemAccess){var d=n.get(c.keySystemAccess.keySystem);d=T(d);for(var p=d.next();!p.done;p=d.next())if(!!p.value.licenseServerUri==r)return c.keySystemAccess}}return null}function $b(e,t){var n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j;return G(function(U){switch(U.g){case 1:if(t.size==1&&t.has(""))throw new ne(2,6,6e3);for(r=T(t.values()),a=r.next();!a.done;a=r.next())l=a.value,l.audioCapabilities.length==0&&delete l.audioCapabilities,l.videoCapabilities.length==0&&delete l.videoCapabilities;c=T(e.h.preferredKeySystems),d=c.next();case 2:if(d.done){U.u(4);break}if(p=d.value,!t.has(p)){U.u(3);break}return x=t.get(p),Q(U,6),A(U,navigator.requestMediaKeySystemAccess(p,[x]),8);case 8:return n=U.h,U.return(n);case 6:W(U);case 7:qt(e.j);case 3:d=c.next(),U.u(2);break;case 4:C=T([!0,!1]),b=C.next();case 9:if(b.done){U.u(11);break}k=b.value,E=T(t.keys()),M=E.next();case 12:if(M.done){b=C.next(),U.u(9);break}if(R=M.value,_=t.get(R),j=_.drmInfos.some(function(K){return!!K.licenseServerUri}),j!=k){U.u(13);break}return Q(U,15),A(U,navigator.requestMediaKeySystemAccess(R,[_]),17);case 17:return n=U.h,U.return(n);case 15:W(U);case 16:qt(e.j);case 13:M=E.next(),U.u(12);break;case 11:return U.return(n)}})}function zb(e){return e=fu(e.h.clearKeys),e.size==0?null:Ag(e)}function Od(e){hu(e)&&e.l.resolve()}function ky(e,t){new Et(function(){t.loaded=!0,Od(e)}).Y(Zb)}function Ay(e,t,n){var r,a,l,c,d,p,x;return G(function(C){switch(C.g){case 1:try{r=e.s.createSession("persistent-license")}catch(b){return a=new ne(2,6,6005,b.message),e.o(a),C.return(Promise.reject(a))}return e.B.D(r,"message",function(b){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(b):Nd(e,b)}),e.B.D(r,"keystatuseschange",function(b){return Iy(e,b)}),l={initData:n.initData,initDataType:n.initDataType,loaded:!1,zf:1/0,kb:null,type:"persistent-license"},e.i.set(r,l),Q(C,2),A(C,r.load(t),4);case 4:return c=C.h,qt(e.j),c||(e.i.delete(r),d=e.h.persistentSessionOnlinePlayback?1:2,e.o(new ne(d,6,6013)),l.loaded=!0),ky(e,l),Od(e),C.return(r);case 2:p=W(C),qt(e.j,p),e.i.delete(r),x=e.h.persistentSessionOnlinePlayback?1:2,e.o(new ne(x,6,6005,p.message)),l.loaded=!0,Od(e);case 3:return C.return(Promise.resolve())}})}function Vb(e,t,n,r){try{var a=e.s.createSession(r)}catch(l){e.o(new ne(2,6,6005,l.message));return}e.B.D(a,"message",function(l){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(l):Nd(e,l)}),e.B.D(a,"keystatuseschange",function(l){return Iy(e,l)}),e.i.set(a,{initData:n,initDataType:t,loaded:!1,zf:1/0,kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(l){t=l,l instanceof ne||(t=new ne(2,6,6016,l)),e.o(t);return}e.h.logLicenseExchange&&Gr(n),a.generateRequest(t,n).catch(function(l){if(!e.j.g){e.i.delete(a);var c=l.errorCode;if(c&&c.systemCode){var d=c.systemCode;0>d&&(d+=Math.pow(2,32)),d="0x"+d.toString(16)}e.o(new ne(2,6,6006,l.message,l,d))}})}function Nd(e,t){var n,r,a,l,c,d,p,x,C,b,k,E,M,R;G(function(_){switch(_.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Gr(t.message),r=e.i.get(n),a=e.g.licenseServerUri,l=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&l&&l.individualizationServer&&(a=l.individualizationServer),c=Hn([a],e.h.retryParameters),c.body=t.message,c.method="POST",c.licenseRequestType=t.messageType,c.sessionId=n.sessionId,c.drmInfo=e.g,r&&(c.initData=r.initData,c.initDataType=r.initDataType),l&&l.headers)for(d in l.headers)c.headers[d]=l.headers[d];if(fd(e.g.keySystem)){var j=Wo(c.body,!0,!0);if(j.includes("PlayReadyKeyMessage")){j=Bs(j,"PlayReadyKeyMessage");var U=go(j,"HttpHeader");U=T(U);for(var K=U.next();!K.done;K=U.next()){var O=K.value;K=go(O,"name")[0],O=go(O,"value")[0],c.headers[On(K)]=On(O)}j=go(j,"Challenge")[0],c.body=Yi(On(j))}else c.headers["Content-Type"]="text/xml; charset=utf-8"}return p=Date.now(),Q(_,2),C=e.C.Lb.request(2,c),A(_,C.promise,4);case 4:x=_.h,q(_,3);break;case 2:return b=W(_),e.j.g||(k=new ne(2,6,6007,b),e.i.size==1?(e.o(k),r&&r.kb&&r.kb.reject(k)):(r&&r.kb&&r.kb.reject(k),e.i.delete(n),hu(e)&&(e.l.resolve(),e.L.Y(.1)))),_.return();case 3:return e.j.g?_.return():(e.I+=(Date.now()-p)/1e3,e.h.logLicenseExchange&&Gr(x.data),Q(_,5),A(_,n.update(x.data),7));case 7:q(_,6);break;case 5:return E=W(_),M=new ne(2,6,6008,E.message),e.o(M),r&&r.kb&&r.kb.reject(M),_.return();case 6:if(e.j.g)return _.return();R=new Fe("drmsessionupdate"),e.C.onEvent(R),r&&(r.kb&&r.kb.resolve(),ky(e,r)),Y(_)}})}function Iy(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(l,c){if(typeof c=="string"){var d=c;c=l,l=d}if(fd(e.g.keySystem)&&c.byteLength==16&&(nu()||Bo())){d=Qt(c);var p=d.getUint32(0,!0),x=d.getUint16(4,!0),C=d.getUint16(6,!0);d.setUint32(0,p,!1),d.setUint16(4,x,!1),d.setUint16(6,C,!1)}l!="status-pending"&&(n.loaded=!0),l=="expired"&&(r=!0),c=qo(c).slice(0,32),e.Z.set(c,l)});var a=t.expiration-Date.now();(0>a||r&&1e3>a)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),hu(e)&&(e.l.resolve(),e.L.Y(Jb))}function Hb(e){var t=e.Z,n=e.ea;n.clear(),t.forEach(function(r,a){return n.set(a,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new ne(2,6,6014)),e.C.ee(Md(n))}function Gb(){var e,t,n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae;return G(function(he){if(he.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],r={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},a=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],l=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],c={videoCapabilities:a,audioCapabilities:l,initDataTypes:["cenc","sinf","skd","keyids"]},d=[null,"cenc","cbcs","cbcs-1-9"],p=new Map,x=function(Se,ye){var be,Re,Ee,je,yt,Mt,fn,Pt;return G(function(gn){switch(gn.g){case 1:return Q(gn,2),A(gn,ye.createMediaKeys(),4);case 4:q(gn,3);break;case 2:return W(gn),gn.return();case 3:Re=(be=ye.getConfiguration().sessionTypes)?be.includes("persistent-license"):!1,iu()&&(Re=!1),Ee=ye.getConfiguration().videoCapabilities,je=ye.getConfiguration().audioCapabilities,yt={persistentState:Re,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},p.has(Se)&&p.get(Se)?yt=p.get(Se):p.set(Se,yt),(Mt=Ee[0].encryptionScheme)&&!yt.encryptionSchemes.includes(Mt)&&yt.encryptionSchemes.push(Mt),(fn=Ee[0].robustness)&&!yt.videoRobustnessLevels.includes(fn)&&yt.videoRobustnessLevels.push(fn),(Pt=je[0].robustness)&&!yt.audioRobustnessLevels.includes(Pt)&&yt.audioRobustnessLevels.push(Pt),Y(gn)}})},C=function(Se,ye,be,Re){var Ee,je,yt,Mt,fn,Pt,gn,An,cn,jt;return G(function(wn){switch(wn.g){case 1:for(Q(wn,2),Ee=jo(c),je=T(Ee.videoCapabilities),yt=je.next();!yt.done;yt=je.next())Mt=yt.value,Mt.encryptionScheme=ye,Mt.robustness=be;for(fn=T(Ee.audioCapabilities),Pt=fn.next();!Pt.done;Pt=fn.next())gn=Pt.value,gn.encryptionScheme=ye,gn.robustness=Re;return An=jo(Ee),An.persistentState="required",An.sessionTypes=["persistent-license"],cn=[An,Ee],A(wn,navigator.requestMediaKeySystemAccess(Se,cn),4);case 4:return jt=wn.h,A(wn,x(Se,jt),5);case 5:q(wn,0);break;case 2:W(wn),Y(wn)}})},b=function(Se,ye,be,Re){var Ee,je,yt;return G(function(Mt){switch(Mt.g){case 1:return Q(Mt,2),Ee={type:"media-source",video:{contentType:a[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:l[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:Se,video:{encryptionScheme:ye,robustness:be},audio:{encryptionScheme:ye,robustness:Re}}},A(Mt,navigator.mediaCapabilities.decodingInfo(Ee),4);case 4:return je=Mt.h,yt=je.keySystemAccess,A(Mt,x(Se,yt),5);case 5:q(Mt,0);break;case 2:W(Mt),Y(Mt)}})},k=T(e),E=k.next();!E.done;E=k.next())M=E.value,p.set(M,null);for(R=[],_=T(d),j=_.next();!j.done;j=_.next())for(U=j.value,K=T(e),O=K.next();!O.done;O=K.next())V=O.value,V==="org.w3.clearkey"&&Ts()||(R.push(C(V,U,"","")),R.push(b(V,U,"","")));for(Z=T(e),te=Z.next();!te.done;te=Z.next())for(re=te.value,de=T(r[re]||[]),se=de.next();!se.done;se=de.next())ae=se.value,R.push(C(re,null,ae,"")),R.push(C(re,null,"",ae)),R.push(b(re,null,ae,"")),R.push(b(re,null,"",ae));return A(he,Promise.all(R),2)}return he.return(Md(p))})}function Wb(e){var t;return G(function(n){if(n.g==1)return t=new Promise(function(r,a){new Et(a).Y(Qb)}),Q(n,2),A(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return q(n,0);W(n),Y(n)})}function My(e){var t;return G(function(n){return t=Array.from(e.i.entries()),e.i.clear(),A(n,Promise.all(t.map(function(r){r=T(r);var a=r.next().value,l=r.next().value;return G(function(c){if(c.g==1)return Q(c,2),e.fa||e.A.has(a.sessionId)||l.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?A(c,Wb(a),5):A(c,a.remove(),5);if(c.g!=2)return q(c,0);W(c),Y(c)})})),0)})}function _y(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Xb(e){e.i.forEach(function(t,n){var r=t.zf,a=n.expiration;isNaN(a)&&(a=1/0),a!=r&&(e.C.onExpirationUpdated(n.sessionId,a),t.zf=a)})}function hu(e){return e=e.i.values(),_b(e,function(t){return t.loaded})}function qb(e){for(var t=T(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function Kb(e,t){var n=[];for(t.forEach(function(r,a){n.push({keySystem:a,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=T(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Ry(e,t,n,r,a,l,c,d){var p=[];e=T(e);for(var x=e.next(),C={};!x.done;C={ra:void 0},x=e.next()){if(C.ra=x.value,t.includes(C.ra.encryptionScheme)||t.push(C.ra.encryptionScheme),C.ra.keySystem=="org.w3.clearkey"&&C.ra.licenseServerUri.startsWith("data:application/json;base64,")?p.includes(C.ra.licenseServerUri)||p.push(C.ra.licenseServerUri):n.includes(C.ra.licenseServerUri)||n.push(C.ra.licenseServerUri),a.includes(C.ra.serverCertificateUri)||a.push(C.ra.serverCertificateUri),C.ra.serverCertificate&&(r.some(function(E){return function(M){return In(M,E.ra.serverCertificate)}}(C))||r.push(C.ra.serverCertificate)),C.ra.initData){x=T(C.ra.initData);for(var b=x.next(),k={};!b.done;k={mf:void 0},b=x.next())k.mf=b.value,l.some(function(E){return function(M){var R=E.mf;return M.keyId&&M.keyId==R.keyId?!0:M.initDataType==R.initDataType&&In(M.initData,R.initData)}}(k))||l.push(k.mf)}if(C.ra.keyIds)for(x=T(C.ra.keyIds),b=x.next();!b.done;b=x.next())c.add(b.value);if(C.ra.keySystemUris&&d)for(C=T(C.ra.keySystemUris),x=C.next();!x.done;x=C.next())d.add(x.value)}if(p.length==1)n.push(p[0]);else if(0<p.length){for(t=[],p=T(p),r=p.next();!r.done;r=p.next())r=h.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,L(r.keys));p=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+h.btoa(p))}}function Yb(e,t,n,r){var a=e.keySystem;a&&(a!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(a)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(a))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[a]&&(e.keySystem=r[a]),h.cast&&h.cast.__platform__&&a=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Qb=1,Zb=5,Jb=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Ud(e,t,n){this.h=e,this.i=t,this.g=n}function Ly(e,t){return G(function(n){if(n.g==1)return A(n,sb(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||Ng(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(au))throw new ne(2,4,4032);return n.return(Dy(e,t))})}function Dy(e,t){var n=Ug(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var a=T(t.variants),l=a.next();!l.done;l=a.next())l=l.value,Bd(e,r.keySystem,l.video),Bd(e,r.keySystem,l.audio);Py(e,t)}return n}function Bd(e,t,n){if(n){n=T(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=T(r.initData||[]);for(var a=r.next();!a.done;a=r.next())a=a.value,cu(e.g,a.initDataType,a.initData)}}}function Py(e,t){e=e.g?e.g.Ld():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,a=!1,l=new Set,c=new Set;t=T(t.variants);for(var d=t.next();!d.done;d=t.next()){d=d.value;var p=[];d.audio&&p.push(d.audio),d.video&&p.push(d.video),p=T(p);for(var x=p.next();!x.done;x=p.next())if(x=x.value,x.keyIds.size){x=T(x.keyIds);for(var C=x.next();!C.done;C=x.next()){C=C.value;var b=e[n?"00":C];b?Oy.includes(b)&&c.add(b):l.add(C)}}d.allowedByApplication?d.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw e={hasAppRestrictions:a,missingKeys:Array.from(l),restrictedKeyStatuses:Array.from(c)},new ne(2,4,4012,e)}var Oy=["output-restricted","internal-error"];function du(){}function Ny(e,t){if(t){var n=vo[t.toLowerCase()];if(n)return n}throw new ne(2,4,4e3,e,t)}me("shaka.media.ManifestParser",du),du.unregisterParserByMime=function(e){delete vo[e]},du.registerParserByMime=function(e,t){vo[e]=t},du.registerParserByExtension=function(){Tt("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},du.AccessibilityPurpose={ak:"visually impaired",vj:"hard of hearing"};var vo={};function eE(e,t){function n(){l=!0}function r(C){d.push(C),At(C)}var a=e=Me(e),l=!1,c,d=[],p=[];if(new Yt().box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).S("stsd",function(C){c=C,d.push(C),Sr(C)}).S("encv",n).S("enca",n).S("dvav",function(C){p.push({box:C,Oa:1701733238})}).S("dva1",function(C){p.push({box:C,Oa:1701733238})}).S("dvh1",function(C){p.push({box:C,Oa:1701733238})}).S("dvhe",function(C){p.push({box:C,Oa:1701733238})}).S("dvc1",function(C){p.push({box:C,Oa:1701733238})}).S("dvi1",function(C){p.push({box:C,Oa:1701733238})}).S("hev1",function(C){p.push({box:C,Oa:1701733238})}).S("hvc1",function(C){p.push({box:C,Oa:1701733238})}).S("avc1",function(C){p.push({box:C,Oa:1701733238})}).S("avc3",function(C){p.push({box:C,Oa:1701733238})}).S("ac-3",function(C){p.push({box:C,Oa:1701733217})}).S("ec-3",function(C){p.push({box:C,Oa:1701733217})}).S("ac-4",function(C){p.push({box:C,Oa:1701733217})}).S("mp4a",function(C){p.push({box:C,Oa:1701733217})}).parse(e),l)return e;if(p.length==0||!c)throw qo(e),new ne(2,3,3019,t);p.reverse(),t=T(p);for(var x=t.next();!x.done;x=t.next())x=x.value,a=tE(a,c,x.box,d,x.Oa);return nu()&&dd()?(t=new Uint8Array(e.byteLength+a.byteLength),t.set(a),t.set(e,a.byteLength),t):a}function tE(e,t,n,r,a){var l=nE.value(),c=e.subarray(n.start,n.start+n.size),d=Qt(c),p=new Uint8Array(n.size+l.byteLength);for(p.set(c,0),c=Qt(p),c.setUint32(4,a),p.set(l,n.size),a=d.getUint32(4),c.setUint32(n.size+16,a),Uy(p,0,p.byteLength),a=new Uint8Array(e.byteLength+p.byteLength),n=Oo()||nu()?n.start:n.start+n.size,l=e.subarray(n),a.set(e.subarray(0,n)),a.set(p,n),a.set(l,n+p.byteLength),e=T(r),r=e.next();!r.done;r=e.next())r=r.value,Uy(a,r.start,r.size+p.byteLength);return p=Qt(a,t.start),t=Us(t),e=p.getUint32(t),p.setUint32(t,e+1),a}function Uy(e,t,n){e=Qt(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var nE=new Ss(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Ei(e,t,n,r,a,l,c){this.M=e,this.Ha=t,this.sa=n,this.Hc=r===void 0?null:r,this.timescale=a===void 0?null:a,this.g=l===void 0?null:l,this.aesKey=c===void 0?null:c,this.mimeType=this.codecs=null}Ei.prototype.Xb=function(){return this.Ha},Ei.prototype.Ub=function(){return this.sa},Ei.prototype.cd=function(){return this.g};function jd(e,t){return e===t?!0:e&&t?e.Xb()==t.Xb()&&e.Ub()==t.Ub()&&pn(e.M().sort(),t.M().sort())&&In(e.cd(),t.cd()):e==t}me("shaka.media.InitSegmentReference",Ei),Ei.prototype.getEndByte=Ei.prototype.Ub,Ei.prototype.getStartByte=Ei.prototype.Xb;function ut(e,t,n,r,a,l,c,d,p,x,C,b,k,E,M,R){for(x=x===void 0?[]:x,E=E===void 0?Tr:E,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=r,this.sa=a,this.$=l,this.timestampOffset=c,this.appendWindowStart=d,this.appendWindowEnd=p,this.g=x,this.tilesLayout=C===void 0?"":C,this.B=b===void 0?null:b,this.h=k===void 0?null:k,this.status=E,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=M===void 0?null:M,this.A=null,this.i=0,this.o=R===void 0?!1:R,this.G=this.s=!1,e=T(this.g),t=e.next();!t.done;t=e.next())t.value.Kg();this.o&&this.g.length&&this.g[this.g.length-1].Jg(),this.C=this.mimeType=this.codecs=null}s=ut.prototype,s.M=function(){return this.F()},s.getStartTime=function(){return this.startTime},s.Mh=function(){return this.endTime},s.Xb=function(){return this.Ha},s.Ub=function(){return this.sa},s.di=function(){return this.tilesLayout},s.ci=function(){return this.B},s.Yb=function(){return this.status},s.xi=function(){this.status=jy},s.wf=function(){this.preload=!0},s.ri=function(){return this.preload},s.Xd=function(){this.l=!1},s.ni=function(){return this.l},s.Kg=function(){this.s=!0},s.pi=function(){return this.s},s.Jg=function(){this.G=!0},s.oi=function(){return this.G},s.Ig=function(){this.m=!0},s.ji=function(){return this.m},s.fh=function(e){this.A=e},s.bi=function(){return this.A},s.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=T(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},s.Vf=function(e){this.h==null?Xe("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},s.Zi=function(e){this.C=e},s.cd=function(){return this.C};function By(e,t){e.$=t,e=T(e.g);for(var n=e.next();!n.done;n=e.next())By(n.value,t)}me("shaka.media.SegmentReference",ut),ut.prototype.getSegmentData=ut.prototype.cd,ut.prototype.setSegmentData=ut.prototype.Zi,ut.prototype.syncAgainst=ut.prototype.Vf,ut.prototype.offset=ut.prototype.offset,ut.prototype.getThumbnailSprite=ut.prototype.bi,ut.prototype.setThumbnailSprite=ut.prototype.fh,ut.prototype.hasByterangeOptimization=ut.prototype.ji,ut.prototype.markAsByterangeOptimization=ut.prototype.Ig,ut.prototype.isLastPartial=ut.prototype.oi,ut.prototype.markAsLastPartial=ut.prototype.Jg,ut.prototype.isPartial=ut.prototype.pi,ut.prototype.markAsPartial=ut.prototype.Kg,ut.prototype.isIndependent=ut.prototype.ni,ut.prototype.markAsNonIndependent=ut.prototype.Xd,ut.prototype.isPreload=ut.prototype.ri,ut.prototype.markAsPreload=ut.prototype.wf,ut.prototype.markAsUnavailable=ut.prototype.xi,ut.prototype.getStatus=ut.prototype.Yb,ut.prototype.getTileDuration=ut.prototype.ci,ut.prototype.getTilesLayout=ut.prototype.di,ut.prototype.getEndByte=ut.prototype.Ub,ut.prototype.getStartByte=ut.prototype.Xb,ut.prototype.getEndTime=ut.prototype.Mh,ut.prototype.getStartTime=ut.prototype.getStartTime,ut.prototype.getUris=ut.prototype.M;var Tr=0,jy=1;ut.Status={hj:Tr,Zj:jy,Bj:2};function pu(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function Fd(e){return!e||pu(e)?null:e.length?e.end(e.length-1):null}function $d(e,t){return!e||!e.length||pu(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Fy(e,t){if(!e||!e.length||pu(e))return 0;var n=0;e=T(br(e));for(var r=e.next();!r.done;r=e.next()){var a=r.value;r=a.start,a=a.end,a>t&&(n+=a-Math.max(r,t))}return n}function iE(e,t,n){return!e||!e.length||pu(e)?null:(e=br(e).findIndex(function(r,a,l){return r.start>t&&(a==0||l[a-1].end-t<=n)}),0<=e?e:null)}function br(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function zd(){}function $y(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function zy(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Vd(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function oE(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=nn(Me(e.data,1,n)),a=e.data[2+n],l=e.data.subarray(3+n).indexOf(0);if(l===-1)return null;var c=nn(Me(e.data,3+n,l)),d;return r==="-->"?d=nn(Me(e.data,4+n+l)):d=yn(e.data.subarray(4+n+l)),t.mimeType=r,t.pictureType=a,t.description=c,t.data=d,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=nn(Me(e.data,1,r)),e=nn(Me(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=nn(Me(e.data,1,r)),e=nn(Me(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=nn(Me(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=yn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=nn(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=nn(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=yn(e.data),t):null}function Jr(e){for(var t=0,n=[];$y(e,t);){var r=Vd(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var a=e.subarray(t),l=Vd(a,4);a={type:String.fromCharCode(a[0],a[1],a[2],a[3]),size:l,data:a.subarray(10,10+l)},(l=oE(a))&&n.push(l),t+=a.size+10}zy(e,t)&&(t+=10)}return n}function js(e,t){for(var n=t=t===void 0?0:t,r=0;$y(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Vd(e,t+6),zy(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}me("shaka.util.Id3Utils",zd),zd.getID3Data=js,zd.getID3Frames=Jr;function Vy(e,t){var n=null,r=null,a=null,l=e.P();return t&1&&(a=e.Nc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(r=e.P()),{trackId:l,Yc:n,Id:r,ck:a}}function gf(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function yf(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Hy(e,t,n){var r=e.P(),a=[],l=null;n&1&&(l=e.P()),n&4&&e.skip(4);for(var c=0;c<r;c++){var d={Jf:null,sampleSize:null,ne:null};n&256&&(d.Jf=e.P()),n&512&&(d.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(d.ne=t==0?e.P():e.Sg()),a.push(d)}return{gk:r,Wg:a,Fh:l}}function Gy(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function Wy(e){return e=e.P(),{codec:uf(e)}}function rE(e){var t=null,n=null,r=e.qb(4),a=String.fromCharCode(r[0]);if(a+=String.fromCharCode(r[1]),a+=String.fromCharCode(r[2]),a+=String.fromCharCode(r[3]),a==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.la(),e.la(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xd:n}}function mu(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function ki(e){return(10>e?"0":"")+e}function tr(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Me(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Hd(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new Kt(n,0).P(),e.g=8*r,e.i-=r)}function Ai(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Hd(e)}e.h<<=t,e.g-=t}function kt(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Hd(e),n=t-n,0<n?r<<n|kt(e,n):r}function Gd(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Hd(e),t+Gd(e)}function yi(e){Ai(e,1+Gd(e))}function We(e){var t=Gd(e);return kt(e,t+1)-1}function Fs(e){return e=We(e),1&e?1+e>>>1:-1*(e>>>1)}function tt(e){return kt(e,1)===1}function Ot(e){return kt(e,8)}function vf(e,t){for(var n=8,r=8,a=0;a<t;a++)r!==0&&(r=Fs(e),r=(n+r+256)%256),n=r===0?n:r}function sE(e){return Ot(e),We(e),We(e)}me("shaka.util.ExpGolomb",tr);function en(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}s=en.prototype,s.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},s.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Xd(e)),n=e.length-(e.length+t)%188,r=!1,a=t;a<n;a+=188)if(e[a]==71){var l=!!(e[a+1]&64),c=((e[a+1]&31)<<8)+e[a+2];if(1<(e[a+3]&48)>>4){var d=a+5+e[a+4];if(d==a+188)continue}else d=a+4;switch(c){case 0:l&&(d+=e[d]+1),this.G=(e[d+10]&31)<<8|e[d+11];break;case 17:case 8191:break;case this.G:l&&(d+=e[d]+1),l=e,c={audio:-1,video:-1,Rd:-1,audioCodec:"",videoCodec:""};var p=d+3+((l[d+1]&15)<<8|l[d+2])-4;for(d+=12+((l[d+10]&15)<<8|l[d+11]);d<p;){var x=(l[d+1]&31)<<8|l[d+2],C=(l[d+3]&15)<<8|l[d+4];switch(l[d]){case 6:if(0<C)for(var b=d+5,k=C;2<k;){var E=l[b+1]+2;switch(l[b]){case 5:var M=gd(l.subarray(b+2,b+E));c.audio==-1&&M==="Opus"?(c.audio=x,c.audioCodec="opus"):c.video==-1&&M==="AV01"&&(c.video=x,c.videoCodec="av1");break;case 106:c.audio==-1&&(c.audio=x,c.audioCodec="ac3");break;case 122:c.audio==-1&&(c.audio=x,c.audioCodec="ec3");break;case 124:c.audio==-1&&(c.audio=x,c.audioCodec="aac");break;case 127:c.audioCodec=="opus"&&(M=null,l[b+2]===128&&(M=l[b+3]),M!=null&&(this.F={channelCount:M&15?M&15:2,Ch:M,sampleRate:48e3}))}b+=E,k-=E}break;case 15:c.audio==-1&&(c.audio=x,c.audioCodec="aac");break;case 17:c.audio==-1&&(c.audio=x,c.audioCodec="aac-loas");break;case 21:c.Rd==-1&&(c.Rd=x);break;case 27:c.video==-1&&(c.video=x,c.videoCodec="avc");break;case 3:case 4:c.audio==-1&&(c.audio=x,c.audioCodec="mp3");break;case 36:c.video==-1&&(c.video=x,c.videoCodec="hvc");break;case 129:c.audio==-1&&(c.audio=x,c.audioCodec="ac3");break;case 132:case 135:c.audio==-1&&(c.audio=x,c.audioCodec="ec3")}d+=C+5}l=c,l.video!=-1&&(this.I=l.video,this.m=l.videoCodec),l.audio!=-1&&(this.B=l.audio,this.A=l.audioCodec),l.Rd!=-1&&(this.C=l.Rd),r&&!this.H&&(r=!1,a=t-188),this.H=!0;break;case this.I:d=e.subarray(d,a+188),l?this.j.push([d]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(d);break;case this.B:d=e.subarray(d,a+188),l?this.i.push([d]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(d);break;case this.C:d=e.subarray(d,a+188),l?this.l.push([d]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(d);break;default:r=!0}}return this};function Wd(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var a=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=a),n.pts=Xy(a,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=Xy(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}s.Ci=function(e){return Tt("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Cf(e)},s.Cf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var a=e.byteLength,l=1;this.m=="hvc"&&(l=2);for(var c=n||0,d=[],p=-1,x=0,C,b=0;b<a;++b){var k=e[b];if(k){if(2<=c&&k==1){if(t&&!d.length&&p==-1&&(k=b-(3<c?3:c),n&&k!=0&&(k=e.subarray(0,k),t.data=vn(t.data,k),t.fullData=vn(t.fullData,k))),0<=p?(c=b-((3<c?3:c)+1),d.push({data:e.subarray(p+l,c+1),fullData:e.subarray(p,c+1),type:x,time:r})):t&&!d.length&&(p=b-c,0<p&&(p=e.subarray(0,p),t.data=vn(t.data,p),t.fullData=vn(t.fullData,p))),b>=a-l)return d;b++,p=b,x=this.m=="hvc"?e[b]>>1&63:e[b]&31}c=0}else c++;b>=a-1&&0<=p&&0<=c&&(C={data:e.subarray(p+l,a),fullData:e.subarray(p,a),type:x,time:r})}return C&&d.push(C),!d.length&&t&&(t.data=vn(t.data,e),t.fullData=vn(t.fullData,e)),d},s.getMetadata=function(){for(var e=[],t=T(this.l),n=t.next();!n.done;n=t.next())n=vn.apply(si,L(n.value)),(n=Wd(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Jr(n.data),dts:n.dts,pts:n.pts});return e},s.Tb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=T(this.i),n=t.next();!n.done;n=t.next()){var r=vn.apply(si,L(n.value)),a=Wd(this,r);n=this.h.length?this.h[this.h.length-1]:null,a&&a.pts!=null&&a.dts!=null&&(!n||n.pts!=a.pts&&n.dts!=a.dts)?(this.h.length&&a.dts<(n.dts||0)&&(e=!0),this.h.push(a)):this.h.length&&(r=a?a.data:r)&&(n=this.h.pop(),n.data=vn(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(l,c){var d=(l.pts||0)-(c.pts||0);return(l.dts||0)-(c.dts||0)||d}))}return this.h},s.Fc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=T(this.j),r=n.next();!r.done;r=n.next()){var a=vn.apply(si,L(r.value)),l=Wd(this,a);r=this.g.length?this.g[this.g.length-1]:null,l&&l.pts!=null&&l.dts!=null&&(!r||r.pts!=l.pts&&r.dts!=l.dts)?(this.g.length&&l.dts<(r.dts||0)&&(t=!0),this.g.push(l)):this.g.length&&(a=l?l.data:a)&&(r=this.g.pop(),r.data=vn(r.data,a),this.g.push(r))}if(e){for(n=[],r=T(this.g),a=r.next();!a.done;a=r.next())if(a=a.value,a.nalus=this.Cf(a,c,void 0),a.nalus.length){n.push(a);var c=a.nalus[a.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(d,p){var x=(d.pts||0)-(p.pts||0);return(d.dts||0)-(p.dts||0)||x}))}return e?this.g:(e=this.g,this.g=[],e)},s.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Tb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Fc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},s.$c=function(){return{audio:this.A,video:this.m}},s.Pd=function(){for(var e=[],t=T(this.Fc()),n=t.next();!n.done;n=t.next())e.push.apply(e,L(n.value.nalus));return e},s.gi=function(){Tt("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},s.kf=function(){return this.m=="hvc"?uE(this):aE(this)};function aE(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(k){return k.type==7}),!e))return t;e=new tr(e.data);var n=Ot(e),r=Ot(e),a=Ot(e);if(yi(e),lE.includes(n)){var l=We(e);if(l===3&&Ai(e,1),yi(e),yi(e),Ai(e,1),tt(e)){l=l!==3?8:12;for(var c=0;c<l;c++)tt(e)&&(6>c?vf(e,16):vf(e,64))}}if(yi(e),l=We(e),l===0)We(e);else if(l===1)for(Ai(e,1),yi(e),yi(e),l=We(e),c=0;c<l;c++)yi(e);yi(e),Ai(e,1),l=We(e),c=We(e);var d=kt(e,1);d===0&&Ai(e,1),Ai(e,1);var p=0,x=0,C=0,b=0;return tt(e)&&(p=We(e),x=We(e),C=We(e),b=We(e)),t.height=String((2-d)*(c+1)*16-2*C-2*b),t.width=String(16*(l+1)-2*p-2*x),t.codec="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t}function uE(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(O){return O.type==33}),!e))return t;var n=new tr(e.fullData,!0);Ot(n),Ot(n),kt(n,4);var r=kt(n,3);tt(n);var a=kt(n,2),l=kt(n,1),c=kt(n,5),d=kt(n,32);e=Ot(n);for(var p=Ot(n),x=Ot(n),C=Ot(n),b=Ot(n),k=Ot(n),E=Ot(n),M=[],R=[],_=0;_<r;_++)M.push(tt(n)),R.push(tt(n));if(0<r)for(_=r;8>_;_++)kt(n,2);for(_=0;_<r;_++)M[_]&&kt(n,88),R[_]&&Ot(n);We(n),r=We(n),r==3&&kt(n,1),M=We(n),R=We(n);var j=_=0,U=0,K=0;return tt(n)&&(_+=We(n),j+=We(n),U+=We(n),K+=We(n)),t.width=String(M-(_+j)*(r===1||r===2?2:1)),t.height=String(R-(U+K)*(r===1?2:1)),n=function(O){for(var V=0,Z=0;32>Z;Z++)V|=(O>>Z&1)<<31-Z;return V>>>0}(d),l=l==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+c),a+="."+n.toString(16).toUpperCase(),a+="."+l+E,k&&(a+="."+k.toString(16).toUpperCase()),b&&(a+="."+b.toString(16).toUpperCase()),C&&(a+="."+C.toString(16).toUpperCase()),x&&(a+="."+x.toString(16).toUpperCase()),p&&(a+="."+p.toString(16).toUpperCase()),e&&(a+="."+e.toString(16).toUpperCase()),t.codec=a,t}function Xy(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function gu(e){return!(0>Xd(e))}function Xd(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}me("shaka.util.TsParser",en),en.syncOffset=Xd,en.probe=gu,en.prototype.getVideoInfo=en.prototype.kf,en.prototype.getVideoResolution=en.prototype.gi,en.prototype.getVideoNalus=en.prototype.Pd,en.prototype.getCodecs=en.prototype.$c,en.prototype.getStartTime=en.prototype.getStartTime,en.prototype.getVideoData=en.prototype.Fc,en.prototype.getAudioData=en.prototype.Tb,en.prototype.getMetadata=en.prototype.getMetadata,en.prototype.parseNalus=en.prototype.Cf,en.prototype.parseAvcNalus=en.prototype.Ci,en.prototype.parse=en.prototype.parse,en.prototype.clearData=en.prototype.clearData,en.Timescale=9e4;var lE=[100,110,122,244,44,83,86,118,128,138,139,134];function yu(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&He("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Tt("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{He("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(He("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||He(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function qy(e){e.g&&e.i.classList.add("shaka-hidden")}yu.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Ky(e,t,n){var r=0,a=-1;switch(t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(n){case"DASH":a=1;break;case"HLS":a=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(a))}me("shaka.lcevc.Dec",yu),yu.prototype.release=yu.prototype.release;function Yy(e,t,n,r){var a=this;this.i=e,this.da=n,this.A=null,this.F=t,this.h={},this.G={},this.Da={},this.g=null,this.fa=!1,this.Z=r||null,this.l={},this.s=new Ae,this.j={},this.H=null,this.L=new Xt,this.N="",this.qa=!1,this.m=Qy(this,this.L),this.C=!1,this.I=new Os(function(){return cE(a)}),this.B=!1,this.ba="UNKNOWN",this.Ea=this.Fa=!1,this.za=new Xt,this.o=!1,this.xa=!0,this.pa=this.R=this.ya=this.U=this.K=this.ea=null,this.oa=new Xt}function Qy(e,t){if(h.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.xa=!0}),e.s.D(n,"endstreaming",function(){e.xa=!1}),e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Tf(n),e.i.src=e.N,n}return n=new MediaSource,e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Tf(n),e.i.src=e.N,n}function fE(e,t){var n,r,a,l,c,d,p,x,C,b,k;return G(function(E){if(E.g==1)return e.createSegmentIndex?A(E,e.createSegmentIndex(),2):E.u(2);if(!e.segmentIndex)return E.return(!1);if(e.segmentIndex.getNumReferences()==0)return E.return(!0);for(n=Ln,r=new Set,a=T(e.segmentIndex),l=a.next();!l.done;l=a.next())if(c=l.value,d=c.mimeType||e.mimeType||"",p=c.codecs||e.codecs||"",x=d+":"+p,!r.has(x)){if(r.add(x),t==n.ua){if(C=Dn(d,p),!ou(C))return E.return(!1)}else if(t==n.ga?p=su(p):t==n.X&&(p=Ms(p,d)),b=ZT(e,d,p),k=qr(d,p),!Ne(b)&&!Ki(k))return E.return(!1)}return E.return(!0)})}s=Yy.prototype,s.destroy=function(){return this.I.destroy()};function cE(e){var t,n,r,a,l,c,d,p;return G(function(x){if(x.g==1){t=[];for(n in e.l)for(r=e.l[n],a=r[0],e.l[n]=r.slice(0,1),a&&t.push(a.p.catch(Dg)),l=T(r.slice(1)),c=l.next();!c.done;c=l.next())d=c.value,d.p.reject(new ne(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(p in e.j)t.push(e.j[p].destroy());return A(x,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.F=null,e.h={},e.j={},e.H=null,e.l={},e.Z=null,e.K=null,e.da=null,Y(x)})}s.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var a=this,l,c,d,p,x;return G(function(C){switch(C.g){case 1:return l=Ln,A(C,a.L,2);case 2:a.B=t,a.ba=n,a.Fa=r,a.Ea=!a.B&&a.ba=="HLS"&&!a.Fa,a.K=null,c=T(e.keys()),d=c.next();case 3:if(d.done){C.u(0);break}return p=d.value,x=e.get(p),A(C,xf(a,p,x,x.codecs),6);case 6:a.o?(a.l[l.X]=[],a.l[l.ga]=[]):a.l[p]=[],d=c.next(),C.u(3)}})};function xf(e,t,n,r){var a,l,c,d,p,x,C,b,k,E,M,R;return G(function(_){switch(_.g){case 1:return a=Ln,l=wt,c=ft,A(_,fE(n,t),2);case 2:if(c.call(l,_.h,"Type negotiation should happen before MediaSourceEngine.init!"),d=Dn(n.mimeType,r),t==a.ua){wf(e,d,e.B,n.external),_.u(0);break}if(p=e.A.forceTransmux,(!Ne(d)||!e.B&&wr.includes(d))&&(p=!0),x=qr(n.mimeType,r),!p){_.u(4);break}if(C=Ti(a.X,(r||"").split(",")),b=Ti(a.ga,(r||"").split(",")),!C||!b){_.u(5);break}return e.o=!0,A(_,xf(e,a.X,n,C),6);case 6:return A(_,xf(e,a.ga,n,b),7);case 7:return _.return();case 5:(k=Ki(x))&&(E=k(),e.j[t]=E,d=E.convertCodecs(t,x));case 4:M=d+e.A.addExtraFeaturesToSourceBuffer(d),qt(e.I);try{R=e.m.addSourceBuffer(M)}catch(j){throw new ne(2,3,3015,j,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(R.mode=TE),e.s.D(R,"error",function(){var j=e.l[t][0];j.p.reject(new ne(2,3,3014,e.i.error?e.i.error.code:0,j.uri))}),e.s.D(R,"updateend",function(){return nr(e,t)}),e.h[t]=R,e.G[t]=d,e.Da[t]=!!n.drmInfos.length,Y(_)}})}s.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function wf(e,t,n,r){e.g||(e.g=new Ko(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var a=e.g;r=r||e.fa,e=e.ba,t=="application/cea-608"||t=="application/cea-708"?a.i=null:(a.i=(0,Pn[t])(),a.i.setSequenceMode?a.i.setSequenceMode(n):Tt("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),a.i.setManifestType?a.i.setManifestType(e):Tt("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),a.B=r)}function Zy(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function qd(e,t){return e.C||!Object.keys(e.h).length?e=null:t==_t?e=e.g.g:(e=$s(e,t),e=!e||pu(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function vu(e,t){return e.C?null:t==_t?e.g.h:Fd($s(e,t))}function hE(e,t,n){return e.C?0:t==_t?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=$s(e,t),Fy(e,n))}s.wb=function(){var e={total:this.C?[]:br(this.i.buffered),audio:this.C?[]:br($s(this,"audio")),video:this.C?[]:br($s(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function $s(e,t){try{return e.h[t].buffered}catch{return null}}function dE(e,t,n,r,a,l){var c=null,d=Me(n);if(wr.includes(a))l=Jr(d),l.length&&r&&((t=l.find(function(b){return b.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(c=Math.round(t.data)/1e3),e.da.onMetadata([{cueTime:r.startTime,data:d,frames:l,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(a.includes("/mp4")&&r&&r.timestampOffset==0&&r.$&&r.$.timescale){var p=r.$.timescale;if(!isNaN(p)){var x=0,C=!1;new Yt().box("moof",At).box("traf",At).S("tfdt",function(b){x=gf(b.reader,b.version).baseMediaDecodeTime/p,C=!0,b.parser.stop()}).parse(n,!0),C&&(c=x)}}else!a.includes("/mp4")&&!a.includes("/webm")&&gu(d)&&(e.K?e.K.clearData():e.K=new en,d=e.K.parse(d),t=d.getStartTime(t),t!=null&&(c=t),d=d.getMetadata(),d.length)&&e.da.onMetadata(d,l,r?r.endTime:null);return c}function Sf(e,t,n,r,a,l,c,d,p,x){c=c===void 0?!1:c,d=d===void 0?!1:d,p=p===void 0?!1:p,x=x===void 0?!1:x;var C,b,k,E,M,R,_,j,U,K,O,V,Z,te;return G(function(re){switch(re.g){case 1:if(C=Ln,t!=C.ua){re.u(2);break}if(!e.B){re.u(3);break}return A(re,e.za,4);case 4:b=re.h,e.g.s=b;case 3:return A(re,eb(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return re.return();case 2:if(x||!e.o){re.u(6);break}return A(re,Sf(e,C.X,n,r,a,l,c,d,p,!0),7);case 7:return A(re,Sf(e,C.ga,n,r,a,l,c,d,p,!0),8);case 8:return re.return();case 6:if(!e.h[t])return re.return();if(k=e.h[t].timestampOffset,E=e.G[t],e.j[t]&&(E=e.j[t].getOriginalMimeType()),r&&(M=dE(e,t,n,r,E,k),M!=null&&(e.U==null&&t==C.ga&&(e.U=M,e.ya=r.startTime,e.R!=null&&(R=0,e.ya==e.pa&&(R=e.U-e.R),e.oa.resolve(R))),e.R==null&&t==C.X&&(e.R=M,e.pa=r.startTime,e.U!=null&&(_=0,e.ya==e.pa&&(_=e.U-e.R),e.oa.resolve(_))),j=r.startTime-M,U=Math.abs(k-j),(.001<=U||c||d)&&(!p||0<j||!k)&&(k=j,e.Ea&&(Gn(e,t,function(){return zs(e,t)},null),Gn(e,t,function(){return Vs(e,t,k)},null))),K=t==C.ga||!(C.ga in e.h),e.B&&K&&e.za.resolve(k))),l&&t==C.ga&&(e.g||wf(e,"application/cea-608",e.B,!1),e.H||(O=E.split(";",1)[0],e.H=new dn(O)),r?(V=e.H.i(n),V.length&&nb(e.g,V,r.startTime,r.endTime,k)):e.H.init(n,d)),!e.j[t]){re.u(9);break}return A(re,e.j[t].transmux(n,a,r,e.m.duration,t),10);case 10:n=re.h;case 9:if(n=vE(e,n,r?r.startTime:null,t,r?r.M()[0]:null),!r||!e.B||t==C.ua){re.u(11);break}if(!c&&!d){re.u(11);break}if(Z=r.startTime,e.ba!="HLS"||e.o||t!=C.X||!e.h[C.ga]){re.u(13);break}return A(re,e.oa,14);case 14:te=re.h,.1<Math.abs(te)&&(Z-=te);case 13:Gn(e,t,function(){return zs(e,t)},null),Gn(e,t,function(){return Vs(e,t,Z)},null);case 11:return A(re,Gn(e,t,function(){var de=n;if(t=="video"&&e.Z){var se=e.Z;se.g&&se.g.appendBuffer(de,"video",se.o,-k)}e.h[t].appendBuffer(de)},r?r.M()[0]:null),15);case 15:Y(re)}})}function pE(e,t){var n=vu(e,"video")||0;Rg(e.g,t,n)}function mE(e){e.g&&Rg(e.g,"",0)}s.remove=function(e,t,n){var r=this,a;return G(function(l){return l.g==1?(a=Ln,e==a.ua?A(l,r.g.remove(t,n),0):A(l,Gn(r,e,function(){return Cf(r,e,t,n)},null),4)):r.o?A(l,Gn(r,a.X,function(){return Cf(r,a.X,t,n)},null),0):l.u(0)})};function Jy(e,t){var n;return G(function(r){return r.g==1?(n=Ln,t==n.ua?e.g?A(r,e.g.remove(0,1/0),0):r.return():A(r,Gn(e,t,function(){return Cf(e,t,0,e.m.duration)},null),4)):e.o?A(r,Gn(e,n.X,function(){return Cf(e,n.X,0,e.m.duration)},null),0):r.u(0)})}s.flush=function(e){var t=this,n;return G(function(r){return r.g==1?(n=Ln,e==n.ua?r.return():A(r,Gn(t,e,function(){t.i.currentTime-=.001,nr(t,e)},null),2)):t.o?A(r,Gn(t,n.X,function(){var a=n.X;t.i.currentTime-=.001,nr(t,a)},null),0):r.u(0)})};function gE(e,t,n,r,a,l,c,d,p){var x,C,b;return G(function(k){return k.g==1?(x=Ln,t==x.ua?(l||(e.g.s=n),tb(e.g,r,a),k.return()):(C=[],A(k,SE(e,t,c,d,p),2))):(b=k.h,b||(C.push(Gn(e,t,function(){return zs(e,t)},null)),e.o&&C.push(Gn(e,x.X,function(){return zs(e,x.X)},null))),l||(C.push(Gn(e,t,function(){return Vs(e,t,n)},null)),e.o&&C.push(Gn(e,x.X,function(){return Vs(e,x.X,n)},null))),C.push(Gn(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=a,e.h[t].appendWindowStart=r,nr(e,t)},null)),e.o&&C.push(Gn(e,x.X,function(){var E=x.X;e.h[E].appendWindowStart=0,e.h[E].appendWindowEnd=a,e.h[E].appendWindowStart=r,nr(e,E)},null)),A(k,Promise.all(C),0))})}function yE(e,t,n){var r;return G(function(a){return a.g==1?(r=Ln,t==r.ua?a.return():(t==r.ga&&(e.za=new Xt),Gn(e,t,function(){return zs(e,t)},null),e.o&&Gn(e,r.X,function(){return zs(e,r.X)},null),A(a,Gn(e,t,function(){return Vs(e,t,n)},null),2))):e.o?A(a,Gn(e,r.X,function(){return Vs(e,r.X,n)},null),0):a.u(0)})}s.endOfStream=function(e){var t=this;return G(function(n){return A(n,Kd(t,function(){Zy(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},s.Za=function(e){var t=this;return G(function(n){return A(n,Kd(t,function(){if(e<t.m.duration)for(var r in t.h){var a={start:function(){},p:new Xt,uri:null};t.l[r].unshift(a)}t.m.duration=e,t.ea=e}),0)})},s.getDuration=function(){return this.m.duration};function Cf(e,t,n,r){r<=n?nr(e,t):e.h[t].remove(n,r)}function zs(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,nr(e,t)}function Vs(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,nr(e,t)}function nr(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),Yd(e,t))}}function Gn(e,t,n,r){return qt(e.I),n={start:n,p:new Xt,uri:r},e.l[t].push(n),e.l[t].length==1&&e1(e,t),n.p}function Kd(e,t){var n,r,a,l,c,d,p;return G(function(x){switch(x.g){case 1:qt(e.I),n=[],r={};for(a in e.h)r={ready:void 0},r.ready=new Xt,l={start:function(C){return function(){return C.ready.resolve()}}(r),p:r.ready,uri:null},e.l[a].push(l),n.push(r.ready),e.l[a].length==1&&l.start();return Q(x,2),A(x,Promise.all(n),4);case 4:q(x,3);break;case 2:throw c=W(x),c;case 3:return Q(x,5,6),A(x,t(),6);case 6:ie(x);for(d in e.h)Yd(e,d);ue(x,0);break;case 5:throw p=W(x),new ne(2,3,3015,p,e.i.error||"No error in the media element",null)}})}function Yd(e,t){e.l[t].shift(),e1(e,t)}function e1(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new ne(2,3,3017,t)):n.p.reject(new ne(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),Yd(e,t)}}function vE(e,t,n,r,a){var l=n==null,c=e.Da[r];return n=e.da.Qh(),(l=e.A.insertFakeEncryptionInInit&&l&&c)&&(n=fd(n),l=No()||Oo()||hd()||nu()&&dd()&&n),l&&Ql(e.G[r])=="mp4"&&(t=eE(t,a)),t}function xE(e,t,n,r){return Gn(e,t,function(){t!==_t&&(xt()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),r&&(e.j[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),nr(e,t))},null)}function wE(e,t){var n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de;return G(function(se){switch(se.g){case 1:n=Ln,e.C=!0,e.o=!1,r=e.i.currentTime,a=e.i.autoplay,l=e.i.paused,e.qa&&(e.i.autoplay=!1),ee(se,2),e.s.Ra(),c=[];for(d in e.j)c.push(e.j[d].destroy());for(p in e.l)for(x=e.l[p],C=x[0],e.l[p]=x.slice(0,1),C&&c.push(C.p.catch(Dg)),b=T(x.slice(1)),k=b.next();!k.done;k=b.next())E=k.value,E.p.reject(new ne(2,7,7003,void 0));for(M in e.h){R=e.h[M];try{e.m.removeSourceBuffer(R)}catch{}}return A(se,Promise.all(c),4);case 4:return e.j={},e.h={},_=e.m.duration,e.L=new Xt,e.m=Qy(e,e.L),A(se,e.L,5);case 5:!isNaN(_)&&_?e.m.duration=_:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),j=new Xt,U=e.m.sourceBuffers,K=t.size,O=0,V=function(){O++,O===K&&(j.resolve(),e.s.jb(U,"addsourcebuffer",V))},e.s.D(U,"addsourcebuffer",V),Z=T(t.keys()),te=Z.next();case 6:return te.done?(e.i.currentTime=r,A(se,j,2)):(re=te.value,de=t.get(re),A(se,xf(e,re,de,de.codecs),9));case 9:e.o?(e.l[n.X]=[],e.l[n.ga]=[]):e.l[re]=[],te=Z.next(),se.u(6);break;case 2:ie(se),e.C=!1,qt(e.I),e.s.ha(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=a,l||e.i.play())}),ue(se,0)}})}function t1(e,t){return Kd(e,function(){return wE(e,t)})}function SE(e,t,n,r,a){var l,c,d,p,x,C,b,k,E,M,R,_,j,U,K;return G(function(O){return O.g==1?(l=Ln,t==l.ua?O.return(!1):(c=gi(ji(e.G[t])),d=ho(e.G[t]),x=!1,C=Dn(n,r),b=e.A.forceTransmux,(!Ne(C)||!e.B&&wr.includes(C))&&(b=!0),b&&(k=qr(n,r),E=Ki(k))&&(p=E(),M=Ti(l.X,(r||"").split(",")),R=Ti(l.ga,(r||"").split(",")),M&&R?(x=!0,_=R,t==l.X&&(_=M),C=p.convertCodecs(t,qr(n,_))):C=p.convertCodecs(t,k)),j=gi(ji(C)),U=ho(C),c===j&&d===U?(e.j[t]&&!p?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&p?e.j[t]=p:p&&(e.j[t]&&e.j[t].transmux!=p.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=p):p.destroy()),O.return(!1)):(K=!0,(e.o||x&&p&&!e.j[t])&&(K=!1),K&&e.A.codecSwitchingStrategy==="smooth"&&xt()?A(O,xE(e,t,C,p),3):(p&&p.destroy(),A(O,t1(e,a),3))))):O.return(!0)})}function CE(e,t,n,r){if(t==_t)var a=!1;else{a=gi(ji(e.G[t]));var l=ho(e.G[t]),c=Dn(n,r),d=e.A.forceTransmux;(!Ne(c)||!e.B&&wr.includes(c))&&(d=!0),n=qr(n,r),d&&(d=Ki(n))&&(d=d(),c=d.convertCodecs(t,n),d.destroy()),t=gi(ji(c)),c=ho(c),a=a!==t||l!==c}return a?e.A.codecSwitchingStrategy!=="smooth"||!xt()||e.o:!1}var Tf=h.URL.createObjectURL,TE="sequence";function at(e,t,n){this.i=e,this.A=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}s=at.prototype,s.getDuration=function(){return this.j},s.Sh=function(){return this.g},s.dh=function(e){this.i=e},s.Za=function(e){this.j=e},s.Xh=function(){return this.i},s.ah=function(e){this.B=e},s.sc=function(e){this.G=e},s.pe=function(e){this.o=e},s.Od=function(){return this.o},s.Of=function(e){this.A=e},s.Lh=function(){return this.A},s.Ng=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(a){return a.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(a,l){return Math.max(a,l.end-l.start)},this.g),this.h=Math.max(this.h,r),this.i!=null&&this.C&&!this.s&&(this.i=n-this.h-this.g)}}},s.sd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3;e=T(e);for(var a=e.next();!a.done;a=e.next())a=a.value,r<a.startTime||(t=Math.min(t,a.startTime),n=Math.max(n,a.endTime),this.g=Math.max(this.g,a.endTime-a.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.s&&(this.i=r-this.h-this.g)}},s.Th=function(){return this.h},s.Wd=function(){this.s=!0},s.si=function(){return this.s},s.bh=function(e){this.m=e},s.Ph=function(){return this.m},s.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},s.xf=function(e){this.g=Math.max(this.g,e)},s.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},s.V=function(){return this.j==1/0&&!this.G},s.kc=function(){return this.j!=1/0&&!this.G},s.mb=function(){return Math.max(this.H,this.Wb()-this.o)},s.hh=function(e){this.H=e},s.Wb=function(){return this.V()||this.kc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},s.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Wb()-this.o+e,this.yb()))},s.Vb=function(){return this.bd(0)},s.yb=function(){return Math.max(0,this.Wb()-(this.V()||this.kc()?this.A:0))},s.nh=function(){return!(this.i==null||this.h!=null&&this.C)},s.$g=function(e){this.F=e},s.Jh=function(){return this.F},me("shaka.media.PresentationTimeline",at),at.prototype.getAvailabilityTimeOffset=at.prototype.Jh,at.prototype.setAvailabilityTimeOffset=at.prototype.$g,at.prototype.usingPresentationStartTime=at.prototype.nh,at.prototype.getSeekRangeEnd=at.prototype.yb,at.prototype.getSeekRangeStart=at.prototype.Vb,at.prototype.getSafeSeekRangeStart=at.prototype.bd,at.prototype.getSegmentAvailabilityEnd=at.prototype.Wb,at.prototype.setUserSeekStart=at.prototype.hh,at.prototype.getSegmentAvailabilityStart=at.prototype.mb,at.prototype.isInProgress=at.prototype.kc,at.prototype.isLive=at.prototype.V,at.prototype.offset=at.prototype.offset,at.prototype.notifyMaxSegmentDuration=at.prototype.xf,at.prototype.notifyMinSegmentStartTime=at.prototype.ce,at.prototype.getInitialProgramDateTime=at.prototype.Ph,at.prototype.setInitialProgramDateTime=at.prototype.bh,at.prototype.isStartTimeLocked=at.prototype.si,at.prototype.lockStartTime=at.prototype.Wd,at.prototype.getMaxSegmentEndTime=at.prototype.Th,at.prototype.notifySegments=at.prototype.sd,at.prototype.notifyTimeRange=at.prototype.Ng,at.prototype.getDelay=at.prototype.Lh,at.prototype.setDelay=at.prototype.Of,at.prototype.getSegmentAvailabilityDuration=at.prototype.Od,at.prototype.setSegmentAvailabilityDuration=at.prototype.pe,at.prototype.setStatic=at.prototype.sc,at.prototype.setClockOffset=at.prototype.ah,at.prototype.getPresentationStartTime=at.prototype.Xh,at.prototype.setDuration=at.prototype.Za,at.prototype.setPresentationStartTime=at.prototype.dh,at.prototype.getMaxSegmentDuration=at.prototype.Sh,at.prototype.getDuration=at.prototype.getDuration;function n1(e,t,n){this.j=n,this.l=e,this.s=i1(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}n1.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function bE(e,t){e.i=t}function EE(e){this.g=e}function i1(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=T(br(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Qd(e,t,n,r,a){var l=this;this.A=a,this.g=e,this.B=t,this.s=n,this.l=new Ae,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return Zd(l)}),this.m=new Et(function(){Zd(l)}).Sa(this.s.gapJumpTimerTime)}Qd.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},Qd.prototype.Af=function(){this.o=!0,Zd(this)};function Zd(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=i1(n),a=n.g.currentTime,l=Date.now()/1e3;(t.g!=a||t.s!=r)&&(t.m=l,t.g=a,t.s=r,t.h=!1),a=l-t.m,(r=a>=t.A&&r&&!t.h)&&(t.i(t.g,a),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Fe("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=iE(n,t,e.s.gapDetectionThreshold),r!=null&&(r!=0||e.o))&&(a=n.start(r),(navigator.userAgent.match(/Edge\//)||Oo())&&(a=Math.ceil(100*(a+.01))/100),a>=e.B.yb()||.001>a-t||(r!=0&&n.end(r-1),e.g.currentTime=a,t==e.i&&(e.i=a),e.C++,e.A(new Fe("gapjumped"))))}}}function Hs(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=kE.value().get(t),n.ha(e,t,r))}var kE=new Ss(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function o1(e,t,n,r){var a=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return a.l==null&&(a.l=r()),a.l},this.o=!1,this.h=new Ae,this.i=new u1(e),Hs(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){s1(a,a.j())})}o1.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Jd(e){return e.o?e.g.currentTime:e.j()}function r1(e,t){0<e.g.readyState?l1(e.i,t):Hs(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){s1(e,e.j())})}function s1(e,t){.001>Math.abs(e.g.currentTime-t)?a1(e):(e.h.ha(e.g,"seeking",function(){a1(e)}),l1(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function a1(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function u1(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Et(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}u1.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function l1(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Sa(.1)}function f1(e){this.h=e,this.j=!1,this.g=null,this.i=new Ae}s=f1.prototype,s.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,r=t.g;0>t.g&&(r=Math.max(0,n+t.g)),n!=r?(t.i.ha(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=r):t.j=!0}}var t=this;Hs(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},s.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},s.Ee=function(e){this.g=this.j?this.g:e},s.yd=function(){return(this.j?this.h.currentTime:this.g)||0},s.gg=function(){return 0},s.fg=function(){return 0},s.Mg=function(){};function c1(e,t,n,r,a,l){var c=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=a,this.s=null,this.o=AE(e,n,l),this.j=new Qd(e,t.presentationTimeline,n,this.o,l),this.h=new o1(e,function(){e:{var d=c.j;d.j=!0,d.o=!1;var p=Jd(c.h);if(d=d1(c,p),.001<Math.abs(d-p)){if(p=!1,!Bi()||Bi()&&Kl())p=!0;else{var x=Date.now()/1e3;(!c.s||c.s<x-1)&&(c.s=x,p=!0)}if(p){r1(c.h,d),d=void 0;break e}}c.A(),d=void 0}return d},function(d){var p=c.j;p.g.seeking&&!p.j&&(p.j=!0,p.i=d)},function(){var d=r;return d==null?d=1/0>c.g.getDuration()?c.g.Vb():c.g.yb():0>d&&(d=c.g.yb()+d),h1(c,p1(c,d))}),this.m=new Et(function(){if(c.i.readyState!=0&&!c.i.paused){var d=Jd(c.h),p=c.g.Vb(),x=c.g.yb();3>x-p&&(p=x-3),d<p&&(d=d1(c,d),c.i.currentTime=d)}})}s=c1.prototype,s.ready=function(){this.m.Sa(.25)},s.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},s.Ee=function(e){r1(this.h,e)},s.yd=function(){var e=Jd(this.h);return 0<this.i.readyState&&!this.i.paused?p1(this,e):e},s.gg=function(){return this.o?this.o.o:0},s.fg=function(){return this.j.C},s.Mg=function(){this.j.Af()};function h1(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function d1(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,a=e.g.Vb(),l=e.g.yb(),c=e.g.getDuration();3>l-a&&(a=l-3);var d=e.g.bd(n),p=e.g.bd(r);return n=e.g.bd(n+r),t>=c?h1(e,t):t>l?l:t<a?$d(e.i.buffered,p)?p:n:t>=d||$d(e.i.buffered,t)?t:n}function p1(e,t){var n=e.g.Vb();return t<n?n:(e=e.g.yb(),t>e?e:t)}function AE(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new n1(new EE(e),t.stallThreshold,n),bE(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function Dt(e){this.O=e,this.l=null,this.i=0,this.m=!1}s=Dt.prototype,s.getNumReferences=function(){return this.O.length},s.getNumEvicted=function(){return this.i},s.release=function(){this.m||(this.O=[],this.l&&this.l.stop(),this.l=null)},s.yi=function(){this.m=!0},s.Hb=function(e){for(var t=T(this.O),n=t.next();!n.done;n=t.next())e(n.value)},s.find=function(e){for(var t=this.O.length-1,n=t;0<=n;--n){var r=this.O[n],a=n<t?this.O[n+1].startTime:r.endTime;if(e>=r.startTime&&e<a)return n+this.i}return this.O.length&&e<this.O[0].startTime?this.i:null},s.get=function(e){return this.O.length==0?null:(e-=this.i,0>e||e>=this.O.length?null:this.O[e])},s.offset=function(e){if(!this.m)for(var t=T(this.O),n=t.next();!n.done;n=t.next())n.value.offset(e)},s.Zd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.O=this.O.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.O.push.apply(this.O,L(e))}},s.rd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.O.length==0||r.endTime>n.O[0].startTime)}),this.Zd(e),this.Ma(t)},s.Ma=function(e){if(!this.m){var t=this.O.length;this.O=this.O.filter(function(n){return n.endTime>e}),this.i+=t-this.O.length}},s.Bc=function(e,t,n){if(n=n===void 0?!1:n,!this.m){for(;this.O.length&&this.O[this.O.length-1].startTime>=t;)this.O.pop();for(;this.O.length&&this.O[0].endTime<=e;)this.O.shift(),n||this.i++;this.O.length!=0&&(e=this.O[this.O.length-1],t=new ut(e.startTime,t,e.F,e.Ha,e.sa,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.O[this.O.length-1]=t)}},s.ue=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new Et(function(){var r=t();r?n.O.push.apply(n.O,L(r)):(n.l.stop(),n.l=null)}),this.l.Sa(e))},Dt.prototype[Symbol.iterator]=function(){return this.Ib(0)},Dt.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var a=this.get(r);n?r++:r--;var l=-1;if(a&&0<a.g.length)for(var c=a.g.length-1;0<=c;--c){var d=a.g[c];if(e>=d.startTime&&e<d.endTime){if(!t){for(;c&&!d.l;)c--,d=a.g[c];if(!d.l)return Xe("No independent partial segment found!"),null}n?r--:r++,l=c-1;break}}return new Fi(this,r,l,n)};function ep(e,t,n){return e=new ut(e,e+t,function(){return n},0,null,null,e,e,e+t),new Dt([e])}me("shaka.media.SegmentIndex",Dt),Dt.forSingleSegment=ep,Dt.prototype.getIteratorForTime=Dt.prototype.Ib,Dt.prototype.updateEvery=Dt.prototype.ue,Dt.prototype.fit=Dt.prototype.Bc,Dt.prototype.evict=Dt.prototype.Ma,Dt.prototype.mergeAndEvict=Dt.prototype.rd,Dt.prototype.offset=Dt.prototype.offset,Dt.prototype.get=Dt.prototype.get,Dt.prototype.find=Dt.prototype.find,Dt.prototype.markImmutable=Dt.prototype.yi,Dt.prototype.release=Dt.prototype.release,Dt.prototype.getNumEvicted=Dt.prototype.getNumEvicted,Dt.prototype.getNumReferences=Dt.prototype.getNumReferences;function Fi(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Fi.prototype.Sc=function(e){this.reverse=e},Fi.prototype.Eh=function(){return this.h},Fi.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Fi.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},me("shaka.media.SegmentIterator",Fi),Fi.prototype.next=Fi.prototype.next,Fi.prototype.current=Fi.prototype.current,Fi.prototype.currentPosition=Fi.prototype.Eh,Fi.prototype.setReverse=Fi.prototype.Sc;function xn(){Dt.call(this,[]),this.g=[]}$(xn,Dt),s=xn.prototype,s.clone=function(){var e=new xn;return e.g=this.g.slice(),e},s.release=function(){for(var e=T(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},s.Hb=function(e){for(var t=T(this.g),n=t.next();!n.done;n=t.next())n.value.Hb(e)},s.find=function(e){for(var t=0,n=T(this.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=r.find(e);if(a!=null)return a+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},s.get=function(e){for(var t=0,n=T(this.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=r.get(e-t);if(a)return a;a=r.getNumReferences(),t+=r.getNumEvicted()+a}return null},s.offset=function(){},s.Zd=function(){},s.Ma=function(){},s.rd=function(){},s.Bc=function(){},s.ue=function(){},me("shaka.media.MetaSegmentIndex",xn),xn.prototype.updateEvery=xn.prototype.ue,xn.prototype.fit=xn.prototype.Bc,xn.prototype.mergeAndEvict=xn.prototype.rd,xn.prototype.evict=xn.prototype.Ma,xn.prototype.merge=xn.prototype.Zd,xn.prototype.offset=xn.prototype.offset,xn.prototype.get=xn.prototype.get,xn.prototype.find=xn.prototype.find,xn.prototype.forEachTopLevelReference=xn.prototype.Hb,xn.prototype.release=xn.prototype.release;function xu(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Nd(),this.h=new Et(function(){t.g.Lg(.25*t.i)})}xu.prototype.release=function(){this.set(this.hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},xu.prototype.set=function(e){this.i=e,m1(this)},xu.prototype.hc=function(){return this.g.hc()};function m1(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Nd()!=t&&e.g.Rf(t);return}catch{}e.h.Sa(.25),e.g.Nd()!=0&&e.g.Rf(0)}function g1(e){var t=this;this.h=e,this.g=new Set,this.i=new Et(function(){y1(t,!1)}).Sa(.25)}g1.prototype.release=function(){this.i.stop();for(var e=T(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function y1(e,t){for(var n=T(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function IE(){this.g=null,this.h=[]}function tp(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=T(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function ME(e){function t(l){return{timestamp:l.timestamp,state:l.state,duration:l.duration}}for(var n=[],r=T(e.h),a=r.next();!a.done;a=r.next())n.push(t(a.value));return e.g&&n.push(t(e.g)),n}function _E(){this.i=this.h=null,this.g=[]}function np(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function bf(){this.Cd=this.Hg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.U=this.Z=this.L=this.N=this.R=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new IE,this.h=new _E}function Ef(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function RE(e,t){e.l=t,e=T(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function wu(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.preload&&t.sa!=null&&(n=!1),t.Yb()==2&&(n=!1),n&&t.$&&v1(e,t.$),n&&!e.h.has(t)&&(n=new op(e.l),S1(n,t,e.i),e.h.set(t,n));ip(e)}}function v1(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(r){return jd(r,t)})){var n=new op(e.l);S1(n,t,e.i),e.j.set(t,n)}}function x1(e,t){t=T(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Su(e,n)}function _o(e){x1(e,e.h),x1(e,e.j),e.g=null}Ef.prototype.Ma=function(e,t){t=t===void 0?!1:t;for(var n=T(this.h.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&Su(this,r);t&&ip(this)},Ef.prototype.Sc=function(e){this.o=e,this.g&&this.g.Sc(e)};function ip(e){for(var t=Array.from(e.h.keys()),n=T(e.j.keys()),r=n.next(),a={};!r.done;a={nf:void 0},r=n.next())a.nf=r.value,t.some(function(l){return function(c){return jd(c.$,l.nf)}}(a))||Su(e,a.nf)}function w1(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&Su(e,r)}ip(e)}function LE(e,t){t&&t!==e.i&&(_o(e),e.i=t)}function Su(e,t){var n=e.h;t instanceof Ei&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function op(e){this.g=e,this.fe=this.Uf=null}function S1(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(a){return G(function(l){if(l.g==1)return 0<r.byteLength?r=vn(r,a):r=a,e.Uf?A(l,e.Uf(r),3):l.u(0);r=new Uint8Array(0),Y(l)})})}op.prototype.abort=function(){this.fe&&this.fe.abort()};function rp(e){Bt.call(this);var t=this;this.g=new Set,this.i=e,this.h=new Et(function(){for(var n=t.i(),r=T(t.g),a=r.next();!a.done;a=r.next())a=a.value,a.endTime<n.start&&(t.g.delete(a),a=new Fe("regionremove",new Map([["region",a]])),t.dispatchEvent(a))}).Sa(2)}$(rp,Bt),rp.prototype.release=function(){this.g.clear(),this.h.stop(),Bt.prototype.release.call(this)};function kf(e){Bt.call(this),this.g=new Map,this.h=e}$(kf,Bt),kf.prototype.release=function(){this.g.clear(),Bt.prototype.release.call(this)};function DE(e,t){var n=e.g.get(t);return n||(n={ud:[],Pe:null,contentType:t},e.g.set(t,n)),n}function PE(e,t,n){var r=DE(e,t.contentType);OE(e,r),e={Hc:t,position:n},r=r.ud,t=r.findIndex(function(a){return a.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}kf.prototype.j=function(e){for(var t=T(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.Pe;e:{for(var a=n.ud,l=a.length-1;0<=l;l--){var c=a[l];if(c.position<=e){a=c.Hc;break e}}a=null}l=a&&!(r===a||r&&a&&r.bandwidth==a.bandwidth&&r.audioSamplingRate==a.audioSamplingRate&&r.codecs==a.codecs&&r.contentType==a.contentType&&r.frameRate==a.frameRate&&r.height==a.height&&r.mimeType==a.mimeType&&r.channelsCount==a.channelsCount&&r.pixelAspectRatio==a.pixelAspectRatio&&r.width==a.width),c=a&&r&&a.label&&r.label&&r.label!==a.label;var d=a&&r&&a.language&&r.language&&r.language!==a.language;r=a&&r&&a.roles&&r.roles&&!pn(r.roles,a.roles),(c||d||r)&&C1(this,e,a.contentType)&&(n.Pe=a,r=new Fe("audiotrackchange",new Map([["quality",a],["position",e]])),this.dispatchEvent(r)),l&&C1(this,e,a.contentType)&&(n.Pe=a,JSON.stringify(a),n=new Fe("qualitychange",new Map([["quality",a],["position",e]])),this.dispatchEvent(n))}};function C1(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function OE(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,a=t.ud;t.ud=a.filter(function(l,c){return!(l.position<=n&&c+1<a.length&&a[c+1].position<=n||l.position>=r)})}else t.ud=[]}function Af(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function If(e){var t=ho(e),n=t.split("/")[0];return e=ji(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xd:null,colorGamut:null}}function NE(e,t){function n(O){_=O.name;var V=O.reader;V.skip(24);var Z=V.la(),te=V.la();V.skip(50),b=String(Z),C=String(te),O.reader.na()&&At(O)}function r(O){var V=Gy(O.reader);k=V.channelCount,E=V.sampleRate,a(O.name)}function a(O){switch(O=O.toLowerCase(),O){case"avc1":case"avc3":c.push(O+".42E01E"),p=!0;break;case"hev1":case"hvc1":c.push(O+".1.6.L93.90"),p=!0;break;case"dvh1":case"dvhe":c.push(O+".05.04"),p=!0;break;case"vp09":c.push(O+".00.10.08"),p=!0;break;case"av01":c.push(O+".0.01M.08"),p=!0;break;case"mp4a":l.push("mp4a.40.2"),d=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":l.push(O),d=!0}}var l=[],c=[],d=!1,p=!1,x=null,C=null,b=null,k=null,E=null,M=null,R=null,_;if(new Yt().box("moov",At).box("trak",At).box("mdia",At).S("mdhd",function(O){x=yf(O.reader,O.version).language}).box("minf",At).box("stbl",At).S("stsd",Sr).box("mp4a",function(O){var V=Gy(O.reader);k=V.channelCount,E=V.sampleRate,O.reader.na()?At(O):a(O.name)}).box("esds",function(O){O=O.reader;for(var V="mp4a",Z,te;O.na();){Z=O.T();for(var re=O.T();re&128;)re=O.T();if(Z==3)O.la(),re=O.T(),re&128&&O.la(),re&64&&O.skip(O.T()),re&32&&O.la();else if(Z==4)te=O.T(),O.skip(12);else if(Z==5)break}te&&(V+="."+mu(te),Z==5&&O.na()&&(Z=O.T(),te=(Z&248)>>3,te===31&&O.na()&&(te=32+((Z&7)<<3)+((O.T()&224)>>5)),V+="."+te)),l.push(V),d=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(O){var V=_||"";switch(_){case"dvav":V="avc3";break;case"dva1":V="avc1"}O=O.reader,O.skip(1),O=V+"."+mu(O.T())+mu(O.T())+mu(O.T()),c.push(O),p=!0}).box("hvcC",function(O){var V=_||"";switch(_){case"dvh1":V="hvc1";break;case"dvhe":V="hev1"}var Z=O.reader;Z.skip(1),O=Z.T();var te=["","A","B","C"][O>>6],re=O&31,de=Z.P(),se=(O&32)>>5?"H":"L";O=[Z.T(),Z.T(),Z.T(),Z.T(),Z.T(),Z.T()],Z=Z.T();for(var ae=0,he=0;32>he&&(ae|=de&1,he!=31);he++)ae<<=1,de>>=1;for(V=V+("."+te+re)+("."+mu(ae,!0)),V+="."+se+Z,te="",re=O.length;re--;)((se=O[re])||te)&&(te="."+se.toString(16).toUpperCase()+te);V+=te,c.push(V),p=!0}).box("dvcC",function(O){var V=_||"";switch(_){case"hvc1":V="dvh1";break;case"hev1":V="dvhe";break;case"avc1":V="dva1";break;case"avc3":V="dvav";break;case"av01":V="dav1"}var Z=O.reader;Z.skip(2),O=Z.T(),Z=Z.T(),c.push(V+"."+ki(O>>1&127)+"."+ki(O<<5&32|Z>>3&31)),p=!0}).box("dvvC",function(O){var V=_||"";switch(_){case"hvc1":V="dvh1";break;case"hev1":V="dvhe";break;case"avc1":V="dva1";break;case"avc3":V="dvav";break;case"av01":V="dav1"}var Z=O.reader;Z.skip(2),O=Z.T(),Z=Z.T(),c.push(V+"."+ki(O>>1&127)+"."+ki(O<<5&32|Z>>3&31)),p=!0}).S("vpcC",function(O){var V=_||"",Z=O.reader;O=Z.T();var te=Z.T();Z=Z.T()>>4&15,c.push(V+"."+ki(O)+"."+ki(te)+"."+ki(Z)),p=!0}).box("av1C",function(O){var V=_||"";switch(_){case"dav1":V="av01"}var Z=O.reader;Z.skip(1),O=Z.T(),Z=Z.T();var te=O>>>5,re=(Z&64)>>6;c.push(V+"."+te+"."+ki(O&31)+(Z>>>7?"H":"M")+"."+ki(te===2&&re?(Z&32)>>5?12:10:re?10:8)+"."+((Z&16)>>4)+"."+((Z&8)>>3)+((Z&4)>>2)+(Z&3)+"."+ki(1)+"."+ki(1)+"."+ki(1)+".0"),p=!0}).box("enca",_d).box("encv",bi).box("sinf",At).box("frma",function(O){O=Wy(O.reader).codec,a(O)}).box("colr",function(O){c=c.map(function(te){if(te.startsWith("av01.")){var re=O.reader,de=re.va(),se=re.qb(4),ae=String.fromCharCode(se[0]);if(ae+=String.fromCharCode(se[1]),ae+=String.fromCharCode(se[2]),ae+=String.fromCharCode(se[3]),ae==="nclx"){se=re.la(),ae=re.la();var he=re.la(),Se=re.T()>>7,ye=te.split(".");ye.length==10&&(ye[6]=ki(se),ye[7]=ki(ae),ye[8]=ki(he),ye[9]=String(Se),te=ye.join("."))}re.seek(de)}return te});var V=rE(O.reader),Z=V.colorGamut;M=V.xd,R=Z}).parse(e||t,!0),!l.length&&!c.length)return null;var j=d&&!p,U=new Map;if(p){var K=new dn("video/mp4");for(e&&K.init(e),K.i(t),e=T(K.j()),t=e.next();!t.done;t=e.next())t=t.value,U.set(t,t);K.g()}return{type:j?"audio":"video",mimeType:j?"audio/mp4":"video/mp4",codecs:sp(l.concat(c)).join(", "),language:x,height:C,width:b,channelCount:k,sampleRate:E,closedCaptions:U,xd:M,colorGamut:R}}function sp(e){var t=new Set,n=[];e=T(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var a=As(r);t.has(a)||(n.push(r),t.add(a))}return t=yd("audio",n),r=yd("video",n),e=yd(_t,n),r=UE(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function UE(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?Ne('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function BE(e){var t=null;return new Yt().box("moov",At).box("trak",At).box("mdia",At).box("minf",At).box("stbl",At).S("stsd",Sr).box("encv",bi).box("enca",_d).box("sinf",At).box("schi",At).S("tenc",function(n){n=n.reader,n.T(),n.T(),n.T(),n.T(),t=qo(n.qb(16))}).parse(e,!0),t}function ap(e,t,n){var r,a,l,c,d;return G(function(p){if(p.g==1)return r=t,r.cryptoKey?p.u(2):A(p,r.fetchKey(),3);if(a=r.iv,!a)for(a=Me(new ArrayBuffer(16)),l=r.firstMediaSequenceNumber+n,c=a.byteLength-1;0<=c;c--)a[c]=l&255,l>>=8;return t.blockCipherMode=="CBC"?d={name:"AES-CBC",iv:a}:d={name:"AES-CTR",counter:a,length:64},p.return(h.crypto.subtle.decrypt(d,r.cryptoKey,e))})}function Gs(e,t,n,r,a){return e=Hn(e,r,a),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function T1(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.m=new Os(function(){return jE(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}s=T1.prototype,s.destroy=function(){return this.m.destroy()};function jE(e){var t,n,r,a,l,c,d;return G(function(p){if(p.g==1){for(t=[],n=T(e.i.values()),r=n.next();!r.done;r=n.next())a=r.value,Cu(a),t.push(Tu(a)),a.W&&(_o(a.W),a.W=null);for(l=T(e.o.values()),c=l.next();!c.done;c=l.next())d=c.value,_o(d);return A(p,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,Y(p)})}s.configure=function(e){if(this.h=e,this.I=new ey({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(_o(t.W),t.W=null),t=T(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,_o(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(_t))&&t.W&&(_o(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(_o(t.W),t.W=null),t=T(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(w1(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(_o(n.W),n.W=null)):0<e.segmentPrefetchLimit&&(n.W=up(this,n.stream));e.disableAudioPrefetch||GE(this)};function FE(e,t,n){e.l.presentationTimeline.V()||(e.N=t,e.L=n)}s.start=function(e){var t=this;return G(function(n){if(n.g==1)return A(n,HE(t,e||new Map),2);qt(t.m),t.C=!0,Y(n)})};function $E(e,t){var n,r,a,l,c,d;G(function(p){switch(p.g){case 1:return n=Ln,e.H++,r=e.H,Q(p,2),A(p,Jy(e.g.aa,n.ua),4);case 4:q(p,3);break;case 2:a=W(p),e.g&&e.g.onError(a);case 3:l=Dn(t.mimeType,t.codecs),wf(e.g.aa,l,e.l.sequenceMode,t.external),c=e.g.aa.F,(c.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(d=k1(e,t),e.i.set(n.ua,d),Qi(e,d,0)),Y(p)}})}function zE(e){var t=e.i.get(_t);t&&(Cu(t),Tu(t).catch(function(){}),e.i.delete(_t)),e.s=null}function b1(e,t){for(var n=0>e.g.eb(),r=T(e.i.values()),a=r.next();!a.done;a=r.next())a=a.value,a.ia&&a.ia.Sc(n),a.W&&a.W.Sc(n);for(r=T(e.o.values()),a=r.next();!a.done;a=r.next())a.value.Sc(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.rc&&(Ws(e,t,!1,0,!1),n.rc=r):(t=n.rc)&&(n.rc=null,Ws(e,t,!0,0,!1)))}function E1(e,t,n,r,a,l){n=n===void 0?!1:n,r=r===void 0?0:r,a=a===void 0?!1:a,l=l===void 0?!1:l,e.j=t,e.C&&(t.video&&Ws(e,t.video,n,r,a,l),t.audio&&Ws(e,t.audio,n,r,a,l))}function Mf(e,t){G(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):A(n,t.createSegmentIndex(),2):n.return();Ws(e,t,!0,0,!1),Y(n)})}function Ws(e,t,n,r,a,l){var c=e.i.get(t.type);c||t.type!=_t?c&&(c.rc&&(t.trickModeVideo?(c.rc=t,t=t.trickModeVideo):c.rc=null),c.stream!=t||a)&&(e.o.has(t)?c.W=e.o.get(t):c.W&&LE(c.W,t),t.type==_t&&(a=Dn(t.mimeType,t.codecs),wf(e.g.aa,a,e.l.sequenceMode,t.external)),e.o.has(c.stream)||c.stream.closeSegmentIndex&&c.stream.closeSegmentIndex(),c.stream=t,c.ia=null,c.hg=!!l,n?c.Vc?c.Be=!0:c.Qa?(c.cc=!0,c.Hd=r,c.Be=!0):(Cu(c),hp(e,c,!0,r).catch(function(d){e.g&&e.g.onError(d)})):c.Qa||c.sb||Qi(e,c,0),VE(e,c).catch(function(d){e.g&&e.g.onError(d)})):$E(e,t)}function VE(e,t){var n,r;return G(function(a){if(a.g==1)return t.ib?(n=t.stream,r=t.ib,n.segmentIndex?a.u(2):A(a,n.createSegmentIndex(),2)):a.return();if(t.ib!=r||t.stream!=n)return a.return();var l=e.g.Md(),c=vu(e.g.aa,t.type),d=t.stream.segmentIndex.find(t.Na?t.Na.endTime:l),p=d==null?null:t.stream.segmentIndex.get(d);d=p&&p.sa?p.sa-p.Ha:null,p&&!d&&(d=(p.endTime-p.getStartTime())*(t.stream.bandwidth||0)/8),d?((p=p.$)&&(d+=(p.sa?p.sa-p.Ha:null)||0),p=e.g.getBandwidthEstimate(),l=8*d/p<(c||0)-l-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.ib.h.g>d):l=!1,l&&t.ib.abort(),Y(a)})}s.Qc=function(){if(this.g)for(var e=this.g.Md(),t=T(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var a=this.g.aa;if(a.C?a=!1:r==_t?(a=a.g,a=a.g==null||a.h==null?!1:e>=a.g&&e<a.h):(a=$s(a,r),a=$d(a,e)),!a){if(n.W&&(n.W.g=null),n.type==="audio"){a=T(this.o.values());for(var l=a.next();!l.done;l=a.next())l.value.g=null}n.ia=null,(vu(this.g.aa,r)!=null||n.Qa)&&_f(this,n),n.ib&&(n.ib.abort(),n.ib=null),r===_t&&(r=this.g.aa,r.H&&r.H.g()),n.Qc=!0}}};function _f(e,t){t.Vc||t.cc||(t.Qa?(t.cc=!0,t.Hd=0):qd(e.g.aa,t.type)==null?t.sb==null&&Qi(e,t,0):(Cu(t),hp(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function HE(e,t){var n,r,a,l,c,d,p,x,C,b;return G(function(k){if(k.g==1){if(n=Ln,!e.j)throw new ne(2,5,5006);return r=new Map,a=new Set,e.j.audio&&(r.set(n.X,e.j.audio),a.add(e.j.audio)),e.j.video&&(r.set(n.ga,e.j.video),a.add(e.j.video)),e.s&&(r.set(n.ua,e.s),a.add(e.s)),l=e.g.aa,A(k,l.init(r,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(qt(e.m),e.updateDuration(),c=T(r.keys()),d=c.next();!d.done;d=c.next())p=d.value,x=r.get(p),e.i.has(p)||(C=k1(e,x),t.has(x.id)&&(b=t.get(x.id),RE(b,function(E,M,R){return Rf(E,M,R||null,e.h.retryParameters,e.g.Lb)}),C.W=b),e.i.set(p,C),Qi(e,C,0));Y(k)})}function k1(e,t){return{stream:t,type:t.type,ia:null,W:up(e,t),Na:null,lc:null,Vd:null,Ud:null,Td:null,rc:null,endOfStream:!1,Qa:!1,sb:null,cc:!1,Hd:0,Be:!1,Vc:!1,Qc:!0,Gf:!1,fd:!1,ib:null}}function up(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===_t&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===_t&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new Ef(e.h.segmentPrefetchLimit,t,function(r,a,l){return Rf(r,a,l||null,e.h.retryParameters,e.g.Lb)},0>e.g.eb()):null}function GE(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=T(e.l.variants),a=r.next(),l={};!a.done;l={lb:void 0},a=r.next())if(l.lb=a.value,l.lb.audio)if(e.o.has(l.lb.audio)){if(a=e.o.get(l.lb.audio),w1(a,t),!(0<t&&n.some(function(d){return function(p){return Is(d.lb.audio.language,p)}}(l)))){var c=e.i.get(l.lb.audio.type);a!==(c&&c.W)&&_o(a),e.o.delete(l.lb.audio)}}else 0>=t||!n.some(function(d){return function(p){return Is(d.lb.audio.language,p)}}(l))||!(a=up(e,l.lb.audio))||(l.lb.audio.segmentIndex||l.lb.audio.createSegmentIndex(),e.o.set(l.lb.audio,a))}s.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.aa.Za(e):this.g.aa.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function WE(e,t){var n,r,a,l,c,d;return G(function(p){switch(p.g){case 1:if(qt(e.m),t.Qa||t.sb==null||t.Vc)return p.return();if(t.sb=null,!t.cc){p.u(2);break}return A(p,hp(e,t,t.Be,t.Hd),3);case 3:return p.return();case 2:if(t.stream.segmentIndex){p.u(4);break}return n=t.stream,Q(p,5),A(p,t.stream.createSegmentIndex(),7);case 7:q(p,6);break;case 5:return r=W(p),A(p,dp(e,t,r),8);case 8:return p.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.sb||Qi(e,t,0),p.return();case 4:Q(p,9),a=XE(e,t),a!=null&&(Qi(e,t,a),t.fd=!1),q(p,10);break;case 9:return l=W(p),A(p,dp(e,t,l),11);case 11:return p.return();case 10:if(c=Array.from(e.i.values()),!e.C||!c.every(function(x){return x.endOfStream})){p.u(0);break}return A(p,e.g.aa.endOfStream(),13);case 13:qt(e.m),d=e.g.aa.getDuration(),d!=0&&d<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(d),Y(p)}})}function XE(e,t){if(fp(t))return pE(e.g.aa,t.stream.originalId||""),null;if(t.type==_t&&mE(e.g.aa),!e.g.aa.xa&&t.type!=_t)return e.h.updateIntervalSeconds/2;var n=e.g.Md();if(t.type==="audio")for(var r=T(e.o.keys()),a=r.next();!a.done;a=r.next())a=e.o.get(a.value),a.Ma(n,!0),wu(a,n);r=t.Na?t.Na.endTime:n;var l=hE(e.g.aa,t.type,n),c=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),d=e.l.presentationTimeline.getDuration()-r;if(a=vu(e.g.aa,t.type),1e-6>d&&a)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(_t))&&fp(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,l>=c)return e.h.updateIntervalSeconds/2;if(c=!t.ia,a=qE(e,t,n,a),!a)return e.h.updateIntervalSeconds;l=!1,c&&t.hg&&(l=!0,t.hg=!1),c=1/0,d=Array.from(e.i.values()),d=T(d);for(var p=d.next();!p.done;p=d.next())p=p.value,fp(p)||p.ia&&!p.ia.current()||(c=Math.min(c,p.Na?p.Na.endTime:n));return r>=c+e.l.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.ia&&!e.o.has(t.stream)&&(t.W.Ma(a.startTime),wu(t.W,a.startTime)),KE(e,t,n,a,l).catch(function(){}),null)}function qE(e,t,n,r){var a=t.ia?t.ia.current():null;if(a)return a;if(t.Na||r)return t.ia=t.stream.segmentIndex.Ib(t.Na?t.Na.endTime:r,!1,0>e.g.eb()),t.ia&&t.ia.next().value;r=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance,a=Math.max(n-r,0),e=0>e.g.eb();var l=null;return r&&(t.ia=t.stream.segmentIndex.Ib(a,!1,e),l=t.ia&&t.ia.next().value),l||(t.ia=t.stream.segmentIndex.Ib(n,!1,e),l=t.ia&&t.ia.next().value),l}function KE(e,t,n,r,a){var l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O;return G(function(V){switch(V.g){case 1:if(l=Ln,c=t.stream,d=t.ia,t.Qa=!0,Q(V,2),r.Yb()==2)throw new ne(1,1,1011);return A(V,ZE(e,t,r,a),4);case 4:return qt(e.m),e.A?V.return():(p=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",x=h.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&x&&p&&(e.l.type!="HLS"||r.m)?(k=new Uint8Array(0),M=E=!1,_=function(Z){var te,re,de;return G(function(se){switch(se.g){case 1:if(E||(M=!0,qt(e.m),e.A))return se.return();if(Q(se,2),k=YE(k,Z),te=!1,re=0,new Yt().box("mdat",function(ae){re=ae.size+ae.start,te=!0}).parse(k,!1,!0),!te){se.u(4);break}return de=k.subarray(0,re),k=k.subarray(re),A(se,lp(e,t,n,c,r,de,!0,a),5);case 5:t.W&&t.ia&&wu(t.W,r.startTime,!0);case 4:q(se,0);break;case 2:R=W(se),Y(se)}})},A(V,cp(e,t,r,_),9)):(C=cp(e,t,r),A(V,C,7)));case 7:return b=V.h,qt(e.m),e.A?V.return():(qt(e.m),t.cc?(t.Qa=!1,Qi(e,t,0),V.return()):A(V,lp(e,t,n,c,r,b,!1,a),6));case 9:if(j=V.h,R)throw R;if(M){V.u(10);break}return E=!0,qt(e.m),e.A?V.return():t.cc?(t.Qa=!1,Qi(e,t,0),V.return()):A(V,lp(e,t,n,c,r,j,!1,a),10);case 10:t.W&&t.ia&&wu(t.W,r.startTime,!0);case 6:if(qt(e.m),e.A)return V.return();t.Na=r,d.next(),t.Qa=!1,t.Gf=!1,U=e.g.aa.wb(),K=U[t.type],JSON.stringify(K),t.cc||e.g.Af(r,t.stream),Qi(e,t,0),q(V,0);break;case 2:if(O=W(V),qt(e.m,O),e.A)return V.return();if(t.Qa=!1,O.code==7001)t.Qa=!1,Cu(t),Qi(e,t,0),V.u(0);else if(t.type==l.ua&&e.h.ignoreTextStreamFailures)e.i.delete(l.ua),V.u(0);else if(O.code==3017)QE(e,t,O),V.u(0);else return t.fd=!0,O.category==1&&t.W&&Su(t.W,r),O.severity=2,A(V,dp(e,t,O),0)}})}function YE(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function QE(e,t,n){if(!Array.from(e.i.values()).some(function(a){return a!=t&&a.Gf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.fd=!0,e.A=!0,e.g.onError(n);return}t.Gf=!0}Qi(e,t,4)}function ZE(e,t,n,r){var a,l,c,d,p,x,C,b,k,E,M,R,_,j,U;return G(function(K){switch(K.g){case 1:if(a=Ln,l=t.Na==null&&t.lc==null,c=[],d=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),p=Math.min(n.appendWindowEnd,e.L)+.01,x=As(n.codecs||t.stream.codecs),C=ho(n.mimeType||t.stream.mimeType),b=n.timestampOffset,b==t.Vd&&d==t.Ud&&p==t.Td&&x==t.tf&&C==t.uf){K.u(2);break}if(k=t.tf&&t.uf&&CE(e.g.aa,t.type,C,x),!k){K.u(3);break}if(E=null,t.type===a.ga?E=e.i.get(a.X):t.type===a.X&&(E=e.i.get(a.ga)),!E){K.u(3);break}return A(K,Tu(E).catch(function(){}),5);case 5:E.lc=null,_f(e,E);case 3:return A(K,A1(e,t,b,d,p,n,x,C),2);case 2:return jd(n.$,t.lc)||(t.lc=n.$,n.l&&n.$&&(M=cp(e,t,n.$),R=function(){var O,V,Z,te,re,de,se;return G(function(ae){switch(ae.g){case 1:return Q(ae,2),A(ae,M,4);case 4:return O=ae.h,qt(e.m),V=null,Z=new Map,te={projection:null,hfov:null},re=new Yt,re.box("moov",At).box("trak",At).box("mdia",At).S("mdhd",function(he){V=yf(he.reader,he.version).timescale}).box("hdlr",function(he){switch(he=he.reader,he.skip(8),he.oc()){case"soun":Z.set(a.X,V);break;case"vide":Z.set(a.ga,V)}V=null}).box("minf",At).box("stbl",At).S("stsd",Sr).box("encv",bi).box("avc1",bi).box("avc3",bi).box("hev1",bi).box("hvc1",bi).box("dvav",bi).box("dva1",bi).box("dvh1",bi).box("dvhe",bi).box("dvc1",bi).box("dvi1",bi).box("vexu",At).box("proj",At).S("prji",function(he){he=he.reader.oc(),te.projection=he}).box("hfov",function(he){he=he.reader.P()/1e3,te.hfov=he}).parse(O),tk(e,te),Z.has(t.type)?n.$.timescale=Z.get(t.type):V!=null&&(n.$.timescale=V),de=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,A(ae,e.g.kg(t.type,O),5);case 5:return A(ae,Sf(e.g.aa,t.type,O,null,t.stream,de,t.Qc,r),6);case 6:q(ae,0);break;case 2:throw se=W(ae),t.lc=null,se}})},_=n.startTime,l&&(j=vu(e.g.aa,t.type),j!=null&&(_=j)),e.g.Ai(_,n.$),c.push(R()))),e.l.sequenceMode&&(U=t.Na?t.Na.i:null,n.i!=U&&c.push(yE(e.g.aa,t.type,n.startTime))),A(K,Promise.all(c),0)}})}function A1(e,t,n,r,a,l,c,d){var p,x,C,b;return G(function(k){if(k.g==1)return p=Ln,x=new Map,e.j.audio&&x.set(p.X,e.j.audio),e.j.video&&x.set(p.ga,e.j.video),Q(k,2),t.Ud=r,t.Td=a,c&&(t.tf=c),d&&(t.uf=d),t.Vd=n,C=e.l.sequenceMode||e.l.type=="HLS",A(k,gE(e.g.aa,t.type,n,r,a,C,l.mimeType||t.stream.mimeType,l.codecs||t.stream.codecs,x),4);if(k.g!=2)return q(k,0);throw b=W(k),t.Ud=null,t.Td=null,t.tf=null,t.uf=null,t.Vd=null,b})}function lp(e,t,n,r,a,l,c,d){c=c===void 0?!1:c,d=d===void 0?!1:d;var p,x,C,b,k,E,M,R;return G(function(_){switch(_.g){case 1:return p=r.closedCaptions&&0<r.closedCaptions.size,C=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,b=e.h.parsePrftBox&&!e.F,k=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",E=null,a.$&&(E=a.$.timescale),M=k&&E&&r.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(C||b||M)&&(x=new Yt),C&&x.S("emsg",function(j){var U=r.emsgSchemeIdUris;if(j.version===0)var K=j.reader.oc(),O=j.reader.oc(),V=j.reader.P(),Z=j.reader.P(),te=j.reader.P(),re=j.reader.P(),de=a.startTime+Z/V;else V=j.reader.P(),de=j.reader.Nc()/V+a.timestampOffset,Z=de-a.startTime,te=j.reader.P(),re=j.reader.P(),K=j.reader.oc(),O=j.reader.oc();j=j.reader.qb(j.reader.getLength()-j.reader.va()),(U&&U.includes(K)||e.h.dispatchAllEmsgBoxes)&&(K=="urn:mpeg:dash:event:2012"?e.g.Bi():(U=de+te/V,V=new Map().set("detail",{startTime:de,endTime:U,schemeIdUri:K,value:O,timescale:V,presentationTimeDelta:Z,eventDuration:te,id:re,messageData:j}),V=new Fe("emsg",V),V.cancelable=!0,e.g.onEvent(V),!V.defaultPrevented&&(K=="https://aomedia.org/emsg/ID3"||K=="https://developer.apple.com/streaming/emsg-id3")&&(K=Jr(j),K.length)&&e.g.onMetadata([{cueTime:de,data:j,frames:K,dts:de,pts:de}],0,U)))}),b&&x.S("prft",function(j){if(!e.F&&a.$.timescale){var U=j.reader,K=j.version;U.P(),j=U.P();var O=U.P();j=1e3*j+O/Math.pow(2,32)*1e3,K===0?U=U.P():(K=U.P(),U=U.P(),U=K*Math.pow(2,32)+U),j=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+j).getTime(),U=new Map().set("detail",{wallClockTime:j,programStartDate:new Date(j-U/a.$.timescale*1e3)}),U=new Fe("prft",U),e.g.onEvent(U),e.F=!0}}),M&&x.box("moof",At).box("traf",At).S("tfdt",function(j){var U,K,O,V,Z,te;return G(function(re){return U=gf(j.reader,j.version),K=U.baseMediaDecodeTime,K?(O=-K/E,V=Number(t.Vd)||0,V<O?(Z=t.Ud,te=t.Td,A(re,A1(e,t,O,Z,te,a),0)):re.u(0)):re.return()})}),(C||b||M)&&x.parse(l,!1,c),A(_,JE(e,t,n),2);case 2:return qt(e.m),R=t.Qc,t.Qc=!1,A(_,e.g.kg(t.type,l),3);case 3:return A(_,Sf(e.g.aa,t.type,l,a,r,p,R,d,c),4);case 4:qt(e.m),Y(_)}})}function JE(e,t,n){var r,a,l,c;return G(function(d){if(d.g==1)return r=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),a=qd(e.g.aa,t.type),a==null?d.return():(l=n-a,c=l-r,c<=e.h.evictionGoal?d.return():A(d,e.g.aa.remove(t.type,a,a+c),2));qt(e.m),Y(d)})}function fp(e){return e&&e.type==_t&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function cp(e,t,n,r){var a,l,c,d,p;return G(function(x){switch(x.g){case 1:if(a=n.cd())return x.return(a);if(l=null,t.W){var C=t.W,b=C.h;n instanceof Ei&&(b=C.j),b.has(n)?(C=b.get(n),r&&(C.Uf=r),l=C.fe):l=null}return l||(l=Rf(n,t.stream,r||null,e.h.retryParameters,e.g.Lb)),c=0,t.ia&&(c=t.ia.h),t.ib=l,A(x,l.promise,2);case 2:if(d=x.h,t.ib=null,p=d.data,!n.aesKey){x.u(3);break}return A(x,ap(p,n.aesKey,c),4);case 4:p=x.h;case 3:return x.return(p)}})}function Rf(e,t,n,r,a){var l=e instanceof ut?e:void 0,c=l?1:0;return e=Gs(e.M(),e.Ha,e.sa,r,n),e.contentType=t.type,a.request(Mo,e,{type:c,stream:t,segment:l})}function hp(e,t,n,r){var a,l;return G(function(c){if(c.g==1)return t.cc=!1,t.Be=!1,t.Hd=0,t.Vc=!0,t.Na=null,t.ia=null,t.W&&!e.o.has(t.stream)&&_o(t.W),r?(a=e.g.Md(),l=e.g.aa.getDuration(),A(c,e.g.aa.remove(t.type,a+r,l),3)):A(c,Jy(e.g.aa,t.type),4);if(c.g!=3)return qt(e.m),n?A(c,e.g.aa.flush(t.type),3):c.u(3);qt(e.m),t.Vc=!1,t.endOfStream=!1,t.Qa||t.sb||Qi(e,t,0),Y(c)})}function Qi(e,t,n){var r=t.type;(r!=_t||e.i.has(r))&&(t.sb=new eu(function(){var a;return G(function(l){if(l.g==1)return Q(l,2),A(l,WE(e,t),4);if(l.g!=2)return q(l,0);a=W(l),e.g&&e.g.onError(a),Y(l)})}).Y(n))}function Cu(e){e.sb!=null&&(e.sb.stop(),e.sb=null)}function Tu(e){return G(function(t){return e.ib?A(t,e.ib.abort(),0):t.u(0)})}function dp(e,t,n){var r;return G(function(a){if(a.g==1)return A(a,ty(e.I),2);qt(e.m),n.category===1&&(r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)),(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),Y(a)})}function ek(e){var t,n,r,a,l,c;return G(function(d){return d.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?d.return(!1):(e.K=t,r=Ln,(a=e.i.get(r.X))&&(a.lc=null,_f(e,a),Tu(a).catch(function(){})),(l=e.i.get(r.ga))&&(l.lc=null,_f(e,l),Tu(l).catch(function(){})),c=new Map,e.j.audio&&c.set(r.X,e.j.audio),e.j.video&&c.set(r.ga,e.j.video),A(d,t1(e.g.aa,c),2))):d.return(!0)})}function tk(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Fe("spatialvideoinfo",n)}else n=new Fe("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function Lf(){}function pp(e,t,n,r,a){var l=a in r,c=l?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,d=l||c,p=!0,x;for(x in t){var C=a+"."+x,b=l?r[a]:n[x];d||x in n?t[x]===void 0?b===void 0||d?delete e[x]:e[x]=jo(b):c?e[x]=t[x]:b.constructor==Object&&t[x]&&t[x].constructor==Object?(e[x]||(e[x]=jo(b)),C=pp(e[x],t[x],b,r,C),p=p&&C):typeof t[x]!=typeof b||t[x]==null||typeof t[x]!="function"&&t[x].constructor!=b.constructor?(Xe("Invalid config, wrong type for "+C),p=!1):(typeof n[x]=="function"&&n[x].length!=t[x].length&&He("Unexpected number of arguments for "+C),e[x]=t[x]):(Xe("Invalid config, unrecognized key "+C),p=!1)}return p}function Df(e,t){for(var n={},r=n,a=0,l=0;a=e.indexOf(".",a),!(0>a);)(a==0||e[a-1]!="\\")&&(l=e.substring(l,a).replace(/\\\./g,"."),r[l]={},r=r[l],l=a+1),a+=1;return r[e.substring(l).replace(/\\\./g,".")]=t,n}function Xs(e,t){return e&&t}function I1(e,t){function n(c){for(var d=T(Object.keys(c)),p=d.next();!p.done;p=d.next())p=p.value,l(c[p])&&Object.keys(c[p]).length===0||a(c[p])||typeof c[p]=="function"?delete c[p]:l(c[p])&&(n(c[p]),Object.keys(c[p]).length===0&&delete c[p])}function r(c,d){return Object.keys(c).reduce(function(p,x){var C=c[x];return d.hasOwnProperty(x)?l(C)&&l(d[x])?(C=r(C,d[x]),(0<Object.keys(C).length||!l(C))&&(p[x]=C)):a(C)&&a(d[x])||Number.isNaN(C)&&Number.isNaN(d[x])||C!==d[x]&&(p[x]=C):p[x]=C,p},{})}function a(c){return Array.isArray(c)&&c.length===0}function l(c){return c&&typeof c=="object"&&!Array.isArray(c)}return e=r(e,t),n(e),e}me("shaka.util.ConfigUtils",Lf),Lf.getDifferenceFromConfigObjects=I1,Lf.convertToConfigObject=Df,Lf.mergeConfigObjects=pp;function Zi(){}function M1(e){return e=Xo(e),new Tn(e).Eb}function bu(e,t,n){function r(d){Qt(l).setUint32(c,d.byteLength,!0),c+=4,l.set(Me(d),c),c+=d.byteLength}if(!n||!n.byteLength)throw new ne(2,6,6015);var a;typeof t=="string"?a=md(t,!0):a=t,e=Xo(e),e=md(e,!0);var l=new Uint8Array(12+e.byteLength+a.byteLength+n.byteLength),c=0;return r(e),r(a),r(n),l}function _1(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Xo(e).split("skd://").pop(),bu(e,n,t))}function mp(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}me("shaka.util.FairPlayUtils",Zi),Zi.commonFairPlayResponse=function(e,t){if(e===2){try{var n=nn(t.data)}catch{return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch{}e&&(t.data=yn(Yi(n)))}},Zi.expressplayFairPlayRequest=function(e,t){mp(e,t)},Zi.conaxFairPlayRequest=function(e,t){mp(e,t)},Zi.ezdrmFairPlayRequest=function(e,t){mp(e,t)},Zi.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Me(t.body),e=Gr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ao("spc="+e))},Zi.expressplayInitDataTransform=function(e,t,n){return _1(e,t,n)},Zi.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Xo(e).split("skd://").pop().split("?").shift(),n=h.atob(n);var r=new ArrayBuffer(2*n.length);r=$e(r);for(var a=0,l=n.length;a<l;a++)r[a]=n.charCodeAt(a);return bu(e,r,t)},Zi.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Xo(e).split(";").pop(),bu(e,n,t))},Zi.verimatrixInitDataTransform=function(e,t,n){return _1(e,t,n)},Zi.initDataTransform=bu,Zi.defaultGetContentId=M1,Zi.isFairPlaySupported=function(){var e;return G(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},Q(t,2),A(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(W(t),t.return(!1))})};function gp(){}function qs(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:Io(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(C,b,k){return Yl()&&b=="skd"&&(b=k.serverCertificate,k=M1(C),C=bu(C,k,b)),C},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Oo(),minHdcpVersion:"",ignoreDuplicateInitData:!Gl()};(Oo()||Bo())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;Gl()||iu()||Wt("Tizen 4")||Wt("Tizen 5")||Wt("Tizen 6")||Wl()||Uo()&&cd()===53||Uo()&&cd()===68||!(!Bi()||Bi()&&Kl()||Bi()&&Wt("Fuchsia"))||dd()&&nu()||(n="smooth",r=!0),r={retryParameters:Io(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Pf,manifestPreprocessorTXml:Of,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(iu()||Gl()||Wl()||Bo()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Pf,manifestPreprocessorTXml:Of,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var a={retryParameters:Io(),failureCallback:function(C){return Xs([C])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Bo()||Xl(),dontChooseCodecs:!1,shouldFixTimestampOffset:Uo()||No()};(Uo()||No()||Bi()||ql())&&(a.stallSkip=0);var l={trackSelectionCallback:function(C){return G(function(b){return b.return(C)})},downloadSizeCallback:function(C){var b;return G(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?A(k,navigator.storage.estimate(),3):k.return(!0):(b=k.h,k.return(b.usage+C<.95*b.quota))})},progressCallback:function(C,b){return Xs([C,b])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:Cs()?.5:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(C){return Xs([C],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(C,b){return Xs([C,b])}};var c=!1,d=!1,p=!0;Cg()&&(d=c=!0,p=!1);var x={drm:t,manifest:r,streaming:a,mediaSource:n,offline:l,abrFactory:function(){return new sn},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:c,skipPlayDetection:d,supportsMultipleMediaElements:p}};return l.trackSelectionCallback=function(C){return G(function(b){return b.return(nk(C,x.preferredAudioLanguage,x.preferredVideoHdrLevel))})},x}function Er(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return pp(e,t,n||qs(),r,"")}function nk(e,t,n){var r=n;r=="AUTO"&&(r=h.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var a=e.filter(function(d){return!(d.type!="variant"||d.hdr&&d.hdr!=r)});n=[];var l=Zl(t,a.map(function(d){return d.language}));l&&(n=a.filter(function(d){return $t(d.language)==l})),n.length==0&&(n=a.filter(function(d){return d.primary})),n.length==0&&(a.map(function(d){return d.language}),n=a);var c=n.filter(function(d){return d.height&&480>=d.height});for(c.length&&(c.sort(function(d,p){return p.height-d.height}),n=c.filter(function(d){return d.height==c[0].height})),t=[],n.length&&(a=Math.floor(n.length/2),n.sort(function(d,p){return d.bandwidth-p.bandwidth}),t.push(n[a])),e=T(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=_t&&n.type!="image"||t.push(n);return t}function Pf(e){return Xs([e],e)}function Of(e){return Xs([e],e)}me("shaka.util.PlayerConfiguration",gp),gp.mergeConfigObjects=Er,gp.createDefault=qs;function ir(e,t,n,r){Bt.call(this),this.L=e,this.U=t,this.xa=r.networkingEngine,this.A=n,this.o=null,this.qa=0,this.Fa=r.yc,this.C=r.vi,this.ab=r.wi,this.g=r.config,this.j=this.F=this.h=null,this.ea=!1,this.G=r.Fi,this.oa=!1,this.l=null,this.da=!1,this.i=this.B=null,this.ba=!1,this.K=new Map,this.pa=!1,this.za=r.Ei,this.Z=new bf,this.m=new Xt,this.N=null,this.s=!1,this.Da=r.yh,this.fa=null,this.Ea=r.xh,this.R=!1,this.I=[],this.H=[]}$(ir,Bt);function Eu(e,t,n){(e=t?e.H:e.I)?e.push(n):n()}function ik(e){if(e.H)for(var t=T(e.H),n=t.next();!n.done;n=t.next())n=n.value,n();e.H=null}function R1(e,t){if(e.N=t,e.R=!0,e.I){t=T(e.I);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.I=null}s=ir.prototype,s.getStartTime=function(){return this.A},s.Dc=function(){return this.L},s.gf=function(){return this.h};function ok(e){return e.ba=!0,e.i}function rk(e){return e.ea=!0,e.j}function sk(e){return e.oa=!0,e.G}s.getStats=function(){return this.Z};function ak(e){return e.da=!0,e.l}function uk(e){return e.pa=!0,e.K}s.start=function(){var e=this;(function(){var t;return G(function(n){switch(n.g){case 1:return A(n,Promise.resolve(),2);case 2:return Q(n,3),A(n,lk(e),5);case 5:return ku(e),A(n,fk(e),6);case 6:if(ku(e),e.o||(e.o=new Rs(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Ea){var r=e.g.abrFactory;e.B=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Da){r=e.h.presentationTimeline.V();var a=tf(e.h.variants);a=e.o.create(a),e.i.configure(e.g.abr),e.i.setVariants(Array.from(a.values())),(a=e.i.chooseVariant())&&(e.fa=a,a.video&&L1(e,a.video,r),a.audio&&L1(e,a.audio,r))}return A(n,void 0,7);case 7:ku(e),e.m.resolve(),q(n,0);break;case 3:t=W(n),e.m.reject(t),Y(n)}})})()},s.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Bt.prototype.dispatchEvent.call(this,e)},s.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Fe("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function ku(e){if(e.s)throw new ne(2,7,7003)}function yp(e,t){e.dispatchEvent(new Fe("onstatechange",new Map().set("state",t)))}function lk(e){var t,n,r,a;return G(function(l){if(l.g==1)return yp(e,"manifest-parser"),e.j||(e.F=Ny(e.L,e.U),e.j=e.F(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,yp(e,"manifest"),e.h?l.u(2):A(l,e.j.start(e.L,e.ab),3);if(l.g!=2&&(e.h=l.h),n=new Fe("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new ne(2,4,4036);ck(e.h),r=Date.now()/1e3,a=r-t,e.Z.H=a,Y(l)})}function fk(e){var t,n,r,a,l;return G(function(c){switch(c.g){case 1:yp(e,"drm-engine"),e.qa=Date.now()/1e3,e.l=e.Fa(),e.C.g=e.l,e.l.configure(e.g.drm);var d=e.C;if(t=Ug(e.h.variants,d.h.restrictions,d.i),!t){c.u(2);break}return n=new Fe("trackschanged",void 0),A(c,Promise.resolve(),3);case 3:ku(e),e.dispatchEvent(n);case 2:return r=tf(e.h.variants),A(c,wy(e.l,r,e.h.offlineSessionIds),4);case 4:return ku(e),A(c,Ly(e.C,e.h),5);case 5:if(a=c.h,!a){c.u(0);break}return l=new Fe("trackschanged",void 0),A(c,Promise.resolve(),7);case 7:e.dispatchEvent(l),Y(c)}})}s.configure=function(e,t){e=Df(e,t),Er(this.g,e)},s.getConfiguration=function(){return jo(this.g)};function L1(e,t,n){var r,a,l,c,d;G(function(p){if(p.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,a=new Ef(r,t,function(x,C,b){return Rf(x,C,b||null,e.g.streaming.retryParameters,e.xa)},!1),e.K.set(t.id,a),A(p,t.createSegmentIndex(),2);l=e.A||0,(d=(c=t.segmentIndex.Ib(l))?c.current():null)||(d=t.segmentIndex.get(0)),d&&(n?d.$&&v1(a,d.$):wu(a,d.startTime)),Y(p)})}s.fj=function(){return this.m},s.destroy=function(){var e=this,t,n,r;return G(function(a){switch(a.g){case 1:if(e.s=!0,!e.j||e.ea){a.u(2);break}return A(a,e.j.stop(),2);case 2:if(!e.i||e.ba){a.u(4);break}return A(a,e.i.stop(),4);case 4:if(e.G&&!e.oa&&e.G.release(),!e.l||e.da){a.u(6);break}return A(a,e.l.destroy(),6);case 6:if(0<e.K.size&&!e.pa)for(t=T(e.K.values()),n=t.next();!n.done;n=t.next())r=n.value,_o(r);Y(a)}})};function ck(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}me("shaka.media.PreloadManager",ir),ir.prototype.destroy=ir.prototype.destroy,ir.prototype.waitForFinish=ir.prototype.fj;function Nf(e,t){Bt.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wc:null,vc:Ks,jc:function(r,a){return es(n,"enter",r,a)}},{wc:Au,vc:Ks,jc:function(r,a){return es(n,"enter",r,a)}},{wc:Iu,vc:Ks,jc:function(r,a){return es(n,"enter",r,a)}},{wc:Ks,vc:Au,jc:function(r,a){return es(n,"exit",r,a)}},{wc:Ks,vc:Iu,jc:function(r,a){return es(n,"exit",r,a)}},{wc:Au,vc:Iu,jc:function(r,a){return es(n,"skip",r,a)}},{wc:Iu,vc:Au,jc:function(r,a){return es(n,"skip",r,a)}}],this.h=new Ae,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}$(Nf,Bt),Nf.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Bt.prototype.release.call(this)},Nf.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=T(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=this.g.get(r),l=e<r.startTime?Au:e>r.endTime?Iu:Ks;this.g.set(r,l);for(var c=T(this.m),d=c.next();!d.done;d=c.next())d=d.value,d.wc==a&&d.vc==l&&d.jc(r,t)}}};function es(e,t,n,r){t=new Fe(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var Au=1,Ks=2,Iu=3;function vp(e,t,n){var r,a,l,c,d,p,x;return G(function(C){switch(C.g){case 1:var b=new Tn(e).Pa.split("/").pop().split(".");return r=b.length==1?"":b.pop().toLowerCase(),(a=hk[r])?C.return(a):(l=0,c=Hn([e],n),Q(C,2),c.method="HEAD",A(C,t.request(l,c).promise,4));case 4:d=C.h,a=d.headers["content-type"],q(C,3);break;case 2:if(p=W(C),!p||p.code!=1002&&p.code!=1001){C.u(3);break}return c.method="GET",A(C,t.request(l,c).promise,6);case 6:x=C.h,a=x.headers["content-type"];case 3:return C.return(a?a.toLowerCase().split(";").shift():"")}})}var hk={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function D1(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(c){return D1(c,e)}).join("");var n=[],r=700<=e.fontWeight,a=e.fontStyle=="italic",l=e.textDecoration.includes("underline");return r&&n.push(["b"]),a&&n.push(["i"]),l&&n.push(["u"]),a=e.color,a==""&&t&&(a=t.color),r="",(a=P1(a))&&(r+="."+a),a=e.backgroundColor,a==""&&t&&(a=t.backgroundColor),(t=P1(a))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(c,d){var p=T(d);return d=p.next().value,p=p.next().value,"<"+d+(p===void 0?"":p)+">"+c+"</"+d+">"},e.payload)}function P1(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function xp(e,t){var n=[];e=T(O1(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,L(xp(r.nestedCues,r)));else{var a=r.clone();a.nestedCues=[],a.payload=D1(r,t),n.push(a)}return n}function O1(e){var t=[];e=T(e);for(var n=e.next(),r={};!n.done;r={Me:void 0},n=e.next())r.Me=n.value,t.some(function(a){return function(l){return Cn(a.Me,l)}}(r))||t.push(r.Me);return t}function dk(e){function t(r){for(var a=5381,l=r.length;l;)a=33*a^r.charCodeAt(--l);return(a>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Ii(e,t){this.g=null;for(var n=T(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.kind!=="metadata"&&r.kind!=="chapters"&&(r.mode="disabled",r.label==t&&(this.g=r));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}s=Ii.prototype,s.configure=function(){},s.remove=function(e,t){return this.g?(N1(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},s.append=function(e){var t=xp(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=T(t);for(var r=t.next(),a={};!r.done;a={hd:void 0},r=t.next())a.hd=r.value,e.some(function(l){return function(c){return c.startTime==l.hd.startTime&&c.endTime==l.hd.endTime&&c.text==l.hd.payload}}(a))||(r=dk(a.hd))&&n.push(r);for(e=n.slice().sort(function(l,c){return l.startTime!=c.startTime?l.startTime-c.startTime:l.endTime!=c.endTime?l.endTime-c.startTime:"line"in VTTCue.prototype?n.indexOf(c)-n.indexOf(l):n.indexOf(l)-n.indexOf(c)}),e=T(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},s.destroy=function(){return this.g&&(N1(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},s.isTextVisible=function(){return this.g.mode=="showing"},s.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function N1(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=T(Array.from(e.cues)),a=r.next();!a.done;a=r.next())(a=a.value)&&t(a)&&e.removeCue(a);e.mode=n}me("shaka.text.SimpleTextDisplayer",Ii),Ii.prototype.setTextVisibility=Ii.prototype.setTextVisibility,Ii.prototype.isTextVisible=Ii.prototype.isTextVisible,Ii.prototype.destroy=Ii.prototype.destroy,Ii.prototype.append=Ii.prototype.append,Ii.prototype.remove=Ii.prototype.remove,Ii.prototype.configure=Ii.prototype.configure;function Mi(){}s=Mi.prototype,s.configure=function(){},s.remove=function(){},s.append=function(){},s.destroy=function(){},s.isTextVisible=function(){return!1},s.setTextVisibility=function(){},me("shaka.text.StubTextDisplayer",Mi),Mi.prototype.setTextVisibility=Mi.prototype.setTextVisibility,Mi.prototype.isTextVisible=Mi.prototype.isTextVisible,Mi.prototype.destroy=Mi.prototype.destroy,Mi.prototype.append=Mi.prototype.append,Mi.prototype.remove=Mi.prototype.remove,Mi.prototype.configure=Mi.prototype.configure;function U1(){}function Ys(e){for(;e.firstChild;)e.removeChild(e.firstChild)}me("shaka.util.Dom",U1),U1.removeAllChildren=Ys;function _i(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||Tt("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new Et(function(){r.A.paused||Qs(r)}).Sa(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Ae,this.j.D(document,"fullscreenchange",function(){Qs(r,!0)}),this.j.D(this.A,"seeking",function(){Qs(r,!0)}),this.j.D(this.A,"resize",function(){var a=r.A,l=a.videoWidth;a=a.videoHeight,l&&a?r.l=l/a:r.l=null}),this.o=null,"ResizeObserver"in h&&(this.o=new ResizeObserver(function(){Qs(r,!0)}),this.o.observe(this.g)),this.B=new Map}s=_i.prototype,s.configure=function(e){this.C&&this.C.Sa(e.captionsUpdatePeriod)},s.append=function(e){var t=[].concat(L(this.h));e=T(O1(e));for(var n=e.next(),r={};!n.done;r={Ne:void 0},n=e.next())r.Ne=n.value,t.some(function(a){return function(l){return Cn(l,a.Ne)}}(r))||this.h.push(r.Ne);Qs(this)},s.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},s.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),Qs(this,n>this.h.length),!0},s.isTextVisible=function(){return this.m},s.setTextVisibility=function(e){this.m=e};function pk(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function B1(e,t,n,r,a){var l=!1,c=[],d=[];t=T(t);for(var p=t.next();!p.done;p=t.next()){p=p.value,a.push(p);var x=e.i.get(p),C=p.startTime<=r&&p.endTime>r,b=x?x.qh:null;x&&(c.push(x.Oe),x.qc&&c.push(x.qc),C||(l=!0,e.i.delete(p),x=null)),C&&(d.push(p),x?pk(e,b)||(l=!0):(mk(e,p,a),x=e.i.get(p),b=x.qh,l=!0)),0<p.nestedCues.length&&b&&B1(e,p.nestedCues,b,r,a),a.pop()}if(l){for(r=T(c),a=r.next();!a.done;a=r.next())a=a.value,a.parentElement&&a.parentElement.removeChild(a);for(d.sort(function(k,E){return k.startTime!=E.startTime?k.startTime-E.startTime:k.endTime-E.endTime}),d=T(d),r=d.next();!r.done;r=d.next())r=e.i.get(r.value),r.qc?(r.qc.contains(n)&&r.qc.removeChild(n),n.appendChild(r.qc),r.qc.appendChild(r.Oe)):n.appendChild(r.Oe)}}function Qs(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=T(e.B.values());for(var r=t.next();!r.done;r=t.next())Ys(r.value);Ys(e.g),e.i.clear(),e.B.clear()}e.m&&B1(e,e.h,e.g,n,[])}}function mk(e,t,n){var r=1<n.length,a=r?"span":"div";t.lineBreak&&(a="br"),t.rubyTag&&(a=t.rubyTag),r=!r&&0<t.nestedCues.length;var l=document.createElement(a);if(a!="br"&&yk(e,l,t,n,r),n=null,t.region&&t.region.id){var c=t.region,d=e.l===4/3?2.5:1.9;if(n=c.id+"_"+c.width+"x"+c.height+(c.heightUnits==Ct?"%":"px")+"-"+c.viewportAnchorX+"x"+c.viewportAnchorY+(c.viewportAnchorUnits==Ct?"%":"px"),e.B.has(n))n=e.B.get(n);else{a=document.createElement("span");var p=c.heightUnits==Ct?"%":"px",x=c.widthUnits==Ct?"%":"px",C=c.viewportAnchorUnits==Ct?"%":"px";a.id="shaka-text-region---"+n,a.classList.add("shaka-text-region"),a.style.position="absolute";var b=c.height,k=c.width;c.heightUnits===2&&(b=5.33*c.height,p="%"),c.widthUnits===2&&(k=c.width*d,x="%"),a.style.height=b+p,a.style.width=k+x,c.viewportAnchorUnits===2?(d=c.viewportAnchorY/75*100,p=c.viewportAnchorX/(e.l===4/3?160:210)*100,d-=c.regionAnchorY*b/100,p-=c.regionAnchorX*k/100,a.style.top=d+"%",a.style.left=p+"%"):(a.style.top=c.viewportAnchorY-c.regionAnchorY*b/100+C,a.style.left=c.viewportAnchorX-c.regionAnchorX*k/100+C),c.heightUnits!==0&&c.widthUnits!==0&&c.viewportAnchorUnits!==0&&(c=Math.max(0,Math.min(100-(parseInt(a.style.width.slice(0,-1),10)||0),parseInt(a.style.left.slice(0,-1),10)||0)),a.style.top=Math.max(0,Math.min(100-(parseInt(a.style.height.slice(0,-1),10)||0),parseInt(a.style.top.slice(0,-1),10)||0))+"%",a.style.left=c+"%"),a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,a),n=a}}a=l,r&&(a=document.createElement("span"),a.classList.add("shaka-text-wrapper"),a.style.backgroundColor=t.backgroundColor,a.style.lineHeight="normal",l.appendChild(a)),e.i.set(t,{Oe:l,qh:a,qc:n})}function gk(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==To?n:e==="left"||e==="start"&&t===bo||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===bo?"line-right":"center"}function yk(e,t,n,r,a){var l=t.style,c=n.nestedCues.length==0,d=1<r.length;l.whiteSpace="pre-wrap";var p=n.payload.replace(/\s+$/g,function(C){return" ".repeat(C.length)});if(l.webkitTextStrokeColor=n.textStrokeColor,l.webkitTextStrokeWidth=n.textStrokeWidth,l.color=n.color,l.direction=n.direction,l.opacity=n.opacity,l.paddingLeft=wp(n.linePadding,n,e.s),l.paddingRight=wp(n.linePadding,n,e.s),l.textCombineUpright=n.textCombineUpright,l.textShadow=n.textShadow,n.backgroundImage)l.backgroundImage="url('"+n.backgroundImage+"')",l.backgroundRepeat="no-repeat",l.backgroundSize="contain",l.backgroundPosition="center",n.backgroundColor&&(l.backgroundColor=n.backgroundColor),l.width="100%",l.height="100%";else{if(n.nestedCues.length)var x=t;else x=document.createElement("span"),t.appendChild(x);n.border&&(x.style.border=n.border),!a&&((t=j1(r,function(C){return C.backgroundColor}))?x.style.backgroundColor=t:p&&(x.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=j1(r,function(C){return C.fontFamily}))&&(x.style.fontFamily=t),p&&(x.textContent=p)}d&&!r[r.length-1].isContainer?l.display="inline":(l.display="flex",l.flexDirection="column",l.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(l.width="100%",l.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(l.width="100%",l.alignItems="end"),l.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),c||(l.margin="0"),l.fontFamily=n.fontFamily,l.fontWeight=n.fontWeight.toString(),l.fontStyle=n.fontStyle,l.letterSpacing=n.letterSpacing,l.fontSize=wp(n.fontSize,n,e.s),r=n.line,r!=null&&(c=n.lineInterpretation,c==fo&&(c=1,d=16,e.l&&1>e.l&&(d=32),r=0>r?100+r/d*100:r/d*100),c==1&&(l.position="absolute",n.writingMode==Ci?(l.width="100%",n.lineAlign==Eo?l.top=r+"%":n.lineAlign=="end"&&(l.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(l.height="100%",n.lineAlign==Eo?l.left=r+"%":n.lineAlign=="end"&&(l.right=100-r+"%")):(l.height="100%",n.lineAlign==Eo?l.right=r+"%":n.lineAlign=="end"&&(l.left=100-r+"%")))),l.lineHeight=n.lineHeight,e=gk(n),e=="line-left"?(l.cssFloat="left",n.position!==null&&(l.position="absolute",n.writingMode==Ci?(l.left=n.position+"%",l.width="auto"):l.top=n.position+"%")):e=="line-right"?(l.cssFloat="right",n.position!==null&&(l.position="absolute",n.writingMode==Ci?(l.right=100-n.position+"%",l.width="auto"):l.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(l.position="absolute",n.writingMode==Ci?(l.left=n.position+"%",l.width="auto"):l.top=n.position+"%"),l.textAlign=n.textAlign,l.textDecoration=n.textDecoration.join(" "),l.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&l.writingMode==n.writingMode||(l.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Ci?l.width=n.size+"%":l.height=n.size+"%")}function wp(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var a=r.value;switch(r.unit){case"%":return a/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*a/t.cellResolution.rows+"px";default:return e}}function j1(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}me("shaka.text.UITextDisplayer",_i),_i.prototype.setTextVisibility=_i.prototype.setTextVisibility,_i.prototype.isTextVisible=_i.prototype.isTextVisible,_i.prototype.remove=_i.prototype.remove,_i.prototype.destroy=_i.prototype.destroy,_i.prototype.append=_i.prototype.append,_i.prototype.configure=_i.prototype.configure;function vk(e,t){function n(l){for(var c=l,d=T(t),p=d.next();!p.done;p=d.next())p=p.value,p.end&&p.start<l&&(c+=p.end-p.start);return l=Math.floor(c/3600),d=Math.floor(c/60%60),p=Math.floor(c%60),c=Math.floor(1e3*c%1e3),(10>l?"0":"")+l+":"+(10>d?"0":"")+d+":"+(10>p?"0":"")+p+"."+(100>c?10>c?"00":"0":"")+c}var r=xp(e);e=`WEBVTT

`,r=T(r);for(var a=r.next();!a.done;a=r.next())a=a.value,e+=n(a.startTime)+" --> "+n(a.endTime)+function(l){var c=[];switch(l.textAlign){case"left":c.push("align:left");break;case"right":c.push("align:right");break;case lt:c.push("align:middle");break;case"start":c.push("align:start");break;case"end":c.push("align:end")}switch(l.writingMode){case"vertical-lr":c.push("vertical:lr");break;case"vertical-rl":c.push("vertical:rl")}return c.length?" "+c.join(" "):""}(a)+`
`,e+=a.payload+`

`;return e}me("shaka.text.WebVttGenerator",function(){});function F1(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}F1.prototype.configure=function(e){this.g=e};function xk(e){e.i=!1,e.l=!0,e.j=!1}function wk(e,t,n){try{if(!e.g.enabled)return t;var r=Sp(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var a=Bf;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":a=Ff;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":a=z1;break e}a=void 0}r.ot=a,r.su=!0;var l=Uf(r);return Cp(t,l)}catch(c){return Pe("CMCD_SRC_ERROR","Could not generate src CMCD data.",c),t}}function Sp(e){return e.g.sessionId||(e.g.sessionId=h.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function Zs(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,Sp(e)),n.pr=e.h.eb();var a=n.ot===jf||n.ot===Ff;if(e.j&&a&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=Sk(e,n),r)r=Ek(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var l=Uf(e);l&&(t.uris=t.uris.map(function(c){return Cp(c,l)}))}}}function Sk(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,a){return n.includes(a)&&(r[a]=t[a]),r},{}):t}function Ck(e){if(e.type===0)return kk;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Ff:jf;if(t=="audio")return Bf;if(t=="text")return e.mimeType==="application/mp4"?$f:Tp}}function Tk(e,t){if(t=e.h.wb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function $1(e,t){if(t=e.h.wb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function bk(e,t){var n=e.h.ic();if(!n.length)return NaN;e=n[0],n=T(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case jf:return e.videoBandwidth||NaN;case Bf:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Uf(e){function t(b){return 100*n(b/100)}function n(b){return Math.round(b)}function r(b){return!Number.isNaN(b)&&b!=null&&b!==""&&b!==!1}var a=[],l={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(b){return encodeURIComponent(b)},rtp:t,tb:n},c=Object.keys(e||{}).sort();c=T(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var p=e[d];if(r(p)&&(d!=="v"||p!==1)&&(d!="pr"||p!==1)){var x=l[d];x&&(p=x(p)),x=typeof p;var C=void 0;C=x==="string"&&d!=="ot"&&d!=="sf"&&d!=="st"?d+"="+JSON.stringify(p):x==="boolean"?d:x==="symbol"?d+"="+p.description:d+"="+p,a.push(C)}}return a.join(",")}function Ek(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],a=[{},{},{},{}],l={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=T(t);for(var c=t.next();!c.done;c=t.next())c=c.value,a[l[c]!=null?l[c]:1][c]=e[c];for(e=0;e<a.length;e++)(l=Uf(a[e]))&&(n["CMCD-"+r[e]]=l);return n}function Cp(e,t){return!t||e.includes("offline:")?e:(e=new Tn(e),e.g.set("CMCD",t),e.toString())}var z1="m",Bf="a",jf="v",Ff="av",kk="i",Tp="c",$f="tt";me("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Kj:"s",OTHER:"o"});function Ji(e){this.h=e,this.g=null}s=Ji.prototype,s.configure=function(e){this.h=e},s.zg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(G1)?1e3*this.g.get(G1):null},s.xg=function(){return this.h.enabled&&this.g&&this.g.has(H1)?1e3*this.g.get(H1):null},s.Yh=function(){return this.h.enabled&&this.g&&this.g.has(W1)?this.g.get(W1):null},s.Zh=function(){return this.h.enabled&&this.g&&this.g.has(X1)?this.g.get(X1):null},s.getBandwidthEstimate=function(e){var t=this.xg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function V1(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}me("shaka.util.CmsdManager",Ji),Ji.prototype.getBandwidthEstimate=Ji.prototype.getBandwidthEstimate,Ji.prototype.getRoundTripTime=Ji.prototype.Zh,Ji.prototype.getResponseDelay=Ji.prototype.Yh,Ji.prototype.getEstimatedThroughput=Ji.prototype.xg,Ji.prototype.getMaxBitrate=Ji.prototype.zg;var H1="etp",G1="mb",W1="rd",X1="rtt";function q1(){this.g=null,this.h=[]}function bp(e,t){return G(function(n){if(n.g==1)return e.g?A(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,Y(n)})}q1.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function we(e,t){Bt.call(this);var n=this;this.l=Pp,this.de=this.h=null,this.oa=!1,this.qe=new Ae,this.gd=new Ae,this.m=new Ae,this.Fa=new Ae,this.ub=new Ae,this.C=this.G=this.B=this.H=null,this.te=0,this.Z=new q1,this.pa=this.ag=this.da=this.i=this.ab=this.F=this.j=this.Zc=this.K=this.eg=this.ea=this.N=this.dd=this.L=this.he=this.I=this.Fb=null,this.Ea=!1,this.xa=this.o=null,this.cg=1e9,this.qd=[],this.U=NaN,this.g=or(this),this.R=null,this.ze=-1,this.Da=null,this.fa={width:1/0,height:1/0},this.be=new Ud(this.g,this.fa,null),this.ke=[],this.s=null,this.za=new Rs(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Db=this.g.preferredTextLanguage,this.pd=this.g.preferredTextRole,this.od=this.g.preferForcedSubs,this.md=[],t&&t(this),this.N=jk(this),this.ea=new Ji(this.g.cmsd),this.H=tv(this),this.H.Pf(this.g.streaming.forceHTTP),this.H.Qf(this.g.streaming.forceHTTPS),this.Gb=this.ba=this.A=null,this.Ce=!1,this.dg=new Et(function(){return G(function(r){if(r.g==1)return n.ba?A(r,n.Rb(n.Gb,!0),3):r.u(0);if(r.g!=4)return A(r,n.load(n.ba),4);n.Ce?n.Gb.pause():n.Gb.play(),n.ba=null,n.Ce=!1,Y(r)})}),Xf&&(this.A=Xf(),this.A.configure(this.g.ads),this.ub.D(this.A,"ad-content-pause-requested",function(r){var a;return G(function(l){if(l.g==1)return n.dg.stop(),n.ba?l.u(0):(n.Gb=n.h,n.Ce=n.h.ended,a=r.saveLivePosition||!1,A(l,n.qg(!0,a),3));n.ba=l.h,Y(l)})}),this.ub.D(this.A,"ad-content-resume-requested",function(r){if(r=r.offset||0,n.ba){var a=n.ba;a.A&&r&&(a.A+=r)}n.dg.Y(.1)}),this.ub.D(this.A,"ad-content-attach-requested",function(){return G(function(r){return n.h||!n.Gb?r.u(0):A(r,n.Rb(n.Gb,!0),0)})})),this.qe.D(h,"online",function(){Rp(n),n.If()}),this.je=new Et(function(){for(var r=Date.now()/1e3,a=!1,l=!0,c=T(n.i.variants),d=c.next();!d.done;d=c.next())d=d.value,0<d.disabledUntilTime&&d.disabledUntilTime<=r&&(d.disabledUntilTime=0,a=!0),0<d.disabledUntilTime&&(l=!1);l&&n.je.stop(),a&&ea(n,!1,void 0,!1,!1)}),this.qa=null,e&&(Tt("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Rb(e,!0))}$(we,Bt);function zf(e){e.K!=null&&(qy(e.K),e.K.release(),e.K=null)}function Ak(e,t){t.lcevc.enabled?(zf(e),e.K==null&&(e.K=new yu(e.h,e.eg,t.lcevc),e.G&&(e.G.Z=e.K))):zf(e)}function on(e,t){return new Fe(e,t)}s=we.prototype,s.destroy=function(){var e=this,t;return G(function(n){switch(n.g){case 1:return e.l==Ro?n.return():(zf(e),t=e.detach(),e.l=Ro,A(n,t,2));case 2:return A(n,e.Qe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.gd&&(e.gd.release(),e.gd=null),e.m&&(e.m.release(),e.m=null),e.Fa&&(e.Fa.release(),e.Fa=null),e.ub&&(e.ub.release(),e.ub=null),e.xa=null,e.g=null,e.s=null,e.de=null,e.N=null,e.ea=null,!e.H){n.u(4);break}return A(n,e.H.destroy(),5);case 5:e.H=null;case 4:e.o&&(e.o.release(),e.o=null),Bt.prototype.release.call(e),Y(n)}})};function Js(e,t){e.dispatchEvent(on("onstatechange",new Map().set("state",t)))}s.Rb=function(e,t){t=t===void 0?!0:t;var n=this,r,a,l;return G(function(c){switch(c.g){case 1:if(n.l==Ro)throw new ne(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){c.u(2);break}return A(c,n.detach(),2);case 2:return A(c,Ep(n,"attach"),4);case 4:if(c.h)return c.return();if(Q(c,5,6),r||(Js(n,"attach"),a=function(){var d=Lp(n,!1);d&&ta(n,d)},n.gd.D(e,"error",a),n.h=e),!t||!ko()||n.G){c.u(6);break}return A(c,kp(n),6);case 6:ie(c),n.Z.release(),ue(c,0);break;case 5:return l=W(c),A(c,n.detach(),10);case 10:throw l}})},s.zh=function(e){this.eg=e},s.detach=function(e){e=e===void 0?!1:e;var t=this;return G(function(n){if(n.g==1){if(t.l==Ro)throw new ne(2,7,7e3);return A(n,t.bc(!1,e),2)}if(n.g!=3)return A(n,Ep(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.gd.Ra(),t.h=null),Js(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Z.release()}Y(n)})};function Ep(e,t){var n;return G(function(r){return r.g==1?(n=++e.te,A(r,bp(e.Z,t),2)):n!=e.te?(e.Z.release(),r.return(!0)):r.return(!1)})}s.bc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,a,l,c,d,p,x,C,b,k;return G(function(E){switch(E.g){case 1:return n.l!=Ro&&(n.l=Pp),A(E,Ep(n,"unload"),2);case 2:return E.h?E.return():(ee(E,3),n.Ea=!1,Js(n,"unload"),e&&!ko()&&(e=!1),zf(n),r=n.md.map(function(M){return M()}),n.md=[],A(E,Promise.all(r),5));case 5:if(n.dispatchEvent(on("unloading")),n.dd&&(n.dd.release(),n.dd=null),n.h&&(n.m.Ra(),n.Fa.Ra()),n.je.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.he&&(n.he.stop(),n.he=null),!n.F){E.u(6);break}return A(E,n.F.stop(),7);case 7:n.F=null,n.ab=null;case 6:if(!n.o){E.u(8);break}return A(E,n.o.stop(),8);case 8:if(!n.j){E.u(10);break}return A(E,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.I&&(n.I.release(),n.I=null),n.C&&(n.C.release(),n.C=null),!Yl("webkit")||!n.B){E.u(12);break}return A(E,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.G){E.u(14);break}return A(E,n.G.destroy(),15);case 15:n.G=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.dg.stop(),n.N&&xk(n.N),n.ea&&(n.ea.g=null),n.h&&Ys(n.h),!n.h||!n.h.src){E.u(16);break}return A(E,new Promise(function(M){return new Et(M).Y(.1)}),17);case 17:n.h.removeAttribute("src"),n.h.load();case 16:if(!n.B){E.u(18);break}return A(E,n.B.destroy(),19);case 19:n.B=null;case 18:if(n.qa&&n.da!=n.qa.Dc()&&(n.qa.s||n.qa.destroy(),n.qa=null),n.da=null,n.ag=null,n.L=null,n.i){for(a=T(n.i.variants),l=a.next();!l.done;l=a.next())for(c=l.value,d=T([c.audio,c.video]),p=d.next();!p.done;p=d.next())(x=p.value)&&x.segmentIndex&&x.segmentIndex.release();for(C=T(n.i.textStreams),b=C.next();!b.done;b=C.next())k=b.value,k.segmentIndex&&k.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(Xg={},Hl.clear()),n.i=null,n.s=new bf,n.bg=null,n.Da=null,n.R=null,n.ze=-1,n.qd=[],n.U=NaN,_p(n);case 3:ie(E),n.Z.release(),ue(E,4);break;case 4:if(e&&ko()&&!n.G&&n.h)return A(E,kp(n),0);E.u(0)}})},s.ej=function(e){this.pa=e},s.load=function(e,t,n){t=t===void 0?null:t;var r=this,a,l,c,d,p,x,C,b,k,E,M,R,_;return G(function(j){switch(j.g){case 1:if(r.l==Ro)throw new ne(2,7,7e3);return a=null,l="",e instanceof ir?(a=e,l=a.Dc()||""):l=e||"",A(j,bp(r.Z,"load"),2);case 2:if(r.Z.release(),!r.h)throw new ne(2,7,7002);if(!r.da){j.u(3);break}return r.da=l,A(j,r.bc(!1),3);case 3:if(c=++r.te,d=function(){return G(function(U){if(U.g==1)return r.te==c?U.u(0):a?A(U,a.destroy(),3):U.u(3);throw new ne(2,7,7e3)})},p=function(U,K){return G(function(O){switch(O.g){case 1:return ee(O,2),A(O,bp(r.Z,K),4);case 4:return A(O,d(),5);case 5:return A(O,U(),6);case 6:return A(O,d(),7);case 7:a&&r.g&&(a.g=r.g);case 2:ie(O),r.Z.release(),ue(O,0)}})},Q(j,5,6),t==null&&a&&(t=a.getStartTime()),r.pa=t,r.Ea=!1,r.dispatchEvent(on("loading")),a){n=a.U,j.u(8);break}if(n){j.u(8);break}return A(j,p(function(){return G(function(U){if(U.g==1)return A(U,Z1(r,l),2);n=U.h,Y(U)})},"guessMimeType_"),8);case 8:if(x=!!a,a){R1(a,r),r.s=a.getStats(),j.u(11);break}return A(j,Y1(r,l,t,n,!0),12);case 12:(a=j.h)?(R1(a,r),r.s=a.getStats(),a.start(),a.m.catch(function(){})):r.s=new bf;case 11:if(C=!a,b=Date.now()/1e3,r.s=a?a.getStats():new bf,r.da=l,r.ag=n||null,C)return A(j,p(function(){return G(function(U){return A(U,Rk(r,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(r.G){j.u(15);break}return A(j,p(function(){return G(function(U){return A(U,kp(r),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return A(j,p(function(){return G(function(U){return A(U,a.m,0)})},"waitForFinish"),17);case 17:return r.g=a.getConfiguration(),r.be=a.C,r.ab=a.F,r.F=rk(a),r.F&&r.F.setMediaElement&&r.h&&r.F.setMediaElement(r.h),r.dd=sk(a),r.Zc=a.za,r.i=a.gf(),(k=a.o)&&(r.za=k),x&&r.h&&r.h.nodeName==="AUDIO"&&(Ik(r),r.configure("manifest.disableVideo",!0)),r.B=ak(a),A(j,p(function(){return G(function(U){return A(U,r.B.Rb(r.h),0)})},"drmEngine_.attach"),18);case 18:return!(E=a.B)||r.xa&&r.xa==E||(r.o=ok(a),r.xa=a.B,typeof r.o.setMediaElement!="function"&&(Tt("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(Tt("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(Tt("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),M=uk(a),R=a.fa,A(j,p(function(){return G(function(U){return A(U,_k(r,b,R,M),0)})},"loadInner_"),19);case 19:ik(a),j.u(14);break;case 20:return A(j,p(function(){return G(function(U){return A(U,Lk(r,b,n),0)})},"srcEqualsInner_"),14);case 14:r.dispatchEvent(on("loaded"));case 6:if(ie(j),!a){j.u(22);break}return A(j,a.destroy(),22);case 22:r.qa=null,ue(j,0);break;case 5:if(_=W(j),!_||_.code==7e3){j.u(24);break}return A(j,r.bc(!1),24);case 24:throw _}})};function Ik(e){for(var t=T(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}s.aj=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r;return G(function(a){return a.g==1?A(a,K1(n),2):a.g!=3?(r=a.h,A(a,n.bc(e,t),3)):a.return(r)})},s.qg=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return G(function(a){return a.g==1?A(a,K1(n,t),2):a.g!=3?(r=a.h,A(a,n.detach(e),3)):a.return(r)})};function K1(e,t){t=t===void 0?!1:t;var n,r;return G(function(a){if(a.g==1)return n=null,e.i&&e.F&&e.ab&&e.da?(r=e.h.currentTime,e.V()&&!t&&(r=null),A(a,Q1(e,e.da,r,e.ag,!0,!1,!1),3)):a.u(2);if(a.g!=2){n=a.h,e.ke.push(n),e.F&&e.F.setMediaElement&&e.F.setMediaElement(null);var l=n,c=e.F,d=e.ab;l.h=e.i,l.j=c,l.F=d,l=n,c=e.xa,l.i=e.o,l.B=c,n.o=e.za,n.start(),e.i=null,e.F=null,e.ab=null,e.o=null,e.xa=null}return a.return(n)})}s.preload=function(e,t,n){t=t===void 0?null:t;var r=this,a;return G(function(l){return l.g==1?A(l,Y1(r,e,t,n),2):((a=l.h)?a.start():ta(r,new ne(2,7,7005)),l.return(a))})},s.Qe=function(){var e=this,t,n,r,a;return G(function(l){for(t=[],n=T(e.ke),r=n.next();!r.done;r=n.next())a=r.value,a.s||t.push(a.destroy());return e.ke=[],A(l,Promise.all(t),0)})};function Y1(e,t,n,r,a){a=a===void 0?!1:a;var l,c,d;return G(function(p){return p.g==1?r?p.u(2):A(p,Z1(e,t),3):(p.g!=2&&(r=p.h),Mk(e,r)?p.return(null):(l=!1,c=!0,a&&(e.o&&e.xa==e.g.abrFactory&&(c=!1),e.h&&e.h.nodeName==="AUDIO"&&(l=!0)),d=Q1(e,t,n,r||null,!a,l,c),a||(d=d.then(function(x){return e.ke.push(x),x})),p.return(d)))})}function Q1(e,t,n,r,a,l,c){a=a===void 0?!0:a,l=l===void 0?!1:l,c=c===void 0?!0:c;var d,p,x,C,b,k,E,M,R,_,j,U,K,O,V;return G(function(Z){return Z.g==1?(d=null,p=jo(e.g),l&&(p.manifest.disableVideo=!0),x=function(){return d.R&&d.s?null:d},C=function(){return x()?x().getConfiguration():e.g},b=function(te,re){x()?d.configure(te,re):e.configure(te,re)},e.fa.width!=1/0||e.fa.height!=1/0?Z.u(2):A(Z,bg(),3)):(Z.g!=2&&(k=Z.h,e.fa.width=k.width,e.fa.height=k.height),E=new Ud(p,e.fa,null),M={networkingEngine:e.H,filter:function(te){var re,de;return G(function(se){if(se.g==1)return A(se,Ly(E,te),2);if(se.g!=4)return re=se.h,re?(de=on("trackschanged"),A(se,Promise.resolve(),4)):se.u(0);d.dispatchEvent(de),Y(se)})},makeTextStreamsForClosedCaptions:function(te){return zk(e,te)},onTimelineRegionAdded:function(te){var re=d.G;e:{for(var de=T(re.g),se=de.next();!se.done;se=de.next())if(se=se.value,se.schemeIdUri==te.schemeIdUri&&se.id==te.id&&se.startTime==te.startTime&&se.endTime==te.endTime){de=se;break e}de=null}de==null&&(re.g.add(te),te=new Fe("regionadd",new Map([["region",te]])),re.dispatchEvent(te))},onEvent:function(te){return d.dispatchEvent(te)},onError:function(te){return d.onError(te)},isLowLatencyMode:function(){return C().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return C().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){b("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&d.R&&e.j.updateDuration()},newDrmInfo:function(te){var re=d.l,de=re?re.g:null;de&&re.s&&Bd(E,de.keySystem,te)},onManifestUpdated:function(){var te=new Map().set("isLive",e.V());d.dispatchEvent(on("manifestupdated",te)),Eu(d,!1,function(){e.A&&e.A.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(te,re,de,se){var ae=te;te=="com.apple.hls.interstitial"&&(ae="com.apple.quicktime.HLS",te={startTime:re,endTime:de,values:se},e.A)&&e.A.onInterstitialMetadata(e,e.h,te),se=T(se),te=se.next();for(var he={};!te.done;he={Pg:void 0},te=se.next())he.Pg=te.value,Eu(d,!1,function(Se){return function(){Ap(e,re,de,ae,Se.Pg)}}(he))},disableStream:function(te){return e.disableStream(te,e.g.streaming.maxDisabledTime)}},R=new rp(function(){return e.Ob()}),R.addEventListener("regionadd",function(te){var re=te.region;_u(e,"timelineregionadded",re,d),Eu(d,!1,function(){e.A&&e.A.onDashTimedMetadata(re)})}),_=null,p.streaming.observeQualityChanges&&(_=new kf(function(){return e.wb()}),_.addEventListener("qualitychange",function(te){pv(e,te.quality,te.position)}),_.addEventListener("audiotrackchange",function(te){pv(e,te.quality,te.position,!0)})),j=!0,U={Lb:e.H,onError:function(te){return d.onError(te)},ee:function(te){Eu(d,!0,function(){e:{var re=te,de=on("keystatuschanged");e.dispatchEvent(de);var se=Object.keys(re);se.length==1&&se[0]==""&&(se=["00"],re={"00":re[""]}),de=se.length==1&&se[0]=="00";var ae=!1;if(se.length){se=T(e.i.variants);for(var he=se.next();!he.done;he=se.next()){he=he.value;var Se=[];he.audio&&Se.push(he.audio),he.video&&Se.push(he.video),Se=T(Se);for(var ye=Se.next();!ye.done;ye=Se.next()){var be=ye.value;if(ye=he.allowedByKeySystem,be.keyIds.size){he.allowedByKeySystem=!0,be=T(be.keyIds);for(var Re=be.next();!Re.done;Re=be.next())Re=Re.value,((Re=re[de?"00":Re])||e.B.F)&&(he.allowedByKeySystem=he.allowedByKeySystem&&!!Re&&!Oy.includes(Re))}ye!=he.allowedByKeySystem&&(ae=!0)}}}if(ae&&(eo(e),!ns(e)))break e;(re=e.j.j)&&!re.allowedByKeySystem&&ea(e)}})},onExpirationUpdated:function(te,re){var de=on("expirationupdated");d.dispatchEvent(de),(de=d.j)&&de.onExpirationUpdated&&de.onExpirationUpdated(te,re)},onEvent:function(te){d.dispatchEvent(te),te.type=="drmsessionupdate"&&j&&(j=!1,te=Date.now()/1e3-d.qa,(e.s||d.getStats()).j=te,e.K&&qy(e.K))}},K=tv(e,x),ry(e.H,K),O=function(){return e.yc(U)},V={config:p,wi:M,Fi:R,Ei:_,yc:O,vi:E,networkingEngine:K,yh:a,xh:c},d=new ir(t,r,n,V),Z.return(d))})}function Z1(e,t){var n,r;return G(function(a){return a.g==1?(n=e.g.manifest.retryParameters,A(a,vp(t,e.H,n),2)):(r=a.h,r=="application/x-mpegurl"&&Cs()&&(r="application/vnd.apple.mpegurl"),a.return(r))})}function Mk(e,t){if(!ko())return!0;if(t){if((e.h||Tg()).canPlayType(t)=="")return!1;if(!(ko()&&t in vo))return!0;if(Mg(t))return Cs()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function kp(e){var t,n,r,a,l;return G(function(c){if(c.g==1)return Js(e,"media-source"),t=e.g.textDisplayFactory,n=t(),n.configure?n.configure(e.g.textDisplayer):Tt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.bg=t,r=Bk(e.h,n,{Qh:function(){return e.keySystem()},onMetadata:function(d,p,x){J1(e,d,p,x)}},e.K),r.configure(e.g.mediaSource),a=e.g.manifest,l=a.segmentRelativeVttTiming,r.fa=l,A(c,r.L,2);e.G=r,Y(c)})}function _k(e,t,n,r){var a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de;return G(function(se){switch(se.g){case 1:Js(e,"load"),a=e.h,e.I=new xu({Nd:function(){return a.playbackRate},hc:function(){return a.defaultPlaybackRate},Rf:function(ae){a.playbackRate=ae},Lg:function(ae){a.currentTime+=ae}}),l=function(){return Vf(e)},c=function(){return uv(e)},e.m.D(a,"playing",l),e.m.D(a,"pause",l),e.m.D(a,"ended",l),e.m.D(a,"ratechange",c),Ak(e,e.g),e.Db=e.g.preferredTextLanguage,e.pd=e.g.preferredTextRole,e.od=e.g.preferForcedSubs,Dp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(ae,he,Se){e.i&&e.j&&ae!=e.j.j&&Gf(e,ae,!0,he===void 0?!1:he,Se===void 0?0:Se)}),e.o.setMediaElement(a),e.o.setCmsdManager(e.ea),e.j=Fk(e),e.j.configure(e.g.streaming),e.l=ui,a.textTracks&&e.m.D(a.textTracks,"addtrack",function(ae){if(ae.track)switch(ae=ae.track,ae.kind){case"chapters":ev(e,ae)}}),e.dispatchEvent(on("streaming")),d=n;case 2:for((x=e.j.j)||d||(d=ns(e)?e.o.chooseVariant():null),C=[],p=x||d,b=T([p.video,p.audio]),k=b.next();!k.done;k=b.next())(E=k.value)&&!E.segmentIndex&&C.push(E.createSegmentIndex());if(!(0<C.length)){se.u(4);break}return A(se,Promise.all(C),4);case 4:if(!p||p.disabledUntilTime!=0){se.u(2);break}if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(p),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&He("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Dp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),FE(e.j,e.g.playRangeStart,e.g.playRangeEnd),M=function(ae){e.C=Nk(e,ae),e.Fb=Uk(e,ae),nv(e,a,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||M(e.pa),x){se.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){se.u(8);break}return R=e.i.presentationTimeline,_=e.pa||e.h.currentTime,j=R.Vb(),U=R.yb(),_<j?_=j:_>U&&(_=U),A(se,Vk(d,_),9);case 9:K=se.h,M(K);case 8:Gf(e,d,!0,!1,0);case 7:return e.C.ready(),O=e.Ec().find(function(ae){return ae.active}),O||((V=uu(e.i.textStreams,e.Db,e.pd,e.od)[0]||null)&&np(e.s.h,V,!0),d&&(V?(Hk(e,d.audio,V)&&(e.oa=!0),e.oa&&e.G.F.setTextVisibility(!0),hv(e)):e.oa=!1),V&&(e.g.streaming.alwaysStreamText||e.qf())&&Mf(e.j,V)),A(se,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),dv(e)),eo(e),ns(e),e.i.variants.some(function(ae){return ae.primary}),((Z=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(te=function(){return lv(e)},e.m.D(a,"timeupdate",te)),Z||(re=function(){return Hf(e)},e.m.D(a,"timeupdate",re),Hf(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(de=function(){var ae;return G(function(he){if(he.g==1)return ae=e.h.duration-e.h.currentTime,isNaN(ae)||!(ae<=e.g.streaming.preloadNextUrlWindow)?he.u(0):(e.m.jb(a,"timeupdate",de),A(he,e.preload(e.i.nextUrl),4));e.qa=he.h,Y(he)})},e.m.D(a,"timeupdate",de)),e.m.D(a,"ended",function(){e.load(e.qa||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(Z),e.Ea=!0,e.m.ha(a,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),Y(se)}})}function Rk(e,t){var n,r,a,l,c;return G(function(d){return d.g==1?(n=Ln,r=Date.now()/1e3,a=!0,e.B=e.yc({Lb:e.H,onError:function(p){ta(e,p)},ee:function(){},onExpirationUpdated:function(){var p=on("expirationupdated");e.dispatchEvent(p)},onEvent:function(p){e.dispatchEvent(p),p.type=="drmsessionupdate"&&a&&(a=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.g.drm),l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?ho(t):"",codecs:t?ji(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},c.fullMimeTypes.add(Dn(c.mimeType,c.codecs)),t.startsWith("audio/")?(c.type=n.X,l.audio=c):l.video=c,e.B.ba=!0,A(d,wy(e.B,[l],[]),2)):A(d,e.B.Rb(e.h),0)})}function Lk(e,t,n){var r,a,l,c,d,p,x,C,b,k,E,M;return G(function(R){if(R.g==1)return Js(e,"src-equals"),r=e.h,e.C=new f1(r),a=!1,e.md.push(function(){a=!0}),e.pa!=null&&e.C.Ee(e.pa),e.I=new xu({Nd:function(){return r.playbackRate},hc:function(){return r.defaultPlaybackRate},Rf:function(_){r.playbackRate=_},Lg:function(_){r.currentTime+=_}}),l=e.g.streaming.rebufferingGoal,nv(e,r,l),c=function(){return Vf(e)},d=function(){return uv(e)},e.m.D(r,"playing",c),e.m.D(r,"pause",c),e.m.D(r,"ended",c),e.m.D(r,"ratechange",d),r.preload!="none"&&e.m.ha(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return eo(e)}),e.m.D(r.audioTracks,"removetrack",function(){return eo(e)}),e.m.D(r.audioTracks,"change",function(){return eo(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(_){if(_.track)switch(_=_.track,_.kind){case"metadata":Ok(e,_);break;case"chapters":ev(e,_);break;default:eo(e)}}),e.m.D(r.textTracks,"removetrack",function(){return eo(e)}),e.m.D(r.textTracks,"change",function(){return eo(e)})),p=wk(e.N,e.da,n),!p.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(p+="#t=",0<e.g.playRangeStart&&(p+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(p+=","+e.g.playRangeEnd)),r.src=p,(No()||Uo())&&r.load(),r.preload!="none"&&!r.autoplay&&Mg(n)&&Ts()&&r.load(),e.l=vi,e.dispatchEvent(on("streaming")),x=new Xt,Hs(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ready(),x.resolve()}),Hs(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var _;return G(function(j){if(j.g==1)return Dk(e),_=Mu(e),_.find(function(U){return U.mode!="disabled"})?(0<_.length&&(e.oa=!0),j.u(2)):A(j,new Promise(function(U){e.m.ha(r.textTracks,"change",U),new Et(U).Y(1)}),2);if(a)return j.return();Pk(e),Y(j)})}),r.error?x.reject(Lp(e)):r.preload=="none"&&(He('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),x.resolve()),e.m.ha(r,"error",function(){x.reject(Lp(e))}),C=new Promise(function(_,j){new Et(j).Y(e.g.streaming.loadTimeout)}),A(R,Promise.race([x,C]),2);((b=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(k=function(){return lv(e)},e.m.D(r,"timeupdate",k)),b||(E=function(){return Hf(e)},e.m.D(r,"timeupdate",E),Hf(e)),e.A&&(e.A.onManifestUpdated(b),b&&(M=e.Ob().end,e.m.D(r,"progress",function(){var _=e.Ob().end;M!=_&&(e.A.onManifestUpdated(e.V()),M=_)}))),e.Ea=!0,Y(R)})}function Dk(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Xg(t,e.g.preferredVariantRole)}function Pk(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function Ok(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues){for(var r=[],a=T(t.activeCues),l=a.next(),c={};!l.done;c={Ta:void 0},l=a.next())c.Ta=l.value,Ap(e,c.Ta.startTime,c.Ta.endTime,c.Ta.type,c.Ta.value),e.A&&e.A.onCueMetadataChange(c.Ta.value),c.Ta.type=="com.apple.quicktime.HLS"&&c.Ta.startTime!=null&&(l=r.find(function(d){return function(p){return p.startTime==d.Ta.startTime&&p.endTime==d.Ta.endTime}}(c)),l||(l={startTime:c.Ta.startTime,endTime:c.Ta.endTime,values:[]},r.push(l)),l.values.push(c.Ta.value));for(r=T(r),a=r.next();!a.done;a=r.next())a=a.value,a.values.some(function(d){return d.key=="X-ASSET-URI"||d.key=="X-ASSET-LIST"})&&e.A&&(a.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.A.onInterstitialMetadata(e,e.h,a))}});var n=new Et(function(){var r=$k(e);r=T(r);for(var a=r.next();!a.done;a=r.next())a.value.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}function J1(e,t,n,r){t=T(t);for(var a=t.next();!a.done;a=t.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var l=a.cueTime+n,c=r;c&&l>c&&(c=l);for(var d=T(a.frames),p=d.next();!p.done;p=d.next())Ap(e,l,c,"org.id3",p.value);e.A&&e.A.onHlsTimedMetadata(a,l)}}function Ap(e,t,n,r,a){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",a),e.dispatchEvent(on("metadata",t))}function ev(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new Et(function(){t.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}s.Ji=function(){for(var e=this.Z;e.g;)e.release()},s.yc=function(e){return new mf(e)};function tv(e,t){function n(a){t()?t().dispatchEvent(a):e.dispatchEvent(a)}function r(a){t()?Eu(t(),!0,a):a()}return t||(t=function(){return null}),new Zt(function(a,l,c,d){var p=t()?t().i:e.o;p&&p.segmentDownloaded(a,l,c,d)},function(a,l,c){l=new Map().set("headers",a).set("request",l).set("requestType",c),n(on("downloadheadersreceived",l)),r(function(){if(e.ea){var d=e.ea;if(d.h.enabled){var p=a["cmsd-static"];if(p)try{var x=new Map,C=p.split(",");for(p=0;p<C.length;p++){var b=C[p].split("=");x.set(b[0],V1(b[1]))}}catch{}if(x=a["cmsd-dynamic"]){try{var k=new Map,E=x.split(";");for(x=1;x<E.length;x++){var M=E[x].split("=");k.set(M[0],V1(M[1]))}var R=k}catch{R=null}R&&(d.g=R)}}}})},function(a,l,c,d){a=new Map().set("request",a).set("error",l).set("httpResponseCode",c).set("aborted",d),n(on("downloadfailed",a))},function(a,l,c){r(function(){var d=e.N,p=c;if(p=p===void 0?{}:p,d.g.enabled)if(l.method==="HEAD")Zs(d,l);else switch(a){case 0:try{if(d.g.enabled){if(p.type){e:{switch(p.type){case 4:var x="d";break e;case 3:case 2:x="h";break e;case 5:x="s";break e}x=void 0}d.m=x}Zs(d,l,{ot:z1,su:!d.i})}}catch(ye){Pe("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",ye)}break;case Mo:try{if(d.g.enabled){var C=p.segment;x=0,C&&(x=C.endTime-C.startTime);var b={d:1e3*x,st:d.h.V()?"l":"v"};b.ot=Ck(p);var k=b.ot===jf||b.ot===Bf||b.ot===Ff||b.ot===$f,E=p.stream;if(E){var M=d.h.eb();if(k&&(b.bl=Tk(d,E.type),b.ot!==$f)){var R=$1(d,E.type);b.dl=M?R/Math.abs(M):R}if(E.bandwidth&&(b.br=E.bandwidth/1e3),E.segmentIndex&&C){var _=E.segmentIndex.Ib(C.endTime,!0,0>M);if(_){var j=_.next().value;if(j&&j!=C){if(!pn(C.M(),j.M())){var U=j.M()[0],K=l.uris[0],O=new URL(U),V=new URL(K);if(O.origin!==V.origin)var Z=U;else{for(var te=O.pathname.split("/").slice(1),re=V.pathname.split("/").slice(1,-1);te[0]===re[0];)te.shift(),re.shift();for(;re.length;)re.shift(),te.unshift("..");Z=te.join("/")}b.nor=Z}if((j.Ha||j.sa)&&(C.Ha!=j.Ha||C.sa!=j.sa)){var de=j.Ha+"-";j.sa&&(de+=j.sa),b.nrr=de}}}var se=d.h.eb()||1,ae=$1(d,E.type)||500,he=E.bandwidth,Se=he?he*(C.endTime-C.startTime)/1e3/(ae/se/1e3)*d.g.rtpSafetyFactor:NaN;isNaN(Se)||(b.rtp=Se)}}k&&b.ot!==$f&&(b.tb=bk(d,b.ot)/1e3),Zs(d,l,b)}}catch(ye){Pe("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",ye)}break;case 2:case 5:case 6:Zs(d,l,{ot:"k"});break;case 4:Zs(d,l,{ot:"o"})}})},function(a,l,c,d){(a=t()?t().j:e.F)&&a.banLocation&&a.banLocation(d)},function(a,l){if(l.data){l=l.data.byteLength;var c=t()?t().getStats():e.s;c&&(c.Cd=isNaN(c.Cd)?l:c.Cd+l,a===0&&(c.Hg=l))}})}function Nk(e,t){return new c1(e.h,e.i,e.g.streaming,t,function(){e.Fb&&y1(e.Fb,!0),e.j&&e.j.Qc(),e.L&&ts(e)},function(n){return e.dispatchEvent(n)})}function Uk(e,t){t=new Nf(e.dd,e.V()||0<t),t.addEventListener("enter",function(r){_u(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){_u(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var a=r.region;r.seeking||(_u(e,"timelineregionenter",a),_u(e,"timelineregionexit",a))});var n=new g1(e.h);return n.g.add(t),e.Zc&&n.g.add(e.Zc),n}function nv(e,t,n){e.L=new kb,e.L.g=Ls,Jg(e.L,n,Math.min(.5,n/2)),_p(e),e.he=new Et(function(){ts(e)}).Sa(.25),e.m.D(t,"waiting",function(){return ts(e)}),e.m.D(t,"stalled",function(){return ts(e)}),e.m.D(t,"canplaythrough",function(){return ts(e)}),e.m.D(t,"progress",function(){return ts(e)})}function ts(e){switch(e.l){case vi:if(e.h.ended)var t=!0;else{var n=Fd(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case ui:e:if(e.h.ended||Zy(e.G))t=!0;else{if(e.i.presentationTimeline.V()){n=e.i.presentationTimeline.Wb();var r=Fd(e.h.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=Fy(e.h.buffered,e.h.currentTime),n=e.L;var a=t,l=n.i.get(n.g);t=n.g,r=a||r>=l?lu:Ls,n.g=r,(t=t!=r)&&r===lu&&(n.h=Date.now()),t&&_p(e)}function Bk(e,t,n,r){return new Yy(e,t,n,r)}function jk(e){return new F1({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},wb:function(){return e.wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},eb:function(){return e.eb()},xb:function(){return e.xb()},ic:function(){return e.ic()},V:function(){return e.V()}},e.g.cmcd)}function Fk(e){return new T1(e.i,{Md:function(){return e.C?e.C.yd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},aa:e.G,Lb:e.H,onError:function(t){return ta(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bi:function(){e.F&&e.F.update&&e.F.update()},Af:function(t,n){var r=t.startTime;t=t.endTime;var a=n.type;if(n=n.codecs.includes(","),e.C){e.C.Mg();var l=qd(e.G,a);!e.V()&&e.h.paused&&l!=null&&0<l&&e.C.yd()<l&&e.C.Ee(l)}ts(e),r=new Map().set("start",r).set("end",t).set("contentType",a).set("isMuxed",n),e.dispatchEvent(on("segmentappended",r))},Ai:function(t,n){(n=n.Hc)&&e.Zc&&PE(e.Zc,n,t)},kg:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new dy(Me(n)),n=0;for(var a=T(t.data),l=a.next();!l.done;l=a.next())n+=l.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),a=0,t=T(t.data),l=t.next();!l.done;l=t.next())l=l.value,n.set(l,a),a+=l.length;cu(r,"cenc",n),r=r.l}}else r=Promise.resolve();return r},onMetadata:function(t,n,r){J1(e,t,n,r)},disableStream:function(t,n){return e.disableStream(t,n)}})}s.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Df(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Tt("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Tt("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(Tt("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&Cs(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){Tt("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Tt("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Tt("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Tt("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Tt("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Tt("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Tt("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Tt("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Tt("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Tt("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=Er(this.g,e,or(this)),iv(this),n};function iv(e){if(e.be=new Ud(e.g,e.fa,e.B),e.F){var t=jo(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.F.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=Ro&&Dy(e.be,e.i)&&eo(e)}catch(l){ta(e,l)}e.o&&ns(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||ea(e)}if(e.H&&(e.H.Pf(e.g.streaming.forceHTTP),e.H.Qf(e.g.streaming.forceHTTPS)),e.G)if(e.G.configure(e.g.mediaSource),e.G.fa=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.bg!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):Tt("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.G,a=r.F;r.F=n,a&&(n.setTextVisibility(a.isTextVisible()),a.destroy()),r.g&&(r.g.j=n),e.bg=t,e.j&&(t=e.j,(n=t.i.get(_t))&&Ws(t,n.stream,!0,0,!0))}else t=e.G.F,t.configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),dv(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Jg(e.L,t,Math.min(.5,t/2))),e.i&&Dp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}s.getConfiguration=function(){var e=or(this);return Er(e,this.g,or(this)),e},s.Ag=function(){var e=or(this);return Er(e,this.g,or(this)),I1(this.g,or(this))},s.vg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ob().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},s.Ni=function(){for(var e in this.g)delete this.g[e];Er(this.g,or(this),or(this)),iv(this)},s.yg=function(){return this.l},s.hf=function(){return this.i?this.i.type:null},s.Uh=function(){return this.h},s.xb=function(){return this.H},s.Dc=function(){return this.da},s.ug=function(){return this.A?this.A:null},s.V=function(){return this.i?this.i.presentationTimeline.V():this.h&&this.h.src?this.h.duration==1/0:!1},s.kc=function(){return this.i?this.i.presentationTimeline.kc():!1},s.ki=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},s.Ob=function(){if(this.i){if(!this.Ea&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.yb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},s.hi=function(){this.V()&&(this.h.currentTime=this.Ob().end)},s.li=function(){return this.Ea},s.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},s.drmInfo=function(){return this.B?this.B.g:null},s.ad=function(){return this.B?this.B.ad():1/0},s.ff=function(){return this.B?this.B.ff():[]},s.Ld=function(){return this.B?this.B.Ld():{}},s.pf=function(){return this.L?this.L.g==Ls:!1},s.eb=function(){return this.h?this.I?this.I.i:1:0},s.wd=function(e){var t=this;e==0?He("A trick play rate of 0 is unsupported!"):(this.Fa.Ra(),this.h.paused&&this.h.play(),this.I.set(e),this.l==ui&&(this.o.playbackRateChanged(e),b1(this.j,1<Math.abs(e))),this.V()&&this.Fa.D(this.h,"timeupdate",function(){var n=t.h.currentTime,r=t.Ob(),a=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Tc():Math.floor(n)<=Math.floor(r.start+a)&&t.Tc()}))},s.Tc=function(){var e=this.I.hc();this.l==vi&&this.I.set(e),this.l==ui&&(this.I.set(e),this.o.playbackRateChanged(e),b1(this.j,!1)),this.Fa.Ra()},s.ic=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=T(this.i.variants),a=r.next();!a.done;a=r.next())if(a=a.value,au(a)){var l=_s(a);l.active=a==e,l.active||n==1||e==null||a.video!=e.video||a.audio!=e.audio||(l.active=!0),l.active&&n++,t.push(l)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(c){return Ed(c)}):[]},s.Ec=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=T(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var a=ef(r);a.active=r==e,t.push(a)}return t}return this.h&&this.h.src&&this.h.textTracks?Mu(this).map(function(l){return Vg(l)}):[]},s.Oh=function(){var e=this.qd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Td(t)})},s.Gh=function(e){var t=this,n,r,a,l;return G(function(c){return c.g==1?t.l!=ui&&t.l!=vi?c.return(null):(n=t.qd,t.i&&(n=t.i.imageStreams),(r=n.find(function(d){return d.id==e}))?r.segmentIndex?c.u(2):A(c,r.createSegmentIndex(),2):c.return(null)):c.g!=4?(a=[],r.segmentIndex.Hb(function(d){var p=ov(d.tilesLayout||r.tilesLayout);if(p){p=p.rows*p.dc;for(var x=d.j-d.startTime,C=0;C<p;C++)a.push(t.Cg(e,d.startTime+x*C/p))}}),A(c,Promise.all(a),4)):(l=c.h,c.return(l.filter(function(d){return d})))})};function ov(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{dc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}s.Cg=function(e,t){var n=this,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O;return G(function(V){return V.g==1?n.l!=ui&&n.l!=vi?V.return(null):(r=n.qd,n.i&&(r=n.i.imageStreams),(a=r.find(function(Z){return Z.id==e}))?a.segmentIndex?V.u(2):A(V,a.createSegmentIndex(),2):V.return(null)):(l=a.segmentIndex.find(t),l==null||(c=a.segmentIndex.get(l),d=ov(c.tilesLayout||a.tilesLayout),!d)?V.return(null):(p=a.width||0,x=a.height||0,C=p/d.dc,b=x/d.rows,k=d.dc*d.rows,E=c.j-c.startTime,M=c.B||E/k,R=c.startTime,j=_=0,1<k&&(U=Math.floor((t-c.startTime)/M),R=c.startTime+U*M,_=U%d.dc*C,j=Math.floor(U/d.dc)*b),K=!1,(O=c.A)&&(K=!0,b=O.height,_=O.positionX,j=O.positionY,C=O.width),V.return({segment:c,imageHeight:x,imageWidth:p,height:b,positionX:_,positionY:j,startTime:R,duration:M,uris:c.M(),width:C,sprite:K})))})},s.Yg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(np(this.s.h,t,!1),Mf(this.j,t),Wf(this),this.Db=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Mu(this),t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value,bd(n)==e.id?n.mode=this.oa?"showing":"hidden":n.mode="disabled";Wf(this)}},s.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var r=this.i.variants.find(function(l){return l.id==e.id});if(r&&au(r)){var a=this.j.j;this.g.abr.enabled&&(a.video!=r.video||a.audio&&r.audio&&a.audio.language==r.audio.language&&a.audio.channelsCount==r.audio.channelsCount)&&He("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),Gf(this,r,!1,t,n),this.za=new Zg(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),ns(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=T(t),n=t.next();!n.done;n=t.next())if(n=n.value,bd(n)==e.id){fv(this,n);break}}},s.Ih=function(){return gv(this.ic())},s.ai=function(){return gv(this.Ec())},s.Hh=function(){return Array.from(mv(this.ic()))},s.$h=function(){return Array.from(mv(this.Ec()))},s.Xg=function(e,t,n,r,a){if(n=n===void 0?0:n,r=r===void 0?0:r,a=a===void 0?"":a,this.i&&this.C){this.za=new Rs(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,a),e=function(c,d){return c.video||d.video?c.video&&d.video?Math.abs((c.video.height||0)-(d.video.height||0))+Math.abs((c.video.width||0)-(d.video.width||0)):1/0:0},t=this.j.j,a=this.za.create(this.i.variants),n=null,a=T(a.values());for(var l=a.next();!l.done;l=a.next())l=l.value,au(l)&&(!n||e(n,t)>e(l,t))&&(n=l);n!=t&&(n?(e=_s(n),this.Mf(e,!0,r)):ea(this))}else this.h&&this.h.audioTracks&&(r=uu(this.ic(),e,t||"",!1)[0])&&this.Mf(r)},s.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Db=e,this.pd=t||"",this.od=n,(e=uu(this.i.textStreams,this.Db,this.pd,this.od)[0]||null)&&e!=this.j.s&&(np(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.qf())&&(Mf(this.j,e),Wf(this))):(e=uu(this.Ec(),e,t||"",n)[0])&&this.Yg(e)},s.Ti=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,a=T(this.i.variants),l=a.next();!l.done;l=a.next())if(l=l.value,l.audio.label==e){r=l;break}r!=null&&(this.za=new Rs(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),ea(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=T(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&fv(this,t)}},s.qf=function(){var e=this.oa;return this.G&&this.l==ui?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Mu(this).some(function(t){return t.mode=="showing"}):e},s.wg=function(){return this.h&&this.h.src&&this.h.textTracks?rv(this).map(function(e){return Vg(e)}):[]},s.Kh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=$t(e),n=rv(this).filter(function(d){return $t(d.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=T(n);for(var a=n.next();!a.done;a=n.next())if((a=a.value)&&a.cues){a=T(a.cues);for(var l=a.next();!l.done;l=a.next()){var c=l.value;(l=c.id)&&l!=""||(l=c.startTime+"-"+c.endTime+"-"+c.text),c={id:l,title:c.text,startTime:c.startTime,endTime:c.endTime},r.has(l)||(e.push(c),r.add(l))}}return e};function Mu(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function $k(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function rv(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}s.eh=function(e){if(e=!!e,this.oa!=e){if(this.oa=e,this.l==ui)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=uu(this.i.textStreams,this.Db,this.pd,this.od),0<e.length&&(Mf(this.j,e[0]),Wf(this))):zE(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Mu(this);t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}hv(this)}},s.Wh=function(){if(this.C)var e=this.C.yd();else{if(this.pa==null)return new Date;e=this.pa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},s.Bg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},s.Od=function(){return this.V()&&this.i?this.i.presentationTimeline.Od():null},s.wb=function(){if(this.l==ui)return this.G.wb();var e={total:[],audio:[],video:[],text:[]};return this.l==vi&&(e.total=br(this.h.buffered)),e},s.getStats=function(){if(this.l!=ui&&this.l!=vi)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Vf(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.V()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.U=this.C.fg(),this.s.Z=this.C.gg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.R=Number(n.droppedVideoFrames),t.N=r,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==ui){if(n=this.j.j,t=this.j.s,n){r=this.I?this.I.i:1;var a=r*n.bandwidth;t&&t.bandwidth&&(a+=r*t.bandwidth),this.s.B=a}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.V()&&(n=this.Bg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==vi&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var l=this.s;e=l.o,n=l.l,t=l.B,r=l.N,a=l.R;var c=l.L,d=l.Z,p=l.U,x=l.A,C=l.i,b=l.m,k=l.H,E=l.j,M=tp(l.g,"playing"),R=tp(l.g,"paused"),_=tp(l.g,"buffering"),j=l.s,U=l.C,K=l.I,O=l.Hg,V=l.Cd,Z=l.K,te=l.G,re=l.F,de=ME(l.g),se=[];l=T(l.h.g);for(var ae=l.next();!ae.done;ae=l.next())ae=ae.value,se.push({timestamp:ae.timestamp,id:ae.id,type:ae.type,fromAdaptation:ae.fromAdaptation,bandwidth:ae.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:a,corruptedFrames:c,stallsDetected:d,gapsJumped:p,estimatedBandwidth:x,completionPercent:C,loadLatency:b,manifestTimeSeconds:k,drmTimeSeconds:E,playTime:M,pauseTime:R,bufferingTime:_,licenseTime:j,liveLatency:U,maxSegmentDuration:K,manifestSizeBytes:O,bytesDownloaded:V,nonFatalErrorCount:Z,manifestPeriodCount:te,manifestGapCount:re,stateHistory:de,switchHistory:se}},s.uh=function(e,t,n,r,a,l,c){c=c===void 0?!1:c;var d=this,p,x,C,b,k,E,M,R,_,j,U,K;return G(function(O){switch(O.g){case 1:if(d.l!=ui&&d.l!=vi)throw new ne(1,7,7004);if(n!="subtitles"&&n!="captions"&&He("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){O.u(2);break}return A(O,Ip(d,e),3);case 3:r=O.h;case 2:if(p=[],d.A&&(p=d.A.getCuePoints()),d.l!=vi){O.u(4);break}return c&&(n="forced"),A(O,sv(d,e,t,n,r,l||"",p),5);case 5:if(x=$t(t),C=d.Ec(),b=C.find(function(V){return $t(V.language)==x&&V.label==(l||"")&&V.kind==n}))return eo(d),O.return(b);throw new ne(1,2,2012);case 4:if(k=Ln,E=d.h.duration,d.i&&(E=d.i.presentationTimeline.getDuration()),E==1/0)throw new ne(1,4,4033);if(!p.length){O.u(6);break}return A(O,Mp(d,e,d.H,d.g.streaming.retryParameters),7);case 7:M=O.h,R=av(d,M,r,p),_=new Blob([R],{type:"text/vtt"}),e=Tf(_),r="text/vtt";case 6:if(j={id:d.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ep(0,E,[e]),mimeType:r||"",codecs:a||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:l||null,type:k.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!c,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Dn(r||"",a||"")])},U=Dn(j.mimeType,j.codecs),K=ou(U),!K)throw new ne(2,2,2014,r);return d.i.textStreams.push(j),eo(d),O.return(ef(j))}})},s.vh=function(e,t){var n=this,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U;return G(function(K){switch(K.g){case 1:if(n.l!=ui&&n.l!=vi)throw new ne(1,7,7004);if(t){K.u(2);break}return A(K,Ip(n,e),3);case 3:t=K.h;case 2:if(t!="text/vtt")throw new ne(1,2,2017,e);if(r=Ln,a=n.h.duration,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new ne(1,4,4045);return A(K,Mp(n,e,n.H,n.g.streaming.retryParameters),4);case 4:if(l=K.h,c=Pn[t],!c)throw new ne(2,2,2014,t);for(d=c(),p={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},x=Me(l),C=d.parseMedia(x,p,e),b=[],k=T(C),E=k.next(),M={};!E.done;M={ye:void 0,zc:void 0},E=k.next())M.zc=E.value,M.ye=null,R=function(O){return function(){return O.ye==null&&(O.ye=Zn([e],[O.zc.payload])),O.ye||[]}}(M),_=new ut(M.zc.startTime,M.zc.endTime,R,0,null,null,0,0,1/0),M.zc.payload.includes("#xywh")&&(j=M.zc.payload.split("#xywh=")[1].split(","),j.length===4&&_.fh({height:parseInt(j[3],10),positionX:parseInt(j[0],10),positionY:parseInt(j[1],10),width:parseInt(j[2],10)})),b.push(_);return U={id:n.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Dt(b),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Dn(t||"","")])},n.l==vi?n.qd.push(U):n.i.imageStreams.push(U),eo(n),K.return(Td(U))}})},s.th=function(e,t,n){var r=this,a,l,c,d;return G(function(p){switch(p.g){case 1:if(r.l!=ui&&r.l!=vi)throw new ne(1,7,7004);if(n){p.u(2);break}return A(p,Ip(r,e),3);case 3:n=p.h;case 2:return a=[],r.A&&(a=r.A.getCuePoints()),A(p,sv(r,e,t,"chapters",n,"",a),4);case 4:if(l=p.h,c=r.wg(),d=c.find(function(x){return x.language==t}),!d){p.u(5);break}return A(p,new Promise(function(x,C){r.m.ha(l,"load",x),r.m.ha(l,"error",function(){C(new ne(1,2,2015))})}),6);case 6:return eo(r),p.return(d);case 5:throw new ne(1,2,2012)}})};function Ip(e,t){var n;return G(function(r){switch(r.g){case 1:return Q(r,2),A(r,vp(t,e.H,e.g.streaming.retryParameters),4);case 4:n=r.h,q(r,3);break;case 2:W(r);case 3:if(n)return r.return(n);throw new ne(1,2,2011,t)}})}function sv(e,t,n,r,a,l,c){var d,p,x,C;return G(function(b){if(b.g==1)return a!="text/vtt"||c.length?A(b,Mp(e,t,e.H,e.g.streaming.retryParameters),3):b.u(2);b.g!=2&&(d=b.h,p=av(e,d,a,c),x=new Blob([p],{type:"text/vtt"}),t=Tf(x),a="text/vtt"),C=document.createElement("track");var k=e.N,E=t;try{if(k.g.enabled){var M=Sp(k);M.ot=Tp,M.su=!0;var R=Uf(M),_=Cp(E,R)}else _=E}catch(j){Pe("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",j),_=E}return C.src=_,C.label=l,C.kind=r,C.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(C),b.return(C)})}function Mp(e,t,n,r){var a,l,c;return G(function(d){if(d.g==1){a=Mo,l=Hn([t],r),l.method="GET";var p=e.N;try{p.g.enabled&&Zs(p,l,{ot:Tp,su:!0})}catch(x){Pe("CMCD_TEXT_ERROR","Could not generate text CMCD data.",x)}return A(d,n.request(a,l).promise,2)}return c=d.h,d.return(c.data)})}function av(e,t,n,r){var a=Pn[n];if(a)return n=a(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Me(t),t=n.parseMedia(t,e,null),vk(t,r);throw new ne(2,2,2014,n)}s.Yi=function(e,t){this.fa.width=e,this.fa.height=t},s.If=function(e){if(this.l==ui){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=T(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.fd||r.Qa||r.sb||(r.fd=!1,Qi(t,r,e));t=!0}}else t=!1;return t},s.gf=function(){return He("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},s.Rh=function(){return this.ab};function or(e){var t=qs();return t.streaming.failureCallback=function(n){if(e.V()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.If(r))}},t.textDisplayFactory=function(){if(e.de){var n=e.getConfiguration();return new _i(e.h,e.de,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new Ii(e.h,"Shaka Player TextTrack"):new Mi},t}s.ih=function(e){this.de=e};function zk(e,t){for(var n=new Set,r=T(t.textStreams),a=r.next();!a.done;a=r.next())a=a.value,a.mimeType!="application/cea-608"&&a.mimeType!="application/cea-708"||n.add(a.originalId);for(r=T(t.variants),a=r.next();!a.done;a=r.next())if((a=a.value.video)&&a.closedCaptions){for(var l=T(a.closedCaptions.keys()),c=l.next();!c.done;c=l.next())if(c=c.value,!n.has(c)){var d=c.startsWith("CC")?"application/cea-608":"application/cea-708",p=new xn,x=a.closedCaptions.get(c);d={id:e.cg++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:p,mimeType:d,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:x,originalLanguage:x,label:null,type:_t,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Dn(d,"")])},t.textStreams.push(d),n.add(c)}}}function Vk(e,t){var n,r,a,l,c;return G(function(d){return d.g==1?(n=e.audio,r=e.video,a=function(p,x){var C,b,k;return G(function(E){return E.g==1?p?A(E,p.createSegmentIndex(),2):E.return(null):(b=(C=p.segmentIndex.Ib(x))?C.next().value:null,b?(k=b.startTime,E.return(k)):E.return(null))})},A(d,a(n,t),2)):d.g!=3?(l=d.h,A(d,a(r,t),3)):(c=d.h,c!=null&&l!=null?d.return(Math.max(c,l)):c!=null?d.return(c):l!=null?d.return(l):d.return(t))})}function _p(e){var t=e.pf();if(e.s&&e.L&&e.C){var n=e.I;if(n.j=t,m1(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),Vf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.ze<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.ze*a,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(on("buffering",t))}function uv(e){var t=e.h.playbackRate;t!=0&&(e.I&&e.I.set(t),t=on("ratechange"),e.dispatchEvent(t))}function Vf(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Ls?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var a=Date.now()/1e3;t.g.duration=a-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:a,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(on("statechanged",n)))}}function lv(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,a=e.vg();a<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.wd(r):a==1&&t!==e.I.hc()&&e.Tc()}if(n&&(n=e.Ob(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){r=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var l=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var c=e.g.streaming.liveSync.targetLatency,d=c+r,p=Math.max(0,c-r),x=e.g.streaming.liveSync.maxPlaybackRate,C=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?d=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(d=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?p=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(p=e.i.serviceDescription.minLatency),x=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,C=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||typeof c!="number"||(e.R=c);var b=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;a&&e.Da&&e.R!==null&&typeof c=="number"&&e.ze<b&&Date.now()-e.Da>1e3*l&&(l=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(c-l)/2,l+r),e.Da=Date.now()),a&&e.R!==null&&(d=e.R+r,p=e.R-r),c=n.end-e.h.currentTime,r=0,e.l==vi&&(a=e.h.buffered,0<a.length&&(r=a.end(a.length-1),r=Math.max(x,r-n.end))),n=e.g.streaming.liveSync.panicMode,a=1e3*e.g.streaming.liveSync.panicThreshold,l=Date.now()-e.L.h,n&&!C&&(C=e.g.streaming.liveSync.minPlaybackRate),n&&C&&l<=a?t!=C&&e.wd(C):d&&x&&c-r>d?(t!=x&&e.wd(x),e.Da=null):p&&C&&c-r<p?(t!=C&&e.wd(C),e.Da=null):t!==e.I.hc()&&(e.Tc(),e.Da=Date.now())}}function Hf(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.U)?(e.U=n,t=!0):(n=Math.max(e.U,n),e.U!=n&&(e.U=n,t=!0))),t){var r;e.U==0?r=on("started"):e.U==25?r=on("firstquartile"):e.U==50?r=on("midpoint"):e.U==75?r=on("thirdquartile"):e.U==100&&(r=on("complete")),r&&e.dispatchEvent(r)}}}function ns(e){try{Py(e.be,e.i)}catch(n){return ta(e,n),!1}var t=tf(e.i.variants);return t=e.za.create(t),e.o.setVariants(Array.from(t.values())),!0}function ea(e,t,n,r,a){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,a=a===void 0?!0:a;var l;(l=ns(e)?e.o.chooseVariant():null)&&Gf(e,l,a,t,n,r)}function Gf(e,t,n,r,a,l){l=l===void 0?!1:l;var c=e.j.j;if(t==c)r&&E1(e.j,t,r,a,!0);else{var d=e.s.h;d.h!=t&&(d.h=t,d.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),E1(e.j,t,r,a,l,n),r=null,c&&(r=_s(c)),t=_s(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&Ky(e.K,t,e.hf()),n=on("adaptation",n),na(e,n)):cv(e,r,t)}}function fv(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Ed(n),t=Ed(t),cv(e,n,t))}function Hk(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var r=$t(e.g.preferredTextLanguage);return n=$t(n.language),e.g.autoShowText==2?Is(n,r):e.g.autoShowText==3?t?(e=$t(t.language),Is(n,r)&&!Is(e,n)):!1:(He("Invalid autoShowText setting!"),!1)}function eo(e){var t=on("trackschanged");na(e,t)}function cv(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&Ky(e.K,n,e.hf()),n=on("variantchanged",t),na(e,n)}function Wf(e){var t=on("textchanged");na(e,t)}function hv(e){var t=on("texttrackvisibility");na(e,t)}function dv(e){e.g.abr.enabled||Rp(e);var t=new Map().set("newStatus",e.g.abr.enabled);na(e,on("abrstatuschanged",t))}function Rp(e,t){if(t=t===void 0?!0:t,e.l==ui){e.je.stop();for(var n=T(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&ns(e)}}s.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===Ro||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(l){var c=l[e.type];return c&&c.id!==e.id&&!l.disabledUntilTime?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=T(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var a=r[e.type];a&&a.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.je.Sa(1),t=this.wb().video.reduce(function(l,c){return l+c.end-c.start},0),ea(this,!1,t,!0,!1),!0}return!1};function ta(e,t){var n,r,a;return G(function(l){switch(l.g){case 1:if(e.l==Ro)return l.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Ea&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){l.u(2);break}return Q(l,3),A(l,ek(e.j),5);case 5:r=l.h,n=!r,q(l,2);break;case 3:W(l),n=!0;case 2:if(!n)return l.return();t.severity===2&&Rp(e,!1),a=on("error",new Map().set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),Y(l)}})}function _u(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(on(t,e))}function pv(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(on(r?"audiotrackchanged":"mediaqualitychanged",t))}function Lp(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new ne(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new ne(2,3,3016,n,t,e.h.error.message))}function Dp(e,t,n){0<t&&(e.V()||e.hh(t)),t=e.getDuration(),n<t&&(e.V()||e.Za(n))}function na(e,t){G(function(n){if(n.g==1)return A(n,Promise.resolve(),2);e.l!=Ro&&e.dispatchEvent(t),Y(n)})}function mv(e){var t=new Set;e=T(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add($t(n.language)):t.add("und");return t}function gv(e){var t=new Map,n=new Map;e=T(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var a="und",l=[];r.language&&(a=$t(r.language)),r.type=="variant"?l=r.audioRoles:l=r.roles,l&&l.length||(l=[""]),t.has(a)||t.set(a,new Set),l=T(l);for(var c=l.next();!c.done;c=l.next())c=c.value,t.get(a).add(c),r.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(c,r.label))}var d=[];return t.forEach(function(p,x){p=T(p);for(var C=p.next();!C.done;C=p.next()){C=C.value;var b=null;n.has(x)&&n.get(x).has(C)&&(b=n.get(x).get(C)),d.push({language:x,role:C,label:b})}}),d}me("shaka.Player",we),we.prototype.setVideoContainer=we.prototype.ih,we.prototype.getManifestParserFactory=we.prototype.Rh,we.prototype.getManifest=we.prototype.gf,we.prototype.retryStreaming=we.prototype.If,we.prototype.setMaxHardwareResolution=we.prototype.Yi,we.prototype.addChaptersTrack=we.prototype.th,we.prototype.addThumbnailsTrack=we.prototype.vh,we.prototype.addTextTrackAsync=we.prototype.uh,we.prototype.getStats=we.prototype.getStats,we.prototype.getBufferedInfo=we.prototype.wb,we.prototype.getSegmentAvailabilityDuration=we.prototype.Od,we.prototype.getPresentationStartTimeAsDate=we.prototype.Bg,we.prototype.getPlayheadTimeAsDate=we.prototype.Wh,we.prototype.setTextTrackVisibility=we.prototype.eh,we.prototype.getChapters=we.prototype.Kh,we.prototype.getChaptersTracks=we.prototype.wg,we.prototype.isTextTrackVisible=we.prototype.qf,we.prototype.selectVariantsByLabel=we.prototype.Ti,we.prototype.selectTextLanguage=we.prototype.Lf,we.prototype.selectAudioLanguage=we.prototype.Xg,we.prototype.getTextLanguages=we.prototype.$h,we.prototype.getAudioLanguages=we.prototype.Hh,we.prototype.getTextLanguagesAndRoles=we.prototype.ai,we.prototype.getAudioLanguagesAndRoles=we.prototype.Ih,we.prototype.selectVariantTrack=we.prototype.Mf,we.prototype.selectTextTrack=we.prototype.Yg,we.prototype.getThumbnails=we.prototype.Cg,we.prototype.getAllThumbnails=we.prototype.Gh,we.prototype.getImageTracks=we.prototype.Oh,we.prototype.getTextTracks=we.prototype.Ec,we.prototype.getVariantTracks=we.prototype.ic,we.prototype.cancelTrickPlay=we.prototype.Tc,we.prototype.trickPlay=we.prototype.wd,we.prototype.getPlaybackRate=we.prototype.eb,we.prototype.isBuffering=we.prototype.pf,we.prototype.getKeyStatuses=we.prototype.Ld,we.prototype.getActiveSessionsMetadata=we.prototype.ff,we.prototype.getExpiration=we.prototype.ad,we.prototype.drmInfo=we.prototype.drmInfo,we.prototype.keySystem=we.prototype.keySystem,we.prototype.isFullyLoaded=we.prototype.li,we.prototype.goToLive=we.prototype.hi,we.prototype.seekRange=we.prototype.Ob,we.prototype.isAudioOnly=we.prototype.ki,we.prototype.isInProgress=we.prototype.kc,we.prototype.isLive=we.prototype.V,we.prototype.getAdManager=we.prototype.ug,we.prototype.getAssetUri=we.prototype.Dc,we.prototype.getNetworkingEngine=we.prototype.xb,we.prototype.getMediaElement=we.prototype.Uh,we.prototype.getManifestType=we.prototype.hf,we.prototype.getLoadMode=we.prototype.yg,we.prototype.resetConfiguration=we.prototype.Ni,we.prototype.getBufferFullness=we.prototype.vg,we.prototype.getNonDefaultConfiguration=we.prototype.Ag,we.prototype.getConfiguration=we.prototype.getConfiguration,we.prototype.configure=we.prototype.configure,we.prototype.releaseAllMutexes=we.prototype.Ji,we.prototype.destroyAllPreloads=we.prototype.Qe,we.prototype.preload=we.prototype.preload,we.prototype.detachAndSavePreload=we.prototype.qg,we.prototype.unloadAndSavePreload=we.prototype.aj,we.prototype.load=we.prototype.load,we.prototype.updateStartTime=we.prototype.ej,we.prototype.unload=we.prototype.bc,we.prototype.detach=we.prototype.detach,we.prototype.attachCanvas=we.prototype.zh,we.prototype.attach=we.prototype.Rb,we.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,a,l,c,d;return G(function(p){switch(p.g){case 1:if(t={},!e){p.u(2);break}return A(p,Gb(),3);case 3:t=p.h;case 2:var x={};if(ko())for(var C in vo)x[C]=!0;C=T(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var b=C.next();!b.done;b=C.next())b=b.value,x[b]=ko()?!!vo[b]:tu(b);for(n=x,C='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(L(wr)),x={},C=T(C),b=C.next();!b.done;b=C.next()){b=b.value,x[b]=ou(b)?!0:ko()?Ne(b)||!!Ki(b):tu(b);var k=b.split(";")[0];x[k]=x[k]||x[b]}return r=x,A(p,bg(),4);case 4:a=p.h,l={manifest:n,media:r,drm:t,hardwareResolution:a},c=Op;for(d in c)l[d]=c[d]();return p.return(l)}})},we.isBrowserSupported=function(){if(h.Promise||He("A Promise implementation or polyfill is required"),!(h.Promise&&h.Uint8Array&&Array.prototype.forEach)||Wt("Trident/"))return!1;var e=Ts();return e&&9>e||!(h.MediaKeys&&h.navigator&&h.navigator.requestMediaKeySystemAccess&&h.MediaKeySystemAccess&&h.MediaKeySystemAccess.prototype.getConfiguration)?!1:ko()?!0:tu("application/x-mpegurl")},we.setAdManagerFactory=function(e){Xf=e},we.registerSupportPlugin=function(e,t){Op[e]=t},we.prototype.destroy=we.prototype.destroy;var Ro=0,Pp=1,ui=2,vi=3;we.LoadMode={DESTROYED:Ro,NOT_LOADED:Pp,MEDIA_SOURCE:ui,SRC_EQUALS:vi},we.version="v4.10.12";var yv=["4","10"];pi=new function(e){this.g=e,this.i=Vt,this.h=ln}(new Ft(Number(yv[0]),Number(yv[1])));var Op={},Xf=null;function vv(){this.g=[],this.i=this.l=this.j=this.h=0}function Gk(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function pt(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Ae,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}s=pt.prototype,s.needsSkipUI=function(){return!1},s.getDuration=function(){return this.g.getDuration()},s.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},s.getRemainingTime=function(){return this.h.getRemainingTime()},s.isPaused=function(){return this.i},s.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},s.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},s.canSkipNow=function(){return this.h.getAdSkippableState()},s.skip=function(){return this.h.skip()},s.pause=function(){return this.h.pause()},s.play=function(){return this.h.resume()},s.getVolume=function(){return this.h.getVolume()},s.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},s.isMuted=function(){return this.h.getVolume()==0},s.isLinear=function(){return this.g.isLinear()},s.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},s.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},s.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},s.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},s.getTitle=function(){return this.g.getTitle()},s.getDescription=function(){return this.g.getDescription()},s.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},s.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},s.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},s.getAdId=function(){return this.g.getAdId()},s.getCreativeAdId=function(){return this.g.getCreativeAdId()},s.getAdvertiserName=function(){return this.g.getAdvertiserName()},s.getMediaUrl=function(){return this.g.getMediaUrl()},s.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},s.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},s.release=function(){this.h=this.g=null},me("shaka.ads.ClientSideAd",pt),pt.prototype.release=pt.prototype.release,pt.prototype.getPodIndex=pt.prototype.getPodIndex,pt.prototype.getTimeOffset=pt.prototype.getTimeOffset,pt.prototype.getMediaUrl=pt.prototype.getMediaUrl,pt.prototype.getAdvertiserName=pt.prototype.getAdvertiserName,pt.prototype.getCreativeAdId=pt.prototype.getCreativeAdId,pt.prototype.getAdId=pt.prototype.getAdId,pt.prototype.getVastMediaWidth=pt.prototype.getVastMediaWidth,pt.prototype.getVastMediaHeight=pt.prototype.getVastMediaHeight,pt.prototype.getVastMediaBitrate=pt.prototype.getVastMediaBitrate,pt.prototype.getDescription=pt.prototype.getDescription,pt.prototype.getTitle=pt.prototype.getTitle,pt.prototype.getPositionInSequence=pt.prototype.getPositionInSequence,pt.prototype.getSequenceLength=pt.prototype.getSequenceLength,pt.prototype.setMuted=pt.prototype.setMuted,pt.prototype.resize=pt.prototype.resize,pt.prototype.isLinear=pt.prototype.isLinear,pt.prototype.isMuted=pt.prototype.isMuted,pt.prototype.setVolume=pt.prototype.setVolume,pt.prototype.getVolume=pt.prototype.getVolume,pt.prototype.play=pt.prototype.play,pt.prototype.pause=pt.prototype.pause,pt.prototype.skip=pt.prototype.skip,pt.prototype.canSkipNow=pt.prototype.canSkipNow,pt.prototype.getTimeUntilSkippable=pt.prototype.getTimeUntilSkippable,pt.prototype.isSkippable=pt.prototype.isSkippable,pt.prototype.isPaused=pt.prototype.isPaused,pt.prototype.getRemainingTime=pt.prototype.getRemainingTime,pt.prototype.getMinSuggestedDuration=pt.prototype.getMinSuggestedDuration,pt.prototype.getDuration=pt.prototype.getDuration,pt.prototype.needsSkipUI=pt.prototype.needsSkipUI;function tn(){}me("shaka.ads.Utils",tn),tn.ADS_LOADED="ads-loaded",tn.AD_STARTED="ad-started",tn.AD_FIRST_QUARTILE="ad-first-quartile",tn.AD_MIDPOINT="ad-midpoint",tn.AD_THIRD_QUARTILE="ad-third-quartile",tn.AD_COMPLETE="ad-complete",tn.AD_STOPPED="ad-stopped",tn.AD_SKIPPED="ad-skipped",tn.AD_VOLUME_CHANGED="ad-volume-changed",tn.AD_MUTED="ad-muted",tn.AD_PAUSED="ad-paused",tn.AD_RESUMED="ad-resumed",tn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",tn.CUEPOINTS_CHANGED="ad-cue-points-changed",tn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",tn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",tn.AD_CLICKED="ad-clicked",tn.AD_PROGRESS="ad-progress",tn.AD_BUFFERING="ad-buffering",tn.AD_IMPRESSION="ad-impression",tn.AD_DURATION_CHANGED="ad-duration-changed",tn.AD_CLOSED="ad-closed",tn.AD_LOADED="ad-loaded",tn.ALL_ADS_COMPLETED="all-ads-completed",tn.AD_LINEAR_CHANGED="ad-linear-changed",tn.AD_METADATA="ad-metadata",tn.AD_RECOVERABLE_ERROR="ad-recoverable-error",tn.AD_ERROR="ad-error",tn.AD_BREAK_READY="ad-break-ready",tn.AD_INTERACTION="ad-interaction",tn.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",tn.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",tn.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function qf(e,t,n,r,a){var l=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=a,this.j=null,this.h=new Ae,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.12"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(c){Wk(l,c)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(c){xv(l,c)}),this.h.D(this.i,"ended",function(){l.m.contentComplete()}),this.h.ha(this.i,"play",function(){l.F=!0})}qf.prototype.configure=function(e){this.o=e},qf.prototype.stop=function(){this.g&&this.g.stop(),this.s&&Ys(this.s)},qf.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function xv(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new Fe("ad-error",t)),Yf(e,null),e.l(new Fe("ad-cue-points-changed",new Map().set("cuepoints",[])))}function Wk(e,t){if(e.l(new Fe("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new Fe("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=T(r);for(var a=r.next();!a.done;a=r.next())t.push({start:a.value,end:null});e.l(new Fe("ad-cue-points-changed",new Map().set("cuepoints",t)))}Xk(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Kf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Kf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in h?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Kf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Kf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.ha(e.i,"play",function(){e.F=!0,e.g.start()})}catch{Yf(e,null)}}function Kf(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function Xk(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new Fe(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){xv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){wv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){wv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Yf(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Yf(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function wv(e,t){var n=t.getAd();n?(e.j=new pt(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Fe("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Fe("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):He("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Yf(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Fe("ad-content-resume-requested")),e.l(new Fe("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function mt(e,t,n,r,a){this.g=e,this.h=t,this.j=n,this.l=r,this.i=a}s=mt.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},s.isPaused=function(){return this.g.paused},s.isSkippable=function(){return this.h},s.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.j()},s.pause=function(){return this.g.pause()},s.play=function(){return this.g.play()},s.getVolume=function(){return this.g.volume},s.setVolume=function(e){this.g.volume=e},s.isMuted=function(){return this.g.muted},s.isLinear=function(){return!0},s.resize=function(){},s.setMuted=function(e){this.g.muted=e},s.getSequenceLength=function(){return this.l},s.getPositionInSequence=function(){return this.i},s.getTitle=function(){return""},s.getDescription=function(){return""},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return 0},s.getVastMediaWidth=function(){return 0},s.getAdId=function(){return""},s.getCreativeAdId=function(){return""},s.getAdvertiserName=function(){return""},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){return 0},s.getPodIndex=function(){return 0},s.release=function(){this.g=null},me("shaka.ads.InterstitialAd",mt),mt.prototype.release=mt.prototype.release,mt.prototype.getPodIndex=mt.prototype.getPodIndex,mt.prototype.getTimeOffset=mt.prototype.getTimeOffset,mt.prototype.getMediaUrl=mt.prototype.getMediaUrl,mt.prototype.getAdvertiserName=mt.prototype.getAdvertiserName,mt.prototype.getCreativeAdId=mt.prototype.getCreativeAdId,mt.prototype.getAdId=mt.prototype.getAdId,mt.prototype.getVastMediaWidth=mt.prototype.getVastMediaWidth,mt.prototype.getVastMediaHeight=mt.prototype.getVastMediaHeight,mt.prototype.getVastMediaBitrate=mt.prototype.getVastMediaBitrate,mt.prototype.getDescription=mt.prototype.getDescription,mt.prototype.getTitle=mt.prototype.getTitle,mt.prototype.getPositionInSequence=mt.prototype.getPositionInSequence,mt.prototype.getSequenceLength=mt.prototype.getSequenceLength,mt.prototype.setMuted=mt.prototype.setMuted,mt.prototype.resize=mt.prototype.resize,mt.prototype.isLinear=mt.prototype.isLinear,mt.prototype.isMuted=mt.prototype.isMuted,mt.prototype.setVolume=mt.prototype.setVolume,mt.prototype.getVolume=mt.prototype.getVolume,mt.prototype.play=mt.prototype.play,mt.prototype.pause=mt.prototype.pause,mt.prototype.skip=mt.prototype.skip,mt.prototype.canSkipNow=mt.prototype.canSkipNow,mt.prototype.getTimeUntilSkippable=mt.prototype.getTimeUntilSkippable,mt.prototype.isSkippable=mt.prototype.isSkippable,mt.prototype.isPaused=mt.prototype.isPaused,mt.prototype.getRemainingTime=mt.prototype.getRemainingTime,mt.prototype.getMinSuggestedDuration=mt.prototype.getMinSuggestedDuration,mt.prototype.getDuration=mt.prototype.getDuration,mt.prototype.needsSkipUI=mt.prototype.needsSkipUI;function Qf(e,t,n,r){var a=this;this.F=e,this.B=t,this.i=n,this.C=null,this.m=!0,this.s=this.i,this.g=r,this.G=new Set,this.A=new Set,this.o=new Map,this.h=new we,Up(this),this.I=new Ae,this.j=new Ae,this.H=!1,this.l=null,this.I.D(this.i,"timeupdate",function(){if(!a.H){var l=a.l==null||a.l==0;a.l=a.i.currentTime,(l=Sv(a,l))&&Cv(a,l,1,1,Date.now())}}),new Et(function(){var l,c,d,p,x,C,b,k,E,M;return G(function(R){switch(R.g){case 1:if(!a.A.size||a.H||a.l==null){R.u(0);break}l=!1,c=Array.from(a.A),d=a.B.Ob(),p=T(c),x=p.next();case 3:if(x.done){R.u(5);break}if(C=x.value,b=C.endTime||C.startTime,!(1<=d.start-b)){k=C.startTime-a.l,0<k&&10>=k&&(a.o.has(C)||a.o.set(C,a.h.preload(C.uri))),R.u(4);break}if(!a.o.has(C)){R.u(7);break}return A(R,a.o.get(C),8);case 8:(E=R.h)&&E.destroy(),a.o.delete(C);case 7:M=JSON.stringify(C),a.G.has(M)&&a.G.delete(M),a.A.delete(C),l=!0;case 4:x=p.next(),R.u(3);break;case 5:l&&Np(a),Y(R)}})}).Sa(1)}Qf.prototype.configure=function(e){this.F&&this.m==e.supportsMultipleMediaElements&&((this.m=!e.supportsMultipleMediaElements)?(this.s=this.i,this.C&&(this.C.parentElement&&this.F.removeChild(this.C),this.C=null)):(this.C||(e=document.createElement(this.i.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.C=e),this.s=this.C))},Qf.prototype.stop=function(){this.j&&this.j.Ra(),this.G.clear(),this.A.clear(),this.h.Qe(),this.o.clear(),this.h.detach(),this.H=!1,this.l=null},Qf.prototype.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.F&&Ys(this.F),this.h.destroy()};function qk(e,t){var n,r,a,l,c,d,p,x;G(function(C){if(C.g==1)return e.B.yg()==vi&&e.m?(He("Unsupported interstitial when using single media element",t),C.return()):(Up(e),n=!1,A(C,Kk(e,t),2));if(r=C.h,r.length)for(a=T(r),l=a.next();!l.done;l=a.next())c=l.value,d=JSON.stringify(c),e.G.has(d)||(n=!0,e.G.add(d),e.A.add(c),p=!1,t.Ab&&e.l==null?p=!0:c.startTime!=0||c.Ie?e.l!=null&&(x=t.startTime-e.l,0<x&&10>=x&&(p=!0)):p=!0,p&&(e.o.has(c)||e.o.set(c,e.h.preload(c.uri))));else He("Unsupported interstitial",t);n&&Np(e),Y(C)})}function Sv(e,t,n){n=n===void 0?0:n;var r=0,a=null;if(e.A.size&&e.l!=null){var l=e.i.ended,c=Array.from(e.A).sort(function(x,C){return C.startTime-x.startTime});c=T(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var p=!1;if(t?p=d.Ab:l?p=d.nc:d.Ab||d.nc||(p=e.l-Math.round(1e3*d.startTime)/1e3,p=0<p&&(1>=p||!d.Ie)),p){if(r==n){a=d;break}r++}}}return a}function Cv(e,t,n,r,a,l){l=l===void 0?0:l;var c,d,p,x,C,b,k,E,M,R,_,j,U,K;G(function(O){switch(O.g){case 1:if(c=Date.now(),!e.s.parentElement&&e.F&&e.F.appendChild(e.s),r==1&&n==1&&(n=Array.from(e.A).filter(function(V){return t.Ab?V.Ab==t.Ab:t.nc?V.nc==t.nc:.001>Math.abs(V.startTime-t.startTime)}).length),(t.once||t.Ab)&&(l++,e.A.delete(t),Np(e)),e.H=!0,!e.m||r!=1){O.u(2);break}return e.g(new Fe("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),d=new Xt,p=function(V){return G(function(Z){if(Z.g==1)return V.state!="detach"?Z.u(0):Cg()?A(Z,new Promise(function(te){return new Et(te).Y(.1)}),3):Z.u(3);d.resolve(),e.j.jb(e.B,"onstatechange",p),Y(Z)})},e.j.D(e.B,"onstatechange",p),A(O,d,2);case 2:return e.m||(e.i.pause(),t.Oc!=null&&t.Oc!=0&&(e.i.currentTime+=t.Oc)),x=!1,C=null,b=function(){if(!e.m&&t.Oc==null)if(t.se&&t.endTime&&t.endTime!=1/0)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var V=Date.now();e.i.currentTime+=(V-a)/1e3,a=V}},k=function(){var V,Z;return G(function(te){if(te.g==1)return b(),C&&C.stop(),(V=Sv(e,t.Ab,r-l))?(e.g(new Fe("ad-stopped")),e.j.Ra(),Cv(e,V,n,++r,a,l),te.u(0)):e.m?A(te,e.h.detach(),4):A(te,e.h.bc(),4);e.m&&(Z=t.Oc,Z==null&&(Z=t.se&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-a)/1e3),e.g(new Fe("ad-content-resume-requested",new Map().set("offset",Z)))),e.g(new Fe("ad-stopped")),e.j.Ra(),e.H=!1,e.m||(b(),e.i.ended||e.i.play()),Y(te)})},E=function(V){return G(function(Z){return x?Z.return():(x=!0,e.g(new Fe("ad-error",new Map().set("originalEvent",V))),A(Z,k(),0))})},M=function(){return G(function(V){if(V.g==1)return x?V.return():(x=!0,A(V,k(),2));e.g(new Fe("ad-complete")),Y(V)})},R=function(){return G(function(V){return x?V.return():(x=!0,e.g(new Fe("ad-skipped")),A(V,k(),0))})},_=new mt(e.s,t.isSkippable,R,n,r),e.m||(_.setMuted(e.i.muted),_.setVolume(e.i.volume)),e.g(new Fe("ad-started",new Map().set("ad",_))),_.canSkipNow()&&e.g(new Fe("ad-skip-state-changed")),e.j.ha(e.h,"error",E),e.j.ha(e.h,"firstquartile",function(){b(),e.g(new Fe("ad-first-quartile"))}),e.j.ha(e.h,"midpoint",function(){b(),e.g(new Fe("ad-midpoint"))}),e.j.ha(e.h,"thirdquartile",function(){b(),e.g(new Fe("ad-third-quartile"))}),e.j.ha(e.h,"complete",M),e.j.D(e.s,"play",function(){e.g(new Fe("ad-resumed"))}),e.j.D(e.s,"pause",function(){e.g(new Fe("ad-paused"))}),e.j.D(e.s,"volumechange",function(){e.s.muted?e.g(new Fe("ad-muted")):e.g(new Fe("ad-volume-changed"))}),Q(O,4),t.Ef&&(C=new Et(function(){_.skip()}).Y(t.Ef)),Up(e),A(O,e.h.Rb(e.s),6);case 6:return e.o.has(t)?A(O,e.o.get(t),10):A(O,e.h.load(t.uri),8);case 10:return j=O.h,e.o.delete(t),j?A(O,e.h.load(j),8):A(O,e.h.load(t.uri),8);case 8:U=(Date.now()-c)/1e3,e.g(new Fe("ads-loaded",new Map().set("loadTime",U))),e.m&&e.i.play(),q(O,0);break;case 4:K=W(O),E(K),Y(O)}})}function Kk(e,t){var n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye,be,Re;return G(function(Ee){switch(Ee.g){case 1:if(n=[],!t||(r=t.values.find(function(je){return je.key=="X-ASSET-URI"}),a=t.values.find(function(je){return je.key=="X-ASSET-LIST"}),!r&&!a))return Ee.return(n);if(l=t.values.find(function(je){return je.key=="X-RESTRICT"}),d=c=!0,l&&l.data&&(p=l.data,c=!p.includes("SKIP"),d=!p.includes("JUMP")),x=null,(C=t.values.find(function(je){return je.key=="X-RESUME-OFFSET"}))&&(b=C.data,x=parseFloat(b),isNaN(x)&&(x=null)),k=null,(E=t.values.find(function(je){return je.key=="X-PLAYOUT-LIMIT"}))&&(M=E.data,k=parseFloat(M),isNaN(k)&&(k=null)),j=_=R=!1,(U=t.values.find(function(je){return je.key=="CUE"}))&&(K=U.data,R=K.includes("ONCE"),_=K.includes("PRE"),j=K.includes("POST")),O=!1,(V=t.values.find(function(je){return je.key=="X-TIMELINE-OCCUPIES"}))?(Z=V.data,O=Z.includes("RANGE")):!C&&e.B.V()&&(O=!_&&!j),r){if(te=r.data,!te)return Ee.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:te,isSkippable:c,Ie:d,Oc:x,Ef:k,once:R,Ab:_,nc:j,se:O}),Ee.u(2);break}if(!a){Ee.u(2);break}return re=a.data,re?(de=Hn([re],Io()),se=e.B.xb().request(7,de),Q(Ee,4),A(Ee,se.promise,6)):Ee.return(n);case 6:for(ae=Ee.h,he=nn(ae.data),Se=JSON.parse(he),ye=T(Se.ASSETS),be=ye.next();!be.done;be=ye.next())Re=be.value,Re.URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:Re.URI,isSkippable:c,Ie:d,Oc:x,Ef:k,once:R,Ab:_,nc:j,se:O});q(Ee,2);break;case 4:W(Ee);case 2:return Ee.return(n)}})}function Np(e){for(var t=[],n=T(e.A),r=n.next(),a={};!r.done;a={Qb:void 0},r=n.next())r=r.value,a.Qb={start:r.startTime,end:null},r.Ab?(a.Qb.start=0,a.Qb.end=null):r.nc?(a.Qb.start=-1,a.Qb.end=null):r.se&&(a.Qb.end=r.endTime),t.find(function(l){return function(c){return l.Qb.start==c.start&&l.Qb.end==c.end}}(a))||t.push(a.Qb);e.g(new Fe("ad-cue-points-changed",new Map().set("cuepoints",t)))}function Up(e){e.h.configure(e.B.Ag());var t=e.h.xb();t.mg(),t.ng(),ry(e.B.xb(),t)}function kr(e){this.h=e||"",this.g=0}function ia(e){rr(e,/[ \t]+/gm)}function rr(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function is(e){return e.g==e.h.length?null:(e=rr(e,/[^ \t\n]*/gm))?e[0]:null}function ct(e,t,n,r,a){if(this.h=e,e=this.h.skipOffset)if(e=rr(new kr(e),Yk),e==null)e=null;else{var l=Number(e[2]),c=Number(e[3]);e=59<l||59<c?null:(Number(e[4])||0)/1e3+c+60*l+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=a,this.i=t,this.l=n,this.o=r,this.m=!1}s=ct.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){return this.h.durationInSeconds},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},s.isPaused=function(){return this.g.paused},s.isSkippable=function(){return typeof this.j=="number"},s.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},s.pause=function(){return this.g.pause()},s.play=function(){return this.g.play()},s.getVolume=function(){return this.g.volume},s.setVolume=function(e){this.g.volume=e},s.isMuted=function(){return this.g.muted},s.isLinear=function(){return this.o},s.resize=function(){},s.setMuted=function(e){this.g.muted=e},s.getSequenceLength=function(){return this.l?this.l:1},s.getPositionInSequence=function(){return this.i?this.i:1},s.getTitle=function(){return this.h.adTitle},s.getDescription=function(){return""},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return 0},s.getVastMediaWidth=function(){return 0},s.getAdId=function(){return this.h.adId},s.getCreativeAdId=function(){return this.h.creativeId},s.getAdvertiserName=function(){return""},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){return 0},s.getPodIndex=function(){return 0},s.release=function(){this.l=this.i=this.g=this.h=null},me("shaka.ads.MediaTailorAd",ct),ct.prototype.release=ct.prototype.release,ct.prototype.getPodIndex=ct.prototype.getPodIndex,ct.prototype.getTimeOffset=ct.prototype.getTimeOffset,ct.prototype.getMediaUrl=ct.prototype.getMediaUrl,ct.prototype.getAdvertiserName=ct.prototype.getAdvertiserName,ct.prototype.getCreativeAdId=ct.prototype.getCreativeAdId,ct.prototype.getAdId=ct.prototype.getAdId,ct.prototype.getVastMediaWidth=ct.prototype.getVastMediaWidth,ct.prototype.getVastMediaHeight=ct.prototype.getVastMediaHeight,ct.prototype.getVastMediaBitrate=ct.prototype.getVastMediaBitrate,ct.prototype.getDescription=ct.prototype.getDescription,ct.prototype.getTitle=ct.prototype.getTitle,ct.prototype.getPositionInSequence=ct.prototype.getPositionInSequence,ct.prototype.getSequenceLength=ct.prototype.getSequenceLength,ct.prototype.setMuted=ct.prototype.setMuted,ct.prototype.resize=ct.prototype.resize,ct.prototype.isLinear=ct.prototype.isLinear,ct.prototype.isMuted=ct.prototype.isMuted,ct.prototype.setVolume=ct.prototype.setVolume,ct.prototype.getVolume=ct.prototype.getVolume,ct.prototype.play=ct.prototype.play,ct.prototype.pause=ct.prototype.pause,ct.prototype.skip=ct.prototype.skip,ct.prototype.canSkipNow=ct.prototype.canSkipNow,ct.prototype.getTimeUntilSkippable=ct.prototype.getTimeUntilSkippable,ct.prototype.isSkippable=ct.prototype.isSkippable,ct.prototype.isPaused=ct.prototype.isPaused,ct.prototype.getRemainingTime=ct.prototype.getRemainingTime,ct.prototype.getMinSuggestedDuration=ct.prototype.getMinSuggestedDuration,ct.prototype.getDuration=ct.prototype.getDuration,ct.prototype.needsSkipUI=ct.prototype.needsSkipUI;var Yk=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Ru(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.U=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.o=new Ae}Ru.prototype.stop=function(){for(var e=T(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.jb(t.target,t.type,t.listener);oa(this),this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},Ru.prototype.release=function(){this.stop(),this.o&&this.o.release()},Ru.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(Zk(this,this.G,this.R),this.R=!1)},Ru.prototype.getCuePoints=function(){for(var e=[],t=T(this.j),n=t.next();!n.done;n=t.next()){n=T(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function Qk(e,t,n){var r,a,l,c,d,p,x,C,b,k,E;G(function(M){if(M.g==1)return r=Hn([t],Io()),r.method="POST",n&&(a=JSON.stringify(n),r.body=Ao(a)),l=e.K.request(7,r),Q(M,2),A(M,l.promise,4);if(M.g!=2){if(c=M.h,d=nn(c.data),p=JSON.parse(d),p.manifestUrl&&p.trackingUrl)x=new Tn(t),C=new Tn(p.trackingUrl),e.G=x.resolve(C).toString(),b=Date.now()/1e3,k=b-e.U,e.i(new Fe("ads-loaded",new Map().set("loadTime",k))),E=new Tn(p.manifestUrl),e.l.resolve(x.resolve(E).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return q(M,0)}if(W(M),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,M.return();e.l.resolve(e.H),e.l=null,Y(M)})}function Zk(e,t,n){var r,a,l,c,d,p,x,C,b,k,E,M,R,_,j;G(function(U){if(U.g==1)return r=Hn([t],Io()),a=e.K.request(7,r),Q(U,2),A(U,a.promise,4);if(U.g!=2){if(l=U.h,c=[],d=nn(l.data),p=JSON.parse(d),0<p.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(p.avails)){for(e.j=p.avails,x=T(e.j),C=x.next();!C.done;C=x.next())for(b=C.value,k=T(b.nonLinearAdsList),E=k.next();!E.done;E=k.next())for(M=E.value,R=T(M.nonLinearAdList),_=R.next();!_.done;_=R.next())j=_.value,Jk(e,j);c=e.getCuePoints(),e.i(new Fe("ad-cue-points-changed",new Map().set("cuepoints",c)))}}else e.j.length&&e.i(new Fe("ad-cue-points-changed",new Map().set("cuepoints",c))),oa(e),e.j=[];return n&&(e.I||0<c.length)&&eA(e),q(U,0)}W(U),Y(U)})}function Jk(e,t){var n,r,a,l,c,d,p;G(function(x){if(x.g==1)return!t.staticResource||(n=Tv(t),e.F.get(n))?x.return():(r=Hn([t.staticResource],Io()),a=e.K.request(7,r),Q(x,2),e.F.set(n,[]),A(x,a.promise,4));if(x.g!=2)return l=x.h,c=nn(l.data),d=JSON.parse(c),p=d.apps,e.F.set(n,p),q(x,0);W(x),e.F.delete(n),Y(x)})}function Tv(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function eA(e){Ev(e),e.I||(bv(e),e.o.D(e.h,"seeked",function(){bv(e)}),e.o.D(e.h,"ended",function(){oa(e)})),e.o.D(e.h,"timeupdate",function(){Ev(e)})}function bv(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,r,a=T(e.j),l=a.next();!l.done;l=a.next()){l=l.value;for(var c=T(l.ads),d=c.next();!d.done;d=c.next())if(d=d.value,!r)d.startTimeInSeconds<t&&(r=d,n=l);else if(d.startTimeInSeconds<t&&d.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=d,n=l;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function Ev(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,a=r.startTimeInSeconds+.5*r.durationInSeconds,l=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),li(e,"firstQuartile")):t>=a&&!e.s.includes("midpoint")?(e.s.push("midpoint"),li(e,"midpoint")):t>=l&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),li(e,"thirdQuartile")),r=e.g.getRemainingTime(),a=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<a&&li(e,"skipStateChanged"),0<a&&(0>=r||r>a)&&oa(e)}if(!e.g||!e.g.isLinear()){e:for(r=T(e.j),a=r.next();!a.done&&(a=a.value,!(e.g&&e.g.isLinear()));a=r.next())for(l=0;l<a.ads.length;l++){var c=a.ads[l],d=c.startTimeInSeconds+c.durationInSeconds;if(c.startTimeInSeconds<=t&&d>t){if(e.N.includes(c.adId)){if(e.h.ended)continue;e.h.currentTime=d;break e}oa(e),e.L=a,e.g=new ct(c,l+1,a.ads.length,!0,e.h),e.C=c,l===0&&li(e,"breakStart"),kv(e);break}}if(!e.g){for(r=T(e.j),a=r.next();!a.done&&(a=a.value,!e.g);a=r.next())for(l=0;l<a.nonLinearAdsList.length;l++)if(c=a.nonLinearAdsList[l],c.nonLinearAdList.length){d=a.startTimeInSeconds;var p=e.F.get(Tv(c.nonLinearAdList[0]));if(d<=t&&p&&p.length){oa(e),d=e,p=T(p);for(var x=p.next();!x.done;x=p.next())if(x=x.value,x.data.source.length){var C=document.createElement("img");C.src=x.data.source[0].url,C.style.top=(x.placeholder.top||0)+"%",C.style.height=100-(x.placeholder.top||0)+"%",C.style.left=(x.placeholder.left||0)+"%",C.style.maxWidth=100-(x.placeholder.left||0)+"%",C.style.objectFit="contain",C.style.position="absolute",d.B.appendChild(C)}e.L=a,e.g=new ct(c,l+1,a.ads.length,!1,e.h),e.C=c,l===0&&li(e,"breakStart"),kv(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function oa(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?li(e,"skip"):li(e,"complete"),t=T(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.jb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&li(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function kv(e){var t=!1;e.h.paused?t=!0:(li(e,"impression"),li(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&li(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||li(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(li(e,"impression"),li(e,"start"),t=!1):li(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){li(e,"pause")}});for(var n=T(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function li(e,t){var n=e.C.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){n=T(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Hn([r],Io()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new Fe("ad-impression"));break;case"start":e.i(new Fe("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new Fe("ad-muted"));break;case"unmute":e.i(new Fe("ad-volume-changed"));break;case"resume":e.i(new Fe("ad-resumed"));break;case"pause":e.i(new Fe("ad-paused"));break;case"firstQuartile":e.i(new Fe("ad-first-quartile"));break;case"midpoint":e.i(new Fe("ad-midpoint"));break;case"thirdQuartile":e.i(new Fe("ad-third-quartile"));break;case"complete":e.i(new Fe("ad-complete")),e.i(new Fe("ad-stopped"));break;case"skip":e.i(new Fe("ad-skipped")),e.i(new Fe("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Fe("ad-skip-state-changed"))}}function gt(e,t){this.g=e,this.i=null,this.h=t}s=gt.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){return this.i?this.i.duration:-1},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},s.isPaused=function(){return this.h.paused},s.isSkippable=function(){return this.g.isSkippable()},s.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.h.currentTime+=this.getRemainingTime()},s.pause=function(){return this.h.pause()},s.play=function(){return this.h.play()},s.getVolume=function(){return this.h.volume},s.setVolume=function(e){this.h.volume=e},s.isMuted=function(){return this.h.muted},s.isLinear=function(){return!0},s.resize=function(){},s.setMuted=function(e){this.h.muted=e},s.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},s.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},s.getTitle=function(){return this.g.getTitle()},s.getDescription=function(){return this.g.getDescription()},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},s.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},s.getAdId=function(){return this.g.getAdId()},s.getCreativeAdId=function(){return this.g.getCreativeAdId()},s.getAdvertiserName=function(){return this.g.getAdvertiserName()},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},s.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},s.release=function(){this.h=this.i=this.g=null},me("shaka.ads.ServerSideAd",gt),gt.prototype.release=gt.prototype.release,gt.prototype.getPodIndex=gt.prototype.getPodIndex,gt.prototype.getTimeOffset=gt.prototype.getTimeOffset,gt.prototype.getMediaUrl=gt.prototype.getMediaUrl,gt.prototype.getAdvertiserName=gt.prototype.getAdvertiserName,gt.prototype.getCreativeAdId=gt.prototype.getCreativeAdId,gt.prototype.getAdId=gt.prototype.getAdId,gt.prototype.getVastMediaWidth=gt.prototype.getVastMediaWidth,gt.prototype.getVastMediaHeight=gt.prototype.getVastMediaHeight,gt.prototype.getVastMediaBitrate=gt.prototype.getVastMediaBitrate,gt.prototype.getDescription=gt.prototype.getDescription,gt.prototype.getTitle=gt.prototype.getTitle,gt.prototype.getPositionInSequence=gt.prototype.getPositionInSequence,gt.prototype.getSequenceLength=gt.prototype.getSequenceLength,gt.prototype.setMuted=gt.prototype.setMuted,gt.prototype.resize=gt.prototype.resize,gt.prototype.isLinear=gt.prototype.isLinear,gt.prototype.isMuted=gt.prototype.isMuted,gt.prototype.setVolume=gt.prototype.setVolume,gt.prototype.getVolume=gt.prototype.getVolume,gt.prototype.play=gt.prototype.play,gt.prototype.pause=gt.prototype.pause,gt.prototype.skip=gt.prototype.skip,gt.prototype.canSkipNow=gt.prototype.canSkipNow,gt.prototype.getTimeUntilSkippable=gt.prototype.getTimeUntilSkippable,gt.prototype.isSkippable=gt.prototype.isSkippable,gt.prototype.isPaused=gt.prototype.isPaused,gt.prototype.getRemainingTime=gt.prototype.getRemainingTime,gt.prototype.getMinSuggestedDuration=gt.prototype.getMinSuggestedDuration,gt.prototype.getDuration=gt.prototype.getDuration,gt.prototype.needsSkipUI=gt.prototype.needsSkipUI;function Av(e,t,n,r){var a=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Ae,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Fe("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(l){tA(a,l)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){a.B.length?a.j.resolve(a.B):a.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),a.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(l){l=l.getAd(),a.m=new gt(l,a.l),a.A&&(a.m.i=a.A),a.i(new Fe("ad-started",new Map().set("ad",a.m))),a.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){a.s.removeAttribute("ad-active");var l=a.l.currentTime;a.o&&a.o>l&&(a.l.currentTime=a.o,a.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(l){a.A=l.getStreamData().adProgressData,a.m&&(a.m.i=a.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){a.i(new Fe("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){a.i(new Fe("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){a.i(new Fe("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){a.i(new Fe("ad-complete")),a.i(new Fe("ad-stopped")),a.s.removeAttribute("ad-active"),a.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){a.i(new Fe("ad-skipped")),a.i(new Fe("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(l){var c=l.getStreamData();l=[],c=T(c.cuepoints);for(var d=c.next();!d.done;d=c.next())d=d.value,l.push({start:d.start,end:d.end});a.C=l,a.i(new Fe("ad-cue-points-changed",new Map().set("cuepoints",l)))})}s=Av.prototype,s.configure=function(){},s.stop=function(){this.B="",this.o=null,this.C=[]},s.release=function(){this.stop(),this.h&&this.h.release()},s.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},s.getCuePoints=function(){return this.C};function tA(e,t){e.i(new Fe("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function Qe(){Bt.call(this),this.g=this.h=this.i=this.j=null,this.m=new vv,this.o=navigator.language,this.l=null}$(Qe,Bt),s=Qe.prototype,s.setLocale=function(e){this.o=e},s.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},s.initInterstitial=function(e,t,n){var r=this;this.j&&this.j.release(),this.j=new Qf(e,t,n,function(a){return Zf(r,a)}),this.j.configure(this.l)},s.initClientSide=function(e,t,n){var r=this;if(!h.google||!google.ima||!google.ima.AdsLoader)throw new ne(2,10,1e4);this.i&&this.i.release(),this.i=new qf(e,t,this.o,n,function(a){return Zf(r,a)}),this.i.configure(this.l)},s.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Bt.prototype.release.call(this)},s.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Fe("ad-stopped")),this.dispatchEvent(new Fe("ad-content-attach-requested")),this.m=new vv},s.requestClientSideAds=function(e){if(!this.i)throw new ne(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},s.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new ne(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},s.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new Ru(e,t,n,function(a){return Zf(r,a)})},s.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new ne(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new ne(1,10,10004)):(r.l=new Xt,Qk(r,e,t),r.H=n||"",r.U=Date.now()/1e3,e=r.l),e},s.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new ne(1,10,10005);var t=this.h;t.G=e,t.i(new Fe("ads-loaded",new Map().set("loadTime",0)))},s.initServerSide=function(e,t){var n=this;if(!h.google||!google.ima||!google.ima.dai)throw new ne(2,10,10002);this.g&&this.g.release(),this.g=new Av(e,t,this.o,function(r){return Zf(n,r)}),this.g.configure(this.l)},s.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new ne(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.12",n=this.g,n.j?e=Promise.reject(new ne(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Xt,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},s.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new ne(1,10,10003);(e.mpt||e.mpv)&&He('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.12",this.g.g.replaceAdTagParameters(e)},s.getServerSideCuePoints=function(){return Tt("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},s.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},s.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Gk(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},s.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},s.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},s.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},s.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},s.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&qk(this.j,n)};function Zf(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}me("shaka.ads.AdManager",Qe),Qe.prototype.onInterstitialMetadata=Qe.prototype.onInterstitialMetadata,Qe.prototype.onCueMetadataChange=Qe.prototype.onCueMetadataChange,Qe.prototype.onHlsTimedMetadata=Qe.prototype.onHlsTimedMetadata,Qe.prototype.onDashTimedMetadata=Qe.prototype.onDashTimedMetadata,Qe.prototype.onManifestUpdated=Qe.prototype.onManifestUpdated,Qe.prototype.getStats=Qe.prototype.getStats,Qe.prototype.getCuePoints=Qe.prototype.getCuePoints,Qe.prototype.getServerSideCuePoints=Qe.prototype.getServerSideCuePoints,Qe.prototype.replaceServerSideAdTagParameters=Qe.prototype.replaceServerSideAdTagParameters,Qe.prototype.requestServerSideStream=Qe.prototype.requestServerSideStream,Qe.prototype.initServerSide=Qe.prototype.initServerSide,Qe.prototype.addMediaTailorTrackingUrl=Qe.prototype.addMediaTailorTrackingUrl,Qe.prototype.requestMediaTailorStream=Qe.prototype.requestMediaTailorStream,Qe.prototype.initMediaTailor=Qe.prototype.initMediaTailor,Qe.prototype.updateClientSideAdsRenderingSettings=Qe.prototype.updateClientSideAdsRenderingSettings,Qe.prototype.requestClientSideAds=Qe.prototype.requestClientSideAds,Qe.prototype.onAssetUnload=Qe.prototype.onAssetUnload,Qe.prototype.release=Qe.prototype.release,Qe.prototype.initClientSide=Qe.prototype.initClientSide,Qe.prototype.initInterstitial=Qe.prototype.initInterstitial,Qe.prototype.configure=Qe.prototype.configure,Qe.prototype.setLocale=Qe.prototype.setLocale,Qe.ADS_LOADED="ads-loaded",Qe.AD_STARTED="ad-started",Qe.AD_FIRST_QUARTILE="ad-first-quartile",Qe.AD_MIDPOINT="ad-midpoint",Qe.AD_THIRD_QUARTILE="ad-third-quartile",Qe.AD_COMPLETE="ad-complete",Qe.AD_STOPPED="ad-stopped",Qe.AD_SKIPPED="ad-skipped",Qe.AD_VOLUME_CHANGED="ad-volume-changed",Qe.AD_MUTED="ad-muted",Qe.AD_PAUSED="ad-paused",Qe.AD_RESUMED="ad-resumed",Qe.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Qe.CUEPOINTS_CHANGED="ad-cue-points-changed",Qe.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Qe.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Qe.AD_CLICKED="ad-clicked",Qe.AD_PROGRESS="ad-progress",Qe.AD_BUFFERING="ad-buffering",Qe.AD_IMPRESSION="ad-impression",Qe.AD_DURATION_CHANGED="ad-duration-changed",Qe.AD_CLOSED="ad-closed",Qe.AD_LOADED="ad-loaded",Qe.ALL_ADS_COMPLETED="all-ads-completed",Qe.AD_LINEAR_CHANGED="ad-linear-changed",Qe.AD_METADATA="ad-metadata",Qe.AD_RECOVERABLE_ERROR="ad-recoverable-error",Qe.AD_ERROR="ad-error",Qe.AD_BREAK_READY="ad-break-ready",Qe.AD_INTERACTION="ad-interaction",Qe.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Qe.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Qe.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Xf=function(){return new Qe};function Iv(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Fe){var r={};for(a in n)(t=n[a])&&typeof t=="object"?a=="detail"&&(r[a]=t):a in Event||(r[a]=t);return r}if(n instanceof Error){var a=new Set(["name","message","stack"]);for(r in n)a.add(r);for(r=T(Object.getOwnPropertyNames(n)),t=r.next();!t.done;t=r.next())a.add(t.value);for(r={},a=T(a),t=a.next();!t.done;t=a.next())t=t.value,r[t]=n[t];n={__type__:"Error",contents:r}}else if(n instanceof TimeRanges){for(a={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=T(br(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,a.start.push(r.start),a.end.push(t);n=a}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function Bp(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=nA(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function nA(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Mv="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),iA="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),jp=["loop","playbackRate"],oA=["pause","play"],Jf={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},ec={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Fp={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},_v=[["getConfiguration","configure"]],Rv=[["isTextTrackVisible","setTextTrackVisibility"]],rA="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),sA=["attach","attachCanvas","detach","load","unload"];function $p(e,t,n,r,a,l,c){var d=this;this.G=e,this.K=c,this.l=new Et(t),this.L=n,this.s=!1,this.A=r,this.F=a,this.N=l,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return zp(d)},this.C=function(p,x){switch(p=Bp(x),p.type){case"event":var C=p.targetName,b=oy(p.event);d.A(C,b);break;case"update":C=p.update;for(b in C){p=d.g[b]||{};for(var k in C[b])p[k]=C[b][k]}d.s&&(d.L(),d.s=!1);break;case"asyncComplete":if(b=p.id,k=p.error,p=d.i[b],delete d.i[b],p)if(k){b=new ne(k.severity,k.category,k.code);for(C in k)b[C]=k[C];p.reject(b)}else p.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,Du.add(this)}s=$p.prototype,s.destroy=function(){return Du.delete(this),Vp(this),xo&&Dv(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},s.fb=function(){return this.h},s.Ff=function(){return this.I},s.init=function(){if(this.G.length)if(h.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.tc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=T(Du),r=n.next();!r.done;r=n.next()){r=r.value;var a=t;r.j=new Xt,r.s=!0,tc(r,a)}},function(t){for(var n=T(Du),r=n.next();!r.done;r=n.next())r=r.value,nc=t=="available",r.l.tc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),nc&&this.l.Y(uA),(e=xo)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Xt,this.s=!0,tc(this,e)):xo=null}else h.__onGCastApiAvailable!==Pv&&(ic=h.__onGCastApiAvailable||null,h.__onGCastApiAvailable=Pv)},s.Nf=function(e){this.o=e,this.h&&Lu(this,{type:"appData",appData:this.o})},s.cast=function(){var e=this;return G(function(t){if(!e.m)throw new ne(1,8,8e3);if(!nc)throw new ne(1,8,8001);if(e.h)throw new ne(1,8,8002);return e.j=new Xt,chrome.cast.requestSession(function(n){return tc(e,n)},function(n){return Lv(e,n)}),A(t,e.j,0)})};function aA(e){e.h&&chrome.cast.requestSession(function(t){return tc(e,t)},function(t){return Lv(e,t)})}s.Cc=function(){if(this.h){if(Vp(this),xo){Dv(this);try{xo.stop(function(){},function(){})}catch{}xo=null}zp(this)}},s.get=function(e,t){var n=this;if(e=="video"){if(oA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(L(Ie.apply(0,arguments))))}}else if(e=="player"){if(Fp[t]&&!this.get("player","isLive")())return function(){};if(rA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(L(Ie.apply(0,arguments))))};if(sA.includes(t))return function(){return n.Ki.apply(n,[e,t].concat(L(Ie.apply(0,arguments))))};if(Jf[t]||ec[t])return function(){return n.g[e][t]}}return this.g[e][t]},s.set=function(e,t,n){this.g[e][t]=n,Lu(this,{type:"set",targetName:e,property:t,value:n})};function tc(e,t){var n=e.N();xo=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),zp(e),Lu(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Lv(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new ne(2,8,n,t))}s.Ug=function(e,t){Lu(this,{type:"call",targetName:e,methodName:t,args:Ie.apply(2,arguments)})},s.Ki=function(e,t){var n=Ie.apply(2,arguments),r=new Xt,a=this.H.toString();this.H++,this.i[a]=r;try{Lu(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:a})}catch(l){r.reject(l)}return r};function Dv(e){var t=xo;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function zp(e){var t=xo?xo.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};Vp(e)}e.h=t,e.I=t?xo.receiver.friendlyName:"",e.l.tc()}function Vp(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new ne(1,7,7e3))}}function Lu(e,t){t=Iv(t);var n=xo;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},J)}catch(r){throw t=new ne(2,8,8005,r),n=new Fe("error",new Map().set("detail",t)),e.A("player",n),e.Cc(),t}}var uA=.02,nc=!1,xo=null,ic=null,Du=new Set;function Pv(e){if(ic?h.__onGCastApiAvailable=ic:delete h.__onGCastApiAvailable,ic=null,e)for(var t=T(Du),n=t.next();!n.done;n=t.next())n.value.init();typeof h.__onGCastApiAvailable=="function"&&h.__onGCastApiAvailable(e)}function kn(e,t,n,r){r=r===void 0?!1:r,Bt.call(this);var a=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new $p(n,function(){return Uv(a)},function(){return Bv(a)},function(l,c){return Fv(a,l,c)},function(){return jv(a)},function(){return Nv(a)},r),lA(this)}$(kn,Bt),s=kn.prototype,s.destroy=function(e){return e&&this.g.Cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Bt.prototype.release.call(this),Promise.all(e)},s.fi=function(){return this.l},s.Vh=function(){return this.s},s.Ah=function(){return this.g.m&&nc},s.fb=function(){return this.g.fb()},s.Ff=function(){return this.g.Ff()},s.cast=function(){var e=this;return G(function(t){return t.g==1?A(t,e.g.cast(),2):e.h?A(t,e.h.bc(),0):t.return()})},s.Nf=function(e){this.g.Nf(e)},s.$i=function(){aA(this.g)},s.Cc=function(){this.g.Cc()},s.Bh=function(e,t){t=t===void 0?!1:t;var n=this;return G(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Cc(),A(r,n.g.destroy(),2));n.g=null,n.g=new $p(e,function(){return Uv(n)},function(){return Bv(n)},function(a,l){return Fv(n,a,l)},function(){return jv(n)},function(){return Nv(n)},t),n.g.init(),Y(r)})};function lA(e){e.g.init(),e.m=new Ae;for(var t=T(Mv),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(l){e.g.fb()||(l=oy(l),e.j.dispatchEvent(l))});for(var r in rf)e.m.D(e.h,rf[r],function(l){e.g.fb()||e.o.dispatchEvent(l)});e.l={},t={};for(var a in e.i)t={nd:t.nd},t.nd=a,Object.defineProperty(e.l,t.nd,{configurable:!1,enumerable:!0,get:function(l){return function(){return cA(e,l.nd)}}(t),set:function(l){return function(c){var d=l.nd;e.g.fb()?e.g.set("video",d,c):e.i[d]=c}}(t)});e.s={},Ov(e,function(l){Object.defineProperty(e.s,l,{configurable:!1,enumerable:!0,get:function(){return hA(e,l)}})}),fA(e),e.j=new Bt,e.j.me=e.l,e.o=new Bt,e.o.me=e.s}function fA(e){var t=new Map;Ov(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function Ov(e,t){function n(p){return p=="constructor"||typeof r[p]!="function"?!1:!a.has(p)}var r=e.h,a=new Set,l;for(l in r)n(l)&&(a.add(l),t(l,r[l]));for(e=Object.getPrototypeOf(r),l=Object.getPrototypeOf({});e&&e!=l;){for(var c=T(Object.getOwnPropertyNames(e)),d=c.next();!d.done;d=c.next())d=d.value,n(d)&&(a.add(d),t(d,r[d]));e=Object.getPrototypeOf(e)}}function Nv(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dc(),startTime:null};e.i.pause();for(var n=T(jp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=T(_v),r=n.next();!r.done;r=n.next()){var a=r.value;r=a[1],a=e.h[a[0]](),t.player[r]=a}for(n=T(Rv),r=n.next();!r.done;r=n.next())a=r.value,r=a[1],a=e.h[a[0]](),t.playerAfterLoad[r]=a;return t}function Uv(e){var t=new Fe("caststatuschanged");e.dispatchEvent(t)}function Bv(e){var t=new Fe(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function jv(e){for(var t=T(_v),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var a=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var l=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var c;(r=e.g.get("player","getTextTracks")())&&r.length&&(c=r.find(function(x){return x.active}));var d=e.g.get("player","isTextTrackVisible")();a&&(e.i.autoplay=!1,t=e.h.load(a,n));var p={};for(n=T(jp),r=n.next();!r.done;r=n.next())r=r.value,p[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var x=T(jp),C=x.next();!C.done;C=x.next())C=C.value,e.i[C]=p[C];for(x=T(Rv),C=x.next();!C.done;C=x.next()){var b=C.value;C=b[1],b=e.g.get("player",b[0])(),e.h[C](b)}e.h.eh(d),c&&e.h.Lf(c.language,c.roles,c.forced),e.i.autoplay=l,a&&e.i.play()}},function(x){x=new Map().set("detail",x),x=new Fe("error",x),e.h.dispatchEvent(x)})}function cA(e,t){if(t=="addEventListener")return function(r,a,l){return e.j.addEventListener(r,a,l)};if(t=="removeEventListener")return function(r,a,l){return e.j.removeEventListener(r,a,l)};if(e.g.fb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.fb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function hA(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,a){return e.o.addEventListener(n,r,a)};if(t=="removeEventListener")return function(n,r,a){return e.o.removeEventListener(n,r,a)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.xb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.ug()};if(t=="setVideoContainer")return function(n){return e.h.ih(n)};if(e.g.fb()){if(t=="getManifest"||t=="drmInfo")return function(){return He(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return He(t+"() does not work while casting!"),Promise.resolve()}}return e.g.fb()&&Object.keys(e.g.g.video).length==0&&(Jf[t]||ec[t])||!e.g.fb()?e.h[t].bind(e.h):e.g.get("player",t)}function Fv(e,t,n){e.g.fb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}me("shaka.cast.CastProxy",kn),kn.prototype.changeReceiverId=kn.prototype.Bh,kn.prototype.forceDisconnect=kn.prototype.Cc,kn.prototype.suggestDisconnect=kn.prototype.$i,kn.prototype.setAppData=kn.prototype.Nf,kn.prototype.cast=kn.prototype.cast,kn.prototype.receiverName=kn.prototype.Ff,kn.prototype.isCasting=kn.prototype.fb,kn.prototype.canCast=kn.prototype.Ah,kn.prototype.getPlayer=kn.prototype.Vh,kn.prototype.getVideo=kn.prototype.fi,kn.prototype.destroy=kn.prototype.destroy;function Jn(e,t,n,r){Bt.call(this);var a=this;this.g=e,this.h=t,this.j=new Ae,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(l){return l},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new Et(function(){Hp(a)}),dA(this)}$(Jn,Bt),s=Jn.prototype,s.isConnected=function(){return this.G},s.mi=function(){return this.o},s.Wi=function(e){this.i=e},s.Dh=function(){this.i=null},s.Xi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},s.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},s.Ui=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},s.destroy=function(){var e=this,t,n;return G(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Bt.prototype.release.call(e),A(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),Y(r)})};function dA(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return $v(e)},t.onSenderDisconnected=function(){return $v(e)},t.onSystemVolumeChanged=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&sr(e,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},e.l),sr(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(a){return gA(e,a)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(a){return mA(e,a)},t.start(),t=T(Mv);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(a){return zv(e,"video",a)});for(var r in rf)e.j.D(e.h,rf[r],function(a){return zv(e,"player",a)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,ra(e)}),e.j.D(e.g,"playing",function(){e.o=!1,ra(e)}),e.j.D(e.g,"pause",function(){ra(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,ra(e)}),e.j.D(e.g,"ended",function(){new Et(function(){e.g&&e.g.ended&&(e.o=!0,ra(e))}).Y(vA)})}function $v(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,ra(e)}function ra(e){var t;G(function(n){if(n.g==1)return A(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Fe("caststatuschanged"),e.dispatchEvent(t),Vv(e)||ar(e),Y(n)})}function pA(e,t,n){var r,a,l,c,d,p,x,C,b,k;G(function(E){switch(E.g){case 1:for(r in t.player)a=t.player[r],e.h[r](a);return e.F(n),l=e.g.autoplay,t.manifest?(e.g.autoplay=!1,Q(E,5),A(E,e.h.load(t.manifest,t.startTime),7)):A(E,Promise.resolve(),3);case 7:q(E,3);break;case 5:return c=W(E),d=new Map().set("detail",c),p=new Fe("error",d),e.h&&e.h.dispatchEvent(p),E.return();case 3:if(!e.h)return E.return();for(x in t.video)C=t.video[x],e.g[x]=C;for(b in t.playerAfterLoad)k=t.playerAfterLoad[b],e.h[b](k);e.g.autoplay=l,t.manifest&&(e.g.play(),ar(e)),Y(E)}})}function zv(e,t,n){e.h&&(Hp(e),sr(e,{type:"event",targetName:t,event:n},e.l))}function Hp(e){e.C.Y(yA);for(var t={video:{},player:{}},n=T(iA),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.V())for(var a in Fp)e.m%Fp[a]==0&&(t.player[a]=e.h[a]());for(var l in Jf)e.m%Jf[l]==0&&(t.player[l]=e.h[l]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),sr(e,{type:"update",update:t},e.l);for(var c in ec)e.m%ec[c]==0&&(t={player:{}},t.player[c]=e.h[c](),sr(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),Vv(e)}function Vv(e){return e.A&&(e.g.duration||e.h.V())?(Gp(e),e.A=!1,!0):!1}function Gp(e,t){var n={contentId:e.h.Dc(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),ar(e,t===void 0?0:t,n)}function mA(e,t){var n=Bp(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,pA(e,n.initState,n.appData),Hp(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,a=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),a=="volume"){t.setSystemVolumeLevel(n);break}else if(a=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][a]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,a=n.methodName,r=="player"&&a=="load"&&(e.m=0,e.B=!1);var l=n.id,c=t.senderId;t=e.H[r],n=t[a].apply(t,n.args),r=="player"&&a=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return Hv(e,c,l,null)},function(d){return Hv(e,c,l,d)})}}function gA(e,t){var n=Bp(t.data);switch(n.type){case"PLAY":e.g.play(),ar(e);break;case"PAUSE":e.g.pause(),ar(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),ar(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),ar(e));break;case"STOP":e.h.bc().then(function(){e.h&&ar(e)});break;case"GET_STATUS":Gp(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var a=e.g.volume,l=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),a==e.g.volume&&l==e.g.muted||ar(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,a=e.I(t.contentId),l=n.autoplay||!0,e.F(t.customData),l&&(e.g.autoplay=!0),e.h.load(a,r).then(function(){e.h&&Gp(e)}).catch(function(c){var d="LOAD_FAILED";c.category==7&&c.code==7e3&&(d="LOAD_CANCELLED"),sr(e,{requestId:Number(n.requestId),type:d},e.s)});break;default:sr(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Hv(e,t,n,r){e.h&&sr(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function sr(e,t,n,r){e.G&&(e=Iv(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function ar(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?xA:e.h.pf()?SA:e.g.paused?CA:wA,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),sr(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}me("shaka.cast.CastReceiver",Jn),Jn.prototype.destroy=Jn.prototype.destroy,Jn.prototype.setContentArtist=Jn.prototype.Ui,Jn.prototype.setContentImage=Jn.prototype.Vi,Jn.prototype.setContentTitle=Jn.prototype.Xi,Jn.prototype.clearContentMetadata=Jn.prototype.Dh,Jn.prototype.setContentMetadata=Jn.prototype.Wi,Jn.prototype.isIdle=Jn.prototype.mi,Jn.prototype.isConnected=Jn.prototype.isConnected;var yA=.5,vA=5,xA="IDLE",wA="PLAYING",SA="BUFFERING",CA="PAUSED";function Gv(e,t,n,r,a){if(r>=a)return null;for(var l=-1,c=-1,d=0;d<n.length;d++)if(n[d].some(function(O){return O!=null&&O.g.trim()!=""})){l=d;break}for(d=n.length-1;0<=d;d--)if(n[d].some(function(O){return O!=null&&O.g.trim()!=""})){c=d;break}if(l===-1||c===-1)return null;for(var p=d=!1,x="white",C="black",b=Wp(r,a,d,p,x,C);l<=c;l++){for(var k=n[l],E=-1,M=-1,R=0;R<k.length;R++)if(k[R]!=null&&k[R].g.trim()!==""){E=R;break}for(R=k.length-1;0<=R;R--)if(k[R]!=null&&k[R].g.trim()!==""){M=R;break}if(E===-1||M===-1)k=Wv(r,a),e.nestedCues.push(k);else{for(;E<=M;E++)if(R=k[E]){var _=R.l,j=R.i,U=R.j,K=R.h;(_!=d||j!=p||U!=x||K!=C)&&(b.payload&&e.nestedCues.push(b),b=Wp(r,a,_,j,U,K),d=_,p=j,x=U,C=K),b.payload+=R.g}else b.payload+=" ";b.payload&&e.nestedCues.push(b),l!==c&&(b=Wv(r,a),e.nestedCues.push(b)),b=Wp(r,a,d,p,x,C)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Wp(e,t,n,r,a,l){return e=new Lt(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=a,e.backgroundColor=l,e}function Wv(e,t){return e=new Lt(e,t,""),e.lineBreak=!0,e}function Xv(e,t,n,r,a){this.g=e,this.l=t,this.i=n,this.h=r,this.j=a}function Xp(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Pu(this)}function oc(e,t,n){var r="CC"+((e.A<<1|e.s)+1),a=new Lt(t,n,"");a.lineInterpretation=1;var l=Yv.get(e.g);return l&&(a.line=l),(t=Gv(a,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(l=Yv.get(e.g+3-t.cue.nestedCues.length))&&(a.line=l),t}function Pu(e){ur(e,0,15),e.g=1}function sa(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=Kv.has(n)?Kv.get(n):String.fromCharCode(n);break;case 1:r=TA.get(n);break;case 2:e.i[e.g].pop(),r=bA.get(n);break;case 3:e.i[e.g].pop(),r=EA.get(n)}r&&e.i[e.g].push(new Xv(r,e.m,e.j,e.o,e.l))}}function qv(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(l){return l});else for(var a=0;a<r;a++)e.i[t+a]=e.i[n+a].map(function(l){return l})}function ur(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var Kv=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),TA=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),bA=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),EA=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),Yv=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function rc(e,t){this.h=0,this.o=new Xp(e,t),this.i=new Xp(e,t),this.g=this.j=new Xp(e,t),this.l=0,this.m=null}function qp(e,t,n){e.g=e.i;var r=e.g,a=null;return e.h!==3&&e.h!==4&&(a=oc(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,ur(n,0,15),n=e.j,n.g=0<n.h?n.h:0,ur(n,0,15),r.g=15),e.h=3,r.h=t,a}function Qv(e){e.h=1,e.g=e.j,e.g.h=0}function Zv(e){Pe("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var kA="black green blue cyan red yellow magenta black".split(" "),Jv="white green blue cyan red yellow magenta white_italics".split(" ");function ex(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",Kp(this)}function Kp(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Yp())}function Yp(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function os(e,t){tx(e)&&(e.i[e.h][e.g]=new Xv(t,e.C,e.A,e.s,e.B),e.g++)}function tx(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}ex.prototype.isVisible=function(){return this.l};function rs(e,t,n){var r=new Lt(e.j,t,"");r.textAlign=e.F===0?"left":e.F===1?"right":lt;var a=r.region;switch(e.I&&(a.id+="svc"+e.I),a.id+="win"+e.N,a.height=e.o,a.width=e.m,a.heightUnits=2,a.widthUnits=2,a.viewportAnchorX=e.H,a.viewportAnchorY=e.L,a.viewportAnchorUnits=e.K?Ct:2,e.G){case 0:a.regionAnchorX=0,a.regionAnchorY=0;break;case 1:a.regionAnchorX=50,a.regionAnchorY=0;break;case 2:a.regionAnchorX=100,a.regionAnchorY=0;break;case 3:a.regionAnchorX=0,a.regionAnchorY=50;break;case 4:a.regionAnchorX=50,a.regionAnchorY=50;break;case 5:a.regionAnchorX=100,a.regionAnchorY=50;break;case 6:a.regionAnchorX=0,a.regionAnchorY=100;break;case 7:a.regionAnchorX=50,a.regionAnchorY=100;break;case 8:a.regionAnchorX=100,a.regionAnchorY=100}return(n=Gv(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function AA(){this.i=[],this.h=null,this.g=0}function IA(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new sc(e.h)),e.h=null,e.g=0))}function sc(e){this.g=0,this.h=e}sc.prototype.na=function(){return this.g<this.h.length},sc.prototype.va=function(){return this.g};function Xn(e){if(!e.na())throw new ne(2,2,3e3);return e.h[e.g++]}sc.prototype.skip=function(e){if(this.g+e>this.h.length)throw new ne(2,2,3e3);this.g+=e};function MA(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function _A(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=Xn(t).value,t=null,n=T(Ou(e,n));for(var a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=rs(a,r,e.i)),Kp(a);return t}if(n===137)for(t=Xn(t).value,t=T(Ou(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=Xn(t).value,t=null,n=T(Ou(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=rs(a,r,e.i)),a.l=!1;return t}if(n===139){for(n=Xn(t).value,t=null,n=T(Ou(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()?t=rs(a,r,e.i):a.j=r,a.l=!a.l;return t}if(n===140)return t=Xn(t).value,nx(e,t,r);if(n===143)return r=nx(e,255,r),ix(e),r;if(n===144)t.skip(1),r=Xn(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=Xn(t).value,n=Xn(t).value,t.skip(1),e.g&&(t=ox((n&48)>>4,(n&12)>>2,n&3),e.g.B=ox((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=Xn(t).value,t=Xn(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=Xn(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,a=e.h[n]!==null,!a){var l=new ex(n,e.i);l.j=r,e.h[n]=l}r=Xn(t).value,l=Xn(t).value;var c=Xn(t).value,d=Xn(t).value,p=Xn(t).value;t=Xn(t).value,a&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=l&127,t.H=c,t.G=(d&240)>>4,t.K=0<(l&128),t.o=(d&15)+1,t.m=(p&63)+1,e.g=e.h[n]}}}return null}function Ou(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function nx(e,t,n){var r=null;t=T(Ou(e,t));for(var a=t.next();!a.done;a=t.next()){a=a.value;var l=e.h[a];l.isVisible()&&(r=rs(l,n,e.i)),e.h[a]=null}return r}function ix(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function ox(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],RA[e<<2|t<<1|n]}var rx=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),RA="black blue green cyan red magenta yellow white".split(" ");function aa(){this.h=[],this.g=[],this.i=new AA,this.l=0,this.m=new Map([["CC1",new rc(0,0)],["CC2",new rc(0,1)],["CC3",new rc(1,0)],["CC4",new rc(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,Qp(this)}aa.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Qp(this),e=T(this.j.values());for(var t=e.next();!t.done;t=e.next())ix(t.value)};function Qp(e){e.o=0,e.s=0;for(var t=T(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Pu(n.i),Pu(n.j),Pu(n.o);e.B=!0}aa.prototype.extract=function(e,t){if(this.B){for(var n=T(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new Kt(e,0),!(8>e.getLength())&&e.T()===181&&e.la()===49&&e.P()===1195456820&&e.T()===3&&(n=e.T(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var a=e.T(),l=(a&4)>>2,c=e.T(),d=e.T();l&&(a&=3,a===0||a===1?this.h.push({pts:t,type:a,bb:c,Cb:d,order:this.h.length}):(this.g.push({pts:t,type:a,value:c,order:this.g.length}),this.g.push({pts:t,type:2,value:d,order:this.g.length})))}},aa.prototype.decode=function(){function e(a,l){return a.pts-l.pts||a.order-l.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=T(this.h),r=n.next();!r.done;r=n.next())(r=LA(this,r.value))&&t.push(r);for(n=T(this.g),r=n.next();!r.done;r=n.next())IA(this.i,r.value);for(n=T(this.i.i),r=n.next();!r.done;r=n.next())r=DA(this,r.value),t.push.apply(t,L(r));return this.i.i=[],this.h=[],this.g=[],t};function LA(e,t){var n=t.type;if((t.bb&112)===16){var r=t.bb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.bb===255&&t.Cb===255||!t.bb&&!t.Cb||!sx(t.bb)||!sx(t.Cb))return 45<=++e.l&&Qp(e),null;e.l=0,t.bb&=127,t.Cb&=127;var a=t.bb;if(1<=a&&15>=a||!t.bb&&!t.Cb)return null;if(a=null,(t.bb&112)===16)e:{if(e.A.add(r),r=t.bb,e=t.Cb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var l=(e&30)>>1;r="white",a=!1,7>l?r=Jv[l]:l===7&&(a=!0),e=(e&1)===1,n.h!==4&&(l=n.g,n.h===3&&t!==l.g&&(n=1+t-l.h,qv(l,n,1+l.g-l.h,l.h),ur(l,0,n-1),ur(l,t+1,15-t)),l.g=t,l.m=e,l.j=a,l.l=r,l.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",sa(n.g,0,32),r=!1,t=Jv[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=kA[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)sa(n.g,1,e);else if((r&246)===18&&(e&224)===32)sa(n.g,r&1?3:2,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.Cb){case 32:Qv(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=qp(n,2,e);break;case 38:r=qp(n,3,e);break;case 39:r=qp(n,4,e);break;case 40:sa(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Pu(n.o),Zv(n);break;case 43:Zv(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=oc(t,n.l,e)),ur(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=oc(t,n.l,e),a=t.g-t.h+1,qv(t,a-1,a,t.h),ur(t,0,a-1),ur(t,t.g,15-t.g),n.l=e);break;case 46:ur(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=oc(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,Qv(n),n.l=e,r=t}a=r;break e}a=null}else e=t.Cb,sa(n.g,0,t.bb),sa(n.g,0,e);return a}function DA(e,t){var n=[];try{for(;t.na();){var r=Xn(t).value,a=(r&224)>>5,l=r&31;if(a===7&&l!=0&&(a=Xn(t).value&63),a!=0){e.A.add("svc"+a),e.j.has(a)||e.j.set(a,new MA(a));for(var c=e.j.get(a),d=t.va();t.va()-d<l;){a=c;var p=t,x=Xn(p),C=x.value,b=x.pts;if(C===16){var k=Xn(p);C=C<<16|k.value}if(0<=C&&31>=C){p=a;var E=C,M=b;if(p.g){var R=p.g;switch(a=null,E){case 8:!tx(R)||0>=R.g&&0>=R.h||(0>=R.g?(R.g=R.m-1,R.h--):R.g--,R.i[R.h][R.g]=null);break;case 13:if(R.isVisible()&&(a=rs(R,M,p.i)),R.h+1>=R.o){for(p=R,E=0,M=1;16>M;M++,E++)p.i[E]=p.i[M];for(M=0;1>M;M++,E++)p.i[E]=Yp()}else R.h++;R.g=0;break;case 14:R.isVisible()&&(a=rs(R,M,p.i)),R.i[R.h]=Yp(),R.g=0;break;case 12:R.isVisible()&&(a=rs(R,M,p.i)),Kp(R),p=R,p.h=0,p.g=0}var _=a}else _=null}else if(128<=C&&159>=C)_=_A(a,p,C,b);else{if(4096<=C&&4127>=C)a=p,p=C&255,8<=p&&15>=p?a.skip(1):16<=p&&23>=p?a.skip(2):24<=p&&31>=p&&a.skip(3);else if(4224<=C&&4255>=C)a=p,p=C&255,128<=p&&135>=p?a.skip(4):136<=p&&143>=p&&a.skip(5);else if(32<=C&&127>=C)p=C,a.g&&(p===127?os(a.g,"♪"):os(a.g,String.fromCharCode(p)));else if(160<=C&&255>=C)a.g&&os(a.g,String.fromCharCode(C));else if(4128<=C&&4223>=C){if(p=C&255,a.g)if(rx.has(p)){var j=rx.get(p);os(a.g,j)}else os(a.g,"_")}else 4256<=C&&4351>=C&&a.g&&((C&255)!=160?os(a.g,"_"):os(a.g,"[CC]"));_=null}(a=_)&&n.push(a)}}}}catch(U){if(U instanceof ne&&U.code===3e3)Pe("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw U}return n}function sx(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}aa.prototype.getStreams=function(){return Array.from(this.A)},me("shaka.cea.CeaDecoder",aa),_n=function(){return new aa};function ax(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(L(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var a=0;e[r]==255;)a+=255,r++;a+=e[r++],n==4&&t.push(e.subarray(r,r+a)),r+=a}return t}function ac(){this.j=new Map,this.i=this.h=0,this.g=Zp}ac.prototype.init=function(e){function t(l){l=l.name,l in uc&&(n.g=uc[l])}var n=this,r=[],a=[];if(new Yt().box("moov",At).box("mvex",At).S("trex",function(l){var c=l.reader;c.skip(4),c.skip(4),l=c.P(),c=c.P(),n.h=l,n.i=c}).box("trak",At).S("tkhd",function(l){var c=l.reader;l=l.version,l==1?(c.skip(8),c.skip(8)):(c.skip(4),c.skip(4));var d=c.P();l==1?c.skip(8):c.skip(4),c.skip(4),c.skip(8),c.skip(2),c.skip(2),c.skip(2),c.skip(2),c.skip(36),c.la(),c.la(),c.la(),c.la(),r.push(d)}).box("mdia",At).S("mdhd",function(l){l=yf(l.reader,l.version),a.push(l.timescale)}).box("minf",At).box("stbl",At).S("stsd",Sr).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",bi).box("sinf",At).box("frma",function(l){l=Wy(l.reader).codec,l in uc&&(n.g=uc[l])}).parse(e,!0),!r.length||!a.length||r.length!=a.length)throw new ne(2,2,2010);this.g==Zp&&He("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(l,c){n.j.set(l,a[c])})},ac.prototype.parse=function(e){var t=this;if(this.g==Zp)return[];var n=[],r=0,a=[];return new Yt().box("moof",function(l){r=l.start,a=[],At(l)}).box("traf",function(l){a.push({baseMediaDecodeTime:null,Yc:t.h,Id:t.i,Og:[],timescale:9e4}),At(l)}).S("trun",function(l){var c=a[a.length-1];l=Hy(l.reader,l.version,l.flags),c.Og.push(l)}).S("tfhd",function(l){var c=a[a.length-1];l=Vy(l.reader,l.flags),c.Yc=l.Yc||t.h,c.Id=l.Id||t.i,l=l.trackId,t.j.has(l)&&(c.timescale=t.j.get(l))}).S("tfdt",function(l){var c=a[a.length-1];l=gf(l.reader,l.version),c.baseMediaDecodeTime=l.baseMediaDecodeTime}).box("mdat",function(l){for(var c=r-l.start-8,d=l.reader.va(),p=T(a),x=p.next();!x.done;x=p.next()){if(x=x.value,x.baseMediaDecodeTime===null)throw He("Unable to find base media decode time for CEA captions!"),new ne(2,2,2010);l.reader.seek(d),PA(t,l.reader,x.baseMediaDecodeTime,x.timescale,x.Yc,x.Id,c,x.Og,n)}}).parse(e,!1),n};function PA(e,t,n,r,a,l,c,d,p){var x=0,C=l,b=d.map(function(M){return M.Wg});for(b=[].concat.apply([],L(b)),b.length&&(C=b[0].sampleSize||l),t.skip(c+d[0].Fh);t.na();){c=t.P();var k=t.T(),E=null;switch(E=!1,d=1,e.g){case Nu:E=k&31,E=E==6;break;case Uu:d=2,t.skip(1),E=k>>1&63,E=E==39||E==40;break;case Bu:d=2,t.skip(1),E=k>>1&63,E=E==23||E==24;break;default:return}if(E)for(k=0,x<b.length&&(k=b[x].ne||0),k=(n+k)/r,d=T(ax(t.qb(c-d))),E=d.next();!E.done;E=d.next())p.push({packet:E.value,pts:k});else try{t.skip(c-d)}catch{break}C-=c+4,C==0&&(n=x<b.length?n+(b[x].Jf||a):n+a,x++,x<b.length?C=b[x].sampleSize||l:C=l)}}me("shaka.cea.Mp4CeaParser",ac);var Zp=0,Nu=1,Uu=2,Bu=3,uc={avc1:Nu,avc3:Nu,dvav:Nu,dva1:Nu,hev1:Uu,hvc1:Uu,dvh1:Uu,dvhe:Uu,vvc1:Bu,vvi1:Bu,dvc1:Bu,dvi1:Bu};Mn["video/mp4"]=function(){return new ac};function lc(){this.g=null}lc.prototype.init=function(){},lc.prototype.parse=function(e){this.g?this.g.clearData():this.g=new en;var t=[];if(e=Me(e),!gu(e))return t;e=this.g.parse(e);var n=e.$c(),r=e.Pd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=T(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var a=T(ax(r.data)),l=a.next();!l.done;l=a.next())t.push({packet:l.value,pts:r.time});return t},me("shaka.cea.TsCeaParser",lc),Mn["video/mp2t"]=function(){return new lc};function ux(e,t,n){var r=jA(e),a=null;e=[];var l=[],c=null,d=new Set(r.map(function(x){return x.keyId}));d.delete(null);var p="cenc";if(1<d.size)throw new ne(2,4,4010);if(!t){if(l=r.filter(function(x){return x.Pc=="urn:mpeg:dash:sea:2012"}),1<l.length)throw new ne(2,4,4050);l.length&&(c=$A(l[0])),(l=r.find(function(x){return x.Pc=="urn:mpeg:dash:mp4protection:2011"}))&&l.encryptionScheme&&(p=l.encryptionScheme),l=r.filter(function(x){return x.Pc=="urn:mpeg:dash:mp4protection:2011"?(a=x.init||a,!1):x.Pc!="urn:mpeg:dash:sea:2012"}),l.length&&(e=BA(a,p,l,n,d),e.length==0&&(e=[Xr("",p,a)]))}if(r.length&&!c&&(t||!l.length))for(e=[],t=T(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Xr(n,p,a));if(d=Array.from(d)[0]||null)for(p=T(e),t=p.next();!t.done;t=p.next())for(t=T(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=d;return{pg:d,dk:a,drmInfos:e,Fe:c,tg:!0}}function OA(e,t,n,r){var a=ux(e,n,r);if(t.tg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=a.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=a.drmInfos),t.tg=!1;else if(0<a.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(l){return a.drmInfos.some(function(c){return c.keySystem==l.keySystem})}),t.drmInfos.length==0))throw new ne(2,4,4008);return a.pg||t.pg}function NA(e){var t=0,n=Qt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var l=Me(n,e,a);t.push({type:r,value:l}),e+=a}n=t}return n}function UA(e){e=T(go(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=T(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return On(n)}return""}function fc(e){var t=Zo(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=On(t))?t:(e=Zo(e.node,"urn:microsoft:playready","pro"),!e||!On(e)||(e=On(e),e=Yi(e),e=NA(e).filter(function(n){return n.type===zA})[0],!e)?"":(e=Wo(e.value,!0),(e=Bs(e,"WRMHEADER"))?UA(e):""))}function BA(e,t,n,r,a){var l=[];n=T(n);for(var c=n.next();!c.done;c=n.next()){c=c.value;var d=r[c.Pc];if(d){var p;if((p=Zo(c.node,"urn:microsoft:playready","pro"))&&On(p)){p=On(p),p=Yi(p);var x=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);p=[{initData:lf(p,x,new Set,0),initDataType:"cenc",keyId:c.keyId}]}else p=null;if(x=null,c.Pc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){x=c;var C=a;if(C.size==0)x=null;else{var b=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),k=new Uint8Array([]);x=[{initData:lf(k,b,C,1),initDataType:"cenc",keyId:x.keyId}]}}p=Xr(d,t,c.init||e||p||x),(d=VA.get(d))&&(p.licenseServerUri=d(c)),l.push(p)}}return l}function jA(e){var t=[];e=T(e);for(var n=e.next();!n.done;n=e.next())(n=FA(n.value))&&t.push(n);return t}function FA(e){var t=e.attributes.schemeIdUri,n=Jo(e,"urn:mpeg:cenc:2013","default_KID"),r=my(e,"urn:mpeg:cenc:2013","pssh").map(mo),a=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new ne(2,4,4009);var l=[];try{l=r.map(function(c){return{initDataType:"cenc",initData:Yi(c),keyId:null}})}catch{throw new ne(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<l.length?l:null,encryptionScheme:a}}function $A(e){if(!h.crypto||!h.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new ne(2,4,4042);var t=Zo(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new ne(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new ne(2,4,4051);if(t=Zo(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new ne(2,4,4051);if(e=t.attributes.IV,t=mi(t.attributes.keyUriTemplate),!e||!t)throw new ne(2,4,4051);if(e=Wr(e.substr(2)),e.byteLength!=16)throw new ne(2,4,4048);return{ti:t,iv:e}}var zA=1,VA=new Map().set("com.widevine.alpha",function(e){var t=Zo(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=On(t))?t:(e=Zo(e.node,"urn:microsoft","laurl"))&&mi(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",fc).set("com.microsoft.playready.recommendation",fc).set("com.microsoft.playready.software",fc).set("com.microsoft.playready.hardware",fc).set("org.w3.clearkey",function(e){var t=Zo(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=On(t))?t:(e=Zo(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=On(e))?e:""});function cc(e,t,n,r,a,l){var c={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:a,Time:l};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(d,p,x,C){if(d=="$$")return"$";var b=c[p];if(b==null)return d;switch(p=="RepresentationID"&&x&&(x=void 0),p=="Time"&&typeof b!="bigint"&&(.2<=Math.abs(b-Math.round(b))&&He("Calculated $Time$ values must be close to integers"),b=Math.round(b)),C){case void 0:case"d":case"i":case"u":d=b.toString();break;case"o":d=b.toString(8);break;case"x":d=b.toString(16);break;case"X":d=b.toString(16).toUpperCase();break;default:d=b.toString()}return x=h.parseInt(x,10)||1,Array(Math.max(0,x-d.length)+1).join("0")+d})}function lx(e,t){var n=Lo(e,t,"timescale"),r=1;n&&(r=er(n)||1),n=Lo(e,t,"duration"),(n=er(n||""))&&(n/=r);var a=Lo(e,t,"startNumber"),l=Number(Lo(e,t,"presentationTimeOffset"))||0,c=ai(a||"");if((a==null||c==null)&&(c=1),a=null,t=ua(e,t,"SegmentTimeline")){t=Jt(t,"S"),a=r,e=e.ka.duration||1/0;for(var d=c,p=[],x=-l,C=0;C<t.length;++C){var b=t[C],k=t[C+1],E=Rt(b,"t",ai),M=Rt(b,"d",ai),R=Rt(b,"r",hf);if(b=Rt(b,"k",hf)||0,E!=null&&(E-=l),M){if(E=E??x,R=R||0,0>R)if(k){if(k=Rt(k,"t",ai),k==null)break;if(E>=k)break;R=Math.ceil((k-E)/M)-1}else{if(e==1/0)break;if(E/a>=e)break;R=Math.ceil((e*a-E)/M)-1}for(0<p.length&&E!=x&&(p[p.length-1].end=E/a),k=0;k<=R;++k)x=E+M,p.push({start:E/a,end:x/a,$f:E,zb:b,Si:p.length+d}),E=x}}a=p}return{timescale:r,La:n,vd:c,Nb:l/r||0,Zf:l,timeline:a}}function fx(e,t){return[t(e.J),t(e.ja),t(e.ta)].filter(Kr)}function Lo(e,t,n){t=fx(e,t),e=null,t=T(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function ua(e,t,n){t=fx(e,t),e=null,t=T(t);for(var r=t.next();!r.done&&!(e=yo(r.value,n));r=t.next());return e}function HA(e,t,n,r,a,l){for(var c=Jo(e,"http://www.w3.org/1999/xlink","href"),d=Jo(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",p=T(Object.keys(e.attributes)),x=p.next();!x.done;x=p.next()){x=x.value;var C=x.split(":"),b=Ld("http://www.w3.org/1999/xlink");C[0]==b&&delete e.attributes[x]}if(5<=l)return Qr(new ne(2,4,4028));if(d!="onLoad")return Qr(new ne(2,4,4027));var k=Zn([r],[c]);return a.request(0,Hn(k,t)).Aa(function(E){if(E=Rd(E.data,e.tagName),!E)return Qr(new ne(2,4,4001,c));for(e.children=[];E.children.length;){var M=E.children.shift();M.tagName&&(M.parent=e),e.children.push(M)}M=T(Object.keys(E.attributes));for(var R=M.next();!R.done;R=M.next())R=R.value,e.attributes[R]=E.attributes[R];return hc(e,t,n,k[0],a,l+1)})}function hc(e,t,n,r,a,l){if(l=l===void 0?0:l,Jo(e,"http://www.w3.org/1999/xlink","href")){var c=HA(e,t,n,r,a,l);return n&&(c=c.Aa(void 0,function(){return hc(e,t,n,r,a,l)})),c}c=[];for(var d=T(py(e)),p=d.next(),x={};!p.done;x={Uc:void 0},p=d.next())x.Uc=p.value,Jo(x.Uc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(C){return function(b){return b!==C.Uc}}(x)):x.Uc.tagName!="SegmentTimeline"&&c.push(hc(x.Uc,t,n,r,a,l));return iy(c).Aa(function(){return e})}function GA(e,t,n,r,a,l,c){var d,p=new Yt().S("sidx",function(x){d=WA(t,r,a,l,c,n,x)});if(e&&p.parse(e),d)return d;throw new ne(2,3,3004)}function WA(e,t,n,r,a,l,c){var d=[];c.reader.skip(4);var p=c.reader.P();if(p==0)throw new ne(2,3,3005);if(c.version==0)var x=c.reader.P(),C=c.reader.P();else x=c.reader.Nc(),C=c.reader.Nc();c.reader.skip(2);var b=c.reader.la();for(e=e+c.size+C,C=0;C<b;C++){var k=c.reader.P(),E=(k&2147483648)>>>31;k&=2147483647;var M=c.reader.P();if(c.reader.skip(4),E==1)throw new ne(2,3,3006);d.push(new ut(x/p+n,(x+M)/p+n,function(){return l},e,e+k-1,t,n,r,a)),x+=M,e+=k}return c.parser.stop(),d}function Ar(e){this.h=Qt(e),this.g=new Kt(this.h,0)}Ar.prototype.na=function(){return this.g.na()};function lr(e){var t=cx(e);if(7<t.length)throw new ne(2,3,3002);var n=0;t=T(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=cx(e);e:{r=T(XA);for(var a=r.next();!a.done;a=r.next())if(In(t,new Uint8Array(a.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.va();else{if(t.length==8&&t[1]&224)throw new ne(2,3,3001);for(a=r=0;a<t.length;a++){var l=t[a];r=a==0?l&(1<<8-t.length)-1:256*r+l}t=r}return t=e.g.va()+t<=e.h.byteLength?t:e.h.byteLength-e.g.va(),r=Qt(e.h,e.g.va(),t),e.g.skip(t),new qA(n,r)}function cx(e){var t=e.g.va(),n=e.g.T();if(n==0)throw new ne(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Me(e.h,t,n)}var XA=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function qA(e,t){this.id=e,this.g=t}function Jp(e){if(8<e.g.byteLength)throw new ne(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new ne(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function KA(e,t,n,r,a,l,c,d,p){function x(){return a}var C=[];e=new Ar(e.g);for(var b=null,k=null;e.na();){var E=lr(e);if(E.id==187){var M=YA(E);M&&(E=n*M.dj,M=t+M.Ii,b!=null&&C.push(new ut(b+c,E+c,x,k,M-1,l,c,d,p)),b=E,k=M)}}return b!=null&&C.push(new ut(b+c,r+c,x,k,null,l,c,d,p)),C}function YA(e){var t=new Ar(e.g);if(e=lr(t),e.id!=179)throw new ne(2,3,3013);if(e=Jp(e),t=lr(t),t.id!=183)throw new ne(2,3,3012);t=new Ar(t.g);for(var n=0;t.na();){var r=lr(t);if(r.id==241){n=Jp(r);break}}return{dj:e,Ii:n}}function hx(e,t,n){if(t=ua(e,t,"Initialization"),!t)return null;var r=e.J.Ga(),a=t.attributes.sourceURL;a&&(r=Zn(r,[mi(a)])),a=0;var l=null;return(t=Rt(t,"range",cf))&&(a=t.start,l=t.end),n=new Ei(function(){return r},a,l,gx(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function QA(e,t,n){var r=Number(Lo(e,la,"presentationTimeOffset"))||0,a=Lo(e,la,"timescale"),l=1;a&&(l=er(a)||1);var c=r/l||0,d=hx(e,la,n);ZA(e,d);var p=Cd(e);return{fc:function(){var x=ua(p,la,"RepresentationIndex"),C=p.J.Ga();return x&&(x=mi(x.attributes.sourceURL))&&(C=Zn(C,[x])),x=px(p),dx(p,t,d,C,x.start,x.end,c)}}}function dx(e,t,n,r,a,l,c){var d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re;return G(function(de){if(de.g==1)return d=e.presentationTimeline,p=!e.vb||!e.ka.ld,x=e.ka.start,C=e.ka.duration,b=e.J.mimeType.split("/")[1],k=t,E=null,M=[k(r,a,l,!1),b=="webm"?k(n.M(),n.Ha,n.sa,!0):null],k=null,A(de,Promise.all(M),2);if(R=de.h,_=R[0],j=R[1]||null,U=null,K=x-c,O=x,V=C?x+C:1/0,b=="mp4")var se=GA(_,a,r,n,K,O,V);else{se=_;var ae=new Ar(j);if(lr(ae).id!=440786851)throw new ne(2,3,3008);var he=lr(ae);if(he.id!=408125543)throw new ne(2,3,3009);ae=he.g.byteOffset,he=new Ar(he.g);for(var Se=null;he.na();){var ye=lr(he);if(ye.id==357149030){Se=ye;break}}if(!Se)throw new ne(2,3,3010);for(Se=new Ar(Se.g),ye=1e6,he=null;Se.na();){var be=lr(Se);if(be.id==2807729)ye=Jp(be);else if(be.id==17545)if(be.g.byteLength==4)he=be.g.getFloat32(0);else if(be.g.byteLength==8)he=be.g.getFloat64(0);else throw new ne(2,3,3003)}if(he==null)throw new ne(2,3,3011);if(Se=ye/1e9,he*=Se,se=lr(new Ar(se)),se.id!=475249515)throw new ne(2,3,3007);se=KA(se,ae,Se,he,r,n,K,O,V)}for(U=se,Z=T(U),te=Z.next();!te.done;te=Z.next())re=te.value,re.codecs=e.J.codecs,re.mimeType=e.J.mimeType;return d.sd(U),E=new Dt(U),p&&E.Bc(O,V,!0),de.return(E)})}function la(e){return e.Rc}function px(e){var t=ua(e,la,"RepresentationIndex");return e=Lo(e,la,"indexRange"),e=cf(e||""),t&&(e=Rt(t,"range",cf,e)),e}function ZA(e,t){if(mx(e,t),!px(e))throw new ne(2,4,4002)}function mx(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=_t&&n!="mp4"&&n!="webm")throw new ne(2,4,4006);if(n=="webm"&&!t)throw new ne(2,4,4005)}function gx(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Jc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ja.label||null,roles:e.roles||null,language:e.ja.language||null}}function JA(e,t,n){var r=hx(e,yx,n),a=e4(e);if(!a.La&&!a.timeline&&1<a.Ic.length)throw new ne(2,4,4002);if(!a.La&&!e.ka.duration&&!a.timeline&&a.Ic.length==1)throw new ne(2,4,4002);if(a.timeline&&a.timeline.length==0)throw new ne(2,4,4002);var l=null,c=null;e.ta.id&&e.J.id&&(c=t[e.ta.id+","+e.J.id])&&(l=c.segmentIndex);var d=t4(e.ka.start,e.ka.duration,e.J.Ga,a,r,n,e.J.mimeType,e.J.codecs);return t=!l,l?l.rd(d,e.presentationTimeline.mb()):l=new Dt(d),e.presentationTimeline.sd(d),e.vb&&e.ka.ld||l.Bc(e.ka.start,e.ka.duration?e.ka.start+e.ka.duration:1/0,t),c&&(c.segmentIndex=l),{fc:function(){return l&&l.getNumReferences()!=0||l.Zd(d),Promise.resolve(l)}}}function yx(e){return e.Pb}function e4(e){var t=n4(e);e=lx(e,yx);var n=e.vd;n==0&&(n=1);var r=0;return e.La?r=e.La*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{La:e.La,startTime:r,vd:n,Nb:e.Nb,timeline:e.timeline,Ic:t}}function t4(e,t,n,r,a,l,c,d){var p=r.Ic.length;r.timeline&&r.timeline.length!=r.Ic.length&&(p=Math.min(r.timeline.length,r.Ic.length));for(var x=e-r.Nb,C=t?e+t:1/0,b=[],k=r.startTime,E={},M=0;M<p;E={ve:void 0,oe:void 0},M++){E.oe=r.Ic[M];var R=k;k=void 0,k=r.La!=null?R+r.La:r.timeline?r.timeline[M].end:R+t,E.ve=null,E=new ut(e+R,e+k,function(_){return function(){return _.ve==null&&(_.ve=Zn(n(),[_.oe.zi])),_.ve}}(E),E.oe.start,E.oe.end,a,x,e,C,[],"",null,null,Tr,l),E.codecs=d,E.mimeType=c,b.push(E)}return b}function n4(e){return[e.J.Pb,e.ja.Pb,e.ta.Pb].filter(Kr).map(function(t){return Jt(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=mi(t.attributes.media);return t=Rt(t,"mediaRange",cf,{start:0,end:null}),{zi:n,start:t.start,end:t.end}})}function vx(e,t,n,r,a,l,c,d,p){p||e.J.Gc||(e.J.Gc=Lo(e,ss,"initialization"));var x=e.J.Gc?s4(e,c):null,C=i4(e);o4(C);var b=Cd(e);if(C.jd)return mx(e,x),{fc:function(){var _=cc(C.jd,b.J.id,null,null,b.bandwidth||null,null);return _=Zn(b.J.Ga(),[_]),dx(b,t,x,_,0,null,C.Nb)}};if(C.La)return r||e.ja.contentType==="image"||(e.presentationTimeline.xf(C.La),e.presentationTimeline.ce(e.ka.start)),{fc:function(){return r4(b,C,a,x,l,c,d)}};var k=null;r=r=null,e.ta.id&&e.J.id&&(r=e.ta.id+","+e.J.id,r=n[r])&&(k=r.segmentIndex);var E=e.ka.start,M=e.ka.duration?E+e.ka.duration:1/0,R=!(e.vb&&e.ka.ld);return k?(n=k,xx(n,C,E,M,R,x),n.Ma(e.presentationTimeline.mb())):k=new dc(C,e.J.id,e.bandwidth,e.J.Ga,E,M,x,R,c,e.J.Kf),C.timeline&&e.ja.contentType!=="image"&&e.presentationTimeline.Ng(C.timeline,E),r&&e.vb&&(r.segmentIndex=k),{fc:function(){return k instanceof dc&&k.getNumReferences()==0&&xx(k,C,E,M,R,x),Promise.resolve(k)}}}function ss(e){return e.$b}function i4(e){var t=lx(e,ss),n=Lo(e,ss,"media"),r=Lo(e,ss,"index");return{La:t.La,timescale:t.timescale,vd:t.vd,Nb:t.Nb,Zf:t.Zf,timeline:t.timeline,Zb:n&&mi(n),jd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function o4(e){var t=e.jd?1:0;if(t+=e.timeline?1:0,t+=e.La?1:0,t==0)throw new ne(2,4,4002);if(t!=1&&(e.jd&&(e.timeline=null),e.La=null),!e.jd&&!e.Zb)throw new ne(2,4,4002)}function r4(e,t,n,r,a,l,c){function d(ae){var he=(ae-R)*M,Se=he+t.Nb,ye=he+b;he=ye+M;var be=Math.min(he,x());return ye=new ut(ye,be,function(){var Re=Se*_;return"BigInt"in h&&Re>Number.MAX_SAFE_INTEGER&&(Re=BigInt(Se)*BigInt(_)),Re=cc(j,K,ae,null,U,Re),Zn(O(),[Re])},0,null,r,V,b,x(),[],"",null,null,Tr,l),ye.codecs=e.J.codecs,ye.mimeType=e.J.mimeType,ye.j=he,ye}function p(){var ae=[Math.max(C.mb(),b),Math.min(C.Wb(),x())].map(function(he){return he-b});return ae=[Math.ceil(ae[0]/M),Math.ceil(ae[1]/M)-1],e.J.Ia&&ae[1]++,ae.map(function(he){return he+R})}function x(){var ae=k!=null&&a[k]||E;return ae?b+ae:1/0}var C=e.presentationTimeline,b=e.ka.start,k=e.ta.id,E=e.ka.duration,M=t.La,R=t.vd,_=t.timescale,j=t.Zb,U=e.bandwidth||null,K=e.J.id,O=e.J.Ga,V=b-t.Nb,Z=p();n=e.vb?Math.max(Z[0],Z[1]-n+1):Z[0],c=c||Z[1],Z=[];for(var te=n;te<=c;++te){var re=d(te);Z.push(re)}var de=new Dt(Z);if(Z=C.Wb()<x(),te=C.V(),Z||te){var se=Math.max(n,c+1);n=M,e.J.Ia&&(n=.1),de.ue(n,function(){var ae=C.mb();de.Ma(ae);var he=T(p());he.next(),he=he.next().value;for(var Se=[];se<=he;){var ye=d(se);Se.push(ye),se++}return ae>x()&&!Se.length?null:Se})}return Promise.resolve(de)}function s4(e,t){var n=e.J.Gc;if(n||(n=Lo(e,ss,"initialization")),!n)return null;n=mi(n);var r=e.J.id,a=e.bandwidth||null,l=e.J.Ga;return t=new Ei(function(){var c=cc(n,r,null,null,a,null);return Zn(l(),[c])},0,null,gx(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function dc(e,t,n,r,a,l,c,d,p,x){Dt.call(this,[]),this.g=e,this.C=t,this.A=n,this.B=r,this.h=a,this.j=l,this.o=c,this.s=p,this.F=x,d&&wx(this)}$(dc,Dt),s=dc.prototype,s.getNumReferences=function(){return this.g?this.g.timeline.length:0},s.release=function(){Dt.prototype.release.call(this),this.g=null},s.Ma=function(e){if(this.g){for(var t=0,n=this.g.timeline,r=0;r<n.length&&n[r].end+this.h<=e;r+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.O.length>=t&&(this.O=this.O.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function xx(e,t,n,r,a,l){if(a4(e,l),e.g){if(n=e.g.timeline,e.g.Zb!==t.Zb&&(e.g.Zb=t.Zb),n.length){var c=n[n.length-1];t=t.timeline.filter(function(d){return d.start>=c.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,L(t)),e.j!==r&&(e.j=r)}else e.g=t,e.h=n,e.j=r;a&&wx(e)}function a4(e,t){if(e.o!==t){e.o=t,e=T(e.O);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&By(n,t)}}function wx(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.Ma(e.h)}}s.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,r=0;r<t.length;r++){var a=t[r],l=a.start+this.h;if(a=r<n?t[r+1].start+this.h:this.j===1/0?a.end+this.h:this.j,e>=l&&e<a)return r+this.i}return null},s.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.g)return null;var n=this.O[e];if(!n){var r=this.g.timeline[e],a=r.Si,l=this.g.Zf+r.$f;n=this.h-this.g.Nb;var c=this.h+r.end,d=c;e===this.getNumReferences()-1&&this.j!==1/0&&(d=this.j);for(var p=this.g.codecs,x=this.g.mimeType,C=[],b=(r.end-r.start)/r.zb,k={},E=0;E<r.zb;k={we:void 0,kh:void 0},E++){var M=r.start+b*E,R=M+b;k.kh=E+1,k.we=null,k=new ut(this.h+M,this.h+R,function(_){return function(){return t.g?(_.we==null&&(_.we=Sx(t.g.Zb,t.C,a,t.A,l,_.kh,t.B)),_.we):[]}}(k),0,null,this.o,n,this.h,this.j,[],"",null,null,Tr,this.s),k.codecs=p,k.mimeType=x,this.F==0?0<E&&k.Xd():E%this.F!=0&&k.Xd(),C.push(k)}n=new ut(this.h+r.start,d,function(){return 0<r.zb||!t.g?[]:Sx(t.g.Zb,t.C,a,t.A,l,null,t.B)},0,null,this.o,n,this.h,this.j,C,"",null,null,Tr,this.s,0<r.zb),n.codecs=p,n.mimeType=x,n.j=c,this.O[e]=n}return n};function Sx(e,t,n,r,a,l,c){return e=cc(e,t,n,l,r||null,a),Zn(c(),[e]).map(function(d){return d.toString()})}function fa(e){this.o=null,this.A=e,this.G=new Ps,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}fa.prototype.configure=function(e){this.o=e},fa.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},fa.prototype.setManifestType=function(e){this.s=e};function ju(e,t){var n,r,a,l,c,d,p;return G(function(x){if(x.g==1)return n=Zn(e.i,[u4(e,t)]),r=Hn(n,e.o.retryParameters),a=e.A.networkingEngine.request(8,r),Zr(e.G,a),Q(x,2),A(x,a.promise,4);if(x.g!=2)return l=x.h,c=nn(l.data),d=JSON.parse(c),d.VERSION==1&&l4(e,d,l.uri),q(x,0);if((p=W(x))&&p.code==7001)return x.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new Et(function(){ju(e,t)}),e.g.Y(e.C),Y(x)})}function u4(e,t){if(!e.m.length)return t;t=new Tn(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),a=t.g;return e.s=="DASH"?(a.add("_DASH_pathway",n),a.add("_DASH_throughput",String(r))):e.s=="HLS"&&(a.add("_HLS_pathway",n),a.add("_HLS_throughput",String(r))),wg(a)&&Ya(t,a),t.toString()}function l4(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new Et(function(){ju(e,r)}),(n=t.TTL)&&(e.C=n),e.g.Y(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function ca(e,t,n,r){var a=e.l.get(t);a||(a=new Map),a.set(n,r),e.l.set(t,a)}fa.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Fu(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],a=T(e.m),l=a.next(),c={};!l.done;c={Lc:void 0},l=a.next())if(c.Lc=l.value,l=t.get(c.Lc))r.push({Df:c.Lc,location:l});else if(l=e.F.find(function(p){return function(x){return x.wj==p.Lc}}(c))){var d=t.get(l["BASE-ID"]);d&&(l["URI-REPLACEMENT"].rh?(d=new Tn(d),$l(d,l["URI-REPLACEMENT"].rh),r.push({Df:c.Lc,location:d.toString()})):r.push({Df:c.Lc,location:d}))}for(a=Date.now(),c=T(e.j.keys()),l=c.next();!l.done;l=c.next())l=l.value,d=e.j.get(l),a>d&&e.j.delete(l);if(r=r.filter(function(p){for(var x=T(e.j.keys()),C=x.next();!C.done;C=x.next())if(C.value.includes(new Tn(p.location).Eb))return!1;return!0}),r.length&&(e.B=r[0].Df),r=r.map(function(p){return p.location}),!r.length&&e.h)for(a=T(e.h.split(",")),c=a.next();!c.done;c=a.next())(c=t.get(c.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=T(t.values()),a=t.next();!a.done;a=t.next())r.push(a.value);return n?r:Zn(e.i,r)}function xi(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}s=xi.prototype,s.release=function(){for(var e=T(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},s.ei=function(){return this.j},s.jf=function(){return this.l.slice()},s.Nh=function(){return this.i};function Cx(e,t){var n=[],r=[],a=[],l=[];e=T(e);for(var c=e.next();!c.done;c=e.next()){var d=c.value;c=new Map(d.audioStreams.map(function(b){return[i0(b),b]}));var p=new Map(d.videoStreams.map(function(b){return[n0(b),b]})),x=new Map(d.textStreams.map(function(b){return[Hu(b),b]}));if(d=new Map(d.imageStreams.map(function(b){return[Gu(b),b]})),t){var C=Ix(_t);x.set(Hu(C),C),C=Ix("image"),d.set(Gu(C),C)}n.push(c),r.push(p),a.push(x),l.push(d)}return{jg:n,ph:r,lh:a,Eg:l}}s.Ke=function(e,t,n){n=n===void 0?!1:n;var r=this,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye,be,Re,Ee;return G(function(je){if(je.g==1){if(a=Ln,!t&&e.length==1)return l=Cx(e,!1),c=l.jg,d=l.ph,p=l.lh,x=l.Eg,r.h=Array.from(c[0].values()),r.g=Array.from(d[0].values()),r.l=Array.from(p[0].values()),r.i=Array.from(x[0].values()),je.u(2);for(C=n?r.m.size:0,b=-1,k=0;k<e.length;k++)E=e[k],r.m.has(E.id)||(r.m.add(E.id),b==-1&&(b=k));return b==-1?je.return():(M=Cx(e,!0),R=M.jg,_=M.ph,j=M.lh,U=M.Eg,A(je,Promise.all([Ir(r,r.h,R,b,$u,ha,C),Ir(r,r.g,_,b,$u,ha,C),Ir(r,r.l,j,b,$u,ha,C),Ir(r,r.i,U,b,$u,ha,C)]),2))}if(K=0,O=[],r.g.length&&r.h.length)for(se=T(r.h),ae=se.next();!ae.done;ae=se.next())for(he=ae.value,Se=T(r.g),ye=Se.next();!ye.done;ye=Se.next())be=ye.value,Re=ld(he.drmInfos,be.drmInfos),he.drmInfos.length&&be.drmInfos.length&&!Re.length||(Ee=K++,O.push({id:Ee,language:he.language,disabledUntilTime:0,primary:he.primary,audio:he,video:be,bandwidth:(he.bandwidth||0)+(be.bandwidth||0),drmInfos:Re,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(V=r.g.length?r.g:r.h,Z=T(V),te=Z.next();!te.done;te=Z.next())re=te.value,de=K++,O.push({id:de,language:re.language,disabledUntilTime:0,primary:re.primary,audio:re.type==a.X?re:null,video:re.type==a.ga?re:null,bandwidth:re.bandwidth||0,drmInfos:re.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.j=O,Y(je)})};function Tx(e){var t,n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye;return G(function(be){switch(be.g){case 1:if(t=Ln,e.length==1)return be.return(e[0]);for(n=e.map(function(Re){return new Map(Re.filter(function(Ee){return Ee.type===t.X}).map(function(Ee){return[i0(Ee),Ee]}))}),r=e.map(function(Re){return new Map(Re.filter(function(Ee){return Ee.type===t.ga}).map(function(Ee){return[n0(Ee),Ee]}))}),a=e.map(function(Re){return new Map(Re.filter(function(Ee){return Ee.type===t.ua}).map(function(Ee){return[Hu(Ee),Ee]}))}),l=e.map(function(Re){return new Map(Re.filter(function(Ee){return Ee.type===t.De}).map(function(Ee){return[Gu(Ee),Ee]}))}),c=T(a),d=c.next();!d.done;d=c.next())p=d.value,x=Ax(t.ua),p.set(Hu(x),x);for(C=T(l),b=C.next();!b.done;b=C.next())k=b.value,E=Ax(t.De),k.set(Gu(E),E);return M=new xi,A(be,Ir(M,[],n,0,pc,mc,0),2);case 2:return R=be.h,A(be,Ir(M,[],r,0,pc,mc,0),3);case 3:return _=be.h,A(be,Ir(M,[],a,0,pc,mc,0),4);case 4:return j=be.h,A(be,Ir(M,[],l,0,pc,mc,0),5);case 5:if(U=be.h,K=0,_.length&&R.length)for(re=T(R),de=re.next();!de.done;de=re.next())for(se=de.value,ae=T(_),he=ae.next();!he.done;he=ae.next())Se=he.value,ye=K++,Se.variantIds.push(ye),se.variantIds.push(ye);else for(O=_.concat(R),V=T(O),Z=V.next();!Z.done;Z=V.next())te=Z.value,te.variantIds=[K++];return be.return(_.concat(R).concat(j).concat(U))}})}function Ir(e,t,n,r,a,l,c){var d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de;return G(function(se){switch(se.g){case 1:for(d=[],p=0;p<n.length;p++)p>=r?d.push(new Set(n[p].values())):d.push(new Set);x=T(t),C=x.next();case 2:if(C.done){se.u(4);break}return b=C.value,A(se,f4(e,b,n,r,l,d,c),5);case 5:if(k=se.h,!k)throw new ne(2,4,4037);C=x.next(),se.u(2);break;case 4:for(E=T(d),M=E.next();!M.done;M=E.next())for(R=M.value,_=T(R),j=_.next();!j.done;j=_.next())U=j.value,(K=c4(e,U,n,a,l,d))&&t.push(K);for(O=T(d),V=O.next();!V.done;V=O.next())for(Z=V.value,te=T(Z),re=te.next(),de={};!re.done;de={Tf:void 0},re=te.next())if(de.Tf=re.value,!t0(de.Tf)&&t.some(function(ae){return function(he){return e0(e,ae.Tf,he)}}(de)))throw new ne(2,4,4037);return se.return(t)}})}function f4(e,t,n,r,a,l,c){return G(function(d){return d.g==1?(kx(e,n,t,0<c),t.matchedStreams?t.segmentIndex?A(d,bx(t,r+c),2):d.u(2):d.return(!1)):(Ex(t,r,a,l,c),d.return(!0))})}function bx(e,t){var n,r,a,l,c,d,p;return G(function(x){if(x.g==1){for(n=[],r=e.matchedStreams,a=T(r),l=a.next();!l.done;l=a.next())c=l.value,n.push(c.createSegmentIndex()),c.trickModeVideo&&!c.trickModeVideo.segmentIndex&&n.push(c.trickModeVideo.createSegmentIndex());return A(x,Promise.all(n),2)}if(e.segmentIndex instanceof xn)for(d=t;d<r.length;d++)p=r[d],p.segmentIndex&&e.segmentIndex.g.push(p.segmentIndex);Y(x)})}function c4(e,t,n,r,a,l){if(t0(t))return null;var c=r(t);return kx(e,n,c),c.createSegmentIndex&&(c.createSegmentIndex=function(){return G(function(d){return c.segmentIndex?d.u(0):(c.segmentIndex=new xn,A(d,bx(c,0),0))})}),!c.matchedStreams||!c.matchedStreams.length?null:(Ex(c,0,a,l,0),c)}function Ex(e,t,n,r,a){var l=e.matchedStreams;for(t+=a;t<l.length;t++){var c=l[t];n(e,c);var d=!0;if(e.type=="audio"&&Yr(e.language,c.language)==0&&(d=!1),d&&(r[t-a].delete(c),c.fullMimeTypes))for(c=T(c.fullMimeTypes.values()),d=c.next();!d.done;d=c.next())e.fullMimeTypes.add(d.value)}}function $u(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=T(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function pc(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function ha(e,t){function n(c,d){c||(c=[]),d=T(d);for(var p=d.next();!p.done;p=d.next())p=p.value,c.includes(p)||c.push(p);return c}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=T(t.keyIds),a=r.next();!a.done;a=r.next())e.keyIds.add(a.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=ld(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new ne(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=T(t.closedCaptions),a=r.next();!a.done;a=r.next()){var l=T(a.value);a=l.next().value,l=l.next().value,e.closedCaptions.set(a,l)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=$u(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),ha(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&ha(e.trickModeVideo,t)}function mc(e,t){var n=e.roles;n||(n=[]);for(var r=T(t.roles),a=r.next();!a.done;a=r.next())a=a.value,n.includes(a)||n.push(a);for(e.roles=n,n=T(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,L(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=T(t.closedCaptions),n=t.next();!n.done;n=t.next())r=T(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function kx(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=T(t);for(var a=t.next();!a.done;a=t.next()){if(a=h4(e,a.value,n),!a)return;r.push(a)}n.matchedStreams=r}function h4(e,t,n){var r={audio:i0,video:n0,text:Hu,image:Gu}[n.type],a=null,l=r(n);if(t.has(l))a=t.get(l);else{l={audio:function(x,C){return e0(e,x,C)},video:function(x,C){return e0(e,x,C)},text:d4,image:p4}[n.type];for(var c={audio:m4,video:g4,text:y4,image:v4}[n.type],d=T(t.values()),p=d.next();!p.done;p=d.next())p=p.value,!l(n,p)||n.fastSwitching!=p.fastSwitching||a&&!c(n,a,p)||(a=p)}return e.s&&!t0(a)&&t.delete(r(a)),a}function zu(e,t){return e.mimeType!=t.mimeType?!1:gc(e.codecs)===gc(t.codecs)}s.Zg=function(e){this.o=e},s.gh=function(e){this.s=e};function e0(e,t,n){return!(!zu(t,n)&&!e.o||t.drmInfos&&!Sg(t.drmInfos,n.drmInfos))}function d4(e,t){return t.language?!(e.forced!==t.forced||Yr(e.language,t.language)==0||t.kind!=e.kind):!0}function p4(){return!0}function m4(e,t,n){var r=zu(e,t),a=zu(e,n);if(r&&!a)return!1;if(!r&&a||(r=Yr(e.language,t.language),a=Yr(e.language,n.language),a>r))return!0;if(a<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(l){return e.roles.includes(l)}),a=n.roles.filter(function(l){return e.roles.includes(l)}),a.length>r.length)return!0;if(a.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=Vu(e.channelsCount,t.channelsCount,n.channelsCount),r==Do?!0:r==fr?!1:(r=Vu(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Do?!0:r==fr?!1:!!(e.bandwidth&&Mx(e.bandwidth,t.bandwidth,n.bandwidth)==Do)))}function g4(e,t,n){var r=zu(e,t),a=zu(e,n);if(r&&!a)return!1;if(!r&&a||(r=Vu(e.width*e.height,t.width*t.height,n.width*n.height),r==Do))return!0;if(r==fr)return!1;if(e.frameRate){if(r=Vu(e.frameRate,t.frameRate,n.frameRate),r==Do)return!0;if(r==fr)return!1}return!!(e.bandwidth&&Mx(e.bandwidth,t.bandwidth,n.bandwidth)==Do)}function y4(e,t,n){var r=Yr(e.language,t.language),a=Yr(e.language,n.language);if(a>r)return!0;if(a<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(l){return e.roles.includes(l)}),a=n.roles.filter(function(l){return e.roles.includes(l)}),a.length>r.length)return!0;if(a.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function v4(e,t,n){return Vu(e.width*e.height,t.width*t.height,n.width*n.height)==Do}function Ax(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Ix(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Dt([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Vu(e,t,n){if(t==e&&e!=n)return fr;if(n==e&&e!=t)return Do;if(t>e){if(n<=e||n-e<t-e)return Do;if(n-e>t-e)return fr}else{if(n>e)return fr;if(e-n<e-t)return Do;if(e-n>e-t)return fr}return _x}function Mx(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Do:t<e?fr:_x}function t0(e){switch(e.type){case _t:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function n0(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,gc(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function i0(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,gc(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Hu(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Gu(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function gc(e){if(!o0.has(e)){var t=gi(e);o0.set(e,t)}return o0.get(e)}me("shaka.util.PeriodCombiner",xi),xi.prototype.setUseStreamOnce=xi.prototype.gh,xi.prototype.setAllowMultiTypeVariants=xi.prototype.Zg,xi.prototype.combinePeriods=xi.prototype.Ke,xi.prototype.getImageStreams=xi.prototype.Nh,xi.prototype.getTextStreams=xi.prototype.jf,xi.prototype.getVariants=xi.prototype.ei;var Do=1,_x=0,fr=-1,o0=new Map;function x4(e,t){var n=new DOMParser,r=w4.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Rx(e,t){try{var n=Xo(e);return x4(n,t)}catch{return null}}var w4=new Ss(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function yc(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.ea=1,this.B=[],this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.o=new Map,this.s={},this.ba={},this.m=new xi,this.H=0,this.da=new rt(5),this.I=new Et(function(){if(e.G&&!e.g.continueLoadingWhenPaused&&(e.C.jb(e.G,"timeupdate"),e.G.paused)){e.C.ha(e.G,"timeupdate",function(){return Ux(e)});return}Ux(e)}),this.N=new Ps,this.L=null,this.fa=[],this.R=1/0,this.F=!1,this.h=null,this.K=0,this.U=!1,this.C=new Ae,this.G=null,this.Z=!1}s=yc.prototype,s.configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.V()&&this.I.tc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Zg(this.g.dash.multiTypeVariantsAllowed&&xt()),this.m.gh(this.g.dash.useStreamOnceInPeriodFlattening))},s.start=function(e,t){var n=this,r;return G(function(a){if(a.g==1)return n.F=t.isLowLatencyMode(),n.A=[e],n.j=t,A(a,r0(n),2);if(r=a.h,n.j&&s0(n,r),!n.j)throw new ne(2,7,7001);return a.return(n.i)})},s.stop=function(){for(var e=T(Object.values(this.s)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.s={},this.o.clear(),this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.m=null,this.I!=null&&(this.I.stop(),this.I=null),this.h&&this.h.destroy(),this.C&&(this.C.release(),this.C=null),this.N.destroy()},s.update=function(){var e=this,t;return G(function(n){if(n.g==1)return Q(n,2),A(n,r0(e),4);if(n.g!=2)return q(n,0);if(t=W(n),!e.j||!t)return n.return();e.j.onError(t),Y(n)})},s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Wb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,s0(this,0))}}},s.banLocation=function(e){this.h&&this.h.banLocation(e)},s.setMediaElement=function(e){this.G=e};function r0(e){var t,n,r,a,l,c,d,p,x,C;return G(function(b){return b.g==1?(t=4,n="MPD",r=P4(e),a=e.A,r.length?(a=r,n="Patch",t=6):1<e.A.length&&e.h&&(l=Fu(e.h,"Location",!0),l.length&&(a=l)),c=Hn(a,e.g.retryParameters),d=Date.now(),A(b,u0(e,c,0,{type:t}),2)):b.g!=3?(p=b.h,e.j?(p.uri&&p.uri!=p.originalUri&&!e.A.includes(p.uri)&&e.A.unshift(p.uri),A(b,S4(e,p.data,p.uri,n),3)):b.return(0)):(x=Date.now(),C=(x-d)/1e3,e.da.sample(1,C),b.return(C))})}function S4(e,t,n,r){var a,l,c,d,p,x,C,b,k,E;return G(function(M){if(M.g==1){if(a=t,l=e.g.dash.manifestPreprocessor,c=Pf,l!=c){if(Tt("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),d=Rx(a,r),!d)throw new ne(2,4,4001,n);l(d),a=Ao(d.outerHTML)}if(p=Rd(a,r),!p)throw new ne(2,4,4001,n);return x=e.g.dash.manifestPreprocessorTXml,C=Of,x!=C&&x(p),r==="Patch"?M.return(C4(e,p)):e.g.dash.disableXlinkProcessing?M.return(Lx(e,p,n)):(b=e.g.dash.xlinkFailGracefully,k=hc(p,e.g.retryParameters,b,n,e.j.networkingEngine),Zr(e.N,k),A(M,k.promise,2))}return E=M.h,M.return(Lx(e,E,n))})}function Lx(e,t,n){var r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye,be,Re,Ee,je,yt,Mt,fn,Pt,gn,An,cn,jt,wn,Bn,jn,Pi,Oi,wo,hr,Rr,wa,dr,Zc,al,ul;return G(function(Po){switch(Po.g){case 1:for(e.h&&e.h.l.clear(),r=[n],a=[],l=new Map,c=Jt(t,"Location"),d=T(c),p=d.next();!p.done;p=d.next())x=p.value,C=x.attributes.serviceLocation,(b=mo(x))&&(k=Zn(r,[b])[0],C&&(e.h?ca(e.h,"Location",C,k):l.set(C,k)),a.push(k));if(e.h?(E=Fu(e.h,"Location",!0),0<E.length&&(r=e.A=E)):a.length&&(r=e.A=a),e.l.ae=t.attributes.id||"",e.l.td=Rt(t,"publishTime",Cr)||0,e.B=Jt(t,"PatchLocation"),M=Promise.resolve(),(R=yo(t,"ContentSteering"))&&e.j)for(_=R.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=_):(e.h=new fa(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=_,(j=mo(R))&&(Rt(R,"queryBeforeStart",Dd,!1)?M=ju(e.h,j):ju(e.h,j))),U=T(l.keys()),K=U.next();!K.done;K=U.next())O=K.value,V=l.get(O),ca(e.h,"Location",O,V);if(Z=Jt(t,"BaseURL"),re=!1,e.h)for(de=T(Z),se=de.next();!se.done;se=de.next())ae=se.value,he=ae.attributes.serviceLocation,Se=mo(ae),he&&Se&&(ca(e.h,"BaseURL",he,Se),re=!0);if(re&&e.h||(ye=Z.map(mo),te=Zn(r,ye)),be=function(){return e.h&&re?Fu(e.h,"BaseURL"):te||[]},e.l.Ga=be,Re=0,Z&&Z.length&&(Re=Rt(Z[0],"availabilityTimeOffset",df)||0),e.l.Ia=Re,Ee=e.g.dash.ignoreMinBufferTime,je=0,Ee||(je=Rt(t,"minBufferTime",$o)||0),e.H=Rt(t,"minimumUpdatePeriod",$o,-1),yt=Rt(t,"availabilityStartTime",Cr),Mt=Rt(t,"timeShiftBufferDepth",$o),fn=e.g.dash.ignoreSuggestedPresentationDelay,Pt=null,fn||(Pt=Rt(t,"suggestedPresentationDelay",$o)),gn=e.g.dash.ignoreMaxSegmentDuration,An=null,gn||(An=Rt(t,"maxSegmentDuration",$o)),cn=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.Z=e.i.presentationTimeline.V()&&cn=="static"),e.l.type=cn,e.i)for(jt=e.i.presentationTimeline,wn=T(Object.values(e.s)),Bn=wn.next();!Bn.done;Bn=wn.next())jn=Bn.value,jn.segmentIndex&&jn.segmentIndex.Ma(jt.mb());else Pi=e.g.defaultPresentationDelay||1.5*je,Oi=Pt??Pi,jt=new at(yt,Oi,e.g.dash.autoCorrectDrift);return jt.sc(cn=="static"),jt.V()&&!isNaN(e.g.availabilityWindowOverride)&&(Mt=e.g.availabilityWindowOverride),Mt==null&&(Mt=1/0),jt.pe(Mt),wo=t.attributes.profiles||"",e.l.profiles=wo.split(","),hr={vb:cn!="static",presentationTimeline:jt,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:Re,Kb:null,profiles:wo.split(","),roles:null},e.K=0,Rr=Nx(e,hr,be,t),wa=Rr.duration,dr=Rr.periods,(cn!="static"||e.Z)&&Rr.rg||jt.Za(wa||1/0),e.U&&!e.F&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.F=e.j.isLowLatencyMode()),e.F&&jt.$g(e.R),jt.xf(An||1),A(Po,M,2);case 2:return e.F&&(je=0,Zc=Pt??e.g.defaultPresentationDelay,jt.Of(Zc)),e.i?(e.i.periodCount=dr.length,e.i.gapCount=e.K,A(Po,Dx(e,dr,!1),4)):A(Po,e.m.Ke(dr,hr.vb),6);case 6:if(e.i={presentationTimeline:jt,variants:e.m.j,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:je||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:T4(t),nextUrl:b4(t),periodCount:dr.length,gapCount:e.K,isLowLatency:e.U},!jt.nh()){Po.u(7);break}return al=Jt(t,"UTCTiming"),A(Po,L4(e,be,al),8);case 8:if(ul=Po.h,!e.j)return Po.return();jt.ah(ul);case 7:jt.Wd();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),Y(Po)}})}function Dx(e,t,n){var r;return G(function(a){if(a.g==1)return A(a,e.m.Ke(t,!0,n),2);e.i.variants=e.m.j,r=e.m.jf(),0<r.length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),Y(a)})}function C4(e,t){var n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he;return G(function(Se){if(Se.g==1){if(n=t.attributes.mpdId,r=Rt(t,"originalPublishTime",Cr),!n||n!==e.l.ae||r!==e.l.td)throw e.B=[],new ne(1,4,4052);for(a=[],l=[],c=new Set,d=T(py(t)),p=d.next();!p.done;p=d.next())if(x=p.value,C=pf(x.attributes.sel||""),b=C[C.length-1],k=mo(x)||"",b.name==="MPD")if(b.Sb==="mediaPresentationDuration"){E=mo(x)||"";var ye=$o(E);if(ye!=null){e.l.Kb=ye;for(var be=T(e.o.values()),Re=be.next();!Re.done;Re=be.next())Re.value.Kb=ye}}else if(b.Sb==="type"){for(e.i.presentationTimeline.sc(k=="static"),e.l.type=k,ye=T(e.o.values()),be=ye.next();!be.done;be=ye.next())be.value.vb=k=="dynamic";k=="static"&&(e.H=-1)}else b.Sb==="publishTime"?e.l.td=Cr(k)||0:b.Sb===null&&x.tagName==="add"&&l.push(x);else if(b.name==="PatchLocation")gy(e.B,x);else if(b.name==="Period"){if(x.tagName==="add")l.push(x);else if(x.tagName==="remove"&&b.id){ye=e,be=b.id,ye.i.periodCount--,Re=T(ye.o.keys());for(var Ee=Re.next();!Ee.done;Ee=Re.next())if(Ee=Ee.value,Ee.startsWith(be)){var je=ye.o.get(Ee);ua(je,ss,"SegmentTimeline").children=[],Ox(ye,Ee),ye.o.delete(Ee)}}}else if(b.name==="SegmentTemplate"){if(be=pf(x.attributes.sel||""),ye=be[be.length-1],ye.Sb){for(be=Px(e,be),Re=mo(x)||"",Ee=T(be),je=Ee.next();!je.done;je=Ee.next())je=e.o.get(je.value),vy(je.J.$b,x.tagName,ye.Sb,Re);ye=be}else ye=[];for(M=ye,R=T(M),_=R.next();!_.done;_=R.next())j=_.value,c.add(j)}else if(b.name==="SegmentTimeline"||b.name==="S"){for(ye=pf(x.attributes.sel||""),ye=Px(e,ye),be=T(ye),Re=be.next();!Re.done;Re=be.next())Re=e.o.get(Re.value),Re=ua(Re,ss,"SegmentTimeline"),Ee=Jt(Re,"S"),gy(Ee,x),Re.children=Ee;for(U=ye,K=T(U),O=K.next();!O.done;O=K.next())V=O.value,c.add(V)}for(Z=T(c),te=Z.next();!te.done;te=Z.next())re=te.value,Ox(e,re);for(de=T(l),se=de.next();!se.done;se=de.next())ae=se.value,a.push.apply(a,L(Nx(e,{vb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:e.l.Ia,profiles:e.l.profiles,Kb:e.l.Kb,roles:null},e.l.Ga,ae).periods));return a.length?(e.i.periodCount+=a.length,e.i.gapCount=e.K,A(Se,Dx(e,a,!0),2)):Se.u(2)}e.l.type=="static"&&(he=e.l.Kb,e.i.presentationTimeline.Za(he||1/0)),Y(Se)})}function Px(e,t){var n="",r="",a=-1,l="";t=T(t);for(var c=t.next();!c.done;c=t.next())c=c.value,c.name==="Period"?n=c.id:c.name==="AdaptationSet"?(r=c.id,c.position!==null&&(a=c.position)):c.name==="Representation"&&(l=c.id);if(t=[],l)t.push(n+","+l);else if(r)for(a=T(e.o.values()),e=a.next();!e.done;e=a.next())e=e.value,e.ta.id===n&&e.ja.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<a)for(r=T(e.o.values()),e=r.next();!e.done;e=r.next())e=e.value,e.ta.id===n&&e.ja.position===a&&e.J.id&&t.push(n+","+e.J.id);return t}function Ox(e,t){var n=e.o.get(t),r=e.s[t];r.segmentIndex&&r.segmentIndex.Ma(e.i.presentationTimeline.mb());try{var a=vx(n,function(l,c,d,p){return jx(e,l,c,d,p)},e.s,!0,e.g.dash.initialSegmentLimit,e.ba,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return G(function(l){if(l.g==1)return r.segmentIndex?l.u(0):A(l,a.fc(),3);r.segmentIndex=l.h,Y(l)})}}catch(l){if(t=n.J.contentType,t!=_t&&t!="application"&&t!="image"||l.code!=4002)throw l}}function T4(e){var t=yo(e,"ServiceDescription");if(!t||(e=yo(t,"Latency"),t=yo(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function b4(e){if(e=Jt(e,"SupplementalProperty"),!e.length)return null;e=T(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function Nx(e,t,n,r){var a=t.Kb;a||(a=Rt(r,"mediaPresentationDuration",$o),e.l.Kb=a);var l=0;e.i&&e.i.presentationTimeline&&e.Z&&(l=e.i.presentationTimeline.Vb());var c=[],d=l;r=Jt(r,"Period");for(var p=0;p<r.length;p++){var x=r[p],C=r[p+1],b=Rt(x,"start",$o,d),k=x.attributes.id,E=Rt(x,"duration",$o),M=null;if(C){var R=Rt(C,"start",$o);R!=null&&(M=R-b)}else a!=null&&(M=a-b+l);if(R=QT,M&&E&&Math.abs(M-E)>R&&M>E&&e.K++,M==null&&(M=E),!(e.L!==null&&k!==null&&b!==null&&b<e.L)||e.fa.includes(k)||p+1==r.length){if(b!==null&&(e.L===null||b>e.L)&&(e.L=b),d=E4(e,t,n,{start:b,duration:M,node:x,ld:M==null||!C}),c.push(d),t.ta.id&&M&&(e.ba[t.ta.id]=M),M==null){d=null;break}d=b+M}}return e.fa=c.map(function(_){return _.id}),a!=null?{periods:c,duration:a+l,rg:!1}:{periods:c,duration:d,rg:!0}}function E4(e,t,n,r){t.ta=a0(e,r.node,null,n),t.ka=r,t.ta.Ia=t.Ia,t.ta.id||(t.ta.id="__shaka_period_"+r.start);var a=Jt(r.node,"EventStream");n=t.presentationTimeline.mb(),a=T(a);for(var l=a.next();!l.done;l=a.next())D4(e,r.start,r.duration,l.value,n);if(n=Jt(r.node,"AdaptationSet").map(function(C,b){return k4(e,t,b,C)}).filter(Kr),t.vb){for(r=[],a=T(n),l=a.next();!l.done;l=a.next()){l=T(l.value.Mi);for(var c=l.next();!c.done;c=l.next())r.push(c.value)}if(r.length!=new Set(r).size)throw new ne(2,4,4018)}for(r=n.filter(function(C){return!C.Yf}),n=n.filter(function(C){return C.Yf}),n=T(n),a=n.next();!a.done;a=n.next()){a=a.value,l=a.Yf.split(" "),c=T(r);for(var d=c.next();!d.done;d=c.next())if(d=d.value,l.includes(d.id)){d=T(d.streams);for(var p=d.next(),x={};!p.done;x={Sf:void 0},p=d.next())x.Sf=p.value,x.Sf.trickModeVideo=a.streams.find(function(C){return function(b){return gi(C.Sf.codecs)==gi(b.codecs)}}(x))}}if(n=vc(e.g.disableAudio,r,"audio"),a=vc(e.g.disableVideo,r,"video"),l=vc(e.g.disableText,r,_t),r=vc(e.g.disableThumbnails,r,"image"),a.length===0&&n.length===0)throw new ne(2,4,4004);return{id:t.ta.id,audioStreams:n,videoStreams:a,textStreams:l,imageStreams:r}}function vc(e,t,n){return e||!t.length?[]:t.reduce(function(r,a){return a.contentType!=n||r.push.apply(r,L(a.streams)),r},[])}function k4(e,t,n,r){function a(ae){switch(ae){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function l(ae){switch(ae){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ja=a0(e,r,t.ta,null),t.ja.position=n;var c=!1;n=Jt(r,"Role");var d=n.map(function(ae){return ae.attributes.value}).filter(Kr),p=void 0,x=t.ja.contentType==_t;x&&(p="subtitle"),n=T(n);for(var C=n.next();!C.done;C=n.next()){C=C.value;var b=C.attributes.schemeIdUri;if(b==null||b=="urn:mpeg:dash:role:2011")switch(C=C.attributes.value,C){case"main":c=!0;break;case"caption":case"subtitle":p=C}}var k,E;b=Jt(r,"EssentialProperty"),n=null;var M=!1;C=!1,b=T(b);for(var R=b.next();!R.done;R=b.next()){R=R.value;var _=R.attributes.schemeIdUri;_=="http://dashif.org/guidelines/trickmode"?n=R.attributes.value:_=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?k=l(parseInt(R.attributes.value,10)):_=="urn:mpeg:mpegB:cicp:ColourPrimaries"?E=a(parseInt(R.attributes.value,10)):_!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(_=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?M=!0:C=!0)}var j=null;for(b=Jt(r,"SupplementalProperty"),b=T(b),R=b.next();!R.done;R=b.next())R=R.value,_=R.attributes.schemeIdUri,_=="http://dashif.org/guidelines/last-segment-number"?j=parseInt(R.attributes.value,10)-1:_=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?k=l(parseInt(R.attributes.value,10)):_=="urn:mpeg:mpegB:cicp:ColourPrimaries"&&(E=a(parseInt(R.attributes.value,10)));b=Jt(r,"Accessibility");var U=new Map,K;for(b=T(b),R=b.next();!R.done;R=b.next())if(_=R.value,R=_.attributes.schemeIdUri,_=_.attributes.value,R!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(R!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)R=="urn:mpeg:dash:role:2011"?_!=null&&(d.push(_),_=="captions"&&(p="caption")):R=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(_=="1"?K="visually impaired":_=="2"&&(K="hard of hearing"));else if(R=1,_!=null){_=T(_.split(";"));for(var O=_.next();!O.done;O=_.next()){var V=O.value,Z=O=void 0;V.includes("=")?(V=V.split("="),O="svc"+V[0],Z=V[1].split(",")[0].split(":").pop()):(O="svc"+R,R++,Z=V),U.set(O,$t(Z))}}else U.set("svc1","und");else if(R=1,_!=null)for(_=_.split(";"),O=T(_),V=O.next();!V.done;V=O.next()){Z=V.value;var te=V=void 0;Z.includes("=")?(Z=Z.split("="),V=Z[0].startsWith("CC")?Z[0]:"CC"+Z[0],te=Z[1]||"und"):(V="CC"+R,_.length==2?R+=2:R++,te=Z),U.set(V,$t(te))}else U.set("CC1","und");if(C)return null;C=Jt(r,"ContentProtection");var re=ux(C,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),de=$t(t.ja.language||"und"),se=t.ja.label;if(C=Jt(r,"Representation"),r=C.map(function(ae){return(ae=A4(e,t,re,p,de,se,c,d,U,ae,K,j))&&(ae.hdr=ae.hdr||k,ae.colorGamut=ae.colorGamut||E,ae.fastSwitching=M),ae}).filter(function(ae){return!!ae}),r.length==0){if(n=t.ja.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||x||n)return null;throw new ne(2,4,4003)}if(!t.ja.contentType||t.ja.contentType=="application")for(t.ja.contentType=Fx(r[0].mimeType,r[0].codecs),x=T(r),b=x.next();!b.done;b=x.next())b.value.type=t.ja.contentType;for(x=t.ja.id||"__fake__"+e.ea++,b=T(r),R=b.next();!R.done;R=b.next()){for(R=R.value,_=T(re.drmInfos),O=_.next();!O.done;O=_.next())O=O.value,O.keyIds=O.keyIds&&R.keyIds?new Set([].concat(L(O.keyIds),L(R.keyIds))):O.keyIds||R.keyIds;e.g.dash.enableAudioGroups&&(R.groupId=x)}return C=C.map(function(ae){return ae.attributes.id}).filter(Kr),{id:x,contentType:t.ja.contentType,language:de,ek:c,streams:r,drmInfos:re.drmInfos,Yf:n,Mi:C}}function A4(e,t,n,r,a,l,c,d,p,x,C,b){t.J=a0(e,x,t.ja,null);var k=t.J.id;if(e.R=Math.min(e.R,t.J.Ia),e.U=0<e.R,!R4(t.J))return null;var E=t.ka.start;t.bandwidth=Rt(x,"bandwidth",er)||0,t.roles=d;var M=t.J.contentType,R=M==_t||M=="application";M=M=="image";try{var _=void 0;if(n.Fe){var j=t.J.Ga,U=Zn(j(),[n.Fe.ti]),K=Hn(U,e.g.retryParameters);_={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var he,Se,ye;return G(function(be){if(be.g==1)return A(be,u0(e,K,6),2);if(be.g!=3){if(he=be.h,!he.data||he.data.byteLength!=16)throw new ne(2,4,4049);return Se={name:"AES-CBC"},ye=_,A(be,h.crypto.subtle.importKey("raw",he.data,Se,!0,["decrypt"]),3)}ye.cryptoKey=be.h,_.fetchKey=void 0,Y(be)})}}}if(t.J.aesKey=_,j=function(he,Se,ye,be){return jx(e,he,Se,ye,be)},t.J.Rc)var O=QA(t,j,_);else if(t.J.Pb)O=JA(t,e.s,_);else if(t.J.$b)O=vx(t,j,e.s,!!e.i,e.g.dash.initialSegmentLimit,e.ba,_,b,!1);else{var V=t.ka.duration||0,Z=t.J.Ga,te=t.J.mimeType,re=t.J.codecs;O={fc:function(){var he=ep(E,V,Z());return he.Hb(function(Se){Se.mimeType=te,Se.codecs=re}),Promise.resolve(he)}}}}catch(he){if((R||M)&&he.code==4002)return null;throw he}b=Jt(x,"ContentProtection"),b=OA(b,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),b=new Set(b?[b]:[]),j=!1,Jt(x,"SupplementalProperty").some(function(he){return he.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&he.attributes.value=="JOC"})&&(j=!0),U=!1,R&&(U=d.includes("forced_subtitle")||d.includes("forced-subtitle"));var de;if(M&&((x=Jt(x,"EssentialProperty").find(function(he){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(he.attributes.schemeIdUri)}))&&(de=x.attributes.value),!de))return null;var se;x=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(x.includes("hvc1.2.4.L153.B0")||x.includes("hev1.2.4.L153.B0"))&&(se="PQ"),R=t.J.id?t.ta.id+","+t.J.id:"",e.B.length&&k&&e.o.set(t.ta.id+","+k,I4(t));var ae=R&&e.s[R]?e.s[R]:{id:e.ea++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){ae.segmentIndex&&(ae.segmentIndex.release(),ae.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:x,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:b,language:a,originalLanguage:t.ja.language,label:l,type:t.ja.contentType,primary:c,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:d,forced:U,channelsCount:t.J.Jc,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:j,closedCaptions:p,hdr:se,colorGamut:void 0,videoLayout:void 0,tilesLayout:de,accessibilityPurpose:C,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Dn(t.J.mimeType,t.J.codecs)])};return ae.createSegmentIndex=function(){var he;return G(function(Se){if(Se.g==1)return ae.segmentIndex?Se.u(0):(he=ae,A(Se,O.fc(),3));he.segmentIndex=Se.h,Y(Se)})},R&&t.vb&&!e.s[R]&&(e.s[R]=ae),ae}function I4(e){for(var t={},n=T(Object.keys(e)),r=n.next();!r.done;r=n.next())if(r=r.value,["period","adaptationSet","representation"].includes(r)){var a=e[r];t[r]={Rc:null,Pb:null,$b:a.$b,Ga:a.Ga,width:a.width,height:a.height,contentType:a.contentType,mimeType:a.mimeType,language:a.language,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,emsgSchemeIdUris:a.emsgSchemeIdUris,id:a.id,position:a.position,Jc:a.Jc,audioSamplingRate:a.audioSamplingRate,Ia:a.Ia,Gc:a.Gc}}else r=="periodInfo"?(a=e[r],t[r]={start:a.start,duration:a.duration,node:null,ld:a.ld}):t[r]=e[r];return t}function Ux(e){var t,n;return G(function(r){switch(r.g){case 1:return t=0,Q(r,2),A(r,r0(e),4);case 4:t=r.h,q(r,3);break;case 2:if(n=W(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),s0(e,t),Y(r)}})}function s0(e,t){if(!(0>e.H)){var n=e.H;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.I.Y(Math.max(n-t,St(e.da)))}}function a0(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Jc:null,audioSamplingRate:null,Ia:0,Kf:0},r=r||n.Ga;var a=t.attributes.id,l=Jt(t,"BaseURL"),c,d=!1;if(e.h)for(var p=T(l),x=p.next();!x.done;x=p.next()){var C=x.value;x=C.attributes.serviceLocation,C=mo(C),x&&C&&(ca(e.h,a,x,C),d=!0)}d&&e.h||(c=l.map(mo)),p=t.attributes.contentType||n.contentType,x=t.attributes.mimeType||n.mimeType,C=[t.attributes.codecs||n.codecs];var b=Jo(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");b&&C.push(b),C=sp(C).join(","),b=Rt(t,"frameRate",Db)||n.frameRate;var k=t.attributes.sar||n.pixelAspectRatio,E=M4(Jt(t,"InbandEventStream"),n.emsgSchemeIdUris),M=Jt(t,"AudioChannelConfiguration");M=_4(M)||n.Jc;var R=Rt(t,"audioSamplingRate",ai)||n.audioSamplingRate;p||(p=Fx(x,C));var _=yo(t,"SegmentBase"),j=yo(t,"SegmentTemplate"),U=_&&Rt(_,"availabilityTimeOffset",df)||0,K=j&&Rt(j,"availabilityTimeOffset",df)||0,O=l&&l.length&&Rt(l[0],"availabilityTimeOffset",df)||0;U=n.Ia+O+U+K,K=null,(O=yo(t,"SegmentSequenceProperties"))&&(O=yo(O,"SAP"))&&(K=Rt(O,"cadence",hf)),O=t.attributes.label;var V=Jt(t,"Label");return V&&V.length&&(V=V[0],On(V)&&(O=On(V))),{Ga:function(){return Zn(r(),l.length?e.h&&d?Fu(e.h,a):c||[]:[])},Rc:_||n.Rc,Pb:yo(t,"SegmentList")||n.Pb,$b:j||n.$b,width:Rt(t,"width",ai)||n.width,height:Rt(t,"height",ai)||n.height,contentType:p,mimeType:x,codecs:C,frameRate:b,pixelAspectRatio:k,emsgSchemeIdUris:E,id:a,language:t.attributes.lang,Jc:M,audioSamplingRate:R,Ia:U,Gc:null,Kf:K||n.Kf,label:O||null}}function M4(e,t){t=t.slice(),e=T(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function _4(e){e=T(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function R4(e){var t=e.Rc?1:0;return t+=e.Pb?1:0,t+=e.$b?1:0,t==0?e.contentType==_t||e.contentType=="application":(t!=1&&(e.Rc&&(e.Pb=null),e.$b=null),!0)}function Bx(e,t,n,r){var a,l,c,d,p,x,C;return G(function(b){if(b.g==1)return a=[mi(n)],l=Zn(t(),a),c=Hn(l,e.g.retryParameters),c.method=r,d=e.j.networkingEngine.request(4,c),Zr(e.N,d),A(b,d.promise,2);if(p=b.h,r=="HEAD"){if(!p.headers||!p.headers.date)return b.return(0);x=p.headers.date}else x=nn(p.data);return C=Date.parse(x),isNaN(C)?b.return(0):b.return(C-Date.now())})}function L4(e,t,n){var r,a,l,c,d,p,x,C;return G(function(b){switch(b.g){case 1:r=n.map(function(k){return{scheme:k.attributes.schemeIdUri,value:k.attributes.value}}),a=e.g.dash.clockSyncUri,!r.length&&a&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:a}),l=T(r),c=l.next();case 2:if(c.done){b.u(4);break}switch(d=c.value,Q(b,5),p=d.scheme,x=d.value,p){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return b.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return b.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return C=Date.parse(x),b.return(isNaN(C)?0:C-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":He("NTP UTCTiming scheme is not supported");break;default:He("Unrecognized scheme in UTCTiming element",p)}b.u(9);break;case 7:return A(b,Bx(e,t,x,"HEAD"),10);case 10:return b.return(b.h);case 8:return A(b,Bx(e,t,x,"GET"),11);case 11:return b.return(b.h);case 9:q(b,3);break;case 5:W(b);case 3:c=l.next(),b.u(2);break;case 4:return He("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),b.return(0)}})}function D4(e,t,n,r,a){var l=r.attributes.schemeIdUri||"",c=r.attributes.value||"",d=Rt(r,"timescale",ai)||1;r=T(Jt(r,"Event"));for(var p=r.next();!p.done;p=r.next()){p=p.value;var x=Rt(p,"presentationTime",ai)||0,C=Rt(p,"duration",ai)||0;x=x/d+t,C=x+C/d,n!=null&&(x=Math.min(x,t+n),C=Math.min(C,t+n)),C<a||(p={schemeIdUri:l,value:c,startTime:x,endTime:C,id:p.attributes.id||"",eventElement:xy(p),eventNode:p},e.j.onTimelineRegionAdded(p))}}function jx(e,t,n,r,a){var l,c,d,p;return G(function(x){return x.g==1?(l=Mo,c=a?0:1,d=Gs(t,n,r,e.g.retryParameters),A(x,u0(e,d,l,{type:c}),2)):(p=x.h,x.return(p.data))})}function Fx(e,t){return t=Dn(e,t),ou(t)?_t:e.split("/")[0]}function u0(e,t,n,r){return t=e.j.networkingEngine.request(n,t,r),Zr(e.N,t),t.promise}function P4(e){var t=e.l.td;if(!e.l.ae||!t||!e.B.length)return[];var n=Date.now()/1e3,r=e.B.filter(function(a){return a=ai(a.attributes.ttl),!a||t+a>n}).map(mo).filter(Kr);return r.length?Zn(e.A,r):[]}me("shaka.dash.DashParser",yc),vo["application/dash+xml"]=function(){return new yc},vo["video/vnd.mpeg.dash.mpd"]=function(){return new yc};function xc(){}me("shaka.dependencies",xc),xc.has=function(e){return l0.has(e)},xc.add=function(e,t){if(!zx[e])throw Error(e+" is not supported");e==$x?Tt("mux.js","mux.js is no longer used in Shaka Player."):l0.set(e,function(){return t})};var $x="muxjs",zx={fk:$x,ISOBoxer:"ISOBoxer"};xc.Allowed=zx;var l0=new Map([["ISOBoxer",function(){return h.ISOBoxer}]]);function Vx(e,t,n){this.type=e,this.g=t,this.segments=n||null}function Hx(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}Hx.prototype.toString=function(e){function t(a){return a.name+"="+(isNaN(Number(a.value))?'"'+a.value+'"':a.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(a){return e?!e.has(a.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function Gx(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Wu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function Ke(e,t,n){return(e=Wu(e,t))?e.value:n||null}function zt(e,t){if(e=Wu(e,t),!e)throw new ne(2,4,4023,t);return e.value}function Wx(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.zb=n}function Xx(e,t){this.name=e,this.value=t}function to(e,t){return e.filter(function(n){return n.name==t})}function qx(e,t){return e.filter(function(n){return zt(n,"TYPE")==t})}function ii(e,t){e=T(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function da(e,t,n){return n=n===void 0?0:n,(e=ii(e,t))?Number(e.value):n}function Mr(e,t,n){return t?Kx(e,[t],n):[]}function Kx(e,t,n){if(!t.length)return[];t=Zn(e,t),e=[],t=T(t);for(var r=t.next();!r.done;r=t.next())e.push(Yx(r.value,n));return e}function Yx(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=T(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var a=r.slice(2,r.length-1),l=t.get(a);if(l)e=e.replace(r,l);else throw new ne(2,4,4039,a)}}return e}function O4(){this.g=0}function f0(e,t){t=nn(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new ne(2,4,4015);t=0;for(var r=!0,a=T(n),l=a.next();!l.done;l=a.next())if(l=l.value,/^#(?!EXT)/m.test(l)||r)r=!1;else if(l=c0(e,l),--e.g,Qx.includes(l.name)){t=1;break}else l.name=="EXT-X-STREAM-INF"&&(r=!0);for(a=[],r=!0,l=0;l<n.length;l++){var c=n[l],d=n[l+1];if(/^#(?!EXT)/m.test(c)||r)r=!1;else{if(c=c0(e,c),N4.includes(c.name)){if(t!=1)throw new ne(2,4,4017);c=n.splice(l,n.length-l),n=[],r=[],l=[],d=null,c=T(c);for(var p=c.next();!p.done;p=c.next())p=p.value,/^(#EXT)/.test(p)?(p=c0(e,p),Qx.includes(p.name)?a.push(p):p.name=="EXT-X-MAP"?d=p:p.name=="EXT-X-PART"?l.push(p):p.name=="EXT-X-PRELOAD-HINT"?Ke(p,"TYPE")=="PART"?l.push(p):Ke(p,"TYPE")=="MAP"&&(p.name="EXT-X-MAP",d=p):r.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),d&&r.push(d),n.push(new Wx(p,r,l)),r=[],l=[]);return l.length&&(d&&r.push(d),n.push(new Wx("",r,l))),new Vx(t,a,n)}a.push(c),c.name=="EXT-X-STREAM-INF"&&(c.attributes.push(new Xx("URI",d)),r=!0)}}return new Vx(t,a)}function c0(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new ne(2,4,4016,t);t=n[1];var r=n[2];n=[];var a;if(r){r=new kr(r);var l;(l=rr(r,/^([^,=]+)(?:,|$)/g))&&(a=l[1]);for(var c=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;l=rr(r,c);)n.push(new Xx(l[1],l[2]||l[3])),ia(r)}return new Hx(e,t,n,a)}var Qx="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),N4="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function Zx(){}function Jx(e){try{var t=h0(e);return Ds({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return Qr(n)}}function h0(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new ne(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new ne(2,1,1004,e);var n=t[0];e=h.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var a;return r?a=Yi(e):a=Ao(e),{data:a,contentType:n}}me("shaka.net.DataUriPlugin",Zx),Zx.parse=Jx,Yo("data",Jx);function wc(){var e=this;this.g=this.h=null,this.B=1,this.s=new Map,this.G=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(_t,new Map),this.N.set("image",new Map),this.ub=new Set,this.i=new Map,this.l=null,this.L="",this.Fa=new O4,this.H=-1,this.fa=1/0,this.ea=this.Gb=!1,this.A=new Et(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.Z.jb(e.ba,"timeupdate"),e.ba.paused)){e.Z.ha(e.ba,"timeupdate",function(){return w2(e)});return}w2(e)}),this.xa=Ec,this.m=null,this.ab=0,this.o=1/0,this.Da=this.za=this.U=0,this.da=new Ps,this.C=new Map,this.F=new Map,this.qa=new Map,this.oa=new Map,this.K=new Map,this.pa=new Map,this.ya=new Map,this.Fb=this.I=!1,this.Db=new rt(5),this.j=null,this.R=!0,this.Ea=new Set,this.Z=new Ae,this.ba=null}s=wc.prototype,s.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},s.start=function(e,t){var n=this,r;return G(function(a){return a.g==1?(n.h=t,n.I=t.isLowLatencyMode(),A(a,w0(n,[e]),2)):a.g!=3?(r=a.h,n.L=r.uri,A(a,j4(n,r.data,e),3)):a.return(n.m)})},s.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.da&&(e.push(this.da.destroy()),this.da=null),this.g=this.h=null,this.ub.clear(),this.m=null,this.i.clear(),this.G.clear(),this.F.clear(),this.s.clear(),this.qa.clear(),this.oa.clear(),this.K.clear(),this.pa.clear(),this.ya.clear(),this.Ea.clear(),this.j&&this.j.destroy(),this.Z&&(this.Z.release(),this.Z=null),Promise.all(e)},s.update=function(){var e=this,t,n,r,a,l,c,d,p,x,C,b,k;return G(function(E){if(E.g==1){if(!Ri(e))return E.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,r=n.filter(function(M){return M.stream.segmentIndex}),a=T(r),l=a.next();!l.done;l=a.next())c=l.value,t.push(U4(e,c));return A(E,Promise.all(t),2)}for(u2(e,r.map(function(M){return M.stream})),d=r.some(function(M){return M.ed==0}),r.length&&!d&&(p=o3,Tc(e,p.sh),x=r.map(function(M){return M.Jb}),e.l.Za(Math.min.apply(Math,L(x))),e.h.updateDuration()),d&&p0(e),C=T(r),b=C.next();!b.done;b=C.next())k=b.value,k.stream.segmentIndex&&!k.stream.segmentIndex.O[0]&&e.h.disableStream(k.stream);Y(E)})};function d0(e,t){return Ri(e)?e.N.get(t.type):t.Yd}function U4(e,t){var n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye,be,Re,Ee,je,yt;return G(function(Mt){switch(Mt.g){case 1:for(n=[],r=T(t.M()),a=r.next();!a.done;a=r.next())l=a.value,c=new Tn(l),d=c.g,t.Fd&&(0<=t.ob&&d.add("_HLS_msn",String(t.ob)),0<=t.pb&&d.add("_HLS_part",String(t.pb))),t.Gd&&d.add("_HLS_skip","YES"),wg(d)&&Ya(c,d),n.push(c.toString());return Q(Mt,2),A(Mt,w0(e,n,!0),4);case 4:p=Mt.h,q(Mt,3);break;case 2:throw x=W(Mt),e.h&&e.h.disableStream(t.stream),x;case 3:if(!t.stream.segmentIndex)return Mt.return();if(C=f0(e.Fa,p.data),C.type!=1)throw new ne(2,4,4017);return b=p.uri,b==p.originalUri||t.M().includes(b)||t.Tg.push(b),k=to(C.g,"EXT-X-DEFINE"),E=m0(e,k,b),M=t.stream,R=d0(e,t),A(Mt,h2(e,C,M.mimeType,t.M,E),5);case 5:for(_=Mt.h,j=_.keyIds,U=_.drmInfos,K=function(fn,Pt){return fn.size===Pt.size&&[].concat(L(fn)).every(function(gn){return Pt.has(gn)})},K(M.keyIds,j)||(M.keyIds=j,M.drmInfos=U,e.h.newDrmInfo(M)),O=y2(e,C,R,E,t.M,t.type),V=O.segments,(Z=O.bandwidth)&&(M.bandwidth=Z),te=Af(M),re=T(V),de=re.next();!de.done;de=re.next())se=de.value,se.$&&(se.$.Hc=te);M.segmentIndex.rd(V,e.l.mb()),V.length&&(ae=da(C.g,"EXT-X-MEDIA-SEQUENCE",0),Se=(he=ii(C.g,"EXT-X-SKIP"))?Number(Ke(he,"SKIPPED-SEGMENTS")):0,ye=f2(ae,V),be=ye.ob,Re=ye.pb,t.ob=be+Se,t.pb=Re,Ee=R.get(ae),M.segmentIndex.Ma(Ee)),(je=M.segmentIndex.O[0]||null)&&(t.mc=je.startTime,yt=V[V.length-1],t.Jb=yt.endTime),ii(C.g,"EXT-X-ENDLIST")&&(t.ed=!0),y0(e,C),v0(e,C.g,M.type,E,t.M),Y(Mt)}})}s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(){},s.banLocation=function(e){this.j&&this.j.banLocation(e)},s.setMediaElement=function(e){this.ba=e};function e2(e,t){for(var n=e.H==-1,r=T(t),a=r.next();!a.done;a=r.next()){a=a.value;var l=a.stream.segmentIndex,c=d0(e,a);if(l=l.O[0]||null){c=T(c);for(var d=c.next();!d.done;d=c.next()){d=T(d.value);var p=d.next().value;if(d.next().value==l.startTime){n&&(e.H=Math.max(e.H,p)),a.Re=p;break}}}}if(!(0>e.H))for(t=T(t),n=t.next();!n.done;n=t.next())n=n.value,Xu(e,n.type)&&(r=n.stream.segmentIndex)&&(a=e.H-n.Re,0<a&&(r.O.splice(0,a),r=r.O[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),t2(e,n,r)))}function B4(e,t){if(e.fa==1/0){t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value.stream.segmentIndex.O[0]||null,n!=null&&n.h!=null&&(e.fa=Math.min(e.fa,n.h))}if(t=e.fa,t!=1/0){n=T(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!Xu(e,r.type)){var a=r.stream.segmentIndex;if(a!=null){var l=a.O[0]||null;if(l)if(l.h==null)Xe("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.M(),"Expect AV sync issues!");else for(t2(e,r,l.h-t-l.startTime),r=T(a),a=r.next();!a.done;a=r.next())a.value.Vf(t)}}}}function t2(e,t,n){t.mc+=n,t.Jb+=n,e=d0(e,t);for(var r=T(e),a=r.next();!a.done;a=r.next()){var l=T(a.value);a=l.next().value,l=l.next().value,e.set(a,l+n)}t.M()}function j4(e,t,n){var r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye,be,Re,Ee,je;return G(function(yt){switch(yt.g){case 1:return r=Ln,a=f0(e.Fa,t),l=to(a.g,"EXT-X-DEFINE"),c=[],d=[],p=[],e.l=new at(null,0),e.l.sc(!0),x=function(){return[n]},C=null,b=new Map,a.type==1?(e.R=!1,K=to(a.g,"EXT-X-DEFINE"),b=m0(e,K,e.L),C=r.ga,O="",V=new Map,A(yt,l2(e,e.B++,b,a,x,"",C,O,!0,"Media Playlist",null,V,null,!1,null,!1),7)):($4(e,l),k=to(a.g,"EXT-X-MEDIA"),E=to(a.g,"EXT-X-STREAM-INF"),M=to(a.g,"EXT-X-IMAGE-STREAM-INF"),R=to(a.g,"EXT-X-I-FRAME-STREAM-INF"),_=to(a.g,"EXT-X-SESSION-KEY"),j=to(a.g,"EXT-X-SESSION-DATA"),U=to(a.g,"EXT-X-CONTENT-STEERING"),V4(e,j),A(yt,H4(e,U),4));case 4:return z4(e,E),Q4(e,k),A(yt,q4(e,E,_,k,x,e.s),5);case 5:return c=yt.h,d=G4(e,k),A(yt,W4(e,M,R),6);case 6:p=yt.h,yt.u(3);break;case 7:Z=yt.h,e.i.set(n,Z),Z.stream&&(te=Af(Z.stream),Z.stream.segmentIndex.Hb(function(Mt){Mt.$&&(Mt.$.Hc=te)})),C=Z.stream.type,c.push({id:0,language:$t(O||"und"),disabledUntilTime:0,primary:!0,audio:C=="audio"?Z.stream:null,video:C=="video"?Z.stream:null,bandwidth:Z.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new ne(2,7,7001);if(a.type==1&&(Ri(e)&&(p2(e,a),re=e.o,e.A.Y(re)),de=Array.from(e.i.values()),g0(e,de),p0(e),v0(e,a.g,C,b,x)),e.m={presentationTimeline:e.l,variants:c,textStreams:d,imageStreams:p,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.ea||!e.g.hls.disableCodecGuessing){yt.u(8);break}for(se=[],ae=T(e.m.variants),he=ae.next();!he.done;he=ae.next())Se=he.value,Se.audio&&Se.audio.codecs===""&&se.push(Se.audio.createSegmentIndex()),Se.video&&Se.video.codecs===""&&se.push(Se.video.createSegmentIndex());return A(yt,Promise.all(se),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),c.length==1){for(ye=[],be=c[0],Re=T([be.video,be.audio]),Ee=Re.next();!Ee.done;Ee=Re.next())(je=Ee.value)&&!je.segmentIndex&&ye.push(je.createSegmentIndex());if(0<ye.length)return A(yt,Promise.all(ye),0)}yt.u(0)}})}function F4(e,t){var n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re;return G(function(de){switch(de.g){case 1:if(n=If(e.g.hls.mediaPlaylistFullMimeType),!t.length)return de.return(n);if(r=v2(e,t),a=r.segment,l=r.segmentIndex,c=a.M(),d=c[0],p=new Tn(d),x=p.Pa.split(".").pop(),C=S0[x])return de.return(If(C));if(b=Mo,E=k=null,M=a.$,!M){de.u(2);break}return R=Gs(M.M(),M.Xb(),M.Ub(),e.g.retryParameters),A(de,cr(e,R,b,{type:0}),3);case 3:if(_=de.h,k=_.data,!M.aesKey){de.u(4);break}return A(de,ap(k,M.aesKey,0),5);case 5:k=de.h;case 4:(E=_.headers["content-type"])&&(E=E.split(";")[0].toLowerCase());case 2:return j=Gs(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),A(de,cr(e,j,b,{type:1}),6);case 6:if(U=de.h,K=U.data,!a.aesKey){de.u(7);break}return A(de,ap(K,a.aesKey,l),8);case 8:K=de.h;case 7:if((O=U.headers["content-type"])&&(O=O.split(";")[0].toLowerCase()),V="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),Z=["audio/mp4","video/mp4","video/iso.segment"],gu(Me(K))){var se=K,ae=Me(se);ae=new en().parse(ae);var he=ae.$c();ae=ae.kf();var Se=[],ye=!1,be=!1;switch(he.audio){case"aac":case"aac-loas":Se.push("mp4a.40.2"),ye=!0;break;case"mp3":Se.push("mp4a.40.34"),ye=!0;break;case"ac3":Se.push("ac-3"),ye=!0;break;case"ec3":Se.push("ec-3"),ye=!0;break;case"opus":Se.push("opus"),ye=!0}switch(he.video){case"avc":ae.codec?Se.push(ae.codec):Se.push("avc1.42E01E"),be=!0;break;case"hvc":ae.codec?Se.push(ae.codec):Se.push("hvc1.1.6.L93.90"),be=!0;break;case"av1":Se.push("av01.0.01M.08"),be=!0}if(Se.length){if(he=ye&&!be,ye=new Map,be){be=new dn("video/mp2t"),be.i(se),se=T(be.j());for(var Re=se.next();!Re.done;Re=se.next())Re=Re.value,ye.set(Re,Re);be.g()}ae={type:he?"audio":"video",mimeType:"video/mp2t",codecs:Se.join(", "),language:null,height:ae.height,width:ae.width,channelCount:null,sampleRate:null,closedCaptions:ye,xd:null,colorGamut:null}}else ae=null;if(te=ae)return de.return(te)}else if((V.includes(x)||Z.includes(O)||E&&Z.includes(E))&&(re=NE(k,K)))return de.return(re);return O?de.return(If(O)):E?de.return(If(E)):de.return(n)}})}function p0(e){if(Ri(e)){if(e.xa==kc){for(var t,n=t=1/0,r=T(e.i.values()),a=r.next();!a.done;a=r.next())a=a.value,a.stream.segmentIndex&&a.stream.type!="text"&&(t=Math.min(t,a.Jb),n=Math.min(n,a.mc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.pe(t)}}else e.l.Za(a2(e));if(!e.l.s)for(t=T(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.bh(n.h);e.l.Wd()}function $4(e,t){var n=new Tn(e.L).g;t=T(t);for(var r=t.next();!r.done;r=t.next()){var a=r.value;r=Ke(a,"NAME");var l=Ke(a,"VALUE");a=Ke(a,"QUERYPARAM"),r&&l&&(e.s.has(r)||e.s.set(r,l)),a&&(r=n.get(a)[0])&&!e.s.has(r)&&e.s.set(a,r)}}function m0(e,t,n){n=new Tn(n).g;var r=new Map;t=T(t);for(var a=t.next();!a.done;a=t.next()){var l=a.value,c=Ke(l,"NAME"),d=Ke(l,"VALUE");a=Ke(l,"QUERYPARAM"),l=Ke(l,"IMPORT"),c&&d&&(r.has(c)||r.set(c,d)),a&&(c=n.get(a)[0])&&!r.has(c)&&r.set(a,c),l&&(a=e.s.get(l))&&r.set(l,a)}return r}function z4(e,t){t=T(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Ke(r,"AUDIO");n=Ke(r,"VIDEO");var l=Ke(r,"SUBTITLES");if(r=n2(e,r),l){var c=Ti(_t,r);e.F.set(l,c),Ht(r,c)}a&&(l=Ti("audio",r),l||(l=e.g.hls.defaultAudioCodec),e.F.set(a,l)),n&&(a=Ti("video",r),a||(a=e.g.hls.defaultVideoCodec),e.F.set(n,a))}}function V4(e,t){t=T(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Ke(r,"DATA-ID");n=Ke(r,"URI");var l=Ke(r,"LANGUAGE");r=Ke(r,"VALUE"),a=new Map().set("id",a),n&&a.set("uri",Mr([e.L],n,e.s)[0]),l&&a.set("language",l),r&&a.set("value",r),n=new Fe("sessiondata",a),e.h&&e.h.onEvent(n)}}function H4(e,t){var n,r,a,l,c,d;return G(function(p){if(!e.h||!e.g)return p.return();for(r=T(t),a=r.next();!a.done;a=r.next())if(l=a.value,c=Ke(l,"PATHWAY-ID"),d=Ke(l,"SERVER-URI"),c&&d){e.j=new fa(e.h),e.j.configure(e.g),e.j.i=[e.L],e.j.setManifestType("HLS"),e.j.h=c,n=ju(e.j,d);break}return A(p,n,0)})}function G4(e,t){var n=qx(t,"SUBTITLES");t=n.map(function(c){if(e.g.disableText)return null;try{return s2(e,[c],new Map).stream}catch(d){if(e.g.hls.ignoreTextStreamFailures)return null;throw d}}),n=T(n);for(var r=n.next();!r.done;r=n.next()){var a=zt(r.value,"GROUP-ID");if((r=e.F.get(a))&&(a=e.G.get(a))){a=T(a);for(var l=a.next();!l.done;l=a.next())l=l.value,l.stream.codecs=r,l.stream.mimeType=x0(_t,r)||Cc(_t),pa(l.stream)}}return t.filter(function(c){return c})}function pa(e){var t=new Set([Dn(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(Dn(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function W4(e,t,n){var r,a;return G(function(l){return l.g==1?(r=t.map(function(c){var d,p;return G(function(x){if(x.g==1)return e.g.disableThumbnails?x.return(null):(Q(x,2),A(x,Z4(e,c),4));if(x.g!=2)return d=x.h,x.return(d.stream);if(p=W(x),e.g.hls.ignoreImageStreamFailures)return x.return(null);throw p})}).concat(n.map(function(c){if(e.g.disableThumbnails)return null;try{var d=zt(c,"URI"),p=Ke(c,"CODECS")||"";if(e.i.has(d))var x=e.i.get(d);else{var C=Ke(c,"LANGUAGE"),b=Ke(c,"NAME"),k=Ke(c,"CHARACTERISTICS"),E=Sc(e,e.B++,[d],p,"image",C,!1,b,null,null,k,!1,null,!1),M=Ke(c,"RESOLUTION"),R=T(M?M.split("x"):[null,null]),_=R.next().value,j=R.next().value;E.stream.width=Number(_)||void 0,E.stream.height=Number(j)||void 0;var U=Ke(c,"BANDWIDTH");U&&(E.stream.bandwidth=Number(U)),e.i.set(d,E),x=E}return c=x,c.stream.codecs!=="mjpg"?null:c.stream}catch(K){if(e.g.hls.ignoreImageStreamFailures)return null;throw K}})),A(l,Promise.all(r),2)):(a=l.h,l.return(a.filter(function(c){return c})))})}function X4(e,t,n){t=t.filter(function(d){var p=Ke(d,"URI")||"";return Ke(d,"TYPE")!="SUBTITLES"&&p!=""});var r={};t=T(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var l=Gx(a,!e.j);r[l]?r[l].push(a):r[l]=[a]}for(var c in r)s2(e,r[c],n)}function q4(e,t,n,r,a,l){var c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye,be,Re,Ee,je,yt,Mt,fn,Pt,gn,An;return G(function(cn){switch(cn.g){case 1:if(c=[],d=new Set,!(0<n.length)){cn.u(2);break}p=T(n),x=p.next();case 3:if(x.done){cn.u(2);break}if(C=x.value,b=zt(C,"METHOD"),k=Ke(C,"KEYFORMAT")||"identity",E=null,b=="NONE"){cn.u(4);break}if(bc(b)){M=Mr(a(),zt(C,"URI"),l),R=M.sort().join(""),e.K.has(R)||(_=Hn(M,e.g.retryParameters),j=cr(e,_,6),e.K.set(R,j)),cn.u(4);break}if(k!="identity"){E=(U=T2[k])?U(C,""):null,cn.u(6);break}return A(cn,S2(e,C,"",a,null,l),9);case 9:E=cn.h;case 6:if(E){if(E.keyIds)for(K=T(E.keyIds),O=K.next();!O.done;O=K.next())V=O.value,d.add(V);c.push(E)}case 4:x=p.next(),cn.u(3);break;case 2:for(Z={},te=T(t),re=te.next();!re.done;re=te.next())de=re.value,se=Gx(de,!e.j),Z[se]?Z[se].push(de):Z[se]=[de];ae=[];for(he in Z)Se=Z[he],ye=Se[0],be=Ke(ye,"FRAME-RATE"),Re=Number(Ke(ye,"AVERAGE-BANDWIDTH"))||Number(zt(ye,"BANDWIDTH")),Ee=Ke(ye,"RESOLUTION"),je=T(Ee?Ee.split("x"):[null,null]),yt=je.next().value,Mt=je.next().value,fn=Ke(ye,"VIDEO-RANGE"),(Pt=Ke(ye,"REQ-VIDEO-LAYOUT"))&&Pt.includes(",")&&(gn=Pt.split(",").filter(function(jt){return jt=="CH-STEREO"||jt=="CH-MONO"}),Pt=gn[0]),Pt=Pt||"CH-MONO",An=K4(e,Se,r),ae.push.apply(ae,L(Y4(e,An.audio,An.video,Re,yt,Mt,be,fn,Pt,c,d)));return cn.return(ae.filter(function(jt){return jt!=null}))}})}function K4(e,t,n){for(var r={audio:[],video:[]},a=new Map,l=[],c=!1,d=!1,p=T(t),x=p.next();!x.done;x=p.next()){var C=x.value;x=Ke(C,"AUDIO");var b=Ke(C,"VIDEO"),k=x||b;k&&(l.includes(k)||l.push(k),(C=Ke(C,"PATHWAY-ID"))&&a.set(k,C),x?c=!0:b&&(d=!0))}l.length&&n.length&&(p=n.filter(function(R){return l.includes(zt(R,"GROUP-ID"))}),X4(e,p,a)),p=(a=l.sort().join(","))&&e.G.has(a)?e.G.get(a):[],c?r.audio.push.apply(r.audio,L(p)):d&&r.video.push.apply(r.video,L(p)),x=!1;var E=t.map(function(R){return zt(R,"URI")});if(d=r.audio.find(function(R){return R&&R.M().find(function(_){return E.includes(_)})}),c=n2(e,t[0]),b=Ti("video",c),(k=Ti("audio",c))&&!b?(d="audio",x=0<r.audio.length):!r.audio.length&&!r.video.length&&k&&b?(d="video",c=[[b,k].join()]):r.audio.length&&d?(d="audio",x=!0):d=r.video.length&&!r.audio.length?"audio":"video",!x){var M=C=k=b=x=null;!p.length&&(n=n.find(function(R){var _=Ke(R,"URI")||"",j=Ke(R,"TYPE");return R=zt(R,"GROUP-ID"),j!="SUBTITLES"&&_==""&&l.includes(R)}))&&(x=Ke(n,"LANGUAGE"),b=Ke(n,"NAME"),k=i2(n),r2(n),C=Ke(n,"CHARACTERISTICS"),M=o2(n)),e=J4(e,t,c,d,x,b,k,C,M),a&&(e.stream.groupId=a),r[e.stream.type]=[e]}return r}function n2(e,t){var n=Ke(t,"CODECS")||"";return t=Ke(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,L(t))),sp(e)}function i2(e){return(e=Ke(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function o2(e){return(e=Ke(e,"SAMPLE-RATE"))?parseInt(e,10):null}function r2(e){return(e=Ke(e,"CHANNELS"))?e.includes("/JOC"):!1}function Y4(e,t,n,r,a,l,c,d,p,x,C){for(var b=T(n),k=b.next();!k.done;k=b.next())x2(k.value.stream,a,l,c,d,p,null);for(a=e.g.disableAudio,(!t.length||a)&&(t=[null]),a=e.g.disableVideo,(!n.length||a)&&(n=[null]),a=[],t=T(t),l=t.next();!l.done;l=t.next())for(l=l.value,c=T(n),d=c.next();!d.done;d=c.next()){var E=d.value;(d=l?l.stream:null)&&(d.drmInfos=x,d.keyIds=C),(p=E?E.stream:null)&&(p.drmInfos=x,p.keyIds=C),p&&!d&&(p.bandwidth=r),!p&&d&&(d.bandwidth=r),b=l?l.stream.drmInfos:null,k=E?E.stream.drmInfos:null,E=E?E.M().sort().join(","):"";var M=l?l.M().sort().join(","):"";E=E+" - "+M,d&&p&&!Sg(b,k)||e.ub.has(E)||(d={id:e.B++,language:d?d.language:"und",disabledUntilTime:0,primary:!!d&&d.primary||!!p&&p.primary,audio:d,video:p,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},a.push(d),e.ub.add(E))}return a}function Q4(e,t){t=qx(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=T(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Ke(r,"LANGUAGE");n=$t(a||"und"),a||(a=Ke(r,"NAME"))&&(n=a),a=zt(r,"GROUP-ID"),r=zt(r,"INSTREAM-ID").replace("SERVICE","svc"),e.C.get(a)||e.C.set(a,new Map),e.C.get(a).set(r,n)}}function s2(e,t,n){for(var r=[],a=[],l=new Map,c=T(t),d=c.next();!d.done;d=c.next()){var p=d.value;d=zt(p,"URI"),p=zt(p,"GROUP-ID"),r.push(d),a.push(p),l.set(p,d)}if(c=a.sort().join(","),d=t[0],t="",p=zt(d,"TYPE").toLowerCase(),p=="subtitles"&&(p=_t),p==_t)t=Ke(d,"CODECS")||"";else{a=T(a);for(var x=a.next();!x.done;x=a.next())if(x=x.value,e.F.has(x)){t=e.F.get(x);break}}if(a=r.sort().join(","),e.i.has(a))return e.i.get(a);if(x=e.B++,e.j){l=T(l);for(var C=l.next();!C.done;C=l.next()){var b=T(C.value);C=b.next().value,b=b.next().value,(C=n.get(C))&&ca(e.j,x,C,b)}}n=Ke(d,"LANGUAGE"),l=Ke(d,"NAME"),C=Ke(d,"DEFAULT")=="YES",b=p=="audio"?i2(d):null;var k=p=="audio"?r2(d):!1,E=Ke(d,"CHARACTERISTICS"),M=Ke(d,"FORCED")=="YES";return d=p=="audio"?o2(d):null,r=Sc(e,x,r,t,p,n,C,l,b,null,E,M,d,k),r.stream&&(r.stream.groupId=c),e.G.has(c)?e.G.get(c).push(r):e.G.set(c,[r]),e.i.set(a,r),r}function Z4(e,t){var n,r,a,l,c,d,p,x,C,b;return G(function(k){return k.g==1?(n=zt(t,"URI"),r=Ke(t,"CODECS","jpeg")||"",e.i.has(n)?k.return(e.i.get(n)):(a=Ke(t,"LANGUAGE"),l=Ke(t,"NAME"),c=Ke(t,"CHARACTERISTICS"),d=Sc(e,e.B++,[n],r,"image",a,!1,l,null,null,c,!1,null,!1),(p=Ke(t,"RESOLUTION"))?A(k,d.stream.createSegmentIndex(),3):k.u(2))):(k.g!=2&&(x=d.stream.segmentIndex.get(0),C=x.tilesLayout)&&(d.stream.width=Number(p.split("x")[0])*Number(C.split("x")[0]),d.stream.height=Number(p.split("x")[1])*Number(C.split("x")[1])),(b=Ke(t,"BANDWIDTH"))&&(d.stream.bandwidth=Number(b)),e.i.set(n,d),k.return(d))})}function J4(e,t,n,r,a,l,c,d,p){for(var x=e.B++,C=[],b=T(t),k=b.next();!k.done;k=b.next()){var E=k.value;k=zt(E,"URI"),E=Ke(E,"PATHWAY-ID"),e.j&&E&&ca(e.j,x,E,k),C.push(k)}if(b=C.sort().join(","),e.i.has(b))return e.i.get(b);e:{if(t=Ke(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.C.get(t);break e}e.R=!1}else if(!t&&e.C.size)for(t=T(e.C.keys()).next();!t.done;){t=e.C.get(t.value);break e}}t=null}return n=Es(r,n),r=Sc(e,x,C,n,r,a,!1,l,c,t,d,!1,p,!1),e.i.set(b,r),r}function Sc(e,t,n,r,a,l,c,d,p,x,C,b,k,E){function M(V){var Z,te,re,de,se,ae,he,Se,ye,be,Re,Ee,je,yt,Mt,fn,Pt,gn,An,cn,jt,wn;return G(function(Bn){switch(Bn.g){case 1:return Z=Ln,te=U.M(),Q(Bn,2),A(Bn,w0(e,U.M(),!0),4);case 4:re=Bn.h,q(Bn,3);break;case 2:if(de=W(Bn),_.closeSegmentIndex(),e.h.disableStream(_))return Bn.return();throw de;case 3:if(V.aborted)return Bn.return();if(se=re.uri,se==re.originalUri||te.includes(se)||j.push(se),ae=f0(e.Fa,re.data),ae.type!=1)throw new ne(2,4,4017);return he=to(ae.g,"EXT-X-DEFINE"),Se=m0(e,he,se),ye=!1,(!e.ea&&e.g.hls.disableCodecGuessing||e.R&&a==Z.ga&&!e.g.hls.disableClosedCaptionsDetection)&&0<ae.segments.length&&(e.R=!1,ye=!0),be=!e.ea&&e.g.hls.disableCodecGuessing,Re=Ri(e),A(Bn,l2(e,0,Se,ae,R,r,a,l,c,d,p,x,C,b,k,E,void 0,ye,be),5);case 5:if(Ee=Bn.h,V.aborted)return Bn.return();if(je=Ee.stream,Ri(e)&&!Re&&p2(e,ae),U.mc=Ee.mc,U.Jb=Ee.Jb,U.Gd=Ee.Gd,U.Fd=Ee.Fd,U.ed=Ee.ed,U.Yd=Ee.Yd,U.ob=Ee.ob,U.pb=Ee.pb,U.vf=!0,_.segmentIndex=je.segmentIndex,_.encrypted=je.encrypted,_.drmInfos=je.drmInfos,_.keyIds=je.keyIds,_.mimeType=je.mimeType,_.bandwidth=_.bandwidth||je.bandwidth,_.codecs=_.codecs||je.codecs,_.closedCaptions=_.closedCaptions||je.closedCaptions,_.width=_.width||je.width,_.height=_.height||je.height,_.hdr=_.hdr||je.hdr,_.colorGamut=_.colorGamut||je.colorGamut,_.language=="und"&&je.language!="und"&&(_.language=je.language),_.language=_.language||je.language,_.channelsCount=_.channelsCount||je.channelsCount,_.audioSamplingRate=_.audioSamplingRate||je.audioSamplingRate,pa(_),_.drmInfos.length&&e.h.newDrmInfo(_),yt=!1,(!x&&_.closedCaptions||x&&_.closedCaptions&&x.size!=_.closedCaptions.size)&&(yt=!0),e.m&&yt&&e.h.makeTextStreamsForClosedCaptions(e.m),a==Z.ga||a==Z.X)for(Mt=T(e.i.values()),fn=Mt.next();!fn.done;fn=Mt.next())Pt=fn.value,Pt.vf||Pt.type!=a||(Pt.stream.mimeType=je.mimeType,pa(Pt.stream));a==Z.ua&&(gn=je.segmentIndex.get(0))&&gn.$&&(_.mimeType="application/mp4",pa(_)),An=Af(_),_.segmentIndex.Hb(function(jn){jn.$&&(jn.$.Hc=An)}),e3(e)&&(e.Gb?g0(e,[U]):(e.Gb=!0,cn=Array.from(e.i.values()),jt=cn.filter(function(jn){return jn.stream.segmentIndex}),g0(e,jt),p0(e),wn=e.o,0<wn&&e.A.Y(wn))),v0(e,ae.g,_.type,Se,R),Y(Bn)}})}function R(){return e.j&&1<n.length?Fu(e.j,t):j.concat(Kx([e.L],n,e.s))}var _=c2(e,r,a,l,c,d,p,x,C,b,k,E),j=[],U={stream:_,type:a,Tg:j,M:R,mc:0,Jb:0,Yd:new Map,Gd:!1,Fd:!1,ed:!1,Re:-1,ob:-1,pb:-1,vf:!1},K=null,O=new AbortController;return _.createSegmentIndex=function(){return K||(O=new AbortController,K=new Promise(function(V){V(M(O.signal))}))},_.closeSegmentIndex=function(){K&&!_.segmentIndex&&O.abort(),_.segmentIndex&&(_.segmentIndex.release(),_.segmentIndex=null),K=null},U}function a2(e){var t=1/0;e=T(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Jb));return t}function u2(e,t){var n=[];t=T(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.Hb(function(a){n.push(a)});e.l.sd(n)}function g0(e,t){if(!Ri(e))for(var n=a2(e),r=T(t),a=r.next();!a.done;a=r.next())a.value.stream.segmentIndex.Bc(0,n);u2(e,t.map(function(l){return l.stream})),e.g.hls.ignoreManifestProgramDateTime?e2(e,t):(B4(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&e2(e,t))}function Xu(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function e3(e){if(!e.m)return!1;var t=[],n=[];e=T(e.m.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(a){return a.segmentIndex})||0<n.length&&!n.some(function(a){return a.segmentIndex}))}function l2(e,t,n,r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U){j=j===void 0?!0:j,U=U===void 0?!0:U;var K,O,V,Z,te,re,de,se,ae,he,Se,ye,be,Re,Ee,je,yt,Mt,fn,Pt,gn,An,cn,jt,wn,Bn;return G(function(jn){switch(jn.g){case 1:var Pi=ii(r.g,"EXT-X-PLAYLIST-TYPE"),Oi=ii(r.g,"EXT-X-ENDLIST");if(Oi=Pi&&Pi.value=="VOD"||Oi,Pi=Pi&&Pi.value=="EVENT"&&!Oi,Pi=!Oi&&!Pi,Oi?Tc(e,Ec):Pi?Tc(e,kc):Tc(e,b2),Ri(e)&&y0(e,r),K=Ri(e)?e.N.get(c):new Map,O=y2(e,r,K,n,a,c),V=O.segments,Z=O.bandwidth,se=de=re=te=null,!(0<V.length&&j)){jn.u(2);break}return A(jn,F4(e,V),3);case 3:ae=jn.h,c=ae.type,d=ae.language,C=ae.channelCount,M=ae.sampleRate,e.g.disableText||(b=ae.closedCaptions),re=ae.height,te=ae.width,de=ae.xd,se=ae.colorGamut,U&&(_=ae.mimeType,l=ae.codecs);case 2:if(_){jn.u(4);break}return A(jn,i3(e,c,l,V),5);case 5:_=jn.h;case 4:return A(jn,h2(e,r,_,a,n),6);case 6:if(he=jn.h,Se=he.drmInfos,ye=he.keyIds,be=he.encrypted,Re=he.wh,be&&!Se.length&&!Re)throw new ne(2,4,4026);return Ee=c2(e,l,c,d,p,x,C,b,k,E,M,R),Ee.encrypted=be,Ee.drmInfos=Se,Ee.keyIds=ye,Ee.mimeType=_,Z&&(Ee.bandwidth=Z),pa(Ee),c=="video"&&(te||re||de||se)&&x2(Ee,te,re,null,de,null,se),Ri(e)&&y0(e,r),je=V[0].startTime,yt=V[V.length-1],Mt=yt.endTime,fn=new Dt(V),Ee.segmentIndex=fn,gn=(Pt=ii(r.g,"EXT-X-SERVER-CONTROL"))?Wu(Pt,"CAN-SKIP-UNTIL")!=null:!1,An=Pt?Wu(Pt,"CAN-BLOCK-RELOAD")!=null:!1,cn=da(r.g,"EXT-X-MEDIA-SEQUENCE",0),jt=f2(cn,V),wn=jt.ob,Bn=jt.pb,jn.return({stream:Ee,type:c,Tg:[],M:a,mc:je,Jb:Mt,Gd:gn,Fd:An,ed:!1,Re:-1,ob:wn,pb:Bn,Yd:K,vf:!1})}})}function f2(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{ob:e,pb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{ob:e,pb:n}):(e++,t.m&&(n=0),{ob:e,pb:n})}function c2(e,t,n,r,a,l,c,d,p,x,C,b){var k=x0(n,t)||Cc(n),E=[];if(p){p=T(p.split(","));for(var M=p.next();!M.done;M=p.next())E.push(M.value)}return p=void 0,M=null,n==_t?p=E.includes("public.accessibility.transcribes-spoken-dialog")&&E.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":E.includes("public.accessibility.describes-video")&&(M="visually impaired"),E.length||p!=="subtitle"||E.push("subtitle"),e={id:e.B++,originalId:l,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:k,codecs:t,kind:n==_t?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:$t(r||"und"),originalLanguage:r,label:l,type:n,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:E,forced:x,channelsCount:c,audioSamplingRate:C,spatialAudio:b,closedCaptions:d,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:M,external:!1,fastSwitching:!1,fullMimeTypes:new Set},pa(e),e}function h2(e,t,n,r,a){var l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye,be,Re;return G(function(Ee){switch(Ee.g){case 1:if(l=new Map,t.segments){for(c=T(t.segments),d=c.next();!d.done;d=c.next())if(p=d.value,x=to(p.g,"EXT-X-KEY"),C=null,x.length)for(C=m2(e,t,p.g,r,a),b=T(x),k=b.next();!k.done;k=b.next())E=k.value,l.set(E,C)}R=M=!1,_=[],j=new Set,U=T(l),K=U.next();case 2:if(K.done){Ee.u(4);break}if(O=K.value,V=T(O),Z=V.next().value,te=V.next().value,re=Z,de=te,se=zt(re,"METHOD"),se=="NONE"){Ee.u(3);break}if(M=!0,ae=Ke(re,"KEYFORMAT")||"identity",he=null,bc(se)){R=!0,Ee.u(3);break}if(ae!="identity"){he=(Se=T2[ae])?Se(re,n):null,Ee.u(6);break}return A(Ee,S2(e,re,n,r,de,a),8);case 8:he=Ee.h;case 6:if(he){if(he.keyIds)for(ye=T(he.keyIds),be=ye.next();!be.done;be=ye.next())Re=be.value,j.add(Re);_.push(he)}case 3:K=U.next(),Ee.u(2);break;case 4:return Ee.return({drmInfos:_,keyIds:j,encrypted:M,wh:R})}})}function d2(e,t,n,r,a){if(!h.crypto||!h.crypto.subtle)throw He("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new ne(2,4,4042);var l=0,c=Ke(t,"IV","");if(c){var d=Wr(c.substr(2));if(d.byteLength!=16)throw new ne(2,4,4048)}else l=da(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+l,!e.oa.has(n)){var p={bitsKey:128,blockCipherMode:"CBC",iv:d,firstMediaSequenceNumber:l};switch(zt(t,"METHOD")){case"AES-256":p.bitsKey=256;break;case"AES-256-CTR":p.bitsKey=256,p.blockCipherMode="CTR"}p.fetchKey=function(){var x,C,b,k,E,M;return G(function(R){if(R.g==1)return x=Mr(r(),zt(t,"URI"),a),C=x.sort().join(""),e.K.has(C)||(b=Hn(x,e.g.retryParameters),k=cr(e,b,6),e.K.set(C,k)),A(R,e.K.get(C),2);if(R.g!=3){if(E=R.h,!E.data||E.data.byteLength!=p.bitsKey/8)throw new ne(2,4,4049);return M={name:p.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:p.bitsKey},A(R,h.crypto.subtle.importKey("raw",E.data,M,!0,["decrypt"]),3)}p.cryptoKey=R.h,p.fetchKey=void 0,Y(R)})},e.oa.set(n,p)}return e.oa.get(n)}function y0(e,t){var n=1/0,r=t.segments;if(r.length)for(var a=r.length-1;0<=a;){var l=ii(r[a].g,"EXTINF");if(l){n=Number(l.value.split(",")[0]);break}a--}if(r=ii(t.g,"EXT-X-TARGETDURATION"),!r)throw new ne(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(a=ii(t.g,"EXT-X-PART-INF"))&&(e.U=Number(zt(a,"PART-TARGET"))),t=ii(t.g,"EXT-X-SERVER-CONTROL"),e.I&&e.U?(e.o=e.Fb?5*e.U<=n?Math.min(e.U,e.o):Math.min(n,e.o):Math.min(e.U,e.o),e.Da=t?Number(zt(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?Wu(t,"HOLD-BACK"):null,e.za=n?Number(n.value):0),e.ab=Math.max(r,e.ab)}function p2(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Da)t=e.Da;else if(e.za)t=e.za;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ab*n}e.l.dh(0),e.l.Of(t),e.l.sc(!1)}function m2(e,t,n,r,a){var l=ii(n,"EXT-X-MAP");if(!l)return null;var c=zt(l,"URI"),d=Mr(r(),c,a);if(c=[d.toString(),Ke(l,"BYTERANGE","")].join("-"),!e.qa.has(c)){var p=void 0,x=null;n=T(n);for(var C=n.next();!C.done;C=n.next())C=C.value,C.name=="EXT-X-KEY"?bc(zt(C,"METHOD"))&&C.id<l.id&&(p=d2(e,C,t,r,a)):C.name=="EXT-X-BYTERANGE"&&C.id<l.id&&(x=C);t=t3(d,l,x,p),e.qa.set(c,t)}return e.qa.get(c)}function t3(e,t,n,r){var a=0,l=null;return t=Ke(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),l=Number(a[0]),a=Number(a[1]),l=a+l-1,r&&(n=l+1-a,n%16&&(l+=16-n%16))),new Ei(function(){return e},a,l,null,null,null,r)}function n3(e,t,n,r,a,l,c,d,p){function x(je){je=new Tn(je).Pa.split(".").pop();var yt=C0[c][je];return yt||(yt=S0[je]),yt}var C=r.g,b=ii(C,"EXTINF"),k=0,E=0,M=null;r.zb.length&&(e.m.isLowLatency=!0);var R=null;if(!e.g.hls.ignoreManifestProgramDateTime){var _=ii(C,"EXT-X-PROGRAM-DATE-TIME");_&&_.value&&(R=Cr(_.value))}var j=Tr;if(ii(C,"EXT-X-GAP")&&(e.m.gapCount++,j=2),!b){if(r.zb.length==0)throw new ne(2,4,4024,"EXTINF");if(!e.I)return null}var U=[];_=!1;var K=null,O=!1,V=!1;if(e.I&&r.zb.length){k=t&&h.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var Z=R,te={},re=0;re<r.zb.length;te={xe:void 0,ge:void 0},re++){var de=r.zb[re],se=re==0?n:U[U.length-1],ae=re==0?a:se.endTime,he=Number(Ke(de,"DURATION"))||e.U;if(he){var Se=ae+he,ye=0,be=null;if(de.name=="EXT-X-PRELOAD-HINT"?(ye=(ye=Ke(de,"BYTERANGE-START"))?Number(ye):0,(se=Ke(de,"BYTERANGE-LENGTH"))?be=ye+Number(se)-1:ye&&(be=Number.MAX_SAFE_INTEGER)):(ye=Ke(de,"BYTERANGE"),be=T(g2(se,ye)),ye=be.next().value,be=be.next().value),te.ge=Ke(de,"URI"),te.ge){se=Tr,Ke(de,"GAP")=="YES"&&(e.m.gapCount++,se=2,O=!0),te.xe=null;var Re=function(je){return function(){return je.xe==null&&(je.xe=Mr(d(),je.ge,l)),je.xe}}(te);k&&0<=ye&&be!=null&&(K=Re,_=!0),ae=new ut(ae,Se,Re,ye,be,t,0,0,1/0,[],"",null,Z,se,p),de.name=="EXT-X-PRELOAD-HINT"&&(ae.wf(),V=!0),Ke(de,"INDEPENDENT")!="YES"&&0<re&&ae.Xd(),(te=x(te.ge))&&(ae.mimeType=te,C2.has(te)&&(ae.$=null)),U.push(ae),Z&&(Z+=he)}}}}if(b){if(b=Number(b.value.split(",")[0]),b==0)return null;k=a+b}else if(U.length)k=U[U.length-1].endTime;else return null;_&&(O||U[0].Ha!=0?(_=!1,K=null):U=[]),(b=ii(C,"EXT-X-BYTERANGE"))?(M=T(g2(n,b.value)),E=M.next().value,M=M.next().value):U.length&&(E=U[0].Ha,M=U[U.length-1].sa),n="",b=null,c=="image"&&(n="1x1",C=ii(C,"EXT-X-TILES"))&&(n=zt(C,"LAYOUT"),(C=Ke(C,"DURATION"))&&(b=Number(C)));var Ee=null;return t=new ut(a,k,function(){return K?K():(Ee==null&&(Ee=Mr(d(),r.h,l)),Ee||[])},E,M,t,0,0,1/0,U,n,b,R,j,p,0<U.length&&!!r.h),(a=x(r.h))&&(t.mimeType=a,C2.has(a)&&(t.$=null)),_&&(e.Fb=!0,t.Ig(),V&&t.wf()),t}function g2(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.sa+1,r=n+t-1),[n,r]}function v0(e,t,n,r,a){if(n=="video"||n=="audio"){var l=e.l.m;if(l&&!Xu(e,n))for(t=to(t,"EXT-X-DATERANGE"),t=t.sort(function(R,_){return R=zt(R,"START-DATE"),_=zt(_,"START-DATE"),R<_?-1:R>_?1:0}),n=0;n<t.length;n++){var c=t[n],d=zt(c,"ID");if(!e.Ea.has(d)){var p=zt(c,"START-DATE"),x=Cr(p);if(!isNaN(x)){p=Math.max(0,x-l);var C=null,b=Ke(c,"END-DATE");if(b&&(b=Cr(b),!isNaN(b)&&(C=b-l,0>C))||C==null&&(b=Ke(c,"DURATION")||Ke(c,"PLANNED-DURATION"))&&(b=parseFloat(b),isNaN(b)||(C=p+b),0>x-l+b))continue;b=Ke(c,"CLASS")||"com.apple.quicktime.HLS";var k=Ke(c,"END-ON-NEXT")=="YES";if(C==null&&k){for(k=n+1;k<t.length;k++){var E=Ke(t[k],"CLASS")||"com.apple.quicktime.HLS";if(b==E&&(E=zt(t[k],"START-DATE"),E=Cr(E),!isNaN(E)&&E&&E>x)){C=Math.max(0,E-l);break}}if(C==null)continue}for(x="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),k=[],c=T(c.attributes),E=c.next();!E.done;E=c.next())if(E=E.value,!x.includes(E.name)){var M=Yx(E.value,r);(E.name=="X-ASSET-URI"||E.name=="X-ASSET-LIST")&&(M=Mr(a(),E.value,r)[0]),k.push({key:E.name,description:"",data:M,mimeType:null,pictureType:null})}k.length&&e.h.onMetadata(b,p,C,k),e.Ea.add(d)}}}}}function y2(e,t,n,r,a,l){var c=t.segments,d=void 0,p=da(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),x=da(t.g,"EXT-X-MEDIA-SEQUENCE",0),C=ii(t.g,"EXT-X-SKIP"),b=C?Number(Ke(C,"SKIPPED-SEGMENTS")):0,k=x+b,E=0;Ri(e)&&n.has(k)&&(E=n.get(k)),E===0&&e.xa==kc&&0<n.size&&!n.has(k)&&(E=e.l.mb());var M=[],R=null;C=[];for(var _=0;_<c.length;_++){var j=c[_],U=_==0?E:R.endTime;k=x+b+_,ii(j.g,"EXT-X-DISCONTINUITY")&&p++;for(var K=T(j.g),O=K.next();!O.done;O=K.next())O=O.value,O.name=="EXT-X-KEY"&&(bc(zt(O,"METHOD"))?d=d2(e,O,t,a,r):d=void 0);n.set(k,U),K=m2(e,t,j.g,a,r),!e.I&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.I=e.h.isLowLatencyMode()),(U=n3(e,K,R,j,U,r,l,a,d))&&((R=da(j.g,"EXT-X-BITRATE"))?C.push({bitrate:R,duration:U.endTime-U.startTime}):C.length&&(R=C.pop(),R.duration+=U.endTime-U.startTime,C.push(R)),R=U,U.i=p,Xu(e,l)&&e.H!=null&&k<e.H||M.push(U))}if(t=void 0,C.length&&(t=C.reduce(function(V,Z){return V+Z.duration},0),t=Math.round(C.reduce(function(V,Z){return V+Z.bitrate*Z.duration},0)/t*1e3)),C=M.some(function(V){return V.h!=null})){for(n={},r=0;r<M.length;n={Kd:void 0,Jd:void 0,Bd:void 0,pc:void 0,zd:void 0},r++)if(n.pc=M[r],n.pc.h==null)for(n.Jd=0,n.Kd=r,a=function(V){return function(){var Z=M[V.Kd];if(Z){if(Z.h!=null)return Z.h+V.Jd;V.Jd-=Z.endTime-Z.startTime,V.Kd+=1}return null}}(n),n.zd=0,n.Bd=r,c=function(V){return function(){var Z=M[V.Bd];if(Z){if(Z!=V.pc&&(V.zd+=Z.endTime-Z.startTime),Z.h!=null)return Z.h+V.zd;--V.Bd}return null}}(n);n.pc.h==null;)n.pc.h=c(),n.pc.h==null&&(n.pc.h=a())}if(C)for(n=T(M),r=n.next();!r.done;r=n.next())for(a=r.value,r=a.h,a=T(a.g),c=a.next();!c.done;c=a.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.fa,C&&n!=1/0&&!Xu(e,l))for(e=T(M),l=e.next();!l.done;l=e.next())l.value.Vf(n);return{segments:M,bandwidth:t}}function x0(e,t){if(e==_t){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Cc(e){return e==_t?"text/vtt":C0[e].mp4}function v2(e,t){e=Ri(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Yb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function i3(e,t,n,r){var a,l,c,d,p,x,C,b,k,E,M,R,_,j;return G(function(U){switch(U.g){case 1:return a=Mo,l=v2(e,r),c=l.segment,c.status==2?U.return(Cc(t)):(d=c.M(),p=new Tn(d[0]),x=p.Pa.split(".").pop(),C=C0[t],(b=C[x])||(b=S0[x])||(b=x0(t,n))?U.return(b):(E=1,M=Hn(d,e.g.retryParameters),Q(U,2),M.method="HEAD",A(U,cr(e,M,a,{type:E}),4)));case 4:R=U.h,k=R.headers["content-type"],q(U,3);break;case 2:if(_=W(U),!_||_.code!=1002&&_.code!=1001){U.u(3);break}return M.method="GET",A(U,cr(e,M,a,{type:E}),6);case 6:j=U.h,k=j.headers["content-type"];case 3:return k?U.return(k.toLowerCase().split(";")[0]):U.return(Cc(t))}})}function x2(e,t,n,r,a,l,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=a||void 0,e.videoLayout=l||void 0,e.colorGamut=c||void 0)}function w0(e,t,n){return cr(e,Hn(t,e.g.retryParameters),0,{type:n?2:3})}function w2(e){var t,n,r,a,l,c;return G(function(d){switch(d.g){case 1:return e.h?(Q(d,2),t=Date.now(),A(d,e.update(),4)):d.return();case 4:n=Date.now(),Ri(e)&&(r=(n-t)/1e3,e.Db.sample(1,r),a=e.o,l=Math.max(0,a-St(e.Db)),e.A.Y(l)),q(d,3);break;case 2:if(c=W(d),!e.h)return d.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(c),d.return();c.severity=1,e.h.onError(c),e.A.Y(.1);case 3:if(!e.h)return d.return();e.h.onManifestUpdated(),Y(d)}})}function Ri(e){return e.xa!=Ec}function Tc(e,t){e.xa=t,e.l&&e.l.sc(!Ri(e)),Ri(e)||e.A.stop()}function cr(e,t,n,r){if(!e.da)throw new ne(2,7,7001);return t=e.h.networkingEngine.request(n,t,r),Zr(e.da,t),t.promise}function bc(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function S2(e,t,n,r,a,l){var c,d,p,x,C,b,k,E,M,R,_,j,U,K,O;return G(function(V){switch(V.g){case 1:if(n=="video/mp2t")throw new ne(2,4,4040);if(Yl())throw new ne(2,4,4041);if(c=zt(t,"METHOD"),d=["SAMPLE-AES","SAMPLE-AES-CTR"],!d.includes(c))return V.return(null);if(p=Mr(r(),zt(t,"URI"),l),p[0].startsWith("data:text/plain;base64,")){x=qo(Yi(p[0].split("data:text/plain;base64,").pop())),V.u(2);break}return C=p.sort().join(""),e.pa.has(C)||(b=Hn(p,e.g.retryParameters),k=cr(e,b,6),e.pa.set(C,k)),A(V,e.pa.get(C),3);case 3:E=V.h,x=qo(E.data);case 2:if(M="00000000000000000000000000000000",!a){V.u(4);break}if(e.ya.has(a)){R=e.ya.get(a),V.u(5);break}return _=Gs(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),j=Mo,A(V,cr(e,_,j,{type:0}),6);case 6:U=V.h,R=BE(U.data),e.ya.set(a,R);case 5:R&&(M=R);case 4:return K=new Map,K.set(M,x),O="cenc",c=="SAMPLE-AES"&&(O="cbcs"),V.return(Ag(K,O))}})}me("shaka.hls.HlsParser",wc);var S0={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},C0={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},C2=new Set(["video/mp2t"].concat(L(wr))),T2={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new ne(2,4,4040);if(Yl())throw new ne(2,4,4041);if(t=zt(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),Xr("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],zt(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=zt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=zt(e,"URI"),t=h0(t.split("?")[0]),t=Me(t.data),n=Xr("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=Ke(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=zt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=zt(e,"URI"),e=h0(e.split("?")[0]),e=Me(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=lf(e,t,new Set,0),Xr("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Ec="VOD",b2="EVENT",kc="LIVE",o3={sh:Ec,qj:b2,yj:kc};vo["application/x-mpegurl"]=function(){return new wc},vo["application/vnd.apple.mpegurl"]=function(){return new wc};function r3(e){var t=0,n=Qt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var l=Me(n,e,a);t.push({type:r,value:l}),e+=a}n=t}return n}function Ac(e){if(e=E2(e))e:{e=T(go(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=yo(t.value,"LA_URL")){e=On(t);break e}e=""}else e="";return e}function E2(e){return e=Yi(On(e)),e=r3(e).filter(function(t){return t.type===s3})[0],e?(e=Wo(e.value,!0),(e=Bs(e,"WRMHEADER"))?e:null):null}var s3=1,a3=new Map().set("com.microsoft.playready",Ac).set("com.microsoft.playready.recommendation",Ac).set("com.microsoft.playready.software",Ac).set("com.microsoft.playready.hardware",Ac);function ma(e){if(!M2){M2=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);Ic=It("ftyp",t,r,t,n),t=It("dref",v3),T0=It("dinf",t)}this.g=e}function ga(e){for(var t=[],n=T(e.g),r=n.next();!r.done;r=n.next()){var a=t,l=a.push,c=r.value;r=It;var d=c.id+1,p=c.stream.width||0,x=c.stream.height||0;c.type=="audio"&&(x=p=0);var C=c.duration*c.timescale,b=Math.floor(C/(_r+1));switch(C=Math.floor(C%(_r+1)),d=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(an(d,4)),[0,0,0,0],L(an(b,4)),L(an(C,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],L(an(p,2)),[0,0],L(an(x,2)),[0,0])),d=It("tkhd",d),p=It,b=c.duration*c.timescale,x=Math.floor(b/(_r+1)),b=Math.floor(b%(_r+1)),C=c.stream.language,C=C.charCodeAt(0)-96<<10|C.charCodeAt(1)-96<<5|C.charCodeAt(2)-96,x=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(an(c.timescale,4)),L(an(x,4)),L(an(b,4)),L(an(C,2)),[0,0])),x=It("mdhd",x),b=c,C=new Uint8Array([]),b.type){case"video":C=l3;break;case"audio":C=f3}b=It("hdlr",C);e:{switch(c.type){case"video":c=It("minf",It("vmhd",m3),T0,k2(c));break e;case"audio":c=It("minf",It("smhd",g3),T0,k2(c));break e}c=new Uint8Array([])}c=p("mdia",x,b,c),r=r("trak",d,c),l.call(a,r)}for(t=vn.apply(si,L(t)),l=e.g[0],n=It,r=l.duration*l.timescale,a=Math.floor(r/(_r+1)),r=Math.floor(r%(_r+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(an(l.timescale,4)),L(an(a,4)),L(an(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),a=It("mvhd",a),r=[],e=T(e.g),p=e.next();!p.done;p=e.next())c=r,d=c.push,p=new Uint8Array([0,0,0,0].concat(L(an(p.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),p=It("trex",p),d.call(c,p);if(e=vn.apply(si,L(r)),e=It("mvex",e),r=[],l.encrypted){for(l=T(l.stream.drmInfos),c=l.next();!c.done;c=l.next())if(c=c.value,c.initData)for(c=T(c.initData),d=c.next();!d.done;d=c.next())r.push(d.value.initData);l=vn.apply(si,L(r))}else l=new Uint8Array([]);return e=n("moov",a,t,e,l),t=new Uint8Array(Ic.byteLength+e.byteLength),t.set(Ic),t.set(e,Ic.byteLength),t}function k2(e){var t=It,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.wa.byteLength)var a=It("avcC",e.wa);else{a=It;for(var l=7,c=[],d=[],p=0,x=0,C=0,b=0;b<e.$a.length;b++){var k=I2(e.$a[b]);switch(k[0]&31){case 7:c.push(k),l+=k.length+2;break;case 8:d.push(k),l+=k.length+2}}for(0<c.length&&(p=c[0][1],C=c[0][2],x=c[0][3]),l=new Uint8Array(l),b=0,l[b++]=1,l[b++]=p,l[b++]=C,l[b++]=x,l[b++]=255,l[b++]=224|c.length,p=0;p<c.length;p++)l[b++]=(c[p].length&65280)>>8,l[b++]=c[p].length&255,l.set(c[p],b),b+=c[p].length;for(l[b++]=d.length,c=0;c<d.length;c++)l[b++]=(d[c].length&65280)>>8,l[b++]=d[c].length&255,l.set(d[c],b),b+=d[c].length;a=a("avcC",l)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(L(an(n,2)),L(an(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",d=A2(e),c=new Uint8Array([]),e.encrypted&&(c=ya(e),r="encv"),n=It(r,n,a,d,c)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,a=e.stream.height||0,n=new Uint8Array([]),0<e.wa.byteLength&&(n=It("hvcC",e.wa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(L(an(r,2)),L(an(a,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),a="hvc1",d=A2(e),c=new Uint8Array([]),e.encrypted&&(c=ya(e),a="encv"),n=It(a,r,n,d,c));break;case"audio":e.codecs.includes("mp3")?e=It(".mp3",qu(e)):e.codecs.includes("ac-3")?(n=It("dac3",e.ma),r="ac-3",a=new Uint8Array([]),e.encrypted&&(a=ya(e),r="enca"),e=It(r,qu(e),n,a)):e.codecs.includes("ec-3")?(n=It("dec3",e.ma),r="ec-3",a=new Uint8Array([]),e.encrypted&&(a=ya(e),r="enca"),e=It(r,qu(e),n,a)):e.codecs.includes("opus")?(n=It("dOps",e.ma),r="Opus",a=new Uint8Array([]),e.encrypted&&(a=ya(e),r="enca"),e=It(r,qu(e),n,a)):(0<e.ma.byteLength?n=It("esds",e.ma):(n=It,r=e.id+1,a=e.stream.channelsCount||2,c=e.stream.audioSamplingRate||44100,p=Es("audio",e.codecs.split(",")),x={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},d=x[c],(p==="mp4a.40.5"||p==="mp4a.40.29")&&(d=x[2*c]),c=parseInt(p.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(L(an(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,c<<3|d>>>1,d<<7|a<<3,6,1,2])),n=n("esds",r)),r="mp4a",a=new Uint8Array([]),e.encrypted&&(a=ya(e),r="enca"),e=It(r,qu(e),n,a)),n=e}return e=It("stsd",y3,n),t("stbl",e,It("stts",c3),It("stsc",h3),It("stsz",p3),It("stco",d3))}function A2(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(L(an(e.Ba,4)),L(an(t,4)))),It("pasp",e)}function qu(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(L(an(e.stream.audioSamplingRate||44100,2)),[0,0]))}function ya(e){for(var t=It,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,a=0;a<n.length;a+=1)r|=n.charCodeAt(a)<<8*(n.length-a-1);n=new Uint8Array([].concat(L(an(r,4)))),n=It("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=It("schm",r),a=It;var l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=T(e.stream.drmInfos);for(var c=e.next();!c.done;c=e.next())if((c=c.value)&&c.keyIds&&c.keyIds.size){c=T(c.keyIds);for(var d=c.next();!d.done;d=c.next())l=I2(d.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),l=It("tenc",e,l),t("sinf",n,r,a("schi",l))}function Ku(e){var t=[];e=T(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,a=r.apply,l=It,c=new Uint8Array([0,0,0,0].concat(L(an(n.data?n.data.rb:0,4))));c=It("mfhd",c);var d,p=n.data?n.data.Ya:[],x=new Uint8Array(4+p.length);for(d=0;d<p.length;d++){var C=p[d].flags;x[d+4]=C.Va<<4|C.Xa<<2|C.Wa}p=It("sdtp",x);var b=p.length+92;x=It,d=new Uint8Array([0,0,0,58].concat(L(an(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),d=It("tfhd",d),C=n.data?n.data.baseMediaDecodeTime:0;var k=Math.floor(C%(_r+1));C=new Uint8Array([1,0,0,0].concat(L(an(Math.floor(C/(_r+1)),4)),L(an(k,4)))),C=It("tfdt",C);var E=b;b=n.data?n.data.Ya:[],k=b.length;var M=12+16*k,R=new Uint8Array(M);for(E+=8+M,R.set([n.type==="video"?1:0,0,15,1].concat(L(an(k,4)),L(an(E,4))),0),E=0;E<k;E++){var _=b[E];M=an(_.duration,4);var j=an(_.size,4),U=_.flags;_=an(_.cb,4),R.set([].concat(L(M),L(j),[U.gb<<2|U.Va,U.Xa<<6|U.Wa<<4|U.hb,U.Ua&61440,U.Ua&15],L(_)),12+16*E)}b=It("trun",R),p=x("traf",d,C,b,p),l=l("moof",c,p),a.call(r,t,[l,u3(n)])}return vn.apply(si,L(t))}function u3(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=vn.apply(si,L(e)),It("mdat",e)}function an(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function I2(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function It(e){var t=Ie.apply(1,arguments),n=_2[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],_2[e]=n);for(var r=8,a=t.length-1;0<=a;a--)r+=t[a].byteLength;for(a=new Uint8Array(r),a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=r&255,a.set(n,4),n=0,r=8;n<t.length;n++)a.set(t[n],r),r+=t[n].byteLength;return a}var M2=!1,_r=Math.pow(2,32)-1,_2={},l3=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),f3=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),c3=new Uint8Array([0,0,0,0,0,0,0,0]),h3=new Uint8Array([0,0,0,0,0,0,0,0]),d3=new Uint8Array([0,0,0,0,0,0,0,0]),p3=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),m3=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),g3=new Uint8Array([0,0,0,0,0,0,0,0]),y3=new Uint8Array([0,0,0,0,0,0,0,1]),Ic=new Uint8Array([]),v3=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),T0=new Uint8Array([]);function b0(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new rt(5),this.o=new Et(function(){x3(e)}),this.A=new Ps,this.m=new Map}s=b0.prototype,s.configure=function(e){this.g=e},s.start=function(e,t){var n=this;return G(function(r){if(r.g==1)return n.l=[e],n.h=t,A(r,E0(n),2);if(!n.h)throw new ne(2,7,7001);return r.return(n.j)})};function x3(e){var t;G(function(n){switch(n.g){case 1:return Q(n,2),A(n,E0(e),4);case 4:q(n,3);break;case 2:t=W(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();Y(n)}})}s.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},s.update=function(){var e=this,t;return G(function(n){if(n.g==1)return Q(n,2),A(n,E0(e),4);if(n.g!=2)return q(n,0);if(t=W(n),!e.h||!t)return n.return();e.h.onError(t),Y(n)})},s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(){},s.banLocation=function(){},s.setMediaElement=function(){};function E0(e){var t,n,r,a,l,c,d;return G(function(p){if(p.g==1)return t=Hn(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),a=n.request(0,t,{type:5}),Zr(e.A,a),A(p,a.promise,2);if(l=p.h,!e.h)return p.return();l.uri&&!e.l.includes(l.uri)&&e.l.unshift(l.uri);var x=l.uri,C=l.data,b=e.g.mss.manifestPreprocessor;if(b!=Pf){if(Tt("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),C=Rx(C,"SmoothStreamingMedia"),!C)throw new ne(2,4,4046,x);b(C),C=Ao(C.outerHTML)}var k=Rd(C,"SmoothStreamingMedia");if(!k)throw new ne(2,4,4046,x);if(x=e.g.mss.manifestPreprocessorTXml,x!=Of&&x(k),e.i||(e.i=new at(null,0)),x=Rt(k,"IsLive",Dd,!1))throw new ne(2,4,4047);e.i.sc(!x),b=Rt(k,"TimeScale",ai,1e7),C=Rt(k,"DVRWindowLength",ai),x&&(C===0||isNaN(C))&&(C=1/0);var E=Rt(k,"CanSeek",Dd,!1);C===0&&E&&(C=1/0),E=null,C&&0<C&&(E=C/b),x&&!isNaN(e.g.availabilityWindowOverride)&&(E=e.g.availabilityWindowOverride),E==null&&(E=1/0),e.i.pe(E),C=Rt(k,"Duration",ai,1/0),x||e.i.Za(C/b),x={variants:[],textStreams:[],timescale:b,duration:C/b};var M;for(E=Jt(k,"Protection"),b=e.g.mss.keySystemsBySystemId,C=[],E=T(E),M=E.next();!M.done;M=E.next())C=C.concat(Jt(M.value,"ProtectionHeader"));if(C.length){for(E=[],M=0;M<C.length;M++){var R=C[M],_=R.attributes.SystemID.toLowerCase(),j=b[_];if(j){var U=E2(R);if(U)e:{U=T(go(U,"DATA"));for(var K=U.next();!K.done;K=U.next())if(K=yo(K.value,"KID")){U=Yi(On(K)),U=new Uint8Array([U[3],U[2],U[1],U[0],U[5],U[4],U[7],U[6]].concat(L(U.slice(8)))),U=qo(U);break e}U=null}else U=null;K=Yi(On(R)),_=Wr(_.replace(/-/g,"")),_=[{initData:lf(K,_,new Set,0),initDataType:"cenc",keyId:U}],_=Xr(j,"cenc",_),U&&_.keyIds.add(U),(j=a3.get(j))&&(_.licenseServerUri=j(R)),E.push(_)}}b=E}else b=[];for(M=b,E=[],b=[],C=[],k=Jt(k,"StreamIndex"),k=T(k),R=k.next();!R.done;R=k.next()){R=R.value,j=Jt(R,"QualityLevel"),_=x.timescale,U=x.duration,K=Jt(R,"c");for(var O=[],V=0,Z=0;Z<K.length;++Z){var te=K[Z],re=K[Z+1],de=Rt(te,"t",ai),se=Rt(te,"d",ai);if(te=Rt(te,"r",hf),!se)break;if(de=de??V,te=te||0,0>te)if(re){if(re=Rt(re,"t",ai),re==null)break;if(de>=re)break;te=Math.ceil((re-de)/se)-1}else{if(U==1/0)break;if(de/_>=U)break;te=Math.ceil((U*_-de)/se)-1}for(re=0;re<=te;++re)V=de+se,O.push({start:de/_,end:V/_,$f:de}),de=V}for(_=O,j=T(j),U=j.next();!U.done;U=j.next())(U=w3(e,R,U.value,_,M,x))&&(U.type!="audio"||e.g.disableAudio?U.type!="video"||e.g.disableVideo?U.type!=_t||e.g.disableText||C.push(U):b.push(U):E.push(U))}for(k=[],E=T(0<E.length?E:[null]),M=E.next();!M.done;M=E.next())for(M=M.value,R=T(0<b.length?b:[null]),O=R.next();!O.done;O=R.next())j=k,_=j.push,U=e,K=M,O=O.value,Z=0,K&&K.bandwidth&&0<K.bandwidth&&(Z+=K.bandwidth),O&&O.bandwidth&&0<O.bandwidth&&(Z+=O.bandwidth),U={id:U.s++,language:K?K.language:"und",disabledUntilTime:0,primary:!!K&&K.primary||!!O&&O.primary,audio:K,video:O,bandwidth:Z,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},_.call(j,U);x.variants=k,x.textStreams=C,e.j?(e.j.variants=x.variants,e.j.textStreams=x.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:x.variants,textStreams:x.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.Wd()),Promise.resolve(),c=Date.now(),d=(c-r)/1e3,e.B.sample(1,d),Y(p)})}function w3(e,t,n,r,a,l){var c=t.attributes.Type;if(c!=="audio"&&c!=="video"&&c!=="text")return He("Ignoring unrecognized type:",c),null;var d=t.attributes.Language,p=e.s++,x=Rt(n,"Bitrate",er),C=Rt(n,"MaxWidth",er),b=Rt(n,"MaxHeight",er),k=Rt(n,"Channels",er),E=Rt(n,"SamplingRate",er),M=l.duration;r.length&&(M=r[r.length-1].end-r[0].start);var R=e.i.getDuration();e.i.Za(Math.min(M,R));var _={id:p,originalId:t.attributes.Name||String(p),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:x||0,width:C||void 0,height:b||void 0,kind:"",encrypted:0<a.length,drmInfos:a,keyIds:new Set,language:$t(d||"und"),originalLanguage:d,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:k,audioSamplingRate:E,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:M,timescale:l.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((a=t.attributes.Subtype)&&((a=k3[a])&&_.roles.push(a),a==="main"&&(_.primary=!0)),a=n.attributes.FourCC,(a===null||a==="")&&(a=t.attributes.FourCC),!a){if(c==="audio")a="AAC";else if(c==="video")return He('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!E3.includes(a.toUpperCase()))return He("Codec not supported:",a),null;switch(n=S3(n,c,a,_),_.mssPrivateData.codecPrivateData=n,c){case"audio":if(!n)return He("Quality unsupported without CodecPrivateData",c),null;_.type="audio",_.mimeType="mss/audio/mp4",_.codecs=C3(a,n);break;case"video":if(!n)return He("Quality unsupported without CodecPrivateData",c),null;_.type="video",_.mimeType="mss/video/mp4",_.codecs=T3(n);break;case"text":_.type=_t,_.mimeType="application/mp4",(a==="TTML"||a==="DFXP")&&(_.codecs="stpp")}return _.fullMimeTypes.add(Dn(_.mimeType,_.codecs)),_.createSegmentIndex=function(){if(_.segmentIndex)return Promise.resolve();if(e.m.has(_.id))var j=e.m.get(_.id);else j=[],_.type=="video"&&(j=_.mssPrivateData.codecPrivateData.split("00000001").slice(1)),j={id:_.id,type:_.type,codecs:_.codecs,encrypted:_.encrypted,timescale:_.mssPrivateData.timescale,duration:_.mssPrivateData.duration,$a:j,ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:_},j=ga(new ma([j])),e.m.set(_.id,j);return j=b3(e,new Ei(function(){return[]},0,null,Af(_),_.mssPrivateData.timescale,j),_,t,r),_.segmentIndex=new Dt(j),Promise.resolve()},_.closeSegmentIndex=function(){_.segmentIndex&&(_.segmentIndex.release(),_.segmentIndex=null)},_}function S3(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var a={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=a[e],n==="AACH"?(n=new Uint8Array(4),e=a[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function C3(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function T3(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function b3(e,t,n,r,a){var l=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],a=T(a);for(var c=a.next(),d={};!c.done;d={re:void 0},c=a.next())d.re=c.value,r.push(new ut(d.re.start,d.re.end,function(p){return function(){return Zn(e.l,[l.replace("{start time}",String(p.re.$f))])}}(d),0,null,t,0,0,n.mssPrivateData.duration));return r}me("shaka.mss.MssParser",b0);var E3="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),k3={CAPT:"main",SUBT:"alternate",DESC:"main"};vo["application/vnd.ms-sstr+xml"]=function(){return new b0};function R2(e,t,n,r,a,l){if(200<=n&&299>=n&&n!=202)return{uri:a||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var c=null;try{c=Xo(t)}catch{}throw new ne(n==401||n==403?2:1,1,1001,r,n,c,e,l,a||r)}function k0(){}function Mc(e,t,n,r,a){var l=new R3;fu(t.headers).forEach(function(x,C){l.append(C,x)});var c=new M3,d={lg:!1,mh:!1};if(e=A3(e,n,{body:t.body||void 0,headers:l,method:t.method,signal:c.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},d,r,a,t.streamDataCallback),e=new bn(e,function(){return d.lg=!0,c.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var p=new Et(function(){d.mh=!0,c.abort()});p.Y(t/1e3),e.finally(function(){p.stop()})}return e}function A3(e,t,n,r,a,l,c){var d,p,x,C,b,k,E,M,R,_,j,U,K;return G(function(O){switch(O.g){case 1:return d=I3,p=_3,k=b=0,E=Date.now(),Q(O,2),A(O,d(e,n),4);case 4:if(x=O.h,l(L2(x.headers)),n.method=="HEAD"){O.u(5);break}return M=x.clone().body.getReader(),_=(R=x.headers.get("Content-Length"))?parseInt(R,10):0,j=function(V){function Z(){var te,re,de;return G(function(se){switch(se.g){case 1:return Q(se,2),A(se,M.read(),4);case 4:te=se.h,q(se,3);break;case 2:return W(se),se.return();case 3:if(te.done){se.u(5);break}if(b+=te.value.byteLength,!c){se.u(5);break}return A(se,c(te.value),5);case 5:re=Date.now(),(100<re-E||te.done)&&(de=te.done?0:_-b,a(re-E,b-k,de),k=b,E=re),te.done?V.close():(V.enqueue(te.value),Z()),Y(se)}})}Z()},new p({start:j}),A(O,x.arrayBuffer(),6);case 6:C=O.h;case 5:q(O,3);break;case 2:throw U=W(O),r.lg?new ne(1,1,7001,e,t):r.mh?new ne(1,1,1003,e,t):new ne(1,1,1002,e,U,t);case 3:return K=L2(x.headers),O.return(R2(K,C,x.status,e,x.url,t))}})}function L2(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function D2(){if(h.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(h.Response){if(!new Response("").body)return!1}else return!1;return!(!h.fetch||"polyfill"in h.fetch||!h.AbortController)}me("shaka.net.HttpFetchPlugin",k0),k0.isSupported=D2,k0.parse=Mc;var I3=h.fetch,M3=h.AbortController,_3=h.ReadableStream,R3=h.Headers;D2()&&(Yo("http",Mc,2,!0),Yo("https",Mc,2,!0),Yo("blob",Mc,2,!0));function P2(){}function _c(e,t,n,r,a){var l=new L3,c=Date.now(),d=0,p=new Promise(function(x,C){l.open(t.method,e,!0),l.responseType="arraybuffer",l.timeout=t.retryParameters.timeout,l.withCredentials=t.allowCrossSiteCredentials,l.onabort=function(){C(new ne(1,1,7001,e,n))};var b=!1;l.onreadystatechange=function(){if(l.readyState==2&&!b){var E=O2(l);a(E),b=!0}},l.onload=function(E){var M=O2(l),R=l.response;try{r(Date.now()-c,E.loaded-d,0);var _=R2(M,R,l.status,e,l.responseURL,n);x(_)}catch(j){C(j)}},l.onerror=function(E){C(new ne(1,1,1002,e,E,n))},l.ontimeout=function(){C(new ne(1,1,1003,e,n))},l.onprogress=function(E){var M=Date.now();(100<M-c||E.lengthComputable&&E.loaded==E.total)&&(r(M-c,E.loaded-d,l.readyState==4?0:E.total-E.loaded),d=E.loaded,c=M)};for(var k in t.headers)l.setRequestHeader(k.toLowerCase(),t.headers[k]);l.send(t.body)});return new bn(p,function(){return l.abort(),Promise.resolve()})}function O2(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}me("shaka.net.HttpXHRPlugin",P2),P2.parse=_c;var L3=h.XMLHttpRequest;Yo("http",_c,1,!0),Yo("https",_c,1,!0),Yo("blob",_c,1,!0);function N2(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function A0(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.sa}function D3(e,t){return Gs(e.g.M(),e.g.Ha,e.g.sa,t.streaming.retryParameters)}function U2(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function B2(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}U2.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function j2(e){var t=this;this.o=e,this.j=new Map,this.i=new Os(function(){return I0(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new U2}j2.prototype.destroy=function(){return this.i.destroy()};function P3(e,t,n){e.m=t,e.l=n}function I0(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function O3(e,t,n,r,a,l){qt(e.i);var c=(e.j.get(t)||Promise.resolve()).then(function(){var d,p,x,C,b,k,E;return G(function(M){if(M.g==1)return A(M,U3(e,n),2);if(d=M.h,e.i.g)throw new ne(2,9,7001);if(a)for(C in p=Me(d),x=new dy(p),x.data)b=Number(C),k=x.data[b],E=x.g[b],e.l(k,E);e.g.close(r,d.byteLength);var R=e.g;return e.m(R.i==0?0:R.j/R.i,e.g.h),M.return(l(d))})});e.j.set(t,c)}function N3(e){return G(function(t){return t.g==1?A(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function U3(e,t){var n,r,a,l;return G(function(c){return c.g==1?(n=Mo,r=e.o.request(n,t),a=function(){return r.abort()},e.h.push(a),A(c,r.promise,2)):(l=c.h,Ht(e.h,a),c.return(l.data))})}function Rc(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Xt,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Rc.prototype.abort=function(){var e=this;return G(function(t){if(t.g==1){try{e.i.abort()}catch{}return Q(t,2),A(t,e.g,4)}if(t.g!=2)return q(t,0);W(t),Y(t)})};function M0(e,t){return new Promise(function(n,r){var a=e.h.openCursor();a.onerror=r,a.onsuccess=function(){var l;return G(function(c){if(c.g==1)return a.result==null?(n(),c.return()):(l=a.result,A(c,t(l.key,l.value,l),2));l.continue(),Y(c)})}})}Rc.prototype.store=function(){return this.h},Rc.prototype.promise=function(){return this.g};function _0(e){this.h=e,this.g=[]}_0.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function as(e,t){return Lc(e,t,"readwrite")}function Lc(e,t,n){n=e.h.transaction([t],n);var r=new Rc(n,t);return e.g.push(r),r.promise().then(function(){Ht(e.g,r)},function(){Ht(e.g,r)}),r}function us(e,t,n){this.h=new _0(e),this.i=t,this.g=n}s=us.prototype,s.destroy=function(){return this.h.destroy()},s.hasFixedKeySpace=function(){return!0},s.addSegments=function(){return F2(this.i)},s.removeSegments=function(e,t){return $2(this,this.i,e,t)},s.getSegments=function(e){var t=this,n;return G(function(r){return r.g==1?A(r,z2(t,t.i,e),2):(n=r.h,r.return(n.map(function(a){return t.og(a)})))})},s.addManifests=function(){return F2(this.g)},s.updateManifest=function(){return Promise.reject(new ne(2,9,9016,"Cannot modify values in "+this.g))};function B3(e,t,n){e=as(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}s.updateManifestExpiration=function(e,t){var n=as(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(a){(a=a.target.result)&&(a.expiration=t,r.put(a,e))},n.promise()},s.removeManifests=function(e,t){return $2(this,this.g,e,t)},s.getManifests=function(e){var t=this,n;return G(function(r){return r.g==1?A(r,z2(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(a){return t.Wc(a)}))))})},s.getAllManifests=function(){var e=this,t,n;return G(function(r){return r.g==1?(t=Lc(e.h,e.g,"readonly"),n=new Map,A(r,M0(t,function(a,l){var c;return G(function(d){if(d.g==1)return A(d,e.Wc(l),2);c=d.h,n.set(a,c),Y(d)})}),2)):r.g!=3?A(r,t.promise(),3):r.return(n)})},s.og=function(e){return e},s.Wc=function(e){return Promise.resolve(e)};function F2(e){return Promise.reject(new ne(2,9,9011,"Cannot add new value to "+e))}s.add=function(e,t){var n=this,r,a,l,c,d,p,x;return G(function(C){if(C.g==1){for(r=as(n.h,e),a=r.store(),l=[],c=T(t),d=c.next(),p={};!d.done;p={Hf:void 0},d=c.next())x=d.value,p.Hf=a.add(x),p.Hf.onsuccess=function(b){return function(){l.push(b.Hf.result)}}(p);return A(C,r.promise(),2)}return C.return(l)})};function $2(e,t,n,r){e=as(e.h,t),t=e.store(),n=T(n);for(var a=n.next(),l={};!a.done;l={rf:void 0},a=n.next())l.rf=a.value,t.delete(l.rf).onsuccess=function(c){return function(){return r(c.rf)}}(l);return e.promise()}function z2(e,t,n){var r,a,l,c,d,p,x;return G(function(C){if(C.g==1){for(r=Lc(e.h,t,"readonly"),a=r.store(),l={},c=[],d=T(n),p=d.next(),x={};!p.done;x={le:void 0,Sd:void 0},p=d.next())x.Sd=p.value,x.le=a.get(x.Sd),x.le.onsuccess=function(b){return function(){b.le.result==null&&c.push(b.Sd),l[b.Sd]=b.le.result}}(x);return A(C,r.promise(),2)}if(c.length)throw new ne(2,9,9012,"Could not find values for "+c);return C.return(n.map(function(b){return l[b]}))})}function Yu(e){this.g=new _0(e)}Yu.prototype.destroy=function(){return this.g.destroy()},Yu.prototype.getAll=function(){var e=this,t,n;return G(function(r){return r.g==1?(t=Lc(e.g,"session-ids","readonly"),n=[],A(r,M0(t,function(a,l){n.push(l)}),2)):r.g!=3?A(r,t.promise(),3):r.return(n)})},Yu.prototype.add=function(e){var t=as(this.g,"session-ids"),n=t.store();e=T(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},Yu.prototype.remove=function(e){var t=this,n;return G(function(r){return r.g==1?(n=as(t.g,"session-ids"),A(r,M0(n,function(a,l,c){e.includes(l.sessionId)&&c.delete()}),2)):A(r,n.promise(),0)})};function wi(){this.g=new Map}wi.prototype.destroy=function(){for(var e=[],t=T(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},wi.prototype.init=function(){var e=this;Qu.forEach(function(a,l){(a=a())&&e.g.set(l,a)});for(var t=[],n=T(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function V2(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(a,l){a.hasFixedKeySpace()||t||(t={path:{nb:r,Ja:l},Ja:a})})}),t)return t;throw new ne(2,9,9013,"Could not find a cell that supports add-operations")}function j3(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(a,l){t({nb:r,Ja:l},a)})})}function Dc(e,t,n){if(e=e.g.get(t),!e)throw new ne(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new ne(2,9,9013,"Could not find cell with name "+n);return t}function F3(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function $3(e){var t=Array.from(e.g.keys());if(!t.length)throw new ne(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function z3(e){var t,n,r;return G(function(a){return a.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=Qu,r.forEach(function(l){(l=l())&&t.push(l)})),A(a,Promise.all(t.map(function(l){return l.erase()})),2)):n?a.u(0):A(a,Promise.all(t.map(function(l){return l.destroy()})),0)})}function H2(e,t){Qu.set(e,t)}me("shaka.offline.StorageMuxer",wi),wi.unregister=function(e){Qu.delete(e)},wi.register=H2,wi.prototype.destroy=wi.prototype.destroy;var Qu=new Map;function Zu(){us.apply(this,arguments)}$(Zu,us),Zu.prototype.updateManifestExpiration=function(e,t){var n=this,r,a,l;return G(function(c){return r=as(n.h,n.g),a=r.store(),l=new Xt,a.get(e).onsuccess=function(d){(d=d.target.result)?(d.expiration=t,a.put(d),l.resolve()):l.reject(new ne(2,9,9012,"Could not find values for "+e))},A(c,Promise.all([r.promise(),l]),0)})},Zu.prototype.Wc=function(e){var t,n,r,a,l,c;return G(function(d){if(d.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=r-e.periods[n].startTime,l=V3(e.periods[n],a),t.push(l);return A(d,Tx(t),2)}return c=d.h,d.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:c,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function V3(e,t){G3(e);for(var n=T(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(a){return H3(a,e.startTime,t)})}function H3(e,t,n){var r=e.initSegmentUri?G2(e.initSegmentUri):null,a=t+e.presentationTimeOffset,l=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(c){var d=G2(c.uri);return{startTime:t+c.startTime,endTime:t+c.endTime,dataKey:d,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:l,timestampOffset:a,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Zu.prototype.og=function(e){return{data:e.data}};function G2(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ne(2,9,9004,"Could not parse uri "+e)}function G3(e){var t=e.streams.filter(function(d){return d.contentType=="audio"});if(e=e.streams.filter(function(d){return d.contentType=="video"}),!t.every(function(d){return d.variantIds})||!e.every(function(d){return d.variantIds})){for(var n=T(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=T(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var a=T(e),l=a.next();!l.done;l=a.next())l.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,a=T(t),l=a.next();!l.done;l=a.next())l.value.variantIds.push(r);if(e.length&&t.length)for(t=T(t),r=t.next();!r.done;r=t.next())for(r=r.value,a=T(e),l=a.next();!l.done;l=a.next()){l=l.value;var c=n++;r.variantIds.push(c),l.variantIds.push(c)}}}function Pc(){us.apply(this,arguments)}$(Pc,us),Pc.prototype.Wc=function(e){var t,n,r,a,l,c;return G(function(d){if(d.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=r-e.periods[n].startTime;for(var p=e.periods[n],x=[],C=T(p.streams),b=C.next();!b.done;b=C.next())b=b.value,b.variantIds.length!=0&&x.push(W3(b,p.startTime,p.startTime+a));l=x,t.push(l)}return A(d,Tx(t),2)}return c=d.h,d.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:c,sequenceMode:!1})})};function W3(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function R0(){us.apply(this,arguments)}$(R0,us),s=R0.prototype,s.hasFixedKeySpace=function(){return!1},s.addSegments=function(e){return this.add(this.i,e)},s.addManifests=function(e){return this.add(this.g,e)},s.updateManifest=function(e,t){return B3(this,e,t)},s.Wc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function W2(){this.m=this.j=this.i=this.h=this.g=this.l=null}s=W2.prototype,s.init=function(){var e=this,t=new Xt,n=!1,r=new Et(function(){n=!0,t.reject(new ne(2,9,9017))});r.Y(5);var a=h.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!n){var l=a.result;e.l=l;var c=l.objectStoreNames;c=c.contains("manifest")&&c.contains("segment")?new Zu(l,"segment","manifest"):null,e.g=c,c=l.objectStoreNames,c=c.contains("manifest-v2")&&c.contains("segment-v2")?new Pc(l,"segment-v2","manifest-v2"):null,e.h=c,c=l.objectStoreNames,c=c.contains("manifest-v3")&&c.contains("segment-v3")?new Pc(l,"segment-v3","manifest-v3"):null,e.i=c,c=l.objectStoreNames,c=c.contains("manifest-v5")&&c.contains("segment-v5")?new R0(l,"segment-v5","manifest-v5"):null,e.j=c,l=l.objectStoreNames.contains("session-ids")?new Yu(l):null,e.m=l,r.stop(),t.resolve()}},a.onupgradeneeded=function(){for(var l=a.result,c=T(["segment-v5","manifest-v5","session-ids"]),d=c.next();!d.done;d=c.next())d=d.value,l.objectStoreNames.contains(d)||l.createObjectStore(d,{autoIncrement:!0})},a.onerror=function(l){n||(t.reject(new ne(2,9,9001,a.error)),r.stop(),l.preventDefault())},t},s.destroy=function(){var e=this;return G(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return A(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return A(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return A(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return A(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return A(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),Y(t)}})},s.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},s.getEmeSessionCell=function(){return this.m},s.erase=function(){var e=this;return G(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return A(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return A(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return A(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return A(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),A(t,X3(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,A(t,e.init(),0)}})};function X3(){var e=new Xt,t=h.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new ne(2,9,9001,t.error)),n.preventDefault()},e}H2("idb",function(){return Bi()||Oo()||!h.indexedDB?null:new W2});function zo(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}zo.prototype.nb=function(){return this.i},zo.prototype.Ja=function(){return this.h},zo.prototype.key=function(){return this.l},zo.prototype.toString=function(){return this.j};function L0(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new zo(t,n,r,Number(e[4])):null}function X2(e,t){this.h=e,this.g=t}function q2(e,t){var n=new at(null,0);n.Za(t.duration);var r=t.streams.filter(function(x){return x.type=="audio"}),a=t.streams.filter(function(x){return x.type=="video"});r=q3(e,r,a,n),a=t.streams.filter(function(x){return x.type==_t}).map(function(x){return Oc(e,x,n)});var l=t.streams.filter(function(x){return x.type=="image"}).map(function(x){return Oc(e,x,n)}),c=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var d=T(r.values()),p=d.next();!p.done;p=d.next())p=p.value,p.audio&&p.audio.encrypted&&(p.audio.drmInfos=c),p.video&&p.video.encrypted&&(p.video.drmInfos=c);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:a,imageStreams:l,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function q3(e,t,n,r){for(var a=new Set,l=T(t),c=l.next();!c.done;c=l.next()){c=T(c.value.variantIds);for(var d=c.next();!d.done;d=c.next())a.add(d.value)}for(l=T(n),c=l.next();!c.done;c=l.next())for(c=T(c.value.variantIds),d=c.next();!d.done;d=c.next())a.add(d.value);for(l=new Map,a=T(a),c=a.next();!c.done;c=a.next())c=c.value,l.set(c,{id:c,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=T(t),a=t.next();!a.done;a=t.next())for(c=a.value,a=Oc(e,c,r),c=T(c.variantIds),d=c.next();!d.done;d=c.next())d=l.get(d.value),d.language=a.language,d.primary=d.primary||a.primary,d.audio=a;for(n=T(n),t=n.next();!t.done;t=n.next())for(a=t.value,t=Oc(e,a,r),a=T(a.variantIds),c=a.next();!c.done;c=a.next())c=l.get(c.value),c.primary=c.primary||t.primary,c.video=t;return l}function Oc(e,t,n){var r=t.segments.map(function(a){return K3(e,a,t)});return n.sd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Dt(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Dn(t.mimeType,t.codecs)])}}function K3(e,t,n){var r=new zo("segment",e.h,e.g,t.dataKey);return e=new ut(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?Y3(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function Y3(e,t){var n=new zo("segment",e.h,e.g,t);return new Ei(function(){return[n.toString()]},0,null)}function K2(){this.g=null}s=K2.prototype,s.configure=function(){},s.start=function(e,t){var n=this,r,a,l,c,d,p,x;return G(function(C){switch(C.g){case 1:if(r=L0(e),n.g=r,r==null||r.g!="manifest")throw new ne(2,1,9004,e);return a=new wi,ee(C,2),A(C,a.init(),4);case 4:return A(C,Dc(a,r.nb(),r.Ja()),5);case 5:return l=C.h,A(C,l.getManifests([r.key()]),6);case 6:return c=C.h,d=c[0],p=new X2(r.nb(),r.Ja()),x=q2(p,d),t.makeTextStreamsForClosedCaptions(x),C.return(x);case 2:return ie(C),A(C,a.destroy(),7);case 7:ue(C,0)}})},s.stop=function(){return Promise.resolve()},s.update=function(){},s.onExpirationUpdated=function(e,t){var n=this,r,a,l,c,d,p,x;return G(function(C){switch(C.g){case 1:return r=n.g,a=new wi,Q(C,2,3),A(C,a.init(),5);case 5:return A(C,Dc(a,r.nb(),r.Ja()),6);case 6:return l=C.h,A(C,l.getManifests([r.key()]),7);case 7:if(c=C.h,d=c[0],p=d.sessionIds.includes(e),x=d.expiration==null||d.expiration>t,!p||!x){C.u(3);break}return A(C,l.updateManifestExpiration(r.key(),t),3);case 3:return ie(C),A(C,a.destroy(),10);case 10:ue(C,0);break;case 2:W(C),C.u(3)}})},s.onInitialVariantChosen=function(){},s.banLocation=function(){},s.setMediaElement=function(){},vo["application/x-offline-manifest"]=function(){return new K2};function Y2(){}function Q2(e){var t=L0(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Ds(e)):e=t&&t.g=="segment"?Q3(t.key(),t):Qr(new ne(2,1,9004,e)),e}function Q3(e,t){var n=new wi;return Ds(void 0).Aa(function(){return n.init()}).Aa(function(){return Dc(n,t.nb(),t.Ja())}).Aa(function(r){return r.getSegments([t.key()])}).Aa(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}me("shaka.offline.OfflineScheme",Y2),Y2.plugin=Q2,Yo("offline",Q2);function Z2(e,t,n){var r,a,l,c,d,p;return G(function(x){switch(x.g){case 1:r=[];for(var C=[],b=T(n),k=b.next();!k.done;k=b.next()){k=k.value;for(var E=!1,M=T(C),R=M.next();!R.done;R=M.next())if(R=R.value,J3(R.info,k)){R.sessionIds.push(k.sessionId),E=!0;break}E||C.push({info:k,sessionIds:[k.sessionId]})}a=T(C),l=a.next();case 2:if(l.done){x.u(4);break}return c=l.value,d=Z3(e,t,c),A(x,d,5);case 5:p=x.h,r=r.concat(p),l=a.next(),x.u(2);break;case 4:return x.return(r)}})}function Z3(e,t,n){var r,a;return G(function(l){switch(l.g){case 1:return r=new mf({Lb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Q(l,2),r.configure(e),A(l,Nb(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:q(l,3);break;case 2:return W(l),A(l,r.destroy(),5);case 5:return l.return([]);case 3:return a=[],A(l,Promise.all(n.sessionIds.map(function(c){return G(function(d){if(d.g==1)return Q(d,2),A(d,jb(r,c),4);if(d.g!=2)return a.push(c),q(d,0);W(d),Y(d)})})),6);case 6:return A(l,r.destroy(),7);case 7:return l.return(a)}})}function J3(e,t){function n(r,a){return r.robustness==a.robustness&&r.contentType==a.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Rn(e.audioCapabilities,t.audioCapabilities,n)&&Rn(e.videoCapabilities,t.videoCapabilities,n)}function eI(e,t,n){var r=t.presentationTimeline.getDuration();return t=J2(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function D0(e,t){var n=q2(new X2(e.nb(),e.Ja()),t),r=t.appMetadata||{};return n=J2(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function J2(e){var t=[],n=tf(e.variants);n=T(n);for(var r=n.next();!r.done;r=n.next())t.push(_s(r.value));for(e=T(e.textStreams),n=e.next();!n.done;n=e.next())t.push(ef(n.value));return t}function tI(){this.g={}}function nI(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var a=n.bandwidth||393216,l=r.bandwidth||t.bandwidth-a;0>=l&&(l=t.bandwidth),e.g[n.id]=a,e.g[r.id]=l}}function iI(e,t){e.g[t.id]=t.bandwidth||2048}function ew(e,t){return e=e.g[t],e==null&&(e=0),e}function qn(e){var t=this;if(e&&e.constructor!=we)throw new ne(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=qs(),this.g=new Zt),this.i=[],this.j=[];var n=!e;this.l=new Os(function(){var r,a,l,c,d;return G(function(p){switch(p.g){case 1:return A(p,Promise.all(t.j.map(function(x){return I0(x)})),2);case 2:for(r=function(){},a=[],l=T(t.i),c=l.next();!c.done;c=l.next())d=c.value,a.push(d.then(r,r));return A(p,Promise.all(a),3);case 3:if(!n){p.u(4);break}return A(p,t.g.destroy(),4);case 4:t.h=null,t.g=null,Y(p)}})})}function P0(){if(ko())e:{for(var e=T(Qu.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}s=qn.prototype,s.destroy=function(){return this.l.destroy()},s.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Df(e,t)),Er(this.h,e)},s.getConfiguration=function(){var e=qs();return Er(e,this.h,qs()),e},s.xb=function(){return this.g},s.store=function(e,t,n){var r=this,a=this.getConfiguration(),l=new j2(this.g);return this.j.push(l),t=oI(this,e,t||{},function(){var c;return G(function(d){return d.g==1?n?d.u(2):A(d,vp(e,r.g,a.manifest.retryParameters),3):(d.g!=2&&(n=d.h),c=Ny(e,n||null),d.return(c()))})},a,l),t=new bn(t,function(){return I0(l)}),t.finally(function(){Ht(r.j,l)}),yI(this,t)};function oI(e,t,n,r,a,l){var c,d,p,x,C,b,k,E,M,R,_,j,U,K;return G(function(O){switch(O.g){case 1:return Nc(),d=c=null,p=new wi,b=C=x=null,Q(O,2,3),A(O,r(),5);case 5:return c=O.h,A(O,dI(e,t,c,a),6);case 6:if(k=O.h,ei(e),E=!k.presentationTimeline.V()&&!k.presentationTimeline.kc(),!E)throw new ne(2,9,9005,t);return A(O,e.yc(k,function(V){b=b||V},a),7);case 7:if(d=O.h,ei(e),b)throw b;return A(O,sI(k,d,a),8);case 8:return A(O,p.init(),9);case 9:return ei(e),A(O,V2(p),10);case 10:return x=O.h,ei(e),M=aI(d,k,t,n,a,l),R=M.ui,_=M.Xf,A(O,x.Ja.addManifests([R]),11);case 11:if(j=O.h,ei(e),C=j[0],ei(e),b)throw b;return A(O,rI(e,_,C,R,l,a,x.Ja,k,d),12);case 12:return ei(e),ow(k,R,d,a),A(O,x.Ja.updateManifest(C,R),13);case 13:return ei(e),U=new zo("manifest",x.path.nb,x.path.Ja,C),O.return(D0(U,R));case 3:return ie(O),A(O,p.destroy(),14);case 14:if(!c){O.u(15);break}return A(O,c.stop(),15);case 15:if(!d){O.u(17);break}return A(O,d.destroy(),17);case 17:ue(O,0);break;case 2:if(K=W(O),C==null){O.u(19);break}return A(O,tw(C),19);case 19:throw b||K}})}function rI(e,t,n,r,a,l,c,d,p){var x,C,b,k,E,M,R,_,j,U;return G(function(K){switch(K.g){case 1:if(x={},C=0,b=function(O,V){var Z,te,re,de,se,ae,he;return G(function(Se){if(Se.g==1){for(Z=T(O),te=Z.next(),re={};!te.done;re={Ac:void 0},te=Z.next())re.Ac=te.value,de=D3(re.Ac,l),se=re.Ac.i,ae=re.Ac.h,he=function(ye){return function(be){var Re,Ee,je;return G(function(yt){if(yt.g==1)return A(yt,c.addSegments([{data:be}]),2);Re=yt.h,ei(e),Ee=ye.Ac.g,je=A0(Ee),x[je]=Re[0],C+=be.byteLength,Y(yt)})}}(re),O3(a,re.Ac.groupId,de,se,ae,he);return A(Se,N3(a),2)}return V?(ei(e),ow(d,r,p,l),A(Se,c.updateManifest(n,r),0)):Se.u(0)})},k=!1,Q(K,2),!O0(d)||!k||iw(d)){K.u(4);break}return A(K,b(t.filter(function(O){return O.h}),!0),5);case 5:return ei(e),t=t.filter(function(O){return!O.h}),E=x,M=C,x={},C=0,A(K,nw(c,n,r,E,M,function(){return ei(e)}),6);case 6:ei(e);case 4:if(k){K.u(7);break}return A(K,b(t,!1),8);case 8:return ei(e),R=x,_=C,x={},C=0,A(K,nw(c,n,r,R,_,function(){return ei(e)}),9);case 9:ei(e);case 7:q(K,0);break;case 2:return j=W(K),U=Object.values(x),A(K,c.removeSegments(U,function(){}),10);case 10:throw j}})}function tw(e){var t,n,r,a;return G(function(l){switch(l.g){case 1:return t=new wi,A(l,t.init(),2);case 2:return A(l,V2(t),3);case 3:return n=l.h,r=new zo("manifest",n.path.nb,n.path.Ja,e),A(l,t.destroy(),4);case 4:return a=new qn,A(l,a.remove(r.toString()),0)}})}function nw(e,t,n,r,a,l){var c,d,p,x,C,b,k,E,M,R,_;return G(function(j){switch(j.g){case 1:for(c=!1,Q(j,2),d=!0,p=T(n.streams),x=p.next();!x.done;x=p.next())for(C=x.value,b=T(C.segments),k=b.next();!k.done;k=b.next())E=k.value,M=E.pendingSegmentRefId?r[E.pendingSegmentRefId]:null,M!=null&&(E.dataKey=M,E.pendingSegmentRefId=void 0),M=E.pendingInitSegmentRefId?r[E.pendingInitSegmentRefId]:null,M!=null&&(E.initSegmentKey=M,E.pendingInitSegmentRefId=void 0),E.pendingSegmentRefId&&(d=!1),E.pendingInitSegmentRefId&&(d=!1);return n.size+=a,d&&(n.isIncomplete=!1),A(j,e.updateManifest(t,n),4);case 4:c=!0,l(),q(j,0);break;case 2:return R=W(j),A(j,tw(t),5);case 5:if(c){j.u(6);break}return _=Object.values(r),A(j,e.removeSegments(_,function(){}),6);case 6:throw R}})}function sI(e,t,n){var r,a,l,c,d,p,x,C,b,k,E,M,R,_,j,U,K,O,V,Z,te,re,de,se,ae,he,Se,ye,be;return G(function(Re){switch(Re.g){case 1:return r={width:1/0,height:1/0},rb(e,n.restrictions,r),A(Re,Bg(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(a=[],l=n.preferredDecodingAttributes,c=n.preferredVideoCodecs,d=n.preferredAudioCodecs,Ng(e,c,d,l),p=T(e.variants),x=p.next();!x.done;x=p.next())C=x.value,a.push(_s(C));for(b=T(e.textStreams),k=b.next();!k.done;k=b.next())E=k.value,a.push(ef(E));for(M=T(e.imageStreams),R=M.next();!R.done;R=M.next())_=R.value,a.push(Td(_));return A(Re,n.offline.trackSelectionCallback(a),3);case 3:for(j=Re.h,U=e.presentationTimeline.getDuration(),K=0,O=T(j),V=O.next();!V.done;V=O.next())Z=V.value,te=Z.bandwidth*U/8,K+=te;return Q(Re,4),A(Re,n.offline.downloadSizeCallback(K),6);case 6:if(re=Re.h,!re)throw new ne(2,9,9014);q(Re,5);break;case 4:throw de=W(Re),de instanceof ne?de:new ne(2,9,9015);case 5:for(se=new Set,ae=new Set,he=new Set,Se=T(j),ye=Se.next();!ye.done;ye=Se.next())be=ye.value,be.type=="variant"&&se.add(be.id),be.type=="text"&&ae.add(be.id),be.type=="image"&&he.add(be.id);e.variants=e.variants.filter(function(Ee){return se.has(Ee.id)}),e.textStreams=e.textStreams.filter(function(Ee){return ae.has(Ee.id)}),e.imageStreams=e.imageStreams.filter(function(Ee){return he.has(Ee.id)}),wI(e),Y(Re)}})}function aI(e,t,n,r,a,l){var c=eI(n,t,r),d=a.offline.progressCallback;P3(l,function(E,M){c.size=M,d(c,E)},function(E,M){p&&a.offline.usePersistentLicense&&x==M&&cu(e,"cenc",E)});var p=O0(t)&&!iw(t),x=null;p&&(x=SI.get(e.g.keySystem));for(var C=new tI,b=T(t.textStreams),k=b.next();!k.done;k=b.next())C.g[k.value.id]=52;for(b=T(t.imageStreams),k=b.next();!k.done;k=b.next())iI(C,k.value);for(b=T(t.variants),k=b.next();!k.done;k=b.next())nI(C,k.value);return C=pI(l,C,t,a),l=C.streams,C=C.Xf,b=e.g,k=a.offline.usePersistentLicense,b&&k&&(b.initData=[]),{ui:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:l,sessionIds:k?by(e):[],drmInfo:b,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Xf:C}}function O0(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function iw(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function ow(e,t,n,r){if(t.expiration=n.ad(),n=by(n),t.sessionIds=r.offline.usePersistentLicense?n:[],O0(e)&&r.offline.usePersistentLicense&&!n.length)throw new ne(2,9,9007)}s.remove=function(e){return N0(this,uI(this,e))};function uI(e,t){var n,r,a,l,c,d;return G(function(p){switch(p.g){case 1:if(Nc(),n=L0(t),n==null||n.g!="manifest")throw new ne(2,9,9004,t);return r=n,a=new wi,ee(p,2),A(p,a.init(),4);case 4:return A(p,Dc(a,r.nb(),r.Ja()),5);case 5:return l=p.h,A(p,l.getManifests([r.key()]),6);case 6:return c=p.h,d=c[0],A(p,Promise.all([lI(e,d,a),fI(l,r,d)]),2);case 2:return ie(p),A(p,a.destroy(),8);case 8:ue(p,0)}})}function rw(e,t){for(var n=[],r=T(e.streams),a=r.next();!a.done;a=r.next())a=a.value,t&&a.type=="video"?n.push({contentType:Dn(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||a.type!="audio"||n.push({contentType:Dn(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function lI(e,t,n){return G(function(r){return A(r,xI(e.g,e.h.drm,n,t),0)})}function fI(e,t,n){function r(){}var a=vI(n);return D0(t,n),Promise.all([e.removeSegments(a,r),e.removeManifests([t.key()],r)])}s.Li=function(){return N0(this,cI(this))};function cI(e){var t,n,r,a,l,c,d,p,x,C;return G(function(b){switch(b.g){case 1:return Nc(),t=e.g,n=e.h.drm,r=new wi,a=!1,ee(b,2),A(b,r.init(),4);case 4:l=[],F3(r,function(k){return l.push(k)}),c=T(l),d=c.next();case 5:if(d.done){b.u(2);break}return p=d.value,A(b,p.getAll(),8);case 8:return x=b.h,A(b,Z2(n,t,x),9);case 9:return C=b.h,A(b,p.remove(C),10);case 10:C.length!=x.length&&(a=!0),d=c.next(),b.u(5);break;case 2:return ie(b),A(b,r.destroy(),11);case 11:ue(b,3);break;case 3:return b.return(!a)}})}s.list=function(){return N0(this,hI())};function hI(){var e,t,n;return G(function(r){switch(r.g){case 1:return Nc(),e=[],t=new wi,ee(r,2),A(r,t.init(),4);case 4:return n=Promise.resolve(),j3(t,function(a,l){n=n.then(function(){var c;return G(function(d){if(d.g==1)return A(d,l.getAllManifests(),2);c=d.h,c.forEach(function(p,x){p=D0(new zo("manifest",a.nb,a.Ja,x),p),e.push(p)}),Y(d)})})}),A(r,n,2);case 2:return ie(r),A(r,t.destroy(),6);case 6:ue(r,3);break;case 3:return r.return(e)}})}function dI(e,t,n,r){var a,l,c,d,p;return G(function(x){if(x.g==1)return a=null,l=e.g,c={networkingEngine:l,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(C){a=C},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(r.manifest),ei(e),A(x,n.start(t,c),2);if(x.g!=3)return d=x.h,ei(e),p=sw(d),A(x,Promise.all(Id(p,function(C){return C.createSegmentIndex()})),3);if(ei(e),a)throw a;return x.return(d)})}s.yc=function(e,t,n){var r=this,a;return G(function(l){return l.g==1?(a=new mf({Lb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(n.drm),A(l,Ob(a,e.variants,n.offline.usePersistentLicense),2)):l.g!=3?A(l,Ty(a),3):l.return(a)})};function pI(e,t,n,r){var a=new Map,l=sw(n),c=new Map;l=T(l);for(var d=l.next();!d.done;d=l.next()){d=d.value;var p=mI(e,t,n,d,r,a);c.set(d.id,p)}for(e=T(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&c.get(t.audio.id).variantIds.push(t.id),t.video&&c.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(c.values()),Xf:Array.from(a.values())}}function mI(e,t,n,r,a,l){var c={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},d=a.offline.numberOfParallelDownloads,p=0;return gI(r,n.presentationTimeline.mb(),function(x){var C=A0(x),b=void 0;if(!l.has(C)){var k=x.endTime-x.startTime;k=ew(t,r.id)*k,k=B2(e.g,k),l.set(C,new N2(x,k,p,!1))}x.$&&(b=A0(x.$),l.has(b)||(k=.5*ew(t,r.id),k=B2(e.g,k),l.set(b,new N2(x.$,k,p,!0)))),c.segments.push({pendingInitSegmentRefId:b,initSegmentKey:b?0:null,startTime:x.startTime,endTime:x.endTime,appendWindowStart:x.appendWindowStart,appendWindowEnd:x.appendWindowEnd,timestampOffset:x.timestampOffset,tilesLayout:x.tilesLayout,pendingSegmentRefId:C,dataKey:0,mimeType:x.mimeType,codecs:x.codecs}),p=(p+1)%d}),c}function gI(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function ei(e){if(e.l.g)throw new ne(2,9,7001)}function Nc(){if(!P0())throw new ne(2,9,9e3)}function N0(e,t){return G(function(n){return n.g==1?(e.i.push(t),ee(n,2),A(n,t,4)):n.g!=2?n.return(n.h):(ie(n),Ht(e.i,t),ue(n,0))})}function yI(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Ht(e.i,n)})}function vI(e){var t=new Set;e=T(e.streams);for(var n=e.next();!n.done;n=e.next()){n=T(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function xI(e,t,n,r){var a,l,c;return G(function(d){return d.g==1?r.drmInfo?(a=$3(n),l=r.sessionIds.map(function(p){return{sessionId:p,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:rw(r,!1),videoCapabilities:rw(r,!0)}}),A(d,Z2(t,e,l),2)):d.return():d.g!=3?(c=d.h,A(d,a.remove(c),3)):A(d,a.add(l.filter(function(p){return!c.includes(p.sessionId)})),0)})}function sw(e){for(var t=new Set,n=T(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=T(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=T(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function wI(e){e.variants.map(function(l){return l.video});var t=new Set(e.variants.map(function(l){return l.audio}));e=e.textStreams;for(var n=T(t),r=n.next();!r.done;r=n.next()){r=T(t);for(var a=r.next();!a.done;a=r.next());}for(t=T(e),n=t.next();!n.done;n=t.next())for(n=T(e),r=n.next();!r.done;r=n.next());}me("shaka.offline.Storage",qn),qn.deleteAll=function(){var e;return G(function(t){return t.g==1?(e=new wi,ee(t,2),A(t,z3(e),2)):t.g!=5?(ie(t),A(t,e.destroy(),5)):ue(t,0)})},qn.prototype.list=qn.prototype.list,qn.prototype.removeEmeSessions=qn.prototype.Li,qn.prototype.remove=qn.prototype.remove,qn.prototype.store=qn.prototype.store,qn.prototype.getNetworkingEngine=qn.prototype.xb,qn.prototype.getConfiguration=qn.prototype.getConfiguration,qn.prototype.configure=qn.prototype.configure,qn.prototype.destroy=qn.prototype.destroy,qn.support=P0;var SI=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");Op.offline=P0;function Yn(){}function fi(e,t){for(e={priority:t||0,callback:e},t=0;t<Ju.length;t++)if(Ju[t].priority<e.priority){Ju.splice(t,0,e);return}Ju.push(e)}me("shaka.polyfill",Yn),Yn.register=fi,Yn.installAll=function(){for(var e=T(Ju),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){He("Error installing polyfill!",n)}}};var Ju=[];function el(){this.g=new ls}function aw(){h.AbortController||(h.AbortController=el,h.AbortSignal=ls)}el.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Fe("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(el.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Yn.AbortController=el,el.install=aw;function ls(){this.h=!1,this.g=void 0,this.onabort=null,this.i=new Bt}ls.prototype.addEventListener=function(e,t,n){return this.i.addEventListener(e,t,n)},ls.prototype.removeEventListener=function(e,t,n){return this.i.removeEventListener(e,t,n)},ls.prototype.dispatchEvent=function(e){return this.i.dispatchEvent(e)},ls.prototype.throwIfAborted=function(){if(this.h)throw this.g},y.Object.defineProperties(ls.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),fi(aw);function uw(){}function lw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=T(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())CI(t.value)}function CI(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Yn.Aria=uw,uw.install=lw,fi(lw);function fw(){}function cw(){MS()}Yn.EncryptionScheme=fw,fw.install=cw,fi(cw,-2);function hw(){}function dw(){if(h.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",va),document.addEventListener("webkitfullscreenerror",va),document.addEventListener("mozfullscreenchange",va),document.addEventListener("mozfullscreenerror",va),document.addEventListener("MSFullscreenChange",va),document.addEventListener("MSFullscreenError",va)}}function va(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Yn.Fullscreen=hw,hw.install=dw,fi(dw);function Uc(){}function pw(){var e=!0;!Bi()||Bi()&&Kl()||Bi()&&Wt("Fuchsia")||(e=!1),(Cs()||Xl()||Bo()||Uo()||No()||Wt("PC=EOS")||ql())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),mw=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=TI)}function TI(e){var t,n,r,a,l,c,d,p,x,C,b;return G(function(k){switch(k.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(a=n.contentType,l=tu(a),!l)||r&&(c=r.contentType,d=tu(c),!d))return k.return(t)}else return k.return(t);k.u(2);break}if(!ko())return k.return(t);if(!n){k.u(3);break}return A(k,bI(n),4);case 4:if(p=k.h,!p)return k.return(t);case 3:if(r){var E=r.contentType;if(Bi()&&r.spatialRendering&&(E+="; spatialRendering=true"),x=Ne(E),!x)return k.return(t)}case 2:return e.keySystemConfiguration?(C=e.keySystemConfiguration,A(k,EI(n,r,C),6)):(t.supported=!0,k.return(t));case 6:(b=k.h)&&(t.supported=!0,t.keySystemAccess=b);case 5:return k.return(t)}})}function bI(e){var t,n;return G(function(r){return r.g==1?Bi()?A(r,kI(e),3):No()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),r.return(Ne(t))):r.u(2):r.g!=2?(n=r.h,r.return(n)):r.return(Ne(e.contentType))})}function EI(e,t,n){var r,a,l,c,d,p,x,C,b;return G(function(k){switch(k.g){case 1:if(r=[],a=[],n.audio&&(l={robustness:n.audio.robustness||"",contentType:t.contentType},No()&&t.contentType.includes('codecs="ac-3"')&&(l.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(l.encryptionScheme=n.audio.encryptionScheme),r.push(l)),n.video&&(c={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(c.encryptionScheme=n.video.encryptionScheme),a.push(c)),d={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(d.audioCapabilities=r),a.length&&(d.videoCapabilities=a),p=e?e.contentType:"",x=t?t.contentType:"",C=n.keySystem,b=null,Q(k,2),Hl.has(p+"#"+x+"#"+C)){b=Hl.get(p+"#"+x+"#"+C)||null,k.u(4);break}return A(k,navigator.requestMediaKeySystemAccess(n.keySystem,[d]),5);case 5:b=k.h,Hl.set(p+"#"+x+"#"+C,b);case 4:q(k,3);break;case 2:W(k);case 3:return k.return(b)}})}function kI(e){var t,n;return G(function(r){return r.g==1?h.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in Bc?(n=Bc[t],r.u(2)):A(r,cast.__platform__.canDisplayType(t),3)):r.return(Ne(e.contentType)):(r.g!=2&&(n=r.h,Bc[t]=n),r.return(n))})}Yn.MediaCapabilities=Uc,Uc.install=pw;var mw=null;Uc.originalMcap=mw;var Bc={};Uc.memoizedCanDisplayTypeRequests_=Bc,fi(pw,-1);function gw(){}function yw(){var e=Ts();(h.MediaSource||h.ManagedMediaSource)&&(e&&h.MediaSource?10>=e?h.MediaSource=null:12>=e?(U0(),vw()):15>=e&&U0():Wt("DT_STB_BCM")?(U0(),vw()):(Gl()||iu()||Wt("Tizen 4"))&&II()),(h.MediaSource||h.ManagedMediaSource)&&AI(),h.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&MI()}function U0(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Ie.apply(0,arguments));return t.abort=function(){},t}}function vw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function AI(){if(h.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return Ql(n)!="mp2t"&&e(n)}}if(h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);h.ManagedMediaSource.isTypeSupported=function(n){return Ql(n)!="mp2t"&&t(n)}}}function II(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return As(n)!="opus"&&e(n)},h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);h.ManagedMediaSource.isTypeSupported=function(n){return As(n)!="opus"&&t(n)}}}function MI(){var e=MediaSource.isTypeSupported;Uo()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(c){return c.startsWith("codecs=")});if(0>r)return e(t);var a=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),l=a.findIndex(function(c){return c.startsWith("vp09")});return 0<=l&&(a[l]="vp9",n[r]='codecs="'+a.join(",")+'"',t=n.join("; ")),e(t)})}Yn.MediaSource=gw,gw.install=yw,fi(yw);function xw(){}function ww(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?_I():h.orientation!=null&&RI())}function _I(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function RI(){function e(){switch(h.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new jc;screen.orientation=t,e(),h.addEventListener("orientationchange",function(){e();var n=new Fe("change");t.dispatchEvent(n)})}Yn.Orientation=xw,xw.install=ww;function jc(){Bt.call(this),this.type="",this.angle=0}$(jc,Bt),jc.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},jc.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},fi(ww);function B0(){}var j0,F0,$0,z0,V0,H0;function LI(e,t){try{var n=new Fc(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function DI(e){var t=this.mediaKeys;return t&&t!=e&&Sw(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Sw(e,this):Promise.resolve()}function PI(e){if(e=Me(e.initData),Qt(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Wo(e.subarray(4),!0),e=Ao(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=yn(e),this.dispatchEvent(t)}Yn.PatchedMediaKeysApple=B0,B0.uninstall=function(){j0&&(j0=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",F0),HTMLMediaElement.prototype.setMediaKeys=$0,h.MediaKeys=z0,h.MediaKeySystemAccess=V0,navigator.requestMediaKeySystemAccess=H0,F0=H0=$0=V0=z0=null,h.shakaMediaKeysPolyfill="")},B0.install=function(e){h.HTMLVideoElement&&h.WebKitMediaKeys&&(e!==void 0&&e&&(j0=!0,F0=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),$0=HTMLMediaElement.prototype.setMediaKeys,z0=h.MediaKeys,V0=h.MediaKeySystemAccess,H0=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=DI,h.MediaKeys=tl,h.MediaKeySystemAccess=Fc,navigator.requestMediaKeySystemAccess=LI,h.shakaMediaKeysPolyfill=OI)};function Fc(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=T(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,a=!1;if(n.audioCapabilities)for(var l=T(n.audioCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.audioCapabilities.push(c),a=!0));if(n.videoCapabilities)for(n=T(n.videoCapabilities),l=n.next();!l.done;l=n.next())l=l.value,l.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(t.videoCapabilities.push(l),a=!0));r||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=a?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Fc.prototype.createMediaKeys=function(){var e=new tl(this.keySystem);return Promise.resolve(e)},Fc.prototype.getConfiguration=function(){return this.g};function tl(e){this.h=new WebKitMediaKeys(e),this.g=new Ae}tl.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new G0(this.h)},tl.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Sw(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",PI);try{return Hs(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}tl.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function G0(e){Bt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ae,this.sessionId="",this.expiration=NaN,this.closed=new Xt,this.keyStatuses=new Cw}$(G0,Bt),s=G0.prototype,s.generateRequest=function(e,t){var n=this;this.h=new Xt;try{var r=this.l.createSession("video/mp4",Me(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(a){n.h&&(n.h.resolve(),n.h=null),a=new Map().set("messageType",n.keyStatuses.Yb()==null?"license-request":"license-renewal").set("message",yn(a.message)),a=new Fe("message",a),n.dispatchEvent(a)}),this.j.D(r,"webkitkeyadded",function(){n.g&&($c(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var a=Error("EME PatchedMediaKeysApple key error");if(a.errorCode=n.i.error,n.h!=null)n.h.reject(a),n.h=null;else if(n.g!=null)n.g.reject(a),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:$c(n,"output-not-allowed");break;default:$c(n,"internal-error")}}),$c(this,"status-pending")}catch(a){this.h.reject(a)}return this.h},s.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},s.update=function(e){this.g=new Xt;try{this.i.update(Me(e))}catch(t){this.g.reject(t)}return this.g},s.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},s.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function $c(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Fe("keystatuseschange"),e.dispatchEvent(t)}function Cw(){this.size=0,this.g=void 0}s=Cw.prototype,s.Yb=function(){return this.g},s.forEach=function(e){this.g&&e(this.g,Vl.value())},s.get=function(e){if(this.has(e))return this.g},s.has=function(e){var t=Vl.value();return!!(this.g&&In(e,t))},s.entries=function(){},s.keys=function(){},s.values=function(){};var OI="apple";function Tw(){}function bw(){h.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||iu()||Wt("Tizen 4")||Wt("Tizen 5.0")||Wl())&&(MediaKeys.prototype.setServerCertificate=NI)}function NI(){return Promise.resolve(!1)}Yn.PatchedMediaKeysCert=Tw,Tw.install=bw,fi(bw);function Ew(){}function kw(){!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=UI,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=BI,h.MediaKeys=zc,h.MediaKeySystemAccess=W0,h.shakaMediaKeysPolyfill=jI)}function UI(){return Promise.reject(Error("The key system specified is not supported."))}function BI(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Yn.PatchedMediaKeysNop=Ew,Ew.install=kw;function zc(){throw new TypeError("Illegal constructor.")}zc.prototype.createSession=function(){},zc.prototype.setServerCertificate=function(){},zc.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function W0(){throw this.keySystem="",new TypeError("Illegal constructor.")}W0.prototype.getConfiguration=function(){},W0.prototype.createMediaKeys=function(){};var jI="nop";fi(kw,-10);function Aw(){}function Iw(){if(!(!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Q0="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=FI,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$I,h.MediaKeys=nl,h.MediaKeySystemAccess=Vc,h.shakaMediaKeysPolyfill=zI}}function X0(e){var t=Q0;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function FI(e,t){try{var n=new Vc(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function $I(e){var t=this.mediaKeys;return t&&t!=e&&Mw(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Mw(e,this),Promise.resolve()}Yn.PatchedMediaKeysWebkit=Aw,Aw.install=Iw;function Vc(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,a=document.getElementsByTagName("video");a=a.length?a[0]:document.createElement("video"),t=T(t);for(var l=t.next();!l.done;l=t.next()){l=l.value;var c={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:l.initDataTypes,sessionTypes:["temporary"],label:l.label},d=!1;if(l.audioCapabilities)for(var p=T(l.audioCapabilities),x=p.next();!x.done;x=p.next())x=x.value,x.contentType&&(d=!0,a.canPlayType(x.contentType.split(";")[0],this.g)&&(c.audioCapabilities.push(x),r=!0));if(l.videoCapabilities)for(p=T(l.videoCapabilities),x=p.next();!x.done;x=p.next())x=x.value,x.contentType&&(d=!0,a.canPlayType(x.contentType,this.g)&&(c.videoCapabilities.push(x),r=!0));if(d||(r=a.canPlayType("video/mp4",this.g)||a.canPlayType("video/webm",this.g)),l.persistentState=="required"&&(n?(c.persistentState="required",c.sessionTypes=["persistent-license"]):r=!1),r){this.h=c;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Vc.prototype.createMediaKeys=function(){var e=new nl(this.g);return Promise.resolve(e)},Vc.prototype.getConfiguration=function(){return this.h};function nl(e){this.l=e,this.h=null,this.g=new Ae,this.i=[],this.j=new Map}function Mw(e,t){e.h=t,e.g.Ra();var n=Q0;t&&(e.g.D(t,n+"needkey",function(r){var a=new CustomEvent("encrypted");a.initDataType="cenc",a.initData=yn(r.initData),e.h.dispatchEvent(a)}),e.g.D(t,n+"keymessage",function(r){var a=q0(e,r.sessionId);a&&(r=new Map().set("messageType",a.keyStatuses.Yb()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new Fe("message",r),a.h&&(a.h.resolve(),a.h=null),a.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=q0(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var a=q0(e,r.sessionId);if(a){var l=Error("EME v0.1b key error"),c=r.errorCode;c.systemCode=r.systemCode,l.errorCode=c,!r.sessionId&&a.h?(r.systemCode==45&&(l.message="Unsupported session type."),a.h.reject(l),a.h=null):r.sessionId&&a.g?(a.g.reject(l),a.g=null):(l=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Hc(a,"output-restricted"):l==1?Hc(a,"expired"):Hc(a,"internal-error"))}}))}nl.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new K0(t,this.l,e),this.i.push(e),e},nl.prototype.setServerCertificate=function(){return Promise.resolve(!1)},nl.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function q0(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function K0(e,t,n){Bt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Xt,this.keyStatuses=new Rw}$(K0,Bt),s=K0.prototype,s.ready=function(){Hc(this,"usable"),this.g&&this.g.resolve(),this.g=null};function _w(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Me(Ao("LOAD_SESSION|"+n));else{var a=Ao("PERSISTENT|");r=vn(a,t)}else r=Me(t)}catch(c){return Promise.reject(c)}e.h=new Xt;var l=X0("generateKeyRequest");try{e.j[l](e.i,r)}catch(c){if(c.name!="InvalidStateError")return e.h=null,Promise.reject(c);new Et(function(){try{e.j[l](e.i,r)}catch(d){e.h.reject(d),e.h=null}}).Y(.01)}return e.h}function Y0(e,t,n){if(e.g)e.g.then(function(){return Y0(e,t,n)}).catch(function(){return Y0(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=nn(n),a=JSON.parse(r);a.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Yi(a.keys[0].k),a=Yi(a.keys[0].kid)}else r=Me(n),a=null;var l=X0("addKey");try{e.j[l](e.i,r,a,e.sessionId)}catch(c){e.g.reject(c),e.g=null}}}function Hc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Fe("keystatuseschange"),e.dispatchEvent(t)}s.generateRequest=function(e,t){return _w(this,t,null)},s.load=function(e){return this.l=="persistent-license"?_w(this,null,e):Promise.reject(Error("Not a persistent session."))},s.update=function(e){var t=new Xt;return Y0(this,t,e),t},s.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=X0("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},s.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Rw(){this.size=0,this.g=void 0}s=Rw.prototype,s.Yb=function(){return this.g},s.forEach=function(e){this.g&&e(this.g,Vl.value())},s.get=function(e){if(this.has(e))return this.g},s.has=function(e){var t=Vl.value();return!!(this.g&&In(e,t))},s.entries=function(){},s.keys=function(){},s.values=function(){};var Q0="",zI="webkit";fi(Iw);function Lw(){}function Dw(){if(h.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=HI,Object.defineProperty(e,"disablePictureInPicture",{get:WI,set:XI,enumerable:!0,configurable:!0}),document.exitPictureInPicture=GI,document.addEventListener("webkitpresentationmodechanged",VI,!0))}}function VI(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function HI(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function GI(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function WI(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function XI(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Yn.PiPWebkit=Lw,Lw.install=Dw,fi(Dw);function Pw(){}function Ow(){h.crypto&&("randomUUID"in h.crypto||(h.crypto.randomUUID=qI))}function qI(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Yn.RandomUUID=Pw,Pw.install=Ow,fi(Ow);function Nw(){}function Uw(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:KI})}function KI(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Yn.Symbol=Nw,Nw.install=Uw,fi(Uw);function Bw(){}function jw(){if(h.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Yn.VideoPlayPromise=Bw,Bw.install=jw,fi(jw);function Fw(){}function $w(){if(h.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||Wl())&&(e.getVideoPlaybackQuality=YI)}}function YI(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Yn.VideoPlaybackQuality=Fw,Fw.install=$w,fi($w);function zw(){}function Vw(){if(!h.VTTCue&&h.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=Z0;else if(t==6)e=QI;else{try{var n=!!Z0(1,2,"")}catch{n=!1}n&&(e=Z0)}e&&(h.VTTCue=function(r,a,l){return e(r,a,l)})}}function Z0(e,t,n){return new h.TextTrackCue(e,t,n)}function QI(e,t,n){return new h.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Yn.VTTCue=zw,zw.install=Vw,fi(Vw);function $i(){}$i.prototype.parseInit=function(){},$i.prototype.setSequenceMode=function(){},$i.prototype.setManifestType=function(){},$i.prototype.parseMedia=function(e,t){var n=null,r=[];e=nn(e).split(/\r?\n/),e=T(e);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&!/^\s+$/.test(a)&&(a=ZI.exec(a))){var l=JI.exec(a[1]);l=60*parseInt(l[1],10)+parseFloat(l[2].replace(",",".")),a=new Lt(l,t.segmentEnd?t.segmentEnd:l+2,a[2]),n&&(n.endTime=l,r.push(n)),n=a}return n&&r.push(n),r},me("shaka.text.LrcTextParser",$i),$i.prototype.parseMedia=$i.prototype.parseMedia,$i.prototype.setManifestType=$i.prototype.setManifestType,$i.prototype.setSequenceMode=$i.prototype.setSequenceMode,$i.prototype.parseInit=$i.prototype.parseInit;var ZI=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,JI=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Pn["application/x-subtitle-lrc"]=function(){return new $i};function Li(){}Li.prototype.parseInit=function(){},Li.prototype.setSequenceMode=function(){},Li.prototype.setManifestType=function(){},Li.prototype.parseMedia=function(e,t,n){var r=nn(e);if(e=[],r=="")return e;var a=Bs(r,"tt");if(!a)throw new ne(2,2,2005,"Failed to parse TTML.");if(r=go(a,"body")[0],!r)return[];var l=Fo(a,il,"frameRate"),c=Fo(a,il,"subFrameRate"),d=Fo(a,il,"frameRateMultiplier"),p=Fo(a,il,"tickRate"),x=Fo(a,il,"cellResolution"),C=a.attributes["xml:space"]||"default",b=Fo(a,Xc,"extent");if(C!="default"&&C!="preserve")throw new ne(2,2,2005,"Invalid xml:space value: "+C);C=C=="default",l=new nM(l,c,d,p),x=x&&(x=/^(\d+) (\d+)$/.exec(x))?{dc:parseInt(x[1],10),rows:parseInt(x[2],10)}:null,c=(c=go(a,"metadata")[0])?c.children:[],d=go(a,"style"),a=go(a,"region"),p=[];for(var k=T(a),E=k.next();!E.done;E=k.next()){var M=E.value;E=new Wn;var R=M.attributes["xml:id"];if(R){E.id=R;var _=null;b&&(_=nm.exec(b)||im.exec(b)),R=_?Number(_[1]):null,_=_?Number(_[2]):null;var j,U=Gc(M,d,"extent");if(U){var K=(j=nm.exec(U))||im.exec(U);K!=null&&(E.width=Number(K[1]),E.height=Number(K[2]),j||(R!=null&&(E.width=100*E.width/R),_!=null&&(E.height=100*E.height/_)),E.widthUnits=j||R!=null?Ct:0,E.heightUnits=j||_!=null?Ct:0)}(M=Gc(M,d,"origin"))&&(K=(j=nm.exec(M))||im.exec(M),K!=null&&(E.viewportAnchorX=Number(K[1]),E.viewportAnchorY=Number(K[2]),j?U||(E.width=100-E.viewportAnchorX,E.widthUnits=Ct,E.height=100-E.viewportAnchorY,E.heightUnits=Ct):(_!=null&&(E.viewportAnchorY=100*E.viewportAnchorY/_),R!=null&&(E.viewportAnchorX=100*E.viewportAnchorX/R)),E.viewportAnchorUnits=j||R!=null?Ct:0))}else E=null;E&&p.push(E)}if(Jt(r,"p").length)throw new ne(2,2,2001,"<p> can only be inside <div> in TTML");for(b=T(Jt(r,"div")),k=b.next();!k.done;k=b.next())if(Jt(k.value,"span").length)throw new ne(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Hw(r,t,l,c,d,a,p,C,x,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function Hw(e,t,n,r,a,l,c,d,p,x,C,b){var k=x;if(ff(e)){if(!C)return null;var E={tagName:"span",children:[On(e)],attributes:{},parent:null}}else E=e;for(var M=null,R=T(eS),_=R.next();!_.done&&!(M=Wc(E,"backgroundImage",r,"#",_.value)[0]);_=R.next());R=null;var j=Fo(E,eS,"backgroundImage");if(b&&j&&!j.startsWith("#")&&(_=new Tn(b),j=new Tn(j),(_=_.resolve(j).toString())&&(R=_)),(e.tagName=="p"||M||R)&&(C=!0),e=C,_=(E.attributes["xml:space"]||(d?"default":"preserve"))=="default",j=E.children.every(ff),d=[],!j)for(var U=T(E.children),K=U.next();!K.done;K=U.next())(K=Hw(K.value,t,n,r,a,l,c,_,p,E,C,b))&&d.push(K);if(r=x!=null,b=On(E),b=E.children.length&&b&&/\S/.test(b),K=E.attributes.begin||E.attributes.end||E.attributes.dur,!(K||b||E.tagName=="br"||d.length!=0||r&&!_))return null;for(U=Xw(E,n),b=U.start,U=U.end;k&&k.tagName&&k.tagName!="tt";)U=tM(k,n,b,U),b=U.start,U=U.end,k=k.parent;if(b==null&&(b=0),b+=t.periodStart,U=U==null?1/0:U+t.periodStart,b=Math.max(b,t.segmentStart),U=Math.min(U,t.segmentEnd),!K&&0<d.length)for(b=1/0,U=0,t=T(d),n=t.next();!n.done;n=t.next())n=n.value,b=Math.min(b,n.startTime),U=Math.max(U,n.endTime);if(E.tagName=="br")return a=new Lt(b,U,""),a.lineBreak=!0,a;if(t="",j&&(t=mi(On(E)||""),_&&(t=t.replace(/\s+/g," "))),t=new Lt(b,U,t),t.nestedCues=d,C||(t.isContainer=!0),p&&(t.cellResolution=p),p=Wc(E,"region",l,"")[0],E.attributes.region&&p&&p.attributes["xml:id"]){var O=p.attributes["xml:id"];t.region=c.filter(function(V){return V.id==O})[0]}return c=p,x&&r&&!E.attributes.region&&!E.attributes.style&&(c=Wc(x,"region",l,"")[0]),eM(t,E,c,M,R,a,e,d.length==0),t}function eM(e,t,n,r,a,l,c,d){if(c=c||d,ti(t,n,l,"direction",c)=="rtl"&&(e.direction="rtl"),d=ti(t,n,l,"writingMode",c),d=="tb"||d=="tblr"?e.writingMode="vertical-lr":d=="tbrl"?e.writingMode="vertical-rl":d=="rltb"||d=="rl"?e.direction="rtl":d&&(e.direction=bo),(d=ti(t,n,l,"textAlign",!0))?(e.positionAlign=rM[d],e.lineAlign=oM[d],e.textAlign=_e[d.toUpperCase()]):e.textAlign=lt,(d=ti(t,n,l,"displayAlign",!0))&&(e.displayAlign=lo[d.toUpperCase()]),(d=ti(t,n,l,"color",c))&&(e.color=d),(d=ti(t,n,l,"backgroundColor",c))&&(e.backgroundColor=d),(d=ti(t,n,l,"border",c))&&(e.border=d),d=ti(t,n,l,"fontFamily",c))switch(d){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=d.split(",").filter(function(p){return p!="default"}).join(",")}switch((d=ti(t,n,l,"fontWeight",c))&&d=="bold"&&(e.fontWeight=700),d=ti(t,n,l,"wrapOption",c),e.wrapLine=!(d&&d=="noWrap"),(d=ti(t,n,l,"lineHeight",c))&&d.match(xa)&&(e.lineHeight=d),(d=ti(t,n,l,"fontSize",c))&&(d.match(xa)||d.match(iM))&&(e.fontSize=d),(d=ti(t,n,l,"fontStyle",c))&&(e.fontStyle=Vr[d.toUpperCase()]),r?(a=r.attributes.imageType||r.attributes.imagetype,d=r.attributes.encoding,r=On(r).trim(),a=="PNG"&&d=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):a&&(e.backgroundImage=a),(r=ti(t,n,l,"textOutline",c))&&(r=r.split(" "),r[0].match(xa)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(xa)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=ti(t,n,l,"letterSpacing",c))&&r.match(xa)&&(e.letterSpacing=r),(r=ti(t,n,l,"linePadding",c))&&r.match(xa)&&(e.linePadding=r),(r=ti(t,n,l,"opacity",c))&&(e.opacity=parseFloat(r)),(r=Gc(n,l,"textDecoration"))&&Gw(e,r),(r=J0(t,l,"textDecoration"))&&Gw(e,r),(r=ti(t,n,l,"textCombine",c))&&(e.textCombineUpright=r),ti(t,n,l,"ruby",c)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function Gw(e,t){t=T(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ht(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ht(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ht(e.textDecoration,"overline")}}function ti(e,t,n,r,a){return a=a===void 0?!0:a,(e=J0(e,n,r))?e:a?Gc(t,n,r):null}function Gc(e,t,n){if(!e)return null;var r=Fo(e,Xc,n);return r||Ww(e,t,n)}function J0(e,t,n){var r=Fo(e,Xc,n);return r||Ww(e,t,n)}function Ww(e,t,n){e=Wc(e,"style",t,"");for(var r=null,a=0;a<e.length;a++){var l=Jo(e[a],"urn:ebu:tt:style",n);l||(l=Fo(e[a],Xc,n)),l||(l=J0(e[a],t,n)),l&&(r=l)}return r}function Wc(e,t,n,r,a){var l=[];if(!e||1>n.length)return l;var c=e;for(e=null;!e&&!(e=a?Jo(c,a,t):c.attributes[t])&&(c=c.parent,c););if(t=e){for(t=T(t.split(" ")),a=t.next();!a.done;a=t.next())for(a=a.value,e=T(n),c=e.next();!c.done;c=e.next())if(c=c.value,r+c.attributes["xml:id"]==a){l.push(c);break}}return l}function tM(e,t,n,r){return e=Xw(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function Xw(e,t){var n=em(e.attributes.begin,t),r=em(e.attributes.end,t);return e=em(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function em(e,t){var n=null;if(qw.test(e)){e=qw.exec(e),n=Number(e[1]);var r=Number(e[2]),a=Number(e[3]),l=Number(e[4]);l+=(Number(e[5])||0)/t.h,a+=l/t.frameRate,n=a+60*r+3600*n}else if(Kw.test(e))n=tm(Kw,e);else if(Yw.test(e))n=tm(Yw,e);else if(Qw.test(e))e=Qw.exec(e),n=Number(e[1])/t.frameRate;else if(Zw.test(e))e=Zw.exec(e),n=Number(e[1])/t.g;else if(Jw.test(e))n=tm(Jw,e);else if(e)throw new ne(2,2,2001,"Could not parse cue time range in TTML");return n}function tm(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}me("shaka.text.TtmlTextParser",Li),Li.prototype.parseMedia=Li.prototype.parseMedia,Li.prototype.setManifestType=Li.prototype.setManifestType,Li.prototype.setSequenceMode=Li.prototype.setSequenceMode,Li.prototype.parseInit=Li.prototype.parseInit;function nM(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var nm=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,iM=/^(\d{1,4}(?:\.\d+)?|100)%$/,xa=/^(\d+px|\d+em|\d*\.?\d+c)$/,im=/^(\d+)px (\d+)px$/,qw=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Kw=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Yw=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,Qw=/^(\d*(?:\.\d*)?)f$/,Zw=/^(\d*(?:\.\d*)?)t$/,Jw=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),oM={left:Eo,center:"center",right:"end",start:Eo,end:"end"},rM={left:"line-left",center:"center",right:"line-right"},il=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Xc=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],eS=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Pn["application/ttml+xml"]=function(){return new Li};function Kn(){this.g=new Li}Kn.prototype.parseInit=function(e){var t=!1;if(new Yt().box("moov",At).box("trak",At).box("mdia",At).box("minf",At).box("stbl",At).S("stsd",Sr).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new ne(2,2,2007)},Kn.prototype.setSequenceMode=function(){},Kn.prototype.setManifestType=function(){},Kn.prototype.parseMedia=function(e,t,n){var r=this,a=!1,l=[];if(new Yt().box("mdat",Ns(function(c){a=!0,l=l.concat(r.g.parseMedia(c,t,n))})).parse(e,!1),!a)throw new ne(2,2,2007);return l},me("shaka.text.Mp4TtmlParser",Kn),Kn.prototype.parseMedia=Kn.prototype.parseMedia,Kn.prototype.setManifestType=Kn.prototype.setManifestType,Kn.prototype.setSequenceMode=Kn.prototype.setSequenceMode,Kn.prototype.parseInit=Kn.prototype.parseInit,Pn['application/mp4; codecs="stpp"']=function(){return new Kn},Pn['application/mp4; codecs="stpp.ttml"']=function(){return new Kn},Pn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Kn},Pn['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new Kn},Pn['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new Kn},Pn['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new Kn},Pn['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new Kn},Pn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Kn};function ci(){this.h=!1,this.g="UNKNOWN"}ci.prototype.parseInit=function(){},ci.prototype.setSequenceMode=function(e){this.h=e},ci.prototype.setManifestType=function(e){this.g=e},ci.prototype.parseMedia=function(e,t){e=nn(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new ne(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new ne(2,2,2e3);if(e=qc(new kr(e[1])),e==null)throw new ne(2,2,2e3);r=Number(r[1]);for(var a=t.segmentStart-t.periodStart;95443.7176888889<=a;)a-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else e=t.segmentStart;for(t=[],r=T(n[0].split(`
`)),a=r.next();!a.done;a=r.next())if(a=a.value,/^Region:/.test(a)){a=new kr(a);var l=new Wn;is(a),ia(a);for(var c=is(a);c;){var d=l,p=c;(c=/^id=(.*)$/.exec(p))?d.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(p))?d.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(p))?(d.height=Number(c[1]),d.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(d.regionAnchorX=Number(c[1]),d.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(d.viewportAnchorX=Number(c[1]),d.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(p)&&(d.scroll="up"),ia(a),c=is(a)}t.push(l)}for(r=new Map,tS(r),a=[],n=T(n.slice(1)),l=n.next();!l.done;l=n.next()){if(l=l.value.split(`
`),(l.length!=1||l[0])&&!/^NOTE($|[ \t])/.test(l[0])&&l[0]=="STYLE"){for(d=[],c=-1,p=1;p<l.length;p++)l[p].includes("::cue")&&(d.push([]),c=d.length-1),c!=-1&&(d[c].push(l[p]),l[p].includes("}")&&(c=-1));for(d=T(d),c=d.next();!c.done;c=d.next()){var x=c.value;c="global",(p=x[0].match(/\((.*)\)/))&&(c=p.pop()),p=x.slice(1,-1),x[0].includes("}")&&(x=/\{(.*?)\}/.exec(x[0]))&&(p=x[1].split(";")),(x=r.get(c))||(x=new Lt(0,0,""));for(var C=!1,b=0;b<p.length;b++){var k=/^\s*([^:]+):\s*(.*)/.exec(p[b]);if(k){var E=k[2].trim().replace(";","");switch(k[1].trim()){case"background-color":case"background":C=!0,x.backgroundColor=E;break;case"color":C=!0,x.color=E;break;case"font-family":C=!0,x.fontFamily=E;break;case"font-size":C=!0,x.fontSize=E;break;case"font-weight":(700<=parseInt(E,10)||E=="bold")&&(C=!0,x.fontWeight=700);break;case"font-style":switch(E){case"normal":C=!0,x.fontStyle=Go;break;case"italic":C=!0,x.fontStyle="italic";break;case"oblique":C=!0,x.fontStyle="oblique"}break;case"opacity":C=!0,x.opacity=parseFloat(E);break;case"text-combine-upright":C=!0,x.textCombineUpright=E;break;case"text-shadow":C=!0,x.textShadow=E;break;case"white-space":C=!0,x.wrapLine=E!="noWrap"}}}C&&r.set(c,x)}}if(x=l,C=e,x.length==1&&!x[0]||/^NOTE($|[ \t])/.test(x[0])||x[0]=="STYLE"||x[0]=="REGION")l=null;else if(l=null,x[0].includes("-->")||(l=x[0],x.splice(0,1)),d=new kr(x[0]),c=qc(d),b=rr(d,/[ \t]+--\x3e[ \t]+/g),p=qc(d),c==null||b==null||p==null)He("Failed to parse VTT time code. Cue skipped:",l,x),l=null;else{for(c+=C,p+=C,x=x.slice(1).join(`
`).trim(),r.has("global")?(C=r.get("global").clone(),C.startTime=c,C.endTime=p,C.payload=""):C=new Lt(c,p,""),ia(d),c=is(d);c;)oS(C,c,t),ia(d),c=is(d);nS(x,C,r),l!=null&&(C.id=l),l=C}l&&a.push(l)}return a};function tS(e){for(var t=T(Object.entries(Gt)),n=t.next();!n.done;n=t.next()){var r=T(n.value);n=r.next().value,r=r.next().value;var a=new Lt(0,0,"");a.color=r,e.set("."+n,a)}for(t=T(Object.entries(bt)),n=t.next();!n.done;n=t.next())r=T(n.value),n=r.next().value,r=r.next().value,a=new Lt(0,0,""),a.backgroundColor=r,e.set("."+n,a)}function nS(e,t,n){if(e.includes("<")){n.size===0&&tS(n);var r=e;e=[];for(var a=-1,l=0;l<r.length;l++)r[l]==="<"?a=l+1:r[l]===">"&&0<a&&(a=r.substr(a,l-a),a.match(rS)&&e.push(a),a=-1);for(e=T(e),l=e.next();!l.done;l=e.next())l=l.value,r=r.replace("<"+l+">",'<div time="'+l+'">'),r+="</div>";e=r;e:{l=e,a=[];var c=-1;e="",r=!1;for(var d=0;d<l.length;d++)if(l[d]==="/"){var p=l.indexOf(">",d);if(p===-1){e=l;break e}if((p=l.substring(d+1,p))&&p=="v"){r=!0;var x=null;if(a.length&&(x=a[a.length-1]),x){if(x===p)e+="/"+p+">";else{if(!x.startsWith("v")){e+=l[d];continue}e+="/"+x+">"}d+=p.length+1}else e+=l[d]}else e+=l[d]}else l[d]==="<"?(c=d+1,l[c]!="v"&&(c=-1)):l[d]===">"&&0<c&&(a.push(l.substr(c,d-c)),c=-1),e+=l[d];for(l=T(a),a=l.next();!a.done;a=l.next())a=a.value,c=a.replace(" ",".voice-"),e=e.replace("<"+a+">","<"+c+">"),e=e.replace("</"+a+">","</"+c+">"),r||(e+="</"+c+">")}e=sM(e);try{var C=Bs("<span>"+e+"</span>","span")}catch{}if(C)if(C=C.children,C.length!=1||C[0].tagName)for(C=T(C),e=C.next();!e.done;e=C.next())iS(e.value,t,n);else t.payload=mi(e);else t.payload=mi(e)}else t.payload=mi(e)}function sM(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(a){return t[a]||""}):e||""}function ol(e,t){return e&&0<e.length?e:t}function iS(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Wn,r.position=null,r.size=0,e.tagName)for(var a=T(e.tagName.split(/(?=[ .])+/g)),l=a.next();!l.done;l=a.next()){var c=l=l.value;if(c.startsWith(".voice-")){var d=c.split("-").pop();c='v[voice="'+d+'"]',n.has(c)||(c="v[voice="+d+"]")}switch(n.has(c)&&(d=r,c=n.get(c))&&(d.backgroundColor=ol(c.backgroundColor,d.backgroundColor),d.color=ol(c.color,d.color),d.fontFamily=ol(c.fontFamily,d.fontFamily),d.fontSize=ol(c.fontSize,d.fontSize),d.textShadow=ol(c.textShadow,d.textShadow),d.fontWeight=c.fontWeight,d.fontStyle=c.fontStyle,d.opacity=c.opacity,d.rubyTag=c.rubyTag,d.textCombineUpright=c.textCombineUpright,d.wrapLine=c.wrapLine),l){case"br":r=Si(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(l=e.attributes.color)&&(r.color=l);break;case"div":if(l=e.attributes.time,!l)break;(l=qc(new kr(l)))&&(r.startTime=l);break;case"ruby":case"rp":case"rt":r.rubyTag=l}}if(a=e.children,ff(e)||a.length==1&&ff(a[0]))for(n=On(e).split(`
`),e=!0,n=T(n),a=n.next();!a.done;a=n.next())a=a.value,e||(e=Si(r.startTime,r.endTime),t.nestedCues.push(e)),0<a.length&&(e=r.clone(),e.payload=mi(a),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=T(a),e=t.next();!e.done;e=t.next())iS(e.value,r,n)}function oS(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=lt:e.textAlign=_e[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":To)):(r=/^region:(.*)$/.exec(t))?(t=aM(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=zr[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=fo,e.line=Number(n[1]),n[2]&&(e.lineAlign=zr[n[2].toUpperCase()]))}function aM(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function qc(e){if(e=rr(e,rS),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}me("shaka.text.VttTextParser",ci),ci.prototype.parseMedia=ci.prototype.parseMedia,ci.prototype.setManifestType=ci.prototype.setManifestType,ci.prototype.setSequenceMode=ci.prototype.setSequenceMode,ci.prototype.parseInit=ci.prototype.parseInit;var rS=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Pn["text/vtt"]=function(){return new ci},Pn['text/vtt; codecs="vtt"']=function(){return new ci},Pn['text/vtt; codecs="wvtt"']=function(){return new ci};function zi(){this.g=null}zi.prototype.parseInit=function(e){var t=this,n=!1;if(new Yt().box("moov",At).box("trak",At).box("mdia",At).S("mdhd",function(r){r=yf(r.reader,r.version),t.g=r.timescale}).box("minf",At).box("stbl",At).S("stsd",Sr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new ne(2,2,2008);if(!n)throw new ne(2,2,2008)},zi.prototype.setSequenceMode=function(){},zi.prototype.setManifestType=function(){},zi.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new ne(2,2,2008);var n=0,r=[],a,l=[],c=!1,d=!1,p=!1,x=null;if(new Yt().box("moof",At).box("traf",At).S("tfdt",function(K){c=!0,n=gf(K.reader,K.version).baseMediaDecodeTime}).S("tfhd",function(K){x=Vy(K.reader,K.flags).Yc}).S("trun",function(K){d=!0,r=Hy(K.reader,K.version,K.flags).Wg}).box("mdat",Ns(function(K){p=!0,a=K})).parse(e,!1),!p&&!c&&!d)throw new ne(2,2,2008);e=n;for(var C=new Kt(a,0),b=T(r),k=b.next();!k.done;k=b.next()){k=k.value;var E=k.Jf||x,M=k.ne?n+k.ne:e;e=M+(E||0);var R=0;do{var _=C.P();R+=_;var j=C.P(),U=null;uf(j)=="vttc"?8<_&&(U=C.qb(_-8)):C.skip(_-8),E&&U&&(_=uM(U,t.periodStart+M/this.g,t.periodStart+e/this.g),l.push(_))}while(k.sampleSize&&R<k.sampleSize)}return l.filter(Kr)};function uM(e,t,n){var r,a,l;return new Yt().box("payl",Ns(function(c){r=nn(c)})).box("iden",Ns(function(c){a=nn(c)})).box("sttg",Ns(function(c){l=nn(c)})).parse(e),r?lM(r,a,l,t,n):null}function lM(e,t,n,r,a){if(r=new Lt(r,a,""),nS(e,r,new Map),t&&(r.id=t),n)for(e=new kr(n),t=is(e);t;)oS(r,t,[]),ia(e),t=is(e);return r}me("shaka.text.Mp4VttParser",zi),zi.prototype.parseMedia=zi.prototype.parseMedia,zi.prototype.setManifestType=zi.prototype.setManifestType,zi.prototype.setSequenceMode=zi.prototype.setSequenceMode,zi.prototype.parseInit=zi.prototype.parseInit,Pn['application/mp4; codecs="wvtt"']=function(){return new zi};function Vi(){}Vi.prototype.parseInit=function(){},Vi.prototype.setSequenceMode=function(){},Vi.prototype.setManifestType=function(){},Vi.prototype.parseMedia=function(e){var t=nn(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=T(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var r=new kr(n[0]),a=sS(r),l=rr(r,/,/g);if(r=sS(r),a==null||l==null||r==null)throw new ne(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Lt(a,r,n.slice(1).join(`
`).trim()))}return e};function sS(e){if(e=rr(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}me("shaka.text.SbvTextParser",Vi),Vi.prototype.parseMedia=Vi.prototype.parseMedia,Vi.prototype.setManifestType=Vi.prototype.setManifestType,Vi.prototype.setSequenceMode=Vi.prototype.setSequenceMode,Vi.prototype.parseInit=Vi.prototype.parseInit,Pn["text/x-subviewer"]=function(){return new Vi};function Di(){this.g=new ci}Di.prototype.parseInit=function(){},Di.prototype.setSequenceMode=function(){},Di.prototype.setManifestType=function(){},Di.prototype.parseMedia=function(e,t,n){return e=nn(e),e=aS(e),e=Me(Ao(e)),this.g.parseMedia(e,t,n)};function aS(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=T(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}me("shaka.text.SrtTextParser",Di),Di.srt2webvtt=aS,Di.prototype.parseMedia=Di.prototype.parseMedia,Di.prototype.setManifestType=Di.prototype.setManifestType,Di.prototype.setSequenceMode=Di.prototype.setSequenceMode,Di.prototype.parseInit=Di.prototype.parseInit,Pn["text/srt"]=function(){return new Di};function Hi(){}Hi.prototype.parseInit=function(){},Hi.prototype.setSequenceMode=function(){},Hi.prototype.setManifestType=function(){},Hi.prototype.parseMedia=function(e){var t="",n="",r=null,a=null;for(a=nn(e).split(/\r?\n\s*\r?\n/),e=T(a),a=e.next();!a.done;a=e.next()){var l=a.value;a=l,(l=cM.exec(l))&&(r=l[1],a=l[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=a,t=n?t+(`
`+a):a):r=="Events"&&(n=n?n+(`
`+a):a)}for(r=[],a=null,t=T(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(l=fS.exec(e))){if(e=l[1].trim(),l=l[2].trim(),e=="Format")a=l.split(Kc);else if(e=="Style"){e=l.split(Kc),l={};for(var c=0;c<a.length&&c<e.length;c++)l[a[c]]=e[c];r.push(l)}}for(a=[],t=null,n=T(n.split(/\r?\n/)),l=n.next(),e={};!l.done;e={jh:void 0},l=n.next())if(l=l.value,!/^\s*;/.test(l)&&(c=fS.exec(l))){if(l=c[1].trim(),c=c[2].trim(),l=="Format")t=c.split(Kc);else if(l=="Dialogue"){c=c.split(Kc),l={};for(var d=0;d<t.length&&d<c.length;d++)l[t[d]]=c[d];d=lS(l.Start);var p=lS(l.End);c=new Lt(d,p,c.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.jh=l.Style,(e=r.find(function(x){return function(C){return C.Name==x.jh}}(e)))&&fM(c,e),a.push(c)}}return a};function fM(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=uS(n))&&(e.color=n),(n=t.BackColour)&&(n=uS(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=dt,e.textAlign="start";break;case 2:e.displayAlign=dt,e.textAlign=lt;break;case 3:e.displayAlign=dt,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=lt;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=lt;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function uS(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function lS(e){return e=hM.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}me("shaka.text.SsaTextParser",Hi),Hi.prototype.parseMedia=Hi.prototype.parseMedia,Hi.prototype.setManifestType=Hi.prototype.setManifestType,Hi.prototype.setSequenceMode=Hi.prototype.setSequenceMode,Hi.prototype.parseInit=Hi.prototype.parseInit;var cM=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,fS=/^\s*([^:]+):\s*(.*)/,Kc=/\s*,\s*/,hM=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Pn["text/x-ssa"]=function(){return new Hi};function cS(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,ca:e}:null}function hS(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var a=((e[t+2]&192)>>>6)+1,l=(e[t+2]&1)<<2;return l|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:l,codec:"mp4a.40."+a}}function dS(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function dM(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Gi(e){this.i=e,this.h=0,this.g=new Map}s=Gi.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ne(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(ji(t)||"mp4a.40.2")+'"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,r){for(var a=Me(e),l=js(a),c=l.length;c<a.length&&!dS(a,c);c++);if(e=1e3*n.endTime,l=Jr(l),l.length&&n&&(l=l.find(function(C){return C.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=l.data),l=hS(a,c),!l)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount;for(var d=[];c<a.length;){var p=cS(a,c);if(!p)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));var x=p.Qd+p.ca;c+x<=a.length&&d.push({data:a.subarray(c+p.Qd,c+x),size:p.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),c+=x}return a=l.sampleRate,e=Math.floor(e*a/1e3),r={id:t.id,type:"audio",codecs:l.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:d},stream:t},r=new ma([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=ga(r),this.g.set(n,t)),n=Ku(r),this.h++,t=vn(t,n),Promise.resolve(t)},me("shaka.transmuxer.AacTransmuxer",Gi),Gi.prototype.transmux=Gi.prototype.transmux,Gi.prototype.getOriginalMimeType=Gi.prototype.getOriginalMimeType,Gi.prototype.convertCodecs=Gi.prototype.convertCodecs,Gi.prototype.isSupported=Gi.prototype.isSupported,Gi.prototype.destroy=Gi.prototype.destroy,Ui("audio/aac",function(){return new Gi("audio/aac")},xr);function pS(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,a=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+a>e.length)return null;var l=e[t+6]>>5,c=0;l===2?c+=2:(l&1&&l!==1&&(c+=2),l&4&&(c+=2)),c=(e[t+6]<<8|e[t+7])>>12-c&1;var d=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|d>>2,(d&3)<<6|l<<3|c<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][l]+c,ma:e,ca:a}}function pM(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var a,l;0<r;){l=e[t];var c=Math.min(r,8),d=8-c;a=4278190080>>>24+d<<d,a=(l&a)>>d,n=n?n<<c|a:a,t+=1,r-=c}if(16>n)return!0}return!1}function no(e){this.i=e,this.h=0,this.g=new Map}s=no.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ne(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,r){e=Me(e);for(var a=js(e),l=a.length;l<e.length&&!pM(e,l);l++);var c=1e3*n.endTime;a=Jr(a),a.length&&n&&(a=a.find(function(C){return C.description==="com.apple.streaming.transportStreamTimestamp"}))&&(c=a.data),a=0;for(var d=new Uint8Array([]),p=[];l<e.length;){var x=pS(e,l);if(!x)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=x.sampleRate,t.channelsCount=x.channelCount,a=x.sampleRate,d=x.ma,p.push({data:e.subarray(l,l+x.ca),size:x.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=x.ca}return e=Math.floor(c*a/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:d,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},r=new ma([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=ga(r),this.g.set(n,t)),n=Ku(r),this.h++,t=vn(t,n),Promise.resolve(t)},me("shaka.transmuxer.Ac3Transmuxer",no),no.prototype.transmux=no.prototype.transmux,no.prototype.getOriginalMimeType=no.prototype.getOriginalMimeType,no.prototype.convertCodecs=no.prototype.convertCodecs,no.prototype.isSupported=no.prototype.isSupported,no.prototype.destroy=no.prototype.destroy,Ui("audio/ac3",function(){return new no("audio/ac3")},xr);function mS(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new tr(e.subarray(t+2));Ai(n,2),Ai(n,3);var r=kt(n,11)+1<<1,a=kt(n,2);if(a==3){a=kt(n,2),a=[24e3,22060,16e3][a];var l=3}else a=[48e3,44100,32e3][a],l=kt(n,2);var c=kt(n,3),d=kt(n,1);return n=kt(n,5),t+r>e.byteLength?null:(e=Math.floor(r*a/(16*[1,2,3,6][l])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,a<<6|n<<1|0,0|c<<1|d<<0,0]),{sampleRate:a,channelCount:[2,1,2,3,3,4,4,5][c]+d,ma:e,ca:r})}function io(e){this.i=e,this.h=0,this.g=new Map}s=io.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ne(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,r){e=Me(e);for(var a=js(e),l=a.length;l<e.length&&(e[l]<<8|e[l+1]<<0)!==2935;l++);var c=1e3*n.endTime;a=Jr(a),a.length&&n&&(a=a.find(function(C){return C.description==="com.apple.streaming.transportStreamTimestamp"}))&&(c=a.data),a=0;for(var d=new Uint8Array([]),p=[];l<e.length;){var x=mS(e,l);if(!x)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=x.sampleRate,t.channelsCount=x.channelCount,a=x.sampleRate,d=x.ma,p.push({data:e.subarray(l,l+x.ca),size:x.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=x.ca}return e=Math.floor(c*a/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:d,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},r=new ma([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=ga(r),this.g.set(n,t)),n=Ku(r),this.h++,t=vn(t,n),Promise.resolve(t)},me("shaka.transmuxer.Ec3Transmuxer",io),io.prototype.transmux=io.prototype.transmux,io.prototype.getOriginalMimeType=io.prototype.getOriginalMimeType,io.prototype.convertCodecs=io.prototype.convertCodecs,io.prototype.isSupported=io.prototype.isSupported,io.prototype.destroy=io.prototype.destroy,Ui("audio/ec3",function(){return new io("audio/ec3")},xr);function mM(e){if(!e.length)return null;var t=e.find(function(R){return R.type==7});if(e=e.find(function(R){return R.type==8}),!t||!e)return null;var n=new tr(t.data),r=Ot(n);if(Ot(n),Ot(n),yi(n),yM.includes(r)&&(r=We(n),r===3&&Ai(n,1),yi(n),yi(n),Ai(n,1),tt(n))){r=r!==3?8:12;for(var a=0;a<r;a++)tt(n)&&(6>a?vf(n,16):vf(n,64))}if(yi(n),r=We(n),r===0)We(n);else if(r===1)for(Ai(n,1),yi(n),yi(n),r=We(n),a=0;a<r;a++)yi(n);yi(n),Ai(n,1);var l=We(n),c=We(n),d=kt(n,1);d===0&&Ai(n,1),Ai(n,1);var p=0,x=0,C=0,b=0;if(tt(n)&&(p=We(n),x=We(n),C=We(n),b=We(n)),a=r=1,tt(n)&&tt(n)){var k=Ot(n),E=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],M=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<k&&16>=k?(r=E[k-1],a=M[k-1]):k===255&&(r=kt(n,16),a=kt(n,16))}return n=(2-d)*(c+1)*16-2*C-2*b,l=16*(l+1)-2*p-2*x,p=[],t=t.fullData,p.push(t.byteLength>>>8&255),p.push(t.byteLength&255),p=p.concat.apply(p,L(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,L(e)),e=new Uint8Array([1,p[3],p[4],p[5],255,225].concat(p,[1],t)),{height:n,width:l,wa:e,Ba:r,Ca:a}}function gM(e){var t=!1,n=[],r=e.find(function(p){return p.type==7}),a=!1;e=T(e);for(var l=e.next();!l.done;l=e.next()){l=l.value;var c=!1;switch(l.type){case 1:c=a=!0;var d=l.data;r&&4<d.length&&(d=sE(new tr(d)),d===2||d===4||d===7||d===9)&&(t=!0);break;case 5:t=c=a=!0;break;case 6:c=!0;break;case 7:c=!0;break;case 8:c=!0;break;case 9:a=c=!0;break;case 12:c=!0;break;default:c=!1}a&&c&&(c=l.fullData.byteLength,d=new Uint8Array(4),d[0]=c>>24&255,d[1]=c>>16&255,d[2]=c>>8&255,d[3]=c&255,n.push(d),n.push(l.fullData))}return n.length?{data:vn.apply(si,L(n)),kd:t}:null}var yM=[100,110,122,244,44,83,86,118,128,138,139,134];function vM(e){if(!e.length)return null;var t=e.find(function(c){return c.type==32}),n=e.find(function(c){return c.type==33}),r=e.find(function(c){return c.type==34});if(!t||!n||!r)return null;var a=xM(t.fullData);e=wM(n.fullData);var l=SM(r.fullData);return t=CM(t.fullData,n.fullData,r.fullData,{yf:a.yf,Wf:a.Wf,df:e.df,ef:e.ef,Ye:e.Ye,cf:e.cf,Ze:e.Ze,$e:e.$e,af:e.af,bf:e.bf,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Le:e.Le,$d:e.$d,Je:e.Je,He:e.He,Ge:e.Ge,Bf:l.Bf}),{height:e.height,width:e.width,wa:t,Ba:e.Ri,Ca:e.Qi}}function xM(e){var t=new tr(e,!0);return Ot(t),Ot(t),kt(t,4),kt(t,2),kt(t,6),e=kt(t,3),t=tt(t),{yf:e+1,Wf:t}}function wM(e){e=new tr(e,!0),Ot(e),Ot(e);var t=0,n=0,r=0,a=0;kt(e,4);var l=kt(e,3);tt(e);for(var c=kt(e,2),d=kt(e,1),p=kt(e,5),x=Ot(e),C=Ot(e),b=Ot(e),k=Ot(e),E=Ot(e),M=Ot(e),R=Ot(e),_=Ot(e),j=Ot(e),U=Ot(e),K=Ot(e),O=[],V=[],Z=0;Z<l;Z++)O.push(tt(e)),V.push(tt(e));if(0<l)for(Z=l;8>Z;Z++)kt(e,2);for(Z=0;Z<l;Z++)O[Z]&&kt(e,88),V[Z]&&Ot(e);We(e),O=We(e),O==3&&kt(e,1),V=We(e),Z=We(e),tt(e)&&(t+=We(e),n+=We(e),r+=We(e),a+=We(e));var te=We(e),re=We(e),de=We(e);if(tt(e))for(var se=0;se<=l;se++)We(e),We(e),We(e);else We(e),We(e),We(e);if(We(e),We(e),We(e),We(e),We(e),We(e),tt(e)&&tt(e))for(se=0;4>se;se++)for(var ae=0;ae<(se===3?2:6);ae++)if(tt(e)){var he=Math.min(64,1<<4+(se<<1));1<se&&Fs(e);for(var Se=0;Se<he;Se++)Fs(e)}else We(e);for(tt(e),tt(e),tt(e)&&(Ot(e),We(e),We(e),tt(e)),se=We(e),he=ae=0;he<se;he++)if(Se=!1,he!==0&&(Se=tt(e)),Se){he===se&&We(e),tt(e),We(e);for(var ye=Se=0;ye<=ae;ye++){var be=tt(e),Re=!1;be||(Re=tt(e)),(be||Re)&&Se++}ae=Se}else{for(ye=We(e),Se=We(e),ae=ye+Se,be=0;be<ye;be++)We(e),tt(e);for(ye=0;ye<Se;ye++)We(e),tt(e)}if(tt(e))for(se=We(e),ae=0;ae<se;ae++){for(he=0;he<de+4;he++)kt(e,1);kt(e,1)}if(se=de=1,ae=0,tt(e),tt(e),tt(e)){if(tt(e)&&(he=Ot(e),Se=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ye=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<he&&16>=he?(de=Se[he-1],se=ye[he-1]):he===255&&(de=kt(e,16),se=kt(e,16))),tt(e)&&tt(e),tt(e)&&(kt(e,3),tt(e),tt(e)&&(Ot(e),Ot(e),Ot(e))),tt(e)&&(We(e),We(e)),tt(e),tt(e),tt(e),(he=tt(e))&&(We(e),We(e),We(e),We(e)),tt(e)&&(kt(e,32),kt(e,32),tt(e)&&We(e),tt(e)))for(ye=!1,he=tt(e),Se=tt(e),(he||Se)&&((ye=tt(e))&&(Ot(e),kt(e,5),tt(e),kt(e,5)),kt(e,4),kt(e,4),ye&&kt(e,4),kt(e,5),kt(e,5),kt(e,5)),be=0;be<=l;be++){var Ee=!0;Re=1,tt(e)||(Ee=tt(e));var je=!1;if(Ee?We(e):je=tt(e),je||(Re=We(e)+1),he){for(Ee=0;Ee<Re;Ee++)We(e),We(e),ye&&(We(e),We(e));tt(e)}if(Se){for(Ee=0;Ee<Re;Ee++)We(e),We(e),ye&&(We(e),We(e));tt(e)}}tt(e)&&(tt(e),tt(e),tt(e),ae=We(e),We(e),We(e),We(e),We(e))}return{Ye:K,df:c,ef:d,cf:p,Ze:x,$e:C,af:b,bf:k,Se:E,Te:M,Ue:R,Ve:_,We:j,Xe:U,$d:ae,Le:0,Je:O,He:te,Ge:re,width:V-(t+n)*(O===1||O===2?2:1),height:Z-(r+a)*(O===1?2:1),Ri:de,Qi:se}}function SM(e){var t=new tr(e,!0);Ot(t),Ot(t),We(t),We(t),tt(t),tt(t),kt(t,3),tt(t),tt(t),We(t),We(t),Fs(t),tt(t),tt(t),tt(t)&&We(t),Fs(t),Fs(t),tt(t),tt(t),tt(t),tt(t),e=tt(t),t=tt(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Bf:n}}function CM(e,t,n,r){var a=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return a[0]=1,a[1]=(r.df&3)<<6|(r.ef?1:0)<<5|r.cf&31,a[2]=r.Ze,a[3]=r.$e,a[4]=r.af,a[5]=r.bf,a[6]=r.Se,a[7]=r.Te,a[8]=r.Ue,a[9]=r.Ve,a[10]=r.We,a[11]=r.Xe,a[12]=r.Ye,a[13]=240|(r.$d&3840)>>8,a[14]=r.$d&255,a[15]=252|r.Bf&3,a[16]=252|r.Je&3,a[17]=248|r.He&7,a[18]=248|r.Ge&7,a[19]=0,a[20]=0,a[21]=(r.Le&3)<<6|(r.yf&7)<<3|(r.Wf?1:0)<<2|3,a[22]=3,a[23]=160,a[24]=0,a[25]=1,a[26]=(e.byteLength&65280)>>8,a[27]=(e.byteLength&255)>>0,a.set(e,28),a[23+(5+e.byteLength)]=161,a[e.byteLength+29]=0,a[e.byteLength+30]=1,a[e.byteLength+31]=(t.byteLength&65280)>>8,a[e.byteLength+32]=(t.byteLength&255)>>0,a.set(t,e.byteLength+33),a[23+(e.byteLength+10+t.byteLength)]=162,a[e.byteLength+10+t.byteLength+24]=0,a[e.byteLength+10+t.byteLength+25]=1,a[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,a[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,a.set(n,e.byteLength+10+t.byteLength+28),a}function Yc(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,a=e[t+2]>>4&15,l=e[t+2]>>2&3;if(n!==1&&a!==0&&a!==15&&l!==3){var c=e[t+3]>>6;a=1e3*TM[14*(n===3?3-r:r===3?3:4)+a-1],l=bM[3*(n===3?0:n===2?1:2)+l],n=EM[n][r];var d=kM[r],p=Math.floor(n*a/l+(e[t+2]>>1&1))*d,x=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(x=x?parseInt(x[1],10):0)&&87>=x&&r===2&&224e3<=a&&c===0&&(e[t+3]|=128),{sampleRate:l,channelCount:c===3?1:2,ca:p,Pi:8*n*d}}return null}function gS(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function yS(e,t){if(t+1<e.length&&gS(e,t)){var n=Yc(e,t),r=4;return n&&n.ca&&(r=n.ca),t+=r,t===e.length||t+1<e.length&&gS(e,t)}return!1}var TM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],bM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],EM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],kM=[0,1,1,4];function oo(e){this.i=e,this.h=0,this.g=new Map}s=oo.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ne(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,r){for(var a=Me(e),l=js(a).length;l<a.length&&!yS(a,l);l++);var c;for(e=[];l<a.length;){var d=Yc(a,l);if(!d)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));c||(c=d),l+d.ca<=a.length&&e.push({data:a.subarray(l,l+d.ca),size:d.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=d.ca}return c?(a=9e4*c.Pi/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:a,Ya:e},stream:t},r=new ma([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=ga(r),this.g.set(n,t)),n=Ku(r),this.h++,t=vn(t,n),Promise.resolve(t)):Promise.reject(new ne(2,3,3018,n?n.M()[0]:null))},me("shaka.transmuxer.Mp3Transmuxer",oo),oo.prototype.transmux=oo.prototype.transmux,oo.prototype.getOriginalMimeType=oo.prototype.getOriginalMimeType,oo.prototype.convertCodecs=oo.prototype.convertCodecs,oo.prototype.isSupported=oo.prototype.isSupported,oo.prototype.destroy=oo.prototype.destroy,Ui("audio/mpeg",function(){return new oo("audio/mpeg")},xr);function ro(e){this.h=e,this.g=null}s=ro.prototype,s.destroy=function(){},s.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=ji(e).split(","),n=Ti("audio",t);return t=Ti("video",t),!n||t||gi(n)!="mp3"?!1:Ne(this.convertCodecs("audio",e))},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},s.getOriginalMimeType=function(){return this.h},s.transmux=function(e,t,n,r,a){if(this.g?this.g.clearData():this.g=new en,e=Me(e),e=this.g.parse(e),e.$c().audio!="mp3"||a!="audio")return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),a=T(e.Tb()),e=a.next();!e.done;e=a.next())if(e=e.value.data)for(t=0;t<e.length;)(r=Yc(e,t))?(t+r.ca<=e.length&&(n=vn(n,e.subarray(t,t+r.ca))),t+=r.ca):t++;return Promise.resolve(n)},me("shaka.transmuxer.MpegTsTransmuxer",ro),ro.prototype.transmux=ro.prototype.transmux,ro.prototype.getOriginalMimeType=ro.prototype.getOriginalMimeType,ro.prototype.convertCodecs=ro.prototype.convertCodecs,ro.prototype.isSupported=ro.prototype.isSupported,ro.prototype.destroy=ro.prototype.destroy,Ui("video/mp2t",function(){return new ro("video/mp2t")},sd);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Wi(e){this.h=e,(this.g=l0.get("ISOBoxer")())&&AM(this)}function AM(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==IM[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}s=Wi.prototype,s.destroy=function(){},s.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ne(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ne(t)||Ne(e))},s.convertCodecs=function(e,t){return t.replace("mss/","")},s.getOriginalMimeType=function(){return this.h},s.transmux=function(e,t,n){if(!n)return Promise.resolve(Me(e));if(!t.mssPrivateData)return Promise.reject(new ne(2,3,3020,n?n.M()[0]:null));try{var r,a=this.g.parseBuffer(e),l=a.fetch("tfhd");l.track_ID=t.id+1;var c=a.fetch("tfdt"),d=a.fetch("traf");c===null&&(c=this.g.createFullBox("tfdt",d,l),c.version=1,c.flags=0,c.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var p=a.fetch("trun"),x=a.fetch("tfxd");x&&x._parent.boxes.splice(x._parent.boxes.indexOf(x),1);var C=a.fetch("tfrf");C&&C._parent.boxes.splice(C._parent.boxes.indexOf(C),1);var b=a.fetch("sepiff");if(b!==null){b.type="senc",b.usertype=void 0;var k=a.fetch("saio");if(k===null){k=this.g.createFullBox("saio",d),k.version=0,k.flags=0,k.entry_count=1,k.offset=[0];var E=this.g.createFullBox("saiz",d);if(E.version=0,E.flags=0,E.sample_count=b.sample_count,E.default_sample_info_size=0,E.sample_info_size=[],b.flags&2)for(r=0;r<b.sample_count;r+=1)E.sample_info_size[r]=10+6*b.entry[r].NumberOfEntries;else E.default_sample_info_size=8}}l.flags&=16777214,l.flags|=131072,p.flags|=1;var M=a.fetch("moof");p.data_offset=M.getLength()+8;var R=a.fetch("saio");R!==null&&(R.offset[0]=vS(M,"traf")+vS(d,"senc")+16);var _=Me(a.write());return Promise.resolve(_)}catch(j){return j instanceof ne?Promise.reject(j):Promise.reject(new ne(2,3,3022,n?n.M()[0]:null))}};function vS(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}me("shaka.transmuxer.MssTransmuxer",Wi),Wi.prototype.transmux=Wi.prototype.transmux,Wi.prototype.getOriginalMimeType=Wi.prototype.getOriginalMimeType,Wi.prototype.convertCodecs=Wi.prototype.convertCodecs,Wi.prototype.isSupported=Wi.prototype.isSupported,Wi.prototype.destroy=Wi.prototype.destroy;var IM=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ui("mss/audio/mp4",function(){return new Wi("mss/audio/mp4")},xr),Ui("mss/video/mp4",function(){return new Wi("mss/video/mp4")},xr);function so(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}s=so.prototype,s.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},s.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=ji(n).split(",");return n=Ti("audio",r),r=Ti("video",r),n&&(n=gi(n),!MM.includes(n))||r&&(n=gi(r),!_M.includes(n))?!1:t?Ne(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ne(t)||Ne(e))},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=ji(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return Ms(n,"audio/mp4")}).map(su).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},s.getOriginalMimeType=function(){return this.l},s.transmux=function(e,t,n,r,a){var l=Me(e);if(a=="audio"&&!gu(l)){for(var c=js(l),d=c.length;d<l.length;d++)if(yS(l,d))return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));for(d=c.length;d<l.length;d++)if(dS(l,d))return this.h||(this.h=new Gi("audio/aac")),this.h.transmux(e,t,n,r,a);return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new en;var p=this.j.parse(l),x=[],C=p.$c();try{var b=null;if(a=="video"){switch(C.video){case"avc":var k=[],E=null,M=[],R=p.Fc();if(!R.length)throw new ne(2,3,3023,n?n.M()[0]:null);for(var _=0;_<R.length;_++){var j=R[_],U=j.nalus;M.push.apply(M,L(U));var K=gM(U);if(K){E==null&&(E=j.dts);var O=void 0;O=_+1<R.length?(R[_+1].dts||0)-(j.dts||0):1<R.length?(j.dts||0)-(R[_-1].dts||0):9e4*(n.endTime-n.startTime),k.push({data:K.data,size:K.data.byteLength,duration:O,cb:Math.round((j.pts||0)-(j.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:K.kd?2:1,hb:K.kd?0:1}})}}var V=mM(M);if(!V||E==null)throw new ne(2,3,3018,n?n.M()[0]:null);t.height=V.height,t.width=V.width,b={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:V.wa,Ba:V.Ba,Ca:V.Ca,data:{rb:this.g,baseMediaDecodeTime:E,Ya:k},stream:t};break;case"hvc":var Z=[],te=null,re=[],de=p.Fc();if(!de.length)throw new ne(2,3,3023,n?n.M()[0]:null);for(var se=0;se<de.length;se++){var ae=de[se],he=ae.nalus;re.push.apply(re,L(he));for(var Se=!1,ye=[],be=!1,Re=T(he),Ee=Re.next();!Ee.done;Ee=Re.next()){var je=Ee.value;switch(je.type){case 1:case 0:var yt=be=!0;break;case 19:case 20:case 21:Se=yt=be=!0;break;case 32:yt=!0;break;case 33:yt=!0;break;case 34:yt=!0;break;case 35:be=yt=!0;break;case 39:case 40:yt=!0;break;default:yt=!1}if(be&&yt){var Mt=je.fullData.byteLength,fn=new Uint8Array(4);fn[0]=Mt>>24&255,fn[1]=Mt>>16&255,fn[2]=Mt>>8&255,fn[3]=Mt&255,ye.push(fn),ye.push(je.fullData)}}var Pt=ye.length?{data:vn.apply(si,L(ye)),kd:Se}:null;if(Pt){te==null&&ae.dts!=null&&(te=ae.dts);var gn=void 0;gn=se+1<de.length?(de[se+1].dts||0)-(ae.dts||0):1<de.length?(ae.dts||0)-(de[se-1].dts||0):9e4*(n.endTime-n.startTime),Z.push({data:Pt.data,size:Pt.data.byteLength,duration:gn,cb:Math.round((ae.pts||0)-(ae.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:Pt.kd?2:1,hb:Pt.kd?0:1}})}}var An=vM(re);if(!An||te==null)throw new ne(2,3,3018,n?n.M()[0]:null);t.height=An.height,t.width=An.width,b={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:An.wa,Ba:An.Ba,Ca:An.Ca,data:{rb:this.g,baseMediaDecodeTime:te,Ya:Z},stream:t}}b&&(x.push(b),b=null)}if(a=="audio"){switch(C.audio){case"aac":for(var cn=[],jt,wn=null,Bn=T(p.Tb()),jn=Bn.next();!jn.done;jn=Bn.next()){var Pi=jn.value,Oi=Pi.data;if(Oi){var wo=0;if(jt=hS(Oi,wo),!jt)throw new ne(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=jt.sampleRate,t.channelsCount=jt.channelCount,wn==null&&Pi.pts!==null&&(wn=Pi.pts);wo<Oi.length;){var hr=cS(Oi,wo);if(hr){var Rr=hr.Qd+hr.ca;wo+Rr<=Oi.length&&cn.push({data:Oi.subarray(wo+hr.Qd,wo+Rr),size:hr.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),wo+=Rr}else wo++}}}if(!jt||wn==null){if(!p.Fc().length)throw new ne(2,3,3018,n?n.M()[0]:null);wn=9e4*n.startTime;var wa=Ti("audio",t.codecs.split(","));if(!wa||!t.channelsCount||!t.audioSamplingRate)throw new ne(2,3,3018,n?n.M()[0]:null);jt={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:wa};var dr=dM(wa,t.channelsCount);if(!dr)throw new ne(2,3,3018,n?n.M()[0]:null);for(var Zc=wn+9e4*(n.endTime-n.startTime),al=wn;al<Zc;)cn.push({data:dr,size:dr.byteLength,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),al+=1024/jt.sampleRate*9e4}var ul=jt.sampleRate,Po=wn/9e4*ul;b={id:t.id,type:"audio",codecs:jt.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ul,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:Po,Ya:cn},stream:t};break;case"ac3":for(var _S=[],Jc=0,sm=new Uint8Array([]),eh=null,RS=T(p.Tb()),am=RS.next();!am.done;am=RS.next()){var um=am.value,lm=um.data;eh==null&&um.pts!==null&&(eh=um.pts);for(var Sa=0;Sa<lm.length;){var Lr=pS(lm,Sa);Lr?(t.audioSamplingRate=Lr.sampleRate,t.channelsCount=Lr.channelCount,Jc=Lr.sampleRate,sm=Lr.ma,_S.push({data:lm.subarray(Sa,Sa+Lr.ca),size:Lr.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Sa+=Lr.ca):Sa++}}if(Jc==0||sm.byteLength==0||eh==null)throw new ne(2,3,3018,n?n.M()[0]:null);var OM=eh/9e4*Jc;b={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Jc,duration:r,$a:[],ma:sm,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:OM,Ya:_S},stream:t};break;case"ec3":for(var LS=[],th=0,fm=new Uint8Array([]),nh=null,DS=T(p.Tb()),cm=DS.next();!cm.done;cm=DS.next()){var hm=cm.value,dm=hm.data;nh==null&&hm.pts!==null&&(nh=hm.pts);for(var Ca=0;Ca<dm.length;){var Dr=mS(dm,Ca);Dr?(t.audioSamplingRate=Dr.sampleRate,t.channelsCount=Dr.channelCount,th=Dr.sampleRate,fm=Dr.ma,LS.push({data:dm.subarray(Ca,Ca+Dr.ca),size:Dr.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ca+=Dr.ca):Ca++}}if(th==0||fm.byteLength==0||nh==null)throw new ne(2,3,3018,n?n.M()[0]:null);var NM=nh/9e4*th;b={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:th,duration:r,$a:[],ma:fm,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:NM,Ya:LS},stream:t};break;case"mp3":for(var PS=[],ih,oh=null,OS=T(p.Tb()),pm=OS.next();!pm.done;pm=OS.next()){var mm=pm.value,ll=mm.data;if(ll){oh==null&&mm.pts!==null&&(oh=mm.pts);for(var fs=0;fs<ll.length;){var Ta=Yc(ll,fs);Ta?(ih||(ih=Ta),fs+Ta.ca<=ll.length&&PS.push({data:ll.subarray(fs,fs+Ta.ca),size:Ta.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),fs+=Ta.ca):fs++}}}if(!ih||oh==null)throw new ne(2,3,3018,n?n.M()[0]:null);var NS=ih.sampleRate,UM=oh/9e4*NS;b={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:NS,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:UM,Ya:PS},stream:t};break;case"opus":var US=[],rh=null,Vo=p.F;if(!Vo)throw new ne(2,3,3018,n?n.M()[0]:null);var hi=[];switch(Vo.Ch){case 1:case 2:hi=[0];break;case 0:hi=[255,1,1,0,1];break;case 128:hi=[255,2,0,0,1];break;case 3:hi=[1,2,1,0,2,1];break;case 4:hi=[1,2,2,0,1,2,3];break;case 5:hi=[1,3,2,0,4,1,2,3];break;case 6:hi=[1,4,2,0,4,1,2,3,5];break;case 7:hi=[1,4,2,0,4,1,2,3,5,6];break;case 8:hi=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:hi=[1,1,2,0,1];break;case 131:hi=[1,1,3,0,1,2];break;case 132:hi=[1,1,4,0,1,2,3];break;case 133:hi=[1,1,5,0,1,2,3,4];break;case 134:hi=[1,1,6,0,1,2,3,4,5];break;case 135:hi=[1,1,7,0,1,2,3,4,5,6];break;case 136:hi=[1,1,8,0,1,2,3,4,5,6,7]}for(var BS=new Uint8Array([0,Vo.channelCount,0,0,Vo.sampleRate>>>24&255,Vo.sampleRate>>>17&255,Vo.sampleRate>>>8&255,Vo.sampleRate>>>0&255,0,0].concat(L(hi))),jS=Vo.sampleRate,FS=T(p.Tb()),gm=FS.next();!gm.done;gm=FS.next()){var ym=gm.value,ba=ym.data;rh==null&&ym.pts!==null&&(rh=ym.pts);for(var fl=0;fl<ba.length;){for(var BM=(ba[fl+1]&16)!==0,jM=(ba[fl+1]&8)!==0,pr=fl+2,sh=0;ba[pr]===255;)sh+=255,pr+=1;sh+=ba[pr],pr+=1,pr+=BM?2:0,pr+=jM?2:0;var $S=ba.slice(pr,pr+sh);US.push({data:$S,size:$S.byteLength,duration:960,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),fl=pr+sh}}if(BS.byteLength==0||rh==null)throw new ne(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=Vo.sampleRate,t.channelsCount=Vo.channelCount;var FM=rh/9e4*jS;b={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:jS,duration:r,$a:[],ma:BS,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:FM,Ya:US},stream:t}}b&&(x.push(b),b=null)}}catch(wm){return wm&&wm.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(wm)}if(!x.length)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));var zS=new ma(x),vm=t.id+"_"+n.i;if(this.i.has(vm))var xm=this.i.get(vm);else xm=ga(zS),this.i.set(vm,xm);var $M=Ku(zS);this.g++;var zM=vn(xm,$M);return Promise.resolve(zM)},me("shaka.transmuxer.TsTransmuxer",so),so.prototype.transmux=so.prototype.transmux,so.prototype.getOriginalMimeType=so.prototype.getOriginalMimeType,so.prototype.convertCodecs=so.prototype.convertCodecs,so.prototype.isSupported=so.prototype.isSupported,so.prototype.destroy=so.prototype.destroy;var MM=["aac","ac-3","ec-3","mp3","opus"],_M=["avc","hevc"];Ui("video/mp2t",function(){return new so("video/mp2t")},ad);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function xS(){}var rl;function wS(){rl||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(rl=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=RM,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function RM(e,t){var n=this,r;return G(function(a){return a.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),A(a,rl.call(n,e,t),2)):(r=a.h,IS(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=rl,a.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=SS,a.return(SS.call(n,e,t))))})}function SS(e,t){var n=this,r,a,l,c,d,p,x,C,b,k,E,M;return G(function(R){if(R.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=AS(e),a=[],l=T(t),c=l.next();!c.done;c=l.next())d=c.value,p=CS(d.videoCapabilities,r),x=CS(d.audioCapabilities,r),d.videoCapabilities&&d.videoCapabilities.length&&!p.length||d.audioCapabilities&&d.audioCapabilities.length&&!x.length||(C=Object.assign({},d),C.videoCapabilities=p,C.audioCapabilities=x,a.push(C));if(!a.length)throw b=Error("Unsupported keySystem or supportedConfigurations."),b.name="NotSupportedError",b.code=DOMException.NOT_SUPPORTED_ERR,b;return A(R,rl.call(n,e,a),2)}return k=R.h,M=E=null,a[0]&&(a[0].videoCapabilities&&(E=a[0].videoCapabilities[0].encryptionScheme),a[0].audioCapabilities&&(M=a[0].audioCapabilities[0].encryptionScheme)),R.return(new Qc(k,E,M))})}function CS(e,t){return e&&e.filter(function(n){return om(n.encryptionScheme,t)})}me("EmeEncryptionSchemePolyfill",xS),xS.install=wS;function TS(){}var sl;function bS(){sl||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(sl=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=LM,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function LM(e){var t=this,n,r;return G(function(a){switch(a.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),A(a,sl.call(t,e),2);case 2:if(n=a.h,!e.keySystemConfiguration)return a.return(n);if((r=n.keySystemAccess)&&IS(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=sl,a.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ES,r){a.u(3);break}return A(a,kS(e),4);case 4:return n.keySystemAccess=a.h,a.return(n);case 3:return a.return(ES.call(t,e))}})}function ES(e){var t=this,n,r,a,l,c,d,p;return G(function(x){switch(x.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=n=null,!e.keySystemConfiguration||(a=e.keySystemConfiguration,l=a.keySystem,r=a.audio&&a.audio.encryptionScheme,n=a.video&&a.video.encryptionScheme,c=AS(l),d={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},om(r,c)&&om(n,c))?A(x,sl.call(t,e),2):x.return(d);case 2:if(p=x.h,p.keySystemAccess){p.keySystemAccess=new Qc(p.keySystemAccess,n,r),x.u(3);break}if(!e.keySystemConfiguration){x.u(3);break}return A(x,kS(e),5);case 5:p.keySystemAccess=x.h;case 3:return x.return(p)}})}function kS(e){var t,n;return G(function(r){if(r.g==1){var a=e.keySystemConfiguration,l=[],c=[];return a.audio&&l.push({robustness:a.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:a.audio.encryptionScheme}),a.video&&c.push({robustness:a.video.robustness||"",contentType:e.video.contentType,encryptionScheme:a.video.encryptionScheme}),a={initDataTypes:a.initDataType?[a.initDataType]:[],distinctiveIdentifier:a.distinctiveIdentifier,persistentState:a.persistentState,sessionTypes:a.sessionTypes},l.length&&(a.audioCapabilities=l),c.length&&(a.videoCapabilities=c),t=a,A(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}me("McEncryptionSchemePolyfill",TS),TS.install=bS;function Qc(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}Qc.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=T(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=T(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},Qc.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function AS(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function IS(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function om(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(PM||DM))}function rm(){}function MS(){wS(),bS()}me("EncryptionSchemePolyfills",rm),rm.install=MS;var DM=navigator.userAgent.includes("CrKey"),PM=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof w<"u"&&w.exports&&(w.exports=rm)}).call(i,o,o,void 0);for(var u in i.shaka)f[u]=i.shaka[u]})()})(kT);const CC=RL(kT);let ys,oi;const gg={playingState:!1},LL=async f=>{CC.polyfill.installAll(),oi=f,oi||(oi=document.createElement("video"),oi.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",oi.width=window.innerWidth,oi.height=window.innerHeight,ys=new CC.Player,await ys.attach(oi),oi.autoplay=!1,ys.addEventListener("error",o=>{console.error(o)}),document.body.insertBefore(oi,document.body.firstChild))},DL=async f=>{if(!ys||!oi)throw"Player not initialized yet";await ys.load(f.streamUrl)},PL=()=>{oi.play().then(()=>{gg.playingState=!0})},OL=()=>{oi.pause(),gg.playingState=!1},NL=async()=>{await ys.destroy(),ys=null,oi.remove(),oi=null},UL=()=>oi.currentTime,BL=()=>oi.duration,jL=()=>{let f=o=>new Date(o*1e3).toISOString().substr(14,5);return`${f(oi.currentTime)} : ${f(Math.floor(oi.duration))}`},Pr={init:LL,load:DL,play:PL,pause:OL,getCurrentTime:UL,getVideoDuration:BL,getTimeFormat:jL,state:gg,destroy:NL},FL=Je.Component("Player",{code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.y=1080,T.mount="{y:1}",T.w=1920,T.h=150,T.color={top:"0x00000000",bottom:"0x444444ff"},T.alpha={transition:i.controlsVisibility},s[1].populate(T),y===!0&&(I-=1),o=s[1];const L={};s[2]=this.element({parent:o||"root"},y===!0?v:i),L.x=60,L.y=50,s[2].populate(L),y===!0&&(I-=1),o=s[2];const B={};s[3]=this.element({parent:o||"root"},y===!0?v:i),B.w=60,B.h=60,B.color="0x0087ceeb",B.effects=[{type:"radius",props:{radius:16}}],s[3].populate(B),y===!0&&(I-=1),o=s[3];const N={};s[4]=this.element({parent:o||"root"},y===!0?v:i),N.y=14,N.x=14,N.w=32,N.h=32,N.src=i.playing?"assets/player/pause.png":"assets/player/play.png",s[4].populate(N),y===!0&&(I-=1),o=s[2];const z={};s[5]=this.element({parent:o||"root"},y===!0?v:i),z.y=22,z.x=100,z.w=i.progressLength,z.h=16,z.color="0xffffff80",z.effects=[{type:"radius",props:{radius:8}}],s[5].populate(z),y===!0&&(I-=1),o=s[5];const F={};s[6]=this.element({parent:o||"root"},y===!0?v:i),F.h=16,F.w={transition:{value:i.progress,d:100,f:"ease-in-out"}},F.effects=[{type:"radius",props:{radius:8}}],F.color="0x0087ceeb",s[6].populate(F),y===!0&&(I-=1);const H=u.components&&u.components.Circle||h.Circle;o=s[5];const X={};s[7]=this.element({parent:o||"root"},y===!0?v:i),X.size=28,X.color="0xffffffff",X.y=-6,X.x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}};const $=[];if(typeof H<"u")for(let ee in H.config.props)delete X[H.config.props[ee]],$.push(H.config.props[ee]);s[7].populate(X),y===!0&&(I-=1),o=s[7];const oe={};oe.size=28,oe.color="0xffffffff",oe.y=-6,S={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},Array.isArray(S)===!0&&(S=w(S).slice(0)),oe.x=S,m=oe.is||"Circle";let fe;if(typeof m=="string"){if(fe=u.components&&u.components[m]||h[m],!fe)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);s[8]=fe.call(null,{props:oe},s[7],i),s[8][Symbol.for("slots")][0]?(o=s[8][Symbol.for("slots")][0],v=s[8],y=!0):o=s[8][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[2];const le={};s[9]=this.element({parent:o||"root"},y===!0?v:i),le.x=1660,le.y=16,s[9].populate(le),y===!0&&(I-=1),o=s[9];const A={};s[10]=this.element({parent:o||"root"},y===!0?v:i),A.content=i.currentTime,A.size=25,A.__textnode=!0,s[10].populate(A),y===!0&&(I-=1),o=s[9];const Y={};s[11]=this.element({parent:o||"root"},y===!0?v:i),Y.x=70,Y.size=25,Y.content="/",Y.__textnode=!0,s[11].populate(Y),y===!0&&(I-=1),o=s[9];const Q={};return s[12]=this.element({parent:o||"root"},y===!0?v:i),Q.x=85,Q.size=25,Q.content=i.duration,Q.__textnode=!0,s[12].populate(Q),y===!0&&(I-=1),s},effects:[function(o,i,u,h,g,w){i[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(o,i,u,h,g,w){i[1].set("alpha",{transition:o.controlsVisibility})},function(o,i,u,h,g,w){i[3].set("effects",[{type:"radius",props:{radius:16}}])},function(o,i,u,h,g,w){i[4].set("src",o.playing?"assets/player/pause.png":"assets/player/play.png")},function(o,i,u,h,g,w){i[5].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,w){i[6].set("w",{transition:{value:o.progress,d:100,f:"ease-in-out"}})},function(o,i,u,h,g,w){i[6].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,w){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&i[7].set("x",{transition:{value:o.progress-8,d:100,f:"ease-in-out"}})},function(o,i,u,h,g,w){i[8][Symbol.for("props")].x={transition:{value:o.progress-8,d:100,f:"ease-in-out"}}},function(o,i,u,h,g,w){i[10].set("content",o.currentTime)},function(o,i,u,h,g,w){i[12].set("content",o.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await Pr.init()},async ready(){await Pr.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const f=i=>new Date(i*1e3).toISOString().substr(14,5),o=Pr.getVideoDuration();o&&(this.duration=f(o),this.progressChunkSize=Math.round(this.progressLength/o*100)/100),this.$setInterval(()=>{const i=Pr.getCurrentTime();this.currentTime=f(i),this.progress=Math.round(i*this.progressChunkSize)},1e3),this.play()},async destroy(){await Pr.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),Pr.state.playingState==!0?(Pr.pause(),this.playing=!1):(console.log("play!"),Pr.play(),this.playing=!0)},showControls(f){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=f}}}),$L=Je.Component("Colors",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=1920,m.h=1080,m.color={transition:i.bg},s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.x=20,S.y=20,s[1].populate(S),o=s[1];const v={};s[2]=this.element({parent:o||"root"},i),v.w=100,v.h=100,v.x=0,v.color="0xecfeffff",s[2].populate(v),o=s[1];const y={};s[3]=this.element({parent:o||"root"},i),y.w=100,y.h=100,y.x=120,y.color="0xa5f3fcff",s[3].populate(y),o=s[1];const I={};s[4]=this.element({parent:o||"root"},i),I.w=100,I.h=100,I.x=240,I.color="0x22d3eeff",s[4].populate(I),o=s[1];const D={};s[5]=this.element({parent:o||"root"},i),D.w=100,D.h=100,D.x=360,D.color="0x0891b2ff",s[5].populate(D),o=s[0];const T={};s[6]=this.element({parent:o||"root"},i),T.x=20,T.y=140,s[6].populate(T),o=s[6];const L={};s[7]=this.element({parent:o||"root"},i),L.w=100,L.h=100,L.x=0,L.color="0xecfeffff",s[7].populate(L),o=s[6];const B={};s[8]=this.element({parent:o||"root"},i),B.w=100,B.h=100,B.x=120,B.color="0xa5f3fcff",s[8].populate(B),o=s[6];const N={};s[9]=this.element({parent:o||"root"},i),N.w=100,N.h=100,N.x=240,N.color="0x22d3eeff",s[9].populate(N),o=s[6];const z={};s[10]=this.element({parent:o||"root"},i),z.w=100,z.h=100,z.x=360,z.color="0x0891b2ff",s[10].populate(z),o=s[0];const F={};s[11]=this.element({parent:o||"root"},i),F.x=20,F.y=260,s[11].populate(F),o=s[11];const H={};s[12]=this.element({parent:o||"root"},i),H.w=100,H.h=100,H.x=0,H.color="0xecfeffaa",s[12].populate(H),o=s[11];const X={};s[13]=this.element({parent:o||"root"},i),X.w=100,X.h=100,X.x=120,X.color="0xa5f3fc33",s[13].populate(X),o=s[11];const $={};s[14]=this.element({parent:o||"root"},i),$.w=100,$.h=100,$.x=240,$.color="0x22d3ee20",s[14].populate($),o=s[11];const oe={};s[15]=this.element({parent:o||"root"},i),oe.w=100,oe.h=100,oe.x=360,oe.color="0x0891b2ff",s[15].populate(oe),o=s[0];const fe={};s[16]=this.element({parent:o||"root"},i),fe.x=20,fe.y=380,s[16].populate(fe),o=s[16];const le={};s[17]=this.element({parent:o||"root"},i),le.w=100,le.h=100,le.x=0,le.color="0xecfeffff",s[17].populate(le),o=s[16];const A={};s[18]=this.element({parent:o||"root"},i),A.w=100,A.h=100,A.x=120,A.color="0xa5f3fcff",s[18].populate(A),o=s[16];const Y={};s[19]=this.element({parent:o||"root"},i),Y.w=100,Y.h=100,Y.x=240,Y.color="0x22d3eeff",s[19].populate(Y),o=s[16];const Q={};s[20]=this.element({parent:o||"root"},i),Q.w=100,Q.h=100,Q.x=360,Q.color="0x0891b2ff",s[20].populate(Q),o=s[0];const ee={};s[21]=this.element({parent:o||"root"},i),ee.x=20,ee.y=500,s[21].populate(ee),o=s[21];const q={};s[22]=this.element({parent:o||"root"},i),q.w=100,q.h=100,q.x=0,q.color="0xecfeffab",s[22].populate(q),o=s[21];const W={};s[23]=this.element({parent:o||"root"},i),W.w=100,W.h=100,W.x=120,W.color="0xa5f3fc33",s[23].populate(W),o=s[21];const ie={};s[24]=this.element({parent:o||"root"},i),ie.w=100,ie.h=100,ie.x=240,ie.color="0x22d3ee21",s[24].populate(ie),o=s[21];const ue={};s[25]=this.element({parent:o||"root"},i),ue.w=100,ue.h=100,ue.x=360,ue.color="0x0891b2ff",s[25].populate(ue),o=s[0];const ve={};s[26]=this.element({parent:o||"root"},i),ve.x=20,ve.y=620,s[26].populate(ve),o=s[26];const Te={};s[27]=this.element({parent:o||"root"},i),Te.w=100,Te.h=100,Te.x=0,Te.color="0x000000ff",s[27].populate(Te),o=s[26];const xe={};s[28]=this.element({parent:o||"root"},i),xe.w=100,xe.h=100,xe.x=120,xe.color="0xccccccff",s[28].populate(xe),o=s[26];const ke={};s[29]=this.element({parent:o||"root"},i),ke.w=100,ke.h=100,ke.x=240,ke.color="0x889900ff",s[29].populate(ke),o=s[26];const pe={};s[30]=this.element({parent:o||"root"},i),pe.w=100,pe.h=100,pe.x=360,pe.color="0x00ff00ff",s[30].populate(pe),o=s[0];const Le={};s[31]=this.element({parent:o||"root"},i),Le.x=20,Le.y=740,s[31].populate(Le),o=s[31];const G={};s[32]=this.element({parent:o||"root"},i),G.w=100,G.h=100,G.x=0,G.color="0x000000ff",s[32].populate(G),o=s[31];const Ie={};s[33]=this.element({parent:o||"root"},i),Ie.w=100,Ie.h=100,Ie.x=120,Ie.color="0xccccccff",s[33].populate(Ie),o=s[31];const Oe={};s[34]=this.element({parent:o||"root"},i),Oe.w=100,Oe.h=100,Oe.x=240,Oe.color="0x889900ff",s[34].populate(Oe),o=s[31];const Be={};s[35]=this.element({parent:o||"root"},i),Be.w=100,Be.h=100,Be.x=360,Be.color="0x00ff00ff",s[35].populate(Be),o=s[0];const Ve={};s[36]=this.element({parent:o||"root"},i),Ve.x=620,Ve.y=20,s[36].populate(Ve),o=s[36];const qe={};s[37]=this.element({parent:o||"root"},i),qe.w=300,qe.h=200,qe.x=0,qe.color={transition:i.color1},s[37].populate(qe),o=s[36];const ze={};s[38]=this.element({parent:o||"root"},i),ze.w=300,ze.h=200,ze.x=0,ze.y=250,ze.color={transition:i.color2},s[38].populate(ze),o=s[36];const it={};s[39]=this.element({parent:o||"root"},i),it.w=300,it.h=200,it.x=100,it.y=400,it.color={transition:i.color3},s[39].populate(it),o=s[36];const me={};return s[40]=this.element({parent:o||"root"},i),me.w=300,me.h=200,me.x=0,me.y=650,me.color={transition:{value:i.color4,d:1e3,f:"ease-in-out"}},s[40].populate(me),s},effects:[function(o,i,u,h,g,w){i[0].set("color",{transition:o.bg})},function(o,i,u,h,g,w){i[37].set("color",{transition:o.color1})},function(o,i,u,h,g,w){i[38].set("color",{transition:o.color2})},function(o,i,u,h,g,w){i[39].set("color",{transition:o.color3})},function(o,i,u,h,g,w){i[40].set("color",{transition:{value:o.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let f=0;const o=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{f=f+1,f===o.length-1&&(f=0),this.bg=o[f]},2e3)}}}),zL=Je.Component("Gradients",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.w=1920/4,S.h=1080,S.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.w=1920/4,v.h=1080,v.x=1920/4,v.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.w=1920/4,y.h=1080,y.x=1920/4*2,y.color="{top: '0x0891b2ff', right: '0xf87171ff'}",s[3].populate(y),o=s[0];const I={};return s[4]=this.element({parent:o||"root"},i),I.w=1920/4,I.h=1080,I.x=1920/4*3,I.color="{right: '0x008000ff', bottom: '0xffd700ff'}",s[4].populate(I),s},effects:[function(o,i,u,h,g,w){i[1].set("w",1920/4)},function(o,i,u,h,g,w){i[2].set("w",1920/4)},function(o,i,u,h,g,w){i[2].set("x",1920/4)},function(o,i,u,h,g,w){i[3].set("w",1920/4)},function(o,i,u,h,g,w){i[3].set("x",1920/4*2)},function(o,i,u,h,g,w){i[4].set("w",1920/4)},function(o,i,u,h,g,w){i[4].set("x",1920/4*3)}],context:{}}}),VL=Je.Component("Transitions",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.x=60,s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.w=200,S.h=200,S.x=50,S.y={transition:i.y},S.color="0xc4b5fdff",s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.w=200,v.h=200,v.x=300,v.y={transition:{value:i.y}},v.color="0xa78bfaff",s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.w=200,y.h=200,y.x=550,y.y={transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}},y.color="0x8b5cf6ff",y.ref="bla",s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.w=200,I.h=200,I.x=800,I.y={transition:{value:i.y,duration:500,delay:500,start:i.start,end:i.finished}},I.color="0x7c3aedff",s[4].populate(I),o=s[0];const D={};s[5]=this.element({parent:o||"root"},i),D.w=200,D.h=200,D.x=1050,D.y={transition:{value:i.y,easing:"ease-in-out",end:i.finished}},D.color="0x6d28d9ff",s[5].populate(D),o=s[0];const T={};s[6]=this.element({parent:o||"root"},i),T.w=200,T.h=200,T.x=1300,T.y={transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}},T.color="0x5b21b6ff",s[6].populate(T),o=s[0];const L={};return s[7]=this.element({parent:o||"root"},i),L.w=200,L.h=200,L.x=1550,L.y={transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},L.color="0x4c1d95ff",s[7].populate(L),s},effects:[function(o,i,u,h,g,w){i[1].set("y",{transition:o.y})},function(o,i,u,h,g,w){i[2].set("y",{transition:{value:o.y}})},function(o,i,u,h,g,w){i[3].set("y",{transition:{value:o.y,duration:1e3,start:o.start,end:o.doneTransition3}})},function(o,i,u,h,g,w){i[4].set("y",{transition:{value:o.y,duration:500,delay:500,start:o.start,end:o.finished}})},function(o,i,u,h,g,w){i[5].set("y",{transition:{value:o.y,easing:"ease-in-out",end:o.finished}})},function(o,i,u,h,g,w){i[6].set("y",{transition:{value:o.y,duration:3e3,easing:"ease-in-out-back",end:o.finished}})},function(o,i,u,h,g,w){i[7].set("y",{transition:{value:o.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(f,o,i){this.$log.info("Start transition",f.nodeId,o,i)},finished(f,o,i){this.$log.info("Finished transition",f.nodeId,o,i)},go(){this.y=50,this.$setTimeout(()=>{this.y=1080-50-200},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),HL=Je.Component("Alpha",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.y=100,s[1].populate(S),o=s[1];const v={};s[2]=this.element({parent:o||"root"},i),v.w=200,v.h=200,v.x=100,v.color="0xffffffff",v.alpha=.2,s[2].populate(v),o=s[1];const y={};s[3]=this.element({parent:o||"root"},i),y.w=200,y.h=200,y.x=320,y.color="0xffffffff",y.alpha=.4,s[3].populate(y),o=s[1];const I={};s[4]=this.element({parent:o||"root"},i),I.w=200,I.h=200,I.x=540,I.color="0xffffffff",I.alpha=.6,s[4].populate(I),o=s[1];const D={};s[5]=this.element({parent:o||"root"},i),D.w=200,D.h=200,D.x=760,D.color="0xffffffff",D.alpha=.8,s[5].populate(D),o=s[1];const T={};s[6]=this.element({parent:o||"root"},i),T.w=200,T.h=200,T.x=980,T.color="0xffffffff",T.alpha=1,s[6].populate(T),o=s[0];const L={};s[7]=this.element({parent:o||"root"},i),L.w=200,L.h=200,L.x=100,L.y=320,L.color="0xffffffff",L.alpha=i.alpha,s[7].populate(L),o=s[0];const B={};s[8]=this.element({parent:o||"root"},i),B.w=200,B.h=200,B.x=100,B.y=540,B.color="0xffffffff",B.alpha=i.alpha,s[8].populate(B),o=s[0];const N={};s[9]=this.element({parent:o||"root"},i),N.w=200,N.h=200,N.x=100,N.y=760,N.color="0xffffffff",N.alpha={transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}},s[9].populate(N),o=s[0];const z={};s[10]=this.element({parent:o||"root"},i),z.w=428,z.h=234,z.x=1200,z.y=100,z.src=i.image,z.alpha=1,s[10].populate(z),o=s[0];const F={};s[11]=this.element({parent:o||"root"},i),F.w=428,F.h=234,F.x=1300,F.y=100+234-40,F.src=i.image,F.alpha=.4,s[11].populate(F),o=s[0];const H={};s[12]=this.element({parent:o||"root"},i),H.w=428,H.h=234,H.x=1200,H.y=100+234*2-40*2,H.src=i.image,H.alpha=.1,s[12].populate(H),o=s[0];const X={};s[13]=this.element({parent:o||"root"},i),X.x=400,X.y=400,X.alpha=.2,X.content="Text with alpha applied directly",X.__textnode=!0,s[13].populate(X),o=s[0];const $={};s[14]=this.element({parent:o||"root"},i),$.alpha=.5,$.x=400,$.y=500,s[14].populate($),o=s[14];const oe={};return s[15]=this.element({parent:o||"root"},i),oe.content="Text with alpha applied on parent element",oe.__textnode=!0,s[15].populate(oe),s},effects:[function(o,i,u,h,g,w){i[8].set("alpha",o.alpha)},function(o,i,u,h,g,w){i[9].set("alpha",{transition:{value:o.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(o,i,u,h,g,w){i[10].set("src",o.image)},function(o,i,u,h,g,w){i[11].set("y",100+234-40)},function(o,i,u,h,g,w){i[11].set("src",o.image)},function(o,i,u,h,g,w){i[12].set("y",100+234*2-40*2)},function(o,i,u,h,g,w){i[12].set("src",o.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const f=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(f,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),GL=Je.Component("Scaling",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.x=100,S.y=100,S.w=150,S.h=150,S.color="0x64748bff",s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.x=300,v.y=100,v.w=100,v.h=100,v.color="0x64748bff",v.scale=1.5,s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.x=100,y.y=400,y.w=100,y.h=100,y.color="0xb45309ff",y.scale=i.scale,s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.x=900,I.y=400,I.w=100,I.h=100,I.src=i.balloon,I.scale={transition:{value:i.scale,easing:"ease-in-out"}},s[4].populate(I),o=s[0];const D={};s[5]=this.element({parent:o||"root"},i),D.x=300,D.y=600,D.w=100,D.h=100,D.color="0x059669ff",D.scale=i.scale2,s[5].populate(D),o=s[5];const T={};s[6]=this.element({parent:o||"root"},i),T.x=10,T.y=10,T.h=60,T.w=80,T.color="0x0369a1ff",s[6].populate(T),o=s[0];const L={};s[7]=this.element({parent:o||"root"},i),L.x=1500,L.y=600,L.w=100,L.h=100,L.color="0x059669ff",L.scale=i.scale2,s[7].populate(L),o=s[7];const B={};return s[8]=this.element({parent:o||"root"},i),B.x=10,B.y=10,B.h=60,B.w=80,B.color="0x0369a1ff",B.scale=i.scale2/2,s[8].populate(B),s},effects:[function(o,i,u,h,g,w){i[4].set("src",o.balloon)},function(o,i,u,h,g,w){i[4].set("scale",{transition:{value:o.scale,easing:"ease-in-out"}})},function(o,i,u,h,g,w){i[5].set("scale",o.scale2)},function(o,i,u,h,g,w){i[7].set("scale",o.scale2)},function(o,i,u,h,g,w){i[8].set("scale",o.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),WL=Je.Component("Rotation",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.y=70,s[1].populate(S),o=s[1];const v={};s[2]=this.element({parent:o||"root"},i),v.x=100,v.y=0,v.w=200,v.h=100,v.color="0xfee2e2ff",v.rotation=0,s[2].populate(v),o=s[1];const y={};s[3]=this.element({parent:o||"root"},i),y.x=100,y.y=150,y.w=200,y.h=100,y.color="0xfecacaff",y.rotation=10,s[3].populate(y),o=s[1];const I={};s[4]=this.element({parent:o||"root"},i),I.x=100,I.y=300,I.w=200,I.h=100,I.color="0xfca5a5ff",I.rotation=20,s[4].populate(I),o=s[1];const D={};s[5]=this.element({parent:o||"root"},i),D.x=100,D.y=450,D.w=200,D.h=100,D.color="0xf87171ff",D.rotation=30,s[5].populate(D),o=s[1];const T={};s[6]=this.element({parent:o||"root"},i),T.x=100,T.y=610,T.w=200,T.h=100,T.color="0xef4444ff",T.rotation=40,s[6].populate(T),o=s[1];const L={};s[7]=this.element({parent:o||"root"},i),L.x=100,L.y=800,L.w=200,L.h=100,L.color="0xdc2626ff",L.rotation=50,s[7].populate(L),o=s[0];const B={};s[8]=this.element({parent:o||"root"},i),B.y=70,B.x=300,s[8].populate(B),o=s[8];const N={};s[9]=this.element({parent:o||"root"},i),N.x=100,N.y=0,N.w=200,N.h=100,N.color="0xfee2e2ff",N.rotation=60,s[9].populate(N),o=s[8];const z={};s[10]=this.element({parent:o||"root"},i),z.x=100,z.y=150,z.w=200,z.h=100,z.color="0xfecacaff",z.rotation=70,s[10].populate(z),o=s[8];const F={};s[11]=this.element({parent:o||"root"},i),F.x=100,F.y=300,F.w=200,F.h=100,F.color="0xfca5a5ff",F.rotation=80,s[11].populate(F),o=s[8];const H={};s[12]=this.element({parent:o||"root"},i),H.x=100,H.y=450,H.w=200,H.h=100,H.color="0xf87171ff",H.rotation=90,s[12].populate(H),o=s[8];const X={};s[13]=this.element({parent:o||"root"},i),X.x=100,X.y=610,X.w=200,X.h=100,X.color="0xef4444ff",X.rotation=100,s[13].populate(X),o=s[8];const $={};s[14]=this.element({parent:o||"root"},i),$.x=100,$.y=800,$.w=200,$.h=100,$.color="0xdc2626ff",$.rotation=100,s[14].populate($),o=s[0];const oe={};s[15]=this.element({parent:o||"root"},i),oe.y=70,oe.x=600,s[15].populate(oe),o=s[15];const fe={};s[16]=this.element({parent:o||"root"},i),fe.x=100,fe.y=0,fe.w=200,fe.h=100,fe.color="0xfee2e2ff",fe.rotation=110,s[16].populate(fe),o=s[15];const le={};s[17]=this.element({parent:o||"root"},i),le.x=100,le.y=150,le.w=200,le.h=100,le.color="0xfecacaff",le.rotation=120,s[17].populate(le),o=s[15];const A={};s[18]=this.element({parent:o||"root"},i),A.x=100,A.y=300,A.w=200,A.h=100,A.color="0xfca5a5ff",A.rotation=130,s[18].populate(A),o=s[15];const Y={};s[19]=this.element({parent:o||"root"},i),Y.x=100,Y.y=450,Y.w=200,Y.h=100,Y.color="0xf87171ff",Y.rotation=140,s[19].populate(Y),o=s[15];const Q={};s[20]=this.element({parent:o||"root"},i),Q.x=100,Q.y=610,Q.w=200,Q.h=100,Q.color="0xef4444ff",Q.rotation=150,s[20].populate(Q),o=s[15];const ee={};s[21]=this.element({parent:o||"root"},i),ee.x=100,ee.y=800,ee.w=200,ee.h=100,ee.color="0xdc2626ff",ee.rotation=160,s[21].populate(ee),o=s[0];const q={};s[22]=this.element({parent:o||"root"},i),q.y=70,q.x=900,s[22].populate(q),o=s[22];const W={};s[23]=this.element({parent:o||"root"},i),W.x=100,W.y=0,W.w=200,W.h=100,W.color="0xfee2e2ff",W.rotation=170,s[23].populate(W),o=s[22];const ie={};s[24]=this.element({parent:o||"root"},i),ie.x=100,ie.y=150,ie.w=200,ie.h=100,ie.color="0xfecacaff",ie.rotation=180,s[24].populate(ie),o=s[22];const ue={};s[25]=this.element({parent:o||"root"},i),ue.x=100,ue.y=300,ue.w=200,ue.h=100,ue.color="0xfca5a5ff",ue.rotation=190,s[25].populate(ue),o=s[22];const ve={};s[26]=this.element({parent:o||"root"},i),ve.x=100,ve.y=450,ve.w=200,ve.h=100,ve.color="0xf87171ff",ve.rotation=200,s[26].populate(ve),o=s[22];const Te={};s[27]=this.element({parent:o||"root"},i),Te.x=100,Te.y=610,Te.w=200,Te.h=100,Te.color="0xef4444ff",Te.rotation=210,s[27].populate(Te),o=s[22];const xe={};s[28]=this.element({parent:o||"root"},i),xe.x=100,xe.y=800,xe.w=200,xe.h=100,xe.color="0xdc2626ff",xe.rotation=220,s[28].populate(xe),o=s[0];const ke={};s[29]=this.element({parent:o||"root"},i),ke.y=70,ke.x=1200,s[29].populate(ke),o=s[29];const pe={};s[30]=this.element({parent:o||"root"},i),pe.x=100,pe.y=0,pe.w=200,pe.h=100,pe.color="0xfee2e2ff",pe.rotation=230,s[30].populate(pe),o=s[29];const Le={};s[31]=this.element({parent:o||"root"},i),Le.x=100,Le.y=150,Le.w=200,Le.h=100,Le.color="0xfecacaff",Le.rotation=240,s[31].populate(Le),o=s[29];const G={};s[32]=this.element({parent:o||"root"},i),G.x=100,G.y=300,G.w=200,G.h=100,G.color="0xfca5a5ff",G.rotation=250,s[32].populate(G),o=s[29];const Ie={};s[33]=this.element({parent:o||"root"},i),Ie.x=100,Ie.y=450,Ie.w=200,Ie.h=100,Ie.color="0xf87171ff",Ie.rotation=260,s[33].populate(Ie),o=s[29];const Oe={};s[34]=this.element({parent:o||"root"},i),Oe.x=100,Oe.y=610,Oe.w=200,Oe.h=100,Oe.color="0xef4444ff",Oe.rotation=270,s[34].populate(Oe),o=s[29];const Be={};s[35]=this.element({parent:o||"root"},i),Be.x=100,Be.y=800,Be.w=200,Be.h=100,Be.color="0xdc2626ff",Be.rotation=280,s[35].populate(Be),o=s[0];const Ve={};s[36]=this.element({parent:o||"root"},i),Ve.y=70,Ve.x=1500,s[36].populate(Ve),o=s[36];const qe={};s[37]=this.element({parent:o||"root"},i),qe.x=100,qe.y=0,qe.w=200,qe.h=100,qe.color="0xfee2e2ff",qe.rotation=290,s[37].populate(qe),o=s[36];const ze={};s[38]=this.element({parent:o||"root"},i),ze.x=100,ze.y=150,ze.w=200,ze.h=100,ze.color="0xfecacaff",ze.rotation=300,s[38].populate(ze),o=s[36];const it={};s[39]=this.element({parent:o||"root"},i),it.x=100,it.y=300,it.w=200,it.h=100,it.color="0xfca5a5ff",it.rotation=310,s[39].populate(it),o=s[36];const me={};s[40]=this.element({parent:o||"root"},i),me.x=100,me.y=450,me.w=200,me.h=100,me.color="0xf87171ff",me.rotation=320,s[40].populate(me),o=s[36];const wt={};s[41]=this.element({parent:o||"root"},i),wt.x=100,wt.y=610,wt.w=200,wt.h=100,wt.color="0xef4444ff",wt.rotation=330,s[41].populate(wt),o=s[36];const ft={};s[42]=this.element({parent:o||"root"},i),ft.x=100,ft.y=800,ft.w=200,ft.h=100,ft.color="0xdc2626ff",ft.rotation=340,s[42].populate(ft),o=s[0];const rt={};s[43]=this.element({parent:o||"root"},i),rt.x=200,rt.y=200,rt.w=400,rt.h=400,rt.color="0x0891b2ff",rt.rotation=i.rotation1,s[43].populate(rt),o=s[0];const St={};s[44]=this.element({parent:o||"root"},i),St.x=800,St.y=200,St.w=400,St.h=400,St.color="0x0891b2ff",St.rotation=i.rotation2,s[44].populate(St),o=s[0];const nt={};return s[45]=this.element({parent:o||"root"},i),nt.x=1400,nt.y=200,nt.w=400,nt.h=400,nt.color="0x0891b2ff",nt.rotation={transition:i.rotation3},s[45].populate(nt),s},effects:[function(o,i,u,h,g,w){i[44].set("rotation",o.rotation2)},function(o,i,u,h,g,w){i[45].set("rotation",{transition:o.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let f=800,o=2e3;this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},f),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},o)}}}),XL=Je.Component("KeyInput",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.x=525,m.y=130,s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.w=200,S.h=200,S.color=i.focusColor,S.x=i.focusedX*220,S.y=i.focusedY*210,s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.w=180,v.h=180,v.x=10,v.y=10,v.color=i.blockColor,s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.w=180,y.h=180,y.x=230,y.y=10,y.color=i.blockColor,s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.w=180,I.h=180,I.x=450,I.y=10,I.color=i.blockColor,s[4].populate(I),o=s[0];const D={};s[5]=this.element({parent:o||"root"},i),D.w=180,D.h=180,D.x=670,D.y=10,D.color=i.blockColor,s[5].populate(D),o=s[0];const T={};s[6]=this.element({parent:o||"root"},i),T.w=180,T.h=180,T.x=10,T.y=220,T.color=i.blockColor,s[6].populate(T),o=s[0];const L={};s[7]=this.element({parent:o||"root"},i),L.w=180,L.h=180,L.x=230,L.y=220,L.color=i.blockColor,s[7].populate(L),o=s[0];const B={};s[8]=this.element({parent:o||"root"},i),B.w=180,B.h=180,B.x=450,B.y=220,B.color=i.blockColor,s[8].populate(B),o=s[0];const N={};s[9]=this.element({parent:o||"root"},i),N.w=180,N.h=180,N.x=670,N.y=220,N.color=i.blockColor,s[9].populate(N),o=s[0];const z={};s[10]=this.element({parent:o||"root"},i),z.w=180,z.h=180,z.x=10,z.y=430,z.color=i.blockColor,s[10].populate(z),o=s[0];const F={};s[11]=this.element({parent:o||"root"},i),F.w=180,F.h=180,F.x=230,F.y=430,F.color=i.blockColor,s[11].populate(F),o=s[0];const H={};s[12]=this.element({parent:o||"root"},i),H.w=180,H.h=180,H.x=450,H.y=430,H.color=i.blockColor,s[12].populate(H),o=s[0];const X={};s[13]=this.element({parent:o||"root"},i),X.w=180,X.h=180,X.x=670,X.y=430,X.color=i.blockColor,s[13].populate(X),o=s[0];const $={};s[14]=this.element({parent:o||"root"},i),$.w=180,$.h=180,$.x=10,$.y=640,$.color=i.blockColor,s[14].populate($),o=s[0];const oe={};s[15]=this.element({parent:o||"root"},i),oe.w=180,oe.h=180,oe.x=230,oe.y=640,oe.color=i.blockColor,s[15].populate(oe),o=s[0];const fe={};s[16]=this.element({parent:o||"root"},i),fe.w=180,fe.h=180,fe.x=450,fe.y=640,fe.color=i.blockColor,s[16].populate(fe),o=s[0];const le={};return s[17]=this.element({parent:o||"root"},i),le.w=180,le.h=180,le.x=670,le.y=640,le.color=i.blockColor,s[17].populate(le),s},effects:[function(o,i,u,h,g,w){i[1].set("color",o.focusColor)},function(o,i,u,h,g,w){i[1].set("x",o.focusedX*220)},function(o,i,u,h,g,w){i[1].set("y",o.focusedY*210)},function(o,i,u,h,g,w){i[2].set("color",o.blockColor)},function(o,i,u,h,g,w){i[3].set("color",o.blockColor)},function(o,i,u,h,g,w){i[4].set("color",o.blockColor)},function(o,i,u,h,g,w){i[5].set("color",o.blockColor)},function(o,i,u,h,g,w){i[6].set("color",o.blockColor)},function(o,i,u,h,g,w){i[7].set("color",o.blockColor)},function(o,i,u,h,g,w){i[8].set("color",o.blockColor)},function(o,i,u,h,g,w){i[9].set("color",o.blockColor)},function(o,i,u,h,g,w){i[10].set("color",o.blockColor)},function(o,i,u,h,g,w){i[11].set("color",o.blockColor)},function(o,i,u,h,g,w){i[12].set("color",o.blockColor)},function(o,i,u,h,g,w){i[13].set("color",o.blockColor)},function(o,i,u,h,g,w){i[14].set("color",o.blockColor)},function(o,i,u,h,g,w){i[15].set("color",o.blockColor)},function(o,i,u,h,g,w){i[16].set("color",o.blockColor)},function(o,i,u,h,g,w){i[17].set("color",o.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const f=this.focusedX-1;this.focusedX=Math.max(f,0)},right(){const f=this.focusedX+1;this.focusedX=Math.min(f,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(f){const o=parseInt(f.key);isNaN(o)?this.parent.$focus(f):(this.focusedX=Math.max(0,(o-1)%4),this.focusedY=Math.max(0,Math.ceil(o/4)-1))}}}),Dm=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],Pm=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],qL=Je.Component("Texts",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.x=100,m.y=100,s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.content="Default text",S["@loaded"]=i.textLoaded&&i.textLoaded.bind(i),S.__textnode=!0,s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.content="123456",v.x=400,v.__textnode=!0,s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.content="Text with a different fontsize",y.size=i.size,y.y=120,y.font="raleway",y.__textnode=!0,s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.content="Text with a different color",I.size=50,I.color=i.color,I.y=250,I.__textnode=!0,s[4].populate(I),o=s[0];const D={};s[5]=this.element({parent:o||"root"},i),D.content="Letterspacing",D.size=50,D.color="0x38bdf8ff",D.y=450,D.letterspacing=40,D.__textnode=!0,s[5].populate(D),o=s[0];const T={};s[6]=this.element({parent:o||"root"},i),T.w=800,T.h=100,T.y=550,T.color="0x94a3b8ff",s[6].populate(T),o=s[6];const L={};s[7]=this.element({parent:o||"root"},i),L.content="Text align center",L.size=50,L.y=15,L.color="0xbae6fdff",L.align="center",L.maxwidth=800,L.__textnode=!0,s[7].populate(L),o=s[0];const B={};s[8]=this.element({parent:o||"root"},i),B.w=800,B.h=200,B.x=900,B.y=550,B.color="0x94a3b8ff",s[8].populate(B),o=s[8];const N={};s[9]=this.element({parent:o||"root"},i),N.content=i.longText,N.size=40,N.color="0xbae6fdff",N.maxwidth=800,N.maxlines=5,N.textoverflow="!!!",N.__textnode=!0,s[9].populate(N),o=s[0];const z={};s[10]=this.element({parent:o||"root"},i),z.w=800,z.h=120,z.x=900,z.y=800,z.color="0x94a3b8ff",s[10].populate(z),o=s[10];const F={};s[11]=this.element({parent:o||"root"},i),F.content=i.longText,F.size=40,F.color="0xbae6fdff",F.maxwidth=800,F.maxlines=2,F.lineheight=60,F.textoverflow=!1,F.__textnode=!0,s[11].populate(F),o=s[0];const H={};s[12]=this.element({parent:o||"root"},i),H.content=i.character,H.size=50,H.color=i.color,H.y=750,H.font="opensans",H.__textnode=!0,s[12].populate(H),o=s[0];const X={};s[13]=this.element({parent:o||"root"},i),X.x=1200,X.y=300,s[13].populate(X),o=s[13];const $={};s[14]=this.element({parent:o||"root"},i),$.rotation={transition:i.rotation},$.pivot=0,$.content="Hello",$.__textnode=!0,s[14].populate($),o=s[13];const oe={};s[15]=this.element({parent:o||"root"},i),oe.x=150,oe.rotation={transition:i.rotation},oe.pivot=.5,oe.content="World",oe.__textnode=!0,s[15].populate(oe),o=s[13];const fe={};s[16]=this.element({parent:o||"root"},i),fe.x=300,fe.rotation={transition:i.rotation},fe.pivot=1,fe.content="!!",fe.__textnode=!0,s[16].populate(fe),o=s[0];const le={};s[17]=this.element({parent:o||"root"},i),le.x=500,le.y=700,s[17].populate(le),o=s[17];const A=[],Y=(ee=[],q,W)=>{const ie=w(ee),ue=new Set;let ve=ie.length;for(;ve--;)ie[ve],ue.add(""+ve);let Te=W.length;for(;Te--;)if(ue.has(W[Te])===!1){const pe=W[Te];q[18][pe]&&q[18][pe].destroy(),delete q[18][pe]}W.length=0;const xe=ie.length,ke=[];for(let pe=0;pe<xe;pe++){const Le=Object.create(i);o=q[17],Le.text=ie[pe],Le.index=pe,Le.key=""+pe,W.push(Le.key),o=q[17],q[18]===void 0&&(q[18]={});const G={};q[18][Le.key]===void 0&&(q[18][Le.key]=this.element({parent:o||"root"},i)),G.content=Le.text,G.y=Le.index*50,G.__textnode=!0,q[18][Le.key].nodeId===void 0&&q[18][Le.key].populate(G);let Ie=()=>{q[18][Le.key].set("y",Le.index*50)};g(Ie,null),ke.push(Ie)}return ke};let Q;return g(()=>{i[Symbol.for("removeGlobalEffects")](Q),Q=null,Q=Y(i.texts,s,A)},"texts"),g(()=>{i.text;for(let ee=0;ee<i.texts.length;ee++){const q={};q.index=ee,q.text=i.texts[ee],q.key=ee,s[18][q.key].set("content",q.text)}}),s},effects:[function(o,i,u,h,g,w){i[3].set("size",o.size)},function(o,i,u,h,g,w){i[4].set("color",o.color)},function(o,i,u,h,g,w){i[12].set("content",o.character)},function(o,i,u,h,g,w){i[12].set("color",o.color)},function(o,i,u,h,g,w){i[14].set("rotation",{transition:o.rotation})},function(o,i,u,h,g,w){i[15].set("rotation",{transition:o.rotation})},function(o,i,u,h,g,w){i[16].set("rotation",{transition:o.rotation})}],context:{}},state(){return{color:Dm[0],size:10,character:Pm[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready(){let f=0;this.$setInterval(()=>{f++,f>Dm.length-1&&(f=0),this.color=Dm[f],this.size=10*(f*2+1),this.rotation+=30},1e3);let o=0;this.$setInterval(()=>{o++,o>Pm.length-1&&(o=0),this.character=Pm[o]},1400)}},methods:{textLoaded(f){this.$log.info(`Text loaded with w: ${f.w} and h: ${f.h}`)}}}),Th=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],KL=Je.Component("Images",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.src="assets/lightningbolt.png",S.w=428,S.h=234,S.x=100,S.y=100,s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",v.w=428,v.h=234,v.x=100,v.y=400,s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.src=i.image,y.x=100,y.y=700,y["@loaded"]=i.imageLoaded&&i.imageLoaded.bind(i),s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",I.src="assets/lightningbolt.png",I.w=428,I.h=234,I.x=600,I.y=100,s[4].populate(I),o=s[0];const D={};s[5]=this.element({parent:o||"root"},i),D.x=600,D.y=400,D.w=428,D.h=234,D.clipping=i.clipping,s[5].populate(D),o=s[5];const T={};s[6]=this.element({parent:o||"root"},i),T.src="assets/lightningbolt.png",T.w=856,T.h=468,s[6].populate(T),o=s[0];const L={};return s[7]=this.element({parent:o||"root"},i),L.color=i.color,L.src="assets/lightningbolt.png",L.w=428,L.h=234,L.x=1100,L.y=100,s[7].populate(L),s},effects:[function(o,i,u,h,g,w){i[3].set("src",o.image)},function(o,i,u,h,g,w){i[5].set("clipping",o.clipping)},function(o,i,u,h,g,w){i[7].set("color",o.color)}],context:{}},state(){return{image:Th[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===Th[0]?Th[1]:Th[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(f){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${f.w} and h: ${f.h}`)}}}),Ka=Je.Component("Square",{code:{render:function(o,i,u,h,g,w){const s=[],m={};return s[0]=this.element({parent:o||"root"},i),m.w={transition:i.size},m.h={transition:i.size},m.color={transition:i.color},s[0].populate(m),s},effects:[function(o,i,u,h,g,w){i[0].set("w",{transition:o.size})},function(o,i,u,h,g,w){i[0].set("h",{transition:o.size})},function(o,i,u,h,g,w){i[0].set("color",{transition:o.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(f,o){this.$log.info(`Size changed from ${o} to ${f}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),AT=Je.Component("Card",{components:{Square:Ka},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),I.w=i.w,I.h=i.h,I.color="0x0891b2ff",s[0].populate(I),v===!0&&(y-=1);const D=u.components&&u.components.Square||h.Square;o=s[0];const T={};s[1]=this.element({parent:o||"root"},v===!0?S:i),T.x=80,T.y=80;const L=[];if(typeof D<"u")for(let oe in D.config.props)delete T[D.config.props[oe]],L.push(D.config.props[oe]);s[1].populate(T),v===!0&&(y-=1),o=s[1];const B={};B.x=80,B.y=80,m=B.is||"Square";let N;if(typeof m=="string"){if(N=u.components&&u.components[m]||h[m],!N)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(N=m);s[2]=N.call(null,{props:B},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],S=s[2],v=!0):o=s[2][Symbol.for("children")][0],v===!0&&y===0&&(v=!1);const z=u.components&&u.components.Square||h.Square;o=s[0];const F={};s[3]=this.element({parent:o||"root"},v===!0?S:i),F.x=20,F.y=20,F.size=40;const H=[];if(typeof z<"u")for(let oe in z.config.props)delete F[z.config.props[oe]],H.push(z.config.props[oe]);s[3].populate(F),v===!0&&(y-=1),o=s[3];const X={};X.x=20,X.y=20,X.size=40,m=X.is||"Square";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);return s[4]=$.call(null,{props:X},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],S=s[4],v=!0):o=s[4][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),s},effects:[],context:{}},props:["size"],computed:{w(){return this.size==="large"?400:200},h(){return this.size==="large"?500:300}}}),YL=Je.Component("Components",{components:{Square:Ka,Card:AT},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1);const T=u.components&&u.components.Square||h.Square;o=s[0];const L={};s[1]=this.element({parent:o||"root"},y===!0?v:i),L.x=100,L.y=100,L.size=50;const B=[];if(typeof T<"u")for(let st in T.config.props)delete L[T.config.props[st]],B.push(T.config.props[st]);s[1].populate(L),y===!0&&(I-=1),o=s[1];const N={};N.x=100,N.y=100,N.size=50,m=N.is||"Square";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:N},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],v=s[2],y=!0):o=s[2][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const F=u.components&&u.components.Square||h.Square;o=s[0];const H={};s[3]=this.element({parent:o||"root"},y===!0?v:i),H.x=100,H.y=200,H.size=100;const X=[];if(typeof F<"u")for(let st in F.config.props)delete H[F.config.props[st]],X.push(F.config.props[st]);s[3].populate(H),y===!0&&(I-=1),o=s[3];const $={};$.x=100,$.y=200,$.size=100,m=$.is||"Square";let oe;if(typeof m=="string"){if(oe=u.components&&u.components[m]||h[m],!oe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(oe=m);s[4]=oe.call(null,{props:$},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],v=s[4],y=!0):o=s[4][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const fe=u.components&&u.components.Square||h.Square;o=s[0];const le={};s[5]=this.element({parent:o||"root"},y===!0?v:i),le.x=100,le.y=350,le.size=200;const A=[];if(typeof fe<"u")for(let st in fe.config.props)delete le[fe.config.props[st]],A.push(fe.config.props[st]);s[5].populate(le),y===!0&&(I-=1),o=s[5];const Y={};Y.x=100,Y.y=350,Y.size=200,m=Y.is||"Square";let Q;if(typeof m=="string"){if(Q=u.components&&u.components[m]||h[m],!Q)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Q=m);s[6]=Q.call(null,{props:Y},s[5],i),s[6][Symbol.for("slots")][0]?(o=s[6][Symbol.for("slots")][0],v=s[6],y=!0):o=s[6][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ee=u.components&&u.components.Square||h.Square;o=s[0];const q={};s[7]=this.element({parent:o||"root"},y===!0?v:i),q.x={transition:i.x},q.y=600,q.size=50;const W=[];if(typeof ee<"u")for(let st in ee.config.props)delete q[ee.config.props[st]],W.push(ee.config.props[st]);s[7].populate(q),y===!0&&(I-=1),o=s[7];const ie={};S={transition:i.x},Array.isArray(S)===!0&&(S=w(S).slice(0)),ie.x=S,ie.y=600,ie.size=50,m=ie.is||"Square";let ue;if(typeof m=="string"){if(ue=u.components&&u.components[m]||h[m],!ue)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ue=m);s[8]=ue.call(null,{props:ie},s[7],i),s[8][Symbol.for("slots")][0]?(o=s[8][Symbol.for("slots")][0],v=s[8],y=!0):o=s[8][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ve=u.components&&u.components.Card||h.Card;o=s[0];const Te={};s[9]=this.element({parent:o||"root"},y===!0?v:i),Te.x=500,Te.y=100;const xe=[];if(typeof ve<"u")for(let st in ve.config.props)delete Te[ve.config.props[st]],xe.push(ve.config.props[st]);s[9].populate(Te),y===!0&&(I-=1),o=s[9];const ke={};ke.x=500,ke.y=100,m=ke.is||"Card";let pe;if(typeof m=="string"){if(pe=u.components&&u.components[m]||h[m],!pe)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);s[10]=pe.call(null,{props:ke},s[9],i),s[10][Symbol.for("slots")][0]?(o=s[10][Symbol.for("slots")][0],v=s[10],y=!0):o=s[10][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Le=u.components&&u.components.Card||h.Card;o=s[0];const G={};s[11]=this.element({parent:o||"root"},y===!0?v:i),G.x=500,G.y=500,G.size="large";const Ie=[];if(typeof Le<"u")for(let st in Le.config.props)delete G[Le.config.props[st]],Ie.push(Le.config.props[st]);s[11].populate(G),y===!0&&(I-=1),o=s[11];const Oe={};Oe.x=500,Oe.y=500,Oe.size="large",m=Oe.is||"Card";let Be;if(typeof m=="string"){if(Be=u.components&&u.components[m]||h[m],!Be)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Be=m);s[12]=Be.call(null,{props:Oe},s[11],i),s[12][Symbol.for("slots")][0]?(o=s[12][Symbol.for("slots")][0],v=s[12],y=!0):o=s[12][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[0];const Ve={};s[13]=this.element({parent:o||"root"},y===!0?v:i),Ve.x=1e3,Ve.y=100,s[13].populate(Ve),y===!0&&(I-=1),o=s[13];const qe={};s[14]=this.element({parent:o||"root"},y===!0?v:i),qe.content="Dynamic components",qe.__textnode=!0,s[14].populate(qe),y===!0&&(I-=1);const ze=u.components&&u.components.Component||h.Component;o=s[13];const it={};s[15]=this.element({parent:o||"root"},y===!0?v:i),it.is=i.dynamicComponent,it.y=100,it.color="0x0000ffff";const me=[];if(typeof ze<"u")for(let st in ze.config.props)delete it[ze.config.props[st]],me.push(ze.config.props[st]);s[15].populate(it),y===!0&&(I-=1),o=s[15];const wt={};wt.is=i.dynamicComponent,wt.y=100,wt.color="0x0000ffff",m=wt.is||"Component";let ft;if(typeof m=="string"){if(ft=u.components&&u.components[m]||h[m],!ft)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ft=m);s[16]=ft.call(null,{props:wt},s[15],i),s[16][Symbol.for("slots")][0]?(o=s[16][Symbol.for("slots")][0],v=s[16],y=!0):o=s[16][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[13];const rt=[],St=(st=[],Xe,He)=>{const Pe=w(st),J=new Set;let Ge=Pe.length;for(;Ge--;)Pe[Ge],J.add(""+Ge);let Ye=He.length;for(;Ye--;)if(J.has(He[Ye])===!1){const Ae=He[Ye];Xe[17][Ae]&&Xe[17][Ae].destroy(),delete Xe[17][Ae],Xe[18][Ae]&&Xe[18][Ae].destroy(),delete Xe[18][Ae]}He.length=0;const ht=Pe.length,vt=[];for(let Ae=0;Ae<ht;Ae++){const Ue=Object.create(i);o=Xe[13],Ue.bla=Pe[Ae],Ue.index=Ae,Ue.key=""+Ae,He.push(Ue.key);const Ze=u.components&&u.components.Component||h.Component;Xe[17]===void 0&&(Xe[17]={});const Ce={};Xe[17][Ue.key]===void 0&&(Xe[17][Ue.key]=this.element({parent:o||"root"},y===!0?v:i)),Ce.is=Ue.bla,Ce.x=205*Ue.index,Ce.y=300;const ce=[];if(typeof Ze<"u")for(let Ut in Ze.config.props)delete Ce[Ze.config.props[Ut]],ce.push(Ze.config.props[Ut]);Xe[17][Ue.key].nodeId===void 0&&(Xe[17][Ue.key].populate(Ce),y===!0&&(I-=1)),Xe[18]===void 0&&(Xe[18]={}),o=Xe[17][Ue.key];const Ne={};if(Xe[18][Ue.key]===void 0){Ne.is=Ue.bla,S=205*Ue.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),Ne.x=S,Ne.y=300,m=Ne.is||"Component";let Ut;if(typeof m=="string"){if(Ut=u.components&&u.components[m]||h[m],!Ut)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ut=m);Xe[18][Ue.key]=Ut.call(null,{props:Ne},Xe[17][Ue.key],i),Xe[18][Ue.key][Symbol.for("slots")][0]?(o=Xe[18][Ue.key][Symbol.for("slots")][0],v=Xe[18][Ue.key],y=!0):o=Xe[18][Ue.key][Symbol.for("children")][0]}let xt=()=>{(typeof ce>"u"||ce.indexOf("x")===-1)&&Xe[17][Ue.key].set("x",205*Ue.index)};g(xt,null),vt.push(xt),Xe[18][Ue.key][Symbol.for("props")].x=205*Ue.index}return vt};let nt;return g(()=>{i[Symbol.for("removeGlobalEffects")](nt),nt=null,nt=St(i.dynamicComponents,s,rt)},"dynamicComponents"),s},effects:[function(o,i,u,h,g,w){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&i[7].set("x",{transition:o.x})},function(o,i,u,h,g,w){i[8][Symbol.for("props")].x={transition:o.x}}],context:{}},state(){return{x:100,dynamicComponent:Wh,dynamicComponents:["Square","Card","Square",Wh],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),Xi=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],QL=Je.Component("ForLoop",{components:{Square:Ka},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1;const I={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(I),o=s[0];const D={};s[1]=this.element({parent:o||"root"},y===!0?v:i),D.y=20,s[1].populate(D),o=s[1];const T=[],L=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;)Ye[vt],ht.add(""+vt);let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[2][Ce]&&J[2][Ce].destroy(),delete J[2][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[1],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+Ce,Ge.push(ce.key),o=J[1],J[2]===void 0&&(J[2]={});const Ne={};J[2][ce.key]===void 0&&(J[2][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),Ne.w=80,Ne.h=80,Ne.x=ce.item,Ne.color="0x4d7c0fff",J[2][ce.key].nodeId===void 0&&J[2][ce.key].populate(Ne)}return Ze};let B;g(()=>{i[Symbol.for("removeGlobalEffects")](B),B=null,B=L(i.collection1,s,T)},"collection1"),o=s[0];const N={};s[3]=this.element({parent:o||"root"},y===!0?v:i),N.y=120,s[3].populate(N),o=s[3];const z=[],F=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;){const Ce=Ye[vt];ht.add(""+Ce.id)}let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[4][Ce]&&J[4][Ce].destroy(),delete J[4][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[3],ce.item=Ye[Ce],ce.index=Ce,ce.key=""+ce.item.id,Ge.push(ce.key),o=J[3],J[4]===void 0&&(J[4]={});const Ne={};J[4][ce.key]===void 0&&(J[4][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),Ne.w=80,Ne.h=80,Ne.x=ce.item.x*ce.index,Ne.color=ce.item.color,J[4][ce.key].nodeId===void 0&&J[4][ce.key].populate(Ne);let xt=()=>{J[4][ce.key].set("x",ce.item.x*ce.index)};g(xt,null),Ze.push(xt)}return Ze};let H;g(()=>{i[Symbol.for("removeGlobalEffects")](H),H=null,H=F(i.collection2,s,z)},"collection2"),o=s[0];const X={};s[5]=this.element({parent:o||"root"},y===!0?v:i),X.y=220,s[5].populate(X),o=s[5];const $=[],oe=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;)Ye[vt],ht.add(""+vt);let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[6][Ce]&&J[6][Ce].destroy(),delete J[6][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[5],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+Ce,Ge.push(ce.key),o=J[5],J[6]===void 0&&(J[6]={});const Ne={};J[6][ce.key]===void 0&&(J[6][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),Ne.w=80,Ne.h=80,Ne.x=ce.item.x,Ne.color=ce.item.color,J[6][ce.key].nodeId===void 0&&J[6][ce.key].populate(Ne);let xt=()=>{J[6][ce.key].set("x",ce.item.x)};g(xt,null),Ze.push(xt)}return Ze};let fe;g(()=>{i[Symbol.for("removeGlobalEffects")](fe),fe=null,fe=oe(i.collection3,s,$)},"collection3"),o=s[0];const le={};s[7]=this.element({parent:o||"root"},y===!0?v:i),le.y=320,s[7].populate(le),o=s[7];const A=[],Y=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;)Ye[vt],ht.add(""+vt);let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[8][Ce]&&J[8][Ce].destroy(),delete J[8][Ce],J[9][Ce]&&J[9][Ce].destroy(),delete J[9][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[7],ce.item=Ye[Ce],ce.index=Ce,ce.key=""+Ce,Ge.push(ce.key);const Ne=u.components&&u.components.Square||h.Square;J[8]===void 0&&(J[8]={});const xt={};J[8][ce.key]===void 0&&(J[8][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),xt.x=ce.item.x*ce.index,xt.ref="square"+ce.index,xt.alpha=ce.alpha;const Ut=[];if(typeof Ne<"u")for(let ln in Ne.config.props)delete xt[Ne.config.props[ln]],Ut.push(Ne.config.props[ln]);J[8][ce.key].nodeId===void 0&&J[8][ce.key].populate(xt),J[9]===void 0&&(J[9]={}),o=J[8][ce.key];const Ft={};if(J[9][ce.key]===void 0){S=ce.item.x*ce.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),Ft.x=S,S="square"+ce.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),Ft.ref=S,S=ce.alpha,Array.isArray(S)===!0&&(S=w(S).slice(0)),Ft.alpha=S,m=Ft.is||"Square";let ln;if(typeof m=="string"){if(ln=u.components&&u.components[m]||h[m],!ln)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ln=m);J[9][ce.key]=ln.call(null,{props:Ft},J[8][ce.key],i),J[9][ce.key][Symbol.for("slots")][0]?(o=J[9][ce.key][Symbol.for("slots")][0],v=J[9][ce.key],y=!0):o=J[9][ce.key][Symbol.for("children")][0]}let Tt=()=>{(typeof Ut>"u"||Ut.indexOf("x")===-1)&&J[8][ce.key].set("x",ce.item.x*ce.index)};g(Tt,null),Ze.push(Tt);let Vt=()=>{(typeof Ut>"u"||Ut.indexOf("ref")===-1)&&J[8][ce.key].set("ref","square"+ce.index)};g(Vt,null),Ze.push(Vt),J[9][ce.key][Symbol.for("props")].x=ce.item.x*ce.index,J[9][ce.key][Symbol.for("props")].ref="square"+ce.index}return Ze};let Q;g(()=>{i[Symbol.for("removeGlobalEffects")](Q),Q=null,Q=Y(i.collection2,s,A)},"collection2"),g(()=>{i.alpha;for(let Pe=0;Pe<i.collection2.length;Pe++){const J={};J.index=Pe,J.item=i.collection2[Pe],J.key=Pe,(typeof skip8>"u"||skip8.indexOf("alpha")===-1)&&s[8][J.key].set("alpha",i.alpha)}}),g(()=>{i.alpha;for(let Pe=0;Pe<i.collection2.length;Pe++){const J={};J.index=Pe,J.item=i.collection2[Pe],J.key=Pe,s[9][J.key][Symbol.for("props")].alpha=i.alpha}}),o=s[0];const ee={};s[10]=this.element({parent:o||"root"},y===!0?v:i),ee.y=420,s[10].populate(ee),o=s[10];const q=[],W=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;){const Ce=Ye[vt];ht.add(""+Ce.color)}let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[11][Ce]&&J[11][Ce].destroy(),delete J[11][Ce],J[12][Ce]&&J[12][Ce].destroy(),delete J[12][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[10],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+ce.item.color,Ge.push(ce.key);const Ne=u.components&&u.components.Square||h.Square;J[11]===void 0&&(J[11]={});const xt={};J[11][ce.key]===void 0&&(J[11][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),xt.x=ce.item.x,xt.alpha=ce.alpha;const Ut=[];if(typeof Ne<"u")for(let Vt in Ne.config.props)delete xt[Ne.config.props[Vt]],Ut.push(Ne.config.props[Vt]);J[11][ce.key].nodeId===void 0&&J[11][ce.key].populate(xt),J[12]===void 0&&(J[12]={}),o=J[11][ce.key];const Ft={};if(J[12][ce.key]===void 0){S=ce.item.x,Array.isArray(S)===!0&&(S=w(S).slice(0)),Ft.x=S,S=ce.alpha,Array.isArray(S)===!0&&(S=w(S).slice(0)),Ft.alpha=S,m=Ft.is||"Square";let Vt;if(typeof m=="string"){if(Vt=u.components&&u.components[m]||h[m],!Vt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Vt=m);J[12][ce.key]=Vt.call(null,{props:Ft},J[11][ce.key],i),J[12][ce.key][Symbol.for("slots")][0]?(o=J[12][ce.key][Symbol.for("slots")][0],v=J[12][ce.key],y=!0):o=J[12][ce.key][Symbol.for("children")][0]}let Tt=()=>{(typeof Ut>"u"||Ut.indexOf("x")===-1)&&J[11][ce.key].set("x",ce.item.x)};g(Tt,null),Ze.push(Tt),J[12][ce.key][Symbol.for("props")].x=ce.item.x}return Ze};let ie;g(()=>{i[Symbol.for("removeGlobalEffects")](ie),ie=null,ie=W(i.collection3,s,q)},"collection3"),g(()=>{i.alpha;for(let Pe=0;Pe<i.collection3.length;Pe++){const J={};J.undefined=Pe,J.item=i.collection3[Pe],J.key=J.item.color,(typeof skip11>"u"||skip11.indexOf("alpha")===-1)&&s[11][J.key].set("alpha",i.alpha)}}),g(()=>{i.alpha;for(let Pe=0;Pe<i.collection3.length;Pe++){const J={};J.undefined=Pe,J.item=i.collection3[Pe],J.key=J.item.color,s[12][J.key][Symbol.for("props")].alpha=i.alpha}}),o=s[0];const ue={};s[13]=this.element({parent:o||"root"},y===!0?v:i),ue.y=520,s[13].populate(ue),o=s[13];const ve=[],Te=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;)Ye[vt],ht.add(""+vt);let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[14][Ce]&&J[14][Ce].destroy(),delete J[14][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[13],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+Ce,Ge.push(ce.key),o=J[13],J[14]===void 0&&(J[14]={});const Ne={};J[14][ce.key]===void 0&&(J[14][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),Ne.w=80,Ne.h=80,Ne.x=ce.item,Ne.color="0xeab308ff",Ne.alpha=ce.alpha,J[14][ce.key].nodeId===void 0&&J[14][ce.key].populate(Ne)}return Ze};let xe;g(()=>{i[Symbol.for("removeGlobalEffects")](xe),xe=null,xe=Te(i.collection1,s,ve)},"collection1"),g(()=>{i.item;for(let Pe=0;Pe<i.collection1.length;Pe++){const J={};J.undefined=Pe,J.item=i.collection1[Pe],J.key=Pe,s[14][J.key].set("x",J.item)}}),g(()=>{i.alpha;for(let Pe=0;Pe<i.collection1.length;Pe++){const J={};J.undefined=Pe,J.item=i.collection1[Pe],J.key=Pe,s[14][J.key].set("alpha",i.alpha)}}),o=s[0];const ke={};s[15]=this.element({parent:o||"root"},y===!0?v:i),ke.y=620,s[15].populate(ke),o=s[15];const pe=[],Le=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;){const Ce=Ye[vt];ht.add(""+Ce.id)}let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[16][Ce]&&J[16][Ce].destroy(),delete J[16][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[15],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+ce.item.id,Ge.push(ce.key),o=J[15],J[16]===void 0&&(J[16]={});const Ne={};J[16][ce.key]===void 0&&(J[16][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),Ne.w=80,Ne.h=80,Ne.x=ce.item.x,Ne.color=ce.item.color,Ne.alpha=ce.alpha,J[16][ce.key].nodeId===void 0&&J[16][ce.key].populate(Ne);let xt=()=>{J[16][ce.key].set("x",ce.item.x)};g(xt,null),Ze.push(xt)}return Ze};let G;g(()=>{i[Symbol.for("removeGlobalEffects")](G),G=null,G=Le(i.collection2,s,pe)},"collection2"),g(()=>{i.alpha;for(let Pe=0;Pe<i.collection2.length;Pe++){const J={};J.undefined=Pe,J.item=i.collection2[Pe],J.key=J.item.id,s[16][J.key].set("alpha",i.alpha)}}),o=s[0];const Ie={};s[17]=this.element({parent:o||"root"},y===!0?v:i),Ie.y=720,s[17].populate(Ie),o=s[17];const Oe=[],Be=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;){const Ce=Ye[vt];ht.add(""+Ce.id)}let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[18][Ce]&&J[18][Ce].destroy(),delete J[18][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[17],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+ce.item.id,Ge.push(ce.key),o=J[17],J[18]===void 0&&(J[18]={});const Ne={};J[18][ce.key]===void 0&&(J[18][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),Ne.w=80,Ne.h=80,Ne.x=ce.item.x,Ne.color="0x06b6d4ff",J[18][ce.key].nodeId===void 0&&J[18][ce.key].populate(Ne);let xt=()=>{J[18][ce.key].set("x",ce.item.x)};g(xt,null),Ze.push(xt)}return Ze};let Ve;g(()=>{i[Symbol.for("removeGlobalEffects")](Ve),Ve=null,Ve=Be(i.collection4,s,Oe)},"collection4"),o=s[0];const qe={};s[19]=this.element({parent:o||"root"},y===!0?v:i),qe.y=720,qe.x=700,s[19].populate(qe),o=s[19];const ze=[],it=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;)Ye[vt],ht.add(""+vt);let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[20][Ce]&&J[20][Ce].destroy(),delete J[20][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[19],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+Ce,Ge.push(ce.key),o=J[19],J[20]===void 0&&(J[20]={});const Ne={};J[20][ce.key]===void 0&&(J[20][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),Ne.w=80,Ne.h=80,Ne.x=ce.item.x,Ne.color="0x8b5cf6ff",J[20][ce.key].nodeId===void 0&&J[20][ce.key].populate(Ne);let xt=()=>{J[20][ce.key].set("x",ce.item.x)};g(xt,null),Ze.push(xt)}return Ze};let me;g(()=>{i[Symbol.for("removeGlobalEffects")](me),me=null,me=it(i.collection4,s,ze)},"collection4"),o=s[0];const wt={};s[21]=this.element({parent:o||"root"},y===!0?v:i),wt.y=920,s[21].populate(wt),o=s[21];const ft=[],rt=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;){const Ce=Ye[vt];ht.add(""+Ce.id)}let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[22][Ce]&&J[22][Ce].destroy(),delete J[22][Ce],J[23][Ce]&&J[23][Ce].destroy(),delete J[23][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[21],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+ce.item.id,Ge.push(ce.key);const Ne=u.components&&u.components.Square||h.Square;J[22]===void 0&&(J[22]={});const xt={};J[22][ce.key]===void 0&&(J[22][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),xt.w=80,xt.h=80,xt.x=ce.item.x;const Ut=[];if(typeof Ne<"u")for(let Vt in Ne.config.props)delete xt[Ne.config.props[Vt]],Ut.push(Ne.config.props[Vt]);J[22][ce.key].nodeId===void 0&&J[22][ce.key].populate(xt),J[23]===void 0&&(J[23]={}),o=J[22][ce.key];const Ft={};if(J[23][ce.key]===void 0){Ft.w=80,Ft.h=80,S=ce.item.x,Array.isArray(S)===!0&&(S=w(S).slice(0)),Ft.x=S,m=Ft.is||"Square";let Vt;if(typeof m=="string"){if(Vt=u.components&&u.components[m]||h[m],!Vt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Vt=m);J[23][ce.key]=Vt.call(null,{props:Ft},J[22][ce.key],i),J[23][ce.key][Symbol.for("slots")][0]?(o=J[23][ce.key][Symbol.for("slots")][0],v=J[23][ce.key],y=!0):o=J[23][ce.key][Symbol.for("children")][0]}let Tt=()=>{(typeof Ut>"u"||Ut.indexOf("x")===-1)&&J[22][ce.key].set("x",ce.item.x)};g(Tt,null),Ze.push(Tt),J[23][ce.key][Symbol.for("props")].x=ce.item.x}return Ze};let St;g(()=>{i[Symbol.for("removeGlobalEffects")](St),St=null,St=rt(i.collection4,s,ft)},"collection4"),o=s[0];const nt={};s[24]=this.element({parent:o||"root"},y===!0?v:i),nt.y=920,nt.x=700,s[24].populate(nt),o=s[24];const st=[],Xe=(Pe=[],J,Ge)=>{const Ye=w(Pe),ht=new Set;let vt=Ye.length;for(;vt--;)Ye[vt],ht.add(""+vt);let Ae=Ge.length;for(;Ae--;)if(ht.has(Ge[Ae])===!1){const Ce=Ge[Ae];J[25][Ce]&&J[25][Ce].destroy(),delete J[25][Ce],J[26][Ce]&&J[26][Ce].destroy(),delete J[26][Ce]}Ge.length=0;const Ue=Ye.length,Ze=[];for(let Ce=0;Ce<Ue;Ce++){const ce=Object.create(i);o=J[24],ce.item=Ye[Ce],ce.undefined=Ce,ce.key=""+Ce,Ge.push(ce.key);const Ne=u.components&&u.components.Square||h.Square;J[25]===void 0&&(J[25]={});const xt={};J[25][ce.key]===void 0&&(J[25][ce.key]=this.element({parent:o||"root"},y===!0?v:i)),xt.w=80,xt.h=80,xt.x=ce.item.x;const Ut=[];if(typeof Ne<"u")for(let Vt in Ne.config.props)delete xt[Ne.config.props[Vt]],Ut.push(Ne.config.props[Vt]);J[25][ce.key].nodeId===void 0&&J[25][ce.key].populate(xt),J[26]===void 0&&(J[26]={}),o=J[25][ce.key];const Ft={};if(J[26][ce.key]===void 0){Ft.w=80,Ft.h=80,S=ce.item.x,Array.isArray(S)===!0&&(S=w(S).slice(0)),Ft.x=S,m=Ft.is||"Square";let Vt;if(typeof m=="string"){if(Vt=u.components&&u.components[m]||h[m],!Vt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Vt=m);J[26][ce.key]=Vt.call(null,{props:Ft},J[25][ce.key],i),J[26][ce.key][Symbol.for("slots")][0]?(o=J[26][ce.key][Symbol.for("slots")][0],v=J[26][ce.key],y=!0):o=J[26][ce.key][Symbol.for("children")][0]}let Tt=()=>{(typeof Ut>"u"||Ut.indexOf("x")===-1)&&J[25][ce.key].set("x",ce.item.x)};g(Tt,null),Ze.push(Tt),J[26][ce.key][Symbol.for("props")].x=ce.item.x}return Ze};let He;return g(()=>{i[Symbol.for("removeGlobalEffects")](He),He=null,He=Xe(i.collection4,s,st)},"collection4"),s},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:Xi[0]},{id:"block2",x:100,color:Xi[1]},{id:"block3",x:200,color:Xi[2]},{id:"block4",x:300,color:Xi[3]},{id:"block5",x:400,color:Xi[4]},{id:"block6",x:500,color:Xi[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=Xi[5],this.collection2[1].color=Xi[4],this.collection2[2].color=Xi[3],this.collection2[3].color=Xi[2],this.collection2[4].color=Xi[1],this.collection2[5].color=Xi[0]},4e3);let f=0;const o=this.$setInterval(()=>{this.collection3.push({x:f*100,color:Xi[f]}),f++,f===Xi.length&&clearInterval(o)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),TC=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],bC=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],EC=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],Om=f=>Math.round(Math.random()*1e3)%f;let ZL=0;const El=()=>({id:ZL++,text:`${TC[Om(TC.length)]} ${bC[Om(bC.length)]} ${EC[Om(EC.length)]}`}),JL=(f=1)=>{const o=[];for(let i=0;i<f;i++)o.push(El());return o},e6=Je.Component("LegendItem",{code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(I),v===!0&&(y-=1);const D=u.components&&u.components.Circle||h.Circle;o=s[0];const T={};s[1]=this.element({parent:o||"root"},v===!0?S:i),T.color="0xfb923cff",T.size=60;const L=[];if(typeof D<"u")for(let H in D.config.props)delete T[D.config.props[H]],L.push(D.config.props[H]);s[1].populate(T),v===!0&&(y-=1),o=s[1];const B={};B.color="0xfb923cff",B.size=60,m=B.is||"Circle";let N;if(typeof m=="string"){if(N=u.components&&u.components[m]||h[m],!N)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(N=m);s[2]=N.call(null,{props:B},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],S=s[2],v=!0):o=s[2][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[0];const z={};s[3]=this.element({parent:o||"root"},v===!0?S:i),z.color="0xe5e5e5ff",z.size=32,z.y=10,z.maxwidth=57,z.align="center",z.content=""+i.id,z.__textnode=!0,s[3].populate(z),v===!0&&(y-=1),o=s[0];const F={};return s[4]=this.element({parent:o||"root"},v===!0?S:i),F.color="0xe5e5e5ff",F.x=80,F.y=14,F.size=28,F.content=""+i.text,F.__textnode=!0,s[4].populate(F),v===!0&&(y-=1),s},effects:[],context:{}},props:["id","text"]}),IT=Je.Component("Row",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=380,m.h=60,m.y=i.index*80,m.color="0xfff7edff",s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.w=10,S.h=60,S.color="0x06b6d4ff",s[1].populate(S),o=s[0];const v={};return s[2]=this.element({parent:o||"root"},i),v.content=i.text,v.x=30,v.y=15,v.font="lato",v.size=28,v.color=i.activeRow==i.index?"0x06b6d4ff":"0x1e293bff",v.__textnode=!0,s[2].populate(v),s},effects:[function(o,i,u,h,g,w){i[0].set("y",o.index*80)},function(o,i,u,h,g,w){i[2].set("content",o.text)},function(o,i,u,h,g,w){i[2].set("color",o.activeRow==o.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),t6=Je.Component("Rows",{components:{Row:IT},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1;const I={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(I),o=s[0];const D=[],T=(B=[],N,z)=>{const F=w(B),H=new Set;let X=F.length;for(;X--;){const le=F[X];H.add(""+le.id+"key2")}let $=z.length;for(;$--;)if(H.has(z[$])===!1){const le=z[$];N[1][le]&&N[1][le].destroy(),delete N[1][le],N[2][le]&&N[2][le].destroy(),delete N[2][le]}z.length=0;const oe=F.length,fe=[];for(let le=0;le<oe;le++){const A=Object.create(i);o=N[0],A.item=F[le],A.index=le,A.key=""+A.item.id+"key2",z.push(A.key);const Y=u.components&&u.components.Row||h.Row;N[1]===void 0&&(N[1]={});const Q={};N[1][A.key]===void 0&&(N[1][A.key]=this.element({parent:o||"root"},y===!0?v:i)),Q.activeRow=A.activeRowIndex,Q.index=A.index,Q.text=A.item.text,Q.y=50;const ee=[];if(typeof Y<"u")for(let ue in Y.config.props)delete Q[Y.config.props[ue]],ee.push(Y.config.props[ue]);N[1][A.key].nodeId===void 0&&N[1][A.key].populate(Q),N[2]===void 0&&(N[2]={}),o=N[1][A.key];const q={};if(N[2][A.key]===void 0){S=A.activeRowIndex,Array.isArray(S)===!0&&(S=w(S).slice(0)),q.activeRow=S,S=A.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),q.index=S,S=A.item.text,Array.isArray(S)===!0&&(S=w(S).slice(0)),q.text=S,q.y=50,m=q.is||"Row";let ue;if(typeof m=="string"){if(ue=u.components&&u.components[m]||h[m],!ue)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ue=m);N[2][A.key]=ue.call(null,{props:q},N[1][A.key],i),N[2][A.key][Symbol.for("slots")][0]?(o=N[2][A.key][Symbol.for("slots")][0],v=N[2][A.key],y=!0):o=N[2][A.key][Symbol.for("children")][0]}let W=()=>{(typeof ee>"u"||ee.indexOf("index")===-1)&&N[1][A.key].set("index",A.index)};g(W,null),fe.push(W);let ie=()=>{(typeof ee>"u"||ee.indexOf("text")===-1)&&N[1][A.key].set("text",A.item.text)};g(ie,null),fe.push(ie),N[2][A.key][Symbol.for("props")].index=A.index,N[2][A.key][Symbol.for("props")].text=A.item.text}return fe};let L;return g(()=>{i[Symbol.for("removeGlobalEffects")](L),L=null,L=T(i.data,s,D)},"data"),g(()=>{i.activeRowIndex;for(let B=0;B<i.data.length;B++){const N={};N.index=B,N.item=i.data[B],N.key=N.item.id+"key2",(typeof skip1>"u"||skip1.indexOf("activeRow")===-1)&&s[1][N.key].set("activeRow",i.activeRowIndex)}}),g(()=>{i.activeRowIndex;for(let B=0;B<i.data.length;B++){const N={};N.index=B,N.item=i.data[B],N.key=N.item.id+"key2",s[2][N.key][Symbol.for("props")].activeRow=i.activeRowIndex}}),s},effects:[],context:{}},props:["data","activeRowIndex"]}),n6=Je.Component("ForLoop",{components:{Square:Ka,LegendItem:e6,Row:IT,Rows:t6},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.x=100,T.y=60,T.size=48,T.content="Array operations test",T.__textnode=!0,s[1].populate(T),y===!0&&(I-=1),o=s[0];const L={};s[2]=this.element({parent:o||"root"},y===!0?v:i),L.y=170,L.x=140,s[2].populate(L),y===!0&&(I-=1),o=s[2];const B={};s[3]=this.element({parent:o||"root"},y===!0?v:i),B.x=-10,B.w=500,B.h=80,B.color="0x64748bff",B.y={transition:i.y},B.alpha={transition:!i.hide},s[3].populate(B),y===!0&&(I-=1);const N=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const z={};s[4]=this.element({parent:o||"root"},y===!0?v:i),z.y=0,z.id="a",z.text="Fill array by assignment";const F=[];if(typeof N<"u")for(let Me in N.config.props)delete z[N.config.props[Me]],F.push(N.config.props[Me]);s[4].populate(z),y===!0&&(I-=1),o=s[4];const H={};H.y=0,H.id="a",H.text="Fill array by assignment",m=H.is||"LegendItem";let X;if(typeof m=="string"){if(X=u.components&&u.components[m]||h[m],!X)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(X=m);s[5]=X.call(null,{props:H},s[4],i),s[5][Symbol.for("slots")][0]?(o=s[5][Symbol.for("slots")][0],v=s[5],y=!0):o=s[5][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const $=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const oe={};s[6]=this.element({parent:o||"root"},y===!0?v:i),oe.y=90,oe.id="b",oe.text="Push new item to array";const fe=[];if(typeof $<"u")for(let Me in $.config.props)delete oe[$.config.props[Me]],fe.push($.config.props[Me]);s[6].populate(oe),y===!0&&(I-=1),o=s[6];const le={};le.y=90,le.id="b",le.text="Push new item to array",m=le.is||"LegendItem";let A;if(typeof m=="string"){if(A=u.components&&u.components[m]||h[m],!A)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(A=m);s[7]=A.call(null,{props:le},s[6],i),s[7][Symbol.for("slots")][0]?(o=s[7][Symbol.for("slots")][0],v=s[7],y=!0):o=s[7][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Y=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const Q={};s[8]=this.element({parent:o||"root"},y===!0?v:i),Q.y=180,Q.id="c",Q.text="Pop item from array";const ee=[];if(typeof Y<"u")for(let Me in Y.config.props)delete Q[Y.config.props[Me]],ee.push(Y.config.props[Me]);s[8].populate(Q),y===!0&&(I-=1),o=s[8];const q={};q.y=180,q.id="c",q.text="Pop item from array",m=q.is||"LegendItem";let W;if(typeof m=="string"){if(W=u.components&&u.components[m]||h[m],!W)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[9]=W.call(null,{props:q},s[8],i),s[9][Symbol.for("slots")][0]?(o=s[9][Symbol.for("slots")][0],v=s[9],y=!0):o=s[9][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ie=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const ue={};s[10]=this.element({parent:o||"root"},y===!0?v:i),ue.y=270,ue.id="d",ue.text="Shift item from array";const ve=[];if(typeof ie<"u")for(let Me in ie.config.props)delete ue[ie.config.props[Me]],ve.push(ie.config.props[Me]);s[10].populate(ue),y===!0&&(I-=1),o=s[10];const Te={};Te.y=270,Te.id="d",Te.text="Shift item from array",m=Te.is||"LegendItem";let xe;if(typeof m=="string"){if(xe=u.components&&u.components[m]||h[m],!xe)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xe=m);s[11]=xe.call(null,{props:Te},s[10],i),s[11][Symbol.for("slots")][0]?(o=s[11][Symbol.for("slots")][0],v=s[11],y=!0):o=s[11][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ke=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const pe={};s[12]=this.element({parent:o||"root"},y===!0?v:i),pe.y=360,pe.id="e",pe.text="Splice 2 items from array";const Le=[];if(typeof ke<"u")for(let Me in ke.config.props)delete pe[ke.config.props[Me]],Le.push(ke.config.props[Me]);s[12].populate(pe),y===!0&&(I-=1),o=s[12];const G={};G.y=360,G.id="e",G.text="Splice 2 items from array",m=G.is||"LegendItem";let Ie;if(typeof m=="string"){if(Ie=u.components&&u.components[m]||h[m],!Ie)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ie=m);s[13]=Ie.call(null,{props:G},s[12],i),s[13][Symbol.for("slots")][0]?(o=s[13][Symbol.for("slots")][0],v=s[13],y=!0):o=s[13][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Oe=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const Be={};s[14]=this.element({parent:o||"root"},y===!0?v:i),Be.y=450,Be.id="f",Be.text="Unshift 2 items into array";const Ve=[];if(typeof Oe<"u")for(let Me in Oe.config.props)delete Be[Oe.config.props[Me]],Ve.push(Oe.config.props[Me]);s[14].populate(Be),y===!0&&(I-=1),o=s[14];const qe={};qe.y=450,qe.id="f",qe.text="Unshift 2 items into array",m=qe.is||"LegendItem";let ze;if(typeof m=="string"){if(ze=u.components&&u.components[m]||h[m],!ze)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ze=m);s[15]=ze.call(null,{props:qe},s[14],i),s[15][Symbol.for("slots")][0]?(o=s[15][Symbol.for("slots")][0],v=s[15],y=!0):o=s[15][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const it=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const me={};s[16]=this.element({parent:o||"root"},y===!0?v:i),me.y=540,me.id="g",me.text="Empty array by assignment";const wt=[];if(typeof it<"u")for(let Me in it.config.props)delete me[it.config.props[Me]],wt.push(it.config.props[Me]);s[16].populate(me),y===!0&&(I-=1),o=s[16];const ft={};ft.y=540,ft.id="g",ft.text="Empty array by assignment",m=ft.is||"LegendItem";let rt;if(typeof m=="string"){if(rt=u.components&&u.components[m]||h[m],!rt)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(rt=m);s[17]=rt.call(null,{props:ft},s[16],i),s[17][Symbol.for("slots")][0]?(o=s[17][Symbol.for("slots")][0],v=s[17],y=!0):o=s[17][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const St=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const nt={};s[18]=this.element({parent:o||"root"},y===!0?v:i),nt.y=630,nt.id="h",nt.text="Concat an array with items";const st=[];if(typeof St<"u")for(let Me in St.config.props)delete nt[St.config.props[Me]],st.push(St.config.props[Me]);s[18].populate(nt),y===!0&&(I-=1),o=s[18];const Xe={};Xe.y=630,Xe.id="h",Xe.text="Concat an array with items",m=Xe.is||"LegendItem";let He;if(typeof m=="string"){if(He=u.components&&u.components[m]||h[m],!He)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(He=m);s[19]=He.call(null,{props:Xe},s[18],i),s[19][Symbol.for("slots")][0]?(o=s[19][Symbol.for("slots")][0],v=s[19],y=!0):o=s[19][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Pe=u.components&&u.components.LegendItem||h.LegendItem;o=s[2];const J={};s[20]=this.element({parent:o||"root"},y===!0?v:i),J.y=720,J.id="i",J.text="Sort array alphabetically";const Ge=[];if(typeof Pe<"u")for(let Me in Pe.config.props)delete J[Pe.config.props[Me]],Ge.push(Pe.config.props[Me]);s[20].populate(J),y===!0&&(I-=1),o=s[20];const Ye={};Ye.y=720,Ye.id="i",Ye.text="Sort array alphabetically",m=Ye.is||"LegendItem";let ht;if(typeof m=="string"){if(ht=u.components&&u.components[m]||h[m],!ht)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ht=m);s[21]=ht.call(null,{props:Ye},s[20],i),s[21][Symbol.for("slots")][0]?(o=s[21][Symbol.for("slots")][0],v=s[21],y=!0):o=s[21][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[2];const vt={};s[22]=this.element({parent:o||"root"},y===!0?v:i),vt.y=840,s[22].populate(vt),y===!0&&(I-=1),o=s[22];const Ae={};s[23]=this.element({parent:o||"root"},y===!0?v:i),Ae.size=26,Ae.y=10,Ae.content="Array length:",Ae.__textnode=!0,s[23].populate(Ae),y===!0&&(I-=1),o=s[22];const Ue={};s[24]=this.element({parent:o||"root"},y===!0?v:i),Ue.content=i.data.length,Ue.size=40,Ue.x=180,Ue.color="0xfb923cff",Ue.__textnode=!0,s[24].populate(Ue),y===!0&&(I-=1),o=s[0];const Ze={};s[25]=this.element({parent:o||"root"},y===!0?v:i),Ze.x=660,Ze.y=100,s[25].populate(Ze),y===!0&&(I-=1),o=s[25];const Ce={};s[26]=this.element({parent:o||"root"},y===!0?v:i),Ce.content="For loop on Element",Ce.__textnode=!0,s[26].populate(Ce),y===!0&&(I-=1),o=s[25];const ce=[],Ne=(Me=[],$e,Qt)=>{const Sn=w(Me),En=new Set;let dn=Sn.length;for(;dn--;){const Ct=Sn[dn];En.add(""+Ct.id+"key")}let Mn=Qt.length;for(;Mn--;)if(En.has(Qt[Mn])===!1){const Ct=Qt[Mn];$e[27][Ct]&&$e[27][Ct].destroy(),delete $e[27][Ct],$e[28][Ct]&&$e[28][Ct].destroy(),delete $e[28][Ct],$e[29][Ct]&&$e[29][Ct].destroy(),delete $e[29][Ct]}Qt.length=0;const _n=Sn.length,Wn=[];for(let Ct=0;Ct<_n;Ct++){const et=Object.create(i);o=$e[25],et.item=Sn[Ct],et.index=Ct,et.key=""+et.item.id+"key",Qt.push(et.key),o=$e[25],$e[27]===void 0&&($e[27]={});const Un={};$e[27][et.key]===void 0&&($e[27][et.key]=this.element({parent:o||"root"},y===!0?v:i)),Un.w=380,Un.h=60,Un.y=et.index*80+50,Un.color="0xfff7edff",$e[27][et.key].nodeId===void 0&&($e[27][et.key].populate(Un),y===!0&&(I-=1)),o=$e[27][et.key],$e[28]===void 0&&($e[28]={});const Ht={};$e[28][et.key]===void 0&&($e[28][et.key]=this.element({parent:o||"root"},y===!0?v:i)),Ht.w=10,Ht.h=60,Ht.color="0xfb923cff",$e[28][et.key].nodeId===void 0&&($e[28][et.key].populate(Ht),y===!0&&(I-=1)),o=$e[27][et.key],$e[29]===void 0&&($e[29]={});const Rn={};$e[29][et.key]===void 0&&($e[29][et.key]=this.element({parent:o||"root"},y===!0?v:i)),Rn.content=et.item.text,Rn.x=30,Rn.y=15,Rn.font="lato",Rn.size=28,Rn.color=et.activeRowIndex===et.index?"0x06b6d4ff":"0x1e293bff",Rn.__textnode=!0,$e[29][et.key].nodeId===void 0&&($e[29][et.key].populate(Rn),y===!0&&(I-=1));let pn=()=>{$e[27][et.key].set("y",et.index*80+50)};g(pn,null),Wn.push(pn);let Lt=()=>{$e[29][et.key].set("content",et.item.text)};g(Lt,null),Wn.push(Lt)}return Wn};let xt;g(()=>{i[Symbol.for("removeGlobalEffects")](xt),xt=null,xt=Ne(i.data,s,ce)},"data"),g(()=>{i.activeRowIndex;for(let Me=0;Me<i.data.length;Me++){const $e={};$e.index=Me,$e.item=i.data[Me],$e.key=$e.item.id+"key",s[29][$e.key].set("color",i.activeRowIndex===$e.index?"0x06b6d4ff":"0x1e293bff")}}),o=s[0];const Ut={};s[30]=this.element({parent:o||"root"},y===!0?v:i),Ut.x=1080,Ut.y=100,s[30].populate(Ut),y===!0&&(I-=1),o=s[30];const Ft={};s[31]=this.element({parent:o||"root"},y===!0?v:i),Ft.content="For loop on Component",Ft.__textnode=!0,s[31].populate(Ft),y===!0&&(I-=1),o=s[30];const Tt=[],Vt=(Me=[],$e,Qt)=>{const Sn=w(Me),En=new Set;let dn=Sn.length;for(;dn--;){const Ct=Sn[dn];En.add(""+Ct.id+"key2")}let Mn=Qt.length;for(;Mn--;)if(En.has(Qt[Mn])===!1){const Ct=Qt[Mn];$e[32][Ct]&&$e[32][Ct].destroy(),delete $e[32][Ct],$e[33][Ct]&&$e[33][Ct].destroy(),delete $e[33][Ct]}Qt.length=0;const _n=Sn.length,Wn=[];for(let Ct=0;Ct<_n;Ct++){const et=Object.create(i);o=$e[30],et.item=Sn[Ct],et.index=Ct,et.key=""+et.item.id+"key2",Qt.push(et.key);const Un=u.components&&u.components.Row||h.Row;$e[32]===void 0&&($e[32]={});const Ht={};$e[32][et.key]===void 0&&($e[32][et.key]=this.element({parent:o||"root"},y===!0?v:i)),Ht.activeRow=(et.count>0,et.activeRowIndex),Ht.index=et.index,Ht.text=et.item.text,Ht.y=50;const Rn=[];if(typeof Un<"u")for(let Cn in Un.config.props)delete Ht[Un.config.props[Cn]],Rn.push(Un.config.props[Cn]);$e[32][et.key].nodeId===void 0&&($e[32][et.key].populate(Ht),y===!0&&(I-=1)),$e[33]===void 0&&($e[33]={}),o=$e[32][et.key];const pn={};if($e[33][et.key]===void 0){S=(et.count>0,et.activeRowIndex),Array.isArray(S)===!0&&(S=w(S).slice(0)),pn.activeRow=S,S=et.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),pn.index=S,S=et.item.text,Array.isArray(S)===!0&&(S=w(S).slice(0)),pn.text=S,pn.y=50,m=pn.is||"Row";let Cn;if(typeof m=="string"){if(Cn=u.components&&u.components[m]||h[m],!Cn)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Cn=m);$e[33][et.key]=Cn.call(null,{props:pn},$e[32][et.key],i),$e[33][et.key][Symbol.for("slots")][0]?(o=$e[33][et.key][Symbol.for("slots")][0],v=$e[33][et.key],y=!0):o=$e[33][et.key][Symbol.for("children")][0]}let Lt=()=>{(typeof Rn>"u"||Rn.indexOf("index")===-1)&&$e[32][et.key].set("index",et.index)};g(Lt,null),Wn.push(Lt);let Si=()=>{(typeof Rn>"u"||Rn.indexOf("text")===-1)&&$e[32][et.key].set("text",et.item.text)};g(Si,null),Wn.push(Si),$e[33][et.key][Symbol.for("props")].index=et.index,$e[33][et.key][Symbol.for("props")].text=et.item.text}return Wn};let ln;g(()=>{i[Symbol.for("removeGlobalEffects")](ln),ln=null,ln=Vt(i.data,s,Tt)},"data"),g(()=>{i.activeRowIndex,i.count;for(let Me=0;Me<i.data.length;Me++){const $e={};$e.index=Me,$e.item=i.data[Me],$e.key=$e.item.id+"key2",(typeof skip32>"u"||skip32.indexOf("activeRow")===-1)&&s[32][$e.key].set("activeRow",(i.count>0,i.activeRowIndex))}}),g(()=>{i.activeRowIndex,i.count;for(let Me=0;Me<i.data.length;Me++){const $e={};$e.index=Me,$e.item=i.data[Me],$e.key=$e.item.id+"key2",s[33][$e.key][Symbol.for("props")].activeRow=(i.count>0,i.activeRowIndex)}}),o=s[0];const pi={};s[34]=this.element({parent:o||"root"},y===!0?v:i),pi.x=1500,pi.y=100,s[34].populate(pi),y===!0&&(I-=1),o=s[34];const Qn={};s[35]=this.element({parent:o||"root"},y===!0?v:i),Qn.content="RowsComponent",Qn.__textnode=!0,s[35].populate(Qn),y===!0&&(I-=1);const zn=u.components&&u.components.Rows||h.Rows;o=s[34];const Vn={};s[36]=this.element({parent:o||"root"},y===!0?v:i),Vn.data=i.data,Vn.activeRowIndex=i.activeRowIndex;const In=[];if(typeof zn<"u")for(let Me in zn.config.props)delete Vn[zn.config.props[Me]],In.push(zn.config.props[Me]);s[36].populate(Vn),y===!0&&(I-=1),o=s[36];const ni={};S=i.data,Array.isArray(S)===!0&&(S=w(S).slice(0)),ni.data=S,S=i.activeRowIndex,Array.isArray(S)===!0&&(S=w(S).slice(0)),ni.activeRowIndex=S,m=ni.is||"Rows";let yn;if(typeof m=="string"){if(yn=u.components&&u.components[m]||h[m],!yn)throw new Error('Component "Rows" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(yn=m);return s[37]=yn.call(null,{props:ni},s[36],i),s[37][Symbol.for("slots")][0]?(o=s[37][Symbol.for("slots")][0],v=s[37],y=!0):o=s[37][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){i[3].set("y",{transition:o.y})},function(o,i,u,h,g,w){i[3].set("alpha",{transition:!o.hide})},function(o,i,u,h,g,w){i[24].set("content",o.data.length)},function(o,i,u,h,g,w){(typeof skip36>"u"||skip36.indexOf("data")===-1)&&i[36].set("data",o.data)},function(o,i,u,h,g,w){(typeof skip36>"u"||skip36.indexOf("activeRowIndex")===-1)&&i[36].set("activeRowIndex",o.activeRowIndex)},function(o,i,u,h,g,w){i[37][Symbol.for("props")].data=o.data},function(o,i,u,h,g,w){i[37][Symbol.for("props")].activeRowIndex=o.activeRowIndex}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show(){return this.hide===!0},data2(){return this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const f=[];for(let o=0;o<6;o++)f.push(El());this.data=f},b(){this.y=80,this.$trigger("y"),this.data.push(El())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(El(),El())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(JL(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=this.sortDirection===1?0:1,this.data=this.data.sort((f,o)=>{const i=f.text.toLowerCase(),u=o.text.toLowerCase();return this.sortDirection===1?i<u?-1:i>u?1:0:i>u?-1:i<u?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),i6=Je.Component("Effects",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.w=160,S.h=160,S.x=40,S.y=40,S.color="0xfb923cff",S.effects=[{type:"radius",props:{radius:44}}],s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.w=160,v.h=160,v.x=240,v.y=40,v.color="0xd97706ff",v.effects=[{type:"radius",props:{radius:25}}],s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.w=160,y.h=160,y.x=440,y.y=40,y.color="0xb45309ff",y.effects=[{type:"radius",props:{radius:80}}],s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.w=160,I.h=160,I.x=640,I.y=40,I.color="0x78350fff",I.effects=[{type:"radius",props:{radius:10}}],s[4].populate(I),o=s[0];const D={};s[5]=this.element({parent:o||"root"},i),D.w=160,D.h=160,D.x=40,D.y=240,D.color="0x65a30dff",D.effects=[{type:"radius",props:{radius:i.radius}}],s[5].populate(D),o=s[0];const T={};s[6]=this.element({parent:o||"root"},i),T.w=300,T.h=300,T.x=40,T.y=440,T.color="0x0c4a6eff",T.effects=[{type:"radius",props:{radius:30}}],s[6].populate(T),o=s[6];const L={};s[7]=this.element({parent:o||"root"},i),L.w=200,L.h=200,L.x=50,L.y=50,L.color="0x0284c7ff",L.effects=[{type:"radius",props:{radius:40}}],s[7].populate(L),o=s[7];const B={};s[8]=this.element({parent:o||"root"},i),B.w=100,B.h=100,B.x=50,B.y=50,B.color="0x38bdf8ff",B.effects=[{type:"radius",props:{radius:50}}],s[8].populate(B),o=s[8];const N={};s[9]=this.element({parent:o||"root"},i),N.w=40,N.h=40,N.x=30,N.y=30,N.color="0xbae6fdff",N.effects=[{type:"radius",props:{radius:20}}],s[9].populate(N),o=s[0];const z={};s[10]=this.element({parent:o||"root"},i),z.w=160,z.h=160,z.x=840,z.y=40,z.color="0x3b82f6ff",z.effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],s[10].populate(z),o=s[0];const F={};return s[11]=this.element({parent:o||"root"},i),F.w=160,F.h=160,F.x=1040,F.y=40,F.color="0x500724ff",F.effects=i.effects,s[11].populate(F),s},effects:[function(o,i,u,h,g,w){i[1].set("effects",[{type:"radius",props:{radius:44}}])},function(o,i,u,h,g,w){i[2].set("effects",[{type:"radius",props:{radius:25}}])},function(o,i,u,h,g,w){i[3].set("effects",[{type:"radius",props:{radius:80}}])},function(o,i,u,h,g,w){i[4].set("effects",[{type:"radius",props:{radius:10}}])},function(o,i,u,h,g,w){i[5].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,u,h,g,w){i[6].set("effects",[{type:"radius",props:{radius:30}}])},function(o,i,u,h,g,w){i[7].set("effects",[{type:"radius",props:{radius:40}}])},function(o,i,u,h,g,w){i[8].set("effects",[{type:"radius",props:{radius:50}}])},function(o,i,u,h,g,w){i[9].set("effects",[{type:"radius",props:{radius:20}}])},function(o,i,u,h,g,w){i[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(o,i,u,h,g,w){i[11].set("effects",o.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}},hooks:{ready(){this.$setInterval(()=>{const o=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(o,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let f=0;this.$setInterval(()=>{f++,f%2?this.effects=[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:this.effects=[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),o6=Je.Component("ShowIf",{components:{Square:Ka},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.y=40,s[1].populate(T),y===!0&&(I-=1),o=s[1];const L={};s[2]=this.element({parent:o||"root"},y===!0?v:i),L.x=50,L.w=200,L.h=300,L.color="0xbef264ff",L.show=!0,s[2].populate(L),y===!0&&(I-=1),o=s[1];const B={};s[3]=this.element({parent:o||"root"},y===!0?v:i),B.x=350,B.w=200,B.h=300,B.color="0xff0000ff",B.show=!1,s[3].populate(B),y===!0&&(I-=1),o=s[1];const N={};s[4]=this.element({parent:o||"root"},y===!0?v:i),N.x=650,N.w=200,N.h=300,N.color="0x84cc16ff",N.show=1,s[4].populate(N),y===!0&&(I-=1),o=s[1];const z={};s[5]=this.element({parent:o||"root"},y===!0?v:i),z.x=950,z.w=200,z.h=300,z.color="0xff0000ff",z.show=0,s[5].populate(z),y===!0&&(I-=1),o=s[0];const F={};s[6]=this.element({parent:o||"root"},y===!0?v:i),F.y=380,s[6].populate(F),y===!0&&(I-=1),o=s[6];const H={};s[7]=this.element({parent:o||"root"},y===!0?v:i),H.x=50,H.w=200,H.h=300,H.color="0xfde047ff",H.show=i.showNr,s[7].populate(H),y===!0&&(I-=1),o=s[6];const X={};s[8]=this.element({parent:o||"root"},y===!0?v:i),X.x=350,X.w=200,X.h=300,X.color="0x0000ffff",X.show=i.hideNr,s[8].populate(X),y===!0&&(I-=1),o=s[6];const $={};s[9]=this.element({parent:o||"root"},y===!0?v:i),$.x=650,$.w=200,$.h=300,$.color="0x84cc16ff",$.show=i.showBool,s[9].populate($),y===!0&&(I-=1),o=s[6];const oe={};s[10]=this.element({parent:o||"root"},y===!0?v:i),oe.x=950,oe.w=200,oe.h=300,oe.color="0xff0000ff",oe.show=i.hideBool,s[10].populate(oe),y===!0&&(I-=1),o=s[0];const fe={};s[11]=this.element({parent:o||"root"},y===!0?v:i),fe.y=720,s[11].populate(fe),y===!0&&(I-=1),o=s[11];const le={};s[12]=this.element({parent:o||"root"},y===!0?v:i),le.x=50,le.w=200,le.h=300,le.color="0x5eead4ff",le.show=i.showHideToggle,s[12].populate(le),y===!0&&(I-=1),o=s[0];const A={};s[13]=this.element({parent:o||"root"},y===!0?v:i),A.y=40,A.x=1e3,s[13].populate(A),y===!0&&(I-=1);const Y=u.components&&u.components.Square||h.Square;o=s[13];const Q={};s[14]=this.element({parent:o||"root"},y===!0?v:i),Q.show=!0;const ee=[];if(typeof Y<"u")for(let ze in Y.config.props)delete Q[Y.config.props[ze]],ee.push(Y.config.props[ze]);s[14].populate(Q),y===!0&&(I-=1),o=s[14];const q={};q.show=!0,m=q.is||"Square";let W;if(typeof m=="string"){if(W=u.components&&u.components[m]||h[m],!W)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[15]=W.call(null,{props:q},s[14],i),s[15][Symbol.for("slots")][0]?(o=s[15][Symbol.for("slots")][0],v=s[15],y=!0):o=s[15][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ie=u.components&&u.components.Square||h.Square;o=s[13];const ue={};s[16]=this.element({parent:o||"root"},y===!0?v:i),ue.y=100,ue.show=!1;const ve=[];if(typeof ie<"u")for(let ze in ie.config.props)delete ue[ie.config.props[ze]],ve.push(ie.config.props[ze]);s[16].populate(ue),y===!0&&(I-=1),o=s[16];const Te={};Te.y=100,Te.show=!1,m=Te.is||"Square";let xe;if(typeof m=="string"){if(xe=u.components&&u.components[m]||h[m],!xe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xe=m);s[17]=xe.call(null,{props:Te},s[16],i),s[17][Symbol.for("slots")][0]?(o=s[17][Symbol.for("slots")][0],v=s[17],y=!0):o=s[17][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const ke=u.components&&u.components.Square||h.Square;o=s[13];const pe={};s[18]=this.element({parent:o||"root"},y===!0?v:i),pe.y=200,pe.show=i.showHideToggle;const Le=[];if(typeof ke<"u")for(let ze in ke.config.props)delete pe[ke.config.props[ze]],Le.push(ke.config.props[ze]);s[18].populate(pe),y===!0&&(I-=1),o=s[18];const G={};G.y=200,S=i.showHideToggle,Array.isArray(S)===!0&&(S=w(S).slice(0)),G.show=S,m=G.is||"Square";let Ie;if(typeof m=="string"){if(Ie=u.components&&u.components[m]||h[m],!Ie)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ie=m);s[19]=Ie.call(null,{props:G},s[18],i),s[19][Symbol.for("slots")][0]?(o=s[19][Symbol.for("slots")][0],v=s[19],y=!0):o=s[19][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[0];const Oe={};s[20]=this.element({parent:o||"root"},y===!0?v:i),Oe.y=40,Oe.x=1400,s[20].populate(Oe),y===!0&&(I-=1),o=s[20];const Be={};s[21]=this.element({parent:o||"root"},y===!0?v:i),Be.w=80,Be.h=80,Be.show=!0,Be.alpha=.8,Be.color="0xff00e4ff",s[21].populate(Be),y===!0&&(I-=1),o=s[20];const Ve={};s[22]=this.element({parent:o||"root"},y===!0?v:i),Ve.y=100,Ve.w=80,Ve.h=80,Ve.show=!1,Ve.alpha=.8,Ve.color="0xff00e4ff",s[22].populate(Ve),y===!0&&(I-=1),o=s[20];const qe={};return s[23]=this.element({parent:o||"root"},y===!0?v:i),qe.y=200,qe.w=80,qe.h=80,qe.show=i.showHideToggle,qe.alpha=.8,qe.color="0xff00e4ff",s[23].populate(qe),y===!0&&(I-=1),s},effects:[function(o,i,u,h,g,w){i[12].set("show",o.showHideToggle)},function(o,i,u,h,g,w){(typeof skip18>"u"||skip18.indexOf("show")===-1)&&i[18].set("show",o.showHideToggle)},function(o,i,u,h,g,w){i[19][Symbol.for("props")].show=o.showHideToggle},function(o,i,u,h,g,w){i[23].set("show",o.showHideToggle)}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),r6=Je.Component("Events",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.x=400,m.y=360,s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.w=280,S.h=280,S.color="0xe5e7ebff",S.x=i.x,S.y=-5,s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.w=250,v.h=250,v.x=10,v.y=10,v.color=i.colors[0],s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.w=250,y.h=250,y.x=290,y.y=10,y.color=i.colors[1],s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.w=250,I.h=250,I.x=570,I.y=10,I.color=i.colors[2],s[4].populate(I),o=s[0];const D={};return s[5]=this.element({parent:o||"root"},i),D.w=250,D.h=250,D.x=850,D.y=10,D.color=i.colors[3],s[5].populate(D),s},effects:[function(o,i,u,h,g,w){i[1].set("x",o.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(f){const o=this.count-1;o===-1?this.parent.$focus(f):this.count=Math.max(o,0)},right(f){const o=this.count+1;o===4?this.parent.$focus(f):this.count=Math.min(o,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),s6=Je.Component("SlotCard",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=300,m.h=500,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S[Symbol.for("isSlot")]=!0,S.x=20,S.y=20,s[1].populate(S),o=s[0];const v={};return s[2]=this.element({parent:o||"root"},i),v.content=i.label,v.maxwidth=260,v.x=20,v.y=400,v.align="center",v.__textnode=!0,s[2].populate(v),s},effects:[function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),a6=Je.Component("NamedSlotCard",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=700,m.h=300,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.x=20,S.y=20,s[1].populate(S),o=s[1];const v={};s[2]=this.element({parent:o||"root"},i),v.content="First slot",v.__textnode=!0,s[2].populate(v),o=s[1];const y={};s[3]=this.element({parent:o||"root"},i),y[Symbol.for("isSlot")]=!0,y.y=40,y.ref="first",s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.x=200,I.y=20,s[4].populate(I),o=s[4];const D={};s[5]=this.element({parent:o||"root"},i),D.content="Second slot",D.__textnode=!0,s[5].populate(D),o=s[4];const T={};s[6]=this.element({parent:o||"root"},i),T[Symbol.for("isSlot")]=!0,T.y=40,T.ref="second",s[6].populate(T),o=s[0];const L={};s[7]=this.element({parent:o||"root"},i),L.x=480,L.y=20,s[7].populate(L),o=s[7];const B={};s[8]=this.element({parent:o||"root"},i),B.content="Third slot",B.__textnode=!0,s[8].populate(B),o=s[7];const N={};return s[9]=this.element({parent:o||"root"},i),N[Symbol.for("isSlot")]=!0,N.y=40,N.ref="third",s[9].populate(N),s},effects:[function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),ml=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],u6=Je.Component("Components",{components:{SlotCard:s6,NamedSlotCard:a6,Card:AT,Square:Ka},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(I),v===!0&&(y-=1);const D=u.components&&u.components.SlotCard||h.SlotCard;o=s[0];const T={};s[1]=this.element({parent:o||"root"},v===!0?S:i),T.x=400,T.y=100,T.label="Element";const L=[];if(typeof D<"u")for(let Ue in D.config.props)delete T[D.config.props[Ue]],L.push(D.config.props[Ue]);s[1].populate(T),v===!0&&(y-=1),o=s[1];const B={};B.x=400,B.y=100,B.label="Element",m=B.is||"SlotCard";let N;if(typeof m=="string"){if(N=u.components&&u.components[m]||h[m],!N)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(N=m);s[2]=N.call(null,{props:B},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],S=s[2],v=!0):o=s[2][Symbol.for("children")][0],v===!0&&(y=1+1);const z={};s[3]=this.element({parent:o||"root"},v===!0?S:i),s[3].populate(z),v===!0&&(y-=1),o=s[3];const F={};s[4]=this.element({parent:o||"root"},v===!0?S:i),F.color=i.color,F.w=100,F.h=100,s[4].populate(F),v===!0&&(y-=1),v===!0&&y===0&&(v=!1);const H=u.components&&u.components.SlotCard||h.SlotCard;o=s[0];const X={};s[5]=this.element({parent:o||"root"},v===!0?S:i),X.x=800,X.y=100,X.label="Component";const $=[];if(typeof H<"u")for(let Ue in H.config.props)delete X[H.config.props[Ue]],$.push(H.config.props[Ue]);s[5].populate(X),v===!0&&(y-=1),o=s[5];const oe={};oe.x=800,oe.y=100,oe.label="Component",m=oe.is||"SlotCard";let fe;if(typeof m=="string"){if(fe=u.components&&u.components[m]||h[m],!fe)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);s[6]=fe.call(null,{props:oe},s[5],i),s[6][Symbol.for("slots")][0]?(o=s[6][Symbol.for("slots")][0],S=s[6],v=!0):o=s[6][Symbol.for("children")][0],v===!0&&(y=1+1);const le={};s[7]=this.element({parent:o||"root"},v===!0?S:i),s[7].populate(le),v===!0&&(y-=1);const A=u.components&&u.components.Square||h.Square;o=s[7];const Y={};s[8]=this.element({parent:o||"root"},v===!0?S:i),Y.size=200,Y.y=50;const Q=[];if(typeof A<"u")for(let Ue in A.config.props)delete Y[A.config.props[Ue]],Q.push(A.config.props[Ue]);s[8].populate(Y),v===!0&&(y-=1),o=s[8];const ee={};ee.size=200,ee.y=50,m=ee.is||"Square";let q;if(typeof m=="string"){if(q=u.components&&u.components[m]||h[m],!q)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(q=m);s[9]=q.call(null,{props:ee},s[8],i),s[9][Symbol.for("slots")][0]?(o=s[9][Symbol.for("slots")][0],S=s[9],v=!0):o=s[9][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),v===!0&&y===0&&(v=!1);const W=u.components&&u.components.SlotCard||h.SlotCard;o=s[0];const ie={};s[10]=this.element({parent:o||"root"},v===!0?S:i),ie.x=1200,ie.y=100,ie.label="Element & Component";const ue=[];if(typeof W<"u")for(let Ue in W.config.props)delete ie[W.config.props[Ue]],ue.push(W.config.props[Ue]);s[10].populate(ie),v===!0&&(y-=1),o=s[10];const ve={};ve.x=1200,ve.y=100,ve.label="Element & Component",m=ve.is||"SlotCard";let Te;if(typeof m=="string"){if(Te=u.components&&u.components[m]||h[m],!Te)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Te=m);s[11]=Te.call(null,{props:ve},s[10],i),s[11][Symbol.for("slots")][0]?(o=s[11][Symbol.for("slots")][0],S=s[11],v=!0):o=s[11][Symbol.for("children")][0],v===!0&&(y=2+1);const xe={};s[12]=this.element({parent:o||"root"},v===!0?S:i),s[12].populate(xe),v===!0&&(y-=1),o=s[12];const ke={};s[13]=this.element({parent:o||"root"},v===!0?S:i),ke.color=i.color,ke.w=100,ke.h=100,s[13].populate(ke),v===!0&&(y-=1);const pe=u.components&&u.components.Square||h.Square;o=s[12];const Le={};s[14]=this.element({parent:o||"root"},v===!0?S:i),Le.size=200,Le.y=150;const G=[];if(typeof pe<"u")for(let Ue in pe.config.props)delete Le[pe.config.props[Ue]],G.push(pe.config.props[Ue]);s[14].populate(Le),v===!0&&(y-=1),o=s[14];const Ie={};Ie.size=200,Ie.y=150,m=Ie.is||"Square";let Oe;if(typeof m=="string"){if(Oe=u.components&&u.components[m]||h[m],!Oe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Oe=m);s[15]=Oe.call(null,{props:Ie},s[14],i),s[15][Symbol.for("slots")][0]?(o=s[15][Symbol.for("slots")][0],S=s[15],v=!0):o=s[15][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),v===!0&&y===0&&(v=!1);const Be=u.components&&u.components.Card||h.Card;o=s[0];const Ve={};s[16]=this.element({parent:o||"root"},v===!0?S:i),Ve.x=400,Ve.y=700,Ve.size="small";const qe=[];if(typeof Be<"u")for(let Ue in Be.config.props)delete Ve[Be.config.props[Ue]],qe.push(Be.config.props[Ue]);s[16].populate(Ve),v===!0&&(y-=1),o=s[16];const ze={};ze.x=400,ze.y=700,ze.size="small",m=ze.is||"Card";let it;if(typeof m=="string"){if(it=u.components&&u.components[m]||h[m],!it)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(it=m);s[17]=it.call(null,{props:ze},s[16],i),s[17][Symbol.for("slots")][0]?(o=s[17][Symbol.for("slots")][0],S=s[17],v=!0):o=s[17][Symbol.for("children")][0],v===!0&&(y=1+1);const me={};s[18]=this.element({parent:o||"root"},v===!0?S:i),s[18].populate(me),v===!0&&(y-=1),o=s[18];const wt={};s[19]=this.element({parent:o||"root"},v===!0?S:i),wt.color=i.color,wt.w=100,wt.h=100,s[19].populate(wt),v===!0&&(y-=1),v===!0&&y===0&&(v=!1);const ft=u.components&&u.components.NamedSlotCard||h.NamedSlotCard;o=s[0];const rt={};s[20]=this.element({parent:o||"root"},v===!0?S:i),rt.x=800,rt.y=700;const St=[];if(typeof ft<"u")for(let Ue in ft.config.props)delete rt[ft.config.props[Ue]],St.push(ft.config.props[Ue]);s[20].populate(rt),v===!0&&(y-=1),o=s[20];const nt={};nt.x=800,nt.y=700,m=nt.is||"NamedSlotCard";let st;if(typeof m=="string"){if(st=u.components&&u.components[m]||h[m],!st)throw new Error('Component "NamedSlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(st=m);s[21]=st.call(null,{props:nt},s[20],i),s[21][Symbol.for("slots")][0]?(o=s[21][Symbol.for("slots")][0],S=s[21],v=!0):o=s[21][Symbol.for("children")][0],v===!0&&(y=4+1);const Xe={};s[22]=this.element({parent:o||"root"},v===!0?S:i),s[22].populate(Xe),v===!0&&(y-=1),o=s[22];const He={};s[23]=this.element({parent:o||"root"},v===!0?S:i),He.color="0x0891b2ff",He.x=10,He.y=140,He.w=80,He.h=60,He.parent=i[Symbol.for("slots")]!==void 0&&Array.isArray(i[Symbol.for("slots")])===!0&&i[Symbol.for("slots")].filter(Ue=>Ue.ref==="second").shift()||o,He.slot="second",s[23].populate(He),v===!0&&(y-=1),o=s[22];const Pe={};s[24]=this.element({parent:o||"root"},v===!0?S:i),Pe.color=i.color,Pe.w=100,Pe.h=100,Pe.parent=i[Symbol.for("slots")]!==void 0&&Array.isArray(i[Symbol.for("slots")])===!0&&i[Symbol.for("slots")].filter(Ue=>Ue.ref==="third").shift()||o,Pe.slot="third",s[24].populate(Pe),v===!0&&(y-=1);const J=u.components&&u.components.Square||h.Square;o=s[22];const Ge={};s[25]=this.element({parent:o||"root"},v===!0?S:i),Ge.size=100,Ge.parent=i[Symbol.for("slots")]!==void 0&&Array.isArray(i[Symbol.for("slots")])===!0&&i[Symbol.for("slots")].filter(Ue=>Ue.ref==="first").shift()||o,Ge.slot="first";const Ye=[];if(typeof J<"u")for(let Ue in J.config.props)delete Ge[J.config.props[Ue]],Ye.push(J.config.props[Ue]);s[25].populate(Ge),v===!0&&(y-=1),o=s[25];const ht={};ht.size=100,ht.slot="first",m=ht.is||"Square";let vt;if(typeof m=="string"){if(vt=u.components&&u.components[m]||h[m],!vt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(vt=m);s[26]=vt.call(null,{props:ht},s[25],i),s[26][Symbol.for("slots")][0]?(o=s[26][Symbol.for("slots")][0],S=s[26],v=!0):o=s[26][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[22];const Ae={};return s[27]=this.element({parent:o||"root"},v===!0?S:i),Ae.color="0x4d7c0fff",Ae.x=40,Ae.y=40,Ae.w=40,Ae.h=60,Ae.parent=i[Symbol.for("slots")]!==void 0&&Array.isArray(i[Symbol.for("slots")])===!0&&i[Symbol.for("slots")].filter(Ue=>Ue.ref==="second").shift()||o,Ae.slot="second",s[27].populate(Ae),v===!0&&(y-=1),v===!0&&y===0&&(v=!1),s},effects:[function(o,i,u,h,g,w){i[4].set("color",o.color)},function(o,i,u,h,g,w){i[13].set("color",o.color)},function(o,i,u,h,g,w){i[19].set("color",o.color)},function(o,i,u,h,g,w){i[24].set("color",o.color)}],context:{}},state(){return{color:ml[0]}},hooks:{ready(){this.$setInterval(()=>{const f=ml.indexOf(this.color)+1;this.color=f<=ml.length?ml[f]:ml[0]},600)}}}),l6=Je.Component("MemoryCard",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=320,m.h=200,m.x=i.col*360,m.y=i.row*250,m.scale={transition:i.scale},m.rotation={transition:i.disabled?-2:0},s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.h={transition:i.h},S.w=320,S.y=125,S.mount="{y: 0.5}",S.color={transition:i.disabled?"#ccc":"#fff"},S.src=i.image+"&w=320&h=200",S.effects=[{type:"radius",props:{radius:6}}],S.show=i.open,s[1].populate(S),o=s[0];const v={};return s[2]=this.element({parent:o||"root"},i),v.h={transition:i.h},v.w=320,v.y=125,v.mount="{y: 0.5}",v.color=i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},v.effects=[{type:"radius",props:{radius:6}}],s[2].populate(v),s},effects:[function(o,i,u,h,g,w){i[0].set("scale",{transition:o.scale})},function(o,i,u,h,g,w){i[0].set("rotation",{transition:o.disabled?-2:0})},function(o,i,u,h,g,w){i[1].set("h",{transition:o.h})},function(o,i,u,h,g,w){i[1].set("color",{transition:o.disabled?"#ccc":"#fff"})},function(o,i,u,h,g,w){i[1].set("src",o.image+"&w=320&h=200")},function(o,i,u,h,g,w){i[1].set("effects",[{type:"radius",props:{radius:6}}])},function(o,i,u,h,g,w){i[1].set("show",o.open)},function(o,i,u,h,g,w){i[2].set("h",{transition:o.h})},function(o,i,u,h,g,w){i[2].set("color",o.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(o,i,u,h,g,w){i[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1}},hooks:{init(){this.$listen("closeMemoryCard",f=>{f===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",f=>{f===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(f){this.scale=1.08;const o="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.$announcer.speak(o)},unfocus(){this.scale=1}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),kC=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],f6=Je.Component("Announcer",{components:{MemoryCard:l6},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1;const I={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(I),o=s[0];const D={};s[1]=this.element({parent:o||"root"},y===!0?v:i),D.font="raleway",D.size=80,D.color="0xffffffff",D.content="Let's play memory!",D.x=580,D.y=60,D.__textnode=!0,s[1].populate(D),o=s[0];const T={};s[2]=this.element({parent:o||"root"},y===!0?v:i),T.font="kalam",T.size=40,T.color="0xb91c1cff",T.content="the Accessible edition :)",T.x=1200,T.y=170,T.rotation=-6,T.__textnode=!0,s[2].populate(T),o=s[0];const L={};s[3]=this.element({parent:o||"root"},y===!0?v:i),L.x=260,L.y=260,s[3].populate(L),o=s[3];const B=[],N=(F=[],H,X)=>{const $=w(F),oe=new Set;let fe=$.length;for(;fe--;){const Q=$[fe];oe.add(""+Q.id)}let le=X.length;for(;le--;)if(oe.has(X[le])===!1){const Q=X[le];H[4][Q]&&H[4][Q].destroy(),delete H[4][Q],H[5][Q]&&H[5][Q].destroy(),delete H[5][Q]}X.length=0;const A=$.length,Y=[];for(let Q=0;Q<A;Q++){const ee=Object.create(i);o=H[3],ee.card=$[Q],ee.index=Q,ee.key=""+ee.card.id,X.push(ee.key);const q=u.components&&u.components.MemoryCard||h.MemoryCard;H[4]===void 0&&(H[4]={});const W={};H[4][ee.key]===void 0&&(H[4][ee.key]=this.element({parent:o||"root"},y===!0?v:i)),W.col=ee.index%4,W.row=Math.floor(ee.index/4)%3,W.image=ee.card.image,W.description=ee.card.description,W.ref="card"+ee.index,W.index=ee.index;const ie=[];if(typeof q<"u")for(let pe in q.config.props)delete W[q.config.props[pe]],ie.push(q.config.props[pe]);H[4][ee.key].nodeId===void 0&&H[4][ee.key].populate(W),H[5]===void 0&&(H[5]={}),o=H[4][ee.key];const ue={};if(H[5][ee.key]===void 0){S=ee.index%4,Array.isArray(S)===!0&&(S=w(S).slice(0)),ue.col=S,S=Math.floor(ee.index/4)%3,Array.isArray(S)===!0&&(S=w(S).slice(0)),ue.row=S,ue.image=ee.card.image,ue.description=ee.card.description,S="card"+ee.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),ue.ref=S,S=ee.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),ue.index=S,m=ue.is||"MemoryCard";let pe;if(typeof m=="string"){if(pe=u.components&&u.components[m]||h[m],!pe)throw new Error('Component "MemoryCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);H[5][ee.key]=pe.call(null,{props:ue},H[4][ee.key],i),H[5][ee.key][Symbol.for("slots")][0]?(o=H[5][ee.key][Symbol.for("slots")][0],v=H[5][ee.key],y=!0):o=H[5][ee.key][Symbol.for("children")][0]}let ve=()=>{(typeof ie>"u"||ie.indexOf("col")===-1)&&H[4][ee.key].set("col",ee.index%4)};g(ve,null),Y.push(ve);let Te=()=>{(typeof ie>"u"||ie.indexOf("row")===-1)&&H[4][ee.key].set("row",Math.floor(ee.index/4)%3)};g(Te,null),Y.push(Te);let xe=()=>{(typeof ie>"u"||ie.indexOf("ref")===-1)&&H[4][ee.key].set("ref","card"+ee.index)};g(xe,null),Y.push(xe);let ke=()=>{(typeof ie>"u"||ie.indexOf("index")===-1)&&H[4][ee.key].set("index",ee.index)};g(ke,null),Y.push(ke),H[5][ee.key][Symbol.for("props")].col=ee.index%4,H[5][ee.key][Symbol.for("props")].row=Math.floor(ee.index/4)%3,H[5][ee.key][Symbol.for("props")].ref="card"+ee.index,H[5][ee.key][Symbol.for("props")].index=ee.index}return Y};let z;return g(()=>{i[Symbol.for("removeGlobalEffects")](z),z=null,z=N(i.cards,s,B)},"cards"),s},effects:[],context:{}},state(){return{cards:kC.concat(kC).map((f,o)=>({...f,id:`card${o}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",f=>{this.openCards.length<2&&this.openCards.push(f),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(f){if(this.focusedRow===-1){this.focusedRow=0;return}f=f+this.focusedRow*4,this.$select("card"+f).$focus()},focusedRow(f){if(this.focusedCol===-1){this.focusedCol=0;return}f=this.focusedCol+f*4,this.$select("card"+f).$focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),gl=(f,o)=>Math.floor(Math.random()*(o-f+1)+f),c6=Je.Component("Item",{code:{render:function(o,i,u,h,g,w){const s=[],m={};return s[0]=this.element({parent:o||"root"},i),m.src="assets/blits-b-small.png",m.w=96,m.h=168,m.x={transition:{value:i.x,duration:2900}},m.y={transition:{value:i.y,duration:2900}},m.rotation={transition:{value:i.rotation,duration:2900}},m.scale={transition:{value:i.scale,duration:1e3}},s[0].populate(m),s},effects:[function(o,i,u,h,g,w){i[0].set("x",{transition:{value:o.x,duration:2900}})},function(o,i,u,h,g,w){i[0].set("y",{transition:{value:o.y,duration:2900}})},function(o,i,u,h,g,w){i[0].set("rotation",{transition:{value:o.rotation,duration:2900}})},function(o,i,u,h,g,w){i[0].set("scale",{transition:{value:o.scale,duration:1e3}})}],context:{}},state(){return{x:gl(20,1560),y:gl(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=gl(20,1740),this.y=gl(20,900),this.rotation=gl(10,360)},3e3)}}}),h6=Je.Component("Exponential",{components:{Item:c6},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1;const y={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(y),o=s[0];const I=[],D=(L=[],B,N)=>{const z=w(L),F=new Set;let H=z.length;for(;H--;){const fe=z[H];F.add(""+fe)}let X=N.length;for(;X--;)if(F.has(N[X])===!1){const fe=N[X];B[1][fe]&&B[1][fe].destroy(),delete B[1][fe],B[2][fe]&&B[2][fe].destroy(),delete B[2][fe]}N.length=0;const $=z.length,oe=[];for(let fe=0;fe<$;fe++){const le=Object.create(i);o=B[0],le.item=z[fe],le.undefined=fe,le.key=""+le.item,N.push(le.key);const A=u.components&&u.components.Item||h.Item;B[1]===void 0&&(B[1]={});const Y={};B[1][le.key]===void 0&&(B[1][le.key]=this.element({parent:o||"root"},v===!0?S:i));const Q=[];if(typeof A<"u")for(let q in A.config.props)delete Y[A.config.props[q]],Q.push(A.config.props[q]);B[1][le.key].nodeId===void 0&&B[1][le.key].populate(Y),B[2]===void 0&&(B[2]={}),o=B[1][le.key];const ee={};if(B[2][le.key]===void 0){m=ee.is||"Item";let q;if(typeof m=="string"){if(q=u.components&&u.components[m]||h[m],!q)throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(q=m);B[2][le.key]=q.call(null,{props:ee},B[1][le.key],i),B[2][le.key][Symbol.for("slots")][0]?(o=B[2][le.key][Symbol.for("slots")][0],S=B[2][le.key],v=!0):o=B[2][le.key][Symbol.for("children")][0]}}return oe};let T;return g(()=>{i[Symbol.for("removeGlobalEffects")](T),T=null,T=D(i.items,s,I)},"items"),s},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const f=this.$setInterval(()=>{for(let o=0;o<=Math.floor(this.items.length/10);o++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(f)},2e3)}}}),MT=Je.Component("Ball",{code:{render:function(o,i,u,h,g,w){const s=[],m={};return s[0]=this.element({parent:o||"root"},i),m.w=100,m.h=100,m.src="/assets/basketball.png",s[0].populate(m),s},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),bh=(f,o)=>Math.floor(Math.random()*(o-f+1)+f),d6=Je.Component("Viewport",{components:{Ball:MT},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.size=32,T.x=960,T.y=540,T.mount=.5,T.content=i.status.join(`
`),T.lineheight=52,T.maxwidth=500,T.__textnode=!0,s[1].populate(T),y===!0&&(I-=1);const L=u.components&&u.components.Ball||h.Ball;o=s[0];const B={};s[2]=this.element({parent:o||"root"},y===!0?v:i),B.x={transition:{value:i.x,duration:1250}},B.y={transition:{value:i.y,duration:1250}},B.rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},B.w=100,B.h=100;const N=[];if(typeof L<"u")for(let H in L.config.props)delete B[L.config.props[H]],N.push(L.config.props[H]);s[2].populate(B),y===!0&&(I-=1),o=s[2];const z={};S={transition:{value:i.x,duration:1250}},Array.isArray(S)===!0&&(S=w(S).slice(0)),z.x=S,S={transition:{value:i.y,duration:1250}},Array.isArray(S)===!0&&(S=w(S).slice(0)),z.y=S,S={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},Array.isArray(S)===!0&&(S=w(S).slice(0)),z.rotation=S,z.w=100,z.h=100,m=z.is||"Ball";let F;if(typeof m=="string"){if(F=u.components&&u.components[m]||h[m],!F)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(F=m);return s[3]=F.call(null,{props:z},s[2],i),s[3][Symbol.for("slots")][0]?(o=s[3][Symbol.for("slots")][0],v=s[3],y=!0):o=s[3][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){i[1].set("content",o.status.join(`
`))},function(o,i,u,h,g,w){(typeof skip2>"u"||skip2.indexOf("x")===-1)&&i[2].set("x",{transition:{value:o.x,duration:1250}})},function(o,i,u,h,g,w){(typeof skip2>"u"||skip2.indexOf("y")===-1)&&i[2].set("y",{transition:{value:o.y,duration:1250}})},function(o,i,u,h,g,w){(typeof skip2>"u"||skip2.indexOf("rotation")===-1)&&i[2].set("rotation",{transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}})},function(o,i,u,h,g,w){i[3][Symbol.for("props")].x={transition:{value:o.x,duration:1250}}},function(o,i,u,h,g,w){i[3][Symbol.for("props")].y={transition:{value:o.y,duration:1250}}},function(o,i,u,h,g,w){i[3][Symbol.for("props")].rotation={transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",f=>{this.status.unshift(`${this.count++} -  ${f}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=bh(-90,90),this.x=(1920-100)/2,this.y=(1080-100)/2,this.$setInterval(()=>{this.x=bh(-300,2220),this.y=bh(-300,1380),this.rotation=bh(-90,90)},2500)}}}),jl={code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=1920,m.h=1080,m.color="0xffffffff",m.effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.show=i.up!==void 0,s[1].populate(S),o=s[1];const v={};s[2]=this.element({parent:o||"root"},i),v.src="assets/arrow.png",v.w=100,v.h=44,v.x=960,v.y=40,v.mount="{x: 0.5}",s[2].populate(v),o=s[1];const y={};s[3]=this.element({parent:o||"root"},i),y.content=i.up&&i.up.toUpperCase(),y.x=960,y.y=100,y.size=76,y.mount="{x: 0.5}",y.__textnode=!0,s[3].populate(y),o=s[0];const I={};s[4]=this.element({parent:o||"root"},i),I.show=i.right!==void 0,s[4].populate(I),o=s[4];const D={};s[5]=this.element({parent:o||"root"},i),D.src="assets/arrow.png",D.w=100,D.h=44,D.x=1900,D.y=540,D.mount="{x: 1, y: 0.5}",D.rotation=90,s[5].populate(D),o=s[4];const T={};s[6]=this.element({parent:o||"root"},i),T.content=i.right&&i.right.toUpperCase(),T.x=1760,T.y=540,T.size=76,T.rotation=90,T.mount=.5,T.__textnode=!0,s[6].populate(T),o=s[0];const L={};s[7]=this.element({parent:o||"root"},i),L.show=i.down!==void 0,s[7].populate(L),o=s[7];const B={};s[8]=this.element({parent:o||"root"},i),B.src="assets/arrow.png",B.w=100,B.h=44,B.x=960,B.y=1040,B.mount="{x: 0.5, y: 1}",B.rotation=180,s[8].populate(B),o=s[7];const N={};s[9]=this.element({parent:o||"root"},i),N.content=i.down&&i.down.toUpperCase(),N.x=960,N.y=980,N.size=76,N.mount="{x: 0.5, y: 1}",N.__textnode=!0,s[9].populate(N),o=s[0];const z={};s[10]=this.element({parent:o||"root"},i),z.show=i.left!==void 0,s[10].populate(z),o=s[10];const F={};s[11]=this.element({parent:o||"root"},i),F.src="assets/arrow.png",F.w=100,F.h=44,F.x=40,F.y=540,F.mount="{ y: 0.5}",F.rotation=-90,s[11].populate(F),o=s[10];const H={};s[12]=this.element({parent:o||"root"},i),H.content=i.left&&i.left.toUpperCase(),H.x=180,H.y=540,H.size=76,H.mount=.5,H.rotation=-90,H.__textnode=!0,s[12].populate(H),o=s[0];const X={};return s[13]=this.element({parent:o||"root"},i),X.content=i.pageTitle,X.font="raleway",X.x=960,X.y=540,X.size=240,X.mount=.5,X.__textnode=!0,s[13].populate(X),s},effects:[function(o,i,u,h,g,w){i[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(o,i,u,h,g,w){i[1].set("show",o.up!==void 0)},function(o,i,u,h,g,w){i[3].set("content",o.up&&o.up.toUpperCase())},function(o,i,u,h,g,w){i[4].set("show",o.right!==void 0)},function(o,i,u,h,g,w){i[6].set("content",o.right&&o.right.toUpperCase())},function(o,i,u,h,g,w){i[7].set("show",o.down!==void 0)},function(o,i,u,h,g,w){i[9].set("content",o.down&&o.down.toUpperCase())},function(o,i,u,h,g,w){i[10].set("show",o.left!==void 0)},function(o,i,u,h,g,w){i[12].set("content",o.left&&o.left.toUpperCase())},function(o,i,u,h,g,w){i[13].set("content",o.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},p6=Je.Component("RouterHookPage",{...jl,state(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),m6=Je.Component("RouterHookMovie",{...jl,state(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),g6=Je.Component("RouterHookRating",{...jl,state(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),y6=Je.Component("RouterHookEpisode",{...jl,state(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),v6=Je.Component("RouterHookEpisode",{...jl,state(){return{title:`Episodes 
 overview`,right:"FIRST EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}}),gr={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},x6=[{path:"/examples/router-hooks",component:p6,hooks:{async before(f,o){return o&&o.path==="examples/router-hooks/movie"&&(f.transition=gr.slideInOutRight),o&&o.path==="examples/router-hooks/rating"&&(f.transition=gr.slideInOutLeft),o&&o.path.indexOf("episode")>-1&&(f.transition=gr.slideInOutDown),f}}},{path:"/examples/router-hooks/episode/:id",component:y6,hooks:{before(f,o){o&&o.path.indexOf("episode")>-1&&(f.transition=gr.slideInOutLeft);const{id:i}=f.params;return i>5?"/examples/router-hooks/":(f.data.page={id:parseInt(i),title:`Episode ${i}`},f)}},transition:gr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:v6,transition:gr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:m6,hooks:{before(f,o){return o&&o.path==="examples/router-hooks"&&(f.transition=gr.slideInOutLeft),o&&o.path==="examples/router-hooks/rating"&&(f.transition=gr.slideInOutRight),f}}},{path:"/examples/router-hooks/rating",component:g6,transition:gr.slideInOutLeft}],w6=Je.Component("Resize",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.y=30,S.content="fit (Resize Mode) sample",S.maxwidth=1920,S.align="center",S.__textnode=!0,s[1].populate(S),o=s[0];const v={};s[2]=this.element({parent:o||"root"},i),v.x={transition:{value:i.pages.x1,duration:200}},v.y=90,s[2].populate(v),o=s[2];const y={};s[3]=this.element({parent:o||"root"},i),y.x=100,y.content="Image dimensions: 2560 X 1440",y.__textnode=!0,s[3].populate(y),o=s[2];const I={};s[4]=this.element({parent:o||"root"},i),I.x=100,I.y=80,I.content=i.titles.t1,I.__textnode=!0,s[4].populate(I),o=s[2];const D={};s[5]=this.element({parent:o||"root"},i),D.y=150,D.x=100,s[5].populate(D),o=s[5];const T={};s[6]=this.element({parent:o||"root"},i),T.w=i.w,T.h=i.w-300,T.src=i.img,T.fit="{type: 'cover', position: { y: 0 } }",s[6].populate(T),o=s[5];const L={};s[7]=this.element({parent:o||"root"},i),L.w=i.w,L.h=i.w-300,L.src=i.img,L.fit="{ type: 'cover', position: { y: 0.5 } }",L.x=600,s[7].populate(L),o=s[5];const B={};s[8]=this.element({parent:o||"root"},i),B.w=i.w,B.h=i.w-300,B.src=i.img,B.fit="{ type: 'cover', position: { y: 1 } }",B.x=1200,s[8].populate(B),o=s[2];const N={};s[9]=this.element({parent:o||"root"},i),N.x=100,N.y=500,N.content=i.titles.t2,N.__textnode=!0,s[9].populate(N),o=s[2];const z={};s[10]=this.element({parent:o||"root"},i),z.y=600,z.x=100,s[10].populate(z),o=s[10];const F={};s[11]=this.element({parent:o||"root"},i),F.w=i.w,F.h=i.w-150,F.src=i.img,F.fit="{ type: 'cover', position: { x: 0 } }",s[11].populate(F),o=s[10];const H={};s[12]=this.element({parent:o||"root"},i),H.w=i.w,H.h=i.w-150,H.src=i.img,H.fit="{ type: 'cover', position: { x: 0.5 } }",H.x=600,s[12].populate(H),o=s[10];const X={};s[13]=this.element({parent:o||"root"},i),X.w=i.w,X.h=i.w-150,X.src=i.img,X.fit="{ type: 'cover', position: { x: 1 } }",X.x=1200,s[13].populate(X),o=s[0];const $={};s[14]=this.element({parent:o||"root"},i),$.x={transition:{value:i.pages.x2,duration:200}},$.y=90,s[14].populate($),o=s[14];const oe={};s[15]=this.element({parent:o||"root"},i),oe.x=100,oe.content="Image dimensions: 1440 X 2560",oe.__textnode=!0,s[15].populate(oe),o=s[14];const fe={};s[16]=this.element({parent:o||"root"},i),fe.x=100,fe.y=80,fe.content=i.titles.t3,fe.__textnode=!0,s[16].populate(fe),o=s[14];const le={};s[17]=this.element({parent:o||"root"},i),le.y=150,le.x=100,s[17].populate(le),o=s[17];const A={};s[18]=this.element({parent:o||"root"},i),A.w=i.w,A.h=i.w-200,A.src=i.img1,A.fit="{ type: 'cover', position: { y: 0, x: 0 } }",s[18].populate(A),o=s[17];const Y={};s[19]=this.element({parent:o||"root"},i),Y.w=i.w,Y.h=i.w-200,Y.src=i.img1,Y.fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",Y.x=600,s[19].populate(Y),o=s[17];const Q={};s[20]=this.element({parent:o||"root"},i),Q.w=i.w,Q.h=i.w-200,Q.src=i.img1,Q.fit="{ type: 'cover', position: { y: 1, x: 1 } }",Q.x=1200,s[20].populate(Q),o=s[14];const ee={};s[21]=this.element({parent:o||"root"},i),ee.x=100,ee.y=500,ee.content=i.titles.t4,ee.__textnode=!0,s[21].populate(ee),o=s[14];const q={};s[22]=this.element({parent:o||"root"},i),q.y=570,q.x=100,s[22].populate(q),o=s[22];const W={};s[23]=this.element({parent:o||"root"},i),W.w=i.w-350,W.h=i.w-100,W.src=i.img1,W.fit="{ type: 'cover', position: { x: 0 } }",s[23].populate(W),o=s[22];const ie={};s[24]=this.element({parent:o||"root"},i),ie.w=i.w-350,ie.h=i.w-100,ie.src=i.img1,ie.fit="{ type: 'cover', position: { x: 0.25 } }",ie.x=250,s[24].populate(ie),o=s[22];const ue={};s[25]=this.element({parent:o||"root"},i),ue.w=i.w-350,ue.h=i.w-100,ue.src=i.img1,ue.fit="{ type: 'cover', position: { x: 0.5 } }",ue.x=500,s[25].populate(ue),o=s[22];const ve={};s[26]=this.element({parent:o||"root"},i),ve.w=i.w-350,ve.h=i.w-100,ve.src=i.img1,ve.fit="{ type: 'cover', position: { x: 0.75 } }",ve.x=750,s[26].populate(ve),o=s[22];const Te={};s[27]=this.element({parent:o||"root"},i),Te.w=i.w-350,Te.h=i.w-100,Te.src=i.img1,Te.fit="{ type: 'cover', position: { x: 1 } }",Te.x=1e3,s[27].populate(Te),o=s[0];const xe={};s[28]=this.element({parent:o||"root"},i),xe.x={transition:{value:i.pages.x3,duration:200}},xe.y=90,s[28].populate(xe),o=s[28];const ke={};s[29]=this.element({parent:o||"root"},i),ke.x=100,ke.content="Image dimensions: 2560 X 1440",ke.__textnode=!0,s[29].populate(ke),o=s[28];const pe={};s[30]=this.element({parent:o||"root"},i),pe.x=100,pe.y=80,pe.content=i.titles.t5,pe.__textnode=!0,s[30].populate(pe),o=s[28];const Le={};s[31]=this.element({parent:o||"root"},i),Le.y=150,Le.x=100,Le.w=i.w+100,Le.h=i.w-200,Le.color="0x000000ff",s[31].populate(Le),o=s[31];const G={};s[32]=this.element({parent:o||"root"},i),G.w=i.w+100,G.h=i.w-200,G.src=i.img,G.fit="contain",s[32].populate(G),o=s[28];const Ie={};s[33]=this.element({parent:o||"root"},i),Ie.x=100,Ie.y=500,Ie.content=i.titles.t6,Ie.__textnode=!0,s[33].populate(Ie),o=s[28];const Oe={};s[34]=this.element({parent:o||"root"},i),Oe.y=550,Oe.x=100,Oe.w=i.w+100,Oe.h=i.w-100,Oe.color="0x000000ff",s[34].populate(Oe),o=s[34];const Be={};s[35]=this.element({parent:o||"root"},i),Be.w=i.w+100,Be.h=i.w-100,Be.src=i.img,Be.fit="contain",s[35].populate(Be),o=s[0];const Ve={};return s[36]=this.element({parent:o||"root"},i),Ve.x=1700,Ve.y=20,Ve.content="Page "+i.activePage+"/"+i.totalPages,Ve.__textnode=!0,s[36].populate(Ve),s},effects:[function(o,i,u,h,g,w){i[2].set("x",{transition:{value:o.pages.x1,duration:200}})},function(o,i,u,h,g,w){i[3].set("content","Image dimensions: 2560 X 1440")},function(o,i,u,h,g,w){i[14].set("x",{transition:{value:o.pages.x2,duration:200}})},function(o,i,u,h,g,w){i[15].set("content","Image dimensions: 1440 X 2560")},function(o,i,u,h,g,w){i[28].set("x",{transition:{value:o.pages.x3,duration:200}})},function(o,i,u,h,g,w){i[29].set("content","Image dimensions: 2560 X 1440")},function(o,i,u,h,g,w){i[36].set("content","Page "+o.activePage+"/"+o.totalPages)}],context:{}},state(){return{activePage:1,pages:{x1:0,x2:1920,x3:1920*2},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages(){return Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let f=1;f<=this.totalPages;f++)this.pages[`x${f}`]=this.pages[`x${f}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let f=this.totalPages;f>=1;f--)this.pages[`x${f}`]=this.pages[`x${f}`]+1920;this.activePage-=1}}}}),S6=Je.Component("Flags",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S=[],v=(I=[],D,T)=>{const L=w(I),B=new Set;let N=L.length;for(;N--;)L[N],B.add(""+N);let z=T.length;for(;z--;)if(B.has(T[z])===!1){const X=T[z];D[1][X]&&D[1][X].destroy(),delete D[1][X],D[2][X]&&D[2][X].destroy(),delete D[2][X],D[3][X]&&D[3][X].destroy(),delete D[3][X]}T.length=0;const F=L.length,H=[];for(let X=0;X<F;X++){const $=Object.create(i);o=D[0],$.language=L[X],$.index=X,$.key=""+X,T.push($.key),o=D[0],D[1]===void 0&&(D[1]={});const oe={};D[1][$.key]===void 0&&(D[1][$.key]=this.element({parent:o||"root"},i)),oe.x=$.index*250,D[1][$.key].nodeId===void 0&&D[1][$.key].populate(oe),o=D[1][$.key],D[2]===void 0&&(D[2]={});const fe={};D[2][$.key]===void 0&&(D[2][$.key]=this.element({parent:o||"root"},i)),fe.src=$.language.flag,fe.w=150,fe.h=150,fe.alpha=$.index===$.activeIndex?1:.6,D[2][$.key].nodeId===void 0&&D[2][$.key].populate(fe),o=D[1][$.key],D[3]===void 0&&(D[3]={});const le={};D[3][$.key]===void 0&&(D[3][$.key]=this.element({parent:o||"root"},i)),le.content=$.language.name,le.y=150,le.maxwidth=150,le.align="center",le.color=$.index===$.activeIndex?"0xffffffff":"0xaaaaaaff",le.__textnode=!0,D[3][$.key].nodeId===void 0&&D[3][$.key].populate(le)}return H};let y;return g(()=>{i[Symbol.for("removeGlobalEffects")](y),y=null,y=v(i.languages,s,S)},"languages"),g(()=>{i.activeIndex;for(let I=0;I<i.languages.length;I++){const D={};D.index=I,D.language=i.languages[I],D.key=I,s[2][D.key].set("alpha",D.index===i.activeIndex?1:.6)}}),g(()=>{i.activeIndex;for(let I=0;I<i.languages.length;I++){const D={};D.index=I,D.language=i.languages[I],D.key=I,s[3][D.key].set("color",D.index===i.activeIndex?"0xffffffff":"0xaaaaaaff")}}),s},effects:[],context:{}},props:["languages"],state(){return{activeIndex:0}},watch:{activeIndex(f){const o=this.languages[f];o&&o.code&&this.$language.set(o.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),AC=Je.Component("LanguagePlugin",{components:{Flags:S6},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(I),v===!0&&(y-=1);const D=u.components&&u.components.Flags||h.Flags;o=s[0];const T={};s[1]=this.element({parent:o||"root"},v===!0?S:i),T.languages=i.languages,T.ref="flags",T.x=500,T.y=150;const L=[];if(typeof D<"u")for(let $ in D.config.props)delete T[D.config.props[$]],L.push(D.config.props[$]);s[1].populate(T),v===!0&&(y-=1),o=s[1];const B={};B.languages=i.languages,B.ref="flags",B.x=500,B.y=150,m=B.is||"Flags";let N;if(typeof m=="string"){if(N=u.components&&u.components[m]||h[m],!N)throw new Error('Component "Flags" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(N=m);s[2]=N.call(null,{props:B},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],S=s[2],v=!0):o=s[2][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[0];const z={};s[3]=this.element({parent:o||"root"},v===!0?S:i),z.x=960,z.y=540,z.mount=.5,z.content=i.$language.translate("hello"),z.size=80,z.__textnode=!0,s[3].populate(z),v===!0&&(y-=1),o=s[0];const F={};s[4]=this.element({parent:o||"root"},v===!0?S:i),F.x=960,F.y=640,F.mount=.5,F.content=i.$language.translate("bye"),F.size=50,F.__textnode=!0,s[4].populate(F),v===!0&&(y-=1),o=s[0];const H={};s[5]=this.element({parent:o||"root"},v===!0?S:i),H.x=960,H.y=720,H.mount=.5,H.content=i.$language.translate("replacement",{first:"John",last:"Doe",age:18}),H.size=36,H.__textnode=!0,s[5].populate(H),v===!0&&(y-=1),o=s[0];const X={};return s[6]=this.element({parent:o||"root"},v===!0?S:i),X.size=32,X.x=960,X.y=940,X.mount=.5,X.align="center",X.content="Current language: "+i.$language.language+`
 Language file: `+(i.loaded===!0?"Loaded":"loading ..."),X.__textnode=!0,s[6].populate(X),v===!0&&(y-=1),s},effects:[function(o,i,u,h,g,w){i[3].set("content",o.$language.translate("hello"))},function(o,i,u,h,g,w){i[4].set("content",o.$language.translate("bye"))},function(o,i,u,h,g,w){i[5].set("content",o.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(o,i,u,h,g,w){i[6].set("content","Current language: "+o.$language.language+`
 Language file: `+(o.loaded===!0?"Loaded":"loading ..."))}],context:{}},state(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.$select("flags").$focus()}}}),C6=Je.Component("Box",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=330,m.h=180,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],m.color="{top: '0x667a97ff', bottom: '0x475569ff'}",s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.x=25,S.y=20,S.content=i.header,S.w=280,S.color="0x000000ff",S.contain="width",S.__textnode=!0,s[1].populate(S),o=s[0];const v={};return s[2]=this.element({parent:o||"root"},i),v.x=25,v.y=90,v.content=i.text,v.size=52,v.w=280,v.contain="width",v.align="center",v.__textnode=!0,s[2].populate(v),s},effects:[function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(o,i,u,h,g,w){i[1].set("content",o.header)},function(o,i,u,h,g,w){i[2].set("content",o.text)}],context:{}},props:["header","text"]}),T6=Je.Application({components:{Box:C6},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),D.w=1920,D.h=1080,s[0].populate(D),y===!0&&(I-=1),o=s[0];const T={};s[1]=this.element({parent:o||"root"},y===!0?v:i),T.y=250,s[1].populate(T),y===!0&&(I-=1),o=s[1];const L={};s[2]=this.element({parent:o||"root"},y===!0?v:i),L.content="KeyCode Finder",L.font="raleway",L.mount="{x: 0.5}",L.x=960,L.size=62,L.w=800,L.h=200,L.contain="width",L.__textnode=!0,s[2].populate(L),y===!0&&(I-=1),o=s[1];const B={};s[3]=this.element({parent:o||"root"},y===!0?v:i),B.content="Press any key to get find the correct key code mapping",B.mount="{x: 0.5}",B.x=960,B.y=100,B.size=32,B.w=800,B.h=200,B.contain="width",B.__textnode=!0,s[3].populate(B),y===!0&&(I-=1),o=s[0];const N={};s[4]=this.element({parent:o||"root"},y===!0?v:i),N.x=395,s[4].populate(N),y===!0&&(I-=1);const z=u.components&&u.components.Box||h.Box;o=s[4];const F={};s[5]=this.element({parent:o||"root"},y===!0?v:i),F.y=600,F.header="Key",F.text=i.key;const H=[];if(typeof z<"u")for(let ve in z.config.props)delete F[z.config.props[ve]],H.push(z.config.props[ve]);s[5].populate(F),y===!0&&(I-=1),o=s[5];const X={};X.y=600,X.header="Key",S=i.key,Array.isArray(S)===!0&&(S=w(S).slice(0)),X.text=S,m=X.is||"Box";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);s[6]=$.call(null,{props:X},s[5],i),s[6][Symbol.for("slots")][0]?(o=s[6][Symbol.for("slots")][0],v=s[6],y=!0):o=s[6][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const oe=u.components&&u.components.Box||h.Box;o=s[4];const fe={};s[7]=this.element({parent:o||"root"},y===!0?v:i),fe.x=400,fe.y=600,fe.header="Code",fe.text=i.code;const le=[];if(typeof oe<"u")for(let ve in oe.config.props)delete fe[oe.config.props[ve]],le.push(oe.config.props[ve]);s[7].populate(fe),y===!0&&(I-=1),o=s[7];const A={};A.x=400,A.y=600,A.header="Code",S=i.code,Array.isArray(S)===!0&&(S=w(S).slice(0)),A.text=S,m=A.is||"Box";let Y;if(typeof m=="string"){if(Y=u.components&&u.components[m]||h[m],!Y)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[8]=Y.call(null,{props:A},s[7],i),s[8][Symbol.for("slots")][0]?(o=s[8][Symbol.for("slots")][0],v=s[8],y=!0):o=s[8][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const Q=u.components&&u.components.Box||h.Box;o=s[4];const ee={};s[9]=this.element({parent:o||"root"},y===!0?v:i),ee.x=800,ee.y=600,ee.header="keyCode",ee.text=i.keyCode;const q=[];if(typeof Q<"u")for(let ve in Q.config.props)delete ee[Q.config.props[ve]],q.push(Q.config.props[ve]);s[9].populate(ee),y===!0&&(I-=1),o=s[9];const W={};W.x=800,W.y=600,W.header="keyCode",S=i.keyCode,Array.isArray(S)===!0&&(S=w(S).slice(0)),W.text=S,m=W.is||"Box";let ie;if(typeof m=="string"){if(ie=u.components&&u.components[m]||h[m],!ie)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ie=m);s[10]=ie.call(null,{props:W},s[9],i),s[10][Symbol.for("slots")][0]?(o=s[10][Symbol.for("slots")][0],v=s[10],y=!0):o=s[10][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),o=s[0];const ue={};return s[11]=this.element({parent:o||"root"},y===!0?v:i),ue.mount="{x: 1}",ue.x=1860,ue.y=1e3,ue.size=30,ue.content=i.backLabel,ue.color=i.backPressed?"0xffffffff":"0x667a97ff",ue.__textnode=!0,s[11].populate(ue),y===!0&&(I-=1),s},effects:[function(o,i,u,h,g,w){(typeof skip5>"u"||skip5.indexOf("text")===-1)&&i[5].set("text",o.key)},function(o,i,u,h,g,w){i[6][Symbol.for("props")].text=o.key},function(o,i,u,h,g,w){(typeof skip7>"u"||skip7.indexOf("text")===-1)&&i[7].set("text",o.code)},function(o,i,u,h,g,w){i[8][Symbol.for("props")].text=o.code},function(o,i,u,h,g,w){(typeof skip9>"u"||skip9.indexOf("text")===-1)&&i[9].set("text",o.keyCode)},function(o,i,u,h,g,w){i[10][Symbol.for("props")].text=o.keyCode},function(o,i,u,h,g,w){i[11].set("content",o.backLabel)},function(o,i,u,h,g,w){i[11].set("color",o.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state(){return{backPressed:!1,key:"...",code:"...",keyCode:"..."}},computed:{backLabel(){return this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels(f){this.key=f.key,this.code=f.code,this.keyCode=f.keyCode+""}},input:{any(f){this.backPressed=!1,this.updateLabels(f)},back(f){return this.backPressed===!0?this.$router.back():this.updateLabels(f),()=>{this.backPressed=!0}}}}),b6=Je.Component("Accent",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=300,m.h=250,m.color=i.bColor,m.effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),o=s[0];const S={};return s[1]=this.element({parent:o||"root"},i),S.x=150,S.y=125,S.mount="{x:0.5, y:0.5}",S.content=i.lang,S.color="0xffffffff",S.font="lato-black",S.__textnode=!0,s[1].populate(S),s},effects:[function(o,i,u,h,g,w){i[0].set("color",o.bColor)},function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,w){i[1].set("content",o.lang)}],context:{}},state(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),E6=Je.Component("Accents",{components:{Accent:b6},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1;const I={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(I),o=s[0];const D={};s[1]=this.element({parent:o||"root"},y===!0?v:i),D.x={transition:i.x},s[1].populate(D),o=s[1];const T=[],L=(z=[],F,H)=>{const X=w(z),$=new Set;let oe=X.length;for(;oe--;){const Y=X[oe];$.add(""+Y.lang)}let fe=H.length;for(;fe--;)if($.has(H[fe])===!1){const Y=H[fe];F[2][Y]&&F[2][Y].destroy(),delete F[2][Y],F[3][Y]&&F[3][Y].destroy(),delete F[3][Y]}H.length=0;const le=X.length,A=[];for(let Y=0;Y<le;Y++){const Q=Object.create(i);o=F[1],Q.item=X[Y],Q.index=Y,Q.key=""+Q.item.lang,H.push(Q.key);const ee=u.components&&u.components.Accent||h.Accent;F[2]===void 0&&(F[2]={});const q={};F[2][Q.key]===void 0&&(F[2][Q.key]=this.element({parent:o||"root"},y===!0?v:i)),q.lang=Q.item.lang,q.ref="accent"+Q.index,q.x=Q.index*400;const W=[];if(typeof ee<"u")for(let ve in ee.config.props)delete q[ee.config.props[ve]],W.push(ee.config.props[ve]);F[2][Q.key].nodeId===void 0&&F[2][Q.key].populate(q),F[3]===void 0&&(F[3]={}),o=F[2][Q.key];const ie={};if(F[3][Q.key]===void 0){ie.lang=Q.item.lang,S="accent"+Q.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),ie.ref=S,ie.x=Q.index*400,m=ie.is||"Accent";let ve;if(typeof m=="string"){if(ve=u.components&&u.components[m]||h[m],!ve)throw new Error('Component "Accent" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);F[3][Q.key]=ve.call(null,{props:ie},F[2][Q.key],i),F[3][Q.key][Symbol.for("slots")][0]?(o=F[3][Q.key][Symbol.for("slots")][0],v=F[3][Q.key],y=!0):o=F[3][Q.key][Symbol.for("children")][0]}let ue=()=>{(typeof W>"u"||W.indexOf("ref")===-1)&&F[2][Q.key].set("ref","accent"+Q.index)};g(ue,null),A.push(ue),F[3][Q.key][Symbol.for("props")].ref="accent"+Q.index}return A};let B;g(()=>{i[Symbol.for("removeGlobalEffects")](B),B=null,B=L(i.data,s,T)},"data"),o=s[0];const N={};return s[4]=this.element({parent:o||"root"},y===!0?v:i),N.content=i.activeAccent,N.font="lato-black",N.x=960,N.y=400,N.mount="{x:0.5}",N.letterspacing=10,N.size=40,N.__textnode=!0,s[4].populate(N),s},effects:[function(o,i,u,h,g,w){i[1].set("x",{transition:o.x})},function(o,i,u,h,g,w){i[4].set("content",o.activeAccent)}],context:{}},props:["data"],state(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex(f){const o=this.$select(`accent${f}`);o&&o.$focus&&(o.$focus(),this.activeAccent=this.data[f].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(f){const o=this.activeIndex+f;this.x=o>3?-(o-3)*400-160:160,this.activeIndex=o}}}),k6=Je.Component("Characters",{components:{Accents:E6},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),I.w=1920,s[0].populate(I),v===!0&&(y-=1),o=s[0];const D={};s[1]=this.element({parent:o||"root"},v===!0?S:i),D.x=960,D.y=50,D.mount="{x:0.5}",D.content="Alphabets",D.font="lato-black",D.size=60,D.__textnode=!0,s[1].populate(D),v===!0&&(y-=1),o=s[0];const T={};s[2]=this.element({parent:o||"root"},v===!0?S:i),T.x=960,T.y=150,T.mount="{x:0.5}",T.content=i.alphabets,T.font="lato-black",T.size=40,T.letterspacing=10,T.__textnode=!0,s[2].populate(T),v===!0&&(y-=1),o=s[0];const L={};s[3]=this.element({parent:o||"root"},v===!0?S:i),L.x=960,L.y=290,L.mount="{x:0.5}",L.content="Accents",L.font="lato-black",L.size=60,L.__textnode=!0,s[3].populate(L),v===!0&&(y-=1);const B=u.components&&u.components.Accents||h.Accents;o=s[0];const N={};s[4]=this.element({parent:o||"root"},v===!0?S:i),N.data=i.accents,N.y=400,N.ref="accents";const z=[];if(typeof B<"u")for(let oe in B.config.props)delete N[B.config.props[oe]],z.push(B.config.props[oe]);s[4].populate(N),v===!0&&(y-=1),o=s[4];const F={};F.data=i.accents,F.y=400,F.ref="accents",m=F.is||"Accents";let H;if(typeof m=="string"){if(H=u.components&&u.components[m]||h[m],!H)throw new Error('Component "Accents" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(H=m);s[5]=H.call(null,{props:F},s[4],i),s[5][Symbol.for("slots")][0]?(o=s[5][Symbol.for("slots")][0],S=s[5],v=!0):o=s[5][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[0];const X={};s[6]=this.element({parent:o||"root"},v===!0?S:i),X.w=950,X.h=40,X.color="0x000000ff",X.effects=[{type:"radius",props:{radius:10}}],X.y=1e3,X.placement="center",s[6].populate(X),v===!0&&(y-=1),o=s[6];const $={};return s[7]=this.element({parent:o||"root"},v===!0?S:i),$.content="The character ? represents a character that is not supported by the Lato-Black font",$.size=25,$.x=475,$.y=20,$.mount="{x:0.5, y:0.5}",$.__textnode=!0,s[7].populate($),v===!0&&(y-=1),s},effects:[function(o,i,u,h,g,w){i[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus(){const f=this.$select("accents");f&&f.$focus&&f.$focus()}}}),A6=Je.Component("Layout",{components:{Ball:MT},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),I.w=1920,I.h=1080,I.color="0xc4b5fdff",s[0].populate(I),v===!0&&(y-=1),o=s[0];const D={};s[1]=this.element({parent:o||"root"},v===!0?S:i),D.x=40,D.y=40,s[1].populate(D),v===!0&&(y-=1),o=s[1];const T={};s[2]=this.element({parent:o||"root"},v===!0?S:i),T.color="0x222222ff",T.content="Static horizontal Layout",T.__textnode=!0,s[2].populate(T),v===!0&&(y-=1),o=s[1];const L={};s[3]=this.element({parent:o||"root"},v===!0?S:i),L.y=50,L.gap=10,L.__layout=!0,s[3].populate(L),v===!0&&(y-=1),o=s[3];const B={};s[4]=this.element({parent:o||"root"},v===!0?S:i),B.w=50,B.h=100,B.color="0xeff6ffff",s[4].populate(B),v===!0&&(y-=1),o=s[3];const N={};s[5]=this.element({parent:o||"root"},v===!0?S:i),N.w=60,N.h=100,N.color="0xbfdbfeff",s[5].populate(N),v===!0&&(y-=1),o=s[3];const z={};s[6]=this.element({parent:o||"root"},v===!0?S:i),z.w=70,z.h=100,z.color="0x60a5faff",s[6].populate(z),v===!0&&(y-=1),o=s[3];const F={};s[7]=this.element({parent:o||"root"},v===!0?S:i),F.w=80,F.h=100,F.color="0x2563ebff",s[7].populate(F),v===!0&&(y-=1),o=s[3];const H={};s[8]=this.element({parent:o||"root"},v===!0?S:i),H.w=90,H.h=100,H.color="0x1e40afff",s[8].populate(H),v===!0&&(y-=1),o=s[0];const X={};s[9]=this.element({parent:o||"root"},v===!0?S:i),X.x=40,X.y=220,s[9].populate(X),v===!0&&(y-=1),o=s[9];const $={};s[10]=this.element({parent:o||"root"},v===!0?S:i),$.color="0x222222ff",$.content="Static vertical Layout",$.__textnode=!0,s[10].populate($),v===!0&&(y-=1),o=s[9];const oe={};s[11]=this.element({parent:o||"root"},v===!0?S:i),oe.y=50,oe.gap=10,oe.direction="vertical",oe.__layout=!0,s[11].populate(oe),v===!0&&(y-=1),o=s[11];const fe={};s[12]=this.element({parent:o||"root"},v===!0?S:i),fe.w=100,fe.h=50,fe.color="0xeff6ffff",s[12].populate(fe),v===!0&&(y-=1),o=s[11];const le={};s[13]=this.element({parent:o||"root"},v===!0?S:i),le.w=100,le.h=60,le.color="0xbfdbfeff",s[13].populate(le),v===!0&&(y-=1),o=s[11];const A={};s[14]=this.element({parent:o||"root"},v===!0?S:i),A.w=100,A.h=70,A.color="0x60a5faff",s[14].populate(A),v===!0&&(y-=1),o=s[11];const Y={};s[15]=this.element({parent:o||"root"},v===!0?S:i),Y.w=100,Y.h=80,Y.color="0x2563ebff",s[15].populate(Y),v===!0&&(y-=1),o=s[11];const Q={};s[16]=this.element({parent:o||"root"},v===!0?S:i),Q.w=100,Q.h=90,Q.color="0x1e40afff",s[16].populate(Q),v===!0&&(y-=1),o=s[0];const ee={};s[17]=this.element({parent:o||"root"},v===!0?S:i),ee.x=40,ee.y=700,s[17].populate(ee),v===!0&&(y-=1),o=s[17];const q={};s[18]=this.element({parent:o||"root"},v===!0?S:i),q.color="0x222222ff",q.content="Nested Layouts",q.__textnode=!0,s[18].populate(q),v===!0&&(y-=1),o=s[17];const W={};s[19]=this.element({parent:o||"root"},v===!0?S:i),W.y=50,W.gap=10,W.direction="horizontal",W.__layout=!0,s[19].populate(W),v===!0&&(y-=1),o=s[19];const ie={};s[20]=this.element({parent:o||"root"},v===!0?S:i),ie.w=100,ie.h=50,ie.color="0xeff6ffff",s[20].populate(ie),v===!0&&(y-=1),o=s[19];const ue={};s[21]=this.element({parent:o||"root"},v===!0?S:i),ue.w=100,ue.h=60,ue.color="0xbfdbfeff",s[21].populate(ue),v===!0&&(y-=1),o=s[19];const ve={};s[22]=this.element({parent:o||"root"},v===!0?S:i),ve.direction="vertical",ve.gap=10,ve.__layout=!0,s[22].populate(ve),v===!0&&(y-=1),o=s[22];const Te={};s[23]=this.element({parent:o||"root"},v===!0?S:i),Te.w=100,Te.h=70,Te.color="0x60a5faff",s[23].populate(Te),v===!0&&(y-=1),o=s[22];const xe={};s[24]=this.element({parent:o||"root"},v===!0?S:i),xe.w=100,xe.h=70,xe.color="0x60a5faff",s[24].populate(xe),v===!0&&(y-=1),o=s[22];const ke={};s[25]=this.element({parent:o||"root"},v===!0?S:i),ke.w=100,ke.h=70,ke.color="0x60a5faff",s[25].populate(ke),v===!0&&(y-=1),o=s[22];const pe={};s[26]=this.element({parent:o||"root"},v===!0?S:i),pe.gap=50,pe.__layout=!0,s[26].populate(pe),v===!0&&(y-=1),o=s[26];const Le={};s[27]=this.element({parent:o||"root"},v===!0?S:i),Le.w=50,Le.h=50,Le.color="0x2563ebff",s[27].populate(Le),v===!0&&(y-=1),o=s[26];const G={};s[28]=this.element({parent:o||"root"},v===!0?S:i),G.w=50,G.h=50,G.color="0x2563ebff",s[28].populate(G),v===!0&&(y-=1),o=s[26];const Ie={};s[29]=this.element({parent:o||"root"},v===!0?S:i),Ie.w=50,Ie.h=50,Ie.color="0x2563ebff",s[29].populate(Ie),v===!0&&(y-=1),o=s[19];const Oe={};s[30]=this.element({parent:o||"root"},v===!0?S:i),Oe.w=100,Oe.h=80,Oe.color="0x2563ebff",s[30].populate(Oe),v===!0&&(y-=1),o=s[19];const Be={};s[31]=this.element({parent:o||"root"},v===!0?S:i),Be.w=100,Be.h=90,Be.color="0x1e40afff",s[31].populate(Be),v===!0&&(y-=1),o=s[0];const Ve={};s[32]=this.element({parent:o||"root"},v===!0?S:i),Ve.x=800,Ve.y=40,s[32].populate(Ve),v===!0&&(y-=1),o=s[32];const qe={};s[33]=this.element({parent:o||"root"},v===!0?S:i),qe.color="0x222222ff",qe.content="Layout with Text",qe.__textnode=!0,s[33].populate(qe),v===!0&&(y-=1),o=s[32];const ze={};s[34]=this.element({parent:o||"root"},v===!0?S:i),ze.y=50,ze.gap=20,ze.__layout=!0,s[34].populate(ze),v===!0&&(y-=1),o=s[34];const it={};s[35]=this.element({parent:o||"root"},v===!0?S:i),it.w=3,it.h=32,it.color="0x60a5faff",s[35].populate(it),v===!0&&(y-=1),o=s[34];const me={};s[36]=this.element({parent:o||"root"},v===!0?S:i),me.color="0x1e40afff",me.content="Hello",me.__textnode=!0,s[36].populate(me),v===!0&&(y-=1),o=s[34];const wt={};s[37]=this.element({parent:o||"root"},v===!0?S:i),wt.w=3,wt.h=32,wt.color="0x60a5faff",s[37].populate(wt),v===!0&&(y-=1),o=s[34];const ft={};s[38]=this.element({parent:o||"root"},v===!0?S:i),ft.content="World",ft.color="0x1e40afff",ft.__textnode=!0,s[38].populate(ft),v===!0&&(y-=1),o=s[34];const rt={};s[39]=this.element({parent:o||"root"},v===!0?S:i),rt.w=3,rt.h=32,rt.color="0x60a5faff",s[39].populate(rt),v===!0&&(y-=1),o=s[0];const St={};s[40]=this.element({parent:o||"root"},v===!0?S:i),St.x=800,St.y=210,s[40].populate(St),v===!0&&(y-=1),o=s[40];const nt={};s[41]=this.element({parent:o||"root"},v===!0?S:i),nt.color="0x222222ff",nt.content="Dynamic dimensions Layout",nt.__textnode=!0,s[41].populate(nt),v===!0&&(y-=1),o=s[40];const st={};s[42]=this.element({parent:o||"root"},v===!0?S:i),st.y=50,st.gap=20,st["@updated"]=i.dynamicLayoutUpdated&&i.dynamicLayoutUpdated.bind(i),st.__layout=!0,s[42].populate(st),v===!0&&(y-=1),o=s[42];const Xe={};s[43]=this.element({parent:o||"root"},v===!0?S:i),Xe.w=i.w*.5,Xe.h=60,Xe.color="0xeff6ffff",s[43].populate(Xe),v===!0&&(y-=1),o=s[42];const He={};s[44]=this.element({parent:o||"root"},v===!0?S:i),He.w=i.w*.6,He.h=60,He.color="0xbfdbfeff",s[44].populate(He),v===!0&&(y-=1),o=s[42];const Pe={};s[45]=this.element({parent:o||"root"},v===!0?S:i),Pe.w=i.w*.7,Pe.h=60,Pe.color="0x60a5faff",s[45].populate(Pe),v===!0&&(y-=1),o=s[42];const J={};s[46]=this.element({parent:o||"root"},v===!0?S:i),J.w=i.w*.8,J.h=60,J.color="0x2563ebff",s[46].populate(J),v===!0&&(y-=1),o=s[42];const Ge={};s[47]=this.element({parent:o||"root"},v===!0?S:i),Ge.w=i.w*.9,Ge.h=60,Ge.color="0x1e40afff",s[47].populate(Ge),v===!0&&(y-=1),o=s[0];const Ye={};s[48]=this.element({parent:o||"root"},v===!0?S:i),Ye.x=800,Ye.y=400,s[48].populate(Ye),v===!0&&(y-=1),o=s[48];const ht={};s[49]=this.element({parent:o||"root"},v===!0?S:i),ht.color="0x222222ff",ht.content="For loop Layout",ht.__textnode=!0,s[49].populate(ht),v===!0&&(y-=1),o=s[48];const vt={};s[50]=this.element({parent:o||"root"},v===!0?S:i),vt.y=50,vt.gap=20,vt.__layout=!0,s[50].populate(vt),v===!0&&(y-=1),o=s[50];const Ae=[],Ue=(lt=[],_e,dt)=>{const lo=w(lt),bo=new Set;let Ci=lo.length;for(;Ci--;)lo[Ci],bo.add(""+Ci);let fo=dt.length;for(;fo--;)if(bo.has(dt[fo])===!1){const Gt=dt[fo];_e[51][Gt]&&_e[51][Gt].destroy(),delete _e[51][Gt]}dt.length=0;const Eo=lo.length,zr=[];for(let Gt=0;Gt<Eo;Gt++){const bt=Object.create(i);o=_e[50],bt.color=lo[Gt],bt.undefined=Gt,bt.key=""+Gt,dt.push(bt.key),o=_e[50],_e[51]===void 0&&(_e[51]={});const co={};_e[51][bt.key]===void 0&&(_e[51][bt.key]=this.element({parent:o||"root"},v===!0?S:i)),co.w=60,co.h=60,co.color=bt.color,_e[51][bt.key].nodeId===void 0&&(_e[51][bt.key].populate(co),v===!0&&(y-=1))}return zr};let Ze;g(()=>{i[Symbol.for("removeGlobalEffects")](Ze),Ze=null,Ze=Ue(i.colors,s,Ae)},"colors"),g(()=>{i.color;for(let lt=0;lt<i.colors.length;lt++){const _e={};_e.undefined=lt,_e.color=i.colors[lt],_e.key=lt,s[51][_e.key].set("color",_e.color)}}),o=s[0];const Ce={};s[52]=this.element({parent:o||"root"},v===!0?S:i),Ce.x=800,Ce.y=600,s[52].populate(Ce),v===!0&&(y-=1),o=s[52];const ce={};s[53]=this.element({parent:o||"root"},v===!0?S:i),ce.color="0x222222ff",ce.content="Layout with transitions",ce.__textnode=!0,s[53].populate(ce),v===!0&&(y-=1),o=s[52];const Ne={};s[54]=this.element({parent:o||"root"},v===!0?S:i),Ne.direction="horizontal",Ne.gap=20,Ne.y=60,Ne.__layout=!0,s[54].populate(Ne),v===!0&&(y-=1),o=s[54];const xt=[],Ut=(lt=[],_e,dt)=>{const lo=w(lt),bo=new Set;let Ci=lo.length;for(;Ci--;)lo[Ci],bo.add(""+Ci);let fo=dt.length;for(;fo--;)if(bo.has(dt[fo])===!1){const Gt=dt[fo];_e[55][Gt]&&_e[55][Gt].destroy(),delete _e[55][Gt],_e[56][Gt]&&_e[56][Gt].destroy(),delete _e[56][Gt],_e[57][Gt]&&_e[57][Gt].destroy(),delete _e[57][Gt],_e[58][Gt]&&_e[58][Gt].destroy(),delete _e[58][Gt],_e[59][Gt]&&_e[59][Gt].destroy(),delete _e[59][Gt],_e[60][Gt]&&_e[60][Gt].destroy(),delete _e[60][Gt]}dt.length=0;const Eo=lo.length,zr=[];for(let Gt=0;Gt<Eo;Gt++){const bt=Object.create(i);o=_e[54],bt.color=lo[Gt],bt.undefined=Gt,bt.key=""+Gt,dt.push(bt.key),o=_e[54],_e[55]===void 0&&(_e[55]={});const co={};_e[55][bt.key]===void 0&&(_e[55][bt.key]=this.element({parent:o||"root"},v===!0?S:i)),co.h=100,co.w={transition:{value:bt.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},co.color=bt.color,_e[55][bt.key].nodeId===void 0&&(_e[55][bt.key].populate(co),v===!0&&(y-=1)),o=_e[55][bt.key],_e[56]===void 0&&(_e[56]={});const Go={};_e[56][bt.key]===void 0&&(_e[56][bt.key]=this.element({parent:o||"root"},v===!0?S:i)),Go.gap=10,Go.x=10,Go.y=35,Go.__layout=!0,_e[56][bt.key].nodeId===void 0&&(_e[56][bt.key].populate(Go),v===!0&&(y-=1)),o=_e[56][bt.key],_e[57]===void 0&&(_e[57]={});const Vr={};_e[57][bt.key]===void 0&&(_e[57][bt.key]=this.element({parent:o||"root"},v===!0?S:i)),Vr.h=20,Vr.w={transition:{value:bt.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Vr.color="0xffffffff",_e[57][bt.key].nodeId===void 0&&(_e[57][bt.key].populate(Vr),v===!0&&(y-=1)),o=_e[56][bt.key],_e[58]===void 0&&(_e[58]={});const qi={};_e[58][bt.key]===void 0&&(_e[58][bt.key]=this.element({parent:o||"root"},v===!0?S:i)),qi.h=20,qi.w={transition:{value:bt.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},qi.color="0xccccccff",_e[58][bt.key].nodeId===void 0&&(_e[58][bt.key].populate(qi),v===!0&&(y-=1)),o=_e[56][bt.key],_e[59]===void 0&&(_e[59]={});const Ui={};_e[59][bt.key]===void 0&&(_e[59][bt.key]=this.element({parent:o||"root"},v===!0?S:i)),Ui.h=20,Ui.w={transition:{value:bt.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Ui.color="0x333333ff",_e[59][bt.key].nodeId===void 0&&(_e[59][bt.key].populate(Ui),v===!0&&(y-=1)),o=_e[56][bt.key],_e[60]===void 0&&(_e[60]={});const Ki={};_e[60][bt.key]===void 0&&(_e[60][bt.key]=this.element({parent:o||"root"},v===!0?S:i)),Ki.h=20,Ki.w={transition:{value:bt.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Ki.color="0x000000ff",_e[60][bt.key].nodeId===void 0&&(_e[60][bt.key].populate(Ki),v===!0&&(y-=1))}return zr};let Ft;g(()=>{i[Symbol.for("removeGlobalEffects")](Ft),Ft=null,Ft=Ut(i.colors,s,xt)},"colors"),g(()=>{i.w3;for(let lt=0;lt<i.colors.length;lt++){const _e={};_e.undefined=lt,_e.color=i.colors[lt],_e.key=lt,s[55][_e.key].set("w",{transition:{value:i.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{i.color;for(let lt=0;lt<i.colors.length;lt++){const _e={};_e.undefined=lt,_e.color=i.colors[lt],_e.key=lt,s[55][_e.key].set("color",_e.color)}}),g(()=>{i.w2;for(let lt=0;lt<i.colors.length;lt++){const _e={};_e.undefined=lt,_e.color=i.colors[lt],_e.key=lt,s[57][_e.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{i.w2;for(let lt=0;lt<i.colors.length;lt++){const _e={};_e.undefined=lt,_e.color=i.colors[lt],_e.key=lt,s[58][_e.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{i.w2;for(let lt=0;lt<i.colors.length;lt++){const _e={};_e.undefined=lt,_e.color=i.colors[lt],_e.key=lt,s[59][_e.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{i.w2;for(let lt=0;lt<i.colors.length;lt++){const _e={};_e.undefined=lt,_e.color=i.colors[lt],_e.key=lt,s[60][_e.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),o=s[0];const Tt={};s[61]=this.element({parent:o||"root"},v===!0?S:i),Tt.x=800,Tt.y=840,s[61].populate(Tt),v===!0&&(y-=1),o=s[61];const Vt={};s[62]=this.element({parent:o||"root"},v===!0?S:i),Vt.color="0x222222ff",Vt.content="Layout with padding",Vt.__textnode=!0,s[62].populate(Vt),v===!0&&(y-=1),o=s[61];const ln={};s[63]=this.element({parent:o||"root"},v===!0?S:i),ln.direction="horizontal",ln.gap=20,ln.y=60,ln.padding=20,ln.color="0xffffffff",ln.__layout=!0,s[63].populate(ln),v===!0&&(y-=1),o=s[63];const pi={};s[64]=this.element({parent:o||"root"},v===!0?S:i),pi.w=40,pi.h=40,pi.color="0xbfdbfeff",s[64].populate(pi),v===!0&&(y-=1),o=s[63];const Qn={};s[65]=this.element({parent:o||"root"},v===!0?S:i),Qn.w=40,Qn.h=40,Qn.color="0x60a5faff",s[65].populate(Qn),v===!0&&(y-=1),o=s[63];const zn={};s[66]=this.element({parent:o||"root"},v===!0?S:i),zn.w=40,zn.h=40,zn.color="0x2563ebff",s[66].populate(zn),v===!0&&(y-=1),o=s[61];const Vn={};s[67]=this.element({parent:o||"root"},v===!0?S:i),Vn.direction="horizontal",Vn.gap=20,Vn.y=60,Vn.x=240,Vn.padding={top:40,y:10,left:40,x:10},Vn.color="0xffffffff",Vn.__layout=!0,s[67].populate(Vn),v===!0&&(y-=1),o=s[67];const In={};s[68]=this.element({parent:o||"root"},v===!0?S:i),In.w=40,In.h=40,In.color="0xbfdbfeff",s[68].populate(In),v===!0&&(y-=1),o=s[67];const ni={};s[69]=this.element({parent:o||"root"},v===!0?S:i),ni.w=40,ni.h=40,ni.color="0x60a5faff",s[69].populate(ni),v===!0&&(y-=1),o=s[67];const yn={};s[70]=this.element({parent:o||"root"},v===!0?S:i),yn.w=40,yn.h=40,yn.color="0x2563ebff",s[70].populate(yn),v===!0&&(y-=1),o=s[61];const Me={};s[71]=this.element({parent:o||"root"},v===!0?S:i),Me.direction="vertical",Me.gap=20,Me.y=60,Me.x=500,Me.padding=20,Me.color="0xffffffff",Me.__layout=!0,s[71].populate(Me),v===!0&&(y-=1),o=s[71];const $e={};s[72]=this.element({parent:o||"root"},v===!0?S:i),$e.w=40,$e.h=20,$e.color="0xbfdbfeff",s[72].populate($e),v===!0&&(y-=1),o=s[71];const Qt={};s[73]=this.element({parent:o||"root"},v===!0?S:i),Qt.w=40,Qt.h=20,Qt.color="0x60a5faff",s[73].populate(Qt),v===!0&&(y-=1),o=s[71];const Sn={};s[74]=this.element({parent:o||"root"},v===!0?S:i),Sn.w=40,Sn.h=20,Sn.color="0x2563ebff",s[74].populate(Sn),v===!0&&(y-=1),o=s[61];const En={};s[75]=this.element({parent:o||"root"},v===!0?S:i),En.direction="vertical",En.gap=20,En.y=60,En.x=640,En.padding={top:40,y:10,left:40,x:10},En.color="0xffffffff",En.__layout=!0,s[75].populate(En),v===!0&&(y-=1),o=s[75];const dn={};s[76]=this.element({parent:o||"root"},v===!0?S:i),dn.w=40,dn.h=20,dn.color="0xbfdbfeff",s[76].populate(dn),v===!0&&(y-=1),o=s[75];const Mn={};s[77]=this.element({parent:o||"root"},v===!0?S:i),Mn.w=40,Mn.h=20,Mn.color="0x60a5faff",s[77].populate(Mn),v===!0&&(y-=1),o=s[75];const _n={};s[78]=this.element({parent:o||"root"},v===!0?S:i),_n.w=40,_n.h=20,_n.color="0x2563ebff",s[78].populate(_n),v===!0&&(y-=1),o=s[0];const Wn={};s[79]=this.element({parent:o||"root"},v===!0?S:i),Wn.x=1300,Wn.y=210,s[79].populate(Wn),v===!0&&(y-=1),o=s[79];const Ct={};s[80]=this.element({parent:o||"root"},v===!0?S:i),Ct.color="0x222222ff",Ct.content="Layout with a Component",Ct.__textnode=!0,s[80].populate(Ct),v===!0&&(y-=1),o=s[79];const et={};s[81]=this.element({parent:o||"root"},v===!0?S:i),et.y=50,et.gap=40,et.__layout=!0,s[81].populate(et),v===!0&&(y-=1),o=s[81];const Un={};s[82]=this.element({parent:o||"root"},v===!0?S:i),Un.w=100,Un.h=100,Un.color="0xff0000ff",s[82].populate(Un),v===!0&&(y-=1),o=s[81];const Ht={};s[83]=this.element({parent:o||"root"},v===!0?S:i),Ht.w=i.w,Ht.h=100,Ht.color="0xff0000ff",s[83].populate(Ht),v===!0&&(y-=1);const Rn=u.components&&u.components.Ball||h.Ball;o=s[81];const pn={};s[84]=this.element({parent:o||"root"},v===!0?S:i),pn.y=500,pn.w=100;const Lt=[];if(typeof Rn<"u")for(let lt in Rn.config.props)delete pn[Rn.config.props[lt]],Lt.push(Rn.config.props[lt]);s[84].populate(pn),v===!0&&(y-=1),o=s[84];const Si={};Si.y=500,Si.w=100,m=Si.is||"Ball";let Cn;if(typeof m=="string"){if(Cn=u.components&&u.components[m]||h[m],!Cn)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Cn=m);s[85]=Cn.call(null,{props:Si},s[84],i),s[85][Symbol.for("slots")][0]?(o=s[85][Symbol.for("slots")][0],S=s[85],v=!0):o=s[85][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[81];const To={};return s[86]=this.element({parent:o||"root"},v===!0?S:i),To.w=100,To.h=100,To.color="0xff0000ff",s[86].populate(To),v===!0&&(y-=1),s},effects:[function(o,i,u,h,g,w){i[43].set("w",o.w*.5)},function(o,i,u,h,g,w){i[44].set("w",o.w*.6)},function(o,i,u,h,g,w){i[45].set("w",o.w*.7)},function(o,i,u,h,g,w){i[46].set("w",o.w*.8)},function(o,i,u,h,g,w){i[47].set("w",o.w*.9)},function(o,i,u,h,g,w){i[67].set("padding",{top:40,y:10,left:40,x:10})},function(o,i,u,h,g,w){i[75].set("padding",{top:40,y:10,left:40,x:10})},function(o,i,u,h,g,w){i[83].set("w",o.w)}],context:{}},state(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready(){this.$setInterval(()=>{this.w=this.w===100?50:100,this.w2=this.w2===20?40:20,this.w3=this.w3===150?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(f){this.$log.info("Dynamic layout updated",f.w,f.h)}}}),Nm=typeof window<"u"?window:{};let _T;const I6=f=>{_T=f};let yg;const ag=[],kl={};let Xh,vs;Nm.__firebolt&&Nm.__firebolt.testHarness&&(vs=Nm.__firebolt.testHarness);function RT(f){console.debug("Sending message to transport: "+f);let o=JSON.parse(f);if(Array.isArray(o)){o.forEach(h=>RT(JSON.stringify(h)));return}let[i,u]=o.method.split(".");vs&&vs.onSend&&vs.onSend(i,u,o.params,o.id),u.match(/^on[A-Z]/)&&(o.params.listen?kl[o.id]=i.toLowerCase()+"."+u[2].toLowerCase()+u.substr(3):Object.keys(kl).forEach(h=>{kl[h]===i.toLowerCase()+"."+u[2].toLowerCase()+u.substr(3)&&delete kl[h]})),yg?LT(o):ag.push(o)}function LT(f){let o;try{o=R6(f.method,f.params)}catch{setTimeout(()=>Xh(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:f.id})))}setTimeout(()=>Xh(JSON.stringify({jsonrpc:"2.0",result:o,id:f.id})))}function M6(f){Xh=f,vs&&typeof vs.initialize=="function"&&vs.initialize({emit:DT,listen:function(...o){_T(...o)}})}function DT(f,o,i){const u=Object.entries(kl).find(([h,g])=>g.toLowerCase()===f.toLowerCase()+"."+o.toLowerCase());if(u){let h=JSON.stringify({jsonrpc:"2.0",id:parseInt(u[0]),result:i});Xh(h)}}function _6(f={},o){const i=o.split(".");let u=f;for(let h=0;h<i.length;h++)u=(Object.entries(u).find(([g,w])=>g.toLowerCase()===i[h].toLowerCase())||[null,{}])[1];return u}function R6(f,o){let i=_6(yg,f);return f.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(i={event:f,listening:!0}),typeof i=="function"?o==null?i():i(o):i}function L6(f){yg=f,ag.forEach(o=>LT(o)),ag.length=0}const qh={send:RT,receive:M6,event:DT};function PT(f,o,i){const u=f?Object.values(f).length:0;return u===i&&o===void 0?"getter":u===i&&typeof o=="function"||u===0&&typeof o=="function"?"subscriber":u===i&&o!==void 0?"setter":null}const Um={};function D6(f,o,i,u,h,g){const w=PT(i,u,h),s=h?"."+Object.keys(i).filter(S=>S!=="value").map(S=>i[S]).join("."):"",m=`${f}.${o}${s}`;if(w==="getter")return Um.hasOwnProperty(m)?Um[m]:g;if(w!=="subscriber"){if(w==="setter")return Um[m]=u,qh.event(f,`${o}Changed`,{value:u}),null}}const hn={mock:D6},OT={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(f){return hn.mock("Accessibility","closedCaptionsSettings",f,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},voiceGuidance:{enabled:!0,speed:2},voiceGuidanceSettings:function(f){return hn.mock("Accessibility","voiceGuidanceSettings",f,void 0,0,{enabled:!0,speed:2})},audioDescriptionSettings:function(f){return hn.mock("Accessibility","audioDescriptionSettings",f,void 0,0,{enabled:!0})}},P6={id:function(f){return hn.mock("Account","id",f,void 0,0,"123")},uid:function(f){return hn.mock("Account","uid",f,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},O6={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(f){return hn.mock("Advertising","policy",f,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},N6={token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},U6={supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},NT={id:function(f){return hn.mock("Device","id",f,void 0,0,"123")},distributor:function(f){return hn.mock("Device","distributor",f,void 0,0,"Company")},platform:function(f){return hn.mock("Device","platform",f,void 0,0,"WPE")},uid:function(f){return hn.mock("Device","uid",f,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(f){return hn.mock("Device","type",f,void 0,0,"STB")},model:function(f){return hn.mock("Device","model",f,void 0,0,"xi6")},sku:function(f){return hn.mock("Device","sku",f,void 0,0,"AX061AEI")},make:function(f){return hn.mock("Device","make",f,void 0,0,"Arris")},version:function(f){return hn.mock("Device","version",f,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(f){return hn.mock("Device","hdcp",f,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(f){return hn.mock("Device","hdr",f,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(f){return hn.mock("Device","audio",f,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(f){return hn.mock("Device","screenResolution",f,void 0,0,[1920,1080])},videoResolution:function(f){return hn.mock("Device","videoResolution",f,void 0,0,[1920,1080])},name:function(f){return hn.mock("Device","name",f,void 0,0,"Living Room")},network:function(f){return hn.mock("Device","network",f,void 0,0,{state:"connected",type:"wifi"})}},B6={policy:function(f){return hn.mock("Discovery","policy",f,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null},j6={email:"user@domain.com",password:"abc123",standard:"Living Room"};let Aa={state:"inactive",previous:"initializing"},IC={state:"foreground",previous:"inactive"},MC={state:"unloading",previous:"inactive"};const yl=f=>{qh.event("Lifecycle",f.state,f)},Kh=typeof window<"u"?window:{},vl=Kh.__firebolt?!!Kh.__firebolt.automation:!1,F6={ready:function(){Aa.previous="initializing",setTimeout(()=>yl(Aa),vl?1:500),IC.previous="inactive",setTimeout(()=>yl(IC),vl?2:1e3)},close:function(f){let o=f.reason;if(o==="remoteButton")Aa.previous="foreground",setTimeout(()=>yl(Aa),vl?1:500);else if(["userExit","error"].includes(o))Aa.previous="foreground",MC.previous="inactive",setTimeout(()=>yl(Aa),vl?1:500),setTimeout(()=>yl(MC),vl?2:1e3);else throw"Invalid close reason"},finished:function(){Kh.location&&(Kh.location.href="about:blank")}},UT={locality:function(f){return hn.mock("Localization","locality",f,void 0,0,"Philadelphia")},postalCode:function(f){return hn.mock("Localization","postalCode",f,void 0,0,"19103")},countryCode:function(f){return hn.mock("Localization","countryCode",f,void 0,0,"US")},language:function(f){return hn.mock("Localization","language",f,void 0,0,"en")},preferredAudioLanguages:function(f){return hn.mock("Localization","preferredAudioLanguages",f,void 0,0,["spa","eng"])},locale:function(f){return hn.mock("Localization","locale",f,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},$6={ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},z6={initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},V6={approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},H6={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(f){return hn.mock("SecondScreen","friendlyName",f,void 0,0,"Living Room")}},G6={get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},W6={localization:UT,device:NT,accessibility:OT};class X6{constructor(){this._callback=null,this._queue=[]}send(o){this._queue.push(o)}receive(o){this._callback=o}flush(o){o.receive(this._callback),this._queue.forEach(i=>o.send(i))}}const gs={},So={},q6=(f,o)=>{gs.app=f,gs.platform={logLevel:"WARN",...o},gs.user={}},K6=(f,o)=>{So[f]&&So[f].forEach(i=>i(o))},Y6=(f={},o)=>{const i=o.split(".");for(let u=0;u<i.length;u++)f=f[i[u]]=f[i[u]]!==void 0?f[i[u]]:{};return typeof f=="object"?Object.keys(f).length?f:void 0:f},Bm={get(f,o,i=void 0){const u=Y6(gs[f],o);return u!==void 0?u:i},has(f,o){return!!this.get(f,o)},set(f,o){gs.user[f]=o,K6(f,o)},subscribe(f,o){So[f]=So[f]||[],So[f].push(o)},unsubscribe(f,o){if(o){const i=So[f]&&So[f].findIndex(u=>u===o);i>-1&&So[f].splice(i,1)}else f in So&&(So[f]=[])},clearSubscribers(){for(const f of Object.getOwnPropertyNames(So))delete So[f]},setLogLevel(f){gs.platform.logLevel=f},getLogLevel(){return gs.platform.logLevel}},Ho=typeof window<"u"?window:{};class Yh{constructor(o){this.bridge=o}send(o){this.bridge.JSMessageChanged(o,()=>{})}receive(o){Ho.$badger=Ho.$badger||{};const i=Ho.$badger.callback?Ho.$badger.callback.bind(Ho.$badger):null,u=Ho.$badger.event?Ho.$badger.event.bind(Ho.$badger):null;Ho.$badger.callback=(h,g,w)=>{w.jsonrpc?o(JSON.stringify(w)):i&&i(h,g,w)},Ho.$badger.event=(h,g)=>{g.jsonrpc?o(JSON.stringify(g)):u&&u(h,g)}}static isLegacy(o){return Yh.isXREProxy(o)||o.send===void 0&&o.JSMessageChanged}static isXREProxy(o){return o.proxyObjectTest!==void 0}}const Q6=100;class Z6{constructor(o){this._endpoint=o,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}send(o){this._connect(),this._connected?this._ws.send(o):this._queue.length<Q6&&this._queue.push(o)}receive(o){o&&(this._connect(),this._callbacks.push(o))}_notifyCallbacks(o){for(let i=0;i<this._callbacks.length;i++)setTimeout(()=>this._callbacks[i](o),1)}_connect(){this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",o=>{this._notifyCallbacks(o.data)}),this._ws.addEventListener("error",o=>{}),this._ws.addEventListener("close",o=>{this._ws=null,this._connected=!1}),this._ws.addEventListener("open",o=>{this._connected=!0;for(let i=0;i<this._queue.length;i++)this._ws.send(this._queue[i]);this._queue=[]}))}}function J6(f,o){if(!o||!o.methods)return f;const{methods:i}=o,u=JSON.parse(JSON.stringify(f));return Object.keys(i).forEach(h=>{const g=i[h],w=g["x-method"],[s,m]=w.split("."),S={};S[g["x-this-param"]]=u,u[h]=(...v)=>{for(var y=0;y<v.length;y++)S[g["x-additional-params"][y]]=v[y];return mn.send(s.toLowerCase(),m,S)}}),u}const _C={transform:J6},eD="com.comcast.BridgeObject_1";let jm=null;const tD=f=>f&&typeof f.event=="string"&&typeof f.listening=="boolean",Fn=typeof window<"u"?window:{};class mn{constructor(){this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new X6,this._deprecated={},this.isMock=!1}static addEventEmitter(o){mn.get()._eventEmitters.push(o)}static registerDeprecatedMethod(o,i,u){mn.get()._deprecated[o.toLowerCase()+"."+i.toLowerCase()]={alternative:u||""}}_endpoint(){return Fn.__firebolt&&Fn.__firebolt.endpoint?Fn.__firebolt.endpoint:null}constructTransportLayer(){let o;const i=this._endpoint();return i&&(i.startsWith("ws://")||i.startsWith("wss://"))?(o=new Z6(i),o.receive(this.receiveHandler.bind(this))):typeof Fn.ServiceManager<"u"&&Fn.ServiceManager&&Fn.ServiceManager.version?(o=this._queue,Fn.ServiceManager.getServiceForJavaScript(eD,u=>{Yh.isLegacy(u)?o=new Yh(u):o=u,this.setTransportLayer(o)})):(this.isMock=!0,o=qh,o.receive(this.receiveHandler.bind(this))),o}setTransportLayer(o){this._transport=o,this._queue.flush(o)}static send(o,i,u,h){return mn.get()._send(o,i,u,h)}static listen(o,i,u,h){return mn.get()._sendAndGetId(o,i,u,h)}_send(o,i,u,h){return Array.isArray(o)&&!i&&!u?this._batch(o):this._sendAndGetId(o,i,u,h).promise}_sendAndGetId(o,i,u,h){const{promise:g,json:w,id:s}=this._processRequest(o,i,u,h),m=JSON.stringify(w);return Bm.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+m),this._transport.send(m),{id:s,promise:g}}_batch(o){const i=[],u=[];o.forEach(({module:g,method:w,params:s,transforms:m})=>{const S=this._processRequest(g,w,s,m);i.push({promise:S.promise,id:S.id}),u.push(S.json)});const h=JSON.stringify(u);return Bm.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+h),this._transport.send(h),i}_processRequest(o,i,u,h){const g=this._addPromiseToQueue(o,i,u,h),w=this._createRequestJSON(o,i,u),s={promise:g,json:w,id:this._id};return this._id++,s}_createRequestJSON(o,i,u){return{jsonrpc:"2.0",method:o.toLowerCase()+"."+i,params:u,id:this._id}}_addPromiseToQueue(o,i,u,h){return new Promise((g,w)=>{this._promises[this._id]={},this._promises[this._id].promise=this,this._promises[this._id].resolve=g,this._promises[this._id].reject=w,this._promises[this._id].transforms=h;const s=this._deprecated[o.toLowerCase()+"."+i.toLowerCase()];s&&console.warn(`WARNING: ${o}.${i}() is deprecated. `+s.alternative),i.match(/^on[A-Z]/)&&(u.listen?this._eventIds.push(this._id):this._eventIds=this._eventIds.filter(m=>m!==this._id))})}static get(){if(Fn.__firebolt=Fn.__firebolt||{},Fn.__firebolt.transport==null&&jm==null){const o=new mn;o.init(),o.isMock?jm=o:(Fn.__firebolt=Fn.__firebolt||{},Fn.__firebolt.transport=o),Fn.__firebolt.setTransportLayer=o.setTransportLayer.bind(o)}return Fn.__firebolt.transport?Fn.__firebolt.transport:jm}receiveHandler(o){Bm.getLogLevel()==="DEBUG"&&console.debug("Received message from transport: "+o);const i=JSON.parse(o),u=this._promises[i.id];if(u){if(i.error)u.reject(i.error);else{let h=i.result;u.transforms&&(Array.isArray(i.result)?h=h.map(g=>_C.transform(g,u.transforms)):h=_C.transform(h,u.transforms)),u.resolve(h)}delete this._promises[i.id]}this._eventIds.includes(i.id)&&!tD(i.result)&&this._eventEmitters.forEach(h=>{h(i.id,i.result)})}init(){q6({},{log:!0}),this._queue.receive(this.receiveHandler.bind(this)),Fn.__firebolt&&(Fn.__firebolt.mockTransportLayer===!0?(this.isMock=!0,this.setTransportLayer(qh)):Fn.__firebolt.getTransportLayer&&this.setTransportLayer(Fn.__firebolt.getTransportLayer())),this._transport==null&&(this._transport=this.constructTransportLayer())}}Fn.__firebolt=Fn.__firebolt||{};Fn.__firebolt.setTransportLayer=f=>{mn.get().setTransportLayer(f)};let hs=0;const rn={internal:{},external:{},get:f=>Object.assign(Object.assign({},rn.internal[f]),rn.external[f]),set:(f,o,i)=>{rn.external[f]=rn.external[f]||{},rn.external[f][o]=i},setInternal:(f,o,i)=>{rn.internal[f]=rn.internal[f]||{},rn.internal[f][o]=i},find:f=>{let o;return[rn.internal,rn.external].find(i=>{if(o=Object.keys(i).find(u=>i[u][f]),o)return!0}),o},remove:f=>{[rn.internal,rn.external].forEach(o=>{Object.keys(o).forEach(i=>{o[i]&&o[i][f]&&(delete o[i][f],Object.values(o[i]).length===0&&delete o[i])})})},removeKey:(f,o=!1)=>{o&&rn.internal[f]&&delete rn.internal[f],rn.external[f]&&delete rn.external[f]},keys:()=>Array.from(new Set(Object.keys(rn.internal).concat(Object.keys(rn.external)))),count:f=>Object.values(rn.get(f)).length},Qh={},Oh=[],BT={},Nh={};let RC=!1;const jT=(f,o)=>{LC(rn.internal[Qh[f]],[o]),LC(rn.external[Qh[f]],[o])},$r=(f,o)=>{BT[f.toLowerCase()]=o.concat()},nd=(f,o,i)=>{Nh[f.toLowerCase()]=Nh[f.toLowerCase()]||{},Nh[f.toLowerCase()][o]=i.concat()},LC=(f,o)=>{f&&Object.keys(f).forEach(i=>{let u=f[i];Oh.indexOf(parseInt(i))>=0&&(Oh.splice(Oh.indexOf(parseInt(i)),1),delete f[i]),u.apply(null,o)})},FT=function(f,o,i,u,h,g=!1){if(oD(),typeof i!="function")return Promise.reject("No valid callback function provided.");{if(f==="*")return Promise.reject("No valid module name provided");const w=o==="*",s=w?BT[f]:[o],m=[],S=Object.values(u).length>0,v=Object.keys(u).sort().map(T=>T+"="+JSON.stringify(u[T])).join("&");hs++,h&&Oh.push(hs),s.forEach(T=>{const L=f+"."+T+(S?`.${v}`:"");if(Object.values(rn.get(L)).length===0){const N=Object.assign({listen:!0},u),{id:z,promise:F}=mn.listen(f,"on"+T[0].toUpperCase()+T.substring(1),N);Qh[z]=L,m.push(F)}const B=g?rn.setInternal:rn.set;w?B(L,""+hs,N=>i(T,N)):B(L,""+hs,i)});let y,I,D=new Promise((T,L)=>{y=T,I=L});return m.length?Promise.all(m).then(T=>{y(hs)}).catch(T=>{o==="*"?y(hs):I(T)}):y(hs),D}},$T=function(...f){const o=f.pop(),[i,u,h]=zT(...f);return[i,u,o,h]},zT=function(...f){const o=(f.shift()||"*").toLowerCase(),i=f.shift()||"*",u={};for(let h=0;f.length;h++)u[Nh[o][i][h]]=f.shift();return[o,i,u]},nD=function(...f){const[o,i,u,h]=$T(...f);return FT(o,i,u,h,!0)},VT=function(...f){const[o,i,u,h]=$T(...f);return FT(o,i,u,h,!1)},iD=function(...f){if(f&&f.length&&typeof f[0]=="number")return Fm(f[0]);if(f&&f.length&&typeof f[1]=="number")return Fm(f[1]);{const[o,i,u]=zT(...f);return Fm(o,i,u)}},Eh=(f,o)=>{const[i,u]=f.split(".").slice(0,2),h=Object.assign({listen:!1},o);mn.send(i,"on"+u[0].toUpperCase()+u.substr(1),h)},Fm=function(f=!1,o=!1,i){if(o==="*"&&(o=!1),typeof f=="number"){const u=f.toString(),h=rn.find(u);return h?(rn.remove(u),rn.count(h)===0&&Eh(h),!0):!1}else if(!f&&!o)rn.keys().forEach(u=>{rn.removeKey(u),Eh(u)});else if(!o)rn.keys().forEach(u=>{u.indexOf(f.toLowerCase())===0&&(rn.removeKey(u),Eh(u))});else{const u=Object.values(i).length>0,h=Object.keys(i).sort().map(w=>w+"="+JSON.stringify(i[w])).join("&"),g=f+"."+o+(u?`.${h}`:"");rn.removeKey(g),Eh(g,i)}},oD=()=>{RC||(mn.addEventEmitter(jT),I6(VT),RC=!0)},ws={listen:VT,once:nD,clear:iD,broadcast(f,o){jT(Object.entries(Qh).find(([i,u])=>u==="app."+f)[0],o)}};function rD(f,o,i,u=void 0,h,g,w){const s=Object.values(i).length,m=PT(i,u,w);if(m==="getter")return mn.send(f,o,i);if(m==="subscriber"){if(h)throw new Error("Cannot subscribe to an immutable property");return ws.listen(f,o+"Changed",...Object.values(i),u)}else if(m==="setter"){if(h)throw new Error("Cannot set a value to an immutable property");if(g)throw new Error("Cannot set a value to a readonly property");return mn.send(f,"set"+o[0].toUpperCase()+o.substring(1),Object.assign({value:u},i))}else throw s<w?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}const $n={prop:rD};$r("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","voiceGuidanceSettingsChanged"]);mn.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead.");mn.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");function sD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Account","id",o,f,!0,!0,0)}function aD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Account","uid",o,f,!0,!0,0)}const uD={id:sD,uid:aD};$r("Advertising",["policyChanged"]);mn.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead.");$r("Capabilities",["available","granted","revoked","unavailable"]);nd("Capabilities","available",["capability"]);nd("Capabilities","granted",["role","capability"]);nd("Capabilities","revoked",["role","capability"]);nd("Capabilities","unavailable",["capability"]);$r("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]);mn.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead.");mn.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead.");mn.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");function lD(){return new Promise((f,o)=>{mn.send("device","version").then(i=>{i=i||{},i.sdk=i.sdk||{},i.sdk.major=parseInt("1"),i.sdk.minor=parseInt("4"),i.sdk.patch=parseInt("1"),i.sdk.readable="Firebolt Core SDK 1.4.1",f(i)}).catch(i=>{o(i)})})}function fD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","audio",o,f,!1,!0,0)}function cD(...f){return ws.clear("Device",...f)}function hD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","distributor",o,f,!0,!0,0)}function dD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","hdcp",o,f,!1,!0,0)}function pD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","hdr",o,f,!1,!0,0)}function mD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","id",o,f,!0,!0,0)}function gD(...f){return ws.listen("Device",...f)}function yD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","make",o,f,!0,!0,0)}function vD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","model",o,f,!0,!0,0)}function xD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","name",o,f,!1,!0,0)}function wD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","network",o,f,!1,!0,0)}function SD(...f){return ws.once("Device",...f)}function CD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","platform",o,f,!0,!0,0)}function TD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","screenResolution",o,f,!1,!0,0)}function bD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","sku",o,f,!0,!0,0)}function ED(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","type",o,f,!0,!0,0)}function kD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","uid",o,f,!0,!0,0)}function AD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Device","videoResolution",o,f,!1,!0,0)}const Na={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:lD,audio:fD,clear:cD,distributor:hD,hdcp:dD,hdr:pD,id:mD,listen:gD,make:yD,model:vD,name:xD,network:wD,once:SD,platform:CD,screenResolution:TD,sku:bD,type:ED,uid:kD,videoResolution:AD},DC={},ID=(f,o,i)=>{if(DC[f])throw`Capability ${f} has multiple provider interfaces registered.`;i.forEach(u=>u.name=`${o}.${u.name}`),DC[f]=i.concat()};$r("Discovery",["navigateTo","policyChanged"]);ID("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]);mn.registerDeprecatedMethod("Discovery","entityInfo","Use null instead.");mn.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead.");mn.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead.");mn.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead.");mn.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead.");$r("Lifecycle",["background","foreground","inactive","suspended","unloading"]);$r("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]);mn.registerDeprecatedMethod("Localization","language","Use Localization.locale instead.");mn.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");function MD(){return mn.send("Localization","additionalInfo",{},null)}function _D(...f){return ws.clear("Localization",...f)}function RD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Localization","countryCode",o,f,!1,!0,0)}function LD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Localization","language",o,f,!1,!0,0)}function DD(){return mn.send("Localization","latlon",{},null)}function PD(...f){return ws.listen("Localization",...f)}function OD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Localization","locale",o,f,!1,!0,0)}function ND(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Localization","locality",o,f,!1,!0,0)}function UD(...f){return ws.once("Localization",...f)}function BD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Localization","postalCode",o,f,!1,!0,0)}function jD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),$n.prop("Localization","preferredAudioLanguages",o,f,!1,!0,0)}const xl={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:MD,clear:_D,countryCode:RD,language:LD,latlon:DD,listen:PD,locale:OD,locality:ND,once:UD,postalCode:BD,preferredAudioLanguages:jD};$r("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]);L6({Accessibility:OT,Account:P6,Advertising:O6,Authentication:N6,Capabilities:U6,Device:NT,Discovery:B6,Keyboard:j6,Lifecycle:F6,Localization:UT,Metrics:$6,Parameters:z6,Profile:V6,SecondScreen:H6,SecureStorage:G6,Platform:W6});const id={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},FD=Je.Component("Module",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),m.w=i.w,m.h=i.h,m.color=i.bColor,m.effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),o=s[0];const S={};return s[1]=this.element({parent:o||"root"},i),S.x=i.w/2,S.y=i.h/2,S.mount="{x:0.5, y:0.5}",S.content=i.name,S.color=i.fColor,S.font="raleway",S.__textnode=!0,s[1].populate(S),s},effects:[function(o,i,u,h,g,w){i[0].set("color",o.bColor)},function(o,i,u,h,g,w){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,w){i[1].set("content",o.name)}],context:{}},state(){return{w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}},props:["name"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$router.to(`/examples/firebolt/${this.name}`)}}}),$D=Je.Component("Methods",{code:{render:function(o,i,u,h,g,w){const s=[],m={};s[0]=this.element({parent:o||"root"},i),s[0].populate(m),o=s[0];const S={};s[1]=this.element({parent:o||"root"},i),S.w=i.w,S.h=i.h,S.color=i.nameBgColor,S.effects=[{type:"radius",props:{radius:[8,8,0,0]}}],s[1].populate(S),o=s[1];const v={};s[2]=this.element({parent:o||"root"},i),v.content=i.name,v.x=i.w/2,v.y=i.h/2,v.mount=.5,v.color="0xffffffff",v.font="lato",v.size=50,v.__textnode=!0,s[2].populate(v),o=s[0];const y={};s[3]=this.element({parent:o||"root"},i),y.w=i.w,y.h=50,y.color="0x4b5563ff",y.y=75,y.effects=[{type:"radius",props:{radius:[0,0,8,8]}}],s[3].populate(y),o=s[3];const I={};return s[4]=this.element({parent:o||"root"},i),I.content=i.about,I.wordwrap=i.w,I.align="center",I.font="lato",I.maxlines=1,I.size=28,I.y=6,I.__textnode=!0,s[4].populate(I),s},effects:[function(o,i,u,h,g,w){i[1].set("color",o.nameBgColor)},function(o,i,u,h,g,w){i[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(o,i,u,h,g,w){i[2].set("content",o.name)},function(o,i,u,h,g,w){i[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(o,i,u,h,g,w){i[4].set("content",o.about)}],context:{}},state(){return{w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["name","about"],hooks:{focus(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$emit("execute",this.name)}}}),od=Je.Component("List",{components:{Method:$D,Module:FD},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1;const I={};s[0]=this.element({parent:o||"root"},y===!0?v:i),s[0].populate(I),o=s[0];const D={};s[1]=this.element({parent:o||"root"},y===!0?v:i),D.y={transition:i.y},s[1].populate(D),o=s[1];const T=[],L=(X=[],$,oe)=>{const fe=w(X),le=new Set;let A=fe.length;for(;A--;){const q=fe[A];le.add(""+q.name)}let Y=oe.length;for(;Y--;)if(le.has(oe[Y])===!1){const q=oe[Y];$[2][q]&&$[2][q].destroy(),delete $[2][q],$[3][q]&&$[3][q].destroy(),delete $[3][q]}oe.length=0;const Q=fe.length,ee=[];for(let q=0;q<Q;q++){const W=Object.create(i);o=$[1],W.item=fe[q],W.index=q,W.key=""+W.item.name,oe.push(W.key);const ie=u.components&&u.components.Method||h.Method;$[2]===void 0&&($[2]={});const ue={};$[2][W.key]===void 0&&($[2][W.key]=this.element({parent:o||"root"},y===!0?v:i)),ue.name=W.item.name,ue.about=W.item.about,ue.y=W.index*160,ue.ref=W.type+W.index;const ve=[];if(typeof ie<"u")for(let ke in ie.config.props)delete ue[ie.config.props[ke]],ve.push(ie.config.props[ke]);$[2][W.key].nodeId===void 0&&$[2][W.key].populate(ue),$[3]===void 0&&($[3]={}),o=$[2][W.key];const Te={};if($[3][W.key]===void 0){Te.name=W.item.name,Te.about=W.item.about,S=W.index*160,Array.isArray(S)===!0&&(S=w(S).slice(0)),Te.y=S,S=W.type+W.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),Te.ref=S,m=Te.is||"Method";let ke;if(typeof m=="string"){if(ke=u.components&&u.components[m]||h[m],!ke)throw new Error('Component "Method" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ke=m);$[3][W.key]=ke.call(null,{props:Te},$[2][W.key],i),$[3][W.key][Symbol.for("slots")][0]?(o=$[3][W.key][Symbol.for("slots")][0],v=$[3][W.key],y=!0):o=$[3][W.key][Symbol.for("children")][0]}let xe=()=>{(typeof ve>"u"||ve.indexOf("y")===-1)&&$[2][W.key].set("y",W.index*160)};g(xe,null),ee.push(xe),$[3][W.key][Symbol.for("props")].y=W.index*160}return ee};let B;g(()=>{i[Symbol.for("removeGlobalEffects")](B),B=null,B=L(i.methods,s,T)},"methods"),g(()=>{i.type;for(let X=0;X<i.methods.length;X++){const $={};$.index=X,$.item=i.methods[X],$.key=$.item.name,(typeof skip2>"u"||skip2.indexOf("ref")===-1)&&s[2][$.key].set("ref",i.type+$.index)}}),g(()=>{i.type;for(let X=0;X<i.methods.length;X++){const $={};$.index=X,$.item=i.methods[X],$.key=$.item.name,s[3][$.key][Symbol.for("props")].ref=i.type+$.index}}),o=s[0];const N={};s[4]=this.element({parent:o||"root"},y===!0?v:i),N.x={transition:i.x},N.y=325,s[4].populate(N),o=s[4];const z=[],F=(X=[],$,oe)=>{const fe=w(X),le=new Set;let A=fe.length;for(;A--;){const q=fe[A];le.add(""+q.id)}let Y=oe.length;for(;Y--;)if(le.has(oe[Y])===!1){const q=oe[Y];$[5][q]&&$[5][q].destroy(),delete $[5][q],$[6][q]&&$[6][q].destroy(),delete $[6][q]}oe.length=0;const Q=fe.length,ee=[];for(let q=0;q<Q;q++){const W=Object.create(i);o=$[4],W.item=fe[q],W.index=q,W.key=""+W.item.id,oe.push(W.key);const ie=u.components&&u.components.Module||h.Module;$[5]===void 0&&($[5]={});const ue={};$[5][W.key]===void 0&&($[5][W.key]=this.element({parent:o||"root"},y===!0?v:i)),ue.name=W.item.name,ue.ref=W.type+W.index,ue.x=W.index*400;const ve=[];if(typeof ie<"u")for(let xe in ie.config.props)delete ue[ie.config.props[xe]],ve.push(ie.config.props[xe]);$[5][W.key].nodeId===void 0&&$[5][W.key].populate(ue),$[6]===void 0&&($[6]={}),o=$[5][W.key];const Te={};if($[6][W.key]===void 0){Te.name=W.item.name,S=W.type+W.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),Te.ref=S,Te.x=W.index*400,m=Te.is||"Module";let xe;if(typeof m=="string"){if(xe=u.components&&u.components[m]||h[m],!xe)throw new Error('Component "Module" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xe=m);$[6][W.key]=xe.call(null,{props:Te},$[5][W.key],i),$[6][W.key][Symbol.for("slots")][0]?(o=$[6][W.key][Symbol.for("slots")][0],v=$[6][W.key],y=!0):o=$[6][W.key][Symbol.for("children")][0]}}return ee};let H;return g(()=>{i[Symbol.for("removeGlobalEffects")](H),H=null,H=F(i.modules,s,z)},"modules"),g(()=>{i.type;for(let X=0;X<i.modules.length;X++){const $={};$.index=X,$.item=i.modules[X],$.key=$.item.id,(typeof skip5>"u"||skip5.indexOf("ref")===-1)&&s[5][$.key].set("ref",i.type+$.index)}}),g(()=>{i.type;for(let X=0;X<i.modules.length;X++){const $={};$.index=X,$.item=i.modules[X],$.key=$.item.id,s[6][$.key][Symbol.for("props")].ref=i.type+$.index}}),s},effects:[function(o,i,u,h,g,w){i[1].set("y",{transition:o.y})},function(o,i,u,h,g,w){i[4].set("x",{transition:o.x})}],context:{}},state(){return{x:400,y:100,activeIndex:0}},props:["data","type"],computed:{methods(){return this.isModule?[]:this.data},modules(){return this.isModule?this.data:[]},isModule(){return this.type==="module"}},watch:{activeIndex(f){const o=this.$select(`${this.type}${f}`);o&&o.$focus&&o.$focus()}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left(){this.isModule&&this.activeIndex>0&&this.move(-1)},down(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move(f){const o=this.activeIndex+f;this.type=="method"?this.y=o>5?-(o-5)*160-100:100:this.type=="module"&&(this.x=o>3?-(o-3)*400-400:400),this.activeIndex=o}}}),zD=Je.Component("FireBolt",{components:{List:od},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(I),v===!0&&(y-=1),o=s[0];const D={};s[1]=this.element({parent:o||"root"},v===!0?S:i),D.content="FireBolt Modules",D.x=960,D.y=80,D.mount="{x:0.5}",D.size=80,D.font="raleway",D.__textnode=!0,s[1].populate(D),v===!0&&(y-=1);const T=u.components&&u.components.List||h.List;o=s[0];const L={};s[2]=this.element({parent:o||"root"},v===!0?S:i),L.data=i.moduleNames,L.type="module",L.ref="modules";const B=[];if(typeof T<"u")for(let F in T.config.props)delete L[T.config.props[F]],B.push(T.config.props[F]);s[2].populate(L),v===!0&&(y-=1),o=s[2];const N={};N.data=i.moduleNames,N.type="module",N.ref="modules",m=N.is||"List";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);return s[3]=z.call(null,{props:N},s[2],i),s[3][Symbol.for("slots")][0]?(o=s[3][Symbol.for("slots")][0],S=s[3],v=!0):o=s[3][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),s},effects:[],context:{}},computed:{moduleNames(){return Object.keys(id).map(f=>({id:f,name:f.charAt(0).toUpperCase()+f.slice(1)}))}},hooks:{focus(){const f=this.$select("modules");f&&f.$focus&&f.$focus()}}}),VD=Je.Component("DeviceModule",{components:{List:od},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(I),v===!0&&(y-=1),o=s[0];const D={};s[1]=this.element({parent:o||"root"},v===!0?S:i),D.content="Device",D.x=960,D.mount="{x:0.5}",D.y=50,D.font="raleway",D.size=40,D.__textnode=!0,s[1].populate(D),v===!0&&(y-=1),o=s[0];const T={};s[2]=this.element({parent:o||"root"},v===!0?S:i),T.content=i.device.about,T.x=960,T.mount="{x:0.5}",T.y=110,T.font="lato",T.__textnode=!0,s[2].populate(T),v===!0&&(y-=1);const L=u.components&&u.components.List||h.List;o=s[0];const B={};s[3]=this.element({parent:o||"root"},v===!0?S:i),B.data=i.device.methods,B.x=300,B.ref="methods",B.type="method",B.y=100;const N=[];if(typeof L<"u")for(let fe in L.config.props)delete B[L.config.props[fe]],N.push(L.config.props[fe]);s[3].populate(B),v===!0&&(y-=1),o=s[3];const z={};z.data=i.device.methods,z.x=300,z.ref="methods",z.type="method",z.y=100,m=z.is||"List";let F;if(typeof m=="string"){if(F=u.components&&u.components[m]||h[m],!F)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(F=m);s[4]=F.call(null,{props:z},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],S=s[4],v=!0):o=s[4][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[0];const H={};s[5]=this.element({parent:o||"root"},v===!0?S:i),H.x=1400,H.y=540,H.content=i.response,H.size=100,H.mount=.5,H.font="lato",H.show=!i.isNetworkRes,H.__textnode=!0,s[5].populate(H),v===!0&&(y-=1),o=s[0];const X={};s[6]=this.element({parent:o||"root"},v===!0?S:i),X.show=i.isNetworkRes,s[6].populate(X),v===!0&&(y-=1),o=s[6];const $={};s[7]=this.element({parent:o||"root"},v===!0?S:i),$.content="State: "+i.networkRes.state,$.size=70,$.font="lato",$.x=1400,$.y=500,$.mount=.5,$.__textnode=!0,s[7].populate($),v===!0&&(y-=1),o=s[6];const oe={};return s[8]=this.element({parent:o||"root"},v===!0?S:i),oe.content="Type: "+i.networkRes.type,oe.size=70,oe.font="lato",oe.y=580,oe.x=1400,oe.mount=.5,oe.__textnode=!0,s[8].populate(oe),v===!0&&(y-=1),s},effects:[function(o,i,u,h,g,w){i[5].set("content",o.response)},function(o,i,u,h,g,w){i[5].set("show",!o.isNetworkRes)},function(o,i,u,h,g,w){i[6].set("show",o.isNetworkRes)},function(o,i,u,h,g,w){i[7].set("content","State: "+o.networkRes.state)},function(o,i,u,h,g,w){i[8].set("content","Type: "+o.networkRes.type)}],context:{}},state(){return{device:id.device,response:"",networkRes:{},isNetworkRes:!1}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Device ${f} API`),this.isNetworkRes=!1,f){case"make":this.response=await Na.make();break;case"model":this.response=await Na.model();break;case"name":this.response=await Na.name();break;case"network":Object.assign(this.networkRes,await Na.network()),this.isNetworkRes=!0;break;case"platform":this.response=await Na.platform();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),HD=Je.Component("AccountModule",{components:{List:od},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(I),v===!0&&(y-=1),o=s[0];const D={};s[1]=this.element({parent:o||"root"},v===!0?S:i),D.content="Account",D.x=960,D.mount="{x:0.5}",D.y=50,D.font="raleway",D.size=40,D.__textnode=!0,s[1].populate(D),v===!0&&(y-=1),o=s[0];const T={};s[2]=this.element({parent:o||"root"},v===!0?S:i),T.content=i.account.about,T.x=960,T.mount="{x:0.5}",T.y=110,T.font="lato",T.__textnode=!0,s[2].populate(T),v===!0&&(y-=1);const L=u.components&&u.components.List||h.List;o=s[0];const B={};s[3]=this.element({parent:o||"root"},v===!0?S:i),B.data=i.account.methods,B.x=300,B.ref="methods",B.y=300,B.type="method";const N=[];if(typeof L<"u")for(let X in L.config.props)delete B[L.config.props[X]],N.push(L.config.props[X]);s[3].populate(B),v===!0&&(y-=1),o=s[3];const z={};z.data=i.account.methods,z.x=300,z.ref="methods",z.y=300,z.type="method",m=z.is||"List";let F;if(typeof m=="string"){if(F=u.components&&u.components[m]||h[m],!F)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(F=m);s[4]=F.call(null,{props:z},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],S=s[4],v=!0):o=s[4][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[0];const H={};return s[5]=this.element({parent:o||"root"},v===!0?S:i),H.x=1400,H.y=540,H.content=i.response,H.size=i.size,H.mount=.5,H.font="lato",H.__textnode=!0,s[5].populate(H),v===!0&&(y-=1),s},effects:[function(o,i,u,h,g,w){i[5].set("content",o.response)},function(o,i,u,h,g,w){i[5].set("size",o.size)}],context:{}},state(){return{account:id.account,response:"",size:100}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Account ${f} API`),f){case"id":this.size=100,this.response=await uD.id();break;case"uid":this.size=40,this.response=await Na.uid();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),GD=Je.Component("LocalizationModule",{components:{List:od},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v=!1,y=0;const I={};s[0]=this.element({parent:o||"root"},v===!0?S:i),s[0].populate(I),v===!0&&(y-=1),o=s[0];const D={};s[1]=this.element({parent:o||"root"},v===!0?S:i),D.content="Localization",D.x=960,D.mount="{x:0.5}",D.y=50,D.font="raleway",D.size=40,D.__textnode=!0,s[1].populate(D),v===!0&&(y-=1),o=s[0];const T={};s[2]=this.element({parent:o||"root"},v===!0?S:i),T.content=i.localization.about,T.x=960,T.mount="{x:0.5}",T.y=110,T.font="lato",T.__textnode=!0,s[2].populate(T),v===!0&&(y-=1);const L=u.components&&u.components.List||h.List;o=s[0];const B={};s[3]=this.element({parent:o||"root"},v===!0?S:i),B.data=i.localization.methods,B.x=300,B.ref="methods",B.y=100,B.type="method";const N=[];if(typeof L<"u")for(let X in L.config.props)delete B[L.config.props[X]],N.push(L.config.props[X]);s[3].populate(B),v===!0&&(y-=1),o=s[3];const z={};z.data=i.localization.methods,z.x=300,z.ref="methods",z.y=100,z.type="method",m=z.is||"List";let F;if(typeof m=="string"){if(F=u.components&&u.components[m]||h[m],!F)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(F=m);s[4]=F.call(null,{props:z},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],S=s[4],v=!0):o=s[4][Symbol.for("children")][0],v===!0&&y===0&&(v=!1),o=s[0];const H={};return s[5]=this.element({parent:o||"root"},v===!0?S:i),H.x=1400,H.y=540,H.content=i.response,H.size=i.size,H.mount=.5,H.font="lato",H.__textnode=!0,s[5].populate(H),v===!0&&(y-=1),s},effects:[function(o,i,u,h,g,w){i[5].set("content",o.response)},function(o,i,u,h,g,w){i[5].set("size",o.size)}],context:{}},state(){return{localization:id.localization,response:"",size:100}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Keyboard ${f} API`),this.response="null",f){case"countryCode":this.response=await xl.countryCode();break;case"language":this.response=await xl.language();break;case"latlon":this.response=(await xl.latlon()).toString();break;case"locality":this.response=await xl.locality();break;case"postalCode":this.response=await xl.postalCode();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),WD=[{path:"/examples/firebolt",component:zD},{path:"/examples/firebolt/device",component:VD},{path:"/examples/firebolt/account",component:HD},{path:"/examples/firebolt/localization",component:GD}],HT=new URLSearchParams(window.location.search),XD=!!HT.get("source"),qD=!!HT.get("fps"),KD=Je.Application({components:{SourceInfo:ST},code:{render:function(o,i,u,h,g,w){const s=[];let m,S,v,y=!1,I=0;const D={};s[0]=this.element({parent:o||"root"},y===!0?v:i),D.w=1920,D.h=1080,D.color=i.backgroundColor,s[0].populate(D),y===!0&&(I-=1);const T=u.components&&u.components.RouterView||h.RouterView;o=s[0];const L={};s[1]=this.element({parent:o||"root"},y===!0?v:i),L.w=o.node.width*(100/100),L.h=o.node.height*(100/100);const B=[];if(typeof T<"u")for(let ee in T.config.props)delete L[T.config.props[ee]],B.push(T.config.props[ee]);s[1].populate(L),y===!0&&(I-=1),o=s[1];const N={};N.w=o.node.width*(100/100),N.h=o.node.height*(100/100),m=N.is||"RouterView";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "RouterView" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:N},s[1],i),s[2][Symbol.for("slots")][0]?(o=s[2][Symbol.for("slots")][0],v=s[2],y=!0):o=s[2][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const F=u.components&&u.components.FPScounter||h.FPScounter;o=s[0];const H={};s[3]=this.element({parent:o||"root"},y===!0?v:i),H.x=1610,H.show=i.showFPS;const X=[];if(typeof F<"u")for(let ee in F.config.props)delete H[F.config.props[ee]],X.push(F.config.props[ee]);s[3].populate(H),y===!0&&(I-=1),o=s[3];const $={};$.x=1610,S=i.showFPS,Array.isArray(S)===!0&&(S=w(S).slice(0)),$.show=S,m=$.is||"FPScounter";let oe;if(typeof m=="string"){if(oe=u.components&&u.components[m]||h[m],!oe)throw new Error('Component "FPScounter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(oe=m);s[4]=oe.call(null,{props:$},s[3],i),s[4][Symbol.for("slots")][0]?(o=s[4][Symbol.for("slots")][0],v=s[4],y=!0):o=s[4][Symbol.for("children")][0],y===!0&&I===0&&(y=!1);const fe=u.components&&u.components.SourceInfo||h.SourceInfo;o=s[0];const le={};s[5]=this.element({parent:o||"root"},y===!0?v:i),le.ref="info",le.show=i.showInfo;const A=[];if(typeof fe<"u")for(let ee in fe.config.props)delete le[fe.config.props[ee]],A.push(fe.config.props[ee]);s[5].populate(le),y===!0&&(I-=1),o=s[5];const Y={};Y.ref="info",S=i.showInfo,Array.isArray(S)===!0&&(S=w(S).slice(0)),Y.show=S,m=Y.is||"SourceInfo";let Q;if(typeof m=="string"){if(Q=u.components&&u.components[m]||h[m],!Q)throw new Error('Component "SourceInfo" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Q=m);return s[6]=Q.call(null,{props:Y},s[5],i),s[6][Symbol.for("slots")][0]?(o=s[6][Symbol.for("slots")][0],v=s[6],y=!0):o=s[6][Symbol.for("children")][0],y===!0&&I===0&&(y=!1),s},effects:[function(o,i,u,h,g,w){i[0].set("color",o.backgroundColor)},function(o,i,u,h,g,w){(typeof skip3>"u"||skip3.indexOf("show")===-1)&&i[3].set("show",o.showFPS)},function(o,i,u,h,g,w){i[4][Symbol.for("props")].show=o.showFPS},function(o,i,u,h,g,w){(typeof skip5>"u"||skip5.indexOf("show")===-1)&&i[5].set("show",o.showInfo)},function(o,i,u,h,g,w){i[6][Symbol.for("props")].show=o.showInfo}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:qD,showInfo:!1}},routes:[{path:"/",component:aL,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>W5(()=>import("./Loading-cc6b5ee7.js"),[])},{path:"/demos/intro",component:()=>new Promise(f=>{f(lL)})},{path:"/demos/theming",component:hL},{path:"/demos/tmdb",component:bL},{path:"/demos/sprites",component:kL},{path:"/demos/focushandling",component:IL},{path:"/demos/memory-game",component:f6,announce:"Let's play Memory"},{path:"/demos/player",component:FL},{path:"/examples/positioning",component:ML},{path:"/examples/colors",component:$L},{path:"/examples/gradients",component:zL},{path:"/examples/transitions",component:VL},{path:"/examples/alpha",component:HL},{path:"/examples/scaling",component:GL},{path:"/examples/rotation",component:WL},{path:"/examples/keyinput",component:XL},{path:"/examples/texts",component:qL},{path:"/examples/images",component:KL},{path:"/examples/components",component:YL},{path:"/examples/forloop",component:QL},{path:"/examples/forloop-advanced",component:n6},{path:"/examples/effects",component:i6},{path:"/examples/showif",component:o6},{path:"/examples/events",component:r6},{path:"/examples/slots",component:u6},{path:"/examples/viewport",component:d6},...x6,{path:"/examples/resize",component:w6},{path:"/examples/languageplugin",component:AC},{path:"/examples/keycodes",component:T6},{path:"/examples/translations",component:AC},{path:"/examples/special-characters",component:k6},{path:"/examples/layout",component:A6},{path:"/benchmarks/exponential",component:h6},...WD],hooks:{ready(){XD===!0&&(this.showInfo=!0),this.$listen("changeBackground",f=>{this.backgroundColor=f?f+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(f){return f.key==="x"?(this.$log.info(`Intercepting key press (${f.key}) in App Component`),new Promise(o=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),o(f)},2e3)})):f},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const f=YD(this.$router.currentRoute.path);f&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${f}`,"_blank")}}}),YD=f=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"})["/"+f]+".js",PC={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},OC={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};Je.Plugin(wT,"colors",{themes:{light:PC.light,dark:PC.dark},base:"light",current:"dark"});Je.Plugin(wT,"sizes",{themes:{small:OC.small,large:OC.large},base:"small",current:"small"});Je.Plugin($5);Je.Launch(KD,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",keymap:{...V5(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100});export{Je as B,Ka as S};
