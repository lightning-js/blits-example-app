var cs=Object.defineProperty;var ds=(i,o,e)=>o in i?cs(i,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[o]=e;var d=(i,o,e)=>(ds(i,typeof o!="symbol"?o+"":o,e),e);import{s as C,E as Ee,S as us,W as hs,C as ps,a as Ve}from"./settings-f05e2292.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(t){if(t.ep)return;t.ep=!0;const l=e(t);fetch(t.href,l)}})();const ms=(i="",o,e,s=null)=>{let t=0,l=0,r=[],n=null,a=0;const c=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,f=/^\s*(\/?>)\s*/,u=/^([A-Za-z0-9:.\-_@]+)=\s*(["'])/,g=/^<>\s*/,h=/^\s*(<\/>)\s*/,p=()=>{i=y(i);try{return m(v),_(r)}catch(w){throw(w.name=="TemplateParseError"||w.name=="TemplateStructureError")&&(w.message=`${w.message}
${w.context}`),w}},m=w=>{t>=i.length||w()},y=w=>w.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),b=w=>{const T=i.slice(t).match(w);return T&&(l=t,t+=T[0].length),T},v=()=>{b(g)?(r.push({type:null,[C.type]:"opening",[C.level]:a,[C.cursorTagStart]:l}),a++,m(v)):m(S)},S=()=>{b(h)?(a--,r.push({type:null,[C.type]:"closing",[C.level]:a}),m(v)):m(I)},I=()=>{const w=b(c);if(w)n={type:w[1],[C.level]:a,[C.cursorTagStart]:l},w[0].startsWith("</")?(a--,n[C.type]="closing",n[C.level]=a):(n[C.type]="opening",a++),m(k);else throw M("InvalidTag")},k=()=>{const w=b(f);if(w){if(w[1]==="/>"){if(n[C.type]==="closing")throw M("InvalidClosingTag");n[C.type]="self-closing",a--}if(n[C.type]==="opening"){const T=i.slice(t,i.indexOf("<",t));T&&(n.content=T,t+=T.length)}r.push(n),m(v)}else m(E)},E=()=>{const w=b(u);if(w){if(n[C.type]==="closing")throw M("AttributesInClosingTag");const T=w[2],L=new RegExp(`^(.*?)${T}\\s*`),O=b(L);if(O){const N=x(w[1],O[1]);n[N.name]=N.value,m(k)}else throw M("MissingOrInvalidAttributeValue")}else throw M("InvalidAttribute")},x=(w,T)=>{if(w.includes(".")){const[L,O]=w.split(".");return{name:L,value:`{${O}: ${T}}`}}return{name:w,value:T}},_=w=>{let T=[],L=!1,O={children:[]},N=O;for(let $=0;$<w.length;$++){let B=w[$];if(B[C.level]===0&&B[C.type]!=="closing"){if(L)throw z("MultipleTopLevelTags",B);L=!0}if(B[C.type]==="opening")T.push({[C.level]:B[C.level],[C.type]:B[C.type],[C.cursorTagStart]:B[C.cursorTagStart],type:B.type,parent:N});else if(B[C.type]==="closing"){const X=T.length===0;let H=!1,W=!1;if(X||(H=T[T.length-1][C.level]!==B[C.level],W=T[T.length-1].type!==B.type),X||H||W)throw z("MismatchedClosingTag",B);N=T.pop().parent}const U={...B};delete U[C.type],delete U[C.level],delete U[C.cursorTagStart],B[C.type]==="opening"?($+1<w.length&&w[$+1][C.type]!=="closing"&&(U.children=[]),N.children.push(U),N=U):B[C.type]==="self-closing"&&N.children.push(U)}if(T.length>0)throw z("UnclosedTags",T);return O},A=10,R=50,M=(w,T)=>{const L=F();w=`${w} in ${L}`;const O=new Error(w);if(O.name="TemplateParseError",T)O.context=T;else{const N=Math.max(0,l-A),$=Math.min(i.length,t+R),B=i.slice(N,$),U=t-N;O.context=P(U,B)}return O},z=(w,T)=>{const L=F();w=`${w} in ${L}`;const O=new Error(w);O.name="TemplateStructureError",Array.isArray(T)?O.context=T.map($=>N($)).join(`
`):O.context=N(T);function N($){const B=Math.max(0,$[C.cursorTagStart]-A),U=i.slice(B,B+R);return P(A,U)}return O},P=(w,T)=>{const L=" ".repeat(w)+"^";return`
${T}
${L}
`},F=()=>{if(e){let w=o||"",T=e;for(;T;)w=`${T.type}/${w}`,T=T.parent;return w}return s||"Blits.Application"};return p()};let q;function gs(i={children:[]}){const o={renderCode:["const elms = []"],effectsCode:[],context:{props:[],components:this.components}};return q=-1,Lo.call(o,i),o.renderCode.push("return elms"),{render:new Function("parent","component","context",o.renderCode.join(`
`)),effects:o.effectsCode.map(e=>new Function("component","elms","context",e)),context:o.context}}const Ct=function(i,o=!1,e={key:!1,component:"component.",forceEffect:!1}){const s=e.forceEffect?this.effectsCode:this.renderCode;o&&s.push(`parent = ${o}`),"key"in i&&(e.key=Ge(i.key,e.component));const t=e.key?`elms[${q}][${e.key}]`:`elms[${q}]`;e.key&&s.push(`
      elms[${q}] = elms[${q}] || {}
    `),s.push(`
    if(!${t}) {
      ${t} = this.element({parent: parent || 'root'}, component)
    }
    const elementConfig${q} = {}
  `);const l=i.children;delete i.children,Object.keys(i).forEach(r=>{if(r==="type"){i[r]==="Slot"&&s.push(`elementConfig${q}[Symbol.for('isSlot')] = true`);return}r==="slot"&&s.push(`
        elementConfig${q}['parent'] = component[Symbol.for('slots')].filter(slot => slot.ref === '${i.slot}').shift() || component[Symbol.for('slots')][0] || parent
      `),$o(r)?this.effectsCode.push(`${t}.set('${r.substring(1)}', ${Ge(i[r],e.component)})`):s.push(`elementConfig${q}['${r}'] = ${Jt(i[r],r,e.component)}`)}),e.holder===!0&&s.push(`
    if(typeof cmp${q} !== 'undefined') {
      for(let key in cmp${q}.config.props) {
        delete  elementConfig${q}[cmp${q}.config.props[key]]
      }
    }
    `),s.push(`
    if(!${t}.nodeId) {
      ${t}.populate(elementConfig${q})
    }
  `),l&&Lo.call(this,{children:l},`${t}`,e)},Mo=function(i,o=!1,e={key:!1,component:"component.",forceEffect:!1,holder:!1}){const s=e.forceEffect?this.effectsCode:this.renderCode;s.push(`
    const cmp${q} =
      (context.components && context.components['${i.type}']) ||
      component[Symbol.for('components')]['${i.type}']
  `),"key"in i&&(e.key=Ge(i.key,e.component));const t=i.children;delete i.children,Ct.call(this,i,o,{...e,holder:!0}),o=e.key?`elms[${q}][${e.key}]`:`elms[${q}]`,q++;const l=e.key?`elms[${q}][${e.key}]`:`elms[${q}]`;e.key&&s.push(`
      elms[${q}] = elms[${q}] || {}
    `),o&&s.push(`parent = ${o}`),s.push(`const props${q} = {}`),Object.keys(i).forEach(r=>{r!=="type"&&($o(r)?(this.effectsCode.push(`
        ${l}[Symbol.for('props')]['${r.substring(1)}'] = ${Ge(i[r],e.component)}`),s.push(`props${q}['${r.substring(1)}'] = ${Ge(i[r],e.component)}`)):s.push(`props${q}['${r}'] = ${Jt(i[r],r,e.component)}`))}),s.push(`
    if(!${l}) {
      ${l} = (context.components && context.components['${i.type}'] || component[Symbol.for('components')]['${i.type}'] || (() => { console.error('component ${i.type} not found')})).call(null, {props: props${q}}, ${o}, component)
      if (${l}[Symbol.for('slots')][0]) {
        parent = ${l}[Symbol.for('slots')][0]
        component = ${l}
      } else {
        parent = ${l}[Symbol.for('children')][0]
      }
    }
  `),t&&(q++,Ct.call(this,{children:t},!1,{...e}))},ys=function(i,o){const e=i[":for"];delete i[":for"];const t=/(.+)\s+in\s+(.+)/gi.exec(e),[l,r="index"]=t[1].replace("(","").replace(")","").split(/\s*,\s*/),n={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};o&&n.renderCode.push(`parent = ${o}`),n.renderCode.push(`
    const collection = ${Jt(t[2],":for")}
    const keys = []
    for(let __index = 0; __index < collection.length; __index++) {
      parent = ${o}
      if(!component.key) keys.length = 0
      const scope = Object.assign(component, {
        key: Math.random(),
        ${r}: __index,
        ${l}: collection[__index],
    `),"ref"in i&&i.ref.indexOf("$")===-1&&(n.renderCode.push(`
      __ref: '${i.ref}' + __index
    `),i.ref="$__ref"),n.renderCode.push(`
      })
  `),"key"in i?n.renderCode.push(`
      keys.push(${Ge(i.key,"scope.")})
    `):n.renderCode.push(`
      keys.push(scope.key.toString())
    `),i.type==="Element"||i.type==="Slot"?Ct.call(n,i,o,{key:"scope.key",component:"scope.",forceEffect:!1}):Mo.call(n,i,!1,{key:"scope.key",component:"scope.",forceEffect:!1}),n.renderCode=n.renderCode.concat(n.effectsCode),n.renderCode.push("}"),n.renderCode.push(`
    if(elms[${q}]) {
      Object.keys(elms[${q}]).forEach(key => {
        if(keys.indexOf(key) === -1) {
          elms[${q}][key].delete && elms[${q}][key].delete()
          elms[${q}][key].destroy && elms[${q}][key].destroy()
          delete elms[${q}][key]
        }
      })
    }
  `),this.effectsCode.push(n.renderCode.join(`
`))},Lo=function(i,o=!1,e={}){i.children&&i.children.forEach(s=>{q++,Object.keys(s).indexOf(":for")>-1?ys.call(this,s,o):s.type==="Element"||s.type==="Slot"?Ct.call(this,s,o,e):Mo.call(this,s,o,e)})},Ge=(i,o="component.")=>{const e=/('.*?')+/gi,s=/\$/gi,t=i.matchAll(e),l=[];let r=0;for(const n of t)l.push(n[0]),i=i.replace(n[0],`[@@REPLACEMENT${r}@@]`),r++;return i=i.replace(s,o),l.forEach((n,a)=>{i=i.replace(`[@@REPLACEMENT${a}@@]`,n)}),i},Jt=(i="",o=!1,e="component.")=>{let s;if(o==="content")if(i.startsWith("$"))s=`${e}${i.replace("$","")}`;else{const t=i.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");s=`'${xs(t,e)}'`}else if(o!=="color"&&!isNaN(parseFloat(i))){if(s=parseFloat(i),i.endsWith("%")){const l={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[o];l&&(s=`parent.node.${l} * (${s} / 100)`)}}else if(i.toLowerCase()==="true")s=!0;else if(i.toLowerCase()==="false")s=!1;else if(o.startsWith("@")&&i){const t=e.slice(0,-1);s=`${t}['${i.replace("$","")}'] && ${t}['${i.replace("$","")}'].bind(${t})`}else i.startsWith("$")?s=`${e}${i.replace("$","")}`:s=`"${i}"`;return s},$o=i=>i.startsWith(":"),xs=(i,o)=>{const e=/\{\{\s*(\$\S+)\s*\}\}/g,s=[...i.matchAll(e)];if(s.length)for(let[t,l]of s)i=i.replace(t,`${l.replace("$",`'+${o}`)}+'`);return i};function bs(i,o){const e={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},s=i.getContext("webgl",e)||i.getContext("experimental-webgl",e);if(!s)throw new Error("Unable to create WebGL context");return o?new Proxy(s,{get(t,l){const r=t[l];return typeof r=="function"?(o.increment(String(l)),r.bind(t)):r}}):s}function lo(i,o,e){const s=Math.trunc(i>>>24),t=Math.trunc(i>>>16&255),l=Math.trunc(i>>>8&255),r=Math.trunc(i&255),n=Math.trunc(o>>>24),a=Math.trunc(o>>>16&255),c=Math.trunc(o>>>8&255),f=Math.trunc(o&255),u=Math.round(n*e+s*(1-e)),g=Math.round(a*e+t*(1-e)),h=Math.round(c*e+l*(1-e)),p=Math.round(f*e+r*(1-e));return(u<<24|g<<16|h<<8|p)>>>0}function Ss(i,o){const e=i>>>24,s=i>>>16&255,t=i>>>8&255,l=Math.trunc((i&255)*o);return(e<<24|s<<16|t<<8|l)>>>0}function et(i,o,e=!1){const s=(i&255)/255*o,t=Math.trunc((i>>>24)*s),l=Math.trunc((i>>>16&255)*s),r=Math.trunc((i>>>8&255)*s),n=Math.trunc(s*255);return e?(n<<24|r<<16|l<<8|t)>>>0:(t<<24|l<<16|r<<8|n)>>>0}function Dt(i,o){return Object.prototype.hasOwnProperty.call(i,o)}class Bo{constructor(o){d(this,"releaseCallback");this.releaseCallback=o}}class ws extends Bo{constructor(e,s){super(e);d(this,"textureMap",new Map);d(this,"zeroReferenceTextureSet",new Set);d(this,"options");this.options={textureCleanupIntervalMs:s.textureCleanupIntervalMs??1e4,textureCleanupAgeThreadholdMs:s.textureCleanupAgeThreadholdMs??6e4},setInterval(()=>{const t=Date.now(),l=this.options.textureCleanupAgeThreadholdMs;for(const r of this.zeroReferenceTextureSet)t-r.lastUpdate>l&&(this.releaseCallback(r.id),this.textureMap.delete(r.id),this.zeroReferenceTextureSet.delete(r))},this.options.textureCleanupIntervalMs)}registerTexture(e){var t;const s=(t=e.options)==null?void 0:t.id;if(!this.textureMap.has(s)){const l={id:s,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(s,l),this.zeroReferenceTextureSet.add(l)}}incrementTextureRefCount(e){var l;const s=(l=e.options)==null?void 0:l.id;let t=this.textureMap.get(s);t||(this.registerTexture(e),t=this.textureMap.get(s)),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),t.nodeRefCount++,t.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(t)&&this.zeroReferenceTextureSet.delete(t)}decrementTextureRefCount(e){var l;const s=(l=e.options)==null?void 0:l.id,t=this.textureMap.get(s);t.nodeRefCount--,t.lastUpdate=Date.now(),t.nodeRefCount===0&&this.zeroReferenceTextureSet.add(t),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class Cs extends Bo{constructor(e){super(e);d(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var s,t;(s=e.options)==null||s.id,this.registry.register(e,(t=e.options)==null?void 0:t.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class Ts extends Ee{constructor(e,s,t){super();d(this,"root",null);d(this,"driver");d(this,"canvas");d(this,"settings");d(this,"nodes",new Map);d(this,"nextTextureId",1);d(this,"textureTracker");const l={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:e.clearColor??0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:e.experimental_FinalizationRegistryTextureUsageTracker??!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:e.enableContextSpy??!1};this.settings=l;const{appWidth:r,appHeight:n,deviceLogicalPixelRatio:a,devicePhysicalPixelRatio:c}=l,f=y=>{this.driver.releaseTexture(y)},u=l.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=u?new Cs(f):new ws(f,this.settings.textureCleanupOptions);const g=r*a,h=n*a;this.driver=t;const p=document.createElement("canvas");this.canvas=p,p.width=g*c,p.height=h*c,p.style.width=`${g}px`,p.style.height=`${h}px`;let m;if(typeof s=="string"?m=document.getElementById(s):m=s,!m)throw new Error("Could not find target element");t.onCreateNode=y=>{this.nodes.set(y.id,y)},t.onBeforeDestroyNode=y=>{this.nodes.delete(y.id)},t.onFpsUpdate=y=>{this.emit("fpsUpdate",y)},m.appendChild(p)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){const s=e.fontSize??16,t={...this.resolveNodeDefaults(e),text:e.text??"",textRendererOverride:e.textRendererOverride??null,fontSize:s,fontFamily:e.fontFamily??"sans-serif",fontStyle:e.fontStyle??"normal",fontWeight:e.fontWeight??"normal",fontStretch:e.fontStretch??"normal",textAlign:e.textAlign??"left",contain:e.contain??"none",scrollable:e.scrollable??!1,scrollY:e.scrollY??0,offsetY:e.offsetY??0,letterSpacing:e.letterSpacing??0,lineHeight:e.lineHeight??s,maxLines:e.maxLines??0,textBaseline:e.textBaseline??"alphabetic",verticalAlign:e.verticalAlign??"top",overflowSuffix:e.overflowSuffix??"...",debug:e.debug??{}};return this.driver.createTextNode(t)}resolveNodeDefaults(e){const s=e.color??4294967295,t=e.colorTl??e.colorTop??e.colorLeft??s,l=e.colorTr??e.colorTop??e.colorRight??s,r=e.colorBl??e.colorBottom??e.colorLeft??s,n=e.colorBr??e.colorBottom??e.colorRight??s;return{x:e.x??0,y:e.y??0,width:e.width??0,height:e.height??0,alpha:e.alpha??1,clipping:e.clipping??!1,color:s,colorTop:e.colorTop??s,colorBottom:e.colorBottom??s,colorLeft:e.colorLeft??s,colorRight:e.colorRight??s,colorBl:r,colorBr:n,colorTl:t,colorTr:l,zIndex:e.zIndex??0,zIndexLocked:e.zIndexLocked??0,parent:e.parent??null,texture:e.texture??null,shader:e.shader??null,src:e.src??"",scale:e.scale??null,scaleX:e.scaleX??e.scale??1,scaleY:e.scaleY??e.scale??1,mount:e.mount??0,mountX:e.mountX??e.mount??0,mountY:e.mountY??e.mount??0,pivot:e.pivot??.5,pivotX:e.pivotX??e.pivot??.5,pivotY:e.pivotY??e.pivot??.5,rotation:e.rotation??0}}destroyNode(e){return this.driver.destroyNode(e)}createTexture(e,s,t){const l=this.nextTextureId++,r={descType:"texture",txType:e,props:s,options:{...t,id:l}};return this.textureTracker.registerTexture(r),r}createShader(e,s){return{descType:"shader",shType:e,props:s}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}function Po(i,o){var e=0,s,t;o=o||{};function l(){var r=s,n=arguments.length,a,c;e:for(;r;){if(r.args.length!==arguments.length){r=r.next;continue}for(c=0;c<n;c++)if(r.args[c]!==arguments[c]){r=r.next;continue e}return r!==s&&(r===t&&(t=r.prev),r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.next=s,r.prev=null,s.prev=r,s=r),r.val}for(a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return r={args:a,val:i.apply(null,a)},s?(s.prev=r,r.next=s):t=r,e===o.maxSize?(t=t.prev,t.next=null):e++,s=r,r.val}return l.clear=function(){s=null,t=null,e=0},l}const ao=i=>i&&!(i&i-1),le=(i,o,e,s)=>{const t=3*i,l=3*(e-i)-t,r=1-t-l,n=3*o,a=3*(s-o)-n,c=1-n-a;return function(f){if(f>=1)return 1;if(f<=0)return 0;let u=.5,g,h,p;for(let b=0;b<20;b++){if(g=u*(u*(u*r+l)+t),p=f-g,p>-1e-8&&p<1e-8)return u*(u*(u*c+a)+n);if(h=u*(u*(3*r)+2*l)+t,h>1e-10&&h<1e-10)break;u+=p/h}let m=0,y=1;for(let b=0;b<20;b++){if(u=.5*(m+y),g=u*(u*(u*r+l)+t),p=f-g,p>-1e-8&&p<1e-8)return u*(u*(u*c+a)+n);p<0?y=u:m=u}}},vs=Po(i=>{switch(i){case"linear":return function(e){return e};case"ease":return le(.25,.1,.25,1);case"ease-in":return le(.42,0,1,1);case"ease-out":return le(0,0,.58,1);case"ease-in-out":return le(.42,0,.58,1);case"ease-in-sine":return le(.12,0,.39,0);case"ease-out-sine":return le(.12,0,.39,0);case"ease-in-out-sine":return le(.37,0,.63,1);case"ease-in-cubic":return le(.32,0,.67,0);case"ease-out-cubic":return le(.33,1,.68,1);case"ease-in-out-cubic":return le(.65,0,.35,1);case"ease-in-circ":return le(.55,0,1,.45);case"ease-out-circ":return le(0,.55,.45,1);case"ease-in-out-circ":return le(.85,0,.15,1);case"ease-in-back":return le(.36,0,.66,-.56);case"ease-out-back":return le(.34,1.56,.64,1);case"ease-in-out-back":return le(.68,-.6,.32,1.6);case"step-start":return function(){return 1};case"step-end":return function(e){return e===1?1:0};default:const o="cubic-bezier(";if(i&&i.indexOf(o)===0){const e=i.substr(o.length,i.length-o.length-1).split(",");if(e.length!==4)return console.warn("Unknown timing function: "+i),function(n){return n};const s=parseFloat(e[0]||"0.42"),t=parseFloat(e[1]||"0"),l=parseFloat(e[2]||"1"),r=parseFloat(e[3]||"1");return isNaN(s)||isNaN(t)||isNaN(l)||isNaN(r)?(console.warn(" Unknown timing function: "+i),function(n){return n}):le(s,t,l,r)}else return console.warn("Unknown timing function: "+i),function(e){return e}}});Math.hypot||(Math.hypot=(...i)=>{let o=0,e=i.length;for(;e--;)o+=i[e]*i[e];return Math.sqrt(o)});class _s extends Ee{constructor(e,s,t){super();d(this,"node");d(this,"props");d(this,"settings");d(this,"propStartValues",{});d(this,"restoreValues",{});d(this,"progress",0);d(this,"timingFunction");d(this,"propsList");this.node=e,this.props=s,this.settings=t,this.propStartValues={},this.propsList=Object.keys(s),this.propsList.forEach(l=>{this.propStartValues[l]=e[l]}),this.timingFunction=l=>l,t.easing&&typeof t.easing=="string"&&(this.timingFunction=vs(t.easing))}reset(){this.progress=0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const s=this.props[e],t=this.propStartValues[e];this.props[e]=t,this.propStartValues[e]=s}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,s,t){return(this.timingFunction(e)||e)*(t-s)+s}update(e){const{duration:s,loop:t,easing:l,stopMethod:r}=this.settings;if(!s){this.emit("finished",{});return}if(this.progress+=e/s,this.progress>1&&(this.progress=t?0:1,r)){this.emit("finished",{});return}for(let n=0;n<this.propsList.length;n++){const a=this.propsList[n],c=this.props[a],f=this.propStartValues[a],u=c;if(a.indexOf("color")!==-1){if(f===u){this.node[a]=f;continue}if(l){const g=this.timingFunction(this.progress)||this.progress,h=lo(f,u,g);this.node[a]=h;continue}this.node[a]=lo(f,u,this.progress);continue}if(l){this.node[a]=this.applyEasing(this.progress,f,u);continue}this.node[a]=f+(u-f)*this.progress}this.progress===1&&this.emit("finished",{})}}class Is{constructor(o,e){d(this,"manager");d(this,"animation");d(this,"stoppedPromise",null);d(this,"stoppedResolve",null);d(this,"state");this.manager=o,this.animation=e,this.state="stopped"}start(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.makeStoppedPromise(),this.stoppedPromise}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(o=>{this.stoppedResolve=o}))}finished(){this.stoppedResolve;const{loop:o,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!o&&this.manager.unregisterAnimation(this.animation)}}const be=i=>{const o=i>>>24,e=i>>>16&255,s=i>>>8&255,t=i&255;return[o/255,e/255,s/255,t/255]};function ks(i){return(i&255)/255}function At(i){const o=Math.floor(i[0]*255),e=Math.floor(i[1]*255),s=Math.floor(i[2]*255),t=Math.floor(i[3]*255);return`rgba(${o},${e},${s},${t.toFixed(4)})`}function je(i,o,e,s,t){return t?(t.x1=i,t.y1=o,t.x2=e,t.y2=s,t):{x1:i,y1:o,x2:e,y2:s}}function No(i,o,e){const s=je(Math.max(i.x1,o.x1),Math.max(i.y1,o.y1),Math.min(i.x2,o.x2),Math.min(i.y2,o.y2),e);return s.x1<s.x2&&s.y1<s.y2?s:je(0,0,0,0,s)}function eo(i,o){const e=Math.max(i.x,o.x),s=Math.max(i.y,o.y),t=Math.min(i.x+i.width,o.x+o.width)-e,l=Math.min(i.y+i.height,o.y+o.height)-s;return t>0&&l>0?{x:e,y:s,width:t,height:l}:{x:0,y:0,width:0,height:0}}function Es(i,o){return i===o?!0:i===null||o===null?!1:i.x===o.x&&i.y===o.y&&i.width===o.width&&i.height===o.height}function Rs(i){return i.x1<i.x2&&i.y1<i.y2}const se=0,ie=3,fe=6,oe=1,ne=4,ce=7,me=2,ge=5,ye=8;class xe{constructor(o){d(this,"data");o?(this.data=new Float32Array(9),this.data[se]=o[0],this.data[ie]=o[3],this.data[fe]=o[6],this.data[oe]=o[1],this.data[ne]=o[4],this.data[ce]=o[7],this.data[me]=o[2],this.data[ge]=o[5],this.data[ye]=o[8]):this.data=new Float32Array(9)}static get temp(){return As}static multiply(o,e,s){const t=o.data[se]*e.data[se]+o.data[ie]*e.data[oe]+o.data[fe]*e.data[me],l=o.data[se]*e.data[ie]+o.data[ie]*e.data[ne]+o.data[fe]*e.data[ge],r=o.data[se]*e.data[fe]+o.data[ie]*e.data[ce]+o.data[fe]*e.data[ye],n=o.data[oe]*e.data[se]+o.data[ne]*e.data[oe]+o.data[ce]*e.data[me],a=o.data[oe]*e.data[ie]+o.data[ne]*e.data[ne]+o.data[ce]*e.data[ge],c=o.data[oe]*e.data[fe]+o.data[ne]*e.data[ce]+o.data[ce]*e.data[ye],f=o.data[me]*e.data[se]+o.data[ge]*e.data[oe]+o.data[ye]*e.data[me],u=o.data[me]*e.data[ie]+o.data[ge]*e.data[ne]+o.data[ye]*e.data[ge],g=o.data[me]*e.data[fe]+o.data[ge]*e.data[ce]+o.data[ye]*e.data[ye];return s||(s=new xe),s.data[se]=t,s.data[ie]=l,s.data[fe]=r,s.data[oe]=n,s.data[ne]=a,s.data[ce]=c,s.data[me]=f,s.data[ge]=u,s.data[ye]=g,s}static identity(o){return o||(o=new xe),o.data[se]=1,o.data[ie]=0,o.data[fe]=0,o.data[oe]=0,o.data[ne]=1,o.data[ce]=0,o.data[me]=0,o.data[ge]=0,o.data[ye]=1,o}static translate(o,e,s){return s||(s=new xe),s.data[se]=1,s.data[ie]=0,s.data[fe]=o,s.data[oe]=0,s.data[ne]=1,s.data[ce]=e,s.data[me]=0,s.data[ge]=0,s.data[ye]=1,s}static scale(o,e,s){return s||(s=new xe),s.data[se]=o,s.data[ie]=0,s.data[fe]=0,s.data[oe]=0,s.data[ne]=e,s.data[ce]=0,s.data[me]=0,s.data[ge]=0,s.data[ye]=1,s}static rotate(o,e){const s=Math.cos(o),t=Math.sin(o);return e||(e=new xe),e.data[se]=s,e.data[ie]=-t,e.data[fe]=0,e.data[oe]=t,e.data[ne]=s,e.data[ce]=0,e.data[me]=0,e.data[ge]=0,e.data[ye]=1,e}static copy(o,e,s){return e||(e=new xe),e.data[0]=o.data[0],e.data[1]=o.data[1],e.data[2]=o.data[2],e.data[3]=o.data[3],e.data[4]=o.data[4],e.data[5]=o.data[5],e.data[6]=o.data[6],e.data[7]=o.data[7],e.data[8]=o.data[8],e}translate(o,e){return this.data[fe]=this.data[se]*o+this.data[ie]*e+this.data[fe],this.data[ce]=this.data[oe]*o+this.data[ne]*e+this.data[ce],this}scale(o,e){return this.data[se]=this.data[se]*o,this.data[ie]=this.data[ie]*e,this.data[oe]=this.data[oe]*o,this.data[ne]=this.data[ne]*e,this}rotate(o){if(o===0||!(o%Math.PI*2))return this;const e=Math.cos(o),s=Math.sin(o),t=this.data[se]*e+this.data[ie]*s,l=this.data[ie]*e-this.data[se]*s,r=this.data[oe]*e+this.data[ne]*s,n=this.data[ne]*e-this.data[oe]*s;return this.data[se]=t,this.data[ie]=l,this.data[oe]=r,this.data[ne]=n,this}multiply(o){return xe.multiply(this,o,this)}get tx(){return this.data[fe]}get ty(){return this.data[ce]}get ta(){return this.data[se]}get tb(){return this.data[ie]}get tc(){return this.data[oe]}get td(){return this.data[ne]}transformPoint(o,e){return[this.data[se]*o+this.data[ie]*e+this.data[fe],this.data[oe]*o+this.data[ne]*e+this.data[oe]]}}const As=new xe;var D;(function(i){i[i.Children=1]="Children",i[i.ScaleRotate=2]="ScaleRotate",i[i.Local=4]="Local",i[i.Global=8]="Global",i[i.Clipping=16]="Clipping",i[i.CalculatedZIndex=32]="CalculatedZIndex",i[i.ZIndexSortedChildren=64]="ZIndexSortedChildren",i[i.PremultipliedColors=128]="PremultipliedColors",i[i.WorldAlpha=256]="WorldAlpha",i[i.None=0]="None",i[i.All=511]="All"})(D||(D={}));class to extends Ee{constructor(e,s){super();d(this,"stage");d(this,"children",[]);d(this,"props");d(this,"updateType",D.All);d(this,"globalTransform");d(this,"scaleRotateTransform");d(this,"localTransform");d(this,"clippingRect",null);d(this,"isRenderable",!1);d(this,"parentClippingRect",null);d(this,"worldAlpha",1);d(this,"premultipliedColorTl",0);d(this,"premultipliedColorTr",0);d(this,"premultipliedColorBl",0);d(this,"premultipliedColorBr",0);d(this,"calcZIndex",0);d(this,"isComplex",!1);d(this,"onTextureLoaded",(e,s)=>{this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:s})});d(this,"onTextureFailed",(e,s)=>{this.emit("failed",{type:"texture",error:s})});this.stage=e,this.props={...s,parent:null},this.parent=s.parent,this.updateScaleRotateTransform()}loadTexture(e,s,t=null){this.props.texture&&this.unloadTexture();const{txManager:l}=this.stage,r=l.loadTexture(e,s,t);this.props.texture=r,this.props.textureOptions=t,this.checkIsRenderable(),queueMicrotask(()=>{r.state==="loaded"?this.onTextureLoaded(r,r.dimensions):r.state==="failed"&&this.onTextureFailed(r,r.error),r.on("loaded",this.onTextureLoaded),r.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.checkIsRenderable()}loadShader(e,s){const t=this.stage.renderer.getShaderManager(),{shader:l,props:r}=t.loadShader(e,s);this.props.shader=l,this.props.shaderProps=r,this.checkIsRenderable()}setUpdateType(e){this.updateType|=e;const s=this.props.parent;s&&!(s.updateType&D.Children)&&s.setUpdateType(D.Children)}sortChildren(){this.children.sort((e,s)=>e.calcZIndex-s.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=xe.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){this.scaleRotateTransform;const e=this.props.pivotX*this.props.width,s=this.props.pivotY*this.props.height,t=this.props.mountX*this.props.width,l=this.props.mountY*this.props.height;this.localTransform=xe.translate(e-t+this.props.x,s-l+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-s),this.setUpdateType(D.Global)}update(e,s=null){this.updateType&D.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(D.Local)),this.updateType&D.Local&&(this.updateLocalTransform(),this.setUpdateType(D.Global));const t=this.props.parent;let l=D.None;this.updateType&D.Global&&(this.localTransform,this.globalTransform=xe.copy((t==null?void 0:t.globalTransform)||this.localTransform,this.globalTransform),t&&this.globalTransform.multiply(this.localTransform),this.setUpdateType(D.Clipping|D.Children),l|=D.Global),this.updateType&D.Clipping&&(this.calculateClippingRect(s),this.checkIsRenderable(),this.setUpdateType(D.Children),l|=D.Clipping),this.updateType&D.WorldAlpha&&(t?this.worldAlpha=t.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(D.Children|D.PremultipliedColors),l|=D.WorldAlpha),this.updateType&D.PremultipliedColors&&(this.premultipliedColorTl=et(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=et(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=et(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=et(this.props.colorBr,this.worldAlpha,!0)),this.checkIsRenderable(),this.setUpdateType(D.Children),l|=D.PremultipliedColors),t&&this.updateType&D.CalculatedZIndex&&(this.calculateZIndex(),t.setUpdateType(D.ZIndexSortedChildren)),this.updateType&D.Children&&this.children.length&&this.children.forEach(r=>{r.setUpdateType(l),r.updateType!==0&&r.update(e,this.clippingRect)}),this.updateType&D.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkIsRenderable(){return this.props.texture?this.isRenderable=!0:!this.props.width||!this.props.height?this.isRenderable=!1:this.props.shader?this.isRenderable=!0:this.props.clipping?this.isRenderable=!0:this.props.color!==0?this.isRenderable=!0:this.props.colorTop!==0?this.isRenderable=!0:this.props.colorBottom!==0?this.isRenderable=!0:this.props.colorLeft!==0?this.isRenderable=!0:this.props.colorRight!==0?this.isRenderable=!0:this.props.colorTl!==0?this.isRenderable=!0:this.props.colorTr!==0?this.isRenderable=!0:this.props.colorBl!==0?this.isRenderable=!0:this.props.colorBr!==0?this.isRenderable=!0:this.isRenderable=!1}calculateClippingRect(e=null){if(this.globalTransform,this.parentClippingRect===e&&this.clippingRect)return;const s=this.globalTransform,t=s.tb!==0||s.tc!==0;let l=this.props.clipping&&!t?{x:s.tx,y:s.ty,width:this.width*s.ta,height:this.height*s.td}:null;e&&l?l=eo(e,l):e&&(l=e),this.parentClippingRect=e,this.clippingRect=l}calculateZIndex(){var r,n;const e=this.props,s=e.zIndex||0,t=((r=e.parent)==null?void 0:r.zIndex)||0;let l=s;(n=e.parent)!=null&&n.zIndexLocked&&(l=s<t?s:t),this.calcZIndex=l}renderQuads(e){const{width:s,height:t,texture:l,textureOptions:r,shader:n,shaderProps:a}=this.props,{premultipliedColorTl:c,premultipliedColorTr:f,premultipliedColorBl:u,premultipliedColorBr:g}=this,{zIndex:h,worldAlpha:p,globalTransform:m,clippingRect:y}=this;e.addQuad({width:s,height:t,colorTl:c,colorTr:f,colorBl:u,colorBr:g,texture:l,textureOptions:r,zIndex:h,shader:n,shaderProps:a,alpha:p,clippingRect:y,tx:m.tx,ty:m.ty,ta:m.ta,tb:m.tb,tc:m.tc,td:m.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(D.Local))}get absX(){var e,s,t;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((t=(s=this.props.parent)==null?void 0:s.globalTransform)==null?void 0:t.tx)||0)}get absY(){var e;return this.props.y+(((e=this.props.parent)==null?void 0:e.absY)??0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(D.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(D.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(D.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(D.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(D.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(D.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(D.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(D.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(D.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(D.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(D.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(D.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(D.PremultipliedColors|D.WorldAlpha)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(D.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(D.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(D.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(D.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(D.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(D.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(D.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(D.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(D.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(D.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(D.CalculatedZIndex|D.Children),this.children.forEach(s=>{s.setUpdateType(D.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(D.CalculatedZIndex|D.Children),this.children.forEach(s=>{s.setUpdateType(D.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const s=this.props.parent;if(s!==e){if(this.props.parent=e,s){const t=s.children.indexOf(this);s.children.splice(t,1)}e&&(e.children.push(this),this.setUpdateType(D.All),e.setUpdateType(D.Children|D.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let Ms=1;function oo(){return Ms++}class Ut extends Ee{constructor(e,s,t,l){super();d(this,"rendererMain");d(this,"stage");d(this,"id");d(this,"coreNode");d(this,"_children",[]);d(this,"_src","");d(this,"_parent",null);d(this,"_texture",null);d(this,"_shader",null);d(this,"onTextureLoaded",(e,s)=>{this.emit("loaded",s)});d(this,"onTextureFailed",(e,s)=>{this.emit("failed",s)});this.rendererMain=s,this.stage=t,this.id=(l==null?void 0:l.id)??oo(),this.coreNode=l||new to(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){const s=this._parent;if(this._parent=e,this.coreNode.parent=(e==null?void 0:e.coreNode)??null,s){const t=s.children.indexOf(this);s.children.splice(t,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,s){const t=new _s(this.coreNode,e,s);return new Is(this.stage.animationManager,t)}}const Ls=i=>{const o=()=>{if(i.updateAnimations(),!i.hasSceneUpdates()){setTimeout(o,16.666666666666668);return}i.drawFrame(),requestAnimationFrame(o)};requestAnimationFrame(o)},$s=()=>performance?performance.now():Date.now();class Bs{constructor(o){d(this,"textureSource");this.textureSource=o}}class Ps{constructor(o){d(this,"stage");this.stage=o}}class Ns{}class zs{static makeCacheKey(o){return!1}static resolveDefaults(o){return{}}}function fo(i,o,e){const s=i.createShader(o);if(!s)throw new Error;if(i.shaderSource(s,e),i.compileShader(s),i.getShaderParameter(s,i.COMPILE_STATUS))return s;console.log(i.getShaderInfoLog(s)),i.deleteShader(s)}function Fs(i,o,e){const s=i.createProgram();if(!s)throw new Error;if(i.attachShader(s,o),i.attachShader(s,e),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS))return s;console.log(i.getProgramInfoLog(s)),i.deleteProgram(s)}function Os(i){return self.WebGL2RenderingContext&&i instanceof self.WebGL2RenderingContext}class Ke extends zs{constructor(e){super();d(this,"boundBufferCollection",null);d(this,"buffersBound",!1);d(this,"program");d(this,"vao");d(this,"renderer");d(this,"glw");d(this,"attributeBuffers");d(this,"attributeLocations");d(this,"attributeNames");d(this,"uniformLocations");d(this,"uniformTypes");d(this,"supportsIndexedTextures");const s=this.renderer=e.renderer,t=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const l=t.isWebGl2(),r=l&&e.webgl2Extensions||!l&&e.webgl1Extensions||[],n=l?"2.0":"1.0";r.forEach(m=>{if(!t.getExtension(m))throw new Error(`Shader "${this.constructor.name}" requires extension "${m}" for WebGL ${n} but wasn't found`)});const a=e.shaderSources||this.constructor.shaderSources;if(a)l&&(a!=null&&a.webGl2)&&(a.fragment=a.webGl2.fragment,a.vertex=a.webGl2.vertex,delete a.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const c=s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,f=a.vertex instanceof Function?a.vertex(c):a.vertex,u=a.fragment instanceof Function?a.fragment(c):a.fragment,g=fo(t,t.VERTEX_SHADER,f),h=fo(t,t.FRAGMENT_SHADER,u);if(!g||!h)throw new Error;const p=Fs(t,g,h);if(!p)throw new Error;if(this.program=p,l){const m=t.createVertexArray();if(!m)throw new Error;this.vao=m,t.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(m=>{const y=t.getAttribLocation(this.program,m);if(y<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${m}"!`);const b=t.createBuffer();if(!b)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${m}"`);this.attributeLocations[m]=y,this.attributeBuffers[m]=b,this.attributeNames.push(m)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(m=>{const y=t.getUniformLocation(this.program,m.name);if(this.uniformTypes[m.name]=m.uniform,!y){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${m.name}"`);return}this.uniformLocations[m.name]=y})}bindBufferAttribute(e,s,t){const{glw:l}=this;l.enableVertexAttribArray(e),l.vertexAttribPointer(s,e,t.size,t.type,t.normalized,t.stride,t.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,s){return!1}bindRenderOp(e,s){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{glw:t}=e;if(this.setUniform("u_resolution",[t.canvas.width,t.canvas.height]),this.setUniform("u_pixelRatio",e.options.pixelRatio),s){if(Dt(s,"$dimensions")){let l=s.$dimensions;l||(l=e.dimensions),this.setUniform("u_dimensions",[l.width,l.height])}if(Dt(s,"$alpha")){let l=s.$alpha;l||(l=e.alpha),this.setUniform("u_alpha",l)}this.bindProps(s)}}setUniform(e,...s){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...s)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const s in this.attributeLocations){const t=e.getBuffer(s),l=e.getAttributeInfo(s);this.bindBufferAttribute(this.attributeLocations[s],t,l)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}d(Ke,"shaderSources");class zo extends Ns{constructor(e,s,t,l,r,n,a,c,f,u){super();d(this,"glw");d(this,"options");d(this,"buffers");d(this,"shader");d(this,"shaderProps");d(this,"alpha");d(this,"clippingRect");d(this,"dimensions");d(this,"bufferIdx");d(this,"zIndex");d(this,"length",0);d(this,"numQuads",0);d(this,"textures",[]);d(this,"maxTextures");this.glw=e,this.options=s,this.buffers=t,this.shader=l,this.shaderProps=r,this.alpha=n,this.clippingRect=a,this.dimensions=c,this.bufferIdx=f,this.zIndex=u,this.maxTextures=l.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:s,maxTextures:t}=this,l=s.findIndex(n=>n===e);if(l!==-1)return l;const r=s.length;return r>=t?4294967295:(this.textures.push(e),r)}draw(){const{glw:e,shader:s,shaderProps:t,options:l}=this,{shManager:r}=l;r.useShader(s),s.bindRenderOp(this,t);const n=this.bufferIdx/24*6*2;if(this.clippingRect){const{x:a,y:c,width:f,height:u}=this.clippingRect,g=l.pixelRatio,h=l.canvas.height,p=Math.round(a*g),m=Math.round(f*g),y=Math.round(u*g),b=Math.round(h-y-c*g);e.setScissorTest(!0),e.scissor(p,b,m,y)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,n)}}function Ds(i){const o={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(o).forEach(s=>{o[s]=i.getParameter(i[s])}),o}function Us(i){const o={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(o).forEach(s=>{o[s]=i.getExtension(s)}),o}function Ws(i,o){const e=~~(o/80),s=new Uint16Array(e*6);for(let l=0,r=0;l<e;l+=6,r+=4)s[l]=r,s[l+1]=r+1,s[l+2]=r+2,s[l+3]=r+2,s[l+4]=r+1,s[l+5]=r+3;const t=i.createBuffer();i.elementArrayBufferData(t,s,i.STATIC_DRAW)}const co=new Uint8Array([0,0,0,0]);class Fo extends Bs{constructor(e,s){super(s);d(this,"glw");d(this,"_nativeCtxTexture",null);d(this,"_state","freed");d(this,"_w",0);d(this,"_h",0);this.glw=e}get ctxTexture(){return this._state==="freed"&&this.load(),this._nativeCtxTexture,this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this.onLoadRequest().then(({width:e,height:s})=>{this._state="loaded",this._w=e,this._h=s,this.textureSource.setState("loaded",{width:e,height:s})}).catch(e=>{this._state="failed",this.textureSource.setState("failed",e),console.error(e)}))}async onLoadRequest(){var r;this._nativeCtxTexture=this.createNativeCtxTexture();const{glw:e}=this;e.activeTexture(0),e.bindTexture(this._nativeCtxTexture),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,co);const s=await((r=this.textureSource)==null?void 0:r.getTextureData());let t=0,l=0;if(this._nativeCtxTexture,e.activeTexture(0),s.data instanceof ImageBitmap||s.data instanceof ImageData){const n=s.data;t=n.width,l=n.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!s.premultiplyAlpha),e.texImage2D(0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),(e.isWebGl2()||ao(t)&&ao(l))&&e.generateMipmap()}else s.data===null?(t=0,l=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,co)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",s);return{width:t,height:l}}free(){if(this._state==="freed"||(this._state="freed",this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:e}=this;e.deleteTexture(this._nativeCtxTexture),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:e}=this,s=e.createTexture();if(!s)throw new Error("Could not create WebGL Texture");return s}}class Et extends Ee{constructor(e){super();d(this,"txManager");d(this,"dimensions",null);d(this,"error",null);d(this,"state","loading");this.txManager=e}setState(e,...s){if(this.state!==e){if(this.state=e,e==="loaded"){const t=s;this.dimensions=t[0]}else if(e==="failed"){const t=s;this.error=t[0]}this.emit(e,...s)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const rt=class rt extends Et{constructor(e,s){super(e);d(this,"props");this.props=rt.resolveDefaults(s||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),s=new Uint8ClampedArray(e.buffer);return{data:new ImageData(s,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){return`ColorTexture,${rt.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}};d(rt,"z$__type__Props");let Tt=rt;const It=class It extends Et{constructor(e,s){super(e);d(this,"props");d(this,"parentTexture");d(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});d(this,"onParentTxFailed",(e,s)=>{this.setState("failed",s)});this.parentTexture=this.txManager.loadTexture(s.texture.txType,s.texture.props,s.texture.options),this.props=It.resolveDefaults(s||{}),queueMicrotask(()=>{const t=this.parentTexture;t.state==="loaded"?this.onParentTxLoaded(t,t.dimensions):t.state==="failed"&&this.onParentTxFailed(t,t.error),t.on("loaded",this.onParentTxLoaded),t.on("failed",this.onParentTxFailed)})}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};d(It,"z$__type__Props");let ft=It;class Xs extends Fo{constructor(o,e){super(o,e)}async onLoadRequest(){var e,s;const o=await this.textureSource.getTextureData();return{width:((e=o.data)==null?void 0:e.width)||0,height:((s=o.data)==null?void 0:s.height)||0}}}class Oo extends Ke{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}}d(Oo,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class Do extends Ke{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});d(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:s,glw:t}=this;if(e.length>s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${s.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((r,n)=>{t.activeTexture(n),t.bindTexture(r.ctxTexture)});const l=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",l)}}d(Do,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:e=>`
      #define txUnits ${e}
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {
        ${Array.from(Array(e).keys()).map(s=>`
          ${s!==0?"else ":""}if (idx == ${s}) {
            return texture2D(textures[${s}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class ae{constructor(o){d(this,"priority",1);d(this,"name","");d(this,"ref");d(this,"target");d(this,"passParameters","");d(this,"declaredUniforms","");d(this,"uniformInfo",{});const{ref:e,target:s,props:t={}}=o;this.ref=e,this.target=s;const l={},r=[];let n="";const a=this.constructor.uniforms||{};for(const c in a){const f=a[c],u=f.type,g=`${e}_${c}`;let h="";f.size&&(h=`[${f.size(t)}]`),r.push(g),n+=`uniform ${u} ${g}${h};`,l[c]={name:g,uniform:a[c].method}}this.passParameters=r.join(","),this.declaredUniforms=n,this.uniformInfo=l}static getEffectKey(o){return""}static getMethodParameters(o,e){const s=[];for(const t in o){const l=o[t];let r="";l.size&&(r=`[${l.size(e)}]`),s.push(`${l.type} ${t}${r}`)}return s.join(",")}static resolveDefaults(o){return{}}static makeEffectKey(o){return!1}}d(ae,"uniforms",{}),d(ae,"methods"),d(ae,"onShaderMask"),d(ae,"onColorize"),d(ae,"onEffectMask");const Mt=new Map,Ys=(i,o)=>{const e=JSON.stringify(i);if(Mt.has(e))return Mt.get(e);const s=(i??[]).map(t=>({type:t.type,props:o[t.type].resolveDefaults(t.props||{})}));return Mt.set(e,s),s},we=class we extends Ke{constructor(e,s,t){const l=we.createShader(s,t);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...l.uniforms],shaderSources:{vertex:l.vertex,fragment:l.fragment}});d(this,"effects",[]);this.effects=l.effects,this.calculateProps=Po(this.calculateProps.bind(this))}bindTextures(e){const{glw:s}=this;s.activeTexture(0),s.bindTexture(e[0].ctxTexture)}calculateProps(e){const s=this.renderer.shManager.getRegisteredEffects(),t=[];return e==null||e.forEach((l,r)=>{const n=this.effects[r],a=s[n.name],c=l.props??{},f=n.uniformInfo;Object.keys(c).forEach(u=>{const g=a.uniforms[u],h=f[u];let p=g.validator?g.validator(c[u],c):c[u];Array.isArray(p)&&(p=new Float32Array(p)),t.push({name:h.name,value:p})})}),t}bindProps(e){this.calculateProps(e.effects).forEach(t=>{this.setUniform(t.name,t.value)})}static createShader(e,s){const t={},l={};let r="";const n=[],a=[],c=e.effects.map(p=>{const m=s[p.type],y=m.getEffectKey(p.props||{});t[y]=t[y]?++t[y]:1;const b=t[y];b===1&&a.push({key:y,type:p.type,props:p.props});const v=new m({ref:`${y}${b===1?"":b}`,target:y,props:p.props});return r+=v.declaredUniforms,n.push(...Object.values(v.uniformInfo)),v});let f="";a==null||a.forEach(p=>{const m=s[p.type],y=m.resolveDefaults(p.props??{}),b=[];for(const x in m.methods){let _=x;const A=m.methods[x];l[x]&&l[x]!==A&&(_=we.resolveMethodDuplicate(x,A,l)),l[_]=A.replace("function",_),b.push({m:x,cm:_})}let v=m.onShaderMask instanceof Function?m.onShaderMask(y):m.onShaderMask,S=m.onColorize instanceof Function?m.onColorize(y):m.onColorize,I=m.onEffectMask instanceof Function?m.onEffectMask(y):m.onEffectMask;b.forEach(x=>{const{m:_,cm:A}=x,R=new RegExp(`\\$${_}`,"g");v&&(v=v.replace(R,A)),S&&(S=S.replace(R,A)),I&&(I=I.replace(R,A))});const k=m.getMethodParameters(m.uniforms,y),E=k.length>0?`, ${k}`:"";v&&(f+=`
        float fx_${p.key}_onShaderMask(float shaderMask ${E}) {
          ${v}
        }
        `),S&&(f+=`
          vec4 fx_${p.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${E}) {
            ${S}
          }
        `),I&&(f+=`
          vec4 fx_${p.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${E}) {
            ${I}
          }
        `)});let u="";for(const p in l)u+=l[p];let g="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",h=`

    `;for(let p=0;p<c.length;p++){const m=c[p],y=m.passParameters.length>0?`, ${m.passParameters}`:"",b=s[m.name];b.onShaderMask&&(h+=`
        shaderMask = fx_${m.target}_onShaderMask(shaderMask ${y});
        `),b.onColorize&&(h+=`
        maskColor = fx_${m.target}_onColorize(shaderMask, maskColor, shaderColor${y});
        `),b.onEffectMask&&(g=`fx_${m.target}_onEffectMask(shaderMask, maskColor, shaderColor${y})`);const v=c[p+1];(v===void 0||s[v.name].onEffectMask)&&(h+=`
          shaderColor = ${g};
        `)}return{effects:c,uniforms:n,fragment:we.fragment(r,u,f,h),vertex:we.vertex()}}static resolveMethodDuplicate(e,s,t,l=0){const r=e+(l>0?l:"");return t[r]&&t[r]!==s?this.resolveMethodDuplicate(e,s,t,++l):r}static resolveDefaults(e,s){return{effects:Ys(e.effects,s),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,s){var l;let t="";return(l=e.effects)==null||l.forEach(r=>{const a=s[r.type].getEffectKey(r.props||{});t+=`,${a}`}),`DynamicShader${t}`}};d(we,"z$__type__Props"),d(we,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),d(we,"fragment",(e,s,t,l)=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${e}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${s}

    ${t}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${l}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let He=we;class Wt extends Ke{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(o){return{radius:o.radius||10,$dimensions:{width:0,height:0}}}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}bindProps(o){this.setUniform("u_radius",o.radius)}canBatchShaderProps(o,e){return o.radius===e.radius&&o.$dimensions.width===e.$dimensions.width&&o.$dimensions.height===e.$dimensions.height}}d(Wt,"z$__type__Props"),d(Wt,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const Hs=new Float32Array([1,0,0,0,1,0,0,0,1]),kt=class kt extends Ke{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(o){const{glw:e}=this;e.activeTexture(0),e.bindTexture(o[0].ctxTexture)}bindProps(o){const e=kt.resolveDefaults(o);for(const s in e)if(s==="transform")this.setUniform("u_transform",!1,e[s]);else if(s==="scrollY")this.setUniform("u_scrollY",e[s]);else if(s==="color"){const t=be(e.color);this.setUniform("u_color",t)}else s==="size"?this.setUniform("u_size",e[s]):s==="distanceRange"?this.setUniform("u_distanceRange",e[s]):s==="debug"&&this.setUniform("u_debug",e[s]?1:0)}static resolveDefaults(o={}){return{transform:o.transform??Hs,scrollY:o.scrollY??0,color:o.color??4294967295,size:o.size??16,distanceRange:o.distanceRange??1,debug:o.debug??!1}}};d(kt,"shaderSources",{vertex:`
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;
        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);
        v_texcoord = a_textureCoordinate;
      }
    `,fragment:`
      precision highp float;

      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let Xt=kt;class ze extends ae{constructor(){super(...arguments);d(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){return{radius:e.radius??10}}}d(ze,"z$__type__Props"),d(ze,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let s=e;return Array.isArray(s)?s.length===2?s=[s[0],s[1],s[0],s[1]]:s.length===3?s=[s[0],s[1],s[2],s[0]]:s.length!==4&&(s=[s[0],s[0],s[0],s[0]]):typeof s=="number"&&(s=[s,s,s,s]),s}}}),d(ze,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),d(ze,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),d(ze,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class tt extends ae{constructor(){super(...arguments);d(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(tt,"z$__type__Props"),d(tt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(tt,"onEffectMask",`
  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),d(tt,"onColorize",`
    return color;
  `);class Fe extends ae{constructor(){super(...arguments);d(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){const s=e.colors??[4278190080,4294967295];let t=e.stops;if(!t){t=[];const l=s.length-1;for(let r=0;r<s.length;r++)t.push(r*(1/l))}return{colors:s,stops:t,angle:e.angle??0}}}d(Fe,"z$__type__Props"),d(Fe,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(t=>be(t)).reduce((t,l)=>t.concat(l),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,s)=>{const t=s.colors??[];let l=e;const r=e;if(l.length===0||l&&l.length!==t.length){for(let n=0;n<t.length;n++)l[n]?(r[n]=l[n],l[n-1]===void 0&&r[n-2]!==void 0&&(r[n-1]=r[n-2]+(l[n]-r[n-2])/2)):r[n]=n*(1/(t.length-1));l=r}return r},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(Fe,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),d(Fe,"ColorLoop",e=>{let s="";for(let t=2;t<e;t++)s+=`colorOut = mix(colorOut, colors[${t}], clamp((dist - stops[${t-1}]) / (stops[${t}] - stops[${t-1}]), 0.0, 1.0));`;return s}),d(Fe,"onColorize",e=>`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      for(int i = 1; i < ${e.colors.length||1}-1; i++) {
        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);
        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));
      }
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `);class Yt extends ae{constructor(){super(...arguments);d(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){return{amount:e.amount??1}}}d(Yt,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),d(Yt,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Oe extends ae{constructor(){super(...arguments);d(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(Oe,"z$__type__Props"),d(Oe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(Oe,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),d(Oe,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),d(Oe,"onColorize",`
    return color;
  `);class De extends ae{constructor(){super(...arguments);d(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(De,"z$__type__Props"),d(De,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(De,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),d(De,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),d(De,"onColorize",`
    return color;
  `);class Ue extends ae{constructor(){super(...arguments);d(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(Ue,"z$__type__Props"),d(Ue,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(Ue,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),d(Ue,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),d(Ue,"onColorize",`
    return color;
  `);class We extends ae{constructor(){super(...arguments);d(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}d(We,"z$__type__Props"),d(We,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(We,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),d(We,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),d(We,"onColorize",`
    return color;
  `);class ot extends ae{constructor(){super(...arguments);d(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){return{amplitude:e.amplitude??.2,narrowness:e.narrowness??4,blockiness:e.blockiness??2,minimizer:e.minimizer??8,time:e.time??Date.now()}}}d(ot,"z$__type__Props"),d(ot,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),d(ot,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),d(ot,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class bt extends ae{constructor(){super(...arguments);d(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){return{fade:e.fade??10}}}d(bt,"z$__type__Props"),d(bt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let s=e;return Array.isArray(s)?s.length===2?s=[s[0],s[1],s[0],s[1]]:s.length===3?s=[s[0],s[1],s[2],s[0]]:s.length!==4&&(s=[s[0],s[0],s[0],s[0]]):typeof s=="number"&&(s=[s,s,s,s]),s}}}),d(bt,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);class St extends ae{constructor(){super(...arguments);d(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){const s=e.colors??[4278190080,4294967295];let t=e.stops;if(!t){t=[];const l=s.length-1;for(let r=0;r<s.length;r++)t.push(r*(1/l))}return{colors:s,stops:t,width:e.width??0,height:e.height??e.width??0,pivot:e.pivot??[.5,.5]}}}d(St,"z$__type__Props"),d(St,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(t=>be(t)).reduce((t,l)=>t.concat(l),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,s)=>{const t=s.colors??[];let l=e;const r=e;if(l.length===0||l&&l.length!==t.length){for(let n=0;n<t.length;n++)l[n]?(r[n]=l[n],l[n-1]===void 0&&r[n-2]!==void 0&&(r[n-1]=r[n-2]+(l[n]-r[n-2])/2)):r[n]=n*(1/(t.length-1));l=r}return r},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(St,"onColorize",e=>`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      for(int i = 1; i < ${e.colors.length||1}-1; i++) {
        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);
        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));
      }
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `);class Xe extends ae{constructor(){super(...arguments);d(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){return{width:e.width??10,progress:e.progress??.5,offset:e.offset??0,range:e.range??Math.PI*2,rounded:e.rounded??!1,radius:e.radius??1,color:e.color??4294967295}}}d(Xe,"z$__type__Props"),d(Xe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),d(Xe,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),d(Xe,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),d(Xe,"onColorize",`
    return color;
  `);class Gs{constructor(){d(this,"shCache",new Map);d(this,"shConstructors",{});d(this,"attachedShader",null);d(this,"effectConstructors",{});d(this,"renderer");this.registerShaderType("DefaultShader",Oo),this.registerShaderType("DefaultShaderBatched",Do),this.registerShaderType("RoundedRectangle",Wt),this.registerShaderType("DynamicShader",He),this.registerShaderType("SdfShader",Xt),this.registerEffectType("border",tt),this.registerEffectType("borderBottom",Ue),this.registerEffectType("borderLeft",We),this.registerEffectType("borderRight",Oe),this.registerEffectType("borderTop",De),this.registerEffectType("fadeOut",bt),this.registerEffectType("linearGradient",Fe),this.registerEffectType("radialGradient",St),this.registerEffectType("grayscale",Yt),this.registerEffectType("glitch",ot),this.registerEffectType("radius",ze),this.registerEffectType("radialProgress",Xe)}registerShaderType(o,e){this.shConstructors[o]=e}registerEffectType(o,e){this.effectConstructors[o]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(o,e){if(!this.renderer)throw new Error("Renderer is not been defined");const s=this.shConstructors[o];if(!s)throw new Error(`Shader type "${o}" is not registered`);if(o==="DynamicShader")return this.loadDynamicShader(e);const t=s.resolveDefaults(e),l=s.makeCacheKey(t)||s.name;if(l&&this.shCache.has(l))return{shader:this.shCache.get(l),props:t};const r=new s(this.renderer,e);return l&&this.shCache.set(l,r),{shader:r,props:t}}loadDynamicShader(o){if(!this.renderer)throw new Error("Renderer is not been defined");const e=He.resolveDefaults(o,this.effectConstructors),s=He.makeCacheKey(e,this.effectConstructors);if(s&&this.shCache.has(s))return{shader:this.shCache.get(s),props:e};const t=new He(this.renderer,o,this.effectConstructors);return s&&this.shCache.set(s,t),{shader:t,props:e}}useShader(o){this.attachedShader!==o&&(this.attachedShader&&this.attachedShader.detach(),o.attach(),this.attachedShader=o)}}class Uo{constructor(o){d(this,"config");this.config=o}getBuffer(o){var e;return(e=this.config.find(s=>s.attributes[o]))==null?void 0:e.buffer}getAttributeInfo(o){var e;return(e=this.config.find(s=>s.attributes[o]))==null?void 0:e.attributes[o]}}class qs{constructor(){d(this,"data",{})}reset(){this.data={}}increment(o){this.data[o]||(this.data[o]=0),this.data[o]++}getData(){return{...this.data}}}class Vs{constructor(o){d(this,"gl");d(this,"activeTextureUnit",0);d(this,"texture2dUnits");d(this,"texture2dParams",new WeakMap);d(this,"scissorEnabled");d(this,"scissorX");d(this,"scissorY");d(this,"scissorWidth");d(this,"scissorHeight");d(this,"blendEnabled");d(this,"blendSrcRgb");d(this,"blendDstRgb");d(this,"blendSrcAlpha");d(this,"blendDstAlpha");d(this,"boundArrayBuffer");d(this,"boundElementArrayBuffer");d(this,"curProgram");d(this,"programUniforms",new WeakMap);d(this,"canvas");d(this,"MAX_RENDERBUFFER_SIZE");d(this,"MAX_TEXTURE_SIZE");d(this,"MAX_VIEWPORT_DIMS");d(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");d(this,"MAX_TEXTURE_IMAGE_UNITS");d(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");d(this,"MAX_VERTEX_ATTRIBS");d(this,"MAX_VARYING_VECTORS");d(this,"MAX_VERTEX_UNIFORM_VECTORS");d(this,"MAX_FRAGMENT_UNIFORM_VECTORS");d(this,"TEXTURE_MAG_FILTER");d(this,"TEXTURE_MIN_FILTER");d(this,"TEXTURE_WRAP_S");d(this,"TEXTURE_WRAP_T");d(this,"LINEAR");d(this,"CLAMP_TO_EDGE");d(this,"RGBA");d(this,"UNSIGNED_BYTE");d(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");d(this,"FLOAT");d(this,"TRIANGLES");d(this,"UNSIGNED_SHORT");d(this,"ONE");d(this,"ONE_MINUS_SRC_ALPHA");d(this,"VERTEX_SHADER");d(this,"FRAGMENT_SHADER");d(this,"STATIC_DRAW");d(this,"COMPILE_STATUS");d(this,"LINK_STATUS");d(this,"DYNAMIC_DRAW");this.gl=o,this.activeTextureUnit=o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0;const e=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(e).fill(void 0).map((t,l)=>(this.activeTexture(l),o.getParameter(o.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=o.isEnabled(o.SCISSOR_TEST);const s=o.getParameter(o.SCISSOR_BOX);this.scissorX=s[0],this.scissorY=s[1],this.scissorWidth=s[2],this.scissorHeight=s[3],this.blendEnabled=o.isEnabled(o.BLEND),this.blendSrcRgb=o.getParameter(o.BLEND_SRC_RGB),this.blendDstRgb=o.getParameter(o.BLEND_DST_RGB),this.blendSrcAlpha=o.getParameter(o.BLEND_SRC_ALPHA),this.blendDstAlpha=o.getParameter(o.BLEND_DST_ALPHA),this.boundArrayBuffer=o.getParameter(o.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=o.getParameter(o.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=o.getParameter(o.CURRENT_PROGRAM),this.canvas=o.canvas,this.MAX_RENDERBUFFER_SIZE=o.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=o.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=o.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=o.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=o.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=o.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=o.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=o.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=o.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=o.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=o.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=o.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=o.TEXTURE_WRAP_T,this.LINEAR=o.LINEAR,this.CLAMP_TO_EDGE=o.CLAMP_TO_EDGE,this.RGBA=o.RGBA,this.UNSIGNED_BYTE=o.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.FLOAT=o.FLOAT,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.ONE=o.ONE,this.ONE_MINUS_SRC_ALPHA=o.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.VERTEX_SHADER=o.VERTEX_SHADER,this.FRAGMENT_SHADER=o.FRAGMENT_SHADER,this.STATIC_DRAW=o.STATIC_DRAW,this.COMPILE_STATUS=o.COMPILE_STATUS,this.LINK_STATUS=o.LINK_STATUS,this.DYNAMIC_DRAW=o.DYNAMIC_DRAW}isWebGl2(){return Os(this.gl)}activeTexture(o){const{gl:e}=this;this.activeTextureUnit!==o&&(e.activeTexture(o+e.TEXTURE0),this.activeTextureUnit=o)}bindTexture(o){const{gl:e,activeTextureUnit:s,texture2dUnits:t}=this;t[s]!==o&&(t[s]=o,e.bindTexture(this.gl.TEXTURE_2D,o))}_getActiveTexture(){const{activeTextureUnit:o,texture2dUnits:e}=this;return e[o]}texParameteri(o,e){const{gl:s,texture2dParams:t}=this,l=this._getActiveTexture();if(!l)throw new Error("No active texture");let r=t.get(l);r||(r={},t.set(l,r)),r[o]!==e&&(r[o]=e,s.texParameteri(s.TEXTURE_2D,o,e))}texImage2D(o,e,s,t,l,r,n,a){const{gl:c}=this;r?c.texImage2D(c.TEXTURE_2D,o,e,s,t,l,r,n,a):c.texImage2D(c.TEXTURE_2D,o,e,s,t,l)}pixelStorei(o,e){const{gl:s}=this;s.pixelStorei(o,e)}generateMipmap(){const{gl:o}=this;o.generateMipmap(o.TEXTURE_2D)}createTexture(){const{gl:o}=this;return o.createTexture()}deleteTexture(o){const{gl:e}=this;o&&this.texture2dParams.delete(o),e.deleteTexture(o)}viewport(o,e,s,t){const{gl:l}=this;l.viewport(o,e,s,t)}clearColor(o,e,s,t){const{gl:l}=this;l.clearColor(o,e,s,t)}setScissorTest(o){const{gl:e,scissorEnabled:s}=this;o!==s&&(o?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.scissorEnabled=o)}scissor(o,e,s,t){const{gl:l,scissorX:r,scissorY:n,scissorWidth:a,scissorHeight:c}=this;(o!==r||e!==n||s!==a||t!==c)&&(l.scissor(o,e,s,t),this.scissorX=o,this.scissorY=e,this.scissorWidth=s,this.scissorHeight=t)}setBlend(o){const{gl:e,blendEnabled:s}=this;o!==s&&(o?e.enable(e.BLEND):e.disable(e.BLEND),this.blendEnabled=o)}blendFunc(o,e){const{gl:s,blendSrcRgb:t,blendDstRgb:l,blendSrcAlpha:r,blendDstAlpha:n}=this;(o!==t||e!==l||o!==r||e!==n)&&(s.blendFunc(o,e),this.blendSrcRgb=o,this.blendDstRgb=e,this.blendSrcAlpha=o,this.blendDstAlpha=e)}createBuffer(){const{gl:o}=this;return o.createBuffer()}clear(){const{gl:o}=this;o.clear(o.COLOR_BUFFER_BIT)}arrayBufferData(o,e,s){const{gl:t,boundArrayBuffer:l}=this;l!==o&&(t.bindBuffer(t.ARRAY_BUFFER,o),this.boundArrayBuffer=o),t.bufferData(t.ARRAY_BUFFER,e,s)}elementArrayBufferData(o,e,s){const{gl:t,boundElementArrayBuffer:l}=this;l!==o&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),this.boundElementArrayBuffer=o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,s)}vertexAttribPointer(o,e,s,t,l,r,n){const{gl:a,boundArrayBuffer:c}=this;c!==o&&(a.bindBuffer(a.ARRAY_BUFFER,o),this.boundArrayBuffer=o),a.vertexAttribPointer(e,s,t,l,r,n)}useProgram(o){const{gl:e,curProgram:s}=this;s!==o&&(e.useProgram(o),this.curProgram=o)}setUniform(o,e,...s){const{gl:t,programUniforms:l}=this;let r=l.get(this.curProgram);r||(r=new Map,l.set(this.curProgram,r));const n=r.get(e);(!n||!js(n,s))&&(r.set(e,s),t[o](e,...s))}getParameter(o){const{gl:e}=this;return e.getParameter(o)}drawElements(o,e,s,t){const{gl:l}=this;l.drawElements(o,e,s,t)}getExtension(o){const{gl:e}=this;return e.getExtension(o)}createVertexArray(){const{gl:o}=this;return o.createVertexArray()}bindVertexArray(o){const{gl:e}=this;e.bindVertexArray(o)}getAttribLocation(o,e){const{gl:s}=this;return s.getAttribLocation(o,e)}getUniformLocation(o,e){const{gl:s}=this;return s.getUniformLocation(o,e)}enableVertexAttribArray(o){const{gl:e}=this;e.enableVertexAttribArray(o)}disableVertexAttribArray(o){const{gl:e}=this;e.disableVertexAttribArray(o)}createShader(o){const{gl:e}=this;return e.createShader(o)}compileShader(o){const{gl:e}=this;e.compileShader(o)}attachShader(o,e){const{gl:s}=this;s.attachShader(o,e)}linkProgram(o){const{gl:e}=this;e.linkProgram(o)}deleteProgram(o){const{gl:e}=this;e.deleteProgram(o)}getShaderParameter(o,e){const{gl:s}=this;return s.getShaderParameter(o,e)}getShaderInfoLog(o){const{gl:e}=this;return e.getShaderInfoLog(o)}createProgram(){const{gl:o}=this;return o.createProgram()}getProgramParameter(o,e){const{gl:s}=this;return s.getProgramParameter(o,e)}getProgramInfoLog(o){const{gl:e}=this;return e.getProgramInfoLog(o)}shaderSource(o,e){const{gl:s}=this;s.shaderSource(o,e)}deleteShader(o){const{gl:e}=this;e.deleteShader(o)}}function js(i,o){return i.length!==o.length?!1:i.every((e,s)=>Array.isArray(e)||e instanceof Float32Array?!1:e===o[s])}const Ks=24;class Qs extends Ps{constructor(e){super(e.stage);d(this,"glw");d(this,"system");d(this,"txManager");d(this,"shManager");d(this,"options");d(this,"quadBuffer",new ArrayBuffer(1024*1024*4));d(this,"fQuadBuffer",new Float32Array(this.quadBuffer));d(this,"uiQuadBuffer",new Uint32Array(this.quadBuffer));d(this,"renderOps",[]);d(this,"curBufferIdx",0);d(this,"curRenderOp",null);d(this,"renderables",[]);d(this,"defaultShader");d(this,"quadBufferCollection");d(this,"defaultTexture");const{canvas:s,clearColor:t,bufferMemory:l}=e;this.options=e,this.txManager=e.txManager,this.shManager=e.shManager,this.defaultTexture=new Tt(this.txManager);const r=bs(s,e.contextSpy),n=this.glw=new Vs(r),a=be(t);n.viewport(0,0,s.width,s.height),n.clearColor(a[0],a[1],a[2],a[3]),n.setBlend(!0),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),Ws(n,l),this.system={parameters:Ds(this.glw),extensions:Us(this.glw)},this.shManager.renderer=this,this.defaultShader=this.shManager.loadShader("DefaultShader").shader;const c=n.createBuffer(),f=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new Uo([{buffer:c,attributes:{a_position:{name:"a_position",size:2,type:n.FLOAT,normalized:!1,stride:f,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:n.FLOAT,normalized:!1,stride:f,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:n.UNSIGNED_BYTE,normalized:!0,stride:f,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:n.FLOAT,normalized:!1,stride:f,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof ft?new Xs(this.glw,e):new Fo(this.glw,e)}addQuad(e){const{fQuadBuffer:s,uiQuadBuffer:t}=this,{width:l,height:r,colorTl:n,colorTr:a,colorBl:c,colorBr:f,textureOptions:u,shader:g,shaderProps:h,alpha:p,clippingRect:m,tx:y,ty:b,ta:v,tb:S,tc:I,td:k}=e;let{texture:E}=e;if(h&&Dt(h,"$dimensions")){const $=h.$dimensions;$.width=l,$.height=r}E=E??this.defaultTexture;let{curBufferIdx:x,curRenderOp:_}=this;const A={width:l,height:r},R=g||this.defaultShader;_&&(_.shader!==R||!Es(_.clippingRect,m)||_.shader!==this.defaultShader&&(!h||!_.shader.canBatchShaderProps(_.shaderProps,h)))&&(_=null),_||(this.newRenderOp(R,h,p,A,m,x),_=this.curRenderOp);const M=(u==null?void 0:u.flipX)??!1,z=(u==null?void 0:u.flipY)??!1;let P=0,F=0,w=1,T=1;if(E instanceof ft){const{x:$,y:B,width:U,height:X}=E.props,{width:H=0,height:W=0}=E.parentTexture.dimensions||{width:0,height:0};P=$/H,w=P+U/H,F=B/W,T=F+X/W,E=E.parentTexture}M&&([P,w]=[w,P]),z&&([F,T]=[T,F]);const{txManager:L}=this.stage,O=L.getCtxTexture(E),N=this.addTexture(O,x);if(_=this.curRenderOp,S!==0||I!==0)s[x++]=y,s[x++]=b,s[x++]=P,s[x++]=F,t[x++]=n,s[x++]=N,s[x++]=y+l*v,s[x++]=b+l*I,s[x++]=w,s[x++]=F,t[x++]=a,s[x++]=N,s[x++]=y+r*S,s[x++]=b+r*k,s[x++]=P,s[x++]=T,t[x++]=c,s[x++]=N,s[x++]=y+l*v+r*S,s[x++]=b+l*I+r*k,s[x++]=w,s[x++]=T,t[x++]=f,s[x++]=N;else{const $=y+l*v,B=b+r*k;s[x++]=y,s[x++]=b,s[x++]=P,s[x++]=F,t[x++]=n,s[x++]=N,s[x++]=$,s[x++]=b,s[x++]=w,s[x++]=F,t[x++]=a,s[x++]=N,s[x++]=y,s[x++]=B,s[x++]=P,s[x++]=T,t[x++]=c,s[x++]=N,s[x++]=$,s[x++]=B,s[x++]=w,s[x++]=T,t[x++]=f,s[x++]=N}_.length+=Ks,_.numQuads++,this.curBufferIdx=x}newRenderOp(e,s,t,l,r,n){const a=new zo(this.glw,this.options,this.quadBufferCollection,e,s,t,r,l,n,0);this.curRenderOp=a,this.renderOps.push(a)}addTexture(e,s,t){const{curRenderOp:l}=this,r=l.addTexture(e);if(r===4294967295){if(t)throw new Error("Unable to add texture to render op");const{shader:n,shaderProps:a,dimensions:c,clippingRect:f,alpha:u}=l;return this.newRenderOp(n,a,u,c,f,s),this.addTexture(e,s,!0)}return r}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){const{glw:s,quadBuffer:t}=this,l=new Float32Array(t,0,this.curBufferIdx),r=this.quadBufferCollection.getBuffer("a_position")??null;s.arrayBufferData(r,l,s.STATIC_DRAW),this.renderOps.forEach((n,a)=>{n.draw()}),this.renderables=[]}}class Zs{constructor(){d(this,"activeAnimations",new Set)}registerAnimation(o){this.activeAnimations.add(o)}unregisterAnimation(o){this.activeAnimations.delete(o)}update(o){this.activeAnimations.forEach(e=>{e.update(o)})}}class Js{constructor(o){d(this,"isWorkerSupported",!!self.Worker);d(this,"imageWorkersEnabled",!0);d(this,"messageManager",{});d(this,"workers",[]);d(this,"workerIndex",0);this.isWorkerSupported&&o>0?(this.workers=this.createWorkers(o),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})):this.imageWorkersEnabled=!1}handleMessage(o){const{src:e,data:s,error:t}=o.data,l=this.messageManager[e];if(l){const[r,n]=l;delete this.messageManager[e],t?n(new Error(t)):r({data:s})}}createWorkers(o=1){const e=`
      async function getImage(src, premultiplyAlpha) {
        const response = await fetch(src);
        const blob = await response.blob();
        return await createImageBitmap(blob, {
          premultiplyAlpha: premultiplyAlpha ? 'premultiply' : 'none',
          colorSpaceConversion: 'none',
          imageOrientation: 'none',
        });
      }

      self.onmessage = async (event) => {
        const { src, premultiplyAlpha } = event.data;

        try {
          const data = await getImage(src, premultiplyAlpha);
          self.postMessage({ src, data }, [data]);
        } catch (error) {
          self.postMessage({ src, error: error.message });
        }
      };
    `,s=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),t=(window.URL?URL:webkitURL).createObjectURL(s),l=[];for(let r=0;r<o;r++)l.push(new Worker(t));return l}getNextWorker(){const o=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,o}convertUrlToAbsolute(o){return new URL(o,self.location.href).href}getImage(o,e){return new Promise((s,t)=>{try{if(this.workers){const l=this.convertUrlToAbsolute(o);this.messageManager[l]=[s,t],this.getNextWorker().postMessage({src:l,premultiplyAlpha:e})}}catch(l){t(l)}})}}const lt=class lt extends Et{constructor(e,s){super(e);d(this,"props");this.props=lt.resolveDefaults(s)}async getTextureData(){const{src:e,premultiplyAlpha:s}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:s};if(this.txManager.imageWorkerManager.imageWorkersEnabled)return await this.txManager.imageWorkerManager.getImage(e,s);{const l=await(await fetch(e)).blob();return{data:await createImageBitmap(l,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"})}}}static makeCacheKey(e){const s=lt.resolveDefaults(e);return s.src instanceof ImageData?!1:`ImageTexture,${s.src},${s.premultiplyAlpha}`}static resolveDefaults(e){return{src:e.src??"",premultiplyAlpha:e.premultiplyAlpha??!0}}};d(lt,"z$__type__Props");let Ht=lt;const at=class at extends Et{constructor(e,s){super(e);d(this,"props");this.props=at.resolveDefaults(s)}async getTextureData(){const{width:e,height:s}=this.props,t=e*s*4,l=new Uint8ClampedArray(t);for(let r=0;r<t;r+=4){const n=Math.floor(Math.random()*256);l[r]=n,l[r+1]=n,l[r+2]=n,l[r+3]=255}return{data:new ImageData(l,e,s)}}static makeCacheKey(e){const s=at.resolveDefaults(e);return`NoiseTexture,${s.width},${s.height},${s.cacheId}`}static resolveDefaults(e){return{width:e.width??128,height:e.height??128,cacheId:e.cacheId??0}}};d(at,"z$__type__Props");let Gt=at;class ei{constructor(o){d(this,"usedMemory",0);d(this,"txConstructors",{});d(this,"textureKeyCache",new Map);d(this,"textureIdCache",new Map);d(this,"ctxTextureCache",new WeakMap);d(this,"textureRefCountMap",new WeakMap);d(this,"imageWorkerManager");d(this,"renderer");this.imageWorkerManager=new Js(o),this.registerTextureType("ImageTexture",Ht),this.registerTextureType("ColorTexture",Tt),this.registerTextureType("NoiseTexture",Gt),this.registerTextureType("SubTexture",ft)}registerTextureType(o,e){this.txConstructors[o]=e}loadTexture(o,e,s=null){const t=this.txConstructors[o];if(!t)throw new Error(`Texture type "${o}" is not registered`);let l;if((s==null?void 0:s.id)!==void 0&&this.textureIdCache.has(s.id)&&(l=this.textureIdCache.get(s.id)),!l){const r=s==null?void 0:s.id,n=(s==null?void 0:s.cacheKey)??t.makeCacheKey(e);n&&this.textureKeyCache.has(n)?l=this.textureKeyCache.get(n):l=new t(this,e),r&&this.addTextureIdToCache(r,n,l)}return s!=null&&s.preload&&this.getCtxTexture(l).load(),l}addTextureIdToCache(o,e,s){const{textureIdCache:t,textureRefCountMap:l}=this;t.set(o,s),l.has(s)?l.get(s).count++:(l.set(s,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,s))}removeTextureIdFromCache(o){const{textureIdCache:e,textureRefCountMap:s}=this,t=e.get(o);if(t&&(e.delete(o),s.has(t))){const l=s.get(t);l.count--,l.count===0&&(s.delete(t),l.cacheKey&&this.textureKeyCache.delete(l.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(o){if(this.ctxTextureCache.has(o))return this.ctxTextureCache.get(o);const e=this.renderer.createCtxTexture(o);return this.ctxTextureCache.set(o,e),e}}class Wo{constructor(o){d(this,"textRenderers");this.textRenderers=o}addFontFace(o){for(const e in this.textRenderers){const s=this.textRenderers[e];s&&s.isFontFaceSupported(o)&&s.addFontFace(o)}}static resolveFontFace(o,e){const s=[];return o.reduce((l,r)=>{if(l)return l;const n=r[e.fontFamily];if(!n)return;const a=new Set(n);for(const c of a)(c.descriptors.stretch!==e.fontStretch||c.descriptors.style!==e.fontStyle||c.descriptors.weight!==e.fontWeight)&&a.delete(c);return a.values().next().value},void 0)||s[0]}}const ti={x:(i,o)=>{i.props.x=o},y:(i,o)=>{i.props.y=o},width:(i,o)=>{i.props.width=o},height:(i,o)=>{i.props.height=o},color:(i,o)=>{i.props.color=o},zIndex:(i,o)=>{i.props.zIndex=o},fontFamily:(i,o)=>{i.props.fontFamily=o},fontWeight:(i,o)=>{i.props.fontWeight=o},fontStyle:(i,o)=>{i.props.fontStyle=o},fontStretch:(i,o)=>{i.props.fontStretch=o},fontSize:(i,o)=>{i.props.fontSize=o},text:(i,o)=>{i.props.text=o},textAlign:(i,o)=>{i.props.textAlign=o},contain:(i,o)=>{i.props.contain=o},offsetY:(i,o)=>{i.props.offsetY=o},scrollable:(i,o)=>{i.props.scrollable=o},scrollY:(i,o)=>{i.props.scrollY=o},letterSpacing:(i,o)=>{i.props.letterSpacing=o},lineHeight:(i,o)=>{i.props.lineHeight=o},maxLines:(i,o)=>{i.props.maxLines=o},textBaseline:(i,o)=>{i.props.textBaseline=o},verticalAlign:(i,o)=>{i.props.verticalAlign=o},overflowSuffix:(i,o)=>{i.props.overflowSuffix=o},debug:(i,o)=>{i.props.debug=o}};class Xo{constructor(o){d(this,"stage");d(this,"set");this.stage=o;const e={...ti,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([s,t])=>[s,(l,r)=>{l.props[s]!==r&&(t(l,r),this.stage.requestRender())}])))}setStatus(o,e,s){o.status!==e&&(o.status=e,o.emitter.emit(e,s))}scheduleUpdateState(o){o.updateScheduled||(o.updateScheduled=!0,queueMicrotask(()=>{o.updateScheduled=!1,this.updateState(o)}))}}const oi=24;function si(i,o,e,s,t,l,r,n,a){const c=Math.min(Math.max(r.firstLineIdx,0),n.length),f=0;let u=0;s==="middle"?u=(o-i)/2:s==="bottom"&&(u=o-i);const h=t/l+c*o+u;if(!(a&&h>=a/l))return{sdfX:f,sdfY:h,lineIndex:c}}class st{constructor(o,e=0){d(this,"iterator");d(this,"peekBuffer",[]);d(this,"_lastIndex");this.iterator=o,this.iterator=o,this._lastIndex=e-1,this.peekBuffer=[]}next(){const o=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return o.done?this._lastIndex=-1:this._lastIndex++,o}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const o=this.iterator.next();return this.peekBuffer.push(o),o}get lastIndex(){return this._lastIndex}}function*it(i,o=0){let e=o;for(;e<i.length;){const s=i.codePointAt(e);if(s===void 0)throw new Error("Invalid Unicode code point");yield s,e+=s<=65535?1:2}}function ii(i,o,e){const s=e.shapeText(o,new st(it(i,0),0));let t=0;for(const l of s)l.mapped&&(t+=l.xAdvance);return t}function ni(i,o,e,s,t,l,r,n,a,c,f,u,g,h,p,m,y,b,v){p.loaded,p.data,p.shaper;const S=n/p.data.info.size,I=a/S,k=l/S,E=c/S,x=g[i],_=(x==null?void 0:x.codepointIndex)||0,A=(x==null?void 0:x.maxX)||0,R=(x==null?void 0:x.maxY)||0;let M=A,z=R,P=o,F=e,w=0;const T={codepointIndex:-1,bufferOffset:-1,xStart:-1},L=p.shaper,O={letterSpacing:E};let N=L.shapeText(O,new st(it(s,_),_)),$,B=-1;const U=[],X=r/S,H=ii(b,O,L);let W=!0;for(;W;){const Q=(v===0||i+1<v)&&(u!=="both"||y||F+I+I<=X),V=Q?k:k-H;let G=0;const J=F+I>=h.y1,te=F<=h.y2,Z=J&&te;for(;($=N.next())&&!$.done;){const K=$.value;if(i===g.length)g.push({codepointIndex:K.cluster,maxY:z,maxX:M});else if(i>g.length)throw new Error("Unexpected lineCache length");if(K.codepoint===32||K.codepoint===10?T.codepointIndex!==-1&&(T.codepointIndex=-1,G=P):T.codepointIndex===-1&&(T.codepointIndex=K.cluster,T.bufferOffset=w,T.xStart=G),K.mapped){const ue=P+K.xOffset+K.width;if(u!=="none"&&ue>=V&&T.codepointIndex!==-1&&T.codepointIndex<K.cluster&&T.xStart>0)if(Q){N=L.shapeText(O,new st(it(s,T.codepointIndex),T.codepointIndex)),w=T.bufferOffset;break}else N=L.shapeText(O,new st(it(b,0),0)),P=T.xStart,w=T.bufferOffset;else{const re=P+K.xOffset,he=F+K.yOffset;if(Z){B===-1&&(B=w);const Te=p.getAtlasEntry(K.glyphId),ve=Te.x/p.data.common.scaleW,pe=Te.y/p.data.common.scaleH,Se=Te.width/p.data.common.scaleW,Pe=Te.height/p.data.common.scaleH;f[w++]=re,f[w++]=he,f[w++]=ve,f[w++]=pe,f[w++]=re+K.width,f[w++]=he,f[w++]=ve+Se,f[w++]=pe,f[w++]=re,f[w++]=he+K.height,f[w++]=ve,f[w++]=pe+Pe,f[w++]=re+K.width,f[w++]=he+K.height,f[w++]=ve+Se,f[w++]=pe+Pe}z=Math.max(z,he+K.height),P+=K.xAdvance,M=Math.max(M,P)}}else if(K.codepoint===10){if(Q)break;N=L.shapeText(O,new st(it(b,0),0)),u="none"}}B!==-1&&(U.push({bufferStart:B,bufferEnd:w}),B=-1),P=0,F+=I,i++,T.codepointIndex=-1,G=0,!m&&u==="both"&&F>h.y2||$&&$.done?W=!1:Q||(W=!1)}if(t==="center"){const Q=u==="none"?M:k;for(let V=0;V<U.length;V++){const G=U[V],J=f[G.bufferEnd-4]-f[G.bufferStart],te=(Q-J)/2;for(let Z=G.bufferStart;Z<G.bufferEnd;Z+=4)f[Z]+=te}}else if(t==="right"){const Q=u==="none"?M:k;for(let V=0;V<U.length;V++){const G=U[V],J=G.bufferEnd===G.bufferStart?0:f[G.bufferEnd-4]-f[G.bufferStart],te=Q-J;for(let Z=G.bufferStart;Z<G.bufferEnd;Z+=4)f[Z]+=te}}return{bufferNumFloats:w,bufferNumQuads:w/16,layoutNumCharacters:$.done?s.length-_:$.value.cluster-_+1,fullyProcessed:!!$.done,maxX:M,maxY:z}}function ri(i,o){return Math.ceil(i/o)*o}function li(i,o){return Math.floor(i/o)*o}function ai(i,o,e,s,t,l,r,n){const{screen:a,sdf:c}=i;if(!Rs(r))a.x1=0,a.y1=0,a.x2=0,a.y2=0,c.x1=0,c.y1=0,c.x2=0,c.y2=0,i.numLines=0,i.firstLineIdx=0;else{const f=r.x1-o,u=f+(r.x2-r.x1),g=r.y1-e+s,h=li(g-l,t||1),p=ri(g+(r.y2-r.y1)+l,t||1);a.x1=f,a.y1=h,a.x2=u,a.y2=p,c.x1=f/n,c.y1=h/n,c.x2=u/n,c.y2=p/n,i.numLines=Math.ceil((p-h)/t),i.firstLineIdx=Math.floor(h/t)}i.valid=!0}const fi=je(0,0,0,0);class ci extends Xo{constructor(e){super(e);d(this,"ssdfFontFamilies",{});d(this,"msdfFontFamilies",{});d(this,"sdfShader");d(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,s)=>{e.props.fontFamily=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,s)=>{e.props.fontWeight=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,s)=>{e.props.fontStyle=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,s)=>{e.props.fontStretch=s,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontSize:(e,s)=>{e.props.fontSize=s,this.invalidateLayoutCache(e)},text:(e,s)=>{e.props.text=s,this.invalidateLayoutCache(e)},textAlign:(e,s)=>{e.props.textAlign=s,this.invalidateLayoutCache(e)},color:(e,s)=>{e.props.color=s},x:(e,s)=>{e.props.x=s,this.invalidateVisibleWindowCache(e)},y:(e,s)=>{e.props.y=s,this.invalidateVisibleWindowCache(e)},contain:(e,s)=>{e.props.contain=s,this.invalidateLayoutCache(e)},width:(e,s)=>{e.props.width=s,this.invalidateLayoutCache(e)},height:(e,s)=>{e.props.height=s,this.invalidateLayoutCache(e)},offsetY:(e,s)=>{e.props.offsetY=s,this.invalidateLayoutCache(e)},scrollable:(e,s)=>{e.props.scrollable=s,this.invalidateLayoutCache(e)},scrollY:(e,s)=>{e.props.scrollY=s,this.scheduleUpdateState(e)},letterSpacing:(e,s)=>{e.props.letterSpacing=s,this.invalidateLayoutCache(e)},lineHeight:(e,s)=>{e.props.lineHeight=s,this.invalidateLayoutCache(e)},maxLines:(e,s)=>{e.props.maxLines=s,this.invalidateLayoutCache(e)},textBaseline:(e,s)=>{e.props.textBaseline=s,this.invalidateLayoutCache(e)},verticalAlign:(e,s)=>{e.props.verticalAlign=s,this.invalidateLayoutCache(e)},overflowSuffix:(e,s)=>{e.props.overflowSuffix=s,this.invalidateLayoutCache(e)},debug:(e,s)=>{e.props.debug=s}}}canRenderFont(e){const{fontFamily:s}=e;return s in this.ssdfFontFamilies||s in this.msdfFontFamilies||s==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof us}addFontFace(e){const s=e.fontFamily,t=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!t){console.warn(`Invalid font face type: ${e.type}`);return}let l=t[s];l||(l=new Set,t[s]=l),l.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new Ee,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:s}=e;const{textH:t,lineCache:l,debugData:r,forceFullLayoutCalc:n}=e;if(r.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!s&&(s=this.resolveFontFace(e.props),e.trFontFace=s,!s)){const L=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;console.error(L),this.setStatus(e,"failed",new Error(L));return}if(!s.loaded){s.once("loaded",()=>{this.scheduleUpdateState(e)});return}s.data;const{text:a,fontSize:c,x:f,y:u,contain:g,width:h,height:p,lineHeight:m,verticalAlign:y,scrollable:b,overflowSuffix:v,maxLines:S}=e.props,I=g==="both"&&b?e.props.scrollY:0,{renderWindow:k}=e,E=s.data.info.size,x=c/E,_=m/x;e.distanceRange=x*s.data.distanceField.distanceRange;const A=a.length*oi;let R=e.vertexBuffer;(!R||R.length<A)&&(R=new Float32Array(A*2));const M=e.visibleWindow;if(!M.valid){const L=je(f,u,g!=="none"?f+h:1/0,g==="both"?u+p:1/0,fi);No(this.rendererBounds,L,e.visibleWindow),M.valid=!0}if(!n&&k.valid){const L=k.screen;if(f+L.x1<=M.x1&&f+L.x2>=M.x2&&u-I+L.y1<=M.y1&&u-I+L.y2>=M.y2){this.setStatus(e,"loaded");return}k.valid=!1,this.setStatus(e,"loading")}const{offsetY:z,textAlign:P}=e.props;k.valid||ai(k,f,u,I,m,M.y2-M.y1,M,x);const F=si(E,_,m,y,z,x,k,l,t);if(!F){this.setStatus(e,"loaded");return}const{letterSpacing:w}=e.props,T=ni(F.lineIndex,F.sdfX,F.sdfY,a,P,h,p,c,m,w,R,g,l,k.sdf,s,n,b,v,S);e.bufferUploaded=!1,e.bufferNumFloats=T.bufferNumFloats,e.bufferNumQuads=T.bufferNumQuads,e.vertexBuffer=R,e.renderWindow=k,r.lastLayoutNumCharacters=T.layoutNumCharacters,r.bufferSize=R.byteLength,T.fullyProcessed&&(e.textW=T.maxX*x,e.textH=T.maxY*x),this.setStatus(e,"loaded")}renderQuads(e,s,t,l){var _,A;if(!e.vertexBuffer)return;const{renderer:r}=this.stage,{fontSize:n,color:a,contain:c,scrollable:f,zIndex:u,debug:g}=e.props,h=c==="both"&&f?e.props.scrollY:0,{textW:p=0,textH:m=0,distanceRange:y,vertexBuffer:b,bufferUploaded:v,trFontFace:S}=e;let{webGlBuffers:I}=e;if(!I){const R=r.glw,M=4*Float32Array.BYTES_PER_ELEMENT,z=R.createBuffer();e.webGlBuffers=new Uo([{buffer:z,attributes:{a_position:{name:"a_position",size:2,type:R.FLOAT,normalized:!1,stride:M,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:R.FLOAT,normalized:!1,stride:M,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,e.webGlBuffers,I=e.webGlBuffers}if(!v){const R=r.glw,M=(I==null?void 0:I.getBuffer("a_textureCoordinate"))??null;R.arrayBufferData(M,b,R.STATIC_DRAW),e.bufferUploaded=!0}if(f&&c==="both"){const R={x:e.visibleWindow.x1,y:e.visibleWindow.y1,width:e.visibleWindow.x2-e.visibleWindow.x1,height:e.visibleWindow.y2-e.visibleWindow.y1};t=t?eo(t,R):R}const k=new zo(r.glw,r.options,I,this.sdfShader,{transform:s.data,color:Ss(a,l),size:n/(((_=S.data)==null?void 0:_.info.size)||0),scrollY:h,distanceRange:y,debug:g.sdfShaderDebug},l,t,{height:m,width:p},0,u),E=(A=e.trFontFace)==null?void 0:A.texture,x=this.stage.txManager.getCtxTexture(E);k.addTexture(x),k.length=e.bufferNumFloats,k.numQuads=e.bufferNumQuads,r.addRenderOp(k)}resolveFontFace(e){return Wo.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.visibleWindow.valid=!1,e.renderWindow.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}}const uo=2048;class di{constructor(o,e){d(this,"_canvas");d(this,"_context");d(this,"_settings");d(this,"renderInfo");this._canvas=o,this._context=e,this._settings=this.mergeDefaults({})}set settings(o){this._settings=this.mergeDefaults(o)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const o=[this._settings.fontFace],e=[];for(let s=0,t=o.length;s<t;s++)o[s]==="serif"||o[s]==="sans-serif"?e.push(o[s]):e.push(`"${o[s]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const o=this._getFontSetting();try{if(!document.fonts.check(o,this._settings.text))return document.fonts.load(o,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,o)}).then(()=>{document.fonts.check(o,this._settings.text)||console.warn("[Lightning] Font not found",o)})}catch{console.warn("[Lightning] Can't check font loading for "+o)}}}calculateRenderInfo(){const o={},e=this.getPrecision(),s=this._settings.paddingLeft*e,t=this._settings.paddingRight*e,l=this._settings.fontSize*e;let r=this._settings.offsetY===null?null:this._settings.offsetY*e,n=(this._settings.lineHeight||l)*e;const a=this._settings.w*e,c=this._settings.h*e;let f=this._settings.wordWrapWidth*e;const u=this._settings.cutSx*e,g=this._settings.cutEx*e,h=this._settings.cutSy*e,p=this._settings.cutEy*e,m=(this._settings.letterSpacing||0)*e,y=this._settings.textIndent*e;this.setFontProperties();let b=a||2048/this.getPrecision(),v=b-s;if(v<10&&(b+=10-v,v=10),f||(f=v),this._settings.textOverflow&&!this._settings.wordWrap){let _;switch(this._settings.textOverflow){case"clip":_="";break;case"ellipsis":_=this._settings.overflowSuffix;break;default:_=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,f-y,_)}let S;if(this._settings.wordWrap)S=this.wrapText(this._settings.text,f,m,y);else{S={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const _=S.l.length;for(let A=0;A<_-1;A++)S.n.push(A)}let I=S.l;if(this._settings.maxLines&&I.length>this._settings.maxLines){const _=I.slice(0,this._settings.maxLines);let A=null;if(this._settings.overflowSuffix){const F=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,w=this.wrapText(_[_.length-1],f-F,m,y);_[_.length-1]=`${w.l[0]}${this._settings.overflowSuffix}`,A=[w.l.length>1?w.l[1]:""]}else A=[""];let R;const M=I.length;let z=0;const P=S.n.length;for(R=this._settings.maxLines;R<M;R++)A[z]+=`${A[z]?" ":""}${I[R]}`,R+1<P&&S.n[R+1]&&z++;o.remainingText=A.join(`
`),o.moreTextLines=!0,I=_}else o.moreTextLines=!1,o.remainingText="";let k=0;const E=[];for(let _=0;_<I.length;_++){const A=this.measureText(I[_],m)+(_===0?y:0);E.push(A),k=Math.max(k,A)}o.lineWidths=E,a||(b=k+s+t,v=k),n=n||l;let x;if(c)x=c;else{const _=this._settings.textBaseline!="bottom"?.5*l:0;x=n*(I.length-1)+_+Math.max(n,l)+(r||0)}return r===null&&(r=l),o.w=b,o.h=x,o.lines=I,o.precision=e,b||(b=1),x||(x=1),(u||g)&&(b=Math.min(b,g-u)),(h||p)&&(x=Math.min(x,p-h)),o.width=b,o.innerWidth=v,o.height=x,o.fontSize=l,o.cutSx=u,o.cutSy=h,o.cutEx=g,o.cutEy=p,o.lineHeight=n,o.lineWidths=E,o.offsetY=r,o.paddingLeft=s,o.paddingRight=t,o.letterSpacing=m,o.textIndent=y,o}draw(o,e){const s=this.getPrecision(),t=(e==null?void 0:e.lines)||o.lines,l=(e==null?void 0:e.lineWidths)||o.lineWidths,r=e?e.lines.length*o.lineHeight:o.height;this._canvas.width=Math.min(Math.ceil(o.width+this._settings.textRenderIssueMargin),uo),this._canvas.height=Math.min(Math.ceil(r),uo),this.setFontProperties(),o.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(o.cutSx||o.cutSy)&&this._context.translate(-o.cutSx,-o.cutSy);let n,a;const c=[];for(let u=0,g=t.length;u<g;u++)n=u===0?o.textIndent:0,a=u*o.lineHeight+o.offsetY,this._settings.verticalAlign=="middle"?a+=(o.lineHeight-o.fontSize)/2:this._settings.verticalAlign=="bottom"&&(a+=o.lineHeight-o.fontSize),this._settings.textAlign==="right"?n+=o.innerWidth-l[u]:this._settings.textAlign==="center"&&(n+=(o.innerWidth-l[u])/2),n+=o.paddingLeft,c.push({text:t[u],x:n,y:a,w:l[u]});if(this._settings.highlight){const u=this._settings.highlightColor,g=this._settings.highlightHeight*s||o.fontSize*1.5,h=this._settings.highlightOffset*s,p=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*s:o.paddingLeft,m=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*s:o.paddingRight;this._context.fillStyle=At(u);for(let y=0;y<c.length;y++){const b=c[y];this._context.fillRect(b.x-p,b.y-o.offsetY+h,b.w+m+p,g)}}let f=null;this._settings.shadow&&(f=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=At(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*s,this._context.shadowOffsetY=this._settings.shadowOffsetY*s,this._context.shadowBlur=this._settings.shadowBlur*s),this._context.fillStyle=At(this._settings.textColor);for(let u=0,g=c.length;u<g;u++){const h=c[u];if(o.letterSpacing===0)this._context.fillText(h.text,h.x,h.y);else{const p=h.text.split("");let m=h.x;for(let y=0,b=p.length;y<b;y++)this._context.fillText(p[y],m,h.y),m+=this.measureText(p[y],o.letterSpacing)}}f&&(this._context.shadowColor=f[0],this._context.shadowOffsetX=f[1],this._context.shadowOffsetY=f[2],this._context.shadowBlur=f[3]),(o.cutSx||o.cutSy)&&this._context.translate(o.cutSx,o.cutSy),this.renderInfo=o}wrapWord(o,e,s){const t=this._context.measureText(s).width,l=o.length,r=this._context.measureText(o).width;if(r<=e)return o;let n=Math.floor(e*l/r),a=this._context.measureText(o.substring(0,n)).width+t;if(a>e)for(;n>0&&(a=this._context.measureText(o.substring(0,n)).width+t,a>e);)n-=1;else for(;n<l;)if(a=this._context.measureText(o.substring(0,n)).width+t,a<e)n+=1;else{n-=1;break}return o.substring(0,n)+(e>=t?s:"")}wrapText(o,e,s,t=0){const l=o.split(/\r?\n/g);let r=[];const n=[];for(let a=0;a<l.length;a++){const c=[];let f="",u=e-t;const g=l[a].split(" ");for(let h=0;h<g.length;h++){const p=this.measureText(g[h],s),m=p+this.measureText(" ",s);h===0||m>u?(h>0&&(c.push(f),f=""),f+=g[h],u=e-p-(h===0?t:0)):(u-=m,f+=` ${g[h]}`)}c.push(f),f="",r=r.concat(c),a<l.length-1&&n.push(r.length)}return{l:r,n}}measureText(o,e=0){return e?o.split("").reduce((s,t)=>s+this._context.measureText(t).width+e,0):this._context.measureText(o).width}mergeDefaults(o){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...o}}}const ho=typeof self>"u"?globalThis:self;var Ao;const po=((Ao=ho.document)==null?void 0:Ao.fonts)||ho.fonts;function ui(i){const{fontFamily:o,fontStyle:e,fontWeight:s,fontStretch:t,fontSize:l}=i;return[e,s,t,`${l}px`,o].join(" ")}const hi=je(0,0,0,0);class pi extends Xo{constructor(e){super(e);d(this,"canvas");d(this,"context");d(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let s=this.canvas.getContext("2d");s||(this.canvas=document.createElement("canvas"),s=this.canvas.getContext("2d")),this.context=s,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,s)=>{e.props.fontFamily=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,s)=>{e.props.fontWeight=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,s)=>{e.props.fontStyle=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,s)=>{e.props.fontStretch=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,s)=>{e.props.fontSize=s,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,s)=>{e.props.text=s,this.invalidateLayoutCache(e)},textAlign:(e,s)=>{e.props.textAlign=s,this.invalidateLayoutCache(e)},color:(e,s)=>{e.props.color=s,this.invalidateLayoutCache(e)},x:(e,s)=>{e.props.x=s,this.invalidateVisibleWindowCache(e)},y:(e,s)=>{e.props.y=s,this.invalidateVisibleWindowCache(e)},contain:(e,s)=>{e.props.contain=s,this.invalidateLayoutCache(e)},width:(e,s)=>{e.props.width=s,this.invalidateLayoutCache(e)},height:(e,s)=>{e.props.height=s,this.invalidateLayoutCache(e)},offsetY:(e,s)=>{e.props.offsetY=s,this.invalidateLayoutCache(e)},scrollY:(e,s)=>{e.props.scrollY=s},letterSpacing:(e,s)=>{e.props.letterSpacing=s,this.invalidateLayoutCache(e)},lineHeight:(e,s)=>{e.props.lineHeight=s,this.invalidateLayoutCache(e)},maxLines:(e,s)=>{e.props.maxLines=s,this.invalidateLayoutCache(e)},textBaseline:(e,s)=>{e.props.textBaseline=s,this.invalidateLayoutCache(e)},verticalAlign:(e,s)=>{e.props.verticalAlign=s,this.invalidateLayoutCache(e)},overflowSuffix:(e,s)=>{e.props.overflowSuffix=s,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof hs}addFontFace(e){po.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new Ee,canvasPages:void 0,lightning2TextRenderer:new di(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const p=ui(e.props);if(e.fontInfo={cssString:p,loaded:!1},!e.fontInfo.loaded){po.load(p).then(this.onFontLoaded.bind(this,e,p)).catch(this.onFontLoadError.bind(this,e,p));return}}if(!e.fontInfo.loaded)return;e.renderInfo||(e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:be(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:e.props.maxLines,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0);const{x:s,y:t,width:l,height:r,scrollY:n,contain:a}=e.props,{visibleWindow:c}=e;let{renderWindow:f,canvasPages:u}=e;if(!c.valid){const p=je(s,t,a!=="none"?s+l:1/0,a==="both"?t+r:1/0,hi);No(this.rendererBounds,p,c),c.valid=!0}const g=c.y2-c.y1,h=Math.ceil(g/e.renderInfo.lineHeight);if(g===0){u=void 0,f=void 0,this.setStatus(e,"loaded");return}else if(f&&u){const p=s+f.x1,m=t-n+f.y1,y=s+f.x2,b=t-n+f.y2;if(p<=c.x1&&y>=c.x2&&m<=c.y1&&b>=c.y2){this.setStatus(e,"loaded");return}b<c.y2?(f.y1+=h*e.renderInfo.lineHeight,f.y2+=h*e.renderInfo.lineHeight,u.push(u.shift()),u[2].lineNumStart=u[1].lineNumStart+h,u[2].lineNumEnd=u[2].lineNumStart+h,u[2].valid=!1):m>c.y1&&(f.y1-=h*e.renderInfo.lineHeight,f.y2-=h*e.renderInfo.lineHeight,u.unshift(u.pop()),u[0].lineNumStart=u[1].lineNumStart-h,u[0].lineNumEnd=u[0].lineNumStart+h,u[0].valid=!1)}else{const p=e.renderInfo.lineHeight*h,m=Math.ceil(n/p),y=m*h,b=y-h,v=y+h;u=[{texture:u==null?void 0:u[0].texture,lineNumStart:b,lineNumEnd:b+h,valid:!1},{texture:u==null?void 0:u[1].texture,lineNumStart:y,lineNumEnd:y+h,valid:!1},{texture:u==null?void 0:u[2].texture,lineNumStart:v,lineNumEnd:v+h,valid:!1}],e.canvasPages=u;const S=m*p;f={x1:0,y1:S-p,x2:l,y2:S+p*2}}e.renderWindow=f,performance.now();for(const p of u)if(!p.valid){if(p.lineNumStart<0){p.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),p.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(p.lineNumStart,p.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(p.lineNumStart,p.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(p.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),p.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,s,t,l){var _,A,R,M,z,P,F,w,T,L,O,N;const{stage:r}=this,{canvasPages:n,textW:a=0,textH:c=0,renderWindow:f}=e;if(!n||!f)return;const{x:u,y:g,scrollY:h,contain:p,width:m,height:y}=e.props,b={x:u,y:g,width:p!=="none"?m:a,height:p==="both"?y:c};eo({x:0,y:0,width:r.options.appWidth,height:r.options.appHeight},b);const S=(f.y2-f.y1)/3,{zIndex:I,color:k}=e.props,E=l*ks(k),x=et(4294967295,E);n[0].valid&&this.stage.renderer.addQuad({alpha:E,clippingRect:t,colorBl:x,colorBr:x,colorTl:x,colorTr:x,width:((A=(_=n[0].texture)==null?void 0:_.dimensions)==null?void 0:A.width)||0,height:((M=(R=n[0].texture)==null?void 0:R.dimensions)==null?void 0:M.height)||0,texture:n[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:s.tx,ty:s.ty-h+f.y1,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td}),n[1].valid&&this.stage.renderer.addQuad({alpha:E,clippingRect:t,colorBl:x,colorBr:x,colorTl:x,colorTr:x,width:((P=(z=n[1].texture)==null?void 0:z.dimensions)==null?void 0:P.width)||0,height:((w=(F=n[1].texture)==null?void 0:F.dimensions)==null?void 0:w.height)||0,texture:n[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:s.tx,ty:s.ty-h+f.y1+S,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td}),n[2].valid&&this.stage.renderer.addQuad({alpha:E,clippingRect:t,colorBl:x,colorBr:x,colorTl:x,colorTr:x,width:((L=(T=n[2].texture)==null?void 0:T.dimensions)==null?void 0:L.width)||0,height:((N=(O=n[2].texture)==null?void 0:O.dimensions)==null?void 0:N.height)||0,texture:n[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:s.tx,ty:s.ty-h+f.y1+S+S,ta:s.ta,tb:s.tb,tc:s.tc,td:s.td})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,s){var t;s!==((t=e.fontInfo)==null?void 0:t.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,s,t){var l;s!==((l=e.fontInfo)==null?void 0:l.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,t),this.scheduleUpdateState(e))}}const mi=2e6;class gi extends Ee{constructor(e){super();d(this,"options");d(this,"animationManager");d(this,"txManager");d(this,"fontManager");d(this,"textRenderers");d(this,"shManager");d(this,"renderer");d(this,"root");d(this,"deltaTime",0);d(this,"lastFrameTime",0);d(this,"currentFrameTime",0);d(this,"fpsNumFrames",0);d(this,"fpsElapsedTime",0);d(this,"renderRequested",!1);d(this,"contextSpy",null);this.options=e;const{canvas:s,clearColor:t,rootId:l,debug:r,appWidth:n,appHeight:a,enableContextSpy:c,numImageWorkers:f}=e;this.txManager=new ei(f),this.shManager=new Gs,this.animationManager=new Zs,this.contextSpy=c?new qs:null,r!=null&&r.monitorTextureCache&&setInterval(()=>{this.txManager;const g=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",g.idCacheSize),console.log("Texture Key Cache Size: ",g.keyCacheSize)},1e3),this.renderer=new Qs({stage:this,canvas:s,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:t??4278190080,bufferMemory:mi,txManager:this.txManager,shManager:this.shManager,contextSpy:this.contextSpy}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new pi(this),sdf:new ci(this)},this.fontManager=new Wo(this.textRenderers);const u=new to(this,{id:l,x:0,y:0,width:n,height:a,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=u,Ls(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=$s(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){var l,r;const{renderer:e,renderRequested:s}=this;this.root.updateType!==0&&this.root.update(this.deltaTime),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),s&&(this.renderRequested=!1);const{fpsUpdateInterval:t}=this.options;if(t&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=t)){const n=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:n,contextSpyData:((l=this.contextSpy)==null?void 0:l.getData())??null}),(r=this.contextSpy)==null||r.reset()}}addQuads(e){this.renderer&&e.globalTransform,e.isRenderable&&e.renderQuads(this.renderer);for(let s=0;s<e.children.length;s++){const t=e.children[s];t&&(t==null?void 0:t.worldAlpha)!==0&&this.addQuads(t)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,s=null){let t=s,l=!1;if(t){const n=this.textRenderers[t];n?n.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${t}' for font`,e),t=null,l=!0):(console.warn(`Text renderer override '${t}' not found.`),t=null,l=!0)}if(!t){for(const[n,a]of Object.entries(this.textRenderers))if(n!=="canvas"&&a.canRenderFont(e)){t=n;break}t||(t="canvas")}return l&&console.warn(`Falling back to text renderer ${String(t)}`),this.textRenderers[t]}}class yi extends to{constructor(e,s){super(e,s);d(this,"textRenderer");d(this,"trState");d(this,"_textRendererOverride",null);d(this,"onTextLoaded",()=>{const{contain:e}=this,s=this.trState.props.width,t=this.trState.props.height,l=this.trState.textW||0,r=this.trState.textH||0;e==="both"?(this.props.width=s,this.props.height=t):e==="width"?(this.props.width=s,this.props.height=r):e==="none"&&(this.props.width=l,this.props.height=r),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});d(this,"onTextFailed",(e,s)=>{this.emit("failed",{type:"text",error:s})});this._textRendererOverride=s.textRendererOverride;const{resolvedTextRenderer:t,textRendererState:l}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:s.width,height:s.height,textAlign:s.textAlign,color:s.color,zIndex:s.zIndex,contain:s.contain,scrollable:s.scrollable,scrollY:s.scrollY,offsetY:s.offsetY,letterSpacing:s.letterSpacing,debug:s.debug,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStretch:s.fontStretch,fontStyle:s.fontStyle,fontWeight:s.fontWeight,text:s.text,lineHeight:s.lineHeight,maxLines:s.maxLines,textBaseline:s.textBaseline,verticalAlign:s.verticalAlign,overflowSuffix:s.overflowSuffix},void 0);this.textRenderer=t,this.trState=l}get width(){return this.trState.props.width}set width(e){this.textRenderer.set.width(this.trState,e)}get height(){return this.trState.props.height}set height(e){this.textRenderer.set.height(this.trState,e)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e),this.checkIsRenderable()}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e;const{resolvedTextRenderer:s,textRendererState:t}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=s,this.trState=t}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,s=null){super.update(e,s),this.globalTransform,this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkIsRenderable(){return super.checkIsRenderable()?!0:this.trState.props.text!==""?this.isRenderable=!0:this.isRenderable=!1}renderQuads(e){this.globalTransform,this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}resolveTextRendererAndState(e,s){const t=this.stage.resolveTextRenderer(e,this._textRendererOverride),l=t.createState(e);return s&&["loading","loaded","failed"].forEach(n=>{s.emitter.off(n)}),l.emitter.on("loaded",this.onTextLoaded),l.emitter.on("failed",this.onTextFailed),t.scheduleUpdateState(l),{resolvedTextRenderer:t,textRendererState:l}}}class xi extends Ut{constructor(o,e,s){super(o,e,s,new yi(s,{id:oo(),x:o.x,y:o.y,width:o.width,height:o.height,alpha:o.alpha,clipping:o.clipping,color:o.color,colorTop:o.colorTop,colorBottom:o.colorBottom,colorLeft:o.colorLeft,colorRight:o.colorRight,colorTl:o.colorTl,colorTr:o.colorTr,colorBl:o.colorBl,colorBr:o.colorBr,zIndex:o.zIndex,zIndexLocked:o.zIndexLocked,scaleX:o.scaleX,scaleY:o.scaleY,mountX:o.mountX,mountY:o.mountY,mount:o.mount,pivot:o.pivot,pivotX:o.pivotX,pivotY:o.pivotY,rotation:o.rotation,text:o.text,fontSize:o.fontSize,fontFamily:o.fontFamily,fontWeight:o.fontWeight,fontStretch:o.fontStretch,fontStyle:o.fontStyle,contain:o.contain,scrollable:o.scrollable,letterSpacing:o.letterSpacing,textAlign:o.textAlign,scrollY:o.scrollY,offsetY:o.offsetY,textRendererOverride:o.textRendererOverride,lineHeight:o.lineHeight,maxLines:o.maxLines,textBaseline:o.textBaseline,verticalAlign:o.verticalAlign,overflowSuffix:o.overflowSuffix,debug:o.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(o){this.coreNode.text=o}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(o){this.coreNode.textRendererOverride=o}get fontSize(){return this.coreNode.fontSize}set fontSize(o){this.coreNode.fontSize=o}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(o){this.coreNode.fontFamily=o}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(o){this.coreNode.fontWeight=o}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(o){this.coreNode.fontStretch=o}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(o){this.coreNode.fontStyle=o}get textAlign(){return this.coreNode.textAlign}set textAlign(o){this.coreNode.textAlign=o}get contain(){return this.coreNode.contain}set contain(o){this.coreNode.contain=o}get scrollable(){return this.coreNode.scrollable}set scrollable(o){this.coreNode.scrollable=o}get scrollY(){return this.coreNode.scrollY}set scrollY(o){this.coreNode.scrollY=o}get offsetY(){return this.coreNode.offsetY}set offsetY(o){this.coreNode.offsetY=o}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(o){this.coreNode.letterSpacing=o}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(o){o&&(this.coreNode.lineHeight=o)}get maxLines(){return this.coreNode.maxLines}set maxLines(o){o&&(this.coreNode.maxLines=o)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(o){o&&(this.coreNode.textBaseline=o)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(o){o&&(this.coreNode.verticalAlign=o)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(o){o&&(this.coreNode.overflowSuffix=o)}get debug(){return this.coreNode.debug}set debug(o){this.coreNode.debug=o}}const bi="modulepreload",Si=function(i){return"/"+i},mo={},Yo=function(o,e,s){if(!e||e.length===0)return o();const t=document.getElementsByTagName("link");return Promise.all(e.map(l=>{if(l=Si(l),l in mo)return;mo[l]=!0;const r=l.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(!!s)for(let f=t.length-1;f>=0;f--){const u=t[f];if(u.href===l&&(!r||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${n}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":bi,r||(c.as="script",c.crossOrigin=""),c.href=l,document.head.appendChild(c),r)return new Promise((f,u)=>{c.addEventListener("load",f),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>o()).catch(l=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=l,window.dispatchEvent(r),!r.defaultPrevented)throw l})};function wi(i){return i.prototype instanceof ps}async function Ci(i,o){let e;try{console.log("Loading core extension",i),e=await Yo(()=>import(i),[])}catch(t){console.error(`The core extension module at '${i}' could not be loaded.`),console.error(t);return}if(!e.default){console.error(`The core extension module at '${i}' does not have a default export.`);return}const s=e.default;if(wi(s)){const t=new s;try{await t.run(o)}catch(l){console.error(`The core extension at '${i}' threw an error.`),console.error(l)}}else console.error(`The core extension at '${i}' does not extend CoreExtension.`)}class Ti{constructor(){d(this,"root",null);d(this,"stage",null);d(this,"rendererMain",null)}async init(o,e,s){this.stage=new gi({rootId:oo(),appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:s,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,debug:{monitorTextureCache:!1}}),this.rendererMain=o,this.stage.root;const t=new Ut(o.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=t,t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),e.coreExtensionModule&&await Ci(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(l,r)=>{this.onFpsUpdate(r)})}createNode(o){this.rendererMain,this.stage;const e=new Ut(o,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(o){this.rendererMain,this.stage;const e=new xi(o,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(o){o.destroy()}releaseTexture(o){const{stage:e}=this;e.txManager.removeTextureIdFromCache(o)}getRootNode(){return this.root,this.root}onCreateNode(o){throw new Error("Method not implemented.")}onBeforeDestroyNode(o){throw new Error("Method not implemented.")}onFpsUpdate(o){throw new Error("Method not implemented.")}}const ut=()=>{},Lt=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Ho=i=>{const o=Ve.get("debugLevel"),e={};return Object.defineProperty(e,"info",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("info")>-1)&&console.info.bind(window.console,`%c  ${i} %c ${Lt()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||ut}}),Object.defineProperty(e,"warn",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c  ${i} %c ${Lt()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||ut}}),Object.defineProperty(e,"error",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("error")>-1)&&console.error.bind(window.console,`%c  ${i} %c ${Lt()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||ut}}),Object.defineProperty(e,"debug",{get(){return(o>=2||Array.isArray(o)&&o.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c  ${i} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||ut}}),e};let ee;const vi=()=>{ee=Ho("Blits")},go={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2};let Ce;const _i=(i,o,e)=>{Ve.set(e),vi();const s=new Ti;Ce=new Ts({appWidth:e.w||1920,appHeight:e.h||1080,coreExtensionModule:e.fontLoader,deviceLogicalPixelRatio:e.pixelRatio||go[e.screenResolution]||go[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in e?e.webWorkersLimit:window.navigator.hardwareConcurrency||2},o,s);const t=()=>{let l=i();l.quit=()=>{ee.info("Closing App"),l.destroy(),l=null,Ce=null}};Ce.init().then(()=>t())},yo={aliceblue:4042850303,antiquewhite:4209760255,aqua:4294967040,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,transparent:0,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},$t={normalize(i=""){if(i=i.toString(),i.startsWith("0x"))return i;const o=/rgba?\((.+)\)/gi,e=/hsla?\((.+)\)/gi;if(o.test(i)){const s=new RegExp(o).exec(i);if(s[1])return i=s[1].split(",").map((t,l)=>(l==3&&(t=Math.min(Math.max(Math.round(t*255),0),255)),parseInt(t).toString(16).padStart(2,"0"))).join(""),i.padEnd(8,"f").padStart(10,"0x")}else{if(e.test(i))return ee.warn("HSL(A) color format is not supported yet"),4294967295;if(i in yo)return yo[i];i.startsWith("#")&&(i=i.substring(1))}return i.length===3&&(i=i.split("").map(s=>s+s).join("")),i.padEnd(8,"f").padStart(10,"0x")}},Ii=i=>typeof i=="object"&&"transition"in i,ht=i=>typeof i=="string"&&i.startsWith("{")&&i.endsWith("}"),pt=i=>JSON.parse(i.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),Ne=function(i,o){return typeof i=="string"&&i.endsWith("%")?this.element.node._parent[o]*(parseFloat(i)/100):i},qt=i=>{if(typeof i=="object"&&i.constructor===Object){if("value"in i)return i.value;if("transition"in i)return qt(i.transition)}return i};let xo=!1;const Go={set parent(i){this._props.parent=i==="root"?Ce.root:i.node,this._set.add("parent")},set rotation(i){this._props.rotation=i*(Math.PI/180),this._set.add("rotation")},set w(i){this._props.width=Ne.call(this,i,"width"),this._set.add("width")},set width(i){this._props.width=Ne.call(this,i,"width"),this._set.add("width")},set h(i){this._props.height=Ne.call(this,i,"height"),this._set.add("height")},set height(i){this._props.height=Ne.call(this,i,"height"),this._set.add("height")},set x(i){this._props.x=Ne.call(this,i,"width"),this._set.add("x")},set y(i){this._props.y=Ne.call(this,i,"height"),this._set.add("y")},set z(i){this._props.zIndex=i,this._set.add("zIndex")},set zIndex(i){this._props.zIndex=i,this._set.add("zIndex")},set color(i){if(typeof i=="object"||ht(i)&&(i=pt(i))){const o={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};this._props.color=0,Object.entries(i).forEach(e=>{this._props[o[e[0]]]=$t.normalize(e[1]),this._set.add(o[e[0]])})}else this._props.color=$t.normalize(i);this._set.add("color")},set src(i){this._props.src=i,this._set.has("color")||(this._props.color=4294967295),this._set.add("src")},set texture(i){this._props.texture=i,this._set.has("color")||(this._props.color=4294967295),this._set.add("texture")},set mount(i){typeof i=="object"||ht(i)&&(i=pt(i))?("x"in i&&(this._props.mountX=i.x,this._set.add("mountX")),"y"in i&&(this._props.mountY=i.y,this._set.add("mountY"))):(this._props.mountX=this._props.mountY=i,this._set.add("mountX"),this._set.add("mountY"))},set pivot(i){typeof i=="object"||ht(i)&&(i=pt(i))?("x"in i&&(this._set.add("pivotX"),this._props.pivotX=i.x),"y"in i&&(this._set.add("pivotY"),this._props.pivotY=i.y)):(this._props.pivotX=this._props.pivotY=i,this._set.add("pivotX"),this._set.add("pivotY"))},set scale(i){typeof i=="object"||ht(i)&&(i=pt(i))?("x"in i&&(this._props.scaleX=i.x),"y"in i&&(this._props.scaleY=i.y)):this._props.scale=i,this._set.add("scale")},set show(i){this._props.alpha=i?1:0},set alpha(i){this._props.alpha=i,this._set.add("alpha")},set text(i){this._props.text=i!==void 0?i.toString():""},set effects(i){this._props.shader=Ce.createShader("DynamicShader",{effects:i.map(o=>(o.props&&o.props.color&&(o.props.color=$t.normalize(o.props.color)),o))}),this._set.add("effects")},set fontFamily(i){this._props.fontFamily=i},set fontSize(i){this._props.fontSize=i},set wordWrap(i){this._props.width=i},set contain(i){this._props.contain=i},set maxLines(i){this.height=i*this.element.node.lineHeight},set overflowSuffix(i){this._props.overflowSuffix=i===!1?" ":i===!0?void 0:i},set letterSpacing(i){this._props.letterSpacing=i},set lineHeight(i){this._props.lineHeight=i},set textAlign(i){this._props.textAlign=i}},ki={defaults:{},populate(i){const o={...this.defaults,...this.config,...i};this.initData=i,o[C.isSlot]&&(this[C.isSlot]=!0),this.props.element=this;for(const[e,s]of Object.entries(o)){const t=Object.getOwnPropertyDescriptor(Go,e);t&&t.set&&(this.props[e]=qt(s))}this.props._set.has("color")||(this.props._props.color=this.props._set.has("src")||this.props._set.has("texture")?4294967295:0),xo||(this.props._props.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",xo=!0),this.node=o.__textnode?Ce.createTextNode(this.props._props):Ce.createNode(this.props._props),o["@loaded"]&&this.node.on("loaded",(e,{type:s,dimensions:t})=>{o["@loaded"]({w:t.width,h:t.height,type:s},this)}),o["@error"]&&this.node.on("failed",(e,s)=>{o["@error"](s,this)})},set(i,o){const e=new Set(this.props._set);this.props._props={},this.props[i]=qt(o);for(const[s,t]of Object.entries(this.props._props)){if(Ii(o)&&e.has(s))return this.animate(s,t,o.transition);this.node[s]=t}},animate(i,o,e){if(this.node[i]===o)return Promise.resolve();this.scheduledTransitions[i]&&this.scheduledTransitions[i].f.state==="running"&&(this.scheduledTransitions[i].f.pause(),this.node[i]=this.scheduledTransitions[i].v);const s={};s[i]=o;const t=this.node.animate(s,{duration:typeof e=="object"&&"duration"in e?e.duration:300,easing:typeof e=="object"&&"function"in e?e.function:"ease"});return new Promise(l=>{this.scheduledTransitions[i]={v:s[i],f:t,timeout:setTimeout(()=>{e.start&&typeof e.start=="function"&&e.start.call(this.component,this,i,s[i]);try{t.start().waitUntilStopped().then(()=>delete this.scheduledTransitions[i]).then(()=>{e.end&&typeof e.end=="function"&&e.end.call(this.component,this,i,this.node[i])}).then(l)}catch(r){ee.error(r)}},e.delay||0)}})},delete(){ee.debug("Deleting  Node",this.nodeId),Object.values(this.scheduledTransitions).forEach(i=>{clearTimeout(i.timeout)}),this.node.parent=null},get nodeId(){return this.node&&this.node.id},get ref(){return this.initData.ref||null}},qo=(i,o)=>Object.assign(Object.create(ki),{props:Object.assign(Object.create(Go),{_props:{},_set:new Set}),node:null,scheduledTransitions:{},initData:{},config:i,component:o}),bo={};let Ei=0;const Ri=i=>`BlitsComponent::${i}_${bo[i]=(bo[i]||0)+1}`,Ai=()=>++Ei,ke={},Mi=(i,o,e)=>{ke[o]&&ke[o][i]&&ke[o][i].apply(e)},Li=(i,o,e)=>{const s=C[i];ke[o]&&ke[o][s]&&ke[o][s].apply(e)},$i=(i={},o)=>{ke[o]={},[...Object.keys(i),...Object.getOwnPropertySymbols(i)].forEach(s=>{typeof i[s]=="function"&&(ke[o][s]=i[s])})};let nt=null;const Vt=new WeakMap,Vo=(i,o)=>{if(nt){let e=Vt.get(i);e||(e=new Map,Vt.set(i,e));let s=e.get(o);s||(s=new Set,e.set(o,s)),s.add(nt)}},ct=(i,o,e=!1)=>{const s=Vt.get(i);if(!s)return;const t=s.get(o);t&&t.forEach(l=>{l(e)})},So=i=>{nt=i,nt(),nt=null},Bi=["constructor","includes","indexOf","lastIndexOf","push","pop","shift","splice","unshift","sort","reverse"],Bt=["push","pop","shift","unshift","splice","sort","reverse"],wo=new WeakMap,jt=i=>{const o=wo.get(i);if(o)return o;const e={get(t,l,r){return Array.isArray(t)&&Bi.includes(l)?Reflect.get(t,l,r):(Vo(t,l),t[l]!==null&&typeof t[l]=="object"?jt(t[l]):Reflect.get(t,l,r))},set(t,l,r,n){const a=t[l],c=Reflect.set(t,l,r,n);return typeof c=="object"&&jt(t[l]),(l==="length"||c&&a!==r)&&ct(t,l),c}},s=new Proxy(i,e);return wo.set(i,s),s},jo=i=>(Object.keys(i).forEach(o=>{let e=i[o];if(i[o]!==null&&typeof i[o]=="object"){if(Object.getPrototypeOf(i[o])===Object.prototype)return jo(i[o]);if(Array.isArray(i[o]))for(let s=0;s<Bt.length-1;s++)i[o][Bt[s]]=function(t){Array.prototype[Bt[s]].call(this,t),ct(i,o)}}Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get(){return Vo(i,o),e},set(s){e!==s&&(e=s,ct(i,o))}})}),i),Co=(i,o="Proxy")=>o==="defineProperty"?jo(i):jt(i),Pi={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},_e=window.speechSynthesis,Ni=()=>(window.navigator||{}).userAgent||"",To=()=>/android/i.test(Ni());let Ko=!1,vt=null;const so=()=>vt&&clearTimeout(vt),Kt=i=>{if(!i||vt)return so();_e.pause(),_e.resume(),vt=setTimeout(()=>{Kt(i)},5e3)},Ye={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},zi=()=>{Ye.voice=_e.getVoices()[0],Ko=!0},Fi=(i,o)=>{const e=new SpeechSynthesisUtterance(o.value);e.lang=o.lang||Ye.lang,e.pitch=o.pitch||Ye.pitch,e.rate=o.rate||Ye.rate,e.voice=o.voice||Ye.voice,e.volume=o.volume||Ye.volume,e.onstart=()=>{To()||Kt(e),i.onstart()},e.onresume=()=>{To()||Kt(e),i.onresume()},e.onpause=()=>{i.onpause()},e.onend=()=>{i.onend()},e.onerror=()=>{so(),i.onerror()},_e.speak(e)},wt={speak(i){Ko||zi(),this.cancel(),Fi(this,i)},resume(){_e.resume()},pause(){_e.pause()},cancel(){_e.cancel(),so()},getVoices(){return _e.getVoices()},onend(){},onerror(){},onstart(){},onresume(){},onpause(){}};let vo;const io=(i,o="off")=>{clearTimeout(vo),wt.cancel(),o==="assertive"?wt.speak({value:i}):vo=setTimeout(()=>{wt.speak({value:i})},400)},Oi=i=>io(i,"polite"),Di=i=>io(i,"assertive"),Ui=()=>{wt.cancel()},Qo={speak:io,polite:Oi,assertive:Di,stop:Ui};let no,_t=!1;const Zo=new WeakMap,Jo=[];let es={},Qt=!1,ts;const Wi=()=>(document.location.hash||"/").replace(/^#/,""),Xi=(i,o=[])=>{const e=o.filter(s=>s.path===i).pop();return e&&(e.options={...e.options,...es},no=e),e},Yi=async function(){if(_t=!0,this.parent[C.routes]){const i=no,o=Wi(),e=Xi(o,this.parent[C.routes]);if(e){Qt===!1&&i&&i.options.inHistory===!0&&Jo.push(i),"transition"in e||(e.transition=Pi),typeof e.transition=="function"&&(e.transition=e.transition(i,e));let s,{view:t,focus:l}=Zo.get(e)||{};if(t?s=t[C.wrapper]:(s=qo({parent:this[C.children][0]}),s.populate({}),s.set("w","100%"),s.set("h","100%"),t=await e.component(this[C.props],s,this),t[Symbol.toStringTag]==="Module"&&(t.default&&typeof t.default=="function"?t=t.default(this[C.props],s,this):ee.error("Dynamic import doesn't have a default export or default is not a function")),typeof t=="function"&&(t=t(this[C.props],s,this))),this[C.children].push(t),ts=Ie.get(),l?Ie.set(l):Ie.set(t),e.transition.before)if(Array.isArray(e.transition.before))for(let n=0;n<e.transition.before.length;n++)s.set(e.transition.before[n].prop,e.transition.before[n].value);else s.set(e.transition.before.prop,e.transition.before.value);let r=!1;if(i){r=!0;const n=this[C.children].splice(1,1).pop();n&&Hi(i,n,e.transition.out)}if(e.transition.in)if(Array.isArray(e.transition.in))for(let n=0;n<e.transition.in.length;n++)n===e.transition.length-1?await qe(s,e.transition.in[n],r):qe(s,e.transition.in[n],r);else await qe(s,e.transition.in,r);e.announce&&(typeof e.announce=="string"&&(e.announce={message:e.announce}),Qo.speak(e.announce.message,e.announce.politeness)),this.activeView=this[C.children][this[C.children].length-1]}else ee.error(`Route ${o} not found`)}Qt=!1,_t=!1},Hi=async(i,o,e)=>{if(e)if(Array.isArray(e))for(let s=0;s<e.length;s++)s===e.length-1?await qe(o[C.wrapper],e[s]):qe(o[C.wrapper],e[s]);else await qe(o[C.wrapper],e);if(i.options&&i.options.keepAlive===!0)Zo.set(i,{view:o,focus:ts});else{for(let s=0;s<o[C.children].length-1;s++)o[C.children][s]&&o[C.children][s].destroy&&(o[C.children][s].destroy(),o[C.children][s]=null);o.destroy(),o=null}},qe=(i,o,e=!0)=>e?i.animate(o.prop,o.value,o):i.set(o.prop,o.value),ro=(i,o={})=>{es=o,window.location.hash=`#${i}`},os=()=>{const i=Jo.pop();return i?(Qt=!0,ro(i.path),!0):!1},Pt={navigate:Yi,to:ro,back:os};let $e=null,mt=[],_o;const Ie={_hold:!1,set hold(i){this._hold=i},get hold(){return this._hold},get(){return $e},set(i,o){clearTimeout(_o),$e&&$e.unfocus(),mt.reverse().forEach(e=>e.unfocus()),i!==$e&&(_o=setTimeout(()=>{$e=i,$e.lifecycle.state="focus",o instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",o)):mt=[]},this.hold?50:0))},input(i,o){if(_t===!0)return;mt=ss([$e],i);const e=mt.shift();e&&(e[C.inputEvents][i]?e[C.inputEvents][i].call(e,o):e[C.inputEvents].any&&e[C.inputEvents].any.call(e,o))}},ss=(i,o)=>i[0][C.inputEvents]&&(typeof i[0][C.inputEvents][o]=="function"||typeof i[0][C.inputEvents].any=="function")?i:i[0].parent?(i.unshift(i[0].parent),ss(i,o)):[],Gi=()=>Be("Image",{template:`
      <Element :imageSource="$imageSource" />`,props:["src"],computed:{imageSource(){return/^(?:https?:)?\/\//i.test(this.src)?this.src:`${window.location.protocol}//${window.location.host}/${this.src}`}}}),qi=()=>Be("Circle",{template:`
      <Element :color="$color" :w="$size" :h="$size" :effects="[$shader('radius', {radius: $radius})]"></Element>
    `,props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let Nt;const Vi=()=>Be("RouterView",{template:`
      <Element w="100%" height="100%"></Element>
    `,state(){return{activeView:null}},hooks:{ready(){Nt=()=>Pt.navigate.apply(this),Pt.navigate.apply(this),window.addEventListener("hashchange",Nt)},destroy(){window.removeEventListener("hashchange",Nt,!1)},focus(){this.activeView&&this.activeView.focus()}},input:{back(i){Pt.back()||this.parent.focus(i)}}}),ji=()=>Be("Sprite",{template:`
      <Element w="$w" h="$h" :texture="$texture" />
    `,props:["image","map","frame","w","h"],state(){return{spriteTexture:!1}},computed:{texture(){const i="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture&&i)return this[C.renderer].createTexture("SubTexture",{texture:this.spriteTexture,x:i.x,y:i.y,width:i.w,height:i.h})}},hooks:{ready(){this.spriteTexture=this[C.renderer].createTexture("ImageTexture",{src:this.image})}}}),Ki=()=>Be("Text",{template:`
      <Element
        __textnode="true"
        :text="$content"
        fontFamily="$font"
        :fontSize="$size"
        :color="$color"
        :style="$style"
        :weight="$weight"
        letterSpacing="$letterspacing"
        lineHeight="$_lineheight"
        stretch="$stretch"
        contain="$_contain"
        :wordWrap="$wordwrap"
        :maxLines="$maxlines"
        :textAlign="$align"
        :overflowSuffix="$textoverflow"
        @loaded="$@loaded"
        @error="$@error"
      />`,props:["content",{key:"font",default:Ve.get("defaultFont","lato")},{key:"size",cast:Number,default:32},"style","color","weight","letterspacing","stretch","align","wordwrap","maxlines","lineheight","contain","@loaded","@error","textoverflow"],computed:{_contain(){return this.contain||(this.wordwrap&&this.maxlines?"both":this.wordwrap?"width":"none")},_lineheight(){return this.lineheight!==void 0?this.lineheight:this.size}}}),gt=new Map,zt={registerListener(i,o,e){let s=gt.get(o);s||(s=new Map,gt.set(o,s));let t=s.get(i);t||(t=new Set,s.set(i,t)),t.add(e)},executeListeners(i,o){const e=gt.get(i);e&&e.forEach(s=>{s.forEach(t=>{t(o)})})},removeListeners(i){gt.forEach(o=>{const e=o.get(i);e&&(e.clear(),o.delete(e))})}},Qi={rounded:"radius"},Zi=i=>{Object.defineProperties(i.prototype,{focus:{value:function(o){Ie.set(this,o)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy";for(let o=0;o<this[C.timeouts].length;o++)clearTimeout(this[C.timeouts][o]);for(let o=0;o<this[C.intervals].length;o++)clearInterval(this[C.intervals][o]);zt.removeListeners(this),is(this[C.children]),ee.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},select:{value:function(o){let e=null;return this[C.children].forEach(s=>{Array.isArray(s)?s.forEach(t=>{t.ref===o&&(e=t)}):Object.getPrototypeOf(s)===Object.prototype?Object.keys(s).forEach(t=>{s[t].ref===o&&(e=s[t])}):s.ref===o&&(e=s)}),e},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(o,e){const s=Qi[o]||o,t=Ce.driver.stage.shManager.getRegisteredEffects();if(s in t)return{type:s,props:e};ee.error(`Shader ${o} not found`)},writable:!1,enumerable:!1,configurable:!1},$router:{value:{to:ro,back:os,get currentRoute(){return no},get routes(){return i.prototype[C.routes]},get navigating(){return _t}},writable:!1,enumerable:!0,configurable:!1},[C.components]:{value:{Image:Gi(),Circle:qi(),RouterView:Vi(),Sprite:ji(),Text:Ki()},writable:!1,enumerable:!1,configurable:!1},$setTimeout:{value:function(o,e,...s){const t=setTimeout(()=>{this[C.timeouts]=this[C.timeouts].filter(l=>l!==t),o.apply(null,s)},e,s);return this[C.timeouts].push(t),t},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(o){this[C.timeouts].indexOf(o)>-1&&(this[C.timeouts]=this[C.timeouts].filter(e=>e!==o),clearTimeout(o))},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(o,e,...s){const t=setInterval(()=>o.apply(null,s),e,s);return this[C.intervals].push(t),t},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(o){this[C.intervals].indexOf(o)>-1&&(this[C.intervals]=this[C.intervals].filter(e=>e!==o),clearInterval(o))},writable:!1,enumerable:!0,configurable:!1},$emit:{value:function(o,e){zt.executeListeners(o,e)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(o,e){zt.registerListener(this,o,e)},writable:!1,enumerable:!0,configurable:!1},[C.renderer]:{value:Ce,writable:!1,enumerable:!1,configurable:!1},$log:{value:Ho("App"),writable:!1,enumerable:!1,configurable:!1},$trigger:{value:function(o){ct(this[C.originalState],o,!0)},writable:!1,enumerable:!1,configurable:!1},$announcer:{value:Qo,writable:!1,enumerable:!1,configurable:!1}})},is=function(i){for(let o=0;o<i.length;o++){if(!i[o])return;Array.isArray(i[o])?is(i[o]):i[o].delete?i[o].delete():i[o].destroy&&(i[o].destroy(),i[o]=null),i[o]=null}i=[]},Ji={cast:i=>i,required:!1},en=(i,o=[])=>{o.indexOf("ref")===-1&&o.push("ref"),i[C.propKeys]=[],o.forEach(e=>{e={...Ji,...typeof e=="object"?e:{key:e}},i[C.propKeys].push(e.key),Object.defineProperty(i.prototype,e.key,{get(){const s=e.cast(this[C.props]&&e.key in this[C.props]?this[C.props][e.key]:e.default||void 0);return e.required&&s===void 0&&ee.warn(`${e.key} is required`),s},set(s){ee.warn(`Warning! Avoid mutating props directly (${e.key})`),this[C.props][e.key]=s}})})},tn=(i,o)=>{i[C.methodKeys]=[];for(let e in o)i[C.propKeys]&&i[C.propKeys].indexOf(e)>-1?ee.error(`${e} already exists as a prop`):(typeof o[e]!="function"&&ee.warn(`${e} is not a function`),i[C.methodKeys].push(e),i.prototype[e]=o[e])},on=(i,o)=>{i[C.stateKeys]=[],o=o.apply(i.prototype),Object.keys(o).forEach(e=>{i[C.propKeys]&&i[C.propKeys].indexOf(e)>-1&&ee.error(`State ${e} already exists as a prop`),i[C.methodKeys]&&i[C.methodKeys].indexOf(e)>-1&&ee.error(`State ${e} already exists as a method`),i[C.stateKeys].push(e);try{Object.defineProperty(i.prototype,e,{get(){return this[C.state]&&e in this[C.state]&&this[C.state][e]},set(s){this[C.state]&&(this[C.state][e]=s)}})}catch(s){ee.error(s)}})},sn=(i,o)=>{i[C.computedKeys]=[];for(let e in o)i[C.stateKeys]&&i[C.stateKeys].indexOf(e)>-1?ee.error(`${e} already exists as a prop`):i[C.propKeys]&&i[C.propKeys].indexOf(e)>-1?ee.error(`${e} already exists as a prop`):i[C.methodKeys]&&i[C.methodKeys].indexOf(e)>-1?ee.error(`${e} already exists as a method`):(typeof o[e]!="function"&&ee.warn(`${e} is not a function`),i[C.computedKeys].push(e),Object.defineProperty(i.prototype,e,{get(){return o[e].apply(this)}}))},nn=(i,o)=>{i.prototype[C.inputEvents]=[],Object.keys(o).forEach(e=>{typeof o[e]!="function"&&ee.warn(`${o[e]} is not a function`),i.prototype[C.inputEvents][e]=o[e]})},rn=(i,o)=>{i.prototype[C.routes]=[],Object.keys(o).forEach(e=>{i.prototype[C.routes][e]={...o[e],options:{inHistory:!0,...o[e].options}}})},ln=(i,o)=>{i.prototype[C.watchKeys]=[],i.prototype[C.watchers]={};for(let e in o)typeof o[e]!="function"&&console.warn(`${e} is not a function`),i.prototype[C.watchKeys].push(e),i.prototype[C.watchers][e]=function(s,t){o[e].call(this,s,t)}},Io={element:qo},ko=i=>{throw new Error(`Parameter ${i} is required`)},Be=(i=ko("name"),o=ko("config"))=>{const e=(r,n)=>{o.code||(ee.debug(`Generating code for ${i} component`),o.code=gs.call(o,ms(o.template,i,n))),Zi(t),$i(o.hooks,i),r.state="beforeSetup",en(t,o.props),o.methods&&tn(t,o.methods),o.state&&on(t,o.state),o.computed&&sn(t,o.computed),o.watch&&ln(t,o.watch),o.routes&&rn(t,o.routes),o.input&&nn(t,o.input),t.setup=!0,r.state="setup"},s=r=>{const n=["init","beforeSetup","setup","ready","focus","unfocus","destroy"];return{previous:null,current:null,get state(){return this.current},set state(a){n.indexOf(a)>-1&&a!==this.current&&(ee.debug(`Setting lifecycle state from ${this.previous} to ${a} for ${r.componentId}`),this.previous=this.current,Li(a,i,r),Mi(a,i,r),this.current=a)}}},t=function(r,n,a){this.lifecycle=s(this),t.setup||e(this.lifecycle,a),this.parent=a,this[C.wrapper]=n,Object.defineProperties(this,{type:{value:i,writable:!1,enumerable:!0,configurable:!1},componentId:{value:Ri(i),writable:!1,enumerable:!0,configurable:!1},[C.id]:{value:Ai(),writable:!1,enumerable:!1,configurable:!1},[C.props]:{value:Co(r.props||{},Ve.get("reactivityMode")),writable:!1,enumerable:!1,configurable:!1},[C.timeouts]:{value:[],writable:!0,enumerable:!1,configurable:!1},[C.intervals]:{value:[],writable:!0,enumerable:!1,configurable:!1}}),Object.defineProperty(this,C.originalState,{value:o.state&&typeof o.state=="function"&&o.state.apply(this)||{},writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,C.state,{value:Co(this[C.originalState],Ve.get("reactivityMode")),writable:!1,enumerable:!1,configurable:!1}),this.lifecycle.state="init",Object.defineProperty(this,C.children,{value:o.code.render.apply(Io,[n,this,o]),writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,C.slots,{value:this[C.children].filter(c=>c[C.isSlot]),writable:!1,enumerable:!1,configurable:!1}),o.code.effects.forEach(c=>{So(()=>{c.apply(Io,[this,this[C.children],o])})}),this[C.watchers]&&Object.keys(this[C.watchers]).forEach(c=>{let f=this[c];So((u=!1)=>{(f!==this[c]||u===!0)&&(this[C.watchers][c].apply(this,[this[c],f]),f=this[c])})}),setTimeout(()=>this.lifecycle.state="ready")},l=(r={},n,a)=>new t(r,n,a);return l.config=o,l},an=i=>{const o={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};i.hooks=i.hooks||{};let e,s,t;return i.hooks[C.destroy]=function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)},i.hooks[C.init]=function(){const l={...o,...Ve.get("keymap",{})};e=r=>{const n=l[r.key]||l[r.keyCode]||r.key||r.keyCode;Ie.input(n,r),clearTimeout(t),t=setTimeout(()=>{Ie.hold=!0},50)},s=()=>{clearTimeout(t),Ie.hold=!1},document.addEventListener("keydown",e),document.addEventListener("keyup",s),setTimeout(()=>Ie.set(this))},Be("App",i)},Y={Component:Be,Application:an,Launch:_i},fn=new URL("fontLoader-e36a1c4c.js",import.meta.url).href,cn=i=>new URLSearchParams(window.location.search).get(i),Qe={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||cn("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}}},dn=()=>{let i={};return Object.keys(Qe).forEach(o=>{if(Qe[o].test&&typeof Qe[o].test=="function"&&Qe[o].test()===!0){i=Qe[o].mapping;return}}),i},un=Y.Component("PortalItem",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=370,l.h=320,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.x=30,n.y=30,n.size=84,typeof r<"u")for(let m in r.config.props)delete n[r.config.props[m]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.x=30,a.y=30,a.content=e.number,a.size=84,a.color=e.fontColor,t[2]||(t[2]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};if(f.x=30,f.y=140,f.size=42,f.font="raleway",f.letterspacing=2,typeof c<"u")for(let m in c.config.props)delete f[c.config.props[m]];t[3].nodeId||t[3].populate(f),o=t[3];const u={};u.x=30,u.y=140,u.content=e.title,u.size=42,u.font="raleway",u.color=e.fontColor,u.letterspacing=2,t[4]||(t[4]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const h={};if(h.x=30,h.y=200,h.wordwrap=300,h.size=28,h.lineheight=32,typeof g<"u")for(let m in g.config.props)delete h[g.config.props[m]];t[5].nodeId||t[5].populate(h),o=t[5];const p={};return p.x=30,p.y=200,p.content=e.description,p.wordwrap=300,p.size=28,p.color=e.fontColor,p.lineheight=32,t[6]||(t[6]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("scale",{transition:o.scale})},,function(o,e,s){e[0].set("color",o.backgroundColor)},,function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:6})])},,function(o,e,s){e[1].set("content",o.number)},,function(o,e,s){e[1].set("color",o.fontColor)},,function(o,e,s){e[2][Symbol.for("props")].content=o.number},,function(o,e,s){e[2][Symbol.for("props")].color=o.fontColor},,function(o,e,s){e[3].set("content",o.title)},,function(o,e,s){e[3].set("color",o.fontColor)},,function(o,e,s){e[4][Symbol.for("props")].content=o.title},,function(o,e,s){e[4][Symbol.for("props")].color=o.fontColor},,function(o,e,s){e[5].set("content",o.description)},,function(o,e,s){e[5].set("color",o.fontColor)},,function(o,e,s){e[6][Symbol.for("props")].content=o.description},,function(o,e,s){e[6][Symbol.for("props")].color=o.fontColor}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",scale:1,fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000",this.scale=1.1},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9",this.scale=1)}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),hn=Y.Component("PortalRow",{components:{PortalItem:un},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const a={};if(a.content=e.title,a.x=60,typeof n<"u")for(let g in n.config.props)delete a[n.config.props[g]];t[2].nodeId||t[2].populate(a),o=t[2];const c={};c.content=e.title,c.x=60,t[3]||(t[3]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const f={};f.y=50,f.x=60,f.h=1,f.w=1800,f.color="#e8d7f9",t[4].nodeId||t[4].populate(f),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const u={};return u.y=100,t[5].nodeId||t[5].populate(u),t},effects:[function(o,e,s){e[1].set("alpha",{transition:{value:o.itemOffset<240?1:0,duration:200}})},,function(o,e,s){e[5].set("x",{transition:o.rowOffset})},,function(o,e,s){parent=e[5];const t=o.items,l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id);const a=s.components&&s.components.PortalItem||o[Symbol.for("components")].PortalItem;e[6]=e[6]||{},e[6][n.item.id]||(e[6][n.item.id]=this.element({parent:parent||"root"},o));const c={};if(c.title=n.item.title,c.description=n.item.description,c.id=n.item.id,c.index=n.index,c.key=n.item.id,typeof a<"u")for(let u in a.config.props)delete c[a.config.props[u]];e[6][n.item.id].nodeId||e[6][n.item.id].populate(c),e[7]=e[7]||{},parent=e[6][n.item.id];const f={};f.x={transition:{value:n.itemOffset+n.index*430,delay:50*(n.index%4),duration:500}},f.title=n.item.title,f.description=n.item.description,f.id=n.item.id,f.index=n.index,f.ref="item"+n.index,f.key=n.item.id,e[7][n.item.id]||(e[7][n.item.id]=(s.components&&s.components.PortalItem||o[Symbol.for("components")].PortalItem||(()=>{console.error("component PortalItem not found")})).call(null,{props:f},e[6][n.item.id],o),e[7][n.item.id][Symbol.for("slots")][0]?(parent=e[7][n.item.id][Symbol.for("slots")][0],o=e[7][n.item.id]):parent=e[7][n.item.id][Symbol.for("children")][0]),e[6][n.item.id].set("x",{transition:{value:n.itemOffset+n.index*430,delay:50*(n.index%4),duration:500}}),e[6][n.item.id].set("ref","item"+n.index),e[7][n.item.id][Symbol.for("props")].x={transition:{value:n.itemOffset+n.index*430,delay:50*(n.index%4),duration:500}},e[7][n.item.id][Symbol.for("props")].ref="item"+n.index}e[7]&&Object.keys(e[7]).forEach(r=>{l.indexOf(r)===-1&&(e[7][r].delete&&e[7][r].delete(),e[7][r].destroy&&e[7][r].destroy(),delete e[7][r])})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(i){const o=this.select(`item${i}`);o&&o.focus&&(o.focus(),i<1?this.rowOffset=60:i>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-i*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),pn="@lightningjs/blits-example-app",mn="0.5.10",gn="Lightning 3 Blits Example App",yn="index.js",xn="module",bn={start:"npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host"},Sn={hooks:{"pre-commit":"lint-staged"}},wn="Michiel van der Geest <hello@michielvandergeest.com>",Cn="Apache-2",Tn={eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",prettier:"^2.5.1",vite:"^4.0.4"},vn={"@lightningjs/blits":"^0.6.9"},_n={name:pn,version:mn,description:gn,main:yn,type:xn,scripts:bn,"lint-staged":{"*.js":["eslint --fix"]},husky:Sn,author:wn,license:Cn,devDependencies:Tn,dependencies:vn},In=Y.Component("Portal",{components:{PortalRow:hn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.color="{top: '#44037a', bottom: '#240244'}",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.mount="{y: 0.5}",n.h=500,n.title="Demos",n.items=e.demo,n.ref="row0",typeof r<"u")for(let M in r.config.props)delete n[r.config.props[M]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.mount="{y: 0.5}",a.h=500,a.y={transition:-e.rowFocused*420+550},a.title="Demos",a.items=e.demo,a.ref="row0",t[2]||(t[2]=(s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow||(()=>{console.error("component PortalRow not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};if(f.mount="{y: 0.5}",f.h=500,f.title="Examples and tests",f.items=e.example,f.ref="row1",typeof c<"u")for(let M in c.config.props)delete f[c.config.props[M]];t[3].nodeId||t[3].populate(f),o=t[3];const u={};u.mount="{y: 0.5}",u.h=500,u.y={transition:-e.rowFocused*420+1100},u.title="Examples and tests",u.items=e.example,u.ref="row1",t[4]||(t[4]=(s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow||(()=>{console.error("component PortalRow not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const h={};if(h.mount="{y: 0.5}",h.h=500,h.title="Benchmarks and stress tests",h.items=e.benchmark,h.ref="row2",typeof g<"u")for(let M in g.config.props)delete h[g.config.props[M]];t[5].nodeId||t[5].populate(h),o=t[5];const p={};p.mount="{y: 0.5}",p.h=500,p.y={transition:-e.rowFocused*420+1650},p.title="Benchmarks and stress tests",p.items=e.benchmark,p.ref="row2",t[6]||(t[6]=(s.components&&s.components.PortalRow||e[Symbol.for("components")].PortalRow||(()=>{console.error("component PortalRow not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};m.w=1920,m.h=200,m.color="#44037a",t[7].nodeId||t[7].populate(m),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};y.w=1920,y.h=70,y.y=200,y.color="{top: '#44037a'}",t[8].nodeId||t[8].populate(y),o=t[7],t[9]||(t[9]=this.element({parent:o||"root"},e));const b={};t[9].nodeId||t[9].populate(b),o=t[9],t[10]||(t[10]=this.element({parent:o||"root"},e));const v={};v.src="assets/blits-logo-full.png",v.w=200,v.h=112,v.x=60,t[10].nodeId||t[10].populate(v),o=t[9],t[11]||(t[11]=this.element({parent:o||"root"},e));const S={};S.w=2,S.h=120,S.y=-10,S.color="#ffffff80",S.x=300,t[11].nodeId||t[11].populate(S),o=t[9],t[12]||(t[12]=this.element({parent:o||"root"},e));const I={};I.x=320,I.y=16,t[12].nodeId||t[12].populate(I);const k=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[12],t[13]||(t[13]=this.element({parent:o||"root"},e));const E={};if(E.y=0,E.size=36,E.content="Example App",typeof k<"u")for(let M in k.config.props)delete E[k.config.props[M]];t[13].nodeId||t[13].populate(E),o=t[13];const x={};x.y=0,x.size=36,x.content="Example App",t[14]||(t[14]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:x},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]);const _=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[12],t[15]||(t[15]=this.element({parent:o||"root"},e));const A={};if(A.y=50,A.size=24,A.content="v"+e.version,typeof _<"u")for(let M in _.config.props)delete A[_.config.props[M]];t[15].nodeId||t[15].populate(A),o=t[15];const R={};return R.y=50,R.size=24,R.content="v"+e.version,t[16]||(t[16]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:R},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[1].set("y",{transition:-o.rowFocused*420+550})},,function(o,e,s){e[2][Symbol.for("props")].y={transition:-o.rowFocused*420+550}},,function(o,e,s){e[3].set("y",{transition:-o.rowFocused*420+1100})},,function(o,e,s){e[4][Symbol.for("props")].y={transition:-o.rowFocused*420+1100}},,function(o,e,s){e[5].set("y",{transition:-o.rowFocused*420+1650})},,function(o,e,s){e[6][Symbol.for("props")].y={transition:-o.rowFocused*420+1650}},,function(o,e,s){e[9].set("y",{transition:{value:80-o.logoOffset,duration:400}})}],context:{}},state(){return{version:_n.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(i){const o=this.select(`row${i}`);o&&o.focus&&o.focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),kn=Y.Component("Letter",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=e.w,r.color="#E6E6E6",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=e.w,n.h=280,t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};return a.w=e.w,a.color="#E6E6E6",t[3].nodeId||t[3].populate(a),t},effects:[function(o,e,s){e[1].set("h",{transition:{value:410+o.offset,duration:o.duration,delay:o.wait,function:o.timingFunction}})},,function(o,e,s){e[2].set("src",o.image)},,function(o,e,s){e[2].set("y",{transition:{value:400+o.offset,duration:o.duration,delay:o.wait,function:o.timingFunction}})},,function(o,e,s){e[3].set("h",{transition:{value:500-o.offset,duration:o.duration,delay:o.wait,function:o.timingFunction}})},,function(o,e,s){e[3].set("y",{transition:{value:660+o.offset,duration:o.duration,delay:o.wait,function:o.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),En=Y.Component("Intro",{components:{Letter:kn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.src="assets/background.jpg",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.letter="l",n.w=294,typeof r<"u")for(let L in r.config.props)delete n[r.config.props[L]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.letter="l",a.w=294,t[2]||(t[2]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};if(f.letter="i-1",f.w=128,f.x=294,f.direction="up",f.delay=50,typeof c<"u")for(let L in c.config.props)delete f[c.config.props[L]];t[3].nodeId||t[3].populate(f),o=t[3];const u={};u.letter="i-1",u.w=128,u.x=294,u.direction="up",u.delay=50,t[4]||(t[4]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const h={};if(h.letter="g-1",h.w=205,h.x=422,h.delay=100,typeof g<"u")for(let L in g.config.props)delete h[g.config.props[L]];t[5].nodeId||t[5].populate(h),o=t[5];const p={};p.letter="g-1",p.w=205,p.x=422,p.delay=100,t[6]||(t[6]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const m=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const y={};if(y.letter="h",y.w=224,y.x=627,y.direction="up",y.delay=150,typeof m<"u")for(let L in m.config.props)delete y[m.config.props[L]];t[7].nodeId||t[7].populate(y),o=t[7];const b={};b.letter="h",b.w=224,b.x=627,b.direction="up",b.delay=150,t[8]||(t[8]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:b},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]);const v=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const S={};if(S.letter="t",S.w=190,S.x=851,S.delay=200,typeof v<"u")for(let L in v.config.props)delete S[v.config.props[L]];t[9].nodeId||t[9].populate(S),o=t[9];const I={};I.letter="t",I.w=190,I.x=851,I.delay=200,t[10]||(t[10]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:I},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]);const k=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const E={};if(E.letter="n-1",E.w=221,E.x=1041,E.direction="up",E.delay=250,typeof k<"u")for(let L in k.config.props)delete E[k.config.props[L]];t[11].nodeId||t[11].populate(E),o=t[11];const x={};x.letter="n-1",x.w=221,x.x=1041,x.direction="up",x.delay=250,t[12]||(t[12]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:x},t[11],e),t[12][Symbol.for("slots")][0]?(o=t[12][Symbol.for("slots")][0],e=t[12]):o=t[12][Symbol.for("children")][0]);const _=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const A={};if(A.letter="i-2",A.w=115,A.x=1262,A.delay=300,typeof _<"u")for(let L in _.config.props)delete A[_.config.props[L]];t[13].nodeId||t[13].populate(A),o=t[13];const R={};R.letter="i-2",R.w=115,R.x=1262,R.delay=300,t[14]||(t[14]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:R},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]);const M=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const z={};if(z.letter="n-2",z.w=219,z.x=1377,z.direction="up",z.delay=350,typeof M<"u")for(let L in M.config.props)delete z[M.config.props[L]];t[15].nodeId||t[15].populate(z),o=t[15];const P={};P.letter="n-2",P.w=219,P.x=1377,P.direction="up",P.delay=350,t[16]||(t[16]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:P},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]);const F=s.components&&s.components.Letter||e[Symbol.for("components")].Letter;o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const w={};if(w.letter="g-2",w.w=324,w.x=1596,w.direction="up",w.delay=400,typeof F<"u")for(let L in F.config.props)delete w[F.config.props[L]];t[17].nodeId||t[17].populate(w),o=t[17];const T={};return T.letter="g-2",T.w=324,T.x=1596,T.direction="up",T.delay=400,t[18]||(t[18]=(s.components&&s.components.Letter||e[Symbol.for("components")].Letter||(()=>{console.error("component Letter not found")})).call(null,{props:T},t[17],e),t[18][Symbol.for("slots")][0]?(o=t[18][Symbol.for("slots")][0],e=t[18]):o=t[18][Symbol.for("children")][0]),t},effects:[],context:{}}}),Rn=Y.Component("Toggle",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=100,l.h=50,l.y=5,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Circle||e[Symbol.for("components")].Circle;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.size=50,typeof r<"u")for(let c in r.config.props)delete n[r.config.props[c]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};return a.x={transition:e.on?0:50},a.size=50,a.color=e.primaryColor,t[2]||(t[2]=(s.components&&s.components.Circle||e[Symbol.for("components")].Circle||(()=>{console.error("component Circle not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("color",o.bgColor)},,function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:25})])},,function(o,e,s){e[1].set("x",{transition:o.on?0:50})},,function(o,e,s){e[1].set("color",o.primaryColor)},,function(o,e,s){e[2][Symbol.for("props")].x={transition:o.on?0:50}},,function(o,e,s){e[2][Symbol.for("props")].color=o.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),An=Y.Component("Bar",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};return t[1].nodeId||t[1].populate(r),t},effects:[function(o,e,s){e[0].set("w",{value:o.w,duration:o.duration})},,function(o,e,s){e[0].set("h",{value:o.h,duration:o.duration})},,function(o,e,s){e[0].set("color",o.bgColor)},,function(o,e,s){e[0].set("x",o.index*(o.w+o.w/4))},,function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:10})])},,function(o,e,s){e[1].set("w",o.w)},,function(o,e,s){e[1].set("y",{transition:{value:o.h-o.innerH,duration:o.duration}})},,function(o,e,s){e[1].set("h",{transition:{value:o.innerH,duration:o.duration}})},,function(o,e,s){e[1].set("color",o.primaryColor)},,function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:10})])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),Mn={color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"},Ln={color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},$n=Y.Component("Theming",{components:{Bar:An,Toggle:Rn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.y=1020,n.x=1160,n.size=28,n.content='Use "up", "down", "left" and "right" to change the appearance',typeof r<"u")for(let X in r.config.props)delete n[r.config.props[X]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.y=1020,a.x=1160,a.size=28,a.color=e.colors.color4,a.content='Use "up", "down", "left" and "right" to change the appearance',t[2]||(t[2]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const f={};f.x=-250,f.y=-100,f.src="assets/shadow.png",f.w=1e3,f.h=900,f.alpha=.5,t[4].nodeId||t[4].populate(f),o=t[3],t[5]||(t[5]=this.element({parent:o||"root"},e));const u={};t[5].nodeId||t[5].populate(u),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const g={};g.h=100,t[6].nodeId||t[6].populate(g),o=t[5],t[7]||(t[7]=this.element({parent:o||"root"},e));const h={};h.h=80,h.y=20,t[7].nodeId||t[7].populate(h);const p=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[5],t[8]||(t[8]=this.element({parent:o||"root"},e));const m={};if(m.size=28,m.x=20,m.y=14,typeof p<"u")for(let X in p.config.props)delete m[p.config.props[X]];t[8].nodeId||t[8].populate(m),o=t[8];const y={};y.content=e.text,y.color=e.colors.color3,y.size=28,y.x=20,y.y=14,t[9]||(t[9]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:y},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const b=s.components&&s.components.Toggle||e[Symbol.for("components")].Toggle;o=t[5],t[10]||(t[10]=this.element({parent:o||"root"},e));const v={};if(v.primaryColor="#22c55e",typeof b<"u")for(let X in b.config.props)delete v[b.config.props[X]];t[10].nodeId||t[10].populate(v),o=t[10];const S={};S.x={transition:e.width-120},S.on=e.mode==="dark",S.bgColor=e.colors.color1,S.primaryColor="#22c55e",t[11]||(t[11]=(s.components&&s.components.Toggle||e[Symbol.for("components")].Toggle||(()=>{console.error("component Toggle not found")})).call(null,{props:S},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),o=t[3],t[12]||(t[12]=this.element({parent:o||"root"},e));const I={};I.w=200,I.x=25,I.y=140,t[12].nodeId||t[12].populate(I),o=t[3],t[13]||(t[13]=this.element({parent:o||"root"},e));const k={};k.x=270,t[13].nodeId||t[13].populate(k),o=t[3],t[14]||(t[14]=this.element({parent:o||"root"},e));const E={};E.color="transparent",t[14].nodeId||t[14].populate(E),o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const x={};t[15].nodeId||t[15].populate(x);const _=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const A={};if(A.height=100,A.index=0,typeof _<"u")for(let X in _.config.props)delete A[_.config.props[X]];t[16].nodeId||t[16].populate(A),o=t[16];const R={};R.bgColor=e.colors.color2,R.primaryColor=e.colors.color4,R.size=e.graph.size,R.height=100,R.index=0,t[17]||(t[17]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:R},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]);const M=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const z={};if(z.height=140,z.index=1,typeof M<"u")for(let X in M.config.props)delete z[M.config.props[X]];t[18].nodeId||t[18].populate(z),o=t[18];const P={};P.bgColor=e.colors.color2,P.primaryColor=e.colors.color4,P.size=e.graph.size,P.height=140,P.index=1,t[19]||(t[19]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:P},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]);const F=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[20]||(t[20]=this.element({parent:o||"root"},e));const w={};if(w.height=170,w.index=2,typeof F<"u")for(let X in F.config.props)delete w[F.config.props[X]];t[20].nodeId||t[20].populate(w),o=t[20];const T={};T.bgColor=e.colors.color2,T.primaryColor=e.colors.color4,T.size=e.graph.size,T.height=170,T.index=2,t[21]||(t[21]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:T},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]);const L=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[22]||(t[22]=this.element({parent:o||"root"},e));const O={};if(O.height=150,O.index=3,typeof L<"u")for(let X in L.config.props)delete O[L.config.props[X]];t[22].nodeId||t[22].populate(O),o=t[22];const N={};N.bgColor=e.colors.color2,N.primaryColor=e.colors.color4,N.size=e.graph.size,N.height=150,N.index=3,t[23]||(t[23]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:N},t[22],e),t[23][Symbol.for("slots")][0]?(o=t[23][Symbol.for("slots")][0],e=t[23]):o=t[23][Symbol.for("children")][0]);const $=s.components&&s.components.Bar||e[Symbol.for("components")].Bar;o=t[15],t[24]||(t[24]=this.element({parent:o||"root"},e));const B={};if(B.height=90,B.index=4,typeof $<"u")for(let X in $.config.props)delete B[$.config.props[X]];t[24].nodeId||t[24].populate(B),o=t[24];const U={};return U.bgColor=e.colors.color2,U.primaryColor=e.colors.color4,U.size=e.graph.size,U.height=90,U.index=4,t[25]||(t[25]=(s.components&&s.components.Bar||e[Symbol.for("components")].Bar||(()=>{console.error("component Bar not found")})).call(null,{props:U},t[24],e),t[25][Symbol.for("slots")][0]?(o=t[25][Symbol.for("slots")][0],e=t[25]):o=t[25][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("color",{transition:o.colors.bg})},,function(o,e,s){e[1].set("color",o.colors.color4)},,function(o,e,s){e[2][Symbol.for("props")].color=o.colors.color4},,function(o,e,s){e[3].set("x",{transition:(1920-o.width)/2})},,function(o,e,s){e[3].set("y",{transition:(1080-o.height)/2})},,function(o,e,s){e[5].set("w",{transition:o.width})},,function(o,e,s){e[5].set("h",{transition:o.height})},,function(o,e,s){e[5].set("color",o.colors.color1)},,function(o,e,s){e[5].set("effects",[o.shader("radius",{radius:o.radius})])},,function(o,e,s){e[6].set("w",{transition:o.width})},,function(o,e,s){e[6].set("color",o.colors.color2)},,function(o,e,s){e[6].set("effects",[o.shader("radius",{radius:o.radius})])},,function(o,e,s){e[7].set("w",{transition:o.width})},,function(o,e,s){e[7].set("color",o.colors.color2)},,function(o,e,s){e[8].set("content",o.text)},,function(o,e,s){e[8].set("color",o.colors.color3)},,function(o,e,s){e[9][Symbol.for("props")].content=o.text},,function(o,e,s){e[9][Symbol.for("props")].color=o.colors.color3},,function(o,e,s){e[10].set("x",{transition:o.width-120})},,function(o,e,s){e[10].set("on",o.mode==="dark")},,function(o,e,s){e[10].set("bgColor",o.colors.color1)},,function(o,e,s){e[11][Symbol.for("props")].x={transition:o.width-120}},,function(o,e,s){e[11][Symbol.for("props")].on=o.mode==="dark"},,function(o,e,s){e[11][Symbol.for("props")].bgColor=o.colors.color1},,function(o,e,s){e[12].set("h",{transition:o.block1.height})},,function(o,e,s){e[12].set("color",o.colors.color2)},,function(o,e,s){e[12].set("effects",[o.shader("radius",{radius:o.radius/2})])},,function(o,e,s){e[13].set("w",{transition:o.block2.w})},,function(o,e,s){e[13].set("h",o.block2.h)},,function(o,e,s){e[13].set("y",{transition:o.block2.y})},,function(o,e,s){e[13].set("color",o.colors.color2)},,function(o,e,s){e[13].set("effects",[o.shader("radius",{radius:o.radius/2})])},,function(o,e,s){e[14].set("x",{transition:o.graph.x})},,function(o,e,s){e[14].set("y",{transition:o.graph.y})},,function(o,e,s){e[14].set("w",o.graph.w)},,function(o,e,s){e[14].set("h",o.graph.h)},,function(o,e,s){e[15].set("x",{transition:o.graph.offset})},,function(o,e,s){e[15].set("y",{transition:o.graph.offset})},,function(o,e,s){e[16].set("bgColor",o.colors.color2)},,function(o,e,s){e[16].set("primaryColor",o.colors.color4)},,function(o,e,s){e[16].set("size",o.graph.size)},,function(o,e,s){e[17][Symbol.for("props")].bgColor=o.colors.color2},,function(o,e,s){e[17][Symbol.for("props")].primaryColor=o.colors.color4},,function(o,e,s){e[17][Symbol.for("props")].size=o.graph.size},,function(o,e,s){e[18].set("bgColor",o.colors.color2)},,function(o,e,s){e[18].set("primaryColor",o.colors.color4)},,function(o,e,s){e[18].set("size",o.graph.size)},,function(o,e,s){e[19][Symbol.for("props")].bgColor=o.colors.color2},,function(o,e,s){e[19][Symbol.for("props")].primaryColor=o.colors.color4},,function(o,e,s){e[19][Symbol.for("props")].size=o.graph.size},,function(o,e,s){e[20].set("bgColor",o.colors.color2)},,function(o,e,s){e[20].set("primaryColor",o.colors.color4)},,function(o,e,s){e[20].set("size",o.graph.size)},,function(o,e,s){e[21][Symbol.for("props")].bgColor=o.colors.color2},,function(o,e,s){e[21][Symbol.for("props")].primaryColor=o.colors.color4},,function(o,e,s){e[21][Symbol.for("props")].size=o.graph.size},,function(o,e,s){e[22].set("bgColor",o.colors.color2)},,function(o,e,s){e[22].set("primaryColor",o.colors.color4)},,function(o,e,s){e[22].set("size",o.graph.size)},,function(o,e,s){e[23][Symbol.for("props")].bgColor=o.colors.color2},,function(o,e,s){e[23][Symbol.for("props")].primaryColor=o.colors.color4},,function(o,e,s){e[23][Symbol.for("props")].size=o.graph.size},,function(o,e,s){e[24].set("bgColor",o.colors.color2)},,function(o,e,s){e[24].set("primaryColor",o.colors.color4)},,function(o,e,s){e[24].set("size",o.graph.size)},,function(o,e,s){e[25][Symbol.for("props")].bgColor=o.colors.color2},,function(o,e,s){e[25][Symbol.for("props")].primaryColor=o.colors.color4},,function(o,e,s){e[25][Symbol.for("props")].size=o.graph.size}],context:{}},state(){return{mode:"dark",radius:20,width:500,height:600}},computed:{colors(){return this.mode==="dark"?Mn:Ln},text(){return this.mode==="dark"?"Dark mode":"Light mode"},block1(){return{height:this.height===600?180:720}},block2(){return{y:this.height===600?140:560,h:this.height===600?180:300,w:this.height===600?200:890}},graph(){return{x:this.height===600?32:270,y:this.height===600?370:140,w:this.height===600?0:890,h:this.height===600?0:400,offset:this.height===600?0:110,size:this.height===600?"small":"large"}}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.width=1200,this.height=900},down(){this.width=500,this.height=600}}}),Bn="ABC123",Pn="https://8b4fa39d.lightningjs.workers.dev";let ns,rs;const Nn="w185",zn={headers:{"Content-Type":"application/json",Authorization:"Bearer "+Bn}};function Eo(i,o=Nn){return rs+o+i}function Fn(...i){return ns?Zt(...i):ls().then(()=>Zt(...i))}function Zt(i,o={}){return fetch(Pn+i,{...zn,...o}).then(e=>e.json())}function ls(){return Zt("/configuration").then(i=>(ns=i,rs=i.images.secure_base_url,i))}const On={get:Fn,loadConfig:ls};function Dn(i){return On.get(`/${i}/popular`).then(o=>o.results.filter(s=>!s.adult).map(s=>({poster:Eo(s.poster_path||s.profile_path),background:Eo(s.backdrop_path,"w1280"),identifier:s.id,title:s.title,overview:s.overview})))}const Un=Y.Component("Poster",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=185,l.h=278,l.x=e.x,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("src",o.src)},,function(o,e,s){e[0].set("color",{top:"#fff",bottom:o.colorBottom})},,function(o,e,s){e[0].set("scale",{transition:{value:o.scale,duration:200,function:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},,function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:8})])}],context:{}},props:["src","index"],state(){return{scale:1,colorBottom:"#000"}},computed:{x(){return this.index*215}},hooks:{focus(){this.colorBottom="#fff",this.scale=1.1,this.$emit("posterSelect",this.index)},unfocus(){this.colorBottom="#000",this.scale=1}}}),Wn=Y.Component("Background",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=1920,r.h=1080,r.color="{top: '#fff', bottom: '#000'}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=1920,n.h=1080,n.color="{top: '#fff', bottom: '#000'}",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};return a.w=1920,a.h=1080,a.src="assets/gradient.png",a.color="#8866dd",a.alpha=.8,t[3].nodeId||t[3].populate(a),t},effects:[function(o,e,s){e[1].set("src",o.bg1)},,function(o,e,s){e[1].set("alpha",{transition:{value:o.alpha1,duration:400,function:"ease-in"}})},,function(o,e,s){e[2].set("src",o.bg2)},,function(o,e,s){e[2].set("alpha",{transition:{value:o.alpha2,duration:400,function:"ease-in"}})}],context:{}},props:["src"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{src(i){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=i,this.alpha1=.8,this.alpha2=0):(this.bg2=i,this.alpha1=0,this.alpha2=.8)}}}),Xn=Y.Component("TMdb",{components:{Poster:Un,Background:Wn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,l.color="black",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Background||e[Symbol.for("components")].Background;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(typeof r<"u")for(let v in r.config.props)delete n[r.config.props[v]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.src=e.src,t[2]||(t[2]=(s.components&&s.components.Background||e[Symbol.for("components")].Background||(()=>{console.error("component Background not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const f={};f.src="assets/logo.png",f.x=130,f.w=243,f.h=52,t[4].nodeId||t[4].populate(f);const u=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[3],t[5]||(t[5]=this.element({parent:o||"root"},e));const g={};if(g.font="raleway",g.size=80,g.x=130,g.y=200,g.wordwrap=1e3,g["@loaded"]=e.positionText&&e.positionText.bind(e),typeof u<"u")for(let v in u.config.props)delete g[u.config.props[v]];t[5].nodeId||t[5].populate(g),o=t[5];const h={};h.content=e.title,h.font="raleway",h.size=80,h.x=130,h.y=200,h.wordwrap=1e3,h["@loaded"]=e.positionText&&e.positionText.bind(e),t[6]||(t[6]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const p=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[3],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};if(m.wordwrap=800,m.x=130,m.lineheight=40,m.maxlines=6,typeof p<"u")for(let v in p.config.props)delete m[p.config.props[v]];t[7].nodeId||t[7].populate(m),o=t[7];const y={};y.content=e.overview,y.wordwrap=800,y.x=130,y.y=e.offset+330,y.lineheight=40,y.maxlines=6,t[8]||(t[8]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:y},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]),o=t[3],t[9]||(t[9]=this.element({parent:o||"root"},e));const b={};return t[9].nodeId||t[9].populate(b),t},effects:[function(o,e,s){e[1].set("src",o.src)},,function(o,e,s){e[2][Symbol.for("props")].src=o.src},,function(o,e,s){e[3].set("alpha",{transition:{value:o.alphaIn,duration:300,function:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},,function(o,e,s){e[4].set("y",{transition:{value:o.logoY,duration:300,function:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},,function(o,e,s){e[5].set("content",o.title)},,function(o,e,s){e[6][Symbol.for("props")].content=o.title},,function(o,e,s){e[7].set("content",o.overview)},,function(o,e,s){e[7].set("y",o.offset+330)},,function(o,e,s){e[8][Symbol.for("props")].content=o.overview},,function(o,e,s){e[8][Symbol.for("props")].y=o.offset+330},,function(o,e,s){e[9].set("x",{transition:{value:o.x,duration:300,function:"ease-in-out"}})},,function(o,e,s){e[9].set("y",{transition:{value:o.listY,duration:300,function:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},,function(o,e,s){parent=e[9];const t=o.items,l=[];for(let r=0;r<t.length;r++){parent=e[9],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString());const a=s.components&&s.components.Poster||o[Symbol.for("components")].Poster;e[10]=e[10]||{},e[10][n.key]||(e[10][n.key]=this.element({parent:parent||"root"},o));const c={};if(c.index=n.index,c.src=n.item.poster,c.ref=n.item.identifier,typeof a<"u")for(let u in a.config.props)delete c[a.config.props[u]];e[10][n.key].nodeId||e[10][n.key].populate(c),e[11]=e[11]||{},parent=e[10][n.key];const f={};f.index=n.index,f.src=n.item.poster,f.ref=n.item.identifier,f.key=n.item.identifier,e[11][n.key]||(e[11][n.key]=(s.components&&s.components.Poster||o[Symbol.for("components")].Poster||(()=>{console.error("component Poster not found")})).call(null,{props:f},e[10][n.key],o),e[11][n.key][Symbol.for("slots")][0]?(parent=e[11][n.key][Symbol.for("slots")][0],o=e[11][n.key]):parent=e[11][n.key][Symbol.for("children")][0]),e[10][n.key].set("key",n.item.identifier),e[11][n.key][Symbol.for("props")].key=n.item.identifier}e[11]&&Object.keys(e[11]).forEach(r=>{l.indexOf(r)===-1&&(e[11][r].delete&&e[11][r].delete(),e[11][r].destroy&&e[11][r].destroy(),delete e[11][r])})}],context:{}},state(){return{items:[],src:"",focused:null,alphaIn:.001,logoY:30,listY:750,offset:0}},computed:{x(){return this.focused<=1?150:150-Math.min(this.focused-1,this.items.length-8)*215},title(){return this.items[this.focused]&&this.items[this.focused].title},overview(){return this.items[this.focused]&&this.items[this.focused].overview}},watch:{focused(i){const o=this.select(this.items[i]&&this.items[i].identifier);o&&o.focus&&o.focus()}},hooks:{ready(){this.alphaIn=1,this.listY=700,this.logoY=80,Dn("movie").then(i=>{this.items=i,this.focused=0,this.background=i[this.focused].background}),this.$listen("posterSelect",i=>{this.src=this.items[i].background})},focus(){this.$trigger("focused")}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}},methods:{positionText(i){this.offset=i.h-100}}}),Yn=Y.Component("MenuSprite",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.src="assets/menusprite.png",n.x=748,n.y=120,n.w=425,n.h=340,t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.y=680,a.x=560,t[3].nodeId||t[3].populate(a);const c=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const f={};if(f.image="assets/menusprite.png",f.x=0,f.w=140,f.h=140,f.map=e.map,typeof c<"u")for(let k in c.config.props)delete f[c.config.props[k]];t[4].nodeId||t[4].populate(f),o=t[4];const u={};u.image="assets/menusprite.png",u.x=0,u.w=140,u.h=140,u.map=e.map,u.frame=e.icon1,t[5]||(t[5]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:u},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]);const g=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[6]||(t[6]=this.element({parent:o||"root"},e));const h={};if(h.image="assets/menusprite.png",h.x=220,h.w=140,h.h=140,h.map=e.map,h.frame="icon2",typeof g<"u")for(let k in g.config.props)delete h[g.config.props[k]];t[6].nodeId||t[6].populate(h),o=t[6];const p={};p.image="assets/menusprite.png",p.x=220,p.w=140,p.h=140,p.map=e.map,p.frame="icon2",t[7]||(t[7]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:p},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]);const m=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};if(y.image="assets/menusprite.png",y.x=440,y.w=140,y.h=140,y.map=e.map,y.frame="icon3",typeof m<"u")for(let k in m.config.props)delete y[m.config.props[k]];t[8].nodeId||t[8].populate(y),o=t[8];const b={};b.image="assets/menusprite.png",b.x=440,b.w=140,b.h=140,b.map=e.map,b.frame="icon3",t[9]||(t[9]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:b},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const v=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[3],t[10]||(t[10]=this.element({parent:o||"root"},e));const S={};if(S.image="assets/menusprite.png",S.x=660,S.w=140,S.h=140,S.map=e.map,S.frame="icon4_unfocus",typeof v<"u")for(let k in v.config.props)delete S[v.config.props[k]];t[10].nodeId||t[10].populate(S),o=t[10];const I={};return I.image="assets/menusprite.png",I.x=660,I.w=140,I.h=140,I.map=e.map,I.frame="icon4_unfocus",t[11]||(t[11]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:I},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[4].set("frame",o.icon1)},,function(o,e,s){e[5][Symbol.for("props")].frame=o.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),yt=["menu"],Hn=Y.Component("Sprites",{components:{MenuSprite:Yn},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.MenuSprite||e[Symbol.for("components")].MenuSprite;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(typeof r<"u")for(let c in r.config.props)delete n[r.config.props[c]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};return a.show=e.currentSprite==="menu",t[2]||(t[2]=(s.components&&s.components.MenuSprite||e[Symbol.for("components")].MenuSprite||(()=>{console.error("component MenuSprite not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[1].set("show",o.currentSprite==="menu")},,function(o,e,s){e[2][Symbol.for("props")].show=o.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const i=yt.indexOf(this.currentSprite);i<yt.length-1?this.currentSprite=yt[i+1]:this.currentSprite=yt[0]}}}),as=Y.Component("Button",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=300,l.h=80,l.color=e.color,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("effects",[o.shader("rounded",{radius:20})])},,function(o,e,s){e[0].set("alpha",{transition:o.alpha})},,function(o,e,s){e[0].set("scale",{transition:o.scale})},,function(o,e,s){e[0].set("z",o.zIndex)},,function(o,e,s){e[0].set("rotation",o.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,zIndex:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1,this.zIndex=100},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.zIndex=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),Gn=Y.Component("Menu",{components:{Button:as},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=400,l.h=1080,l.color="{right: '#64748baa', left: '#475569aa'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=50,r.y=40,t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const a={};if(a.color="#e4e4e7",a.ref="menu1",typeof n<"u")for(let S in n.config.props)delete a[n.config.props[S]];t[2].nodeId||t[2].populate(a),o=t[2];const c={};c.color="#e4e4e7",c.ref="menu1",t[3]||(t[3]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]);const f=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const u={};if(u.color="#e4e4e7",u.y=100,u.ref="menu2",typeof f<"u")for(let S in f.config.props)delete u[f.config.props[S]];t[4].nodeId||t[4].populate(u),o=t[4];const g={};g.color="#e4e4e7",g.y=100,g.ref="menu2",t[5]||(t[5]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:g},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]);const h=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.color="#e4e4e7",p.y=200,p.ref="menu3",typeof h<"u")for(let S in h.config.props)delete p[h.config.props[S]];t[6].nodeId||t[6].populate(p),o=t[6];const m={};m.color="#e4e4e7",m.y=200,m.ref="menu3",t[7]||(t[7]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:m},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]);const y=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[8]||(t[8]=this.element({parent:o||"root"},e));const b={};if(b.color="#e4e4e7",b.y=300,b.ref="menu4",typeof y<"u")for(let S in y.config.props)delete b[y.config.props[S]];t[8].nodeId||t[8].populate(b),o=t[8];const v={};return v.color="#e4e4e7",v.y=300,v.ref="menu4",t[9]||(t[9]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:v},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("x",{transition:o.x})}],context:{}},state(){return{x:-360,focused:null}},hooks:{focus(){this.focused=1,this.$trigger("focused"),this.x=0},unfocus(){this.x=-360}},watch:{focused(){const i=this.select(`menu${this.focused}`);i&&i.focus&&i.focus()}},input:{right(){this.parent.focus()},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)}}}),qn=Y.Component("FocusHandling",{components:{Menu:Gn,Button:as},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=300,r.y=150,t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const a={};if(a.color="#ef4444",a.x=0,a.ref="button1",typeof n<"u")for(let B in n.config.props)delete a[n.config.props[B]];t[2].nodeId||t[2].populate(a),o=t[2];const c={};c.color="#ef4444",c.x=0,c.ref="button1",t[3]||(t[3]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]);const f=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const u={};if(u.color="#f97316",u.x=320,u.ref="button2",typeof f<"u")for(let B in f.config.props)delete u[f.config.props[B]];t[4].nodeId||t[4].populate(u),o=t[4];const g={};g.color="#f97316",g.x=320,g.ref="button2",t[5]||(t[5]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:g},t[4],e),t[5][Symbol.for("slots")][0]?(o=t[5][Symbol.for("slots")][0],e=t[5]):o=t[5][Symbol.for("children")][0]);const h=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const p={};if(p.color="#84cc16",p.x=640,p.ref="button3",typeof h<"u")for(let B in h.config.props)delete p[h.config.props[B]];t[6].nodeId||t[6].populate(p),o=t[6];const m={};m.color="#84cc16",m.x=640,m.ref="button3",t[7]||(t[7]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:m},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]);const y=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[8]||(t[8]=this.element({parent:o||"root"},e));const b={};if(b.color="#10b981",b.x=0,b.y=100,b.ref="button4",typeof y<"u")for(let B in y.config.props)delete b[y.config.props[B]];t[8].nodeId||t[8].populate(b),o=t[8];const v={};v.color="#10b981",v.x=0,v.y=100,v.ref="button4",t[9]||(t[9]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:v},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const S=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[10]||(t[10]=this.element({parent:o||"root"},e));const I={};if(I.color="#06b6d4",I.y=100,I.x=320,I.ref="button5",typeof S<"u")for(let B in S.config.props)delete I[S.config.props[B]];t[10].nodeId||t[10].populate(I),o=t[10];const k={};k.color="#06b6d4",k.y=100,k.x=320,k.ref="button5",t[11]||(t[11]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:k},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]);const E=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};if(x.color="#3b82f6",x.y=100,x.x=640,x.ref="button6",typeof E<"u")for(let B in E.config.props)delete x[E.config.props[B]];t[12].nodeId||t[12].populate(x),o=t[12];const _={};_.color="#3b82f6",_.y=100,_.x=640,_.ref="button6",t[13]||(t[13]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:_},t[12],e),t[13][Symbol.for("slots")][0]?(o=t[13][Symbol.for("slots")][0],e=t[13]):o=t[13][Symbol.for("children")][0]);const A=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[14]||(t[14]=this.element({parent:o||"root"},e));const R={};if(R.color="#8b5cf6",R.y=200,R.x=0,R.ref="button7",typeof A<"u")for(let B in A.config.props)delete R[A.config.props[B]];t[14].nodeId||t[14].populate(R),o=t[14];const M={};M.color="#8b5cf6",M.y=200,M.x=0,M.ref="button7",t[15]||(t[15]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:M},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]);const z=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[16]||(t[16]=this.element({parent:o||"root"},e));const P={};if(P.color="#d946ef",P.y=200,P.x=320,P.ref="button8",typeof z<"u")for(let B in z.config.props)delete P[z.config.props[B]];t[16].nodeId||t[16].populate(P),o=t[16];const F={};F.color="#d946ef",F.y=200,F.x=320,F.ref="button8",t[17]||(t[17]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:F},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]);const w=s.components&&s.components.Button||e[Symbol.for("components")].Button;o=t[1],t[18]||(t[18]=this.element({parent:o||"root"},e));const T={};if(T.color="#f43f5e",T.y=200,T.x=640,T.ref="button9",typeof w<"u")for(let B in w.config.props)delete T[w.config.props[B]];t[18].nodeId||t[18].populate(T),o=t[18];const L={};L.color="#f43f5e",L.y=200,L.x=640,L.ref="button9",t[19]||(t[19]=(s.components&&s.components.Button||e[Symbol.for("components")].Button||(()=>{console.error("component Button not found")})).call(null,{props:L},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]);const O=s.components&&s.components.Menu||e[Symbol.for("components")].Menu;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const N={};if(N.ref="menu",typeof O<"u")for(let B in O.config.props)delete N[O.config.props[B]];t[20].nodeId||t[20].populate(N),o=t[20];const $={};return $.ref="menu",t[21]||(t[21]=(s.components&&s.components.Menu||e[Symbol.for("components")].Menu||(()=>{console.error("component Menu not found")})).call(null,{props:$},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),t},effects:[],context:{}},state(){return{focused:null}},hooks:{focus(){this.focused=1,this.$trigger("focused")}},watch:{focused(i){const o=this.select(`button${i}`);o&&o.focus&&o.focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const i=this.focused-1;if(i===0){const o=this.select("menu");o&&o.focus&&o.focus()}else this.focused=Math.max(i,1)},a(){const i=this.select("menu");i&&i.focus&&i.focus()}}}),Vn=Y.Component("Positioning",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=100,r.h=100,r.x=20,r.y=20,r.color="#ecfeff",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=100,n.h=100,n.x=140,n.y=20,n.color="#a5f3fc",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.w=100,a.h=100,a.x=260,a.y=20,a.color="#22d3ee",t[3].nodeId||t[3].populate(a),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=100,c.h=100,c.x=380,c.y=20,c.color="#0891b2",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.w=100,f.h=100,f.x=e.x1,f.y=e.y,f.color="#fdf4ff",t[5].nodeId||t[5].populate(f),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=100,u.h=100,u.x=e.x2,u.y=e.y,u.color="#f5d0fe",t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=100,g.h=100,g.x=e.x3,g.y=e.y,g.color="#e879f9",t[7].nodeId||t[7].populate(g),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const h={};h.w=100,h.h=100,h.x=e.x4,h.y=e.y,h.color="#c026d3",t[8].nodeId||t[8].populate(h),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const p={};p.w=100,p.h=100,p.y=260,p.color="#fff7ed",t[9].nodeId||t[9].populate(p),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=100,m.h=100,m.y=260,m.color="#fed7aa",t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.w=100,y.h=100,y.y=260,y.color="#fb923c",t[11].nodeId||t[11].populate(y),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.w=100,b.h=100,b.y=260,b.color="#ea580c",t[12].nodeId||t[12].populate(b),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const v={};v.w=800,v.h=800,v.y=20,v.x=800,v.color="#ecfdf5",t[13].nodeId||t[13].populate(v),o=t[13],t[14]||(t[14]=this.element({parent:o||"root"},e));const S={};S.w=600,S.h=600,S.y=20,S.x=20,S.color="#a7f3d0",t[14].nodeId||t[14].populate(S),o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const I={};I.w=400,I.h=400,I.y=100,I.x=20,I.color="#34d399",t[15].nodeId||t[15].populate(I),o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const k={};k.w=200,k.h=100,k.color="#059669",t[16].nodeId||t[16].populate(k),o=t[16],t[17]||(t[17]=this.element({parent:o||"root"},e));const E={};E.w=50,E.h=50,E.color="#065f46",t[17].nodeId||t[17].populate(E),o=t[0],t[18]||(t[18]=this.element({parent:o||"root"},e));const x={};x.w=100,x.h=100,x.y=500,x.x=20,x.color="#e11d48",t[18].nodeId||t[18].populate(x),o=t[0],t[19]||(t[19]=this.element({parent:o||"root"},e));const _={};_.w=200,_.h=200,_.x=300,_.y=600,_.color="#94a3b8",_.z=100,t[19].nodeId||t[19].populate(_);const A=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[19],t[20]||(t[20]=this.element({parent:o||"root"},e));const R={};if(R.content="Lightning!",R.x=100,R.y=140,typeof A<"u")for(let B in A.config.props)delete R[A.config.props[B]];t[20].nodeId||t[20].populate(R),o=t[20];const M={};M.content="Lightning!",M.x=100,M.y=140,t[21]||(t[21]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:M},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),o=t[19],t[22]||(t[22]=this.element({parent:o||"root"},e));const z={};z.w=300,z.h=100,z.color="#475569",t[22].nodeId||t[22].populate(z);const P=s.components&&s.components.Circle||e[Symbol.for("components")].Circle;o=t[19],t[23]||(t[23]=this.element({parent:o||"root"},e));const F={};if(F.x=150,F.y=150,F.size=100,typeof P<"u")for(let B in P.config.props)delete F[P.config.props[B]];t[23].nodeId||t[23].populate(F),o=t[23];const w={};w.x=150,w.y=150,w.size=100,t[24]||(t[24]=(s.components&&s.components.Circle||e[Symbol.for("components")].Circle||(()=>{console.error("component Circle not found")})).call(null,{props:w},t[23],e),t[24][Symbol.for("slots")][0]?(o=t[24][Symbol.for("slots")][0],e=t[24]):o=t[24][Symbol.for("children")][0]),o=t[0],t[25]||(t[25]=this.element({parent:o||"root"},e));const T={};T.w=300,T.h=300,T.x=300,T.y=600,T.color="#ef444480",t[25].nodeId||t[25].populate(T),o=t[0],t[26]||(t[26]=this.element({parent:o||"root"},e));const L={};L.w=400,L.h=100,L.x=800,L.y=900,L.color="#0284c7",t[26].nodeId||t[26].populate(L),o=t[26],t[27]||(t[27]=this.element({parent:o||"root"},e));const O={};O.w=o.node.width*(42/100),O.h=o.node.height*(30/100),O.y=o.node.height*(5/100),O.x=o.node.width*(1/100),O.color="#075985",t[27].nodeId||t[27].populate(O),o=t[26],t[28]||(t[28]=this.element({parent:o||"root"},e));const N={};N.h=o.node.height*(30/100),N.y=o.node.height*(35/100),N.x=o.node.width*(1/100),N.color="#6b21a8",t[28].nodeId||t[28].populate(N),o=t[26],t[29]||(t[29]=this.element({parent:o||"root"},e));const $={};return $.h=o.node.height*(30/100),$.y=o.node.height*(65/100),$.x=o.node.width*(1/100),$.color="#9f1239",t[29].nodeId||t[29].populate($),t},effects:[function(o,e,s){e[9].set("x",o.xA)},,function(o,e,s){e[10].set("x",o.xB)},,function(o,e,s){e[11].set("x",o.xC)},,function(o,e,s){e[12].set("x",o.xD)},,function(o,e,s){e[16].set("y",(400-100)/2)},,function(o,e,s){e[16].set("x",(400-200)/2)},,function(o,e,s){e[17].set("y",{transition:o.yNested})},,function(o,e,s){e[17].set("x",{transition:o.xNested})},,function(o,e,s){e[28].set("w",o.bar2.v)},,function(o,e,s){e[29].set("w",{transition:o.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const i=parseFloat(this.bar2.v),o=this.bar2.direction==="up"?i+10:i-10;this.bar2.v=o+"%",o>=90&&(this.bar2.direction="down"),o<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}}),jn=Y.Component("Colors",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=20,r.y=20,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=100,n.h=100,n.x=0,n.color="#ecfeff",t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.w=100,a.h=100,a.x=120,a.color="#a5f3fc",t[3].nodeId||t[3].populate(a),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=100,c.h=100,c.x=240,c.color="#22d3ee",t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.w=100,f.h=100,f.x=360,f.color="#0891b2",t[5].nodeId||t[5].populate(f),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.x=20,u.y=140,t[6].nodeId||t[6].populate(u),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=100,g.h=100,g.x=0,g.color="ecfeff",t[7].nodeId||t[7].populate(g),o=t[6],t[8]||(t[8]=this.element({parent:o||"root"},e));const h={};h.w=100,h.h=100,h.x=120,h.color="a5f3fc",t[8].nodeId||t[8].populate(h),o=t[6],t[9]||(t[9]=this.element({parent:o||"root"},e));const p={};p.w=100,p.h=100,p.x=240,p.color="22d3ee",t[9].nodeId||t[9].populate(p),o=t[6],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=100,m.h=100,m.x=360,m.color="0891b2",t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.x=20,y.y=260,t[11].nodeId||t[11].populate(y),o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.w=100,b.h=100,b.x=0,b.color="#ecfeffaa",t[12].nodeId||t[12].populate(b),o=t[11],t[13]||(t[13]=this.element({parent:o||"root"},e));const v={};v.w=100,v.h=100,v.x=120,v.color="#a5f3fc33",t[13].nodeId||t[13].populate(v),o=t[11],t[14]||(t[14]=this.element({parent:o||"root"},e));const S={};S.w=100,S.h=100,S.x=240,S.color="#22d3ee20",t[14].nodeId||t[14].populate(S),o=t[11],t[15]||(t[15]=this.element({parent:o||"root"},e));const I={};I.w=100,I.h=100,I.x=360,I.color="#0891b2ff",t[15].nodeId||t[15].populate(I),o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const k={};k.x=20,k.y=380,t[16].nodeId||t[16].populate(k),o=t[16],t[17]||(t[17]=this.element({parent:o||"root"},e));const E={};E.w=100,E.h=100,E.x=0,E.color="rgb(236,254,255)",t[17].nodeId||t[17].populate(E),o=t[16],t[18]||(t[18]=this.element({parent:o||"root"},e));const x={};x.w=100,x.h=100,x.x=120,x.color="rgb(165,243,252)",t[18].nodeId||t[18].populate(x),o=t[16],t[19]||(t[19]=this.element({parent:o||"root"},e));const _={};_.w=100,_.h=100,_.x=240,_.color="rgb(34,211,238)",t[19].nodeId||t[19].populate(_),o=t[16],t[20]||(t[20]=this.element({parent:o||"root"},e));const A={};A.w=100,A.h=100,A.x=360,A.color="rgb(8,145,178)",t[20].nodeId||t[20].populate(A),o=t[0],t[21]||(t[21]=this.element({parent:o||"root"},e));const R={};R.x=20,R.y=500,t[21].nodeId||t[21].populate(R),o=t[21],t[22]||(t[22]=this.element({parent:o||"root"},e));const M={};M.w=100,M.h=100,M.x=0,M.color="rgba(236,254,255,0.67)",t[22].nodeId||t[22].populate(M),o=t[21],t[23]||(t[23]=this.element({parent:o||"root"},e));const z={};z.w=100,z.h=100,z.x=120,z.color="rgba(165,243,252,0.2)",t[23].nodeId||t[23].populate(z),o=t[21],t[24]||(t[24]=this.element({parent:o||"root"},e));const P={};P.w=100,P.h=100,P.x=240,P.color="rgba(34,211,238, 0.13)",t[24].nodeId||t[24].populate(P),o=t[21],t[25]||(t[25]=this.element({parent:o||"root"},e));const F={};F.w=100,F.h=100,F.x=360,F.color="rgba(8,145,178,1)",t[25].nodeId||t[25].populate(F),o=t[0],t[26]||(t[26]=this.element({parent:o||"root"},e));const w={};w.x=20,w.y=620,t[26].nodeId||t[26].populate(w),o=t[26],t[27]||(t[27]=this.element({parent:o||"root"},e));const T={};T.w=100,T.h=100,T.x=0,T.color="#000",t[27].nodeId||t[27].populate(T),o=t[26],t[28]||(t[28]=this.element({parent:o||"root"},e));const L={};L.w=100,L.h=100,L.x=120,L.color="#ccc",t[28].nodeId||t[28].populate(L),o=t[26],t[29]||(t[29]=this.element({parent:o||"root"},e));const O={};O.w=100,O.h=100,O.x=240,O.color="#890",t[29].nodeId||t[29].populate(O),o=t[26],t[30]||(t[30]=this.element({parent:o||"root"},e));const N={};N.w=100,N.h=100,N.x=360,N.color="#0f0",t[30].nodeId||t[30].populate(N),o=t[0],t[31]||(t[31]=this.element({parent:o||"root"},e));const $={};$.x=20,$.y=740,t[31].nodeId||t[31].populate($),o=t[31],t[32]||(t[32]=this.element({parent:o||"root"},e));const B={};B.w=100,B.h=100,B.x=0,B.color="000",t[32].nodeId||t[32].populate(B),o=t[31],t[33]||(t[33]=this.element({parent:o||"root"},e));const U={};U.w=100,U.h=100,U.x=120,U.color="ccc",t[33].nodeId||t[33].populate(U),o=t[31],t[34]||(t[34]=this.element({parent:o||"root"},e));const X={};X.w=100,X.h=100,X.x=240,X.color="890",t[34].nodeId||t[34].populate(X),o=t[31],t[35]||(t[35]=this.element({parent:o||"root"},e));const H={};H.w=100,H.h=100,H.x=360,H.color="0f0",t[35].nodeId||t[35].populate(H),o=t[0],t[36]||(t[36]=this.element({parent:o||"root"},e));const W={};W.x=620,W.y=20,t[36].nodeId||t[36].populate(W),o=t[36],t[37]||(t[37]=this.element({parent:o||"root"},e));const Q={};Q.w=300,Q.h=200,Q.x=0,t[37].nodeId||t[37].populate(Q),o=t[36],t[38]||(t[38]=this.element({parent:o||"root"},e));const V={};V.w=300,V.h=200,V.x=0,V.y=250,t[38].nodeId||t[38].populate(V),o=t[36],t[39]||(t[39]=this.element({parent:o||"root"},e));const G={};G.w=300,G.h=200,G.x=100,G.y=400,t[39].nodeId||t[39].populate(G),o=t[36],t[40]||(t[40]=this.element({parent:o||"root"},e));const J={};return J.w=300,J.h=200,J.x=0,J.y=650,t[40].nodeId||t[40].populate(J),t},effects:[function(o,e,s){e[0].set("color",{transition:o.bg})},,function(o,e,s){e[37].set("color",{transition:o.color1})},,function(o,e,s){e[38].set("color",{transition:o.color2})},,function(o,e,s){e[39].set("color",{transition:o.color3})},,function(o,e,s){e[40].set("color",{transition:{value:o.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let i=0;const o=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{i=i+1,i===o.length-1&&(i=0),this.bg=o[i]},2e3)}}}),Kn=Y.Component("Gradients",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.h=1080,r.color="{top: '#0891b2', bottom: '#a5f3fc'}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.h=1080,n.color="{left: '#dc2626',  right: '#f87171'}",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.h=1080,a.color="{top: '#0891b2', right: '#f87171'}",t[3].nodeId||t[3].populate(a),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};return c.h=1080,c.color="{right: 'green', bottom: 'gold'}",t[4].nodeId||t[4].populate(c),t},effects:[function(o,e,s){e[1].set("w",1920/4)},,function(o,e,s){e[2].set("w",1920/4)},,function(o,e,s){e[2].set("x",1920/4)},,function(o,e,s){e[3].set("w",1920/4)},,function(o,e,s){e[3].set("x",1920/4*2)},,function(o,e,s){e[4].set("w",1920/4)},,function(o,e,s){e[4].set("x",1920/4*3)}],context:{}}}),Qn=Y.Component("Transitions",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=200,r.h=200,r.x=50,r.color="#c4b5fd",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=200,n.h=200,n.x=300,n.color="#a78bfa",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.w=200,a.h=200,a.x=550,a.color="#8b5cf6",a.ref="bla",t[3].nodeId||t[3].populate(a),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=200,c.h=200,c.x=800,c.color="#7c3aed",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.w=200,f.h=200,f.x=1050,f.color="#6d28d9",t[5].nodeId||t[5].populate(f),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=200,u.h=200,u.x=1300,u.color="#5b21b6",t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};return g.w=200,g.h=200,g.x=1550,g.color="#4c1d95",t[7].nodeId||t[7].populate(g),t},effects:[function(o,e,s){e[1].set("y",{transition:o.y})},,function(o,e,s){e[2].set("y",{transition:{value:o.y}})},,function(o,e,s){e[3].set("y",{transition:{value:o.y,duration:1e3,start:o.start,end:o.doneTransition3}})},,function(o,e,s){e[4].set("y",{transition:{value:o.y,duration:500,delay:1e3,start:o.start,end:o.finished}})},,function(o,e,s){e[5].set("y",{transition:{value:o.y,function:"ease-in-out",end:o.finished}})},,function(o,e,s){e[6].set("y",{transition:{value:o.y,duration:o.duration,function:"ease-in-out-back",end:o.finished}})},,function(o,e,s){e[7].set("y",{transition:{value:o.y,duration:800,function:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{ready(){this.$setTimeout(()=>{this.y=1080-50-200},2e3)}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(i,o,e){this.$log.info("Start transition",i.nodeId,o,e)},finished(i,o,e){this.$log.info("Finished transition",i.nodeId,o,e)}}}),Zn=Y.Component("Alpha",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=100,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=200,n.h=200,n.x=100,n.color="#fff",n.alpha=.2,t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.w=200,a.h=200,a.x=320,a.color="#fff",a.alpha=.4,t[3].nodeId||t[3].populate(a),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=200,c.h=200,c.x=540,c.color="#fff",c.alpha=.6,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.w=200,f.h=200,f.x=760,f.color="#fff",f.alpha=.8,t[5].nodeId||t[5].populate(f),o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=200,u.h=200,u.x=980,u.color="#fff",u.alpha=1,t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=200,g.h=200,g.x=100,g.y=320,g.color="#fff",g.alpha=e.alpha,t[7].nodeId||t[7].populate(g),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const h={};h.w=200,h.h=200,h.x=100,h.y=540,h.color="#fff",t[8].nodeId||t[8].populate(h),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const p={};p.w=200,p.h=200,p.x=100,p.y=760,p.color="#fff",t[9].nodeId||t[9].populate(p),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=428,m.h=234,m.x=1200,m.y=100,m.alpha=1,t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.w=428,y.h=234,y.x=1300,y.alpha=.4,t[11].nodeId||t[11].populate(y),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.w=428,b.h=234,b.x=1200,b.alpha=.1,t[12].nodeId||t[12].populate(b);const v=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const S={};if(S.x=400,S.y=400,S.alpha=.2,S.content="Text with alpha applied directly",typeof v<"u")for(let A in v.config.props)delete S[v.config.props[A]];t[13].nodeId||t[13].populate(S),o=t[13];const I={};I.x=400,I.y=400,I.alpha=.2,I.content="Text with alpha applied directly",t[14]||(t[14]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:I},t[13],e),t[14][Symbol.for("slots")][0]?(o=t[14][Symbol.for("slots")][0],e=t[14]):o=t[14][Symbol.for("children")][0]),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const k={};k.alpha=.5,k.x=400,k.y=500,t[15].nodeId||t[15].populate(k);const E=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const x={};if(x.content="Text with alpha applied on parent element",typeof E<"u")for(let A in E.config.props)delete x[E.config.props[A]];t[16].nodeId||t[16].populate(x),o=t[16];const _={};return _.content="Text with alpha applied on parent element",t[17]||(t[17]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:_},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[8].set("alpha",o.alpha)},,function(o,e,s){e[9].set("alpha",{transition:{value:o.alpha,duration:1e3,function:"ease-in-out-circ"}})},,function(o,e,s){e[10].set("src",o.image)},,function(o,e,s){e[11].set("y",100+234-40)},,function(o,e,s){e[11].set("src",o.image)},,function(o,e,s){e[12].set("y",100+234*2-40*2)},,function(o,e,s){e[12].set("src",o.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(i,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),Jn=Y.Component("Scaling",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=100,r.y=100,r.w=150,r.h=150,r.color="#64748b",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.x=300,n.y=100,n.w=100,n.h=100,n.color="#64748b",n.scale=1.5,t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.x=100,a.y=400,a.w=100,a.h=100,a.color="#b45309",a.scale=e.scale,t[3].nodeId||t[3].populate(a),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=900,c.y=400,c.w=100,c.h=100,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.x=300,f.y=600,f.w=100,f.h=100,f.color="#059669",t[5].nodeId||t[5].populate(f),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.x=10,u.y=10,u.h=60,u.w=80,u.color="#0369a1",t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.x=1500,g.y=600,g.w=100,g.h=100,g.color="#059669",t[7].nodeId||t[7].populate(g),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const h={};return h.x=10,h.y=10,h.h=60,h.w=80,h.color="#0369a1",t[8].nodeId||t[8].populate(h),t},effects:[function(o,e,s){e[4].set("src",o.balloon)},,function(o,e,s){e[4].set("scale",{transition:{value:o.scale,function:"ease-in-out"}})},,function(o,e,s){e[5].set("scale",o.scale2)},,function(o,e,s){e[7].set("scale",o.scale2)},,function(o,e,s){e[8].set("scale",o.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),er=Y.Component("Rotation",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=70,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.x=100,n.y=0,n.w=200,n.h=100,n.color="#fee2e2",n.rotation=0,t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.x=100,a.y=150,a.w=200,a.h=100,a.color="#fecaca",a.rotation=10,t[3].nodeId||t[3].populate(a),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=100,c.y=300,c.w=200,c.h=100,c.color="#fca5a5",c.rotation=20,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.x=100,f.y=450,f.w=200,f.h=100,f.color="#f87171",f.rotation=30,t[5].nodeId||t[5].populate(f),o=t[1],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.x=100,u.y=610,u.w=200,u.h=100,u.color="#ef4444",u.rotation=40,t[6].nodeId||t[6].populate(u),o=t[1],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.x=100,g.y=800,g.w=200,g.h=100,g.color="#dc2626",g.rotation=50,t[7].nodeId||t[7].populate(g),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const h={};h.y=70,h.x=300,t[8].nodeId||t[8].populate(h),o=t[8],t[9]||(t[9]=this.element({parent:o||"root"},e));const p={};p.x=100,p.y=0,p.w=200,p.h=100,p.color="#fee2e2",p.rotation=60,t[9].nodeId||t[9].populate(p),o=t[8],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.x=100,m.y=150,m.w=200,m.h=100,m.color="#fecaca",m.rotation=70,t[10].nodeId||t[10].populate(m),o=t[8],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.x=100,y.y=300,y.w=200,y.h=100,y.color="#fca5a5",y.rotation=80,t[11].nodeId||t[11].populate(y),o=t[8],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.x=100,b.y=450,b.w=200,b.h=100,b.color="#f87171",b.rotation=90,t[12].nodeId||t[12].populate(b),o=t[8],t[13]||(t[13]=this.element({parent:o||"root"},e));const v={};v.x=100,v.y=610,v.w=200,v.h=100,v.color="#ef4444",v.rotation=100,t[13].nodeId||t[13].populate(v),o=t[8],t[14]||(t[14]=this.element({parent:o||"root"},e));const S={};S.x=100,S.y=800,S.w=200,S.h=100,S.color="#dc2626",S.rotation=100,t[14].nodeId||t[14].populate(S),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const I={};I.y=70,I.x=600,t[15].nodeId||t[15].populate(I),o=t[15],t[16]||(t[16]=this.element({parent:o||"root"},e));const k={};k.x=100,k.y=0,k.w=200,k.h=100,k.color="#fee2e2",k.rotation=110,t[16].nodeId||t[16].populate(k),o=t[15],t[17]||(t[17]=this.element({parent:o||"root"},e));const E={};E.x=100,E.y=150,E.w=200,E.h=100,E.color="#fecaca",E.rotation=120,t[17].nodeId||t[17].populate(E),o=t[15],t[18]||(t[18]=this.element({parent:o||"root"},e));const x={};x.x=100,x.y=300,x.w=200,x.h=100,x.color="#fca5a5",x.rotation=130,t[18].nodeId||t[18].populate(x),o=t[15],t[19]||(t[19]=this.element({parent:o||"root"},e));const _={};_.x=100,_.y=450,_.w=200,_.h=100,_.color="#f87171",_.rotation=140,t[19].nodeId||t[19].populate(_),o=t[15],t[20]||(t[20]=this.element({parent:o||"root"},e));const A={};A.x=100,A.y=610,A.w=200,A.h=100,A.color="#ef4444",A.rotation=150,t[20].nodeId||t[20].populate(A),o=t[15],t[21]||(t[21]=this.element({parent:o||"root"},e));const R={};R.x=100,R.y=800,R.w=200,R.h=100,R.color="#dc2626",R.rotation=160,t[21].nodeId||t[21].populate(R),o=t[0],t[22]||(t[22]=this.element({parent:o||"root"},e));const M={};M.y=70,M.x=900,t[22].nodeId||t[22].populate(M),o=t[22],t[23]||(t[23]=this.element({parent:o||"root"},e));const z={};z.x=100,z.y=0,z.w=200,z.h=100,z.color="#fee2e2",z.rotation=170,t[23].nodeId||t[23].populate(z),o=t[22],t[24]||(t[24]=this.element({parent:o||"root"},e));const P={};P.x=100,P.y=150,P.w=200,P.h=100,P.color="#fecaca",P.rotation=180,t[24].nodeId||t[24].populate(P),o=t[22],t[25]||(t[25]=this.element({parent:o||"root"},e));const F={};F.x=100,F.y=300,F.w=200,F.h=100,F.color="#fca5a5",F.rotation=190,t[25].nodeId||t[25].populate(F),o=t[22],t[26]||(t[26]=this.element({parent:o||"root"},e));const w={};w.x=100,w.y=450,w.w=200,w.h=100,w.color="#f87171",w.rotation=200,t[26].nodeId||t[26].populate(w),o=t[22],t[27]||(t[27]=this.element({parent:o||"root"},e));const T={};T.x=100,T.y=610,T.w=200,T.h=100,T.color="#ef4444",T.rotation=210,t[27].nodeId||t[27].populate(T),o=t[22],t[28]||(t[28]=this.element({parent:o||"root"},e));const L={};L.x=100,L.y=800,L.w=200,L.h=100,L.color="#dc2626",L.rotation=220,t[28].nodeId||t[28].populate(L),o=t[0],t[29]||(t[29]=this.element({parent:o||"root"},e));const O={};O.y=70,O.x=1200,t[29].nodeId||t[29].populate(O),o=t[29],t[30]||(t[30]=this.element({parent:o||"root"},e));const N={};N.x=100,N.y=0,N.w=200,N.h=100,N.color="#fee2e2",N.rotation=230,t[30].nodeId||t[30].populate(N),o=t[29],t[31]||(t[31]=this.element({parent:o||"root"},e));const $={};$.x=100,$.y=150,$.w=200,$.h=100,$.color="#fecaca",$.rotation=240,t[31].nodeId||t[31].populate($),o=t[29],t[32]||(t[32]=this.element({parent:o||"root"},e));const B={};B.x=100,B.y=300,B.w=200,B.h=100,B.color="#fca5a5",B.rotation=250,t[32].nodeId||t[32].populate(B),o=t[29],t[33]||(t[33]=this.element({parent:o||"root"},e));const U={};U.x=100,U.y=450,U.w=200,U.h=100,U.color="#f87171",U.rotation=260,t[33].nodeId||t[33].populate(U),o=t[29],t[34]||(t[34]=this.element({parent:o||"root"},e));const X={};X.x=100,X.y=610,X.w=200,X.h=100,X.color="#ef4444",X.rotation=270,t[34].nodeId||t[34].populate(X),o=t[29],t[35]||(t[35]=this.element({parent:o||"root"},e));const H={};H.x=100,H.y=800,H.w=200,H.h=100,H.color="#dc2626",H.rotation=280,t[35].nodeId||t[35].populate(H),o=t[0],t[36]||(t[36]=this.element({parent:o||"root"},e));const W={};W.y=70,W.x=1500,t[36].nodeId||t[36].populate(W),o=t[36],t[37]||(t[37]=this.element({parent:o||"root"},e));const Q={};Q.x=100,Q.y=0,Q.w=200,Q.h=100,Q.color="#fee2e2",Q.rotation=290,t[37].nodeId||t[37].populate(Q),o=t[36],t[38]||(t[38]=this.element({parent:o||"root"},e));const V={};V.x=100,V.y=150,V.w=200,V.h=100,V.color="#fecaca",V.rotation=300,t[38].nodeId||t[38].populate(V),o=t[36],t[39]||(t[39]=this.element({parent:o||"root"},e));const G={};G.x=100,G.y=300,G.w=200,G.h=100,G.color="#fca5a5",G.rotation=310,t[39].nodeId||t[39].populate(G),o=t[36],t[40]||(t[40]=this.element({parent:o||"root"},e));const J={};J.x=100,J.y=450,J.w=200,J.h=100,J.color="#f87171",J.rotation=320,t[40].nodeId||t[40].populate(J),o=t[36],t[41]||(t[41]=this.element({parent:o||"root"},e));const te={};te.x=100,te.y=610,te.w=200,te.h=100,te.color="#ef4444",te.rotation=330,t[41].nodeId||t[41].populate(te),o=t[36],t[42]||(t[42]=this.element({parent:o||"root"},e));const Z={};Z.x=100,Z.y=800,Z.w=200,Z.h=100,Z.color="#dc2626",Z.rotation=340,t[42].nodeId||t[42].populate(Z),o=t[0],t[43]||(t[43]=this.element({parent:o||"root"},e));const K={};K.x=200,K.y=200,K.w=400,K.h=400,K.color="#0891b2",K.rotation=e.rotation1,t[43].nodeId||t[43].populate(K),o=t[0],t[44]||(t[44]=this.element({parent:o||"root"},e));const ue={};ue.x=800,ue.y=200,ue.w=400,ue.h=400,ue.color="#0891b2",t[44].nodeId||t[44].populate(ue),o=t[0],t[45]||(t[45]=this.element({parent:o||"root"},e));const re={};return re.x=1400,re.y=200,re.w=400,re.h=400,re.color="#0891b2",t[45].nodeId||t[45].populate(re),t},effects:[function(o,e,s){e[44].set("rotation",o.rotation2)},,function(o,e,s){e[45].set("rotation",{transition:o.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},800),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},2e3)}}}),tr=Y.Component("KeyInput",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=525,l.y=130,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=200,r.h=200,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=180,n.h=180,n.x=10,n.y=10,t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.w=180,a.h=180,a.x=230,a.y=10,t[3].nodeId||t[3].populate(a),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=180,c.h=180,c.x=450,c.y=10,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.w=180,f.h=180,f.x=670,f.y=10,t[5].nodeId||t[5].populate(f),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=180,u.h=180,u.x=10,u.y=220,t[6].nodeId||t[6].populate(u),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=180,g.h=180,g.x=230,g.y=220,t[7].nodeId||t[7].populate(g),o=t[0],t[8]||(t[8]=this.element({parent:o||"root"},e));const h={};h.w=180,h.h=180,h.x=450,h.y=220,t[8].nodeId||t[8].populate(h),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const p={};p.w=180,p.h=180,p.x=670,p.y=220,t[9].nodeId||t[9].populate(p),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=180,m.h=180,m.x=10,m.y=430,t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.w=180,y.h=180,y.x=230,y.y=430,t[11].nodeId||t[11].populate(y),o=t[0],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.w=180,b.h=180,b.x=450,b.y=430,t[12].nodeId||t[12].populate(b),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const v={};v.w=180,v.h=180,v.x=670,v.y=430,t[13].nodeId||t[13].populate(v),o=t[0],t[14]||(t[14]=this.element({parent:o||"root"},e));const S={};S.w=180,S.h=180,S.x=10,S.y=640,t[14].nodeId||t[14].populate(S),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const I={};I.w=180,I.h=180,I.x=230,I.y=640,t[15].nodeId||t[15].populate(I),o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const k={};k.w=180,k.h=180,k.x=450,k.y=640,t[16].nodeId||t[16].populate(k),o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const E={};return E.w=180,E.h=180,E.x=670,E.y=640,t[17].nodeId||t[17].populate(E),t},effects:[function(o,e,s){e[1].set("color",o.focusColor)},,function(o,e,s){e[1].set("x",o.focusedX*220)},,function(o,e,s){e[1].set("y",o.focusedY*210)},,function(o,e,s){e[2].set("color",o.blockColor)},,function(o,e,s){e[3].set("color",o.blockColor)},,function(o,e,s){e[4].set("color",o.blockColor)},,function(o,e,s){e[5].set("color",o.blockColor)},,function(o,e,s){e[6].set("color",o.blockColor)},,function(o,e,s){e[7].set("color",o.blockColor)},,function(o,e,s){e[8].set("color",o.blockColor)},,function(o,e,s){e[9].set("color",o.blockColor)},,function(o,e,s){e[10].set("color",o.blockColor)},,function(o,e,s){e[11].set("color",o.blockColor)},,function(o,e,s){e[12].set("color",o.blockColor)},,function(o,e,s){e[13].set("color",o.blockColor)},,function(o,e,s){e[14].set("color",o.blockColor)},,function(o,e,s){e[15].set("color",o.blockColor)},,function(o,e,s){e[16].set("color",o.blockColor)},,function(o,e,s){e[17].set("color",o.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(i){const o=this.focusedX-1;o===-1?this.parent.focus(i):this.focusedX=Math.max(o,0)},right(i){const o=this.focusedX+1;o===4?this.parent.focus(i):this.focusedX=Math.min(o,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(i){const o=parseInt(i.key);isNaN(o)?this.parent.focus(i):(this.focusedX=Math.max(0,(o-1)%4),this.focusedY=Math.max(0,Math.ceil(o/4)-1))}}}),Ft=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],Ot=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],or=Y.Component("Texts",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=100,l.y=100,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.content="Default text",n["@loaded"]=e.textLoaded&&e.textLoaded.bind(e),typeof r<"u")for(let $ in r.config.props)delete n[r.config.props[$]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.content="Default text",a["@loaded"]=e.textLoaded&&e.textLoaded.bind(e),t[2]||(t[2]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};if(f.content="123456",f.x=400,typeof c<"u")for(let $ in c.config.props)delete f[c.config.props[$]];t[3].nodeId||t[3].populate(f),o=t[3];const u={};u.content="123456",u.x=400,t[4]||(t[4]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const h={};if(h.content="Text with a different fontsize",h.y=120,h.font="raleway",typeof g<"u")for(let $ in g.config.props)delete h[g.config.props[$]];t[5].nodeId||t[5].populate(h),o=t[5];const p={};p.content="Text with a different fontsize",p.size=e.size,p.y=120,p.font="raleway",t[6]||(t[6]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const m=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const y={};if(y.content="Text with a different color",y.size=50,y.y=250,typeof m<"u")for(let $ in m.config.props)delete y[m.config.props[$]];t[7].nodeId||t[7].populate(y),o=t[7];const b={};b.content="Text with a different color",b.size=50,b.color=e.color,b.y=250,t[8]||(t[8]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:b},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]);const v=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const S={};if(S.content="Letterspacing",S.size=50,S.color="#38bdf8",S.y=450,S.letterspacing=40,typeof v<"u")for(let $ in v.config.props)delete S[v.config.props[$]];t[9].nodeId||t[9].populate(S),o=t[9];const I={};I.content="Letterspacing",I.size=50,I.color="#38bdf8",I.y=450,I.letterspacing=40,t[10]||(t[10]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:I},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const k={};k.w=800,k.h=100,k.y=550,k.color="#94a3b8",t[11].nodeId||t[11].populate(k);const E=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const x={};if(x.content="Text align center",x.size=50,x.y=15,x.color="#bae6fd",x.align="center",x.wordwrap=800,typeof E<"u")for(let $ in E.config.props)delete x[E.config.props[$]];t[12].nodeId||t[12].populate(x),o=t[12];const _={};_.content="Text align center",_.size=50,_.y=15,_.color="#bae6fd",_.align="center",_.wordwrap=800,t[13]||(t[13]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:_},t[12],e),t[13][Symbol.for("slots")][0]?(o=t[13][Symbol.for("slots")][0],e=t[13]):o=t[13][Symbol.for("children")][0]),o=t[0],t[14]||(t[14]=this.element({parent:o||"root"},e));const A={};A.w=800,A.h=200,A.x=900,A.y=550,A.color="#94a3b8",t[14].nodeId||t[14].populate(A);const R=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const M={};if(M.content=e.longText,M.size=40,M.color="#bae6fd",M.wordwrap=800,M.maxlines=5,M.textoverflow="!!!",typeof R<"u")for(let $ in R.config.props)delete M[R.config.props[$]];t[15].nodeId||t[15].populate(M),o=t[15];const z={};z.content=e.longText,z.size=40,z.color="#bae6fd",z.wordwrap=800,z.maxlines=5,z.textoverflow="!!!",t[16]||(t[16]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:z},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]),o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const P={};P.w=800,P.h=120,P.x=900,P.y=800,P.color="#94a3b8",t[17].nodeId||t[17].populate(P);const F=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[17],t[18]||(t[18]=this.element({parent:o||"root"},e));const w={};if(w.content=e.longText,w.size=40,w.color="#bae6fd",w.wordwrap=800,w.maxlines=2,w.lineheight=60,w.textoverflow=!1,typeof F<"u")for(let $ in F.config.props)delete w[F.config.props[$]];t[18].nodeId||t[18].populate(w),o=t[18];const T={};T.content=e.longText,T.size=40,T.color="#bae6fd",T.wordwrap=800,T.maxlines=2,T.lineheight=60,T.textoverflow=!1,t[19]||(t[19]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:T},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]);const L=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const O={};if(O.size=50,O.y=750,O.font="opensans",typeof L<"u")for(let $ in L.config.props)delete O[L.config.props[$]];t[20].nodeId||t[20].populate(O),o=t[20];const N={};return N.content=e.character,N.size=50,N.color=e.color,N.y=750,N.font="opensans",t[21]||(t[21]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:N},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[5].set("size",o.size)},,function(o,e,s){e[6][Symbol.for("props")].size=o.size},,function(o,e,s){e[7].set("color",o.color)},,function(o,e,s){e[8][Symbol.for("props")].color=o.color},,function(o,e,s){e[20].set("content",o.character)},,function(o,e,s){e[20].set("color",o.color)},,function(o,e,s){e[21][Symbol.for("props")].content=o.character},,function(o,e,s){e[21][Symbol.for("props")].color=o.color}],context:{}},state(){return{color:Ft[0],size:10,character:Ot[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo."}},hooks:{ready(){let i=0;this.$setInterval(()=>{i++,i>Ft.length-1&&(i=0),this.color=Ft[i],this.size=10*(i*2+1)},1e3);let o=0;this.$setInterval(()=>{o++,o>Ot.length-1&&(o=0),this.character=Ot[o]},1400)}},methods:{textLoaded(i){this.$log.info(`Image loaded with w: ${i.w} and h: ${i.h}`)}}}),xt=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],sr=Y.Component("Images",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.src="assets/lightningbolt.png",r.w=428,r.h=234,r.x=100,r.y=100,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",n.w=428,n.h=234,n.x=100,n.y=400,t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.w=428,a.h=234,a.x=100,a.y=700,a["@loaded"]=e.imageLoaded&&e.imageLoaded.bind(e),t[3].nodeId||t[3].populate(a),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.color="{top: 'red', bottom: 'gold'}",c.src="assets/lightningbolt.png",c.w=428,c.h=234,c.x=600,c.y=100,t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.x=600,f.y=400,f.w=428,f.h=234,t[5].nodeId||t[5].populate(f),o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};return u.src="assets/lightningbolt.png",u.w=856,u.h=468,t[6].nodeId||t[6].populate(u),t},effects:[function(o,e,s){e[3].set("src",o.image)},,function(o,e,s){e[5].set("clipping",o.clipping)}],context:{}},state(){return{image:xt[0],clipping:!0}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===xt[0]?xt[1]:xt[0],this.clipping=!this.clipping},2e3)}},methods:{imageLoaded(i){this.$log.info(`Image loaded with w: ${i.w} and h: ${i.h}`)}}}),dt=Y.Component("Square",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.w=e.size,l.h=e.size,l.color="#86198f",t[0].nodeId||t[0].populate(l),t},effects:[],context:{}},props:[{key:"size",default:80}]}),fs=Y.Component("Card",{components:{Square:dt},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=e.w,l.h=e.h,l.color="#0891b2",t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.x=80,n.y=80,typeof r<"u")for(let g in r.config.props)delete n[r.config.props[g]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.x=80,a.y=80,t[2]||(t[2]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};if(f.x=20,f.y=20,f.size=40,typeof c<"u")for(let g in c.config.props)delete f[c.config.props[g]];t[3].nodeId||t[3].populate(f),o=t[3];const u={};return u.x=20,u.y=20,u.size=40,t[4]||(t[4]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]),t},effects:[],context:{}},props:["size"],computed:{w(){return this.size==="large"?400:200},h(){return this.size==="large"?500:300}}}),ir=Y.Component("Components",{components:{Square:dt,Card:fs},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.x=100,n.y=100,n.size=50,typeof r<"u")for(let _ in r.config.props)delete n[r.config.props[_]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.x=100,a.y=100,a.size=50,t[2]||(t[2]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};if(f.x=100,f.y=200,f.size=100,typeof c<"u")for(let _ in c.config.props)delete f[c.config.props[_]];t[3].nodeId||t[3].populate(f),o=t[3];const u={};u.x=100,u.y=200,u.size=100,t[4]||(t[4]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]);const g=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const h={};if(h.x=100,h.y=350,h.size=200,typeof g<"u")for(let _ in g.config.props)delete h[g.config.props[_]];t[5].nodeId||t[5].populate(h),o=t[5];const p={};p.x=100,p.y=350,p.size=200,t[6]||(t[6]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:p},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const m=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const y={};if(y.y=600,y.size=50,typeof m<"u")for(let _ in m.config.props)delete y[m.config.props[_]];t[7].nodeId||t[7].populate(y),o=t[7];const b={};b.x={transition:e.x},b.y=600,b.size=50,t[8]||(t[8]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:b},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]);const v=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const S={};if(S.x=500,S.y=100,typeof v<"u")for(let _ in v.config.props)delete S[v.config.props[_]];t[9].nodeId||t[9].populate(S),o=t[9];const I={};I.x=500,I.y=100,t[10]||(t[10]=(s.components&&s.components.Card||e[Symbol.for("components")].Card||(()=>{console.error("component Card not found")})).call(null,{props:I},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]);const k=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const E={};if(E.x=500,E.y=500,E.size="large",typeof k<"u")for(let _ in k.config.props)delete E[k.config.props[_]];t[11].nodeId||t[11].populate(E),o=t[11];const x={};return x.x=500,x.y=500,x.size="large",t[12]||(t[12]=(s.components&&s.components.Card||e[Symbol.for("components")].Card||(()=>{console.error("component Card not found")})).call(null,{props:x},t[11],e),t[12][Symbol.for("slots")][0]?(o=t[12][Symbol.for("slots")][0],e=t[12]):o=t[12][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[7].set("x",{transition:o.x})},,function(o,e,s){e[8][Symbol.for("props")].x={transition:o.x}}],context:{}},state(){return{x:100}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100},2e3)}}}),de=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],nr=Y.Component("ForLoop",{components:{Square:dt},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=20,t[1].nodeId||t[1].populate(r),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const n={};n.y=120,t[3].nodeId||t[3].populate(n),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const a={};a.y=220,t[5].nodeId||t[5].populate(a),o=t[0],t[7]||(t[7]=this.element({parent:o||"root"},e));const c={};c.y=320,t[7].nodeId||t[7].populate(c),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const f={};f.y=420,t[10].nodeId||t[10].populate(f),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const u={};u.y=520,t[13].nodeId||t[13].populate(u),o=t[0],t[15]||(t[15]=this.element({parent:o||"root"},e));const g={};g.y=620,t[15].nodeId||t[15].populate(g),o=t[0],t[17]||(t[17]=this.element({parent:o||"root"},e));const h={};h.y=720,t[17].nodeId||t[17].populate(h),o=t[0],t[19]||(t[19]=this.element({parent:o||"root"},e));const p={};p.y=720,p.x=700,t[19].nodeId||t[19].populate(p),o=t[0],t[21]||(t[21]=this.element({parent:o||"root"},e));const m={};m.y=920,t[21].nodeId||t[21].populate(m),o=t[0],t[24]||(t[24]=this.element({parent:o||"root"},e));const y={};return y.y=920,y.x=700,t[24].nodeId||t[24].populate(y),t},effects:[function(o,e,s){parent=e[1];const t=o.collection1,l=[];for(let r=0;r<t.length;r++){parent=e[1],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString()),parent=e[1],e[2]=e[2]||{},e[2][n.key]||(e[2][n.key]=this.element({parent:parent||"root"},o));const a={};a.w=80,a.h=80,a.x=n.item,a.color="#4d7c0f",e[2][n.key].nodeId||e[2][n.key].populate(a)}e[2]&&Object.keys(e[2]).forEach(r=>{l.indexOf(r)===-1&&(e[2][r].delete&&e[2][r].delete(),e[2][r].destroy&&e[2][r].destroy(),delete e[2][r])})},,function(o,e,s){parent=e[3];const t=o.collection2,l=[];for(let r=0;r<t.length;r++){parent=e[3],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id),parent=e[3],e[4]=e[4]||{},e[4][n.item.id]||(e[4][n.item.id]=this.element({parent:parent||"root"},o));const a={};a.w=80,a.h=80,a.color=n.item.color,a.key=n.item.id,e[4][n.item.id].nodeId||e[4][n.item.id].populate(a),e[4][n.item.id].set("x",n.item.x*n.index)}e[4]&&Object.keys(e[4]).forEach(r=>{l.indexOf(r)===-1&&(e[4][r].delete&&e[4][r].delete(),e[4][r].destroy&&e[4][r].destroy(),delete e[4][r])})},,function(o,e,s){parent=e[5];const t=o.collection3,l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString()),parent=e[5],e[6]=e[6]||{},e[6][n.key]||(e[6][n.key]=this.element({parent:parent||"root"},o));const a={};a.w=80,a.h=80,a.color=n.item.color,e[6][n.key].nodeId||e[6][n.key].populate(a),e[6][n.key].set("x",n.item.x)}e[6]&&Object.keys(e[6]).forEach(r=>{l.indexOf(r)===-1&&(e[6][r].delete&&e[6][r].delete(),e[6][r].destroy&&e[6][r].destroy(),delete e[6][r])})},,function(o,e,s){parent=e[7];const t=o.collection2,l=[];for(let r=0;r<t.length;r++){parent=e[7],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString());const a=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[8]=e[8]||{},e[8][n.key]||(e[8][n.key]=this.element({parent:parent||"root"},o));const c={};if(typeof a<"u")for(let u in a.config.props)delete c[a.config.props[u]];e[8][n.key].nodeId||e[8][n.key].populate(c),e[9]=e[9]||{},parent=e[8][n.key];const f={};f.x=n.item.x*n.index,f.ref="square"+n.index,f.alpha=n.alpha,e[9][n.key]||(e[9][n.key]=(s.components&&s.components.Square||o[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:f},e[8][n.key],o),e[9][n.key][Symbol.for("slots")][0]?(parent=e[9][n.key][Symbol.for("slots")][0],o=e[9][n.key]):parent=e[9][n.key][Symbol.for("children")][0]),e[8][n.key].set("x",n.item.x*n.index),e[8][n.key].set("ref","square"+n.index),e[8][n.key].set("alpha",n.alpha),e[9][n.key][Symbol.for("props")].x=n.item.x*n.index,e[9][n.key][Symbol.for("props")].ref="square"+n.index,e[9][n.key][Symbol.for("props")].alpha=n.alpha}e[9]&&Object.keys(e[9]).forEach(r=>{l.indexOf(r)===-1&&(e[9][r].delete&&e[9][r].delete(),e[9][r].destroy&&e[9][r].destroy(),delete e[9][r])})},,function(o,e,s){parent=e[10];const t=o.collection3,l=[];for(let r=0;r<t.length;r++){parent=e[10],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.color);const a=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[11]=e[11]||{},e[11][n.item.color]||(e[11][n.item.color]=this.element({parent:parent||"root"},o));const c={};if(c.key=n.item.color,typeof a<"u")for(let u in a.config.props)delete c[a.config.props[u]];e[11][n.item.color].nodeId||e[11][n.item.color].populate(c),e[12]=e[12]||{},parent=e[11][n.item.color];const f={};f.x=n.item.x,f.key=n.item.color,f.alpha=n.alpha,e[12][n.item.color]||(e[12][n.item.color]=(s.components&&s.components.Square||o[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:f},e[11][n.item.color],o),e[12][n.item.color][Symbol.for("slots")][0]?(parent=e[12][n.item.color][Symbol.for("slots")][0],o=e[12][n.item.color]):parent=e[12][n.item.color][Symbol.for("children")][0]),e[11][n.item.color].set("x",n.item.x),e[11][n.item.color].set("alpha",n.alpha),e[12][n.item.color][Symbol.for("props")].x=n.item.x,e[12][n.item.color][Symbol.for("props")].alpha=n.alpha}e[12]&&Object.keys(e[12]).forEach(r=>{l.indexOf(r)===-1&&(e[12][r].delete&&e[12][r].delete(),e[12][r].destroy&&e[12][r].destroy(),delete e[12][r])})},,function(o,e,s){parent=e[13];const t=o.collection1,l=[];for(let r=0;r<t.length;r++){parent=e[13],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString()),parent=e[13],e[14]=e[14]||{},e[14][n.key]||(e[14][n.key]=this.element({parent:parent||"root"},o));const a={};a.w=80,a.h=80,a.color="#eab308",e[14][n.key].nodeId||e[14][n.key].populate(a),e[14][n.key].set("x",n.item),e[14][n.key].set("alpha",n.alpha)}e[14]&&Object.keys(e[14]).forEach(r=>{l.indexOf(r)===-1&&(e[14][r].delete&&e[14][r].delete(),e[14][r].destroy&&e[14][r].destroy(),delete e[14][r])})},,function(o,e,s){parent=e[15];const t=o.collection2,l=[];for(let r=0;r<t.length;r++){parent=e[15],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id),parent=e[15],e[16]=e[16]||{},e[16][n.item.id]||(e[16][n.item.id]=this.element({parent:parent||"root"},o));const a={};a.w=80,a.h=80,a.color=n.item.color,a.key=n.item.id,e[16][n.item.id].nodeId||e[16][n.item.id].populate(a),e[16][n.item.id].set("x",n.item.x),e[16][n.item.id].set("alpha",n.alpha)}e[16]&&Object.keys(e[16]).forEach(r=>{l.indexOf(r)===-1&&(e[16][r].delete&&e[16][r].delete(),e[16][r].destroy&&e[16][r].destroy(),delete e[16][r])})},,function(o,e,s){parent=e[17];const t=o.collection4,l=[];for(let r=0;r<t.length;r++){parent=e[17],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id),parent=e[17],e[18]=e[18]||{},e[18][n.item.id]||(e[18][n.item.id]=this.element({parent:parent||"root"},o));const a={};a.w=80,a.h=80,a.color="#06b6d4",a.key=n.item.id,e[18][n.item.id].nodeId||e[18][n.item.id].populate(a),e[18][n.item.id].set("x",n.item.x)}e[18]&&Object.keys(e[18]).forEach(r=>{l.indexOf(r)===-1&&(e[18][r].delete&&e[18][r].delete(),e[18][r].destroy&&e[18][r].destroy(),delete e[18][r])})},,function(o,e,s){parent=e[19];const t=o.collection4,l=[];for(let r=0;r<t.length;r++){parent=e[19],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString()),parent=e[19],e[20]=e[20]||{},e[20][n.key]||(e[20][n.key]=this.element({parent:parent||"root"},o));const a={};a.w=80,a.h=80,a.color="#8b5cf6",e[20][n.key].nodeId||e[20][n.key].populate(a),e[20][n.key].set("x",n.item.x)}e[20]&&Object.keys(e[20]).forEach(r=>{l.indexOf(r)===-1&&(e[20][r].delete&&e[20][r].delete(),e[20][r].destroy&&e[20][r].destroy(),delete e[20][r])})},,function(o,e,s){parent=e[21];const t=o.collection4,l=[];for(let r=0;r<t.length;r++){parent=e[21],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.item.id);const a=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[22]=e[22]||{},e[22][n.item.id]||(e[22][n.item.id]=this.element({parent:parent||"root"},o));const c={};if(c.w=80,c.h=80,c.key=n.item.id,typeof a<"u")for(let u in a.config.props)delete c[a.config.props[u]];e[22][n.item.id].nodeId||e[22][n.item.id].populate(c),e[23]=e[23]||{},parent=e[22][n.item.id];const f={};f.w=80,f.h=80,f.x=n.item.x,f.key=n.item.id,e[23][n.item.id]||(e[23][n.item.id]=(s.components&&s.components.Square||o[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:f},e[22][n.item.id],o),e[23][n.item.id][Symbol.for("slots")][0]?(parent=e[23][n.item.id][Symbol.for("slots")][0],o=e[23][n.item.id]):parent=e[23][n.item.id][Symbol.for("children")][0]),e[22][n.item.id].set("x",n.item.x),e[23][n.item.id][Symbol.for("props")].x=n.item.x}e[23]&&Object.keys(e[23]).forEach(r=>{l.indexOf(r)===-1&&(e[23][r].delete&&e[23][r].delete(),e[23][r].destroy&&e[23][r].destroy(),delete e[23][r])})},,function(o,e,s){parent=e[24];const t=o.collection4,l=[];for(let r=0;r<t.length;r++){parent=e[24],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,item:t[r]});l.push(n.key.toString());const a=s.components&&s.components.Square||o[Symbol.for("components")].Square;e[25]=e[25]||{},e[25][n.key]||(e[25][n.key]=this.element({parent:parent||"root"},o));const c={};if(c.w=80,c.h=80,typeof a<"u")for(let u in a.config.props)delete c[a.config.props[u]];e[25][n.key].nodeId||e[25][n.key].populate(c),e[26]=e[26]||{},parent=e[25][n.key];const f={};f.w=80,f.h=80,f.x=n.item.x,e[26][n.key]||(e[26][n.key]=(s.components&&s.components.Square||o[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:f},e[25][n.key],o),e[26][n.key][Symbol.for("slots")][0]?(parent=e[26][n.key][Symbol.for("slots")][0],o=e[26][n.key]):parent=e[26][n.key][Symbol.for("children")][0]),e[25][n.key].set("x",n.item.x),e[26][n.key][Symbol.for("props")].x=n.item.x}e[26]&&Object.keys(e[26]).forEach(r=>{l.indexOf(r)===-1&&(e[26][r].delete&&e[26][r].delete(),e[26][r].destroy&&e[26][r].destroy(),delete e[26][r])})}],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:de[0]},{id:"block2",x:100,color:de[1]},{id:"block3",x:200,color:de[2]},{id:"block4",x:300,color:de[3]},{id:"block5",x:400,color:de[4]},{id:"block6",x:500,color:de[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=de[5],this.collection2[1].color=de[4],this.collection2[2].color=de[3],this.collection2[3].color=de[2],this.collection2[4].color=de[1],this.collection2[5].color=de[0]},4e3);let i=0;const o=this.$setInterval(()=>{this.collection3.push({x:i*100,color:de[i]}),i++,i===de.length&&clearInterval(o)},1e3);this.$setTimeout(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:"four"},{x:500,id:"five"}]},2e3)}}}),rr=Y.Component("Effects",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=160,r.h=160,r.x=40,r.y=40,r.color="#fb923c",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=160,n.h=160,n.x=240,n.y=40,n.color="#d97706",t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.w=160,a.h=160,a.x=440,a.y=40,a.color="#b45309",t[3].nodeId||t[3].populate(a),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=160,c.h=160,c.x=640,c.y=40,c.color="#78350f",t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.w=160,f.h=160,f.x=40,f.y=240,f.color="#65a30d",t[5].nodeId||t[5].populate(f),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.w=300,u.h=300,u.x=40,u.y=440,u.color="#0c4a6e",t[6].nodeId||t[6].populate(u),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.w=200,g.h=200,g.x=50,g.y=50,g.color="#0284c7",t[7].nodeId||t[7].populate(g),o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const h={};h.w=100,h.h=100,h.x=50,h.y=50,h.color="#38bdf8",t[8].nodeId||t[8].populate(h),o=t[8],t[9]||(t[9]=this.element({parent:o||"root"},e));const p={};p.w=40,p.h=40,p.x=30,p.y=30,p.color="#bae6fd",t[9].nodeId||t[9].populate(p),o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.w=160,m.h=160,m.x=840,m.y=40,m.color="#3b82f6",t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};return y.w=160,y.h=160,y.x=1040,y.y=40,y.color="#500724",t[11].nodeId||t[11].populate(y),t},effects:[function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:44})])},,function(o,e,s){e[2].set("effects",[o.shader("radius",{radius:25})])},,function(o,e,s){e[3].set("effects",[o.shader("radius",{radius:80})])},,function(o,e,s){e[4].set("effects",[o.shader("radius",{radius:10})])},,function(o,e,s){e[5].set("effects",[o.shader("radius",{radius:o.radius})])},,function(o,e,s){e[6].set("effects",[o.shader("radius",{radius:30})])},,function(o,e,s){e[7].set("effects",[o.shader("radius",{radius:40})])},,function(o,e,s){e[8].set("effects",[o.shader("radius",{radius:50})])},,function(o,e,s){e[9].set("effects",[o.shader("radius",{radius:20})])},,function(o,e,s){e[10].set("effects",[o.shader("radius",{radius:10}),o.shader("border",{width:20,color:"#60a5fa"})])},,function(o,e,s){e[11].set("effects",o.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]}},hooks:{ready(){this.$setInterval(()=>{const o=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(o,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let i=0;this.$setInterval(()=>{i++,i%2?this.effects=[this.shader("borderLeft",{width:20,color:"#be123c"}),this.shader("borderRight",{width:20,color:"#f43f5e"})]:this.effects=[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]},2e3)}}}),lr=Y.Component("ShowIf",{components:{Square:dt},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.y=40,t[1].nodeId||t[1].populate(r),o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.x=50,n.w=200,n.h=300,n.color="#bef264",n.show=!0,t[2].nodeId||t[2].populate(n),o=t[1],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.x=350,a.w=200,a.h=300,a.color="#bef264",a.show=!1,t[3].nodeId||t[3].populate(a),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.x=650,c.w=200,c.h=300,c.color="#84cc16",c.show=1,t[4].nodeId||t[4].populate(c),o=t[1],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};f.x=950,f.w=200,f.h=300,f.color="#84cc16",f.show=0,t[5].nodeId||t[5].populate(f),o=t[0],t[6]||(t[6]=this.element({parent:o||"root"},e));const u={};u.y=380,t[6].nodeId||t[6].populate(u),o=t[6],t[7]||(t[7]=this.element({parent:o||"root"},e));const g={};g.x=50,g.w=200,g.h=300,g.color="#fde047",g.show=e.showNr,t[7].nodeId||t[7].populate(g),o=t[6],t[8]||(t[8]=this.element({parent:o||"root"},e));const h={};h.x=350,h.w=200,h.h=300,h.color="#fde047",h.show=e.hideNr,t[8].nodeId||t[8].populate(h),o=t[6],t[9]||(t[9]=this.element({parent:o||"root"},e));const p={};p.x=650,p.w=200,p.h=300,p.color="#84cc16",p.show=e.showBool,t[9].nodeId||t[9].populate(p),o=t[6],t[10]||(t[10]=this.element({parent:o||"root"},e));const m={};m.x=950,m.w=200,m.h=300,m.color="#84cc16",m.show=e.hideBool,t[10].nodeId||t[10].populate(m),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const y={};y.y=720,t[11].nodeId||t[11].populate(y),o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const b={};b.x=50,b.w=200,b.h=300,b.color="#5eead4",t[12].nodeId||t[12].populate(b),o=t[0],t[13]||(t[13]=this.element({parent:o||"root"},e));const v={};v.y=40,v.x=1e3,t[13].nodeId||t[13].populate(v);const S=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[14]||(t[14]=this.element({parent:o||"root"},e));const I={};if(I.show=!0,typeof S<"u")for(let z in S.config.props)delete I[S.config.props[z]];t[14].nodeId||t[14].populate(I),o=t[14];const k={};k.show=!0,t[15]||(t[15]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:k},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]);const E=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[16]||(t[16]=this.element({parent:o||"root"},e));const x={};if(x.y=100,x.show=!1,typeof E<"u")for(let z in E.config.props)delete x[E.config.props[z]];t[16].nodeId||t[16].populate(x),o=t[16];const _={};_.y=100,_.show=!1,t[17]||(t[17]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:_},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]);const A=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[13],t[18]||(t[18]=this.element({parent:o||"root"},e));const R={};if(R.y=200,typeof A<"u")for(let z in A.config.props)delete R[A.config.props[z]];t[18].nodeId||t[18].populate(R),o=t[18];const M={};return M.y=200,M.show=e.showHideToggle,t[19]||(t[19]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:M},t[18],e),t[19][Symbol.for("slots")][0]?(o=t[19][Symbol.for("slots")][0],e=t[19]):o=t[19][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[12].set("show",o.showHideToggle)},,function(o,e,s){e[18].set("show",o.showHideToggle)},,function(o,e,s){e[19][Symbol.for("props")].show=o.showHideToggle}],context:{}},state(){return{showNr:1,hidNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),ar=Y.Component("Events",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.x=400,l.y=360,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=280,r.h=280,r.color="#e5e7eb",r.y=-5,t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};n.w=250,n.h=250,n.x=10,n.y=10,n.color=e.colors[0],t[2].nodeId||t[2].populate(n),o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const a={};a.w=250,a.h=250,a.x=290,a.y=10,a.color=e.colors[1],t[3].nodeId||t[3].populate(a),o=t[0],t[4]||(t[4]=this.element({parent:o||"root"},e));const c={};c.w=250,c.h=250,c.x=570,c.y=10,c.color=e.colors[2],t[4].nodeId||t[4].populate(c),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const f={};return f.w=250,f.h=250,f.x=850,f.y=10,f.color=e.colors[3],t[5].nodeId||t[5].populate(f),t},effects:[function(o,e,s){e[1].set("x",o.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(i){const o=this.count-1;o===-1?this.parent.focus(i):this.count=Math.max(o,0)},right(i){const o=this.count+1;o===4?this.parent.focus(i):this.count=Math.min(o,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),fr=Y.Component("SlotCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=300,l.h=500,l.color="{top: '#94a3b8', bottom: '#475569'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r[Symbol.for("isSlot")]=!0,r.x=20,r.y=20,t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const a={};if(a.content=e.label,a.wordwrap=260,a.x=20,a.y=400,a.align="center",typeof n<"u")for(let f in n.config.props)delete a[n.config.props[f]];t[2].nodeId||t[2].populate(a),o=t[2];const c={};return c.content=e.label,c.wordwrap=260,c.x=20,c.y=400,c.align="center",t[3]||(t[3]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:20}),o.shader("border",{width:6,color:"#e2e8f0"})])}],context:{}},props:[{key:"label"}]}),cr=Y.Component("NamedSlotCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=700,l.h=300,l.color="{top: '#94a3b8', bottom: '#475569'}",t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.x=20,r.y=20,t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const a={};if(a.content="First slot",typeof n<"u")for(let k in n.config.props)delete a[n.config.props[k]];t[2].nodeId||t[2].populate(a),o=t[2];const c={};c.content="First slot",t[3]||(t[3]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const f={};f[Symbol.for("isSlot")]=!0,f.y=40,f.ref="first",t[4].nodeId||t[4].populate(f),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const u={};u.x=200,u.y=20,t[5].nodeId||t[5].populate(u);const g=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[5],t[6]||(t[6]=this.element({parent:o||"root"},e));const h={};if(h.content="Second slot",typeof g<"u")for(let k in g.config.props)delete h[g.config.props[k]];t[6].nodeId||t[6].populate(h),o=t[6];const p={};p.content="Second slot",t[7]||(t[7]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:p},t[6],e),t[7][Symbol.for("slots")][0]?(o=t[7][Symbol.for("slots")][0],e=t[7]):o=t[7][Symbol.for("children")][0]),o=t[5],t[8]||(t[8]=this.element({parent:o||"root"},e));const m={};m[Symbol.for("isSlot")]=!0,m.y=40,m.ref="second",t[8].nodeId||t[8].populate(m),o=t[0],t[9]||(t[9]=this.element({parent:o||"root"},e));const y={};y.x=480,y.y=20,t[9].nodeId||t[9].populate(y);const b=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[9],t[10]||(t[10]=this.element({parent:o||"root"},e));const v={};if(v.content="Third slot",typeof b<"u")for(let k in b.config.props)delete v[b.config.props[k]];t[10].nodeId||t[10].populate(v),o=t[10];const S={};S.content="Third slot",t[11]||(t[11]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:S},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),o=t[9],t[12]||(t[12]=this.element({parent:o||"root"},e));const I={};return I[Symbol.for("isSlot")]=!0,I.y=40,I.ref="third",t[12].nodeId||t[12].populate(I),t},effects:[function(o,e,s){e[0].set("effects",[o.shader("radius",{radius:20}),o.shader("border",{width:6,color:"#e2e8f0"})])}],context:{}}}),Ze=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],dr=Y.Component("Components",{components:{SlotCard:fr,NamedSlotCard:cr,Card:fs,Square:dt},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.x=400,n.y=100,n.label="Element",typeof r<"u")for(let W in r.config.props)delete n[r.config.props[W]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.x=400,a.y=100,a.label="Element",t[2]||(t[2]=(s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard||(()=>{console.error("component SlotCard not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]),t[3]||(t[3]=this.element({parent:o||"root"},e));const c={};t[3].nodeId||t[3].populate(c),o=t[3],t[4]||(t[4]=this.element({parent:o||"root"},e));const f={};f.w=100,f.h=100,t[4].nodeId||t[4].populate(f);const u=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const g={};if(g.x=800,g.y=100,g.label="Component",typeof u<"u")for(let W in u.config.props)delete g[u.config.props[W]];t[5].nodeId||t[5].populate(g),o=t[5];const h={};h.x=800,h.y=100,h.label="Component",t[6]||(t[6]=(s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard||(()=>{console.error("component SlotCard not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]),t[7]||(t[7]=this.element({parent:o||"root"},e));const p={};t[7].nodeId||t[7].populate(p);const m=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[7],t[8]||(t[8]=this.element({parent:o||"root"},e));const y={};if(y.size=200,y.y=50,typeof m<"u")for(let W in m.config.props)delete y[m.config.props[W]];t[8].nodeId||t[8].populate(y),o=t[8];const b={};b.size=200,b.y=50,t[9]||(t[9]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:b},t[8],e),t[9][Symbol.for("slots")][0]?(o=t[9][Symbol.for("slots")][0],e=t[9]):o=t[9][Symbol.for("children")][0]);const v=s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard;o=t[0],t[10]||(t[10]=this.element({parent:o||"root"},e));const S={};if(S.x=1200,S.y=100,S.label="Element & Component",typeof v<"u")for(let W in v.config.props)delete S[v.config.props[W]];t[10].nodeId||t[10].populate(S),o=t[10];const I={};I.x=1200,I.y=100,I.label="Element & Component",t[11]||(t[11]=(s.components&&s.components.SlotCard||e[Symbol.for("components")].SlotCard||(()=>{console.error("component SlotCard not found")})).call(null,{props:I},t[10],e),t[11][Symbol.for("slots")][0]?(o=t[11][Symbol.for("slots")][0],e=t[11]):o=t[11][Symbol.for("children")][0]),t[12]||(t[12]=this.element({parent:o||"root"},e));const k={};t[12].nodeId||t[12].populate(k),o=t[12],t[13]||(t[13]=this.element({parent:o||"root"},e));const E={};E.w=100,E.h=100,t[13].nodeId||t[13].populate(E);const x=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[12],t[14]||(t[14]=this.element({parent:o||"root"},e));const _={};if(_.size=200,_.y=150,typeof x<"u")for(let W in x.config.props)delete _[x.config.props[W]];t[14].nodeId||t[14].populate(_),o=t[14];const A={};A.size=200,A.y=150,t[15]||(t[15]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:A},t[14],e),t[15][Symbol.for("slots")][0]?(o=t[15][Symbol.for("slots")][0],e=t[15]):o=t[15][Symbol.for("children")][0]);const R=s.components&&s.components.Card||e[Symbol.for("components")].Card;o=t[0],t[16]||(t[16]=this.element({parent:o||"root"},e));const M={};if(M.x=400,M.y=700,M.size="small",typeof R<"u")for(let W in R.config.props)delete M[R.config.props[W]];t[16].nodeId||t[16].populate(M),o=t[16];const z={};z.x=400,z.y=700,z.size="small",t[17]||(t[17]=(s.components&&s.components.Card||e[Symbol.for("components")].Card||(()=>{console.error("component Card not found")})).call(null,{props:z},t[16],e),t[17][Symbol.for("slots")][0]?(o=t[17][Symbol.for("slots")][0],e=t[17]):o=t[17][Symbol.for("children")][0]),t[18]||(t[18]=this.element({parent:o||"root"},e));const P={};t[18].nodeId||t[18].populate(P),o=t[18],t[19]||(t[19]=this.element({parent:o||"root"},e));const F={};F.w=100,F.h=100,t[19].nodeId||t[19].populate(F);const w=s.components&&s.components.NamedSlotCard||e[Symbol.for("components")].NamedSlotCard;o=t[0],t[20]||(t[20]=this.element({parent:o||"root"},e));const T={};if(T.x=800,T.y=700,typeof w<"u")for(let W in w.config.props)delete T[w.config.props[W]];t[20].nodeId||t[20].populate(T),o=t[20];const L={};L.x=800,L.y=700,t[21]||(t[21]=(s.components&&s.components.NamedSlotCard||e[Symbol.for("components")].NamedSlotCard||(()=>{console.error("component NamedSlotCard not found")})).call(null,{props:L},t[20],e),t[21][Symbol.for("slots")][0]?(o=t[21][Symbol.for("slots")][0],e=t[21]):o=t[21][Symbol.for("children")][0]),t[22]||(t[22]=this.element({parent:o||"root"},e));const O={};t[22].nodeId||t[22].populate(O),o=t[22],t[23]||(t[23]=this.element({parent:o||"root"},e));const N={};N.color="#0891b2",N.x=10,N.y=140,N.w=80,N.h=60,N.parent=e[Symbol.for("slots")].filter(W=>W.ref==="second").shift()||e[Symbol.for("slots")][0]||o,N.slot="second",t[23].nodeId||t[23].populate(N),o=t[22],t[24]||(t[24]=this.element({parent:o||"root"},e));const $={};$.w=100,$.h=100,$.parent=e[Symbol.for("slots")].filter(W=>W.ref==="third").shift()||e[Symbol.for("slots")][0]||o,$.slot="third",t[24].nodeId||t[24].populate($);const B=s.components&&s.components.Square||e[Symbol.for("components")].Square;o=t[22],t[25]||(t[25]=this.element({parent:o||"root"},e));const U={};if(U.size=100,U.parent=e[Symbol.for("slots")].filter(W=>W.ref==="first").shift()||e[Symbol.for("slots")][0]||o,U.slot="first",typeof B<"u")for(let W in B.config.props)delete U[B.config.props[W]];t[25].nodeId||t[25].populate(U),o=t[25];const X={};X.size=100,X.slot="first",t[26]||(t[26]=(s.components&&s.components.Square||e[Symbol.for("components")].Square||(()=>{console.error("component Square not found")})).call(null,{props:X},t[25],e),t[26][Symbol.for("slots")][0]?(o=t[26][Symbol.for("slots")][0],e=t[26]):o=t[26][Symbol.for("children")][0]),o=t[22],t[27]||(t[27]=this.element({parent:o||"root"},e));const H={};return H.color="#4d7c0f",H.x=40,H.y=40,H.w=40,H.h=60,H.parent=e[Symbol.for("slots")].filter(W=>W.ref==="second").shift()||e[Symbol.for("slots")][0]||o,H.slot="second",t[27].nodeId||t[27].populate(H),t},effects:[function(o,e,s){e[4].set("color",o.color)},,function(o,e,s){e[13].set("color",o.color)},,function(o,e,s){e[19].set("color",o.color)},,function(o,e,s){e[24].set("color",o.color)}],context:{}},state(){return{color:Ze[0]}},hooks:{ready(){this.$setInterval(()=>{const i=Ze.indexOf(this.color)+1;this.color=i<=Ze.length?Ze[i]:Ze[0]},600)}}}),ur=Y.Component("MemoryCard",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=320,l.h=200,l.x=e.col*360,l.y=e.row*250,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};r.w=320,r.y=125,r.mount="{y: 0.5}",t[1].nodeId||t[1].populate(r),o=t[0],t[2]||(t[2]=this.element({parent:o||"root"},e));const n={};return n.w=320,n.y=125,n.mount="{y: 0.5}",t[2].nodeId||t[2].populate(n),t},effects:[function(o,e,s){e[0].set("scale",{transition:o.scale})},,function(o,e,s){e[0].set("rotation",{transition:o.disabled?-2:0})},,function(o,e,s){e[1].set("h",{transition:o.h})},,function(o,e,s){e[1].set("color",{transition:o.disabled?"#ccc":"#fff"})},,function(o,e,s){e[1].set("src",o.image+"&w=320&h=200")},,function(o,e,s){e[1].set("effects",[o.shader("radius",{radius:6})])},,function(o,e,s){e[1].set("show",o.open)},,function(o,e,s){e[2].set("h",{transition:o.h})},,function(o,e,s){e[2].set("color",o.open?"transparent":{top:"#efefef",bottom:"#aaa"})},,function(o,e,s){e[2].set("effects",[o.shader("radius",{radius:6})])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1}},hooks:{init(){this.$listen("closeMemoryCard",i=>{i===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",i=>{i===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(i){this.scale=1.08;const o="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.$announcer.speak(o)},unfocus(){this.scale=1}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),Ro=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],hr=Y.Component("Announcer",{components:{MemoryCard:ur},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(n.font="raleway",n.size=80,n.color="white",n.content="Let's play memory!",n.x=580,n.y=60,typeof r<"u")for(let h in r.config.props)delete n[r.config.props[h]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};a.font="raleway",a.size=80,a.color="white",a.content="Let's play memory!",a.x=580,a.y=60,t[2]||(t[2]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.Text||e[Symbol.for("components")].Text;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};if(f.font="kalam",f.size=40,f.color="#b91c1c",f.content="the Accessible edition :)",f.x=1200,f.y=170,f.rotation=-6,typeof c<"u")for(let h in c.config.props)delete f[c.config.props[h]];t[3].nodeId||t[3].populate(f),o=t[3];const u={};u.font="kalam",u.size=40,u.color="#b91c1c",u.content="the Accessible edition :)",u.x=1200,u.y=170,u.rotation=-6,t[4]||(t[4]=(s.components&&s.components.Text||e[Symbol.for("components")].Text||(()=>{console.error("component Text not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]),o=t[0],t[5]||(t[5]=this.element({parent:o||"root"},e));const g={};return g.x=260,g.y=260,t[5].nodeId||t[5].populate(g),t},effects:[function(o,e,s){parent=e[5];const t=o.cards,l=[];for(let r=0;r<t.length;r++){parent=e[5],o.key||(l.length=0);const n=Object.assign(o,{key:Math.random(),index:r,card:t[r]});l.push(n.key.toString());const a=s.components&&s.components.MemoryCard||o[Symbol.for("components")].MemoryCard;e[6]=e[6]||{},e[6][n.key]||(e[6][n.key]=this.element({parent:parent||"root"},o));const c={};if(c.image=n.card.image,c.description=n.card.description,typeof a<"u")for(let u in a.config.props)delete c[a.config.props[u]];e[6][n.key].nodeId||e[6][n.key].populate(c),e[7]=e[7]||{},parent=e[6][n.key];const f={};f.col=n.index%4,f.row=Math.floor(n.index/4)%3,f.key=n.card.image,f.image=n.card.image,f.description=n.card.description,f.ref="card"+n.index,f.index=n.index,e[7][n.key]||(e[7][n.key]=(s.components&&s.components.MemoryCard||o[Symbol.for("components")].MemoryCard||(()=>{console.error("component MemoryCard not found")})).call(null,{props:f},e[6][n.key],o),e[7][n.key][Symbol.for("slots")][0]?(parent=e[7][n.key][Symbol.for("slots")][0],o=e[7][n.key]):parent=e[7][n.key][Symbol.for("children")][0]),e[6][n.key].set("col",n.index%4),e[6][n.key].set("row",Math.floor(n.index/4)%3),e[6][n.key].set("key",n.card.image),e[6][n.key].set("ref","card"+n.index),e[6][n.key].set("index",n.index),e[7][n.key][Symbol.for("props")].col=n.index%4,e[7][n.key][Symbol.for("props")].row=Math.floor(n.index/4)%3,e[7][n.key][Symbol.for("props")].key=n.card.image,e[7][n.key][Symbol.for("props")].ref="card"+n.index,e[7][n.key][Symbol.for("props")].index=n.index}e[7]&&Object.keys(e[7]).forEach(r=>{l.indexOf(r)===-1&&(e[7][r].delete&&e[7][r].delete(),e[7][r].destroy&&e[7][r].destroy(),delete e[7][r])})}],context:{}},state(){return{cards:Ro.concat(Ro),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",i=>{this.openCards.length<2&&this.openCards.push(i),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(i){if(this.focusedRow===-1){this.focusedRow=0;return}i=i+this.focusedRow*4,this.select("card"+i).focus()},focusedRow(i){if(this.focusedCol===-1){this.focusedCol=0;return}i=this.focusedCol+i*4,this.select("card"+i).focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),Je=(i,o)=>Math.floor(Math.random()*(o-i+1)+i),pr=Y.Component("Item",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};return l.src="assets/blits-b-small.png",l.w=96,l.h=168,t[0].nodeId||t[0].populate(l),t},effects:[function(o,e,s){e[0].set("x",{transition:{value:o.x,duration:2900}})},,function(o,e,s){e[0].set("y",{transition:{value:o.y,duration:2900}})},,function(o,e,s){e[0].set("rotation",{transition:{value:o.rotation,duration:2900}})},,function(o,e,s){e[0].set("scale",{transition:{value:o.scale,duration:1e3}})}],context:{}},state(){return{x:Je(20,1560),y:Je(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=Je(20,1740),this.y=Je(20,900),this.rotation=Je(10,360)},3e3)}}}),mr=Y.Component("Exponential",{components:{Item:pr},template:`<Element>
    <Item :for="item in $items" key="$item" />
  </Element>`,state(){return{items:[]}},hooks:{ready(){const i=this.$setInterval(()=>{for(let o=0;o<=Math.floor(this.items.length/10);o++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(i)},2e3)}}}),gr=Y.Component("FPScounter",{code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.y=15,l.x=20,t[0].nodeId||t[0].populate(l),o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const r={};t[1].nodeId||t[1].populate(r);const n=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[1],t[2]||(t[2]=this.element({parent:o||"root"},e));const a={};if(a.image="assets/fps_sprite.png",a.w=43,a.h=25,a.map=e.sprite,a.frame="fps",typeof n<"u")for(let j in n.config.props)delete a[n.config.props[j]];t[2].nodeId||t[2].populate(a),o=t[2];const c={};c.image="assets/fps_sprite.png",c.w=43,c.h=25,c.map=e.sprite,c.frame="fps",t[3]||(t[3]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:c},t[2],e),t[3][Symbol.for("slots")][0]?(o=t[3][Symbol.for("slots")][0],e=t[3]):o=t[3][Symbol.for("children")][0]),o=t[1],t[4]||(t[4]=this.element({parent:o||"root"},e));const f={};f.x=58,f.y=2,t[4].nodeId||t[4].populate(f);const u=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[4],t[5]||(t[5]=this.element({parent:o||"root"},e));const g={};if(g.image="assets/fps_sprite.png",g.x=0,g.h=20,g.w=20,g.map=e.sprite,typeof u<"u")for(let j in u.config.props)delete g[u.config.props[j]];t[5].nodeId||t[5].populate(g),o=t[5];const h={};h.image="assets/fps_sprite.png",h.x=0,h.h=20,h.w=20,h.map=e.sprite,h.frame=e.fps[0],t[6]||(t[6]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:h},t[5],e),t[6][Symbol.for("slots")][0]?(o=t[6][Symbol.for("slots")][0],e=t[6]):o=t[6][Symbol.for("children")][0]);const p=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[4],t[7]||(t[7]=this.element({parent:o||"root"},e));const m={};if(m.image="assets/fps_sprite.png",m.x=18,m.h=20,m.w=20,m.map=e.sprite,typeof p<"u")for(let j in p.config.props)delete m[p.config.props[j]];t[7].nodeId||t[7].populate(m),o=t[7];const y={};y.image="assets/fps_sprite.png",y.x=18,y.h=20,y.w=20,y.map=e.sprite,y.frame=e.fps[1],t[8]||(t[8]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:y},t[7],e),t[8][Symbol.for("slots")][0]?(o=t[8][Symbol.for("slots")][0],e=t[8]):o=t[8][Symbol.for("children")][0]);const b=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[4],t[9]||(t[9]=this.element({parent:o||"root"},e));const v={};if(v.image="assets/fps_sprite.png",v.x=36,v.h=20,v.w=20,v.map=e.sprite,typeof b<"u")for(let j in b.config.props)delete v[b.config.props[j]];t[9].nodeId||t[9].populate(v),o=t[9];const S={};S.image="assets/fps_sprite.png",S.x=36,S.h=20,S.w=20,S.map=e.sprite,S.frame=e.fps[2],t[10]||(t[10]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:S},t[9],e),t[10][Symbol.for("slots")][0]?(o=t[10][Symbol.for("slots")][0],e=t[10]):o=t[10][Symbol.for("children")][0]),o=t[0],t[11]||(t[11]=this.element({parent:o||"root"},e));const I={};I.x=150,t[11].nodeId||t[11].populate(I);const k=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[11],t[12]||(t[12]=this.element({parent:o||"root"},e));const E={};if(E.image="assets/fps_sprite.png",E.y=2,E.w=48,E.h=25,E.map=e.sprite,E.frame="avg",typeof k<"u")for(let j in k.config.props)delete E[k.config.props[j]];t[12].nodeId||t[12].populate(E),o=t[12];const x={};x.image="assets/fps_sprite.png",x.y=2,x.w=48,x.h=25,x.map=e.sprite,x.frame="avg",t[13]||(t[13]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:x},t[12],e),t[13][Symbol.for("slots")][0]?(o=t[13][Symbol.for("slots")][0],e=t[13]):o=t[13][Symbol.for("children")][0]),o=t[11],t[14]||(t[14]=this.element({parent:o||"root"},e));const _={};_.x=63,_.y=2,t[14].nodeId||t[14].populate(_);const A=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[14],t[15]||(t[15]=this.element({parent:o||"root"},e));const R={};if(R.image="assets/fps_sprite.png",R.x=0,R.h=20,R.w=20,R.map=e.sprite,typeof A<"u")for(let j in A.config.props)delete R[A.config.props[j]];t[15].nodeId||t[15].populate(R),o=t[15];const M={};M.image="assets/fps_sprite.png",M.x=0,M.h=20,M.w=20,M.map=e.sprite,M.frame=e.avgFps[0],t[16]||(t[16]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:M},t[15],e),t[16][Symbol.for("slots")][0]?(o=t[16][Symbol.for("slots")][0],e=t[16]):o=t[16][Symbol.for("children")][0]);const z=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[14],t[17]||(t[17]=this.element({parent:o||"root"},e));const P={};if(P.image="assets/fps_sprite.png",P.x=18,P.h=20,P.w=20,P.map=e.sprite,typeof z<"u")for(let j in z.config.props)delete P[z.config.props[j]];t[17].nodeId||t[17].populate(P),o=t[17];const F={};F.image="assets/fps_sprite.png",F.x=18,F.h=20,F.w=20,F.map=e.sprite,F.frame=e.avgFps[1],t[18]||(t[18]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:F},t[17],e),t[18][Symbol.for("slots")][0]?(o=t[18][Symbol.for("slots")][0],e=t[18]):o=t[18][Symbol.for("children")][0]);const w=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[14],t[19]||(t[19]=this.element({parent:o||"root"},e));const T={};if(T.image="assets/fps_sprite.png",T.x=36,T.h=20,T.w=20,T.map=e.sprite,typeof w<"u")for(let j in w.config.props)delete T[w.config.props[j]];t[19].nodeId||t[19].populate(T),o=t[19];const L={};L.image="assets/fps_sprite.png",L.x=36,L.h=20,L.w=20,L.map=e.sprite,L.frame=e.avgFps[2],t[20]||(t[20]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:L},t[19],e),t[20][Symbol.for("slots")][0]?(o=t[20][Symbol.for("slots")][0],e=t[20]):o=t[20][Symbol.for("children")][0]),o=t[0],t[21]||(t[21]=this.element({parent:o||"root"},e));const O={};O.x=0,O.y=40,t[21].nodeId||t[21].populate(O);const N=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[21],t[22]||(t[22]=this.element({parent:o||"root"},e));const $={};if($.image="assets/fps_sprite.png",$.x=-2,$.w=47,$.h=25,$.map=e.sprite,$.frame="min",typeof N<"u")for(let j in N.config.props)delete $[N.config.props[j]];t[22].nodeId||t[22].populate($),o=t[22];const B={};B.image="assets/fps_sprite.png",B.x=-2,B.w=47,B.h=25,B.map=e.sprite,B.frame="min",t[23]||(t[23]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:B},t[22],e),t[23][Symbol.for("slots")][0]?(o=t[23][Symbol.for("slots")][0],e=t[23]):o=t[23][Symbol.for("children")][0]),o=t[21],t[24]||(t[24]=this.element({parent:o||"root"},e));const U={};U.x=58,U.y=2,t[24].nodeId||t[24].populate(U);const X=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[24],t[25]||(t[25]=this.element({parent:o||"root"},e));const H={};if(H.image="assets/fps_sprite.png",H.x=0,H.h=20,H.w=20,H.map=e.sprite,typeof X<"u")for(let j in X.config.props)delete H[X.config.props[j]];t[25].nodeId||t[25].populate(H),o=t[25];const W={};W.image="assets/fps_sprite.png",W.x=0,W.h=20,W.w=20,W.map=e.sprite,W.frame=e.minFps[0],t[26]||(t[26]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:W},t[25],e),t[26][Symbol.for("slots")][0]?(o=t[26][Symbol.for("slots")][0],e=t[26]):o=t[26][Symbol.for("children")][0]);const Q=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[24],t[27]||(t[27]=this.element({parent:o||"root"},e));const V={};if(V.image="assets/fps_sprite.png",V.x=18,V.h=20,V.w=20,V.map=e.sprite,typeof Q<"u")for(let j in Q.config.props)delete V[Q.config.props[j]];t[27].nodeId||t[27].populate(V),o=t[27];const G={};G.image="assets/fps_sprite.png",G.x=18,G.h=20,G.w=20,G.map=e.sprite,G.frame=e.minFps[1],t[28]||(t[28]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:G},t[27],e),t[28][Symbol.for("slots")][0]?(o=t[28][Symbol.for("slots")][0],e=t[28]):o=t[28][Symbol.for("children")][0]);const J=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[24],t[29]||(t[29]=this.element({parent:o||"root"},e));const te={};if(te.image="assets/fps_sprite.png",te.x=36,te.h=20,te.w=20,te.map=e.sprite,typeof J<"u")for(let j in J.config.props)delete te[J.config.props[j]];t[29].nodeId||t[29].populate(te),o=t[29];const Z={};Z.image="assets/fps_sprite.png",Z.x=36,Z.h=20,Z.w=20,Z.map=e.sprite,Z.frame=e.minFps[2],t[30]||(t[30]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:Z},t[29],e),t[30][Symbol.for("slots")][0]?(o=t[30][Symbol.for("slots")][0],e=t[30]):o=t[30][Symbol.for("children")][0]),o=t[0],t[31]||(t[31]=this.element({parent:o||"root"},e));const K={};K.x=150,K.y=40,t[31].nodeId||t[31].populate(K);const ue=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[31],t[32]||(t[32]=this.element({parent:o||"root"},e));const re={};if(re.image="assets/fps_sprite.png",re.w=53,re.h=25,re.map=e.sprite,re.frame="max",typeof ue<"u")for(let j in ue.config.props)delete re[ue.config.props[j]];t[32].nodeId||t[32].populate(re),o=t[32];const he={};he.image="assets/fps_sprite.png",he.w=53,he.h=25,he.map=e.sprite,he.frame="max",t[33]||(t[33]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:he},t[32],e),t[33][Symbol.for("slots")][0]?(o=t[33][Symbol.for("slots")][0],e=t[33]):o=t[33][Symbol.for("children")][0]),o=t[31],t[34]||(t[34]=this.element({parent:o||"root"},e));const Te={};Te.x=63,Te.y=2,t[34].nodeId||t[34].populate(Te);const ve=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[34],t[35]||(t[35]=this.element({parent:o||"root"},e));const pe={};if(pe.image="assets/fps_sprite.png",pe.x=0,pe.h=20,pe.w=20,pe.map=e.sprite,typeof ve<"u")for(let j in ve.config.props)delete pe[ve.config.props[j]];t[35].nodeId||t[35].populate(pe),o=t[35];const Se={};Se.image="assets/fps_sprite.png",Se.x=0,Se.h=20,Se.w=20,Se.map=e.sprite,Se.frame=e.maxFps[0],t[36]||(t[36]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:Se},t[35],e),t[36][Symbol.for("slots")][0]?(o=t[36][Symbol.for("slots")][0],e=t[36]):o=t[36][Symbol.for("children")][0]);const Pe=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[34],t[37]||(t[37]=this.element({parent:o||"root"},e));const Re={};if(Re.image="assets/fps_sprite.png",Re.x=18,Re.h=20,Re.w=20,Re.map=e.sprite,typeof Pe<"u")for(let j in Pe.config.props)delete Re[Pe.config.props[j]];t[37].nodeId||t[37].populate(Re),o=t[37];const Ae={};Ae.image="assets/fps_sprite.png",Ae.x=18,Ae.h=20,Ae.w=20,Ae.map=e.sprite,Ae.frame=e.maxFps[1],t[38]||(t[38]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:Ae},t[37],e),t[38][Symbol.for("slots")][0]?(o=t[38][Symbol.for("slots")][0],e=t[38]):o=t[38][Symbol.for("children")][0]);const Rt=s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite;o=t[34],t[39]||(t[39]=this.element({parent:o||"root"},e));const Me={};if(Me.image="assets/fps_sprite.png",Me.x=36,Me.h=20,Me.w=20,Me.map=e.sprite,typeof Rt<"u")for(let j in Rt.config.props)delete Me[Rt.config.props[j]];t[39].nodeId||t[39].populate(Me),o=t[39];const Le={};return Le.image="assets/fps_sprite.png",Le.x=36,Le.h=20,Le.w=20,Le.map=e.sprite,Le.frame=e.maxFps[2],t[40]||(t[40]=(s.components&&s.components.Sprite||e[Symbol.for("components")].Sprite||(()=>{console.error("component Sprite not found")})).call(null,{props:Le},t[39],e),t[40][Symbol.for("slots")][0]?(o=t[40][Symbol.for("slots")][0],e=t[40]):o=t[40][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[5].set("frame",o.fps[0])},,function(o,e,s){e[6][Symbol.for("props")].frame=o.fps[0]},,function(o,e,s){e[7].set("frame",o.fps[1])},,function(o,e,s){e[8][Symbol.for("props")].frame=o.fps[1]},,function(o,e,s){e[9].set("frame",o.fps[2])},,function(o,e,s){e[10][Symbol.for("props")].frame=o.fps[2]},,function(o,e,s){e[15].set("frame",o.avgFps[0])},,function(o,e,s){e[16][Symbol.for("props")].frame=o.avgFps[0]},,function(o,e,s){e[17].set("frame",o.avgFps[1])},,function(o,e,s){e[18][Symbol.for("props")].frame=o.avgFps[1]},,function(o,e,s){e[19].set("frame",o.avgFps[2])},,function(o,e,s){e[20][Symbol.for("props")].frame=o.avgFps[2]},,function(o,e,s){e[25].set("frame",o.minFps[0])},,function(o,e,s){e[26][Symbol.for("props")].frame=o.minFps[0]},,function(o,e,s){e[27].set("frame",o.minFps[1])},,function(o,e,s){e[28][Symbol.for("props")].frame=o.minFps[1]},,function(o,e,s){e[29].set("frame",o.minFps[2])},,function(o,e,s){e[30][Symbol.for("props")].frame=o.minFps[2]},,function(o,e,s){e[35].set("frame",o.maxFps[0])},,function(o,e,s){e[36][Symbol.for("props")].frame=o.maxFps[0]},,function(o,e,s){e[37].set("frame",o.maxFps[1])},,function(o,e,s){e[38][Symbol.for("props")].frame=o.maxFps[1]},,function(o,e,s){e[39].set("frame",o.maxFps[2])},,function(o,e,s){e[40][Symbol.for("props")].frame=o.maxFps[2]}],context:{}},state(){return{sprite:{defaults:{y:1,w:20,h:20},frames:{false:{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"-",avgFps:"-",minFps:"-",maxFps:"-"}},hooks:{init(){const i=[];let o=0,e=1e4,s=0,t=0,l=0,r=0,n=performance.now();const a=()=>{window.requestAnimationFrame(()=>{const c=performance.now();for(e<1e4&&n<=c-1e3&&(n=c,this.fps=o.toString().padStart(3,"0"),this.avgFps=t.toString().padStart(3,"0"),this.minFps=e.toString().padStart(3,"0"),this.maxFps=s.toString().padStart(3,"0"));i.length>0&&i[0]<=c-1e3;)i.shift();i.push(c),o=i.length,r>60&&(e=Math.min(o,e),s=Math.max(o,s),l+=o,t=Math.round(l/(r-60))),r++,a()})};a()}}}),yr=Y.Application({components:{FPScounter:gr},code:{render:function(o,e,s){const t=[];t[0]||(t[0]=this.element({parent:o||"root"},e));const l={};l.w=1920,l.h=1080,t[0].nodeId||t[0].populate(l);const r=s.components&&s.components.RouterView||e[Symbol.for("components")].RouterView;o=t[0],t[1]||(t[1]=this.element({parent:o||"root"},e));const n={};if(typeof r<"u")for(let g in r.config.props)delete n[r.config.props[g]];t[1].nodeId||t[1].populate(n),o=t[1];const a={};t[2]||(t[2]=(s.components&&s.components.RouterView||e[Symbol.for("components")].RouterView||(()=>{console.error("component RouterView not found")})).call(null,{props:a},t[1],e),t[2][Symbol.for("slots")][0]?(o=t[2][Symbol.for("slots")][0],e=t[2]):o=t[2][Symbol.for("children")][0]);const c=s.components&&s.components.FPScounter||e[Symbol.for("components")].FPScounter;o=t[0],t[3]||(t[3]=this.element({parent:o||"root"},e));const f={};if(f.x=1610,typeof c<"u")for(let g in c.config.props)delete f[c.config.props[g]];t[3].nodeId||t[3].populate(f),o=t[3];const u={};return u.x=1610,t[4]||(t[4]=(s.components&&s.components.FPScounter||e[Symbol.for("components")].FPScounter||(()=>{console.error("component FPScounter not found")})).call(null,{props:u},t[3],e),t[4][Symbol.for("slots")][0]?(o=t[4][Symbol.for("slots")][0],e=t[4]):o=t[4][Symbol.for("children")][0]),t},effects:[function(o,e,s){e[0].set("color",o.backgroundColor)}],context:{}},state(){return{backgroundColor:"#1e293b"}},routes:[{path:"/",component:In,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>Yo(()=>import("./Loading-6f7c821f.js"),["assets/Loading-6f7c821f.js","assets/settings-f05e2292.js"])},{path:"/demos/intro",component:()=>new Promise(i=>{i(En)})},{path:"/demos/theming",component:$n},{path:"/demos/tmdb",component:Xn},{path:"/demos/sprites",component:Hn},{path:"/demos/focushandling",component:qn},{path:"/demos/memory-game",component:hr,announce:"Let's play Memory"},{path:"/examples/positioning",component:Vn},{path:"/examples/colors",component:jn},{path:"/examples/gradients",component:Kn},{path:"/examples/transitions",component:Qn},{path:"/examples/alpha",component:Zn},{path:"/examples/scaling",component:Jn},{path:"/examples/rotation",component:er},{path:"/examples/keyinput",component:tr},{path:"/examples/texts",component:or},{path:"/examples/images",component:sr},{path:"/examples/components",component:ir},{path:"/examples/forloop",component:nr},{path:"/examples/effects",component:rr},{path:"/examples/showif",component:lr},{path:"/examples/events",component:ar},{path:"/examples/slots",component:dr},{path:"/benchmarks/exponential",component:mr}],hooks:{ready(){this.$listen("changeBackground",i=>{this.backgroundColor=i?i+80:"#1e293b"})}},input:{escape(){this.quit()},back(){this.$router.to("/")}}});Y.Launch(yr,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,fontLoader:fn,reactivityMode:"Proxy",keymap:dn(),fonts:[{family:"lato",type:"msdf",png:"fonts/Lato-Regular.msdf.png",json:"fonts/Lato-Regular.msdf.json"},{family:"raleway",type:"msdf",png:"fonts/Raleway-ExtraBold.msdf.png",json:"fonts/Raleway-ExtraBold.msdf.json"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",png:"fonts/Kalam-Regular.msdf.png",json:"fonts/Kalam-Regular.msdf.json"}]});export{Y as B,dt as S};
