var jI=Object.defineProperty;var FI=(c,r,i)=>r in c?jI(c,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[r]=i;var P=(c,r,i)=>(FI(c,typeof r!="symbol"?r+"":r,i),i);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const x of y.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function i(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function l(d){if(d.ep)return;d.ep=!0;const y=i(d);fetch(d.href,y)}})();const ge={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},io={[ge.settings]:{},get(c,r=null){return c in this[ge.settings]?this[ge.settings][c]:r},set(c,r){typeof c=="object"?Object.keys(c).forEach(i=>{this.set(i,c[i])}):this[ge.settings][c]=r}},Vc=()=>{},X0=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),YS=c=>{const r=io.get("debugLevel"),i={};return Object.defineProperty(i,"info",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${c} %c ${X0()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Vc}}),Object.defineProperty(i,"warn",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${c} %c ${X0()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Vc}}),Object.defineProperty(i,"error",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${c} %c ${X0()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Vc}}),Object.defineProperty(i,"debug",{get(){return(r>=2||Array.isArray(r)&&r.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${c} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Vc}}),i};let an;const $I=()=>{an=YS("Blits")},Hc={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},zI=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,VI=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,HI=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,W0={},Gc=c=>{if(W0[c]!==void 0)return W0[c];const r=parseInt(c).toString(16).padStart(2,"0");return W0[c]=r,r},ka={normalize:(c="",r="0xffffffff")=>{if(c=c.toString(),c.startsWith("0x")&&c.length===10)return c;if(Hc[c]!==void 0)return Hc[c];if(zI.test(c)){c=c.replace("#","").toLowerCase(),c.length===3&&(c=c.split("").map(d=>d+d).join(""));const l="0x"+c.padEnd(8,"f");return Hc[c]=l,l}const i=VI.exec(c);if(i){const l=Gc(i[3]),d=Gc(i[5]),y=Gc(i[7]);let x="ff";if(i[10]&&i[1]==="rgba"){const m=Math.min(Math.max(Math.round(parseFloat(i[10])*255),0),255);x=Gc(m)}const s="0x"+l+d+y+x;return Hc[c]=s,s}return HI.test(c)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):r}},GI=(c="",r,i,l=null)=>{let d=0,y=0,x=[],s=null,m=0;const C=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,w=/^\s*(\/?>)\s*/,v=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,I=/^<>\s*/,O=/^\s*(<\/>)\s*/,T=()=>{c=j(c);try{return L(V),fe(x)}catch(re){throw(re.name=="TemplateParseError"||re.name=="TemplateStructureError")&&(re.message=`${re.message}
${re.context}`),re}},L=re=>{d>=c.length||re()},j=re=>re.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),U=re=>{const ce=c.slice(d).match(re);return ce&&(y=d,d+=ce[0].length),ce},V=()=>{U(I)?(x.push({[Symbol.for("componentType")]:null,[ge.type]:"opening",[ge.level]:m,[ge.cursorTagStart]:y}),m++,L(V)):L(z)},z=()=>{U(O)?(m--,x.push({[Symbol.for("componentType")]:null,[ge.type]:"closing",[ge.level]:m}),L(V)):L(G)},G=()=>{const re=U(C);if(re)s={[Symbol.for("componentType")]:re[1],[ge.level]:m,[ge.cursorTagStart]:y},re[0].startsWith("</")?(m--,s[ge.type]="closing",s[ge.level]=m):(s[ge.type]="opening",m++),L(Q);else throw Y("InvalidTag")},Q=()=>{const re=U(w);if(re){if(re[1]==="/>"){if(s[ge.type]==="closing")throw Y("InvalidClosingTag");s[ge.type]="self-closing",m--}if(s[ge.type]==="opening"){const ce=c.slice(d,c.indexOf("<",d));ce&&(s.content=ce,d+=ce.length)}x.push(s),L(V)}else L(te)},te=()=>{const re=U(v);if(re){if(s[ge.type]==="closing")throw Y("AttributesInClosingTag");const ce=re[2],we=new RegExp(`^(.*?)${ce}\\s*`),be=U(we);if(be){const Te=le(re[1],be[1]);s[Te.name]=Te.value,L(Q)}else throw Y("MissingOrInvalidAttributeValue")}else throw Y("InvalidAttribute")},le=(re,ce)=>{if(re.includes(".")){const[we,be]=re.split(".");return{name:we,value:`{${be}: ${ce}}`}}return["color",":color",":effects","effects"].includes(re)?he(re,ce):{name:re,value:ce}},he=(re,ce)=>{let we=ce,be=ka.normalize(we,null);if(be===null){const Te=/'([^']+)'/g;let ke,pe=0,Le="";for(;(ke=Te.exec(ce))!==null;){const $=ke[1],Ie=ke.index,Pe=ke[0].length;Le+=ce.slice(pe,Ie),be=ka.normalize($,null),be===null?Le+=ce.slice(Ie,Ie+Pe):Le+=`'${be}'`,pe=Ie+Pe}Le+=ce.slice(pe),we=Le}else we=be;return{name:re,value:we}},fe=re=>{let ce=[],we=!1,be={children:[]},Te=be;for(let ke=0;ke<re.length;ke++){let pe=re[ke];if(pe[ge.level]===0&&pe[ge.type]!=="closing"){if(we)throw Z("MultipleTopLevelTags",pe);we=!0}if(pe[ge.type]==="opening")ce.push({[ge.level]:pe[ge.level],[ge.type]:pe[ge.type],[ge.cursorTagStart]:pe[ge.cursorTagStart],[Symbol.for("componentType")]:pe[Symbol.for("componentType")],parent:Te});else if(pe[ge.type]==="closing"){const $=ce.length===0;let Ie=!1,Pe=!1;if($||(Ie=ce[ce.length-1][ge.level]!==pe[ge.level],Pe=ce[ce.length-1][Symbol.for("componentType")]!==pe[Symbol.for("componentType")]),$||Ie||Pe)throw Z("MismatchedClosingTag",pe);Te=ce.pop().parent}const Le={...pe};delete Le[ge.type],delete Le[ge.level],delete Le[ge.cursorTagStart],pe[ge.type]==="opening"?(ke+1<re.length&&re[ke+1][ge.type]!=="closing"&&(Le.children=[]),Te.children.push(Le),Te=Le):pe[ge.type]==="self-closing"&&Te.children.push(Le)}if(ce.length>0)throw Z("UnclosedTags",ce);return be},k=10,q=50,Y=re=>{const ce=ee();re=`${re} in ${ce}`;const we=new Error(re);we.name="TemplateParseError";const be=Math.max(0,y-k),Te=Math.min(c.length,d+q),ke=c.slice(be,Te),pe=d-be;return we.context=K(pe,ke),we},Z=(re,ce)=>{const we=ee();re=`${re} in ${we}`;const be=new Error(re);be.name="TemplateStructureError",Array.isArray(ce)?be.context=ce.map(ke=>Te(ke)).join(`
`):be.context=Te(ce);function Te(ke){const pe=Math.max(0,ke[ge.cursorTagStart]-k),Le=c.slice(pe,pe+q);return K(k,Le)}return be},K=(re,ce)=>{const we=" ".repeat(re)+"^";return`
${ce}
${we}
`},ee=()=>{if(i){let re=r||"",ce=i;for(;ce;)re=`${ce[Symbol.for("componentType")]}/${re}`,ce=ce.parent;return re}return l||"Blits.Application"};return T()};let Nt;function XI(c={children:[]}){const r={renderCode:["const elms = []","let componentType","const rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0"],effectsCode:[],context:{props:[],components:this.components}};return Nt=-1,KS.call(r,c),r.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw",r.renderCode.join(`
`)),effects:r.effectsCode.map(i=>new Function("component","elms","context","components","rootComponent","effect",i)),context:r.context}}const gh=function(c,r=!1,i={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const l=i.forceEffect?this.effectsCode:this.renderCode;r&&l.push(`parent = ${r}`),"key"in c&&(i.key=no(c.key,i.component));const d=i.key?`elms[${Nt}][${i.key}]`:`elms[${Nt}]`;i.key&&l.push(`
      if(elms[${Nt}] === undefined) {
        elms[${Nt}] = {}
      }
    `),l.push(`const elementConfig${Nt} = {}`),i.forloop&&l.push(`if(${d} === undefined) {`),l.push(`
    ${d} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)
  `),i.forloop&&l.push("}");const y=c.children;delete c.children,c[Symbol.for("componentType")]==="Slot"&&l.push(`elementConfig${Nt}[Symbol.for('isSlot')] = true`),Object.keys(c).forEach(x=>{if(x==="slot"&&l.push(`
        elementConfig${Nt}['parent'] = component[Symbol.for('slots')] !== undefined && Array.isArray(component[Symbol.for('slots')]) === true && component[Symbol.for('slots')].filter(slot => slot.ref === '${c.slot}').shift() || parent
      `),x!=="key")if(QS(x)){if(i.holder&&x===":color")return;i.holder?this.effectsCode.push(`
        if(typeof skip${Nt} === 'undefined' ||
          skip${Nt}.indexOf('${x.substring(1)}') === -1)
          ${d}.set('${x.substring(1)}', ${no(c[x],i.component)})
        `):this.effectsCode.push(`
            ${d}.set('${x.substring(1)}', ${no(c[x],i.component)})
          `),l.push(`elementConfig${Nt}['${x.substring(1)}'] = ${no(c[x],i.component)}`)}else l.push(`elementConfig${Nt}['${x}'] = ${km(c[x],x,i.component)}`)}),i.holder===!0&&l.push(`
    const skip${Nt} = []
    if(typeof cmp${Nt} !== 'undefined') {
      for(let key in cmp${Nt}.config.props) {
        delete elementConfig${Nt}[cmp${Nt}.config.props[key]]
        skip${Nt}.push(cmp${Nt}.config.props[key])
      }
    }
    `),i.forloop&&l.push(`if(${d}.nodeId === undefined) {`),l.push(`${d}.populate(elementConfig${Nt})`),l.push(`
    if(inSlot === true) {
      slotChildCounter -= 1
    }
  `),i.forloop&&l.push("}"),y&&KS.call(this,{children:y},`${d}`,i)},qS=function(c,r=!1,i={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const l=i.forceEffect?this.effectsCode:this.renderCode;l.push(`
    const cmp${Nt} =
      (context.components && context.components['${c[Symbol.for("componentType")]}']) || components['${c[Symbol.for("componentType")]}']
  `),"key"in c&&(i.key=no(c.key,i.component));const d=c.children;delete c.children,gh.call(this,c,r,{...i,holder:!0}),r=i.key?`elms[${Nt}][${i.key}]`:`elms[${Nt}]`,Nt++;const y=i.key?`elms[${Nt}][${i.key}]`:`elms[${Nt}]`;i.key&&l.push(`
      if(elms[${Nt}] === undefined) {
        elms[${Nt}] = {}
      }
    `),r&&l.push(`parent = ${r}`),l.push(`const props${Nt} = {}`),i.forloop&&l.push(`if(${y} === undefined) {`),Object.keys(c).forEach(x=>{QS(x)?(this.effectsCode.push(`
        ${y}[Symbol.for('props')]['${x.substring(1)}'] = ${no(c[x],i.component)}`),l.push(`
        propData = ${no(c[x],i.component)}
        if (Array.isArray(propData) === true) {
          propData = getRaw(propData).slice(0)
        }
        props${Nt}['${x.substring(1)}'] = propData`)):l.push(`props${Nt}['${x}'] = ${km(c[x],x,i.component)}`)}),l.push(`
    componentType = props${Nt}['is'] || '${c[Symbol.for("componentType")]}'

    let component${Nt}
    if(typeof componentType === 'string') {
      component${Nt} = context.components && context.components[componentType] || components[componentType]
      if(!component${Nt}) {
        throw new Error('Component "${c[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {
      component${Nt} = componentType
    }

    ${y} = component${Nt}.call(null, {props: props${Nt}}, ${r}, component)

    if (${y}[Symbol.for('slots')][0]) {
      parent = ${y}[Symbol.for('slots')][0]
      slotComponent = ${y}
      inSlot = true
    } else {
      parent = ${y}[Symbol.for('children')][0]
    }
  `),i.forloop&&l.push("}"),d&&(i.forloop||l.push(`
        if(inSlot === true) {
          slotChildCounter = ${d.length}  + 1
        }
      `),Nt++,gh.call(this,{children:d},!1,{...i})),i.forloop||l.push(`
      if (inSlot === true && slotChildCounter === 0) {
        inSlot = false
      }
    `)},WI=function(c,r){const i=c[":for"];delete c[":for"];const l=c.key,d=no(l,"scope."),y=!(c.$shallow&&c.$shallow.toLowerCase()==="false");delete c.$shallow,delete c.key;const s=/(.+)\s+in\s+(.+)/gi.exec(i),[m,C]=s[1].replace("(","").replace(")","").split(/\s*,\s*/),w=new RegExp(`(scope\\.(?!${m}\\.|${C}|key)(\\w+))`,"gi"),v={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};if(r&&v.renderCode.push(`parent = ${r}`),C!==void 0){const G=new RegExp(`\\$${C}(?!['\\w])`).exec(l);Array.isArray(G)&&v.renderCode.push(`console.warn(" Using '${C}' in the key, like key=${l},  is not recommended")`)}const I=Nt;v.renderCode.push(`
    const created${I} = []
    const forloop${I} = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set()
      let l = rawCollection.length
      while(l--) {
        const ${m} = rawCollection[l]
  `),C!==void 0&&v.renderCode.push(`
        const ${C} = l
    `),v.renderCode.push(`
        keys.add('' +  ${no(l,"")||"l"})
      }
  `);const O=v.renderCode.length;v.renderCode.push(`
      created.length = 0
      const length = rawCollection.length
      const effects = []
      for(let __index = 0; __index < length; __index++) {
        const scope = Object.create(component)
        parent = ${r}
        scope['${m}'] = rawCollection[__index]
  `),C!==""&&v.renderCode.push(`
        scope['${C}'] = __index
    `),v.renderCode.push(`
        scope['key'] = '' + ${d||"__index"}
  `),"ref"in c&&c.ref.indexOf("$")===-1&&(v.renderCode.push(`
        scope['__ref'] = '${c.ref}' + __index
    `),c.ref="$__ref"),v.renderCode.push(`
        created.push(scope.key)
  `),c[Symbol.for("componentType")]==="Element"||c[Symbol.for("componentType")]==="Slot"||c[Symbol.for("componentType")]==="Text"?(c[Symbol.for("componentType")]==="Text"&&(c.__textnode="true"),gh.call(v,c,r,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):qS.call(v,c,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const T=v.effectsCode.filter(z=>[...z.matchAll(w)].length===0),L=v.effectsCode.filter(z=>[...z.matchAll(w)].length!==0);y===!1&&v.renderCode.push(`
      scope['${m}'] = null
      scope['${m}'] = collection[__index]
  `),T.forEach((z,G)=>{const Q=z.indexOf(`scope.${G}`)>-1?`'${no(s[2],"")}'`:null;z.indexOf("Symbol.for('props')")===-1?v.renderCode.push(`
        let eff${G} = () => {
          ${z}
        }
        effect(eff${G}, ${Q})
        effects.push(eff${G})
      `):v.renderCode.push(`
        ${z}
      `)}),v.renderCode.push(`
    }
    return effects
  }`);const j=[];j.push(`
      let i = created.length

      while (i--) {
        if (keys.has(created[i]) === false) {
          const key = created[i]
  `);const U=Nt;for(let z=I;z<=U;z++)j.push(`
          elms[${z}][key] && elms[${z}][key].destroy()
          delete elms[${z}][key]
      `);j.push(`
      }
    }
  `),v.renderCode.splice(O,0,...j);let V=`${no(s[2],"")}`;V&&V.includes(".")&&(V=V.match(/[^.]+$/)[0]),v.renderCode.push(`
    let forEffects${I}
    effect(() => {
      component[Symbol.for('removeGlobalEffects')](forEffects${I})
      forEffects${I} = null
      forEffects${I} = forloop${I}(${km(s[2],":for")}, elms, created${I})
    }, '${V}' )
  `),L.forEach(z=>{const G=[...z.matchAll(w)];let Q=G.length;const te=[];for(;Q--;){const le=G[Q],he=`component.${le[2]}`;te.indexOf(he)===-1&&te.push(he),le[2]!==m&&(z=z.substring(0,le.index)+he+z.substring(le.index+le[1].length))}v.renderCode.push(`
      effect(() => {
        void ${te.join(", ")}
        for(let __index = 0; __index < ${no(s[2])}.length; __index++) {
          const scope = {}
          scope['${C}'] = __index
          scope['${m}'] = ${no(s[2])}[__index]
          scope['key'] = ${d||"__index"}
    `),v.renderCode.push(`
          ${z}
        }
      })
    `)}),this.renderCode.push(v.renderCode.join(`
`))},KS=function(c,r=!1,i={}){c.children&&c.children.forEach(l=>{Nt++,Object.keys(l).indexOf(":for")>-1?WI.call(this,l,r):l[Symbol.for("componentType")]==="Element"||l[Symbol.for("componentType")]==="Slot"||l[Symbol.for("componentType")]==="Text"||l[Symbol.for("componentType")]==="Layout"?(l[Symbol.for("componentType")]==="Text"&&(l.__textnode="true"),l[Symbol.for("componentType")]==="Layout"&&(l.__layout="true"),gh.call(this,l,r,i)):qS.call(this,l,r,i)})},no=(c,r="component.")=>{if(c===void 0)return c;const i=/('.*?')+/gi,l=/\$(\$(?=\$)|\$?)/g,d=c.matchAll(i),y=[];let x=0;for(const s of d)y.push(s[0]),c=c.replace(s[0],`[@@REPLACEMENT${x}@@]`),x++;return c=c.replace(l,(s,m)=>{if(m==="")return r;if(m==="$")return r+"$"}),y.forEach((s,m)=>{c=c.replace(`[@@REPLACEMENT${m}@@]`,s)}),c},km=(c="",r=!1,i="component.")=>{const l=/\$\w+/gi;let d;if(r==="content")if(c.startsWith("$"))d=`${i}${c.replace("$","")}`;else{const y=c.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");d=`'${YI(y,i)}'`}else if(r!=="color"&&!isNaN(parseFloat(c))){if(d=parseFloat(c),c.endsWith("%")){const x={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[r];x&&(d=`parent.node.${x} * (${d} / 100)`)}}else if(c.toLowerCase()==="true")d=!0;else if(c.toLowerCase()==="false")d=!1;else if(r.startsWith("@")&&c){const y=i.slice(0,-1);d=`${y}['${c.replace("$","")}'] && ${y}['${c.replace("$","")}'].bind(${y})`}else if(c.startsWith("$"))d=`${i}${c.replace("$","")}`;else if(l.exec(c)){const y=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,x=c.match(y);if(d={},x)for(let s=0;s<x.length;s++){const m=x[s].split(/\s*:\s*/);m&&qI(m[0],m[1],i,d)}return KI(d)}else d=`"${c}"`;return d},QS=c=>c.startsWith(":"),YI=(c,r)=>{const i=/\{\{\s*(\$\S+)\s*\}\}/g,l=[...c.matchAll(i)];if(l.length)for(let[d,y]of l)c=c.replace(d,`${y.replace("$",`'+${r}`)}+'`);return c},qI=(c,r,i,l)=>{r.startsWith("$")?l[c]=`${i}${r.replace("$","")}`:l[c]=r},KI=c=>{const r=[];return Object.keys(c).forEach(i=>{r.push(`${i}: ${c[i]}`)}),` { ${r.join(", ")} }`},aS={};let QI=0;const ZI=c=>`BlitsComponent::${c}_${aS[c]=(aS[c]||0)+1}`,JI=()=>++QI,Pr={},am=(c,r,i,l=[])=>{Pr[r]&&Pr[r][c]&&Pr[r][c].apply(i,l)},eM=(c,r,i)=>{const l=ge[c];Pr[r]&&Pr[r][l]&&Pr[r][l].apply(i)},tM=(c={},r)=>{Pr[r]={},[...Object.keys(c),...Object.getOwnPropertySymbols(c)].forEach(l=>{typeof c[l]=="function"&&(Pr[r][l]=c[l])})};let Ia=null,yh=null,Ih=!1;const nM=()=>{Ih=!0},iM=()=>{Ih=!1},vh=new WeakMap,ah=new Map,uS=c=>{if(ah.size!==0)for(const[r,i]of ah){if(c.indexOf(r)===-1)continue;const l=vh.get(i);if(l!==void 0)for(const d of l.values())d.delete(r),ah.delete(r)}},uh=(c,r,i=!1)=>{if(Ia){if(Ih||yh!==null&&r!==yh)return;let l=vh.get(c);l||(l=new Map,vh.set(c,l));let d=l.get(r);d||(d=new Set,l.set(r,d)),d.add(Ia),i===!0&&ah.set(Ia,c)}},Ma=(c,r,i=!1)=>{if(Ih===!0)return;const l=vh.get(c);if(!l)return;const d=l.get(r);if(d)for(let y of d)y(i)},Xc=(c,r=null)=>{Ia=c,yh=r,Ia(),Ia=null,yh=null},um=(c,r)=>{if(c===r)return!0;if(c.length!==r.length)return!1;let i=c.length;for(;i--;){const l=c[i],d=r[i];if(Array.isArray(l)&&Array.isArray(d)){if(um(l,d)===!1)return!1}else if(typeof l=="object"&&l!==null&&typeof d=="object"&&d!==null){if(um(Object.entries(l),Object.entries(d))===!1)return!1}else if(l!==d)return!1}return!0},lh=["push","pop","shift","unshift","splice","sort"],lS=new WeakMap,os=c=>{const r=c&&c[ge.raw];return r?os(r):c},lm=(c,r=null,i,l)=>{if(typeof c=="object"&&Array.isArray(c)===!1&&Object.getPrototypeOf(c)!==Object.prototype)return c;const d=lS.get(c);if(d!==void 0)return d;const y={get(s,m,C){return m===ge.raw?c:Array.isArray(s)===!0?typeof s[m]=="object"&&s[m]!==null?(Array.isArray(s[m])===!0&&uh(s,m,l),lm(os(s[m]),s,m)):lh.indexOf(m)!==-1?function(...w){nM();const v=s[m].apply(this,w);return iM(),Ma(r,i),v}:m==="length"?c.length:Reflect.get(s,m,C):typeof s[m]=="object"&&s[m]!==null?(Array.isArray(s[m])===!0&&uh(s,m,l),lm(os(s[m]),s,m)):(uh(s,m,l),Reflect.get(s,m,C))},set(s,m,C,w){const v=os(s[m]),I=os(C);let O=!0;const T=Array.isArray(I)===!0?um(v,I):v===I;return T===!1&&(typeof C=="object"&&(Array.isArray(C)===!0?C=os(C).slice(0):s[m]!==null&&s[m]!==void 0&&Object.getPrototypeOf(C)===Object.prototype&&(C=Object.assign(w[m],C))),O=Reflect.set(s,m,C,w)),O===!0&&T===!1&&(Array.isArray(s)===!0&&m in s&&Ma(r,i,!0),Ma(s,m,!0)),O}},x=new Proxy(c,y);return lS.set(c,x),x},ZS=(c,r)=>(Object.keys(c).forEach(i=>{let l=c[i];if(c[i]!==null&&typeof c[i]=="object"){if(Object.getPrototypeOf(c[i])===Object.prototype)return ZS(c[i]);if(Array.isArray(c[i])===!0)for(let d=0;d<lh.length-1;d++)c[i][lh[d]]=function(y){Array.prototype[lh[d]].call(this,y),Ma(c,i)}}Object.defineProperty(c,i,{enumerable:!0,configurable:!0,get(){return uh(c,i,r),l},set(d){l!==d&&(l=d,Ma(c,i))}})}),c),oM=typeof Proxy<"u",dl=(c,r="Proxy",i=!1)=>(oM===!1&&(r="defineProperty"),r==="defineProperty"?ZS(c,i):lm(c,void 0,void 0,i)),rM=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],sM={previous:null,current:null,get state(){return this.current},set state(c){rM.indexOf(c)>-1&&(c!==this.current||c==="focus")&&(an.debug(`Setting lifecycle state from ${this.current} to ${c} for ${this.component.componentId}`),this.previous=this.current,this.current=c,eM(c,this.component[ge.identifier],this.component),am(c,this.component[ge.identifier],this.component))}};function aM(c,r=!1,i){const l={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},d=c.getContext(r?"webgl2":"webgl",l)||c.getContext("experimental-webgl",l);if(!d)throw new Error("Unable to create WebGL context");return i?new Proxy(d,{get(y,x){const s=y[x];return typeof s=="function"?(i.increment(String(x)),s.bind(y)):s}}):d}function it(c,r){if(La()!==!0&&!c)throw new Error(r||"Assertion failed")}function fS(c,r,i){const l=Math.trunc(c>>>24),d=Math.trunc(c>>>16&255),y=Math.trunc(c>>>8&255),x=Math.trunc(c&255),s=Math.trunc(r>>>24),m=Math.trunc(r>>>16&255),C=Math.trunc(r>>>8&255),w=Math.trunc(r&255),v=Math.round(s*i+l*(1-i)),I=Math.round(m*i+d*(1-i)),O=Math.round(C*i+y*(1-i)),T=Math.round(w*i+x*(1-i));return(v<<24|I<<16|O<<8|T)>>>0}function uM(c,r){const i=c>>>24,l=c>>>16&255,d=c>>>8&255,y=Math.trunc((c&255)*r);return(i<<24|l<<16|d<<8|y)>>>0}let JS=!0;function lM(c){JS=c==="webgl"}function Wc(c,r,i=!1){const l=(c&255)/255*r,d=JS?l:1,y=Math.trunc((c>>>24)*d),x=Math.trunc((c>>>16&255)*d),s=Math.trunc((c>>>8&255)*d),m=Math.trunc(l*255);return i?(m<<24|s<<16|x<<8|y)>>>0:(y<<24|x<<16|s<<8|m)>>>0}function xh(c,r){return Object.prototype.hasOwnProperty.call(c,r)}function La(){return{VITE_TMDB_KEY:"ABC123",VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!0}let fM=1;function cM(){return fM++}class cr{constructor(){P(this,"eventListeners",{})}on(r,i){let l=this.eventListeners[r];l||(l=[]),l.push(i),this.eventListeners[r]=l}off(r,i){const l=this.eventListeners[r];if(!l)return;if(!i){delete this.eventListeners[r];return}const d=l.indexOf(i);d>=0&&l.splice(d,1)}once(r,i){const l=(d,y)=>{this.off(r,l),i(d,y)};this.on(r,l)}emit(r,i){const l=this.eventListeners[r];l&&[...l].forEach(d=>{d(this,i)})}removeAllListeners(){this.eventListeners={}}}var Gn;(function(c){c[c.generic=0]="generic",c[c.color=1]="color",c[c.image=2]="image",c[c.noise=3]="noise",c[c.renderToTexture=4]="renderToTexture",c[c.subTexture=5]="subTexture"})(Gn||(Gn={}));class vl extends cr{constructor(i){super();P(this,"txManager");P(this,"dimensions",null);P(this,"error",null);P(this,"state","initial");P(this,"renderableOwners",new Set);P(this,"renderable",!1);P(this,"type",Gn.generic);P(this,"preventCleanup",!1);P(this,"ctxTexture");P(this,"textureData",null);this.txManager=i}setRenderableOwner(i,l){var y,x;const d=this.renderableOwners.size;if(l===!0){this.renderableOwners.has(i)===!1&&this.renderableOwners.add(i);const s=this.renderableOwners.size;s>d&&s===1&&(this.renderable=!0,(y=this.onChangeIsRenderable)==null||y.call(this,!0),this.load())}else{this.renderableOwners.delete(i);const s=this.renderableOwners.size;s<d&&s===0&&(this.renderable=!1,(x=this.onChangeIsRenderable)==null||x.call(this,!1),this.txManager.orphanTexture(this))}}load(){this.state==="fetching"||this.state==="loading"||this.state==="loaded"||this.state==="failed"||this.txManager.loadTexture(this)}loadCtxTexture(){return this.ctxTexture===void 0&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var i;(i=this.ctxTexture)==null||i.free(),this.textureData=null}freeTextureData(){this.textureData=null}setState(i,l){if(this.state===i)return;let d=null;i==="loaded"?(this.dimensions=l,d=this.dimensions):i==="failed"&&(this.error=l,d=this.error),this.state=i,this.emit(i,d)}async getTextureData(){return this.textureData===null&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}const hM=/^(data|ftps?|https?):/,xl=c=>{const r=c>>>24,i=c>>>16&255,l=c>>>8&255,d=c&255;return[r/255,i/255,l/255,d/255]},cS=c=>{const r=c>>>24,i=c>>>16&255,l=c>>>8&255,d=c&255;return[r,i,l,d]};function hS(c){return(c&255)/255}function Y0(c){const r=Math.floor(c[0]*255),i=Math.floor(c[1]*255),l=Math.floor(c[2]*255),d=Math.floor(c[3]*255);return`rgba(${r},${i},${l},${d.toFixed(4)})`}function Ta(c,r,i,l,d){return d?(d.x1=c,d.y1=r,d.x2=i,d.y2=l,d):{x1:c,y1:r,x2:i,y2:l}}function q0(c,r){return c.x1<r.x2&&c.x2>r.x1&&c.y1<r.y2&&c.y2>r.y1}function dM(c,r){return r?(r.x=c.x1,r.y=c.y1,r.width=c.x2-c.x1,r.height=c.y2-c.y1,r):{x:c.x1,y:c.y1,width:c.x2-c.x1,height:c.y2-c.y1}}function eC(c,r,i){const l=Math.max(c.x,r.x),d=Math.max(c.y,r.y),y=Math.min(c.x+c.width,r.x+r.width)-l,x=Math.min(c.y+c.height,r.y+r.height)-d;return y>0&&x>0?i?(i.x=l,i.y=d,i.width=y,i.height=x,i):{x:l,y:d,width:y,height:x}:i?(i.x=0,i.y=0,i.width=0,i.height=0,i):{x:0,y:0,width:0,height:0}}function tC(c,r){return r?(r.x=c.x,r.y=c.y,r.width=c.width,r.height=c.height,r):{x:c.x,y:c.y,width:c.width,height:c.height}}function pM(c,r){return c===r?!0:c===null||r===null?!1:c.x===r.x&&c.y===r.y&&c.width===r.width&&c.height===r.height}function K0(c,r){return c.x1<=r.x2&&c.y1<=r.y2&&c.x2>=r.x1&&c.y2>=r.y1}function mM(c,r){return c.x1<r.x1&&c.x2>r.x2&&c.y1<r.y1&&c.y2>r.y2}function gM(c){return c.x1<c.x2&&c.y1<c.y2}function fm(c,r){return Ta(c.x1-r[3],c.y1-r[0],c.x2+r[1],c.y2+r[2])}function yM(c){if(self.location.protocol==="file:"&&!hM.test(c)){const i=self.location.pathname.split("/");i.pop();const l=i.join("/"),d=self.location.protocol+"//"+l;return c.charAt(0)==="."&&(c=c.slice(1)),c.charAt(0)==="/"&&(c=c.slice(1)),d+"/"+c}return new URL(c,self.location.href).href}function dS(c){return c.startsWith("data:")===!0}class _i{constructor(){P(this,"ta");P(this,"tb");P(this,"tx");P(this,"tc");P(this,"td");P(this,"ty");P(this,"_floatArr",null);P(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return vM}static multiply(r,i,l){const d=r.ta*i.ta+r.tb*i.tc,y=r.ta*i.tb+r.tb*i.td,x=r.ta*i.tx+r.tb*i.ty+r.tx,s=r.tc*i.ta+r.td*i.tc,m=r.tc*i.tb+r.td*i.td,C=r.tc*i.tx+r.td*i.ty+r.ty;return l||(l=new _i),l.ta=d,l.tb=y,l.tx=x,l.tc=s,l.td=m,l.ty=C,l.mutation=!0,l}static identity(r){return r||(r=new _i),r.ta=1,r.tb=0,r.tx=0,r.tc=0,r.td=1,r.ty=0,r.mutation=!0,r}static translate(r,i,l){return l||(l=new _i),l.ta=1,l.tb=0,l.tx=r,l.tc=0,l.td=1,l.ty=i,l.mutation=!0,l}static scale(r,i,l){return l||(l=new _i),l.ta=r,l.tb=0,l.tx=0,l.tc=0,l.td=i,l.ty=0,l.mutation=!0,l}static rotate(r,i){const l=Math.cos(r),d=Math.sin(r);return i||(i=new _i),i.ta=l,i.tb=-d,i.tx=0,i.tc=d,i.td=l,i.ty=0,i.mutation=!0,i}static copy(r,i){return i||(i=new _i),i.ta=r.ta,i.tc=r.tc,i.tb=r.tb,i.td=r.td,i.tx=r.tx,i.ty=r.ty,i.mutation=!0,i}translate(r,i){return this.tx=this.ta*r+this.tb*i+this.tx,this.ty=this.tc*r+this.td*i+this.ty,this.mutation=!0,this}scale(r,i){return this.ta=this.ta*r,this.tb=this.tb*i,this.tc=this.tc*r,this.td=this.td*i,this.mutation=!0,this}rotate(r){if(r===0||!(r%Math.PI*2))return this;const i=Math.cos(r),l=Math.sin(r),d=this.ta*i+this.tb*l,y=this.tb*i-this.ta*l,x=this.tc*i+this.td*l,s=this.td*i-this.tc*l;return this.ta=d,this.tb=y,this.tc=x,this.td=s,this.mutation=!0,this}multiply(r){return _i.multiply(this,r,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const vM=new _i,Yc=0,qc=2,Kc=4,Qc=6,Zc=1,Jc=3,eh=5,th=7;class wh{constructor(r){P(this,"data");this.data=new Float32Array(8),r&&(this.data[Yc]=r[Yc],this.data[qc]=r[qc],this.data[Kc]=r[Kc],this.data[Qc]=r[Qc],this.data[Zc]=r[Zc],this.data[Jc]=r[Jc],this.data[eh]=r[eh],this.data[th]=r[th])}static translate(r,i,l,d,y,x,s,m,C){return C||(C=new wh),C.data[Yc]=r,C.data[qc]=l,C.data[Kc]=y,C.data[Qc]=s,C.data[Zc]=i,C.data[Jc]=d,C.data[eh]=x,C.data[th]=m,C}get x1(){return this.data[Yc]}get x2(){return this.data[qc]}get x3(){return this.data[Kc]}get x4(){return this.data[Qc]}get y1(){return this.data[Zc]}get y2(){return this.data[Jc]}get y3(){return this.data[eh]}get y4(){return this.data[th]}}const nC=(c,r,i,l)=>{const d=3*c,y=3*(i-c)-d,x=1-d-y,s=3*r,m=3*(l-r)-s,C=1-s-m;return function(w){if(w>=1)return 1;if(w<=0)return 0;let v=.5,I,O,T;for(let U=0;U<20;U++){if(I=v*(v*(v*x+y)+d),T=w-I,T>-1e-8&&T<1e-8)return v*(v*(v*C+m)+s);if(O=v*(v*(3*x)+2*y)+d,O>1e-10&&O<1e-10)break;v+=T/O}let L=0,j=1;for(let U=0;U<20;U++){if(v=.5*(L+j),I=v*(v*(v*x+y)+d),T=w-I,T>-1e-8&&T<1e-8)return v*(v*(v*C+m)+s);T<0?j=v:L=v}}},fh={},xM={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},ch=c=>c,wM=c=>{const r=/-?\d*\.?\d+/g,i=c.match(r);if(i){const[l,d,y,x]=i,s=parseFloat(l||"0.42"),m=parseFloat(d||"0"),C=parseFloat(y||"1"),w=parseFloat(x||"1"),v=nC(s,m,C,w);return fh[c]=v,v}return console.warn("Unknown cubic-bezier timing: "+c),ch},SM=c=>{if(c==="linear")return ch;if(fh[c]!==void 0)return fh[c]||ch;if(c==="step-start")return()=>1;if(c==="step-end")return i=>i===1?1:0;const r=xM[c];if(r!==void 0){const[i,l,d,y]=r,x=nC(i,l,d,y);return fh[c]=x,x}return c.startsWith("cubic-bezier")?wM(c):(console.warn("Unknown timing function: "+c),ch)};function pS(c){return(c/1024/1024).toFixed(2)}class CM extends cr{constructor(i,l,d){super();P(this,"node");P(this,"props");P(this,"settings");P(this,"progress",0);P(this,"delayFor",0);P(this,"delay",0);P(this,"timingFunction");P(this,"propValuesMap",{});P(this,"dynPropValuesMap");this.node=i,this.props=l;for(const s in l)if(s!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[s]={start:i[s]||0,target:l[s]};else if(i.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const m in l.shaderProps)this.propValuesMap.shaderProps[m]={start:i.shader.props[m],target:l.shaderProps[m]}}else{const m=Object.keys(l.shaderProps),C=m.length;this.dynPropValuesMap={};for(let w=0;w<C;w++){const v=m[w],I=l.shaderProps[v];this.dynPropValuesMap[v]={};const O=Object.entries(I),T=O.length;for(let L=0;L<T;L++){const[j,U]=O[L];this.dynPropValuesMap[v][j]={start:i.shader.props[v][j],target:U}}}}const y=d.easing||"linear",x=d.delay??0;this.settings={duration:d.duration??0,delay:x,easing:y,loop:d.loop??!1,repeat:d.repeat??0,repeatDelay:d.repeatDelay??0,stopMethod:d.stopMethod??!1},this.timingFunction=SM(y),this.delayFor=x,this.delay=x}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(i,l){const d=Object.entries(l),y=d.length;for(let x=0;x<y;x++){const[s,m]=d[x];i[s]=m.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),l=i.length;if(l>0)for(let d=0;d<l;d++){const y=i[d];this.restoreValues(this.node.shader.props[y],this.dynPropValuesMap[y])}}}reverseValues(i){const l=Object.entries(i),d=l.length;for(let y=0;y<d;y++){const[x,s]=l[y];i[x]={start:s.target,target:s.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),l=i.length;if(l>0)for(let d=0;d<l;d++){const y=i[d];this.reverseValues(this.dynPropValuesMap[y])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(i,l,d){return(this.timingFunction(i)||i)*(d-l)+l}updateValue(i,l,d,y){if(this.progress===1)return l;if(this.progress===0)return d;const x=l;if(i.indexOf("color")!==-1){if(d===x)return d;if(y){const s=this.timingFunction(this.progress)||this.progress;return fS(d,x,s)}return fS(d,x,this.progress)}return y?this.applyEasing(this.progress,d,x):d+(x-d)*this.progress}updateValues(i,l,d){const y=Object.entries(l),x=y.length;for(let s=0;s<x;s++){const[m,C]=y[s];i[m]=this.updateValue(m,C.target,C.start,d)}}update(i){const{duration:l,loop:d,easing:y,stopMethod:x}=this.settings,{delayFor:s}=this;if(l===0&&s===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=i,this.delayFor>=0)return;i=-this.delayFor,this.delayFor=0}if(l===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=i/l,this.progress>1&&(this.progress=d?0:1,this.delayFor=this.delay,x)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,y),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,y),this.dynPropValuesMap!==void 0){const m=Object.keys(this.dynPropValuesMap),C=m.length;if(C>0)for(let w=0;w<C;w++){const v=m[w];this.updateValues(this.node.shader.props[v],this.dynPropValuesMap[v],y)}}this.progress<1&&this.emit("tick",{progress:this.progress}),this.progress===1&&this.emit("finished",{})}}class TM extends cr{constructor(i,l){super();P(this,"manager");P(this,"animation");P(this,"stoppedPromise");P(this,"stoppedResolve",null);P(this,"state");this.manager=i,this.animation=l,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this)}start(){return this.state!=="running"&&this.state!=="scheduled"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(i=>{this.stoppedResolve=i}))}onFinished(){it(this.stoppedResolve);const{loop:i,stopMethod:l}=this.animation.settings;if(l==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}i||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(i,l){this.emit("tick",l)}}var ui;(function(c){c[c.Init=0]="Init",c[c.OutOfBounds=2]="OutOfBounds",c[c.InBounds=4]="InBounds",c[c.InViewport=8]="InViewport"})(ui||(ui={}));const wl=new Map;wl.set(ui.Init,"init");wl.set(ui.OutOfBounds,"outOfBounds");wl.set(ui.InBounds,"inBounds");wl.set(ui.InViewport,"inViewport");var De;(function(c){c[c.Children=1]="Children",c[c.ScaleRotate=2]="ScaleRotate",c[c.Local=4]="Local",c[c.Global=8]="Global",c[c.Clipping=16]="Clipping",c[c.CalculatedZIndex=32]="CalculatedZIndex",c[c.ZIndexSortedChildren=64]="ZIndexSortedChildren",c[c.PremultipliedColors=128]="PremultipliedColors",c[c.WorldAlpha=256]="WorldAlpha",c[c.RenderState=512]="RenderState",c[c.IsRenderable=1024]="IsRenderable",c[c.RenderTexture=2048]="RenderTexture",c[c.ParentRenderTexture=4096]="ParentRenderTexture",c[c.RenderBounds=8192]="RenderBounds",c[c.None=0]="None",c[c.All=14335]="All"})(De||(De={}));class cm extends cr{constructor(i,l){super();P(this,"stage");P(this,"children",[]);P(this,"_id",cM());P(this,"props");P(this,"updateType",De.All);P(this,"childUpdateType",De.None);P(this,"globalTransform");P(this,"scaleRotateTransform");P(this,"localTransform");P(this,"renderCoords");P(this,"renderBound");P(this,"strictBound");P(this,"preloadBound");P(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});P(this,"isRenderable",!1);P(this,"renderState",ui.Init);P(this,"worldAlpha",1);P(this,"premultipliedColorTl",0);P(this,"premultipliedColorTr",0);P(this,"premultipliedColorBl",0);P(this,"premultipliedColorBr",0);P(this,"calcZIndex",0);P(this,"hasRTTupdates",!1);P(this,"parentHasRenderTexture",!1);P(this,"rttParent",null);P(this,"onTextureLoaded",(i,l)=>{var d,y;this.autosizeNode(l),this.setUpdateType(De.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),l.width>1&&l.height>1&&this.emit("loaded",{type:"texture",dimensions:l}),((y=(d=this.props.textureOptions)==null?void 0:d.resizeMode)==null?void 0:y.type)==="contain"&&this.setUpdateType(De.Local)});P(this,"onTextureFailed",(i,l)=>{this.setUpdateType(De.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:l})});P(this,"onTextureFreed",()=>{this.setUpdateType(De.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})});this.stage=i,this.props={...l,parent:null,texture:null,src:null,rtt:!1},this.parent=l.parent,this.texture=l.texture,this.src=l.src,this.rtt=l.rtt,this.setUpdateType(De.ScaleRotate|De.Local|De.RenderBounds|De.RenderState),La()===!1&&l.preventCleanup===!0&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&this.stage.defaultTexture.state!=="loaded"&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(De.IsRenderable)})}loadTexture(){const{texture:i}=this.props;it(i),queueMicrotask(()=>{var l;if(this.textureOptions.preload===!0&&this.stage.txManager.loadTexture(i),i.preventCleanup=((l=this.props.textureOptions)==null?void 0:l.preventCleanup)??!1,i.on("loaded",this.onTextureLoaded),i.on("failed",this.onTextureFailed),i.on("freed",this.onTextureFreed),this.parentHasRenderTexture){this.notifyParentRTTOfUpdate();return}i.state==="loaded"?(it(i.dimensions),this.onTextureLoaded(i,i.dimensions)):i.state==="failed"?(it(i.error),this.onTextureFailed(i,i.error)):i.state==="freed"&&this.onTextureFreed(i)})}unloadTexture(){this.texture!==null&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(i){this.autosize&&(this.width=i.width,this.height=i.height)}setUpdateType(i){this.updateType|=i;const l=this.props.parent;l&&(l.updateType&De.Children||l.setUpdateType(De.Children))}sortChildren(){this.children.sort((i,l)=>i.calcZIndex-l.calcZIndex)}updateScaleRotateTransform(){const{rotation:i,scaleX:l,scaleY:d}=this.props;if(i===0&&l===1&&d===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=_i.rotate(i,this.scaleRotateTransform).scale(l,d)}updateLocalTransform(){var C,w;const{x:i,y:l,width:d,height:y}=this.props,x=this.props.mountX*d,s=this.props.mountY*y;if(this.scaleRotateTransform){const v=this.props.pivotX*d,I=this.props.pivotY*y;this.localTransform=_i.translate(i-x+v,l-s+I,this.localTransform).multiply(this.scaleRotateTransform).translate(-v,-I)}else this.localTransform=_i.translate(i-x,l-s,this.localTransform);const m=this.props.texture;if(m&&m.dimensions&&((w=(C=this.props.textureOptions)==null?void 0:C.resizeMode)==null?void 0:w.type)==="contain"){let v=1,I=1,O=0,T=0;const{width:L,height:j}=m.dimensions,U=L/j,V=d/y;if(U>V){const z=d/L,G=j*z;T=(y-G)/2,I=G/y}else{const z=y/j,G=L*z;O=(d-G)/2,v=G/d}this.localTransform.translate(O,T).scale(v,I)}this.setUpdateType(De.Global)}update(i,l){var x;this.updateType&De.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(De.Local)),this.updateType&De.Local&&(this.updateLocalTransform(),this.setUpdateType(De.Global));const d=this.props.parent;let y=null;if(this.updateType&De.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0,this.loadRenderTexture()),this.updateType&De.Global&&(it(this.localTransform),this.globalTransform=_i.copy((d==null?void 0:d.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((x=this.props.parent)!=null&&x.rtt)&&(this.globalTransform=_i.identity()),d&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(De.RenderState|De.Children),this.childUpdateType|=De.Global,this.clipping===!0&&(this.setUpdateType(De.Clipping|De.RenderBounds),this.childUpdateType|=De.RenderBounds)),this.updateType&De.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(De.RenderState),this.setUpdateType(De.Children)),this.updateType&De.RenderState&&(y=this.checkRenderBounds(),this.setUpdateType(De.IsRenderable),y!==ui.OutOfBounds&&this.updateRenderState(y)),this.updateType&De.WorldAlpha&&(d?this.worldAlpha=d.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(De.Children|De.PremultipliedColors|De.IsRenderable),this.childUpdateType|=De.WorldAlpha),this.updateType&De.IsRenderable&&this.updateIsRenderable(),this.updateType&De.Clipping&&(this.calculateClippingRect(l),this.setUpdateType(De.Children),this.childUpdateType|=De.Clipping,this.childUpdateType|=De.RenderBounds),this.updateType&De.PremultipliedColors&&(this.premultipliedColorTl=Wc(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=Wc(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Wc(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Wc(this.props.colorBr,this.worldAlpha,!0))),d!==null&&this.updateType&De.CalculatedZIndex&&(this.calculateZIndex(),d.setUpdateType(De.ZIndexSortedChildren)),!(this.props.strictBounds===!0&&this.renderState===ui.OutOfBounds)){if(this.updateType&De.Children&&this.children.length>0)for(let s=0,m=this.children.length;s<m;s++){const C=this.children[s];if(C.setUpdateType(this.childUpdateType),C.updateType===0)continue;let w=this.clippingRect;this.rtt===!0&&(w={x:0,y:0,width:0,height:0,valid:!1}),C.update(i,w)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&De.ZIndexSortedChildren&&this.sortChildren(),y===ui.OutOfBounds&&(this.updateRenderState(y),this.updateIsRenderable()),this.updateType=0,this.childUpdateType=0}}findParentRTTNode(){let i=this.parent;for(;i&&!i.rtt;)i=i.parent;return i}notifyParentRTTOfUpdate(){if(this.parent===null)return;const i=this.rttParent||this.findParentRTTNode();i&&(i.hasRTTupdates=!0,i.setUpdateType(De.RenderTexture),i.parentHasRenderTexture===!0&&i.notifyParentRTTOfUpdate())}checkRenderBounds(){return it(this.renderBound),it(this.strictBound),it(this.preloadBound),K0(this.renderBound,this.strictBound)?ui.InViewport:K0(this.renderBound,this.preloadBound)?ui.InBounds:mM(this.renderBound,this.strictBound)?ui.InViewport:this.parentHasRenderTexture===!0?ui.InBounds:this.parent!==null&&(this.props.width===0||this.props.height===0)?this.parent.renderState:ui.OutOfBounds}updateBoundingRect(){const{renderCoords:i,globalTransform:l}=this;it(l),it(i);const{tb:d,tc:y}=l,{x1:x,y1:s,x3:m,y3:C}=i;if(d===0||y===0)this.renderBound=Ta(x,s,m,C,this.renderBound);else{const{x2:w,x4:v,y2:I,y4:O}=i;this.renderBound=Ta(Math.min(x,w,m,v),Math.min(s,I,C,O),Math.max(x,w,m,v),Math.max(s,I,C,O),this.renderBound)}}createRenderBounds(){if(it(this.stage),this.parent!==null&&this.parent.strictBound!==void 0){const w=this.parent.strictBound;this.strictBound=Ta(w.x1,w.y1,w.x2,w.y2),this.preloadBound=fm(this.strictBound,this.stage.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(this.props.clipping===!1||this.renderBound===void 0||K0(this.renderBound,this.strictBound)===!1)return;const{x:i,y:l,width:d,height:y}=this.props,{tx:x,ty:s}=this.globalTransform||{},m=x??i,C=s??l;this.strictBound=Ta(m,C,m+d,C+y,this.strictBound),this.preloadBound=fm(this.strictBound,this.stage.boundsMargin)}updateRenderState(i){if(i===this.renderState)return;const l=this.renderState;this.renderState=i;const d=wl.get(i);it(d),this.emit(d,{previous:l,current:i})}updateIsRenderable(){let i=!1,l=!1;if(this.checkBasicRenderability()===!1){this.updateTextureOwnership(!1),this.setRenderable(!1);return}this.texture!==null?(l=!0,i=this.texture.state==="loaded"):(this.hasShader()||this.hasColorProperties()===!0)&&this.hasDimensions()===!0&&this.stage.defaultTexture&&this.stage.defaultTexture.state==="loaded"&&(i=!0),this.updateTextureOwnership(l),this.setRenderable(i)}checkBasicRenderability(){return!(this.worldAlpha===0||this.isOutOfBounds()===!0)}setRenderable(i){this.isRenderable=i}updateTextureOwnership(i){var l;(l=this.texture)==null||l.setRenderableOwner(this,i)}isOutOfBounds(){return this.renderState<=ui.OutOfBounds}hasDimensions(){return this.props.width!==0&&this.props.height!==0}hasColorProperties(){return this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0}hasShader(){return this.props.shader!==null}calculateRenderCoords(){const{width:i,height:l,globalTransform:d}=this;it(d);const{tx:y,ty:x,ta:s,tb:m,tc:C,td:w}=d;if(m===0&&C===0){const v=y,I=y+i*s,O=x,T=x+l*w;this.renderCoords=wh.translate(v,O,I,O,I,T,v,T,this.renderCoords)}else this.renderCoords=wh.translate(y,x,y+i*s,x+i*C,y+i*s+l*m,x+i*C+l*w,y+l*m,x+l*w,this.renderCoords)}calculateClippingRect(i){it(this.globalTransform);const{clippingRect:l,props:d,globalTransform:y}=this,{clipping:x}=d,s=y.tb!==0||y.tc!==0;x===!0&&s===!1?(l.x=y.tx,l.y=y.ty,l.width=this.width*y.ta,l.height=this.height*y.td,l.valid=!0):l.valid=!1,i.valid===!0&&l.valid===!0?eC(i,l,l):i.valid===!0&&(tC(i,l),l.valid=!0)}calculateZIndex(){var x,s;const i=this.props,l=i.zIndex||0,d=((x=i.parent)==null?void 0:x.zIndex)||0;let y=l;(s=i.parent)!=null&&s.zIndexLocked&&(y=l<d?l:d),this.calcZIndex=y}destroy(){var i;for(this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;)(i=this.children[0])==null||i.destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(i){this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(it(this.globalTransform),it(this.renderCoords),i.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions}))}get id(){return this._id}get data(){return this.props.data}set data(i){this.props.data=i}get x(){return this.props.x}set x(i){this.props.x!==i&&(this.props.x=i,this.setUpdateType(De.Local))}get absX(){var i,l,d;return this.props.x+-this.props.width*this.props.mountX+(((i=this.props.parent)==null?void 0:i.absX)||((d=(l=this.props.parent)==null?void 0:l.globalTransform)==null?void 0:d.tx)||0)}get absY(){var i;return this.props.y+-this.props.height*this.props.mountY+(((i=this.props.parent)==null?void 0:i.absY)??0)}get y(){return this.props.y}set y(i){this.props.y!==i&&(this.props.y=i,this.setUpdateType(De.Local))}get width(){return this.props.width}set width(i){this.props.width!==i&&(this.props.width=i,this.setUpdateType(De.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(De.RenderTexture)))}get height(){return this.props.height}set height(i){this.props.height!==i&&(this.props.height=i,this.setUpdateType(De.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(De.RenderTexture)))}get scale(){return this.scaleX}set scale(i){this.scaleX=i,this.scaleY=i}get scaleX(){return this.props.scaleX}set scaleX(i){this.props.scaleX!==i&&(this.props.scaleX=i,this.setUpdateType(De.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(i){this.props.scaleY!==i&&(this.props.scaleY=i,this.setUpdateType(De.ScaleRotate))}get mount(){return this.props.mount}set mount(i){(this.props.mountX!==i||this.props.mountY!==i)&&(this.props.mountX=i,this.props.mountY=i,this.props.mount=i,this.setUpdateType(De.Local))}get mountX(){return this.props.mountX}set mountX(i){this.props.mountX!==i&&(this.props.mountX=i,this.setUpdateType(De.Local))}get mountY(){return this.props.mountY}set mountY(i){this.props.mountY!==i&&(this.props.mountY=i,this.setUpdateType(De.Local))}get pivot(){return this.props.pivot}set pivot(i){(this.props.pivotX!==i||this.props.pivotY!==i)&&(this.props.pivotX=i,this.props.pivotY=i,this.props.pivot=i,this.setUpdateType(De.Local))}get pivotX(){return this.props.pivotX}set pivotX(i){this.props.pivotX!==i&&(this.props.pivotX=i,this.setUpdateType(De.Local))}get pivotY(){return this.props.pivotY}set pivotY(i){this.props.pivotY!==i&&(this.props.pivotY=i,this.setUpdateType(De.Local))}get rotation(){return this.props.rotation}set rotation(i){this.props.rotation!==i&&(this.props.rotation=i,this.setUpdateType(De.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(i){this.props.alpha=i,this.setUpdateType(De.PremultipliedColors|De.WorldAlpha|De.Children|De.IsRenderable),this.childUpdateType|=De.WorldAlpha}get autosize(){return this.props.autosize}set autosize(i){this.props.autosize=i}get clipping(){return this.props.clipping}set clipping(i){this.props.clipping=i,this.setUpdateType(De.Clipping|De.RenderBounds|De.Children),this.childUpdateType|=De.Global|De.Clipping}get color(){return this.props.color}set color(i){this.colorTop=i,this.colorBottom=i,this.colorLeft=i,this.colorRight=i,this.props.color=i,this.setUpdateType(De.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(i){(this.props.colorTl!==i||this.props.colorTr!==i)&&(this.colorTl=i,this.colorTr=i),this.props.colorTop=i,this.setUpdateType(De.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(i){(this.props.colorBl!==i||this.props.colorBr!==i)&&(this.colorBl=i,this.colorBr=i),this.props.colorBottom=i,this.setUpdateType(De.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(i){(this.props.colorTl!==i||this.props.colorBl!==i)&&(this.colorTl=i,this.colorBl=i),this.props.colorLeft=i,this.setUpdateType(De.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(i){(this.props.colorTr!==i||this.props.colorBr!==i)&&(this.colorTr=i,this.colorBr=i),this.props.colorRight=i,this.setUpdateType(De.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(i){this.props.colorTl=i,this.setUpdateType(De.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(i){this.props.colorTr=i,this.setUpdateType(De.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(i){this.props.colorBl=i,this.setUpdateType(De.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(i){this.props.colorBr=i,this.setUpdateType(De.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(i){this.props.zIndexLocked=i,this.setUpdateType(De.CalculatedZIndex|De.Children);for(let l=0,d=this.children.length;l<d;l++)this.children[l].setUpdateType(De.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(i){this.props.zIndex=i,this.setUpdateType(De.CalculatedZIndex|De.Children);for(let l=0,d=this.children.length;l<d;l++)this.children[l].setUpdateType(De.CalculatedZIndex)}get parent(){return this.props.parent}set parent(i){const l=this.props.parent;if(l!==i){if(this.props.parent=i,l){const d=l.children.indexOf(this);it(d!==-1,"CoreNode.parent: Node not found in old parent's children!"),l.children.splice(d,1),l.setUpdateType(De.Children|De.ZIndexSortedChildren)}i&&(i.children.push(this),this.setUpdateType(De.All),i.setUpdateType(De.Children|De.ZIndexSortedChildren),(i.rtt||i.parentHasRenderTexture)&&this.applyRTTInheritance(i)),this.updateScaleRotateTransform(),this.setUpdateType(De.RenderBounds|De.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(i){La()===!1&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=i}get rtt(){return this.props.rtt}set rtt(i){this.props.rtt!==i&&(this.props.rtt=i,i===!0?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(De.RenderTexture),this.parentHasRenderTexture===!0&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.loadRenderTexture()}loadRenderTexture(){var i;if(this.texture!==null){if(this.texture.state==="loaded"){(i=this.stage.renderer)==null||i.renderToTexture(this);return}this.stage.txManager.loadTexture(this.texture,!0),this.texture.once("loaded",()=>{var l;(l=this.stage.renderer)==null||l.renderToTexture(this),this.setUpdateType(De.IsRenderable)})}}cleanupRenderTexture(){var i;this.unloadTexture(),this.clearRTTInheritance(),(i=this.stage.renderer)==null||i.removeRTTNode(this),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(i=null){const l=i||this;for(const d of l.children)d.setUpdateType(De.All),d.parentHasRenderTexture=!0,d.markChildrenWithRTT()}applyRTTInheritance(i){i.rtt&&i.setUpdateType(De.RenderTexture),this.markChildrenWithRTT(i)}clearRTTInheritance(){if(!this.rtt)for(const i of this.children)i.parentHasRenderTexture=!1,i.rttParent=null,i.setUpdateType(De.All),i.clearRTTInheritance()}get shader(){return this.props.shader}set shader(i){this.props.shader!==i&&(this.props.shader=i,this.setUpdateType(De.IsRenderable))}get src(){return this.props.src}set src(i){if(this.props.src!==i){if(this.props.src=i,!i){this.texture=null;return}this.texture=this.stage.txManager.createTexture("ImageTexture",{src:i,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(i){this.props.imageType!==i&&(this.props.imageType=i)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(i){this.props.srcHeight=i}get srcWidth(){return this.props.srcWidth}set srcWidth(i){this.props.srcWidth=i}get srcX(){return this.props.srcX}set srcX(i){this.props.srcX=i}get srcY(){return this.props.srcY}set srcY(i){this.props.srcY=i}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let i=this.parent;for(;i;){if(i.rtt)return i;i=i.parent}return null}get texture(){return this.props.texture}set texture(i){if(this.props.texture===i)return;const l=this.props.texture;l&&(l.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=i,i!==null&&(i.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(De.IsRenderable)}set textureOptions(i){this.props.textureOptions=i}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(i){i!==this.props.strictBounds&&(this.props.strictBounds=i,this.setUpdateType(De.RenderBounds|De.Children),this.childUpdateType|=De.RenderBounds|De.Children)}animate(i,l){const d=new CM(this,i,l);return new TM(this.stage.animationManager,d)}flush(){}}const EM=c=>{let r=!1;const i=()=>{if(c.updateFrameTime(),c.updateAnimations(),!c.hasSceneUpdates()){c.calculateFps(),setTimeout(i,16.666666666666668),r||(c.txMemManager.checkCleanup()&&c.txMemManager.cleanup(),c.eventBus.emit("idle"),r=!0),c.flushFrameEvents();return}r=!1,c.drawFrame(),c.flushFrameEvents(),requestAnimationFrame(i)};requestAnimationFrame(i)},ss=()=>performance?performance.now():Date.now();class bM{constructor(){P(this,"activeAnimations",new Set)}registerAnimation(r){this.activeAnimations.add(r)}unregisterAnimation(r){this.activeAnimations.delete(r)}update(r){this.activeAnimations.forEach(i=>{i.update(r)})}}function AM(){function c(i){return i.indexOf("image/png")!==-1}function r(i,l,d,y,x,s,m){return new Promise(function(C,w){var v=m.supportsOptionsCreateImageBitmap,I=m.supportsFullCreateImageBitmap,O=new XMLHttpRequest;O.open("GET",i,!0),O.responseType="blob",O.onload=function(){if(O.status!==200)return w(new Error("Failed to load image: "+O.statusText));var T=O.response,L=l!==void 0?l:c(T.type);if(I===!0&&x!==null&&s!==null){createImageBitmap(T,d||0,y||0,x,s,{premultiplyAlpha:L?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(j){C({data:j,premultiplyAlpha:l})}).catch(function(j){w(j)});return}else v===!0?createImageBitmap(T,{premultiplyAlpha:L?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(j){C({data:j,premultiplyAlpha:l})}).catch(function(j){w(j)}):createImageBitmap(T).then(function(j){C({data:j,premultiplyAlpha:l})}).catch(function(j){w(j)})},O.onerror=function(){w(new Error("Network error occurred while trying to fetch the image."))},O.send()})}self.onmessage=i=>{var l=i.data.src,d=i.data.id,y=i.data.premultiplyAlpha,x=i.data.sx,s=i.data.sy,m=i.data.sw,C=i.data.sh,w=!1,v=!1;r(l,y,x,s,m,C,{supportsOptionsCreateImageBitmap:w,supportsFullCreateImageBitmap:v}).then(function(I){self.postMessage({id:d,src:l,data:I})}).catch(function(I){self.postMessage({id:d,src:l,error:I.message})})}}class kM{constructor(r,i){P(this,"imageWorkersEnabled",!0);P(this,"messageManager",{});P(this,"workers",[]);P(this,"workerIndex",0);P(this,"nextId",0);this.workers=this.createWorkers(r,i),this.workers.forEach(l=>{l.onmessage=this.handleMessage.bind(this)})}handleMessage(r){const{id:i,data:l,error:d}=r.data,y=this.messageManager[i];if(y){const[x,s]=y;delete this.messageManager[i],d?s(new Error(d)):x(l)}}createWorkers(r=1,i){let l=`(${AM.toString()})()`;i.options&&(l=l.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),i.full&&(l=l.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),l=l.replace('"use strict";',"");const d=new Blob([l],{type:"application/javascript"}),y=(self.URL?URL:webkitURL).createObjectURL(d),x=[];for(let s=0;s<r;s++)x.push(new Worker(y));return x}getNextWorker(){const r=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,r}getImage(r,i,l,d,y,x){return new Promise((s,m)=>{try{if(this.workers){const C=this.nextId++;this.messageManager[C]=[s,m];const w=this.getNextWorker();w&&w.postMessage({id:C,src:r,premultiplyAlpha:i,sx:l,sy:d,sw:y,sh:x})}}catch(C){m(C)}})}}const ll=class ll extends vl{constructor(i,l){super(i);P(this,"type",Gn.color);P(this,"props");this.props=ll.resolveDefaults(l||{})}get color(){return this.props.color}set color(i){this.props.color=i}async getTextureSource(){const i=new Uint8Array(4);return this.color===4294967295?(i[0]=255,i[1]=255,i[2]=255,i[3]=255):(i[0]=this.color>>16&255,i[1]=this.color>>8&255,i[2]=this.color&255,i[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:i,premultiplyAlpha:!0}}static makeCacheKey(i){return`ColorTexture,${ll.resolveDefaults(i).color}`}static resolveDefaults(i){return{color:i.color||4294967295}}};P(ll,"z$__type__Props");let Sh=ll;function IM(c){return/\.(ktx|pvr)$/.test(c)}const mS=async c=>{const i=await(await fetch(c)).arrayBuffer();return c.indexOf(".ktx")!==-1?MM(i):RM(i)},MM=async c=>{const r=new DataView(c),i=r.getUint32(12)===16909060,l=[],d={glInternalFormat:r.getUint32(28,i),pixelWidth:r.getUint32(36,i),pixelHeight:r.getUint32(40,i),numberOfMipmapLevels:r.getUint32(56,i),bytesOfKeyValueData:r.getUint32(60,i)};let y=64;y+=d.bytesOfKeyValueData;for(let x=0;x<d.numberOfMipmapLevels;x++){const s=r.getUint32(y);y+=4,l.push(r.buffer.slice(y,s)),y+=s}return{data:{glInternalFormat:d.glInternalFormat,mipmaps:l,width:d.pixelWidth||0,height:d.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},RM=async c=>{const s=c,m=new Int32Array(s,0,13),C=m[12]+52,w=new Uint8Array(s,C),v=[],I={pixelWidth:m[7],pixelHeight:m[6],numberOfMipmapLevels:m[11]||0};let O=0,T=I.pixelWidth||0,L=I.pixelHeight||0;for(let j=0;j<I.numberOfMipmapLevels;j++){const U=(T+3>>2)*(L+3>>2)*8,V=new Uint8Array(s,w.byteOffset+O,U);v.push(V),O+=U,T=T>>1,L=L>>1}return{data:{glInternalFormat:36196,mipmaps:v,width:I.pixelWidth||0,height:I.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function _M(c){return/\.(svg)(\?.*)?$/.test(c)}const gS=(c,r,i,l,d,y,x)=>new Promise((s,m)=>{const C=document.createElement("canvas"),w=C.getContext("2d");it(w),w.imageSmoothingEnabled=!0;const v=new Image;v.onload=()=>{const I=l??0,O=d??0,T=r||v.width,L=i||v.height;C.width=T,C.height=L,w.drawImage(v,0,0,T,L),s({data:w.getImageData(I,O,y??T,x??L),premultiplyAlpha:!1})},v.onerror=I=>{m(I)},v.src=c}),fl=class fl extends vl{constructor(i,l){super(i);P(this,"props");P(this,"type",Gn.image);this.props=fl.resolveDefaults(l)}hasAlphaChannel(i){return i.indexOf("image/png")!==-1}async loadImageFallback(i,l){const d=new Image;return dS(i)===!1&&(d.crossOrigin="anonymous"),new Promise(y=>{d.onload=()=>{y({data:d,premultiplyAlpha:l})},d.onerror=()=>{console.warn("Image loading failed, returning fallback object."),y({data:d,premultiplyAlpha:l})},d.src=i})}async createImageBitmap(i,l,d,y,x,s){const m=l??i.type.includes("image/png"),C=this.txManager.imageBitmapSupported;return C.full===!0&&d!==null&&y!==null&&x!==null&&s!==null?{data:await createImageBitmap(i,d,y,x,s,{premultiplyAlpha:m?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:m}:C.options===!0?{data:await createImageBitmap(i,{premultiplyAlpha:m?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:m}:{data:await createImageBitmap(i),premultiplyAlpha:m}}async loadImage(i){const{premultiplyAlpha:l,sx:d,sy:y,sw:x,sh:s}=this.props;if(this.txManager.hasCreateImageBitmap===!0){if(dS(i)===!1&&this.txManager.hasWorker===!0&&this.txManager.imageWorkerManager!==null)return this.txManager.imageWorkerManager.getImage(i,l,d,y,x,s);const m=await fetch(i).then(C=>C.blob());return this.createImageBitmap(m,l,d,y,x,s)}return this.loadImageFallback(i,l??!0)}async getTextureSource(){var y,x;let i;try{i=await this.determineImageTypeAndLoadImage()}catch(s){return this.setState("failed",s),{data:null}}if(i.data===null)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};let l,d;return i.data instanceof Uint8Array?(l=this.props.width??0,d=this.props.height??0):(l=((y=i.data)==null?void 0:y.width)??(this.props.width||0),d=((x=i.data)==null?void 0:x.height)??(this.props.height||0)),this.setState("fetched",{width:l,height:d}),{data:i.data,premultiplyAlpha:this.props.premultiplyAlpha??!0}}determineImageTypeAndLoadImage(){const{src:i,premultiplyAlpha:l,type:d}=this.props;if(i===null)return{data:null};if(typeof i!="string")return i instanceof ImageData?{data:i,premultiplyAlpha:l}:{data:i(),premultiplyAlpha:l};const y=yM(i);return d==="regular"?this.loadImage(y):d==="svg"?gS(y,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):_M(i)===!0?gS(y,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):d==="compressed"||IM(i)===!0?mS(y):this.loadImage(y)}static makeCacheKey(i){const l=fl.resolveDefaults(i),d=l.key||l.src;if(typeof d!="string")return!1;let y="";return l.sh!==null&&l.sw!==null&&(y+=",",y+=l.sx??"",y+=l.sy??"",y+=l.sw||"",y+=l.sh||""),`ImageTexture,${d},${l.premultiplyAlpha??"true"}${y}`}static resolveDefaults(i){return{src:i.src??"",premultiplyAlpha:i.premultiplyAlpha??!0,key:i.key??null,type:i.type??null,width:i.width??null,height:i.height??null,sx:i.sx??null,sy:i.sy??null,sw:i.sw??null,sh:i.sh??null}}};P(fl,"z$__type__Props");let pl=fl;const cl=class cl extends vl{constructor(i,l){super(i);P(this,"props");P(this,"type",Gn.noise);this.props=cl.resolveDefaults(l)}async getTextureSource(){const{width:i,height:l}=this.props,d=i*l*4,y=new Uint8ClampedArray(d);for(let x=0;x<d;x+=4){const s=Math.floor(Math.random()*256);y[x]=s,y[x+1]=s,y[x+2]=s,y[x+3]=255}return this.setState("fetched"),{data:new ImageData(y,i,l)}}static makeCacheKey(i){if(i.cacheId===void 0)return!1;const l=cl.resolveDefaults(i);return`NoiseTexture,${l.width},${l.height},${l.cacheId}`}static resolveDefaults(i){return{width:i.width??128,height:i.height??128,cacheId:i.cacheId??0}}};P(cl,"z$__type__Props");let hm=cl;const Ah=class Ah extends vl{constructor(i,l){super(i);P(this,"props");P(this,"parentTexture");P(this,"type",Gn.subTexture);P(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height}),this.freeTextureData()});P(this,"onParentTxFailed",(i,l)=>{this.forwardParentTxState("failed",l),this.free()});P(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})});P(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")});P(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")});P(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed"),this.free()});this.props=Ah.resolveDefaults(l||{}),it(this.props.texture,"SubTexture requires a parent texture"),it(this.props.texture instanceof pl,"SubTexture requires an ImageTexture parent"),this.parentTexture=i.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const d=this.parentTexture;d.state==="loaded"?this.onParentTxLoaded(d,d.dimensions):d.state==="fetching"?this.onParentTxFetching():d.state==="fetched"?this.onParentTxFetched():d.state==="loading"?this.onParentTxLoading():d.state==="failed"?this.onParentTxFailed(d,d.error):d.state==="freed"&&this.onParentTxFreed(),d.on("fetched",this.onParentTxFetched),d.on("loading",this.onParentTxLoading),d.on("fetching",this.onParentTxFetching),d.on("loaded",this.onParentTxLoaded),d.on("failed",this.onParentTxFailed),d.on("freed",this.onParentTxFreed)})}forwardParentTxState(i,l){this.setState(i,l)}onChangeIsRenderable(i){this.parentTexture.setRenderableOwner(this,i)}async getTextureSource(){return new Promise((i,l)=>{this.parentTexture.state==="loaded"&&i({data:this.props}),this.parentTexture.once("loaded",(d,y)=>{i({data:this.props})}),this.parentTexture.once("failed",(d,y)=>{l(y)}),this.parentTexture.once("freed",()=>{l(new Error("Parent texture was freed"))})})}static makeCacheKey(i){return!1}static resolveDefaults(i){return{texture:i.texture,x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0}}};P(Ah,"z$__type__Props");let ml=Ah;const kh=class kh extends vl{constructor(i,l){super(i);P(this,"props");P(this,"type",Gn.renderToTexture);this.props=kh.resolveDefaults(l||{})}get width(){return this.props.width}set width(i){this.props.width=i}get height(){return this.props.height}set height(i){this.props.height=i}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(i){return{width:i.width||256,height:i.height||256}}};P(kh,"z$__type__Props");let Ch=kh;class LM extends cr{constructor(i,l){super();P(this,"keyCache",new Map);P(this,"inverseKeyCache",new WeakMap);P(this,"txConstructors",{});P(this,"downloadTextureSourceQueue",[]);P(this,"priorityQueue",[]);P(this,"uploadTextureQueue",[]);P(this,"initialized",!1);P(this,"stage");P(this,"imageWorkerManager",null);P(this,"hasCreateImageBitmap",!!self.createImageBitmap);P(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1});P(this,"hasWorker",!!self.Worker);P(this,"renderer");P(this,"frameTime",0);this.stage=i,this.validateCreateImageBitmap().then(d=>{this.hasCreateImageBitmap=d.basic||d.options||d.full,this.imageBitmapSupported=d,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&l>0?this.imageWorkerManager=new kM(l,d):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}).catch(d=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}),this.registerTextureType("ImageTexture",pl),this.registerTextureType("ColorTexture",Sh),this.registerTextureType("NoiseTexture",hm),this.registerTextureType("SubTexture",ml),this.registerTextureType("RenderTexture",Ch)}async validateCreateImageBitmap(){var x,s,m;const i=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),l={basic:!1,options:!1,full:!1},d=new Blob([i],{type:"image/png"}),y=await createImageBitmap(d);(x=y.close)==null||x.call(y),l.basic=!0;try{const C={premultiplyAlpha:"none"},w=await createImageBitmap(d,C);(s=w.close)==null||s.call(w),l.options=!0}catch{}try{const C=await createImageBitmap(d,0,0,1,1,{premultiplyAlpha:"none"});(m=C.close)==null||m.call(C),l.full=!0}catch{}return l}registerTextureType(i,l){this.txConstructors[i]=l}enqueueDownloadTextureSource(i){this.downloadTextureSourceQueue.includes(i)||this.downloadTextureSourceQueue.push(i)}enqueueUploadTexture(i){this.uploadTextureQueue.includes(i)===!1&&this.uploadTextureQueue.push(i)}createTexture(i,l){let d;const y=this.txConstructors[i];if(!y)throw new Error(`Texture type "${i}" is not registered`);const x=y.makeCacheKey(l);return x&&this.keyCache.has(x)?d=this.keyCache.get(x):(d=new y(this,l),x&&this.initTextureToCache(d,x)),d}orphanTexture(i){this.stage.txMemManager.addToOrphanedTextures(i)}loadTexture(i,l){if(this.stage.txMemManager.removeFromOrphanedTextures(i),!(i.state==="loaded"||i.state==="loading")){if(i.setState("loading"),this.initialized===!1){this.priorityQueue.push(i);return}l===!0&&i.getTextureData().then(()=>{this.uploadTexture(i)}).catch(d=>{console.error(d)}),this.enqueueDownloadTextureSource(i)}}uploadTexture(i){i.loadCtxTexture().load()}processSome(i){if(this.initialized===!1)return;const l=ss();for(;this.priorityQueue.length>0&&ss()-l<i;){const d=this.priorityQueue.shift();d.getTextureData().then(()=>{d.state!=="failed"&&this.uploadTexture(d)})}for(;this.uploadTextureQueue.length>0&&ss()-l<i;)this.uploadTexture(this.uploadTextureQueue.shift());for(;this.downloadTextureSourceQueue.length>0&&ss()-l<i;){const d=this.downloadTextureSourceQueue.shift();queueMicrotask(()=>{d.getTextureData().then(()=>{d.state!=="failed"&&this.enqueueUploadTexture(d)})})}}hasUpdates(){return this.downloadTextureSourceQueue.length>0||this.uploadTextureQueue.length>0}initTextureToCache(i,l){const{keyCache:d,inverseKeyCache:y}=this;d.set(l,i),y.set(i,l)}getTextureFromCache(i){return this.keyCache.get(i)}removeTextureFromCache(i){const{inverseKeyCache:l,keyCache:d}=this,y=l.get(i);y&&d.delete(y)}resolveParentTexture(i){if(!(i!=null&&i.props))return i;const l=pl.makeCacheKey(i.props);return(l?this.getTextureFromCache(l):void 0)??i}}const PM={normal:400,bold:700,bolder:900,lighter:100},yS=c=>typeof c=="number"?c:PM[c]||400;function DM(c,r,i,l,d){let y=yS(i);for(const x of c){const s=x[r];if(!s)continue;if(s.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${r}' - will be used for all weights and styles`),s.values().next().value;const m=new Map;for(const w of s){const v=yS(w.descriptors.weight);if(v===y&&w.descriptors.style===l&&w.descriptors.stretch===d)return w;m.set(v,w)}const C=`TrFontManager: No exact match: '${r} Weight: ${y} Style: ${l} Stretch: ${d}'`;if(console.error(C),y===400&&m.has(500))return m.get(500);if(y===500&&m.has(400))return m.get(400);if(y<400){for(;y>0;){if(m.has(y))return m.get(y);y-=100}y=600}for(;y<1e3;){if(m.has(y))return m.get(y);y+=100}for(y=500;y>0;){if(m.has(y))return m.get(y);y-=100}}}class OM{constructor(r){P(this,"textRenderers");P(this,"fontCache",new Map);this.textRenderers=r}addFontFace(r){for(const i in this.textRenderers){const l=this.textRenderers[i];l&&l.isFontFaceSupported(r)&&l.addFontFace(r)}}resolveFontFace(r,i,l){const{fontFamily:d,fontWeight:y,fontStyle:x,fontStretch:s}=i,m=`${l}_${d}_${x}_${y}_${s}`;if(this.fontCache.has(m)===!0)return this.fontCache.get(m);const C=DM(r,d,y,x,s);return C!==void 0&&this.fontCache.set(m,C),C}}class iC{static makeCacheKey(r){return!1}static resolveDefaults(r){return{}}}function vS(c,r,i){const l=c.createShader(r);if(!l){const y=c.getError();throw new Error(`Unable to create the shader: ${r===c.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${y?` WebGlContext Error: ${y}`:""}`)}if(c.shaderSource(l,i),c.compileShader(l),!!c.getShaderParameter(l,c.COMPILE_STATUS))return l;console.error(c.getShaderInfoLog(l)),c.deleteShader(l)}function NM(c,r,i){const l=c.createProgram();if(!l)throw new Error("Unable to create program");if(c.attachShader(l,r),c.attachShader(l,i),c.linkProgram(l),!!c.getProgramParameter(l,c.LINK_STATUS))return l;console.warn(c.getProgramInfoLog(l)),c.deleteProgram(l)}class us extends iC{constructor(i){super();P(this,"boundBufferCollection",null);P(this,"buffersBound",!1);P(this,"program");P(this,"vao");P(this,"renderer");P(this,"glw");P(this,"attributeBuffers");P(this,"attributeLocations");P(this,"attributeNames");P(this,"uniformLocations");P(this,"uniformTypes");P(this,"supportsIndexedTextures");const l=this.renderer=i.renderer,d=this.glw=this.renderer.glw;this.supportsIndexedTextures=i.supportsIndexedTextures||!1;const y=d.isWebGl2(),x=y&&i.webgl2Extensions||!y&&i.webgl1Extensions||[],s=y?"2.0":"1.0";x.forEach(L=>{if(!d.getExtension(L))throw new Error(`Shader "${this.constructor.name}" requires extension "${L}" for WebGL ${s} but wasn't found`)});const m=i.shaderSources||this.constructor.shaderSources;if(m)y&&(m!=null&&m.webGl2)&&(m.fragment=m.webGl2.fragment,m.vertex=m.webGl2.vertex,delete m.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const C=l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,w=m.vertex instanceof Function?m.vertex(C):m.vertex,v=m.fragment instanceof Function?m.fragment(C):m.fragment,I=vS(d,d.VERTEX_SHADER,w),O=vS(d,d.FRAGMENT_SHADER,v);if(!I||!O)throw new Error(`Unable to create the following shader(s): ${[!I&&"VERTEX_SHADER",!O&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const T=NM(d,I,O);if(!T)throw new Error("Unable to create program");this.program=T,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...i.attributes].forEach(L=>{const j=d.getAttribLocation(this.program,L);if(j<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${L}"!`);const U=d.createBuffer();if(!U)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${L}"`);this.attributeLocations[L]=j,this.attributeBuffers[L]=U,this.attributeNames.push(L)}),this.uniformLocations={},this.uniformTypes={},i.uniforms.forEach(L=>{const j=d.getUniformLocation(this.program,L.name);if(this.uniformTypes[L.name]=L.uniform,!j){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${L.name}"`);return}this.uniformLocations[L.name]=j})}bindBufferAttribute(i,l,d){const{glw:y}=this;y.enableVertexAttribArray(i),y.vertexAttribPointer(l,i,d.size,d.type,d.normalized,d.stride,d.offset)}disableAttribute(i){this.glw.disableVertexAttribArray(i)}disableAttributes(){for(const i in this.attributeLocations)this.disableAttribute(this.attributeLocations[i]);this.boundBufferCollection=null}canBatchShaderProps(i,l){return!1}bindRenderOp(i,l){this.bindBufferCollection(i.buffers),i.textures.length>0&&this.bindTextures(i.textures);const{glw:d,parentHasRenderTexture:y,renderToTexture:x}=i;if(!(x&&y)){if(y){const{width:s,height:m}=i.framebufferDimensions||{};d.uniform1f(this.getUniformLocation("u_pixelRatio"),1),d.uniform2f(this.getUniformLocation("u_resolution"),s??0,m??0)}else d.uniform1f(this.getUniformLocation("u_pixelRatio"),i.options.pixelRatio),d.uniform2f(this.getUniformLocation("u_resolution"),d.canvas.width,d.canvas.height);if(l){if(xh(l,"$dimensions")){let s=l.$dimensions;s||(s=i.dimensions),d.uniform2f(this.getUniformLocation("u_dimensions"),s.width,s.height)}if(xh(l,"$alpha")){let s=l.$alpha;s||(s=i.alpha),d.uniform1f(this.getUniformLocation("u_alpha"),s)}this.bindProps(l)}}}getUniformLocation(i){return this.uniformLocations[i]||null}bindBufferCollection(i){if(this.boundBufferCollection!==i){for(const l in this.attributeLocations){const d=i.getBuffer(l),y=i.getAttributeInfo(l);it(d,`Buffer for "${l}" not found`),it(y),this.bindBufferAttribute(this.attributeLocations[l],d,y)}this.boundBufferCollection=i}}bindProps(i){}bindTextures(i){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}P(us,"shaderSources");class oC extends us{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}}P(oC,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class rC extends us{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});P(this,"supportsIndexedTextures",!0)}bindTextures(i){const{renderer:l,glw:d}=this;if(i.length>l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);i.forEach((x,s)=>{d.activeTexture(s),d.bindTexture(x.ctxTexture)});const y=Array.from(Array(i.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),y)}}P(rC,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:i=>`
      #define txUnits ${i}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${i}], int idx, vec2 uv) {
        ${Array.from(Array(i).keys()).map(l=>`
          ${l!==0?"else ":""}if (idx == ${l}) {
            return texture2D(textures[${l}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class ei{constructor(r){P(this,"priority",1);P(this,"name","");P(this,"ref");P(this,"target");P(this,"passParameters","");P(this,"declaredUniforms","");P(this,"uniformInfo",{});const{ref:i,target:l,props:d={}}=r;this.ref=i,this.target=l;const y={},x=[];let s="";const m=this.constructor.uniforms||{};for(const C in m){const w=m[C],v=w.type,I=`${i}_${C}`;let O="";w.size&&(O=`[${w.size(d)}]`),x.push(I),s+=`uniform ${v} ${I}${O};`,y[C]={name:I,uniform:m[C].method}}this.passParameters=x.join(","),this.declaredUniforms=s,this.uniformInfo=y}static getEffectKey(r){return""}static getMethodParameters(r,i){const l=[];for(const d in r){const y=r[d];let x="";y.size&&(x=`[${y.size(i)}]`),l.push(`${y.type} ${d}${x}`)}return l.join(",")}static resolveDefaults(r){return{}}static makeEffectKey(r){return!1}}P(ei,"uniforms",{}),P(ei,"methods"),P(ei,"onShaderMask"),P(ei,"onColorize"),P(ei,"onEffectMask");const Q0=new Map,UM=(c,r)=>{const i=JSON.stringify(c);if(Q0.has(i))return Q0.get(i);c=c??[];const l=[],d=c.length;let y=0;for(;y<d;y++){const{name:x,type:s,props:m}=c[y],C={name:x,type:s,props:{}},w=r[s],v=w.resolveDefaults(m),I=w.uniforms,O=Object.keys(I),T=O.length;let L=0;for(;L<T;L++){const j=O[L],U=I[j],V={value:v[j],programValue:void 0,method:U.method,updateOnBind:U.updateOnBind||!1,hasValidator:U.validator!==void 0,hasProgramValueUpdater:U.updateProgramValue!==void 0},z=V.hasValidator&&U.validator(v[j],v)||v[j];v[j]!==z&&(V.validatedValue=z),V.hasProgramValueUpdater&&U.updateProgramValue(V),V.programValue===void 0&&(V.programValue=V.value),C.props[j]=V}l.push(C)}return Q0.set(i,l),l},fr=class fr extends us{constructor(i,l,d){const y=fr.createShader(l,d);super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...y.uniforms],shaderSources:{vertex:y.vertex,fragment:y.fragment}});P(this,"effects",[]);this.effects=y.effects}bindTextures(i){const{glw:l}=this;l.activeTexture(0),l.bindTexture(i[0].ctxTexture)}bindUniformMethods(i){const l=this.glw,d=i.effects,y=d.length;for(let x=0;x<y;x++){const s=this.effects[x].uniformInfo,m=d[x],C=Object.keys(m.props),w=C.length;for(let v=0;v<w;v++){const I=C[v],O=m.props[I].method,T=this.getUniformLocation(s[I].name);if(O==="uniform2fv"||O==="uniform2iv"||O==="uniform3iv"||O==="uniform4fv"||O==="uniform4iv"||O==="uniformMatrix2fv"||O==="uniformMatrix3fv"||O==="uniformMatrix4fv"||O==="uniform1f"||O==="uniform1fv"||O==="uniform1i"||O==="uniform1iv"){m.props[I].setUniformValue=function(){l[O](T,this.programValue)};continue}if(O==="uniform2f"||O==="uniform2i"){m.props[I].setUniformValue=function(){l[O](T,this.programValue[0],this.programValue[1])};continue}if(O==="uniform3f"||O==="uniform3i"){m.props[I].setUniformValue=function(){l[O](T,this.programValue[0],this.programValue[1],this.programValue[2])};continue}if(O==="uniform4f"||O==="uniform4i"){m.props[I].setUniformValue=function(){l[O](T,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])};continue}}}}bindProps(i){var x;const l=i.effects,d=l.length;let y=0;for(;y<d;y++){const s=l[y],m=Object.keys(s.props),C=m.length;let w=0;for(;w<C;w++){const v=m[w],I=s.props[v];if(I.updateOnBind===!0){const O=(x=this.renderer.shManager.getRegisteredEffects()[s.type])==null?void 0:x.uniforms[v];O==null||O.updateProgramValue(s.props[v],i)}I.setUniformValue()}}}canBatchShaderProps(i,l){if(i.$alpha!==l.$alpha||i.$dimensions.width!==l.$dimensions.width||i.$dimensions.height!==l.$dimensions.height||i.effects.length!==l.effects.length)return!1;const d=i.effects.length;let y=0;for(;y<d;y++){const x=i.effects[y],s=l.effects[y];if(x.type!==s.type)return!1;for(const m in x.props)if(s.props&&!s.props[m]||x.props[m].value!==s.props[m].value)return!1}return!0}static createShader(i,l){const d={},y={};let x="";const s=[],m=[],C=i.effects.map(T=>{const L=l[T.type],j=L.getEffectKey(T.props||{});d[j]=d[j]?++d[j]:1;const U=d[j];U===1&&m.push({key:j,type:T.type,props:T.props});const V=new L({ref:`${j}${U===1?"":U}`,target:j,props:T.props});return x+=V.declaredUniforms,s.push(...Object.values(V.uniformInfo)),V});let w="";m==null||m.forEach(T=>{const L=l[T.type],j=L.resolveDefaults(T.props??{}),U=[];for(const le in L.methods){let he=le;const fe=L.methods[le];y[le]&&y[le]!==fe&&(he=fr.resolveMethodDuplicate(le,fe,y)),y[he]=fe.replace("function",he),U.push({m:le,cm:he})}let V=L.onShaderMask instanceof Function?L.onShaderMask(j):L.onShaderMask,z=L.onColorize instanceof Function?L.onColorize(j):L.onColorize,G=L.onEffectMask instanceof Function?L.onEffectMask(j):L.onEffectMask;U.forEach(le=>{const{m:he,cm:fe}=le,k=new RegExp(`\\$${he}`,"g");V&&(V=V.replace(k,fe)),z&&(z=z.replace(k,fe)),G&&(G=G.replace(k,fe))});const Q=L.getMethodParameters(L.uniforms,j),te=Q.length>0?`, ${Q}`:"";V&&(w+=`
        float fx_${T.key}_onShaderMask(float shaderMask ${te}) {
          ${V}
        }
        `),z&&(w+=`
          vec4 fx_${T.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${te}) {
            ${z}
          }
        `),G&&(w+=`
          vec4 fx_${T.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${te}) {
            ${G}
          }
        `)});let v="";for(const T in y)v+=y[T];let I="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",O=`

    `;for(let T=0;T<C.length;T++){const L=C[T],j=L.passParameters.length>0?`, ${L.passParameters}`:"",U=l[L.name];U.onShaderMask&&(O+=`
        shaderMask = fx_${L.target}_onShaderMask(shaderMask ${j});
        `),U.onColorize&&(O+=`
        maskColor = fx_${L.target}_onColorize(shaderMask, maskColor, shaderColor${j});
        `),U.onEffectMask&&(I=`fx_${L.target}_onEffectMask(shaderMask, maskColor, shaderColor${j})`);const V=C[T+1];(V===void 0||l[V.name].onEffectMask)&&(O+=`
          shaderColor = ${I};
        `)}return{effects:C,uniforms:s,fragment:fr.fragment(x,v,w,O),vertex:fr.vertex()}}static resolveMethodDuplicate(i,l,d,y=0){const x=i+(y>0?y:"");return d[x]&&d[x]!==l?this.resolveMethodDuplicate(i,l,d,++y):x}static resolveDefaults(i,l){return it(l),{effects:UM(i.effects??[],l),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(i,l){var y;let d="";return(y=i.effects)==null||y.forEach(x=>{const m=l[x.type].getEffectKey(x.props||{});d+=`,${m}`}),`DynamicShader${d}`}};P(fr,"z$__type__Props"),P(fr,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),P(fr,"fragment",(i,l,d,y)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${i}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${l}

    ${d}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${y}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Ea=fr;class dm extends us{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(r){return{radius:r.radius||10,$dimensions:{width:0,height:0}}}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}bindProps(r){const i=Math.min(r.$dimensions.width,r.$dimensions.height)/(2*r.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),r.radius*Math.min(i,1))}canBatchShaderProps(r,i){return r.radius===i.radius&&r.$dimensions.width===i.$dimensions.width&&r.$dimensions.height===i.$dimensions.height}}P(dm,"z$__type__Props"),P(dm,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const BM=new Float32Array([1,0,0,0,1,0,0,0,1]),hl=class hl extends us{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}bindProps(r){const i=hl.resolveDefaults(r);for(const l in i)if(l==="transform")this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),i[l]);else if(l==="scrollY")this.glw.uniform1f(this.getUniformLocation("u_scrollY"),i[l]);else if(l==="color"){const d=xl(i.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),d)}else l==="size"?this.glw.uniform1f(this.getUniformLocation("u_size"),i[l]):l==="distanceRange"?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),i[l]):l==="debug"&&this.glw.uniform1i(this.getUniformLocation("u_debug"),i[l]?1:0)}static resolveDefaults(r={}){return{transform:r.transform??BM,scrollY:r.scrollY??0,color:r.color??4294967295,size:r.size??16,distanceRange:r.distanceRange??1,debug:r.debug??!1}}};P(hl,"z$__type__Props"),P(hl,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let pm=hl;const Pa=c=>{c.programValue===void 0&&(c.programValue=new Float32Array(4));const r=c.value,i=c.programValue;i[0]=(r>>>24)/255,i[1]=(r>>>16&255)/255,i[2]=(r>>>8&255)/255,i[3]=(r&255)/255},jM=c=>{const r=c.validatedValue||c.value;if(c.programValue instanceof Float32Array){const i=c.programValue;i[0]=r[0],i[1]=r[1]}else c.programValue=new Float32Array(r)},FM=c=>{const r=c.validatedValue||c.value;if(c.programValue instanceof Float32Array){const i=c.programValue;i[0]=r[0],i[1]=r[1],i[2]=r[1],i[3]=r[1]}else c.programValue=new Float32Array(r)},sC=c=>{const r=c.validatedValue||c.value;if(c.programValue instanceof Float32Array){const i=r.length,l=c.programValue;for(let d=0;d<i;d++)l[d]=r[d]}else c.programValue=new Float32Array(r)},Im=c=>{const r=Array.isArray(c);if(r){if(r&&c.length===4)return c;if(r&&c.length===2)return[c[0],c[1],c[0],c[1]];if(r&&c.length===3)return[c[0],c[1],c[2],c[0]]}else return[c,c,c,c];return[c[0],c[0],c[0],c[0]]},aC=(c,r)=>{c.programValue===void 0&&(c.programValue=new Float32Array(4));const i=c.programValue,l=c.validatedValue||c.value;if(r===void 0&&c.$dimensions===void 0){i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3];return}let d=c.$dimensions;if(r!==void 0){const{$dimensions:I}=r;if(d!==void 0&&(d.width===I.width||d.height===I.height))return;d===void 0&&(d={width:I==null?void 0:I.width,height:I==null?void 0:I.height},c.$dimensions=d)}const{width:y,height:x}=d,[s,m,C,w]=l,v=Math.min(Math.min(Math.min(y/Math.max(y,s+m),y/Math.max(y,C+w)),Math.min(x/Math.max(x,s+C),x/Math.max(x,m+w))),1);i[0]=s*v,i[1]=m*v,i[2]=C*v,i[3]=w*v};class ma extends ei{constructor(){super(...arguments);P(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(i){return{radius:i.radius??10}}}P(ma,"z$__type__Props"),P(ma,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Im,updateProgramValue:aC}}),P(ma,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),P(ma,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),P(ma,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class il extends ei{constructor(){super(...arguments);P(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(il,"z$__type__Props"),P(il,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Pa,method:"uniform4fv",type:"vec4"}}),P(il,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),P(il,"onColorize",`
    return color;
  `);const Rr=class Rr extends ei{constructor(){super(...arguments);P(this,"name","linearGradient")}static getEffectKey(i){return i.colors.value?`linearGradient${i.colors.value.length}`:`linearGradient${i.colors.length}`}static resolveDefaults(i){const l=i.colors??[4278190080,4294967295];let d=i.stops||[];if(d.length===0||d.length!==l.length){const y=l.length;let x=0;const s=d;for(;x<y;x++)d[x]?(s[x]=d[x],d[x-1]===void 0&&s[x-2]!==void 0&&(s[x-1]=s[x-2]+(d[x]-s[x-2])/2)):s[x]=x*(1/(l.length-1));d=s}return{colors:l,stops:d,angle:i.angle??0}}};P(Rr,"z$__type__Props"),P(Rr,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:i=>i.reduce((l,d)=>l.concat(xl(d)),[]),updateProgramValue:sC,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),P(Rr,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),P(Rr,"ColorLoop",i=>{let l="";for(let d=2;d<i;d++)l+=`colorOut = mix(colorOut, colors[${d}], clamp((dist - stops[${d-1}]) / (stops[${d}] - stops[${d-1}]), 0.0, 1.0));`;return l}),P(Rr,"onColorize",i=>{const l=i.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${Rr.ColorLoop(l)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let mm=Rr;class gm extends ei{constructor(){super(...arguments);P(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(i){return{amount:i.amount??1}}}P(gm,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),P(gm,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class ga extends ei{constructor(){super(...arguments);P(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(ga,"z$__type__Props"),P(ga,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Pa,method:"uniform4fv",type:"vec4"}}),P(ga,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(ga,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(ga,"onColorize",`
    return color;
  `);class ya extends ei{constructor(){super(...arguments);P(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(ya,"z$__type__Props"),P(ya,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Pa,method:"uniform4fv",type:"vec4"}}),P(ya,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(ya,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(ya,"onColorize",`
    return color;
  `);class va extends ei{constructor(){super(...arguments);P(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(va,"z$__type__Props"),P(va,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Pa,method:"uniform4fv",type:"vec4"}}),P(va,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(va,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(va,"onColorize",`
    return color;
  `);class xa extends ei{constructor(){super(...arguments);P(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(xa,"z$__type__Props"),P(xa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Pa,method:"uniform4fv",type:"vec4"}}),P(xa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(xa,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(xa,"onColorize",`
    return color;
  `);class ol extends ei{constructor(){super(...arguments);P(this,"name","glitch")}static getEffectKey(i){return"glitch"}static resolveDefaults(i){return{amplitude:i.amplitude??.2,narrowness:i.narrowness??4,blockiness:i.blockiness??2,minimizer:i.minimizer??8,time:i.time??Date.now()}}}P(ol,"z$__type__Props"),P(ol,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:i=>{const l=i.value=(Date.now()-i.value)%1e3;i.programValue=l},type:"float"}}),P(ol,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),P(ol,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class hh extends ei{constructor(){super(...arguments);P(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(i){return{fade:i.fade??10}}}P(hh,"z$__type__Props"),P(hh,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:Im,updateProgramValue:FM}}),P(hh,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const rs=class rs extends ei{constructor(){super(...arguments);P(this,"name","radialGradient")}static getEffectKey(i){return i.colors.value?`radialGradient${i.colors.value.length}`:`radialGradient${i.colors.length}`}static resolveDefaults(i){const l=i.colors??[4278190080,4294967295];let d=i.stops||[];if(d.length===0||d.length!==l.length){const y=l.length;let x=0;const s=d;for(;x<y;x++)d[x]?(s[x]=d[x],d[x-1]===void 0&&s[x-2]!==void 0&&(s[x-1]=s[x-2]+(d[x]-s[x-2])/2)):s[x]=x*(1/(l.length-1));d=s}return{colors:l,stops:d,width:i.width??0,height:i.height??i.width??0,pivot:i.pivot??[.5,.5]}}};P(rs,"z$__type__Props"),P(rs,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:jM,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:i=>i.reduce((l,d)=>l.concat(xl(d)),[]),updateProgramValue:sC,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),P(rs,"ColorLoop",i=>{let l="";for(let d=2;d<i;d++)l+=`colorOut = mix(colorOut, colors[${d}], clamp((dist - stops[${d-1}]) / (stops[${d}] - stops[${d-1}]), 0.0, 1.0));`;return l}),P(rs,"onColorize",i=>{const l=i.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${rs.ColorLoop(l)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let ym=rs;class wa extends ei{constructor(){super(...arguments);P(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(i){return{width:i.width??10,progress:i.progress??.5,offset:i.offset??0,range:i.range??Math.PI*2,rounded:i.rounded??!1,radius:i.radius??1,color:i.color??4294967295}}}P(wa,"z$__type__Props"),P(wa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:i=>i?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Pa,method:"uniform4fv",type:"vec4"}}),P(wa,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),P(wa,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),P(wa,"onColorize",`
    return color;
  `);class Sa extends ei{constructor(){super(...arguments);P(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(i){return{x:i.x||0,y:i.y||0,width:i.width||50,height:i.height||50,radius:i.radius??0}}}P(Sa,"z$__type__Props"),P(Sa,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Im,updateProgramValue:aC}}),P(Sa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),P(Sa,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),P(Sa,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const $M="RoundedRectangle";class Mh extends iC{constructor(i){super();P(this,"shType");this.shType=i}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class zM{constructor(r,i,l,d){P(this,"type");P(this,"shader");P(this,"resolvedProps");P(this,"props");this.type=r,this.shader=i,this.resolvedProps=l;const y=Object.keys(l),x=y.length,s={};for(let m=0;m<x;m++){const C=y[m];Object.defineProperty(s,C,{get:()=>this.resolvedProps[C],set:w=>{this.resolvedProps[C]=w,d.requestRender()}})}this.props=s}getResolvedProps(){return this.resolvedProps}}class VM{constructor(r,i,l){P(this,"shader");P(this,"resolvedProps");P(this,"props");P(this,"type");this.shader=r,this.type="DynamicShader",this.resolvedProps=i;const d=l.getRegisteredEffects(),y={},x=i.effects,s=x.length;for(let m=0;m<s;m++){const{name:C,props:w,type:v}=x[m];if(C===void 0)continue;const I={},O=Object.keys(w),T=O.length;for(let L=0;L<T;L++){const j=O[L];Object.defineProperty(I,j,{get:()=>this.resolvedProps.effects[m].props[j].value,set:U=>{var z,G;const V=this.resolvedProps.effects[m].props[j];V.value=U,V.hasValidator&&(U=V.validatedValue=(z=d[v].uniforms[j])==null?void 0:z.validator(U,w)),V.hasProgramValueUpdater?(G=d[v].uniforms[j])==null||G.updateProgramValue(V):V.programValue=U,l.renderer.stage.requestRender()}})}Object.defineProperty(y,C,{get:()=>I})}this.props=y}getResolvedProps(){return this.resolvedProps}}class HM{constructor(){P(this,"shCache",new Map);P(this,"shConstructors",{});P(this,"attachedShader",null);P(this,"effectConstructors",{});P(this,"renderer");this.registerShaderType("DefaultShader",oC),this.registerShaderType("DefaultShaderBatched",rC),this.registerShaderType("RoundedRectangle",dm),this.registerShaderType("DynamicShader",Ea),this.registerShaderType("SdfShader",pm),this.registerEffectType("border",il),this.registerEffectType("borderBottom",va),this.registerEffectType("borderLeft",xa),this.registerEffectType("borderRight",ga),this.registerEffectType("borderTop",ya),this.registerEffectType("fadeOut",hh),this.registerEffectType("linearGradient",mm),this.registerEffectType("radialGradient",ym),this.registerEffectType("grayscale",gm),this.registerEffectType("glitch",ol),this.registerEffectType("radius",ma),this.registerEffectType("radialProgress",wa),this.registerEffectType("holePunch",Sa)}registerShaderType(r,i){this.shConstructors[r]=i}registerEffectType(r,i){this.effectConstructors[r]=i}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(r,i){if(!this.renderer)throw new Error("Renderer is not been defined");const l=this.shConstructors[r];if(!l)throw new Error(`Shader type "${r}" is not registered`);if(this.renderer.mode==="canvas"&&l.prototype instanceof us)return this._createShaderCtr(r,new Mh(r),i);if(r==="DynamicShader")return this.loadDynamicShader(i);const d=l.resolveDefaults(i),y=l.makeCacheKey(d)||l.name;if(y&&this.shCache.has(y))return this._createShaderCtr(r,this.shCache.get(y),d);const x=new l(this.renderer,i);return y&&this.shCache.set(y,x),this._createShaderCtr(r,x,d)}loadDynamicShader(r){if(!this.renderer)throw new Error("Renderer is not been defined");const i=Ea.resolveDefaults(r,this.effectConstructors),l=Ea.makeCacheKey(i,this.effectConstructors);if(l&&this.shCache.has(l))return this._createDynShaderCtr(this.shCache.get(l),i);const d=new Ea(this.renderer,r,this.effectConstructors);return l&&this.shCache.set(l,d),this._createDynShaderCtr(d,i)}_createShaderCtr(r,i,l){return new zM(r,i,l,this.renderer.stage)}_createDynShaderCtr(r,i){return r.bindUniformMethods(i),new VM(r,i,this)}useShader(r){this.attachedShader!==r&&(this.attachedShader&&this.attachedShader.detach(),r.attach(),this.attachedShader=r)}}const GM={x:(c,r)=>{c.props.x=r},y:(c,r)=>{c.props.y=r},width:(c,r)=>{c.props.width=r},height:(c,r)=>{c.props.height=r},color:(c,r)=>{c.props.color=r},zIndex:(c,r)=>{c.props.zIndex=r},fontFamily:(c,r)=>{c.props.fontFamily=r},fontWeight:(c,r)=>{c.props.fontWeight=r},fontStyle:(c,r)=>{c.props.fontStyle=r},fontStretch:(c,r)=>{c.props.fontStretch=r},fontSize:(c,r)=>{c.props.fontSize=r},text:(c,r)=>{c.props.text=r},textAlign:(c,r)=>{c.props.textAlign=r},contain:(c,r)=>{c.props.contain=r},offsetY:(c,r)=>{c.props.offsetY=r},scrollable:(c,r)=>{c.props.scrollable=r},scrollY:(c,r)=>{c.props.scrollY=r},letterSpacing:(c,r)=>{c.props.letterSpacing=r},lineHeight:(c,r)=>{c.props.lineHeight=r},maxLines:(c,r)=>{c.props.maxLines=r},textBaseline:(c,r)=>{c.props.textBaseline=r},verticalAlign:(c,r)=>{c.props.verticalAlign=r},overflowSuffix:(c,r)=>{c.props.overflowSuffix=r},debug:(c,r)=>{c.props.debug=r}};class Mm{constructor(r){P(this,"stage");P(this,"set");this.stage=r;const i={...GM,...this.getPropertySetters()},l={};Object.keys(i).forEach(d=>{Object.defineProperty(l,d,{value:(y,x)=>{y.props[d]!==x&&(i[d](y,x),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=l}setStatus(r,i,l){r.status!==i&&(r.status=i,r.emitter.emit(i,l))}setIsRenderable(r,i){r.isRenderable=i}destroyState(r){this.setStatus(r,"destroyed"),r.emitter.removeAllListeners()}scheduleUpdateState(r){r.updateScheduled||(r.updateScheduled=!0,queueMicrotask(()=>{r.status!=="destroyed"&&(r.updateScheduled=!1,this.updateState(r))}))}}class XM{constructor(){P(this,"data",{})}reset(){this.data={}}increment(r){this.data[r]||(this.data[r]=0),this.data[r]++}getData(){return{...this.data}}}class WM{constructor(r,i){P(this,"stage");P(this,"memUsed",0);P(this,"loadedTextures",new Map);P(this,"orphanedTextures",[]);P(this,"criticalThreshold");P(this,"targetThreshold");P(this,"cleanupInterval");P(this,"debugLogging");P(this,"lastCleanupTime",0);P(this,"criticalCleanupRequested",!1);P(this,"frameTime",0);this.stage=r;const{criticalThreshold:l}=i;this.criticalThreshold=Math.round(l);const d=Math.max(0,Math.min(1,i.targetThresholdLevel));if(this.targetThreshold=Math.round(l*d),this.cleanupInterval=i.cleanupInterval,this.debugLogging=i.debugLogging,this.memUsed=Math.round(i.baselineMemoryAllocation),i.debugLogging){let y=0;setInterval(()=>{y!==this.memUsed&&(y=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${pS(this.memUsed)} mb / ${pS(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}l===0&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(r){this.orphanedTextures.includes(r)&&this.removeFromOrphanedTextures(r),r.preventCleanup===!1&&this.orphanedTextures.push(r)}removeFromOrphanedTextures(r){const i=this.orphanedTextures.indexOf(r);i!==-1&&this.orphanedTextures.splice(i,1)}setTextureMemUse(r,i){if(this.loadedTextures.has(r)&&(this.memUsed-=this.loadedTextures.get(r)),i===0){this.loadedTextures.delete(r);return}else this.memUsed+=i,this.loadedTextures.set(r,i);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){const r=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,r===!0&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${r}`);const i=this.targetThreshold,l=this.stage.txManager,d=ss();for(;this.memUsed>=i&&this.orphanedTextures.length>0&&(r||ss()-d<10);){const y=this.orphanedTextures.shift();y.renderable!==!0&&(y.free(),l.removeTextureFromCache(y))}this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),(this.debugLogging===!0||La()===!1)&&console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`))}getMemoryInfo(){let r=0;const i=[...this.loadedTextures.keys()].reduce((l,d)=>(r+=d.renderable?1:0,l+(d.renderable?this.loadedTextures.get(d):0)),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:i,memUsed:this.memUsed,renderableTexturesLoaded:r,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.memUsed-i}}}class uC{constructor(r,i){P(this,"textureSource");P(this,"memManager");P(this,"state","freed");this.memManager=r,this.textureSource=i}setTextureMemUse(r){this.memManager.setTextureMemUse(this.textureSource,r)}get renderable(){return this.textureSource.renderable}}class lC{constructor(r){P(this,"options");P(this,"mode");P(this,"stage");P(this,"txManager");P(this,"txMemManager");P(this,"shManager");P(this,"rttNodes",[]);this.options=r,this.stage=r.stage,this.txManager=r.txManager,this.txMemManager=r.txMemManager,this.shManager=r.shManager}}class YM extends cm{constructor(i,l,d){super(i,l);P(this,"textRenderer");P(this,"trState");P(this,"_textRendererOverride",null);P(this,"onTextLoaded",()=>{const{contain:i}=this,l=this.trState.props.width,d=this.trState.props.height,y=this.trState.textW||0,x=this.trState.textH||0;i==="both"?(this.props.width=l,this.props.height=d):i==="width"?(this.props.width=l,this.props.height=x):i==="none"&&(this.props.width=y,this.props.height=x),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});P(this,"onTextFailed",(i,l)=>{this.emit("failed",{type:"text",error:l})});this._textRendererOverride=l.textRendererOverride,this.textRenderer=d;const y=this.createState({x:this.absX,y:this.absY,width:l.width,height:l.height,textAlign:l.textAlign,color:l.color,zIndex:l.zIndex,contain:l.contain,scrollable:l.scrollable,scrollY:l.scrollY,offsetY:l.offsetY,letterSpacing:l.letterSpacing,debug:l.debug,fontFamily:l.fontFamily,fontSize:l.fontSize,fontStretch:l.fontStretch,fontStyle:l.fontStyle,fontWeight:l.fontWeight,text:l.text,lineHeight:l.lineHeight,maxLines:l.maxLines,textBaseline:l.textBaseline,verticalAlign:l.verticalAlign,overflowSuffix:l.overflowSuffix});this.trState=y}get width(){return this.props.width}set width(i){this.props.width=i,this.textRenderer.set.width(this.trState,i),this.contain==="none"&&this.setUpdateType(De.Local)}get height(){return this.props.height}set height(i){this.props.height=i,this.textRenderer.set.height(this.trState,i),this.contain!=="both"&&this.setUpdateType(De.Local)}get color(){return this.trState.props.color}set color(i){this.textRenderer.set.color(this.trState,i)}get text(){return this.trState.props.text}set text(i){this.textRenderer.set.text(this.trState,i)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(i){this._textRendererOverride=i,this.textRenderer.destroyState(this.trState);const l=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!l){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=l,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(i){this.textRenderer.set.fontSize(this.trState,i)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(i){this.textRenderer.set.fontFamily(this.trState,i)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(i){this.textRenderer.set.fontStretch(this.trState,i)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(i){this.textRenderer.set.fontStyle(this.trState,i)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(i){this.textRenderer.set.fontWeight(this.trState,i)}get textAlign(){return this.trState.props.textAlign}set textAlign(i){this.textRenderer.set.textAlign(this.trState,i)}get contain(){return this.trState.props.contain}set contain(i){this.textRenderer.set.contain(this.trState,i)}get scrollable(){return this.trState.props.scrollable}set scrollable(i){this.textRenderer.set.scrollable(this.trState,i)}get scrollY(){return this.trState.props.scrollY}set scrollY(i){this.textRenderer.set.scrollY(this.trState,i)}get offsetY(){return this.trState.props.offsetY}set offsetY(i){this.textRenderer.set.offsetY(this.trState,i)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(i){this.textRenderer.set.letterSpacing(this.trState,i)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(i){this.textRenderer.set.lineHeight(this.trState,i)}get maxLines(){return this.trState.props.maxLines}set maxLines(i){this.textRenderer.set.maxLines(this.trState,i)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(i){this.textRenderer.set.textBaseline(this.trState,i)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(i){this.textRenderer.set.verticalAlign(this.trState,i)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(i){this.textRenderer.set.overflowSuffix(this.trState,i)}get debug(){return this.trState.props.debug}set debug(i){this.textRenderer.set.debug(this.trState,i)}update(i,l){super.update(i,l),it(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return this.worldAlpha===0||this.isOutOfBounds()===!0?!1:!!(this.trState&&this.trState.props.text!=="")}setRenderable(i){super.setRenderable(i),this.textRenderer.setIsRenderable(this.trState,i)}renderQuads(i){var l;if(it(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(i);return}this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(this.parentHasRenderTexture&&((l=this.props.parent)!=null&&l.rtt)&&(this.globalTransform=_i.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),it(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(i){const l=this.textRenderer.createState(i,this);return l.emitter.on("loaded",this.onTextLoaded),l.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(l),l}}function qM(c){const r={boolean:!0,string:!0,number:!0,undefined:!0},i=Object.keys(c);for(let l=0;l<i.length;l++){const d=i[l];if(!d)continue;const y=c[d],x=typeof y;x==="string"&&y.length>2048&&(console.warn(`Custom Data value for ${d} is too long, it will be truncated to 2048 characters`),c[d]=y.substring(0,2048)),r[x]||(console.warn(`Custom Data value for ${d} is not a boolean, string, or number, it will be ignored`),delete c[d])}return c}const KM=2e6;class QM{constructor(r){P(this,"options");P(this,"animationManager");P(this,"txManager");P(this,"txMemManager");P(this,"fontManager");P(this,"textRenderers");P(this,"shManager");P(this,"renderer");P(this,"root");P(this,"boundsMargin");P(this,"defShaderCtr");P(this,"strictBound");P(this,"preloadBound");P(this,"strictBounds");P(this,"defaultTexture",null);P(this,"eventBus");P(this,"deltaTime",0);P(this,"lastFrameTime",0);P(this,"currentFrameTime",0);P(this,"fpsNumFrames",0);P(this,"fpsElapsedTime",0);P(this,"renderRequested",!1);P(this,"frameEventQueue",[]);P(this,"fontResolveMap",{});P(this,"contextSpy",null);this.options=r;const{canvas:i,clearColor:l,appWidth:d,appHeight:y,boundsMargin:x,enableContextSpy:s,forceWebGL2:m,numImageWorkers:C,textureMemory:w,renderEngine:v,fontEngines:I}=r;this.eventBus=r.eventBus,this.txManager=new LM(this,C),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new WM(this,w),this.shManager=new HM,this.animationManager=new bM,this.contextSpy=s?new XM:null,this.strictBounds=r.strictBounds;let O=[0,0,0,0];x&&(O=Array.isArray(x)?x:[x,x,x,x]),this.boundsMargin=O,this.strictBound=Ta(0,0,d,y),this.preloadBound=fm(this.strictBound,O);const T={stage:this,canvas:i,pixelRatio:r.devicePhysicalPixelRatio*r.deviceLogicalPixelRatio,clearColor:l??4278190080,bufferMemory:KM,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:m};this.renderer=new v(T);const L=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),lM(L),this.txManager.renderer=this.renderer,this.textRenderers={},I.forEach(U=>{const V=new U(this),z=V.type;if(z==="sdf"&&L==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}V instanceof Mm&&(z==="canvas"?this.textRenderers.canvas=V:z==="sdf"&&(this.textRenderers.sdf=V))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new OM(this.textRenderers);const j=new cm(this,{x:0,y:0,width:d,height:y,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=j,EM(this)}setClearColor(r){this.renderer.updateClearColor(r),this.renderRequested=!0}updateFrameTime(){const r=ss();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=r,this.deltaTime=this.lastFrameTime?r-this.lastFrameTime:100/6,this.txManager.frameTime=r,this.txMemManager.frameTime=r,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),it(this.defaultTexture instanceof Sh),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:r}=this;this.root&&r.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:r,renderRequested:i}=this;it(r),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit),r.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),r.rttNodes.length>0&&r.renderRTTNodes(),this.addQuads(this.root),r==null||r.render(),this.calculateFps(),i&&(this.renderRequested=!1)}queueFrameEvent(r,i){this.frameEventQueue.push([r,i])}flushFrameEvents(){for(const[r,i]of this.frameEventQueue)this.eventBus.emit(r,i);this.frameEventQueue=[]}calculateFps(){var i,l;const{fpsUpdateInterval:r}=this.options;if(r&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=r)){const d=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:d,contextSpyData:((i=this.contextSpy)==null?void 0:i.getData())??null}),(l=this.contextSpy)==null||l.reset()}}addQuads(r){it(this.renderer),r.isRenderable===!0&&r.renderQuads(this.renderer);for(let i=0;i<r.children.length;i++){const l=r.children[i];l!==void 0&&(l.worldAlpha===0||l.strictBounds===!0&&l.renderState===ui.OutOfBounds||this.addQuads(l))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(r,i=null){const l=`${r.fontFamily}${r.fontStyle}${r.fontWeight}${r.fontStretch}${i||""}`;if(this.fontResolveMap[l]!==void 0)return this.fontResolveMap[l];let d=i,y=!1;if(d){const s=this.textRenderers[d];s?s.canRenderFont(r)||(console.warn(`Cannot use override text renderer '${d}' for font`,r),d=null,y=!0):(console.warn(`Text renderer override '${d}' not found.`),d=null,y=!0)}if(!d){for(const[s,m]of Object.entries(this.textRenderers))if(m.canRenderFont(r)){d=s;break}!d&&this.textRenderers.canvas!==void 0&&(d="canvas")}if(y&&console.warn(`Falling back to text renderer ${String(d)}`),!d)return null;const x=this.textRenderers[d];return it(x,"resolvedTextRenderer undefined"),this.fontResolveMap[l]=x,x}createShaderCtr(r,i){return this.shManager.loadShader(r,i)}createNode(r){const i=this.resolveNodeDefaults(r);return new cm(this,i)}createTextNode(r){const i=r.fontSize??16,l={...this.resolveNodeDefaults(r),text:r.text??"",textRendererOverride:r.textRendererOverride??null,fontSize:i,fontFamily:r.fontFamily??"sans-serif",fontStyle:r.fontStyle??"normal",fontWeight:r.fontWeight??"normal",fontStretch:r.fontStretch??"normal",textAlign:r.textAlign??"left",contain:r.contain??"none",scrollable:r.scrollable??!1,scrollY:r.scrollY??0,offsetY:r.offsetY??0,letterSpacing:r.letterSpacing??0,lineHeight:r.lineHeight,maxLines:r.maxLines??0,textBaseline:r.textBaseline??"alphabetic",verticalAlign:r.verticalAlign??"middle",overflowSuffix:r.overflowSuffix??"...",debug:r.debug??{},shaderProps:null},d=this.resolveTextRenderer(l,r.textRendererOverride);if(!d)throw new Error(`No compatible text renderer found for ${l.fontFamily}`);return new YM(this,l,d)}resolveNodeDefaults(r){const i=r.color??4294967295,l=r.colorTl??r.colorTop??r.colorLeft??i,d=r.colorTr??r.colorTop??r.colorRight??i,y=r.colorBl??r.colorBottom??r.colorLeft??i,x=r.colorBr??r.colorBottom??r.colorRight??i;let s={};return this.options.inspector===!0&&(s=qM(r.data??{})),{x:r.x??0,y:r.y??0,width:r.width??0,height:r.height??0,alpha:r.alpha??1,autosize:r.autosize??!1,clipping:r.clipping??!1,color:i,colorTop:r.colorTop??i,colorBottom:r.colorBottom??i,colorLeft:r.colorLeft??i,colorRight:r.colorRight??i,colorBl:y,colorBr:x,colorTl:l,colorTr:d,zIndex:r.zIndex??0,zIndexLocked:r.zIndexLocked??0,parent:r.parent??null,texture:r.texture??null,textureOptions:r.textureOptions??{},shader:r.shader??this.defShaderCtr,src:r.src??null,srcHeight:r.srcHeight,srcWidth:r.srcWidth,srcX:r.srcX,srcY:r.srcY,scale:r.scale??null,scaleX:r.scaleX??r.scale??1,scaleY:r.scaleY??r.scale??1,mount:r.mount??0,mountX:r.mountX??r.mount??0,mountY:r.mountY??r.mount??0,pivot:r.pivot??.5,pivotX:r.pivotX??r.pivot??.5,pivotY:r.pivotY??r.pivot??.5,rotation:r.rotation??0,rtt:r.rtt??!1,data:s,preventCleanup:r.preventCleanup??!1,imageType:r.imageType,strictBounds:r.strictBounds??this.strictBounds}}}class ZM extends cr{constructor(i,l){var L,j,U,V,z;super();P(this,"root");P(this,"canvas");P(this,"settings");P(this,"stage");P(this,"inspector",null);const d={criticalThreshold:((L=i.textureMemory)==null?void 0:L.criticalThreshold)||124e6,targetThresholdLevel:((j=i.textureMemory)==null?void 0:j.targetThresholdLevel)||.5,cleanupInterval:((U=i.textureMemory)==null?void 0:U.cleanupInterval)||3e4,debugLogging:((V=i.textureMemory)==null?void 0:V.debugLogging)||!1,baselineMemoryAllocation:((z=i.textureMemory)==null?void 0:z.baselineMemoryAllocation)||26e6},y={appWidth:i.appWidth||1920,appHeight:i.appHeight||1080,textureMemory:d,boundsMargin:i.boundsMargin||0,deviceLogicalPixelRatio:i.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:i.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:i.clearColor??0,fpsUpdateInterval:i.fpsUpdateInterval||0,numImageWorkers:i.numImageWorkers!==void 0?i.numImageWorkers:2,enableContextSpy:i.enableContextSpy??!1,forceWebGL2:i.forceWebGL2??!1,inspector:i.inspector??!1,renderEngine:i.renderEngine,quadBufferSize:i.quadBufferSize??4*1024*1024,fontEngines:i.fontEngines,strictBounds:i.strictBounds??!0,textureProcessingTimeLimit:i.textureProcessingTimeLimit||10,canvas:i.canvas||document.createElement("canvas")};this.settings=y;const{appWidth:x,appHeight:s,deviceLogicalPixelRatio:m,devicePhysicalPixelRatio:C,inspector:w,canvas:v}=y,I=x*m,O=s*m;this.canvas=v,v.width=I*C,v.height=O*C,v.style.width=`${I}px`,v.style.height=`${O}px`,this.stage=new QM({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:d,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:this.settings.inspector!==null,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit}),this.root=this.stage.root;let T;if(typeof l=="string"?T=document.getElementById(l):T=l,!T)throw new Error("Could not find target element");T.appendChild(v),w&&!La()&&(this.inspector=new w(v,y))}createNode(i){const l=this.stage.createNode(i);return this.inspector?this.inspector.createNode(l):l}createTextNode(i){const l=this.stage.createTextNode(i);return this.inspector?this.inspector.createTextNode(l):l}destroyNode(i){return this.inspector&&this.inspector.destroyNode(i.id),i.destroy()}createTexture(i,l){return this.stage.txManager.createTexture(i,l)}createShader(i,l){return this.stage.shManager.loadShader(i,l)}createDynamicShader(i){return this.stage.shManager.loadDynamicShader({effects:i})}createEffect(i,l,d){return{name:d,type:i,props:l}}getNodeById(i){var y;const l=(y=this.stage)==null?void 0:y.root;if(!l)return null;const d=x=>{if(x.id===i)return x;for(const s of x.children){const m=d(s);if(m)return m}return null};return d(l)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}setClearColor(i){this.stage.setClearColor(i)}}class fC extends cr{constructor(i){super();P(this,"fontFamily");P(this,"descriptors");P(this,"loaded",!1);P(this,"metrics",null);const{fontFamily:l,descriptors:d,metrics:y}=i;y&&(this.metrics={ascender:y.ascender/y.unitsPerEm,descender:y.descender/y.unitsPerEm,lineGap:y.lineGap/y.unitsPerEm}),this.fontFamily=l,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...d}}static convertToCssFontFaceDescriptors(i){return{style:i.style,weight:typeof i.weight=="number"?`${i.weight}`:i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,featureSettings:i.featureSettings,display:i.display}}}class dh extends fC{constructor(i){super(i);P(this,"fontFace");P(this,"fontUrl");const{fontFamily:l,fontUrl:d}=i,y=d.replace(/\(|\)/g,""),x=this.descriptors;let s={style:x.style,weight:typeof x.weight=="number"?`${x.weight}`:x.weight,stretch:x.stretch,unicodeRange:x.unicodeRange,featureSettings:x.featureSettings,display:x.display};for(const C in s){const w=C;s[w]===void 0&&delete s[w]}const m=new FontFace(l,`url(${y})`,s);y.length>0?m.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=m,this.fontUrl=d}}class JM{}class cC extends JM{constructor(i,l,d,y,x,s,m,C,w,v,I,O,T){super();P(this,"glw");P(this,"options");P(this,"buffers");P(this,"shader");P(this,"shaderProps");P(this,"alpha");P(this,"clippingRect");P(this,"dimensions");P(this,"bufferIdx");P(this,"zIndex");P(this,"renderToTexture");P(this,"parentHasRenderTexture");P(this,"framebufferDimensions");P(this,"length",0);P(this,"numQuads",0);P(this,"textures",[]);P(this,"maxTextures");this.glw=i,this.options=l,this.buffers=d,this.shader=y,this.shaderProps=x,this.alpha=s,this.clippingRect=m,this.dimensions=C,this.bufferIdx=w,this.zIndex=v,this.renderToTexture=I,this.parentHasRenderTexture=O,this.framebufferDimensions=T,this.maxTextures=y.supportsIndexedTextures?i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(i){const{textures:l,maxTextures:d}=this;let y=-1;const x=l.length;for(let s=0;s<x;s++)if(l[s]===i){y=s;break}return y!==-1?y:x>=d?4294967295:(this.textures.push(i),x)}draw(){const{glw:i,shader:l,shaderProps:d,options:y}=this,{shManager:x}=y;x.useShader(l),l.bindRenderOp(this,d);const s=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:m,y:C,width:w,height:v}=this.clippingRect,I=this.parentHasRenderTexture?1:y.pixelRatio,O=y.canvas.height,T=Math.round(m*I),L=Math.round(w*I),j=Math.round(v*I);let U=Math.round(O-j-C*I);this.parentHasRenderTexture&&(U=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),i.setScissorTest(!0),i.scissor(T,U,L,j)}else i.setScissorTest(!1);i.drawElements(i.TRIANGLES,6*this.numQuads,i.UNSIGNED_SHORT,s)}}function eR(c){const r={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(r).forEach(l=>{r[l]=c.getParameter(c[l])}),r}function tR(c){const r={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(r).forEach(l=>{r[l]=c.getExtension(l)}),r}function nR(c,r){const i=~~(r/80),l=new Uint16Array(i*6);for(let y=0,x=0;y<i;y+=6,x+=4)l[y]=x,l[y+1]=x+1,l[y+2]=x+2,l[y+3]=x+2,l[y+4]=x+1,l[y+5]=x+3;const d=c.createBuffer();c.elementArrayBufferData(d,l,c.STATIC_DRAW)}function iR(c){return c!==null&&(typeof c=="object"&&c.constructor&&c.constructor.name==="HTMLImageElement"||typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement)}const Z0=new Uint8Array([0,0,0,0]);class Th extends uC{constructor(i,l,d){super(l,d);P(this,"glw");P(this,"_nativeCtxTexture",null);P(this,"_w",0);P(this,"_h",0);this.glw=i}get ctxTexture(){return this.state==="freed"?(this.load(),null):(it(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}load(){if(!(this.state==="loading"||this.state==="loaded")){if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this._nativeCtxTexture===null){this.state="failed",this.textureSource.setState("failed",new Error("Could not create WebGL Texture")),console.error("Could not create WebGL Texture");return}this.onLoadRequest().then(({width:i,height:l})=>{this.state!=="freed"&&(this.state="loaded",this._w=i,this._h=l,this.textureSource.setState("loaded",{width:i,height:l}))}).catch(i=>{this.state!=="freed"&&(this.state="failed",this.textureSource.setState("failed",i),console.error(i))})}}async onLoadRequest(){const{glw:i}=this,l=this.textureSource.textureData;if(it(l,"Texture data is null"),i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(Z0.byteLength),!this._nativeCtxTexture)return it(this.state==="freed"),{width:0,height:0};let d=0,y=0;i.activeTexture(0);const x=l.data,s=i.RGBA,m=4,C=1.1;if(typeof ImageBitmap<"u"&&x instanceof ImageBitmap||x instanceof ImageData||iR(x))d=x.width,y=x.height,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!l.premultiplyAlpha),i.texImage2D(0,s,s,i.UNSIGNED_BYTE,x),this.setTextureMemUse(y*d*m*C);else if(x===null)d=0,y=0,i.bindTexture(this._nativeCtxTexture),i.texImage2D(0,s,1,1,0,s,i.UNSIGNED_BYTE,Z0),this.setTextureMemUse(Z0.byteLength);else if("mipmaps"in x&&x.mipmaps){const{mipmaps:w,width:v=0,height:I=0,type:O,glInternalFormat:T}=x,L=O==="ktx"?new DataView(w[0]??new ArrayBuffer(0)):w[0];i.bindTexture(this._nativeCtxTexture),i.compressedTexImage2D(0,T,v,I,0,L),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),this.setTextureMemUse(L.byteLength)}else x&&x instanceof Uint8Array?(d=1,y=1,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!l.premultiplyAlpha),i.texImage2D(0,s,d,y,0,s,i.UNSIGNED_BYTE,x),this.setTextureMemUse(d*y*m)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",l);return{width:d,height:y}}free(){if(this.state==="freed"||(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:i}=this;i.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:i}=this,l=i.createTexture();return l?(i.activeTexture(0),i.bindTexture(l),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),l):null}}class oR extends Th{constructor(r,i,l){super(r,i,l)}async onLoadRequest(){var i,l;const r=this.textureSource.textureData;return it(r,"SubTexture must have texture data"),r.data instanceof Uint8Array?{width:1,height:1}:{width:((i=r.data)==null?void 0:i.width)||0,height:((l=r.data)==null?void 0:l.height)||0}}}class hC{constructor(r){P(this,"config");this.config=r}getBuffer(r){var i;return(i=this.config.find(l=>l.attributes[r]))==null?void 0:i.buffer}getAttributeInfo(r){var i;return(i=this.config.find(l=>l.attributes[r]))==null?void 0:i.attributes[r]}}function rR(c){return self.WebGL2RenderingContext&&c instanceof self.WebGL2RenderingContext}class sR{constructor(r){P(this,"gl");P(this,"activeTextureUnit",0);P(this,"texture2dUnits");P(this,"texture2dParams",new WeakMap);P(this,"scissorEnabled");P(this,"scissorX");P(this,"scissorY");P(this,"scissorWidth");P(this,"scissorHeight");P(this,"blendEnabled");P(this,"blendSrcRgb");P(this,"blendDstRgb");P(this,"blendSrcAlpha");P(this,"blendDstAlpha");P(this,"boundArrayBuffer");P(this,"boundElementArrayBuffer");P(this,"curProgram");P(this,"canvas");P(this,"MAX_RENDERBUFFER_SIZE");P(this,"MAX_TEXTURE_SIZE");P(this,"MAX_VIEWPORT_DIMS");P(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");P(this,"MAX_TEXTURE_IMAGE_UNITS");P(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");P(this,"MAX_VERTEX_ATTRIBS");P(this,"MAX_VARYING_VECTORS");P(this,"MAX_VERTEX_UNIFORM_VECTORS");P(this,"MAX_FRAGMENT_UNIFORM_VECTORS");P(this,"TEXTURE_MAG_FILTER");P(this,"TEXTURE_MIN_FILTER");P(this,"TEXTURE_WRAP_S");P(this,"TEXTURE_WRAP_T");P(this,"LINEAR");P(this,"CLAMP_TO_EDGE");P(this,"RGB");P(this,"RGBA");P(this,"UNSIGNED_BYTE");P(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");P(this,"UNPACK_FLIP_Y_WEBGL");P(this,"FLOAT");P(this,"TRIANGLES");P(this,"UNSIGNED_SHORT");P(this,"ONE");P(this,"ONE_MINUS_SRC_ALPHA");P(this,"VERTEX_SHADER");P(this,"FRAGMENT_SHADER");P(this,"STATIC_DRAW");P(this,"COMPILE_STATUS");P(this,"LINK_STATUS");P(this,"DYNAMIC_DRAW");P(this,"COLOR_ATTACHMENT0");P(this,"INVALID_ENUM");P(this,"INVALID_OPERATION");this.gl=r,this.activeTextureUnit=r.getParameter(r.ACTIVE_TEXTURE)-r.TEXTURE0;const i=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(i).fill(void 0).map((d,y)=>(this.activeTexture(y),r.getParameter(r.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=r.isEnabled(r.SCISSOR_TEST);const l=r.getParameter(r.SCISSOR_BOX);this.scissorX=l[0],this.scissorY=l[1],this.scissorWidth=l[2],this.scissorHeight=l[3],this.blendEnabled=r.isEnabled(r.BLEND),this.blendSrcRgb=r.getParameter(r.BLEND_SRC_RGB),this.blendDstRgb=r.getParameter(r.BLEND_DST_RGB),this.blendSrcAlpha=r.getParameter(r.BLEND_SRC_ALPHA),this.blendDstAlpha=r.getParameter(r.BLEND_DST_ALPHA),this.boundArrayBuffer=r.getParameter(r.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=r.getParameter(r.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=r.getParameter(r.CURRENT_PROGRAM),this.canvas=r.canvas,this.MAX_RENDERBUFFER_SIZE=r.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=r.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=r.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=r.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=r.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=r.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=r.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=r.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=r.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=r.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=r.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=r.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=r.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=r.TEXTURE_WRAP_T,this.LINEAR=r.LINEAR,this.CLAMP_TO_EDGE=r.CLAMP_TO_EDGE,this.RGB=r.RGB,this.RGBA=r.RGBA,this.UNSIGNED_BYTE=r.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=r.UNPACK_FLIP_Y_WEBGL,this.FLOAT=r.FLOAT,this.TRIANGLES=r.TRIANGLES,this.UNSIGNED_SHORT=r.UNSIGNED_SHORT,this.ONE=r.ONE,this.ONE_MINUS_SRC_ALPHA=r.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=r.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=r.TRIANGLES,this.UNSIGNED_SHORT=r.UNSIGNED_SHORT,this.VERTEX_SHADER=r.VERTEX_SHADER,this.FRAGMENT_SHADER=r.FRAGMENT_SHADER,this.STATIC_DRAW=r.STATIC_DRAW,this.COMPILE_STATUS=r.COMPILE_STATUS,this.LINK_STATUS=r.LINK_STATUS,this.DYNAMIC_DRAW=r.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=r.COLOR_ATTACHMENT0,this.INVALID_ENUM=r.INVALID_ENUM,this.INVALID_OPERATION=r.INVALID_OPERATION}isWebGl2(){return rR(this.gl)}activeTexture(r){const{gl:i}=this;this.activeTextureUnit!==r&&(i.activeTexture(r+i.TEXTURE0),this.activeTextureUnit=r)}bindTexture(r){const{gl:i,activeTextureUnit:l,texture2dUnits:d}=this;d[l]!==r&&(d[l]=r,i.bindTexture(this.gl.TEXTURE_2D,r))}_getActiveTexture(){const{activeTextureUnit:r,texture2dUnits:i}=this;return i[r]}texParameteri(r,i){const{gl:l,texture2dParams:d}=this,y=this._getActiveTexture();if(!y)throw new Error("No active texture");let x=d.get(y);x||(x={},d.set(y,x)),x[r]!==i&&(x[r]=i,l.texParameteri(l.TEXTURE_2D,r,i))}texImage2D(r,i,l,d,y,x,s,m){const{gl:C}=this;x?C.texImage2D(C.TEXTURE_2D,r,i,l,d,y,x,s,m):C.texImage2D(C.TEXTURE_2D,r,i,l,d,y)}compressedTexImage2D(r,i,l,d,y,x){const{gl:s}=this;s.compressedTexImage2D(s.TEXTURE_2D,r,i,l,d,y,x)}pixelStorei(r,i){const{gl:l}=this;l.pixelStorei(r,i)}generateMipmap(){const{gl:r}=this;r.generateMipmap(r.TEXTURE_2D)}createTexture(){const{gl:r}=this;return r.createTexture()}deleteTexture(r){const{gl:i}=this;r&&this.texture2dParams.delete(r),i.deleteTexture(r)}viewport(r,i,l,d){const{gl:y}=this;y.viewport(r,i,l,d)}clearColor(r,i,l,d){const{gl:y}=this;y.clearColor(r,i,l,d)}setScissorTest(r){const{gl:i,scissorEnabled:l}=this;r!==l&&(r?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),this.scissorEnabled=r)}scissor(r,i,l,d){const{gl:y,scissorX:x,scissorY:s,scissorWidth:m,scissorHeight:C}=this;(r!==x||i!==s||l!==m||d!==C)&&(y.scissor(r,i,l,d),this.scissorX=r,this.scissorY=i,this.scissorWidth=l,this.scissorHeight=d)}setBlend(r){const{gl:i,blendEnabled:l}=this;r!==l&&(r?i.enable(i.BLEND):i.disable(i.BLEND),this.blendEnabled=r)}blendFunc(r,i){const{gl:l,blendSrcRgb:d,blendDstRgb:y,blendSrcAlpha:x,blendDstAlpha:s}=this;(r!==d||i!==y||r!==x||i!==s)&&(l.blendFunc(r,i),this.blendSrcRgb=r,this.blendDstRgb=i,this.blendSrcAlpha=r,this.blendDstAlpha=i)}createBuffer(){const{gl:r}=this;return r.createBuffer()}createFramebuffer(){const{gl:r}=this;return r.createFramebuffer()}bindFramebuffer(r){const{gl:i}=this;i.bindFramebuffer(i.FRAMEBUFFER,r)}framebufferTexture2D(r,i,l){const{gl:d}=this;d.framebufferTexture2D(d.FRAMEBUFFER,r,d.TEXTURE_2D,i,l)}clear(){const{gl:r}=this;r.clear(r.COLOR_BUFFER_BIT)}arrayBufferData(r,i,l){const{gl:d,boundArrayBuffer:y}=this;y!==r&&(d.bindBuffer(d.ARRAY_BUFFER,r),this.boundArrayBuffer=r),d.bufferData(d.ARRAY_BUFFER,i,l)}elementArrayBufferData(r,i,l){const{gl:d,boundElementArrayBuffer:y}=this;y!==r&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),this.boundElementArrayBuffer=r),d.bufferData(d.ELEMENT_ARRAY_BUFFER,i,l)}vertexAttribPointer(r,i,l,d,y,x,s){const{gl:m,boundArrayBuffer:C}=this;C!==r&&(m.bindBuffer(m.ARRAY_BUFFER,r),this.boundArrayBuffer=r),m.vertexAttribPointer(i,l,d,y,x,s)}useProgram(r){const{gl:i,curProgram:l}=this;l!==r&&(i.useProgram(r),this.curProgram=r)}uniform1f(r,i){const{gl:l}=this;l.uniform1f(r,i)}uniform1fv(r,i){const{gl:l}=this;l.uniform1fv(r,i)}uniform1i(r,i){const{gl:l}=this;l.uniform1i(r,i)}uniform1iv(r,i){const{gl:l}=this;l.uniform1iv(r,i)}uniform2f(r,i,l){const{gl:d}=this;d.uniform2f(r,i,l)}uniform2fv(r,i){const{gl:l}=this;l.uniform2fv(r,i)}uniform2i(r,i,l){const{gl:d}=this;d.uniform2i(r,i,l)}uniform2iv(r,i){const{gl:l}=this;l.uniform2iv(r,i)}uniform3f(r,i,l,d){const{gl:y}=this;y.uniform3f(r,i,l,d)}uniform3fv(r,i){const{gl:l}=this;l.uniform3fv(r,i)}uniform3i(r,i,l,d){const{gl:y}=this;y.uniform3i(r,i,l,d)}uniform3iv(r,i){const{gl:l}=this;l.uniform3iv(r,i)}uniform4f(r,i,l,d,y){const{gl:x}=this;x.uniform4f(r,i,l,d,y)}uniform4fv(r,i){const{gl:l}=this;l.uniform4fv(r,i)}uniform4i(r,i,l,d,y){const{gl:x}=this;x.uniform4i(r,i,l,d,y)}uniform4iv(r,i){const{gl:l}=this;l.uniform4iv(r,i)}uniformMatrix2fv(r,i){const{gl:l}=this;l.uniformMatrix2fv(r,!1,i)}uniformMatrix3fv(r,i){const{gl:l}=this;l.uniformMatrix3fv(r,!1,i)}uniformMatrix4fv(r,i){const{gl:l}=this;l.uniformMatrix4fv(r,!1,i)}getParameter(r){const{gl:i}=this;return i.getParameter(r)}drawElements(r,i,l,d){const{gl:y}=this;y.drawElements(r,i,l,d)}getExtension(r){const{gl:i}=this;return i.getExtension(r)}getError(){const{gl:r}=this;return r.getError()}createVertexArray(){const{gl:r}=this;return it(r instanceof WebGL2RenderingContext),r.createVertexArray()}bindVertexArray(r){const{gl:i}=this;it(i instanceof WebGL2RenderingContext),i.bindVertexArray(r)}getAttribLocation(r,i){const{gl:l}=this;return l.getAttribLocation(r,i)}getUniformLocation(r,i){const{gl:l}=this;return l.getUniformLocation(r,i)}enableVertexAttribArray(r){const{gl:i}=this;i.enableVertexAttribArray(r)}disableVertexAttribArray(r){const{gl:i}=this;i.disableVertexAttribArray(r)}createShader(r){const{gl:i}=this;return i.createShader(r)}compileShader(r){const{gl:i}=this;i.compileShader(r)}attachShader(r,i){const{gl:l}=this;l.attachShader(r,i)}linkProgram(r){const{gl:i}=this;i.linkProgram(r)}deleteProgram(r){const{gl:i}=this;i.deleteProgram(r)}getShaderParameter(r,i){const{gl:l}=this;return l.getShaderParameter(r,i)}getShaderInfoLog(r){const{gl:i}=this;return i.getShaderInfoLog(r)}createProgram(){const{gl:r}=this;return r.createProgram()}getProgramParameter(r,i){const{gl:l}=this;return l.getProgramParameter(r,i)}getProgramInfoLog(r){const{gl:i}=this;return i.getProgramInfoLog(r)}shaderSource(r,i){const{gl:l}=this;l.shaderSource(r,i)}deleteShader(r){const{gl:i}=this;i.deleteShader(r)}}class xS extends Th{constructor(i,l,d){super(i,l,d);P(this,"framebuffer");const y=i.createFramebuffer();it(y,"Unable to create framebuffer"),this.framebuffer=y}async onLoadRequest(){const{glw:i}=this,l=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:d,height:y}=this.textureSource;return i.texImage2D(0,i.RGBA,d,y,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(d*y*4),i.bindFramebuffer(this.framebuffer),i.framebufferTexture2D(i.COLOR_ATTACHMENT0,l,0),i.bindFramebuffer(null),{width:d,height:y}}}const aR=24;class Rm extends lC{constructor(i){super(i);P(this,"glw");P(this,"system");P(this,"quadBuffer");P(this,"fQuadBuffer");P(this,"uiQuadBuffer");P(this,"renderOps",[]);P(this,"curBufferIdx",0);P(this,"curRenderOp",null);P(this,"rttNodes",[]);P(this,"activeRttNode",null);P(this,"defShaderCtrl");P(this,"defaultShader");P(this,"quadBufferCollection");P(this,"clearColor",{raw:0,normalized:[0,0,0,0]});P(this,"quadBufferUsage",0);P(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:l,clearColor:d,bufferMemory:y}=i,x=aM(l,i.forceWebGL2,i.contextSpy),s=this.glw=new sR(x);s.viewport(0,0,l.width,l.height),this.updateClearColor(d),s.setBlend(!0),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),nR(s,y),this.system={parameters:eR(this.glw),extensions:tR(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const m=s.createBuffer();it(m);const C=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new hC([{buffer:m,attributes:{a_position:{name:"a_position",size:2,type:s.FLOAT,normalized:!1,stride:C,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:s.FLOAT,normalized:!1,stride:C,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:s.UNSIGNED_BYTE,normalized:!0,stride:C,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:s.FLOAT,normalized:!1,stride:C,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:i}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,i.setScissorTest(!1),i.clear()}getShaderManager(){return this.shManager}createCtxTexture(i){return i instanceof ml?new oR(this.glw,this.txMemManager,i):i instanceof Ch?new xS(this.glw,this.txMemManager,i):new Th(this.glw,this.txMemManager,i)}addQuad(i){const{fQuadBuffer:l,uiQuadBuffer:d}=this;let y=i.texture;if(it(y!==null,"Texture is required"),i.shaderProps!==null){if(xh(i.shaderProps,"$dimensions")==!0){const U=i.shaderProps.$dimensions;U.width=i.width,U.height=i.height}xh(i.shaderProps,"$alpha")===!0&&(i.shaderProps.$alpha=i.alpha)}let{curBufferIdx:x,curRenderOp:s}=this;const m={width:-1,height:-1};m.width=i.width,m.height=i.height;const C=i.shader||this.defaultShader;it(C.getUniformLocation!==void 0,"Invalid WebGL shader"),this.reuseRenderOp(i)===!1&&(this.newRenderOp(C,i.shaderProps,i.alpha,m,i.clippingRect,x,i.rtt,i.parentHasRenderTexture,i.framebufferDimensions),s=this.curRenderOp,it(s));let w=0,v=0,I=1,O=1;if(y.type===Gn.subTexture){const{x:U,y:V,width:z,height:G}=y.props,{width:Q=0,height:te=0}=y.parentTexture.dimensions||{width:0,height:0};w=U/Q,I=w+z/Q,v=V/te,O=v+G/te,y=y.parentTexture}if(y.type===Gn.image&&i.textureOptions!==null&&i.textureOptions.resizeMode!==void 0&&y.dimensions!==null){const U=i.textureOptions.resizeMode,{width:V,height:z}=y.dimensions;if(U.type==="cover"){const G=i.width/V,Q=i.height/z,te=Math.max(G,Q),le=1/te;if(te&&G&&G<te){const he=le*i.width;w=(1-he/V)*(U.clipX??.5),I=w+he/V}if(te&&Q&&Q<te){const he=le*i.height;v=(1-he/z)*(U.clipY??.5),O=v+he/z}}}let T=0;i.textureOptions!==null&&(i.textureOptions.flipX===!0&&([w,I]=[I,w]),T=+(i.textureOptions.flipY||!1)),T^+(y.type===Gn.renderToTexture)&&([v,O]=[O,v]);const L=y.ctxTexture;it(L instanceof Th);const j=this.addTexture(L,x);if(it(this.curRenderOp!==null),i.renderCoords)l[x++]=i.renderCoords.x1,l[x++]=i.renderCoords.y1,l[x++]=w,l[x++]=v,d[x++]=i.colorTl,l[x++]=j,l[x++]=i.renderCoords.x2,l[x++]=i.renderCoords.y2,l[x++]=I,l[x++]=v,d[x++]=i.colorTr,l[x++]=j,l[x++]=i.renderCoords.x4,l[x++]=i.renderCoords.y4,l[x++]=w,l[x++]=O,d[x++]=i.colorBl,l[x++]=j,l[x++]=i.renderCoords.x3,l[x++]=i.renderCoords.y3,l[x++]=I,l[x++]=O,d[x++]=i.colorBr,l[x++]=j;else if(i.tb!==0||i.tc!==0)l[x++]=i.tx,l[x++]=i.ty,l[x++]=w,l[x++]=v,d[x++]=i.colorTl,l[x++]=j,l[x++]=i.tx+i.width*i.ta,l[x++]=i.ty+i.width*i.tc,l[x++]=I,l[x++]=v,d[x++]=i.colorTr,l[x++]=j,l[x++]=i.tx+i.height*i.tb,l[x++]=i.ty+i.height*i.td,l[x++]=w,l[x++]=O,d[x++]=i.colorBl,l[x++]=j,l[x++]=i.tx+i.width*i.ta+i.height*i.tb,l[x++]=i.ty+i.width*i.tc+i.height*i.td,l[x++]=I,l[x++]=O,d[x++]=i.colorBr,l[x++]=j;else{const U=i.tx+i.width*i.ta,V=i.ty+i.height*i.td;l[x++]=i.tx,l[x++]=i.ty,l[x++]=w,l[x++]=v,d[x++]=i.colorTl,l[x++]=j,l[x++]=U,l[x++]=i.ty,l[x++]=I,l[x++]=v,d[x++]=i.colorTr,l[x++]=j,l[x++]=i.tx,l[x++]=V,l[x++]=w,l[x++]=O,d[x++]=i.colorBl,l[x++]=j,l[x++]=U,l[x++]=V,l[x++]=I,l[x++]=O,d[x++]=i.colorBr,l[x++]=j}this.curRenderOp.length+=aR,this.curRenderOp.numQuads++,this.curBufferIdx=x}newRenderOp(i,l,d,y,x,s,m,C,w){const v=new cC(this.glw,this.options,this.quadBufferCollection,i,l,d,x,y,s,0,m,C,w);this.curRenderOp=v,this.renderOps.push(v)}addTexture(i,l,d){const{curRenderOp:y}=this;it(y);const x=y.addTexture(i);if(x===4294967295){if(d)throw new Error("Unable to add texture to render op");return this.newRenderOp(y.shader,y.shaderProps,y.alpha,y.dimensions,y.clippingRect,l),this.addTexture(i,l,!0)}return x}reuseRenderOp(i){var C;const{shader:l,shaderProps:d,parentHasRenderTexture:y,rtt:x,clippingRect:s}=i,m=l||this.defaultShader;return!(((C=this.curRenderOp)==null?void 0:C.shader)!==m||!pM(this.curRenderOp.clippingRect,s)||y||x||this.curRenderOp.shader!==this.defaultShader&&(!d||!this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,d)))}addRenderOp(i){this.renderOps.push(i),this.curRenderOp=null}render(i="screen"){const{glw:l,quadBuffer:d}=this,y=new Float32Array(d,0,this.curBufferIdx),x=this.quadBufferCollection.getBuffer("a_position")??null;l.arrayBufferData(x,y,l.STATIC_DRAW);for(let s=0,m=this.renderOps.length;s<m;s++)this.renderOps[s].draw();this.quadBufferUsage=this.curBufferIdx*y.BYTES_PER_ELEMENT}renderToTexture(i){for(let l=0;l<this.rttNodes.length;l++)if(this.rttNodes[l]===i)return;this.insertRTTNodeInOrder(i)}insertRTTNodeInOrder(i){let l=this.rttNodes.length,d=i;for(;d&&d.parent;){const x=this.rttNodes.indexOf(d.parent);if(x!==-1){l=x;break}d=d.parent}const y=this.findMaxChildRTTIndex(i);y!==-1&&(l=Math.max(l,y+1)),this.rttNodes.splice(l,0,i)}findMaxChildRTTIndex(i){let l=-1;const d=y=>{const x=this.rttNodes.indexOf(y);x!==-1&&(l=Math.max(l,x));for(const s of y.children)d(s)};return d(i),l}renderRTTNodes(){const{glw:i}=this;this.stage;for(let d=0;d<this.rttNodes.length;d++){const y=this.rttNodes[d];if(!y||!y.hasRTTupdates)continue;if(!y.texture||!y.texture.ctxTexture){console.warn("Texture not loaded for RTT node",y);continue}this.activeRttNode=y,it(y.texture,"RTT node missing texture");const x=y.texture.ctxTexture;it(x instanceof xS),this.renderToTextureActive=!0,i.bindFramebuffer(x.framebuffer),i.viewport(0,0,x.w,x.h),i.clearColor(0,0,0,0),i.clear();for(let s=0;s<y.children.length;s++){const m=y.children[s];m&&(this.stage.addQuads(m),m.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,y.hasRTTupdates=!1}const l=this.clearColor.normalized;i.clearColor(l[0],l[1],l[2],l[3]),i.bindFramebuffer(null),i.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(i){const l=this.rttNodes.indexOf(i);l!==-1&&this.rttNodes.splice(l,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(i){if(this.clearColor.raw===i)return;const l=this.glw,d=xl(i);l.clearColor(d[0],d[1],d[2],d[3]),this.clearColor={raw:i,normalized:d},l.clear()}}const uR={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class lR{}class fR extends lR{constructor(i,l){super();P(this,"data");P(this,"glyphMap");P(this,"kernings");this.data=i,this.glyphMap=l;const d=this.kernings={};i.kernings.forEach(y=>{const x=y.second,s=d[x]=d[x]||{};s[y.first]=y.amount}),this.kernings=d}*shapeText(i,l){var x;let d,y;for(;(d=l.peek())&&!d.done;){const s=d.value,m=this.glyphMap.get(s);if(l.next(),m!==void 0){const C=y!==void 0?(((x=this.kernings[m.id])==null?void 0:x[y])||0)+i.letterSpacing:0;y=m.id,yield{mapped:!0,glyphId:m.id,codepoint:s,cluster:l.lastIndex,xAdvance:m.xadvance+C,yAdvance:0,xOffset:m.xoffset+C,yOffset:m.yoffset,xBearing:0,yBearing:0,width:m.width,height:m.height}}else s===uR.LINE_FEED&&(y=void 0),yield{mapped:!1,codepoint:s,cluster:l.lastIndex}}}}class vm extends fC{constructor(i,l){super(l);P(this,"type");P(this,"texture");P(this,"maxCharHeight",0);P(this,"data");P(this,"shaper");P(this,"glyphMap",new Map);const{atlasUrl:d,atlasDataUrl:y,stage:x}=l;this.type=i;const s=x.renderer;it(s instanceof Rm,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=x.txManager.createTexture("ImageTexture",{src:d,premultiplyAlpha:!1}),x.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),x.requestRender()}),fetch(y).then(async m=>{var w;this.data=await m.json(),it(this.data);let C=0;if(this.data.chars.forEach(v=>{this.glyphMap.set(v.id,v);const I=v.yoffset+v.height;I>C&&(C=I)}),this.maxCharHeight=C,this.shaper=new fR(this.data,this.glyphMap),!this.metrics)if((w=this.data)!=null&&w.lightningMetrics){const{ascender:v,descender:I,lineGap:O,unitsPerEm:T}=this.data.lightningMetrics;this.metrics={ascender:v/T,descender:I/T,lineGap:O/T}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(i){const l=this.glyphMap.get(i);if(l===void 0)throw new Error(`Glyph ${i} not found in font ${this.fontFamily}`);return{x:l.x,y:l.y,width:l.width,height:l.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const cR=24;function hR(c,r,i,l,d,y,x,s,m){const C=Math.min(Math.max(x.firstLineIdx,0),s.length),w=0,{metrics:v}=i;it(v,"Font metrics not loaded"),it(i.data,"Font data not loaded");const I=(v.ascender-v.descender)*c;let O=0;l==="middle"?O=(r-I)/2:l==="bottom"&&(O=r-I);const T=d/y,L=i.data.common.base,U=v.ascender*c-L,V=T+U+C*r+O;if(!(m&&V>=m/y))return{sdfX:w,sdfY:V,lineIndex:C}}class rl{constructor(r,i=0){P(this,"iterator");P(this,"peekBuffer",[]);P(this,"_lastIndex");this.iterator=r,this.iterator=r,this._lastIndex=i-1,this.peekBuffer=[]}next(){const r=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return r.done?this._lastIndex=-1:this._lastIndex++,r}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const r=this.iterator.next();return this.peekBuffer.push(r),r}get lastIndex(){return this._lastIndex}}function*sl(c,r=0){let i=r;for(;i<c.length;){const l=c.codePointAt(i);if(l===void 0)throw new Error("Invalid Unicode code point");yield l,i+=l<=65535?1:2}}function dR(c,r,i){const l=i.shapeText(r,new rl(sl(c,0),0));let d=0;for(const y of l)y.mapped&&y.codepoint!==8203&&(d+=y.xAdvance);return d}function pR(c,r,i,l,d,y,x,s,m,C,w,v,I,O,T,L,j,U,V){it(T,"Font face must be loaded"),it(T.loaded,"Font face must be loaded"),it(T.data,"Font face must be loaded"),it(T.shaper,"Font face must be loaded");const z=s/T.data.info.size,G=m/z,Q=y/z,te=C/z,le=I[c],he=(le==null?void 0:le.codepointIndex)||0,fe=(le==null?void 0:le.maxX)||0,k=(le==null?void 0:le.maxY)||0;let q=fe,Y=k,Z=r,K=i,ee=0;const re={codepointIndex:-1,bufferOffset:-1,xStart:-1},ce=T.shaper,we={letterSpacing:te};l.endsWith(" ")&&(l+=" ");let be=ce.shapeText(we,new rl(sl(l,he),he)),Te,ke=-1;const pe=[],Le=x/z,$=dR(U,we,ce);let Ie=!0;for(;Ie;){const Pe=(V===0||c+1<V)&&(v!=="both"||j||K+G+T.maxCharHeight<=Le),$e=Pe?Q:Q-$;let Xe=0;const et=K+T.maxCharHeight>=O.y1,We=K<=O.y2,nt=et&&We;for(;(Te=be.next())&&!Te.done;){const me=Te.value;if(c===I.length)I.push({codepointIndex:me.cluster,maxY:Y,maxX:q});else if(c>I.length)throw new Error("Unexpected lineCache length");if(me.codepoint===32||me.codepoint===10||me.codepoint===8203?re.codepointIndex!==-1&&(re.codepointIndex=-1,Xe=Z):re.codepointIndex===-1&&(re.codepointIndex=me.cluster,re.bufferOffset=ee,re.xStart=Xe),me.mapped){const wt=Z+me.xOffset+me.width;if(v!=="none"&&wt>=$e&&re.codepointIndex!==-1&&re.xStart>0)if(Pe){be=ce.shapeText(we,new rl(sl(l,re.codepointIndex),re.codepointIndex)),ee=re.bufferOffset;break}else be=ce.shapeText(we,new rl(sl(U,0),0)),Z=re.xStart,ee=re.bufferOffset,v="none";else{const ft=Z+me.xOffset,ot=K+me.yOffset;if(nt){ke===-1&&(ke=ee);const St=T.getAtlasEntry(me.glyphId),tt=St.x/T.data.common.scaleW,rt=St.y/T.data.common.scaleH,Ge=St.width/T.data.common.scaleW,ze=St.height/T.data.common.scaleH;w[ee++]=ft,w[ee++]=ot,w[ee++]=tt,w[ee++]=rt,w[ee++]=ft+me.width,w[ee++]=ot,w[ee++]=tt+Ge,w[ee++]=rt,w[ee++]=ft,w[ee++]=ot+me.height,w[ee++]=tt,w[ee++]=rt+ze,w[ee++]=ft+me.width,w[ee++]=ot+me.height,w[ee++]=tt+Ge,w[ee++]=rt+ze}Y=Math.max(Y,ot+me.height),q=Math.max(q,ft+me.width),Z+=me.xAdvance}}else if(me.codepoint===10){if(Pe)break;be=ce.shapeText(we,new rl(sl(U,0),0)),v="none"}}ke!==-1&&(pe.push({bufferStart:ke,bufferEnd:ee}),ke=-1),Z=0,K+=G,c++,re.codepointIndex=-1,Xe=0,!L&&v==="both"&&K>O.y2||Te&&Te.done?Ie=!1:Pe||(Ie=!1)}if(d==="center"){const Pe=v==="none"?q:Q;for(let $e=0;$e<pe.length;$e++){const Xe=pe[$e],et=w[Xe.bufferEnd-4]-w[Xe.bufferStart],We=(Pe-et)/2;for(let nt=Xe.bufferStart;nt<Xe.bufferEnd;nt+=4)w[nt]+=We}}else if(d==="right"){const Pe=v==="none"?q:Q;for(let $e=0;$e<pe.length;$e++){const Xe=pe[$e],et=Xe.bufferEnd===Xe.bufferStart?0:w[Xe.bufferEnd-4]-w[Xe.bufferStart],We=Pe-et;for(let nt=Xe.bufferStart;nt<Xe.bufferEnd;nt+=4)w[nt]+=We}}return it(Te),{bufferNumFloats:ee,bufferNumQuads:ee/16,layoutNumCharacters:Te.done?l.length-he:Te.value.cluster-he+1,fullyProcessed:!!Te.done,maxX:q,maxY:Y,numLines:I.length}}function mR(c,r){return Math.ceil(c/r)*r}function gR(c,r){return Math.floor(c/r)*r}function yR(c,r,i,l,d,y,x,s){const{screen:m,sdf:C}=c;if(!gM(x))m.x1=0,m.y1=0,m.x2=0,m.y2=0,C.x1=0,C.y1=0,C.x2=0,C.y2=0,c.numLines=0,c.firstLineIdx=0;else{const w=x.x1-r,v=w+(x.x2-x.x1),I=x.y1-i+l,O=gR(I-y,d||1),T=mR(I+(x.y2-x.y1)+y,d||1);m.x1=w,m.y1=O,m.x2=v,m.y2=T,C.x1=w/s,C.y1=O/s,C.x2=v/s,C.y2=T/s,c.numLines=Math.ceil((T-O)/d),c.firstLineIdx=d?Math.floor(O/d):0}c.valid=!0}function dC(c,r){return r*(c.ascender-c.descender+c.lineGap)}const vR={x:0,y:0,width:0,height:0};class xR extends Mm{constructor(i){super(i);P(this,"ssdfFontFamilies",{});P(this,"msdfFontFamilies",{});P(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);P(this,"sdfShader");P(this,"rendererBounds");P(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(i,l)=>{i.props.fontFamily=l,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontWeight:(i,l)=>{i.props.fontWeight=l,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStyle:(i,l)=>{i.props.fontStyle=l,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStretch:(i,l)=>{i.props.fontStretch=l,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontSize:(i,l)=>{i.props.fontSize=l,this.invalidateLayoutCache(i)},text:(i,l)=>{i.props.text=l,this.invalidateLayoutCache(i)},textAlign:(i,l)=>{i.props.textAlign=l,this.invalidateLayoutCache(i)},color:(i,l)=>{i.props.color=l},x:(i,l)=>{i.props.x=l,i.elementBounds.valid&&(this.setElementBoundsX(i),!i.renderWindow.valid&&q0(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},y:(i,l)=>{i.props.y=l,i.elementBounds.valid&&(this.setElementBoundsY(i),!i.renderWindow.valid&&q0(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},contain:(i,l)=>{i.props.contain=l,this.invalidateLayoutCache(i)},width:(i,l)=>{i.props.width=l,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,l)=>{i.props.height=l,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,l)=>{i.props.offsetY=l,this.invalidateLayoutCache(i)},scrollable:(i,l)=>{i.props.scrollable=l,this.invalidateLayoutCache(i)},scrollY:(i,l)=>{i.props.scrollY=l,this.scheduleUpdateState(i)},letterSpacing:(i,l)=>{i.props.letterSpacing=l,this.invalidateLayoutCache(i)},lineHeight:(i,l)=>{i.props.lineHeight=l,i.resLineHeight=void 0,this.invalidateLayoutCache(i)},maxLines:(i,l)=>{i.props.maxLines=l,this.invalidateLayoutCache(i)},textBaseline:(i,l)=>{i.props.textBaseline=l,this.invalidateLayoutCache(i)},verticalAlign:(i,l)=>{i.props.verticalAlign=l,this.invalidateLayoutCache(i)},overflowSuffix:(i,l)=>{i.props.overflowSuffix=l,this.invalidateLayoutCache(i)},debug:(i,l)=>{i.props.debug=l}}}canRenderFont(i){const{fontFamily:l}=i;return l in this.ssdfFontFamilies||l in this.msdfFontFamilies||l==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(i){return i instanceof vm}addFontFace(i){it(i instanceof vm);const l=i.fontFamily,d=i.type==="ssdf"?this.ssdfFontFamilies:i.type==="msdf"?this.msdfFontFamilies:void 0;if(!d){console.warn(`Invalid font face type: ${i.type}`);return}let y=d[l];y||(y=new Set,d[l]=y),y.add(i)}createState(i){return{props:i,status:"initialState",updateScheduled:!1,emitter:new cr,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(i){let{trFontFace:l}=i;const{textH:d,lineCache:y,debugData:x,forceFullLayoutCalc:s}=i;if(x.updateCount++,i.status==="initialState"&&this.setStatus(i,"loading"),l===void 0){if(l=this.resolveFontFace(i.props),i.trFontFace=l,l===void 0){const ce=`SdfTextRenderer: Could not resolve font face for family: '${i.props.fontFamily}'`;console.error(ce),this.setStatus(i,"failed",new Error(ce));return}l.texture.setRenderableOwner(i,!0)}if(l.loaded===!1){l.once("loaded",()=>{this.scheduleUpdateState(i)});return}it(l.data,"Font face data should be loaded"),it(l.metrics,"Font face metrics should be loaded");const{text:m,fontSize:C,x:w,y:v,contain:I,width:O,height:T,verticalAlign:L,scrollable:j,overflowSuffix:U,maxLines:V}=i.props,z=I==="both"&&j?i.props.scrollY:0,{renderWindow:G}=i,Q=l.data.info.size,te=C/Q;let le=i.resLineHeight;if(le===void 0){const ce=i.props.lineHeight;ce===void 0?le=dC(l.metrics,C):le=ce,i.resLineHeight=le}const he=le/te;i.distanceRange=te*l.data.distanceField.distanceRange;const fe=m.length*cR;let k=i.vertexBuffer;(!k||k.length<fe)&&(k=new Float32Array(fe*2));const q=i.elementBounds;if(q.valid||(this.setElementBoundsX(i),this.setElementBoundsY(i),q.valid=!0),!s&&G.valid){const ce=G.screen;if(w+ce.x1<=q.x1&&w+ce.x2>=q.x2&&v-z+ce.y1<=q.y1&&v-z+ce.y2>=q.y2){this.setStatus(i,"loaded");return}G.valid=!1,this.setStatus(i,"loading")}const{offsetY:Y,textAlign:Z}=i.props;if(!G.valid){if(!q0(q,this.rendererBounds))return;yR(G,w,v,z,le,I==="both"?q.y2-q.y1:0,q,te)}const K=hR(Q,he,l,L,Y,te,G,y,d);if(!K){this.setStatus(i,"loaded");return}const{letterSpacing:ee}=i.props,re=pR(K.lineIndex,K.sdfX,K.sdfY,m,Z,O,T,C,le,ee,k,I,y,G.sdf,l,s,j,U,V);i.bufferUploaded=!1,i.bufferNumFloats=re.bufferNumFloats,i.bufferNumQuads=re.bufferNumQuads,i.vertexBuffer=k,i.renderWindow=G,x.lastLayoutNumCharacters=re.layoutNumCharacters,x.bufferSize=k.byteLength,re.fullyProcessed&&(i.textW=re.maxX*te,i.textH=re.numLines*he*te),this.setStatus(i,"loaded")}renderQuads(i,l,d,y,x,s){var q,Y;if(!i.vertexBuffer)return;const m=this.stage.renderer;it(m instanceof Rm);const{fontSize:C,color:w,contain:v,scrollable:I,zIndex:O,debug:T}=i.props,L=v==="both"&&I?i.props.scrollY:0,{textW:j=0,textH:U=0,distanceRange:V,vertexBuffer:z,bufferUploaded:G,trFontFace:Q,elementBounds:te}=i;let{webGlBuffers:le}=i;if(!le){const Z=m.glw,K=4*Float32Array.BYTES_PER_ELEMENT,ee=Z.createBuffer();it(ee),i.webGlBuffers=new hC([{buffer:ee,attributes:{a_position:{name:"a_position",size:2,type:Z.FLOAT,normalized:!1,stride:K,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:Z.FLOAT,normalized:!1,stride:K,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),i.bufferUploaded=!1,it(i.webGlBuffers),le=i.webGlBuffers}if(!G){const Z=m.glw,K=(le==null?void 0:le.getBuffer("a_textureCoordinate"))??null;Z.arrayBufferData(K,z,Z.STATIC_DRAW),i.bufferUploaded=!0}if(it(Q),I&&v==="both"){it(te.valid);const Z=dM(te,vR);d.valid?(i.clippingRect.valid=!0,d=eC(d,Z,i.clippingRect)):(i.clippingRect.valid=!0,d=tC(Z,i.clippingRect))}const he=new cC(m.glw,m.options,le,this.sdfShader,{transform:l.getFloatArr(),color:uM(w,y),size:C/(((q=Q.data)==null?void 0:q.info.size)||0),scrollY:L,distanceRange:V,debug:T.sdfShaderDebug},y,d,{height:U,width:j},0,O,!1,x,s),fe=(Y=i.trFontFace)==null?void 0:Y.texture;it(fe);const k=fe.ctxTexture;he.addTexture(k),he.length=i.bufferNumFloats,he.numQuads=i.bufferNumQuads,m.addRenderOp(he)}setIsRenderable(i,l){var d;super.setIsRenderable(i,l),(d=i.trFontFace)==null||d.texture.setRenderableOwner(i,l)}destroyState(i){var l;super.destroyState(i),(l=i.trFontFace)==null||l.texture.setRenderableOwner(i,!1)}resolveFontFace(i){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i,"sdf")}releaseFontFace(i){i.resLineHeight=void 0,i.trFontFace&&(i.trFontFace.texture.setRenderableOwner(i,!1),i.trFontFace=void 0)}invalidateLayoutCache(i){i.renderWindow.valid=!1,i.elementBounds.valid=!1,i.textH=void 0,i.textW=void 0,i.lineCache=[],this.setStatus(i,"loading"),this.scheduleUpdateState(i)}setElementBoundsX(i){const{x:l,contain:d,width:y}=i.props,{elementBounds:x}=i;x.x1=l,x.x2=d!=="none"?l+y:1/0}setElementBoundsY(i){const{y:l,contain:d,height:y}=i.props,{elementBounds:x}=i;x.y1=l,x.y2=d==="both"?l+y:1/0}}function wS(c){return c===""||c==="​"}function wR(c,r,i){if(r.metrics)return r.metrics;const l=c.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${r.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let d;return l.actualBoundingBoxDescent&&l.actualBoundingBoxAscent?d={ascender:l.actualBoundingBoxAscent/i,descender:-l.actualBoundingBoxDescent/i,lineGap:.2}:d={ascender:.8,descender:-.2,lineGap:.2},r.metrics=d,d}const SS=2048;function CS(c,r,i,l,d){const y=c!=="bottom"?.5*r:0;return i*(l-1)+y+Math.max(i,r)+(d||0)}class SR{constructor(r,i){P(this,"_canvas");P(this,"_context");P(this,"_settings");this._canvas=r,this._context=i,this._settings=this.mergeDefaults({})}set settings(r){this._settings=this.mergeDefaults(r)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const r=[this._settings.fontFamily],i=[];for(let l=0,d=r.length;l<d;l++)r[l]==="serif"||r[l]==="sans-serif"?i.push(r[l]):i.push(`"${r[l]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${i.join(",")}`}_load(){if(document.fonts){const r=this._getFontSetting();try{if(!document.fonts.check(r,this._settings.text))return document.fonts.load(r,this._settings.text).catch(i=>{console.warn("[Lightning] Font load error",i,r)}).then(()=>{document.fonts.check(r,this._settings.text)||console.warn("[Lightning] Font not found",r)})}catch{console.warn("[Lightning] Can't check font loading for "+r)}}}calculateRenderInfo(){const r={},i=this.getPrecision(),l=this._settings.paddingLeft*i,d=this._settings.paddingRight*i,y=this._settings.fontSize*i;let x=this._settings.offsetY===null?null:this._settings.offsetY*i;const s=this._settings.w*i,m=this._settings.h*i;let C=this._settings.wordWrapWidth*i;const w=this._settings.cutSx*i,v=this._settings.cutEx*i,I=this._settings.cutSy*i,O=this._settings.cutEy*i,T=(this._settings.letterSpacing||0)*i,L=this._settings.textIndent*i,j=this._settings.trFontFace;this.setFontProperties(),it(j);const U=wR(this._context,j,y),V=dC(U,y)*i,z=this._settings.lineHeight!==null?this._settings.lineHeight*i:V,G=this._settings.maxHeight,Q=G!==null&&z>0?Math.floor(G/z):0,te=this._settings.maxLines,le=Q>0&&te>0?Math.min(Q,te):Math.max(Q,te);let he=s||2048/this.getPrecision(),fe=he-l;if(fe<10&&(he+=10-fe,fe=10),C||(C=fe),this._settings.textOverflow&&!this._settings.wordWrap){let ee;switch(this._settings.textOverflow){case"clip":ee="";break;case"ellipsis":ee=this._settings.overflowSuffix;break;default:ee=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,C-L,ee)}let k;if(this._settings.wordWrap)k=this.wrapText(this._settings.text,C,T,L);else{k={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const ee=k.l.length;for(let re=0;re<ee-1;re++)k.n.push(re)}let q=k.l;if(le&&q.length>le){const ee=q.slice(0,le);let re=null;if(this._settings.overflowSuffix){const ke=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,pe=this.wrapText(ee[ee.length-1],C-ke,T,L);ee[ee.length-1]=`${pe.l[0]}${this._settings.overflowSuffix}`,re=[pe.l.length>1?pe.l[1]:""]}else re=[""];let ce;const we=q.length;let be=0;const Te=k.n.length;for(ce=le;ce<we;ce++)re[be]+=`${re[be]?" ":""}${q[ce]}`,ce+1<Te&&k.n[ce+1]&&be++;r.remainingText=re.join(`
`),r.moreTextLines=!0,q=ee}else r.moreTextLines=!1,r.remainingText="";let Y=0;const Z=[];for(let ee=0;ee<q.length;ee++){const re=this.measureText(q[ee],T)+(ee===0?L:0);Z.push(re),Y=Math.max(Y,re)}r.lineWidths=Z,s||(he=Y+l+d,fe=Y),this._settings.wordWrap&&s>Y&&this._settings.textAlign==="left"&&q.length===1&&(he=Y+l+d);let K;return m?K=m:K=CS(this._settings.textBaseline,y,z,q.length,x),x===null&&(x=y),r.w=he,r.h=K,r.lines=q,r.precision=i,he||(he=1),K||(K=1),(w||v)&&(he=Math.min(he,v-w)),(I||O)&&(K=Math.min(K,O-I)),r.width=he,r.innerWidth=fe,r.height=K,r.fontSize=y,r.cutSx=w,r.cutSy=I,r.cutEx=v,r.cutEy=O,r.lineHeight=z,r.defLineHeight=V,r.lineWidths=Z,r.offsetY=x,r.paddingLeft=l,r.paddingRight=d,r.letterSpacing=T,r.textIndent=L,r.metrics=U,r}draw(r,i){const l=this.getPrecision(),d=(i==null?void 0:i.lines)||r.lines,y=(i==null?void 0:i.lineWidths)||r.lineWidths,x=i?CS(this._settings.textBaseline,r.fontSize,r.lineHeight,i.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*l):r.height;this._canvas.width=Math.min(Math.ceil(r.width+this._settings.textRenderIssueMargin),SS),this._canvas.height=Math.min(Math.ceil(x),SS),this.setFontProperties(),r.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(r.cutSx||r.cutSy)&&this._context.translate(-r.cutSx,-r.cutSy);let s,m;const C=[],{metrics:w}=r,v=w?w.ascender*r.fontSize:r.fontSize,I=(w.ascender-w.descender)*r.fontSize;for(let T=0,L=d.length;T<L;T++)s=T===0?r.textIndent:0,m=T*r.lineHeight+v,this._settings.verticalAlign=="middle"?m+=(r.lineHeight-I)/2:this._settings.verticalAlign=="bottom"&&(m+=r.lineHeight-I),this._settings.textAlign==="right"?s+=r.innerWidth-y[T]:this._settings.textAlign==="center"&&(s+=(r.innerWidth-y[T])/2),s+=r.paddingLeft,C.push({text:d[T],x:s,y:m,w:y[T]});if(this._settings.highlight){const T=this._settings.highlightColor,L=this._settings.highlightHeight*l||r.fontSize*1.5,j=this._settings.highlightOffset*l,U=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*l:r.paddingLeft,V=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*l:r.paddingRight;this._context.fillStyle=Y0(T);for(let z=0;z<C.length;z++){const G=C[z];this._context.fillRect(G.x-U,G.y-r.offsetY+j,G.w+V+U,L)}}let O=null;this._settings.shadow&&(O=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Y0(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*l,this._context.shadowOffsetY=this._settings.shadowOffsetY*l,this._context.shadowBlur=this._settings.shadowBlur*l),this._context.fillStyle=Y0(this._settings.textColor);for(let T=0,L=C.length;T<L;T++){const j=C[T];if(r.letterSpacing===0)this._context.fillText(j.text,j.x,j.y);else{const U=j.text.split("");let V=j.x;for(let z=0,G=U.length;z<G;z++)this._context.fillText(U[z],V,j.y),V+=this.measureText(U[z],r.letterSpacing)}}O&&(this._context.shadowColor=O[0],this._context.shadowOffsetX=O[1],this._context.shadowOffsetY=O[2],this._context.shadowBlur=O[3]),(r.cutSx||r.cutSy)&&this._context.translate(r.cutSx,r.cutSy)}wrapWord(r,i,l){const d=this._context.measureText(l).width,y=r.length,x=this._context.measureText(r).width;if(x<=i)return r;let s=Math.floor(i*y/x),m=this._context.measureText(r.substring(0,s)).width+d;if(m>i)for(;s>0&&(m=this._context.measureText(r.substring(0,s)).width+d,m>i);)s-=1;else for(;s<y;)if(m=this._context.measureText(r.substring(0,s)).width+d,m<i)s+=1;else{s-=1;break}return r.substring(0,s)+(i>=d?l:"")}wrapText(r,i,l,d=0){const y=/ |\u200B/g,x=r.split(/\r?\n/g);let s=[];const m=[];for(let C=0;C<x.length;C++){const w=[];let v="",I=i-d;const O=x[C].split(y),T=x[C].match(y)||[];for(let L=0;L<O.length;L++){const j=T[L-1]||"",U=O[L],V=this.measureText(U,l),z=wS(j)?V:V+this.measureText(j,l);L===0||z>I?(L>0&&(w.push(v),v=""),v+=U,I=i-V-(L===0?d:0)):(I-=z,v+=j+U)}w.push(v),v="",s=s.concat(w),C<x.length-1&&m.push(s.length)}return{l:s,n:m}}measureText(r,i=0){return i?r.split("").reduce((l,d)=>wS(d)?l:l+this._context.measureText(d).width+i,0):this._context.measureText(r).width}mergeDefaults(r){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...r}}}const TS=typeof self>"u"?globalThis:self;var WS;const ES=((WS=TS.document)==null?void 0:WS.fonts)||TS.fonts;function CR(c){const{fontFamily:r,fontStyle:i,fontWeight:l,fontStretch:d,fontSize:y}=c;return[i,l,d,`${y}px`,r].join(" ")}class bS extends Mm{constructor(i){super(i);P(this,"canvas");P(this,"context");P(this,"fontFamilies",{});P(this,"fontFamilyArray",[this.fontFamilies]);P(this,"type","canvas");P(this,"loadFont",i=>{const l=CR(i.props),d=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i.props,"canvas");if(it(d,`Could not resolve font face for ${l}`),i.fontInfo={fontFace:d,cssString:l,loaded:!1},!i.fontInfo.loaded){ES.load(l).then(this.onFontLoaded.bind(this,i,l)).catch(this.onFontLoadError.bind(this,i,l));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let l=this.canvas.getContext("2d",{willReadFrequently:!0});l||(this.canvas=document.createElement("canvas"),l=this.canvas.getContext("2d",{willReadFrequently:!0})),it(l),this.context=l,this.addFontFace(new dh({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(i,l)=>{i.props.fontFamily=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontWeight:(i,l)=>{i.props.fontWeight=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStyle:(i,l)=>{i.props.fontStyle=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStretch:(i,l)=>{i.props.fontStretch=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontSize:(i,l)=>{i.props.fontSize=l,i.fontInfo=void 0,this.invalidateLayoutCache(i)},text:(i,l)=>{i.props.text=l,this.invalidateLayoutCache(i)},textAlign:(i,l)=>{i.props.textAlign=l,this.invalidateLayoutCache(i)},color:(i,l)=>{i.props.color=l,this.invalidateLayoutCache(i)},x:(i,l)=>{i.props.x=l},y:(i,l)=>{i.props.y=l},contain:(i,l)=>{i.props.contain=l,this.invalidateLayoutCache(i)},width:(i,l)=>{i.props.width=l,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,l)=>{i.props.height=l,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,l)=>{i.props.offsetY=l,this.invalidateLayoutCache(i)},scrollY:(i,l)=>{i.props.scrollY=l},letterSpacing:(i,l)=>{i.props.letterSpacing=l,this.invalidateLayoutCache(i)},lineHeight:(i,l)=>{i.props.lineHeight=l,this.invalidateLayoutCache(i)},maxLines:(i,l)=>{i.props.maxLines=l,this.invalidateLayoutCache(i)},textBaseline:(i,l)=>{i.props.textBaseline=l,this.invalidateLayoutCache(i)},verticalAlign:(i,l)=>{i.props.verticalAlign=l,this.invalidateLayoutCache(i)},overflowSuffix:(i,l)=>{i.props.overflowSuffix=l,this.invalidateLayoutCache(i)}}}canRenderFont(i){return!0}isFontFaceSupported(i){return i instanceof dh}addFontFace(i){it(i instanceof dh);const l=i.fontFamily;l!=="sans-serif"&&ES.add(i.fontFace);let d=this.fontFamilies[l];d||(d=new Set,this.fontFamilies[l]=d),d.add(i)}createState(i,l){return{node:l,props:i,status:"initialState",updateScheduled:!1,emitter:new cr,textureNode:void 0,lightning2TextRenderer:new SR(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(i){if(i.status==="initialState"&&this.setStatus(i,"loading"),i.status!=="loaded"){if(!i.fontInfo)return this.loadFont(i);i.fontInfo.loaded&&(i.renderInfo||(i.renderInfo=this.calculateRenderInfo(i),i.textH=i.renderInfo.lineHeight*i.renderInfo.lines.length,i.textW=i.renderInfo.width,this.renderSingleCanvasPage(i)))}}renderSingleCanvasPage(i){it(i.renderInfo);const l=i.node,d=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:(function(y,x){return it(x),y.draw(x,{lines:x.lines,lineWidths:x.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,i.lightning2TextRenderer,i.renderInfo)});if(i.textureNode)i.textureNode.texture=d,i.textureNode.alpha=hS(i.props.color);else{const y=this.stage.createNode({parent:l,texture:d,autosize:!0,alpha:hS(i.props.color)});i.textureNode=y}this.setStatus(i,"loaded")}calculateRenderInfo(i){var l;return i.lightning2TextRenderer.settings={text:i.props.text,textAlign:i.props.textAlign,fontFamily:i.props.fontFamily,trFontFace:(l=i.fontInfo)==null?void 0:l.fontFace,fontSize:i.props.fontSize,fontStyle:[i.props.fontStretch,i.props.fontStyle,i.props.fontWeight].join(" "),textColor:xl(i.props.color),offsetY:i.props.offsetY,wordWrap:i.props.contain!=="none",wordWrapWidth:i.props.contain==="none"?void 0:i.props.width,letterSpacing:i.props.letterSpacing,lineHeight:i.props.lineHeight??null,maxLines:i.props.maxLines,maxHeight:i.props.contain==="both"?i.props.height-i.props.offsetY:null,textBaseline:i.props.textBaseline,verticalAlign:i.props.verticalAlign,overflowSuffix:i.props.overflowSuffix,w:i.props.contain!=="none"?i.props.width:void 0},i.renderInfo=i.lightning2TextRenderer.calculateRenderInfo(),i.renderInfo}renderQuads(){}destroyState(i){i.status!=="destroyed"&&(super.destroyState(i),i.textureNode&&(i.textureNode.destroy(),delete i.textureNode),delete i.renderInfo)}invalidateLayoutCache(i){i.renderInfo=void 0,this.setStatus(i,"loading"),this.scheduleUpdateState(i)}onFontLoaded(i,l){var d;l!==((d=i.fontInfo)==null?void 0:d.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,this.scheduleUpdateState(i))}onFontLoadError(i,l,d){var y;l!==((y=i.fontInfo)==null?void 0:y.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${i.fontInfo.cssString}'`,d),this.scheduleUpdateState(i))}}const pC={isWhite:!0,a:1,r:255,g:255,b:255};function J0(c){if(c===4294967295)return pC;const r=(c>>>24&255)/255,i=c>>>16&255&255,l=c>>>8&255&255,d=c&255&255;return{isWhite:!1,a:r,r:d,g:l,b:i}}function mC(c){if(c===4294967295)return pC;const r=c>>>24&255,i=c>>>16&255&255,l=c>>>8&255&255,d=(c&255&255)/255;return{isWhite:!1,r,g:i,b:l,a:d}}function ba({a:c,r,g:i,b:l}){return`rgba(${r},${i},${l},${c})`}class TR extends uC{constructor(){super(...arguments);P(this,"image");P(this,"tintCache")}load(){this.textureSource.setState("loading"),this.onLoadRequest().then(i=>{this.textureSource.setState("loaded",i),this.updateMemSize()}).catch(i=>{this.textureSource.setState("failed",i)})}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0)}updateMemSize(){const i=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:l,height:d}=this.textureSource.dimensions;this.setTextureMemUse(l*d*i)}}hasImage(){return this.image!==void 0}getImage(i){var x;const l=this.image;if(it(l,"Attempt to get unloaded image texture"),i.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),l;const d=ba(i);if(((x=this.tintCache)==null?void 0:x.key)===d)return this.tintCache.image;const y=this.tintTexture(l,d);return this.tintCache={key:d,image:y},this.updateMemSize(),y}tintTexture(i,l){const{width:d,height:y}=i,x=document.createElement("canvas");x.width=d,x.height=y;const s=x.getContext("2d");return s&&(s.fillStyle=l,s.globalCompositeOperation="copy",s.fillRect(0,0,d,y),s.globalCompositeOperation="multiply",s.drawImage(i,0,0,d,y,0,0,d,y),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0,d,y,0,0,d,y)),x}async onLoadRequest(){var l,d;it((d=(l=this.textureSource)==null?void 0:l.textureData)==null?void 0:d.data,"Texture data is null");const{data:i}=this.textureSource.textureData;if(i instanceof ImageData){const y=document.createElement("canvas");y.width=i.width,y.height=i.height;const x=y.getContext("2d");return x&&x.putImageData(i,0,0),this.image=y,{width:i.width,height:i.height}}else if(typeof ImageBitmap<"u"&&i instanceof ImageBitmap||i instanceof HTMLImageElement)return this.image=i,{width:i.width,height:i.height};return{width:0,height:0}}}function ER(c){var r,i;if(c.shader instanceof Mh){const l=c.shader.shType;if(l===$M)return((r=c.shaderProps)==null?void 0:r.radius)??0;if(l==="DynamicShader"){const d=(i=c.shaderProps)==null?void 0:i.effects;if(d){const y=d.find(x=>{var s;return x.type==="radius"&&((s=x==null?void 0:x.props)==null?void 0:s.radius)});return y&&y.type==="radius"&&y.props.radius||0}}}return 0}function Qu(c,r=""){var i;if(c.shader instanceof Mh&&c.shader.shType==="DynamicShader"){const d=(i=c.shaderProps)==null?void 0:i.effects;if(d&&d.length){const y=d.find(x=>x.type===`border${r}`&&x.props&&x.props.width);return y&&y.props}}}function AS(c,r,i,l,d){if(Object.getPrototypeOf(this).roundRect)this.roundRect(c,r,i,l,d);else{const x=m=>{const C=Math.min(i/2,l/2),w=m.topLeft+m.topRight+m.bottomRight+m.bottomLeft;if(w>i||w>l){const v=C/Math.max(m.topLeft,m.topRight,m.bottomRight,m.bottomLeft);m.topLeft*=v,m.topRight*=v,m.bottomRight*=v,m.bottomLeft*=v}},s=typeof d=="number"?{topLeft:d,topRight:d,bottomRight:d,bottomLeft:d}:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,...d};x(s),this.moveTo(c+s.topLeft,r),this.lineTo(c+i-s.topRight,r),this.ellipse(c+i-s.topRight,r+s.topRight,s.topRight,s.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(c+i,r+l-s.bottomRight),this.ellipse(c+i-s.bottomRight,r+l-s.bottomRight,s.bottomRight,s.bottomRight,0,0,.5*Math.PI),this.lineTo(c+s.bottomLeft,r+l),this.ellipse(c+s.bottomLeft,r+l-s.bottomLeft,s.bottomLeft,s.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(c,r+s.topLeft),this.ellipse(c+s.topLeft,r+s.topLeft,s.topLeft,s.topLeft,0,Math.PI,1.5*Math.PI)}}function nh(c,r,i,l,d,y=0,x,s){if(!y)return;let m,C=0,w,v=0;switch(s){case"Top":m=r,C=i,w=l+r,v=i;break;case"Right":m=r+l,C=i,w=r+l,v=i+d;break;case"Bottom":m=r,C=i+d,w=r+l,v=i+d;break;case"Left":m=r,C=i,w=r,v=i+d;break}c.beginPath(),c.lineWidth=y,c.strokeStyle=ba(mC(x??0)),c.moveTo(m,C),c.lineTo(w,v),c.stroke()}class bR extends lC{constructor(i){super(i);P(this,"context");P(this,"canvas");P(this,"pixelRatio");P(this,"clearColor");P(this,"renderToTextureActive",!1);P(this,"activeRttNode",null);P(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:l,pixelRatio:d,clearColor:y}=i;this.canvas=l,this.context=l.getContext("2d"),this.pixelRatio=d,this.clearColor=y?cS(y):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new Mh("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const i=this.context;if(this.clearColor){const[l,d,y,x]=this.clearColor;i.fillStyle=`rgba(${l}, ${d}, ${y}, ${x/255})`,i.fillRect(0,0,this.canvas.width,this.canvas.height)}i.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(i){const l=this.context,{tx:d,ty:y,width:x,height:s,alpha:m,colorTl:C,colorTr:w,colorBr:v,ta:I,tb:O,tc:T,td:L,clippingRect:j}=i;let U=i.texture,V,z;const G=U==null?void 0:U.type;if(it(G,"Texture type is not defined"),G!==Gn.image&&G!==Gn.color&&G!==Gn.subTexture&&G!==Gn.noise||U&&(U instanceof ml&&(z=U.props,U=U.parentTexture),V=U.ctxTexture,U.state==="freed"||U.state!=="loaded"))return;const Q=J0(C),te=I!==1,le=j.width!==0&&j.height!==0,he=C!==w||C!==v,fe=!!i.shader,k=fe?ER(i):0,q=fe?Qu(i):void 0;if((te||le||k)&&l.save(),le){const Y=new Path2D,{x:Z,y:K,width:ee,height:re}=j;Y.rect(Z,K,ee,re),l.clip(Y)}if(te){const Y=this.pixelRatio;l.setTransform(I,T,O,L,d*Y,y*Y),l.scale(Y,Y),l.translate(-d,-y)}if(k){const Y=new Path2D;AS.call(Y,d,y,x,s,k),l.clip(Y)}if((G===Gn.image||G===Gn.subTexture||G===Gn.noise)&&V){const Y=V.getImage(Q);if(l.globalAlpha=Q.a??m,z)l.drawImage(Y,z.x,z.y,z.width,z.height,d,y,x,s);else try{l.drawImage(Y,d,y,x,s)}catch{}l.globalAlpha=1}else if(G===Gn.color&&he){let Y=d,Z=y,K;C===w?(Y=d,Z=y+s,K=J0(v)):(Y=d+x,Z=y,K=J0(w));const ee=l.createLinearGradient(d,y,Y,Z);ee.addColorStop(0,ba(Q)),ee.addColorStop(1,ba(K)),l.fillStyle=ee,l.fillRect(d,y,x,s)}else G===Gn.color&&(l.fillStyle=ba(Q),l.fillRect(d,y,x,s));if(q&&q.width){const Y=q.width,Z=q.width/2,K=ba(mC(q.color??0));l.beginPath(),l.lineWidth=Y,l.strokeStyle=K,l.globalAlpha=m,k?(AS.call(l,d+Z,y+Z,x-Y,s-Y,k),l.stroke()):l.strokeRect(d+Z,y+Z,x-Y,s-Y),l.globalAlpha=1}else if(fe){const Y=Qu(i,"Top"),Z=Qu(i,"Right"),K=Qu(i,"Bottom"),ee=Qu(i,"Left");Y&&nh(l,d,y,x,s,Y.width,Y.color,"Top"),Z&&nh(l,d,y,x,s,Z.width,Z.color,"Right"),K&&nh(l,d,y,x,s,K.width,K.color,"Bottom"),ee&&nh(l,d,y,x,s,ee.width,ee.color,"Left")}(te||le||k)&&l.restore()}createCtxTexture(i){return new TR(this.txMemManager,i)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(i){}renderToTexture(i){}getBufferInfo(){return null}updateClearColor(i){this.clearColor=i?cS(i):void 0}}const al={alpha:c=>c===1?null:{prop:"opacity",value:`${c}`},x:c=>({prop:"left",value:`${c}px`}),y:c=>({prop:"top",value:`${c}px`}),width:c=>c===0?null:{prop:"width",value:`${c}px`},height:c=>c===0?null:{prop:"height",value:`${c}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:c=>c===!1?null:{prop:"overflow",value:c?"hidden":"visible"},rotation:c=>c===0?null:{prop:"transform",value:`rotate(${c}rad)`},scale:c=>c===1?null:{prop:"transform",value:`scale(${c})`},scaleX:c=>c===1?null:{prop:"transform",value:`scaleX(${c})`},scaleY:c=>c===1?null:{prop:"transform",value:`scaleY(${c})`},color:c=>c===0?null:{prop:"color",value:gC(c)}},gC=c=>{const r=(c&255)/255,i=c>>8&255,l=c>>16&255;return`rgba(${c>>24&255},${l},${i},${r})`},xm={id:"test-id"},AR=new Set([...Object.keys(al),...Object.keys(xm),"src","parent","data"]);class kR{constructor(r,i){P(this,"root",null);P(this,"canvas",null);P(this,"height",1080);P(this,"width",1920);P(this,"scaleX",1);P(this,"scaleY",1);if(La())return;if(!i)throw new Error("settings is required");this.height=Math.ceil(i.appHeight??1080/(i.deviceLogicalPixelRatio??1)),this.width=Math.ceil(i.appWidth??1920/(i.deviceLogicalPixelRatio??1)),this.scaleX=i.deviceLogicalPixelRatio??1,this.scaleY=i.deviceLogicalPixelRatio??1,this.canvas=r,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(r,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(r),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const r=this.canvas.getBoundingClientRect(),i=document.documentElement.scrollTop+r.top,l=document.documentElement.scrollLeft+r.left;this.root.id="root",this.root.style.left=`${l}px`,this.root.style.top=`${i}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(r,i){const l=document.createElement("div");l.style.position="absolute",l.id=r.toString();for(const d in i)this.updateNodeProperty(l,d,i[d],i);return l}createNode(r){const i=this.createDiv(r.id,r.props);return i.node=r,r.div=i,r.on("inViewport",()=>i.setAttribute("state","inViewport")),r.on("inBounds",()=>i.setAttribute("state","inBounds")),r.on("outOfBounds",()=>i.setAttribute("state","outOfBounds")),this.createProxy(r,i)}createTextNode(r){const i=this.createDiv(r.id,r.props);return i.node=r,r.div=i,this.createProxy(r,i)}createProxy(r,i){AR.forEach(y=>{let x=Object.getOwnPropertyDescriptor(r,y);if(x===void 0){const s=Object.getPrototypeOf(r);x=Object.getOwnPropertyDescriptor(s,y)}x!==void 0&&Object.defineProperty(r,y,{get(){var s;return(s=x==null?void 0:x.get)==null?void 0:s.call(r)},set:s=>{var m;(m=x==null?void 0:x.set)==null||m.call(r,s),this.updateNodeProperty(i,y,s,r.props)},configurable:!0,enumerable:!0})});const l=r.destroy;Object.defineProperty(r,"destroy",{value:()=>{this.destroyNode(r.id),l.call(r)}});const d=r.animate;return Object.defineProperty(r,"animate",{value:(y,x)=>{const s=d.call(r,y,x),m=s.start.bind(s);return s.start=()=>(this.animateNode(i,y,x),m()),s}}),r}destroyNode(r){const i=document.getElementById(r.toString());i==null||i.remove()}updateNodeProperty(r,i,l,d){var y;if(!(this.root===null||l===void 0||l===null)){if(i==="parent"){const x=l.id;if(x===1){this.root.appendChild(r);return}const s=document.getElementById(x.toString());s==null||s.appendChild(r);return}if(i==="text"){r.innerHTML=String(l),r.style.visibility="hidden";return}if(i==="src"&&l){r.setAttribute("data-src",String(l));return}if(al[i]){const x=(y=al[i])==null?void 0:y.call(al,l);if(x===null)return;if(typeof x=="string"){r.style.setProperty(x,String(l));return}if(typeof x=="object"){let s=x.value;if(i==="x"){const m=d.mountX,C=d.width;m&&(s=`${parseInt(s)-C*m}px`)}else if(i==="y"){const m=d.mountY,C=d.height;m&&(s=`${parseInt(s)-C*m}px`)}r.style.setProperty(x.prop,s)}return}if(xm[i]){const x=xm[i];if(!x)return;r.setAttribute(String(x),String(l));return}if(i==="data"){for(const x in l){const s=l[x];s===void 0?r.removeAttribute(`data-${x}`):r.setAttribute(`data-${x}`,String(s))}return}}}animateNode(r,i,l){const{duration:d=1e3,delay:y=0}=l,{x,y:s,width:m,height:C,alpha:w=1,rotation:v=0,scale:I=1,color:O,mountX:T,mountY:L}=i;function j(){setTimeout(()=>{r.style.top=`${s-C*L}px`,r.style.left=`${x-m*T}px`,r.style.width=`${m}px`,r.style.height=`${C}px`,r.style.opacity=`${w}`,r.style.rotate=`${v}rad`,r.style.scale=`${I}`,r.style.color=gC(O)},d)}setTimeout(j,y)}}const yC=50,kS={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},IR={low:.66666667,medium:.85,high:1,retina:2},MR=()=>{const c=go.stage;io.get("fonts",[]).forEach(r=>{r.type==="sdf"||r.type==="msdf"?(!r.png&&r.file&&(r.png=r.file.replace(/\.[^.]+$/,`.${r.type}.png`)),!r.json&&r.file&&(r.json=r.file.replace(/\.[^.]+$/,`.${r.type}.json`)),c.fontManager.addFontFace(new vm(r.type,{fontFamily:r.family,descriptors:{},atlasUrl:r.png,atlasDataUrl:r.json,stage:c,metrics:r.metrics}))):r.type==="web"&&c.fontManager.addFontFace(new dh({fontFamily:r.family,fontUrl:r.file,descriptors:{},metrics:r.metrics}))})},RR=()=>{const c=go.stage;io.get("shaders",[]).forEach(r=>{c.shManager.registerShaderType(r.name,r.type)}),io.get("effects",[]).forEach(r=>{c.shManager.registerShaderType(r.name,r.type)})};let go={};const _R=c=>{const r="renderMode"in c?c.renderMode:"webgl";if(r==="webgl")return Rm;if(r==="canvas")return bR},LR=c=>{const r="renderMode"in c?c.renderMode:"webgl";if(r==="webgl")return[xR,bS];if(r==="canvas")return[bS]},PR=(c,r,i={})=>{go=new ZM({appWidth:i.w||1920,appHeight:i.h||1080,fpsUpdateInterval:i.fpsInterval||1e3,devicePhysicalPixelRatio:IR[i.renderQuality]||i.renderQuality||1,deviceLogicalPixelRatio:i.pixelRatio||kS[i.screenResolution]||kS[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in i?i.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:i.canvasColor&&ka.normalize(i.canvasColor)||0,inspector:i.inspector===!0?kR:void 0,boundsMargin:i.viewportMargin||0,txMemByteThreshold:"gpuMemoryLimit"in i?i.gpuMemoryLimit*1024*1024:200*1024*1024,renderEngine:_R(i),fontEngines:LR(i),canvas:i.canvas,textureProcessingTimeLimit:i.textureProcessingTimeLimit},r);const l=()=>{let d=c();d.quit=()=>{an.info("Closing App"),d.destroy(),d=null,go=null}};return RR(),MR(),l(),go},DR=(c,r)=>{if(c===void 0)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if(typeof c=="number")return{start:c,end:c,oppositeStart:c,oppositeEnd:c};if(Ir(c)===!0&&(c=Mr(c)),typeof c=="object"){const{top:i=void 0,right:l=void 0,bottom:d=void 0,left:y=void 0,x=0,y:s=0}=c;return r==="vertical"?{start:i!==void 0?i:s,end:d!==void 0?d:s,oppositeStart:y!==void 0?y:x,oppositeEnd:l!==void 0?l:x}:{start:y!==void 0?y:x,end:l!==void 0?l:x,oppositeStart:i!==void 0?i:s,oppositeEnd:d!==void 0?d:s}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}},OR=function(c){const r=c.direction==="vertical"?"y":"x",i=c.direction==="vertical"?"x":"y",l=c.direction==="vertical"?"mountX":"mountY",d=c.direction==="vertical"?"height":"width",y=c.direction==="vertical"?"width":"height",x=DR(c.padding,c.direction);let s=x.start;const m=this.node.children,C=m.length;let w=0;const v=c.gap||0;for(let O=0;O<C;O++){const T=m[O];T[r]=s,T[i]=x.oppositeStart,d==="width"?s+=T.width+(T.width!==("text"in T?1:0)?v:0):s+="text"in T?T.width>1?T.height+v:0:T.height!==0?T.height+v:0,w=Math.max(w,T[y]+x.oppositeStart+x.oppositeEnd)}this.node[d]=s-v+x.end,this.node[y]=w;const I={start:0,end:1,center:.5}[c["align-items"]||"start"];if(I!==0)for(let O=0;O<C;O++){const T=m[O];T[i]=w,T[l]=I}c["@updated"]!==void 0&&c["@updated"]({w:this.node.width,h:this.node.height},this)},IS=c=>c!==null&&typeof c=="object"&&"transition"in c,Ir=c=>typeof c=="string"&&c.startsWith("{")&&c.endsWith("}"),Mr=c=>JSON.parse(c.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),da=function(c,r){return typeof c!="string"?c:c.indexOf("%")===c.length-1?this.element.config.parent&&(this.element.config.parent.node[r]||0)*(parseFloat(c)/100)||0:c},wm=c=>{if(typeof c!="object"||c===null)return c;if(c.constructor===Object){if("value"in c)return c.value;if("transition"in c)return wm(c.transition)}return c},NR={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let Sm=null;const UR={set parent(c){this.props.parent=c==="root"?go.root:c.node},set rotation(c){this.props.rotation=c*(Math.PI/180)},set w(c){this.props.width=da.call(this,c,"width")},set width(c){this.props.width=da.call(this,c,"width")},set h(c){this.props.height=da.call(this,c,"height")},set height(c){this.props.height=da.call(this,c,"height")},set x(c){this.props.x=da.call(this,c,"width")},set y(c){this.props.y=da.call(this,c,"height")},set z(c){this.props.zIndex=c},set zIndex(c){this.props.zIndex=c},set color(c){typeof c=="string"&&c.startsWith("{")===!1?this.props.color=ka.normalize(c):(typeof c=="object"||Ir(c)===!0&&(c=Mr(c)))&&(this.props.color=0,Object.entries(c).forEach(r=>{this.props[NR[r[0]]]=ka.normalize(r[1])}))},set src(c){this.props.src=c,this.raw.color===void 0&&(this.props.color=this.props.src?4294967295:0),!("w"in this.raw)&&!("w"in this.raw)&&!("h"in this.raw)&&!("height"in this.raw)&&(this.props.autosize=!0)},set texture(c){this.props.texture=c,this.raw.color===void 0&&c==null?this.props.color=0:this.raw.color===void 0&&(this.props.color=4294967295)},set fit(c){const r={};if(c==="cover"||c==="contain"){this.props.textureOptions={resizeMode:{type:c}};return}(typeof c=="object"||Ir(c)===!0&&(c=Mr(c)))&&(r.type=c.type||"cover",typeof c.position=="number"&&(r.clipY=r.clipX=c.position),typeof c.position=="object"&&(r.clipX="x"in c.position?c.position.x:null,r.clipY="y"in c.position?c.position.y:null),this.props.textureOptions={resizeMode:r})},set rtt(c){this.props.rtt=c,this.raw.color===void 0&&(this.props.color=c===!0?4294967295:0)},set mount(c){typeof c=="object"||Ir(c)===!0&&(c=Mr(c))?("x"in c&&(this.props.mountX=c.x),"y"in c&&(this.props.mountY=c.y)):(this.props.mountX=c,this.props.mountY=c)},set pivot(c){typeof c=="object"||Ir(c)===!0&&(c=Mr(c))?("x"in c&&(this.props.pivotX=c.x),"y"in c&&(this.props.pivotY=c.y)):(this.props.pivotX=c,this.props.pivotY=c)},set scale(c){typeof c=="object"||Ir(c)===!0&&(c=Mr(c))?("x"in c&&(this.props.scaleX=c.x),"y"in c&&(this.props.scaleY=c.y)):this.props.scale=c},set show(c){c?(this.props.alpha=this.raw.alpha!==void 0?this.raw.alpha:1,this.props.width=this.raw.w||this.raw.width||0,this.props.height=this.raw.h||this.raw.height||0):(this.props.alpha=0,this.props.width=0,this.props.height=0)},set alpha(c){(this.raw.show===void 0||this.raw.show===!0)&&(this.props.alpha=c)},set shader(c){c!==null?this.props.shader=go.createShader(c.type,c.props):this.props.shader=go.createShader("DefaultShader")},set effects(c){for(let r=0;r<c.length;r++)c[r].props&&c[r].props.color&&(c[r].props.color=ka.normalize(c[r].props.color));if(this.element.node===void 0)this.props.shader=go.createShader("DynamicShader",{effects:c.map(r=>go.createEffect(r.type,r.props,r.type))});else for(let r=0;r<c.length;r++){const i=this.element.node.shader.props[c[r].type],l=Object.keys(c[r].props);for(let d=0;d<l.length;d++)i[l[d]]=c[r].props[l[d]]}},set clipping(c){this.props.clipping=c},set overflow(c){this.props.clipping=!c},set font(c){this.props.fontFamily=c},set size(c){this.props.fontSize=c},set wordwrap(c){an.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=c,this.props.contain="width"},set maxwidth(c){this.props.width=c,this.props.contain="width"},set maxheight(c){this.props.height=c,this.props.contain="both"},set contain(c){this.props.contain=c},set maxlines(c){this.props.maxLines=c},set textoverflow(c){this.props.overflowSuffix=c===!1?" ":c===!0?void 0:c},set letterspacing(c){this.props.letterSpacing=c||1},set lineheight(c){this.props.lineHeight=c},set align(c){this.props.textAlign=c},set content(c){this.props.text=""+c},set placement(c){let r,i;typeof c=="object"||Ir(c)===!0&&(c=Mr(c))?("x"in c&&(r=c.x),"y"in c&&(i=c.y)):c==="center"||c==="right"?r=c:i=c,r==="center"?(this.x="50%",this.props.mountX=.5):r==="right"&&(this.x="100%",this.props.mountX=1),i==="middle"?(this.y="50%",this.props.mountY=.5):i==="bottom"&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(c){(typeof c=="object"||Ir(c)===!0&&(c=Mr(c)))&&(this.props.data=c)}},BR={populate(c){const r=c;r.node=this.config.node,r[ge.isSlot]===!0&&(this[ge.isSlot]=!0),this.props.element=this,this.props.parent=r.parent||this.config.parent,delete r.parent,this.props.raw=c;const i=Object.keys(r),l=i.length;for(let d=0;d<l;d++){const y=i[d],x=r[y];x!==void 0&&(this.props[y]=wm(x))}this.props.props.color===void 0&&!("__textnode"in r)&&(this.props.props.color=0),this.node=r.__textnode?go.createTextNode({...Sm,...this.props.props}):go.createNode(this.props.props),r["@loaded"]!==void 0&&typeof r["@loaded"]=="function"&&this.node.on("loaded",(d,{type:y,dimensions:x})=>{r["@loaded"]({w:x.width,h:x.height,type:y},this)}),r["@error"]!==void 0&&typeof r["@error"]=="function"&&this.node.on("failed",(d,y)=>{r["@error"](y,this)}),r.__layout===!0&&(this.triggerLayout=OR.bind(this)),this.config.parent.props!==void 0&&this.config.parent.props.__layout===!0&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(c,r){if(r===void 0||this.props.raw[c]===r)return;this.props.raw[c]=r,this.props.props={},this.props[c]=wm(r);const i=Object.keys(this.props.props);if(i.length===1){if(IS(r)===!0)return this.animate(i[0],this.props.props[i[0]],r.transition);this.node[i[0]]=this.props.props[i[0]]}else for(let l=0;l<i.length;l++){if(IS(r)===!0)return this.animate(i[l],this.props.props[i[l]],r.transition);this.node[i[l]]=this.props.props[i[l]]}this.config.parent.props&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},animate(c,r,i){if(this.scheduledTransitions[c]!==void 0&&this.scheduledTransitions[c].f.state==="scheduled"&&this.scheduledTransitions[c].f.stop(),this.node[c]===r)return;const l={};l[c]=r;const d=this.node.animate(l,{duration:typeof i=="object"&&"duration"in i?i.duration:300,easing:typeof i=="object"&&"easing"in i?i.easing:"ease",delay:typeof i=="object"&&"delay"in i?i.delay:0}),y=this.node[c];if(this.scheduledTransitions[c]={v:l[c],f:d},i.start!==void 0&&typeof i.start=="function"&&d.once("animating",()=>{i.start.call(this.component,this,c,y)}),this.config.parent.props&&this.config.parent.props.__layout===!0&&d.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),i.progress!==void 0&&typeof i.progress=="function"){let x=0;d.on("tick",(s,{progress:m})=>{i.progress.call(this.component,this,c,m,x),x=m})}d.once("stopped",()=>{this.scheduledTransitions[c]!==void 0&&this.scheduledTransitions[c].canceled===!0||(i.end&&typeof i.end=="function"&&i.end.call(this.component,this,c,this.node[c]),delete this.scheduledTransitions[c])}),d.start()},destroy(){an.debug("Deleting  Node",this.nodeId),this.node.destroy();const c=Object.keys(this.scheduledTransitions);for(let r=0;r<c.length;r++){const i=this.scheduledTransitions[c[r]];i!==void 0&&(i.canceled=!0,i.f!==void 0&&i.f.stop())}},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){return this.component[ge.getChildren]().filter(c=>c.parent===(this[ge.isSlot]?this.node.children[0]:this.node))}},jR=(c,r)=>(Sm===null&&(Sm={fontSize:32,fontFamily:io.get("defaultFont","sans-serif")}),Object.assign(Object.create(BR),{props:Object.assign(Object.create(UR),{props:{}}),scheduledTransitions:{},config:c,component:r})),MS={Element:jR,Launch:PR},FR="@lightningjs/blits",$R="1.19.1",zR="Blits: The Lightning 3 App Development Framework",VR="bin/index.js",HR={".":"./index.js","./vite":"./vite/index.js","./transitions":"./src/router/transitions/index.js","./precompiler":"./src/lib/precompiler/precompiler.js","./plugins":"./src/plugins/index.js","./symbols":"./src/lib/symbols.js","./blitsFileConverter":"./src/lib/blitsfileconverter/blitsfileconverter.js"},GR={test:"c8 npm run test:run","test:run":"node -r global-jsdom/register ./node_modules/.bin/tape '{,!(node_modules|packages)/**/}*.test.js' | tap-diff",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",prepublishOnly:"node scripts/prepublishOnly.js",postpublish:"node scripts/postpublish.js"},XR="./index.d.ts",WR={hooks:{"pre-commit":"lint-staged"}},YR="module",qR="Michiel van der Geest <hello@michielvandergeest.com>",KR="Apache-2.0",QR={"@babel/eslint-parser":"^7.26.5","@babel/plugin-syntax-import-assertions":"^7.26.0","babel-eslint":"^10.1.0",c8:"^8.0.1",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","global-jsdom":"24.0.0",husky:"^7.0.4",jsdom:"24.0.0","lint-staged":"^12.3.3",prettier:"^2.5.1","tap-diff":"^0.1.1",tape:"^5.5.0"},ZR={"@lightningjs/msdf-generator":"^1.1.1","@lightningjs/renderer":"^2.11.1"},JR={type:"git",url:"https://github.com/lightning-js/blits.git"},RS={name:FR,version:$R,description:zR,bin:VR,exports:HR,scripts:GR,types:XR,"lint-staged":{"*.js":["eslint --fix"]},husky:WR,type:YR,author:qR,license:KR,devDependencies:QR,dependencies:ZR,repository:JR};let gl={};const _m={},e5=(c,r,i)=>{io.set(i),$I(),an.info("Blits Version ",RS.version),an.info("Renderer Version ",RS.dependencies["@lightningjs/renderer"]),_m.element=MS.Element,gl=MS.Launch(c,r,i)},t5={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},_r=window.speechSynthesis,n5=()=>(window.navigator||{}).userAgent||"",_S=()=>/android/i.test(n5());let vC=!1,Eh=null;const Lm=()=>Eh&&clearTimeout(Eh),Cm=c=>{if(!c||Eh)return Lm();_r.pause(),_r.resume(),Eh=setTimeout(()=>{Cm(c)},5e3)},Ca={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},i5=()=>{Ca.voice=_r.getVoices()[0],vC=!0},o5=(c,r)=>{const i=new SpeechSynthesisUtterance(r.value);i.lang=r.lang||Ca.lang,i.pitch=r.pitch||Ca.pitch,i.rate=r.rate||Ca.rate,i.voice=r.voice||Ca.voice,i.volume=r.volume||Ca.volume,i.onstart=()=>{_S()||Cm(i),c.onstart()},i.onresume=()=>{_S()||Cm(i),c.onresume()},i.onpause=()=>{c.onpause()},i.onend=()=>{c.onend()},i.onerror=()=>{Lm(),c.onerror()},_r.speak(i)},ph={speak(c){vC||i5(),this.cancel(),o5(this,c)},resume(){_r.resume()},pause(){_r.pause()},cancel(){_r.cancel(),Lm()},getVoices(){return _r.getVoices()},onend(){},onerror(){},onstart(){},onresume(){},onpause(){}};let LS;const Pm=(c,r="off")=>{clearTimeout(LS),ph.cancel(),r==="assertive"?ph.speak({value:c}):LS=setTimeout(()=>{ph.speak({value:c})},400)},r5=c=>Pm(c,"polite"),s5=c=>Pm(c,"assertive"),a5=()=>{ph.cancel()},xC={speak:Pm,polite:r5,assertive:s5,stop:a5};let Lr;const Ra=dl({path:null,navigating:!1}),wC=new WeakMap,SC=[];let CC={},TC={},Tm=!1,EC;const u5=()=>{const c=(document.location.hash||"/").replace(/^#/,"").split("?");return{hash:c[0],queryParams:new URLSearchParams(c[1])}},PS=c=>c.replace(/^\/+|\/+$/g,"").toLowerCase(),l5=c=>typeof c=="object"&&c!==null,f5=c=>typeof c=="string",bC=(c,r=[])=>{const i=c;c=PS(c);let l=!1,d=0;for(;!l&&d<r.length;){const y=r[d];if(y.path=PS(y.path),y.path===c)y.params={},l=y;else if(y.path.indexOf(":")>-1){const x=[...y.path.matchAll(/:([^\s/]+)/gi)];let s=y.path;x.reverse().forEach(C=>{s=s.substring(0,C.index)+"([^\\s/]+)"+s.substring(C.index+C[0].length)});const m=i.match(new RegExp(`${s}`,"i"));m&&(y.params=x.reverse().reduce((C,w,v)=>(C[w[1]]=m[v+1],C),{}),l=y)}else if(y.path.endsWith("*")){const x=new RegExp(y.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),s=c.match(x);s&&(s[1]&&(y.params={path:s[1]}),l=y)}d++}return l&&(l.options={...l.options,...CC},l.data||(l.data={}),Lr=l),l},c5=async function(){if(Ra.navigating=!0,this.parent[ge.routes]){const c=Lr,{hash:r,queryParams:i}=u5();let l=bC(r,this.parent[ge.routes]),d;if(l){if(l.hooks&&l.hooks.before&&(d=await l.hooks.before.call(this.parent,l,c),f5(d))){Lr=c,yl(d);return}l=l5(d)?d:l,Tm===!1&&c&&c.options.inHistory===!0&&SC.push(c),"transition"in l||(l.transition=t5),typeof l.transition=="function"&&(l.transition=l.transition(c,l));let y,{view:x,focus:s}=wC.get(l)||{};if(x){y=x[ge.holder];let C=!1;if(l.transition.before)if(Array.isArray(l.transition.before)){for(let w=0;w<l.transition.before.length;w++)if(l.transition.before[w].prop==="alpha"){C=!0;break}}else l.transition.before.prop==="alpha"&&(C=!0);C===!1&&y.set("alpha",1)}else{y=_m.element({parent:this[ge.children][0]}),y.populate({}),y.set("w","100%"),y.set("h","100%");const C={},w=[...i.entries()];for(let I=0;I<w.length;I++)C[w[I][0]]=w[I][1];const v={...this[ge.props],...l.params,...TC,...l.data,...C};x=await l.component({props:v},y,this),x[Symbol.toStringTag]==="Module"&&(x.default&&typeof x.default=="function"?x=x.default({props:v},y,this):an.error("Dynamic import doesn't have a default export or default is not a function")),typeof x=="function"&&(x=x({props:v},y,this))}if(this[ge.children].push(x),EC=Aa.get(),s?s.$focus():x.$focus(),l.transition.before)if(Array.isArray(l.transition.before))for(let C=0;C<l.transition.before.length;C++)y.set(l.transition.before[C].prop,l.transition.before[C].value);else y.set(l.transition.before.prop,l.transition.before.value);let m=!1;if(c){m=!0;const C=this[ge.children].splice(1,1).pop();C&&h5(c,C,l.transition.out)}if(Ra.path=l.path,l.transition.in)if(Array.isArray(l.transition.in))for(let C=0;C<l.transition.in.length;C++)C===l.transition.length-1?await _a(y,l.transition.in[C],m):_a(y,l.transition.in[C],m);else await _a(y,l.transition.in,m);l.announce&&(typeof l.announce=="string"&&(l.announce={message:l.announce}),xC.speak(l.announce.message,l.announce.politeness)),this.activeView=this[ge.children][this[ge.children].length-1]}else an.error(`Route ${r} not found`)}Tm=!1,Ra.navigating=!1},h5=async(c,r,i)=>{if(i)if(Array.isArray(i))for(let l=0;l<i.length;l++)l===i.length-1?await _a(r[ge.holder],i[l]):_a(r[ge.holder],i[l]);else await _a(r[ge.holder],i);c.options&&c.options.keepAlive===!0?wC.set(c,{view:r,focus:EC}):(r.destroy(),r=null)},_a=(c,r,i=!0)=>new Promise(l=>{if(i){const d=r.end;r.end=d?(...y)=>{d(...y),l()}:l,c.set(r.prop,{transition:r})}else c.set(r.prop,r.value),l()}),yl=(c,r={},i={})=>{TC=r,CC=i,window.location.hash=`#${c}`},AC=function(){const c=SC.pop();if(c&&Lr!==c){Tm=!0;let y=c.path;return y.indexOf(":")>-1&&Object.keys(c.params).forEach(x=>{y=y.replace(`:${x}`,c.params[x])}),yl(y),!0}const r=Lr&&Lr.options.backtrack||!1;if(r===!1)return!1;const i=/(\/:?[\w%\s-]+)$/;let l=Lr.path,d=l.split("/").length;if(d<=1)return!1;for(;d--;){if(!i.test(l))return!1;l=l.replace(i,"");const y=bC(l,this.parent[ge.routes]);if(y&&r)return yl(y.path),!0}return!1},em={navigate:c5,to:yl,back:AC};let ur=null,ih=[],DS;const Em=new Map,Aa={_hold:!1,set hold(c){this._hold=c},get hold(){return this._hold},get(){return ur},set(c,r){c!==ur&&(clearTimeout(DS),ur&&ur!==c.parent&&ur.unfocus(),ih.reverse().forEach(i=>i.unfocus()),c!==ur&&(DS=setTimeout(()=>{ur=c,ur.lifecycle.state="focus",r instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",r)):ih=[]},this.hold?io.get("holdTimeout",yC):0)))},input(c,r){if(Ra.navigating===!0)return;ih=kC([ur],c);const i=ih.shift();if(i){let l;i[ge.inputEvents][c]?l=i[ge.inputEvents][c].call(i,r):i[ge.inputEvents].any&&(l=i[ge.inputEvents].any.call(i,r)),l!==void 0&&Em.set(r.code,l)}}},kC=(c,r)=>c[0][ge.inputEvents]&&(typeof c[0][ge.inputEvents][r]=="function"||typeof c[0][ge.inputEvents].any=="function")?c:c[0].parent?(c.unshift(c[0].parent),kC(c,r)):[],is=new Map,pa=new Map,mh={registerListener(c,r,i,l=0){let d=is.get(r);d===void 0&&(d=new Map,is.set(r,d));let y=d.get(c);y===void 0&&(y=new Set,d.set(c,y)),y.add({cb:i,priority:l}),pa.delete(r)},deregisterListener(c,r){let i=is.get(r);i!==void 0&&i.contains(c)&&(i.delete(c),is.set(r,i),pa.delete(r))},executeListeners(c,r){const i=is.get(c);if(i===void 0||i.size===0)return!0;if(pa.has(c)===!1){const d=[];for(const[y,x]of i)for(const s of x)d.push({...s,component:y});d.sort((y,x)=>x.priority-y.priority),pa.set(c,d)}const l=pa.get(c);for(let d=0;d<l.length;d++){const{cb:y,component:x}=l[d];if(y.call(x,r)===!1)return!1}return!0},removeListeners(c){for(const[r,i]of is)i.has(c)&&(i.delete(c),pa.delete(r),i.size===0&&is.delete(r))}},d5={focus:{value:function(c){return an.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(c)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(c){this[ge.state].hasFocus=!0,Aa.set(this,c)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[ge.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy",this.$clearTimeouts(),this.$clearIntervals(),mh.removeListeners(this),IC(this[ge.children]),uS(this[ge.effects]),an.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},[ge.removeGlobalEffects]:{value:function(c=[]){uS(c)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(c){return an.warn("this.select is deprecated, use this.$select instead"),this.$select(c)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(c){let r=null;return this[ge.children].forEach(i=>{Array.isArray(i)?i.forEach(l=>{l.ref===c&&(r=l)}):Object.getPrototypeOf(i)===Object.prototype?Object.keys(i).forEach(l=>{i[l].ref===c&&(r=i[l])}):i.ref===c&&(r=i)}),r},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(c){return an.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(c)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(c){let r=this[ge.originalState];if(c.indexOf(".")>-1){const i=c.split(".");c=i.pop(i);for(let l=0;l<i.length;l++)r=r[i[l]]}Ma(r,c,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(c,r){return{type:c,props:r}},writable:!1,enumerable:!0,configurable:!1}},IC=function(c){for(let r=0;r<c.length;r++){if(!c[r])return;c[r].destroy&&typeof c[r].destroy=="function"?c[r].destroy():Object.getPrototypeOf(c[r])===Object.prototype&&IC(Object.values(c[r])),c[r]=null}c.length=0},p5={$setTimeout:{value:function(c,r,...i){const l=setTimeout(()=>{this[ge.timeouts]=this[ge.timeouts].filter(d=>d!==l),c.apply(null,i)},r,i);return this[ge.timeouts].push(l),l},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(c){this[ge.timeouts].indexOf(c)>-1&&(this[ge.timeouts]=this[ge.timeouts].filter(r=>r!==c),clearTimeout(c))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let c=0;c<this[ge.timeouts].length;c++)clearTimeout(this[ge.timeouts][c]);this[ge.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(c,r,...i){const l=setInterval(()=>c.apply(null,i),r,i);return this[ge.intervals].push(l),l},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(c){this[ge.intervals].indexOf(c)>-1&&(this[ge.intervals]=this[ge.intervals].filter(r=>r!==c),clearInterval(c))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let c=0;c<this[ge.intervals].length;c++)clearInterval(this[ge.intervals][c]);this[ge.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},m5={$emit:{value:function(c,r){return mh.executeListeners(c,r)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(c,r,i=0){mh.registerListener(this,c,r,i)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(c){mh.deregisterListener(this,c)},writable:!1,enumerable:!0,configurable:!1}},g5={$router:{value:{to:yl,back:AC,get currentRoute(){return Lr},get routes(){return this[ge.routes]},get navigating(){return Ra.navigating},state:Ra},writable:!1,enumerable:!0,configurable:!1}},y5={$announcer:{value:xC,writable:!1,enumerable:!0,configurable:!1}},v5={$size:{value:function(c={w:0,h:0}){this[ge.holder].set("w",c.w||0),this[ge.holder].set("h",c.h||0)},writable:!1,enumerable:!0,configurable:!1},[ge.renderer]:{value:()=>gl,writable:!1,enumerable:!0,configurable:!1},[ge.getChildren]:{value(){const c=this.rootParent||this.parent;return(this[ge.children]||[]).concat(c&&c[ge.getChildren]().map(r=>Object.getPrototypeOf(r)===Object.prototype?Object.values(r).map(i=>(i.forComponent=i.config&&i.config.parent.component,i)):r).flat().filter(r=>{if(r&&r.component)return r.component&&r.component.componentId===this.componentId||r.forComponent&&r.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},Zu=Object.defineProperties({[ge.launched]:!1},{...d5,...p5,...m5,...g5,...y5,...v5}),x5={cast:c=>c,required:!1},w5=(c,r=[])=>{r.indexOf("ref")===-1&&r.push("ref"),c[ge.propKeys]=[];const i=r.length;for(let l=0;l<i;l++){const d={...x5,...typeof r[l]=="object"?r[l]:{key:r[l]}};c[ge.propKeys].push(d.key),Object.defineProperty(c,d.key,{get(){const y=d.cast(this[ge.props]!==void 0&&d.key in this[ge.props]?this[ge.props][d.key]:"default"in d?d.default:void 0);return d.required===!0&&y===void 0&&an.warn(`${d.key} is required`),y},set(y){an.warn(`Warning! Avoid mutating props directly (${d.key})`),this[ge.props][d.key]=y}})}},S5=(c,r)=>{c[ge.methodKeys]=[];for(let i in r)c[ge.propKeys]&&c[ge.propKeys].indexOf(i)>-1?an.error(`${i} already exists as a prop`):(typeof r[i]!="function"&&an.warn(`${i} is not a function`),c[ge.methodKeys].push(i),c[i]=r[i])},C5=(c,r=()=>{})=>{Object.defineProperty(c,ge.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const i=Object.keys(r.apply(c)||{});i.push(["hasFocus"]);const l=i.length;for(let d=0;d<l;d++){const y=i[d];c[ge.propKeys]!==void 0&&c[ge.propKeys].indexOf(y)>-1&&an.error(`State ${y} already exists as a prop`),c[ge.methodKeys]!==void 0&&c[ge.methodKeys].indexOf(y)>-1&&an.error(`State ${y} already exists as a method`),c[ge.stateKeys].push(y),Object.defineProperty(c,y,{get(){return this[ge.state][y]},set(x){this[ge.state][y]=x}})}},T5=(c,r)=>{c[ge.computedKeys]=[];for(let i in r)c[ge.stateKeys]&&c[ge.stateKeys].indexOf(i)>-1?an.error(`${i} already exists as a state variable`):c[ge.propKeys]&&c[ge.propKeys].indexOf(i)>-1?an.error(`${i} already exists as a prop`):c[ge.methodKeys]&&c[ge.methodKeys].indexOf(i)>-1?an.error(`${i} already exists as a method`):(typeof r[i]!="function"&&an.warn(`${i} is not a function`),c[ge.computedKeys].push(i),Object.defineProperty(c,i,{get(){return r[i].apply(this)}}))},E5=(c,r)=>{c[ge.inputEvents]=[],Object.keys(r).forEach(i=>{typeof r[i]!="function"&&an.warn(`${r[i]} is not a function`),c[ge.inputEvents][i]=r[i]})},b5=(c,r)=>{c[ge.routes]=[],Object.keys(r).forEach(i=>{c[ge.routes][i]={...r[i],options:{inHistory:!0,...r[i].options}}})},A5=(c,r)=>{c[ge.watchKeys]=[],c[ge.watchers]={};for(let i in r)typeof r[i]!="function"&&console.warn(`${i} is not a function`),c[ge.watchKeys].push(i),c[ge.watchers][i]=function(l,d){r[i].call(this,l,d)}};let k5=0;function I5(c,r){return c[ge.identifier]=++k5,c[ge.effects]=[],tM(r.hooks,c[ge.identifier]),w5(c,r.props),r.methods&&S5(c,r.methods),C5(c,r.state),r.computed&&T5(c,r.computed),r.watch&&A5(c,r.watch),r.routes&&b5(c,r.routes),r.input&&E5(c,r.input),c}const M5=()=>Da("Circle",{code:{render:function(r,i,l,d,y,x){const s=[],m={};return s[0]=this.element({parent:r||"root"},i),m.color=i.color,m.w=i.size,m.h=i.size,m.effects=[i.shader("radius",{radius:i.radius})],s[0].populate(m),s},effects:[function(r,i,l,d,y,x){i[0].set("color",r.color)},function(r,i,l,d,y,x){i[0].set("w",r.size)},function(r,i,l,d,y,x){i[0].set("h",r.size)},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:r.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let tm=null;const R5=()=>Da("RouterView",{code:{render:function(r,i,l,d,y,x){const s=[],m={};return s[0]=this.element({parent:r||"root"},i),m.w=r.node.width*(100/100),m.height=r.node.height*(100/100),s[0].populate(m),s},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){tm=()=>em.navigate.apply(this),em.navigate.apply(this),window.addEventListener("hashchange",tm)},destroy(){window.removeEventListener("hashchange",tm,!1)},focus(){this.activeView&&this.activeView.$focus()}},input:{back(c){em.back.call(this)===!1&&this.parent.$focus(c)}}}),_5=()=>Da("Sprite",{code:{render:function(r,i,l,d,y,x){const s=[],m={};return s[0]=this.element({parent:r||"root"},i),m.w=r.node.width*(100/100),m.h=r.node.height*(100/100),m.texture=i.texture,m.color=i.color,s[0].populate(m),s},effects:[function(r,i,l,d,y,x){i[0].set("texture",r.texture)},function(r,i,l,d,y,x){i[0].set("color",r.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:null}},computed:{texture(){const c="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture!==null&&c)return this[ge.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:c.x,y:c.y,width:c.w,height:c.h})}},hooks:{ready(){this.spriteTexture=this[ge.renderer]().createTexture("ImageTexture",{src:this.image})}}}),L5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",P5=()=>Da("FPScounter",{code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1),r=s[0];const T={};s[1]=this.element({parent:r||"root"},v===!0?w:i),T.y=15,T.x=20,s[1].populate(T),v===!0&&(I-=1),r=s[1];const L={};s[2]=this.element({parent:r||"root"},v===!0?w:i),s[2].populate(L),v===!0&&(I-=1);const j=l.components&&l.components.Sprite||d.Sprite;r=s[2];const U={};s[3]=this.element({parent:r||"root"},v===!0?w:i),U.image=i.image,U.w=43,U.h=25,U.map=i.sprite,U.frame="fps";const V=[];if(typeof j<"u")for(let dt in j.config.props)delete U[j.config.props[dt]],V.push(j.config.props[dt]);s[3].populate(U),v===!0&&(I-=1),r=s[3];const z={};z.image=i.image,z.w=43,z.h=25,z.map=i.sprite,z.frame="fps",m=z.is||"Sprite";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||d[m],!G)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);s[4]=G.call(null,{props:z},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],w=s[4],v=!0):r=s[4][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[2];const Q={};s[5]=this.element({parent:r||"root"},v===!0?w:i),Q.x=58,Q.y=2,s[5].populate(Q),v===!0&&(I-=1);const te=l.components&&l.components.Sprite||d.Sprite;r=s[5];const le={};s[6]=this.element({parent:r||"root"},v===!0?w:i),le.image=i.image,le.x=0,le.h=20,le.w=20,le.map=i.sprite,le.frame=i.fps[0];const he=[];if(typeof te<"u")for(let dt in te.config.props)delete le[te.config.props[dt]],he.push(te.config.props[dt]);s[6].populate(le),v===!0&&(I-=1),r=s[6];const fe={};fe.image=i.image,fe.x=0,fe.h=20,fe.w=20,fe.map=i.sprite,C=i.fps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),fe.frame=C,m=fe.is||"Sprite";let k;if(typeof m=="string"){if(k=l.components&&l.components[m]||d[m],!k)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(k=m);s[7]=k.call(null,{props:fe},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],w=s[7],v=!0):r=s[7][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const q=l.components&&l.components.Sprite||d.Sprite;r=s[5];const Y={};s[8]=this.element({parent:r||"root"},v===!0?w:i),Y.image=i.image,Y.x=18,Y.h=20,Y.w=20,Y.map=i.sprite,Y.frame=i.fps[1];const Z=[];if(typeof q<"u")for(let dt in q.config.props)delete Y[q.config.props[dt]],Z.push(q.config.props[dt]);s[8].populate(Y),v===!0&&(I-=1),r=s[8];const K={};K.image=i.image,K.x=18,K.h=20,K.w=20,K.map=i.sprite,C=i.fps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),K.frame=C,m=K.is||"Sprite";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||d[m],!ee)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[9]=ee.call(null,{props:K},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],w=s[9],v=!0):r=s[9][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const re=l.components&&l.components.Sprite||d.Sprite;r=s[5];const ce={};s[10]=this.element({parent:r||"root"},v===!0?w:i),ce.image=i.image,ce.x=36,ce.h=20,ce.w=20,ce.map=i.sprite,ce.frame=i.fps[2];const we=[];if(typeof re<"u")for(let dt in re.config.props)delete ce[re.config.props[dt]],we.push(re.config.props[dt]);s[10].populate(ce),v===!0&&(I-=1),r=s[10];const be={};be.image=i.image,be.x=36,be.h=20,be.w=20,be.map=i.sprite,C=i.fps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),be.frame=C,m=be.is||"Sprite";let Te;if(typeof m=="string"){if(Te=l.components&&l.components[m]||d[m],!Te)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Te=m);s[11]=Te.call(null,{props:be},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],w=s[11],v=!0):r=s[11][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[1];const ke={};s[12]=this.element({parent:r||"root"},v===!0?w:i),ke.x=150,s[12].populate(ke),v===!0&&(I-=1);const pe=l.components&&l.components.Sprite||d.Sprite;r=s[12];const Le={};s[13]=this.element({parent:r||"root"},v===!0?w:i),Le.image=i.image,Le.y=2,Le.w=48,Le.h=25,Le.map=i.sprite,Le.frame="avg";const $=[];if(typeof pe<"u")for(let dt in pe.config.props)delete Le[pe.config.props[dt]],$.push(pe.config.props[dt]);s[13].populate(Le),v===!0&&(I-=1),r=s[13];const Ie={};Ie.image=i.image,Ie.y=2,Ie.w=48,Ie.h=25,Ie.map=i.sprite,Ie.frame="avg",m=Ie.is||"Sprite";let Pe;if(typeof m=="string"){if(Pe=l.components&&l.components[m]||d[m],!Pe)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Pe=m);s[14]=Pe.call(null,{props:Ie},s[13],i),s[14][Symbol.for("slots")][0]?(r=s[14][Symbol.for("slots")][0],w=s[14],v=!0):r=s[14][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[12];const $e={};s[15]=this.element({parent:r||"root"},v===!0?w:i),$e.x=63,$e.y=2,s[15].populate($e),v===!0&&(I-=1);const Xe=l.components&&l.components.Sprite||d.Sprite;r=s[15];const et={};s[16]=this.element({parent:r||"root"},v===!0?w:i),et.image=i.image,et.x=0,et.h=20,et.w=20,et.map=i.sprite,et.frame=i.avgFps[0];const We=[];if(typeof Xe<"u")for(let dt in Xe.config.props)delete et[Xe.config.props[dt]],We.push(Xe.config.props[dt]);s[16].populate(et),v===!0&&(I-=1),r=s[16];const nt={};nt.image=i.image,nt.x=0,nt.h=20,nt.w=20,nt.map=i.sprite,C=i.avgFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),nt.frame=C,m=nt.is||"Sprite";let me;if(typeof m=="string"){if(me=l.components&&l.components[m]||d[m],!me)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(me=m);s[17]=me.call(null,{props:nt},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],w=s[17],v=!0):r=s[17][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const wt=l.components&&l.components.Sprite||d.Sprite;r=s[15];const ft={};s[18]=this.element({parent:r||"root"},v===!0?w:i),ft.image=i.image,ft.x=18,ft.h=20,ft.w=20,ft.map=i.sprite,ft.frame=i.avgFps[1];const ot=[];if(typeof wt<"u")for(let dt in wt.config.props)delete ft[wt.config.props[dt]],ot.push(wt.config.props[dt]);s[18].populate(ft),v===!0&&(I-=1),r=s[18];const St={};St.image=i.image,St.x=18,St.h=20,St.w=20,St.map=i.sprite,C=i.avgFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),St.frame=C,m=St.is||"Sprite";let tt;if(typeof m=="string"){if(tt=l.components&&l.components[m]||d[m],!tt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(tt=m);s[19]=tt.call(null,{props:St},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],w=s[19],v=!0):r=s[19][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const rt=l.components&&l.components.Sprite||d.Sprite;r=s[15];const Ge={};s[20]=this.element({parent:r||"root"},v===!0?w:i),Ge.image=i.image,Ge.x=36,Ge.h=20,Ge.w=20,Ge.map=i.sprite,Ge.frame=i.avgFps[2];const ze=[];if(typeof rt<"u")for(let dt in rt.config.props)delete Ge[rt.config.props[dt]],ze.push(rt.config.props[dt]);s[20].populate(Ge),v===!0&&(I-=1),r=s[20];const Oe={};Oe.image=i.image,Oe.x=36,Oe.h=20,Oe.w=20,Oe.map=i.sprite,C=i.avgFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),Oe.frame=C,m=Oe.is||"Sprite";let W;if(typeof m=="string"){if(W=l.components&&l.components[m]||d[m],!W)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[21]=W.call(null,{props:Oe},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],w=s[21],v=!0):r=s[21][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[1];const Ve={};s[22]=this.element({parent:r||"root"},v===!0?w:i),Ve.x=0,Ve.y=40,s[22].populate(Ve),v===!0&&(I-=1);const qe=l.components&&l.components.Sprite||d.Sprite;r=s[22];const ht={};s[23]=this.element({parent:r||"root"},v===!0?w:i),ht.image=i.image,ht.x=-2,ht.w=47,ht.h=25,ht.map=i.sprite,ht.frame="min";const vt=[];if(typeof qe<"u")for(let dt in qe.config.props)delete ht[qe.config.props[dt]],vt.push(qe.config.props[dt]);s[23].populate(ht),v===!0&&(I-=1),r=s[23];const Ae={};Ae.image=i.image,Ae.x=-2,Ae.w=47,Ae.h=25,Ae.map=i.sprite,Ae.frame="min",m=Ae.is||"Sprite";let Ue;if(typeof m=="string"){if(Ue=l.components&&l.components[m]||d[m],!Ue)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);s[24]=Ue.call(null,{props:Ae},s[23],i),s[24][Symbol.for("slots")][0]?(r=s[24][Symbol.for("slots")][0],w=s[24],v=!0):r=s[24][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[22];const Qe={};s[25]=this.element({parent:r||"root"},v===!0?w:i),Qe.x=58,Qe.y=2,s[25].populate(Qe),v===!0&&(I-=1);const Se=l.components&&l.components.Sprite||d.Sprite;r=s[25];const ae={};s[26]=this.element({parent:r||"root"},v===!0?w:i),ae.image=i.image,ae.x=0,ae.h=20,ae.w=20,ae.map=i.sprite,ae.frame=i.minFps[0];const Ne=[];if(typeof Se<"u")for(let dt in Se.config.props)delete ae[Se.config.props[dt]],Ne.push(Se.config.props[dt]);s[26].populate(ae),v===!0&&(I-=1),r=s[26];const xt={};xt.image=i.image,xt.x=0,xt.h=20,xt.w=20,xt.map=i.sprite,C=i.minFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),xt.frame=C,m=xt.is||"Sprite";let Ut;if(typeof m=="string"){if(Ut=l.components&&l.components[m]||d[m],!Ut)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ut=m);s[27]=Ut.call(null,{props:xt},s[26],i),s[27][Symbol.for("slots")][0]?(r=s[27][Symbol.for("slots")][0],w=s[27],v=!0):r=s[27][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Ft=l.components&&l.components.Sprite||d.Sprite;r=s[25];const Tt={};s[28]=this.element({parent:r||"root"},v===!0?w:i),Tt.image=i.image,Tt.x=18,Tt.h=20,Tt.w=20,Tt.map=i.sprite,Tt.frame=i.minFps[1];const Vt=[];if(typeof Ft<"u")for(let dt in Ft.config.props)delete Tt[Ft.config.props[dt]],Vt.push(Ft.config.props[dt]);s[28].populate(Tt),v===!0&&(I-=1),r=s[28];const un={};un.image=i.image,un.x=18,un.h=20,un.w=20,un.map=i.sprite,C=i.minFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),un.frame=C,m=un.is||"Sprite";let li;if(typeof m=="string"){if(li=l.components&&l.components[m]||d[m],!li)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(li=m);s[29]=li.call(null,{props:un},s[28],i),s[29][Symbol.for("slots")][0]?(r=s[29][Symbol.for("slots")][0],w=s[29],v=!0):r=s[29][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Xn=l.components&&l.components.Sprite||d.Sprite;r=s[25];const Nn={};s[30]=this.element({parent:r||"root"},v===!0?w:i),Nn.image=i.image,Nn.x=36,Nn.h=20,Nn.w=20,Nn.map=i.sprite,Nn.frame=i.minFps[2];const Un=[];if(typeof Xn<"u")for(let dt in Xn.config.props)delete Nn[Xn.config.props[dt]],Un.push(Xn.config.props[dt]);s[30].populate(Nn),v===!0&&(I-=1),r=s[30];const bn={};bn.image=i.image,bn.x=36,bn.h=20,bn.w=20,bn.map=i.sprite,C=i.minFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),bn.frame=C,m=bn.is||"Sprite";let Qn;if(typeof m=="string"){if(Qn=l.components&&l.components[m]||d[m],!Qn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Qn=m);s[31]=Qn.call(null,{props:bn},s[30],i),s[31][Symbol.for("slots")][0]?(r=s[31][Symbol.for("slots")][0],w=s[31],v=!0):r=s[31][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[1];const pn={};s[32]=this.element({parent:r||"root"},v===!0?w:i),pn.x=150,pn.y=40,s[32].populate(pn),v===!0&&(I-=1);const Me=l.components&&l.components.Sprite||d.Sprite;r=s[32];const Fe={};s[33]=this.element({parent:r||"root"},v===!0?w:i),Fe.image=i.image,Fe.w=53,Fe.h=25,Fe.map=i.sprite,Fe.frame="max";const Qt=[];if(typeof Me<"u")for(let dt in Me.config.props)delete Fe[Me.config.props[dt]],Qt.push(Me.config.props[dt]);s[33].populate(Fe),v===!0&&(I-=1),r=s[33];const vn={};vn.image=i.image,vn.w=53,vn.h=25,vn.map=i.sprite,vn.frame="max",m=vn.is||"Sprite";let Cn;if(typeof m=="string"){if(Cn=l.components&&l.components[m]||d[m],!Cn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Cn=m);s[34]=Cn.call(null,{props:vn},s[33],i),s[34][Symbol.for("slots")][0]?(r=s[34][Symbol.for("slots")][0],w=s[34],v=!0):r=s[34][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[32];const cn={};s[35]=this.element({parent:r||"root"},v===!0?w:i),cn.x=63,cn.y=2,s[35].populate(cn),v===!0&&(I-=1);const An=l.components&&l.components.Sprite||d.Sprite;r=s[35];const kn={};s[36]=this.element({parent:r||"root"},v===!0?w:i),kn.image=i.image,kn.x=0,kn.h=20,kn.w=20,kn.map=i.sprite,kn.frame=i.maxFps[0];const Fn=[];if(typeof An<"u")for(let dt in An.config.props)delete kn[An.config.props[dt]],Fn.push(An.config.props[dt]);s[36].populate(kn),v===!0&&(I-=1),r=s[36];const Ct={};Ct.image=i.image,Ct.x=0,Ct.h=20,Ct.w=20,Ct.map=i.sprite,C=i.maxFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),Ct.frame=C,m=Ct.is||"Sprite";let Ze;if(typeof m=="string"){if(Ze=l.components&&l.components[m]||d[m],!Ze)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ze=m);s[37]=Ze.call(null,{props:Ct},s[36],i),s[37][Symbol.for("slots")][0]?(r=s[37][Symbol.for("slots")][0],w=s[37],v=!0):r=s[37][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Pn=l.components&&l.components.Sprite||d.Sprite;r=s[35];const Ht={};s[38]=this.element({parent:r||"root"},v===!0?w:i),Ht.image=i.image,Ht.x=18,Ht.h=20,Ht.w=20,Ht.map=i.sprite,Ht.frame=i.maxFps[1];const In=[];if(typeof Pn<"u")for(let dt in Pn.config.props)delete Ht[Pn.config.props[dt]],In.push(Pn.config.props[dt]);s[38].populate(Ht),v===!0&&(I-=1),r=s[38];const hn={};hn.image=i.image,hn.x=18,hn.h=20,hn.w=20,hn.map=i.sprite,C=i.maxFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),hn.frame=C,m=hn.is||"Sprite";let Lt;if(typeof m=="string"){if(Lt=l.components&&l.components[m]||d[m],!Lt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Lt=m);s[39]=Lt.call(null,{props:hn},s[38],i),s[39][Symbol.for("slots")][0]?(r=s[39][Symbol.for("slots")][0],w=s[39],v=!0):r=s[39][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const gi=l.components&&l.components.Sprite||d.Sprite;r=s[35];const xn={};s[40]=this.element({parent:r||"root"},v===!0?w:i),xn.image=i.image,xn.x=36,xn.h=20,xn.w=20,xn.map=i.sprite,xn.frame=i.maxFps[2];const yo=[];if(typeof gi<"u")for(let dt in gi.config.props)delete xn[gi.config.props[dt]],yo.push(gi.config.props[dt]);s[40].populate(xn),v===!0&&(I-=1),r=s[40];const lt={};lt.image=i.image,lt.x=36,lt.h=20,lt.w=20,lt.map=i.sprite,C=i.maxFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),lt.frame=C,m=lt.is||"Sprite";let Re;if(typeof m=="string"){if(Re=l.components&&l.components[m]||d[m],!Re)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Re=m);return s[41]=Re.call(null,{props:lt},s[40],i),s[41][Symbol.for("slots")][0]?(r=s[41][Symbol.for("slots")][0],w=s[41],v=!0):r=s[41][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){(typeof skip6>"u"||skip6.indexOf("frame")===-1)&&i[6].set("frame",r.fps[0])},function(r,i,l,d,y,x){i[7][Symbol.for("props")].frame=r.fps[0]},function(r,i,l,d,y,x){(typeof skip8>"u"||skip8.indexOf("frame")===-1)&&i[8].set("frame",r.fps[1])},function(r,i,l,d,y,x){i[9][Symbol.for("props")].frame=r.fps[1]},function(r,i,l,d,y,x){(typeof skip10>"u"||skip10.indexOf("frame")===-1)&&i[10].set("frame",r.fps[2])},function(r,i,l,d,y,x){i[11][Symbol.for("props")].frame=r.fps[2]},function(r,i,l,d,y,x){(typeof skip16>"u"||skip16.indexOf("frame")===-1)&&i[16].set("frame",r.avgFps[0])},function(r,i,l,d,y,x){i[17][Symbol.for("props")].frame=r.avgFps[0]},function(r,i,l,d,y,x){(typeof skip18>"u"||skip18.indexOf("frame")===-1)&&i[18].set("frame",r.avgFps[1])},function(r,i,l,d,y,x){i[19][Symbol.for("props")].frame=r.avgFps[1]},function(r,i,l,d,y,x){(typeof skip20>"u"||skip20.indexOf("frame")===-1)&&i[20].set("frame",r.avgFps[2])},function(r,i,l,d,y,x){i[21][Symbol.for("props")].frame=r.avgFps[2]},function(r,i,l,d,y,x){(typeof skip26>"u"||skip26.indexOf("frame")===-1)&&i[26].set("frame",r.minFps[0])},function(r,i,l,d,y,x){i[27][Symbol.for("props")].frame=r.minFps[0]},function(r,i,l,d,y,x){(typeof skip28>"u"||skip28.indexOf("frame")===-1)&&i[28].set("frame",r.minFps[1])},function(r,i,l,d,y,x){i[29][Symbol.for("props")].frame=r.minFps[1]},function(r,i,l,d,y,x){(typeof skip30>"u"||skip30.indexOf("frame")===-1)&&i[30].set("frame",r.minFps[2])},function(r,i,l,d,y,x){i[31][Symbol.for("props")].frame=r.minFps[2]},function(r,i,l,d,y,x){(typeof skip36>"u"||skip36.indexOf("frame")===-1)&&i[36].set("frame",r.maxFps[0])},function(r,i,l,d,y,x){i[37][Symbol.for("props")].frame=r.maxFps[0]},function(r,i,l,d,y,x){(typeof skip38>"u"||skip38.indexOf("frame")===-1)&&i[38].set("frame",r.maxFps[1])},function(r,i,l,d,y,x){i[39][Symbol.for("props")].frame=r.maxFps[1]},function(r,i,l,d,y,x){(typeof skip40>"u"||skip40.indexOf("frame")===-1)&&i[40].set("frame",r.maxFps[2])},function(r,i,l,d,y,x){i[41][Symbol.for("props")].frame=r.maxFps[2]}],context:{}},state(){return{image:L5,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){let c=1e4,r=0,i=0,l=0,d=0;gl.on("fpsUpdate",(y,{fps:x})=>{c=Math.min(x,c),r=Math.max(x,r),l+=x,d++,i=Math.round(l/d),this.fps=x.toString().padStart(3,"0"),this.avgFps=i.toString().padStart(3,"0"),this.minFps=c.toString().padStart(3,"0"),this.maxFps=r.toString().padStart(3,"0")})}}}),D5=()=>({Circle:M5(),RouterView:R5(),Sprite:_5(),FPScounter:P5()}),O5={name:"log",plugin(){return YS("App")}},bm={log:O5},MC=(c,r="",i={})=>{let l;if(typeof r=="object"?i=r:l=r,typeof c=="function"){if(l===void 0)throw Error("Error registering plugin: name is required for plugin");bm[l]={plugin:c,options:i}}else c.plugin&&MC(c.plugin,l||c.name,i)};let nm;const OS=c=>{throw new Error(`Parameter ${c} is required`)},Da=(c=OS("name"),r=OS("config"))=>{let i;const l=function(y,x,s,m){this.componentId=ZI(c),this.lifecycle=Object.assign(Object.create(sM),{component:this,previous:null,current:null}),this.parent=s,this.rootParent=m,this[ge.holder]=x,this[ge.id]=JI(),this[ge.props]=dl(y.props||{},io.get("reactivityMode")),this[ge.timeouts]=[],this[ge.intervals]=[],this[ge.originalState]=r.state&&typeof r.state=="function"&&r.state.apply(this)||{},this[ge.originalState].hasFocus=!1,this[ge.state]=dl(this[ge.originalState],io.get("reactivityMode")),this.lifecycle.state="init",this[ge.children]=r.code.render.apply(_m,[x,this,r,nm,Xc,os])||[],this[ge.wrapper]=this[ge.children][0],this[ge.slots]=this[ge.children].filter(w=>w[ge.isSlot]),r.hooks&&(r.hooks.frameTick&&gl.on("frameTick",(w,v)=>am("frameTick",this[ge.identifier],this,[v])),r.hooks.idle&&gl.on("idle",()=>{am("idle",this[ge.identifier],this)}),r.hooks.attach&&this[ge.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),r.hooks.detach&&this[ge.wrapper].node.on("outOfBounds",(w,{previous:v})=>{v>0&&(this.lifecycle.state="detach")}),r.hooks.enter&&this[ge.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),r.hooks.exit&&this[ge.wrapper].node.on("outOfViewport",()=>{this.lifecycle.state="exit"}));const C=r.code.effects;for(let w=0;w<C.length;w++){const v=()=>{C[w](this,this[ge.children],r,nm,m,Xc)};this[ge.effects].push(v),Xc(v)}if(this[ge.watchers]){const w=Object.keys(this[ge.watchers]),v=w.length;for(let I=0;I<v;I++){let O=this,T=w[I];const L=T;if(T.indexOf(".")>-1){const U=T.split(".");T=U.pop();for(let V=0;V<U.length;V++)O=O[U[V]]}let j=this[T];Xc((U=!1)=>{const V=O[T];(j!==V||U===!0)&&(this[ge.watchers][L].apply(this,[V,j]),j=V)})}}return setTimeout(()=>this.lifecycle.state="ready"),this},d=(y={},x,s,m)=>{if(Zu[ge.launched]===!1){const C=Object.keys(bm),w=C.length;for(let v=0;v<w;v++){const I=C[v],O=`$${I}`;O in Zu&&an.warn(`"${I}" (this.${O}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const T=bm[I];Object.defineProperty(Zu,O,{value:T.plugin(T.options),writable:!1,enumerable:!0,configurable:!1})}nm=D5(),Zu[ge.launched]=!0}return i===void 0&&(an.debug(`Setting up ${c} component`),i=I5(Object.create(Zu),r)),r.code===void 0&&(an.debug(`Generating code for ${c} component`),r.code=XI.call(r,GI(r.template,c))),l.call(Object.create(i),y,x,s,m)};return d.config=r,d[ge.isComponent]=!0,d},N5=c=>{const r={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};c.hooks=c.hooks||{};let i,l,d;return c.hooks[ge.destroy]=function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",l)},c.hooks[ge.init]=function(){const y={...r,...io.get("keymap",{})};i=async x=>{const s=y[x.key]||y[x.keyCode]||x.key||x.keyCode;this[ge.inputEvents]!==void 0&&this[ge.inputEvents].intercept!==void 0&&(x=await this[ge.inputEvents].intercept.call(this,x),!(x instanceof KeyboardEvent))||(Aa.input(s,x),clearTimeout(d),d=setTimeout(()=>{Aa.hold=!0},io.get("holdTimeout",yC)))},l=x=>{const s=Em.get(x.code);s!==void 0&&typeof s=="function"&&(Em.delete(x.code),s()),clearTimeout(d),Aa.hold=!1},document.addEventListener("keydown",i),document.addEventListener("keyup",l),setTimeout(()=>Aa.set(this))},Da("App",c)},ut={Component:Da,Application:N5,Launch:e5,Plugin:MC},NS=c=>new Promise((r,i)=>{const l=new XMLHttpRequest;l.onreadystatechange=function(){l.readyState==XMLHttpRequest.DONE&&(l.status===0||l.status===200?r(JSON.parse(l.responseText)):i(l.statusText))},l.open("GET",c),l.send(null)}),U5={name:"language",plugin(c={}){let r={},i={};const l=dl({language:"",loaded:0},io.get("reactivityMode"),!0),d=m=>{const C=Object.keys(r).length===0?"No translations loaded. Please load a file with translations or specify a translations object manually":m in r?!1:`Language ${m} not available in the loaded translations`;C?(an.warn(C),l.language=m):y(m).then(()=>{l.language=m})},y=m=>new Promise(C=>{const w=r[m];typeof w=="object"?(i=w,C()):typeof w=="string"&&NS(w).then(v=>{r[m]=v,i=v,C()}).catch(v=>{an.error(v)})}),x=m=>NS(m).then(C=>{s(C)}).catch(C=>{an.error(C)}),s=m=>{r=m,y(l.language).then(()=>{l.loaded++})};return"file"in c?x(c.file).then(()=>{"language"in c&&d(c.language)}):"language"in c&&d(c.language),{translate(m){l.language,l.loaded;let C=[...arguments].slice(1);return C.length===0?i&&i[m]||m:(C.length===1&&typeof C[0]=="object"&&(C=C.pop()),Object.keys(Array.isArray(C)?Object.assign({},C):C).reduce((w,v)=>w.replace(new RegExp("{\\s?"+v+"\\s?}","g"),C[v]),i&&i[m]||m))},get language(){return l.language},set(m){d(m)},translations(m){s(m)},load(m){return x(m)}}}},B5=(c,r,i)=>{const l=i.split(".");for(let d=0;d<l.length;d++){const y=l[d];if(c!==null&&y in c)c=c[y],r=r!==null&&y in r?r[y]:null;else if(r!==null&&y in r)r=r[y],c=r;else{c=void 0;break}}return c},RC={name:"theme",plugin(c={}){let r={};const i=dl({current:"default"},io.get("reactivityMode"),!0);let l={},d=null;return"themes"in c?(l=c.themes,i.current=c.current||"default",d=c.base||"default"):l={default:c},{get(y,x){if(i.current,r[y]!==void 0)return r[y];const s=B5(l[i.current],l[d]||null,y);return s!==void 0?(r[y]=s,s):x},set(y){y in l?(r={},i.current=y):an.warn(`Theme ${y} not found`)}}}},im=c=>new URLSearchParams(window.location.search).get(c),Ju={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||im("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||im("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||im("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},j5=()=>{let c={};return Object.keys(Ju).forEach(r=>{if(Ju[r].test&&typeof Ju[r].test=="function"&&Ju[r].test()===!0){c=Ju[r].mapping;return}}),c},F5="modulepreload",$5=function(c){return"/"+c},US={},z5=function(r,i,l){if(!i||i.length===0)return r();const d=document.getElementsByTagName("link");return Promise.all(i.map(y=>{if(y=$5(y),y in US)return;US[y]=!0;const x=y.endsWith(".css"),s=x?'[rel="stylesheet"]':"";if(!!l)for(let w=d.length-1;w>=0;w--){const v=d[w];if(v.href===y&&(!x||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${s}`))return;const C=document.createElement("link");if(C.rel=x?"stylesheet":F5,x||(C.as="script",C.crossOrigin=""),C.href=y,document.head.appendChild(C),x)return new Promise((w,v)=>{C.addEventListener("load",w),C.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${y}`)))})})).then(()=>r()).catch(y=>{const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=y,window.dispatchEvent(x),!x.defaultPrevented)throw y})},V5=ut.Component("PortalItem",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=370,m.h=320,m.scale={transition:i.hasFocus?1.1:1},m.color=i.backgroundColor,m.effects=[i.shader("radius",{radius:6})],s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=30,C.y=30,C.content=i.number,C.size=84,C.color=i.fontColor,C.__textnode=!0,s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.x=30,w.y=140,w.content=i.title,w.size=42,w.font="raleway",w.color=i.fontColor,w.letterspacing=2,w.__textnode=!0,s[2].populate(w),r=s[0];const v={};return s[3]=this.element({parent:r||"root"},i),v.x=30,v.y=200,v.content=i.description,v.maxwidth=300,v.size=28,v.color=i.fontColor,v.lineheight=32,v.__textnode=!0,s[3].populate(v),s},effects:[function(r,i,l,d,y,x){i[0].set("scale",{transition:r.hasFocus?1.1:1})},function(r,i,l,d,y,x){i[0].set("color",r.backgroundColor)},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:6})])},function(r,i,l,d,y,x){i[1].set("content",r.number)},function(r,i,l,d,y,x){i[1].set("color",r.fontColor)},function(r,i,l,d,y,x){i[2].set("content",r.title)},function(r,i,l,d,y,x){i[2].set("color",r.fontColor)},function(r,i,l,d,y,x){i[3].set("content",r.description)},function(r,i,l,d,y,x){i[3].set("color",r.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),H5=ut.Component("PortalRow",{components:{PortalItem:V5},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1;const I={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(I),r=s[0];const O={};s[1]=this.element({parent:r||"root"},v===!0?w:i),O.alpha={transition:{value:i.itemOffset<240?1:0,duration:200}},s[1].populate(O),r=s[1];const T={};s[2]=this.element({parent:r||"root"},v===!0?w:i),T.content=i.title,T.x=60,T.__textnode=!0,s[2].populate(T),r=s[1];const L={};s[3]=this.element({parent:r||"root"},v===!0?w:i),L.y=50,L.x=60,L.h=1,L.w=1800,L.color="0xe8d7f9ff",s[3].populate(L),r=s[0];const j={};s[4]=this.element({parent:r||"root"},v===!0?w:i),j.y=100,j.x={transition:i.rowOffset},s[4].populate(j),r=s[4];const U=[],V=(G=[],Q,te)=>{const le=x(G),he=new Set;let fe=le.length;for(;fe--;){const Z=le[fe];he.add(""+Z.id)}let k=te.length;for(;k--;)if(he.has(te[k])===!1){const Z=te[k];Q[5][Z]&&Q[5][Z].destroy(),delete Q[5][Z],Q[6][Z]&&Q[6][Z].destroy(),delete Q[6][Z]}te.length=0;const q=le.length,Y=[];for(let Z=0;Z<q;Z++){const K=Object.create(i);r=Q[4],K.item=le[Z],K.index=Z,K.key=""+K.item.id,te.push(K.key);const ee=l.components&&l.components.PortalItem||d.PortalItem;Q[5]===void 0&&(Q[5]={});const re={};Q[5][K.key]===void 0&&(Q[5][K.key]=this.element({parent:r||"root"},v===!0?w:i)),re.x={transition:{value:K.itemOffset+K.index*430,delay:50*(K.index%4),duration:500}},re.title=K.item.title,re.description=K.item.description,re.id=K.item.id,re.index=K.index,re.ref="item"+K.index;const ce=[];if(typeof ee<"u")for(let Te in ee.config.props)delete re[ee.config.props[Te]],ce.push(ee.config.props[Te]);Q[5][K.key].nodeId===void 0&&Q[5][K.key].populate(re),Q[6]===void 0&&(Q[6]={}),r=Q[5][K.key];const we={};if(Q[6][K.key]===void 0){C={transition:{value:K.itemOffset+K.index*430,delay:50*(K.index%4),duration:500}},Array.isArray(C)===!0&&(C=x(C).slice(0)),we.x=C,we.title=K.item.title,we.description=K.item.description,we.id=K.item.id,we.index=K.index,C="item"+K.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),we.ref=C,m=we.is||"PortalItem";let Te;if(typeof m=="string"){if(Te=l.components&&l.components[m]||d[m],!Te)throw new Error('Component "PortalItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Te=m);Q[6][K.key]=Te.call(null,{props:we},Q[5][K.key],i),Q[6][K.key][Symbol.for("slots")][0]?(r=Q[6][K.key][Symbol.for("slots")][0],w=Q[6][K.key],v=!0):r=Q[6][K.key][Symbol.for("children")][0]}let be=()=>{(typeof ce>"u"||ce.indexOf("ref")===-1)&&Q[5][K.key].set("ref","item"+K.index)};y(be,null),Y.push(be),Q[6][K.key][Symbol.for("props")].ref="item"+K.index}return Y};let z;return y(()=>{i[Symbol.for("removeGlobalEffects")](z),z=null,z=V(i.items,s,U)},"items"),y(()=>{i.itemOffset;for(let G=0;G<i.items.length;G++){const Q={};Q.index=G,Q.item=i.items[G],Q.key=Q.item.id,(typeof skip5>"u"||skip5.indexOf("x")===-1)&&s[5][Q.key].set("x",{transition:{value:i.itemOffset+Q.index*430,delay:50*(Q.index%4),duration:500}})}}),y(()=>{i.itemOffset;for(let G=0;G<i.items.length;G++){const Q={};Q.index=G,Q.item=i.items[G],Q.key=Q.item.id,s[6][Q.key][Symbol.for("props")].x={transition:{value:i.itemOffset+Q.index*430,delay:50*(Q.index%4),duration:500}}}}),s},effects:[function(r,i,l,d,y,x){i[1].set("alpha",{transition:{value:r.itemOffset<240?1:0,duration:200}})},function(r,i,l,d,y,x){i[4].set("x",{transition:r.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(c){const r=this.$select(`item${c}`);r&&r.$focus&&(r.$focus(),c<1?this.rowOffset=60:c>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-c*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),_C=ut.Component("SourceInfo",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.x=1860,m.y={transition:{value:1060+i.offsetY,delay:1e3,duration:300,easing:"ease-out"}},m.alpha={transition:{value:i.alpha,delay:1e3,duration:300,easing:"ease-out"}},m.w=480,m.h=100,m.mount=1,m.color="{top: '0x000000dd', bottom: '0x000000ff'}",m.effects=[i.shader("radius",{radius:10})],s[0].populate(m),r=s[0];const C={};return s[1]=this.element({parent:r||"root"},i),C.y=18,C.x=20,C.size=26,C.maxwidth=440,C.align="center",C.lineheight=32,C.content='Press "U" to check out the source code of this example on GitHub',C.__textnode=!0,s[1].populate(C),s},effects:[function(r,i,l,d,y,x){i[0].set("y",{transition:{value:1060+r.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(r,i,l,d,y,x){i[0].set("alpha",{transition:{value:r.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:10})])}],context:{}},state(){return{offsetY:15,alpha:0}},hooks:{ready(){this.offsetY=0,this.alpha=1}}}),G5="@lightningjs/blits-example-app",X5="1.7.0",W5="Lightning 3 Blits Example App",Y5="index.js",q5="module",K5={start:"npm run dev","start:test":"NODE_ENV=testing npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host",test:"NODE_ENV=testing backstop --config=backstop.cjs test","test:reference":"NODE_ENV=testing backstop --config=backstop.cjs reference"},Q5={hooks:{"pre-commit":"lint-staged"}},Z5="Michiel van der Geest <hello@michielvandergeest.com>",J5="Apache-2",e_={backstopjs:"^6.3.22",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",playwright:"^1.41.0",prettier:"^2.5.1","shaka-player":"^4.7.1",vite:"^4.0.4"},t_={"@lightningjs/blits":"^1.19.1"},n_={name:G5,version:X5,description:W5,main:Y5,type:q5,scripts:K5,"lint-staged":{"*.js":["eslint --fix"]},husky:Q5,author:Z5,license:J5,devDependencies:e_,dependencies:t_},i_=ut.Component("Portal",{components:{PortalRow:H5,SourceInfo:_C},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),O.w=1920,O.h=1080,O.color="{top: '0x44037aff', bottom: '0x240244ff'}",s[0].populate(O),v===!0&&(I-=1);const T=l.components&&l.components.PortalRow||d.PortalRow;r=s[0];const L={};s[1]=this.element({parent:r||"root"},v===!0?w:i),L.mount="{y: 0.5}",L.h=500,L.y={transition:-i.rowFocused*420+550},L.title="Demos",L.items=i.demo,L.ref="row0";const j=[];if(typeof T<"u")for(let ke in T.config.props)delete L[T.config.props[ke]],j.push(T.config.props[ke]);s[1].populate(L),v===!0&&(I-=1),r=s[1];const U={};U.mount="{y: 0.5}",U.h=500,C={transition:-i.rowFocused*420+550},Array.isArray(C)===!0&&(C=x(C).slice(0)),U.y=C,U.title="Demos",U.items=i.demo,U.ref="row0",m=U.is||"PortalRow";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||d[m],!V)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[2]=V.call(null,{props:U},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],w=s[2],v=!0):r=s[2][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const z=l.components&&l.components.PortalRow||d.PortalRow;r=s[0];const G={};s[3]=this.element({parent:r||"root"},v===!0?w:i),G.mount="{y: 0.5}",G.h=500,G.y={transition:-i.rowFocused*420+1100},G.title="Examples and tests",G.items=i.example,G.ref="row1";const Q=[];if(typeof z<"u")for(let ke in z.config.props)delete G[z.config.props[ke]],Q.push(z.config.props[ke]);s[3].populate(G),v===!0&&(I-=1),r=s[3];const te={};te.mount="{y: 0.5}",te.h=500,C={transition:-i.rowFocused*420+1100},Array.isArray(C)===!0&&(C=x(C).slice(0)),te.y=C,te.title="Examples and tests",te.items=i.example,te.ref="row1",m=te.is||"PortalRow";let le;if(typeof m=="string"){if(le=l.components&&l.components[m]||d[m],!le)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(le=m);s[4]=le.call(null,{props:te},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],w=s[4],v=!0):r=s[4][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const he=l.components&&l.components.PortalRow||d.PortalRow;r=s[0];const fe={};s[5]=this.element({parent:r||"root"},v===!0?w:i),fe.mount="{y: 0.5}",fe.h=500,fe.y={transition:-i.rowFocused*420+1650},fe.title="Benchmarks and stress tests",fe.items=i.benchmark,fe.ref="row2";const k=[];if(typeof he<"u")for(let ke in he.config.props)delete fe[he.config.props[ke]],k.push(he.config.props[ke]);s[5].populate(fe),v===!0&&(I-=1),r=s[5];const q={};q.mount="{y: 0.5}",q.h=500,C={transition:-i.rowFocused*420+1650},Array.isArray(C)===!0&&(C=x(C).slice(0)),q.y=C,q.title="Benchmarks and stress tests",q.items=i.benchmark,q.ref="row2",m=q.is||"PortalRow";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||d[m],!Y)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[6]=Y.call(null,{props:q},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],w=s[6],v=!0):r=s[6][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[0];const Z={};s[7]=this.element({parent:r||"root"},v===!0?w:i),Z.w=1920,Z.h=200,Z.color="0x44037aff",s[7].populate(Z),v===!0&&(I-=1),r=s[7];const K={};s[8]=this.element({parent:r||"root"},v===!0?w:i),K.w=1920,K.h=70,K.y=200,K.color="{top: '0x44037aff'}",s[8].populate(K),v===!0&&(I-=1),r=s[7];const ee={};s[9]=this.element({parent:r||"root"},v===!0?w:i),ee.y={transition:{value:80-i.logoOffset,duration:400}},s[9].populate(ee),v===!0&&(I-=1),r=s[9];const re={};s[10]=this.element({parent:r||"root"},v===!0?w:i),re.src="assets/blits-logo-full.png",re.w=200,re.h=112,re.x=60,s[10].populate(re),v===!0&&(I-=1),r=s[9];const ce={};s[11]=this.element({parent:r||"root"},v===!0?w:i),ce.w=2,ce.h=120,ce.y=-10,ce.color="0xffffff80",ce.x=300,s[11].populate(ce),v===!0&&(I-=1),r=s[9];const we={};s[12]=this.element({parent:r||"root"},v===!0?w:i),we.x=320,we.y=16,s[12].populate(we),v===!0&&(I-=1),r=s[12];const be={};s[13]=this.element({parent:r||"root"},v===!0?w:i),be.y=0,be.size=36,be.content="Example App",be.__textnode=!0,s[13].populate(be),v===!0&&(I-=1),r=s[12];const Te={};return s[14]=this.element({parent:r||"root"},v===!0?w:i),Te.y=50,Te.size=24,Te.content="v"+i.version,Te.__textnode=!0,s[14].populate(Te),v===!0&&(I-=1),s},effects:[function(r,i,l,d,y,x){(typeof skip1>"u"||skip1.indexOf("y")===-1)&&i[1].set("y",{transition:-r.rowFocused*420+550})},function(r,i,l,d,y,x){i[2][Symbol.for("props")].y={transition:-r.rowFocused*420+550}},function(r,i,l,d,y,x){(typeof skip3>"u"||skip3.indexOf("y")===-1)&&i[3].set("y",{transition:-r.rowFocused*420+1100})},function(r,i,l,d,y,x){i[4][Symbol.for("props")].y={transition:-r.rowFocused*420+1100}},function(r,i,l,d,y,x){(typeof skip5>"u"||skip5.indexOf("y")===-1)&&i[5].set("y",{transition:-r.rowFocused*420+1650})},function(r,i,l,d,y,x){i[6][Symbol.for("props")].y={transition:-r.rowFocused*420+1650}},function(r,i,l,d,y,x){i[9].set("y",{transition:{value:80-r.logoOffset,duration:400}})}],context:{}},state(){return{version:n_.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(c){const r=this.$select(`row${c}`);r&&r.$focus&&r.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),o_=ut.Component("Letter",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=i.w,C.h={transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},C.color="0xe6e6e6ff",s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.w=i.w,w.h=280,w.src=i.image,w.y={transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},s[2].populate(w),r=s[0];const v={};return s[3]=this.element({parent:r||"root"},i),v.w=i.w,v.color="0xe6e6e6ff",v.h={transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},v.y={transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},s[3].populate(v),s},effects:[function(r,i,l,d,y,x){i[1].set("h",{transition:{value:410+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,l,d,y,x){i[2].set("src",r.image)},function(r,i,l,d,y,x){i[2].set("y",{transition:{value:400+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,l,d,y,x){i[3].set("h",{transition:{value:500-r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,l,d,y,x){i[3].set("y",{transition:{value:660+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),r_=ut.Component("Intro",{components:{Letter:o_},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),I.w=1920,I.h=1080,I.src="assets/background.jpg",s[0].populate(I),w===!0&&(v-=1);const O=l.components&&l.components.Letter||d.Letter;r=s[0];const T={};s[1]=this.element({parent:r||"root"},w===!0?C:i),T.letter="l",T.w=294;const L=[];if(typeof O<"u")for(let W in O.config.props)delete T[O.config.props[W]],L.push(O.config.props[W]);s[1].populate(T),w===!0&&(v-=1),r=s[1];const j={};j.letter="l",j.w=294,m=j.is||"Letter";let U;if(typeof m=="string"){if(U=l.components&&l.components[m]||d[m],!U)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(U=m);s[2]=U.call(null,{props:j},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],C=s[2],w=!0):r=s[2][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const V=l.components&&l.components.Letter||d.Letter;r=s[0];const z={};s[3]=this.element({parent:r||"root"},w===!0?C:i),z.letter="i-1",z.w=128,z.x=294,z.direction="up",z.delay=50;const G=[];if(typeof V<"u")for(let W in V.config.props)delete z[V.config.props[W]],G.push(V.config.props[W]);s[3].populate(z),w===!0&&(v-=1),r=s[3];const Q={};Q.letter="i-1",Q.w=128,Q.x=294,Q.direction="up",Q.delay=50,m=Q.is||"Letter";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||d[m],!te)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);s[4]=te.call(null,{props:Q},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],C=s[4],w=!0):r=s[4][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const le=l.components&&l.components.Letter||d.Letter;r=s[0];const he={};s[5]=this.element({parent:r||"root"},w===!0?C:i),he.letter="g-1",he.w=205,he.x=422,he.delay=100;const fe=[];if(typeof le<"u")for(let W in le.config.props)delete he[le.config.props[W]],fe.push(le.config.props[W]);s[5].populate(he),w===!0&&(v-=1),r=s[5];const k={};k.letter="g-1",k.w=205,k.x=422,k.delay=100,m=k.is||"Letter";let q;if(typeof m=="string"){if(q=l.components&&l.components[m]||d[m],!q)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(q=m);s[6]=q.call(null,{props:k},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],C=s[6],w=!0):r=s[6][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const Y=l.components&&l.components.Letter||d.Letter;r=s[0];const Z={};s[7]=this.element({parent:r||"root"},w===!0?C:i),Z.letter="h",Z.w=224,Z.x=627,Z.direction="up",Z.delay=150;const K=[];if(typeof Y<"u")for(let W in Y.config.props)delete Z[Y.config.props[W]],K.push(Y.config.props[W]);s[7].populate(Z),w===!0&&(v-=1),r=s[7];const ee={};ee.letter="h",ee.w=224,ee.x=627,ee.direction="up",ee.delay=150,m=ee.is||"Letter";let re;if(typeof m=="string"){if(re=l.components&&l.components[m]||d[m],!re)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(re=m);s[8]=re.call(null,{props:ee},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],C=s[8],w=!0):r=s[8][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const ce=l.components&&l.components.Letter||d.Letter;r=s[0];const we={};s[9]=this.element({parent:r||"root"},w===!0?C:i),we.letter="t",we.w=190,we.x=851,we.delay=200;const be=[];if(typeof ce<"u")for(let W in ce.config.props)delete we[ce.config.props[W]],be.push(ce.config.props[W]);s[9].populate(we),w===!0&&(v-=1),r=s[9];const Te={};Te.letter="t",Te.w=190,Te.x=851,Te.delay=200,m=Te.is||"Letter";let ke;if(typeof m=="string"){if(ke=l.components&&l.components[m]||d[m],!ke)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ke=m);s[10]=ke.call(null,{props:Te},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],C=s[10],w=!0):r=s[10][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const pe=l.components&&l.components.Letter||d.Letter;r=s[0];const Le={};s[11]=this.element({parent:r||"root"},w===!0?C:i),Le.letter="n-1",Le.w=221,Le.x=1041,Le.direction="up",Le.delay=250;const $=[];if(typeof pe<"u")for(let W in pe.config.props)delete Le[pe.config.props[W]],$.push(pe.config.props[W]);s[11].populate(Le),w===!0&&(v-=1),r=s[11];const Ie={};Ie.letter="n-1",Ie.w=221,Ie.x=1041,Ie.direction="up",Ie.delay=250,m=Ie.is||"Letter";let Pe;if(typeof m=="string"){if(Pe=l.components&&l.components[m]||d[m],!Pe)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Pe=m);s[12]=Pe.call(null,{props:Ie},s[11],i),s[12][Symbol.for("slots")][0]?(r=s[12][Symbol.for("slots")][0],C=s[12],w=!0):r=s[12][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const $e=l.components&&l.components.Letter||d.Letter;r=s[0];const Xe={};s[13]=this.element({parent:r||"root"},w===!0?C:i),Xe.letter="i-2",Xe.w=115,Xe.x=1262,Xe.delay=300;const et=[];if(typeof $e<"u")for(let W in $e.config.props)delete Xe[$e.config.props[W]],et.push($e.config.props[W]);s[13].populate(Xe),w===!0&&(v-=1),r=s[13];const We={};We.letter="i-2",We.w=115,We.x=1262,We.delay=300,m=We.is||"Letter";let nt;if(typeof m=="string"){if(nt=l.components&&l.components[m]||d[m],!nt)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(nt=m);s[14]=nt.call(null,{props:We},s[13],i),s[14][Symbol.for("slots")][0]?(r=s[14][Symbol.for("slots")][0],C=s[14],w=!0):r=s[14][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const me=l.components&&l.components.Letter||d.Letter;r=s[0];const wt={};s[15]=this.element({parent:r||"root"},w===!0?C:i),wt.letter="n-2",wt.w=219,wt.x=1377,wt.direction="up",wt.delay=350;const ft=[];if(typeof me<"u")for(let W in me.config.props)delete wt[me.config.props[W]],ft.push(me.config.props[W]);s[15].populate(wt),w===!0&&(v-=1),r=s[15];const ot={};ot.letter="n-2",ot.w=219,ot.x=1377,ot.direction="up",ot.delay=350,m=ot.is||"Letter";let St;if(typeof m=="string"){if(St=l.components&&l.components[m]||d[m],!St)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(St=m);s[16]=St.call(null,{props:ot},s[15],i),s[16][Symbol.for("slots")][0]?(r=s[16][Symbol.for("slots")][0],C=s[16],w=!0):r=s[16][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const tt=l.components&&l.components.Letter||d.Letter;r=s[0];const rt={};s[17]=this.element({parent:r||"root"},w===!0?C:i),rt.letter="g-2",rt.w=324,rt.x=1596,rt.direction="up",rt.delay=400;const Ge=[];if(typeof tt<"u")for(let W in tt.config.props)delete rt[tt.config.props[W]],Ge.push(tt.config.props[W]);s[17].populate(rt),w===!0&&(v-=1),r=s[17];const ze={};ze.letter="g-2",ze.w=324,ze.x=1596,ze.direction="up",ze.delay=400,m=ze.is||"Letter";let Oe;if(typeof m=="string"){if(Oe=l.components&&l.components[m]||d[m],!Oe)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Oe=m);return s[18]=Oe.call(null,{props:ze},s[17],i),s[18][Symbol.for("slots")][0]?(r=s[18][Symbol.for("slots")][0],C=s[18],w=!0):r=s[18][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),s},effects:[],context:{}}}),s_=ut.Component("Toggle",{code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),O.w=100,O.h=50,O.y=5,O.color=i.bgColor,O.effects=[i.shader("radius",{radius:25})],s[0].populate(O),v===!0&&(I-=1);const T=l.components&&l.components.Circle||d.Circle;r=s[0];const L={};s[1]=this.element({parent:r||"root"},v===!0?w:i),L.x={transition:i.on?0:50},L.size=50;const j=[];if(typeof T<"u")for(let z in T.config.props)delete L[T.config.props[z]],j.push(T.config.props[z]);s[1].populate(L),v===!0&&(I-=1),r=s[1];const U={};C={transition:i.on?0:50},Array.isArray(C)===!0&&(C=x(C).slice(0)),U.x=C,U.size=50,C=i.primaryColor,Array.isArray(C)===!0&&(C=x(C).slice(0)),U.color=C,m=U.is||"Circle";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||d[m],!V)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);return s[2]=V.call(null,{props:U},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],w=s[2],v=!0):r=s[2][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){i[0].set("color",r.bgColor)},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:25})])},function(r,i,l,d,y,x){(typeof skip1>"u"||skip1.indexOf("x")===-1)&&i[1].set("x",{transition:r.on?0:50})},function(r,i,l,d,y,x){i[2][Symbol.for("props")].x={transition:r.on?0:50}},function(r,i,l,d,y,x){i[2][Symbol.for("props")].color=r.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),a_=ut.Component("Bar",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w={value:i.w,duration:i.duration},m.h={value:i.h,duration:i.duration},m.color=i.bgColor,m.x=i.index*(i.w+i.w/4),m.effects=[i.shader("radius",{radius:10})],s[0].populate(m),r=s[0];const C={};return s[1]=this.element({parent:r||"root"},i),C.w=i.w,C.y={transition:{value:i.h-i.innerH,duration:i.duration}},C.h={transition:{value:i.innerH,duration:i.duration}},C.color=i.primaryColor,C.effects=[i.shader("radius",{radius:10})],s[1].populate(C),s},effects:[function(r,i,l,d,y,x){i[0].set("w",{value:r.w,duration:r.duration})},function(r,i,l,d,y,x){i[0].set("h",{value:r.h,duration:r.duration})},function(r,i,l,d,y,x){i[0].set("color",r.bgColor)},function(r,i,l,d,y,x){i[0].set("x",r.index*(r.w+r.w/4))},function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:10})])},function(r,i,l,d,y,x){i[1].set("w",r.w)},function(r,i,l,d,y,x){i[1].set("y",{transition:{value:r.h-r.innerH,duration:r.duration}})},function(r,i,l,d,y,x){i[1].set("h",{transition:{value:r.innerH,duration:r.duration}})},function(r,i,l,d,y,x){i[1].set("color",r.primaryColor)},function(r,i,l,d,y,x){i[1].set("effects",[r.shader("radius",{radius:10})])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),u_=ut.Component("Theming",{components:{Bar:a_,Toggle:s_},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),O.w=1920,O.h=1080,O.color={transition:i.$colors.get("bg")},s[0].populate(O),v===!0&&(I-=1),r=s[0];const T={};s[1]=this.element({parent:r||"root"},v===!0?w:i),T.y=1020,T.x=1160,T.size=28,T.color=i.$colors.get("color4"),T.content='Use "up", "down", "left" and "right" to change the appearance',T.__textnode=!0,s[1].populate(T),v===!0&&(I-=1),r=s[0];const L={};s[2]=this.element({parent:r||"root"},v===!0?w:i),L.x={transition:(1920-i.$sizes.get("w"))/2},L.y={transition:(1080-i.$sizes.get("h"))/2},s[2].populate(L),v===!0&&(I-=1),r=s[2];const j={};s[3]=this.element({parent:r||"root"},v===!0?w:i),j.x=-250,j.y=-100,j.src="assets/shadow.png",j.w=1e3,j.h=900,j.alpha=.5,s[3].populate(j),v===!0&&(I-=1),r=s[2];const U={};s[4]=this.element({parent:r||"root"},v===!0?w:i),U.w={transition:i.$sizes.get("w")},U.h={transition:i.$sizes.get("h")},U.color=i.$colors.get("color1"),U.effects=[i.shader("radius",{radius:i.radius})],s[4].populate(U),v===!0&&(I-=1),r=s[4];const V={};s[5]=this.element({parent:r||"root"},v===!0?w:i),V.w={transition:i.$sizes.get("w")},V.h=100,V.color=i.$colors.get("color2"),V.effects=[i.shader("radius",{radius:i.radius})],s[5].populate(V),v===!0&&(I-=1),r=s[4];const z={};s[6]=this.element({parent:r||"root"},v===!0?w:i),z.w={transition:i.$sizes.get("w")},z.h=80,z.y=20,z.color=i.$colors.get("color2"),s[6].populate(z),v===!0&&(I-=1),r=s[4];const G={};s[7]=this.element({parent:r||"root"},v===!0?w:i),G.content=i.text,G.color=i.$colors.get("color3"),G.size=28,G.x=20,G.y=14,G.__textnode=!0,s[7].populate(G),v===!0&&(I-=1);const Q=l.components&&l.components.Toggle||d.Toggle;r=s[4];const te={};s[8]=this.element({parent:r||"root"},v===!0?w:i),te.x={transition:i.$sizes.get("w")-120},te.on=i.mode==="dark",te.bgColor=i.$colors.get("color1"),te.primaryColor="#22c55e";const le=[];if(typeof Q<"u")for(let Ge in Q.config.props)delete te[Q.config.props[Ge]],le.push(Q.config.props[Ge]);s[8].populate(te),v===!0&&(I-=1),r=s[8];const he={};C={transition:i.$sizes.get("w")-120},Array.isArray(C)===!0&&(C=x(C).slice(0)),he.x=C,C=i.mode==="dark",Array.isArray(C)===!0&&(C=x(C).slice(0)),he.on=C,C=i.$colors.get("color1"),Array.isArray(C)===!0&&(C=x(C).slice(0)),he.bgColor=C,he.primaryColor="#22c55e",m=he.is||"Toggle";let fe;if(typeof m=="string"){if(fe=l.components&&l.components[m]||d[m],!fe)throw new Error('Component "Toggle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);s[9]=fe.call(null,{props:he},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],w=s[9],v=!0):r=s[9][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[2];const k={};s[10]=this.element({parent:r||"root"},v===!0?w:i),k.w=200,k.h={transition:i.$sizes.get("block1.h")},k.x=25,k.y=140,k.color=i.$colors.get("color2"),k.effects=[i.shader("radius",{radius:i.radius/2})],s[10].populate(k),v===!0&&(I-=1),r=s[2];const q={};s[11]=this.element({parent:r||"root"},v===!0?w:i),q.w={transition:i.$sizes.get("block2.w")},q.h=i.$sizes.get("block2.h"),q.x=270,q.y={transition:i.$sizes.get("block2.y")},q.color=i.$colors.get("color2"),q.effects=[i.shader("radius",{radius:i.radius/2})],s[11].populate(q),v===!0&&(I-=1),r=s[2];const Y={};s[12]=this.element({parent:r||"root"},v===!0?w:i),Y.x={transition:i.$sizes.get("graph.x")},Y.y={transition:i.$sizes.get("graph.y")},Y.w=i.$sizes.get("graph.w"),Y.h=i.$sizes.get("graph.h"),Y.color="0x00000000",s[12].populate(Y),v===!0&&(I-=1),r=s[12];const Z={};s[13]=this.element({parent:r||"root"},v===!0?w:i),Z.x={transition:i.$sizes.get("graph.offset")},Z.y={transition:i.$sizes.get("graph.offset")},s[13].populate(Z),v===!0&&(I-=1);const K=l.components&&l.components.Bar||d.Bar;r=s[13];const ee={};s[14]=this.element({parent:r||"root"},v===!0?w:i),ee.bgColor=i.$colors.get("color2"),ee.primaryColor=i.$colors.get("color4"),ee.size=i.$sizes.get("graph.size"),ee.height=100,ee.index=0;const re=[];if(typeof K<"u")for(let Ge in K.config.props)delete ee[K.config.props[Ge]],re.push(K.config.props[Ge]);s[14].populate(ee),v===!0&&(I-=1),r=s[14];const ce={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.size=C,ce.height=100,ce.index=0,m=ce.is||"Bar";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||d[m],!we)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);s[15]=we.call(null,{props:ce},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],w=s[15],v=!0):r=s[15][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const be=l.components&&l.components.Bar||d.Bar;r=s[13];const Te={};s[16]=this.element({parent:r||"root"},v===!0?w:i),Te.bgColor=i.$colors.get("color2"),Te.primaryColor=i.$colors.get("color4"),Te.size=i.$sizes.get("graph.size"),Te.height=140,Te.index=1;const ke=[];if(typeof be<"u")for(let Ge in be.config.props)delete Te[be.config.props[Ge]],ke.push(be.config.props[Ge]);s[16].populate(Te),v===!0&&(I-=1),r=s[16];const pe={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),pe.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),pe.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),pe.size=C,pe.height=140,pe.index=1,m=pe.is||"Bar";let Le;if(typeof m=="string"){if(Le=l.components&&l.components[m]||d[m],!Le)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Le=m);s[17]=Le.call(null,{props:pe},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],w=s[17],v=!0):r=s[17][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const $=l.components&&l.components.Bar||d.Bar;r=s[13];const Ie={};s[18]=this.element({parent:r||"root"},v===!0?w:i),Ie.bgColor=i.$colors.get("color2"),Ie.primaryColor=i.$colors.get("color4"),Ie.size=i.$sizes.get("graph.size"),Ie.height=170,Ie.index=2;const Pe=[];if(typeof $<"u")for(let Ge in $.config.props)delete Ie[$.config.props[Ge]],Pe.push($.config.props[Ge]);s[18].populate(Ie),v===!0&&(I-=1),r=s[18];const $e={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),$e.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),$e.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),$e.size=C,$e.height=170,$e.index=2,m=$e.is||"Bar";let Xe;if(typeof m=="string"){if(Xe=l.components&&l.components[m]||d[m],!Xe)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Xe=m);s[19]=Xe.call(null,{props:$e},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],w=s[19],v=!0):r=s[19][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const et=l.components&&l.components.Bar||d.Bar;r=s[13];const We={};s[20]=this.element({parent:r||"root"},v===!0?w:i),We.bgColor=i.$colors.get("color2"),We.primaryColor=i.$colors.get("color4"),We.size=i.$sizes.get("graph.size"),We.height=150,We.index=3;const nt=[];if(typeof et<"u")for(let Ge in et.config.props)delete We[et.config.props[Ge]],nt.push(et.config.props[Ge]);s[20].populate(We),v===!0&&(I-=1),r=s[20];const me={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),me.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),me.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),me.size=C,me.height=150,me.index=3,m=me.is||"Bar";let wt;if(typeof m=="string"){if(wt=l.components&&l.components[m]||d[m],!wt)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(wt=m);s[21]=wt.call(null,{props:me},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],w=s[21],v=!0):r=s[21][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const ft=l.components&&l.components.Bar||d.Bar;r=s[13];const ot={};s[22]=this.element({parent:r||"root"},v===!0?w:i),ot.bgColor=i.$colors.get("color2"),ot.primaryColor=i.$colors.get("color4"),ot.size=i.$sizes.get("graph.size"),ot.height=90,ot.index=4;const St=[];if(typeof ft<"u")for(let Ge in ft.config.props)delete ot[ft.config.props[Ge]],St.push(ft.config.props[Ge]);s[22].populate(ot),v===!0&&(I-=1),r=s[22];const tt={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),tt.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),tt.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),tt.size=C,tt.height=90,tt.index=4,m=tt.is||"Bar";let rt;if(typeof m=="string"){if(rt=l.components&&l.components[m]||d[m],!rt)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(rt=m);return s[23]=rt.call(null,{props:tt},s[22],i),s[23][Symbol.for("slots")][0]?(r=s[23][Symbol.for("slots")][0],w=s[23],v=!0):r=s[23][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){i[0].set("color",{transition:r.$colors.get("bg")})},function(r,i,l,d,y,x){i[1].set("color",r.$colors.get("color4"))},function(r,i,l,d,y,x){i[2].set("x",{transition:(1920-r.$sizes.get("w"))/2})},function(r,i,l,d,y,x){i[2].set("y",{transition:(1080-r.$sizes.get("h"))/2})},function(r,i,l,d,y,x){i[4].set("w",{transition:r.$sizes.get("w")})},function(r,i,l,d,y,x){i[4].set("h",{transition:r.$sizes.get("h")})},function(r,i,l,d,y,x){i[4].set("color",r.$colors.get("color1"))},function(r,i,l,d,y,x){i[4].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,l,d,y,x){i[5].set("w",{transition:r.$sizes.get("w")})},function(r,i,l,d,y,x){i[5].set("color",r.$colors.get("color2"))},function(r,i,l,d,y,x){i[5].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,l,d,y,x){i[6].set("w",{transition:r.$sizes.get("w")})},function(r,i,l,d,y,x){i[6].set("color",r.$colors.get("color2"))},function(r,i,l,d,y,x){i[7].set("content",r.text)},function(r,i,l,d,y,x){i[7].set("color",r.$colors.get("color3"))},function(r,i,l,d,y,x){(typeof skip8>"u"||skip8.indexOf("x")===-1)&&i[8].set("x",{transition:r.$sizes.get("w")-120})},function(r,i,l,d,y,x){(typeof skip8>"u"||skip8.indexOf("on")===-1)&&i[8].set("on",r.mode==="dark")},function(r,i,l,d,y,x){(typeof skip8>"u"||skip8.indexOf("bgColor")===-1)&&i[8].set("bgColor",r.$colors.get("color1"))},function(r,i,l,d,y,x){i[9][Symbol.for("props")].x={transition:r.$sizes.get("w")-120}},function(r,i,l,d,y,x){i[9][Symbol.for("props")].on=r.mode==="dark"},function(r,i,l,d,y,x){i[9][Symbol.for("props")].bgColor=r.$colors.get("color1")},function(r,i,l,d,y,x){i[10].set("h",{transition:r.$sizes.get("block1.h")})},function(r,i,l,d,y,x){i[10].set("color",r.$colors.get("color2"))},function(r,i,l,d,y,x){i[10].set("effects",[r.shader("radius",{radius:r.radius/2})])},function(r,i,l,d,y,x){i[11].set("w",{transition:r.$sizes.get("block2.w")})},function(r,i,l,d,y,x){i[11].set("h",r.$sizes.get("block2.h"))},function(r,i,l,d,y,x){i[11].set("y",{transition:r.$sizes.get("block2.y")})},function(r,i,l,d,y,x){i[11].set("color",r.$colors.get("color2"))},function(r,i,l,d,y,x){i[11].set("effects",[r.shader("radius",{radius:r.radius/2})])},function(r,i,l,d,y,x){i[12].set("x",{transition:r.$sizes.get("graph.x")})},function(r,i,l,d,y,x){i[12].set("y",{transition:r.$sizes.get("graph.y")})},function(r,i,l,d,y,x){i[12].set("w",r.$sizes.get("graph.w"))},function(r,i,l,d,y,x){i[12].set("h",r.$sizes.get("graph.h"))},function(r,i,l,d,y,x){i[13].set("x",{transition:r.$sizes.get("graph.offset")})},function(r,i,l,d,y,x){i[13].set("y",{transition:r.$sizes.get("graph.offset")})},function(r,i,l,d,y,x){(typeof skip14>"u"||skip14.indexOf("bgColor")===-1)&&i[14].set("bgColor",r.$colors.get("color2"))},function(r,i,l,d,y,x){(typeof skip14>"u"||skip14.indexOf("primaryColor")===-1)&&i[14].set("primaryColor",r.$colors.get("color4"))},function(r,i,l,d,y,x){(typeof skip14>"u"||skip14.indexOf("size")===-1)&&i[14].set("size",r.$sizes.get("graph.size"))},function(r,i,l,d,y,x){i[15][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,l,d,y,x){i[15][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,l,d,y,x){i[15][Symbol.for("props")].size=r.$sizes.get("graph.size")},function(r,i,l,d,y,x){(typeof skip16>"u"||skip16.indexOf("bgColor")===-1)&&i[16].set("bgColor",r.$colors.get("color2"))},function(r,i,l,d,y,x){(typeof skip16>"u"||skip16.indexOf("primaryColor")===-1)&&i[16].set("primaryColor",r.$colors.get("color4"))},function(r,i,l,d,y,x){(typeof skip16>"u"||skip16.indexOf("size")===-1)&&i[16].set("size",r.$sizes.get("graph.size"))},function(r,i,l,d,y,x){i[17][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,l,d,y,x){i[17][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,l,d,y,x){i[17][Symbol.for("props")].size=r.$sizes.get("graph.size")},function(r,i,l,d,y,x){(typeof skip18>"u"||skip18.indexOf("bgColor")===-1)&&i[18].set("bgColor",r.$colors.get("color2"))},function(r,i,l,d,y,x){(typeof skip18>"u"||skip18.indexOf("primaryColor")===-1)&&i[18].set("primaryColor",r.$colors.get("color4"))},function(r,i,l,d,y,x){(typeof skip18>"u"||skip18.indexOf("size")===-1)&&i[18].set("size",r.$sizes.get("graph.size"))},function(r,i,l,d,y,x){i[19][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,l,d,y,x){i[19][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,l,d,y,x){i[19][Symbol.for("props")].size=r.$sizes.get("graph.size")},function(r,i,l,d,y,x){(typeof skip20>"u"||skip20.indexOf("bgColor")===-1)&&i[20].set("bgColor",r.$colors.get("color2"))},function(r,i,l,d,y,x){(typeof skip20>"u"||skip20.indexOf("primaryColor")===-1)&&i[20].set("primaryColor",r.$colors.get("color4"))},function(r,i,l,d,y,x){(typeof skip20>"u"||skip20.indexOf("size")===-1)&&i[20].set("size",r.$sizes.get("graph.size"))},function(r,i,l,d,y,x){i[21][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,l,d,y,x){i[21][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,l,d,y,x){i[21][Symbol.for("props")].size=r.$sizes.get("graph.size")},function(r,i,l,d,y,x){(typeof skip22>"u"||skip22.indexOf("bgColor")===-1)&&i[22].set("bgColor",r.$colors.get("color2"))},function(r,i,l,d,y,x){(typeof skip22>"u"||skip22.indexOf("primaryColor")===-1)&&i[22].set("primaryColor",r.$colors.get("color4"))},function(r,i,l,d,y,x){(typeof skip22>"u"||skip22.indexOf("size")===-1)&&i[22].set("size",r.$sizes.get("graph.size"))},function(r,i,l,d,y,x){i[23][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,l,d,y,x){i[23][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,l,d,y,x){i[23][Symbol.for("props")].size=r.$sizes.get("graph.size")}],context:{}},state(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode(c){this.$colors.set(c)},sizes(c){this.$sizes.set(c)}},computed:{text(){return this.mode==="dark"?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}}),l_="ABC123",f_="https://8b4fa39d.lightningjs.workers.dev";let LC,PC;const c_="w185",h_={headers:{"Content-Type":"application/json",Authorization:"Bearer "+l_}};function BS(c,r=c_){return PC+r+c}function d_(...c){return LC?Am(...c):DC().then(()=>Am(...c))}function Am(c,r={}){return fetch(f_+c,{...h_,...r}).then(i=>i.json())}function DC(){return Am("/configuration").then(c=>(LC=c,PC=c.images.secure_base_url,c))}const Dm={get:d_,loadConfig:DC},jS=c=>Dm.get(`/${c}/popular`).then(OC),OC=c=>c.results.filter(i=>!i.adult).map(i=>({poster:BS(i.poster_path||i.profile_path),background:BS(i.backdrop_path,"w1280"),identifier:i.id,title:i.title||i.name,overview:i.overview})),el=c=>{const r=Array.isArray(c)?c:[c];return p_("movie").then(({genres:i})=>{let l=[];return i.forEach(d=>{r.includes(d.name)&&l.push(d.id)}),Dm.get(`/discover/movie?with_genres=${l.join()}`).then(OC)})},p_=c=>Dm.get(`/genre/${c}/list`),m_=ut.Component("Poster",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=1280,m.h=720,m.x=i.x,m.src=i.item.background,m.color="{top: '0xffffffff', bottom: '0x000000ff'}",m.scale={transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[i.shader("radius",{radius:8})],s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(C),r=s[1];const w={};s[2]=this.element({parent:r||"root"},i),w.w=185,w.h=278,w.x=54,w.y=220,w.src=i.item.poster,s[2].populate(w),r=s[1];const v={};s[3]=this.element({parent:r||"root"},i),v.content=i.item.title,v.font="raleway",v.y=520,v.x=54,v.size=64,v.maxwidth=1e3,v.maxlines=1,v.__textnode=!0,s[3].populate(v),r=s[1];const I={};return s[4]=this.element({parent:r||"root"},i),I.content=i.item.overview,I.size=21,I.y=620,I.x=60,I.color="0xccccccff",I.maxwidth=1e3,I.maxlines=2,I.lineheight=36,I.__textnode=!0,s[4].populate(I),s},effects:[function(r,i,l,d,y,x){i[0].set("src",r.item.background)},function(r,i,l,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])},function(r,i,l,d,y,x){i[1].set("alpha",{transition:{value:r.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[2].set("src",r.item.poster)},function(r,i,l,d,y,x){i[3].set("content",r.item.title)},function(r,i,l,d,y,x){i[4].set("content",r.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),g_=ut.Component("Poster",{code:{render:function(r,i,l,d,y,x){const s=[],m={};return s[0]=this.element({parent:r||"root"},i),m.w=185,m.h=278,m.x=i.x,m.src=i.item.poster,m.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[i.shader("radius",{radius:8})],s[0].populate(m),s},effects:[function(r,i,l,d,y,x){i[0].set("src",r.item.poster)},function(r,i,l,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),y_=ut.Component("PosterTitle",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=185,m.h=278,m.x=i.x,m.src=i.item.poster,m.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[i.shader("radius",{radius:8})],s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=10,C.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},C.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(C),r=s[1];const w={};return s[2]=this.element({parent:r||"root"},i),w.content=i.item.title,w.font="raleway",w.size=22,w.maxwidth=185,w.maxlines=2,w.lineheight=28,w.__textnode=!0,s[2].populate(w),s},effects:[function(r,i,l,d,y,x){i[0].set("src",r.item.poster)},function(r,i,l,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])},function(r,i,l,d,y,x){i[1].set("y",{transition:{value:r.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[1].set("alpha",{transition:{value:r.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,l,d,y,x){i[2].set("content",r.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),v_=ut.Component("TmdbRow",{components:{Hero:m_,Poster:g_,PosterTitle:y_},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1;const v={};s[0]=this.element({parent:r||"root"},w===!0?C:i),s[0].populate(v),r=s[0];const I={};s[1]=this.element({parent:r||"root"},w===!0?C:i),I.x={transition:{value:i.x,duration:300,easing:"ease-in-out"}},I.y=80,s[1].populate(I),r=s[1];const O=[],T=(j=[],U,V)=>{const z=x(j),G=new Set;let Q=z.length;for(;Q--;){const fe=z[Q];G.add(""+fe.identifier)}let te=V.length;for(;te--;)if(G.has(V[te])===!1){const fe=V[te];U[2][fe]&&U[2][fe].destroy(),delete U[2][fe],U[3][fe]&&U[3][fe].destroy(),delete U[3][fe]}V.length=0;const le=z.length,he=[];for(let fe=0;fe<le;fe++){const k=Object.create(i);r=U[1],k.item=z[fe],k.index=fe,k.key=""+k.item.identifier,k.__ref="poster"+fe,V.push(k.key);const q=l.components&&l.components.Component||d.Component;U[2]===void 0&&(U[2]={});const Y={};U[2][k.key]===void 0&&(U[2][k.key]=this.element({parent:r||"root"},w===!0?C:i)),Y.is=k.type,Y.index=k.index,Y.item=k.item,Y.ref=k.__ref,Y.width=k.width;const Z=[];if(typeof q<"u")for(let ee in q.config.props)delete Y[q.config.props[ee]],Z.push(q.config.props[ee]);U[2][k.key].nodeId===void 0&&U[2][k.key].populate(Y),U[3]===void 0&&(U[3]={}),r=U[2][k.key];const K={};if(U[3][k.key]===void 0){K.is=k.type,K.index=k.index,K.item=k.item,K.ref=k.__ref,K.width=k.width,m=K.is||"Component";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||d[m],!ee)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);U[3][k.key]=ee.call(null,{props:K},U[2][k.key],i),U[3][k.key][Symbol.for("slots")][0]?(r=U[3][k.key][Symbol.for("slots")][0],C=U[3][k.key],w=!0):r=U[3][k.key][Symbol.for("children")][0]}}return he};let L;return y(()=>{i[Symbol.for("removeGlobalEffects")](L),L=null,L=T(i.items,s,O)},"items"),s},effects:[function(r,i,l,d,y,x){i[1].set("x",{transition:{value:r.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return 150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(c){const r=this.$select("poster"+c);r&&r.$focus&&(r.$focus(),this.$emit("posterSelect",this.items[c]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),x_=ut.Component("Background",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.src=i.bg1,C.w=1920,C.h=1080,C.color="{top: '0xffffffff', bottom: '0x000000ff'}",C.alpha={transition:{value:i.alpha1,duration:400,easing:"ease-in"}},s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.src=i.bg2,w.w=1920,w.h=1080,w.color="{top: '0xffffffff', bottom: '0x000000ff'}",w.alpha={transition:{value:i.alpha2,duration:400,easing:"ease-in"}},s[2].populate(w),r=s[0];const v={};return s[3]=this.element({parent:r||"root"},i),v.w=1920,v.h=1080,v.src="assets/gradient.png",v.color="0x8866ddff",v.alpha=.8,s[3].populate(v),s},effects:[function(r,i,l,d,y,x){i[1].set("src",r.bg1)},function(r,i,l,d,y,x){i[1].set("alpha",{transition:{value:r.alpha1,duration:400,easing:"ease-in"}})},function(r,i,l,d,y,x){i[2].set("src",r.bg2)},function(r,i,l,d,y,x){i[2].set("alpha",{transition:{value:r.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["src"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{src(c){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=c,this.alpha1=.8,this.alpha2=0):(this.bg2=c,this.alpha1=0,this.alpha2=.8)}}}),w_=ut.Component("TMdb",{components:{Background:x_,TmdbRow:v_},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),O.w=1920,O.h=1080,O.color="0x000000ff",s[0].populate(O),v===!0&&(I-=1);const T=l.components&&l.components.Background||d.Background;r=s[0];const L={};s[1]=this.element({parent:r||"root"},v===!0?w:i),L.src=i.src;const j=[];if(typeof T<"u")for(let Y in T.config.props)delete L[T.config.props[Y]],j.push(T.config.props[Y]);s[1].populate(L),v===!0&&(I-=1),r=s[1];const U={};C=i.src,Array.isArray(C)===!0&&(C=x(C).slice(0)),U.src=C,m=U.is||"Background";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||d[m],!V)throw new Error('Component "Background" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[2]=V.call(null,{props:U},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],w=s[2],v=!0):r=s[2][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[0];const z={};s[3]=this.element({parent:r||"root"},v===!0?w:i),s[3].populate(z),v===!0&&(I-=1),r=s[3];const G={};s[4]=this.element({parent:r||"root"},v===!0?w:i),G.y={transition:{value:i.contentY,duration:i.duration}},G.alpha={transition:{value:i.alpha,duration:i.duration}},s[4].populate(G),v===!0&&(I-=1),r=s[4];const Q={};s[5]=this.element({parent:r||"root"},v===!0?w:i),Q.src="assets/logo.png",Q.x=140,Q.y=90,Q.w=243,Q.h=52,s[5].populate(Q),v===!0&&(I-=1),r=s[4];const te={};s[6]=this.element({parent:r||"root"},v===!0?w:i),te.content=i.title,te.font="raleway",te.size=80,te.x=140,te.y=300,te.maxwidth=1e3,te["@loaded"]=i.positionText&&i.positionText.bind(i),te.maxlines=1,te.__textnode=!0,s[6].populate(te),v===!0&&(I-=1),r=s[4];const le={};s[7]=this.element({parent:r||"root"},v===!0?w:i),le.content=i.overview,le.maxwidth=880,le.x=140,le.y=430,le.lineheight=40,le.maxlines=3,le.__textnode=!0,s[7].populate(le),v===!0&&(I-=1),r=s[3];const he={};s[8]=this.element({parent:r||"root"},v===!0?w:i),he.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[8].populate(he),v===!0&&(I-=1),r=s[8];const fe=[],k=(Y=[],Z,K)=>{const ee=x(Y),re=new Set;let ce=ee.length;for(;ce--;){const ke=ee[ce];re.add(""+ke.title)}let we=K.length;for(;we--;)if(re.has(K[we])===!1){const ke=K[we];Z[9][ke]&&Z[9][ke].destroy(),delete Z[9][ke],Z[10][ke]&&Z[10][ke].destroy(),delete Z[10][ke]}K.length=0;const be=ee.length,Te=[];for(let ke=0;ke<be;ke++){const pe=Object.create(i);r=Z[8],pe.row=ee[ke],pe.index=ke,pe.key=""+pe.row.title,pe.__ref="row"+ke,K.push(pe.key);const Le=l.components&&l.components.TmdbRow||d.TmdbRow;Z[9]===void 0&&(Z[9]={});const $={};Z[9][pe.key]===void 0&&(Z[9][pe.key]=this.element({parent:r||"root"},v===!0?w:i)),$.title=pe.row.title,$.items=pe.row.items,$.type=pe.row.type,$.width=pe.row.width,$.y=pe.row.y,$.ref=pe.__ref;const Ie=[];if(typeof Le<"u")for(let We in Le.config.props)delete $[Le.config.props[We]],Ie.push(Le.config.props[We]);Z[9][pe.key].nodeId===void 0&&(Z[9][pe.key].populate($),v===!0&&(I-=1)),Z[10]===void 0&&(Z[10]={}),r=Z[9][pe.key];const Pe={};if(Z[10][pe.key]===void 0){Pe.title=pe.row.title,C=pe.row.items,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.items=C,C=pe.row.type,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.type=C,C=pe.row.width,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.width=C,Pe.y=pe.row.y,Pe.ref=pe.__ref,m=Pe.is||"TmdbRow";let We;if(typeof m=="string"){if(We=l.components&&l.components[m]||d[m],!We)throw new Error('Component "TmdbRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(We=m);Z[10][pe.key]=We.call(null,{props:Pe},Z[9][pe.key],i),Z[10][pe.key][Symbol.for("slots")][0]?(r=Z[10][pe.key][Symbol.for("slots")][0],w=Z[10][pe.key],v=!0):r=Z[10][pe.key][Symbol.for("children")][0]}let $e=()=>{(typeof Ie>"u"||Ie.indexOf("items")===-1)&&Z[9][pe.key].set("items",pe.row.items)};y($e,null),Te.push($e);let Xe=()=>{(typeof Ie>"u"||Ie.indexOf("type")===-1)&&Z[9][pe.key].set("type",pe.row.type)};y(Xe,null),Te.push(Xe);let et=()=>{(typeof Ie>"u"||Ie.indexOf("width")===-1)&&Z[9][pe.key].set("width",pe.row.width)};y(et,null),Te.push(et),Z[10][pe.key][Symbol.for("props")].items=pe.row.items,Z[10][pe.key][Symbol.for("props")].type=pe.row.type,Z[10][pe.key][Symbol.for("props")].width=pe.row.width}return Te};let q;return y(()=>{i[Symbol.for("removeGlobalEffects")](q),q=null,q=k(i.rows,s,fe)},"rows"),s},effects:[function(r,i,l,d,y,x){(typeof skip1>"u"||skip1.indexOf("src")===-1)&&i[1].set("src",r.src)},function(r,i,l,d,y,x){i[2][Symbol.for("props")].src=r.src},function(r,i,l,d,y,x){i[4].set("y",{transition:{value:r.contentY,duration:r.duration}})},function(r,i,l,d,y,x){i[4].set("alpha",{transition:{value:r.alpha,duration:r.duration}})},function(r,i,l,d,y,x){i[6].set("content",r.title)},function(r,i,l,d,y,x){i[7].set("content",r.overview)},function(r,i,l,d,y,x){i[8].set("y",{transition:{value:r.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(c){const r=this.$select("row"+c);r&&r.$focus&&r.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await jS("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await el(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await el(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await jS("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await el(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await el("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await el("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",c=>{this.focused===0&&(this.src=c.background,this.title=c.title,this.overview=c.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),S_=ut.Component("MenuSprite",{code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1),r=s[0];const T={};s[1]=this.element({parent:r||"root"},v===!0?w:i),T.src="assets/menusprite.png",T.x=748,T.y=120,T.w=425,T.h=340,s[1].populate(T),v===!0&&(I-=1),r=s[0];const L={};s[2]=this.element({parent:r||"root"},v===!0?w:i),L.y=680,L.x=560,s[2].populate(L),v===!0&&(I-=1);const j=l.components&&l.components.Sprite||d.Sprite;r=s[2];const U={};s[3]=this.element({parent:r||"root"},v===!0?w:i),U.image="assets/menusprite.png",U.x=0,U.w=140,U.h=140,U.map=i.map,U.frame=i.icon1;const V=[];if(typeof j<"u")for(let Te in j.config.props)delete U[j.config.props[Te]],V.push(j.config.props[Te]);s[3].populate(U),v===!0&&(I-=1),r=s[3];const z={};z.image="assets/menusprite.png",z.x=0,z.w=140,z.h=140,z.map=i.map,C=i.icon1,Array.isArray(C)===!0&&(C=x(C).slice(0)),z.frame=C,m=z.is||"Sprite";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||d[m],!G)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);s[4]=G.call(null,{props:z},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],w=s[4],v=!0):r=s[4][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Q=l.components&&l.components.Sprite||d.Sprite;r=s[2];const te={};s[5]=this.element({parent:r||"root"},v===!0?w:i),te.image="assets/menusprite.png",te.x=220,te.w=140,te.h=140,te.map=i.map,te.frame="icon2";const le=[];if(typeof Q<"u")for(let Te in Q.config.props)delete te[Q.config.props[Te]],le.push(Q.config.props[Te]);s[5].populate(te),v===!0&&(I-=1),r=s[5];const he={};he.image="assets/menusprite.png",he.x=220,he.w=140,he.h=140,he.map=i.map,he.frame="icon2",m=he.is||"Sprite";let fe;if(typeof m=="string"){if(fe=l.components&&l.components[m]||d[m],!fe)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);s[6]=fe.call(null,{props:he},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],w=s[6],v=!0):r=s[6][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const k=l.components&&l.components.Sprite||d.Sprite;r=s[2];const q={};s[7]=this.element({parent:r||"root"},v===!0?w:i),q.image="assets/menusprite.png",q.x=440,q.w=140,q.h=140,q.map=i.map,q.frame="icon3";const Y=[];if(typeof k<"u")for(let Te in k.config.props)delete q[k.config.props[Te]],Y.push(k.config.props[Te]);s[7].populate(q),v===!0&&(I-=1),r=s[7];const Z={};Z.image="assets/menusprite.png",Z.x=440,Z.w=140,Z.h=140,Z.map=i.map,Z.frame="icon3",m=Z.is||"Sprite";let K;if(typeof m=="string"){if(K=l.components&&l.components[m]||d[m],!K)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(K=m);s[8]=K.call(null,{props:Z},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],w=s[8],v=!0):r=s[8][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const ee=l.components&&l.components.Sprite||d.Sprite;r=s[2];const re={};s[9]=this.element({parent:r||"root"},v===!0?w:i),re.image="assets/menusprite.png",re.x=660,re.w=140,re.h=140,re.map=i.map,re.frame="icon4_unfocus";const ce=[];if(typeof ee<"u")for(let Te in ee.config.props)delete re[ee.config.props[Te]],ce.push(ee.config.props[Te]);s[9].populate(re),v===!0&&(I-=1),r=s[9];const we={};we.image="assets/menusprite.png",we.x=660,we.w=140,we.h=140,we.map=i.map,we.frame="icon4_unfocus",m=we.is||"Sprite";let be;if(typeof m=="string"){if(be=l.components&&l.components[m]||d[m],!be)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(be=m);return s[10]=be.call(null,{props:we},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],w=s[10],v=!0):r=s[10][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){(typeof skip3>"u"||skip3.indexOf("frame")===-1)&&i[3].set("frame",r.icon1)},function(r,i,l,d,y,x){i[4][Symbol.for("props")].frame=r.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),oh=["menu"],C_=ut.Component("Sprites",{components:{MenuSprite:S_},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1);const T=l.components&&l.components.MenuSprite||d.MenuSprite;r=s[0];const L={};s[1]=this.element({parent:r||"root"},v===!0?w:i),L.show=i.currentSprite==="menu";const j=[];if(typeof T<"u")for(let z in T.config.props)delete L[T.config.props[z]],j.push(T.config.props[z]);s[1].populate(L),v===!0&&(I-=1),r=s[1];const U={};C=i.currentSprite==="menu",Array.isArray(C)===!0&&(C=x(C).slice(0)),U.show=C,m=U.is||"MenuSprite";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||d[m],!V)throw new Error('Component "MenuSprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);return s[2]=V.call(null,{props:U},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],w=s[2],v=!0):r=s[2][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){(typeof skip1>"u"||skip1.indexOf("show")===-1)&&i[1].set("show",r.currentSprite==="menu")},function(r,i,l,d,y,x){i[2][Symbol.for("props")].show=r.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const c=oh.indexOf(this.currentSprite);c<oh.length-1?this.currentSprite=oh[c+1]:this.currentSprite=oh[0]}}}),bh=ut.Component("Button",{code:{render:function(r,i,l,d,y,x){const s=[],m={};return s[0]=this.element({parent:r||"root"},i),m.w=300,m.h=80,m.color=i.color||"0xff0000ff",m.effects=[i.shader("radius",{radius:20})],m.alpha={transition:i.alpha},m.scale={transition:i.scale},m.rotation=i.rotate,s[0].populate(m),s},effects:[function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20})])},function(r,i,l,d,y,x){i[0].set("alpha",{transition:r.alpha})},function(r,i,l,d,y,x){i[0].set("scale",{transition:r.scale})},function(r,i,l,d,y,x){i[0].set("rotation",r.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),T_=ut.Component("Menu",{components:{Button:bh},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),I.x={transition:i.x},I.w=400,I.h=1080,I.color="{right: '0x64748baa', left: '0x475569aa'}",s[0].populate(I),w===!0&&(v-=1),r=s[0];const O={};s[1]=this.element({parent:r||"root"},w===!0?C:i),O.x=50,O.y=40,s[1].populate(O),w===!0&&(v-=1);const T=l.components&&l.components.Button||d.Button;r=s[1];const L={};s[2]=this.element({parent:r||"root"},w===!0?C:i),L.color="0xe4e4e7ff",L.ref="menu1";const j=[];if(typeof T<"u")for(let we in T.config.props)delete L[T.config.props[we]],j.push(T.config.props[we]);s[2].populate(L),w===!0&&(v-=1),r=s[2];const U={};U.color="0xe4e4e7ff",U.ref="menu1",m=U.is||"Button";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||d[m],!V)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[3]=V.call(null,{props:U},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],C=s[3],w=!0):r=s[3][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const z=l.components&&l.components.Button||d.Button;r=s[1];const G={};s[4]=this.element({parent:r||"root"},w===!0?C:i),G.color="0xe4e4e7ff",G.y=100,G.ref="menu2";const Q=[];if(typeof z<"u")for(let we in z.config.props)delete G[z.config.props[we]],Q.push(z.config.props[we]);s[4].populate(G),w===!0&&(v-=1),r=s[4];const te={};te.color="0xe4e4e7ff",te.y=100,te.ref="menu2",m=te.is||"Button";let le;if(typeof m=="string"){if(le=l.components&&l.components[m]||d[m],!le)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(le=m);s[5]=le.call(null,{props:te},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],C=s[5],w=!0):r=s[5][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const he=l.components&&l.components.Button||d.Button;r=s[1];const fe={};s[6]=this.element({parent:r||"root"},w===!0?C:i),fe.color="0xe4e4e7ff",fe.y=200,fe.ref="menu3";const k=[];if(typeof he<"u")for(let we in he.config.props)delete fe[he.config.props[we]],k.push(he.config.props[we]);s[6].populate(fe),w===!0&&(v-=1),r=s[6];const q={};q.color="0xe4e4e7ff",q.y=200,q.ref="menu3",m=q.is||"Button";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||d[m],!Y)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[7]=Y.call(null,{props:q},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],C=s[7],w=!0):r=s[7][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const Z=l.components&&l.components.Button||d.Button;r=s[1];const K={};s[8]=this.element({parent:r||"root"},w===!0?C:i),K.color="0xe4e4e7ff",K.y=300,K.ref="menu4";const ee=[];if(typeof Z<"u")for(let we in Z.config.props)delete K[Z.config.props[we]],ee.push(Z.config.props[we]);s[8].populate(K),w===!0&&(v-=1),r=s[8];const re={};re.color="0xe4e4e7ff",re.y=300,re.ref="menu4",m=re.is||"Button";let ce;if(typeof m=="string"){if(ce=l.components&&l.components[m]||d[m],!ce)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ce=m);return s[9]=ce.call(null,{props:re},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],C=s[9],w=!0):r=s[9][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),s},effects:[function(r,i,l,d,y,x){i[0].set("x",{transition:r.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const c=this.$select(`menu${this.focused}`);c&&c.$focus&&c.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),E_=ut.Component("FocusHandling",{components:{Menu:T_,Button:bh},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1),r=s[0];const T={};s[1]=this.element({parent:r||"root"},v===!0?w:i),T.x=300,T.y=150,s[1].populate(T),v===!0&&(I-=1);const L=l.components&&l.components.Button||d.Button;r=s[1];const j={};s[2]=this.element({parent:r||"root"},v===!0?w:i),j.color="0xef4444ff",j.x=0,j.ref="button1",j.z=i.focused===1?1:0;const U=[];if(typeof L<"u")for(let Qe in L.config.props)delete j[L.config.props[Qe]],U.push(L.config.props[Qe]);s[2].populate(j),v===!0&&(I-=1),r=s[2];const V={};V.color="0xef4444ff",V.x=0,V.ref="button1",C=i.focused===1?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),V.z=C,m=V.is||"Button";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||d[m],!z)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[3]=z.call(null,{props:V},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],w=s[3],v=!0):r=s[3][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const G=l.components&&l.components.Button||d.Button;r=s[1];const Q={};s[4]=this.element({parent:r||"root"},v===!0?w:i),Q.color="0xf97316ff",Q.x=320,Q.ref="button2",Q.z=i.focused===2?1:0;const te=[];if(typeof G<"u")for(let Qe in G.config.props)delete Q[G.config.props[Qe]],te.push(G.config.props[Qe]);s[4].populate(Q),v===!0&&(I-=1),r=s[4];const le={};le.color="0xf97316ff",le.x=320,le.ref="button2",C=i.focused===2?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),le.z=C,m=le.is||"Button";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||d[m],!he)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);s[5]=he.call(null,{props:le},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],w=s[5],v=!0):r=s[5][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const fe=l.components&&l.components.Button||d.Button;r=s[1];const k={};s[6]=this.element({parent:r||"root"},v===!0?w:i),k.color="0x84cc16ff",k.x=640,k.ref="button3",k.z=i.focused===3?1:0;const q=[];if(typeof fe<"u")for(let Qe in fe.config.props)delete k[fe.config.props[Qe]],q.push(fe.config.props[Qe]);s[6].populate(k),v===!0&&(I-=1),r=s[6];const Y={};Y.color="0x84cc16ff",Y.x=640,Y.ref="button3",C=i.focused===3?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),Y.z=C,m=Y.is||"Button";let Z;if(typeof m=="string"){if(Z=l.components&&l.components[m]||d[m],!Z)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Z=m);s[7]=Z.call(null,{props:Y},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],w=s[7],v=!0):r=s[7][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const K=l.components&&l.components.Button||d.Button;r=s[1];const ee={};s[8]=this.element({parent:r||"root"},v===!0?w:i),ee.color="0x10b981ff",ee.x=0,ee.y=100,ee.ref="button4",ee.z=i.focused===4?1:0;const re=[];if(typeof K<"u")for(let Qe in K.config.props)delete ee[K.config.props[Qe]],re.push(K.config.props[Qe]);s[8].populate(ee),v===!0&&(I-=1),r=s[8];const ce={};ce.color="0x10b981ff",ce.x=0,ce.y=100,ce.ref="button4",C=i.focused===4?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.z=C,m=ce.is||"Button";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||d[m],!we)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);s[9]=we.call(null,{props:ce},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],w=s[9],v=!0):r=s[9][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const be=l.components&&l.components.Button||d.Button;r=s[1];const Te={};s[10]=this.element({parent:r||"root"},v===!0?w:i),Te.color="0x06b6d4ff",Te.y=100,Te.x=320,Te.ref="button5",Te.z=i.focused===5?1:0;const ke=[];if(typeof be<"u")for(let Qe in be.config.props)delete Te[be.config.props[Qe]],ke.push(be.config.props[Qe]);s[10].populate(Te),v===!0&&(I-=1),r=s[10];const pe={};pe.color="0x06b6d4ff",pe.y=100,pe.x=320,pe.ref="button5",C=i.focused===5?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),pe.z=C,m=pe.is||"Button";let Le;if(typeof m=="string"){if(Le=l.components&&l.components[m]||d[m],!Le)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Le=m);s[11]=Le.call(null,{props:pe},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],w=s[11],v=!0):r=s[11][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const $=l.components&&l.components.Button||d.Button;r=s[1];const Ie={};s[12]=this.element({parent:r||"root"},v===!0?w:i),Ie.color="0x3b82f6ff",Ie.y=100,Ie.x=640,Ie.ref="button6",Ie.z=i.focused===6?1:0;const Pe=[];if(typeof $<"u")for(let Qe in $.config.props)delete Ie[$.config.props[Qe]],Pe.push($.config.props[Qe]);s[12].populate(Ie),v===!0&&(I-=1),r=s[12];const $e={};$e.color="0x3b82f6ff",$e.y=100,$e.x=640,$e.ref="button6",C=i.focused===6?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),$e.z=C,m=$e.is||"Button";let Xe;if(typeof m=="string"){if(Xe=l.components&&l.components[m]||d[m],!Xe)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Xe=m);s[13]=Xe.call(null,{props:$e},s[12],i),s[13][Symbol.for("slots")][0]?(r=s[13][Symbol.for("slots")][0],w=s[13],v=!0):r=s[13][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const et=l.components&&l.components.Button||d.Button;r=s[1];const We={};s[14]=this.element({parent:r||"root"},v===!0?w:i),We.color="0x8b5cf6ff",We.y=200,We.x=0,We.ref="button7",We.z=i.focused===7?1:0;const nt=[];if(typeof et<"u")for(let Qe in et.config.props)delete We[et.config.props[Qe]],nt.push(et.config.props[Qe]);s[14].populate(We),v===!0&&(I-=1),r=s[14];const me={};me.color="0x8b5cf6ff",me.y=200,me.x=0,me.ref="button7",C=i.focused===7?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),me.z=C,m=me.is||"Button";let wt;if(typeof m=="string"){if(wt=l.components&&l.components[m]||d[m],!wt)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(wt=m);s[15]=wt.call(null,{props:me},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],w=s[15],v=!0):r=s[15][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const ft=l.components&&l.components.Button||d.Button;r=s[1];const ot={};s[16]=this.element({parent:r||"root"},v===!0?w:i),ot.color="0xd946efff",ot.y=200,ot.x=320,ot.ref="button8",ot.z=i.focused===8?1:0;const St=[];if(typeof ft<"u")for(let Qe in ft.config.props)delete ot[ft.config.props[Qe]],St.push(ft.config.props[Qe]);s[16].populate(ot),v===!0&&(I-=1),r=s[16];const tt={};tt.color="0xd946efff",tt.y=200,tt.x=320,tt.ref="button8",C=i.focused===8?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),tt.z=C,m=tt.is||"Button";let rt;if(typeof m=="string"){if(rt=l.components&&l.components[m]||d[m],!rt)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(rt=m);s[17]=rt.call(null,{props:tt},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],w=s[17],v=!0):r=s[17][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Ge=l.components&&l.components.Button||d.Button;r=s[1];const ze={};s[18]=this.element({parent:r||"root"},v===!0?w:i),ze.color="0xf43f5eff",ze.y=200,ze.x=640,ze.ref="button9",ze.z=i.focused===9?1:0;const Oe=[];if(typeof Ge<"u")for(let Qe in Ge.config.props)delete ze[Ge.config.props[Qe]],Oe.push(Ge.config.props[Qe]);s[18].populate(ze),v===!0&&(I-=1),r=s[18];const W={};W.color="0xf43f5eff",W.y=200,W.x=640,W.ref="button9",C=i.focused===9?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),W.z=C,m=W.is||"Button";let Ve;if(typeof m=="string"){if(Ve=l.components&&l.components[m]||d[m],!Ve)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ve=m);s[19]=Ve.call(null,{props:W},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],w=s[19],v=!0):r=s[19][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const qe=l.components&&l.components.Menu||d.Menu;r=s[0];const ht={};s[20]=this.element({parent:r||"root"},v===!0?w:i),ht.ref="menu";const vt=[];if(typeof qe<"u")for(let Qe in qe.config.props)delete ht[qe.config.props[Qe]],vt.push(qe.config.props[Qe]);s[20].populate(ht),v===!0&&(I-=1),r=s[20];const Ae={};Ae.ref="menu",m=Ae.is||"Menu";let Ue;if(typeof m=="string"){if(Ue=l.components&&l.components[m]||d[m],!Ue)throw new Error('Component "Menu" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);return s[21]=Ue.call(null,{props:Ae},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],w=s[21],v=!0):r=s[21][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){(typeof skip2>"u"||skip2.indexOf("z")===-1)&&i[2].set("z",r.focused===1?1:0)},function(r,i,l,d,y,x){i[3][Symbol.for("props")].z=r.focused===1?1:0},function(r,i,l,d,y,x){(typeof skip4>"u"||skip4.indexOf("z")===-1)&&i[4].set("z",r.focused===2?1:0)},function(r,i,l,d,y,x){i[5][Symbol.for("props")].z=r.focused===2?1:0},function(r,i,l,d,y,x){(typeof skip6>"u"||skip6.indexOf("z")===-1)&&i[6].set("z",r.focused===3?1:0)},function(r,i,l,d,y,x){i[7][Symbol.for("props")].z=r.focused===3?1:0},function(r,i,l,d,y,x){(typeof skip8>"u"||skip8.indexOf("z")===-1)&&i[8].set("z",r.focused===4?1:0)},function(r,i,l,d,y,x){i[9][Symbol.for("props")].z=r.focused===4?1:0},function(r,i,l,d,y,x){(typeof skip10>"u"||skip10.indexOf("z")===-1)&&i[10].set("z",r.focused===5?1:0)},function(r,i,l,d,y,x){i[11][Symbol.for("props")].z=r.focused===5?1:0},function(r,i,l,d,y,x){(typeof skip12>"u"||skip12.indexOf("z")===-1)&&i[12].set("z",r.focused===6?1:0)},function(r,i,l,d,y,x){i[13][Symbol.for("props")].z=r.focused===6?1:0},function(r,i,l,d,y,x){(typeof skip14>"u"||skip14.indexOf("z")===-1)&&i[14].set("z",r.focused===7?1:0)},function(r,i,l,d,y,x){i[15][Symbol.for("props")].z=r.focused===7?1:0},function(r,i,l,d,y,x){(typeof skip16>"u"||skip16.indexOf("z")===-1)&&i[16].set("z",r.focused===8?1:0)},function(r,i,l,d,y,x){i[17][Symbol.for("props")].z=r.focused===8?1:0},function(r,i,l,d,y,x){(typeof skip18>"u"||skip18.indexOf("z")===-1)&&i[18].set("z",r.focused===9?1:0)},function(r,i,l,d,y,x){i[19][Symbol.for("props")].z=r.focused===9?1:0}],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(c){const r=this.$select(`button${c}`);r&&r.$focus&&r.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const c=this.focused-1;if(c===0){const r=this.$select("menu");r&&r.$focus&&r.$focus()}else this.focused=Math.max(c,1)},a(){const c=this.$select("menu");c&&c.$focus&&c.$focus()}}}),b_=ut.Component("Positioning",{code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),s[0].populate(I),w===!0&&(v-=1),r=s[0];const O={};s[1]=this.element({parent:r||"root"},w===!0?C:i),O.w=100,O.h=100,O.x=20,O.y=20,O.color="0xecfeffff",s[1].populate(O),w===!0&&(v-=1),r=s[0];const T={};s[2]=this.element({parent:r||"root"},w===!0?C:i),T.w=100,T.h=100,T.x=140,T.y=20,T.color="0xa5f3fcff",s[2].populate(T),w===!0&&(v-=1),r=s[0];const L={};s[3]=this.element({parent:r||"root"},w===!0?C:i),L.w=100,L.h=100,L.x=260,L.y=20,L.color="0x22d3eeff",s[3].populate(L),w===!0&&(v-=1),r=s[0];const j={};s[4]=this.element({parent:r||"root"},w===!0?C:i),j.w=100,j.h=100,j.x=380,j.y=20,j.color="0x0891b2ff",s[4].populate(j),w===!0&&(v-=1),r=s[0];const U={};s[5]=this.element({parent:r||"root"},w===!0?C:i),U.w=100,U.h=100,U.x=i.x1,U.y=i.y,U.color="0xfdf4ffff",s[5].populate(U),w===!0&&(v-=1),r=s[0];const V={};s[6]=this.element({parent:r||"root"},w===!0?C:i),V.w=100,V.h=100,V.x=i.x2,V.y=i.y,V.color="0xf5d0feff",s[6].populate(V),w===!0&&(v-=1),r=s[0];const z={};s[7]=this.element({parent:r||"root"},w===!0?C:i),z.w=100,z.h=100,z.x=i.x3,z.y=i.y,z.color="0xe879f9ff",s[7].populate(z),w===!0&&(v-=1),r=s[0];const G={};s[8]=this.element({parent:r||"root"},w===!0?C:i),G.w=100,G.h=100,G.x=i.x4,G.y=i.y,G.color="0xc026d3ff",s[8].populate(G),w===!0&&(v-=1),r=s[0];const Q={};s[9]=this.element({parent:r||"root"},w===!0?C:i),Q.w=100,Q.h=100,Q.x=i.xA,Q.y=260,Q.color="0xfff7edff",s[9].populate(Q),w===!0&&(v-=1),r=s[0];const te={};s[10]=this.element({parent:r||"root"},w===!0?C:i),te.w=100,te.h=100,te.x=i.xB,te.y=260,te.color="0xfed7aaff",s[10].populate(te),w===!0&&(v-=1),r=s[0];const le={};s[11]=this.element({parent:r||"root"},w===!0?C:i),le.w=100,le.h=100,le.x=i.xC,le.y=260,le.color="0xfb923cff",s[11].populate(le),w===!0&&(v-=1),r=s[0];const he={};s[12]=this.element({parent:r||"root"},w===!0?C:i),he.w=100,he.h=100,he.x=i.xD,he.y=260,he.color="0xea580cff",s[12].populate(he),w===!0&&(v-=1),r=s[0];const fe={};s[13]=this.element({parent:r||"root"},w===!0?C:i),fe.w=800,fe.h=800,fe.y=20,fe.x=800,fe.color="0xecfdf5ff",s[13].populate(fe),w===!0&&(v-=1),r=s[13];const k={};s[14]=this.element({parent:r||"root"},w===!0?C:i),k.w=600,k.h=600,k.y=20,k.x=20,k.color="0xa7f3d0ff",s[14].populate(k),w===!0&&(v-=1),r=s[14];const q={};s[15]=this.element({parent:r||"root"},w===!0?C:i),q.w=400,q.h=400,q.y=100,q.x=20,q.color="0x34d399ff",s[15].populate(q),w===!0&&(v-=1),r=s[15];const Y={};s[16]=this.element({parent:r||"root"},w===!0?C:i),Y.w=200,Y.h=100,Y.y=(400-100)/2,Y.x=(400-200)/2,Y.color="0x059669ff",s[16].populate(Y),w===!0&&(v-=1),r=s[16];const Z={};s[17]=this.element({parent:r||"root"},w===!0?C:i),Z.w=50,Z.h=50,Z.y={transition:i.yNested},Z.x={transition:i.xNested},Z.color="0x065f46ff",s[17].populate(Z),w===!0&&(v-=1),r=s[0];const K={};s[18]=this.element({parent:r||"root"},w===!0?C:i),K.w=100,K.h=100,K.y=500,K.x=20,K.color="0xe11d48ff",s[18].populate(K),w===!0&&(v-=1),r=s[0];const ee={};s[19]=this.element({parent:r||"root"},w===!0?C:i),ee.w=200,ee.h=200,ee.x=50,ee.y=700,ee.color="0x94a3b8ff",ee.z=100,s[19].populate(ee),w===!0&&(v-=1),r=s[19];const re={};s[20]=this.element({parent:r||"root"},w===!0?C:i),re.content="Lightning!",re.x=100,re.y=140,re.__textnode=!0,s[20].populate(re),w===!0&&(v-=1),r=s[19];const ce={};s[21]=this.element({parent:r||"root"},w===!0?C:i),ce.w=300,ce.h=100,ce.color="0x475569ff",s[21].populate(ce),w===!0&&(v-=1);const we=l.components&&l.components.Circle||d.Circle;r=s[19];const be={};s[22]=this.element({parent:r||"root"},w===!0?C:i),be.x=150,be.y=150,be.size=100,be.color="0xffffffff";const Te=[];if(typeof we<"u")for(let rt in we.config.props)delete be[we.config.props[rt]],Te.push(we.config.props[rt]);s[22].populate(be),w===!0&&(v-=1),r=s[22];const ke={};ke.x=150,ke.y=150,ke.size=100,ke.color="0xffffffff",m=ke.is||"Circle";let pe;if(typeof m=="string"){if(pe=l.components&&l.components[m]||d[m],!pe)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);s[23]=pe.call(null,{props:ke},s[22],i),s[23][Symbol.for("slots")][0]?(r=s[23][Symbol.for("slots")][0],C=s[23],w=!0):r=s[23][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),r=s[0];const Le={};s[24]=this.element({parent:r||"root"},w===!0?C:i),Le.w=300,Le.h=300,Le.x=50,Le.y=700,Le.color="0xef444480",s[24].populate(Le),w===!0&&(v-=1),r=s[0];const $={};s[25]=this.element({parent:r||"root"},w===!0?C:i),$.w=400,$.h=100,$.x=800,$.y=900,$.color="0x0284c7ff",s[25].populate($),w===!0&&(v-=1),r=s[25];const Ie={};s[26]=this.element({parent:r||"root"},w===!0?C:i),Ie.w=r.node.width*(42/100),Ie.h=r.node.height*(30/100),Ie.y=r.node.height*(5/100),Ie.x=r.node.width*(1/100),Ie.color="0x075985ff",s[26].populate(Ie),w===!0&&(v-=1),r=s[25];const Pe={};s[27]=this.element({parent:r||"root"},w===!0?C:i),Pe.w=i.bar2.v,Pe.h=r.node.height*(30/100),Pe.y=r.node.height*(35/100),Pe.x=r.node.width*(1/100),Pe.color="0x6b21a8ff",s[27].populate(Pe),w===!0&&(v-=1),r=s[25];const $e={};s[28]=this.element({parent:r||"root"},w===!0?C:i),$e.w={transition:i.bar3},$e.h=r.node.height*(30/100),$e.y=r.node.height*(65/100),$e.x=r.node.width*(1/100),$e.color="0x9f1239ff",s[28].populate($e),w===!0&&(v-=1),r=s[0];const Xe={};s[29]=this.element({parent:r||"root"},w===!0?C:i),Xe.w=250,Xe.h=250,Xe.color="0xfef08aff",Xe.x=450,Xe.y=700,s[29].populate(Xe),w===!0&&(v-=1),r=s[29];const et={};s[30]=this.element({parent:r||"root"},w===!0?C:i),et.w=40,et.h=40,et.placement="left",et.color="0x818cf8ff",s[30].populate(et),w===!0&&(v-=1),r=s[29];const We={};s[31]=this.element({parent:r||"root"},w===!0?C:i),We.w=40,We.h=40,We.placement="center",We.color="0x2563ebff",s[31].populate(We),w===!0&&(v-=1),r=s[29];const nt={};s[32]=this.element({parent:r||"root"},w===!0?C:i),nt.w=40,nt.h=40,nt.placement="right",nt.color="0x1e40afff",s[32].populate(nt),w===!0&&(v-=1),r=s[29];const me={};s[33]=this.element({parent:r||"root"},w===!0?C:i),me.w=40,me.h=40,me.x=54,me.placement="top",me.color="0xf472b6ff",s[33].populate(me),w===!0&&(v-=1),r=s[29];const wt={};s[34]=this.element({parent:r||"root"},w===!0?C:i),wt.w=40,wt.h=40,wt.x=54,wt.placement="middle",wt.color="0xdb2777ff",s[34].populate(wt),w===!0&&(v-=1),r=s[29];const ft={};s[35]=this.element({parent:r||"root"},w===!0?C:i),ft.w=40,ft.h=40,ft.x=54,ft.placement="bottom",ft.color="0xbe185dff",s[35].populate(ft),w===!0&&(v-=1),r=s[29];const ot={};s[36]=this.element({parent:r||"root"},w===!0?C:i),ot.w=40,ot.h=40,ot.placement="{x: 'center', y: 'bottom'}",ot.color="0xa3e635ff",s[36].populate(ot),w===!0&&(v-=1),r=s[29];const St={};s[37]=this.element({parent:r||"root"},w===!0?C:i),St.w=40,St.h=40,St.placement="{x: 'right', y: 'middle'}",St.color="0x65a30dff",s[37].populate(St),w===!0&&(v-=1),r=s[29];const tt={};return s[38]=this.element({parent:r||"root"},w===!0?C:i),tt.w=40,tt.h=40,tt.placement="{x: 'center', y: 'middle'}",tt.color="0x4d7c0fff",s[38].populate(tt),w===!0&&(v-=1),s},effects:[function(r,i,l,d,y,x){i[9].set("x",r.xA)},function(r,i,l,d,y,x){i[10].set("x",r.xB)},function(r,i,l,d,y,x){i[11].set("x",r.xC)},function(r,i,l,d,y,x){i[12].set("x",r.xD)},function(r,i,l,d,y,x){i[16].set("y",(400-100)/2)},function(r,i,l,d,y,x){i[16].set("x",(400-200)/2)},function(r,i,l,d,y,x){i[17].set("y",{transition:r.yNested})},function(r,i,l,d,y,x){i[17].set("x",{transition:r.xNested})},function(r,i,l,d,y,x){i[27].set("w",r.bar2.v)},function(r,i,l,d,y,x){i[28].set("w",{transition:r.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const c=parseFloat(this.bar2.v),r=this.bar2.direction==="up"?c+10:c-10;this.bar2.v=r+"%",r>=90&&(this.bar2.direction="down"),r<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var A_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k_(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var NC={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(c){(function(){var r=typeof window<"u"?window:A_,i={};(function(d,y,x){var s;function m(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var C=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function w(e){e=[typeof globalThis=="object"&&globalThis,e,typeof d=="object"&&d,typeof self=="object"&&self,typeof y=="object"&&y];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var v=w(this);function I(e,t){if(t)e:{var n=v;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))break e;n=n[a]}e=e[e.length-1],o=n[e],t=t(o),t!=o&&t!=null&&C(n,e,{configurable:!0,writable:!0,value:t})}}I("Symbol",function(e){function t(u){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(o+(u||"")+"_"+a++,u)}function n(u,f){this.g=u,C(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return t}),I("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var o=v[t[n]];typeof o=="function"&&typeof o.prototype[e]!="function"&&C(o.prototype,e,{configurable:!0,writable:!0,value:function(){return O(m(this))}})}return e});function O(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function T(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:m(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function L(e){if(!(e instanceof Array)){e=T(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var j=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},U;if(typeof Object.setPrototypeOf=="function")U=Object.setPrototypeOf;else{var V;e:{var z={a:!0},G={};try{G.__proto__=z,V=G.a;break e}catch{}V=!1}U=V?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Q=U;function te(e,t){if(e.prototype=j(t.prototype),e.prototype.constructor=e,Q)Q(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(e,n,o)}else e[n]=t[n];e.hk=t.prototype}function le(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function he(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}le.prototype.s=function(e){this.h=e};function fe(e,t){e.i={sg:t,Fg:!0},e.g=e.m||e.j}le.prototype.return=function(e){this.i={return:e},this.g=this.j};function k(e,t,n){return e.g=n,{value:t}}le.prototype.u=function(e){this.g=e};function q(e){e.g=0}function Y(e,t,n){e.m=t,n!=null&&(e.j=n)}function Z(e,t){e.m=0,e.j=t||0}function K(e,t,n){e.g=t,e.m=n||0}function ee(e,t){return e.m=t||0,t=e.i.sg,e.i=null,t}function re(e){e.A=[e.i],e.m=0,e.j=0}function ce(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Fg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function we(e){this.g=new le,this.h=e}function be(e,t){he(e.g);var n=e.g.l;return n?Te(e,"return"in n?n.return:function(o){return{value:o,done:!0}},t,e.g.return):(e.g.return(t),ke(e))}function Te(e,t,n,o){try{var a=t.call(e.g.l,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.o=!1,a;var u=a.value}catch(f){return e.g.l=null,fe(e.g,f),ke(e)}return e.g.l=null,o.call(e.g,u),ke(e)}function ke(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,fe(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Fg)throw t.sg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function pe(e){this.next=function(t){return he(e.g),e.g.l?t=Te(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=ke(e)),t},this.throw=function(t){return he(e.g),e.g.l?t=Te(e,e.g.l.throw,t,e.g.s):(fe(e.g,t),t=ke(e)),t},this.return=function(t){return be(e,t)},this[Symbol.iterator]=function(){return this}}function Le(e){function t(o){return e.next(o)}function n(o){return e.throw(o)}return new Promise(function(o,a){function u(f){f.done?o(f.value):Promise.resolve(f.value).then(t,n).then(u,a)}u(e.next())})}function $(e){return Le(new pe(new we(e)))}function Ie(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}I("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{f(h.resolve,h.reject)}catch(p){h.reject(p)}}function n(){this.g=null}function o(f){return f instanceof t?f:new t(function(h){h(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(f)};var a=v.setTimeout;n.prototype.i=function(f){a(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var h=0;h<f.length;++h){var p=f[h];f[h]=null;try{p()}catch(g){this.j(g)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(g){return function(S){p||(p=!0,g.call(h,S))}}var h=this,p=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var h=f!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(f):this.m(f)}},t.prototype.C=function(f){var h=void 0;try{h=f.then}catch(p){this.l(p);return}typeof h=="function"?this.I(h,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,h){if(this.h!=0)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.h);this.h=f,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var f=this;a(function(){if(f.B()){var h=v.console;typeof h<"u"&&h.error(f.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var f=v.CustomEvent,h=v.Event,p=v.dispatchEvent;return typeof p>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof h=="function"?f=new h("unhandledrejection",{cancelable:!0}):(f=v.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,p(f))},t.prototype.A=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)u.h(this.g[f]);this.g=null}};var u=new n;return t.prototype.H=function(f){var h=this.j();f.Ed(h.resolve,h.reject)},t.prototype.I=function(f,h){var p=this.j();try{f.call(h,p.resolve,p.reject)}catch(g){p.reject(g)}},t.prototype.then=function(f,h){function p(A,b){return typeof A=="function"?function(M){try{g(A(M))}catch(_){S(_)}}:b}var g,S,E=new t(function(A,b){g=A,S=b});return this.Ed(p(f,g),p(h,S)),E},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.Ed=function(f,h){function p(){switch(g.h){case 1:f(g.i);break;case 2:h(g.i);break;default:throw Error("Unexpected state: "+g.h)}}var g=this;this.g==null?u.h(p):this.g.push(p),this.o=!0},t.resolve=o,t.reject=function(f){return new t(function(h,p){p(f)})},t.race=function(f){return new t(function(h,p){for(var g=T(f),S=g.next();!S.done;S=g.next())o(S.value).Ed(h,p)})},t.all=function(f){var h=T(f),p=h.next();return p.done?o([]):new t(function(g,S){function E(M){return function(_){A[M]=_,b--,b==0&&g(A)}}var A=[],b=0;do A.push(void 0),b++,o(p.value).Ed(E(A.length-1),S),p=h.next();while(!p.done)})},t});function Pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}I("WeakMap",function(e){function t(p){if(this.g=(h+=Math.random()+1).toString(),p){p=T(p);for(var g;!(g=p.next()).done;)g=g.value,this.set(g[0],g[1])}}function n(){}function o(p){var g=typeof p;return g==="object"&&p!==null||g==="function"}function a(p){if(!Pe(p,f)){var g=new n;C(p,f,{value:g})}}function u(p){var g=Object[p];g&&(Object[p]=function(S){return S instanceof n?S:(Object.isExtensible(S)&&a(S),g(S))})}if(function(){if(!e||!Object.seal)return!1;try{var p=Object.seal({}),g=Object.seal({}),S=new e([[p,2],[g,3]]);return S.get(p)!=2||S.get(g)!=3?!1:(S.delete(p),S.set(g,4),!S.has(p)&&S.get(g)==4)}catch{return!1}}())return e;var f="$jscomp_hidden_"+Math.random();u("freeze"),u("preventExtensions"),u("seal");var h=0;return t.prototype.set=function(p,g){if(!o(p))throw Error("Invalid WeakMap key");if(a(p),!Pe(p,f))throw Error("WeakMap key fail: "+p);return p[f][this.g]=g,this},t.prototype.get=function(p){return o(p)&&Pe(p,f)?p[f][this.g]:void 0},t.prototype.has=function(p){return o(p)&&Pe(p,f)&&Pe(p[f],this.g)},t.prototype.delete=function(p){return o(p)&&Pe(p,f)&&Pe(p[f],this.g)?delete p[f][this.g]:!1},t}),I("Map",function(e){function t(){var h={};return h.Mb=h.next=h.head=h}function n(h,p){var g=h[1];return O(function(){if(g){for(;g.head!=h[1];)g=g.Mb;for(;g.next!=g.head;)return g=g.next,{done:!1,value:p(g)};g=null}return{done:!0,value:void 0}})}function o(h,p){var g=p&&typeof p;g=="object"||g=="function"?u.has(p)?g=u.get(p):(g=""+ ++f,u.set(p,g)):g="p_"+p;var S=h[0][g];if(S&&Pe(h[0],g))for(h=0;h<S.length;h++){var E=S[h];if(p!==p&&E.key!==E.key||p===E.key)return{id:g,list:S,index:h,entry:E}}return{id:g,list:S,index:-1,entry:void 0}}function a(h){if(this[0]={},this[1]=t(),this.size=0,h){h=T(h);for(var p;!(p=h.next()).done;)p=p.value,this.set(p[0],p[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),p=new e(T([[h,"s"]]));if(p.get(h)!="s"||p.size!=1||p.get({x:4})||p.set({x:4},"t")!=p||p.size!=2)return!1;var g=p.entries(),S=g.next();return S.done||S.value[0]!=h||S.value[1]!="s"?!1:(S=g.next(),!(S.done||S.value[0].x!=4||S.value[1]!="t"||!g.next().done))}catch{return!1}}())return e;var u=new WeakMap;a.prototype.set=function(h,p){h=h===0?0:h;var g=o(this,h);return g.list||(g.list=this[0][g.id]=[]),g.entry?g.entry.value=p:(g.entry={next:this[1],Mb:this[1].Mb,head:this[1],key:h,value:p},g.list.push(g.entry),this[1].Mb.next=g.entry,this[1].Mb=g.entry,this.size++),this},a.prototype.delete=function(h){return h=o(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this[0][h.id],h.entry.Mb.next=h.entry.next,h.entry.next.Mb=h.entry.Mb,h.entry.head=null,this.size--,!0):!1},a.prototype.clear=function(){this[0]={},this[1]=this[1].Mb=t(),this.size=0},a.prototype.has=function(h){return!!o(this,h).entry},a.prototype.get=function(h){return(h=o(this,h).entry)&&h.value},a.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},a.prototype.keys=function(){return n(this,function(h){return h.key})},a.prototype.values=function(){return n(this,function(h){return h.value})},a.prototype.forEach=function(h,p){for(var g=this.entries(),S;!(S=g.next()).done;)S=S.value,h.call(p,S[1],S[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var f=0;return a}),I("Set",function(e){function t(n){if(this.g=new Map,n){n=T(n);for(var o;!(o=n.next()).done;)this.add(o.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),o=new e(T([n]));if(!o.has(n)||o.size!=1||o.add(n)!=o||o.size!=1||o.add({x:4})!=o||o.size!=2)return!1;var a=o.entries(),u=a.next();return u.done||u.value[0]!=n||u.value[1]!=n?!1:(u=a.next(),u.done||u.value[0]==n||u.value[0].x!=4||u.value[1]!=u.value[0]?!1:a.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,o){var a=this;this.g.forEach(function(u){return n.call(o,u,u,a)})},t)});function $e(e,t){e instanceof String&&(e+="");var n=0,o=!1,a={next:function(){if(!o&&n<e.length){var u=n++;return{value:t(u,e[u]),done:!1}}return o=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}I("Array.prototype.keys",function(e){return e||function(){return $e(this,function(t){return t})}});function Xe(e,t,n){e instanceof String&&(e=String(e));for(var o=e.length,a=0;a<o;a++){var u=e[a];if(t.call(n,u,a,e))return{Dg:a,v:u}}return{Dg:-1,v:void 0}}I("Array.prototype.findIndex",function(e){return e||function(t,n){return Xe(this,t,n).Dg}}),I("Array.from",function(e){return e||function(t,n,o){n=n??function(h){return h};var a=[],u=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof u=="function"){t=u.call(t);for(var f=0;!(u=t.next()).done;)a.push(n.call(o,u.value,f++))}else for(u=t.length,f=0;f<u;f++)a.push(n.call(o,t[f],f));return a}}),I("Array.prototype.values",function(e){return e||function(){return $e(this,function(t,n){return n})}}),I("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),I("Array.prototype.includes",function(e){return e||function(t,n){var o=this;o instanceof String&&(o=String(o));var a=o.length;for(n=n||0,0>n&&(n=Math.max(n+a,0));n<a;n++){var u=o[n];if(u===t||Object.is(u,t))return!0}return!1}});function et(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}I("String.prototype.includes",function(e){return e||function(t,n){return et(this,t,"includes").indexOf(t,n||0)!==-1}}),I("String.fromCodePoint",function(e){return e||function(t){for(var n="",o=0;o<arguments.length;o++){var a=Number(arguments[o]);if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),n+=String.fromCharCode(a&1023|56320))}return n}}),I("Array.prototype.find",function(e){return e||function(t,n){return Xe(this,t,n).v}}),I("String.prototype.startsWith",function(e){return e||function(t,n){var o=et(this,t,"startsWith"),a=o.length,u=t.length;n=Math.max(0,Math.min(n|0,o.length));for(var f=0;f<u&&n<a;)if(o[n++]!=t[f++])return!1;return f>=u}}),I("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=T(n);for(var o;!(o=n.next()).done;)this.add(o.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),o=Object.seal({}),a=new e([n]);return!a.has(n)||a.has(o)?!1:(a.delete(n),a.add(o),!a.has(n)&&a.has(o))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)});var We=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var a in o)Pe(o,a)&&(e[a]=o[a])}return e};I("Object.assign",function(e){return e||We}),I("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),I("Array.prototype.entries",function(e){return e||function(){return $e(this,function(t,n){return[t,n]})}}),I("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),I("String.prototype.repeat",function(e){return e||function(t){var n=et(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var o="";t;)t&1&&(o+=n),(t>>>=1)&&(n+=n);return o}}),I("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),I("Object.values",function(e){return e||function(t){var n=[],o;for(o in t)Pe(t,o)&&n.push(t[o]);return n}}),I("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),I("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),I("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),I("Object.entries",function(e){return e||function(t){var n=[],o;for(o in t)Pe(t,o)&&n.push([o,t[o]]);return n}});var nt=this||self;function me(e,t){e=e.split(".");var n=nt;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)e.length||t===void 0?n[o]&&n[o]!==Object.prototype[o]?n=n[o]:n=n[o]={}:n[o]=t}function wt(){}function ft(){}function ot(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}ot.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function St(e){return e.h/(1-Math.pow(e.g,e.i))}function tt(){this.h=new ot(2),this.j=new ot(5),this.g=0,this.i=128e3,this.l=16e3}tt.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},tt.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},tt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(St(this.h),St(this.j))};function rt(){}function Ge(){}function ze(){}function Oe(e){var t=Ie.apply(1,arguments);ht.has(e)||(ht.add(e),ze.apply(rt,L(t)))}function W(){}function Ve(){}function qe(){}var ht=new Set;d.console&&(ze=function(){return console.warn.apply(console,L(Ie.apply(0,arguments)))},Ge=function(){console.error.apply(console,L(Ie.apply(0,arguments)))});function vt(){this.g={}}s=vt.prototype,s.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},s.get=function(e){return(e=this.g[e])?e.slice():null},s.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},s.forEach=function(e){for(var t in this.g)e(t,this.g[t])},s.size=function(){return Object.keys(this.g).length},s.keys=function(){return Object.keys(this.g)};function Ae(){this.g=new vt}s=Ae.prototype,s.release=function(){this.Ra(),this.g=null},s.D=function(e,t,n,o){this.g&&(e=new Ue(e,t,n,o),this.g.push(t,e))},s.ha=function(e,t,n,o){function a(f){u.jb(e,t,a),n(f)}var u=this;this.D(e,t,a,o)},s.jb=function(e,t,n){if(this.g){var o=this.g.get(t)||[];o=T(o);for(var a=o.next();!a.done;a=o.next())a=a.value,a.target!=e||n!=a.listener&&n||(a.jb(),this.g.remove(t,a))}},s.Ra=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,L(e.g[n]));for(e=T(t),t=e.next();!t.done;t=e.next())t.value.jb();this.g.g={}}},me("shaka.util.EventManager",Ae),Ae.prototype.removeAll=Ae.prototype.Ra,Ae.prototype.unlisten=Ae.prototype.jb,Ae.prototype.listenOnce=Ae.prototype.ha,Ae.prototype.listen=Ae.prototype.D,Ae.prototype.release=Ae.prototype.release;function Ue(e,t,n,o){this.target=e,this.type=t,this.listener=n,this.g=Qe(e,o),this.target.addEventListener(t,n,this.g)}Ue.prototype.jb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Qe(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(o){return!n.has(o)}),Se(e)?t:t.capture||!1}function Se(e){var t=ae;if(t==null){t=!1;try{var n={},o={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",o),Object.defineProperty(n,"capture",o),o=function(){},e.addEventListener("test",o,n),e.removeEventListener("test",o,n)}catch{t=!1}ae=t}return t||!1}var ae=void 0;function Ne(e){if(Ut.has(e))return Ut.get(e);if(d.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return Ut.set(e,t),t}return d.MediaSource?(t=MediaSource.isTypeSupported(e),Ut.set(e,t),t):!1}function xt(){return!!d.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var Ut=new Map;function Ft(e,t){this.g=e,this.h=t}Ft.prototype.toString=function(){return"v"+this.g+"."+this.h};function Tt(e,t){var n=new Ft(5,0),o=li,a=o.g,u=n.h-a.h;(0<(n.g-a.g||u)?o.i:o.h)(o.g,n,e,t)}function Vt(e,t,n,o){ze([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",o].join(" "))}function un(e,t,n,o){Ge([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",o].join(" "))}var li=null;function Xn(){}Xn.prototype.extract=function(){},Xn.prototype.decode=function(){return[]},Xn.prototype.clear=function(){},Xn.prototype.getStreams=function(){return[]};function Nn(){}Nn.prototype.init=function(){},Nn.prototype.parse=function(){return[]};function Un(){}function bn(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Qn(e)==Qn(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Me(e);t=Me(t);for(var o=0;o<e.byteLength;o++)if(n[o]!=t[o])return!1;return!0}function Qn(e){return e instanceof ArrayBuffer?e:e.buffer}function pn(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Me(e,t,n){return n=n===void 0?1/0:n,vn(e,t===void 0?0:t,n,Uint8Array)}function Fe(e,t,n){return n=n===void 0?1/0:n,vn(e,t===void 0?0:t,n,Uint16Array)}function Qt(e,t,n){return n=n===void 0?1/0:n,vn(e,t===void 0?0:t,n,DataView)}function vn(e,t,n,o){var a=Qn(e),u=1;"BYTES_PER_ELEMENT"in o&&(u=o.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/u;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/u,f))),new o(a,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}me("shaka.util.BufferUtils",Un),Un.toDataView=Qt,Un.toUint16=Fe,Un.toUint8=Me,Un.toArrayBuffer=pn,Un.equal=bn;function Cn(){}Cn.prototype.init=function(){},Cn.prototype.i=function(){},Cn.prototype.g=function(){},Cn.prototype.j=function(){},me("shaka.media.IClosedCaptionParser",Cn);function cn(e){this.l=new Nn,(e=An[e.toLowerCase()])&&(this.l=e()),this.h=new Xn,(e=kn)&&(this.h=e())}cn.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},cn.prototype.i=function(e){e=this.l.parse(e),e=T(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Me(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},cn.prototype.g=function(){this.h.clear()},cn.prototype.j=function(){return this.h.getStreams()},me("shaka.media.ClosedCaptionParser",cn),cn.findDecoder=function(){return kn},cn.unregisterDecoder=function(){kn=null},cn.registerDecoder=function(e){kn=e},cn.findParser=function(e){return An[e]},cn.unregisterParser=function(e){delete An[e]},cn.registerParser=function(e,t){An[e]=t};var An={},kn=null;function Fn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ct,this.scroll=Ze}me("shaka.text.CueRegion",Fn);var Ct=1;Fn.units={PX:0,PERCENTAGE:Ct,LINES:2};var Ze="";Fn.scrollMode={NONE:Ze,UP:"up"};function Pn(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Ht(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=Pn),e.length!=t.length)return!1;t=t.slice(),e=T(e);for(var o=e.next(),a={};!o.done;a={Gg:void 0},o=e.next()){if(a.Gg=o.value,o=t.findIndex(function(u){return function(f){return n(u.Gg,f)}}(a)),o==-1)return!1;t[o]=t[t.length-1],t.pop()}return t.length==0}function hn(e,t,n){if(n||(n=Pn),e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0}function Lt(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Fn,this.position=null,this.positionAlign=yo,this.size=0,this.textAlign=lt,this.direction=vo,this.writingMode=yi,this.lineInterpretation=ro,this.line=null,this.lineHeight="",this.lineAlign=xo,this.displayAlign=dt,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=so,this.fontStyle=Bo,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={dc:32,rows:15}}function gi(e,t){return e=new Lt(e,t,""),e.lineBreak=!0,e}Lt.prototype.clone=function(){var e=new Lt(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function xn(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!hn(e.nestedCues,t.nestedCues,xn))return!1}else if(n=="region"||n=="cellResolution"){for(var o in e[n])if(e[n][o]!=t[n][o])return!1}else if(Array.isArray(e[n])){if(!hn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}me("shaka.text.Cue",Lt),Lt.equal=xn,Lt.prototype.clone=Lt.prototype.clone;var yo="auto";Lt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:yo};var lt="center",Re={LEFT:"left",RIGHT:"right",CENTER:lt,START:"start",END:"end"};Lt.textAlign=Re;var dt="after",oo={BEFORE:"before",CENTER:"center",AFTER:dt};Lt.displayAlign=oo;var vo="ltr";Lt.direction={HORIZONTAL_LEFT_TO_RIGHT:vo,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var yi="horizontal-tb";Lt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:yi,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ro=0;Lt.lineInterpretation={LINE_NUMBER:ro,PERCENTAGE:1};var xo="start",Dr={CENTER:"center",START:xo,END:"end"};Lt.lineAlign=Dr;var Gt={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Lt.defaultTextColor=Gt;var Et={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Lt.defaultTextBackgroundColor=Et;var so=400;Lt.fontWeight={NORMAL:so,BOLD:700};var Bo="normal",Or={NORMAL:Bo,ITALIC:"italic",OBLIQUE:"oblique"};Lt.fontStyle=Or,Lt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Vi(){}Vi.prototype.destroy=function(){};function Li(e,t,n){Rh[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ie:t}}function Hi(e,t){for(var n=e.toLowerCase().split(";")[0],o=T([Nm,Lh,_h,hr]),a=o.next();!a.done;a=o.next())if(a=Rh[n+"-"+a.value]){var u=a.ie(),f=u.isSupported(e,t);if(u.destroy(),f)return a.ie}return null}me("shaka.transmuxer.TransmuxerEngine",Vi),Vi.findTransmuxer=Hi,Vi.unregisterTransmuxer=function(e,t){delete Rh[e.toLowerCase().split(";")[0]+"-"+t]},Vi.registerTransmuxer=Li,Vi.prototype.destroy=Vi.prototype.destroy;var Rh={},hr=1,_h=2,Lh=3,Nm=4;Vi.PluginPriority={FALLBACK:hr,PREFERRED_SECONDARY:_h,PREFERRED:Lh,APPLICATION:Nm};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var $C=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function wn(e){var t;e instanceof wn?(Cl(this,e.Bb),this.uc=e.uc,Tl(this,e.Eb),Ph(this,e.Mc),this.Pa=e.Pa,Na(this,e.g.clone()),this.ec=e.ec):e&&(t=String(e).match($C))?(Cl(this,t[1]||"",!0),this.uc=Ua(t[2]||""),Tl(this,t[3]||"",!0),Ph(this,t[4]),this.Pa=Ua(t[5]||"",!0),Na(this,t[6]||"",!0),this.ec=Ua(t[7]||"")):this.g=new ja(null)}s=wn.prototype,s.Bb="",s.uc="",s.Eb="",s.Mc=null,s.Pa="",s.ec="",s.toString=function(){var e=[],t=this.Bb;if(t&&e.push(Ba(t,Um,!0),":"),t=this.Eb){e.push("//");var n=this.uc;n&&e.push(Ba(n,Um,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Mc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Eb&&t.charAt(0)!="/"&&e.push("/"),e.push(Ba(t,t.charAt(0)=="/"?HC:VC,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.ec)&&e.push("#",Ba(t,XC)),e.join("")},s.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new wn);var n=!!e.Bb;n?Cl(t,e.Bb):n=!!e.uc,n?t.uc=e.uc:n=!!e.Eb,n?Tl(t,e.Eb):n=e.Mc!=null;var o=e.Pa;if(n)Ph(t,e.Mc);else if(n=!!e.Pa){if(o.charAt(0)!="/")if(this.Eb&&!this.Pa)o="/"+o;else{var a=t.Pa.lastIndexOf("/");a!=-1&&(o=t.Pa.substr(0,a+1)+o)}if(o==".."||o==".")o="";else if(o.indexOf("./")!=-1||o.indexOf("/.")!=-1){a=o.lastIndexOf("/",0)==0,o=o.split("/");for(var u=[],f=0;f<o.length;){var h=o[f++];h=="."?a&&f==o.length&&u.push(""):h==".."?((1<u.length||u.length==1&&u[0]!="")&&u.pop(),a&&f==o.length&&u.push("")):(u.push(h),a=!0)}o=u.join("/")}}return n?t.Pa=o:n=e.g.toString()!=="",n?Na(t,e.g.clone()):n=!!e.ec,n&&(t.ec=e.ec),t},s.clone=function(){return new wn(this)};function Cl(e,t,n){e.Bb=n?Ua(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function Tl(e,t,n){e.Eb=n?Ua(t,!0):t}function Ph(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Mc=t}else e.Mc=null}function Na(e,t,n){t instanceof ja?e.g=t:(n||(t=Ba(t,GC)),e.g=new ja(t))}function Ua(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Ba(e,t,n){return e!=null?(e=encodeURI(e).replace(t,zC),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zC(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Um=/[#\/\?@]/g,VC=/[#\?:]/g,HC=/[#\?]/g,GC=/[#\?@]/g,XC=/#/g;function ja(e){this.g=e||null}function El(e){if(!e.Ka&&(e.Ka={},e.Xc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var o=t[n].indexOf("="),a=null;if(0<=o){var u=t[n].substring(0,o);a=t[n].substring(o+1)}else u=t[n];u=decodeURIComponent(u.replace(/\+/g," ")),a=a||"",e.add(u,decodeURIComponent(a.replace(/\+/g," ")))}}s=ja.prototype,s.Ka=null,s.Xc=null;function Bm(e){return El(e),e.Xc}s.add=function(e,t){El(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Xc++,this},s.set=function(e,t){return El(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},s.get=function(e){return El(this),this.Ka[e]||[]},s.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),o=this.Ka[t],a=0;a<o.length;a++){var u=n;o[a]!==""&&(u+="="+encodeURIComponent(o[a])),e.push(u)}return this.g=e.join("&")},s.clone=function(){var e=new ja;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Xc=this.Xc}return e};function ne(e,t,n){var o=Ie.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=o,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(a){this.stack=a.stack}}ne.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},me("shaka.util.Error",ne),ne.Severity={RECOVERABLE:1,CRITICAL:2},ne.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},ne.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function ls(e){this.h=e,this.g=void 0}ls.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function jm(e,t){return e.length&&t.length&&e!==t?0<Dh(e,t).length:!0}function Dh(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=T(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;for(var a=T(t),u=a.next();!u.done;u=a.next())if(u=u.value,o.keySystem==u.keySystem){a=new Map;for(var f=T((o.initData||[]).concat(u.initData||[])),h=f.next();!h.done;h=f.next())h=h.value,a.set(h.keyId,h);a=Array.from(a.values()),f=o.keyIds&&u.keyIds?new Set([].concat(L(o.keyIds),L(u.keyIds))):o.keyIds||u.keyIds,n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||u.persistentStateRequired,videoRobustness:o.videoRobustness||u.videoRobustness,audioRobustness:o.audioRobustness||u.audioRobustness,serverCertificate:o.serverCertificate||u.serverCertificate,serverCertificateUri:o.serverCertificateUri||u.serverCertificateUri,initData:a,keyIds:f});break}}return n}function Oh(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var bl=new ls(function(){return pn(new Uint8Array([0]))}),Al=new Map;function Fa(e){this.h=e,this.g=null}Fa.prototype.Y=function(e){var t=this;this.stop();var n=!0,o=null;return this.g=function(){d.clearTimeout(o),n=!1},o=d.setTimeout(function(){n&&t.h()},1e3*e),this},Fa.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function bt(e){this.h=e,this.g=null}bt.prototype.tc=function(){return this.stop(),this.h(),this},bt.prototype.Y=function(e){var t=this;return this.stop(),this.g=new Fa(function(){t.h()}).Y(e),this},bt.prototype.Sa=function(e){var t=this;return this.stop(),this.g=new Fa(function(){t.g.Y(e),t.h()}).Y(e),this},bt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},me("shaka.util.Timer",bt),bt.prototype.stop=bt.prototype.stop,bt.prototype.tickEvery=bt.prototype.Sa,bt.prototype.tickAfter=bt.prototype.Y,bt.prototype.tickNow=bt.prototype.tc;function wo(){var e=d.ManagedMediaSource||d.MediaSource;return!!(e&&e.isTypeSupported)}function $a(e){return $m().canPlayType(e)!=""}function za(){return!!navigator.userAgent.match(/Edge?\//)}function Mo(){return Xt("Xbox One")}function Ro(){return Xt("Tizen")}function Va(){return Xt("Tizen 3")}function kl(){return Xt("Tizen 2")}function _o(){return Xt("Web0S")}function Il(){return _o()&&Nh()===38}function Pi(){return Xt("CrKey")}function Nh(){if(!Xt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function fs(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ro()&&!Xt("PC=EOS")&&!Xt("PC=APL")&&!Xt("VirginMedia")&&!Uh()&&!Lo()&&!Xt("AFT")&&!Xt("WPE")&&!Xt("DT_STB_BCM")}function Ml(){return Xt("PlayStation 5")}function Lo(){return Xt("PlayStation 4")}function Rl(){return Xt("Hisense")||Xt("VIDAA")}function Uh(){return Xt("SOPOpenBrowser")}function cs(){if(!fs())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Bh(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function _l(){return Xt("Android")}function Fm(){return!!(Ro()||_o()||Mo()||Lo()||Ml()||Xt("AFT")||Xt("PC=EOS")||Xt("PC=APL")||Xt("VirginMedia")||Uh()||Xt("WPE")||Pi()||Rl()||Xt("DT_STB_BCM"))}function Xt(e){return(navigator.userAgent||"").includes(e)}function $m(){return hs||(jh||(jh=new bt(function(){hs=null})),(hs=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(hs=document.createElement("video")),jh.Y(1),hs)}function Ll(e){return e?e===d.shakaMediaKeysPolyfill:!!d.shakaMediaKeysPolyfill}function zm(){var e,t,n,o,a,u,f,h,p,g,S,E,A,b,M;return $(function(_){switch(_.g){case 1:if(e={width:1/0,height:1/0},Pi()){if(E=d.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,Y(_,15),!(A=E)){_.u(17);break}return k(_,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(Ro()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{ze("Tizen: Error detecting screen size, default screen size 1920x1080.")}_.u(3);break}if(Mo()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,o=new n.Media.Protection.ProtectionCapabilities,a=n.Media.Protection.ProtectionCapabilityResult,u=null;do u=o.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===a.maybe);u===a.probably&&(e.width=3840,e.height=2160)}catch{ze("Xbox: Error detecting screen size, default screen size 1920x1080.")}_.u(3);break}if(_o()){try{f=JSON.parse(d.PalmSystem.deviceInfo),e.width=Math.max(1920,f.screenWidth),e.height=Math.max(1080,f.screenHeight)}catch{ze("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}_.u(3);break}if(Rl()){d.Hisense_Get4KSupportState&&d.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),_.u(3);break}if(!Lo()&&!Ml()){_.u(3);break}return h=!1,Y(_,9),k(_,d.msdk.device.getDisplayInfo(),11);case 11:p=_.h,h=p.resolution==="4K",K(_,10);break;case 9:return ee(_),Y(_,12),k(_,d.msdk.device.getDisplayInfoImmediate(),14);case 14:g=_.h,h=g.resolution==="4K",K(_,10);break;case 12:S=ee(_),ze("PlayStation: Failed to get the display info:",S);case 10:h?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),_.u(3);break;case 18:A=_.h;case 17:if(A){e.width=3840,e.height=2160,_.u(19);break}if(!(b=E)){_.u(20);break}return k(_,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:b=_.h;case 20:b&&(e.width=1920,e.height=1080);case 19:K(_,3);break;case 15:M=ee(_),Ge("Failed to check canDisplayType:",M);case 3:return _.return(e)}})}var jh=null,hs=null;function Nr(){}function nn(e){if(!e)return"";if(e=Me(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),d.TextDecoder&&!Lo())return e=new TextDecoder().decode(e),e.includes("�")&&Ge('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var o=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(o=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(o=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(o=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):o=e[n],65535>=o)t+=String.fromCharCode(o);else{o-=65536;var a=o&1023;t+=String.fromCharCode(55296+(o>>10)),t+=String.fromCharCode(56320+a)}}return t}function jo(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new ne(2,2,2004);n=Math.floor(e.byteLength/2);var o=new Uint16Array(n);e=Qt(e);for(var a=0;a<n;a++)o[a]=e.getUint16(2*a,t);return $h(o)}function Fo(e){function t(o){return n.byteLength<=o||32<=n[o]&&126>=n[o]}if(!e)return"";var n=Me(e);if(n[0]==239&&n[1]==187&&n[2]==191)return nn(n);if(n[0]==254&&n[1]==255)return jo(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return jo(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return jo(e,!1);if(n[1]==0&&n[3]==0)return jo(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return nn(e);throw new ne(2,2,2003)}function So(e){if(d.TextEncoder&&!Lo()){var t=new TextEncoder;return pn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return pn(t)}function Fh(e,t){for(var n=new ArrayBuffer(2*e.length),o=new DataView(n),a=0;a<e.length;++a)o.setUint16(2*a,e.charCodeAt(a),t);return n}function $h(e){return Vm.value()(e)}function fi(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(a){return a[1]=="#"?(a=a[2]=="x"||a[2]=="X"?parseInt(a.substring(3),16):parseInt(a.substring(2),10),0<=a&&1114111>=a?String.fromCodePoint(a):""):t[a]||"'"}):e||""}me("shaka.util.StringUtils",Nr),Nr.resetFromCharCode=function(){Vm.g=void 0},Nr.toUTF16=Fh,Nr.toUTF8=So,Nr.fromBytesAutoDetect=Fo,Nr.fromUTF16=jo,Nr.fromUTF8=nn;var Vm=new ls(function(){function e(n){try{var o=new Uint8Array(n);return 0<String.fromCharCode.apply(null,o).length}catch{return!1}}for(var t={ac:65536};0<t.ac;t={ac:t.ac},t.ac/=2)if(e(t.ac))return function(n){return function(o){for(var a="",u=0;u<o.length;u+=n.ac)a+=String.fromCharCode.apply(null,o.subarray(u,u+n.ac));return a}}(t);return null});function ti(){}function Hm(e){return e=$h(Me(e)),btoa(e)}function Ur(e,t){return t=t??!0,e=Hm(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Gi(e){e=d.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Br(e){for(var t=e.length/2,n=new Uint8Array(t),o=0;o<t;o++)n[o]=d.parseInt(e.substr(2*o,2),16);return n}function $o(e){var t=Me(e);e="",t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function mn(){for(var e=Ie.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var o=n=0;o<e.length;++o){var a=e[o];a instanceof Uint8Array?t.set(a,n):t.set(Me(a),n),n+=a.byteLength}return t}me("shaka.util.Uint8ArrayUtils",ti),ti.concat=mn,ti.toHex=$o,ti.fromHex=Br,ti.fromBase64=Gi,ti.toBase64=Ur,ti.toStandardBase64=Hm;function Wn(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new wn(e[0]);return t=new wn(t[0]),[n.resolve(t).toString()]}t=t.map(function(f){return new wn(f)}),n=[],e=T(e);for(var o=e.next();!o.done;o=e.next()){o=new wn(o.value);for(var a=T(t),u=a.next();!u.done;u=a.next())n.push(o.resolve(u.value).toString())}return n}function jr(e,t,n,o){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},o&&(e.keySystemUris=new Set([o])),e}function Gm(e,t){t=t===void 0?"cenc":t;var n=[],o=[],a=[];e.forEach(function(f,h){var p=h;p.length!=22&&(p=Ur(Br(h),!1));var g=f;g.length!=22&&(g=Ur(Br(f),!1)),f={kty:"oct",kid:p,k:g},n.push(f),o.push(f.kid),a.push(h)}),e=JSON.stringify({keys:n});var u=JSON.stringify({kids:o});return u=[{initData:Me(So(u)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+d.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:u,keyIds:new Set(a)}}function ds(e,t){if(t.length==1)return t[0];if(e=vi(e,t),e!=null)return e;throw new ne(2,4,4025,t)}function vi(e,t){for(var n=T(Xm[e]),o=n.next();!o.done;o=n.next()){o=o.value;for(var a=T(t),u=a.next();!u.done;u=a.next())if(u=u.value,o.test(u.trim()))return u.trim()}return e==Rt?"":null}function zh(e,t){var n=[];e=T(Xm[e]);for(var o=e.next();!o.done;o=e.next()){o=o.value;for(var a=T(t),u=a.next();!u.done;u=a.next())u=u.value,o.test(u.trim())&&n.push(u.trim())}return n}var Rt="text",Mn={ga:"video",X:"audio",ua:Rt,De:"image",gj:"application"},WC=1/15,Xm={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Vh(){}function Rn(e,t){var n=e;return t&&!dr.includes(e)&&(n+='; codecs="'+t+'"'),n}function Fr(e,t){return t&&(e+='; codecs="'+t+'"'),e}function ps(e,t,n){var o=Rn(e,t);return t=Fr(e,t),Hi(t)?(e=Hi(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?o.replace("video","audio"):o,n}function YC(e,t,n){var o=[t];return qC.forEach(function(a,u){var f=e[u];u=="codecs"?dr.includes(e.mimeType)||o.push('codecs="'+n+'"'):f&&o.push(a+'="'+f+'"')}),e.hdr=="PQ"&&o.push('eotf="smpte2084"'),o.join(";")}function Pl(e){return e.split(";")[0].split("/")[1]}function ci(e){var t=Ym(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function ms(e){var t=[];e=T(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Ym(n.value),t.push(n[0]);return t.sort().join(",")}function ao(e){return e.split(";")[0]}function Di(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Wm(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Ym(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}me("shaka.util.MimeUtils",Vh),Vh.getFullTypeWithAllCodecs=Fr,Vh.getFullType=Rn;var qC=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),dr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function zo(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function Ha(e){return _n[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!kn:!1}zo.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function KC(e,t,n,o,a){var u,f,h,p,g,S,E;return $(function(A){if(A.g==1)return k(A,Promise.resolve(),2);if(!e.i||!e.j)return A.return();if(n==null||o==null)return e.i.parseInit(Me(t)),A.return();for(u=e.B?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:o,vttOffset:u},h=e.i.parseMedia(Me(t),f,a),p=T(h),g=p.next();!g.done;g=p.next())S=g.value,e.A(S,a||null,f);E=h.filter(function(b){return b.startTime>=e.l&&b.startTime<e.m}),e.j.append(E),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(o,e.m),q(A)})}zo.prototype.remove=function(e,t){var n=this;return $(function(o){if(o.g==1)return k(o,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),q(o)})};function QC(e,t,n){e.l=t,e.m=n}function qm(e,t,n){if(e.C=t,t=e.o.get(t))for(var o=T(t.keys()),a=o.next();!a.done;a=o.next())(a=t.get(a.value).filter(function(u){return u.endTime<=n}))&&e.j.append(a)}function Km(e,t,n){t.startTime+=n,t.endTime+=n,t=T(t.nestedCues);for(var o=t.next();!o.done;o=t.next())Km(e,o.value,n)}function ZC(e,t,n,o,a){var u=n+" "+o,f=new Map;t=T(t);for(var h=t.next();!h.done;h=t.next()){var p=h.value;h=p.stream,p=p.cue,f.has(h)||f.set(h,new Map),f.get(h).has(u)||f.get(h).set(u,[]),Km(e,p,a),p.startTime>=e.l&&p.startTime<e.m&&(f.get(h).get(u).push(p),h==e.C&&e.j.append([p]))}for(a=T(f.keys()),u=a.next();!u.done;u=a.next())for(u=u.value,e.o.has(u)||e.o.set(u,new Map),t=T(f.get(u).keys()),h=t.next();!h.done;h=t.next())h=h.value,p=f.get(u).get(h),e.o.get(u).set(h,p);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(o,e.m))}me("shaka.text.TextEngine",zo),zo.prototype.destroy=zo.prototype.destroy,zo.findParser=function(e){return _n[e]},zo.unregisterParser=function(e){delete _n[e]},zo.registerParser=function(e,t){_n[e]=t};var _n={};function JC(e,t){return e.concat(t)}function Qm(){}function $r(e){return e!=null}function uo(){}function gs(e,t){return e=$t(e),t=$t(t),e.split("-")[0]==t.split("-")[0]}function Ga(e,t){return e=$t(e),t=$t(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Hh(e,t){return e=$t(e),t=$t(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function $t(e){e=T(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=T(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Zm.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function zr(e,t){return e=$t(e),t=$t(t),t==e?4:Ga(t,e)?3:Hh(t,e)?2:Ga(e,t)?1:0}function Gh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Zm.get(e)||e}function Xh(e){return e.language?$t(e.language):e.audio&&e.audio.language?$t(e.audio.language):e.video&&e.video.language?$t(e.video.language):"und"}function Dl(e,t){e=$t(e);var n=new Set;t=T(t);for(var o=t.next();!o.done;o=t.next())n.add($t(o.value));for(t=T(n),o=t.next();!o.done;o=t.next())if(o=o.value,o==e)return o;for(t=T(n),o=t.next();!o.done;o=t.next())if(o=o.value,Ga(o,e))return o;for(t=T(n),o=t.next();!o.done;o=t.next())if(o=o.value,Hh(o,e))return o;for(n=T(n),t=n.next();!t.done;t=n.next())if(t=t.value,Ga(e,t))return t;return null}me("shaka.util.LanguageUtils",uo),uo.findClosestLocale=Dl,uo.getLocaleForVariant=Xh,uo.getLocaleForText=function(e){return $t(e.language||"und")},uo.getBase=Gh,uo.relatedness=zr,uo.areSiblings=function(e,t){var n=Gh(e),o=Gh(t);return e!=n&&t!=o&&n==o},uo.normalize=$t,uo.isSiblingOf=Hh,uo.isParentOf=Ga,uo.areLanguageCompatible=gs,uo.areLocaleCompatible=function(e,t){return e=$t(e),t=$t(t),e==t};var Zm=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Po(e){function t(o){switch(typeof o){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return o;default:if(!o||o.buffer instanceof ArrayBuffer)return o;if(n.has(o))return null;var a=o.constructor==Array;if(o.constructor!=Object&&!a)return null;n.add(o);var u=a?[]:{},f;for(f in o)u[f]=t(o[f]);return a&&(u.length=o.length),u}}var n=new WeakSet;return t(e)}function Wh(e){var t={},n;for(n in e)t[n]=e[n];return t}function Jm(){}function eg(e,t,n,o){var a=e.variants;if((t.length||n.length)&&(a=eT(a,t,n)),o.length){for(t=new vt,a=T(a),n=a.next();!n.done;n=a.next())n=n.value,t.push(String(n.video.width||0),n);var u=[];t.forEach(function(M,_){M=0;var R=[];_=T(_);for(var B=_.next(),N={};!B.done;N={Ae:void 0},B=_.next())N.Ae=B.value,B=o.filter(function(H){return function(D){return H.Ae.decodingInfos[0][D]}}(N)).length,B>M?(M=B,R=[N.Ae]):B==M&&R.push(N.Ae);u.push.apply(u,L(R))}),a=u}n=new Set,t=new Set,a=T(a);for(var f=a.next();!f.done;f=a.next())f=f.value,f.audio&&n.add(f.audio),f.video&&t.add(f.video);n=Array.from(n).sort(function(M,_){return M.bandwidth-_.bandwidth});var h=[];for(a=new Map,n=T(n),f=n.next();!f.done;f=n.next()){f=f.value;var p=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,g=a.get(p)||[];if(g.length){var S=g[g.length-1],E=ci(S.codecs),A=ci(f.codecs);E!=A||f.bandwidth&&S.bandwidth&&!(f.bandwidth>S.bandwidth)||(g.push(f),h.push(f.id))}else g.push(f),h.push(f.id);a.set(p,g)}n=Array.from(t).sort(function(M,_){return M.bandwidth&&_.bandwidth?M.bandwidth-_.bandwidth:M.width-_.width}),t=xt();var b=[];for(a=new Map,n=T(n),f=n.next();!f.done;f=n.next()){if(f=f.value,p=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,g=a.get(p)||[],g.length){if(S=g[g.length-1],!t&&(E=ci(S.codecs),A=ci(f.codecs),E!==A))continue;f.width>S.width||f.height>S.height?(g.push(f),b.push(f.id)):f.width==S.width&&f.height==S.height&&(E=ci(S.codecs),A=ci(f.codecs),E!=A||f.bandwidth&&S.bandwidth&&!(f.bandwidth>S.bandwidth)||(g.push(f),b.push(f.id)))}else g.push(f),b.push(f.id);a.set(p,g)}e.variants=e.variants.filter(function(M){var _=M.audio;return M=M.video,!(_&&!h.includes(_.id)||M&&!b.includes(M.id))})}function eT(e,t,n){t=T(t);for(var o=t.next(),a={};!o.done;a={oh:void 0},o=t.next())if(a.oh=o.value,o=e.filter(function(u){return function(f){return f.video&&f.video.codecs.startsWith(u.oh)}}(a)),o.length){e=o;break}for(n=T(n),t=n.next(),o={};!t.done;o={ig:void 0},t=n.next())if(o.ig=t.value,t=e.filter(function(u){return function(f){return f.audio&&f.audio.codecs.startsWith(u.ig)}}(o)),t.length){e=t;break}return e}function tT(e,t,n){e.variants=e.variants.filter(function(o){return Ol(o,t,n)})}function Ol(e,t,n){function o(h,p,g){return h>=p&&h<=g}var a=e.video;if(a&&a.width&&a.height){var u=a.width,f=a.height;if(f>u&&(f=T([f,u]),u=f.next().value,f=f.next().value),!o(u,t.minWidth,Math.min(t.maxWidth,n.width))||!o(f,t.minHeight,Math.min(t.maxHeight,n.height))||!o(a.width*a.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!o(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!o(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!o(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function tg(e,t,n){var o=!1;e=T(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var u=a.allowedByApplication;a.allowedByApplication=Ol(a,t,n),u!=a.allowedByApplication&&(o=!0)}return o}function nT(e,t,n){return n=n===void 0?[]:n,$(function(o){return o.g==1?k(o,ng(e,t,0<t.offlineSessionIds.length,n),2):(sT(t),k(o,aT(t),0))})}function ng(e,t,n,o){var a,u;return $(function(f){if(f.g==1)return Mo()&&iT(t.variants),k(f,rg(t.variants,n,!1,o),2);a=null,e&&(u=e.g)&&(a=u.keySystem),t.variants=t.variants.filter(function(h){var p=oT(h,a);if(!p){var g=[];h.audio&&g.push(fg(h.audio)),h.video&&g.push(fg(h.video))}return p}),q(f)})}function iT(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=T(e);for(var o=e.next();!o.done;o=e.next())o=o.value,o.video&&n.add(o.video);for(n=T(n),e=n.next();!e.done;e=n.next()){e=e.value,o=T(Object.keys(t));for(var a=o.next();!a.done;a=o.next())if(a=a.value,e.codecs.includes(a)){e.codecs=e.codecs.replace(a,t[a]);break}}}function oT(e,t){var n=Mo(),o=Xt("Firefox")&&_l(),a=e.video,u=a&&a.width||0,f=a&&a.height||0;if(n&&a&&(1920<u||1080<f)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3.")))return!1;if(a){if(n=Xa(a.codecs),a.codecs.includes(",")){if(u=a.codecs.split(","),n=ds("video",u),n=Xa(n),u=ds("audio",u),u=ys(u,a.mimeType),f=ps(a.mimeType,u,"audio"),!Ne(f))return!1;n=[n,u].join()}if(u=ps(a.mimeType,n,"video"),!Ne(u))return!1;a.codecs=n}if(a=e.audio,o&&a&&a.encrypted&&a.codecs.toLowerCase().includes("opus"))return!1;if(a){if(o=ys(a.codecs,a.mimeType),n=ps(a.mimeType,o,"audio"),!Ne(n))return!1;a.codecs=o}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function ig(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=T(t);for(var o=t.next();!o.done;o=t.next()){var a=o.value;o=JSON.stringify(a),a=e[a],a instanceof Object?(a=ig(a),n.push(o+":"+a)):(a=JSON.stringify(a),n.push(o+":"+a))}return"{"+n.join(",")+"}"}function og(e,t){var n,o,a,u,f,h,p;return $(function(g){if(g.g==1){for(n=function(S,E){if(S){var A=Wh(S);return A.supported=S.supported&&E.supported,A.powerEfficient=S.powerEfficient&&E.powerEfficient,A.smooth=S.smooth&&E.smooth,E.keySystemAccess&&!A.keySystemAccess&&(A.keySystemAccess=E.keySystemAccess),A}return E},o=null,a=[],u=T(t),f=u.next(),h={};!f.done;h={cache:void 0,Dd:void 0},f=u.next())p=f.value,h.Dd=ig(p),h.cache=cg,h.cache[h.Dd]?o=n(o,h.cache[h.Dd]):a.push(rT(p).then(function(S){return function(E){var A=null;E=T(E||[]);for(var b=E.next();!b.done;b=E.next())A=n(A,b.value);A&&(S.cache[S.Dd]=A,o=n(o,A))}}(h)));return k(g,Promise.all(a),2)}o&&e.decodingInfos.push(o),q(g)})}function rT(e){var t=[""];e.video&&(t=Di(e.video.contentType).split(","));var n=[""];e.audio&&(n=Di(e.audio.contentType).split(","));var o=[];t=T(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;for(var u=T(n),f=u.next(),h={};!f.done;h={xc:void 0},f=u.next())f=f.value,h.xc=Po(e),e.video&&(h.xc.video.contentType=Rn(ao(h.xc.video.contentType),a)),e.audio&&(h.xc.audio.contentType=Rn(ao(h.xc.audio.contentType),f)),o.push(new Promise(function(p){return function(g,S){navigator.mediaCapabilities.decodingInfo(p.xc).then(function(E){g(E)}).catch(S)}}(h)))}return Promise.all(o).catch(function(){return JSON.stringify(e),null})}function rg(e,t,n,o){var a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F;return $(function(X){switch(X.g){case 1:if(e.some(function(J){return J.decodingInfos.length}))return X.return();a=T(o),u=a.next(),f={};case 2:if(u.done){X.u(4);break}f.Qg=u.value,h=!1,p=T(e),g=p.next();case 5:if(g.done){X.u(7);break}S=g.value,E=sg(S,t,n).filter(function(J){return function(ie){return ie=ie[0],(ie.keySystemConfiguration&&ie.keySystemConfiguration.keySystem)===J.Qg}}(f)),A=T(E),b=A.next();case 8:if(b.done){X.u(10);break}return M=b.value,k(X,og(S,M),9);case 9:b=A.next(),X.u(8);break;case 10:S.decodingInfos.length&&(h=!0),g=p.next(),X.u(5);break;case 7:if(h)return X.return();f={Qg:void 0},u=a.next(),X.u(2);break;case 4:_=T(e),R=_.next();case 12:if(R.done){X.u(0);break}B=R.value,N=sg(B,t,n).filter(function(J){return J=J[0],J=J.keySystemConfiguration&&J.keySystemConfiguration.keySystem,!J||!o.includes(J)}),H=T(N),D=H.next();case 15:if(D.done){R=_.next(),X.u(12);break}return F=D.value,k(X,og(B,F),16);case 16:D=H.next(),X.u(15)}})}function sg(e,t,n){var o=e.audio,a=e.video,u=[],f=[];if(a)for(var h=T(a.fullMimeTypes),p=h.next();!p.done;p=h.next()){p=p.value;var g=Di(p);if(g.includes(",")&&!o){var S=g.split(","),E=ao(p);g=ds("video",S),S=ds("audio",S),S=ys(S,E),E=ps(E,S,"audio"),f.push({contentType:E,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(g=Xa(g),p={contentType:ps(ao(p),g,"video"),width:a.width||64,height:a.height||64,bitrate:a.bandwidth||e.bandwidth||1,framerate:a.frameRate||1},a.hdr)switch(a.hdr){case"SDR":p.transferFunction="srgb";break;case"PQ":p.transferFunction="pq";break;case"HLG":p.transferFunction="hlg"}a.colorGamut&&(p.colorGamut=a.colorGamut),u.push(p)}if(o)for(h=T(o.fullMimeTypes),p=h.next();!p.done;p=h.next())g=p.value,p=ao(g),g=ys(Di(g),p),p=ps(p,g,"audio"),f.push({contentType:p,channels:o.channelsCount||2,bitrate:o.bandwidth||e.bandwidth||1,samplerate:o.audioSamplingRate||1,spatialRendering:o.spatialAudio});for(h=[],u.length==0&&u.push(null),f.length==0&&f.push(null),u=T(u),p=u.next();!p.done;p=u.next())for(p=p.value,g=T(f),E=g.next();!E.done;E=g.next())E=E.value,S={type:n?"file":"media-source"},p&&(S.video=p),E&&(S.audio=E),h.push(S);if(f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[h];for(e=[],n=new Map,f=T(f),u=f.next();!u.done;u=f.next())u=u.value,n.get(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u);for(f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],u=T(n.keys()),p=u.next();!p.done;p=u.next()){for(p=p.value,g=[],E=T(h),S=E.next();!S.done;S=E.next()){S=Object.assign({},S.value);var A=n.get(p),b={keySystem:p,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t};A=T(A);for(var M=A.next();!M.done;M=A.next()){if(M=M.value,M.initData&&M.initData.length){for(var _=new Set,R=T(M.initData),B=R.next();!B.done;B=R.next())_.add(B.value.initDataType);b.initDataType=M.initData[0].initDataType}M.distinctiveIdentifierRequired&&(b.distinctiveIdentifier="required"),M.persistentStateRequired&&(b.persistentState="required"),M.sessionType&&(b.sessionTypes=[M.sessionType]),o&&(b.audio?(M.encryptionScheme&&(b.audio.encryptionScheme=b.audio.encryptionScheme||M.encryptionScheme),b.audio.robustness=b.audio.robustness||M.audioRobustness):(b.audio={robustness:M.audioRobustness},M.encryptionScheme&&(b.audio.encryptionScheme=M.encryptionScheme)),b.audio.robustness==""&&delete b.audio.robustness),a&&(b.video?(M.encryptionScheme&&(b.video.encryptionScheme=b.video.encryptionScheme||M.encryptionScheme),b.video.robustness=b.video.robustness||M.videoRobustness):(b.video={robustness:M.videoRobustness},M.encryptionScheme&&(b.video.encryptionScheme=M.encryptionScheme)),b.video.robustness==""&&delete b.video.robustness)}S.keySystemConfiguration=b,g.push(S)}e.push(g)}return e}function ys(e,t){return e.toLowerCase()=="flac"?cs()?"fLaC":"flac":e.toLowerCase()==="opus"?cs()&&Pl(t)=="mp4"?"Opus":"opus":e}function Xa(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function sT(e){e.textStreams=e.textStreams.filter(function(t){return t=Rn(t.mimeType,t.codecs),Ha(t)})}function aT(e){var t,n,o,a,u,f,h;return $(function(p){switch(p.g){case 1:t=[],n=T(e.imageStreams),o=n.next();case 2:if(o.done){p.u(4);break}if(a=o.value,u=a.mimeType,u=="application/mp4"&&a.codecs=="mjpg"&&(u="image/jpg"),Bl.has(u)){p.u(5);break}if(f=fT.get(u),!f){Bl.set(u,!1),p.u(5);break}return k(p,uT(f),7);case 7:h=p.h,Bl.set(u,h);case 5:Bl.get(u)&&t.push(a),o=n.next(),p.u(2);break;case 4:e.imageStreams=t,q(p)}})}function uT(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function vs(e){var t=e.audio,n=e.video,o=t?t.mimeType:null,a=n?n.mimeType:null,u=t?t.codecs:null,f=n?n.codecs:null,h=[];f&&h.push(f),u&&h.push(u);var p=[];n&&p.push(n.mimeType),t&&p.push(t.mimeType),p=p[0]||null;var g=[];t&&g.push(t.kind),n&&g.push(n.kind),g=g[0]||null;var S=new Set;if(t)for(var E=T(t.roles),A=E.next();!A.done;A=E.next())S.add(A.value);if(n)for(E=T(n.roles),A=E.next();!A.done;A=E.next())S.add(A.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:g,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:p,audioMimeType:o,videoMimeType:a,codecs:h.join(", "),audioCodec:u,videoCodec:f,primary:e.primary,roles:Array.from(S),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,f.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Nl(e){return{id:e.id,active:!1,type:Rt,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Yh(e){var t=e.width||null,n=e.height||null,o=null;e.segmentIndex&&(o=e.segmentIndex.get(0));var a=e.tilesLayout;return o&&(a=o.tilesLayout||a),a&&t!=null&&(t/=Number(a.split("x")[0])),a&&n!=null&&(n/=Number(a.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:a||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function qh(e){return e.__shaka_id||(e.__shaka_id=lT++),e.__shaka_id}function ag(e){var t=ug(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Kh(e){var t=ug(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function ug(e){var t=e.language;return{id:qh(e),active:!1,type:"",bandwidth:0,language:$t(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Wa(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Ul(e){return e.filter(function(t){return Wa(t)})}function Ya(e,t,n,o){var a=e,u=e.filter(function(p){return p.primary});u.length&&(a=u);var f=a.length?a[0].language:"";if(a=a.filter(function(p){return p.language==f}),t){var h=Dl($t(t),e.map(function(p){return p.language}));h&&(a=e.filter(function(p){return $t(p.language)==h}))}if(a=a.filter(function(p){return p.forced==o}),n){if(e=lg(a,n),e.length)return e}else if(e=a.filter(function(p){return p.roles.length==0}),e.length)return e;return e=a.map(function(p){return p.roles}).reduce(JC,[]),e.length?lg(a,e[0]):a}function lg(e,t){return e.filter(function(n){return n.roles.includes(t)})}function fg(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}me("shaka.util.StreamUtils",Jm),Jm.meetsRestrictions=Ol;var cg={},lT=0,Bl=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),fT=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function rn(){var e=this;this.A=null,this.j=!1,this.i=new tt,this.F=new Ae,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new tt,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new bt(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}s=rn.prototype,s.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},s.release=function(){this.F.release(),this.C=null},s.init=function(e){this.A=e},s.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:d.devicePixelRatio;e=d.screen.height*n,t=d.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:d.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(g){return g&&!(g.audio&&g.audio.fastSwitching||g.video&&g.video.fastSwitching)}),n.length||(n=this.s);var o=n;if(n.length!=this.s.length&&(o=this.s.filter(function(g){return g&&!!(g.audio&&g.audio.fastSwitching||g.video&&g.video.fastSwitching)})),n=Qh(this,this.g.restrictions,o,1/0,1/0),e!=1/0||t!=1/0){n=cT(n),n=T(n);for(var a=n.next();!a.done;a=n.next())if(a=a.value,a.height>=e&&a.width>=t){e=a.height,t=a.width;break}n=Qh(this,this.g.restrictions,o,e,t)}for(e=this.getBandwidthEstimate(),o.length&&!n.length&&(n=Qh(this,null,o,1/0,1/0),n=[n[0]]),t=n[0]||null,o=0;o<n.length;o++){a=n[o];for(var u=isNaN(this.B)?1:Math.abs(this.B),f=u*a.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},p=o+1;p<n.length;p++)if(a.bandwidth!=n[p].bandwidth){h=n[p];break}u=u*h.bandwidth/this.g.bandwidthUpgradeTarget,e>=f&&e<=u&&(t.bandwidth!=a.bandwidth||t.bandwidth==a.bandwidth&&t.video&&a.video&&(t.video.width<a.video.width||t.video.height<a.video.height))&&(t=a)}return this.l=Date.now(),t},s.enable=function(){this.j=!0},s.disable=function(){this.j=!1},s.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&hg(this))},s.trySuggestStreams=function(){this.l!=null&&this.j&&hg(this)},s.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e},s.setVariants=function(e){this.s=e},s.playbackRateChanged=function(e){this.B=e},s.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in d&&(this.h=new ResizeObserver(function(){t.C.Y(hT)}),this.h.observe(this.o))},s.setCmsdManager=function(e){this.m=e},s.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function hg(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Qh(e,t,n,o,a){if(e.m){var u=e.m.zg();u&&(n=n.filter(function(f){return f.bandwidth&&u?f.bandwidth<=u:!0}))}return t&&(n=n.filter(function(f){return Ol(f,t,{width:a,height:o})})),n.sort(function(f,h){return f.bandwidth-h.bandwidth})}function cT(e){var t=[];e=T(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(o,a){return o.width-a.width})}me("shaka.abr.SimpleAbrManager",rn),rn.prototype.configure=rn.prototype.configure,rn.prototype.setCmsdManager=rn.prototype.setCmsdManager,rn.prototype.setMediaElement=rn.prototype.setMediaElement,rn.prototype.playbackRateChanged=rn.prototype.playbackRateChanged,rn.prototype.setVariants=rn.prototype.setVariants,rn.prototype.getBandwidthEstimate=rn.prototype.getBandwidthEstimate,rn.prototype.trySuggestStreams=rn.prototype.trySuggestStreams,rn.prototype.segmentDownloaded=rn.prototype.segmentDownloaded,rn.prototype.disable=rn.prototype.disable,rn.prototype.enable=rn.prototype.enable,rn.prototype.chooseVariant=rn.prototype.chooseVariant,rn.prototype.init=rn.prototype.init,rn.prototype.release=rn.prototype.release,rn.prototype.stop=rn.prototype.stop;var hT=1;me("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),me("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function jl(e,t,n,o){for(n=n===void 0?!0:n,o=o===void 0?!1:o,this.h=e,this.g=new Set([e]),t=t||[],e=T(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,o)}jl.prototype.add=function(e,t,n){return dg(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function dg(e,t,n,o){var a;if(!(a=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(a=e.audio&&t.audio)){a=e.audio;var u=t.audio;a=!!((!a.channelsCount||!u.channelsCount||2<a.channelsCount||2<u.channelsCount)&&a.channelsCount!=u.channelsCount||a.spatialAudio!==u.spatialAudio||n&&!pg(a,u)||!mg(a.roles,u.roles)||o&&a.groupId!==u.groupId)}return!(o=a)&&(o=e.video&&t.video)&&(e=e.video,t=t.video,o=!((!n||pg(e,t))&&mg(e.roles,t.roles))),!o}jl.prototype.values=function(){return this.g.values()};function pg(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(o){return ms(o)}),t=t.codecs.split(",").map(function(o){return ms(o)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function mg(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=T(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function gg(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new xs(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}gg.prototype.create=function(e){var t=this,n=this.h=="smooth"&&xt(),o=e.filter(function(a){return dg(t.i,a,!n,t.g)});return o.length?new jl(o[0],o,!n,this.g):this.j.create(e)};function xs(e,t,n,o,a,u,f,h,p,g,S){this.A=e,this.B=t,this.i=n,this.j=o,this.C=a,this.m=u,this.h=f===void 0?"":f,this.l=h===void 0?"":h,this.o=p===void 0?"reload":p,this.s=g===void 0?!1:g,this.g=S===void 0?"":S}xs.prototype.create=function(e){var t=[];t=dT(e,this.A);var n=e.filter(function(o){return o.primary});return t=t.length?t:n.length?n:e,e=pT(t,this.B),e.length&&(t=e),this.m&&(e=xT(t,this.m),e.length&&(t=e)),this.j&&(e=vT(t,this.j),e.length&&(t=e)),this.i&&(e=yT(t,this.i),e.length&&(t=e)),this.h&&(e=mT(t,this.h),e.length&&(t=e)),this.l&&(e=gT(t,this.l),e.length&&(t=e)),e=wT(t,this.C),e.length&&(t=e),this.g&&(e=ST(t,this.g),e.length&&(t=e)),new jl(t[0],t,!(this.o=="smooth"&&xt()),this.s)};function dT(e,t){t=$t(t);var n=Dl(t,e.map(function(o){return Xh(o)}));return n?e.filter(function(o){return n==Xh(o)}):[]}function pT(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function mT(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function gT(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function yT(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function vT(e,t){return t=="AUTO"&&(t=d.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function xT(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function wT(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function ST(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function CT(){this.g=qa,this.i=new Map().set(qa,2).set(ws,1),this.h=0}function yg(e,t,n){e.i.set(qa,n).set(ws,t)}var ws=0,qa=1;function vg(e,t){var n=Co();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function xg(e){var t,n;return $(function(o){if(o.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new ne(2,7,1010);return t=e.g,e.g++,t==0?o.return():(n=e.h*(1+(2*Math.random()-1)*e.o),k(o,new Promise(function(a){new bt(a).Y(n/1e3)}),2))}e.h*=e.m,q(o)})}function Co(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Wt(){var e,t,n=new Promise(function(o,a){e=o,t=a});return n.resolve=e,n.reject=t,n}Wt.prototype.resolve=function(){},Wt.prototype.reject=function(){};function Sn(e,t){this.promise=e,this.i=t,this.g=!1}function Vr(e){return new Sn(Promise.reject(e),function(){return Promise.resolve()})}function Zh(){var e=Promise.reject(new ne(2,7,7001));return e.catch(function(){}),new Sn(e,function(){return Promise.resolve()})}function Ss(e){return new Sn(Promise.resolve(e),function(){return Promise.resolve()})}function wg(e){return new Sn(e,function(){return e.catch(function(){})})}Sn.prototype.abort=function(){return this.g=!0,this.i()};function Sg(e){return new Sn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Sn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Sn.prototype.Aa=function(e,t){function n(h){return function(p){if(a.g&&h)u.reject(f);else{var g=h?e:t;g?o=TT(g,p,u):(h?u.resolve:u.reject)(p)}}}function o(){return u.reject(f),a.abort()}var a=this,u=new Wt,f=new ne(2,7,7001);return this.promise.then(n(!0),n(!1)),new Sn(u,function(){return o()})};function TT(e,t,n){try{var o=e(t);return o&&o.promise&&o.abort?(n.resolve(o.promise),function(){return o.abort()}):(n.resolve(o),function(){return Promise.resolve(o).then(function(){},function(){})})}catch(a){return n.reject(a),function(){return Promise.resolve()}}}me("shaka.util.AbortableOperation",Sn),Sn.prototype.chain=Sn.prototype.Aa,Sn.prototype.finally=Sn.prototype.finally,Sn.all=Sg,Sn.prototype.abort=Sn.prototype.abort,Sn.notAbortable=wg,Sn.completed=Ss,Sn.aborted=Zh,Sn.failed=Vr;function je(e,t){if(t)if(t instanceof Map)for(var n=T(t.keys()),o=n.next();!o.done;o=n.next())o=o.value,Object.defineProperty(this,o,{value:t.get(o),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=d.performance&&d.performance.now?d.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Cg(e){var t=new je(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}je.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},je.prototype.stopImmediatePropagation=function(){this.g=!0},je.prototype.stopPropagation=function(){},me("shaka.util.FakeEvent",je);var Fl={ij:"abrstatuschanged",jj:"adaptation",kj:"audiotrackchanged",lj:"buffering",mj:"complete",nj:"downloadfailed",oj:"downloadheadersreceived",pj:"drmsessionupdate",rj:"emsg",Ij:"prft",Error:"error",sj:"expirationupdated",tj:"firstquartile",uj:"gapjumped",xj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Metadata:"metadata",Fj:"midpoint",Gj:"nospatialvideoinfo",Hj:"onstatechange",Jj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"spatialvideoinfo",Oj:"stalldetected",Pj:"started",Qj:"statechanged",Rj:"streaming",Sj:"textchanged",Tj:"texttrackvisibility",Uj:"thirdquartile",Vj:"timelineregionadded",Wj:"timelineregionenter",Xj:"timelineregionexit",Yj:"trackschanged",$j:"unloading",bk:"variantchanged"};function Bt(){this.ya=new vt,this.me=this}Bt.prototype.addEventListener=function(e,t){this.ya&&this.ya.push(e,t)},Bt.prototype.removeEventListener=function(e,t){this.ya&&this.ya.remove(e,t)},Bt.prototype.dispatchEvent=function(e){if(!this.ya)return!0;var t=this.ya.get(e.type)||[],n=this.ya.get("All");for(n&&(t=t.concat(n)),t=T(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.me,e.currentTarget=this.me;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Bt.prototype.release=function(){this.ya=null};function Cs(){this.g=[]}function Hr(e,t){e.g.push(t.finally(function(){Ht(e.g,t)}))}Cs.prototype.destroy=function(){for(var e=[],t=T(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Zt(e,t,n,o,a,u){Bt.call(this),this.i=!1,this.m=new Cs,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=o||null,this.F=a||null,this.C=u||null,this.o=this.s=!1}te(Zt,Bt),s=Zt.prototype,s.Pf=function(e){this.s=e},s.Qf=function(e){this.o=e};function Vo(e,t,n,o){n=n||kg;var a=zl[e];(!a||n>=a.priority)&&(zl[e]={priority:n,ie:t,Di:o===void 0?!1:o})}function Tg(e,t){for(var n=T(e.g),o=n.next();!o.done;o=n.next())t.g.add(o.value);for(e=T(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}s.Gi=function(e){this.g.add(e)},s.bj=function(e){this.g.delete(e)},s.mg=function(){this.g.clear()},s.Hi=function(e){this.h.add(e)},s.cj=function(e){this.h.delete(e)},s.ng=function(){this.h.clear()};function Bn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}s.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Bt.prototype.release.call(this),this.m.destroy()},s.request=function(e,t,n){var o=this,a=new Ag;if(this.i){var u=Promise.reject(new ne(2,7,7001));return u.catch(function(){}),new $l(u,function(){return Promise.resolve()},a)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Po(t.retryParameters):Co(),t.uris=Po(t.uris),u=ET(this,e,t,n);var f=u.Aa(function(){return Eg(o,e,t,n,new vg(t.retryParameters,!1),0,null,a)}),h=f.Aa(function(A){return bT(o,e,A,n)}),p=Date.now(),g=0;u.promise.then(function(){g=Date.now()-p},function(){});var S=0;f.promise.then(function(){S=Date.now()},function(){});var E=h.Aa(function(A){var b=Date.now()-S,M=A.response;return M.timeMs+=g,M.timeMs+=b,A.ii||!o.l||M.fromCache||t.method=="HEAD"||e!=To||o.l(M.timeMs,M.data.byteLength,bg(n)),o.C&&o.C(e,M,n),M},function(A){throw A&&(A.severity=2),A});return u=new $l(E.promise,function(){return E.abort()},a),Hr(this.m,u),u};function ET(e,t,n,o){function a(h){u=u.Aa(function(){return n.body&&(n.body=pn(n.body)),h(t,n,o)})}var u=Ss(void 0);e.B&&a(e.B),e=T(e.g);for(var f=e.next();!f.done;f=e.next())a(f.value);return u.Aa(void 0,function(h){throw h instanceof ne&&h.code==7001?h:new ne(2,1,1006,h)})}function Eg(e,t,n,o,a,u,f,h){e.s&&(n.uris[u]=n.uris[u].replace("https://","http://")),e.o&&(n.uris[u]=n.uris[u].replace("http://","https://")),0<u&&e.F&&e.F(t,o,n.uris[u],n.uris[u-1]);var p=new wn(n.uris[u]),g=p.Bb,S=!1;g||(g=location.protocol,g=g.slice(0,-1),Cl(p,g),n.uris[u]=p.toString()),g=g.toLowerCase();var E=(g=zl[g])?g.ie:null;if(!E)return Vr(new ne(2,1,1e3,p));var A=g.Di,b=null,M=null,_=!1,R=!1,B;return wg(xg(a)).Aa(function(){if(e.i)return Zh();B=Date.now();var N=0;n.requestStartTime=Date.now();var H=E(n.uris[u],n,t,function(X,J,ie){b&&b.stop(),M&&M.Y(F/1e3),e.l&&t==To&&(N++,n.packetNumber=N,e.l(X,J,bg(o),n),S=!0,h.g=ie)},function(X){e.j&&e.j(X,n,t),R=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!A)return H;var D=n.retryParameters.connectionTimeout;D&&(b=new bt(function(){_=!0,H.abort()}),b.Y(D/1e3));var F=n.retryParameters.stallTimeout;return F&&(M=new bt(function(){_=!0,H.abort()})),H}).Aa(function(N){b&&b.stop(),M&&M.stop(),N.timeMs==null&&(N.timeMs=Date.now()-B);var H={response:N,ii:S};return!R&&e.j&&e.j(N.headers,n,t),H},function(N){if(b&&b.stop(),M&&M.stop(),e.A){var H=null,D=0;N instanceof ne&&(H=N,N.code==1001&&(D=N.data[1])),e.A(n,H,D,_)}if(e.i)return Zh();if(_&&(N=new ne(1,1,1003,n.uris[u],t)),N instanceof ne){if(N.code==7001)throw N;if(N.code==1010)throw f;if(N.severity==1)return H=new Map().set("error",N),H=new je("retry",H),e.dispatchEvent(H),u=(u+1)%n.uris.length,Eg(e,t,n,o,a,u,N,h)}throw N})}function bT(e,t,n,o){var a=Ss(void 0);e=T(e.h);for(var u=e.next(),f={};!u.done;f={Vg:void 0},u=e.next())f.Vg=u.value,a=a.Aa(function(h){return function(){var p=n.response;return p.data&&(p.data=pn(p.data)),(0,h.Vg)(t,p,o)}}(f));return a.Aa(function(){return n},function(h){var p=2;if(h instanceof ne){if(h.code==7001)throw h;p=h.severity}throw new ne(p,1,1007,h)})}function bg(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}me("shaka.net.NetworkingEngine",Zt),Zt.prototype.request=Zt.prototype.request,Zt.prototype.destroy=Zt.prototype.destroy,Zt.makeRequest=Bn,Zt.defaultRetryParameters=function(){return Co()},Zt.prototype.clearAllResponseFilters=Zt.prototype.ng,Zt.prototype.unregisterResponseFilter=Zt.prototype.cj,Zt.prototype.registerResponseFilter=Zt.prototype.Hi,Zt.prototype.clearAllRequestFilters=Zt.prototype.mg,Zt.prototype.unregisterRequestFilter=Zt.prototype.bj,Zt.prototype.registerRequestFilter=Zt.prototype.Gi,Zt.unregisterScheme=function(e){delete zl[e]},Zt.registerScheme=Vo,Zt.prototype.setForceHTTPS=Zt.prototype.Qf,Zt.prototype.setForceHTTP=Zt.prototype.Pf;function Ag(){this.g=0}Zt.NumBytesRemainingClass=Ag;function $l(e,t,n){Sn.call(this,e,t),this.h=n}te($l,Sn),Zt.PendingRequest=$l;var To=1;Zt.RequestType={MANIFEST:0,SEGMENT:To,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Zt.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var kg=3;Zt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:kg};var zl={};function Ts(e){this.g=!1,this.h=new Wt,this.i=e}Ts.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Yt(e,t){if(e.g)throw t instanceof ne&&t.code==7003?t:new ne(2,7,7003,t)}function Jh(e,t){var n=[];e=T(e);for(var o=e.next();!o.done;o=e.next())n.push(t(o.value));return n}function AT(e,t){e=T(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Ka(e){for(var t=new Map,n=T(Object.keys(e)),o=n.next();!o.done;o=n.next())o=o.value,t.set(o,e[o]);return t}function ed(e){var t={};return e.forEach(function(n,o){t[o]=n}),t}function qt(e,t){this.h=Qt(e),this.i=t==Ig,this.g=0}s=qt.prototype,s.na=function(){return this.g<this.h.byteLength},s.va=function(){return this.g},s.getLength=function(){return this.h.byteLength},s.T=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Ho()}},s.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Ho()}},s.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Ho()}},s.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Ho()}},s.Nc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Ho()}if(2097151<t)throw new ne(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},s.qb=function(e){if(this.g+e>this.h.byteLength)throw Ho();var t=Me(this.h,this.g,e);return this.g+=e,t},s.skip=function(e){if(this.g+e>this.h.byteLength)throw Ho();this.g+=e},s.Oi=function(e){if(this.g<e)throw Ho();this.g-=e},s.seek=function(e){if(0>e||e>this.h.byteLength)throw Ho();this.g=e},s.oc=function(){for(var e=this.g;this.na()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Me(this.h,e,this.g-e),this.g+=1,nn(e)};function Ho(){return new ne(2,3,3e3)}me("shaka.util.DataViewReader",qt),qt.prototype.readTerminatedString=qt.prototype.oc,qt.prototype.seek=qt.prototype.seek,qt.prototype.rewind=qt.prototype.Oi,qt.prototype.skip=qt.prototype.skip,qt.prototype.readBytes=qt.prototype.qb,qt.prototype.readUint64=qt.prototype.Nc,qt.prototype.readInt32=qt.prototype.Sg,qt.prototype.readUint32=qt.prototype.P,qt.prototype.readUint16=qt.prototype.la,qt.prototype.readUint8=qt.prototype.T,qt.prototype.getLength=qt.prototype.getLength,qt.prototype.getPosition=qt.prototype.va,qt.prototype.hasMoreData=qt.prototype.na;var Ig=1;qt.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Ig};function Kt(){this.i=[],this.h=[],this.g=!1}s=Kt.prototype,s.box=function(e,t){return e=Mg(e),this.i[e]=kT,this.h[e]=t,this},s.S=function(e,t){return e=Mg(e),this.i[e]=Rg,this.h[e]=t,this},s.stop=function(){this.g=!0},s.parse=function(e,t,n){for(e=new qt(e,0),this.g=!1;e.na()&&!this.g;)this.Kc(0,e,t,n)},s.Kc=function(e,t,n,o){var a=t.va();if(o&&a+8>t.getLength())this.g=!0;else{var u=t.P(),f=t.P(),h=Vl(f),p=!1;switch(u){case 0:u=t.getLength()-a;break;case 1:if(o&&t.va()+8>t.getLength()){this.g=!0;return}u=t.Nc(),p=!0}var g=this.h[f];if(g){var S=null,E=null;if(this.i[f]==Rg){if(o&&t.va()+4>t.getLength()){this.g=!0;return}E=t.P(),S=E>>>24,E&=16777215}f=a+u,n&&f>t.getLength()&&(f=t.getLength()),o&&f>t.getLength()?this.g=!0:(o=f-t.va(),t=0<o?t.qb(o):new Uint8Array(0),t=new qt(t,0),g({name:h,parser:this,partialOkay:n||!1,version:S,flags:E,reader:t,size:u,start:a+e,has64BitSize:p}))}else t.skip(Math.min(a+u-t.va(),t.getLength()-t.va()))}};function kt(e){for(var t=bs(e);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function pr(e){for(var t=bs(e),n=e.reader.P(),o=0;o<n&&(e.parser.Kc(e.start+t,e.reader,e.partialOkay),!e.parser.g);o++);}function xi(e){var t=bs(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function td(e){var t=bs(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Es(e){return function(t){e(t.reader.qb(t.reader.getLength()-t.reader.va()))}}function Mg(e){var t=0;e=T(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Vl(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function bs(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}me("shaka.util.Mp4Parser",Kt),Kt.headerSize=bs,Kt.typeToString=Vl,Kt.allData=Es,Kt.audioSampleEntry=td,Kt.visualSampleEntry=xi,Kt.sampleDescription=pr,Kt.children=kt,Kt.prototype.parseNext=Kt.prototype.Kc,Kt.prototype.parse=Kt.prototype.parse,Kt.prototype.stop=Kt.prototype.stop,Kt.prototype.fullBox=Kt.prototype.S,Kt.prototype.box=Kt.prototype.box;var kT=0,Rg=1;function _g(e){var t=this;this.g=[],this.h=[],this.data=[],new Kt().box("moov",kt).box("moof",kt).S("pssh",function(n){if(!(1<n.version)){var o=Me(n.reader.h,-12,n.size);if(t.data.push(o),t.g.push($o(n.reader.qb(16))),0<n.version){o=n.reader.P();for(var a=0;a<o;a++){var u=$o(n.reader.qb(16));t.h.push(u)}}}}).parse(e)}function Hl(e,t,n,o){var a=e.length,u=t.length+16+a;0<o&&(u+=4+16*n.size);var f=new Uint8Array(u),h=Qt(f),p=0;if(h.setUint32(p,u),p+=4,h.setUint32(p,1886614376),p+=4,1>o?h.setUint32(p,0):h.setUint32(p,16777216),p+=4,f.set(t,p),p+=t.length,0<o)for(h.setUint32(p,n.size),p+=4,t=T(n),n=t.next();!n.done;n=t.next())n=Br(n.value),f.set(n,p),p+=n.length;return h.setUint32(p,a),f.set(e,p+4),f}function nd(e,t){return e=Fo(e),As(e,t)}function As(e,t){return e=IT(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function id(e){return rd.has(e)?rd.get(e):""}function IT(e){function t(a,u){u=u===void 0?!1:u;for(var f=[];e[o];)if(e.charCodeAt(o)==60){if(e.charCodeAt(o+1)===47){u=o+2,o=e.indexOf(">",o),u=e.substring(u,o);var h=u.indexOf(a);if(h==-1){var p=a.indexOf(".");0<p&&(h=u.indexOf(a.substring(0,p)))}if(h==-1)throw a=e.substring(0,o).split(`
`),Error(`Unexpected close tag
Line: `+(a.length-1)+`
Column: `+(a[a.length-1].length+1)+`
Char: `+e[o]);o+1&&(o+=1);break}else if(e.charCodeAt(o+1)===33){if(e.charCodeAt(o+2)==45){for(;o!==-1&&(e.charCodeAt(o)!==62||e.charCodeAt(o-1)!=45||e.charCodeAt(o-2)!=45||o==-1);)o=e.indexOf(">",o+1);o===-1&&(o=e.length)}else if(e.charCodeAt(o+2)===91&&e.charCodeAt(o+8)===91&&e.substr(o+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",o),h==-1?(f.push(e.substr(o+9)),o=e.length):(f.push(e.substring(o+9,h)),o=h+3);continue}o++;continue}e:{p=u,o++;var g=n(),S={};for(h=[];e.charCodeAt(o)!==62&&e[o];){var E=e.charCodeAt(o);if(64<E&&91>E||96<E&&123>E){E=n();for(var A=e.charCodeAt(o);A&&A!==39&&A!==34&&!(64<A&&91>A||96<A&&123>A)&&A!==62;)o++,A=e.charCodeAt(o);var b=o+1;if(o=e.indexOf(e[o],b),b=e.slice(b,o),A===39||A===34){if(o===-1){for(p={tagName:g,attributes:S,children:h,parent:null},g=0;g<h.length;g++)typeof h[g]!="string"&&(h[g].parent=p);h=p;break e}}else b=null,o--;E.startsWith("xmlns:")&&rd.set(b,E.split(":")[1]),g==="tt"&&E==="xml:space"&&b==="preserve"&&(p=!0),S[E]=b}o++}for(e.charCodeAt(o-1)!==47?(o++,h=t(g,p)):o++,p={tagName:g,attributes:S,children:h,parent:null},g=h.length,S=0;S<g;S++)E=h[S],typeof E!="string"?E.parent=p:S==g-1&&E==`
`&&h.pop();h=p}if(f.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(f.push.apply(f,L(h.children)),h.children=[])}else h=o,o=e.indexOf("<",o)-1,o===-2&&(o=e.length),h=e.slice(h,o+1),u?0<h.length&&f.push(h):(f.length&&h.length==1&&h[0]==`
`||0<h.trim().length)&&f.push(h),o++;return f}function n(){for(var a=o;`\r
	>/= `.indexOf(e[o])===-1&&e[o];)o++;return e.slice(a,o)}var o=0;return t("")}function Gl(e){return typeof e=="string"}function Lg(e){var t=[];if(!e.children)return[];e=T(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Jt(e,t){var n=[];if(!e.children)return[];e=T(e.children);for(var o=e.next();!o.done;o=e.next())o=o.value,o.tagName===t&&n.push(o);return n}function Ln(e){return typeof e=="string"?fi(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:fi(e))}function lo(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Ln(e))&&(e=e.trim()),e):null}function fo(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=T(e.children);for(var o=e.next();!o.done;o=e.next())fo(o.value,t,n)}return n}function co(e,t){return e=Jt(e,t),e.length!=1?null:e[0]}function Go(e,t,n){return e=Pg(e,t,n),e.length!=1?null:e[0]}function _t(e,t,n,o){o=o===void 0?null:o;var a=null;return e=e.attributes[t],e!=null&&(a=n(e)),a??o}function Xo(e,t,n){return t=id(t),e.attributes[t+":"+n]||null}function Pg(e,t,n){t=id(t);var o=[];if(e.children){e=T(e.children);for(var a=e.next();!a.done;a=e.next())(a=a.value)&&a.tagName===t+":"+n&&o.push(a)}return o}function Do(e,t,n){t=T(t);for(var o=t.next();!o.done;o=t.next())if(o=Xo(e,o.value,n))return o;return null}function mr(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Oo(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Xl(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Wl(e){return e=Number(e),e%1===0?e:null}function Wo(e){return e=Number(e),e%1===0&&0<e?e:null}function ni(e){return e=Number(e),e%1===0&&0<=e?e:null}function Yl(e){return e=Number(e),isNaN(e)?null:e}function od(e){return e?e.toLowerCase()==="true":!1}function MT(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ql(e){var t=[];e=fi(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=T(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var o=n.match(/^([\w]+)/);if(o){var a=n.match(/(@id='(.*?)')/),u=n.match(/(@t='(\d+)')/),f=n.match(/(@n='(\d+)')/),h=n.match(/\[(\d+)\]/);t.push({name:o[0],id:a?a[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:u?Number(u[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:f?Number(f[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:h?Number(h[1])-1:null,Sb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Sb=n.slice(1))}return t}function Dg(e,t){var n=ql(t.attributes.sel||"");if(n.length){var o=n[n.length-1],a=t.attributes.pos||null;n=o.position,n==null&&(o.t!==null&&(n=Og(e,"t",o.t)),o.n!==null&&(n=Og(e,"n",o.n))),n===null?n=a==="prepend"?0:e.length:a==="prepend"?--n:a==="after"&&++n,a=t.tagName,(o=o.Sb)&&e[n]?Ng(e[n],a,o,lo(t)||""):(a!=="remove"&&a!=="replace"||e.splice(n,1),a!=="add"&&a!=="replace"||e.splice.apply(e,[n,0].concat(L(t.children))))}}function Og(e,t,n){var o=0;e=T(e);for(var a=e.next();!a.done;a=e.next()){if(Number(a.value.attributes[t])===n)return o;o++}return null}function Ng(e,t,n,o){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=o)}function Ug(e){var t=document.createElementNS("",e.tagName),n;for(n in e.attributes)t.setAttribute(n,e.attributes[n]);for(e=T(e.children),n=e.next();!n.done;n=e.next()){n=n.value;var o=void 0;typeof n=="string"?o=new Text(n):o=Ug(n),t.appendChild(o)}return t}var rd=new Map([]);function Kl(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.fa=this.da=!1,this.I=0,this.g=null,this.B=new Ae,this.i=new Map,this.A=new Map,this.l=new Wt,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.Z=new Map,this.ea=new Map,this.L=new bt(function(){return FT(t)}),this.R=!1,this.N=[],this.U=!1,this.K=new bt(function(){VT(t)}),this.l.catch(function(){}),this.j=new Ts(function(){return RT(t)}),this.ba=!1,this.F=this.G=null}s=Kl.prototype,s.destroy=function(){return this.j.destroy()};function RT(e){return $(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,k(t,Wg(e),2);case 2:if(!e.m){t.u(3);break}return Y(t,4),k(t,e.m.setMediaKeys(null),6);case 6:K(t,5);break;case 4:ee(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,q(t)}})}s.configure=function(e){this.h=e,this.K&&this.K.Sa(this.h.updateExpirationTime)};function _T(e,t,n){return e.fa=!0,e.A=new Map,e.R=n,jg(e,t)}function Bg(e,t,n){e.A=new Map,n=T(n);for(var o=n.next();!o.done;o=n.next())e.A.set(o.value,{initData:null,initDataType:null});for(n=T(e.h.persistentSessionsMetadata),o=n.next();!o.done;o=n.next())o=o.value,e.A.set(o.sessionId,{initData:o.initData,initDataType:o.initDataType});return e.R=0<e.A.size,jg(e,t)}function LT(e,t,n,o,a,u){var f=new Map;return a={audioCapabilities:a,videoCapabilities:u,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},a.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:o,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,a),Vg(e,f,[])}function jg(e,t){var n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D;return $(function(F){if(F.g==1){if(n=BT(e))for(o=T(t),a=o.next();!a.done;a=o.next())u=a.value,u.video&&(u.video.drmInfos=[n]),u.audio&&(u.audio.drmInfos=[n]);for(f=t.some(function(X){return!!(X.video&&X.video.drmInfos.length||X.audio&&X.audio.drmInfos.length)}),f||(h=Ka(e.h.servers),GT(t,h)),p=new Set,g=T(t),S=g.next();!S.done;S=g.next())for(E=S.value,A=Yg(E),b=T(A),M=b.next();!M.done;M=b.next())_=M.value,p.add(_);for(R=T(p),B=R.next();!B.done;B=R.next())N=B.value,XT(N,Ka(e.h.servers),Ka(e.h.advanced||{}),e.h.keySystemsMapping);return k(F,rg(t,e.R,e.ba,e.h.preferredKeySystems),2)}return Yt(e.j),H=f||Object.keys(e.h.servers).length,H?(D=Vg(e,void 0,t),F.return(f?D:D.catch(function(){}))):(e.da=!0,F.return(Promise.resolve()))})}function Fg(e){var t;return $(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return k(n,e.G,3);case 3:return Yt(e.j),n.return();case 2:return Y(n,4),e.G=e.m.setMediaKeys(e.s),k(n,e.G,6);case 6:K(n,5);break;case 4:t=ee(n),e.o(new ne(2,6,6003,t.message));case 5:Yt(e.j),q(n)}})}function PT(e,t){return $(function(n){if(n.g==1)return k(n,Fg(e),2);Qa(e,t.initDataType,Me(t.initData)),q(n)})}s.Rb=function(e){var t=this;return $(function(n){if(n.g==1)return t.s?(t.m=e,t.B.ha(t.m,"play",function(){for(var o=T(t.N),a=o.next();!a.done;a=o.next())ad(t,a.value);t.U=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Wg(t)}),t.F=t.g&&t.g.initData.find(function(o){return 0<o.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?k(n,Fg(t),2):n.u(2)):(t.B.ha(e,"encrypted",function(){t.o(new ne(2,6,6010))}),n.return());$g(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(o){return PT(t,o)}),q(n)})};function DT(e){var t,n,o,a,u;return $(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.u(2);break}return t=Bn([e.g.serverCertificateUri],e.h.retryParameters),Y(f,3),n=e.C.Lb.request(5,t),k(f,n.promise,5);case 5:o=f.h,e.g.serverCertificate=Me(o.data),K(f,4);break;case 3:throw a=ee(f),new ne(2,6,6017,a);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(Y(f,6),k(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:K(f,0);break;case 6:throw u=ee(f),new ne(2,6,6004,u.message)}})}function OT(e,t){var n,o,a;return $(function(u){if(u.g==1)return k(u,Gg(e,t,{initData:null,initDataType:null}),2);if(u.g!=3)return n=u.h,n?(o=[],(a=e.i.get(n))&&(a.kb=new Wt,o.push(a.kb)),o.push(n.remove()),k(u,Promise.all(o),3)):u.return();e.i.delete(n),q(u)})}function $g(e){var t,n,o,a,u;return $(function(f){if(f.g==1)return e.A.size?(e.A.forEach(function(h,p){Gg(e,p,h)}),k(f,e.l,3)):f.u(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&HT(e))return f.return(e.l);e.l=new Wt,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],o=T(n),a=o.next();!a.done;a=o.next())u=a.value,Qa(e,u.initDataType,u.initData);return Za(e)&&e.l.resolve(),f.return(e.l)})}function Qa(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var o=e.i.values();o=T(o);for(var a=o.next();!a.done;a=o.next())if(bn(n,a.value.initData))return}0<e.i.size&&Za(e)&&(e.l.resolve(),e.l=new Wt,e.l.catch(function(){})),jT(e,t,n,e.g.sessionType)}}function zg(e){return e=e.i.keys(),e=Jh(e,function(t){return t.sessionId}),Array.from(e)}s.ff=function(){var e=this,t=this.i.keys();return t=Jh(t,function(n){var o=e.i.get(n);return{sessionId:n.sessionId,sessionType:o.type,initData:o.initData,initDataType:o.initDataType}}),Array.from(t)},s.ad=function(){var e=1/0,t=this.i.keys();t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},s.Ld=function(){return ed(this.ea)};function Vg(e,t,n){var o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N;return $(function(H){switch(H.g){case 1:if(o=new Map,n.length){a=NT(e,n,o),H.u(2);break}return k(H,UT(e,t),3);case 3:a=H.h;case 2:if(u=a,!u)throw new ne(2,6,6001);for(Yt(e.j),Y(H,4),e.H.clear(),f=u.getConfiguration(),h=f.audioCapabilities||[],p=f.videoCapabilities||[],g=T(h),S=g.next();!S.done;S=g.next())E=S.value,e.H.add(E.contentType.toLowerCase());for(A=T(p),b=A.next();!b.done;b=A.next())M=b.value,e.H.add(M.contentType.toLowerCase());if(n.length){var D=u.keySystem,F=o.get(u.keySystem),X=[],J=[],ie=[],de=[],oe=[],se=new Set,ue=new Set;qg(F,X,J,de,ie,oe,se,ue);var xe=e.R?"persistent-license":"temporary";for(D={keySystem:D,encryptionScheme:X[0],licenseServerUri:J[0],distinctiveIdentifierRequired:F[0].distinctiveIdentifierRequired,persistentStateRequired:F[0].persistentStateRequired,sessionType:F[0].sessionType||xe,audioRobustness:F[0].audioRobustness||"",videoRobustness:F[0].videoRobustness||"",serverCertificate:de[0],serverCertificateUri:ie[0],initData:oe,keyIds:se},0<ue.size&&(D.keySystemUris=ue),F=T(F),ue=F.next();!ue.done;ue=F.next())ue=ue.value,ue.distinctiveIdentifierRequired&&(D.distinctiveIdentifierRequired=ue.distinctiveIdentifierRequired),ue.persistentStateRequired&&(D.persistentStateRequired=ue.persistentStateRequired);F=D}else F=u.keySystem,ue=t.get(u.keySystem),D=[],X=[],J=[],ie=[],de=[],oe=new Set,qg(ue.drmInfos,D,X,ie,J,de,oe),F={keySystem:F,encryptionScheme:D[0],licenseServerUri:X[0],distinctiveIdentifierRequired:ue.distinctiveIdentifier=="required",persistentStateRequired:ue.persistentState=="required",sessionType:ue.sessionTypes[0]||"temporary",audioRobustness:(ue.audioCapabilities?ue.audioCapabilities[0].robustness:"")||"",videoRobustness:(ue.videoCapabilities?ue.videoCapabilities[0].robustness:"")||"",serverCertificate:ie[0],serverCertificateUri:J[0],initData:de,keyIds:oe};if(e.g=F,!e.g.licenseServerUri)throw new ne(2,6,6012,e.g.keySystem);return k(H,u.createMediaKeys(),6);case 6:if(_=H.h,Yt(e.j),e.s=_,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){H.u(7);break}return Y(H,8),k(H,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(R=H.h,R!="usable")throw new ne(2,6,6018);Yt(e.j),K(H,7,4);break;case 8:throw B=ee(H,4),B instanceof ne?B:new ne(2,6,6019,B.message);case 7:return e.da=!0,k(H,DT(e),11);case 11:Yt(e.j),K(H,0);break;case 4:throw N=ee(H),Yt(e.j,N),e.g=null,e.H.clear(),N instanceof ne?N:new ne(2,6,6002,N.message)}})}function NT(e,t,n){for(var o=T(t),a=o.next();!a.done;a=o.next()){a=T(Yg(a.value));for(var u=a.next();!u.done;u=a.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new ne(2,6,6e3);for(e=T(e.h.preferredKeySystems),a=e.next(),o={};!a.done;o={Rg:void 0},a=e.next())for(o.Rg=a.value,a=T(t),u=a.next();!u.done;u=a.next())if(u=u.value.decodingInfos.find(function(g){return function(S){return S.supported&&S.keySystemAccess!=null&&S.keySystemAccess.keySystem==g.Rg}}(o)))return u.keySystemAccess;for(e=T([!0,!1]),o=e.next();!o.done;o=e.next())for(o=o.value,a=T(t),u=a.next();!u.done;u=a.next()){u=T(u.value.decodingInfos);for(var f=u.next();!f.done;f=u.next())if(f=f.value,f.supported&&f.keySystemAccess){var h=n.get(f.keySystemAccess.keySystem);h=T(h);for(var p=h.next();!p.done;p=h.next())if(!!p.value.licenseServerUri==o)return f.keySystemAccess}}return null}function UT(e,t){var n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B;return $(function(N){switch(N.g){case 1:if(t.size==1&&t.has(""))throw new ne(2,6,6e3);for(o=T(t.values()),a=o.next();!a.done;a=o.next())u=a.value,u.audioCapabilities.length==0&&delete u.audioCapabilities,u.videoCapabilities.length==0&&delete u.videoCapabilities;f=T(e.h.preferredKeySystems),h=f.next();case 2:if(h.done){N.u(4);break}if(p=h.value,!t.has(p)){N.u(3);break}return g=t.get(p),Y(N,6),k(N,navigator.requestMediaKeySystemAccess(p,[g]),8);case 8:return n=N.h,N.return(n);case 6:ee(N);case 7:Yt(e.j);case 3:h=f.next(),N.u(2);break;case 4:S=T([!0,!1]),E=S.next();case 9:if(E.done){N.u(11);break}A=E.value,b=T(t.keys()),M=b.next();case 12:if(M.done){E=S.next(),N.u(9);break}if(_=M.value,R=t.get(_),B=R.drmInfos.some(function(H){return!!H.licenseServerUri}),B!=A){N.u(13);break}return Y(N,15),k(N,navigator.requestMediaKeySystemAccess(_,[R]),17);case 17:return n=N.h,N.return(n);case 15:ee(N);case 16:Yt(e.j);case 13:M=b.next(),N.u(12);break;case 11:return N.return(n)}})}function BT(e){return e=Ka(e.h.clearKeys),e.size==0?null:Gm(e)}function sd(e){Za(e)&&e.l.resolve()}function Hg(e,t){new bt(function(){t.loaded=!0,sd(e)}).Y(YT)}function Gg(e,t,n){var o,a,u,f,h,p,g;return $(function(S){switch(S.g){case 1:try{o=e.s.createSession("persistent-license")}catch(E){return a=new ne(2,6,6005,E.message),e.o(a),S.return(Promise.reject(a))}return e.B.D(o,"message",function(E){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(E):ad(e,E)}),e.B.D(o,"keystatuseschange",function(E){return Xg(e,E)}),u={initData:n.initData,initDataType:n.initDataType,loaded:!1,zf:1/0,kb:null,type:"persistent-license"},e.i.set(o,u),Y(S,2),k(S,o.load(t),4);case 4:return f=S.h,Yt(e.j),f||(e.i.delete(o),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new ne(h,6,6013)),u.loaded=!0),Hg(e,u),sd(e),S.return(o);case 2:p=ee(S),Yt(e.j,p),e.i.delete(o),g=e.h.persistentSessionOnlinePlayback?1:2,e.o(new ne(g,6,6005,p.message)),u.loaded=!0,sd(e);case 3:return S.return(Promise.resolve())}})}function jT(e,t,n,o){try{var a=e.s.createSession(o)}catch(u){e.o(new ne(2,6,6005,u.message));return}e.B.D(a,"message",function(u){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(u):ad(e,u)}),e.B.D(a,"keystatuseschange",function(u){return Xg(e,u)}),e.i.set(a,{initData:n,initDataType:t,loaded:!1,zf:1/0,kb:null,type:o});try{n=e.h.initDataTransform(n,t,e.g)}catch(u){t=u,u instanceof ne||(t=new ne(2,6,6016,u)),e.o(t);return}e.h.logLicenseExchange&&Ur(n),a.generateRequest(t,n).catch(function(u){if(!e.j.g){e.i.delete(a);var f=u.errorCode;if(f&&f.systemCode){var h=f.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new ne(2,6,6006,u.message,u,h))}})}function ad(e,t){var n,o,a,u,f,h,p,g,S,E,A,b,M,_;$(function(R){switch(R.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Ur(t.message),o=e.i.get(n),a=e.g.licenseServerUri,u=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&u&&u.individualizationServer&&(a=u.individualizationServer),f=Bn([a],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,o&&(f.initData=o.initData,f.initDataType=o.initDataType),u&&u.headers)for(h in u.headers)f.headers[h]=u.headers[h];if(Oh(e.g.keySystem)){var B=jo(f.body,!0,!0);if(B.includes("PlayReadyKeyMessage")){B=As(B,"PlayReadyKeyMessage");var N=fo(B,"HttpHeader");N=T(N);for(var H=N.next();!H.done;H=N.next()){var D=H.value;H=fo(D,"name")[0],D=fo(D,"value")[0],f.headers[Ln(H)]=Ln(D)}B=fo(B,"Challenge")[0],f.body=Gi(Ln(B))}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return p=Date.now(),Y(R,2),S=e.C.Lb.request(2,f),k(R,S.promise,4);case 4:g=R.h,K(R,3);break;case 2:return E=ee(R),e.j.g||(A=new ne(2,6,6007,E),e.i.size==1?(e.o(A),o&&o.kb&&o.kb.reject(A)):(o&&o.kb&&o.kb.reject(A),e.i.delete(n),Za(e)&&(e.l.resolve(),e.L.Y(.1)))),R.return();case 3:return e.j.g?R.return():(e.I+=(Date.now()-p)/1e3,e.h.logLicenseExchange&&Ur(g.data),Y(R,5),k(R,n.update(g.data),7));case 7:K(R,6);break;case 5:return b=ee(R),M=new ne(2,6,6008,b.message),e.o(M),o&&o.kb&&o.kb.reject(M),R.return();case 6:if(e.j.g)return R.return();_=new je("drmsessionupdate"),e.C.onEvent(_),o&&(o.kb&&o.kb.resolve(),Hg(e,o)),q(R)}})}function Xg(e,t){t=t.target;var n=e.i.get(t),o=!1;t.keyStatuses.forEach(function(u,f){if(typeof f=="string"){var h=f;f=u,u=h}if(Oh(e.g.keySystem)&&f.byteLength==16&&(za()||Lo())){h=Qt(f);var p=h.getUint32(0,!0),g=h.getUint16(4,!0),S=h.getUint16(6,!0);h.setUint32(0,p,!1),h.setUint16(4,g,!1),h.setUint16(6,S,!1)}u!="status-pending"&&(n.loaded=!0),u=="expired"&&(o=!0),f=$o(f).slice(0,32),e.Z.set(f,u)});var a=t.expiration-Date.now();(0>a||o&&1e3>a)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Za(e)&&(e.l.resolve(),e.L.Y(qT))}function FT(e){var t=e.Z,n=e.ea;n.clear(),t.forEach(function(o,a){return n.set(a,o)}),t=Array.from(n.values()),t.length&&t.every(function(o){return o=="expired"})&&e.o(new ne(2,6,6014)),e.C.ee(ed(n))}function $T(){var e,t,n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se;return $(function(ue){if(ue.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],o={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},a=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],u=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],f={videoCapabilities:a,audioCapabilities:u,initDataTypes:["cenc","sinf","skd","keyids"]},h=[null,"cenc","cbcs","cbcs-1-9"],p=new Map,g=function(xe,ye){var Ce,_e,Ee,Be,yt,Mt,ln,Dt;return $(function(dn){switch(dn.g){case 1:return Y(dn,2),k(dn,ye.createMediaKeys(),4);case 4:K(dn,3);break;case 2:return ee(dn),dn.return();case 3:_e=(Ce=ye.getConfiguration().sessionTypes)?Ce.includes("persistent-license"):!1,Va()&&(_e=!1),Ee=ye.getConfiguration().videoCapabilities,Be=ye.getConfiguration().audioCapabilities,yt={persistentState:_e,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},p.has(xe)&&p.get(xe)?yt=p.get(xe):p.set(xe,yt),(Mt=Ee[0].encryptionScheme)&&!yt.encryptionSchemes.includes(Mt)&&yt.encryptionSchemes.push(Mt),(ln=Ee[0].robustness)&&!yt.videoRobustnessLevels.includes(ln)&&yt.videoRobustnessLevels.push(ln),(Dt=Be[0].robustness)&&!yt.audioRobustnessLevels.includes(Dt)&&yt.audioRobustnessLevels.push(Dt),q(dn)}})},S=function(xe,ye,Ce,_e){var Ee,Be,yt,Mt,ln,Dt,dn,En,fn,jt;return $(function(yn){switch(yn.g){case 1:for(Y(yn,2),Ee=Po(f),Be=T(Ee.videoCapabilities),yt=Be.next();!yt.done;yt=Be.next())Mt=yt.value,Mt.encryptionScheme=ye,Mt.robustness=Ce;for(ln=T(Ee.audioCapabilities),Dt=ln.next();!Dt.done;Dt=ln.next())dn=Dt.value,dn.encryptionScheme=ye,dn.robustness=_e;return En=Po(Ee),En.persistentState="required",En.sessionTypes=["persistent-license"],fn=[En,Ee],k(yn,navigator.requestMediaKeySystemAccess(xe,fn),4);case 4:return jt=yn.h,k(yn,g(xe,jt),5);case 5:K(yn,0);break;case 2:ee(yn),q(yn)}})},E=function(xe,ye,Ce,_e){var Ee,Be,yt;return $(function(Mt){switch(Mt.g){case 1:return Y(Mt,2),Ee={type:"media-source",video:{contentType:a[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:u[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:xe,video:{encryptionScheme:ye,robustness:Ce},audio:{encryptionScheme:ye,robustness:_e}}},k(Mt,navigator.mediaCapabilities.decodingInfo(Ee),4);case 4:return Be=Mt.h,yt=Be.keySystemAccess,k(Mt,g(xe,yt),5);case 5:K(Mt,0);break;case 2:ee(Mt),q(Mt)}})},A=T(e),b=A.next();!b.done;b=A.next())M=b.value,p.set(M,null);for(_=[],R=T(h),B=R.next();!B.done;B=R.next())for(N=B.value,H=T(e),D=H.next();!D.done;D=H.next())F=D.value,F==="org.w3.clearkey"&&cs()||(_.push(S(F,N,"","")),_.push(E(F,N,"","")));for(X=T(e),J=X.next();!J.done;J=X.next())for(ie=J.value,de=T(o[ie]||[]),oe=de.next();!oe.done;oe=de.next())se=oe.value,_.push(S(ie,null,se,"")),_.push(S(ie,null,"",se)),_.push(E(ie,null,se,"")),_.push(E(ie,null,"",se));return k(ue,Promise.all(_),2)}return ue.return(ed(p))})}function zT(e){var t;return $(function(n){if(n.g==1)return t=new Promise(function(o,a){new bt(a).Y(WT)}),Y(n,2),k(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return K(n,0);ee(n),q(n)})}function Wg(e){var t;return $(function(n){return t=Array.from(e.i.entries()),e.i.clear(),k(n,Promise.all(t.map(function(o){o=T(o);var a=o.next().value,u=o.next().value;return $(function(f){if(f.g==1)return Y(f,2),e.fa||e.A.has(a.sessionId)||u.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?k(f,zT(a),5):k(f,a.remove(),5);if(f.g!=2)return K(f,0);ee(f),q(f)})})),0)})}function Yg(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function VT(e){e.i.forEach(function(t,n){var o=t.zf,a=n.expiration;isNaN(a)&&(a=1/0),a!=o&&(e.C.onExpirationUpdated(n.sessionId,a),t.zf=a)})}function Za(e){return e=e.i.values(),AT(e,function(t){return t.loaded})}function HT(e){for(var t=T(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function GT(e,t){var n=[];for(t.forEach(function(o,a){n.push({keySystem:a,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=T(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function qg(e,t,n,o,a,u,f,h){var p=[];e=T(e);for(var g=e.next(),S={};!g.done;S={ra:void 0},g=e.next()){if(S.ra=g.value,t.includes(S.ra.encryptionScheme)||t.push(S.ra.encryptionScheme),S.ra.keySystem=="org.w3.clearkey"&&S.ra.licenseServerUri.startsWith("data:application/json;base64,")?p.includes(S.ra.licenseServerUri)||p.push(S.ra.licenseServerUri):n.includes(S.ra.licenseServerUri)||n.push(S.ra.licenseServerUri),a.includes(S.ra.serverCertificateUri)||a.push(S.ra.serverCertificateUri),S.ra.serverCertificate&&(o.some(function(b){return function(M){return bn(M,b.ra.serverCertificate)}}(S))||o.push(S.ra.serverCertificate)),S.ra.initData){g=T(S.ra.initData);for(var E=g.next(),A={};!E.done;A={mf:void 0},E=g.next())A.mf=E.value,u.some(function(b){return function(M){var _=b.mf;return M.keyId&&M.keyId==_.keyId?!0:M.initDataType==_.initDataType&&bn(M.initData,_.initData)}}(A))||u.push(A.mf)}if(S.ra.keyIds)for(g=T(S.ra.keyIds),E=g.next();!E.done;E=g.next())f.add(E.value);if(S.ra.keySystemUris&&h)for(S=T(S.ra.keySystemUris),g=S.next();!g.done;g=S.next())h.add(g.value)}if(p.length==1)n.push(p[0]);else if(0<p.length){for(t=[],p=T(p),o=p.next();!o.done;o=p.next())o=d.atob(o.value.split("data:application/json;base64,").pop()),o=JSON.parse(o),t.push.apply(t,L(o.keys));p=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+d.btoa(p))}}function XT(e,t,n,o){var a=e.keySystem;a&&(a!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(a)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(a))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),o[a]&&(e.keySystem=o[a]),d.cast&&d.cast.__platform__&&a=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var WT=1,YT=5,qT=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function ud(e,t,n){this.h=e,this.i=t,this.g=n}function Kg(e,t){return $(function(n){if(n.g==1)return k(n,nT(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||eg(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(Wa))throw new ne(2,4,4032);return n.return(Qg(e,t))})}function Qg(e,t){var n=tg(t.variants,e.h.restrictions,e.i);if(t){var o=e.g?e.g.g:null;if(o&&e.g.s)for(var a=T(t.variants),u=a.next();!u.done;u=a.next())u=u.value,ld(e,o.keySystem,u.video),ld(e,o.keySystem,u.audio);Zg(e,t)}return n}function ld(e,t,n){if(n){n=T(n.drmInfos);for(var o=n.next();!o.done;o=n.next())if(o=o.value,o.keySystem==t){o=T(o.initData||[]);for(var a=o.next();!a.done;a=o.next())a=a.value,Qa(e.g,a.initDataType,a.initData)}}}function Zg(e,t){e=e.g?e.g.Ld():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var o=!1,a=!1,u=new Set,f=new Set;t=T(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var p=[];h.audio&&p.push(h.audio),h.video&&p.push(h.video),p=T(p);for(var g=p.next();!g.done;g=p.next())if(g=g.value,g.keyIds.size){g=T(g.keyIds);for(var S=g.next();!S.done;S=g.next()){S=S.value;var E=e[n?"00":S];E?Jg.includes(E)&&f.add(E):u.add(S)}}h.allowedByApplication?h.allowedByKeySystem&&(o=!0):a=!0}if(!o)throw e={hasAppRestrictions:a,missingKeys:Array.from(u),restrictedKeyStatuses:Array.from(f)},new ne(2,4,4012,e)}var Jg=["output-restricted","internal-error"];function Ja(){}function ey(e,t){if(t){var n=ho[t.toLowerCase()];if(n)return n}throw new ne(2,4,4e3,e,t)}me("shaka.media.ManifestParser",Ja),Ja.unregisterParserByMime=function(e){delete ho[e]},Ja.registerParserByMime=function(e,t){ho[e]=t},Ja.registerParserByExtension=function(){Tt("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Ja.AccessibilityPurpose={ak:"visually impaired",vj:"hard of hearing"};var ho={};function KT(e,t){function n(){u=!0}function o(S){h.push(S),kt(S)}var a=e=Me(e),u=!1,f,h=[],p=[];if(new Kt().box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).S("stsd",function(S){f=S,h.push(S),pr(S)}).S("encv",n).S("enca",n).S("dvav",function(S){p.push({box:S,Oa:1701733238})}).S("dva1",function(S){p.push({box:S,Oa:1701733238})}).S("dvh1",function(S){p.push({box:S,Oa:1701733238})}).S("dvhe",function(S){p.push({box:S,Oa:1701733238})}).S("dvc1",function(S){p.push({box:S,Oa:1701733238})}).S("dvi1",function(S){p.push({box:S,Oa:1701733238})}).S("hev1",function(S){p.push({box:S,Oa:1701733238})}).S("hvc1",function(S){p.push({box:S,Oa:1701733238})}).S("avc1",function(S){p.push({box:S,Oa:1701733238})}).S("avc3",function(S){p.push({box:S,Oa:1701733238})}).S("ac-3",function(S){p.push({box:S,Oa:1701733217})}).S("ec-3",function(S){p.push({box:S,Oa:1701733217})}).S("ac-4",function(S){p.push({box:S,Oa:1701733217})}).S("mp4a",function(S){p.push({box:S,Oa:1701733217})}).parse(e),u)return e;if(p.length==0||!f)throw $o(e),new ne(2,3,3019,t);p.reverse(),t=T(p);for(var g=t.next();!g.done;g=t.next())g=g.value,a=QT(a,f,g.box,h,g.Oa);return za()&&Bh()?(t=new Uint8Array(e.byteLength+a.byteLength),t.set(a),t.set(e,a.byteLength),t):a}function QT(e,t,n,o,a){var u=ZT.value(),f=e.subarray(n.start,n.start+n.size),h=Qt(f),p=new Uint8Array(n.size+u.byteLength);for(p.set(f,0),f=Qt(p),f.setUint32(4,a),p.set(u,n.size),a=h.getUint32(4),f.setUint32(n.size+16,a),ty(p,0,p.byteLength),a=new Uint8Array(e.byteLength+p.byteLength),n=Mo()||za()?n.start:n.start+n.size,u=e.subarray(n),a.set(e.subarray(0,n)),a.set(p,n),a.set(u,n+p.byteLength),e=T(o),o=e.next();!o.done;o=e.next())o=o.value,ty(a,o.start,o.size+p.byteLength);return p=Qt(a,t.start),t=bs(t),e=p.getUint32(t),p.setUint32(t,e+1),a}function ty(e,t,n){e=Qt(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var ZT=new ls(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function wi(e,t,n,o,a,u,f){this.M=e,this.Ha=t,this.sa=n,this.Hc=o===void 0?null:o,this.timescale=a===void 0?null:a,this.g=u===void 0?null:u,this.aesKey=f===void 0?null:f,this.mimeType=this.codecs=null}wi.prototype.Xb=function(){return this.Ha},wi.prototype.Ub=function(){return this.sa},wi.prototype.cd=function(){return this.g};function fd(e,t){return e===t?!0:e&&t?e.Xb()==t.Xb()&&e.Ub()==t.Ub()&&hn(e.M().sort(),t.M().sort())&&bn(e.cd(),t.cd()):e==t}me("shaka.media.InitSegmentReference",wi),wi.prototype.getEndByte=wi.prototype.Ub,wi.prototype.getStartByte=wi.prototype.Xb;function at(e,t,n,o,a,u,f,h,p,g,S,E,A,b,M,_){for(g=g===void 0?[]:g,b=b===void 0?gr:b,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=o,this.sa=a,this.$=u,this.timestampOffset=f,this.appendWindowStart=h,this.appendWindowEnd=p,this.g=g,this.tilesLayout=S===void 0?"":S,this.B=E===void 0?null:E,this.h=A===void 0?null:A,this.status=b,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=M===void 0?null:M,this.A=null,this.i=0,this.o=_===void 0?!1:_,this.G=this.s=!1,e=T(this.g),t=e.next();!t.done;t=e.next())t.value.Kg();this.o&&this.g.length&&this.g[this.g.length-1].Jg(),this.C=this.mimeType=this.codecs=null}s=at.prototype,s.M=function(){return this.F()},s.getStartTime=function(){return this.startTime},s.Mh=function(){return this.endTime},s.Xb=function(){return this.Ha},s.Ub=function(){return this.sa},s.di=function(){return this.tilesLayout},s.ci=function(){return this.B},s.Yb=function(){return this.status},s.xi=function(){this.status=iy},s.wf=function(){this.preload=!0},s.ri=function(){return this.preload},s.Xd=function(){this.l=!1},s.ni=function(){return this.l},s.Kg=function(){this.s=!0},s.pi=function(){return this.s},s.Jg=function(){this.G=!0},s.oi=function(){return this.G},s.Ig=function(){this.m=!0},s.ji=function(){return this.m},s.fh=function(e){this.A=e},s.bi=function(){return this.A},s.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=T(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},s.Vf=function(e){this.h==null?Ge("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},s.Zi=function(e){this.C=e},s.cd=function(){return this.C};function ny(e,t){e.$=t,e=T(e.g);for(var n=e.next();!n.done;n=e.next())ny(n.value,t)}me("shaka.media.SegmentReference",at),at.prototype.getSegmentData=at.prototype.cd,at.prototype.setSegmentData=at.prototype.Zi,at.prototype.syncAgainst=at.prototype.Vf,at.prototype.offset=at.prototype.offset,at.prototype.getThumbnailSprite=at.prototype.bi,at.prototype.setThumbnailSprite=at.prototype.fh,at.prototype.hasByterangeOptimization=at.prototype.ji,at.prototype.markAsByterangeOptimization=at.prototype.Ig,at.prototype.isLastPartial=at.prototype.oi,at.prototype.markAsLastPartial=at.prototype.Jg,at.prototype.isPartial=at.prototype.pi,at.prototype.markAsPartial=at.prototype.Kg,at.prototype.isIndependent=at.prototype.ni,at.prototype.markAsNonIndependent=at.prototype.Xd,at.prototype.isPreload=at.prototype.ri,at.prototype.markAsPreload=at.prototype.wf,at.prototype.markAsUnavailable=at.prototype.xi,at.prototype.getStatus=at.prototype.Yb,at.prototype.getTileDuration=at.prototype.ci,at.prototype.getTilesLayout=at.prototype.di,at.prototype.getEndByte=at.prototype.Ub,at.prototype.getStartByte=at.prototype.Xb,at.prototype.getEndTime=at.prototype.Mh,at.prototype.getStartTime=at.prototype.getStartTime,at.prototype.getUris=at.prototype.M;var gr=0,iy=1;at.Status={hj:gr,Zj:iy,Bj:2};function eu(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function cd(e){return!e||eu(e)?null:e.length?e.end(e.length-1):null}function hd(e,t){return!e||!e.length||eu(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function oy(e,t){if(!e||!e.length||eu(e))return 0;var n=0;e=T(yr(e));for(var o=e.next();!o.done;o=e.next()){var a=o.value;o=a.start,a=a.end,a>t&&(n+=a-Math.max(o,t))}return n}function JT(e,t,n){return!e||!e.length||eu(e)?null:(e=yr(e).findIndex(function(o,a,u){return o.start>t&&(a==0||u[a-1].end-t<=n)}),0<=e?e:null)}function yr(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function dd(){}function ry(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function sy(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function pd(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function eE(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var o=nn(Me(e.data,1,n)),a=e.data[2+n],u=e.data.subarray(3+n).indexOf(0);if(u===-1)return null;var f=nn(Me(e.data,3+n,u)),h;return o==="-->"?h=nn(Me(e.data,4+n+u)):h=pn(e.data.subarray(4+n+u)),t.mimeType=o,t.pictureType=a,t.description=f,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0),o===-1)?null:(n=nn(Me(e.data,1,o)),e=nn(Me(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0),o===-1)?null:(n=nn(Me(e.data,1,o)),e=nn(Me(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=nn(Me(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=pn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=nn(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=nn(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=pn(e.data),t):null}function Gr(e){for(var t=0,n=[];ry(e,t);){var o=pd(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,o=t+o;t+10<o;){var a=e.subarray(t),u=pd(a,4);a={type:String.fromCharCode(a[0],a[1],a[2],a[3]),size:u,data:a.subarray(10,10+u)},(u=eE(a))&&n.push(u),t+=a.size+10}sy(e,t)&&(t+=10)}return n}function ks(e,t){for(var n=t=t===void 0?0:t,o=0;ry(e,t);)e[t+5]>>6&1&&(o+=10),o+=10,o+=pd(e,t+6),sy(e,t+10)&&(o+=10),t+=o;return 0<o?e.subarray(n,n+o):new Uint8Array([])}me("shaka.util.Id3Utils",dd),dd.getID3Data=ks,dd.getID3Frames=Gr;function ay(e,t){var n=null,o=null,a=null,u=e.P();return t&1&&(a=e.Nc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(o=e.P()),{trackId:u,Yc:n,Id:o,ck:a}}function Ql(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function Zl(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function uy(e,t,n){var o=e.P(),a=[],u=null;n&1&&(u=e.P()),n&4&&e.skip(4);for(var f=0;f<o;f++){var h={Jf:null,sampleSize:null,ne:null};n&256&&(h.Jf=e.P()),n&512&&(h.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(h.ne=t==0?e.P():e.Sg()),a.push(h)}return{gk:o,Wg:a,Fh:u}}function ly(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function fy(e){return e=e.P(),{codec:Vl(e)}}function tE(e){var t=null,n=null,o=e.qb(4),a=String.fromCharCode(o[0]);if(a+=String.fromCharCode(o[1]),a+=String.fromCharCode(o[2]),a+=String.fromCharCode(o[3]),a==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(o=e.la(),e.la(),o){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xd:n}}function tu(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Si(e){return(10>e?"0":"")+e}function Yo(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,o=0;o<e.byteLength;o++)2<=o&&e[o]==3&&e[o-1]==0&&e[o-2]==0||(t[n]=e[o],n++);this.j=Me(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function md(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),o=Math.min(4,e.i);o!==0&&(n.set(e.j.subarray(t,t+o)),e.h=new qt(n,0).P(),e.g=8*o,e.i-=o)}function Ci(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,md(e)}e.h<<=t,e.g-=t}function At(e,t){var n=Math.min(e.g,t),o=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&md(e),n=t-n,0<n?o<<n|At(e,n):o}function gd(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return md(e),t+gd(e)}function hi(e){Ci(e,1+gd(e))}function He(e){var t=gd(e);return At(e,t+1)-1}function Is(e){return e=He(e),1&e?1+e>>>1:-1*(e>>>1)}function Je(e){return At(e,1)===1}function Ot(e){return At(e,8)}function Jl(e,t){for(var n=8,o=8,a=0;a<t;a++)o!==0&&(o=Is(e),o=(n+o+256)%256),n=o===0?n:o}function nE(e){return Ot(e),He(e),He(e)}me("shaka.util.ExpGolomb",Yo);function en(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}s=en.prototype,s.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},s.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,vd(e)),n=e.length-(e.length+t)%188,o=!1,a=t;a<n;a+=188)if(e[a]==71){var u=!!(e[a+1]&64),f=((e[a+1]&31)<<8)+e[a+2];if(1<(e[a+3]&48)>>4){var h=a+5+e[a+4];if(h==a+188)continue}else h=a+4;switch(f){case 0:u&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:u&&(h+=e[h]+1),u=e,f={audio:-1,video:-1,Rd:-1,audioCodec:"",videoCodec:""};var p=h+3+((u[h+1]&15)<<8|u[h+2])-4;for(h+=12+((u[h+10]&15)<<8|u[h+11]);h<p;){var g=(u[h+1]&31)<<8|u[h+2],S=(u[h+3]&15)<<8|u[h+4];switch(u[h]){case 6:if(0<S)for(var E=h+5,A=S;2<A;){var b=u[E+1]+2;switch(u[E]){case 5:var M=$h(u.subarray(E+2,E+b));f.audio==-1&&M==="Opus"?(f.audio=g,f.audioCodec="opus"):f.video==-1&&M==="AV01"&&(f.video=g,f.videoCodec="av1");break;case 106:f.audio==-1&&(f.audio=g,f.audioCodec="ac3");break;case 122:f.audio==-1&&(f.audio=g,f.audioCodec="ec3");break;case 124:f.audio==-1&&(f.audio=g,f.audioCodec="aac");break;case 127:f.audioCodec=="opus"&&(M=null,u[E+2]===128&&(M=u[E+3]),M!=null&&(this.F={channelCount:M&15?M&15:2,Ch:M,sampleRate:48e3}))}E+=b,A-=b}break;case 15:f.audio==-1&&(f.audio=g,f.audioCodec="aac");break;case 17:f.audio==-1&&(f.audio=g,f.audioCodec="aac-loas");break;case 21:f.Rd==-1&&(f.Rd=g);break;case 27:f.video==-1&&(f.video=g,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=g,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=g,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=g,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=g,f.audioCodec="ec3")}h+=S+5}u=f,u.video!=-1&&(this.I=u.video,this.m=u.videoCodec),u.audio!=-1&&(this.B=u.audio,this.A=u.audioCodec),u.Rd!=-1&&(this.C=u.Rd),o&&!this.H&&(o=!1,a=t-188),this.H=!0;break;case this.I:h=e.subarray(h,a+188),u?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,a+188),u?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,a+188),u?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:o=!0}}return this};function yd(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var o=t[7];if(o&192){var a=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=a),n.pts=cy(a,e.s),e.s=n.pts,n.dts=n.pts,o&64&&(o=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=o),n.dts=cy(o,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}s.Ci=function(e){return Tt("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Cf(e)},s.Cf=function(e,t,n){var o=e.pts?e.pts/9e4:null;e=e.data;var a=e.byteLength,u=1;this.m=="hvc"&&(u=2);for(var f=n||0,h=[],p=-1,g=0,S,E=0;E<a;++E){var A=e[E];if(A){if(2<=f&&A==1){if(t&&!h.length&&p==-1&&(A=E-(3<f?3:f),n&&A!=0&&(A=e.subarray(0,A),t.data=mn(t.data,A),t.fullData=mn(t.fullData,A))),0<=p?(f=E-((3<f?3:f)+1),h.push({data:e.subarray(p+u,f+1),fullData:e.subarray(p,f+1),type:g,time:o})):t&&!h.length&&(p=E-f,0<p&&(p=e.subarray(0,p),t.data=mn(t.data,p),t.fullData=mn(t.fullData,p))),E>=a-u)return h;E++,p=E,g=this.m=="hvc"?e[E]>>1&63:e[E]&31}f=0}else f++;E>=a-1&&0<=p&&0<=f&&(S={data:e.subarray(p+u,a),fullData:e.subarray(p,a),type:g,time:o})}return S&&h.push(S),!h.length&&t&&(t.data=mn(t.data,e),t.fullData=mn(t.fullData,e)),h},s.getMetadata=function(){for(var e=[],t=T(this.l),n=t.next();!n.done;n=t.next())n=mn.apply(ti,L(n.value)),(n=yd(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Gr(n.data),dts:n.dts,pts:n.pts});return e},s.Tb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=T(this.i),n=t.next();!n.done;n=t.next()){var o=mn.apply(ti,L(n.value)),a=yd(this,o);n=this.h.length?this.h[this.h.length-1]:null,a&&a.pts!=null&&a.dts!=null&&(!n||n.pts!=a.pts&&n.dts!=a.dts)?(this.h.length&&a.dts<(n.dts||0)&&(e=!0),this.h.push(a)):this.h.length&&(o=a?a.data:o)&&(n=this.h.pop(),n.data=mn(n.data,o),this.h.push(n))}e&&(this.h=this.h.sort(function(u,f){var h=(u.pts||0)-(f.pts||0);return(u.dts||0)-(f.dts||0)||h}))}return this.h},s.Fc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=T(this.j),o=n.next();!o.done;o=n.next()){var a=mn.apply(ti,L(o.value)),u=yd(this,a);o=this.g.length?this.g[this.g.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!o||o.pts!=u.pts&&o.dts!=u.dts)?(this.g.length&&u.dts<(o.dts||0)&&(t=!0),this.g.push(u)):this.g.length&&(a=u?u.data:a)&&(o=this.g.pop(),o.data=mn(o.data,a),this.g.push(o))}if(e){for(n=[],o=T(this.g),a=o.next();!a.done;a=o.next())if(a=a.value,a.nalus=this.Cf(a,f,void 0),a.nalus.length){n.push(a);var f=a.nalus[a.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(h,p){var g=(h.pts||0)-(p.pts||0);return(h.dts||0)-(p.dts||0)||g}))}return e?this.g:(e=this.g,this.g=[],e)},s.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Tb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Fc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},s.$c=function(){return{audio:this.A,video:this.m}},s.Pd=function(){for(var e=[],t=T(this.Fc()),n=t.next();!n.done;n=t.next())e.push.apply(e,L(n.value.nalus));return e},s.gi=function(){Tt("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},s.kf=function(){return this.m=="hvc"?oE(this):iE(this)};function iE(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(A){return A.type==7}),!e))return t;e=new Yo(e.data);var n=Ot(e),o=Ot(e),a=Ot(e);if(hi(e),rE.includes(n)){var u=He(e);if(u===3&&Ci(e,1),hi(e),hi(e),Ci(e,1),Je(e)){u=u!==3?8:12;for(var f=0;f<u;f++)Je(e)&&(6>f?Jl(e,16):Jl(e,64))}}if(hi(e),u=He(e),u===0)He(e);else if(u===1)for(Ci(e,1),hi(e),hi(e),u=He(e),f=0;f<u;f++)hi(e);hi(e),Ci(e,1),u=He(e),f=He(e);var h=At(e,1);h===0&&Ci(e,1),Ci(e,1);var p=0,g=0,S=0,E=0;return Je(e)&&(p=He(e),g=He(e),S=He(e),E=He(e)),t.height=String((2-h)*(f+1)*16-2*S-2*E),t.width=String(16*(u+1)-2*p-2*g),t.codec="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t}function oE(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(D){return D.type==33}),!e))return t;var n=new Yo(e.fullData,!0);Ot(n),Ot(n),At(n,4);var o=At(n,3);Je(n);var a=At(n,2),u=At(n,1),f=At(n,5),h=At(n,32);e=Ot(n);for(var p=Ot(n),g=Ot(n),S=Ot(n),E=Ot(n),A=Ot(n),b=Ot(n),M=[],_=[],R=0;R<o;R++)M.push(Je(n)),_.push(Je(n));if(0<o)for(R=o;8>R;R++)At(n,2);for(R=0;R<o;R++)M[R]&&At(n,88),_[R]&&Ot(n);He(n),o=He(n),o==3&&At(n,1),M=He(n),_=He(n);var B=R=0,N=0,H=0;return Je(n)&&(R+=He(n),B+=He(n),N+=He(n),H+=He(n)),t.width=String(M-(R+B)*(o===1||o===2?2:1)),t.height=String(_-(N+H)*(o===1?2:1)),n=function(D){for(var F=0,X=0;32>X;X++)F|=(D>>X&1)<<31-X;return F>>>0}(h),u=u==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+f),a+="."+n.toString(16).toUpperCase(),a+="."+u+b,A&&(a+="."+A.toString(16).toUpperCase()),E&&(a+="."+E.toString(16).toUpperCase()),S&&(a+="."+S.toString(16).toUpperCase()),g&&(a+="."+g.toString(16).toUpperCase()),p&&(a+="."+p.toString(16).toUpperCase()),e&&(a+="."+e.toString(16).toUpperCase()),t.codec=a,t}function cy(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function nu(e){return!(0>vd(e))}function vd(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}me("shaka.util.TsParser",en),en.syncOffset=vd,en.probe=nu,en.prototype.getVideoInfo=en.prototype.kf,en.prototype.getVideoResolution=en.prototype.gi,en.prototype.getVideoNalus=en.prototype.Pd,en.prototype.getCodecs=en.prototype.$c,en.prototype.getStartTime=en.prototype.getStartTime,en.prototype.getVideoData=en.prototype.Fc,en.prototype.getAudioData=en.prototype.Tb,en.prototype.getMetadata=en.prototype.getMetadata,en.prototype.parseNalus=en.prototype.Cf,en.prototype.parseAvcNalus=en.prototype.Ci,en.prototype.parse=en.prototype.parse,en.prototype.clearData=en.prototype.clearData,en.Timescale=9e4;var rE=[100,110,122,244,44,83,86,118,128,138,139,134];function iu(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&ze("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Tt("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{ze("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(ze("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||ze(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function hy(e){e.g&&e.i.classList.add("shaka-hidden")}iu.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function dy(e,t,n){var o=0,a=-1;switch(t.mimeType){case"video/webm":o=1;break;case"video/mp4":o=2}switch(n){case"DASH":a=1;break;case"HLS":a=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(o),e.j||e.g.setStreamingFormat(a))}me("shaka.lcevc.Dec",iu),iu.prototype.release=iu.prototype.release;function py(e,t,n,o){var a=this;this.i=e,this.da=n,this.A=null,this.F=t,this.h={},this.G={},this.Da={},this.g=null,this.fa=!1,this.Z=o||null,this.l={},this.s=new Ae,this.j={},this.H=null,this.L=new Wt,this.N="",this.qa=!1,this.m=my(this,this.L),this.C=!1,this.I=new Ts(function(){return aE(a)}),this.B=!1,this.ba="UNKNOWN",this.Ea=this.Fa=!1,this.za=new Wt,this.o=!1,this.xa=!0,this.pa=this.R=this.ya=this.U=this.K=this.ea=null,this.oa=new Wt}function my(e,t){if(d.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.xa=!0}),e.s.D(n,"endstreaming",function(){e.xa=!1}),e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=rf(n),e.i.src=e.N,n}return n=new MediaSource,e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=rf(n),e.i.src=e.N,n}function sE(e,t){var n,o,a,u,f,h,p,g,S,E,A;return $(function(b){if(b.g==1)return e.createSegmentIndex?k(b,e.createSegmentIndex(),2):b.u(2);if(!e.segmentIndex)return b.return(!1);if(e.segmentIndex.getNumReferences()==0)return b.return(!0);for(n=Mn,o=new Set,a=T(e.segmentIndex),u=a.next();!u.done;u=a.next())if(f=u.value,h=f.mimeType||e.mimeType||"",p=f.codecs||e.codecs||"",g=h+":"+p,!o.has(g)){if(o.add(g),t==n.ua){if(S=Rn(h,p),!Ha(S))return b.return(!1)}else if(t==n.ga?p=Xa(p):t==n.X&&(p=ys(p,h)),E=YC(e,h,p),A=Fr(h,p),!Ne(E)&&!Hi(A))return b.return(!1)}return b.return(!0)})}s=py.prototype,s.destroy=function(){return this.I.destroy()};function aE(e){var t,n,o,a,u,f,h,p;return $(function(g){if(g.g==1){t=[];for(n in e.l)for(o=e.l[n],a=o[0],e.l[n]=o.slice(0,1),a&&t.push(a.p.catch(Qm)),u=T(o.slice(1)),f=u.next();!f.done;f=u.next())h=f.value,h.p.reject(new ne(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(p in e.j)t.push(e.j[p].destroy());return k(g,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.F=null,e.h={},e.j={},e.H=null,e.l={},e.Z=null,e.K=null,e.da=null,q(g)})}s.init=function(e,t,n,o){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,o=o===void 0?!1:o;var a=this,u,f,h,p,g;return $(function(S){switch(S.g){case 1:return u=Mn,k(S,a.L,2);case 2:a.B=t,a.ba=n,a.Fa=o,a.Ea=!a.B&&a.ba=="HLS"&&!a.Fa,a.K=null,f=T(e.keys()),h=f.next();case 3:if(h.done){S.u(0);break}return p=h.value,g=e.get(p),k(S,ef(a,p,g,g.codecs),6);case 6:a.o?(a.l[u.X]=[],a.l[u.ga]=[]):a.l[p]=[],h=f.next(),S.u(3)}})};function ef(e,t,n,o){var a,u,f,h,p,g,S,E,A,b,M,_;return $(function(R){switch(R.g){case 1:return a=Mn,u=wt,f=ft,k(R,sE(n,t),2);case 2:if(f.call(u,R.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Rn(n.mimeType,o),t==a.ua){tf(e,h,e.B,n.external),R.u(0);break}if(p=e.A.forceTransmux,(!Ne(h)||!e.B&&dr.includes(h))&&(p=!0),g=Fr(n.mimeType,o),!p){R.u(4);break}if(S=vi(a.X,(o||"").split(",")),E=vi(a.ga,(o||"").split(",")),!S||!E){R.u(5);break}return e.o=!0,k(R,ef(e,a.X,n,S),6);case 6:return k(R,ef(e,a.ga,n,E),7);case 7:return R.return();case 5:(A=Hi(g))&&(b=A(),e.j[t]=b,h=b.convertCodecs(t,g));case 4:M=h+e.A.addExtraFeaturesToSourceBuffer(h),Yt(e.I);try{_=e.m.addSourceBuffer(M)}catch(B){throw new ne(2,3,3015,B,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(_.mode=xE),e.s.D(_,"error",function(){var B=e.l[t][0];B.p.reject(new ne(2,3,3014,e.i.error?e.i.error.code:0,B.uri))}),e.s.D(_,"updateend",function(){return qo(e,t)}),e.h[t]=_,e.G[t]=h,e.Da[t]=!!n.drmInfos.length,q(R)}})}s.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function tf(e,t,n,o){e.g||(e.g=new zo(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var a=e.g;o=o||e.fa,e=e.ba,t=="application/cea-608"||t=="application/cea-708"?a.i=null:(a.i=(0,_n[t])(),a.i.setSequenceMode?a.i.setSequenceMode(n):Tt("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),a.i.setManifestType?a.i.setManifestType(e):Tt("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),a.B=o)}function gy(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function xd(e,t){return e.C||!Object.keys(e.h).length?e=null:t==Rt?e=e.g.g:(e=Ms(e,t),e=!e||eu(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function ou(e,t){return e.C?null:t==Rt?e.g.h:cd(Ms(e,t))}function uE(e,t,n){return e.C?0:t==Rt?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Ms(e,t),oy(e,n))}s.wb=function(){var e={total:this.C?[]:yr(this.i.buffered),audio:this.C?[]:yr(Ms(this,"audio")),video:this.C?[]:yr(Ms(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Ms(e,t){try{return e.h[t].buffered}catch{return null}}function lE(e,t,n,o,a,u){var f=null,h=Me(n);if(dr.includes(a))u=Gr(h),u.length&&o&&((t=u.find(function(E){return E.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.da.onMetadata([{cueTime:o.startTime,data:h,frames:u,dts:o.startTime,pts:o.startTime}],0,o.endTime));else if(a.includes("/mp4")&&o&&o.timestampOffset==0&&o.$&&o.$.timescale){var p=o.$.timescale;if(!isNaN(p)){var g=0,S=!1;new Kt().box("moof",kt).box("traf",kt).S("tfdt",function(E){g=Ql(E.reader,E.version).baseMediaDecodeTime/p,S=!0,E.parser.stop()}).parse(n,!0),S&&(f=g)}}else!a.includes("/mp4")&&!a.includes("/webm")&&nu(h)&&(e.K?e.K.clearData():e.K=new en,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(f=t),h=h.getMetadata(),h.length)&&e.da.onMetadata(h,u,o?o.endTime:null);return f}function nf(e,t,n,o,a,u,f,h,p,g){f=f===void 0?!1:f,h=h===void 0?!1:h,p=p===void 0?!1:p,g=g===void 0?!1:g;var S,E,A,b,M,_,R,B,N,H,D,F,X,J;return $(function(ie){switch(ie.g){case 1:if(S=Mn,t!=S.ua){ie.u(2);break}if(!e.B){ie.u(3);break}return k(ie,e.za,4);case 4:E=ie.h,e.g.s=E;case 3:return k(ie,KC(e.g,n,o?o.startTime:null,o?o.endTime:null,o?o.M()[0]:null),5);case 5:return ie.return();case 2:if(g||!e.o){ie.u(6);break}return k(ie,nf(e,S.X,n,o,a,u,f,h,p,!0),7);case 7:return k(ie,nf(e,S.ga,n,o,a,u,f,h,p,!0),8);case 8:return ie.return();case 6:if(!e.h[t])return ie.return();if(A=e.h[t].timestampOffset,b=e.G[t],e.j[t]&&(b=e.j[t].getOriginalMimeType()),o&&(M=lE(e,t,n,o,b,A),M!=null&&(e.U==null&&t==S.ga&&(e.U=M,e.ya=o.startTime,e.R!=null&&(_=0,e.ya==e.pa&&(_=e.U-e.R),e.oa.resolve(_))),e.R==null&&t==S.X&&(e.R=M,e.pa=o.startTime,e.U!=null&&(R=0,e.ya==e.pa&&(R=e.U-e.R),e.oa.resolve(R))),B=o.startTime-M,N=Math.abs(A-B),(.001<=N||f||h)&&(!p||0<B||!A)&&(A=B,e.Ea&&(jn(e,t,function(){return Rs(e,t)},null),jn(e,t,function(){return _s(e,t,A)},null))),H=t==S.ga||!(S.ga in e.h),e.B&&H&&e.za.resolve(A))),u&&t==S.ga&&(e.g||tf(e,"application/cea-608",e.B,!1),e.H||(D=b.split(";",1)[0],e.H=new cn(D)),o?(F=e.H.i(n),F.length&&ZC(e.g,F,o.startTime,o.endTime,A)):e.H.init(n,h)),!e.j[t]){ie.u(9);break}return k(ie,e.j[t].transmux(n,a,o,e.m.duration,t),10);case 10:n=ie.h;case 9:if(n=pE(e,n,o?o.startTime:null,t,o?o.M()[0]:null),!o||!e.B||t==S.ua){ie.u(11);break}if(!f&&!h){ie.u(11);break}if(X=o.startTime,e.ba!="HLS"||e.o||t!=S.X||!e.h[S.ga]){ie.u(13);break}return k(ie,e.oa,14);case 14:J=ie.h,.1<Math.abs(J)&&(X-=J);case 13:jn(e,t,function(){return Rs(e,t)},null),jn(e,t,function(){return _s(e,t,X)},null);case 11:return k(ie,jn(e,t,function(){var de=n;if(t=="video"&&e.Z){var oe=e.Z;oe.g&&oe.g.appendBuffer(de,"video",oe.o,-A)}e.h[t].appendBuffer(de)},o?o.M()[0]:null),15);case 15:q(ie)}})}function fE(e,t){var n=ou(e,"video")||0;qm(e.g,t,n)}function cE(e){e.g&&qm(e.g,"",0)}s.remove=function(e,t,n){var o=this,a;return $(function(u){return u.g==1?(a=Mn,e==a.ua?k(u,o.g.remove(t,n),0):k(u,jn(o,e,function(){return of(o,e,t,n)},null),4)):o.o?k(u,jn(o,a.X,function(){return of(o,a.X,t,n)},null),0):u.u(0)})};function yy(e,t){var n;return $(function(o){return o.g==1?(n=Mn,t==n.ua?e.g?k(o,e.g.remove(0,1/0),0):o.return():k(o,jn(e,t,function(){return of(e,t,0,e.m.duration)},null),4)):e.o?k(o,jn(e,n.X,function(){return of(e,n.X,0,e.m.duration)},null),0):o.u(0)})}s.flush=function(e){var t=this,n;return $(function(o){return o.g==1?(n=Mn,e==n.ua?o.return():k(o,jn(t,e,function(){t.i.currentTime-=.001,qo(t,e)},null),2)):t.o?k(o,jn(t,n.X,function(){var a=n.X;t.i.currentTime-=.001,qo(t,a)},null),0):o.u(0)})};function hE(e,t,n,o,a,u,f,h,p){var g,S,E;return $(function(A){return A.g==1?(g=Mn,t==g.ua?(u||(e.g.s=n),QC(e.g,o,a),A.return()):(S=[],k(A,yE(e,t,f,h,p),2))):(E=A.h,E||(S.push(jn(e,t,function(){return Rs(e,t)},null)),e.o&&S.push(jn(e,g.X,function(){return Rs(e,g.X)},null))),u||(S.push(jn(e,t,function(){return _s(e,t,n)},null)),e.o&&S.push(jn(e,g.X,function(){return _s(e,g.X,n)},null))),S.push(jn(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=a,e.h[t].appendWindowStart=o,qo(e,t)},null)),e.o&&S.push(jn(e,g.X,function(){var b=g.X;e.h[b].appendWindowStart=0,e.h[b].appendWindowEnd=a,e.h[b].appendWindowStart=o,qo(e,b)},null)),k(A,Promise.all(S),0))})}function dE(e,t,n){var o;return $(function(a){return a.g==1?(o=Mn,t==o.ua?a.return():(t==o.ga&&(e.za=new Wt),jn(e,t,function(){return Rs(e,t)},null),e.o&&jn(e,o.X,function(){return Rs(e,o.X)},null),k(a,jn(e,t,function(){return _s(e,t,n)},null),2))):e.o?k(a,jn(e,o.X,function(){return _s(e,o.X,n)},null),0):a.u(0)})}s.endOfStream=function(e){var t=this;return $(function(n){return k(n,wd(t,function(){gy(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},s.Za=function(e){var t=this;return $(function(n){return k(n,wd(t,function(){if(e<t.m.duration)for(var o in t.h){var a={start:function(){},p:new Wt,uri:null};t.l[o].unshift(a)}t.m.duration=e,t.ea=e}),0)})},s.getDuration=function(){return this.m.duration};function of(e,t,n,o){o<=n?qo(e,t):e.h[t].remove(n,o)}function Rs(e,t){var n=e.h[t].appendWindowStart,o=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=o,qo(e,t)}function _s(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,qo(e,t)}function qo(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),Sd(e,t))}}function jn(e,t,n,o){return Yt(e.I),n={start:n,p:new Wt,uri:o},e.l[t].push(n),e.l[t].length==1&&vy(e,t),n.p}function wd(e,t){var n,o,a,u,f,h,p;return $(function(g){switch(g.g){case 1:Yt(e.I),n=[],o={};for(a in e.h)o={ready:void 0},o.ready=new Wt,u={start:function(S){return function(){return S.ready.resolve()}}(o),p:o.ready,uri:null},e.l[a].push(u),n.push(o.ready),e.l[a].length==1&&u.start();return Y(g,2),k(g,Promise.all(n),4);case 4:K(g,3);break;case 2:throw f=ee(g),f;case 3:return Y(g,5,6),k(g,t(),6);case 6:re(g);for(h in e.h)Sd(e,h);ce(g,0);break;case 5:throw p=ee(g),new ne(2,3,3015,p,e.i.error||"No error in the media element",null)}})}function Sd(e,t){e.l[t].shift(),vy(e,t)}function vy(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(o){o.name=="QuotaExceededError"?n.p.reject(new ne(2,3,3017,t)):n.p.reject(new ne(2,3,3015,o,e.i.error||"No error in the media element",n.uri)),Sd(e,t)}}function pE(e,t,n,o,a){var u=n==null,f=e.Da[o];return n=e.da.Qh(),(u=e.A.insertFakeEncryptionInInit&&u&&f)&&(n=Oh(n),u=Ro()||Mo()||Uh()||za()&&Bh()&&n),u&&Pl(e.G[o])=="mp4"&&(t=KT(t,a)),t}function mE(e,t,n,o){return jn(e,t,function(){t!==Rt&&(xt()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),o&&(e.j[t]=o),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),qo(e,t))},null)}function gE(e,t){var n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de;return $(function(oe){switch(oe.g){case 1:n=Mn,e.C=!0,e.o=!1,o=e.i.currentTime,a=e.i.autoplay,u=e.i.paused,e.qa&&(e.i.autoplay=!1),Z(oe,2),e.s.Ra(),f=[];for(h in e.j)f.push(e.j[h].destroy());for(p in e.l)for(g=e.l[p],S=g[0],e.l[p]=g.slice(0,1),S&&f.push(S.p.catch(Qm)),E=T(g.slice(1)),A=E.next();!A.done;A=E.next())b=A.value,b.p.reject(new ne(2,7,7003,void 0));for(M in e.h){_=e.h[M];try{e.m.removeSourceBuffer(_)}catch{}}return k(oe,Promise.all(f),4);case 4:return e.j={},e.h={},R=e.m.duration,e.L=new Wt,e.m=my(e,e.L),k(oe,e.L,5);case 5:!isNaN(R)&&R?e.m.duration=R:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),B=new Wt,N=e.m.sourceBuffers,H=t.size,D=0,F=function(){D++,D===H&&(B.resolve(),e.s.jb(N,"addsourcebuffer",F))},e.s.D(N,"addsourcebuffer",F),X=T(t.keys()),J=X.next();case 6:return J.done?(e.i.currentTime=o,k(oe,B,2)):(ie=J.value,de=t.get(ie),k(oe,ef(e,ie,de,de.codecs),9));case 9:e.o?(e.l[n.X]=[],e.l[n.ga]=[]):e.l[ie]=[],J=X.next(),oe.u(6);break;case 2:re(oe),e.C=!1,Yt(e.I),e.s.ha(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=a,u||e.i.play())}),ce(oe,0)}})}function xy(e,t){return wd(e,function(){return gE(e,t)})}function yE(e,t,n,o,a){var u,f,h,p,g,S,E,A,b,M,_,R,B,N,H;return $(function(D){return D.g==1?(u=Mn,t==u.ua?D.return(!1):(f=ci(Di(e.G[t])),h=ao(e.G[t]),g=!1,S=Rn(n,o),E=e.A.forceTransmux,(!Ne(S)||!e.B&&dr.includes(S))&&(E=!0),E&&(A=Fr(n,o),b=Hi(A))&&(p=b(),M=vi(u.X,(o||"").split(",")),_=vi(u.ga,(o||"").split(",")),M&&_?(g=!0,R=_,t==u.X&&(R=M),S=p.convertCodecs(t,Fr(n,R))):S=p.convertCodecs(t,A)),B=ci(Di(S)),N=ao(S),f===B&&h===N?(e.j[t]&&!p?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&p?e.j[t]=p:p&&(e.j[t]&&e.j[t].transmux!=p.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=p):p.destroy()),D.return(!1)):(H=!0,(e.o||g&&p&&!e.j[t])&&(H=!1),H&&e.A.codecSwitchingStrategy==="smooth"&&xt()?k(D,mE(e,t,S,p),3):(p&&p.destroy(),k(D,xy(e,a),3))))):D.return(!0)})}function vE(e,t,n,o){if(t==Rt)var a=!1;else{a=ci(Di(e.G[t]));var u=ao(e.G[t]),f=Rn(n,o),h=e.A.forceTransmux;(!Ne(f)||!e.B&&dr.includes(f))&&(h=!0),n=Fr(n,o),h&&(h=Hi(n))&&(h=h(),f=h.convertCodecs(t,n),h.destroy()),t=ci(Di(f)),f=ao(f),a=a!==t||u!==f}return a?e.A.codecSwitchingStrategy!=="smooth"||!xt()||e.o:!1}var rf=d.URL.createObjectURL,xE="sequence";function st(e,t,n){this.i=e,this.A=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}s=st.prototype,s.getDuration=function(){return this.j},s.Sh=function(){return this.g},s.dh=function(e){this.i=e},s.Za=function(e){this.j=e},s.Xh=function(){return this.i},s.ah=function(e){this.B=e},s.sc=function(e){this.G=e},s.pe=function(e){this.o=e},s.Od=function(){return this.o},s.Of=function(e){this.A=e},s.Lh=function(){return this.A},s.Ng=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(a){return a.start+t<n}),e.length!=0){var o=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(a,u){return Math.max(a,u.end-u.start)},this.g),this.h=Math.max(this.h,o),this.i!=null&&this.C&&!this.s&&(this.i=n-this.h-this.g)}}},s.sd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,o=(Date.now()+this.B)/1e3;e=T(e);for(var a=e.next();!a.done;a=e.next())a=a.value,o<a.startTime||(t=Math.min(t,a.startTime),n=Math.max(n,a.endTime),this.g=Math.max(this.g,a.endTime-a.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.s&&(this.i=o-this.h-this.g)}},s.Th=function(){return this.h},s.Wd=function(){this.s=!0},s.si=function(){return this.s},s.bh=function(e){this.m=e},s.Ph=function(){return this.m},s.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},s.xf=function(e){this.g=Math.max(this.g,e)},s.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},s.V=function(){return this.j==1/0&&!this.G},s.kc=function(){return this.j!=1/0&&!this.G},s.mb=function(){return Math.max(this.H,this.Wb()-this.o)},s.hh=function(e){this.H=e},s.Wb=function(){return this.V()||this.kc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},s.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Wb()-this.o+e,this.yb()))},s.Vb=function(){return this.bd(0)},s.yb=function(){return Math.max(0,this.Wb()-(this.V()||this.kc()?this.A:0))},s.nh=function(){return!(this.i==null||this.h!=null&&this.C)},s.$g=function(e){this.F=e},s.Jh=function(){return this.F},me("shaka.media.PresentationTimeline",st),st.prototype.getAvailabilityTimeOffset=st.prototype.Jh,st.prototype.setAvailabilityTimeOffset=st.prototype.$g,st.prototype.usingPresentationStartTime=st.prototype.nh,st.prototype.getSeekRangeEnd=st.prototype.yb,st.prototype.getSeekRangeStart=st.prototype.Vb,st.prototype.getSafeSeekRangeStart=st.prototype.bd,st.prototype.getSegmentAvailabilityEnd=st.prototype.Wb,st.prototype.setUserSeekStart=st.prototype.hh,st.prototype.getSegmentAvailabilityStart=st.prototype.mb,st.prototype.isInProgress=st.prototype.kc,st.prototype.isLive=st.prototype.V,st.prototype.offset=st.prototype.offset,st.prototype.notifyMaxSegmentDuration=st.prototype.xf,st.prototype.notifyMinSegmentStartTime=st.prototype.ce,st.prototype.getInitialProgramDateTime=st.prototype.Ph,st.prototype.setInitialProgramDateTime=st.prototype.bh,st.prototype.isStartTimeLocked=st.prototype.si,st.prototype.lockStartTime=st.prototype.Wd,st.prototype.getMaxSegmentEndTime=st.prototype.Th,st.prototype.notifySegments=st.prototype.sd,st.prototype.notifyTimeRange=st.prototype.Ng,st.prototype.getDelay=st.prototype.Lh,st.prototype.setDelay=st.prototype.Of,st.prototype.getSegmentAvailabilityDuration=st.prototype.Od,st.prototype.setSegmentAvailabilityDuration=st.prototype.pe,st.prototype.setStatic=st.prototype.sc,st.prototype.setClockOffset=st.prototype.ah,st.prototype.getPresentationStartTime=st.prototype.Xh,st.prototype.setDuration=st.prototype.Za,st.prototype.setPresentationStartTime=st.prototype.dh,st.prototype.getMaxSegmentDuration=st.prototype.Sh,st.prototype.getDuration=st.prototype.getDuration;function wy(e,t,n){this.j=n,this.l=e,this.s=Sy(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}wy.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function wE(e,t){e.i=t}function SE(e){this.g=e}function Sy(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=T(yr(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Cd(e,t,n,o,a){var u=this;this.A=a,this.g=e,this.B=t,this.s=n,this.l=new Ae,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=o,this.o=!1,this.l.D(e,"waiting",function(){return Td(u)}),this.m=new bt(function(){Td(u)}).Sa(this.s.gapJumpTimerTime)}Cd.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},Cd.prototype.Af=function(){this.o=!0,Td(this)};function Td(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,o=Sy(n),a=n.g.currentTime,u=Date.now()/1e3;(t.g!=a||t.s!=o)&&(t.m=u,t.g=a,t.s=o,t.h=!1),a=u-t.m,(o=a>=t.A&&o&&!t.h)&&(t.i(t.g,a),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new je("stalldetected"))),t=!o}t&&(t=e.g.currentTime,n=e.g.buffered,o=JT(n,t,e.s.gapDetectionThreshold),o!=null&&(o!=0||e.o))&&(a=n.start(o),(navigator.userAgent.match(/Edge\//)||Mo())&&(a=Math.ceil(100*(a+.01))/100),a>=e.B.yb()||.001>a-t||(o!=0&&n.end(o-1),e.g.currentTime=a,t==e.i&&(e.i=a),e.C++,e.A(new je("gapjumped"))))}}}function Ls(e,t,n,o){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?o():(t=CE.value().get(t),n.ha(e,t,o))}var CE=new ls(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Cy(e,t,n,o){var a=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return a.l==null&&(a.l=o()),a.l},this.o=!1,this.h=new Ae,this.i=new Ay(e),Ls(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Ey(a,a.j())})}Cy.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Ed(e){return e.o?e.g.currentTime:e.j()}function Ty(e,t){0<e.g.readyState?ky(e.i,t):Ls(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Ey(e,e.j())})}function Ey(e,t){.001>Math.abs(e.g.currentTime-t)?by(e):(e.h.ha(e.g,"seeking",function(){by(e)}),ky(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function by(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function Ay(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new bt(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}Ay.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function ky(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Sa(.1)}function Iy(e){this.h=e,this.j=!1,this.g=null,this.i=new Ae}s=Iy.prototype,s.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,o=t.g;0>t.g&&(o=Math.max(0,n+t.g)),n!=o?(t.i.ha(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=o):t.j=!0}}var t=this;Ls(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},s.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},s.Ee=function(e){this.g=this.j?this.g:e},s.yd=function(){return(this.j?this.h.currentTime:this.g)||0},s.gg=function(){return 0},s.fg=function(){return 0},s.Mg=function(){};function My(e,t,n,o,a,u){var f=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=a,this.s=null,this.o=TE(e,n,u),this.j=new Cd(e,t.presentationTimeline,n,this.o,u),this.h=new Cy(e,function(){e:{var h=f.j;h.j=!0,h.o=!1;var p=Ed(f.h);if(h=_y(f,p),.001<Math.abs(h-p)){if(p=!1,!Pi()||Pi()&&_l())p=!0;else{var g=Date.now()/1e3;(!f.s||f.s<g-1)&&(f.s=g,p=!0)}if(p){Ty(f.h,h),h=void 0;break e}}f.A(),h=void 0}return h},function(h){var p=f.j;p.g.seeking&&!p.j&&(p.j=!0,p.i=h)},function(){var h=o;return h==null?h=1/0>f.g.getDuration()?f.g.Vb():f.g.yb():0>h&&(h=f.g.yb()+h),Ry(f,Ly(f,h))}),this.m=new bt(function(){if(f.i.readyState!=0&&!f.i.paused){var h=Ed(f.h),p=f.g.Vb(),g=f.g.yb();3>g-p&&(p=g-3),h<p&&(h=_y(f,h),f.i.currentTime=h)}})}s=My.prototype,s.ready=function(){this.m.Sa(.25)},s.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},s.Ee=function(e){Ty(this.h,e)},s.yd=function(){var e=Ed(this.h);return 0<this.i.readyState&&!this.i.paused?Ly(this,e):e},s.gg=function(){return this.o?this.o.o:0},s.fg=function(){return this.j.C},s.Mg=function(){this.j.Af()};function Ry(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function _y(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),o=e.l.safeSeekOffset,a=e.g.Vb(),u=e.g.yb(),f=e.g.getDuration();3>u-a&&(a=u-3);var h=e.g.bd(n),p=e.g.bd(o);return n=e.g.bd(n+o),t>=f?Ry(e,t):t>u?u:t<a?hd(e.i.buffered,p)?p:n:t>=h||hd(e.i.buffered,t)?t:n}function Ly(e,t){var n=e.g.Vb();return t<n?n:(e=e.g.yb(),t>e?e:t)}function TE(e,t,n){if(!t.stallEnabled)return null;var o=t.stallSkip;return t=new wy(new SE(e),t.stallThreshold,n),wE(t,function(){o?e.currentTime+=o:(e.pause(),e.play())}),t}function Pt(e){this.O=e,this.l=null,this.i=0,this.m=!1}s=Pt.prototype,s.getNumReferences=function(){return this.O.length},s.getNumEvicted=function(){return this.i},s.release=function(){this.m||(this.O=[],this.l&&this.l.stop(),this.l=null)},s.yi=function(){this.m=!0},s.Hb=function(e){for(var t=T(this.O),n=t.next();!n.done;n=t.next())e(n.value)},s.find=function(e){for(var t=this.O.length-1,n=t;0<=n;--n){var o=this.O[n],a=n<t?this.O[n+1].startTime:o.endTime;if(e>=o.startTime&&e<a)return n+this.i}return this.O.length&&e<this.O[0].startTime?this.i:null},s.get=function(e){return this.O.length==0?null:(e-=this.i,0>e||e>=this.O.length?null:this.O[e])},s.offset=function(e){if(!this.m)for(var t=T(this.O),n=t.next();!n.done;n=t.next())n.value.offset(e)},s.Zd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.O=this.O.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.O.push.apply(this.O,L(e))}},s.rd=function(e,t){var n=this;e=e.filter(function(o){return o.endTime>t&&(n.O.length==0||o.endTime>n.O[0].startTime)}),this.Zd(e),this.Ma(t)},s.Ma=function(e){if(!this.m){var t=this.O.length;this.O=this.O.filter(function(n){return n.endTime>e}),this.i+=t-this.O.length}},s.Bc=function(e,t,n){if(n=n===void 0?!1:n,!this.m){for(;this.O.length&&this.O[this.O.length-1].startTime>=t;)this.O.pop();for(;this.O.length&&this.O[0].endTime<=e;)this.O.shift(),n||this.i++;this.O.length!=0&&(e=this.O[this.O.length-1],t=new at(e.startTime,t,e.F,e.Ha,e.sa,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.O[this.O.length-1]=t)}},s.ue=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new bt(function(){var o=t();o?n.O.push.apply(n.O,L(o)):(n.l.stop(),n.l=null)}),this.l.Sa(e))},Pt.prototype[Symbol.iterator]=function(){return this.Ib(0)},Pt.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var o=this.find(e);if(o==null)return null;var a=this.get(o);n?o++:o--;var u=-1;if(a&&0<a.g.length)for(var f=a.g.length-1;0<=f;--f){var h=a.g[f];if(e>=h.startTime&&e<h.endTime){if(!t){for(;f&&!h.l;)f--,h=a.g[f];if(!h.l)return Ge("No independent partial segment found!"),null}n?o--:o++,u=f-1;break}}return new Oi(this,o,u,n)};function bd(e,t,n){return e=new at(e,e+t,function(){return n},0,null,null,e,e,e+t),new Pt([e])}me("shaka.media.SegmentIndex",Pt),Pt.forSingleSegment=bd,Pt.prototype.getIteratorForTime=Pt.prototype.Ib,Pt.prototype.updateEvery=Pt.prototype.ue,Pt.prototype.fit=Pt.prototype.Bc,Pt.prototype.evict=Pt.prototype.Ma,Pt.prototype.mergeAndEvict=Pt.prototype.rd,Pt.prototype.offset=Pt.prototype.offset,Pt.prototype.get=Pt.prototype.get,Pt.prototype.find=Pt.prototype.find,Pt.prototype.markImmutable=Pt.prototype.yi,Pt.prototype.release=Pt.prototype.release,Pt.prototype.getNumEvicted=Pt.prototype.getNumEvicted,Pt.prototype.getNumReferences=Pt.prototype.getNumReferences;function Oi(e,t,n,o){this.i=e,this.h=t,this.g=n,this.reverse=o}Oi.prototype.Sc=function(e){this.reverse=e},Oi.prototype.Eh=function(){return this.h},Oi.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Oi.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},me("shaka.media.SegmentIterator",Oi),Oi.prototype.next=Oi.prototype.next,Oi.prototype.current=Oi.prototype.current,Oi.prototype.currentPosition=Oi.prototype.Eh,Oi.prototype.setReverse=Oi.prototype.Sc;function gn(){Pt.call(this,[]),this.g=[]}te(gn,Pt),s=gn.prototype,s.clone=function(){var e=new gn;return e.g=this.g.slice(),e},s.release=function(){for(var e=T(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},s.Hb=function(e){for(var t=T(this.g),n=t.next();!n.done;n=t.next())n.value.Hb(e)},s.find=function(e){for(var t=0,n=T(this.g),o=n.next();!o.done;o=n.next()){o=o.value;var a=o.find(e);if(a!=null)return a+t;t+=o.getNumEvicted()+o.getNumReferences()}return null},s.get=function(e){for(var t=0,n=T(this.g),o=n.next();!o.done;o=n.next()){o=o.value;var a=o.get(e-t);if(a)return a;a=o.getNumReferences(),t+=o.getNumEvicted()+a}return null},s.offset=function(){},s.Zd=function(){},s.Ma=function(){},s.rd=function(){},s.Bc=function(){},s.ue=function(){},me("shaka.media.MetaSegmentIndex",gn),gn.prototype.updateEvery=gn.prototype.ue,gn.prototype.fit=gn.prototype.Bc,gn.prototype.mergeAndEvict=gn.prototype.rd,gn.prototype.evict=gn.prototype.Ma,gn.prototype.merge=gn.prototype.Zd,gn.prototype.offset=gn.prototype.offset,gn.prototype.get=gn.prototype.get,gn.prototype.find=gn.prototype.find,gn.prototype.forEachTopLevelReference=gn.prototype.Hb,gn.prototype.release=gn.prototype.release;function ru(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Nd(),this.h=new bt(function(){t.g.Lg(.25*t.i)})}ru.prototype.release=function(){this.set(this.hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},ru.prototype.set=function(e){this.i=e,Py(this)},ru.prototype.hc=function(){return this.g.hc()};function Py(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Nd()!=t&&e.g.Rf(t);return}catch{}e.h.Sa(.25),e.g.Nd()!=0&&e.g.Rf(0)}function Dy(e){var t=this;this.h=e,this.g=new Set,this.i=new bt(function(){Oy(t,!1)}).Sa(.25)}Dy.prototype.release=function(){this.i.stop();for(var e=T(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function Oy(e,t){for(var n=T(e.g),o=n.next();!o.done;o=n.next())o.value.j(e.h.currentTime,t)}function EE(){this.g=null,this.h=[]}function Ad(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=T(e.h);for(var o=e.next();!o.done;o=e.next())o=o.value,n+=o.state==t?o.duration:0;return n}function bE(e){function t(u){return{timestamp:u.timestamp,state:u.state,duration:u.duration}}for(var n=[],o=T(e.h),a=o.next();!a.done;a=o.next())n.push(t(a.value));return e.g&&n.push(t(e.g)),n}function AE(){this.i=this.h=null,this.g=[]}function kd(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function sf(){this.Cd=this.Hg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.U=this.Z=this.L=this.N=this.R=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new EE,this.h=new AE}function af(e,t,n,o){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=o}function kE(e,t){e.l=t,e=T(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function su(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.preload&&t.sa!=null&&(n=!1),t.Yb()==2&&(n=!1),n&&t.$&&Ny(e,t.$),n&&!e.h.has(t)&&(n=new Md(e.l),jy(n,t,e.i),e.h.set(t,n));Id(e)}}function Ny(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(o){return fd(o,t)})){var n=new Md(e.l);jy(n,t,e.i),e.j.set(t,n)}}function Uy(e,t){t=T(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&au(e,n)}function Eo(e){Uy(e,e.h),Uy(e,e.j),e.g=null}af.prototype.Ma=function(e,t){t=t===void 0?!1:t;for(var n=T(this.h.keys()),o=n.next();!o.done;o=n.next())o=o.value,e>o.endTime&&au(this,o);t&&Id(this)},af.prototype.Sc=function(e){this.o=e,this.g&&this.g.Sc(e)};function Id(e){for(var t=Array.from(e.h.keys()),n=T(e.j.keys()),o=n.next(),a={};!o.done;a={nf:void 0},o=n.next())a.nf=o.value,t.some(function(u){return function(f){return fd(f.$,u.nf)}}(a))||au(e,a.nf)}function By(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var o=n.pop();o&&au(e,o)}Id(e)}function IE(e,t){t&&t!==e.i&&(Eo(e),e.i=t)}function au(e,t){var n=e.h;t instanceof wi&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Md(e){this.g=e,this.fe=this.Uf=null}function jy(e,t,n){var o=new Uint8Array(0);e.fe=e.g(t,n,function(a){return $(function(u){if(u.g==1)return 0<o.byteLength?o=mn(o,a):o=a,e.Uf?k(u,e.Uf(o),3):u.u(0);o=new Uint8Array(0),q(u)})})}Md.prototype.abort=function(){this.fe&&this.fe.abort()};function Rd(e){Bt.call(this);var t=this;this.g=new Set,this.i=e,this.h=new bt(function(){for(var n=t.i(),o=T(t.g),a=o.next();!a.done;a=o.next())a=a.value,a.endTime<n.start&&(t.g.delete(a),a=new je("regionremove",new Map([["region",a]])),t.dispatchEvent(a))}).Sa(2)}te(Rd,Bt),Rd.prototype.release=function(){this.g.clear(),this.h.stop(),Bt.prototype.release.call(this)};function uf(e){Bt.call(this),this.g=new Map,this.h=e}te(uf,Bt),uf.prototype.release=function(){this.g.clear(),Bt.prototype.release.call(this)};function ME(e,t){var n=e.g.get(t);return n||(n={ud:[],Pe:null,contentType:t},e.g.set(t,n)),n}function RE(e,t,n){var o=ME(e,t.contentType);_E(e,o),e={Hc:t,position:n},o=o.ud,t=o.findIndex(function(a){return a.position>=n}),0<=t?o.splice(t,o[t].position==n?1:0,e):o.push(e)}uf.prototype.j=function(e){for(var t=T(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var o=n.Pe;e:{for(var a=n.ud,u=a.length-1;0<=u;u--){var f=a[u];if(f.position<=e){a=f.Hc;break e}}a=null}u=a&&!(o===a||o&&a&&o.bandwidth==a.bandwidth&&o.audioSamplingRate==a.audioSamplingRate&&o.codecs==a.codecs&&o.contentType==a.contentType&&o.frameRate==a.frameRate&&o.height==a.height&&o.mimeType==a.mimeType&&o.channelsCount==a.channelsCount&&o.pixelAspectRatio==a.pixelAspectRatio&&o.width==a.width),f=a&&o&&a.label&&o.label&&o.label!==a.label;var h=a&&o&&a.language&&o.language&&o.language!==a.language;o=a&&o&&a.roles&&o.roles&&!hn(o.roles,a.roles),(f||h||o)&&Fy(this,e,a.contentType)&&(n.Pe=a,o=new je("audiotrackchange",new Map([["quality",a],["position",e]])),this.dispatchEvent(o)),u&&Fy(this,e,a.contentType)&&(n.Pe=a,JSON.stringify(a),n=new je("qualitychange",new Map([["quality",a],["position",e]])),this.dispatchEvent(n))}};function Fy(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function _E(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,o=e[e.length-1].end,a=t.ud;t.ud=a.filter(function(u,f){return!(u.position<=n&&f+1<a.length&&a[f+1].position<=n||u.position>=o)})}else t.ud=[]}function lf(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function ff(e){var t=ao(e),n=t.split("/")[0];return e=Di(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xd:null,colorGamut:null}}function LE(e,t){function n(D){R=D.name;var F=D.reader;F.skip(24);var X=F.la(),J=F.la();F.skip(50),E=String(X),S=String(J),D.reader.na()&&kt(D)}function o(D){var F=ly(D.reader);A=F.channelCount,b=F.sampleRate,a(D.name)}function a(D){switch(D=D.toLowerCase(),D){case"avc1":case"avc3":f.push(D+".42E01E"),p=!0;break;case"hev1":case"hvc1":f.push(D+".1.6.L93.90"),p=!0;break;case"dvh1":case"dvhe":f.push(D+".05.04"),p=!0;break;case"vp09":f.push(D+".00.10.08"),p=!0;break;case"av01":f.push(D+".0.01M.08"),p=!0;break;case"mp4a":u.push("mp4a.40.2"),h=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":u.push(D),h=!0}}var u=[],f=[],h=!1,p=!1,g=null,S=null,E=null,A=null,b=null,M=null,_=null,R;if(new Kt().box("moov",kt).box("trak",kt).box("mdia",kt).S("mdhd",function(D){g=Zl(D.reader,D.version).language}).box("minf",kt).box("stbl",kt).S("stsd",pr).box("mp4a",function(D){var F=ly(D.reader);A=F.channelCount,b=F.sampleRate,D.reader.na()?kt(D):a(D.name)}).box("esds",function(D){D=D.reader;for(var F="mp4a",X,J;D.na();){X=D.T();for(var ie=D.T();ie&128;)ie=D.T();if(X==3)D.la(),ie=D.T(),ie&128&&D.la(),ie&64&&D.skip(D.T()),ie&32&&D.la();else if(X==4)J=D.T(),D.skip(12);else if(X==5)break}J&&(F+="."+tu(J),X==5&&D.na()&&(X=D.T(),J=(X&248)>>3,J===31&&D.na()&&(J=32+((X&7)<<3)+((D.T()&224)>>5)),F+="."+J)),u.push(F),h=!0}).box("ac-3",o).box("ec-3",o).box("ac-4",o).box("Opus",o).box("fLaC",o).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(D){var F=R||"";switch(R){case"dvav":F="avc3";break;case"dva1":F="avc1"}D=D.reader,D.skip(1),D=F+"."+tu(D.T())+tu(D.T())+tu(D.T()),f.push(D),p=!0}).box("hvcC",function(D){var F=R||"";switch(R){case"dvh1":F="hvc1";break;case"dvhe":F="hev1"}var X=D.reader;X.skip(1),D=X.T();var J=["","A","B","C"][D>>6],ie=D&31,de=X.P(),oe=(D&32)>>5?"H":"L";D=[X.T(),X.T(),X.T(),X.T(),X.T(),X.T()],X=X.T();for(var se=0,ue=0;32>ue&&(se|=de&1,ue!=31);ue++)se<<=1,de>>=1;for(F=F+("."+J+ie)+("."+tu(se,!0)),F+="."+oe+X,J="",ie=D.length;ie--;)((oe=D[ie])||J)&&(J="."+oe.toString(16).toUpperCase()+J);F+=J,f.push(F),p=!0}).box("dvcC",function(D){var F=R||"";switch(R){case"hvc1":F="dvh1";break;case"hev1":F="dvhe";break;case"avc1":F="dva1";break;case"avc3":F="dvav";break;case"av01":F="dav1"}var X=D.reader;X.skip(2),D=X.T(),X=X.T(),f.push(F+"."+Si(D>>1&127)+"."+Si(D<<5&32|X>>3&31)),p=!0}).box("dvvC",function(D){var F=R||"";switch(R){case"hvc1":F="dvh1";break;case"hev1":F="dvhe";break;case"avc1":F="dva1";break;case"avc3":F="dvav";break;case"av01":F="dav1"}var X=D.reader;X.skip(2),D=X.T(),X=X.T(),f.push(F+"."+Si(D>>1&127)+"."+Si(D<<5&32|X>>3&31)),p=!0}).S("vpcC",function(D){var F=R||"",X=D.reader;D=X.T();var J=X.T();X=X.T()>>4&15,f.push(F+"."+Si(D)+"."+Si(J)+"."+Si(X)),p=!0}).box("av1C",function(D){var F=R||"";switch(R){case"dav1":F="av01"}var X=D.reader;X.skip(1),D=X.T(),X=X.T();var J=D>>>5,ie=(X&64)>>6;f.push(F+"."+J+"."+Si(D&31)+(X>>>7?"H":"M")+"."+Si(J===2&&ie?(X&32)>>5?12:10:ie?10:8)+"."+((X&16)>>4)+"."+((X&8)>>3)+((X&4)>>2)+(X&3)+"."+Si(1)+"."+Si(1)+"."+Si(1)+".0"),p=!0}).box("enca",td).box("encv",xi).box("sinf",kt).box("frma",function(D){D=fy(D.reader).codec,a(D)}).box("colr",function(D){f=f.map(function(J){if(J.startsWith("av01.")){var ie=D.reader,de=ie.va(),oe=ie.qb(4),se=String.fromCharCode(oe[0]);if(se+=String.fromCharCode(oe[1]),se+=String.fromCharCode(oe[2]),se+=String.fromCharCode(oe[3]),se==="nclx"){oe=ie.la(),se=ie.la();var ue=ie.la(),xe=ie.T()>>7,ye=J.split(".");ye.length==10&&(ye[6]=Si(oe),ye[7]=Si(se),ye[8]=Si(ue),ye[9]=String(xe),J=ye.join("."))}ie.seek(de)}return J});var F=tE(D.reader),X=F.colorGamut;M=F.xd,_=X}).parse(e||t,!0),!u.length&&!f.length)return null;var B=h&&!p,N=new Map;if(p){var H=new cn("video/mp4");for(e&&H.init(e),H.i(t),e=T(H.j()),t=e.next();!t.done;t=e.next())t=t.value,N.set(t,t);H.g()}return{type:B?"audio":"video",mimeType:B?"audio/mp4":"video/mp4",codecs:_d(u.concat(f)).join(", "),language:g,height:S,width:E,channelCount:A,sampleRate:b,closedCaptions:N,xd:M,colorGamut:_}}function _d(e){var t=new Set,n=[];e=T(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var a=ms(o);t.has(a)||(n.push(o),t.add(a))}return t=zh("audio",n),o=zh("video",n),e=zh(Rt,n),o=PE(o),t=t.concat(o).concat(e),n.length&&!t.length?n:t}function PE(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?Ne('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function DE(e){var t=null;return new Kt().box("moov",kt).box("trak",kt).box("mdia",kt).box("minf",kt).box("stbl",kt).S("stsd",pr).box("encv",xi).box("enca",td).box("sinf",kt).box("schi",kt).S("tenc",function(n){n=n.reader,n.T(),n.T(),n.T(),n.T(),t=$o(n.qb(16))}).parse(e,!0),t}function Ld(e,t,n){var o,a,u,f,h;return $(function(p){if(p.g==1)return o=t,o.cryptoKey?p.u(2):k(p,o.fetchKey(),3);if(a=o.iv,!a)for(a=Me(new ArrayBuffer(16)),u=o.firstMediaSequenceNumber+n,f=a.byteLength-1;0<=f;f--)a[f]=u&255,u>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:a}:h={name:"AES-CTR",counter:a,length:64},p.return(d.crypto.subtle.decrypt(h,o.cryptoKey,e))})}function Ps(e,t,n,o,a){return e=Bn(e,o,a),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function $y(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.m=new Ts(function(){return OE(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}s=$y.prototype,s.destroy=function(){return this.m.destroy()};function OE(e){var t,n,o,a,u,f,h;return $(function(p){if(p.g==1){for(t=[],n=T(e.i.values()),o=n.next();!o.done;o=n.next())a=o.value,uu(a),t.push(lu(a)),a.W&&(Eo(a.W),a.W=null);for(u=T(e.o.values()),f=u.next();!f.done;f=u.next())h=f.value,Eo(h);return k(p,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,q(p)})}s.configure=function(e){if(this.h=e,this.I=new vg({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(Eo(t.W),t.W=null),t=T(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Eo(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(Rt))&&t.W&&(Eo(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(Eo(t.W),t.W=null),t=T(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(By(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(Eo(n.W),n.W=null)):0<e.segmentPrefetchLimit&&(n.W=Pd(this,n.stream));e.disableAudioPrefetch||$E(this)};function NE(e,t,n){e.l.presentationTimeline.V()||(e.N=t,e.L=n)}s.start=function(e){var t=this;return $(function(n){if(n.g==1)return k(n,FE(t,e||new Map),2);Yt(t.m),t.C=!0,q(n)})};function UE(e,t){var n,o,a,u,f,h;$(function(p){switch(p.g){case 1:return n=Mn,e.H++,o=e.H,Y(p,2),k(p,yy(e.g.aa,n.ua),4);case 4:K(p,3);break;case 2:a=ee(p),e.g&&e.g.onError(a);case 3:u=Rn(t.mimeType,t.codecs),tf(e.g.aa,u,e.l.sequenceMode,t.external),f=e.g.aa.F,(f.isTextVisible()||e.h.alwaysStreamText)&&e.H==o&&(h=Hy(e,t),e.i.set(n.ua,h),Xi(e,h,0)),q(p)}})}function BE(e){var t=e.i.get(Rt);t&&(uu(t),lu(t).catch(function(){}),e.i.delete(Rt)),e.s=null}function zy(e,t){for(var n=0>e.g.eb(),o=T(e.i.values()),a=o.next();!a.done;a=o.next())a=a.value,a.ia&&a.ia.Sc(n),a.W&&a.W.Sc(n);for(o=T(e.o.values()),a=o.next();!a.done;a=o.next())a.value.Sc(n);(n=e.i.get("video"))&&(o=n.stream)&&(t?(t=o.trickModeVideo)&&!n.rc&&(Ds(e,t,!1,0,!1),n.rc=o):(t=n.rc)&&(n.rc=null,Ds(e,t,!0,0,!1)))}function Vy(e,t,n,o,a,u){n=n===void 0?!1:n,o=o===void 0?0:o,a=a===void 0?!1:a,u=u===void 0?!1:u,e.j=t,e.C&&(t.video&&Ds(e,t.video,n,o,a,u),t.audio&&Ds(e,t.audio,n,o,a,u))}function cf(e,t){$(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):k(n,t.createSegmentIndex(),2):n.return();Ds(e,t,!0,0,!1),q(n)})}function Ds(e,t,n,o,a,u){var f=e.i.get(t.type);f||t.type!=Rt?f&&(f.rc&&(t.trickModeVideo?(f.rc=t,t=t.trickModeVideo):f.rc=null),f.stream!=t||a)&&(e.o.has(t)?f.W=e.o.get(t):f.W&&IE(f.W,t),t.type==Rt&&(a=Rn(t.mimeType,t.codecs),tf(e.g.aa,a,e.l.sequenceMode,t.external)),e.o.has(f.stream)||f.stream.closeSegmentIndex&&f.stream.closeSegmentIndex(),f.stream=t,f.ia=null,f.hg=!!u,n?f.Vc?f.Be=!0:f.Qa?(f.cc=!0,f.Hd=o,f.Be=!0):(uu(f),Ud(e,f,!0,o).catch(function(h){e.g&&e.g.onError(h)})):f.Qa||f.sb||Xi(e,f,0),jE(e,f).catch(function(h){e.g&&e.g.onError(h)})):UE(e,t)}function jE(e,t){var n,o;return $(function(a){if(a.g==1)return t.ib?(n=t.stream,o=t.ib,n.segmentIndex?a.u(2):k(a,n.createSegmentIndex(),2)):a.return();if(t.ib!=o||t.stream!=n)return a.return();var u=e.g.Md(),f=ou(e.g.aa,t.type),h=t.stream.segmentIndex.find(t.Na?t.Na.endTime:u),p=h==null?null:t.stream.segmentIndex.get(h);h=p&&p.sa?p.sa-p.Ha:null,p&&!h&&(h=(p.endTime-p.getStartTime())*(t.stream.bandwidth||0)/8),h?((p=p.$)&&(h+=(p.sa?p.sa-p.Ha:null)||0),p=e.g.getBandwidthEstimate(),u=8*h/p<(f||0)-u-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.ib.h.g>h):u=!1,u&&t.ib.abort(),q(a)})}s.Qc=function(){if(this.g)for(var e=this.g.Md(),t=T(this.i.keys()),n=t.next();!n.done;n=t.next()){var o=n.value;n=this.i.get(o);var a=this.g.aa;if(a.C?a=!1:o==Rt?(a=a.g,a=a.g==null||a.h==null?!1:e>=a.g&&e<a.h):(a=Ms(a,o),a=hd(a,e)),!a){if(n.W&&(n.W.g=null),n.type==="audio"){a=T(this.o.values());for(var u=a.next();!u.done;u=a.next())u.value.g=null}n.ia=null,(ou(this.g.aa,o)!=null||n.Qa)&&hf(this,n),n.ib&&(n.ib.abort(),n.ib=null),o===Rt&&(o=this.g.aa,o.H&&o.H.g()),n.Qc=!0}}};function hf(e,t){t.Vc||t.cc||(t.Qa?(t.cc=!0,t.Hd=0):xd(e.g.aa,t.type)==null?t.sb==null&&Xi(e,t,0):(uu(t),Ud(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function FE(e,t){var n,o,a,u,f,h,p,g,S,E;return $(function(A){if(A.g==1){if(n=Mn,!e.j)throw new ne(2,5,5006);return o=new Map,a=new Set,e.j.audio&&(o.set(n.X,e.j.audio),a.add(e.j.audio)),e.j.video&&(o.set(n.ga,e.j.video),a.add(e.j.video)),e.s&&(o.set(n.ua,e.s),a.add(e.s)),u=e.g.aa,k(A,u.init(o,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Yt(e.m),e.updateDuration(),f=T(o.keys()),h=f.next();!h.done;h=f.next())p=h.value,g=o.get(p),e.i.has(p)||(S=Hy(e,g),t.has(g.id)&&(E=t.get(g.id),kE(E,function(b,M,_){return df(b,M,_||null,e.h.retryParameters,e.g.Lb)}),S.W=E),e.i.set(p,S),Xi(e,S,0));q(A)})}function Hy(e,t){return{stream:t,type:t.type,ia:null,W:Pd(e,t),Na:null,lc:null,Vd:null,Ud:null,Td:null,rc:null,endOfStream:!1,Qa:!1,sb:null,cc:!1,Hd:0,Be:!1,Vc:!1,Qc:!0,Gf:!1,fd:!1,ib:null}}function Pd(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===Rt&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===Rt&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new af(e.h.segmentPrefetchLimit,t,function(o,a,u){return df(o,a,u||null,e.h.retryParameters,e.g.Lb)},0>e.g.eb()):null}function $E(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,o=T(e.l.variants),a=o.next(),u={};!a.done;u={lb:void 0},a=o.next())if(u.lb=a.value,u.lb.audio)if(e.o.has(u.lb.audio)){if(a=e.o.get(u.lb.audio),By(a,t),!(0<t&&n.some(function(h){return function(p){return gs(h.lb.audio.language,p)}}(u)))){var f=e.i.get(u.lb.audio.type);a!==(f&&f.W)&&Eo(a),e.o.delete(u.lb.audio)}}else 0>=t||!n.some(function(h){return function(p){return gs(h.lb.audio.language,p)}}(u))||!(a=Pd(e,u.lb.audio))||(u.lb.audio.segmentIndex||u.lb.audio.createSegmentIndex(),e.o.set(u.lb.audio,a))}s.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.aa.Za(e):this.g.aa.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function zE(e,t){var n,o,a,u,f,h;return $(function(p){switch(p.g){case 1:if(Yt(e.m),t.Qa||t.sb==null||t.Vc)return p.return();if(t.sb=null,!t.cc){p.u(2);break}return k(p,Ud(e,t,t.Be,t.Hd),3);case 3:return p.return();case 2:if(t.stream.segmentIndex){p.u(4);break}return n=t.stream,Y(p,5),k(p,t.stream.createSegmentIndex(),7);case 7:K(p,6);break;case 5:return o=ee(p),k(p,Bd(e,t,o),8);case 8:return p.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.sb||Xi(e,t,0),p.return();case 4:Y(p,9),a=VE(e,t),a!=null&&(Xi(e,t,a),t.fd=!1),K(p,10);break;case 9:return u=ee(p),k(p,Bd(e,t,u),11);case 11:return p.return();case 10:if(f=Array.from(e.i.values()),!e.C||!f.every(function(g){return g.endOfStream})){p.u(0);break}return k(p,e.g.aa.endOfStream(),13);case 13:Yt(e.m),h=e.g.aa.getDuration(),h!=0&&h<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(h),q(p)}})}function VE(e,t){if(Od(t))return fE(e.g.aa,t.stream.originalId||""),null;if(t.type==Rt&&cE(e.g.aa),!e.g.aa.xa&&t.type!=Rt)return e.h.updateIntervalSeconds/2;var n=e.g.Md();if(t.type==="audio")for(var o=T(e.o.keys()),a=o.next();!a.done;a=o.next())a=e.o.get(a.value),a.Ma(n,!0),su(a,n);o=t.Na?t.Na.endTime:n;var u=uE(e.g.aa,t.type,n),f=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),h=e.l.presentationTimeline.getDuration()-o;if(a=ou(e.g.aa,t.type),1e-6>h&&a)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(Rt))&&Od(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=f)return e.h.updateIntervalSeconds/2;if(f=!t.ia,a=HE(e,t,n,a),!a)return e.h.updateIntervalSeconds;u=!1,f&&t.hg&&(u=!0,t.hg=!1),f=1/0,h=Array.from(e.i.values()),h=T(h);for(var p=h.next();!p.done;p=h.next())p=p.value,Od(p)||p.ia&&!p.ia.current()||(f=Math.min(f,p.Na?p.Na.endTime:n));return o>=f+e.l.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.ia&&!e.o.has(t.stream)&&(t.W.Ma(a.startTime),su(t.W,a.startTime)),GE(e,t,n,a,u).catch(function(){}),null)}function HE(e,t,n,o){var a=t.ia?t.ia.current():null;if(a)return a;if(t.Na||o)return t.ia=t.stream.segmentIndex.Ib(t.Na?t.Na.endTime:o,!1,0>e.g.eb()),t.ia&&t.ia.next().value;o=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance,a=Math.max(n-o,0),e=0>e.g.eb();var u=null;return o&&(t.ia=t.stream.segmentIndex.Ib(a,!1,e),u=t.ia&&t.ia.next().value),u||(t.ia=t.stream.segmentIndex.Ib(n,!1,e),u=t.ia&&t.ia.next().value),u}function GE(e,t,n,o,a){var u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D;return $(function(F){switch(F.g){case 1:if(u=Mn,f=t.stream,h=t.ia,t.Qa=!0,Y(F,2),o.Yb()==2)throw new ne(1,1,1011);return k(F,YE(e,t,o,a),4);case 4:return Yt(e.m),e.A?F.return():(p=f.mimeType=="video/mp4"||f.mimeType=="audio/mp4",g=d.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&g&&p&&(e.l.type!="HLS"||o.m)?(A=new Uint8Array(0),M=b=!1,R=function(X){var J,ie,de;return $(function(oe){switch(oe.g){case 1:if(b||(M=!0,Yt(e.m),e.A))return oe.return();if(Y(oe,2),A=XE(A,X),J=!1,ie=0,new Kt().box("mdat",function(se){ie=se.size+se.start,J=!0}).parse(A,!1,!0),!J){oe.u(4);break}return de=A.subarray(0,ie),A=A.subarray(ie),k(oe,Dd(e,t,n,f,o,de,!0,a),5);case 5:t.W&&t.ia&&su(t.W,o.startTime,!0);case 4:K(oe,0);break;case 2:_=ee(oe),q(oe)}})},k(F,Nd(e,t,o,R),9)):(S=Nd(e,t,o),k(F,S,7)));case 7:return E=F.h,Yt(e.m),e.A?F.return():(Yt(e.m),t.cc?(t.Qa=!1,Xi(e,t,0),F.return()):k(F,Dd(e,t,n,f,o,E,!1,a),6));case 9:if(B=F.h,_)throw _;if(M){F.u(10);break}return b=!0,Yt(e.m),e.A?F.return():t.cc?(t.Qa=!1,Xi(e,t,0),F.return()):k(F,Dd(e,t,n,f,o,B,!1,a),10);case 10:t.W&&t.ia&&su(t.W,o.startTime,!0);case 6:if(Yt(e.m),e.A)return F.return();t.Na=o,h.next(),t.Qa=!1,t.Gf=!1,N=e.g.aa.wb(),H=N[t.type],JSON.stringify(H),t.cc||e.g.Af(o,t.stream),Xi(e,t,0),K(F,0);break;case 2:if(D=ee(F),Yt(e.m,D),e.A)return F.return();if(t.Qa=!1,D.code==7001)t.Qa=!1,uu(t),Xi(e,t,0),F.u(0);else if(t.type==u.ua&&e.h.ignoreTextStreamFailures)e.i.delete(u.ua),F.u(0);else if(D.code==3017)WE(e,t,D),F.u(0);else return t.fd=!0,D.category==1&&t.W&&au(t.W,o),D.severity=2,k(F,Bd(e,t,D),0)}})}function XE(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function WE(e,t,n){if(!Array.from(e.i.values()).some(function(a){return a!=t&&a.Gf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var o=Math.round(100*e.B);if(20<o)e.B-=.2;else if(4<o)e.B-=.04;else{t.fd=!0,e.A=!0,e.g.onError(n);return}t.Gf=!0}Xi(e,t,4)}function YE(e,t,n,o){var a,u,f,h,p,g,S,E,A,b,M,_,R,B,N;return $(function(H){switch(H.g){case 1:if(a=Mn,u=t.Na==null&&t.lc==null,f=[],h=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),p=Math.min(n.appendWindowEnd,e.L)+.01,g=ms(n.codecs||t.stream.codecs),S=ao(n.mimeType||t.stream.mimeType),E=n.timestampOffset,E==t.Vd&&h==t.Ud&&p==t.Td&&g==t.tf&&S==t.uf){H.u(2);break}if(A=t.tf&&t.uf&&vE(e.g.aa,t.type,S,g),!A){H.u(3);break}if(b=null,t.type===a.ga?b=e.i.get(a.X):t.type===a.X&&(b=e.i.get(a.ga)),!b){H.u(3);break}return k(H,lu(b).catch(function(){}),5);case 5:b.lc=null,hf(e,b);case 3:return k(H,Gy(e,t,E,h,p,n,g,S),2);case 2:return fd(n.$,t.lc)||(t.lc=n.$,n.l&&n.$&&(M=Nd(e,t,n.$),_=function(){var D,F,X,J,ie,de,oe;return $(function(se){switch(se.g){case 1:return Y(se,2),k(se,M,4);case 4:return D=se.h,Yt(e.m),F=null,X=new Map,J={projection:null,hfov:null},ie=new Kt,ie.box("moov",kt).box("trak",kt).box("mdia",kt).S("mdhd",function(ue){F=Zl(ue.reader,ue.version).timescale}).box("hdlr",function(ue){switch(ue=ue.reader,ue.skip(8),ue.oc()){case"soun":X.set(a.X,F);break;case"vide":X.set(a.ga,F)}F=null}).box("minf",kt).box("stbl",kt).S("stsd",pr).box("encv",xi).box("avc1",xi).box("avc3",xi).box("hev1",xi).box("hvc1",xi).box("dvav",xi).box("dva1",xi).box("dvh1",xi).box("dvhe",xi).box("dvc1",xi).box("dvi1",xi).box("vexu",kt).box("proj",kt).S("prji",function(ue){ue=ue.reader.oc(),J.projection=ue}).box("hfov",function(ue){ue=ue.reader.P()/1e3,J.hfov=ue}).parse(D),QE(e,J),X.has(t.type)?n.$.timescale=X.get(t.type):F!=null&&(n.$.timescale=F),de=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,k(se,e.g.kg(t.type,D),5);case 5:return k(se,nf(e.g.aa,t.type,D,null,t.stream,de,t.Qc,o),6);case 6:K(se,0);break;case 2:throw oe=ee(se),t.lc=null,oe}})},R=n.startTime,u&&(B=ou(e.g.aa,t.type),B!=null&&(R=B)),e.g.Ai(R,n.$),f.push(_()))),e.l.sequenceMode&&(N=t.Na?t.Na.i:null,n.i!=N&&f.push(dE(e.g.aa,t.type,n.startTime))),k(H,Promise.all(f),0)}})}function Gy(e,t,n,o,a,u,f,h){var p,g,S,E;return $(function(A){if(A.g==1)return p=Mn,g=new Map,e.j.audio&&g.set(p.X,e.j.audio),e.j.video&&g.set(p.ga,e.j.video),Y(A,2),t.Ud=o,t.Td=a,f&&(t.tf=f),h&&(t.uf=h),t.Vd=n,S=e.l.sequenceMode||e.l.type=="HLS",k(A,hE(e.g.aa,t.type,n,o,a,S,u.mimeType||t.stream.mimeType,u.codecs||t.stream.codecs,g),4);if(A.g!=2)return K(A,0);throw E=ee(A),t.Ud=null,t.Td=null,t.tf=null,t.uf=null,t.Vd=null,E})}function Dd(e,t,n,o,a,u,f,h){f=f===void 0?!1:f,h=h===void 0?!1:h;var p,g,S,E,A,b,M,_;return $(function(R){switch(R.g){case 1:return p=o.closedCaptions&&0<o.closedCaptions.size,S=o.emsgSchemeIdUris!=null&&0<o.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,E=e.h.parsePrftBox&&!e.F,A=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",b=null,a.$&&(b=a.$.timescale),M=A&&b&&o.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(S||E||M)&&(g=new Kt),S&&g.S("emsg",function(B){var N=o.emsgSchemeIdUris;if(B.version===0)var H=B.reader.oc(),D=B.reader.oc(),F=B.reader.P(),X=B.reader.P(),J=B.reader.P(),ie=B.reader.P(),de=a.startTime+X/F;else F=B.reader.P(),de=B.reader.Nc()/F+a.timestampOffset,X=de-a.startTime,J=B.reader.P(),ie=B.reader.P(),H=B.reader.oc(),D=B.reader.oc();B=B.reader.qb(B.reader.getLength()-B.reader.va()),(N&&N.includes(H)||e.h.dispatchAllEmsgBoxes)&&(H=="urn:mpeg:dash:event:2012"?e.g.Bi():(N=de+J/F,F=new Map().set("detail",{startTime:de,endTime:N,schemeIdUri:H,value:D,timescale:F,presentationTimeDelta:X,eventDuration:J,id:ie,messageData:B}),F=new je("emsg",F),F.cancelable=!0,e.g.onEvent(F),!F.defaultPrevented&&(H=="https://aomedia.org/emsg/ID3"||H=="https://developer.apple.com/streaming/emsg-id3")&&(H=Gr(B),H.length)&&e.g.onMetadata([{cueTime:de,data:B,frames:H,dts:de,pts:de}],0,N)))}),E&&g.S("prft",function(B){if(!e.F&&a.$.timescale){var N=B.reader,H=B.version;N.P(),B=N.P();var D=N.P();B=1e3*B+D/Math.pow(2,32)*1e3,H===0?N=N.P():(H=N.P(),N=N.P(),N=H*Math.pow(2,32)+N),B=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+B).getTime(),N=new Map().set("detail",{wallClockTime:B,programStartDate:new Date(B-N/a.$.timescale*1e3)}),N=new je("prft",N),e.g.onEvent(N),e.F=!0}}),M&&g.box("moof",kt).box("traf",kt).S("tfdt",function(B){var N,H,D,F,X,J;return $(function(ie){return N=Ql(B.reader,B.version),H=N.baseMediaDecodeTime,H?(D=-H/b,F=Number(t.Vd)||0,F<D?(X=t.Ud,J=t.Td,k(ie,Gy(e,t,D,X,J,a),0)):ie.u(0)):ie.return()})}),(S||E||M)&&g.parse(u,!1,f),k(R,qE(e,t,n),2);case 2:return Yt(e.m),_=t.Qc,t.Qc=!1,k(R,e.g.kg(t.type,u),3);case 3:return k(R,nf(e.g.aa,t.type,u,a,o,p,_,h,f),4);case 4:Yt(e.m),q(R)}})}function qE(e,t,n){var o,a,u,f;return $(function(h){if(h.g==1)return o=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),a=xd(e.g.aa,t.type),a==null?h.return():(u=n-a,f=u-o,f<=e.h.evictionGoal?h.return():k(h,e.g.aa.remove(t.type,a,a+f),2));Yt(e.m),q(h)})}function Od(e){return e&&e.type==Rt&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Nd(e,t,n,o){var a,u,f,h,p;return $(function(g){switch(g.g){case 1:if(a=n.cd())return g.return(a);if(u=null,t.W){var S=t.W,E=S.h;n instanceof wi&&(E=S.j),E.has(n)?(S=E.get(n),o&&(S.Uf=o),u=S.fe):u=null}return u||(u=df(n,t.stream,o||null,e.h.retryParameters,e.g.Lb)),f=0,t.ia&&(f=t.ia.h),t.ib=u,k(g,u.promise,2);case 2:if(h=g.h,t.ib=null,p=h.data,!n.aesKey){g.u(3);break}return k(g,Ld(p,n.aesKey,f),4);case 4:p=g.h;case 3:return g.return(p)}})}function df(e,t,n,o,a){var u=e instanceof at?e:void 0,f=u?1:0;return e=Ps(e.M(),e.Ha,e.sa,o,n),e.contentType=t.type,a.request(To,e,{type:f,stream:t,segment:u})}function Ud(e,t,n,o){var a,u;return $(function(f){if(f.g==1)return t.cc=!1,t.Be=!1,t.Hd=0,t.Vc=!0,t.Na=null,t.ia=null,t.W&&!e.o.has(t.stream)&&Eo(t.W),o?(a=e.g.Md(),u=e.g.aa.getDuration(),k(f,e.g.aa.remove(t.type,a+o,u),3)):k(f,yy(e.g.aa,t.type),4);if(f.g!=3)return Yt(e.m),n?k(f,e.g.aa.flush(t.type),3):f.u(3);Yt(e.m),t.Vc=!1,t.endOfStream=!1,t.Qa||t.sb||Xi(e,t,0),q(f)})}function Xi(e,t,n){var o=t.type;(o!=Rt||e.i.has(o))&&(t.sb=new Fa(function(){var a;return $(function(u){if(u.g==1)return Y(u,2),k(u,zE(e,t),4);if(u.g!=2)return K(u,0);a=ee(u),e.g&&e.g.onError(a),q(u)})}).Y(n))}function uu(e){e.sb!=null&&(e.sb.stop(),e.sb=null)}function lu(e){return $(function(t){return e.ib?k(t,e.ib.abort(),0):t.u(0)})}function Bd(e,t,n){var o;return $(function(a){if(a.g==1)return k(a,xg(e.I),2);Yt(e.m),n.category===1&&(o=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,o),n.handled&&(n.severity=1)),(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),q(a)})}function KE(e){var t,n,o,a,u,f;return $(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,o=Mn,(a=e.i.get(o.X))&&(a.lc=null,hf(e,a),lu(a).catch(function(){})),(u=e.i.get(o.ga))&&(u.lc=null,hf(e,u),lu(u).catch(function(){})),f=new Map,e.j.audio&&f.set(o.X,e.j.audio),e.j.video&&f.set(o.ga,e.j.video),k(h,xy(e.g.aa,f),2))):h.return(!0)})}function QE(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new je("spatialvideoinfo",n)}else n=new je("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function pf(){}function jd(e,t,n,o,a){var u=a in o,f=u?n.constructor==Object&&Object.keys(o).length==0:n.constructor==Object&&Object.keys(n).length==0,h=u||f,p=!0,g;for(g in t){var S=a+"."+g,E=u?o[a]:n[g];h||g in n?t[g]===void 0?E===void 0||h?delete e[g]:e[g]=Po(E):f?e[g]=t[g]:E.constructor==Object&&t[g]&&t[g].constructor==Object?(e[g]||(e[g]=Po(E)),S=jd(e[g],t[g],E,o,S),p=p&&S):typeof t[g]!=typeof E||t[g]==null||typeof t[g]!="function"&&t[g].constructor!=E.constructor?(Ge("Invalid config, wrong type for "+S),p=!1):(typeof n[g]=="function"&&n[g].length!=t[g].length&&ze("Unexpected number of arguments for "+S),e[g]=t[g]):(Ge("Invalid config, unrecognized key "+S),p=!1)}return p}function mf(e,t){for(var n={},o=n,a=0,u=0;a=e.indexOf(".",a),!(0>a);)(a==0||e[a-1]!="\\")&&(u=e.substring(u,a).replace(/\\\./g,"."),o[u]={},o=o[u],u=a+1),a+=1;return o[e.substring(u).replace(/\\\./g,".")]=t,n}function Os(e,t){return e&&t}function Xy(e,t){function n(f){for(var h=T(Object.keys(f)),p=h.next();!p.done;p=h.next())p=p.value,u(f[p])&&Object.keys(f[p]).length===0||a(f[p])||typeof f[p]=="function"?delete f[p]:u(f[p])&&(n(f[p]),Object.keys(f[p]).length===0&&delete f[p])}function o(f,h){return Object.keys(f).reduce(function(p,g){var S=f[g];return h.hasOwnProperty(g)?u(S)&&u(h[g])?(S=o(S,h[g]),(0<Object.keys(S).length||!u(S))&&(p[g]=S)):a(S)&&a(h[g])||Number.isNaN(S)&&Number.isNaN(h[g])||S!==h[g]&&(p[g]=S):p[g]=S,p},{})}function a(f){return Array.isArray(f)&&f.length===0}function u(f){return f&&typeof f=="object"&&!Array.isArray(f)}return e=o(e,t),n(e),e}me("shaka.util.ConfigUtils",pf),pf.getDifferenceFromConfigObjects=Xy,pf.convertToConfigObject=mf,pf.mergeConfigObjects=jd;function Wi(){}function Wy(e){return e=Fo(e),new wn(e).Eb}function fu(e,t,n){function o(h){Qt(u).setUint32(f,h.byteLength,!0),f+=4,u.set(Me(h),f),f+=h.byteLength}if(!n||!n.byteLength)throw new ne(2,6,6015);var a;typeof t=="string"?a=Fh(t,!0):a=t,e=Fo(e),e=Fh(e,!0);var u=new Uint8Array(12+e.byteLength+a.byteLength+n.byteLength),f=0;return o(e),o(a),o(n),u}function Yy(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Fo(e).split("skd://").pop(),fu(e,n,t))}function Fd(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}me("shaka.util.FairPlayUtils",Wi),Wi.commonFairPlayResponse=function(e,t){if(e===2){try{var n=nn(t.data)}catch{return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var o=JSON.parse(n);o.ckc&&(n=o.ckc,e=!0),o.CkcMessage&&(n=o.CkcMessage,e=!0),o.License&&(n=o.License,e=!0)}catch{}e&&(t.data=pn(Gi(n)))}},Wi.expressplayFairPlayRequest=function(e,t){Fd(e,t)},Wi.conaxFairPlayRequest=function(e,t){Fd(e,t)},Wi.ezdrmFairPlayRequest=function(e,t){Fd(e,t)},Wi.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Me(t.body),e=Ur(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=So("spc="+e))},Wi.expressplayInitDataTransform=function(e,t,n){return Yy(e,t,n)},Wi.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Fo(e).split("skd://").pop().split("?").shift(),n=d.atob(n);var o=new ArrayBuffer(2*n.length);o=Fe(o);for(var a=0,u=n.length;a<u;a++)o[a]=n.charCodeAt(a);return fu(e,o,t)},Wi.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Fo(e).split(";").pop(),fu(e,n,t))},Wi.verimatrixInitDataTransform=function(e,t,n){return Yy(e,t,n)},Wi.initDataTransform=fu,Wi.defaultGetContentId=Wy,Wi.isFairPlaySupported=function(){var e;return $(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},Y(t,2),k(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ee(t),t.return(!1))})};function $d(){}function Ns(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:Co(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(S,E,A){return Ll()&&E=="skd"&&(E=A.serverCertificate,A=Wy(S),S=fu(S,A,E)),S},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Mo(),minHdcpVersion:"",ignoreDuplicateInitData:!kl()};(Mo()||Lo())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",o=!1;kl()||Va()||Xt("Tizen 4")||Xt("Tizen 5")||Xt("Tizen 6")||Il()||_o()&&Nh()===53||_o()&&Nh()===68||!(!Pi()||Pi()&&_l()||Pi()&&Xt("Fuchsia"))||Bh()&&za()||(n="smooth",o=!0),o={retryParameters:Co(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:gf,manifestPreprocessorTXml:yf,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:o,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Va()||kl()||Il()||Lo()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:gf,manifestPreprocessorTXml:yf,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var a={retryParameters:Co(),failureCallback:function(S){return Os([S])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Lo()||Ml(),dontChooseCodecs:!1,shouldFixTimestampOffset:_o()||Ro()};(_o()||Ro()||Pi()||Rl())&&(a.stallSkip=0);var u={trackSelectionCallback:function(S){return $(function(E){return E.return(S)})},downloadSizeCallback:function(S){var E;return $(function(A){return A.g==1?navigator.storage&&navigator.storage.estimate?k(A,navigator.storage.estimate(),3):A.return(!0):(E=A.h,A.return(E.usage+S<.95*E.quota))})},progressCallback:function(S,E){return Os([S,E])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:fs()?.5:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(S){return Os([S],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(S,E){return Os([S,E])}};var f=!1,h=!1,p=!0;Fm()&&(h=f=!0,p=!1);var g={drm:t,manifest:o,streaming:a,mediaSource:n,offline:u,abrFactory:function(){return new rn},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:f,skipPlayDetection:h,supportsMultipleMediaElements:p}};return u.trackSelectionCallback=function(S){return $(function(E){return E.return(ZE(S,g.preferredAudioLanguage,g.preferredVideoHdrLevel))})},g}function vr(e,t,n){var o={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return jd(e,t,n||Ns(),o,"")}function ZE(e,t,n){var o=n;o=="AUTO"&&(o=d.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var a=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=o)});n=[];var u=Dl(t,a.map(function(h){return h.language}));u&&(n=a.filter(function(h){return $t(h.language)==u})),n.length==0&&(n=a.filter(function(h){return h.primary})),n.length==0&&(a.map(function(h){return h.language}),n=a);var f=n.filter(function(h){return h.height&&480>=h.height});for(f.length&&(f.sort(function(h,p){return p.height-h.height}),n=f.filter(function(h){return h.height==f[0].height})),t=[],n.length&&(a=Math.floor(n.length/2),n.sort(function(h,p){return h.bandwidth-p.bandwidth}),t.push(n[a])),e=T(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=Rt&&n.type!="image"||t.push(n);return t}function gf(e){return Os([e],e)}function yf(e){return Os([e],e)}me("shaka.util.PlayerConfiguration",$d),$d.mergeConfigObjects=vr,$d.createDefault=Ns;function Ko(e,t,n,o){Bt.call(this),this.L=e,this.U=t,this.xa=o.networkingEngine,this.A=n,this.o=null,this.qa=0,this.Fa=o.yc,this.C=o.vi,this.ab=o.wi,this.g=o.config,this.j=this.F=this.h=null,this.ea=!1,this.G=o.Fi,this.oa=!1,this.l=null,this.da=!1,this.i=this.B=null,this.ba=!1,this.K=new Map,this.pa=!1,this.za=o.Ei,this.Z=new sf,this.m=new Wt,this.N=null,this.s=!1,this.Da=o.yh,this.fa=null,this.Ea=o.xh,this.R=!1,this.I=[],this.H=[]}te(Ko,Bt);function cu(e,t,n){(e=t?e.H:e.I)?e.push(n):n()}function JE(e){if(e.H)for(var t=T(e.H),n=t.next();!n.done;n=t.next())n=n.value,n();e.H=null}function qy(e,t){if(e.N=t,e.R=!0,e.I){t=T(e.I);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.I=null}s=Ko.prototype,s.getStartTime=function(){return this.A},s.Dc=function(){return this.L},s.gf=function(){return this.h};function eb(e){return e.ba=!0,e.i}function tb(e){return e.ea=!0,e.j}function nb(e){return e.oa=!0,e.G}s.getStats=function(){return this.Z};function ib(e){return e.da=!0,e.l}function ob(e){return e.pa=!0,e.K}s.start=function(){var e=this;(function(){var t;return $(function(n){switch(n.g){case 1:return k(n,Promise.resolve(),2);case 2:return Y(n,3),k(n,rb(e),5);case 5:return hu(e),k(n,sb(e),6);case 6:if(hu(e),e.o||(e.o=new xs(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Ea){var o=e.g.abrFactory;e.B=o,e.i=o(),e.i.configure(e.g.abr)}if(e.Da){o=e.h.presentationTimeline.V();var a=Ul(e.h.variants);a=e.o.create(a),e.i.configure(e.g.abr),e.i.setVariants(Array.from(a.values())),(a=e.i.chooseVariant())&&(e.fa=a,a.video&&Ky(e,a.video,o),a.audio&&Ky(e,a.audio,o))}return k(n,void 0,7);case 7:hu(e),e.m.resolve(),K(n,0);break;case 3:t=ee(n),e.m.reject(t),q(n)}})})()},s.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Bt.prototype.dispatchEvent.call(this,e)},s.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new je("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function hu(e){if(e.s)throw new ne(2,7,7003)}function zd(e,t){e.dispatchEvent(new je("onstatechange",new Map().set("state",t)))}function rb(e){var t,n,o,a;return $(function(u){if(u.g==1)return zd(e,"manifest-parser"),e.j||(e.F=ey(e.L,e.U),e.j=e.F(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,zd(e,"manifest"),e.h?u.u(2):k(u,e.j.start(e.L,e.ab),3);if(u.g!=2&&(e.h=u.h),n=new je("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new ne(2,4,4036);ab(e.h),o=Date.now()/1e3,a=o-t,e.Z.H=a,q(u)})}function sb(e){var t,n,o,a,u;return $(function(f){switch(f.g){case 1:zd(e,"drm-engine"),e.qa=Date.now()/1e3,e.l=e.Fa(),e.C.g=e.l,e.l.configure(e.g.drm);var h=e.C;if(t=tg(e.h.variants,h.h.restrictions,h.i),!t){f.u(2);break}return n=new je("trackschanged",void 0),k(f,Promise.resolve(),3);case 3:hu(e),e.dispatchEvent(n);case 2:return o=Ul(e.h.variants),k(f,Bg(e.l,o,e.h.offlineSessionIds),4);case 4:return hu(e),k(f,Kg(e.C,e.h),5);case 5:if(a=f.h,!a){f.u(0);break}return u=new je("trackschanged",void 0),k(f,Promise.resolve(),7);case 7:e.dispatchEvent(u),q(f)}})}s.configure=function(e,t){e=mf(e,t),vr(this.g,e)},s.getConfiguration=function(){return Po(this.g)};function Ky(e,t,n){var o,a,u,f,h;$(function(p){if(p.g==1)return o=e.g.streaming.segmentPrefetchLimit||2,a=new af(o,t,function(g,S,E){return df(g,S,E||null,e.g.streaming.retryParameters,e.xa)},!1),e.K.set(t.id,a),k(p,t.createSegmentIndex(),2);u=e.A||0,(h=(f=t.segmentIndex.Ib(u))?f.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.$&&Ny(a,h.$):su(a,h.startTime)),q(p)})}s.fj=function(){return this.m},s.destroy=function(){var e=this,t,n,o;return $(function(a){switch(a.g){case 1:if(e.s=!0,!e.j||e.ea){a.u(2);break}return k(a,e.j.stop(),2);case 2:if(!e.i||e.ba){a.u(4);break}return k(a,e.i.stop(),4);case 4:if(e.G&&!e.oa&&e.G.release(),!e.l||e.da){a.u(6);break}return k(a,e.l.destroy(),6);case 6:if(0<e.K.size&&!e.pa)for(t=T(e.K.values()),n=t.next();!n.done;n=t.next())o=n.value,Eo(o);q(a)}})};function ab(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}me("shaka.media.PreloadManager",Ko),Ko.prototype.destroy=Ko.prototype.destroy,Ko.prototype.waitForFinish=Ko.prototype.fj;function vf(e,t){Bt.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wc:null,vc:Us,jc:function(o,a){return Xr(n,"enter",o,a)}},{wc:du,vc:Us,jc:function(o,a){return Xr(n,"enter",o,a)}},{wc:pu,vc:Us,jc:function(o,a){return Xr(n,"enter",o,a)}},{wc:Us,vc:du,jc:function(o,a){return Xr(n,"exit",o,a)}},{wc:Us,vc:pu,jc:function(o,a){return Xr(n,"exit",o,a)}},{wc:du,vc:pu,jc:function(o,a){return Xr(n,"skip",o,a)}},{wc:pu,vc:du,jc:function(o,a){return Xr(n,"skip",o,a)}}],this.h=new Ae,this.h.D(this.i,"regionremove",function(o){n.g.delete(o.region)})}te(vf,Bt),vf.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Bt.prototype.release.call(this)},vf.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=T(this.i.g),o=n.next();!o.done;o=n.next()){o=o.value;var a=this.g.get(o),u=e<o.startTime?du:e>o.endTime?pu:Us;this.g.set(o,u);for(var f=T(this.m),h=f.next();!h.done;h=f.next())h=h.value,h.wc==a&&h.vc==u&&h.jc(o,t)}}};function Xr(e,t,n,o){t=new je(t,new Map([["region",n],["seeking",o]])),e.dispatchEvent(t)}var du=1,Us=2,pu=3;function Vd(e,t,n){var o,a,u,f,h,p,g;return $(function(S){switch(S.g){case 1:var E=new wn(e).Pa.split("/").pop().split(".");return o=E.length==1?"":E.pop().toLowerCase(),(a=ub[o])?S.return(a):(u=0,f=Bn([e],n),Y(S,2),f.method="HEAD",k(S,t.request(u,f).promise,4));case 4:h=S.h,a=h.headers["content-type"],K(S,3);break;case 2:if(p=ee(S),!p||p.code!=1002&&p.code!=1001){S.u(3);break}return f.method="GET",k(S,t.request(u,f).promise,6);case 6:g=S.h,a=g.headers["content-type"];case 3:return S.return(a?a.toLowerCase().split(";").shift():"")}})}var ub={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Qy(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(f){return Qy(f,e)}).join("");var n=[],o=700<=e.fontWeight,a=e.fontStyle=="italic",u=e.textDecoration.includes("underline");return o&&n.push(["b"]),a&&n.push(["i"]),u&&n.push(["u"]),a=e.color,a==""&&t&&(a=t.color),o="",(a=Zy(a))&&(o+="."+a),a=e.backgroundColor,a==""&&t&&(a=t.backgroundColor),(t=Zy(a))&&(o+=".bg_"+t),o&&n.push(["c",o]),n.reduceRight(function(f,h){var p=T(h);return h=p.next().value,p=p.next().value,"<"+h+(p===void 0?"":p)+">"+f+"</"+h+">"},e.payload)}function Zy(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Hd(e,t){var n=[];e=T(Jy(e));for(var o=e.next();!o.done;o=e.next())if(o=o.value,o.isContainer)n.push.apply(n,L(Hd(o.nestedCues,o)));else{var a=o.clone();a.nestedCues=[],a.payload=Qy(o,t),n.push(a)}return n}function Jy(e){var t=[];e=T(e);for(var n=e.next(),o={};!n.done;o={Me:void 0},n=e.next())o.Me=n.value,t.some(function(a){return function(u){return xn(a.Me,u)}}(o))||t.push(o.Me);return t}function lb(e){function t(o){for(var a=5381,u=o.length;u;)a=33*a^o.charCodeAt(--u);return(a>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Ti(e,t){this.g=null;for(var n=T(Array.from(e.textTracks)),o=n.next();!o.done;o=n.next())o=o.value,o.kind!=="metadata"&&o.kind!=="chapters"&&(o.mode="disabled",o.label==t&&(this.g=o));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}s=Ti.prototype,s.configure=function(){},s.remove=function(e,t){return this.g?(e1(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},s.append=function(e){var t=Hd(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=T(t);for(var o=t.next(),a={};!o.done;a={hd:void 0},o=t.next())a.hd=o.value,e.some(function(u){return function(f){return f.startTime==u.hd.startTime&&f.endTime==u.hd.endTime&&f.text==u.hd.payload}}(a))||(o=lb(a.hd))&&n.push(o);for(e=n.slice().sort(function(u,f){return u.startTime!=f.startTime?u.startTime-f.startTime:u.endTime!=f.endTime?u.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(u):n.indexOf(u)-n.indexOf(f)}),e=T(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},s.destroy=function(){return this.g&&(e1(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},s.isTextVisible=function(){return this.g.mode=="showing"},s.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function e1(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var o=T(Array.from(e.cues)),a=o.next();!a.done;a=o.next())(a=a.value)&&t(a)&&e.removeCue(a);e.mode=n}me("shaka.text.SimpleTextDisplayer",Ti),Ti.prototype.setTextVisibility=Ti.prototype.setTextVisibility,Ti.prototype.isTextVisible=Ti.prototype.isTextVisible,Ti.prototype.destroy=Ti.prototype.destroy,Ti.prototype.append=Ti.prototype.append,Ti.prototype.remove=Ti.prototype.remove,Ti.prototype.configure=Ti.prototype.configure;function Ei(){}s=Ei.prototype,s.configure=function(){},s.remove=function(){},s.append=function(){},s.destroy=function(){},s.isTextVisible=function(){return!1},s.setTextVisibility=function(){},me("shaka.text.StubTextDisplayer",Ei),Ei.prototype.setTextVisibility=Ei.prototype.setTextVisibility,Ei.prototype.isTextVisible=Ei.prototype.isTextVisible,Ei.prototype.destroy=Ei.prototype.destroy,Ei.prototype.append=Ei.prototype.append,Ei.prototype.remove=Ei.prototype.remove,Ei.prototype.configure=Ei.prototype.configure;function t1(){}function Bs(e){for(;e.firstChild;)e.removeChild(e.firstChild)}me("shaka.util.Dom",t1),t1.removeAllChildren=Bs;function bi(e,t,n){var o=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||Tt("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new bt(function(){o.A.paused||js(o)}).Sa(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Ae,this.j.D(document,"fullscreenchange",function(){js(o,!0)}),this.j.D(this.A,"seeking",function(){js(o,!0)}),this.j.D(this.A,"resize",function(){var a=o.A,u=a.videoWidth;a=a.videoHeight,u&&a?o.l=u/a:o.l=null}),this.o=null,"ResizeObserver"in d&&(this.o=new ResizeObserver(function(){js(o,!0)}),this.o.observe(this.g)),this.B=new Map}s=bi.prototype,s.configure=function(e){this.C&&this.C.Sa(e.captionsUpdatePeriod)},s.append=function(e){var t=[].concat(L(this.h));e=T(Jy(e));for(var n=e.next(),o={};!n.done;o={Ne:void 0},n=e.next())o.Ne=n.value,t.some(function(a){return function(u){return xn(u,a.Ne)}}(o))||this.h.push(o.Ne);js(this)},s.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},s.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(o){return o.startTime<e||o.endTime>=t}),js(this,n>this.h.length),!0},s.isTextVisible=function(){return this.m},s.setTextVisibility=function(e){this.m=e};function fb(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function n1(e,t,n,o,a){var u=!1,f=[],h=[];t=T(t);for(var p=t.next();!p.done;p=t.next()){p=p.value,a.push(p);var g=e.i.get(p),S=p.startTime<=o&&p.endTime>o,E=g?g.qh:null;g&&(f.push(g.Oe),g.qc&&f.push(g.qc),S||(u=!0,e.i.delete(p),g=null)),S&&(h.push(p),g?fb(e,E)||(u=!0):(cb(e,p,a),g=e.i.get(p),E=g.qh,u=!0)),0<p.nestedCues.length&&E&&n1(e,p.nestedCues,E,o,a),a.pop()}if(u){for(o=T(f),a=o.next();!a.done;a=o.next())a=a.value,a.parentElement&&a.parentElement.removeChild(a);for(h.sort(function(A,b){return A.startTime!=b.startTime?A.startTime-b.startTime:A.endTime-b.endTime}),h=T(h),o=h.next();!o.done;o=h.next())o=e.i.get(o.value),o.qc?(o.qc.contains(n)&&o.qc.removeChild(n),n.appendChild(o.qc),o.qc.appendChild(o.Oe)):n.appendChild(o.Oe)}}function js(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=T(e.B.values());for(var o=t.next();!o.done;o=t.next())Bs(o.value);Bs(e.g),e.i.clear(),e.B.clear()}e.m&&n1(e,e.h,e.g,n,[])}}function cb(e,t,n){var o=1<n.length,a=o?"span":"div";t.lineBreak&&(a="br"),t.rubyTag&&(a=t.rubyTag),o=!o&&0<t.nestedCues.length;var u=document.createElement(a);if(a!="br"&&db(e,u,t,n,o),n=null,t.region&&t.region.id){var f=t.region,h=e.l===4/3?2.5:1.9;if(n=f.id+"_"+f.width+"x"+f.height+(f.heightUnits==Ct?"%":"px")+"-"+f.viewportAnchorX+"x"+f.viewportAnchorY+(f.viewportAnchorUnits==Ct?"%":"px"),e.B.has(n))n=e.B.get(n);else{a=document.createElement("span");var p=f.heightUnits==Ct?"%":"px",g=f.widthUnits==Ct?"%":"px",S=f.viewportAnchorUnits==Ct?"%":"px";a.id="shaka-text-region---"+n,a.classList.add("shaka-text-region"),a.style.position="absolute";var E=f.height,A=f.width;f.heightUnits===2&&(E=5.33*f.height,p="%"),f.widthUnits===2&&(A=f.width*h,g="%"),a.style.height=E+p,a.style.width=A+g,f.viewportAnchorUnits===2?(h=f.viewportAnchorY/75*100,p=f.viewportAnchorX/(e.l===4/3?160:210)*100,h-=f.regionAnchorY*E/100,p-=f.regionAnchorX*A/100,a.style.top=h+"%",a.style.left=p+"%"):(a.style.top=f.viewportAnchorY-f.regionAnchorY*E/100+S,a.style.left=f.viewportAnchorX-f.regionAnchorX*A/100+S),f.heightUnits!==0&&f.widthUnits!==0&&f.viewportAnchorUnits!==0&&(f=Math.max(0,Math.min(100-(parseInt(a.style.width.slice(0,-1),10)||0),parseInt(a.style.left.slice(0,-1),10)||0)),a.style.top=Math.max(0,Math.min(100-(parseInt(a.style.height.slice(0,-1),10)||0),parseInt(a.style.top.slice(0,-1),10)||0))+"%",a.style.left=f+"%"),a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,a),n=a}}a=u,o&&(a=document.createElement("span"),a.classList.add("shaka-text-wrapper"),a.style.backgroundColor=t.backgroundColor,a.style.lineHeight="normal",u.appendChild(a)),e.i.set(t,{Oe:u,qh:a,qc:n})}function hb(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==yo?n:e==="left"||e==="start"&&t===vo||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===vo?"line-right":"center"}function db(e,t,n,o,a){var u=t.style,f=n.nestedCues.length==0,h=1<o.length;u.whiteSpace="pre-wrap";var p=n.payload.replace(/\s+$/g,function(S){return" ".repeat(S.length)});if(u.webkitTextStrokeColor=n.textStrokeColor,u.webkitTextStrokeWidth=n.textStrokeWidth,u.color=n.color,u.direction=n.direction,u.opacity=n.opacity,u.paddingLeft=Gd(n.linePadding,n,e.s),u.paddingRight=Gd(n.linePadding,n,e.s),u.textCombineUpright=n.textCombineUpright,u.textShadow=n.textShadow,n.backgroundImage)u.backgroundImage="url('"+n.backgroundImage+"')",u.backgroundRepeat="no-repeat",u.backgroundSize="contain",u.backgroundPosition="center",n.backgroundColor&&(u.backgroundColor=n.backgroundColor),u.width="100%",u.height="100%";else{if(n.nestedCues.length)var g=t;else g=document.createElement("span"),t.appendChild(g);n.border&&(g.style.border=n.border),!a&&((t=i1(o,function(S){return S.backgroundColor}))?g.style.backgroundColor=t:p&&(g.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=i1(o,function(S){return S.fontFamily}))&&(g.style.fontFamily=t),p&&(g.textContent=p)}h&&!o[o.length-1].isContainer?u.display="inline":(u.display="flex",u.flexDirection="column",u.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(u.width="100%",u.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(u.width="100%",u.alignItems="end"),u.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(u.margin="0"),u.fontFamily=n.fontFamily,u.fontWeight=n.fontWeight.toString(),u.fontStyle=n.fontStyle,u.letterSpacing=n.letterSpacing,u.fontSize=Gd(n.fontSize,n,e.s),o=n.line,o!=null&&(f=n.lineInterpretation,f==ro&&(f=1,h=16,e.l&&1>e.l&&(h=32),o=0>o?100+o/h*100:o/h*100),f==1&&(u.position="absolute",n.writingMode==yi?(u.width="100%",n.lineAlign==xo?u.top=o+"%":n.lineAlign=="end"&&(u.bottom=100-o+"%")):n.writingMode=="vertical-lr"?(u.height="100%",n.lineAlign==xo?u.left=o+"%":n.lineAlign=="end"&&(u.right=100-o+"%")):(u.height="100%",n.lineAlign==xo?u.right=o+"%":n.lineAlign=="end"&&(u.left=100-o+"%")))),u.lineHeight=n.lineHeight,e=hb(n),e=="line-left"?(u.cssFloat="left",n.position!==null&&(u.position="absolute",n.writingMode==yi?(u.left=n.position+"%",u.width="auto"):u.top=n.position+"%")):e=="line-right"?(u.cssFloat="right",n.position!==null&&(u.position="absolute",n.writingMode==yi?(u.right=100-n.position+"%",u.width="auto"):u.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(u.position="absolute",n.writingMode==yi?(u.left=n.position+"%",u.width="auto"):u.top=n.position+"%"),u.textAlign=n.textAlign,u.textDecoration=n.textDecoration.join(" "),u.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&u.writingMode==n.writingMode||(u.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==yi?u.width=n.size+"%":u.height=n.size+"%")}function Gd(e,t,n){var o=(o=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(o[1]),unit:o[2]}:null;if(!o)return e;var a=o.value;switch(o.unit){case"%":return a/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*a/t.cellResolution.rows+"px";default:return e}}function i1(e,t){for(var n=e.length-1;0<=n;n--){var o=t(e[n]);if(o||o===0)return o}return null}me("shaka.text.UITextDisplayer",bi),bi.prototype.setTextVisibility=bi.prototype.setTextVisibility,bi.prototype.isTextVisible=bi.prototype.isTextVisible,bi.prototype.remove=bi.prototype.remove,bi.prototype.destroy=bi.prototype.destroy,bi.prototype.append=bi.prototype.append,bi.prototype.configure=bi.prototype.configure;function pb(e,t){function n(u){for(var f=u,h=T(t),p=h.next();!p.done;p=h.next())p=p.value,p.end&&p.start<u&&(f+=p.end-p.start);return u=Math.floor(f/3600),h=Math.floor(f/60%60),p=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>u?"0":"")+u+":"+(10>h?"0":"")+h+":"+(10>p?"0":"")+p+"."+(100>f?10>f?"00":"0":"")+f}var o=Hd(e);e=`WEBVTT

`,o=T(o);for(var a=o.next();!a.done;a=o.next())a=a.value,e+=n(a.startTime)+" --> "+n(a.endTime)+function(u){var f=[];switch(u.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case lt:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(u.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(a)+`
`,e+=a.payload+`

`;return e}me("shaka.text.WebVttGenerator",function(){});function o1(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}o1.prototype.configure=function(e){this.g=e};function mb(e){e.i=!1,e.l=!0,e.j=!1}function gb(e,t,n){try{if(!e.g.enabled)return t;var o=Xd(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var a=wf;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":a=Cf;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":a=s1;break e}a=void 0}o.ot=a,o.su=!0;var u=xf(o);return Wd(t,u)}catch(f){return Oe("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function Xd(e){return e.g.sessionId||(e.g.sessionId=d.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function Fs(e,t,n){n=n===void 0?{}:n;var o=o===void 0?e.g.useHeaders:o;if(e.g.enabled){Object.assign(n,Xd(e)),n.pr=e.h.eb();var a=n.ot===Sf||n.ot===Cf;if(e.j&&a&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=yb(e,n),o)o=Sb(e),Object.keys(o).length&&Object.assign(t.headers,o);else{var u=xf(e);u&&(t.uris=t.uris.map(function(f){return Wd(f,u)}))}}}function yb(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(o,a){return n.includes(a)&&(o[a]=t[a]),o},{}):t}function vb(e){if(e.type===0)return Cb;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Cf:Sf;if(t=="audio")return wf;if(t=="text")return e.mimeType==="application/mp4"?Tf:Yd}}function xb(e,t){if(t=e.h.wb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(o){return o.start<=n&&o.end>=n}))?1e3*(e.end-n):NaN}function r1(e,t){if(t=e.h.wb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(o){return o.start<=n&&o.end>=n}))?1e3*(e.end-n):0}function wb(e,t){var n=e.h.ic();if(!n.length)return NaN;e=n[0],n=T(n);for(var o=n.next();!o.done;o=n.next())o=o.value,o.type==="variant"&&o.bandwidth>e.bandwidth&&(e=o);switch(t){case Sf:return e.videoBandwidth||NaN;case wf:return e.audioBandwidth||NaN;default:return e.bandwidth}}function xf(e){function t(E){return 100*n(E/100)}function n(E){return Math.round(E)}function o(E){return!Number.isNaN(E)&&E!=null&&E!==""&&E!==!1}var a=[],u={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(E){return encodeURIComponent(E)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=T(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var p=e[h];if(o(p)&&(h!=="v"||p!==1)&&(h!="pr"||p!==1)){var g=u[h];g&&(p=g(p)),g=typeof p;var S=void 0;S=g==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(p):g==="boolean"?h:g==="symbol"?h+"="+p.description:h+"="+p,a.push(S)}}return a.join(",")}function Sb(e){var t=Object.keys(e),n={},o=["Object","Request","Session","Status"],a=[{},{},{},{}],u={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=T(t);for(var f=t.next();!f.done;f=t.next())f=f.value,a[u[f]!=null?u[f]:1][f]=e[f];for(e=0;e<a.length;e++)(u=xf(a[e]))&&(n["CMCD-"+o[e]]=u);return n}function Wd(e,t){return!t||e.includes("offline:")?e:(e=new wn(e),e.g.set("CMCD",t),e.toString())}var s1="m",wf="a",Sf="v",Cf="av",Cb="i",Yd="c",Tf="tt";me("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Kj:"s",OTHER:"o"});function Yi(e){this.h=e,this.g=null}s=Yi.prototype,s.configure=function(e){this.h=e},s.zg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(l1)?1e3*this.g.get(l1):null},s.xg=function(){return this.h.enabled&&this.g&&this.g.has(u1)?1e3*this.g.get(u1):null},s.Yh=function(){return this.h.enabled&&this.g&&this.g.has(f1)?this.g.get(f1):null},s.Zh=function(){return this.h.enabled&&this.g&&this.g.has(c1)?this.g.get(c1):null},s.getBandwidthEstimate=function(e){var t=this.xg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function a1(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}me("shaka.util.CmsdManager",Yi),Yi.prototype.getBandwidthEstimate=Yi.prototype.getBandwidthEstimate,Yi.prototype.getRoundTripTime=Yi.prototype.Zh,Yi.prototype.getResponseDelay=Yi.prototype.Yh,Yi.prototype.getEstimatedThroughput=Yi.prototype.xg,Yi.prototype.getMaxBitrate=Yi.prototype.zg;var u1="etp",l1="mb",f1="rd",c1="rtt";function h1(){this.g=null,this.h=[]}function qd(e,t){return $(function(n){if(n.g==1)return e.g?k(n,new Promise(function(o){return e.h.push(o)}),2):n.u(2);e.g=t,q(n)})}h1.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function ve(e,t){Bt.call(this);var n=this;this.l=rp,this.de=this.h=null,this.oa=!1,this.qe=new Ae,this.gd=new Ae,this.m=new Ae,this.Fa=new Ae,this.ub=new Ae,this.C=this.G=this.B=this.H=null,this.te=0,this.Z=new h1,this.pa=this.ag=this.da=this.i=this.ab=this.F=this.j=this.Zc=this.K=this.eg=this.ea=this.N=this.dd=this.L=this.he=this.I=this.Fb=null,this.Ea=!1,this.xa=this.o=null,this.cg=1e9,this.qd=[],this.U=NaN,this.g=Qo(this),this.R=null,this.ze=-1,this.Da=null,this.fa={width:1/0,height:1/0},this.be=new ud(this.g,this.fa,null),this.ke=[],this.s=null,this.za=new xs(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Db=this.g.preferredTextLanguage,this.pd=this.g.preferredTextRole,this.od=this.g.preferForcedSubs,this.md=[],t&&t(this),this.N=Ob(this),this.ea=new Yi(this.g.cmsd),this.H=x1(this),this.H.Pf(this.g.streaming.forceHTTP),this.H.Qf(this.g.streaming.forceHTTPS),this.Gb=this.ba=this.A=null,this.Ce=!1,this.dg=new bt(function(){return $(function(o){if(o.g==1)return n.ba?k(o,n.Rb(n.Gb,!0),3):o.u(0);if(o.g!=4)return k(o,n.load(n.ba),4);n.Ce?n.Gb.pause():n.Gb.play(),n.ba=null,n.Ce=!1,q(o)})}),Mf&&(this.A=Mf(),this.A.configure(this.g.ads),this.ub.D(this.A,"ad-content-pause-requested",function(o){var a;return $(function(u){if(u.g==1)return n.dg.stop(),n.ba?u.u(0):(n.Gb=n.h,n.Ce=n.h.ended,a=o.saveLivePosition||!1,k(u,n.qg(!0,a),3));n.ba=u.h,q(u)})}),this.ub.D(this.A,"ad-content-resume-requested",function(o){if(o=o.offset||0,n.ba){var a=n.ba;a.A&&o&&(a.A+=o)}n.dg.Y(.1)}),this.ub.D(this.A,"ad-content-attach-requested",function(){return $(function(o){return n.h||!n.Gb?o.u(0):k(o,n.Rb(n.Gb,!0),0)})})),this.qe.D(d,"online",function(){np(n),n.If()}),this.je=new bt(function(){for(var o=Date.now()/1e3,a=!1,u=!0,f=T(n.i.variants),h=f.next();!h.done;h=f.next())h=h.value,0<h.disabledUntilTime&&h.disabledUntilTime<=o&&(h.disabledUntilTime=0,a=!0),0<h.disabledUntilTime&&(u=!1);u&&n.je.stop(),a&&zs(n,!1,void 0,!1,!1)}),this.qa=null,e&&(Tt("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Rb(e,!0))}te(ve,Bt);function Ef(e){e.K!=null&&(hy(e.K),e.K.release(),e.K=null)}function Tb(e,t){t.lcevc.enabled?(Ef(e),e.K==null&&(e.K=new iu(e.h,e.eg,t.lcevc),e.G&&(e.G.Z=e.K))):Ef(e)}function on(e,t){return new je(e,t)}s=ve.prototype,s.destroy=function(){var e=this,t;return $(function(n){switch(n.g){case 1:return e.l==bo?n.return():(Ef(e),t=e.detach(),e.l=bo,k(n,t,2));case 2:return k(n,e.Qe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.gd&&(e.gd.release(),e.gd=null),e.m&&(e.m.release(),e.m=null),e.Fa&&(e.Fa.release(),e.Fa=null),e.ub&&(e.ub.release(),e.ub=null),e.xa=null,e.g=null,e.s=null,e.de=null,e.N=null,e.ea=null,!e.H){n.u(4);break}return k(n,e.H.destroy(),5);case 5:e.H=null;case 4:e.o&&(e.o.release(),e.o=null),Bt.prototype.release.call(e),q(n)}})};function $s(e,t){e.dispatchEvent(on("onstatechange",new Map().set("state",t)))}s.Rb=function(e,t){t=t===void 0?!0:t;var n=this,o,a,u;return $(function(f){switch(f.g){case 1:if(n.l==bo)throw new ne(2,7,7e3);if(o=n.h&&n.h==e,!n.h||n.h==e){f.u(2);break}return k(f,n.detach(),2);case 2:return k(f,Kd(n,"attach"),4);case 4:if(f.h)return f.return();if(Y(f,5,6),o||($s(n,"attach"),a=function(){var h=ip(n,!1);h&&Vs(n,h)},n.gd.D(e,"error",a),n.h=e),!t||!wo()||n.G){f.u(6);break}return k(f,Qd(n),6);case 6:re(f),n.Z.release(),ce(f,0);break;case 5:return u=ee(f),k(f,n.detach(),10);case 10:throw u}})},s.zh=function(e){this.eg=e},s.detach=function(e){e=e===void 0?!1:e;var t=this;return $(function(n){if(n.g==1){if(t.l==bo)throw new ne(2,7,7e3);return k(n,t.bc(!1,e),2)}if(n.g!=3)return k(n,Kd(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.gd.Ra(),t.h=null),$s(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Z.release()}q(n)})};function Kd(e,t){var n;return $(function(o){return o.g==1?(n=++e.te,k(o,qd(e.Z,t),2)):n!=e.te?(e.Z.release(),o.return(!0)):o.return(!1)})}s.bc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,o,a,u,f,h,p,g,S,E,A;return $(function(b){switch(b.g){case 1:return n.l!=bo&&(n.l=rp),k(b,Kd(n,"unload"),2);case 2:return b.h?b.return():(Z(b,3),n.Ea=!1,$s(n,"unload"),e&&!wo()&&(e=!1),Ef(n),o=n.md.map(function(M){return M()}),n.md=[],k(b,Promise.all(o),5));case 5:if(n.dispatchEvent(on("unloading")),n.dd&&(n.dd.release(),n.dd=null),n.h&&(n.m.Ra(),n.Fa.Ra()),n.je.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.he&&(n.he.stop(),n.he=null),!n.F){b.u(6);break}return k(b,n.F.stop(),7);case 7:n.F=null,n.ab=null;case 6:if(!n.o){b.u(8);break}return k(b,n.o.stop(),8);case 8:if(!n.j){b.u(10);break}return k(b,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.I&&(n.I.release(),n.I=null),n.C&&(n.C.release(),n.C=null),!Ll("webkit")||!n.B){b.u(12);break}return k(b,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.G){b.u(14);break}return k(b,n.G.destroy(),15);case 15:n.G=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.dg.stop(),n.N&&mb(n.N),n.ea&&(n.ea.g=null),n.h&&Bs(n.h),!n.h||!n.h.src){b.u(16);break}return k(b,new Promise(function(M){return new bt(M).Y(.1)}),17);case 17:n.h.removeAttribute("src"),n.h.load();case 16:if(!n.B){b.u(18);break}return k(b,n.B.destroy(),19);case 19:n.B=null;case 18:if(n.qa&&n.da!=n.qa.Dc()&&(n.qa.s||n.qa.destroy(),n.qa=null),n.da=null,n.ag=null,n.L=null,n.i){for(a=T(n.i.variants),u=a.next();!u.done;u=a.next())for(f=u.value,h=T([f.audio,f.video]),p=h.next();!p.done;p=h.next())(g=p.value)&&g.segmentIndex&&g.segmentIndex.release();for(S=T(n.i.textStreams),E=S.next();!E.done;E=S.next())A=E.value,A.segmentIndex&&A.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(cg={},Al.clear()),n.i=null,n.s=new sf,n.bg=null,n.Da=null,n.R=null,n.ze=-1,n.qd=[],n.U=NaN,tp(n);case 3:re(b),n.Z.release(),ce(b,4);break;case 4:if(e&&wo()&&!n.G&&n.h)return k(b,Qd(n),0);b.u(0)}})},s.ej=function(e){this.pa=e},s.load=function(e,t,n){t=t===void 0?null:t;var o=this,a,u,f,h,p,g,S,E,A,b,M,_,R;return $(function(B){switch(B.g){case 1:if(o.l==bo)throw new ne(2,7,7e3);return a=null,u="",e instanceof Ko?(a=e,u=a.Dc()||""):u=e||"",k(B,qd(o.Z,"load"),2);case 2:if(o.Z.release(),!o.h)throw new ne(2,7,7002);if(!o.da){B.u(3);break}return o.da=u,k(B,o.bc(!1),3);case 3:if(f=++o.te,h=function(){return $(function(N){if(N.g==1)return o.te==f?N.u(0):a?k(N,a.destroy(),3):N.u(3);throw new ne(2,7,7e3)})},p=function(N,H){return $(function(D){switch(D.g){case 1:return Z(D,2),k(D,qd(o.Z,H),4);case 4:return k(D,h(),5);case 5:return k(D,N(),6);case 6:return k(D,h(),7);case 7:a&&o.g&&(a.g=o.g);case 2:re(D),o.Z.release(),ce(D,0)}})},Y(B,5,6),t==null&&a&&(t=a.getStartTime()),o.pa=t,o.Ea=!1,o.dispatchEvent(on("loading")),a){n=a.U,B.u(8);break}if(n){B.u(8);break}return k(B,p(function(){return $(function(N){if(N.g==1)return k(N,g1(o,u),2);n=N.h,q(N)})},"guessMimeType_"),8);case 8:if(g=!!a,a){qy(a,o),o.s=a.getStats(),B.u(11);break}return k(B,p1(o,u,t,n,!0),12);case 12:(a=B.h)?(qy(a,o),o.s=a.getStats(),a.start(),a.m.catch(function(){})):o.s=new sf;case 11:if(S=!a,E=Date.now()/1e3,o.s=a?a.getStats():new sf,o.da=u,o.ag=n||null,S)return k(B,p(function(){return $(function(N){return k(N,kb(o,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(o.G){B.u(15);break}return k(B,p(function(){return $(function(N){return k(N,Qd(o),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return k(B,p(function(){return $(function(N){return k(N,a.m,0)})},"waitForFinish"),17);case 17:return o.g=a.getConfiguration(),o.be=a.C,o.ab=a.F,o.F=tb(a),o.F&&o.F.setMediaElement&&o.h&&o.F.setMediaElement(o.h),o.dd=nb(a),o.Zc=a.za,o.i=a.gf(),(A=a.o)&&(o.za=A),g&&o.h&&o.h.nodeName==="AUDIO"&&(Eb(o),o.configure("manifest.disableVideo",!0)),o.B=ib(a),k(B,p(function(){return $(function(N){return k(N,o.B.Rb(o.h),0)})},"drmEngine_.attach"),18);case 18:return!(b=a.B)||o.xa&&o.xa==b||(o.o=eb(a),o.xa=a.B,typeof o.o.setMediaElement!="function"&&(Tt("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),o.o.setMediaElement=function(){}),typeof o.o.setCmsdManager!="function"&&(Tt("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),o.o.setCmsdManager=function(){}),typeof o.o.trySuggestStreams!="function"&&(Tt("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),o.o.trySuggestStreams=function(){})),M=ob(a),_=a.fa,k(B,p(function(){return $(function(N){return k(N,Ab(o,E,_,M),0)})},"loadInner_"),19);case 19:JE(a),B.u(14);break;case 20:return k(B,p(function(){return $(function(N){return k(N,Ib(o,E,n),0)})},"srcEqualsInner_"),14);case 14:o.dispatchEvent(on("loaded"));case 6:if(re(B),!a){B.u(22);break}return k(B,a.destroy(),22);case 22:o.qa=null,ce(B,0);break;case 5:if(R=ee(B),!R||R.code==7e3){B.u(24);break}return k(B,o.bc(!1),24);case 24:throw R}})};function Eb(e){for(var t=T(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(o){return o.audio})}s.aj=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,o;return $(function(a){return a.g==1?k(a,d1(n),2):a.g!=3?(o=a.h,k(a,n.bc(e,t),3)):a.return(o)})},s.qg=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,o;return $(function(a){return a.g==1?k(a,d1(n,t),2):a.g!=3?(o=a.h,k(a,n.detach(e),3)):a.return(o)})};function d1(e,t){t=t===void 0?!1:t;var n,o;return $(function(a){if(a.g==1)return n=null,e.i&&e.F&&e.ab&&e.da?(o=e.h.currentTime,e.V()&&!t&&(o=null),k(a,m1(e,e.da,o,e.ag,!0,!1,!1),3)):a.u(2);if(a.g!=2){n=a.h,e.ke.push(n),e.F&&e.F.setMediaElement&&e.F.setMediaElement(null);var u=n,f=e.F,h=e.ab;u.h=e.i,u.j=f,u.F=h,u=n,f=e.xa,u.i=e.o,u.B=f,n.o=e.za,n.start(),e.i=null,e.F=null,e.ab=null,e.o=null,e.xa=null}return a.return(n)})}s.preload=function(e,t,n){t=t===void 0?null:t;var o=this,a;return $(function(u){return u.g==1?k(u,p1(o,e,t,n),2):((a=u.h)?a.start():Vs(o,new ne(2,7,7005)),u.return(a))})},s.Qe=function(){var e=this,t,n,o,a;return $(function(u){for(t=[],n=T(e.ke),o=n.next();!o.done;o=n.next())a=o.value,a.s||t.push(a.destroy());return e.ke=[],k(u,Promise.all(t),0)})};function p1(e,t,n,o,a){a=a===void 0?!1:a;var u,f,h;return $(function(p){return p.g==1?o?p.u(2):k(p,g1(e,t),3):(p.g!=2&&(o=p.h),bb(e,o)?p.return(null):(u=!1,f=!0,a&&(e.o&&e.xa==e.g.abrFactory&&(f=!1),e.h&&e.h.nodeName==="AUDIO"&&(u=!0)),h=m1(e,t,n,o||null,!a,u,f),a||(h=h.then(function(g){return e.ke.push(g),g})),p.return(h)))})}function m1(e,t,n,o,a,u,f){a=a===void 0?!0:a,u=u===void 0?!1:u,f=f===void 0?!0:f;var h,p,g,S,E,A,b,M,_,R,B,N,H,D,F;return $(function(X){return X.g==1?(h=null,p=Po(e.g),u&&(p.manifest.disableVideo=!0),g=function(){return h.R&&h.s?null:h},S=function(){return g()?g().getConfiguration():e.g},E=function(J,ie){g()?h.configure(J,ie):e.configure(J,ie)},e.fa.width!=1/0||e.fa.height!=1/0?X.u(2):k(X,zm(),3)):(X.g!=2&&(A=X.h,e.fa.width=A.width,e.fa.height=A.height),b=new ud(p,e.fa,null),M={networkingEngine:e.H,filter:function(J){var ie,de;return $(function(oe){if(oe.g==1)return k(oe,Kg(b,J),2);if(oe.g!=4)return ie=oe.h,ie?(de=on("trackschanged"),k(oe,Promise.resolve(),4)):oe.u(0);h.dispatchEvent(de),q(oe)})},makeTextStreamsForClosedCaptions:function(J){return Bb(e,J)},onTimelineRegionAdded:function(J){var ie=h.G;e:{for(var de=T(ie.g),oe=de.next();!oe.done;oe=de.next())if(oe=oe.value,oe.schemeIdUri==J.schemeIdUri&&oe.id==J.id&&oe.startTime==J.startTime&&oe.endTime==J.endTime){de=oe;break e}de=null}de==null&&(ie.g.add(J),J=new je("regionadd",new Map([["region",J]])),ie.dispatchEvent(J))},onEvent:function(J){return h.dispatchEvent(J)},onError:function(J){return h.onError(J)},isLowLatencyMode:function(){return S().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return S().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){E("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&h.R&&e.j.updateDuration()},newDrmInfo:function(J){var ie=h.l,de=ie?ie.g:null;de&&ie.s&&ld(b,de.keySystem,J)},onManifestUpdated:function(){var J=new Map().set("isLive",e.V());h.dispatchEvent(on("manifestupdated",J)),cu(h,!1,function(){e.A&&e.A.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(J,ie,de,oe){var se=J;J=="com.apple.hls.interstitial"&&(se="com.apple.quicktime.HLS",J={startTime:ie,endTime:de,values:oe},e.A)&&e.A.onInterstitialMetadata(e,e.h,J),oe=T(oe),J=oe.next();for(var ue={};!J.done;ue={Pg:void 0},J=oe.next())ue.Pg=J.value,cu(h,!1,function(xe){return function(){Zd(e,ie,de,se,xe.Pg)}}(ue))},disableStream:function(J){return e.disableStream(J,e.g.streaming.maxDisabledTime)}},_=new Rd(function(){return e.Ob()}),_.addEventListener("regionadd",function(J){var ie=J.region;gu(e,"timelineregionadded",ie,h),cu(h,!1,function(){e.A&&e.A.onDashTimedMetadata(ie)})}),R=null,p.streaming.observeQualityChanges&&(R=new uf(function(){return e.wb()}),R.addEventListener("qualitychange",function(J){L1(e,J.quality,J.position)}),R.addEventListener("audiotrackchange",function(J){L1(e,J.quality,J.position,!0)})),B=!0,N={Lb:e.H,onError:function(J){return h.onError(J)},ee:function(J){cu(h,!0,function(){e:{var ie=J,de=on("keystatuschanged");e.dispatchEvent(de);var oe=Object.keys(ie);oe.length==1&&oe[0]==""&&(oe=["00"],ie={"00":ie[""]}),de=oe.length==1&&oe[0]=="00";var se=!1;if(oe.length){oe=T(e.i.variants);for(var ue=oe.next();!ue.done;ue=oe.next()){ue=ue.value;var xe=[];ue.audio&&xe.push(ue.audio),ue.video&&xe.push(ue.video),xe=T(xe);for(var ye=xe.next();!ye.done;ye=xe.next()){var Ce=ye.value;if(ye=ue.allowedByKeySystem,Ce.keyIds.size){ue.allowedByKeySystem=!0,Ce=T(Ce.keyIds);for(var _e=Ce.next();!_e.done;_e=Ce.next())_e=_e.value,((_e=ie[de?"00":_e])||e.B.F)&&(ue.allowedByKeySystem=ue.allowedByKeySystem&&!!_e&&!Jg.includes(_e))}ye!=ue.allowedByKeySystem&&(se=!0)}}}if(se&&(qi(e),!Yr(e)))break e;(ie=e.j.j)&&!ie.allowedByKeySystem&&zs(e)}})},onExpirationUpdated:function(J,ie){var de=on("expirationupdated");h.dispatchEvent(de),(de=h.j)&&de.onExpirationUpdated&&de.onExpirationUpdated(J,ie)},onEvent:function(J){h.dispatchEvent(J),J.type=="drmsessionupdate"&&B&&(B=!1,J=Date.now()/1e3-h.qa,(e.s||h.getStats()).j=J,e.K&&hy(e.K))}},H=x1(e,g),Tg(e.H,H),D=function(){return e.yc(N)},F={config:p,wi:M,Fi:_,Ei:R,yc:D,vi:b,networkingEngine:H,yh:a,xh:f},h=new Ko(t,o,n,F),X.return(h))})}function g1(e,t){var n,o;return $(function(a){return a.g==1?(n=e.g.manifest.retryParameters,k(a,Vd(t,e.H,n),2)):(o=a.h,o=="application/x-mpegurl"&&fs()&&(o="application/vnd.apple.mpegurl"),a.return(o))})}function bb(e,t){if(!wo())return!0;if(t){if((e.h||$m()).canPlayType(t)=="")return!1;if(!(wo()&&t in ho))return!0;if(Wm(t))return fs()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function Qd(e){var t,n,o,a,u;return $(function(f){if(f.g==1)return $s(e,"media-source"),t=e.g.textDisplayFactory,n=t(),n.configure?n.configure(e.g.textDisplayer):Tt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.bg=t,o=Db(e.h,n,{Qh:function(){return e.keySystem()},onMetadata:function(h,p,g){y1(e,h,p,g)}},e.K),o.configure(e.g.mediaSource),a=e.g.manifest,u=a.segmentRelativeVttTiming,o.fa=u,k(f,o.L,2);e.G=o,q(f)})}function Ab(e,t,n,o){var a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de;return $(function(oe){switch(oe.g){case 1:$s(e,"load"),a=e.h,e.I=new ru({Nd:function(){return a.playbackRate},hc:function(){return a.defaultPlaybackRate},Rf:function(se){a.playbackRate=se},Lg:function(se){a.currentTime+=se}}),u=function(){return bf(e)},f=function(){return A1(e)},e.m.D(a,"playing",u),e.m.D(a,"pause",u),e.m.D(a,"ended",u),e.m.D(a,"ratechange",f),Tb(e,e.g),e.Db=e.g.preferredTextLanguage,e.pd=e.g.preferredTextRole,e.od=e.g.preferForcedSubs,op(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(se,ue,xe){e.i&&e.j&&se!=e.j.j&&kf(e,se,!0,ue===void 0?!1:ue,xe===void 0?0:xe)}),e.o.setMediaElement(a),e.o.setCmsdManager(e.ea),e.j=Nb(e),e.j.configure(e.g.streaming),e.l=ii,a.textTracks&&e.m.D(a.textTracks,"addtrack",function(se){if(se.track)switch(se=se.track,se.kind){case"chapters":v1(e,se)}}),e.dispatchEvent(on("streaming")),h=n;case 2:for((g=e.j.j)||h||(h=Yr(e)?e.o.chooseVariant():null),S=[],p=g||h,E=T([p.video,p.audio]),A=E.next();!A.done;A=E.next())(b=A.value)&&!b.segmentIndex&&S.push(b.createSegmentIndex());if(!(0<S.length)){oe.u(4);break}return k(oe,Promise.all(S),4);case 4:if(!p||p.disabledUntilTime!=0){oe.u(2);break}if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(p),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&ze("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),op(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),NE(e.j,e.g.playRangeStart,e.g.playRangeEnd),M=function(se){e.C=Lb(e,se),e.Fb=Pb(e,se),w1(e,a,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||M(e.pa),g){oe.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){oe.u(8);break}return _=e.i.presentationTimeline,R=e.pa||e.h.currentTime,B=_.Vb(),N=_.yb(),R<B?R=B:R>N&&(R=N),k(oe,jb(h,R),9);case 9:H=oe.h,M(H);case 8:kf(e,h,!0,!1,0);case 7:return e.C.ready(),D=e.Ec().find(function(se){return se.active}),D||((F=Ya(e.i.textStreams,e.Db,e.pd,e.od)[0]||null)&&kd(e.s.h,F,!0),h&&(F?(Fb(e,h.audio,F)&&(e.oa=!0),e.oa&&e.G.F.setTextVisibility(!0),R1(e)):e.oa=!1),F&&(e.g.streaming.alwaysStreamText||e.qf())&&cf(e.j,F)),k(oe,e.j.start(o),10);case 10:e.g.abr.enabled&&(e.o.enable(),_1(e)),qi(e),Yr(e),e.i.variants.some(function(se){return se.primary}),((X=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(J=function(){return k1(e)},e.m.D(a,"timeupdate",J)),X||(ie=function(){return Af(e)},e.m.D(a,"timeupdate",ie),Af(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(de=function(){var se;return $(function(ue){if(ue.g==1)return se=e.h.duration-e.h.currentTime,isNaN(se)||!(se<=e.g.streaming.preloadNextUrlWindow)?ue.u(0):(e.m.jb(a,"timeupdate",de),k(ue,e.preload(e.i.nextUrl),4));e.qa=ue.h,q(ue)})},e.m.D(a,"timeupdate",de)),e.m.D(a,"ended",function(){e.load(e.qa||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(X),e.Ea=!0,e.m.ha(a,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),q(oe)}})}function kb(e,t){var n,o,a,u,f;return $(function(h){return h.g==1?(n=Mn,o=Date.now()/1e3,a=!0,e.B=e.yc({Lb:e.H,onError:function(p){Vs(e,p)},ee:function(){},onExpirationUpdated:function(){var p=on("expirationupdated");e.dispatchEvent(p)},onEvent:function(p){e.dispatchEvent(p),p.type=="drmsessionupdate"&&a&&(a=!1,e.s.j=Date.now()/1e3-o)}}),e.B.configure(e.g.drm),u={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},f={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?ao(t):"",codecs:t?Di(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},f.fullMimeTypes.add(Rn(f.mimeType,f.codecs)),t.startsWith("audio/")?(f.type=n.X,u.audio=f):u.video=f,e.B.ba=!0,k(h,Bg(e.B,[u],[]),2)):k(h,e.B.Rb(e.h),0)})}function Ib(e,t,n){var o,a,u,f,h,p,g,S,E,A,b,M;return $(function(_){if(_.g==1)return $s(e,"src-equals"),o=e.h,e.C=new Iy(o),a=!1,e.md.push(function(){a=!0}),e.pa!=null&&e.C.Ee(e.pa),e.I=new ru({Nd:function(){return o.playbackRate},hc:function(){return o.defaultPlaybackRate},Rf:function(R){o.playbackRate=R},Lg:function(R){o.currentTime+=R}}),u=e.g.streaming.rebufferingGoal,w1(e,o,u),f=function(){return bf(e)},h=function(){return A1(e)},e.m.D(o,"playing",f),e.m.D(o,"pause",f),e.m.D(o,"ended",f),e.m.D(o,"ratechange",h),o.preload!="none"&&e.m.ha(o,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),o.audioTracks&&(e.m.D(o.audioTracks,"addtrack",function(){return qi(e)}),e.m.D(o.audioTracks,"removetrack",function(){return qi(e)}),e.m.D(o.audioTracks,"change",function(){return qi(e)})),o.textTracks&&(e.m.D(o.textTracks,"addtrack",function(R){if(R.track)switch(R=R.track,R.kind){case"metadata":_b(e,R);break;case"chapters":v1(e,R);break;default:qi(e)}}),e.m.D(o.textTracks,"removetrack",function(){return qi(e)}),e.m.D(o.textTracks,"change",function(){return qi(e)})),p=gb(e.N,e.da,n),!p.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(p+="#t=",0<e.g.playRangeStart&&(p+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(p+=","+e.g.playRangeEnd)),o.src=p,(Ro()||_o())&&o.load(),o.preload!="none"&&!o.autoplay&&Wm(n)&&cs()&&o.load(),e.l=di,e.dispatchEvent(on("streaming")),g=new Wt,Ls(o,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ready(),g.resolve()}),Ls(o,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var R;return $(function(B){if(B.g==1)return Mb(e),R=mu(e),R.find(function(N){return N.mode!="disabled"})?(0<R.length&&(e.oa=!0),B.u(2)):k(B,new Promise(function(N){e.m.ha(o.textTracks,"change",N),new bt(N).Y(1)}),2);if(a)return B.return();Rb(e),q(B)})}),o.error?g.reject(ip(e)):o.preload=="none"&&(ze('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),g.resolve()),e.m.ha(o,"error",function(){g.reject(ip(e))}),S=new Promise(function(R,B){new bt(B).Y(e.g.streaming.loadTimeout)}),k(_,Promise.race([g,S]),2);((E=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(A=function(){return k1(e)},e.m.D(o,"timeupdate",A)),E||(b=function(){return Af(e)},e.m.D(o,"timeupdate",b),Af(e)),e.A&&(e.A.onManifestUpdated(E),E&&(M=e.Ob().end,e.m.D(o,"progress",function(){var R=e.Ob().end;M!=R&&(e.A.onManifestUpdated(e.V()),M=R)}))),e.Ea=!0,q(_)})}function Mb(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Xg(t,e.g.preferredVariantRole)}function Rb(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function _b(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues){for(var o=[],a=T(t.activeCues),u=a.next(),f={};!u.done;f={Ta:void 0},u=a.next())f.Ta=u.value,Zd(e,f.Ta.startTime,f.Ta.endTime,f.Ta.type,f.Ta.value),e.A&&e.A.onCueMetadataChange(f.Ta.value),f.Ta.type=="com.apple.quicktime.HLS"&&f.Ta.startTime!=null&&(u=o.find(function(h){return function(p){return p.startTime==h.Ta.startTime&&p.endTime==h.Ta.endTime}}(f)),u||(u={startTime:f.Ta.startTime,endTime:f.Ta.endTime,values:[]},o.push(u)),u.values.push(f.Ta.value));for(o=T(o),a=o.next();!a.done;a=o.next())a=a.value,a.values.some(function(h){return h.key=="X-ASSET-URI"||h.key=="X-ASSET-LIST"})&&e.A&&(a.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.A.onInterstitialMetadata(e,e.h,a))}});var n=new bt(function(){var o=Ub(e);o=T(o);for(var a=o.next();!a.done;a=o.next())a.value.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}function y1(e,t,n,o){t=T(t);for(var a=t.next();!a.done;a=t.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var u=a.cueTime+n,f=o;f&&u>f&&(f=u);for(var h=T(a.frames),p=h.next();!p.done;p=h.next())Zd(e,u,f,"org.id3",p.value);e.A&&e.A.onHlsTimedMetadata(a,u)}}function Zd(e,t,n,o,a){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",o).set("payload",a),e.dispatchEvent(on("metadata",t))}function v1(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new bt(function(){t.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}s.Ji=function(){for(var e=this.Z;e.g;)e.release()},s.yc=function(e){return new Kl(e)};function x1(e,t){function n(a){t()?t().dispatchEvent(a):e.dispatchEvent(a)}function o(a){t()?cu(t(),!0,a):a()}return t||(t=function(){return null}),new Zt(function(a,u,f,h){var p=t()?t().i:e.o;p&&p.segmentDownloaded(a,u,f,h)},function(a,u,f){u=new Map().set("headers",a).set("request",u).set("requestType",f),n(on("downloadheadersreceived",u)),o(function(){if(e.ea){var h=e.ea;if(h.h.enabled){var p=a["cmsd-static"];if(p)try{var g=new Map,S=p.split(",");for(p=0;p<S.length;p++){var E=S[p].split("=");g.set(E[0],a1(E[1]))}}catch{}if(g=a["cmsd-dynamic"]){try{var A=new Map,b=g.split(";");for(g=1;g<b.length;g++){var M=b[g].split("=");A.set(M[0],a1(M[1]))}var _=A}catch{_=null}_&&(h.g=_)}}}})},function(a,u,f,h){a=new Map().set("request",a).set("error",u).set("httpResponseCode",f).set("aborted",h),n(on("downloadfailed",a))},function(a,u,f){o(function(){var h=e.N,p=f;if(p=p===void 0?{}:p,h.g.enabled)if(u.method==="HEAD")Fs(h,u);else switch(a){case 0:try{if(h.g.enabled){if(p.type){e:{switch(p.type){case 4:var g="d";break e;case 3:case 2:g="h";break e;case 5:g="s";break e}g=void 0}h.m=g}Fs(h,u,{ot:s1,su:!h.i})}}catch(ye){Oe("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",ye)}break;case To:try{if(h.g.enabled){var S=p.segment;g=0,S&&(g=S.endTime-S.startTime);var E={d:1e3*g,st:h.h.V()?"l":"v"};E.ot=vb(p);var A=E.ot===Sf||E.ot===wf||E.ot===Cf||E.ot===Tf,b=p.stream;if(b){var M=h.h.eb();if(A&&(E.bl=xb(h,b.type),E.ot!==Tf)){var _=r1(h,b.type);E.dl=M?_/Math.abs(M):_}if(b.bandwidth&&(E.br=b.bandwidth/1e3),b.segmentIndex&&S){var R=b.segmentIndex.Ib(S.endTime,!0,0>M);if(R){var B=R.next().value;if(B&&B!=S){if(!hn(S.M(),B.M())){var N=B.M()[0],H=u.uris[0],D=new URL(N),F=new URL(H);if(D.origin!==F.origin)var X=N;else{for(var J=D.pathname.split("/").slice(1),ie=F.pathname.split("/").slice(1,-1);J[0]===ie[0];)J.shift(),ie.shift();for(;ie.length;)ie.shift(),J.unshift("..");X=J.join("/")}E.nor=X}if((B.Ha||B.sa)&&(S.Ha!=B.Ha||S.sa!=B.sa)){var de=B.Ha+"-";B.sa&&(de+=B.sa),E.nrr=de}}}var oe=h.h.eb()||1,se=r1(h,b.type)||500,ue=b.bandwidth,xe=ue?ue*(S.endTime-S.startTime)/1e3/(se/oe/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(xe)||(E.rtp=xe)}}A&&E.ot!==Tf&&(E.tb=wb(h,E.ot)/1e3),Fs(h,u,E)}}catch(ye){Oe("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",ye)}break;case 2:case 5:case 6:Fs(h,u,{ot:"k"});break;case 4:Fs(h,u,{ot:"o"})}})},function(a,u,f,h){(a=t()?t().j:e.F)&&a.banLocation&&a.banLocation(h)},function(a,u){if(u.data){u=u.data.byteLength;var f=t()?t().getStats():e.s;f&&(f.Cd=isNaN(f.Cd)?u:f.Cd+u,a===0&&(f.Hg=u))}})}function Lb(e,t){return new My(e.h,e.i,e.g.streaming,t,function(){e.Fb&&Oy(e.Fb,!0),e.j&&e.j.Qc(),e.L&&Wr(e)},function(n){return e.dispatchEvent(n)})}function Pb(e,t){t=new vf(e.dd,e.V()||0<t),t.addEventListener("enter",function(o){gu(e,"timelineregionenter",o.region)}),t.addEventListener("exit",function(o){gu(e,"timelineregionexit",o.region)}),t.addEventListener("skip",function(o){var a=o.region;o.seeking||(gu(e,"timelineregionenter",a),gu(e,"timelineregionexit",a))});var n=new Dy(e.h);return n.g.add(t),e.Zc&&n.g.add(e.Zc),n}function w1(e,t,n){e.L=new CT,e.L.g=ws,yg(e.L,n,Math.min(.5,n/2)),tp(e),e.he=new bt(function(){Wr(e)}).Sa(.25),e.m.D(t,"waiting",function(){return Wr(e)}),e.m.D(t,"stalled",function(){return Wr(e)}),e.m.D(t,"canplaythrough",function(){return Wr(e)}),e.m.D(t,"progress",function(){return Wr(e)})}function Wr(e){switch(e.l){case di:if(e.h.ended)var t=!0;else{var n=cd(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case ii:e:if(e.h.ended||gy(e.G))t=!0;else{if(e.i.presentationTimeline.V()){n=e.i.presentationTimeline.Wb();var o=cd(e.h.buffered);if(o!=null&&o>=n){t=!0;break e}}t=!1}break;default:t=!1}o=oy(e.h.buffered,e.h.currentTime),n=e.L;var a=t,u=n.i.get(n.g);t=n.g,o=a||o>=u?qa:ws,n.g=o,(t=t!=o)&&o===qa&&(n.h=Date.now()),t&&tp(e)}function Db(e,t,n,o){return new py(e,t,n,o)}function Ob(e){return new o1({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},wb:function(){return e.wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},eb:function(){return e.eb()},xb:function(){return e.xb()},ic:function(){return e.ic()},V:function(){return e.V()}},e.g.cmcd)}function Nb(e){return new $y(e.i,{Md:function(){return e.C?e.C.yd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},aa:e.G,Lb:e.H,onError:function(t){return Vs(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bi:function(){e.F&&e.F.update&&e.F.update()},Af:function(t,n){var o=t.startTime;t=t.endTime;var a=n.type;if(n=n.codecs.includes(","),e.C){e.C.Mg();var u=xd(e.G,a);!e.V()&&e.h.paused&&u!=null&&0<u&&e.C.yd()<u&&e.C.Ee(u)}Wr(e),o=new Map().set("start",o).set("end",t).set("contentType",a).set("isMuxed",n),e.dispatchEvent(on("segmentappended",o))},Ai:function(t,n){(n=n.Hc)&&e.Zc&&RE(e.Zc,n,t)},kg:function(t,n){var o=e.B;if(o.h.parseInbandPsshEnabled&&!o.F&&["audio","video"].includes(t)){t=new _g(Me(n)),n=0;for(var a=T(t.data),u=a.next();!u.done;u=a.next())n+=u.value.length;if(n==0)o=Promise.resolve();else{for(n=new Uint8Array(n),a=0,t=T(t.data),u=t.next();!u.done;u=t.next())u=u.value,n.set(u,a),a+=u.length;Qa(o,"cenc",n),o=o.l}}else o=Promise.resolve();return o},onMetadata:function(t,n,o){y1(e,t,n,o)},disableStream:function(t,n){return e.disableStream(t,n)}})}s.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=mf(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Tt("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Tt("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(Tt("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&fs(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){Tt("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var o=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+o,e.streaming.liveSync.targetLatencyTolerance=o}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Tt("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Tt("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Tt("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Tt("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Tt("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Tt("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Tt("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Tt("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Tt("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=vr(this.g,e,Qo(this)),S1(this),n};function S1(e){if(e.be=new ud(e.g,e.fa,e.B),e.F){var t=Po(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.F.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=bo&&Qg(e.be,e.i)&&qi(e)}catch(u){Vs(e,u)}e.o&&Yr(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||zs(e)}if(e.H&&(e.H.Pf(e.g.streaming.forceHTTP),e.H.Qf(e.g.streaming.forceHTTPS)),e.G)if(e.G.configure(e.g.mediaSource),e.G.fa=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.bg!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):Tt("Text displayer w/ configure",'Text displayer should have a "configure" method!');var o=e.G,a=o.F;o.F=n,a&&(n.setTextVisibility(a.isTextVisible()),a.destroy()),o.g&&(o.g.j=n),e.bg=t,e.j&&(t=e.j,(n=t.i.get(Rt))&&Ds(t,n.stream,!0,0,!0))}else t=e.G.F,t.configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),_1(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),yg(e.L,t,Math.min(.5,t/2))),e.i&&op(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}s.getConfiguration=function(){var e=Qo(this);return vr(e,this.g,Qo(this)),e},s.Ag=function(){var e=Qo(this);return vr(e,this.g,Qo(this)),Xy(this.g,Qo(this))},s.vg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ob().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},s.Ni=function(){for(var e in this.g)delete this.g[e];vr(this.g,Qo(this),Qo(this)),S1(this)},s.yg=function(){return this.l},s.hf=function(){return this.i?this.i.type:null},s.Uh=function(){return this.h},s.xb=function(){return this.H},s.Dc=function(){return this.da},s.ug=function(){return this.A?this.A:null},s.V=function(){return this.i?this.i.presentationTimeline.V():this.h&&this.h.src?this.h.duration==1/0:!1},s.kc=function(){return this.i?this.i.presentationTimeline.kc():!1},s.ki=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},s.Ob=function(){if(this.i){if(!this.Ea&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.yb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},s.hi=function(){this.V()&&(this.h.currentTime=this.Ob().end)},s.li=function(){return this.Ea},s.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},s.drmInfo=function(){return this.B?this.B.g:null},s.ad=function(){return this.B?this.B.ad():1/0},s.ff=function(){return this.B?this.B.ff():[]},s.Ld=function(){return this.B?this.B.Ld():{}},s.pf=function(){return this.L?this.L.g==ws:!1},s.eb=function(){return this.h?this.I?this.I.i:1:0},s.wd=function(e){var t=this;e==0?ze("A trick play rate of 0 is unsupported!"):(this.Fa.Ra(),this.h.paused&&this.h.play(),this.I.set(e),this.l==ii&&(this.o.playbackRateChanged(e),zy(this.j,1<Math.abs(e))),this.V()&&this.Fa.D(this.h,"timeupdate",function(){var n=t.h.currentTime,o=t.Ob(),a=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(o.end)&&t.Tc():Math.floor(n)<=Math.floor(o.start+a)&&t.Tc()}))},s.Tc=function(){var e=this.I.hc();this.l==di&&this.I.set(e),this.l==ii&&(this.I.set(e),this.o.playbackRateChanged(e),zy(this.j,!1)),this.Fa.Ra()},s.ic=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,o=T(this.i.variants),a=o.next();!a.done;a=o.next())if(a=a.value,Wa(a)){var u=vs(a);u.active=a==e,u.active||n==1||e==null||a.video!=e.video||a.audio!=e.audio||(u.active=!0),u.active&&n++,t.push(u)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(f){return Kh(f)}):[]},s.Ec=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=T(this.i.textStreams),o=n.next();!o.done;o=n.next()){o=o.value;var a=Nl(o);a.active=o==e,t.push(a)}return t}return this.h&&this.h.src&&this.h.textTracks?mu(this).map(function(u){return ag(u)}):[]},s.Oh=function(){var e=this.qd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Yh(t)})},s.Gh=function(e){var t=this,n,o,a,u;return $(function(f){return f.g==1?t.l!=ii&&t.l!=di?f.return(null):(n=t.qd,t.i&&(n=t.i.imageStreams),(o=n.find(function(h){return h.id==e}))?o.segmentIndex?f.u(2):k(f,o.createSegmentIndex(),2):f.return(null)):f.g!=4?(a=[],o.segmentIndex.Hb(function(h){var p=C1(h.tilesLayout||o.tilesLayout);if(p){p=p.rows*p.dc;for(var g=h.j-h.startTime,S=0;S<p;S++)a.push(t.Cg(e,h.startTime+g*S/p))}}),k(f,Promise.all(a),4)):(u=f.h,f.return(u.filter(function(h){return h})))})};function C1(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{dc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}s.Cg=function(e,t){var n=this,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D;return $(function(F){return F.g==1?n.l!=ii&&n.l!=di?F.return(null):(o=n.qd,n.i&&(o=n.i.imageStreams),(a=o.find(function(X){return X.id==e}))?a.segmentIndex?F.u(2):k(F,a.createSegmentIndex(),2):F.return(null)):(u=a.segmentIndex.find(t),u==null||(f=a.segmentIndex.get(u),h=C1(f.tilesLayout||a.tilesLayout),!h)?F.return(null):(p=a.width||0,g=a.height||0,S=p/h.dc,E=g/h.rows,A=h.dc*h.rows,b=f.j-f.startTime,M=f.B||b/A,_=f.startTime,B=R=0,1<A&&(N=Math.floor((t-f.startTime)/M),_=f.startTime+N*M,R=N%h.dc*S,B=Math.floor(N/h.dc)*E),H=!1,(D=f.A)&&(H=!0,E=D.height,R=D.positionX,B=D.positionY,S=D.width),F.return({segment:f,imageHeight:g,imageWidth:p,height:E,positionX:R,positionY:B,startTime:_,duration:M,uris:f.M(),width:S,sprite:H})))})},s.Yg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(o){return o.id==e.id});t&&t!=this.j.s&&(kd(this.s.h,t,!1),cf(this.j,t),If(this),this.Db=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=mu(this),t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value,qh(n)==e.id?n.mode=this.oa?"showing":"hidden":n.mode="disabled";If(this)}},s.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var o=this.i.variants.find(function(u){return u.id==e.id});if(o&&Wa(o)){var a=this.j.j;this.g.abr.enabled&&(a.video!=o.video||a.audio&&o.audio&&a.audio.language==o.audio.language&&a.audio.channelsCount==o.audio.channelsCount)&&ze("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),kf(this,o,!1,t,n),this.za=new gg(o,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Yr(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=T(t),n=t.next();!n.done;n=t.next())if(n=n.value,qh(n)==e.id){I1(this,n);break}}},s.Ih=function(){return D1(this.ic())},s.ai=function(){return D1(this.Ec())},s.Hh=function(){return Array.from(P1(this.ic()))},s.$h=function(){return Array.from(P1(this.Ec()))},s.Xg=function(e,t,n,o,a){if(n=n===void 0?0:n,o=o===void 0?0:o,a=a===void 0?"":a,this.i&&this.C){this.za=new xs(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,a),e=function(f,h){return f.video||h.video?f.video&&h.video?Math.abs((f.video.height||0)-(h.video.height||0))+Math.abs((f.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j,a=this.za.create(this.i.variants),n=null,a=T(a.values());for(var u=a.next();!u.done;u=a.next())u=u.value,Wa(u)&&(!n||e(n,t)>e(u,t))&&(n=u);n!=t&&(n?(e=vs(n),this.Mf(e,!0,o)):zs(this))}else this.h&&this.h.audioTracks&&(o=Ya(this.ic(),e,t||"",!1)[0])&&this.Mf(o)},s.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Db=e,this.pd=t||"",this.od=n,(e=Ya(this.i.textStreams,this.Db,this.pd,this.od)[0]||null)&&e!=this.j.s&&(kd(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.qf())&&(cf(this.j,e),If(this))):(e=Ya(this.Ec(),e,t||"",n)[0])&&this.Yg(e)},s.Ti=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var o=null,a=T(this.i.variants),u=a.next();!u.done;u=a.next())if(u=u.value,u.audio.label==e){o=u;break}o!=null&&(this.za=new xs(o.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),zs(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=T(n),o=n.next();!o.done;o=n.next())o=o.value,o.label==e&&(t=o);t&&I1(this,t)}},s.qf=function(){var e=this.oa;return this.G&&this.l==ii?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?mu(this).some(function(t){return t.mode=="showing"}):e},s.wg=function(){return this.h&&this.h.src&&this.h.textTracks?T1(this).map(function(e){return ag(e)}):[]},s.Kh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=$t(e),n=T1(this).filter(function(h){return $t(h.language)==t});if(!n||!n.length)return[];e=[];var o=new Set;n=T(n);for(var a=n.next();!a.done;a=n.next())if((a=a.value)&&a.cues){a=T(a.cues);for(var u=a.next();!u.done;u=a.next()){var f=u.value;(u=f.id)&&u!=""||(u=f.startTime+"-"+f.endTime+"-"+f.text),f={id:u,title:f.text,startTime:f.startTime,endTime:f.endTime},o.has(u)||(e.push(f),o.add(u))}}return e};function mu(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function Ub(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function T1(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}s.eh=function(e){if(e=!!e,this.oa!=e){if(this.oa=e,this.l==ii)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=Ya(this.i.textStreams,this.Db,this.pd,this.od),0<e.length&&(cf(this.j,e[0]),If(this))):BE(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=mu(this);t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}R1(this)}},s.Wh=function(){if(this.C)var e=this.C.yd();else{if(this.pa==null)return new Date;e=this.pa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},s.Bg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},s.Od=function(){return this.V()&&this.i?this.i.presentationTimeline.Od():null},s.wb=function(){if(this.l==ii)return this.G.wb();var e={total:[],audio:[],video:[],text:[]};return this.l==di&&(e.total=yr(this.h.buffered)),e},s.getStats=function(){if(this.l!=ii&&this.l!=di)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};bf(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.V()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.U=this.C.fg(),this.s.Z=this.C.gg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var o=Number(n.totalVideoFrames);t.R=Number(n.droppedVideoFrames),t.N=o,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==ii){if(n=this.j.j,t=this.j.s,n){o=this.I?this.I.i:1;var a=o*n.bandwidth;t&&t.bandwidth&&(a+=o*t.bandwidth),this.s.B=a}n&&n.video&&(t=this.s,o=n.video.height||NaN,t.o=n.video.width||NaN,t.l=o),this.V()&&(n=this.Bg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==di&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var u=this.s;e=u.o,n=u.l,t=u.B,o=u.N,a=u.R;var f=u.L,h=u.Z,p=u.U,g=u.A,S=u.i,E=u.m,A=u.H,b=u.j,M=Ad(u.g,"playing"),_=Ad(u.g,"paused"),R=Ad(u.g,"buffering"),B=u.s,N=u.C,H=u.I,D=u.Hg,F=u.Cd,X=u.K,J=u.G,ie=u.F,de=bE(u.g),oe=[];u=T(u.h.g);for(var se=u.next();!se.done;se=u.next())se=se.value,oe.push({timestamp:se.timestamp,id:se.id,type:se.type,fromAdaptation:se.fromAdaptation,bandwidth:se.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:o,droppedFrames:a,corruptedFrames:f,stallsDetected:h,gapsJumped:p,estimatedBandwidth:g,completionPercent:S,loadLatency:E,manifestTimeSeconds:A,drmTimeSeconds:b,playTime:M,pauseTime:_,bufferingTime:R,licenseTime:B,liveLatency:N,maxSegmentDuration:H,manifestSizeBytes:D,bytesDownloaded:F,nonFatalErrorCount:X,manifestPeriodCount:J,manifestGapCount:ie,stateHistory:de,switchHistory:oe}},s.uh=function(e,t,n,o,a,u,f){f=f===void 0?!1:f;var h=this,p,g,S,E,A,b,M,_,R,B,N,H;return $(function(D){switch(D.g){case 1:if(h.l!=ii&&h.l!=di)throw new ne(1,7,7004);if(n!="subtitles"&&n!="captions"&&ze("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),o){D.u(2);break}return k(D,Jd(h,e),3);case 3:o=D.h;case 2:if(p=[],h.A&&(p=h.A.getCuePoints()),h.l!=di){D.u(4);break}return f&&(n="forced"),k(D,E1(h,e,t,n,o,u||"",p),5);case 5:if(g=$t(t),S=h.Ec(),E=S.find(function(F){return $t(F.language)==g&&F.label==(u||"")&&F.kind==n}))return qi(h),D.return(E);throw new ne(1,2,2012);case 4:if(A=Mn,b=h.h.duration,h.i&&(b=h.i.presentationTimeline.getDuration()),b==1/0)throw new ne(1,4,4033);if(!p.length){D.u(6);break}return k(D,ep(h,e,h.H,h.g.streaming.retryParameters),7);case 7:M=D.h,_=b1(h,M,o,p),R=new Blob([_],{type:"text/vtt"}),e=rf(R),o="text/vtt";case 6:if(B={id:h.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:bd(0,b,[e]),mimeType:o||"",codecs:a||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:u||null,type:A.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Rn(o||"",a||"")])},N=Rn(B.mimeType,B.codecs),H=Ha(N),!H)throw new ne(2,2,2014,o);return h.i.textStreams.push(B),qi(h),D.return(Nl(B))}})},s.vh=function(e,t){var n=this,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N;return $(function(H){switch(H.g){case 1:if(n.l!=ii&&n.l!=di)throw new ne(1,7,7004);if(t){H.u(2);break}return k(H,Jd(n,e),3);case 3:t=H.h;case 2:if(t!="text/vtt")throw new ne(1,2,2017,e);if(o=Mn,a=n.h.duration,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new ne(1,4,4045);return k(H,ep(n,e,n.H,n.g.streaming.retryParameters),4);case 4:if(u=H.h,f=_n[t],!f)throw new ne(2,2,2014,t);for(h=f(),p={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},g=Me(u),S=h.parseMedia(g,p,e),E=[],A=T(S),b=A.next(),M={};!b.done;M={ye:void 0,zc:void 0},b=A.next())M.zc=b.value,M.ye=null,_=function(D){return function(){return D.ye==null&&(D.ye=Wn([e],[D.zc.payload])),D.ye||[]}}(M),R=new at(M.zc.startTime,M.zc.endTime,_,0,null,null,0,0,1/0),M.zc.payload.includes("#xywh")&&(B=M.zc.payload.split("#xywh=")[1].split(","),B.length===4&&R.fh({height:parseInt(B[3],10),positionX:parseInt(B[0],10),positionY:parseInt(B[1],10),width:parseInt(B[2],10)})),E.push(R);return N={id:n.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pt(E),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:o.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Rn(t||"","")])},n.l==di?n.qd.push(N):n.i.imageStreams.push(N),qi(n),H.return(Yh(N))}})},s.th=function(e,t,n){var o=this,a,u,f,h;return $(function(p){switch(p.g){case 1:if(o.l!=ii&&o.l!=di)throw new ne(1,7,7004);if(n){p.u(2);break}return k(p,Jd(o,e),3);case 3:n=p.h;case 2:return a=[],o.A&&(a=o.A.getCuePoints()),k(p,E1(o,e,t,"chapters",n,"",a),4);case 4:if(u=p.h,f=o.wg(),h=f.find(function(g){return g.language==t}),!h){p.u(5);break}return k(p,new Promise(function(g,S){o.m.ha(u,"load",g),o.m.ha(u,"error",function(){S(new ne(1,2,2015))})}),6);case 6:return qi(o),p.return(h);case 5:throw new ne(1,2,2012)}})};function Jd(e,t){var n;return $(function(o){switch(o.g){case 1:return Y(o,2),k(o,Vd(t,e.H,e.g.streaming.retryParameters),4);case 4:n=o.h,K(o,3);break;case 2:ee(o);case 3:if(n)return o.return(n);throw new ne(1,2,2011,t)}})}function E1(e,t,n,o,a,u,f){var h,p,g,S;return $(function(E){if(E.g==1)return a!="text/vtt"||f.length?k(E,ep(e,t,e.H,e.g.streaming.retryParameters),3):E.u(2);E.g!=2&&(h=E.h,p=b1(e,h,a,f),g=new Blob([p],{type:"text/vtt"}),t=rf(g),a="text/vtt"),S=document.createElement("track");var A=e.N,b=t;try{if(A.g.enabled){var M=Xd(A);M.ot=Yd,M.su=!0;var _=xf(M),R=Wd(b,_)}else R=b}catch(B){Oe("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",B),R=b}return S.src=R,S.label=u,S.kind=o,S.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(S),E.return(S)})}function ep(e,t,n,o){var a,u,f;return $(function(h){if(h.g==1){a=To,u=Bn([t],o),u.method="GET";var p=e.N;try{p.g.enabled&&Fs(p,u,{ot:Yd,su:!0})}catch(g){Oe("CMCD_TEXT_ERROR","Could not generate text CMCD data.",g)}return k(h,n.request(a,u).promise,2)}return f=h.h,h.return(f.data)})}function b1(e,t,n,o){var a=_n[n];if(a)return n=a(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Me(t),t=n.parseMedia(t,e,null),pb(t,o);throw new ne(2,2,2014,n)}s.Yi=function(e,t){this.fa.width=e,this.fa.height=t},s.If=function(e){if(this.l==ii){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=T(t.i.values()),o=n.next();!o.done;o=n.next())o=o.value,!o.fd||o.Qa||o.sb||(o.fd=!1,Xi(t,o,e));t=!0}}else t=!1;return t},s.gf=function(){return ze("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},s.Rh=function(){return this.ab};function Qo(e){var t=Ns();return t.streaming.failureCallback=function(n){if(e.V()){var o=null;n.code==1001||n.code==1002?(o=1,e.g.streaming.lowLatencyMode&&(o=.1)):n.code==1003&&(o=.1),o!=null&&(n.severity=1,e.If(o))}},t.textDisplayFactory=function(){if(e.de){var n=e.getConfiguration();return new bi(e.h,e.de,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new Ti(e.h,"Shaka Player TextTrack"):new Ei},t}s.ih=function(e){this.de=e};function Bb(e,t){for(var n=new Set,o=T(t.textStreams),a=o.next();!a.done;a=o.next())a=a.value,a.mimeType!="application/cea-608"&&a.mimeType!="application/cea-708"||n.add(a.originalId);for(o=T(t.variants),a=o.next();!a.done;a=o.next())if((a=a.value.video)&&a.closedCaptions){for(var u=T(a.closedCaptions.keys()),f=u.next();!f.done;f=u.next())if(f=f.value,!n.has(f)){var h=f.startsWith("CC")?"application/cea-608":"application/cea-708",p=new gn,g=a.closedCaptions.get(f);h={id:e.cg++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:p,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:g,originalLanguage:g,label:null,type:Rt,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Rn(h,"")])},t.textStreams.push(h),n.add(f)}}}function jb(e,t){var n,o,a,u,f;return $(function(h){return h.g==1?(n=e.audio,o=e.video,a=function(p,g){var S,E,A;return $(function(b){return b.g==1?p?k(b,p.createSegmentIndex(),2):b.return(null):(E=(S=p.segmentIndex.Ib(g))?S.next().value:null,E?(A=E.startTime,b.return(A)):b.return(null))})},k(h,a(n,t),2)):h.g!=3?(u=h.h,k(h,a(o,t),3)):(f=h.h,f!=null&&u!=null?h.return(Math.max(f,u)):f!=null?h.return(f):u!=null?h.return(u):h.return(t))})}function tp(e){var t=e.pf();if(e.s&&e.L&&e.C){var n=e.I;if(n.j=t,Py(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),bf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.ze<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var o=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.ze*a,n-o))}}t=new Map().set("buffering",t),e.dispatchEvent(on("buffering",t))}function A1(e){var t=e.h.playbackRate;t!=0&&(e.I&&e.I.set(t),t=on("ratechange"),e.dispatchEvent(t))}function bf(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==ws?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var o=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:o,duration:0},t=!0;else{var a=Date.now()/1e3;t.g.duration=a-t.g.timestamp,t.g.state==o?t=!1:(t.h.push(t.g),t.g={timestamp:a,state:o,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(on("statechanged",n)))}}function k1(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var o=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,a=e.vg();a<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=o&&e.wd(o):a==1&&t!==e.I.hc()&&e.Tc()}if(n&&(n=e.Ob(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){o=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var u=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var f=e.g.streaming.liveSync.targetLatency,h=f+o,p=Math.max(0,f-o),g=e.g.streaming.liveSync.maxPlaybackRate,S=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(f=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?h=e.i.serviceDescription.targetLatency+o:e.i.serviceDescription.maxLatency!=null&&(h=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?p=Math.max(0,e.i.serviceDescription.targetLatency-o):e.i.serviceDescription.minLatency!=null&&(p=e.i.serviceDescription.minLatency),g=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,S=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||typeof f!="number"||(e.R=f);var E=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;a&&e.Da&&e.R!==null&&typeof f=="number"&&e.ze<E&&Date.now()-e.Da>1e3*u&&(u=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(f-u)/2,u+o),e.Da=Date.now()),a&&e.R!==null&&(h=e.R+o,p=e.R-o),f=n.end-e.h.currentTime,o=0,e.l==di&&(a=e.h.buffered,0<a.length&&(o=a.end(a.length-1),o=Math.max(g,o-n.end))),n=e.g.streaming.liveSync.panicMode,a=1e3*e.g.streaming.liveSync.panicThreshold,u=Date.now()-e.L.h,n&&!S&&(S=e.g.streaming.liveSync.minPlaybackRate),n&&S&&u<=a?t!=S&&e.wd(S):h&&g&&f-o>h?(t!=g&&e.wd(g),e.Da=null):p&&S&&f-o<p?(t!=S&&e.wd(S),e.Da=null):t!==e.I.hc()&&(e.Tc(),e.Da=Date.now())}}function Af(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.U)?(e.U=n,t=!0):(n=Math.max(e.U,n),e.U!=n&&(e.U=n,t=!0))),t){var o;e.U==0?o=on("started"):e.U==25?o=on("firstquartile"):e.U==50?o=on("midpoint"):e.U==75?o=on("thirdquartile"):e.U==100&&(o=on("complete")),o&&e.dispatchEvent(o)}}}function Yr(e){try{Zg(e.be,e.i)}catch(n){return Vs(e,n),!1}var t=Ul(e.i.variants);return t=e.za.create(t),e.o.setVariants(Array.from(t.values())),!0}function zs(e,t,n,o,a){t=t===void 0?!0:t,n=n===void 0?0:n,o=o===void 0?!1:o,a=a===void 0?!0:a;var u;(u=Yr(e)?e.o.chooseVariant():null)&&kf(e,u,a,t,n,o)}function kf(e,t,n,o,a,u){u=u===void 0?!1:u;var f=e.j.j;if(t==f)o&&Vy(e.j,t,o,a,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Vy(e.j,t,o,a,u,n),o=null,f&&(o=vs(f)),t=vs(t),n?(n=new Map().set("oldTrack",o).set("newTrack",t),e.K&&dy(e.K,t,e.hf()),n=on("adaptation",n),Hs(e,n)):M1(e,o,t)}}function I1(e,t){var n=Array.from(e.h.audioTracks).find(function(o){return o.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Kh(n),t=Kh(t),M1(e,n,t))}function Fb(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var o=$t(e.g.preferredTextLanguage);return n=$t(n.language),e.g.autoShowText==2?gs(n,o):e.g.autoShowText==3?t?(e=$t(t.language),gs(n,o)&&!gs(e,n)):!1:(ze("Invalid autoShowText setting!"),!1)}function qi(e){var t=on("trackschanged");Hs(e,t)}function M1(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&dy(e.K,n,e.hf()),n=on("variantchanged",t),Hs(e,n)}function If(e){var t=on("textchanged");Hs(e,t)}function R1(e){var t=on("texttrackvisibility");Hs(e,t)}function _1(e){e.g.abr.enabled||np(e);var t=new Map().set("newStatus",e.g.abr.enabled);Hs(e,on("abrstatuschanged",t))}function np(e,t){if(t=t===void 0?!0:t,e.l==ii){e.je.stop();for(var n=T(e.i.variants),o=n.next();!o.done;o=n.next())o.value.disabledUntilTime=0;t&&Yr(e)}}s.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===bo||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(u){var f=u[e.type];return f&&f.id!==e.id&&!u.disabledUntilTime?e.type=="audio"?e.language===f.language:!0:!1})){for(var n=T(this.i.variants),o=n.next();!o.done;o=n.next()){o=o.value;var a=o[e.type];a&&a.id===e.id&&(o.disabledUntilTime=Date.now()/1e3+t)}return this.je.Sa(1),t=this.wb().video.reduce(function(u,f){return u+f.end-f.start},0),zs(this,!1,t,!0,!1),!0}return!1};function Vs(e,t){var n,o,a;return $(function(u){switch(u.g){case 1:if(e.l==bo)return u.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Ea&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){u.u(2);break}return Y(u,3),k(u,KE(e.j),5);case 5:o=u.h,n=!o,K(u,2);break;case 3:ee(u),n=!0;case 2:if(!n)return u.return();t.severity===2&&np(e,!1),a=on("error",new Map().set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),q(u)}})}function gu(e,t,n,o){o=o===void 0?e:o,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),o.dispatchEvent(on(t,e))}function L1(e,t,n,o){o=o===void 0?!1:o,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(on(o?"audiotrackchanged":"mediaqualitychanged",t))}function ip(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new ne(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new ne(2,3,3016,n,t,e.h.error.message))}function op(e,t,n){0<t&&(e.V()||e.hh(t)),t=e.getDuration(),n<t&&(e.V()||e.Za(n))}function Hs(e,t){$(function(n){if(n.g==1)return k(n,Promise.resolve(),2);e.l!=bo&&e.dispatchEvent(t),q(n)})}function P1(e){var t=new Set;e=T(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add($t(n.language)):t.add("und");return t}function D1(e){var t=new Map,n=new Map;e=T(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var a="und",u=[];o.language&&(a=$t(o.language)),o.type=="variant"?u=o.audioRoles:u=o.roles,u&&u.length||(u=[""]),t.has(a)||t.set(a,new Set),u=T(u);for(var f=u.next();!f.done;f=u.next())f=f.value,t.get(a).add(f),o.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(f,o.label))}var h=[];return t.forEach(function(p,g){p=T(p);for(var S=p.next();!S.done;S=p.next()){S=S.value;var E=null;n.has(g)&&n.get(g).has(S)&&(E=n.get(g).get(S)),h.push({language:g,role:S,label:E})}}),h}me("shaka.Player",ve),ve.prototype.setVideoContainer=ve.prototype.ih,ve.prototype.getManifestParserFactory=ve.prototype.Rh,ve.prototype.getManifest=ve.prototype.gf,ve.prototype.retryStreaming=ve.prototype.If,ve.prototype.setMaxHardwareResolution=ve.prototype.Yi,ve.prototype.addChaptersTrack=ve.prototype.th,ve.prototype.addThumbnailsTrack=ve.prototype.vh,ve.prototype.addTextTrackAsync=ve.prototype.uh,ve.prototype.getStats=ve.prototype.getStats,ve.prototype.getBufferedInfo=ve.prototype.wb,ve.prototype.getSegmentAvailabilityDuration=ve.prototype.Od,ve.prototype.getPresentationStartTimeAsDate=ve.prototype.Bg,ve.prototype.getPlayheadTimeAsDate=ve.prototype.Wh,ve.prototype.setTextTrackVisibility=ve.prototype.eh,ve.prototype.getChapters=ve.prototype.Kh,ve.prototype.getChaptersTracks=ve.prototype.wg,ve.prototype.isTextTrackVisible=ve.prototype.qf,ve.prototype.selectVariantsByLabel=ve.prototype.Ti,ve.prototype.selectTextLanguage=ve.prototype.Lf,ve.prototype.selectAudioLanguage=ve.prototype.Xg,ve.prototype.getTextLanguages=ve.prototype.$h,ve.prototype.getAudioLanguages=ve.prototype.Hh,ve.prototype.getTextLanguagesAndRoles=ve.prototype.ai,ve.prototype.getAudioLanguagesAndRoles=ve.prototype.Ih,ve.prototype.selectVariantTrack=ve.prototype.Mf,ve.prototype.selectTextTrack=ve.prototype.Yg,ve.prototype.getThumbnails=ve.prototype.Cg,ve.prototype.getAllThumbnails=ve.prototype.Gh,ve.prototype.getImageTracks=ve.prototype.Oh,ve.prototype.getTextTracks=ve.prototype.Ec,ve.prototype.getVariantTracks=ve.prototype.ic,ve.prototype.cancelTrickPlay=ve.prototype.Tc,ve.prototype.trickPlay=ve.prototype.wd,ve.prototype.getPlaybackRate=ve.prototype.eb,ve.prototype.isBuffering=ve.prototype.pf,ve.prototype.getKeyStatuses=ve.prototype.Ld,ve.prototype.getActiveSessionsMetadata=ve.prototype.ff,ve.prototype.getExpiration=ve.prototype.ad,ve.prototype.drmInfo=ve.prototype.drmInfo,ve.prototype.keySystem=ve.prototype.keySystem,ve.prototype.isFullyLoaded=ve.prototype.li,ve.prototype.goToLive=ve.prototype.hi,ve.prototype.seekRange=ve.prototype.Ob,ve.prototype.isAudioOnly=ve.prototype.ki,ve.prototype.isInProgress=ve.prototype.kc,ve.prototype.isLive=ve.prototype.V,ve.prototype.getAdManager=ve.prototype.ug,ve.prototype.getAssetUri=ve.prototype.Dc,ve.prototype.getNetworkingEngine=ve.prototype.xb,ve.prototype.getMediaElement=ve.prototype.Uh,ve.prototype.getManifestType=ve.prototype.hf,ve.prototype.getLoadMode=ve.prototype.yg,ve.prototype.resetConfiguration=ve.prototype.Ni,ve.prototype.getBufferFullness=ve.prototype.vg,ve.prototype.getNonDefaultConfiguration=ve.prototype.Ag,ve.prototype.getConfiguration=ve.prototype.getConfiguration,ve.prototype.configure=ve.prototype.configure,ve.prototype.releaseAllMutexes=ve.prototype.Ji,ve.prototype.destroyAllPreloads=ve.prototype.Qe,ve.prototype.preload=ve.prototype.preload,ve.prototype.detachAndSavePreload=ve.prototype.qg,ve.prototype.unloadAndSavePreload=ve.prototype.aj,ve.prototype.load=ve.prototype.load,ve.prototype.updateStartTime=ve.prototype.ej,ve.prototype.unload=ve.prototype.bc,ve.prototype.detach=ve.prototype.detach,ve.prototype.attachCanvas=ve.prototype.zh,ve.prototype.attach=ve.prototype.Rb,ve.probeSupport=function(e){e=e===void 0?!0:e;var t,n,o,a,u,f,h;return $(function(p){switch(p.g){case 1:if(t={},!e){p.u(2);break}return k(p,$T(),3);case 3:t=p.h;case 2:var g={};if(wo())for(var S in ho)g[S]=!0;S=T(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var E=S.next();!E.done;E=S.next())E=E.value,g[E]=wo()?!!ho[E]:$a(E);for(n=g,S='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(L(dr)),g={},S=T(S),E=S.next();!E.done;E=S.next()){E=E.value,g[E]=Ha(E)?!0:wo()?Ne(E)||!!Hi(E):$a(E);var A=E.split(";")[0];g[A]=g[A]||g[E]}return o=g,k(p,zm(),4);case 4:a=p.h,u={manifest:n,media:o,drm:t,hardwareResolution:a},f=sp;for(h in f)u[h]=f[h]();return p.return(u)}})},ve.isBrowserSupported=function(){if(d.Promise||ze("A Promise implementation or polyfill is required"),!(d.Promise&&d.Uint8Array&&Array.prototype.forEach)||Xt("Trident/"))return!1;var e=cs();return e&&9>e||!(d.MediaKeys&&d.navigator&&d.navigator.requestMediaKeySystemAccess&&d.MediaKeySystemAccess&&d.MediaKeySystemAccess.prototype.getConfiguration)?!1:wo()?!0:$a("application/x-mpegurl")},ve.setAdManagerFactory=function(e){Mf=e},ve.registerSupportPlugin=function(e,t){sp[e]=t},ve.prototype.destroy=ve.prototype.destroy;var bo=0,rp=1,ii=2,di=3;ve.LoadMode={DESTROYED:bo,NOT_LOADED:rp,MEDIA_SOURCE:ii,SRC_EQUALS:di},ve.version="v4.10.12";var O1=["4","10"];li=new function(e){this.g=e,this.i=Vt,this.h=un}(new Ft(Number(O1[0]),Number(O1[1])));var sp={},Mf=null;function N1(){this.g=[],this.i=this.l=this.j=this.h=0}function $b(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function pt(e,t,n){var o=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Ae,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){o.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){o.i=!1})}s=pt.prototype,s.needsSkipUI=function(){return!1},s.getDuration=function(){return this.g.getDuration()},s.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},s.getRemainingTime=function(){return this.h.getRemainingTime()},s.isPaused=function(){return this.i},s.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},s.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},s.canSkipNow=function(){return this.h.getAdSkippableState()},s.skip=function(){return this.h.skip()},s.pause=function(){return this.h.pause()},s.play=function(){return this.h.resume()},s.getVolume=function(){return this.h.getVolume()},s.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},s.isMuted=function(){return this.h.getVolume()==0},s.isLinear=function(){return this.g.isLinear()},s.resize=function(e,t){var n=!1,o=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:o.webkitSupportsFullscreen&&(n=o.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},s.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},s.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},s.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},s.getTitle=function(){return this.g.getTitle()},s.getDescription=function(){return this.g.getDescription()},s.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},s.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},s.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},s.getAdId=function(){return this.g.getAdId()},s.getCreativeAdId=function(){return this.g.getCreativeAdId()},s.getAdvertiserName=function(){return this.g.getAdvertiserName()},s.getMediaUrl=function(){return this.g.getMediaUrl()},s.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},s.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},s.release=function(){this.h=this.g=null},me("shaka.ads.ClientSideAd",pt),pt.prototype.release=pt.prototype.release,pt.prototype.getPodIndex=pt.prototype.getPodIndex,pt.prototype.getTimeOffset=pt.prototype.getTimeOffset,pt.prototype.getMediaUrl=pt.prototype.getMediaUrl,pt.prototype.getAdvertiserName=pt.prototype.getAdvertiserName,pt.prototype.getCreativeAdId=pt.prototype.getCreativeAdId,pt.prototype.getAdId=pt.prototype.getAdId,pt.prototype.getVastMediaWidth=pt.prototype.getVastMediaWidth,pt.prototype.getVastMediaHeight=pt.prototype.getVastMediaHeight,pt.prototype.getVastMediaBitrate=pt.prototype.getVastMediaBitrate,pt.prototype.getDescription=pt.prototype.getDescription,pt.prototype.getTitle=pt.prototype.getTitle,pt.prototype.getPositionInSequence=pt.prototype.getPositionInSequence,pt.prototype.getSequenceLength=pt.prototype.getSequenceLength,pt.prototype.setMuted=pt.prototype.setMuted,pt.prototype.resize=pt.prototype.resize,pt.prototype.isLinear=pt.prototype.isLinear,pt.prototype.isMuted=pt.prototype.isMuted,pt.prototype.setVolume=pt.prototype.setVolume,pt.prototype.getVolume=pt.prototype.getVolume,pt.prototype.play=pt.prototype.play,pt.prototype.pause=pt.prototype.pause,pt.prototype.skip=pt.prototype.skip,pt.prototype.canSkipNow=pt.prototype.canSkipNow,pt.prototype.getTimeUntilSkippable=pt.prototype.getTimeUntilSkippable,pt.prototype.isSkippable=pt.prototype.isSkippable,pt.prototype.isPaused=pt.prototype.isPaused,pt.prototype.getRemainingTime=pt.prototype.getRemainingTime,pt.prototype.getMinSuggestedDuration=pt.prototype.getMinSuggestedDuration,pt.prototype.getDuration=pt.prototype.getDuration,pt.prototype.needsSkipUI=pt.prototype.needsSkipUI;function tn(){}me("shaka.ads.Utils",tn),tn.ADS_LOADED="ads-loaded",tn.AD_STARTED="ad-started",tn.AD_FIRST_QUARTILE="ad-first-quartile",tn.AD_MIDPOINT="ad-midpoint",tn.AD_THIRD_QUARTILE="ad-third-quartile",tn.AD_COMPLETE="ad-complete",tn.AD_STOPPED="ad-stopped",tn.AD_SKIPPED="ad-skipped",tn.AD_VOLUME_CHANGED="ad-volume-changed",tn.AD_MUTED="ad-muted",tn.AD_PAUSED="ad-paused",tn.AD_RESUMED="ad-resumed",tn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",tn.CUEPOINTS_CHANGED="ad-cue-points-changed",tn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",tn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",tn.AD_CLICKED="ad-clicked",tn.AD_PROGRESS="ad-progress",tn.AD_BUFFERING="ad-buffering",tn.AD_IMPRESSION="ad-impression",tn.AD_DURATION_CHANGED="ad-duration-changed",tn.AD_CLOSED="ad-closed",tn.AD_LOADED="ad-loaded",tn.ALL_ADS_COMPLETED="all-ads-completed",tn.AD_LINEAR_CHANGED="ad-linear-changed",tn.AD_METADATA="ad-metadata",tn.AD_RECOVERABLE_ERROR="ad-recoverable-error",tn.AD_ERROR="ad-error",tn.AD_BREAK_READY="ad-break-ready",tn.AD_INTERACTION="ad-interaction",tn.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",tn.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",tn.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Rf(e,t,n,o,a){var u=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=a,this.j=null,this.h=new Ae,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.12"),this.g=null,this.B=o||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){zb(u,f)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){U1(u,f)}),this.h.D(this.i,"ended",function(){u.m.contentComplete()}),this.h.ha(this.i,"play",function(){u.F=!0})}Rf.prototype.configure=function(e){this.o=e},Rf.prototype.stop=function(){this.g&&this.g.stop(),this.s&&Bs(this.s)},Rf.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function U1(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new je("ad-error",t)),Lf(e,null),e.l(new je("ad-cue-points-changed",new Map().set("cuepoints",[])))}function zb(e,t){if(e.l(new je("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new je("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var o=e.g.getCuePoints();if(o.length){t=[],o=T(o);for(var a=o.next();!a.done;a=o.next())t.push({start:a.value,end:null});e.l(new je("ad-cue-points-changed",new Map().set("cuepoints",t)))}Vb(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,_f(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,_f(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in d?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,_f(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,_f(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.ha(e.i,"play",function(){e.F=!0,e.g.start()})}catch{Lf(e,null)}}function _f(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function Vb(e){function t(n,o){n=new Map().set("originalEvent",n),e.l(new je(o,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){U1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){B1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){B1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Lf(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Lf(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function B1(e,t){var n=t.getAd();n?(e.j=new pt(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new je("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new je("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):ze("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Lf(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new je("ad-content-resume-requested")),e.l(new je("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function mt(e,t,n,o,a){this.g=e,this.h=t,this.j=n,this.l=o,this.i=a}s=mt.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},s.isPaused=function(){return this.g.paused},s.isSkippable=function(){return this.h},s.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.j()},s.pause=function(){return this.g.pause()},s.play=function(){return this.g.play()},s.getVolume=function(){return this.g.volume},s.setVolume=function(e){this.g.volume=e},s.isMuted=function(){return this.g.muted},s.isLinear=function(){return!0},s.resize=function(){},s.setMuted=function(e){this.g.muted=e},s.getSequenceLength=function(){return this.l},s.getPositionInSequence=function(){return this.i},s.getTitle=function(){return""},s.getDescription=function(){return""},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return 0},s.getVastMediaWidth=function(){return 0},s.getAdId=function(){return""},s.getCreativeAdId=function(){return""},s.getAdvertiserName=function(){return""},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){return 0},s.getPodIndex=function(){return 0},s.release=function(){this.g=null},me("shaka.ads.InterstitialAd",mt),mt.prototype.release=mt.prototype.release,mt.prototype.getPodIndex=mt.prototype.getPodIndex,mt.prototype.getTimeOffset=mt.prototype.getTimeOffset,mt.prototype.getMediaUrl=mt.prototype.getMediaUrl,mt.prototype.getAdvertiserName=mt.prototype.getAdvertiserName,mt.prototype.getCreativeAdId=mt.prototype.getCreativeAdId,mt.prototype.getAdId=mt.prototype.getAdId,mt.prototype.getVastMediaWidth=mt.prototype.getVastMediaWidth,mt.prototype.getVastMediaHeight=mt.prototype.getVastMediaHeight,mt.prototype.getVastMediaBitrate=mt.prototype.getVastMediaBitrate,mt.prototype.getDescription=mt.prototype.getDescription,mt.prototype.getTitle=mt.prototype.getTitle,mt.prototype.getPositionInSequence=mt.prototype.getPositionInSequence,mt.prototype.getSequenceLength=mt.prototype.getSequenceLength,mt.prototype.setMuted=mt.prototype.setMuted,mt.prototype.resize=mt.prototype.resize,mt.prototype.isLinear=mt.prototype.isLinear,mt.prototype.isMuted=mt.prototype.isMuted,mt.prototype.setVolume=mt.prototype.setVolume,mt.prototype.getVolume=mt.prototype.getVolume,mt.prototype.play=mt.prototype.play,mt.prototype.pause=mt.prototype.pause,mt.prototype.skip=mt.prototype.skip,mt.prototype.canSkipNow=mt.prototype.canSkipNow,mt.prototype.getTimeUntilSkippable=mt.prototype.getTimeUntilSkippable,mt.prototype.isSkippable=mt.prototype.isSkippable,mt.prototype.isPaused=mt.prototype.isPaused,mt.prototype.getRemainingTime=mt.prototype.getRemainingTime,mt.prototype.getMinSuggestedDuration=mt.prototype.getMinSuggestedDuration,mt.prototype.getDuration=mt.prototype.getDuration,mt.prototype.needsSkipUI=mt.prototype.needsSkipUI;function Pf(e,t,n,o){var a=this;this.F=e,this.B=t,this.i=n,this.C=null,this.m=!0,this.s=this.i,this.g=o,this.G=new Set,this.A=new Set,this.o=new Map,this.h=new ve,up(this),this.I=new Ae,this.j=new Ae,this.H=!1,this.l=null,this.I.D(this.i,"timeupdate",function(){if(!a.H){var u=a.l==null||a.l==0;a.l=a.i.currentTime,(u=j1(a,u))&&F1(a,u,1,1,Date.now())}}),new bt(function(){var u,f,h,p,g,S,E,A,b,M;return $(function(_){switch(_.g){case 1:if(!a.A.size||a.H||a.l==null){_.u(0);break}u=!1,f=Array.from(a.A),h=a.B.Ob(),p=T(f),g=p.next();case 3:if(g.done){_.u(5);break}if(S=g.value,E=S.endTime||S.startTime,!(1<=h.start-E)){A=S.startTime-a.l,0<A&&10>=A&&(a.o.has(S)||a.o.set(S,a.h.preload(S.uri))),_.u(4);break}if(!a.o.has(S)){_.u(7);break}return k(_,a.o.get(S),8);case 8:(b=_.h)&&b.destroy(),a.o.delete(S);case 7:M=JSON.stringify(S),a.G.has(M)&&a.G.delete(M),a.A.delete(S),u=!0;case 4:g=p.next(),_.u(3);break;case 5:u&&ap(a),q(_)}})}).Sa(1)}Pf.prototype.configure=function(e){this.F&&this.m==e.supportsMultipleMediaElements&&((this.m=!e.supportsMultipleMediaElements)?(this.s=this.i,this.C&&(this.C.parentElement&&this.F.removeChild(this.C),this.C=null)):(this.C||(e=document.createElement(this.i.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.C=e),this.s=this.C))},Pf.prototype.stop=function(){this.j&&this.j.Ra(),this.G.clear(),this.A.clear(),this.h.Qe(),this.o.clear(),this.h.detach(),this.H=!1,this.l=null},Pf.prototype.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.F&&Bs(this.F),this.h.destroy()};function Hb(e,t){var n,o,a,u,f,h,p,g;$(function(S){if(S.g==1)return e.B.yg()==di&&e.m?(ze("Unsupported interstitial when using single media element",t),S.return()):(up(e),n=!1,k(S,Gb(e,t),2));if(o=S.h,o.length)for(a=T(o),u=a.next();!u.done;u=a.next())f=u.value,h=JSON.stringify(f),e.G.has(h)||(n=!0,e.G.add(h),e.A.add(f),p=!1,t.Ab&&e.l==null?p=!0:f.startTime!=0||f.Ie?e.l!=null&&(g=t.startTime-e.l,0<g&&10>=g&&(p=!0)):p=!0,p&&(e.o.has(f)||e.o.set(f,e.h.preload(f.uri))));else ze("Unsupported interstitial",t);n&&ap(e),q(S)})}function j1(e,t,n){n=n===void 0?0:n;var o=0,a=null;if(e.A.size&&e.l!=null){var u=e.i.ended,f=Array.from(e.A).sort(function(g,S){return S.startTime-g.startTime});f=T(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var p=!1;if(t?p=h.Ab:u?p=h.nc:h.Ab||h.nc||(p=e.l-Math.round(1e3*h.startTime)/1e3,p=0<p&&(1>=p||!h.Ie)),p){if(o==n){a=h;break}o++}}}return a}function F1(e,t,n,o,a,u){u=u===void 0?0:u;var f,h,p,g,S,E,A,b,M,_,R,B,N,H;$(function(D){switch(D.g){case 1:if(f=Date.now(),!e.s.parentElement&&e.F&&e.F.appendChild(e.s),o==1&&n==1&&(n=Array.from(e.A).filter(function(F){return t.Ab?F.Ab==t.Ab:t.nc?F.nc==t.nc:.001>Math.abs(F.startTime-t.startTime)}).length),(t.once||t.Ab)&&(u++,e.A.delete(t),ap(e)),e.H=!0,!e.m||o!=1){D.u(2);break}return e.g(new je("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),h=new Wt,p=function(F){return $(function(X){if(X.g==1)return F.state!="detach"?X.u(0):Fm()?k(X,new Promise(function(J){return new bt(J).Y(.1)}),3):X.u(3);h.resolve(),e.j.jb(e.B,"onstatechange",p),q(X)})},e.j.D(e.B,"onstatechange",p),k(D,h,2);case 2:return e.m||(e.i.pause(),t.Oc!=null&&t.Oc!=0&&(e.i.currentTime+=t.Oc)),g=!1,S=null,E=function(){if(!e.m&&t.Oc==null)if(t.se&&t.endTime&&t.endTime!=1/0)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var F=Date.now();e.i.currentTime+=(F-a)/1e3,a=F}},A=function(){var F,X;return $(function(J){if(J.g==1)return E(),S&&S.stop(),(F=j1(e,t.Ab,o-u))?(e.g(new je("ad-stopped")),e.j.Ra(),F1(e,F,n,++o,a,u),J.u(0)):e.m?k(J,e.h.detach(),4):k(J,e.h.bc(),4);e.m&&(X=t.Oc,X==null&&(X=t.se&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-a)/1e3),e.g(new je("ad-content-resume-requested",new Map().set("offset",X)))),e.g(new je("ad-stopped")),e.j.Ra(),e.H=!1,e.m||(E(),e.i.ended||e.i.play()),q(J)})},b=function(F){return $(function(X){return g?X.return():(g=!0,e.g(new je("ad-error",new Map().set("originalEvent",F))),k(X,A(),0))})},M=function(){return $(function(F){if(F.g==1)return g?F.return():(g=!0,k(F,A(),2));e.g(new je("ad-complete")),q(F)})},_=function(){return $(function(F){return g?F.return():(g=!0,e.g(new je("ad-skipped")),k(F,A(),0))})},R=new mt(e.s,t.isSkippable,_,n,o),e.m||(R.setMuted(e.i.muted),R.setVolume(e.i.volume)),e.g(new je("ad-started",new Map().set("ad",R))),R.canSkipNow()&&e.g(new je("ad-skip-state-changed")),e.j.ha(e.h,"error",b),e.j.ha(e.h,"firstquartile",function(){E(),e.g(new je("ad-first-quartile"))}),e.j.ha(e.h,"midpoint",function(){E(),e.g(new je("ad-midpoint"))}),e.j.ha(e.h,"thirdquartile",function(){E(),e.g(new je("ad-third-quartile"))}),e.j.ha(e.h,"complete",M),e.j.D(e.s,"play",function(){e.g(new je("ad-resumed"))}),e.j.D(e.s,"pause",function(){e.g(new je("ad-paused"))}),e.j.D(e.s,"volumechange",function(){e.s.muted?e.g(new je("ad-muted")):e.g(new je("ad-volume-changed"))}),Y(D,4),t.Ef&&(S=new bt(function(){R.skip()}).Y(t.Ef)),up(e),k(D,e.h.Rb(e.s),6);case 6:return e.o.has(t)?k(D,e.o.get(t),10):k(D,e.h.load(t.uri),8);case 10:return B=D.h,e.o.delete(t),B?k(D,e.h.load(B),8):k(D,e.h.load(t.uri),8);case 8:N=(Date.now()-f)/1e3,e.g(new je("ads-loaded",new Map().set("loadTime",N))),e.m&&e.i.play(),K(D,0);break;case 4:H=ee(D),b(H),q(D)}})}function Gb(e,t){var n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce,_e;return $(function(Ee){switch(Ee.g){case 1:if(n=[],!t||(o=t.values.find(function(Be){return Be.key=="X-ASSET-URI"}),a=t.values.find(function(Be){return Be.key=="X-ASSET-LIST"}),!o&&!a))return Ee.return(n);if(u=t.values.find(function(Be){return Be.key=="X-RESTRICT"}),h=f=!0,u&&u.data&&(p=u.data,f=!p.includes("SKIP"),h=!p.includes("JUMP")),g=null,(S=t.values.find(function(Be){return Be.key=="X-RESUME-OFFSET"}))&&(E=S.data,g=parseFloat(E),isNaN(g)&&(g=null)),A=null,(b=t.values.find(function(Be){return Be.key=="X-PLAYOUT-LIMIT"}))&&(M=b.data,A=parseFloat(M),isNaN(A)&&(A=null)),B=R=_=!1,(N=t.values.find(function(Be){return Be.key=="CUE"}))&&(H=N.data,_=H.includes("ONCE"),R=H.includes("PRE"),B=H.includes("POST")),D=!1,(F=t.values.find(function(Be){return Be.key=="X-TIMELINE-OCCUPIES"}))?(X=F.data,D=X.includes("RANGE")):!S&&e.B.V()&&(D=!R&&!B),o){if(J=o.data,!J)return Ee.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:J,isSkippable:f,Ie:h,Oc:g,Ef:A,once:_,Ab:R,nc:B,se:D}),Ee.u(2);break}if(!a){Ee.u(2);break}return ie=a.data,ie?(de=Bn([ie],Co()),oe=e.B.xb().request(7,de),Y(Ee,4),k(Ee,oe.promise,6)):Ee.return(n);case 6:for(se=Ee.h,ue=nn(se.data),xe=JSON.parse(ue),ye=T(xe.ASSETS),Ce=ye.next();!Ce.done;Ce=ye.next())_e=Ce.value,_e.URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:_e.URI,isSkippable:f,Ie:h,Oc:g,Ef:A,once:_,Ab:R,nc:B,se:D});K(Ee,2);break;case 4:ee(Ee);case 2:return Ee.return(n)}})}function ap(e){for(var t=[],n=T(e.A),o=n.next(),a={};!o.done;a={Qb:void 0},o=n.next())o=o.value,a.Qb={start:o.startTime,end:null},o.Ab?(a.Qb.start=0,a.Qb.end=null):o.nc?(a.Qb.start=-1,a.Qb.end=null):o.se&&(a.Qb.end=o.endTime),t.find(function(u){return function(f){return u.Qb.start==f.start&&u.Qb.end==f.end}}(a))||t.push(a.Qb);e.g(new je("ad-cue-points-changed",new Map().set("cuepoints",t)))}function up(e){e.h.configure(e.B.Ag());var t=e.h.xb();t.mg(),t.ng(),Tg(e.B.xb(),t)}function xr(e){this.h=e||"",this.g=0}function Gs(e){Zo(e,/[ \t]+/gm)}function Zo(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function qr(e){return e.g==e.h.length?null:(e=Zo(e,/[^ \t\n]*/gm))?e[0]:null}function ct(e,t,n,o,a){if(this.h=e,e=this.h.skipOffset)if(e=Zo(new xr(e),Xb),e==null)e=null;else{var u=Number(e[2]),f=Number(e[3]);e=59<u||59<f?null:(Number(e[4])||0)/1e3+f+60*u+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=a,this.i=t,this.l=n,this.o=o,this.m=!1}s=ct.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){return this.h.durationInSeconds},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},s.isPaused=function(){return this.g.paused},s.isSkippable=function(){return typeof this.j=="number"},s.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},s.pause=function(){return this.g.pause()},s.play=function(){return this.g.play()},s.getVolume=function(){return this.g.volume},s.setVolume=function(e){this.g.volume=e},s.isMuted=function(){return this.g.muted},s.isLinear=function(){return this.o},s.resize=function(){},s.setMuted=function(e){this.g.muted=e},s.getSequenceLength=function(){return this.l?this.l:1},s.getPositionInSequence=function(){return this.i?this.i:1},s.getTitle=function(){return this.h.adTitle},s.getDescription=function(){return""},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return 0},s.getVastMediaWidth=function(){return 0},s.getAdId=function(){return this.h.adId},s.getCreativeAdId=function(){return this.h.creativeId},s.getAdvertiserName=function(){return""},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){return 0},s.getPodIndex=function(){return 0},s.release=function(){this.l=this.i=this.g=this.h=null},me("shaka.ads.MediaTailorAd",ct),ct.prototype.release=ct.prototype.release,ct.prototype.getPodIndex=ct.prototype.getPodIndex,ct.prototype.getTimeOffset=ct.prototype.getTimeOffset,ct.prototype.getMediaUrl=ct.prototype.getMediaUrl,ct.prototype.getAdvertiserName=ct.prototype.getAdvertiserName,ct.prototype.getCreativeAdId=ct.prototype.getCreativeAdId,ct.prototype.getAdId=ct.prototype.getAdId,ct.prototype.getVastMediaWidth=ct.prototype.getVastMediaWidth,ct.prototype.getVastMediaHeight=ct.prototype.getVastMediaHeight,ct.prototype.getVastMediaBitrate=ct.prototype.getVastMediaBitrate,ct.prototype.getDescription=ct.prototype.getDescription,ct.prototype.getTitle=ct.prototype.getTitle,ct.prototype.getPositionInSequence=ct.prototype.getPositionInSequence,ct.prototype.getSequenceLength=ct.prototype.getSequenceLength,ct.prototype.setMuted=ct.prototype.setMuted,ct.prototype.resize=ct.prototype.resize,ct.prototype.isLinear=ct.prototype.isLinear,ct.prototype.isMuted=ct.prototype.isMuted,ct.prototype.setVolume=ct.prototype.setVolume,ct.prototype.getVolume=ct.prototype.getVolume,ct.prototype.play=ct.prototype.play,ct.prototype.pause=ct.prototype.pause,ct.prototype.skip=ct.prototype.skip,ct.prototype.canSkipNow=ct.prototype.canSkipNow,ct.prototype.getTimeUntilSkippable=ct.prototype.getTimeUntilSkippable,ct.prototype.isSkippable=ct.prototype.isSkippable,ct.prototype.isPaused=ct.prototype.isPaused,ct.prototype.getRemainingTime=ct.prototype.getRemainingTime,ct.prototype.getMinSuggestedDuration=ct.prototype.getMinSuggestedDuration,ct.prototype.getDuration=ct.prototype.getDuration,ct.prototype.needsSkipUI=ct.prototype.needsSkipUI;var Xb=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function yu(e,t,n,o){this.B=e,this.K=t,this.h=n,this.l=null,this.U=NaN,this.i=o,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.o=new Ae}yu.prototype.stop=function(){for(var e=T(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.jb(t.target,t.type,t.listener);Xs(this),this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},yu.prototype.release=function(){this.stop(),this.o&&this.o.release()},yu.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(Yb(this,this.G,this.R),this.R=!1)},yu.prototype.getCuePoints=function(){for(var e=[],t=T(this.j),n=t.next();!n.done;n=t.next()){n=T(n.value.ads);for(var o=n.next();!o.done;o=n.next())o=o.value,e.push({start:o.startTimeInSeconds,end:o.startTimeInSeconds+o.durationInSeconds})}return e};function Wb(e,t,n){var o,a,u,f,h,p,g,S,E,A,b;$(function(M){if(M.g==1)return o=Bn([t],Co()),o.method="POST",n&&(a=JSON.stringify(n),o.body=So(a)),u=e.K.request(7,o),Y(M,2),k(M,u.promise,4);if(M.g!=2){if(f=M.h,h=nn(f.data),p=JSON.parse(h),p.manifestUrl&&p.trackingUrl)g=new wn(t),S=new wn(p.trackingUrl),e.G=g.resolve(S).toString(),E=Date.now()/1e3,A=E-e.U,e.i(new je("ads-loaded",new Map().set("loadTime",A))),b=new wn(p.manifestUrl),e.l.resolve(g.resolve(b).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return K(M,0)}if(ee(M),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,M.return();e.l.resolve(e.H),e.l=null,q(M)})}function Yb(e,t,n){var o,a,u,f,h,p,g,S,E,A,b,M,_,R,B;$(function(N){if(N.g==1)return o=Bn([t],Co()),a=e.K.request(7,o),Y(N,2),k(N,a.promise,4);if(N.g!=2){if(u=N.h,f=[],h=nn(u.data),p=JSON.parse(h),0<p.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(p.avails)){for(e.j=p.avails,g=T(e.j),S=g.next();!S.done;S=g.next())for(E=S.value,A=T(E.nonLinearAdsList),b=A.next();!b.done;b=A.next())for(M=b.value,_=T(M.nonLinearAdList),R=_.next();!R.done;R=_.next())B=R.value,qb(e,B);f=e.getCuePoints(),e.i(new je("ad-cue-points-changed",new Map().set("cuepoints",f)))}}else e.j.length&&e.i(new je("ad-cue-points-changed",new Map().set("cuepoints",f))),Xs(e),e.j=[];return n&&(e.I||0<f.length)&&Kb(e),K(N,0)}ee(N),q(N)})}function qb(e,t){var n,o,a,u,f,h,p;$(function(g){if(g.g==1)return!t.staticResource||(n=$1(t),e.F.get(n))?g.return():(o=Bn([t.staticResource],Co()),a=e.K.request(7,o),Y(g,2),e.F.set(n,[]),k(g,a.promise,4));if(g.g!=2)return u=g.h,f=nn(u.data),h=JSON.parse(f),p=h.apps,e.F.set(n,p),K(g,0);ee(g),e.F.delete(n),q(g)})}function $1(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function Kb(e){V1(e),e.I||(z1(e),e.o.D(e.h,"seeked",function(){z1(e)}),e.o.D(e.h,"ended",function(){Xs(e)})),e.o.D(e.h,"timeupdate",function(){V1(e)})}function z1(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,o,a=T(e.j),u=a.next();!u.done;u=a.next()){u=u.value;for(var f=T(u.ads),h=f.next();!h.done;h=f.next())if(h=h.value,!o)h.startTimeInSeconds<t&&(o=h,n=u);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>o.startTimeInSeconds+o.durationInSeconds){o=h,n=u;break}}n&&o&&!e.N.includes(o.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function V1(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var o=e.C,a=o.startTimeInSeconds+.5*o.durationInSeconds,u=o.startTimeInSeconds+.75*o.durationInSeconds;t>=o.startTimeInSeconds+.25*o.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),oi(e,"firstQuartile")):t>=a&&!e.s.includes("midpoint")?(e.s.push("midpoint"),oi(e,"midpoint")):t>=u&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),oi(e,"thirdQuartile")),o=e.g.getRemainingTime(),a=e.g.getDuration(),e.g.canSkipNow()&&0<o&&0<a&&oi(e,"skipStateChanged"),0<a&&(0>=o||o>a)&&Xs(e)}if(!e.g||!e.g.isLinear()){e:for(o=T(e.j),a=o.next();!a.done&&(a=a.value,!(e.g&&e.g.isLinear()));a=o.next())for(u=0;u<a.ads.length;u++){var f=a.ads[u],h=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&h>t){if(e.N.includes(f.adId)){if(e.h.ended)continue;e.h.currentTime=h;break e}Xs(e),e.L=a,e.g=new ct(f,u+1,a.ads.length,!0,e.h),e.C=f,u===0&&oi(e,"breakStart"),H1(e);break}}if(!e.g){for(o=T(e.j),a=o.next();!a.done&&(a=a.value,!e.g);a=o.next())for(u=0;u<a.nonLinearAdsList.length;u++)if(f=a.nonLinearAdsList[u],f.nonLinearAdList.length){h=a.startTimeInSeconds;var p=e.F.get($1(f.nonLinearAdList[0]));if(h<=t&&p&&p.length){Xs(e),h=e,p=T(p);for(var g=p.next();!g.done;g=p.next())if(g=g.value,g.data.source.length){var S=document.createElement("img");S.src=g.data.source[0].url,S.style.top=(g.placeholder.top||0)+"%",S.style.height=100-(g.placeholder.top||0)+"%",S.style.left=(g.placeholder.left||0)+"%",S.style.maxWidth=100-(g.placeholder.left||0)+"%",S.style.objectFit="contain",S.style.position="absolute",h.B.appendChild(S)}e.L=a,e.g=new ct(f,u+1,a.ads.length,!1,e.h),e.C=f,u===0&&oi(e,"breakStart"),H1(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function Xs(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?oi(e,"skip"):oi(e,"complete"),t=T(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.jb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&oi(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function H1(e){var t=!1;e.h.paused?t=!0:(oi(e,"impression"),oi(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&oi(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||oi(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(oi(e,"impression"),oi(e,"start"),t=!1):oi(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){oi(e,"pause")}});for(var n=T(e.m),o=n.next();!o.done;o=n.next())o=o.value,e.o.D(o.target,o.type,o.listener)}function oi(e,t){var n=e.C.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){n=T(n.beaconUrls);for(var o=n.next();!o.done;o=n.next())(o=o.value)&&o!=""&&(o=Bn([o],Co()),o.method="POST",e.K.request(7,o))}switch(t){case"impression":e.i(new je("ad-impression"));break;case"start":e.i(new je("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new je("ad-muted"));break;case"unmute":e.i(new je("ad-volume-changed"));break;case"resume":e.i(new je("ad-resumed"));break;case"pause":e.i(new je("ad-paused"));break;case"firstQuartile":e.i(new je("ad-first-quartile"));break;case"midpoint":e.i(new je("ad-midpoint"));break;case"thirdQuartile":e.i(new je("ad-third-quartile"));break;case"complete":e.i(new je("ad-complete")),e.i(new je("ad-stopped"));break;case"skip":e.i(new je("ad-skipped")),e.i(new je("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new je("ad-skip-state-changed"))}}function gt(e,t){this.g=e,this.i=null,this.h=t}s=gt.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){return this.i?this.i.duration:-1},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},s.isPaused=function(){return this.h.paused},s.isSkippable=function(){return this.g.isSkippable()},s.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.h.currentTime+=this.getRemainingTime()},s.pause=function(){return this.h.pause()},s.play=function(){return this.h.play()},s.getVolume=function(){return this.h.volume},s.setVolume=function(e){this.h.volume=e},s.isMuted=function(){return this.h.muted},s.isLinear=function(){return!0},s.resize=function(){},s.setMuted=function(e){this.h.muted=e},s.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},s.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},s.getTitle=function(){return this.g.getTitle()},s.getDescription=function(){return this.g.getDescription()},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},s.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},s.getAdId=function(){return this.g.getAdId()},s.getCreativeAdId=function(){return this.g.getCreativeAdId()},s.getAdvertiserName=function(){return this.g.getAdvertiserName()},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},s.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},s.release=function(){this.h=this.i=this.g=null},me("shaka.ads.ServerSideAd",gt),gt.prototype.release=gt.prototype.release,gt.prototype.getPodIndex=gt.prototype.getPodIndex,gt.prototype.getTimeOffset=gt.prototype.getTimeOffset,gt.prototype.getMediaUrl=gt.prototype.getMediaUrl,gt.prototype.getAdvertiserName=gt.prototype.getAdvertiserName,gt.prototype.getCreativeAdId=gt.prototype.getCreativeAdId,gt.prototype.getAdId=gt.prototype.getAdId,gt.prototype.getVastMediaWidth=gt.prototype.getVastMediaWidth,gt.prototype.getVastMediaHeight=gt.prototype.getVastMediaHeight,gt.prototype.getVastMediaBitrate=gt.prototype.getVastMediaBitrate,gt.prototype.getDescription=gt.prototype.getDescription,gt.prototype.getTitle=gt.prototype.getTitle,gt.prototype.getPositionInSequence=gt.prototype.getPositionInSequence,gt.prototype.getSequenceLength=gt.prototype.getSequenceLength,gt.prototype.setMuted=gt.prototype.setMuted,gt.prototype.resize=gt.prototype.resize,gt.prototype.isLinear=gt.prototype.isLinear,gt.prototype.isMuted=gt.prototype.isMuted,gt.prototype.setVolume=gt.prototype.setVolume,gt.prototype.getVolume=gt.prototype.getVolume,gt.prototype.play=gt.prototype.play,gt.prototype.pause=gt.prototype.pause,gt.prototype.skip=gt.prototype.skip,gt.prototype.canSkipNow=gt.prototype.canSkipNow,gt.prototype.getTimeUntilSkippable=gt.prototype.getTimeUntilSkippable,gt.prototype.isSkippable=gt.prototype.isSkippable,gt.prototype.isPaused=gt.prototype.isPaused,gt.prototype.getRemainingTime=gt.prototype.getRemainingTime,gt.prototype.getMinSuggestedDuration=gt.prototype.getMinSuggestedDuration,gt.prototype.getDuration=gt.prototype.getDuration,gt.prototype.needsSkipUI=gt.prototype.needsSkipUI;function G1(e,t,n,o){var a=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=o,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Ae,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new je("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(u){Qb(a,u)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){a.B.length?a.j.resolve(a.B):a.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),a.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(u){u=u.getAd(),a.m=new gt(u,a.l),a.A&&(a.m.i=a.A),a.i(new je("ad-started",new Map().set("ad",a.m))),a.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){a.s.removeAttribute("ad-active");var u=a.l.currentTime;a.o&&a.o>u&&(a.l.currentTime=a.o,a.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(u){a.A=u.getStreamData().adProgressData,a.m&&(a.m.i=a.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){a.i(new je("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){a.i(new je("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){a.i(new je("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){a.i(new je("ad-complete")),a.i(new je("ad-stopped")),a.s.removeAttribute("ad-active"),a.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){a.i(new je("ad-skipped")),a.i(new je("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(u){var f=u.getStreamData();u=[],f=T(f.cuepoints);for(var h=f.next();!h.done;h=f.next())h=h.value,u.push({start:h.start,end:h.end});a.C=u,a.i(new je("ad-cue-points-changed",new Map().set("cuepoints",u)))})}s=G1.prototype,s.configure=function(){},s.stop=function(){this.B="",this.o=null,this.C=[]},s.release=function(){this.stop(),this.h&&this.h.release()},s.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},s.getCuePoints=function(){return this.C};function Qb(e,t){e.i(new je("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var o=e.g.previousCuePointForStreamTime(n);o&&!o.played&&(e.o=n,e.l.currentTime=o.start)}})}function Ke(){Bt.call(this),this.g=this.h=this.i=this.j=null,this.m=new N1,this.o=navigator.language,this.l=null}te(Ke,Bt),s=Ke.prototype,s.setLocale=function(e){this.o=e},s.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},s.initInterstitial=function(e,t,n){var o=this;this.j&&this.j.release(),this.j=new Pf(e,t,n,function(a){return Df(o,a)}),this.j.configure(this.l)},s.initClientSide=function(e,t,n){var o=this;if(!d.google||!google.ima||!google.ima.AdsLoader)throw new ne(2,10,1e4);this.i&&this.i.release(),this.i=new Rf(e,t,this.o,n,function(a){return Df(o,a)}),this.i.configure(this.l)},s.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Bt.prototype.release.call(this)},s.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new je("ad-stopped")),this.dispatchEvent(new je("ad-content-attach-requested")),this.m=new N1},s.requestClientSideAds=function(e){if(!this.i)throw new ne(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},s.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new ne(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},s.initMediaTailor=function(e,t,n){var o=this;this.h&&this.h.release(),this.h=new yu(e,t,n,function(a){return Df(o,a)})},s.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new ne(1,10,10005);var o=this.h;return n=n===void 0?"":n,o.l?e=Promise.reject(new ne(1,10,10004)):(o.l=new Wt,Wb(o,e,t),o.H=n||"",o.U=Date.now()/1e3,e=o.l),e},s.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new ne(1,10,10005);var t=this.h;t.G=e,t.i(new je("ads-loaded",new Map().set("loadTime",0)))},s.initServerSide=function(e,t){var n=this;if(!d.google||!google.ima||!google.ima.dai)throw new ne(2,10,10002);this.g&&this.g.release(),this.g=new G1(e,t,this.o,function(o){return Df(n,o)}),this.g.configure(this.l)},s.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new ne(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&ze('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.12",n=this.g,n.j?e=Promise.reject(new ne(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Wt,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},s.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new ne(1,10,10003);(e.mpt||e.mpv)&&ze('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.12",this.g.g.replaceAdTagParameters(e)},s.getServerSideCuePoints=function(){return Tt("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},s.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},s.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:$b(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},s.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},s.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},s.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},s.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},s.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&Hb(this.j,n)};function Df(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}me("shaka.ads.AdManager",Ke),Ke.prototype.onInterstitialMetadata=Ke.prototype.onInterstitialMetadata,Ke.prototype.onCueMetadataChange=Ke.prototype.onCueMetadataChange,Ke.prototype.onHlsTimedMetadata=Ke.prototype.onHlsTimedMetadata,Ke.prototype.onDashTimedMetadata=Ke.prototype.onDashTimedMetadata,Ke.prototype.onManifestUpdated=Ke.prototype.onManifestUpdated,Ke.prototype.getStats=Ke.prototype.getStats,Ke.prototype.getCuePoints=Ke.prototype.getCuePoints,Ke.prototype.getServerSideCuePoints=Ke.prototype.getServerSideCuePoints,Ke.prototype.replaceServerSideAdTagParameters=Ke.prototype.replaceServerSideAdTagParameters,Ke.prototype.requestServerSideStream=Ke.prototype.requestServerSideStream,Ke.prototype.initServerSide=Ke.prototype.initServerSide,Ke.prototype.addMediaTailorTrackingUrl=Ke.prototype.addMediaTailorTrackingUrl,Ke.prototype.requestMediaTailorStream=Ke.prototype.requestMediaTailorStream,Ke.prototype.initMediaTailor=Ke.prototype.initMediaTailor,Ke.prototype.updateClientSideAdsRenderingSettings=Ke.prototype.updateClientSideAdsRenderingSettings,Ke.prototype.requestClientSideAds=Ke.prototype.requestClientSideAds,Ke.prototype.onAssetUnload=Ke.prototype.onAssetUnload,Ke.prototype.release=Ke.prototype.release,Ke.prototype.initClientSide=Ke.prototype.initClientSide,Ke.prototype.initInterstitial=Ke.prototype.initInterstitial,Ke.prototype.configure=Ke.prototype.configure,Ke.prototype.setLocale=Ke.prototype.setLocale,Ke.ADS_LOADED="ads-loaded",Ke.AD_STARTED="ad-started",Ke.AD_FIRST_QUARTILE="ad-first-quartile",Ke.AD_MIDPOINT="ad-midpoint",Ke.AD_THIRD_QUARTILE="ad-third-quartile",Ke.AD_COMPLETE="ad-complete",Ke.AD_STOPPED="ad-stopped",Ke.AD_SKIPPED="ad-skipped",Ke.AD_VOLUME_CHANGED="ad-volume-changed",Ke.AD_MUTED="ad-muted",Ke.AD_PAUSED="ad-paused",Ke.AD_RESUMED="ad-resumed",Ke.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Ke.CUEPOINTS_CHANGED="ad-cue-points-changed",Ke.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Ke.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Ke.AD_CLICKED="ad-clicked",Ke.AD_PROGRESS="ad-progress",Ke.AD_BUFFERING="ad-buffering",Ke.AD_IMPRESSION="ad-impression",Ke.AD_DURATION_CHANGED="ad-duration-changed",Ke.AD_CLOSED="ad-closed",Ke.AD_LOADED="ad-loaded",Ke.ALL_ADS_COMPLETED="all-ads-completed",Ke.AD_LINEAR_CHANGED="ad-linear-changed",Ke.AD_METADATA="ad-metadata",Ke.AD_RECOVERABLE_ERROR="ad-recoverable-error",Ke.AD_ERROR="ad-error",Ke.AD_BREAK_READY="ad-break-ready",Ke.AD_INTERACTION="ad-interaction",Ke.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Ke.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Ke.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Mf=function(){return new Ke};function X1(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof je){var o={};for(a in n)(t=n[a])&&typeof t=="object"?a=="detail"&&(o[a]=t):a in Event||(o[a]=t);return o}if(n instanceof Error){var a=new Set(["name","message","stack"]);for(o in n)a.add(o);for(o=T(Object.getOwnPropertyNames(n)),t=o.next();!t.done;t=o.next())a.add(t.value);for(o={},a=T(a),t=a.next();!t.done;t=a.next())t=t.value,o[t]=n[t];n={__type__:"Error",contents:o}}else if(n instanceof TimeRanges){for(a={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=T(yr(n)),o=n.next();!o.done;o=n.next())o=o.value,t=o.end,a.start.push(o.start),a.end.push(t);n=a}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function lp(e){return JSON.parse(e,function(t,n){if(n=="NaN")var o=NaN;else if(n=="-Infinity")o=-1/0;else if(n=="Infinity")o=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")o=Zb(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")o=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(o in t)n[o]=t[o];o=n}else o=n;return o})}function Zb(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var W1="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Jb="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),fp=["loop","playbackRate"],eA=["pause","play"],Of={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},Nf={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},cp={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},Y1=[["getConfiguration","configure"]],q1=[["isTextTrackVisible","setTextTrackVisibility"]],tA="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),nA=["attach","attachCanvas","detach","load","unload"];function hp(e,t,n,o,a,u,f){var h=this;this.G=e,this.K=f,this.l=new bt(t),this.L=n,this.s=!1,this.A=o,this.F=a,this.N=u,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return dp(h)},this.C=function(p,g){switch(p=lp(g),p.type){case"event":var S=p.targetName,E=Cg(p.event);h.A(S,E);break;case"update":S=p.update;for(E in S){p=h.g[E]||{};for(var A in S[E])p[A]=S[E][A]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(E=p.id,A=p.error,p=h.i[E],delete h.i[E],p)if(A){E=new ne(A.severity,A.category,A.code);for(S in A)E[S]=A[S];p.reject(E)}else p.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,xu.add(this)}s=hp.prototype,s.destroy=function(){return xu.delete(this),pp(this),po&&Q1(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},s.fb=function(){return this.h},s.Ff=function(){return this.I},s.init=function(){if(this.G.length)if(d.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.tc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=T(xu),o=n.next();!o.done;o=n.next()){o=o.value;var a=t;o.j=new Wt,o.s=!0,Uf(o,a)}},function(t){for(var n=T(xu),o=n.next();!o.done;o=n.next())o=o.value,Bf=t=="available",o.l.tc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Bf&&this.l.Y(oA),(e=po)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Wt,this.s=!0,Uf(this,e)):po=null}else d.__onGCastApiAvailable!==Z1&&(jf=d.__onGCastApiAvailable||null,d.__onGCastApiAvailable=Z1)},s.Nf=function(e){this.o=e,this.h&&vu(this,{type:"appData",appData:this.o})},s.cast=function(){var e=this;return $(function(t){if(!e.m)throw new ne(1,8,8e3);if(!Bf)throw new ne(1,8,8001);if(e.h)throw new ne(1,8,8002);return e.j=new Wt,chrome.cast.requestSession(function(n){return Uf(e,n)},function(n){return K1(e,n)}),k(t,e.j,0)})};function iA(e){e.h&&chrome.cast.requestSession(function(t){return Uf(e,t)},function(t){return K1(e,t)})}s.Cc=function(){if(this.h){if(pp(this),po){Q1(this);try{po.stop(function(){},function(){})}catch{}po=null}dp(this)}},s.get=function(e,t){var n=this;if(e=="video"){if(eA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(L(Ie.apply(0,arguments))))}}else if(e=="player"){if(cp[t]&&!this.get("player","isLive")())return function(){};if(tA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(L(Ie.apply(0,arguments))))};if(nA.includes(t))return function(){return n.Ki.apply(n,[e,t].concat(L(Ie.apply(0,arguments))))};if(Of[t]||Nf[t])return function(){return n.g[e][t]}}return this.g[e][t]},s.set=function(e,t,n){this.g[e][t]=n,vu(this,{type:"set",targetName:e,property:t,value:n})};function Uf(e,t){var n=e.N();po=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),dp(e),vu(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function K1(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new ne(2,8,n,t))}s.Ug=function(e,t){vu(this,{type:"call",targetName:e,methodName:t,args:Ie.apply(2,arguments)})},s.Ki=function(e,t){var n=Ie.apply(2,arguments),o=new Wt,a=this.H.toString();this.H++,this.i[a]=o;try{vu(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:a})}catch(u){o.reject(u)}return o};function Q1(e){var t=po;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function dp(e){var t=po?po.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};pp(e)}e.h=t,e.I=t?po.receiver.friendlyName:"",e.l.tc()}function pp(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new ne(1,7,7e3))}}function vu(e,t){t=X1(t);var n=po;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},W)}catch(o){throw t=new ne(2,8,8005,o),n=new je("error",new Map().set("detail",t)),e.A("player",n),e.Cc(),t}}var oA=.02,Bf=!1,po=null,jf=null,xu=new Set;function Z1(e){if(jf?d.__onGCastApiAvailable=jf:delete d.__onGCastApiAvailable,jf=null,e)for(var t=T(xu),n=t.next();!n.done;n=t.next())n.value.init();typeof d.__onGCastApiAvailable=="function"&&d.__onGCastApiAvailable(e)}function Tn(e,t,n,o){o=o===void 0?!1:o,Bt.call(this);var a=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=o,this.A=new Map,this.g=new hp(n,function(){return tv(a)},function(){return nv(a)},function(u,f){return ov(a,u,f)},function(){return iv(a)},function(){return ev(a)},o),rA(this)}te(Tn,Bt),s=Tn.prototype,s.destroy=function(e){return e&&this.g.Cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Bt.prototype.release.call(this),Promise.all(e)},s.fi=function(){return this.l},s.Vh=function(){return this.s},s.Ah=function(){return this.g.m&&Bf},s.fb=function(){return this.g.fb()},s.Ff=function(){return this.g.Ff()},s.cast=function(){var e=this;return $(function(t){return t.g==1?k(t,e.g.cast(),2):e.h?k(t,e.h.bc(),0):t.return()})},s.Nf=function(e){this.g.Nf(e)},s.$i=function(){iA(this.g)},s.Cc=function(){this.g.Cc()},s.Bh=function(e,t){t=t===void 0?!1:t;var n=this;return $(function(o){if(o.g==1)return e==n.C&&t==n.B?o.return():(n.C=e,n.B=t,n.g.Cc(),k(o,n.g.destroy(),2));n.g=null,n.g=new hp(e,function(){return tv(n)},function(){return nv(n)},function(a,u){return ov(n,a,u)},function(){return iv(n)},function(){return ev(n)},t),n.g.init(),q(o)})};function rA(e){e.g.init(),e.m=new Ae;for(var t=T(W1),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(u){e.g.fb()||(u=Cg(u),e.j.dispatchEvent(u))});for(var o in Fl)e.m.D(e.h,Fl[o],function(u){e.g.fb()||e.o.dispatchEvent(u)});e.l={},t={};for(var a in e.i)t={nd:t.nd},t.nd=a,Object.defineProperty(e.l,t.nd,{configurable:!1,enumerable:!0,get:function(u){return function(){return aA(e,u.nd)}}(t),set:function(u){return function(f){var h=u.nd;e.g.fb()?e.g.set("video",h,f):e.i[h]=f}}(t)});e.s={},J1(e,function(u){Object.defineProperty(e.s,u,{configurable:!1,enumerable:!0,get:function(){return uA(e,u)}})}),sA(e),e.j=new Bt,e.j.me=e.l,e.o=new Bt,e.o.me=e.s}function sA(e){var t=new Map;J1(e,function(n,o){t.has(o)?(o=t.get(o),n.length<o.length?e.A.set(n,o):e.A.set(o,n)):t.set(o,n)})}function J1(e,t){function n(p){return p=="constructor"||typeof o[p]!="function"?!1:!a.has(p)}var o=e.h,a=new Set,u;for(u in o)n(u)&&(a.add(u),t(u,o[u]));for(e=Object.getPrototypeOf(o),u=Object.getPrototypeOf({});e&&e!=u;){for(var f=T(Object.getOwnPropertyNames(e)),h=f.next();!h.done;h=f.next())h=h.value,n(h)&&(a.add(h),t(h,o[h]));e=Object.getPrototypeOf(e)}}function ev(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dc(),startTime:null};e.i.pause();for(var n=T(fp),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.i[o];for(e.i.ended||(t.startTime=e.i.currentTime),n=T(Y1),o=n.next();!o.done;o=n.next()){var a=o.value;o=a[1],a=e.h[a[0]](),t.player[o]=a}for(n=T(q1),o=n.next();!o.done;o=n.next())a=o.value,o=a[1],a=e.h[a[0]](),t.playerAfterLoad[o]=a;return t}function tv(e){var t=new je("caststatuschanged");e.dispatchEvent(t)}function nv(e){var t=new je(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function iv(e){for(var t=T(Y1),n=t.next();!n.done;n=t.next()){var o=n.value;n=o[1],o=e.g.get("player",o[0])(),e.h[n](o)}var a=e.g.get("player","getAssetUri")();o=e.g.get("video","ended"),t=Promise.resolve();var u=e.i.autoplay;n=null,o||(n=e.g.get("video","currentTime"));var f;(o=e.g.get("player","getTextTracks")())&&o.length&&(f=o.find(function(g){return g.active}));var h=e.g.get("player","isTextTrackVisible")();a&&(e.i.autoplay=!1,t=e.h.load(a,n));var p={};for(n=T(fp),o=n.next();!o.done;o=n.next())o=o.value,p[o]=e.g.get("video",o);t.then(function(){if(e.i){for(var g=T(fp),S=g.next();!S.done;S=g.next())S=S.value,e.i[S]=p[S];for(g=T(q1),S=g.next();!S.done;S=g.next()){var E=S.value;S=E[1],E=e.g.get("player",E[0])(),e.h[S](E)}e.h.eh(h),f&&e.h.Lf(f.language,f.roles,f.forced),e.i.autoplay=u,a&&e.i.play()}},function(g){g=new Map().set("detail",g),g=new je("error",g),e.h.dispatchEvent(g)})}function aA(e,t){if(t=="addEventListener")return function(o,a,u){return e.j.addEventListener(o,a,u)};if(t=="removeEventListener")return function(o,a,u){return e.j.removeEventListener(o,a,u)};if(e.g.fb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.fb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function uA(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,o,a){return e.o.addEventListener(n,o,a)};if(t=="removeEventListener")return function(n,o,a){return e.o.removeEventListener(n,o,a)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.xb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.ug()};if(t=="setVideoContainer")return function(n){return e.h.ih(n)};if(e.g.fb()){if(t=="getManifest"||t=="drmInfo")return function(){return ze(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return ze(t+"() does not work while casting!"),Promise.resolve()}}return e.g.fb()&&Object.keys(e.g.g.video).length==0&&(Of[t]||Nf[t])||!e.g.fb()?e.h[t].bind(e.h):e.g.get("player",t)}function ov(e,t,n){e.g.fb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}me("shaka.cast.CastProxy",Tn),Tn.prototype.changeReceiverId=Tn.prototype.Bh,Tn.prototype.forceDisconnect=Tn.prototype.Cc,Tn.prototype.suggestDisconnect=Tn.prototype.$i,Tn.prototype.setAppData=Tn.prototype.Nf,Tn.prototype.cast=Tn.prototype.cast,Tn.prototype.receiverName=Tn.prototype.Ff,Tn.prototype.isCasting=Tn.prototype.fb,Tn.prototype.canCast=Tn.prototype.Ah,Tn.prototype.getPlayer=Tn.prototype.Vh,Tn.prototype.getVideo=Tn.prototype.fi,Tn.prototype.destroy=Tn.prototype.destroy;function Yn(e,t,n,o){Bt.call(this);var a=this;this.g=e,this.h=t,this.j=new Ae,this.H={video:e,player:t},this.F=n||function(){},this.I=o||function(u){return u},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new bt(function(){mp(a)}),lA(this)}te(Yn,Bt),s=Yn.prototype,s.isConnected=function(){return this.G},s.mi=function(){return this.o},s.Wi=function(e){this.i=e},s.Dh=function(){this.i=null},s.Xi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},s.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},s.Ui=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},s.destroy=function(){var e=this,t,n;return $(function(o){if(o.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Bt.prototype.release.call(e),k(o,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),q(o)})};function lA(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return rv(e)},t.onSenderDisconnected=function(){return rv(e)},t.onSystemVolumeChanged=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&Jo(e,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},e.l),Jo(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(a){return hA(e,a)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(a){return cA(e,a)},t.start(),t=T(W1);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(a){return sv(e,"video",a)});for(var o in Fl)e.j.D(e.h,Fl[o],function(a){return sv(e,"player",a)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,Ws(e)}),e.j.D(e.g,"playing",function(){e.o=!1,Ws(e)}),e.j.D(e.g,"pause",function(){Ws(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,Ws(e)}),e.j.D(e.g,"ended",function(){new bt(function(){e.g&&e.g.ended&&(e.o=!0,Ws(e))}).Y(pA)})}function rv(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,Ws(e)}function Ws(e){var t;$(function(n){if(n.g==1)return k(n,Promise.resolve(),2);if(!e.h)return n.return();t=new je("caststatuschanged"),e.dispatchEvent(t),av(e)||er(e),q(n)})}function fA(e,t,n){var o,a,u,f,h,p,g,S,E,A;$(function(b){switch(b.g){case 1:for(o in t.player)a=t.player[o],e.h[o](a);return e.F(n),u=e.g.autoplay,t.manifest?(e.g.autoplay=!1,Y(b,5),k(b,e.h.load(t.manifest,t.startTime),7)):k(b,Promise.resolve(),3);case 7:K(b,3);break;case 5:return f=ee(b),h=new Map().set("detail",f),p=new je("error",h),e.h&&e.h.dispatchEvent(p),b.return();case 3:if(!e.h)return b.return();for(g in t.video)S=t.video[g],e.g[g]=S;for(E in t.playerAfterLoad)A=t.playerAfterLoad[E],e.h[E](A);e.g.autoplay=u,t.manifest&&(e.g.play(),er(e)),q(b)}})}function sv(e,t,n){e.h&&(mp(e),Jo(e,{type:"event",targetName:t,event:n},e.l))}function mp(e){e.C.Y(dA);for(var t={video:{},player:{}},n=T(Jb),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.g[o];if(e.h.V())for(var a in cp)e.m%cp[a]==0&&(t.player[a]=e.h[a]());for(var u in Of)e.m%Of[u]==0&&(t.player[u]=e.h[u]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Jo(e,{type:"update",update:t},e.l);for(var f in Nf)e.m%Nf[f]==0&&(t={player:{}},t.player[f]=e.h[f](),Jo(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),av(e)}function av(e){return e.A&&(e.g.duration||e.h.V())?(gp(e),e.A=!1,!0):!1}function gp(e,t){var n={contentId:e.h.Dc(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),er(e,t===void 0?0:t,n)}function cA(e,t){var n=lp(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,fA(e,n.initState,n.appData),mp(e);break;case"appData":e.F(n.appData);break;case"set":var o=n.targetName,a=n.property;if(n=n.value,o=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),a=="volume"){t.setSystemVolumeLevel(n);break}else if(a=="muted"){t.setSystemVolumeMuted(n);break}}e.H[o][a]=n;break;case"call":o=e.H[n.targetName],o[n.methodName].apply(o,n.args);break;case"asyncCall":o=n.targetName,a=n.methodName,o=="player"&&a=="load"&&(e.m=0,e.B=!1);var u=n.id,f=t.senderId;t=e.H[o],n=t[a].apply(t,n.args),o=="player"&&a=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return uv(e,f,u,null)},function(h){return uv(e,f,u,h)})}}function hA(e,t){var n=lp(t.data);switch(n.type){case"PLAY":e.g.play(),er(e);break;case"PAUSE":e.g.pause(),er(e);break;case"SEEK":t=n.currentTime;var o=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),o&&o=="PLAYBACK_START"?(e.g.play(),er(e)):o&&o=="PLAYBACK_PAUSE"&&(e.g.pause(),er(e));break;case"STOP":e.h.bc().then(function(){e.h&&er(e)});break;case"GET_STATUS":gp(e,Number(n.requestId));break;case"VOLUME":o=n.volume,t=o.level,o=o.muted;var a=e.g.volume,u=e.g.muted;t!=null&&(e.g.volume=Number(t)),o!=null&&(e.g.muted=o),a==e.g.volume&&u==e.g.muted||er(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,o=n.currentTime,a=e.I(t.contentId),u=n.autoplay||!0,e.F(t.customData),u&&(e.g.autoplay=!0),e.h.load(a,o).then(function(){e.h&&gp(e)}).catch(function(f){var h="LOAD_FAILED";f.category==7&&f.code==7e3&&(h="LOAD_CANCELLED"),Jo(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:Jo(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function uv(e,t,n,o){e.h&&Jo(e,{type:"asyncComplete",id:n,error:o},e.l,t)}function Jo(e,t,n,o){e.G&&(e=X1(t),o?n.getCastChannel(o).send(e):n.broadcast(e))}function er(e,t,n){n=n===void 0?null:n;var o={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?mA:e.h.pf()?yA:e.g.paused?vA:gA,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(o.media=n),Jo(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[o]},e.s)}me("shaka.cast.CastReceiver",Yn),Yn.prototype.destroy=Yn.prototype.destroy,Yn.prototype.setContentArtist=Yn.prototype.Ui,Yn.prototype.setContentImage=Yn.prototype.Vi,Yn.prototype.setContentTitle=Yn.prototype.Xi,Yn.prototype.clearContentMetadata=Yn.prototype.Dh,Yn.prototype.setContentMetadata=Yn.prototype.Wi,Yn.prototype.isIdle=Yn.prototype.mi,Yn.prototype.isConnected=Yn.prototype.isConnected;var dA=.5,pA=5,mA="IDLE",gA="PLAYING",yA="BUFFERING",vA="PAUSED";function lv(e,t,n,o,a){if(o>=a)return null;for(var u=-1,f=-1,h=0;h<n.length;h++)if(n[h].some(function(D){return D!=null&&D.g.trim()!=""})){u=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(D){return D!=null&&D.g.trim()!=""})){f=h;break}if(u===-1||f===-1)return null;for(var p=h=!1,g="white",S="black",E=yp(o,a,h,p,g,S);u<=f;u++){for(var A=n[u],b=-1,M=-1,_=0;_<A.length;_++)if(A[_]!=null&&A[_].g.trim()!==""){b=_;break}for(_=A.length-1;0<=_;_--)if(A[_]!=null&&A[_].g.trim()!==""){M=_;break}if(b===-1||M===-1)A=fv(o,a),e.nestedCues.push(A);else{for(;b<=M;b++)if(_=A[b]){var R=_.l,B=_.i,N=_.j,H=_.h;(R!=h||B!=p||N!=g||H!=S)&&(E.payload&&e.nestedCues.push(E),E=yp(o,a,R,B,N,H),h=R,p=B,g=N,S=H),E.payload+=_.g}else E.payload+=" ";E.payload&&e.nestedCues.push(E),u!==f&&(E=fv(o,a),e.nestedCues.push(E)),E=yp(o,a,h,p,g,S)}}return e.nestedCues.length?{cue:e,stream:t}:null}function yp(e,t,n,o,a,u){return e=new Lt(e,t,""),n&&e.textDecoration.push("underline"),o&&(e.fontStyle="italic"),e.color=a,e.backgroundColor=u,e}function fv(e,t){return e=new Lt(e,t,""),e.lineBreak=!0,e}function cv(e,t,n,o,a){this.g=e,this.l=t,this.i=n,this.h=o,this.j=a}function vp(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",wu(this)}function Ff(e,t,n){var o="CC"+((e.A<<1|e.s)+1),a=new Lt(t,n,"");a.lineInterpretation=1;var u=pv.get(e.g);return u&&(a.line=u),(t=lv(a,o,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(u=pv.get(e.g+3-t.cue.nestedCues.length))&&(a.line=u),t}function wu(e){tr(e,0,15),e.g=1}function Ys(e,t,n){if(!(32>n||127<n)){var o="";switch(t){case 0:o=dv.has(n)?dv.get(n):String.fromCharCode(n);break;case 1:o=xA.get(n);break;case 2:e.i[e.g].pop(),o=wA.get(n);break;case 3:e.i[e.g].pop(),o=SA.get(n)}o&&e.i[e.g].push(new cv(o,e.m,e.j,e.o,e.l))}}function hv(e,t,n,o){if(!(0>n||0>t))if(t>=n)for(--o;0<=o;o--)e.i[t+o]=e.i[n+o].map(function(u){return u});else for(var a=0;a<o;a++)e.i[t+a]=e.i[n+a].map(function(u){return u})}function tr(e,t,n){for(var o=0;o<=n;o++)e.i[t+o]=[]}var dv=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),xA=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),wA=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),SA=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),pv=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function $f(e,t){this.h=0,this.o=new vp(e,t),this.i=new vp(e,t),this.g=this.j=new vp(e,t),this.l=0,this.m=null}function xp(e,t,n){e.g=e.i;var o=e.g,a=null;return e.h!==3&&e.h!==4&&(a=Ff(o,e.l,n),n=e.i,n.g=0<n.h?n.h:0,tr(n,0,15),n=e.j,n.g=0<n.h?n.h:0,tr(n,0,15),o.g=15),e.h=3,o.h=t,a}function mv(e){e.h=1,e.g=e.j,e.g.h=0}function gv(e){Oe("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var CA="black green blue cyan red yellow magenta black".split(" "),yv="white green blue cyan red yellow magenta white_italics".split(" ");function vv(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",wp(this)}function wp(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Sp())}function Sp(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Kr(e,t){xv(e)&&(e.i[e.h][e.g]=new cv(t,e.C,e.A,e.s,e.B),e.g++)}function xv(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}vv.prototype.isVisible=function(){return this.l};function Qr(e,t,n){var o=new Lt(e.j,t,"");o.textAlign=e.F===0?"left":e.F===1?"right":lt;var a=o.region;switch(e.I&&(a.id+="svc"+e.I),a.id+="win"+e.N,a.height=e.o,a.width=e.m,a.heightUnits=2,a.widthUnits=2,a.viewportAnchorX=e.H,a.viewportAnchorY=e.L,a.viewportAnchorUnits=e.K?Ct:2,e.G){case 0:a.regionAnchorX=0,a.regionAnchorY=0;break;case 1:a.regionAnchorX=50,a.regionAnchorY=0;break;case 2:a.regionAnchorX=100,a.regionAnchorY=0;break;case 3:a.regionAnchorX=0,a.regionAnchorY=50;break;case 4:a.regionAnchorX=50,a.regionAnchorY=50;break;case 5:a.regionAnchorX=100,a.regionAnchorY=50;break;case 6:a.regionAnchorX=0,a.regionAnchorY=100;break;case 7:a.regionAnchorX=50,a.regionAnchorY=100;break;case 8:a.regionAnchorX=100,a.regionAnchorY=100}return(n=lv(o,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function TA(){this.i=[],this.h=null,this.g=0}function EA(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new zf(e.h)),e.h=null,e.g=0))}function zf(e){this.g=0,this.h=e}zf.prototype.na=function(){return this.g<this.h.length},zf.prototype.va=function(){return this.g};function $n(e){if(!e.na())throw new ne(2,2,3e3);return e.h[e.g++]}zf.prototype.skip=function(e){if(this.g+e>this.h.length)throw new ne(2,2,3e3);this.g+=e};function bA(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function AA(e,t,n,o){if(128<=n&&135>=n)o=n&7,e.h[o]&&(e.g=e.h[o]);else{if(n===136){n=$n(t).value,t=null,n=T(Su(e,n));for(var a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=Qr(a,o,e.i)),wp(a);return t}if(n===137)for(t=$n(t).value,t=T(Su(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=o),n.l=!0;else{if(n===138){for(n=$n(t).value,t=null,n=T(Su(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=Qr(a,o,e.i)),a.l=!1;return t}if(n===139){for(n=$n(t).value,t=null,n=T(Su(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()?t=Qr(a,o,e.i):a.j=o,a.l=!a.l;return t}if(n===140)return t=$n(t).value,wv(e,t,o);if(n===143)return o=wv(e,255,o),Sv(e),o;if(n===144)t.skip(1),o=$n(t).value,e.g&&(e.g.A=0<(o&128),e.g.C=0<(o&64));else if(n===145)o=$n(t).value,n=$n(t).value,t.skip(1),e.g&&(t=Cv((n&48)>>4,(n&12)>>2,n&3),e.g.B=Cv((o&48)>>4,(o&12)>>2,o&3),e.g.s=t);else if(n===146)o=$n(t).value,t=$n(t).value,e.g&&(e=e.g,e.h=o&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),o=$n(t).value,t.skip(1),e.g&&(e.g.F=o&3);else if(152<=n&&159>=n){if(n=(n&15)-8,a=e.h[n]!==null,!a){var u=new vv(n,e.i);u.j=o,e.h[n]=u}o=$n(t).value,u=$n(t).value;var f=$n(t).value,h=$n(t).value,p=$n(t).value;t=$n(t).value,a&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(o&32),t.L=u&127,t.H=f,t.G=(h&240)>>4,t.K=0<(u&128),t.o=(h&15)+1,t.m=(p&63)+1,e.g=e.h[n]}}}return null}function Su(e,t){for(var n=[],o=0;8>o;o++)(t&1)===1&&e.h[o]&&n.push(o),t>>=1;return n}function wv(e,t,n){var o=null;t=T(Su(e,t));for(var a=t.next();!a.done;a=t.next()){a=a.value;var u=e.h[a];u.isVisible()&&(o=Qr(u,n,e.i)),e.h[a]=null}return o}function Sv(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Cv(e,t,n){var o={0:0,1:0,2:1,3:1};return e=o[e],t=o[t],n=o[n],kA[e<<2|t<<1|n]}var Tv=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),kA="black blue green cyan red magenta yellow white".split(" ");function qs(){this.h=[],this.g=[],this.i=new TA,this.l=0,this.m=new Map([["CC1",new $f(0,0)],["CC2",new $f(0,1)],["CC3",new $f(1,0)],["CC4",new $f(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,Cp(this)}qs.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Cp(this),e=T(this.j.values());for(var t=e.next();!t.done;t=e.next())Sv(t.value)};function Cp(e){e.o=0,e.s=0;for(var t=T(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,wu(n.i),wu(n.j),wu(n.o);e.B=!0}qs.prototype.extract=function(e,t){if(this.B){for(var n=T(this.m.values()),o=n.next();!o.done;o=n.next())o.value.l=t;this.B=!1}if(e=new qt(e,0),!(8>e.getLength())&&e.T()===181&&e.la()===49&&e.P()===1195456820&&e.T()===3&&(n=e.T(),(n&64)!==0))for(n&=31,e.skip(1),o=0;o<n;o++){var a=e.T(),u=(a&4)>>2,f=e.T(),h=e.T();u&&(a&=3,a===0||a===1?this.h.push({pts:t,type:a,bb:f,Cb:h,order:this.h.length}):(this.g.push({pts:t,type:a,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},qs.prototype.decode=function(){function e(a,u){return a.pts-u.pts||a.order-u.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=T(this.h),o=n.next();!o.done;o=n.next())(o=IA(this,o.value))&&t.push(o);for(n=T(this.g),o=n.next();!o.done;o=n.next())EA(this.i,o.value);for(n=T(this.i.i),o=n.next();!o.done;o=n.next())o=MA(this,o.value),t.push.apply(t,L(o));return this.i.i=[],this.h=[],this.g=[],t};function IA(e,t){var n=t.type;if((t.bb&112)===16){var o=t.bb>>3&1;n===0?e.o=o:e.s=o}if(o="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(o),t.bb===255&&t.Cb===255||!t.bb&&!t.Cb||!Ev(t.bb)||!Ev(t.Cb))return 45<=++e.l&&Cp(e),null;e.l=0,t.bb&=127,t.Cb&=127;var a=t.bb;if(1<=a&&15>=a||!t.bb&&!t.Cb)return null;if(a=null,(t.bb&112)===16)e:{if(e.A.add(o),o=t.bb,e=t.Cb,n.m===(o<<8|e))n.m=null;else if(n.m=o<<8|e,(o&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(o&7)<<1|e>>5&1];var u=(e&30)>>1;o="white",a=!1,7>u?o=yv[u]:u===7&&(a=!0),e=(e&1)===1,n.h!==4&&(u=n.g,n.h===3&&t!==u.g&&(n=1+t-u.h,hv(u,n,1+u.g-u.h,u.h),tr(u,0,n-1),tr(u,t+1,15-t)),u.g=t,u.m=e,u.j=a,u.l=o,u.o="black")}else if((o&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Ys(n.g,0,32),o=!1,t=yv[(e&14)>>1],t==="white_italics"&&(t="white",o=!0),n.g.m=(e&1)===1,n.g.j=o,n.g.l=t;else if((o&247)===16&&(e&240)===32||(o&247)===23&&(e&255)===45)t="black",!(o&7)&&(t=CA[(e&14)>>1]),n.g.o=t;else if((o&247)===17&&(e&240)===48)Ys(n.g,1,e);else if((o&246)===18&&(e&224)===32)Ys(n.g,o&1?3:2,e);else if((o&246)===20&&(e&240)===32){switch(e=t.pts,o=null,t.Cb){case 32:mv(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:o=xp(n,2,e);break;case 38:o=xp(n,3,e);break;case 39:o=xp(n,4,e);break;case 40:Ys(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:wu(n.o),gv(n);break;case 43:gv(n);break;case 44:t=n.i,o=null,n.h!==4&&(o=Ff(t,n.l,e)),tr(t,0,15);break;case 45:t=n.g,n.h!==3?o=null:(o=Ff(t,n.l,e),a=t.g-t.h+1,hv(t,a-1,a,t.h),tr(t,0,a-1),tr(t,t.g,15-t.g),n.l=e);break;case 46:tr(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=Ff(n.i,n.l,e)),o=n.j,n.j=n.i,n.i=o,mv(n),n.l=e,o=t}a=o;break e}a=null}else e=t.Cb,Ys(n.g,0,t.bb),Ys(n.g,0,e);return a}function MA(e,t){var n=[];try{for(;t.na();){var o=$n(t).value,a=(o&224)>>5,u=o&31;if(a===7&&u!=0&&(a=$n(t).value&63),a!=0){e.A.add("svc"+a),e.j.has(a)||e.j.set(a,new bA(a));for(var f=e.j.get(a),h=t.va();t.va()-h<u;){a=f;var p=t,g=$n(p),S=g.value,E=g.pts;if(S===16){var A=$n(p);S=S<<16|A.value}if(0<=S&&31>=S){p=a;var b=S,M=E;if(p.g){var _=p.g;switch(a=null,b){case 8:!xv(_)||0>=_.g&&0>=_.h||(0>=_.g?(_.g=_.m-1,_.h--):_.g--,_.i[_.h][_.g]=null);break;case 13:if(_.isVisible()&&(a=Qr(_,M,p.i)),_.h+1>=_.o){for(p=_,b=0,M=1;16>M;M++,b++)p.i[b]=p.i[M];for(M=0;1>M;M++,b++)p.i[b]=Sp()}else _.h++;_.g=0;break;case 14:_.isVisible()&&(a=Qr(_,M,p.i)),_.i[_.h]=Sp(),_.g=0;break;case 12:_.isVisible()&&(a=Qr(_,M,p.i)),wp(_),p=_,p.h=0,p.g=0}var R=a}else R=null}else if(128<=S&&159>=S)R=AA(a,p,S,E);else{if(4096<=S&&4127>=S)a=p,p=S&255,8<=p&&15>=p?a.skip(1):16<=p&&23>=p?a.skip(2):24<=p&&31>=p&&a.skip(3);else if(4224<=S&&4255>=S)a=p,p=S&255,128<=p&&135>=p?a.skip(4):136<=p&&143>=p&&a.skip(5);else if(32<=S&&127>=S)p=S,a.g&&(p===127?Kr(a.g,"♪"):Kr(a.g,String.fromCharCode(p)));else if(160<=S&&255>=S)a.g&&Kr(a.g,String.fromCharCode(S));else if(4128<=S&&4223>=S){if(p=S&255,a.g)if(Tv.has(p)){var B=Tv.get(p);Kr(a.g,B)}else Kr(a.g,"_")}else 4256<=S&&4351>=S&&a.g&&((S&255)!=160?Kr(a.g,"_"):Kr(a.g,"[CC]"));R=null}(a=R)&&n.push(a)}}}}catch(N){if(N instanceof ne&&N.code===3e3)Oe("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw N}return n}function Ev(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}qs.prototype.getStreams=function(){return Array.from(this.A)},me("shaka.cea.CeaDecoder",qs),kn=function(){return new qs};function bv(e){for(var t=[],n=e,o=e=0;o<n.length;)e==2&&n[o]==3?(e=0,n=[].concat(L(n)),n.splice(o,1),n=new Uint8Array(n)):n[o]==0?e++:e=0,o++;for(e=n,o=0;o<e.length;){for(n=0;e[o]==255;)n+=255,o++;n+=e[o++];for(var a=0;e[o]==255;)a+=255,o++;a+=e[o++],n==4&&t.push(e.subarray(o,o+a)),o+=a}return t}function Vf(){this.j=new Map,this.i=this.h=0,this.g=Tp}Vf.prototype.init=function(e){function t(u){u=u.name,u in Hf&&(n.g=Hf[u])}var n=this,o=[],a=[];if(new Kt().box("moov",kt).box("mvex",kt).S("trex",function(u){var f=u.reader;f.skip(4),f.skip(4),u=f.P(),f=f.P(),n.h=u,n.i=f}).box("trak",kt).S("tkhd",function(u){var f=u.reader;u=u.version,u==1?(f.skip(8),f.skip(8)):(f.skip(4),f.skip(4));var h=f.P();u==1?f.skip(8):f.skip(4),f.skip(4),f.skip(8),f.skip(2),f.skip(2),f.skip(2),f.skip(2),f.skip(36),f.la(),f.la(),f.la(),f.la(),o.push(h)}).box("mdia",kt).S("mdhd",function(u){u=Zl(u.reader,u.version),a.push(u.timescale)}).box("minf",kt).box("stbl",kt).S("stsd",pr).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",xi).box("sinf",kt).box("frma",function(u){u=fy(u.reader).codec,u in Hf&&(n.g=Hf[u])}).parse(e,!0),!o.length||!a.length||o.length!=a.length)throw new ne(2,2,2010);this.g==Tp&&ze("Unable to determine bitstream format for CEA parsing!"),o.forEach(function(u,f){n.j.set(u,a[f])})},Vf.prototype.parse=function(e){var t=this;if(this.g==Tp)return[];var n=[],o=0,a=[];return new Kt().box("moof",function(u){o=u.start,a=[],kt(u)}).box("traf",function(u){a.push({baseMediaDecodeTime:null,Yc:t.h,Id:t.i,Og:[],timescale:9e4}),kt(u)}).S("trun",function(u){var f=a[a.length-1];u=uy(u.reader,u.version,u.flags),f.Og.push(u)}).S("tfhd",function(u){var f=a[a.length-1];u=ay(u.reader,u.flags),f.Yc=u.Yc||t.h,f.Id=u.Id||t.i,u=u.trackId,t.j.has(u)&&(f.timescale=t.j.get(u))}).S("tfdt",function(u){var f=a[a.length-1];u=Ql(u.reader,u.version),f.baseMediaDecodeTime=u.baseMediaDecodeTime}).box("mdat",function(u){for(var f=o-u.start-8,h=u.reader.va(),p=T(a),g=p.next();!g.done;g=p.next()){if(g=g.value,g.baseMediaDecodeTime===null)throw ze("Unable to find base media decode time for CEA captions!"),new ne(2,2,2010);u.reader.seek(h),RA(t,u.reader,g.baseMediaDecodeTime,g.timescale,g.Yc,g.Id,f,g.Og,n)}}).parse(e,!1),n};function RA(e,t,n,o,a,u,f,h,p){var g=0,S=u,E=h.map(function(M){return M.Wg});for(E=[].concat.apply([],L(E)),E.length&&(S=E[0].sampleSize||u),t.skip(f+h[0].Fh);t.na();){f=t.P();var A=t.T(),b=null;switch(b=!1,h=1,e.g){case Cu:b=A&31,b=b==6;break;case Tu:h=2,t.skip(1),b=A>>1&63,b=b==39||b==40;break;case Eu:h=2,t.skip(1),b=A>>1&63,b=b==23||b==24;break;default:return}if(b)for(A=0,g<E.length&&(A=E[g].ne||0),A=(n+A)/o,h=T(bv(t.qb(f-h))),b=h.next();!b.done;b=h.next())p.push({packet:b.value,pts:A});else try{t.skip(f-h)}catch{break}S-=f+4,S==0&&(n=g<E.length?n+(E[g].Jf||a):n+a,g++,g<E.length?S=E[g].sampleSize||u:S=u)}}me("shaka.cea.Mp4CeaParser",Vf);var Tp=0,Cu=1,Tu=2,Eu=3,Hf={avc1:Cu,avc3:Cu,dvav:Cu,dva1:Cu,hev1:Tu,hvc1:Tu,dvh1:Tu,dvhe:Tu,vvc1:Eu,vvi1:Eu,dvc1:Eu,dvi1:Eu};An["video/mp4"]=function(){return new Vf};function Gf(){this.g=null}Gf.prototype.init=function(){},Gf.prototype.parse=function(e){this.g?this.g.clearData():this.g=new en;var t=[];if(e=Me(e),!nu(e))return t;e=this.g.parse(e);var n=e.$c(),o=e.Pd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=T(o),o=n.next();!o.done;o=n.next())if(o=o.value,e.includes(o.type)&&o.time!=null)for(var a=T(bv(o.data)),u=a.next();!u.done;u=a.next())t.push({packet:u.value,pts:o.time});return t},me("shaka.cea.TsCeaParser",Gf),An["video/mp2t"]=function(){return new Gf};function Av(e,t,n){var o=OA(e),a=null;e=[];var u=[],f=null,h=new Set(o.map(function(g){return g.keyId}));h.delete(null);var p="cenc";if(1<h.size)throw new ne(2,4,4010);if(!t){if(u=o.filter(function(g){return g.Pc=="urn:mpeg:dash:sea:2012"}),1<u.length)throw new ne(2,4,4050);u.length&&(f=UA(u[0])),(u=o.find(function(g){return g.Pc=="urn:mpeg:dash:mp4protection:2011"}))&&u.encryptionScheme&&(p=u.encryptionScheme),u=o.filter(function(g){return g.Pc=="urn:mpeg:dash:mp4protection:2011"?(a=g.init||a,!1):g.Pc!="urn:mpeg:dash:sea:2012"}),u.length&&(e=DA(a,p,u,n,h),e.length==0&&(e=[jr("",p,a)]))}if(o.length&&!f&&(t||!u.length))for(e=[],t=T(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(jr(n,p,a));if(h=Array.from(h)[0]||null)for(p=T(e),t=p.next();!t.done;t=p.next())for(t=T(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{pg:h,dk:a,drmInfos:e,Fe:f,tg:!0}}function _A(e,t,n,o){var a=Av(e,n,o);if(t.tg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=a.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=a.drmInfos),t.tg=!1;else if(0<a.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(u){return a.drmInfos.some(function(f){return f.keySystem==u.keySystem})}),t.drmInfos.length==0))throw new ne(2,4,4008);return a.pg||t.pg}function LA(e){var t=0,n=Qt(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var u=Me(n,e,a);t.push({type:o,value:u}),e+=a}n=t}return n}function PA(e){e=T(fo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=T(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Ln(n)}return""}function Xf(e){var t=Go(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ln(t))?t:(e=Go(e.node,"urn:microsoft:playready","pro"),!e||!Ln(e)||(e=Ln(e),e=Gi(e),e=LA(e).filter(function(n){return n.type===BA})[0],!e)?"":(e=jo(e.value,!0),(e=As(e,"WRMHEADER"))?PA(e):""))}function DA(e,t,n,o,a){var u=[];n=T(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=o[f.Pc];if(h){var p;if((p=Go(f.node,"urn:microsoft:playready","pro"))&&Ln(p)){p=Ln(p),p=Gi(p);var g=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);p=[{initData:Hl(p,g,new Set,0),initDataType:"cenc",keyId:f.keyId}]}else p=null;if(g=null,f.Pc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){g=f;var S=a;if(S.size==0)g=null;else{var E=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),A=new Uint8Array([]);g=[{initData:Hl(A,E,S,1),initDataType:"cenc",keyId:g.keyId}]}}p=jr(h,t,f.init||e||p||g),(h=jA.get(h))&&(p.licenseServerUri=h(f)),u.push(p)}}return u}function OA(e){var t=[];e=T(e);for(var n=e.next();!n.done;n=e.next())(n=NA(n.value))&&t.push(n);return t}function NA(e){var t=e.attributes.schemeIdUri,n=Xo(e,"urn:mpeg:cenc:2013","default_KID"),o=Pg(e,"urn:mpeg:cenc:2013","pssh").map(lo),a=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new ne(2,4,4009);var u=[];try{u=o.map(function(f){return{initDataType:"cenc",initData:Gi(f),keyId:null}})}catch{throw new ne(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<u.length?u:null,encryptionScheme:a}}function UA(e){if(!d.crypto||!d.crypto.subtle)throw ze("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new ne(2,4,4042);var t=Go(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new ne(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new ne(2,4,4051);if(t=Go(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new ne(2,4,4051);if(e=t.attributes.IV,t=fi(t.attributes.keyUriTemplate),!e||!t)throw new ne(2,4,4051);if(e=Br(e.substr(2)),e.byteLength!=16)throw new ne(2,4,4048);return{ti:t,iv:e}}var BA=1,jA=new Map().set("com.widevine.alpha",function(e){var t=Go(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ln(t))?t:(e=Go(e.node,"urn:microsoft","laurl"))&&fi(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Xf).set("com.microsoft.playready.recommendation",Xf).set("com.microsoft.playready.software",Xf).set("com.microsoft.playready.hardware",Xf).set("org.w3.clearkey",function(e){var t=Go(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ln(t))?t:(e=Go(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Ln(e))?e:""});function Wf(e,t,n,o,a,u){var f={RepresentationID:t,Number:n,SubNumber:o,Bandwidth:a,Time:u};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,p,g,S){if(h=="$$")return"$";var E=f[p];if(E==null)return h;switch(p=="RepresentationID"&&g&&(g=void 0),p=="Time"&&typeof E!="bigint"&&(.2<=Math.abs(E-Math.round(E))&&ze("Calculated $Time$ values must be close to integers"),E=Math.round(E)),S){case void 0:case"d":case"i":case"u":h=E.toString();break;case"o":h=E.toString(8);break;case"x":h=E.toString(16);break;case"X":h=E.toString(16).toUpperCase();break;default:h=E.toString()}return g=d.parseInt(g,10)||1,Array(Math.max(0,g-h.length)+1).join("0")+h})}function kv(e,t){var n=Ao(e,t,"timescale"),o=1;n&&(o=Wo(n)||1),n=Ao(e,t,"duration"),(n=Wo(n||""))&&(n/=o);var a=Ao(e,t,"startNumber"),u=Number(Ao(e,t,"presentationTimeOffset"))||0,f=ni(a||"");if((a==null||f==null)&&(f=1),a=null,t=Ks(e,t,"SegmentTimeline")){t=Jt(t,"S"),a=o,e=e.ka.duration||1/0;for(var h=f,p=[],g=-u,S=0;S<t.length;++S){var E=t[S],A=t[S+1],b=_t(E,"t",ni),M=_t(E,"d",ni),_=_t(E,"r",Wl);if(E=_t(E,"k",Wl)||0,b!=null&&(b-=u),M){if(b=b??g,_=_||0,0>_)if(A){if(A=_t(A,"t",ni),A==null)break;if(b>=A)break;_=Math.ceil((A-b)/M)-1}else{if(e==1/0)break;if(b/a>=e)break;_=Math.ceil((e*a-b)/M)-1}for(0<p.length&&b!=g&&(p[p.length-1].end=b/a),A=0;A<=_;++A)g=b+M,p.push({start:b/a,end:g/a,$f:b,zb:E,Si:p.length+h}),b=g}}a=p}return{timescale:o,La:n,vd:f,Nb:u/o||0,Zf:u,timeline:a}}function Iv(e,t){return[t(e.J),t(e.ja),t(e.ta)].filter($r)}function Ao(e,t,n){t=Iv(e,t),e=null,t=T(t);for(var o=t.next();!o.done&&!(e=o.value.attributes[n]);o=t.next());return e}function Ks(e,t,n){t=Iv(e,t),e=null,t=T(t);for(var o=t.next();!o.done&&!(e=co(o.value,n));o=t.next());return e}function FA(e,t,n,o,a,u){for(var f=Xo(e,"http://www.w3.org/1999/xlink","href"),h=Xo(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",p=T(Object.keys(e.attributes)),g=p.next();!g.done;g=p.next()){g=g.value;var S=g.split(":"),E=id("http://www.w3.org/1999/xlink");S[0]==E&&delete e.attributes[g]}if(5<=u)return Vr(new ne(2,4,4028));if(h!="onLoad")return Vr(new ne(2,4,4027));var A=Wn([o],[f]);return a.request(0,Bn(A,t)).Aa(function(b){if(b=nd(b.data,e.tagName),!b)return Vr(new ne(2,4,4001,f));for(e.children=[];b.children.length;){var M=b.children.shift();M.tagName&&(M.parent=e),e.children.push(M)}M=T(Object.keys(b.attributes));for(var _=M.next();!_.done;_=M.next())_=_.value,e.attributes[_]=b.attributes[_];return Yf(e,t,n,A[0],a,u+1)})}function Yf(e,t,n,o,a,u){if(u=u===void 0?0:u,Xo(e,"http://www.w3.org/1999/xlink","href")){var f=FA(e,t,n,o,a,u);return n&&(f=f.Aa(void 0,function(){return Yf(e,t,n,o,a,u)})),f}f=[];for(var h=T(Lg(e)),p=h.next(),g={};!p.done;g={Uc:void 0},p=h.next())g.Uc=p.value,Xo(g.Uc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(S){return function(E){return E!==S.Uc}}(g)):g.Uc.tagName!="SegmentTimeline"&&f.push(Yf(g.Uc,t,n,o,a,u));return Sg(f).Aa(function(){return e})}function $A(e,t,n,o,a,u,f){var h,p=new Kt().S("sidx",function(g){h=zA(t,o,a,u,f,n,g)});if(e&&p.parse(e),h)return h;throw new ne(2,3,3004)}function zA(e,t,n,o,a,u,f){var h=[];f.reader.skip(4);var p=f.reader.P();if(p==0)throw new ne(2,3,3005);if(f.version==0)var g=f.reader.P(),S=f.reader.P();else g=f.reader.Nc(),S=f.reader.Nc();f.reader.skip(2);var E=f.reader.la();for(e=e+f.size+S,S=0;S<E;S++){var A=f.reader.P(),b=(A&2147483648)>>>31;A&=2147483647;var M=f.reader.P();if(f.reader.skip(4),b==1)throw new ne(2,3,3006);h.push(new at(g/p+n,(g+M)/p+n,function(){return u},e,e+A-1,t,n,o,a)),g+=M,e+=A}return f.parser.stop(),h}function wr(e){this.h=Qt(e),this.g=new qt(this.h,0)}wr.prototype.na=function(){return this.g.na()};function nr(e){var t=Mv(e);if(7<t.length)throw new ne(2,3,3002);var n=0;t=T(t);for(var o=t.next();!o.done;o=t.next())n=256*n+o.value;t=Mv(e);e:{o=T(VA);for(var a=o.next();!a.done;a=o.next())if(bn(t,new Uint8Array(a.value))){o=!0;break e}o=!1}if(o)t=e.h.byteLength-e.g.va();else{if(t.length==8&&t[1]&224)throw new ne(2,3,3001);for(a=o=0;a<t.length;a++){var u=t[a];o=a==0?u&(1<<8-t.length)-1:256*o+u}t=o}return t=e.g.va()+t<=e.h.byteLength?t:e.h.byteLength-e.g.va(),o=Qt(e.h,e.g.va(),t),e.g.skip(t),new HA(n,o)}function Mv(e){var t=e.g.va(),n=e.g.T();if(n==0)throw new ne(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Me(e.h,t,n)}var VA=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function HA(e,t){this.id=e,this.g=t}function Ep(e){if(8<e.g.byteLength)throw new ne(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new ne(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var o=e.g.getUint8(n);t=256*t+o}return t}function GA(e,t,n,o,a,u,f,h,p){function g(){return a}var S=[];e=new wr(e.g);for(var E=null,A=null;e.na();){var b=nr(e);if(b.id==187){var M=XA(b);M&&(b=n*M.dj,M=t+M.Ii,E!=null&&S.push(new at(E+f,b+f,g,A,M-1,u,f,h,p)),E=b,A=M)}}return E!=null&&S.push(new at(E+f,o+f,g,A,null,u,f,h,p)),S}function XA(e){var t=new wr(e.g);if(e=nr(t),e.id!=179)throw new ne(2,3,3013);if(e=Ep(e),t=nr(t),t.id!=183)throw new ne(2,3,3012);t=new wr(t.g);for(var n=0;t.na();){var o=nr(t);if(o.id==241){n=Ep(o);break}}return{dj:e,Ii:n}}function Rv(e,t,n){if(t=Ks(e,t,"Initialization"),!t)return null;var o=e.J.Ga(),a=t.attributes.sourceURL;a&&(o=Wn(o,[fi(a)])),a=0;var u=null;return(t=_t(t,"range",Xl))&&(a=t.start,u=t.end),n=new wi(function(){return o},a,u,Dv(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function WA(e,t,n){var o=Number(Ao(e,Qs,"presentationTimeOffset"))||0,a=Ao(e,Qs,"timescale"),u=1;a&&(u=Wo(a)||1);var f=o/u||0,h=Rv(e,Qs,n);YA(e,h);var p=Wh(e);return{fc:function(){var g=Ks(p,Qs,"RepresentationIndex"),S=p.J.Ga();return g&&(g=fi(g.attributes.sourceURL))&&(S=Wn(S,[g])),g=Lv(p),_v(p,t,h,S,g.start,g.end,f)}}}function _v(e,t,n,o,a,u,f){var h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie;return $(function(de){if(de.g==1)return h=e.presentationTimeline,p=!e.vb||!e.ka.ld,g=e.ka.start,S=e.ka.duration,E=e.J.mimeType.split("/")[1],A=t,b=null,M=[A(o,a,u,!1),E=="webm"?A(n.M(),n.Ha,n.sa,!0):null],A=null,k(de,Promise.all(M),2);if(_=de.h,R=_[0],B=_[1]||null,N=null,H=g-f,D=g,F=S?g+S:1/0,E=="mp4")var oe=$A(R,a,o,n,H,D,F);else{oe=R;var se=new wr(B);if(nr(se).id!=440786851)throw new ne(2,3,3008);var ue=nr(se);if(ue.id!=408125543)throw new ne(2,3,3009);se=ue.g.byteOffset,ue=new wr(ue.g);for(var xe=null;ue.na();){var ye=nr(ue);if(ye.id==357149030){xe=ye;break}}if(!xe)throw new ne(2,3,3010);for(xe=new wr(xe.g),ye=1e6,ue=null;xe.na();){var Ce=nr(xe);if(Ce.id==2807729)ye=Ep(Ce);else if(Ce.id==17545)if(Ce.g.byteLength==4)ue=Ce.g.getFloat32(0);else if(Ce.g.byteLength==8)ue=Ce.g.getFloat64(0);else throw new ne(2,3,3003)}if(ue==null)throw new ne(2,3,3011);if(xe=ye/1e9,ue*=xe,oe=nr(new wr(oe)),oe.id!=475249515)throw new ne(2,3,3007);oe=GA(oe,se,xe,ue,o,n,H,D,F)}for(N=oe,X=T(N),J=X.next();!J.done;J=X.next())ie=J.value,ie.codecs=e.J.codecs,ie.mimeType=e.J.mimeType;return h.sd(N),b=new Pt(N),p&&b.Bc(D,F,!0),de.return(b)})}function Qs(e){return e.Rc}function Lv(e){var t=Ks(e,Qs,"RepresentationIndex");return e=Ao(e,Qs,"indexRange"),e=Xl(e||""),t&&(e=_t(t,"range",Xl,e)),e}function YA(e,t){if(Pv(e,t),!Lv(e))throw new ne(2,4,4002)}function Pv(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=Rt&&n!="mp4"&&n!="webm")throw new ne(2,4,4006);if(n=="webm"&&!t)throw new ne(2,4,4005)}function Dv(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Jc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ja.label||null,roles:e.roles||null,language:e.ja.language||null}}function qA(e,t,n){var o=Rv(e,Ov,n),a=KA(e);if(!a.La&&!a.timeline&&1<a.Ic.length)throw new ne(2,4,4002);if(!a.La&&!e.ka.duration&&!a.timeline&&a.Ic.length==1)throw new ne(2,4,4002);if(a.timeline&&a.timeline.length==0)throw new ne(2,4,4002);var u=null,f=null;e.ta.id&&e.J.id&&(f=t[e.ta.id+","+e.J.id])&&(u=f.segmentIndex);var h=QA(e.ka.start,e.ka.duration,e.J.Ga,a,o,n,e.J.mimeType,e.J.codecs);return t=!u,u?u.rd(h,e.presentationTimeline.mb()):u=new Pt(h),e.presentationTimeline.sd(h),e.vb&&e.ka.ld||u.Bc(e.ka.start,e.ka.duration?e.ka.start+e.ka.duration:1/0,t),f&&(f.segmentIndex=u),{fc:function(){return u&&u.getNumReferences()!=0||u.Zd(h),Promise.resolve(u)}}}function Ov(e){return e.Pb}function KA(e){var t=ZA(e);e=kv(e,Ov);var n=e.vd;n==0&&(n=1);var o=0;return e.La?o=e.La*(n-1):e.timeline&&0<e.timeline.length&&(o=e.timeline[0].start),{La:e.La,startTime:o,vd:n,Nb:e.Nb,timeline:e.timeline,Ic:t}}function QA(e,t,n,o,a,u,f,h){var p=o.Ic.length;o.timeline&&o.timeline.length!=o.Ic.length&&(p=Math.min(o.timeline.length,o.Ic.length));for(var g=e-o.Nb,S=t?e+t:1/0,E=[],A=o.startTime,b={},M=0;M<p;b={ve:void 0,oe:void 0},M++){b.oe=o.Ic[M];var _=A;A=void 0,A=o.La!=null?_+o.La:o.timeline?o.timeline[M].end:_+t,b.ve=null,b=new at(e+_,e+A,function(R){return function(){return R.ve==null&&(R.ve=Wn(n(),[R.oe.zi])),R.ve}}(b),b.oe.start,b.oe.end,a,g,e,S,[],"",null,null,gr,u),b.codecs=h,b.mimeType=f,E.push(b)}return E}function ZA(e){return[e.J.Pb,e.ja.Pb,e.ta.Pb].filter($r).map(function(t){return Jt(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=fi(t.attributes.media);return t=_t(t,"mediaRange",Xl,{start:0,end:null}),{zi:n,start:t.start,end:t.end}})}function Nv(e,t,n,o,a,u,f,h,p){p||e.J.Gc||(e.J.Gc=Ao(e,Zr,"initialization"));var g=e.J.Gc?nk(e,f):null,S=JA(e);ek(S);var E=Wh(e);if(S.jd)return Pv(e,g),{fc:function(){var R=Wf(S.jd,E.J.id,null,null,E.bandwidth||null,null);return R=Wn(E.J.Ga(),[R]),_v(E,t,g,R,0,null,S.Nb)}};if(S.La)return o||e.ja.contentType==="image"||(e.presentationTimeline.xf(S.La),e.presentationTimeline.ce(e.ka.start)),{fc:function(){return tk(E,S,a,g,u,f,h)}};var A=null;o=o=null,e.ta.id&&e.J.id&&(o=e.ta.id+","+e.J.id,o=n[o])&&(A=o.segmentIndex);var b=e.ka.start,M=e.ka.duration?b+e.ka.duration:1/0,_=!(e.vb&&e.ka.ld);return A?(n=A,Uv(n,S,b,M,_,g),n.Ma(e.presentationTimeline.mb())):A=new qf(S,e.J.id,e.bandwidth,e.J.Ga,b,M,g,_,f,e.J.Kf),S.timeline&&e.ja.contentType!=="image"&&e.presentationTimeline.Ng(S.timeline,b),o&&e.vb&&(o.segmentIndex=A),{fc:function(){return A instanceof qf&&A.getNumReferences()==0&&Uv(A,S,b,M,_,g),Promise.resolve(A)}}}function Zr(e){return e.$b}function JA(e){var t=kv(e,Zr),n=Ao(e,Zr,"media"),o=Ao(e,Zr,"index");return{La:t.La,timescale:t.timescale,vd:t.vd,Nb:t.Nb,Zf:t.Zf,timeline:t.timeline,Zb:n&&fi(n),jd:o,mimeType:e.J.mimeType,codecs:e.J.codecs}}function ek(e){var t=e.jd?1:0;if(t+=e.timeline?1:0,t+=e.La?1:0,t==0)throw new ne(2,4,4002);if(t!=1&&(e.jd&&(e.timeline=null),e.La=null),!e.jd&&!e.Zb)throw new ne(2,4,4002)}function tk(e,t,n,o,a,u,f){function h(se){var ue=(se-_)*M,xe=ue+t.Nb,ye=ue+E;ue=ye+M;var Ce=Math.min(ue,g());return ye=new at(ye,Ce,function(){var _e=xe*R;return"BigInt"in d&&_e>Number.MAX_SAFE_INTEGER&&(_e=BigInt(xe)*BigInt(R)),_e=Wf(B,H,se,null,N,_e),Wn(D(),[_e])},0,null,o,F,E,g(),[],"",null,null,gr,u),ye.codecs=e.J.codecs,ye.mimeType=e.J.mimeType,ye.j=ue,ye}function p(){var se=[Math.max(S.mb(),E),Math.min(S.Wb(),g())].map(function(ue){return ue-E});return se=[Math.ceil(se[0]/M),Math.ceil(se[1]/M)-1],e.J.Ia&&se[1]++,se.map(function(ue){return ue+_})}function g(){var se=A!=null&&a[A]||b;return se?E+se:1/0}var S=e.presentationTimeline,E=e.ka.start,A=e.ta.id,b=e.ka.duration,M=t.La,_=t.vd,R=t.timescale,B=t.Zb,N=e.bandwidth||null,H=e.J.id,D=e.J.Ga,F=E-t.Nb,X=p();n=e.vb?Math.max(X[0],X[1]-n+1):X[0],f=f||X[1],X=[];for(var J=n;J<=f;++J){var ie=h(J);X.push(ie)}var de=new Pt(X);if(X=S.Wb()<g(),J=S.V(),X||J){var oe=Math.max(n,f+1);n=M,e.J.Ia&&(n=.1),de.ue(n,function(){var se=S.mb();de.Ma(se);var ue=T(p());ue.next(),ue=ue.next().value;for(var xe=[];oe<=ue;){var ye=h(oe);xe.push(ye),oe++}return se>g()&&!xe.length?null:xe})}return Promise.resolve(de)}function nk(e,t){var n=e.J.Gc;if(n||(n=Ao(e,Zr,"initialization")),!n)return null;n=fi(n);var o=e.J.id,a=e.bandwidth||null,u=e.J.Ga;return t=new wi(function(){var f=Wf(n,o,null,null,a,null);return Wn(u(),[f])},0,null,Dv(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function qf(e,t,n,o,a,u,f,h,p,g){Pt.call(this,[]),this.g=e,this.C=t,this.A=n,this.B=o,this.h=a,this.j=u,this.o=f,this.s=p,this.F=g,h&&Bv(this)}te(qf,Pt),s=qf.prototype,s.getNumReferences=function(){return this.g?this.g.timeline.length:0},s.release=function(){Pt.prototype.release.call(this),this.g=null},s.Ma=function(e){if(this.g){for(var t=0,n=this.g.timeline,o=0;o<n.length&&n[o].end+this.h<=e;o+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.O.length>=t&&(this.O=this.O.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function Uv(e,t,n,o,a,u){if(ik(e,u),e.g){if(n=e.g.timeline,e.g.Zb!==t.Zb&&(e.g.Zb=t.Zb),n.length){var f=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=f.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,L(t)),e.j!==o&&(e.j=o)}else e.g=t,e.h=n,e.j=o;a&&Bv(e)}function ik(e,t){if(e.o!==t){e.o=t,e=T(e.O);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&ny(n,t)}}function Bv(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.Ma(e.h)}}s.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,o=0;o<t.length;o++){var a=t[o],u=a.start+this.h;if(a=o<n?t[o+1].start+this.h:this.j===1/0?a.end+this.h:this.j,e>=u&&e<a)return o+this.i}return null},s.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.g)return null;var n=this.O[e];if(!n){var o=this.g.timeline[e],a=o.Si,u=this.g.Zf+o.$f;n=this.h-this.g.Nb;var f=this.h+o.end,h=f;e===this.getNumReferences()-1&&this.j!==1/0&&(h=this.j);for(var p=this.g.codecs,g=this.g.mimeType,S=[],E=(o.end-o.start)/o.zb,A={},b=0;b<o.zb;A={we:void 0,kh:void 0},b++){var M=o.start+E*b,_=M+E;A.kh=b+1,A.we=null,A=new at(this.h+M,this.h+_,function(R){return function(){return t.g?(R.we==null&&(R.we=jv(t.g.Zb,t.C,a,t.A,u,R.kh,t.B)),R.we):[]}}(A),0,null,this.o,n,this.h,this.j,[],"",null,null,gr,this.s),A.codecs=p,A.mimeType=g,this.F==0?0<b&&A.Xd():b%this.F!=0&&A.Xd(),S.push(A)}n=new at(this.h+o.start,h,function(){return 0<o.zb||!t.g?[]:jv(t.g.Zb,t.C,a,t.A,u,null,t.B)},0,null,this.o,n,this.h,this.j,S,"",null,null,gr,this.s,0<o.zb),n.codecs=p,n.mimeType=g,n.j=f,this.O[e]=n}return n};function jv(e,t,n,o,a,u,f){return e=Wf(e,t,n,u,o||null,a),Wn(f(),[e]).map(function(h){return h.toString()})}function Zs(e){this.o=null,this.A=e,this.G=new Cs,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}Zs.prototype.configure=function(e){this.o=e},Zs.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},Zs.prototype.setManifestType=function(e){this.s=e};function bu(e,t){var n,o,a,u,f,h,p;return $(function(g){if(g.g==1)return n=Wn(e.i,[ok(e,t)]),o=Bn(n,e.o.retryParameters),a=e.A.networkingEngine.request(8,o),Hr(e.G,a),Y(g,2),k(g,a.promise,4);if(g.g!=2)return u=g.h,f=nn(u.data),h=JSON.parse(f),h.VERSION==1&&rk(e,h,u.uri),K(g,0);if((p=ee(g))&&p.code==7001)return g.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new bt(function(){bu(e,t)}),e.g.Y(e.C),q(g)})}function ok(e,t){if(!e.m.length)return t;t=new wn(t);var n=e.B||e.m[0],o=Math.round(e.A.getBandwidthEstimate()),a=t.g;return e.s=="DASH"?(a.add("_DASH_pathway",n),a.add("_DASH_throughput",String(o))):e.s=="HLS"&&(a.add("_HLS_pathway",n),a.add("_HLS_throughput",String(o))),Bm(a)&&Na(t,a),t.toString()}function rk(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var o=t["RELOAD-URI"]||n;e.g=new bt(function(){bu(e,o)}),(n=t.TTL)&&(e.C=n),e.g.Y(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Js(e,t,n,o){var a=e.l.get(t);a||(a=new Map),a.set(n,o),e.l.set(t,a)}Zs.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Au(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var o=[],a=T(e.m),u=a.next(),f={};!u.done;f={Lc:void 0},u=a.next())if(f.Lc=u.value,u=t.get(f.Lc))o.push({Df:f.Lc,location:u});else if(u=e.F.find(function(p){return function(g){return g.wj==p.Lc}}(f))){var h=t.get(u["BASE-ID"]);h&&(u["URI-REPLACEMENT"].rh?(h=new wn(h),Tl(h,u["URI-REPLACEMENT"].rh),o.push({Df:f.Lc,location:h.toString()})):o.push({Df:f.Lc,location:h}))}for(a=Date.now(),f=T(e.j.keys()),u=f.next();!u.done;u=f.next())u=u.value,h=e.j.get(u),a>h&&e.j.delete(u);if(o=o.filter(function(p){for(var g=T(e.j.keys()),S=g.next();!S.done;S=g.next())if(S.value.includes(new wn(p.location).Eb))return!1;return!0}),o.length&&(e.B=o[0].Df),o=o.map(function(p){return p.location}),!o.length&&e.h)for(a=T(e.h.split(",")),f=a.next();!f.done;f=a.next())(f=t.get(f.value))&&(e.B=e.h,o.push(f));if(!o.length)for(t=T(t.values()),a=t.next();!a.done;a=t.next())o.push(a.value);return n?o:Wn(e.i,o)}function pi(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}s=pi.prototype,s.release=function(){for(var e=T(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},s.ei=function(){return this.j},s.jf=function(){return this.l.slice()},s.Nh=function(){return this.i};function Fv(e,t){var n=[],o=[],a=[],u=[];e=T(e);for(var f=e.next();!f.done;f=e.next()){var h=f.value;f=new Map(h.audioStreams.map(function(E){return[Ip(E),E]}));var p=new Map(h.videoStreams.map(function(E){return[kp(E),E]})),g=new Map(h.textStreams.map(function(E){return[Ru(E),E]}));if(h=new Map(h.imageStreams.map(function(E){return[_u(E),E]})),t){var S=Xv(Rt);g.set(Ru(S),S),S=Xv("image"),h.set(_u(S),S)}n.push(f),o.push(p),a.push(g),u.push(h)}return{jg:n,ph:o,lh:a,Eg:u}}s.Ke=function(e,t,n){n=n===void 0?!1:n;var o=this,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce,_e,Ee;return $(function(Be){if(Be.g==1){if(a=Mn,!t&&e.length==1)return u=Fv(e,!1),f=u.jg,h=u.ph,p=u.lh,g=u.Eg,o.h=Array.from(f[0].values()),o.g=Array.from(h[0].values()),o.l=Array.from(p[0].values()),o.i=Array.from(g[0].values()),Be.u(2);for(S=n?o.m.size:0,E=-1,A=0;A<e.length;A++)b=e[A],o.m.has(b.id)||(o.m.add(b.id),E==-1&&(E=A));return E==-1?Be.return():(M=Fv(e,!0),_=M.jg,R=M.ph,B=M.lh,N=M.Eg,k(Be,Promise.all([Sr(o,o.h,_,E,ku,ea,S),Sr(o,o.g,R,E,ku,ea,S),Sr(o,o.l,B,E,ku,ea,S),Sr(o,o.i,N,E,ku,ea,S)]),2))}if(H=0,D=[],o.g.length&&o.h.length)for(oe=T(o.h),se=oe.next();!se.done;se=oe.next())for(ue=se.value,xe=T(o.g),ye=xe.next();!ye.done;ye=xe.next())Ce=ye.value,_e=Dh(ue.drmInfos,Ce.drmInfos),ue.drmInfos.length&&Ce.drmInfos.length&&!_e.length||(Ee=H++,D.push({id:Ee,language:ue.language,disabledUntilTime:0,primary:ue.primary,audio:ue,video:Ce,bandwidth:(ue.bandwidth||0)+(Ce.bandwidth||0),drmInfos:_e,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(F=o.g.length?o.g:o.h,X=T(F),J=X.next();!J.done;J=X.next())ie=J.value,de=H++,D.push({id:de,language:ie.language,disabledUntilTime:0,primary:ie.primary,audio:ie.type==a.X?ie:null,video:ie.type==a.ga?ie:null,bandwidth:ie.bandwidth||0,drmInfos:ie.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});o.j=D,q(Be)})};function $v(e){var t,n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye;return $(function(Ce){switch(Ce.g){case 1:if(t=Mn,e.length==1)return Ce.return(e[0]);for(n=e.map(function(_e){return new Map(_e.filter(function(Ee){return Ee.type===t.X}).map(function(Ee){return[Ip(Ee),Ee]}))}),o=e.map(function(_e){return new Map(_e.filter(function(Ee){return Ee.type===t.ga}).map(function(Ee){return[kp(Ee),Ee]}))}),a=e.map(function(_e){return new Map(_e.filter(function(Ee){return Ee.type===t.ua}).map(function(Ee){return[Ru(Ee),Ee]}))}),u=e.map(function(_e){return new Map(_e.filter(function(Ee){return Ee.type===t.De}).map(function(Ee){return[_u(Ee),Ee]}))}),f=T(a),h=f.next();!h.done;h=f.next())p=h.value,g=Gv(t.ua),p.set(Ru(g),g);for(S=T(u),E=S.next();!E.done;E=S.next())A=E.value,b=Gv(t.De),A.set(_u(b),b);return M=new pi,k(Ce,Sr(M,[],n,0,Kf,Qf,0),2);case 2:return _=Ce.h,k(Ce,Sr(M,[],o,0,Kf,Qf,0),3);case 3:return R=Ce.h,k(Ce,Sr(M,[],a,0,Kf,Qf,0),4);case 4:return B=Ce.h,k(Ce,Sr(M,[],u,0,Kf,Qf,0),5);case 5:if(N=Ce.h,H=0,R.length&&_.length)for(ie=T(_),de=ie.next();!de.done;de=ie.next())for(oe=de.value,se=T(R),ue=se.next();!ue.done;ue=se.next())xe=ue.value,ye=H++,xe.variantIds.push(ye),oe.variantIds.push(ye);else for(D=R.concat(_),F=T(D),X=F.next();!X.done;X=F.next())J=X.value,J.variantIds=[H++];return Ce.return(R.concat(_).concat(B).concat(N))}})}function Sr(e,t,n,o,a,u,f){var h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de;return $(function(oe){switch(oe.g){case 1:for(h=[],p=0;p<n.length;p++)p>=o?h.push(new Set(n[p].values())):h.push(new Set);g=T(t),S=g.next();case 2:if(S.done){oe.u(4);break}return E=S.value,k(oe,sk(e,E,n,o,u,h,f),5);case 5:if(A=oe.h,!A)throw new ne(2,4,4037);S=g.next(),oe.u(2);break;case 4:for(b=T(h),M=b.next();!M.done;M=b.next())for(_=M.value,R=T(_),B=R.next();!B.done;B=R.next())N=B.value,(H=ak(e,N,n,a,u,h))&&t.push(H);for(D=T(h),F=D.next();!F.done;F=D.next())for(X=F.value,J=T(X),ie=J.next(),de={};!ie.done;de={Tf:void 0},ie=J.next())if(de.Tf=ie.value,!Ap(de.Tf)&&t.some(function(se){return function(ue){return bp(e,se.Tf,ue)}}(de)))throw new ne(2,4,4037);return oe.return(t)}})}function sk(e,t,n,o,a,u,f){return $(function(h){return h.g==1?(Hv(e,n,t,0<f),t.matchedStreams?t.segmentIndex?k(h,zv(t,o+f),2):h.u(2):h.return(!1)):(Vv(t,o,a,u,f),h.return(!0))})}function zv(e,t){var n,o,a,u,f,h,p;return $(function(g){if(g.g==1){for(n=[],o=e.matchedStreams,a=T(o),u=a.next();!u.done;u=a.next())f=u.value,n.push(f.createSegmentIndex()),f.trickModeVideo&&!f.trickModeVideo.segmentIndex&&n.push(f.trickModeVideo.createSegmentIndex());return k(g,Promise.all(n),2)}if(e.segmentIndex instanceof gn)for(h=t;h<o.length;h++)p=o[h],p.segmentIndex&&e.segmentIndex.g.push(p.segmentIndex);q(g)})}function ak(e,t,n,o,a,u){if(Ap(t))return null;var f=o(t);return Hv(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return $(function(h){return f.segmentIndex?h.u(0):(f.segmentIndex=new gn,k(h,zv(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(Vv(f,0,a,u,0),f)}function Vv(e,t,n,o,a){var u=e.matchedStreams;for(t+=a;t<u.length;t++){var f=u[t];n(e,f);var h=!0;if(e.type=="audio"&&zr(e.language,f.language)==0&&(h=!1),h&&(o[t-a].delete(f),f.fullMimeTypes))for(f=T(f.fullMimeTypes.values()),h=f.next();!h.done;h=f.next())e.fullMimeTypes.add(h.value)}}function ku(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=T(t.matchedStreams),o=n.next();!o.done;o=n.next())o=o.value,o.segmentIndex&&(o.segmentIndex.release(),o.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Kf(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function ea(e,t){function n(f,h){f||(f=[]),h=T(h);for(var p=h.next();!p.done;p=h.next())p=p.value,f.includes(p)||f.push(p);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var o=T(t.keyIds),a=o.next();!a.done;a=o.next())e.keyIds.add(a.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),o=Dh(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!o.length)throw new ne(2,4,4038);if(e.drmInfos=o,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),o=T(t.closedCaptions),a=o.next();!a.done;a=o.next()){var u=T(a.value);a=u.next().value,u=u.next().value,e.closedCaptions.set(a,u)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=ku(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),ea(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&ea(e.trickModeVideo,t)}function Qf(e,t){var n=e.roles;n||(n=[]);for(var o=T(t.roles),a=o.next();!a.done;a=o.next())a=a.value,n.includes(a)||n.push(a);for(e.roles=n,n=T(t.keyIds),o=n.next();!o.done;o=n.next())e.keyIds.add(o.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,L(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=T(t.closedCaptions),n=t.next();!n.done;n=t.next())o=T(n.value),n=o.next().value,o=o.next().value,e.closedCaptions.set(n,o)}function Hv(e,t,n,o){o=o!==void 0&&o?n.matchedStreams:[],t=T(t);for(var a=t.next();!a.done;a=t.next()){if(a=uk(e,a.value,n),!a)return;o.push(a)}n.matchedStreams=o}function uk(e,t,n){var o={audio:Ip,video:kp,text:Ru,image:_u}[n.type],a=null,u=o(n);if(t.has(u))a=t.get(u);else{u={audio:function(g,S){return bp(e,g,S)},video:function(g,S){return bp(e,g,S)},text:lk,image:fk}[n.type];for(var f={audio:ck,video:hk,text:dk,image:pk}[n.type],h=T(t.values()),p=h.next();!p.done;p=h.next())p=p.value,!u(n,p)||n.fastSwitching!=p.fastSwitching||a&&!f(n,a,p)||(a=p)}return e.s&&!Ap(a)&&t.delete(o(a)),a}function Iu(e,t){return e.mimeType!=t.mimeType?!1:Zf(e.codecs)===Zf(t.codecs)}s.Zg=function(e){this.o=e},s.gh=function(e){this.s=e};function bp(e,t,n){return!(!Iu(t,n)&&!e.o||t.drmInfos&&!jm(t.drmInfos,n.drmInfos))}function lk(e,t){return t.language?!(e.forced!==t.forced||zr(e.language,t.language)==0||t.kind!=e.kind):!0}function fk(){return!0}function ck(e,t,n){var o=Iu(e,t),a=Iu(e,n);if(o&&!a)return!1;if(!o&&a||(o=zr(e.language,t.language),a=zr(e.language,n.language),a>o))return!0;if(a<o)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(u){return e.roles.includes(u)}),a=n.roles.filter(function(u){return e.roles.includes(u)}),a.length>o.length)return!0;if(a.length<o.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(o=Mu(e.channelsCount,t.channelsCount,n.channelsCount),o==ko?!0:o==ir?!1:(o=Mu(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),o==ko?!0:o==ir?!1:!!(e.bandwidth&&Wv(e.bandwidth,t.bandwidth,n.bandwidth)==ko)))}function hk(e,t,n){var o=Iu(e,t),a=Iu(e,n);if(o&&!a)return!1;if(!o&&a||(o=Mu(e.width*e.height,t.width*t.height,n.width*n.height),o==ko))return!0;if(o==ir)return!1;if(e.frameRate){if(o=Mu(e.frameRate,t.frameRate,n.frameRate),o==ko)return!0;if(o==ir)return!1}return!!(e.bandwidth&&Wv(e.bandwidth,t.bandwidth,n.bandwidth)==ko)}function dk(e,t,n){var o=zr(e.language,t.language),a=zr(e.language,n.language);if(a>o)return!0;if(a<o)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(u){return e.roles.includes(u)}),a=n.roles.filter(function(u){return e.roles.includes(u)}),a.length>o.length)return!0;if(a.length<o.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function pk(e,t,n){return Mu(e.width*e.height,t.width*t.height,n.width*n.height)==ko}function Gv(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Xv(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pt([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Mu(e,t,n){if(t==e&&e!=n)return ir;if(n==e&&e!=t)return ko;if(t>e){if(n<=e||n-e<t-e)return ko;if(n-e>t-e)return ir}else{if(n>e)return ir;if(e-n<e-t)return ko;if(e-n>e-t)return ir}return Yv}function Wv(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?ko:t<e?ir:Yv}function Ap(e){switch(e.type){case Rt:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function kp(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,Zf(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function Ip(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,Zf(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Ru(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function _u(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Zf(e){if(!Mp.has(e)){var t=ci(e);Mp.set(e,t)}return Mp.get(e)}me("shaka.util.PeriodCombiner",pi),pi.prototype.setUseStreamOnce=pi.prototype.gh,pi.prototype.setAllowMultiTypeVariants=pi.prototype.Zg,pi.prototype.combinePeriods=pi.prototype.Ke,pi.prototype.getImageStreams=pi.prototype.Nh,pi.prototype.getTextStreams=pi.prototype.jf,pi.prototype.getVariants=pi.prototype.ei;var ko=1,Yv=0,ir=-1,Mp=new Map;function mk(e,t){var n=new DOMParser,o=gk.value()(e);e=null;try{e=n.parseFromString(o,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function qv(e,t){try{var n=Fo(e);return mk(n,t)}catch{return null}}var gk=new ls(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Jf(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.ea=1,this.B=[],this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.o=new Map,this.s={},this.ba={},this.m=new pi,this.H=0,this.da=new ot(5),this.I=new bt(function(){if(e.G&&!e.g.continueLoadingWhenPaused&&(e.C.jb(e.G,"timeupdate"),e.G.paused)){e.C.ha(e.G,"timeupdate",function(){return tx(e)});return}tx(e)}),this.N=new Cs,this.L=null,this.fa=[],this.R=1/0,this.F=!1,this.h=null,this.K=0,this.U=!1,this.C=new Ae,this.G=null,this.Z=!1}s=Jf.prototype,s.configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.V()&&this.I.tc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Zg(this.g.dash.multiTypeVariantsAllowed&&xt()),this.m.gh(this.g.dash.useStreamOnceInPeriodFlattening))},s.start=function(e,t){var n=this,o;return $(function(a){if(a.g==1)return n.F=t.isLowLatencyMode(),n.A=[e],n.j=t,k(a,Rp(n),2);if(o=a.h,n.j&&_p(n,o),!n.j)throw new ne(2,7,7001);return a.return(n.i)})},s.stop=function(){for(var e=T(Object.values(this.s)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.s={},this.o.clear(),this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.m=null,this.I!=null&&(this.I.stop(),this.I=null),this.h&&this.h.destroy(),this.C&&(this.C.release(),this.C=null),this.N.destroy()},s.update=function(){var e=this,t;return $(function(n){if(n.g==1)return Y(n,2),k(n,Rp(e),4);if(n.g!=2)return K(n,0);if(t=ee(n),!e.j||!t)return n.return();e.j.onError(t),q(n)})},s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Wb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,_p(this,0))}}},s.banLocation=function(e){this.h&&this.h.banLocation(e)},s.setMediaElement=function(e){this.G=e};function Rp(e){var t,n,o,a,u,f,h,p,g,S;return $(function(E){return E.g==1?(t=4,n="MPD",o=Rk(e),a=e.A,o.length?(a=o,n="Patch",t=6):1<e.A.length&&e.h&&(u=Au(e.h,"Location",!0),u.length&&(a=u)),f=Bn(a,e.g.retryParameters),h=Date.now(),k(E,Pp(e,f,0,{type:t}),2)):E.g!=3?(p=E.h,e.j?(p.uri&&p.uri!=p.originalUri&&!e.A.includes(p.uri)&&e.A.unshift(p.uri),k(E,yk(e,p.data,p.uri,n),3)):E.return(0)):(g=Date.now(),S=(g-h)/1e3,e.da.sample(1,S),E.return(S))})}function yk(e,t,n,o){var a,u,f,h,p,g,S,E,A,b;return $(function(M){if(M.g==1){if(a=t,u=e.g.dash.manifestPreprocessor,f=gf,u!=f){if(Tt("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),h=qv(a,o),!h)throw new ne(2,4,4001,n);u(h),a=So(h.outerHTML)}if(p=nd(a,o),!p)throw new ne(2,4,4001,n);return g=e.g.dash.manifestPreprocessorTXml,S=yf,g!=S&&g(p),o==="Patch"?M.return(vk(e,p)):e.g.dash.disableXlinkProcessing?M.return(Kv(e,p,n)):(E=e.g.dash.xlinkFailGracefully,A=Yf(p,e.g.retryParameters,E,n,e.j.networkingEngine),Hr(e.N,A),k(M,A.promise,2))}return b=M.h,M.return(Kv(e,b,n))})}function Kv(e,t,n){var o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce,_e,Ee,Be,yt,Mt,ln,Dt,dn,En,fn,jt,yn,Dn,On,Mi,Ri,mo,rr,Er,ua,sr,Dc,Wu,Yu;return $(function(Io){switch(Io.g){case 1:for(e.h&&e.h.l.clear(),o=[n],a=[],u=new Map,f=Jt(t,"Location"),h=T(f),p=h.next();!p.done;p=h.next())g=p.value,S=g.attributes.serviceLocation,(E=lo(g))&&(A=Wn(o,[E])[0],S&&(e.h?Js(e.h,"Location",S,A):u.set(S,A)),a.push(A));if(e.h?(b=Au(e.h,"Location",!0),0<b.length&&(o=e.A=b)):a.length&&(o=e.A=a),e.l.ae=t.attributes.id||"",e.l.td=_t(t,"publishTime",mr)||0,e.B=Jt(t,"PatchLocation"),M=Promise.resolve(),(_=co(t,"ContentSteering"))&&e.j)for(R=_.attributes.defaultServiceLocation,e.h?(e.h.i=o,e.h.h=R):(e.h=new Zs(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=o,e.h.h=R,(B=lo(_))&&(_t(_,"queryBeforeStart",od,!1)?M=bu(e.h,B):bu(e.h,B))),N=T(u.keys()),H=N.next();!H.done;H=N.next())D=H.value,F=u.get(D),Js(e.h,"Location",D,F);if(X=Jt(t,"BaseURL"),ie=!1,e.h)for(de=T(X),oe=de.next();!oe.done;oe=de.next())se=oe.value,ue=se.attributes.serviceLocation,xe=lo(se),ue&&xe&&(Js(e.h,"BaseURL",ue,xe),ie=!0);if(ie&&e.h||(ye=X.map(lo),J=Wn(o,ye)),Ce=function(){return e.h&&ie?Au(e.h,"BaseURL"):J||[]},e.l.Ga=Ce,_e=0,X&&X.length&&(_e=_t(X[0],"availabilityTimeOffset",Yl)||0),e.l.Ia=_e,Ee=e.g.dash.ignoreMinBufferTime,Be=0,Ee||(Be=_t(t,"minBufferTime",Oo)||0),e.H=_t(t,"minimumUpdatePeriod",Oo,-1),yt=_t(t,"availabilityStartTime",mr),Mt=_t(t,"timeShiftBufferDepth",Oo),ln=e.g.dash.ignoreSuggestedPresentationDelay,Dt=null,ln||(Dt=_t(t,"suggestedPresentationDelay",Oo)),dn=e.g.dash.ignoreMaxSegmentDuration,En=null,dn||(En=_t(t,"maxSegmentDuration",Oo)),fn=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.Z=e.i.presentationTimeline.V()&&fn=="static"),e.l.type=fn,e.i)for(jt=e.i.presentationTimeline,yn=T(Object.values(e.s)),Dn=yn.next();!Dn.done;Dn=yn.next())On=Dn.value,On.segmentIndex&&On.segmentIndex.Ma(jt.mb());else Mi=e.g.defaultPresentationDelay||1.5*Be,Ri=Dt??Mi,jt=new st(yt,Ri,e.g.dash.autoCorrectDrift);return jt.sc(fn=="static"),jt.V()&&!isNaN(e.g.availabilityWindowOverride)&&(Mt=e.g.availabilityWindowOverride),Mt==null&&(Mt=1/0),jt.pe(Mt),mo=t.attributes.profiles||"",e.l.profiles=mo.split(","),rr={vb:fn!="static",presentationTimeline:jt,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:_e,Kb:null,profiles:mo.split(","),roles:null},e.K=0,Er=ex(e,rr,Ce,t),ua=Er.duration,sr=Er.periods,(fn!="static"||e.Z)&&Er.rg||jt.Za(ua||1/0),e.U&&!e.F&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.F=e.j.isLowLatencyMode()),e.F&&jt.$g(e.R),jt.xf(En||1),k(Io,M,2);case 2:return e.F&&(Be=0,Dc=Dt??e.g.defaultPresentationDelay,jt.Of(Dc)),e.i?(e.i.periodCount=sr.length,e.i.gapCount=e.K,k(Io,Qv(e,sr,!1),4)):k(Io,e.m.Ke(sr,rr.vb),6);case 6:if(e.i={presentationTimeline:jt,variants:e.m.j,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:Be||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:xk(t),nextUrl:wk(t),periodCount:sr.length,gapCount:e.K,isLowLatency:e.U},!jt.nh()){Io.u(7);break}return Wu=Jt(t,"UTCTiming"),k(Io,Ik(e,Ce,Wu),8);case 8:if(Yu=Io.h,!e.j)return Io.return();jt.ah(Yu);case 7:jt.Wd();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),q(Io)}})}function Qv(e,t,n){var o;return $(function(a){if(a.g==1)return k(a,e.m.Ke(t,!0,n),2);e.i.variants=e.m.j,o=e.m.jf(),0<o.length&&(e.i.textStreams=o),e.i.imageStreams=e.m.i,e.j.filter(e.i),q(a)})}function vk(e,t){var n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue;return $(function(xe){if(xe.g==1){if(n=t.attributes.mpdId,o=_t(t,"originalPublishTime",mr),!n||n!==e.l.ae||o!==e.l.td)throw e.B=[],new ne(1,4,4052);for(a=[],u=[],f=new Set,h=T(Lg(t)),p=h.next();!p.done;p=h.next())if(g=p.value,S=ql(g.attributes.sel||""),E=S[S.length-1],A=lo(g)||"",E.name==="MPD")if(E.Sb==="mediaPresentationDuration"){b=lo(g)||"";var ye=Oo(b);if(ye!=null){e.l.Kb=ye;for(var Ce=T(e.o.values()),_e=Ce.next();!_e.done;_e=Ce.next())_e.value.Kb=ye}}else if(E.Sb==="type"){for(e.i.presentationTimeline.sc(A=="static"),e.l.type=A,ye=T(e.o.values()),Ce=ye.next();!Ce.done;Ce=ye.next())Ce.value.vb=A=="dynamic";A=="static"&&(e.H=-1)}else E.Sb==="publishTime"?e.l.td=mr(A)||0:E.Sb===null&&g.tagName==="add"&&u.push(g);else if(E.name==="PatchLocation")Dg(e.B,g);else if(E.name==="Period"){if(g.tagName==="add")u.push(g);else if(g.tagName==="remove"&&E.id){ye=e,Ce=E.id,ye.i.periodCount--,_e=T(ye.o.keys());for(var Ee=_e.next();!Ee.done;Ee=_e.next())if(Ee=Ee.value,Ee.startsWith(Ce)){var Be=ye.o.get(Ee);Ks(Be,Zr,"SegmentTimeline").children=[],Jv(ye,Ee),ye.o.delete(Ee)}}}else if(E.name==="SegmentTemplate"){if(Ce=ql(g.attributes.sel||""),ye=Ce[Ce.length-1],ye.Sb){for(Ce=Zv(e,Ce),_e=lo(g)||"",Ee=T(Ce),Be=Ee.next();!Be.done;Be=Ee.next())Be=e.o.get(Be.value),Ng(Be.J.$b,g.tagName,ye.Sb,_e);ye=Ce}else ye=[];for(M=ye,_=T(M),R=_.next();!R.done;R=_.next())B=R.value,f.add(B)}else if(E.name==="SegmentTimeline"||E.name==="S"){for(ye=ql(g.attributes.sel||""),ye=Zv(e,ye),Ce=T(ye),_e=Ce.next();!_e.done;_e=Ce.next())_e=e.o.get(_e.value),_e=Ks(_e,Zr,"SegmentTimeline"),Ee=Jt(_e,"S"),Dg(Ee,g),_e.children=Ee;for(N=ye,H=T(N),D=H.next();!D.done;D=H.next())F=D.value,f.add(F)}for(X=T(f),J=X.next();!J.done;J=X.next())ie=J.value,Jv(e,ie);for(de=T(u),oe=de.next();!oe.done;oe=de.next())se=oe.value,a.push.apply(a,L(ex(e,{vb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:e.l.Ia,profiles:e.l.profiles,Kb:e.l.Kb,roles:null},e.l.Ga,se).periods));return a.length?(e.i.periodCount+=a.length,e.i.gapCount=e.K,k(xe,Qv(e,a,!0),2)):xe.u(2)}e.l.type=="static"&&(ue=e.l.Kb,e.i.presentationTimeline.Za(ue||1/0)),q(xe)})}function Zv(e,t){var n="",o="",a=-1,u="";t=T(t);for(var f=t.next();!f.done;f=t.next())f=f.value,f.name==="Period"?n=f.id:f.name==="AdaptationSet"?(o=f.id,f.position!==null&&(a=f.position)):f.name==="Representation"&&(u=f.id);if(t=[],u)t.push(n+","+u);else if(o)for(a=T(e.o.values()),e=a.next();!e.done;e=a.next())e=e.value,e.ta.id===n&&e.ja.id===o&&e.J.id&&t.push(n+","+e.J.id);else if(-1<a)for(o=T(e.o.values()),e=o.next();!e.done;e=o.next())e=e.value,e.ta.id===n&&e.ja.position===a&&e.J.id&&t.push(n+","+e.J.id);return t}function Jv(e,t){var n=e.o.get(t),o=e.s[t];o.segmentIndex&&o.segmentIndex.Ma(e.i.presentationTimeline.mb());try{var a=Nv(n,function(u,f,h,p){return ix(e,u,f,h,p)},e.s,!0,e.g.dash.initialSegmentLimit,e.ba,n.J.aesKey,null,!0);o.createSegmentIndex=function(){return $(function(u){if(u.g==1)return o.segmentIndex?u.u(0):k(u,a.fc(),3);o.segmentIndex=u.h,q(u)})}}catch(u){if(t=n.J.contentType,t!=Rt&&t!="application"&&t!="image"||u.code!=4002)throw u}}function xk(e){var t=co(e,"ServiceDescription");if(!t||(e=co(t,"Latency"),t=co(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function wk(e){if(e=Jt(e,"SupplementalProperty"),!e.length)return null;e=T(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function ex(e,t,n,o){var a=t.Kb;a||(a=_t(o,"mediaPresentationDuration",Oo),e.l.Kb=a);var u=0;e.i&&e.i.presentationTimeline&&e.Z&&(u=e.i.presentationTimeline.Vb());var f=[],h=u;o=Jt(o,"Period");for(var p=0;p<o.length;p++){var g=o[p],S=o[p+1],E=_t(g,"start",Oo,h),A=g.attributes.id,b=_t(g,"duration",Oo),M=null;if(S){var _=_t(S,"start",Oo);_!=null&&(M=_-E)}else a!=null&&(M=a-E+u);if(_=WC,M&&b&&Math.abs(M-b)>_&&M>b&&e.K++,M==null&&(M=b),!(e.L!==null&&A!==null&&E!==null&&E<e.L)||e.fa.includes(A)||p+1==o.length){if(E!==null&&(e.L===null||E>e.L)&&(e.L=E),h=Sk(e,t,n,{start:E,duration:M,node:g,ld:M==null||!S}),f.push(h),t.ta.id&&M&&(e.ba[t.ta.id]=M),M==null){h=null;break}h=E+M}}return e.fa=f.map(function(R){return R.id}),a!=null?{periods:f,duration:a+u,rg:!1}:{periods:f,duration:h,rg:!0}}function Sk(e,t,n,o){t.ta=Lp(e,o.node,null,n),t.ka=o,t.ta.Ia=t.Ia,t.ta.id||(t.ta.id="__shaka_period_"+o.start);var a=Jt(o.node,"EventStream");n=t.presentationTimeline.mb(),a=T(a);for(var u=a.next();!u.done;u=a.next())Mk(e,o.start,o.duration,u.value,n);if(n=Jt(o.node,"AdaptationSet").map(function(S,E){return Ck(e,t,E,S)}).filter($r),t.vb){for(o=[],a=T(n),u=a.next();!u.done;u=a.next()){u=T(u.value.Mi);for(var f=u.next();!f.done;f=u.next())o.push(f.value)}if(o.length!=new Set(o).size)throw new ne(2,4,4018)}for(o=n.filter(function(S){return!S.Yf}),n=n.filter(function(S){return S.Yf}),n=T(n),a=n.next();!a.done;a=n.next()){a=a.value,u=a.Yf.split(" "),f=T(o);for(var h=f.next();!h.done;h=f.next())if(h=h.value,u.includes(h.id)){h=T(h.streams);for(var p=h.next(),g={};!p.done;g={Sf:void 0},p=h.next())g.Sf=p.value,g.Sf.trickModeVideo=a.streams.find(function(S){return function(E){return ci(S.Sf.codecs)==ci(E.codecs)}}(g))}}if(n=ec(e.g.disableAudio,o,"audio"),a=ec(e.g.disableVideo,o,"video"),u=ec(e.g.disableText,o,Rt),o=ec(e.g.disableThumbnails,o,"image"),a.length===0&&n.length===0)throw new ne(2,4,4004);return{id:t.ta.id,audioStreams:n,videoStreams:a,textStreams:u,imageStreams:o}}function ec(e,t,n){return e||!t.length?[]:t.reduce(function(o,a){return a.contentType!=n||o.push.apply(o,L(a.streams)),o},[])}function Ck(e,t,n,o){function a(se){switch(se){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function u(se){switch(se){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ja=Lp(e,o,t.ta,null),t.ja.position=n;var f=!1;n=Jt(o,"Role");var h=n.map(function(se){return se.attributes.value}).filter($r),p=void 0,g=t.ja.contentType==Rt;g&&(p="subtitle"),n=T(n);for(var S=n.next();!S.done;S=n.next()){S=S.value;var E=S.attributes.schemeIdUri;if(E==null||E=="urn:mpeg:dash:role:2011")switch(S=S.attributes.value,S){case"main":f=!0;break;case"caption":case"subtitle":p=S}}var A,b;E=Jt(o,"EssentialProperty"),n=null;var M=!1;S=!1,E=T(E);for(var _=E.next();!_.done;_=E.next()){_=_.value;var R=_.attributes.schemeIdUri;R=="http://dashif.org/guidelines/trickmode"?n=_.attributes.value:R=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?A=u(parseInt(_.attributes.value,10)):R=="urn:mpeg:mpegB:cicp:ColourPrimaries"?b=a(parseInt(_.attributes.value,10)):R!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(R=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?M=!0:S=!0)}var B=null;for(E=Jt(o,"SupplementalProperty"),E=T(E),_=E.next();!_.done;_=E.next())_=_.value,R=_.attributes.schemeIdUri,R=="http://dashif.org/guidelines/last-segment-number"?B=parseInt(_.attributes.value,10)-1:R=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?A=u(parseInt(_.attributes.value,10)):R=="urn:mpeg:mpegB:cicp:ColourPrimaries"&&(b=a(parseInt(_.attributes.value,10)));E=Jt(o,"Accessibility");var N=new Map,H;for(E=T(E),_=E.next();!_.done;_=E.next())if(R=_.value,_=R.attributes.schemeIdUri,R=R.attributes.value,_!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(_!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)_=="urn:mpeg:dash:role:2011"?R!=null&&(h.push(R),R=="captions"&&(p="caption")):_=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(R=="1"?H="visually impaired":R=="2"&&(H="hard of hearing"));else if(_=1,R!=null){R=T(R.split(";"));for(var D=R.next();!D.done;D=R.next()){var F=D.value,X=D=void 0;F.includes("=")?(F=F.split("="),D="svc"+F[0],X=F[1].split(",")[0].split(":").pop()):(D="svc"+_,_++,X=F),N.set(D,$t(X))}}else N.set("svc1","und");else if(_=1,R!=null)for(R=R.split(";"),D=T(R),F=D.next();!F.done;F=D.next()){X=F.value;var J=F=void 0;X.includes("=")?(X=X.split("="),F=X[0].startsWith("CC")?X[0]:"CC"+X[0],J=X[1]||"und"):(F="CC"+_,R.length==2?_+=2:_++,J=X),N.set(F,$t(J))}else N.set("CC1","und");if(S)return null;S=Jt(o,"ContentProtection");var ie=Av(S,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),de=$t(t.ja.language||"und"),oe=t.ja.label;if(S=Jt(o,"Representation"),o=S.map(function(se){return(se=Tk(e,t,ie,p,de,oe,f,h,N,se,H,B))&&(se.hdr=se.hdr||A,se.colorGamut=se.colorGamut||b,se.fastSwitching=M),se}).filter(function(se){return!!se}),o.length==0){if(n=t.ja.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||g||n)return null;throw new ne(2,4,4003)}if(!t.ja.contentType||t.ja.contentType=="application")for(t.ja.contentType=ox(o[0].mimeType,o[0].codecs),g=T(o),E=g.next();!E.done;E=g.next())E.value.type=t.ja.contentType;for(g=t.ja.id||"__fake__"+e.ea++,E=T(o),_=E.next();!_.done;_=E.next()){for(_=_.value,R=T(ie.drmInfos),D=R.next();!D.done;D=R.next())D=D.value,D.keyIds=D.keyIds&&_.keyIds?new Set([].concat(L(D.keyIds),L(_.keyIds))):D.keyIds||_.keyIds;e.g.dash.enableAudioGroups&&(_.groupId=g)}return S=S.map(function(se){return se.attributes.id}).filter($r),{id:g,contentType:t.ja.contentType,language:de,ek:f,streams:o,drmInfos:ie.drmInfos,Yf:n,Mi:S}}function Tk(e,t,n,o,a,u,f,h,p,g,S,E){t.J=Lp(e,g,t.ja,null);var A=t.J.id;if(e.R=Math.min(e.R,t.J.Ia),e.U=0<e.R,!kk(t.J))return null;var b=t.ka.start;t.bandwidth=_t(g,"bandwidth",Wo)||0,t.roles=h;var M=t.J.contentType,_=M==Rt||M=="application";M=M=="image";try{var R=void 0;if(n.Fe){var B=t.J.Ga,N=Wn(B(),[n.Fe.ti]),H=Bn(N,e.g.retryParameters);R={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var ue,xe,ye;return $(function(Ce){if(Ce.g==1)return k(Ce,Pp(e,H,6),2);if(Ce.g!=3){if(ue=Ce.h,!ue.data||ue.data.byteLength!=16)throw new ne(2,4,4049);return xe={name:"AES-CBC"},ye=R,k(Ce,d.crypto.subtle.importKey("raw",ue.data,xe,!0,["decrypt"]),3)}ye.cryptoKey=Ce.h,R.fetchKey=void 0,q(Ce)})}}}if(t.J.aesKey=R,B=function(ue,xe,ye,Ce){return ix(e,ue,xe,ye,Ce)},t.J.Rc)var D=WA(t,B,R);else if(t.J.Pb)D=qA(t,e.s,R);else if(t.J.$b)D=Nv(t,B,e.s,!!e.i,e.g.dash.initialSegmentLimit,e.ba,R,E,!1);else{var F=t.ka.duration||0,X=t.J.Ga,J=t.J.mimeType,ie=t.J.codecs;D={fc:function(){var ue=bd(b,F,X());return ue.Hb(function(xe){xe.mimeType=J,xe.codecs=ie}),Promise.resolve(ue)}}}}catch(ue){if((_||M)&&ue.code==4002)return null;throw ue}E=Jt(g,"ContentProtection"),E=_A(E,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),E=new Set(E?[E]:[]),B=!1,Jt(g,"SupplementalProperty").some(function(ue){return ue.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ue.attributes.value=="JOC"})&&(B=!0),N=!1,_&&(N=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var de;if(M&&((g=Jt(g,"EssentialProperty").find(function(ue){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(ue.attributes.schemeIdUri)}))&&(de=g.attributes.value),!de))return null;var oe;g=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(g.includes("hvc1.2.4.L153.B0")||g.includes("hev1.2.4.L153.B0"))&&(oe="PQ"),_=t.J.id?t.ta.id+","+t.J.id:"",e.B.length&&A&&e.o.set(t.ta.id+","+A,Ek(t));var se=_&&e.s[_]?e.s[_]:{id:e.ea++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){se.segmentIndex&&(se.segmentIndex.release(),se.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:g,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:o,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:E,language:a,originalLanguage:t.ja.language,label:u,type:t.ja.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:N,channelsCount:t.J.Jc,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:B,closedCaptions:p,hdr:oe,colorGamut:void 0,videoLayout:void 0,tilesLayout:de,accessibilityPurpose:S,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Rn(t.J.mimeType,t.J.codecs)])};return se.createSegmentIndex=function(){var ue;return $(function(xe){if(xe.g==1)return se.segmentIndex?xe.u(0):(ue=se,k(xe,D.fc(),3));ue.segmentIndex=xe.h,q(xe)})},_&&t.vb&&!e.s[_]&&(e.s[_]=se),se}function Ek(e){for(var t={},n=T(Object.keys(e)),o=n.next();!o.done;o=n.next())if(o=o.value,["period","adaptationSet","representation"].includes(o)){var a=e[o];t[o]={Rc:null,Pb:null,$b:a.$b,Ga:a.Ga,width:a.width,height:a.height,contentType:a.contentType,mimeType:a.mimeType,language:a.language,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,emsgSchemeIdUris:a.emsgSchemeIdUris,id:a.id,position:a.position,Jc:a.Jc,audioSamplingRate:a.audioSamplingRate,Ia:a.Ia,Gc:a.Gc}}else o=="periodInfo"?(a=e[o],t[o]={start:a.start,duration:a.duration,node:null,ld:a.ld}):t[o]=e[o];return t}function tx(e){var t,n;return $(function(o){switch(o.g){case 1:return t=0,Y(o,2),k(o,Rp(e),4);case 4:t=o.h,K(o,3);break;case 2:if(n=ee(o),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),o.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return o.return();e.j.onManifestUpdated(),_p(e,t),q(o)}})}function _p(e,t){if(!(0>e.H)){var n=e.H;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.I.Y(Math.max(n-t,St(e.da)))}}function Lp(e,t,n,o){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Jc:null,audioSamplingRate:null,Ia:0,Kf:0},o=o||n.Ga;var a=t.attributes.id,u=Jt(t,"BaseURL"),f,h=!1;if(e.h)for(var p=T(u),g=p.next();!g.done;g=p.next()){var S=g.value;g=S.attributes.serviceLocation,S=lo(S),g&&S&&(Js(e.h,a,g,S),h=!0)}h&&e.h||(f=u.map(lo)),p=t.attributes.contentType||n.contentType,g=t.attributes.mimeType||n.mimeType,S=[t.attributes.codecs||n.codecs];var E=Xo(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");E&&S.push(E),S=_d(S).join(","),E=_t(t,"frameRate",MT)||n.frameRate;var A=t.attributes.sar||n.pixelAspectRatio,b=bk(Jt(t,"InbandEventStream"),n.emsgSchemeIdUris),M=Jt(t,"AudioChannelConfiguration");M=Ak(M)||n.Jc;var _=_t(t,"audioSamplingRate",ni)||n.audioSamplingRate;p||(p=ox(g,S));var R=co(t,"SegmentBase"),B=co(t,"SegmentTemplate"),N=R&&_t(R,"availabilityTimeOffset",Yl)||0,H=B&&_t(B,"availabilityTimeOffset",Yl)||0,D=u&&u.length&&_t(u[0],"availabilityTimeOffset",Yl)||0;N=n.Ia+D+N+H,H=null,(D=co(t,"SegmentSequenceProperties"))&&(D=co(D,"SAP"))&&(H=_t(D,"cadence",Wl)),D=t.attributes.label;var F=Jt(t,"Label");return F&&F.length&&(F=F[0],Ln(F)&&(D=Ln(F))),{Ga:function(){return Wn(o(),u.length?e.h&&h?Au(e.h,a):f||[]:[])},Rc:R||n.Rc,Pb:co(t,"SegmentList")||n.Pb,$b:B||n.$b,width:_t(t,"width",ni)||n.width,height:_t(t,"height",ni)||n.height,contentType:p,mimeType:g,codecs:S,frameRate:E,pixelAspectRatio:A,emsgSchemeIdUris:b,id:a,language:t.attributes.lang,Jc:M,audioSamplingRate:_,Ia:N,Gc:null,Kf:H||n.Kf,label:D||null}}function bk(e,t){t=t.slice(),e=T(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function Ak(e){e=T(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function kk(e){var t=e.Rc?1:0;return t+=e.Pb?1:0,t+=e.$b?1:0,t==0?e.contentType==Rt||e.contentType=="application":(t!=1&&(e.Rc&&(e.Pb=null),e.$b=null),!0)}function nx(e,t,n,o){var a,u,f,h,p,g,S;return $(function(E){if(E.g==1)return a=[fi(n)],u=Wn(t(),a),f=Bn(u,e.g.retryParameters),f.method=o,h=e.j.networkingEngine.request(4,f),Hr(e.N,h),k(E,h.promise,2);if(p=E.h,o=="HEAD"){if(!p.headers||!p.headers.date)return E.return(0);g=p.headers.date}else g=nn(p.data);return S=Date.parse(g),isNaN(S)?E.return(0):E.return(S-Date.now())})}function Ik(e,t,n){var o,a,u,f,h,p,g,S;return $(function(E){switch(E.g){case 1:o=n.map(function(A){return{scheme:A.attributes.schemeIdUri,value:A.attributes.value}}),a=e.g.dash.clockSyncUri,!o.length&&a&&o.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:a}),u=T(o),f=u.next();case 2:if(f.done){E.u(4);break}switch(h=f.value,Y(E,5),p=h.scheme,g=h.value,p){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return E.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return E.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return S=Date.parse(g),E.return(isNaN(S)?0:S-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":ze("NTP UTCTiming scheme is not supported");break;default:ze("Unrecognized scheme in UTCTiming element",p)}E.u(9);break;case 7:return k(E,nx(e,t,g,"HEAD"),10);case 10:return E.return(E.h);case 8:return k(E,nx(e,t,g,"GET"),11);case 11:return E.return(E.h);case 9:K(E,3);break;case 5:ee(E);case 3:f=u.next(),E.u(2);break;case 4:return ze("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),E.return(0)}})}function Mk(e,t,n,o,a){var u=o.attributes.schemeIdUri||"",f=o.attributes.value||"",h=_t(o,"timescale",ni)||1;o=T(Jt(o,"Event"));for(var p=o.next();!p.done;p=o.next()){p=p.value;var g=_t(p,"presentationTime",ni)||0,S=_t(p,"duration",ni)||0;g=g/h+t,S=g+S/h,n!=null&&(g=Math.min(g,t+n),S=Math.min(S,t+n)),S<a||(p={schemeIdUri:u,value:f,startTime:g,endTime:S,id:p.attributes.id||"",eventElement:Ug(p),eventNode:p},e.j.onTimelineRegionAdded(p))}}function ix(e,t,n,o,a){var u,f,h,p;return $(function(g){return g.g==1?(u=To,f=a?0:1,h=Ps(t,n,o,e.g.retryParameters),k(g,Pp(e,h,u,{type:f}),2)):(p=g.h,g.return(p.data))})}function ox(e,t){return t=Rn(e,t),Ha(t)?Rt:e.split("/")[0]}function Pp(e,t,n,o){return t=e.j.networkingEngine.request(n,t,o),Hr(e.N,t),t.promise}function Rk(e){var t=e.l.td;if(!e.l.ae||!t||!e.B.length)return[];var n=Date.now()/1e3,o=e.B.filter(function(a){return a=ni(a.attributes.ttl),!a||t+a>n}).map(lo).filter($r);return o.length?Wn(e.A,o):[]}me("shaka.dash.DashParser",Jf),ho["application/dash+xml"]=function(){return new Jf},ho["video/vnd.mpeg.dash.mpd"]=function(){return new Jf};function tc(){}me("shaka.dependencies",tc),tc.has=function(e){return Dp.has(e)},tc.add=function(e,t){if(!sx[e])throw Error(e+" is not supported");e==rx?Tt("mux.js","mux.js is no longer used in Shaka Player."):Dp.set(e,function(){return t})};var rx="muxjs",sx={fk:rx,ISOBoxer:"ISOBoxer"};tc.Allowed=sx;var Dp=new Map([["ISOBoxer",function(){return d.ISOBoxer}]]);function ax(e,t,n){this.type=e,this.g=t,this.segments=n||null}function ux(e,t,n,o){this.id=e,this.name=t,this.attributes=n,this.value=o===void 0?null:o}ux.prototype.toString=function(e){function t(a){return a.name+"="+(isNaN(Number(a.value))?'"'+a.value+'"':a.value)}var n="#"+this.name,o=this.attributes?this.attributes.filter(function(a){return e?!e.has(a.name):!0}).map(t):[];return this.value&&o.unshift(this.value),0<o.length&&(n+=":"+o.join(",")),n};function lx(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Lu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function Ye(e,t,n){return(e=Lu(e,t))?e.value:n||null}function zt(e,t){if(e=Lu(e,t),!e)throw new ne(2,4,4023,t);return e.value}function fx(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.zb=n}function cx(e,t){this.name=e,this.value=t}function Ki(e,t){return e.filter(function(n){return n.name==t})}function hx(e,t){return e.filter(function(n){return zt(n,"TYPE")==t})}function Zn(e,t){e=T(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function ta(e,t,n){return n=n===void 0?0:n,(e=Zn(e,t))?Number(e.value):n}function Cr(e,t,n){return t?dx(e,[t],n):[]}function dx(e,t,n){if(!t.length)return[];t=Wn(e,t),e=[],t=T(t);for(var o=t.next();!o.done;o=t.next())e.push(px(o.value,n));return e}function px(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=T(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var a=o.slice(2,o.length-1),u=t.get(a);if(u)e=e.replace(o,u);else throw new ne(2,4,4039,a)}}return e}function _k(){this.g=0}function Op(e,t){t=nn(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new ne(2,4,4015);t=0;for(var o=!0,a=T(n),u=a.next();!u.done;u=a.next())if(u=u.value,/^#(?!EXT)/m.test(u)||o)o=!1;else if(u=Np(e,u),--e.g,mx.includes(u.name)){t=1;break}else u.name=="EXT-X-STREAM-INF"&&(o=!0);for(a=[],o=!0,u=0;u<n.length;u++){var f=n[u],h=n[u+1];if(/^#(?!EXT)/m.test(f)||o)o=!1;else{if(f=Np(e,f),Lk.includes(f.name)){if(t!=1)throw new ne(2,4,4017);f=n.splice(u,n.length-u),n=[],o=[],u=[],h=null,f=T(f);for(var p=f.next();!p.done;p=f.next())p=p.value,/^(#EXT)/.test(p)?(p=Np(e,p),mx.includes(p.name)?a.push(p):p.name=="EXT-X-MAP"?h=p:p.name=="EXT-X-PART"?u.push(p):p.name=="EXT-X-PRELOAD-HINT"?Ye(p,"TYPE")=="PART"?u.push(p):Ye(p,"TYPE")=="MAP"&&(p.name="EXT-X-MAP",h=p):o.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),h&&o.push(h),n.push(new fx(p,o,u)),o=[],u=[]);return u.length&&(h&&o.push(h),n.push(new fx("",o,u))),new ax(t,a,n)}a.push(f),f.name=="EXT-X-STREAM-INF"&&(f.attributes.push(new cx("URI",h)),o=!0)}}return new ax(t,a)}function Np(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new ne(2,4,4016,t);t=n[1];var o=n[2];n=[];var a;if(o){o=new xr(o);var u;(u=Zo(o,/^([^,=]+)(?:,|$)/g))&&(a=u[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;u=Zo(o,f);)n.push(new cx(u[1],u[2]||u[3])),Gs(o)}return new ux(e,t,n,a)}var mx="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),Lk="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function gx(){}function yx(e){try{var t=Up(e);return Ss({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return Vr(n)}}function Up(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new ne(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new ne(2,1,1004,e);var n=t[0];e=d.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var o=!1;1<t.length&&t[t.length-1]=="base64"&&(o=!0,t.pop());var a;return o?a=Gi(e):a=So(e),{data:a,contentType:n}}me("shaka.net.DataUriPlugin",gx),gx.parse=yx,Vo("data",yx);function nc(){var e=this;this.g=this.h=null,this.B=1,this.s=new Map,this.G=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(Rt,new Map),this.N.set("image",new Map),this.ub=new Set,this.i=new Map,this.l=null,this.L="",this.Fa=new _k,this.H=-1,this.fa=1/0,this.ea=this.Gb=!1,this.A=new bt(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.Z.jb(e.ba,"timeupdate"),e.ba.paused)){e.Z.ha(e.ba,"timeupdate",function(){return Bx(e)});return}Bx(e)}),this.xa=ac,this.m=null,this.ab=0,this.o=1/0,this.Da=this.za=this.U=0,this.da=new Cs,this.C=new Map,this.F=new Map,this.qa=new Map,this.oa=new Map,this.K=new Map,this.pa=new Map,this.ya=new Map,this.Fb=this.I=!1,this.Db=new ot(5),this.j=null,this.R=!0,this.Ea=new Set,this.Z=new Ae,this.ba=null}s=nc.prototype,s.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},s.start=function(e,t){var n=this,o;return $(function(a){return a.g==1?(n.h=t,n.I=t.isLowLatencyMode(),k(a,Gp(n,[e]),2)):a.g!=3?(o=a.h,n.L=o.uri,k(a,Ok(n,o.data,e),3)):a.return(n.m)})},s.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.da&&(e.push(this.da.destroy()),this.da=null),this.g=this.h=null,this.ub.clear(),this.m=null,this.i.clear(),this.G.clear(),this.F.clear(),this.s.clear(),this.qa.clear(),this.oa.clear(),this.K.clear(),this.pa.clear(),this.ya.clear(),this.Ea.clear(),this.j&&this.j.destroy(),this.Z&&(this.Z.release(),this.Z=null),Promise.all(e)},s.update=function(){var e=this,t,n,o,a,u,f,h,p,g,S,E,A;return $(function(b){if(b.g==1){if(!Ai(e))return b.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,o=n.filter(function(M){return M.stream.segmentIndex}),a=T(o),u=a.next();!u.done;u=a.next())f=u.value,t.push(Pk(e,f));return k(b,Promise.all(t),2)}for(Ax(e,o.map(function(M){return M.stream})),h=o.some(function(M){return M.ed==0}),o.length&&!h&&(p=e4,rc(e,p.sh),g=o.map(function(M){return M.Jb}),e.l.Za(Math.min.apply(Math,L(g))),e.h.updateDuration()),h&&jp(e),S=T(o),E=S.next();!E.done;E=S.next())A=E.value,A.stream.segmentIndex&&!A.stream.segmentIndex.O[0]&&e.h.disableStream(A.stream);q(b)})};function Bp(e,t){return Ai(e)?e.N.get(t.type):t.Yd}function Pk(e,t){var n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce,_e,Ee,Be,yt;return $(function(Mt){switch(Mt.g){case 1:for(n=[],o=T(t.M()),a=o.next();!a.done;a=o.next())u=a.value,f=new wn(u),h=f.g,t.Fd&&(0<=t.ob&&h.add("_HLS_msn",String(t.ob)),0<=t.pb&&h.add("_HLS_part",String(t.pb))),t.Gd&&h.add("_HLS_skip","YES"),Bm(h)&&Na(f,h),n.push(f.toString());return Y(Mt,2),k(Mt,Gp(e,n,!0),4);case 4:p=Mt.h,K(Mt,3);break;case 2:throw g=ee(Mt),e.h&&e.h.disableStream(t.stream),g;case 3:if(!t.stream.segmentIndex)return Mt.return();if(S=Op(e.Fa,p.data),S.type!=1)throw new ne(2,4,4017);return E=p.uri,E==p.originalUri||t.M().includes(E)||t.Tg.push(E),A=Ki(S.g,"EXT-X-DEFINE"),b=Fp(e,A,E),M=t.stream,_=Bp(e,t),k(Mt,Rx(e,S,M.mimeType,t.M,b),5);case 5:for(R=Mt.h,B=R.keyIds,N=R.drmInfos,H=function(ln,Dt){return ln.size===Dt.size&&[].concat(L(ln)).every(function(dn){return Dt.has(dn)})},H(M.keyIds,B)||(M.keyIds=B,M.drmInfos=N,e.h.newDrmInfo(M)),D=Ox(e,S,_,b,t.M,t.type),F=D.segments,(X=D.bandwidth)&&(M.bandwidth=X),J=lf(M),ie=T(F),de=ie.next();!de.done;de=ie.next())oe=de.value,oe.$&&(oe.$.Hc=J);M.segmentIndex.rd(F,e.l.mb()),F.length&&(se=ta(S.g,"EXT-X-MEDIA-SEQUENCE",0),xe=(ue=Zn(S.g,"EXT-X-SKIP"))?Number(Ye(ue,"SKIPPED-SEGMENTS")):0,ye=Ix(se,F),Ce=ye.ob,_e=ye.pb,t.ob=Ce+xe,t.pb=_e,Ee=_.get(se),M.segmentIndex.Ma(Ee)),(Be=M.segmentIndex.O[0]||null)&&(t.mc=Be.startTime,yt=F[F.length-1],t.Jb=yt.endTime),Zn(S.g,"EXT-X-ENDLIST")&&(t.ed=!0),zp(e,S),Vp(e,S.g,M.type,b,t.M),q(Mt)}})}s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(){},s.banLocation=function(e){this.j&&this.j.banLocation(e)},s.setMediaElement=function(e){this.ba=e};function vx(e,t){for(var n=e.H==-1,o=T(t),a=o.next();!a.done;a=o.next()){a=a.value;var u=a.stream.segmentIndex,f=Bp(e,a);if(u=u.O[0]||null){f=T(f);for(var h=f.next();!h.done;h=f.next()){h=T(h.value);var p=h.next().value;if(h.next().value==u.startTime){n&&(e.H=Math.max(e.H,p)),a.Re=p;break}}}}if(!(0>e.H))for(t=T(t),n=t.next();!n.done;n=t.next())n=n.value,Pu(e,n.type)&&(o=n.stream.segmentIndex)&&(a=e.H-n.Re,0<a&&(o.O.splice(0,a),o=o.O[0]||null)&&(o=-o.startTime,n.stream.segmentIndex.offset(o),xx(e,n,o)))}function Dk(e,t){if(e.fa==1/0){t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value.stream.segmentIndex.O[0]||null,n!=null&&n.h!=null&&(e.fa=Math.min(e.fa,n.h))}if(t=e.fa,t!=1/0){n=T(e.i.values());for(var o=n.next();!o.done;o=n.next())if(o=o.value,!Pu(e,o.type)){var a=o.stream.segmentIndex;if(a!=null){var u=a.O[0]||null;if(u)if(u.h==null)Ge("Missing EXT-X-PROGRAM-DATE-TIME for stream",o.M(),"Expect AV sync issues!");else for(xx(e,o,u.h-t-u.startTime),o=T(a),a=o.next();!a.done;a=o.next())a.value.Vf(t)}}}}function xx(e,t,n){t.mc+=n,t.Jb+=n,e=Bp(e,t);for(var o=T(e),a=o.next();!a.done;a=o.next()){var u=T(a.value);a=u.next().value,u=u.next().value,e.set(a,u+n)}t.M()}function Ok(e,t,n){var o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce,_e,Ee,Be;return $(function(yt){switch(yt.g){case 1:return o=Mn,a=Op(e.Fa,t),u=Ki(a.g,"EXT-X-DEFINE"),f=[],h=[],p=[],e.l=new st(null,0),e.l.sc(!0),g=function(){return[n]},S=null,E=new Map,a.type==1?(e.R=!1,H=Ki(a.g,"EXT-X-DEFINE"),E=Fp(e,H,e.L),S=o.ga,D="",F=new Map,k(yt,kx(e,e.B++,E,a,g,"",S,D,!0,"Media Playlist",null,F,null,!1,null,!1),7)):(Uk(e,u),A=Ki(a.g,"EXT-X-MEDIA"),b=Ki(a.g,"EXT-X-STREAM-INF"),M=Ki(a.g,"EXT-X-IMAGE-STREAM-INF"),_=Ki(a.g,"EXT-X-I-FRAME-STREAM-INF"),R=Ki(a.g,"EXT-X-SESSION-KEY"),B=Ki(a.g,"EXT-X-SESSION-DATA"),N=Ki(a.g,"EXT-X-CONTENT-STEERING"),jk(e,B),k(yt,Fk(e,N),4));case 4:return Bk(e,b),Wk(e,A),k(yt,Hk(e,b,R,A,g,e.s),5);case 5:return f=yt.h,h=$k(e,A),k(yt,zk(e,M,_),6);case 6:p=yt.h,yt.u(3);break;case 7:X=yt.h,e.i.set(n,X),X.stream&&(J=lf(X.stream),X.stream.segmentIndex.Hb(function(Mt){Mt.$&&(Mt.$.Hc=J)})),S=X.stream.type,f.push({id:0,language:$t(D||"und"),disabledUntilTime:0,primary:!0,audio:S=="audio"?X.stream:null,video:S=="video"?X.stream:null,bandwidth:X.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new ne(2,7,7001);if(a.type==1&&(Ai(e)&&(Lx(e,a),ie=e.o,e.A.Y(ie)),de=Array.from(e.i.values()),$p(e,de),jp(e),Vp(e,a.g,S,E,g)),e.m={presentationTimeline:e.l,variants:f,textStreams:h,imageStreams:p,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.ea||!e.g.hls.disableCodecGuessing){yt.u(8);break}for(oe=[],se=T(e.m.variants),ue=se.next();!ue.done;ue=se.next())xe=ue.value,xe.audio&&xe.audio.codecs===""&&oe.push(xe.audio.createSegmentIndex()),xe.video&&xe.video.codecs===""&&oe.push(xe.video.createSegmentIndex());return k(yt,Promise.all(oe),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),f.length==1){for(ye=[],Ce=f[0],_e=T([Ce.video,Ce.audio]),Ee=_e.next();!Ee.done;Ee=_e.next())(Be=Ee.value)&&!Be.segmentIndex&&ye.push(Be.createSegmentIndex());if(0<ye.length)return k(yt,Promise.all(ye),0)}yt.u(0)}})}function Nk(e,t){var n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie;return $(function(de){switch(de.g){case 1:if(n=ff(e.g.hls.mediaPlaylistFullMimeType),!t.length)return de.return(n);if(o=Nx(e,t),a=o.segment,u=o.segmentIndex,f=a.M(),h=f[0],p=new wn(h),g=p.Pa.split(".").pop(),S=Xp[g])return de.return(ff(S));if(E=To,b=A=null,M=a.$,!M){de.u(2);break}return _=Ps(M.M(),M.Xb(),M.Ub(),e.g.retryParameters),k(de,or(e,_,E,{type:0}),3);case 3:if(R=de.h,A=R.data,!M.aesKey){de.u(4);break}return k(de,Ld(A,M.aesKey,0),5);case 5:A=de.h;case 4:(b=R.headers["content-type"])&&(b=b.split(";")[0].toLowerCase());case 2:return B=Ps(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),k(de,or(e,B,E,{type:1}),6);case 6:if(N=de.h,H=N.data,!a.aesKey){de.u(7);break}return k(de,Ld(H,a.aesKey,u),8);case 8:H=de.h;case 7:if((D=N.headers["content-type"])&&(D=D.split(";")[0].toLowerCase()),F="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),X=["audio/mp4","video/mp4","video/iso.segment"],nu(Me(H))){var oe=H,se=Me(oe);se=new en().parse(se);var ue=se.$c();se=se.kf();var xe=[],ye=!1,Ce=!1;switch(ue.audio){case"aac":case"aac-loas":xe.push("mp4a.40.2"),ye=!0;break;case"mp3":xe.push("mp4a.40.34"),ye=!0;break;case"ac3":xe.push("ac-3"),ye=!0;break;case"ec3":xe.push("ec-3"),ye=!0;break;case"opus":xe.push("opus"),ye=!0}switch(ue.video){case"avc":se.codec?xe.push(se.codec):xe.push("avc1.42E01E"),Ce=!0;break;case"hvc":se.codec?xe.push(se.codec):xe.push("hvc1.1.6.L93.90"),Ce=!0;break;case"av1":xe.push("av01.0.01M.08"),Ce=!0}if(xe.length){if(ue=ye&&!Ce,ye=new Map,Ce){Ce=new cn("video/mp2t"),Ce.i(oe),oe=T(Ce.j());for(var _e=oe.next();!_e.done;_e=oe.next())_e=_e.value,ye.set(_e,_e);Ce.g()}se={type:ue?"audio":"video",mimeType:"video/mp2t",codecs:xe.join(", "),language:null,height:se.height,width:se.width,channelCount:null,sampleRate:null,closedCaptions:ye,xd:null,colorGamut:null}}else se=null;if(J=se)return de.return(J)}else if((F.includes(g)||X.includes(D)||b&&X.includes(b))&&(ie=LE(A,H)))return de.return(ie);return D?de.return(ff(D)):b?de.return(ff(b)):de.return(n)}})}function jp(e){if(Ai(e)){if(e.xa==uc){for(var t,n=t=1/0,o=T(e.i.values()),a=o.next();!a.done;a=o.next())a=a.value,a.stream.segmentIndex&&a.stream.type!="text"&&(t=Math.min(t,a.Jb),n=Math.min(n,a.mc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.pe(t)}}else e.l.Za(bx(e));if(!e.l.s)for(t=T(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.bh(n.h);e.l.Wd()}function Uk(e,t){var n=new wn(e.L).g;t=T(t);for(var o=t.next();!o.done;o=t.next()){var a=o.value;o=Ye(a,"NAME");var u=Ye(a,"VALUE");a=Ye(a,"QUERYPARAM"),o&&u&&(e.s.has(o)||e.s.set(o,u)),a&&(o=n.get(a)[0])&&!e.s.has(o)&&e.s.set(a,o)}}function Fp(e,t,n){n=new wn(n).g;var o=new Map;t=T(t);for(var a=t.next();!a.done;a=t.next()){var u=a.value,f=Ye(u,"NAME"),h=Ye(u,"VALUE");a=Ye(u,"QUERYPARAM"),u=Ye(u,"IMPORT"),f&&h&&(o.has(f)||o.set(f,h)),a&&(f=n.get(a)[0])&&!o.has(f)&&o.set(a,f),u&&(a=e.s.get(u))&&o.set(u,a)}return o}function Bk(e,t){t=T(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=Ye(o,"AUDIO");n=Ye(o,"VIDEO");var u=Ye(o,"SUBTITLES");if(o=wx(e,o),u){var f=vi(Rt,o);e.F.set(u,f),Ht(o,f)}a&&(u=vi("audio",o),u||(u=e.g.hls.defaultAudioCodec),e.F.set(a,u)),n&&(a=vi("video",o),a||(a=e.g.hls.defaultVideoCodec),e.F.set(n,a))}}function jk(e,t){t=T(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=Ye(o,"DATA-ID");n=Ye(o,"URI");var u=Ye(o,"LANGUAGE");o=Ye(o,"VALUE"),a=new Map().set("id",a),n&&a.set("uri",Cr([e.L],n,e.s)[0]),u&&a.set("language",u),o&&a.set("value",o),n=new je("sessiondata",a),e.h&&e.h.onEvent(n)}}function Fk(e,t){var n,o,a,u,f,h;return $(function(p){if(!e.h||!e.g)return p.return();for(o=T(t),a=o.next();!a.done;a=o.next())if(u=a.value,f=Ye(u,"PATHWAY-ID"),h=Ye(u,"SERVER-URI"),f&&h){e.j=new Zs(e.h),e.j.configure(e.g),e.j.i=[e.L],e.j.setManifestType("HLS"),e.j.h=f,n=bu(e.j,h);break}return k(p,n,0)})}function $k(e,t){var n=hx(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return Ex(e,[f],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=T(n);for(var o=n.next();!o.done;o=n.next()){var a=zt(o.value,"GROUP-ID");if((o=e.F.get(a))&&(a=e.G.get(a))){a=T(a);for(var u=a.next();!u.done;u=a.next())u=u.value,u.stream.codecs=o,u.stream.mimeType=Hp(Rt,o)||oc(Rt),na(u.stream)}}return t.filter(function(f){return f})}function na(e){var t=new Set([Rn(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(Rn(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function zk(e,t,n){var o,a;return $(function(u){return u.g==1?(o=t.map(function(f){var h,p;return $(function(g){if(g.g==1)return e.g.disableThumbnails?g.return(null):(Y(g,2),k(g,Yk(e,f),4));if(g.g!=2)return h=g.h,g.return(h.stream);if(p=ee(g),e.g.hls.ignoreImageStreamFailures)return g.return(null);throw p})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var h=zt(f,"URI"),p=Ye(f,"CODECS")||"";if(e.i.has(h))var g=e.i.get(h);else{var S=Ye(f,"LANGUAGE"),E=Ye(f,"NAME"),A=Ye(f,"CHARACTERISTICS"),b=ic(e,e.B++,[h],p,"image",S,!1,E,null,null,A,!1,null,!1),M=Ye(f,"RESOLUTION"),_=T(M?M.split("x"):[null,null]),R=_.next().value,B=_.next().value;b.stream.width=Number(R)||void 0,b.stream.height=Number(B)||void 0;var N=Ye(f,"BANDWIDTH");N&&(b.stream.bandwidth=Number(N)),e.i.set(h,b),g=b}return f=g,f.stream.codecs!=="mjpg"?null:f.stream}catch(H){if(e.g.hls.ignoreImageStreamFailures)return null;throw H}})),k(u,Promise.all(o),2)):(a=u.h,u.return(a.filter(function(f){return f})))})}function Vk(e,t,n){t=t.filter(function(h){var p=Ye(h,"URI")||"";return Ye(h,"TYPE")!="SUBTITLES"&&p!=""});var o={};t=T(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var u=lx(a,!e.j);o[u]?o[u].push(a):o[u]=[a]}for(var f in o)Ex(e,o[f],n)}function Hk(e,t,n,o,a,u){var f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce,_e,Ee,Be,yt,Mt,ln,Dt,dn,En;return $(function(fn){switch(fn.g){case 1:if(f=[],h=new Set,!(0<n.length)){fn.u(2);break}p=T(n),g=p.next();case 3:if(g.done){fn.u(2);break}if(S=g.value,E=zt(S,"METHOD"),A=Ye(S,"KEYFORMAT")||"identity",b=null,E=="NONE"){fn.u(4);break}if(sc(E)){M=Cr(a(),zt(S,"URI"),u),_=M.sort().join(""),e.K.has(_)||(R=Bn(M,e.g.retryParameters),B=or(e,R,6),e.K.set(_,B)),fn.u(4);break}if(A!="identity"){b=(N=$x[A])?N(S,""):null,fn.u(6);break}return k(fn,jx(e,S,"",a,null,u),9);case 9:b=fn.h;case 6:if(b){if(b.keyIds)for(H=T(b.keyIds),D=H.next();!D.done;D=H.next())F=D.value,h.add(F);f.push(b)}case 4:g=p.next(),fn.u(3);break;case 2:for(X={},J=T(t),ie=J.next();!ie.done;ie=J.next())de=ie.value,oe=lx(de,!e.j),X[oe]?X[oe].push(de):X[oe]=[de];se=[];for(ue in X)xe=X[ue],ye=xe[0],Ce=Ye(ye,"FRAME-RATE"),_e=Number(Ye(ye,"AVERAGE-BANDWIDTH"))||Number(zt(ye,"BANDWIDTH")),Ee=Ye(ye,"RESOLUTION"),Be=T(Ee?Ee.split("x"):[null,null]),yt=Be.next().value,Mt=Be.next().value,ln=Ye(ye,"VIDEO-RANGE"),(Dt=Ye(ye,"REQ-VIDEO-LAYOUT"))&&Dt.includes(",")&&(dn=Dt.split(",").filter(function(jt){return jt=="CH-STEREO"||jt=="CH-MONO"}),Dt=dn[0]),Dt=Dt||"CH-MONO",En=Gk(e,xe,o),se.push.apply(se,L(Xk(e,En.audio,En.video,_e,yt,Mt,Ce,ln,Dt,f,h)));return fn.return(se.filter(function(jt){return jt!=null}))}})}function Gk(e,t,n){for(var o={audio:[],video:[]},a=new Map,u=[],f=!1,h=!1,p=T(t),g=p.next();!g.done;g=p.next()){var S=g.value;g=Ye(S,"AUDIO");var E=Ye(S,"VIDEO"),A=g||E;A&&(u.includes(A)||u.push(A),(S=Ye(S,"PATHWAY-ID"))&&a.set(A,S),g?f=!0:E&&(h=!0))}u.length&&n.length&&(p=n.filter(function(_){return u.includes(zt(_,"GROUP-ID"))}),Vk(e,p,a)),p=(a=u.sort().join(","))&&e.G.has(a)?e.G.get(a):[],f?o.audio.push.apply(o.audio,L(p)):h&&o.video.push.apply(o.video,L(p)),g=!1;var b=t.map(function(_){return zt(_,"URI")});if(h=o.audio.find(function(_){return _&&_.M().find(function(R){return b.includes(R)})}),f=wx(e,t[0]),E=vi("video",f),(A=vi("audio",f))&&!E?(h="audio",g=0<o.audio.length):!o.audio.length&&!o.video.length&&A&&E?(h="video",f=[[E,A].join()]):o.audio.length&&h?(h="audio",g=!0):h=o.video.length&&!o.audio.length?"audio":"video",!g){var M=S=A=E=g=null;!p.length&&(n=n.find(function(_){var R=Ye(_,"URI")||"",B=Ye(_,"TYPE");return _=zt(_,"GROUP-ID"),B!="SUBTITLES"&&R==""&&u.includes(_)}))&&(g=Ye(n,"LANGUAGE"),E=Ye(n,"NAME"),A=Sx(n),Tx(n),S=Ye(n,"CHARACTERISTICS"),M=Cx(n)),e=qk(e,t,f,h,g,E,A,S,M),a&&(e.stream.groupId=a),o[e.stream.type]=[e]}return o}function wx(e,t){var n=Ye(t,"CODECS")||"";return t=Ye(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(o){return o.split("/")[0]}),e.push.apply(e,L(t))),_d(e)}function Sx(e){return(e=Ye(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function Cx(e){return(e=Ye(e,"SAMPLE-RATE"))?parseInt(e,10):null}function Tx(e){return(e=Ye(e,"CHANNELS"))?e.includes("/JOC"):!1}function Xk(e,t,n,o,a,u,f,h,p,g,S){for(var E=T(n),A=E.next();!A.done;A=E.next())Ux(A.value.stream,a,u,f,h,p,null);for(a=e.g.disableAudio,(!t.length||a)&&(t=[null]),a=e.g.disableVideo,(!n.length||a)&&(n=[null]),a=[],t=T(t),u=t.next();!u.done;u=t.next())for(u=u.value,f=T(n),h=f.next();!h.done;h=f.next()){var b=h.value;(h=u?u.stream:null)&&(h.drmInfos=g,h.keyIds=S),(p=b?b.stream:null)&&(p.drmInfos=g,p.keyIds=S),p&&!h&&(p.bandwidth=o),!p&&h&&(h.bandwidth=o),E=u?u.stream.drmInfos:null,A=b?b.stream.drmInfos:null,b=b?b.M().sort().join(","):"";var M=u?u.M().sort().join(","):"";b=b+" - "+M,h&&p&&!jm(E,A)||e.ub.has(b)||(h={id:e.B++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!p&&p.primary,audio:h,video:p,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},a.push(h),e.ub.add(b))}return a}function Wk(e,t){t=hx(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=T(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=Ye(o,"LANGUAGE");n=$t(a||"und"),a||(a=Ye(o,"NAME"))&&(n=a),a=zt(o,"GROUP-ID"),o=zt(o,"INSTREAM-ID").replace("SERVICE","svc"),e.C.get(a)||e.C.set(a,new Map),e.C.get(a).set(o,n)}}function Ex(e,t,n){for(var o=[],a=[],u=new Map,f=T(t),h=f.next();!h.done;h=f.next()){var p=h.value;h=zt(p,"URI"),p=zt(p,"GROUP-ID"),o.push(h),a.push(p),u.set(p,h)}if(f=a.sort().join(","),h=t[0],t="",p=zt(h,"TYPE").toLowerCase(),p=="subtitles"&&(p=Rt),p==Rt)t=Ye(h,"CODECS")||"";else{a=T(a);for(var g=a.next();!g.done;g=a.next())if(g=g.value,e.F.has(g)){t=e.F.get(g);break}}if(a=o.sort().join(","),e.i.has(a))return e.i.get(a);if(g=e.B++,e.j){u=T(u);for(var S=u.next();!S.done;S=u.next()){var E=T(S.value);S=E.next().value,E=E.next().value,(S=n.get(S))&&Js(e.j,g,S,E)}}n=Ye(h,"LANGUAGE"),u=Ye(h,"NAME"),S=Ye(h,"DEFAULT")=="YES",E=p=="audio"?Sx(h):null;var A=p=="audio"?Tx(h):!1,b=Ye(h,"CHARACTERISTICS"),M=Ye(h,"FORCED")=="YES";return h=p=="audio"?Cx(h):null,o=ic(e,g,o,t,p,n,S,u,E,null,b,M,h,A),o.stream&&(o.stream.groupId=f),e.G.has(f)?e.G.get(f).push(o):e.G.set(f,[o]),e.i.set(a,o),o}function Yk(e,t){var n,o,a,u,f,h,p,g,S,E;return $(function(A){return A.g==1?(n=zt(t,"URI"),o=Ye(t,"CODECS","jpeg")||"",e.i.has(n)?A.return(e.i.get(n)):(a=Ye(t,"LANGUAGE"),u=Ye(t,"NAME"),f=Ye(t,"CHARACTERISTICS"),h=ic(e,e.B++,[n],o,"image",a,!1,u,null,null,f,!1,null,!1),(p=Ye(t,"RESOLUTION"))?k(A,h.stream.createSegmentIndex(),3):A.u(2))):(A.g!=2&&(g=h.stream.segmentIndex.get(0),S=g.tilesLayout)&&(h.stream.width=Number(p.split("x")[0])*Number(S.split("x")[0]),h.stream.height=Number(p.split("x")[1])*Number(S.split("x")[1])),(E=Ye(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(E)),e.i.set(n,h),A.return(h))})}function qk(e,t,n,o,a,u,f,h,p){for(var g=e.B++,S=[],E=T(t),A=E.next();!A.done;A=E.next()){var b=A.value;A=zt(b,"URI"),b=Ye(b,"PATHWAY-ID"),e.j&&b&&Js(e.j,g,b,A),S.push(A)}if(E=S.sort().join(","),e.i.has(E))return e.i.get(E);e:{if(t=Ye(t[0],"CLOSED-CAPTIONS"),o=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.C.get(t);break e}e.R=!1}else if(!t&&e.C.size)for(t=T(e.C.keys()).next();!t.done;){t=e.C.get(t.value);break e}}t=null}return n=ds(o,n),o=ic(e,g,S,n,o,a,!1,u,f,t,h,!1,p,!1),e.i.set(E,o),o}function ic(e,t,n,o,a,u,f,h,p,g,S,E,A,b){function M(F){var X,J,ie,de,oe,se,ue,xe,ye,Ce,_e,Ee,Be,yt,Mt,ln,Dt,dn,En,fn,jt,yn;return $(function(Dn){switch(Dn.g){case 1:return X=Mn,J=N.M(),Y(Dn,2),k(Dn,Gp(e,N.M(),!0),4);case 4:ie=Dn.h,K(Dn,3);break;case 2:if(de=ee(Dn),R.closeSegmentIndex(),e.h.disableStream(R))return Dn.return();throw de;case 3:if(F.aborted)return Dn.return();if(oe=ie.uri,oe==ie.originalUri||J.includes(oe)||B.push(oe),se=Op(e.Fa,ie.data),se.type!=1)throw new ne(2,4,4017);return ue=Ki(se.g,"EXT-X-DEFINE"),xe=Fp(e,ue,oe),ye=!1,(!e.ea&&e.g.hls.disableCodecGuessing||e.R&&a==X.ga&&!e.g.hls.disableClosedCaptionsDetection)&&0<se.segments.length&&(e.R=!1,ye=!0),Ce=!e.ea&&e.g.hls.disableCodecGuessing,_e=Ai(e),k(Dn,kx(e,0,xe,se,_,o,a,u,f,h,p,g,S,E,A,b,void 0,ye,Ce),5);case 5:if(Ee=Dn.h,F.aborted)return Dn.return();if(Be=Ee.stream,Ai(e)&&!_e&&Lx(e,se),N.mc=Ee.mc,N.Jb=Ee.Jb,N.Gd=Ee.Gd,N.Fd=Ee.Fd,N.ed=Ee.ed,N.Yd=Ee.Yd,N.ob=Ee.ob,N.pb=Ee.pb,N.vf=!0,R.segmentIndex=Be.segmentIndex,R.encrypted=Be.encrypted,R.drmInfos=Be.drmInfos,R.keyIds=Be.keyIds,R.mimeType=Be.mimeType,R.bandwidth=R.bandwidth||Be.bandwidth,R.codecs=R.codecs||Be.codecs,R.closedCaptions=R.closedCaptions||Be.closedCaptions,R.width=R.width||Be.width,R.height=R.height||Be.height,R.hdr=R.hdr||Be.hdr,R.colorGamut=R.colorGamut||Be.colorGamut,R.language=="und"&&Be.language!="und"&&(R.language=Be.language),R.language=R.language||Be.language,R.channelsCount=R.channelsCount||Be.channelsCount,R.audioSamplingRate=R.audioSamplingRate||Be.audioSamplingRate,na(R),R.drmInfos.length&&e.h.newDrmInfo(R),yt=!1,(!g&&R.closedCaptions||g&&R.closedCaptions&&g.size!=R.closedCaptions.size)&&(yt=!0),e.m&&yt&&e.h.makeTextStreamsForClosedCaptions(e.m),a==X.ga||a==X.X)for(Mt=T(e.i.values()),ln=Mt.next();!ln.done;ln=Mt.next())Dt=ln.value,Dt.vf||Dt.type!=a||(Dt.stream.mimeType=Be.mimeType,na(Dt.stream));a==X.ua&&(dn=Be.segmentIndex.get(0))&&dn.$&&(R.mimeType="application/mp4",na(R)),En=lf(R),R.segmentIndex.Hb(function(On){On.$&&(On.$.Hc=En)}),Kk(e)&&(e.Gb?$p(e,[N]):(e.Gb=!0,fn=Array.from(e.i.values()),jt=fn.filter(function(On){return On.stream.segmentIndex}),$p(e,jt),jp(e),yn=e.o,0<yn&&e.A.Y(yn))),Vp(e,se.g,R.type,xe,_),q(Dn)}})}function _(){return e.j&&1<n.length?Au(e.j,t):B.concat(dx([e.L],n,e.s))}var R=Mx(e,o,a,u,f,h,p,g,S,E,A,b),B=[],N={stream:R,type:a,Tg:B,M:_,mc:0,Jb:0,Yd:new Map,Gd:!1,Fd:!1,ed:!1,Re:-1,ob:-1,pb:-1,vf:!1},H=null,D=new AbortController;return R.createSegmentIndex=function(){return H||(D=new AbortController,H=new Promise(function(F){F(M(D.signal))}))},R.closeSegmentIndex=function(){H&&!R.segmentIndex&&D.abort(),R.segmentIndex&&(R.segmentIndex.release(),R.segmentIndex=null),H=null},N}function bx(e){var t=1/0;e=T(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Jb));return t}function Ax(e,t){var n=[];t=T(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.segmentIndex&&o.segmentIndex.Hb(function(a){n.push(a)});e.l.sd(n)}function $p(e,t){if(!Ai(e))for(var n=bx(e),o=T(t),a=o.next();!a.done;a=o.next())a.value.stream.segmentIndex.Bc(0,n);Ax(e,t.map(function(u){return u.stream})),e.g.hls.ignoreManifestProgramDateTime?vx(e,t):(Dk(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&vx(e,t))}function Pu(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function Kk(e){if(!e.m)return!1;var t=[],n=[];e=T(e.m.variants);for(var o=e.next();!o.done;o=e.next())o=o.value,o.video&&t.push(o.video),o.audio&&n.push(o.audio);return!(0<t.length&&!t.some(function(a){return a.segmentIndex})||0<n.length&&!n.some(function(a){return a.segmentIndex}))}function kx(e,t,n,o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N){B=B===void 0?!0:B,N=N===void 0?!0:N;var H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce,_e,Ee,Be,yt,Mt,ln,Dt,dn,En,fn,jt,yn,Dn;return $(function(On){switch(On.g){case 1:var Mi=Zn(o.g,"EXT-X-PLAYLIST-TYPE"),Ri=Zn(o.g,"EXT-X-ENDLIST");if(Ri=Mi&&Mi.value=="VOD"||Ri,Mi=Mi&&Mi.value=="EVENT"&&!Ri,Mi=!Ri&&!Mi,Ri?rc(e,ac):Mi?rc(e,uc):rc(e,zx),Ai(e)&&zp(e,o),H=Ai(e)?e.N.get(f):new Map,D=Ox(e,o,H,n,a,f),F=D.segments,X=D.bandwidth,oe=de=ie=J=null,!(0<F.length&&B)){On.u(2);break}return k(On,Nk(e,F),3);case 3:se=On.h,f=se.type,h=se.language,S=se.channelCount,M=se.sampleRate,e.g.disableText||(E=se.closedCaptions),ie=se.height,J=se.width,de=se.xd,oe=se.colorGamut,N&&(R=se.mimeType,u=se.codecs);case 2:if(R){On.u(4);break}return k(On,Jk(e,f,u,F),5);case 5:R=On.h;case 4:return k(On,Rx(e,o,R,a,n),6);case 6:if(ue=On.h,xe=ue.drmInfos,ye=ue.keyIds,Ce=ue.encrypted,_e=ue.wh,Ce&&!xe.length&&!_e)throw new ne(2,4,4026);return Ee=Mx(e,u,f,h,p,g,S,E,A,b,M,_),Ee.encrypted=Ce,Ee.drmInfos=xe,Ee.keyIds=ye,Ee.mimeType=R,X&&(Ee.bandwidth=X),na(Ee),f=="video"&&(J||ie||de||oe)&&Ux(Ee,J,ie,null,de,null,oe),Ai(e)&&zp(e,o),Be=F[0].startTime,yt=F[F.length-1],Mt=yt.endTime,ln=new Pt(F),Ee.segmentIndex=ln,dn=(Dt=Zn(o.g,"EXT-X-SERVER-CONTROL"))?Lu(Dt,"CAN-SKIP-UNTIL")!=null:!1,En=Dt?Lu(Dt,"CAN-BLOCK-RELOAD")!=null:!1,fn=ta(o.g,"EXT-X-MEDIA-SEQUENCE",0),jt=Ix(fn,F),yn=jt.ob,Dn=jt.pb,On.return({stream:Ee,type:f,Tg:[],M:a,mc:Be,Jb:Mt,Gd:dn,Fd:En,ed:!1,Re:-1,ob:yn,pb:Dn,Yd:H,vf:!1})}})}function Ix(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{ob:e,pb:n};t=t[t.length-1];var o=t.g;return t.g.length?(n=o.length-1,o[o.length-1].preload||(e++,n=0),{ob:e,pb:n}):(e++,t.m&&(n=0),{ob:e,pb:n})}function Mx(e,t,n,o,a,u,f,h,p,g,S,E){var A=Hp(n,t)||oc(n),b=[];if(p){p=T(p.split(","));for(var M=p.next();!M.done;M=p.next())b.push(M.value)}return p=void 0,M=null,n==Rt?p=b.includes("public.accessibility.transcribes-spoken-dialog")&&b.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":b.includes("public.accessibility.describes-video")&&(M="visually impaired"),b.length||p!=="subtitle"||b.push("subtitle"),e={id:e.B++,originalId:u,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:A,codecs:t,kind:n==Rt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:$t(o||"und"),originalLanguage:o,label:u,type:n,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:b,forced:g,channelsCount:f,audioSamplingRate:S,spatialAudio:E,closedCaptions:h,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:M,external:!1,fastSwitching:!1,fullMimeTypes:new Set},na(e),e}function Rx(e,t,n,o,a){var u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce,_e;return $(function(Ee){switch(Ee.g){case 1:if(u=new Map,t.segments){for(f=T(t.segments),h=f.next();!h.done;h=f.next())if(p=h.value,g=Ki(p.g,"EXT-X-KEY"),S=null,g.length)for(S=Px(e,t,p.g,o,a),E=T(g),A=E.next();!A.done;A=E.next())b=A.value,u.set(b,S)}_=M=!1,R=[],B=new Set,N=T(u),H=N.next();case 2:if(H.done){Ee.u(4);break}if(D=H.value,F=T(D),X=F.next().value,J=F.next().value,ie=X,de=J,oe=zt(ie,"METHOD"),oe=="NONE"){Ee.u(3);break}if(M=!0,se=Ye(ie,"KEYFORMAT")||"identity",ue=null,sc(oe)){_=!0,Ee.u(3);break}if(se!="identity"){ue=(xe=$x[se])?xe(ie,n):null,Ee.u(6);break}return k(Ee,jx(e,ie,n,o,de,a),8);case 8:ue=Ee.h;case 6:if(ue){if(ue.keyIds)for(ye=T(ue.keyIds),Ce=ye.next();!Ce.done;Ce=ye.next())_e=Ce.value,B.add(_e);R.push(ue)}case 3:H=N.next(),Ee.u(2);break;case 4:return Ee.return({drmInfos:R,keyIds:B,encrypted:M,wh:_})}})}function _x(e,t,n,o,a){if(!d.crypto||!d.crypto.subtle)throw ze("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new ne(2,4,4042);var u=0,f=Ye(t,"IV","");if(f){var h=Br(f.substr(2));if(h.byteLength!=16)throw new ne(2,4,4048)}else u=ta(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+u,!e.oa.has(n)){var p={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:u};switch(zt(t,"METHOD")){case"AES-256":p.bitsKey=256;break;case"AES-256-CTR":p.bitsKey=256,p.blockCipherMode="CTR"}p.fetchKey=function(){var g,S,E,A,b,M;return $(function(_){if(_.g==1)return g=Cr(o(),zt(t,"URI"),a),S=g.sort().join(""),e.K.has(S)||(E=Bn(g,e.g.retryParameters),A=or(e,E,6),e.K.set(S,A)),k(_,e.K.get(S),2);if(_.g!=3){if(b=_.h,!b.data||b.data.byteLength!=p.bitsKey/8)throw new ne(2,4,4049);return M={name:p.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:p.bitsKey},k(_,d.crypto.subtle.importKey("raw",b.data,M,!0,["decrypt"]),3)}p.cryptoKey=_.h,p.fetchKey=void 0,q(_)})},e.oa.set(n,p)}return e.oa.get(n)}function zp(e,t){var n=1/0,o=t.segments;if(o.length)for(var a=o.length-1;0<=a;){var u=Zn(o[a].g,"EXTINF");if(u){n=Number(u.value.split(",")[0]);break}a--}if(o=Zn(t.g,"EXT-X-TARGETDURATION"),!o)throw new ne(2,4,4024,"EXT-X-TARGETDURATION");o=Number(o.value),(a=Zn(t.g,"EXT-X-PART-INF"))&&(e.U=Number(zt(a,"PART-TARGET"))),t=Zn(t.g,"EXT-X-SERVER-CONTROL"),e.I&&e.U?(e.o=e.Fb?5*e.U<=n?Math.min(e.U,e.o):Math.min(n,e.o):Math.min(e.U,e.o),e.Da=t?Number(zt(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?Lu(t,"HOLD-BACK"):null,e.za=n?Number(n.value):0),e.ab=Math.max(o,e.ab)}function Lx(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Da)t=e.Da;else if(e.za)t=e.za;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ab*n}e.l.dh(0),e.l.Of(t),e.l.sc(!1)}function Px(e,t,n,o,a){var u=Zn(n,"EXT-X-MAP");if(!u)return null;var f=zt(u,"URI"),h=Cr(o(),f,a);if(f=[h.toString(),Ye(u,"BYTERANGE","")].join("-"),!e.qa.has(f)){var p=void 0,g=null;n=T(n);for(var S=n.next();!S.done;S=n.next())S=S.value,S.name=="EXT-X-KEY"?sc(zt(S,"METHOD"))&&S.id<u.id&&(p=_x(e,S,t,o,a)):S.name=="EXT-X-BYTERANGE"&&S.id<u.id&&(g=S);t=Qk(h,u,g,p),e.qa.set(f,t)}return e.qa.get(f)}function Qk(e,t,n,o){var a=0,u=null;return t=Ye(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),u=Number(a[0]),a=Number(a[1]),u=a+u-1,o&&(n=u+1-a,n%16&&(u+=16-n%16))),new wi(function(){return e},a,u,null,null,null,o)}function Zk(e,t,n,o,a,u,f,h,p){function g(Be){Be=new wn(Be).Pa.split(".").pop();var yt=Wp[f][Be];return yt||(yt=Xp[Be]),yt}var S=o.g,E=Zn(S,"EXTINF"),A=0,b=0,M=null;o.zb.length&&(e.m.isLowLatency=!0);var _=null;if(!e.g.hls.ignoreManifestProgramDateTime){var R=Zn(S,"EXT-X-PROGRAM-DATE-TIME");R&&R.value&&(_=mr(R.value))}var B=gr;if(Zn(S,"EXT-X-GAP")&&(e.m.gapCount++,B=2),!E){if(o.zb.length==0)throw new ne(2,4,4024,"EXTINF");if(!e.I)return null}var N=[];R=!1;var H=null,D=!1,F=!1;if(e.I&&o.zb.length){A=t&&d.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var X=_,J={},ie=0;ie<o.zb.length;J={xe:void 0,ge:void 0},ie++){var de=o.zb[ie],oe=ie==0?n:N[N.length-1],se=ie==0?a:oe.endTime,ue=Number(Ye(de,"DURATION"))||e.U;if(ue){var xe=se+ue,ye=0,Ce=null;if(de.name=="EXT-X-PRELOAD-HINT"?(ye=(ye=Ye(de,"BYTERANGE-START"))?Number(ye):0,(oe=Ye(de,"BYTERANGE-LENGTH"))?Ce=ye+Number(oe)-1:ye&&(Ce=Number.MAX_SAFE_INTEGER)):(ye=Ye(de,"BYTERANGE"),Ce=T(Dx(oe,ye)),ye=Ce.next().value,Ce=Ce.next().value),J.ge=Ye(de,"URI"),J.ge){oe=gr,Ye(de,"GAP")=="YES"&&(e.m.gapCount++,oe=2,D=!0),J.xe=null;var _e=function(Be){return function(){return Be.xe==null&&(Be.xe=Cr(h(),Be.ge,u)),Be.xe}}(J);A&&0<=ye&&Ce!=null&&(H=_e,R=!0),se=new at(se,xe,_e,ye,Ce,t,0,0,1/0,[],"",null,X,oe,p),de.name=="EXT-X-PRELOAD-HINT"&&(se.wf(),F=!0),Ye(de,"INDEPENDENT")!="YES"&&0<ie&&se.Xd(),(J=g(J.ge))&&(se.mimeType=J,Fx.has(J)&&(se.$=null)),N.push(se),X&&(X+=ue)}}}}if(E){if(E=Number(E.value.split(",")[0]),E==0)return null;A=a+E}else if(N.length)A=N[N.length-1].endTime;else return null;R&&(D||N[0].Ha!=0?(R=!1,H=null):N=[]),(E=Zn(S,"EXT-X-BYTERANGE"))?(M=T(Dx(n,E.value)),b=M.next().value,M=M.next().value):N.length&&(b=N[0].Ha,M=N[N.length-1].sa),n="",E=null,f=="image"&&(n="1x1",S=Zn(S,"EXT-X-TILES"))&&(n=zt(S,"LAYOUT"),(S=Ye(S,"DURATION"))&&(E=Number(S)));var Ee=null;return t=new at(a,A,function(){return H?H():(Ee==null&&(Ee=Cr(h(),o.h,u)),Ee||[])},b,M,t,0,0,1/0,N,n,E,_,B,p,0<N.length&&!!o.h),(a=g(o.h))&&(t.mimeType=a,Fx.has(a)&&(t.$=null)),R&&(e.Fb=!0,t.Ig(),F&&t.wf()),t}function Dx(e,t){var n=0,o=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.sa+1,o=n+t-1),[n,o]}function Vp(e,t,n,o,a){if(n=="video"||n=="audio"){var u=e.l.m;if(u&&!Pu(e,n))for(t=Ki(t,"EXT-X-DATERANGE"),t=t.sort(function(_,R){return _=zt(_,"START-DATE"),R=zt(R,"START-DATE"),_<R?-1:_>R?1:0}),n=0;n<t.length;n++){var f=t[n],h=zt(f,"ID");if(!e.Ea.has(h)){var p=zt(f,"START-DATE"),g=mr(p);if(!isNaN(g)){p=Math.max(0,g-u);var S=null,E=Ye(f,"END-DATE");if(E&&(E=mr(E),!isNaN(E)&&(S=E-u,0>S))||S==null&&(E=Ye(f,"DURATION")||Ye(f,"PLANNED-DURATION"))&&(E=parseFloat(E),isNaN(E)||(S=p+E),0>g-u+E))continue;E=Ye(f,"CLASS")||"com.apple.quicktime.HLS";var A=Ye(f,"END-ON-NEXT")=="YES";if(S==null&&A){for(A=n+1;A<t.length;A++){var b=Ye(t[A],"CLASS")||"com.apple.quicktime.HLS";if(E==b&&(b=zt(t[A],"START-DATE"),b=mr(b),!isNaN(b)&&b&&b>g)){S=Math.max(0,b-u);break}}if(S==null)continue}for(g="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),A=[],f=T(f.attributes),b=f.next();!b.done;b=f.next())if(b=b.value,!g.includes(b.name)){var M=px(b.value,o);(b.name=="X-ASSET-URI"||b.name=="X-ASSET-LIST")&&(M=Cr(a(),b.value,o)[0]),A.push({key:b.name,description:"",data:M,mimeType:null,pictureType:null})}A.length&&e.h.onMetadata(E,p,S,A),e.Ea.add(h)}}}}}function Ox(e,t,n,o,a,u){var f=t.segments,h=void 0,p=ta(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),g=ta(t.g,"EXT-X-MEDIA-SEQUENCE",0),S=Zn(t.g,"EXT-X-SKIP"),E=S?Number(Ye(S,"SKIPPED-SEGMENTS")):0,A=g+E,b=0;Ai(e)&&n.has(A)&&(b=n.get(A)),b===0&&e.xa==uc&&0<n.size&&!n.has(A)&&(b=e.l.mb());var M=[],_=null;S=[];for(var R=0;R<f.length;R++){var B=f[R],N=R==0?b:_.endTime;A=g+E+R,Zn(B.g,"EXT-X-DISCONTINUITY")&&p++;for(var H=T(B.g),D=H.next();!D.done;D=H.next())D=D.value,D.name=="EXT-X-KEY"&&(sc(zt(D,"METHOD"))?h=_x(e,D,t,a,o):h=void 0);n.set(A,N),H=Px(e,t,B.g,a,o),!e.I&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.I=e.h.isLowLatencyMode()),(N=Zk(e,H,_,B,N,o,u,a,h))&&((_=ta(B.g,"EXT-X-BITRATE"))?S.push({bitrate:_,duration:N.endTime-N.startTime}):S.length&&(_=S.pop(),_.duration+=N.endTime-N.startTime,S.push(_)),_=N,N.i=p,Pu(e,u)&&e.H!=null&&A<e.H||M.push(N))}if(t=void 0,S.length&&(t=S.reduce(function(F,X){return F+X.duration},0),t=Math.round(S.reduce(function(F,X){return F+X.bitrate*X.duration},0)/t*1e3)),S=M.some(function(F){return F.h!=null})){for(n={},o=0;o<M.length;n={Kd:void 0,Jd:void 0,Bd:void 0,pc:void 0,zd:void 0},o++)if(n.pc=M[o],n.pc.h==null)for(n.Jd=0,n.Kd=o,a=function(F){return function(){var X=M[F.Kd];if(X){if(X.h!=null)return X.h+F.Jd;F.Jd-=X.endTime-X.startTime,F.Kd+=1}return null}}(n),n.zd=0,n.Bd=o,f=function(F){return function(){var X=M[F.Bd];if(X){if(X!=F.pc&&(F.zd+=X.endTime-X.startTime),X.h!=null)return X.h+F.zd;--F.Bd}return null}}(n);n.pc.h==null;)n.pc.h=f(),n.pc.h==null&&(n.pc.h=a())}if(S)for(n=T(M),o=n.next();!o.done;o=n.next())for(a=o.value,o=a.h,a=T(a.g),f=a.next();!f.done;f=a.next())f=f.value,f.h=o,o+=f.endTime-f.startTime;if(n=e.fa,S&&n!=1/0&&!Pu(e,u))for(e=T(M),u=e.next();!u.done;u=e.next())u.value.Vf(n);return{segments:M,bandwidth:t}}function Hp(e,t){if(e==Rt){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function oc(e){return e==Rt?"text/vtt":Wp[e].mp4}function Nx(e,t){e=Ai(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Yb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function Jk(e,t,n,o){var a,u,f,h,p,g,S,E,A,b,M,_,R,B;return $(function(N){switch(N.g){case 1:return a=To,u=Nx(e,o),f=u.segment,f.status==2?N.return(oc(t)):(h=f.M(),p=new wn(h[0]),g=p.Pa.split(".").pop(),S=Wp[t],(E=S[g])||(E=Xp[g])||(E=Hp(t,n))?N.return(E):(b=1,M=Bn(h,e.g.retryParameters),Y(N,2),M.method="HEAD",k(N,or(e,M,a,{type:b}),4)));case 4:_=N.h,A=_.headers["content-type"],K(N,3);break;case 2:if(R=ee(N),!R||R.code!=1002&&R.code!=1001){N.u(3);break}return M.method="GET",k(N,or(e,M,a,{type:b}),6);case 6:B=N.h,A=B.headers["content-type"];case 3:return A?N.return(A.toLowerCase().split(";")[0]):N.return(oc(t))}})}function Ux(e,t,n,o,a,u,f){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(o)||void 0,e.hdr=a||void 0,e.videoLayout=u||void 0,e.colorGamut=f||void 0)}function Gp(e,t,n){return or(e,Bn(t,e.g.retryParameters),0,{type:n?2:3})}function Bx(e){var t,n,o,a,u,f;return $(function(h){switch(h.g){case 1:return e.h?(Y(h,2),t=Date.now(),k(h,e.update(),4)):h.return();case 4:n=Date.now(),Ai(e)&&(o=(n-t)/1e3,e.Db.sample(1,o),a=e.o,u=Math.max(0,a-St(e.Db)),e.A.Y(u)),K(h,3);break;case 2:if(f=ee(h),!e.h)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(f),h.return();f.severity=1,e.h.onError(f),e.A.Y(.1);case 3:if(!e.h)return h.return();e.h.onManifestUpdated(),q(h)}})}function Ai(e){return e.xa!=ac}function rc(e,t){e.xa=t,e.l&&e.l.sc(!Ai(e)),Ai(e)||e.A.stop()}function or(e,t,n,o){if(!e.da)throw new ne(2,7,7001);return t=e.h.networkingEngine.request(n,t,o),Hr(e.da,t),t.promise}function sc(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function jx(e,t,n,o,a,u){var f,h,p,g,S,E,A,b,M,_,R,B,N,H,D;return $(function(F){switch(F.g){case 1:if(n=="video/mp2t")throw new ne(2,4,4040);if(Ll())throw new ne(2,4,4041);if(f=zt(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(f))return F.return(null);if(p=Cr(o(),zt(t,"URI"),u),p[0].startsWith("data:text/plain;base64,")){g=$o(Gi(p[0].split("data:text/plain;base64,").pop())),F.u(2);break}return S=p.sort().join(""),e.pa.has(S)||(E=Bn(p,e.g.retryParameters),A=or(e,E,6),e.pa.set(S,A)),k(F,e.pa.get(S),3);case 3:b=F.h,g=$o(b.data);case 2:if(M="00000000000000000000000000000000",!a){F.u(4);break}if(e.ya.has(a)){_=e.ya.get(a),F.u(5);break}return R=Ps(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),B=To,k(F,or(e,R,B,{type:0}),6);case 6:N=F.h,_=DE(N.data),e.ya.set(a,_);case 5:_&&(M=_);case 4:return H=new Map,H.set(M,g),D="cenc",f=="SAMPLE-AES"&&(D="cbcs"),F.return(Gm(H,D))}})}me("shaka.hls.HlsParser",nc);var Xp={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Wp={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Fx=new Set(["video/mp2t"].concat(L(dr))),$x={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new ne(2,4,4040);if(Ll())throw new ne(2,4,4041);if(t=zt(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),jr("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],zt(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=zt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=zt(e,"URI"),t=Up(t.split("?")[0]),t=Me(t.data),n=jr("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=Ye(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=zt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=zt(e,"URI"),e=Up(e.split("?")[0]),e=Me(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Hl(e,t,new Set,0),jr("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},ac="VOD",zx="EVENT",uc="LIVE",e4={sh:ac,qj:zx,yj:uc};ho["application/x-mpegurl"]=function(){return new nc},ho["application/vnd.apple.mpegurl"]=function(){return new nc};function t4(e){var t=0,n=Qt(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var u=Me(n,e,a);t.push({type:o,value:u}),e+=a}n=t}return n}function lc(e){if(e=Vx(e))e:{e=T(fo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=co(t.value,"LA_URL")){e=Ln(t);break e}e=""}else e="";return e}function Vx(e){return e=Gi(Ln(e)),e=t4(e).filter(function(t){return t.type===n4})[0],e?(e=jo(e.value,!0),(e=As(e,"WRMHEADER"))?e:null):null}var n4=1,i4=new Map().set("com.microsoft.playready",lc).set("com.microsoft.playready.recommendation",lc).set("com.microsoft.playready.software",lc).set("com.microsoft.playready.hardware",lc);function ia(e){if(!Wx){Wx=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);fc=It("ftyp",t,o,t,n),t=It("dref",p4),Yp=It("dinf",t)}this.g=e}function oa(e){for(var t=[],n=T(e.g),o=n.next();!o.done;o=n.next()){var a=t,u=a.push,f=o.value;o=It;var h=f.id+1,p=f.stream.width||0,g=f.stream.height||0;f.type=="audio"&&(g=p=0);var S=f.duration*f.timescale,E=Math.floor(S/(Tr+1));switch(S=Math.floor(S%(Tr+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(sn(h,4)),[0,0,0,0],L(sn(E,4)),L(sn(S,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],L(sn(p,2)),[0,0],L(sn(g,2)),[0,0])),h=It("tkhd",h),p=It,E=f.duration*f.timescale,g=Math.floor(E/(Tr+1)),E=Math.floor(E%(Tr+1)),S=f.stream.language,S=S.charCodeAt(0)-96<<10|S.charCodeAt(1)-96<<5|S.charCodeAt(2)-96,g=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(sn(f.timescale,4)),L(sn(g,4)),L(sn(E,4)),L(sn(S,2)),[0,0])),g=It("mdhd",g),E=f,S=new Uint8Array([]),E.type){case"video":S=r4;break;case"audio":S=s4}E=It("hdlr",S);e:{switch(f.type){case"video":f=It("minf",It("vmhd",c4),Yp,Hx(f));break e;case"audio":f=It("minf",It("smhd",h4),Yp,Hx(f));break e}f=new Uint8Array([])}f=p("mdia",g,E,f),o=o("trak",h,f),u.call(a,o)}for(t=mn.apply(ti,L(t)),u=e.g[0],n=It,o=u.duration*u.timescale,a=Math.floor(o/(Tr+1)),o=Math.floor(o%(Tr+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(sn(u.timescale,4)),L(sn(a,4)),L(sn(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),a=It("mvhd",a),o=[],e=T(e.g),p=e.next();!p.done;p=e.next())f=o,h=f.push,p=new Uint8Array([0,0,0,0].concat(L(sn(p.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),p=It("trex",p),h.call(f,p);if(e=mn.apply(ti,L(o)),e=It("mvex",e),o=[],u.encrypted){for(u=T(u.stream.drmInfos),f=u.next();!f.done;f=u.next())if(f=f.value,f.initData)for(f=T(f.initData),h=f.next();!h.done;h=f.next())o.push(h.value.initData);u=mn.apply(ti,L(o))}else u=new Uint8Array([]);return e=n("moov",a,t,e,u),t=new Uint8Array(fc.byteLength+e.byteLength),t.set(fc),t.set(e,fc.byteLength),t}function Hx(e){var t=It,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var o=e.stream.height||0;if(0<e.wa.byteLength)var a=It("avcC",e.wa);else{a=It;for(var u=7,f=[],h=[],p=0,g=0,S=0,E=0;E<e.$a.length;E++){var A=Xx(e.$a[E]);switch(A[0]&31){case 7:f.push(A),u+=A.length+2;break;case 8:h.push(A),u+=A.length+2}}for(0<f.length&&(p=f[0][1],S=f[0][2],g=f[0][3]),u=new Uint8Array(u),E=0,u[E++]=1,u[E++]=p,u[E++]=S,u[E++]=g,u[E++]=255,u[E++]=224|f.length,p=0;p<f.length;p++)u[E++]=(f[p].length&65280)>>8,u[E++]=f[p].length&255,u.set(f[p],E),E+=f[p].length;for(u[E++]=h.length,f=0;f<h.length;f++)u[E++]=(h[f].length&65280)>>8,u[E++]=h[f].length&255,u.set(h[f],E),E+=h[f].length;a=a("avcC",u)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(L(sn(n,2)),L(sn(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="avc1",h=Gx(e),f=new Uint8Array([]),e.encrypted&&(f=ra(e),o="encv"),n=It(o,n,a,h,f)}else e.codecs.includes("hvc1")&&(o=e.stream.width||0,a=e.stream.height||0,n=new Uint8Array([]),0<e.wa.byteLength&&(n=It("hvcC",e.wa)),o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(L(sn(o,2)),L(sn(a,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),a="hvc1",h=Gx(e),f=new Uint8Array([]),e.encrypted&&(f=ra(e),a="encv"),n=It(a,o,n,h,f));break;case"audio":e.codecs.includes("mp3")?e=It(".mp3",Du(e)):e.codecs.includes("ac-3")?(n=It("dac3",e.ma),o="ac-3",a=new Uint8Array([]),e.encrypted&&(a=ra(e),o="enca"),e=It(o,Du(e),n,a)):e.codecs.includes("ec-3")?(n=It("dec3",e.ma),o="ec-3",a=new Uint8Array([]),e.encrypted&&(a=ra(e),o="enca"),e=It(o,Du(e),n,a)):e.codecs.includes("opus")?(n=It("dOps",e.ma),o="Opus",a=new Uint8Array([]),e.encrypted&&(a=ra(e),o="enca"),e=It(o,Du(e),n,a)):(0<e.ma.byteLength?n=It("esds",e.ma):(n=It,o=e.id+1,a=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,p=ds("audio",e.codecs.split(",")),g={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=g[f],(p==="mp4a.40.5"||p==="mp4a.40.29")&&(h=g[2*f]),f=parseInt(p.split(".").pop(),10),o=new Uint8Array([0,0,0,0,3,25].concat(L(sn(o,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|h>>>1,h<<7|a<<3,6,1,2])),n=n("esds",o)),o="mp4a",a=new Uint8Array([]),e.encrypted&&(a=ra(e),o="enca"),e=It(o,Du(e),n,a)),n=e}return e=It("stsd",d4,n),t("stbl",e,It("stts",a4),It("stsc",u4),It("stsz",f4),It("stco",l4))}function Gx(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(L(sn(e.Ba,4)),L(sn(t,4)))),It("pasp",e)}function Du(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(L(sn(e.stream.audioSamplingRate||44100,2)),[0,0]))}function ra(e){for(var t=It,n=e.codecs.substring(0,e.codecs.indexOf(".")),o=0,a=0;a<n.length;a+=1)o|=n.charCodeAt(a)<<8*(n.length-a-1);n=new Uint8Array([].concat(L(sn(o,4)))),n=It("frma",n),o=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),o=It("schm",o),a=It;var u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=T(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=T(f.keyIds);for(var h=f.next();!h.done;h=f.next())u=Xx(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),u=It("tenc",e,u),t("sinf",n,o,a("schi",u))}function Ou(e){var t=[];e=T(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var o=t.push,a=o.apply,u=It,f=new Uint8Array([0,0,0,0].concat(L(sn(n.data?n.data.rb:0,4))));f=It("mfhd",f);var h,p=n.data?n.data.Ya:[],g=new Uint8Array(4+p.length);for(h=0;h<p.length;h++){var S=p[h].flags;g[h+4]=S.Va<<4|S.Xa<<2|S.Wa}p=It("sdtp",g);var E=p.length+92;g=It,h=new Uint8Array([0,0,0,58].concat(L(sn(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=It("tfhd",h),S=n.data?n.data.baseMediaDecodeTime:0;var A=Math.floor(S%(Tr+1));S=new Uint8Array([1,0,0,0].concat(L(sn(Math.floor(S/(Tr+1)),4)),L(sn(A,4)))),S=It("tfdt",S);var b=E;E=n.data?n.data.Ya:[],A=E.length;var M=12+16*A,_=new Uint8Array(M);for(b+=8+M,_.set([n.type==="video"?1:0,0,15,1].concat(L(sn(A,4)),L(sn(b,4))),0),b=0;b<A;b++){var R=E[b];M=sn(R.duration,4);var B=sn(R.size,4),N=R.flags;R=sn(R.cb,4),_.set([].concat(L(M),L(B),[N.gb<<2|N.Va,N.Xa<<6|N.Wa<<4|N.hb,N.Ua&61440,N.Ua&15],L(R)),12+16*b)}E=It("trun",_),p=g("traf",h,S,E,p),u=u("moof",f,p),a.call(o,t,[u,o4(n)])}return mn.apply(ti,L(t))}function o4(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=mn.apply(ti,L(e)),It("mdat",e)}function sn(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function Xx(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function It(e){var t=Ie.apply(1,arguments),n=Yx[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Yx[e]=n);for(var o=8,a=t.length-1;0<=a;a--)o+=t[a].byteLength;for(a=new Uint8Array(o),a[0]=o>>24&255,a[1]=o>>16&255,a[2]=o>>8&255,a[3]=o&255,a.set(n,4),n=0,o=8;n<t.length;n++)a.set(t[n],o),o+=t[n].byteLength;return a}var Wx=!1,Tr=Math.pow(2,32)-1,Yx={},r4=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s4=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),a4=new Uint8Array([0,0,0,0,0,0,0,0]),u4=new Uint8Array([0,0,0,0,0,0,0,0]),l4=new Uint8Array([0,0,0,0,0,0,0,0]),f4=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),c4=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),h4=new Uint8Array([0,0,0,0,0,0,0,0]),d4=new Uint8Array([0,0,0,0,0,0,0,1]),fc=new Uint8Array([]),p4=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Yp=new Uint8Array([]);function qp(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new ot(5),this.o=new bt(function(){m4(e)}),this.A=new Cs,this.m=new Map}s=qp.prototype,s.configure=function(e){this.g=e},s.start=function(e,t){var n=this;return $(function(o){if(o.g==1)return n.l=[e],n.h=t,k(o,Kp(n),2);if(!n.h)throw new ne(2,7,7001);return o.return(n.j)})};function m4(e){var t;$(function(n){switch(n.g){case 1:return Y(n,2),k(n,Kp(e),4);case 4:K(n,3);break;case 2:t=ee(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();q(n)}})}s.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},s.update=function(){var e=this,t;return $(function(n){if(n.g==1)return Y(n,2),k(n,Kp(e),4);if(n.g!=2)return K(n,0);if(t=ee(n),!e.h||!t)return n.return();e.h.onError(t),q(n)})},s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(){},s.banLocation=function(){},s.setMediaElement=function(){};function Kp(e){var t,n,o,a,u,f,h;return $(function(p){if(p.g==1)return t=Bn(e.l,e.g.retryParameters),n=e.h.networkingEngine,o=Date.now(),a=n.request(0,t,{type:5}),Hr(e.A,a),k(p,a.promise,2);if(u=p.h,!e.h)return p.return();u.uri&&!e.l.includes(u.uri)&&e.l.unshift(u.uri);var g=u.uri,S=u.data,E=e.g.mss.manifestPreprocessor;if(E!=gf){if(Tt("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),S=qv(S,"SmoothStreamingMedia"),!S)throw new ne(2,4,4046,g);E(S),S=So(S.outerHTML)}var A=nd(S,"SmoothStreamingMedia");if(!A)throw new ne(2,4,4046,g);if(g=e.g.mss.manifestPreprocessorTXml,g!=yf&&g(A),e.i||(e.i=new st(null,0)),g=_t(A,"IsLive",od,!1))throw new ne(2,4,4047);e.i.sc(!g),E=_t(A,"TimeScale",ni,1e7),S=_t(A,"DVRWindowLength",ni),g&&(S===0||isNaN(S))&&(S=1/0);var b=_t(A,"CanSeek",od,!1);S===0&&b&&(S=1/0),b=null,S&&0<S&&(b=S/E),g&&!isNaN(e.g.availabilityWindowOverride)&&(b=e.g.availabilityWindowOverride),b==null&&(b=1/0),e.i.pe(b),S=_t(A,"Duration",ni,1/0),g||e.i.Za(S/E),g={variants:[],textStreams:[],timescale:E,duration:S/E};var M;for(b=Jt(A,"Protection"),E=e.g.mss.keySystemsBySystemId,S=[],b=T(b),M=b.next();!M.done;M=b.next())S=S.concat(Jt(M.value,"ProtectionHeader"));if(S.length){for(b=[],M=0;M<S.length;M++){var _=S[M],R=_.attributes.SystemID.toLowerCase(),B=E[R];if(B){var N=Vx(_);if(N)e:{N=T(fo(N,"DATA"));for(var H=N.next();!H.done;H=N.next())if(H=co(H.value,"KID")){N=Gi(Ln(H)),N=new Uint8Array([N[3],N[2],N[1],N[0],N[5],N[4],N[7],N[6]].concat(L(N.slice(8)))),N=$o(N);break e}N=null}else N=null;H=Gi(Ln(_)),R=Br(R.replace(/-/g,"")),R=[{initData:Hl(H,R,new Set,0),initDataType:"cenc",keyId:N}],R=jr(B,"cenc",R),N&&R.keyIds.add(N),(B=i4.get(B))&&(R.licenseServerUri=B(_)),b.push(R)}}E=b}else E=[];for(M=E,b=[],E=[],S=[],A=Jt(A,"StreamIndex"),A=T(A),_=A.next();!_.done;_=A.next()){_=_.value,B=Jt(_,"QualityLevel"),R=g.timescale,N=g.duration,H=Jt(_,"c");for(var D=[],F=0,X=0;X<H.length;++X){var J=H[X],ie=H[X+1],de=_t(J,"t",ni),oe=_t(J,"d",ni);if(J=_t(J,"r",Wl),!oe)break;if(de=de??F,J=J||0,0>J)if(ie){if(ie=_t(ie,"t",ni),ie==null)break;if(de>=ie)break;J=Math.ceil((ie-de)/oe)-1}else{if(N==1/0)break;if(de/R>=N)break;J=Math.ceil((N*R-de)/oe)-1}for(ie=0;ie<=J;++ie)F=de+oe,D.push({start:de/R,end:F/R,$f:de}),de=F}for(R=D,B=T(B),N=B.next();!N.done;N=B.next())(N=g4(e,_,N.value,R,M,g))&&(N.type!="audio"||e.g.disableAudio?N.type!="video"||e.g.disableVideo?N.type!=Rt||e.g.disableText||S.push(N):E.push(N):b.push(N))}for(A=[],b=T(0<b.length?b:[null]),M=b.next();!M.done;M=b.next())for(M=M.value,_=T(0<E.length?E:[null]),D=_.next();!D.done;D=_.next())B=A,R=B.push,N=e,H=M,D=D.value,X=0,H&&H.bandwidth&&0<H.bandwidth&&(X+=H.bandwidth),D&&D.bandwidth&&0<D.bandwidth&&(X+=D.bandwidth),N={id:N.s++,language:H?H.language:"und",disabledUntilTime:0,primary:!!H&&H.primary||!!D&&D.primary,audio:H,video:D,bandwidth:X,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},R.call(B,N);g.variants=A,g.textStreams=S,e.j?(e.j.variants=g.variants,e.j.textStreams=g.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:g.variants,textStreams:g.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.Wd()),Promise.resolve(),f=Date.now(),h=(f-o)/1e3,e.B.sample(1,h),q(p)})}function g4(e,t,n,o,a,u){var f=t.attributes.Type;if(f!=="audio"&&f!=="video"&&f!=="text")return ze("Ignoring unrecognized type:",f),null;var h=t.attributes.Language,p=e.s++,g=_t(n,"Bitrate",Wo),S=_t(n,"MaxWidth",Wo),E=_t(n,"MaxHeight",Wo),A=_t(n,"Channels",Wo),b=_t(n,"SamplingRate",Wo),M=u.duration;o.length&&(M=o[o.length-1].end-o[0].start);var _=e.i.getDuration();e.i.Za(Math.min(M,_));var R={id:p,originalId:t.attributes.Name||String(p),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:g||0,width:S||void 0,height:E||void 0,kind:"",encrypted:0<a.length,drmInfos:a,keyIds:new Set,language:$t(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:A,audioSamplingRate:b,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:M,timescale:u.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((a=t.attributes.Subtype)&&((a=C4[a])&&R.roles.push(a),a==="main"&&(R.primary=!0)),a=n.attributes.FourCC,(a===null||a==="")&&(a=t.attributes.FourCC),!a){if(f==="audio")a="AAC";else if(f==="video")return ze('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!S4.includes(a.toUpperCase()))return ze("Codec not supported:",a),null;switch(n=y4(n,f,a,R),R.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return ze("Quality unsupported without CodecPrivateData",f),null;R.type="audio",R.mimeType="mss/audio/mp4",R.codecs=v4(a,n);break;case"video":if(!n)return ze("Quality unsupported without CodecPrivateData",f),null;R.type="video",R.mimeType="mss/video/mp4",R.codecs=x4(n);break;case"text":R.type=Rt,R.mimeType="application/mp4",(a==="TTML"||a==="DFXP")&&(R.codecs="stpp")}return R.fullMimeTypes.add(Rn(R.mimeType,R.codecs)),R.createSegmentIndex=function(){if(R.segmentIndex)return Promise.resolve();if(e.m.has(R.id))var B=e.m.get(R.id);else B=[],R.type=="video"&&(B=R.mssPrivateData.codecPrivateData.split("00000001").slice(1)),B={id:R.id,type:R.type,codecs:R.codecs,encrypted:R.encrypted,timescale:R.mssPrivateData.timescale,duration:R.mssPrivateData.duration,$a:B,ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:R},B=oa(new ia([B])),e.m.set(R.id,B);return B=w4(e,new wi(function(){return[]},0,null,lf(R),R.mssPrivateData.timescale,B),R,t,o),R.segmentIndex=new Pt(B),Promise.resolve()},R.closeSegmentIndex=function(){R.segmentIndex&&(R.segmentIndex.release(),R.segmentIndex=null)},R}function y4(e,t,n,o){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=o.channelsCount||2,e=o.audioSamplingRate||44100;var a={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return o=a[e],n==="AACH"?(n=new Uint8Array(4),e=a[2*e],n[0]=40|o>>1,n[1]=o<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|o>>1,n[1]=o<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function v4(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function x4(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function w4(e,t,n,o,a){var u=o.attributes.Url.replace("{bitrate}",String(n.bandwidth));o=[],a=T(a);for(var f=a.next(),h={};!f.done;h={re:void 0},f=a.next())h.re=f.value,o.push(new at(h.re.start,h.re.end,function(p){return function(){return Wn(e.l,[u.replace("{start time}",String(p.re.$f))])}}(h),0,null,t,0,0,n.mssPrivateData.duration));return o}me("shaka.mss.MssParser",qp);var S4="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),C4={CAPT:"main",SUBT:"alternate",DESC:"main"};ho["application/vnd.ms-sstr+xml"]=function(){return new qp};function qx(e,t,n,o,a,u){if(200<=n&&299>=n&&n!=202)return{uri:a||o,originalUri:o,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var f=null;try{f=Fo(t)}catch{}throw new ne(n==401||n==403?2:1,1,1001,o,n,f,e,u,a||o)}function Qp(){}function cc(e,t,n,o,a){var u=new k4;Ka(t.headers).forEach(function(g,S){u.append(S,g)});var f=new b4,h={lg:!1,mh:!1};if(e=T4(e,n,{body:t.body||void 0,headers:u,method:t.method,signal:f.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,o,a,t.streamDataCallback),e=new Sn(e,function(){return h.lg=!0,f.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var p=new bt(function(){h.mh=!0,f.abort()});p.Y(t/1e3),e.finally(function(){p.stop()})}return e}function T4(e,t,n,o,a,u,f){var h,p,g,S,E,A,b,M,_,R,B,N,H;return $(function(D){switch(D.g){case 1:return h=E4,p=A4,A=E=0,b=Date.now(),Y(D,2),k(D,h(e,n),4);case 4:if(g=D.h,u(Kx(g.headers)),n.method=="HEAD"){D.u(5);break}return M=g.clone().body.getReader(),R=(_=g.headers.get("Content-Length"))?parseInt(_,10):0,B=function(F){function X(){var J,ie,de;return $(function(oe){switch(oe.g){case 1:return Y(oe,2),k(oe,M.read(),4);case 4:J=oe.h,K(oe,3);break;case 2:return ee(oe),oe.return();case 3:if(J.done){oe.u(5);break}if(E+=J.value.byteLength,!f){oe.u(5);break}return k(oe,f(J.value),5);case 5:ie=Date.now(),(100<ie-b||J.done)&&(de=J.done?0:R-E,a(ie-b,E-A,de),A=E,b=ie),J.done?F.close():(F.enqueue(J.value),X()),q(oe)}})}X()},new p({start:B}),k(D,g.arrayBuffer(),6);case 6:S=D.h;case 5:K(D,3);break;case 2:throw N=ee(D),o.lg?new ne(1,1,7001,e,t):o.mh?new ne(1,1,1003,e,t):new ne(1,1,1002,e,N,t);case 3:return H=Kx(g.headers),D.return(qx(H,S,g.status,e,g.url,t))}})}function Kx(e){var t={};return e.forEach(function(n,o){t[o.trim()]=n}),t}function Qx(){if(d.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(d.Response){if(!new Response("").body)return!1}else return!1;return!(!d.fetch||"polyfill"in d.fetch||!d.AbortController)}me("shaka.net.HttpFetchPlugin",Qp),Qp.isSupported=Qx,Qp.parse=cc;var E4=d.fetch,b4=d.AbortController,A4=d.ReadableStream,k4=d.Headers;Qx()&&(Vo("http",cc,2,!0),Vo("https",cc,2,!0),Vo("blob",cc,2,!0));function Zx(){}function hc(e,t,n,o,a){var u=new I4,f=Date.now(),h=0,p=new Promise(function(g,S){u.open(t.method,e,!0),u.responseType="arraybuffer",u.timeout=t.retryParameters.timeout,u.withCredentials=t.allowCrossSiteCredentials,u.onabort=function(){S(new ne(1,1,7001,e,n))};var E=!1;u.onreadystatechange=function(){if(u.readyState==2&&!E){var b=Jx(u);a(b),E=!0}},u.onload=function(b){var M=Jx(u),_=u.response;try{o(Date.now()-f,b.loaded-h,0);var R=qx(M,_,u.status,e,u.responseURL,n);g(R)}catch(B){S(B)}},u.onerror=function(b){S(new ne(1,1,1002,e,b,n))},u.ontimeout=function(){S(new ne(1,1,1003,e,n))},u.onprogress=function(b){var M=Date.now();(100<M-f||b.lengthComputable&&b.loaded==b.total)&&(o(M-f,b.loaded-h,u.readyState==4?0:b.total-b.loaded),h=b.loaded,f=M)};for(var A in t.headers)u.setRequestHeader(A.toLowerCase(),t.headers[A]);u.send(t.body)});return new Sn(p,function(){return u.abort(),Promise.resolve()})}function Jx(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=T(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}me("shaka.net.HttpXHRPlugin",Zx),Zx.parse=hc;var I4=d.XMLHttpRequest;Vo("http",hc,1,!0),Vo("https",hc,1,!0),Vo("blob",hc,1,!0);function e2(e,t,n,o){this.g=e,this.i=t,this.groupId=n,this.h=o}function Zp(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.sa}function M4(e,t){return Ps(e.g.M(),e.g.Ha,e.g.sa,t.streaming.retryParameters)}function t2(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function n2(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}t2.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function i2(e){var t=this;this.o=e,this.j=new Map,this.i=new Ts(function(){return Jp(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new t2}i2.prototype.destroy=function(){return this.i.destroy()};function R4(e,t,n){e.m=t,e.l=n}function Jp(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function _4(e,t,n,o,a,u){Yt(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var h,p,g,S,E,A,b;return $(function(M){if(M.g==1)return k(M,P4(e,n),2);if(h=M.h,e.i.g)throw new ne(2,9,7001);if(a)for(S in p=Me(h),g=new _g(p),g.data)E=Number(S),A=g.data[E],b=g.g[E],e.l(A,b);e.g.close(o,h.byteLength);var _=e.g;return e.m(_.i==0?0:_.j/_.i,e.g.h),M.return(u(h))})});e.j.set(t,f)}function L4(e){return $(function(t){return t.g==1?k(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function P4(e,t){var n,o,a,u;return $(function(f){return f.g==1?(n=To,o=e.o.request(n,t),a=function(){return o.abort()},e.h.push(a),k(f,o.promise,2)):(u=f.h,Ht(e.h,a),f.return(u.data))})}function dc(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Wt,e.onabort=function(o){o.preventDefault(),n.g.reject()},e.onerror=function(o){o.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}dc.prototype.abort=function(){var e=this;return $(function(t){if(t.g==1){try{e.i.abort()}catch{}return Y(t,2),k(t,e.g,4)}if(t.g!=2)return K(t,0);ee(t),q(t)})};function e0(e,t){return new Promise(function(n,o){var a=e.h.openCursor();a.onerror=o,a.onsuccess=function(){var u;return $(function(f){if(f.g==1)return a.result==null?(n(),f.return()):(u=a.result,k(f,t(u.key,u.value,u),2));u.continue(),q(f)})}})}dc.prototype.store=function(){return this.h},dc.prototype.promise=function(){return this.g};function t0(e){this.h=e,this.g=[]}t0.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Jr(e,t){return pc(e,t,"readwrite")}function pc(e,t,n){n=e.h.transaction([t],n);var o=new dc(n,t);return e.g.push(o),o.promise().then(function(){Ht(e.g,o)},function(){Ht(e.g,o)}),o}function es(e,t,n){this.h=new t0(e),this.i=t,this.g=n}s=es.prototype,s.destroy=function(){return this.h.destroy()},s.hasFixedKeySpace=function(){return!0},s.addSegments=function(){return o2(this.i)},s.removeSegments=function(e,t){return r2(this,this.i,e,t)},s.getSegments=function(e){var t=this,n;return $(function(o){return o.g==1?k(o,s2(t,t.i,e),2):(n=o.h,o.return(n.map(function(a){return t.og(a)})))})},s.addManifests=function(){return o2(this.g)},s.updateManifest=function(){return Promise.reject(new ne(2,9,9016,"Cannot modify values in "+this.g))};function D4(e,t,n){e=Jr(e.h,e.g);var o=e.store();return o.get(t).onsuccess=function(){o.put(n,t)},e.promise()}s.updateManifestExpiration=function(e,t){var n=Jr(this.h,this.g),o=n.store();return o.get(e).onsuccess=function(a){(a=a.target.result)&&(a.expiration=t,o.put(a,e))},n.promise()},s.removeManifests=function(e,t){return r2(this,this.g,e,t)},s.getManifests=function(e){var t=this,n;return $(function(o){return o.g==1?k(o,s2(t,t.g,e),2):(n=o.h,o.return(Promise.all(n.map(function(a){return t.Wc(a)}))))})},s.getAllManifests=function(){var e=this,t,n;return $(function(o){return o.g==1?(t=pc(e.h,e.g,"readonly"),n=new Map,k(o,e0(t,function(a,u){var f;return $(function(h){if(h.g==1)return k(h,e.Wc(u),2);f=h.h,n.set(a,f),q(h)})}),2)):o.g!=3?k(o,t.promise(),3):o.return(n)})},s.og=function(e){return e},s.Wc=function(e){return Promise.resolve(e)};function o2(e){return Promise.reject(new ne(2,9,9011,"Cannot add new value to "+e))}s.add=function(e,t){var n=this,o,a,u,f,h,p,g;return $(function(S){if(S.g==1){for(o=Jr(n.h,e),a=o.store(),u=[],f=T(t),h=f.next(),p={};!h.done;p={Hf:void 0},h=f.next())g=h.value,p.Hf=a.add(g),p.Hf.onsuccess=function(E){return function(){u.push(E.Hf.result)}}(p);return k(S,o.promise(),2)}return S.return(u)})};function r2(e,t,n,o){e=Jr(e.h,t),t=e.store(),n=T(n);for(var a=n.next(),u={};!a.done;u={rf:void 0},a=n.next())u.rf=a.value,t.delete(u.rf).onsuccess=function(f){return function(){return o(f.rf)}}(u);return e.promise()}function s2(e,t,n){var o,a,u,f,h,p,g;return $(function(S){if(S.g==1){for(o=pc(e.h,t,"readonly"),a=o.store(),u={},f=[],h=T(n),p=h.next(),g={};!p.done;g={le:void 0,Sd:void 0},p=h.next())g.Sd=p.value,g.le=a.get(g.Sd),g.le.onsuccess=function(E){return function(){E.le.result==null&&f.push(E.Sd),u[E.Sd]=E.le.result}}(g);return k(S,o.promise(),2)}if(f.length)throw new ne(2,9,9012,"Could not find values for "+f);return S.return(n.map(function(E){return u[E]}))})}function Nu(e){this.g=new t0(e)}Nu.prototype.destroy=function(){return this.g.destroy()},Nu.prototype.getAll=function(){var e=this,t,n;return $(function(o){return o.g==1?(t=pc(e.g,"session-ids","readonly"),n=[],k(o,e0(t,function(a,u){n.push(u)}),2)):o.g!=3?k(o,t.promise(),3):o.return(n)})},Nu.prototype.add=function(e){var t=Jr(this.g,"session-ids"),n=t.store();e=T(e);for(var o=e.next();!o.done;o=e.next())n.add(o.value);return t.promise()},Nu.prototype.remove=function(e){var t=this,n;return $(function(o){return o.g==1?(n=Jr(t.g,"session-ids"),k(o,e0(n,function(a,u,f){e.includes(u.sessionId)&&f.delete()}),2)):k(o,n.promise(),0)})};function mi(){this.g=new Map}mi.prototype.destroy=function(){for(var e=[],t=T(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},mi.prototype.init=function(){var e=this;Uu.forEach(function(a,u){(a=a())&&e.g.set(u,a)});for(var t=[],n=T(this.g.values()),o=n.next();!o.done;o=n.next())t.push(o.value.init());return Promise.all(t)};function a2(e){var t=null;if(e.g.forEach(function(n,o){n.getCells().forEach(function(a,u){a.hasFixedKeySpace()||t||(t={path:{nb:o,Ja:u},Ja:a})})}),t)return t;throw new ne(2,9,9013,"Could not find a cell that supports add-operations")}function O4(e,t){e.g.forEach(function(n,o){n.getCells().forEach(function(a,u){t({nb:o,Ja:u},a)})})}function mc(e,t,n){if(e=e.g.get(t),!e)throw new ne(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new ne(2,9,9013,"Could not find cell with name "+n);return t}function N4(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function U4(e){var t=Array.from(e.g.keys());if(!t.length)throw new ne(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function B4(e){var t,n,o;return $(function(a){return a.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(o=Uu,o.forEach(function(u){(u=u())&&t.push(u)})),k(a,Promise.all(t.map(function(u){return u.erase()})),2)):n?a.u(0):k(a,Promise.all(t.map(function(u){return u.destroy()})),0)})}function u2(e,t){Uu.set(e,t)}me("shaka.offline.StorageMuxer",mi),mi.unregister=function(e){Uu.delete(e)},mi.register=u2,mi.prototype.destroy=mi.prototype.destroy;var Uu=new Map;function Bu(){es.apply(this,arguments)}te(Bu,es),Bu.prototype.updateManifestExpiration=function(e,t){var n=this,o,a,u;return $(function(f){return o=Jr(n.h,n.g),a=o.store(),u=new Wt,a.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,a.put(h),u.resolve()):u.reject(new ne(2,9,9012,"Could not find values for "+e))},k(f,Promise.all([o.promise(),u]),0)})},Bu.prototype.Wc=function(e){var t,n,o,a,u,f;return $(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=o-e.periods[n].startTime,u=j4(e.periods[n],a),t.push(u);return k(h,$v(t),2)}return f=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function j4(e,t){$4(e);for(var n=T(e.streams),o=n.next();!o.done;o=n.next());return e.streams.map(function(a){return F4(a,e.startTime,t)})}function F4(e,t,n){var o=e.initSegmentUri?l2(e.initSegmentUri):null,a=t+e.presentationTimeOffset,u=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:o,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var h=l2(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:h,initSegmentKey:o,appendWindowStart:t,appendWindowEnd:u,timestampOffset:a,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Bu.prototype.og=function(e){return{data:e.data}};function l2(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ne(2,9,9004,"Could not parse uri "+e)}function $4(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=T(t),o=n.next();!o.done;o=n.next())o.value.variantIds=[];for(n=T(e),o=n.next();!o.done;o=n.next())o.value.variantIds=[];if(n=0,e.length&&!t.length){o=n++;for(var a=T(e),u=a.next();!u.done;u=a.next())u.value.variantIds.push(o)}if(!e.length&&t.length)for(o=n++,a=T(t),u=a.next();!u.done;u=a.next())u.value.variantIds.push(o);if(e.length&&t.length)for(t=T(t),o=t.next();!o.done;o=t.next())for(o=o.value,a=T(e),u=a.next();!u.done;u=a.next()){u=u.value;var f=n++;o.variantIds.push(f),u.variantIds.push(f)}}}function gc(){es.apply(this,arguments)}te(gc,es),gc.prototype.Wc=function(e){var t,n,o,a,u,f;return $(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=o-e.periods[n].startTime;for(var p=e.periods[n],g=[],S=T(p.streams),E=S.next();!E.done;E=S.next())E=E.value,E.variantIds.length!=0&&g.push(z4(E,p.startTime,p.startTime+a));u=g,t.push(u)}return k(h,$v(t),2)}return f=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function z4(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){return{startTime:t+o.startTime,endTime:t+o.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:o.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function n0(){es.apply(this,arguments)}te(n0,es),s=n0.prototype,s.hasFixedKeySpace=function(){return!1},s.addSegments=function(e){return this.add(this.i,e)},s.addManifests=function(e){return this.add(this.g,e)},s.updateManifest=function(e,t){return D4(this,e,t)},s.Wc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function f2(){this.m=this.j=this.i=this.h=this.g=this.l=null}s=f2.prototype,s.init=function(){var e=this,t=new Wt,n=!1,o=new bt(function(){n=!0,t.reject(new ne(2,9,9017))});o.Y(5);var a=d.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!n){var u=a.result;e.l=u;var f=u.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new Bu(u,"segment","manifest"):null,e.g=f,f=u.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new gc(u,"segment-v2","manifest-v2"):null,e.h=f,f=u.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new gc(u,"segment-v3","manifest-v3"):null,e.i=f,f=u.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new n0(u,"segment-v5","manifest-v5"):null,e.j=f,u=u.objectStoreNames.contains("session-ids")?new Nu(u):null,e.m=u,o.stop(),t.resolve()}},a.onupgradeneeded=function(){for(var u=a.result,f=T(["segment-v5","manifest-v5","session-ids"]),h=f.next();!h.done;h=f.next())h=h.value,u.objectStoreNames.contains(h)||u.createObjectStore(h,{autoIncrement:!0})},a.onerror=function(u){n||(t.reject(new ne(2,9,9001,a.error)),o.stop(),u.preventDefault())},t},s.destroy=function(){var e=this;return $(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return k(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return k(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return k(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return k(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return k(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),q(t)}})},s.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},s.getEmeSessionCell=function(){return this.m},s.erase=function(){var e=this;return $(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return k(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return k(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return k(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return k(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),k(t,V4(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,k(t,e.init(),0)}})};function V4(){var e=new Wt,t=d.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new ne(2,9,9001,t.error)),n.preventDefault()},e}u2("idb",function(){return Pi()||Mo()||!d.indexedDB?null:new f2});function No(e,t,n,o){this.g=e,this.i=t,this.h=n,this.l=o,this.j=["offline:",e,"/",t,"/",n,"/",o].join("")}No.prototype.nb=function(){return this.i},No.prototype.Ja=function(){return this.h},No.prototype.key=function(){return this.l},No.prototype.toString=function(){return this.j};function i0(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var o=e[3];return o&&t!=null?new No(t,n,o,Number(e[4])):null}function c2(e,t){this.h=e,this.g=t}function h2(e,t){var n=new st(null,0);n.Za(t.duration);var o=t.streams.filter(function(g){return g.type=="audio"}),a=t.streams.filter(function(g){return g.type=="video"});o=H4(e,o,a,n),a=t.streams.filter(function(g){return g.type==Rt}).map(function(g){return yc(e,g,n)});var u=t.streams.filter(function(g){return g.type=="image"}).map(function(g){return yc(e,g,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=T(o.values()),p=h.next();!p.done;p=h.next())p=p.value,p.audio&&p.audio.encrypted&&(p.audio.drmInfos=f),p.video&&p.video.encrypted&&(p.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(o.values()),textStreams:a,imageStreams:u,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function H4(e,t,n,o){for(var a=new Set,u=T(t),f=u.next();!f.done;f=u.next()){f=T(f.value.variantIds);for(var h=f.next();!h.done;h=f.next())a.add(h.value)}for(u=T(n),f=u.next();!f.done;f=u.next())for(f=T(f.value.variantIds),h=f.next();!h.done;h=f.next())a.add(h.value);for(u=new Map,a=T(a),f=a.next();!f.done;f=a.next())f=f.value,u.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=T(t),a=t.next();!a.done;a=t.next())for(f=a.value,a=yc(e,f,o),f=T(f.variantIds),h=f.next();!h.done;h=f.next())h=u.get(h.value),h.language=a.language,h.primary=h.primary||a.primary,h.audio=a;for(n=T(n),t=n.next();!t.done;t=n.next())for(a=t.value,t=yc(e,a,o),a=T(a.variantIds),f=a.next();!f.done;f=a.next())f=u.get(f.value),f.primary=f.primary||t.primary,f.video=t;return u}function yc(e,t,n){var o=t.segments.map(function(a){return G4(e,a,t)});return n.sd(o),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Pt(o),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Rn(t.mimeType,t.codecs)])}}function G4(e,t,n){var o=new No("segment",e.h,e.g,t.dataKey);return e=new at(t.startTime,t.endTime,function(){return[o.toString()]},0,null,t.initSegmentKey!=null?X4(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function X4(e,t){var n=new No("segment",e.h,e.g,t);return new wi(function(){return[n.toString()]},0,null)}function d2(){this.g=null}s=d2.prototype,s.configure=function(){},s.start=function(e,t){var n=this,o,a,u,f,h,p,g;return $(function(S){switch(S.g){case 1:if(o=i0(e),n.g=o,o==null||o.g!="manifest")throw new ne(2,1,9004,e);return a=new mi,Z(S,2),k(S,a.init(),4);case 4:return k(S,mc(a,o.nb(),o.Ja()),5);case 5:return u=S.h,k(S,u.getManifests([o.key()]),6);case 6:return f=S.h,h=f[0],p=new c2(o.nb(),o.Ja()),g=h2(p,h),t.makeTextStreamsForClosedCaptions(g),S.return(g);case 2:return re(S),k(S,a.destroy(),7);case 7:ce(S,0)}})},s.stop=function(){return Promise.resolve()},s.update=function(){},s.onExpirationUpdated=function(e,t){var n=this,o,a,u,f,h,p,g;return $(function(S){switch(S.g){case 1:return o=n.g,a=new mi,Y(S,2,3),k(S,a.init(),5);case 5:return k(S,mc(a,o.nb(),o.Ja()),6);case 6:return u=S.h,k(S,u.getManifests([o.key()]),7);case 7:if(f=S.h,h=f[0],p=h.sessionIds.includes(e),g=h.expiration==null||h.expiration>t,!p||!g){S.u(3);break}return k(S,u.updateManifestExpiration(o.key(),t),3);case 3:return re(S),k(S,a.destroy(),10);case 10:ce(S,0);break;case 2:ee(S),S.u(3)}})},s.onInitialVariantChosen=function(){},s.banLocation=function(){},s.setMediaElement=function(){},ho["application/x-offline-manifest"]=function(){return new d2};function p2(){}function m2(e){var t=i0(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Ss(e)):e=t&&t.g=="segment"?W4(t.key(),t):Vr(new ne(2,1,9004,e)),e}function W4(e,t){var n=new mi;return Ss(void 0).Aa(function(){return n.init()}).Aa(function(){return mc(n,t.nb(),t.Ja())}).Aa(function(o){return o.getSegments([t.key()])}).Aa(function(o){return{uri:t,data:o[0].data,headers:{}}}).finally(function(){return n.destroy()})}me("shaka.offline.OfflineScheme",p2),p2.plugin=m2,Vo("offline",m2);function g2(e,t,n){var o,a,u,f,h,p;return $(function(g){switch(g.g){case 1:o=[];for(var S=[],E=T(n),A=E.next();!A.done;A=E.next()){A=A.value;for(var b=!1,M=T(S),_=M.next();!_.done;_=M.next())if(_=_.value,q4(_.info,A)){_.sessionIds.push(A.sessionId),b=!0;break}b||S.push({info:A,sessionIds:[A.sessionId]})}a=T(S),u=a.next();case 2:if(u.done){g.u(4);break}return f=u.value,h=Y4(e,t,f),k(g,h,5);case 5:p=g.h,o=o.concat(p),u=a.next(),g.u(2);break;case 4:return g.return(o)}})}function Y4(e,t,n){var o,a;return $(function(u){switch(u.g){case 1:return o=new Kl({Lb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Y(u,2),o.configure(e),k(u,LT(o,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:K(u,3);break;case 2:return ee(u),k(u,o.destroy(),5);case 5:return u.return([]);case 3:return a=[],k(u,Promise.all(n.sessionIds.map(function(f){return $(function(h){if(h.g==1)return Y(h,2),k(h,OT(o,f),4);if(h.g!=2)return a.push(f),K(h,0);ee(h),q(h)})})),6);case 6:return k(u,o.destroy(),7);case 7:return u.return(a)}})}function q4(e,t){function n(o,a){return o.robustness==a.robustness&&o.contentType==a.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function K4(e,t,n){var o=t.presentationTimeline.getDuration();return t=y2(t),{offlineUri:null,originalManifestUri:e,duration:o,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function o0(e,t){var n=h2(new c2(e.nb(),e.Ja()),t),o=t.appMetadata||{};return n=y2(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:o,isIncomplete:t.isIncomplete||!1}}function y2(e){var t=[],n=Ul(e.variants);n=T(n);for(var o=n.next();!o.done;o=n.next())t.push(vs(o.value));for(e=T(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Nl(n.value));return t}function Q4(){this.g={}}function Z4(e,t){var n=t.audio,o=t.video;if(n&&!o&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&o&&(e.g[o.id]=o.bandwidth||t.bandwidth),n&&o){var a=n.bandwidth||393216,u=o.bandwidth||t.bandwidth-a;0>=u&&(u=t.bandwidth),e.g[n.id]=a,e.g[o.id]=u}}function J4(e,t){e.g[t.id]=t.bandwidth||2048}function v2(e,t){return e=e.g[t],e==null&&(e=0),e}function zn(e){var t=this;if(e&&e.constructor!=ve)throw new ne(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=Ns(),this.g=new Zt),this.i=[],this.j=[];var n=!e;this.l=new Ts(function(){var o,a,u,f,h;return $(function(p){switch(p.g){case 1:return k(p,Promise.all(t.j.map(function(g){return Jp(g)})),2);case 2:for(o=function(){},a=[],u=T(t.i),f=u.next();!f.done;f=u.next())h=f.value,a.push(h.then(o,o));return k(p,Promise.all(a),3);case 3:if(!n){p.u(4);break}return k(p,t.g.destroy(),4);case 4:t.h=null,t.g=null,q(p)}})})}function r0(){if(wo())e:{for(var e=T(Uu.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}s=zn.prototype,s.destroy=function(){return this.l.destroy()},s.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=mf(e,t)),vr(this.h,e)},s.getConfiguration=function(){var e=Ns();return vr(e,this.h,Ns()),e},s.xb=function(){return this.g},s.store=function(e,t,n){var o=this,a=this.getConfiguration(),u=new i2(this.g);return this.j.push(u),t=e3(this,e,t||{},function(){var f;return $(function(h){return h.g==1?n?h.u(2):k(h,Vd(e,o.g,a.manifest.retryParameters),3):(h.g!=2&&(n=h.h),f=ey(e,n||null),h.return(f()))})},a,u),t=new Sn(t,function(){return Jp(u)}),t.finally(function(){Ht(o.j,u)}),d3(this,t)};function e3(e,t,n,o,a,u){var f,h,p,g,S,E,A,b,M,_,R,B,N,H;return $(function(D){switch(D.g){case 1:return vc(),h=f=null,p=new mi,E=S=g=null,Y(D,2,3),k(D,o(),5);case 5:return f=D.h,k(D,l3(e,t,f,a),6);case 6:if(A=D.h,qn(e),b=!A.presentationTimeline.V()&&!A.presentationTimeline.kc(),!b)throw new ne(2,9,9005,t);return k(D,e.yc(A,function(F){E=E||F},a),7);case 7:if(h=D.h,qn(e),E)throw E;return k(D,n3(A,h,a),8);case 8:return k(D,p.init(),9);case 9:return qn(e),k(D,a2(p),10);case 10:return g=D.h,qn(e),M=i3(h,A,t,n,a,u),_=M.ui,R=M.Xf,k(D,g.Ja.addManifests([_]),11);case 11:if(B=D.h,qn(e),S=B[0],qn(e),E)throw E;return k(D,t3(e,R,S,_,u,a,g.Ja,A,h),12);case 12:return qn(e),C2(A,_,h,a),k(D,g.Ja.updateManifest(S,_),13);case 13:return qn(e),N=new No("manifest",g.path.nb,g.path.Ja,S),D.return(o0(N,_));case 3:return re(D),k(D,p.destroy(),14);case 14:if(!f){D.u(15);break}return k(D,f.stop(),15);case 15:if(!h){D.u(17);break}return k(D,h.destroy(),17);case 17:ce(D,0);break;case 2:if(H=ee(D),S==null){D.u(19);break}return k(D,x2(S),19);case 19:throw E||H}})}function t3(e,t,n,o,a,u,f,h,p){var g,S,E,A,b,M,_,R,B,N;return $(function(H){switch(H.g){case 1:if(g={},S=0,E=function(D,F){var X,J,ie,de,oe,se,ue;return $(function(xe){if(xe.g==1){for(X=T(D),J=X.next(),ie={};!J.done;ie={Ac:void 0},J=X.next())ie.Ac=J.value,de=M4(ie.Ac,u),oe=ie.Ac.i,se=ie.Ac.h,ue=function(ye){return function(Ce){var _e,Ee,Be;return $(function(yt){if(yt.g==1)return k(yt,f.addSegments([{data:Ce}]),2);_e=yt.h,qn(e),Ee=ye.Ac.g,Be=Zp(Ee),g[Be]=_e[0],S+=Ce.byteLength,q(yt)})}}(ie),_4(a,ie.Ac.groupId,de,oe,se,ue);return k(xe,L4(a),2)}return F?(qn(e),C2(h,o,p,u),k(xe,f.updateManifest(n,o),0)):xe.u(0)})},A=!1,Y(H,2),!s0(h)||!A||S2(h)){H.u(4);break}return k(H,E(t.filter(function(D){return D.h}),!0),5);case 5:return qn(e),t=t.filter(function(D){return!D.h}),b=g,M=S,g={},S=0,k(H,w2(f,n,o,b,M,function(){return qn(e)}),6);case 6:qn(e);case 4:if(A){H.u(7);break}return k(H,E(t,!1),8);case 8:return qn(e),_=g,R=S,g={},S=0,k(H,w2(f,n,o,_,R,function(){return qn(e)}),9);case 9:qn(e);case 7:K(H,0);break;case 2:return B=ee(H),N=Object.values(g),k(H,f.removeSegments(N,function(){}),10);case 10:throw B}})}function x2(e){var t,n,o,a;return $(function(u){switch(u.g){case 1:return t=new mi,k(u,t.init(),2);case 2:return k(u,a2(t),3);case 3:return n=u.h,o=new No("manifest",n.path.nb,n.path.Ja,e),k(u,t.destroy(),4);case 4:return a=new zn,k(u,a.remove(o.toString()),0)}})}function w2(e,t,n,o,a,u){var f,h,p,g,S,E,A,b,M,_,R;return $(function(B){switch(B.g){case 1:for(f=!1,Y(B,2),h=!0,p=T(n.streams),g=p.next();!g.done;g=p.next())for(S=g.value,E=T(S.segments),A=E.next();!A.done;A=E.next())b=A.value,M=b.pendingSegmentRefId?o[b.pendingSegmentRefId]:null,M!=null&&(b.dataKey=M,b.pendingSegmentRefId=void 0),M=b.pendingInitSegmentRefId?o[b.pendingInitSegmentRefId]:null,M!=null&&(b.initSegmentKey=M,b.pendingInitSegmentRefId=void 0),b.pendingSegmentRefId&&(h=!1),b.pendingInitSegmentRefId&&(h=!1);return n.size+=a,h&&(n.isIncomplete=!1),k(B,e.updateManifest(t,n),4);case 4:f=!0,u(),K(B,0);break;case 2:return _=ee(B),k(B,x2(t),5);case 5:if(f){B.u(6);break}return R=Object.values(o),k(B,e.removeSegments(R,function(){}),6);case 6:throw _}})}function n3(e,t,n){var o,a,u,f,h,p,g,S,E,A,b,M,_,R,B,N,H,D,F,X,J,ie,de,oe,se,ue,xe,ye,Ce;return $(function(_e){switch(_e.g){case 1:return o={width:1/0,height:1/0},tT(e,n.restrictions,o),k(_e,ng(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(a=[],u=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,h=n.preferredAudioCodecs,eg(e,f,h,u),p=T(e.variants),g=p.next();!g.done;g=p.next())S=g.value,a.push(vs(S));for(E=T(e.textStreams),A=E.next();!A.done;A=E.next())b=A.value,a.push(Nl(b));for(M=T(e.imageStreams),_=M.next();!_.done;_=M.next())R=_.value,a.push(Yh(R));return k(_e,n.offline.trackSelectionCallback(a),3);case 3:for(B=_e.h,N=e.presentationTimeline.getDuration(),H=0,D=T(B),F=D.next();!F.done;F=D.next())X=F.value,J=X.bandwidth*N/8,H+=J;return Y(_e,4),k(_e,n.offline.downloadSizeCallback(H),6);case 6:if(ie=_e.h,!ie)throw new ne(2,9,9014);K(_e,5);break;case 4:throw de=ee(_e),de instanceof ne?de:new ne(2,9,9015);case 5:for(oe=new Set,se=new Set,ue=new Set,xe=T(B),ye=xe.next();!ye.done;ye=xe.next())Ce=ye.value,Ce.type=="variant"&&oe.add(Ce.id),Ce.type=="text"&&se.add(Ce.id),Ce.type=="image"&&ue.add(Ce.id);e.variants=e.variants.filter(function(Ee){return oe.has(Ee.id)}),e.textStreams=e.textStreams.filter(function(Ee){return se.has(Ee.id)}),e.imageStreams=e.imageStreams.filter(function(Ee){return ue.has(Ee.id)}),g3(e),q(_e)}})}function i3(e,t,n,o,a,u){var f=K4(n,t,o),h=a.offline.progressCallback;R4(u,function(b,M){f.size=M,h(f,b)},function(b,M){p&&a.offline.usePersistentLicense&&g==M&&Qa(e,"cenc",b)});var p=s0(t)&&!S2(t),g=null;p&&(g=y3.get(e.g.keySystem));for(var S=new Q4,E=T(t.textStreams),A=E.next();!A.done;A=E.next())S.g[A.value.id]=52;for(E=T(t.imageStreams),A=E.next();!A.done;A=E.next())J4(S,A.value);for(E=T(t.variants),A=E.next();!A.done;A=E.next())Z4(S,A.value);return S=f3(u,S,t,a),u=S.streams,S=S.Xf,E=e.g,A=a.offline.usePersistentLicense,E&&A&&(E.initData=[]),{ui:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:u,sessionIds:A?zg(e):[],drmInfo:E,appMetadata:o,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Xf:S}}function s0(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function S2(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function C2(e,t,n,o){if(t.expiration=n.ad(),n=zg(n),t.sessionIds=o.offline.usePersistentLicense?n:[],s0(e)&&o.offline.usePersistentLicense&&!n.length)throw new ne(2,9,9007)}s.remove=function(e){return a0(this,o3(this,e))};function o3(e,t){var n,o,a,u,f,h;return $(function(p){switch(p.g){case 1:if(vc(),n=i0(t),n==null||n.g!="manifest")throw new ne(2,9,9004,t);return o=n,a=new mi,Z(p,2),k(p,a.init(),4);case 4:return k(p,mc(a,o.nb(),o.Ja()),5);case 5:return u=p.h,k(p,u.getManifests([o.key()]),6);case 6:return f=p.h,h=f[0],k(p,Promise.all([r3(e,h,a),s3(u,o,h)]),2);case 2:return re(p),k(p,a.destroy(),8);case 8:ce(p,0)}})}function T2(e,t){for(var n=[],o=T(e.streams),a=o.next();!a.done;a=o.next())a=a.value,t&&a.type=="video"?n.push({contentType:Rn(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||a.type!="audio"||n.push({contentType:Rn(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function r3(e,t,n){return $(function(o){return k(o,m3(e.g,e.h.drm,n,t),0)})}function s3(e,t,n){function o(){}var a=p3(n);return o0(t,n),Promise.all([e.removeSegments(a,o),e.removeManifests([t.key()],o)])}s.Li=function(){return a0(this,a3(this))};function a3(e){var t,n,o,a,u,f,h,p,g,S;return $(function(E){switch(E.g){case 1:return vc(),t=e.g,n=e.h.drm,o=new mi,a=!1,Z(E,2),k(E,o.init(),4);case 4:u=[],N4(o,function(A){return u.push(A)}),f=T(u),h=f.next();case 5:if(h.done){E.u(2);break}return p=h.value,k(E,p.getAll(),8);case 8:return g=E.h,k(E,g2(n,t,g),9);case 9:return S=E.h,k(E,p.remove(S),10);case 10:S.length!=g.length&&(a=!0),h=f.next(),E.u(5);break;case 2:return re(E),k(E,o.destroy(),11);case 11:ce(E,3);break;case 3:return E.return(!a)}})}s.list=function(){return a0(this,u3())};function u3(){var e,t,n;return $(function(o){switch(o.g){case 1:return vc(),e=[],t=new mi,Z(o,2),k(o,t.init(),4);case 4:return n=Promise.resolve(),O4(t,function(a,u){n=n.then(function(){var f;return $(function(h){if(h.g==1)return k(h,u.getAllManifests(),2);f=h.h,f.forEach(function(p,g){p=o0(new No("manifest",a.nb,a.Ja,g),p),e.push(p)}),q(h)})})}),k(o,n,2);case 2:return re(o),k(o,t.destroy(),6);case 6:ce(o,3);break;case 3:return o.return(e)}})}function l3(e,t,n,o){var a,u,f,h,p;return $(function(g){if(g.g==1)return a=null,u=e.g,f={networkingEngine:u,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(S){a=S},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return o.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(o.manifest),qn(e),k(g,n.start(t,f),2);if(g.g!=3)return h=g.h,qn(e),p=E2(h),k(g,Promise.all(Jh(p,function(S){return S.createSegmentIndex()})),3);if(qn(e),a)throw a;return g.return(h)})}s.yc=function(e,t,n){var o=this,a;return $(function(u){return u.g==1?(a=new Kl({Lb:o.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(n.drm),k(u,_T(a,e.variants,n.offline.usePersistentLicense),2)):u.g!=3?k(u,$g(a),3):u.return(a)})};function f3(e,t,n,o){var a=new Map,u=E2(n),f=new Map;u=T(u);for(var h=u.next();!h.done;h=u.next()){h=h.value;var p=c3(e,t,n,h,o,a);f.set(h.id,p)}for(e=T(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),Xf:Array.from(a.values())}}function c3(e,t,n,o,a,u){var f={id:o.id,originalId:o.originalId,groupId:o.groupId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,colorGamut:o.colorGamut,videoLayout:o.videoLayout,kind:o.kind,language:o.language,originalLanguage:o.originalLanguage,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout,external:o.external,fastSwitching:o.fastSwitching},h=a.offline.numberOfParallelDownloads,p=0;return h3(o,n.presentationTimeline.mb(),function(g){var S=Zp(g),E=void 0;if(!u.has(S)){var A=g.endTime-g.startTime;A=v2(t,o.id)*A,A=n2(e.g,A),u.set(S,new e2(g,A,p,!1))}g.$&&(E=Zp(g.$),u.has(E)||(A=.5*v2(t,o.id),A=n2(e.g,A),u.set(E,new e2(g.$,A,p,!0)))),f.segments.push({pendingInitSegmentRefId:E,initSegmentKey:E?0:null,startTime:g.startTime,endTime:g.endTime,appendWindowStart:g.appendWindowStart,appendWindowEnd:g.appendWindowEnd,timestampOffset:g.timestampOffset,tilesLayout:g.tilesLayout,pendingSegmentRefId:S,dataKey:0,mimeType:g.mimeType,codecs:g.codecs}),p=(p+1)%h}),f}function h3(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var o=e.segmentIndex.get(t);o;)n(o),o=e.segmentIndex.get(++t)}function qn(e){if(e.l.g)throw new ne(2,9,7001)}function vc(){if(!r0())throw new ne(2,9,9e3)}function a0(e,t){return $(function(n){return n.g==1?(e.i.push(t),Z(n,2),k(n,t,4)):n.g!=2?n.return(n.h):(re(n),Ht(e.i,t),ce(n,0))})}function d3(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Ht(e.i,n)})}function p3(e){var t=new Set;e=T(e.streams);for(var n=e.next();!n.done;n=e.next()){n=T(n.value.segments);for(var o=n.next();!o.done;o=n.next())o=o.value,o.initSegmentKey!=null&&t.add(o.initSegmentKey),t.add(o.dataKey)}return Array.from(t)}function m3(e,t,n,o){var a,u,f;return $(function(h){return h.g==1?o.drmInfo?(a=U4(n),u=o.sessionIds.map(function(p){return{sessionId:p,keySystem:o.drmInfo.keySystem,licenseUri:o.drmInfo.licenseServerUri,serverCertificate:o.drmInfo.serverCertificate,audioCapabilities:T2(o,!1),videoCapabilities:T2(o,!0)}}),k(h,g2(t,e,u),2)):h.return():h.g!=3?(f=h.h,k(h,a.remove(f),3)):k(h,a.add(u.filter(function(p){return!f.includes(p.sessionId)})),0)})}function E2(e){for(var t=new Set,n=T(e.textStreams),o=n.next();!o.done;o=n.next())t.add(o.value);for(n=T(e.imageStreams),o=n.next();!o.done;o=n.next())t.add(o.value);for(e=T(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function g3(e){e.variants.map(function(u){return u.video});var t=new Set(e.variants.map(function(u){return u.audio}));e=e.textStreams;for(var n=T(t),o=n.next();!o.done;o=n.next()){o=T(t);for(var a=o.next();!a.done;a=o.next());}for(t=T(e),n=t.next();!n.done;n=t.next())for(n=T(e),o=n.next();!o.done;o=n.next());}me("shaka.offline.Storage",zn),zn.deleteAll=function(){var e;return $(function(t){return t.g==1?(e=new mi,Z(t,2),k(t,B4(e),2)):t.g!=5?(re(t),k(t,e.destroy(),5)):ce(t,0)})},zn.prototype.list=zn.prototype.list,zn.prototype.removeEmeSessions=zn.prototype.Li,zn.prototype.remove=zn.prototype.remove,zn.prototype.store=zn.prototype.store,zn.prototype.getNetworkingEngine=zn.prototype.xb,zn.prototype.getConfiguration=zn.prototype.getConfiguration,zn.prototype.configure=zn.prototype.configure,zn.prototype.destroy=zn.prototype.destroy,zn.support=r0;var y3=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");sp.offline=r0;function Hn(){}function ri(e,t){for(e={priority:t||0,callback:e},t=0;t<ju.length;t++)if(ju[t].priority<e.priority){ju.splice(t,0,e);return}ju.push(e)}me("shaka.polyfill",Hn),Hn.register=ri,Hn.installAll=function(){for(var e=T(ju),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){ze("Error installing polyfill!",n)}}};var ju=[];function Fu(){this.g=new ts}function b2(){d.AbortController||(d.AbortController=Fu,d.AbortSignal=ts)}Fu.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new je("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},v.Object.defineProperties(Fu.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Hn.AbortController=Fu,Fu.install=b2;function ts(){this.h=!1,this.g=void 0,this.onabort=null,this.i=new Bt}ts.prototype.addEventListener=function(e,t,n){return this.i.addEventListener(e,t,n)},ts.prototype.removeEventListener=function(e,t,n){return this.i.removeEventListener(e,t,n)},ts.prototype.dispatchEvent=function(e){return this.i.dispatchEvent(e)},ts.prototype.throwIfAborted=function(){if(this.h)throw this.g},v.Object.defineProperties(ts.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ri(b2);function A2(){}function k2(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=T(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())v3(t.value)}function v3(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Hn.Aria=A2,A2.install=k2,ri(k2);function I2(){}function M2(){Ww()}Hn.EncryptionScheme=I2,I2.install=M2,ri(M2,-2);function R2(){}function _2(){if(d.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",sa),document.addEventListener("webkitfullscreenerror",sa),document.addEventListener("mozfullscreenchange",sa),document.addEventListener("mozfullscreenerror",sa),document.addEventListener("MSFullscreenChange",sa),document.addEventListener("MSFullscreenError",sa)}}function sa(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Hn.Fullscreen=R2,R2.install=_2,ri(_2);function xc(){}function L2(){var e=!0;!Pi()||Pi()&&_l()||Pi()&&Xt("Fuchsia")||(e=!1),(fs()||Ml()||Lo()||_o()||Ro()||Xt("PC=EOS")||Rl())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),P2=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=x3)}function x3(e){var t,n,o,a,u,f,h,p,g,S,E;return $(function(A){switch(A.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,o=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(a=n.contentType,u=$a(a),!u)||o&&(f=o.contentType,h=$a(f),!h))return A.return(t)}else return A.return(t);A.u(2);break}if(!wo())return A.return(t);if(!n){A.u(3);break}return k(A,w3(n),4);case 4:if(p=A.h,!p)return A.return(t);case 3:if(o){var b=o.contentType;if(Pi()&&o.spatialRendering&&(b+="; spatialRendering=true"),g=Ne(b),!g)return A.return(t)}case 2:return e.keySystemConfiguration?(S=e.keySystemConfiguration,k(A,S3(n,o,S),6)):(t.supported=!0,A.return(t));case 6:(E=A.h)&&(t.supported=!0,t.keySystemAccess=E);case 5:return A.return(t)}})}function w3(e){var t,n;return $(function(o){return o.g==1?Pi()?k(o,C3(e),3):Ro()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),o.return(Ne(t))):o.u(2):o.g!=2?(n=o.h,o.return(n)):o.return(Ne(e.contentType))})}function S3(e,t,n){var o,a,u,f,h,p,g,S,E;return $(function(A){switch(A.g){case 1:if(o=[],a=[],n.audio&&(u={robustness:n.audio.robustness||"",contentType:t.contentType},Ro()&&t.contentType.includes('codecs="ac-3"')&&(u.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(u.encryptionScheme=n.audio.encryptionScheme),o.push(u)),n.video&&(f={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(f.encryptionScheme=n.video.encryptionScheme),a.push(f)),h={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},o.length&&(h.audioCapabilities=o),a.length&&(h.videoCapabilities=a),p=e?e.contentType:"",g=t?t.contentType:"",S=n.keySystem,E=null,Y(A,2),Al.has(p+"#"+g+"#"+S)){E=Al.get(p+"#"+g+"#"+S)||null,A.u(4);break}return k(A,navigator.requestMediaKeySystemAccess(n.keySystem,[h]),5);case 5:E=A.h,Al.set(p+"#"+g+"#"+S,E);case 4:K(A,3);break;case 2:ee(A);case 3:return A.return(E)}})}function C3(e){var t,n;return $(function(o){return o.g==1?d.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in wc?(n=wc[t],o.u(2)):k(o,cast.__platform__.canDisplayType(t),3)):o.return(Ne(e.contentType)):(o.g!=2&&(n=o.h,wc[t]=n),o.return(n))})}Hn.MediaCapabilities=xc,xc.install=L2;var P2=null;xc.originalMcap=P2;var wc={};xc.memoizedCanDisplayTypeRequests_=wc,ri(L2,-1);function D2(){}function O2(){var e=cs();(d.MediaSource||d.ManagedMediaSource)&&(e&&d.MediaSource?10>=e?d.MediaSource=null:12>=e?(u0(),N2()):15>=e&&u0():Xt("DT_STB_BCM")?(u0(),N2()):(kl()||Va()||Xt("Tizen 4"))&&E3()),(d.MediaSource||d.ManagedMediaSource)&&T3(),d.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&b3()}function u0(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Ie.apply(0,arguments));return t.abort=function(){},t}}function N2(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function T3(){if(d.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return Pl(n)!="mp2t"&&e(n)}}if(d.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);d.ManagedMediaSource.isTypeSupported=function(n){return Pl(n)!="mp2t"&&t(n)}}}function E3(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return ms(n)!="opus"&&e(n)},d.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);d.ManagedMediaSource.isTypeSupported=function(n){return ms(n)!="opus"&&t(n)}}}function b3(){var e=MediaSource.isTypeSupported;_o()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),o=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>o)return e(t);var a=n[o].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),u=a.findIndex(function(f){return f.startsWith("vp09")});return 0<=u&&(a[u]="vp9",n[o]='codecs="'+a.join(",")+'"',t=n.join("; ")),e(t)})}Hn.MediaSource=D2,D2.install=O2,ri(O2);function U2(){}function B2(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?A3():d.orientation!=null&&k3())}function A3(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function k3(){function e(){switch(d.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Sc;screen.orientation=t,e(),d.addEventListener("orientationchange",function(){e();var n=new je("change");t.dispatchEvent(n)})}Hn.Orientation=U2,U2.install=B2;function Sc(){Bt.call(this),this.type="",this.angle=0}te(Sc,Bt),Sc.prototype.lock=function(e){function t(o){return screen.lockOrientation?screen.lockOrientation(o):screen.mozLockOrientation?screen.mozLockOrientation(o):screen.msLockOrientation?screen.msLockOrientation(o):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Sc.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},ri(B2);function l0(){}var f0,c0,h0,d0,p0,m0;function I3(e,t){try{var n=new Cc(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function M3(e){var t=this.mediaKeys;return t&&t!=e&&j2(t,null),delete this.mediaKeys,(this.mediaKeys=e)?j2(e,this):Promise.resolve()}function R3(e){if(e=Me(e.initData),Qt(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=jo(e.subarray(4),!0),e=So(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=pn(e),this.dispatchEvent(t)}Hn.PatchedMediaKeysApple=l0,l0.uninstall=function(){f0&&(f0=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",c0),HTMLMediaElement.prototype.setMediaKeys=h0,d.MediaKeys=d0,d.MediaKeySystemAccess=p0,navigator.requestMediaKeySystemAccess=m0,c0=m0=h0=p0=d0=null,d.shakaMediaKeysPolyfill="")},l0.install=function(e){d.HTMLVideoElement&&d.WebKitMediaKeys&&(e!==void 0&&e&&(f0=!0,c0=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),h0=HTMLMediaElement.prototype.setMediaKeys,d0=d.MediaKeys,p0=d.MediaKeySystemAccess,m0=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=M3,d.MediaKeys=$u,d.MediaKeySystemAccess=Cc,navigator.requestMediaKeySystemAccess=I3,d.shakaMediaKeysPolyfill=_3)};function Cc(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=T(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var o=!1,a=!1;if(n.audioCapabilities)for(var u=T(n.audioCapabilities),f=u.next();!f.done;f=u.next())f=f.value,f.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),a=!0));if(n.videoCapabilities)for(n=T(n.videoCapabilities),u=n.next();!u.done;u=n.next())u=u.value,u.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(t.videoCapabilities.push(u),a=!0));o||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=a?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Cc.prototype.createMediaKeys=function(){var e=new $u(this.keySystem);return Promise.resolve(e)},Cc.prototype.getConfiguration=function(){return this.g};function $u(e){this.h=new WebKitMediaKeys(e),this.g=new Ae}$u.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new g0(this.h)},$u.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function j2(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",R3);try{return Ls(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}$u.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function g0(e){Bt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ae,this.sessionId="",this.expiration=NaN,this.closed=new Wt,this.keyStatuses=new F2}te(g0,Bt),s=g0.prototype,s.generateRequest=function(e,t){var n=this;this.h=new Wt;try{var o=this.l.createSession("video/mp4",Me(t));this.i=o,this.sessionId=o.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(a){n.h&&(n.h.resolve(),n.h=null),a=new Map().set("messageType",n.keyStatuses.Yb()==null?"license-request":"license-renewal").set("message",pn(a.message)),a=new je("message",a),n.dispatchEvent(a)}),this.j.D(o,"webkitkeyadded",function(){n.g&&(Tc(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(o,"webkitkeyerror",function(){var a=Error("EME PatchedMediaKeysApple key error");if(a.errorCode=n.i.error,n.h!=null)n.h.reject(a),n.h=null;else if(n.g!=null)n.g.reject(a),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Tc(n,"output-not-allowed");break;default:Tc(n,"internal-error")}}),Tc(this,"status-pending")}catch(a){this.h.reject(a)}return this.h},s.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},s.update=function(e){this.g=new Wt;try{this.i.update(Me(e))}catch(t){this.g.reject(t)}return this.g},s.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},s.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Tc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new je("keystatuseschange"),e.dispatchEvent(t)}function F2(){this.size=0,this.g=void 0}s=F2.prototype,s.Yb=function(){return this.g},s.forEach=function(e){this.g&&e(this.g,bl.value())},s.get=function(e){if(this.has(e))return this.g},s.has=function(e){var t=bl.value();return!!(this.g&&bn(e,t))},s.entries=function(){},s.keys=function(){},s.values=function(){};var _3="apple";function $2(){}function z2(){d.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||Va()||Xt("Tizen 4")||Xt("Tizen 5.0")||Il())&&(MediaKeys.prototype.setServerCertificate=L3)}function L3(){return Promise.resolve(!1)}Hn.PatchedMediaKeysCert=$2,$2.install=z2,ri(z2);function V2(){}function H2(){!d.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=P3,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=D3,d.MediaKeys=Ec,d.MediaKeySystemAccess=y0,d.shakaMediaKeysPolyfill=O3)}function P3(){return Promise.reject(Error("The key system specified is not supported."))}function D3(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Hn.PatchedMediaKeysNop=V2,V2.install=H2;function Ec(){throw new TypeError("Illegal constructor.")}Ec.prototype.createSession=function(){},Ec.prototype.setServerCertificate=function(){},Ec.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function y0(){throw this.keySystem="",new TypeError("Illegal constructor.")}y0.prototype.getConfiguration=function(){},y0.prototype.createMediaKeys=function(){};var O3="nop";ri(H2,-10);function G2(){}function X2(){if(!(!d.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)C0="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=N3,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=U3,d.MediaKeys=zu,d.MediaKeySystemAccess=bc,d.shakaMediaKeysPolyfill=B3}}function v0(e){var t=C0;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function N3(e,t){try{var n=new bc(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function U3(e){var t=this.mediaKeys;return t&&t!=e&&W2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&W2(e,this),Promise.resolve()}Hn.PatchedMediaKeysWebkit=G2,G2.install=X2;function bc(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var o=!1,a=document.getElementsByTagName("video");a=a.length?a[0]:document.createElement("video"),t=T(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:u.initDataTypes,sessionTypes:["temporary"],label:u.label},h=!1;if(u.audioCapabilities)for(var p=T(u.audioCapabilities),g=p.next();!g.done;g=p.next())g=g.value,g.contentType&&(h=!0,a.canPlayType(g.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(g),o=!0));if(u.videoCapabilities)for(p=T(u.videoCapabilities),g=p.next();!g.done;g=p.next())g=g.value,g.contentType&&(h=!0,a.canPlayType(g.contentType,this.g)&&(f.videoCapabilities.push(g),o=!0));if(h||(o=a.canPlayType("video/mp4",this.g)||a.canPlayType("video/webm",this.g)),u.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):o=!1),o){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}bc.prototype.createMediaKeys=function(){var e=new zu(this.g);return Promise.resolve(e)},bc.prototype.getConfiguration=function(){return this.h};function zu(e){this.l=e,this.h=null,this.g=new Ae,this.i=[],this.j=new Map}function W2(e,t){e.h=t,e.g.Ra();var n=C0;t&&(e.g.D(t,n+"needkey",function(o){var a=new CustomEvent("encrypted");a.initDataType="cenc",a.initData=pn(o.initData),e.h.dispatchEvent(a)}),e.g.D(t,n+"keymessage",function(o){var a=x0(e,o.sessionId);a&&(o=new Map().set("messageType",a.keyStatuses.Yb()==null?"licenserequest":"licenserenewal").set("message",o.message),o=new je("message",o),a.h&&(a.h.resolve(),a.h=null),a.dispatchEvent(o))}),e.g.D(t,n+"keyadded",function(o){(o=x0(e,o.sessionId))&&o.ready()}),e.g.D(t,n+"keyerror",function(o){var a=x0(e,o.sessionId);if(a){var u=Error("EME v0.1b key error"),f=o.errorCode;f.systemCode=o.systemCode,u.errorCode=f,!o.sessionId&&a.h?(o.systemCode==45&&(u.message="Unsupported session type."),a.h.reject(u),a.h=null):o.sessionId&&a.g?(a.g.reject(u),a.g=null):(u=o.systemCode,o.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ac(a,"output-restricted"):u==1?Ac(a,"expired"):Ac(a,"internal-error"))}}))}zu.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new w0(t,this.l,e),this.i.push(e),e},zu.prototype.setServerCertificate=function(){return Promise.resolve(!1)},zu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function x0(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function w0(e,t,n){Bt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Wt,this.keyStatuses=new q2}te(w0,Bt),s=w0.prototype,s.ready=function(){Ac(this,"usable"),this.g&&this.g.resolve(),this.g=null};function Y2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var o=Me(So("LOAD_SESSION|"+n));else{var a=So("PERSISTENT|");o=mn(a,t)}else o=Me(t)}catch(f){return Promise.reject(f)}e.h=new Wt;var u=v0("generateKeyRequest");try{e.j[u](e.i,o)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new bt(function(){try{e.j[u](e.i,o)}catch(h){e.h.reject(h),e.h=null}}).Y(.01)}return e.h}function S0(e,t,n){if(e.g)e.g.then(function(){return S0(e,t,n)}).catch(function(){return S0(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var o=nn(n),a=JSON.parse(o);a.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),o=Gi(a.keys[0].k),a=Gi(a.keys[0].kid)}else o=Me(n),a=null;var u=v0("addKey");try{e.j[u](e.i,o,a,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function Ac(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new je("keystatuseschange"),e.dispatchEvent(t)}s.generateRequest=function(e,t){return Y2(this,t,null)},s.load=function(e){return this.l=="persistent-license"?Y2(this,null,e):Promise.reject(Error("Not a persistent session."))},s.update=function(e){var t=new Wt;return S0(this,t,e),t},s.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=v0("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},s.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function q2(){this.size=0,this.g=void 0}s=q2.prototype,s.Yb=function(){return this.g},s.forEach=function(e){this.g&&e(this.g,bl.value())},s.get=function(e){if(this.has(e))return this.g},s.has=function(e){var t=bl.value();return!!(this.g&&bn(e,t))},s.entries=function(){},s.keys=function(){},s.values=function(){};var C0="",B3="webkit";ri(X2);function K2(){}function Q2(){if(d.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=F3,Object.defineProperty(e,"disablePictureInPicture",{get:z3,set:V3,enumerable:!0,configurable:!0}),document.exitPictureInPicture=$3,document.addEventListener("webkitpresentationmodechanged",j3,!0))}}function j3(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function F3(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function $3(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function z3(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function V3(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Hn.PiPWebkit=K2,K2.install=Q2,ri(Q2);function Z2(){}function J2(){d.crypto&&("randomUUID"in d.crypto||(d.crypto.randomUUID=H3))}function H3(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Hn.RandomUUID=Z2,Z2.install=J2,ri(J2);function ew(){}function tw(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:G3})}function G3(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Hn.Symbol=ew,ew.install=tw,ri(tw);function nw(){}function iw(){if(d.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Hn.VideoPlayPromise=nw,nw.install=iw,ri(iw);function ow(){}function rw(){if(d.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||Il())&&(e.getVideoPlaybackQuality=X3)}}function X3(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Hn.VideoPlaybackQuality=ow,ow.install=rw,ri(rw);function sw(){}function aw(){if(!d.VTTCue&&d.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=T0;else if(t==6)e=W3;else{try{var n=!!T0(1,2,"")}catch{n=!1}n&&(e=T0)}e&&(d.VTTCue=function(o,a,u){return e(o,a,u)})}}function T0(e,t,n){return new d.TextTrackCue(e,t,n)}function W3(e,t,n){return new d.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Hn.VTTCue=sw,sw.install=aw,ri(aw);function Ni(){}Ni.prototype.parseInit=function(){},Ni.prototype.setSequenceMode=function(){},Ni.prototype.setManifestType=function(){},Ni.prototype.parseMedia=function(e,t){var n=null,o=[];e=nn(e).split(/\r?\n/),e=T(e);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&!/^\s+$/.test(a)&&(a=Y3.exec(a))){var u=q3.exec(a[1]);u=60*parseInt(u[1],10)+parseFloat(u[2].replace(",",".")),a=new Lt(u,t.segmentEnd?t.segmentEnd:u+2,a[2]),n&&(n.endTime=u,o.push(n)),n=a}return n&&o.push(n),o},me("shaka.text.LrcTextParser",Ni),Ni.prototype.parseMedia=Ni.prototype.parseMedia,Ni.prototype.setManifestType=Ni.prototype.setManifestType,Ni.prototype.setSequenceMode=Ni.prototype.setSequenceMode,Ni.prototype.parseInit=Ni.prototype.parseInit;var Y3=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,q3=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;_n["application/x-subtitle-lrc"]=function(){return new Ni};function ki(){}ki.prototype.parseInit=function(){},ki.prototype.setSequenceMode=function(){},ki.prototype.setManifestType=function(){},ki.prototype.parseMedia=function(e,t,n){var o=nn(e);if(e=[],o=="")return e;var a=As(o,"tt");if(!a)throw new ne(2,2,2005,"Failed to parse TTML.");if(o=fo(a,"body")[0],!o)return[];var u=Do(a,Vu,"frameRate"),f=Do(a,Vu,"subFrameRate"),h=Do(a,Vu,"frameRateMultiplier"),p=Do(a,Vu,"tickRate"),g=Do(a,Vu,"cellResolution"),S=a.attributes["xml:space"]||"default",E=Do(a,Mc,"extent");if(S!="default"&&S!="preserve")throw new ne(2,2,2005,"Invalid xml:space value: "+S);S=S=="default",u=new Z3(u,f,h,p),g=g&&(g=/^(\d+) (\d+)$/.exec(g))?{dc:parseInt(g[1],10),rows:parseInt(g[2],10)}:null,f=(f=fo(a,"metadata")[0])?f.children:[],h=fo(a,"style"),a=fo(a,"region"),p=[];for(var A=T(a),b=A.next();!b.done;b=A.next()){var M=b.value;b=new Fn;var _=M.attributes["xml:id"];if(_){b.id=_;var R=null;E&&(R=k0.exec(E)||I0.exec(E)),_=R?Number(R[1]):null,R=R?Number(R[2]):null;var B,N=kc(M,h,"extent");if(N){var H=(B=k0.exec(N))||I0.exec(N);H!=null&&(b.width=Number(H[1]),b.height=Number(H[2]),B||(_!=null&&(b.width=100*b.width/_),R!=null&&(b.height=100*b.height/R)),b.widthUnits=B||_!=null?Ct:0,b.heightUnits=B||R!=null?Ct:0)}(M=kc(M,h,"origin"))&&(H=(B=k0.exec(M))||I0.exec(M),H!=null&&(b.viewportAnchorX=Number(H[1]),b.viewportAnchorY=Number(H[2]),B?N||(b.width=100-b.viewportAnchorX,b.widthUnits=Ct,b.height=100-b.viewportAnchorY,b.heightUnits=Ct):(R!=null&&(b.viewportAnchorY=100*b.viewportAnchorY/R),_!=null&&(b.viewportAnchorX=100*b.viewportAnchorX/_)),b.viewportAnchorUnits=B||_!=null?Ct:0))}else b=null;b&&p.push(b)}if(Jt(o,"p").length)throw new ne(2,2,2001,"<p> can only be inside <div> in TTML");for(E=T(Jt(o,"div")),A=E.next();!A.done;A=E.next())if(Jt(A.value,"span").length)throw new ne(2,2,2001,"<span> can only be inside <p> in TTML");return(t=uw(o,t,u,f,h,a,p,S,g,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function uw(e,t,n,o,a,u,f,h,p,g,S,E){var A=g;if(Gl(e)){if(!S)return null;var b={tagName:"span",children:[Ln(e)],attributes:{},parent:null}}else b=e;for(var M=null,_=T(vw),R=_.next();!R.done&&!(M=Ic(b,"backgroundImage",o,"#",R.value)[0]);R=_.next());_=null;var B=Do(b,vw,"backgroundImage");if(E&&B&&!B.startsWith("#")&&(R=new wn(E),B=new wn(B),(R=R.resolve(B).toString())&&(_=R)),(e.tagName=="p"||M||_)&&(S=!0),e=S,R=(b.attributes["xml:space"]||(h?"default":"preserve"))=="default",B=b.children.every(Gl),h=[],!B)for(var N=T(b.children),H=N.next();!H.done;H=N.next())(H=uw(H.value,t,n,o,a,u,f,R,p,b,S,E))&&h.push(H);if(o=g!=null,E=Ln(b),E=b.children.length&&E&&/\S/.test(E),H=b.attributes.begin||b.attributes.end||b.attributes.dur,!(H||E||b.tagName=="br"||h.length!=0||o&&!R))return null;for(N=cw(b,n),E=N.start,N=N.end;A&&A.tagName&&A.tagName!="tt";)N=Q3(A,n,E,N),E=N.start,N=N.end,A=A.parent;if(E==null&&(E=0),E+=t.periodStart,N=N==null?1/0:N+t.periodStart,E=Math.max(E,t.segmentStart),N=Math.min(N,t.segmentEnd),!H&&0<h.length)for(E=1/0,N=0,t=T(h),n=t.next();!n.done;n=t.next())n=n.value,E=Math.min(E,n.startTime),N=Math.max(N,n.endTime);if(b.tagName=="br")return a=new Lt(E,N,""),a.lineBreak=!0,a;if(t="",B&&(t=fi(Ln(b)||""),R&&(t=t.replace(/\s+/g," "))),t=new Lt(E,N,t),t.nestedCues=h,S||(t.isContainer=!0),p&&(t.cellResolution=p),p=Ic(b,"region",u,"")[0],b.attributes.region&&p&&p.attributes["xml:id"]){var D=p.attributes["xml:id"];t.region=f.filter(function(F){return F.id==D})[0]}return f=p,g&&o&&!b.attributes.region&&!b.attributes.style&&(f=Ic(g,"region",u,"")[0]),K3(t,b,f,M,_,a,e,h.length==0),t}function K3(e,t,n,o,a,u,f,h){if(f=f||h,Kn(t,n,u,"direction",f)=="rtl"&&(e.direction="rtl"),h=Kn(t,n,u,"writingMode",f),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=vo),(h=Kn(t,n,u,"textAlign",!0))?(e.positionAlign=tI[h],e.lineAlign=eI[h],e.textAlign=Re[h.toUpperCase()]):e.textAlign=lt,(h=Kn(t,n,u,"displayAlign",!0))&&(e.displayAlign=oo[h.toUpperCase()]),(h=Kn(t,n,u,"color",f))&&(e.color=h),(h=Kn(t,n,u,"backgroundColor",f))&&(e.backgroundColor=h),(h=Kn(t,n,u,"border",f))&&(e.border=h),h=Kn(t,n,u,"fontFamily",f))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h.split(",").filter(function(p){return p!="default"}).join(",")}switch((h=Kn(t,n,u,"fontWeight",f))&&h=="bold"&&(e.fontWeight=700),h=Kn(t,n,u,"wrapOption",f),e.wrapLine=!(h&&h=="noWrap"),(h=Kn(t,n,u,"lineHeight",f))&&h.match(aa)&&(e.lineHeight=h),(h=Kn(t,n,u,"fontSize",f))&&(h.match(aa)||h.match(J3))&&(e.fontSize=h),(h=Kn(t,n,u,"fontStyle",f))&&(e.fontStyle=Or[h.toUpperCase()]),o?(a=o.attributes.imageType||o.attributes.imagetype,h=o.attributes.encoding,o=Ln(o).trim(),a=="PNG"&&h=="Base64"&&o&&(e.backgroundImage="data:image/png;base64,"+o)):a&&(e.backgroundImage=a),(o=Kn(t,n,u,"textOutline",f))&&(o=o.split(" "),o[0].match(aa)?e.textStrokeColor=e.color:(e.textStrokeColor=o[0],o.shift()),o[0]&&o[0].match(aa)?e.textStrokeWidth=o[0]:e.textStrokeColor=""),(o=Kn(t,n,u,"letterSpacing",f))&&o.match(aa)&&(e.letterSpacing=o),(o=Kn(t,n,u,"linePadding",f))&&o.match(aa)&&(e.linePadding=o),(o=Kn(t,n,u,"opacity",f))&&(e.opacity=parseFloat(o)),(o=kc(n,u,"textDecoration"))&&lw(e,o),(o=E0(t,u,"textDecoration"))&&lw(e,o),(o=Kn(t,n,u,"textCombine",f))&&(e.textCombineUpright=o),Kn(t,n,u,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function lw(e,t){t=T(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ht(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ht(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ht(e.textDecoration,"overline")}}function Kn(e,t,n,o,a){return a=a===void 0?!0:a,(e=E0(e,n,o))?e:a?kc(t,n,o):null}function kc(e,t,n){if(!e)return null;var o=Do(e,Mc,n);return o||fw(e,t,n)}function E0(e,t,n){var o=Do(e,Mc,n);return o||fw(e,t,n)}function fw(e,t,n){e=Ic(e,"style",t,"");for(var o=null,a=0;a<e.length;a++){var u=Xo(e[a],"urn:ebu:tt:style",n);u||(u=Do(e[a],Mc,n)),u||(u=E0(e[a],t,n)),u&&(o=u)}return o}function Ic(e,t,n,o,a){var u=[];if(!e||1>n.length)return u;var f=e;for(e=null;!e&&!(e=a?Xo(f,a,t):f.attributes[t])&&(f=f.parent,f););if(t=e){for(t=T(t.split(" ")),a=t.next();!a.done;a=t.next())for(a=a.value,e=T(n),f=e.next();!f.done;f=e.next())if(f=f.value,o+f.attributes["xml:id"]==a){u.push(f);break}}return u}function Q3(e,t,n,o){return e=cw(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),o==null?o=e.end:e.start!=null&&(o+=e.start),{start:n,end:o}}function cw(e,t){var n=b0(e.attributes.begin,t),o=b0(e.attributes.end,t);return e=b0(e.attributes.dur,t),o==null&&e!=null&&(o=n+e),{start:n,end:o}}function b0(e,t){var n=null;if(hw.test(e)){e=hw.exec(e),n=Number(e[1]);var o=Number(e[2]),a=Number(e[3]),u=Number(e[4]);u+=(Number(e[5])||0)/t.h,a+=u/t.frameRate,n=a+60*o+3600*n}else if(dw.test(e))n=A0(dw,e);else if(pw.test(e))n=A0(pw,e);else if(mw.test(e))e=mw.exec(e),n=Number(e[1])/t.frameRate;else if(gw.test(e))e=gw.exec(e),n=Number(e[1])/t.g;else if(yw.test(e))n=A0(yw,e);else if(e)throw new ne(2,2,2001,"Could not parse cue time range in TTML");return n}function A0(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}me("shaka.text.TtmlTextParser",ki),ki.prototype.parseMedia=ki.prototype.parseMedia,ki.prototype.setManifestType=ki.prototype.setManifestType,ki.prototype.setSequenceMode=ki.prototype.setSequenceMode,ki.prototype.parseInit=ki.prototype.parseInit;function Z3(e,t,n,o){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(o),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var k0=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,J3=/^(\d{1,4}(?:\.\d+)?|100)%$/,aa=/^(\d+px|\d+em|\d*\.?\d+c)$/,I0=/^(\d+)px (\d+)px$/,hw=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,dw=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,pw=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,mw=/^(\d*(?:\.\d*)?)f$/,gw=/^(\d*(?:\.\d*)?)t$/,yw=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),eI={left:xo,center:"center",right:"end",start:xo,end:"end"},tI={left:"line-left",center:"center",right:"line-right"},Vu=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Mc=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],vw=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];_n["application/ttml+xml"]=function(){return new ki};function Vn(){this.g=new ki}Vn.prototype.parseInit=function(e){var t=!1;if(new Kt().box("moov",kt).box("trak",kt).box("mdia",kt).box("minf",kt).box("stbl",kt).S("stsd",pr).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new ne(2,2,2007)},Vn.prototype.setSequenceMode=function(){},Vn.prototype.setManifestType=function(){},Vn.prototype.parseMedia=function(e,t,n){var o=this,a=!1,u=[];if(new Kt().box("mdat",Es(function(f){a=!0,u=u.concat(o.g.parseMedia(f,t,n))})).parse(e,!1),!a)throw new ne(2,2,2007);return u},me("shaka.text.Mp4TtmlParser",Vn),Vn.prototype.parseMedia=Vn.prototype.parseMedia,Vn.prototype.setManifestType=Vn.prototype.setManifestType,Vn.prototype.setSequenceMode=Vn.prototype.setSequenceMode,Vn.prototype.parseInit=Vn.prototype.parseInit,_n['application/mp4; codecs="stpp"']=function(){return new Vn},_n['application/mp4; codecs="stpp.ttml"']=function(){return new Vn},_n['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Vn},_n['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new Vn},_n['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new Vn},_n['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new Vn},_n['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new Vn},_n['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Vn};function si(){this.h=!1,this.g="UNKNOWN"}si.prototype.parseInit=function(){},si.prototype.setSequenceMode=function(e){this.h=e},si.prototype.setManifestType=function(e){this.g=e},si.prototype.parseMedia=function(e,t){e=nn(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new ne(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var o=n[0];if(e=o.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=o.match(/MPEGTS:(\d+)/m),!e||!o)throw new ne(2,2,2e3);if(e=Rc(new xr(e[1])),e==null)throw new ne(2,2,2e3);o=Number(o[1]);for(var a=t.segmentStart-t.periodStart;95443.7176888889<=a;)a-=95443.7176888889,o+=8589934592;e=t.periodStart+o/9e4-e}else e=t.segmentStart;for(t=[],o=T(n[0].split(`
`)),a=o.next();!a.done;a=o.next())if(a=a.value,/^Region:/.test(a)){a=new xr(a);var u=new Fn;qr(a),Gs(a);for(var f=qr(a);f;){var h=u,p=f;(f=/^id=(.*)$/.exec(p))?h.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(p))?h.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(p))?(h.height=Number(f[1]),h.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(h.regionAnchorX=Number(f[1]),h.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(h.viewportAnchorX=Number(f[1]),h.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(p)&&(h.scroll="up"),Gs(a),f=qr(a)}t.push(u)}for(o=new Map,xw(o),a=[],n=T(n.slice(1)),u=n.next();!u.done;u=n.next()){if(u=u.value.split(`
`),(u.length!=1||u[0])&&!/^NOTE($|[ \t])/.test(u[0])&&u[0]=="STYLE"){for(h=[],f=-1,p=1;p<u.length;p++)u[p].includes("::cue")&&(h.push([]),f=h.length-1),f!=-1&&(h[f].push(u[p]),u[p].includes("}")&&(f=-1));for(h=T(h),f=h.next();!f.done;f=h.next()){var g=f.value;f="global",(p=g[0].match(/\((.*)\)/))&&(f=p.pop()),p=g.slice(1,-1),g[0].includes("}")&&(g=/\{(.*?)\}/.exec(g[0]))&&(p=g[1].split(";")),(g=o.get(f))||(g=new Lt(0,0,""));for(var S=!1,E=0;E<p.length;E++){var A=/^\s*([^:]+):\s*(.*)/.exec(p[E]);if(A){var b=A[2].trim().replace(";","");switch(A[1].trim()){case"background-color":case"background":S=!0,g.backgroundColor=b;break;case"color":S=!0,g.color=b;break;case"font-family":S=!0,g.fontFamily=b;break;case"font-size":S=!0,g.fontSize=b;break;case"font-weight":(700<=parseInt(b,10)||b=="bold")&&(S=!0,g.fontWeight=700);break;case"font-style":switch(b){case"normal":S=!0,g.fontStyle=Bo;break;case"italic":S=!0,g.fontStyle="italic";break;case"oblique":S=!0,g.fontStyle="oblique"}break;case"opacity":S=!0,g.opacity=parseFloat(b);break;case"text-combine-upright":S=!0,g.textCombineUpright=b;break;case"text-shadow":S=!0,g.textShadow=b;break;case"white-space":S=!0,g.wrapLine=b!="noWrap"}}}S&&o.set(f,g)}}if(g=u,S=e,g.length==1&&!g[0]||/^NOTE($|[ \t])/.test(g[0])||g[0]=="STYLE"||g[0]=="REGION")u=null;else if(u=null,g[0].includes("-->")||(u=g[0],g.splice(0,1)),h=new xr(g[0]),f=Rc(h),E=Zo(h,/[ \t]+--\x3e[ \t]+/g),p=Rc(h),f==null||E==null||p==null)ze("Failed to parse VTT time code. Cue skipped:",u,g),u=null;else{for(f+=S,p+=S,g=g.slice(1).join(`
`).trim(),o.has("global")?(S=o.get("global").clone(),S.startTime=f,S.endTime=p,S.payload=""):S=new Lt(f,p,""),Gs(h),f=qr(h);f;)Cw(S,f,t),Gs(h),f=qr(h);ww(g,S,o),u!=null&&(S.id=u),u=S}u&&a.push(u)}return a};function xw(e){for(var t=T(Object.entries(Gt)),n=t.next();!n.done;n=t.next()){var o=T(n.value);n=o.next().value,o=o.next().value;var a=new Lt(0,0,"");a.color=o,e.set("."+n,a)}for(t=T(Object.entries(Et)),n=t.next();!n.done;n=t.next())o=T(n.value),n=o.next().value,o=o.next().value,a=new Lt(0,0,""),a.backgroundColor=o,e.set("."+n,a)}function ww(e,t,n){if(e.includes("<")){n.size===0&&xw(n);var o=e;e=[];for(var a=-1,u=0;u<o.length;u++)o[u]==="<"?a=u+1:o[u]===">"&&0<a&&(a=o.substr(a,u-a),a.match(Tw)&&e.push(a),a=-1);for(e=T(e),u=e.next();!u.done;u=e.next())u=u.value,o=o.replace("<"+u+">",'<div time="'+u+'">'),o+="</div>";e=o;e:{u=e,a=[];var f=-1;e="",o=!1;for(var h=0;h<u.length;h++)if(u[h]==="/"){var p=u.indexOf(">",h);if(p===-1){e=u;break e}if((p=u.substring(h+1,p))&&p=="v"){o=!0;var g=null;if(a.length&&(g=a[a.length-1]),g){if(g===p)e+="/"+p+">";else{if(!g.startsWith("v")){e+=u[h];continue}e+="/"+g+">"}h+=p.length+1}else e+=u[h]}else e+=u[h]}else u[h]==="<"?(f=h+1,u[f]!="v"&&(f=-1)):u[h]===">"&&0<f&&(a.push(u.substr(f,h-f)),f=-1),e+=u[h];for(u=T(a),a=u.next();!a.done;a=u.next())a=a.value,f=a.replace(" ",".voice-"),e=e.replace("<"+a+">","<"+f+">"),e=e.replace("</"+a+">","</"+f+">"),o||(e+="</"+f+">")}e=nI(e);try{var S=As("<span>"+e+"</span>","span")}catch{}if(S)if(S=S.children,S.length!=1||S[0].tagName)for(S=T(S),e=S.next();!e.done;e=S.next())Sw(e.value,t,n);else t.payload=fi(e);else t.payload=fi(e)}else t.payload=fi(e)}function nI(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(a){return t[a]||""}):e||""}function Hu(e,t){return e&&0<e.length?e:t}function Sw(e,t,n){var o=t.clone();if(o.nestedCues=[],o.payload="",o.rubyTag="",o.line=null,o.region=new Fn,o.position=null,o.size=0,e.tagName)for(var a=T(e.tagName.split(/(?=[ .])+/g)),u=a.next();!u.done;u=a.next()){var f=u=u.value;if(f.startsWith(".voice-")){var h=f.split("-").pop();f='v[voice="'+h+'"]',n.has(f)||(f="v[voice="+h+"]")}switch(n.has(f)&&(h=o,f=n.get(f))&&(h.backgroundColor=Hu(f.backgroundColor,h.backgroundColor),h.color=Hu(f.color,h.color),h.fontFamily=Hu(f.fontFamily,h.fontFamily),h.fontSize=Hu(f.fontSize,h.fontSize),h.textShadow=Hu(f.textShadow,h.textShadow),h.fontWeight=f.fontWeight,h.fontStyle=f.fontStyle,h.opacity=f.opacity,h.rubyTag=f.rubyTag,h.textCombineUpright=f.textCombineUpright,h.wrapLine=f.wrapLine),u){case"br":o=gi(o.startTime,o.endTime),t.nestedCues.push(o);return;case"b":o.fontWeight=700;break;case"i":o.fontStyle="italic";break;case"u":o.textDecoration.push("underline");break;case"font":(u=e.attributes.color)&&(o.color=u);break;case"div":if(u=e.attributes.time,!u)break;(u=Rc(new xr(u)))&&(o.startTime=u);break;case"ruby":case"rp":case"rt":o.rubyTag=u}}if(a=e.children,Gl(e)||a.length==1&&Gl(a[0]))for(n=Ln(e).split(`
`),e=!0,n=T(n),a=n.next();!a.done;a=n.next())a=a.value,e||(e=gi(o.startTime,o.endTime),t.nestedCues.push(e)),0<a.length&&(e=o.clone(),e.payload=fi(a),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(o),t=T(a),e=t.next();!e.done;e=t.next())Sw(e.value,o,n)}function Cw(e,t,n){var o;(o=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=o[1],t=="middle"?e.textAlign=lt:e.textAlign=Re[t.toUpperCase()]):(o=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=o[1]=="lr"?"vertical-lr":"vertical-rl":(o=/^size:([\d.]+)%$/.exec(t))?e.size=Number(o[1]):(o=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(o[1]),o[2]&&(t=o[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":yo)):(o=/^region:(.*)$/.exec(t))?(t=iI(n,o[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Dr[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ro,e.line=Number(n[1]),n[2]&&(e.lineAlign=Dr[n[2].toUpperCase()]))}function iI(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function Rc(e){if(e=Zo(e,Tw),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}me("shaka.text.VttTextParser",si),si.prototype.parseMedia=si.prototype.parseMedia,si.prototype.setManifestType=si.prototype.setManifestType,si.prototype.setSequenceMode=si.prototype.setSequenceMode,si.prototype.parseInit=si.prototype.parseInit;var Tw=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;_n["text/vtt"]=function(){return new si},_n['text/vtt; codecs="vtt"']=function(){return new si},_n['text/vtt; codecs="wvtt"']=function(){return new si};function Ui(){this.g=null}Ui.prototype.parseInit=function(e){var t=this,n=!1;if(new Kt().box("moov",kt).box("trak",kt).box("mdia",kt).S("mdhd",function(o){o=Zl(o.reader,o.version),t.g=o.timescale}).box("minf",kt).box("stbl",kt).S("stsd",pr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new ne(2,2,2008);if(!n)throw new ne(2,2,2008)},Ui.prototype.setSequenceMode=function(){},Ui.prototype.setManifestType=function(){},Ui.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new ne(2,2,2008);var n=0,o=[],a,u=[],f=!1,h=!1,p=!1,g=null;if(new Kt().box("moof",kt).box("traf",kt).S("tfdt",function(H){f=!0,n=Ql(H.reader,H.version).baseMediaDecodeTime}).S("tfhd",function(H){g=ay(H.reader,H.flags).Yc}).S("trun",function(H){h=!0,o=uy(H.reader,H.version,H.flags).Wg}).box("mdat",Es(function(H){p=!0,a=H})).parse(e,!1),!p&&!f&&!h)throw new ne(2,2,2008);e=n;for(var S=new qt(a,0),E=T(o),A=E.next();!A.done;A=E.next()){A=A.value;var b=A.Jf||g,M=A.ne?n+A.ne:e;e=M+(b||0);var _=0;do{var R=S.P();_+=R;var B=S.P(),N=null;Vl(B)=="vttc"?8<R&&(N=S.qb(R-8)):S.skip(R-8),b&&N&&(R=oI(N,t.periodStart+M/this.g,t.periodStart+e/this.g),u.push(R))}while(A.sampleSize&&_<A.sampleSize)}return u.filter($r)};function oI(e,t,n){var o,a,u;return new Kt().box("payl",Es(function(f){o=nn(f)})).box("iden",Es(function(f){a=nn(f)})).box("sttg",Es(function(f){u=nn(f)})).parse(e),o?rI(o,a,u,t,n):null}function rI(e,t,n,o,a){if(o=new Lt(o,a,""),ww(e,o,new Map),t&&(o.id=t),n)for(e=new xr(n),t=qr(e);t;)Cw(o,t,[]),Gs(e),t=qr(e);return o}me("shaka.text.Mp4VttParser",Ui),Ui.prototype.parseMedia=Ui.prototype.parseMedia,Ui.prototype.setManifestType=Ui.prototype.setManifestType,Ui.prototype.setSequenceMode=Ui.prototype.setSequenceMode,Ui.prototype.parseInit=Ui.prototype.parseInit,_n['application/mp4; codecs="wvtt"']=function(){return new Ui};function Bi(){}Bi.prototype.parseInit=function(){},Bi.prototype.setSequenceMode=function(){},Bi.prototype.setManifestType=function(){},Bi.prototype.parseMedia=function(e){var t=nn(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=T(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var o=new xr(n[0]),a=Ew(o),u=Zo(o,/,/g);if(o=Ew(o),a==null||u==null||o==null)throw new ne(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Lt(a,o,n.slice(1).join(`
`).trim()))}return e};function Ew(e){if(e=Zo(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}me("shaka.text.SbvTextParser",Bi),Bi.prototype.parseMedia=Bi.prototype.parseMedia,Bi.prototype.setManifestType=Bi.prototype.setManifestType,Bi.prototype.setSequenceMode=Bi.prototype.setSequenceMode,Bi.prototype.parseInit=Bi.prototype.parseInit,_n["text/x-subviewer"]=function(){return new Bi};function Ii(){this.g=new si}Ii.prototype.parseInit=function(){},Ii.prototype.setSequenceMode=function(){},Ii.prototype.setManifestType=function(){},Ii.prototype.parseMedia=function(e,t,n){return e=nn(e),e=bw(e),e=Me(So(e)),this.g.parseMedia(e,t,n)};function bw(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=T(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}me("shaka.text.SrtTextParser",Ii),Ii.srt2webvtt=bw,Ii.prototype.parseMedia=Ii.prototype.parseMedia,Ii.prototype.setManifestType=Ii.prototype.setManifestType,Ii.prototype.setSequenceMode=Ii.prototype.setSequenceMode,Ii.prototype.parseInit=Ii.prototype.parseInit,_n["text/srt"]=function(){return new Ii};function ji(){}ji.prototype.parseInit=function(){},ji.prototype.setSequenceMode=function(){},ji.prototype.setManifestType=function(){},ji.prototype.parseMedia=function(e){var t="",n="",o=null,a=null;for(a=nn(e).split(/\r?\n\s*\r?\n/),e=T(a),a=e.next();!a.done;a=e.next()){var u=a.value;a=u,(u=aI.exec(u))&&(o=u[1],a=u[2]),o=="V4 Styles"||o=="V4+ Styles"?(t=a,t=n?t+(`
`+a):a):o=="Events"&&(n=n?n+(`
`+a):a)}for(o=[],a=null,t=T(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(u=Iw.exec(e))){if(e=u[1].trim(),u=u[2].trim(),e=="Format")a=u.split(_c);else if(e=="Style"){e=u.split(_c),u={};for(var f=0;f<a.length&&f<e.length;f++)u[a[f]]=e[f];o.push(u)}}for(a=[],t=null,n=T(n.split(/\r?\n/)),u=n.next(),e={};!u.done;e={jh:void 0},u=n.next())if(u=u.value,!/^\s*;/.test(u)&&(f=Iw.exec(u))){if(u=f[1].trim(),f=f[2].trim(),u=="Format")t=f.split(_c);else if(u=="Dialogue"){f=f.split(_c),u={};for(var h=0;h<t.length&&h<f.length;h++)u[t[h]]=f[h];h=kw(u.Start);var p=kw(u.End);f=new Lt(h,p,f.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.jh=u.Style,(e=o.find(function(g){return function(S){return S.Name==g.jh}}(e)))&&sI(f,e),a.push(f)}}return a};function sI(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=Aw(n))&&(e.color=n),(n=t.BackColour)&&(n=Aw(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=dt,e.textAlign="start";break;case 2:e.displayAlign=dt,e.textAlign=lt;break;case 3:e.displayAlign=dt,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=lt;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=lt;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function Aw(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function kw(e){return e=uI.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}me("shaka.text.SsaTextParser",ji),ji.prototype.parseMedia=ji.prototype.parseMedia,ji.prototype.setManifestType=ji.prototype.setManifestType,ji.prototype.setSequenceMode=ji.prototype.setSequenceMode,ji.prototype.parseInit=ji.prototype.parseInit;var aI=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Iw=/^\s*([^:]+):\s*(.*)/,_c=/\s*,\s*/,uI=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;_n["text/x-ssa"]=function(){return new ji};function Mw(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,ca:e}:null}function Rw(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=(e[t+2]&60)>>>2;if(o>n.length-1)return null;var a=((e[t+2]&192)>>>6)+1,u=(e[t+2]&1)<<2;return u|=(e[t+3]&192)>>>6,{sampleRate:n[o],channelCount:u,codec:"mp4a.40."+a}}function _w(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var o=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return o<=n?!1:(t+=o,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function lI(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Fi(e){this.i=e,this.h=0,this.g=new Map}s=Fi.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ne(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Di(t)||"mp4a.40.2")+'"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){for(var a=Me(e),u=ks(a),f=u.length;f<a.length&&!_w(a,f);f++);if(e=1e3*n.endTime,u=Gr(u),u.length&&n&&(u=u.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=u.data),u=Rw(a,f),!u)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount;for(var h=[];f<a.length;){var p=Mw(a,f);if(!p)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));var g=p.Qd+p.ca;f+g<=a.length&&h.push({data:a.subarray(f+p.Qd,f+g),size:p.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),f+=g}return a=u.sampleRate,e=Math.floor(e*a/1e3),o={id:t.id,type:"audio",codecs:u.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:h},stream:t},o=new ia([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=oa(o),this.g.set(n,t)),n=Ou(o),this.h++,t=mn(t,n),Promise.resolve(t)},me("shaka.transmuxer.AacTransmuxer",Fi),Fi.prototype.transmux=Fi.prototype.transmux,Fi.prototype.getOriginalMimeType=Fi.prototype.getOriginalMimeType,Fi.prototype.convertCodecs=Fi.prototype.convertCodecs,Fi.prototype.isSupported=Fi.prototype.isSupported,Fi.prototype.destroy=Fi.prototype.destroy,Li("audio/aac",function(){return new Fi("audio/aac")},hr);function Lw(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var o=e[t+4]&63,a=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+n];if(t+a>e.length)return null;var u=e[t+6]>>5,f=0;u===2?f+=2:(u&1&&u!==1&&(f+=2),u&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|u<<3|f<<2|o>>4,o<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][u]+f,ma:e,ca:a}}function fI(e,t){if(e[t]===11&&e[t+1]===119){var n=0,o=5;t+=o;for(var a,u;0<o;){u=e[t];var f=Math.min(o,8),h=8-f;a=4278190080>>>24+h<<h,a=(u&a)>>h,n=n?n<<f|a:a,t+=1,o-=f}if(16>n)return!0}return!1}function Qi(e){this.i=e,this.h=0,this.g=new Map}s=Qi.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ne(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){e=Me(e);for(var a=ks(e),u=a.length;u<e.length&&!fI(e,u);u++);var f=1e3*n.endTime;a=Gr(a),a.length&&n&&(a=a.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=a.data),a=0;for(var h=new Uint8Array([]),p=[];u<e.length;){var g=Lw(e,u);if(!g)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=g.sampleRate,t.channelsCount=g.channelCount,a=g.sampleRate,h=g.ma,p.push({data:e.subarray(u,u+g.ca),size:g.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=g.ca}return e=Math.floor(f*a/1e3),o={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:o,$a:[],ma:h,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},o=new ia([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=oa(o),this.g.set(n,t)),n=Ou(o),this.h++,t=mn(t,n),Promise.resolve(t)},me("shaka.transmuxer.Ac3Transmuxer",Qi),Qi.prototype.transmux=Qi.prototype.transmux,Qi.prototype.getOriginalMimeType=Qi.prototype.getOriginalMimeType,Qi.prototype.convertCodecs=Qi.prototype.convertCodecs,Qi.prototype.isSupported=Qi.prototype.isSupported,Qi.prototype.destroy=Qi.prototype.destroy,Li("audio/ac3",function(){return new Qi("audio/ac3")},hr);function Pw(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Yo(e.subarray(t+2));Ci(n,2),Ci(n,3);var o=At(n,11)+1<<1,a=At(n,2);if(a==3){a=At(n,2),a=[24e3,22060,16e3][a];var u=3}else a=[48e3,44100,32e3][a],u=At(n,2);var f=At(n,3),h=At(n,1);return n=At(n,5),t+o>e.byteLength?null:(e=Math.floor(o*a/(16*[1,2,3,6][u])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,a<<6|n<<1|0,0|f<<1|h<<0,0]),{sampleRate:a,channelCount:[2,1,2,3,3,4,4,5][f]+h,ma:e,ca:o})}function Zi(e){this.i=e,this.h=0,this.g=new Map}s=Zi.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ne(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){e=Me(e);for(var a=ks(e),u=a.length;u<e.length&&(e[u]<<8|e[u+1]<<0)!==2935;u++);var f=1e3*n.endTime;a=Gr(a),a.length&&n&&(a=a.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=a.data),a=0;for(var h=new Uint8Array([]),p=[];u<e.length;){var g=Pw(e,u);if(!g)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=g.sampleRate,t.channelsCount=g.channelCount,a=g.sampleRate,h=g.ma,p.push({data:e.subarray(u,u+g.ca),size:g.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=g.ca}return e=Math.floor(f*a/1e3),o={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:o,$a:[],ma:h,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},o=new ia([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=oa(o),this.g.set(n,t)),n=Ou(o),this.h++,t=mn(t,n),Promise.resolve(t)},me("shaka.transmuxer.Ec3Transmuxer",Zi),Zi.prototype.transmux=Zi.prototype.transmux,Zi.prototype.getOriginalMimeType=Zi.prototype.getOriginalMimeType,Zi.prototype.convertCodecs=Zi.prototype.convertCodecs,Zi.prototype.isSupported=Zi.prototype.isSupported,Zi.prototype.destroy=Zi.prototype.destroy,Li("audio/ec3",function(){return new Zi("audio/ec3")},hr);function cI(e){if(!e.length)return null;var t=e.find(function(_){return _.type==7});if(e=e.find(function(_){return _.type==8}),!t||!e)return null;var n=new Yo(t.data),o=Ot(n);if(Ot(n),Ot(n),hi(n),dI.includes(o)&&(o=He(n),o===3&&Ci(n,1),hi(n),hi(n),Ci(n,1),Je(n))){o=o!==3?8:12;for(var a=0;a<o;a++)Je(n)&&(6>a?Jl(n,16):Jl(n,64))}if(hi(n),o=He(n),o===0)He(n);else if(o===1)for(Ci(n,1),hi(n),hi(n),o=He(n),a=0;a<o;a++)hi(n);hi(n),Ci(n,1);var u=He(n),f=He(n),h=At(n,1);h===0&&Ci(n,1),Ci(n,1);var p=0,g=0,S=0,E=0;if(Je(n)&&(p=He(n),g=He(n),S=He(n),E=He(n)),a=o=1,Je(n)&&Je(n)){var A=Ot(n),b=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],M=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<A&&16>=A?(o=b[A-1],a=M[A-1]):A===255&&(o=At(n,16),a=At(n,16))}return n=(2-h)*(f+1)*16-2*S-2*E,u=16*(u+1)-2*p-2*g,p=[],t=t.fullData,p.push(t.byteLength>>>8&255),p.push(t.byteLength&255),p=p.concat.apply(p,L(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,L(e)),e=new Uint8Array([1,p[3],p[4],p[5],255,225].concat(p,[1],t)),{height:n,width:u,wa:e,Ba:o,Ca:a}}function hI(e){var t=!1,n=[],o=e.find(function(p){return p.type==7}),a=!1;e=T(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var f=!1;switch(u.type){case 1:f=a=!0;var h=u.data;o&&4<h.length&&(h=nE(new Yo(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=f=a=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:a=f=!0;break;case 12:f=!0;break;default:f=!1}a&&f&&(f=u.fullData.byteLength,h=new Uint8Array(4),h[0]=f>>24&255,h[1]=f>>16&255,h[2]=f>>8&255,h[3]=f&255,n.push(h),n.push(u.fullData))}return n.length?{data:mn.apply(ti,L(n)),kd:t}:null}var dI=[100,110,122,244,44,83,86,118,128,138,139,134];function pI(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),o=e.find(function(f){return f.type==34});if(!t||!n||!o)return null;var a=mI(t.fullData);e=gI(n.fullData);var u=yI(o.fullData);return t=vI(t.fullData,n.fullData,o.fullData,{yf:a.yf,Wf:a.Wf,df:e.df,ef:e.ef,Ye:e.Ye,cf:e.cf,Ze:e.Ze,$e:e.$e,af:e.af,bf:e.bf,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Le:e.Le,$d:e.$d,Je:e.Je,He:e.He,Ge:e.Ge,Bf:u.Bf}),{height:e.height,width:e.width,wa:t,Ba:e.Ri,Ca:e.Qi}}function mI(e){var t=new Yo(e,!0);return Ot(t),Ot(t),At(t,4),At(t,2),At(t,6),e=At(t,3),t=Je(t),{yf:e+1,Wf:t}}function gI(e){e=new Yo(e,!0),Ot(e),Ot(e);var t=0,n=0,o=0,a=0;At(e,4);var u=At(e,3);Je(e);for(var f=At(e,2),h=At(e,1),p=At(e,5),g=Ot(e),S=Ot(e),E=Ot(e),A=Ot(e),b=Ot(e),M=Ot(e),_=Ot(e),R=Ot(e),B=Ot(e),N=Ot(e),H=Ot(e),D=[],F=[],X=0;X<u;X++)D.push(Je(e)),F.push(Je(e));if(0<u)for(X=u;8>X;X++)At(e,2);for(X=0;X<u;X++)D[X]&&At(e,88),F[X]&&Ot(e);He(e),D=He(e),D==3&&At(e,1),F=He(e),X=He(e),Je(e)&&(t+=He(e),n+=He(e),o+=He(e),a+=He(e));var J=He(e),ie=He(e),de=He(e);if(Je(e))for(var oe=0;oe<=u;oe++)He(e),He(e),He(e);else He(e),He(e),He(e);if(He(e),He(e),He(e),He(e),He(e),He(e),Je(e)&&Je(e))for(oe=0;4>oe;oe++)for(var se=0;se<(oe===3?2:6);se++)if(Je(e)){var ue=Math.min(64,1<<4+(oe<<1));1<oe&&Is(e);for(var xe=0;xe<ue;xe++)Is(e)}else He(e);for(Je(e),Je(e),Je(e)&&(Ot(e),He(e),He(e),Je(e)),oe=He(e),ue=se=0;ue<oe;ue++)if(xe=!1,ue!==0&&(xe=Je(e)),xe){ue===oe&&He(e),Je(e),He(e);for(var ye=xe=0;ye<=se;ye++){var Ce=Je(e),_e=!1;Ce||(_e=Je(e)),(Ce||_e)&&xe++}se=xe}else{for(ye=He(e),xe=He(e),se=ye+xe,Ce=0;Ce<ye;Ce++)He(e),Je(e);for(ye=0;ye<xe;ye++)He(e),Je(e)}if(Je(e))for(oe=He(e),se=0;se<oe;se++){for(ue=0;ue<de+4;ue++)At(e,1);At(e,1)}if(oe=de=1,se=0,Je(e),Je(e),Je(e)){if(Je(e)&&(ue=Ot(e),xe=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ye=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<ue&&16>=ue?(de=xe[ue-1],oe=ye[ue-1]):ue===255&&(de=At(e,16),oe=At(e,16))),Je(e)&&Je(e),Je(e)&&(At(e,3),Je(e),Je(e)&&(Ot(e),Ot(e),Ot(e))),Je(e)&&(He(e),He(e)),Je(e),Je(e),Je(e),(ue=Je(e))&&(He(e),He(e),He(e),He(e)),Je(e)&&(At(e,32),At(e,32),Je(e)&&He(e),Je(e)))for(ye=!1,ue=Je(e),xe=Je(e),(ue||xe)&&((ye=Je(e))&&(Ot(e),At(e,5),Je(e),At(e,5)),At(e,4),At(e,4),ye&&At(e,4),At(e,5),At(e,5),At(e,5)),Ce=0;Ce<=u;Ce++){var Ee=!0;_e=1,Je(e)||(Ee=Je(e));var Be=!1;if(Ee?He(e):Be=Je(e),Be||(_e=He(e)+1),ue){for(Ee=0;Ee<_e;Ee++)He(e),He(e),ye&&(He(e),He(e));Je(e)}if(xe){for(Ee=0;Ee<_e;Ee++)He(e),He(e),ye&&(He(e),He(e));Je(e)}}Je(e)&&(Je(e),Je(e),Je(e),se=He(e),He(e),He(e),He(e),He(e))}return{Ye:H,df:f,ef:h,cf:p,Ze:g,$e:S,af:E,bf:A,Se:b,Te:M,Ue:_,Ve:R,We:B,Xe:N,$d:se,Le:0,Je:D,He:J,Ge:ie,width:F-(t+n)*(D===1||D===2?2:1),height:X-(o+a)*(D===1?2:1),Ri:de,Qi:oe}}function yI(e){var t=new Yo(e,!0);Ot(t),Ot(t),He(t),He(t),Je(t),Je(t),At(t,3),Je(t),Je(t),He(t),He(t),Is(t),Je(t),Je(t),Je(t)&&He(t),Is(t),Is(t),Je(t),Je(t),Je(t),Je(t),e=Je(t),t=Je(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Bf:n}}function vI(e,t,n,o){var a=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return a[0]=1,a[1]=(o.df&3)<<6|(o.ef?1:0)<<5|o.cf&31,a[2]=o.Ze,a[3]=o.$e,a[4]=o.af,a[5]=o.bf,a[6]=o.Se,a[7]=o.Te,a[8]=o.Ue,a[9]=o.Ve,a[10]=o.We,a[11]=o.Xe,a[12]=o.Ye,a[13]=240|(o.$d&3840)>>8,a[14]=o.$d&255,a[15]=252|o.Bf&3,a[16]=252|o.Je&3,a[17]=248|o.He&7,a[18]=248|o.Ge&7,a[19]=0,a[20]=0,a[21]=(o.Le&3)<<6|(o.yf&7)<<3|(o.Wf?1:0)<<2|3,a[22]=3,a[23]=160,a[24]=0,a[25]=1,a[26]=(e.byteLength&65280)>>8,a[27]=(e.byteLength&255)>>0,a.set(e,28),a[23+(5+e.byteLength)]=161,a[e.byteLength+29]=0,a[e.byteLength+30]=1,a[e.byteLength+31]=(t.byteLength&65280)>>8,a[e.byteLength+32]=(t.byteLength&255)>>0,a.set(t,e.byteLength+33),a[23+(e.byteLength+10+t.byteLength)]=162,a[e.byteLength+10+t.byteLength+24]=0,a[e.byteLength+10+t.byteLength+25]=1,a[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,a[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,a.set(n,e.byteLength+10+t.byteLength+28),a}function Lc(e,t){var n=e[t+1]>>3&3,o=e[t+1]>>1&3,a=e[t+2]>>4&15,u=e[t+2]>>2&3;if(n!==1&&a!==0&&a!==15&&u!==3){var f=e[t+3]>>6;a=1e3*xI[14*(n===3?3-o:o===3?3:4)+a-1],u=wI[3*(n===3?0:n===2?1:2)+u],n=SI[n][o];var h=CI[o],p=Math.floor(n*a/u+(e[t+2]>>1&1))*h,g=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(g=g?parseInt(g[1],10):0)&&87>=g&&o===2&&224e3<=a&&f===0&&(e[t+3]|=128),{sampleRate:u,channelCount:f===3?1:2,ca:p,Pi:8*n*h}}return null}function Dw(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function Ow(e,t){if(t+1<e.length&&Dw(e,t)){var n=Lc(e,t),o=4;return n&&n.ca&&(o=n.ca),t+=o,t===e.length||t+1<e.length&&Dw(e,t)}return!1}var xI=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],wI=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SI=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],CI=[0,1,1,4];function Ji(e){this.i=e,this.h=0,this.g=new Map}s=Ji.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ne(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){for(var a=Me(e),u=ks(a).length;u<a.length&&!Ow(a,u);u++);var f;for(e=[];u<a.length;){var h=Lc(a,u);if(!h)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));f||(f=h),u+h.ca<=a.length&&e.push({data:a.subarray(u,u+h.ca),size:h.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=h.ca}return f?(a=9e4*f.Pi/f.sampleRate*this.h,o={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:f.sampleRate,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:a,Ya:e},stream:t},o=new ia([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=oa(o),this.g.set(n,t)),n=Ou(o),this.h++,t=mn(t,n),Promise.resolve(t)):Promise.reject(new ne(2,3,3018,n?n.M()[0]:null))},me("shaka.transmuxer.Mp3Transmuxer",Ji),Ji.prototype.transmux=Ji.prototype.transmux,Ji.prototype.getOriginalMimeType=Ji.prototype.getOriginalMimeType,Ji.prototype.convertCodecs=Ji.prototype.convertCodecs,Ji.prototype.isSupported=Ji.prototype.isSupported,Ji.prototype.destroy=Ji.prototype.destroy,Li("audio/mpeg",function(){return new Ji("audio/mpeg")},hr);function eo(e){this.h=e,this.g=null}s=eo.prototype,s.destroy=function(){},s.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Di(e).split(","),n=vi("audio",t);return t=vi("video",t),!n||t||ci(n)!="mp3"?!1:Ne(this.convertCodecs("audio",e))},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},s.getOriginalMimeType=function(){return this.h},s.transmux=function(e,t,n,o,a){if(this.g?this.g.clearData():this.g=new en,e=Me(e),e=this.g.parse(e),e.$c().audio!="mp3"||a!="audio")return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),a=T(e.Tb()),e=a.next();!e.done;e=a.next())if(e=e.value.data)for(t=0;t<e.length;)(o=Lc(e,t))?(t+o.ca<=e.length&&(n=mn(n,e.subarray(t,t+o.ca))),t+=o.ca):t++;return Promise.resolve(n)},me("shaka.transmuxer.MpegTsTransmuxer",eo),eo.prototype.transmux=eo.prototype.transmux,eo.prototype.getOriginalMimeType=eo.prototype.getOriginalMimeType,eo.prototype.convertCodecs=eo.prototype.convertCodecs,eo.prototype.isSupported=eo.prototype.isSupported,eo.prototype.destroy=eo.prototype.destroy,Li("video/mp2t",function(){return new eo("video/mp2t")},_h);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function $i(e){this.h=e,(this.g=Dp.get("ISOBoxer")())&&TI(this)}function TI(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(o){this._procEntryField(o,"BytesOfClearData","uint",16),this._procEntryField(o,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,o=0;16>o;o++)this.usertype[o]!==EI[o]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}s=$i.prototype,s.destroy=function(){},s.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ne(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ne(t)||Ne(e))},s.convertCodecs=function(e,t){return t.replace("mss/","")},s.getOriginalMimeType=function(){return this.h},s.transmux=function(e,t,n){if(!n)return Promise.resolve(Me(e));if(!t.mssPrivateData)return Promise.reject(new ne(2,3,3020,n?n.M()[0]:null));try{var o,a=this.g.parseBuffer(e),u=a.fetch("tfhd");u.track_ID=t.id+1;var f=a.fetch("tfdt"),h=a.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",h,u),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var p=a.fetch("trun"),g=a.fetch("tfxd");g&&g._parent.boxes.splice(g._parent.boxes.indexOf(g),1);var S=a.fetch("tfrf");S&&S._parent.boxes.splice(S._parent.boxes.indexOf(S),1);var E=a.fetch("sepiff");if(E!==null){E.type="senc",E.usertype=void 0;var A=a.fetch("saio");if(A===null){A=this.g.createFullBox("saio",h),A.version=0,A.flags=0,A.entry_count=1,A.offset=[0];var b=this.g.createFullBox("saiz",h);if(b.version=0,b.flags=0,b.sample_count=E.sample_count,b.default_sample_info_size=0,b.sample_info_size=[],E.flags&2)for(o=0;o<E.sample_count;o+=1)b.sample_info_size[o]=10+6*E.entry[o].NumberOfEntries;else b.default_sample_info_size=8}}u.flags&=16777214,u.flags|=131072,p.flags|=1;var M=a.fetch("moof");p.data_offset=M.getLength()+8;var _=a.fetch("saio");_!==null&&(_.offset[0]=Nw(M,"traf")+Nw(h,"senc")+16);var R=Me(a.write());return Promise.resolve(R)}catch(B){return B instanceof ne?Promise.reject(B):Promise.reject(new ne(2,3,3022,n?n.M()[0]:null))}};function Nw(e,t){for(var n=8,o=0;o<e.boxes.length&&e.boxes[o].type!==t;o++)n+=e.boxes[o].size;return n}me("shaka.transmuxer.MssTransmuxer",$i),$i.prototype.transmux=$i.prototype.transmux,$i.prototype.getOriginalMimeType=$i.prototype.getOriginalMimeType,$i.prototype.convertCodecs=$i.prototype.convertCodecs,$i.prototype.isSupported=$i.prototype.isSupported,$i.prototype.destroy=$i.prototype.destroy;var EI=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Li("mss/audio/mp4",function(){return new $i("mss/audio/mp4")},hr),Li("mss/video/mp4",function(){return new $i("mss/video/mp4")},hr);function to(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}s=to.prototype,s.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},s.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var o=Di(n).split(",");return n=vi("audio",o),o=vi("video",o),n&&(n=ci(n),!bI.includes(n))||o&&(n=ci(o),!AI.includes(n))?!1:t?Ne(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ne(t)||Ne(e))},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Di(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return ys(n,"audio/mp4")}).map(Xa).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},s.getOriginalMimeType=function(){return this.l},s.transmux=function(e,t,n,o,a){var u=Me(e);if(a=="audio"&&!nu(u)){for(var f=ks(u),h=f.length;h<u.length;h++)if(Ow(u,h))return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));for(h=f.length;h<u.length;h++)if(_w(u,h))return this.h||(this.h=new Fi("audio/aac")),this.h.transmux(e,t,n,o,a);return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new en;var p=this.j.parse(u),g=[],S=p.$c();try{var E=null;if(a=="video"){switch(S.video){case"avc":var A=[],b=null,M=[],_=p.Fc();if(!_.length)throw new ne(2,3,3023,n?n.M()[0]:null);for(var R=0;R<_.length;R++){var B=_[R],N=B.nalus;M.push.apply(M,L(N));var H=hI(N);if(H){b==null&&(b=B.dts);var D=void 0;D=R+1<_.length?(_[R+1].dts||0)-(B.dts||0):1<_.length?(B.dts||0)-(_[R-1].dts||0):9e4*(n.endTime-n.startTime),A.push({data:H.data,size:H.data.byteLength,duration:D,cb:Math.round((B.pts||0)-(B.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:H.kd?2:1,hb:H.kd?0:1}})}}var F=cI(M);if(!F||b==null)throw new ne(2,3,3018,n?n.M()[0]:null);t.height=F.height,t.width=F.width,E={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:o,$a:[],ma:new Uint8Array([]),wa:F.wa,Ba:F.Ba,Ca:F.Ca,data:{rb:this.g,baseMediaDecodeTime:b,Ya:A},stream:t};break;case"hvc":var X=[],J=null,ie=[],de=p.Fc();if(!de.length)throw new ne(2,3,3023,n?n.M()[0]:null);for(var oe=0;oe<de.length;oe++){var se=de[oe],ue=se.nalus;ie.push.apply(ie,L(ue));for(var xe=!1,ye=[],Ce=!1,_e=T(ue),Ee=_e.next();!Ee.done;Ee=_e.next()){var Be=Ee.value;switch(Be.type){case 1:case 0:var yt=Ce=!0;break;case 19:case 20:case 21:xe=yt=Ce=!0;break;case 32:yt=!0;break;case 33:yt=!0;break;case 34:yt=!0;break;case 35:Ce=yt=!0;break;case 39:case 40:yt=!0;break;default:yt=!1}if(Ce&&yt){var Mt=Be.fullData.byteLength,ln=new Uint8Array(4);ln[0]=Mt>>24&255,ln[1]=Mt>>16&255,ln[2]=Mt>>8&255,ln[3]=Mt&255,ye.push(ln),ye.push(Be.fullData)}}var Dt=ye.length?{data:mn.apply(ti,L(ye)),kd:xe}:null;if(Dt){J==null&&se.dts!=null&&(J=se.dts);var dn=void 0;dn=oe+1<de.length?(de[oe+1].dts||0)-(se.dts||0):1<de.length?(se.dts||0)-(de[oe-1].dts||0):9e4*(n.endTime-n.startTime),X.push({data:Dt.data,size:Dt.data.byteLength,duration:dn,cb:Math.round((se.pts||0)-(se.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:Dt.kd?2:1,hb:Dt.kd?0:1}})}}var En=pI(ie);if(!En||J==null)throw new ne(2,3,3018,n?n.M()[0]:null);t.height=En.height,t.width=En.width,E={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:o,$a:[],ma:new Uint8Array([]),wa:En.wa,Ba:En.Ba,Ca:En.Ca,data:{rb:this.g,baseMediaDecodeTime:J,Ya:X},stream:t}}E&&(g.push(E),E=null)}if(a=="audio"){switch(S.audio){case"aac":for(var fn=[],jt,yn=null,Dn=T(p.Tb()),On=Dn.next();!On.done;On=Dn.next()){var Mi=On.value,Ri=Mi.data;if(Ri){var mo=0;if(jt=Rw(Ri,mo),!jt)throw new ne(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=jt.sampleRate,t.channelsCount=jt.channelCount,yn==null&&Mi.pts!==null&&(yn=Mi.pts);mo<Ri.length;){var rr=Mw(Ri,mo);if(rr){var Er=rr.Qd+rr.ca;mo+Er<=Ri.length&&fn.push({data:Ri.subarray(mo+rr.Qd,mo+Er),size:rr.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),mo+=Er}else mo++}}}if(!jt||yn==null){if(!p.Fc().length)throw new ne(2,3,3018,n?n.M()[0]:null);yn=9e4*n.startTime;var ua=vi("audio",t.codecs.split(","));if(!ua||!t.channelsCount||!t.audioSamplingRate)throw new ne(2,3,3018,n?n.M()[0]:null);jt={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:ua};var sr=lI(ua,t.channelsCount);if(!sr)throw new ne(2,3,3018,n?n.M()[0]:null);for(var Dc=yn+9e4*(n.endTime-n.startTime),Wu=yn;Wu<Dc;)fn.push({data:sr,size:sr.byteLength,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Wu+=1024/jt.sampleRate*9e4}var Yu=jt.sampleRate,Io=yn/9e4*Yu;E={id:t.id,type:"audio",codecs:jt.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Yu,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:Io,Ya:fn},stream:t};break;case"ac3":for(var Yw=[],Oc=0,_0=new Uint8Array([]),Nc=null,qw=T(p.Tb()),L0=qw.next();!L0.done;L0=qw.next()){var P0=L0.value,D0=P0.data;Nc==null&&P0.pts!==null&&(Nc=P0.pts);for(var la=0;la<D0.length;){var br=Lw(D0,la);br?(t.audioSamplingRate=br.sampleRate,t.channelsCount=br.channelCount,Oc=br.sampleRate,_0=br.ma,Yw.push({data:D0.subarray(la,la+br.ca),size:br.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),la+=br.ca):la++}}if(Oc==0||_0.byteLength==0||Nc==null)throw new ne(2,3,3018,n?n.M()[0]:null);var _I=Nc/9e4*Oc;E={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Oc,duration:o,$a:[],ma:_0,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:_I,Ya:Yw},stream:t};break;case"ec3":for(var Kw=[],Uc=0,O0=new Uint8Array([]),Bc=null,Qw=T(p.Tb()),N0=Qw.next();!N0.done;N0=Qw.next()){var U0=N0.value,B0=U0.data;Bc==null&&U0.pts!==null&&(Bc=U0.pts);for(var fa=0;fa<B0.length;){var Ar=Pw(B0,fa);Ar?(t.audioSamplingRate=Ar.sampleRate,t.channelsCount=Ar.channelCount,Uc=Ar.sampleRate,O0=Ar.ma,Kw.push({data:B0.subarray(fa,fa+Ar.ca),size:Ar.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),fa+=Ar.ca):fa++}}if(Uc==0||O0.byteLength==0||Bc==null)throw new ne(2,3,3018,n?n.M()[0]:null);var LI=Bc/9e4*Uc;E={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Uc,duration:o,$a:[],ma:O0,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:LI,Ya:Kw},stream:t};break;case"mp3":for(var Zw=[],jc,Fc=null,Jw=T(p.Tb()),j0=Jw.next();!j0.done;j0=Jw.next()){var F0=j0.value,qu=F0.data;if(qu){Fc==null&&F0.pts!==null&&(Fc=F0.pts);for(var ns=0;ns<qu.length;){var ca=Lc(qu,ns);ca?(jc||(jc=ca),ns+ca.ca<=qu.length&&Zw.push({data:qu.subarray(ns,ns+ca.ca),size:ca.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),ns+=ca.ca):ns++}}}if(!jc||Fc==null)throw new ne(2,3,3018,n?n.M()[0]:null);var eS=jc.sampleRate,PI=Fc/9e4*eS;E={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:eS,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:PI,Ya:Zw},stream:t};break;case"opus":var tS=[],$c=null,Uo=p.F;if(!Uo)throw new ne(2,3,3018,n?n.M()[0]:null);var ai=[];switch(Uo.Ch){case 1:case 2:ai=[0];break;case 0:ai=[255,1,1,0,1];break;case 128:ai=[255,2,0,0,1];break;case 3:ai=[1,2,1,0,2,1];break;case 4:ai=[1,2,2,0,1,2,3];break;case 5:ai=[1,3,2,0,4,1,2,3];break;case 6:ai=[1,4,2,0,4,1,2,3,5];break;case 7:ai=[1,4,2,0,4,1,2,3,5,6];break;case 8:ai=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:ai=[1,1,2,0,1];break;case 131:ai=[1,1,3,0,1,2];break;case 132:ai=[1,1,4,0,1,2,3];break;case 133:ai=[1,1,5,0,1,2,3,4];break;case 134:ai=[1,1,6,0,1,2,3,4,5];break;case 135:ai=[1,1,7,0,1,2,3,4,5,6];break;case 136:ai=[1,1,8,0,1,2,3,4,5,6,7]}for(var nS=new Uint8Array([0,Uo.channelCount,0,0,Uo.sampleRate>>>24&255,Uo.sampleRate>>>17&255,Uo.sampleRate>>>8&255,Uo.sampleRate>>>0&255,0,0].concat(L(ai))),iS=Uo.sampleRate,oS=T(p.Tb()),$0=oS.next();!$0.done;$0=oS.next()){var z0=$0.value,ha=z0.data;$c==null&&z0.pts!==null&&($c=z0.pts);for(var Ku=0;Ku<ha.length;){for(var DI=(ha[Ku+1]&16)!==0,OI=(ha[Ku+1]&8)!==0,ar=Ku+2,zc=0;ha[ar]===255;)zc+=255,ar+=1;zc+=ha[ar],ar+=1,ar+=DI?2:0,ar+=OI?2:0;var rS=ha.slice(ar,ar+zc);tS.push({data:rS,size:rS.byteLength,duration:960,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ku=ar+zc}}if(nS.byteLength==0||$c==null)throw new ne(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=Uo.sampleRate,t.channelsCount=Uo.channelCount;var NI=$c/9e4*iS;E={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:iS,duration:o,$a:[],ma:nS,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:NI,Ya:tS},stream:t}}E&&(g.push(E),E=null)}}catch(G0){return G0&&G0.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(G0)}if(!g.length)return Promise.reject(new ne(2,3,3018,n?n.M()[0]:null));var sS=new ia(g),V0=t.id+"_"+n.i;if(this.i.has(V0))var H0=this.i.get(V0);else H0=oa(sS),this.i.set(V0,H0);var UI=Ou(sS);this.g++;var BI=mn(H0,UI);return Promise.resolve(BI)},me("shaka.transmuxer.TsTransmuxer",to),to.prototype.transmux=to.prototype.transmux,to.prototype.getOriginalMimeType=to.prototype.getOriginalMimeType,to.prototype.convertCodecs=to.prototype.convertCodecs,to.prototype.isSupported=to.prototype.isSupported,to.prototype.destroy=to.prototype.destroy;var bI=["aac","ac-3","ec-3","mp3","opus"],AI=["avc","hevc"];Li("video/mp2t",function(){return new to("video/mp2t")},Lh);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Uw(){}var Gu;function Bw(){Gu||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Gu=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=kI,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function kI(e,t){var n=this,o;return $(function(a){return a.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),k(a,Gu.call(n,e,t),2)):(o=a.h,Xw(o)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Gu,a.return(o)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=jw,a.return(jw.call(n,e,t))))})}function jw(e,t){var n=this,o,a,u,f,h,p,g,S,E,A,b,M;return $(function(_){if(_.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),o=Gw(e),a=[],u=T(t),f=u.next();!f.done;f=u.next())h=f.value,p=Fw(h.videoCapabilities,o),g=Fw(h.audioCapabilities,o),h.videoCapabilities&&h.videoCapabilities.length&&!p.length||h.audioCapabilities&&h.audioCapabilities.length&&!g.length||(S=Object.assign({},h),S.videoCapabilities=p,S.audioCapabilities=g,a.push(S));if(!a.length)throw E=Error("Unsupported keySystem or supportedConfigurations."),E.name="NotSupportedError",E.code=DOMException.NOT_SUPPORTED_ERR,E;return k(_,Gu.call(n,e,a),2)}return A=_.h,M=b=null,a[0]&&(a[0].videoCapabilities&&(b=a[0].videoCapabilities[0].encryptionScheme),a[0].audioCapabilities&&(M=a[0].audioCapabilities[0].encryptionScheme)),_.return(new Pc(A,b,M))})}function Fw(e,t){return e&&e.filter(function(n){return M0(n.encryptionScheme,t)})}me("EmeEncryptionSchemePolyfill",Uw),Uw.install=Bw;function $w(){}var Xu;function zw(){Xu||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Xu=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=II,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function II(e){var t=this,n,o;return $(function(a){switch(a.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),k(a,Xu.call(t,e),2);case 2:if(n=a.h,!e.keySystemConfiguration)return a.return(n);if((o=n.keySystemAccess)&&Xw(o))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Xu,a.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Vw,o){a.u(3);break}return k(a,Hw(e),4);case 4:return n.keySystemAccess=a.h,a.return(n);case 3:return a.return(Vw.call(t,e))}})}function Vw(e){var t=this,n,o,a,u,f,h,p;return $(function(g){switch(g.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),o=n=null,!e.keySystemConfiguration||(a=e.keySystemConfiguration,u=a.keySystem,o=a.audio&&a.audio.encryptionScheme,n=a.video&&a.video.encryptionScheme,f=Gw(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},M0(o,f)&&M0(n,f))?k(g,Xu.call(t,e),2):g.return(h);case 2:if(p=g.h,p.keySystemAccess){p.keySystemAccess=new Pc(p.keySystemAccess,n,o),g.u(3);break}if(!e.keySystemConfiguration){g.u(3);break}return k(g,Hw(e),5);case 5:p.keySystemAccess=g.h;case 3:return g.return(p)}})}function Hw(e){var t,n;return $(function(o){if(o.g==1){var a=e.keySystemConfiguration,u=[],f=[];return a.audio&&u.push({robustness:a.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:a.audio.encryptionScheme}),a.video&&f.push({robustness:a.video.robustness||"",contentType:e.video.contentType,encryptionScheme:a.video.encryptionScheme}),a={initDataTypes:a.initDataType?[a.initDataType]:[],distinctiveIdentifier:a.distinctiveIdentifier,persistentState:a.persistentState,sessionTypes:a.sessionTypes},u.length&&(a.audioCapabilities=u),f.length&&(a.videoCapabilities=f),t=a,k(o,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=o.h,o.return(n)})}me("McEncryptionSchemePolyfill",$w),$w.install=zw;function Pc(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}Pc.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=T(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=T(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},Pc.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function Gw(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Xw(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function M0(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(RI||MI))}function R0(){}function Ww(){Bw(),zw()}me("EncryptionSchemePolyfills",R0),R0.install=Ww;var MI=navigator.userAgent.includes("CrKey"),RI=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof x<"u"&&x.exports&&(x.exports=R0)}).call(i,r,r,void 0);for(var l in i.shaka)c[l]=i.shaka[l]})()})(NC);const FS=k_(NC);let as,Jn;const Om={playingState:!1},I_=async c=>{FS.polyfill.installAll(),Jn=c,Jn||(Jn=document.createElement("video"),Jn.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",Jn.width=window.innerWidth,Jn.height=window.innerHeight,as=new FS.Player,await as.attach(Jn),Jn.autoplay=!1,as.addEventListener("error",r=>{console.error(r)}),document.body.insertBefore(Jn,document.body.firstChild))},M_=async c=>{if(!as||!Jn)throw"Player not initialized yet";await as.load(c.streamUrl)},R_=()=>{Jn.play().then(()=>{Om.playingState=!0})},__=()=>{Jn.pause(),Om.playingState=!1},L_=async()=>{await as.destroy(),as=null,Jn.remove(),Jn=null},P_=()=>Jn.currentTime,D_=()=>Jn.duration,O_=()=>{let c=r=>new Date(r*1e3).toISOString().substr(14,5);return`${c(Jn.currentTime)} : ${c(Math.floor(Jn.duration))}`},kr={init:I_,load:M_,play:R_,pause:__,getCurrentTime:P_,getVideoDuration:D_,getTimeFormat:O_,state:Om,destroy:L_},N_=ut.Component("Player",{code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1),r=s[0];const T={};s[1]=this.element({parent:r||"root"},v===!0?w:i),T.y=1080,T.mount="{y:1}",T.w=1920,T.h=150,T.color={top:"0x00000000",bottom:"0x444444ff"},T.alpha={transition:i.controlsVisibility},s[1].populate(T),v===!0&&(I-=1),r=s[1];const L={};s[2]=this.element({parent:r||"root"},v===!0?w:i),L.x=60,L.y=50,s[2].populate(L),v===!0&&(I-=1),r=s[2];const j={};s[3]=this.element({parent:r||"root"},v===!0?w:i),j.w=60,j.h=60,j.color="0x0087ceeb",j.effects=[i.shader("radius",{radius:16})],s[3].populate(j),v===!0&&(I-=1),r=s[3];const U={};s[4]=this.element({parent:r||"root"},v===!0?w:i),U.y=14,U.x=14,U.w=32,U.h=32,U.src=i.playing?"assets/player/pause.png":"assets/player/play.png",s[4].populate(U),v===!0&&(I-=1),r=s[2];const V={};s[5]=this.element({parent:r||"root"},v===!0?w:i),V.y=22,V.x=100,V.w=i.progressLength,V.h=16,V.color="0xffffff80",V.effects=[i.shader("radius",{radius:8})],s[5].populate(V),v===!0&&(I-=1),r=s[5];const z={};s[6]=this.element({parent:r||"root"},v===!0?w:i),z.h=16,z.w={transition:{value:i.progress,d:100,f:"ease-in-out"}},z.effects=[i.shader("radius",{radius:8})],z.color="0x0087ceeb",s[6].populate(z),v===!0&&(I-=1);const G=l.components&&l.components.Circle||d.Circle;r=s[5];const Q={};s[7]=this.element({parent:r||"root"},v===!0?w:i),Q.size=28,Q.color="0xffffffff",Q.y=-6,Q.x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}};const te=[];if(typeof G<"u")for(let Z in G.config.props)delete Q[G.config.props[Z]],te.push(G.config.props[Z]);s[7].populate(Q),v===!0&&(I-=1),r=s[7];const le={};le.size=28,le.color="0xffffffff",le.y=-6,C={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},Array.isArray(C)===!0&&(C=x(C).slice(0)),le.x=C,m=le.is||"Circle";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||d[m],!he)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);s[8]=he.call(null,{props:le},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],w=s[8],v=!0):r=s[8][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[2];const fe={};s[9]=this.element({parent:r||"root"},v===!0?w:i),fe.x=1660,fe.y=16,s[9].populate(fe),v===!0&&(I-=1),r=s[9];const k={};s[10]=this.element({parent:r||"root"},v===!0?w:i),k.content=i.currentTime,k.size=25,k.__textnode=!0,s[10].populate(k),v===!0&&(I-=1),r=s[9];const q={};s[11]=this.element({parent:r||"root"},v===!0?w:i),q.x=70,q.size=25,q.content="/",q.__textnode=!0,s[11].populate(q),v===!0&&(I-=1),r=s[9];const Y={};return s[12]=this.element({parent:r||"root"},v===!0?w:i),Y.x=85,Y.size=25,Y.content=i.duration,Y.__textnode=!0,s[12].populate(Y),v===!0&&(I-=1),s},effects:[function(r,i,l,d,y,x){i[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(r,i,l,d,y,x){i[1].set("alpha",{transition:r.controlsVisibility})},function(r,i,l,d,y,x){i[3].set("effects",[r.shader("radius",{radius:16})])},function(r,i,l,d,y,x){i[4].set("src",r.playing?"assets/player/pause.png":"assets/player/play.png")},function(r,i,l,d,y,x){i[5].set("effects",[r.shader("radius",{radius:8})])},function(r,i,l,d,y,x){i[6].set("w",{transition:{value:r.progress,d:100,f:"ease-in-out"}})},function(r,i,l,d,y,x){i[6].set("effects",[r.shader("radius",{radius:8})])},function(r,i,l,d,y,x){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&i[7].set("x",{transition:{value:r.progress-8,d:100,f:"ease-in-out"}})},function(r,i,l,d,y,x){i[8][Symbol.for("props")].x={transition:{value:r.progress-8,d:100,f:"ease-in-out"}}},function(r,i,l,d,y,x){i[10].set("content",r.currentTime)},function(r,i,l,d,y,x){i[12].set("content",r.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await kr.init()},async ready(){await kr.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const c=i=>new Date(i*1e3).toISOString().substr(14,5),r=kr.getVideoDuration();r&&(this.duration=c(r),this.progressChunkSize=Math.round(this.progressLength/r*100)/100),this.$setInterval(()=>{const i=kr.getCurrentTime();this.currentTime=c(i),this.progress=Math.round(i*this.progressChunkSize)},1e3),this.play()},async destroy(){await kr.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),kr.state.playingState==!0?(kr.pause(),this.playing=!1):(console.log("play!"),kr.play(),this.playing=!0)},showControls(c){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=c}}}),U_=ut.Component("Colors",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=1920,m.h=1080,m.color={transition:i.bg},s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=20,C.y=20,s[1].populate(C),r=s[1];const w={};s[2]=this.element({parent:r||"root"},i),w.w=100,w.h=100,w.x=0,w.color="0xecfeffff",s[2].populate(w),r=s[1];const v={};s[3]=this.element({parent:r||"root"},i),v.w=100,v.h=100,v.x=120,v.color="0xa5f3fcff",s[3].populate(v),r=s[1];const I={};s[4]=this.element({parent:r||"root"},i),I.w=100,I.h=100,I.x=240,I.color="0x22d3eeff",s[4].populate(I),r=s[1];const O={};s[5]=this.element({parent:r||"root"},i),O.w=100,O.h=100,O.x=360,O.color="0x0891b2ff",s[5].populate(O),r=s[0];const T={};s[6]=this.element({parent:r||"root"},i),T.x=20,T.y=140,s[6].populate(T),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.w=100,L.h=100,L.x=0,L.color="0xecfeffff",s[7].populate(L),r=s[6];const j={};s[8]=this.element({parent:r||"root"},i),j.w=100,j.h=100,j.x=120,j.color="0xa5f3fcff",s[8].populate(j),r=s[6];const U={};s[9]=this.element({parent:r||"root"},i),U.w=100,U.h=100,U.x=240,U.color="0x22d3eeff",s[9].populate(U),r=s[6];const V={};s[10]=this.element({parent:r||"root"},i),V.w=100,V.h=100,V.x=360,V.color="0x0891b2ff",s[10].populate(V),r=s[0];const z={};s[11]=this.element({parent:r||"root"},i),z.x=20,z.y=260,s[11].populate(z),r=s[11];const G={};s[12]=this.element({parent:r||"root"},i),G.w=100,G.h=100,G.x=0,G.color="0xecfeffaa",s[12].populate(G),r=s[11];const Q={};s[13]=this.element({parent:r||"root"},i),Q.w=100,Q.h=100,Q.x=120,Q.color="0xa5f3fc33",s[13].populate(Q),r=s[11];const te={};s[14]=this.element({parent:r||"root"},i),te.w=100,te.h=100,te.x=240,te.color="0x22d3ee20",s[14].populate(te),r=s[11];const le={};s[15]=this.element({parent:r||"root"},i),le.w=100,le.h=100,le.x=360,le.color="0x0891b2ff",s[15].populate(le),r=s[0];const he={};s[16]=this.element({parent:r||"root"},i),he.x=20,he.y=380,s[16].populate(he),r=s[16];const fe={};s[17]=this.element({parent:r||"root"},i),fe.w=100,fe.h=100,fe.x=0,fe.color="0xecfeffff",s[17].populate(fe),r=s[16];const k={};s[18]=this.element({parent:r||"root"},i),k.w=100,k.h=100,k.x=120,k.color="0xa5f3fcff",s[18].populate(k),r=s[16];const q={};s[19]=this.element({parent:r||"root"},i),q.w=100,q.h=100,q.x=240,q.color="0x22d3eeff",s[19].populate(q),r=s[16];const Y={};s[20]=this.element({parent:r||"root"},i),Y.w=100,Y.h=100,Y.x=360,Y.color="0x0891b2ff",s[20].populate(Y),r=s[0];const Z={};s[21]=this.element({parent:r||"root"},i),Z.x=20,Z.y=500,s[21].populate(Z),r=s[21];const K={};s[22]=this.element({parent:r||"root"},i),K.w=100,K.h=100,K.x=0,K.color="0xecfeffab",s[22].populate(K),r=s[21];const ee={};s[23]=this.element({parent:r||"root"},i),ee.w=100,ee.h=100,ee.x=120,ee.color="0xa5f3fc33",s[23].populate(ee),r=s[21];const re={};s[24]=this.element({parent:r||"root"},i),re.w=100,re.h=100,re.x=240,re.color="0x22d3ee21",s[24].populate(re),r=s[21];const ce={};s[25]=this.element({parent:r||"root"},i),ce.w=100,ce.h=100,ce.x=360,ce.color="0x0891b2ff",s[25].populate(ce),r=s[0];const we={};s[26]=this.element({parent:r||"root"},i),we.x=20,we.y=620,s[26].populate(we),r=s[26];const be={};s[27]=this.element({parent:r||"root"},i),be.w=100,be.h=100,be.x=0,be.color="0x000000ff",s[27].populate(be),r=s[26];const Te={};s[28]=this.element({parent:r||"root"},i),Te.w=100,Te.h=100,Te.x=120,Te.color="0xccccccff",s[28].populate(Te),r=s[26];const ke={};s[29]=this.element({parent:r||"root"},i),ke.w=100,ke.h=100,ke.x=240,ke.color="0x889900ff",s[29].populate(ke),r=s[26];const pe={};s[30]=this.element({parent:r||"root"},i),pe.w=100,pe.h=100,pe.x=360,pe.color="0x00ff00ff",s[30].populate(pe),r=s[0];const Le={};s[31]=this.element({parent:r||"root"},i),Le.x=20,Le.y=740,s[31].populate(Le),r=s[31];const $={};s[32]=this.element({parent:r||"root"},i),$.w=100,$.h=100,$.x=0,$.color="0x000000ff",s[32].populate($),r=s[31];const Ie={};s[33]=this.element({parent:r||"root"},i),Ie.w=100,Ie.h=100,Ie.x=120,Ie.color="0xccccccff",s[33].populate(Ie),r=s[31];const Pe={};s[34]=this.element({parent:r||"root"},i),Pe.w=100,Pe.h=100,Pe.x=240,Pe.color="0x889900ff",s[34].populate(Pe),r=s[31];const $e={};s[35]=this.element({parent:r||"root"},i),$e.w=100,$e.h=100,$e.x=360,$e.color="0x00ff00ff",s[35].populate($e),r=s[0];const Xe={};s[36]=this.element({parent:r||"root"},i),Xe.x=620,Xe.y=20,s[36].populate(Xe),r=s[36];const et={};s[37]=this.element({parent:r||"root"},i),et.w=300,et.h=200,et.x=0,et.color={transition:i.color1},s[37].populate(et),r=s[36];const We={};s[38]=this.element({parent:r||"root"},i),We.w=300,We.h=200,We.x=0,We.y=250,We.color={transition:i.color2},s[38].populate(We),r=s[36];const nt={};s[39]=this.element({parent:r||"root"},i),nt.w=300,nt.h=200,nt.x=100,nt.y=400,nt.color={transition:i.color3},s[39].populate(nt),r=s[36];const me={};return s[40]=this.element({parent:r||"root"},i),me.w=300,me.h=200,me.x=0,me.y=650,me.color={transition:{value:i.color4,d:1e3,f:"ease-in-out"}},s[40].populate(me),s},effects:[function(r,i,l,d,y,x){i[0].set("color",{transition:r.bg})},function(r,i,l,d,y,x){i[37].set("color",{transition:r.color1})},function(r,i,l,d,y,x){i[38].set("color",{transition:r.color2})},function(r,i,l,d,y,x){i[39].set("color",{transition:r.color3})},function(r,i,l,d,y,x){i[40].set("color",{transition:{value:r.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let c=0;const r=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{c=c+1,c===r.length-1&&(c=0),this.bg=r[c]},2e3)}}}),B_=ut.Component("Gradients",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=1920/4,C.h=1080,C.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.w=1920/4,w.h=1080,w.x=1920/4,w.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",s[2].populate(w),r=s[0];const v={};s[3]=this.element({parent:r||"root"},i),v.w=1920/4,v.h=1080,v.x=1920/4*2,v.color="{top: '0x0891b2ff', right: '0xf87171ff'}",s[3].populate(v),r=s[0];const I={};return s[4]=this.element({parent:r||"root"},i),I.w=1920/4,I.h=1080,I.x=1920/4*3,I.color="{right: '0x008000ff', bottom: '0xffd700ff'}",s[4].populate(I),s},effects:[function(r,i,l,d,y,x){i[1].set("w",1920/4)},function(r,i,l,d,y,x){i[2].set("w",1920/4)},function(r,i,l,d,y,x){i[2].set("x",1920/4)},function(r,i,l,d,y,x){i[3].set("w",1920/4)},function(r,i,l,d,y,x){i[3].set("x",1920/4*2)},function(r,i,l,d,y,x){i[4].set("w",1920/4)},function(r,i,l,d,y,x){i[4].set("x",1920/4*3)}],context:{}}}),j_=ut.Component("Transitions",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.x=60,s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=200,C.h=200,C.x=50,C.y={transition:i.y},C.color="0xc4b5fdff",s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.w=200,w.h=200,w.x=300,w.y={transition:{value:i.y}},w.color="0xa78bfaff",s[2].populate(w),r=s[0];const v={};s[3]=this.element({parent:r||"root"},i),v.w=200,v.h=200,v.x=550,v.y={transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}},v.color="0x8b5cf6ff",v.ref="bla",s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.w=200,I.h=200,I.x=800,I.y={transition:{value:i.y,duration:500,delay:500,start:i.start,end:i.finished}},I.color="0x7c3aedff",s[4].populate(I),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.w=200,O.h=200,O.x=1050,O.y={transition:{value:i.y,easing:"ease-in-out",end:i.finished}},O.color="0x6d28d9ff",s[5].populate(O),r=s[0];const T={};s[6]=this.element({parent:r||"root"},i),T.w=200,T.h=200,T.x=1300,T.y={transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}},T.color="0x5b21b6ff",s[6].populate(T),r=s[0];const L={};return s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=1550,L.y={transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},L.color="0x4c1d95ff",s[7].populate(L),s},effects:[function(r,i,l,d,y,x){i[1].set("y",{transition:r.y})},function(r,i,l,d,y,x){i[2].set("y",{transition:{value:r.y}})},function(r,i,l,d,y,x){i[3].set("y",{transition:{value:r.y,duration:1e3,start:r.start,end:r.doneTransition3}})},function(r,i,l,d,y,x){i[4].set("y",{transition:{value:r.y,duration:500,delay:500,start:r.start,end:r.finished}})},function(r,i,l,d,y,x){i[5].set("y",{transition:{value:r.y,easing:"ease-in-out",end:r.finished}})},function(r,i,l,d,y,x){i[6].set("y",{transition:{value:r.y,duration:3e3,easing:"ease-in-out-back",end:r.finished}})},function(r,i,l,d,y,x){i[7].set("y",{transition:{value:r.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(c,r,i){this.$log.info("Start transition",c.nodeId,r,i)},finished(c,r,i){this.$log.info("Finished transition",c.nodeId,r,i)},go(){this.y=50,this.$setTimeout(()=>{this.y=1080-50-200},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),F_=ut.Component("Alpha",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.y=100,s[1].populate(C),r=s[1];const w={};s[2]=this.element({parent:r||"root"},i),w.w=200,w.h=200,w.x=100,w.color="0xffffffff",w.alpha=.2,s[2].populate(w),r=s[1];const v={};s[3]=this.element({parent:r||"root"},i),v.w=200,v.h=200,v.x=320,v.color="0xffffffff",v.alpha=.4,s[3].populate(v),r=s[1];const I={};s[4]=this.element({parent:r||"root"},i),I.w=200,I.h=200,I.x=540,I.color="0xffffffff",I.alpha=.6,s[4].populate(I),r=s[1];const O={};s[5]=this.element({parent:r||"root"},i),O.w=200,O.h=200,O.x=760,O.color="0xffffffff",O.alpha=.8,s[5].populate(O),r=s[1];const T={};s[6]=this.element({parent:r||"root"},i),T.w=200,T.h=200,T.x=980,T.color="0xffffffff",T.alpha=1,s[6].populate(T),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=100,L.y=320,L.color="0xffffffff",L.alpha=i.alpha,s[7].populate(L),r=s[0];const j={};s[8]=this.element({parent:r||"root"},i),j.w=200,j.h=200,j.x=100,j.y=540,j.color="0xffffffff",j.alpha=i.alpha,s[8].populate(j),r=s[0];const U={};s[9]=this.element({parent:r||"root"},i),U.w=200,U.h=200,U.x=100,U.y=760,U.color="0xffffffff",U.alpha={transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}},s[9].populate(U),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.w=428,V.h=234,V.x=1200,V.y=100,V.src=i.image,V.alpha=1,s[10].populate(V),r=s[0];const z={};s[11]=this.element({parent:r||"root"},i),z.w=428,z.h=234,z.x=1300,z.y=100+234-40,z.src=i.image,z.alpha=.4,s[11].populate(z),r=s[0];const G={};s[12]=this.element({parent:r||"root"},i),G.w=428,G.h=234,G.x=1200,G.y=100+234*2-40*2,G.src=i.image,G.alpha=.1,s[12].populate(G),r=s[0];const Q={};s[13]=this.element({parent:r||"root"},i),Q.x=400,Q.y=400,Q.alpha=.2,Q.content="Text with alpha applied directly",Q.__textnode=!0,s[13].populate(Q),r=s[0];const te={};s[14]=this.element({parent:r||"root"},i),te.alpha=.5,te.x=400,te.y=500,s[14].populate(te),r=s[14];const le={};return s[15]=this.element({parent:r||"root"},i),le.content="Text with alpha applied on parent element",le.__textnode=!0,s[15].populate(le),s},effects:[function(r,i,l,d,y,x){i[8].set("alpha",r.alpha)},function(r,i,l,d,y,x){i[9].set("alpha",{transition:{value:r.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(r,i,l,d,y,x){i[10].set("src",r.image)},function(r,i,l,d,y,x){i[11].set("y",100+234-40)},function(r,i,l,d,y,x){i[11].set("src",r.image)},function(r,i,l,d,y,x){i[12].set("y",100+234*2-40*2)},function(r,i,l,d,y,x){i[12].set("src",r.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const c=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(c,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),$_=ut.Component("Scaling",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=100,C.y=100,C.w=150,C.h=150,C.color="0x64748bff",s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.x=300,w.y=100,w.w=100,w.h=100,w.color="0x64748bff",w.scale=1.5,s[2].populate(w),r=s[0];const v={};s[3]=this.element({parent:r||"root"},i),v.x=100,v.y=400,v.w=100,v.h=100,v.color="0xb45309ff",v.scale=i.scale,s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.x=900,I.y=400,I.w=100,I.h=100,I.src=i.balloon,I.scale={transition:{value:i.scale,easing:"ease-in-out"}},s[4].populate(I),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.x=300,O.y=600,O.w=100,O.h=100,O.color="0x059669ff",O.scale=i.scale2,s[5].populate(O),r=s[5];const T={};s[6]=this.element({parent:r||"root"},i),T.x=10,T.y=10,T.h=60,T.w=80,T.color="0x0369a1ff",s[6].populate(T),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.x=1500,L.y=600,L.w=100,L.h=100,L.color="0x059669ff",L.scale=i.scale2,s[7].populate(L),r=s[7];const j={};return s[8]=this.element({parent:r||"root"},i),j.x=10,j.y=10,j.h=60,j.w=80,j.color="0x0369a1ff",j.scale=i.scale2/2,s[8].populate(j),s},effects:[function(r,i,l,d,y,x){i[4].set("src",r.balloon)},function(r,i,l,d,y,x){i[4].set("scale",{transition:{value:r.scale,easing:"ease-in-out"}})},function(r,i,l,d,y,x){i[5].set("scale",r.scale2)},function(r,i,l,d,y,x){i[7].set("scale",r.scale2)},function(r,i,l,d,y,x){i[8].set("scale",r.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),z_=ut.Component("Rotation",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.y=70,s[1].populate(C),r=s[1];const w={};s[2]=this.element({parent:r||"root"},i),w.x=100,w.y=0,w.w=200,w.h=100,w.color="0xfee2e2ff",w.rotation=0,s[2].populate(w),r=s[1];const v={};s[3]=this.element({parent:r||"root"},i),v.x=100,v.y=150,v.w=200,v.h=100,v.color="0xfecacaff",v.rotation=10,s[3].populate(v),r=s[1];const I={};s[4]=this.element({parent:r||"root"},i),I.x=100,I.y=300,I.w=200,I.h=100,I.color="0xfca5a5ff",I.rotation=20,s[4].populate(I),r=s[1];const O={};s[5]=this.element({parent:r||"root"},i),O.x=100,O.y=450,O.w=200,O.h=100,O.color="0xf87171ff",O.rotation=30,s[5].populate(O),r=s[1];const T={};s[6]=this.element({parent:r||"root"},i),T.x=100,T.y=610,T.w=200,T.h=100,T.color="0xef4444ff",T.rotation=40,s[6].populate(T),r=s[1];const L={};s[7]=this.element({parent:r||"root"},i),L.x=100,L.y=800,L.w=200,L.h=100,L.color="0xdc2626ff",L.rotation=50,s[7].populate(L),r=s[0];const j={};s[8]=this.element({parent:r||"root"},i),j.y=70,j.x=300,s[8].populate(j),r=s[8];const U={};s[9]=this.element({parent:r||"root"},i),U.x=100,U.y=0,U.w=200,U.h=100,U.color="0xfee2e2ff",U.rotation=60,s[9].populate(U),r=s[8];const V={};s[10]=this.element({parent:r||"root"},i),V.x=100,V.y=150,V.w=200,V.h=100,V.color="0xfecacaff",V.rotation=70,s[10].populate(V),r=s[8];const z={};s[11]=this.element({parent:r||"root"},i),z.x=100,z.y=300,z.w=200,z.h=100,z.color="0xfca5a5ff",z.rotation=80,s[11].populate(z),r=s[8];const G={};s[12]=this.element({parent:r||"root"},i),G.x=100,G.y=450,G.w=200,G.h=100,G.color="0xf87171ff",G.rotation=90,s[12].populate(G),r=s[8];const Q={};s[13]=this.element({parent:r||"root"},i),Q.x=100,Q.y=610,Q.w=200,Q.h=100,Q.color="0xef4444ff",Q.rotation=100,s[13].populate(Q),r=s[8];const te={};s[14]=this.element({parent:r||"root"},i),te.x=100,te.y=800,te.w=200,te.h=100,te.color="0xdc2626ff",te.rotation=100,s[14].populate(te),r=s[0];const le={};s[15]=this.element({parent:r||"root"},i),le.y=70,le.x=600,s[15].populate(le),r=s[15];const he={};s[16]=this.element({parent:r||"root"},i),he.x=100,he.y=0,he.w=200,he.h=100,he.color="0xfee2e2ff",he.rotation=110,s[16].populate(he),r=s[15];const fe={};s[17]=this.element({parent:r||"root"},i),fe.x=100,fe.y=150,fe.w=200,fe.h=100,fe.color="0xfecacaff",fe.rotation=120,s[17].populate(fe),r=s[15];const k={};s[18]=this.element({parent:r||"root"},i),k.x=100,k.y=300,k.w=200,k.h=100,k.color="0xfca5a5ff",k.rotation=130,s[18].populate(k),r=s[15];const q={};s[19]=this.element({parent:r||"root"},i),q.x=100,q.y=450,q.w=200,q.h=100,q.color="0xf87171ff",q.rotation=140,s[19].populate(q),r=s[15];const Y={};s[20]=this.element({parent:r||"root"},i),Y.x=100,Y.y=610,Y.w=200,Y.h=100,Y.color="0xef4444ff",Y.rotation=150,s[20].populate(Y),r=s[15];const Z={};s[21]=this.element({parent:r||"root"},i),Z.x=100,Z.y=800,Z.w=200,Z.h=100,Z.color="0xdc2626ff",Z.rotation=160,s[21].populate(Z),r=s[0];const K={};s[22]=this.element({parent:r||"root"},i),K.y=70,K.x=900,s[22].populate(K),r=s[22];const ee={};s[23]=this.element({parent:r||"root"},i),ee.x=100,ee.y=0,ee.w=200,ee.h=100,ee.color="0xfee2e2ff",ee.rotation=170,s[23].populate(ee),r=s[22];const re={};s[24]=this.element({parent:r||"root"},i),re.x=100,re.y=150,re.w=200,re.h=100,re.color="0xfecacaff",re.rotation=180,s[24].populate(re),r=s[22];const ce={};s[25]=this.element({parent:r||"root"},i),ce.x=100,ce.y=300,ce.w=200,ce.h=100,ce.color="0xfca5a5ff",ce.rotation=190,s[25].populate(ce),r=s[22];const we={};s[26]=this.element({parent:r||"root"},i),we.x=100,we.y=450,we.w=200,we.h=100,we.color="0xf87171ff",we.rotation=200,s[26].populate(we),r=s[22];const be={};s[27]=this.element({parent:r||"root"},i),be.x=100,be.y=610,be.w=200,be.h=100,be.color="0xef4444ff",be.rotation=210,s[27].populate(be),r=s[22];const Te={};s[28]=this.element({parent:r||"root"},i),Te.x=100,Te.y=800,Te.w=200,Te.h=100,Te.color="0xdc2626ff",Te.rotation=220,s[28].populate(Te),r=s[0];const ke={};s[29]=this.element({parent:r||"root"},i),ke.y=70,ke.x=1200,s[29].populate(ke),r=s[29];const pe={};s[30]=this.element({parent:r||"root"},i),pe.x=100,pe.y=0,pe.w=200,pe.h=100,pe.color="0xfee2e2ff",pe.rotation=230,s[30].populate(pe),r=s[29];const Le={};s[31]=this.element({parent:r||"root"},i),Le.x=100,Le.y=150,Le.w=200,Le.h=100,Le.color="0xfecacaff",Le.rotation=240,s[31].populate(Le),r=s[29];const $={};s[32]=this.element({parent:r||"root"},i),$.x=100,$.y=300,$.w=200,$.h=100,$.color="0xfca5a5ff",$.rotation=250,s[32].populate($),r=s[29];const Ie={};s[33]=this.element({parent:r||"root"},i),Ie.x=100,Ie.y=450,Ie.w=200,Ie.h=100,Ie.color="0xf87171ff",Ie.rotation=260,s[33].populate(Ie),r=s[29];const Pe={};s[34]=this.element({parent:r||"root"},i),Pe.x=100,Pe.y=610,Pe.w=200,Pe.h=100,Pe.color="0xef4444ff",Pe.rotation=270,s[34].populate(Pe),r=s[29];const $e={};s[35]=this.element({parent:r||"root"},i),$e.x=100,$e.y=800,$e.w=200,$e.h=100,$e.color="0xdc2626ff",$e.rotation=280,s[35].populate($e),r=s[0];const Xe={};s[36]=this.element({parent:r||"root"},i),Xe.y=70,Xe.x=1500,s[36].populate(Xe),r=s[36];const et={};s[37]=this.element({parent:r||"root"},i),et.x=100,et.y=0,et.w=200,et.h=100,et.color="0xfee2e2ff",et.rotation=290,s[37].populate(et),r=s[36];const We={};s[38]=this.element({parent:r||"root"},i),We.x=100,We.y=150,We.w=200,We.h=100,We.color="0xfecacaff",We.rotation=300,s[38].populate(We),r=s[36];const nt={};s[39]=this.element({parent:r||"root"},i),nt.x=100,nt.y=300,nt.w=200,nt.h=100,nt.color="0xfca5a5ff",nt.rotation=310,s[39].populate(nt),r=s[36];const me={};s[40]=this.element({parent:r||"root"},i),me.x=100,me.y=450,me.w=200,me.h=100,me.color="0xf87171ff",me.rotation=320,s[40].populate(me),r=s[36];const wt={};s[41]=this.element({parent:r||"root"},i),wt.x=100,wt.y=610,wt.w=200,wt.h=100,wt.color="0xef4444ff",wt.rotation=330,s[41].populate(wt),r=s[36];const ft={};s[42]=this.element({parent:r||"root"},i),ft.x=100,ft.y=800,ft.w=200,ft.h=100,ft.color="0xdc2626ff",ft.rotation=340,s[42].populate(ft),r=s[0];const ot={};s[43]=this.element({parent:r||"root"},i),ot.x=200,ot.y=200,ot.w=400,ot.h=400,ot.color="0x0891b2ff",ot.rotation=i.rotation1,s[43].populate(ot),r=s[0];const St={};s[44]=this.element({parent:r||"root"},i),St.x=800,St.y=200,St.w=400,St.h=400,St.color="0x0891b2ff",St.rotation=i.rotation2,s[44].populate(St),r=s[0];const tt={};return s[45]=this.element({parent:r||"root"},i),tt.x=1400,tt.y=200,tt.w=400,tt.h=400,tt.color="0x0891b2ff",tt.rotation={transition:i.rotation3},s[45].populate(tt),s},effects:[function(r,i,l,d,y,x){i[44].set("rotation",r.rotation2)},function(r,i,l,d,y,x){i[45].set("rotation",{transition:r.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let c=800,r=2e3;this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},c),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},r)}}}),V_=ut.Component("KeyInput",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.x=525,m.y=130,s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=200,C.h=200,C.color=i.focusColor,C.x=i.focusedX*220,C.y=i.focusedY*210,s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.w=180,w.h=180,w.x=10,w.y=10,w.color=i.blockColor,s[2].populate(w),r=s[0];const v={};s[3]=this.element({parent:r||"root"},i),v.w=180,v.h=180,v.x=230,v.y=10,v.color=i.blockColor,s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.w=180,I.h=180,I.x=450,I.y=10,I.color=i.blockColor,s[4].populate(I),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.w=180,O.h=180,O.x=670,O.y=10,O.color=i.blockColor,s[5].populate(O),r=s[0];const T={};s[6]=this.element({parent:r||"root"},i),T.w=180,T.h=180,T.x=10,T.y=220,T.color=i.blockColor,s[6].populate(T),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.w=180,L.h=180,L.x=230,L.y=220,L.color=i.blockColor,s[7].populate(L),r=s[0];const j={};s[8]=this.element({parent:r||"root"},i),j.w=180,j.h=180,j.x=450,j.y=220,j.color=i.blockColor,s[8].populate(j),r=s[0];const U={};s[9]=this.element({parent:r||"root"},i),U.w=180,U.h=180,U.x=670,U.y=220,U.color=i.blockColor,s[9].populate(U),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.w=180,V.h=180,V.x=10,V.y=430,V.color=i.blockColor,s[10].populate(V),r=s[0];const z={};s[11]=this.element({parent:r||"root"},i),z.w=180,z.h=180,z.x=230,z.y=430,z.color=i.blockColor,s[11].populate(z),r=s[0];const G={};s[12]=this.element({parent:r||"root"},i),G.w=180,G.h=180,G.x=450,G.y=430,G.color=i.blockColor,s[12].populate(G),r=s[0];const Q={};s[13]=this.element({parent:r||"root"},i),Q.w=180,Q.h=180,Q.x=670,Q.y=430,Q.color=i.blockColor,s[13].populate(Q),r=s[0];const te={};s[14]=this.element({parent:r||"root"},i),te.w=180,te.h=180,te.x=10,te.y=640,te.color=i.blockColor,s[14].populate(te),r=s[0];const le={};s[15]=this.element({parent:r||"root"},i),le.w=180,le.h=180,le.x=230,le.y=640,le.color=i.blockColor,s[15].populate(le),r=s[0];const he={};s[16]=this.element({parent:r||"root"},i),he.w=180,he.h=180,he.x=450,he.y=640,he.color=i.blockColor,s[16].populate(he),r=s[0];const fe={};return s[17]=this.element({parent:r||"root"},i),fe.w=180,fe.h=180,fe.x=670,fe.y=640,fe.color=i.blockColor,s[17].populate(fe),s},effects:[function(r,i,l,d,y,x){i[1].set("color",r.focusColor)},function(r,i,l,d,y,x){i[1].set("x",r.focusedX*220)},function(r,i,l,d,y,x){i[1].set("y",r.focusedY*210)},function(r,i,l,d,y,x){i[2].set("color",r.blockColor)},function(r,i,l,d,y,x){i[3].set("color",r.blockColor)},function(r,i,l,d,y,x){i[4].set("color",r.blockColor)},function(r,i,l,d,y,x){i[5].set("color",r.blockColor)},function(r,i,l,d,y,x){i[6].set("color",r.blockColor)},function(r,i,l,d,y,x){i[7].set("color",r.blockColor)},function(r,i,l,d,y,x){i[8].set("color",r.blockColor)},function(r,i,l,d,y,x){i[9].set("color",r.blockColor)},function(r,i,l,d,y,x){i[10].set("color",r.blockColor)},function(r,i,l,d,y,x){i[11].set("color",r.blockColor)},function(r,i,l,d,y,x){i[12].set("color",r.blockColor)},function(r,i,l,d,y,x){i[13].set("color",r.blockColor)},function(r,i,l,d,y,x){i[14].set("color",r.blockColor)},function(r,i,l,d,y,x){i[15].set("color",r.blockColor)},function(r,i,l,d,y,x){i[16].set("color",r.blockColor)},function(r,i,l,d,y,x){i[17].set("color",r.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const c=this.focusedX-1;this.focusedX=Math.max(c,0)},right(){const c=this.focusedX+1;this.focusedX=Math.min(c,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(c){const r=parseInt(c.key);isNaN(r)?this.parent.$focus(c):(this.focusedX=Math.max(0,(r-1)%4),this.focusedY=Math.max(0,Math.ceil(r/4)-1))}}}),om=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],rm=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],H_=ut.Component("Texts",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.x=100,m.y=100,s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.content="Default text",C["@loaded"]=i.textLoaded&&i.textLoaded.bind(i),C.__textnode=!0,s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.content="123456",w.x=400,w.__textnode=!0,s[2].populate(w),r=s[0];const v={};s[3]=this.element({parent:r||"root"},i),v.content="Text with a different fontsize",v.size=i.size,v.y=120,v.font="raleway",v.__textnode=!0,s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.content="Text with a different color",I.size=50,I.color=i.color,I.y=250,I.__textnode=!0,s[4].populate(I),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.content="Letterspacing",O.size=50,O.color="0x38bdf8ff",O.y=450,O.letterspacing=40,O.__textnode=!0,s[5].populate(O),r=s[0];const T={};s[6]=this.element({parent:r||"root"},i),T.w=800,T.h=100,T.y=550,T.color="0x94a3b8ff",s[6].populate(T),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.content="Text align center",L.size=50,L.y=15,L.color="0xbae6fdff",L.align="center",L.maxwidth=800,L.__textnode=!0,s[7].populate(L),r=s[0];const j={};s[8]=this.element({parent:r||"root"},i),j.w=800,j.h=200,j.x=900,j.y=550,j.color="0x94a3b8ff",s[8].populate(j),r=s[8];const U={};s[9]=this.element({parent:r||"root"},i),U.content=i.longText,U.size=40,U.color="0xbae6fdff",U.maxwidth=800,U.maxlines=5,U.textoverflow="!!!",U.__textnode=!0,s[9].populate(U),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.w=800,V.h=120,V.x=900,V.y=800,V.color="0x94a3b8ff",s[10].populate(V),r=s[10];const z={};s[11]=this.element({parent:r||"root"},i),z.content=i.longText,z.size=40,z.color="0xbae6fdff",z.maxwidth=800,z.maxlines=2,z.lineheight=60,z.textoverflow=!1,z.__textnode=!0,s[11].populate(z),r=s[0];const G={};s[12]=this.element({parent:r||"root"},i),G.content=i.character,G.size=50,G.color=i.color,G.y=750,G.font="opensans",G.__textnode=!0,s[12].populate(G),r=s[0];const Q={};s[13]=this.element({parent:r||"root"},i),Q.x=1200,Q.y=300,s[13].populate(Q),r=s[13];const te={};s[14]=this.element({parent:r||"root"},i),te.rotation={transition:i.rotation},te.pivot=0,te.content="Hello",te.__textnode=!0,s[14].populate(te),r=s[13];const le={};s[15]=this.element({parent:r||"root"},i),le.x=150,le.rotation={transition:i.rotation},le.pivot=.5,le.content="World",le.__textnode=!0,s[15].populate(le),r=s[13];const he={};s[16]=this.element({parent:r||"root"},i),he.x=300,he.rotation={transition:i.rotation},he.pivot=1,he.content="!!",he.__textnode=!0,s[16].populate(he),r=s[0];const fe={};s[17]=this.element({parent:r||"root"},i),fe.x=500,fe.y=700,s[17].populate(fe),r=s[17];const k=[],q=(Z=[],K,ee)=>{const re=x(Z),ce=new Set;let we=re.length;for(;we--;)re[we],ce.add(""+we);let be=ee.length;for(;be--;)if(ce.has(ee[be])===!1){const pe=ee[be];K[18][pe]&&K[18][pe].destroy(),delete K[18][pe]}ee.length=0;const Te=re.length,ke=[];for(let pe=0;pe<Te;pe++){const Le=Object.create(i);r=K[17],Le.text=re[pe],Le.index=pe,Le.key=""+pe,ee.push(Le.key),r=K[17],K[18]===void 0&&(K[18]={});const $={};K[18][Le.key]===void 0&&(K[18][Le.key]=this.element({parent:r||"root"},i)),$.content=Le.text,$.y=Le.index*50,$.__textnode=!0,K[18][Le.key].nodeId===void 0&&K[18][Le.key].populate($);let Ie=()=>{K[18][Le.key].set("y",Le.index*50)};y(Ie,null),ke.push(Ie)}return ke};let Y;return y(()=>{i[Symbol.for("removeGlobalEffects")](Y),Y=null,Y=q(i.texts,s,k)},"texts"),y(()=>{i.text;for(let Z=0;Z<i.texts.length;Z++){const K={};K.index=Z,K.text=i.texts[Z],K.key=Z,s[18][K.key].set("content",K.text)}}),s},effects:[function(r,i,l,d,y,x){i[3].set("size",r.size)},function(r,i,l,d,y,x){i[4].set("color",r.color)},function(r,i,l,d,y,x){i[12].set("content",r.character)},function(r,i,l,d,y,x){i[12].set("color",r.color)},function(r,i,l,d,y,x){i[14].set("rotation",{transition:r.rotation})},function(r,i,l,d,y,x){i[15].set("rotation",{transition:r.rotation})},function(r,i,l,d,y,x){i[16].set("rotation",{transition:r.rotation})}],context:{}},state(){return{color:om[0],size:10,character:rm[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready(){let c=0;this.$setInterval(()=>{c++,c>om.length-1&&(c=0),this.color=om[c],this.size=10*(c*2+1),this.rotation+=30},1e3);let r=0;this.$setInterval(()=>{r++,r>rm.length-1&&(r=0),this.character=rm[r]},1400)}},methods:{textLoaded(c){this.$log.info(`Text loaded with w: ${c.w} and h: ${c.h}`)}}}),rh=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],G_=ut.Component("Images",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.src="assets/lightningbolt.png",C.w=428,C.h=234,C.x=100,C.y=100,s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",w.w=428,w.h=234,w.x=100,w.y=400,s[2].populate(w),r=s[0];const v={};s[3]=this.element({parent:r||"root"},i),v.src=i.image,v.x=100,v.y=700,v["@loaded"]=i.imageLoaded&&i.imageLoaded.bind(i),s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",I.src="assets/lightningbolt.png",I.w=428,I.h=234,I.x=600,I.y=100,s[4].populate(I),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.x=600,O.y=400,O.w=428,O.h=234,O.clipping=i.clipping,s[5].populate(O),r=s[5];const T={};s[6]=this.element({parent:r||"root"},i),T.src="assets/lightningbolt.png",T.w=856,T.h=468,s[6].populate(T),r=s[0];const L={};return s[7]=this.element({parent:r||"root"},i),L.color=i.color,L.src="assets/lightningbolt.png",L.w=428,L.h=234,L.x=1100,L.y=100,s[7].populate(L),s},effects:[function(r,i,l,d,y,x){i[3].set("src",r.image)},function(r,i,l,d,y,x){i[5].set("clipping",r.clipping)},function(r,i,l,d,y,x){i[7].set("color",r.color)}],context:{}},state(){return{image:rh[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===rh[0]?rh[1]:rh[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(c){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${c.w} and h: ${c.h}`)}}}),Oa=ut.Component("Square",{code:{render:function(r,i,l,d,y,x){const s=[],m={};return s[0]=this.element({parent:r||"root"},i),m.w={transition:i.size},m.h={transition:i.size},m.color={transition:i.color},s[0].populate(m),s},effects:[function(r,i,l,d,y,x){i[0].set("w",{transition:r.size})},function(r,i,l,d,y,x){i[0].set("h",{transition:r.size})},function(r,i,l,d,y,x){i[0].set("color",{transition:r.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(c,r){this.$log.info(`Size changed from ${r} to ${c}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),UC=ut.Component("Card",{components:{Square:Oa},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),I.w=i.w,I.h=i.h,I.color="0x0891b2ff",s[0].populate(I),w===!0&&(v-=1);const O=l.components&&l.components.Square||d.Square;r=s[0];const T={};s[1]=this.element({parent:r||"root"},w===!0?C:i),T.x=80,T.y=80;const L=[];if(typeof O<"u")for(let le in O.config.props)delete T[O.config.props[le]],L.push(O.config.props[le]);s[1].populate(T),w===!0&&(v-=1),r=s[1];const j={};j.x=80,j.y=80,m=j.is||"Square";let U;if(typeof m=="string"){if(U=l.components&&l.components[m]||d[m],!U)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(U=m);s[2]=U.call(null,{props:j},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],C=s[2],w=!0):r=s[2][Symbol.for("children")][0],w===!0&&v===0&&(w=!1);const V=l.components&&l.components.Square||d.Square;r=s[0];const z={};s[3]=this.element({parent:r||"root"},w===!0?C:i),z.x=20,z.y=20,z.size=40;const G=[];if(typeof V<"u")for(let le in V.config.props)delete z[V.config.props[le]],G.push(V.config.props[le]);s[3].populate(z),w===!0&&(v-=1),r=s[3];const Q={};Q.x=20,Q.y=20,Q.size=40,m=Q.is||"Square";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||d[m],!te)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);return s[4]=te.call(null,{props:Q},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],C=s[4],w=!0):r=s[4][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),s},effects:[],context:{}},props:["size"],computed:{w(){return this.size==="large"?400:200},h(){return this.size==="large"?500:300}}}),X_=ut.Component("Components",{components:{Square:Oa,Card:UC},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1);const T=l.components&&l.components.Square||d.Square;r=s[0];const L={};s[1]=this.element({parent:r||"root"},v===!0?w:i),L.x=100,L.y=100,L.size=50;const j=[];if(typeof T<"u")for(let rt in T.config.props)delete L[T.config.props[rt]],j.push(T.config.props[rt]);s[1].populate(L),v===!0&&(I-=1),r=s[1];const U={};U.x=100,U.y=100,U.size=50,m=U.is||"Square";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||d[m],!V)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[2]=V.call(null,{props:U},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],w=s[2],v=!0):r=s[2][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const z=l.components&&l.components.Square||d.Square;r=s[0];const G={};s[3]=this.element({parent:r||"root"},v===!0?w:i),G.x=100,G.y=200,G.size=100;const Q=[];if(typeof z<"u")for(let rt in z.config.props)delete G[z.config.props[rt]],Q.push(z.config.props[rt]);s[3].populate(G),v===!0&&(I-=1),r=s[3];const te={};te.x=100,te.y=200,te.size=100,m=te.is||"Square";let le;if(typeof m=="string"){if(le=l.components&&l.components[m]||d[m],!le)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(le=m);s[4]=le.call(null,{props:te},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],w=s[4],v=!0):r=s[4][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const he=l.components&&l.components.Square||d.Square;r=s[0];const fe={};s[5]=this.element({parent:r||"root"},v===!0?w:i),fe.x=100,fe.y=350,fe.size=200;const k=[];if(typeof he<"u")for(let rt in he.config.props)delete fe[he.config.props[rt]],k.push(he.config.props[rt]);s[5].populate(fe),v===!0&&(I-=1),r=s[5];const q={};q.x=100,q.y=350,q.size=200,m=q.is||"Square";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||d[m],!Y)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[6]=Y.call(null,{props:q},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],w=s[6],v=!0):r=s[6][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Z=l.components&&l.components.Square||d.Square;r=s[0];const K={};s[7]=this.element({parent:r||"root"},v===!0?w:i),K.x={transition:i.x},K.y=600,K.size=50;const ee=[];if(typeof Z<"u")for(let rt in Z.config.props)delete K[Z.config.props[rt]],ee.push(Z.config.props[rt]);s[7].populate(K),v===!0&&(I-=1),r=s[7];const re={};C={transition:i.x},Array.isArray(C)===!0&&(C=x(C).slice(0)),re.x=C,re.y=600,re.size=50,m=re.is||"Square";let ce;if(typeof m=="string"){if(ce=l.components&&l.components[m]||d[m],!ce)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ce=m);s[8]=ce.call(null,{props:re},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],w=s[8],v=!0):r=s[8][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const we=l.components&&l.components.Card||d.Card;r=s[0];const be={};s[9]=this.element({parent:r||"root"},v===!0?w:i),be.x=500,be.y=100;const Te=[];if(typeof we<"u")for(let rt in we.config.props)delete be[we.config.props[rt]],Te.push(we.config.props[rt]);s[9].populate(be),v===!0&&(I-=1),r=s[9];const ke={};ke.x=500,ke.y=100,m=ke.is||"Card";let pe;if(typeof m=="string"){if(pe=l.components&&l.components[m]||d[m],!pe)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);s[10]=pe.call(null,{props:ke},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],w=s[10],v=!0):r=s[10][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Le=l.components&&l.components.Card||d.Card;r=s[0];const $={};s[11]=this.element({parent:r||"root"},v===!0?w:i),$.x=500,$.y=500,$.size="large";const Ie=[];if(typeof Le<"u")for(let rt in Le.config.props)delete $[Le.config.props[rt]],Ie.push(Le.config.props[rt]);s[11].populate($),v===!0&&(I-=1),r=s[11];const Pe={};Pe.x=500,Pe.y=500,Pe.size="large",m=Pe.is||"Card";let $e;if(typeof m=="string"){if($e=l.components&&l.components[m]||d[m],!$e)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($e=m);s[12]=$e.call(null,{props:Pe},s[11],i),s[12][Symbol.for("slots")][0]?(r=s[12][Symbol.for("slots")][0],w=s[12],v=!0):r=s[12][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[0];const Xe={};s[13]=this.element({parent:r||"root"},v===!0?w:i),Xe.x=1e3,Xe.y=100,s[13].populate(Xe),v===!0&&(I-=1),r=s[13];const et={};s[14]=this.element({parent:r||"root"},v===!0?w:i),et.content="Dynamic components",et.__textnode=!0,s[14].populate(et),v===!0&&(I-=1);const We=l.components&&l.components.Component||d.Component;r=s[13];const nt={};s[15]=this.element({parent:r||"root"},v===!0?w:i),nt.is=i.dynamicComponent,nt.y=100,nt.color="0x0000ffff";const me=[];if(typeof We<"u")for(let rt in We.config.props)delete nt[We.config.props[rt]],me.push(We.config.props[rt]);s[15].populate(nt),v===!0&&(I-=1),r=s[15];const wt={};wt.is=i.dynamicComponent,wt.y=100,wt.color="0x0000ffff",m=wt.is||"Component";let ft;if(typeof m=="string"){if(ft=l.components&&l.components[m]||d[m],!ft)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ft=m);s[16]=ft.call(null,{props:wt},s[15],i),s[16][Symbol.for("slots")][0]?(r=s[16][Symbol.for("slots")][0],w=s[16],v=!0):r=s[16][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[13];const ot=[],St=(rt=[],Ge,ze)=>{const Oe=x(rt),W=new Set;let Ve=Oe.length;for(;Ve--;)Oe[Ve],W.add(""+Ve);let qe=ze.length;for(;qe--;)if(W.has(ze[qe])===!1){const Ae=ze[qe];Ge[17][Ae]&&Ge[17][Ae].destroy(),delete Ge[17][Ae],Ge[18][Ae]&&Ge[18][Ae].destroy(),delete Ge[18][Ae]}ze.length=0;const ht=Oe.length,vt=[];for(let Ae=0;Ae<ht;Ae++){const Ue=Object.create(i);r=Ge[13],Ue.bla=Oe[Ae],Ue.index=Ae,Ue.key=""+Ae,ze.push(Ue.key);const Qe=l.components&&l.components.Component||d.Component;Ge[17]===void 0&&(Ge[17]={});const Se={};Ge[17][Ue.key]===void 0&&(Ge[17][Ue.key]=this.element({parent:r||"root"},v===!0?w:i)),Se.is=Ue.bla,Se.x=205*Ue.index,Se.y=300;const ae=[];if(typeof Qe<"u")for(let Ut in Qe.config.props)delete Se[Qe.config.props[Ut]],ae.push(Qe.config.props[Ut]);Ge[17][Ue.key].nodeId===void 0&&(Ge[17][Ue.key].populate(Se),v===!0&&(I-=1)),Ge[18]===void 0&&(Ge[18]={}),r=Ge[17][Ue.key];const Ne={};if(Ge[18][Ue.key]===void 0){Ne.is=Ue.bla,C=205*Ue.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ne.x=C,Ne.y=300,m=Ne.is||"Component";let Ut;if(typeof m=="string"){if(Ut=l.components&&l.components[m]||d[m],!Ut)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ut=m);Ge[18][Ue.key]=Ut.call(null,{props:Ne},Ge[17][Ue.key],i),Ge[18][Ue.key][Symbol.for("slots")][0]?(r=Ge[18][Ue.key][Symbol.for("slots")][0],w=Ge[18][Ue.key],v=!0):r=Ge[18][Ue.key][Symbol.for("children")][0]}let xt=()=>{(typeof ae>"u"||ae.indexOf("x")===-1)&&Ge[17][Ue.key].set("x",205*Ue.index)};y(xt,null),vt.push(xt),Ge[18][Ue.key][Symbol.for("props")].x=205*Ue.index}return vt};let tt;return y(()=>{i[Symbol.for("removeGlobalEffects")](tt),tt=null,tt=St(i.dynamicComponents,s,ot)},"dynamicComponents"),s},effects:[function(r,i,l,d,y,x){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&i[7].set("x",{transition:r.x})},function(r,i,l,d,y,x){i[8][Symbol.for("props")].x={transition:r.x}}],context:{}},state(){return{x:100,dynamicComponent:bh,dynamicComponents:["Square","Card","Square",bh],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),zi=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],W_=ut.Component("ForLoop",{components:{Square:Oa},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1;const I={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(I),r=s[0];const O={};s[1]=this.element({parent:r||"root"},v===!0?w:i),O.y=20,s[1].populate(O),r=s[1];const T=[],L=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;)qe[vt],ht.add(""+vt);let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[2][Se]&&W[2][Se].destroy(),delete W[2][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[1],ae.item=qe[Se],ae.undefined=Se,ae.key=""+Se,Ve.push(ae.key),r=W[1],W[2]===void 0&&(W[2]={});const Ne={};W[2][ae.key]===void 0&&(W[2][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),Ne.w=80,Ne.h=80,Ne.x=ae.item,Ne.color="0x4d7c0fff",W[2][ae.key].nodeId===void 0&&W[2][ae.key].populate(Ne)}return Qe};let j;y(()=>{i[Symbol.for("removeGlobalEffects")](j),j=null,j=L(i.collection1,s,T)},"collection1"),r=s[0];const U={};s[3]=this.element({parent:r||"root"},v===!0?w:i),U.y=120,s[3].populate(U),r=s[3];const V=[],z=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;){const Se=qe[vt];ht.add(""+Se.id)}let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[4][Se]&&W[4][Se].destroy(),delete W[4][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[3],ae.item=qe[Se],ae.index=Se,ae.key=""+ae.item.id,Ve.push(ae.key),r=W[3],W[4]===void 0&&(W[4]={});const Ne={};W[4][ae.key]===void 0&&(W[4][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),Ne.w=80,Ne.h=80,Ne.x=ae.item.x*ae.index,Ne.color=ae.item.color,W[4][ae.key].nodeId===void 0&&W[4][ae.key].populate(Ne);let xt=()=>{W[4][ae.key].set("x",ae.item.x*ae.index)};y(xt,null),Qe.push(xt)}return Qe};let G;y(()=>{i[Symbol.for("removeGlobalEffects")](G),G=null,G=z(i.collection2,s,V)},"collection2"),r=s[0];const Q={};s[5]=this.element({parent:r||"root"},v===!0?w:i),Q.y=220,s[5].populate(Q),r=s[5];const te=[],le=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;)qe[vt],ht.add(""+vt);let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[6][Se]&&W[6][Se].destroy(),delete W[6][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[5],ae.item=qe[Se],ae.undefined=Se,ae.key=""+Se,Ve.push(ae.key),r=W[5],W[6]===void 0&&(W[6]={});const Ne={};W[6][ae.key]===void 0&&(W[6][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),Ne.w=80,Ne.h=80,Ne.x=ae.item.x,Ne.color=ae.item.color,W[6][ae.key].nodeId===void 0&&W[6][ae.key].populate(Ne);let xt=()=>{W[6][ae.key].set("x",ae.item.x)};y(xt,null),Qe.push(xt)}return Qe};let he;y(()=>{i[Symbol.for("removeGlobalEffects")](he),he=null,he=le(i.collection3,s,te)},"collection3"),r=s[0];const fe={};s[7]=this.element({parent:r||"root"},v===!0?w:i),fe.y=320,s[7].populate(fe),r=s[7];const k=[],q=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;)qe[vt],ht.add(""+vt);let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[8][Se]&&W[8][Se].destroy(),delete W[8][Se],W[9][Se]&&W[9][Se].destroy(),delete W[9][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[7],ae.item=qe[Se],ae.index=Se,ae.key=""+Se,Ve.push(ae.key);const Ne=l.components&&l.components.Square||d.Square;W[8]===void 0&&(W[8]={});const xt={};W[8][ae.key]===void 0&&(W[8][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),xt.x=ae.item.x*ae.index,xt.ref="square"+ae.index,xt.alpha=ae.alpha;const Ut=[];if(typeof Ne<"u")for(let un in Ne.config.props)delete xt[Ne.config.props[un]],Ut.push(Ne.config.props[un]);W[8][ae.key].nodeId===void 0&&W[8][ae.key].populate(xt),W[9]===void 0&&(W[9]={}),r=W[8][ae.key];const Ft={};if(W[9][ae.key]===void 0){C=ae.item.x*ae.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ft.x=C,C="square"+ae.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ft.ref=C,C=ae.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ft.alpha=C,m=Ft.is||"Square";let un;if(typeof m=="string"){if(un=l.components&&l.components[m]||d[m],!un)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(un=m);W[9][ae.key]=un.call(null,{props:Ft},W[8][ae.key],i),W[9][ae.key][Symbol.for("slots")][0]?(r=W[9][ae.key][Symbol.for("slots")][0],w=W[9][ae.key],v=!0):r=W[9][ae.key][Symbol.for("children")][0]}let Tt=()=>{(typeof Ut>"u"||Ut.indexOf("x")===-1)&&W[8][ae.key].set("x",ae.item.x*ae.index)};y(Tt,null),Qe.push(Tt);let Vt=()=>{(typeof Ut>"u"||Ut.indexOf("ref")===-1)&&W[8][ae.key].set("ref","square"+ae.index)};y(Vt,null),Qe.push(Vt),W[9][ae.key][Symbol.for("props")].x=ae.item.x*ae.index,W[9][ae.key][Symbol.for("props")].ref="square"+ae.index}return Qe};let Y;y(()=>{i[Symbol.for("removeGlobalEffects")](Y),Y=null,Y=q(i.collection2,s,k)},"collection2"),y(()=>{i.alpha;for(let Oe=0;Oe<i.collection2.length;Oe++){const W={};W.index=Oe,W.item=i.collection2[Oe],W.key=Oe,(typeof skip8>"u"||skip8.indexOf("alpha")===-1)&&s[8][W.key].set("alpha",i.alpha)}}),y(()=>{i.alpha;for(let Oe=0;Oe<i.collection2.length;Oe++){const W={};W.index=Oe,W.item=i.collection2[Oe],W.key=Oe,s[9][W.key][Symbol.for("props")].alpha=i.alpha}}),r=s[0];const Z={};s[10]=this.element({parent:r||"root"},v===!0?w:i),Z.y=420,s[10].populate(Z),r=s[10];const K=[],ee=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;){const Se=qe[vt];ht.add(""+Se.color)}let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[11][Se]&&W[11][Se].destroy(),delete W[11][Se],W[12][Se]&&W[12][Se].destroy(),delete W[12][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[10],ae.item=qe[Se],ae.undefined=Se,ae.key=""+ae.item.color,Ve.push(ae.key);const Ne=l.components&&l.components.Square||d.Square;W[11]===void 0&&(W[11]={});const xt={};W[11][ae.key]===void 0&&(W[11][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),xt.x=ae.item.x,xt.alpha=ae.alpha;const Ut=[];if(typeof Ne<"u")for(let Vt in Ne.config.props)delete xt[Ne.config.props[Vt]],Ut.push(Ne.config.props[Vt]);W[11][ae.key].nodeId===void 0&&W[11][ae.key].populate(xt),W[12]===void 0&&(W[12]={}),r=W[11][ae.key];const Ft={};if(W[12][ae.key]===void 0){C=ae.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ft.x=C,C=ae.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ft.alpha=C,m=Ft.is||"Square";let Vt;if(typeof m=="string"){if(Vt=l.components&&l.components[m]||d[m],!Vt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Vt=m);W[12][ae.key]=Vt.call(null,{props:Ft},W[11][ae.key],i),W[12][ae.key][Symbol.for("slots")][0]?(r=W[12][ae.key][Symbol.for("slots")][0],w=W[12][ae.key],v=!0):r=W[12][ae.key][Symbol.for("children")][0]}let Tt=()=>{(typeof Ut>"u"||Ut.indexOf("x")===-1)&&W[11][ae.key].set("x",ae.item.x)};y(Tt,null),Qe.push(Tt),W[12][ae.key][Symbol.for("props")].x=ae.item.x}return Qe};let re;y(()=>{i[Symbol.for("removeGlobalEffects")](re),re=null,re=ee(i.collection3,s,K)},"collection3"),y(()=>{i.alpha;for(let Oe=0;Oe<i.collection3.length;Oe++){const W={};W.undefined=Oe,W.item=i.collection3[Oe],W.key=W.item.color,(typeof skip11>"u"||skip11.indexOf("alpha")===-1)&&s[11][W.key].set("alpha",i.alpha)}}),y(()=>{i.alpha;for(let Oe=0;Oe<i.collection3.length;Oe++){const W={};W.undefined=Oe,W.item=i.collection3[Oe],W.key=W.item.color,s[12][W.key][Symbol.for("props")].alpha=i.alpha}}),r=s[0];const ce={};s[13]=this.element({parent:r||"root"},v===!0?w:i),ce.y=520,s[13].populate(ce),r=s[13];const we=[],be=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;)qe[vt],ht.add(""+vt);let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[14][Se]&&W[14][Se].destroy(),delete W[14][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[13],ae.item=qe[Se],ae.undefined=Se,ae.key=""+Se,Ve.push(ae.key),r=W[13],W[14]===void 0&&(W[14]={});const Ne={};W[14][ae.key]===void 0&&(W[14][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),Ne.w=80,Ne.h=80,Ne.x=ae.item,Ne.color="0xeab308ff",Ne.alpha=ae.alpha,W[14][ae.key].nodeId===void 0&&W[14][ae.key].populate(Ne)}return Qe};let Te;y(()=>{i[Symbol.for("removeGlobalEffects")](Te),Te=null,Te=be(i.collection1,s,we)},"collection1"),y(()=>{i.item;for(let Oe=0;Oe<i.collection1.length;Oe++){const W={};W.undefined=Oe,W.item=i.collection1[Oe],W.key=Oe,s[14][W.key].set("x",W.item)}}),y(()=>{i.alpha;for(let Oe=0;Oe<i.collection1.length;Oe++){const W={};W.undefined=Oe,W.item=i.collection1[Oe],W.key=Oe,s[14][W.key].set("alpha",i.alpha)}}),r=s[0];const ke={};s[15]=this.element({parent:r||"root"},v===!0?w:i),ke.y=620,s[15].populate(ke),r=s[15];const pe=[],Le=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;){const Se=qe[vt];ht.add(""+Se.id)}let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[16][Se]&&W[16][Se].destroy(),delete W[16][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[15],ae.item=qe[Se],ae.undefined=Se,ae.key=""+ae.item.id,Ve.push(ae.key),r=W[15],W[16]===void 0&&(W[16]={});const Ne={};W[16][ae.key]===void 0&&(W[16][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),Ne.w=80,Ne.h=80,Ne.x=ae.item.x,Ne.color=ae.item.color,Ne.alpha=ae.alpha,W[16][ae.key].nodeId===void 0&&W[16][ae.key].populate(Ne);let xt=()=>{W[16][ae.key].set("x",ae.item.x)};y(xt,null),Qe.push(xt)}return Qe};let $;y(()=>{i[Symbol.for("removeGlobalEffects")]($),$=null,$=Le(i.collection2,s,pe)},"collection2"),y(()=>{i.alpha;for(let Oe=0;Oe<i.collection2.length;Oe++){const W={};W.undefined=Oe,W.item=i.collection2[Oe],W.key=W.item.id,s[16][W.key].set("alpha",i.alpha)}}),r=s[0];const Ie={};s[17]=this.element({parent:r||"root"},v===!0?w:i),Ie.y=720,s[17].populate(Ie),r=s[17];const Pe=[],$e=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;){const Se=qe[vt];ht.add(""+Se.id)}let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[18][Se]&&W[18][Se].destroy(),delete W[18][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[17],ae.item=qe[Se],ae.undefined=Se,ae.key=""+ae.item.id,Ve.push(ae.key),r=W[17],W[18]===void 0&&(W[18]={});const Ne={};W[18][ae.key]===void 0&&(W[18][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),Ne.w=80,Ne.h=80,Ne.x=ae.item.x,Ne.color="0x06b6d4ff",W[18][ae.key].nodeId===void 0&&W[18][ae.key].populate(Ne);let xt=()=>{W[18][ae.key].set("x",ae.item.x)};y(xt,null),Qe.push(xt)}return Qe};let Xe;y(()=>{i[Symbol.for("removeGlobalEffects")](Xe),Xe=null,Xe=$e(i.collection4,s,Pe)},"collection4"),r=s[0];const et={};s[19]=this.element({parent:r||"root"},v===!0?w:i),et.y=720,et.x=700,s[19].populate(et),r=s[19];const We=[],nt=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;)qe[vt],ht.add(""+vt);let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[20][Se]&&W[20][Se].destroy(),delete W[20][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[19],ae.item=qe[Se],ae.undefined=Se,ae.key=""+Se,Ve.push(ae.key),r=W[19],W[20]===void 0&&(W[20]={});const Ne={};W[20][ae.key]===void 0&&(W[20][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),Ne.w=80,Ne.h=80,Ne.x=ae.item.x,Ne.color="0x8b5cf6ff",W[20][ae.key].nodeId===void 0&&W[20][ae.key].populate(Ne);let xt=()=>{W[20][ae.key].set("x",ae.item.x)};y(xt,null),Qe.push(xt)}return Qe};let me;y(()=>{i[Symbol.for("removeGlobalEffects")](me),me=null,me=nt(i.collection4,s,We)},"collection4"),r=s[0];const wt={};s[21]=this.element({parent:r||"root"},v===!0?w:i),wt.y=920,s[21].populate(wt),r=s[21];const ft=[],ot=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;){const Se=qe[vt];ht.add(""+Se.id)}let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[22][Se]&&W[22][Se].destroy(),delete W[22][Se],W[23][Se]&&W[23][Se].destroy(),delete W[23][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[21],ae.item=qe[Se],ae.undefined=Se,ae.key=""+ae.item.id,Ve.push(ae.key);const Ne=l.components&&l.components.Square||d.Square;W[22]===void 0&&(W[22]={});const xt={};W[22][ae.key]===void 0&&(W[22][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),xt.w=80,xt.h=80,xt.x=ae.item.x;const Ut=[];if(typeof Ne<"u")for(let Vt in Ne.config.props)delete xt[Ne.config.props[Vt]],Ut.push(Ne.config.props[Vt]);W[22][ae.key].nodeId===void 0&&W[22][ae.key].populate(xt),W[23]===void 0&&(W[23]={}),r=W[22][ae.key];const Ft={};if(W[23][ae.key]===void 0){Ft.w=80,Ft.h=80,C=ae.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ft.x=C,m=Ft.is||"Square";let Vt;if(typeof m=="string"){if(Vt=l.components&&l.components[m]||d[m],!Vt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Vt=m);W[23][ae.key]=Vt.call(null,{props:Ft},W[22][ae.key],i),W[23][ae.key][Symbol.for("slots")][0]?(r=W[23][ae.key][Symbol.for("slots")][0],w=W[23][ae.key],v=!0):r=W[23][ae.key][Symbol.for("children")][0]}let Tt=()=>{(typeof Ut>"u"||Ut.indexOf("x")===-1)&&W[22][ae.key].set("x",ae.item.x)};y(Tt,null),Qe.push(Tt),W[23][ae.key][Symbol.for("props")].x=ae.item.x}return Qe};let St;y(()=>{i[Symbol.for("removeGlobalEffects")](St),St=null,St=ot(i.collection4,s,ft)},"collection4"),r=s[0];const tt={};s[24]=this.element({parent:r||"root"},v===!0?w:i),tt.y=920,tt.x=700,s[24].populate(tt),r=s[24];const rt=[],Ge=(Oe=[],W,Ve)=>{const qe=x(Oe),ht=new Set;let vt=qe.length;for(;vt--;)qe[vt],ht.add(""+vt);let Ae=Ve.length;for(;Ae--;)if(ht.has(Ve[Ae])===!1){const Se=Ve[Ae];W[25][Se]&&W[25][Se].destroy(),delete W[25][Se],W[26][Se]&&W[26][Se].destroy(),delete W[26][Se]}Ve.length=0;const Ue=qe.length,Qe=[];for(let Se=0;Se<Ue;Se++){const ae=Object.create(i);r=W[24],ae.item=qe[Se],ae.undefined=Se,ae.key=""+Se,Ve.push(ae.key);const Ne=l.components&&l.components.Square||d.Square;W[25]===void 0&&(W[25]={});const xt={};W[25][ae.key]===void 0&&(W[25][ae.key]=this.element({parent:r||"root"},v===!0?w:i)),xt.w=80,xt.h=80,xt.x=ae.item.x;const Ut=[];if(typeof Ne<"u")for(let Vt in Ne.config.props)delete xt[Ne.config.props[Vt]],Ut.push(Ne.config.props[Vt]);W[25][ae.key].nodeId===void 0&&W[25][ae.key].populate(xt),W[26]===void 0&&(W[26]={}),r=W[25][ae.key];const Ft={};if(W[26][ae.key]===void 0){Ft.w=80,Ft.h=80,C=ae.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ft.x=C,m=Ft.is||"Square";let Vt;if(typeof m=="string"){if(Vt=l.components&&l.components[m]||d[m],!Vt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Vt=m);W[26][ae.key]=Vt.call(null,{props:Ft},W[25][ae.key],i),W[26][ae.key][Symbol.for("slots")][0]?(r=W[26][ae.key][Symbol.for("slots")][0],w=W[26][ae.key],v=!0):r=W[26][ae.key][Symbol.for("children")][0]}let Tt=()=>{(typeof Ut>"u"||Ut.indexOf("x")===-1)&&W[25][ae.key].set("x",ae.item.x)};y(Tt,null),Qe.push(Tt),W[26][ae.key][Symbol.for("props")].x=ae.item.x}return Qe};let ze;return y(()=>{i[Symbol.for("removeGlobalEffects")](ze),ze=null,ze=Ge(i.collection4,s,rt)},"collection4"),s},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:zi[0]},{id:"block2",x:100,color:zi[1]},{id:"block3",x:200,color:zi[2]},{id:"block4",x:300,color:zi[3]},{id:"block5",x:400,color:zi[4]},{id:"block6",x:500,color:zi[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=zi[5],this.collection2[1].color=zi[4],this.collection2[2].color=zi[3],this.collection2[3].color=zi[2],this.collection2[4].color=zi[1],this.collection2[5].color=zi[0]},4e3);let c=0;const r=this.$setInterval(()=>{this.collection3.push({x:c*100,color:zi[c]}),c++,c===zi.length&&clearInterval(r)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),$S=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],zS=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],VS=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],sm=c=>Math.round(Math.random()*1e3)%c;let Y_=0;const ul=()=>({id:Y_++,text:`${$S[sm($S.length)]} ${zS[sm(zS.length)]} ${VS[sm(VS.length)]}`}),q_=(c=1)=>{const r=[];for(let i=0;i<c;i++)r.push(ul());return r},K_=ut.Component("LegendItem",{code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),s[0].populate(I),w===!0&&(v-=1);const O=l.components&&l.components.Circle||d.Circle;r=s[0];const T={};s[1]=this.element({parent:r||"root"},w===!0?C:i),T.color="0xfb923cff",T.size=60;const L=[];if(typeof O<"u")for(let G in O.config.props)delete T[O.config.props[G]],L.push(O.config.props[G]);s[1].populate(T),w===!0&&(v-=1),r=s[1];const j={};j.color="0xfb923cff",j.size=60,m=j.is||"Circle";let U;if(typeof m=="string"){if(U=l.components&&l.components[m]||d[m],!U)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(U=m);s[2]=U.call(null,{props:j},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],C=s[2],w=!0):r=s[2][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),r=s[0];const V={};s[3]=this.element({parent:r||"root"},w===!0?C:i),V.color="0xe5e5e5ff",V.size=32,V.y=10,V.maxwidth=57,V.align="center",V.content=""+i.id,V.__textnode=!0,s[3].populate(V),w===!0&&(v-=1),r=s[0];const z={};return s[4]=this.element({parent:r||"root"},w===!0?C:i),z.color="0xe5e5e5ff",z.x=80,z.y=14,z.size=28,z.content=""+i.text,z.__textnode=!0,s[4].populate(z),w===!0&&(v-=1),s},effects:[],context:{}},props:["id","text"]}),BC=ut.Component("Row",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=380,m.h=60,m.y=i.index*80,m.color="0xfff7edff",s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=10,C.h=60,C.color="0x06b6d4ff",s[1].populate(C),r=s[0];const w={};return s[2]=this.element({parent:r||"root"},i),w.content=i.text,w.x=30,w.y=15,w.font="lato",w.size=28,w.color=i.activeRow==i.index?"0x06b6d4ff":"0x1e293bff",w.__textnode=!0,s[2].populate(w),s},effects:[function(r,i,l,d,y,x){i[0].set("y",r.index*80)},function(r,i,l,d,y,x){i[2].set("content",r.text)},function(r,i,l,d,y,x){i[2].set("color",r.activeRow==r.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),Q_=ut.Component("Rows",{components:{Row:BC},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1;const I={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(I),r=s[0];const O=[],T=(j=[],U,V)=>{const z=x(j),G=new Set;let Q=z.length;for(;Q--;){const fe=z[Q];G.add(""+fe.id+"key2")}let te=V.length;for(;te--;)if(G.has(V[te])===!1){const fe=V[te];U[1][fe]&&U[1][fe].destroy(),delete U[1][fe],U[2][fe]&&U[2][fe].destroy(),delete U[2][fe]}V.length=0;const le=z.length,he=[];for(let fe=0;fe<le;fe++){const k=Object.create(i);r=U[0],k.item=z[fe],k.index=fe,k.key=""+k.item.id+"key2",V.push(k.key);const q=l.components&&l.components.Row||d.Row;U[1]===void 0&&(U[1]={});const Y={};U[1][k.key]===void 0&&(U[1][k.key]=this.element({parent:r||"root"},v===!0?w:i)),Y.activeRow=k.activeRowIndex,Y.index=k.index,Y.text=k.item.text,Y.y=50;const Z=[];if(typeof q<"u")for(let ce in q.config.props)delete Y[q.config.props[ce]],Z.push(q.config.props[ce]);U[1][k.key].nodeId===void 0&&U[1][k.key].populate(Y),U[2]===void 0&&(U[2]={}),r=U[1][k.key];const K={};if(U[2][k.key]===void 0){C=k.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),K.activeRow=C,C=k.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),K.index=C,C=k.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),K.text=C,K.y=50,m=K.is||"Row";let ce;if(typeof m=="string"){if(ce=l.components&&l.components[m]||d[m],!ce)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ce=m);U[2][k.key]=ce.call(null,{props:K},U[1][k.key],i),U[2][k.key][Symbol.for("slots")][0]?(r=U[2][k.key][Symbol.for("slots")][0],w=U[2][k.key],v=!0):r=U[2][k.key][Symbol.for("children")][0]}let ee=()=>{(typeof Z>"u"||Z.indexOf("index")===-1)&&U[1][k.key].set("index",k.index)};y(ee,null),he.push(ee);let re=()=>{(typeof Z>"u"||Z.indexOf("text")===-1)&&U[1][k.key].set("text",k.item.text)};y(re,null),he.push(re),U[2][k.key][Symbol.for("props")].index=k.index,U[2][k.key][Symbol.for("props")].text=k.item.text}return he};let L;return y(()=>{i[Symbol.for("removeGlobalEffects")](L),L=null,L=T(i.data,s,O)},"data"),y(()=>{i.activeRowIndex;for(let j=0;j<i.data.length;j++){const U={};U.index=j,U.item=i.data[j],U.key=U.item.id+"key2",(typeof skip1>"u"||skip1.indexOf("activeRow")===-1)&&s[1][U.key].set("activeRow",i.activeRowIndex)}}),y(()=>{i.activeRowIndex;for(let j=0;j<i.data.length;j++){const U={};U.index=j,U.item=i.data[j],U.key=U.item.id+"key2",s[2][U.key][Symbol.for("props")].activeRow=i.activeRowIndex}}),s},effects:[],context:{}},props:["data","activeRowIndex"]}),Z_=ut.Component("ForLoop",{components:{Square:Oa,LegendItem:K_,Row:BC,Rows:Q_},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1),r=s[0];const T={};s[1]=this.element({parent:r||"root"},v===!0?w:i),T.x=100,T.y=60,T.size=48,T.content="Array operations test",T.__textnode=!0,s[1].populate(T),v===!0&&(I-=1),r=s[0];const L={};s[2]=this.element({parent:r||"root"},v===!0?w:i),L.y=170,L.x=140,s[2].populate(L),v===!0&&(I-=1),r=s[2];const j={};s[3]=this.element({parent:r||"root"},v===!0?w:i),j.x=-10,j.w=500,j.h=80,j.color="0x64748bff",j.y={transition:i.y},j.alpha={transition:!i.hide},s[3].populate(j),v===!0&&(I-=1);const U=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const V={};s[4]=this.element({parent:r||"root"},v===!0?w:i),V.y=0,V.id="a",V.text="Fill array by assignment";const z=[];if(typeof U<"u")for(let Me in U.config.props)delete V[U.config.props[Me]],z.push(U.config.props[Me]);s[4].populate(V),v===!0&&(I-=1),r=s[4];const G={};G.y=0,G.id="a",G.text="Fill array by assignment",m=G.is||"LegendItem";let Q;if(typeof m=="string"){if(Q=l.components&&l.components[m]||d[m],!Q)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Q=m);s[5]=Q.call(null,{props:G},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],w=s[5],v=!0):r=s[5][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const te=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const le={};s[6]=this.element({parent:r||"root"},v===!0?w:i),le.y=90,le.id="b",le.text="Push new item to array";const he=[];if(typeof te<"u")for(let Me in te.config.props)delete le[te.config.props[Me]],he.push(te.config.props[Me]);s[6].populate(le),v===!0&&(I-=1),r=s[6];const fe={};fe.y=90,fe.id="b",fe.text="Push new item to array",m=fe.is||"LegendItem";let k;if(typeof m=="string"){if(k=l.components&&l.components[m]||d[m],!k)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(k=m);s[7]=k.call(null,{props:fe},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],w=s[7],v=!0):r=s[7][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const q=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const Y={};s[8]=this.element({parent:r||"root"},v===!0?w:i),Y.y=180,Y.id="c",Y.text="Pop item from array";const Z=[];if(typeof q<"u")for(let Me in q.config.props)delete Y[q.config.props[Me]],Z.push(q.config.props[Me]);s[8].populate(Y),v===!0&&(I-=1),r=s[8];const K={};K.y=180,K.id="c",K.text="Pop item from array",m=K.is||"LegendItem";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||d[m],!ee)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[9]=ee.call(null,{props:K},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],w=s[9],v=!0):r=s[9][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const re=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const ce={};s[10]=this.element({parent:r||"root"},v===!0?w:i),ce.y=270,ce.id="d",ce.text="Shift item from array";const we=[];if(typeof re<"u")for(let Me in re.config.props)delete ce[re.config.props[Me]],we.push(re.config.props[Me]);s[10].populate(ce),v===!0&&(I-=1),r=s[10];const be={};be.y=270,be.id="d",be.text="Shift item from array",m=be.is||"LegendItem";let Te;if(typeof m=="string"){if(Te=l.components&&l.components[m]||d[m],!Te)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Te=m);s[11]=Te.call(null,{props:be},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],w=s[11],v=!0):r=s[11][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const ke=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const pe={};s[12]=this.element({parent:r||"root"},v===!0?w:i),pe.y=360,pe.id="e",pe.text="Splice 2 items from array";const Le=[];if(typeof ke<"u")for(let Me in ke.config.props)delete pe[ke.config.props[Me]],Le.push(ke.config.props[Me]);s[12].populate(pe),v===!0&&(I-=1),r=s[12];const $={};$.y=360,$.id="e",$.text="Splice 2 items from array",m=$.is||"LegendItem";let Ie;if(typeof m=="string"){if(Ie=l.components&&l.components[m]||d[m],!Ie)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ie=m);s[13]=Ie.call(null,{props:$},s[12],i),s[13][Symbol.for("slots")][0]?(r=s[13][Symbol.for("slots")][0],w=s[13],v=!0):r=s[13][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Pe=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const $e={};s[14]=this.element({parent:r||"root"},v===!0?w:i),$e.y=450,$e.id="f",$e.text="Unshift 2 items into array";const Xe=[];if(typeof Pe<"u")for(let Me in Pe.config.props)delete $e[Pe.config.props[Me]],Xe.push(Pe.config.props[Me]);s[14].populate($e),v===!0&&(I-=1),r=s[14];const et={};et.y=450,et.id="f",et.text="Unshift 2 items into array",m=et.is||"LegendItem";let We;if(typeof m=="string"){if(We=l.components&&l.components[m]||d[m],!We)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(We=m);s[15]=We.call(null,{props:et},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],w=s[15],v=!0):r=s[15][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const nt=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const me={};s[16]=this.element({parent:r||"root"},v===!0?w:i),me.y=540,me.id="g",me.text="Empty array by assignment";const wt=[];if(typeof nt<"u")for(let Me in nt.config.props)delete me[nt.config.props[Me]],wt.push(nt.config.props[Me]);s[16].populate(me),v===!0&&(I-=1),r=s[16];const ft={};ft.y=540,ft.id="g",ft.text="Empty array by assignment",m=ft.is||"LegendItem";let ot;if(typeof m=="string"){if(ot=l.components&&l.components[m]||d[m],!ot)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ot=m);s[17]=ot.call(null,{props:ft},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],w=s[17],v=!0):r=s[17][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const St=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const tt={};s[18]=this.element({parent:r||"root"},v===!0?w:i),tt.y=630,tt.id="h",tt.text="Concat an array with items";const rt=[];if(typeof St<"u")for(let Me in St.config.props)delete tt[St.config.props[Me]],rt.push(St.config.props[Me]);s[18].populate(tt),v===!0&&(I-=1),r=s[18];const Ge={};Ge.y=630,Ge.id="h",Ge.text="Concat an array with items",m=Ge.is||"LegendItem";let ze;if(typeof m=="string"){if(ze=l.components&&l.components[m]||d[m],!ze)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ze=m);s[19]=ze.call(null,{props:Ge},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],w=s[19],v=!0):r=s[19][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const Oe=l.components&&l.components.LegendItem||d.LegendItem;r=s[2];const W={};s[20]=this.element({parent:r||"root"},v===!0?w:i),W.y=720,W.id="i",W.text="Sort array alphabetically";const Ve=[];if(typeof Oe<"u")for(let Me in Oe.config.props)delete W[Oe.config.props[Me]],Ve.push(Oe.config.props[Me]);s[20].populate(W),v===!0&&(I-=1),r=s[20];const qe={};qe.y=720,qe.id="i",qe.text="Sort array alphabetically",m=qe.is||"LegendItem";let ht;if(typeof m=="string"){if(ht=l.components&&l.components[m]||d[m],!ht)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ht=m);s[21]=ht.call(null,{props:qe},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],w=s[21],v=!0):r=s[21][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),r=s[2];const vt={};s[22]=this.element({parent:r||"root"},v===!0?w:i),vt.y=840,s[22].populate(vt),v===!0&&(I-=1),r=s[22];const Ae={};s[23]=this.element({parent:r||"root"},v===!0?w:i),Ae.size=26,Ae.y=10,Ae.content="Array length:",Ae.__textnode=!0,s[23].populate(Ae),v===!0&&(I-=1),r=s[22];const Ue={};s[24]=this.element({parent:r||"root"},v===!0?w:i),Ue.content=i.data.length,Ue.size=40,Ue.x=180,Ue.color="0xfb923cff",Ue.__textnode=!0,s[24].populate(Ue),v===!0&&(I-=1),r=s[0];const Qe={};s[25]=this.element({parent:r||"root"},v===!0?w:i),Qe.x=660,Qe.y=100,s[25].populate(Qe),v===!0&&(I-=1),r=s[25];const Se={};s[26]=this.element({parent:r||"root"},v===!0?w:i),Se.content="For loop on Element",Se.__textnode=!0,s[26].populate(Se),v===!0&&(I-=1),r=s[25];const ae=[],Ne=(Me=[],Fe,Qt)=>{const vn=x(Me),Cn=new Set;let cn=vn.length;for(;cn--;){const Ct=vn[cn];Cn.add(""+Ct.id+"key")}let An=Qt.length;for(;An--;)if(Cn.has(Qt[An])===!1){const Ct=Qt[An];Fe[27][Ct]&&Fe[27][Ct].destroy(),delete Fe[27][Ct],Fe[28][Ct]&&Fe[28][Ct].destroy(),delete Fe[28][Ct],Fe[29][Ct]&&Fe[29][Ct].destroy(),delete Fe[29][Ct]}Qt.length=0;const kn=vn.length,Fn=[];for(let Ct=0;Ct<kn;Ct++){const Ze=Object.create(i);r=Fe[25],Ze.item=vn[Ct],Ze.index=Ct,Ze.key=""+Ze.item.id+"key",Qt.push(Ze.key),r=Fe[25],Fe[27]===void 0&&(Fe[27]={});const Pn={};Fe[27][Ze.key]===void 0&&(Fe[27][Ze.key]=this.element({parent:r||"root"},v===!0?w:i)),Pn.w=380,Pn.h=60,Pn.y=Ze.index*80+50,Pn.color="0xfff7edff",Fe[27][Ze.key].nodeId===void 0&&(Fe[27][Ze.key].populate(Pn),v===!0&&(I-=1)),r=Fe[27][Ze.key],Fe[28]===void 0&&(Fe[28]={});const Ht={};Fe[28][Ze.key]===void 0&&(Fe[28][Ze.key]=this.element({parent:r||"root"},v===!0?w:i)),Ht.w=10,Ht.h=60,Ht.color="0xfb923cff",Fe[28][Ze.key].nodeId===void 0&&(Fe[28][Ze.key].populate(Ht),v===!0&&(I-=1)),r=Fe[27][Ze.key],Fe[29]===void 0&&(Fe[29]={});const In={};Fe[29][Ze.key]===void 0&&(Fe[29][Ze.key]=this.element({parent:r||"root"},v===!0?w:i)),In.content=Ze.item.text,In.x=30,In.y=15,In.font="lato",In.size=28,In.color=Ze.activeRowIndex===Ze.index?"0x06b6d4ff":"0x1e293bff",In.__textnode=!0,Fe[29][Ze.key].nodeId===void 0&&(Fe[29][Ze.key].populate(In),v===!0&&(I-=1));let hn=()=>{Fe[27][Ze.key].set("y",Ze.index*80+50)};y(hn,null),Fn.push(hn);let Lt=()=>{Fe[29][Ze.key].set("content",Ze.item.text)};y(Lt,null),Fn.push(Lt)}return Fn};let xt;y(()=>{i[Symbol.for("removeGlobalEffects")](xt),xt=null,xt=Ne(i.data,s,ae)},"data"),y(()=>{i.activeRowIndex;for(let Me=0;Me<i.data.length;Me++){const Fe={};Fe.index=Me,Fe.item=i.data[Me],Fe.key=Fe.item.id+"key",s[29][Fe.key].set("color",i.activeRowIndex===Fe.index?"0x06b6d4ff":"0x1e293bff")}}),r=s[0];const Ut={};s[30]=this.element({parent:r||"root"},v===!0?w:i),Ut.x=1080,Ut.y=100,s[30].populate(Ut),v===!0&&(I-=1),r=s[30];const Ft={};s[31]=this.element({parent:r||"root"},v===!0?w:i),Ft.content="For loop on Component",Ft.__textnode=!0,s[31].populate(Ft),v===!0&&(I-=1),r=s[30];const Tt=[],Vt=(Me=[],Fe,Qt)=>{const vn=x(Me),Cn=new Set;let cn=vn.length;for(;cn--;){const Ct=vn[cn];Cn.add(""+Ct.id+"key2")}let An=Qt.length;for(;An--;)if(Cn.has(Qt[An])===!1){const Ct=Qt[An];Fe[32][Ct]&&Fe[32][Ct].destroy(),delete Fe[32][Ct],Fe[33][Ct]&&Fe[33][Ct].destroy(),delete Fe[33][Ct]}Qt.length=0;const kn=vn.length,Fn=[];for(let Ct=0;Ct<kn;Ct++){const Ze=Object.create(i);r=Fe[30],Ze.item=vn[Ct],Ze.index=Ct,Ze.key=""+Ze.item.id+"key2",Qt.push(Ze.key);const Pn=l.components&&l.components.Row||d.Row;Fe[32]===void 0&&(Fe[32]={});const Ht={};Fe[32][Ze.key]===void 0&&(Fe[32][Ze.key]=this.element({parent:r||"root"},v===!0?w:i)),Ht.activeRow=(Ze.count>0,Ze.activeRowIndex),Ht.index=Ze.index,Ht.text=Ze.item.text,Ht.y=50;const In=[];if(typeof Pn<"u")for(let xn in Pn.config.props)delete Ht[Pn.config.props[xn]],In.push(Pn.config.props[xn]);Fe[32][Ze.key].nodeId===void 0&&(Fe[32][Ze.key].populate(Ht),v===!0&&(I-=1)),Fe[33]===void 0&&(Fe[33]={}),r=Fe[32][Ze.key];const hn={};if(Fe[33][Ze.key]===void 0){C=(Ze.count>0,Ze.activeRowIndex),Array.isArray(C)===!0&&(C=x(C).slice(0)),hn.activeRow=C,C=Ze.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),hn.index=C,C=Ze.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),hn.text=C,hn.y=50,m=hn.is||"Row";let xn;if(typeof m=="string"){if(xn=l.components&&l.components[m]||d[m],!xn)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xn=m);Fe[33][Ze.key]=xn.call(null,{props:hn},Fe[32][Ze.key],i),Fe[33][Ze.key][Symbol.for("slots")][0]?(r=Fe[33][Ze.key][Symbol.for("slots")][0],w=Fe[33][Ze.key],v=!0):r=Fe[33][Ze.key][Symbol.for("children")][0]}let Lt=()=>{(typeof In>"u"||In.indexOf("index")===-1)&&Fe[32][Ze.key].set("index",Ze.index)};y(Lt,null),Fn.push(Lt);let gi=()=>{(typeof In>"u"||In.indexOf("text")===-1)&&Fe[32][Ze.key].set("text",Ze.item.text)};y(gi,null),Fn.push(gi),Fe[33][Ze.key][Symbol.for("props")].index=Ze.index,Fe[33][Ze.key][Symbol.for("props")].text=Ze.item.text}return Fn};let un;y(()=>{i[Symbol.for("removeGlobalEffects")](un),un=null,un=Vt(i.data,s,Tt)},"data"),y(()=>{i.activeRowIndex,i.count;for(let Me=0;Me<i.data.length;Me++){const Fe={};Fe.index=Me,Fe.item=i.data[Me],Fe.key=Fe.item.id+"key2",(typeof skip32>"u"||skip32.indexOf("activeRow")===-1)&&s[32][Fe.key].set("activeRow",(i.count>0,i.activeRowIndex))}}),y(()=>{i.activeRowIndex,i.count;for(let Me=0;Me<i.data.length;Me++){const Fe={};Fe.index=Me,Fe.item=i.data[Me],Fe.key=Fe.item.id+"key2",s[33][Fe.key][Symbol.for("props")].activeRow=(i.count>0,i.activeRowIndex)}}),r=s[0];const li={};s[34]=this.element({parent:r||"root"},v===!0?w:i),li.x=1500,li.y=100,s[34].populate(li),v===!0&&(I-=1),r=s[34];const Xn={};s[35]=this.element({parent:r||"root"},v===!0?w:i),Xn.content="RowsComponent",Xn.__textnode=!0,s[35].populate(Xn),v===!0&&(I-=1);const Nn=l.components&&l.components.Rows||d.Rows;r=s[34];const Un={};s[36]=this.element({parent:r||"root"},v===!0?w:i),Un.data=i.data,Un.activeRowIndex=i.activeRowIndex;const bn=[];if(typeof Nn<"u")for(let Me in Nn.config.props)delete Un[Nn.config.props[Me]],bn.push(Nn.config.props[Me]);s[36].populate(Un),v===!0&&(I-=1),r=s[36];const Qn={};C=i.data,Array.isArray(C)===!0&&(C=x(C).slice(0)),Qn.data=C,C=i.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),Qn.activeRowIndex=C,m=Qn.is||"Rows";let pn;if(typeof m=="string"){if(pn=l.components&&l.components[m]||d[m],!pn)throw new Error('Component "Rows" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pn=m);return s[37]=pn.call(null,{props:Qn},s[36],i),s[37][Symbol.for("slots")][0]?(r=s[37][Symbol.for("slots")][0],w=s[37],v=!0):r=s[37][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){i[3].set("y",{transition:r.y})},function(r,i,l,d,y,x){i[3].set("alpha",{transition:!r.hide})},function(r,i,l,d,y,x){i[24].set("content",r.data.length)},function(r,i,l,d,y,x){(typeof skip36>"u"||skip36.indexOf("data")===-1)&&i[36].set("data",r.data)},function(r,i,l,d,y,x){(typeof skip36>"u"||skip36.indexOf("activeRowIndex")===-1)&&i[36].set("activeRowIndex",r.activeRowIndex)},function(r,i,l,d,y,x){i[37][Symbol.for("props")].data=r.data},function(r,i,l,d,y,x){i[37][Symbol.for("props")].activeRowIndex=r.activeRowIndex}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show(){return this.hide===!0},data2(){return this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const c=[];for(let r=0;r<6;r++)c.push(ul());this.data=c},b(){this.y=80,this.$trigger("y"),this.data.push(ul())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(ul(),ul())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(q_(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=this.sortDirection===1?0:1,this.data=this.data.sort((c,r)=>{const i=c.text.toLowerCase(),l=r.text.toLowerCase();return this.sortDirection===1?i<l?-1:i>l?1:0:i>l?-1:i<l?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),J_=ut.Component("Effects",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=160,C.h=160,C.x=40,C.y=40,C.color="0xfb923cff",C.effects=[i.shader("radius",{radius:44})],s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.w=160,w.h=160,w.x=240,w.y=40,w.color="0xd97706ff",w.effects=[i.shader("radius",{radius:25})],s[2].populate(w),r=s[0];const v={};s[3]=this.element({parent:r||"root"},i),v.w=160,v.h=160,v.x=440,v.y=40,v.color="0xb45309ff",v.effects=[i.shader("radius",{radius:80})],s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.w=160,I.h=160,I.x=640,I.y=40,I.color="0x78350fff",I.effects=[i.shader("radius",{radius:10})],s[4].populate(I),r=s[0];const O={};s[5]=this.element({parent:r||"root"},i),O.w=160,O.h=160,O.x=40,O.y=240,O.color="0x65a30dff",O.effects=[i.shader("radius",{radius:i.radius})],s[5].populate(O),r=s[0];const T={};s[6]=this.element({parent:r||"root"},i),T.w=300,T.h=300,T.x=40,T.y=440,T.color="0x0c4a6eff",T.effects=[i.shader("radius",{radius:30})],s[6].populate(T),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=50,L.y=50,L.color="0x0284c7ff",L.effects=[i.shader("radius",{radius:40})],s[7].populate(L),r=s[7];const j={};s[8]=this.element({parent:r||"root"},i),j.w=100,j.h=100,j.x=50,j.y=50,j.color="0x38bdf8ff",j.effects=[i.shader("radius",{radius:50})],s[8].populate(j),r=s[8];const U={};s[9]=this.element({parent:r||"root"},i),U.w=40,U.h=40,U.x=30,U.y=30,U.color="0xbae6fdff",U.effects=[i.shader("radius",{radius:20})],s[9].populate(U),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.w=160,V.h=160,V.x=840,V.y=40,V.color="0x3b82f6ff",V.effects=[i.shader("radius",{radius:10}),i.shader("border",{width:20,color:"0x60a5faff"})],s[10].populate(V),r=s[0];const z={};return s[11]=this.element({parent:r||"root"},i),z.w=160,z.h=160,z.x=1040,z.y=40,z.color="0x500724ff",z.effects=i.effects,s[11].populate(z),s},effects:[function(r,i,l,d,y,x){i[1].set("effects",[r.shader("radius",{radius:44})])},function(r,i,l,d,y,x){i[2].set("effects",[r.shader("radius",{radius:25})])},function(r,i,l,d,y,x){i[3].set("effects",[r.shader("radius",{radius:80})])},function(r,i,l,d,y,x){i[4].set("effects",[r.shader("radius",{radius:10})])},function(r,i,l,d,y,x){i[5].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,l,d,y,x){i[6].set("effects",[r.shader("radius",{radius:30})])},function(r,i,l,d,y,x){i[7].set("effects",[r.shader("radius",{radius:40})])},function(r,i,l,d,y,x){i[8].set("effects",[r.shader("radius",{radius:50})])},function(r,i,l,d,y,x){i[9].set("effects",[r.shader("radius",{radius:20})])},function(r,i,l,d,y,x){i[10].set("effects",[r.shader("radius",{radius:10}),r.shader("border",{width:20,color:"0x60a5faff"})])},function(r,i,l,d,y,x){i[11].set("effects",r.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]}},hooks:{ready(){this.$setInterval(()=>{const r=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(r,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let c=0;this.$setInterval(()=>{c++,c%2?this.effects=[this.shader("borderLeft",{width:20,color:"#be123c"}),this.shader("borderRight",{width:20,color:"#f43f5e"})]:this.effects=[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]},2e3)}}}),eL=ut.Component("ShowIf",{components:{Square:Oa},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1),r=s[0];const T={};s[1]=this.element({parent:r||"root"},v===!0?w:i),T.y=40,s[1].populate(T),v===!0&&(I-=1),r=s[1];const L={};s[2]=this.element({parent:r||"root"},v===!0?w:i),L.x=50,L.w=200,L.h=300,L.color="0xbef264ff",L.show=!0,s[2].populate(L),v===!0&&(I-=1),r=s[1];const j={};s[3]=this.element({parent:r||"root"},v===!0?w:i),j.x=350,j.w=200,j.h=300,j.color="0xff0000ff",j.show=!1,s[3].populate(j),v===!0&&(I-=1),r=s[1];const U={};s[4]=this.element({parent:r||"root"},v===!0?w:i),U.x=650,U.w=200,U.h=300,U.color="0x84cc16ff",U.show=1,s[4].populate(U),v===!0&&(I-=1),r=s[1];const V={};s[5]=this.element({parent:r||"root"},v===!0?w:i),V.x=950,V.w=200,V.h=300,V.color="0xff0000ff",V.show=0,s[5].populate(V),v===!0&&(I-=1),r=s[0];const z={};s[6]=this.element({parent:r||"root"},v===!0?w:i),z.y=380,s[6].populate(z),v===!0&&(I-=1),r=s[6];const G={};s[7]=this.element({parent:r||"root"},v===!0?w:i),G.x=50,G.w=200,G.h=300,G.color="0xfde047ff",G.show=i.showNr,s[7].populate(G),v===!0&&(I-=1),r=s[6];const Q={};s[8]=this.element({parent:r||"root"},v===!0?w:i),Q.x=350,Q.w=200,Q.h=300,Q.color="0x0000ffff",Q.show=i.hideNr,s[8].populate(Q),v===!0&&(I-=1),r=s[6];const te={};s[9]=this.element({parent:r||"root"},v===!0?w:i),te.x=650,te.w=200,te.h=300,te.color="0x84cc16ff",te.show=i.showBool,s[9].populate(te),v===!0&&(I-=1),r=s[6];const le={};s[10]=this.element({parent:r||"root"},v===!0?w:i),le.x=950,le.w=200,le.h=300,le.color="0xff0000ff",le.show=i.hideBool,s[10].populate(le),v===!0&&(I-=1),r=s[0];const he={};s[11]=this.element({parent:r||"root"},v===!0?w:i),he.y=720,s[11].populate(he),v===!0&&(I-=1),r=s[11];const fe={};s[12]=this.element({parent:r||"root"},v===!0?w:i),fe.x=50,fe.w=200,fe.h=300,fe.color="0x5eead4ff",fe.show=i.showHideToggle,s[12].populate(fe),v===!0&&(I-=1),r=s[0];const k={};s[13]=this.element({parent:r||"root"},v===!0?w:i),k.y=40,k.x=1e3,s[13].populate(k),v===!0&&(I-=1);const q=l.components&&l.components.Square||d.Square;r=s[13];const Y={};s[14]=this.element({parent:r||"root"},v===!0?w:i),Y.show=!0;const Z=[];if(typeof q<"u")for(let Pe in q.config.props)delete Y[q.config.props[Pe]],Z.push(q.config.props[Pe]);s[14].populate(Y),v===!0&&(I-=1),r=s[14];const K={};K.show=!0,m=K.is||"Square";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||d[m],!ee)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[15]=ee.call(null,{props:K},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],w=s[15],v=!0):r=s[15][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const re=l.components&&l.components.Square||d.Square;r=s[13];const ce={};s[16]=this.element({parent:r||"root"},v===!0?w:i),ce.y=100,ce.show=!1;const we=[];if(typeof re<"u")for(let Pe in re.config.props)delete ce[re.config.props[Pe]],we.push(re.config.props[Pe]);s[16].populate(ce),v===!0&&(I-=1),r=s[16];const be={};be.y=100,be.show=!1,m=be.is||"Square";let Te;if(typeof m=="string"){if(Te=l.components&&l.components[m]||d[m],!Te)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Te=m);s[17]=Te.call(null,{props:be},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],w=s[17],v=!0):r=s[17][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const ke=l.components&&l.components.Square||d.Square;r=s[13];const pe={};s[18]=this.element({parent:r||"root"},v===!0?w:i),pe.y=200,pe.show=i.showHideToggle;const Le=[];if(typeof ke<"u")for(let Pe in ke.config.props)delete pe[ke.config.props[Pe]],Le.push(ke.config.props[Pe]);s[18].populate(pe),v===!0&&(I-=1),r=s[18];const $={};$.y=200,C=i.showHideToggle,Array.isArray(C)===!0&&(C=x(C).slice(0)),$.show=C,m=$.is||"Square";let Ie;if(typeof m=="string"){if(Ie=l.components&&l.components[m]||d[m],!Ie)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ie=m);return s[19]=Ie.call(null,{props:$},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],w=s[19],v=!0):r=s[19][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){i[12].set("show",r.showHideToggle)},function(r,i,l,d,y,x){(typeof skip18>"u"||skip18.indexOf("show")===-1)&&i[18].set("show",r.showHideToggle)},function(r,i,l,d,y,x){i[19][Symbol.for("props")].show=r.showHideToggle}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),tL=ut.Component("Events",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.x=400,m.y=360,s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=280,C.h=280,C.color="0xe5e7ebff",C.x=i.x,C.y=-5,s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.w=250,w.h=250,w.x=10,w.y=10,w.color=i.colors[0],s[2].populate(w),r=s[0];const v={};s[3]=this.element({parent:r||"root"},i),v.w=250,v.h=250,v.x=290,v.y=10,v.color=i.colors[1],s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.w=250,I.h=250,I.x=570,I.y=10,I.color=i.colors[2],s[4].populate(I),r=s[0];const O={};return s[5]=this.element({parent:r||"root"},i),O.w=250,O.h=250,O.x=850,O.y=10,O.color=i.colors[3],s[5].populate(O),s},effects:[function(r,i,l,d,y,x){i[1].set("x",r.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(c){const r=this.count-1;r===-1?this.parent.$focus(c):this.count=Math.max(r,0)},right(c){const r=this.count+1;r===4?this.parent.$focus(c):this.count=Math.min(r,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),nL=ut.Component("SlotCard",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=300,m.h=500,m.effects=[i.shader("radius",{radius:20}),i.shader("border",{width:6,color:"0xe2e8f0ff"})],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C[Symbol.for("isSlot")]=!0,C.x=20,C.y=20,s[1].populate(C),r=s[0];const w={};return s[2]=this.element({parent:r||"root"},i),w.content=i.label,w.maxwidth=260,w.x=20,w.y=400,w.align="center",w.__textnode=!0,s[2].populate(w),s},effects:[function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20}),r.shader("border",{width:6,color:"0xe2e8f0ff"})])}],context:{}},props:[{key:"label"}]}),iL=ut.Component("NamedSlotCard",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=700,m.h=300,m.effects=[i.shader("radius",{radius:20}),i.shader("border",{width:6,color:"0xe2e8f0ff"})],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=20,C.y=20,s[1].populate(C),r=s[1];const w={};s[2]=this.element({parent:r||"root"},i),w.content="First slot",w.__textnode=!0,s[2].populate(w),r=s[1];const v={};s[3]=this.element({parent:r||"root"},i),v[Symbol.for("isSlot")]=!0,v.y=40,v.ref="first",s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.x=200,I.y=20,s[4].populate(I),r=s[4];const O={};s[5]=this.element({parent:r||"root"},i),O.content="Second slot",O.__textnode=!0,s[5].populate(O),r=s[4];const T={};s[6]=this.element({parent:r||"root"},i),T[Symbol.for("isSlot")]=!0,T.y=40,T.ref="second",s[6].populate(T),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.x=480,L.y=20,s[7].populate(L),r=s[7];const j={};s[8]=this.element({parent:r||"root"},i),j.content="Third slot",j.__textnode=!0,s[8].populate(j),r=s[7];const U={};return s[9]=this.element({parent:r||"root"},i),U[Symbol.for("isSlot")]=!0,U.y=40,U.ref="third",s[9].populate(U),s},effects:[function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20}),r.shader("border",{width:6,color:"0xe2e8f0ff"})])}],context:{}}}),tl=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],oL=ut.Component("Components",{components:{SlotCard:nL,NamedSlotCard:iL,Card:UC,Square:Oa},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),s[0].populate(I),w===!0&&(v-=1);const O=l.components&&l.components.SlotCard||d.SlotCard;r=s[0];const T={};s[1]=this.element({parent:r||"root"},w===!0?C:i),T.x=400,T.y=100,T.label="Element";const L=[];if(typeof O<"u")for(let Ue in O.config.props)delete T[O.config.props[Ue]],L.push(O.config.props[Ue]);s[1].populate(T),w===!0&&(v-=1),r=s[1];const j={};j.x=400,j.y=100,j.label="Element",m=j.is||"SlotCard";let U;if(typeof m=="string"){if(U=l.components&&l.components[m]||d[m],!U)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(U=m);s[2]=U.call(null,{props:j},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],C=s[2],w=!0):r=s[2][Symbol.for("children")][0],w===!0&&(v=1+1);const V={};s[3]=this.element({parent:r||"root"},w===!0?C:i),s[3].populate(V),w===!0&&(v-=1),r=s[3];const z={};s[4]=this.element({parent:r||"root"},w===!0?C:i),z.color=i.color,z.w=100,z.h=100,s[4].populate(z),w===!0&&(v-=1),w===!0&&v===0&&(w=!1);const G=l.components&&l.components.SlotCard||d.SlotCard;r=s[0];const Q={};s[5]=this.element({parent:r||"root"},w===!0?C:i),Q.x=800,Q.y=100,Q.label="Component";const te=[];if(typeof G<"u")for(let Ue in G.config.props)delete Q[G.config.props[Ue]],te.push(G.config.props[Ue]);s[5].populate(Q),w===!0&&(v-=1),r=s[5];const le={};le.x=800,le.y=100,le.label="Component",m=le.is||"SlotCard";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||d[m],!he)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);s[6]=he.call(null,{props:le},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],C=s[6],w=!0):r=s[6][Symbol.for("children")][0],w===!0&&(v=1+1);const fe={};s[7]=this.element({parent:r||"root"},w===!0?C:i),s[7].populate(fe),w===!0&&(v-=1);const k=l.components&&l.components.Square||d.Square;r=s[7];const q={};s[8]=this.element({parent:r||"root"},w===!0?C:i),q.size=200,q.y=50;const Y=[];if(typeof k<"u")for(let Ue in k.config.props)delete q[k.config.props[Ue]],Y.push(k.config.props[Ue]);s[8].populate(q),w===!0&&(v-=1),r=s[8];const Z={};Z.size=200,Z.y=50,m=Z.is||"Square";let K;if(typeof m=="string"){if(K=l.components&&l.components[m]||d[m],!K)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(K=m);s[9]=K.call(null,{props:Z},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],C=s[9],w=!0):r=s[9][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),w===!0&&v===0&&(w=!1);const ee=l.components&&l.components.SlotCard||d.SlotCard;r=s[0];const re={};s[10]=this.element({parent:r||"root"},w===!0?C:i),re.x=1200,re.y=100,re.label="Element & Component";const ce=[];if(typeof ee<"u")for(let Ue in ee.config.props)delete re[ee.config.props[Ue]],ce.push(ee.config.props[Ue]);s[10].populate(re),w===!0&&(v-=1),r=s[10];const we={};we.x=1200,we.y=100,we.label="Element & Component",m=we.is||"SlotCard";let be;if(typeof m=="string"){if(be=l.components&&l.components[m]||d[m],!be)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(be=m);s[11]=be.call(null,{props:we},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],C=s[11],w=!0):r=s[11][Symbol.for("children")][0],w===!0&&(v=2+1);const Te={};s[12]=this.element({parent:r||"root"},w===!0?C:i),s[12].populate(Te),w===!0&&(v-=1),r=s[12];const ke={};s[13]=this.element({parent:r||"root"},w===!0?C:i),ke.color=i.color,ke.w=100,ke.h=100,s[13].populate(ke),w===!0&&(v-=1);const pe=l.components&&l.components.Square||d.Square;r=s[12];const Le={};s[14]=this.element({parent:r||"root"},w===!0?C:i),Le.size=200,Le.y=150;const $=[];if(typeof pe<"u")for(let Ue in pe.config.props)delete Le[pe.config.props[Ue]],$.push(pe.config.props[Ue]);s[14].populate(Le),w===!0&&(v-=1),r=s[14];const Ie={};Ie.size=200,Ie.y=150,m=Ie.is||"Square";let Pe;if(typeof m=="string"){if(Pe=l.components&&l.components[m]||d[m],!Pe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Pe=m);s[15]=Pe.call(null,{props:Ie},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],C=s[15],w=!0):r=s[15][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),w===!0&&v===0&&(w=!1);const $e=l.components&&l.components.Card||d.Card;r=s[0];const Xe={};s[16]=this.element({parent:r||"root"},w===!0?C:i),Xe.x=400,Xe.y=700,Xe.size="small";const et=[];if(typeof $e<"u")for(let Ue in $e.config.props)delete Xe[$e.config.props[Ue]],et.push($e.config.props[Ue]);s[16].populate(Xe),w===!0&&(v-=1),r=s[16];const We={};We.x=400,We.y=700,We.size="small",m=We.is||"Card";let nt;if(typeof m=="string"){if(nt=l.components&&l.components[m]||d[m],!nt)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(nt=m);s[17]=nt.call(null,{props:We},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],C=s[17],w=!0):r=s[17][Symbol.for("children")][0],w===!0&&(v=1+1);const me={};s[18]=this.element({parent:r||"root"},w===!0?C:i),s[18].populate(me),w===!0&&(v-=1),r=s[18];const wt={};s[19]=this.element({parent:r||"root"},w===!0?C:i),wt.color=i.color,wt.w=100,wt.h=100,s[19].populate(wt),w===!0&&(v-=1),w===!0&&v===0&&(w=!1);const ft=l.components&&l.components.NamedSlotCard||d.NamedSlotCard;r=s[0];const ot={};s[20]=this.element({parent:r||"root"},w===!0?C:i),ot.x=800,ot.y=700;const St=[];if(typeof ft<"u")for(let Ue in ft.config.props)delete ot[ft.config.props[Ue]],St.push(ft.config.props[Ue]);s[20].populate(ot),w===!0&&(v-=1),r=s[20];const tt={};tt.x=800,tt.y=700,m=tt.is||"NamedSlotCard";let rt;if(typeof m=="string"){if(rt=l.components&&l.components[m]||d[m],!rt)throw new Error('Component "NamedSlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(rt=m);s[21]=rt.call(null,{props:tt},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],C=s[21],w=!0):r=s[21][Symbol.for("children")][0],w===!0&&(v=4+1);const Ge={};s[22]=this.element({parent:r||"root"},w===!0?C:i),s[22].populate(Ge),w===!0&&(v-=1),r=s[22];const ze={};s[23]=this.element({parent:r||"root"},w===!0?C:i),ze.color="0x0891b2ff",ze.x=10,ze.y=140,ze.w=80,ze.h=60,ze.parent=i[Symbol.for("slots")]!==void 0&&Array.isArray(i[Symbol.for("slots")])===!0&&i[Symbol.for("slots")].filter(Ue=>Ue.ref==="second").shift()||r,ze.slot="second",s[23].populate(ze),w===!0&&(v-=1),r=s[22];const Oe={};s[24]=this.element({parent:r||"root"},w===!0?C:i),Oe.color=i.color,Oe.w=100,Oe.h=100,Oe.parent=i[Symbol.for("slots")]!==void 0&&Array.isArray(i[Symbol.for("slots")])===!0&&i[Symbol.for("slots")].filter(Ue=>Ue.ref==="third").shift()||r,Oe.slot="third",s[24].populate(Oe),w===!0&&(v-=1);const W=l.components&&l.components.Square||d.Square;r=s[22];const Ve={};s[25]=this.element({parent:r||"root"},w===!0?C:i),Ve.size=100,Ve.parent=i[Symbol.for("slots")]!==void 0&&Array.isArray(i[Symbol.for("slots")])===!0&&i[Symbol.for("slots")].filter(Ue=>Ue.ref==="first").shift()||r,Ve.slot="first";const qe=[];if(typeof W<"u")for(let Ue in W.config.props)delete Ve[W.config.props[Ue]],qe.push(W.config.props[Ue]);s[25].populate(Ve),w===!0&&(v-=1),r=s[25];const ht={};ht.size=100,ht.slot="first",m=ht.is||"Square";let vt;if(typeof m=="string"){if(vt=l.components&&l.components[m]||d[m],!vt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(vt=m);s[26]=vt.call(null,{props:ht},s[25],i),s[26][Symbol.for("slots")][0]?(r=s[26][Symbol.for("slots")][0],C=s[26],w=!0):r=s[26][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),r=s[22];const Ae={};return s[27]=this.element({parent:r||"root"},w===!0?C:i),Ae.color="0x4d7c0fff",Ae.x=40,Ae.y=40,Ae.w=40,Ae.h=60,Ae.parent=i[Symbol.for("slots")]!==void 0&&Array.isArray(i[Symbol.for("slots")])===!0&&i[Symbol.for("slots")].filter(Ue=>Ue.ref==="second").shift()||r,Ae.slot="second",s[27].populate(Ae),w===!0&&(v-=1),w===!0&&v===0&&(w=!1),s},effects:[function(r,i,l,d,y,x){i[4].set("color",r.color)},function(r,i,l,d,y,x){i[13].set("color",r.color)},function(r,i,l,d,y,x){i[19].set("color",r.color)},function(r,i,l,d,y,x){i[24].set("color",r.color)}],context:{}},state(){return{color:tl[0]}},hooks:{ready(){this.$setInterval(()=>{const c=tl.indexOf(this.color)+1;this.color=c<=tl.length?tl[c]:tl[0]},600)}}}),rL=ut.Component("MemoryCard",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=320,m.h=200,m.x=i.col*360,m.y=i.row*250,m.scale={transition:i.scale},m.rotation={transition:i.disabled?-2:0},s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.h={transition:i.h},C.w=320,C.y=125,C.mount="{y: 0.5}",C.color={transition:i.disabled?"#ccc":"#fff"},C.src=i.image+"&w=320&h=200",C.effects=[i.shader("radius",{radius:6})],C.show=i.open,s[1].populate(C),r=s[0];const w={};return s[2]=this.element({parent:r||"root"},i),w.h={transition:i.h},w.w=320,w.y=125,w.mount="{y: 0.5}",w.color=i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},w.effects=[i.shader("radius",{radius:6})],s[2].populate(w),s},effects:[function(r,i,l,d,y,x){i[0].set("scale",{transition:r.scale})},function(r,i,l,d,y,x){i[0].set("rotation",{transition:r.disabled?-2:0})},function(r,i,l,d,y,x){i[1].set("h",{transition:r.h})},function(r,i,l,d,y,x){i[1].set("color",{transition:r.disabled?"#ccc":"#fff"})},function(r,i,l,d,y,x){i[1].set("src",r.image+"&w=320&h=200")},function(r,i,l,d,y,x){i[1].set("effects",[r.shader("radius",{radius:6})])},function(r,i,l,d,y,x){i[1].set("show",r.open)},function(r,i,l,d,y,x){i[2].set("h",{transition:r.h})},function(r,i,l,d,y,x){i[2].set("color",r.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(r,i,l,d,y,x){i[2].set("effects",[r.shader("radius",{radius:6})])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1}},hooks:{init(){this.$listen("closeMemoryCard",c=>{c===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",c=>{c===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(c){this.scale=1.08;const r="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.$announcer.speak(r)},unfocus(){this.scale=1}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),HS=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],sL=ut.Component("Announcer",{components:{MemoryCard:rL},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1;const I={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(I),r=s[0];const O={};s[1]=this.element({parent:r||"root"},v===!0?w:i),O.font="raleway",O.size=80,O.color="0xffffffff",O.content="Let's play memory!",O.x=580,O.y=60,O.__textnode=!0,s[1].populate(O),r=s[0];const T={};s[2]=this.element({parent:r||"root"},v===!0?w:i),T.font="kalam",T.size=40,T.color="0xb91c1cff",T.content="the Accessible edition :)",T.x=1200,T.y=170,T.rotation=-6,T.__textnode=!0,s[2].populate(T),r=s[0];const L={};s[3]=this.element({parent:r||"root"},v===!0?w:i),L.x=260,L.y=260,s[3].populate(L),r=s[3];const j=[],U=(z=[],G,Q)=>{const te=x(z),le=new Set;let he=te.length;for(;he--;){const Y=te[he];le.add(""+Y.id)}let fe=Q.length;for(;fe--;)if(le.has(Q[fe])===!1){const Y=Q[fe];G[4][Y]&&G[4][Y].destroy(),delete G[4][Y],G[5][Y]&&G[5][Y].destroy(),delete G[5][Y]}Q.length=0;const k=te.length,q=[];for(let Y=0;Y<k;Y++){const Z=Object.create(i);r=G[3],Z.card=te[Y],Z.index=Y,Z.key=""+Z.card.id,Q.push(Z.key);const K=l.components&&l.components.MemoryCard||d.MemoryCard;G[4]===void 0&&(G[4]={});const ee={};G[4][Z.key]===void 0&&(G[4][Z.key]=this.element({parent:r||"root"},v===!0?w:i)),ee.col=Z.index%4,ee.row=Math.floor(Z.index/4)%3,ee.image=Z.card.image,ee.description=Z.card.description,ee.ref="card"+Z.index,ee.index=Z.index;const re=[];if(typeof K<"u")for(let pe in K.config.props)delete ee[K.config.props[pe]],re.push(K.config.props[pe]);G[4][Z.key].nodeId===void 0&&G[4][Z.key].populate(ee),G[5]===void 0&&(G[5]={}),r=G[4][Z.key];const ce={};if(G[5][Z.key]===void 0){C=Z.index%4,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.col=C,C=Math.floor(Z.index/4)%3,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.row=C,ce.image=Z.card.image,ce.description=Z.card.description,C="card"+Z.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.ref=C,C=Z.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.index=C,m=ce.is||"MemoryCard";let pe;if(typeof m=="string"){if(pe=l.components&&l.components[m]||d[m],!pe)throw new Error('Component "MemoryCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);G[5][Z.key]=pe.call(null,{props:ce},G[4][Z.key],i),G[5][Z.key][Symbol.for("slots")][0]?(r=G[5][Z.key][Symbol.for("slots")][0],w=G[5][Z.key],v=!0):r=G[5][Z.key][Symbol.for("children")][0]}let we=()=>{(typeof re>"u"||re.indexOf("col")===-1)&&G[4][Z.key].set("col",Z.index%4)};y(we,null),q.push(we);let be=()=>{(typeof re>"u"||re.indexOf("row")===-1)&&G[4][Z.key].set("row",Math.floor(Z.index/4)%3)};y(be,null),q.push(be);let Te=()=>{(typeof re>"u"||re.indexOf("ref")===-1)&&G[4][Z.key].set("ref","card"+Z.index)};y(Te,null),q.push(Te);let ke=()=>{(typeof re>"u"||re.indexOf("index")===-1)&&G[4][Z.key].set("index",Z.index)};y(ke,null),q.push(ke),G[5][Z.key][Symbol.for("props")].col=Z.index%4,G[5][Z.key][Symbol.for("props")].row=Math.floor(Z.index/4)%3,G[5][Z.key][Symbol.for("props")].ref="card"+Z.index,G[5][Z.key][Symbol.for("props")].index=Z.index}return q};let V;return y(()=>{i[Symbol.for("removeGlobalEffects")](V),V=null,V=U(i.cards,s,j)},"cards"),s},effects:[],context:{}},state(){return{cards:HS.concat(HS).map((c,r)=>({...c,id:`card${r}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",c=>{this.openCards.length<2&&this.openCards.push(c),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(c){if(this.focusedRow===-1){this.focusedRow=0;return}c=c+this.focusedRow*4,this.$select("card"+c).$focus()},focusedRow(c){if(this.focusedCol===-1){this.focusedCol=0;return}c=this.focusedCol+c*4,this.$select("card"+c).$focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),nl=(c,r)=>Math.floor(Math.random()*(r-c+1)+c),aL=ut.Component("Item",{code:{render:function(r,i,l,d,y,x){const s=[],m={};return s[0]=this.element({parent:r||"root"},i),m.src="assets/blits-b-small.png",m.w=96,m.h=168,m.x={transition:{value:i.x,duration:2900}},m.y={transition:{value:i.y,duration:2900}},m.rotation={transition:{value:i.rotation,duration:2900}},m.scale={transition:{value:i.scale,duration:1e3}},s[0].populate(m),s},effects:[function(r,i,l,d,y,x){i[0].set("x",{transition:{value:r.x,duration:2900}})},function(r,i,l,d,y,x){i[0].set("y",{transition:{value:r.y,duration:2900}})},function(r,i,l,d,y,x){i[0].set("rotation",{transition:{value:r.rotation,duration:2900}})},function(r,i,l,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:1e3}})}],context:{}},state(){return{x:nl(20,1560),y:nl(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=nl(20,1740),this.y=nl(20,900),this.rotation=nl(10,360)},3e3)}}}),uL=ut.Component("Exponential",{components:{Item:aL},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1;const v={};s[0]=this.element({parent:r||"root"},w===!0?C:i),s[0].populate(v),r=s[0];const I=[],O=(L=[],j,U)=>{const V=x(L),z=new Set;let G=V.length;for(;G--;){const he=V[G];z.add(""+he)}let Q=U.length;for(;Q--;)if(z.has(U[Q])===!1){const he=U[Q];j[1][he]&&j[1][he].destroy(),delete j[1][he],j[2][he]&&j[2][he].destroy(),delete j[2][he]}U.length=0;const te=V.length,le=[];for(let he=0;he<te;he++){const fe=Object.create(i);r=j[0],fe.item=V[he],fe.undefined=he,fe.key=""+fe.item,U.push(fe.key);const k=l.components&&l.components.Item||d.Item;j[1]===void 0&&(j[1]={});const q={};j[1][fe.key]===void 0&&(j[1][fe.key]=this.element({parent:r||"root"},w===!0?C:i));const Y=[];if(typeof k<"u")for(let K in k.config.props)delete q[k.config.props[K]],Y.push(k.config.props[K]);j[1][fe.key].nodeId===void 0&&j[1][fe.key].populate(q),j[2]===void 0&&(j[2]={}),r=j[1][fe.key];const Z={};if(j[2][fe.key]===void 0){m=Z.is||"Item";let K;if(typeof m=="string"){if(K=l.components&&l.components[m]||d[m],!K)throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(K=m);j[2][fe.key]=K.call(null,{props:Z},j[1][fe.key],i),j[2][fe.key][Symbol.for("slots")][0]?(r=j[2][fe.key][Symbol.for("slots")][0],C=j[2][fe.key],w=!0):r=j[2][fe.key][Symbol.for("children")][0]}}return le};let T;return y(()=>{i[Symbol.for("removeGlobalEffects")](T),T=null,T=O(i.items,s,I)},"items"),s},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const c=this.$setInterval(()=>{for(let r=0;r<=Math.floor(this.items.length/10);r++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(c)},2e3)}}}),jC=ut.Component("Ball",{code:{render:function(r,i,l,d,y,x){const s=[],m={};return s[0]=this.element({parent:r||"root"},i),m.w=100,m.h=100,m.src="/assets/basketball.png",s[0].populate(m),s},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),sh=(c,r)=>Math.floor(Math.random()*(r-c+1)+c),lL=ut.Component("Viewport",{components:{Ball:jC},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(O),v===!0&&(I-=1),r=s[0];const T={};s[1]=this.element({parent:r||"root"},v===!0?w:i),T.size=32,T.x=960,T.y=540,T.mount=.5,T.content=i.status.join(`
`),T.lineheight=52,T.maxwidth=500,T.__textnode=!0,s[1].populate(T),v===!0&&(I-=1);const L=l.components&&l.components.Ball||d.Ball;r=s[0];const j={};s[2]=this.element({parent:r||"root"},v===!0?w:i),j.x={transition:{value:i.x,duration:1250}},j.y={transition:{value:i.y,duration:1250}},j.rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},j.w=100,j.h=100;const U=[];if(typeof L<"u")for(let G in L.config.props)delete j[L.config.props[G]],U.push(L.config.props[G]);s[2].populate(j),v===!0&&(I-=1),r=s[2];const V={};C={transition:{value:i.x,duration:1250}},Array.isArray(C)===!0&&(C=x(C).slice(0)),V.x=C,C={transition:{value:i.y,duration:1250}},Array.isArray(C)===!0&&(C=x(C).slice(0)),V.y=C,C={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},Array.isArray(C)===!0&&(C=x(C).slice(0)),V.rotation=C,V.w=100,V.h=100,m=V.is||"Ball";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||d[m],!z)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);return s[3]=z.call(null,{props:V},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],w=s[3],v=!0):r=s[3][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){i[1].set("content",r.status.join(`
`))},function(r,i,l,d,y,x){(typeof skip2>"u"||skip2.indexOf("x")===-1)&&i[2].set("x",{transition:{value:r.x,duration:1250}})},function(r,i,l,d,y,x){(typeof skip2>"u"||skip2.indexOf("y")===-1)&&i[2].set("y",{transition:{value:r.y,duration:1250}})},function(r,i,l,d,y,x){(typeof skip2>"u"||skip2.indexOf("rotation")===-1)&&i[2].set("rotation",{transition:{value:r.rotation,duration:1400,easing:"ease-in-out"}})},function(r,i,l,d,y,x){i[3][Symbol.for("props")].x={transition:{value:r.x,duration:1250}}},function(r,i,l,d,y,x){i[3][Symbol.for("props")].y={transition:{value:r.y,duration:1250}}},function(r,i,l,d,y,x){i[3][Symbol.for("props")].rotation={transition:{value:r.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",c=>{this.status.unshift(`${this.count++} -  ${c}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=sh(-90,90),this.x=(1920-100)/2,this.y=(1080-100)/2,this.$setInterval(()=>{this.x=sh(-300,2220),this.y=sh(-300,1380),this.rotation=sh(-90,90)},2500)}}}),Sl={code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=1920,m.h=1080,m.color="0xffffffff",m.effects=[i.shader("radialGradient",{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800})],s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.show=i.up!==void 0,s[1].populate(C),r=s[1];const w={};s[2]=this.element({parent:r||"root"},i),w.src="assets/arrow.png",w.w=100,w.h=44,w.x=960,w.y=40,w.mount="{x: 0.5}",s[2].populate(w),r=s[1];const v={};s[3]=this.element({parent:r||"root"},i),v.content=i.up&&i.up.toUpperCase(),v.x=960,v.y=100,v.size=76,v.mount="{x: 0.5}",v.__textnode=!0,s[3].populate(v),r=s[0];const I={};s[4]=this.element({parent:r||"root"},i),I.show=i.right!==void 0,s[4].populate(I),r=s[4];const O={};s[5]=this.element({parent:r||"root"},i),O.src="assets/arrow.png",O.w=100,O.h=44,O.x=1900,O.y=540,O.mount="{x: 1, y: 0.5}",O.rotation=90,s[5].populate(O),r=s[4];const T={};s[6]=this.element({parent:r||"root"},i),T.content=i.right&&i.right.toUpperCase(),T.x=1760,T.y=540,T.size=76,T.rotation=90,T.mount=.5,T.__textnode=!0,s[6].populate(T),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.show=i.down!==void 0,s[7].populate(L),r=s[7];const j={};s[8]=this.element({parent:r||"root"},i),j.src="assets/arrow.png",j.w=100,j.h=44,j.x=960,j.y=1040,j.mount="{x: 0.5, y: 1}",j.rotation=180,s[8].populate(j),r=s[7];const U={};s[9]=this.element({parent:r||"root"},i),U.content=i.down&&i.down.toUpperCase(),U.x=960,U.y=980,U.size=76,U.mount="{x: 0.5, y: 1}",U.__textnode=!0,s[9].populate(U),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.show=i.left!==void 0,s[10].populate(V),r=s[10];const z={};s[11]=this.element({parent:r||"root"},i),z.src="assets/arrow.png",z.w=100,z.h=44,z.x=40,z.y=540,z.mount="{ y: 0.5}",z.rotation=-90,s[11].populate(z),r=s[10];const G={};s[12]=this.element({parent:r||"root"},i),G.content=i.left&&i.left.toUpperCase(),G.x=180,G.y=540,G.size=76,G.mount=.5,G.rotation=-90,G.__textnode=!0,s[12].populate(G),r=s[0];const Q={};return s[13]=this.element({parent:r||"root"},i),Q.content=i.pageTitle,Q.font="raleway",Q.x=960,Q.y=540,Q.size=240,Q.mount=.5,Q.__textnode=!0,s[13].populate(Q),s},effects:[function(r,i,l,d,y,x){i[0].set("effects",[r.shader("radialGradient",{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800})])},function(r,i,l,d,y,x){i[1].set("show",r.up!==void 0)},function(r,i,l,d,y,x){i[3].set("content",r.up&&r.up.toUpperCase())},function(r,i,l,d,y,x){i[4].set("show",r.right!==void 0)},function(r,i,l,d,y,x){i[6].set("content",r.right&&r.right.toUpperCase())},function(r,i,l,d,y,x){i[7].set("show",r.down!==void 0)},function(r,i,l,d,y,x){i[9].set("content",r.down&&r.down.toUpperCase())},function(r,i,l,d,y,x){i[10].set("show",r.left!==void 0)},function(r,i,l,d,y,x){i[12].set("content",r.left&&r.left.toUpperCase())},function(r,i,l,d,y,x){i[13].set("content",r.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},fL=ut.Component("RouterHookPage",{...Sl,state(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),cL=ut.Component("RouterHookMovie",{...Sl,state(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),hL=ut.Component("RouterHookRating",{...Sl,state(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),dL=ut.Component("RouterHookEpisode",{...Sl,state(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),pL=ut.Component("RouterHookEpisode",{...Sl,state(){return{title:`Episodes 
 overview`,right:"FIRST EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}}),lr={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},mL=[{path:"/examples/router-hooks",component:fL,hooks:{async before(c,r){return r&&r.path==="examples/router-hooks/movie"&&(c.transition=lr.slideInOutRight),r&&r.path==="examples/router-hooks/rating"&&(c.transition=lr.slideInOutLeft),r&&r.path.indexOf("episode")>-1&&(c.transition=lr.slideInOutDown),c}}},{path:"/examples/router-hooks/episode/:id",component:dL,hooks:{before(c,r){r&&r.path.indexOf("episode")>-1&&(c.transition=lr.slideInOutLeft);const{id:i}=c.params;return i>5?"/examples/router-hooks/":(c.data.page={id:parseInt(i),title:`Episode ${i}`},c)}},transition:lr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:pL,transition:lr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:cL,hooks:{before(c,r){return r&&r.path==="examples/router-hooks"&&(c.transition=lr.slideInOutLeft),r&&r.path==="examples/router-hooks/rating"&&(c.transition=lr.slideInOutRight),c}}},{path:"/examples/router-hooks/rating",component:hL,transition:lr.slideInOutLeft}],gL=ut.Component("Resize",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.y=30,C.content="fit (Resize Mode) sample",C.maxwidth=1920,C.align="center",C.__textnode=!0,s[1].populate(C),r=s[0];const w={};s[2]=this.element({parent:r||"root"},i),w.x={transition:{value:i.pages.x1,duration:200}},w.y=90,s[2].populate(w),r=s[2];const v={};s[3]=this.element({parent:r||"root"},i),v.x=100,v.content="Image dimensions: 2560 X 1440",v.__textnode=!0,s[3].populate(v),r=s[2];const I={};s[4]=this.element({parent:r||"root"},i),I.x=100,I.y=80,I.content=i.titles.t1,I.__textnode=!0,s[4].populate(I),r=s[2];const O={};s[5]=this.element({parent:r||"root"},i),O.y=150,O.x=100,s[5].populate(O),r=s[5];const T={};s[6]=this.element({parent:r||"root"},i),T.w=i.w,T.h=i.w-300,T.src=i.img,T.fit="{type: 'cover', position: { y: 0 } }",s[6].populate(T),r=s[5];const L={};s[7]=this.element({parent:r||"root"},i),L.w=i.w,L.h=i.w-300,L.src=i.img,L.fit="{ type: 'cover', position: { y: 0.5 } }",L.x=600,s[7].populate(L),r=s[5];const j={};s[8]=this.element({parent:r||"root"},i),j.w=i.w,j.h=i.w-300,j.src=i.img,j.fit="{ type: 'cover', position: { y: 1 } }",j.x=1200,s[8].populate(j),r=s[2];const U={};s[9]=this.element({parent:r||"root"},i),U.x=100,U.y=500,U.content=i.titles.t2,U.__textnode=!0,s[9].populate(U),r=s[2];const V={};s[10]=this.element({parent:r||"root"},i),V.y=600,V.x=100,s[10].populate(V),r=s[10];const z={};s[11]=this.element({parent:r||"root"},i),z.w=i.w,z.h=i.w-150,z.src=i.img,z.fit="{ type: 'cover', position: { x: 0 } }",s[11].populate(z),r=s[10];const G={};s[12]=this.element({parent:r||"root"},i),G.w=i.w,G.h=i.w-150,G.src=i.img,G.fit="{ type: 'cover', position: { x: 0.5 } }",G.x=600,s[12].populate(G),r=s[10];const Q={};s[13]=this.element({parent:r||"root"},i),Q.w=i.w,Q.h=i.w-150,Q.src=i.img,Q.fit="{ type: 'cover', position: { x: 1 } }",Q.x=1200,s[13].populate(Q),r=s[0];const te={};s[14]=this.element({parent:r||"root"},i),te.x={transition:{value:i.pages.x2,duration:200}},te.y=90,s[14].populate(te),r=s[14];const le={};s[15]=this.element({parent:r||"root"},i),le.x=100,le.content="Image dimensions: 1440 X 2560",le.__textnode=!0,s[15].populate(le),r=s[14];const he={};s[16]=this.element({parent:r||"root"},i),he.x=100,he.y=80,he.content=i.titles.t3,he.__textnode=!0,s[16].populate(he),r=s[14];const fe={};s[17]=this.element({parent:r||"root"},i),fe.y=150,fe.x=100,s[17].populate(fe),r=s[17];const k={};s[18]=this.element({parent:r||"root"},i),k.w=i.w,k.h=i.w-200,k.src=i.img1,k.fit="{ type: 'cover', position: { y: 0, x: 0 } }",s[18].populate(k),r=s[17];const q={};s[19]=this.element({parent:r||"root"},i),q.w=i.w,q.h=i.w-200,q.src=i.img1,q.fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",q.x=600,s[19].populate(q),r=s[17];const Y={};s[20]=this.element({parent:r||"root"},i),Y.w=i.w,Y.h=i.w-200,Y.src=i.img1,Y.fit="{ type: 'cover', position: { y: 1, x: 1 } }",Y.x=1200,s[20].populate(Y),r=s[14];const Z={};s[21]=this.element({parent:r||"root"},i),Z.x=100,Z.y=500,Z.content=i.titles.t4,Z.__textnode=!0,s[21].populate(Z),r=s[14];const K={};s[22]=this.element({parent:r||"root"},i),K.y=570,K.x=100,s[22].populate(K),r=s[22];const ee={};s[23]=this.element({parent:r||"root"},i),ee.w=i.w-350,ee.h=i.w-100,ee.src=i.img1,ee.fit="{ type: 'cover', position: { x: 0 } }",s[23].populate(ee),r=s[22];const re={};s[24]=this.element({parent:r||"root"},i),re.w=i.w-350,re.h=i.w-100,re.src=i.img1,re.fit="{ type: 'cover', position: { x: 0.25 } }",re.x=250,s[24].populate(re),r=s[22];const ce={};s[25]=this.element({parent:r||"root"},i),ce.w=i.w-350,ce.h=i.w-100,ce.src=i.img1,ce.fit="{ type: 'cover', position: { x: 0.5 } }",ce.x=500,s[25].populate(ce),r=s[22];const we={};s[26]=this.element({parent:r||"root"},i),we.w=i.w-350,we.h=i.w-100,we.src=i.img1,we.fit="{ type: 'cover', position: { x: 0.75 } }",we.x=750,s[26].populate(we),r=s[22];const be={};s[27]=this.element({parent:r||"root"},i),be.w=i.w-350,be.h=i.w-100,be.src=i.img1,be.fit="{ type: 'cover', position: { x: 1 } }",be.x=1e3,s[27].populate(be),r=s[0];const Te={};s[28]=this.element({parent:r||"root"},i),Te.x={transition:{value:i.pages.x3,duration:200}},Te.y=90,s[28].populate(Te),r=s[28];const ke={};s[29]=this.element({parent:r||"root"},i),ke.x=100,ke.content="Image dimensions: 2560 X 1440",ke.__textnode=!0,s[29].populate(ke),r=s[28];const pe={};s[30]=this.element({parent:r||"root"},i),pe.x=100,pe.y=80,pe.content=i.titles.t5,pe.__textnode=!0,s[30].populate(pe),r=s[28];const Le={};s[31]=this.element({parent:r||"root"},i),Le.y=150,Le.x=100,Le.w=i.w+100,Le.h=i.w-200,Le.color="0x000000ff",s[31].populate(Le),r=s[31];const $={};s[32]=this.element({parent:r||"root"},i),$.w=i.w+100,$.h=i.w-200,$.src=i.img,$.fit="contain",s[32].populate($),r=s[28];const Ie={};s[33]=this.element({parent:r||"root"},i),Ie.x=100,Ie.y=500,Ie.content=i.titles.t6,Ie.__textnode=!0,s[33].populate(Ie),r=s[28];const Pe={};s[34]=this.element({parent:r||"root"},i),Pe.y=550,Pe.x=100,Pe.w=i.w+100,Pe.h=i.w-100,Pe.color="0x000000ff",s[34].populate(Pe),r=s[34];const $e={};s[35]=this.element({parent:r||"root"},i),$e.w=i.w+100,$e.h=i.w-100,$e.src=i.img,$e.fit="contain",s[35].populate($e),r=s[0];const Xe={};return s[36]=this.element({parent:r||"root"},i),Xe.x=1700,Xe.y=20,Xe.content="Page "+i.activePage+"/"+i.totalPages,Xe.__textnode=!0,s[36].populate(Xe),s},effects:[function(r,i,l,d,y,x){i[2].set("x",{transition:{value:r.pages.x1,duration:200}})},function(r,i,l,d,y,x){i[3].set("content","Image dimensions: 2560 X 1440")},function(r,i,l,d,y,x){i[14].set("x",{transition:{value:r.pages.x2,duration:200}})},function(r,i,l,d,y,x){i[15].set("content","Image dimensions: 1440 X 2560")},function(r,i,l,d,y,x){i[28].set("x",{transition:{value:r.pages.x3,duration:200}})},function(r,i,l,d,y,x){i[29].set("content","Image dimensions: 2560 X 1440")},function(r,i,l,d,y,x){i[36].set("content","Page "+r.activePage+"/"+r.totalPages)}],context:{}},state(){return{activePage:1,pages:{x1:0,x2:1920,x3:1920*2},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages(){return Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let c=1;c<=this.totalPages;c++)this.pages[`x${c}`]=this.pages[`x${c}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let c=this.totalPages;c>=1;c--)this.pages[`x${c}`]=this.pages[`x${c}`]+1920;this.activePage-=1}}}}),yL=ut.Component("Flags",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),s[0].populate(m),r=s[0];const C=[],w=(I=[],O,T)=>{const L=x(I),j=new Set;let U=L.length;for(;U--;)L[U],j.add(""+U);let V=T.length;for(;V--;)if(j.has(T[V])===!1){const Q=T[V];O[1][Q]&&O[1][Q].destroy(),delete O[1][Q],O[2][Q]&&O[2][Q].destroy(),delete O[2][Q],O[3][Q]&&O[3][Q].destroy(),delete O[3][Q]}T.length=0;const z=L.length,G=[];for(let Q=0;Q<z;Q++){const te=Object.create(i);r=O[0],te.language=L[Q],te.index=Q,te.key=""+Q,T.push(te.key),r=O[0],O[1]===void 0&&(O[1]={});const le={};O[1][te.key]===void 0&&(O[1][te.key]=this.element({parent:r||"root"},i)),le.x=te.index*250,O[1][te.key].nodeId===void 0&&O[1][te.key].populate(le),r=O[1][te.key],O[2]===void 0&&(O[2]={});const he={};O[2][te.key]===void 0&&(O[2][te.key]=this.element({parent:r||"root"},i)),he.src=te.language.flag,he.w=150,he.h=150,he.alpha=te.index===te.activeIndex?1:.6,O[2][te.key].nodeId===void 0&&O[2][te.key].populate(he),r=O[1][te.key],O[3]===void 0&&(O[3]={});const fe={};O[3][te.key]===void 0&&(O[3][te.key]=this.element({parent:r||"root"},i)),fe.content=te.language.name,fe.y=150,fe.maxwidth=150,fe.align="center",fe.color=te.index===te.activeIndex?"0xffffffff":"0xaaaaaaff",fe.__textnode=!0,O[3][te.key].nodeId===void 0&&O[3][te.key].populate(fe)}return G};let v;return y(()=>{i[Symbol.for("removeGlobalEffects")](v),v=null,v=w(i.languages,s,C)},"languages"),y(()=>{i.activeIndex;for(let I=0;I<i.languages.length;I++){const O={};O.index=I,O.language=i.languages[I],O.key=I,s[2][O.key].set("alpha",O.index===i.activeIndex?1:.6)}}),y(()=>{i.activeIndex;for(let I=0;I<i.languages.length;I++){const O={};O.index=I,O.language=i.languages[I],O.key=I,s[3][O.key].set("color",O.index===i.activeIndex?"0xffffffff":"0xaaaaaaff")}}),s},effects:[],context:{}},props:["languages"],state(){return{activeIndex:0}},watch:{activeIndex(c){const r=this.languages[c];r&&r.code&&this.$language.set(r.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),vL=ut.Component("LanguagePlugin",{components:{Flags:yL},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),s[0].populate(I),w===!0&&(v-=1);const O=l.components&&l.components.Flags||d.Flags;r=s[0];const T={};s[1]=this.element({parent:r||"root"},w===!0?C:i),T.languages=i.languages,T.ref="flags",T.x=500,T.y=150;const L=[];if(typeof O<"u")for(let te in O.config.props)delete T[O.config.props[te]],L.push(O.config.props[te]);s[1].populate(T),w===!0&&(v-=1),r=s[1];const j={};j.languages=i.languages,j.ref="flags",j.x=500,j.y=150,m=j.is||"Flags";let U;if(typeof m=="string"){if(U=l.components&&l.components[m]||d[m],!U)throw new Error('Component "Flags" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(U=m);s[2]=U.call(null,{props:j},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],C=s[2],w=!0):r=s[2][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),r=s[0];const V={};s[3]=this.element({parent:r||"root"},w===!0?C:i),V.x=960,V.y=540,V.mount=.5,V.content=i.$language.translate("hello"),V.size=80,V.__textnode=!0,s[3].populate(V),w===!0&&(v-=1),r=s[0];const z={};s[4]=this.element({parent:r||"root"},w===!0?C:i),z.x=960,z.y=640,z.mount=.5,z.content=i.$language.translate("bye"),z.size=50,z.__textnode=!0,s[4].populate(z),w===!0&&(v-=1),r=s[0];const G={};s[5]=this.element({parent:r||"root"},w===!0?C:i),G.x=960,G.y=720,G.mount=.5,G.content=i.$language.translate("replacement",{first:"John",last:"Doe",age:18}),G.size=36,G.__textnode=!0,s[5].populate(G),w===!0&&(v-=1),r=s[0];const Q={};return s[6]=this.element({parent:r||"root"},w===!0?C:i),Q.size=32,Q.x=960,Q.y=940,Q.mount=.5,Q.align="center",Q.content="Current language: "+i.$language.language+`
 Language file: `+(i.loaded===!0?"Loaded":"loading ..."),Q.__textnode=!0,s[6].populate(Q),w===!0&&(v-=1),s},effects:[function(r,i,l,d,y,x){i[3].set("content",r.$language.translate("hello"))},function(r,i,l,d,y,x){i[4].set("content",r.$language.translate("bye"))},function(r,i,l,d,y,x){i[5].set("content",r.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(r,i,l,d,y,x){i[6].set("content","Current language: "+r.$language.language+`
 Language file: `+(r.loaded===!0?"Loaded":"loading ..."))}],context:{}},state(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.select("flags").focus()}}}),xL=ut.Component("Accent",{code:{render:function(r,i,l,d,y,x){const s=[],m={};s[0]=this.element({parent:r||"root"},i),m.w=300,m.h=250,m.color=i.bColor,m.effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),r=s[0];const C={};return s[1]=this.element({parent:r||"root"},i),C.x=150,C.y=125,C.mount="{x:0.5, y:0.5}",C.content=i.lang,C.color="0xffffffff",C.font="lato-black",C.__textnode=!0,s[1].populate(C),s},effects:[function(r,i,l,d,y,x){i[0].set("color",r.bColor)},function(r,i,l,d,y,x){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(r,i,l,d,y,x){i[1].set("content",r.lang)}],context:{}},state(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),wL=ut.Component("Accents",{components:{Accent:xL},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1;const I={};s[0]=this.element({parent:r||"root"},v===!0?w:i),s[0].populate(I),r=s[0];const O={};s[1]=this.element({parent:r||"root"},v===!0?w:i),O.x={transition:i.x},s[1].populate(O),r=s[1];const T=[],L=(V=[],z,G)=>{const Q=x(V),te=new Set;let le=Q.length;for(;le--;){const q=Q[le];te.add(""+q.lang)}let he=G.length;for(;he--;)if(te.has(G[he])===!1){const q=G[he];z[2][q]&&z[2][q].destroy(),delete z[2][q],z[3][q]&&z[3][q].destroy(),delete z[3][q]}G.length=0;const fe=Q.length,k=[];for(let q=0;q<fe;q++){const Y=Object.create(i);r=z[1],Y.item=Q[q],Y.index=q,Y.key=""+Y.item.lang,G.push(Y.key);const Z=l.components&&l.components.Accent||d.Accent;z[2]===void 0&&(z[2]={});const K={};z[2][Y.key]===void 0&&(z[2][Y.key]=this.element({parent:r||"root"},v===!0?w:i)),K.lang=Y.item.lang,K.ref="accent"+Y.index,K.x=Y.index*400;const ee=[];if(typeof Z<"u")for(let we in Z.config.props)delete K[Z.config.props[we]],ee.push(Z.config.props[we]);z[2][Y.key].nodeId===void 0&&z[2][Y.key].populate(K),z[3]===void 0&&(z[3]={}),r=z[2][Y.key];const re={};if(z[3][Y.key]===void 0){re.lang=Y.item.lang,C="accent"+Y.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),re.ref=C,re.x=Y.index*400,m=re.is||"Accent";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||d[m],!we)throw new Error('Component "Accent" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);z[3][Y.key]=we.call(null,{props:re},z[2][Y.key],i),z[3][Y.key][Symbol.for("slots")][0]?(r=z[3][Y.key][Symbol.for("slots")][0],w=z[3][Y.key],v=!0):r=z[3][Y.key][Symbol.for("children")][0]}let ce=()=>{(typeof ee>"u"||ee.indexOf("ref")===-1)&&z[2][Y.key].set("ref","accent"+Y.index)};y(ce,null),k.push(ce),z[3][Y.key][Symbol.for("props")].ref="accent"+Y.index}return k};let j;y(()=>{i[Symbol.for("removeGlobalEffects")](j),j=null,j=L(i.data,s,T)},"data"),r=s[0];const U={};return s[4]=this.element({parent:r||"root"},v===!0?w:i),U.content=i.activeAccent,U.font="lato-black",U.x=960,U.y=400,U.mount="{x:0.5}",U.letterspacing=10,U.size=40,U.__textnode=!0,s[4].populate(U),s},effects:[function(r,i,l,d,y,x){i[1].set("x",{transition:r.x})},function(r,i,l,d,y,x){i[4].set("content",r.activeAccent)}],context:{}},props:["data"],state(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex(c){const r=this.$select(`accent${c}`);r&&r.$focus&&(r.$focus(),this.activeAccent=this.data[c].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(c){const r=this.activeIndex+c;this.x=r>3?-(r-3)*400-160:160,this.activeIndex=r}}}),SL=ut.Component("Characters",{components:{Accents:wL},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),I.w=1920,s[0].populate(I),w===!0&&(v-=1),r=s[0];const O={};s[1]=this.element({parent:r||"root"},w===!0?C:i),O.x=960,O.y=50,O.mount="{x:0.5}",O.content="Alphabets",O.font="lato-black",O.size=60,O.__textnode=!0,s[1].populate(O),w===!0&&(v-=1),r=s[0];const T={};s[2]=this.element({parent:r||"root"},w===!0?C:i),T.x=960,T.y=150,T.mount="{x:0.5}",T.content=i.alphabets,T.font="lato-black",T.size=40,T.letterspacing=10,T.__textnode=!0,s[2].populate(T),w===!0&&(v-=1),r=s[0];const L={};s[3]=this.element({parent:r||"root"},w===!0?C:i),L.x=960,L.y=290,L.mount="{x:0.5}",L.content="Accents",L.font="lato-black",L.size=60,L.__textnode=!0,s[3].populate(L),w===!0&&(v-=1);const j=l.components&&l.components.Accents||d.Accents;r=s[0];const U={};s[4]=this.element({parent:r||"root"},w===!0?C:i),U.data=i.accents,U.y=400,U.ref="accents";const V=[];if(typeof j<"u")for(let le in j.config.props)delete U[j.config.props[le]],V.push(j.config.props[le]);s[4].populate(U),w===!0&&(v-=1),r=s[4];const z={};z.data=i.accents,z.y=400,z.ref="accents",m=z.is||"Accents";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||d[m],!G)throw new Error('Component "Accents" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);s[5]=G.call(null,{props:z},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],C=s[5],w=!0):r=s[5][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),r=s[0];const Q={};s[6]=this.element({parent:r||"root"},w===!0?C:i),Q.w=950,Q.h=40,Q.color="0x000000ff",Q.effects=[i.shader("radius",{radius:10})],Q.y=1e3,Q.placement="center",s[6].populate(Q),w===!0&&(v-=1),r=s[6];const te={};return s[7]=this.element({parent:r||"root"},w===!0?C:i),te.content="The character ? represents a character that is not supported by the Lato-Black font",te.size=25,te.x=475,te.y=20,te.mount="{x:0.5, y:0.5}",te.__textnode=!0,s[7].populate(te),w===!0&&(v-=1),s},effects:[function(r,i,l,d,y,x){i[6].set("effects",[r.shader("radius",{radius:10})])}],context:{}},state(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus(){const c=this.$select("accents");c&&c.$focus&&c.$focus()}}}),CL=ut.Component("Layout",{components:{Ball:jC},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w=!1,v=0;const I={};s[0]=this.element({parent:r||"root"},w===!0?C:i),I.w=1920,I.h=1080,I.color="0xc4b5fdff",s[0].populate(I),w===!0&&(v-=1),r=s[0];const O={};s[1]=this.element({parent:r||"root"},w===!0?C:i),O.x=40,O.y=40,s[1].populate(O),w===!0&&(v-=1),r=s[1];const T={};s[2]=this.element({parent:r||"root"},w===!0?C:i),T.color="0x222222ff",T.content="Static horizontal Layout",T.__textnode=!0,s[2].populate(T),w===!0&&(v-=1),r=s[1];const L={};s[3]=this.element({parent:r||"root"},w===!0?C:i),L.y=50,L.gap=10,L.__layout=!0,s[3].populate(L),w===!0&&(v-=1),r=s[3];const j={};s[4]=this.element({parent:r||"root"},w===!0?C:i),j.w=50,j.h=100,j.color="0xeff6ffff",s[4].populate(j),w===!0&&(v-=1),r=s[3];const U={};s[5]=this.element({parent:r||"root"},w===!0?C:i),U.w=60,U.h=100,U.color="0xbfdbfeff",s[5].populate(U),w===!0&&(v-=1),r=s[3];const V={};s[6]=this.element({parent:r||"root"},w===!0?C:i),V.w=70,V.h=100,V.color="0x60a5faff",s[6].populate(V),w===!0&&(v-=1),r=s[3];const z={};s[7]=this.element({parent:r||"root"},w===!0?C:i),z.w=80,z.h=100,z.color="0x2563ebff",s[7].populate(z),w===!0&&(v-=1),r=s[3];const G={};s[8]=this.element({parent:r||"root"},w===!0?C:i),G.w=90,G.h=100,G.color="0x1e40afff",s[8].populate(G),w===!0&&(v-=1),r=s[0];const Q={};s[9]=this.element({parent:r||"root"},w===!0?C:i),Q.x=40,Q.y=220,s[9].populate(Q),w===!0&&(v-=1),r=s[9];const te={};s[10]=this.element({parent:r||"root"},w===!0?C:i),te.color="0x222222ff",te.content="Static vertical Layout",te.__textnode=!0,s[10].populate(te),w===!0&&(v-=1),r=s[9];const le={};s[11]=this.element({parent:r||"root"},w===!0?C:i),le.y=50,le.gap=10,le.direction="vertical",le.__layout=!0,s[11].populate(le),w===!0&&(v-=1),r=s[11];const he={};s[12]=this.element({parent:r||"root"},w===!0?C:i),he.w=100,he.h=50,he.color="0xeff6ffff",s[12].populate(he),w===!0&&(v-=1),r=s[11];const fe={};s[13]=this.element({parent:r||"root"},w===!0?C:i),fe.w=100,fe.h=60,fe.color="0xbfdbfeff",s[13].populate(fe),w===!0&&(v-=1),r=s[11];const k={};s[14]=this.element({parent:r||"root"},w===!0?C:i),k.w=100,k.h=70,k.color="0x60a5faff",s[14].populate(k),w===!0&&(v-=1),r=s[11];const q={};s[15]=this.element({parent:r||"root"},w===!0?C:i),q.w=100,q.h=80,q.color="0x2563ebff",s[15].populate(q),w===!0&&(v-=1),r=s[11];const Y={};s[16]=this.element({parent:r||"root"},w===!0?C:i),Y.w=100,Y.h=90,Y.color="0x1e40afff",s[16].populate(Y),w===!0&&(v-=1),r=s[0];const Z={};s[17]=this.element({parent:r||"root"},w===!0?C:i),Z.x=40,Z.y=700,s[17].populate(Z),w===!0&&(v-=1),r=s[17];const K={};s[18]=this.element({parent:r||"root"},w===!0?C:i),K.color="0x222222ff",K.content="Nested Layouts",K.__textnode=!0,s[18].populate(K),w===!0&&(v-=1),r=s[17];const ee={};s[19]=this.element({parent:r||"root"},w===!0?C:i),ee.y=50,ee.gap=10,ee.direction="horizontal",ee.__layout=!0,s[19].populate(ee),w===!0&&(v-=1),r=s[19];const re={};s[20]=this.element({parent:r||"root"},w===!0?C:i),re.w=100,re.h=50,re.color="0xeff6ffff",s[20].populate(re),w===!0&&(v-=1),r=s[19];const ce={};s[21]=this.element({parent:r||"root"},w===!0?C:i),ce.w=100,ce.h=60,ce.color="0xbfdbfeff",s[21].populate(ce),w===!0&&(v-=1),r=s[19];const we={};s[22]=this.element({parent:r||"root"},w===!0?C:i),we.direction="vertical",we.gap=10,we.__layout=!0,s[22].populate(we),w===!0&&(v-=1),r=s[22];const be={};s[23]=this.element({parent:r||"root"},w===!0?C:i),be.w=100,be.h=70,be.color="0x60a5faff",s[23].populate(be),w===!0&&(v-=1),r=s[22];const Te={};s[24]=this.element({parent:r||"root"},w===!0?C:i),Te.w=100,Te.h=70,Te.color="0x60a5faff",s[24].populate(Te),w===!0&&(v-=1),r=s[22];const ke={};s[25]=this.element({parent:r||"root"},w===!0?C:i),ke.w=100,ke.h=70,ke.color="0x60a5faff",s[25].populate(ke),w===!0&&(v-=1),r=s[22];const pe={};s[26]=this.element({parent:r||"root"},w===!0?C:i),pe.gap=50,pe.__layout=!0,s[26].populate(pe),w===!0&&(v-=1),r=s[26];const Le={};s[27]=this.element({parent:r||"root"},w===!0?C:i),Le.w=50,Le.h=50,Le.color="0x2563ebff",s[27].populate(Le),w===!0&&(v-=1),r=s[26];const $={};s[28]=this.element({parent:r||"root"},w===!0?C:i),$.w=50,$.h=50,$.color="0x2563ebff",s[28].populate($),w===!0&&(v-=1),r=s[26];const Ie={};s[29]=this.element({parent:r||"root"},w===!0?C:i),Ie.w=50,Ie.h=50,Ie.color="0x2563ebff",s[29].populate(Ie),w===!0&&(v-=1),r=s[19];const Pe={};s[30]=this.element({parent:r||"root"},w===!0?C:i),Pe.w=100,Pe.h=80,Pe.color="0x2563ebff",s[30].populate(Pe),w===!0&&(v-=1),r=s[19];const $e={};s[31]=this.element({parent:r||"root"},w===!0?C:i),$e.w=100,$e.h=90,$e.color="0x1e40afff",s[31].populate($e),w===!0&&(v-=1),r=s[0];const Xe={};s[32]=this.element({parent:r||"root"},w===!0?C:i),Xe.x=800,Xe.y=40,s[32].populate(Xe),w===!0&&(v-=1),r=s[32];const et={};s[33]=this.element({parent:r||"root"},w===!0?C:i),et.color="0x222222ff",et.content="Layout with Text",et.__textnode=!0,s[33].populate(et),w===!0&&(v-=1),r=s[32];const We={};s[34]=this.element({parent:r||"root"},w===!0?C:i),We.y=50,We.gap=20,We.__layout=!0,s[34].populate(We),w===!0&&(v-=1),r=s[34];const nt={};s[35]=this.element({parent:r||"root"},w===!0?C:i),nt.w=3,nt.h=32,nt.color="0x60a5faff",s[35].populate(nt),w===!0&&(v-=1),r=s[34];const me={};s[36]=this.element({parent:r||"root"},w===!0?C:i),me.color="0x1e40afff",me.content="Hello",me.__textnode=!0,s[36].populate(me),w===!0&&(v-=1),r=s[34];const wt={};s[37]=this.element({parent:r||"root"},w===!0?C:i),wt.w=3,wt.h=32,wt.color="0x60a5faff",s[37].populate(wt),w===!0&&(v-=1),r=s[34];const ft={};s[38]=this.element({parent:r||"root"},w===!0?C:i),ft.content="World",ft.color="0x1e40afff",ft.__textnode=!0,s[38].populate(ft),w===!0&&(v-=1),r=s[34];const ot={};s[39]=this.element({parent:r||"root"},w===!0?C:i),ot.w=3,ot.h=32,ot.color="0x60a5faff",s[39].populate(ot),w===!0&&(v-=1),r=s[0];const St={};s[40]=this.element({parent:r||"root"},w===!0?C:i),St.x=800,St.y=210,s[40].populate(St),w===!0&&(v-=1),r=s[40];const tt={};s[41]=this.element({parent:r||"root"},w===!0?C:i),tt.color="0x222222ff",tt.content="Dynamic dimensions Layout",tt.__textnode=!0,s[41].populate(tt),w===!0&&(v-=1),r=s[40];const rt={};s[42]=this.element({parent:r||"root"},w===!0?C:i),rt.y=50,rt.gap=20,rt["@updated"]=i.dynamicLayoutUpdated&&i.dynamicLayoutUpdated.bind(i),rt.__layout=!0,s[42].populate(rt),w===!0&&(v-=1),r=s[42];const Ge={};s[43]=this.element({parent:r||"root"},w===!0?C:i),Ge.w=i.w*.5,Ge.h=60,Ge.color="0xeff6ffff",s[43].populate(Ge),w===!0&&(v-=1),r=s[42];const ze={};s[44]=this.element({parent:r||"root"},w===!0?C:i),ze.w=i.w*.6,ze.h=60,ze.color="0xbfdbfeff",s[44].populate(ze),w===!0&&(v-=1),r=s[42];const Oe={};s[45]=this.element({parent:r||"root"},w===!0?C:i),Oe.w=i.w*.7,Oe.h=60,Oe.color="0x60a5faff",s[45].populate(Oe),w===!0&&(v-=1),r=s[42];const W={};s[46]=this.element({parent:r||"root"},w===!0?C:i),W.w=i.w*.8,W.h=60,W.color="0x2563ebff",s[46].populate(W),w===!0&&(v-=1),r=s[42];const Ve={};s[47]=this.element({parent:r||"root"},w===!0?C:i),Ve.w=i.w*.9,Ve.h=60,Ve.color="0x1e40afff",s[47].populate(Ve),w===!0&&(v-=1),r=s[0];const qe={};s[48]=this.element({parent:r||"root"},w===!0?C:i),qe.x=800,qe.y=400,s[48].populate(qe),w===!0&&(v-=1),r=s[48];const ht={};s[49]=this.element({parent:r||"root"},w===!0?C:i),ht.color="0x222222ff",ht.content="For loop Layout",ht.__textnode=!0,s[49].populate(ht),w===!0&&(v-=1),r=s[48];const vt={};s[50]=this.element({parent:r||"root"},w===!0?C:i),vt.y=50,vt.gap=20,vt.__layout=!0,s[50].populate(vt),w===!0&&(v-=1),r=s[50];const Ae=[],Ue=(lt=[],Re,dt)=>{const oo=x(lt),vo=new Set;let yi=oo.length;for(;yi--;)oo[yi],vo.add(""+yi);let ro=dt.length;for(;ro--;)if(vo.has(dt[ro])===!1){const Gt=dt[ro];Re[51][Gt]&&Re[51][Gt].destroy(),delete Re[51][Gt]}dt.length=0;const xo=oo.length,Dr=[];for(let Gt=0;Gt<xo;Gt++){const Et=Object.create(i);r=Re[50],Et.color=oo[Gt],Et.undefined=Gt,Et.key=""+Gt,dt.push(Et.key),r=Re[50],Re[51]===void 0&&(Re[51]={});const so={};Re[51][Et.key]===void 0&&(Re[51][Et.key]=this.element({parent:r||"root"},w===!0?C:i)),so.w=60,so.h=60,so.color=Et.color,Re[51][Et.key].nodeId===void 0&&(Re[51][Et.key].populate(so),w===!0&&(v-=1))}return Dr};let Qe;y(()=>{i[Symbol.for("removeGlobalEffects")](Qe),Qe=null,Qe=Ue(i.colors,s,Ae)},"colors"),y(()=>{i.color;for(let lt=0;lt<i.colors.length;lt++){const Re={};Re.undefined=lt,Re.color=i.colors[lt],Re.key=lt,s[51][Re.key].set("color",Re.color)}}),r=s[0];const Se={};s[52]=this.element({parent:r||"root"},w===!0?C:i),Se.x=800,Se.y=600,s[52].populate(Se),w===!0&&(v-=1),r=s[52];const ae={};s[53]=this.element({parent:r||"root"},w===!0?C:i),ae.color="0x222222ff",ae.content="Layout with transitions",ae.__textnode=!0,s[53].populate(ae),w===!0&&(v-=1),r=s[52];const Ne={};s[54]=this.element({parent:r||"root"},w===!0?C:i),Ne.direction="horizontal",Ne.gap=20,Ne.y=60,Ne.__layout=!0,s[54].populate(Ne),w===!0&&(v-=1),r=s[54];const xt=[],Ut=(lt=[],Re,dt)=>{const oo=x(lt),vo=new Set;let yi=oo.length;for(;yi--;)oo[yi],vo.add(""+yi);let ro=dt.length;for(;ro--;)if(vo.has(dt[ro])===!1){const Gt=dt[ro];Re[55][Gt]&&Re[55][Gt].destroy(),delete Re[55][Gt],Re[56][Gt]&&Re[56][Gt].destroy(),delete Re[56][Gt],Re[57][Gt]&&Re[57][Gt].destroy(),delete Re[57][Gt],Re[58][Gt]&&Re[58][Gt].destroy(),delete Re[58][Gt],Re[59][Gt]&&Re[59][Gt].destroy(),delete Re[59][Gt],Re[60][Gt]&&Re[60][Gt].destroy(),delete Re[60][Gt]}dt.length=0;const xo=oo.length,Dr=[];for(let Gt=0;Gt<xo;Gt++){const Et=Object.create(i);r=Re[54],Et.color=oo[Gt],Et.undefined=Gt,Et.key=""+Gt,dt.push(Et.key),r=Re[54],Re[55]===void 0&&(Re[55]={});const so={};Re[55][Et.key]===void 0&&(Re[55][Et.key]=this.element({parent:r||"root"},w===!0?C:i)),so.h=100,so.w={transition:{value:Et.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},so.color=Et.color,Re[55][Et.key].nodeId===void 0&&(Re[55][Et.key].populate(so),w===!0&&(v-=1)),r=Re[55][Et.key],Re[56]===void 0&&(Re[56]={});const Bo={};Re[56][Et.key]===void 0&&(Re[56][Et.key]=this.element({parent:r||"root"},w===!0?C:i)),Bo.gap=10,Bo.x=10,Bo.y=35,Bo.__layout=!0,Re[56][Et.key].nodeId===void 0&&(Re[56][Et.key].populate(Bo),w===!0&&(v-=1)),r=Re[56][Et.key],Re[57]===void 0&&(Re[57]={});const Or={};Re[57][Et.key]===void 0&&(Re[57][Et.key]=this.element({parent:r||"root"},w===!0?C:i)),Or.h=20,Or.w={transition:{value:Et.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Or.color="0xffffffff",Re[57][Et.key].nodeId===void 0&&(Re[57][Et.key].populate(Or),w===!0&&(v-=1)),r=Re[56][Et.key],Re[58]===void 0&&(Re[58]={});const Vi={};Re[58][Et.key]===void 0&&(Re[58][Et.key]=this.element({parent:r||"root"},w===!0?C:i)),Vi.h=20,Vi.w={transition:{value:Et.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Vi.color="0xccccccff",Re[58][Et.key].nodeId===void 0&&(Re[58][Et.key].populate(Vi),w===!0&&(v-=1)),r=Re[56][Et.key],Re[59]===void 0&&(Re[59]={});const Li={};Re[59][Et.key]===void 0&&(Re[59][Et.key]=this.element({parent:r||"root"},w===!0?C:i)),Li.h=20,Li.w={transition:{value:Et.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Li.color="0x333333ff",Re[59][Et.key].nodeId===void 0&&(Re[59][Et.key].populate(Li),w===!0&&(v-=1)),r=Re[56][Et.key],Re[60]===void 0&&(Re[60]={});const Hi={};Re[60][Et.key]===void 0&&(Re[60][Et.key]=this.element({parent:r||"root"},w===!0?C:i)),Hi.h=20,Hi.w={transition:{value:Et.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Hi.color="0x000000ff",Re[60][Et.key].nodeId===void 0&&(Re[60][Et.key].populate(Hi),w===!0&&(v-=1))}return Dr};let Ft;y(()=>{i[Symbol.for("removeGlobalEffects")](Ft),Ft=null,Ft=Ut(i.colors,s,xt)},"colors"),y(()=>{i.w3;for(let lt=0;lt<i.colors.length;lt++){const Re={};Re.undefined=lt,Re.color=i.colors[lt],Re.key=lt,s[55][Re.key].set("w",{transition:{value:i.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),y(()=>{i.color;for(let lt=0;lt<i.colors.length;lt++){const Re={};Re.undefined=lt,Re.color=i.colors[lt],Re.key=lt,s[55][Re.key].set("color",Re.color)}}),y(()=>{i.w2;for(let lt=0;lt<i.colors.length;lt++){const Re={};Re.undefined=lt,Re.color=i.colors[lt],Re.key=lt,s[57][Re.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),y(()=>{i.w2;for(let lt=0;lt<i.colors.length;lt++){const Re={};Re.undefined=lt,Re.color=i.colors[lt],Re.key=lt,s[58][Re.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),y(()=>{i.w2;for(let lt=0;lt<i.colors.length;lt++){const Re={};Re.undefined=lt,Re.color=i.colors[lt],Re.key=lt,s[59][Re.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),y(()=>{i.w2;for(let lt=0;lt<i.colors.length;lt++){const Re={};Re.undefined=lt,Re.color=i.colors[lt],Re.key=lt,s[60][Re.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),r=s[0];const Tt={};s[61]=this.element({parent:r||"root"},w===!0?C:i),Tt.x=800,Tt.y=840,s[61].populate(Tt),w===!0&&(v-=1),r=s[61];const Vt={};s[62]=this.element({parent:r||"root"},w===!0?C:i),Vt.color="0x222222ff",Vt.content="Layout with padding",Vt.__textnode=!0,s[62].populate(Vt),w===!0&&(v-=1),r=s[61];const un={};s[63]=this.element({parent:r||"root"},w===!0?C:i),un.direction="horizontal",un.gap=20,un.y=60,un.padding=20,un.color="0xffffffff",un.__layout=!0,s[63].populate(un),w===!0&&(v-=1),r=s[63];const li={};s[64]=this.element({parent:r||"root"},w===!0?C:i),li.w=40,li.h=40,li.color="0xbfdbfeff",s[64].populate(li),w===!0&&(v-=1),r=s[63];const Xn={};s[65]=this.element({parent:r||"root"},w===!0?C:i),Xn.w=40,Xn.h=40,Xn.color="0x60a5faff",s[65].populate(Xn),w===!0&&(v-=1),r=s[63];const Nn={};s[66]=this.element({parent:r||"root"},w===!0?C:i),Nn.w=40,Nn.h=40,Nn.color="0x2563ebff",s[66].populate(Nn),w===!0&&(v-=1),r=s[61];const Un={};s[67]=this.element({parent:r||"root"},w===!0?C:i),Un.direction="horizontal",Un.gap=20,Un.y=60,Un.x=240,Un.padding={top:40,y:10,left:40,x:10},Un.color="0xffffffff",Un.__layout=!0,s[67].populate(Un),w===!0&&(v-=1),r=s[67];const bn={};s[68]=this.element({parent:r||"root"},w===!0?C:i),bn.w=40,bn.h=40,bn.color="0xbfdbfeff",s[68].populate(bn),w===!0&&(v-=1),r=s[67];const Qn={};s[69]=this.element({parent:r||"root"},w===!0?C:i),Qn.w=40,Qn.h=40,Qn.color="0x60a5faff",s[69].populate(Qn),w===!0&&(v-=1),r=s[67];const pn={};s[70]=this.element({parent:r||"root"},w===!0?C:i),pn.w=40,pn.h=40,pn.color="0x2563ebff",s[70].populate(pn),w===!0&&(v-=1),r=s[61];const Me={};s[71]=this.element({parent:r||"root"},w===!0?C:i),Me.direction="vertical",Me.gap=20,Me.y=60,Me.x=500,Me.padding=20,Me.color="0xffffffff",Me.__layout=!0,s[71].populate(Me),w===!0&&(v-=1),r=s[71];const Fe={};s[72]=this.element({parent:r||"root"},w===!0?C:i),Fe.w=40,Fe.h=20,Fe.color="0xbfdbfeff",s[72].populate(Fe),w===!0&&(v-=1),r=s[71];const Qt={};s[73]=this.element({parent:r||"root"},w===!0?C:i),Qt.w=40,Qt.h=20,Qt.color="0x60a5faff",s[73].populate(Qt),w===!0&&(v-=1),r=s[71];const vn={};s[74]=this.element({parent:r||"root"},w===!0?C:i),vn.w=40,vn.h=20,vn.color="0x2563ebff",s[74].populate(vn),w===!0&&(v-=1),r=s[61];const Cn={};s[75]=this.element({parent:r||"root"},w===!0?C:i),Cn.direction="vertical",Cn.gap=20,Cn.y=60,Cn.x=640,Cn.padding={top:40,y:10,left:40,x:10},Cn.color="0xffffffff",Cn.__layout=!0,s[75].populate(Cn),w===!0&&(v-=1),r=s[75];const cn={};s[76]=this.element({parent:r||"root"},w===!0?C:i),cn.w=40,cn.h=20,cn.color="0xbfdbfeff",s[76].populate(cn),w===!0&&(v-=1),r=s[75];const An={};s[77]=this.element({parent:r||"root"},w===!0?C:i),An.w=40,An.h=20,An.color="0x60a5faff",s[77].populate(An),w===!0&&(v-=1),r=s[75];const kn={};s[78]=this.element({parent:r||"root"},w===!0?C:i),kn.w=40,kn.h=20,kn.color="0x2563ebff",s[78].populate(kn),w===!0&&(v-=1),r=s[0];const Fn={};s[79]=this.element({parent:r||"root"},w===!0?C:i),Fn.x=1300,Fn.y=210,s[79].populate(Fn),w===!0&&(v-=1),r=s[79];const Ct={};s[80]=this.element({parent:r||"root"},w===!0?C:i),Ct.color="0x222222ff",Ct.content="Layout with a Component",Ct.__textnode=!0,s[80].populate(Ct),w===!0&&(v-=1),r=s[79];const Ze={};s[81]=this.element({parent:r||"root"},w===!0?C:i),Ze.y=50,Ze.gap=40,Ze.__layout=!0,s[81].populate(Ze),w===!0&&(v-=1),r=s[81];const Pn={};s[82]=this.element({parent:r||"root"},w===!0?C:i),Pn.w=100,Pn.h=100,Pn.color="0xff0000ff",s[82].populate(Pn),w===!0&&(v-=1),r=s[81];const Ht={};s[83]=this.element({parent:r||"root"},w===!0?C:i),Ht.w=i.w,Ht.h=100,Ht.color="0xff0000ff",s[83].populate(Ht),w===!0&&(v-=1);const In=l.components&&l.components.Ball||d.Ball;r=s[81];const hn={};s[84]=this.element({parent:r||"root"},w===!0?C:i),hn.y=500,hn.w=100;const Lt=[];if(typeof In<"u")for(let lt in In.config.props)delete hn[In.config.props[lt]],Lt.push(In.config.props[lt]);s[84].populate(hn),w===!0&&(v-=1),r=s[84];const gi={};gi.y=500,gi.w=100,m=gi.is||"Ball";let xn;if(typeof m=="string"){if(xn=l.components&&l.components[m]||d[m],!xn)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xn=m);s[85]=xn.call(null,{props:gi},s[84],i),s[85][Symbol.for("slots")][0]?(r=s[85][Symbol.for("slots")][0],C=s[85],w=!0):r=s[85][Symbol.for("children")][0],w===!0&&v===0&&(w=!1),r=s[81];const yo={};return s[86]=this.element({parent:r||"root"},w===!0?C:i),yo.w=100,yo.h=100,yo.color="0xff0000ff",s[86].populate(yo),w===!0&&(v-=1),s},effects:[function(r,i,l,d,y,x){i[43].set("w",r.w*.5)},function(r,i,l,d,y,x){i[44].set("w",r.w*.6)},function(r,i,l,d,y,x){i[45].set("w",r.w*.7)},function(r,i,l,d,y,x){i[46].set("w",r.w*.8)},function(r,i,l,d,y,x){i[47].set("w",r.w*.9)},function(r,i,l,d,y,x){i[67].set("padding",{top:40,y:10,left:40,x:10})},function(r,i,l,d,y,x){i[75].set("padding",{top:40,y:10,left:40,x:10})},function(r,i,l,d,y,x){i[83].set("w",r.w)}],context:{}},state(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready(){this.$setInterval(()=>{this.w=this.w===100?50:100,this.w2=this.w2===20?40:20,this.w3=this.w3===150?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(c){this.$log.info("Dynamic layout updated",c.w,c.h)}}}),FC=new URLSearchParams(window.location.search),TL=!!FC.get("source"),EL=!!FC.get("fps"),bL=ut.Application({components:{SourceInfo:_C},code:{render:function(r,i,l,d,y,x){const s=[];let m,C,w,v=!1,I=0;const O={};s[0]=this.element({parent:r||"root"},v===!0?w:i),O.w=1920,O.h=1080,O.color=i.backgroundColor,s[0].populate(O),v===!0&&(I-=1);const T=l.components&&l.components.RouterView||d.RouterView;r=s[0];const L={};s[1]=this.element({parent:r||"root"},v===!0?w:i),L.w=r.node.width*(100/100),L.h=r.node.height*(100/100);const j=[];if(typeof T<"u")for(let Z in T.config.props)delete L[T.config.props[Z]],j.push(T.config.props[Z]);s[1].populate(L),v===!0&&(I-=1),r=s[1];const U={};U.w=r.node.width*(100/100),U.h=r.node.height*(100/100),m=U.is||"RouterView";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||d[m],!V)throw new Error('Component "RouterView" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[2]=V.call(null,{props:U},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],w=s[2],v=!0):r=s[2][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const z=l.components&&l.components.FPScounter||d.FPScounter;r=s[0];const G={};s[3]=this.element({parent:r||"root"},v===!0?w:i),G.x=1610,G.show=i.showFPS;const Q=[];if(typeof z<"u")for(let Z in z.config.props)delete G[z.config.props[Z]],Q.push(z.config.props[Z]);s[3].populate(G),v===!0&&(I-=1),r=s[3];const te={};te.x=1610,C=i.showFPS,Array.isArray(C)===!0&&(C=x(C).slice(0)),te.show=C,m=te.is||"FPScounter";let le;if(typeof m=="string"){if(le=l.components&&l.components[m]||d[m],!le)throw new Error('Component "FPScounter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(le=m);s[4]=le.call(null,{props:te},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],w=s[4],v=!0):r=s[4][Symbol.for("children")][0],v===!0&&I===0&&(v=!1);const he=l.components&&l.components.SourceInfo||d.SourceInfo;r=s[0];const fe={};s[5]=this.element({parent:r||"root"},v===!0?w:i),fe.ref="info",fe.show=i.showInfo;const k=[];if(typeof he<"u")for(let Z in he.config.props)delete fe[he.config.props[Z]],k.push(he.config.props[Z]);s[5].populate(fe),v===!0&&(I-=1),r=s[5];const q={};q.ref="info",C=i.showInfo,Array.isArray(C)===!0&&(C=x(C).slice(0)),q.show=C,m=q.is||"SourceInfo";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||d[m],!Y)throw new Error('Component "SourceInfo" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);return s[6]=Y.call(null,{props:q},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],w=s[6],v=!0):r=s[6][Symbol.for("children")][0],v===!0&&I===0&&(v=!1),s},effects:[function(r,i,l,d,y,x){i[0].set("color",r.backgroundColor)},function(r,i,l,d,y,x){(typeof skip3>"u"||skip3.indexOf("show")===-1)&&i[3].set("show",r.showFPS)},function(r,i,l,d,y,x){i[4][Symbol.for("props")].show=r.showFPS},function(r,i,l,d,y,x){(typeof skip5>"u"||skip5.indexOf("show")===-1)&&i[5].set("show",r.showInfo)},function(r,i,l,d,y,x){i[6][Symbol.for("props")].show=r.showInfo}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:EL,showInfo:!1}},routes:[{path:"/",component:i_,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>z5(()=>import("./Loading-74723210.js"),[])},{path:"/demos/intro",component:()=>new Promise(c=>{c(r_)})},{path:"/demos/theming",component:u_},{path:"/demos/tmdb",component:w_},{path:"/demos/sprites",component:C_},{path:"/demos/focushandling",component:E_},{path:"/demos/memory-game",component:sL,announce:"Let's play Memory"},{path:"/demos/player",component:N_},{path:"/examples/positioning",component:b_},{path:"/examples/colors",component:U_},{path:"/examples/gradients",component:B_},{path:"/examples/transitions",component:j_},{path:"/examples/alpha",component:F_},{path:"/examples/scaling",component:$_},{path:"/examples/rotation",component:z_},{path:"/examples/keyinput",component:V_},{path:"/examples/texts",component:H_},{path:"/examples/images",component:G_},{path:"/examples/components",component:X_},{path:"/examples/forloop",component:W_},{path:"/examples/forloop-advanced",component:Z_},{path:"/examples/effects",component:J_},{path:"/examples/showif",component:eL},{path:"/examples/events",component:tL},{path:"/examples/slots",component:oL},{path:"/examples/viewport",component:lL},...mL,{path:"/examples/resize",component:gL},{path:"/examples/languageplugin",component:vL},{path:"/examples/special-characters",component:SL},{path:"/examples/layout",component:CL},{path:"/benchmarks/exponential",component:uL}],hooks:{ready(){TL===!0&&(this.showInfo=!0),this.$listen("changeBackground",c=>{this.backgroundColor=c?c+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(c){return c.key==="x"?(this.$log.info(`Intercepting key press (${c.key}) in App Component`),new Promise(r=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),r(c)},2e3)})):c},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const c=AL(this.$router.currentRoute.path);c&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${c}`,"_blank")}}}),AL=c=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/texts":"src/pages/Texts","/examples/images":"src/pages/Images","/examples/components":"src/pages/Components","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/resize":"src/pages/Resize","/examples/languageplugin":"src/pages/LanguagePlugin","/examples/characters":"src/pages/Characters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential","/examples/layout":"src/pages/Layout"})["/"+c]+".js",GS={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},XS={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};ut.Plugin(RC,"colors",{themes:{light:GS.light,dark:GS.dark},base:"light",current:"dark"});ut.Plugin(RC,"sizes",{themes:{small:XS.small,large:XS.large},base:"small",current:"small"});ut.Plugin(U5);ut.Launch(bL,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",keymap:{...j5(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100});export{ut as B,Oa as S};
